!(function(){var Mf=Math.pow;var m5=(It,G,D)=>new Promise((ee,ae)=>{var T=ge=>{try{Q(D.next(ge))}catch(pe){ae(pe)}},ne=ge=>{try{Q(D.throw(ge))}catch(pe){ae(pe)}},Q=ge=>ge.done?ee(ge.value):Promise.resolve(ge.value).then(T,ne);Q((D=D.apply(It,G)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[944],{25330:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};G.default=D},67303:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};G.default=D},83647:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};G.default=D},57583:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};G.default=D},29260:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};G.default=D},64183:function(It,G,D){"use strict";var ee=D(67294),ae=D(31934),T=function(){return T=Object.assign||function(Q){for(var ge,pe=1,Ce=arguments.length;pe<Ce;pe++){ge=arguments[pe];for(var he in ge)Object.prototype.hasOwnProperty.call(ge,he)&&(Q[he]=ge[he])}return Q},T.apply(this,arguments)},ne=function(Q){return ee.createElement(ae.P,T({},Q,{chartType:"Area"}))};G.Z=ne},79611:function(It,G,D){"use strict";var ee=D(67294),ae=D(31934),T=function(){return T=Object.assign||function(Q){for(var ge,pe=1,Ce=arguments.length;pe<Ce;pe++){ge=arguments[pe];for(var he in ge)Object.prototype.hasOwnProperty.call(ge,he)&&(Q[he]=ge[he])}return Q},T.apply(this,arguments)},ne=function(Q){return ee.createElement(ae.P,T({},Q,{chartType:"Bar"}))};G.Z=ne},31934:function(It,G,D){"use strict";D.d(G,{P:function(){return Whe}});var ee={};D.r(ee),D.d(ee,{area:function(){return zH},bottom:function(){return sg},bottomLeft:function(){return sg},bottomRight:function(){return sg},inside:function(){return sg},left:function(){return sg},outside:function(){return ZH},right:function(){return sg},spider:function(){return HH},surround:function(){return $H},top:function(){return sg},topLeft:function(){return sg},topRight:function(){return sg}});var ae={};D.r(ae),D.d(ae,{interpolateBlues:function(){return n$},interpolateBrBG:function(){return DW},interpolateBuGn:function(){return HW},interpolateBuPu:function(){return WW},interpolateCividis:function(){return u$},interpolateCool:function(){return p$},interpolateCubehelixDefault:function(){return h$},interpolateGnBu:function(){return $W},interpolateGreens:function(){return r$},interpolateGreys:function(){return i$},interpolateInferno:function(){return E$},interpolateMagma:function(){return x$},interpolateOrRd:function(){return GW},interpolateOranges:function(){return s$},interpolatePRGn:function(){return NW},interpolatePiYG:function(){return BW},interpolatePlasma:function(){return S$},interpolatePuBu:function(){return YW},interpolatePuBuGn:function(){return XW},interpolatePuOr:function(){return FW},interpolatePuRd:function(){return qW},interpolatePurples:function(){return a$},interpolateRainbow:function(){return v$},interpolateRdBu:function(){return zW},interpolateRdGy:function(){return UW},interpolateRdPu:function(){return KW},interpolateRdYlBu:function(){return jW},interpolateRdYlGn:function(){return ZW},interpolateReds:function(){return o$},interpolateSinebow:function(){return y$},interpolateSpectral:function(){return VW},interpolateTurbo:function(){return _$},interpolateViridis:function(){return b$},interpolateWarm:function(){return d$},interpolateYlGn:function(){return JW},interpolateYlGnBu:function(){return QW},interpolateYlOrBr:function(){return e$},interpolateYlOrRd:function(){return t$},schemeAccent:function(){return uW},schemeBlues:function(){return EL},schemeBrBG:function(){return tL},schemeBuGn:function(){return cL},schemeBuPu:function(){return fL},schemeCategory10:function(){return sW},schemeDark2:function(){return lW},schemeGnBu:function(){return hL},schemeGreens:function(){return SL},schemeGreys:function(){return wL},schemeObservable10:function(){return cW},schemeOrRd:function(){return dL},schemeOranges:function(){return CL},schemePRGn:function(){return nL},schemePaired:function(){return fW},schemePastel1:function(){return hW},schemePastel2:function(){return dW},schemePiYG:function(){return rL},schemePuBu:function(){return vL},schemePuBuGn:function(){return pL},schemePuOr:function(){return iL},schemePuRd:function(){return mL},schemePurples:function(){return TL},schemeRdBu:function(){return aL},schemeRdGy:function(){return oL},schemeRdPu:function(){return gL},schemeRdYlBu:function(){return sL},schemeRdYlGn:function(){return uL},schemeReds:function(){return AL},schemeSet1:function(){return pW},schemeSet2:function(){return vW},schemeSet3:function(){return mW},schemeSpectral:function(){return lL},schemeTableau10:function(){return gW},schemeYlGn:function(){return _L},schemeYlGnBu:function(){return yL},schemeYlOrBr:function(){return bL},schemeYlOrRd:function(){return xL}});var T={};D.r(T),D.d(T,{geoAlbers:function(){return Zz},geoAlbersUsa:function(){return tre},geoAzimuthalEqualArea:function(){return nre},geoAzimuthalEqualAreaRaw:function(){return gI},geoAzimuthalEquidistant:function(){return rre},geoAzimuthalEquidistantRaw:function(){return yI},geoConicConformal:function(){return are},geoConicConformalRaw:function(){return Wz},geoConicEqualArea:function(){return AA},geoConicEqualAreaRaw:function(){return jz},geoConicEquidistant:function(){return sre},geoConicEquidistantRaw:function(){return $z},geoEqualEarth:function(){return lre},geoEqualEarthRaw:function(){return _I},geoEquirectangular:function(){return ore},geoEquirectangularRaw:function(){return OE},geoGnomonic:function(){return cre},geoGnomonicRaw:function(){return bI},geoIdentity:function(){return fre},geoMercator:function(){return ire},geoMercatorRaw:function(){return CE},geoNaturalEarth1:function(){return hre},geoNaturalEarth1Raw:function(){return xI},geoOrthographic:function(){return dre},geoOrthographicRaw:function(){return EI},geoProjection:function(){return _m},geoProjectionMutator:function(){return vI},geoStereographic:function(){return pre},geoStereographicRaw:function(){return SI},geoTransverseMercator:function(){return vre},geoTransverseMercatorRaw:function(){return wI}});var ne={};D.r(ne),D.d(ne,{frequency:function(){return vae},id:function(){return mae},name:function(){return gae},weight:function(){return pae}});var Q=D(67294),ge=D(73935),pe=D.t(ge,2),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ce.apply(this,arguments)},he=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},st=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(m){return function(y){return p([m,y])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(y){m=[6,y],i=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},re=Ce({},pe),Se=re.version,se=re.render,de=re.unmountComponentAtNode,xe;try{var le=Number((Se||"").split(".")[0]);le>=18&&(xe=re.createRoot)}catch(e){}function Ue(e){var t=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=e)}var Et="__rc_react_root__";function mt(e,t){Ue(!0);var n=t[Et]||xe(t);Ue(!1),n.render(e),t[Et]=n}function Wt(e,t){se(e,t)}function Rt(e,t){}function Tt(e,t){if(xe){mt(e,t);return}Wt(e,t)}function Ze(e){return he(this,void 0,void 0,function(){return st(this,function(t){return[2,Promise.resolve().then(function(){var n;(n=e[Et])===null||n===void 0||n.unmount(),delete e[Et]})]})})}function Ie(e){de(e)}function Qe(e){}function it(e){return he(this,void 0,void 0,function(){return st(this,function(t){return xe!==void 0?[2,Ze(e)]:(Ie(e),[2])})})}var De=new Map;De.set("tooltip",document.createElement("div"));var cn=function(e,t){t===void 0&&(t=!1);var n=null;if(t)n=De.get("tooltip");else if(n=document.createElement("div"),e!=null&&e.key){var r=De.get(e.key);r?n=r:De.set(e.key,n)}return Tt(e,n),n},qe=function(e){var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n)},Pt=function(e){var t=e.loadingTemplate,n=e.theme,r=n===void 0?"light":n,i=Q.useRef(null);Q.useEffect(function(){!t&&i.current&&qe(i.current)},[]);var a=function(){return t||Q.createElement("div",{ref:i})};return Q.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},a())},Le=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e){Le(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||Q.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return t.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},t.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):Q.createElement(Q.Fragment,null,this.props.children)},t}(Q.Component),at=typeof global=="object"&&global&&global.Object===Object&&global,nt=at,Ct=typeof self=="object"&&self&&self.Object===Object&&self,rt=nt||Ct||Function("return this")(),vt=rt,Ve=vt.Symbol,hn=Ve,yn=Object.prototype,ir=yn.hasOwnProperty,Qn=yn.toString,Ut=hn?hn.toStringTag:void 0;function En(e){var t=ir.call(e,Ut),n=e[Ut];try{e[Ut]=void 0;var r=!0}catch(a){}var i=Qn.call(e);return r&&(t?e[Ut]=n:delete e[Ut]),i}var Tn=En,lr=Object.prototype,ln=lr.toString;function Lt(e){return ln.call(e)}var bn=Lt,Xe="[object Null]",Fe="[object Undefined]",on=hn?hn.toStringTag:void 0;function B(e){return e==null?e===void 0?Fe:Xe:on&&on in Object(e)?Tn(e):bn(e)}var be=B;function yt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ee=yt,Zt="[object AsyncFunction]",_n="[object Function]",Sn="[object GeneratorFunction]",Bn="[object Proxy]";function or(e){if(!Ee(e))return!1;var t=be(e);return t==_n||t==Sn||t==Zt||t==Bn}var dr=or,gr=function(e){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(e)},wr=Array.isArray,Ar=wr;function Ir(){this.__data__=[],this.size=0}var Nr=Ir;function Yr(e,t){return e===t||e!==e&&t!==t}var bt=Yr;function ve(e,t){for(var n=e.length;n--;)if(bt(e[n][0],t))return n;return-1}var ye=ve,Ke=Array.prototype,ht=Ke.splice;function xt(e){var t=this.__data__,n=ye(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ht.call(t,n,1),--this.size,!0}var Jt=xt;function Dn(e){var t=this.__data__,n=ye(t,e);return n<0?void 0:t[n][1]}var fr=Dn;function In(e){return ye(this.__data__,e)>-1}var ke=In;function Pe(e,t){var n=this.__data__,r=ye(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Ge=Pe;function gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gt.prototype.clear=Nr,gt.prototype.delete=Jt,gt.prototype.get=fr,gt.prototype.has=ke,gt.prototype.set=Ge;var Bt=gt;function an(){this.__data__=new Bt,this.size=0}var An=an;function kt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Dt=kt;function dn(e){return this.__data__.get(e)}var He=dn;function ei(e){return this.__data__.has(e)}var Tr=ei,ii=vt["__core-js_shared__"],Di=ii,vi=function(){var e=/[^.]+$/.exec(Di&&Di.keys&&Di.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Br(e){return!!vi&&vi in e}var Gr=Br,bi=Function.prototype,Ni=bi.toString;function Qa(e){if(e!=null){try{return Ni.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Xi=Qa,ao=/[\\^$.*+?()[\]{}|]/g,ko=/^\[object .+?Constructor\]$/,Ba=Function.prototype,mi=Object.prototype,Je=Ba.toString,wt=mi.hasOwnProperty,Kt=RegExp("^"+Je.call(wt).replace(ao,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mn(e){if(!Ee(e)||Gr(e))return!1;var t=dr(e)?Kt:ko;return t.test(Xi(e))}var Yn=Mn;function Gn(e,t){return e==null?void 0:e[t]}var Ht=Gn;function On(e,t){var n=Ht(e,t);return Yn(n)?n:void 0}var Cr=On,Er=Cr(vt,"Map"),gi=Er,aa=Cr(Object,"create"),ya=aa;function wi(){this.__data__=ya?ya(null):{},this.size=0}var sa=wi;function $i(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var hi=$i,fa="__lodash_hash_undefined__",ea=Object.prototype,ka=ea.hasOwnProperty;function Bi(e){var t=this.__data__;if(ya){var n=t[e];return n===fa?void 0:n}return ka.call(t,e)?t[e]:void 0}var _a=Bi,to=Object.prototype,Ae=to.hasOwnProperty;function ns(e){var t=this.__data__;return ya?t[e]!==void 0:Ae.call(t,e)}var Oo=ns,Ms="__lodash_hash_undefined__";function ps(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ya&&t===void 0?Ms:t,this}var jt=ps;function sn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sn.prototype.clear=sa,sn.prototype.delete=hi,sn.prototype.get=_a,sn.prototype.has=Oo,sn.prototype.set=jt;var Jn=sn;function Xr(){this.size=0,this.__data__={hash:new Jn,map:new(gi||Bt),string:new Jn}}var Ii=Xr;function Ea(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var co=Ea;function Zs(e,t){var n=e.__data__;return co(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Vs=Zs;function Ds(e){var t=Vs(this,e).delete(e);return this.size-=t?1:0,t}var vu=Ds;function Rl(e){return Vs(this,e).get(e)}var ap=Rl;function ph(e){return Vs(this,e).has(e)}var el=ph;function lf(e,t){var n=Vs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Rf=lf;function mu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mu.prototype.clear=Ii,mu.prototype.delete=vu,mu.prototype.get=ap,mu.prototype.has=el,mu.prototype.set=Rf;var tc=mu,Pf=200;function zh(e,t){var n=this.__data__;if(n instanceof Bt){var r=n.__data__;if(!gi||r.length<Pf-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new tc(r)}return n.set(e,t),this.size=n.size,this}var Ti=zh;function za(e){var t=this.__data__=new Bt(e);this.size=t.size}za.prototype.clear=An,za.prototype.delete=Dt,za.prototype.get=He,za.prototype.has=Tr,za.prototype.set=Ti;var fo=za,Ji="__lodash_hash_undefined__";function su(e){return this.__data__.set(e,Ji),this}var If=su;function Uh(e){return this.__data__.has(e)}var Od=Uh;function Gf(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new tc;++t<n;)this.add(e[t])}Gf.prototype.add=Gf.prototype.push=If,Gf.prototype.has=Od;var id=Gf;function op(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Up=op;function sp(e,t){return e.has(t)}var Xf=sp,Cc=1,jp=2;function hl(e,t,n,r,i,a){var s=n&Cc,l=e.length,p=t.length;if(l!=p&&!(s&&p>l))return!1;var m=a.get(e),y=a.get(t);if(m&&y)return m==t&&y==e;var b=-1,E=!0,O=n&jp?new id:void 0;for(a.set(e,t),a.set(t,e);++b<l;){var P=e[b],I=t[b];if(r)var N=s?r(I,P,b,t,e,a):r(P,I,b,e,t,a);if(N!==void 0){if(N)continue;E=!1;break}if(O){if(!Up(t,function(z,V){if(!Xf(O,V)&&(P===z||i(P,z,n,r,a)))return O.push(V)})){E=!1;break}}else if(!(P===I||i(P,I,n,r,a))){E=!1;break}}return a.delete(e),a.delete(t),E}var kf=hl,Yf=vt.Uint8Array,_l=Yf;function pc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var vc=pc;function Oc(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var bl=Oc,cf=1,ff=2,ad="[object Boolean]",od="[object Date]",_s="[object Error]",mv="[object Map]",sd="[object Number]",vh="[object RegExp]",Hs="[object Set]",up="[object String]",lp="[object Symbol]",ku="[object ArrayBuffer]",qc="[object DataView]",mc=hn?hn.prototype:void 0,nc=mc?mc.valueOf:void 0;function jh(e,t,n,r,i,a,s){switch(n){case qc:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ku:return!(e.byteLength!=t.byteLength||!a(new _l(e),new _l(t)));case ad:case od:case sd:return bt(+e,+t);case _s:return e.name==t.name&&e.message==t.message;case vh:case up:return e==t+"";case mv:var l=vc;case Hs:var p=r&cf;if(l||(l=bl),e.size!=t.size&&!p)return!1;var m=s.get(e);if(m)return m==t;r|=ff,s.set(e,t);var y=kf(l(e),l(t),r,i,a,s);return s.delete(e),y;case lp:if(nc)return nc.call(e)==nc.call(t)}return!1}var qf=jh;function gc(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Kf=gc;function Lf(e,t,n){var r=t(e);return Ar(e)?r:Kf(r,n(e))}var rc=Lf;function Lu(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a}var Ts=Lu;function Ws(){return[]}var Mc=Ws,Zp=Object.prototype,hf=Zp.propertyIsEnumerable,Zh=Object.getOwnPropertySymbols,mh=Zh?function(e){return e==null?[]:(e=Object(e),Ts(Zh(e),function(t){return hf.call(e,t)}))}:Mc,xl=mh;function Kc(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Rc=Kc;function df(e){return e!=null&&typeof e=="object"}var Wu=df,gh="[object Arguments]";function pf(e){return Wu(e)&&be(e)==gh}var Vh=pf,Qc=Object.prototype,Pl=Qc.hasOwnProperty,cp=Qc.propertyIsEnumerable,Md=Vh(function(){return arguments}())?Vh:function(e){return Wu(e)&&Pl.call(e,"callee")&&!cp.call(e,"callee")},yh=Md;function Qf(){return!1}var Jc=Qf,Jf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,eh=Jf&&typeof module=="object"&&module&&!module.nodeType&&module,vf=eh&&eh.exports===Jf,fp=vf?vt.Buffer:void 0,ud=fp?fp.isBuffer:void 0,hp=ud||Jc,Df=hp,dp=9007199254740991,Hh=/^(?:0|[1-9]\d*)$/;function ld(e,t){var n=typeof e;return t=t==null?dp:t,!!t&&(n=="number"||n!="symbol"&&Hh.test(e))&&e>-1&&e%1==0&&e<t}var El=ld,Pc=9007199254740991;function tl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pc}var Wh=tl,th="[object Arguments]",Ns="[object Array]",Rd="[object Boolean]",Wl="[object Date]",Nf="[object Error]",is="[object Function]",Bs="[object Map]",ic="[object Number]",cd="[object Object]",mf="[object RegExp]",Ic="[object Set]",Vp="[object String]",Pd="[object WeakMap]",fd="[object ArrayBuffer]",_h="[object DataView]",nl="[object Float32Array]",ru="[object Float64Array]",bh="[object Int8Array]",pp="[object Int16Array]",uu="[object Int32Array]",Ma="[object Uint8Array]",Il="[object Uint8ClampedArray]",$h="[object Uint16Array]",xh="[object Uint32Array]",qo={};qo[nl]=qo[ru]=qo[bh]=qo[pp]=qo[uu]=qo[Ma]=qo[Il]=qo[$h]=qo[xh]=!0,qo[th]=qo[Ns]=qo[fd]=qo[Rd]=qo[_h]=qo[Wl]=qo[Nf]=qo[is]=qo[Bs]=qo[ic]=qo[cd]=qo[mf]=qo[Ic]=qo[Vp]=qo[Pd]=!1;function As(e){return Wu(e)&&Wh(e.length)&&!!qo[be(e)]}var Eh=As;function Z(e){return function(t){return e(t)}}var Vt=Z,Ne=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$e=Ne&&typeof module=="object"&&module&&!module.nodeType&&module,Oe=$e&&$e.exports===Ne,lt=Oe&&nt.process,un=function(){try{var e=$e&&$e.require&&$e.require("util").types;return e||lt&&lt.binding&&lt.binding("util")}catch(t){}}(),Zn=un,mn=Zn&&Zn.isTypedArray,jn=mn?Vt(mn):Eh,zr=jn,li=Object.prototype,Gi=li.hasOwnProperty;function na(e,t){var n=Ar(e),r=!n&&yh(e),i=!n&&!r&&Df(e),a=!n&&!r&&!i&&zr(e),s=n||r||i||a,l=s?Rc(e.length,String):[],p=l.length;for(var m in e)(t||Gi.call(e,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||a&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||El(m,p)))&&l.push(m);return l}var ga=na,La=Object.prototype;function ui(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||La;return e===n}var Ka=ui;function uo(e,t){return function(n){return e(t(n))}}var no=uo,as=no(Object.keys,Object),Es=as,vs=Object.prototype,Ko=vs.hasOwnProperty;function _o(e){if(!Ka(e))return Es(e);var t=[];for(var n in Object(e))Ko.call(e,n)&&n!="constructor"&&t.push(n);return t}var oa=_o;function ra(e){return e!=null&&Wh(e.length)&&!dr(e)}var Qo=ra;function Jo(e){return Qo(e)?ga(e):oa(e)}var No=Jo;function os(e){return rc(e,No,xl)}var Fo=os,$u=1,gf=Object.prototype,jo=gf.hasOwnProperty;function qs(e,t,n,r,i,a){var s=n&$u,l=Fo(e),p=l.length,m=Fo(t),y=m.length;if(p!=y&&!s)return!1;for(var b=p;b--;){var E=l[b];if(!(s?E in t:jo.call(t,E)))return!1}var O=a.get(e),P=a.get(t);if(O&&P)return O==t&&P==e;var I=!0;a.set(e,t),a.set(t,e);for(var N=s;++b<p;){E=l[b];var z=e[E],V=t[E];if(r)var W=s?r(V,z,E,t,e,a):r(z,V,E,e,t,a);if(!(W===void 0?z===V||i(z,V,n,r,a):W)){I=!1;break}N||(N=E=="constructor")}if(I&&!N){var K=e.constructor,J=t.constructor;K!=J&&"constructor"in e&&"constructor"in t&&!(typeof K=="function"&&K instanceof K&&typeof J=="function"&&J instanceof J)&&(I=!1)}return a.delete(e),a.delete(t),I}var Id=qs,yc=Cr(vt,"DataView"),kd=yc,Sh=Cr(vt,"Promise"),dl=Sh,Gh=Cr(vt,"Set"),kc=Gh,gv=Cr(vt,"WeakMap"),_c=gv,Bf="[object Map]",wh="[object Object]",yf="[object Promise]",_f="[object Set]",Xh="[object WeakMap]",po="[object DataView]",Lc=Xi(kd),Hp=Xi(gi),iu=Xi(dl),$s=Xi(kc),bf=Xi(_c),bc=be;(kd&&bc(new kd(new ArrayBuffer(1)))!=po||gi&&bc(new gi)!=Bf||dl&&bc(dl.resolve())!=yf||kc&&bc(new kc)!=_f||_c&&bc(new _c)!=Xh)&&(bc=function(e){var t=be(e),n=t==wh?e.constructor:void 0,r=n?Xi(n):"";if(r)switch(r){case Lc:return po;case Hp:return Bf;case iu:return yf;case $s:return _f;case bf:return Xh}return t});var kl=bc,Th=1,x="[object Arguments]",A="[object Array]",w="[object Object]",R=Object.prototype,j=R.hasOwnProperty;function Y(e,t,n,r,i,a){var s=Ar(e),l=Ar(t),p=s?A:kl(e),m=l?A:kl(t);p=p==x?w:p,m=m==x?w:m;var y=p==w,b=m==w,E=p==m;if(E&&Df(e)){if(!Df(t))return!1;s=!0,y=!1}if(E&&!y)return a||(a=new fo),s||zr(e)?kf(e,t,n,r,i,a):qf(e,t,p,n,r,i,a);if(!(n&Th)){var O=y&&j.call(e,"__wrapped__"),P=b&&j.call(t,"__wrapped__");if(O||P){var I=O?e.value():e,N=P?t.value():t;return a||(a=new fo),i(I,N,n,r,a)}}return E?(a||(a=new fo),Id(e,t,n,r,i,a)):!1}var te=Y;function we(e,t,n,r,i){return e===t?!0:e==null||t==null||!Wu(e)&&!Wu(t)?e!==e&&t!==t:te(e,t,n,r,we,i)}var tt=we;function At(e,t){return tt(e,t)}var $t=At;function qt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var rn=qt,kn=function(){try{var e=Cr(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Rn=kn;function qn(e,t,n){t=="__proto__"&&Rn?Rn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var wn=qn,Kn=Object.prototype,mr=Kn.hasOwnProperty;function Or(e,t,n){var r=e[t];(!(mr.call(e,t)&&bt(r,n))||n===void 0&&!(t in e))&&wn(e,t,n)}var Wr=Or;function Ur(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],p=r?r(n[l],e[l],l,n,e):void 0;p===void 0&&(p=e[l]),i?wn(n,l,p):Wr(n,l,p)}return n}var qr=Ur;function _i(e,t){return e&&qr(t,No(t),e)}var q=_i;function ue(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var fe=ue,Me=Object.prototype,ze=Me.hasOwnProperty;function Be(e){if(!Ee(e))return fe(e);var t=Ka(e),n=[];for(var r in e)r=="constructor"&&(t||!ze.call(e,r))||n.push(r);return n}var en=Be;function Qt(e){return Qo(e)?ga(e,!0):en(e)}var Xn=Qt;function pn(e,t){return e&&qr(t,Xn(t),e)}var sr=pn,br=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ai=br&&typeof module=="object"&&module&&!module.nodeType&&module,xi=Ai&&Ai.exports===br,ci=xi?vt.Buffer:void 0,da=ci?ci.allocUnsafe:void 0;function ua(e,t){if(t)return e.slice();var n=e.length,r=da?da(n):new e.constructor(n);return e.copy(r),r}var la=ua;function Ua(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var $a=Ua;function oo(e,t){return qr(e,xl(e),t)}var ms=oo,bs=no(Object.getPrototypeOf,Object),Fs=bs,rs=Object.getOwnPropertySymbols,So=rs?function(e){for(var t=[];e;)Kf(t,xl(e)),e=Fs(e);return t}:Mc,es=So;function Tu(e,t){return qr(e,es(e),t)}var rl=Tu;function bu(e){return rc(e,Xn,es)}var Du=bu,Ll=Object.prototype,xc=Ll.hasOwnProperty;function ef(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&xc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var pl=ef;function Au(e){var t=new e.constructor(e.byteLength);return new _l(t).set(new _l(e)),t}var ac=Au;function Dc(e,t){var n=t?ac(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var xf=Dc,ss=/\w*$/;function Dl(e){var t=new e.constructor(e.source,ss.exec(e));return t.lastIndex=e.lastIndex,t}var vl=Dl,nh=hn?hn.prototype:void 0,Wp=nh?nh.valueOf:void 0;function Ff(e){return Wp?Object(Wp.call(e)):{}}var yv=Ff;function Ld(e,t){var n=t?ac(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Yh=Ld,zf="[object Boolean]",$p="[object Date]",bm="[object Map]",vp="[object Number]",Nc="[object RegExp]",yg="[object Set]",_g="[object String]",Gp="[object Symbol]",Ay="[object ArrayBuffer]",bg="[object DataView]",xg="[object Float32Array]",Kv="[object Float64Array]",Cy="[object Int8Array]",k0="[object Int16Array]",xm="[object Int32Array]",mp="[object Uint8Array]",Qv="[object Uint8ClampedArray]",Oy="[object Uint16Array]",Em="[object Uint32Array]";function a1(e,t,n){var r=e.constructor;switch(t){case Ay:return ac(e);case zf:case $p:return new r(+e);case bg:return xf(e,n);case xg:case Kv:case Cy:case k0:case xm:case mp:case Qv:case Oy:case Em:return Yh(e,n);case bm:return new r;case vp:case _g:return new r(e);case Nc:return vl(e);case yg:return new r;case Gp:return yv(e)}}var Eg=a1,Sm=Object.create,L0=function(){function e(){}return function(t){if(!Ee(t))return{};if(Sm)return Sm(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),gp=L0;function yp(e){return typeof e.constructor=="function"&&!Ka(e)?gp(Fs(e)):{}}var oc=yp,hd="[object Map]";function Dd(e){return Wu(e)&&kl(e)==hd}var Gu=Dd,Nd=Zn&&Zn.isMap,D0=Nd?Vt(Nd):Gu,_v=D0,dd="[object Set]";function Ah(e){return Wu(e)&&kl(e)==dd}var Xp=Ah,_p=Zn&&Zn.isSet,pd=_p?Vt(_p):Xp,rh=pd,Bd=1,Jv=2,Fd=4,bp="[object Arguments]",zd="[object Array]",wm="[object Boolean]",Tm="[object Date]",Sg="[object Error]",qh="[object Function]",Yp="[object GeneratorFunction]",My="[object Map]",Ry="[object Number]",wg="[object Object]",Py="[object RegExp]",xp="[object Set]",Am="[object String]",Ud="[object Symbol]",N0="[object WeakMap]",qp="[object ArrayBuffer]",Kp="[object DataView]",Cm="[object Float32Array]",Ep="[object Float64Array]",Om="[object Int8Array]",e0="[object Int16Array]",Bc="[object Int32Array]",Fc="[object Uint8Array]",Xu="[object Uint8ClampedArray]",Uf="[object Uint16Array]",Iy="[object Uint32Array]",Ps={};Ps[bp]=Ps[zd]=Ps[qp]=Ps[Kp]=Ps[wm]=Ps[Tm]=Ps[Cm]=Ps[Ep]=Ps[Om]=Ps[e0]=Ps[Bc]=Ps[My]=Ps[Ry]=Ps[wg]=Ps[Py]=Ps[xp]=Ps[Am]=Ps[Ud]=Ps[Fc]=Ps[Xu]=Ps[Uf]=Ps[Iy]=!0,Ps[Sg]=Ps[qh]=Ps[N0]=!1;function bv(e,t,n,r,i,a){var s,l=t&Bd,p=t&Jv,m=t&Fd;if(n&&(s=i?n(e,r,i,a):n(e)),s!==void 0)return s;if(!Ee(e))return e;var y=Ar(e);if(y){if(s=pl(e),!l)return $a(e,s)}else{var b=kl(e),E=b==qh||b==Yp;if(Df(e))return la(e,l);if(b==wg||b==bp||E&&!i){if(s=p||E?{}:oc(e),!l)return p?rl(e,sr(s,e)):ms(e,q(s,e))}else{if(!Ps[b])return i?e:{};s=Eg(e,b,l)}}a||(a=new fo);var O=a.get(e);if(O)return O;a.set(e,s),rh(e)?e.forEach(function(N){s.add(bv(N,t,n,N,e,a))}):_v(e)&&e.forEach(function(N,z){s.set(z,bv(N,t,n,z,e,a))});var P=m?p?Du:Fo:p?Xn:No,I=y?void 0:P(e);return rn(I||e,function(N,z){I&&(z=N,N=e[z]),Wr(s,z,bv(N,t,n,z,e,a))}),s}var t0=bv,ky=1,Tg=4;function xv(e){return t0(e,ky|Tg)}var Mm=xv,zc="[object Symbol]";function o1(e){return typeof e=="symbol"||Wu(e)&&be(e)==zc}var n0=o1,Ag=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ly=/^\w*$/;function Cg(e,t){if(Ar(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||n0(e)?!0:Ly.test(e)||!Ag.test(e)||t!=null&&e in Object(t)}var Og=Cg,s1="Expected a function";function r0(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(s1);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(r0.Cache||tc),n}r0.Cache=tc;var Rm=r0,et=500;function vn(e){var t=Rm(e,function(r){return n.size===et&&n.clear(),r}),n=t.cache;return t}var Vn=vn,$r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,di=/\\(\\)?/g,Vr=Vn(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($r,function(n,r,i,a){t.push(i?a.replace(di,"$1"):r||n)}),t}),Rr=Vr;function Yi(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ki=Yi,zi=1/0,qi=hn?hn.prototype:void 0,ia=qi?qi.toString:void 0;function Ei(e){if(typeof e=="string")return e;if(Ar(e))return ki(e,Ei)+"";if(n0(e))return ia?ia.call(e):"";var t=e+"";return t=="0"&&1/e==-zi?"-0":t}var Ui=Ei;function ta(e){return e==null?"":Ui(e)}var Sr=ta;function ri(e,t){return Ar(e)?e:Og(e,t)?[e]:Rr(Sr(e))}var Vi=ri,xa=1/0;function Oi(e){if(typeof e=="string"||n0(e))return e;var t=e+"";return t=="0"&&1/e==-xa?"-0":t}var ba=Oi;function Hi(e,t){t=Vi(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ba(t[n++])];return n&&n==r?e:void 0}var va=Hi;function Ri(e,t,n){var r=e==null?void 0:va(e,t);return r===void 0?n:r}var ji=Ri,ro=function(){return ro=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ro.apply(this,arguments)},wo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ma(e,t){var n=(0,Q.useRef)(),r=(0,Q.useRef)(),i=(0,Q.useRef)(null),a=t.onReady,s=t.onEvent,l=function(y,b){var E;y===void 0&&(y="image/png");var O=(E=i.current)===null||E===void 0?void 0:E.getElementsByTagName("canvas")[0];return O==null?void 0:O.toDataURL(y,b)},p=function(y,b,E){y===void 0&&(y="download"),b===void 0&&(b="image/png");var O=y;y.indexOf(".")===-1&&(O="".concat(y,".").concat(b.split("/")[1]));var P=l(b,E),I=document.createElement("a");return I.href=P,I.download=O,document.body.appendChild(I),I.click(),document.body.removeChild(I),I=null,O},m=function(y,b){b===void 0&&(b=!1);var E=Object.keys(y),O=b;E.forEach(function(P){var I=y[P];P==="tooltip"&&(O=!0),dr(I)&&gr("".concat(I))?y[P]=function(){for(var N=[],z=0;z<arguments.length;z++)N[z]=arguments[z];return cn(I.apply(void 0,N),O)}:Ar(I)?I.forEach(function(N){m(N,O)}):Ee(I)?m(I,O):O=b})};return(0,Q.useEffect)(function(){if(n.current&&!$t(r.current,t)){var y=!1;if(r.current){var b=r.current,E=b.data,O=wo(b,["data"]),P=t.data,I=wo(t,["data"]);y=$t(O,I)}r.current=Mm(t),y?n.current.changeData(ji(t,"data")):(m(t),n.current.update(t),n.current.render())}},[t]),(0,Q.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=Mm(t)),m(t);var y=new e(i.current,ro({},t));y.toDataURL=l,y.downloadImage=p,y.render(),n.current=y,a&&a(y);var b=function(E){s&&s(y,E)};return y.on("*",b),function(){n.current&&(n.current.destroy(),n.current.off("*",b),n.current=void 0)}},[]),{chart:n,container:i}}var Wi="*",yi=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=this._events[t]||[],s=this._events[Wi]||[],l=function(p){for(var m=p.length,y=0;y<m;y++)if(p[y]){var b=p[y],E=b.callback,O=b.once;O&&(p.splice(y,1),p.length===0&&delete n._events[t],m--,y--),E.apply(n,r)}};l(a),l(s)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,a=0;a<i;a++)r[a].callback===n&&(r.splice(a,1),i--,a--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),io=yi,ce=D(97582),Aa=D(38554),Bo=Aa,nr=D(77160),ni=D(85975),us=D(49685);function il(){var e=new us.WT(9);return us.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function $l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function hs(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ml(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function lu(e,t,n,r,i,a,s,l,p){var m=new us.WT(9);return m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=i,m[5]=a,m[6]=s,m[7]=l,m[8]=p,m}function Nl(e,t,n,r,i,a,s,l,p,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e[6]=l,e[7]=p,e[8]=m,e}function Bl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Yu(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Gl(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],l=t[5],p=t[6],m=t[7],y=t[8],b=y*s-l*m,E=-y*a+l*p,O=m*a-s*p,P=n*b+r*E+i*O;return P?(P=1/P,e[0]=b*P,e[1]=(-y*r+i*m)*P,e[2]=(l*r-i*s)*P,e[3]=E*P,e[4]=(y*n-i*p)*P,e[5]=(-l*n+i*a)*P,e[6]=O*P,e[7]=(-m*n+r*p)*P,e[8]=(s*n-r*a)*P,e):null}function Uc(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],l=t[5],p=t[6],m=t[7],y=t[8];return e[0]=s*y-l*m,e[1]=i*m-r*y,e[2]=r*l-i*s,e[3]=l*p-a*y,e[4]=n*y-i*p,e[5]=i*a-n*l,e[6]=a*m-s*p,e[7]=r*p-n*m,e[8]=n*s-r*a,e}function Sl(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],l=e[6],p=e[7],m=e[8];return t*(m*a-s*p)+n*(-m*i+s*l)+r*(p*i-a*l)}function Zo(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],p=t[5],m=t[6],y=t[7],b=t[8],E=n[0],O=n[1],P=n[2],I=n[3],N=n[4],z=n[5],V=n[6],W=n[7],K=n[8];return e[0]=E*r+O*s+P*m,e[1]=E*i+O*l+P*y,e[2]=E*a+O*p+P*b,e[3]=I*r+N*s+z*m,e[4]=I*i+N*l+z*y,e[5]=I*a+N*p+z*b,e[6]=V*r+W*s+K*m,e[7]=V*i+W*l+K*y,e[8]=V*a+W*p+K*b,e}function Ec(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],p=t[5],m=t[6],y=t[7],b=t[8],E=n[0],O=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=l,e[5]=p,e[6]=E*r+O*s+m,e[7]=E*i+O*l+y,e[8]=E*a+O*p+b,e}function Is(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],p=t[5],m=t[6],y=t[7],b=t[8],E=Math.sin(n),O=Math.cos(n);return e[0]=O*r+E*s,e[1]=O*i+E*l,e[2]=O*a+E*p,e[3]=O*s-E*r,e[4]=O*l-E*i,e[5]=O*p-E*a,e[6]=m,e[7]=y,e[8]=b,e}function mo(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ls(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Ss(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function wl(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function vd(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Nn(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n+n,l=r+r,p=i+i,m=n*s,y=r*s,b=r*l,E=i*s,O=i*l,P=i*p,I=a*s,N=a*l,z=a*p;return e[0]=1-b-P,e[3]=y-z,e[6]=E+N,e[1]=y+z,e[4]=1-m-P,e[7]=O-I,e[2]=E-N,e[5]=O+I,e[8]=1-m-b,e}function Kr(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],l=t[5],p=t[6],m=t[7],y=t[8],b=t[9],E=t[10],O=t[11],P=t[12],I=t[13],N=t[14],z=t[15],V=n*l-r*s,W=n*p-i*s,K=n*m-a*s,J=r*p-i*l,oe=r*m-a*l,Te=i*m-a*p,Re=y*I-b*P,We=y*N-E*P,ut=y*z-O*P,ct=b*N-E*I,Ft=b*z-O*I,ft=E*z-O*N,St=V*ft-W*Ft+K*ct+J*ut-oe*We+Te*Re;return St?(St=1/St,e[0]=(l*ft-p*Ft+m*ct)*St,e[1]=(p*ut-s*ft-m*We)*St,e[2]=(s*Ft-l*ut+m*Re)*St,e[3]=(i*Ft-r*ft-a*ct)*St,e[4]=(n*ft-i*ut+a*We)*St,e[5]=(r*ut-n*Ft-a*Re)*St,e[6]=(I*Te-N*oe+z*J)*St,e[7]=(N*K-P*Te-z*W)*St,e[8]=(P*oe-I*K+z*V)*St,e):null}function Fr(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Pa(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Vo(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Js(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Gt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function xn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Wn(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function jr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Dr(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],p=e[6],m=e[7],y=e[8],b=t[0],E=t[1],O=t[2],P=t[3],I=t[4],N=t[5],z=t[6],V=t[7],W=t[8];return Math.abs(n-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-E)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-O)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(a-P)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(s-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(l-N)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(p-z)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(m-V)<=glMatrix.EPSILON*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(y-W)<=glMatrix.EPSILON*Math.max(1,Math.abs(y),Math.abs(W))}var er=null,vr=null,tr=D(98333);function Cn(){var e=new us.WT(4);return us.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ar(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function gn(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function pr(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Qr(e,t){var n=F0(e,t);return Math.acos(2*n*n-1)}function ti(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],l=n[0],p=n[1],m=n[2],y=n[3];return e[0]=r*y+s*l+i*m-a*p,e[1]=i*y+s*p+a*l-r*m,e[2]=a*y+s*m+r*p-i*l,e[3]=s*y-r*l-i*p-a*m,e}function Li(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],l=Math.sin(n),p=Math.cos(n);return e[0]=r*p+s*l,e[1]=i*p+a*l,e[2]=a*p-i*l,e[3]=s*p-r*l,e}function Si(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],l=Math.sin(n),p=Math.cos(n);return e[0]=r*p-a*l,e[1]=i*p+s*l,e[2]=a*p+r*l,e[3]=s*p-i*l,e}function Zi(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],l=Math.sin(n),p=Math.cos(n);return e[0]=r*p+i*l,e[1]=i*p-r*l,e[2]=a*p+s*l,e[3]=s*p-a*l,e}function Va(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Da(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=Math.sqrt(n*n+r*r+i*i),l=Math.exp(a),p=s>0?l*Math.sin(s)/s:0;return e[0]=n*p,e[1]=r*p,e[2]=i*p,e[3]=l*Math.cos(s),e}function Ha(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=Math.sqrt(n*n+r*r+i*i),l=s>0?Math.atan2(s,a)/s:0;return e[0]=n*l,e[1]=r*l,e[2]=i*l,e[3]=.5*Math.log(n*n+r*r+i*i+a*a),e}function go(e,t,n){return Ha(e,t),B0(e,e,n),Da(e,e),e}function xo(e,t,n,r){var i=t[0],a=t[1],s=t[2],l=t[3],p=n[0],m=n[1],y=n[2],b=n[3],E,O,P,I,N;return O=i*p+a*m+s*y+l*b,O<0&&(O=-O,p=-p,m=-m,y=-y,b=-b),1-O>us.Ib?(E=Math.acos(O),P=Math.sin(E),I=Math.sin((1-r)*E)/P,N=Math.sin(r*E)/P):(I=1-r,N=r),e[0]=I*i+N*p,e[1]=I*a+N*m,e[2]=I*s+N*y,e[3]=I*l+N*b,e}function ks(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e}function xu(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*n+r*r+i*i+a*a,l=s?1/s:0;return e[0]=-n*l,e[1]=-r*l,e[2]=-i*l,e[3]=a*l,e}function jf(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Qp(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var a=(i+1)%3,s=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[a*3+a]-t[s*3+s]+1),e[i]=.5*r,r=.5/r,e[3]=(t[a*3+s]-t[s*3+a])*r,e[a]=(t[a*3+i]+t[i*3+a])*r,e[s]=(t[s*3+i]+t[i*3+s])*r}return e}function sc(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),s=Math.cos(t),l=Math.sin(n),p=Math.cos(n),m=Math.sin(r),y=Math.cos(r);return e[0]=a*p*y-s*l*m,e[1]=s*l*y+a*p*m,e[2]=s*p*m-a*l*y,e[3]=s*p*y+a*l*m,e}function Dy(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var jd=tr.d9,Jp=tr.al,Pm=tr.JG,ex=tr.t8,u1=tr.IH,Im=ti,B0=tr.bA,F0=tr.AK,ev=tr.t7,l1=tr.kE,Xl=null,Nu=tr.we,c1=null,Mg=tr.Fv,tx=tr.I6,Rg=tr.fS,f1=function(){var e=nr.create(),t=nr.fromValues(1,0,0),n=nr.fromValues(0,1,0);return function(r,i,a){var s=nr.dot(i,a);return s<-.999999?(nr.cross(e,t,i),nr.len(e)<1e-6&&nr.cross(e,n,i),nr.normalize(e,e),gn(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(nr.cross(e,i,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,Mg(r,r))}}(),h1=function(){var e=Cn(),t=Cn();return function(n,r,i,a,s,l){return xo(e,r,s,l),xo(t,i,a,l),xo(n,e,t,2*l*(1-l)),n}}(),z0=function(){var e=il();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Mg(t,Qp(t,e))}}(),md=D(31437),Yl=D(25897);function zs(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var wa=D(95147),Ch=D(95456),Bu=function(e){return(0,Ch.Z)(e,"String")},al=D(81957),i0={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function a0(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return i0[n]===t.length-1&&"achlmqstvz".includes(n)})}function Sp(e){return a0(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function Ny(e){return Sp(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}var By={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function d1(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=i0[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,i0[n]))),!!i0[n]););}function uc(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function Ev(e){return e>=48&&e<=57||e===43||e===45||e===46}function Sv(e){return e>=48&&e<=57}function u(e){var t=e.max,n=e.pathValue,r=e.index,i=r,a=!1,s=!1,l=!1,p=!1,m;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(m=n.charCodeAt(i),(m===43||m===45)&&(i+=1,m=n.charCodeAt(i)),!Sv(m)&&m!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(m!==46){if(a=m===48,i+=1,m=n.charCodeAt(i),a&&i<t&&m&&Sv(m)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&Sv(n.charCodeAt(i));)i+=1,s=!0;m=n.charCodeAt(i)}if(m===46){for(p=!0,i+=1;Sv(n.charCodeAt(i));)i+=1,l=!0;m=n.charCodeAt(i)}if(m===101||m===69){if(p&&!s&&!l){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,m=n.charCodeAt(i),(m===43||m===45)&&(i+=1),i<t&&Sv(n.charCodeAt(i)))for(;i<t&&Sv(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function v(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function _(e){for(var t=e.pathValue,n=e.max;e.index<n&&v(t.charCodeAt(e.index));)e.index+=1}function M(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function L(e){return(e|32)===97}function U(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),a=i0[n[r].toLowerCase()];if(e.segmentStart=r,!M(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,_(e),e.data=[],!a){d1(e);return}for(;;){for(var s=a;s>0;s-=1){if(L(i)&&(s===3||s===4)?uc(e):u(e),e.err.length)return;e.data.push(e.param),_(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,_(e))}if(e.index>=e.max||!Ev(n.charCodeAt(e.index)))break}d1(e)}var H=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function ie(e){if(a0(e))return[].concat(e);var t=new H(e);for(_(t);t.index<t.max&&!t.err.length;)U(t);return t.err?t.err:t.segments}function _e(e){if(Sp(e))return[].concat(e);var t=ie(e),n=0,r=0,i=0,a=0;return t.map(function(s){var l=s.slice(1).map(Number),p=s[0],m=p.toUpperCase();if(p==="M")return n=l[0],r=l[1],i=n,a=r,["M",n,r];var y;if(p!==m)switch(m){case"A":y=[m,l[0],l[1],l[2],l[3],l[4],l[5]+n,l[6]+r];break;case"V":y=[m,l[0]+r];break;case"H":y=[m,l[0]+n];break;default:{var b=l.map(function(O,P){return O+(P%2?r:n)});y=[m].concat(b)}}else y=[m].concat(l);var E=y.length;switch(m){case"Z":n=i,r=a;break;case"H":n=y[1];break;case"V":r=y[1];break;default:n=y[E-2],r=y[E-1],m==="M"&&(i=n,a=r)}return y})}function Ye(e,t){var n=e[0],r=t.x1,i=t.y1,a=t.x2,s=t.y2,l=e.slice(1).map(Number),p=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")p=["L",e[1],i];else if(n==="V")p=["L",r,e[1]];else if(n==="S"){var m=r*2-a,y=i*2-s;t.x1=m,t.y1=y,p=["C",m,y].concat(l)}else if(n==="T"){var b=r*2-t.qx,E=i*2-t.qy;t.qx=b,t.qy=E,p=["Q",b,E].concat(l)}else if(n==="Q"){var O=l[0],P=l[1];t.qx=O,t.qy=P}return p}function ot(e){if(Ny(e))return[].concat(e);for(var t=_e(e),n=(0,ce.pi)({},By),r=0;r<t.length;r+=1){t[r]=Ye(t[r],n);var i=t[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return t}function dt(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return[r+(a-r)*n,i+(s-i)*n]}function zt(e,t,n,r,i){var a=zs([e,t],[n,r]),s={x:0,y:0};if(typeof i=="number")if(i<=0)s={x:e,y:t};else if(i>=a)s={x:n,y:r};else{var l=dt([e,t],[n,r],i/a),p=l[0],m=l[1];s={x:p,y:m}}return{length:a,point:s,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function Xt(e,t){var n=e.x,r=e.y,i=t.x,a=t.y,s=n*i+r*a,l=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2))),p=n*a-r*i<0?-1:1,m=p*Math.acos(s/l);return m}function Pn(e,t,n,r,i,a,s,l,p,m){var y=Math.abs,b=Math.sin,E=Math.cos,O=Math.sqrt,P=Math.PI,I=y(n),N=y(r),z=(i%360+360)%360,V=z*(P/180);if(e===l&&t===p)return{x:e,y:t};if(I===0||N===0)return zt(e,t,l,p,m).point;var W=(e-l)/2,K=(t-p)/2,J={x:E(V)*W+b(V)*K,y:-b(V)*W+E(V)*K},oe=Math.pow(J.x,2)/Math.pow(I,2)+Math.pow(J.y,2)/Math.pow(N,2);oe>1&&(I*=O(oe),N*=O(oe));var Te=Math.pow(I,2)*Math.pow(N,2)-Math.pow(I,2)*Math.pow(J.y,2)-Math.pow(N,2)*Math.pow(J.x,2),Re=Math.pow(I,2)*Math.pow(J.y,2)+Math.pow(N,2)*Math.pow(J.x,2),We=Te/Re;We=We<0?0:We;var ut=(a!==s?1:-1)*O(We),ct={x:ut*(I*J.y/N),y:ut*(-(N*J.x)/I)},Ft={x:E(V)*ct.x-b(V)*ct.y+(e+l)/2,y:b(V)*ct.x+E(V)*ct.y+(t+p)/2},ft={x:(J.x-ct.x)/I,y:(J.y-ct.y)/N},St=Xt({x:1,y:0},ft),Mt={x:(-J.x-ct.x)/I,y:(-J.y-ct.y)/N},Nt=Xt(ft,Mt);!s&&Nt>0?Nt-=2*P:s&&Nt<0&&(Nt+=2*P),Nt%=2*P;var tn=St+Nt*m,Yt=I*E(tn),fn=N*b(tn),Hn={x:E(V)*Yt-b(V)*fn+Ft.x,y:b(V)*Yt+E(V)*fn+Ft.y};return Hn}function Ln(e,t,n,r,i,a,s,l,p,m,y){var b,E=y.bbox,O=E===void 0?!0:E,P=y.length,I=P===void 0?!0:P,N=y.sampleSize,z=N===void 0?30:N,V=typeof m=="number",W=e,K=t,J=0,oe=[W,K,J],Te=[W,K],Re=0,We={x:0,y:0},ut=[{x:W,y:K}];V&&m<=0&&(We={x:W,y:K});for(var ct=0;ct<=z;ct+=1){if(Re=ct/z,b=Pn(e,t,n,r,i,a,s,l,p,Re),W=b.x,K=b.y,O&&ut.push({x:W,y:K}),I&&(J+=zs(Te,[W,K])),Te=[W,K],V&&J>=m&&m>oe[2]){var Ft=(J-m)/(J-oe[2]);We={x:Te[0]*(1-Ft)+oe[0]*Ft,y:Te[1]*(1-Ft)+oe[1]*Ft}}oe=[W,K,J]}return V&&m>=J&&(We={x:l,y:p}),{length:J,point:We,min:{x:Math.min.apply(null,ut.map(function(ft){return ft.x})),y:Math.min.apply(null,ut.map(function(ft){return ft.y}))},max:{x:Math.max.apply(null,ut.map(function(ft){return ft.x})),y:Math.max.apply(null,ut.map(function(ft){return ft.y}))}}}function rr(e,t,n,r,i,a,s,l,p){var m=1-p;return{x:Math.pow(m,3)*e+3*Math.pow(m,2)*p*n+3*m*Math.pow(p,2)*i+Math.pow(p,3)*s,y:Math.pow(m,3)*t+3*Math.pow(m,2)*p*r+3*m*Math.pow(p,2)*a+Math.pow(p,3)*l}}function $n(e,t,n,r,i,a,s,l,p,m){var y,b=m.bbox,E=b===void 0?!0:b,O=m.length,P=O===void 0?!0:O,I=m.sampleSize,N=I===void 0?10:I,z=typeof p=="number",V=e,W=t,K=0,J=[V,W,K],oe=[V,W],Te=0,Re={x:0,y:0},We=[{x:V,y:W}];z&&p<=0&&(Re={x:V,y:W});for(var ut=0;ut<=N;ut+=1){if(Te=ut/N,y=rr(e,t,n,r,i,a,s,l,Te),V=y.x,W=y.y,E&&We.push({x:V,y:W}),P&&(K+=zs(oe,[V,W])),oe=[V,W],z&&K>=p&&p>J[2]){var ct=(K-p)/(K-J[2]);Re={x:oe[0]*(1-ct)+J[0]*ct,y:oe[1]*(1-ct)+J[1]*ct}}J=[V,W,K]}return z&&p>=K&&(Re={x:s,y:l}),{length:K,point:Re,min:{x:Math.min.apply(null,We.map(function(Ft){return Ft.x})),y:Math.min.apply(null,We.map(function(Ft){return Ft.y}))},max:{x:Math.max.apply(null,We.map(function(Ft){return Ft.x})),y:Math.max.apply(null,We.map(function(Ft){return Ft.y}))}}}function xr(e,t,n,r,i,a,s){var l=1-s;return{x:Math.pow(l,2)*e+2*l*s*n+Math.pow(s,2)*i,y:Math.pow(l,2)*t+2*l*s*r+Math.pow(s,2)*a}}function Lr(e,t,n,r,i,a,s,l){var p,m=l.bbox,y=m===void 0?!0:m,b=l.length,E=b===void 0?!0:b,O=l.sampleSize,P=O===void 0?10:O,I=typeof s=="number",N=e,z=t,V=0,W=[N,z,V],K=[N,z],J=0,oe={x:0,y:0},Te=[{x:N,y:z}];I&&s<=0&&(oe={x:N,y:z});for(var Re=0;Re<=P;Re+=1){if(J=Re/P,p=xr(e,t,n,r,i,a,J),N=p.x,z=p.y,y&&Te.push({x:N,y:z}),E&&(V+=zs(K,[N,z])),K=[N,z],I&&V>=s&&s>W[2]){var We=(V-s)/(V-W[2]);oe={x:K[0]*(1-We)+W[0]*We,y:K[1]*(1-We)+W[1]*We}}W=[N,z,V]}return I&&s>=V&&(oe={x:i,y:a}),{length:V,point:oe,min:{x:Math.min.apply(null,Te.map(function(ut){return ut.x})),y:Math.min.apply(null,Te.map(function(ut){return ut.y}))},max:{x:Math.max.apply(null,Te.map(function(ut){return ut.x})),y:Math.max.apply(null,Te.map(function(ut){return ut.y}))}}}function Zr(e,t,n){for(var r,i,a,s,l,p,m=ot(e),y=typeof t=="number",b,E=[],O,P=0,I=0,N=0,z=0,V,W=[],K=[],J=0,oe={x:0,y:0},Te=oe,Re=oe,We=oe,ut=0,ct=0,Ft=m.length;ct<Ft;ct+=1)V=m[ct],O=V[0],b=O==="M",E=b?E:[P,I].concat(V.slice(1)),b?(N=V[1],z=V[2],oe={x:N,y:z},Te=oe,J=0,y&&t<.001&&(We=oe)):O==="L"?(r=zt(E[0],E[1],E[2],E[3],(t||0)-ut),J=r.length,oe=r.min,Te=r.max,Re=r.point):O==="A"?(i=Ln(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],(t||0)-ut,n||{}),J=i.length,oe=i.min,Te=i.max,Re=i.point):O==="C"?(a=$n(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],(t||0)-ut,n||{}),J=a.length,oe=a.min,Te=a.max,Re=a.point):O==="Q"?(s=Lr(E[0],E[1],E[2],E[3],E[4],E[5],(t||0)-ut,n||{}),J=s.length,oe=s.min,Te=s.max,Re=s.point):O==="Z"&&(E=[P,I,N,z],l=zt(E[0],E[1],E[2],E[3],(t||0)-ut),J=l.length,oe=l.min,Te=l.max,Re=l.point),y&&ut<t&&ut+J>=t&&(We=Re),K.push(Te),W.push(oe),ut+=J,p=O!=="Z"?V.slice(-2):[N,z],P=p[0],I=p[1];return y&&t>=ut&&(We={x:P,y:I}),{length:ut,point:We,min:{x:Math.min.apply(null,W.map(function(ft){return ft.x})),y:Math.min.apply(null,W.map(function(ft){return ft.y}))},max:{x:Math.max.apply(null,K.map(function(ft){return ft.x})),y:Math.max.apply(null,K.map(function(ft){return ft.y}))}}}function Jr(e,t){return Zr(e,void 0,(0,ce.pi)((0,ce.pi)({},t),{bbox:!1,length:!0})).length}var ai=function(e){return Array.isArray?Array.isArray(e):(0,Ch.Z)(e,"Array")},Ki=function(e){if(ai(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},ca=function(e){if(ai(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Ja=1e-5;function Sa(e,t,n){return n===void 0&&(n=Ja),Math.abs(e-t)<n}var lo=function(e,t){return(e%t+t)%t},Ca=lo;function $o(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function Eo(e){return Ny(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function Fa(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function Go(e,t,n,r,i,a,s,l,p,m){var y=e,b=t,E=n,O=r,P=l,I=p,N=Math.PI*120/180,z=Math.PI/180*(+i||0),V=[],W,K,J,oe,Te;if(m)K=m[0],J=m[1],oe=m[2],Te=m[3];else{W=Fa(y,b,-z),y=W.x,b=W.y,W=Fa(P,I,-z),P=W.x,I=W.y;var Re=(y-P)/2,We=(b-I)/2,ut=Re*Re/(E*E)+We*We/(O*O);ut>1&&(ut=Math.sqrt(ut),E*=ut,O*=ut);var ct=E*E,Ft=O*O,ft=(a===s?-1:1)*Math.sqrt(Math.abs((ct*Ft-ct*We*We-Ft*Re*Re)/(ct*We*We+Ft*Re*Re)));oe=ft*E*We/O+(y+P)/2,Te=ft*-O*Re/E+(b+I)/2,K=Math.asin(((b-Te)/O*Math.pow(10,9)>>0)/Math.pow(10,9)),J=Math.asin(((I-Te)/O*Math.pow(10,9)>>0)/Math.pow(10,9)),K=y<oe?Math.PI-K:K,J=P<oe?Math.PI-J:J,K<0&&(K=Math.PI*2+K),J<0&&(J=Math.PI*2+J),s&&K>J&&(K-=Math.PI*2),!s&&J>K&&(J-=Math.PI*2)}var St=J-K;if(Math.abs(St)>N){var Mt=J,Nt=P,tn=I;J=K+N*(s&&J>K?1:-1),P=oe+E*Math.cos(J),I=Te+O*Math.sin(J),V=Go(P,I,E,O,i,0,s,Nt,tn,[J,Mt,oe,Te])}St=J-K;var Yt=Math.cos(K),fn=Math.sin(K),Hn=Math.cos(J),cr=Math.sin(J),_r=Math.tan(St/4),Mr=4/3*E*_r,fi=4/3*O*_r,Qi=[y,b],Ta=[y+Mr*fn,b-fi*Yt],Fi=[P+Mr*cr,I-fi*Hn],Ci=[P,I];if(Ta[0]=2*Qi[0]-Ta[0],Ta[1]=2*Qi[1]-Ta[1],m)return Ta.concat(Fi,Ci,V);V=Ta.concat(Fi,Ci,V);for(var Ya=[],Ga=0,vo=V.length;Ga<vo;Ga+=1)Ya[Ga]=Ga%2?Fa(V[Ga-1],V[Ga],z).y:Fa(V[Ga],V[Ga+1],z).x;return Ya}function Lo(e,t,n,r,i,a){var s=.3333333333333333,l=2/3;return[s*e+l*n,s*t+l*r,s*i+l*n,s*a+l*r,i,a]}var To=function(e,t,n,r){var i=.5,a=dt([e,t],[n,r],i);return(0,ce.ev)((0,ce.ev)([],a,!0),[n,r,n,r],!1)};function ho(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],a=r[1],s,l=t.x1,p=t.y1,m=t.x,y=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=a,e;case"A":return s=[l,p].concat(r),["C"].concat(Go(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]));case"Q":return t.qx=i,t.qy=a,s=[l,p].concat(r),["C"].concat(Lo(s[0],s[1],s[2],s[3],s[4],s[5]));case"L":return["C"].concat(To(l,p,i,a));case"Z":return l===m&&p===y?["C",l,p,m,y,m,y]:["C"].concat(To(l,p,m,y));default:}return e}function ws(e,t){if(t===void 0&&(t=!1),Eo(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=ot(e),i=(0,ce.pi)({},By),a=[],s="",l=r.length,p,m,y=[],b=0;b<l;b+=1){r[b]&&(s=r[b][0]),a[b]=s;var E=ho(r[b],i);r[b]=E,$o(r,a,b),l=r.length,s==="Z"&&y.push(b),p=r[b],m=p.length,i.x1=+p[m-2],i.y1=+p[m-1],i.x2=+p[m-4]||i.x1,i.y2=+p[m-3]||i.y1}return t?[r,y]:r}function Eu(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),a=e.slice(6,8),s=dt(n,r,t),l=dt(r,i,t),p=dt(i,a,t),m=dt(s,l,t),y=dt(l,p,t),b=dt(m,y,t);return[["C"].concat(s,m,b),["C"].concat(y,p,a)]}function cu(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),a=n?$n(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,s;return n?s=a?Eu(i):[t,t]:s=[t],{s:t,ss:s,l:a}})}function Fu(e,t,n){var r=cu(e),i=cu(t),a=r.length,s=i.length,l=r.filter(function(N){return N.l}).length,p=i.filter(function(N){return N.l}).length,m=r.filter(function(N){return N.l}).reduce(function(N,z){var V=z.l;return N+V},0)/l||0,y=i.filter(function(N){return N.l}).reduce(function(N,z){var V=z.l;return N+V},0)/p||0,b=n||Math.max(a,s),E=[m,y],O=[b-a,b-s],P=0,I=[r,i].map(function(N,z){return N.l===b?N.map(function(V){return V.s}):N.map(function(V,W){return P=W&&O[z]&&V.l>=E[z],O[z]-=P?1:0,P?V.ss:[V.s]}).flat()});return I[0].length===I[1].length?I:Fu(I[0],I[1],b)}function Su(e,t,n,r,i,a,s,l){return 3*((l-t)*(n+i)-(s-e)*(r+a)+r*(e-i)-n*(t-a)+l*(i+e/3)-s*(a+t/3))/20}function ol(e){var t=0,n=0,r=0;return ws(e).map(function(i){var a;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var s=i.slice(1),l=s[0],p=s[1],m=s[2],y=s[3],b=s[4],E=s[5];return r=Su(t,n,l,p,m,y,b,E),a=i.slice(-2),t=a[0],n=a[1],r}}).reduce(function(i,a){return i+a},0)}function sl(e){return ol(e)>=0}function lc(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function jc(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function Fl(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(a,s){var l=i+s,p;return s===0||e[l]&&e[l][0]==="M"?(p=e[l],["M"].concat(p.slice(-2))):(l>=t&&(l-=n),e[l])})})}function gs(e,t){var n=e.length-1,r=[],i=0,a=0,s=Fl(e);return s.forEach(function(l,p){e.slice(1).forEach(function(m,y){a+=zs(e[(p+y)%n].slice(-2),t[y%n].slice(-2))}),r[p]=a,a=0}),i=r.indexOf(Math.min.apply(null,r)),s[i]}var gl=function(e){return(0,Ch.Z)(e,"Boolean")},Cu=gl,zo=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"},fu=function(e){return e===void 0},Io=fu;function xs(e,t,n){return Zr(e,t,(0,ce.pi)((0,ce.pi)({},n),{bbox:!1,length:!0})).point}var tf=D(37620);function au(e,t,n,r){var i=e-n,a=t-r;return Math.sqrt(i*i+a*a)}function Na(e,t){var n=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(e),!1)),r=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(t),!1)),i=Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(e),!1)),a=Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(t),!1));return{x:n,y:r,width:i-n,height:a-r}}function zu(e){return(e+Math.PI*2)%(Math.PI*2)}function Zc(e,t){var n=Math.abs(e);return t>0?n:n*-1}function Mo(e,t,n,r,i,a){var s=n,l=r;if(s===0||l===0)return{x:e,y:t};for(var p=i-e,m=a-t,y=Math.abs(p),b=Math.abs(m),E=s*s,O=l*l,P=Math.PI/4,I=0,N=0,z=0;z<4;z++){I=s*Math.cos(P),N=l*Math.sin(P);var V=(E-O)*Math.pow(Math.cos(P),3)/s,W=(O-E)*Math.pow(Math.sin(P),3)/l,K=I-V,J=N-W,oe=y-V,Te=b-W,Re=Math.hypot(J,K),We=Math.hypot(Te,oe),ut=Re*Math.asin((K*Te-J*oe)/(Re*We)),ct=ut/Math.sqrt(E+O-I*I-N*N);P+=ct,P=Math.min(Math.PI/2,Math.max(0,P))}return{x:e+Zc(I,p),y:t+Zc(N,m)}}function Ef(e,t,n,r,i,a,s,l){return-1*n*Math.cos(i)*Math.sin(l)-r*Math.sin(i)*Math.cos(l)}function Vc(e,t,n,r,i,a,s,l){return-1*n*Math.sin(i)*Math.sin(l)+r*Math.cos(i)*Math.cos(l)}function gd(e,t,n){return Math.atan(-t/e*Math.tan(n))}function hu(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function ih(e,t,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+e}function Oh(e,t,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+t}function km(e,t,n,r){var i=Math.atan2(r*e,n*t);return(i+Math.PI*2)%(Math.PI*2)}function wv(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function Gs(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}function Tv(e,t,n,r,i,a,s){for(var l=gd(n,r,i),p=1/0,m=-1/0,y=[a,s],b=-Math.PI*2;b<=Math.PI*2;b+=Math.PI){var E=l+b;a<s?a<E&&E<s&&y.push(E):s<E&&E<a&&y.push(E)}for(var b=0;b<y.length;b++){var O=ih(e,t,n,r,i,y[b]);O<p&&(p=O),O>m&&(m=O)}for(var P=hu(n,r,i),I=1/0,N=-1/0,z=[a,s],b=-Math.PI*2;b<=Math.PI*2;b+=Math.PI){var V=P+b;a<s?a<V&&V<s&&z.push(V):s<V&&V<a&&z.push(V)}for(var b=0;b<z.length;b++){var W=Oh(e,t,n,r,i,z[b]);W<I&&(I=W),W>N&&(N=W)}return{x:p,y:I,width:m-p,height:N-I}}function Pg(e,t,n,r,i,a,s,l,p){var m=Gs(l-e,p-t,-i),y=__read(m,2),b=y[0],E=y[1],O=Mo(0,0,n,r,b,E),P=km(n,r,O.x,O.y);P<a?O=wv(n,r,a):P>s&&(O=wv(n,r,s));var I=Gs(O.x,O.y,i);return{x:I[0]+e,y:I[1]+t}}function Ig(e,t,n,r,i,a,s,l){var p=(s-a)*l+a,m=Ef(e,t,n,r,i,a,s,p),y=Vc(e,t,n,r,i,a,s,p);return zu(Math.atan2(y,m))}var U0=1e-4;function Sf(e,t,n,r,i,a){var s=-1,l=1/0,p=[n,r],m=20;a&&a>200&&(m=a/10);for(var y=1/m,b=y/10,E=0;E<=m;E++){var O=E*y,P=[i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(e.concat([O])),!1)),i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t.concat([O])),!1))],I=au(p[0],p[1],P[0],P[1]);I<l&&(s=O,l=I)}if(s===0)return{x:e[0],y:t[0]};if(s===1){var N=e.length;return{x:e[N-1],y:t[N-1]}}l=1/0;for(var E=0;E<32&&!(b<U0);E++){var z=s-b,V=s+b,P=[i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(e.concat([z])),!1)),i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t.concat([z])),!1))],I=au(p[0],p[1],P[0],P[1]);if(z>=0&&I<l)s=z,l=I;else{var W=[i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(e.concat([V])),!1)),i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t.concat([V])),!1))],K=au(p[0],p[1],W[0],W[1]);V<=1&&K<l?(s=V,l=K):b*=.5}}return{x:i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(e.concat([s])),!1)),y:i.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t.concat([s])),!1))}}function Av(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var a=e[i],s=t[i],l=e[(i+1)%r],p=t[(i+1)%r];n+=au(a,s,l,p)}return n/2}function o0(e,t,n,r){return Na([e,n],[t,r])}function Mh(e,t,n,r){return au(e,t,n,r)}function Zf(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function s0(e,t,n,r,i,a){var s=(n-e)*(i-e)+(r-t)*(a-t);if(s<0)return au(e,t,i,a);var l=(n-e)*(n-e)+(r-t)*(r-t);return s>l?au(n,r,i,a):wp(e,t,n,r,i,a)}function wp(e,t,n,r,i,a){var s=[n-e,r-t];if(md.I6(s,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var l=[-s[1],s[0]];md.Fv(l,l);var p=[i-e,a-t];return Math.abs(md.AK(p,l))}function j0(e,t,n,r){return Math.atan2(r-t,n-e)}function Zd(e,t,n,r,i){var a=1-i;return a*a*a*e+3*t*i*a*a+3*n*i*i*a+r*i*i*i}function u0(e,t,n,r,i){var a=1-i;return 3*(a*a*(t-e)+2*a*i*(n-t)+i*i*(r-n))}function tv(e,t,n,r){var i=-3*e+9*t-9*n+3*r,a=6*e-12*t+6*n,s=3*t-3*e,l=[],p,m,y;if(Sa(i,0))Sa(a,0)||(p=-s/a,p>=0&&p<=1&&l.push(p));else{var b=a*a-4*i*s;Sa(b,0)?l.push(-a/(2*i)):b>0&&(y=Math.sqrt(b),p=(-a+y)/(2*i),m=(-a-y)/(2*i),p>=0&&p<=1&&l.push(p),m>=0&&m<=1&&l.push(m))}return l}function Cv(e,t,n,r,i,a,s,l,p){var m=Zd(e,n,i,s,p),y=Zd(t,r,a,l,p),b=Zf(e,t,n,r,p),E=Zf(n,r,i,a,p),O=Zf(i,a,s,l,p),P=Zf(b.x,b.y,E.x,E.y,p),I=Zf(E.x,E.y,O.x,O.y,p);return[[e,t,b.x,b.y,P.x,P.y,m,y],[m,y,I.x,I.y,O.x,O.y,s,l]]}function l0(e,t,n,r,i,a,s,l,p){if(p===0)return Av([e,n,i,s],[t,r,a,l]);var m=Cv(e,t,n,r,i,a,s,l,.5),y=__spreadArray(__spreadArray([],__read(m[0]),!1),[p-1],!1),b=__spreadArray(__spreadArray([],__read(m[1]),!1),[p-1],!1);return l0.apply(void 0,__spreadArray([],__read(y),!1))+l0.apply(void 0,__spreadArray([],__read(b),!1))}function Z0(e,t,n,r,i,a,s,l){for(var p=[e,s],m=[t,l],y=tv(e,n,i,s),b=tv(t,r,a,l),E=0;E<y.length;E++)p.push(Zd(e,n,i,s,y[E]));for(var E=0;E<b.length;E++)m.push(Zd(t,r,a,l,b[E]));return Na(p,m)}function kg(e,t,n,r,i,a,s,l){return l0(e,t,n,r,i,a,s,l,3)}function Lm(e,t,n,r,i,a,s,l,p,m,y){return Sf([e,n,i,s],[t,r,a,l],p,m,Zd,y)}function Lg(e,t,n,r,i,a,s,l,p,m,y){var b=Lm(e,t,n,r,i,a,s,l,p,m,y);return au(b.x,b.y,p,m)}function Dm(e,t,n,r,i,a,s,l,p){return{x:Zd(e,n,i,s,p),y:Zd(t,r,a,l,p)}}function p1(e,t,n,r,i,a,s,l,p){var m=u0(e,n,i,s,p),y=u0(t,r,a,l,p);return zu(Math.atan2(y,m))}function Ov(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],a=e[r+1],s=au(i[0],i[1],a[0],a[1]),l={from:i,to:a,length:s};n.push(l),t+=s}return{segments:n,totalLength:t}}function Vd(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=au(r[0],r[1],i[0],i[1])}return t}function Mv(e,t){if(t>1||t<0||e.length<2)return null;var n=Ov(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var a=0,s=null,l=0;l<r.length;l++){var p=r[l],m=p.from,y=p.to,b=p.length/i;if(t>=a&&t<=a+b){var E=(t-a)/b;s=Zf(m[0],m[1],y[0],y[1],E);break}a+=b}return s}function V0(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=Ov(e),r=n.segments,i=n.totalLength,a=0,s=0,l=0;l<r.length;l++){var p=r[l],m=p.from,y=p.to,b=p.length/i;if(t>=a&&t<=a+b){s=Math.atan2(y[1]-m[1],y[0]-m[0]);break}a+=b}return s}function nv(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var a=e[i],s=e[i+1],l=s0(a[0],a[1],s[0],s[1],t,n);l<r&&(r=l)}return r}function Fy(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return Na(t,n)}function v1(e){return Vd(e)}function zy(e,t){return Mv(e,t)}function $E(e,t,n){return nv(e,t,n)}function Nm(e,t){return V0(e,t)}function H0(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}function Uy(e){return Fy(e)}function Tl(e){return Vd(H0(e))}function rv(e,t){return Mv(H0(e),t)}function GE(e,t,n){return nv(H0(e),t,n)}function W0(e,t){return V0(H0(e),t)}function c0(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function $0(e,t,n){var r=e+n-2*t;if(Sa(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function jy(e,t,n,r,i,a,s){var l=c0(e,n,i,s),p=c0(t,r,a,s),m=Zf(e,t,n,r,s),y=Zf(n,r,i,a,s);return[[e,t,m.x,m.y,l,p],[l,p,y.x,y.y,i,a]]}function Hd(e,t,n,r,i,a,s){if(s===0)return(au(e,t,n,r)+au(n,r,i,a)+au(e,t,i,a))/2;var l=jy(e,t,n,r,i,a,.5),p=l[0],m=l[1];return p.push(s-1),m.push(s-1),Hd.apply(void 0,__spreadArray([],__read(p),!1))+Hd.apply(void 0,__spreadArray([],__read(m),!1))}function Dg(e,t,n,r,i,a){var s=$0(e,n,i)[0],l=$0(t,r,a)[0],p=[e,i],m=[t,a];return s!==void 0&&p.push(c0(e,n,i,s)),l!==void 0&&m.push(c0(t,r,a,l)),Na(p,m)}function Ng(e,t,n,r,i,a){return Hd(e,t,n,r,i,a,3)}function Bg(e,t,n,r,i,a,s,l){return Sf([e,n,i],[t,r,a],s,l,c0)}function Fg(e,t,n,r,i,a,s,l){var p=Bg(e,t,n,r,i,a,s,l);return au(p.x,p.y,s,l)}var Zy=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:typeof self!="undefined"?self:{},Vy={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zy,function(){function n(J,oe,Te,Re,We){r(J,oe,Te||0,Re||J.length-1,We||a)}function r(J,oe,Te,Re,We){for(;Re>Te;){if(Re-Te>600){var ut=Re-Te+1,ct=oe-Te+1,Ft=Math.log(ut),ft=.5*Math.exp(2*Ft/3),St=.5*Math.sqrt(Ft*ft*(ut-ft)/ut)*(ct-ut/2<0?-1:1),Mt=Math.max(Te,Math.floor(oe-ct*ft/ut+St)),Nt=Math.min(Re,Math.floor(oe+(ut-ct)*ft/ut+St));r(J,oe,Mt,Nt,We)}var tn=J[oe],Yt=Te,fn=Re;for(i(J,Te,oe),We(J[Re],tn)>0&&i(J,Te,Re);Yt<fn;){for(i(J,Yt,fn),Yt++,fn--;We(J[Yt],tn)<0;)Yt++;for(;We(J[fn],tn)>0;)fn--}We(J[Te],tn)===0?i(J,Te,fn):(fn++,i(J,fn,Re)),fn<=oe&&(Te=fn+1),oe<=fn&&(Re=fn-1)}}function i(J,oe,Te){var Re=J[oe];J[oe]=J[Te],J[Te]=Re}function a(J,oe){return J<oe?-1:J>oe?1:0}var s=function(oe){oe===void 0&&(oe=9),this._maxEntries=Math.max(4,oe),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(oe){var Te=this.data,Re=[];if(!V(oe,Te))return Re;for(var We=this.toBBox,ut=[];Te;){for(var ct=0;ct<Te.children.length;ct++){var Ft=Te.children[ct],ft=Te.leaf?We(Ft):Ft;V(oe,ft)&&(Te.leaf?Re.push(Ft):z(oe,ft)?this._all(Ft,Re):ut.push(Ft))}Te=ut.pop()}return Re},s.prototype.collides=function(oe){var Te=this.data;if(!V(oe,Te))return!1;for(var Re=[];Te;){for(var We=0;We<Te.children.length;We++){var ut=Te.children[We],ct=Te.leaf?this.toBBox(ut):ut;if(V(oe,ct)){if(Te.leaf||z(oe,ct))return!0;Re.push(ut)}}Te=Re.pop()}return!1},s.prototype.load=function(oe){if(!(oe&&oe.length))return this;if(oe.length<this._minEntries){for(var Te=0;Te<oe.length;Te++)this.insert(oe[Te]);return this}var Re=this._build(oe.slice(),0,oe.length-1,0);if(!this.data.children.length)this.data=Re;else if(this.data.height===Re.height)this._splitRoot(this.data,Re);else{if(this.data.height<Re.height){var We=this.data;this.data=Re,Re=We}this._insert(Re,this.data.height-Re.height-1,!0)}return this},s.prototype.insert=function(oe){return oe&&this._insert(oe,this.data.height-1),this},s.prototype.clear=function(){return this.data=W([]),this},s.prototype.remove=function(oe,Te){if(!oe)return this;for(var Re=this.data,We=this.toBBox(oe),ut=[],ct=[],Ft,ft,St;Re||ut.length;){if(Re||(Re=ut.pop(),ft=ut[ut.length-1],Ft=ct.pop(),St=!0),Re.leaf){var Mt=l(oe,Re.children,Te);if(Mt!==-1)return Re.children.splice(Mt,1),ut.push(Re),this._condense(ut),this}!St&&!Re.leaf&&z(Re,We)?(ut.push(Re),ct.push(Ft),Ft=0,ft=Re,Re=Re.children[0]):ft?(Ft++,Re=ft.children[Ft],St=!1):Re=null}return this},s.prototype.toBBox=function(oe){return oe},s.prototype.compareMinX=function(oe,Te){return oe.minX-Te.minX},s.prototype.compareMinY=function(oe,Te){return oe.minY-Te.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(oe){return this.data=oe,this},s.prototype._all=function(oe,Te){for(var Re=[];oe;)oe.leaf?Te.push.apply(Te,oe.children):Re.push.apply(Re,oe.children),oe=Re.pop();return Te},s.prototype._build=function(oe,Te,Re,We){var ut=Re-Te+1,ct=this._maxEntries,Ft;if(ut<=ct)return Ft=W(oe.slice(Te,Re+1)),p(Ft,this.toBBox),Ft;We||(We=Math.ceil(Math.log(ut)/Math.log(ct)),ct=Math.ceil(ut/Math.pow(ct,We-1))),Ft=W([]),Ft.leaf=!1,Ft.height=We;var ft=Math.ceil(ut/ct),St=ft*Math.ceil(Math.sqrt(ct));K(oe,Te,Re,St,this.compareMinX);for(var Mt=Te;Mt<=Re;Mt+=St){var Nt=Math.min(Mt+St-1,Re);K(oe,Mt,Nt,ft,this.compareMinY);for(var tn=Mt;tn<=Nt;tn+=ft){var Yt=Math.min(tn+ft-1,Nt);Ft.children.push(this._build(oe,tn,Yt,We-1))}}return p(Ft,this.toBBox),Ft},s.prototype._chooseSubtree=function(oe,Te,Re,We){for(;We.push(Te),!(Te.leaf||We.length-1===Re);){for(var ut=1/0,ct=1/0,Ft=void 0,ft=0;ft<Te.children.length;ft++){var St=Te.children[ft],Mt=O(St),Nt=I(oe,St)-Mt;Nt<ct?(ct=Nt,ut=Mt<ut?Mt:ut,Ft=St):Nt===ct&&Mt<ut&&(ut=Mt,Ft=St)}Te=Ft||Te.children[0]}return Te},s.prototype._insert=function(oe,Te,Re){var We=Re?oe:this.toBBox(oe),ut=[],ct=this._chooseSubtree(We,this.data,Te,ut);for(ct.children.push(oe),y(ct,We);Te>=0&&ut[Te].children.length>this._maxEntries;)this._split(ut,Te),Te--;this._adjustParentBBoxes(We,ut,Te)},s.prototype._split=function(oe,Te){var Re=oe[Te],We=Re.children.length,ut=this._minEntries;this._chooseSplitAxis(Re,ut,We);var ct=this._chooseSplitIndex(Re,ut,We),Ft=W(Re.children.splice(ct,Re.children.length-ct));Ft.height=Re.height,Ft.leaf=Re.leaf,p(Re,this.toBBox),p(Ft,this.toBBox),Te?oe[Te-1].children.push(Ft):this._splitRoot(Re,Ft)},s.prototype._splitRoot=function(oe,Te){this.data=W([oe,Te]),this.data.height=oe.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(oe,Te,Re){for(var We,ut=1/0,ct=1/0,Ft=Te;Ft<=Re-Te;Ft++){var ft=m(oe,0,Ft,this.toBBox),St=m(oe,Ft,Re,this.toBBox),Mt=N(ft,St),Nt=O(ft)+O(St);Mt<ut?(ut=Mt,We=Ft,ct=Nt<ct?Nt:ct):Mt===ut&&Nt<ct&&(ct=Nt,We=Ft)}return We||Re-Te},s.prototype._chooseSplitAxis=function(oe,Te,Re){var We=oe.leaf?this.compareMinX:b,ut=oe.leaf?this.compareMinY:E,ct=this._allDistMargin(oe,Te,Re,We),Ft=this._allDistMargin(oe,Te,Re,ut);ct<Ft&&oe.children.sort(We)},s.prototype._allDistMargin=function(oe,Te,Re,We){oe.children.sort(We);for(var ut=this.toBBox,ct=m(oe,0,Te,ut),Ft=m(oe,Re-Te,Re,ut),ft=P(ct)+P(Ft),St=Te;St<Re-Te;St++){var Mt=oe.children[St];y(ct,oe.leaf?ut(Mt):Mt),ft+=P(ct)}for(var Nt=Re-Te-1;Nt>=Te;Nt--){var tn=oe.children[Nt];y(Ft,oe.leaf?ut(tn):tn),ft+=P(Ft)}return ft},s.prototype._adjustParentBBoxes=function(oe,Te,Re){for(var We=Re;We>=0;We--)y(Te[We],oe)},s.prototype._condense=function(oe){for(var Te=oe.length-1,Re=void 0;Te>=0;Te--)oe[Te].children.length===0?Te>0?(Re=oe[Te-1].children,Re.splice(Re.indexOf(oe[Te]),1)):this.clear():p(oe[Te],this.toBBox)};function l(J,oe,Te){if(!Te)return oe.indexOf(J);for(var Re=0;Re<oe.length;Re++)if(Te(J,oe[Re]))return Re;return-1}function p(J,oe){m(J,0,J.children.length,oe,J)}function m(J,oe,Te,Re,We){We||(We=W(null)),We.minX=1/0,We.minY=1/0,We.maxX=-1/0,We.maxY=-1/0;for(var ut=oe;ut<Te;ut++){var ct=J.children[ut];y(We,J.leaf?Re(ct):ct)}return We}function y(J,oe){return J.minX=Math.min(J.minX,oe.minX),J.minY=Math.min(J.minY,oe.minY),J.maxX=Math.max(J.maxX,oe.maxX),J.maxY=Math.max(J.maxY,oe.maxY),J}function b(J,oe){return J.minX-oe.minX}function E(J,oe){return J.minY-oe.minY}function O(J){return(J.maxX-J.minX)*(J.maxY-J.minY)}function P(J){return J.maxX-J.minX+(J.maxY-J.minY)}function I(J,oe){return(Math.max(oe.maxX,J.maxX)-Math.min(oe.minX,J.minX))*(Math.max(oe.maxY,J.maxY)-Math.min(oe.minY,J.minY))}function N(J,oe){var Te=Math.max(J.minX,oe.minX),Re=Math.max(J.minY,oe.minY),We=Math.min(J.maxX,oe.maxX),ut=Math.min(J.maxY,oe.maxY);return Math.max(0,We-Te)*Math.max(0,ut-Re)}function z(J,oe){return J.minX<=oe.minX&&J.minY<=oe.minY&&oe.maxX<=J.maxX&&oe.maxY<=J.maxY}function V(J,oe){return oe.minX<=J.maxX&&oe.minY<=J.maxY&&oe.maxX>=J.minX&&oe.maxY>=J.minY}function W(J){return{children:J,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function K(J,oe,Te,Re,We){for(var ut=[oe,Te];ut.length;)if(Te=ut.pop(),oe=ut.pop(),!(Te-oe<=Re)){var ct=oe+Math.ceil((Te-oe)/Re/2)*Re;n(J,ct,oe,Te,We),ut.push(oe,ct,ct,Te)}}return s})})(Vy);var Bm=Vy.exports,oi;(function(e){e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh"})(oi||(oi={}));var f0;(function(e){e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(f0||(f0={}));var iv=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),m1=function(){function e(t){this.clipSpaceNearZ=f0.NEGATIVE_ONE,this.plugins=[],this.config=(0,ce.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function Rv(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function wf(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Sc(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Hy(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Tp(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function nx(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function h0(e){return e===void 0?0:e>360||e<-360?e%360:e}function cc(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?nr.clone(e):(0,Yl.Z)(e)?nr.fromValues(e,t,n):nr.fromValues(e[0],e[1]||t,e[2]||n)}function Ou(e){return e*(Math.PI/180)}function Tf(e){return e*(180/Math.PI)}function G0(e){return e=e%400,e<0&&(e+=400),e/400*360}function Fm(e){return e/360}function g1(e){return 360*e}function y1(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*n,l=r*r,p=i*i,m=a*a,y=s+l+p+m,b=n*a-r*i;return b>.499995*y?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):b<-.499995*y?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-a*r)),e[1]=Math.atan2(2*(n*a+r*i),1-2*(p+m)),e[2]=Math.atan2(2*(n*r+i*a),1-2*(l+p))),e}function Wy(e,t){var n,r,i=Math.PI*.5,a=(0,ce.CR)(ni.getScaling(nr.create(),t),3),s=a[0],l=a[1],p=a[2],m=Math.asin(-t[2]/s);return m<i?m>-i?(n=Math.atan2(t[6]/l,t[10]/p),r=Math.atan2(t[1]/s,t[0]/s)):(r=0,n=-Math.atan2(t[4]/l,t[5]/l)):(r=0,n=Math.atan2(t[4]/l,t[5]/l)),e[0]=n,e[1]=m,e[2]=r,e}function zg(e,t){return t.length===16?Wy(e,t):y1(e,t)}function $y(e,t,n,r,i){var a=Math.cos(e),s=Math.sin(e);return lu(r*a,i*s,0,-r*s,i*a,0,t,n,1)}function Gy(e,t,n,r,i,a,s,l){l===void 0&&(l=!1);var p=2*a/(n-t),m=2*a/(r-i),y=(n+t)/(n-t),b=(r+i)/(r-i),E,O;return l?(E=-s/(s-a),O=-s*a/(s-a)):(E=-(s+a)/(s-a),O=-2*s*a/(s-a)),e[0]=p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=m,e[6]=0,e[7]=0,e[8]=y,e[9]=b,e[10]=E,e[11]=-1,e[12]=0,e[13]=0,e[14]=O,e[15]=0,e}function Ap(e){var t=e[0],n=e[1],r=e[3],i=e[4],a=Math.sqrt(t*t+n*n),s=Math.sqrt(r*r+i*i),l=t*i-n*r;l<0&&(t<i?a=-a:s=-s),a&&(t*=1/a,n*=1/a),s&&(r*=1/s,i*=1/s);var p=Math.atan2(n,t),m=Tf(p);return[e[6],e[7],a,s,m]}var Wd=ni.create(),Kh=ni.create(),d0=tr.Ue(),Xo=[nr.create(),nr.create(),nr.create()],Ug=nr.create();function _1(e,t,n,r,i,a){if(!b1(Wd,e)||(ni.copy(Kh,Wd),Kh[3]=0,Kh[7]=0,Kh[11]=0,Kh[15]=1,Math.abs(ni.determinant(Kh))<1e-8))return!1;var s=Wd[3],l=Wd[7],p=Wd[11],m=Wd[12],y=Wd[13],b=Wd[14],E=Wd[15];if(s!==0||l!==0||p!==0){d0[0]=s,d0[1]=l,d0[2]=p,d0[3]=E;var O=ni.invert(Kh,Kh);if(!O)return!1;ni.transpose(Kh,Kh),tr.fF(i,d0,Kh)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=m,t[1]=y,t[2]=b,x1(Xo,Wd),n[0]=nr.length(Xo[0]),nr.normalize(Xo[0],Xo[0]),r[0]=nr.dot(Xo[0],Xo[1]),zm(Xo[1],Xo[1],Xo[0],1,-r[0]),n[1]=nr.length(Xo[1]),nr.normalize(Xo[1],Xo[1]),r[0]/=n[1],r[1]=nr.dot(Xo[0],Xo[2]),zm(Xo[2],Xo[2],Xo[0],1,-r[1]),r[2]=nr.dot(Xo[1],Xo[2]),zm(Xo[2],Xo[2],Xo[1],1,-r[2]),n[2]=nr.length(Xo[2]),nr.normalize(Xo[2],Xo[2]),r[1]/=n[2],r[2]/=n[2],nr.cross(Ug,Xo[1],Xo[2]),nr.dot(Xo[0],Ug)<0)for(var P=0;P<3;P++)n[P]*=-1,Xo[P][0]*=-1,Xo[P][1]*=-1,Xo[P][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+Xo[0][0]-Xo[1][1]-Xo[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-Xo[0][0]+Xo[1][1]-Xo[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-Xo[0][0]-Xo[1][1]+Xo[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+Xo[0][0]+Xo[1][1]+Xo[2][2],0)),Xo[2][1]>Xo[1][2]&&(a[0]=-a[0]),Xo[0][2]>Xo[2][0]&&(a[1]=-a[1]),Xo[1][0]>Xo[0][1]&&(a[2]=-a[2]),!0}function b1(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function x1(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function zm(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var Al=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){Rv(this.center,t),Rv(this.halfExtents,n),wf(this.min,this.center,this.halfExtents),Sc(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){Sc(this.center,n,t),Hy(this.center,this.center,.5),wf(this.halfExtents,n,t),Hy(this.halfExtents,this.halfExtents,.5),Rv(this.min,t),Rv(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],a=n[2],s=this.halfExtents,l=s[0],p=s[1],m=s[2],y=r-l,b=r+l,E=i-p,O=i+p,P=a-m,I=a+m,N=t.center,z=N[0],V=N[1],W=N[2],K=t.halfExtents,J=K[0],oe=K[1],Te=K[2],Re=z-J,We=z+J,ut=V-oe,ct=V+oe,Ft=W-Te,ft=W+Te;Re<y&&(y=Re),We>b&&(b=We),ut<E&&(E=ut),ct>O&&(O=ct),Ft<P&&(P=Ft),ft>I&&(I=ft),n[0]=(y+b)*.5,n[1]=(E+O)*.5,n[2]=(P+I)*.5,s[0]=(b-y)*.5,s[1]=(O-E)*.5,s[2]=(I-P)*.5,this.min[0]=y,this.min[1]=E,this.min[2]=P,this.max[0]=b,this.max[1]=O,this.max[2]=I}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,a=t.center,s=t.halfExtents,l=n[0],p=n[4],m=n[8],y=n[1],b=n[5],E=n[9],O=n[2],P=n[6],I=n[10],N=Math.abs(l),z=Math.abs(p),V=Math.abs(m),W=Math.abs(y),K=Math.abs(b),J=Math.abs(E),oe=Math.abs(O),Te=Math.abs(P),Re=Math.abs(I);r[0]=n[12]+l*a[0]+p*a[1]+m*a[2],r[1]=n[13]+y*a[0]+b*a[1]+E*a[2],r[2]=n[14]+O*a[0]+P*a[1]+I*a[2],i[0]=N*s[0]+z*s[1]+V*s[2],i[1]=W*s[0]+K*s[1]+J*s[2],i[2]=oe*s[0]+Te*s[1]+Re*s[2],wf(this.min,r,i),Sc(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),a=t.getMin();return r[0]<=i[0]&&n[0]>=a[0]&&r[1]<=i[1]&&n[1]>=a[1]&&r[2]<=i[2]&&n[2]>=a[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=Tp([0,0,0],this.getMin(),t.getMin()),i=nx([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?Rv([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?Rv([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),jg=function(){function e(t,n){this.distance=t||0,this.normal=n||nr.fromValues(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return nr.dot(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/nr.len(this.normal);nr.scale(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),a=this.distanceToPoint(n),s=i/(i-a),l=s>=0&&s<=1;return l&&r&&nr.lerp(r,t,n,s),l},e}(),Cp;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(Cp||(Cp={}));var rx=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new jg)}return e.prototype.extractFromVPMatrix=function(t){var n=(0,ce.CR)(t,16),r=n[0],i=n[1],a=n[2],s=n[3],l=n[4],p=n[5],m=n[6],y=n[7],b=n[8],E=n[9],O=n[10],P=n[11],I=n[12],N=n[13],z=n[14],V=n[15];nr.set(this.planes[0].normal,s-r,y-l,P-b),this.planes[0].distance=V-I,nr.set(this.planes[1].normal,s+r,y+l,P+b),this.planes[1].distance=V+I,nr.set(this.planes[2].normal,s+i,y+p,P+E),this.planes[2].distance=V+N,nr.set(this.planes[3].normal,s-i,y-p,P-E),this.planes[3].distance=V-N,nr.set(this.planes[4].normal,s-a,y-m,P-O),this.planes[4].distance=V-z,nr.set(this.planes[5].normal,s+a,y+m,P+O),this.planes[5].distance=V+z,this.planes.forEach(function(W){W.normalize(),W.updatePNVertexFlag()})},e}(),Hc=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),p0=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.prototype.toJSON=function(){},e}(),Mu="Method not implemented.",v0="Use document.documentElement instead.",ix="Cannot append a destroyed element.",gu;(function(e){e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING"})(gu||(gu={}));var Um;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC"})(Um||(Um={}));var Rh;(function(e){e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE"})(Rh||(Rh={}));var E1={UPDATED:"updated"},$d=2e-4,jm=function(){function e(){this.clipSpaceNearZ=f0.NEGATIVE_ONE,this.eventEmitter=new Bo,this.matrix=ni.create(),this.right=nr.fromValues(1,0,0),this.up=nr.fromValues(0,1,0),this.forward=nr.fromValues(0,0,1),this.position=nr.fromValues(0,0,1),this.focalPoint=nr.fromValues(0,0,0),this.distanceVector=nr.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ni.create(),this.projectionMatrixInverse=ni.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=gu.EXPLORING,this.trackingMode=Um.DEFAULT,this.projectionMode=Rh.PERSPECTIVE,this.frustum=new rx,this.orthoMatrix=ni.create()}return e.prototype.isOrtho=function(){return this.projectionMode===Rh.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===gu.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===gu.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==gu.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return ni.invert(ni.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=ni.fromTranslation(ni.create(),[t,n,0]);this.jitteredProjectionMatrix=ni.multiply(ni.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===Rh.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===Rh.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,a,s){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.projectionMode===Rh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Rh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===Rh.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Rh.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,a=r.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(i,a),this.setFocalPoint(i,a),this.setZoom(t),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),p=l.x,m=l.y,y=nr.fromValues(p-i,m-a,0),b=nr.dot(y,this.right)/nr.length(this.right),E=nr.dot(y,this.up)/nr.length(this.up);return this.pan(-b,-E),this},e.prototype.setPerspective=function(t,n,r,i){var a;this.projectionMode=Rh.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var s=this.near*Math.tan(Ou(.5*this.fov))/this.zoom,l=2*s,p=this.aspect*l,m=-.5*p;if(!((a=this.view)===null||a===void 0)&&a.enabled){var y=this.view.fullWidth,b=this.view.fullHeight;m+=this.view.offsetX*p/y,s-=this.view.offsetY*l/b,p*=this.view.width/y,l*=this.view.height/b}return Gy(this.projectionMatrix,m,m+p,s,s-l,t,this.far,this.clipSpaceNearZ===f0.ZERO),ni.scale(this.projectionMatrix,this.projectionMatrix,nr.fromValues(1,-1,1)),ni.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,a,s){var l;this.projectionMode=Rh.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=a,this.far=s;var p=(this.rright-this.left)/(2*this.zoom),m=(this.top-this.bottom)/(2*this.zoom),y=(this.rright+this.left)/2,b=(this.top+this.bottom)/2,E=y-p,O=y+p,P=b+m,I=b-m;if(!((l=this.view)===null||l===void 0)&&l.enabled){var N=(this.rright-this.left)/this.view.fullWidth/this.zoom,z=(this.top-this.bottom)/this.view.fullHeight/this.zoom;E+=N*this.view.offsetX,O=E+N*this.view.width,P-=z*this.view.offsetY,I=P-z*this.view.height}return this.clipSpaceNearZ===f0.NEGATIVE_ONE?ni.ortho(this.projectionMatrix,E,O,I,P,a,s):ni.orthoZO(this.projectionMatrix,E,O,I,P,a,s),ni.scale(this.projectionMatrix,this.projectionMatrix,nr.fromValues(1,-1,1)),ni.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=cc(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=nr.fromValues(0,1,0);if(this.focalPoint=cc(t,n,r),this.trackingMode===Um.CINEMATIC){var a=nr.subtract(nr.create(),this.focalPoint,this.position);t=a[0],n=a[1],r=a[2];var s=nr.length(a),l=Tf(Math.asin(n/s)),p=90+Tf(Math.atan2(r,t)),m=ni.create();ni.rotateY(m,m,Ou(p)),ni.rotateX(m,m,Ou(l)),i=nr.transformMat4(nr.create(),[0,1,0],m)}return ni.invert(this.matrix,ni.lookAt(ni.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<$d&&(this.distance=$d),this.dollyingStep=this.distance/100;var n=nr.create();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=h0(t),this.computeMatrix(),this._getAxes(),this.type===gu.ORBITING||this.type===gu.EXPLORING?this._getPosition():this.type===gu.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=h0(t),this.computeMatrix(),this._getAxes(),this.type===gu.ORBITING||this.type===gu.EXPLORING?this._getPosition():this.type===gu.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=h0(t),this.computeMatrix(),this._getAxes(),this.type===gu.ORBITING||this.type===gu.EXPLORING?this._getPosition():this.type===gu.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=gn(Cn(),[0,0,1],Ou(this.roll));ni.identity(this.matrix);var n=gn(Cn(),[1,0,0],Ou((this.rotateWorld&&this.type!==gu.TRACKING||this.type===gu.TRACKING?1:-1)*this.elevation)),r=gn(Cn(),[0,1,0],Ou((this.rotateWorld&&this.type!==gu.TRACKING||this.type===gu.TRACKING?1:-1)*this.azimuth)),i=ti(Cn(),r,n);i=ti(Cn(),i,t);var a=ni.fromQuat(ni.create(),i);this.type===gu.ORBITING||this.type===gu.EXPLORING?(ni.translate(this.matrix,this.matrix,this.focalPoint),ni.multiply(this.matrix,this.matrix,a),ni.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===gu.TRACKING&&(ni.translate(this.matrix,this.matrix,this.position),ni.multiply(this.matrix,this.matrix,a))},e.prototype._setPosition=function(t,n,r){this.position=cc(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){nr.copy(this.right,cc(tr.fF(tr.Ue(),[1,0,0,0],this.matrix))),nr.copy(this.up,cc(tr.fF(tr.Ue(),[0,1,0,0],this.matrix))),nr.copy(this.forward,cc(tr.fF(tr.Ue(),[0,0,1,0],this.matrix))),nr.normalize(this.right,this.right),nr.normalize(this.up,this.up),nr.normalize(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=nr.length(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===gu.TRACKING?(this.elevation=Tf(Math.asin(n/i)),this.azimuth=Tf(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=Tf(Math.asin(n/i)),this.azimuth=Tf(Math.atan2(-t,-r))):(this.elevation=-Tf(Math.asin(n/i)),this.azimuth=-Tf(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){nr.copy(this.position,cc(tr.fF(tr.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){nr.transformMat3(this.distanceVector,[0,0,-this.distance],$l(il(),this.matrix)),nr.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=nr.subtract(nr.create(),this.focalPoint,this.position),this.distance=nr.length(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===Rh.ORTHOGRAPHIC){var t=this.position,n=gn(Cn(),[0,0,1],-this.roll*Math.PI/180);ni.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,nr.fromValues((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),nr.fromValues(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=ni.multiply(ni.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(E1.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(Mu)},e.prototype.pan=function(t,n){throw new Error(Mu)},e.prototype.dolly=function(t){throw new Error(Mu)},e.prototype.createLandmark=function(t,n){throw new Error(Mu)},e.prototype.gotoLandmark=function(t,n){throw new Error(Mu)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(Mu)},e}();function nf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var l=e.apply(this,r);return n.cache=s.set(a,l)||s,l};return n.cache=new(nf.Cache||Map),n}nf.Cache=Map;var Oa;(function(e){e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger"})(Oa||(Oa={}));var Ph;(function(e){e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther"})(Ph||(Ph={}));var XE;(function(e){e[e.kAll=0]="kAll",e[e.kNonNegative=1]="kNonNegative",e[e.kInteger=2]="kInteger",e[e.kNonNegativeInteger=3]="kNonNegativeInteger",e[e.kPositiveInteger=4]="kPositiveInteger"})(XE||(XE={}));var ax;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(ax||(ax={}));var ox;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(ox||(ox={}));var QA=[{name:"em",unit_type:Oa.kEms},{name:"px",unit_type:Oa.kPixels},{name:"deg",unit_type:Oa.kDegrees},{name:"rad",unit_type:Oa.kRadians},{name:"grad",unit_type:Oa.kGradians},{name:"ms",unit_type:Oa.kMilliseconds},{name:"s",unit_type:Oa.kSeconds},{name:"rem",unit_type:Oa.kRems},{name:"turn",unit_type:Oa.kTurns}],Pv;(function(e){e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType"})(Pv||(Pv={}));var JA=function(e){return QA.find(function(t){return t.name===e}).unit_type},eC=function(e){return e?e==="number"?Oa.kNumber:e==="percent"||e==="%"?Oa.kPercentage:JA(e):Oa.kUnknown},tC=function(e){switch(e){case Oa.kNumber:case Oa.kInteger:return Ph.kUNumber;case Oa.kPercentage:return Ph.kUPercent;case Oa.kPixels:return Ph.kULength;case Oa.kMilliseconds:case Oa.kSeconds:return Ph.kUTime;case Oa.kDegrees:case Oa.kRadians:case Oa.kGradians:case Oa.kTurns:return Ph.kUAngle;default:return Ph.kUOther}},nC=function(e){switch(e){case Ph.kUNumber:return Oa.kNumber;case Ph.kULength:return Oa.kPixels;case Ph.kUPercent:return Oa.kPercentage;case Ph.kUTime:return Oa.kSeconds;case Ph.kUAngle:return Oa.kDegrees;default:return Oa.kUnknown}},sx=function(e){var t=1;switch(e){case Oa.kPixels:case Oa.kDegrees:case Oa.kSeconds:break;case Oa.kMilliseconds:t=.001;break;case Oa.kRadians:t=180/Math.PI;break;case Oa.kGradians:t=.9;break;case Oa.kTurns:t=360;break}return t},ux=function(e){switch(e){case Oa.kNumber:case Oa.kInteger:return"";case Oa.kPercentage:return"%";case Oa.kEms:return"em";case Oa.kRems:return"rem";case Oa.kPixels:return"px";case Oa.kDegrees:return"deg";case Oa.kRadians:return"rad";case Oa.kGradians:return"grad";case Oa.kMilliseconds:return"ms";case Oa.kSeconds:return"s";case Oa.kTurns:return"turn"}return""},S1=function(){function e(){}return e.isAngle=function(t){return t===Oa.kDegrees||t===Oa.kRadians||t===Oa.kGradians||t===Oa.kTurns},e.isLength=function(t){return t>=Oa.kEms&&t<Oa.kDegrees},e.isRelativeUnit=function(t){return t===Oa.kPercentage||t===Oa.kEms||t===Oa.kRems},e.isTime=function(t){return t===Oa.kSeconds||t===Oa.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(ax.kNo,ox.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=Pv.kUnitType&&this.getType()<=Pv.kClampType},e}(),rC=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return Pv.kColorType},t.prototype.to=function(n){return this},t}(S1),Iv;(function(e){e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"})(Iv||(Iv={}));var Xy=function(e){(0,ce.ZT)(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return Pv.kColorType},t}(S1),yd=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return Pv.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(S1),iC=nf(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),YE=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function aC(e){if(!e)throw new Error}function Zm(e){return typeof e=="function"}function oC(e){return typeof e=="symbol"}var g5=function(e){return Object.fromEntries(Object.entries(e).filter(function(t){var n=__read(t,2),r=n[1];return r!==void 0}))},sC={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},lx=nf(function(e){var t=iC(e),n=sC[t];return t=(n==null?void 0:n.alias)||t,t}),qE=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(aC(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},w1=function(e){return nC(tC(e))},Ru=function(e){(0,ce.ZT)(t,e);function t(n,r){r===void 0&&(r=Oa.kNumber);var i=e.call(this)||this,a;return typeof r=="string"?a=eC(r):a=r,i.unit=a,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return Pv.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=w1(this.unit);if(r!==w1(n)||r===Oa.kUnknown)return null;var i=sx(this.unit)/sx(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var a;switch(this.unit){case Oa.kUnknown:break;case Oa.kInteger:a=Number(this.value).toFixed(0);break;case Oa.kNumber:case Oa.kPercentage:case Oa.kEms:case Oa.kRems:case Oa.kPixels:case Oa.kDegrees:case Oa.kRadians:case Oa.kGradians:case Oa.kMilliseconds:case Oa.kSeconds:case Oa.kTurns:{var s=-999999,l=999999,p=this.value,m=ux(this.unit);if(p<s||p>l){var y=ux(this.unit);!Number.isFinite(p)||Number.isNaN(p)?a=qE(p,y):a=p+(y||"")}else a="".concat(p).concat(m)}}return i+=a,i},t}(S1),fc=new Ru(0,"px");new Ru(1,"px");var av=new Ru(0,"deg"),cx=function(e){(0,ce.ZT)(t,e);function t(n,r,i,a,s){a===void 0&&(a=1),s===void 0&&(s=!1);var l=e.call(this,"rgb")||this;return l.r=n,l.g=r,l.b=i,l.alpha=a,l.isNone=s,l}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(rC),ul=new yd("unset"),uC=new yd("initial"),lC=new yd("inherit"),fx={"":ul,unset:ul,initial:uC,inherit:lC},T1=function(e){return fx[e]||(fx[e]=new yd(e)),fx[e]},hx=new cx(0,0,0,0,!0),dx=new cx(0,0,0,0),KE=nf(function(e,t,n,r){return new cx(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),qu=function(e,t){return t===void 0&&(t=Oa.kNumber),new Ru(e,t)},Yy=new Ru(50,"%"),px;(function(e){e[e.Standard=0]="Standard"})(px||(px={}));var Zg;(function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(Zg||(Zg={}));var QE={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new p0(0,0,0,0)},Wa;(function(e){e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>"})(Wa||(Wa={}));function cC(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var fC=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(tn){throw new Error(t+": "+tn)}function r(){var tn=i();return t.length>0&&n("Invalid input not EOF"),tn}function i(){return W(a)}function a(){return s("linear-gradient",e.linearGradient,p)||s("repeating-linear-gradient",e.repeatingLinearGradient,p)||s("radial-gradient",e.radialGradient,b)||s("repeating-radial-gradient",e.repeatingRadialGradient,b)||s("conic-gradient",e.conicGradient,b)}function s(tn,Yt,fn){return l(Yt,function(Hn){var cr=fn();return cr&&(Mt(e.comma)||n("Missing comma before color stops")),{type:tn,orientation:cr,colorStops:W(K)}})}function l(tn,Yt){var fn=Mt(tn);if(fn){Mt(e.startCall)||n("Missing (");var Hn=Yt(fn);return Mt(e.endCall)||n("Missing )"),Hn}}function p(){return m()||y()}function m(){return St("directional",e.sideOrCorner,1)}function y(){return St("angular",e.angleValue,1)}function b(){var tn,Yt=E(),fn;return Yt&&(tn=[],tn.push(Yt),fn=t,Mt(e.comma)&&(Yt=E(),Yt?tn.push(Yt):t=fn)),tn}function E(){var tn=O()||P();if(tn)tn.at=N();else{var Yt=I();if(Yt){tn=Yt;var fn=N();fn&&(tn.at=fn)}else{var Hn=z();Hn&&(tn={type:"default-radial",at:Hn})}}return tn}function O(){var tn=St("shape",/^(circle)/i,0);return tn&&(tn.style=ft()||I()),tn}function P(){var tn=St("shape",/^(ellipse)/i,0);return tn&&(tn.style=ct()||I()),tn}function I(){return St("extent-keyword",e.extentKeywords,1)}function N(){if(St("position",/^at/,0)){var tn=z();return tn||n("Missing positioning value"),tn}}function z(){var tn=V();if(tn.x||tn.y)return{type:"position",value:tn}}function V(){return{x:ct(),y:ct()}}function W(tn){var Yt=tn(),fn=[];if(Yt)for(fn.push(Yt);Mt(e.comma);)Yt=tn(),Yt?fn.push(Yt):n("One extra comma");return fn}function K(){var tn=J();return tn||n("Expected color definition"),tn.length=ct(),tn}function J(){return Te()||We()||Re()||oe()}function oe(){return St("literal",e.literalColor,0)}function Te(){return St("hex",e.hexColor,1)}function Re(){return l(e.rgbColor,function(){return{type:"rgb",value:W(ut)}})}function We(){return l(e.rgbaColor,function(){return{type:"rgba",value:W(ut)}})}function ut(){return Mt(e.number)[1]}function ct(){return St("%",e.percentageValue,1)||Ft()||ft()}function Ft(){return St("position-keyword",e.positionKeywords,1)}function ft(){return St("px",e.pixelValue,1)||St("em",e.emValue,1)}function St(tn,Yt,fn){var Hn=Mt(Yt);if(Hn)return{type:tn,value:Hn[fn]}}function Mt(tn){var Yt=/^[\n\r\t\s]+/.exec(t);Yt&&Nt(Yt[0].length);var fn=tn.exec(t);return fn&&Nt(fn[0].length),fn}function Nt(tn){t=t.substring(tn)}return function(tn){return t=tn,r()}}();function JE(e,t,n){var r=Ou(n.value),i=0,a=0,s=i+e/2,l=a+t/2,p=Math.abs(e*Math.cos(r))+Math.abs(t*Math.sin(r)),m=s-Math.cos(r)*p/2,y=l-Math.sin(r)*p/2,b=s+Math.cos(r)*p/2,E=l+Math.sin(r)*p/2;return{x1:m,y1:y,x2:b,y2:E}}function hC(e,t,n,r,i){var a=n.value,s=r.value;n.unit===Oa.kPercentage&&(a=n.value/100*e),r.unit===Oa.kPercentage&&(s=r.value/100*t);var l=Math.max(zs([0,0],[a,s]),zs([0,t],[a,s]),zs([e,t],[a,s]),zs([e,0],[a,s]));return i&&(i instanceof Ru?l=i.value:i instanceof yd&&(i.value==="closest-side"?l=Math.min(a,e-a,s,t-s):i.value==="farthest-side"?l=Math.max(a,e-a,s,t-s):i.value==="closest-corner"&&(l=Math.min(zs([0,0],[a,s]),zs([0,t],[a,s]),zs([e,t],[a,s]),zs([e,0],[a,s]))))),{x:a,y:s,r:l}}var dC=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,eS=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tS=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Vg=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function nS(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var a=0,s=Number(e[0].length.value),l=1;l<i;l++){var p=(r=e[l].length)===null||r===void 0?void 0:r.value;if(!(0,wa.Z)(p)&&!(0,wa.Z)(s)){for(var m=1;m<l-a;m++)e[a+m].length={type:"%",value:"".concat(s+(Number(p)-s)*m/(l-a))};a=l,s=Number(p)}}}var rS={left:270-90,top:0-90,bottom:180-90,right:90-90,"left top":315-90,"top left":315-90,"left bottom":225-90,"bottom left":225-90,"right top":45-90,"top right":45-90,"right bottom":135-90,"bottom right":135-90},pC=nf(function(e){var t;return e.type==="angular"?t=Number(e.value):t=rS[e.value]||0,qu(t,"deg")}),vx=nf(function(e){var t=50,n=50,r="%",i="%";if((e==null?void 0:e.type)==="position"){var a=e.value,s=a.x,l=a.y;(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?t=0:s.value==="center"?t=50:s.value==="right"?t=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?t=0:l.value==="center"?n=50:l.value==="right"?t=100:l.value==="top"?n=0:l.value==="bottom"&&(n=100)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(r=s==null?void 0:s.type,t=Number(s.value)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(i=l==null?void 0:l.type,n=Number(l.value))}return{cx:qu(t,r),cy:qu(n,i)}}),vC=nf(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=fC(e);return n.map(function(l){var p=l.type,m=l.orientation,y=l.colorStops;nS(y);var b=y.map(function(W){return{offset:qu(Number(W.length.value),"%"),color:cC(W)}});if(p==="linear-gradient")return new Xy(Iv.LinearGradient,{angle:m?pC(m):av,steps:b});if(p==="radial-gradient"&&(m||(m=[{type:"shape",value:"circle"}]),m[0].type==="shape"&&m[0].value==="circle")){var E=vx(m[0].at),O=E.cx,P=E.cy,I=void 0;if(m[0].style){var N=m[0].style,z=N.type,V=N.value;z==="extent-keyword"?I=T1(V):I=qu(V,z)}return new Xy(Iv.RadialGradient,{cx:O,cy:P,size:I,steps:b})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=dC.exec(e);if(i){var a=((t=i[2].match(Vg))===null||t===void 0?void 0:t.map(function(l){return l.split(":")}))||[];return[new Xy(Iv.LinearGradient,{angle:qu(parseFloat(i[1]),"deg"),steps:a.map(function(l){var p=(0,ce.CR)(l,2),m=p[0],y=p[1];return{offset:qu(Number(m)*100,"%"),color:y}})})]}}else if(r==="r"){var s=mC(e);if(s)if(Bu(s))e=s;else return[new Xy(Iv.RadialGradient,s)]}else if(r==="p")return gC(e)}});function mC(e){var t,n=eS.exec(e);if(n){var r=((t=n[4].match(Vg))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:qu(50,"%"),cy:qu(50,"%"),steps:r.map(function(i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1];return{offset:qu(Number(s)*100,"%"),color:l}})}}return null}function gC(e){var t=tS.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function y5(e){return!!e.type&&!!e.value}function qy(e){return e&&!!e.image}function A1(e){return e&&!(0,wa.Z)(e.r)&&!(0,wa.Z)(e.g)&&!(0,wa.Z)(e.b)}var m0=nf(function(e){if(qy(e))return(0,ce.pi)({repetition:"repeat"},e);if((0,wa.Z)(e)&&(e=""),e==="transparent")return dx;e==="currentColor"&&(e="black");var t=vC(e);if(t)return t;var n=tf.ZP(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),KE.apply(void 0,(0,ce.ev)([],(0,ce.CR)(r),!1))});function yC(e,t){if(!(!A1(e)||!A1(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,al.Z)(r[i],0,255));return r[3]=(0,al.Z)(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function Ky(e,t){if((0,wa.Z)(t))return qu(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return qu(Number(t),"px");if("deg".search(e)>=0)return qu(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return qu(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var iS=function(e){return Ky(new RegExp("px","g"),e)},_C=nf(iS),bC=function(e){return Ky(new RegExp("%","g"),e)};nf(bC);var Qy=function(e){return(0,Yl.Z)(e)||isFinite(Number(e))?qu(Number(e)||0,"px"):Ky(new RegExp("px|%|em|rem","g"),e)},Hg=nf(Qy),mx=function(e){return Ky(new RegExp("deg|rad|grad|turn","g"),e)},aS=nf(mx);function xC(e,t,n,r,i){i===void 0&&(i=0);var a="",s=e.value||0,l=t.value||0,p=w1(e.unit),m=e.convertTo(p),y=t.convertTo(p);return m&&y?(s=m.value,l=y.value,a=ux(e.unit)):(Ru.isLength(e.unit)||Ru.isLength(t.unit))&&(s=Xd(e,i,n),l=Xd(t,i,n),a="px"),[s,l,function(b){return r&&(b=Math.max(b,0)),b+a}]}function Gd(e){var t=0;return e.unit===Oa.kDegrees?t=e.value:e.unit===Oa.kRadians?t=Tf(Number(e.value)):e.unit===Oa.kTurns&&(t=g1(Number(e.value))),t}function gx(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):Bu(e)?n=e.split(" ").map(function(r){return Number(r)}):(0,Yl.Z)(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function oS(e){return Bu(e)?e.split(" ").map(function(t){return Hg(t)}):e.map(function(t){return Hg(t.toString())})}function Xd(e,t,n){if(e.value===0)return 0;if(e.unit===Oa.kPixels)return Number(e.value);if(e.unit===Oa.kPercentage&&n){var r=n.nodeName===oi.GROUP?n.getLocalBounds():n.geometry.contentBounds;return e.value/100*r.halfExtents[t]*2}return 0}var EC=function(e){return Ky(/deg|rad|grad|turn|px|%/g,e)},SC=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function sS(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,SC.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(a){return EC(a)||m0(a)})}),t.lastIndex===e.length)return n}return[]}function uS(e){return e.toString()}var Wg=function(e){return typeof e=="number"?qu(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?qu(Number(e)):qu(0)},Vm=nf(Wg);nf(function(e){return Bu(e)?e.split(" ").map(Vm):e.map(Vm)});function yx(e,t){return[e,t,uS]}function _x(e,t){return function(n,r){return[n,r,function(i){return uS((0,al.Z)(i,e,t))}]}}function lS(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function bx(e){return e.parsedStyle.path.totalLength===0&&(e.parsedStyle.path.totalLength=Jr(e.parsedStyle.path.absolutePath)),e.parsedStyle.path.totalLength}function wC(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var a=n[0],s=[r[1],r[2]],l=void 0;a==="L"||a==="M"?l=[n[1],n[2]]:(a==="C"||a==="A"||a==="Q")&&(l=[n[n.length-2],n[n.length-1]]),l&&C1(s,l)&&(e.splice(t,1),t--)}}}function TC(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){t=!0;break}}return t}function AC(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var a=e[i],s=a[0];s==="M"?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):s==="Z"?r.length&&(t.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function C1(e,t){return e[0]===t[0]&&e[1]===t[1]}function xx(e,t){for(var n=[],r=[],i=[],a=0;a<e.length;a++){var s=e[a],l=s.currentPoint,p=s.params,m=s.prePoint,y=void 0;switch(s.command){case"Q":y=Dg(m[0],m[1],p[1],p[2],p[3],p[4]);break;case"C":y=Z0(m[0],m[1],p[1],p[2],p[3],p[4],p[5],p[6]);break;case"A":var b=s.arcParams;y=Tv(b.cx,b.cy,b.rx,b.ry,b.xRotation,b.startAngle,b.endAngle);break;default:n.push(l[0]),r.push(l[1]);break}y&&(s.box=y,n.push(y.x,y.x+y.width),r.push(y.y,y.y+y.height)),t&&(s.command==="L"||s.command==="M")&&s.prePoint&&s.nextPoint&&i.push(s)}n=n.filter(function(z){return!Number.isNaN(z)&&z!==1/0&&z!==-1/0}),r=r.filter(function(z){return!Number.isNaN(z)&&z!==1/0&&z!==-1/0});var E=Ki(n),O=Ki(r),P=ca(n),I=ca(r);if(i.length===0)return{x:E,y:O,width:P-E,height:I-O};for(var a=0;a<i.length;a++){var s=i[a],l=s.currentPoint,N=void 0;l[0]===E?(N=O1(s,t),E=E-N.xExtra):l[0]===P&&(N=O1(s,t),P=P+N.xExtra),l[1]===O?(N=O1(s,t),O=O-N.yExtra):l[1]===I&&(N=O1(s,t),I=I+N.yExtra)}return{x:E,y:O,width:P-E,height:I-O}}function O1(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),l=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),p=Math.acos((a+s-l)/(2*Math.sqrt(a)*Math.sqrt(s)));if(!p||Math.sin(p)===0||Sa(p,0))return{xExtra:0,yExtra:0};var m=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),y=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));m=m>Math.PI/2?Math.PI-m:m,y=y>Math.PI/2?Math.PI-y:y;var b={xExtra:Math.cos(p/2-m)*(t/2*(1/Math.sin(p/2)))-t/2||0,yExtra:Math.cos(y-p/2)*(t/2*(1/Math.sin(p/2)))-t/2||0};return b}function cS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var fS=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,a=i*Math.acos(n/r);return a},hS=function(e,t,n,r,i,a,s,l){t=Math.abs(t),n=Math.abs(n),r=Ca(r,360);var p=Ou(r);if(e.x===s.x&&e.y===s.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var m=(e.x-s.x)/2,y=(e.y-s.y)/2,b={x:Math.cos(p)*m+Math.sin(p)*y,y:-Math.sin(p)*m+Math.cos(p)*y},E=Math.pow(b.x,2)/Math.pow(t,2)+Math.pow(b.y,2)/Math.pow(n,2);E>1&&(t=Math.sqrt(E)*t,n=Math.sqrt(E)*n);var O=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(b.y,2)-Math.pow(n,2)*Math.pow(b.x,2),P=Math.pow(t,2)*Math.pow(b.y,2)+Math.pow(n,2)*Math.pow(b.x,2),I=O/P;I=I<0?0:I;var N=(i!==a?1:-1)*Math.sqrt(I),z={x:N*(t*b.y/n),y:N*(-(n*b.x)/t)},V={x:Math.cos(p)*z.x-Math.sin(p)*z.y+(e.x+s.x)/2,y:Math.sin(p)*z.x+Math.cos(p)*z.y+(e.y+s.y)/2},W={x:(b.x-z.x)/t,y:(b.y-z.y)/n},K=fS({x:1,y:0},W),J={x:(-b.x-z.x)/t,y:(-b.y-z.y)/n},oe=fS(W,J);!a&&oe>0?oe-=2*Math.PI:a&&oe<0&&(oe+=2*Math.PI),oe%=2*Math.PI;var Te=K+oe*l,Re=t*Math.cos(Te),We=n*Math.sin(Te),ut={x:Math.cos(p)*Re-Math.sin(p)*We+V.x,y:Math.sin(p)*Re+Math.cos(p)*We+V.y,ellipticalArcStartAngle:K,ellipticalArcEndAngle:K+oe,ellipticalArcAngle:Te,ellipticalArcCenter:V,resultantRx:t,resultantRy:n};return ut};function CC(e){for(var t=[],n=null,r=null,i=null,a=0,s=e.length,l=0;l<s;l++){var p=e[l];r=e[l+1];var m=p[0],y={command:m,prePoint:n,params:p,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(m){case"M":i=[p[1],p[2]],a=l;break;case"A":var b=OC(n,p);y.arcParams=b;break}if(m==="Z")n=i,r=e[a+1];else{var E=p.length;n=[p[E-2],p[E-1]]}r&&r[0]==="Z"&&(r=e[a],t[a]&&(t[a].prePoint=n)),y.currentPoint=n,t[a]&&C1(n,t[a].currentPoint)&&(t[a].prePoint=y.prePoint);var O=r?[r[r.length-2],r[r.length-1]]:null;y.nextPoint=O;var P=y.prePoint;if(["L","H","V"].includes(m))y.startTangent=[P[0]-n[0],P[1]-n[1]],y.endTangent=[n[0]-P[0],n[1]-P[1]];else if(m==="Q"){var I=[p[1],p[2]];y.startTangent=[P[0]-I[0],P[1]-I[1]],y.endTangent=[n[0]-I[0],n[1]-I[1]]}else if(m==="T"){var N=t[l-1],I=cS(N.currentPoint,P);N.command==="Q"?(y.command="Q",y.startTangent=[P[0]-I[0],P[1]-I[1]],y.endTangent=[n[0]-I[0],n[1]-I[1]]):(y.command="TL",y.startTangent=[P[0]-n[0],P[1]-n[1]],y.endTangent=[n[0]-P[0],n[1]-P[1]])}else if(m==="C"){var z=[p[1],p[2]],V=[p[3],p[4]];y.startTangent=[P[0]-z[0],P[1]-z[1]],y.endTangent=[n[0]-V[0],n[1]-V[1]],y.startTangent[0]===0&&y.startTangent[1]===0&&(y.startTangent=[z[0]-V[0],z[1]-V[1]]),y.endTangent[0]===0&&y.endTangent[1]===0&&(y.endTangent=[V[0]-z[0],V[1]-z[1]])}else if(m==="S"){var N=t[l-1],z=cS(N.currentPoint,P),V=[p[1],p[2]];N.command==="C"?(y.command="C",y.startTangent=[P[0]-z[0],P[1]-z[1]],y.endTangent=[n[0]-V[0],n[1]-V[1]]):(y.command="SQ",y.startTangent=[P[0]-V[0],P[1]-V[1]],y.endTangent=[n[0]-V[0],n[1]-V[1]])}else if(m==="A"){var W=$g(y,0),K=W.x,J=W.y,oe=$g(y,1,!1),Te=oe.x,Re=oe.y;y.startTangent=[K,J],y.endTangent=[Te,Re]}t.push(y)}return t}function $g(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,a=i===void 0?0:i,s=r.ry,l=s===void 0?0:s,p=r.xRotation,m=r.arcFlag,y=r.sweepFlag,b=hS({x:e.prePoint[0],y:e.prePoint[1]},a,l,p,!!m,!!y,{x:e.currentPoint[0],y:e.currentPoint[1]},t),E=hS({x:e.prePoint[0],y:e.prePoint[1]},a,l,p,!!m,!!y,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),O=E.x-b.x,P=E.y-b.y,I=Math.sqrt(O*O+P*P);return{x:-O/I,y:-P/I}}function X0(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ex(e,t){return X0(e)*X0(t)?(e[0]*t[0]+e[1]*t[1])/(X0(e)*X0(t)):1}function dS(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ex(e,t))}function OC(e,t){var n=t[1],r=t[2],i=Ca(Ou(t[3]),Math.PI*2),a=t[4],s=t[5],l=e[0],p=e[1],m=t[6],y=t[7],b=Math.cos(i)*(l-m)/2+Math.sin(i)*(p-y)/2,E=-1*Math.sin(i)*(l-m)/2+Math.cos(i)*(p-y)/2,O=b*b/(n*n)+E*E/(r*r);O>1&&(n*=Math.sqrt(O),r*=Math.sqrt(O));var P=n*n*(E*E)+r*r*(b*b),I=P?Math.sqrt((n*n*(r*r)-P)/P):1;a===s&&(I*=-1),isNaN(I)&&(I=0);var N=r?I*n*E/r:0,z=n?I*-r*b/n:0,V=(l+m)/2+Math.cos(i)*N-Math.sin(i)*z,W=(p+y)/2+Math.sin(i)*N+Math.cos(i)*z,K=[(b-N)/n,(E-z)/r],J=[(-1*b-N)/n,(-1*E-z)/r],oe=dS([1,0],K),Te=dS(K,J);return Ex(K,J)<=-1&&(Te=Math.PI),Ex(K,J)>=1&&(Te=0),s===0&&Te>0&&(Te=Te-2*Math.PI),s===1&&Te<0&&(Te=Te+2*Math.PI),{cx:V,cy:W,rx:C1(e,[m,y])?0:n,ry:C1(e,[m,y])?0:r,startAngle:oe,endAngle:oe+Te,xRotation:i,arcFlag:a,sweepFlag:s}}function MC(e,t,n){var r=t.parsedStyle,i=r.defX,a=i===void 0?0:i,s=r.defY,l=s===void 0?0:s;return e.reduce(function(p,m){var y="";if(m[0]==="M"||m[0]==="L"){var b=nr.fromValues(m[1]-a,m[2]-l,0);n&&nr.transformMat4(b,b,n),y="".concat(m[0]).concat(b[0],",").concat(b[1])}else if(m[0]==="Z")y=m[0];else if(m[0]==="C"){var E=nr.fromValues(m[1]-a,m[2]-l,0),O=nr.fromValues(m[3]-a,m[4]-l,0),P=nr.fromValues(m[5]-a,m[6]-l,0);n&&(nr.transformMat4(E,E,n),nr.transformMat4(O,O,n),nr.transformMat4(P,P,n)),y="".concat(m[0]).concat(E[0],",").concat(E[1],",").concat(O[0],",").concat(O[1],",").concat(P[0],",").concat(P[1])}else if(m[0]==="A"){var I=nr.fromValues(m[6]-a,m[7]-l,0);n&&nr.transformMat4(I,I,n),y="".concat(m[0]).concat(m[1],",").concat(m[2],",").concat(m[3],",").concat(m[4],",").concat(m[5],",").concat(I[0],",").concat(I[1])}else if(m[0]==="Q"){var E=nr.fromValues(m[1]-a,m[2]-l,0),O=nr.fromValues(m[3]-a,m[4]-l,0);n&&(nr.transformMat4(E,E,n),nr.transformMat4(O,O,n)),y="".concat(m[0]).concat(m[1],",").concat(m[2],",").concat(m[3],",").concat(m[4],"}")}return p+=y},"")}function RC(e,t,n,r){return[["M",e,t],["L",n,r]]}function Sx(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,a=e*i,s=t*i,l=n-e,p=n+e,m=r-t,y=r+t;return[["M",l,r],["C",l,r-s,n-a,m,n,m],["C",n+a,m,p,r-s,p,r],["C",p,r+s,n+a,y,n,y],["C",n-a,y,l,r+s,l,r],["Z"]]}function PC(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function IC(e,t,n,r,i){if(i){var a=(0,ce.CR)(i,4),s=a[0],l=a[1],p=a[2],m=a[3],y=e>0?1:-1,b=t>0?1:-1,E=y+b!==0?1:0;return[["M",y*s+n,r],["L",e-y*l+n,r],l?["A",l,l,0,0,E,e+n,b*l+r]:null,["L",e+n,t-b*p+r],p?["A",p,p,0,0,E,e+n-y*p,t+r]:null,["L",n+y*m,t+r],m?["A",m,m,0,0,E,n,t+r-b*m]:null,["L",n,b*s+r],s?["A",s,s,0,0,E,y*s+n,r]:null,["Z"]].filter(function(O){return O})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function Tx(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case oi.LINE:var r=e.parsedStyle,i=r.x1,a=i===void 0?0:i,s=r.y1,l=s===void 0?0:s,p=r.x2,m=p===void 0?0:p,y=r.y2,b=y===void 0?0:y;n=RC(a,l,m,b);break;case oi.CIRCLE:{var E=e.parsedStyle,O=E.r,P=O===void 0?0:O,I=E.cx,N=I===void 0?0:I,z=E.cy,V=z===void 0?0:z;n=Sx(P,P,N,V);break}case oi.ELLIPSE:{var W=e.parsedStyle,K=W.rx,J=K===void 0?0:K,oe=W.ry,Te=oe===void 0?0:oe,Re=W.cx,N=Re===void 0?0:Re,We=W.cy,V=We===void 0?0:We;n=Sx(J,Te,N,V);break}case oi.POLYLINE:case oi.POLYGON:var ut=e.parsedStyle.points;n=PC(ut.points,e.nodeName===oi.POLYGON);break;case oi.RECT:var ct=e.parsedStyle,Ft=ct.width,ft=Ft===void 0?0:Ft,St=ct.height,Mt=St===void 0?0:St,Nt=ct.x,tn=Nt===void 0?0:Nt,Yt=ct.y,fn=Yt===void 0?0:Yt,Hn=ct.radius,cr=Hn&&Hn.some(function(Mr){return Mr!==0});n=IC(ft,Mt,tn,fn,cr&&Hn.map(function(Mr){return(0,al.Z)(Mr,0,Math.min(Math.abs(ft)/2,Math.abs(Mt)/2))}));break;case oi.PATH:var _r=e.parsedStyle.path.absolutePath;n=(0,ce.ev)([],(0,ce.CR)(_r),!1);break}if(n.length)return MC(n,e,t)}function _5(e,t,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0);var l=e.map(function(p,m){var y=p[0],b=e[m+1],E=m===0&&(r!==0||i!==0),O=(m===e.length-1||b&&(b[0]==="M"||b[0]==="Z"))&&a!==0&&s!==0;switch(y){case"M":return E?"M ".concat(p[1]-t+r,",").concat(p[2]-n+i," L ").concat(p[1]-t,",").concat(p[2]-n):"M ".concat(p[1]-t,",").concat(p[2]-n);case"L":return"L ".concat(p[1]-t+(O?a:0),",").concat(p[2]-n+(O?s:0));case"Q":return"Q ".concat(p[1]-t," ").concat(p[2]-n,",").concat(p[3]-t," ").concat(p[4]-n)+(O?" L ".concat(p[3]-t+a,",").concat(p[4]-n+s):"");case"C":return"C ".concat(p[1]-t," ").concat(p[2]-n,",").concat(p[3]-t," ").concat(p[4]-n,",").concat(p[5]-t," ").concat(p[6]-n)+(O?" L ".concat(p[5]-t+a,",").concat(p[6]-n+s):"");case"A":return"A ".concat(p[1]," ").concat(p[2]," ").concat(p[3]," ").concat(p[4]," ").concat(p[5]," ").concat(p[6]-t," ").concat(p[7]-n)+(O?" L ".concat(p[6]-t+a,",").concat(p[7]-n+s):"");case"Z":return"Z"}}).join(" ");return~l.indexOf("NaN")?"":l}var pS=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=ot(e)}catch(E){t=ot(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}wC(t);var n=TC(t),r=AC(t),i=r.polygons,a=r.polylines,s=CC(t),l=xx(s,0),p=l.x,m=l.y,y=l.width,b=l.height;return{absolutePath:t,hasArc:n,segments:s,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(p)?p:0,y:Number.isFinite(m)?m:0,width:Number.isFinite(y)?y:0,height:Number.isFinite(b)?b:0}}},kC=nf(pS);function Ax(e){return Bu(e)?kC(e):pS(e)}function LC(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=ws(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=ws(t.absolutePath,!1),t.curve=i);var a=[r,i];r.length!==i.length&&(a=Fu(r,i));var s=sl(a[0])!==sl(a[1])?lc(a[0]):jc(a[0]);return[s,gs(a[1],s),function(l){return l}]}function vS(e,t){var n;Bu(e)?n=e.split(" ").map(function(y){var b=(0,ce.CR)(y.split(","),2),E=b[0],O=b[1];return[Number(E),Number(O)]}):n=e;var r=[],i=0,a,s,l=v1(n);n.forEach(function(y,b){n[b+1]&&(a=[0,0],a[0]=i/l,s=Mh(y[0],y[1],n[b+1][0],n[b+1][1]),i+=s,a[1]=i/l,r.push(a))});var p=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(n.map(function(y){return y[0]})),!1)),m=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(n.map(function(y){return y[1]})),!1));return t&&(t.parsedStyle.defX=p,t.parsedStyle.defY=m),{points:n,totalLength:l,segments:r}}function DC(e,t){return[e.points,t.points,function(n){return n}]}var hc=null;function _d(e){return function(t){var n=0;return e.map(function(r){return r===hc?t[n++]:r})}}function Hm(e){return e}var M1={matrix:["NNNNNN",[hc,hc,0,0,hc,hc,0,0,0,0,1,0,hc,hc,0,1],Hm],matrix3d:["NNNNNNNNNNNNNNNN",Hm],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",_d([hc,hc,new Ru(1)]),Hm],scalex:["N",_d([hc,new Ru(1),new Ru(1)]),_d([hc,new Ru(1)])],scaley:["N",_d([new Ru(1),hc,new Ru(1)]),_d([new Ru(1),hc])],scalez:["N",_d([new Ru(1),new Ru(1),hc])],scale3d:["NNN",Hm],skew:["Aa",null,Hm],skewx:["A",null,_d([hc,av])],skewy:["A",null,_d([av,hc])],translate:["Tt",_d([hc,hc,fc]),Hm],translatex:["T",_d([hc,fc,fc]),_d([hc,fc])],translatey:["T",_d([fc,hc,fc]),_d([fc,hc])],translatez:["L",_d([fc,fc,hc])],translate3d:["TTL",Hm]};function Cx(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var a=r[1],s=M1[a];if(!s)return[];var l=r[2].split(","),p=s[0];if(p.length<l.length)return[];for(var m=[],y=0;y<p.length;y++){var b=l[y],E=p[y],O=void 0;if(b?O={A:function(P){return P.trim()==="0"?av:aS(P)},N:Vm,T:Hg,L:_C}[E.toUpperCase()](b):O={a:av,n:m[0],t:fc}[E],O===void 0)return[];m.push(O)}if(n.push({t:a,d:m}),t.lastIndex===e.length)return n}return[]}function mS(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var a=r[1],s=M1[a];if(!s)return[];var l=r[2].split(","),p=s[0];if(p.length<l.length)return[];for(var m=[],y=0;y<p.length;y++){var b=l[y],E=p[y],O=void 0;if(b?O={A:function(P){return P.trim()==="0"?av:mx(P)},N:Wg,T:Qy,L:iS}[E.toUpperCase()](b):O={a:av,n:m[0],t:fc}[E],O===void 0)return[];m.push(O)}if(n.push({t:a,d:m}),t.lastIndex===e.length)return n}return[]}function NC(e){var t,n,r,i;switch(e.t){case"rotatex":return i=Ou(Gd(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Ou(Gd(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Ou(Gd(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=Ou(Gd(e.d[3]));var a=t*t+n*n+r*r;if(a===0)t=1,n=0,r=0;else if(a!==1){var s=Math.sqrt(a);t/=s,n/=s,r/=s}var l=Math.sin(i/2),p=l*Math.cos(i/2),m=l*l;return[1-2*(n*n+r*r)*m,2*(t*n*m+r*p),2*(t*r*m-n*p),0,2*(t*n*m-r*p),1-2*(t*t+r*r)*m,2*(n*r*m+t*p),0,2*(t*r*m+n*p),2*(n*r*m-t*p),1-2*(t*t+n*n)*m,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var y=Ou(Gd(e.d[0])),b=Ou(Gd(e.d[1]));return[1,Math.tan(b),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Ou(Gd(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Ou(Gd(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Xd(e.d[0],0,null)||0,n=Xd(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=Xd(e.d[0],0,null)||0,n=Xd(e.d[1],0,null)||0,r=Xd(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var E=Xd(e.d[0],0,null)||0,O=E?-1/E:0;return[1,0,0,0,0,1,0,0,0,0,1,O,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(P){return P.value})}}function BC(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function FC(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(NC).reduce(BC)}function gS(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return _1(FC(e),t,n,r,i,a),[[t,n,r,a,i]]}var zC=function(){function e(r,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<4;s++)for(var l=0;l<4;l++)for(var p=0;p<4;p++)a[s][l]+=i[s][p]*r[p][l];return a}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,a,s,l){for(var p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],m=0;m<4;m++)p[m][3]=l[m];for(var m=0;m<3;m++)for(var y=0;y<3;y++)p[3][m]+=r[y]*p[y][m];var b=s[0],E=s[1],O=s[2],P=s[3],I=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];I[0][0]=1-2*(E*E+O*O),I[0][1]=2*(b*E-O*P),I[0][2]=2*(b*O+E*P),I[1][0]=2*(b*E+O*P),I[1][1]=1-2*(b*b+O*O),I[1][2]=2*(E*O-b*P),I[2][0]=2*(b*O-E*P),I[2][1]=2*(E*O+b*P),I[2][2]=1-2*(b*b+E*E),p=e(p,I);var N=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(N[2][1]=a[2],p=e(p,N)),a[1]&&(N[2][1]=0,N[2][0]=a[0],p=e(p,N)),a[0]&&(N[2][0]=0,N[1][0]=a[0],p=e(p,N));for(var m=0;m<3;m++)for(var y=0;y<3;y++)p[m][y]*=i[m];return t(p)?[p[0][0],p[0][1],p[1][0],p[1][1],p[3][0],p[3][1]]:p[0].concat(p[1],p[2],p[3])}return n}();function UC(e){return e.toFixed(6).replace(".000000","")}function Ox(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=gS(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=gS(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var a=ZC(n[0][3],r[0][3],i[5]),s=zC(i[0],i[1],i[2],a,i[4]),l=s.map(UC).join(",");return l}])}function jC(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function ZC(e,t,n){var r=jC(e,t);r=(0,al.Z)(r,-1,1);var i=[];if(r===1)i=e;else for(var a=Math.acos(r),s=Math.sin(n*a)*1/Math.sqrt(1-r*r),l=0;l<4;l++)i.push(e[l]*(Math.cos(n*a)-r*s)+t[l]*s);return i}function Mx(e){return e.replace(/[xy]/,"")}function R1(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var VC=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function HC(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(oe){var Te=e[oe],Re=Te.t,We=Te.d,ut=Re.substring(0,5)==="scale"?1:0;t.push({t:Re,d:We.map(function(ct){return typeof ct=="number"?qu(ut):qu(ut,ct.unit)})})},a=0;a<e.length;a++)i(a)}var s=[],l=[],p=[];if(e.length!==t.length){var m=Ox(e,t);s=[m[0]],l=[m[1]],p=[["matrix",[m[2]]]]}else for(var a=0;a<e.length;a++){var y=e[a].t,b=t[a].t,E=e[a].d,O=t[a].d,P=M1[y],I=M1[b],N=void 0;if(VC(y,b)){var m=Ox([e[a]],[t[a]]);s.push(m[0]),l.push(m[1]),p.push(["matrix",[m[2]]]);continue}else if(y===b)N=y;else if(P[2]&&I[2]&&Mx(y)===Mx(b))N=Mx(y),E=P[2](E),O=I[2](O);else if(P[1]&&I[1]&&R1(y)===R1(b))N=R1(y),E=P[1](E),O=I[1](O);else{var m=Ox(e,t);s=[m[0]],l=[m[1]],p=[["matrix",[m[2]]]];break}for(var z=[],V=[],W=[],K=0;K<E.length;K++){var m=xC(E[K],O[K],n,!1,K);z[K]=m[0],V[K]=m[1],W.push(m[2])}s.push(z),l.push(V),p.push([N,W])}if(r){var J=s;s=l,l=J}return[s,l,function(oe){return oe.map(function(Te,Re){var We=Te.map(function(ut,ct){return p[Re][1][ct](ut)}).join(",");return p[Re][0]==="matrix"&&We.split(",").length===16&&(p[Re][0]="matrix3d"),p[Re][0]==="matrix3d"&&We.split(",").length===6&&(p[Re][0]="matrix"),p[Re][0]+"("+We+")"}).join(" ")}]}var P1=nf(function(e){if(Bu(e)){if(e==="text-anchor")return[qu(0,"px"),qu(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[Hg(I1(t[0])),Hg(I1(t[1]))]}else return[qu(e[0]||0,"px"),qu(e[1]||0,"px")]}),WC=function(e){if(Bu(e)){if(e==="text-anchor")return[qu(0,"px"),qu(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[Qy(I1(t[0])),Qy(I1(t[1]))]}else return[qu(e[0]||0,"px"),qu(e[1]||0,"px")]};function I1(e){return e==="center"?"50%":e==="left"||e==="top"?"0":e==="right"||e==="bottom"?"100%":e}var Rx=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Wa.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Wa.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Wa.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Wa.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Wa.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Wa.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Wa.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Wa.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Wa.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Wa.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Wa.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Wa.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Wa.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Wa.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Wa.FILTER},{n:"clipPath",syntax:Wa.DEFINED_PATH},{n:"textPath",syntax:Wa.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Wa.TRANSFORM},{n:"transformOrigin",p:100,d:function(e){return e===oi.CIRCLE||e===oi.ELLIPSE?"center":e===oi.TEXT?"text-anchor":"left top"},l:!0,syntax:Wa.TRANSFORM_ORIGIN},{n:"anchor",p:99,d:function(e){return e===oi.CIRCLE||e===oi.ELLIPSE?"0.5 0.5":"0 0"},l:!0,syntax:Wa.LENGTH_PERCENTAGE_12},{n:"cx",int:!0,d:"0",syntax:Wa.COORDINATE},{n:"cy",int:!0,d:"0",syntax:Wa.COORDINATE},{n:"cz",int:!0,d:"0",syntax:Wa.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"x",int:!0,d:"0",syntax:Wa.COORDINATE},{n:"y",int:!0,d:"0",syntax:Wa.COORDINATE},{n:"z",int:!0,d:"0",syntax:Wa.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Wa.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Wa.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Wa.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Wa.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Wa.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Wa.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Wa.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Wa.COORDINATE},{n:"path",int:!0,l:!0,d:"",a:["d"],syntax:Wa.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Wa.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Wa.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Wa.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Wa.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Wa.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Wa.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Wa.NUMBER,d:function(e){return e===oi.PATH||e===oi.POLYGON||e===oi.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Wa.MARKER},{n:"markerEnd",syntax:Wa.MARKER},{n:"markerMid",syntax:Wa.MARKER},{n:"markerStartOffset",syntax:Wa.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Wa.LENGTH,l:!0,int:!0,d:"0"}],yS=Rx.filter(function(e){return!!e.l}).map(function(e){return e.n}),bd={},Gg=new WeakMap,$C=function(e,t){var n=Gg.get(e);return!n||n.length===0?!0:n.includes(t)},GC=function(){function e(t){var n=this;this.runtime=t,Rx.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){(0,ce.ev)([t.n],(0,ce.CR)(t.a||[]),!1).forEach(function(n){bd[n]=t})},e.prototype.unregisterMetadata=function(t){delete bd[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),!this.runtime.enableCSSParsing){Object.assign(t.attributes,n);var a=Object.keys(n),s=t.parsedStyle.clipPath,l=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var p=!!r.forceUpdateGeometry;if(!p){for(var m=0;m<yS.length;m++)if(yS[m]in n){p=!0;break}}n.fill&&(t.parsedStyle.fill=m0(n.fill)),n.stroke&&(t.parsedStyle.stroke=m0(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=m0(n.shadowColor)),n.filter&&(t.parsedStyle.filter=sS(n.filter)),(0,wa.Z)(n.radius)||(t.parsedStyle.radius=gx(n.radius,4)),(0,wa.Z)(n.lineDash)||(t.parsedStyle.lineDash=gx(n.lineDash,2)),n.points&&(t.parsedStyle.points=vS(n.points,t)),n.path===""&&(t.parsedStyle.path=(0,ce.pi)({},QE)),n.path&&(t.parsedStyle.path=Ax(n.path),t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),n.clipPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",s,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",l,n.offsetPath,t,this.runtime),n.anchor&&(t.parsedStyle.anchor=gx(n.anchor,2)),n.transform&&(t.parsedStyle.transform=Cx(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=P1(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),((t.nodeName===oi.CIRCLE||t.nodeName===oi.ELLIPSE)&&(!(0,wa.Z)(n.cx)||!(0,wa.Z)(n.cy))||(t.nodeName===oi.RECT||t.nodeName===oi.IMAGE||t.nodeName===oi.GROUP||t.nodeName===oi.HTML||t.nodeName===oi.TEXT||t.nodeName===oi.MESH)&&(!(0,wa.Z)(n.x)||!(0,wa.Z)(n.y)||!(0,wa.Z)(n.z))||t.nodeName===oi.LINE&&(!(0,wa.Z)(n.x1)||!(0,wa.Z)(n.y1)||!(0,wa.Z)(n.z1)||!(0,wa.Z)(n.x2)||!(0,wa.Z)(n.y2)||!(0,wa.Z)(n.z2)))&&this.runtime.CSSPropertySyntaxFactory["<coordinate>"].postProcessor(t,a),(0,wa.Z)(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,a),n.path&&this.runtime.CSSPropertySyntaxFactory["<path>"].postProcessor(t,a),n.points&&this.runtime.CSSPropertySyntaxFactory["<list-of-points>"].postProcessor(t,a),(0,wa.Z)(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,a),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,a),p&&this.updateGeometry(t);return}var y=r.skipUpdateAttribute,b=r.skipParse,E=r.forceUpdateGeometry,O=r.usedAttributes,P=r.memoize,I=E,N=Object.keys(n);N.forEach(function(z){var V;y||(t.attributes[z]=n[z]),!I&&(!((V=bd[z])===null||V===void 0)&&V.l)&&(I=!0)}),b||N.forEach(function(z){t.computedStyle[z]=i.parseProperty(z,t.attributes[z],t,P)}),O!=null&&O.length&&(N=Array.from(new Set(N.concat(O)))),N.forEach(function(z){z in t.computedStyle&&(t.parsedStyle[z]=i.computeProperty(z,t.computedStyle[z],t,P))}),I&&this.updateGeometry(t),N.forEach(function(z){z in t.parsedStyle&&i.postProcessProperty(z,t,N)}),this.runtime.enableCSSParsing&&t.children.length&&N.forEach(function(z){z in t.parsedStyle&&i.isPropertyInheritable(z)&&t.children.forEach(function(V){V.internalSetAttribute(z,null,{skipUpdateAttribute:!0,skipParse:!0})})})},e.prototype.parseProperty=function(t,n,r,i){var a=bd[t],s=n;if((n===""||(0,wa.Z)(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")s=T1(n);else if(a){var l=a.k,p=a.syntax,m=p&&this.getPropertySyntax(p);l&&l.indexOf(n)>-1?s=T1(n):m&&(!i&&m.parserUnmemoize?s=m.parserUnmemoize(n,r):m.parser&&(s=m.parser(n,r)))}return s},e.prototype.computeProperty=function(t,n,r,i){var a=bd[t],s=r.id==="g-root",l=n;if(a){var p=a.syntax,m=a.inh,y=a.d;if(n instanceof yd){var b=n.value;if(b==="unset"&&(m&&!s?b="inherit":b="initial"),b==="initial")(0,wa.Z)(y)||(n=this.parseProperty(t,Zm(y)?y(r.nodeName):y,r,i));else if(b==="inherit"){var E=this.tryToResolveProperty(r,t,{inherited:!0});if((0,wa.Z)(E)){this.addUnresolveProperty(r,t);return}else return E}}var O=p&&this.getPropertySyntax(p);if(O&&O.calculator){var P=r.parsedStyle[t];l=O.calculator(t,P,n,r,this.runtime)}else n instanceof yd?l=n.value:l=n}return l},e.prototype.postProcessProperty=function(t,n,r){var i=bd[t];if(i&&i.syntax){var a=i.syntax&&this.getPropertySyntax(i.syntax),s=a;s&&s.postProcessor&&s.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=Gg.get(t);r||(Gg.set(t,[]),r=Gg.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&$C(t.parentElement,n)){var a=t.parentElement.parsedStyle[n];return a==="unset"||a==="initial"||a==="inherit"?void 0:a}},e.prototype.recalc=function(t){var n=Gg.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),Gg.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new Al),i.renderBounds||(i.renderBounds=new Al);var a=t.parsedStyle,s=r.update(a,t),l=s.width,p=s.height,m=s.depth,y=m===void 0?0:m,b=s.offsetX,E=b===void 0?0:b,O=s.offsetY,P=O===void 0?0:O,I=s.offsetZ,N=I===void 0?0:I,z=[Math.abs(l)/2,Math.abs(p)/2,y/2],V=a,W=V.stroke,K=V.lineWidth,J=V.increasedLineWidthForHitTesting,oe=V.shadowType,Te=V.shadowColor,Re=V.filter,We=Re===void 0?[]:Re,ut=V.transformOrigin,ct=a.anchor;n===oi.TEXT?delete a.anchor:n===oi.MESH&&(a.anchor[2]=.5);var Ft=[(1-(ct&&ct[0]||0)*2)*l/2+E,(1-(ct&&ct[1]||0)*2)*p/2+P,(1-(ct&&ct[2]||0)*2)*z[2]+N];i.contentBounds.update(Ft,z);var ft=n===oi.POLYLINE||n===oi.POLYGON||n===oi.PATH?Math.SQRT2:.5,St=W&&!W.isNone;if(St){var Mt=((K||0)+(J||0))*ft;z[0]+=Mt,z[1]+=Mt}if(i.renderBounds.update(Ft,z),Te&&oe&&oe!=="inner"){var Nt=i.renderBounds,tn=Nt.min,Yt=Nt.max,fn=a,Hn=fn.shadowBlur,cr=fn.shadowOffsetX,_r=fn.shadowOffsetY,Mr=Hn||0,fi=cr||0,Qi=_r||0,Ta=tn[0]-Mr+fi,Fi=Yt[0]+Mr+fi,Ci=tn[1]-Mr+Qi,Ya=Yt[1]+Mr+Qi;tn[0]=Math.min(tn[0],Ta),Yt[0]=Math.max(Yt[0],Fi),tn[1]=Math.min(tn[1],Ci),Yt[1]=Math.max(Yt[1],Ya),i.renderBounds.setMinMax(tn,Yt)}We.forEach(function(fs){var nu=fs.name,Vu=fs.params;if(nu==="blur"){var ec=Vu[0].value;i.renderBounds.update(i.renderBounds.center,Sc(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[ec,ec,0]))}else if(nu==="drop-shadow"){var uf=Vu[0].value,Fp=Vu[1].value,gg=Vu[2].value,i1=i.renderBounds,ip=i1.min,qv=i1.max,wu=ip[0]-gg+uf,Hu=qv[0]+gg+uf,Ac=ip[1]-gg+Fp,Ju=qv[1]+gg+Fp;ip[0]=Math.min(ip[0],wu),qv[0]=Math.max(qv[0],Hu),ip[1]=Math.min(ip[1],Ac),qv[1]=Math.max(qv[1],Ju),i.renderBounds.setMinMax(ip,qv)}}),ct=a.anchor;var Ga=l<0,vo=p<0,cs=(Ga?-1:1)*(ut?Xd(ut[0],0,t):0),Wo=(vo?-1:1)*(ut?Xd(ut[1],1,t):0);cs=cs-(Ga?-1:1)*(ct&&ct[0]||0)*i.contentBounds.halfExtents[0]*2,Wo=Wo-(vo?-1:1)*(ct&&ct[1]||0)*i.contentBounds.halfExtents[1]*2,t.setOrigin(cs,Wo),this.runtime.sceneGraphService.dirtifyToRoot(t)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=t.style.rawLineWidth/n,t.nodeName===oi.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=t.style.rawR/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===oi.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=bd[t];return n?n.inh:!1},e}(),XC=function(){function e(){this.parser=aS,this.parserUnmemoize=mx,this.parserWithCSSDisabled=null,this.mixer=yx}return e.prototype.calculator=function(t,n,r,i){return Gd(r)},e}(),YC=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,a){return r instanceof yd&&(r=null),a.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(s){s.childNodes.length===0&&a.sceneGraphService.dirtifyToRoot(s)}),r},e}(),qC=function(){function e(){this.parser=m0,this.parserWithCSSDisabled=m0,this.mixer=yC}return e.prototype.calculator=function(t,n,r,i){return r instanceof yd?r.value==="none"?hx:dx:r},e}(),KC=function(){function e(){this.parser=sS}return e.prototype.calculator=function(t,n,r){return r instanceof yd?[]:r},e}();function _S(e){var t=e.parsedStyle.fontSize;return(0,wa.Z)(t)?null:t}var Px=function(){function e(){this.parser=Hg,this.parserUnmemoize=Qy,this.parserWithCSSDisabled=null,this.mixer=yx}return e.prototype.calculator=function(t,n,r,i,a){var s;if((0,Yl.Z)(r))return r;if(Ru.isRelativeUnit(r.unit)){var l=a.styleValueRegistry;if(r.unit===Oa.kPercentage)return 0;if(r.unit===Oa.kEms){if(i.parentNode){var p=_S(i.parentNode);if(p)return p*=r.value,p;l.addUnresolveProperty(i,t)}else l.addUnresolveProperty(i,t);return 0}else if(r.unit===Oa.kRems){if(!((s=i==null?void 0:i.ownerDocument)===null||s===void 0)&&s.documentElement){var p=_S(i.ownerDocument.documentElement);if(p)return p*=r.value,p;l.addUnresolveProperty(i,t)}else l.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),QC=function(){function e(){this.mixer=lS}return e.prototype.parser=function(t){var n=oS((0,Yl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),JC=function(){function e(){this.mixer=lS}return e.prototype.parser=function(t){var n=oS((0,Yl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),Jy=ni.create();function Ix(e,t){var n=t.parsedStyle.defX||0,r=t.parsedStyle.defY||0;return t.resetLocalTransform(),t.setLocalPosition(n,r),e.forEach(function(i){var a=i.t,s=i.d;if(a==="scale"){var l=(s==null?void 0:s.map(function(V){return V.value}))||[1,1];t.scaleLocal(l[0],l[1],1)}else if(a==="scalex"){var l=(s==null?void 0:s.map(function(W){return W.value}))||[1];t.scaleLocal(l[0],1,1)}else if(a==="scaley"){var l=(s==null?void 0:s.map(function(W){return W.value}))||[1];t.scaleLocal(1,l[0],1)}else if(a==="scalez"){var l=(s==null?void 0:s.map(function(W){return W.value}))||[1];t.scaleLocal(1,1,l[0])}else if(a==="scale3d"){var l=(s==null?void 0:s.map(function(W){return W.value}))||[1,1,1];t.scaleLocal(l[0],l[1],l[2])}else if(a==="translate"){var p=s||[fc,fc];t.translateLocal(p[0].value,p[1].value,0)}else if(a==="translatex"){var p=s||[fc];t.translateLocal(p[0].value,0,0)}else if(a==="translatey"){var p=s||[fc];t.translateLocal(0,p[0].value,0)}else if(a==="translatez"){var p=s||[fc];t.translateLocal(0,0,p[0].value)}else if(a==="translate3d"){var p=s||[fc,fc,fc];t.translateLocal(p[0].value,p[1].value,p[2].value)}else if(a==="rotate"){var m=s||[av];t.rotateLocal(0,0,Gd(m[0]))}else if(a==="rotatex"){var m=s||[av];t.rotateLocal(Gd(m[0]),0,0)}else if(a==="rotatey"){var m=s||[av];t.rotateLocal(0,Gd(m[0]),0)}else if(a==="rotatez"){var m=s||[av];t.rotateLocal(0,0,Gd(m[0]))}else if(a!=="rotate3d")if(a==="skew"){var y=(s==null?void 0:s.map(function(V){return V.value}))||[0,0];t.setLocalSkew(Ou(y[0]),Ou(y[1]))}else if(a==="skewx"){var y=(s==null?void 0:s.map(function(W){return W.value}))||[0];t.setLocalSkew(Ou(y[0]),t.getLocalSkew()[1])}else if(a==="skewy"){var y=(s==null?void 0:s.map(function(W){return W.value}))||[0];t.setLocalSkew(t.getLocalSkew()[0],Ou(y[0]))}else if(a==="matrix"){var b=(0,ce.CR)(s.map(function(V){return V.value}),6),E=b[0],O=b[1],P=b[2],I=b[3],N=b[4],z=b[5];t.setLocalTransform(ni.set(Jy,E,O,0,0,P,I,0,0,0,0,1,0,N+n,z+r,0,1))}else a==="matrix3d"&&(ni.set.apply(ni,(0,ce.ev)([Jy],(0,ce.CR)(s.map(function(V){return V.value})),!1)),Jy[12]+=n,Jy[13]+=r,t.setLocalTransform(Jy))}),t.getLocalTransform()}var eO=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcessor=function(n,r){var i,a,s;switch(n.nodeName){case oi.CIRCLE:case oi.ELLIPSE:var l=n.parsedStyle,p=l.cx,m=l.cy,y=l.cz;(0,wa.Z)(p)||(i=p),(0,wa.Z)(m)||(a=m),(0,wa.Z)(y)||(s=y);break;case oi.LINE:var b=n.parsedStyle,E=b.x1,O=b.x2,P=b.y1,I=b.y2,N=Math.min(E,O),z=Math.min(P,I);i=N,a=z,s=0;break;case oi.RECT:case oi.IMAGE:case oi.GROUP:case oi.HTML:case oi.TEXT:case oi.MESH:(0,wa.Z)(n.parsedStyle.x)||(i=n.parsedStyle.x),(0,wa.Z)(n.parsedStyle.y)||(a=n.parsedStyle.y),(0,wa.Z)(n.parsedStyle.z)||(s=n.parsedStyle.z);break}n.nodeName!==oi.PATH&&n.nodeName!==oi.POLYLINE&&n.nodeName!==oi.POLYGON&&(n.parsedStyle.defX=i||0,n.parsedStyle.defY=a||0);var V=!(0,wa.Z)(i)||!(0,wa.Z)(a)||!(0,wa.Z)(s);if(V&&r.indexOf("transform")===-1){var W=n.parsedStyle.transform;if(W&&W.length)Ix(W,n);else{var K=(0,ce.CR)(n.getLocalPosition(),3),J=K[0],oe=K[1],Te=K[2];n.setLocalPosition((0,wa.Z)(i)?J:i,(0,wa.Z)(a)?oe:a,(0,wa.Z)(s)?Te:s)}}},t}(Px),tO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof yd&&(r=null);var a=r==null?void 0:r.cloneNode(!0);return a&&(a.style.isMarker=!0),a},e}(),nO=function(){function e(){this.mixer=yx,this.parser=Vm,this.parserUnmemoize=Wg,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),rO=function(){function e(){this.parser=Vm,this.parserUnmemoize=Wg,this.parserWithCSSDisabled=null,this.mixer=_x(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var a=r.nodeName;if(a===oi.LINE||a===oi.PATH||a===oi.POLYLINE){var s=r.getPoint(i);s&&(t.parsedStyle.defX=s.x,t.parsedStyle.defY=s.y,t.setLocalPosition(s.x,s.y))}}},e}(),iO=function(){function e(){this.parser=Vm,this.parserUnmemoize=Wg,this.parserWithCSSDisabled=null,this.mixer=_x(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),aO=function(){function e(){this.parser=Ax,this.parserWithCSSDisabled=Ax,this.mixer=LC}return e.prototype.calculator=function(t,n,r){return r instanceof yd&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new p0(0,0,0,0)}:r},e.prototype.postProcessor=function(t,n){if(t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y,t.nodeName===oi.PATH&&n.indexOf("transform")===-1){var r=t.parsedStyle,i=r.defX,a=i===void 0?0:i,s=r.defY,l=s===void 0?0:s;t.setLocalPosition(a,l)}},e}(),oO=function(){function e(){this.parser=vS,this.mixer=DC}return e.prototype.postProcessor=function(t,n){if((t.nodeName===oi.POLYGON||t.nodeName===oi.POLYLINE)&&n.indexOf("transform")===-1){var r=t.parsedStyle,i=r.defX,a=r.defY;t.setLocalPosition(i,a)}},e}(),sO=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.mixer=_x(0,1/0),n}return t}(Px),uO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof yd?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),lO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var a=i.getAttribute("text");if(a){var s=a;r.value==="capitalize"?s=a.charAt(0).toUpperCase()+a.slice(1):r.value==="lowercase"?s=a.toLowerCase():r.value==="uppercase"&&(s=a.toUpperCase()),i.parsedStyle.text=s}return r.value},e}(),kx={},cO=0;function bS(e,t){if(e){var n=typeof e=="string"?e:e.id||cO++;kx[n]&&kx[n].destroy(),kx[n]=t}}var e_=typeof window!="undefined"&&typeof window.document!="undefined";function fO(e){return!!e.getAttribute}function hO(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;xS(e[i],t)<0?n=i+1:r=i}return n}function xS(e,t){var n=Number(e.parsedStyle.zIndex),r=Number(t.parsedStyle.zIndex);if(n===r){var i=e.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(e)-a.indexOf(t)}}return n-r}function ES(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var SS="px";function dO(e,t,n){e_&&e.style&&(e.style.width=t+SS,e.style.height=n+SS)}function Lx(e,t){if(e_)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function pO(e){var t=Lx(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function vO(e){var t=Lx(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var mO=1,gO={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Dx=typeof performance=="object"&&performance.now?performance:Date;function Wm(e,t,n){var r=!1,i=!1,a=!!t&&!t.isNone,s=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=a,i=s):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var yO=1,_O=function(){return yO++},kv=typeof self=="object"&&self.self==self?self:typeof D.g=="object"&&D.g.global==D.g?D.g:{},bO=Date.now(),xO=function(){return kv.performance&&typeof kv.performance.now=="function"?kv.performance.now():Date.now()-bO},t_={},wS=Date.now(),EO=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-wS,r=n>16?0:16-n,i=_O();return t_[i]=e,Object.keys(t_).length>1||setTimeout(function(){wS=t;var a=t_;t_={},Object.keys(a).forEach(function(s){return a[s](xO())})},r),i},SO=function(e){delete t_[e]},wO=["","webkit","moz","ms","o"],TS=function(e){return typeof e!="string"?EO:e===""?kv.requestAnimationFrame:kv[e+"RequestAnimationFrame"]},Nx=function(e){return typeof e!="string"?SO:e===""?kv.cancelAnimationFrame:kv[e+"CancelAnimationFrame"]||kv[e+"CancelRequestAnimationFrame"]},TO=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},AS=TO(wO,function(e){return!!TS(e)}),CS=TS(AS),OS=Nx(AS);kv.requestAnimationFrame=CS,kv.cancelAnimationFrame=OS;var AO=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t),!1))}))},e}(),CO=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,ce.mG)(this,void 0,void 0,function(){var r,i,a,s;return(0,ce.Jh)(this,function(l){switch(l.label){case 0:return this.callbacks.length?[4,(s=this.callbacks)[0].apply(s,(0,ce.ev)([],(0,ce.CR)(t),!1))]:[3,6];case 1:r=l.sent(),i=0,l.label=2;case 2:return i<this.callbacks.length-1?(a=this.callbacks[i],[4,a(r)]):[3,5];case 3:r=l.sent(),l.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),Qh=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),Bx=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),OO=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],MO=/([\"\'])[^\'\"]+\1/;function RO(e){for(var t=e.fontSize,n=e.fontFamily,r=e.fontStyle,i=e.fontVariant,a=e.fontWeight,s=(0,Yl.Z)(t)&&"".concat(t,"px")||"16px",l=n.split(","),p=l.length-1;p>=0;p--){var m=l[p].trim();!MO.test(m)&&OO.indexOf(m)<0&&(m='"'.concat(m,'"')),l[p]=m}return"".concat(r," ").concat(i," ").concat(a," ").concat(s," ").concat(l.join(","))}var PO=function(){function e(){this.parser=Cx,this.parserUnmemoize=mS,this.parserWithCSSDisabled=mS,this.mixer=HC}return e.prototype.calculator=function(t,n,r,i){return r instanceof yd?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;Ix(n,t)},e}(),IO=function(){function e(){this.parser=P1,this.parserUnmemoize=WC}return e}(),kO=function(){function e(){this.parser=Vm,this.parserUnmemoize=Wg}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=Zg.Z_INDEX_CHANGED)}},e}(),k1=function(){function e(){}return e.prototype.update=function(t,n){var r=t.r,i=r*2,a=r*2;return{width:i,height:a}},e}(),LO=function(){function e(){}return e.prototype.update=function(t,n){var r=t.rx,i=t.ry,a=r*2,s=i*2;return{width:a,height:s}},e}(),DO=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2,s=Math.min(n,i),l=Math.max(n,i),p=Math.min(r,a),m=Math.max(r,a),y=l-s,b=m-p;return{width:y,height:b}},e}(),NO=function(){function e(){}return e.prototype.update=function(t){var n=t.path,r=n.rect,i=r.width,a=r.height;return{width:i,height:a}},e}(),BO=function(){function e(){}return e.prototype.update=function(t){if(t.points&&ai(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(n.map(function(m){return m[0]})),!1)),i=Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(n.map(function(m){return m[0]})),!1)),a=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(n.map(function(m){return m[1]})),!1)),s=Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(n.map(function(m){return m[1]})),!1)),l=i-r,p=s-a;return{width:l,height:p}}return{width:0,height:0}},e}(),b5=function(){function e(){}return e.prototype.update=function(t,n){var r=t.img,i=t.width,a=i===void 0?0:i,s=t.height,l=s===void 0?0:s,p=a,m=l;return r&&!Bu(r)&&(p||(p=r.width,t.width=p),m||(m=r.height,t.height=m)),{width:p,height:m}},e}(),FO=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,a=t.textBaseline,s=t.fontSize,l=t.fontStyle,p=t.fontWeight,m=t.fontVariant,y=t.lineWidth;return r&&s&&l&&p&&m&&i&&a&&!(0,wa.Z)(y)},e.prototype.update=function(t,n){var r,i,a=t.text,s=t.textAlign,l=t.lineWidth,p=t.textBaseline,m=t.dx,y=t.dy;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0};var b=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,E=this.globalRuntime.textService.measureText(a,t,b);t.metrics=E;var O=E.width,P=E.height,I=E.lineHeight,N=E.fontProperties,z=[O/2,P/2,0],V=[0,1],W=0;s==="center"||s==="middle"?(W=l/2,V=[.5,1]):(s==="right"||s==="end")&&(W=l,V=[1,1]);var K=0;return p==="middle"?K=z[1]:p==="top"||p==="hanging"?K=z[1]*2:p==="alphabetic"?K=this.globalRuntime.enableCSSParsing?I-N.ascent:0:(p==="bottom"||p==="ideographic")&&(K=0),m&&(W+=m),y&&(K+=y),t.anchor=[V[0],V[1],0],{width:z[0]*2,height:z[1]*2,offsetX:W,offsetY:K}},e}();function x5(e){return!!e.type}var Fx=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Hc,this.page=new Hc,this.canvas=new Hc,this.viewport=new Hc,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(Mu)},e}(),MS=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.client=new Hc,n.movement=new Hc,n.offset=new Hc,n.global=new Hc,n.screen=new Hc,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(Mu)},t}(Fx),RS=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(MS),zx=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(MS),Ku=function(e){(0,ce.ZT)(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(Fx),PS=":",zO=function(){function e(){this.emitter=new Bo}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=Cu(r)&&r||zo(r)&&r.capture,a=zo(r)&&r.once,s=Zm(n)?void 0:n,l=!1,p="";if(t.indexOf(PS)>-1){var m=(0,ce.CR)(t.split(PS),2),y=m[0],b=m[1];t=b,p=y,l=!0}if(t=i?"".concat(t,"capture"):t,n=Zm(n)?n:n.handleEvent,l){var E=n;n=function(){for(var O,P=[],I=0;I<arguments.length;I++)P[I]=arguments[I];((O=P[0].target)===null||O===void 0?void 0:O.name)===p&&E.apply(void 0,(0,ce.ev)([],(0,ce.CR)(P),!1))}}return a?this.emitter.once(t,n,s):this.emitter.on(t,n,s),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=Cu(r)&&r||zo(r)&&r.capture,a=Zm(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=Zm(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(t,n,a),this},e.prototype.emit=function(t,n){this.dispatchEvent(new Ku(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!x5(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var a;if(this.document?a=this:this.defaultView?a=this.defaultView:a=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,a){if(t.manager=a.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),Vf=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===oi.TEXT&&(i+=this.style.text);try{for(var a=(0,ce.XA)(this.childNodes),s=a.next();!s.done;s=a.next()){var l=s.value;l.nodeName===oi.TEXT?i+=l.nodeValue:i+=l.textContent}}catch(p){n={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===oi.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(Mu)},t.prototype.lookupNamespaceURI=function(n){throw new Error(Mu)},t.prototype.lookupPrefix=function(n){throw new Error(Mu)},t.prototype.normalize=function(){throw new Error(Mu)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,a=this,s=[i],l=[a];(r=i.parentNode)!==null&&r!==void 0?r:a.parentNode;)i=i.parentNode?(s.push(i.parentNode),i.parentNode):i,a=a.parentNode?(l.push(a.parentNode),a.parentNode):a;if(i!==a)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var p=s.length>l.length?s:l,m=p===s?l:s;if(p[p.length-m.length]===m[0])return p===s?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var y=p.length-m.length,b=m.length-1;b>=0;b--){var E=m[b],O=p[y+b];if(O!==E){var P=E.parentNode.childNodes;return P.indexOf(E)<P.indexOf(O)?m===s?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:p===s?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(zO),E5=2048,S5=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new Bo,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ni.create(),this.tmpVec3=nr.create(),this.onPointerDown=function(i){var a=r.createPointerEvent(i);if(r.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")r.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;r.dispatchEvent(a,s?"rightdown":"mousedown")}var l=r.trackingData(i.pointerId);l.pressTargetsByButton[i.button]=a.composedPath(),r.freeEvent(a)},this.onPointerUp=function(i){var a,s=Dx.now(),l=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(l,"pointerup"),l.pointerType==="touch")r.dispatchEvent(l,"touchend");else if(l.pointerType==="mouse"||l.pointerType==="pen"){var p=l.button===2;r.dispatchEvent(l,p?"rightup":"mouseup")}var m=r.trackingData(i.pointerId),y=r.findMountedTarget(m.pressTargetsByButton[i.button]),b=y;if(y&&!l.composedPath().includes(y)){for(var E=y;E&&!l.composedPath().includes(E);){if(l.currentTarget=E,r.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch")r.notifyTarget(l,"touchendoutside");else if(l.pointerType==="mouse"||l.pointerType==="pen"){var p=l.button===2;r.notifyTarget(l,p?"rightupoutside":"mouseupoutside")}Vf.isNode(E)&&(E=E.parentNode)}delete m.pressTargetsByButton[i.button],b=E}if(b){var O=r.clonePointerEvent(l,"click");O.target=b,O.path=[],m.clicksByButton[i.button]||(m.clicksByButton[i.button]={clickCount:0,target:O.target,timeStamp:s});var P=m.clicksByButton[i.button];P.target===O.target&&s-P.timeStamp<200?++P.clickCount:P.clickCount=1,P.target=O.target,P.timeStamp=s,O.detail=P.clickCount,!((a=l.detail)===null||a===void 0)&&a.preventClick||(!r.context.config.useNativeClickEvent&&(O.pointerType==="mouse"||O.pointerType==="touch")&&r.dispatchEvent(O,"click"),r.dispatchEvent(O,"pointertap")),r.freeEvent(O)}r.freeEvent(l)},this.onPointerMove=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),s=a.pointerType==="mouse"||a.pointerType==="pen",l=r.trackingData(i.pointerId),p=r.findMountedTarget(l.overTargets);if(l.overTargets&&p!==a.target){var m=i.type==="mousemove"?"mouseout":"pointerout",y=r.createPointerEvent(i,m,p||void 0);if(r.dispatchEvent(y,"pointerout"),s&&r.dispatchEvent(y,"mouseout"),!a.composedPath().includes(p)){var b=r.createPointerEvent(i,"pointerleave",p||void 0);for(b.eventPhase=b.AT_TARGET;b.target&&!a.composedPath().includes(b.target);)b.currentTarget=b.target,r.notifyTarget(b),s&&r.notifyTarget(b,"mouseleave"),Vf.isNode(b.target)&&(b.target=b.target.parentNode);r.freeEvent(b)}r.freeEvent(y)}if(p!==a.target){var E=i.type==="mousemove"?"mouseover":"pointerover",O=r.clonePointerEvent(a,E);r.dispatchEvent(O,"pointerover"),s&&r.dispatchEvent(O,"mouseover");for(var P=p&&Vf.isNode(p)&&p.parentNode;P&&P!==(Vf.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&P!==a.target;)P=P.parentNode;var I=!P||P===(Vf.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(I){var N=r.clonePointerEvent(a,"pointerenter");for(N.eventPhase=N.AT_TARGET;N.target&&N.target!==p&&N.target!==(Vf.isNode(r.rootTarget)&&r.rootTarget.parentNode);)N.currentTarget=N.target,r.notifyTarget(N),s&&r.notifyTarget(N,"mouseenter"),Vf.isNode(N.target)&&(N.target=N.target.parentNode);r.freeEvent(N)}r.freeEvent(O)}r.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&r.dispatchEvent(a,"touchmove"),s&&(r.dispatchEvent(a,"mousemove"),r.cursor=r.getCursor(a.target)),l.overTargets=a.composedPath(),r.freeEvent(a)},this.onPointerOut=function(i){var a=r.trackingData(i.pointerId);if(a.overTargets){var s=i.pointerType==="mouse"||i.pointerType==="pen",l=r.findMountedTarget(a.overTargets),p=r.createPointerEvent(i,"pointerout",l||void 0);r.dispatchEvent(p),s&&r.dispatchEvent(p,"mouseout");var m=r.createPointerEvent(i,"pointerleave",l||void 0);for(m.eventPhase=m.AT_TARGET;m.target&&m.target!==(Vf.isNode(r.rootTarget)&&r.rootTarget.parentNode);)m.currentTarget=m.target,r.notifyTarget(m),s&&r.notifyTarget(m,"mouseleave"),Vf.isNode(m.target)&&(m.target=m.target.parentNode);a.overTargets=null,r.freeEvent(p),r.freeEvent(m)}r.cursor=null},this.onPointerOver=function(i){var a=r.trackingData(i.pointerId),s=r.createPointerEvent(i),l=s.pointerType==="mouse"||s.pointerType==="pen";r.dispatchEvent(s,"pointerover"),l&&r.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(r.cursor=r.getCursor(s.target));var p=r.clonePointerEvent(s,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==(Vf.isNode(r.rootTarget)&&r.rootTarget.parentNode);)p.currentTarget=p.target,r.notifyTarget(p),l&&r.notifyTarget(p,"mouseenter"),Vf.isNode(p.target)&&(p.target=p.target.parentNode);a.overTargets=s.composedPath(),r.freeEvent(s),r.freeEvent(p)},this.onPointerUpOutside=function(i){var a=r.trackingData(i.pointerId),s=r.findMountedTarget(a.pressTargetsByButton[i.button]),l=r.createPointerEvent(i);if(s){for(var p=s;p;)l.currentTarget=p,r.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch"||(l.pointerType==="mouse"||l.pointerType==="pen")&&r.notifyTarget(l,l.button===2?"rightupoutside":"mouseupoutside"),Vf.isNode(p)&&(p=p.parentNode);delete a.pressTargetsByButton[i.button]}r.freeEvent(l)},this.onWheel=function(i){var a=r.createWheelEvent(i);r.dispatchEvent(a),r.freeEvent(a)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var a=r.createPointerEvent(i);r.dispatchEvent(a),r.freeEvent(a)}},this.onPointerCancel=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(a),r.freeEvent(a)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.client2Viewport=function(t){var n=this.context.contextService.getBoundingClientRect();return new Hc(t.x-((n==null?void 0:n.left)||0),t.y-((n==null?void 0:n.top)||0))},e.prototype.viewport2Client=function(t){var n=this.context.contextService.getBoundingClientRect();return new Hc(t.x+((n==null?void 0:n.left)||0),t.y+((n==null?void 0:n.top)||0))},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,a=i.getCamera(),s=this.context.config,l=s.width,p=s.height,m=a.getPerspectiveInverse(),y=a.getWorldTransform(),b=ni.multiply(this.tmpMatrix,y,m),E=nr.set(this.tmpVec3,n/l*2-1,(1-r/p)*2-1,0);return nr.transformMat4(E,E,b),new Hc(E[0],E[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),a=r.getViewTransform(),s=ni.multiply(this.tmpMatrix,i,a),l=nr.set(this.tmpVec3,t.x,t.y,0);nr.transformMat4(this.tmpVec3,this.tmpVec3,s);var p=this.context.config,m=p.width,y=p.height;return new Hc((l[0]+1)/2*m,(1-(l[1]+1)/2)*y)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var a=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=a+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<E5&&t!==this.rootTarget;i++)Vf.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,a=i.width,s=i.height,l=i.disableHitTesting;return n<0||r<0||n>a||r>s?null:!l&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t){var n,r=this.context.contextService.getDomElement(),i=(n=t.nativeEvent)===null||n===void 0?void 0:n.target;if(i){if(i===r)return!0;if(r&&r.contains)return r.contains(i)}return t.nativeEvent.composedPath?t.nativeEvent.composedPath().indexOf(r)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=(0,ce.XA)(t.nativeEvent.composedPath()),a=i.next();!a.done;a=i.next()){var s=a.value,l=this.nativeHTMLMap.get(s);if(l)return l}}catch(p){n={error:p}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var a=this.allocateEvent(RS);this.copyPointerData(t,a),this.copyMouseData(t,a),this.copyData(t,a),a.nativeEvent=t.nativeEvent,a.originalEvent=t;var s=this.getExistedHTML(a);return a.target=r!=null?r:s||this.isNativeEventFromCanvas(a)&&this.pickTarget(a)||i,typeof n=="string"&&(a.type=n),a},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(zx);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n);return n.target=r||this.isNativeEventFromCanvas(n)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(zx);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(RS);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n!=null?n:r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=Dx.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n!=null?n:t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var a=0;a<i.length&&!t.propagationImmediatelyStopped;a++)i[a].once&&r.removeListener(n,i[a].fn,void 0,!0),i[a].fn.call(t.currentTarget||i[a].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||Vf.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=fO(n)&&n.getAttribute("cursor");if(r)return r;n=Vf.isNode(n)&&n.parentNode}},e}(),UO=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||pi.offscreenCanvas)this.canvas=t||pi.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,ce.pi)({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,ce.pi)({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,ce.pi)({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),Y0;(function(e){e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE"})(Y0||(Y0={}));var jO=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Qh,initAsync:new AO,dirtycheck:new Bx,cull:new Bx,beginFrame:new Qh,beforeRender:new Qh,render:new Qh,afterRender:new Qh,endFrame:new Qh,destroy:new Qh,pick:new CO,pickSync:new Bx,pointerDown:new Qh,pointerUp:new Qh,pointerMove:new Qh,pointerOut:new Qh,pointerOver:new Qh,pointerWheel:new Qh,pointerCancel:new Qh,click:new Qh}}return e.prototype.init=function(t){var n=this,r=(0,ce.pi)((0,ce.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Y0.CAMERA_CHANGED)},e.prototype.render=function(t,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=i.renderReasons.size===1&&i.renderReasons.has(Y0.CAMERA_CHANGED),s=!t.disableRenderHooks||!(t.disableRenderHooks&&a);s&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(),s&&i.renderListCurrentFrame.forEach(function(l){r.hooks.beforeRender.call(l),r.hooks.render.call(l),r.hooks.afterRender.call(l)}),this.hooks.endFrame.call(),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,a=n.renderer.getConfig(),s=a.enableDirtyCheck,l=a.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var p=t.renderable,m=s?p.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(m){var y=l?this.hooks.cull.call(m,this.context.camera):m;y&&(this.stats.rendered++,r.renderListCurrentFrame.push(y))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var b=t.sortable;b.dirty&&(this.sort(t,b),b.dirty=!1,b.dirtyChildren=[],b.dirtyReason=void 0),(b.sorted||t.childNodes).forEach(function(E){i.renderDisplayObject(E,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==Zg.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var a=n.sorted.indexOf(r);a>=0&&n.sorted.splice(a,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var s=hO(n.sorted,r);n.sorted.splice(s,0,r)}}):n.sorted=t.childNodes.slice().sort(xS)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Y0.DISPLAY_OBJECT_CHANGED)},e}(),ZO=/\[\s*(.*)=(.*)\s*\]/,g0=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(l){return((l==null?void 0:l.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(l){return l.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),a=i.name,s=i.value;return a?n.find(function(l){return n!==l&&(a==="name"?l.name===s:r.attributeToString(l,a)===s)}):null}else return n.find(function(l){return n!==l&&l.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(l){return n!==l&&((l==null?void 0:l.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(l){return n!==l&&l.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),a=i.name,s=i.value;return a?n.findAll(function(l){return n!==l&&(a==="name"?l.name===s:r.attributeToString(l,a)===s)}):[]}else return n.findAll(function(l){return n!==l&&l.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i==="name"?n.name===a:this.attributeToString(n,i)===a}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(ZO),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return(0,wa.Z)(r)?"":r.toString?r.toString():""},e}(),Op=function(e){(0,ce.ZT)(t,e);function t(n,r,i,a,s,l,p,m){var y=e.call(this,null)||this;return y.relatedNode=r,y.prevValue=i,y.newValue=a,y.attrName=s,y.attrChange=l,y.prevParsedValue=p,y.newParsedValue=m,y.type=n,y}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(Fx),Ro;(function(e){e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled"})(Ro||(Ro={}));function Yd(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var n_=new Op(Ro.REPARENT,null,"","","",0,"",""),q0=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Ku(Ro.BOUNDS_CHANGED),this.rotate=function(){var r=Cn();return function(i,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),typeof a=="number"&&(a=nr.fromValues(a,s,l));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,a);else{var m=Cn();sc(m,a[0],a[1],a[2]);var y=n.getRotation(i),b=n.getRotation(i.parentNode);Pm(r,b),xu(r,r),ti(m,r,m),ti(p.localRotation,m,y),Mg(p.localRotation,p.localRotation),n.dirtifyLocal(i,p)}}}(),this.rotateLocal=function(){var r=Cn();return function(i,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),typeof a=="number"&&(a=nr.fromValues(a,s,l));var p=i.transformable;sc(r,a[0],a[1],a[2]),Im(p.localRotation,p.localRotation,r),n.dirtifyLocal(i,p)}}(),this.setEulerAngles=function(){var r=Cn();return function(i,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),typeof a=="number"&&(a=nr.fromValues(a,s,l));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,a);else{sc(p.localRotation,a[0],a[1],a[2]);var m=n.getRotation(i.parentNode);Pm(r,xu(Cn(),m)),Im(p.localRotation,p.localRotation,r),n.dirtifyLocal(i,p)}}}(),this.translateLocal=function(){return function(r,i,a,s){a===void 0&&(a=0),s===void 0&&(s=0),typeof i=="number"&&(i=nr.fromValues(i,a,s));var l=r.transformable;nr.equals(i,nr.create())||(nr.transformQuat(i,i,l.localRotation),nr.add(l.localPosition,l.localPosition,i),n.dirtifyLocal(r,l))}}(),this.setPosition=function(){var r=ni.create(),i=nr.create();return function(a,s){var l=a.transformable;if(i[0]=s[0],i[1]=s[1],i[2]=s[2]||0,!nr.equals(n.getPosition(a),i)){if(nr.copy(l.position,i),a.parentNode===null||!a.parentNode.transformable)nr.copy(l.localPosition,i);else{var p=a.parentNode.transformable;ni.copy(r,p.worldTransform),ni.invert(r,r),nr.transformMat4(l.localPosition,i,r)}n.dirtifyLocal(a,l)}}}(),this.setLocalPosition=function(){var r=nr.create();return function(i,a){var s=i.transformable;r[0]=a[0],r[1]=a[1],r[2]=a[2]||0,!nr.equals(s.localPosition,r)&&(nr.copy(s.localPosition,r),n.dirtifyLocal(i,s))}}(),this.translate=function(){var r=nr.create(),i=nr.create(),a=nr.create();return function(s,l,p,m){p===void 0&&(p=0),m===void 0&&(m=0),typeof l=="number"&&(l=nr.set(i,l,p,m)),!nr.equals(l,r)&&(nr.add(a,n.getPosition(s),l),n.setPosition(s,a))}}(),this.setRotation=function(){var r=Cn();return function(i,a,s,l,p){var m=i.transformable;if(typeof a=="number"&&(a=Jp(a,s,l,p)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,a);else{var y=n.getRotation(i.parentNode);Pm(r,y),xu(r,r),ti(m.localRotation,r,a),Mg(m.localRotation,m.localRotation),n.dirtifyLocal(i,m)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=ni.create(),i=nr.create(),a=Jp(0,0,0,1);return function(s){var l=s.localSkew[0]!==0||s.localSkew[1]!==0;if(l){if(ni.fromRotationTranslationScaleOrigin(s.localTransform,s.localRotation,s.localPosition,nr.fromValues(1,1,1),s.origin),s.localSkew[0]!==0||s.localSkew[1]!==0){var p=ni.identity(r);p[4]=Math.tan(s.localSkew[0]),p[1]=Math.tan(s.localSkew[1]),ni.multiply(s.localTransform,s.localTransform,p)}var m=ni.fromRotationTranslationScaleOrigin(r,a,i,s.localScale,s.origin);ni.multiply(s.localTransform,s.localTransform,m)}else ni.fromRotationTranslationScaleOrigin(s.localTransform,s.localRotation,s.localPosition,s.localScale,s.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,a,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t)),t.parentNode=n,(0,wa.Z)(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var l=n.sortable;(!((i=l==null?void 0:l.sorted)===null||i===void 0)&&i.length||!((a=t.style)===null||a===void 0)&&a.zIndex)&&(l.dirtyChildren.indexOf(t)===-1&&l.dirtyChildren.push(t),l.dirty=!0,l.dirtyReason=Zg.ADDED);var p=t.transformable;p&&this.dirtifyWorld(t,p),p.frozen&&this.unfreezeParentToRoot(t),s&&t.dispatchEvent(n_)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,a=t.parentNode.sortable;(!((n=a==null?void 0:a.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(a.dirtyChildren.indexOf(t)===-1&&a.dirtyChildren.push(t),a.dirty=!0,a.dirtyReason=Zg.REMOVED);var s=t.parentNode.childNodes.indexOf(t);s>-1&&t.parentNode.childNodes.splice(s,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var a=t.transformable;if(!(n[0]===a.origin[0]&&n[1]===a.origin[1]&&n[2]===a.origin[2])){var s=a.origin;s[0]=n[0],s[1]=n[1],s[2]=n[2]||0,this.dirtifyLocal(t,a)}},e.prototype.setLocalEulerAngles=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=nr.fromValues(n,r,i));var a=t.transformable;sc(a.localRotation,n[0],n[1],n[2]),this.dirtifyLocal(t,a)},e.prototype.scaleLocal=function(t,n){var r=t.transformable;nr.multiply(r.localScale,r.localScale,nr.fromValues(n[0],n[1],n[2]||1)),this.dirtifyLocal(t,r)},e.prototype.setLocalScale=function(t,n){var r=t.transformable,i=nr.fromValues(n[0],n[1],n[2]||r.localScale[2]);nr.equals(i,r.localScale)||(nr.copy(r.localScale,i),this.dirtifyLocal(t,r))},e.prototype.setLocalRotation=function(t,n,r,i,a){typeof n=="number"&&(n=Jp(n,r,i,a));var s=t.transformable;Pm(s.localRotation,n),this.dirtifyLocal(t,s)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=md.al(n,r));var i=t.transformable;md.JG(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,a){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=a,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1];l.affectChildren?s.forEach(function(p){r(p,l)}):r(s,l)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)Yd(r),r=r.parentNode;n&&t.forEach(function(i){Yd(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var a=this.displayObjectDependencyMap.get(n);if(a&&a[t]){var s=a[t].indexOf(i);a[t].splice(s,1)}}if(r){var l=this.displayObjectDependencyMap.get(r);l||(this.displayObjectDependencyMap.set(r,{}),l=this.displayObjectDependencyMap.get(r)),l[t]||(l[t]=[]),l[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(a){n.dirtifyToRoot(a,!0),a.dispatchEvent(new Op(Ro.ATTR_MODIFIED,a,n,n,i,Op.MODIFICATION,n,n)),a.isCustomElement&&a.isConnected&&a.attributeChangedCallback&&a.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return ni.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return ni.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return ni.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=ni.getTranslation(nr.create(),n),i=ni.getRotation(Cn(),n),a=ni.getScaling(nr.create(),n);this.setLocalScale(t,a),this.setLocalPosition(t,r),this.setLocalRotation(t,i)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(Al.isEmpty(i))return null;var a=r||new Al;return a.setFromTransformedAABB(i,this.getWorldTransform(t)),a},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry,i=n?r.renderBounds:r.contentBounds||null;return i||new Al},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var a=n?i.renderBounds:i.bounds,s=this.getTransformedGeometryBounds(t,n,a),l=t.childNodes;if(l.forEach(function(y){var b=r.getBounds(y,n);b&&(s?s.add(b):(s=a||new Al,s.update(b.center,b.halfExtents)))}),n){var p=ES(t);if(p){var m=p.parsedStyle.clipPath.getBounds(n);s?m&&(s=m.intersection(s)):s=m}}return s||(s=new Al),s&&(n?i.renderBounds=s:i.bounds=s),n?i.renderBoundsDirty=!1:i.boundsDirty=!1,s},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=ni.create();t.parentNode.transformable&&(n=ni.invert(ni.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!Al.isEmpty(r)){var i=new Al;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,a=this.getGeometryBounds(t);Al.isEmpty(a)||(i=new Al,i.setFromTransformedAABB(a,this.getWorldTransform(t)));var s=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var l=(0,ce.CR)(i.getMin(),2),p=l[0],m=l[1],y=(0,ce.CR)(i.getMax(),2),b=y[0],E=y[1];return new p0(p+((s==null?void 0:s.left)||0),m+((s==null?void 0:s.top)||0),b-p,E-m)}return new p0((s==null?void 0:s.left)||0,(s==null?void 0:s.top)||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(a){var s=a.transformable;s.dirtyFlag||r.dirtifyWorldInternal(a,s)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?ni.copy(n.worldTransform,n.localTransform):ni.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),ov={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},r_=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Lv=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,$m=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,ah=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,Dv=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,Nv=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,L1=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,VO=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,IS=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,Ux=new RegExp("".concat(Lv.source,"|").concat(ah.source,"|").concat(Nv.source,"|").concat(VO.source)),HO=new RegExp("".concat($m.source,"|").concat(Dv.source,"|").concat(L1.source,"|").concat(IS.source)),WO=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(HO.exec(i)||Ux.exec(r)))},this.trimByKinsokuShorui=function(r){var i=(0,ce.ev)([],(0,ce.CR)(r),!1),a=i[i.length-2];if(!a)return r;var s=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=s+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),a=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});a.font=t;var s=ov.MetricsString+ov.BaselineSymbol,l=Math.ceil(a.measureText(s).width),p=Math.ceil(a.measureText(ov.BaselineSymbol).width),m=ov.HeightMultiplier*p;p=p*ov.BaselineMultiplier|0,i.width=l,i.height=m,a.fillStyle="#f00",a.fillRect(0,0,l,m),a.font=t,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(s,0,p);var y=a.getImageData(0,0,l||1,m||1).data,b=y.length,E=l*4,O=0,P=0,I=!1;for(O=0;O<p;++O){for(var N=0;N<E;N+=4)if(y[P+N]!==255){I=!0;break}if(!I)P+=E;else break}for(r.ascent=p-O,P=b-E,I=!1,O=m;O>p;--O){for(var N=0;N<E;N+=4)if(y[P+N]!==255){I=!0;break}if(!I)P-=E;else break}return r.descent=O-p,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,a=n.wordWrap,s=n.lineHeight,l=n.lineWidth,p=n.textBaseline,m=n.textAlign,y=n.letterSpacing,b=n.textPath;n.textPathSide,n.textPathStartOffset;var E=n.leading,O=E===void 0?0:E,P=RO(n),I=this.measureFont(P,r);I.fontSize===0&&(I.fontSize=i,I.ascent=i);var N=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);N.font=P,n.isOverflowing=!1;var z=a?this.wordWrap(t,n,r):t,V=z.split(/(?:\r\n|\r|\n)/),W=new Array(V.length),K=0;if(b){b.getTotalLength();for(var J=0;J<V.length;J++)var oe=N.measureText(V[J]).width+(V[J].length-1)*y}else{for(var J=0;J<V.length;J++){var Te=N.measureText(V[J]).width+(V[J].length-1)*y;W[J]=Te,K=Math.max(K,Te)}var oe=K+l,Re=s||I.fontSize+l,We=Math.max(Re,I.fontSize+l)+(V.length-1)*(Re+O);Re+=O;var ut=0;return p==="middle"?ut=-We/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?ut=-We:(p==="top"||p==="hanging")&&(ut=0),{font:P,width:oe,height:We,lines:V,lineWidths:W,lineHeight:Re,maxLineWidth:K,fontProperties:I,lineMetrics:W.map(function(Ft,ft){var St=0;return m==="center"||m==="middle"?St-=Ft/2:(m==="right"||m==="end")&&(St-=Ft),new p0(St-l/2,ut+ft*Re,Ft+l,Re)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,a=n.wordWrapWidth,s=a===void 0?0:a,l=n.letterSpacing,p=n.maxLines,m=p===void 0?1/0:p,y=n.textOverflow,b=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),E=s+l,O="";y==="ellipsis"?O="...":y&&y!=="clip"&&(O=y);for(var P=[],I=0,N=0,z={},V=function(Mt){return i.getFromCache(Mt,l,z,b)},W=Array.from(O).reduce(function(Mt,Nt){return Mt+V(Nt)},0),K=Array.from(t),J=0;J<K.length;J++){var oe=K[J],Te=t[J-1],Re=t[J+1],We=V(oe);if(this.isNewline(oe)){if(I++,I>=m){n.isOverflowing=!0;break}N=0,P[I]="";continue}if(N>0&&N+We>E){if(I+1>=m){if(n.isOverflowing=!0,W>0&&W<=E){for(var ut=P[I].length,ct=0,Ft=ut,ft=0;ft<ut;ft++){var St=V(P[I][ft]);if(ct+St+W>E){Ft=ft;break}ct+=St}P[I]=(P[I]||"").slice(0,Ft)+O}break}if(I++,N=0,P[I]="",this.isBreakingSpace(oe))continue;this.canBreakInLastChar(oe)||(P=this.trimToBreakable(P),N=this.sumTextWidthByCache(P[I]||"",z)),this.shouldBreakByKinsokuShorui(oe,Re)&&(P=this.trimByKinsokuShorui(P),N+=V(Te||""))}N+=We,P[I]=(P[I]||"")+oe}return P.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:ov.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:ov.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=(0,ce.ev)([],(0,ce.CR)(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var a=r.slice(i,i+1),s=this.isBreakingSpace(a),l=i+1,p=i+(s?0:1);return n[n.length-1]+=r.slice(l,r.length),n[n.length-2]=r.slice(0,p),n},e.prototype.canBreakInLastChar=function(t){return!(t&&r_.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!r_.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var a=r[t];if(typeof a!="number"){var s=t.length*n;a=i.measureText(t).width+s,r[t]=a}return a},e}(),pi={},kS=function(){var e,t=new b5,n=new BO;return e={},e[oi.CIRCLE]=new k1,e[oi.ELLIPSE]=new LO,e[oi.RECT]=t,e[oi.IMAGE]=t,e[oi.GROUP]=t,e[oi.LINE]=new DO,e[oi.TEXT]=new FO(pi),e[oi.POLYLINE]=n,e[oi.POLYGON]=n,e[oi.PATH]=new NO,e[oi.HTML]=null,e[oi.MESH]=null,e}(),$O=function(){var e,t=new qC,n=new Px;return e={},e[Wa.PERCENTAGE]=null,e[Wa.NUMBER]=new nO,e[Wa.ANGLE]=new XC,e[Wa.DEFINED_PATH]=new YC,e[Wa.PAINT]=t,e[Wa.COLOR]=t,e[Wa.FILTER]=new KC,e[Wa.LENGTH]=n,e[Wa.LENGTH_PERCENTAGE]=n,e[Wa.LENGTH_PERCENTAGE_12]=new QC,e[Wa.LENGTH_PERCENTAGE_14]=new JC,e[Wa.COORDINATE]=new eO,e[Wa.OFFSET_DISTANCE]=new rO,e[Wa.OPACITY_VALUE]=new iO,e[Wa.PATH]=new aO,e[Wa.LIST_OF_POINTS]=new oO,e[Wa.SHADOW_BLUR]=new sO,e[Wa.TEXT]=new uO,e[Wa.TEXT_TRANSFORM]=new lO,e[Wa.TRANSFORM]=new PO,e[Wa.TRANSFORM_ORIGIN]=new IO,e[Wa.Z_INDEX]=new kO,e[Wa.MARKER]=new tO,e}(),GO=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof D.g!="undefined"?D.g:{}};pi.CameraContribution=jm,pi.AnimationTimeline=null,pi.EasingFunction=null,pi.offscreenCanvasCreator=new UO,pi.sceneGraphSelector=new g0,pi.sceneGraphService=new q0(pi),pi.textService=new WO(pi),pi.geometryUpdaterFactory=kS,pi.CSSPropertySyntaxFactory=$O,pi.styleValueRegistry=new GC(pi),pi.layoutRegistry=null,pi.globalThis=GO(),pi.enableCSSParsing=!0,pi.enableDataset=!1,pi.enableStyleSyntax=!0,pi.enableSizeAttenuation=!1;var jx=0;function Zx(){jx=0}var LS=new Op(Ro.INSERTED,null,"","","",0,"",""),Gm=new Op(Ro.REMOVED,null,"","","",0,"",""),XO=new Ku(Ro.DESTROY),YO=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.entity=jx++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:px.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=pi.enableCSSParsing?{anchor:ul,opacity:ul,fillOpacity:ul,strokeOpacity:ul,fill:ul,stroke:ul,transform:ul,transformOrigin:ul,visibility:ul,pointerEvents:ul,lineWidth:ul,lineCap:ul,lineJoin:ul,increasedLineWidthForHitTesting:ul,fontSize:ul,fontFamily:ul,fontStyle:ul,fontWeight:ul,fontVariant:ul,textAlign:ul,textBaseline:ul,textTransform:ul,zIndex:ul,filter:ul,shadowType:ul}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(Mu)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(ix);return pi.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),LS.relatedNode=this,n.dispatchEvent(LS),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return Gm.relatedNode=this,n.dispatchEvent(Gm),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),pi.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return pi.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return pi.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return pi.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return pi.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return pi.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return pi.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return pi.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(pi.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(a){return a!==r&&n(a)?(i=a,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(a){a!==r&&n(a)&&i.push(a)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var a=this.parentNode.childNodes.indexOf(this);r.forEach(function(s,l){var p;return(p=n.parentNode)===null||p===void 0?void 0:p.appendChild(s,a+l+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var a=this.parentNode.childNodes.indexOf(this),s=(0,ce.CR)(r),l=s[0],p=s.slice(1);this.parentNode.appendChild(l,a),(n=l).after.apply(n,(0,ce.ev)([],(0,ce.CR)(p),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,(0,ce.ev)([],(0,ce.CR)(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(a){return n.appendChild(a)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(a,s){return n.appendChild(a,s)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,ce.ev)([],(0,ce.CR)(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(XO),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return pi.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return pi.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return pi.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return pi.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return pi.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(oC(n))return pi.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){var i=lx(n);return r=this.attributes[i],pi.enableCSSParsing&&(0,wa.Z)(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(Mu)},t.prototype.getAttributeNode=function(n){throw new Error(Mu)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(Mu)},t.prototype.hasAttributeNS=function(n,r){throw new Error(Mu)},t.prototype.removeAttributeNS=function(n,r){throw new Error(Mu)},t.prototype.removeAttributeNode=function(n){throw new Error(Mu)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(Mu)},t.prototype.setAttributeNode=function(n){throw new Error(Mu)},t.prototype.setAttributeNodeNS=function(n){throw new Error(Mu)},t.prototype.toggleAttribute=function(n,r){throw new Error(Mu)},t}(Vf);function du(e){return!!(e!=null&&e.nodeName)}var y0=new Op(Ro.ATTR_MODIFIED,null,null,null,null,Op.MODIFICATION,null,null),Mp={anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},Xm={anchor:[0,0],fill:hx,stroke:hx,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},qO=(0,ce.pi)((0,ce.pi)({},Xm),{opacity:1,fillOpacity:1,strokeOpacity:1,visibility:"visible",pointerEvents:"auto",lineWidth:1,lineCap:"butt",lineJoin:"miter",increasedLineWidthForHitTesting:0,fillRule:"nonzero"}),Za=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],KO=(0,ce.ev)((0,ce.ev)([],(0,ce.CR)(Za),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),Vx="data-",Fn=function(e){(0,ce.ZT)(t,e);function t(n){var r,i=e.call(this)||this;i.isCustomElement=!1,i.isMutationObserved=!1,i.activeAnimations=[],i.getClip=function(){return this.style.clipPath||null},i.config=n,i.config.interactive=(r=i.config.capture)!==null&&r!==void 0?r:i.config.interactive,i.id=i.config.id||"",i.name=i.config.name||"",(i.config.className||i.config.class)&&(i.className=i.config.className||i.config.class),i.nodeName=i.config.type||oi.GROUP,i.config.style=i.config.style||i.config.attrs||{},Object.assign(i.config.style,i.config.attrs),i.config.visible!=null&&(i.config.style.visibility=i.config.visible===!1?"hidden":"visible"),i.config.interactive!=null&&(i.config.style.pointerEvents=i.config.interactive===!1?"none":"auto"),Object.assign(i.parsedStyle,pi.enableCSSParsing?Xm:qO,i.config.initialParsedStyle),pi.enableCSSParsing&&Object.assign(i.attributes,Mp),i.initAttributes(i.config.style);var a=pi.globalThis.Proxy?pi.globalThis.Proxy:function(){};return pi.enableDataset&&(i.dataset=new a({},{get:function(s,l){var p="".concat(Vx).concat(YE(l));return s[p]!==void 0?s[p]:i.getAttribute(p)},set:function(s,l,p){return i.setAttribute("".concat(Vx).concat(YE(l)),p),!0}})),pi.enableStyleSyntax&&(i.style=new a({setProperty:function(s,l){i.setAttribute(s,l)},getPropertyValue:function(s){return i.getAttribute(s)},removeProperty:function(s){i.removeAttribute(s)},item:function(){return""}},{get:function(s,l){return s[l]!==void 0?s[l]:i.getAttribute(l)},set:function(s,l,p){return i.setAttribute(l,p),!0}})),i}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=(0,ce.pi)({},this.attributes);for(var a in i){var s=i[a];du(s)&&a!=="clipPath"&&a!=="offsetPath"&&a!=="textPath"&&(i[a]=s.cloneNode(n)),r&&(i[a]=r(a,s))}var l=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return l.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(p){if(!p.style.isMarker){var m=p.cloneNode(n);l.appendChild(m)}}),l},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};pi.enableCSSParsing&&(i.usedAttributes=KO);var a={};for(var s in n){var l=lx(s);a[l]=n[s]}pi.styleValueRegistry.processProperties(this,a,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,a){i===void 0&&(i=!1),a===void 0&&(a=!0);var s=lx(n);Io(r)||(i||r!==this.attributes[s])&&(this.internalSetAttribute(s,r,{memoize:a}),e.prototype.setAttribute.call(this,s,r))},t.prototype.internalSetAttribute=function(n,r,i){var a;i===void 0&&(i={});var s=this.renderable,l=this.attributes[n],p=this.parsedStyle[n];pi.styleValueRegistry.processProperties(this,(a={},a[n]=r,a),i),s.dirty=!0;var m=this.parsedStyle[n];this.isConnected&&(y0.relatedNode=this,y0.prevValue=l,y0.newValue=r,y0.attrName=n,y0.prevParsedValue=p,y0.newParsedValue=m,this.isMutationObserved?this.dispatchEvent(y0):(y0.target=this,this.ownerDocument.defaultView.dispatchEvent(y0,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,l,r,p,m)},t.prototype.getBBox=function(){var n=this.getBounds(),r=(0,ce.CR)(n.getMin(),2),i=r[0],a=r[1],s=(0,ce.CR)(n.getMax(),2),l=s[0],p=s[1];return new p0(i,a,l-i,p-a)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),pi.sceneGraphService.setOrigin(this,cc(n,r,i)),this},t.prototype.getOrigin=function(){return pi.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),pi.sceneGraphService.setPosition(this,cc(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),pi.sceneGraphService.setLocalPosition(this,cc(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),pi.sceneGraphService.translate(this,cc(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),pi.sceneGraphService.translateLocal(this,cc(n,r,i)),this},t.prototype.getPosition=function(){return pi.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return pi.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=cc(n,r,i)),pi.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=cc(n,r,i)),pi.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return pi.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return pi.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=(0,ce.CR)(zg(nr.create(),pi.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Tf(r)},t.prototype.getLocalEulerAngles=function(){var n=(0,ce.CR)(zg(nr.create(),pi.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Tf(r)},t.prototype.setEulerAngles=function(n){return pi.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return pi.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return(0,wa.Z)(r)&&(0,wa.Z)(i)?pi.sceneGraphService.rotateLocal(this,0,0,n):pi.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return(0,wa.Z)(r)&&(0,wa.Z)(i)?pi.sceneGraphService.rotate(this,0,0,n):pi.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,a){return pi.sceneGraphService.setRotation(this,n,r,i,a),this},t.prototype.setLocalRotation=function(n,r,i,a){return pi.sceneGraphService.setLocalRotation(this,n,r,i,a),this},t.prototype.setLocalSkew=function(n,r){return pi.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return pi.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return pi.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return pi.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return pi.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return pi.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return pi.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){pi.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,a=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return a?a.play(this,n,r):null},t.prototype.isVisible=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=(0,ce.CR)(r,2),s=a[0],l=a[1];return s?zo(s)?(Object.keys(s).forEach(function(p){n.setAttribute(p,s[p])}),this):r.length===2?(this.setAttribute(s,l),this):this.attributes[s]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=(0,ce.CR)(ni.getTranslation(nr.create(),r),2),a=i[0],s=i[1],l=(0,ce.CR)(ni.getScaling(nr.create(),r),2),p=l[0],m=l[1],y=ni.getRotation(Cn(),r),b=(0,ce.CR)(zg(nr.create(),y),3),E=b[0],O=b[2];return $y(E||O,a,s,p,m)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=(0,ce.CR)(Ap(n),5),i=r[0],a=r[1],s=r[2],l=r[3],p=r[4];this.setEulerAngles(p).setPosition(i,a).setLocalScale(s,l)},t.prototype.setLocalMatrix=function(n){var r=(0,ce.CR)(Ap(n),5),i=r[0],a=r[1],s=r[2],l=r[3],p=r[4];this.setLocalEulerAngles(p).setLocalPosition(i,a).setLocalScale(s,l)},t.prototype.show=function(){pi.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){pi.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.setClip=function(n){this.style.clipPath=n},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}(YO),Us={number:function(e){return new Ru(e)},percent:function(e){return new Ru(e,"%")},px:function(e){return new Ru(e,"px")},em:function(e){return new Ru(e,"em")},rem:function(e){return new Ru(e,"rem")},deg:function(e){return new Ru(e,"deg")},grad:function(e){return new Ru(e,"grad")},rad:function(e){return new Ru(e,"rad")},turn:function(e){return new Ru(e,"turn")},s:function(e){return new Ru(e,"s")},ms:function(e){return new Ru(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,a=e.syntax;pi.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:a})},registerLayout:function(e,t){pi.layoutRegistry.registerLayout(e,t)}},ts=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.CIRCLE,style:pi.enableCSSParsing?(0,ce.pi)({cx:"",cy:"",r:""},r):(0,ce.pi)({},r),initialParsedStyle:{anchor:[.5,.5],transformOrigin:pi.enableCSSParsing?null:[Yy,Yy]}},i))||this}return t}(Fn),K0=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,a=(0,ce._T)(n,["style"]);return r=e.call(this,(0,ce.pi)({style:pi.enableCSSParsing?(0,ce.pi)({x:"",y:""},i):(0,ce.pi)({},i)},a))||this,r.isCustomElement=!0,r}return t}(Fn),Ih=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.ELLIPSE,style:pi.enableCSSParsing?(0,ce.pi)({cx:"",cy:"",rx:"",ry:""},r):(0,ce.pi)({},r),initialParsedStyle:{anchor:[.5,.5],transformOrigin:pi.enableCSSParsing?null:[Yy,Yy]}},i))||this}return t}(Fn),Ao=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.GROUP,style:pi.enableCSSParsing?(0,ce.pi)({x:"",y:"",width:"",height:""},r):(0,ce.pi)({},r)},i))||this}return t}(Fn),wc=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,a=(0,ce._T)(n,["style"]);return r=e.call(this,(0,ce.pi)({type:oi.HTML,style:pi.enableCSSParsing?(0,ce.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,ce.pi)({},i)},a))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var n=this.parsedStyle,r=n.x,i=n.y,a=n.width,s=n.height;return new p0(r,i,a,s)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var n,r,i=this.getBoundingClientRect(),a=(r=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),s=new Al,l=i.left-((a==null?void 0:a.left)||0),p=i.top-((a==null?void 0:a.top)||0);return s.setMinMax([l,p,0],[l+i.width,p+i.height,0]),s},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=ni.invert(ni.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!Al.isEmpty(r)){var i=new Al;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(Fn),oh=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.IMAGE,style:pi.enableCSSParsing?(0,ce.pi)({x:"",y:"",img:"",width:"",height:""},r):(0,ce.pi)({},r)},i))||this}return t}(Fn),ll=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,a=(0,ce._T)(n,["style"]);r=e.call(this,(0,ce.pi)({type:oi.LINE,style:(0,ce.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a))||this,r.markerStartAngle=0,r.markerEndAngle=0;var s=r.parsedStyle,l=s.markerStart,p=s.markerEnd;return l&&du(l)&&(r.markerStartAngle=l.getLocalEulerAngles(),r.appendChild(l)),p&&du(p)&&(r.markerEndAngle=p.getLocalEulerAngles(),r.appendChild(p)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,a,s){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(a&&du(a)&&(this.markerStartAngle=0,a.remove()),s&&du(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"&&(a&&du(a)&&(this.markerEndAngle=0,a.remove()),s&&du(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,a=r.markerEnd,s=r.markerStartOffset,l=r.markerEndOffset,p=r.x1,m=r.x2,y=r.y1,b=r.y2,E=r.defX,O=r.defY,P=n?i:a;if(!(!P||!du(P))){var I=0,N,z,V,W,K,J;n?(V=p-E,W=y-O,N=m-p,z=b-y,K=s||0,J=this.markerStartAngle):(V=m-E,W=b-O,N=p-m,z=y-b,K=l||0,J=this.markerEndAngle),I=Math.atan2(z,N),P.setLocalEulerAngles(I*180/Math.PI+J),P.setLocalPosition(V+Math.cos(I)*K,W+Math.sin(I)*K)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,a=i.x1,s=i.y1,l=i.x2,p=i.y2,m=i.defX,y=i.defY,b=Zf(a,s,l,p,n),E=b.x,O=b.y,P=nr.transformMat4(nr.create(),nr.fromValues(E-m,O-y,0),r?this.getWorldTransform():this.getLocalTransform());return new Hc(P[0],P[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,a=n.x2,s=n.y2;return Mh(r,i,a,s)},t}(Fn),pu=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,a=(0,ce._T)(n,["style"]);r=e.call(this,(0,ce.pi)({type:oi.PATH,style:pi.enableCSSParsing?(0,ce.pi)({path:"",miterLimit:""},i):(0,ce.pi)({},i),initialParsedStyle:pi.enableCSSParsing?null:{miterLimit:4,path:(0,ce.pi)({},QE)}},a))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var s=r.parsedStyle,l=s.markerStart,p=s.markerEnd,m=s.markerMid;return l&&du(l)&&(r.markerStartAngle=l.getLocalEulerAngles(),r.appendChild(l)),m&&du(m)&&r.placeMarkerMid(m),p&&du(p)&&(r.markerEndAngle=p.getLocalEulerAngles(),r.appendChild(p)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,a,s){n==="path"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(a&&du(a)&&(this.markerStartAngle=0,a.remove()),s&&du(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"?(a&&du(a)&&(this.markerEndAngle=0,a.remove()),s&&du(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(s)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,a=r.markerEnd,s=r.markerStartOffset,l=r.markerEndOffset,p=r.defX,m=r.defY,y=n?i:a;if(!(!y||!du(y))){var b=0,E,O,P,I,N,z;if(n){var V=(0,ce.CR)(this.getStartTangent(),2),W=V[0],K=V[1];P=K[0]-p,I=K[1]-m,E=W[0]-K[0],O=W[1]-K[1],N=s||0,z=this.markerStartAngle}else{var J=(0,ce.CR)(this.getEndTangent(),2),W=J[0],K=J[1];P=K[0]-p,I=K[1]-m,E=W[0]-K[0],O=W[1]-K[1],N=l||0,z=this.markerEndAngle}b=Math.atan2(O,E),y.setLocalEulerAngles(b*180/Math.PI+z),y.setLocalPosition(P+Math.cos(b)*N,I+Math.sin(b)*N)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle,i=r.path.segments,a=r.defX,s=r.defY;if(this.markerMidList.forEach(function(E){E.remove()}),n&&du(n))for(var l=1;l<i.length-1;l++){var p=(0,ce.CR)(i[l].currentPoint,2),m=p[0],y=p[1],b=l===1?n:n.cloneNode(!0);this.markerMidList.push(b),this.appendChild(b),b.setLocalPosition(m-a,y-s)}},t.prototype.getTotalLength=function(){return bx(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,a=i.defX,s=i.defY,l=i.path.absolutePath,p=xs(l,n),m=p.x,y=p.y,b=nr.transformMat4(nr.create(),nr.fromValues(m-a,y-s,0),r?this.getWorldTransform():this.getLocalTransform());return new Hc(b[0],b[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*bx(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.path.segments,r=[];if(n.length>1){var i=n[0].currentPoint,a=n[1].currentPoint,s=n[1].startTangent;r=[],s?(r.push([i[0]-s[0],i[1]-s[1]]),r.push([i[0],i[1]])):(r.push([a[0],a[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.path.segments,r=n.length,i=[];if(r>1){var a=n[r-2].currentPoint,s=n[r-1].currentPoint,l=n[r-1].endTangent;i=[],l?(i.push([s[0]-l[0],s[1]-l[1]]),i.push([s[0],s[1]])):(i.push([a[0],a[1]]),i.push([s[0],s[1]]))}return i},t}(Fn),Cl=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,a=(0,ce._T)(n,["style"]);r=e.call(this,(0,ce.pi)({type:oi.POLYGON,style:pi.enableCSSParsing?(0,ce.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,ce.pi)({},i),initialParsedStyle:pi.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var s=r.parsedStyle,l=s.markerStart,p=s.markerEnd,m=s.markerMid;return l&&du(l)&&(r.markerStartAngle=l.getLocalEulerAngles(),r.appendChild(l)),m&&du(m)&&r.placeMarkerMid(m),p&&du(p)&&(r.markerEndAngle=p.getLocalEulerAngles(),r.appendChild(p)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,a,s){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(a&&du(a)&&(this.markerStartAngle=0,a.remove()),s&&du(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"?(a&&du(a)&&(this.markerEndAngle=0,a.remove()),s&&du(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(s)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,a=r.markerEnd,s=r.markerStartOffset,l=r.markerEndOffset,p=r.points,m=r.defX,y=r.defY,b=(p||{}).points,E=n?i:a;if(!(!E||!du(E)||!b)){var O=0,P,I,N,z,V,W;if(N=b[0][0]-m,z=b[0][1]-y,n)P=b[1][0]-b[0][0],I=b[1][1]-b[0][1],V=s||0,W=this.markerStartAngle;else{var K=b.length;this.parsedStyle.isClosed?(P=b[K-1][0]-b[0][0],I=b[K-1][1]-b[0][1]):(N=b[K-1][0]-m,z=b[K-1][1]-y,P=b[K-2][0]-b[K-1][0],I=b[K-2][1]-b[K-1][1]),V=l||0,W=this.markerEndAngle}O=Math.atan2(I,P),E.setLocalEulerAngles(O*180/Math.PI+W),E.setLocalPosition(N+Math.cos(O)*V,z+Math.sin(O)*V)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle,i=r.points,a=r.defX,s=r.defY,l=(i||{}).points;if(this.markerMidList.forEach(function(E){E.remove()}),this.markerMidList=[],n&&du(n)&&l)for(var p=1;p<(this.parsedStyle.isClosed?l.length:l.length-1);p++){var m=l[p][0]-a,y=l[p][1]-s,b=p===1?n:n.cloneNode(!0);this.markerMidList.push(b),this.appendChild(b),b.setLocalPosition(m,y)}},t}(Fn),yu=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.POLYLINE,style:pi.enableCSSParsing?(0,ce.pi)({points:"",miterLimit:"",isClosed:!1},r):(0,ce.pi)({},r),initialParsedStyle:pi.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return this.parsedStyle.points.totalLength},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,a=i.defX,s=i.defY,l=i.points,p=l.points,m=l.segments,y=0,b=0;m.forEach(function(N,z){n>=N[0]&&n<=N[1]&&(y=(n-N[0])/(N[1]-N[0]),b=z)});var E=Zf(p[b][0],p[b][1],p[b+1][0],p[b+1][1],y),O=E.x,P=E.y,I=nr.transformMat4(nr.create(),nr.fromValues(O-a,P-s,0),r?this.getWorldTransform():this.getLocalTransform());return new Hc(I[0],I[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(Cl),sh=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.RECT,style:pi.enableCSSParsing?(0,ce.pi)({x:"",y:"",width:"",height:"",radius:""},r):(0,ce.pi)({},r)},i))||this}return t}(Fn),Hf=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({type:oi.TEXT,style:pi.enableCSSParsing?(0,ce.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):(0,ce.pi)({fill:"black"},r),initialParsedStyle:pi.enableCSSParsing?{}:{x:0,y:0,fontSize:16,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",lineHeight:0,letterSpacing:0,textBaseline:"alphabetic",textAlign:"start",wordWrap:!1,wordWrapWidth:0,leading:0,dx:0,dy:0}},i))||this}return t.prototype.getComputedTextLength=function(){var n;return((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return!!this.parsedStyle.isOverflowing},t}(Fn),DS=function(){function e(){this.registry={},this.define(oi.CIRCLE,ts),this.define(oi.ELLIPSE,Ih),this.define(oi.RECT,sh),this.define(oi.IMAGE,oh),this.define(oi.LINE,ll),this.define(oi.GROUP,Ao),this.define(oi.PATH,pu),this.define(oi.POLYGON,Cl),this.define(oi.POLYLINE,yu),this.define(oi.TEXT,Hf),this.define(oi.HTML,wc)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),ys=function(e){(0,ce.ZT)(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new pi.AnimationTimeline(n)}catch(i){}var r={};return Rx.forEach(function(i){var a=i.n,s=i.inh,l=i.d;s&&l&&(r[a]=Zm(l)?l(oi.GROUP):l)}),n.documentElement=new Ao({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?Hf:Ao);var a=new i(r);return a.ownerDocument=this,a},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(Mu)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},t.prototype.elementsFromBBox=function(n,r,i,a){var s=this.defaultView.context.rBushRoot,l=s.search({minX:n,minY:r,maxX:i,maxY:a}),p=[];return l.forEach(function(m){var y=m.displayObject,b=y.parsedStyle.pointerEvents,E=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(b);(!E||E&&y.isVisible())&&!y.isCulled()&&y.isInteractive()&&p.push(y)}),p.sort(function(m,y){return y.sortable.renderOrder-m.sortable.renderOrder}),p},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),a=i.x,s=i.y,l=this.defaultView.getConfig(),p=l.width,m=l.height;if(a<0||s<0||a>p||s>m)return null;var y=this.defaultView.viewport2Client({x:a,y:s}),b=y.x,E=y.y,O=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:a,viewportY:s,clientX:b,clientY:E},picked:[]}).picked;return O&&O[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return(0,ce.mG)(this,void 0,void 0,function(){var i,a,s,l,p,m,y,b,E,O;return(0,ce.Jh)(this,function(P){switch(P.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),a=i.x,s=i.y,l=this.defaultView.getConfig(),p=l.width,m=l.height,a<0||s<0||a>p||s>m?[2,null]:(y=this.defaultView.viewport2Client({x:a,y:s}),b=y.x,E=y.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:a,viewportY:s,clientX:b,clientY:E},picked:[]})]);case 1:return O=P.sent().picked,[2,O&&O[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),a=i.x,s=i.y,l=this.defaultView.getConfig(),p=l.width,m=l.height;if(a<0||s<0||a>p||s>m)return[];var y=this.defaultView.viewport2Client({x:a,y:s}),b=y.x,E=y.y,O=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:a,viewportY:s,clientX:b,clientY:E},picked:[]}).picked;return O[O.length-1]!==this.documentElement&&O.push(this.documentElement),O},t.prototype.elementsFromPoint=function(n,r){return(0,ce.mG)(this,void 0,void 0,function(){var i,a,s,l,p,m,y,b,E,O;return(0,ce.Jh)(this,function(P){switch(P.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),a=i.x,s=i.y,l=this.defaultView.getConfig(),p=l.width,m=l.height,a<0||s<0||a>p||s>m?[2,[]]:(y=this.defaultView.viewport2Client({x:a,y:s}),b=y.x,E=y.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:a,viewportY:s,clientX:b,clientY:E},picked:[]})]);case 1:return O=P.sent().picked,O[O.length-1]!==this.documentElement&&O.push(this.documentElement),[2,O]}})})},t.prototype.appendChild=function(n,r){throw new Error(v0)},t.prototype.insertBefore=function(n,r){throw new Error(v0)},t.prototype.removeChild=function(n,r){throw new Error(v0)},t.prototype.replaceChild=function(n,r,i){throw new Error(v0)},t.prototype.append=function(){throw new Error(v0)},t.prototype.prepend=function(){throw new Error(v0)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(Vf),uh=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,a=this.strategies;r.hooks.cull.tap(e.tag,function(s){if(s){var l=s.cullable;return a.length===0?l.visible=i.unculledEntities.indexOf(s.entity)>-1:l.visible=a.every(function(p){return p.isVisible(n,s)}),!s.isCulled()&&s.isVisible()?s:(s.dispatchEvent(new Ku(Ro.CULLED)),null)}return s}),r.hooks.afterRender.tap(e.tag,function(s){s.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),Af=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new RS(null),this.rootWheelEvent=new zx(null),this.onPointerMove=function(n){var r,i,a,s,l=(s=(a=t.context.renderingContext.root)===null||a===void 0?void 0:a.ownerDocument)===null||s===void 0?void 0:s.defaultView;if(!(l.supportsTouchEvents&&n.pointerType==="touch")){var p=t.normalizeToPointerEvent(n,l);try{for(var m=(0,ce.XA)(p),y=m.next();!y.done;y=m.next()){var b=y.value,E=t.bootstrapEvent(t.rootPointerEvent,b,l,n);t.context.eventService.mapEvent(E)}}catch(O){r={error:O}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,a,s,l=(s=(a=t.context.renderingContext.root)===null||a===void 0?void 0:a.ownerDocument)===null||s===void 0?void 0:s.defaultView,p=t.normalizeToPointerEvent(n,l);try{for(var m=(0,ce.XA)(p),y=m.next();!y.done;y=m.next()){var b=y.value,E=t.bootstrapEvent(t.rootPointerEvent,b,l,n);t.context.eventService.mapEvent(E)}}catch(O){r={error:O}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(a){var s=n.context.renderingService.hooks.pickSync.call({position:a,picked:[],topmost:!0}).picked;return s[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(a){var s=n.normalizeWheelEvent(a);n.context.eventService.mapEvent(s)}),r.hooks.pointerDown.tap(e.tag,function(a){var s,l;if(!(i.supportsTouchEvents&&a.pointerType==="touch")){var p=n.normalizeToPointerEvent(a,i);if(n.autoPreventDefault&&p[0].isNormalized){var m=a.cancelable||!("cancelable"in a);m&&a.preventDefault()}try{for(var y=(0,ce.XA)(p),b=y.next();!b.done;b=y.next()){var E=b.value,O=n.bootstrapEvent(n.rootPointerEvent,E,i,a);n.context.eventService.mapEvent(O)}}catch(P){s={error:P}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(a){var s,l;if(!(i.supportsTouchEvents&&a.pointerType==="touch")){var p=n.context.contextService.getDomElement(),m="outside";try{m=p&&a.target&&a.target!==p&&p.contains&&!p.contains(a.target)?"outside":""}catch(I){}var y=n.normalizeToPointerEvent(a,i);try{for(var b=(0,ce.XA)(y),E=b.next();!E.done;E=b.next()){var O=E.value,P=n.bootstrapEvent(n.rootPointerEvent,O,i,a);P.type+=m,n.context.eventService.mapEvent(P)}}catch(I){s={error:I}}finally{try{E&&!E.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(a){var s,l,p=n.normalizeToPointerEvent(a,i);try{for(var m=(0,ce.XA)(p),y=m.next();!y.done;y=m.next()){var b=y.value,E=n.bootstrapEvent(n.rootPointerEvent,b,i,a);n.context.eventService.mapEvent(E)}}catch(O){s={error:O}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.getViewportXY=function(t){var n,r,i=t.offsetX,a=t.offsetY,s=t.clientX,l=t.clientY;if(this.context.config.supportsCSSTransform&&!(0,wa.Z)(i)&&!(0,wa.Z)(a))n=i,r=a;else{var p=this.context.eventService.client2Viewport(new Hc(s,l));n=p.x,r=p.y}return{x:n,y:r}},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var a=this.getViewportXY(n),s=a.x,l=a.y;t.viewport.x=s,t.viewport.y=l;var p=this.context.eventService.viewport2Canvas(t.viewport),m=p.x,y=p.y;return t.canvas.x=m,t.canvas.y=y,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=gO[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.getViewportXY(t),i=r.x,a=r.y;n.viewport.x=i,n.viewport.y=a;var s=this.context.eventService.viewport2Canvas(n.viewport),l=s.x,p=s.y;return n.canvas.x=l,n.canvas.y=p,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=Dx.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var a=t.changedTouches[i];Io(a.button)&&(a.button=0),Io(a.buttons)&&(a.buttons=1),Io(a.isPrimary)&&(a.isPrimary=t.touches.length===1&&t.type==="touchstart"),Io(a.width)&&(a.width=a.radiusX||1),Io(a.height)&&(a.height=a.radiusY||1),Io(a.tiltX)&&(a.tiltX=0),Io(a.tiltY)&&(a.tiltY=0),Io(a.pointerType)&&(a.pointerType="touch"),Io(a.pointerId)&&(a.pointerId=a.identifier||0),Io(a.pressure)&&(a.pressure=a.force||.5),Io(a.twist)&&(a.twist=0),Io(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=t.type,r.push(a)}else if(n.isMouseEvent(t)){var s=t;Io(s.isPrimary)&&(s.isPrimary=!0),Io(s.width)&&(s.width=1),Io(s.height)&&(s.height=1),Io(s.tiltX)&&(s.tiltX=0),Io(s.tiltY)&&(s.tiltY=0),Io(s.pointerType)&&(s.pointerType="mouse"),Io(s.pointerId)&&(s.pointerId=mO),Io(s.pressure)&&(s.pressure=.5),Io(s.twist)&&(s.twist=0),Io(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,r.push(s)}else r.push(t);return r},e.tag="Event",e}(),zl=[oi.CIRCLE,oi.ELLIPSE,oi.IMAGE,oi.RECT,oi.LINE,oi.POLYLINE,oi.POLYGON,oi.TEXT,oi.PATH,oi.HTML],w5=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,a=n.cullable;if(!a.enable)return!0;var s=n.getRenderBounds();if(Al.isEmpty(s))return!1;var l=t.getFrustum(),p=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,s,p||Cp.INDETERMINATE,l.planes),a.visible=a.visibilityPlaneMask!==Cp.OUTSIDE,a.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===Cp.OUTSIDE||r===Cp.INSIDE)return r;for(var a=Cp.INSIDE,s=zl.indexOf(t.nodeName)>-1,l=0,p=i.length;l<p;++l){var m=1<<l;if(r&m&&!(s&&(l===4||l===5))){var y=i[l],b=y.normal,E=y.distance;if(nr.dot(b,n.getPositiveFarPoint(i[l]))+E<0)return Cp.OUTSIDE;nr.dot(b,n.getNegativeFarPoint(i[l]))+E<0&&(a|=m)}}return a},e}(),Ul=function(){function e(){this.toSync=new Set}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,a=t.rBushRoot,s=i.root.ownerDocument.defaultView;this.rBush=a;var l=function(b){var E=b.target;E.renderable.dirty=!0,r.dirtify()},p=function(b){var E=b.detail.affectChildren,O=b.target;E&&O.forEach(function(I){n.toSync.add(I)});for(var P=O;P;)P.renderable&&n.toSync.add(P),P=P.parentElement;r.dirtify()},m=function(b){var E=b.target;pi.enableSizeAttenuation&&pi.styleValueRegistry.updateSizeAttenuation(E,s.getCamera().getZoom()),pi.enableCSSParsing&&pi.styleValueRegistry.recalc(E),pi.sceneGraphService.dirtifyToRoot(E),r.dirtify()},y=function(b){var E=b.target,O=E.rBushNode;O.aabb&&n.rBush.remove(O.aabb),n.toSync.delete(E),pi.sceneGraphService.dirtifyToRoot(E),r.dirtify()};r.hooks.init.tap(e.tag,function(){s.addEventListener(Ro.MOUNTED,m),s.addEventListener(Ro.UNMOUNTED,y),s.addEventListener(Ro.ATTR_MODIFIED,l),s.addEventListener(Ro.BOUNDS_CHANGED,p)}),r.hooks.destroy.tap(e.tag,function(){s.removeEventListener(Ro.MOUNTED,m),s.removeEventListener(Ro.UNMOUNTED,y),s.removeEventListener(Ro.ATTR_MODIFIED,l),s.removeEventListener(Ro.BOUNDS_CHANGED,p),n.toSync.clear()}),r.hooks.endFrame.tap(e.tag,function(){n.syncRTree()})},e.prototype.syncRTree=function(){var t=this,n=[];Array.from(this.toSync).filter(function(r){return r.isConnected}).forEach(function(r){var i=r.rBushNode;i&&i.aabb&&t.rBush.remove(i.aabb);var a=r.getRenderBounds();if(a){var s=(0,ce.CR)(a.getMin(),2),l=s[0],p=s[1],m=(0,ce.CR)(a.getMax(),2),y=m[0],b=m[1];i.aabb||(i.aabb={}),i.aabb.displayObject=r,i.aabb.minX=l,i.aabb.minY=p,i.aabb.maxX=y,i.aabb.maxY=b}i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY)&&n.push(i.aabb)}),this.rBush.load(n),n.length=0,this.toSync.clear()},e.tag="Prepare",e}();function _0(e){return!!e.document}var Cf;(function(e){e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged"})(Cf||(Cf={}));var i_=500,Mi=.1,qa=1e3,NS=new Ku(Ro.MOUNTED),Ra=new Ku(Ro.UNMOUNTED),yo=new Ku(Cf.BEFORE_RENDER),yr=new Ku(Cf.RERENDER),D1=new Ku(Cf.AFTER_RENDER),sv=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this)||this;r.Element=Fn,r.inited=!1,r.context={},r.document=new ys,r.document.defaultView=r,r.customElements=new DS;var i=n.container,a=n.canvas,s=n.offscreenCanvas,l=n.width,p=n.height,m=n.devicePixelRatio,y=n.renderer,b=n.background,E=n.cursor,O=n.document,P=n.requestAnimationFrame,I=n.cancelAnimationFrame,N=n.createImage,z=n.supportsPointerEvents,V=n.supportsTouchEvents,W=n.supportsCSSTransform,K=n.supportsMutipleCanvasesInOneContainer,J=n.useNativeClickEvent,oe=n.alwaysTriggerPointerEventOnCanvas,Te=n.isTouchEvent,Re=n.isMouseEvent;K||bS(i,r);var We=l,ut=p,ct=m;return a&&(ct=m||e_&&window.devicePixelRatio||1,ct=ct>=1?Math.ceil(ct):1,We=l||pO(a)||a.width/ct,ut=p||vO(a)||a.height/ct),s&&(pi.offscreenCanvas=s),r.devicePixelRatio=ct,r.requestAnimationFrame=P!=null?P:CS.bind(pi.globalThis),r.cancelAnimationFrame=I!=null?I:OS.bind(pi.globalThis),r.supportsTouchEvents=V!=null?V:"ontouchstart"in pi.globalThis,r.supportsPointerEvents=z!=null?z:!!pi.globalThis.PointerEvent,r.isTouchEvent=Te!=null?Te:function(Ft){return r.supportsTouchEvents&&Ft instanceof pi.globalThis.TouchEvent},r.isMouseEvent=Re!=null?Re:function(Ft){return!pi.globalThis.MouseEvent||Ft instanceof pi.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(Ft instanceof pi.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:a,width:We,height:ut,renderer:y,offscreenCanvas:s,devicePixelRatio:ct,cursor:E||"default",background:b||"transparent",createImage:N,document:O,supportsCSSTransform:W,useNativeClickEvent:J,alwaysTriggerPointerEventOnCanvas:oe}),r.initDefaultCamera(We,ut,y.clipSpaceNearZ),r.initRenderer(y,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var a=this,s=new pi.CameraContribution;s.clipSpaceNearZ=i,s.setType(gu.EXPLORING,Um.DEFAULT).setPosition(n/2,r/2,i_).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,Mi,qa),s.canvas=this,s.eventEmitter.on(E1.UPDATED,function(){a.context.renderingContext.renderReasons.add(Y0.CAMERA_CHANGED),pi.enableSizeAttenuation&&a.getConfig().renderer.getConfig().enableSizeAttenuation&&a.updateSizeAttenuation()}),this.context.camera=s},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){pi.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Ku(Cf.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var a=this.getRoot();this.unmountChildren(a),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Ku(Cf.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var a=this.context.camera,s=a.getProjectionMode();a.setPosition(n/2,r/2,i_).setFocalPoint(n/2,r/2,0),s===Rh.ORTHOGRAPHIC?a.setOrthographic(n/-2,n/2,r/2,r/-2,a.getNear(),a.getFar()):a.setAspect(n/r),this.dispatchEvent(new Ku(Cf.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(){var n=this;this.dispatchEvent(yo);var r=this.getRenderingService();r.render(this.getConfig(),function(){n.dispatchEvent(yr)}),this.dispatchEvent(D1)},t.prototype.run=function(){var n=this,r=function(){n.render(),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Bm,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new Af,new Ul,new uh([new w5])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,ce.pi)((0,ce.pi)({},pi),this.context)),this.context.renderingService=new jO(pi,this.context),this.context.eventService=new S5(pi,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var a=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){a.inited=!0,r?(i?a.requestAnimationFrame(function(){a.dispatchEvent(new Ku(Cf.READY))}):a.dispatchEvent(new Ku(Cf.READY)),a.readyPromise&&a.resolveReadyPromise()):a.dispatchEvent(new Ku(Cf.RENDERER_CHANGED)),r||a.getRoot().forEach(function(s){var l=s.renderable;l&&(l.renderBoundsDirty=!0,l.boundsDirty=!0,l.dirty=!0)}),a.mountChildren(a.getRoot()),n.getConfig().enableAutoRendering&&a.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(a){a.context=r.context,a.init(pi)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,ce.ev)([],(0,ce.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(a){a.destroy(pi)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(Ra):(Ra.target=n,this.dispatchEvent(Ra,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(NS):(NS.target=n,this.dispatchEvent(NS,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(zO),Xg=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=h0(r),this.relAzimuth=h0(n),this.relRoll=h0(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===gu.EXPLORING){var a=gn(Cn(),[1,0,0],Ou((this.rotateWorld?1:-1)*this.relElevation)),s=gn(Cn(),[0,1,0],Ou((this.rotateWorld?1:-1)*this.relAzimuth)),l=gn(Cn(),[0,0,1],Ou(this.relRoll)),p=ti(Cn(),s,a);p=ti(Cn(),p,l);var m=ni.fromQuat(ni.create(),p);ni.translate(this.matrix,this.matrix,[0,0,-this.distance]),ni.multiply(this.matrix,this.matrix,m),ni.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===gu.ORBITING||this.type===gu.EXPLORING?this._getPosition():this.type===gu.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=cc(n,r,0),a=nr.clone(this.position);return nr.add(a,a,nr.scale(nr.create(),this.right,i[0])),nr.add(a,a,nr.scale(nr.create(),this.up,i[1])),this._setPosition(a),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=nr.clone(this.position),a=n*this.dollyingStep,s=this.distance+n*this.dollyingStep;return a=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,i[0]+=a*r[0],i[1]+=a*r[1],i[2]+=a*r[2],this._setPosition(i),this.type===gu.ORBITING||this.type===gu.EXPLORING?this._getDistance():this.type===gu.TRACKING&&nr.add(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,a,s,l;r===void 0&&(r={});var p=r.position,m=p===void 0?this.position:p,y=r.focalPoint,b=y===void 0?this.focalPoint:y,E=r.roll,O=r.zoom,P=new pi.CameraContribution;P.setType(this.type,void 0),P.setPosition(m[0],(i=m[1])!==null&&i!==void 0?i:this.position[1],(a=m[2])!==null&&a!==void 0?a:this.position[2]),P.setFocalPoint(b[0],(s=b[1])!==null&&s!==void 0?s:this.focalPoint[1],(l=b[2])!==null&&l!==void 0?l:this.focalPoint[2]),P.setRoll(E!=null?E:this.roll),P.setZoom(O!=null?O:this.zoom);var I={name:n,matrix:ni.clone(P.getWorldTransform()),right:nr.clone(P.right),up:nr.clone(P.up),forward:nr.clone(P.forward),position:nr.clone(P.getPosition()),focalPoint:nr.clone(P.getFocalPoint()),distanceVector:nr.clone(P.getDistanceVector()),distance:P.getDistance(),dollyingStep:P.getDollyingStep(),azimuth:P.getAzimuth(),elevation:P.getElevation(),roll:P.getRoll(),relAzimuth:P.relAzimuth,relElevation:P.relElevation,relRoll:P.relRoll,zoom:P.getZoom()};return this.landmarks.push(I),I},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var a=Bu(n)?this.landmarks.find(function(ut){return ut.name===n}):n;if(a){var s=(0,Yl.Z)(r)?{duration:r}:r,l=s.easing,p=l===void 0?"linear":l,m=s.duration,y=m===void 0?100:m,b=s.easingFunction,E=b===void 0?void 0:b,O=s.onfinish,P=O===void 0?void 0:O,I=s.onframe,N=I===void 0?void 0:I,z=.01;if(y===0){this.syncFromLandmark(a),P&&P();return}this.cancelLandmarkAnimation();var V=a.position,W=a.focalPoint,K=a.zoom,J=a.roll,oe=E||pi.EasingFunction(p),Te,Re=function(){i.setFocalPoint(W),i.setPosition(V),i.setRoll(J),i.setZoom(K),i.computeMatrix(),i.triggerUpdate(),P&&P()},We=function(ut){Te===void 0&&(Te=ut);var ct=ut-Te;if(ct>y){Re();return}var Ft=oe(ct/y),ft=nr.create(),St=nr.create(),Mt=1,Nt=0;nr.lerp(ft,i.focalPoint,W,Ft),nr.lerp(St,i.position,V,Ft),Nt=i.roll*(1-Ft)+J*Ft,Mt=i.zoom*(1-Ft)+K*Ft,i.setFocalPoint(ft),i.setPosition(St),i.setRoll(Nt),i.setZoom(Mt);var tn=nr.dist(ft,W)+nr.dist(St,V);if(tn<=z&&K==null&&J==null){Re();return}i.computeMatrix(),i.triggerUpdate(),ct<y&&(N&&N(Ft),i.landmarkAnimationID=i.canvas.requestAnimationFrame(We))};this.canvas.requestAnimationFrame(We)}},t.prototype.syncFromLandmark=function(n){this.matrix=ni.copy(this.matrix,n.matrix),this.right=nr.copy(this.right,n.right),this.up=nr.copy(this.up,n.up),this.forward=nr.copy(this.forward,n.forward),this.position=nr.copy(this.position,n.position),this.focalPoint=nr.copy(this.focalPoint,n.focalPoint),this.distanceVector=nr.copy(this.distanceVector,n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance,this.zoom=n.zoom},t}(jm);pi.CameraContribution=Xg;var Hx=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),BS=0,a_=new WeakMap,QO=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],a=US(i,t);if(a){n[r-1]=a;return}}else T5(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(Ro.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(Ro.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(Ro.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(Ro.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(Ro.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(Ro.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=a_.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case Ro.ATTR_MODIFIED:var i=t.attrName,a=t.relatedNode.namespaceURI;r=t.target,n=Yo("attributes",r),n.attributeName=i,n.attributeNamespace=a;var s=t.attrChange===Op.ADDITION?null:t.prevValue;s_(r,function(E){if(E.attributes&&!(E.attributeFilter&&E.attributeFilter.length&&E.attributeFilter.indexOf(i)===-1&&E.attributeFilter.indexOf(a)===-1))return E.attributeOldValue?Ym(s):n});break;case Ro.REMOVED:case Ro.INSERTED:r=t.relatedNode;var l=t.target,p=void 0,m=void 0;t.type===Ro.INSERTED?(p=[l],m=[]):(p=[],m=[l]);var y=l.previousSibling,b=l.nextSibling;n=Yo("childList",r),n.addedNodes=p,n.removedNodes=m,n.previousSibling=y,n.nextSibling=b,s_(r,function(E){if(E.childList)return n})}FS()},e}(),$U=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=BS++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=a_.get(t);r||a_.set(t,r=[]);for(var i,a=0;a<r.length;a++)if(r[a].observer===this){i=r[a],i.removeListeners(),i.options=n;break}i||(i=new QO(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=a_.get(n),i=0;i<r.length;i++){var a=r[i];if(a.observer===t){a.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),Wx,Bv;function Yo(e,t){return Wx=new Hx(e,t)}function Ym(e){return Bv||(Bv=Hx.copy(Wx),Bv.oldValue=e,Bv)}function FS(){Wx=Bv=void 0}function zS(e){return e===Bv||e===Wx}function US(e,t){return e===t?e:Bv&&zS(e)?Bv:null}function o_(e){e.nodes.forEach(function(t){var n=a_.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function s_(e,t){for(var n=e;n;n=n.parentNode){var r=a_.get(n);if(r)for(var i=0;i<r.length;i++){var a=r[i],s=a.options;if(!(n!==e&&!s.subtree)){var l=t(s);l&&a.enqueue(l)}}}}var jS=!1,$x=[];function T5(e){$x.push(e),jS||(jS=!0,typeof pi.globalThis!="undefined"?pi.globalThis.setTimeout(Q0):Q0())}function Q0(){jS=!1;var e=$x;$x=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();o_(n),r.length&&(n.callback(r,n),t=!0)}),t&&Q0()}var ZS=function(e){(0,ce.ZT)(t,e);function t(n,r,i,a){var s=e.call(this,n)||this;return s.currentTime=i,s.timelineTime=a,s.target=r,s.type="finish",s.bubbles=!1,s.currentTarget=r,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=i,s.timelineTime=a,s}return t}(Fx),A5=0,JO=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(A5++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new ZS(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(Mu)},e.prototype.addEventListener=function(t,n,r){throw new Error(Mu)},e.prototype.removeEventListener=function(t,n,r){throw new Error(Mu)},e.prototype.dispatchEvent=function(t){throw new Error(Mu)},e.prototype.commitStyles=function(){throw new Error(Mu)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new ZS(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new ZS(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),C5=4,O5=.001,M5=1e-7,N1=10,Fv=11,B1=1/(Fv-1),R5=typeof Float32Array=="function",u_=function(e,t){return 1-3*t+3*e},e3=function(e,t){return 3*t-6*e},VS=function(e){return 3*e},Gx=function(e,t,n){return((u_(t,n)*e+e3(t,n))*e+VS(t))*e},t3=function(e,t,n){return 3*u_(t,n)*e*e+2*e3(t,n)*e+VS(t)},n3=function(e,t,n,r,i){var a,s,l=0;do s=t+(n-t)/2,a=Gx(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>M5&&++l<N1);return s},r3=function(e,t,n,r){for(var i=0;i<C5;++i){var a=t3(t,n,r);if(a===0)return t;var s=Gx(t,n,r)-e;t-=s/a}return t},Xx=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(l){return l};for(var i=R5?new Float32Array(Fv):new Array(Fv),a=0;a<Fv;++a)i[a]=Gx(a*B1,e,n);var s=function(l){for(var p=0,m=1,y=Fv-1;m!==y&&i[m]<=l;++m)p+=B1;--m;var b=(l-i[m])/(i[m+1]-i[m]),E=p+b*B1,O=t3(E,e,n);return O>=O5?r3(l,E,e,n):O===0?E:n3(l,p,p+B1,e,n)};return function(l){return l===0||l===1?l:Gx(s(l),t,r)}},P5=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},l_=function(e){return Math.pow(e,2)},qm=function(e){return Math.pow(e,3)},c_=function(e){return Math.pow(e,4)},Yg=function(e){return Math.pow(e,5)},F1=function(e){return Math.pow(e,6)},b0=function(e){return 1-Math.cos(e*Math.PI/2)},z1=function(e){return 1-Math.sqrt(1-e*e)},f_=function(e){return e*e*(3*e-2)},zv=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},U1=function(e,t){t===void 0&&(t=[]);var n=(0,ce.CR)(t,2),r=n[0],i=r===void 0?1:r,a=n[1],s=a===void 0?.5:a,l=(0,al.Z)(Number(i),1,10),p=(0,al.Z)(Number(s),.1,2);return e===0||e===1?e:-l*Math.pow(2,10*(e-1))*Math.sin((e-1-p/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/p)},j1=function(e,t,n){t===void 0&&(t=[]);var r=(0,ce.CR)(t,4),i=r[0],a=i===void 0?1:i,s=r[1],l=s===void 0?100:s,p=r[2],m=p===void 0?10:p,y=r[3],b=y===void 0?0:y;a=(0,al.Z)(a,.1,1e3),l=(0,al.Z)(l,.1,1e3),m=(0,al.Z)(m,.1,1e3),b=(0,al.Z)(b,.1,1e3);var E=Math.sqrt(l/a),O=m/(2*Math.sqrt(l*a)),P=O<1?E*Math.sqrt(1-O*O):0,I=1,N=O<1?(O*E+-b)/P:-b+E,z=n?n*e/1e3:e;return O<1?z=Math.exp(-z*O*E)*(I*Math.cos(P*z)+N*Math.sin(P*z)):z=(I+N*z)*Math.exp(-z*E),e===0||e===1?e:1-z},HS=function(e,t){t===void 0&&(t=[]);var n=(0,ce.CR)(t,2),r=n[0],i=r===void 0?10:r,a=n[1],s=a=="start"?Math.ceil:Math.floor;return s((0,al.Z)(e,0,1)*i)/i},Yx=function(e,t){t===void 0&&(t=[]);var n=(0,ce.CR)(t,4),r=n[0],i=n[1],a=n[2],s=n[3];return Xx(r,i,a,s)(e)},uv=Xx(.42,0,1,1),lh=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},Rp=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},qd=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},WS={steps:HS,"step-start":function(e){return HS(e,[1,"start"])},"step-end":function(e){return HS(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":Yx,ease:function(e){return Yx(e,[.25,.1,.25,1])},in:uv,out:lh(uv),"in-out":Rp(uv),"out-in":qd(uv),"in-quad":l_,"out-quad":lh(l_),"in-out-quad":Rp(l_),"out-in-quad":qd(l_),"in-cubic":qm,"out-cubic":lh(qm),"in-out-cubic":Rp(qm),"out-in-cubic":qd(qm),"in-quart":c_,"out-quart":lh(c_),"in-out-quart":Rp(c_),"out-in-quart":qd(c_),"in-quint":Yg,"out-quint":lh(Yg),"in-out-quint":Rp(Yg),"out-in-quint":qd(Yg),"in-expo":F1,"out-expo":lh(F1),"in-out-expo":Rp(F1),"out-in-expo":qd(F1),"in-sine":b0,"out-sine":lh(b0),"in-out-sine":Rp(b0),"out-in-sine":qd(b0),"in-circ":z1,"out-circ":lh(z1),"in-out-circ":Rp(z1),"out-in-circ":qd(z1),"in-back":f_,"out-back":lh(f_),"in-out-back":Rp(f_),"out-in-back":qd(f_),"in-bounce":zv,"out-bounce":lh(zv),"in-out-bounce":Rp(zv),"out-in-bounce":qd(zv),"in-elastic":U1,"out-elastic":lh(U1),"in-out-elastic":Rp(U1),"out-in-elastic":qd(U1),spring:j1,"spring-in":j1,"spring-out":lh(j1),"spring-in-out":Rp(j1),"spring-out-in":qd(j1)},i3=function(e){return P5(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},$S=function(e){return WS[i3(e)]||WS.linear},a3=function(e){return e},Z1=1,o3=.5,qx=0;function GS(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var V1="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",s3=new RegExp("cubic-bezier\\("+V1+","+V1+","+V1+","+V1+"\\)"),u3=/steps\(\s*(\d+)\s*\)/,l3=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function XS(e){var t=s3.exec(e);if(t)return Xx.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t.slice(1).map(Number)),!1));var n=u3.exec(e);if(n)return GS(Number(n[1]),qx);var r=l3.exec(e);return r?GS(Number(r[1]),{start:Z1,middle:o3,end:qx}[r[2]]):$S(e)}function c3(e){return Math.abs(YS(e)/(e.playbackRate||1))}function YS(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var qS=0,Kx=1,H1=2,KS=3;function f3(e,t,n){if(t===null)return qS;var r=n.endTime;return t<Math.min(n.delay,r)?Kx:t>=Math.min(n.delay+e+n.endDelay,r)?H1:KS}function h3(e,t,n,r,i){switch(r){case Kx:return t==="backwards"||t==="both"?0:null;case KS:return n-i;case H1:return t==="forwards"||t==="both"?e:null;case qS:return null}}function Cs(e,t,n,r,i){var a=i;return e===0?t!==Kx&&(a+=n):a+=r/e,a}function p3(e,t,n,r,i,a){var s=e===1/0?t%1:e%1;return s===0&&n===H1&&r!==0&&(i!==0||a===0)&&(s=1),s}function v3(e,t,n,r){return e===H1&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function Jh(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function jl(e,t,n){var r=f3(e,t,n),i=h3(e,n.fill,t,r,n.delay);if(i===null)return null;var a=n.duration==="auto"?0:n.duration,s=Cs(a,r,n.iterations,i,n.iterationStart),l=p3(s,n.iterationStart,r,n.iterations,i,a),p=v3(r,n.iterations,l,s),m=Jh(n.direction,p,l);return n.currentIteration=p,n.progress=m,n.easingFunction(m)}function kh(e,t,n){var r=m3(e,t),i=g3(r,n);return function(a,s){if(s!==null)i.filter(function(p){return s>=p.applyFrom&&s<p.applyTo}).forEach(function(p){var m=s-p.startOffset,y=p.endOffset-p.startOffset,b=y===0?0:p.easingFunction(m/y);a.setAttribute(p.property,p.interpolation(b),!1,!1)});else for(var l in r)Uv(l)&&a.setAttribute(l,null)}}function Uv(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function m3(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(Uv(i)){var a={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:XS(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}function g3(e,t){var n=[];for(var r in e)for(var i=e[r],a=0;a<i.length-1;a++){var s=a,l=a+1,p=i[s].computedOffset,m=i[l].computedOffset,y=p,b=m;a===0&&(y=-1/0,m===0&&(l=s)),a===i.length-2&&(b=1/0,p===1&&(s=l)),n.push({applyFrom:y,applyTo:b,startOffset:i[s].computedOffset,endOffset:i[l].computedOffset,easingFunction:i[s].easingFunction,property:r,interpolation:JS(r,i[s].value,i[l].value,t)})}return n.sort(function(E,O){return E.startOffset-O.startOffset}),n}var QS=function(e,t,n){return function(r){var i=W1(e,t,r);return!pi.enableCSSParsing&&(0,Yl.Z)(i)?i:n(i)}};function JS(e,t,n,r){var i=bd[e];if(i&&i.syntax&&i.int){var a=pi.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var s=void 0,l=void 0;if(pi.enableCSSParsing){var p=pi.styleValueRegistry.parseProperty(e,t,r,!1),m=pi.styleValueRegistry.parseProperty(e,n,r,!1);s=pi.styleValueRegistry.computeProperty(e,p,r,!1),l=pi.styleValueRegistry.computeProperty(e,m,r,!1)}else{var y=a.parserWithCSSDisabled;s=y?y(t,r):t,l=y?y(n,r):n}var b=a.mixer(s,l,r);if(b){var E=QS.apply(void 0,(0,ce.ev)([],(0,ce.CR)(b),!1));return function(O){return O===0?t:O===1?n:E(O)}}}}return QS(!1,!0,function(O){return O?n:t})}function W1(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,a=Math.max(r,i),s=[],l=0;l<a;l++)s.push(W1(e[l<r?l:r-1],t[l<i?l:i-1],n));return s}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var Kd=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=a3,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=XS(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function J0(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!t[a]){var s={};"offset"in e&&(s.offset=Number(e.offset)),"easing"in e&&(s.easing=e.easing),"composite"in e&&(s.composite=e.composite),t[a]=s}r[a]!==void 0&&r[a]!==null&&(t[a][n]=r[a])}}return t.sort(function(l,p){return(l.computedOffset||0)-(p.computedOffset||0)}),t}function h_(e,t){if(e===null)return[];Array.isArray(e)||(e=J0(e));for(var n=e.map(function(p){var m={};t!=null&&t.composite&&(m.composite="auto");for(var y in p){var b=p[y];if(y==="offset"){if(b!==null){if(b=Number(b),!isFinite(b))throw new Error("Keyframe offsets must be numbers.");if(b<0||b>1)throw new Error("Keyframe offsets must be between 0 and 1.");m.computedOffset=b}}else if(y==="composite"&&["replace","add","accumulate","auto"].indexOf(b)===-1)throw new Error("".concat(b," compositing is not supported"));m[y]=b}return m.offset===void 0&&(m.offset=null),m.easing===void 0&&(m.easing=(t==null?void 0:t.easing)||"linear"),m.composite===void 0&&(m.composite="auto"),m}),r=!0,i=-1/0,a=0;a<n.length;a++){var s=n[a].offset;if((0,wa.Z)(s))r=!1;else{if(s<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=s}}n=n.filter(function(p){return Number(p.offset)>=0&&Number(p.offset)<=1});function l(){var p,m,y=n.length;n[y-1].computedOffset=Number((p=n[y-1].offset)!==null&&p!==void 0?p:1),y>1&&(n[0].computedOffset=Number((m=n[0].offset)!==null&&m!==void 0?m:0));for(var b=0,E=Number(n[0].computedOffset),O=1;O<y;O++){var P=n[O].computedOffset;if(!(0,wa.Z)(P)&&!(0,wa.Z)(E)){for(var I=1;I<O-b;I++)n[b+I].computedOffset=E+(Number(P)-E)*I/(O-b);b=O,E=Number(P)}}}return r||l(),n}var y3="backwards|forwards|both|none".split("|"),ew="reverse|alternate|alternate-reverse".split("|");function _3(e,t){var n=new Kd;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&y3.indexOf(e[r])===-1||r==="direction"&&ew.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function b3(e,t){return e=d_(e!=null?e:{duration:"auto"}),_3(e,t)}function d_(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var x3=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=b3(r,!1),this.timing.effect=this,this.timing.activeDuration=c3(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=h_(n,this.timing),this.interpolations=kh(this.normalizedKeyframes,this.timing,this.target);var a=pi.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=jl(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=h_(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function tw(e,t){return Number(e.id)-Number(t.id)}var I5=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(tw),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(a){a[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new x3(t,n,r),a=new JO(i,this);return this.animations.push(a),this.restartWebAnimationsNextTick(),a.updatePromises(),a.play(),a.updatePromises(),a},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(tw);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(a){var s=n.animations.indexOf(a);s!==-1&&n.animations.splice(s,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,a,s=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var l=[],p=[],m=[],y=[];return r.forEach(function(b){b.tick(t,n),b._inEffect?(p.push(b.effect),b.markTarget()):(l.push(b.effect),b.unmarkTarget()),b._needsTick&&(s.ticking=!0);var E=b._inEffect||b._needsTick;b._inTimeline=E,E?m.push(b):y.push(b)}),(i=this.pendingEffects).push.apply(i,(0,ce.ev)([],(0,ce.CR)(l),!1)),(a=this.pendingEffects).push.apply(a,(0,ce.ev)([],(0,ce.CR)(p),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[m,y]},e}();pi.EasingFunction=XS,pi.AnimationTimeline=I5;const Qx="main-layer",$1="label-layer",Lh="element",nw="view",Dh="plot",rw="component",eo="label",Jx="area",E3="mask",iw={};function e2(e,t){Object.assign(iw,{[e]:t})}function S3(e,t){var n=t.r;e.arc(n,n,n,0,Math.PI*2,!1)}function w3(e,t){var n=t.rx,r=t.ry,i=n,a=r;if(e.ellipse)e.ellipse(i,a,i,a,0,0,Math.PI*2,!1);else{var s=i>a?i:a,l=i>a?1:i/a,p=i>a?a/i:1;e.save(),e.scale(l,p),e.arc(s,s,s,0,Math.PI*2)}}function T3(e,t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2,s=t.defX,l=s===void 0?0:s,p=t.defY,m=p===void 0?0:p,y=t.markerStart,b=t.markerEnd,E=t.markerStartOffset,O=t.markerEndOffset,P=0,I=0,N=0,z=0,V=0,W,K;y&&du(y)&&E&&(W=i-n,K=a-r,V=Math.atan2(K,W),P=Math.cos(V)*(E||0),I=Math.sin(V)*(E||0)),b&&du(b)&&O&&(W=n-i,K=r-a,V=Math.atan2(K,W),N=Math.cos(V)*(O||0),z=Math.sin(V)*(O||0)),e.moveTo(n-l+P,r-m+I),e.lineTo(i-l+N,a-m+z)}function A3(e,t){var n=t.defX,r=n===void 0?0:n,i=t.defY,a=i===void 0?0:i,s=t.markerStart,l=t.markerEnd,p=t.markerStartOffset,m=t.markerEndOffset,y=t.path,b=y.absolutePath,E=y.segments,O=0,P=0,I=0,N=0,z=0,V,W;if(s&&du(s)&&p){var K=(0,ce.CR)(s.parentNode.getStartTangent(),2),J=K[0],oe=K[1];V=J[0]-oe[0],W=J[1]-oe[1],z=Math.atan2(W,V),O=Math.cos(z)*(p||0),P=Math.sin(z)*(p||0)}if(l&&du(l)&&m){var Te=(0,ce.CR)(l.parentNode.getEndTangent(),2),J=Te[0],oe=Te[1];V=J[0]-oe[0],W=J[1]-oe[1],z=Math.atan2(W,V),I=Math.cos(z)*(m||0),N=Math.sin(z)*(m||0)}for(var Re=0;Re<b.length;Re++){var We=b[Re],ut=We[0],ct=b[Re+1],Ft=Re===0&&(O!==0||P!==0),ft=(Re===b.length-1||ct&&(ct[0]==="M"||ct[0]==="Z"))&&I!==0&&N!==0;switch(ut){case"M":Ft?(e.moveTo(We[1]-r+O,We[2]-a+P),e.lineTo(We[1]-r,We[2]-a)):e.moveTo(We[1]-r,We[2]-a);break;case"L":ft?e.lineTo(We[1]-r+I,We[2]-a+N):e.lineTo(We[1]-r,We[2]-a);break;case"Q":e.quadraticCurveTo(We[1]-r,We[2]-a,We[3]-r,We[4]-a),ft&&e.lineTo(We[3]-r+I,We[4]-a+N);break;case"C":e.bezierCurveTo(We[1]-r,We[2]-a,We[3]-r,We[4]-a,We[5]-r,We[6]-a),ft&&e.lineTo(We[5]-r+I,We[6]-a+N);break;case"A":{var St=E[Re].arcParams,Mt=St.cx,Nt=St.cy,tn=St.rx,Yt=St.ry,fn=St.startAngle,Hn=St.endAngle,cr=St.xRotation,_r=St.sweepFlag;if(e.ellipse)e.ellipse(Mt-r,Nt-a,tn,Yt,cr,fn,Hn,!!(1-_r));else{var Mr=tn>Yt?tn:Yt,fi=tn>Yt?1:tn/Yt,Qi=tn>Yt?Yt/tn:1;e.translate(Mt-r,Nt-a),e.rotate(cr),e.scale(fi,Qi),e.arc(0,0,Mr,fn,Hn,!!(1-_r)),e.scale(1/fi,1/Qi),e.rotate(-cr),e.translate(-(Mt-r),-(Nt-a))}ft&&e.lineTo(We[6]-r+I,We[7]-a+N);break}case"Z":e.closePath();break}}}function C3(e,t){var n=t.defX,r=n===void 0?0:n,i=t.defY,a=i===void 0?0:i,s=t.markerStart,l=t.markerEnd,p=t.markerStartOffset,m=t.markerEndOffset,y=t.points.points,b=y.length,E=y[0][0]-r,O=y[0][1]-a,P=y[b-1][0]-r,I=y[b-1][1]-a,N=0,z=0,V=0,W=0,K=0,J,oe;s&&du(s)&&p&&(J=y[1][0]-y[0][0],oe=y[1][1]-y[0][1],K=Math.atan2(oe,J),N=Math.cos(K)*(p||0),z=Math.sin(K)*(p||0)),l&&du(l)&&m&&(J=y[b-1][0]-y[0][0],oe=y[b-1][1]-y[0][1],K=Math.atan2(oe,J),V=Math.cos(K)*(m||0),W=Math.sin(K)*(m||0)),e.moveTo(E+(N||V),O+(z||W));for(var Te=1;Te<b-1;Te++){var Re=y[Te];e.lineTo(Re[0]-r,Re[1]-a)}e.lineTo(P,I)}function p_(e,t){var n=t.defX,r=n===void 0?0:n,i=t.defY,a=i===void 0?0:i,s=t.markerStart,l=t.markerEnd,p=t.markerStartOffset,m=t.markerEndOffset,y=t.points.points,b=y.length,E=y[0][0]-r,O=y[0][1]-a,P=y[b-1][0]-r,I=y[b-1][1]-a,N=0,z=0,V=0,W=0,K=0,J,oe;s&&du(s)&&p&&(J=y[1][0]-y[0][0],oe=y[1][1]-y[0][1],K=Math.atan2(oe,J),N=Math.cos(K)*(p||0),z=Math.sin(K)*(p||0)),l&&du(l)&&m&&(J=y[b-2][0]-y[b-1][0],oe=y[b-2][1]-y[b-1][1],K=Math.atan2(oe,J),V=Math.cos(K)*(m||0),W=Math.sin(K)*(m||0)),e.moveTo(E+N,O+z);for(var Te=1;Te<b-1;Te++){var Re=y[Te];e.lineTo(Re[0]-r,Re[1]-a)}e.lineTo(P+V,I+W)}function G1(e,t){var n=t.radius,r=t.width,i=t.height,a=r,s=i,l=n&&n.some(function(N){return N!==0});if(!l)e.rect(0,0,a,s);else{var p=r>0?1:-1,m=i>0?1:-1,y=p+m===0,b=(0,ce.CR)(n.map(function(N){return(0,al.Z)(N,0,Math.min(Math.abs(a)/2,Math.abs(s)/2))}),4),E=b[0],O=b[1],P=b[2],I=b[3];e.moveTo(p*E,0),e.lineTo(a-p*O,0),O!==0&&e.arc(a-p*O,m*O,O,-m*Math.PI/2,p>0?0:Math.PI,y),e.lineTo(a,s-m*P),P!==0&&e.arc(a-p*P,s-m*P,P,p>0?0:Math.PI,m>0?Math.PI/2:1.5*Math.PI,y),e.lineTo(p*I,s),I!==0&&e.arc(p*I,s-m*I,I,m>0?Math.PI/2:-Math.PI/2,p>0?Math.PI:0,y),e.lineTo(0,m*E),E!==0&&e.arc(p*E,m*E,E,p>0?Math.PI:0,m>0?Math.PI*1.5:Math.PI/2,y)}}var qg=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[oi.CIRCLE]=S3,n[oi.ELLIPSE]=w3,n[oi.RECT]=G1,n[oi.LINE]=T3,n[oi.POLYLINE]=p_,n[oi.POLYGON]=C3,n[oi.PATH]=A3,n[oi.TEXT]=void 0,n[oi.GROUP]=void 0,n[oi.IMAGE]=void 0,n[oi.HTML]=void 0,n[oi.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(iv),Kg=nr.create(),t2=nr.create(),v_=nr.create(),aw=ni.create(),em=function(){function e(){var t=this;this.isHit=function(n,r,i,a){var s=t.context.pointInPathPickerFactory[n.nodeName];if(s){var l=ni.invert(aw,i),p=nr.transformMat4(t2,nr.set(v_,r[0],r[1],0),l),m=n.getGeometryBounds().halfExtents,y=n.parsedStyle.anchor;if(p[0]+=(y&&y[0]||0)*m[0]*2,p[1]+=(y&&y[1]||0)*m[1]*2,s(n,new Hc(p[0],p[1]),a,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),a=t.context.pathGeneratorFactory[n.nodeName];return a&&(i.beginPath(),a(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,a=t.renderingService,s=t.renderingContext;this.context=t,this.runtime=n;var l=(i=s.root)===null||i===void 0?void 0:i.ownerDocument;a.hooks.pick.tapPromise(e.tag,function(p){return(0,ce.mG)(r,void 0,void 0,function(){return(0,ce.Jh)(this,function(m){return[2,this.pick(l,p)]})})}),a.hooks.pickSync.tap(e.tag,function(p){return r.pick(l,p)})},e.prototype.pick=function(t,n){var r,i,a=n.topmost,s=n.position,l=s.x,p=s.y,m=nr.set(Kg,l,p,0),y=t.elementsFromBBox(m[0],m[1],m[0],m[1]),b=[];try{for(var E=(0,ce.XA)(y),O=E.next();!O.done;O=E.next()){var P=O.value,I=P.getWorldTransform(),N=this.isHit(P,m,I,!1);if(N){var z=ES(P);if(z){var V=z.parsedStyle.clipPath,W=this.isHit(V,m,V.getWorldTransform(),!0);if(W){if(a)return n.picked=[P],n;b.push(P)}}else{if(a)return n.picked=[P],n;b.push(P)}}}}catch(K){r={error:K}}finally{try{O&&!O.done&&(i=E.return)&&i.call(E)}finally{if(r)throw r.error}}return n.picked=b,n},e.tag="CanvasPicker",e}();function O3(e,t,n){var r=e.parsedStyle,i=r.r,a=r.fill,s=r.stroke,l=r.lineWidth,p=r.increasedLineWidthForHitTesting,m=r.pointerEvents,y=((l||0)+(p||0))/2,b=au(i,i,t.x,t.y),E=(0,ce.CR)(Wm(m,a,s),2),O=E[0],P=E[1];return O&&P||n?b<=i+y:O?b<=i:P?b>=i-y&&b<=i+y:!1}function X1(e,t,n,r){return e/(n*n)+t/(r*r)}function n2(e,t,n){var r=e.parsedStyle,i=r.rx,a=r.ry,s=r.fill,l=r.stroke,p=r.lineWidth,m=r.increasedLineWidthForHitTesting,y=r.pointerEvents,b=t.x,E=t.y,O=(0,ce.CR)(Wm(y,s,l),2),P=O[0],I=O[1],N=((p||0)+(m||0))/2,z=(b-i)*(b-i),V=(E-a)*(E-a);return P&&I||n?X1(z,V,i+N,a+N)<=1:P?X1(z,V,i,a)<=1:I?X1(z,V,i-N,a-N)>=1&&X1(z,V,i+N,a+N)<=1:!1}function Km(e,t,n,r,i,a){return i>=e&&i<=e+n&&a>=t&&a<=t+r}function M3(e,t,n,r,i,a,s){var l=i/2;return Km(e-l,t-l,n,i,a,s)||Km(e+n-l,t-l,i,r,a,s)||Km(e+l,t+r-l,n,i,a,s)||Km(e-l,t+l,i,r,a,s)}function Qg(e,t,n,r,i,a,s,l){var p=(Math.atan2(l-t,s-e)+Math.PI*2)%(Math.PI*2),m={x:e+n*Math.cos(p),y:t+n*Math.sin(p)};return au(m.x,m.y,s,l)<=a/2}function tm(e,t,n,r,i,a,s){var l=Math.min(e,n),p=Math.max(e,n),m=Math.min(t,r),y=Math.max(t,r),b=i/2;return a>=l-b&&a<=p+b&&s>=m-b&&s<=y+b?wp(e,t,n,r,a,s)<=i/2:!1}function ed(e,t,n,r,i){var a=e.length;if(a<2)return!1;for(var s=0;s<a-1;s++){var l=e[s][0],p=e[s][1],m=e[s+1][0],y=e[s+1][1];if(tm(l,p,m,y,t,n,r))return!0}if(i){var b=e[0],E=e[a-1];if(tm(b[0],b[1],E[0],E[1],t,n,r))return!0}return!1}var R3=1e-6;function r2(e){return Math.abs(e)<R3?0:e<0?-1:1}function P3(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function ow(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var a=0;a<i;a++){var s=e[a],l=e[(a+1)%i];if(P3(s,l,[t,n]))return!0;r2(s[1]-n)>0!=r2(l[1]-n)>0&&r2(t-(n-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])<0&&(r=!r)}return r}function sw(e,t,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i];if(r=ow(a,t,n),r)break}return r}function I3(e,t,n){var r=e.parsedStyle,i=r.x1,a=r.y1,s=r.x2,l=r.y2,p=r.lineWidth,m=r.increasedLineWidthForHitTesting,y=r.defX,b=y===void 0?0:y,E=r.defY,O=E===void 0?0:E,P=r.pointerEvents,I=r.fill,N=r.stroke,z=(0,ce.CR)(Wm(P,I,N),2),V=z[1];return!V&&!n||!p?!1:tm(i,a,s,l,(p||0)+(m||0),t.x+b,t.y+O)}function k3(e,t,n,r,i){for(var a=!1,s=t/2,l=0;l<e.length;l++){var p=e[l],m=p.currentPoint,y=p.params,b=p.prePoint,E=p.box;if(!(E&&!Km(E.x-s,E.y-s,E.width+t,E.height+t,n,r)))switch(p.command){case"L":case"Z":if(a=tm(b[0],b[1],m[0],m[1],t,n,r),a)return!0;break;case"Q":var O=Fg(b[0],b[1],y[1],y[2],y[3],y[4],n,r);if(a=O<=t/2,a)return!0;break;case"C":var P=Lg(b[0],b[1],y[1],y[2],y[3],y[4],y[5],y[6],n,r,i);if(a=P<=t/2,a)return!0;break;case"A":p.cubicParams||(p.cubicParams=Go(b[0],b[1],y[1],y[2],y[3],y[4],y[5],y[6],y[7],void 0));for(var I=p.cubicParams,N=b,z=0;z<I.length;z+=6){var V=Lg(N[0],N[1],I[z],I[z+1],I[z+2],I[z+3],I[z+4],I[z+5],n,r,i);if(N=[I[z+4],I[z+5]],a=V<=t/2,a)return!0}break}}return a}function L3(e,t,n,r,i,a){var s=e.parsedStyle,l=s.lineWidth,p=s.increasedLineWidthForHitTesting,m=s.stroke,y=s.fill,b=s.defX,E=b===void 0?0:b,O=s.defY,P=O===void 0?0:O,I=s.path,N=s.pointerEvents,z=I.segments,V=I.hasArc,W=I.polylines,K=I.polygons,J=(0,ce.CR)(Wm(N,(K==null?void 0:K.length)&&y,m),2),oe=J[0],Te=J[1],Re=bx(e),We=!1;return oe||n?(V?We=r(e,t):We=sw(K,t.x+E,t.y+P)||sw(W,t.x+E,t.y+P),We):((Te||n)&&(We=k3(z,(l||0)+(p||0),t.x+E,t.y+P,Re)),We)}function D3(e,t,n){var r=e.parsedStyle,i=r.stroke,a=r.fill,s=r.lineWidth,l=r.increasedLineWidthForHitTesting,p=r.points,m=r.defX,y=m===void 0?0:m,b=r.defY,E=b===void 0?0:b,O=r.pointerEvents,P=(0,ce.CR)(Wm(O,a,i),2),I=P[0],N=P[1],z=!1;return(N||n)&&(z=ed(p.points,(s||0)+(l||0),t.x+y,t.y+E,!0)),!z&&(I||n)&&(z=ow(p.points,t.x+y,t.y+E)),z}function uw(e,t,n){var r=e.parsedStyle,i=r.lineWidth,a=r.increasedLineWidthForHitTesting,s=r.points,l=r.defX,p=l===void 0?0:l,m=r.defY,y=m===void 0?0:m,b=r.pointerEvents,E=r.fill,O=r.stroke,P=(0,ce.CR)(Wm(b,E,O),2),I=P[1];return!I&&!n||!i?!1:ed(s.points,(i||0)+(a||0),t.x+p,t.y+y,!1)}function N3(e,t,n,r,i){var a=e.parsedStyle,s=a.radius,l=a.fill,p=a.stroke,m=a.lineWidth,y=a.increasedLineWidthForHitTesting,b=a.width,E=a.height,O=a.pointerEvents,P=(0,ce.CR)(Wm(O,l,p),2),I=P[0],N=P[1],z=s&&s.some(function(J){return J!==0}),V=(m||0)+(y||0);if(z){var K=!1;return(N||n)&&(K=B3(0,0,b,E,s.map(function(J){return(0,al.Z)(J,0,Math.min(Math.abs(b)/2,Math.abs(E)/2))}),V,t.x,t.y)),!K&&(I||n)&&(K=r(e,t)),K}else{var W=V/2;if(I&&N||n)return Km(0-W,0-W,b+W,E+W,t.x,t.y);if(I)return Km(0,0,b,E,t.x,t.y);if(N)return M3(0,0,b,E,V,t.x,t.y)}return!1}function B3(e,t,n,r,i,a,s,l){var p=(0,ce.CR)(i,4),m=p[0],y=p[1],b=p[2],E=p[3];return tm(e+m,t,e+n-y,t,a,s,l)||tm(e+n,t+y,e+n,t+r-b,a,s,l)||tm(e+n-b,t+r,e+E,t+r,a,s,l)||tm(e,t+r-E,e,t+m,a,s,l)||Qg(e+n-y,t+y,y,1.5*Math.PI,2*Math.PI,a,s,l)||Qg(e+n-b,t+r-b,b,0,.5*Math.PI,a,s,l)||Qg(e+E,t+r-E,E,.5*Math.PI,Math.PI,a,s,l)||Qg(e+m,t+m,m,Math.PI,1.5*Math.PI,a,s,l)}function F3(e,t,n,r,i,a){var s=e.parsedStyle,l=s.pointerEvents,p=s.width,m=s.height;if(l==="non-transparent-pixel"){var y=i.config.offscreenCanvas,b=a.offscreenCanvasCreator.getOrCreateCanvas(y),E=a.offscreenCanvasCreator.getOrCreateContext(y,{willReadFrequently:!0});b.width=p,b.height=m,i.defaultStyleRendererFactory[oi.IMAGE].render(E,e.parsedStyle,e,void 0,void 0,void 0);var O=E.getImageData(t.x,t.y,1,1).data;return O.every(function(P){return P!==0})}return!0}var Tc=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[oi.CIRCLE]=O3,n[oi.ELLIPSE]=n2,n[oi.RECT]=N3,n[oi.LINE]=I3,n[oi.POLYLINE]=uw,n[oi.POLYGON]=D3,n[oi.PATH]=L3,n[oi.TEXT]=r,n[oi.GROUP]=null,n[oi.IMAGE]=F3,n[oi.HTML]=null,n[oi.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new em)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(iv),lw=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=ni.create(),this.dprMatrix=ni.create(),this.tmpMat4=ni.create(),this.vec3a=nr.create(),this.vec3b=nr.create(),this.vec3c=nr.create(),this.vec3d=nr.create()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,a=t.camera,s=t.renderingService,l=t.renderingContext,p=t.rBushRoot,m=t.pathGeneratorFactory;this.rBush=p,this.pathGeneratorFactory=m;var y=t.contextService,b=l.root.ownerDocument.defaultView,E=function(I){var N=I.target,z=N.rBushNode;z.aabb&&r.removedRBushNodeAABBs.push(z.aabb)},O=function(I){var N=I.target,z=N.rBushNode;z.aabb&&r.removedRBushNodeAABBs.push(z.aabb)};s.hooks.init.tap(e.tag,function(){b.addEventListener(Ro.UNMOUNTED,E),b.addEventListener(Ro.CULLED,O);var I=y.getDPR(),N=i.width,z=i.height,V=y.getContext();r.clearRect(V,0,0,N*I,z*I,i.background)}),s.hooks.destroy.tap(e.tag,function(){b.removeEventListener(Ro.UNMOUNTED,E),b.removeEventListener(Ro.CULLED,O),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),s.hooks.beginFrame.tap(e.tag,function(){var I=y.getContext(),N=y.getDPR(),z=i.width,V=i.height,W=r.canvasRendererPluginOptions,K=W.dirtyObjectNumThreshold,J=W.dirtyObjectRatioThreshold,oe=s.getStats(),Te=oe.total,Re=oe.rendered,We=Re/Te;r.clearFullScreen=s.disableDirtyRectangleRendering()||Re>K&&We>J,I&&(I.resetTransform?I.resetTransform():I.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(I,0,0,z*N,V*N,i.background))});var P=function(I,N){I.isVisible()&&!I.isCulled()&&(r.renderDisplayObject(I,N,r.context,r.restoreStack,n),r.saveDirtyAABB(I));var z=I.sortable.sorted||I.childNodes;z.forEach(function(V){P(V,N)})};s.hooks.endFrame.tap(e.tag,function(){var I=y.getContext(),N=y.getDPR();if(ni.fromScaling(r.dprMatrix,[N,N,1]),ni.multiply(r.vpMatrix,r.dprMatrix,a.getOrthoMatrix()),r.clearFullScreen)P(l.root,I);else{var z=r.safeMergeAABB.apply(r,(0,ce.ev)([r.mergeDirtyAABBs(r.renderQueue)],(0,ce.CR)(r.removedRBushNodeAABBs.map(function(cr){var _r=cr.minX,Mr=cr.minY,fi=cr.maxX,Qi=cr.maxY,Ta=new Al;return Ta.setMinMax([_r,Mr,0],[fi,Qi,0]),Ta})),!1));if(r.removedRBushNodeAABBs=[],Al.isEmpty(z)){r.renderQueue=[];return}var V=r.convertAABB2Rect(z),W=V.x,K=V.y,J=V.width,oe=V.height,Te=nr.transformMat4(r.vec3a,[W,K,0],r.vpMatrix),Re=nr.transformMat4(r.vec3b,[W+J,K,0],r.vpMatrix),We=nr.transformMat4(r.vec3c,[W,K+oe,0],r.vpMatrix),ut=nr.transformMat4(r.vec3d,[W+J,K+oe,0],r.vpMatrix),ct=Math.min(Te[0],Re[0],ut[0],We[0]),Ft=Math.min(Te[1],Re[1],ut[1],We[1]),ft=Math.max(Te[0],Re[0],ut[0],We[0]),St=Math.max(Te[1],Re[1],ut[1],We[1]),Mt=Math.floor(ct),Nt=Math.floor(Ft),tn=Math.ceil(ft-ct),Yt=Math.ceil(St-Ft);I.save(),r.clearRect(I,Mt,Nt,tn,Yt,i.background),I.beginPath(),I.rect(Mt,Nt,tn,Yt),I.clip(),I.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var fn=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;fn&&b.dispatchEvent(new Ku(Cf.DIRTY_RECTANGLE,{dirtyRect:{x:Mt,y:Nt,width:tn,height:Yt}}));var Hn=r.searchDirtyObjects(z);Hn.sort(function(cr,_r){return cr.sortable.renderOrder-_r.sortable.renderOrder}).forEach(function(cr){cr&&cr.isVisible()&&!cr.isCulled()&&r.renderDisplayObject(cr,I,r.context,r.restoreStack,n)}),I.restore(),r.renderQueue.forEach(function(cr){r.saveDirtyAABB(cr)}),r.renderQueue=[]}r.restoreStack.forEach(function(){I.restore()}),r.restoreStack=[]}),s.hooks.render.tap(e.tag,function(I){r.clearFullScreen||r.renderQueue.push(I)})},e.prototype.clearRect=function(t,n,r,i,a,s){t.clearRect(n,r,i,a),s&&(t.fillStyle=s,t.fillRect(n,r,i,a))},e.prototype.renderDisplayObject=function(t,n,r,i,a){var s=t.nodeName,l=i[i.length-1];l&&!(t.compareDocumentPosition(l)&Vf.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var p=this.context.styleRendererFactory[s],m=this.pathGeneratorFactory[s],y=t.parsedStyle.clipPath;if(y){this.applyWorldTransform(n,y);var b=this.pathGeneratorFactory[y.nodeName];b&&(n.save(),i.push(t),n.beginPath(),b(n,y.parsedStyle),n.closePath(),n.clip())}p&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),m&&(n.beginPath(),m(n,t.parsedStyle),t.nodeName!==oi.LINE&&t.nodeName!==oi.PATH&&t.nodeName!==oi.POLYLINE&&n.closePath()),p&&(p.render(n,t.parsedStyle,t,r,this,a),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),a=Math.floor(n[1]),s=Math.ceil(r[0]),l=Math.ceil(r[1]),p=s-i,m=l-a;return{x:i,y:a,width:p,height:m}},e.prototype.mergeDirtyAABBs=function(t){var n=new Al;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var a=r.renderable.dirtyRenderBounds;a&&n.add(a)}),n},e.prototype.searchDirtyObjects=function(t){var n=(0,ce.CR)(t.getMin(),2),r=n[0],i=n[1],a=(0,ce.CR)(t.getMax(),2),s=a[0],l=a[1],p=this.rBush.search({minX:r,minY:i,maxX:s,maxY:l});return p.map(function(m){var y=m.displayObject;return y})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new Al);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,a=r.fill,s=r.opacity,l=r.lineDash,p=r.lineDashOffset;l&&t.setLineDash(l),(0,wa.Z)(p)||(t.lineDashOffset=p),(0,wa.Z)(s)||(t.globalAlpha*=s),!(0,wa.Z)(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!(0,wa.Z)(a)&&!Array.isArray(a)&&!a.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){var i=0,a=0,s=(n.parsedStyle||{}).anchor,l=s&&s[0]||0,p=s&&s[1]||0;if(l!==0||p!==0){var m=n.geometry.contentBounds,y=m&&m.halfExtents[0]*2||0,b=m&&m.halfExtents[1]*2||0;i=-(l*y),a=-(p*b)}r?(ni.copy(this.tmpMat4,n.getLocalTransform()),this.vec3a[0]=i,this.vec3a[1]=a,this.vec3a[2]=0,ni.translate(this.tmpMat4,this.tmpMat4,this.vec3a),ni.multiply(this.tmpMat4,r,this.tmpMat4),ni.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(ni.copy(this.tmpMat4,n.getWorldTransform()),this.vec3a[0]=i,this.vec3a[1]=a,this.vec3a[2]=0,ni.translate(this.tmpMat4,this.tmpMat4,this.vec3a),ni.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new Al;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),Pp=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,a,s){var l=n.fill,p=n.fillRule,m=n.opacity,y=n.fillOpacity,b=n.stroke,E=n.strokeOpacity,O=n.lineWidth,P=n.lineCap,I=n.lineJoin,N=n.shadowType,z=n.shadowColor,V=n.shadowBlur,W=n.filter,K=n.miterLimit,J=!(0,wa.Z)(l)&&!l.isNone,oe=!(0,wa.Z)(b)&&!b.isNone&&O>0,Te=l.alpha===0,Re=!!(W&&W.length),We=!(0,wa.Z)(z)&&V>0,ut=r.nodeName,ct=N==="inner",Ft=oe&&We&&(ut===oi.PATH||ut===oi.LINE||ut===oi.POLYLINE||Te||ct);J&&(t.globalAlpha=m*y,Ft||Qm(r,t,We),this.fill(t,r,l,p,i,a,s),Ft||this.clearShadowAndFilter(t,Re,We)),oe&&(t.globalAlpha=m*E,t.lineWidth=O,(0,wa.Z)(K)||(t.miterLimit=K),(0,wa.Z)(P)||(t.lineCap=P),(0,wa.Z)(I)||(t.lineJoin=I),Ft&&(ct&&(t.globalCompositeOperation="source-atop"),Qm(r,t,!0),ct&&(this.stroke(t,r,b,i,a,s),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,Re,!0))),this.stroke(t,r,b,i,a,s))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!(0,wa.Z)(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e.prototype.fill=function(t,n,r,i,a,s,l){var p=this;Array.isArray(r)?r.forEach(function(m){t.fillStyle=p.getColor(m,n,t),i?t.fill(i):t.fill()}):(qy(r)&&(t.fillStyle=this.getPattern(r,n,t,a,s,l)),i?t.fill(i):t.fill())},e.prototype.stroke=function(t,n,r,i,a,s){var l=this;Array.isArray(r)?r.forEach(function(p){t.strokeStyle=l.getColor(p,n,t),t.stroke()}):(qy(r)&&(t.strokeStyle=this.getPattern(r,n,t,i,a,s)),t.stroke())},e.prototype.getPattern=function(t,n,r,i,a,s){var l,p;if(t.image.nodeName==="rect"){var m=t.image.parsedStyle,y=m.width,b=m.height;p=i.contextService.getDPR();var E=i.config.offscreenCanvas;l=s.offscreenCanvasCreator.getOrCreateCanvas(E),l.width=y*p,l.height=b*p;var O=s.offscreenCanvasCreator.getOrCreateContext(E),P=[];t.image.forEach(function(N){a.renderDisplayObject(N,O,i,P,s)}),P.forEach(function(){O.restore()})}var I=this.imagePool.getOrCreatePatternSync(t,r,l,p,function(){n.renderable.dirty=!0,i.renderingService.dirtify()});return I},e.prototype.getColor=function(t,n,r){var i;if(t.type===Iv.LinearGradient||t.type===Iv.RadialGradient){var a=n.getGeometryBounds(),s=a&&a.halfExtents[0]*2||1,l=a&&a.halfExtents[1]*2||1;i=this.imagePool.getOrCreateGradient((0,ce.pi)((0,ce.pi)({type:t.type},t.value),{width:s,height:l}),r)}return i},e}();function Qm(e,t,n){var r=e.parsedStyle,i=r.filter,a=r.shadowColor,s=r.shadowBlur,l=r.shadowOffsetX,p=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=a.toString(),t.shadowBlur=s||0,t.shadowOffsetX=l||0,t.shadowOffsetY=p||0)}var Y1=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.width,a=n.height,s=n.img,l=n.shadowColor,p=n.shadowBlur,m,y=i,b=a;if(Bu(s)?m=this.imagePool.getImageSync(s):(y||(y=s.width),b||(b=s.height),m=s),m){var E=!(0,wa.Z)(l)&&p>0;Qm(r,t,E);try{t.drawImage(m,0,0,y,b)}catch(O){}}},e}(),x0=function(){function e(){}return e.prototype.render=function(t,n,r,i,a,s){var l=n,p=l.lineWidth,m=l.textAlign,y=l.textBaseline,b=l.lineJoin,E=l.miterLimit,O=l.letterSpacing,P=l.stroke,I=l.fill,N=l.fillOpacity,z=l.strokeOpacity,V=l.opacity,W=l.metrics,K=l.dx,J=l.dy,oe=l.shadowColor,Te=l.shadowBlur,Re=W.font,We=W.lines,ut=W.height,ct=W.lineHeight,Ft=W.lineMetrics;t.font=Re,t.lineWidth=p,t.textAlign=m==="middle"?"center":m;var ft=y;!s.enableCSSParsing&&ft==="alphabetic"&&(ft="bottom"),t.lineJoin=b,(0,wa.Z)(E)||(t.miterLimit=E);var St=0;y==="middle"?St=-ut/2-ct/2:y==="bottom"||y==="alphabetic"||y==="ideographic"?St=-ut:(y==="top"||y==="hanging")&&(St=-ct);var Mt=K||0;St+=J||0,We.length===1&&(ft==="bottom"?(ft="middle",St-=.5*ut):ft==="top"&&(ft="middle",St+=.5*ut)),t.textBaseline=ft;var Nt=!(0,wa.Z)(oe)&&Te>0;Qm(r,t,Nt);for(var tn=0;tn<We.length;tn++){var Yt=p/2+Mt;St+=ct,!(0,wa.Z)(P)&&!P.isNone&&p&&this.drawLetterSpacing(t,We[tn],Ft[tn],m,Yt,St,O,N,z,V,!0),(0,wa.Z)(I)||this.drawLetterSpacing(t,We[tn],Ft[tn],m,Yt,St,O,N,z,V)}},e.prototype.drawLetterSpacing=function(t,n,r,i,a,s,l,p,m,y,b){if(b===void 0&&(b=!1),l===0){b?this.strokeText(t,n,a,s,m):this.fillText(t,n,a,s,p,y);return}var E=t.textAlign;t.textAlign="left";var O=a;i==="center"||i==="middle"?O=a-r.width/2:(i==="right"||i==="end")&&(O=a-r.width);for(var P=Array.from(n),I=t.measureText(n).width,N=0,z=0;z<P.length;++z){var V=P[z];b?this.strokeText(t,V,O,s,m):this.fillText(t,V,O,s,p,y),N=t.measureText(n.substring(z+1)).width,O+=I-N+l,I=N}t.textAlign=E},e.prototype.fillText=function(t,n,r,i,a,s){var l,p=!(0,wa.Z)(a)&&a!==1;p&&(l=t.globalAlpha,t.globalAlpha=a*s),t.fillText(n,r,i),p&&(t.globalAlpha=l)},e.prototype.strokeText=function(t,n,r,i,a){var s,l=!(0,wa.Z)(a)&&a!==1;l&&(s=t.globalAlpha,t.globalAlpha=a),t.strokeText(n,r,i),l&&(t.globalAlpha=s)},e}(),q1=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),k5=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),i2=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),L5=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),D5=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),K1=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),a2=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Pp),z3=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=(0,ce.pi)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,a=new Pp(i),s=(n={},n[oi.CIRCLE]=a,n[oi.ELLIPSE]=a,n[oi.RECT]=a,n[oi.IMAGE]=new Y1(i),n[oi.TEXT]=new x0,n[oi.LINE]=a,n[oi.POLYLINE]=a,n[oi.POLYGON]=a,n[oi.PATH]=a,n[oi.GROUP]=void 0,n[oi.HTML]=void 0,n[oi.MESH]=void 0,n);this.context.defaultStyleRendererFactory=s,this.context.styleRendererFactory=s,this.addRenderingPlugin(new lw(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(iv),o2=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,a=t.renderingContext,s=t.config;this.context=t;var l=a.root.ownerDocument.defaultView,p=function(oe){i.hooks.pointerMove.call(oe)},m=function(oe){i.hooks.pointerUp.call(oe)},y=function(oe){i.hooks.pointerDown.call(oe)},b=function(oe){i.hooks.pointerOver.call(oe)},E=function(oe){i.hooks.pointerOut.call(oe)},O=function(oe){i.hooks.pointerCancel.call(oe)},P=function(oe){i.hooks.pointerWheel.call(oe)},I=function(oe){i.hooks.click.call(oe)},N=function(oe){n.globalThis.document.addEventListener("pointermove",p,!0),oe.addEventListener("pointerdown",y,!0),oe.addEventListener("pointerleave",E,!0),oe.addEventListener("pointerover",b,!0),n.globalThis.addEventListener("pointerup",m,!0),n.globalThis.addEventListener("pointercancel",O,!0)},z=function(oe){oe.addEventListener("touchstart",y,!0),oe.addEventListener("touchend",m,!0),oe.addEventListener("touchmove",p,!0),oe.addEventListener("touchcancel",O,!0)},V=function(oe){n.globalThis.document.addEventListener("mousemove",p,!0),oe.addEventListener("mousedown",y,!0),oe.addEventListener("mouseout",E,!0),oe.addEventListener("mouseover",b,!0),n.globalThis.addEventListener("mouseup",m,!0)},W=function(oe){n.globalThis.document.removeEventListener("pointermove",p,!0),oe.removeEventListener("pointerdown",y,!0),oe.removeEventListener("pointerleave",E,!0),oe.removeEventListener("pointerover",b,!0),n.globalThis.removeEventListener("pointerup",m,!0)},K=function(oe){oe.removeEventListener("touchstart",y,!0),oe.removeEventListener("touchend",m,!0),oe.removeEventListener("touchmove",p,!0),oe.removeEventListener("touchcancel",O,!0)},J=function(oe){n.globalThis.document.removeEventListener("mousemove",p,!0),oe.removeEventListener("mousedown",y,!0),oe.removeEventListener("mouseout",E,!0),oe.removeEventListener("mouseover",b,!0),n.globalThis.removeEventListener("mouseup",m,!0)};i.hooks.init.tap(e.tag,function(){var oe=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(oe.style.msContentZooming="none",oe.style.msTouchAction="none"):l.supportsPointerEvents&&(oe.style.touchAction="none"),l.supportsPointerEvents?N(oe):V(oe),l.supportsTouchEvents&&z(oe),s.useNativeClickEvent&&oe.addEventListener("click",I,!0),oe.addEventListener("wheel",P,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var oe=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(oe.style.msContentZooming="",oe.style.msTouchAction=""):l.supportsPointerEvents&&(oe.style.touchAction=""),l.supportsPointerEvents?W(oe):J(oe),l.supportsTouchEvents&&K(oe),s.useNativeClickEvent&&oe.removeEventListener("click",I,!0),oe.removeEventListener("wheel",P,!0)})},e.tag="DOMInteraction",e}(),m_=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new o2)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(iv),Q1="g-canvas-camera",U3=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,a=t.renderingContext,s=t.renderingService;this.context=t;var l=a.root.ownerDocument.defaultView,p=l.context.eventService.nativeHTMLMap,m=function(I,N){N.style.transform=r.joinTransformMatrix(I.getWorldTransform())},y=function(I){var N=I.target;if(N.nodeName===oi.HTML){r.$camera||(r.$camera=r.createCamera(i));var z=r.getOrCreateEl(N);if(r.$camera.appendChild(z),n.enableCSSParsing){var V=N.ownerDocument.documentElement.attributes;Object.keys(V).forEach(function(W){z.style[W]=V[W]})}Object.keys(N.attributes).forEach(function(W){r.updateAttribute(W,N)}),m(N,z),p.set(z,N)}},b=function(I){var N=I.target;if(N.nodeName===oi.HTML&&r.$camera){var z=r.getOrCreateEl(N);z&&(z.remove(),p.delete(z))}},E=function(I){var N=I.target;if(N.nodeName===oi.HTML){var z=I.attrName;r.updateAttribute(z,N)}},O=function(I){var N=I.target;if(N.nodeName===oi.HTML){var z=r.getOrCreateEl(N);m(N,z)}},P=function(){if(r.$camera){var I=r.context.config,N=I.width,z=I.height;r.$camera.style.width="".concat(N||0,"px"),r.$camera.style.height="".concat(z||0,"px")}};s.hooks.init.tap(e.tag,function(){l.addEventListener(Cf.RESIZE,P),l.addEventListener(Ro.MOUNTED,y),l.addEventListener(Ro.UNMOUNTED,b),l.addEventListener(Ro.ATTR_MODIFIED,E),l.addEventListener(Ro.BOUNDS_CHANGED,O)}),s.hooks.endFrame.tap(e.tag,function(){r.$camera&&a.renderReasons.has(Y0.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),s.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),l.removeEventListener(Cf.RESIZE,P),l.removeEventListener(Ro.MOUNTED,y),l.removeEventListener(Ro.UNMOUNTED,b),l.removeEventListener(Ro.ATTR_MODIFIED,E),l.removeEventListener(Ro.BOUNDS_CHANGED,O)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,a=n.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var p=Q1,m=l.querySelector("#"+p);if(!m){var y=(r||document).createElement("div");m=y,y.id=p,y.style.position="absolute",y.style.left="".concat(s.offsetLeft||0,"px"),y.style.top="".concat(s.offsetTop||0,"px"),y.style.transformOrigin="left top",y.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),y.style.overflow="hidden",y.style.pointerEvents="none",y.style.width="".concat(i||0,"px"),y.style.height="".concat(a||0,"px"),l.appendChild(y)}return m}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;Bu(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"transformOrigin":var a=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(a[0].value," ").concat(a[1].value);break;case"width":if(this.context.enableCSSParsing){var s=n.computedStyleMap().get("width");r.style.width=s.toString()}else{var s=n.parsedStyle.width;r.style.width=(0,Yl.Z)(s)?"".concat(s,"px"):s.toString()}break;case"height":if(this.context.enableCSSParsing){var l=n.computedStyleMap().get("height");r.style.height=l.toString()}else{var l=n.parsedStyle.height;r.style.height=(0,Yl.Z)(l)?"".concat(l,"px"):l.toString()}break;case"zIndex":var p=n.parsedStyle.zIndex;r.style["z-index"]="".concat(p);break;case"visibility":var m=n.parsedStyle.visibility;r.style.visibility=m;break;case"pointerEvents":var y=n.parsedStyle.pointerEvents;r.style.pointerEvents=y;break;case"opacity":var b=n.parsedStyle.opacity;r.style.opacity="".concat(b);break;case"fill":var E=n.parsedStyle.fill,O="";A1(E)?E.isNone?O="transparent":O=n.getAttribute("fill"):Array.isArray(E)?O=n.getAttribute("fill"):qy(E),r.style.background=O;break;case"stroke":var P=n.parsedStyle.stroke,I="";A1(P)?P.isNone?I="transparent":I=n.getAttribute("stroke"):Array.isArray(P)?I=n.getAttribute("stroke"):qy(P),r.style["border-color"]=I,r.style["border-style"]="solid";break;case"lineWidth":var N=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(N||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var z=n.style.filter;r.style.filter=z;break;default:t!=="x"&&t!=="y"&&!(0,wa.Z)(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),g_=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new U3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(iv),j3=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,a){var s;r?s=r(t):e_&&(s=new window.Image),s&&(s.onload=function(){n.imageCache[t]=s,i(s)},s.onerror=function(l){a(l)},s.crossOrigin="Anonymous",s.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,a){var s=this.generatePatternKey(t);if(s&&this.patternCache[s])return this.patternCache[s];var l=t.image,p=t.repetition,m=t.transform,y,b=!1;Bu(l)?y=this.getImageSync(l,a):r?(y=r,b=!0):y=l;var E=y&&n.createPattern(y,p);if(E){var O=void 0;m?O=Ix(Cx(m),new Fn({})):O=ni.identity(ni.create()),b&&ni.scale(O,O,[1/i,1/i,1]),E.setTransform({a:O[0],b:O[1],c:O[4],d:O[5],e:O[12],f:O[13]})}return s&&E&&(this.patternCache[s]=E),E},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,a=t.steps,s=t.width,l=t.height,p=t.angle,m=t.cx,y=t.cy,b=t.size;if(this.gradientCache[r])return this.gradientCache[r];var E=null;if(i===Iv.LinearGradient){var O=JE(s,l,p),P=O.x1,I=O.y1,N=O.x2,z=O.y2;E=n.createLinearGradient(P,I,N,z)}else if(i===Iv.RadialGradient){var V=hC(s,l,m,y,b),W=V.x,K=V.y,J=V.r;E=n.createRadialGradient(W,K,0,W,K,J)}return E&&(a.forEach(function(oe){var Te=oe.offset,Re=oe.color;Te.unit===Oa.kPercentage&&(E==null||E.addColorStop(Te.value/100,Re.toString()))}),this.gradientCache[r]=E),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.width,i=t.height,a=t.steps,s=t.angle,l=t.cx,p=t.cy,m=t.size;return"gradient-".concat(n,"-").concat((s==null?void 0:s.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((m==null?void 0:m.toString())||0,"-").concat(r,"-").concat(i,"-").concat(a.map(function(y){var b=y.offset,E=y.color;return"".concat(b).concat(E)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(Bu(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),Z3=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,a=r.root.ownerDocument.defaultView,s=function(m,y,b){var E=m.parsedStyle,O=E.width,P=E.height;O&&!P?m.setAttribute("height",b/y*O):!O&&P&&m.setAttribute("width",y/b*P)},l=function(m){var y=m.target,b=y.nodeName,E=y.attributes;if(b===oi.IMAGE){var O=E.img,P=E.keepAspectRatio;Bu(O)&&i.getImageSync(O,function(I){var N=I.width,z=I.height;P&&s(y,N,z),y.renderable.dirty=!0,n.dirtify()})}},p=function(m){var y=m.target,b=m.attrName,E=m.newValue;y.nodeName===oi.IMAGE&&b==="img"&&Bu(E)&&i.getOrCreateImage(E).then(function(O){var P=O.width,I=O.height;y.attributes.keepAspectRatio&&s(y,P,I),y.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){a.addEventListener(Ro.MOUNTED,l),a.addEventListener(Ro.ATTR_MODIFIED,p)}),n.hooks.destroy.tap(e.tag,function(){a.removeEventListener(Ro.MOUNTED,l),a.removeEventListener(Ro.ATTR_MODIFIED,p)})},e.tag="LoadImage",e}(),V3=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new j3(this.context.config),this.addRenderingPlugin(new Z3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(iv),cw=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=Bu(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||e_&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,dO(this.$canvas,t,n)),this.renderingContext.renderReasons.add(Y0.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),(0,ce.mG)(this,void 0,void 0,function(){var n,r;return(0,ce.Jh)(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),rf=function(e){(0,ce.ZT)(t,e);function t(){var n=e.apply(this,(0,ce.ev)([],(0,ce.CR)(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=cw},t.prototype.destroy=function(){delete this.context.ContextService},t}(iv),J1=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new rf),r.registerPlugin(new V3),r.registerPlugin(new qg),r.registerPlugin(new z3),r.registerPlugin(new m_),r.registerPlugin(new Tc),r.registerPlugin(new g_),r}return t}(m1),H3=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,a=i.root.ownerDocument,s=a.defaultView,l=function(p){var m=p.target,y=m===a,b=y&&n.dragndropPluginOptions.isDocumentDraggable?a:m.closest&&m.closest("[draggable=true]");if(b){var E=!1,O=p.timeStamp,P=[p.clientX,p.clientY],I=null,N=[p.clientX,p.clientY],z=function(W){return(0,ce.mG)(n,void 0,void 0,function(){var K,J,oe,Te,Re,We;return(0,ce.Jh)(this,function(ut){switch(ut.label){case 0:if(!E){if(K=W.timeStamp-O,J=zs([W.clientX,W.clientY],P),K<=this.dragndropPluginOptions.dragstartTimeThreshold||J<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];W.type="dragstart",b.dispatchEvent(W),E=!0}return W.type="drag",W.dx=W.clientX-N[0],W.dy=W.clientY-N[1],b.dispatchEvent(W),N=[W.clientX,W.clientY],y?[3,2]:(oe=this.dragndropPluginOptions.overlap==="pointer"?[W.canvasX,W.canvasY]:m.getBounds().center,[4,a.elementsFromPoint(oe[0],oe[1])]);case 1:Te=ut.sent(),Re=Te[Te.indexOf(m)+1],We=(Re==null?void 0:Re.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?a:null),I!==We&&(I&&(W.type="dragleave",W.target=I,I.dispatchEvent(W)),We&&(W.type="dragenter",W.target=We,We.dispatchEvent(W)),I=We,I&&(W.type="dragover",W.target=I,I.dispatchEvent(W))),ut.label=2;case 2:return[2]}})})};s.addEventListener("pointermove",z);var V=function(W){if(E){W.detail={preventClick:!0};var K=W.clone();I&&(K.type="drop",K.target=I,I.dispatchEvent(K)),K.type="dragend",b.dispatchEvent(K),E=!1}s.removeEventListener("pointermove",z)};m.addEventListener("pointerup",V,{once:!0}),m.addEventListener("pointerupoutside",V,{once:!0})}};r.hooks.init.tap(e.tag,function(){s.addEventListener("pointerdown",l)}),r.hooks.destroy.tap(e.tag,function(){s.removeEventListener("pointerdown",l)})},e.tag="Dragndrop",e}(),eb=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new H3((0,ce.pi)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(iv);function W3(e,t,n){var r;return function(){var i=this,a=arguments,s=function(){r=null,n||e.apply(i,a)},l=n&&!r;clearTimeout(r),r=setTimeout(s,t),l&&e.apply(i,a)}}var fw=W3,$3=function(e){return typeof e=="object"&&e!==null},y_=$3,hw=function(e){if(!y_(e)||!(0,Ch.Z)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},E0=hw,Jg=5;function G3(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function dw(e,t,n,r){n=n||0,r=r||Jg;for(var i in t)if(G3(t,i)){var a=t[i];a!==null&&E0(a)?(E0(e[i])||(e[i]={}),n<r?dw(e[i],a,n+1,r):e[i]=t[i]):ai(a)?(e[i]=[],e[i]=e[i].concat(a)):a!==void 0&&(e[i]=a)}}var X3=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)dw(e,t[r]);return e},Pi=X3;class Y3 extends Map{constructor(t,n=l2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(s2(this,t))}has(t){return super.has(s2(this,t))}set(t,n){return super.set(u2(this,t),n)}delete(t){return super.delete(pw(this,t))}}class N5 extends null{constructor(t,n=l2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(s2(this,t))}add(t){return super.add(u2(this,t))}delete(t){return super.delete(pw(this,t))}}function s2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function u2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function pw({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function l2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ey(e){return e}function Zl(e,...t){return ty(e,ey,ey,t)}function tb(e,...t){return ty(e,Array.from,ey,t)}function vw(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([a,s])=>[...i,a,s]));return e}function c2(e,...t){return vw(tb(e,...t),t)}function __(e,t,...n){return vw(h2(e,t,...n),n)}function f2(e,t,...n){return ty(e,ey,t,n)}function h2(e,t,...n){return ty(e,Array.from,t,n)}function B5(e,...t){return ty(e,identity,mw,t)}function F5(e,...t){return ty(e,Array.from,mw,t)}function mw(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function ty(e,t,n,r){return function i(a,s){if(s>=r.length)return n(a);const l=new Y3,p=r[s++];let m=-1;for(const y of a){const b=p(y,++m,a),E=l.get(b);E?E.push(y):l.set(b,[y])}for(const[y,b]of l)l.set(y,i(b,s));return t(l)}(e,0)}var d2=function(e){return(0,wa.Z)(e)?"":e.toString()},q3=function(e){var t=d2(e);return t.charAt(0).toLowerCase()+t.substring(1)},p2=q3,lv=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})};function Jm(e){return e}function v2(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),Jm)}function gw(e){return e.reduce((t,n)=>r=>lv(this,void 0,void 0,function*(){const i=yield t(r);return n(i)}),Jm)}function m2(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function ny(e=""){throw new Error(e)}function nb(e,t){const{attributes:n}=t,r=new Set(["id","className"]);for(const[i,a]of Object.entries(n))r.has(i)||(i==="transform"&&e.attr(i,""),e.attr(i,a))}function cl(e){return e!=null&&!Number.isNaN(e)}function z5(e,t){return e+(t-e)*Math.random()}function yw(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function K3(e,t){const{transform:n}=e.style,i=(a=>a==="none"||a===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function ja(e,t){return b_(e,t)||{}}function b_(e,t){const n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[p2(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function U5(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}${upperFirst(n)}`,r]))}function Q3(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function g2(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function _w(e,t){if(e===void 0)return null;if(typeof e=="number")return e;const n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function x_(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function S0(e){return e===null||e===!1}function bw(e,t,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(t)){const a=t[i];!E0(a)||!E0(e[i])?e[i]=a:bw(e[i],a,n,r+1)}return e}}function Ho(e){return new Wc([e],null,e,e.ownerDocument)}class Wc{constructor(t=null,n=null,r=null,i=null,a=[null,null,null,null,null],s=[],l=[]){this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=s,this._facetElements=l}selectAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Wc(n,null,this._elements[0],this._document)}selectFacetAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Wc(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(t){const n=typeof t=="string"?this._parent.querySelectorAll(t)[0]||null:t;return new Wc([n],null,n,this._document)}append(t){const n=typeof t=="function"?t:()=>this.createElement(t),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const a=this._data[i],[s,l]=Array.isArray(a)?a:[a,null],p=n(s,i);p.__data__=s,l!==null&&(p.__fromElements__=l),this._parent.appendChild(p),r.push(p)}return new Wc(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const a=this._elements[i],s=a.__data__,l=n(s,i);a.appendChild(l),r.push(l)}return new Wc(r,null,r[0],this._document)}}maybeAppend(t,n,r){const i=this._elements[0],a=i.getElementById(t);if(a)return new Wc([a],null,this._parent,this._document);const s=typeof n=="string"?this.createElement(n):n();return s.id=t,r&&(s.className=r),i.appendChild(s),new Wc([s],null,this._parent,this._document)}data(t,n=i=>i,r=()=>null){const i=[],a=[],s=new Set(this._elements),l=[],p=new Set,m=new Map(this._elements.map((O,P)=>[n(O.__data__,P),O])),y=new Map(this._facetElements.map((O,P)=>[n(O.__data__,P),O])),b=Zl(this._elements,O=>r(O.__data__));for(let O=0;O<t.length;O++){const P=t[O],I=n(P,O),N=r(P,O);if(m.has(I)){const z=m.get(I);z.__data__=P,z.__facet__=!1,a.push(z),s.delete(z),m.delete(I)}else if(y.has(I)){const z=y.get(I);z.__data__=P,z.__facet__=!0,a.push(z),y.delete(I)}else if(b.has(I)){const z=b.get(I);l.push([P,z]);for(const V of z)s.delete(V);b.delete(I)}else if(m.has(N)){const z=m.get(N);z.__toData__?z.__toData__.push(P):z.__toData__=[P],p.add(z),s.delete(z)}else i.push(P)}const E=[new Wc([],i,this._parent,this._document),new Wc(a,null,this._parent,this._document),new Wc(s,null,this._parent,this._document),new Wc([],l,this._parent,this._document),new Wc(p,null,this._parent,this._document)];return new Wc(this._elements,null,this._parent,this._document,E)}merge(t){const n=[...this._elements,...t._elements],r=[...this._transitions,...t._transitions];return new Wc(n,null,this._parent,this._document,void 0,r)}createElement(t){if(this._document)return this._document.createElement(t,{});const n=Wc.registry[t];return n?new n:ny(`Unknown node type: ${t}`)}join(t=s=>s,n=s=>s,r=s=>s.remove(),i=s=>s,a=s=>s.remove()){const s=t(this._enter),l=n(this._update),p=r(this._exit),m=i(this._merge),y=a(this._split);return l.merge(s).merge(p).merge(m).merge(y)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._transitions[t];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[t].remove()})}else this._elements[t].remove()}return new Wc([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;t(i,n,r)}return this}attr(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,a,s){n!==void 0&&(s[t]=r(i,a,s))})}style(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,a,s){n!==void 0&&(s.style[t]=r(i,a,s))})}transition(t){const n=typeof t!="function"?()=>t:t,{_transitions:r}=this;return this.each(function(i,a,s){r[a]=n(i,a,s)})}on(t,n){return this.each(function(r,i,a){a.addEventListener(t,n)}),this}call(t,...n){return t(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Wc.registry={g:Ao,rect:sh,circle:ts,path:pu,text:Hf,ellipse:Ih,image:oh,line:ll,polygon:Cl,polyline:yu,html:wc};const Xs={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var w0=function(e){var t=d2(e);return t.charAt(0).toUpperCase()+t.substring(1)},Qd=w0;function E_(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function nm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jv(e){return e=nm(Math.abs(e)),e?e[1]:NaN}function rb(e,t){return function(n,r){for(var i=n.length,a=[],s=0,l=e[0],p=0;i>0&&l>0&&(p+l+1>r&&(l=Math.max(1,r-p)),a.push(n.substring(i-=l,i+l)),!((p+=l+1)>r));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function eg(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ch=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ip(e){if(!(t=ch.exec(e)))throw new Error("invalid format: "+e);var t;return new kp({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ip.prototype=kp.prototype;function kp(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ib(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var xw;function J3(e,t){var n=nm(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(xw=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+nm(e,Math.max(0,t+a-1))[0]}function Ew(e,t){var n=nm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var y2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:E_,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ew(e*100,t),r:Ew,s:J3,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sw(e){return e}var ww=Array.prototype.map,_2=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ab(e){var t=e.grouping===void 0||e.thousands===void 0?Sw:rb(ww.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Sw:eg(ww.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"\u2212":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function m(b){b=Ip(b);var E=b.fill,O=b.align,P=b.sign,I=b.symbol,N=b.zero,z=b.width,V=b.comma,W=b.precision,K=b.trim,J=b.type;J==="n"?(V=!0,J="g"):y2[J]||(W===void 0&&(W=12),K=!0,J="g"),(N||E==="0"&&O==="=")&&(N=!0,E="0",O="=");var oe=I==="$"?n:I==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",Te=I==="$"?r:/[%p]/.test(J)?s:"",Re=y2[J],We=/[defgprs%]/.test(J);W=W===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W));function ut(ct){var Ft=oe,ft=Te,St,Mt,Nt;if(J==="c")ft=Re(ct)+ft,ct="";else{ct=+ct;var tn=ct<0||1/ct<0;if(ct=isNaN(ct)?p:Re(Math.abs(ct),W),K&&(ct=ib(ct)),tn&&+ct==0&&P!=="+"&&(tn=!1),Ft=(tn?P==="("?P:l:P==="-"||P==="("?"":P)+Ft,ft=(J==="s"?_2[8+xw/3]:"")+ft+(tn&&P==="("?")":""),We){for(St=-1,Mt=ct.length;++St<Mt;)if(Nt=ct.charCodeAt(St),48>Nt||Nt>57){ft=(Nt===46?i+ct.slice(St+1):ct.slice(St))+ft,ct=ct.slice(0,St);break}}}V&&!N&&(ct=t(ct,1/0));var Yt=Ft.length+ct.length+ft.length,fn=Yt<z?new Array(z-Yt+1).join(E):"";switch(V&&N&&(ct=t(fn+ct,fn.length?z-ft.length:1/0),fn=""),O){case"<":ct=Ft+ct+ft+fn;break;case"=":ct=Ft+fn+ct+ft;break;case"^":ct=fn.slice(0,Yt=fn.length>>1)+Ft+ct+ft+fn.slice(Yt);break;default:ct=fn+Ft+ct+ft;break}return a(ct)}return ut.toString=function(){return b+""},ut}function y(b,E){var O=m((b=Ip(b),b.type="f",b)),P=Math.max(-8,Math.min(8,Math.floor(jv(E)/3)))*3,I=Math.pow(10,-P),N=_2[8+P/3];return function(z){return O(I*z)+N}}return{format:m,formatPrefix:y}}var T0,rm,eM;ob({thousands:",",grouping:[3],currency:["$",""]});function ob(e){return T0=ab(e),rm=T0.format,eM=T0.formatPrefix,T0}function im(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function tg(e){return e.map((t,n)=>n)}function tM(e){const t=e.length,n=e[0].length,r=new Array(n).fill(0).map(()=>new Array(t));for(let i=0;i<n;i++)for(let a=0;a<t;a++)r[i][a]=e[a][i];return r}function nM(e){return e[0]}function b2(e){return e[e.length-1]}function _u(e){return!e.some(Array.isArray)}function Tw(e){return Array.from(new Set(e))}function x2(e,t){const n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function Aw(e,t=e.length){if(t===1)return e.map(r=>[r]);const n=[];for(let r=0;r<e.length;r++){const i=e.slice(r+1);Aw(i,t-1).forEach(s=>{n.push([e[r],...s])})}return n}function sb(e){if(e.length===1)return[e];const t=[];for(let n=1;n<=e.length;n++)t.push(...Aw(e,n));return t}var ub=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},S_=ub,lb=function(e,t){if(e===t)return!0;if(!e||!t||Bu(e)||Bu(t))return!1;if(S_(e)||S_(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=lb(e[r],t[r]),!!n);r++);return n}if(y_(e)||y_(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=lb(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},E2=lb;function Lp(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Pu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function j5(e){return e*Math.PI/180}function Z5(e){return e*180/Math.PI}function rM(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}const Cw=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),rM(n.startAngle,n.endAngle))},w_=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Cw(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};w_.props={};const Ow=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},S2=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Ow(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...w_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};S2.props={};function T_(e,t,n){return Math.max(t,Math.min(e,n))}function A_(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}const Mw=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var Rw=D(17816);function Ol(e){const{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function fl(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function C_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function O_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function M_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function Pw(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function iM(e){return M_(e)&&fl(e)}function am(e){return O_(e)||fl(e)}function Iw(e){return fl(e)&&Ol(e)}function V5(e){return fl(e)||M_(e)||C_(e)||Iw(e)}function H5(e){if(am(e)){const[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function o(e){const{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function c(e,t=!0){const{transformations:n}=e.getOptions(),[,r,i]=n.find(a=>a[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function f(e,t){const{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}function h(e,t){t(e),e.children&&e.children.forEach(function(n){n&&h(n,t)})}function d(e){S(e,!0)}function g(e){S(e,!1)}function S(e,t){var n=t?"visible":"hidden";h(e,function(r){r.attr("visibility",n)})}function C(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function k(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=(0,ce.CR)(r,1),a=i[0];return!t.includes(a)}));return Object.fromEntries(t.map(function(r){return C(e)?e[r]===!1?[r,!1]:[r,(0,ce.pi)((0,ce.pi)({},e[r]),n)]:[r,n]}))}function F(e,t){e?e.finished.then(t):t()}function $(e,t){e.length===0?t():Promise.all(e.map(function(n){return n==null?void 0:n.finished})).then(t)}function X(e,t){"update"in e?e.update(t):e.attr(t)}function me(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return X(e,{style:r}),null}return e.animate(t,n)}function je(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function _t(e,t,n,r){if(r===void 0&&(r="destroy"),je(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&g(e),t.isVisible()&&d(t)};if(!n)return i(),[null];var a=n.duration,s=a===void 0?0:a,l=n.delay,p=l===void 0?0:l,m=Math.ceil(+s/2),y=+s/4,b=function(ct){if(ct.nodeName==="circle"){var Ft=(0,ce.CR)(ct.getLocalPosition(),2),ft=Ft[0],St=Ft[1],Mt=ct.attr("r");return[ft-Mt,St-Mt]}return ct.getLocalPosition()},E=(0,ce.CR)(b(e),2),O=E[0],P=E[1],I=(0,ce.CR)(b(t),2),N=I[0],z=I[1],V=(0,ce.CR)([(O+N)/2-O,(P+z)/2-P],2),W=V[0],K=V[1],J=e.style.opacity,oe=J===void 0?1:J,Te=t.style.opacity,Re=Te===void 0?1:Te,We=e.animate([{opacity:oe,transform:"translate(0, 0)"},{opacity:0,transform:"translate(".concat(W,", ").concat(K,")")}],(0,ce.pi)((0,ce.pi)({fill:"both"},n),{duration:p+m+y})),ut=t.animate([{opacity:0,transform:"translate(".concat(-W,", ").concat(-K,")"),offset:.01},{opacity:Re,transform:"translate(0, 0)"}],(0,ce.pi)((0,ce.pi)({fill:"both"},n),{duration:m+y,delay:p+m-y}));return F(ut,i),[We,ut]}function Ot(e,t,n){var r={},i={};return Object.entries(t).forEach(function(a){var s=(0,ce.CR)(a,2),l=s[0],p=s[1];if(!(0,wa.Z)(p)){var m=e.style[l]||e.parsedStyle[l]||0;m!==p&&(r[l]=m,i[l]=p)}}),n?me(e,[r,i],(0,ce.pi)({fill:"both"},n)):(X(e,i),null)}var nn=5,Un=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=nn),Object.entries(t).forEach(function(i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1],p=e;Object.prototype.hasOwnProperty.call(t,s)&&(l?E0(l)?(E0(e[s])||(p[s]={}),n<r?Un(e[s],l,n+1,r):p[s]=t[s]):ai(l)?(p[s]=[],p[s]=p[s].concat(l)):p[s]=l:p[s]=l)})},zn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Un(e,t[r]);return e},ur=function(e){(0,ce.ZT)(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,(0,ce.ev)([],(0,ce.CR)(n),!1))||this;return i.addEventListener(Ro.INSERTED,function(){g(i)}),i}return t}(Ao);function Pr(e){var t=e.appendChild(new ur({class:"offscreen"}));return g(t),t}function si(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function kr(){S(this,this.attributes.visibility!=="hidden")}var hr=function(e){(0,ce.ZT)(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,zn({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Pr(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&kr.call(this)},t.prototype.update=function(n,r){var i;return this.attr(zn({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t}(K0);function Hr(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),e?n(t):(r&&i(t),null)}function ha(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}var Xa=function(e){(0,ce.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ce._T)(n,["style"]);return e.call(this,(0,ce.pi)({style:(0,ce.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Pr(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(Hf);function pa(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function bo(e){throw new Error(e)}var Do=function(){function e(i,a,s,l,p,m,y){i===void 0&&(i=null),a===void 0&&(a=null),s===void 0&&(s=null),l===void 0&&(l=null),p===void 0&&(p=[null,null,null,null,null]),m===void 0&&(m=[]),y===void 0&&(y=[]),t.add(this),this._elements=Array.from(i),this._data=a,this._parent=s,this._document=l,this._enter=p[0],this._update=p[1],this._exit=p[2],this._merge=p[3],this._split=p[4],this._transitions=m,this._facetElements=y}e.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(a,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,a)},e.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([a],null,a,this._document)},e.prototype.append=function(i){var a=this,s=typeof i=="function"?i:function(){return a.createElement(i)},l=[];if(this._data!==null){for(var p=0;p<this._data.length;p++){var m=this._data[p],y=(0,ce.CR)(Array.isArray(m)?m:[m,null],2),b=y[0],E=y[1],O=s(b,p);O.__data__=b,E!==null&&(O.__fromElements__=E),this._parent.appendChild(O),l.push(O)}return new n(l,null,this._parent,this._document)}for(var p=0;p<this._elements.length;p++){var P=this._elements[p],b=P.__data__,O=s(b,p);P.appendChild(O),l.push(O)}return new n(l,null,l[0],this._document)},e.prototype.maybeAppend=function(i,a){var s=(0,ce.Q_)(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),a);return s.attr("id",i),s},e.prototype.maybeAppendByClassName=function(i,a){var s=i.toString(),l=(0,ce.Q_)(this,t,"m",r).call(this,s[0]==="."?s:".".concat(s),a);return l.attr("className",s),l},e.prototype.maybeAppendByName=function(i,a){var s=(0,ce.Q_)(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),a);return s.attr("name",i),s},e.prototype.data=function(i,a,s){var l,p;a===void 0&&(a=function(ut){return ut}),s===void 0&&(s=function(){return null});for(var m=[],y=[],b=new Set(this._elements),E=[],O=new Set,P=new Map(this._elements.map(function(ut,ct){return[a(ut.__data__,ct),ut]})),I=new Map(this._facetElements.map(function(ut,ct){return[a(ut.__data__,ct),ut]})),N=pa(this._elements,function(ut){return s(ut.__data__)}),z=0;z<i.length;z++){var V=i[z],W=a(V,z),K=s(V,z);if(P.has(W)){var J=P.get(W);J.__data__=V,J.__facet__=!1,y.push(J),b.delete(J),P.delete(W)}else if(I.has(W)){var J=I.get(W);J.__data__=V,J.__facet__=!0,y.push(J),I.delete(W)}else if(N.has(W)){var oe=N.get(W);E.push([V,oe]);try{for(var Te=(l=void 0,(0,ce.XA)(oe)),Re=Te.next();!Re.done;Re=Te.next()){var J=Re.value;b.delete(J)}}catch(ut){l={error:ut}}finally{try{Re&&!Re.done&&(p=Te.return)&&p.call(Te)}finally{if(l)throw l.error}}N.delete(W)}else if(P.has(K)){var J=P.get(K);J.__toData__?J.__toData__.push(V):J.__toData__=[V],O.add(J),b.delete(J)}else m.push(V)}var We=[new n([],m,this._parent,this._document),new n(y,null,this._parent,this._document),new n(b,null,this._parent,this._document),new n([],E,this._parent,this._document),new n(O,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,We)},e.prototype.merge=function(i){var a=(0,ce.ev)((0,ce.ev)([],(0,ce.CR)(this._elements),!1),(0,ce.CR)(i._elements),!1),s=(0,ce.ev)((0,ce.ev)([],(0,ce.CR)(this._transitions),!1),(0,ce.CR)(i._transitions),!1);return new n(a,null,this._parent,this._document,void 0,s)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=n.registry[i];return a?new a:bo("Unknown node type: ".concat(i))},e.prototype.join=function(i,a,s,l,p){i===void 0&&(i=function(P){return P}),a===void 0&&(a=function(P){return P}),s===void 0&&(s=function(P){return P.remove()}),l===void 0&&(l=function(P){return P}),p===void 0&&(p=function(P){return P.remove()});var m=i(this._enter),y=a(this._update),b=s(this._exit),E=l(this._merge),O=p(this._split);return y.merge(m).merge(b).merge(E).merge(O)},e.prototype.remove=function(){for(var i=function(l){var p=a._elements[l],m=a._transitions[l];m?m.then(function(){return p.remove()}):p.remove()},a=this,s=0;s<this._elements.length;s++)i(s);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var s=this._elements[a],l=s.__data__;i.call(s,l,a)}return this},e.prototype.attr=function(i,a){var s=typeof a!="function"?function(){return a}:a;return this.each(function(l,p){a!==void 0&&(this[i]=s.call(this,l,p))})},e.prototype.style=function(i,a,s){s===void 0&&(s=!0);var l=typeof a!="function"||!s?function(){return a}:a;return this.each(function(p,m){a!==void 0&&(this.style[i]=l.call(this,p,m))})},e.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(s,l){var p=this;Object.entries(i).forEach(function(m){var y=(0,ce.CR)(m,2),b=y[0],E=y[1],O=typeof E!="function"||!a?function(){return E}:E;E!==void 0&&p.attr(b,O.call(p,s,l))})})},e.prototype.update=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(l,p){i&&this.update&&this.update(s.call(this,l,p))})},e.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(l,p){i&&this.update&&this.update(s.call(this,l,p))})},e.prototype.transition=function(i){var a=this._transitions;return this.each(function(s,l){a[l]=i.call(this,s,l)})},e.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},e.prototype.call=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return i.call.apply(i,(0,ce.ev)([this._parent,this],(0,ce.CR)(a),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(a,s){var l=this._elements[0],p=l.querySelector(a);if(p)return new n([p],null,this._parent,this._document);var m=typeof s=="string"?this.createElement(s):s();return l.appendChild(m),new n([m],null,this._parent,this._document)},e.registry={g:Ao,rect:sh,circle:ts,path:pu,text:Xa,ellipse:Ih,image:oh,line:ll,polygon:Cl,polyline:yu,html:wc},e}();function so(e){return new Do([e],null,e,e.ownerDocument)}function af(e,t,n){return e.querySelector(t)?so(e).select(t):so(e).append(n)}var Uu=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1],p=n(l);return[s,{name:p,class:".".concat(p),id:"#".concat(p),toString:function(){return p}}]}));return Object.assign(r,{prefix:n}),r},td={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new pu({style:{path:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],anchor:"0.5 0.5",fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},Jd=Pi({},td,{style:{type:"arc"}}),fh=Pi({},td,{style:{}}),Rs=Uu({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),hh=function(e){return typeof e=="function"};function A0(e,t){return[e[0]*t,e[1]*t]}function R_(e,t){return[e[0]+t[0],e[1]+t[1]]}function w2(e,t){return[e[0]-t[0],e[1]-t[1]]}function ng(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function rg(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function P_(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function kw(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function Co(e,t,n){var r=__read(e,2),i=r[0],a=r[1],s=__read(t,2),l=s[0],p=s[1],m=i-l,y=a-p,b=Math.sin(n),E=Math.cos(n);return[m*E-y*b+l,m*b+y*E+p]}function eu(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function Ks(e){return e*Math.PI/180}function Ia(e){return Number((e*180/Math.PI).toPrecision(5))}function Nh(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function Ml(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function ep(e,t){return"".concat(t).concat(Nh(e))}function xd(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",a=e.replace(new RegExp("^(".concat(i,")")),"");return n?Ml(a):a}function ig(e,t){Object.entries(t).forEach(function(n){var r=(0,ce.CR)(n,2),i=r[0],a=r[1];(0,ce.ev)([e],(0,ce.CR)(e.querySelectorAll(i)),!1).filter(function(s){return s.matches(i)}).forEach(function(s){if(s){var l=s;l.style.cssText+=Object.entries(a).reduce(function(p,m){return"".concat(p).concat(m.join(":"),";")},"")}})})}var I_=function(e,t){if(!(e!=null&&e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function js(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1];if(!(s==="className"||s==="class")){if(I_(s,"show")&&I_(xd(s,"show"),t)!==n)s===ep(t,"show")?r[s]=l:r[s.replace(new RegExp(Nh(t)),"")]=l;else if(!I_(s,"show")&&I_(s,t)!==n){var p=xd(s,t);p==="filter"&&typeof l=="function"||(r[p]=l)}}}),r}function om(e,t){return Object.entries(e).reduce(function(n,r){var i=(0,ce.CR)(r,2),a=i[0],s=i[1];return a.startsWith("show")?n["show".concat(t).concat(a.slice(4))]=s:n["".concat(t).concat(Nh(a))]=s,n},{})}function ag(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(a){var s=(0,ce.CR)(a,2),l=s[0],p=s[1];t.includes(l)||(n.indexOf(l)!==-1?i[l]=p:r[l]=p)}),[r,i]}function Zv(e,t){return hh(e)?e.apply(void 0,(0,ce.ev)([],(0,ce.CR)(t),!1)):e}function Lw(e,t){return e.style.opacity||(e.style.opacity=1),Ot(e,{opacity:0},t)}var GU=["$el","anchor","cx","cy","d","defX","defY","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function XU(e){return GU.includes(e)}function W5(e){var t={};for(var n in e)XU(n)&&(t[n]=e[n]);return t}var cb=Uu({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function $5(e){return e.reduce(function(t,n,r){return t.push((0,ce.ev)([r===0?"M":"L"],(0,ce.CR)(n),!1)),t},[])}function YU(e,t,n){var r=t.connect,i=r===void 0?"line":r,a=t.center;if(i==="line")return $5(e);if(!a)return[];var s=P_(e[0],a),l=n?0:1;return e.reduce(function(p,m,y){return y===0?p.push((0,ce.ev)(["M"],(0,ce.CR)(m),!1)):p.push((0,ce.ev)(["A",s,s,0,0,l],(0,ce.CR)(m),!1)),p},[])}function aM(e,t,n){return t.type==="surround"?YU(e,t,n):$5(e)}function qU(e,t,n){var r=n.type,i=n.connect,a=n.center,s=n.closed,l=s?[["Z"]]:[],p=(0,ce.CR)([aM(e,n),aM(t.slice().reverse(),n,!0)],2),m=p[0],y=p[1],b=(0,ce.CR)([e[0],t.slice(-1)[0]],2),E=b[0],O=b[1],P=function(V,W){return[m,V,y,W,l].flat()};if(i==="line"||r==="surround")return P([(0,ce.ev)(["L"],(0,ce.CR)(O),!1)],[(0,ce.ev)(["L"],(0,ce.CR)(E),!1)]);if(!a)throw new Error("Arc grid need to specified center");var I=(0,ce.CR)([P_(O,a),P_(E,a)],2),N=I[0],z=I[1];return P([(0,ce.ev)(["A",N,N,0,0,1],(0,ce.CR)(O),!1),(0,ce.ev)(["L"],(0,ce.CR)(O),!1)],[(0,ce.ev)(["A",z,z,0,0,0],(0,ce.CR)(E),!1),(0,ce.ev)(["L"],(0,ce.CR)(E),!1)])}function KU(e,t,n,r){var i=n.animate,a=n.isBillboard,s=t.map(function(l,p){return{id:l.id||"grid-line-".concat(p),path:aM(l.points,n)}});return e.selectAll(cb.line.class).data(s,function(l){return l.id}).join(function(l){return l.append("path").each(function(p,m){var y=Zv(W5((0,ce.pi)({path:p.path},r)),[p,m,s]);this.attr((0,ce.pi)({class:cb.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},y))})},function(l){return l.transition(function(p,m){var y=Zv(W5((0,ce.pi)({path:p.path},r)),[p,m,s]);return Ot(this,y,i.update)})},function(l){return l.transition(function(){var p=this,m=Lw(this,i.exit);return F(m,function(){return p.remove()}),m})}).transitions()}function QU(e,t,n){var r=n.animate,i=n.connect,a=n.areaFill;if(t.length<2||!a||!i)return[];for(var s=Array.isArray(a)?a:[a,"transparent"],l=function(P){return s[P%s.length]},p=[],m=0;m<t.length-1;m++){var y=(0,ce.CR)([t[m].points,t[m+1].points],2),b=y[0],E=y[1],O=qU(b,E,n);p.push({path:O,fill:l(m)})}return e.selectAll(cb.region.class).data(p,function(P,I){return I}).join(function(P){return P.append("path").each(function(I,N){var z=Zv(I,[I,N,p]);this.attr(z)}).attr("className",cb.region.name)},function(P){return P.transition(function(I,N){var z=Zv(I,[I,N,p]);return Ot(this,z,r.update)})},function(P){return P.transition(function(){var I=this,N=Lw(this,r.exit);return F(N,function(){return I.remove()}),N})}).transitions()}function JU(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var a=i.points,s=(0,ce.CR)(a,1),l=s[0];return(0,ce.pi)((0,ce.pi)({},i),{points:(0,ce.ev)((0,ce.ev)([],(0,ce.CR)(a),!1),[l],!1)})}):n}var ej=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,a=n.center,s=n.areaFill,l=n.closed,p=(0,ce._T)(n,["type","center","areaFill","closed"]),m=JU(n),y=so(r).maybeAppendByClassName(cb.lineGroup,"g"),b=so(r).maybeAppendByClassName(cb.regionGroup,"g"),E=KU(y,m,n,p),O=QU(b,m,n);return(0,ce.ev)((0,ce.ev)([],(0,ce.CR)(E),!1),(0,ce.CR)(O),!1)},t}(hr),ql=function(e,t,n){for(var r=0,i=Bu(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},tj=function(e,t){return function(n){return e*(1-n)+t*n}};function nj(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var a=new Array(r),s=new Array(n),l=0;for(l=0;l<r;++l)a[l]=oM(e[l],t[l]);for(;l<n;++l)s[l]=t[l];for(l=0;l<r;++l)s[l]=a[l](i);return s}}function rj(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1];s in e?n[s]=oM(e[s],l):r[s]=l}),function(i){return Object.entries(n).forEach(function(a){var s=(0,ce.CR)(a,2),l=s[0],p=s[1];return r[l]=p(i)}),r}}function oM(e,t){return typeof e=="number"&&typeof t=="number"?tj(e,t):Array.isArray(e)&&Array.isArray(t)?nj(e,t):typeof e=="object"&&typeof t=="object"?rj(e,t):function(n){return e}}function ij(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,a=i===void 0?0:i,s=oM(t,n),l=Math.ceil(+a/16),p=new Array(l).fill(0).map(function(m,y,b){return{__keyframe_data__:s(y/(b.length-1))}});return e.animate(p,(0,ce.pi)({fill:"both"},r))}function k_(e){return typeof e=="function"?e():Bu(e)||(0,Yl.Z)(e)?new Xa({style:{text:String(e)}}):e}function sM(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,a=r.height,s=t/Math.max(i,a);return n&&e.scale(s),s}function G5(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function X5(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=(0,ce.CR)(n,2),i=r[0],a=r[1];return[i,Zv(a,t)]}))}function qhe(e){if(e.type==="linear"){var t=e.startPos,n=e.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(n),!1)}var r=e.startAngle,i=e.endAngle,a=e.center,s=e.radius;return __spreadArray(__spreadArray([r,i],__read(a),!1),[s],!1)}function uM(e,t){return t&&hh(t)?e.filter(t):e}function Y5(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function Dw(e,t){if(t.type==="linear"){var n=(0,ce.CR)(t.startPos,2),r=n[0],i=n[1],a=(0,ce.CR)(t.endPos,2),s=a[0],l=a[1],p=(0,ce.CR)([s-r,l-i],2),m=p[0],y=p[1];return kw([m,y])}var b=Ks(Y5(e,t));return[-Math.sin(b),Math.cos(b)]}function lM(e,t,n){var r=Dw(e,n);return eu(r,t!=="positive")}function T2(e,t){return lM(e,t.labelDirection,t)}function aj(e,t){var n=(0,ce.CR)(t.startPos,2),r=n[0],i=n[1],a=(0,ce.CR)(t.endPos,2),s=a[0],l=a[1],p=(0,ce.CR)([s-r,l-i],2),m=p[0],y=p[1];return[r+m*e,i+y*e]}function oj(e,t){var n=t.radius,r=(0,ce.CR)(t.center,2),i=r[0],a=r[1],s=Ks(Y5(e,t));return[i+n*Math.cos(s),a+n*Math.sin(s)]}function Nw(e,t){return t.type==="linear"?aj(e,t):oj(e,t)}function q5(e){return Dw(0,e)[1]===0}function K5(e){return Dw(0,e)[0]===0}function Q5(e,t){return t-e===360}function J5(e,t,n,r,i){var a=t-e,s=(0,ce.CR)([i,i],2),l=s[0],p=s[1],m=(0,ce.CR)([Ks(e),Ks(t)],2),y=m[0],b=m[1],E=function(ut){return[n+i*Math.cos(ut),r+i*Math.sin(ut)]},O=(0,ce.CR)(E(y),2),P=O[0],I=O[1],N=(0,ce.CR)(E(b),2),z=N[0],V=N[1];if(Q5(e,t)){var W=(b+y)/2,K=(0,ce.CR)(E(W),2),J=K[0],oe=K[1];return[["M",P,I],["A",l,p,0,1,0,J,oe],["A",l,p,0,1,0,z,V]]}var Te=a>180?1:0,Re=e>t?0:1,We=!1;return We?"M".concat(n,",").concat(r,",L").concat(P,",").concat(I,",A").concat(l,",").concat(p,",0,").concat(Te,",").concat(Re,",").concat(z,",").concat(V,",L").concat(n,",").concat(r):"M".concat(P,",").concat(I,",A").concat(l,",").concat(p,",0,").concat(Te,",").concat(Re,",").concat(z,",").concat(V)}function sj(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,a=t.radius;return(0,ce.ev)((0,ce.ev)([n,r],(0,ce.CR)(i),!1),[a],!1)}function uj(e,t,n,r){var i=t.startAngle,a=t.endAngle,s=t.center,l=t.radius;return e.selectAll(Rs.line.class).data([{path:J5.apply(void 0,(0,ce.ev)((0,ce.ev)([i,a],(0,ce.CR)(s),!1),[l],!1))}],function(p,m){return m}).join(function(p){return p.append("path").attr("className",Rs.line.name).styles(t).styles({path:function(m){return m.path}})},function(p){return p.transition(function(){var m=this,y=ij(this,sj(this),(0,ce.ev)((0,ce.ev)([i,a],(0,ce.CR)(s),!1),[l],!1),r.update);if(y){var b=function(){var E=ql(m.attributes,"__keyframe_data__");m.style.path=J5.apply(void 0,(0,ce.ev)([],(0,ce.CR)(E),!1))};y.onframe=b,y.onfinish=b}return y}).styles(t)},function(p){return p.remove()}).styles(n).transitions()}function lj(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function cj(e,t,n){n===void 0&&(n=[0,0]);var r=(0,ce.CR)([e,t,n],3),i=(0,ce.CR)(r[0],2),a=i[0],s=i[1],l=(0,ce.CR)(r[1],2),p=l[0],m=l[1],y=(0,ce.CR)(r[2],2),b=y[0],E=y[1],O=(0,ce.CR)([p-a,m-s],2),P=O[0],I=O[1],N=Math.sqrt(Math.pow(P,2)+Math.pow(I,2)),z=(0,ce.CR)([-b/N,E/N],2),V=z[0],W=z[1];return[V*P,V*I,W*P,W*I]}function ek(e){var t=(0,ce.CR)(e,2),n=(0,ce.CR)(t[0],2),r=n[0],i=n[1],a=(0,ce.CR)(t[1],2),s=a[0],l=a[1];return{x1:r,y1:i,x2:s,y2:l}}function fj(e,t,n,r){var i=t.showTrunc,a=t.startPos,s=t.endPos,l=t.truncRange,p=t.lineExtension,m=(0,ce.CR)([a,s],2),y=(0,ce.CR)(m[0],2),b=y[0],E=y[1],O=(0,ce.CR)(m[1],2),P=O[0],I=O[1],N=(0,ce.CR)(p?cj(a,s,p):new Array(4).fill(0),4),z=N[0],V=N[1],W=N[2],K=N[3],J=function(Yt){return e.selectAll(Rs.line.class).data(Yt,function(fn,Hn){return Hn}).join(function(fn){return fn.append("line").attr("className",function(Hn){return"".concat(Rs.line.name," ").concat(Hn.className)}).styles(n).transition(function(Hn){return Ot(this,ek(Hn.line),!1)})},function(fn){return fn.styles(n).transition(function(Hn){var cr=Hn.line;return Ot(this,ek(cr),r.update)})},function(fn){return fn.remove()}).transitions()};if(!i||!l)return J([{line:[[b+z,E+V],[P+W,I+K]],className:Rs.line.name}]);var oe=(0,ce.CR)(l,2),Te=oe[0],Re=oe[1],We=P-b,ut=I-E,ct=(0,ce.CR)([b+We*Te,E+ut*Te],2),Ft=ct[0],ft=ct[1],St=(0,ce.CR)([b+We*Re,E+ut*Re],2),Mt=St[0],Nt=St[1],tn=J([{line:[[b+z,E+V],[Ft,ft]],className:Rs.lineFirst.name},{line:[[Mt,Nt],[P+W,I+K]],className:Rs.lineSecond.name}]);return lj(e,t),tn}function hj(e,t,n,r){var i=n.showArrow,a=n.showTrunc,s=n.lineArrow,l=n.lineArrowOffset,p=n.lineArrowSize,m;if(t==="arc"?m=e.select(Rs.line.class):a?m=e.select(Rs.lineSecond.class):m=e.select(Rs.line.class),!i||!s||n.type==="arc"&&Q5(n.startAngle,n.endAngle)){var y=m.node();y&&(y.style.markerEnd=void 0);return}var b=k_(s);b.attr(r),sM(b,p,!0),m.style("markerEnd",b).style("markerEndOffset",-l)}function dj(e,t,n){var r=t.type,i,a=js(t,"line");return r==="linear"?i=fj(e,t,G5(a,"arrow"),n):i=uj(e,t,G5(a,"arrow"),n),hj(e,r,t,a),i}function pj(e,t){return lM(e,t.gridDirection,t)}function tk(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function vj(e,t){var n=t.gridLength;return e.map(function(r,i){var a=r.value,s=(0,ce.CR)(Nw(a,t),2),l=s[0],p=s[1],m=(0,ce.CR)(A0(pj(a,t),n),2),y=m[0],b=m[1];return{id:i,points:[[l,p],[l+y,p+b]]}})}function mj(e,t){var n=t.gridControlAngles,r=tk(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=(0,ce.CR)(r,2),a=i[0],s=i[1];return e.map(function(l,p){var m=l.value,y=(0,ce.CR)(Nw(m,t),2),b=y[0],E=y[1],O=(0,ce.CR)([b-a,E-s],2),P=O[0],I=O[1],N=[];return n.forEach(function(z){var V=Ks(z),W=(0,ce.CR)([Math.cos(V),Math.sin(V)],2),K=W[0],J=W[1],oe=P*K-I*J+a,Te=P*J+I*K+s;N.push([oe,Te])}),{points:N,id:p}})}function gj(e,t,n,r){var i=js(n,"grid"),a=i.type,s=i.areaFill,l=tk(n),p=uM(t,n.gridFilter),m=a==="segment"?vj(p,n):mj(p,n),y=(0,ce.pi)((0,ce.pi)({},i),{center:l,areaFill:hh(s)?p.map(function(b,E){return Zv(s,[b,E,p])}):s,animate:r,data:m});return e.selectAll(Rs.grid.class).data([1]).join(function(b){return b.append(function(){return new ej({style:y})}).attr("className",Rs.grid.name)},function(b){return b.transition(function(){return this.update(y)})},function(b){return b.remove()}).transitions()}function nd(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}function yj(e){var t,n,r,i=e||1;function a(l,p){++t>i&&(r=n,s(1),++t),n[l]=p}function s(l){t=0,n=Object.create(null),l||(r=Object.create(null))}return s(),{clear:s,has:function(l){return n[l]!==void 0||r[l]!==void 0},get:function(l){var p=n[l];if(p!==void 0)return p;if((p=r[l])!==void 0)return a(l,p),p},set:function(l,p){n[l]!==void 0?n[l]=p:a(l,p)}}}var _j=function(e,t,n){if(n===void 0&&(n=128),!hh(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=t?t.apply(this,i):i[0],l=r.cache;if(l.has(s))return l.get(s);var p=e.apply(this,i);return l.set(s,p),p};return r.cache=yj(n),r},Bw,cM;function Khe(e){cM=e}var bj=_j(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,s=t.fontVariant;return cM?cM(e,n):(Bw||(Bw=pi.offscreenCanvasCreator.getOrCreateContext(void 0)),Bw.font=[a,s,i,"".concat(n,"px"),r].join(" "),Bw.measureText(e).width)},function(e,t){return[e,Object.values(t||nk(e)).join()].join("")},4096),nk=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,a=e.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function rk(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function ik(e,t){var n=rk(e);n&&n.attr(t)}function fM(e,t,n){n===void 0&&(n="..."),ik(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function xj(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),ik(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function Ej(e,t,n){var r=e.getBBox(),i=r.width,a=r.height,s=(0,ce.CR)([t,n].map(function(m,y){var b;return m.includes("%")?parseFloat(((b=m.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||b===void 0?void 0:b[0])||"0")/100*(y===0?i:a):m}),2),l=s[0],p=s[1];return[l,p]}function Fw(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,a,s){return"translate(".concat(Ej(e,a,s),")")});e.attr("transform",r)}catch(i){}}var ak=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};function rd(e){if((0,Yl.Z)(e))return[e,e,e,e];if(ai(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}var hM=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,a=i.x1,s=i.y1,l=i.x2,p=i.y2,m=Math.cos(t),y=Math.sin(t),b=n-n*m+r*y,E=r-n*y-r*m,O=[[m*a-y*p+b,y*a+m*p+E],[m*l-y*p+b,y*l+m*p+E],[m*a-y*s+b,y*a+m*s+E],[m*l-y*s+b,y*l+m*s+E]];return O},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function zw(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getLocalBounds(),i=(0,ce.CR)(r.min,2),a=i[0],s=i[1],l=(0,ce.CR)(r.max,2),p=l[0],m=l[1],y=dM(e),b=y.width,E=y.height,O=E,P=0,I=0,N=a,z=s,V=rk(e);if(V){O-=1.5;var W=V.style.textAlign,K=V.style.textBaseline;W==="center"?N=(a+p)/2:(W==="right"||W==="end")&&(N=p),K==="middle"?z=(s+m)/2:K==="bottom"&&(z=m)}var J=(0,ce.CR)(rd(t),4),oe=J[0],Te=oe===void 0?0:oe,Re=J[1],We=Re===void 0?0:Re,ut=J[2],ct=ut===void 0?Te:ut,Ft=J[3],ft=Ft===void 0?We:Ft,St=new hM((P+=a)-ft,(I+=s)-Te,P+b+We,I+O+ct);return e.setEulerAngles(n),St.rotatedPoints(Ks(n),N,z)}function dM(e){return e.__bbox__?e.__bbox__:e.getBBox()}function A2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function C2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function Sj(e,t){var n=C2(e[0],e[1],t[0]),r=C2(e[0],e[1],t[1]),i=C2(t[0],t[1],e[0]),a=C2(t[0],t[1],e[1]);return!!(n!==r&&i!==a||n===0&&A2(e,t[0])||r===0&&A2(e,t[1])||i===0&&A2(t,e[0])||a===0&&A2(t,e[1]))}function wj(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,a=0;do{var s=[e[a],e[(a+1)%n]];if(Sj(s,r)){if(C2(s[0],t,s[1])===0)return A2(s,t);i++}a=(a+1)%n}while(a!==0);return!!(i&1)}function Tj(e,t){return t.every(function(n){return wj(e,n)})}function Aj(e,t,n){var r=e.x1,i=e.x2,a=e.y1,s=e.y2,l=[[r,a],[i,a],[i,s],[r,s]],p=zw(t,n);return Tj(l,p)}function ok(e,t){var n=(0,ce.CR)(e,4),r=n[0],i=n[1],a=n[2],s=n[3],l=(0,ce.CR)(t,4),p=l[0],m=l[1],y=l[2],b=l[3],E=a-r,O=s-i,P=y-p,I=b-m,N=E*I-P*O;if(N===0)return!1;var z=N>0,V=r-p,W=i-m,K=E*W-O*V;if(K<0===z)return!1;var J=P*W-I*V;return!(J<0===z||K>N===z||J>N===z)}function sk(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return ok(t,r)})}var Qhe={lineToLine:ok,intersectBoxLine:sk,getBounds:zw};function Cj(e,t,n){var r,i,a=zw(e,n).flat(1),s=zw(t,n).flat(1),l=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var p=(0,ce.XA)(l),m=p.next();!m.done;m=p.next()){var y=m.value;if(sk(s,y))return!0}}catch(b){r={error:b}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return!1}function Oj(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var a=e.center,s=e.radius,l=(0,ce.CR)(a,2),p=l[0],m=l[1],y=r==="negative"?0:i,b=-s-y,E=s+y,O=(0,ce.CR)(rd(t),4),P=O[0],I=O[1],N=O[2],z=O[3];return new hM(p+b-z,m+b-P,p+E+I,m+E+N)}var V=(0,ce.CR)(e.startPos,2),W=V[0],K=V[1],J=(0,ce.CR)(e.endPos,2),oe=J[0],Te=J[1],Re=(0,ce.CR)(K5(e)?[-t,0,t,0]:[0,t,0,-t],4),We=Re[0],ut=Re[1],ct=Re[2],Ft=Re[3],ft=T2(0,e),St=A0(ft,i),Mt=new hM(W,K,oe,Te);return Mt.x1+=Ft,Mt.y1+=We,Mt.x2+=ut+St[0],Mt.y2+=ct+St[1],Mt}function Uw(e,t,n){var r,i,a=t.crossPadding,s=new Set,l=null,p=Oj(t,a),m=function(P){return p?Aj(p,P):!0},y=function(P,I){return P?!Cj(P,I,rd(n)):!0};try{for(var b=(0,ce.XA)(e),E=b.next();!E.done;E=b.next()){var O=E.value;m(O)?!l||y(l,O)?l=O:(s.add(l),s.add(O)):s.add(O)}}catch(P){r={error:P}}finally{try{E&&!E.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}return Array.from(s)}function pM(e,t){return t===void 0&&(t={}),(0,wa.Z)(e)?0:typeof e=="number"?e:Math.floor(bj(e,t))}function Mj(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,a=i===void 0?"...":i,s=t.minLength,l=t.maxLength,p=l===void 0?1/0:l,m=t.step,y=m===void 0?" ":m,b=t.margin,E=b===void 0?[0,0,0,0]:b,O=nk(r.getTextShape(e[0])),P=pM(y,O),I=s?pM(s,O):P,N=pM(p,O);((0,wa.Z)(N)||N===1/0)&&(N=Math.max.apply(null,e.map(function(St){return dM(St).width})));for(var z=e.slice(),V=(0,ce.CR)(E,4),W=V[0],K=W===void 0?0:W,J=V[1],oe=J===void 0?0:J,Te=V[2],Re=Te===void 0?K:Te,We=V[3],ut=We===void 0?oe:We,ct=function(St){if(z.forEach(function(Mt){r.ellipsis(r.getTextShape(Mt),St,a)}),z=Uw(e,n,E),z.length<1)return{value:void 0}},Ft=N;Ft>I+P;Ft-=P){var ft=ct(Ft);if(typeof ft=="object")return ft.value}}}function Jhe(e){var t=e&&e.getRenderBounds();if(!t)return{width:0,height:0};var n=t.getMax(),r=t.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function uk(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=(0,ce.CR)([n,r],2),a=(0,ce.CR)(i[0],2),s=a[0],l=a[1],p=(0,ce.CR)(i[1],2),m=p[0],y=p[1];return{x:s,y:l,width:m-s,height:y-l,left:s,bottom:y,top:l,right:m}}function ede(e,t){var n=select(e).append("text").node();return n.attr(__assign(__assign({},t),{visibility:"hidden"})),n}function Rj(e,t){var n=(0,ce.CR)(e,2),r=n[0],i=n[1],a=(0,ce.CR)(t,2),s=a[0],l=a[1];return r!==s&&i===l}function tde(e,t){var n=__read(e,2),r=n[0],i=n[1],a=__read(t,2),s=a[0],l=a[1];return r===s&&i!==l}function Pj(e,t){var n,r,i=t.attributes;try{for(var a=(0,ce.XA)(Object.entries(i)),s=a.next();!s.done;s=a.next()){var l=(0,ce.CR)(s.value,2),p=l[0],m=l[1];p!=="id"&&p!=="className"&&e.attr(p,m)}}catch(y){n={error:y}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var Ij={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,a){return a%r?(g(i),!1):!0})}},kj=function(e){return e.filter(ak)};function Lj(e,t,n,r){var i=e.length,a=t.keepHeader,s=t.keepTail;if(!(i<=1||i===2&&a&&s)){var l=Ij.parity,p=function(W){return W.forEach(r.show),W},m=2,y=e.slice(),b=e.slice(),E=Math.min.apply(Math,(0,ce.ev)([1],(0,ce.CR)(e.map(function(W){return dM(W).width})),!1));if(n.type==="linear"&&(q5(n)||K5(n))){var O=uk(e[0]).left,P=uk(e[i-1]).right,I=Math.abs(P-O)||1;m=Math.max(Math.floor(i*E/I),m)}var N,z;for(a&&(N=y.splice(0,1)[0]),s&&(z=y.splice(-1,1)[0],y.reverse()),p(y);m<e.length&&Uw(kj(z?(0,ce.ev)((0,ce.ev)([z],(0,ce.CR)(b),!1),[N],!1):(0,ce.ev)([N],(0,ce.CR)(b),!1)),n,t==null?void 0:t.margin).length;){if(z&&!N&&m%2===0){var V=y.splice(0,1);V.forEach(r.hide)}else if(z&&N){var V=y.splice(0,1);V.forEach(r.hide)}b=l(p(y),{seq:m}),m++}}}function Dj(e,t,n,r){var i,a,s=t.optionalAngles,l=s===void 0?[0,45,90]:s,p=t.margin,m=t.recoverWhenFailed,y=m===void 0?!0:m,b=e.map(function(z){return z.getLocalEulerAngles()}),E=function(){return Uw(e,n,p).length<1},O=function(z){return e.forEach(function(V,W){var K=Array.isArray(z)?z[W]:z;r.rotate(V,+K)})};try{for(var P=(0,ce.XA)(l),I=P.next();!I.done;I=P.next()){var N=I.value;if(O(N),E())return}}catch(z){i={error:z}}finally{try{I&&!I.done&&(a=P.return)&&a.call(P)}finally{if(i)throw i.error}}y&&O(b)}function Nj(e){var t=e.type,n=e.labelDirection;return t==="linear"&&q5(e)?n==="negative"?"bottom":"top":"middle"}function Bj(e,t,n,r){var i=t.wordWrapWidth,a=i===void 0?50:i,s=t.maxLines,l=s===void 0?3:s,p=t.recoverWhenFailed,m=p===void 0?!0:p,y=t.margin,b=y===void 0?[0,0,0,0]:y,E=e.map(function(V){return V.attr("maxLines")||1}),O=Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(E),!1)),P=function(){return Uw(e,n,b).length<1},I=Nj(n),N=function(V){return e.forEach(function(W,K){var J=Array.isArray(V)?V[K]:V;r.wrap(W,a,J,I)})};if(!(O>l)){for(var z=O;z<=l;z++)if(N(z),P())return;m&&N(E)}}var Fj=new Map([["hide",Lj],["rotate",Dj],["ellipsis",Mj],["wrap",Bj]]);function zj(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!si(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function Uj(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(a){var s=a.type,l=Fj.get(s);zj(e,t,s)&&(l==null||l(e,a,t,n))})}function jj(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function lk(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function vM(e,t){var n=(0,ce.CR)(e,2),r=n[0],i=n[1],a=(0,ce.CR)(t,2),s=a[0],l=a[1],p=(0,ce.CR)([r*s+i*l,r*l-i*s],2),m=p[0],y=p[1];return Math.atan2(y,m)}function Zj(e){var t=(e+360)%180;return nd(t,-90,90)||(t+=180),t}function Vj(e,t,n){var r,i=n.labelAlign,a=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(a)return t.getLocalEulerAngles();var s=0,l=T2(e.value,n),p=Dw(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?s=vM([1,0],l):s=vM([p[0]<0?-1:1,0],p),Zj(Ia(s)))}function ck(e,t,n){var r=n.type,i=n.labelAlign,a=T2(e,n),s=lk(t),l=lk(Ia(vM([1,0],a))),p="center",m="middle";return r==="linear"?[90,270].includes(l)&&s===0?(p="center",m=a[1]===1?"top":"bottom"):!(l%180)&&[90,270].includes(s)?p="center":l===0?(nd(s,0,90,!1,!0)||nd(s,0,90)||nd(s,270,360))&&(p="start"):l===90?nd(s,0,90,!1,!0)?p="start":(nd(s,90,180)||nd(s,270,360))&&(p="end"):l===270?nd(s,0,90,!1,!0)?p="end":(nd(s,90,180)||nd(s,270,360))&&(p="start"):l===180&&(s===90?p="start":(nd(s,0,90)||nd(s,270,360))&&(p="end")):i==="parallel"?nd(l,0,180,!0)?m="top":m="bottom":i==="horizontal"?nd(l,90,270,!1)?p="end":(nd(l,270,360,!1)||nd(l,0,90))&&(p="start"):i==="perpendicular"&&(nd(l,90,270)?p="end":p="start"),{textAlign:p,textBaseline:m}}function Hj(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=ck(r,e,n),a=t.querySelector(Rs.labelItem.class);a&&hk(a,i)}function fk(e,t,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,s=n.labelDirection,l=n.labelSpacing,p=t.indexOf(e),m=Zv(l,[e,p,t]),y=(0,ce.CR)([T2(e.value,n),jj(s,a)],2),b=y[0],E=y[1],O=E===1?Zv(r?i:0,[e,p,t]):0,P=(0,ce.CR)(R_(A0(b,m+O),Nw(e.value,n)),2),I=P[0],N=P[1];return{x:I,y:N}}function Wj(e,t,n,r){var i=r.labelFormatter,a=hh(i)?function(){return k_(Zv(i,[e,t,n,T2(e.value,r)]))}:function(){return k_(e.label||"")};return a}function hk(e,t){e.nodeName==="text"&&e.attr(t)}function dk(e){Uj(this.node().childNodes,e,{hide:g,show:d,rotate:function(t,n){Hj(+n,t,e)},ellipsis:function(t,n,r){t&&fM(t,n||1/0,r)},wrap:function(t,n,r){t&&xj(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function pk(e,t,n,r,i){var a=n.indexOf(t),s=so(e).append(Wj(t,a,n,i)).attr("className",Rs.labelItem.name).node(),l=(0,ce.CR)(ag(X5(r,[t,a,n])),2),p=l[0],m=l[1],y=m.transform,b=(0,ce._T)(m,["transform"]);Fw(e,y);var E=Vj(t,e,i);return e.setLocalEulerAngles(+E),hk(s,(0,ce.pi)((0,ce.pi)({},ck(t.value,E,i)),p)),Fw(e,y),e.attr(b),s}function $j(e,t,n,r){var i=uM(t,n.labelFilter),a=js(n,"label");return e.selectAll(Rs.label.class).data(i,function(s,l){return l}).join(function(s){return s.append("g").attr("className",Rs.label.name).transition(function(l){return pk(this,l,t,a,n),this.attr(fk(l,t,n)),this.__bbox__=l.bbox,null}).call(function(){return dk.call(e,n)})},function(s){return s.transition(function(l){var p=this.querySelector(Rs.labelItem.class),m=pk(this,l,t,a,n),y=_t(p,m,r.update),b=Ot(this,fk(l,t,n),r.update);return this.__bbox__=l.bbox,(0,ce.ev)((0,ce.ev)([],(0,ce.CR)(y),!1),[b],!1)}).call(function(l){var p=ql(l,"_transitions").flat().filter(ak);$(p,function(){return dk.call(e,n)})})},function(s){return s.transition(function(){var l=this,p=Lw(this.childNodes[0],r.exit);return F(p,function(){return so(l).remove()}),p})}).transitions()}function vk(e,t){return lM(e,t.tickDirection,t)}function Gj(e,t){var n=(0,ce.CR)(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function Xj(e,t,n,r,i){var a=i.tickLength,s=(0,ce.CR)(Gj(r,Zv(a,[e,t,n])),2),l=(0,ce.CR)(s[0],2),p=l[0],m=l[1],y=(0,ce.CR)(s[1],2),b=y[0],E=y[1];return{x1:p,x2:b,y1:m,y2:E}}function Yj(e,t,n,r,i){var a=i.tickFormatter,s=vk(t.value,i),l="line";return hh(a)&&(l=function(){return Zv(a,[t,n,r,s])}),e.append(l).attr("className",Rs.tickItem.name)}function qj(e,t,n,r,i,a,s){var l=vk(e.value,a),p=Xj(e,t,n,l,a),m=p.x1,y=p.x2,b=p.y1,E=p.y2,O=(0,ce.CR)(ag(X5(s,[e,t,n,l])),2),P=O[0],I=O[1];r.node().nodeName==="line"&&r.styles((0,ce.pi)({x1:m,x2:y,y1:b,y2:E},P)),i.attr(I),r.styles(P)}function mk(e,t,n,r,i,a){var s=Yj(so(this),e,t,n,r);qj(e,t,n,s,this,r,i);var l=(0,ce.CR)(Nw(e.value,r),2),p=l[0],m=l[1];return Ot(this,{x:p,y:m},a)}function Kj(e,t,n,r){var i=uM(t,n.tickFilter),a=js(n,"tick");return e.selectAll(Rs.tick.class).data(i,function(s){return s.id||s.label}).join(function(s){return s.append("g").attr("className",Rs.tick.name).transition(function(l,p){return mk.call(this,l,p,i,n,a,!1)})},function(s){return s.transition(function(l,p){return this.removeChildren(),mk.call(this,l,p,i,n,a,r.update)})},function(s){return s.transition(function(){var l=this,p=Lw(this.childNodes[0],r.exit);return F(p,function(){return l.remove()}),p})}).transitions()}var Kl=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function nde(e){var t=e.getRenderBounds(),n=__read(t.min,2),r=n[0],i=n[1],a=__read(t.max,2),s=a[0],l=a[1],p=s-r,m=l-i;return new Kl(r,i,p,m)}var gk=Uu({text:"text"},"title");function jw(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function Qj(e,t){var n=e.attributes,r=n.position,i=n.spacing,a=n.inset,s=n.text,l=e.getBBox(),p=t.getBBox(),m=jw(r),y=(0,ce.CR)(rd(s?i:0),4),b=y[0],E=y[1],O=y[2],P=y[3],I=(0,ce.CR)(rd(a),4),N=I[0],z=I[1],V=I[2],W=I[3],K=(0,ce.CR)([P+E,b+O],2),J=K[0],oe=K[1],Te=(0,ce.CR)([W+z,N+V],2),Re=Te[0],We=Te[1];if(m[0]==="l")return new Kl(l.x,l.y,p.width+l.width+J+Re,Math.max(p.height+We,l.height));if(m[0]==="t")return new Kl(l.x,l.y,Math.max(p.width+Re,l.width),p.height+l.height+oe+We);var ut=(0,ce.CR)([t.attributes.width||p.width,t.attributes.height||p.height],2),ct=ut[0],Ft=ut[1];return new Kl(p.x,p.y,ct+l.width+J+Re,Ft+l.height+oe+We)}function Jj(e,t){var n=Object.entries(t).reduce(function(r,i){var a=(0,ce.CR)(i,2),s=a[0],l=a[1],p=e.node().attr(s);return p||(r[s]=l),r},{});e.styles(n)}function eZ(e){var t,n,r,i,a=e,s=a.width,l=a.height,p=a.position,m=(0,ce.CR)([+s/2,+l/2],2),y=m[0],b=m[1],E=(0,ce.CR)([+y,+b,"center","middle"],4),O=E[0],P=E[1],I=E[2],N=E[3],z=jw(p);return z.includes("l")&&(t=(0,ce.CR)([0,"start"],2),O=t[0],I=t[1]),z.includes("r")&&(n=(0,ce.CR)([+s,"end"],2),O=n[0],I=n[1]),z.includes("t")&&(r=(0,ce.CR)([0,"top"],2),P=r[0],N=r[1]),z.includes("b")&&(i=(0,ce.CR)([+l,"bottom"],2),P=i[0],N=i[1]),{x:O,y:P,textAlign:I,textBaseline:N}}var yk=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,a=r.height,s=r.position,l=r.spacing,p=r.inset,m=n.querySelector(gk.text.class);if(!m)return new Kl(0,0,+i,+a);var y=m.getBBox(),b=y.width,E=y.height,O=(0,ce.CR)(rd(l),4),P=O[0],I=O[1],N=O[2],z=O[3],V=(0,ce.CR)([0,0,+i,+a],4),W=V[0],K=V[1],J=V[2],oe=V[3],Te=jw(s);if(Te.includes("i"))return new Kl(W,K,J,oe);Te.forEach(function(Nt,tn){var Yt,fn,Hn,cr;Nt==="t"&&(Yt=(0,ce.CR)(tn===0?[E+N,+a-E-N]:[0,+a],2),K=Yt[0],oe=Yt[1]),Nt==="r"&&(fn=(0,ce.CR)([+i-b-z],1),J=fn[0]),Nt==="b"&&(Hn=(0,ce.CR)([+a-E-P],1),oe=Hn[0]),Nt==="l"&&(cr=(0,ce.CR)(tn===0?[b+I,+i-b-I]:[0,+i],2),W=cr[0],J=cr[1])});var Re=(0,ce.CR)(rd(p),4),We=Re[0],ut=Re[1],ct=Re[2],Ft=Re[3],ft=(0,ce.CR)([Ft+ut,We+ct],2),St=ft[0],Mt=ft[1];return new Kl(W+Ft,K+We,J-St,oe-Mt)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Kl(0,0,0,0)},t.prototype.render=function(n,r){var i=this,a=n.width,s=n.height,l=n.position,p=n.spacing,m=(0,ce._T)(n,["width","height","position","spacing"]),y=(0,ce.CR)(ag(m),1),b=y[0],E=eZ(n),O=E.x,P=E.y,I=E.textAlign,N=E.textBaseline;Hr(!!m.text,so(r),function(z){i.title=z.maybeAppendByClassName(gk.text,"text").styles(b).call(Jj,{x:O,y:P,textAlign:I,textBaseline:N}).node()})},t}(hr);function tZ(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,a=n.titleSpacing,s=jw(i),l=e.node().getLocalBounds(),p=(0,ce.CR)(l.min,2),m=p[0],y=p[1],b=(0,ce.CR)(l.halfExtents,2),E=b[0],O=b[1],P=(0,ce.CR)(t.node().getLocalBounds().halfExtents,2),I=P[0],N=P[1],z=(0,ce.CR)([m+E,y+O],2),V=z[0],W=z[1],K=(0,ce.CR)(rd(a),4),J=K[0],oe=K[1],Te=K[2],Re=K[3];if(["start","end"].includes(i)&&n.type==="linear"){var We=n.startPos,ut=n.endPos,ct=(0,ce.CR)(i==="start"?[We,ut]:[ut,We],2),Ft=ct[0],ft=ct[1],St=kw([-ft[0]+Ft[0],-ft[1]+Ft[1]]),Mt=(0,ce.CR)(A0(St,J),2),Nt=Mt[0],tn=Mt[1];return{x:Ft[0]+Nt,y:Ft[1]+tn}}return s.includes("t")&&(W-=O+N+J),s.includes("r")&&(V+=E+I+oe),s.includes("l")&&(V-=E+I*2+Re),s.includes("b")&&(W+=O+N*2+Te),{x:V,y:W}}function nZ(e,t,n){var r=e.cloneNode(!0);r.style.transform="scale(1, 1)",r.style.transform="none";var i=r.getBBox().height;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function _k(e,t,n,r,i){var a=js(r,"title"),s=(0,ce.CR)(ag(a),2),l=s[0],p=s[1],m=p.transform,y=(0,ce._T)(p,["transform"]);e.styles(l),t.styles(y);var b=m||nZ(e.node(),l.direction,l.position);Fw(e.node(),b);var E=tZ(so(n._offscreen||n.querySelector(Rs.mainGroup.class)),t,r),O=E.x,P=E.y,I=Ot(t.node(),{x:O,y:P},i);return Fw(e.node(),b),I}function rZ(e,t,n,r){var i=n.titleText;return e.selectAll(Rs.title.class).data([{title:i}].filter(function(a){return!!a.title}),function(a,s){return a.title}).join(function(a){return a.append(function(){return k_(i)}).attr("className",Rs.title.name).transition(function(){return _k(so(this),e,t,n,r.enter)})},function(a){return a.transition(function(){return _k(so(this),e,t,n,r.update)})},function(a){return a.remove()}).transitions()}function bk(e,t,n,r){var i=e.showLine,a=e.showTick,s=e.showLabel,l=t.maybeAppendByClassName(Rs.lineGroup,"g"),p=Hr(i,l,function(O){return dj(O,e,r)})||[],m=t.maybeAppendByClassName(Rs.tickGroup,"g"),y=Hr(a,m,function(O){return Kj(O,n,e,r)})||[],b=t.maybeAppendByClassName(Rs.labelGroup,"g"),E=Hr(s,b,function(O){return $j(O,n,e,r)})||[];return(0,ce.ev)((0,ce.ev)((0,ce.ev)([],(0,ce.CR)(p),!1),(0,ce.CR)(y),!1),(0,ce.CR)(E),!1).filter(function(O){return!!O})}var mM=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,td)||this}return t.prototype.render=function(n,r,i){var a=this,s=n.titleText,l=n.data,p=n.animate,m=n.showTitle,y=n.showGrid,b=n.dataThreshold,E=n.truncRange,O=ha(l,b).filter(function(J){var oe=J.value;return!(E&&oe>E[0]&&oe<E[1])}),P=k(i===void 0?p:i),I=so(r).maybeAppendByClassName(Rs.gridGroup,"g"),N=Hr(y,I,function(J){return gj(J,O,n,P)})||[],z=so(r).maybeAppendByClassName(Rs.mainGroup,"g");s&&(!this.initialized&&P.enter||this.initialized&&P.update)&&bk(n,so(this.offscreenGroup),O,k(!1));var V=bk(n,so(z.node()),O,P),W=so(r).maybeAppendByClassName(Rs.titleGroup,"g"),K=Hr(m,W,function(J){return rZ(J,a,n,P)})||[];return(0,ce.ev)((0,ce.ev)((0,ce.ev)([],(0,ce.CR)(N),!1),(0,ce.CR)(V),!1),(0,ce.CR)(K),!1).flat().filter(function(J){return!!J})},t}(hr),iZ={}.toString,aZ=function(e,t){return iZ.call(e)==="[object "+t+"]"},O2=aZ,gM=function(e){return O2(e,"Function")},xk=function(e){return Array.isArray?Array.isArray(e):O2(e,"Array")},oZ=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function sZ(e,t){if(e){var n;if(xk(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(oZ(e)){for(var a in e)if(e.hasOwnProperty(a)&&(n=t(e[a],a),n===!1))break}}}var Ek=sZ,rde=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Ek(e,function(n,r){gM(e)&&r==="prototype"||t.push(r)}),t},ide=null;function ade(e,t){var n=keys(t),r=n.length;if(isNil(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var ode=null,uZ=function(e){return typeof e=="object"&&e!==null},lZ=uZ,cZ=function(e){if(!lZ(e)||!O2(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Sk=cZ;function sde(e,t){if(!isArray(e))return null;var n;if(isFunction(t)&&(n=t),isPlainObject(t)&&(n=function(i){return isMatch(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var ude=null,lde=function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r],a=i[t];if(!isNil(a)){isArray(a)?n=a[0]:n=a;break}}return n},cde=null,fde=function(e){if(!isArray(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},hde=null,fZ=function(e,t){if(t===void 0&&(t=[]),!isArray(e))t.push(e);else for(var n=0;n<e.length;n+=1)fZ(e[n],t);return t},dde=null,pde=function(e){if(isArray(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},vde=function(e){if(isArray(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},mde=function(e){var t=e.filter(function(s){return!isNaN(s)});if(!t.length)return{min:0,max:0};if(isArray(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=getMax(t),a=getMin(t);return{min:a,max:i}},gde=null,wk=Array.prototype,hZ=wk.splice,dZ=wk.indexOf,yde=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=-1;(a=dZ.call(e,i))>-1;)hZ.call(e,a,1);return e},_de=null,pZ=Array.prototype.splice,bde=function(t,n){if(!isArrayLike(t))return[];for(var r=t?n.length:0,i=r-1;r--;){var a=void 0,s=n[r];(r===i||s!==a)&&(a=s,pZ.call(t,s,1))}return t},xde=null,Ede=function(e,t,n){if(!isArray(e)&&!isPlainObject(e))return e;var r=n;return each(e,function(i,a){r=t(r,i,a)}),r},Sde=null,wde=function(e,t){var n=[];if(!isArrayLike(e))return n;for(var r=-1,i=[],a=e.length;++r<a;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return pullAt(e,i),n},Tde=null,vZ=function(e){return O2(e,"String")};function Ade(e,t){var n;if(isFunction(t))n=function(i,a){return t(i)-t(a)};else{var r=[];isString(t)?r.push(t):isArray(t)&&(r=t),n=function(i,a){for(var s=0;s<r.length;s+=1){var l=r[s];if(i[l]>a[l])return 1;if(i[l]<a[l])return-1}return 0}}return e.sort(n),e}var Cde=null,Ode=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],s=a[t];if(!isNil(s)){isArray(s)||(s=[s]);for(var l=0;l<s.length;l++){var p=s[l];r[p]||(n.push(p),r[p]=!0)}}}return n};function Mde(e,t){return isArray(e)||isString(e)?e[0]===t:!1}var Rde=null;function Pde(e,t){return isArray(e)||isString(e)?e[e.length-1]===t:!1}var Ide=null,mZ=Object.prototype.hasOwnProperty;function kde(e,t){if(!t||!isArray(e))return{};for(var n={},r=isFunction(t)?t:function(l){return l[t]},i,a=0;a<e.length;a++){var s=e[a];i=r(s),mZ.call(n,i)?n[i].push(s):n[i]=[s]}return n}var Lde=null;function Dde(e,t){if(!t)return{0:e};if(!isFunction(t)){var n=isArray(t)?t:t.replace(/\s+/g,"").split("*");t=function(r){for(var i="_",a=0,s=n.length;a<s;a++)i+=r[n[a]]&&r[n[a]].toString();return i}}return groupBy(e,t)}var Nde=function(e,t){if(!t)return[e];var n=groupToMap(e,t),r=[];for(var i in n)r.push(n[i]);return r},Tk={};function Bde(e){var t=Tk[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;t="#"+n,Tk[e]=t}return t}var Fde=null;function zde(e){var t=0,n=0,r=0,i=0;return isArray(e)?e.length===1?t=n=r=i=e[0]:e.length===2?(t=r=e[0],n=i=e[1]):e.length===3?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}var Ude=null,gZ=function(e){return O2(e,"Number")},fb=gZ,jde=function(e){return isNumber(e)&&e%1!==0},Zde=null,Vde=function(e){return isNumber(e)&&e%2===0},Hde=null,Wde=Number.isInteger?Number.isInteger:function(e){return fb(e)&&e%1===0},$de=null,Gde=function(e){return isNumber(e)&&e<0},Xde=null,Yde=function(e){return isNumber(e)&&e%2!==0},qde=null,Kde=function(e){return isNumber(e)&&e>0},Qde=null,Jde=function(e,t){if(isArray(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],s=isFunction(t)?t(a):a[t];s>r&&(n=a,r=s)}return n}},epe=function(e,t){if(isArray(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],s=isFunction(t)?t(a):a[t];s<r&&(n=a,r=s)}return n}},yZ=180/Math.PI,tpe=function(e){return yZ*e},npe=null,_Z=Math.PI/180,rpe=function(e){return _Z*e},ipe=null,ape=null,bZ=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Ek(e,function(n,r){gM(e)&&r==="prototype"||t.push(n)}),t},xZ=bZ,ope=function(e,t){return contains(values(e),t)},EZ={}.toString,spe=function(e){return EZ.call(e).replace(/^\[object /,"").replace(/]$/,"")},upe=null,lpe=function(e){return isType(e,"Arguments")},cpe=null,fpe=function(e){return isType(e,"Boolean")},hpe=null,dpe=function(e){return isType(e,"Date")},ppe=null,vpe=function(e){return isType(e,"Error")},mpe=null;function gpe(e){return isNumber(e)&&isFinite(e)}var SZ=function(e){return e===null},wZ=SZ,TZ=Object.prototype,ype=function(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||TZ;return e===n},_pe=null,bpe=function(e){return isType(e,"RegExp")},xpe=null,AZ=function(e){return e===void 0},CZ=AZ,Epe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var i=e[r];isFunction(i)&&(i=i.prototype),mix(n.prototype,i)}},Spe=null,Ak=function(e){if(typeof e!="object"||e===null)return e;var t;if(isArray(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=Ak(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=Ak(e[i]):t[i]=e[i]}return t},wpe=null,OZ=function(e,t){if(!gM(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var l=e.apply(this,r);return s.set(a,l),l};return n.cache=new Map,n},MZ=5;function Ck(e,t,n,r){n=n||0,r=r||MZ;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];a!==null&&Sk(a)?(Sk(e[i])||(e[i]={}),n<r?Ck(e[i],a,n+1,r):e[i]=t[i]):xk(a)?(e[i]=[],e[i]=e[i].concat(a)):a!==void 0&&(e[i]=a)}}var RZ=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Ck(e,t[r]);return e},Ok=RZ,Tpe=function(e,t,n,r){isFunction(t)||(n=t,t=e,e=function(){});var i=Object.create?function(s,l){return Object.create(s,{constructor:{value:l}})}:function(s,l){function p(){}p.prototype=s;var m=new p;return m.constructor=l,m},a=i(t.prototype,e);return e.prototype=mix(a,e.prototype),e.superclass=i(t.prototype,t),mix(a,n),mix(e,r),e},Ape=null,PZ=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},Mk=PZ,IZ=function(e,t){if(!Mk(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},Rk=IZ,kZ=Object.prototype.hasOwnProperty;function Cpe(e){if(isNil(e))return!0;if(isArrayLike(e))return!e.length;var t=getType(e);if(t==="Map"||t==="Set")return!e.size;if(isPrototype(e))return!Object.keys(e).length;for(var n in e)if(kZ.call(e,n))return!1;return!0}var Ope=null,Pk=function(e,t){if(e===t)return!0;if(!e||!t||isString(e)||isString(t))return!1;if(isArrayLike(e)||isArrayLike(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=Pk(e[r],t[r]),!!n);r++);return n}if(isObjectLike(e)||isObjectLike(t)){var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=Pk(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},Mpe=null,Rpe=function(e,t,n){return isFunction(n)?!!n(e,t):isEqual(e,t)},Ppe=function(e,t,n){for(var r=0,i=isString(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},Ipe=function(e,t,n){var r=e,i=isString(t)?t.split("."):t;return i.forEach(function(a,s){s<i.length-1?(isObject(r[a])||(r[a]=isNumber(i[s+1])?[]:{}),r=r[a]):r[a]=n}),e},LZ=Object.prototype.hasOwnProperty,kpe=function(e,t){if(e===null||!isPlainObject(e))return{};var n={};return each(t,function(r){LZ.call(e,r)&&(n[r]=e[r])}),n},Lpe=function(e,t){return reduce(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})},Zw={},Dpe=function(e){return e=e||"g",Zw[e]?Zw[e]+=1:Zw[e]=1,e+Zw[e]},L_=function(e){return e},DZ=function(e){return e==null},NZ=DZ;function Ik(e){return NZ(e)?0:Mk(e)?e.length:Object.keys(e).length}var Vw,Npe=OZ(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,a=t.fontStyle,s=t.fontVariant;return Vw||(Vw=document.createElement("canvas").getContext("2d")),Vw.font=[a,s,i,n+"px",r].join(" "),Vw.measureText(vZ(e)?e:"").width},function(e,t){return t===void 0&&(t={}),(0,ce.pr)([e],xZ(t)).join("")}),Bpe=function(e,t,n,r){r===void 0&&(r="...");var i=16,a=measureTextWidth(r,n),s=isString(e)?e:toString(e),l=t,p=[],m,y;if(measureTextWidth(e,n)<=t)return e;for(;m=s.substr(0,i),y=measureTextWidth(m,n),!(y+a>l&&y>l);)if(p.push(m),l-=y,s=s.substr(i),!s)return p.join("");for(;m=s.substr(0,1),y=measureTextWidth(m,n),!(y+a>l);)if(p.push(m),l-=y,s=s.substr(1),!s)return p.join("");return""+p.join("")+r},Fpe=function(){function e(){this.map={}}return e.prototype.has=function(t){return this.map[t]!==void 0},e.prototype.get=function(t,n){var r=this.map[t];return r===void 0?n:r},e.prototype.set=function(t,n){this.map[t]=n},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(t){delete this.map[t]},e.prototype.size=function(){return Object.keys(this.map).length},e}(),zpe=null;class M2{constructor(t){this.options=Ok({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=Ok({},this.options,t),this.rescale(t)}rescale(t){}}function Hw(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function hb(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function yM(e,t,n,r,i){let a=n||0,s=r||e.length;const l=i||(p=>p);for(;a<s;){const p=Math.floor((a+s)/2);l(e[p])>t?s=p:a=p+1}return a}var BZ=D(19818),FZ=D.n(BZ);function _M(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function zZ(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+n):r+n-r*n,s=2*r-a,l=_M(s,a,t+1/3),p=_M(s,a,t),m=_M(s,a,t-1/3);return[l*255,p*255,m*255,i]}function kk(e){const t=FZ().get(e);if(!t)return null;const{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?zZ(r):null}const db=(e,t)=>n=>e*(1-n)+t*n,UZ=(e,t)=>{const n=kk(e),r=kk(t);return n===null||r===null?n?()=>e:()=>t:i=>{const a=new Array(4);for(let y=0;y<4;y+=1){const b=n[y],E=r[y];a[y]=b*(1-i)+E*i}const[s,l,p,m]=a;return`rgba(${Math.round(s)}, ${Math.round(l)}, ${Math.round(p)}, ${m})`}},R2=(e,t)=>typeof e=="number"&&typeof t=="number"?db(e,t):typeof e=="string"&&typeof t=="string"?UZ(e,t):()=>e,jZ=(e,t)=>{const n=db(e,t);return r=>Math.round(n(r))};function Ww(e){return!CZ(e)&&!wZ(e)&&!Number.isNaN(e)}const bM=Math.sqrt(50),xM=Math.sqrt(10),EM=Math.sqrt(2);function $w(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Mf(10,i);return i>=0?(a>=bM?10:a>=xM?5:a>=EM?2:1)*Mf(10,i):-Mf(10,-i)/(a>=bM?10:a>=xM?5:a>=EM?2:1)}function Lk(e,t,n){const r=Math.abs(t-e)/Math.max(0,n);let i=Mf(10,Math.floor(Math.log(r)/Math.LN10));const a=r/i;return a>=bM?i*=10:a>=xM?i*=5:a>=EM&&(i*=2),t<e?-i:i}const Dk=(e,t,n=5)=>{const r=[e,t];let i=0,a=r.length-1,s=r[i],l=r[a],p;return l<s&&([s,l]=[l,s],[i,a]=[a,i]),p=$w(s,l,n),p>0?(s=Math.floor(s/p)*p,l=Math.ceil(l/p)*p,p=$w(s,l,n)):p<0&&(s=Math.ceil(s*p)/p,l=Math.floor(l*p)/p,p=$w(s,l,n)),p>0?(r[i]=Math.floor(s/p)*p,r[a]=Math.ceil(l/p)*p):p<0&&(r[i]=Math.ceil(s*p)/p,r[a]=Math.floor(l*p)/p),r};function ZZ(e,t){const n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}const VZ=(e,t,n)=>{const[r,i]=e,[a,s]=t;let l,p;return r<i?(l=Hw(r,i),p=n(a,s)):(l=Hw(i,r),p=n(s,a)),hb(p,l)},HZ=(e,t,n)=>{const r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=e[0]>e[r],l=s?[...e].reverse():e,p=s?[...t].reverse():t;for(let m=0;m<r;m+=1)i[m]=Hw(l[m],l[m+1]),a[m]=n(p[m],p[m+1]);return m=>{const y=yM(e,m,1,r)-1,b=i[y],E=a[y];return hb(E,b)(m)}},Nk=(e,t,n,r)=>(Math.min(e.length,t.length)>2?HZ:VZ)(e,t,r?jZ:n);class Gw extends M2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:db,tickCount:5}}map(t){return Ww(t)?this.output(t):this.options.unknown}invert(t){return Ww(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){const{tickMethod:t}=this.options,[n,r,i,...a]=this.getTickMethodOptions();return t(n,r,i,...a)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return Dk}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:r}=this.options,i=this.options.domain.map(t),a=Math.min(i.length,r.length);return n?ZZ(i[0],i[a-1]):L_}composeOutput(t,n){const{domain:r,range:i,round:a,interpolate:s}=this.options,l=Nk(r.map(t),i,s,a);this.output=hb(l,n,t)}composeInput(t,n,r){const{domain:i,range:a}=this.options,s=Nk(a,i.map(t),db);this.input=hb(n,r,s)}}const D_=(e,t,n)=>{let r,i,a=e,s=t;if(a===s&&n>0)return[a];let l=$w(a,s,n);if(l===0||!Number.isFinite(l))return[];if(l>0){a=Math.ceil(a/l),s=Math.floor(s/l),i=new Array(r=Math.ceil(s-a+1));for(let p=0;p<r;p+=1)i[p]=(a+p)*l}else{l=-l,a=Math.ceil(a*l),s=Math.floor(s*l),i=new Array(r=Math.ceil(s-a+1));for(let p=0;p<r;p+=1)i[p]=(a+p)/l}return i};class Ed extends Gw{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:R2,tickMethod:D_,tickCount:5}}chooseTransforms(){return[L_,L_]}clone(){return new Ed(this.options)}}function WZ(e,t){if(e){var n;if(ai(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(zo(e)){for(var a in e)if(e.hasOwnProperty(a)&&(n=t(e[a],a),n===!1))break}}}var SM=WZ,$Z=function(e,t,n){if(!ai(e)&&!E0(e))return e;var r=n;return SM(e,function(i,a){r=t(r,i,a)}),r},Bk=$Z,wM=function(e,t){return Bk(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};function og(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}function Fk(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<e.length;a++){var s=e[a],l=s.x,p=s.y,m=s.width,y=s.height,b=(0,ce.CR)([l+m,p+y],2),E=b[0],O=b[1];l<t&&(t=l),p<n&&(n=p),E>r&&(r=E),O>i&&(i=O)}return new Kl(t,n,r-t,i-n)}var GZ=function(e,t,n){var r=e.width,i=e.height,a=n.flexDirection,s=a===void 0?"row":a,l=n.flexWrap,p=l===void 0?"nowrap":l,m=n.justifyContent,y=m===void 0?"flex-start":m,b=n.alignContent,E=b===void 0?"flex-start":b,O=n.alignItems,P=O===void 0?"flex-start":O,I=s==="row",N=s==="row"||s==="column",z=I?N?[1,0]:[-1,0]:N?[0,1]:[0,-1],V=(0,ce.CR)([0,0],2),W=V[0],K=V[1],J=t.map(function(ft){var St,Mt=ft.width,Nt=ft.height,tn=(0,ce.CR)([W,K],2),Yt=tn[0],fn=tn[1];return St=(0,ce.CR)([W+Mt*z[0],K+Nt*z[1]],2),W=St[0],K=St[1],new Kl(Yt,fn,Mt,Nt)}),oe=Fk(J),Te={"flex-start":0,"flex-end":I?r-oe.width:i-oe.height,center:I?(r-oe.width)/2:(i-oe.height)/2},Re=J.map(function(ft){var St=ft.x,Mt=ft.y,Nt=Kl.fromRect(ft);return Nt.x=I?St+Te[y]:St,Nt.y=I?Mt:Mt+Te[y],Nt}),We=Fk(Re),ut=function(ft){var St=(0,ce.CR)(I?["height",i]:["width",r],2),Mt=St[0],Nt=St[1];switch(P){case"flex-start":return 0;case"flex-end":return Nt-ft[Mt];case"center":return Nt/2-ft[Mt]/2;default:return 0}},ct=Re.map(function(ft){var St=ft.x,Mt=ft.y,Nt=Kl.fromRect(ft);return Nt.x=I?St:St+ut(Nt),Nt.y=I?Mt+ut(Nt):Mt,Nt}),Ft=ct.map(function(ft){var St,Mt,Nt=Kl.fromRect(ft);return Nt.x+=(St=e.x)!==null&&St!==void 0?St:0,Nt.y+=(Mt=e.y)!==null&&Mt!==void 0?Mt:0,Nt});return Ft},XZ=function(e,t,n){return[]},YZ=function(e,t,n){if(t.length===0)return[];var r={flex:GZ,grid:XZ},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,e,t,n))||[]},qZ=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[Ro.BOUNDS_CHANGED,Ro.INSERTED,Ro.REMOVED],r.$margin=rd(0),r.$padding=rd(0);var i=n.style||{},a=i.margin,s=a===void 0?0:a,l=i.padding,p=l===void 0?0:l;return r.margin=s,r.padding=p,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=rd(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=rd(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,a=n.y,s=a===void 0?0:a,l=n.width,p=n.height,m=(0,ce.CR)(this.$margin,4),y=m[0],b=m[1],E=m[2],O=m[3];return new Kl(i-O,s-y,l+O+b,p+y+E)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,a=(0,ce.CR)(this.$padding,4),s=a[0],l=a[1],p=a[2],m=a[3],y=(0,ce.CR)(this.$margin,4),b=y[0],E=y[3];return new Kl(m+E,s+b,r-m-l,i-s-p)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(r){return!r.isConnected}))try{var n=YZ(this.getAvailableSpace(),this.children.map(function(r){return r.getBBox()}),this.attributes);this.children.forEach(function(r,i){var a=n[i],s=a.x,l=a.y;r.attr({x:s,y:l})})}catch(r){}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}(Ao),KZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function QZ(e){return class extends K0{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(Pi({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function zk(e,t,n){return e.querySelector(t)?Ho(e).select(t):Ho(e).append(n)}function Xw(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function Uk(e,t){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:a}=n;const s={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in s&&([r,i,a]=s[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:a},t)}class jk extends qZ{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);const{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}}class JZ extends jk{update(t){var n;const{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}}function sm(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function eV(e){return e==="horizontal"||e===0}function tV(e){return e==="vertical"||e===-Math.PI/2}function Zk(e,t,n){const{bbox:r}=e,{position:i="top",size:a,length:s}=t,l=["top","bottom","center"].includes(i),[p,m]=l?[r.height,r.width]:[r.width,r.height],{defaultSize:y,defaultLength:b}=n.props,E=a||y||p,O=s||b||m,P=l?"horizontal":"vertical",[I,N]=l?[O,E]:[E,O];return{orientation:P,width:I,height:N,size:E,length:O}}function nV(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function Yw(e){const t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=KZ(e,["style"]),i={};return Object.entries(r).forEach(([a,s])=>{t.includes(a)?i[`show${Qd(a)}`]=s:i[a]=s}),Object.assign(Object.assign({},i),n)}var Vk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Hk(e,t){const{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function Wk(e){const{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function rV(e,t){const{width:n,height:r}=t.getOptions();return i=>{if(!Pw(t))return i;const a=e==="bottom"?[i,1]:[0,i],s=t.map(a);if(e==="bottom"){const l=s[0];return new Ed({domain:[0,n],range:[0,1]}).map(l)}else if(e==="left"){const l=s[1];return new Ed({domain:[0,r],range:[0,1]}).map(l)}return i}}function iV(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;const[r,i]=og(t,s=>+s),{tickCount:a}=e.getOptions();return n(r,i,a)}function aV(e,t){if(fl(t))return O=>O;const n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:a,insetBottom:s,insetLeft:l,insetRight:p}=n,[m,y,b]=e==="left"||e==="right"?[a,s,i]:[l,p,r],E=new Ed({domain:[0,1],range:[m/b,1-y/b]});return O=>E.map(O)}function $k(e,t,n,r,i,a,s,l){var p;(n!==void 0||a!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),a&&{tickMethod:a}));const m=iV(e,t,a),y=i?m.filter(i):m,b=z=>z instanceof Date?String(z):typeof z=="object"&&z?z:String(z),E=r||((p=e.getFormatter)===null||p===void 0?void 0:p.call(e))||b,O=aV(s,l),P=rV(s,l),I=z=>["top","bottom","center","outer"].includes(z),N=z=>["left","right"].includes(z);return fl(l)||Ol(l)?y.map((z,V,W)=>{var K,J;const oe=((K=e.getBandWidth)===null||K===void 0?void 0:K.call(e,z))/2||0,Te=O(e.map(z)+oe);return{value:C_(l)&&s==="center"||Ol(l)&&((J=e.getTicks)===null||J===void 0?void 0:J.call(e))&&I(s)||Ol(l)&&N(s)?1-Te:Te,label:b(E(A_(z),V,W)),id:String(V)}}):y.map((z,V,W)=>{var K;const J=((K=e.getBandWidth)===null||K===void 0?void 0:K.call(e,z))/2||0,oe=P(O(e.map(z)+J));return{value:N(s)?1-oe:oe,label:b(E(A_(z),V,W)),id:String(V)}})}function oV(e,t,n="xy"){const[r,i,a]=Wk(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?a:r:e.includes("bottom")||e.includes("top")?i:a}function sV(e=[],t){if(e.length>0)return e;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:a}=t,s=[],l=(p,m)=>{m&&s.push(Object.assign(Object.assign({},p),m))};return l({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),l({type:"ellipsis",minLength:20},i),l({type:"hide"},r),l({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),s}function uV(e,t,n,r,i){const{x:a,y:s,width:l,height:p}=t,m=[a+l/2,s+p/2],y=Math.min(l,p)/2,[b,E]=c(i),[O,P]=Wk(i),I=Math.min(O,P)/2,N={center:m,radius:y,startAngle:b,endAngle:E,gridLength:(r-n)*I};if(e==="inner"){const{insetLeft:z,insetTop:V}=i.getOptions();return Object.assign(Object.assign({},N),{center:[m[0]-z,m[1]-V],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},N),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function lV(e,t,n){return Iw(t)||M_(t)?!1:e===void 0?!!n.getTicks:e}function cV(e){const{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function fV(e,t,n,r,i){const{x:a,y:s,width:l,height:p}=n;if(e==="bottom")return{startPos:[a,s],endPos:[a+l,s]};if(e==="left")return{startPos:[a+l,s+p],endPos:[a+l,s]};if(e==="right")return{startPos:[a,s+p],endPos:[a,s]};if(e==="top")return{startPos:[a,s+p],endPos:[a+l,s+p]};if(e==="center"){if(t==="vertical")return{startPos:[a,s],endPos:[a,s+p]};if(t==="horizontal")return{startPos:[a,s],endPos:[a+l,s]};if(typeof t=="number"){const[m,y]=r.getCenter(),[b,E]=o(r),[O,P]=c(r),I=Math.min(l,p)/2,{insetLeft:N,insetTop:z}=r.getOptions(),V=b*I,W=E*I,[K,J]=[m+a-N,y+s-z],[oe,Te]=[Math.cos(t),Math.sin(t)],Re=[K+W*oe,J+W*Te],We=[K+V*oe,J+V*Te],ut=()=>{const{domain:Ft}=i.getOptions();return Ft.length},ct=fl(r)&&i?ut():3;return{startPos:Re,endPos:We,gridClosed:Math.abs(P-O-360)<1e-6,gridCenter:[K,J],gridControlAngles:new Array(ct).fill(0).map((Ft,ft,St)=>(P-O)/ct*ft)}}}return{}}const hV=e=>{const{order:t,size:n,position:r,orientation:i,labelFormatter:a,tickFilter:s,tickCount:l,tickMethod:p,important:m={},style:y={},indexBBox:b,title:E,grid:O=!1}=e,P=Vk(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[I],value:N,coordinate:z,theme:V})=>{const{bbox:W}=N,{domain:K}=I.getOptions(),J=$k(I,K,l,a,s,p,r,z),oe=b?J.map((ft,St)=>{const Mt=b.get(St);return!Mt||Mt[0]!==ft.label?ft:Object.assign(Object.assign({},ft),{bbox:Mt[1]})}):J,[Te,Re]=o(z),We=uV(r,W,Te,Re,z),{axis:ut,axisArc:ct={}}=V,Ft=Yw(Pi({},ut,ct,We,Object.assign(Object.assign({type:"arc",data:oe,titleText:Xw(E),grid:O},P),m)));return new mM({style:wM(Ft,["transform"])})}};function dV(e,t,n,r,i,a){const s=n.axis,l=["top","right","bottom","left"].includes(i)?n[`axis${m2(i)}`]:n.axisLinear,p=e.getOptions().name,m=n[`axis${Qd(p)}`]||{};return Object.assign({},s,l,m)}function pV(e,t,n,r,i,a){const s=dV(e,t,n,r,i,a);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},s),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:tV(a)?10:0,tick:r==="center"?!1:void 0}):s}const vV=e=>{const{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:a,actualPosition:s,position:l,size:p,style:m={},title:y,tickCount:b,tickFilter:E,tickMethod:O,transform:P,indexBBox:I}=e,N=Vk(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:z,value:V,coordinate:W,theme:K})=>{const{bbox:J}=V,[oe]=z,{domain:Te,xScale:Re}=oe.getOptions(),We=pV(oe,W,K,t,l,a),ut=Object.assign(Object.assign(Object.assign({},We),m),N),ct=oV(s||l,W,e.plane),Ft=fV(l,a,J,W,Re),ft=cV(W),St=$k(oe,Te,b,r,E,O,l,W),Mt=I?St.map((Yt,fn)=>{const Hn=I.get(fn);return!Hn||Hn[0]!==Yt.label?Yt:Object.assign(Object.assign({},Yt),{bbox:Hn[1]})}):St,Nt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ut),{type:"linear",data:Mt,crossSize:p,titleText:Xw(y),labelOverlap:sV(P,ut),grid:lV(ut.grid,W,oe),gridLength:ct,line:!0,indexBBox:I}),ut.line?null:{lineOpacity:0}),Ft),ft),n);return Nt.labelOverlap.find(Yt=>Yt.type==="hide")&&(Nt.crossSize=!1),new mM({className:"axis",style:Yw(Nt)})}},Gk=e=>t=>{const{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var a;const{scales:[s]}=i,l=((a=s.getTicks)===null||a===void 0?void 0:a.call(s))||s.getOptions().domain,p=typeof n=="string"?rm(n):n,m=(b,E,O)=>r(l[E],E,l),y=Object.assign(Object.assign({},t),{labelFormatter:p,labelFilter:m,scale:s});return e(y)(i)}},ry=Gk(vV),Xk=Gk(hV);ry.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},Xk.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var mV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gV(e){const t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function yV(e,t,n,r){const{radar:i}=e,[a]=r,s=a.getOptions().name,[l,p]=c(n),{axisRadar:m={}}=t;return Object.assign(Object.assign({},m),{grid:s==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((y,b)=>(p-l)/i.count*b)})}const Yk=e=>{const{important:t={}}=e,n=mV(e,["important"]);return r=>{const{theme:i,coordinate:a,scales:s}=r;return ry(Object.assign(Object.assign(Object.assign({},n),gV(e.orientation)),{important:Object.assign(Object.assign({},yV(e,i,a,s)),t)}))(r)}};Yk.props=Object.assign(Object.assign({},ry.props),{defaultPosition:"center"});function qw(e,t){return+e.toPrecision(t)}function Upe(e){return e.toLocaleString()}function jpe(e){return e.toExponential()}function Zpe(e,t){return t===void 0&&(t=0),Math.abs(e)<1e3?String(e):"".concat(qw(e/1e3,t).toLocaleString(),"K")}var Vpe=function(e,t,n){return e<0&&Number.isFinite(e)?t:n},Hpe=function(e,t,n){return e>0&&Number.isFinite(e)?t:n},Wpe=function(e,t){return e*t},$pe=function(e,t){return e/2+(t||0)/2};function Kw(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var a=t.x,s=t.y;return[a,s]}if(n){var l=n[0],p=l.clientX,m=l.clientY;return[p,m]}return r&&i?[r,i]:[0,0]}var _V={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},TM=Uu({background:"background",labelGroup:"label-group",label:"label"},"indicator"),bV=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n,_V)||this;return r.point=[0,0],r.group=r.appendChild(new Ao({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,a=(0,ce.CR)(rd(i),4),s=a[0],l=a[1],p=a[2],m=a[3],y=this.label.node().getLocalBounds(),b=y.min,E=y.max,O=new Kl(b[0]-m,b[1]-s,E[0]+l-b[0]+m,E[1]+p-b[1]+s),P=this.getPath(r,O),I=js(this.attributes,"background");this.background=so(this.group).maybeAppendByClassName(TM.background,"path").styles((0,ce.pi)((0,ce.pi)({},I),{path:P})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,a=js(this.attributes,"label"),s=(0,ce.CR)(ag(a),2),l=s[0],p=s[1],m=l.text,y=(0,ce._T)(l,["text"]);if(this.label=so(this.group).maybeAppendByClassName(TM.labelGroup,"g").styles(p),!!i){var b=this.label.maybeAppendByClassName(TM.label,function(){return k_(r(i))}).style("text",r(i).toString());b.selectAll("text").styles(y)}},t.prototype.adjustLayout=function(){var n=(0,ce.CR)(this.point,2),r=n[0],i=n[1];this.group.attr("x",-r).attr("y",-i)},t.prototype.getPath=function(n,r){var i=this.attributes.radius,a=r.x,s=r.y,l=r.width,p=r.height,m=[["M",a+i,s],["L",a+l-i,s],["A",i,i,0,0,1,a+l,s+i],["L",a+l,s+p-i],["A",i,i,0,0,1,a+l-i,s+p],["L",a+i,s+p],["A",i,i,0,0,1,a,s+p-i],["L",a,s+i],["A",i,i,0,0,1,a+i,s],["Z"]],y={top:4,right:6,bottom:0,left:2},b=y[n],E=this.createCorner([m[b].slice(-2),m[b+1].slice(-2)]);return m.splice.apply(m,(0,ce.ev)([b+1,1],(0,ce.CR)(E),!1)),m[0][0]="M",m},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,a=Rj.apply(void 0,(0,ce.ev)([],(0,ce.CR)(n),!1)),s=(0,ce.CR)(n,2),l=(0,ce.CR)(s[0],2),p=l[0],m=l[1],y=(0,ce.CR)(s[1],2),b=y[0],E=y[1],O=(0,ce.CR)(a?[b-p,[p,b]]:[E-m,[m,E]],2),P=O[0],I=(0,ce.CR)(O[1],2),N=I[0],z=I[1],V=P/2,W=P/Math.abs(P),K=r*W,J=K/2,oe=K*Math.sqrt(3)/2*i,Te=(0,ce.CR)([N,N+V-J,N+V,N+V+J,z],5),Re=Te[0],We=Te[1],ut=Te[2],ct=Te[3],Ft=Te[4];return a?(this.point=[ut,m-oe],[["L",Re,m],["L",We,m],["L",ut,m-oe],["L",ct,m],["L",Ft,m]]):(this.point=[p+oe,ut],[["L",p,Re],["L",p,We],["L",p+oe,ut],["L",p,ct],["L",p,Ft]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?g(this):d(this)},t.prototype.bindEvents=function(){this.label.on(Ro.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(hr),qk={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},Kk={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},Qk={orientation:"horizontal",showLabel:!0,type:"start"},um=Uu({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),iy=Uu({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),xV=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.size,a=i===void 0?10:i,s=n.radius,l=s===void 0?a/4:s,p=n.orientation,m=(0,ce._T)(n,["size","radius","orientation"]),y=a,b=y*2.4,E=so(r).maybeAppendByClassName(iy.iconRect,"rect").styles((0,ce.pi)((0,ce.pi)({},m),{width:y,height:b,radius:l,x:-y/2,y:-b/2})),O=1/3*y,P=2/3*y,I=1/4*b,N=3/4*b;E.maybeAppendByClassName("".concat(iy.iconLine,"-1"),"line").styles((0,ce.pi)({x1:O,x2:O,y1:I,y2:N},m)),E.maybeAppendByClassName("".concat(iy.iconLine,"-2"),"line").styles((0,ce.pi)({x1:P,x2:P,y1:I,y2:N},m)),E.node().setOrigin(y/2,b/2),p==="vertical"?r.setLocalEulerAngles(90):r.setLocalEulerAngles(0)},t}(hr),Jk=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,Qk)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes.showLabel,a=js(this.attributes,"label"),s=a.transform,l=(0,ce._T)(a,["transform"]),p=(0,ce.CR)(ag(l,[]),2),m=p[0],y=p[1],b=so(n).maybeAppendByClassName(iy.labelGroup,"g").styles(y),E=(0,ce.pi)((0,ce.pi)({},Kk),m),O=E.text,P=(0,ce._T)(E,["text"]);Hr(!!i,b,function(I){r.label=I.maybeAppendByClassName(iy.label,"text").styles((0,ce.pi)((0,ce.pi)({},P),{transform:s,text:"".concat(O)})),r.label.on("mousedown",function(N){N.stopPropagation()}),r.label.on("touchstart",function(N){N.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.orientation,a=r.type,s=(0,ce.pi)((0,ce.pi)({orientation:i},qk),js(this.attributes,"icon")),l=this.attributes.iconShape,p=l===void 0?function(){return new xV({style:s})}:l,m=so(n).maybeAppendByClassName(iy.iconGroup,"g");m.selectAll(iy.icon.class).data([p]).join(function(y){return y.append(typeof p=="string"?p:function(){return p(a)}).attr("className",iy.icon.name)},function(y){return y.update(s)},function(y){return y.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(hr),e4=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},EV=e4,SV=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},wV=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},TV=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},AV=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},CV=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},OV=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},t4=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},MV=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},RV=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},PV=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},IV=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},n4=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},kV=n4,LV=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},DV=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},NV=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},BV=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function FV(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var zV=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function UV(e){var t="default";if(zo(e)&&e instanceof Image)t="image";else if(hh(e))t="symbol";else if(Bu(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function jV(e){var t=UV(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var yl=function(e){(0,ce.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.symbol,a=n.size,s=a===void 0?16:a,l=(0,ce._T)(n,["symbol","size"]),p=jV(i);Hr(!!p,so(r),function(m){m.maybeAppendByClassName("marker",p).attr("className","marker ".concat(p,"-marker")).call(function(y){if(p==="image"){var b=s*2;y.styles({img:i,width:b,height:b,x:-s,y:-s})}else{var b=s/2,E=hh(i)?i:t.getSymbol(i);y.styles((0,ce.pi)({path:E==null?void 0:E(0,0,b)},l))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(hr);yl.registerSymbol("cross",MV),yl.registerSymbol("hyphen",IV),yl.registerSymbol("line",t4),yl.registerSymbol("plus",PV),yl.registerSymbol("tick",RV),yl.registerSymbol("circle",e4),yl.registerSymbol("point",EV),yl.registerSymbol("bowtie",OV),yl.registerSymbol("hexagon",CV),yl.registerSymbol("square",SV),yl.registerSymbol("diamond",wV),yl.registerSymbol("triangle",TV),yl.registerSymbol("triangle-down",AV),yl.registerSymbol("line",t4),yl.registerSymbol("dot",n4),yl.registerSymbol("dash",kV),yl.registerSymbol("smooth",LV),yl.registerSymbol("hv",DV),yl.registerSymbol("vh",NV),yl.registerSymbol("hvh",BV),yl.registerSymbol("vhv",FV);function ZV(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function VV(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var r4=1.4,i4=.4;function HV(e,t,n){var r=n,i=r*r4,a=r/2,s=r/6,l=e+i*i4;return[["M",e,t],["L",l,t+a],["L",e+i,t+a],["L",e+i,t-a],["L",l,t-a],["Z"],["M",l,t+s],["L",e+i-2,t+s],["M",l,t-s],["L",e+i-2,t-s]]}function WV(e,t,n){var r=n,i=r*r4,a=r/2,s=r/6,l=t+i*i4;return[["M",e,t],["L",e-a,l],["L",e-a,t+i],["L",e+a,t+i],["L",e+a,l],["Z"],["M",e-s,l],["L",e-s,t+i-2],["M",e+s,l],["L",e+s,t+i-2]]}yl.registerSymbol("hiddenHandle",VV),yl.registerSymbol("verticalHandle",HV),yl.registerSymbol("horizontalHandle",WV);var Gpe=function(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n};function $V(e,t,n,r){var i;r===void 0&&(r=4);var a=(0,ce.CR)(e,2),s=a[0],l=a[1],p=(0,ce.CR)(t,2),m=p[0],y=p[1],b=(0,ce.CR)(n,2),E=b[0],O=b[1],P=(0,ce.CR)([m,y],2),I=P[0],N=P[1],z=N-I;return I>N&&(i=(0,ce.CR)([N,I],2),I=i[0],N=i[1]),z>l-s?[s,l]:I<s?E===s&&O===N?[s,N]:[s,z+s]:N>l?O===l&&E===I?[I,l]:[l-z,l]:[I,N]}function lm(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var P2=Uu({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),a4={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},GV=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,a4)||this}return t.prototype.render=function(n,r){var i=so(r).maybeAppendByClassName(P2.markerGroup,"g");this.renderMarker(i);var a=so(r).maybeAppendByClassName(P2.labelGroup,"g");this.renderLabel(a)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,a=i.orientation,s=i.markerSymbol,l=s===void 0?lm(a,"horizontalHandle","verticalHandle"):s;Hr(!!l,n,function(p){var m=js(r.attributes,"marker"),y=(0,ce.pi)({symbol:l},m);r.marker=p.maybeAppendByClassName(P2.marker,function(){return new yl({style:y})}).update(y)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,a=i.showLabel,s=i.orientation,l=i.spacing,p=l===void 0?0:l,m=i.formatter;Hr(a,n,function(y){var b,E=js(r.attributes,"label"),O=E.text,P=(0,ce._T)(E,["text"]),I=((b=y.select(P2.marker.class))===null||b===void 0?void 0:b.node().getBBox())||{},N=I.width,z=N===void 0?0:N,V=I.height,W=V===void 0?0:V,K=(0,ce.CR)(lm(s,[0,W+p,"center","top"],[z+p,0,"start","middle"]),4),J=K[0],oe=K[1],Te=K[2],Re=K[3];y.maybeAppendByClassName(P2.label,"text").styles((0,ce.pi)((0,ce.pi)({},P),{x:J,y:oe,text:m(O).toString(),textAlign:Te,textBaseline:Re}))})},t}(hr),o4={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},XV=zn({},o4,{}),YV=zn({},o4,om(a4,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),qV=.01,Xpe=.5,Bh=Uu({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function KV(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function QV(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(a,s,l){var p=r[l%r.length];return a+=" ".concat(e[l],":").concat(p).concat(l<i-1?" ".concat(e[l+1],":").concat(p):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function s4(e,t){var n=(0,ce.CR)(KV(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var I2=Uu({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function u4(e){var t=e.orientation,n=e.size,r=e.length;return lm(t,[r,n],[n,r])}function l4(e){var t=e.type,n=(0,ce.CR)(u4(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function JV(e){return l4(e)}function eH(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,a;if(hh(n)){var s=20;a=new Array(s).fill(0).map(function(m,y,b){return n(y/(b.length-1))})}else a=n;var l=a.length,p=a.map(function(m){return m0(m).toString()});return l?l===1?p[0]:r?QV(i,p,t):p.reduce(function(m,y,b){return m+=" ".concat(b/(l-1),":").concat(y)},"l(".concat(lm(t,"0","270"),")")):""}function tH(e){var t=e.orientation,n=e.range;if(!n)return[];var r=(0,ce.CR)(u4(e),2),i=r[0],a=r[1],s=(0,ce.CR)(n,2),l=s[0],p=s[1],m=lm(t,l*i,0),y=lm(t,0,l*a),b=lm(t,p*i,i),E=lm(t,a,p*a);return[["M",m,y],["L",m,E],["L",b,E],["L",b,y],["Z"]]}function nH(e,t){var n=js(t,"track");e.maybeAppendByClassName(I2.track,"path").styles((0,ce.pi)({path:l4(t)},n))}function rH(e,t){var n=js(t,"selection"),r=eH(t),i=e.maybeAppendByClassName(I2.selection,"path").styles((0,ce.pi)({path:JV(t),fill:r},n)),a=i.maybeAppendByClassName(I2.clipPath,"path").styles({path:tH(t)}).node();i.style("clip-path",a)}var iH=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=so(r).maybeAppendByClassName(I2.trackGroup,"g");nH(i,n);var a=so(r).maybeAppendByClassName(I2.selectionGroup,"g");rH(a,n)},t}(hr);function aH(e){return{min:Math.min.apply(Math,(0,ce.ev)([],(0,ce.CR)(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(e.map(function(t){return t.value})),!1))}}var oH=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n,YV)||this;return r.eventToOffsetScale=new Ed({}),r.innerRibbonScale=new Ed({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var a=r.attributes,s=a.data,l=a.block;i.stopPropagation();var p=r.getValueByCanvasPoint(i);if(l){var m=s4(s.map(function(b){var E=b.value;return E}),p).range;r.showIndicator((m[0]+m[1])/2,"".concat(m[0],"-").concat(m[1])),r.dispatchIndicated(p,m)}else{var y=r.getTickValue(p);r.showIndicator(y),r.dispatchIndicated(y)}},r.onDragStart=function(i){return function(a){a.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(a)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var a=r.target;r.updateMouse();var s=(0,ce.CR)(r.selection,2),l=s[0],p=s[1],m=r.getTickValue(r.getValueByCanvasPoint(i)),y=m-r.prevValue;a==="start"?l!==m&&r.updateSelection(m,p):a==="end"?p!==m&&r.updateSelection(l,m):a==="ribbon"&&y!==0&&(r.prevValue=m,r.updateSelection(y,y,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Kl(0,0,r,i)},t.prototype.render=function(n,r){var i=this,a=n.showLabel;this.renderTitle(so(r));var s=this.availableSpace,l=s.x,p=s.y,m=so(r).maybeAppendByClassName(Bh.contentGroup,"g").styles({x:l,y:p}),y=m.maybeAppendByClassName(Bh.labelGroup,"g").styles({zIndex:1});Hr(!!a,y,function(E){i.renderLabel(E)});var b=m.maybeAppendByClassName(Bh.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=m.maybeAppendByClassName(Bh.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(b),this.renderIndicator(m),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:aH(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=(0,ce.CR)(this.selection,2),r=n[0],i=n[1],a=this.ribbonScale;return[a.map(r),a.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,a=this.attributes.defaultValue,s=a===void 0?[r,i]:a,l=(0,ce.CR)(s,2),p=l[0],m=l[1];return[p,m]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return lm(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,a=r.titleText,s=r.width,l=r.height,p=js(this.attributes,"title"),m=(0,ce.pi)((0,ce.pi)({},p),{width:s,height:l,text:a}),y=this;n.selectAll(Bh.title.class).data(i?[a]:[]).join(function(b){return b.append(function(){return new yk({style:m})}).attr("className",Bh.title.name).each(function(){y.title=this})},function(b){return b.update(m)},function(b){return b.each(function(){y.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Kl(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,a={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return a[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Kl(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(Rs.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),a=i.width,s=i.height;return this.cacheLabelBBox=new Kl(0,0,a,s),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,a=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var s=this.labelBBox,l=s.width,p=s.height,m=this.ifHorizontal(p,l)+a+this.labelFixedSpacing,y=this.ifHorizontal(l,p);return{width:l,height:p,size:m,length:y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,a=this.availableSpace,s=a.width,l=a.height,p=this.labelShape,m=p.size,y=p.length,b=(0,ce.CR)(this.ifHorizontal([l,s],[s,l]),2),E=b[0],O=b[1],P=r?this.handleShape:{size:0,length:0},I=P.size,N=P.length,z=this.handleOffsetRatio,V=0,W=this.labelPosition;i?V=i:["bottom","right"].includes(W)?V=Math.min(E-m,(E-I)/z):E*(1-z)>I?V=Math.max(E-m,0):V=Math.max((E-m-I)/z,0);var K=Math.max(N,y),J=O-K,oe=(0,ce.CR)(this.ifHorizontal([J,V],[V,J]),2),Te=oe[0],Re=oe[1],We=["top","left"].includes(W)?m:0,ut=(0,ce.CR)(this.ifHorizontal([K/2,We],[We,K/2]),2),ct=ut[0],Ft=ut[1];return new Kl(ct,Ft,Te,Re)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,a=r.type,s=r.orientation,l=r.color,p=r.block,m=js(this.attributes,"ribbon"),y=this.range,b=y.min,E=y.max,O=this.ribbonBBox,P=O.x,I=O.y,N=this.ribbonShape,z=N.length,V=N.size,W=zn({x:P,y:I,length:z,size:V,type:a,orientation:s,color:l,block:p,partition:i.map(function(K){return(K.value-b)/(E-b)}),range:this.ribbonRange},m);this.ribbon=n.maybeAppendByClassName(Bh.ribbon,function(){return new iH({style:W})}).update(W)},t.prototype.getHandleClassName=function(n){return"".concat(Bh.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,a=js(this.attributes,"handle"),s=(0,ce.CR)(this.selection,2),l=s[0],p=s[1],m=(0,ce.pi)((0,ce.pi)({},a),{orientation:i}),y=a.shape,b=y===void 0?"slider":y,E=b==="basic"?GV:Jk,O=this;this.handlesGroup.selectAll(Bh.handle.class).data(r?[{value:l,type:"start"},{value:p,type:"end"}]:[],function(P){return P.type}).join(function(P){return P.append(function(){return new E({style:m})}).attr("className",function(I){var N=I.type;return"".concat(Bh.handle," ").concat(O.getHandleClassName(N))}).each(function(I){var N=I.type,z=I.value;this.update({labelText:z});var V="".concat(N,"Handle");O[V]=this,this.addEventListener("pointerdown",O.onDragStart(N))})},function(P){return P.update(m).each(function(I){var N=I.value;this.update({labelText:N})})},function(P){return P.each(function(I){var N=I.type,z="".concat(N,"Handle");O[z]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=(0,ce.CR)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},t.prototype.adjustTitle=function(){var n=this.attributes,r=n.titlePosition,i=n.orientation,a=(0,ce.CR)(this.getElementsByClassName(Bh.title.name),1),s=a[0],l=this.handlesGroup.select(".".concat(this.getHandleClassName("start"))).node();if(!(!s||!l)&&!(r!=="top-left"||i!=="horizontal")){var p=(0,ce.CR)(l.getLocalBounds().min,1),m=p[0],y=(0,ce.CR)(s.getLocalBounds().min,1),b=y[0],E=m-b;s.style.x=+(this.style.x||0)+E}},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Kl(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,a=this.endHandle.getBBox(),s=a.width,l=a.height,p=(0,ce.CR)([Math.max(r,s),Math.max(i,l)],2),m=p[0],y=p[1];return this.cacheHandleBBox=new Kl(0,0,m,y),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,a=(0,ce.CR)(this.ifHorizontal([i,r],[r,i]),2),s=a[0],l=a[1];return{width:r,height:i,size:s,length:l}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,a=this.ribbonBBox,s=a.x,l=a.y,p=this.ribbonShape.size,m=this.getOffset(r),y=(0,ce.CR)(this.ifHorizontal([s+m,l+p*this.handleOffsetRatio],[s+p*this.handleOffsetRatio,l+m]),2),b=y[0],E=y[1],O=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();O==null||O.update({x:b,y:E,formatter:i})},t.prototype.renderIndicator=function(n){var r=js(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(Bh.indicator,function(){return new bV({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,a,s,l){var p,m,y=(p=a==null?void 0:a.id)!==null&&p!==void 0?p:s.toString();if(i.push((0,ce.pi)((0,ce.pi)({},a),{id:y,index:s,type:"value",label:(m=a==null?void 0:a.label)!==null&&m!==void 0?m:a.value.toString(),value:n.ribbonScale.map(a.value)})),s<l.length-1){var b=l[s+1],E=(0,ce.CR)([a.value,b.value],2),O=E[0],P=E[1],I=(O+P)/2;i.push((0,ce.pi)((0,ce.pi)({},a),{id:y,index:s,type:"range",range:[O,P],label:[O,P].join("~"),value:n.ribbonScale.map(I)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=(0,ce.CR)(["center","middle"],2),r=n[0],i=n[1],a=this.labelPosition;return a==="top"?i="bottom":a==="bottom"?i="top":a==="left"?r="end":a==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,a=i===void 0?!1:i,s=r.labelFilter,l=r.labelFormatter,p=js(this.attributes,"tick"),m=js(this.attributes,"label"),y=m.align,b=zn((0,ce.pi)({showLine:!1,showGrid:!1,showTick:a,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),om(p,"tick"),om(m,"label"),{data:this.labelData}),E={tickFilter:function(P,I,N){return(P==null?void 0:P.type)!=="value"?!1:s?s(P,P.index,N.filter(function(z){return z.type!=="value"})):!0},labelFilter:function(P,I,N){return(P==null?void 0:P.type)!==y?!1:s?s(P,P.index,N.filter(function(z){return z.type===y})):!0},labelFormatter:l},O=(0,ce.pi)((0,ce.pi)((0,ce.pi)({},b),E),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Bh.label,function(){return new mM({style:O})}).node(),this.label.update(O,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,a=n.labelSpacing,s=n.tickLength,l=this.ribbonShape.size,p=this.labelPosition,m=this.labelFixedSpacing,y=(0,ce.CR)([0,0,0],3),b=y[0],E=y[1],O=y[2],P=s!=null?s:l;return r?(O=P,E=m,i==="positive"?p==="right"?(b=P,O=P):p==="bottom"&&(b=O):i==="negative"&&(p==="top"||p==="left")&&(b=l)):i==="positive"?p==="right"?E=P:p==="bottom"&&(b=l+m,E=a):i==="negative"&&(p==="left"||p==="top")&&(E=a),{offset:b,spacing:a,tickLength:O}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,a=r.y,s=r.width,l=r.height,p=this.labelAxisStyle,m=p.offset,y=p.spacing,b=p.tickLength,E=(0,ce.CR)(this.ifHorizontal([[i,a+m],[i+s,a+m]],[[i+m,a+l],[i+m,a]]),2),O=E[0],P=E[1];this.label.update({startPos:O,endPos:P,tickLength:b,labelSpacing:y},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var a=this.range,s=a.min,l=a.max,p=this.ribbonBBox,m=p.x,y=p.y,b=(0,al.Z)(n,s,l),E=this.getOffset(b),O=this.ifHorizontal([E+m,y],[m,E+y]);this.indicator.update({x:O[0],y:O[1],position:this.ifHorizontal("top","left"),labelText:r}),d(this.indicator.node())},t.prototype.hideIndicator=function(){g(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var a;i===void 0&&(i=!1);var s=(0,ce.CR)(this.selection,2),l=s[0],p=s[1],m=(0,ce.CR)([n,r],2),y=m[0],b=m[1];i&&(y+=l,b+=p);var E=this.range,O=E.min,P=E.max;a=(0,ce.CR)($V([O,P],[y,b],this.selection),2),y=a[0],b=a[1],this.update({defaultValue:[y,b]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,a=i.min,s=i.max;return Io(r)?qw((s-a)*qV,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,a=r.block,s=this.range.min;return a?s4(i.map(function(l){var p=l.value;return p}),n).tick:ZV(n,this.step,s)},t.prototype.getValueByCanvasPoint=function(n,r){r===void 0&&(r=!1);var i=this.range,a=i.min,s=i.max,l=(0,ce.CR)(this.ribbon.node().getPosition(),2),p=l[0],m=l[1],y=this.ifHorizontal(p,m),b=this.ifHorizontal.apply(this,(0,ce.ev)([],(0,ce.CR)(Kw(n)),!1)),E=b-y,O=(0,al.Z)(this.getOffset(E,!0),a,s);return O},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,a=i.min,s=i.max,l=this.ribbonShape.length,p=this.eventToOffsetScale;return p.update({domain:[a,s],range:[0,l]}),r?p.invert(n):p.map(n)},t.prototype.dispatchSelection=function(){var n=new Ku("valuechange",{detail:{value:this.selection}});this.dispatchEvent(n)},t.prototype.dispatchIndicated=function(n,r){var i=new Ku("indicate",{detail:{value:n,range:r}});this.dispatchEvent(i)},t}(hr);class k2 extends M2{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:D_}}map(t){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:r}=this.options,[i,a]=n;return!fb(i)||!fb(a)?[]:t(i,a,r)}clone(){return new k2(this.options)}}class pb extends M2{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!Ww(t))return this.options.unknown;const n=yM(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new pb(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}function L2(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}const sH=[1,5,2,2.5,4,3],Ype=null,c4=Number.EPSILON*100;function uH(e,t){return(e%t+t)%t}function lH(e){return Math.round(e*1e12)/1e12}function cH(e,t,n,r,i,a){const s=Ik(t),l=Rk(t,e);let p=0;const m=uH(r,a);return(m<c4||a-m<c4)&&r<=0&&i>=0&&(p=1),1-l/(s-1)-n+p}function fH(e,t,n){const r=Ik(t),i=Rk(t,e),a=1;return 1-i/(r-1)-n+a}function hH(e,t,n,r,i,a){const s=(e-1)/(a-i),l=(t-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(s/l,l/s)}function dH(e,t){return e>=t?2-(e-1)/(t-1):1}function pH(e,t,n,r){const i=t-e;return 1-.5*(Mf(t-r,2)+Mf(e-n,2))/Mf(.1*i,2)}function vH(e,t,n){const r=t-e;if(n>r){const i=(n-r)/2;return 1-Mf(i,2)/Mf(.1*r,2)}return 1}function mH(){return 1}const AM=(e,t,n=5,r=!0,i=sH,a=[.25,.2,.5,.05])=>{const s=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!s)return[];if(t-e<1e-15||s===1)return[e];const l={score:-2,lmin:0,lmax:0,lstep:0};let p=1;for(;p<1/0;){for(let P=0;P<i.length;P+=1){const I=i[P],N=fH(I,i,p);if(a[0]*N+a[1]+a[2]+a[3]<l.score){p=1/0;break}let z=2;for(;z<1/0;){const V=dH(z,s);if(a[0]*N+a[1]+a[2]*V+a[3]<l.score)break;const W=(t-e)/(z+1)/p/I;let K=Math.ceil(Math.log10(W));for(;K<1/0;){const J=p*I*Mf(10,K),oe=vH(e,t,J*(z-1));if(a[0]*N+a[1]*oe+a[2]*V+a[3]<l.score)break;const Te=Math.floor(t/J)*p-(z-1)*p,Re=Math.ceil(e/J)*p;if(Te<=Re){const We=Re-Te;for(let ut=0;ut<=We;ut+=1){const Ft=(Te+ut)*(J/p),ft=Ft+J*(z-1),St=J,Mt=cH(I,i,p,Ft,ft,St),Nt=pH(e,t,Ft,ft),tn=hH(z,s,e,t,Ft,ft),Yt=mH(),fn=a[0]*Mt+a[1]*Nt+a[2]*tn+a[3]*Yt;fn>l.score&&(!r||Ft<=e&&ft>=t)&&(l.lmin=Ft,l.lmax=ft,l.lstep=St,l.score=fn)}}K+=1}z+=1}}p+=1}const m=L2(l.lmax),y=L2(l.lmin),b=L2(l.lstep),E=Math.floor(lH((m-y)/b))+1,O=new Array(E);O[0]=L2(y);for(let P=1;P<E;P+=1)O[P]=L2(O[P-1]+b);return O};class Qw extends pb{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:AM}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[n,r,i]=this.getTickMethodOptions();this.options.domain=Dk(n,r,i)}}getTicks(){const{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*r)/(this.n+1)}invert(t){const[n,r]=super.invert(t),[i,a]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||a]}getThresholds(){return this.thresholds}clone(){return new Qw(this.options)}}function gH(e,t){const n=e.length;if(!n)return;if(n<2)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i],s=e[i+1];return a+(s-a)*(r-i)}function yH(e,t,n=!1){const r=e;n||r.sort((a,s)=>a-s);const i=[];for(let a=1;a<t;a+=1)i.push(gH(r,a/t));return i}class Jw extends pb{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:AM}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=yH(t,this.n+1,!1)}invert(t){const[n,r]=super.invert(t),{domain:i}=this.options,a=i[0],s=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||a,r||s]}getThresholds(){return this.thresholds}clone(){return new Jw(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,a=n[0],s=n[i];return r(a,s,t)}}var _H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bH(e,t,n){return e.size=t,eV(n)?e.height=t:e.width=t,e}function xH(e,t,n){const{size:r}=t,i=Zk(e,t,n);return bH(i,r,i.orientation)}function EH(e){return t=>({value:t/e,label:String(t)})}function SH(e,t,n,r,i){const a=t.thresholds,s=EH(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...a,r].map(s)})}function wH(e,t,n){const i=[-1/0,...t.thresholds,1/0].map((a,s)=>({value:s,label:a}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(a,s)=>s>0&&s<i.length-1})}function CM(e){const{domain:t}=e.getOptions(),[n,r]=[t[0],b2(t)];return[n,r]}function TH(e,t){const n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[m0(t).toString()]})),r}function AH(e,t,n,r,i,a){const{length:s}=e,l=n||r,p=i.color?a.legendContinuous.ribbonFill||"black":a.color,m=t||TH(l,p),[y,b]=CM(m),[E,O]=CM([t,n,r].filter(P=>P!==void 0).find(P=>!(P instanceof k2)));return Object.assign(Object.assign({},e),{domain:[E,O],data:m.getTicks().map(P=>({value:P})),color:new Array(Math.floor(s)).fill(0).map((P,I)=>{const N=(b-y)/(s-1)*I+y,z=m.map(N)||p,V=r?r.map(N):1;return z.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(W,K,J,oe)=>`rgba(${K}, ${J}, ${oe}, ${V})`)})})}function CH(e,t,n,r,i,a){const s=sm(e,"color"),l=xH(n,r,i);if(s instanceof pb){const{range:y}=s.getOptions(),[b,E]=CM(s);return s instanceof Qw||s instanceof Jw?SH(l,s,b,E,y):wH(l,s,y)}const p=sm(e,"size"),m=sm(e,"opacity");return AH(l,s,p,m,t,a)}const ay=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:a,size:s,title:l,style:p,crossPadding:m,padding:y}=e,b=_H(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:E,value:O,theme:P,scale:I})=>{const{bbox:N}=O,{x:z,y:V,width:W,height:K}=N,J=Uk(a,n),{legendContinuous:oe={}}=P,Te=Yw(Object.assign({},oe,Object.assign(Object.assign({titleText:Xw(l),labelAlign:"value",labelFormatter:typeof t=="string"?We=>rm(t)(We.label):t},CH(E,I,O,e,ay,P)),p),b)),Re=new jk({style:Object.assign(Object.assign({x:z,y:V,width:W,height:K},J),{subOptions:Te})});return Re.appendChild(new oH({className:"legend-continuous",style:Te})),Re}};ay.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const f4=e=>(...t)=>ay(Object.assign({},{block:!0},e))(...t);f4.props=Object.assign(Object.assign({},ay.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const OM=e=>t=>{const{scales:n}=t,r=sm(n,"size");return ay(Object.assign({},{type:"size",data:r.getTicks().map((i,a)=>({value:i,label:String(i)}))},e))(t)};OM.props=Object.assign(Object.assign({},ay.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const h4=e=>OM(Object.assign({},{block:!0},e));h4.props=Object.assign(Object.assign({},ay.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var OH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const d4=({static:e=!1}={})=>t=>{const{width:n,height:r,depth:i,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:p,padding:m,inset:y,insetLeft:b,insetTop:E,insetRight:O,insetBottom:P,margin:I,marginLeft:N,marginBottom:z,marginTop:V,marginRight:W,data:K,coordinate:J,theme:oe,component:Te,interaction:Re,x:We,y:ut,z:ct,key:Ft,frame:ft,labelTransform:St,parentKey:Mt,clip:Nt,viewStyle:tn,title:Yt}=t,fn=OH(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:We,y:ut,z:ct,key:Ft,width:n,height:r,depth:i,padding:m,paddingLeft:a,paddingRight:s,paddingTop:l,inset:y,insetLeft:b,insetTop:E,insetRight:O,insetBottom:P,paddingBottom:p,theme:oe,coordinate:J,component:Te,interaction:Re,frame:ft,labelTransform:St,margin:I,marginLeft:N,marginBottom:z,marginTop:V,marginRight:W,parentKey:Mt,clip:Nt,style:tn},!e&&{title:Yt}),{marks:[Object.assign(Object.assign(Object.assign({},fn),{key:`${Ft}-0`,data:K}),e&&{title:Yt})]})]};d4.props={};var MH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function vb(e){return(t,...n)=>Pi({},e(t,...n),t)}function mb(e){return(t,...n)=>Pi({},t,e(t,...n))}function MM(e,t){if(!e)return t;if(Array.isArray(e))return e;const{value:n=t}=e,r=MH(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}var RM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const p4=()=>e=>{const{children:t}=e,n=RM(e,["children"]);if(!Array.isArray(t))return[];const{data:r,scale:i={},axis:a={},legend:s={},encode:l={},transform:p=[]}=n,m=RM(n,["data","scale","axis","legend","encode","transform"]),y=t.map(b=>{var{data:E,scale:O={},axis:P={},legend:I={},encode:N={},transform:z=[]}=b,V=RM(b,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:MM(E,r),scale:Pi({},i,O),encode:Pi({},l,N),transform:[...p,...z],axis:P&&a?Pi({},a,P):!1,legend:I&&s?Pi({},s,I):!1},V)});return[Object.assign(Object.assign({},m),{marks:y,type:"standardView"})]};p4.props={};function $c([e,t],[n,r]){return[e-n,t-r]}function eT([e,t],[n,r]){return[e+n,t+r]}function dc([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function Vv([e,t]){return Math.atan2(t,e)}function gb([e,t]){return Vv([e,t])+Math.PI/2}function v4(e,t){const n=Vv(e),r=Vv(t);return n<r?r-n:Math.PI*2-(n-r)}function PM(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(const[l,p]of e)t=Math.min(l,t),n=Math.max(l,n),r=Math.min(p,r),i=Math.max(p,i);const a=n-t,s=i-r;return[t,r,a,s]}function m4([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function Po(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function RH(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function PH(e,t,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*dc(e,t):r,a=Math.PI/6,s=Math.atan2(t[1]-e[1],t[0]-e[0]),l=Math.PI/2-s-a,p=[t[0]-i*Math.sin(l),t[1]-i*Math.cos(l)],m=s-a,y=[t[0]-i*Math.cos(m),t[1]-i*Math.sin(m)];return[p,y]}function D2(e,t,n,r,i){const a=Vv($c(r,t))+Math.PI,s=Vv($c(r,n))+Math.PI;return e.arc(r[0],r[1],i,a,s,s-a<0),e}function g4(e,t,n,r="y",i="between",a=!1){const s=(N,z)=>N==="y"||N===!0?z?180:90:z?90:0,l=r==="y"||r===!0?n:t,p=s(r,a),m=tg(l),[y,b]=og(m,N=>l[N]),E=new Ed({domain:[y,b],range:[0,100]}),O=N=>(0,Yl.Z)(l[N])&&!Number.isNaN(l[N])?E.map(l[N]):0,P={between:N=>`${e[N]} ${O(N)}%`,start:N=>N===0?`${e[N]} ${O(N)}%`:`${e[N-1]} ${O(N)}%, ${e[N]} ${O(N)}%`,end:N=>N===e.length-1?`${e[N]} ${O(N)}%`:`${e[N]} ${O(N)}%, ${e[N+1]} ${O(N)}%`},I=m.sort((N,z)=>O(N)-O(z)).map(P[i]||P.between).join(",");return`linear-gradient(${p}deg, ${I})`}function tT(e){const[t,n,r,i]=e;return[i,t,n,r]}function N_(e,t,n){const[r,i,,a]=Ol(e)?tT(t):t,[s,l]=n,p=e.getCenter(),m=gb($c(r,p)),y=gb($c(i,p)),b=y===m&&s!==l?y+Math.PI*2:y;return{startAngle:m,endAngle:b-m>=0?b:Math.PI*2+b,innerRadius:dc(a,p),outerRadius:dc(r,p)}}function qpe(e){const t="connect";return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)).map(([n,r])=>[lowerFirst(n.replace(t,"").trim()),r]).filter(([n])=>n!==void 0))}function y4(e){const{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function _4(e,t){if(!fl(e))return"";const n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function b4(e){if(e.length===1)return e[0];const[[t,n,r=0],[i,a,s=0]]=e;return[(t+i)/2,(n+a)/2,(r+s)/2]}function x4(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function IH(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var Kpe=Array.prototype.slice;function E4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ql(e){return function(){return e}}function S4(e){this._context=e}S4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function N2(e){return new S4(e)}const IM=Math.PI,kM=2*IM,B_=1e-6,kH=kM-B_;function w4(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function LH(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return w4;const n=Mf(10,t);return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class nT{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?w4:LH(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,p=r-t,m=i-n,y=s-t,b=l-n,E=y*y+b*b;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(E>B_)if(!(Math.abs(b*p-m*y)>B_)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let O=r-s,P=i-l,I=p*p+m*m,N=O*O+P*P,z=Math.sqrt(I),V=Math.sqrt(E),W=a*Math.tan((IM-Math.acos((I+E-N)/(2*z*V)))/2),K=W/V,J=W/z;Math.abs(K-1)>B_&&this._append`L${t+K*y},${n+K*b}`,this._append`A${a},${a},0,0,${+(b*O>y*P)},${this._x1=t+J*p},${this._y1=n+J*m}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),p=r*Math.sin(i),m=t+l,y=n+p,b=1^s,E=s?i-a:a-i;this._x1===null?this._append`M${m},${y}`:(Math.abs(this._x1-m)>B_||Math.abs(this._y1-y)>B_)&&this._append`L${m},${y}`,r&&(E<0&&(E=E%kM+kM),E>kH?this._append`A${r},${r},0,1,${b},${t-l},${n-p}A${r},${r},0,1,${b},${this._x1=m},${this._y1=y}`:E>B_&&this._append`A${r},${r},0,${+(E>=IM)},${b},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Hv(){return new nT}Hv.prototype=nT.prototype;function Qpe(e=3){return new nT(+e)}function LM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new nT(t)}function T4(e){return e[0]}function A4(e){return e[1]}function oy(e,t){var n=Ql(!0),r=null,i=N2,a=null,s=LM(l);e=typeof e=="function"?e:e===void 0?T4:Ql(e),t=typeof t=="function"?t:t===void 0?A4:Ql(t);function l(p){var m,y=(p=E4(p)).length,b,E=!1,O;for(r==null&&(a=i(O=s())),m=0;m<=y;++m)!(m<y&&n(b=p[m],m,p))===E&&((E=!E)?a.lineStart():a.lineEnd()),E&&a.point(+e(b,m,p),+t(b,m,p));if(O)return a=null,O+""||null}return l.x=function(p){return arguments.length?(e=typeof p=="function"?p:Ql(+p),l):e},l.y=function(p){return arguments.length?(t=typeof p=="function"?p:Ql(+p),l):t},l.defined=function(p){return arguments.length?(n=typeof p=="function"?p:Ql(!!p),l):n},l.curve=function(p){return arguments.length?(i=p,r!=null&&(a=i(r)),l):i},l.context=function(p){return arguments.length?(p==null?r=a=null:a=i(r=p),l):r},l}function yb(e){const t=typeof e=="function"?e:e.render;return class extends K0{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var DM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function DH(e){const{min:[t,n],max:[r,i]}=e.getLocalBounds();let a=0,s=0;return t>0&&(a=t),r<0&&(a=r),n>0&&(s=n),i<0&&(s=i),[a,s]}function NH(e,t=[]){const[n=0,r=0,i=n,a=r]=t,s=e.parentNode,l=s.getEulerAngles();s.setEulerAngles(0);const{min:p,halfExtents:m}=e.getLocalBounds(),[y,b]=p,[E,O]=m;return s.setEulerAngles(l),{x:y-a,y:b-n,width:E*2+a+r,height:O*2+n+i}}const BH=(e,t,n)=>{const r=dc(e,t),i=dc(t,n),a=dc(n,e);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(a,2))/(2*r*i)};function FH(e,t,n,r){const[[i,a],[s,l]]=t,[p,m]=DH(e);if(i===s&&a===l)return oy()([[0,0],[p,m]]);const y=[[i-s,a-l]].concat(n.length?n:[[0,0]]),b=[r[0]-s,r[1]-l],[E,O]=y;if(BH(b,E,O)>0){const P=(()=>{const{min:I,max:N}=e.getLocalBounds(),z=E[0]+(E[1]-b[1])*(E[1]-0)/(E[0]-b[0]);return N[0]<b[0]?Math.min(N[0],z):Math.max(I[0],z)})();y.splice(1,1,[P,0])}return oy()(y)}const C4=yb(e=>{const t=e.attributes,{className:n,class:r,transform:i,rotate:a,labelTransform:s,labelTransformOrigin:l,x:p,y:m,x0:y=p,y0:b=m,text:E,background:O,connector:P,startMarker:I,endMarker:N,coordCenter:z,innerHTML:V}=t,W=DM(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if([p,m,y,b].some(Nt=>!(0,Yl.Z)(Nt))){e.children.forEach(Nt=>Nt.remove());return}const K=ja(W,"background"),{padding:J}=K,oe=DM(K,["padding"]),Te=ja(W,"connector"),{points:Re=[]}=Te,We=DM(Te,["points"]),ut=[[+y,+b],[+p,+m]];let ct;V?ct=Ho(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",V).call(Po,Object.assign({transform:s,transformOrigin:l},W)).node():ct=Ho(e).maybeAppend("text","text").style("zIndex",0).style("text",E).call(Po,Object.assign({textBaseline:"middle",transform:s,transformOrigin:l},W)).node();const Ft=Ho(e).maybeAppend("background","rect").style("zIndex",-1).call(Po,NH(ct,J)).call(Po,O?oe:{}).node(),ft=FH(Ft,ut,Re,z),St=I&&new yl({id:"startMarker",style:Object.assign({x:0,y:0},ja(W,"startMarker"))}),Mt=N&&new yl({id:"endMarker",style:Object.assign({x:0,y:0},ja(W,"endMarker"))});Ho(e).maybeAppend("connector","path").style("zIndex",0).style("path",ft).style("markerStart",St).style("markerEnd",Mt).call(Po,P?We:{})});function _b(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function zH(e,t,n,r){const i=t.length/2,a=t.slice(0,i),s=t.slice(i);let l=_b(a,(O,P)=>Math.abs(O[1]-s[P][1]));l=Math.max(Math.min(l,i-2),1);const p=O=>[a[O][0],(a[O][1]+s[O][1])/2],m=p(l),y=p(l-1),b=p(l+1),E=Vv($c(b,y))/Math.PI*180;return{x:m[0],y:m[1],transform:`rotate(${E})`,textAlign:"center",textBaseline:"middle"}}function O4(e,t,n,r){const{bounds:i}=n,[[a,s],[l,p]]=i,m=l-a,y=p-s,b=E=>{const{x:O,y:P}=E,I=_w(n.x,m),N=_w(n.y,y);return Object.assign(Object.assign({},E),{x:(I||O)+a,y:(N||P)+s})};return b(e==="left"?{x:0,y:y/2,textAnchor:"start",textBaseline:"middle"}:e==="right"?{x:m,y:y/2,textAnchor:"end",textBaseline:"middle"}:e==="top"?{x:m/2,y:0,textAnchor:"center",textBaseline:"top"}:e==="bottom"?{x:m/2,y,textAnchor:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAnchor:"start",textBaseline:"top"}:e==="top-right"?{x:m,y:0,textAnchor:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y,textAnchor:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:m,y,textAnchor:"end",textBaseline:"bottom"}:{x:m/2,y:y/2,textAnchor:"center",textBaseline:"middle"})}function M4(e,t,n,r){const{y:i,y1:a,autoRotate:s,rotateToAlignArc:l}=n,p=r.getCenter(),m=N_(r,t,[i,a]),{innerRadius:y,outerRadius:b,startAngle:E,endAngle:O}=m,P=e==="inside"?(E+O)/2:O,I=NM(P,s,l),N=(()=>{const[z,V]=t,W=y+(b-y)*.5,[K,J]=e==="inside"?B2(p,P,W):m4(z,V);return{x:K,y:J}})();return Object.assign(Object.assign({},N),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:I})}function B2(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function NM(e,t,n){if(!t)return 0;const r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function UH(e,t,n,r){const{y:i,y1:a,autoRotate:s,rotateToAlignArc:l,radius:p=.5,offset:m=0}=n,y=N_(r,t,[i,a]),{startAngle:b,endAngle:E}=y,O=r.getCenter(),P=(b+E)/2,N={textAlign:"center",textBaseline:"middle",rotate:NM(P,s,l)},{innerRadius:z,outerRadius:V}=y,K=z+(V-z)*p+m,[J,oe]=B2(O,P,K);return Object.assign({x:J,y:oe},N)}function R4(e){return e===void 0?null:e}function P4(e,t,n,r){const{bounds:i}=n,[a]=i;return{x:R4(a[0]),y:R4(a[1])}}function sg(e,t,n,r){const{bounds:i}=n;return i.length===1?P4(e,t,n,r):(C_(r)?M4:am(r)?UH:O4)(e,t,n,r)}function jH(e,t,n,r,i){const[a,s]=B2(e,t,n),[l,p]=B2(e,t,r),m=Math.sin(t)>0?1:-1;return[[a,s],[l,p],[l+m*i,p]]}function I4(e,t,n){const r=N_(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:a}=r;return i+(a-i)}function k4(e,t,n){const r=N_(n,e,[t.y,t.y1]),{startAngle:i,endAngle:a}=r;return(i+a)/2}function BM(e,t,n,r){const{autoRotate:i,rotateToAlignArc:a,offset:s=0,connector:l=!0,connectorLength:p=s,connectorLength2:m=0,connectorDistance:y=0}=n,b=r.getCenter(),E=k4(t,n,r),O=Math.sin(E)>0?1:-1,P=NM(E,i,a),I={textAlign:O>0||C_(r)?"start":"end",textBaseline:"middle",rotate:P},N=I4(t,n,r),z=N+(l?p:s),[[V,W],[K,J],[oe,Te]]=jH(b,E,N,z,l?m:0),Re=l?+y*O:0,We=oe+Re,ut=Te,ct={connector:l,connectorPoints:[[K-We,J-ut],[oe-We,Te-ut]]};return Object.assign(Object.assign({x0:V,y0:W,x:oe+Re,y:Te},I),ct)}function ZH(e,t,n,r){const{bounds:i}=n;return i.length===1?P4(e,t,n,r):(C_(r)?M4:am(r)?BM:O4)(e,t,n,r)}var VH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function HH(e,t,n,r){if(!am(r))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:s}=n,l=VH(BM("outside",t,n,r),[]),p=r.getCenter(),m=I4(t,n,r),y=k4(t,n,r),b=m+i+a,E=Math.sin(y)>0?1:-1,O=p[0]+(b+ +s)*E,{x:P}=l,I=O-P;return l.x+=I,l.connectorPoints[0][0]-=I,l}var WH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $H(e,t,n,r){if(!am(r))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:s}=n,l=WH(BM("outside",t,n,r),[]),{x0:p,y0:m}=l,y=r.getCenter(),E=H5(r)+i,O=gb([p-y[0],m-y[1]]),P=Math.sin(O)>0?1:-1,[I,N]=B2(y,O,E);return l.x=I+(a+s)*P,l.y=N,l}var L4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function GH(e,t){return e!==void 0?e:am(t)?"inside":Ol(t)?"right":"top"}function XH(e,t,n,r,i){const{position:a}=t,{render:s}=i,l=GH(a,n),m=r[s?"htmlLabel":l==="inside"?"innerLabel":"label"],y=Object.assign({},m,t),b=ee[x4(l)];if(!b)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},m),b(l,e,y,n,i))}const D4=(e,t)=>{const{coordinate:n,theme:r}=t,{render:i}=e;return(a,s)=>{const{text:l,x:p,y:m,transform:y="",transformOrigin:b,className:E=""}=s,O=L4(s,["text","x","y","transform","transformOrigin","className"]),P=XH(a,s,n,r,e),{rotate:I=0,transform:N=""}=P,z=L4(P,["rotate","transform"]);return Ho(new C4).call(Po,z).style("text",`${l}`).style("className",`${E} g2-label`).style("innerHTML",i?i(l,s.datum,s.index):void 0).style("labelTransform",`${N} rotate(${+I}) ${y}`.trim()).style("labelTransformOrigin",b).style("coordCenter",n.getCenter()).call(Po,O).node()}};D4.props={defaultMarker:"point"};function N4(e,t){const{__data__:n}=e,{markKey:r,index:i,seriesIndex:a}=n,{markState:s}=t,l=Array.from(s.keys()).find(p=>p.key===r);if(l)return a?a.map(p=>l.data[p]):l.data[i]}function FM(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}function YH(e){return FM(e,t=>t.className==="component")}function qH(e){return FM(e,t=>t.className==="element")}function KH(e){return FM(e,t=>t.className==="label")}function Fh(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);const{target:a}=i;if(!a)return;const{className:s}=a;if(s==="plot")return;const l=qH(a),p=YH(a),m=KH(a),y=l||p||m;if(!y)return;const{className:b,markType:E}=y,O=Object.assign(Object.assign({},i),{nativeEvent:!0});b==="element"?(O.data={data:N4(y,t)},n.emit(`element:${e}`,O),n.emit(`${E}:${e}`,O)):b==="label"?(O.data={data:y.attributes.datum},n.emit(`label:${e}`,O),n.emit(`${s}:${e}`,O)):(n.emit(`component:${e}`,O),n.emit(`${s}:${e}`,O))}}function B4(){return(e,t,n)=>{const{container:r,view:i}=e,a=Fh(Xs.CLICK,i,n,Te=>Te.detail===1),s=Fh(Xs.DBLCLICK,i,n,Te=>Te.detail===2),l=Fh(Xs.POINTER_TAP,i,n),p=Fh(Xs.POINTER_DOWN,i,n),m=Fh(Xs.POINTER_UP,i,n),y=Fh(Xs.POINTER_OVER,i,n),b=Fh(Xs.POINTER_OUT,i,n),E=Fh(Xs.POINTER_MOVE,i,n),O=Fh(Xs.POINTER_ENTER,i,n),P=Fh(Xs.POINTER_LEAVE,i,n),I=Fh(Xs.POINTER_UPOUTSIDE,i,n),N=Fh(Xs.DRAG_START,i,n),z=Fh(Xs.DRAG,i,n),V=Fh(Xs.DRAG_END,i,n),W=Fh(Xs.DRAG_ENTER,i,n),K=Fh(Xs.DRAG_LEAVE,i,n),J=Fh(Xs.DRAG_OVER,i,n),oe=Fh(Xs.DROP,i,n);return r.addEventListener("click",a),r.addEventListener("click",s),r.addEventListener("pointertap",l),r.addEventListener("pointerdown",p),r.addEventListener("pointerup",m),r.addEventListener("pointerover",y),r.addEventListener("pointerout",b),r.addEventListener("pointermove",E),r.addEventListener("pointerenter",O),r.addEventListener("pointerleave",P),r.addEventListener("pointerupoutside",I),r.addEventListener("dragstart",N),r.addEventListener("drag",z),r.addEventListener("dragend",V),r.addEventListener("dragenter",W),r.addEventListener("dragleave",K),r.addEventListener("dragover",J),r.addEventListener("drop",oe),()=>{r.removeEventListener("click",a),r.removeEventListener("click",s),r.removeEventListener("pointertap",l),r.removeEventListener("pointerdown",p),r.removeEventListener("pointerup",m),r.removeEventListener("pointerover",y),r.removeEventListener("pointerout",b),r.removeEventListener("pointermove",E),r.removeEventListener("pointerenter",O),r.removeEventListener("pointerleave",P),r.removeEventListener("pointerupoutside",I),r.removeEventListener("dragstart",N),r.removeEventListener("drag",z),r.removeEventListener("dragend",V),r.removeEventListener("dragenter",W),r.removeEventListener("dragleave",K),r.removeEventListener("dragover",J),r.removeEventListener("drop",oe)}}}B4.props={reapplyWhenUpdate:!0};function QH(){return{"component.axisRadar":Yk,"component.axisLinear":ry,"component.axisArc":Xk,"component.legendContinuousBlock":f4,"component.legendContinuousBlockSize":h4,"component.legendContinuousSize":OM,"interaction.event":B4,"composition.mark":d4,"composition.view":p4,"shape.label.label":D4}}var JH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Jl(e,t){const n=Object.assign(Object.assign({},QH()),t),r=a=>{if(typeof a!="string")return a;const s=`${e}.${a}`;return n[s]||ny(`Unknown Component: ${s}`)};return[(a,s)=>{const{type:l}=a,p=JH(a,["type"]);l||ny("Plot type is required!");const m=r(l);return m==null?void 0:m(p,s)},r]}function F4(e){const{canvas:t,group:n}=e;return(t==null?void 0:t.document)||(n==null?void 0:n.ownerDocument)||ny("Cannot find library document")}var z4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eW(e,t,n){const[r]=Jl("coordinate",n),{innerHeight:i,innerWidth:a,insetLeft:s,insetTop:l,insetRight:p,insetBottom:m}=e,{coordinates:y=[]}=t,b=oW(y),E=b[0].type==="cartesian3D",O=Object.assign(Object.assign({},e),{x:s,y:l,width:a-s-p,height:i-m-l,transformations:b.flatMap(r)});return E?new Rw.Coordinate3D(O):new Rw.Coordinate(O)}function U4(e,t){const{coordinate:n={}}=e,r=z4(e,["coordinate"]),{type:i,transform:a=[]}=n,s=z4(n,["type","transform"]);if(!i)return Object.assign(Object.assign({},r),{coordinates:a});const[,l]=Jl("coordinate",t),{transform:p=!1}=l(i).props||{};if(p)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},r),{coordinates:[Object.assign({type:i},s),...a]})}function C0(e,t){return e.filter(n=>n.type===t)}function F_(e){return C0(e,"polar").length>0}function tW(e){return C0(e,"helix").length>0}function bb(e){return C0(e,"transpose").length%2===1}function nW(e){return C0(e,"parallel").length>0}function j4(e){return C0(e,"theta").length>0}function rW(e){return C0(e,"reflect").length>0}function F2(e){return C0(e,"radial").length>0}function iW(e){return C0(e,"radar").length>0}function aW(e){return C0(e,"reflectY").length>0}function oW(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}function Ls(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var sW=Ls("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),uW=Ls("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),lW=Ls("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),cW=Ls("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),fW=Ls("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),hW=Ls("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),dW=Ls("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pW=Ls("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),vW=Ls("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),mW=Ls("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),gW=Ls("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function rT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xb(){}var z_=.7,Eb=1/z_,Sb="\\s*([+-]?\\d+)\\s*",z2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yW=/^#([0-9a-f]{3,8})$/,_W=new RegExp("^rgb\\(".concat(Sb,",").concat(Sb,",").concat(Sb,"\\)$")),bW=new RegExp("^rgb\\(".concat(cm,",").concat(cm,",").concat(cm,"\\)$")),xW=new RegExp("^rgba\\(".concat(Sb,",").concat(Sb,",").concat(Sb,",").concat(z2,"\\)$")),EW=new RegExp("^rgba\\(".concat(cm,",").concat(cm,",").concat(cm,",").concat(z2,"\\)$")),SW=new RegExp("^hsl\\(".concat(z2,",").concat(cm,",").concat(cm,"\\)$")),wW=new RegExp("^hsla\\(".concat(z2,",").concat(cm,",").concat(cm,",").concat(z2,"\\)$")),Z4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rT(xb,UM,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:V4,formatHex:V4,formatHex8:TW,formatHsl:AW,formatRgb:H4,toString:H4});function V4(){return this.rgb().formatHex()}function TW(){return this.rgb().formatHex8()}function AW(){return q4(this).formatHsl()}function H4(){return this.rgb().formatRgb()}function UM(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yW.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?W4(t):n===3?new Sd(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?iT(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?iT(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_W.exec(e))?new Sd(t[1],t[2],t[3],1):(t=bW.exec(e))?new Sd(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xW.exec(e))?iT(t[1],t[2],t[3],t[4]):(t=EW.exec(e))?iT(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=SW.exec(e))?Y4(t[1],t[2]/100,t[3]/100,1):(t=wW.exec(e))?Y4(t[1],t[2]/100,t[3]/100,t[4]):Z4.hasOwnProperty(e)?W4(Z4[e]):e==="transparent"?new Sd(NaN,NaN,NaN,0):null}function W4(e){return new Sd(e>>16&255,e>>8&255,e&255,1)}function iT(e,t,n,r){return r<=0&&(e=t=n=NaN),new Sd(e,t,n,r)}function $4(e){return e instanceof xb||(e=UM(e)),e?(e=e.rgb(),new Sd(e.r,e.g,e.b,e.opacity)):new Sd}function U2(e,t,n,r){return arguments.length===1?$4(e):new Sd(e,t,n,r==null?1:r)}function Sd(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}rT(Sd,U2,zM(xb,{brighter:function(t){return t=t==null?Eb:Math.pow(Eb,t),new Sd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?z_:Math.pow(z_,t),new Sd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Sd(U_(this.r),U_(this.g),U_(this.b),aT(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G4,formatHex:G4,formatHex8:CW,formatRgb:X4,toString:X4}));function G4(){return"#".concat(j_(this.r)).concat(j_(this.g)).concat(j_(this.b))}function CW(){return"#".concat(j_(this.r)).concat(j_(this.g)).concat(j_(this.b)).concat(j_((isNaN(this.opacity)?1:this.opacity)*255))}function X4(){var e=aT(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(U_(this.r),", ").concat(U_(this.g),", ").concat(U_(this.b)).concat(e===1?")":", ".concat(e,")"))}function aT(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function U_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function j_(e){return e=U_(e),(e<16?"0":"")+e.toString(16)}function Y4(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O0(e,t,n,r)}function q4(e){if(e instanceof O0)return new O0(e.h,e.s,e.l,e.opacity);if(e instanceof xb||(e=UM(e)),!e)return new O0;if(e instanceof O0)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,p=(a+i)/2;return l?(t===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-t)/l+2:s=(t-n)/l+4,l/=p<.5?a+i:2-a-i,s*=60):l=p>0&&p<1?0:s,new O0(s,l,p,e.opacity)}function OW(e,t,n,r){return arguments.length===1?q4(e):new O0(e,t,n,r==null?1:r)}function O0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rT(O0,OW,zM(xb,{brighter:function(t){return t=t==null?Eb:Math.pow(Eb,t),new O0(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?z_:Math.pow(z_,t),new O0(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,a=2*r-i;return new Sd(jM(t>=240?t-240:t+120,a,i),jM(t,a,i),jM(t<120?t+240:t-120,a,i),this.opacity)},clamp:function(){return new O0(K4(this.h),oT(this.s),oT(this.l),aT(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=aT(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(K4(this.h),", ").concat(oT(this.s)*100,"%, ").concat(oT(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function K4(e){return e=(e||0)%360,e<0?e+360:e}function oT(e){return Math.max(0,Math.min(1,e||0))}function jM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Q4(e,t,n,r,i){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*r+s*i)/6}function MW(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],s=r>0?e[r-1]:2*i-a,l=r<t-1?e[r+2]:2*a-i;return Q4((n-r/t)*t,s,i,a,l)}}function RW(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],s=e[(r+1)%t],l=e[(r+2)%t];return Q4((n-r/t)*t,i,a,s,l)}}var ZM=function(e){return function(){return e}};function J4(e,t){return function(n){return e+n*t}}function PW(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function IW(e,t){var n=t-e;return n?J4(e,n>180||n<-180?n-360*Math.round(n/360):n):ZM(isNaN(e)?t:e)}function kW(e){return(e=+e)==1?wb:function(t,n){return n-t?PW(t,n,e):ZM(isNaN(t)?n:t)}}function wb(e,t){var n=t-e;return n?J4(e,n):ZM(isNaN(e)?t:e)}var Jpe=function e(t){var n=kW(t);function r(i,a){var s=n((i=U2(i)).r,(a=U2(a)).r),l=n(i.g,a.g),p=n(i.b,a.b),m=wb(i.opacity,a.opacity);return function(y){return i.r=s(y),i.g=l(y),i.b=p(y),i.opacity=m(y),i+""}}return r.gamma=e,r}(1);function eL(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),s,l;for(s=0;s<n;++s)l=U2(t[s]),r[s]=l.r||0,i[s]=l.g||0,a[s]=l.b||0;return r=e(r),i=e(i),a=e(a),l.opacity=1,function(p){return l.r=r(p),l.g=i(p),l.b=a(p),l+""}}}var LW=eL(MW),eve=eL(RW),Vl=e=>LW(e[e.length-1]),tL=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ls),DW=Vl(tL),nL=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ls),NW=Vl(nL),rL=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ls),BW=Vl(rL),iL=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ls),FW=Vl(iL),aL=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ls),zW=Vl(aL),oL=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ls),UW=Vl(oL),sL=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ls),jW=Vl(sL),uL=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ls),ZW=Vl(uL),lL=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ls),VW=Vl(lL),cL=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ls),HW=Vl(cL),fL=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ls),WW=Vl(fL),hL=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ls),$W=Vl(hL),dL=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ls),GW=Vl(dL),pL=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ls),XW=Vl(pL),vL=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ls),YW=Vl(vL),mL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ls),qW=Vl(mL),gL=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ls),KW=Vl(gL),yL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ls),QW=Vl(yL),_L=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ls),JW=Vl(_L),bL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ls),e$=Vl(bL),xL=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ls),t$=Vl(xL),EL=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ls),n$=Vl(EL),SL=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ls),r$=Vl(SL),wL=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ls),i$=Vl(wL),TL=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ls),a$=Vl(TL),AL=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ls),o$=Vl(AL),CL=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ls),s$=Vl(CL);function u$(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var l$=Math.PI/180,c$=180/Math.PI,OL=-.14861,VM=1.78277,HM=-.29227,sT=-.90649,j2=1.97294,ML=j2*sT,RL=j2*VM,PL=VM*HM-sT*OL;function f$(e){if(e instanceof Z_)return new Z_(e.h,e.s,e.l,e.opacity);e instanceof Sd||(e=$4(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(PL*r+ML*t-RL*n)/(PL+ML-RL),a=r-i,s=(j2*(n-i)-HM*a)/sT,l=Math.sqrt(s*s+a*a)/(j2*i*(1-i)),p=l?Math.atan2(s,a)*c$-120:NaN;return new Z_(p<0?p+360:p,l,i,e.opacity)}function fm(e,t,n,r){return arguments.length===1?f$(e):new Z_(e,t,n,r==null?1:r)}function Z_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rT(Z_,fm,zM(xb,{brighter:function(t){return t=t==null?Eb:Math.pow(Eb,t),new Z_(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?z_:Math.pow(z_,t),new Z_(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*l$,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),a=Math.sin(t);return new Sd(255*(n+r*(OL*i+VM*a)),255*(n+r*(HM*i+sT*a)),255*(n+r*(j2*i)),this.opacity)}}));function IL(e){return function t(n){n=+n;function r(i,a){var s=e((i=fm(i)).h,(a=fm(a)).h),l=wb(i.s,a.s),p=wb(i.l,a.l),m=wb(i.opacity,a.opacity);return function(y){return i.h=s(y),i.s=l(y),i.l=p(Math.pow(y,n)),i.opacity=m(y),i+""}}return r.gamma=t,r}(1)}var tve=IL(IW),WM=IL(wb),h$=WM(fm(300,.5,0),fm(-240,.5,1)),d$=WM(fm(-100,.75,.35),fm(80,1.5,.8)),p$=WM(fm(260,.75,.35),fm(80,1.5,.8)),uT=fm();function v$(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return uT.h=360*e-100,uT.s=1.5-1.5*t,uT.l=.8-.9*t,uT+""}var lT=U2(),m$=Math.PI/3,g$=Math.PI*2/3;function y$(e){var t;return e=(.5-e)*Math.PI,lT.r=255*(t=Math.sin(e))*t,lT.g=255*(t=Math.sin(e+m$))*t,lT.b=255*(t=Math.sin(e+g$))*t,lT+""}function _$(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function cT(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var b$=cT(Ls("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),x$=cT(Ls("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),E$=cT(Ls("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),S$=cT(Ls("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function w$(e,t,n,r,i,a){const{guide:s={}}=n,l=k$(e,t,n);if(typeof l!="string")return n;const p=L$(l,e,t,n),m=R$(l,p,n);return Object.assign(Object.assign(Object.assign({},n),N$(l,e,t,n,r)),{domain:m,range:D$(l,e,t,n,m,i,a),expectedDomain:p,guide:s,name:e,type:l})}function T$(e,t){const n={};for(const r of e){const{values:i,name:a}=r,s=t[a];for(const l of i){const{name:p,value:m}=l;n[p]=m.map(y=>s.map(y))}}return n}function A$(e,t){var n;const{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],a=Array.from(new Set(e.flatMap(l=>l.channels.map(p=>p.scale)))),s=new Map(a.map(l=>[l.name,l]));for(const l of r){const p=M$(l);for(const m of p){const y=s.get(m),b=((n=l.scale)===null||n===void 0?void 0:n[m])||{},{independent:E=!1}=b;if(y&&!E){const{guide:O}=y,P=typeof O=="boolean"?{}:O;y.guide=Pi({},P,l),Object.assign(y,b)}else{const O=Object.assign(Object.assign({},b),{expectedDomain:b.domain,name:m,guide:wM(l,i)});a.push(O)}}}return a}function C$(e){if(!e||!Array.isArray(e))return[Jm,Jm];let t,n;return[a=>{var s;t=a.map.bind(a),n=(s=a.invert)===null||s===void 0?void 0:s.bind(a);const l=e.filter(([E])=>typeof E=="function"),p=e.filter(([E])=>typeof E!="function"),m=new Map(p);if(a.map=E=>{for(const[O,P]of l)if(O(E))return P;return m.has(E)?m.get(E):t(E)},!n)return a;const y=new Map(p.map(([E,O])=>[O,E])),b=new Map(l.map(([E,O])=>[O,E]));return a.invert=E=>b.has(E)?E:y.has(E)?y.get(E):n(E),a},a=>(t!==null&&(a.map=t),n!==null&&(a.invert=n),a)]}function kL(e,t){const n=Object.keys(e);for(const r of Object.values(t)){const{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{const a=n.filter(p=>p.startsWith(i)).map(p=>+(p.replace(i,"")||0)),s=Pu(a)+1,l=`${i}${s}`;e[l]=r,r.getOptions().key=l}}return e}function LL(e,t){const[n]=Jl("scale",t),{relations:r}=e,[i]=C$(r),a=n(e);return i(a)}function O$(e){const t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));DL(t,"x"),DL(t,"y")}function M$(e){const{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(a=>i.includes(a)):[]}function DL(e,t){const n=e.filter(({name:a,facet:s=!0})=>s&&a===t),r=n.flatMap(a=>a.domain),i=n.every(NL)?og(r):n.every(BL)?Array.from(new Set(r)):null;if(i!==null)for(const a of n)a.domain=i}function R$(e,t,n){const{ratio:r}=n;return r==null?t:NL({type:e})?P$(t,r,e):BL({type:e})?I$(t,r):t}function P$(e,t,n){const r=e.map(Number),i=new Ed({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(a=>new Date(i.map(a))):e.map(a=>i.map(a))}function I$(e,t){const n=Math.round(e.length*t);return e.slice(0,n)}function NL(e){const{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function BL(e){const{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function k$(e,t,n){const{type:r,domain:i,range:a,quantitative:s,ordinal:l}=n;return r!==void 0?r:X$(t)?"identity":typeof a=="string"?"linear":(i||a||[]).length>2?$M(e,l):i!==void 0?jL([i])?$M(e,l):ZL(t)?"time":zL(e,a,s):jL(t)?$M(e,l):ZL(t)?"time":zL(e,a,s)}function L$(e,t,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return UL(V$(n,r),r);case"band":case"ordinal":case"point":return H$(n);case"quantile":return W$(n);case"sequential":return UL($$(n),r);default:return[]}}function D$(e,t,n,r,i,a,s){const{range:l}=r;if(typeof l=="string")return B$(l);if(l!==void 0)return l;const{rangeMin:p,rangeMax:m}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{const y=FL(n,r,i,a,s),[b,E]=G$(t,y);return[p!=null?p:b,m!=null?m:E]}case"band":case"point":{const y=t==="size"?5:0,b=t==="size"?10:1;return[p!=null?p:y,m!=null?m:b]}case"ordinal":return FL(n,r,i,a,s);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function N$(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return U$(i,r);case"band":case"point":return j$(e,t,i,r);case"sequential":return z$(r);default:return r}}function FL(e,t,n,r,i){const[a]=Jl("palette",i),{category10:s,category20:l}=r,p=Tw(e.flat()).length<=s.length?s:l,{palette:m=p,offset:y}=t;if(Array.isArray(m))return m;try{return a({type:m})}catch(b){const E=F$(m,n,y);if(E)return E;throw new Error(`Unknown Component: ${m} `)}}function B$(e){return e.split("-")}function F$(e,t,n=r=>r){if(!e)return null;const r=Qd(e),i=ae[`scheme${r}`],a=ae[`interpolate${r}`];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;const s=i[t.length];if(s)return s}return t.map((s,l)=>a(n(l/t.length)))}function z$(e){const{palette:t="ylGnBu",offset:n}=e,r=Qd(t),i=ae[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?a=>i(n(a)):i}}function U$(e,t){const{interpolate:n=R2,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function j$(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=Z$(e,t,n),{paddingInner:a=i,paddingOuter:s=i}=r;return Object.assign(Object.assign({},r),{paddingInner:a,paddingOuter:s,padding:i,unknown:NaN})}function Z$(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?j4(n)?0:.1:e==="point"?.5:0}function $M(e,t){return t||(Y$(e)?"point":"ordinal")}function zL(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function UL(e,t){if(e.length===0)return e;const{domainMin:n,domainMax:r}=t,[i,a]=e;return[n!=null?n:i,r!=null?r:a]}function V$(e,t){const{zero:n=!1}=t;let r=1/0,i=-1/0;for(const a of e)for(const s of a)cl(s)&&(r=Math.min(r,+s),i=Math.max(i,+s));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function H$(e){return Array.from(new Set(e.flat()))}function W$(e){return e.flat().sort()}function $$(e){let t=1/0,n=-1/0;for(const r of e)for(const i of r)cl(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function G$(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[nM(t),b2(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function jL(e){return GM(e,t=>{const n=typeof t;return n==="string"||n==="boolean"})}function ZL(e){return GM(e,t=>t instanceof Date)}function X$(e){return GM(e,x_)}function GM(e,t){for(const n of e)if(n.some(t))return!0;return!1}function Y$(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function q$(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function K$(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;const{type:t,domain:n,range:r,interpolator:i}=e,a=n&&n.length>0,s=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&a&&s||["sequential"].includes(t)&&a&&(s||i)||["constant","identity"].includes(t)&&s)}const Q$={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},J$={threshold:"threshold",quantize:"quantize",quantile:"quantile"},eG={ordinal:"ordinal",band:"band",point:"point"},tG={constant:"constant"};var sy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nG(e,t,n){const{coordinates:r=[],title:i}=t,[,a]=Jl("component",n),s=e.filter(({guide:y})=>y!==null),l=[],p=hG(t,e,n);if(l.push(...p),i){const{props:y}=a("title"),{defaultPosition:b,defaultOrientation:E,defaultOrder:O,defaultSize:P,defaultCrossPadding:I}=y,N=typeof i=="string"?{title:i}:i;l.push(Object.assign({type:"title",position:b,orientation:E,order:O,crossPadding:I[0],defaultSize:P},N))}return sG(s,r).forEach(([y,b])=>{const{props:E}=a(y),{defaultPosition:O,defaultPlane:P="xy",defaultOrientation:I,defaultSize:N,defaultOrder:z,defaultLength:V,defaultPadding:W=[0,0],defaultCrossPadding:K=[0,0]}=E,J=Pi({},...b),{guide:oe,field:Te}=J,Re=Array.isArray(oe)?oe:[oe];for(const We of Re){const[ut,ct]=cG(y,O,I,We,b,s,r);if(!ut&&!ct)continue;const Ft=ut==="left"||ut==="right",ft=Ft?W[1]:W[0],St=Ft?K[1]:K[0],{size:Mt,order:Nt=z,length:tn=V,padding:Yt=ft,crossPadding:fn=St}=We;l.push(Object.assign(Object.assign({title:Te},We),{defaultSize:N,length:tn,position:ut,plane:P,orientation:ct,padding:Yt,order:Nt,crossPadding:fn,size:Mt,type:y,scales:b}))}}),l}function VL(e,t,n,r,i){const[a]=Jl("component",r),{scaleInstances:s,scale:l,bbox:p}=e,m=sy(e,["scaleInstances","scale","bbox"]),y={bbox:p,library:r};return a(m)({coordinate:t,library:r,markState:i,scales:s,theme:n,value:y,scale:l})}function rG(e){return e.map(t=>{const n=Pi(t,t.style);return delete n.style,n})}function nve(e){return e.flatMap(t=>t.type=="group"?t.children:t)}function HL(e,t){const n=["left","right","bottom","top"];return tb(e,({type:a,position:s,group:l})=>n.includes(s)?l===void 0?a.startsWith("legend")?`legend-${s}`:Symbol("independent"):l==="independent"?Symbol("independent"):l:Symbol("independent")).flatMap(([,a])=>{if(a.length===1)return a[0];if(t!==void 0){const y=a.filter(I=>I.length!==void 0).map(I=>I.length),b=Lp(y);if(b>t)return a.forEach(I=>I.group=Symbol("independent")),a;const E=t-b,O=a.length-y.length,P=E/O;a.forEach(I=>{I.length===void 0&&(I.length=P)})}const s=Pu(a,y=>y.size),l=Pu(a,y=>y.order),p=Pu(a,y=>y.crossPadding),m=a[0].position;return{type:"group",size:s,order:l,position:m,children:a,crossPadding:p}})}function iG(e,t){const n=["shape","size","color","opacity"],r=(E,O)=>E==="constant"&&O==="size",i=e.filter(({type:E,name:O})=>typeof E=="string"&&n.includes(O)&&!r(E,O)),a=i.filter(({type:E})=>E==="constant"),s=i.filter(({type:E})=>E!=="constant"),p=tb(s,E=>E.field?E.field:Symbol("independent")).map(([E,O])=>[E,[...O,...a]]).filter(([,E])=>E.some(O=>O.type!=="constant")),m=new Map(p);if(m.size===0)return[];const y=E=>E.sort(([O],[P])=>O.localeCompare(P));return Array.from(m).map(([,E])=>{const P=sb(E).sort((I,N)=>N.length-I.length).map(I=>({combination:I,option:I.map(N=>[N.name,aG(N)])}));for(const{option:I,combination:N}of P)if(!I.every(z=>z[1]==="constant")&&I.every(z=>z[1]==="discrete"||z[1]==="constant"))return["legendCategory",N];for(const[I,N]of Mw)for(const{option:z,combination:V}of P)if(N.some(W=>E2(y(W),y(z))))return[I,V];return null}).filter(cl)}function aG(e){const{type:t}=e;return typeof t!="string"?null:t in Q$?"continuous":t in eG?"discrete":t in J$?"distribution":t in tG?"constant":null}function oG(e,t){return e.map(n=>{const{name:r}=n;if(tW(t)||j4(t)||bb(t)&&(F_(t)||F2(t)))return null;if(r.startsWith("x"))return F_(t)?["axisArc",[n]]:F2(t)?["axisLinear",[n]]:[bb(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return F_(t)?["axisLinear",[n]]:F2(t)?["axisArc",[n]]:[bb(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(iW(t))return["axisRadar",[n]];if(!F_(t))return["axisY",[n]]}return null}).filter(cl)}function sG(e,t){const n=e.filter(r=>K$(r));return[...iG(n,t),...oG(n,t)]}function XM(e){const t=C0(e,"polar");if(t.length){const r=t[t.length-1],{startAngle:i,endAngle:a}=Cw(r);return[i,a]}const n=C0(e,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:a}=Ow(r);return[i,a]}return[-Math.PI/2,Math.PI/2*3]}function uG(e){const t=/position(\d*)/g.exec(e);return t?+t[1]:null}function lG(e,t,n,r,i){const{name:a}=n[0];if(e==="axisRadar"){const s=r.filter(b=>b.name.startsWith("position")),l=uG(a);if(a===s.slice(-1)[0].name||l===null)return[null,null];const[p,m]=XM(i);return["center",(m-p)/(s.length-1)*l+p]}if(e==="axisY"&&nW(i))return bb(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){const[s]=XM(i);return["center",s]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:F_(i)?["center",null]:F2(i)?["center",null]:e==="axisX"&&rW(i)||e==="axisX"&&aW(i)?["top",null]:t}function cG(e,t,n,r,i,a,s){const[l]=XM(s),p=[r.position||t,l!=null?l:n];return typeof e=="string"&&e.startsWith("axis")?lG(e,p,i,a,s):typeof e=="string"&&e.startsWith("legend")&&F_(s)&&r.position==="center"?["center","vertical"]:p}function fG(e,t,n=[]){return e==="x"?bb(n)?`${t}Y`:`${t}X`:e==="y"?bb(n)?`${t}X`:`${t}Y`:null}function hG(e,t,n){const[,r]=Jl("component",n),{coordinates:i}=e;function a(s,l,p,m){const y=fG(l,s,i);if(!m||!y)return;const{props:b}=r(y),{defaultPosition:E,defaultSize:O,defaultOrder:P,defaultCrossPadding:[I]}=b;return Object.assign(Object.assign({position:E,defaultSize:O,order:P,type:y,crossPadding:I},m),{scales:[p]})}return t.filter(s=>s.slider||s.scrollbar).flatMap(s=>{const{slider:l,scrollbar:p,name:m}=s;return[a("slider",m,s,l),a("scrollbar",m,s,p)]}).filter(s=>!!s)}function WL(e,t,n,r,i,a){const{type:s}=e;if(!["left","right","bottom","top"].includes(r)||typeof s!="string")return;const p=s;return(()=>p.startsWith("axis")?gG:p.startsWith("group")?dG:p.startsWith("legendContinuous")?yG:p==="legendCategory"?_G:p.startsWith("slider")?mG:p==="title"?vG:p.startsWith("scrollbar")?pG:()=>{})()(e,t,n,r,i,a)}function dG(e,t,n,r,i,a){const{children:s}=e,l=Pu(s,m=>m.crossPadding);s.forEach(m=>m.crossPadding=l),s.forEach(m=>WL(m,t,n,r,i,a));const p=Pu(s,m=>m.size);e.size=p,s.forEach(m=>m.size=p)}function pG(e,t,n,r,i,a){const{trackSize:s=6}=Pi({},i.scrollbar,e);e.size=s}function vG(e,t,n,r,i,a){const s=Pi({},i.title,e),{title:l,subtitle:p,spacing:m=0}=s,y=sy(s,["title","subtitle","spacing"]);if(l){const b=ja(y,"title"),E=pT(l,b);e.size=E.height}if(p){const b=ja(y,"subtitle"),E=pT(p,b);e.size+=m+E.height}}function mG(e,t,n,r,i,a){const s=()=>{const{slider:y}=i;return Pi({},y,e)},{trackSize:l,handleIconSize:p}=s(),m=Math.max(l,p*2.4);e.size=m}function gG(e,t,n,r,i,a){e.transform=e.transform||[{type:"hide"}];const s=r==="left"||r==="right",l=$L(e,r,i),{tickLength:p=0,labelSpacing:m=0,titleSpacing:y=0,labelAutoRotate:b}=l,E=sy(l,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),O=fT(e,a),P=hT(E,O),I=p+m;if(P&&P.length){const z=Pu(P,W=>W.width),V=Pu(P,W=>W.height);if(s)e.size=z+I;else{const{tickFilter:W,labelTransform:K}=e;EG(O,P,t,n,W)&&!K&&b!==!1&&b!==null?(e.labelTransform="rotate(90)",e.size=z+I):e.size=V+I}}else e.size=p;const N=dT(E);N&&(s?e.size+=y+N.width:e.size+=y+N.height)}function yG(e,t,n,r,i,a){const l=(()=>{const{legendContinuous:K}=i;return Pi({},K,e)})(),{labelSpacing:p=0,titleSpacing:m=0}=l,y=sy(l,["labelSpacing","titleSpacing"]),b=r==="left"||r==="right",E=ja(y,"ribbon"),{size:O}=E,P=ja(y,"handleIcon"),{size:I}=P,N=Math.max(O,I*2.4);e.size=N;const z=fT(e,a),V=hT(y,z);if(V){const K=b?"width":"height",J=Pu(V,oe=>oe[K]);e.size+=J+p}const W=dT(y);W&&(b?e.size=Math.max(e.size,W.width):e.size+=m+W.height)}function _G(e,t,n,r,i,a){const l=(()=>{const{legendCategory:St}=i,{title:Mt}=e,[Nt,tn]=Array.isArray(Mt)?[Mt,void 0]:[void 0,Mt];return Pi({title:Nt},St,Object.assign(Object.assign({},e),{title:tn}))})(),{itemSpacing:p,itemMarkerSize:m,titleSpacing:y,rowPadding:b,colPadding:E,maxCols:O=1/0,maxRows:P=1/0}=l,I=sy(l,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:N,length:z}=e,V=St=>Math.min(St,P),W=St=>Math.min(St,O),K=r==="left"||r==="right",J=z===void 0?t+(K?0:n[0]+n[1]):z,oe=dT(I),Te=fT(e,a),Re=hT(I,Te,"itemLabel"),We=Math.max(Re[0].height,m)+b,ut=(St,Mt=0)=>m+St+p[0]+Mt;K?(()=>{let St=-1/0,Mt=0,Nt=1,tn=0,Yt=-1/0,fn=-1/0;const Hn=oe?oe.height:0,cr=J-Hn;for(const{width:_r}of Re){const Mr=ut(_r,E);St=Math.max(St,Mr),Mt+We>cr?(Nt++,Yt=Math.max(Yt,tn),fn=Math.max(fn,Mt),tn=1,Mt=We):(Mt+=We,tn++)}Nt<=1&&(Yt=tn,fn=Mt),e.size=St*W(Nt),e.length=fn+Hn,Pi(e,{cols:W(Nt),gridRow:Yt})})():typeof N=="number"?(()=>{const St=Math.ceil(Re.length/N),Mt=Pu(Re,Nt=>ut(Nt.width))*N;e.size=We*V(St)-b,e.length=Math.min(Mt,J)})():(()=>{let St=1,Mt=0,Nt=-1/0;for(const{width:tn}of Re){const Yt=ut(tn,E);Mt+Yt>J?(Nt=Math.max(Nt,Mt),Mt=Yt,St++):Mt+=Yt}St===1&&(Nt=Mt),e.size=We*V(St)-b,e.length=Nt})(),oe&&(K?e.size=Math.max(e.size,oe.width):e.size+=y+oe.height)}function fT(e,t){const[n]=Jl("scale",t),{scales:r,tickCount:i,tickMethod:a}=e,s=r.find(l=>l.type!=="constant"&&l.type!=="identity");return i!==void 0&&(s.tickCount=i),a!==void 0&&(s.tickMethod=a),n(s)}function hT(e,t,n="label"){const{labelFormatter:r,tickFilter:i,label:a=!0}=e,s=sy(e,["labelFormatter","tickFilter","label"]);if(!a)return null;const l=bG(t,r,i),p=ja(s,n),m=l.map((E,O)=>Object.fromEntries(Object.entries(p).map(([P,I])=>[P,typeof I=="function"?I(E,O):I]))),y=l.map((E,O)=>{const P=m[O];return pT(E,P)});if(!m.some(E=>E.transform)){const E=l.map((O,P)=>P);e.indexBBox=new Map(E.map(O=>[O,[l[O],y[O]]]))}return y}function dT(e){const t=m=>m===!1||m===null,{title:n}=e,r=sy(e,["title"]);if(t(n)||n===void 0)return null;const i=ja(r,"title"),{direction:a,transform:s}=i,l=Array.isArray(n)?n.join(","):n;return typeof l!="string"?null:pT(l,Object.assign(Object.assign({},i),{transform:s||(a==="vertical"?"rotate(-90)":"")}))}function $L(e,t,n){const{title:r}=e,[i,a]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:s,[`axis${m2(t)}`]:l}=n;return Pi({title:i},s,l,Object.assign(Object.assign({},e),{title:a}))}function GL(e,t){const n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function bG(e,t,n){const i=GL(e,n).map(s=>typeof s=="number"?A_(s):s),a=t?typeof t=="string"?rm(t):t:e.getFormatter?e.getFormatter():s=>`${s}`;return i.map(a)}function xG(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function EG(e,t,n,r,i){if(Lp(t,O=>O.width)>n)return!0;const s=e.clone();s.update({range:[0,n]});const l=GL(e,i),p=l.map(O=>s.map(O)+xG(s,O)),m=l.map((O,P)=>P),y=-r[0],b=n+r[1],E=(O,P)=>{const{width:I}=P;return[O-I/2,O+I/2]};for(let O=0;O<m.length;O++){const P=p[O],[I,N]=E(P,t[O]);if(I<y||N>b)return!0;const z=p[O+1];if(z){const[V]=E(z,t[O+1]);if(N>V)return!0}}return!1}function pT(e,t){const n=SG(e),{filter:r}=t,i=sy(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function SG(e){return e instanceof Fn?e:new Hf({style:{text:`${e}`}})}function cv(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Gc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function wG(e){const t=e.find(({type:n})=>n==="axisZ");if(t){const n=e.find(({type:i})=>i==="axisX");n.plane="xy";const r=e.find(({type:i})=>i==="axisY");r.plane="xy",t.plane="yz",t.origin=[n.bbox.x,n.bbox.y,0],t.eulerAngles=[0,-90,0],t.bbox.x=n.bbox.x,t.bbox.y=n.bbox.y,e.push(Object.assign(Object.assign({},n),{plane:"xz",showLabel:!1,showTitle:!1,origin:[n.bbox.x,n.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},r),{plane:"yz",showLabel:!1,showTitle:!1,origin:[r.bbox.x+r.bbox.width,r.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},t),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]}))}}function TG(e,t,n,r){var i,a;const{width:s,height:l,depth:p,x:m=0,y=0,z:b=0,inset:E=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:O=E,insetTop:P=E,insetBottom:I=E,insetRight:N=E,margin:z=(a=n.margin)!==null&&a!==void 0?a:0,marginLeft:V=z,marginBottom:W=z,marginTop:K=z,marginRight:J=z,padding:oe=n.padding,paddingBottom:Te=oe,paddingLeft:Re=oe,paddingRight:We=oe,paddingTop:ut=oe}=CG(e,t,n,r),ct=1/4,Ft=(Ga,vo,cs,Wo,fs)=>{const{marks:nu}=t;if(nu.length===0)return[Wo,fs];if(Ga-Wo-fs-Ga*ct>0)return[Wo,fs];const uf=Ga*(1-ct);return[vo==="auto"?uf*Wo/(Wo+fs):Wo,cs==="auto"?uf*fs/(Wo+fs):fs]},ft=Ga=>Ga==="auto"?20:Ga!=null?Ga:20,St=ft(ut),Mt=ft(Te),Nt=XL(e,l-St-Mt,[St+K,Mt+W],["left","right"],t,n,r),{paddingLeft:tn,paddingRight:Yt}=Nt,fn=s-V-J,[Hn,cr]=Ft(fn,Re,We,tn,Yt),_r=fn-Hn-cr,Mr=XL(e,_r,[Hn+V,cr+J],["bottom","top"],t,n,r),{paddingTop:fi,paddingBottom:Qi}=Mr,Ta=l-W-K,[Fi,Ci]=Ft(Ta,Te,ut,Qi,fi),Ya=Ta-Fi-Ci;return{width:s,height:l,depth:p,insetLeft:O,insetTop:P,insetBottom:I,insetRight:N,innerWidth:_r,innerHeight:Ya,paddingLeft:Hn,paddingRight:cr,paddingTop:Ci,paddingBottom:Fi,marginLeft:V,marginBottom:W,marginTop:K,marginRight:J,x:m,y,z:b}}function AG(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:a=r,paddingTop:s=r,paddingBottom:l=r,margin:p=16,marginLeft:m=p,marginRight:y=p,marginTop:b=p,marginBottom:E=p,inset:O=0,insetLeft:P=O,insetRight:I=O,insetTop:N=O,insetBottom:z=O}=e,V=J=>J==="auto"?20:J,W=n-V(i)-V(a)-m-y-P-I,K=t-V(s)-V(l)-b-E-N-z;return{width:W,height:K}}function CG(e,t,n,r){const{coordinates:i}=t;if(!F_(i)&&!F2(i))return t;const a=e.filter(z=>typeof z.type=="string"&&z.type.startsWith("axis"));if(a.length===0)return t;const s=a.map(z=>{const V=z.type==="axisArc"?"arc":"linear";return $L(z,V,n)}),l=Pu(s,z=>{var V;return(V=z.labelSpacing)!==null&&V!==void 0?V:0}),p=a.flatMap((z,V)=>{const W=s[V],K=fT(z,r);return hT(W,K)}).filter(cl),m=Pu(p,z=>z.height)+l,y=a.flatMap((z,V)=>{const W=s[V];return dT(W)}).filter(z=>z!==null),b=y.length===0?0:Pu(y,z=>z.height),{inset:E=m,insetLeft:O=E,insetBottom:P=E,insetTop:I=E+b,insetRight:N=E}=t;return Object.assign(Object.assign({},t),{insetLeft:O,insetBottom:P,insetTop:I,insetRight:N})}function XL(e,t,n,r,i,a,s){const l=Zl(e,P=>P.position),{padding:p=a.padding,paddingLeft:m=p,paddingRight:y=p,paddingBottom:b=p,paddingTop:E=p}=i,O={paddingBottom:b,paddingLeft:m,paddingTop:E,paddingRight:y};for(const P of r){const I=`padding${m2(x4(P))}`,N=l.get(P)||[],z=O[I],V=We=>{We.size===void 0&&(We.size=We.defaultSize)},W=We=>{We.type==="group"?(We.children.forEach(V),We.size=Pu(We.children,ut=>ut.size)):We.size=We.defaultSize},K=We=>{We.size||(z!=="auto"?W(We):(WL(We,t,n,P,a,s),V(We)))},J=We=>{We.type.startsWith("axis")&&We.labelAutoHide===void 0&&(We.labelAutoHide=!0)},oe=P==="bottom"||P==="top",Te=cv(N,We=>We.order),Re=N.filter(We=>We.type.startsWith("axis")&&We.order==Te);if(Re.length&&(Re[0].crossPadding=0),typeof z=="number")N.forEach(V),N.forEach(J);else if(N.length===0)O[I]=0;else{const We=oe?t+n[0]+n[1]:t,ut=HL(N,We);ut.forEach(K);const ct=ut.reduce((Ft,{size:ft,crossPadding:St=12})=>Ft+ft+St,0);O[I]=ct}}return O}function OG(e,t,n){const r=Zl(e,oe=>`${oe.plane||"xy"}-${oe.position}`),{paddingLeft:i,paddingRight:a,paddingTop:s,paddingBottom:l,marginLeft:p,marginTop:m,marginBottom:y,marginRight:b,innerHeight:E,innerWidth:O,insetBottom:P,insetLeft:I,insetRight:N,insetTop:z,height:V,width:W,depth:K}=n,J={xy:YM({width:W,height:V,paddingLeft:i,paddingRight:a,paddingTop:s,paddingBottom:l,marginLeft:p,marginTop:m,marginBottom:y,marginRight:b,innerHeight:E,innerWidth:O,insetBottom:P,insetLeft:I,insetRight:N,insetTop:z}),yz:YM({width:K,height:V,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:K,innerHeight:V,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:YM({width:W,height:K,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:W,innerHeight:K,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[oe,Te]of r.entries()){const[Re,We]=oe.split("-"),ut=J[Re][We],[ct,Ft]=x2(Te,ft=>typeof ft.type!="string"?!1:!!(We==="center"||ft.type.startsWith("axis")&&["inner","outer"].includes(We)));ct.length&&MG(ct,t,ut,We),Ft.length&&FG(Te,t,ut)}}function YM({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:a,marginLeft:s,marginTop:l,marginBottom:p,marginRight:m,innerHeight:y,innerWidth:b,insetBottom:E,insetLeft:O,insetRight:P,insetTop:I}){const N=n+s,z=i+l,V=r+m,W=a+p,K=e-s-m,J=[N+O,z+I,b-O-P,y-I-E,"center",null,null];return{top:[N,0,b,z,"vertical",!0,Gc,s,K],right:[e-V,z,V,y,"horizontal",!1,Gc],bottom:[N,t-W,b,W,"vertical",!1,Gc,s,K],left:[0,z,N,y,"horizontal",!0,Gc],"top-left":[N,0,b,z,"vertical",!0,Gc],"top-right":[N,0,b,z,"vertical",!0,Gc],"bottom-left":[N,t-W,b,W,"vertical",!1,Gc],"bottom-right":[N,t-W,b,W,"vertical",!1,Gc],center:J,inner:J,outer:J}}function MG(e,t,n,r){const[i,a]=x2(e,s=>!!(typeof s.type=="string"&&s.type.startsWith("axis")));RG(i,t,n,r),zG(a,t,n)}function RG(e,t,n,r){r==="center"?iM(t)?BG(e,t,n,r):fl(t)?kG(e,t,n):M_(t)&&LG(e,t,n,e[0].orientation):r==="inner"?PG(e,t,n):r==="outer"&&IG(e,t,n)}function PG(e,t,n){const[r,i,,a]=n,[s,l]=t.getCenter(),[p]=o(t),m=a/2,y=p*m,b=s-y,E=l-y;for(let O=0;O<e.length;O++){const P=e[O];P.bbox={x:r+b,y:i+E,width:y*2,height:y*2}}}function IG(e,t,n){const[r,i,a,s]=n;for(const l of e)l.bbox={x:r,y:i,width:a,height:s}}function kG(e,t,n){const[r,i,a,s]=n;for(const l of e)l.bbox={x:r,y:i,width:a,height:s}}function LG(e,t,n,r){r==="horizontal"?NG(e,t,n):r==="vertical"&&DG(e,t,n)}function DG(e,t,n){const[r,i,,a]=n,s=new Array(e.length).fill(0),p=t.map(s).filter((m,y)=>y%2===0).map(m=>m+r);for(let m=0;m<e.length;m++){const y=e[m],b=p[m],E=p[m+1]-b;y.bbox={x:b,y:i,width:E,height:a}}}function NG(e,t,n){const[r,i,a]=n,s=new Array(e.length).fill(0),p=t.map(s).filter((m,y)=>y%2===1).map(m=>m+i);for(let m=0;m<e.length;m++){const y=e[m],b=p[m],E=p[m+1]-b;y.bbox={x:r,y:b,width:a,height:E}}}function BG(e,t,n,r){const[i,a,s,l]=n;for(const p of e)p.bbox={x:i,y:a,width:s,height:l},p.radar={index:e.indexOf(p),count:e.length}}function FG(e,t,n){const[r,i,a,s,l,p,m,y,b]=n,[E,O,P,I,N,z,V,W]=l==="vertical"?["y",i,"x",r,"height",s,"width",a]:["x",r,"y",i,"width",a,"height",s];e.sort((We,ut)=>m==null?void 0:m(We.order,ut.order));const K=We=>We==="title"||We==="group"||We.startsWith("legend"),J=(We,ut,ct)=>ct===void 0?ut:K(We)?ct:ut,oe=(We,ut,ct)=>ct===void 0?ut:K(We)?ct:ut,Te=p?O+z:O;for(let We=0,ut=Te;We<e.length;We++){const ct=e[We],{crossPadding:Ft=0,type:ft}=ct,{size:St}=ct;ct.bbox={[E]:p?ut-St-Ft:ut+Ft,[P]:oe(ft,I,y),[N]:St,[V]:J(ft,W,b)},ut+=(St+Ft)*(p?-1:1)}const Re=e.filter(We=>We.type==="group");for(const We of Re){const{bbox:ut,children:ct}=We,Ft=ut[V],ft=Ft/ct.length,St=ct.reduce((fn,Hn)=>{var cr;const _r=(cr=Hn.layout)===null||cr===void 0?void 0:cr.justifyContent;return _r||fn},"flex-start"),Mt=ct.map((fn,Hn)=>{const{length:cr=ft,padding:_r=0}=fn;return cr+(Hn===ct.length-1?0:_r)}),Nt=Lp(Mt),tn=Ft-Nt,Yt=St==="flex-start"?0:St==="center"?tn/2:tn;for(let fn=0,Hn=ut[P]+Yt;fn<ct.length;fn++){const cr=ct[fn],{padding:_r=0}=cr,Mr=fn===ct.length-1?0:_r;cr.bbox={[N]:ut[N],[E]:ut[E],[P]:Hn,[V]:Mt[fn]-Mr},Pi(cr,{layout:{justifyContent:St}}),Hn+=Mt[fn]}}}function zG(e,t,n){if(e.length===0)return;const[r,i,a,s]=n,[l]=o(t),p=s/2*l/Math.sqrt(2),m=r+a/2,y=i+s/2;for(let b=0;b<e.length;b++){const E=e[b];E.bbox={x:m-p,y:y-p,width:p*2,height:p*2}}}function hm(e,t,n={},r=!1){if(S0(e)||Array.isArray(e)&&r)return e;const i=ja(e,t);return Pi(n,i)}function vT(e,t={}){return S0(e)||Array.isArray(e)||!YL(e)?e:Pi(t,e)}function YL(e){if(Object.keys(e).length===0)return!0;const{title:t,items:n}=e;return t!==void 0||n!==void 0}function dm(e,t){return typeof e=="object"?ja(e,t):e}var UG=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},Tb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function jG(e,t,n){const{encode:r={},scale:i={},transform:a=[]}=t,s=Tb(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},s),{encode:r,scale:i,transform:a})]}function qL(e,t,n){return UG(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=t,[a]=Jl("data",r),s=eX(i),{transform:l=[]}=s,y=[Tb(s,["transform"]),...l].map(a),b=yield gw(y)(i),E=i&&!Array.isArray(i)&&!Array.isArray(b)?{value:b}:b;return[Array.isArray(b)?tg(b):[],Object.assign(Object.assign({},t),{data:E})]})}function ZG(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i={};for(const[a,s]of Object.entries(r))if(Array.isArray(s))for(let l=0;l<s.length;l++){const p=`${a}${l===0?"":l}`;i[p]=s[l]}else i[a]=s;return[e,Object.assign(Object.assign({},t),{encode:i})]}function VG(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const a=im(r,s=>KG(s)?s:{type:QG(i,s),value:s});return[e,Object.assign(Object.assign({},t),{encode:a})]}function HG(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i=im(r,(a,s)=>{const{type:l}=a;return l!=="constant"||q$(s)?a:Object.assign(Object.assign({},a),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function WG(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const{library:a}=n,s=rX(a),l=im(r,p=>s(i,p));return[e,Object.assign(Object.assign({},t),{encode:l})]}function $G(e,t,n){const{tooltip:r={}}=t;return S0(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:x_(r)&&YL(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function GG(e,t,n){const{data:r,encode:i,tooltip:a={}}=t;if(S0(a))return[e,t];const s=b=>{if(!b)return b;if(typeof b=="string")return e.map(E=>({name:b,value:r[E][b]}));if(x_(b)){const{field:E,channel:O,color:P,name:I=E,valueFormatter:N=oe=>oe}=b,z=typeof N=="string"?rm(N):N,V=O&&i[O],W=V&&i[O].field,K=I||W||O,J=[];for(const oe of e){const Te=E?r[oe][E]:V?i[O].value[oe]:null;J[oe]={name:K,color:P,value:z(Te)}}return J}if(typeof b=="function"){const E=[];for(const O of e){const P=b(r[O],O,r,i);x_(P)?E[O]=P:E[O]={value:P}}return E}return b},{title:l,items:p=[]}=a,m=Tb(a,["title","items"]),y=Object.assign({title:s(l),items:Array.isArray(p)?p.map(s):[]},m);return[e,Object.assign(Object.assign({},t),{tooltip:y})]}function XG(e,t,n){const{encode:r}=t,i=Tb(t,["encode"]);if(!r)return[e,t];const a=Object.entries(r),s=a.filter(([,p])=>{const{value:m}=p;return Array.isArray(m[0])}).flatMap(([p,m])=>{const y=[[p,new Array(e.length).fill(void 0)]],{value:b}=m,E=Tb(m,["value"]);for(let O=0;O<b.length;O++){const P=b[O];if(Array.isArray(P))for(let I=0;I<P.length;I++){const N=y[I]||[`${p}${I}`,new Array(e).fill(void 0)];N[1][O]=P[I],y[I]=N}}return y.map(([O,P])=>[O,Object.assign({type:"column",value:P},E)])}),l=Object.fromEntries([...a,...s]);return[e,Object.assign(Object.assign({},i),{encode:l})]}function YG(e,t,n){const{axis:r={},legend:i={},slider:a={},scrollbar:s={}}=t,l=(m,y)=>{if(typeof m=="boolean")return m?{}:null;const b=m[y];return b===void 0||b?b:null},p=typeof r=="object"?Array.from(new Set(["x","y",...Object.keys(r)])):["x","y"];return Pi(t,{scale:Object.assign(Object.assign({},Object.fromEntries(p.map(m=>{const y=l(s,m);return[m,Object.assign({guide:l(r,m),slider:l(a,m),scrollbar:y},y&&{ratio:y.ratio===void 0?.5:y.ratio})]}))),{color:{guide:l(i,"color")},size:{guide:l(i,"size")},shape:{guide:l(i,"shape")},opacity:{guide:l(i,"opacity")}})}),[e,t]}function qG(e,t,n){const{animate:r}=t;return r||r===void 0?[e,t]:(Pi(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function KG(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;const{type:t}=e;return cl(t)}function QG(e,t){return typeof t=="function"?"transform":typeof t=="string"&&JG(e,t)?"field":"constant"}function JG(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function eX(e){if((0,Yl.Z)(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};const{type:t="inline"}=e,n=Tb(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var KL=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},tX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nX(e,t,n){return KL(this,void 0,void 0,function*(){const r={library:n},[i,a]=yield iX(e,t,r),{encode:s,scale:l,data:p,tooltip:m}=a;if(Array.isArray(p)===!1)return null;const{channels:y}=t,b=h2(Object.entries(s).filter(([,O])=>cl(O)),O=>O.map(([P,I])=>Object.assign({name:P},I)),([O])=>{var P;const I=(P=/([^\d]+)\d*$/.exec(O))===null||P===void 0?void 0:P[1],N=y.find(z=>z.name===I);return N!=null&&N.independent?O:I}),E=y.filter(O=>{const{name:P,required:I}=O;if(b.find(([N])=>N===P))return!0;if(I)throw new Error(`Missing encoding for channel: ${P}.`);return!1}).flatMap(O=>{const{name:P,scale:I,scaleKey:N,range:z,quantitative:V,ordinal:W}=O;return b.filter(([J])=>J.startsWith(P)).map(([J,oe],Te)=>{const Re=oe.some(tn=>tn.visual),We=oe.some(tn=>tn.constant),ut=l[J]||{},{independent:ct=!1,key:Ft=N||J,type:ft=We?"constant":Re?"identity":I}=ut,St=tX(ut,["independent","key","type"]),Mt=ft==="constant",Nt=Mt?void 0:z;return{name:J,values:oe,scaleKey:ct||Mt?Symbol("independent"):Ft,scale:Object.assign(Object.assign({type:ft,range:Nt},St),{quantitative:V,ordinal:W})}})});return[a,Object.assign(Object.assign({},t),{index:i,channels:E,tooltip:m})]})}function rX(e){const[t]=Jl("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:aX(r)})}function iX(e,t,n){return KL(this,void 0,void 0,function*(){const{library:r}=n,[i]=Jl("transform",r),{preInference:a=[],postInference:s=[]}=t,{transform:l=[]}=e,p=[jG,qL,ZG,VG,HG,WG,XG,qG,YG,$G,...a.map(i),...l.map(i),...s.map(i),GG];let m=[],y=e;for(const b of p)[m,y]=yield b(m,y,n);return[m,y]})}function aX(e){const{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var ug=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},uy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qM(e,t,n,r){var i;return ug(this,void 0,void 0,function*(){const[a]=Jl("composition",n),[s]=Jl("interaction",n),l=new Set(Object.keys(n).map(ft=>{var St;return(St=/mark\.(.*)/.exec(ft))===null||St===void 0?void 0:St[1]}).filter(cl)),p=new Set(Object.keys(n).map(ft=>{var St;return(St=/component\.(.*)/.exec(ft))===null||St===void 0?void 0:St[1]}).filter(cl)),m=ft=>{const{type:St}=ft;if(typeof St=="function"){const{props:Mt={}}=St,{composite:Nt=!0}=Mt;if(Nt)return"mark"}return typeof St!="string"?St:l.has(St)||p.has(St)?"mark":St},y=ft=>m(ft)==="mark",b=ft=>m(ft)==="standardView",E=ft=>{const{type:St}=ft;return typeof St!="string"?!1:!!p.has(St)},O=ft=>{if(b(ft))return[ft];const St=m(ft);return a({type:St,static:E(ft)})(ft)},P=[],I=new Map,N=new Map,z=[e],V=[];for(;z.length;){const ft=z.shift();if(b(ft)){const St=N.get(ft),[Mt,Nt]=St?tD(St,ft,n):yield JL(ft,n);I.set(Mt,ft),P.push(Mt);const tn=Nt.flatMap(O).map(Yt=>U4(Yt,n));if(z.push(...tn),tn.every(b)){const Yt=yield Promise.all(tn.map(fn=>eD(fn,n)));O$(Yt);for(let fn=0;fn<tn.length;fn++){const Hn=tn[fn],cr=Yt[fn];N.set(Hn,cr)}}}else{const St=y(ft)?ft:yield aD(ft,n),Mt=O(St);Array.isArray(Mt)?z.push(...Mt):typeof Mt=="function"&&V.push(Mt())}}r.emitter.emit(Xs.BEFORE_PAINT);const W=new Map,K=new Map,J=[];t.selectAll(pm(nw)).data(P,ft=>ft.key).join(ft=>ft.append("g").attr("className",nw).attr("id",St=>St.key).call(QL).each(function(St,Mt,Nt){QM(St,Ho(Nt),J,n,r),W.set(St,Nt)}),ft=>ft.call(QL).each(function(St,Mt,Nt){QM(St,Ho(Nt),J,n,r),K.set(St,Nt)}),ft=>ft.each(function(St,Mt,Nt){const tn=Nt.nameInteraction.values();for(const Yt of tn)Yt.destroy()}).remove());const oe=(ft,St,Mt)=>Array.from(ft.entries()).map(([Nt,tn])=>{const Yt=Mt||new Map,fn=(_r,Mr=fi=>fi)=>Yt.set(_r,Mr),Hn=I.get(Nt),cr=sX(Ho(tn),Hn,n,r);return{view:Nt,container:tn,options:Hn,setState:fn,update:(_r,Mr)=>ug(this,void 0,void 0,function*(){const Qi=v2(Array.from(Yt.values()))(Hn);return yield cr(Qi,_r,()=>{ai(Mr)&&St(ft,Mr,Yt)})})}}),Te=(ft=K,St,Mt)=>{var Nt;const tn=oe(ft,Te,Mt);for(const Yt of tn){const{options:fn,container:Hn}=Yt,cr=Hn.nameInteraction;let _r=mT(fn);St&&(_r=_r.filter(Mr=>St.includes(Mr[0])));for(const Mr of _r){const[fi,Qi]=Mr,Ta=cr.get(fi);if(Ta&&((Nt=Ta.destroy)===null||Nt===void 0||Nt.call(Ta)),Qi){const Ci=KM(Yt.view,fi,Qi,s)(Yt,tn,r.emitter);cr.set(fi,{destroy:Ci})}}}},Re=oe(W,Te);for(const ft of Re){const{options:St}=ft,Mt=new Map;ft.container.nameInteraction=Mt;for(const Nt of mT(St)){const[tn,Yt]=Nt;if(Yt){const Hn=KM(ft.view,tn,Yt,s)(ft,Re,r.emitter);Mt.set(tn,{destroy:Hn})}}}Te();const{width:We,height:ut}=e,ct=[];for(const ft of V){const St=new Promise(Mt=>ug(this,void 0,void 0,function*(){for(const Nt of ft){const tn=Object.assign({width:We,height:ut},Nt);yield qM(tn,t,n,r)}Mt()}));ct.push(St)}r.views=P,(i=r.animations)===null||i===void 0||i.forEach(ft=>ft==null?void 0:ft.cancel()),r.animations=J,r.emitter.emit(Xs.AFTER_PAINT);const Ft=J.filter(cl).map(EX).map(ft=>ft.finished);return Promise.all([...Ft,...ct])})}function QL(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function oX(e){const[,t]=Jl("interaction",e);return n=>{const[r,i]=n;try{return[r,t(r)]}catch(a){return[r,i.type]}}}function sX(e,t,n,r){const i=oX(n),a=p=>p[1]&&p[1].props&&p[1].props.reapplyWhenUpdate,l=mT(t).map(i).filter(a).map(p=>p[0]);return(p,m,y)=>ug(this,void 0,void 0,function*(){const b=[],[E,O]=yield JL(p,n);QM(E,e,b,n,r);for(const P of l.filter(I=>I!==m))uX(P,e,p,E,n,r);for(const P of O)qM(P,e,n,r);return y(),{options:p,view:E}})}function uX(e,t,n,r,i,a){var s;const[l]=Jl("interaction",i),m=t.node().nameInteraction,y=mT(n).find(([I])=>I===e),b=m.get(e);if(!b||((s=b.destroy)===null||s===void 0||s.call(b),!y[1]))return;const E=KM(r,e,y[1],l),O={options:n,view:r,container:t.node(),update:I=>Promise.resolve(I)},P=E(O,[],a.emitter);m.set(e,{destroy:P})}function JL(e,t){return ug(this,void 0,void 0,function*(){const n=yield cX(e,t),r=lX(n);e.interaction=r.interaction,e.coordinate=r.coordinate,e.marks=[...r.marks,...r.components];const i=U4(r,t),a=yield eD(i,t);return tD(a,i,t)})}function lX(e){const{coordinate:t={},interaction:n={},style:r={},marks:i}=e,a=uy(e,["coordinate","interaction","style","marks"]),s=i.map(E=>E.coordinate||{}),l=i.map(E=>E.interaction||{}),p=i.map(E=>E.viewStyle||{}),m=[...s,t].reduceRight((E,O)=>Pi(E,O),{}),y=[n,...l].reduce((E,O)=>Pi(E,O),{}),b=[...p,r].reduce((E,O)=>Pi(E,O),{});return Object.assign(Object.assign({},a),{marks:i,coordinate:m,interaction:y,style:b})}function cX(e,t){return ug(this,void 0,void 0,function*(){const[n,r]=Jl("mark",t),i=new Set(Object.keys(t).map(E=>{var O;return(O=/component\.(.*)/.exec(E))===null||O===void 0?void 0:O[1]}).filter(cl)),{marks:a}=e,s=[],l=[],p=[...a],{width:m,height:y}=AG(e),b={options:e,width:m,height:y};for(;p.length;){const[E]=p.splice(0,1),O=yield aD(E,t),{type:P=ny("G2Mark type is required."),key:I}=O;if(i.has(P))l.push(O);else{const{props:N={}}=r(P),{composite:z=!0}=N;if(!z)s.push(O);else{const{data:V}=O,W=Object.assign(Object.assign({},O),{data:V&&(Array.isArray(V)?V:V.value)}),K=yield n(W,b),J=Array.isArray(K)?K:[K];p.unshift(...J.map((oe,Te)=>Object.assign(Object.assign({},oe),{key:`${I}-${Te}`})))}}}return Object.assign(Object.assign({},e),{marks:s,components:l})})}function eD(e,t){return ug(this,void 0,void 0,function*(){const[n]=Jl("theme",t),[,r]=Jl("mark",t),{theme:i,marks:a,coordinates:s=[]}=e,l=n(iD(i)),p=new Map;for(const y of a){const{type:b}=y,{props:E={}}=r(b),O=yield nX(y,E,t);if(O){const[P,I]=O;p.set(P,I)}}const m=Zl(Array.from(p.values()).flatMap(y=>y.channels),({scaleKey:y})=>y);for(const y of m.values()){const b=y.reduce((W,{scale:K})=>Pi(W,K),{}),{scaleKey:E}=y[0],{values:O}=y[0],P=Array.from(new Set(O.map(W=>W.field).filter(cl))),I=Pi({guide:{title:P.length===0?void 0:P},field:P[0]},b),{name:N}=y[0],z=y.flatMap(({values:W})=>W.map(K=>K.value)),V=Object.assign(Object.assign({},w$(N,z,I,s,l,t)),{key:E});y.forEach(W=>W.scale=V)}return p})}function KM(e,t,n,r){const i=e.theme,a=typeof t=="string"?i[t]||{}:{};return r(Pi(a,Object.assign({type:t},n)))}function tD(e,t,n){const[r]=Jl("mark",n),[i]=Jl("theme",n),[a]=Jl("labelTransform",n),{key:s,frame:l=!1,theme:p,clip:m,style:y={},labelTransform:b=[]}=t,E=i(iD(p)),O=Array.from(e.values()),P=A$(O,t),I=rG(nG(AX(Array.from(P),O,e),t,n)),N=TG(I,t,E,n),z=eW(N,t,n),V=l?Pi({mainLineWidth:1,mainStroke:"#000"},y):y;OG(HL(I),z,N),wG(I);const W={};for(const oe of I){const{scales:Te=[]}=oe,Re=[];for(const We of Te){const{name:ut}=We,ct=LL(We,n);Re.push(ct),ut==="y"&&ct.update(Object.assign(Object.assign({},ct.getOptions()),{xScale:W.x})),kL(W,{[ut]:ct})}oe.scaleInstances=Re}const K=[];for(const[oe,Te]of e.entries()){const{children:Re,dataDomain:We,modifier:ut,key:ct}=oe,{index:Ft,channels:ft,tooltip:St}=Te,Mt=Object.fromEntries(ft.map(({name:Ci,scale:Ya})=>[Ci,Ya])),Nt=im(Mt,Ci=>LL(Ci,n));kL(W,Nt);const tn=T$(ft,Nt),Yt=r(oe),[fn,Hn,cr]=dX(Yt(Ft,Nt,tn,z)),_r=We||fn.length,Mr=ut?ut(Hn,_r,N):[],fi=Ci=>{var Ya,Ga;return(Ga=(Ya=St.title)===null||Ya===void 0?void 0:Ya[Ci])===null||Ga===void 0?void 0:Ga.value},Qi=Ci=>St.items.map(Ya=>Ya[Ci]),Ta=fn.map((Ci,Ya)=>{const Ga=Object.assign({points:Hn[Ya],transform:Mr[Ya],index:Ci,markKey:ct,viewKey:s},St&&{title:fi(Ci),items:Qi(Ci)});for(const[vo,cs]of Object.entries(tn))Ga[vo]=cs[Ci],cr&&(Ga[`series${Qd(vo)}`]=cr[Ya].map(Wo=>cs[Wo]));return cr&&(Ga.seriesIndex=cr[Ya]),cr&&St&&(Ga.seriesItems=cr[Ya].map(vo=>Qi(vo)),Ga.seriesTitle=cr[Ya].map(vo=>fi(vo))),Ga});Te.data=Ta,Te.index=fn;const Fi=Re==null?void 0:Re(Ta,Nt,N);K.push(...Fi||[])}return[{layout:N,theme:E,coordinate:z,markState:e,key:s,clip:m,scale:W,style:V,components:I,labelTransform:v2(b.map(a))},K]}function QM(e,t,n,r,i){return ug(this,void 0,void 0,function*(){const{components:a,theme:s,layout:l,markState:p,coordinate:m,key:y,style:b,clip:E,scale:O}=e,{x:P,y:I,width:N,height:z}=l,V=uy(l,["x","y","width","height"]),W=["view","plot","main","content"],K=W.map((Yt,fn)=>fn),J=["a","margin","padding","inset"],oe=W.map(Yt=>b_(Object.assign({},s.view,b),Yt)),Te=J.map(Yt=>ja(V,Yt)),Re=Yt=>Yt.style("x",fn=>ft[fn].x).style("y",fn=>ft[fn].y).style("width",fn=>ft[fn].width).style("height",fn=>ft[fn].height).each(function(fn,Hn,cr){CX(Ho(cr),oe[fn])});let We=0,ut=0,ct=N,Ft=z;const ft=K.map(Yt=>{const fn=Te[Yt],{left:Hn=0,top:cr=0,bottom:_r=0,right:Mr=0}=fn;return We+=Hn,ut+=cr,ct-=Hn+Mr,Ft-=cr+_r,{x:We,y:ut,width:ct,height:Ft}});t.selectAll(pm(Jx)).data(K.filter(Yt=>cl(oe[Yt])),Yt=>W[Yt]).join(Yt=>Yt.append("rect").attr("className",Jx).style("zIndex",-2).call(Re),Yt=>Yt.call(Re),Yt=>Yt.remove());const St=gX(p),Mt=St?{duration:St[1]}:!1;for(const[,Yt]of tb(a,fn=>`${fn.type}-${fn.position}`))Yt.forEach((fn,Hn)=>fn.index=Hn);const Nt=t.selectAll(pm(rw)).data(a,Yt=>`${Yt.type}-${Yt.position}-${Yt.index}`).join(Yt=>Yt.append("g").style("zIndex",({zIndex:fn})=>fn||-1).attr("className",rw).append(fn=>VL(Pi({animate:Mt,scale:O},fn),m,s,r,p)),Yt=>Yt.transition(function(fn,Hn,cr){const{preserve:_r=!1}=fn;if(_r)return;const Mr=VL(Pi({animate:Mt,scale:O},fn),m,s,r,p),{attributes:fi}=Mr,[Qi]=cr.childNodes;return Qi.update(fi,!1)})).transitions();n.push(...Nt.flat().filter(cl));const tn=t.selectAll(pm(Dh)).data([l],()=>y).join(Yt=>Yt.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Dh).call(oD).call(uD,Array.from(p.keys())).call(lD,E),Yt=>Yt.call(uD,Array.from(p.keys())).call(fn=>St?TX(fn,St):oD(fn)).call(lD,E)).transitions();n.push(...tn.flat());for(const[Yt,fn]of p.entries()){const{data:Hn}=fn,{key:cr,class:_r,type:Mr}=Yt,fi=t.select(`#${cr}`),Qi=bX(Yt,fn,e,r,i),Ta=xX(Yt,fn,e,r),Fi=SX(Yt,fn,e,r),Ci=wX(Yt,fn,e,r),Ya=yX(t,fi,_r,"element"),Ga=fi.selectAll(pm(Lh)).selectFacetAll(Ya).data(Hn,vo=>vo.key,vo=>vo.groupKey).join(vo=>vo.append(Qi).attr("className",Lh).attr("markType",Mr).transition(function(cs,Wo,fs){return Ta(cs,[fs])}),vo=>vo.call(cs=>{const Wo=cs.parent(),fs=yw(nu=>{const[Vu,ec]=nu.getBounds().min;return[Vu,ec]});cs.transition(function(nu,Vu,ec){_X(ec,Wo,fs);const uf=Qi(nu,Vu),Fp=Fi(nu,[ec],[uf]);return Fp!==null||(ec.nodeName===uf.nodeName&&uf.nodeName!=="g"?nb(ec,uf):(ec.parentNode.replaceChild(uf,ec),uf.className=Lh,uf.markType=Mr,uf.__data__=ec.__data__)),Fp}).attr("markType",Mr).attr("className",Lh)}),vo=>vo.each(function(cs,Wo,fs){fs.__removed__=!0}).transition(function(cs,Wo,fs){return Ci(cs,[fs])}).remove(),vo=>vo.append(Qi).attr("className",Lh).attr("markType",Mr).transition(function(cs,Wo,fs){const{__fromElements__:nu}=fs,Vu=Fi(cs,nu,[fs]);return new Wc(nu,null,fs.parentNode).transition(Vu).remove(),Vu}),vo=>vo.transition(function(cs,Wo,fs){const Vu=new Wc([],fs.__toData__,fs.parentNode).append(Qi).attr("className",Lh).attr("markType",Mr).nodes();return Fi(cs,[fs],Vu)}).remove()).transitions();n.push(...Ga.flat())}fX(e,t,n,r,i)})}function fX(e,t,n,r,i){const[a]=Jl("labelTransform",r),{markState:s,labelTransform:l}=e,p=t.select(pm($1)).node(),m=new Map,y=new Map,b=Array.from(s.entries()).flatMap(([I,N])=>{const{labels:z=[],key:V}=I,W=mX(I,N,e,r,i),K=t.select(`#${V}`).selectAll(pm(Lh)).nodes().filter(J=>!J.__removed__);return z.flatMap((J,oe)=>{const{transform:Te=[]}=J,Re=uy(J,["transform"]);return K.flatMap(We=>{const ut=hX(Re,oe,We);return ut.forEach(ct=>{m.set(ct,W),y.set(ct,J)}),ut})})}),E=Ho(p).selectAll(pm(eo)).data(b,I=>I.key).join(I=>I.append(N=>m.get(N)(N)).attr("className",eo),I=>I.each(function(N,z,V){const K=m.get(N)(N);nb(V,K)}),I=>I.remove()).nodes(),O=Zl(E,I=>y.get(I.__data__)),{coordinate:P}=e;for(const[I,N]of O){const{transform:z=[]}=I;v2(z.map(a))(N,P)}l&&l(E,P)}function hX(e,t,n){const{seriesIndex:r,seriesKey:i,points:a,key:s,index:l}=n.__data__,p=vX(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${s}-${t}`,bounds:p,index:l,points:a,dependentElement:n})];const m=pX(e),y=r.map((b,E)=>Object.assign(Object.assign({},e),{key:`${i[E]}-${t}`,bounds:[a[E]],index:b,points:a,dependentElement:n}));return m?m(y):y}function dX([e,t,n]){if(n)return[e,t,n];const r=[],i=[];for(let a=0;a<e.length;a++){const s=e[a],l=t[a];l.every(([p,m])=>cl(p)&&cl(m))&&(r.push(s),i.push(l))}return[r,i]}function pX(e){const{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function vX(e){const t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(s=>{const l=s.effect.getKeyframes();t.attr(l[l.length-1])}),e.parentNode.appendChild(t);const r=t.getLocalBounds();t.destroy();const{min:i,max:a}=r;return[i,a]}function mX(e,t,n,r,i){const[a]=Jl("shape",r),{data:s}=e,{data:l,defaultLabelShape:p}=t,m=l.map(O=>O.points),{theme:y,coordinate:b}=n,E=Object.assign(Object.assign({},i),{document:F4(i),theme:y,coordinate:b});return O=>{const{index:P,points:I}=O,N=s[P],{formatter:z=Mt=>`${Mt}`,transform:V,style:W,render:K}=O,J=uy(O,["formatter","transform","style","render"]),oe=im(Object.assign(Object.assign({},J),W),Mt=>nD(Mt,N,P,s)),{shape:Te=p,text:Re}=oe,We=uy(oe,["shape","text"]),ut=typeof z=="string"?rm(z):z,ct=Object.assign(Object.assign({},We),{text:ut(Re,N,P,s),datum:N}),Ft=Object.assign({type:`label.${Te}`,render:K},We),ft=a(Ft,E),St=rD(y,"label",Te,"label");return ft(I,ct,St,m)}}function nD(e,t,n,r){return typeof e=="function"?e(t,n,r):typeof e!="string"?e:t[e]!==void 0?t[e]:e}function gX(e){let t=-1/0,n=1/0;for(const[r,i]of e){const{animate:a={}}=r,{data:s}=i,{enter:l={},update:p={},exit:m={}}=a,{type:y,duration:b=300,delay:E=0}=p,{type:O,duration:P=300,delay:I=0}=l,{type:N,duration:z=300,delay:V=0}=m;for(const W of s){const{updateType:K=y,updateDuration:J=b,updateDelay:oe=E,enterType:Te=O,enterDuration:Re=P,enterDelay:We=I,exitDuration:ut=z,exitDelay:ct=V,exitType:Ft=N}=W;(K===void 0||K)&&(t=Math.max(t,J+oe),n=Math.min(n,oe)),(Ft===void 0||Ft)&&(t=Math.max(t,ut+ct),n=Math.min(n,ct)),(Te===void 0||Te)&&(t=Math.max(t,Re+We),n=Math.min(n,We))}}return t===-1/0?null:[n,t-n]}function yX(e,t,n,r){return e.node().parentElement.findAll(a=>a.style.facet!==void 0&&a.style.facet===n&&a!==t.node()).flatMap(a=>a.getElementsByClassName(r))}function _X(e,t,n){if(!e.__facet__)return;const r=e.parentNode.parentNode,i=t.parentNode,[a,s]=n(r),[l,p]=n(i),m=`translate(${a-l}, ${s-p})`;K3(e,m),t.append(e)}function bX(e,t,n,r,i){const[a]=Jl("shape",r),{data:s}=e,{defaultShape:l,data:p,shape:m}=t,y=p.map(N=>N.points),{theme:b,coordinate:E}=n,{type:O,style:P={}}=e,I=Object.assign(Object.assign({},i),{document:F4(i),coordinate:E,theme:b});return N=>{const{shape:z=l}=P,{shape:V=z,points:W,seriesIndex:K,index:J}=N,oe=uy(N,["shape","points","seriesIndex","index"]),Te=Object.assign(Object.assign({},oe),{index:J}),Re=K?K.map(ft=>s[ft]):s[J],We=K||J,ut=im(P,ft=>nD(ft,Re,We,s)),ct=m[V]?m[V](ut,I):a(Object.assign(Object.assign({},ut),{type:sD(e,V)}),I),Ft=rD(b,O,V,l);return ct(W,Te,Ft,y)}}function rD(e,t,n,r){if(typeof t!="string")return;const{color:i}=e,a=e[t]||{},s=a[n]||a[r];return Object.assign({color:i},s)}function JM(e,t,n,r,i){var a,s;const[,l]=Jl("shape",i),[p]=Jl("animation",i),{defaultShape:m,shape:y}=n,{theme:b,coordinate:E}=r,P=`default${Qd(e)}Animation`,{[P]:I}=((a=y[m])===null||a===void 0?void 0:a.props)||l(sD(t,m)).props,{[e]:N={}}=b,z=((s=t.animate)===null||s===void 0?void 0:s[e])||{},V={coordinate:E};return(W,K,J)=>{const{[`${e}Type`]:oe,[`${e}Delay`]:Te,[`${e}Duration`]:Re,[`${e}Easing`]:We}=W,ut=Object.assign({type:oe||I},z);if(!ut.type)return null;const ft=p(ut,V)(K,J,Pi(N,{delay:Te,duration:Re,easing:We}));return Array.isArray(ft)?ft:[ft]}}function xX(e,t,n,r){return JM("enter",e,t,n,r)}function EX(e){return e.finished.then(()=>{e.cancel()}),e}function SX(e,t,n,r){return JM("update",e,t,n,r)}function wX(e,t,n,r){return JM("exit",e,t,n,r)}function iD(e={}){if(typeof e=="string")return{type:e};const{type:t="light"}=e,n=uy(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function mT(e){const t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(Pi(t,n)).reverse()}function aD(e,t){return ug(this,void 0,void 0,function*(){const n={library:t},{data:r}=e,i=uy(e,["data"]);if(r==null)return e;const[,{data:a}]=yield qL([],{data:r},n);return Object.assign({data:a},i)})}function oD(e){e.style("x",t=>t.paddingLeft+t.marginLeft).style("y",t=>t.paddingTop+t.marginTop).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function TX(e,t){const[n,r]=t;e.transition(function(i,a,s){const{x:l,y:p,width:m,height:y}=s.style,{paddingLeft:b,paddingTop:E,innerWidth:O,innerHeight:P,marginLeft:I,marginTop:N}=i,z=[{x:l,y:p,width:m,height:y},{x:b+I,y:E+N,width:O,height:P}];return s.animate(z,{delay:n,duration:r,fill:"both"})})}function sD(e,t){const{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function uD(e,t){const n=a=>a.class!==void 0?`${a.class}`:"";e.nodes().length===0||(e.selectAll(pm(Qx)).data(t,a=>a.key).join(a=>a.append("g").attr("className",Qx).attr("id",s=>s.key).style("facet",n).style("fill","transparent").style("zIndex",s=>{var l;return(l=s.zIndex)!==null&&l!==void 0?l:0}),a=>a.style("facet",n).style("fill","transparent").style("zIndex",s=>{var l;return(l=s.zIndex)!==null&&l!==void 0?l:0}),a=>a.remove()),e.select(pm($1)).node())||e.append("g").attr("className",$1).style("zIndex",0)}function pm(...e){return e.map(t=>`.${t}`).join("")}function lD(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;const{paddingTop:r,paddingLeft:i,marginLeft:a,marginTop:s,innerWidth:l,innerHeight:p}=n;return new sh({style:{x:i+a,y:r+s,width:l,height:p}})})}function AX(e,t,n){var r;for(const[m]of n.entries())if(m.type==="cell")return e.filter(y=>y.name!=="shape");if(t.length!==1||e.some(m=>m.name==="shape"))return e;const{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;const s={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},p={field:((r=e.find(m=>m.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[s[i]]};return[...e,p]}function CX(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function cD(e){const t=Pi({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){const a=i.shift();if(a.key===void 0){const l=n.get(a),p=r.get(a),m=l===null?"0":`${l.key}-${p}`;a.key=m}const{children:s=[]}=a;if(Array.isArray(s))for(let l=0;l<s.length;l++){const p=Pi({},s[l]);s[l]=p,n.set(p,a),r.set(p,l),i.push(p)}}return t}function OX(e,t){const n=new J1;return n.registerPlugin(new eb),new sv({width:e,height:t,container:document.createElement("div"),renderer:n})}function MX(e,t={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:a=480,depth:s=0}=e,l=cD(e),{canvas:p=OX(i,a),emitter:m=new io,library:y}=t;t.canvas=p,t.emitter=m;const{width:b,height:E}=p.getConfig();(b!==i||E!==a)&&p.resize(i,a),m.emit(Xs.BEFORE_RENDER);const O=Ho(p.document.documentElement);return p.ready.then(()=>qM(Object.assign(Object.assign({},l),{width:i,height:a,depth:s}),O,y,t)).then(()=>{if(s){const[P,I]=p.document.documentElement.getPosition();p.document.documentElement.setPosition(P,I,-s/2)}p.requestAnimationFrame(()=>{m.emit(Xs.AFTER_RENDER),n==null||n()})}).catch(P=>{r==null||r(P)}),PX(p.getConfig().container)}function rve(e,t={},n=()=>{},r=i=>{throw i}){var i;const{width:a=640,height:s=480}=e,l=cD(e),{group:p=new Group,emitter:m=new EventEmitter,library:y}=t;p!=null&&p.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const b=select(p);return t.group=p,t.emitter=m,t.canvas=t.canvas||((i=p==null?void 0:p.ownerDocument)===null||i===void 0?void 0:i.defaultView),m.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},l),{width:a,height:s}),b,y,t).then(()=>{var E;(E=t.canvas)===null||E===void 0||E.requestAnimationFrame(()=>{m.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(E=>{r==null||r(E)}),p}function fD(e,t={},n=!1){const{canvas:r,emitter:i}=t;r&&(RX(r),n?r.destroy():r.destroyChildren()),i.off()}function RX(e){const t=e.getRoot().querySelectorAll(`.${nw}`);t==null||t.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function PX(e){return typeof e=="string"?document.getElementById(e):e}const Ab=e=>e?parseInt(e):0;function IX(e){const t=getComputedStyle(e),n=e.clientWidth||Ab(t.width),r=e.clientHeight||Ab(t.height),i=Ab(t.paddingLeft)+Ab(t.paddingRight),a=Ab(t.paddingTop)+Ab(t.paddingBottom);return{width:n-i,height:r-a}}function ive(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:a=r,paddingTop:s=r,paddingBottom:l=r,margin:p=0,marginLeft:m=p,marginRight:y=p,marginTop:b=p,marginBottom:E=p,inset:O=0,insetLeft:P=O,insetRight:I=O,insetTop:N=O,insetBottom:z=O}=e,V=J=>J==="auto"?20:J,W=n-V(i)-V(a)-m-y-P-I,K=t-V(s)-V(l)-b-E-N-z;return{width:W,height:K}}function eR(e,t){const n=[e];for(;n.length;){const r=n.shift();t&&t(r);const i=r.children||[];for(const a of i)n.push(a)}}class tR{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){const n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){const n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){const t=this.parentNode;if(t){const{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return eR(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){const n=[];return eR(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return eR(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}}var hD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const nR=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],dD="__remove__",pD="__callback__",vD=1,mD=1;function kX(e){if(e===void 0){const t=document.createElement("div");return t[dD]=!0,t}return typeof e=="string"?document.getElementById(e):e}function LX(e){const t=e.parentNode;t&&t.removeChild(e)}function DX(e){if(e.type!==null)return e;const t=e.children[e.children.length-1];for(const n of nR)t.attr(n,e.attr(n));return t}function gD(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function rR(e,t){const{width:n,height:r,autoFit:i,depth:a=0}=e;let s=640,l=480;if(i){const{width:p,height:m}=IX(t);s=p||s,l=m||l}return s=n||s,l=r||l,{width:Math.max((0,Yl.Z)(s)?s:vD,vD),height:Math.max((0,Yl.Z)(l)?l:mD,mD),depth:a}}function NX(e){const t=DX(e),n=[t],r=new Map;for(r.set(t,gD(t));n.length;){const i=n.pop(),a=r.get(i),{children:s=[]}=i;for(const l of s)if(l.type===pD)a.children=l.value;else{const p=gD(l),{children:m=[]}=a;m.push(p),n.push(l),r.set(l,p),a.children=m}}return r.get(t)}function BX(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function FX(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function zX(e,t,n,r,i){const{type:a}=e,{type:s=n||a}=t;if(FX(s,i)){for(const l of nR)e.attr(l)!==void 0&&t[l]===void 0&&(t[l]=e.attr(l));return t}if(BX(s,r)){const l={type:"view"},p=Object.assign({},t);for(const m of nR)p[m]!==void 0&&(l[m]=p[m],delete p[m]);return Object.assign(Object.assign({},l),{children:[p]})}return t}function UX(e,t,n){if(typeof e=="function")return t.mark;const i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function jX(e,t,n){if(typeof e=="function"){const p=new tR;return p.value=e,p.type=pD,p}const{type:r,children:i}=e,a=hD(e,["type","children"]),s=UX(r,t,n),l=new s;return l.value=a,l.type=r,l}function ZX(e,t){const{type:n,children:r}=t,i=hD(t,["type","children"]);e.type===n||n===void 0?bw(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function VX(e,t,n,r){if(!e)return;const i=[[e,t]];for(;i.length;){const[a,s]=i.shift(),l=jX(s,n,r);Array.isArray(a.children)&&a.push(l);const{children:p}=s;if(Array.isArray(p))for(const m of p)i.push([l,m]);else typeof p=="function"&&i.push([l,p])}}function HX(e,t,n,r,i){const a=zX(e,t,n,r,i),s=[[null,e,a]];for(;s.length;){const[l,p,m]=s.shift();if(!p)VX(l,m,r,i);else if(!m)p.remove();else{ZX(p,m);const{children:y}=m,{children:b}=p;if(Array.isArray(y)&&Array.isArray(b)){const E=Math.max(y.length,b.length);for(let O=0;O<E;O++){const P=y[O],I=b[O];s.push([p,I,P])}}else typeof y=="function"&&s.push([p,null,y])}}}function WX(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}const $X={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function GX(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:$X[t]}function iR(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>iR(i,t,n,r))}function aR(e){iR(e,"visibility","hidden",!0)}function oR(e){iR(e,"visibility","visible",!0)}function XX(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function YX(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function qX(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const a=this.attr(n)||{};return a[r]=arguments.length===1?!0:i,this.attr(n,a)}}function KX(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(x_(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);const i=this.attr(t)||{},{items:a=[]}=i;return a.push(r),i.items=a,this.attr(t,i)}}function QX(e,t,{ctor:n}){e.prototype[t]=function(r){const i=this.append(n);return t==="mark"&&(i.type=r),i}}function JX(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function gT(e){return t=>{for(const[n,r]of Object.entries(e)){const{type:i}=r;i==="value"?XX(t,n,r):i==="array"?YX(t,n,r):i==="object"?qX(t,n,r):i==="node"?QX(t,n,r):i==="container"?JX(t,n,r):i==="mix"&&KX(t,n,r)}return t}}function yD(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}const _D={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},eY=Object.assign(Object.assign({},_D),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),tY=Object.assign(Object.assign({},_D),{labelTransform:{type:"array"}});var nY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};let yT=class extends tR{changeData(t){var n;const r=this.getRoot();if(r)return this.attr("data",t),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",t)}),r==null?void 0:r.render()}getView(){const t=this.getRoot(),{views:n}=t.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var t;return(t=this.getView())===null||t===void 0?void 0:t.scale}getScaleByChannel(t){const n=this.getScale();if(n)return n[t]}getCoordinate(){var t;return(t=this.getView())===null||t===void 0?void 0:t.coordinate}getTheme(){var t;return(t=this.getView())===null||t===void 0?void 0:t.theme}getGroup(){const t=this._key;return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}show(){const t=this.getGroup();t&&!t.isVisible()&&oR(t)}hide(){const t=this.getGroup();t&&t.isVisible()&&aR(t)}};yT=nY([gT(tY)],yT);var rY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};let sR=class extends tR{changeData(t){const n=this.getRoot();if(n)return this.attr("data",t),n==null?void 0:n.render()}getMark(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(a=>a.key===this.attr("key"));return r.get(i)}getScale(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(t){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[t]}getGroup(){const t=this.attr("key");return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}};sR=rY([gT(eY)],sR);var iY=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},aY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const oY="G2_CHART_KEY";class sY extends yT{constructor(t){const{container:n,canvas:r,renderer:i,plugins:a,lib:s}=t,l=aY(t,["container","canvas","renderer","plugins","lib"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=fw(()=>{this.forceFit()},300),this._renderer=i||new J1,this._plugins=a||[],this._container=kX(n),this._emitter=new io,this._context={library:Object.assign(Object.assign({},s),iw),emitter:this._emitter,canvas:r},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const t=new Promise((a,s)=>MX(this._computedOptions(),this._context,this._createResolve(a),this._createReject(s))),[n,r,i]=WX();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return NX(this);const{type:n}=t;return n&&(this._previousDefinedType=n),HX(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){const t=this.options();this.emit(Xs.BEFORE_CLEAR),this._reset(),fD(t,this._context,!1),this.emit(Xs.AFTER_CLEAR)}destroy(){const t=this.options();this.emit(Xs.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),fD(t,this._context,!0),this._container[dD]&&LX(this._container),this.emit(Xs.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:t,height:n}=rR(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(Xs.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(Xs.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(Xs.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(Xs.AFTER_CHANGE_SIZE)}),r}_create(){const{library:t}=this._context,n=a=>a.startsWith("mark.")||a==="component.axisX"||a==="component.axisY"||a==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(const a of r){const s=a.split(".").pop();class l extends sR{constructor(){super({},s)}}this._marks[s]=l,this[s]=function(p){const m=this.append(l);return s==="mark"&&(m.type=p),m}}const i=["composition.view",...Object.keys(t).filter(a=>a.startsWith("composition.")&&a!=="composition.mark")];this._compositions=Object.fromEntries(i.map(a=>{const s=a.split(".").pop();let l=class extends yT{constructor(){super({},s)}};return l=iY([gT(yD(this._marks))],l),[s,l]}));for(const a of Object.values(this._compositions))gT(yD(this._compositions))(a);for(const a of i){const s=a.split(".").pop();this[s]=function(){const l=this._compositions[s];return this.type=null,this.append(l)}}}_reset(){const t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){const t=this.options(),{key:n=oY}=t,{width:r,height:i,depth:a}=rR(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:a})}_createCanvas(){const{width:t,height:n}=rR(this.options(),this._container);this._plugins.push(new eb),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new sv({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function uY(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}pi.enableCSSParsing=!1;var lY=Object.prototype.hasOwnProperty,uR=function(e,t){if(e===null||!E0(e))return{};var n={};return SM(t,function(r){lY.call(e,r)&&(n[r]=e[r])}),n};function bD(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Z2(e,t,n,r,i){for(var a=e.children,s,l=-1,p=a.length,m=e.value&&(r-t)/e.value;++l<p;)s=a[l],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*m}function cY(){var e=1,t=1,n=0,r=!1;function i(s){var l=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/l,s.eachBefore(a(t,l)),r&&s.eachBefore(bD),s}function a(s,l){return function(p){p.children&&Z2(p,p.x0,s*(p.depth+1)/l,p.x1,s*(p.depth+2)/l);var m=p.x0,y=p.y0,b=p.x1-n,E=p.y1-n;b<m&&(m=b=(m+b)/2),E<y&&(y=E=(y+E)/2),p.x0=m,p.y0=y,p.x1=b,p.y1=E}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var fY=D(9783);function hY(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function dY(){return this.eachAfter(hY)}var lR=D(64599);function pY(e,t){var n=-1,r=lR(this),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;e.call(t,a,++n,this)}}catch(s){r.e(s)}finally{r.f()}return this}function vY(e,t){for(var n=this,r=[n],i,a,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function mY(e,t){for(var n=this,r=[n],i=[],a,s,l,p=-1;n=r.pop();)if(i.push(n),a=n.children)for(s=0,l=a.length;s<l;++s)r.push(a[s]);for(;n=i.pop();)e.call(t,n,++p,this);return this}function gY(e,t){var n=-1,r=lR(this),i;try{for(r.s();!(i=r.n()).done;){var a=i.value;if(e.call(t,a,++n,this))return a}}catch(s){r.e(s)}finally{r.f()}}function yY(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function _Y(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function bY(e){for(var t=this,n=xY(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function xY(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function EY(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function SY(){return Array.from(this)}function wY(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function TY(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}var xD=D(15009),AY=xD().mark(ED);function ED(){var e,t,n,r,i,a;return xD().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=this,n=[e];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){l.next=8;break}return l.next=5,e;case 5:if(r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);l.next=2;break;case 8:if(n.length){l.next=1;break}case 9:case"end":return l.stop()}},AY,this)}function Cb(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=MY)):t===void 0&&(t=OY);for(var n=new Ob(e),r,i=[n],a,s,l,p;r=i.pop();)if((s=t(r.data))&&(p=(s=Array.from(s)).length))for(r.children=s,l=p-1;l>=0;--l)i.push(a=s[l]=new Ob(s[l])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(SD)}function CY(){return Cb(this).eachBefore(RY)}function OY(e){return e.children}function MY(e){return Array.isArray(e)?e[1]:null}function RY(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function SD(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ob(e){this.data=e,this.depth=this.height=0,this.parent=null}Ob.prototype=Cb.prototype=fY({constructor:Ob,count:dY,each:pY,eachAfter:mY,eachBefore:vY,find:gY,sum:yY,sort:_Y,path:bY,ancestors:EY,descendants:SY,leaves:wY,links:TY,copy:CY},Symbol.iterator,ED);var PY=function(e,t){if(!S_(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},IY=PY;function cR(e,t){for(var n in t)t.hasOwnProperty(n)&&n!=="constructor"&&t[n]!==void 0&&(e[n]=t[n])}function kY(e,t,n,r){return t&&cR(e,t),n&&cR(e,n),r&&cR(e,r),e}function fR(e){return(0,wa.Z)(e)?0:S_(e)?e.length:Object.keys(e).length}const LY={field:"value",size:[1,1],round:!1,padding:0,sort:(e,t)=>t.value-e.value,as:["x","y"],ignoreParentValue:!0},DY="nodeIndex",V2="childNodeCount",NY="nodeAncestor",hR="Invalid field: it must be a string!";function BY(e,t){const{field:n,fields:r}=e;if(Bu(n))return n;if(ai(n))return console.warn(hR),n[0];if(console.warn(`${hR} will try to get fields instead.`),Bu(r))return r;if(ai(r)&&r.length)return r[0];if(t)return t;throw new TypeError(hR)}function FY(e){const t=[];if(e&&e.each){let n,r;e.each(i=>{var a,s;i.parent!==n?(n=i.parent,r=0):r+=1;const l=IY((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(p=>t.find(m=>m.name===p.name)||p),({depth:p})=>p>0&&p<i.depth);i[NY]=l,i[V2]=((s=i.children)===null||s===void 0?void 0:s.length)||0,i[DY]=r,t.push(i)})}else e&&e.eachNode&&e.eachNode(n=>{t.push(n)});return t}function zY(e,t){t=kY({},LY,t);const n=t.as;if(!ai(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=BY(t)}catch(p){console.warn(p)}const a=(p=>cY().size(t.size).round(t.round).padding(t.padding)(Cb(p).sum(m=>fR(m.children)?t.ignoreParentValue?0:m[r]-Bk(m.children,(y,b)=>y+b[r],0):m[r]).sort(t.sort)))(e),s=n[0],l=n[1];return a.each(p=>{var m,y;p[s]=[p.x0,p.x1,p.x1,p.x0],p[l]=[p.y1,p.y1,p.y0,p.y0],p.name=p.name||((m=p.data)===null||m===void 0?void 0:m.name)||((y=p.data)===null||y===void 0?void 0:y.label),p.data.name=p.name,["x0","x1","y0","y1"].forEach(b=>{n.indexOf(b)===-1&&delete p[b]})}),FY(a)}var UY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Mb="sunburst",dR="markType",ave="value",wD="path",_T="ancestor-node";function jY(e){const{data:t,encode:n}=e,{color:r,value:i}=n,s=zY(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),l=[];return s.forEach(p=>{var m,y,b,E;if(p.depth===0)return null;let O=p.data.name;const P=[O];let I=Object.assign({},p);for(;I.depth>1;)O=`${(m=I.parent.data)===null||m===void 0?void 0:m.name} / ${O}`,P.unshift((y=I.parent.data)===null||y===void 0?void 0:y.name),I=I.parent;const N=Object.assign(Object.assign(Object.assign({},uR(p.data,[i])),{[wD]:O,[_T]:I.data.name}),p);r&&r!==_T&&(N[r]=p.data[r]||((E=(b=p.parent)===null||b===void 0?void 0:b.data)===null||E===void 0?void 0:E[r])),l.push(N)}),l.map(p=>Object.assign(Object.assign({},p),{x:p.x.slice(0,2),y:[p.y[2],p.y[0]],fillOpacity:Math.pow(.85,p.depth)}))}const TD={id:Mb,encode:{x:"x",y:"y",key:wD,color:_T,value:"value"},axis:{x:!1,y:!1},style:{[dR]:Mb,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[V2]:V2,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},AD=e=>{const{encode:t,data:n=[],legend:r}=e,i=UY(e,["encode","data","legend"]),a=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(ql(i,["coordinate","innerRadius"],.2),1e-5)}),s=Object.assign(Object.assign({},TD.encode),t),{value:l}=s,p=jY({encode:s,data:n});return[Pi({},TD,Object.assign(Object.assign({type:"rect",data:p,encode:s,tooltip:{title:"path",items:[m=>({name:l,value:m[l]})]}},i),{coordinate:a}))]};AD.props={};var ZY=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return SM(e,function(n,r){hh(e)&&r==="prototype"||t.push(r)}),t},pR=ZY,VY=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})};const HY=e=>e.querySelectorAll(".element").filter(t=>ql(t,["style",dR])===Mb);function WY(e){return Ho(e).select(`.${Dh}`).node()}const $Y={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function GY(e={}){const{breadCrumb:t={},fixedColor:n=!0}=e,r=Pi({},$Y,t);return i=>{const{update:a,setState:s,container:l,view:p,options:m}=i,y=WY(l),b=m.marks.find(({id:V})=>V===Mb),{state:E}=b,O=new Ao;y.appendChild(O);const P=(V,W)=>VY(this,void 0,void 0,function*(){if(O.removeChildren(),V){const K=new Hf({style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});O.appendChild(K);let J="";const oe=V==null?void 0:V.split(" / ");let Te=r.style.y,Re=O.getBBox().width;const We=y.getBBox().width,ut=oe.map((ct,Ft)=>{const ft=new Hf({style:Object.assign(Object.assign({x:Re,text:" / "},r.style),{y:Te})});O.appendChild(ft),Re+=ft.getBBox().width,J=`${J}${ct} / `;const St=new Hf({name:J.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:ct,x:Re,depth:Ft+1},r.style),{y:Te})});return O.appendChild(St),Re+=St.getBBox().width,Re>We&&(Te=O.getBBox().height,Re=0,ft.attr({x:Re,y:Te}),Re+=ft.getBBox().width,St.attr({x:Re,y:Te}),Re+=St.getBBox().width),St});[K,...ut].forEach((ct,Ft)=>{if(Ft===ut.length)return;const ft=Object.assign({},ct.attributes);ct.attr("cursor","pointer"),ct.addEventListener("mouseenter",()=>{ct.attr(r.active)}),ct.addEventListener("mouseleave",()=>{ct.attr(ft)}),ct.addEventListener("click",()=>{P(ct.name,ql(ct,["style","depth"]))})})}s("drillDown",K=>{const{marks:J}=K,oe=J.map(Te=>{if(Te.id!==Mb&&Te.type!=="rect")return Te;const{data:Re}=Te,We=Object.fromEntries(["color"].map(ct=>[ct,{domain:p.scale[ct].getOptions().domain}])),ut=Re.filter(ct=>{const Ft=ct.path;return n&&(ct[_T]=Ft.split(" / ")[W]),V?new RegExp(`^${V}.+`).test(Ft):!0});return Pi({},Te,n?{data:ut}:{data:ut,scale:We})});return Object.assign(Object.assign({},K),{marks:oe})}),yield a()}),I=V=>{const W=V.target;if(ql(W,["style",dR])!==Mb||ql(W,["markType"])!=="rect"||!ql(W,["style",V2]))return;const K=ql(W,["__data__","key"]),J=ql(W,["style","depth"]);W.style.cursor="pointer",P(K,J)};y.addEventListener("click",I);const N=pR(Object.assign(Object.assign({},E.active),E.inactive)),z=()=>{HY(y).forEach(W=>{const K=ql(W,["style",V2]);if(ql(W,["style","cursor"])!=="pointer"&&K){W.style.cursor="pointer";const oe=uR(W.attributes,N);W.addEventListener("mouseenter",()=>{W.attr(E.active)}),W.addEventListener("mouseleave",()=>{W.attr(Pi(oe,E.inactive))})}})};return y.addEventListener("mousemove",z),()=>{O.remove(),y.removeEventListener("click",I),y.removeEventListener("mousemove",z)}}}pi.enableCSSParsing=!1;function XY(){return{"interaction.drillDown":GY,"mark.sunburst":AD}}const CD=()=>[["cartesian"]];CD.props={};const vR=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];vR.props={transform:!0};const YY=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},OD=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=YY(e);return[...vR(),...w_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};OD.props={};const mR=()=>[["parallel",0,1,0,1]];mR.props={};const MD=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];MD.props={transform:!0};const RD=e=>{const{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...mR(),...w_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};RD.props={};const PD=({value:e})=>t=>t.map(()=>e);PD.props={};const ID=({value:e})=>t=>t.map(n=>n[e]);ID.props={};const kD=({value:e})=>t=>t.map(e);kD.props={};const LD=({value:e})=>()=>e;LD.props={};function Hl(e,t){if(e!==null)return{type:"column",value:e,field:t}}function bT(e,t){const n=Hl(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function xT(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function qY(e,t){const n=Hl(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function ly(e,t){const n=[];for(const r of e)n[r]=t;return n}function ou(e,t){const n=e[t];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function H2(e,...t){for(const n of t)if(typeof n=="string"){const[r,i]=ou(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function W2(e){return e instanceof Date?!1:typeof e=="object"}const $2=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,Pi({},t,{encode:{y1:bT(ly(e,0))}})]};$2.props={};const V_=()=>(e,t)=>{const{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,Pi({},t,{encode:{x:bT(ly(e,0))},scale:{x:{guide:null}}})]};V_.props={};const DD=Math.abs,wd=Math.atan2,H_=Math.cos,KY=Math.max,gR=Math.min,vm=Math.sin,Rb=Math.sqrt,Td=1e-12,G2=Math.PI,ET=G2/2,QY=2*G2;function JY(e){return e>1?0:e<-1?G2:Math.acos(e)}function ND(e){return e>=1?ET:e<=-1?-ET:Math.asin(e)}function eq(e){return e.innerRadius}function tq(e){return e.outerRadius}function nq(e){return e.startAngle}function rq(e){return e.endAngle}function iq(e){return e&&e.padAngle}function aq(e,t,n,r,i,a,s,l){var p=n-e,m=r-t,y=s-i,b=l-a,E=b*p-y*m;if(!(E*E<Td))return E=(y*(t-a)-b*(e-i))/E,[e+E*p,t+E*m]}function ST(e,t,n,r,i,a,s){var l=e-n,p=t-r,m=(s?a:-a)/Rb(l*l+p*p),y=m*p,b=-m*l,E=e+y,O=t+b,P=n+y,I=r+b,N=(E+P)/2,z=(O+I)/2,V=P-E,W=I-O,K=V*V+W*W,J=i-a,oe=E*I-P*O,Te=(W<0?-1:1)*Rb(KY(0,J*J*K-oe*oe)),Re=(oe*W-V*Te)/K,We=(-oe*V-W*Te)/K,ut=(oe*W+V*Te)/K,ct=(-oe*V+W*Te)/K,Ft=Re-N,ft=We-z,St=ut-N,Mt=ct-z;return Ft*Ft+ft*ft>St*St+Mt*Mt&&(Re=ut,We=ct),{cx:Re,cy:We,x01:-y,y01:-b,x11:Re*(i/J-1),y11:We*(i/J-1)}}function wT(){var e=eq,t=tq,n=Ql(0),r=null,i=nq,a=rq,s=iq,l=null,p=LM(m);function m(){var y,b,E=+e.apply(this,arguments),O=+t.apply(this,arguments),P=i.apply(this,arguments)-ET,I=a.apply(this,arguments)-ET,N=DD(I-P),z=I>P;if(l||(l=y=p()),O<E&&(b=O,O=E,E=b),!(O>Td))l.moveTo(0,0);else if(N>QY-Td)l.moveTo(O*H_(P),O*vm(P)),l.arc(0,0,O,P,I,!z),E>Td&&(l.moveTo(E*H_(I),E*vm(I)),l.arc(0,0,E,I,P,z));else{var V=P,W=I,K=P,J=I,oe=N,Te=N,Re=s.apply(this,arguments)/2,We=Re>Td&&(r?+r.apply(this,arguments):Rb(E*E+O*O)),ut=gR(DD(O-E)/2,+n.apply(this,arguments)),ct=ut,Ft=ut,ft,St;if(We>Td){var Mt=ND(We/E*vm(Re)),Nt=ND(We/O*vm(Re));(oe-=Mt*2)>Td?(Mt*=z?1:-1,K+=Mt,J-=Mt):(oe=0,K=J=(P+I)/2),(Te-=Nt*2)>Td?(Nt*=z?1:-1,V+=Nt,W-=Nt):(Te=0,V=W=(P+I)/2)}var tn=O*H_(V),Yt=O*vm(V),fn=E*H_(J),Hn=E*vm(J);if(ut>Td){var cr=O*H_(W),_r=O*vm(W),Mr=E*H_(K),fi=E*vm(K),Qi;if(N<G2)if(Qi=aq(tn,Yt,Mr,fi,cr,_r,fn,Hn)){var Ta=tn-Qi[0],Fi=Yt-Qi[1],Ci=cr-Qi[0],Ya=_r-Qi[1],Ga=1/vm(JY((Ta*Ci+Fi*Ya)/(Rb(Ta*Ta+Fi*Fi)*Rb(Ci*Ci+Ya*Ya)))/2),vo=Rb(Qi[0]*Qi[0]+Qi[1]*Qi[1]);ct=gR(ut,(E-vo)/(Ga-1)),Ft=gR(ut,(O-vo)/(Ga+1))}else ct=Ft=0}Te>Td?Ft>Td?(ft=ST(Mr,fi,tn,Yt,O,Ft,z),St=ST(cr,_r,fn,Hn,O,Ft,z),l.moveTo(ft.cx+ft.x01,ft.cy+ft.y01),Ft<ut?l.arc(ft.cx,ft.cy,Ft,wd(ft.y01,ft.x01),wd(St.y01,St.x01),!z):(l.arc(ft.cx,ft.cy,Ft,wd(ft.y01,ft.x01),wd(ft.y11,ft.x11),!z),l.arc(0,0,O,wd(ft.cy+ft.y11,ft.cx+ft.x11),wd(St.cy+St.y11,St.cx+St.x11),!z),l.arc(St.cx,St.cy,Ft,wd(St.y11,St.x11),wd(St.y01,St.x01),!z))):(l.moveTo(tn,Yt),l.arc(0,0,O,V,W,!z)):l.moveTo(tn,Yt),!(E>Td)||!(oe>Td)?l.lineTo(fn,Hn):ct>Td?(ft=ST(fn,Hn,cr,_r,E,-ct,z),St=ST(tn,Yt,Mr,fi,E,-ct,z),l.lineTo(ft.cx+ft.x01,ft.cy+ft.y01),ct<ut?l.arc(ft.cx,ft.cy,ct,wd(ft.y01,ft.x01),wd(St.y01,St.x01),!z):(l.arc(ft.cx,ft.cy,ct,wd(ft.y01,ft.x01),wd(ft.y11,ft.x11),!z),l.arc(0,0,E,wd(ft.cy+ft.y11,ft.cx+ft.x11),wd(St.cy+St.y11,St.cx+St.x11),z),l.arc(St.cx,St.cy,ct,wd(St.y11,St.x11),wd(St.y01,St.x01),!z))):l.arc(0,0,E,J,K,z)}if(l.closePath(),y)return l=null,y+""||null}return m.centroid=function(){var y=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,b=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-G2/2;return[H_(b)*y,vm(b)*y]},m.innerRadius=function(y){return arguments.length?(e=typeof y=="function"?y:Ql(+y),m):e},m.outerRadius=function(y){return arguments.length?(t=typeof y=="function"?y:Ql(+y),m):t},m.cornerRadius=function(y){return arguments.length?(n=typeof y=="function"?y:Ql(+y),m):n},m.padRadius=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Ql(+y),m):r},m.startAngle=function(y){return arguments.length?(i=typeof y=="function"?y:Ql(+y),m):i},m.endAngle=function(y){return arguments.length?(a=typeof y=="function"?y:Ql(+y),m):a},m.padAngle=function(y){return arguments.length?(s=typeof y=="function"?y:Ql(+y),m):s},m.context=function(y){return arguments.length?(l=y==null?null:y,m):l},m}var TT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function BD(e,t,n,r,i={}){const{inset:a=0,radius:s=0,insetLeft:l=a,insetTop:p=a,insetRight:m=a,insetBottom:y=a,radiusBottomLeft:b=s,radiusBottomRight:E=s,radiusTopLeft:O=s,radiusTopRight:P=s,minWidth:I=-1/0,maxWidth:N=1/0,minHeight:z=-1/0}=i,V=TT(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!fl(r)&&!O_(r)){const Re=!!Ol(r),[We,,ut]=Re?tT(t):t,[ct,Ft]=We,[ft,St]=$c(ut,We),Mt=ft>0?ct:ct+ft,Nt=St>0?Ft:Ft+St,tn=Math.abs(ft),Yt=Math.abs(St),fn=Mt+l,Hn=Nt+p,cr=tn-(l+m),_r=Yt-(p+y),Mr=Re?T_(cr,z,1/0):T_(cr,I,N),fi=Re?T_(_r,I,N):T_(_r,z,1/0),Qi=Re?fn:fn-(Mr-cr)/2,Ta=Re?Hn-(fi-_r)/2:Hn-(fi-_r);return Ho(e.createElement("rect",{})).style("x",Qi).style("y",Ta).style("width",Mr).style("height",fi).style("radius",[O,P,E,b]).call(Po,V).node()}const{y:W,y1:K}=n,J=r.getCenter(),oe=N_(r,t,[W,K]),Te=wT().cornerRadius(s).padAngle(a*Math.PI/180);return Ho(e.createElement("path",{})).style("path",Te(oe)).style("transform",`translate(${J[0]}, ${J[1]})`).style("radius",s).style("inset",a).call(Po,V).node()}const X2=(e,t)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:a=!0}=e,s=TT(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:l,document:p}=t;return(m,y,b)=>{const{color:E,radius:O=0}=b,P=TT(b,["color","radius"]),I=P.lineWidth||1,{stroke:N,radius:z=O,radiusTopLeft:V=z,radiusTopRight:W=z,radiusBottomRight:K=z,radiusBottomLeft:J=z,innerRadius:oe=0,innerRadiusTopLeft:Te=oe,innerRadiusTopRight:Re=oe,innerRadiusBottomRight:We=oe,innerRadiusBottomLeft:ut=oe,lineWidth:ct=n==="stroke"||N?I:0,inset:Ft=0,insetLeft:ft=Ft,insetRight:St=Ft,insetBottom:Mt=Ft,insetTop:Nt=Ft,minWidth:tn,maxWidth:Yt,minHeight:fn}=s,Hn=TT(s,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:cr=E,opacity:_r}=y,Mr=[i?V:Te,i?W:Re,a?K:We,a?J:ut],fi=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Ol(l)&&fi.push(fi.shift());const Qi=Object.assign(Object.assign({radius:z},Object.fromEntries(fi.map((Ta,Fi)=>[Ta,Mr[Fi]]))),{inset:Ft,insetLeft:ft,insetRight:St,insetBottom:Mt,insetTop:Nt,minWidth:tn,maxWidth:Yt,minHeight:fn});return Ho(BD(p,m,y,l,Qi)).call(Po,P).style("fill","transparent").style(n,cr).style(y4(e),_r).style("lineWidth",ct).style("stroke",N===void 0?cr:N).call(Po,Hn).node()}};X2.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const W_=(e,t)=>X2(Object.assign({colorAttribute:"fill"},e),t);W_.props=Object.assign(Object.assign({},X2.props),{defaultMarker:"square"});const AT=(e,t)=>X2(Object.assign({colorAttribute:"stroke"},e),t);AT.props=Object.assign(Object.assign({},X2.props),{defaultMarker:"hollowSquare"});function Pb(){}function FD(e){this._context=e}FD.prototype={areaStart:Pb,areaEnd:Pb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yR(e){return new FD(e)}var zD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oq(e,t,n){const[r,i,a,s]=e;if(Ol(n)){const m=[t?t[0][0]:i[0],i[1]],y=[t?t[3][0]:a[0],a[1]];return[r,m,y,s]}const l=[i[0],t?t[0][1]:i[1]],p=[a[0],t?t[3][1]:a[1]];return[r,l,p,s]}const _R=(e,t)=>{const{adjustPoints:n=oq}=e,r=zD(e,["adjustPoints"]),{coordinate:i,document:a}=t;return(s,l,p,m)=>{const{index:y}=l,{color:b}=p,E=zD(p,["color"]),O=m[y+1],P=n(s,O,i),I=!!Ol(i),[N,z,V,W]=I?tT(P):P,{color:K=b,opacity:J}=l,oe=oy().curve(yR)([N,z,V,W]);return Ho(a.createElement("path",{})).call(Po,E).style("path",oe).style("fill",K).style("fillOpacity",J).call(Po,r).node()}};_R.props={defaultMarker:"square"};function sq(e,t,n){const[r,i,a,s]=e;if(Ol(n)){const m=[t?t[0][0]:(i[0]+a[0])/2,i[1]],y=[t?t[3][0]:(i[0]+a[0])/2,a[1]];return[r,m,y,s]}const l=[i[0],t?t[0][1]:(i[1]+a[1])/2],p=[a[0],t?t[3][1]:(i[1]+a[1])/2];return[r,l,p,s]}const UD=(e,t)=>_R(Object.assign({adjustPoints:sq},e),t);UD.props={defaultMarker:"square"};function Y2(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function uq(e){const t=e.getFullYear(),n=Y2(e.getMonth()+1),r=Y2(e.getDate()),i=`${t}-${n}-${r}`,a=e.getHours(),s=e.getMinutes(),l=e.getSeconds();return a||s||l?`${i} ${Y2(a)}:${Y2(s)}:${Y2(l)}`:i}const CT=(e={})=>{const{channel:t="x"}=e;return(n,r)=>{const{encode:i}=r,{tooltip:a}=r;if(S0(a))return[n,r];const{title:s}=a;if(s!==void 0)return[n,r];const l=Object.keys(i).filter(m=>m.startsWith(t)).filter(m=>!i[m].inferred).map(m=>ou(i,m)).filter(([m])=>m).map(m=>m[0]);if(l.length===0)return[n,r];const p=[];for(const m of n)p[m]={value:l.map(y=>y[m]instanceof Date?uq(y[m]):y[m]).join(", ")};return[n,Pi({},r,{tooltip:{title:p}})]}};CT.props={};const OT=e=>{const{channel:t}=e;return(n,r)=>{const{encode:i,tooltip:a}=r;if(S0(a))return[n,r];const{items:s=[]}=a;if(!s||s.length>0)return[n,r];const p=(Array.isArray(t)?t:[t]).flatMap(m=>Object.keys(i).filter(y=>y.startsWith(m)).map(y=>{const{field:b,value:E,inferred:O=!1,aggregate:P}=i[y];return O?null:P&&E?{channel:y}:b?{field:b}:E?{channel:y}:null}).filter(y=>y!==null));return[n,Pi({},r,{tooltip:{items:p}})]}};OT.props={};var lq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jD=()=>(e,t)=>{const{encode:n}=t,{key:r}=n,i=lq(n,["key"]);if(r!==void 0)return[e,t];const a=Object.values(i).map(({value:l})=>l),s=e.map(l=>a.filter(Array.isArray).map(p=>p[l]).join("-"));return[e,Pi({},t,{encode:{key:Hl(s)}})]};jD.props={};function ZD(e={}){const{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function tp(e={}){return[...ZD(e),{name:"title",scale:"identity"}]}function ove(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function cy(){return[{type:CT,channel:"color"},{type:OT,channel:["x","y"]}]}function Ib(){return[{type:CT,channel:"x"},{type:OT,channel:["y"]}]}function cq(){return[{type:CT,channel:"color"},{type:OT,channel:["position"]}]}function kb(e={}){return ZD(e)}function of(){return[{type:jD}]}function Of(){return[]}function bR(e,t){return e.getBandWidth(e.invert(t))}function $_(e,t,n={}){const{x:r,y:i,series:a}=t,{x:s,y:l,series:p}=e,{style:{bandOffset:m=p?0:.5,bandOffsetX:y=m,bandOffsetY:b=m}={}}=n,E=!!(s!=null&&s.getBandWidth),O=!!(l!=null&&l.getBandWidth),P=!!(p!=null&&p.getBandWidth);return!E&&!O?I=>I:(I,N)=>{const z=E?bR(s,r[N]):0,V=O?bR(l,i[N]):0,K=P&&a?(()=>(bR(p,a[N])/2+ +a[N])*z)():0,[J,oe]=I;return[J+y*z+K,oe+b*V]}}function MT(e){return parseFloat(e)/100}function xR(e,t,n,r){const{x:i,y:a}=n,{innerWidth:s,innerHeight:l}=r.getOptions(),p=Array.from(e,m=>{const y=i[m],b=a[m],E=typeof y=="string"?MT(y)*s:+y,O=typeof b=="string"?MT(b)*l:+b;return[[E,O]]});return[e,p]}function mm(e){return typeof e=="function"?e:t=>t[e]}function ER(e,t){return Array.from(e,mm(t))}function SR(e,t){const{source:n=y=>y.source,target:r=y=>y.target,value:i=y=>y.value}=t,{links:a,nodes:s}=e,l=ER(a,n),p=ER(a,r),m=ER(a,i);return{links:a.map((y,b)=>({target:p[b],source:l[b],value:m[b]})),nodes:s||Array.from(new Set([...l,...p]),y=>({key:y}))}}function VD(e,t){return e.getBandWidth(e.invert(t))}const HD={rect:W_,hollow:AT,funnel:_R,pyramid:UD},WD=()=>(e,t,n,r)=>{const{x:i,y:a,y1:s,series:l,size:p}=n,m=t.x,y=t.series,[b]=r.getSize(),E=p?p.map(I=>+I/b):null,O=p?(I,N,z)=>{const V=I+N/2,W=E[z];return[V-W/2,V+W/2]}:(I,N,z)=>[I,I+N],P=Array.from(e,I=>{const N=VD(m,i[I]),z=y?VD(y,l==null?void 0:l[I]):1,V=N*z,W=(+(l==null?void 0:l[I])||0)*N,K=+i[I]+W,[J,oe]=O(K,V,I),Te=+a[I],Re=+s[I];return[[J,Te],[oe,Te],[oe,Re],[J,Re]].map(ft=>r.map(ft))});return[e,P]};WD.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:HD,channels:[...tp({shapes:Object.keys(HD)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...of(),{type:$2},{type:V_}],postInference:[...Of(),...Ib()],interaction:{shareTooltip:!0}};const $D={rect:W_,hollow:AT},GD=()=>(e,t,n,r)=>{const{x:i,x1:a,y:s,y1:l}=n,p=Array.from(e,m=>{const y=[+i[m],+s[m]],b=[+a[m],+s[m]],E=[+a[m],+l[m]],O=[+i[m],+l[m]];return[y,b,E,O].map(P=>r.map(P))});return[e,p]};GD.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:$D,channels:[...tp({shapes:Object.keys($D)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...of(),{type:$2}],postInference:[...Of(),...Ib()],interaction:{shareTooltip:!0}};var XD=wR(N2);function YD(e){this._curve=e}YD.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function wR(e){function t(n){return new YD(e(n))}return t._curve=e,t}function q2(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(wR(n)):t()._curve},e}function fq(){return q2(oy().curve(XD))}var qD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hq=yb(e=>{const{d1:t,d2:n,style1:r,style2:i}=e.attributes,a=e.ownerDocument;Ho(e).maybeAppend("line",()=>a.createElement("path",{})).style("d",t).call(Po,r),Ho(e).maybeAppend("line1",()=>a.createElement("path",{})).style("d",n).call(Po,i)});function dq(e,t){const n=[],r=[];let i=!1,a=null;for(const s of e)!t(s[0])||!t(s[1])?i=!0:(n.push(s),i&&(i=!1,r.push([a,s])),a=s);return[n,r]}const Wv=(e,t)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:a=y=>!Number.isNaN(y)&&y!==void 0&&y!==null,connect:s=!1}=e,l=qD(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:p,document:m}=t;return(y,b,E)=>{const{color:O,lineWidth:P}=E,I=qD(E,["color","lineWidth"]),{color:N=O,size:z=P,seriesColor:V,seriesX:W,seriesY:K}=b,J=_4(p,b),oe=Ol(p),Te=r&&V?g4(V,W,K,r,i,oe):N,Re=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I),Te&&{stroke:Te}),z&&{lineWidth:z}),J&&{transform:J}),l);let We;if(fl(p)){const Mt=p.getCenter();We=Nt=>fq().angle((tn,Yt)=>gb($c(Nt[Yt],Mt))).radius((tn,Yt)=>dc(Nt[Yt],Mt)).defined(([tn,Yt])=>a(tn)&&a(Yt)).curve(n)(Nt)}else We=oy().x(Mt=>Mt[0]).y(Mt=>Mt[1]).defined(([Mt,Nt])=>a(Mt)&&a(Nt)).curve(n);const[ut,ct]=dq(y,a),Ft=ja(Re,"connect"),ft=!!ct.length;if(!ft||s&&!Object.keys(Ft).length)return Ho(m.createElement("path",{})).style("d",We(ut)||[]).call(Po,Re).node();if(ft&&!s)return Ho(m.createElement("path",{})).style("d",We(y)).call(Po,Re).node();const St=Mt=>Mt.map(We).join(",");return Ho(new hq).style("style1",Object.assign(Object.assign({},Re),Ft)).style("style2",Re).style("d1",St(ct)).style("d2",We(y)).node()}};Wv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const KD=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=fl(n)?yR:N2;return Wv(Object.assign({curve:i},e),t)(...r)}};KD.props=Object.assign(Object.assign({},Wv.props),{defaultMarker:"line"});function TR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function AR(e,t){this._context=e,this._k=(1-t)/6}AR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:TR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:TR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sve=function e(t){function n(r){return new AR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CR(e,t){this._context=e,this._k=(1-t)/6}CR.prototype={areaStart:Pb,areaEnd:Pb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:TR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var uve=function e(t){function n(r){return new CR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function QD(e,t,n){var r=e._x1,i=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Td){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,p=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/p,i=(i*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/p}if(e._l23_a>Td){var m=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,y=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*m+e._x1*e._l23_2a-t*e._l12_2a)/y,s=(s*m+e._y1*e._l23_2a-n*e._l12_2a)/y}e._context.bezierCurveTo(r,i,a,s,e._x2,e._y2)}function JD(e,t){this._context=e,this._alpha=t}JD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:QD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lve=function e(t){function n(r){return t?new JD(r,t):new AR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function e6(e,t){this._context=e,this._alpha=t}e6.prototype={areaStart:Pb,areaEnd:Pb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:QD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var t6=function e(t){function n(r){return t?new e6(r,t):new CR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function n6(e){return e<0?-1:1}function r6(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(n6(a)+n6(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function i6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function OR(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,s-l*n,a,s)}function RT(e){this._context=e}RT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:OR(this,this._t0,i6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,OR(this,i6(this,n=r6(this,e,t)),n);break;default:OR(this,this._t0,n=r6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function a6(e){this._context=new o6(e)}(a6.prototype=Object.create(RT.prototype)).point=function(e,t){RT.prototype.point.call(this,t,e)};function o6(e){this._context=e}o6.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function s6(e){return new RT(e)}function u6(e){return new a6(e)}var pq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const l6=(e,t)=>{const n=pq(e,[]),{coordinate:r}=t;return(...i)=>{const a=fl(r)?t6:Ol(r)?u6:s6;return Wv(Object.assign({curve:a},n),t)(...i)}};l6.props=Object.assign(Object.assign({},Wv.props),{defaultMarker:"smooth"});function PT(e,t){this._context=e,this._t=t}PT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function c6(e){return new PT(e,.5)}function f6(e){return new PT(e,0)}function h6(e){return new PT(e,1)}const d6=(e,t)=>Wv(Object.assign({curve:h6},e),t);d6.props=Object.assign(Object.assign({},Wv.props),{defaultMarker:"hv"});const p6=(e,t)=>Wv(Object.assign({curve:f6},e),t);p6.props=Object.assign(Object.assign({},Wv.props),{defaultMarker:"vh"});const v6=(e,t)=>Wv(Object.assign({curve:c6},e),t);v6.props=Object.assign(Object.assign({},Wv.props),{defaultMarker:"hvh"});var vq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mq(e,t,n,r,i){const a=$c(n,t),s=Vv(a),l=s+Math.PI/2,p=[r/2*Math.cos(l),r/2*Math.sin(l)],m=[i/2*Math.cos(l),i/2*Math.sin(l)],y=[i/2*Math.cos(s),i/2*Math.sin(s)],b=[r/2*Math.cos(s),r/2*Math.sin(s)],E=eT(t,p),O=eT(n,m),P=eT(O,y),I=eT(n,y),N=$c(I,m),z=$c(n,m),V=$c(t,p),W=$c(V,b),K=$c(t,b),J=$c(E,b);e.moveTo(...E),e.lineTo(...O),e.arcTo(...P,...I,i/2),e.arcTo(...N,...z,i/2),e.lineTo(...V),e.arcTo(...W,...K,r/2),e.arcTo(...J,...E,r/2),e.closePath()}const m6=(e,t)=>{const{document:n}=t;return(r,i,a)=>{const{seriesSize:s,color:l}=i,{color:p}=a,m=vq(a,["color"]),y=Hv();for(let b=0;b<r.length-1;b++){const E=r[b],O=r[b+1],P=s[b],I=s[b+1];[...E,...O].every(cl)&&mq(y,E,O,P,I)}return Ho(n.createElement("path",{})).call(Po,m).style("fill",l||p).style("d",y.toString()).call(Po,e).node()}};m6.props=Object.assign(Object.assign({},Wv.props),{defaultMarker:"line"});const g6=()=>(e,t)=>{const{style:n={},encode:r}=t,{series:i}=r,{gradient:a}=n;return!a||i?[e,t]:[e,Pi({},t,{encode:{series:xT(ly(e,void 0))}})]};g6.props={};const MR=()=>(e,t)=>{const{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];const[a,s]=ou(n,"color");return[e,Pi({},t,{encode:{series:Hl(a,s)}})]};MR.props={};const y6={line:KD,smooth:l6,hv:d6,vh:p6,hvh:v6,trail:m6},gq=(e,t,n,r)=>{var i,a;const{series:s,x:l,y:p}=n,{x:m,y}=t;if(l===void 0||p===void 0)throw new Error("Missing encode for x or y channel.");const b=s?Array.from(Zl(e,N=>s[N]).values()):[e],E=b.map(N=>N[0]).filter(N=>N!==void 0),O=(((i=m==null?void 0:m.getBandWidth)===null||i===void 0?void 0:i.call(m))||0)/2,P=(((a=y==null?void 0:y.getBandWidth)===null||a===void 0?void 0:a.call(y))||0)/2,I=Array.from(b,N=>N.map(z=>r.map([+l[z]+O,+p[z]+P])));return[E,I,b]},yq=(e,t,n,r)=>{const i=Object.entries(n).filter(([s])=>s.startsWith("position")).map(([,s])=>s);if(i.length===0)throw new Error("Missing encode for position channel.");const a=Array.from(e,s=>{const l=i.map(y=>+y[s]),p=r.map(l),m=[];for(let y=0;y<p.length;y+=2)m.push([p[y],p[y+1]]);return m});return[e,a]},_6=()=>(e,t,n,r)=>(M_(r)?yq:gq)(e,t,n,r);_6.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:y6,channels:[...tp({shapes:Object.keys(y6)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...of(),{type:g6},{type:MR}],postInference:[...Of(),...Ib(),...cq()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var _q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const RR=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];RR.style=["fill"];const b6=RR.bind(void 0);b6.style=["stroke","lineWidth"];const IT=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];IT.style=["fill"];const x6=IT.bind(void 0);x6.style=["fill"];const E6=IT.bind(void 0);E6.style=["stroke","lineWidth"];const PR=(e,t,n)=>{const r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};PR.style=["fill"];const S6=PR.bind(void 0);S6.style=["stroke","lineWidth"];const IR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};IR.style=["fill"];const w6=IR.bind(void 0);w6.style=["stroke","lineWidth"];const kR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};kR.style=["fill"];const T6=kR.bind(void 0);T6.style=["stroke","lineWidth"];const LR=(e,t,n)=>{const r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};LR.style=["fill"];const A6=LR.bind(void 0);A6.style=["stroke","lineWidth"];const DR=(e,t,n)=>{const r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};DR.style=["fill"];const C6=DR.bind(void 0);C6.style=["stroke","lineWidth"];const O6=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];O6.style=["stroke","lineWidth"];const M6=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];M6.style=["stroke","lineWidth"];const R6=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];R6.style=["stroke","lineWidth"];const P6=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];P6.style=["stroke","lineWidth"];const I6=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];I6.style=["stroke","lineWidth"];const NR=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];NR.style=["stroke","lineWidth"];const k6=NR.bind(void 0);k6.style=["stroke","lineWidth"];const L6=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];L6.style=["stroke","lineWidth"];const D6=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];D6.style=["stroke","lineWidth"];const N6=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];N6.style=["stroke","lineWidth"];const B6=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];B6.style=["stroke","lineWidth"];const F6=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];F6.style=["stroke","lineWidth"];const Lb=new Map([["bowtie",DR],["cross",M6],["dash",k6],["diamond",PR],["dot",NR],["hexagon",LR],["hollowBowtie",C6],["hollowDiamond",S6],["hollowHexagon",A6],["hollowPoint",b6],["hollowSquare",E6],["hollowTriangle",w6],["hollowTriangleDown",T6],["hv",D6],["hvh",B6],["hyphen",I6],["line",O6],["plus",P6],["point",RR],["rect",x6],["smooth",L6],["square",IT],["tick",R6],["triangleDown",kR],["triangle",IR],["vh",N6],["vhv",F6]]);function bq(e,t){var{d:n,fill:r,strokeWidth:i,path:a,stroke:s,lineWidth:l,color:p}=t,m=_q(t,["d","fill","strokeWidth","path","stroke","lineWidth","color"]);const y=Lb.get(e)||Lb.get("point");return(...b)=>new pu({style:Object.assign(Object.assign({},m),{path:y(...b),stroke:y.style.includes("stroke")?p||s:"",fill:y.style.includes("fill")?p||r:"",lineWidth:y.style.includes("lineWidth")?l||l||2:0})})}function cve(e,t){Lb.set(e,t)}function fve(e){Lb.delete(e)}var xq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Eq(e,t,n,r){if(t.length===1)return;const{size:i}=n;if(e==="fixed")return i;if(e==="normal"||Pw(r)){const[[a,s],[l,p]]=t,m=Math.abs((l-a)/2),y=Math.abs((p-s)/2);return Math.max(0,(m+y)/2)}return i}const Qs=(e,t)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=e,a=xq(e,["colorAttribute","symbol","mode"]),s=Lb.get(r)||Lb.get("point"),{coordinate:l,document:p}=t;return(m,y,b)=>{const{lineWidth:E,color:O}=b,P=a.stroke?E||1:E,{color:I=O,transform:N,opacity:z}=y,[V,W]=b4(m),J=Eq(i,m,y,l)||a.r||b.r;return Ho(p.createElement("path",{})).call(Po,b).style("fill","transparent").style("d",s(V,W,J)).style("lineWidth",P).style("transform",N).style("stroke",I).style(y4(e),z).style(n,I).call(Po,a).node()}};Qs.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const z6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);z6.props=Object.assign({defaultMarker:"hollowPoint"},Qs.props);const U6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);U6.props=Object.assign({defaultMarker:"hollowDiamond"},Qs.props);const j6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);j6.props=Object.assign({defaultMarker:"hollowHexagon"},Qs.props);const Z6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);Z6.props=Object.assign({defaultMarker:"hollowSquare"},Qs.props);const V6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);V6.props=Object.assign({defaultMarker:"hollowTriangleDown"},Qs.props);const H6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);H6.props=Object.assign({defaultMarker:"hollowTriangle"},Qs.props);const W6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);W6.props=Object.assign({defaultMarker:"hollowBowtie"},Qs.props);const $6=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);$6.props=Object.assign({defaultMarker:"point"},Qs.props);const G6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);G6.props=Object.assign({defaultMarker:"plus"},Qs.props);const X6=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);X6.props=Object.assign({defaultMarker:"diamond"},Qs.props);const Y6=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);Y6.props=Object.assign({defaultMarker:"square"},Qs.props);const q6=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);q6.props=Object.assign({defaultMarker:"triangle"},Qs.props);const K6=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);K6.props=Object.assign({defaultMarker:"hexagon"},Qs.props);const Q6=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);Q6.props=Object.assign({defaultMarker:"cross"},Qs.props);const J6=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);J6.props=Object.assign({defaultMarker:"bowtie"},Qs.props);const eN=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);eN.props=Object.assign({defaultMarker:"hyphen"},Qs.props);const tN=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);tN.props=Object.assign({defaultMarker:"line"},Qs.props);const nN=(e,t)=>Qs(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);nN.props=Object.assign({defaultMarker:"tick"},Qs.props);const rN=(e,t)=>Qs(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);rN.props=Object.assign({defaultMarker:"triangleDown"},Qs.props);const kT=()=>(e,t)=>{const{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,Pi({},t,{encode:{y:bT(ly(e,0))},scale:{y:{guide:null}}})]};kT.props={};const iN=()=>(e,t)=>{const{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,Pi({},t,{encode:{size:xT(ly(e,3))}})]};iN.props={};const aN={hollow:z6,hollowDiamond:U6,hollowHexagon:j6,hollowSquare:Z6,hollowTriangleDown:V6,hollowTriangle:H6,hollowBowtie:W6,point:$6,plus:G6,diamond:X6,square:Y6,triangle:q6,hexagon:K6,cross:Q6,bowtie:J6,hyphen:eN,line:tN,tick:nN,triangleDown:rN},oN=e=>(t,n,r,i)=>{const{x:a,y:s,x1:l,y1:p,size:m,dx:y,dy:b}=r,[E,O]=i.getSize(),P=$_(n,r,e),I=z=>{const V=+((y==null?void 0:y[z])||0),W=+((b==null?void 0:b[z])||0),K=l?(+a[z]+ +l[z])/2:+a[z],J=p?(+s[z]+ +p[z])/2:+s[z],oe=K+V,Te=J+W;return[oe,Te]},N=m?Array.from(t,z=>{const[V,W]=I(z),K=+m[z],J=K/E,oe=K/O,Te=[V-J,W-oe],Re=[V+J,W+oe];return[i.map(P(Te,z)),i.map(P(Re,z))]}):Array.from(t,z=>[i.map(P(I(z),z))]);return[t,N]};oN.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:aN,channels:[...tp({shapes:Object.keys(aN)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...of(),{type:V_},{type:kT}],postInference:[...Of(),{type:iN},...cy()]};const sN=(e,t)=>{const{coordinate:n}=t;return(r,i,a)=>{const{color:s,text:l="",fontSize:p,rotate:m=0,transform:y=""}=i,b={text:String(l),stroke:s,fill:s,fontSize:p},[[E,O]]=r;return Ho(new C4).style("x",E).style("y",O).call(Po,a).style("transform",`${y}rotate(${+m})`).style("coordCenter",n.getCenter()).call(Po,b).call(Po,e).node()}};sN.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var BR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Sq(e){const t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[a,s]=[0,0],[l,p]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,l,p],["L",a,s],["Z"]]}function wq(e){const{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}const Tq=yb(e=>{const t=e.attributes,{class:n,x:r,y:i}=t,a=BR(t,["class","x","y"]),s=ja(a,"marker"),{size:l=24}=s,p=()=>Sq(l/2),m=Ho(e).maybeAppend("marker",()=>new yl({})).call(E=>E.node().update(Object.assign({symbol:p},s))).node(),[y,b]=wq(m);Ho(e).maybeAppend("text","text").style("x",y).style("y",b).call(Po,a)}),uN=(e,t)=>{const n=BR(e,[]);return(r,i,a)=>{const{color:s}=a,l=BR(a,["color"]),{color:p=s,text:m=""}=i,y={text:String(m),stroke:p,fill:p},[[b,E]]=r;return Ho(new Tq).call(Po,l).style("x",b).style("y",E).call(Po,y).call(Po,n).node()}};uN.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const LT=()=>(e,t)=>{const{data:n}=t;if(!Array.isArray(n)||n.some(W2))return[e,t];const r=Array.isArray(n[0])?n:[n],i=r.map(s=>s[0]),a=r.map(s=>s[1]);return[e,Pi({},t,{encode:{x:Hl(i),y:Hl(a)}})]};LT.props={};var lN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const DT=()=>(e,t)=>{const{data:n,style:r={}}=t,i=lN(t,["data","style"]),{x:a,y:s}=r,l=lN(r,["x","y"]);if(a==null||s==null)return[e,t];const p=a||0,m=s||0;return[[0],Pi({},i,{data:[0],cartesian:!0,encode:{x:Hl([p]),y:Hl([m])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:l})]};DT.props={};const cN={text:sN,badge:uN},fN=e=>{const{cartesian:t=!1}=e;return t?xR:(n,r,i,a)=>{const{x:s,y:l}=i,p=$_(r,i,e),m=Array.from(n,y=>{const b=[+s[y],+l[y]];return[a.map(p(b,y))]});return[n,m]}};fN.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:cN,channels:[...tp({shapes:Object.keys(cN)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize"},{name:"rotate"}],preInference:[...of(),{type:LT},{type:DT}],postInference:[...Of(),...cy()]};const FR=()=>(e,t)=>[e,Pi({scale:{x:{padding:0},y:{padding:0}}},t)];FR.props={};const hN={cell:W_,hollow:AT},dN=()=>(e,t,n,r)=>{const{x:i,y:a}=n,s=t.x,l=t.y,p=Array.from(e,m=>{const y=s.getBandWidth(s.invert(+i[m])),b=l.getBandWidth(l.invert(+a[m])),E=+i[m],O=+a[m],P=[E,O],I=[E+y,O],N=[E+y,O+b],z=[E,O+b];return[P,I,N,z].map(V=>r.map(V))});return[e,p]};dN.props={defaultShape:"cell",defaultLabelShape:"label",shape:hN,composite:!1,channels:[...tp({shapes:Object.keys(hN)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...of(),{type:V_},{type:kT},{type:FR}],postInference:[...Of(),...cy()]};function zR(e,t,n){var r=null,i=Ql(!0),a=null,s=N2,l=null,p=LM(m);e=typeof e=="function"?e:e===void 0?T4:Ql(+e),t=typeof t=="function"?t:Ql(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?A4:Ql(+n);function m(b){var E,O,P,I=(b=E4(b)).length,N,z=!1,V,W=new Array(I),K=new Array(I);for(a==null&&(l=s(V=p())),E=0;E<=I;++E){if(!(E<I&&i(N=b[E],E,b))===z)if(z=!z)O=E,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),P=E-1;P>=O;--P)l.point(W[P],K[P]);l.lineEnd(),l.areaEnd()}z&&(W[E]=+e(N,E,b),K[E]=+t(N,E,b),l.point(r?+r(N,E,b):W[E],n?+n(N,E,b):K[E]))}if(V)return l=null,V+""||null}function y(){return oy().defined(i).curve(s).context(a)}return m.x=function(b){return arguments.length?(e=typeof b=="function"?b:Ql(+b),r=null,m):e},m.x0=function(b){return arguments.length?(e=typeof b=="function"?b:Ql(+b),m):e},m.x1=function(b){return arguments.length?(r=b==null?null:typeof b=="function"?b:Ql(+b),m):r},m.y=function(b){return arguments.length?(t=typeof b=="function"?b:Ql(+b),n=null,m):t},m.y0=function(b){return arguments.length?(t=typeof b=="function"?b:Ql(+b),m):t},m.y1=function(b){return arguments.length?(n=b==null?null:typeof b=="function"?b:Ql(+b),m):n},m.lineX0=m.lineY0=function(){return y().x(e).y(t)},m.lineY1=function(){return y().x(e).y(n)},m.lineX1=function(){return y().x(r).y(t)},m.defined=function(b){return arguments.length?(i=typeof b=="function"?b:Ql(!!b),m):i},m.curve=function(b){return arguments.length?(s=b,a!=null&&(l=s(a)),m):s},m.context=function(b){return arguments.length?(b==null?a=l=null:l=s(a=b),m):a},m}function Aq(){var e=zR().curve(XD),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return q2(n())},delete e.lineX0,e.lineEndAngle=function(){return q2(r())},delete e.lineX1,e.lineInnerRadius=function(){return q2(i())},delete e.lineY0,e.lineOuterRadius=function(){return q2(a())},delete e.lineY1,e.curve=function(s){return arguments.length?t(wR(s)):t()._curve},e}var Cq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Oq(e,t){const n=[],r=[],i=[];let a=!1,s=null;const l=e.length/2;for(let p=0;p<l;p++){const m=e[p],y=e[p+l];if([...m,...y].some(b=>!t(b)))a=!0;else{if(n.push(m),r.push(y),a&&s){a=!1;const[b,E]=s;i.push([b,m,E,y])}s=[m,y]}}return[n.concat(r),i]}const pN=yb(e=>{const{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,a=e.ownerDocument;Ho(e).maybeAppend("connect-path",()=>a.createElement("path",{})).style("d",n).call(Po,i),Ho(e).maybeAppend("area-path",()=>a.createElement("path",{})).style("d",t).call(Po,r)}),M0=(e,t)=>{const{curve:n,gradient:r=!1,defined:i=m=>!Number.isNaN(m)&&m!==void 0&&m!==null,connect:a=!1}=e,s=Cq(e,["curve","gradient","defined","connect"]),{coordinate:l,document:p}=t;return(m,y,b)=>{const{color:E}=b,{color:O=E,seriesColor:P,seriesX:I,seriesY:N}=y,z=Ol(l),V=_4(l,y),W=r&&P?g4(P,I,N,r,void 0,z):O,K=Object.assign(Object.assign(Object.assign(Object.assign({},b),{stroke:W,fill:W}),V&&{transform:V}),s),[J,oe]=Oq(m,i),Te=ja(K,"connect"),Re=!!oe.length,We=ut=>Ho(p.createElement("path",{})).style("d",ut||"").call(Po,K).node();if(fl(l)){const ut=ct=>{const Ft=l.getCenter(),ft=ct.slice(0,ct.length/2),St=ct.slice(ct.length/2);return Aq().angle((Mt,Nt)=>gb($c(ft[Nt],Ft))).outerRadius((Mt,Nt)=>dc(ft[Nt],Ft)).innerRadius((Mt,Nt)=>dc(St[Nt],Ft)).defined((Mt,Nt)=>[...ft[Nt],...St[Nt]].every(i)).curve(n)(St)};return!Re||a&&!Object.keys(Te).length?We(ut(J)):Re&&!a?We(ut(m)):Ho(new pN).style("areaStyle",K).style("connectStyle",Object.assign(Object.assign({},Te),s)).style("areaPath",ut(m)).style("connectPath",oe.map(ut).join("")).node()}else{const ut=ct=>{const Ft=ct.slice(0,ct.length/2),ft=ct.slice(ct.length/2);return z?zR().y((St,Mt)=>Ft[Mt][1]).x1((St,Mt)=>Ft[Mt][0]).x0((St,Mt)=>ft[Mt][0]).defined((St,Mt)=>[...Ft[Mt],...ft[Mt]].every(i)).curve(n)(Ft):zR().x((St,Mt)=>Ft[Mt][0]).y1((St,Mt)=>Ft[Mt][1]).y0((St,Mt)=>ft[Mt][1]).defined((St,Mt)=>[...Ft[Mt],...ft[Mt]].every(i)).curve(n)(Ft)};return!Re||a&&!Object.keys(Te).length?We(ut(J)):Re&&!a?We(ut(m)):Ho(new pN).style("areaStyle",K).style("connectStyle",Object.assign(Object.assign({},Te),s)).style("areaPath",ut(m)).style("connectPath",oe.map(ut).join("")).node()}}};M0.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const vN=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=fl(n)?yR:N2;return M0(Object.assign({curve:i},e),t)(...r)}};vN.props=Object.assign(Object.assign({},M0.props),{defaultMarker:"square"});var Mq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mN=(e,t)=>{const n=Mq(e,[]),{coordinate:r}=t;return(...i)=>{const a=fl(r)?t6:Ol(r)?u6:s6;return M0(Object.assign({curve:a},n),t)(...i)}};mN.props=Object.assign(Object.assign({},M0.props),{defaultMarker:"smooth"});const gN=(e,t)=>(...n)=>M0(Object.assign({curve:c6},e),t)(...n);gN.props=Object.assign(Object.assign({},M0.props),{defaultMarker:"hvh"});const yN=(e,t)=>(...n)=>M0(Object.assign({curve:f6},e),t)(...n);yN.props=Object.assign(Object.assign({},M0.props),{defaultMarker:"vh"});const _N=(e,t)=>(...n)=>M0(Object.assign({curve:h6},e),t)(...n);_N.props=Object.assign(Object.assign({},M0.props),{defaultMarker:"hv"});const bN={area:vN,smooth:mN,hvh:gN,vh:yN,hv:_N},xN=()=>(e,t,n,r)=>{var i,a;const{x:s,y:l,y1:p,series:m}=n,{x:y,y:b}=t,E=m?Array.from(Zl(e,z=>m[z]).values()):[e],O=E.map(z=>z[0]).filter(z=>z!==void 0),P=(((i=y==null?void 0:y.getBandWidth)===null||i===void 0?void 0:i.call(y))||0)/2,I=(((a=b==null?void 0:b.getBandWidth)===null||a===void 0?void 0:a.call(b))||0)/2,N=Array.from(E,z=>{const V=z.length,W=new Array(V*2);for(let K=0;K<z.length;K++){const J=z[K];W[K]=r.map([+s[J]+P,+l[J]+I]),W[V+K]=r.map([+s[J]+P,+p[J]+I])}return W});return[O,N,E]};xN.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:bN,channels:[...tp({shapes:Object.keys(bN)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...of(),{type:MR},{type:$2},{type:FR}],postInference:[...Of(),...Ib()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const EN=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;if(r)return[e,t];const[i]=ou(n,"y");return[e,Pi({},t,{encode:{y1:Hl([...i])}})]};EN.props={};const SN=()=>(e,t)=>{const{encode:n}=t,{x1:r}=n;if(r)return[e,t];const[i]=ou(n,"x");return[e,Pi({},t,{encode:{x1:Hl([...i])}})]};SN.props={};var wN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const UR=(e,t)=>{const{arrow:n=!0,arrowSize:r="40%"}=e,i=wN(e,["arrow","arrowSize"]),{document:a}=t;return(s,l,p)=>{const{defaultColor:m}=p,y=wN(p,["defaultColor"]),{color:b=m,transform:E}=l,[O,P]=s,I=Hv();if(I.moveTo(...O),I.lineTo(...P),n){const[N,z]=PH(O,P,{arrowSize:r});I.moveTo(...P),I.lineTo(...N),I.moveTo(...P),I.lineTo(...z)}return Ho(a.createElement("path",{})).call(Po,y).style("d",I.toString()).style("stroke",b).style("transform",E).call(Po,i).node()}};UR.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const TN=(e,t)=>{const{arrow:n=!1}=e;return(...r)=>UR(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};TN.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var AN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const CN=(e,t)=>{const n=AN(e,[]),{coordinate:r,document:i}=t;return(a,s,l)=>{const{color:p}=l,m=AN(l,["color"]),{color:y=p,transform:b}=s,[E,O]=a,P=Hv();if(P.moveTo(E[0],E[1]),fl(r)){const I=r.getCenter();P.quadraticCurveTo(I[0],I[1],O[0],O[1])}else{const I=m4(E,O),N=dc(E,O)/2;D2(P,E,O,I,N)}return Ho(i.createElement("path",{})).call(Po,m).style("d",P.toString()).style("stroke",y).style("transform",b).call(Po,n).node()}};CN.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var ON=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const MN=(e,t)=>{const n=ON(e,[]),{document:r}=t;return(i,a,s)=>{const{color:l}=s,p=ON(s,["color"]),{color:m=l,transform:y}=a,[b,E]=i,O=Hv();return O.moveTo(b[0],b[1]),O.bezierCurveTo(b[0]/2+E[0]/2,b[1],b[0]/2+E[0]/2,E[1],E[0],E[1]),Ho(r.createElement("path",{})).call(Po,p).style("d",O.toString()).style("stroke",m).style("transform",y).call(Po,n).node()}};MN.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var RN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rq(e,t,n,r){const i=Hv();if(fl(n)){const a=n.getCenter(),s=dc(e,a),p=(dc(t,a)-s)*r+s;return i.moveTo(e[0],e[1]),D2(i,e,t,a,p),i.lineTo(t[0],t[1]),i}return Ol(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}const PN=(e,t)=>{const{cornerRatio:n=1/3}=e,r=RN(e,["cornerRatio"]),{coordinate:i,document:a}=t;return(s,l,p)=>{const{defaultColor:m}=p,y=RN(p,["defaultColor"]),{color:b=m,transform:E}=l,[O,P]=s,I=Rq(O,P,i,n);return Ho(a.createElement("path",{})).call(Po,y).style("d",I.toString()).style("stroke",b).style("transform",E).call(Po,r).node()}};PN.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const IN={link:TN,arc:CN,smooth:MN,vhv:PN},jR=e=>(t,n,r,i)=>{const{x:a,y:s,x1:l=a,y1:p=s}=r,m=$_(n,r,e),y=t.map(b=>[i.map(m([+a[b],+s[b]],b)),i.map(m([+l[b],+p[b]],b))]);return[t,y]};jR.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:IN,channels:[...tp({shapes:Object.keys(IN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...of(),{type:EN},{type:SN}],postInference:[...Of(),...cy()]};var Pq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kN=(e,t)=>{const{coordinate:n,document:r}=t;return(i,a,s)=>{const{color:l}=s,p=Pq(s,["color"]),{color:m=l,src:y="",size:b=32,transform:E=""}=a;let{width:O=b,height:P=b}=e;const[[I,N]]=i,[z,V]=n.getSize();O=typeof O=="string"?MT(O)*z:O,P=typeof P=="string"?MT(P)*V:P;const W=I-Number(O)/2,K=N-Number(P)/2;return Ho(r.createElement("image",{})).call(Po,p).style("x",W).style("y",K).style("img",y).style("stroke",m).style("transform",E).call(Po,e).style("width",O).style("height",P).node()}};kN.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const LN={image:kN},DN=e=>{const{cartesian:t}=e;return t?xR:(n,r,i,a)=>{const{x:s,y:l}=i,p=$_(r,i,e),m=Array.from(n,y=>{const b=[+s[y],+l[y]];return[a.map(p(b,y))]});return[n,m]}};DN.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:LN,channels:[...tp({shapes:Object.keys(LN)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...of(),{type:LT},{type:DT}],postInference:[...Of(),...cy()]};var Iq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function kq(e,t){const n=Hv();if(fl(t)){const r=t.getCenter(),i=[...e,e[0]],a=i.map(s=>dc(s,r));return i.forEach((s,l)=>{if(l===0){n.moveTo(s[0],s[1]);return}const p=a[l],m=e[l-1],y=a[l-1];y!==void 0&&Math.abs(p-y)<1e-10?D2(n,m,s,r,p):n.lineTo(s[0],s[1])}),n.closePath(),n}return RH(n,e)}const NN=(e,t)=>{const{coordinate:n,document:r}=t;return(i,a,s)=>{const{color:l}=s,p=Iq(s,["color"]),{color:m=l,transform:y}=a,b=kq(i,n);return Ho(r.createElement("path",{})).call(Po,p).style("d",b.toString()).style("stroke",m).style("fill",m).style("transform",y).call(Po,e).node()}};NN.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var BN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Lq(e,t){const[n,r,i,a]=e,s=Hv();if(fl(t)){const l=t.getCenter(),p=dc(l,n);return s.moveTo(n[0],n[1]),s.quadraticCurveTo(l[0],l[1],i[0],i[1]),D2(s,i,a,l,p),s.quadraticCurveTo(l[0],l[1],r[0],r[1]),D2(s,r,n,l,p),s.closePath(),s}return s.moveTo(n[0],n[1]),s.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),s.lineTo(a[0],a[1]),s.bezierCurveTo(a[0]/2+r[0]/2,a[1],a[0]/2+r[0]/2,r[1],r[0],r[1]),s.lineTo(n[0],n[1]),s.closePath(),s}const FN=(e,t)=>{const n=BN(e,[]),{coordinate:r,document:i}=t;return(a,s,l)=>{const{color:p}=l,m=BN(l,["color"]),{color:y=p,transform:b}=s,E=Lq(a,r);return Ho(i.createElement("path",{})).call(Po,m).style("d",E.toString()).style("fill",y||p).style("stroke",y||p).style("transform",b).call(Po,n).node()}};FN.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const zN={polygon:NN,ribbon:FN},UN=()=>(e,t,n,r)=>{const i=Object.entries(n).filter(([l])=>l.startsWith("x")).map(([,l])=>l),a=Object.entries(n).filter(([l])=>l.startsWith("y")).map(([,l])=>l),s=e.map(l=>{const p=[];for(let m=0;m<i.length;m++){const y=i[m][l];if(y===void 0)break;const b=a[m][l];p.push(r.map([+y,+b]))}return p});return[e,s]};UN.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:zN,channels:[...tp({shapes:Object.keys(zN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...of()],postInference:[...Of(),...cy()]};var Dq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Nq(e,t){const n=Hv();if(!fl(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{const r=t.getCenter(),[i,a]=r,s=Vv($c(e[0],r)),l=Vv($c(e[1],r)),p=dc(r,e[2]),m=dc(r,e[3]),y=dc(r,e[8]),b=dc(r,e[10]),E=dc(r,e[11]);n.moveTo(...e[0]),n.arc(i,a,p,s,l),n.arc(i,a,p,l,s,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,a,m,s,l),n.lineTo(...e[6]),n.arc(i,a,b,l,s,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,a,y,s,l),n.arc(i,a,y,l,s,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,a,E,s,l),n.arc(i,a,E,l,s,!0)}return n}const jN=(e,t)=>{const{coordinate:n,document:r}=t;return(i,a,s)=>{const{color:l,transform:p}=a,{color:m,fill:y=m,stroke:b=m}=s,E=Dq(s,["color","fill","stroke"]),O=Nq(i,n);return Ho(r.createElement("path",{})).call(Po,E).style("d",O.toString()).style("stroke",b).style("fill",l||y).style("transform",p).call(Po,e).node()}};jN.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Bq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Fq(e,t,n=4){const r=Hv();if(!fl(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=t.getCenter(),[a,s]=i,l=dc(i,e[3]),p=dc(i,e[8]),m=dc(i,e[10]),y=Vv($c(e[2],i)),b=Math.asin(n/p),E=y-b,O=y+b;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(E)*l+a,Math.sin(E)*l+s),r.arc(a,s,l,E,O),r.lineTo(Math.cos(O)*m+a,Math.sin(O)*m+s),r.arc(a,s,m,O,E,!0),r.lineTo(Math.cos(E)*l+a,Math.sin(E)*l+s),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);const P=(E+O)/2;return r.moveTo(Math.cos(P)*(p+n/2)+a,Math.sin(P)*(p+n/2)+s),r.arc(Math.cos(P)*p+a,Math.sin(P)*p+s,n/2,P,Math.PI*2+P),r.closePath(),r}const ZN=(e,t)=>{const{coordinate:n,document:r}=t;return(i,a,s)=>{const{color:l,transform:p}=a,m=4,{color:y,fill:b=y,stroke:E=y}=s,O=Bq(s,["color","fill","stroke"]),P=Fq(i,n,m);return Ho(r.createElement("path",{})).call(Po,O).style("d",P.toString()).style("stroke",E).style("fill",l||b).style("transform",p).call(Po,e).node()}};ZN.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const VN={box:jN,violin:ZN},HN=()=>(e,t,n,r)=>{const{x:i,y:a,y1:s,y2:l,y3:p,y4:m,series:y}=n,b=t.x,E=t.series,O=Array.from(e,P=>{const I=b.getBandWidth(b.invert(+i[P])),N=E?E.getBandWidth(E.invert(+(y==null?void 0:y[P]))):1,z=I*N,V=(+(y==null?void 0:y[P])||0)*I,W=+i[P]+V+z/2,[K,J,oe,Te,Re]=[+a[P],+s[P],+l[P],+p[P],+m[P]];return[[W-z/2,Re],[W+z/2,Re],[W,Re],[W,Te],[W-z/2,Te],[W+z/2,Te],[W+z/2,J],[W-z/2,J],[W-z/2,oe],[W+z/2,oe],[W,J],[W,K],[W-z/2,K],[W+z/2,K]].map(ut=>r.map(ut))});return[e,O]};HN.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:VN,channels:[...tp({shapes:Object.keys(VN)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...of(),{type:V_}],postInference:[...Of(),...Ib()],interaction:{shareTooltip:!0}};const WN={vector:UR},$N=()=>(e,t,n,r)=>{const{x:i,y:a,size:s,rotate:l}=n,[p,m]=r.getSize(),y=e.map(b=>{const E=+l[b]/180*Math.PI,O=+s[b],P=O/p,I=O/m,N=P*Math.cos(E),z=-I*Math.sin(E);return[r.map([+i[b]-N/2,+a[b]-z/2]),r.map([+i[b]+N/2,+a[b]+z/2])]});return[e,y]};$N.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:WN,channels:[...tp({shapes:Object.keys(WN)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...of()],postInference:[...Of(),...cy()]};var GN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zq(e,t,n){return e.createElement("path",{style:Object.assign({path:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,anchor:"0.5 0.5",transformOrigin:"center"},n)})}function Uq(e,t){if(!fl(t))return oy().x(r=>r[0]).y(r=>r[1])(e);const n=t.getCenter();return wT()({startAngle:0,endAngle:Math.PI*2,outerRadius:dc(e[0],n),innerRadius:dc(e[1],n)})}function jq(e,t){if(!fl(e))return t;const[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}const ZR=(e,t)=>{const{arrow:n,arrowSize:r=4}=e,i=GN(e,["arrow","arrowSize"]),{coordinate:a,document:s}=t;return(l,p,m)=>{const{color:y,lineWidth:b}=m,E=GN(m,["color","lineWidth"]),{color:O=y,size:P=b}=p,I=n?zq(s,r,Object.assign({fill:i.stroke||O,stroke:i.stroke||O},ja(i,"arrow"))):null,N=Uq(l,a),z=jq(a,p.transform);return Ho(s.createElement("path",{})).call(Po,E).style("d",N).style("stroke",O).style("lineWidth",P).style("transform",z).style("markerEnd",I).call(Po,i).node()}};ZR.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const XN=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(W2)?[e,t]:[e,Pi({},t,{encode:{x:Hl(n)}})]};XN.props={};const YN={line:ZR},qN=e=>(t,n,r,i)=>{const{x:a}=r,s=$_(n,r,Pi({style:{bandOffset:0}},e)),l=Array.from(t,p=>{const m=[a[p],1],y=[a[p],0];return[m,y].map(b=>i.map(s(b,p)))});return[t,l]};qN.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:YN,channels:[...kb({shapes:Object.keys(YN)}),{name:"x",required:!0}],preInference:[...of(),{type:XN}],postInference:[...Of()]};const KN=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(W2)?[e,t]:[e,Pi({},t,{encode:{y:Hl(n)}})]};KN.props={};const QN={line:ZR},JN=e=>(t,n,r,i)=>{const{y:a}=r,s=$_(n,r,Pi({style:{bandOffset:0}},e)),l=Array.from(t,p=>{const m=[0,a[p]],y=[1,a[p]];return[m,y].map(b=>i.map(s(b,p)))});return[t,l]};JN.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:QN,channels:[...kb({shapes:Object.keys(QN)}),{name:"y",required:!0}],preInference:[...of(),{type:KN}],postInference:[...Of()]};var eB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Zq(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function Vq(e){return oy().x(t=>t[0]).y(t=>t[1])(e)}function Hq(e,t,n,r,i=0){const[[a,s],[l,p]]=t;if(Ol(e)){const E=a+n,O=l+r,P=E+i;return[[E,s],[P,s],[P,p],[O,p]]}const m=s-n,y=p-r,b=m-i;return[[a,m],[a,b],[l,b],[l,y]]}const tB=(e,t)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:a,endMarker:s=!0}=e,l=eB(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:p}=t;return(m,y,b)=>{const{color:E,connectLength1:O}=b,P=eB(b,["color","connectLength1"]),{color:I,transform:N}=y,z=Hq(p,m,r,i,a!=null?a:O),V=ja(Object.assign(Object.assign({},l),b),"endMarker");return Ho(new pu).call(Po,P).style("path",Vq(z)).style("stroke",I||E).style("transform",N).style("markerEnd",s?new yl({className:"marker",style:Object.assign(Object.assign({},V),{symbol:Zq})}):null).call(Po,l).node()}};tB.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const nB={connector:tB},rB=(...e)=>jR(...e);rB.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:nB,channels:[...kb({shapes:Object.keys(nB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...of()],postInference:[...Of()]};function iB(e,t,n,r){if(t)return()=>[0,1];const{[e]:i,[`${e}1`]:a}=n;return s=>{var l;const p=((l=r.getBandWidth)===null||l===void 0?void 0:l.call(r,r.invert(+a[s])))||0;return[i[s],a[s]+p]}}function VR(e={}){const{extendX:t=!1,extendY:n=!1}=e;return(r,i,a,s)=>{const l=iB("x",t,a,i.x),p=iB("y",n,a,i.y),m=Array.from(r,y=>{const[b,E]=l(y),[O,P]=p(y);return[[b,O],[E,O],[E,P],[b,P]].map(W=>s.map(W))});return[r,m]}}const aB={range:W_},oB=()=>VR();oB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:aB,channels:[...kb({shapes:Object.keys(aB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...of()],postInference:[...Of()]};const sB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(W2))){const r=(i,a)=>Array.isArray(i[0])?i.map(s=>s[a]):[i[a]];return[e,Pi({},t,{encode:{x:Hl(r(n,0)),x1:Hl(r(n,1))}})]}return[e,t]};sB.props={};const uB={range:W_},lB=()=>VR({extendY:!0});lB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:uB,channels:[...kb({shapes:Object.keys(uB)}),{name:"x",required:!0}],preInference:[...of(),{type:sB}],postInference:[...Of()]};const cB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(W2))){const r=(i,a)=>Array.isArray(i[0])?i.map(s=>s[a]):[i[a]];return[e,Pi({},t,{encode:{y:Hl(r(n,0)),y1:Hl(r(n,1))}})]}return[e,t]};cB.props={};const fB={range:W_},hB=()=>VR({extendX:!0});hB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:fB,channels:[...kb({shapes:Object.keys(fB)}),{name:"y",required:!0}],preInference:[...of(),{type:cB}],postInference:[...Of()]};var dB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const HR=(e,t)=>{const{arrow:n,colorAttribute:r}=e,i=dB(e,["arrow","colorAttribute"]),{coordinate:a,document:s}=t;return(l,p,m)=>{const{color:y,stroke:b}=m,E=dB(m,["color","stroke"]),{d:O,color:P=y}=p,[I,N]=a.getSize();return Ho(s.createElement("path",{})).call(Po,E).style("d",typeof O=="function"?O({width:I,height:N}):O).style(r,P).call(Po,i).node()}};HR.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const pB=(e,t)=>HR(Object.assign({colorAttribute:"fill"},e),t);pB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const vB=(e,t)=>HR(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);vB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const mB={path:pB,hollow:vB},gB=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];gB.props={defaultShape:"path",defaultLabelShape:"label",shape:mB,composite:!1,channels:[...tp({shapes:Object.keys(mB)}),{name:"d",scale:"identity"}],preInference:[...of()],postInference:[...Of()]};var Wq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const yB=(e,t)=>{const{render:n}=e,r=Wq(e,["render"]);return i=>{const[[a,s]]=i;return n(Object.assign(Object.assign({},r),{x:a,y:s}),t)}};yB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _B=()=>(e,t)=>{const{style:n={}}=t;return[e,Pi({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};_B.props={};const $q={shape:yB},bB=e=>{const{cartesian:t}=e;return t?xR:(n,r,i,a)=>{const{x:s,y:l}=i,p=$_(r,i,e),m=Array.from(n,y=>{const b=[+s[y],+l[y]];return[a.map(p(b,y))]});return[n,m]}};bB.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:$q,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...of(),{type:LT},{type:DT},{type:_B}]};var Gq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xB=(e,t)=>{const{document:n}=t;return(r,i,a)=>{const{transform:s}=i,{color:l}=a,p=Gq(a,["color"]),{color:m=l}=i,[y,...b]=r,E=Hv();return E.moveTo(...y),b.forEach(([O,P])=>{E.lineTo(O,P)}),E.closePath(),Ho(n.createElement("path",{})).call(Po,p).style("d",E.toString()).style("stroke",m||l).style("fill",m||l).style("fillOpacity",.4).style("transform",s).call(Po,e).node()}};xB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const EB={density:xB},SB=()=>(e,t,n,r)=>{const{x:i,series:a}=n,s=Object.entries(n).filter(([b])=>b.startsWith("y")).map(([,b])=>b),l=Object.entries(n).filter(([b])=>b.startsWith("size")).map(([,b])=>b);if(i===void 0||s===void 0||l===void 0)throw new Error("Missing encode for x or y or size channel.");const p=t.x,m=t.series,y=Array.from(e,b=>{const E=p.getBandWidth(p.invert(+i[b])),O=m?m.getBandWidth(m.invert(+(a==null?void 0:a[b]))):1,P=E*O,I=(+(a==null?void 0:a[b])||0)*E,N=+i[b]+I+P/2;return[...s.map((V,W)=>[N+ +l[W][b]/e.length,+s[W][b]]),...s.map((V,W)=>[N-+l[W][b]/e.length,+s[W][b]]).reverse()].map(V=>r.map(V))});return[e,y]};SB.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:EB,channels:[...tp({shapes:Object.keys(EB)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...of(),{type:$2},{type:V_}],postInference:[...Of(),...Ib()],interaction:{shareTooltip:!0}};function wB(e){var t,n,r,i=e||1;function a(l,p){++t>i&&(r=n,s(1),++t),n[l]=p}function s(l){t=0,n=Object.create(null),l||(r=Object.create(null))}return s(),{clear:s,has:function(l){return n[l]!==void 0||r[l]!==void 0},get:function(l){var p=n[l];if(p!==void 0)return p;if((p=r[l])!==void 0)return a(l,p),p},set:function(l,p){n[l]!==void 0?n[l]=p:a(l,p)}}}const hve=wB(3);function Xq(e,t=(...r)=>`${r[0]}`,n=16){const r=wB(n);return(...i)=>{const a=t(...i);let s=r.get(a);return r.has(a)?r.get(a):(s=e(...i),r.set(a,s),s)}}function Yq(e){return typeof e=="string"?e.split(" ").map(t=>{const[n,r]=t.split(":");return[+n,r]}):e}function NT(e,t,n){const r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}const qq=Xq((e,t,n)=>{const r=NT(n,e*2,e*2),i=r.getContext("2d"),a=e,s=e;if(t===1)i.beginPath(),i.arc(a,s,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const l=i.createRadialGradient(a,s,e*t,a,s,e);l.addColorStop(0,"rgba(0,0,0,1)"),l.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=l,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function Kq(e,t){const r=NT(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return Yq(e).forEach(([a,s])=>{i.addColorStop(a,s)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function Qq(e,t,n,r,i,a){const{blur:s}=i;let l=r.length;for(;l--;){const{x:p,y:m,value:y,radius:b}=r[l],E=Math.min(y,n),O=p-b,P=m-b,I=qq(b,1-s,a),N=(E-t)/(n-t);e.globalAlpha=Math.max(N,.001),e.drawImage(I,O,P)}return e}function Jq(e,t,n,r,i){const{minOpacity:a,opacity:s,maxOpacity:l,useGradientOpacity:p}=i,m=0,y=0,b=t,E=n,O=e.getImageData(m,y,b,E),P=O.data,I=P.length;for(let N=3;N<I;N+=4){const z=P[N],V=z*4;if(!V)continue;const W=s||Math.max(0,Math.min(l,Math.max(a,z)));P[N-3]=r[V],P[N-2]=r[V+1],P[N-1]=r[V+2],P[N]=p?r[V+3]:W}return O}function eK(e,t,n,r,i,a,s){const l=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);l.minOpacity*=255,l.opacity*=255,l.maxOpacity*=255;const m=NT(s,e,t).getContext("2d"),y=Kq(l.gradient,s);m.clearRect(0,0,e,t),Qq(m,n,r,i,l,s);const b=Jq(m,e,t,y,l),O=NT(s,e,t).getContext("2d");return O.putImageData(b,0,0),O}var tK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nK(e,t){return Object.keys(e).reduce((n,r)=>{const i=e[r];return t(i,r)||(n[r]=i),n},{})}const TB=(e,t)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:a,blur:s,useGradientOpacity:l}=e,p=tK(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:m,createCanvas:y,document:b}=t;return(E,O,P)=>{const{transform:I}=O,[N,z]=m.getSize(),V=E.map(Te=>({x:Te[0],y:Te[1],value:Te[2],radius:Te[3]})),W=cv(E,Te=>Te[2]),K=Pu(E,Te=>Te[2]),oe=N&&z?eK(N,z,W,K,V,nK({gradient:n,opacity:r,minOpacity:a,maxOpacity:i,blur:s,useGradientOpacity:l},Te=>Te===void 0),y):{canvas:null};return Ho(b.createElement("image",{})).call(Po,P).style("x",0).style("y",0).style("width",N).style("height",z).style("src",oe.canvas).style("transform",I).call(Po,p).node()}};TB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const AB={heatmap:TB},CB=e=>(t,n,r,i)=>{const{x:a,y:s,size:l,color:p}=r,m=Array.from(t,y=>{const b=l?+l[y]:40;return[...i.map([+a[y],+s[y]]),p[y],b]});return[[0],[m]]};CB.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:AB,channels:[...tp({shapes:Object.keys(AB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...of(),{type:V_},{type:kT}],postInference:[...Of(),...cy()]};const OB=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];OB.props={};const MB=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];MB.props={};const RB=e=>new Ed(e);RB.props={};const BT=Symbol("defaultUnknown");function PB(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function IB(e){const{value:t,from:n,to:r,mapper:i,notFoundReturn:a}=e;let s=i.get(t);if(s===void 0){if(a!==BT)return a;s=n.push(t)-1,i.set(t,s)}return r[s%r.length]}function kB(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}class FT extends M2{getDefaultOptions(){return{domain:[],range:[],unknown:BT}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&PB(this.domainIndexMap,this.getDomain(),this.domainKey),IB({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&PB(this.rangeIndexMap,this.getRange(),this.rangeKey),IB({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=kB(n),this.rangeKey=kB(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new FT(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}const LB=e=>new FT(e);LB.props={};function DB({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):n}function rK({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function iK({map:e,initKey:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function aK(e){return typeof e=="object"?e.valueOf():e}class NB extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=aK,t!==null)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(DB({map:this.map,initKey:this.initKey},t))}has(t){return super.has(DB({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(rK({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(iK({map:this.map,initKey:this.initKey},t))}}function oK(e){const t=Math.min(...e);return e.map(n=>n/t)}function sK(e,t){const n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function uK(e){return Math.round(e*1e12)/1e12}function lK(e){const{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:a,round:s,align:l}=e,p=t.length,m=sK(a,p),[y,b]=n,E=b-y,O=2/p*r+1-1/p*i,P=E/O,I=P*i/p,N=P-p*I,z=oK(m),V=z.reduce((Ft,ft)=>Ft+ft),W=N/V,K=new NB(t.map((Ft,ft)=>{const St=z[ft]*W;return[Ft,s?Math.floor(St):St]})),J=new NB(t.map((Ft,ft)=>{const Mt=z[ft]*W+I;return[Ft,s?Math.floor(Mt):Mt]})),oe=Array.from(J.values()).reduce((Ft,ft)=>Ft+ft),Re=(E-(oe-oe/p*i))*l,We=y+Re;let ut=s?Math.round(We):We;const ct=new Array(p);for(let Ft=0;Ft<p;Ft+=1){ct[Ft]=uK(ut);const ft=t[Ft];ut+=J.get(ft)}return{valueBandWidth:K,valueStep:J,adjustedRange:ct}}function cK(e){var t;const{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return lK(e);const{range:a,paddingOuter:s,paddingInner:l,round:p,align:m}=e;let y,b,E=a[0];const P=a[1]-E,I=s*2,N=r-l;y=P/Math.max(1,I+N),p&&(y=Math.floor(y)),E+=(P-y*(r-l))*m,b=y*(1-l),p&&(E=Math.round(E),b=Math.round(b));const z=new Array(r).fill(0).map((V,W)=>E+W*y);return{valueStep:y,valueBandWidth:b,adjustedRange:z}}class fy extends FT{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:BT,flex:[]}}constructor(t){super(t)}clone(){return new fy(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:r,round:i,flex:a}=this.options,{adjustedRange:s,valueBandWidth:l,valueStep:p}=cK({align:t,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=p,this.valueBandWidth=l,this.adjustedRange=s}}const BB=e=>new fy(e);BB.props={};class zT extends M2{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:AM}}map(t){return Ww(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new zT(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:r}=this.options,[i,a]=t;return!fb(i)||!fb(a)?[]:r(i,a,n)}}const FB=e=>new zT(e);FB.props={};class WR extends fy{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:BT,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new WR(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const zB=e=>new WR(e);zB.props={};var UB=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,hy="\\d\\d?",dy="\\d\\d",fK="\\d{3}",hK="\\d{4}",K2="[^\\s]+",jB=/\[([^]*?)\]/gm;function ZB(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var VB=function(e){return function(t,n){var r=n[e].map(function(a){return a.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function G_(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var s in a)e[s]=a[s]}return e}var HB=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],WB=["January","February","March","April","May","June","July","August","September","October","November","December"],dK=ZB(WB,3),pK=ZB(HB,3),$B={dayNamesShort:pK,dayNames:HB,monthNamesShort:dK,monthNames:WB,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},UT=G_({},$B),vK=function(e){return UT=G_(UT,e)},GB=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Dp=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},mK={D:function(e){return String(e.getDate())},DD:function(e){return Dp(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Dp(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Dp(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Dp(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Dp(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Dp(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Dp(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Dp(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Dp(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Dp(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Dp(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Dp(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Dp(Math.floor(Math.abs(t)/60),2)+":"+Dp(Math.abs(t)%60,2)}},XB=function(e){return+e-1},YB=[null,hy],qB=[null,K2],KB=["isPm",K2,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],QB=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],gK={D:["day",hy],DD:["day",dy],Do:["day",hy+K2,function(e){return parseInt(e,10)}],M:["month",hy,XB],MM:["month",dy,XB],YY:["year",dy,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",hy,void 0,"isPm"],hh:["hour",dy,void 0,"isPm"],H:["hour",hy],HH:["hour",dy],m:["minute",hy],mm:["minute",dy],s:["second",hy],ss:["second",dy],YYYY:["year",hK],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",dy,function(e){return+e*10}],SSS:["millisecond",fK],d:YB,dd:YB,ddd:qB,dddd:qB,MMM:["month",K2,VB("monthNamesShort")],MMMM:["month",K2,VB("monthNames")],a:KB,A:KB,ZZ:QB,Z:QB},jT={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},yK=function(e){return G_(jT,e)},JB=function(e,t,n){if(t===void 0&&(t=jT.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=jT[t]||t;var r=[];t=t.replace(jB,function(a,s){return r.push(s),"@@@"});var i=G_(G_({},UT),n);return t=t.replace(UB,function(a){return mK[a](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function _K(e,t,n){if(n===void 0&&(n={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=jT[t]||t,e.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],s=[],l=t.replace(jB,function(K,J){return s.push(GB(J)),"@@@"}),p={},m={};l=GB(l).replace(UB,function(K){var J=gK[K],oe=J[0],Te=J[1],Re=J[3];if(p[oe])throw new Error("Invalid format. "+oe+" specified twice in format");return p[oe]=!0,Re&&(m[Re]=!0),a.push(J),"("+Te+")"}),Object.keys(m).forEach(function(K){if(!p[K])throw new Error("Invalid format. "+K+" is required in specified format")}),l=l.replace(/@@@/g,function(){return s.shift()});var y=e.match(new RegExp(l,"i"));if(!y)return null;for(var b=G_(G_({},UT),n),E=1;E<y.length;E++){var O=a[E-1],P=O[0],I=O[2],N=I?I(y[E],b):+y[E];if(N==null)return null;i[P]=N}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var z;if(i.timezoneOffset==null){z=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var V=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],E=0,W=V.length;E<W;E++)if(p[V[E][0]]&&i[V[E][0]]!==z[V[E][1]]())return null}else if(z=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return z}var dve={format:JB,parse:_K,defaultI18n:$B,setGlobalDateI18n:vK,setGlobalDateMasks:yK},pve=null;const Q2=1e3,J2=Q2*60,eE=J2*60,X_=eE*24,tE=X_*7,eF=X_*30,tF=X_*365;function Ad(e,t,n,r){const i=(m,y)=>{const b=O=>r(O)%y===0;let E=y;for(;E&&!b(m);)n(m,-1),E-=1;return m},a=(m,y)=>{y&&i(m,y),t(m)},s=(m,y)=>{const b=new Date(+m);return a(b,y),b},l=(m,y)=>{const b=new Date(+m-1);return a(b,y),n(b,y),a(b),b};return{ceil:l,floor:s,range:(m,y,b,E)=>{const O=[],P=Math.floor(b),I=E?l(m,b):l(m);for(let N=I;N<y;n(N,P),a(N))O.push(new Date(+N));return O},duration:e}}const bK=Ad(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),xK=Ad(Q2,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+Q2*t)},e=>e.getSeconds()),EK=Ad(J2,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+J2*t)},e=>e.getMinutes()),SK=Ad(eE,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+eE*t)},e=>e.getHours()),wK=Ad(X_,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+X_*t)},e=>e.getDate()-1),nF=Ad(eF,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),TK=Ad(tE,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{const t=nF.floor(e),n=new Date(+e);return Math.floor((+n-+t)/tE)}),AK=Ad(tF,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),rF={millisecond:bK,second:xK,minute:EK,hour:SK,day:wK,week:TK,month:nF,year:AK},CK=Ad(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),OK=Ad(Q2,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+Q2*t)},e=>e.getUTCSeconds()),MK=Ad(J2,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+J2*t)},e=>e.getUTCMinutes()),RK=Ad(eE,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+eE*t)},e=>e.getUTCHours()),PK=Ad(X_,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+X_*t)},e=>e.getUTCDate()-1),iF=Ad(eF,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),IK=Ad(tE,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+tE*t)},e=>{const t=iF.floor(e),n=new Date(+e);return Math.floor((+n-+t)/tE)}),kK=Ad(tF,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),aF={millisecond:CK,second:OK,minute:MK,hour:RK,day:PK,week:IK,month:iF,year:kK};function LK(e){const t=e?aF:rF,{year:n,month:r,week:i,day:a,hour:s,minute:l,second:p,millisecond:m}=t;return{tickIntervals:[[p,1],[p,5],[p,15],[p,30],[l,1],[l,5],[l,15],[l,30],[s,1],[s,3],[s,6],[s,12],[a,1],[a,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:m}}function oF(e,t,n,r,i){const a=+e,s=+t,{tickIntervals:l,year:p,millisecond:m}=LK(i),y=([N,z])=>N.duration*z,b=r?(s-a)/r:n||5,E=r||(s-a)/b,O=l.length,P=yM(l,E,0,O,y);let I;if(P===O){const N=Lk(a/p.duration,s/p.duration,b);I=[p,N]}else if(P){const N=E/y(l[P-1])<y(l[P])/E,[z,V]=N?l[P-1]:l[P],W=r?Math.ceil(r/z.duration):V;I=[z,W]}else{const N=Math.max(Lk(a,s,b),1);I=[m,N]}return I}const DK=(e,t,n,r,i)=>{const a=e>t,s=a?t:e,l=a?e:t,[p,m]=oF(s,l,n,r,i),y=p.range(s,new Date(+l+1),m,!0);return a?y.reverse():y},NK=(e,t,n,r,i)=>{const a=e>t,s=a?t:e,l=a?e:t,[p,m]=oF(s,l,n,r,i),y=[p.floor(s,m),p.ceil(l,m)];return a?y.reverse():y};function BK(e,t){const{second:n,minute:r,hour:i,day:a,week:s,month:l,year:p}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":a.floor(e)<e?"hh A":l.floor(e)<e?s.floor(e)<e?"MMM DD":"ddd DD":p.floor(e)<e?"MMMM":"YYYY"}function FK(e){const t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}class $R extends Gw{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:DK,interpolate:db,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return NK}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,a=t[0],s=t[t.length-1];return[a,s,n,r,i]}getFormatter(){const{mask:t,utc:n}=this.options,r=n?aF:rF,i=n?FK:L_;return a=>JB(i(a),t||BK(a,r))}clone(){return new $R(this.options)}}const sF=e=>new $R(e);sF.props={};const uF=e=>t=>-e(-t),GR=(e,t)=>{const n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?uF(r):r},XR=(e,t)=>{const n=e===Math.E?Math.exp:r=>Mf(e,r);return t?uF(n):n},zK=(e,t,n,r=10)=>{const i=e<0,a=XR(r,i),s=GR(r,i),l=t<e,p=l?t:e,m=l?e:t;let y=s(p),b=s(m),E=[];if(!(r%1)&&b-y<n){if(y=Math.floor(y),b=Math.ceil(b),i)for(;y<=b;y+=1){const O=a(y);for(let P=r-1;P>=1;P-=1){const I=O*P;if(I>m)break;I>=p&&E.push(I)}}else for(;y<=b;y+=1){const O=a(y);for(let P=1;P<r;P+=1){const I=O*P;if(I>m)break;I>=p&&E.push(I)}}E.length*2<n&&(E=D_(p,m,n))}else{const O=n===-1?b-y:Math.min(b-y,n);E=D_(y,b,O).map(a)}return l?E.reverse():E},UK=(e,t,n,r)=>{const i=e<0,a=GR(r,i),s=XR(r,i),l=e>t,p=l?t:e,m=l?e:t,y=[s(Math.floor(a(p))),s(Math.ceil(a(m)))];return l?y.reverse():y};class YR extends Gw{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:R2,tickMethod:zK,tickCount:5}}chooseNice(){return UK}getTickMethodOptions(){const{domain:t,tickCount:n,base:r}=this.options,i=t[0],a=t[t.length-1];return[i,a,n,r]}chooseTransforms(){const{base:t,domain:n}=this.options,r=n[0]<0;return[GR(t,r),XR(t,r)]}clone(){return new YR(this.options)}}const lF=e=>new YR(e);lF.props={};const jK=e=>t=>t<0?-Mf(-t,e):Mf(t,e),ZK=e=>t=>t<0?-Mf(-t,1/e):Mf(t,1/e),VK=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class ZT extends Gw{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:R2,tickMethod:D_,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[L_,L_];const n=t===.5?VK:jK(t),r=ZK(t);return[n,r]}clone(){return new ZT(this.options)}}const cF=e=>new ZT(e);cF.props={};class qR extends ZT{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:R2,tickMethod:D_,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new qR(this.options)}}const fF=e=>new qR(e);fF.props={};const hF=e=>new pb(e);hF.props={};const dF=e=>new Jw(e);dF.props={};const pF=e=>new Qw(e);pF.props={};const HK=e=>t=>{const n=e(t);return fb(n)?Math.round(n):n};function WK(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){const{domain:a,interpolator:s,round:l}=this.getOptions(),p=t(a.map(r)),m=l?HK(s):s;this.output=hb(m,p,i,r)},n.prototype.invert=void 0}}var $K=function(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},KR;function GK(e){return[e(0),e(1)]}const XK=e=>{const[t,n]=e;return hb(db(0,1),Hw(t,n))};let QR=KR=class extends Ed{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:L_,tickMethod:D_,tickCount:5}}constructor(t){super(t)}clone(){return new KR(this.options)}};QR=KR=$K([WK(GK,XK)],QR);const vF=e=>new QR(e);vF.props={};const mF=e=>new k2(e);mF.props={};function JR({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:a,padding2:s,padding3:l,alpha90:p,alpha65:m,alpha45:y,alpha25:b,alpha10:E,category10:O,category20:P,sizeDefault:I=1,padding:N="auto",margin:z=16}){return{padding:N,margin:z,size:I,color:e,category10:O,category20:P,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,strokeWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,strokeWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:E,labelAlign:"horizontal",labelFill:t,labelOpacity:y,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:y,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:y,titleFill:t,titleOpacity:p,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:p,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[a,a],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:a,colPadding:s,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:y,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:y,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:p,tickStroke:t,tickStrokeOpacity:y},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:p,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:m,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"}}}const YK=JR({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),eP=e=>Pi({},YK,e);eP.props={};const gF=e=>Pi({},eP(),{category10:"category10",category20:"category20"},e);gF.props={};const qK=JR({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"#141414",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),yF=e=>Pi({},qK,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e),_F=e=>Object.assign({},yF(),{category10:"category10",category20:"category20"},e);_F.props={};const KK=JR({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),bF=e=>Pi({},KK,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);bF.props={};const xF=e=>(...t)=>{const n=ry(Object.assign({},{crossPadding:50},e))(...t);return Hk(n,e),n};xF.props=Object.assign(Object.assign({},ry.props),{defaultPosition:"bottom"});function yve(){}const EF=e=>(...t)=>{const n=ry(Object.assign({},{crossPadding:10},e))(...t);return Hk(n,e),n};EF.props=Object.assign(Object.assign({},ry.props),{defaultPosition:"left"});var tP=function(){},QK=function(e,t,n){var r=e,i=Bu(t)?t.split("."):t;return i.forEach(function(a,s){s<i.length-1?(zo(r[a])||(r[a]=(0,Yl.Z)(i[s+1])?[]:{}),r=r[a]):r[a]=n}),e};function JK(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function eQ(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var $v=Uu({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),tQ=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n,{animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonPath:zV(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new Ao({class:$v.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new Ao({class:$v.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,al.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,ce.CR)(eQ(n.map(function(b){var E=b.getBBox(),O=E.width,P=E.height;return[O,P]})).map(function(b){return Math.max.apply(Math,(0,ce.ev)([],(0,ce.CR)(b),!1))}),2),i=r[0],a=r[1],s=this.attributes,l=s.pageWidth,p=l===void 0?i:l,m=s.pageHeight,y=m===void 0?a:m;return{pageWidth:p,pageHeight:y}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,a=this.controllerShape,s=this.pageShape,l=s.pageWidth,p=s.pageHeight;return new Kl(r,i,l+a.width,p)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,a=this,s=a.currPage,l=a.playState,p=a.playWindow,m=a.pageViews;if(l!=="idle"||n<0||m.length<=0||n>=m.length)return null;m[s].setLocalPosition(0,0),this.prepareFollowingPage(n);var y=(0,ce.CR)(this.getFollowingPageDiff(n),2),b=y[0],E=y[1];this.playState="running";var O=me(p,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-b,", ").concat(-E,")")}],i);return F(O,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),O},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var a=n?(i-1+r)%r:(0,al.Z)(i-1,0,r);return this.goTo(a)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var a=n?(i+1)%r:(0,al.Z)(i+1,0,r);return this.goTo(a)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,a=r.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName($v.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?d(r):g(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,a=n.pageInfoGroup,s=this.attributes,l=s.orientation,p=s.controllerPadding,m=a.getBBox(),y=m.width,b=m.height,E=(0,ce.CR)(l==="horizontal"?[-180,0]:[-90,90],2),O=E[0],P=E[1];r.setLocalEulerAngles(O),i.setLocalEulerAngles(P);var I=r.getBBox(),N=I.width,z=I.height,V=i.getBBox(),W=V.width,K=V.height,J=Math.max(N,y,W),oe=l==="horizontal"?{offset:[[0,0],[N/2+p,0],[N+y+p*2,0]],textAlign:"start"}:{offset:[[J/2,-z-p],[J/2,0],[J/2,K+p]],textAlign:"center"},Te=(0,ce.CR)(oe.offset,3),Re=(0,ce.CR)(Te[0],2),We=Re[0],ut=Re[1],ct=(0,ce.CR)(Te[1],2),Ft=ct[0],ft=ct[1],St=(0,ce.CR)(Te[2],2),Mt=St[0],Nt=St[1],tn=oe.textAlign,Yt=a.querySelector("text");Yt&&(Yt.style.textAlign=tn),r.setLocalPosition(We,ut),a.setLocalPosition(Ft,ft),i.setLocalPosition(Mt,Nt)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,a=r.pageViews,s=r.attributes.formatter;a.length<2||((n=this.pageInfoGroup.querySelector($v.pageInfo.class))===null||n===void 0||n.attr("text",s(i+1,a.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,a=this.pageShape,s=a.pageWidth,l=a.pageHeight,p=n<r?-1:1;return i==="horizontal"?[p*s,0]:[0,p*l]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,a=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var s=(0,ce.CR)(this.getFollowingPageDiff(n),2),l=s[0],p=s[1];a[n].setLocalPosition(l,p)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,a=this.pageShape,s=a.pageWidth,l=a.pageHeight,p=this.pageViews.length>=2,m=n.maybeAppendByClassName($v.controller,"g");if(S(m.node(),p),!!p){var y=js(this.attributes,"button"),b=js(this.attributes,"pageNum"),E=(0,ce.CR)(ag(y),2),O=E[0],P=E[1],I=O.size,N=(0,ce._T)(O,["size"]),z=!m.select($v.prevBtnGroup.class).node(),V=m.maybeAppendByClassName($v.prevBtnGroup,"g").styles(P);this.prevBtnGroup=V.node();var W=V.maybeAppendByClassName($v.prevBtn,"path"),K=m.maybeAppendByClassName($v.nextBtnGroup,"g").styles(P);this.nextBtnGroup=K.node();var J=K.maybeAppendByClassName($v.nextBtn,"path");[W,J].forEach(function(Te){Te.styles((0,ce.pi)((0,ce.pi)({},N),{transformOrigin:"center"})),sM(Te.node(),I,!0)});var oe=m.maybeAppendByClassName($v.pageInfoGroup,"g");this.pageInfoGroup=oe.node(),oe.maybeAppendByClassName($v.pageInfo,"text").styles(b),this.updatePageInfo(),m.node().setLocalPosition(s+i,l/2),z&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=so(r);this.renderClipPath(i),this.renderController(i),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=fw(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(Ro.INSERTED,r),this.playWindow.addEventListener(Ro.REMOVED,r)},t}(hr),fv=Uu({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function nQ(e){var t=e.querySelector(fv.marker.class);return t?t.style:{}}var rQ=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new ts({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,a=n.node().getBBox(),s=a.width,l=a.height,p=r.node().getBBox(),m=p.width,y=p.height;return{markerWidth:i,labelWidth:s,valueWidth:m,height:Math.max(i,l,y)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,ce.CR)(rd(n),2),i=r[0],a=r[1],s=this.showValue?a:0,l=i+s;return[i/l,s/l]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,a=r.width,s=this.actualSpace,l=s.markerWidth,p=s.height,m=this.actualSpace,y=m.labelWidth,b=m.valueWidth,E=(0,ce.CR)(this.spacing,2),O=E[0],P=E[1];if(a){var I=a-i-O-P,N=(0,ce.CR)(this.span,2),z=N[0],V=N[1];n=(0,ce.CR)([z*I,V*I],2),y=n[0],b=n[1]}var W=l+y+b+O+P;return{width:W,height:p,markerWidth:l,labelWidth:y,valueWidth:b}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,ce.CR)(rd(n),2),i=r[0],a=r[1];return this.showValue?[i,a]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,a=n.valueWidth,s=n.width,l=n.height,p=(0,ce.CR)(this.spacing,2),m=p[0],y=p[1];return{height:l,width:s,markerWidth:r,labelWidth:i,valueWidth:a,position:[r/2,r+m,r+i+m+y]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=nQ(this.markerGroup.node()),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,s=a===void 0?n.strokeWidth:a,l=r.markerLineWidth,p=l===void 0?n.lineWidth:l,m=r.markerStroke,y=m===void 0?n.stroke:m,b=+(s||p||(y?1:0))*Math.sqrt(2),E=this.markerGroup.node().getBBox(),O=E.width,P=E.height;return(1-b/Math.max(O,P))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,a=js(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(fv.markerGroup,"g").style("zIndex",0),Hr(!!i,this.markerGroup,function(){var s=r.markerGroup.node(),l=s.getElementsByClassName(fv.marker.name)[0],p=i();l?p.nodeName===l.nodeName?(Pj(l,p),so(l).styles(a)):(l.remove(),so(p).attr("className",fv.marker.name).styles(a),s.appendChild(p)):(so(p).attr("className",fv.marker.name).styles(a),s.appendChild(p)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]),sM(r.markerGroup.node(),r.scaleSize,!0)})},t.prototype.renderLabel=function(n){var r=js(this.attributes,"label"),i=r.text,a=(0,ce._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(fv.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(fv.label,function(){return k_(i)}).styles(a)},t.prototype.renderValue=function(n){var r=this,i=js(this.attributes,"value"),a=i.text,s=(0,ce._T)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(fv.valueGroup,"g").style("zIndex",0),Hr(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(fv.value,function(){return k_(a)}).styles(s)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,a=r.height,s=js(this.attributes,"background");this.background=n.maybeAppendByClassName(fv.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(fv.background,"rect").styles((0,ce.pi)({width:i,height:a},s))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,a=n.height,s=(0,ce.CR)(n.position,3),l=s[0],p=s[1],m=s[2],y=a/2;this.markerGroup.styles({x:l,y}),this.labelGroup.styles({x:p,y}),fM(this.labelGroup.select(fv.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({x:m,y}),fM(this.valueGroup.select(fv.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=so(r);this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(hr),Y_=Uu({page:"item-page",navigator:"navigator",item:"item"},"items"),SF=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},iQ=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:tP,mouseenter:tP,mouseleave:tP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,a=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,a=js(this.attributes,"item"),s=r.map(function(l,p){var m=l.id,y=m===void 0?p:m,b=l.label,E=l.value;return{id:"".concat(y),index:p,style:(0,ce.pi)({layout:i,labelText:b,valueText:E},Object.fromEntries(Object.entries(a).map(function(O){var P=(0,ce.CR)(O,2),I=P[0],N=P[1];return[I,Zv(N,[l,p,r])]})))}});return s},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,a=r.width,s=r.rowPadding,l=r.colPadding,p=(0,ce.CR)(this.navigatorShape,1),m=p[0],y=(0,ce.CR)(this.grid,2),b=y[0],E=y[1],O=E*b,P=0;return this.pageViews.children.map(function(I,N){var z,V,W=Math.floor(N/O),K=N%O,J=n.ifHorizontal(E,b),oe=[Math.floor(K/J),K%J];i==="vertical"&&oe.reverse();var Te=(0,ce.CR)(oe,2),Re=Te[0],We=Te[1],ut=(a-m-(E-1)*l)/E,ct=I.getBBox().height,Ft=(0,ce.CR)([0,0],2),ft=Ft[0],St=Ft[1];return i==="horizontal"?(z=(0,ce.CR)([P,Re*(ct+s)],2),ft=z[0],St=z[1],P=We===E-1?0:P+ut+l):(V=(0,ce.CR)([We*(ut+l),P],2),ft=V[0],St=V[1],P=Re===b-1?0:P+ct+s),{page:W,index:N,row:Re,col:We,pageIndex:K,width:ut,height:ct,x:ft,y:St}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,a=n.rowPadding,s=n.colPadding,l=(0,ce.CR)(this.navigatorShape,1),p=l[0],m=(0,ce.CR)(this.grid,2),y=m[0],b=m[1],E=(0,ce.CR)([r-p,i],2),O=E[0],P=E[1],I=(0,ce.CR)([0,0,0,0,0,0,0,0],8),N=I[0],z=I[1],V=I[2],W=I[3],K=I[4],J=I[5],oe=I[6],Te=I[7];return this.pageViews.children.map(function(Re,We){var ut,ct,Ft,ft,St=Re.getBBox(),Mt=St.width,Nt=St.height,tn=oe===0?0:s,Yt=oe+tn+Mt;if(Yt<=O&&SF(K,function(Hn){return Hn<b}))return ut=(0,ce.CR)([oe+tn,Te,Yt],3),N=ut[0],z=ut[1],oe=ut[2],{width:Mt,height:Nt,x:N,y:z,page:V,index:We,pageIndex:W++,row:J,col:K++};ct=(0,ce.CR)([J+1,0,0,Te+Nt+a],4),J=ct[0],K=ct[1],oe=ct[2],Te=ct[3];var fn=Te+Nt;return fn<=P&&SF(J,function(Hn){return Hn<y})?(Ft=(0,ce.CR)([oe,Te,Mt],3),N=Ft[0],z=Ft[1],oe=Ft[2],{width:Mt,height:Nt,x:N,y:z,page:V,index:We,pageIndex:W++,row:J,col:K++}):(ft=(0,ce.CR)([0,0,Mt,0,V+1,0,0,0],8),N=ft[0],z=ft[1],oe=ft[2],Te=ft[3],V=ft[4],W=ft[5],J=ft[6],K=ft[7],{width:Mt,height:Nt,x:N,y:z,page:V,index:We,pageIndex:W++,row:J,col:K++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return lm(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(Y_.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(Y_.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,a=r.mouseenter,s=r.mouseleave;this.flattenPage(n);var l=this.dispatchCustomEvent.bind(this);so(n).selectAll(Y_.item.class).data(this.renderData,function(p){return p.id}).join(function(p){return p.append(function(m){var y=m.style;return new rQ({style:y})}).attr("className",Y_.item.name).on("click",function(){i==null||i(this),l("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),l("itemMouseenter",{item:this})}).on("pointerleave",function(){s==null||s(this),l("itemMouseleave",{item:this})})},function(p){return p.each(function(m){var y=m.style;this.update(y)})},function(p){return p.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,a=r.width,s=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,l=(0,ce.CR)(this.navigatorShape,2),p=l[0],m=l[1];this.navigator.update(i==="grid"?{pageWidth:a-p,pageHeight:s-m}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(JK(this.itemsLayout,"page")).map(function(a){var s=(0,ce.CR)(a,2),l=s[0],p=s[1];return{page:l,layouts:p}}),i=(0,ce.ev)([],(0,ce.CR)(this.navigator.getContainer().children),!1);r.forEach(function(a){var s=a.layouts,l=n.pageViews.appendChild(new Ao({className:Y_.page.name}));s.forEach(function(p){var m=p.x,y=p.y,b=p.index,E=p.width,O=p.height,P=i[b];l.appendChild(P),QK(P,"__layout__",p),P.update({x:m,y,width:E,height:O})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=js(this.attributes,"nav"),a=zn({orientation:r},i),s=this;return n.selectAll(Y_.navigator.class).data(["nav"]).join(function(l){return l.append(function(){return new tQ({style:a})}).attr("className",Y_.navigator.name).each(function(){s.navigator=this})},function(l){return l.each(function(){this.update(a)})},function(l){return l.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(so(r));this.renderItems(a.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new Ku(n,{detail:r});this.dispatchEvent(i)},t}(hr),aQ=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,XV)||this}return t.prototype.renderTitle=function(n,r,i){var a=this.attributes,s=a.showTitle,l=a.titleText,p=js(this.attributes,"title"),m=(0,ce.CR)(ag(p),2),y=m[0],b=m[1];this.titleGroup=n.maybeAppendByClassName(Bh.titleGroup,"g").styles(b);var E=(0,ce.pi)((0,ce.pi)({width:r,height:i},y),{text:s?l:""});this.title=this.titleGroup.maybeAppendByClassName(Bh.title,function(){return new yk({style:E})}).update(E)},t.prototype.renderItems=function(n,r){var i=r.x,a=r.y,s=r.width,l=r.height,p=js(this.attributes,"title",!0),m=(0,ce.CR)(ag(p),2),y=m[0],b=m[1],E=(0,ce.pi)((0,ce.pi)({},y),{width:s,height:l,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Bh.itemsGroup,"g").styles((0,ce.pi)({x:i,y:a},b));var O=this;this.itemsGroup.selectAll(Bh.items.class).data(["items"]).join(function(P){return P.append(function(){return new iQ({style:E})}).attr("className",Bh.items.name).each(function(){O.items=so(this)})},function(P){return P.update(E)},function(P){return P.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,a=r.y;this.itemsGroup.node().setLocalPosition(i,a)}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,a=n.height;return r?this.title.node().getAvailableSpace():new Kl(0,0,i,a)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),a=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!a?e.prototype.getBBox.call(this):Qj(i,a)},t.prototype.render=function(n,r){var i=n.width,a=n.height,s=so(r);this.renderTitle(s,i,a),this.renderItems(s,this.availableSpace),this.adjustLayout()},t}(hr);function nE(e){if(S_(e)){var t=e;return t[t.length-1]}}var oQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sQ(e,t){const n=sm(e,"shape"),r=sm(e,"color"),i=n?n.clone():null,a=[];for(const[l,p]of t){const m=l.type,b=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:p.data).map((E,O)=>{var P;return i?i.map(E||"point"):((P=l==null?void 0:l.style)===null||P===void 0?void 0:P.shape)||p.defaultShape||"point"});typeof m=="string"&&a.push([m,b])}if(a.length===0)return["point",["point"]];if(a.length===1||!n)return a[0];const{range:s}=n.getOptions();return a.map(([l,p])=>{let m=0;for(let y=0;y<a.length;y++){const b=s[y%s.length];p[y]===b&&m++}return[m/p.length,[l,p]]}).sort((l,p)=>p[0]-l[0])[0][1]}function uQ(e,t){const{scales:n,library:r,markState:i}=t,[a,s]=sQ(n,i),{itemMarker:l,itemMarkerSize:p}=e,m=(E,O)=>{var P,I,N;const z=((N=(I=(P=r[`mark.${a}`])===null||P===void 0?void 0:P.props)===null||I===void 0?void 0:I.shape[E])===null||N===void 0?void 0:N.props.defaultMarker)||nE(E.split(".")),V=typeof p=="function"?p(O):p;return()=>bq(z,{color:O.color})(0,0,V)},y=E=>`${s[E]}`;return sm(n,"shape")&&!l?(E,O)=>m(y(O),E):typeof l=="function"?(E,O)=>{const P=l(E.id,O);return typeof P=="string"?m(P,E):P}:(E,O)=>m(l||y(O),E)}function lQ(e){const t=sm(e,"opacity");if(t){const{range:n}=t.getOptions();return(r,i)=>n[i]}}function cQ(e,t){const n=sm(e,"size");return n instanceof zT?n.map(NaN)*2:t}function fQ(e,t){const{labelFormatter:n=E=>`${E}`}=e,{scales:r,theme:i}=t,a=i.legendCategory.itemMarkerSize,s=cQ(r,a),l={itemMarker:uQ(Object.assign(Object.assign({},e),{itemMarkerSize:s}),t),itemMarkerSize:s,itemMarkerOpacity:lQ(r)},p=typeof n=="string"?rm(n):n,m=sm(r,"color"),y=nV(r),b=m?E=>m.map(E):()=>t.theme.color;return Object.assign(Object.assign({},l),{data:y.map(E=>({id:E,label:p(E),color:b(E)}))})}function hQ(e,t,n){const{position:r}=t;if(r==="center"){const{bbox:s}=e,{width:l,height:p}=s;return{width:l,height:p}}const{width:i,height:a}=Zk(e,t,n);return{width:i,height:a}}const nP=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:a,size:s,title:l,cols:p,itemMarker:m}=e,y=oQ(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:b}=y;return E=>{const{value:O,theme:P}=E,{bbox:I}=O,{width:N,height:z}=hQ(O,e,nP),V=Uk(a,n),W=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(a)?"vertical":"horizontal",width:N,height:z,layout:p!==void 0?"grid":"flex"},p!==void 0&&{gridCol:p}),b!==void 0&&{gridRow:b}),{titleText:Xw(l)}),fQ(e,E)),{legendCategory:K={}}=P,J=Yw(Object.assign({},K,W,y)),oe=new JZ({style:Object.assign(Object.assign({x:I.x,y:I.y,width:I.width,height:I.height},V),{subOptions:J})});return oe.appendChild(new aQ({className:"legend-category",style:J})),oe}};nP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const wF=e=>()=>new Ao;wF.props={};var dQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function TF(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}const pQ=QZ({render(e,t){const{width:n,title:r,subtitle:i,spacing:a=2,align:s="left"}=e,l=dQ(e,["width","title","subtitle","spacing","align"]),p=ja(l,"title"),m=ja(l,"subtitle"),b=zk(t,".title","text").attr("className","title").call(Po,Object.assign(Object.assign(Object.assign({},TF(0,0,n,s)),{fontSize:14,textBaseline:"top",text:r}),p)).node().getLocalBounds();zk(t,".sub-title","text").attr("className","sub-title").call(E=>{if(!i)return E.node().remove();E.node().attr(Object.assign(Object.assign(Object.assign({},TF(0,b.max[1]+a,n,s)),{fontSize:12,textBaseline:"top",text:i}),m))})}}),AF=e=>({value:t,theme:n})=>{const{x:r,y:i,width:a,height:s}=t.bbox;return new pQ({style:Pi({},n.title,Object.assign({x:r,y:i,width:a,height:s},e))})};AF.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var rP=function(e){if(typeof e!="object"||e===null)return e;var t;if(ai(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=rP(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=rP(e[i]):t[i]=e[i]}return t},iP=rP,vQ=function(e){(0,ce.ZT)(t,e);function t(n){var r=this,i=n.style,a=(0,ce._T)(n,["style"]);return r=e.call(this,Pi({},{type:"column"},(0,ce.pi)({style:i},a)))||this,r.columnsGroup=new Ao({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes.columns;so(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(r){return r.append("rect").attr("className","column").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.update=function(n){this.attr(zn({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(Fn),mQ=function(e){(0,ce.ZT)(t,e);function t(n){var r=this,i=n.style,a=(0,ce._T)(n,["style"]);return r=e.call(this,Pi({},{type:"lines"},(0,ce.pi)({style:i},a)))||this,r.linesGroup=r.appendChild(new Ao),r.areasGroup=r.appendChild(new Ao),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas;r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(zn({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){so(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){so(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(Fn);function gQ(e,t,n,r){var i,a=[],s=!!r,l,p,m=[1/0,1/0],y=[-1/0,-1/0],b,E,O;if(s){i=(0,ce.CR)(r,2),m=i[0],y=i[1];for(var P=0,I=e.length;P<I;P+=1){var N=e[P];m=ng(m,N),y=rg(y,N)}}for(var P=0,z=e.length;P<z;P+=1){var N=e[P];if(P===0&&!n)O=N;else if(P===z-1&&!n)E=N,a.push(O),a.push(E);else{var V=[P?P-1:z-1,P-1][n?0:1];l=e[V],p=e[n?(P+1)%z:P+1];var W=[0,0];W=w2(p,l),W=A0(W,t);var K=P_(N,l),J=P_(N,p),oe=K+J;oe!==0&&(K/=oe,J/=oe);var Te=A0(W,-K),Re=A0(W,J);E=R_(N,Te),b=R_(N,Re),b=ng(b,rg(p,N)),b=rg(b,ng(p,N)),Te=w2(b,N),Te=A0(Te,-K/J),E=R_(N,Te),E=ng(E,rg(l,N)),E=rg(E,ng(l,N)),Re=w2(N,E),Re=A0(Re,J/K),b=R_(N,Re),s&&(E=rg(E,m),E=ng(E,y),b=rg(b,m),b=ng(b,y)),a.push(O),a.push(E),O=b}}return n&&a.push(a.shift()),a}function yQ(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,a=[],s=0,l=e.length;s<l;s+=2)a.push([e[s],e[s+1]]);for(var p=gQ(a,.4,i,n),m=a.length,y=[],b,E,O,s=0;s<m-1;s+=1)b=p[s*2],E=p[s*2+1],O=a[s+1],y.push(["C",b[0],b[1],E[0],E[1],O[0],O[1]]);return i&&(b=p[m],E=p[m+1],r=(0,ce.CR)(a,1),O=r[0],y.push(["C",b[0],b[1],E[0],E[1],O[0],O[1]])),y}function _Q(e,t){var n,r=t.x,i=t.y,a=(0,ce.CR)(i.getOptions().range||[0,0],2),s=a[0],l=a[1];return l>s&&(n=(0,ce.CR)([s,l],2),l=n[0],s=n[1]),e.map(function(p){var m=p.map(function(y,b){return[r.map(b),(0,al.Z)(i.map(y),l,s)]});return m})}function rE(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,a){return(0,ce.ev)([a===n?"M":"L"],(0,ce.CR)(i),!1)});return t?r.reverse():r}function VT(e,t){if(t===void 0&&(t=!1),e.length<=2)return rE(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var a=t?e[r-i-1]:e[i];E2(a,n.slice(-2))||n.push.apply(n,(0,ce.ev)([],(0,ce.CR)(a),!1))}var s=yQ(n,!1);return t?s.unshift((0,ce.ev)(["M"],(0,ce.CR)(e[r-1]),!1)):s.unshift((0,ce.ev)(["M"],(0,ce.CR)(e[0]),!1)),s}function aP(e,t,n){var r=iP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function bQ(e,t,n,r){return e.map(function(i){return aP(t?VT(i):rE(i),n,r)})}function xQ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var a=e[i],s=rE(a),l=void 0;if(i===0)l=aP(s,t,n);else{var p=e[i-1],m=rE(p,!0);m[0][0]="L",l=(0,ce.ev)((0,ce.ev)((0,ce.ev)([],(0,ce.CR)(s),!1),(0,ce.CR)(m),!1),[["Z"]],!1)}r.push(l)}return r}function EQ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var a=e[i],s=VT(a),l=void 0;if(i===0)l=aP(s,t,n);else{var p=e[i-1],m=VT(p,!0),y=a[0];m[0][0]="L",l=(0,ce.ev)((0,ce.ev)((0,ce.ev)([],(0,ce.CR)(s),!1),(0,ce.CR)(m),!1),[(0,ce.ev)(["M"],(0,ce.CR)(y),!1),["Z"]],!1)}r.push(l)}return r}var SQ=function(e,t){if(ai(e)){for(var n,r=1/0,i=0;i<e.length;i++){var a=e[i],s=hh(t)?t(a):a[t];s<r&&(n=a,r=s)}return n}},wQ=function(e,t){if(ai(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var a=e[i],s=hh(t)?t(a):a[t];s>r&&(n=a,r=s)}return n}};function CF(e){return e.length===0?[0,0]:[Ki(SQ(e,function(t){return Ki(t)||0})),ca(wQ(e,function(t){return ca(t)||0}))]}function OF(e){for(var t=iP(e),n=t[0].length,r=(0,ce.CR)([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],s=0;s<t.length;s+=1)for(var l=t[s],p=0;p<n;p+=1)l[p]>=0?(l[p]+=i[p],i[p]=l[p]):(l[p]+=a[p],a[p]=l[p]);return t}var TQ=function(e){(0,ce.ZT)(t,e);function t(n){return e.call(this,n,{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=iP(n);return(0,Yl.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?OF(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,ce.CR)(n.getOptions().domain||[0,0],2),i=r[0],a=r[1];return a<0?n.map(a):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,a=r.isStack,s=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var l=js(this.attributes,"area"),p=js(this.attributes,"line"),m=this.containerShape.width,y=this.data;if(y[0].length===0)return{lines:[],areas:[]};var b=this.scales,E=b.x,O=b.y,P=_Q(y,{type:"line",x:E,y:O}),I=[];if(l){var N=this.baseline;a?I=s?EQ(P,m,N):xQ(P,m,N):I=bQ(P,s,m,N)}return{lines:P.map(function(z,V){return(0,ce.pi)({stroke:n.getColor(V),path:s?VT(z):rE(z)},p)}),areas:I.map(function(z,V){return(0,ce.pi)({path:z,fill:n.getColor(V)},l)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=js(this.attributes,"column"),i=this.attributes,a=i.isStack,s=i.type,l=i.scale;if(s!=="column")throw new Error("columnsStyle can only be used in column type");var p=this.containerShape.height,m=this.rawData;if(!m)return{columns:[]};a&&(m=OF(m));var y=this.createScales(m),b=y.x,E=y.y,O=(0,ce.CR)(CF(m),2),P=O[0],I=O[1],N=new Ed({domain:[0,I-(P>0?0:P)],range:[0,p*l]}),z=b.getBandWidth(),V=this.rawData;return{columns:m.map(function(W,K){return W.map(function(J,oe){var Te=z/m.length,Re=function(){return{x:b.map(oe)+Te*K,y:J>=0?E.map(J):E.map(0),width:Te,height:N.map(Math.abs(J))}},We=function(){return{x:b.map(oe),y:E.map(J),width:z,height:N.map(V[K][oe])}};return(0,ce.pi)((0,ce.pi)({fill:n.getColor(K)},r),a?We():Re())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){af(r,".container","rect").attr("className","container").node();var i=n.type,a="spark".concat(i),s=i==="line"?this.linesStyle:this.columnsStyle;so(r).selectAll(".spark").data([i]).join(function(l){return l.append(function(p){return p==="line"?new mQ({className:a,style:s}):new vQ({className:a,style:s})}).attr("className","spark ".concat(a))},function(l){return l.update(s)},function(l){return l.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return ai(r)?r[n%r.length]:hh(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,a=this.attributes,s=a.type,l=a.scale,p=a.range,m=p===void 0?[]:p,y=a.spacing,b=this.containerShape,E=b.width,O=b.height,P=(0,ce.CR)(CF(n),2),I=P[0],N=P[1],z=new Ed({domain:[(r=m[0])!==null&&r!==void 0?r:I,(i=m[1])!==null&&i!==void 0?i:N],range:[O,O*(1-l)]});return s==="line"?{type:s,x:new Ed({domain:[0,n[0].length-1],range:[0,E]}),y:z}:{type:s,x:new fy({domain:n[0].map(function(V,W){return W}),range:[0,E],paddingInner:y,paddingOuter:y/2,align:.5}),y:z}},t.tag="sparkline",t}(hr),MF=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n,(0,ce.pi)((0,ce.pi)((0,ce.pi)({animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},om(Qk,"handle")),om(qk,"handleIcon")),om(Kk,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(a){a.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(Kw(a));var s=r.availableSpace,l=s.x,p=s.y,m=r.getBBox(),y=m.x,b=m.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([l,p])-r.getOrientVal([+y,+b])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var a=r.attributes,s=a.slidable,l=a.brushable,p=a.type;i.stopPropagation();var m=r.getOrientVal(Kw(i)),y=m-r.prevPos;if(y){var b=r.getRatio(y);switch(r.target){case"start":s&&r.setValuesOffset(b);break;case"end":s&&r.setValuesOffset(0,b);break;case"selection":s&&r.setValuesOffset(b,b);break;case"track":if(!l)return;r.selectionWidth+=b,p==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=m}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var a=r.attributes,s=a.onChange,l=a.type,p=l==="range"?i:i[1],m=l==="range"?r.getValues():r.getValues()[1],y=new Ku("valuechange",{detail:{oldValue:p,value:m}});r.dispatchEvent(y),s==null||s(m)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=js(this.attributes,"sparkline");return(0,ce.pi)((0,ce.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,a=(0,ce.CR)(this.getOrientVal([[r,i],[i,r]]),2),s=a[0],l=a[1];return{width:s,height:l}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.padding,r=(0,ce.CR)(rd(n),4),i=r[0],a=r[1],s=r[2],l=r[3],p=this.shape,m=p.width,y=p.height;return{x:l,y:i,width:m-(l+a),height:y-(i+s)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(um.selection.class).each(function(i,a){Ot(this,r[a],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Ot(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Ot(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,a=this.clampValues(n);this.attributes.values=a,this.setValues(a),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=js(this.attributes,"track");this.trackShape=so(n).maybeAppendByClassName(um.track,"rect").styles((0,ce.pi)((0,ce.pi)({},this.shape),r))},t.prototype.renderBrushArea=function(n){var r=this.attributes.brushable;this.brushArea=so(n).maybeAppendByClassName(um.brushArea,"rect").styles((0,ce.pi)({fill:"transparent",cursor:r?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes.orientation,a=so(n).maybeAppendByClassName(um.sparklineGroup,"g");Hr(i==="horizontal",a,function(s){var l=r.sparklineStyle;s.maybeAppendByClassName(um.sparkline,function(){return new TQ({style:l})}).update(l)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,a=i.showHandle,s=i.type,l=s==="range"?["start","end"]:["end"],p=a?l:[],m=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(um.handle.class).data(p.map(function(y){return{type:y}}),function(y){return y.type}).join(function(y){return y.append(function(b){var E=b.type;return new Jk({style:n.getHandleStyle(E)})}).each(function(b){var E=b.type;this.attr("class","".concat(um.handle.name," ").concat(E,"-handle"));var O="".concat(E,"Handle");m[O]=this,this.addEventListener("pointerdown",m.onDragStart(E))})},function(y){return y.each(function(b){var E=b.type;this.update(m.getHandleStyle(E))})},function(y){return y.each(function(b){var E=b.type,O="".concat(E,"Handle");m[O]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.type,a=r.selectionType;this.foregroundGroup=so(n).maybeAppendByClassName(um.foreground,"g");var s=js(this.attributes,"selection"),l=function(m){return m.style("visibility",function(y){return y.show?"visible":"hidden"}).style("cursor",function(y){return a==="select"?"grab":a==="invert"?"crosshair":"default"}).styles(s)},p=this;this.foregroundGroup.selectAll(um.selection.class).data(i==="value"?[]:this.calcSelectionArea().map(function(m,y){return{style:(0,ce.pi)({},m),index:y,show:a==="select"?y===1:y!==1}}),function(m){return m.index}).join(function(m){return m.append("rect").attr("className",um.selection.name).call(l).each(function(y,b){var E=this;b===1?(p.selectionShape=so(this),this.on("pointerdown",function(O){E.attr("cursor","grabbing"),p.onDragStart("selection")(O)}),p.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),p.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),p.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){E.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){E.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){E.attr("cursor","pointer")})):this.on("pointerdown",p.onDragStart("track"))})},function(m){return m.call(l)},function(m){return m.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var a=(0,ce.CR)(this.range,2),s=a[0],l=a[1],p=(0,ce.CR)(this.getValues().map(function(N){return qw(N,r)}),2),m=p[0],y=p[1],b=Array.isArray(n)?n:[m,n!=null?n:y],E=(0,ce.CR)((b||[m,y]).map(function(N){return qw(N,r)}),2),O=E[0],P=E[1];if(this.attributes.type==="value")return[0,(0,al.Z)(P,s,l)];O>P&&(i=(0,ce.CR)([P,O],2),O=i[0],P=i[1]);var I=P-O;return I>l-s?[s,l]:O<s?m===s&&y===P?[s,P]:[s,I+s]:P>l?y===l&&m===O?[O,l]:[l-I,l]:[O,P]},t.prototype.calcSelectionArea=function(n){var r=(0,ce.CR)(this.clampValues(n),2),i=r[0],a=r[1],s=this.availableSpace,l=s.x,p=s.y,m=s.width,y=s.height;return this.getOrientVal([[{y:p,height:y,x:l,width:i*m},{y:p,height:y,x:i*m+l,width:(a-i)*m},{y:p,height:y,x:a*m,width:(1-a)*m}],[{x:l,width:m,y:p,height:i*y},{x:l,width:m,y:i*y+p,height:(a-i)*y},{x:l,width:m,y:a*y,height:(1-a)*y}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,s=i.y,l=i.width,p=i.height,m=(0,ce.CR)(this.clampValues(),2),y=m[0],b=m[1],E=n==="start"?-r:r,O=(n==="start"?y:b)*this.getOrientVal([l,p])+E;return{x:a+this.getOrientVal([O,l/2]),y:s+this.getOrientVal([p/2,O])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transform:"rotate(90)",textAlign:"start"}:n==="end"?{transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,a=i.type,s=i.orientation,l=i.formatter,p=i.autoFitLabel,m=js(this.attributes,"handle"),y=js(m,"label"),b=m.spacing,E=this.getHandleSize(),O=this.clampValues(),P=n==="start"?O[0]:O[1],I=l(P),N=new Xa({style:(0,ce.pi)((0,ce.pi)((0,ce.pi)({},y),this.inferTextStyle(n)),{text:I})}),z=N.getBBox(),V=z.width,W=z.height;if(N.destroy(),!p){if(a==="value")return{text:I,x:0,y:-W-b};var K=b+E+(s==="horizontal"?V/2:0);return r={text:I},r[s==="horizontal"?"x":"y"]=n==="start"?-K:K,r}var J=0,oe=0,Te=this.availableSpace,Re=Te.width,We=Te.height,ut=this.calcSelectionArea()[1],ct=ut.x,Ft=ut.y,ft=ut.width,St=ut.height,Mt=b+E;if(s==="horizontal"){var Nt=Mt+V/2;if(n==="start"){var tn=ct-Mt-V;J=tn>0?-Nt:Nt}else{var Yt=Re-ct-ft-Mt>V;J=Yt?Nt:-Nt}}else{var fn=Mt,Hn=W+Mt;n==="start"?oe=Ft-E>W?-Hn:fn:oe=We-(Ft+St)-E>W?Hn:-fn}return{x:J,y:oe,text:I}},t.prototype.getHandleLabelStyle=function(n){var r=js(this.attributes,"handleLabel");return(0,ce.pi)((0,ce.pi)((0,ce.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=js(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return(0,ce.pi)({cursor:i,shape:n,size:a},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.showLabel,a=r.showLabelOnInteraction,s=r.orientation,l=this.calcHandlePosition(n),p=this.calcHandleText(n),m=i;return!i&&a&&(this.target?m=!0:m=!1),(0,ce.pi)((0,ce.pi)((0,ce.pi)((0,ce.pi)({},om(this.getHandleIconStyle(),"icon")),om((0,ce.pi)((0,ce.pi)({},this.getHandleLabelStyle(n)),p),"label")),l),{orientation:s,showLabel:m,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,a=n.height;return r||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=(0,ce.CR)(n,2),i=r[0],a=r[1],s=this.attributes.orientation;return s==="horizontal"?i:a},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=this.attributes.type,s=(0,ce.CR)(this.getValues(),2),l=s[0],p=s[1],m=a==="range"?n:0,y=[l+m,p+r].sort();i?this.setValues(y):this.innerSetValues(y,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,a=r.height;return n/this.getOrientVal([i,a])},t.prototype.dispatchCustomEvent=function(n,r,i){var a=this;n.on(r,function(s){s.stopPropagation(),a.dispatchEvent(new Ku(i,{detail:s}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,a=n.deltaY,s=a||i,l=this.getRatio(s);this.setValuesOffset(l,l,!0)}},t.tag="slider",t}(hr);function AQ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Db(e){let t,n,r;e.length!==2?(t=Gc,n=(l,p)=>Gc(e(l),p),r=(l,p)=>e(l)-p):(t=e===Gc||e===AQ?e:CQ,n=e,r=e);function i(l,p,m=0,y=l.length){if(m<y){if(t(p,p)!==0)return y;do{const b=m+y>>>1;n(l[b],p)<0?m=b+1:y=b}while(m<y)}return m}function a(l,p,m=0,y=l.length){if(m<y){if(t(p,p)!==0)return y;do{const b=m+y>>>1;n(l[b],p)<=0?m=b+1:y=b}while(m<y)}return m}function s(l,p,m=0,y=l.length){const b=i(l,p,m,y-1);return b>m&&r(l[b-1],p)>-r(l[b],p)?b-1:b}return{left:i,center:s,right:a}}function CQ(){return 0}function oP(e){return e===null?NaN:+e}function*OQ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const RF=Db(Gc),MQ=RF.right,RQ=RF.left,PQ=Db(oP).center;var IQ=MQ;function kQ(e,t){return Array.from(t,n=>e[n])}function lg(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const s of t){const l=iE(s[i],s[a]);if(l)return l}})):(n=e.map(n),r.sort((i,a)=>iE(n[i],n[a]))),kQ(e,r)}return e.sort(PF(n))}function PF(e=Gc){if(e===Gc)return iE;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function iE(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function LQ(e,t,n){return Math.min(n,Math.max(t,e))}function aE(e){return!!e.getBandWidth}function Nb(e,t,n){if(!aE(e))return e.invert(t);const{adjustedRange:r}=e,{domain:i}=e.getOptions(),a=n?-1:0,s=e.getStep(),l=n?r:r.map(y=>y+s),p=RQ(l,t),m=LQ(p+a,0,i.length-1);return i[m]}function py(e,t,n){if(!t)return e.getOptions().domain;if(!aE(e)){const p=lg(t);if(!n)return p;const[m]=p,{range:y}=e.getOptions(),[b,E]=y,O=b>E?-1:1,P=e.invert(e.map(m)+O*n);return[m,P]}const{domain:r}=e.getOptions(),i=t[0],a=r.indexOf(i);if(n){const p=a+Math.round(r.length*n);return r.slice(a,p)}const s=t[t.length-1],l=r.indexOf(s);return r.slice(a,l+1)}function HT(e,t,n,r,i,a){const{x:s,y:l}=i,p=(O,P)=>{const[I,N]=a.invert(O);return[Nb(s,I,P),Nb(l,N,P)]},m=p([e,t],!0),y=p([n,r],!1),b=py(s,[m[0],y[0]]),E=py(l,[m[1],y[1]]);return[b,E]}function WT(e,t){const[n,r]=e,i=a=>a.getStep?a.getStep():0;return[t.map(n),t.map(r)+i(t)]}function DQ(e,t,n){const{x:r,y:i}=t,[a,s]=e,l=WT(a,r),p=WT(s,i),m=[l[0],p[0]],y=[l[1],p[1]],[b,E]=n.map(m),[O,P]=n.map(y);return[b,E,O,P]}var NQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function BQ(e,t,n){const{x:r,y:i,width:a,height:s}=e;if(t==="left")return[r+a-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+s-n]}const oE=e=>{const{orientation:t,labelFormatter:n,size:r,style:i={},position:a}=e,s=NQ(e,["orientation","labelFormatter","size","style","position"]);return l=>{var p;const{scales:[m],value:y,theme:b,coordinate:E}=l,{bbox:O}=y,{width:P,height:I}=O,{slider:N={}}=b,z=((p=m.getFormatter)===null||p===void 0?void 0:p.call(m))||(Re=>Re+""),V=typeof n=="string"?rm(n):n,W=t==="horizontal",K=Ol(E)&&W,{trackSize:J=N.trackSize}=i,[oe,Te]=BQ(O,a,J);return new MF({className:"slider",style:Object.assign({},N,Object.assign(Object.assign({x:oe,y:Te,trackLength:W?P:I,orientation:t,formatter:Re=>{const We=V||z,ut=K?1-Re:Re,ct=Nb(m,ut,!0);return We(ct)},sparklineData:zQ(e,l)},i),s))})}};function FQ(e,t){const[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").map(([i])=>{const{encode:a,slider:s}=i;if(s!=null&&s.x&&Object.keys(s.x).length===0){const l=p=>{const m=a[p];return[p,m?m.value:void 0]};return Object.fromEntries(t.map(l))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,a,s)=>(i[a]=i[a]||[],i[a].push(n.y[s]),i),{});return Object.values(r)}function zQ(e,t){const{markState:n}=t;return ai(e.sparklineData)?e.sparklineData:FQ(n,["y","series"])}oE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const IF=e=>oE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));IF.props=Object.assign(Object.assign({},oE.props),{defaultPosition:"bottom"});const kF=e=>oE(Object.assign(Object.assign({},e),{orientation:"vertical"}));kF.props=Object.assign(Object.assign({},oE.props),{defaultPosition:"left"});var UQ=function(e){(0,ce.ZT)(t,e);function t(n){var r=e.call(this,n,{isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var a=r.attributes.value;if(i!==a){var s={detail:{oldValue:i,value:a}};r.dispatchEvent(new Ku("scroll",s)),r.dispatchEvent(new Ku("valuechange",s))}},r.onTrackClick=function(i){var a=r.attributes.slidable;if(a){var s=(0,ce.CR)(r.getLocalPosition(),2),l=s[0],p=s[1],m=(0,ce.CR)(r.padding,4),y=m[0],b=m[3],E=r.getOrientVal([l+b,p+y]),O=r.getOrientVal(Kw(i)),P=(O-E)/r.trackLength;r.setValue(P,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new Ku("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new Ku("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new Ku("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new Ku("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return rd(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,ce.CR)(this.range,2),i=r[0],a=r[1];return(0,al.Z)(n,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,a=i===void 0?r:i;return a},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,ce.CR)(this.padding,4),a=i[0],s=i[1],l=i[2],p=i[3],m=(0,ce.CR)(this.getOrientVal([[r,n],[n,r]]),2),y=m[0],b=m[1];return{x:p,y:a,width:+y-(p+s),height:+b-(a+l)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var a=this.availableSpace,s=a.width,l=a.height;return i||this.getOrientVal([l,s])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,a=r.contentLength,s=i/a,l=(0,ce.CR)(this.range,2),p=l[0],m=l[1],y=n*(m-p-s);return[y,y+s]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.orientation,a=r.trackSize,s=r.padding,l=r.slidable,p=js(this.attributes,"track"),m=js(this.attributes,"thumb"),y=(0,ce.pi)((0,ce.pi)({brushable:!1,orientation:i,padding:s,selectionRadius:this.thumbRadius,showHandle:!1,slidable:l,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:a,values:this.getValues()},om(p,"track")),om(m,"selection"));this.slider=so(n).maybeAppendByClassName("scrollbar",function(){return new MF({style:y})}).update(y).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,a=(0,ce.CR)(this.range,2),s=a[0],l=a[1];this.slider.setValues(this.getValues((0,al.Z)(n,s,l)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(hr),jQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const sE=e=>{const{orientation:t,labelFormatter:n,style:r}=e,i=jQ(e,["orientation","labelFormatter","style"]);return({scales:[a],value:s,theme:l})=>{const{bbox:p}=s,{x:m,y,width:b,height:E}=p,{scrollbar:O={}}=l,{ratio:P,range:I}=a.getOptions(),N=t==="horizontal"?b:E,z=N/P,[V,W]=I,K=W>V?0:1;return new UQ({className:"g2-scrollbar",style:Object.assign({},O,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:m,y,trackLength:N,value:K}),i),{orientation:t,contentLength:z,viewportLength:N}))})}};sE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const LF=e=>sE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));LF.props=Object.assign(Object.assign({},sE.props),{defaultPosition:"bottom"});const DF=e=>sE(Object.assign(Object.assign({},e),{orientation:"vertical"}));DF.props=Object.assign(Object.assign({},sE.props),{defaultPosition:"left"});const sP=(e,t)=>{const{coordinate:r}=t;return(i,a,s)=>{const[l]=i,{transform:p="",fillOpacity:m=1,strokeOpacity:y=1,opacity:b=1}=l.style,[E,O]=Ol(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],P=[{transform:`${p} ${O}`.trimStart(),transformOrigin:E,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${p} ${O}`.trimStart(),transformOrigin:E,fillOpacity:m,strokeOpacity:y,opacity:b,offset:.01},{transform:`${p} scale(1, 1)`.trimStart(),transformOrigin:E,fillOpacity:m,strokeOpacity:y,opacity:b}];return l.animate(P,Object.assign(Object.assign({},s),e))}},ZQ=(e,t)=>{const{coordinate:r}=t;return(i,a,s)=>{const[l]=i,{transform:p="",fillOpacity:m=1,strokeOpacity:y=1,opacity:b=1}=l.style,[E,O]=Ol(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],P=[{transform:`${p} scale(1, 1)`.trimStart(),transformOrigin:E},{transform:`${p} ${O}`.trimStart(),transformOrigin:E,fillOpacity:m,strokeOpacity:y,opacity:b,offset:.99},{transform:`${p} ${O}`.trimStart(),transformOrigin:E,fillOpacity:0,strokeOpacity:0,opacity:0}];return l.animate(P,Object.assign(Object.assign({},s),e))}},NF=(e,t)=>{const{coordinate:r}=t;return Us.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Wa.NUMBER}),(i,a,s)=>{const[l]=i,p=y=>{const{__data__:b,style:E}=y,{radius:O=0,inset:P=0,fillOpacity:I=1,strokeOpacity:N=1,opacity:z=1}=E,{points:V,y:W,y1:K}=b,J=N_(r,V,[W,K]),{innerRadius:oe,outerRadius:Te}=J,Re=wT().cornerRadius(O).padAngle(P*Math.PI/180),We=new pu({}),ut=r.getCenter(),ct=St=>{We.attr({d:Re(St),transform:`translate(${ut[0]}, ${ut[1]})`});const Mt=Tx(We);return We.style.transform="",Mt},Ft=[{scaleInYRadius:oe+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:oe+1e-4,fillOpacity:I,strokeOpacity:N,opacity:z,offset:.01},{scaleInYRadius:Te,fillOpacity:I,strokeOpacity:N,opacity:z}],ft=y.animate(Ft,Object.assign(Object.assign({},s),e));return ft.onframe=function(){y.style.path=ct(Object.assign(Object.assign({},J),{outerRadius:Number(y.style.scaleInYRadius)}))},ft.onfinish=function(){y.style.path=ct(Object.assign(Object.assign({},J),{outerRadius:Te}))},ft},m=y=>{const{style:b}=y,{transform:E="",fillOpacity:O=1,strokeOpacity:P=1,opacity:I=1}=b,[N,z]=Ol(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],V=[{transform:`${E} ${z}`.trimStart(),transformOrigin:N,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${E} ${z}`.trimStart(),transformOrigin:N,fillOpacity:O,strokeOpacity:P,opacity:I,offset:.01},{transform:`${E} scale(1, 1)`.trimStart(),transformOrigin:N,fillOpacity:O,strokeOpacity:P,opacity:I}];return y.animate(V,Object.assign(Object.assign({},s),e))};return fl(r)?p(l):m(l)}},VQ=(e,t)=>{const{coordinate:r}=t;return(i,a,s)=>{const[l]=i,{transform:p="",fillOpacity:m=1,strokeOpacity:y=1,opacity:b=1}=l.style,[E,O]=Ol(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],P=[{transform:`${p} scale(1, 1)`.trimStart(),transformOrigin:E},{transform:`${p} ${O}`.trimStart(),transformOrigin:E,fillOpacity:m,strokeOpacity:y,opacity:b,offset:.99},{transform:`${p} ${O}`.trimStart(),transformOrigin:E,fillOpacity:0,strokeOpacity:0,opacity:0}];return l.animate(P,Object.assign(Object.assign({},s),e))}},BF=(e,t)=>{Us.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Wa.NUMBER});const{coordinate:r}=t;return(i,a,s)=>{const[l]=i;if(!fl(r))return sP(e,t)(i,a,s);const p=r.getCenter(),{__data__:m,style:y}=l,{radius:b=0,inset:E=0,fillOpacity:O=1,strokeOpacity:P=1,opacity:I=1}=y,{points:N,y:z,y1:V}=m,W=wT().cornerRadius(b).padAngle(E*Math.PI/180),K=N_(r,N,[z,V]),{startAngle:J,endAngle:oe}=K,Te=new pu({}),Re=ct=>{Te.attr({d:W(ct),transform:`translate(${p[0]}, ${p[1]})`});const Ft=Tx(Te);return Te.style.transform="",Ft},We=[{waveInArcAngle:J+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:J+1e-4,fillOpacity:O,strokeOpacity:P,opacity:I,offset:.01},{waveInArcAngle:oe,fillOpacity:O,strokeOpacity:P,opacity:I}],ut=l.animate(We,Object.assign(Object.assign({},s),e));return ut.onframe=function(){l.style.path=Re(Object.assign(Object.assign({},K),{endAngle:Number(l.style.waveInArcAngle)}))},ut.onfinish=function(){l.style.path=Re(Object.assign(Object.assign({},K),{endAngle:oe}))},ut}};BF.props={};const FF=e=>(t,n,r)=>{const[i]=t,{fillOpacity:a=1,strokeOpacity:s=1,opacity:l=1}=i.style,p=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:a,strokeOpacity:s,opacity:l}];return i.animate(p,Object.assign(Object.assign({},r),e))};FF.props={};const zF=e=>(t,n,r)=>{const[i]=t,{fillOpacity:a=1,strokeOpacity:s=1,opacity:l=1}=i.style,p=[{fillOpacity:a,strokeOpacity:s,opacity:l},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(p,Object.assign(Object.assign({},r),e))};zF.props={};const HQ=e=>(n,r,i)=>{const[a]=n,{transform:s="",fillOpacity:l=1,strokeOpacity:p=1,opacity:m=1}=a.style,y="center center",b=[{transform:`${s} scale(${1e-4})`.trimStart(),transformOrigin:y,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${s} scale(${1e-4})`.trimStart(),transformOrigin:y,fillOpacity:l,strokeOpacity:p,opacity:m,offset:.01},{transform:`${s} scale(1)`.trimStart(),transformOrigin:y,fillOpacity:l,strokeOpacity:p,opacity:m}];return a.animate(b,Object.assign(Object.assign({},i),e))},WQ=e=>(n,r,i)=>{const[a]=n,{transform:s="",fillOpacity:l=1,strokeOpacity:p=1,opacity:m=1}=a.style,y="center center",b=[{transform:`${s} scale(1)`.trimStart(),transformOrigin:y},{transform:`${s} scale(${1e-4})`.trimStart(),transformOrigin:y,fillOpacity:l,strokeOpacity:p,opacity:m,offset:.99},{transform:`${s} scale(${1e-4})`.trimStart(),transformOrigin:y,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(b,Object.assign(Object.assign({},i),e))},UF=e=>(t,n,r)=>{var i,a;const[s]=t,l=((a=(i=s).getTotalLength)===null||a===void 0?void 0:a.call(i))||0,p=[{lineDash:[0,l]},{lineDash:[l,0]}];return s.animate(p,Object.assign(Object.assign({},r),e))};UF.props={};function Bb(e,t){const n={};for(const r of t){const i=e.style[r];i&&(n[r]=i)}return n}const Fb=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function uP(e){const{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[a,s]=n,l=s-i,p=a-r;return[r,i,p,l]}function $Q(e){const[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function GQ(e,t){const[n,r,i,a]=uP(e),s=a/i,l=Math.ceil(Math.sqrt(t/s)),p=Math.ceil(t/l),m=[],y=a/p;let b=0,E=t;for(;E>0;){const O=Math.min(E,l),P=i/O;for(let I=0;I<O;I++){const N=n+I*P,z=r+b*y;m.push($Q([N,z,P,y]))}E-=O,b+=1}return m}function XQ(e="pack"){return typeof e=="function"?e:GQ}function YQ(e,t,n){const[r,i,a,s]=uP(e),{transform:l}=e.style,{transform:p}=t.style;jF(t,e);const[m,y,b,E]=uP(t),O=r-m,P=i-y,I=a/b,N=s/E,z=[Object.assign({transform:`${l?l+" ":""}translate(${O}, ${P}) scale(${I}, ${N})`},Bb(e,Fb)),Object.assign({transform:`${p?p+" ":""}translate(0, 0) scale(1, 1)`},Bb(t,Fb))];return t.animate(z,n)}function jF(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function qQ(e,t){const{nodeName:n}=e;if(n==="path")return e;const r=new pu({style:Object.assign(Object.assign({},Bb(e,Fb)),{d:t})});return jF(r,e),r}function ZF(e,t){const n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function KQ(e){return!ZF(e,"m")||!ZF(e,"M")}function VF(e){const t=Tx(e);if(t&&!KQ(t))return t}function lP(e,t,n,r){const{nodeName:i}=t,{nodeName:a}=n,s=VF(t),l=VF(n);if(i===a&&i!=="path"||(s===void 0||l===void 0))return YQ(t,n,r);const y=qQ(e,s),b=[Object.assign({path:s},Bb(t,Fb)),Object.assign({path:l},Bb(n,Fb))],E=y.animate(b,r);return E.onfinish=()=>{y.style.transform="none",nb(y,n)},y.style.transform="none",E}function QQ(e,t,n,r){e.style.visibility="hidden";const i=r(e,t.length);return t.map((a,s)=>{const l=new pu({style:Object.assign({path:i[s]},Bb(e,Fb))});return lP(a,l,a,n)})}function JQ(e,t,n,r){const i=r(t,e.length),{fillOpacity:a=1,strokeOpacity:s=1,opacity:l=1}=t.style,p=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:a,strokeOpacity:s,opacity:l}],m=t.animate(p,n);return[...e.map((b,E)=>{const O=new pu({style:{path:i[E],fill:t.style.fill}});return lP(b,b,O,n)}),m]}const HF=e=>(t,n,r)=>{const i=XQ(e.split),a=Object.assign(Object.assign({},r),e),{length:s}=t,{length:l}=n;if(s===1&&l===1||s>1&&l>1){const[p]=t,[m]=n;return lP(p,p,m,a)}if(s===1&&l>1){const[p]=t;return QQ(p,n,a,i)}if(s>1&&l===1){const[p]=n;return JQ(t,p,a,i)}return null};HF.props={};const WF=(e,t)=>(n,r,i)=>{const[a]=n,{height:s,width:l}=a.getBoundingClientRect(),p=new pu({style:{path:`M0,0L${l},0L${l},${s}L0,${s}Z`}});return a.appendChild(p),a.style.clipPath=p,sP(e,t)([p],r,i)};WF.props={};const $F=(e,t)=>(n,r,i)=>{const[a]=n,{height:s,width:l}=a.getBoundingClientRect(),p=new pu({style:{path:`M0,0L${l},0L${l},${s}L0,${s}Z`}});return a.appendChild(p),a.style.clipPath=p,NF(e,t)([p],r,i)};$F.props={};var uE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function vy(e){return Ho(e).selectAll(`.${Lh}`).nodes().filter(t=>!t.__removed__)}function GF(e,t){return cP(e,t).flatMap(({container:n})=>vy(n))}function cP(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function cg(e){return Ho(e).select(`.${Dh}`).node()}function XF(e){if(e.nodeName!=="rect")return e.getRenderBounds();const{x:t,y:n,width:r,height:i}=e.style;return{min:[t,n],max:[t+r,n+i]}}function fP(e,t){const{offsetX:n,offsetY:r}=t,i=XF(e),{min:[a,s],max:[l,p]}=i,m=n<a||n>l,y=r<s||r>p;return m||y?null:[n-a,r-s]}function hP(e,t){const{offsetX:n,offsetY:r}=t,[i,a,s,l]=eJ(e);return[Math.min(s,Math.max(i,n))-i,Math.min(l,Math.max(a,r))-a]}function eJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,a]}=t;return[n,r,i,a]}function YF(e){return t=>t.__data__.color}function dP(e){return t=>t.__data__.x}function q_(e){const t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(a=>[$T(r.key,a.key),a.data])));return r=>{const{index:i,markKey:a,viewKey:s}=r.__data__;return n.get($T(s,a))[i]}}function fg(e,t=(r,i)=>r,n=(r,i,a)=>r.setAttribute(i,a)){const r="__states__",i="__ordinal__",a=y=>{const{[r]:b=[],[i]:E={}}=y,O=b.reduce((P,I)=>Object.assign(Object.assign({},P),e[I]),E);if(Object.keys(O).length!==0){for(const[P,I]of Object.entries(O)){const N=GX(y,P),z=t(I,y);n(y,P,z),P in E||(E[P]=N)}y[i]=E}},s=y=>{y[r]||(y[r]=[])};return{setState:(y,...b)=>{s(y),y[r]=[...b],a(y)},removeState:(y,...b)=>{s(y);for(const E of b){const O=y[r].indexOf(E);O!==-1&&y[r].splice(O,1)}a(y)},hasState:(y,b)=>(s(y),y[r].indexOf(b)!==-1)}}function tJ(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function $T(e,t){return`${e},${t}`}function zb(e,t){const r=(Array.isArray(e)?e:[e]).flatMap(a=>a.marks.map(s=>[$T(a.key,s.key),s.state])),i={};for(const a of t){const[s,l]=Array.isArray(a)?a:[a,{}];i[s]=r.reduce((p,m)=>{const[y,b={}]=m,E=tJ(b[s])?l:b[s];for(const[O,P]of Object.entries(E)){const I=p[O],N=(z,V,W,K)=>{const J=$T(K.__data__.viewKey,K.__data__.markKey);return y!==J?I==null?void 0:I(z,V,W,K):typeof P!="function"?P:P(z,V,W,K)};p[O]=N}return p},{})}return i}function lE(e,t){const n=new Map(e.map((i,a)=>[i,a])),r=t?e.map(t):e;return(i,a)=>{if(typeof i!="function")return i;const s=n.get(a),l=t?t(a):a;return i(l,s,r,a)}}function qF(e){var{link:t=!1,valueof:n=(y,b)=>y,coordinate:r}=e,i=uE(e,["link","valueof","coordinate"]);const a="element-link";if(!t)return[()=>{},()=>{}];const s=y=>y.__data__.points,l=(y,b)=>{const[,E,O]=y,[P,,,I]=b;return[E,P,I,O]};return[y=>{var b;if(y.length<=1)return;const E=lg(y,(O,P)=>{const{x:I}=O.__data__,{x:N}=P.__data__;return I-N});for(let O=1;O<E.length;O++){const P=Hv(),I=E[O-1],N=E[O],[z,V,W,K]=l(s(I),s(N));P.moveTo(...z),P.lineTo(...V),P.lineTo(...W),P.lineTo(...K),P.closePath();const J=im(i,We=>n(We,I)),{fill:oe=I.getAttribute("fill")}=J,Te=uE(J,["fill"]),Re=new pu({className:a,style:Object.assign({d:P.toString(),fill:oe,zIndex:-2},Te)});(b=I.link)===null||b===void 0||b.remove(),I.parentNode.appendChild(Re),I.link=Re}},y=>{var b;(b=y.link)===null||b===void 0||b.remove(),y.link=null}]}function KF(e,t,n){const r=i=>{const{transform:a}=e.style;return a?`${a} ${i}`:i};if(fl(n)){const{points:i}=e.__data__,[a,s]=Ol(n)?tT(i):i,l=n.getCenter(),p=$c(a,l),m=$c(s,l),y=Vv(p),b=v4(p,m),E=y+b/2,O=t*Math.cos(E),P=t*Math.sin(E);return r(`translate(${O}, ${P})`)}return Ol(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function QF(e){var{document:t,background:n,scale:r,coordinate:i,valueof:a}=e,s=uE(e,["document","background","scale","coordinate","valueof"]);const l="element-background";if(!n)return[()=>{},()=>{}];const p=(z,V,W)=>{const K=z.invert(V),J=V+z.getBandWidth(K)/2,oe=z.getStep(K)/2,Te=oe*W;return[J-oe+Te,J+oe-Te]},m=(z,V)=>{const{x:W}=r;if(!aE(W))return[0,1];const{__data__:K}=z,{x:J}=K,[oe,Te]=p(W,J,V);return[oe,Te]},y=(z,V)=>{const{y:W}=r;if(!aE(W))return[0,1];const{__data__:K}=z,{y:J}=K,[oe,Te]=p(W,J,V);return[oe,Te]},b=(z,V)=>{const{padding:W}=V,[K,J]=m(z,W),[oe,Te]=y(z,W),Re=[[K,oe],[J,oe],[J,Te],[K,Te]].map(Ft=>i.map(Ft)),{__data__:We}=z,{y:ut,y1:ct}=We;return BD(t,Re,{y:ut,y1:ct},i,V)},E=(z,V)=>{const{transform:W="scale(1.2, 1.2)",transformOrigin:K="center center",stroke:J=""}=V,oe=uE(V,["transform","transformOrigin","stroke"]),Te=Object.assign({transform:W,transformOrigin:K,stroke:J},oe),Re=z.cloneNode(!0);for(const[We,ut]of Object.entries(Te))Re.style[We]=ut;return Re},O=()=>{const{x:z,y:V}=r;return[z,V].some(aE)};return[z=>{z.background&&z.background.remove();const V=im(s,Ft=>a(Ft,z)),{fill:W="#CCD6EC",fillOpacity:K=.3,zIndex:J=-2,padding:oe=.001,strokeWidth:Te=0}=V,Re=uE(V,["fill","fillOpacity","zIndex","padding","strokeWidth"]),We=Object.assign(Object.assign({},Re),{fill:W,fillOpacity:K,zIndex:J,padding:oe,strokeWidth:Te}),ct=(O()?b:E)(z,We);ct.className=l,z.parentNode.parentNode.appendChild(ct),z.background=ct},z=>{var V;(V=z.background)===null||V===void 0||V.remove(),z.background=null},z=>z.className===l]}function gy(e,t){const r=e.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function nJ(e){gy(e,e.cursor)}function pP(e,t,n){return e.find(r=>Object.entries(t).every(([i,a])=>n(r)[i]===a))}var rJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function iJ(e,{elements:t,datum:n,groupKey:r=b=>b,link:i=!1,background:a=!1,delay:s=60,scale:l,coordinate:p,emitter:m,state:y={}}){var b;const E=t(e),O=new Set(E),P=Zl(E,r),I=lE(E,n),[N,z]=qF(Object.assign({elements:E,valueof:I,link:i,coordinate:p},ja(y.active,"link"))),[V,W,K]=QF(Object.assign({document:e.ownerDocument,scale:l,coordinate:p,background:a,valueof:I},ja(y.active,"background"))),J=Pi(y,{active:Object.assign({},((b=y.active)===null||b===void 0?void 0:b.offset)&&{transform:(...tn)=>{const Yt=y.active.offset(...tn),[,fn]=tn;return KF(E[fn],Yt,p)}})}),{setState:oe,removeState:Te,hasState:Re}=fg(J,I);let We;const ut=tn=>{const{target:Yt,nativeEvent:fn=!0}=tn;if(!O.has(Yt))return;We&&clearTimeout(We);const Hn=r(Yt),cr=P.get(Hn),_r=new Set(cr);for(const Mr of E)_r.has(Mr)?Re(Mr,"active")||oe(Mr,"active"):(oe(Mr,"inactive"),z(Mr)),Mr!==Yt&&W(Mr);V(Yt),N(cr),fn&&m.emit("element:highlight",{nativeEvent:fn,data:{data:n(Yt),group:cr.map(n)}})},ct=()=>{We&&clearTimeout(We),We=setTimeout(()=>{Ft(),We=null},s)},Ft=(tn=!0)=>{for(const Yt of E)Te(Yt,"active","inactive"),W(Yt),z(Yt);tn&&m.emit("element:unhighlight",{nativeEvent:tn})},ft=tn=>{const{target:Yt}=tn;a&&!K(Yt)||!a&&!O.has(Yt)||(s>0?ct():Ft())},St=()=>{Ft()};e.addEventListener("pointerover",ut),e.addEventListener("pointerout",ft),e.addEventListener("pointerleave",St);const Mt=tn=>{const{nativeEvent:Yt}=tn;Yt||Ft(!1)},Nt=tn=>{const{nativeEvent:Yt}=tn;if(Yt)return;const{data:fn}=tn.data,Hn=pP(E,fn,n);Hn&&ut({target:Hn,nativeEvent:!1})};return m.on("element:highlight",Nt),m.on("element:unhighlight",Mt),()=>{e.removeEventListener("pointerover",ut),e.removeEventListener("pointerout",ft),e.removeEventListener("pointerleave",St),m.off("element:highlight",Nt),m.off("element:unhighlight",Mt);for(const tn of E)W(tn),z(tn)}}function GT(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,a=rJ(e,["delay","createGroup","background","link"]);return(s,l,p)=>{const{container:m,view:y,options:b}=s,{scale:E,coordinate:O}=y,P=cg(m);return iJ(P,Object.assign({elements:vy,datum:q_(y),groupKey:n?n(y):void 0,coordinate:O,scale:E,state:zb(b,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:p},a))}}GT.props={reapplyWhenUpdate:!0};function JF(e){return GT(Object.assign(Object.assign({},e),{createGroup:dP}))}JF.props={reapplyWhenUpdate:!0};function e8(e){return GT(Object.assign(Object.assign({},e),{createGroup:YF}))}e8.props={reapplyWhenUpdate:!0};var aJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oJ(e,{elements:t,datum:n,groupKey:r=b=>b,link:i=!1,single:a=!1,coordinate:s,background:l=!1,scale:p,emitter:m,state:y={}}){var b;const E=t(e),O=new Set(E),P=Zl(E,r),I=lE(E,n),[N,z]=qF(Object.assign({link:i,elements:E,valueof:I,coordinate:s},ja(y.selected,"link"))),[V,W]=QF(Object.assign({document:e.ownerDocument,background:l,coordinate:s,scale:p,valueof:I},ja(y.selected,"background"))),K=Pi(y,{selected:Object.assign({},((b=y.selected)===null||b===void 0?void 0:b.offset)&&{transform:(...St)=>{const Mt=y.selected.offset(...St),[,Nt]=St;return KF(E[Nt],Mt,s)}})}),{setState:J,removeState:oe,hasState:Te}=fg(K,I),Re=(St=!0)=>{for(const Mt of E)oe(Mt,"selected","unselected"),z(Mt),W(Mt);St&&m.emit("element:unselect",{nativeEvent:!0})},We=(St,Mt,Nt=!0)=>{if(Te(Mt,"selected"))Re();else{const tn=r(Mt),Yt=P.get(tn),fn=new Set(Yt);for(const Hn of E)fn.has(Hn)?J(Hn,"selected"):(J(Hn,"unselected"),z(Hn)),Hn!==Mt&&W(Hn);if(N(Yt),V(Mt),!Nt)return;m.emit("element:select",Object.assign(Object.assign({},St),{nativeEvent:Nt,data:{data:[n(Mt),...Yt.map(n)]}}))}},ut=(St,Mt,Nt=!0)=>{const tn=r(Mt),Yt=P.get(tn),fn=new Set(Yt);if(Te(Mt,"selected")){if(!E.some(cr=>!fn.has(cr)&&Te(cr,"selected")))return Re();for(const cr of Yt)J(cr,"unselected"),z(cr),W(cr)}else{const Hn=Yt.some(cr=>Te(cr,"selected"));for(const cr of E)fn.has(cr)?J(cr,"selected"):Te(cr,"selected")||J(cr,"unselected");!Hn&&i&&N(Yt),V(Mt)}Nt&&m.emit("element:select",Object.assign(Object.assign({},St),{nativeEvent:Nt,data:{data:E.filter(Hn=>Te(Hn,"selected")).map(n)}}))},ct=St=>{const{target:Mt,nativeEvent:Nt=!0}=St;return O.has(Mt)?a?We(St,Mt,Nt):ut(St,Mt,Nt):Re()};e.addEventListener("click",ct);const Ft=St=>{const{nativeEvent:Mt,data:Nt}=St;if(Mt)return;const tn=a?Nt.data.slice(0,1):Nt.data;for(const Yt of tn){const fn=pP(E,Yt,n);ct({target:fn,nativeEvent:!1})}},ft=()=>{Re(!1)};return m.on("element:select",Ft),m.on("element:unselect",ft),()=>{for(const St of E)z(St);e.removeEventListener("click",ct),m.off("element:select",Ft),m.off("element:unselect",ft)}}function XT(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=aJ(e,["createGroup","background","link"]);return(a,s,l)=>{const{container:p,view:m,options:y}=a,{coordinate:b,scale:E}=m,O=cg(p);return oJ(O,Object.assign({elements:vy,datum:q_(m),groupKey:t?t(m):void 0,coordinate:b,scale:E,state:zb(y,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:l},i))}}XT.props={reapplyWhenUpdate:!0};function t8(e){return XT(Object.assign(Object.assign({},e),{createGroup:dP}))}t8.props={reapplyWhenUpdate:!0};function n8(e){return XT(Object.assign(Object.assign({},e),{createGroup:YF}))}n8.props={reapplyWhenUpdate:!0};var K_=function(e,t,n){var r,i,a,s,l=0;n||(n={});var p=function(){l=n.leading===!1?0:Date.now(),r=null,s=e.apply(i,a),r||(i=a=null)},m=function(){var y=Date.now();!l&&n.leading===!1&&(l=y);var b=t-(y-l);return i=this,a=arguments,b<=0||b>t?(r&&(clearTimeout(r),r=null),l=y,s=e.apply(i,a),r||(i=a=null)):!r&&n.trailing!==!1&&(r=setTimeout(p,b)),s};return m.cancel=function(){clearTimeout(r),l=0,r=i=a=null},m};function sJ(e){const{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(a=>a.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function uJ({wait:e=30,leading:t,trailing:n=!1}){return r=>{const{options:i,update:a,setState:s,container:l}=r,p=cg(l),m=K_(y=>{const b=fP(p,y);if(!b){s("fisheye"),a();return}s("fisheye",E=>{const O=Pi({},E,{interaction:{tooltip:{preserve:!0}}});for(const z of O.marks)z.animate=!1;const[P,I]=b,N=sJ(O);return N.focusX=P,N.focusY=I,N.visual=!0,O}),a()},e,{leading:t,trailing:n});return p.addEventListener("pointerenter",m),p.addEventListener("pointermove",m),p.addEventListener("pointerleave",m),()=>{p.removeEventListener("pointerenter",m),p.removeEventListener("pointermove",m),p.removeEventListener("pointerleave",m)}}}var lJ=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},cJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fJ(e){const{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return t.push(r),e.transform=t,r}function hJ(e,t,n){const[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{const{encode:a}=i,s=l=>{const p=a[l];return[l,p?p.value:void 0]};return Object.fromEntries(n.map(s))});return r}function r8(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=s=>`${s}`}=e,a=cJ(e,["wait","leading","trailing","labelFormatter"]);return s=>{const{view:l,container:p,update:m,setState:y}=s,{markState:b,scale:E,coordinate:O}=l,P=hJ(b,"line",["x","y","series"]);if(!P)return;const{y:I,x:N,series:z=[]}=P,V=I.map((tn,Yt)=>Yt),W=lg(V.map(tn=>N[tn])),K=cg(p),J=p.getElementsByClassName(Lh),oe=p.getElementsByClassName(eo),Re=Zl(oe,tn=>tn.__data__.key.split("-")[0]),We=new ll({style:Object.assign({x1:0,y1:0,x2:0,y2:K.getAttribute("height"),stroke:"black",lineWidth:1},ja(a,"rule"))}),ut=new Hf({style:Object.assign({x:0,y:K.getAttribute("height"),text:"",fontSize:10},ja(a,"label"))});We.append(ut),K.appendChild(We);const ct=(tn,Yt,fn)=>{const[Hn]=tn.invert(fn),cr=Yt.invert(Hn);return W[PQ(W,cr)]},Ft=(tn,Yt)=>{We.setAttribute("x1",tn[0]),We.setAttribute("x2",tn[0]),ut.setAttribute("text",i(Yt))};let ft;const St=tn=>lJ(this,void 0,void 0,function*(){const{x:Yt}=E,fn=ct(O,Yt,tn);Ft(tn,fn),y("chartIndex",cr=>{const _r=Pi({},cr),Mr=_r.marks.find(Ci=>Ci.type==="line"),Qi=Pu(f2(V,Ci=>Pu(Ci,Ya=>+I[Ya])/cv(Ci,Ya=>+I[Ya]),Ci=>z[Ci]).values()),Ta=[1/Qi,Qi];Pi(Mr,{scale:{y:{domain:Ta}}});const Fi=fJ(Mr);Fi.groupBy="color",Fi.basis=(Ci,Ya)=>{const Ga=Ci[Db(vo=>N[+vo]).center(Ci,fn)];return Ya[Ga]};for(const Ci of _r.marks)Ci.animate=!1;return _r}),ft=(yield m("chartIndex")).view}),Mt=tn=>{const{scale:Yt,coordinate:fn}=ft,{x:Hn,y:cr}=Yt,_r=ct(fn,Hn,tn);Ft(tn,_r);for(const Mr of J){const{seriesIndex:fi,key:Qi}=Mr.__data__,Ta=fi[Db(Wo=>N[+Wo]).center(fi,_r)],Fi=[0,cr.map(1)],Ci=[0,cr.map(I[Ta]/I[fi[0]])],[,Ya]=fn.map(Fi),[,Ga]=fn.map(Ci),vo=Ya-Ga;Mr.setAttribute("transform",`translate(0, ${vo})`);const cs=Re.get(Qi)||[];for(const Wo of cs)Wo.setAttribute("dy",vo)}},Nt=K_(tn=>{const Yt=fP(K,tn);Yt&&Mt(Yt)},t,{leading:n,trailing:r});return St([0,0]),K.addEventListener("pointerenter",Nt),K.addEventListener("pointermove",Nt),K.addEventListener("pointerleave",Nt),()=>{We.remove(),K.removeEventListener("pointerenter",Nt),K.removeEventListener("pointermove",Nt),K.removeEventListener("pointerleave",Nt)}}}r8.props={reapplyWhenUpdate:!0};function cE(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function YT(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function i8(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function dJ(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var pJ=dJ;function vP(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var a8={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function vJ(e){var t;e===void 0&&(e="");var n=vP(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,ce.pi)({flex:1},a8),t[".".concat(n.VALUE)]=(0,ce.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},a8),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var mJ=function(e){(0,ce.ZT)(t,e);function t(n){var r=this,i,a,s=(a=(i=n.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,l=vP(s);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(l.CONTAINER,'"></div>'),title:'<div class="'.concat(l.TITLE,'"></div>'),item:'<li class="'.concat(l.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(l.NAME,`">
          <span class="`).concat(l.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(l.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(l.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:vJ(s)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(a,s){var l=a.name,p=l===void 0?"":l,m=a.color,y=m===void 0?"black":m,b=a.index,E=(0,ce._T)(a,["name","color","index"]),O=(0,ce.pi)({name:p,color:y,index:b!=null?b:s},E);return i8(pJ(i.item,O))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var a=this.element.style.visibility==="hidden",s=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};a?this.closeTransition(s):s()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=i8(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:this.element.replaceChildren(n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,a=i.template,s=i.title,l=i.enterable,p=i.style,m=i.content,y=vP(a.prefixCls),b=this.element;if(this.element.style.pointerEvents=l?"auto":"none",m)this.renderCustomContent();else{s?(b.innerHTML=a.title,b.getElementsByClassName(y.TITLE)[0].innerHTML=s):(r=(n=b.getElementsByClassName(y.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var E=this.HTMLTooltipItemsElements,O=document.createElement("ul");O.className=y.LIST,O.replaceChildren.apply(O,(0,ce.ev)([],(0,ce.CR)(E),!1));var P=this.element.querySelector(".".concat(y.LIST));P?P.replaceWith(O):b.appendChild(O)}ig(b,p)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,a=r.offset,s=n||i,l=s.split("-"),p={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},m=this.elementSize,y=m.width,b=m.height,E=[-y/2,-b/2];return l.forEach(function(O){var P=(0,ce.CR)(E,2),I=P[0],N=P[1],z=(0,ce.CR)(p[O],2),V=z[0],W=z[1];E=[I+(y/2+a[0])*V,N+(b/2+a[1])*W]}),E},t.prototype.setOffsetPosition=function(n){var r=(0,ce.CR)(n,2),i=r[0],a=r[1],s=this.attributes,l=s.x,p=l===void 0?0:l,m=s.y,y=m===void 0?0:m,b=s.container,E=b.x,O=b.y;this.element.style.left="".concat(+p+E+i,"px"),this.element.style.top="".concat(+y+O+a,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=(0,ce.CR)(n,2),i=r[0],a=r[1],s=this.attributes,l=s.x,p=s.y,m=s.bounding,y=s.position;if(!m)return[i,a];var b=this.element,E=b.offsetWidth,O=b.offsetHeight,P=(0,ce.CR)([+l+i,+p+a],2),I=P[0],N=P[1],z={left:"right",right:"left",top:"bottom",bottom:"top"},V=m.x,W=m.y,K=m.width,J=m.height,oe={left:I<V,right:I+E>V+K,top:N<W,bottom:N+O>W+J},Te=[];y.split("-").forEach(function(We){oe[We]?Te.push(z[We]):Te.push(We)});var Re=Te.join("-");return this.getRelativeOffsetFromCursor(Re)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,s=i.y,l=i.width,p=i.height;return new Kl(a,s,l,p).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(hr),fE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qT(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function gJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,a]}=t;return{x:n,y:r,width:i-n,height:a-r}}function yJ(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function _J(e,t,n,r,i,a,s,l={}){const p={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},m=new mJ({className:"tooltip",style:{x:t,y:n,container:s,data:[],bounding:a,position:r,enterable:i,title:"",offset:[10,10],template:{prefixCls:"g2-"},style:Pi(p,l)}});return e.appendChild(m.HTMLTooltipElement),m}function o8({root:e,data:t,x:n,y:r,render:i,event:a,single:s,position:l="right-bottom",enterable:p=!1,css:m,mount:y,bounding:b}){const E=qT(e,y),O=qT(e),P=s?O:e,I=b||gJ(e),N=yJ(O,E),{tooltipElement:z=_J(E,n,r,l,p,I,N,m)}=P,{items:V,title:W=""}=t;z.update(Object.assign({x:n,y:r,data:V,title:W,position:l,enterable:p},i!==void 0&&{content:i(a,{items:V,title:W})})),P.tooltipElement=z}function yy({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const a=qT(e),s=t?a:e,{tooltipElement:l}=s;l&&l.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY)}function mP({root:e,single:t}){const n=qT(e),r=t?n:e;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0)}function s8(e){const{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function bJ(e){const{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(cl).map(a=>{var{color:s=u8(e)}=a,l=fE(a,["color"]);return Object.assign(Object.assign({},l),{color:s})}).map(s8);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function xJ(e,t){const{color:n,series:r,facet:i=!1}=e,{color:a,series:s}=t,l=p=>p&&p.invert&&!(p instanceof fy)&&!(p instanceof k2);if(l(r))return r.clone().invert(s);if(s&&r instanceof fy&&r.invert(s)!==a&&!i)return r.invert(s);if(l(n)){const p=n.invert(a);return Array.isArray(p)?null:p}return null}function u8(e){const t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function l8(e,t=n=>n){const n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function c8(e,t,n,r=e.map(a=>a.__data__),i={}){const a=p=>p instanceof Date?+p:p,s=l8(r.map(p=>p.title),a).filter(cl),l=r.flatMap((p,m)=>{const y=e[m],{items:b=[],title:E}=p,O=b.filter(cl),P=n!==void 0?n:b.length<=1;return O.map(I=>{var{color:N=u8(y)||i.color,name:z}=I,V=fE(I,["color","name"]);const W=xJ(t,p),K=P?W||z:z||W;return Object.assign(Object.assign({},V),{color:N,name:K||E})})}).map(s8);return Object.assign(Object.assign({},s.length>0&&{title:s.join(",")}),{items:l8(l,p=>`(${a(p.name)}, ${a(p.value)}, ${a(p.color)})`)})}function EJ(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:a,mainHeight:s,startX:l,startY:p,transposed:m,polar:y,insetLeft:b,insetTop:E}=n,O=fE(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const P=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},O),I=t.map(We=>We[1]),N=t.map(We=>We[0]),z=cE(I),V=cE(N),W=()=>{if(y){const We=Math.min(a,s)/2,ut=l+b+a/2,ct=p+E+s/2,Ft=Vv($c([V,z],[ut,ct])),ft=ut+We*Math.cos(Ft),St=ct+We*Math.sin(Ft);return[ut,ft,ct,St]}return m?[l,l+r,z+p,z+p]:[V+l,V+l,p,p+i]},[K,J,oe,Te]=W(),Re=()=>{const We=new ll({style:Object.assign({x1:K,x2:J,y1:oe,y2:Te},P)});return e.appendChild(We),We};if(N.length>0){const We=e.ruleY||Re();We.style.x1=K,We.style.x2=J,We.style.y1=oe,We.style.y2=Te,e.ruleY=We}}function f8(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function SJ(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(a=>a.remove());const i=t.filter(a=>{const[{x:s,y:l}]=a;return cl(s)&&cl(l)}).map(a=>{const[{color:s,element:l},p]=a,m=s||l.style.fill||l.style.stroke||r.color;return new ts({style:Object.assign({cx:p[0],cy:p[1],fill:m,r:4,stroke:"#fff",strokeWidth:2},n)})});for(const a of i)e.appendChild(a);e.markers=i}function h8(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function d8(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function gP(e,t){return e===void 0?t:e}function p8(e){const{title:t,items:n}=e;return n.length===0&&t===void 0}function wJ(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function v8(e,t){var{elements:n,sort:r,filter:i,scale:a,coordinate:s,crosshairs:l,render:p,groupName:m,emitter:y,wait:b=50,leading:E=!0,trailing:O=!1,startX:P=0,startY:I=0,body:N=!0,single:z=!0,position:V,enterable:W,mount:K,bounding:J,theme:oe,disableNative:Te=!1,marker:Re=!0,preserve:We=!1,style:ut={},css:ct={}}=t,Ft=fE(t,["elements","sort","filter","scale","coordinate","crosshairs","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","disableNative","marker","preserve","style","css"]);const ft=n(e),St=Ol(s),Mt=fl(s),Nt=Pi(ut,Ft),{innerWidth:tn,innerHeight:Yt,width:fn,height:Hn,insetLeft:cr,insetTop:_r}=s.getOptions(),Mr=[],fi=[];for(const wu of ft){const{__data__:Hu}=wu,{seriesX:Ac,title:Ju,items:Wf}=Hu;Ac?Mr.push(wu):(Ju||Wf)&&fi.push(wu)}const Ta=!!(St?a.y:a.x).getBandWidth&&fi.length>0;Mr.sort((wu,Hu)=>{const Ac=St?0:1,Ju=Wf=>Wf.getBounds().min[Ac];return St?Ju(Hu)-Ju(wu):Ju(wu)-Ju(Hu)});const Fi=wu=>{const Hu=St?1:0,{min:Ac,max:Ju}=wu.getLocalBounds();return lg([Ac[Hu],Ju[Hu]])};fi.sort((wu,Hu)=>{const[Ac,Ju]=Fi(wu),[Wf,dh]=Fi(Hu),zp=(Ac+Ju)/2,vv=(Wf+dh)/2;return St?vv-zp:zp-vv});const Ci=new Map(Mr.map(wu=>{const{__data__:Hu}=wu,{seriesX:Ac}=Hu,Ju=Ac.map((dh,zp)=>zp),Wf=lg(Ju,dh=>Ac[+dh]);return[wu,[Wf,Ac]]})),{x:Ya}=a,Ga=Ya!=null&&Ya.getBandWidth?Ya.getBandWidth()/2:0,vo=wu=>{const[Hu]=s.invert(wu);return Hu-Ga},cs=(wu,Hu,Ac)=>{const Ju=vo(wu),Wf=Ac.filter(cl),[dh,zp]=lg([Wf[0],Wf[Wf.length-1]]),vv=dh===zp;if(!Ta&&(Ju<dh||Ju>zp)&&!vv)return null;const I0=Db(d5=>Ac[+d5]).center,Ty=I0(Hu,Ju);return Hu[Ty]},Wo=(wu,Hu)=>{const Ju=wu[St?1:0],Wf=Hu.filter(vv=>{const[I0,Ty]=Fi(vv);return Ju>=I0&&Ju<=Ty});if(!Ta||Wf.length>0)return Wf;const dh=Db(vv=>{const[I0,Ty]=Fi(vv);return(I0+Ty)/2}).center,zp=dh(Hu,Ju);return[Hu[zp]].filter(cl)},fs=(wu,Hu)=>{const{__data__:Ac}=wu;return Object.fromEntries(Object.entries(Ac).filter(([Ju])=>Ju.startsWith("series")&&Ju!=="series").map(([Ju,Wf])=>{const dh=Wf[Hu];return[p2(Ju.replace("series","")),dh]}))},nu=K_(wu=>{const Hu=fP(e,wu);if(!Hu)return;const Ac=XF(e),Ju=Ac.min[0],Wf=Ac.min[1],dh=[Hu[0]-P,Hu[1]-I];if(!dh)return;const zp=Wo(dh,fi),vv=[],I0=[];for(const $f of Mr){const[WE,v5]=Ci.get($f),HU=cs(dh,WE,v5);if(HU!==null){vv.push($f);const WU=fs($f,HU),{x:Ghe,y:Xhe}=WU,Yhe=s.map([(Ghe||0)+Ga,Xhe||0]);I0.push([Object.assign(Object.assign({},WU),{element:$f}),Yhe])}}const Ty=Array.from(new Set(I0.map($f=>$f[0].x))),d5=Ty[YT(Ty,$f=>Math.abs($f-vo(dh)))],p5=I0.filter($f=>$f[0].x===d5),$he=[...p5.map($f=>$f[0]),...zp.map($f=>$f.__data__)],VU=[...vv,...zp],HE=c8(VU,a,m,$he,oe);if(r&&HE.items.sort(($f,WE)=>r($f)-r(WE)),i&&(HE.items=HE.items.filter(i)),VU.length===0||p8(HE)){Vu(wu);return}if(N&&o8({root:e,data:HE,x:Hu[0]+Ju,y:Hu[1]+Wf,render:p,event:wu,single:z,position:V,enterable:W,mount:K,bounding:J,css:ct}),l){const $f=p5.map(v5=>v5[1]),WE=ja(Nt,"crosshairs");EJ(e,$f,Object.assign(Object.assign({},WE),{plotWidth:tn,plotHeight:Yt,mainWidth:fn,mainHeight:Hn,insetLeft:cr,insetTop:_r,startX:P,startY:I,transposed:St,polar:Mt}))}if(Re){const $f=ja(Nt,"marker");SJ(e,{data:p5,style:$f,theme:oe})}y.emit("tooltip:show",Object.assign(Object.assign({},wu),{nativeEvent:!0,data:{data:{x:Nb(a.x,vo(dh),!0)}}}))},b,{leading:E,trailing:O}),Vu=wu=>{yy({root:e,single:z,emitter:y,event:wu}),l&&f8(e),Re&&h8(e)},ec=()=>{mP({root:e,single:z}),l&&f8(e),Re&&h8(e)},uf=({nativeEvent:wu,data:Hu})=>{if(wu)return;const{x:Ac}=Hu.data,{x:Ju}=a,Wf=Ju.map(Ac),[dh,zp]=s.map([Wf,.5]),{min:[vv,I0]}=e.getRenderBounds();nu({offsetX:dh+vv,offsetY:zp+I0})},Fp=()=>{yy({root:e,single:z,emitter:y,nativeEvent:!1})},gg=()=>{qv(),ec()},i1=()=>{ip()},ip=()=>{Te||(e.addEventListener("pointerenter",nu),e.addEventListener("pointermove",nu),e.addEventListener("pointerleave",Vu))},qv=()=>{Te||(e.removeEventListener("pointerenter",nu),e.removeEventListener("pointermove",nu),e.removeEventListener("pointerleave",Vu))};return ip(),y.on("tooltip:show",uf),y.on("tooltip:hide",Fp),y.on("tooltip:disable",gg),y.on("tooltip:enable",i1),()=>{qv(),y.off("tooltip:show",uf),y.off("tooltip:hide",Fp),y.off("tooltip:disable",gg),y.off("tooltip:enable",i1),We?yy({root:e,single:z,emitter:y,nativeEvent:!1}):ec()}}function TJ(e,{elements:t,scale:n,render:r,groupName:i,sort:a,filter:s,emitter:l,wait:p=50,leading:m=!0,trailing:y=!1,groupKey:b=We=>We,single:E=!0,position:O,enterable:P,datum:I,view:N,mount:z,bounding:V,theme:W,shared:K=!1,body:J=!0,disableNative:oe=!1,preserve:Te=!1,css:Re={}}){const We=t(e),ut=new Set(We),ct=Zl(We,b),Ft=K_(Hn=>{const{target:cr}=Hn;if(!ut.has(cr)){yy({root:e,single:E,emitter:l,event:Hn});return}const _r=b(cr),Mr=ct.get(_r),fi=Mr.length===1&&!K?bJ(Mr[0]):c8(Mr,n,i,void 0,W);if(a&&fi.items.sort((Fi,Ci)=>a(Fi)-a(Ci)),s&&(fi.items=fi.items.filter(s)),p8(fi)){yy({root:e,single:E,emitter:l,event:Hn});return}const{offsetX:Qi,offsetY:Ta}=Hn;J&&o8({root:e,data:fi,x:Qi,y:Ta,render:r,event:Hn,single:E,position:O,enterable:P,mount:z,bounding:V,css:Re}),l.emit("tooltip:show",Object.assign(Object.assign({},Hn),{nativeEvent:!0,data:{data:N4(cr,N)}}))},p,{leading:m,trailing:y}),ft=Hn=>{yy({root:e,single:E,emitter:l,event:Hn})},St=()=>{oe||(e.addEventListener("pointermove",Ft),e.addEventListener("pointerleave",ft))},Mt=()=>{oe||(e.removeEventListener("pointermove",Ft),e.removeEventListener("pointerleave",ft))},Nt=({nativeEvent:Hn,data:cr})=>{if(Hn)return;const _r=pP(We,cr.data,I);if(!_r)return;const Mr=_r.getBBox(),{x:fi,y:Qi,width:Ta,height:Fi}=Mr;Ft({target:_r,offsetX:fi+Ta/2,offsetY:Qi+Fi/2})},tn=({nativeEvent:Hn}={})=>{Hn||yy({root:e,single:E,emitter:l,nativeEvent:!1})},Yt=()=>{Mt(),mP({root:e,single:E})},fn=()=>{St()};return l.on("tooltip:show",Nt),l.on("tooltip:hide",tn),l.on("tooltip:enable",fn),l.on("tooltip:disable",Yt),St(),()=>{Mt(),l.off("tooltip:show",Nt),l.off("tooltip:hide",tn),Te?yy({root:e,single:E,emitter:l,nativeEvent:!1}):mP({root:e,single:E})}}function m8(e){const{shared:t,crosshairs:n,series:r,name:i,item:a=()=>({}),facet:s=!1}=e,l=fE(e,["shared","crosshairs","series","name","item","facet"]);return(p,m,y)=>{const{container:b,view:E}=p,{scale:O,markState:P,coordinate:I,theme:N}=E,z=d8(P,"seriesTooltip"),V=d8(P,"crosshairs"),W=cg(b),K=gP(r,z);if(K&&wJ(P)&&!s)return v8(W,Object.assign(Object.assign({},l),{theme:N,elements:vy,scale:O,coordinate:I,crosshairs:gP(n,V),item:a,emitter:y}));if(K&&s){const J=m.filter(ct=>ct!==p&&ct.options.parentKey===p.options.key),oe=GF(p,m),Te=J[0].view.scale,Re=W.getBounds(),We=Re.min[0],ut=Re.min[1];return Object.assign(Te,{facet:!0}),v8(W.parentNode.parentNode,Object.assign(Object.assign({},l),{theme:N,elements:()=>oe,scale:Te,coordinate:I,crosshairs:gP(n,V),item:a,startX:We,startY:ut,emitter:y}))}return TJ(W,Object.assign(Object.assign({},l),{datum:q_(E),elements:vy,scale:O,coordinate:I,groupKey:t?dP(E):void 0,item:a,emitter:y,view:E,theme:N,shared:t}))}}m8.props={reapplyWhenUpdate:!0};var KT=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})};const g8="legend-category",AJ="legend-continuous",CJ="items-item",OJ="legend-category-item-marker",MJ="legend-category-item-label";function y8(e){return e.getElementsByClassName(OJ)[0]}function _8(e){return e.getElementsByClassName(MJ)[0]}function b8(e){return e.getElementsByClassName(CJ)}function yP(e){return e.getElementsByClassName(g8)}function x8(e){return e.getElementsByClassName(AJ)}function RJ(e,t){[...yP(e),...x8(e)].forEach(r=>{t(r,i=>i)})}function _P(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function _ve(e){let t=e;for(;t&&!t.attr("class").startsWith("legend");)t=t.children[0];return t.attributes}function PJ(e,{legends:t,marker:n,label:r,datum:i,filter:a,emitter:s,channel:l,state:p={}}){const m=new Map,y=new Map,b=new Map,{unselected:E={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=p,O={unselected:ja(E,"marker")},P={unselected:ja(E,"label")},{setState:I,removeState:N}=fg(O,void 0),{setState:z,removeState:V}=fg(P,void 0),W=Array.from(t(e));let K=W.map(i);const J=()=>{for(const Re of W){const We=i(Re),ut=n(Re),ct=r(Re);K.includes(We)?(N(ut,"unselected"),V(ct,"unselected")):(I(ut,"unselected"),z(ct,"unselected"))}};for(const Re of W){const We=()=>{gy(e,"pointer")},ut=()=>{nJ(e)},ct=Ft=>KT(this,void 0,void 0,function*(){const ft=i(Re),St=K.indexOf(ft);St===-1?K.push(ft):K.splice(St,1),K.length===0&&K.push(...W.map(i)),yield a(K),J();const{nativeEvent:Mt=!0}=Ft;Mt&&(K.length===W.length?s.emit("legend:reset",{nativeEvent:Mt}):s.emit("legend:filter",Object.assign(Object.assign({},Ft),{nativeEvent:Mt,data:{channel:l,values:K}})))});Re.addEventListener("click",ct),Re.addEventListener("pointerenter",We),Re.addEventListener("pointerout",ut),m.set(Re,ct),y.set(Re,We),b.set(Re,ut)}const oe=Re=>KT(this,void 0,void 0,function*(){const{nativeEvent:We}=Re;if(We)return;const{data:ut}=Re,{channel:ct,values:Ft}=ut;ct===l&&(K=Ft,yield a(K),J())}),Te=Re=>KT(this,void 0,void 0,function*(){const{nativeEvent:We}=Re;We||(K=W.map(i),yield a(K),J())});return s.on("legend:filter",oe),s.on("legend:reset",Te),()=>{for(const Re of W)Re.removeEventListener("click",m.get(Re)),Re.removeEventListener("pointerenter",y.get(Re)),Re.removeEventListener("pointerout",b.get(Re)),s.off("legend:filter",oe),s.off("legend:reset",Te)}}function IJ(e,{legend:t,filter:n,emitter:r,channel:i}){const a=({detail:{value:s}})=>{n(s),r.emit({nativeEvent:!0,data:{channel:i,values:s}})};return t.addEventListener("valuechange",a),()=>{t.removeEventListener("valuechange",a)}}function E8(e,{legend:t,channel:n,value:r,ordinal:i,channels:a,allChannels:s,facet:l=!1}){return KT(this,void 0,void 0,function*(){const{view:p,update:m,setState:y}=e;y(t,b=>{const{marks:E}=b,O=E.map(P=>{if(P.type==="legends")return P;const{transform:I=[]}=P,N=I.findIndex(({type:W})=>W.startsWith("group")||W.startsWith("bin")),z=[...I];z.splice(N+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const V=Object.fromEntries(a.map(W=>[W,{domain:p.scale[W].getOptions().domain}]));return Pi({},P,Object.assign(Object.assign({transform:z,scale:V},!i&&{animate:!1}),{legend:l?!1:Object.fromEntries(s.map(W=>[W,{preserve:!0}]))}))});return Object.assign(Object.assign({},b),{marks:O})}),yield m()})}function kJ(e,t){for(const n of e)E8(n,Object.assign(Object.assign({},t),{facet:!0}))}function LJ(){return(e,t,n)=>{const{container:r}=e,i=t.filter(b=>b!==e),a=i.length>0,s=b=>_P(b).scales.map(E=>E.name),l=[...yP(r),...x8(r)],p=l.flatMap(s),m=a?K_(kJ,50,{trailing:!0}):K_(E8,50,{trailing:!0}),y=l.map(b=>{const{name:E,domain:O}=_P(b).scales[0],P=s(b),I={legend:b,channel:E,channels:P,allChannels:p};return b.className===g8?PJ(r,{legends:b8,marker:y8,label:_8,datum:N=>{const{__data__:z}=N,{index:V}=z;return O[V]},filter:N=>{const z=Object.assign(Object.assign({},I),{value:N,ordinal:!0});m(a?i:e,z)},state:b.attributes.state,channel:E,emitter:n}):IJ(r,{legend:b,filter:N=>{const z=Object.assign(Object.assign({},I),{value:N,ordinal:!1});m(a?i:e,z)},emitter:n,channel:E})});return()=>{y.forEach(b=>b())}}}function DJ(){return(e,t,n)=>{const{container:r,view:i,options:a}=e,s=yP(r),l=vy(r),p=O=>_P(O).scales[0].name,m=O=>{const{scale:{[O]:P}}=i;return P},y=zb(a,["active","inactive"]),b=lE(l,q_(i)),E=[];for(const O of s){const P=Hn=>{const{data:cr}=O.attributes,{__data__:_r}=Hn,{index:Mr}=_r;return cr[Mr].label},I=p(O),N=b8(O),z=m(I),V=Zl(l,Hn=>z.invert(Hn.__data__[I])),{state:W={}}=O.attributes,{inactive:K={}}=W,{setState:J,removeState:oe}=fg(y,b),Te={inactive:ja(K,"marker")},Re={inactive:ja(K,"label")},{setState:We,removeState:ut}=fg(Te),{setState:ct,removeState:Ft}=fg(Re),ft=Hn=>{for(const cr of N){const _r=y8(cr),Mr=_8(cr);cr===Hn||Hn===null?(ut(_r,"inactive"),Ft(Mr,"inactive")):(We(_r,"inactive"),ct(Mr,"inactive"))}},St=(Hn,cr)=>{const _r=P(cr),Mr=new Set(V.get(_r));for(const Qi of l)Mr.has(Qi)?J(Qi,"active"):J(Qi,"inactive");ft(cr);const{nativeEvent:fi=!0}=Hn;fi&&n.emit("legend:highlight",Object.assign(Object.assign({},Hn),{nativeEvent:fi,data:{channel:I,value:_r}}))},Mt=new Map;for(const Hn of N){const cr=_r=>{St(_r,Hn)};Hn.addEventListener("pointerover",cr),Mt.set(Hn,cr)}const Nt=Hn=>{for(const _r of l)oe(_r,"inactive","active");ft(null);const{nativeEvent:cr=!0}=Hn;cr&&n.emit("legend:unhighlight",{nativeEvent:cr})},tn=Hn=>{const{nativeEvent:cr,data:_r}=Hn;if(cr)return;const{channel:Mr,value:fi}=_r;if(Mr!==I)return;const Qi=N.find(Ta=>P(Ta)===fi);Qi&&St({nativeEvent:!1},Qi)},Yt=Hn=>{const{nativeEvent:cr}=Hn;cr||Nt({nativeEvent:!1})};O.addEventListener("pointerleave",Nt),n.on("legend:highlight",tn),n.on("legend:unhighlight",Yt);const fn=()=>{O.removeEventListener(Nt),n.off("legend:highlight",tn),n.off("legend:unhighlight",Yt);for(const[Hn,cr]of Mt)Hn.removeEventListener(cr)};E.push(fn)}return()=>E.forEach(O=>O())}}var hv=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function NJ(e,t){const[n,r,i,a]=e,[s,l,p,m]=t;return!(s>i||p<n||l>a||m<r)}function BJ(e,t,n,r,i){const[a,s,l,p]=i;return[Math.max(a,Math.min(e,n)),Math.max(s,Math.min(t,r)),Math.min(l,Math.max(e,n)),Math.min(p,Math.max(t,r))]}function FJ(e){const{width:t,height:n}=e.getBBox();return[0,0,t,n]}function hg(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}const S8=yb(e=>{const t=e.attributes,{x:n,y:r,width:i,height:a,class:s,renders:l={},handleSize:p=10,document:m}=t,y=hv(t,["x","y","width","height","class","renders","handleSize","document"]);if(!m||i===void 0||a===void 0||n===void 0||r===void 0)return;const b=p/2,E=(fi,Qi,Ta)=>{fi.handle||(fi.handle=Ta.createElement("rect"),fi.append(fi.handle));const{handle:Fi}=fi;return Fi.attr(Qi),Fi},O=ja(g2(y,"handleNW","handleNE"),"handleN"),{render:P=E}=O,I=hv(O,["render"]),N=ja(y,"handleE"),{render:z=E}=N,V=hv(N,["render"]),W=ja(g2(y,"handleSE","handleSW"),"handleS"),{render:K=E}=W,J=hv(W,["render"]),oe=ja(y,"handleW"),{render:Te=E}=oe,Re=hv(oe,["render"]),We=ja(y,"handleNW"),{render:ut=E}=We,ct=hv(We,["render"]),Ft=ja(y,"handleNE"),{render:ft=E}=Ft,St=hv(Ft,["render"]),Mt=ja(y,"handleSE"),{render:Nt=E}=Mt,tn=hv(Mt,["render"]),Yt=ja(y,"handleSW"),{render:fn=E}=Yt,Hn=hv(Yt,["render"]),cr=(fi,Qi)=>{const{id:Ta}=fi,Fi=fi.attributes,{x:Ci,y:Ya}=Fi,Ga=hv(Fi,["x","y"]),vo=Qi(fi,Object.assign({x:0,y:0},Ga),m);vo.id=Ta,vo.style.draggable=!0},_r=fi=>()=>{const Qi=yb(Ta=>cr(Ta,fi));return new Qi({})},Mr=Ho(e).attr("className",s).style("x",n).style("y",r).style("draggable",!0);Mr.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(hg,Object.assign({width:i,height:a},g2(y,"handle"))),Mr.maybeAppend("handle-n",_r(P)).style("x",b).style("y",-b).style("width",i-p).style("height",p).style("fill","transparent").call(hg,I),Mr.maybeAppend("handle-e",_r(z)).style("x",i-b).style("y",b).style("width",p).style("height",a-p).style("fill","transparent").call(hg,V),Mr.maybeAppend("handle-s",_r(K)).style("x",b).style("y",a-b).style("width",i-p).style("height",p).style("fill","transparent").call(hg,J),Mr.maybeAppend("handle-w",_r(Te)).style("x",-b).style("y",b).style("width",p).style("height",a-p).style("fill","transparent").call(hg,Re),Mr.maybeAppend("handle-nw",_r(ut)).style("x",-b).style("y",-b).style("width",p).style("height",p).style("fill","transparent").call(hg,ct),Mr.maybeAppend("handle-ne",_r(ft)).style("x",i-b).style("y",-b).style("width",p).style("height",p).style("fill","transparent").call(hg,St),Mr.maybeAppend("handle-se",_r(Nt)).style("x",i-b).style("y",a-b).style("width",p).style("height",p).style("fill","transparent").call(hg,tn),Mr.maybeAppend("handle-sw",_r(fn)).style("x",-b).style("y",a-b).style("width",p).style("height",p).style("fill","transparent").call(hg,Hn)});function bP(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:a=()=>{},brushupdated:s=()=>{},extent:l=FJ(e),brushRegion:p=(Fi,Ci,Ya,Ga,vo)=>[Fi,Ci,Ya,Ga],reverse:m=!1,fill:y="#777",fillOpacity:b="0.3",stroke:E="#fff",selectedHandles:O=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,P=hv(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let I=null,N=null,z=null,V=null,W=null,K=!1;const[J,oe,Te,Re]=l;gy(e,"crosshair"),e.style.draggable=!0;const We=(Fi,Ci,Ya)=>{if(a(Ya),V&&V.remove(),W&&W.remove(),I=[Fi,Ci],m)return ut();ct()},ut=()=>{W=new pu({style:Object.assign(Object.assign({},P),{fill:y,fillOpacity:b,stroke:E,pointerEvents:"none"})}),V=new S8({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(W),e.appendChild(V)},ct=()=>{V=new S8({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},P),{fill:y,fillOpacity:b,stroke:E,draggable:!0}),className:"mask"}),e.appendChild(V)},Ft=(Fi=!0)=>{V&&V.remove(),W&&W.remove(),I=null,N=null,z=null,K=!1,V=null,W=null,r(Fi)},ft=(Fi,Ci,Ya=!0)=>{const[Ga,vo,cs,Wo]=BJ(Fi[0],Fi[1],Ci[0],Ci[1],l),[fs,nu,Vu,ec]=p(Ga,vo,cs,Wo,l);return m?Mt(fs,nu,Vu,ec):St(fs,nu,Vu,ec),n(fs,nu,Vu,ec,Ya),[fs,nu,Vu,ec]},St=(Fi,Ci,Ya,Ga)=>{V.style.x=Fi,V.style.y=Ci,V.style.width=Ya-Fi,V.style.height=Ga-Ci},Mt=(Fi,Ci,Ya,Ga)=>{W.style.d=`
      M${J},${oe}L${Te},${oe}L${Te},${Re}L${J},${Re}Z
      M${Fi},${Ci}L${Fi},${Ga}L${Ya},${Ga}L${Ya},${Ci}Z
    `,V.style.x=Fi,V.style.y=Ci,V.style.width=Ya-Fi,V.style.height=Ga-Ci},Nt=Fi=>{const Ci=(nu,Vu,ec,uf,Fp)=>nu+Vu<uf?uf-Vu:nu+ec>Fp?Fp-ec:nu,Ya=Fi[0]-z[0],Ga=Fi[1]-z[1],vo=Ci(Ya,I[0],N[0],J,Te),cs=Ci(Ga,I[1],N[1],oe,Re),Wo=[I[0]+vo,I[1]+cs],fs=[N[0]+vo,N[1]+cs];ft(Wo,fs)},tn={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},Yt=Fi=>Hn(Fi)||fn(Fi),fn=Fi=>{const{id:Ci}=Fi;return O.indexOf(Ci)===-1?!1:new Set(Object.keys(tn)).has(Ci)},Hn=Fi=>Fi===V.getElementById("selection"),cr=Fi=>{const{target:Ci}=Fi,[Ya,Ga]=hP(e,Fi);if(!V||!Yt(Ci)){We(Ya,Ga,Fi),K=!0;return}Yt(Ci)&&(z=[Ya,Ga])},_r=Fi=>{const{target:Ci}=Fi,Ya=hP(e,Fi);if(!I)return;if(!z)return ft(I,Ya);if(Hn(Ci))return Nt(Ya);const[Ga,vo]=[Ya[0]-z[0],Ya[1]-z[1]],{id:cs}=Ci;if(tn[cs]){const[Wo,fs,nu,Vu]=tn[cs].vector;return ft([I[0]+Ga*Wo,I[1]+vo*fs],[N[0]+Ga*nu,N[1]+vo*Vu])}},Mr=Fi=>{if(z){z=null;const{x:cs,y:Wo,width:fs,height:nu}=V.style;I=[cs,Wo],N=[cs+fs,Wo+nu],s(cs,Wo,cs+fs,Wo+nu,Fi);return}N=hP(e,Fi);const[Ci,Ya,Ga,vo]=ft(I,N);K=!1,i(Ci,Ya,Ga,vo,Fi)},fi=Fi=>{const{target:Ci}=Fi;V&&!Yt(Ci)&&Ft()},Qi=Fi=>{const{target:Ci}=Fi;!V||!Yt(Ci)||K?gy(e,"crosshair"):Hn(Ci)?gy(e,"move"):fn(Ci)&&gy(e,tn[Ci.id].cursor)},Ta=()=>{gy(e,"default")};return e.addEventListener("dragstart",cr),e.addEventListener("drag",_r),e.addEventListener("dragend",Mr),e.addEventListener("click",fi),e.addEventListener("pointermove",Qi),e.addEventListener("pointerleave",Ta),{mask:V,move(Fi,Ci,Ya,Ga,vo=!0){V||We(Fi,Ci,{}),I=[Fi,Ci],N=[Ya,Ga],ft([Fi,Ci],[Ya,Ga],vo)},remove(Fi=!0){V&&Ft(Fi)},destroy(){V&&Ft(!1),gy(e,"default"),e.removeEventListener("dragstart",cr),e.removeEventListener("drag",_r),e.removeEventListener("dragend",Mr),e.removeEventListener("click",fi),e.removeEventListener("pointermove",Qi),e.removeEventListener("pointerleave",Ta)}}}function xP(e,t,n){return t.filter(r=>{if(r===e)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(a=>a.brushKey===n)})}function zJ(e,t,n){return xP(e,t,n).map(r=>cg(r.container))}function UJ(e,t,n){return xP(e,t,n).map(r=>r.options)}function w8(e,t){var{elements:n,selectedHandles:r,siblings:i=_r=>[],datum:a,brushRegion:s,extent:l,reverse:p,scale:m,coordinate:y,series:b=!1,key:E=_r=>_r,bboxOf:O=_r=>{const{x:Mr,y:fi,width:Qi,height:Ta}=_r.style;return{x:Mr,y:fi,width:Qi,height:Ta}},state:P={},emitter:I}=t,N=hv(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const z=n(e),V=i(e),W=V.flatMap(n),K=lE(z,a),J=ja(N,"mask"),{setState:oe,removeState:Te}=fg(P,K),Re=new Map,{width:We,height:ut,x:ct=0,y:Ft=0}=O(e),ft=l||[0,0,We,ut],St=()=>{for(const _r of[...z,...W])Te(_r,"active","inactive")},Mt=(_r,Mr,fi,Qi)=>{var Ta;for(const Ci of V)(Ta=Ci.brush)===null||Ta===void 0||Ta.remove();const Fi=new Set;for(const Ci of z){const{min:Ya,max:Ga}=Ci.getLocalBounds(),[vo,cs]=Ya,[Wo,fs]=Ga;NJ([vo,cs,Wo,fs],[_r,Mr,fi,Qi])?(oe(Ci,"active"),Fi.add(E(Ci))):oe(Ci,"inactive")}for(const Ci of W)Fi.has(E(Ci))?oe(Ci,"active"):oe(Ci,"inactive")},Nt=()=>{for(const _r of z)Te(_r,"inactive");for(const _r of Re.values())_r.remove();Re.clear()},tn=(_r,Mr,fi,Qi)=>{const Ta=Fi=>{const Ci=Fi.cloneNode();return Ci.__data__=Fi.__data__,Fi.parentNode.appendChild(Ci),Re.set(Fi,Ci),Ci};for(const Fi of z){const Ci=Re.get(Fi)||Ta(Fi);Ci.style.clipPath=new sh({style:{x:_r+ct,y:Mr+Ft,width:fi-_r,height:Qi-Mr}}),oe(Fi,"inactive"),oe(Ci,"active")}},Yt=bP(e,Object.assign(Object.assign({},J),{extent:ft,brushRegion:s,reverse:p,selectedHandles:r,brushended:_r=>{const Mr=b?Nt:St;_r&&I.emit("brush:remove",{nativeEvent:!0}),Mr()},brushed:(_r,Mr,fi,Qi,Ta)=>{const Fi=HT(_r,Mr,fi,Qi,m,y);Ta&&I.emit("brush:highlight",{nativeEvent:!0,data:{selection:Fi}}),(b?tn:Mt)(_r,Mr,fi,Qi)},brushcreated:(_r,Mr,fi,Qi,Ta)=>{const Fi=HT(_r,Mr,fi,Qi,m,y);I.emit("brush:end",Object.assign(Object.assign({},Ta),{nativeEvent:!0,data:{selection:Fi}}))},brushupdated:(_r,Mr,fi,Qi,Ta)=>{const Fi=HT(_r,Mr,fi,Qi,m,y);I.emit("brush:end",Object.assign(Object.assign({},Ta),{nativeEvent:!0,data:{selection:Fi}}))},brushstarted:_r=>{I.emit("brush:start",_r)}})),fn=({nativeEvent:_r,data:Mr})=>{if(_r)return;const{selection:fi}=Mr,[Qi,Ta,Fi,Ci]=DQ(fi,m,y);Yt.move(Qi,Ta,Fi,Ci,!1)};I.on("brush:highlight",fn);const Hn=({nativeEvent:_r}={})=>{_r||Yt.remove(!1)};I.on("brush:remove",Hn);const cr=Yt.destroy.bind(Yt);return Yt.destroy=()=>{I.off("brush:highlight",fn),I.off("brush:remove",Hn),cr()},Yt}function EP(e){var{facet:t,brushKey:n}=e,r=hv(e,["facet","brushKey"]);return(i,a,s)=>{const{container:l,view:p,options:m}=i,y=cg(l),b={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},E=["active",["inactive",{opacity:.5}]],{scale:O,coordinate:P}=p;if(t){const N=y.getBounds(),z=N.min[0],V=N.min[1],W=N.max[0],K=N.max[1];return w8(y.parentNode.parentNode,Object.assign(Object.assign({elements:()=>GF(i,a),datum:q_(cP(i,a).map(J=>J.view)),brushRegion:(J,oe,Te,Re)=>[J,oe,Te,Re],extent:[z,V,W,K],state:zb(cP(i,a).map(J=>J.options),E),emitter:s,scale:O,coordinate:P,selectedHandles:void 0},b),r))}const I=w8(y,Object.assign(Object.assign({elements:vy,key:N=>N.__data__.key,siblings:()=>zJ(i,a,n),datum:q_([p,...xP(i,a,n).map(N=>N.view)]),brushRegion:(N,z,V,W)=>[N,z,V,W],extent:void 0,state:zb([m,...UJ(i,a,n)],E),emitter:s,scale:O,coordinate:P,selectedHandles:void 0},b),r));return y.brush=I,()=>I.destroy()}}function SP(e,t,n,r,i){const[,a,,s]=i;return[e,a,n,s]}function jJ(e){return EP(Object.assign(Object.assign({},e),{brushRegion:SP,selectedHandles:["handle-e","handle-w"]}))}function wP(e,t,n,r,i){const[a,,s]=i;return[a,t,s,r]}function ZJ(e){return EP(Object.assign(Object.assign({},e),{brushRegion:wP,selectedHandles:["handle-n","handle-s"]}))}var TP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const VJ="axis",HJ="axis-line",WJ="axis-main-group",T8="axis-hot-area";function $J(e){return e.getElementsByClassName(VJ)}function A8(e){return e.getElementsByClassName(HJ)[0]}function GJ(e){return e.getElementsByClassName(WJ)[0]}function C8(e){return GJ(e).getLocalBounds()}function XJ(e,t){var{cross:n,offsetX:r,offsetY:i}=t,a=TP(t,["cross","offsetX","offsetY"]);const s=C8(e),l=A8(e),[p]=l.getLocalBounds().min,[m,y]=s.min,[b,E]=s.max,O=(b-m)*2;return{brushRegion:wP,hotZone:new sh({className:T8,style:Object.assign({x:n?m:p-O/2,width:n?O/2:O,y,height:E-y},a)}),extent:n?(P,I,N,z)=>[-1/0,I,1/0,z]:(P,I,N,z)=>[Math.floor(m-r),I,Math.ceil(b-r),z]}}function YJ(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,a=TP(t,["offsetY","offsetX","cross"]);const s=C8(e),l=A8(e),[,p]=l.getLocalBounds().min,[m,y]=s.min,[b,E]=s.max,O=E-y;return{brushRegion:SP,hotZone:new sh({className:T8,style:Object.assign({x:m,width:b-m,y:i?y:p-O,height:i?O:O*2},a)}),extent:i?(P,I,N,z)=>[P,-1/0,N,1/0]:(P,I,N,z)=>[P,Math.floor(y-n),N,Math.ceil(E-n)]}}function qJ(e,t){var{axes:n,elements:r,points:i,horizontal:a,datum:s,offsetY:l,offsetX:p,reverse:m=!1,state:y={},emitter:b,coordinate:E}=t,O=TP(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const P=r(e),I=n(e),N=lE(P,s),{setState:z,removeState:V}=fg(y,N),W=new Map,K=ja(O,"mask"),J=fn=>Array.from(W.values()).every(([Hn,cr,_r,Mr])=>fn.some(([fi,Qi])=>fi>=Hn&&fi<=_r&&Qi>=cr&&Qi<=Mr)),oe=I.map(fn=>fn.attributes.scale),Te=fn=>fn.length>2?[fn[0],fn[fn.length-1]]:fn,Re=new Map,We=()=>{Re.clear();for(let fn=0;fn<I.length;fn++){const Hn=oe[fn],{domain:cr}=Hn.getOptions();Re.set(fn,Te(cr))}};We();const ut=(fn,Hn)=>{const cr=[];for(const Mr of P){const fi=i(Mr);J(fi)?(z(Mr,"active"),cr.push(Mr)):z(Mr,"inactive")}if(Re.set(fn,Ft(cr,fn)),!Hn)return;const _r=()=>{if(!ft)return Array.from(Re.values());const Mr=[];for(const[fi,Qi]of Re){const Ta=oe[fi],{name:Fi}=Ta.getOptions();Fi==="x"?Mr[0]=Qi:Mr[1]=Qi}return Mr};b.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:_r()}})},ct=fn=>{for(const Hn of P)V(Hn,"active","inactive");We(),fn&&b.emit("brushAxis:remove",{nativeEvent:!0})},Ft=(fn,Hn)=>{const cr=oe[Hn],{name:_r}=cr.getOptions(),Mr=fn.map(fi=>{const Qi=fi.__data__;return cr.invert(Qi[_r])});return Te(py(cr,Mr))},ft=I.some(a)&&I.some(fn=>!a(fn)),St=[];for(let fn=0;fn<I.length;fn++){const Hn=I[fn],cr=a(Hn)?YJ:XJ,{hotZone:_r,brushRegion:Mr,extent:fi}=cr(Hn,{offsetY:l,offsetX:p,cross:ft,zIndex:999,fill:"transparent"});Hn.parentNode.appendChild(_r);const Qi=bP(_r,Object.assign(Object.assign({},K),{reverse:m,brushRegion:Mr,brushended(Ta){W.delete(Hn),Array.from(W.entries()).length===0?ct(Ta):ut(fn,Ta)},brushed(Ta,Fi,Ci,Ya,Ga){W.set(Hn,fi(Ta,Fi,Ci,Ya)),ut(fn,Ga)}}));St.push(Qi)}const Mt=(fn={})=>{const{nativeEvent:Hn}=fn;Hn||St.forEach(cr=>cr.remove(!1))},Nt=(fn,Hn,cr)=>{const[_r,Mr]=fn,fi=Fi=>Fi.getStep?Fi.getStep():0,Qi=tn(_r,Hn,cr),Ta=tn(Mr,Hn,cr)+fi(Hn);return a(cr)?[Qi,-1/0,Ta,1/0]:[-1/0,Qi,1/0,Ta]},tn=(fn,Hn,cr)=>{const{height:_r,width:Mr}=E.getOptions(),fi=Hn.clone();return a(cr)?fi.update({range:[0,Mr]}):fi.update({range:[_r,0]}),fi.map(fn)},Yt=fn=>{const{nativeEvent:Hn}=fn;if(Hn)return;const{selection:cr}=fn.data;for(let _r=0;_r<St.length;_r++){const Mr=cr[_r],fi=St[_r],Qi=I[_r];if(Mr){const Ta=oe[_r];fi.move(...Nt(Mr,Ta,Qi),!1)}else fi.remove(!1)}};return b.on("brushAxis:remove",Mt),b.on("brushAxis:highlight",Yt),()=>{St.forEach(fn=>fn.destroy()),b.off("brushAxis:remove",Mt),b.off("brushAxis:highlight",Yt)}}function KJ(e){return(t,n,r)=>{const{container:i,view:a,options:s}=t,l=cg(i),{x:p,y:m}=l.getBBox(),{coordinate:y}=a;return qJ(i,Object.assign({elements:vy,axes:$J,offsetY:m,offsetX:p,points:b=>b.__data__.points,horizontal:b=>{const{startPos:[E,O],endPos:[P,I]}=b.attributes;return E!==P&&O===I},datum:q_(a),state:zb(s,["active",["inactive",{opacity:.5}]]),coordinate:y,emitter:r},e))}}var QJ=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},O8=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function JJ(e=300){let t=null;return n=>{const{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function eee(e,t){var{filter:n,reset:r,brushRegion:i,extent:a,reverse:s,emitter:l,scale:p,coordinate:m,selection:y,series:b=!1}=t,E=O8(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const O=ja(E,"mask"),{width:P,height:I}=e.getBBox(),N=a||[0,0,P,I],z=JJ(),V=bP(e,Object.assign(Object.assign({},O),{extent:N,brushRegion:i,reverse:s,brushcreated:W}));e.addEventListener("click",K);function W(oe,Te,Re,We,ut){ut.nativeEvent=!0,n(y(oe,Te,Re,We),ut),V.remove()}function K(oe){z(oe)&&(oe.nativeEvent=!0,r(oe))}const J=({nativeEvent:oe,data:Te})=>{if(oe)return;const{selection:Re}=Te;n(Re,{nativeEvent:!1})};return l.on("brush:filter",J),()=>{V.destroy(),l.off("brush:filter",J),e.removeEventListener("click",K)}}function AP(e){var{hideX:t=!0,hideY:n=!0}=e,r=O8(e,["hideX","hideY"]);return(i,a,s)=>{const{container:l,view:p,options:m,update:y,setState:b}=i,E=cg(l),O={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let P=!1,I=!1,N=p;const{scale:z,coordinate:V}=p;return eee(E,Object.assign(Object.assign({brushRegion:(W,K,J,oe)=>[W,K,J,oe],selection:(W,K,J,oe)=>{const{scale:Te,coordinate:Re}=N;return HT(W,K,J,oe,Te,Re)},filter:(W,K)=>QJ(this,void 0,void 0,function*(){if(I)return;I=!0;const[J,oe]=W;b("brushFilter",Re=>{const{marks:We}=Re,ut=We.map(ct=>Pi({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},ct,{scale:{x:{domain:J,nice:!1},y:{domain:oe,nice:!1}}}));return Object.assign(Object.assign({},m),{marks:ut,clip:!0})}),s.emit("brush:filter",Object.assign(Object.assign({},K),{data:{selection:[J,oe]}})),N=(yield y()).view,I=!1,P=!0}),reset:W=>{if(I||!P)return;const{scale:K}=p,{x:J,y:oe}=K,Te=J.getOptions().domain,Re=oe.getOptions().domain;s.emit("brush:filter",Object.assign(Object.assign({},W),{data:{selection:[Te,Re]}})),P=!1,N=p,b("brushFilter"),y()},extent:void 0,emitter:s,scale:z,coordinate:V},O),r))}}function tee(e){return AP(Object.assign(Object.assign({hideX:!0},e),{brushRegion:SP}))}function nee(e){return AP(Object.assign(Object.assign({hideY:!0},e),{brushRegion:wP}))}var ree=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})};const iee="slider";function aee(e,t,n,r=!1,i="x",a="y"){const{marks:s}=e,l=s.map(p=>{var m,y;return Pi({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},p,{scale:t,[n]:Object.assign(Object.assign({},((m=p[n])===null||m===void 0?void 0:m[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((y=p[n])===null||y===void 0?void 0:y[a])&&{[a]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:l,clip:!0,animate:!1})}function oee(e,t,n){const[r,i]=e,a=n?p=>1-p:p=>p,s=Nb(t,a(r),!0),l=Nb(t,a(i),!1);return py(t,[s,l])}function QT(e){return[e[0],e[e.length-1]]}function M8({initDomain:e={},className:t=iee,prefix:n="slider",setValue:r=(m,y)=>m.setValues(y),hasState:i=!1,wait:a=50,leading:s=!0,trailing:l=!1,getInitValues:p=m=>{var y;const b=(y=m==null?void 0:m.attributes)===null||y===void 0?void 0:y.values;if(b[0]!==0||b[1]!==1)return b}}){return(m,y,b)=>{const{container:E,view:O,update:P,setState:I}=m,N=E.getElementsByClassName(t);if(!N.length)return()=>{};let z=!1;const{scale:V,coordinate:W,layout:K}=O,{paddingLeft:J,paddingTop:oe,paddingBottom:Te,paddingRight:Re}=K,{x:We,y:ut}=V,ct=Ol(W),Ft=Nt=>{const tn=Nt==="vertical"?"y":"x",Yt=Nt==="vertical"?"x":"y";return ct?[Yt,tn]:[tn,Yt]},ft=new Map,St=new Set,Mt={x:e.x||We.getOptions().domain,y:e.y||ut.getOptions().domain};for(const Nt of N){const{orientation:tn}=Nt.attributes,[Yt,fn]=Ft(tn),Hn=`${n}${Qd(Yt)}:filter`,cr=Yt==="x",{ratio:_r}=We.getOptions(),{ratio:Mr}=ut.getOptions(),fi=Ci=>{if(Ci.data){const{selection:Wo}=Ci.data,[fs=QT(Mt.x),nu=QT(Mt.y)]=Wo;return cr?[py(We,fs,_r),py(ut,nu,Mr)]:[py(ut,nu,Mr),py(We,fs,_r)]}const{value:Ya}=Ci.detail,Ga=V[Yt],vo=oee(Ya,Ga,ct&&tn==="horizontal"),cs=Mt[fn];return[vo,cs]},Qi=K_(Ci=>ree(this,void 0,void 0,function*(){const{initValue:Ya=!1}=Ci;if(z&&!Ya)return;z=!0;const{nativeEvent:Ga=!0}=Ci,[vo,cs]=fi(Ci);if(Mt[Yt]=vo,Mt[fn]=cs,Ga){const Wo=cr?vo:cs,fs=cr?cs:vo;b.emit(Hn,Object.assign(Object.assign({},Ci),{nativeEvent:Ga,data:{selection:[QT(Wo),QT(fs)]}}))}I(Nt,Wo=>Object.assign(Object.assign({},aee(Wo,{[Yt]:{domain:vo,nice:!1}},n,i,Yt,fn)),{paddingLeft:J,paddingTop:oe,paddingBottom:Te,paddingRight:Re})),yield P(),z=!1}),a,{leading:s,trailing:l}),Ta=Ci=>{const{nativeEvent:Ya}=Ci;if(Ya)return;const{data:Ga}=Ci,{selection:vo}=Ga,[cs,Wo]=vo;Nt.dispatchEvent(new Ku("valuechange",{data:Ga,nativeEvent:!1}));const fs=cr?WT(cs,We):WT(Wo,ut);r(Nt,fs)};b.on(Hn,Ta),Nt.addEventListener("valuechange",Qi),ft.set(Nt,Qi),St.add([Hn,Ta]);const Fi=p(Nt);Fi&&Nt.dispatchEvent(new Ku("valuechange",{detail:{value:Fi},nativeEvent:!1,initValue:!0}))}return P(),()=>{for(const[Nt,tn]of ft)Nt.removeEventListener("valuechange",tn);for(const[Nt,tn]of St)b.off(Nt,tn)}}}const R8="g2-scrollbar";function see(e={}){return(t,n,r)=>{const{view:i,container:a}=t;if(!a.getElementsByClassName(R8).length)return()=>{};const{scale:l}=i,{x:p,y:m}=l,y={x:[...p.getOptions().domain],y:[...m.getOptions().domain]};return p.update({domain:p.getOptions().expectedDomain}),m.update({domain:m.getOptions().expectedDomain}),M8(Object.assign(Object.assign({},e),{initDomain:y,className:R8,prefix:"scrollbar",hasState:!0,setValue:(E,O)=>E.setValue(O[0]),getInitValues:E=>{const O=E.slider.attributes.values;if(O[0]!==0)return O}}))(t,n,r)}}var uee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lee(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${IH(r)}:${i}`).join(";")}">${t}</${e}>`}const cee={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function P8(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function I8(e){var{offsetX:t=8,offsetY:n=8}=e,r=uee(e,["offsetX","offsetY"]);return i=>{const{container:a}=i,[s,l]=a.getBounds().min,p=ja(r,"tip"),m=new Set,y=E=>{const{target:O}=E;if(!P8(O)){E.stopPropagation();return}const{offsetX:P,offsetY:I}=E,N=P+t-s,z=I+n-l;if(O.tip){O.tip.style.x=N,O.tip.style.y=z;return}const{text:V}=O.style,W=new wc({className:"poptip",style:{innerHTML:lee("div",V,Object.assign(Object.assign({},cee),p)),x:N,y:z}});a.appendChild(W),O.tip=W,m.add(W)},b=E=>{const{target:O}=E;if(!P8(O)){E.stopPropagation();return}O.tip&&(O.tip.remove(),O.tip=null,m.delete(O.tip))};return a.addEventListener("pointerover",y),a.addEventListener("pointerout",b),()=>{a.removeEventListener("pointerover",y),a.removeEventListener("pointerout",b),m.forEach(E=>E.remove())}}}I8.props={reapplyWhenUpdate:!0};function fee(e,t){var n=pR(t),r=n.length;if((0,wa.Z)(e))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(t[a]!==e[a]||!(a in e))return!1}return!0}var hee=fee;function dee(e,t){if(!ai(e))return null;var n;if(hh(t)&&(n=t),E0(t)&&(n=function(i){return hee(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var k8=dee;function JT(e){return e==null?null:L8(e)}function L8(e){if(typeof e!="function")throw new Error;return e}var pee={depth:-1},D8={},CP={};function vee(e){return e.id}function mee(e){return e.parentId}function OP(){var e=vee,t=mee,n;function r(i){var a=Array.from(i),s=e,l=t,p,m,y,b,E,O,P,I,N=new Map;if(n!=null){var z=a.map(function(Re,We){return gee(n(Re,We,i))}),V=z.map(N8),W=new Set(z).add(""),K=lR(V),J;try{for(K.s();!(J=K.n()).done;){var oe=J.value;W.has(oe)||(W.add(oe),z.push(oe),V.push(N8(oe)),a.push(CP))}}catch(Re){K.e(Re)}finally{K.f()}s=function(We,ut){return z[ut]},l=function(We,ut){return V[ut]}}for(y=0,p=a.length;y<p;++y)m=a[y],O=a[y]=new Ob(m),(P=s(m,y,i))!=null&&(P+="")&&(I=O.id=P,N.set(I,N.has(I)?D8:O)),(P=l(m,y,i))!=null&&(P+="")&&(O.parent=P);for(y=0;y<p;++y)if(O=a[y],P=O.parent){if(E=N.get(P),!E)throw new Error("missing: "+P);if(E===D8)throw new Error("ambiguous: "+P);E.children?E.children.push(O):E.children=[O],O.parent=E}else{if(b)throw new Error("multiple roots");b=O}if(!b)throw new Error("no root");if(n!=null){for(;b.data===CP&&b.children.length===1;)b=b.children[0],--p;for(var Te=a.length-1;Te>=0&&(O=a[Te],O.data===CP);--Te)O.data=null}if(b.parent=pee,b.eachBefore(function(Re){Re.depth=Re.parent.depth+1,--p}).eachBefore(SD),b.parent=null,p>0)throw new Error("cycle");return b}return r.id=function(i){return arguments.length?(e=JT(i),r):e},r.parentId=function(i){return arguments.length?(t=JT(i),r):t},r.path=function(i){return arguments.length?(n=JT(i),r):n},r}function gee(e){e="".concat(e);var t=e.length;return MP(e,t-1)&&!MP(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:"/".concat(e)}function N8(e){var t=e.length;if(t<2)return"";for(;--t>1&&!MP(e,t););return e.slice(0,t)}function MP(e,t){if(e[t]==="/"){for(var n=0;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function yee(e,t,n,r,i){var a=e.children,s,l=a.length,p,m=new Array(l+1);for(m[0]=p=s=0;s<l;++s)m[s+1]=p+=a[s].value;y(0,l,e.value,t,n,r,i);function y(b,E,O,P,I,N,z){if(b>=E-1){var V=a[b];V.x0=P,V.y0=I,V.x1=N,V.y1=z;return}for(var W=m[b],K=O/2+W,J=b+1,oe=E-1;J<oe;){var Te=J+oe>>>1;m[Te]<K?J=Te+1:oe=Te}K-m[J-1]<m[J]-K&&b+1<J&&--J;var Re=m[J]-W,We=O-Re;if(N-P>z-I){var ut=O?(P*We+N*Re)/O:N;y(b,J,Re,P,I,ut,z),y(J,E,We,ut,I,N,z)}else{var ct=O?(I*We+z*Re)/O:z;y(b,J,Re,P,I,N,ct),y(J,E,We,P,ct,N,z)}}}function eA(e,t,n,r,i){for(var a=e.children,s,l=-1,p=a.length,m=e.value&&(i-n)/e.value;++l<p;)s=a[l],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*m}function _ee(e,t,n,r,i){(e.depth&1?eA:Z2)(e,t,n,r,i)}var B8=(1+Math.sqrt(5))/2;function F8(e,t,n,r,i,a){for(var s=[],l=t.children,p,m,y=0,b=0,E=l.length,O,P,I=t.value,N,z,V,W,K,J,oe;y<E;){O=i-n,P=a-r;do N=l[b++].value;while(!N&&b<E);for(z=V=N,J=Math.max(P/O,O/P)/(I*e),oe=N*N*J,K=Math.max(V/oe,oe/z);b<E;++b){if(N+=m=l[b].value,m<z&&(z=m),m>V&&(V=m),oe=N*N*J,W=Math.max(V/oe,oe/z),W>K){N-=m;break}K=W}s.push(p={value:N,dice:O<P,children:l.slice(y,b)}),p.dice?Z2(p,n,r,i,I?r+=P*N/I:a):eA(p,n,r,I?n+=O*N/I:i,a),I-=N,y=b}return s}var z8=function e(t){function n(r,i,a,s,l){F8(t,r,i,a,s,l)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(B8),bee=function e(t){function n(r,i,a,s,l){if((p=r._squarify)&&p.ratio===t)for(var p,m,y,b,E=-1,O,P=p.length,I=r.value;++E<P;){for(m=p[E],y=m.children,b=m.value=0,O=y.length;b<O;++b)m.value+=y[b].value;m.dice?Z2(m,i,a,s,I?a+=(l-a)*m.value/I:l):eA(m,i,a,I?i+=(s-i)*m.value/I:s,l),I-=m.value}else r._squarify=p=F8(t,r,i,a,s,l),p.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(B8);function Q_(){return 0}function Ub(e){return function(){return e}}function xee(){var e=z8,t=!1,n=1,r=1,i=[0],a=Q_,s=Q_,l=Q_,p=Q_,m=Q_;function y(E){return E.x0=E.y0=0,E.x1=n,E.y1=r,E.eachBefore(b),i=[0],t&&E.eachBefore(bD),E}function b(E){var O=i[E.depth],P=E.x0+O,I=E.y0+O,N=E.x1-O,z=E.y1-O;N<P&&(P=N=(P+N)/2),z<I&&(I=z=(I+z)/2),E.x0=P,E.y0=I,E.x1=N,E.y1=z,E.children&&(O=i[E.depth+1]=a(E)/2,P+=m(E)-O,I+=s(E)-O,N-=l(E)-O,z-=p(E)-O,N<P&&(P=N=(P+N)/2),z<I&&(I=z=(I+z)/2),e(E,P,I,N,z))}return y.round=function(E){return arguments.length?(t=!!E,y):t},y.size=function(E){return arguments.length?(n=+E[0],r=+E[1],y):[n,r]},y.tile=function(E){return arguments.length?(e=L8(E),y):e},y.padding=function(E){return arguments.length?y.paddingInner(E).paddingOuter(E):y.paddingInner()},y.paddingInner=function(E){return arguments.length?(a=typeof E=="function"?E:Ub(+E),y):a},y.paddingOuter=function(E){return arguments.length?y.paddingTop(E).paddingRight(E).paddingBottom(E).paddingLeft(E):y.paddingTop()},y.paddingTop=function(E){return arguments.length?(s=typeof E=="function"?E:Ub(+E),y):s},y.paddingRight=function(E){return arguments.length?(l=typeof E=="function"?E:Ub(+E),y):l},y.paddingBottom=function(E){return arguments.length?(p=typeof E=="function"?E:Ub(+E),y):p},y.paddingLeft=function(E){return arguments.length?(m=typeof E=="function"?E:Ub(+E),y):m},y}function Eee(e,t){return Array.isArray(e)?typeof t=="function"?OP().path(t)(e):OP()(e):Cb(e)}function U8(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],U8(n,n.path)})}function j8(e){const t=ql(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{j8(n)})}function See(e,t){const n={treemapBinary:yee,treemapDice:Z2,treemapSlice:eA,treemapSliceDice:_ee,treemapSquarify:z8,treemapResquarify:bee},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function Z8(e,t,n){const{value:r}=n,i=See(t.tile,t.ratio),a=Eee(e,t.path);ai(e)?j8(a):U8(a),r?a.sum(p=>t.ignoreParentValue&&p.children?0:mm(r)(p)).sort(t.sort):a.count(),xee().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(a);const s=a.descendants().map(p=>Object.assign(p,{id:p.id.replace(/^\//,""),x:[p.x0,p.x1],y:[p.y0,p.y1]}));return[s.filter(typeof t.layer=="function"?t.layer:p=>p.height===t.layer),s]}var wee=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},Tee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Aee=e=>e.querySelectorAll(".element");function Cee(e){return Ho(e).select(`.${Dh}`).node()}const Oee={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function Mee(e={}){const{originData:t=[],layout:n}=e,r=Tee(e,["originData","layout"]),i=Pi({},Oee,r),a=ja(i,"breadCrumb"),s=ja(i,"active");return l=>{const{update:p,setState:m,container:y,options:b}=l,E=Cee(y),O=b.marks[0],{state:P}=O,I=new Ao;E.appendChild(I);const N=(K,J)=>wee(this,void 0,void 0,function*(){if(I.removeChildren(),J){let oe="",Te=a.y,Re=0;const We=[],ut=E.getBBox().width,ct=K.map((Ft,ft)=>{oe=`${oe}${Ft}/`,We.push(Ft);const St=new Hf({name:oe.replace(/\/$/,""),style:Object.assign(Object.assign({text:Ft,x:Re,path:[...We],depth:ft},a),{y:Te})});I.appendChild(St),Re+=St.getBBox().width;const Mt=new Hf({style:Object.assign(Object.assign({x:Re,text:" / "},a),{y:Te})});return I.appendChild(Mt),Re+=Mt.getBBox().width,Re>ut&&(Te=I.getBBox().height+a.y,Re=0,St.attr({x:Re,y:Te}),Re+=St.getBBox().width,Mt.attr({x:Re,y:Te}),Re+=Mt.getBBox().width),ft===fR(K)-1&&Mt.remove(),St});ct.forEach((Ft,ft)=>{if(ft===fR(ct)-1)return;const St=Object.assign({},Ft.attributes);Ft.attr("cursor","pointer"),Ft.addEventListener("mouseenter",()=>{Ft.attr(s)}),Ft.addEventListener("mouseleave",()=>{Ft.attr(St)}),Ft.addEventListener("click",()=>{N(ql(Ft,["style","path"]),ql(Ft,["style","depth"]))})})}RJ(y,m),m("treemapDrillDown",oe=>{const{marks:Te}=oe,Re=K.join("/"),We=Te.map(ut=>{if(ut.type!=="rect")return ut;let ct=t;if(J){const ft=t.filter(Yt=>{const fn=ql(Yt,["id"]);return fn&&(fn.match(`${Re}/`)||Re.match(fn))}).map(Yt=>({value:Yt.height===0?ql(Yt,["value"]):void 0,name:ql(Yt,["id"])})),{paddingLeft:St,paddingBottom:Mt,paddingRight:Nt}=n,tn=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||I.getBBox().height+10)/(J+1),paddingLeft:St/(J+1),paddingBottom:Mt/(J+1),paddingRight:Nt/(J+1),path:Yt=>Yt.name,layer:Yt=>Yt.depth===J+1});ct=Z8(ft,tn,{value:"value"})[0]}else ct=t.filter(ft=>ft.depth===1);const Ft=[];return ct.forEach(({path:ft})=>{Ft.push(nE(ft))}),Pi({},ut,{data:ct,scale:{color:{domain:Ft}}})});return Object.assign(Object.assign({},oe),{marks:We})}),yield p(void 0,["legendFilter"])}),z=K=>{const J=K.target;if(ql(J,["markType"])!=="rect")return;const oe=ql(J,["__data__","key"]),Te=k8(t,Re=>Re.id===oe);ql(Te,"height")&&N(ql(Te,"path"),ql(Te,"depth"))};E.addEventListener("click",z);const V=pR(Object.assign(Object.assign({},P.active),P.inactive)),W=()=>{Aee(E).forEach(J=>{const oe=ql(J,["style","cursor"]),Te=k8(t,Re=>Re.id===ql(J,["__data__","key"]));if(oe!=="pointer"&&(Te!=null&&Te.height)){J.style.cursor="pointer";const Re=uR(J.attributes,V);J.addEventListener("mouseenter",()=>{J.attr(P.active)}),J.addEventListener("mouseleave",()=>{J.attr(Pi(Re,P.inactive))})}})};return W(),E.addEventListener("mousemove",W),()=>{I.remove(),E.removeEventListener("click",z),E.removeEventListener("mousemove",W)}}}var Ree=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const V8=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{x:n=0,y:r=0,width:i,height:a,data:s}=e;return t.map(l=>{var{data:p,x:m,y,width:b,height:E}=l,O=Ree(l,["data","x","y","width","height"]);return Object.assign(Object.assign({},O),{data:MM(p,s),x:m!=null?m:n,y:y!=null?y:r,width:b!=null?b:i,height:E!=null?E:a})})};V8.props={};var Pee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const H8=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:a}=e,[s,l,p,m]=n==="col"?["y","height","width","x"]:["x","width","height","y"],y=r.reduce((I,N)=>I+N),b=e[l]-i*(t.length-1),E=r.map(I=>b*(I/y)),O=[];let P=e[s]||0;for(let I=0;I<E.length;I+=1){const N=t[I],{data:z}=N,V=Pee(N,["data"]),W=MM(z,a);O.push(Object.assign({[s]:P,[l]:E[I],[m]:e[m]||0,[p]:e[p],data:W},V)),P+=E[I]+i}return O};H8.props={};class hE{constructor(t){this.$value=t}static of(t){return new hE(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}}var Iee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kee=vb(e=>{const{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:a,y:s}=t,l=(p,m)=>{var y;if(p===void 0||!i)return{};const b=Zl(n,P=>P[p]),E=((y=r==null?void 0:r[m])===null||y===void 0?void 0:y.domain)||Array.from(b.keys()),O=E.map(P=>b.has(P)?b.get(P).length:1);return{domain:E,flex:O}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"top"}},a===void 0&&{paddingInner:0}),l(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"right"}},s===void 0&&{paddingInner:0}),l(s,"y"))}}}),RP=vb(e=>{const{data:t,scale:n}=e,r=[e];let i,a,s;for(;r.length;){const b=r.shift(),{children:E,encode:O={},scale:P={},legend:I={}}=b,{color:N}=O,{color:z}=P,{color:V}=I;N!==void 0&&(i=N),z!==void 0&&(a=z),V!==void 0&&(s=V),Array.isArray(E)&&r.push(...E)}const l=()=>{var b;const E=(b=n==null?void 0:n.color)===null||b===void 0?void 0:b.domain;if(E!==void 0)return[E];if(i===void 0)return[void 0];const O=typeof i=="function"?i:I=>I[i],P=t.map(O);return P.some(I=>typeof I=="number")?[og(P)]:[Array.from(new Set(P)),"ordinal"]},p=typeof i=="string"?i:"",[m,y]=l();return{encode:{color:i},scale:{color:Pi({},a,{domain:m,type:y})},legend:{color:Pi({title:p},s)}}}),PP=vb(()=>({animate:{enterType:"fadeIn"}})),IP=mb(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),kP=mb(()=>({type:"cell"})),W8=mb(e=>{const{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=e,{x:a,y:s}=i,l=a?Array.from(new Set(r.map(y=>y[a]))):[],p=s?Array.from(new Set(r.map(y=>y[s]))):[];return(()=>{if(l.length&&p.length){const y=[];for(const b of l)for(const E of p)y.push({[a]:b,[s]:E});return y}if(l.length)return l.map(y=>({[a]:y}));if(p.length)return p.map(y=>({[s]:y}))})()}}]}}}),$8=mb((e,t=Lee,n=Dee,r=Nee,i={})=>{const{data:a,encode:s,children:l,scale:p,x:m=0,y=0,shareData:b=!1,key:E}=e,{value:O}=a,{x:P,y:I}=s,{color:N}=p,{domain:z}=N;return{children:(W,K,J)=>{const{x:oe,y:Te}=K,{paddingLeft:Re,paddingTop:We,marginLeft:ut,marginTop:ct}=J,{domain:Ft}=oe.getOptions(),{domain:ft}=Te.getOptions(),St=tg(W),Mt=W.map(t),Nt=W.map(({x:_r,y:Mr})=>[oe.invert(_r),Te.invert(Mr)]),Yt=Nt.map(([_r,Mr])=>fi=>{const{[P]:Qi,[I]:Ta}=fi;return(P!==void 0?Qi===_r:!0)&&(I!==void 0?Ta===Mr:!0)}).map(_r=>O.filter(_r)),fn=b?Pu(Yt,_r=>_r.length):void 0,Hn=Nt.map(([_r,Mr])=>({columnField:P,columnIndex:Ft.indexOf(_r),columnValue:_r,columnValuesLength:Ft.length,rowField:I,rowIndex:ft.indexOf(Mr),rowValue:Mr,rowValuesLength:ft.length})),cr=Hn.map(_r=>Array.isArray(l)?l:[l(_r)].flat(1));return St.flatMap(_r=>{const[Mr,fi,Qi,Ta]=Mt[_r],Fi=Hn[_r],Ci=Yt[_r];return cr[_r].map(Ga=>{var vo,cs,{scale:Wo,key:fs,facet:nu=!0,axis:Vu={},legend:ec={}}=Ga,uf=Iee(Ga,["scale","key","facet","axis","legend"]);const Fp=((vo=Wo==null?void 0:Wo.y)===null||vo===void 0?void 0:vo.guide)||Vu.y,gg=((cs=Wo==null?void 0:Wo.x)===null||cs===void 0?void 0:cs.guide)||Vu.x,i1={x:{tickCount:P?5:void 0},y:{tickCount:I?5:void 0}},ip=nu?Ci:Ci.length===0?[]:O,qv={color:{domain:z}},wu={x:G8(gg,n)(Fi,ip),y:G8(Fp,r)(Fi,ip)};return Object.assign(Object.assign({key:`${fs}-${_r}`,data:ip,margin:0,x:Mr+Re+m+ut,y:fi+We+y+ct,parentKey:E,width:Qi,height:Ta,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!ip.length,dataDomain:fn,scale:Pi(i1,Wo,qv),axis:Pi({},Vu,wu),legend:!1},uf),i)})})}}});function Lee(e){const{points:t}=e;return PM(t)}function tA(e,t){return t.length?Pi({title:!1,tick:null,label:null},e):Pi({title:!1,tick:null,label:null,grid:null},e)}function Dee(e){return(t,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:a,columnValuesLength:s}=t;if(r!==i-1)return tA(e,n);const l=a!==s-1?!1:void 0,p=n.length?void 0:null;return Pi({title:l,grid:p},e)}}function Nee(e){return(t,n)=>{const{rowIndex:r,columnIndex:i}=t;if(i!==0)return tA(e,n);const a=r!==0?!1:void 0,s=n.length?void 0:null;return Pi({title:a,grid:s},e)}}function G8(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}const X8=()=>e=>[hE.of(e).call(kP).call(RP).call(PP).call(kee).call(IP).call(W8).call($8).value()];X8.props={};var LP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bee=vb(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Fee=mb(e=>{const{data:t,children:n,x:r=0,y:i=0,key:a}=e;return{children:(l,p,m)=>{const{x:y,y:b}=p,{paddingLeft:E,paddingTop:O,marginLeft:P,marginTop:I}=m,{domain:N}=y.getOptions(),{domain:z}=b.getOptions(),V=tg(l),W=l.map(({points:Te})=>PM(Te)),K=l.map(({x:Te,y:Re})=>[y.invert(Te),b.invert(Re)]),J=K.map(([Te,Re])=>({columnField:Te,columnIndex:N.indexOf(Te),columnValue:Te,columnValuesLength:N.length,rowField:Re,rowIndex:z.indexOf(Re),rowValue:Re,rowValuesLength:z.length})),oe=J.map(Te=>Array.isArray(n)?n:[n(Te)].flat(1));return V.flatMap(Te=>{const[Re,We,ut,ct]=W[Te],[Ft,ft]=K[Te],St=J[Te];return oe[Te].map(Nt=>{var tn,Yt;const{scale:fn,key:Hn,encode:cr,axis:_r,interaction:Mr}=Nt,fi=LP(Nt,["scale","key","encode","axis","interaction"]),Qi=(tn=fn==null?void 0:fn.y)===null||tn===void 0?void 0:tn.guide,Ta=(Yt=fn==null?void 0:fn.x)===null||Yt===void 0?void 0:Yt.guide,Fi={x:{facet:!1},y:{facet:!1}},Ci={x:Uee(Ta)(St,t),y:jee(Qi)(St,t)},Ya={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:a,key:`${Hn}-${Te}`,x:Re+E+r+P,y:We+O+i+I,width:ut,height:ct,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:Pi(Fi,fn),axis:Pi(Ya,_r,Ci),legend:!1,encode:Pi({},cr,{x:Ft,y:ft}),interaction:Pi({},Mr,{legendFilter:!1})},fi)})})}}}),zee=mb(e=>{const{encode:t}=e,n=LP(e,["encode"]),{position:r=[],x:i=r,y:a=[...r].reverse()}=t,s=LP(t,["position","x","y"]),l=[];for(const p of[i].flat(1))for(const m of[a].flat(1))l.push({$x:p,$y:m});return Object.assign(Object.assign({},n),{data:l,encode:Object.assign(Object.assign({},s),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[a].flat(1).length===1&&{y:{paddingInner:0}})})});function Uee(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return tA(e,n)}}function jee(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{columnIndex:r}=t;if(r!==0)return tA(e,n)}}const Zee=()=>e=>[hE.of(e).call(kP).call(RP).call(Fee).call(zee).call(PP).call(IP).call(Bee).value()];var Vee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Hee=vb(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Wee=vb(e=>({coordinate:{type:"polar"}})),$ee=e=>{const{encode:t}=e,n=Vee(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function Y8(e){return t=>null}function Gee(e){const{points:t}=e,[n,r,i,a]=t,s=dc(n,a),l=$c(n,a),p=$c(r,i),m=v4(l,p),y=1/Math.sin(m/2),b=s/(1+y),E=b*Math.sqrt(2),[O,P]=i,N=gb(l)+m/2,z=b*y,V=O+z*Math.sin(N),W=P-z*Math.cos(N);return[V-E/2,W-E/2,E,E]}const Xee=()=>e=>[hE.of(e).call(kP).call($ee).call(RP).call(Wee).call(W8).call($8,Gee,Y8,Y8,{frame:!1}).call(PP).call(IP).call(Hee).value()];function Yee(e,t,n){const i=n,a=[0,i],s=[-i+1,-0+1];if(e==="normal")return a;if(e==="reverse")return s;if(e==="alternate")return t%2===0?a:s;if(e==="reverse-alternate")return t%2===0?s:a}function qee(e,t,n){const r=[e];for(;r.length;){const i=r.pop();i.animate=Pi({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});const{children:a}=i;Array.isArray(a)&&r.push(...a)}return e}const q8=()=>e=>{const{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:a="ease-in-out-sine"}=e,s=t.length;if(!Array.isArray(t)||s===0)return[];const{key:l}=t[0],p=t.map(m=>Object.assign(Object.assign({},m),{key:l})).map(m=>qee(m,n,a));return function*(){let m=0,y;for(;r==="infinite"||m<r;){const[b,E]=Yee(i,m,s);for(let O=b;O<E;O+=1){const P=Math.abs(O);y!==P&&(yield p[P]),y=P}m++}}};q8.props={};function _y(e,t,n){const{encode:r}=n;if(e===null)return[t];const i=Kee(e).map(s=>{var l;return[s,(l=ou(r,s))===null||l===void 0?void 0:l[0]]}).filter(([,s])=>cl(s)),a=s=>i.map(([,l])=>l[s]).join("-");return Array.from(Zl(t,a).values())}function K8(e){return Array.isArray(e)?ete(e):typeof e=="function"?Jee(e):e==="series"?Qee:e==="value"?tte:e==="sum"?nte:e==="maxIndex"?rte:()=>null}function Q8(e,t){for(const n of e)n.sort(t)}function J8(e,t){return(t==null?void 0:t.domain)||Array.from(new Set(e))}function Kee(e){return Array.isArray(e)?e:[e]}function Qee(e,t,n){return dE(r=>n[r])}function Jee(e){return(t,n,r)=>dE(i=>e(t[i]))}function ete(e){return(t,n,r)=>(i,a)=>e.reduce((s,l)=>s!==0?s:Gc(t[i][l],t[a][l]),0)}function tte(e,t,n){return dE(r=>t[r])}function nte(e,t,n){const r=tg(e),i=Array.from(Zl(r,s=>n[+s]).entries()),a=new Map(i.map(([s,l])=>[s,l.reduce((p,m)=>p+ +t[m])]));return dE(s=>a.get(n[s]))}function rte(e,t,n){const r=tg(e),i=Array.from(Zl(r,s=>n[+s]).entries()),a=new Map(i.map(([s,l])=>[s,_b(l,p=>t[p])]));return dE(s=>a.get(n[s]))}function dE(e){return(t,n)=>Gc(e(t),e(n))}const e7=(e={})=>{const{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:a="y1",series:s=!0}=e;return(l,p)=>{const{data:m,encode:y,style:b={}}=p,[E,O]=ou(y,"y"),[P,I]=ou(y,"y1"),[N]=s?H2(y,"series","color"):ou(y,"color"),z=_y(t,l,p),W=K8(n)(m,E,N);W&&Q8(z,W);const K=new Array(l.length),J=new Array(l.length),oe=new Array(l.length),Te=[],Re=[];for(const ft of z){r&&ft.reverse();const St=P?+P[ft[0]]:0,Mt=[],Nt=[];for(const Mr of ft){const fi=oe[Mr]=+E[Mr]-St;fi<0?Nt.push(Mr):fi>=0&&Mt.push(Mr)}const tn=Mt.length>0?Mt:Nt,Yt=Nt.length>0?Nt:Mt;let fn=Mt.length-1,Hn=0;for(;fn>0&&E[tn[fn]]===0;)fn--;for(;Hn<Yt.length-1&&E[Yt[Hn]]===0;)Hn++;Te.push(tn[fn]),Re.push(Yt[Hn]);let cr=St;for(const Mr of Nt.reverse()){const fi=oe[Mr];cr=K[Mr]=(J[Mr]=cr)+fi}let _r=St;for(const Mr of Mt){const fi=oe[Mr];fi>0?_r=K[Mr]=(J[Mr]=_r)+fi:K[Mr]=J[Mr]=_r}}const We=new Set(Te),ut=new Set(Re),ct=i==="y"?K:J,Ft=a==="y"?K:J;return[l,Pi({},p,{encode:{y0:bT(E,O),y:Hl(ct,O),y1:Hl(Ft,I)},style:Object.assign({first:(ft,St)=>We.has(St),last:(ft,St)=>ut.has(St)},b)})]}};e7.props={};function t7(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function ite(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i));else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,a+=r*(l-i))}if(n>1)return a/(n-1)}function n7(e,t){const n=ite(e,t);return n&&Math.sqrt(n)}function ate(e,t,n){const r=t7(e),i=n7(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}var r7=Array.prototype,ote=r7.slice,bve=r7.map;function DP(e){return()=>e}const ste=Math.sqrt(50),ute=Math.sqrt(10),lte=Math.sqrt(2);function nA(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=ste?10:a>=ute?5:a>=lte?2:1;let l,p,m;return i<0?(m=Math.pow(10,-i)/s,l=Math.round(e*m),p=Math.round(t*m),l/m<e&&++l,p/m>t&&--p,m=-m):(m=Math.pow(10,i)*s,l=Math.round(e/m),p=Math.round(t/m),l*m<e&&++l,p*m>t&&--p),p<l&&.5<=n&&n<2?nA(e,t,n*2):[l,p,m]}function cte(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?nA(t,e,n):nA(e,t,n);if(!(a>=i))return[];const l=a-i+1,p=new Array(l);if(r)if(s<0)for(let m=0;m<l;++m)p[m]=(a-m)/-s;else for(let m=0;m<l;++m)p[m]=(a-m)*s;else if(s<0)for(let m=0;m<l;++m)p[m]=(i+m)/-s;else for(let m=0;m<l;++m)p[m]=(i+m)*s;return p}function pE(e,t,n){return t=+t,e=+e,n=+n,nA(e,t,n)[2]}function xve(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?pE(t,e,n):pE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function fte(e,t,n){let r;for(;;){const i=pE(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function hte(e){return Math.max(1,Math.ceil(Math.log(t7(e))/Math.LN2)+1)}function dte(){var e=ey,t=og,n=hte;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,l,p,m=new Array(s);for(a=0;a<s;++a)m[a]=e(i[a],a,i);var y=t(m),b=y[0],E=y[1],O=n(m,b,E);if(!Array.isArray(O)){const W=E,K=+O;if(t===og&&([b,E]=fte(b,E,K)),O=cte(b,E,K),O[0]<=b&&(p=pE(b,E,K)),O[O.length-1]>=E)if(W>=E&&t===og){const J=pE(b,E,K);isFinite(J)&&(J>0?E=(Math.floor(E/J)+1)*J:J<0&&(E=(Math.ceil(E*-J)+1)/-J))}else O.pop()}for(var P=O.length,I=0,N=P;O[I]<=b;)++I;for(;O[N-1]>E;)--N;(I||N<P)&&(O=O.slice(I,N),P=N-I);var z=new Array(P+1),V;for(a=0;a<=P;++a)V=z[a]=[],V.x0=a>0?O[a-1]:b,V.x1=a<P?O[a]:E;if(isFinite(p)){if(p>0)for(a=0;a<s;++a)(l=m[a])!=null&&b<=l&&l<=E&&z[Math.min(P,Math.floor((l-b)/p))].push(i[a]);else if(p<0){for(a=0;a<s;++a)if((l=m[a])!=null&&b<=l&&l<=E){const W=Math.floor((b-l)*p);z[Math.min(P,W+(O[W]<=l))].push(i[a])}}}else for(a=0;a<s;++a)(l=m[a])!=null&&b<=l&&l<=E&&z[IQ(O,l,0,P)].push(i[a]);return z}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:DP(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:DP([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:DP(Array.isArray(i)?ote.call(i):i),r):n},r}function NP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?iE:PF(i);r>n;){if(r-n>600){const p=r-n+1,m=t-n+1,y=Math.log(p),b=.5*Math.exp(2*y/3),E=.5*Math.sqrt(y*b*(p-b)/p)*(m-p/2<0?-1:1),O=Math.max(n,Math.floor(t-m*b/p+E)),P=Math.min(r,Math.floor(t+(p-m)*b/p+E));NP(e,t,O,P,i)}const a=e[t];let s=n,l=r;for(vE(e,n,t),i(e[r],a)>0&&vE(e,n,r);s<l;){for(vE(e,s,l),++s,--l;i(e[s],a)<0;)++s;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?vE(e,n,l):(++l,vE(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function vE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pte(e,t=Gc){let n,r=!1;if(t.length===1){let i;for(const a of e){const s=t(a);(r?Gc(s,i)>0:Gc(s,s)===0)&&(n=a,i=s,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function rA(e,t,n){if(e=Float64Array.from(OQ(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return cv(e);if(t>=1)return Pu(e);var r,i=(r-1)*t,a=Math.floor(i),s=Pu(NP(e,a).subarray(0,a+1)),l=cv(e.subarray(a+1));return s+(l-s)*(i-a)}}function Eve(e,t,n=number){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return s+(l-s)*(i-a)}}function vte(e,t,n=oP){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(l,p)=>oP(n(e[p],p,e))),t<=0)return YT(r);if(t>=1)return _b(r);var r,i=Uint32Array.from(e,(l,p)=>p),a=r.length-1,s=Math.floor(a*t);return NP(i,s,0,a,(l,p)=>iE(r[l],r[p])),s=pte(i.subarray(0,s+1),l=>r[l]),s>=0?s:-1}}function BP(e,t){return rA(e,.5,t)}function mte(e,t){return vte(e,.5,t)}var gte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function by(e){return t=>t===null?e:`${e} of ${t}`}function yte(e){if(typeof e=="function")return[e,null];const n={mean:_te,max:xte,count:Ste,first:Tte,last:Ate,sum:wte,min:Ete,median:bte}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function _te(){const e=(n,r)=>cE(n,i=>+r[i]),t=by("mean");return[e,t]}function bte(){const e=(n,r)=>BP(n,i=>+r[i]),t=by("median");return[e,t]}function xte(){const e=(n,r)=>Pu(n,i=>+r[i]),t=by("max");return[e,t]}function Ete(){const e=(n,r)=>cv(n,i=>+r[i]),t=by("min");return[e,t]}function Ste(){const e=(n,r)=>n.length,t=by("count");return[e,t]}function wte(){const e=(n,r)=>Lp(n,i=>+r[i]),t=by("sum");return[e,t]}function Tte(){const e=(n,r)=>r[n[0]],t=by("first");return[e,t]}function Ate(){const e=(n,r)=>r[n[n.length-1]],t=by("last");return[e,t]}const FP=(e={})=>{const{groupBy:t}=e,n=gte(e,["groupBy"]);return(r,i)=>{const{data:a,encode:s}=i,l=t(r,i);if(!l)return[r,i];const p=(O,P)=>{if(O)return O;const{from:I}=P;if(!I)return O;const[,N]=ou(s,I);return N},m=Object.entries(n).map(([O,P])=>{const[I,N]=yte(P),[z,V]=ou(s,O),W=p(V,P),K=l.map(J=>I(J,z!=null?z:a));return[O,Object.assign(Object.assign({},qY(K,(N==null?void 0:N(W))||W)),{aggregate:!0})]}),y=Object.keys(s).map(O=>{const[P,I]=ou(s,O),N=l.map(z=>P[z[0]]);return[O,Hl(N,I)]}),b=l.map(O=>a[O[0]]);return[tg(l),Pi({},i,{data:b,encode:Object.fromEntries([...y,...m])})]}};FP.props={};var Cte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const i7="thresholds";function Ote(e){const[t,n]=og(e);return Math.min(200,ate(e,t,n))}const zP=(e={})=>{const{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=Cte(e,["groupChannels","binChannels"]),i={},a=(s,l)=>{const{encode:p}=l,m=n.map(P=>{const[I]=ou(p,P);return I}),y=ja(r,i7),b=s.filter(P=>m.every(I=>cl(I[P]))),E=[...t.map(P=>{const[I]=ou(p,P);return I}).filter(cl).map(P=>I=>P[I]),...n.map((P,I)=>{const N=m[I],z=y[P]||Ote(N),V=dte().thresholds(z).value(K=>+N[K])(b),W=new Map(V.flatMap(K=>{const{x0:J,x1:oe}=K,Te=`${J},${oe}`;return K.map(Re=>[Re,Te])}));return i[P]=W,K=>W.get(K)})],O=P=>E.map(I=>I(P)).join("-");return Array.from(Zl(b,O).values())};return FP(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([s])=>!s.startsWith(i7)))),Object.fromEntries(n.flatMap(s=>{const l=([m])=>+i[s].get(m).split(",")[0],p=([m])=>+i[s].get(m).split(",")[1];return p.from=s,[[s,l],[`${s}1`,p]]}))),{groupBy:a}))};zP.props={};const a7=(e={})=>{const{thresholds:t}=e;return zP(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};a7.props={};var Mte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const o7=(e={})=>{const{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,a=Mte(e,["groupBy","reverse","orderBy","padding"]);return(s,l)=>{const{data:p,encode:m,scale:y}=l,{series:b}=y,[E]=ou(m,"y"),[O]=H2(m,"series","color"),P=J8(O,b),I=_y(t,s,l),z=K8(r)(p,E,O);z&&Q8(I,z);const V=new Array(s.length);for(const W of I){n&&W.reverse();for(let K=0;K<W.length;K++)V[W[K]]=P[K]}return[s,Pi({},l,{scale:{series:{domain:P,paddingInner:i}},encode:{series:Hl(V)}})]}};o7.props={};function iA(e,t,n){if(e===null)return[-.5,.5];const r=J8(e,t),a=new fy({domain:r,range:[0,1],padding:n}).getBandWidth();return[-a/2,a/2]}function aA(e,t,n){return t*(1-e)+n*e}const s7=(e={})=>{const{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(a,s)=>{const{encode:l,scale:p}=s,{x:m,y}=p,[b]=ou(l,"x"),[E]=ou(l,"y"),O=iA(b,m,n),P=iA(E,y,r),I=a.map(()=>aA(i(),...P)),N=a.map(()=>aA(i(),...O));return[a,Pi({scale:{x:{padding:.5},y:{padding:.5}}},s,{encode:{dy:Hl(I),dx:Hl(N)}})]}};s7.props={};const u7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:a,scale:s}=i,{x:l}=s,[p]=ou(a,"x"),m=iA(p,l,t),y=r.map(()=>aA(n(),...m));return[r,Pi({scale:{x:{padding:.5}}},i,{encode:{dx:Hl(y)}})]}};u7.props={};const l7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:a,scale:s}=i,{y:l}=s,[p]=ou(a,"y"),m=iA(p,l,t),y=r.map(()=>aA(n(),...m));return[r,Pi({scale:{y:{padding:.5}}},i,{encode:{dy:Hl(y)}})]}};l7.props={};var Rte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const c7=(e={})=>{const{groupBy:t="x"}=e;return(n,r)=>{const{encode:i}=r,{x:a}=i,s=Rte(i,["x"]),l=Object.entries(s).filter(([E])=>E.startsWith("y")).map(([E])=>[E,ou(i,E)[0]]),p=l.map(([E])=>[E,new Array(n.length)]),m=_y(t,n,r),y=new Array(m.length);for(let E=0;E<m.length;E++){const P=m[E].flatMap(z=>l.map(([,V])=>+V[z])),[I,N]=og(P);y[E]=(I+N)/2}const b=Math.max(...y);for(let E=0;E<m.length;E++){const O=b-y[E],P=m[E];for(const I of P)for(let N=0;N<l.length;N++){const[,z]=l[N],[,V]=p[N];V[I]=+z[I]+O}}return[n,Pi({},r,{encode:Object.fromEntries(p.map(([E,O])=>[E,Hl(O,ou(i,E)[1])]))})]}};c7.props={};const f7=(e={})=>{const{groupBy:t="x",series:n=!0}=e;return(r,i)=>{const{encode:a}=i,[s]=ou(a,"y"),[l,p]=ou(a,"y1"),[m]=n?H2(a,"series","color"):ou(a,"color"),y=_y(t,r,i),b=new Array(r.length);for(const E of y){const O=E.map(P=>+s[P]);for(let P=0;P<E.length;P++){const I=E[P],N=Math.max(...O.filter((z,V)=>V!==P));b[I]=s[I]>N?N:s[I]}}return[r,Pi({},i,{encode:{y1:Hl(b,p)}})]}};f7.props={};const h7=e=>{const{groupBy:t=["x"],reducer:n=(s,l)=>l[s[0]],orderBy:r=null,reverse:i=!1,duration:a}=e;return(s,l)=>{const{encode:p}=l,y=(Array.isArray(t)?t:[t]).map(N=>[N,ou(p,N)[0]]);if(y.length===0)return[s,l];let b=[s];for(const[,N]of y){const z=[];for(const V of b){const W=Array.from(Zl(V,K=>N[K]).values());z.push(...W)}b=z}if(r){const[N]=ou(p,r);N&&b.sort((z,V)=>n(z,N)-n(V,N)),i&&b.reverse()}const E=(a||3e3)/b.length,[O]=a?[ly(s,E)]:H2(p,"enterDuration",ly(s,E)),[P]=H2(p,"enterDelay",ly(s,0)),I=new Array(s.length);for(let N=0,z=0;N<b.length;N++){const V=b[N],W=Pu(V,K=>+O[K]);for(const K of V)I[K]=+P[K]+z;z+=W}return[s,Pi({},l,{encode:{enterDuration:xT(O),enterDelay:xT(I)}})]}};h7.props={};var Pte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ite(e){return typeof e=="function"?e:{min:(n,r)=>cv(n,i=>r[+i]),max:(n,r)=>Pu(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>cE(n,i=>r[+i]),median:(n,r)=>BP(n,i=>r[+i]),sum:(n,r)=>Lp(n,i=>r[+i]),deviation:(n,r)=>n7(n,i=>r[+i])}[e]||Pu}const d7=(e={})=>{const{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{const{encode:a,tooltip:s}=i,{x:l}=a,p=Pte(a,["x"]),m=Object.entries(p).filter(([I])=>I.startsWith("y")).map(([I])=>[I,ou(a,I)[0]]),[,y]=m.find(([I])=>I==="y"),b=m.map(([I])=>[I,new Array(r.length)]),E=_y(t,r,i),O=Ite(n);for(const I of E){const N=O(I,y);for(const z of I)for(let V=0;V<m.length;V++){const[,W]=m[V],[,K]=b[V];K[z]=+W[z]/N}}const P=S0(s)||(s==null?void 0:s.items)&&(s==null?void 0:s.items.length)!==0;return[r,Pi({},i,Object.assign({encode:Object.fromEntries(b.map(([I,N])=>[I,Hl(N,ou(a,I)[1])]))},!P&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};d7.props={};function p7(e,t){return[e[0]]}function kte(e,t){const n=e.length-1;return[e[n]]}function Lte(e,t){const n=_b(e,r=>t[r]);return[e[n]]}function Dte(e,t){const n=YT(e,r=>t[r]);return[e[n]]}function Nte(e){return typeof e=="function"?e:{first:p7,last:kte,max:Lte,min:Dte}[e]||p7}const oA=(e={})=>{const{groupBy:t="series",channel:n,selector:r}=e;return(i,a)=>{const{encode:s}=a,l=_y(t,i,a),[p]=ou(s,n),m=Nte(r);return[l.flatMap(y=>m(y,p)),a]}};oA.props={};var Bte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const v7=(e={})=>{const{selector:t}=e,n=Bte(e,["selector"]);return oA(Object.assign({channel:"x",selector:t},n))};v7.props={};var Fte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const m7=(e={})=>{const{selector:t}=e,n=Fte(e,["selector"]);return oA(Object.assign({channel:"y",selector:t},n))};m7.props={};var zte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mE=(e={})=>{const{channels:t=["x","y"]}=e,n=zte(e,["channels"]),r=(i,a)=>_y(t,i,a);return FP(Object.assign(Object.assign({},n),{groupBy:r}))};mE.props={};const g7=(e={})=>mE(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));g7.props={};const y7=(e={})=>mE(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));y7.props={};const _7=(e={})=>mE(Object.assign(Object.assign({},e),{channels:["color"]}));_7.props={};function Ute(e,t,n){return(t.length!==2?lg(f2(e,t,n),([r,i],[a,s])=>Gc(i,s)||Gc(r,a)):lg(Zl(e,n),([r,i],[a,s])=>t(i,s)||Gc(r,a))).map(([r])=>r)}var b7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function jte(e,t,n){const{by:r=e,reducer:i="max"}=t,[a]=ou(n,r);if(typeof i=="function")return s=>i(s,a);if(i==="max")return s=>Pu(s,l=>+a[l]);if(i==="min")return s=>cv(s,l=>+a[l]);if(i==="sum")return s=>Lp(s,l=>+a[l]);if(i==="median")return s=>BP(s,l=>+a[l]);if(i==="mean")return s=>cE(s,l=>+a[l]);if(i==="first")return s=>a[s[0]];if(i==="last")return s=>a[s[s.length-1]];throw new Error(`Unknown reducer: ${i}`)}function Zte(e,t,n){const{reverse:r,channel:i}=n,{encode:a}=t,[s]=ou(a,i),l=lg(e,p=>s[p]);return r&&l.reverse(),[l,t]}function Vte(e,t,n){if(!Array.isArray(n))return e;const r=new Set(n);return e.filter(i=>r.has(t[i]))}function Hte(e,t,n){var r;const{reverse:i,slice:a,channel:s}=n,l=b7(n,["reverse","slice","channel"]),{encode:p,scale:m={}}=t,y=(r=m[s])===null||r===void 0?void 0:r.domain,[b]=ou(p,s),E=jte(s,l,p),O=Vte(e,b,y),P=Ute(O,E,z=>b[z]);i&&P.reverse();const I=typeof a=="number"?[0,a]:a,N=a?P.slice(...I):P;return[e,Pi(t,{scale:{[s]:{domain:N}}})]}const sA=(e={})=>{const{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,a=b7(e,["reverse","slice","channel","ordinal"]);return(s,l)=>i?Hte(s,l,Object.assign({reverse:t,slice:n,channel:r},a)):Zte(s,l,Object.assign({reverse:t,slice:n,channel:r},a))};sA.props={};const x7=(e={})=>sA(Object.assign(Object.assign({},e),{channel:"x"}));x7.props={};const E7=(e={})=>sA(Object.assign(Object.assign({},e),{channel:"y"}));E7.props={};const S7=(e={})=>sA(Object.assign(Object.assign({},e),{channel:"color"}));S7.props={};function Wte(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function $te(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>Lp(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}const w7=(e={})=>{const{field:t,channel:n="y",reducer:r="sum"}=e;return(i,a)=>{const{data:s,encode:l}=a,[p]=ou(l,"x"),m=t?Wte(s,t):ou(l,n)[0],y=$te(r,m),b=h2(i,y,E=>p[E]).map(E=>E[1]);return[i,Pi({},a,{scale:{x:{flex:b}}})]}};w7.props={};function Gte(e){const{padding:t=0,direction:n="col"}=e;return(r,i,a)=>{const s=r.length;if(s===0)return[];const{innerWidth:l,innerHeight:p}=a,m=p/l;let y=Math.ceil(Math.sqrt(i/m)),b=l/y,E=Math.ceil(i/y),O=E*b;for(;O>p;)y=y+1,b=l/y,E=Math.ceil(i/y),O=E*b;const P=p-E*b,I=E<=1?0:P/(E-1),[N,z]=E<=1?[(l-s*b)/(s-1),(p-b)/2]:[0,0];return r.map((V,W)=>{const[K,J,oe,Te]=PM(V),Re=n==="col"?W%y:Math.floor(W/E),We=n==="col"?Math.floor(W/y):W%E,ut=Re*b,ct=(E-We-1)*b+P,Ft=(b-t)/oe,ft=(b-t)/Te,St=ut-K+N*Re+1/2*t,Mt=ct-J-I*We-z+1/2*t;return`translate(${St}, ${Mt}) scale(${Ft}, ${ft})`})}}const T7=e=>(t,n)=>[t,Pi({},n,{modifier:Gte(e),axis:!1})];T7.props={};function Xte(e,t,n,r){const i=e.length;if(r>=i||r===0)return e;const a=O=>t[e[O]]*1,s=O=>n[e[O]]*1,l=[],p=(i-2)/(r-2);let m=0,y,b,E;l.push(m);for(let O=0;O<r-2;O++){let P=0,I=0,N=Math.floor((O+1)*p)+1,z=Math.floor((O+2)*p)+1;z=Math.min(z,i);const V=z-N;for(;N<z;N++)P+=a(N),I+=s(N);P/=V,I/=V;let W=Math.floor((O+0)*p)+1;const K=Math.floor((O+1)*p)+1,J=[a(m),s(m)];for(y=b=-1;W<K;W++)b=Math.abs((J[0]-P)*(a(W)-J[1])-(J[0]-s(W))*(I-J[0]))*.5,b>y&&(y=b,E=W);l.push(E),m=E}return l.push(i-1),l.map(O=>e[O])}function Yte(e){if(typeof e=="function")return e;if(e==="lttb")return Xte;const t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,a)=>[r[YT(r,s=>a[s])]],max:(r,i,a)=>[r[_b(r,s=>a[s])]],median:(r,i,a)=>[r[mte(r,s=>a[s])]]},n=t[e]||t.median;return(r,i,a,s)=>{const l=Math.max(1,Math.floor(r.length/s));return qte(r,l).flatMap(m=>n(m,i,a))}}function qte(e,t){const n=e.length,r=[];let i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}const A7=(e={})=>{const{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=Yte(t);return(a,s)=>{const{encode:l}=s,p=_y(r,a,s),[m]=ou(l,"x"),[y]=ou(l,"y");return[p.flatMap(b=>i(b,m,y,n)),s]}};A7.props={};function Kte(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}const C7=(e={})=>(t,n)=>{const{encode:r,data:i}=n,a=Object.entries(e).map(([y,b])=>{const[E]=ou(r,y);if(!E)return null;const[O,P=!0]=Kte(b);if(typeof O=="function")return I=>O(E[I]);if(P){const I=Array.isArray(O)?O:[O];return I.length===0?null:N=>I.includes(E[N])}else{const[I,N]=O;return z=>E[z]>=I&&E[z]<=N}}).filter(cl);if(a.length===0)return[t,n];const s=y=>a.every(b=>b(y)),l=t.filter(s),p=l.map((y,b)=>b),m=Object.entries(r).map(([y,b])=>[y,Object.assign(Object.assign({},b),{value:p.map(E=>b.value[l[E]]).filter(E=>E!==void 0)})]);return[p,Pi({},n,{encode:Object.fromEntries(m),data:l.map(y=>i[y])})]};C7.props={};var O7={},UP={},jP=34,gE=10,ZP=13;function M7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Qte(e,t){var n=M7(e);return function(r,i){return t(n(r),i,e)}}function R7(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Np(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Jte(e){return e<0?"-"+Np(-e,6):e>9999?"+"+Np(e,6):Np(e,4)}function ene(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Jte(e.getUTCFullYear(),4)+"-"+Np(e.getUTCMonth()+1,2)+"-"+Np(e.getUTCDate(),2)+(i?"T"+Np(t,2)+":"+Np(n,2)+":"+Np(r,2)+"."+Np(i,3)+"Z":r?"T"+Np(t,2)+":"+Np(n,2)+":"+Np(r,2)+"Z":n||t?"T"+Np(t,2)+":"+Np(n,2)+"Z":"")}function tne(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(b,E){var O,P,I=i(b,function(N,z){if(O)return O(N,z-1);P=N,O=E?Qte(N,E):M7(N)});return I.columns=P||[],I}function i(b,E){var O=[],P=b.length,I=0,N=0,z,V=P<=0,W=!1;b.charCodeAt(P-1)===gE&&--P,b.charCodeAt(P-1)===ZP&&--P;function K(){if(V)return UP;if(W)return W=!1,O7;var oe,Te=I,Re;if(b.charCodeAt(Te)===jP){for(;I++<P&&b.charCodeAt(I)!==jP||b.charCodeAt(++I)===jP;);return(oe=I)>=P?V=!0:(Re=b.charCodeAt(I++))===gE?W=!0:Re===ZP&&(W=!0,b.charCodeAt(I)===gE&&++I),b.slice(Te+1,oe-1).replace(/""/g,'"')}for(;I<P;){if((Re=b.charCodeAt(oe=I++))===gE)W=!0;else if(Re===ZP)W=!0,b.charCodeAt(I)===gE&&++I;else if(Re!==n)continue;return b.slice(Te,oe)}return V=!0,b.slice(Te,P)}for(;(z=K())!==UP;){for(var J=[];z!==O7&&z!==UP;)J.push(z),z=K();E&&(J=E(J,N++))==null||O.push(J)}return O}function a(b,E){return b.map(function(O){return E.map(function(P){return y(O[P])}).join(e)})}function s(b,E){return E==null&&(E=R7(b)),[E.map(y).join(e)].concat(a(b,E)).join(`
`)}function l(b,E){return E==null&&(E=R7(b)),a(b,E).join(`
`)}function p(b){return b.map(m).join(`
`)}function m(b){return b.map(y).join(e)}function y(b){return b==null?"":b instanceof Date?ene(b):t.test(b+="")?'"'+b.replace(/"/g,'""')+'"':b}return{parse:r,parseRows:i,format:s,formatBody:l,formatRows:p,formatRow:m,formatValue:y}}function nne(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))rne&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const rne=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var ine=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})};const P7=e=>{const{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>ine(void 0,void 0,void 0,function*(){const a=yield fetch(t);if(n==="csv"){const s=yield a.text();return tne(r).parse(s,i?nne:Jm)}else if(n==="json")return yield a.json();throw new Error(`Unknown format: ${n}.`)})};P7.props={};const I7=e=>{const{value:t}=e;return()=>t};I7.props={};function ane(e,t){return e.map(n=>{if(Array.isArray(n)){const[r,i=t]=n;return[r,i]}return[n,t]})}const k7=e=>{const{fields:t=[]}=e,n=ane(t,!0);return r=>{const i=(a,s)=>n.reduce((l,[p,m=!0])=>l!==0?l:m?a[p]<s[p]?-1:+(a[p]!==s[p]):a[p]>s[p]?-1:+(a[p]!==s[p]),0);return[...r].sort(i)}};k7.props={};function Sve(e){return e!=null&&!Number.isNaN(e)}const L7=e=>{const{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};L7.props={};function one(e){return e!=null&&!Number.isNaN(e)}const D7=e=>{const{callback:t=one}=e;return n=>n.filter(t)};D7.props={};function sne(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}const N7=e=>{const{fields:t}=e;return n=>n.map(r=>sne(r,t))};N7.props={};function une(e){return Object.keys(e).length===0}const B7=e=>t=>{if(!e||une(e))return t;const n=r=>Object.entries(r).reduce((i,[a,s])=>(i[e[a]||a]=s,i),{});return t.map(n)};B7.props={};function lne(e){return!e||Object.keys(e).length===0}const F7=e=>{const{fields:t,key:n="key",value:r="value"}=e;return i=>lne(t)?i:i.flatMap(a=>t.map(s=>Object.assign(Object.assign({},a),{[n]:s,[r]:a[s]})))};F7.props={};const z7=e=>{const{start:t,end:n}=e;return r=>r.slice(t,n)};z7.props={};const U7=e=>{const{callback:t=Jm}=e;return n=>t(n)};U7.props={};const j7=e=>{const{callback:t=Jm}=e;return n=>Array.isArray(n)?n.map(t):n};j7.props={};function Z7(e){return typeof e=="string"?t=>t[e]:e}const V7=e=>{const{join:t,on:n,select:r=[],as:i=r,unknown:a=NaN}=e,[s,l]=n,p=Z7(l),m=Z7(s),y=f2(t,([b])=>b,b=>p(b));return b=>b.map(E=>{const O=y.get(m(E));return Object.assign(Object.assign({},E),r.reduce((P,I,N)=>(P[i[N]]=O?O[I]:a,P),{}))})};V7.props={};var cne=D(53843),fne=D.n(cne);function wve(e){return e!=null&&!Number.isNaN(e)}const H7=e=>{const{field:t,groupBy:n,as:r=["y","size"],min:i,max:a,size:s=10,width:l}=e,[p,m]=r;return y=>Array.from(Zl(y,E=>n.map(O=>E[O]).join("-")).values()).map(E=>{const O=fne().create(E.map(N=>N[t]),{min:i,max:a,size:s,width:l}),P=O.map(N=>N.x),I=O.map(N=>N.y);return Object.assign(Object.assign({},E[0]),{[p]:P,[m]:I})})};H7.props={};const W7=()=>e=>(console.log("G2 data section:",e),e);W7.props={};function VP(e){const{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function $7(e,t){const[n,r]=e,[i,a]=t;return n>=i[0]&&n<=a[0]&&r>=i[1]&&r<=a[1]}function hne(e,t){const[n,r]=e;return!($7(n,t)&&$7(r,t))}function dne(e,t){const[n,r]=e,[i,a]=t;return n[0]<a[0]&&r[0]>i[0]&&n[1]<a[1]&&r[1]>i[1]}const pne=e=>{const{priority:t}=e;return n=>{const r=[];return t&&n.sort(t),n.forEach(i=>{oR(i);const a=i.getLocalBounds();r.some(l=>dne(VP(a),VP(l.getLocalBounds())))?aR(i):r.push(i)}),n}};function vne([e,t],[n,r]){return r>e&&t>n}function uA(){const e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function mne(e){const t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);const{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}const gne=e=>{const{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{const a=i.length;if(a<=1)return i;const[s,l]=uA(),[p,m]=uA(),[y,b]=uA(),[E,O]=uA();for(const P of i){const{min:I,max:N}=mne(P),[z,V]=I,[W,K]=N;l(P,V),m(P,V),b(P,K-V),O(P,[z,W])}for(let P=0;P<t;P++){i.sort((N,z)=>Gc(p(N),p(z)));let I=0;for(let N=0;N<a-1;N++){const z=i[N];let V=N+1,W;for(;(W=i[V])&&!vne(E(z),E(W));)V+=1;if(W){const K=p(z),J=y(z),oe=p(W),Te=oe-(K+J);if(Te<r){const Re=(r-Te)/2;I=Math.max(I,Re),m(z,K-Re),m(W,oe+Re)}}}if(I<n)break}for(const P of i)P.style.y+=p(P)-s(P);return i}},yne=()=>e=>(e.forEach(t=>{oR(t);const n=t.attr("bounds"),r=t.getLocalBounds();hne(VP(r),n)&&aR(t)}),e);function _ne(e){return typeof e=="object"?e:m0(e)}function HP(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function G7(e,t,n){return .2126*HP(e)+.7152*HP(t)+.0722*HP(n)}function X7(e,t){const{r:n,g:r,b:i}=e,{r:a,g:s,b:l}=t,p=G7(n,r,i),m=G7(a,s,l);return(Math.max(p,m)+.05)/(Math.min(p,m)+.05)}function bne(e,t){const n=_b(t,r=>X7(e,_ne(r)));return t[n]}const xne=e=>{const{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{const a=i.attr("dependentElement").parsedStyle.fill,s=i.parsedStyle.fill;X7(s,a)<t&&i.attr("fill",bne(a,n))}),r)};function Ene(){return{"data.fetch":P7,"data.inline":I7,"data.sortBy":k7,"data.sort":L7,"data.filter":D7,"data.pick":N7,"data.rename":B7,"data.fold":F7,"data.slice":z7,"data.custom":U7,"data.map":j7,"data.join":V7,"data.kde":H7,"data.log":W7,"transform.stackY":e7,"transform.binX":a7,"transform.bin":zP,"transform.dodgeX":o7,"transform.jitter":s7,"transform.jitterX":u7,"transform.jitterY":l7,"transform.symmetryY":c7,"transform.diffY":f7,"transform.stackEnter":h7,"transform.normalizeY":d7,"transform.select":oA,"transform.selectX":v7,"transform.selectY":m7,"transform.groupX":g7,"transform.groupY":y7,"transform.groupColor":_7,"transform.group":mE,"transform.sortX":x7,"transform.sortY":E7,"transform.sortColor":S7,"transform.flexX":w7,"transform.pack":T7,"transform.sample":A7,"transform.filter":C7,"coordinate.cartesian":CD,"coordinate.polar":w_,"coordinate.transpose":vR,"coordinate.theta":OD,"coordinate.parallel":mR,"coordinate.fisheye":MD,"coordinate.radial":S2,"coordinate.radar":RD,"encode.constant":PD,"encode.field":ID,"encode.transform":kD,"encode.column":LD,"mark.interval":WD,"mark.rect":GD,"mark.line":_6,"mark.point":oN,"mark.text":fN,"mark.cell":dN,"mark.area":xN,"mark.link":jR,"mark.image":DN,"mark.polygon":UN,"mark.box":HN,"mark.vector":$N,"mark.lineX":qN,"mark.lineY":JN,"mark.connector":rB,"mark.range":oB,"mark.rangeX":lB,"mark.rangeY":hB,"mark.path":gB,"mark.shape":bB,"mark.density":SB,"mark.heatmap":CB,"palette.category10":OB,"palette.category20":MB,"scale.linear":RB,"scale.ordinal":LB,"scale.band":BB,"scale.identity":FB,"scale.point":zB,"scale.time":sF,"scale.log":lF,"scale.pow":cF,"scale.sqrt":fF,"scale.threshold":hF,"scale.quantile":dF,"scale.quantize":pF,"scale.sequential":vF,"scale.constant":mF,"theme.classic":gF,"theme.classicDark":_F,"theme.academy":bF,"theme.light":eP,"theme.dark":yF,"component.axisX":xF,"component.axisY":EF,"component.legendCategory":nP,"component.legendContinuous":ay,"component.legends":wF,"component.title":AF,"component.sliderX":IF,"component.sliderY":kF,"component.scrollbarX":LF,"component.scrollbarY":DF,"animation.scaleInX":sP,"animation.scaleOutX":ZQ,"animation.scaleInY":NF,"animation.scaleOutY":VQ,"animation.waveIn":BF,"animation.fadeIn":FF,"animation.fadeOut":zF,"animation.zoomIn":HQ,"animation.zoomOut":WQ,"animation.pathIn":UF,"animation.morphing":HF,"animation.growInX":WF,"animation.growInY":$F,"interaction.elementHighlight":GT,"interaction.elementHighlightByX":JF,"interaction.elementHighlightByColor":e8,"interaction.elementSelect":XT,"interaction.elementSelectByX":t8,"interaction.elementSelectByColor":n8,"interaction.fisheye":uJ,"interaction.chartIndex":r8,"interaction.tooltip":m8,"interaction.legendFilter":LJ,"interaction.legendHighlight":DJ,"interaction.brushHighlight":EP,"interaction.brushXHighlight":jJ,"interaction.brushYHighlight":ZJ,"interaction.brushAxisHighlight":KJ,"interaction.brushFilter":AP,"interaction.brushXFilter":tee,"interaction.brushYFilter":nee,"interaction.sliderFilter":M8,"interaction.scrollbarFilter":see,"interaction.poptip":I8,"interaction.treemapDrillDown":Mee,"composition.spaceLayer":V8,"composition.spaceFlex":H8,"composition.facetRect":X8,"composition.repeatMatrix":Zee,"composition.facetCircle":Xee,"composition.timingKeyframe":q8,"labelTransform.overlapHide":pne,"labelTransform.overlapDodgeY":gne,"labelTransform.overflowHide":yne,"labelTransform.contrastReverse":xne}}var yE=e=>e;function lA(e,t){e&&q7.hasOwnProperty(e.type)&&q7[e.type](e,t)}var Y7={Feature:function(e,t){lA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)lA(n[r].geometry,t)}},q7={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){WP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)WP(n[r],t,0)},Polygon:function(e,t){K7(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)K7(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)lA(n[r],t)}};function WP(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function K7(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)WP(e[n],t,1);t.polygonEnd()}function jb(e,t){e&&Y7.hasOwnProperty(e.type)?Y7[e.type](e,t):lA(e,t)}class dg{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],s=t+a,l=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);l&&(n[r++]=l),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,a=i-(s-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=s+i,i==r-s&&(s=r))}return s}}function Tve(e,t){const n=new dg;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function Ave(e,t){const n=new dg;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}var ds=1e-6,Q7=1e-12,tu=Math.PI,sf=tu/2,J7=tu/4,dv=tu*2,Cd=180/tu,Xc=tu/180,ju=Math.abs,Zb=Math.atan,pg=Math.atan2,Ys=Math.cos,cA=Math.ceil,ez=Math.exp,Cve=Math.floor,Ove=Math.hypot,fA=Math.log,$P=Math.pow,Os=Math.sin,Gv=Math.sign||function(e){return e>0?1:e<0?-1:0},Bp=Math.sqrt,GP=Math.tan;function tz(e){return e>1?0:e<-1?tu:Math.acos(e)}function Xv(e){return e>1?sf:e<-1?-sf:Math.asin(e)}function Mve(e){return(e=Os(e/2))*e}function Yv(){}var XP=new dg,YP=new dg,nz,rz,qP,KP,xy={point:Yv,lineStart:Yv,lineEnd:Yv,polygonStart:function(){xy.lineStart=Sne,xy.lineEnd=Tne},polygonEnd:function(){xy.lineStart=xy.lineEnd=xy.point=Yv,XP.add(ju(YP)),YP=new dg},result:function(){var e=XP/2;return XP=new dg,e}};function Sne(){xy.point=wne}function wne(e,t){xy.point=iz,nz=qP=e,rz=KP=t}function iz(e,t){YP.add(KP*e-qP*t),qP=e,KP=t}function Tne(){iz(nz,rz)}var az=xy,Vb=1/0,hA=Vb,_E=-Vb,dA=_E,Ane={point:Cne,lineStart:Yv,lineEnd:Yv,polygonStart:Yv,polygonEnd:Yv,result:function(){var e=[[Vb,hA],[_E,dA]];return _E=dA=-(hA=Vb=1/0),e}};function Cne(e,t){e<Vb&&(Vb=e),e>_E&&(_E=e),t<hA&&(hA=t),t>dA&&(dA=t)}var pA=Ane,QP=0,JP=0,bE=0,vA=0,mA=0,Hb=0,eI=0,tI=0,xE=0,oz,sz,gm,ym,R0={point:J_,lineStart:uz,lineEnd:lz,polygonStart:function(){R0.lineStart=Rne,R0.lineEnd=Pne},polygonEnd:function(){R0.point=J_,R0.lineStart=uz,R0.lineEnd=lz},result:function(){var e=xE?[eI/xE,tI/xE]:Hb?[vA/Hb,mA/Hb]:bE?[QP/bE,JP/bE]:[NaN,NaN];return QP=JP=bE=vA=mA=Hb=eI=tI=xE=0,e}};function J_(e,t){QP+=e,JP+=t,++bE}function uz(){R0.point=One}function One(e,t){R0.point=Mne,J_(gm=e,ym=t)}function Mne(e,t){var n=e-gm,r=t-ym,i=Bp(n*n+r*r);vA+=i*(gm+e)/2,mA+=i*(ym+t)/2,Hb+=i,J_(gm=e,ym=t)}function lz(){R0.point=J_}function Rne(){R0.point=Ine}function Pne(){cz(oz,sz)}function Ine(e,t){R0.point=cz,J_(oz=gm=e,sz=ym=t)}function cz(e,t){var n=e-gm,r=t-ym,i=Bp(n*n+r*r);vA+=i*(gm+e)/2,mA+=i*(ym+t)/2,Hb+=i,i=ym*e-gm*t,eI+=i*(gm+e),tI+=i*(ym+t),xE+=i*3,J_(gm=e,ym=t)}var fz=R0;function hz(e){this._context=e}hz.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,dv);break}}},result:Yv};var nI=new dg,rI,dz,pz,EE,SE,gA={point:Yv,lineStart:function(){gA.point=kne},lineEnd:function(){rI&&vz(dz,pz),gA.point=Yv},polygonStart:function(){rI=!0},polygonEnd:function(){rI=null},result:function(){var e=+nI;return nI=new dg,e}};function kne(e,t){gA.point=vz,dz=EE=e,pz=SE=t}function vz(e,t){EE-=e,SE-=t,nI.add(Bp(EE*EE+SE*SE)),EE=e,SE=t}var mz=gA;let gz,yA,yz,_z;class bz{constructor(t){this._append=t==null?xz:Lne(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==yz||this._append!==yA){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,yz=r,yA=this._append,_z=this._,this._=i}this._+=_z;break}}}result(){const t=this._;return this._="",t.length?t:null}}function xz(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Lne(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return xz;if(t!==gz){const n=Mf(10,t);gz=t,yA=function(i){let a=1;this._+=i[0];for(const s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return yA}function Ez(e,t){let n=3,r=4.5,i,a;function s(l){return l&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),jb(l,i(a))),a.result()}return s.area=function(l){return jb(l,i(az)),az.result()},s.measure=function(l){return jb(l,i(mz)),mz.result()},s.bounds=function(l){return jb(l,i(pA)),pA.result()},s.centroid=function(l){return jb(l,i(fz)),fz.result()},s.projection=function(l){return arguments.length?(i=l==null?(e=null,yE):(e=l).stream,s):e},s.context=function(l){return arguments.length?(a=l==null?(t=null,new bz(n)):new hz(t=l),typeof r!="function"&&a.pointRadius(r),s):t},s.pointRadius=function(l){return arguments.length?(r=typeof l=="function"?l:(a.pointRadius(+l),+l),s):r},s.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const p=Math.floor(l);if(!(p>=0))throw new RangeError(`invalid digits: ${l}`);n=p}return t===null&&(a=new bz(n)),s},s.projection(e).digits(n).context(t)}function Wb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Sz(e,t,n){var r=Wb(e,t-ds,n).concat(t);return function(i){return r.map(function(a){return[i,a]})}}function wz(e,t,n){var r=Wb(e,t-ds,n).concat(t);return function(i){return r.map(function(a){return[a,i]})}}function Dne(){var e,t,n,r,i,a,s,l,p=10,m=p,y=90,b=360,E,O,P,I,N=2.5;function z(){return{type:"MultiLineString",coordinates:V()}}function V(){return Wb(cA(r/y)*y,n,y).map(P).concat(Wb(cA(l/b)*b,s,b).map(I)).concat(Wb(cA(t/p)*p,e,p).filter(function(W){return ju(W%y)>ds}).map(E)).concat(Wb(cA(a/m)*m,i,m).filter(function(W){return ju(W%b)>ds}).map(O))}return z.lines=function(){return V().map(function(W){return{type:"LineString",coordinates:W}})},z.outline=function(){return{type:"Polygon",coordinates:[P(r).concat(I(s).slice(1),P(n).reverse().slice(1),I(l).reverse().slice(1))]}},z.extent=function(W){return arguments.length?z.extentMajor(W).extentMinor(W):z.extentMinor()},z.extentMajor=function(W){return arguments.length?(r=+W[0][0],n=+W[1][0],l=+W[0][1],s=+W[1][1],r>n&&(W=r,r=n,n=W),l>s&&(W=l,l=s,s=W),z.precision(N)):[[r,l],[n,s]]},z.extentMinor=function(W){return arguments.length?(t=+W[0][0],e=+W[1][0],a=+W[0][1],i=+W[1][1],t>e&&(W=t,t=e,e=W),a>i&&(W=a,a=i,i=W),z.precision(N)):[[t,a],[e,i]]},z.step=function(W){return arguments.length?z.stepMajor(W).stepMinor(W):z.stepMinor()},z.stepMajor=function(W){return arguments.length?(y=+W[0],b=+W[1],z):[y,b]},z.stepMinor=function(W){return arguments.length?(p=+W[0],m=+W[1],z):[p,m]},z.precision=function(W){return arguments.length?(N=+W,E=Sz(a,i,90),O=wz(t,e,N),P=Sz(l,s,90),I=wz(r,n,N),z):N},z.extentMajor([[-180,-90+ds],[180,90-ds]]).extentMinor([[-180,-80-ds],[180,80+ds]])}function Nne(){return Dne()()}function Tz(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Yv,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function _A(e,t){return ju(e[0]-t[0])<ds&&ju(e[1]-t[1])<ds}function bA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Az(e,t,n,r,i){var a=[],s=[],l,p;if(e.forEach(function(P){if(!((I=P.length-1)<=0)){var I,N=P[0],z=P[I],V;if(_A(N,z)){if(!N[2]&&!z[2]){for(i.lineStart(),l=0;l<I;++l)i.point((N=P[l])[0],N[1]);i.lineEnd();return}z[0]+=2*ds}a.push(V=new bA(N,P,null,!0)),s.push(V.o=new bA(N,null,V,!1)),a.push(V=new bA(z,P,null,!1)),s.push(V.o=new bA(z,null,V,!0))}}),!!a.length){for(s.sort(t),Cz(a),Cz(s),l=0,p=s.length;l<p;++l)s[l].e=n=!n;for(var m=a[0],y,b;;){for(var E=m,O=!0;E.v;)if((E=E.n)===m)return;y=E.z,i.lineStart();do{if(E.v=E.o.v=!0,E.e){if(O)for(l=0,p=y.length;l<p;++l)i.point((b=y[l])[0],b[1]);else r(E.x,E.n.x,1,i);E=E.n}else{if(O)for(y=E.p.z,l=y.length-1;l>=0;--l)i.point((b=y[l])[0],b[1]);else r(E.x,E.p.x,-1,i);E=E.p}E=E.o,y=E.z,O=!O}while(!E.v);i.lineEnd()}}}function Cz(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function iI(e){return[pg(e[1],e[0]),Xv(e[2])]}function $b(e){var t=e[0],n=e[1],r=Ys(n);return[r*Ys(t),r*Os(t),Os(n)]}function xA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function EA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function aI(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function SA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function oI(e){var t=Bp(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function sI(e){return ju(e[0])<=tu?e[0]:Gv(e[0])*((ju(e[0])+tu)%dv-tu)}function Bne(e,t){var n=sI(t),r=t[1],i=Os(r),a=[Os(n),-Ys(n),0],s=0,l=0,p=new dg;i===1?r=sf+ds:i===-1&&(r=-sf-ds);for(var m=0,y=e.length;m<y;++m)if(E=(b=e[m]).length)for(var b,E,O=b[E-1],P=sI(O),I=O[1]/2+J7,N=Os(I),z=Ys(I),V=0;V<E;++V,P=K,N=oe,z=Te,O=W){var W=b[V],K=sI(W),J=W[1]/2+J7,oe=Os(J),Te=Ys(J),Re=K-P,We=Re>=0?1:-1,ut=We*Re,ct=ut>tu,Ft=N*oe;if(p.add(pg(Ft*We*Os(ut),z*Te+Ft*Ys(ut))),s+=ct?Re+We*dv:Re,ct^P>=n^K>=n){var ft=EA($b(O),$b(W));oI(ft);var St=EA(a,ft);oI(St);var Mt=(ct^Re>=0?-1:1)*Xv(St[2]);(r>Mt||r===Mt&&(ft[0]||ft[1]))&&(l+=ct^Re>=0?1:-1)}}return(s<-ds||s<ds&&p<-Q7)^l&1}function*Fne(e){for(const t of e)yield*t}function Oz(e){return Array.from(Fne(e))}function Mz(e,t,n,r){return function(i){var a=t(i),s=Tz(),l=t(s),p=!1,m,y,b,E={point:O,lineStart:I,lineEnd:N,polygonStart:function(){E.point=z,E.lineStart=V,E.lineEnd=W,y=[],m=[]},polygonEnd:function(){E.point=O,E.lineStart=I,E.lineEnd=N,y=Oz(y);var K=Bne(m,r);y.length?(p||(i.polygonStart(),p=!0),Az(y,Une,K,n,i)):K&&(p||(i.polygonStart(),p=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),p&&(i.polygonEnd(),p=!1),y=m=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function O(K,J){e(K,J)&&i.point(K,J)}function P(K,J){a.point(K,J)}function I(){E.point=P,a.lineStart()}function N(){E.point=O,a.lineEnd()}function z(K,J){b.push([K,J]),l.point(K,J)}function V(){l.lineStart(),b=[]}function W(){z(b[0][0],b[0][1]),l.lineEnd();var K=l.clean(),J=s.result(),oe,Te=J.length,Re,We,ut;if(b.pop(),m.push(b),b=null,!!Te){if(K&1){if(We=J[0],(Re=We.length-1)>0){for(p||(i.polygonStart(),p=!0),i.lineStart(),oe=0;oe<Re;++oe)i.point((ut=We[oe])[0],ut[1]);i.lineEnd()}return}Te>1&&K&2&&J.push(J.pop().concat(J.shift())),y.push(J.filter(zne))}}return E}}function zne(e){return e.length>1}function Une(e,t){return((e=e.x)[0]<0?e[1]-sf-ds:sf-e[1])-((t=t.x)[0]<0?t[1]-sf-ds:sf-t[1])}var Rz=Mz(function(){return!0},jne,Vne,[-tu,-sf]);function jne(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,s){var l=a>0?tu:-tu,p=ju(a-t);ju(p-tu)<ds?(e.point(t,n=(n+s)/2>0?sf:-sf),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(a,n),i=0):r!==l&&p>=tu&&(ju(t-r)<ds&&(t-=r*ds),ju(a-l)<ds&&(a-=l*ds),n=Zne(t,n,a,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),i=0),e.point(t=a,n=s),r=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Zne(e,t,n,r){var i,a,s=Os(e-n);return ju(s)>ds?Zb((Os(t)*(a=Ys(r))*Os(n)-Os(r)*(i=Ys(t))*Os(e))/(i*a*s)):(t+r)/2}function Vne(e,t,n,r){var i;if(e==null)i=n*sf,r.point(-tu,i),r.point(0,i),r.point(tu,i),r.point(tu,0),r.point(tu,-i),r.point(0,-i),r.point(-tu,-i),r.point(-tu,0),r.point(-tu,i);else if(ju(e[0]-t[0])>ds){var a=e[0]<t[0]?tu:-tu;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Pz(e,t,n,r,i,a){if(n){var s=Ys(t),l=Os(t),p=r*n;i==null?(i=t+r*dv,a=t-p/2):(i=Iz(s,i),a=Iz(s,a),(r>0?i<a:i>a)&&(i+=r*dv));for(var m,y=i;r>0?y>a:y<a;y-=p)m=iI([s,-l*Ys(y),-l*Os(y)]),e.point(m[0],m[1])}}function Iz(e,t){t=$b(t),t[0]-=e,oI(t);var n=tz(-t[1]);return((-t[2]<0?-n:n)+dv-ds)%dv}function Rve(){var e=constant([0,0]),t=constant(90),n=constant(2),r,i,a={point:s};function s(p,m){r.push(p=i(p,m)),p[0]*=degrees,p[1]*=degrees}function l(){var p=e.apply(this,arguments),m=t.apply(this,arguments)*radians,y=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-p[0]*radians,-p[1]*radians,0).invert,Pz(a,m,y,1),p={type:"Polygon",coordinates:[r]},r=i=null,p}return l.center=function(p){return arguments.length?(e=typeof p=="function"?p:constant([+p[0],+p[1]]),l):e},l.radius=function(p){return arguments.length?(t=typeof p=="function"?p:constant(+p),l):t},l.precision=function(p){return arguments.length?(n=typeof p=="function"?p:constant(+p),l):n},l}function Hne(e){var t=Ys(e),n=2*Xc,r=t>0,i=ju(t)>ds;function a(y,b,E,O){Pz(O,e,n,E,y,b)}function s(y,b){return Ys(y)*Ys(b)>t}function l(y){var b,E,O,P,I;return{lineStart:function(){P=O=!1,I=1},point:function(N,z){var V=[N,z],W,K=s(N,z),J=r?K?0:m(N,z):K?m(N+(N<0?tu:-tu),z):0;if(!b&&(P=O=K)&&y.lineStart(),K!==O&&(W=p(b,V),(!W||_A(b,W)||_A(V,W))&&(V[2]=1)),K!==O)I=0,K?(y.lineStart(),W=p(V,b),y.point(W[0],W[1])):(W=p(b,V),y.point(W[0],W[1],2),y.lineEnd()),b=W;else if(i&&b&&r^K){var oe;!(J&E)&&(oe=p(V,b,!0))&&(I=0,r?(y.lineStart(),y.point(oe[0][0],oe[0][1]),y.point(oe[1][0],oe[1][1]),y.lineEnd()):(y.point(oe[1][0],oe[1][1]),y.lineEnd(),y.lineStart(),y.point(oe[0][0],oe[0][1],3)))}K&&(!b||!_A(b,V))&&y.point(V[0],V[1]),b=V,O=K,E=J},lineEnd:function(){O&&y.lineEnd(),b=null},clean:function(){return I|(P&&O)<<1}}}function p(y,b,E){var O=$b(y),P=$b(b),I=[1,0,0],N=EA(O,P),z=xA(N,N),V=N[0],W=z-V*V;if(!W)return!E&&y;var K=t*z/W,J=-t*V/W,oe=EA(I,N),Te=SA(I,K),Re=SA(N,J);aI(Te,Re);var We=oe,ut=xA(Te,We),ct=xA(We,We),Ft=ut*ut-ct*(xA(Te,Te)-1);if(!(Ft<0)){var ft=Bp(Ft),St=SA(We,(-ut-ft)/ct);if(aI(St,Te),St=iI(St),!E)return St;var Mt=y[0],Nt=b[0],tn=y[1],Yt=b[1],fn;Nt<Mt&&(fn=Mt,Mt=Nt,Nt=fn);var Hn=Nt-Mt,cr=ju(Hn-tu)<ds,_r=cr||Hn<ds;if(!cr&&Yt<tn&&(fn=tn,tn=Yt,Yt=fn),_r?cr?tn+Yt>0^St[1]<(ju(St[0]-Mt)<ds?tn:Yt):tn<=St[1]&&St[1]<=Yt:Hn>tu^(Mt<=St[0]&&St[0]<=Nt)){var Mr=SA(We,(-ut+ft)/ct);return aI(Mr,Te),[St,iI(Mr)]}}}function m(y,b){var E=r?e:tu-e,O=0;return y<-E?O|=1:y>E&&(O|=2),b<-E?O|=4:b>E&&(O|=8),O}return Mz(s,l,a,r?[0,-e]:[-tu,e-tu])}function Wne(e,t,n,r,i,a){var s=e[0],l=e[1],p=t[0],m=t[1],y=0,b=1,E=p-s,O=m-l,P;if(P=n-s,!(!E&&P>0)){if(P/=E,E<0){if(P<y)return;P<b&&(b=P)}else if(E>0){if(P>b)return;P>y&&(y=P)}if(P=i-s,!(!E&&P<0)){if(P/=E,E<0){if(P>b)return;P>y&&(y=P)}else if(E>0){if(P<y)return;P<b&&(b=P)}if(P=r-l,!(!O&&P>0)){if(P/=O,O<0){if(P<y)return;P<b&&(b=P)}else if(O>0){if(P>b)return;P>y&&(y=P)}if(P=a-l,!(!O&&P<0)){if(P/=O,O<0){if(P>b)return;P>y&&(y=P)}else if(O>0){if(P<y)return;P<b&&(b=P)}return y>0&&(e[0]=s+y*E,e[1]=l+y*O),b<1&&(t[0]=s+b*E,t[1]=l+b*O),!0}}}}}var wE=1e9,wA=-wE;function kz(e,t,n,r){function i(m,y){return e<=m&&m<=n&&t<=y&&y<=r}function a(m,y,b,E){var O=0,P=0;if(m==null||(O=s(m,b))!==(P=s(y,b))||p(m,y)<0^b>0)do E.point(O===0||O===3?e:n,O>1?r:t);while((O=(O+b+4)%4)!==P);else E.point(y[0],y[1])}function s(m,y){return ju(m[0]-e)<ds?y>0?0:3:ju(m[0]-n)<ds?y>0?2:1:ju(m[1]-t)<ds?y>0?1:0:y>0?3:2}function l(m,y){return p(m.x,y.x)}function p(m,y){var b=s(m,1),E=s(y,1);return b!==E?b-E:b===0?y[1]-m[1]:b===1?m[0]-y[0]:b===2?m[1]-y[1]:y[0]-m[0]}return function(m){var y=m,b=Tz(),E,O,P,I,N,z,V,W,K,J,oe,Te={point:Re,lineStart:Ft,lineEnd:ft,polygonStart:ut,polygonEnd:ct};function Re(Mt,Nt){i(Mt,Nt)&&y.point(Mt,Nt)}function We(){for(var Mt=0,Nt=0,tn=O.length;Nt<tn;++Nt)for(var Yt=O[Nt],fn=1,Hn=Yt.length,cr=Yt[0],_r,Mr,fi=cr[0],Qi=cr[1];fn<Hn;++fn)_r=fi,Mr=Qi,cr=Yt[fn],fi=cr[0],Qi=cr[1],Mr<=r?Qi>r&&(fi-_r)*(r-Mr)>(Qi-Mr)*(e-_r)&&++Mt:Qi<=r&&(fi-_r)*(r-Mr)<(Qi-Mr)*(e-_r)&&--Mt;return Mt}function ut(){y=b,E=[],O=[],oe=!0}function ct(){var Mt=We(),Nt=oe&&Mt,tn=(E=Oz(E)).length;(Nt||tn)&&(m.polygonStart(),Nt&&(m.lineStart(),a(null,null,1,m),m.lineEnd()),tn&&Az(E,l,Mt,a,m),m.polygonEnd()),y=m,E=O=P=null}function Ft(){Te.point=St,O&&O.push(P=[]),J=!0,K=!1,V=W=NaN}function ft(){E&&(St(I,N),z&&K&&b.rejoin(),E.push(b.result())),Te.point=Re,K&&y.lineEnd()}function St(Mt,Nt){var tn=i(Mt,Nt);if(O&&P.push([Mt,Nt]),J)I=Mt,N=Nt,z=tn,J=!1,tn&&(y.lineStart(),y.point(Mt,Nt));else if(tn&&K)y.point(Mt,Nt);else{var Yt=[V=Math.max(wA,Math.min(wE,V)),W=Math.max(wA,Math.min(wE,W))],fn=[Mt=Math.max(wA,Math.min(wE,Mt)),Nt=Math.max(wA,Math.min(wE,Nt))];Wne(Yt,fn,e,t,n,r)?(K||(y.lineStart(),y.point(Yt[0],Yt[1])),y.point(fn[0],fn[1]),tn||y.lineEnd(),oe=!1):tn&&(y.lineStart(),y.point(Mt,Nt),oe=!1)}V=Mt,W=Nt,K=tn}return Te}}function uI(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function lI(e,t){return ju(e)>tu&&(e-=Math.round(e/dv)*dv),[e,t]}lI.invert=lI;function Lz(e,t,n){return(e%=dv)?t||n?uI(Nz(e),Bz(t,n)):Nz(e):t||n?Bz(t,n):lI}function Dz(e){return function(t,n){return t+=e,ju(t)>tu&&(t-=Math.round(t/dv)*dv),[t,n]}}function Nz(e){var t=Dz(e);return t.invert=Dz(-e),t}function Bz(e,t){var n=Ys(e),r=Os(e),i=Ys(t),a=Os(t);function s(l,p){var m=Ys(p),y=Ys(l)*m,b=Os(l)*m,E=Os(p),O=E*n+y*r;return[pg(b*i-O*a,y*n-E*r),Xv(O*i+b*a)]}return s.invert=function(l,p){var m=Ys(p),y=Ys(l)*m,b=Os(l)*m,E=Os(p),O=E*i-b*a;return[pg(b*i+E*a,y*n+O*r),Xv(O*n-y*r)]},s}function $ne(e){e=Lz(e[0]*Xc,e[1]*Xc,e.length>2?e[2]*Xc:0);function t(n){return n=e(n[0]*Xc,n[1]*Xc),n[0]*=Cd,n[1]*=Cd,n}return t.invert=function(n){return n=e.invert(n[0]*Xc,n[1]*Xc),n[0]*=Cd,n[1]*=Cd,n},t}function Pve(e){return{stream:TE(e)}}function TE(e){return function(t){var n=new cI;for(var r in e)n[r]=e[r];return n.stream=t,n}}function cI(){}cI.prototype={constructor:cI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fI(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),jb(n,e.stream(pA)),t(pA.result()),r!=null&&e.clipExtent(r),e}function TA(e,t,n){return fI(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),l=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,p=+t[0][1]+(a-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([l,p])},n)}function hI(e,t,n){return TA(e,[[0,0],t],n)}function dI(e,t,n){return fI(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),s=(i-a*(r[1][0]+r[0][0]))/2,l=-a*r[0][1];e.scale(150*a).translate([s,l])},n)}function pI(e,t,n){return fI(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),s=-a*r[0][0],l=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,l])},n)}var Fz=16,Gne=Ys(30*Xc);function zz(e,t){return+t?Yne(e,t):Xne(e)}function Xne(e){return TE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Yne(e,t){function n(r,i,a,s,l,p,m,y,b,E,O,P,I,N){var z=m-r,V=y-i,W=z*z+V*V;if(W>4*t&&I--){var K=s+E,J=l+O,oe=p+P,Te=Bp(K*K+J*J+oe*oe),Re=Xv(oe/=Te),We=ju(ju(oe)-1)<ds||ju(a-b)<ds?(a+b)/2:pg(J,K),ut=e(We,Re),ct=ut[0],Ft=ut[1],ft=ct-r,St=Ft-i,Mt=V*ft-z*St;(Mt*Mt/W>t||ju((z*ft+V*St)/W-.5)>.3||s*E+l*O+p*P<Gne)&&(n(r,i,a,s,l,p,ct,Ft,We,K/=Te,J/=Te,oe,I,N),N.point(ct,Ft),n(ct,Ft,We,K,J,oe,m,y,b,E,O,P,I,N))}}return function(r){var i,a,s,l,p,m,y,b,E,O,P,I,N={point:z,lineStart:V,lineEnd:K,polygonStart:function(){r.polygonStart(),N.lineStart=J},polygonEnd:function(){r.polygonEnd(),N.lineStart=V}};function z(Re,We){Re=e(Re,We),r.point(Re[0],Re[1])}function V(){b=NaN,N.point=W,r.lineStart()}function W(Re,We){var ut=$b([Re,We]),ct=e(Re,We);n(b,E,y,O,P,I,b=ct[0],E=ct[1],y=Re,O=ut[0],P=ut[1],I=ut[2],Fz,r),r.point(b,E)}function K(){N.point=z,r.lineEnd()}function J(){V(),N.point=oe,N.lineEnd=Te}function oe(Re,We){W(i=Re,We),a=b,s=E,l=O,p=P,m=I,N.point=W}function Te(){n(b,E,y,O,P,I,a,s,i,l,p,m,Fz,r),N.lineEnd=K,K()}return N}}var qne=TE({point:function(e,t){this.stream.point(e*Xc,t*Xc)}});function Kne(e){return TE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Qne(e,t,n,r,i){function a(s,l){return s*=r,l*=i,[t+e*s,n-e*l]}return a.invert=function(s,l){return[(s-t)/e*r,(n-l)/e*i]},a}function Uz(e,t,n,r,i,a){if(!a)return Qne(e,t,n,r,i);var s=Ys(a),l=Os(a),p=s*e,m=l*e,y=s/e,b=l/e,E=(l*n-s*t)/e,O=(l*t+s*n)/e;function P(I,N){return I*=r,N*=i,[p*I-m*N+t,n-m*I-p*N]}return P.invert=function(I,N){return[r*(y*I-b*N+E),i*(O-b*I-y*N)]},P}function _m(e){return vI(function(){return e})()}function vI(e){var t,n=150,r=480,i=250,a=0,s=0,l=0,p=0,m=0,y,b=0,E=1,O=1,P=null,I=Rz,N=null,z,V,W,K=yE,J=.5,oe,Te,Re,We,ut;function ct(Mt){return Re(Mt[0]*Xc,Mt[1]*Xc)}function Ft(Mt){return Mt=Re.invert(Mt[0],Mt[1]),Mt&&[Mt[0]*Cd,Mt[1]*Cd]}ct.stream=function(Mt){return We&&ut===Mt?We:We=qne(Kne(y)(I(oe(K(ut=Mt)))))},ct.preclip=function(Mt){return arguments.length?(I=Mt,P=void 0,St()):I},ct.postclip=function(Mt){return arguments.length?(K=Mt,N=z=V=W=null,St()):K},ct.clipAngle=function(Mt){return arguments.length?(I=+Mt?Hne(P=Mt*Xc):(P=null,Rz),St()):P*Cd},ct.clipExtent=function(Mt){return arguments.length?(K=Mt==null?(N=z=V=W=null,yE):kz(N=+Mt[0][0],z=+Mt[0][1],V=+Mt[1][0],W=+Mt[1][1]),St()):N==null?null:[[N,z],[V,W]]},ct.scale=function(Mt){return arguments.length?(n=+Mt,ft()):n},ct.translate=function(Mt){return arguments.length?(r=+Mt[0],i=+Mt[1],ft()):[r,i]},ct.center=function(Mt){return arguments.length?(a=Mt[0]%360*Xc,s=Mt[1]%360*Xc,ft()):[a*Cd,s*Cd]},ct.rotate=function(Mt){return arguments.length?(l=Mt[0]%360*Xc,p=Mt[1]%360*Xc,m=Mt.length>2?Mt[2]%360*Xc:0,ft()):[l*Cd,p*Cd,m*Cd]},ct.angle=function(Mt){return arguments.length?(b=Mt%360*Xc,ft()):b*Cd},ct.reflectX=function(Mt){return arguments.length?(E=Mt?-1:1,ft()):E<0},ct.reflectY=function(Mt){return arguments.length?(O=Mt?-1:1,ft()):O<0},ct.precision=function(Mt){return arguments.length?(oe=zz(Te,J=Mt*Mt),St()):Bp(J)},ct.fitExtent=function(Mt,Nt){return TA(ct,Mt,Nt)},ct.fitSize=function(Mt,Nt){return hI(ct,Mt,Nt)},ct.fitWidth=function(Mt,Nt){return dI(ct,Mt,Nt)},ct.fitHeight=function(Mt,Nt){return pI(ct,Mt,Nt)};function ft(){var Mt=Uz(n,0,0,E,O,b).apply(null,t(a,s)),Nt=Uz(n,r-Mt[0],i-Mt[1],E,O,b);return y=Lz(l,p,m),Te=uI(t,Nt),Re=uI(y,Te),oe=zz(Te,J),St()}function St(){return We=ut=null,ct}return function(){return t=e.apply(this,arguments),ct.invert=t.invert&&Ft,ft()}}function mI(e){var t=0,n=tu/3,r=vI(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Xc,n=a[1]*Xc):[t*Cd,n*Cd]},i}function Jne(e){var t=Ys(e);function n(r,i){return[r*t,Os(i)/t]}return n.invert=function(r,i){return[r/t,Xv(i*t)]},n}function jz(e,t){var n=Os(e),r=(n+Os(t))/2;if(ju(r)<ds)return Jne(e);var i=1+n*(2*r-n),a=Bp(i)/r;function s(l,p){var m=Bp(i-2*r*Os(p))/r;return[m*Os(l*=r),a-m*Ys(l)]}return s.invert=function(l,p){var m=a-p,y=pg(l,ju(m))*Gv(m);return m*r<0&&(y-=tu*Gv(l)*Gv(m)),[y/r,Xv((i-(l*l+m*m)*r*r)/(2*r))]},s}function AA(){return mI(jz).scale(155.424).center([0,33.6442])}function Zz(){return AA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ere(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function tre(){var e,t,n=Zz(),r,i=AA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=AA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,p,m={point:function(E,O){p=[E,O]}};function y(E){var O=E[0],P=E[1];return p=null,r.point(O,P),p||(a.point(O,P),p)||(l.point(O,P),p)}y.invert=function(E){var O=n.scale(),P=n.translate(),I=(E[0]-P[0])/O,N=(E[1]-P[1])/O;return(N>=.12&&N<.234&&I>=-.425&&I<-.214?i:N>=.166&&N<.234&&I>=-.214&&I<-.115?s:n).invert(E)},y.stream=function(E){return e&&t===E?e:e=ere([n.stream(t=E),i.stream(E),s.stream(E)])},y.precision=function(E){return arguments.length?(n.precision(E),i.precision(E),s.precision(E),b()):n.precision()},y.scale=function(E){return arguments.length?(n.scale(E),i.scale(E*.35),s.scale(E),y.translate(n.translate())):n.scale()},y.translate=function(E){if(!arguments.length)return n.translate();var O=n.scale(),P=+E[0],I=+E[1];return r=n.translate(E).clipExtent([[P-.455*O,I-.238*O],[P+.455*O,I+.238*O]]).stream(m),a=i.translate([P-.307*O,I+.201*O]).clipExtent([[P-.425*O+ds,I+.12*O+ds],[P-.214*O-ds,I+.234*O-ds]]).stream(m),l=s.translate([P-.205*O,I+.212*O]).clipExtent([[P-.214*O+ds,I+.166*O+ds],[P-.115*O-ds,I+.234*O-ds]]).stream(m),b()},y.fitExtent=function(E,O){return TA(y,E,O)},y.fitSize=function(E,O){return hI(y,E,O)},y.fitWidth=function(E,O){return dI(y,E,O)},y.fitHeight=function(E,O){return pI(y,E,O)};function b(){return e=t=null,y}return y.scale(1070)}function Vz(e){return function(t,n){var r=Ys(t),i=Ys(n),a=e(r*i);return a===1/0?[2,0]:[a*i*Os(t),a*Os(n)]}}function AE(e){return function(t,n){var r=Bp(t*t+n*n),i=e(r),a=Os(i),s=Ys(i);return[pg(t*a,r*s),Xv(r&&n*a/r)]}}var gI=Vz(function(e){return Bp(2/(1+e))});gI.invert=AE(function(e){return 2*Xv(e/2)});function nre(){return _m(gI).scale(124.75).clipAngle(180-.001)}var yI=Vz(function(e){return(e=tz(e))&&e/Os(e)});yI.invert=AE(function(e){return e});function rre(){return _m(yI).scale(79.4188).clipAngle(180-.001)}function CE(e,t){return[e,fA(GP((sf+t)/2))]}CE.invert=function(e,t){return[e,2*Zb(ez(t))-sf]};function ire(){return Hz(CE).scale(961/dv)}function Hz(e){var t=_m(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,s=null,l,p,m;t.scale=function(b){return arguments.length?(r(b),y()):r()},t.translate=function(b){return arguments.length?(i(b),y()):i()},t.center=function(b){return arguments.length?(n(b),y()):n()},t.clipExtent=function(b){return arguments.length?(b==null?s=l=p=m=null:(s=+b[0][0],l=+b[0][1],p=+b[1][0],m=+b[1][1]),y()):s==null?null:[[s,l],[p,m]]};function y(){var b=tu*r(),E=t($ne(t.rotate()).invert([0,0]));return a(s==null?[[E[0]-b,E[1]-b],[E[0]+b,E[1]+b]]:e===CE?[[Math.max(E[0]-b,s),l],[Math.min(E[0]+b,p),m]]:[[s,Math.max(E[1]-b,l)],[p,Math.min(E[1]+b,m)]])}return y()}function CA(e){return GP((sf+e)/2)}function Wz(e,t){var n=Ys(e),r=e===t?Os(e):fA(n/Ys(t))/fA(CA(t)/CA(e)),i=n*$P(CA(e),r)/r;if(!r)return CE;function a(s,l){i>0?l<-sf+ds&&(l=-sf+ds):l>sf-ds&&(l=sf-ds);var p=i/$P(CA(l),r);return[p*Os(r*s),i-p*Ys(r*s)]}return a.invert=function(s,l){var p=i-l,m=Gv(r)*Bp(s*s+p*p),y=pg(s,ju(p))*Gv(p);return p*r<0&&(y-=tu*Gv(s)*Gv(p)),[y/r,2*Zb($P(i/m,1/r))-sf]},a}function are(){return mI(Wz).scale(109.5).parallels([30,30])}function OE(e,t){return[e,t]}OE.invert=OE;function ore(){return _m(OE).scale(152.63)}function $z(e,t){var n=Ys(e),r=e===t?Os(e):(n-Ys(t))/(t-e),i=n/r+e;if(ju(r)<ds)return OE;function a(s,l){var p=i-l,m=r*s;return[p*Os(m),i-p*Ys(m)]}return a.invert=function(s,l){var p=i-l,m=pg(s,ju(p))*Gv(p);return p*r<0&&(m-=tu*Gv(s)*Gv(p)),[m/r,i-Gv(r)*Bp(s*s+p*p)]},a}function sre(){return mI($z).scale(131.154).center([0,13.9389])}var ME=1.340264,RE=-.081106,PE=893e-6,IE=.003796,OA=Bp(3)/2,ure=12;function _I(e,t){var n=Xv(OA*Os(t)),r=n*n,i=r*r*r;return[e*Ys(n)/(OA*(ME+3*RE*r+i*(7*PE+9*IE*r))),n*(ME+RE*r+i*(PE+IE*r))]}_I.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,s,l,p;a<ure&&(l=n*(ME+RE*r+i*(PE+IE*r))-t,p=ME+3*RE*r+i*(7*PE+9*IE*r),n-=s=l/p,r=n*n,i=r*r*r,!(ju(s)<Q7));++a);return[OA*e*(ME+3*RE*r+i*(7*PE+9*IE*r))/Ys(n),Xv(Os(n)/OA)]};function lre(){return _m(_I).scale(177.158)}function bI(e,t){var n=Ys(t),r=Ys(e)*n;return[n*Os(e)/r,Os(t)/r]}bI.invert=AE(Zb);function cre(){return _m(bI).scale(144.049).clipAngle(60)}function fre(){var e=1,t=0,n=0,r=1,i=1,a=0,s,l,p=null,m,y,b,E=1,O=1,P=TE({point:function(K,J){var oe=W([K,J]);this.stream.point(oe[0],oe[1])}}),I=yE,N,z;function V(){return E=e*r,O=e*i,N=z=null,W}function W(K){var J=K[0]*E,oe=K[1]*O;if(a){var Te=oe*s-J*l;J=J*s+oe*l,oe=Te}return[J+t,oe+n]}return W.invert=function(K){var J=K[0]-t,oe=K[1]-n;if(a){var Te=oe*s+J*l;J=J*s-oe*l,oe=Te}return[J/E,oe/O]},W.stream=function(K){return N&&z===K?N:N=P(I(z=K))},W.postclip=function(K){return arguments.length?(I=K,p=m=y=b=null,V()):I},W.clipExtent=function(K){return arguments.length?(I=K==null?(p=m=y=b=null,yE):kz(p=+K[0][0],m=+K[0][1],y=+K[1][0],b=+K[1][1]),V()):p==null?null:[[p,m],[y,b]]},W.scale=function(K){return arguments.length?(e=+K,V()):e},W.translate=function(K){return arguments.length?(t=+K[0],n=+K[1],V()):[t,n]},W.angle=function(K){return arguments.length?(a=K%360*Xc,l=Os(a),s=Ys(a),V()):a*Cd},W.reflectX=function(K){return arguments.length?(r=K?-1:1,V()):r<0},W.reflectY=function(K){return arguments.length?(i=K?-1:1,V()):i<0},W.fitExtent=function(K,J){return TA(W,K,J)},W.fitSize=function(K,J){return hI(W,K,J)},W.fitWidth=function(K,J){return dI(W,K,J)},W.fitHeight=function(K,J){return pI(W,K,J)},W}function xI(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}xI.invert=function(e,t){var n=t,r=25,i;do{var a=n*n,s=a*a;n-=i=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(ju(i)>ds&&--r>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function hre(){return _m(xI).scale(175.295)}function EI(e,t){return[Ys(t)*Os(e),Os(t)]}EI.invert=AE(Xv);function dre(){return _m(EI).scale(249.5).clipAngle(90+ds)}function SI(e,t){var n=Ys(t),r=1+Ys(e)*n;return[n*Os(e)/r,Os(t)/r]}SI.invert=AE(function(e){return 2*Zb(e)});function pre(){return _m(SI).scale(250).clipAngle(142)}function wI(e,t){return[fA(GP((sf+t)/2)),-e]}wI.invert=function(e,t){return[-t,2*Zb(ez(e))-sf]};function vre(){var e=Hz(wI),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var mre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gre(e){if(typeof e=="function")return e;const t=`geo${Qd(e)}`,n=T[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function yre(e){return{type:"FeatureCollection",features:e.flatMap(t=>_re(t).features)}}function _re(e){const t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;const n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function bre(e,t){var n;for(const[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function xre(e,t,n,r){const i=()=>{const l=t.filter(Gz);return l.find(m=>m.sphere)?{type:"Sphere"}:yre(l.filter(m=>!m.sphere).flatMap(m=>m.data.value))},{outline:a=i()}=r,{size:s="fitExtent"}=r;if(s==="fitExtent")return Ere(e,a,n);if(s==="fitWidth")return Sre(e,a,n)}function Ere(e,t,n){const{x:r,y:i,width:a,height:s}=n;e.fitExtent([[r,i],[a,s]],t)}function Sre(e,t,n){const{width:r,height:i}=n,[[a,s],[l,p]]=Ez(e.fitWidth(r,t)).bounds(t),m=Math.ceil(p-s),y=Math.min(Math.ceil(l-a),m),b=e.scale()*(y-1)/y,[E,O]=e.translate(),P=O+(i-m)/2;e.scale(b).translate([E,P]).precision(.2)}function wre(e){const{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});const{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[Nne()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function Gz(e){return e.type==="geoPath"}const Xz=()=>e=>{const{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];const{type:r="equalEarth"}=n,i=mre(n,["type"]),a=gre(r),s=t.map(wre);let l;function p(){return[["custom",(b,E,O,P)=>{const I=a();xre(I,s,{x:b,y:E,width:O,height:P},i),bre(I,i),l=Ez(I);const z=new Ed({domain:[b,b+O]}),V=new Ed({domain:[E,E+P]}),W=J=>{const oe=I(J);if(!oe)return[null,null];const[Te,Re]=oe;return[z.map(Te),V.map(Re)]},K=J=>{if(!J)return null;const[oe,Te]=J,Re=[z.invert(oe),V.invert(Te)];return I.invert(Re)};return{transform:J=>W(J),untransform:J=>K(J)}}]]}function m(b){const{style:E,tooltip:O={}}=b;return Object.assign(Object.assign({},b),{type:"path",tooltip:vT(O,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},E),{d:P=>l(P)||[]})})}const y=b=>Gz(b)?m(b):b;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:p},children:s.flatMap(y)})]};Xz.props={};var Tre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Yz=()=>e=>{const{type:t,data:n,scale:r,encode:i,style:a,animate:s,key:l,state:p}=e,m=Tre(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},m),{children:[{type:"geoPath",key:`${l}-0`,data:{value:n},scale:r,encode:i,style:a,animate:s,state:p}]})]};Yz.props={};function Are(){return{"composition.geoView":Xz,"composition.geoPath":Yz}}function Cre(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return qz(this.cover(t,n),t,n,e)}function qz(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a=e._root,s={data:r},l=e._x0,p=e._y0,m=e._x1,y=e._y1,b,E,O,P,I,N,z,V;if(!a)return e._root=s,e;for(;a.length;)if((I=t>=(b=(l+m)/2))?l=b:m=b,(N=n>=(E=(p+y)/2))?p=E:y=E,i=a,!(a=a[z=N<<1|I]))return i[z]=s,e;if(O=+e._x.call(null,a.data),P=+e._y.call(null,a.data),t===O&&n===P)return s.next=a,i?i[z]=s:e._root=s,e;do i=i?i[z]=new Array(4):e._root=new Array(4),(I=t>=(b=(l+m)/2))?l=b:m=b,(N=n>=(E=(p+y)/2))?p=E:y=E;while((z=N<<1|I)===(V=(P>=E)<<1|O>=b));return i[V]=a,i[z]=s,e}function Ore(e){var t,n,r=e.length,i,a,s=new Array(r),l=new Array(r),p=1/0,m=1/0,y=-1/0,b=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=i,l[n]=a,i<p&&(p=i),i>y&&(y=i),a<m&&(m=a),a>b&&(b=a));if(p>y||m>b)return this;for(this.cover(p,m).cover(y,b),n=0;n<r;++n)qz(this,s[n],l[n],e[n]);return this}function Mre(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var s=i-n||1,l=this._root,p,m;n>e||e>=i||r>t||t>=a;)switch(m=(t<r)<<1|e<n,p=new Array(4),p[m]=l,l=p,s*=2,m){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Rre(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Pre(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function np(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Ire(e,t,n){var r,i=this._x0,a=this._y0,s,l,p,m,y=this._x1,b=this._y1,E=[],O=this._root,P,I;for(O&&E.push(new np(O,i,a,y,b)),n==null?n=1/0:(i=e-n,a=t-n,y=e+n,b=t+n,n*=n);P=E.pop();)if(!(!(O=P.node)||(s=P.x0)>y||(l=P.y0)>b||(p=P.x1)<i||(m=P.y1)<a))if(O.length){var N=(s+p)/2,z=(l+m)/2;E.push(new np(O[3],N,z,p,m),new np(O[2],s,z,N,m),new np(O[1],N,l,p,z),new np(O[0],s,l,N,z)),(I=(t>=z)<<1|e>=N)&&(P=E[E.length-1],E[E.length-1]=E[E.length-1-I],E[E.length-1-I]=P)}else{var V=e-+this._x.call(null,O.data),W=t-+this._y.call(null,O.data),K=V*V+W*W;if(K<n){var J=Math.sqrt(n=K);i=e-J,a=t-J,y=e+J,b=t+J,r=O.data}}return r}function kre(e){if(isNaN(y=+this._x.call(null,e))||isNaN(b=+this._y.call(null,e)))return this;var t,n=this._root,r,i,a,s=this._x0,l=this._y0,p=this._x1,m=this._y1,y,b,E,O,P,I,N,z;if(!n)return this;if(n.length)for(;;){if((P=y>=(E=(s+p)/2))?s=E:p=E,(I=b>=(O=(l+m)/2))?l=O:m=O,t=n,!(n=n[N=I<<1|P]))return this;if(!n.length)break;(t[N+1&3]||t[N+2&3]||t[N+3&3])&&(r=t,z=N)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[N]=a:delete t[N],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[z]=n:this._root=n),this):(this._root=a,this)}function Lre(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Dre(){return this._root}function Nre(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Bre(e){var t=[],n,r=this._root,i,a,s,l,p;for(r&&t.push(new np(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,s=n.y0,l=n.x1,p=n.y1)&&r.length){var m=(a+l)/2,y=(s+p)/2;(i=r[3])&&t.push(new np(i,m,y,l,p)),(i=r[2])&&t.push(new np(i,a,y,m,p)),(i=r[1])&&t.push(new np(i,m,s,l,y)),(i=r[0])&&t.push(new np(i,a,s,m,y))}return this}function Fre(e){var t=[],n=[],r;for(this._root&&t.push(new np(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,s=r.x0,l=r.y0,p=r.x1,m=r.y1,y=(s+p)/2,b=(l+m)/2;(a=i[0])&&t.push(new np(a,s,l,y,b)),(a=i[1])&&t.push(new np(a,y,l,p,b)),(a=i[2])&&t.push(new np(a,s,b,y,m)),(a=i[3])&&t.push(new np(a,y,b,p,m))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function zre(e){return e[0]}function Ure(e){return arguments.length?(this._x=e,this):this._x}function jre(e){return e[1]}function Zre(e){return arguments.length?(this._y=e,this):this._y}function Kz(e,t,n){var r=new TI(t==null?zre:t,n==null?jre:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function TI(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Qz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var rp=Kz.prototype=TI.prototype;rp.copy=function(){var e=new TI(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Qz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Qz(r));return e},rp.add=Cre,rp.addAll=Ore,rp.cover=Mre,rp.data=Rre,rp.extent=Pre,rp.find=Ire,rp.remove=kre,rp.removeAll=Lre,rp.root=Dre,rp.size=Nre,rp.visit=Bre,rp.visitAfter=Fre,rp.x=Ure,rp.y=Zre;function pv(e){return function(){return e}}function Gb(e){return(e()-.5)*1e-6}var Vre={value:function(){}};function Jz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new MA(n)}function MA(e){this._=e}function Hre(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}MA.prototype=Jz.prototype={constructor:MA,on:function(t,n){var r=this._,i=Hre(t+"",r),a,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((a=(t=i[s]).type)&&(a=Wre(r[a],t.name)))return a;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++s<l;)if(a=(t=i[s]).type)r[a]=e9(r[a],t.name,n);else if(n==null)for(a in r)r[a]=e9(r[a],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new MA(t)},call:function(t,n){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,s;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,a=s.length;i<a;++i)s[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,s=i.length;a<s;++a)i[a].value.apply(n,r)}};function Wre(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function e9(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Vre,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var $re=Jz,Xb=0,kE=0,LE=0,t9=1e3,RA,DE,PA=0,e1=0,IA=0,NE=typeof performance=="object"&&performance.now?performance:Date,n9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function r9(){return e1||(n9(Gre),e1=NE.now()+IA)}function Gre(){e1=0}function AI(){this._call=this._time=this._next=null}AI.prototype=i9.prototype={constructor:AI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?r9():+n)+(t==null?0:+t),!this._next&&DE!==this&&(DE?DE._next=this:RA=this,DE=this),this._call=e,this._time=n,CI()},stop:function(){this._call&&(this._call=null,this._time=1/0,CI())}};function i9(e,t,n){var r=new AI;return r.restart(e,t,n),r}function Xre(){r9(),++Xb;for(var e=RA,t;e;)(t=e1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xb}function a9(){e1=(PA=NE.now())+IA,Xb=kE=0;try{Xre()}finally{Xb=0,qre(),e1=0}}function Yre(){var e=NE.now(),t=e-PA;t>t9&&(IA-=t,PA=e)}function qre(){for(var e,t=RA,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:RA=n);DE=e,CI(r)}function CI(e){if(!Xb){kE&&(kE=clearTimeout(kE));var t=e-e1;t>24?(e<1/0&&(kE=setTimeout(a9,e-NE.now()-IA)),LE&&(LE=clearInterval(LE))):(LE||(PA=NE.now(),LE=setInterval(Yre,t9)),Xb=1,n9(a9))}}const Kre=1664525,Qre=1013904223,o9=4294967296;function Jre(){let e=1;return()=>(e=(Kre*e+Qre)%o9)/o9}function eie(e){return e.x}function tie(e){return e.y}var nie=10,rie=Math.PI*(3-Math.sqrt(5));function iie(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,l=new Map,p=i9(b),m=$re("tick","end"),y=Jre();e==null&&(e=[]);function b(){E(),m.call("tick",t),n<r&&(p.stop(),m.call("end",t))}function E(I){var N,z=e.length,V;I===void 0&&(I=1);for(var W=0;W<I;++W)for(n+=(a-n)*i,l.forEach(function(K){K(n)}),N=0;N<z;++N)V=e[N],V.fx==null?V.x+=V.vx*=s:(V.x=V.fx,V.vx=0),V.fy==null?V.y+=V.vy*=s:(V.y=V.fy,V.vy=0);return t}function O(){for(var I=0,N=e.length,z;I<N;++I){if(z=e[I],z.index=I,z.fx!=null&&(z.x=z.fx),z.fy!=null&&(z.y=z.fy),isNaN(z.x)||isNaN(z.y)){var V=nie*Math.sqrt(.5+I),W=I*rie;z.x=V*Math.cos(W),z.y=V*Math.sin(W)}(isNaN(z.vx)||isNaN(z.vy))&&(z.vx=z.vy=0)}}function P(I){return I.initialize&&I.initialize(e,y),I}return O(),t={tick:E,restart:function(){return p.restart(b),t},stop:function(){return p.stop(),t},nodes:function(I){return arguments.length?(e=I,O(),l.forEach(P),t):e},alpha:function(I){return arguments.length?(n=+I,t):n},alphaMin:function(I){return arguments.length?(r=+I,t):r},alphaDecay:function(I){return arguments.length?(i=+I,t):+i},alphaTarget:function(I){return arguments.length?(a=+I,t):a},velocityDecay:function(I){return arguments.length?(s=1-I,t):1-s},randomSource:function(I){return arguments.length?(y=I,l.forEach(P),t):y},force:function(I,N){return arguments.length>1?(N==null?l.delete(I):l.set(I,P(N)),t):l.get(I)},find:function(I,N,z){var V=0,W=e.length,K,J,oe,Te,Re;for(z==null?z=1/0:z*=z,V=0;V<W;++V)Te=e[V],K=I-Te.x,J=N-Te.y,oe=K*K+J*J,oe<z&&(Re=Te,z=oe);return Re},on:function(I,N){return arguments.length>1?(m.on(I,N),t):m.on(I)}}}function aie(){var e,t,n,r,i=pv(-30),a,s=1,l=1/0,p=.81;function m(O){var P,I=e.length,N=Kz(e,eie,tie).visitAfter(b);for(r=O,P=0;P<I;++P)t=e[P],N.visit(E)}function y(){if(e){var O,P=e.length,I;for(a=new Array(P),O=0;O<P;++O)I=e[O],a[I.index]=+i(I,O,e)}}function b(O){var P=0,I,N,z=0,V,W,K;if(O.length){for(V=W=K=0;K<4;++K)(I=O[K])&&(N=Math.abs(I.value))&&(P+=I.value,z+=N,V+=N*I.x,W+=N*I.y);O.x=V/z,O.y=W/z}else{I=O,I.x=I.data.x,I.y=I.data.y;do P+=a[I.data.index];while(I=I.next)}O.value=P}function E(O,P,I,N){if(!O.value)return!0;var z=O.x-t.x,V=O.y-t.y,W=N-P,K=z*z+V*V;if(W*W/p<K)return K<l&&(z===0&&(z=Gb(n),K+=z*z),V===0&&(V=Gb(n),K+=V*V),K<s&&(K=Math.sqrt(s*K)),t.vx+=z*O.value*r/K,t.vy+=V*O.value*r/K),!0;if(O.length||K>=l)return;(O.data!==t||O.next)&&(z===0&&(z=Gb(n),K+=z*z),V===0&&(V=Gb(n),K+=V*V),K<s&&(K=Math.sqrt(s*K)));do O.data!==t&&(W=a[O.data.index]*r/K,t.vx+=z*W,t.vy+=V*W);while(O=O.next)}return m.initialize=function(O,P){e=O,n=P,y()},m.strength=function(O){return arguments.length?(i=typeof O=="function"?O:pv(+O),y(),m):i},m.distanceMin=function(O){return arguments.length?(s=O*O,m):Math.sqrt(s)},m.distanceMax=function(O){return arguments.length?(l=O*O,m):Math.sqrt(l)},m.theta=function(O){return arguments.length?(p=O*O,m):Math.sqrt(p)},m}function oie(e){return e.index}function s9(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function sie(e){var t=oie,n=b,r,i=pv(30),a,s,l,p,m,y=1;e==null&&(e=[]);function b(N){return 1/Math.min(l[N.source.index],l[N.target.index])}function E(N){for(var z=0,V=e.length;z<y;++z)for(var W=0,K,J,oe,Te,Re,We,ut;W<V;++W)K=e[W],J=K.source,oe=K.target,Te=oe.x+oe.vx-J.x-J.vx||Gb(m),Re=oe.y+oe.vy-J.y-J.vy||Gb(m),We=Math.sqrt(Te*Te+Re*Re),We=(We-a[W])/We*N*r[W],Te*=We,Re*=We,oe.vx-=Te*(ut=p[W]),oe.vy-=Re*ut,J.vx+=Te*(ut=1-ut),J.vy+=Re*ut}function O(){if(s){var N,z=s.length,V=e.length,W=new Map(s.map((J,oe)=>[t(J,oe,s),J])),K;for(N=0,l=new Array(z);N<V;++N)K=e[N],K.index=N,typeof K.source!="object"&&(K.source=s9(W,K.source)),typeof K.target!="object"&&(K.target=s9(W,K.target)),l[K.source.index]=(l[K.source.index]||0)+1,l[K.target.index]=(l[K.target.index]||0)+1;for(N=0,p=new Array(V);N<V;++N)K=e[N],p[N]=l[K.source.index]/(l[K.source.index]+l[K.target.index]);r=new Array(V),P(),a=new Array(V),I()}}function P(){if(s)for(var N=0,z=e.length;N<z;++N)r[N]=+n(e[N],N,e)}function I(){if(s)for(var N=0,z=e.length;N<z;++N)a[N]=+i(e[N],N,e)}return E.initialize=function(N,z){s=N,m=z,O()},E.links=function(N){return arguments.length?(e=N,O(),E):e},E.id=function(N){return arguments.length?(t=N,E):t},E.iterations=function(N){return arguments.length?(y=+N,E):y},E.strength=function(N){return arguments.length?(n=typeof N=="function"?N:pv(+N),P(),E):n},E.distance=function(N){return arguments.length?(i=typeof N=="function"?N:pv(+N),I(),E):i},E}function uie(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var a,s=n.length,l,p=0,m=0;for(a=0;a<s;++a)l=n[a],p+=l.x,m+=l.y;for(p=(p/s-e)*r,m=(m/s-t)*r,a=0;a<s;++a)l=n[a],l.x-=p,l.y-=m}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(e=+a,i):e},i.y=function(a){return arguments.length?(t=+a,i):t},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function lie(e){var t=pv(.1),n,r,i;typeof e!="function"&&(e=pv(e==null?0:+e));function a(l){for(var p=0,m=n.length,y;p<m;++p)y=n[p],y.vx+=(i[p]-y.x)*r[p]*l}function s(){if(n){var l,p=n.length;for(r=new Array(p),i=new Array(p),l=0;l<p;++l)r[l]=isNaN(i[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:pv(+l),s(),a):t},a.x=function(l){return arguments.length?(e=typeof l=="function"?l:pv(+l),s(),a):e},a}function cie(e){var t=pv(.1),n,r,i;typeof e!="function"&&(e=pv(e==null?0:+e));function a(l){for(var p=0,m=n.length,y;p<m;++p)y=n[p],y.vy+=(i[p]-y.y)*r[p]*l}function s(){if(n){var l,p=n.length;for(r=new Array(p),i=new Array(p),l=0;l<p;++l)r[l]=isNaN(i[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:pv(+l),s(),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pv(+l),s(),a):e},a}var fie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hie={joint:!0},die={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},pie={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},vie={text:""};function mie(e,t,n){const{nodes:r,links:i}=e,{joint:a,nodeStrength:s,linkStrength:l}=t,{nodeKey:p=P=>P.id,linkKey:m=P=>P.id}=n,y=aie(),b=sie(i).id(mm(m));typeof s=="function"&&y.strength(s),typeof l=="function"&&b.strength(l);const E=iie(r).force("link",b).force("charge",y);a?E.force("center",uie()):E.force("x",lie()).force("y",cie()),E.stop();const O=Math.ceil(Math.log(E.alphaMin())/Math.log(1-E.alphaDecay()));for(let P=0;P<O;P++)E.tick();return{nodesData:r,linksData:i}}const u9=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:a={},nodeLabels:s=[],linkLabels:l=[],animate:p={},tooltip:m={}}=e,{nodeKey:y=oe=>oe.id,linkKey:b=oe=>oe.id}=n,E=fie(n,["nodeKey","linkKey"]),O=Object.assign({nodeKey:y,linkKey:b},E),P=ja(O,"node"),I=ja(O,"link"),{links:N,nodes:z}=SR(t,O),{nodesData:V,linksData:W}=mie({links:N,nodes:z},Pi({},hie,a),O),K=hm(m,"link",{items:[oe=>({name:"source",value:mm(b)(oe.source)}),oe=>({name:"target",value:mm(b)(oe.target)})]}),J=hm(m,"node",{items:[oe=>({name:"key",value:mm(y)(oe)})]},!0);return[Pi({},die,{data:W,encode:I,labels:l,style:ja(i,"link"),tooltip:K,animate:dm(p,"link")}),Pi({},pie,{data:V,encode:Object.assign({},P),scale:r,style:ja(i,"node"),tooltip:J,labels:[Object.assign(Object.assign({},vie),ja(i,"label")),...s],animate:dm(p,"link")})]};u9.props={};function gie(e,t){return e.parent===t.parent?1:2}function OI(e){var t=e.children;return t?t[0]:e.t}function MI(e){var t=e.children;return t?t[t.length-1]:e.t}function yie(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function _ie(e){for(var t=0,n=0,r=e.children,i=r.length,a;--i>=0;)a=r[i],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function bie(e,t,n){return e.a.parent===t.parent?e.a:n}function kA(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}kA.prototype=Object.create(Ob.prototype);function xie(e){for(var t=new kA(e,0),n,r=[t],i,a,s,l;n=r.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),s=l-1;s>=0;--s)r.push(i=n.children[s]=new kA(a[s],s)),i.parent=n;return(t.parent=new kA(null,0)).children=[t],t}function Eie(){var e=gie,t=1,n=1,r=null;function i(m){var y=xie(m);if(y.eachAfter(a),y.parent.m=-y.z,y.eachBefore(s),r)m.eachBefore(p);else{var b=m,E=m,O=m;m.eachBefore(function(V){V.x<b.x&&(b=V),V.x>E.x&&(E=V),V.depth>O.depth&&(O=V)});var P=b===E?1:e(b,E)/2,I=P-b.x,N=t/(E.x+P+I),z=n/(O.depth||1);m.eachBefore(function(V){V.x=(V.x+I)*N,V.y=V.depth*z})}return m}function a(m){var y=m.children,b=m.parent.children,E=m.i?b[m.i-1]:null;if(y){_ie(m);var O=(y[0].z+y[y.length-1].z)/2;E?(m.z=E.z+e(m._,E._),m.m=m.z-O):m.z=O}else E&&(m.z=E.z+e(m._,E._));m.parent.A=l(m,E,m.parent.A||b[0])}function s(m){m._.x=m.z+m.parent.m,m.m+=m.parent.m}function l(m,y,b){if(y){for(var E=m,O=m,P=y,I=E.parent.children[0],N=E.m,z=O.m,V=P.m,W=I.m,K;P=MI(P),E=OI(E),P&&E;)I=OI(I),O=MI(O),O.a=m,K=P.z+V-E.z-N+e(P._,E._),K>0&&(yie(bie(P,m,b),m,K),N+=K,z+=K),V+=P.m,N+=E.m,W+=I.m,z+=O.m;P&&!MI(O)&&(O.t=P,O.m+=V-z),E&&!OI(I)&&(I.t=E,I.m+=N-W,b=m)}return b}function p(m){m.x*=t,m.y=m.depth*n}return i.separation=function(m){return arguments.length?(e=m,i):e},i.size=function(m){return arguments.length?(r=!1,t=+m[0],n=+m[1],i):r?null:[t,n]},i.nodeSize=function(m){return arguments.length?(r=!0,t=+m[0],n=+m[1],i):r?[t,n]:null},i}function Sie(e,t){return e.parent===t.parent?1:2}function wie(e){return e.reduce(Tie,0)/e.length}function Tie(e,t){return e+t.x}function Aie(e){return 1+e.reduce(Cie,0)}function Cie(e,t){return Math.max(e,t.y)}function Oie(e){for(var t;t=e.children;)e=t[0];return e}function Mie(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Rie(){var e=Sie,t=1,n=1,r=!1;function i(a){var s,l=0;a.eachAfter(function(E){var O=E.children;O?(E.x=wie(O),E.y=Aie(O)):(E.x=s?l+=e(E,s):0,E.y=0,s=E)});var p=Oie(a),m=Mie(a),y=p.x-e(p,m)/2,b=m.x+e(m,p)/2;return a.eachAfter(r?function(E){E.x=(E.x-a.x)*t,E.y=(a.y-E.y)*n}:function(E){E.x=(E.x-y)/(b-y)*t,E.y=(1-(a.y?E.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(e=a,i):e},i.size=function(a){return arguments.length?(r=!1,t=+a[0],n=+a[1],i):r?null:[t,n]},i.nodeSize=function(a){return arguments.length?(r=!0,t=+a[0],n=+a[1],i):r?[t,n]:null},i}const l9=e=>t=>n=>{const{field:r="value",nodeSize:i,separation:a,sortBy:s,as:l=["x","y"]}=t,[p,m]=l,y=Cb(n,P=>P.children).sum(P=>P[r]).sort(s),b=e();b.size([1,1]),i&&b.nodeSize(i),a&&b.separation(a),b(y);const E=[];y.each(P=>{P[p]=P.x,P[m]=P.y,P.name=P.data.name,E.push(P)});const O=y.links();return O.forEach(P=>{P[p]=[P.source[p],P.target[p]],P[m]=[P.source[m],P.target[m]]}),{nodes:E,edges:O}},c9=e=>l9(Rie)(e);c9.props={};const f9=e=>l9(Eie)(e);f9.props={};const Pie={sortBy:(e,t)=>t.value-e.value},Iie={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},kie={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Lie={text:"",fontSize:10},h9=e=>{const{data:t,encode:n={},scale:r={},style:i={},layout:a={},nodeLabels:s=[],linkLabels:l=[],animate:p={},tooltip:m={}}=e,y=n==null?void 0:n.value,{nodes:b,edges:E}=f9(Object.assign(Object.assign(Object.assign({},Pie),a),{field:y}))(t),O=hm(m,"node",{title:"name",items:["value"]},!0),P=hm(m,"link",{title:"",items:[I=>({name:"source",value:I.source.name}),I=>({name:"target",value:I.target.name})]});return[Pi({},kie,{data:E,encode:ja(n,"link"),scale:ja(r,"link"),labels:l,style:Object.assign({stroke:"#999"},ja(i,"link")),tooltip:P,animate:dm(p,"link")}),Pi({},Iie,{data:b,scale:ja(r,"node"),encode:ja(n,"node"),labels:[Object.assign(Object.assign({},Lie),ja(i,"label")),...s],style:Object.assign({},ja(i,"node")),tooltip:O,animate:dm(p,"node")})]};h9.props={};var Die=1664525,Nie=1013904223,d9=4294967296;function Bie(){var e=1;return function(){return(e=(Die*e+Nie)%d9)/d9}}var Fie=D(52677);function zie(e){return Fie(e)==="object"&&"length"in e?e:Array.from(e)}function Uie(e,t){for(var n=e.length,r,i;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Ive(e){return p9(e,lcg())}function p9(e,t){for(var n=0,r=(e=Uie(Array.from(e),t)).length,i=[],a,s;n<r;)a=e[n],s&&v9(s,a)?++n:(s=Zie(i=jie(i,a)),n=0);return s}function jie(e,t){var n,r;if(RI(t,e))return[t];for(n=0;n<e.length;++n)if(LA(t,e[n])&&RI(BE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(LA(BE(e[n],e[r]),t)&&LA(BE(e[n],t),e[r])&&LA(BE(e[r],t),e[n])&&RI(m9(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function LA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function v9(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function RI(e,t){for(var n=0;n<t.length;++n)if(!v9(e,t[n]))return!1;return!0}function Zie(e){switch(e.length){case 1:return Vie(e[0]);case 2:return BE(e[0],e[1]);case 3:return m9(e[0],e[1],e[2])}}function Vie(e){return{x:e.x,y:e.y,r:e.r}}function BE(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,s=t.y,l=t.r,p=a-n,m=s-r,y=l-i,b=Math.sqrt(p*p+m*m);return{x:(n+a+p/b*y)/2,y:(r+s+m/b*y)/2,r:(b+i+l)/2}}function m9(e,t,n){var r=e.x,i=e.y,a=e.r,s=t.x,l=t.y,p=t.r,m=n.x,y=n.y,b=n.r,E=r-s,O=r-m,P=i-l,I=i-y,N=p-a,z=b-a,V=r*r+i*i-a*a,W=V-s*s-l*l+p*p,K=V-m*m-y*y+b*b,J=O*P-E*I,oe=(P*K-I*W)/(J*2)-r,Te=(I*N-P*z)/J,Re=(O*W-E*K)/(J*2)-i,We=(E*z-O*N)/J,ut=Te*Te+We*We-1,ct=2*(a+oe*Te+Re*We),Ft=oe*oe+Re*Re-a*a,ft=-(Math.abs(ut)>1e-6?(ct+Math.sqrt(ct*ct-4*ut*Ft))/(2*ut):Ft/ct);return{x:r+oe+Te*ft,y:i+Re+We*ft,r:ft}}function g9(e,t,n){var r=e.x-t.x,i,a,s=e.y-t.y,l,p,m=r*r+s*s;m?(a=t.r+n.r,a*=a,p=e.r+n.r,p*=p,a>p?(i=(m+p-a)/(2*m),l=Math.sqrt(Math.max(0,p/m-i*i)),n.x=e.x-i*r-l*s,n.y=e.y-i*s+l*r):(i=(m+a-p)/(2*m),l=Math.sqrt(Math.max(0,a/m-i*i)),n.x=t.x+i*r-l*s,n.y=t.y+i*s+l*r)):(n.x=t.x+n.r,n.y=t.y)}function y9(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function _9(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function DA(e){this._=e,this.next=null,this.previous=null}function b9(e,t){if(!(a=(e=zie(e)).length))return 0;var n,r,i,a,s,l,p,m,y,b,E;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;g9(r,n,i=e[2]),n=new DA(n),r=new DA(r),i=new DA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(p=3;p<a;++p){g9(n._,r._,i=e[p]),i=new DA(i),m=r.next,y=n.previous,b=r._.r,E=n._.r;do if(b<=E){if(y9(m._,i._)){r=m,n.next=r,r.previous=n,--p;continue e}b+=m._.r,m=m.next}else{if(y9(y._,i._)){n=y,n.next=r,r.previous=n,--p;continue e}E+=y._.r,y=y.previous}while(m!==y.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=_9(n);(i=i.next)!==r;)(l=_9(i))<s&&(n=i,s=l);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=p9(n,t),p=0;p<a;++p)n=e[p],n.x-=i.x,n.y-=i.y;return i.r}function kve(e){return b9(e,lcg()),e}function Hie(e){return Math.sqrt(e.value)}function Wie(){var e=null,t=1,n=1,r=Q_;function i(a){var s=Bie();return a.x=t/2,a.y=n/2,e?a.eachBefore(x9(e)).eachAfter(PI(r,.5,s)).eachBefore(E9(1)):a.eachBefore(x9(Hie)).eachAfter(PI(Q_,1,s)).eachAfter(PI(r,a.r/Math.min(t,n),s)).eachBefore(E9(Math.min(t,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(e=JT(a),i):e},i.size=function(a){return arguments.length?(t=+a[0],n=+a[1],i):[t,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Ub(+a),i):r},i}function x9(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function PI(e,t,n){return function(r){if(i=r.children){var i,a,s=i.length,l=e(r)*t||0,p;if(l)for(a=0;a<s;++a)i[a].r+=l;if(p=b9(i,n),l)for(a=0;a<s;++a)i[a].r-=l;r.r=p+l}}}function E9(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var $ie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Gie=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),Xie=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),Yie={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},qie={title:e=>e.data.name,items:[{field:"value"}]},Kie=(e,t,n)=>{const{value:r}=n,i=ai(e)?OP().path(t.path)(e):Cb(e);return r?i.sum(a=>mm(r)(a)).sort(t.sort):i.count(),Wie().size(t.size).padding(t.padding)(i),i.descendants()},S9=(e,t)=>{const{width:n,height:r}=t,{data:i,encode:a={},scale:s={},style:l={},layout:p={},labels:m=[],tooltip:y={}}=e,b=$ie(e,["data","encode","scale","style","layout","labels","tooltip"]),E=Xie(n,r,a),O=Kie(i,Pi({},Gie(n,r),p),Pi({},E.encode,a)),P=ja(l,"label");return Pi({},E,Object.assign(Object.assign({data:O,encode:a,scale:s,style:l,labels:[Object.assign(Object.assign({},Yie),P),...m]},b),{tooltip:vT(y,qie),axis:!1}))};S9.props={};function Qie(e){return e.target.depth}function Jie(e){return e.depth}function eae(e,t){return t-1-e.height}function NA(e,t){return e.sourceLinks.length?e.depth:t-1}function tae(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?cv(e.sourceLinks,Qie)-1:0}function BA(e){return function(){return e}}function w9(e,t){return FA(e.source,t.source)||e.index-t.index}function T9(e,t){return FA(e.target,t.target)||e.index-t.index}function FA(e,t){return e.y0-t.y0}function II(e){return e.value}function nae(e){return e.index}function rae(e){return e.nodes}function iae(e){return e.links}function A9(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function C9({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function aae(){let e=0,t=0,n=1,r=1,i=24,a=8,s,l=nae,p=NA,m,y,b,E=rae,O=iae,P=6;function I(Nt){const tn={nodes:E(Nt),links:O(Nt)};return N(tn),z(tn),V(tn),W(tn),oe(tn),C9(tn),tn}I.update=function(Nt){return C9(Nt),Nt},I.nodeId=function(Nt){return arguments.length?(l=typeof Nt=="function"?Nt:BA(Nt),I):l},I.nodeAlign=function(Nt){return arguments.length?(p=typeof Nt=="function"?Nt:BA(Nt),I):p},I.nodeDepth=function(Nt){return arguments.length?(m=Nt,I):m},I.nodeSort=function(Nt){return arguments.length?(y=Nt,I):y},I.nodeWidth=function(Nt){return arguments.length?(i=+Nt,I):i},I.nodePadding=function(Nt){return arguments.length?(a=s=+Nt,I):a},I.nodes=function(Nt){return arguments.length?(E=typeof Nt=="function"?Nt:BA(Nt),I):E},I.links=function(Nt){return arguments.length?(O=typeof Nt=="function"?Nt:BA(Nt),I):O},I.linkSort=function(Nt){return arguments.length?(b=Nt,I):b},I.size=function(Nt){return arguments.length?(e=t=0,n=+Nt[0],r=+Nt[1],I):[n-e,r-t]},I.extent=function(Nt){return arguments.length?(e=+Nt[0][0],n=+Nt[1][0],t=+Nt[0][1],r=+Nt[1][1],I):[[e,t],[n,r]]},I.iterations=function(Nt){return arguments.length?(P=+Nt,I):P};function N({nodes:Nt,links:tn}){Nt.forEach((fn,Hn)=>{fn.index=Hn,fn.sourceLinks=[],fn.targetLinks=[]});const Yt=new Map(Nt.map(fn=>[l(fn),fn]));if(tn.forEach((fn,Hn)=>{fn.index=Hn;let{source:cr,target:_r}=fn;typeof cr!="object"&&(cr=fn.source=A9(Yt,cr)),typeof _r!="object"&&(_r=fn.target=A9(Yt,_r)),cr.sourceLinks.push(fn),_r.targetLinks.push(fn)}),b!=null)for(const{sourceLinks:fn,targetLinks:Hn}of Nt)fn.sort(b),Hn.sort(b)}function z({nodes:Nt}){for(const tn of Nt)tn.value=tn.fixedValue===void 0?Math.max(Lp(tn.sourceLinks,II),Lp(tn.targetLinks,II)):tn.fixedValue}function V({nodes:Nt}){const tn=Nt.length;let Yt=new Set(Nt),fn=new Set,Hn=0;for(;Yt.size;){if(Yt.forEach(cr=>{cr.depth=Hn;for(const{target:_r}of cr.sourceLinks)fn.add(_r)}),++Hn>tn)throw new Error("circular link");Yt=fn,fn=new Set}if(m){const cr=Math.max(Pu(Nt,Mr=>Mr.depth)+1,0);let _r;for(let Mr=0;Mr<Nt.length;Mr++)_r=Nt[Mr],_r.depth=m.call(null,_r,cr)}}function W({nodes:Nt}){const tn=Nt.length;let Yt=new Set(Nt),fn=new Set,Hn=0;for(;Yt.size;){if(Yt.forEach(cr=>{cr.height=Hn;for(const{source:_r}of cr.targetLinks)fn.add(_r)}),++Hn>tn)throw new Error("circular link");Yt=fn,fn=new Set}}function K({nodes:Nt}){const tn=Math.max(Pu(Nt,Hn=>Hn.depth)+1,0),Yt=(n-e-i)/(tn-1),fn=new Array(tn).fill(0).map(()=>[]);for(const Hn of Nt){const cr=Math.max(0,Math.min(tn-1,Math.floor(p.call(null,Hn,tn))));Hn.layer=cr,Hn.x0=e+cr*Yt,Hn.x1=Hn.x0+i,fn[cr]?fn[cr].push(Hn):fn[cr]=[Hn]}if(y)for(const Hn of fn)Hn.sort(y);return fn}function J(Nt){const tn=cv(Nt,Yt=>(r-t-(Yt.length-1)*s)/Lp(Yt,II));for(const Yt of Nt){let fn=t;for(const Hn of Yt){Hn.y0=fn,Hn.y1=fn+Hn.value*tn,fn=Hn.y1+s;for(const cr of Hn.sourceLinks)cr.width=cr.value*tn}fn=(r-fn+s)/(Yt.length+1);for(let Hn=0;Hn<Yt.length;++Hn){const cr=Yt[Hn];cr.y0+=fn*(Hn+1),cr.y1+=fn*(Hn+1)}ft(Yt)}}function oe(Nt){const tn=K(Nt);s=Math.min(a,(r-t)/(Pu(tn,Yt=>Yt.length)-1)),J(tn);for(let Yt=0;Yt<P;++Yt){const fn=Math.pow(.99,Yt),Hn=Math.max(1-fn,(Yt+1)/P);Re(tn,fn,Hn),Te(tn,fn,Hn)}}function Te(Nt,tn,Yt){for(let fn=1,Hn=Nt.length;fn<Hn;++fn){const cr=Nt[fn];for(const _r of cr){let Mr=0,fi=0;for(const{source:Ta,value:Fi}of _r.targetLinks){const Ci=Fi*(_r.layer-Ta.layer);Mr+=St(Ta,_r)*Ci,fi+=Ci}if(!(fi>0))continue;const Qi=(Mr/fi-_r.y0)*tn;_r.y0+=Qi,_r.y1+=Qi,Ft(_r)}y===void 0&&cr.sort(FA),cr.length&&We(cr,Yt)}}function Re(Nt,tn,Yt){for(let fn=Nt.length,Hn=fn-2;Hn>=0;--Hn){const cr=Nt[Hn];for(const _r of cr){let Mr=0,fi=0;for(const{target:Ta,value:Fi}of _r.sourceLinks){const Ci=Fi*(Ta.layer-_r.layer);Mr+=Mt(_r,Ta)*Ci,fi+=Ci}if(!(fi>0))continue;const Qi=(Mr/fi-_r.y0)*tn;_r.y0+=Qi,_r.y1+=Qi,Ft(_r)}y===void 0&&cr.sort(FA),cr.length&&We(cr,Yt)}}function We(Nt,tn){const Yt=Nt.length>>1,fn=Nt[Yt];ct(Nt,fn.y0-s,Yt-1,tn),ut(Nt,fn.y1+s,Yt+1,tn),ct(Nt,r,Nt.length-1,tn),ut(Nt,t,0,tn)}function ut(Nt,tn,Yt,fn){for(;Yt<Nt.length;++Yt){const Hn=Nt[Yt],cr=(tn-Hn.y0)*fn;cr>1e-6&&(Hn.y0+=cr,Hn.y1+=cr),tn=Hn.y1+s}}function ct(Nt,tn,Yt,fn){for(;Yt>=0;--Yt){const Hn=Nt[Yt],cr=(Hn.y1-tn)*fn;cr>1e-6&&(Hn.y0-=cr,Hn.y1-=cr),tn=Hn.y0-s}}function Ft({sourceLinks:Nt,targetLinks:tn}){if(b===void 0){for(const{source:{sourceLinks:Yt}}of tn)Yt.sort(T9);for(const{target:{targetLinks:Yt}}of Nt)Yt.sort(w9)}}function ft(Nt){if(b===void 0)for(const{sourceLinks:tn,targetLinks:Yt}of Nt)tn.sort(T9),Yt.sort(w9)}function St(Nt,tn){let Yt=Nt.y0-(Nt.sourceLinks.length-1)*s/2;for(const{target:fn,width:Hn}of Nt.sourceLinks){if(fn===tn)break;Yt+=Hn+s}for(const{source:fn,width:Hn}of tn.targetLinks){if(fn===Nt)break;Yt-=Hn}return Yt}function Mt(Nt,tn){let Yt=tn.y0-(tn.targetLinks.length-1)*s/2;for(const{source:fn,width:Hn}of tn.targetLinks){if(fn===Nt)break;Yt+=Hn+s}for(const{target:fn,width:Hn}of Nt.sourceLinks){if(fn===tn)break;Yt-=Hn}return Yt}return I}const oae={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},sae={left:Jie,right:eae,center:tae,justify:NA};function uae(e){const t=typeof e;return t==="string"?sae[e]||NA:t==="function"?e:NA}const O9=e=>t=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:a,nodePadding:s,nodeDepth:l,nodes:p,links:m,linkSort:y,iterations:b}=Object.assign({},oae,e),E=aae().nodeSort(r).linkSort(y).links(m).nodes(p).nodeWidth(a).nodePadding(s).nodeDepth(l).nodeAlign(uae(i)).iterations(b).extent([[0,0],[1,1]]);typeof n=="function"&&E.nodeId(n);const O=E(t),{nodes:P,links:I}=O,N=P.map(V=>{const{x0:W,x1:K,y0:J,y1:oe}=V;return Object.assign(Object.assign({},V),{x:[W,K,K,W],y:[J,J,oe,oe]})}),z=I.map(V=>{const{source:W,target:K}=V,J=W.x1,oe=K.x0,Te=V.width/2;return Object.assign(Object.assign({},V),{x:[J,J,oe,oe],y:[V.y0+Te,V.y0-Te,V.y1+Te,V.y1-Te]})});return{nodes:N,links:z}};O9.props={};var lae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cae={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},fae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},hae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},dae={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},M9=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:a={},nodeLabels:s=[],linkLabels:l=[],animate:p={},tooltip:m={}}=e,{links:y,nodes:b}=SR(t,n),E=ja(n,"node"),O=ja(n,"link"),{key:P=We=>We.key,color:I=P}=E,{links:N,nodes:z}=O9(Object.assign(Object.assign(Object.assign({},cae),{nodeId:mm(P)}),a))({links:y,nodes:b}),V=ja(i,"label"),{text:W=P,spacing:K=5}=V,J=lae(V,["text","spacing"]),oe=mm(P),Te=hm(m,"node",{title:oe,items:[{field:"value"}]},!0),Re=hm(m,"link",{title:"",items:[We=>({name:"source",value:oe(We.source)}),We=>({name:"target",value:oe(We.target)})]});return[Pi({},fae,{data:z,encode:Object.assign(Object.assign({},E),{color:I}),scale:r,style:ja(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},dae),{text:W,dx:We=>We.x[0]<.5?K:-K}),J),...s],tooltip:Te,animate:dm(p,"node"),axis:!1}),Pi({},hae,{data:N,encode:O,labels:l,style:Object.assign({fill:O.color?void 0:"#aaa",strokeWidth:0},ja(i,"link")),tooltip:Re,animate:dm(p,"link")})]};M9.props={};function pae(e,t){return t.value-e.value}function vae(e,t){return t.frequency-e.frequency}function mae(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function gae(e,t){return`${e.name}`.localeCompare(`${t.name}`)}const yae={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function _ae(e){const{y:t,thickness:n,weight:r,marginRatio:i,id:a,source:s,target:l,sourceWeight:p,targetWeight:m,sortBy:y}=Object.assign(Object.assign({},yae),e);function b(N){const z=N.nodes.map(W=>Object.assign({},W)),V=N.edges.map(W=>Object.assign({},W));return E(z,V),O(z,V),P(z,V),I(z,V),{nodes:z,edges:V}}function E(N,z){z.forEach(K=>{K.source=s(K),K.target=l(K),K.sourceWeight=p(K),K.targetWeight=m(K)});const V=Zl(z,K=>K.source),W=Zl(z,K=>K.target);return N.forEach(K=>{K.id=a(K);const J=V.has(K.id)?V.get(K.id):[],oe=W.has(K.id)?W.get(K.id):[];K.frequency=J.length+oe.length,K.value=Lp(J,Te=>Te.sourceWeight)+Lp(oe,Te=>Te.targetWeight)}),{nodes:N,edges:z}}function O(N,z){const V=typeof y=="function"?y:ne[y];V&&N.sort(V)}function P(N,z){const V=N.length;if(!V)throw ny("Invalid nodes: it's empty!");if(!r){const J=1/V;return N.forEach((oe,Te)=>{oe.x=(Te+.5)*J,oe.y=t}),{nodes:N,edges:z}}const W=i/(2*V),K=N.reduce((J,oe)=>J+=oe.value,0);return N.reduce((J,oe)=>{oe.weight=oe.value/K,oe.width=oe.weight*(1-i),oe.height=n;const Te=W+J,Re=Te+oe.width,We=t-n/2,ut=We+n;return oe.x=[Te,Re,Re,Te],oe.y=[We,We,ut,ut],J+oe.width+2*W},0),{nodes:N,edges:z}}function I(N,z){const V=new Map(N.map(J=>[J.id,J]));if(!r)return z.forEach(J=>{const oe=s(J),Te=l(J),Re=V.get(oe),We=V.get(Te);Re&&We&&(J.x=[Re.x,We.x],J.y=[Re.y,We.y])}),{nodes:N,edges:z};z.forEach(J=>{J.x=[0,0,0,0],J.y=[t,t,t,t]});const W=Zl(z,J=>J.source),K=Zl(z,J=>J.target);N.forEach(J=>{const{edges:oe,width:Te,x:Re,y:We,value:ut,id:ct}=J,Ft=W.get(ct)||[],ft=K.get(ct)||[];let St=0;Ft.map(Mt=>{const Nt=Mt.sourceWeight/ut*Te;Mt.x[0]=Re[0]+St,Mt.x[1]=Re[0]+St+Nt,St+=Nt}),ft.forEach(Mt=>{const Nt=Mt.targetWeight/ut*Te;Mt.x[3]=Re[0]+St,Mt.x[2]=Re[0]+St+Nt,St+=Nt})})}return b}const kI=e=>t=>_ae(e)(t);kI.props={};var R9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const LI={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},bae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},xae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1,strokeWidth:1}},Eae={position:"outside",fontSize:10},P9=(e,t)=>{const{data:n,encode:r={},scale:i,style:a={},layout:s={},nodeLabels:l=[],linkLabels:p=[],animate:m={},tooltip:y={}}=e,{nodes:b,links:E}=SR(n,r),O=ja(r,"node"),P=ja(r,"link"),{key:I=Mt=>Mt.key,color:N=I}=O,{linkEncodeColor:z=Mt=>Mt.source}=P,{nodeWidthRatio:V=LI.thickness,nodePaddingRatio:W=LI.marginRatio}=s,K=R9(s,["nodeWidthRatio","nodePaddingRatio"]),{nodes:J,edges:oe}=kI(Object.assign(Object.assign(Object.assign(Object.assign({},LI),{id:mm(I),thickness:V,marginRatio:W}),K),{weight:!0}))({nodes:b,edges:E}),Te=ja(a,"label"),{text:Re=I}=Te,We=R9(Te,["text"]),ut=hm(y,"node",{title:"",items:[Mt=>({name:Mt.key,value:Mt.value})]},!0),ct=hm(y,"link",{title:"",items:[Mt=>({name:`${Mt.source} -> ${Mt.target}`,value:Mt.value})]}),{height:Ft,width:ft}=t,St=Math.min(Ft,ft);return[Pi({},xae,{data:oe,encode:Object.assign(Object.assign({},P),{color:z}),labels:p,style:Object.assign({fill:z?void 0:"#aaa"},ja(a,"link")),tooltip:ct,animate:dm(m,"link")}),Pi({},bae,{data:J,encode:Object.assign(Object.assign({},O),{color:N}),scale:i,style:ja(a,"node"),coordinate:{type:"polar",outerRadius:(St-20)/St,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Eae),{text:Re}),We),...l],tooltip:ut,animate:dm(m,"node"),axis:!1})]};P9.props={};var Sae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wae=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Tae=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),Aae={fontSize:10,text:e=>nE(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},Cae={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},Oae={title:e=>nE(e.path),items:[{field:"value"}]},I9=(e,t)=>{const{width:n,height:r,options:i}=t,{data:a,encode:s={},scale:l,style:p={},layout:m={},labels:y=[],tooltip:b={}}=e,E=Sae(e,["data","encode","scale","style","layout","labels","tooltip"]),O=ql(i,["interaction","treemapDrillDown"]),P=Pi({},wae(n,r),m,{layer:O?V=>V.depth===1:m.layer}),[I,N]=Z8(a,P,s),z=ja(p,"label");return Pi({},Tae(n,r),Object.assign(Object.assign({data:I,scale:l,style:p,labels:[Object.assign(Object.assign({},Aae),z),...y]},E),{encode:s,tooltip:vT(b,Cae),axis:!1}),O?{interaction:Object.assign(Object.assign({},E.interaction),{treemapDrillDown:O?Object.assign(Object.assign({},O),{originData:N,layout:P}):void 0}),encode:Object.assign({color:V=>nE(V.path)},s),tooltip:vT(b,Oae)}:{})};I9.props={};function Mae(){return{"data.arc":kI,"data.cluster":c9,"mark.forceGraph":u9,"mark.tree":h9,"mark.pack":S9,"mark.sankey":M9,"mark.chord":P9,"mark.treemap":I9}}var k9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rae(e,t){return cv(e,n=>t[n])}function Pae(e,t){return Pu(e,n=>t[n])}function L9(e,t){const n=DI(e,t)*2.5-NI(e,t)*1.5;return cv(e,r=>t[r]>=n?t[r]:NaN)}function DI(e,t){return rA(e,.25,n=>t[n])}function Iae(e,t){return rA(e,.5,n=>t[n])}function NI(e,t){return rA(e,.75,n=>t[n])}function D9(e,t){const n=NI(e,t)*2.5-DI(e,t)*1.5;return Pu(e,r=>t[r]<=n?t[r]:NaN)}function kae(){return(e,t)=>{const{encode:n}=t,{y:r,x:i}=n,{value:a}=r,{value:s}=i;return[Array.from(Zl(e,m=>s[+m]).values()).flatMap(m=>{const y=L9(m,a),b=D9(m,a);return m.filter(E=>a[E]<y||a[E]>b)}),t]}}const N9=e=>{const{data:t,encode:n,style:r={},tooltip:i={},transform:a,animate:s}=e,l=k9(e,["data","encode","style","tooltip","transform","animate"]),{point:p=!0}=r,m=k9(r,["point"]),{y}=n,b={y,y1:y,y2:y,y3:y,y4:y},E={y1:DI,y2:Iae,y3:NI},O=hm(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),P=hm(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!p)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Rae},E),{y4:Pae})],encode:Object.assign(Object.assign({},n),b),style:m,tooltip:O},l);const I=ja(m,"box"),N=ja(m,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:L9},E),{y4:D9})],encode:Object.assign(Object.assign({},n),b),style:I,tooltip:O,animate:dm(s,"box")},l),{type:"point",data:t,transform:[{type:kae}],encode:n,style:Object.assign({},N),tooltip:P,animate:dm(s,"point")}]};N9.props={};const B9=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,Lae=(e,t)=>{if(!t)return;const{coordinate:n}=t;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,a,s)=>{const{document:l}=t.canvas,{color:p,index:m}=a,y=l.createElement("g",{}),b=B9(i[0],i[1]),E=B9(i[0],r)*2,O=l.createElement("path",{style:Object.assign(Object.assign(Object.assign({path:[["M",...i[0]],["A",b,b,0,1,0,...i[1]],["A",E+b*2,E+b*2,0,0,0,...i[2]],["A",b,b,0,1,m===0?0:1,...i[3]],["A",E,E,0,0,1,...i[0]],["Z"]]},s),wM(e,["shape","last","first"])),{fill:p||s.color})});return y.appendChild(O),y}};var zA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Dae=(e,t)=>{const{shape:n,radius:r}=e,i=zA(e,["shape","radius"]),a=ja(i,"pointer"),s=ja(i,"pin"),{shape:l}=a,p=zA(a,["shape"]),{shape:m}=s,y=zA(s,["shape"]),{coordinate:b,theme:E}=t;return(O,P)=>{const I=O.map(St=>b.invert(St)),[N,z,V]=f(b,"polar"),W=b.clone(),{color:K}=P,J=S2({startAngle:N,endAngle:z,innerRadius:V,outerRadius:r});J.push(["cartesian"]),W.update({transformations:J});const oe=I.map(St=>W.map(St)),[Te,Re]=b4(oe),[We,ut]=b.getCenter(),ct=Object.assign(Object.assign({x1:Te,y1:Re,x2:We,y2:ut,stroke:K},p),i),Ft=Object.assign(Object.assign({cx:We,cy:ut,stroke:K},y),i),ft=Ho(new Ao);return S0(l)||(typeof l=="function"?ft.append(()=>l(oe,P,W,E)):ft.append("line").call(Po,ct).node()),S0(m)||(typeof m=="function"?ft.append(()=>m(oe,P,W,E)):ft.append("circle").call(Po,Ft).node()),ft.node()}},F9={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},Nae={style:{shape:Dae,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Bae={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function Fae(e){if((0,Yl.Z)(e)){const t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function zae(e,t){const{name:n="score",target:r,total:i,percent:a,thresholds:s=[]}=Fae(e),l=a||r,p=a?1:i,m=Object.assign({y:{domain:[0,p]}},t);return s.length?{targetData:[{x:n,y:l,color:"target"}],totalData:s.map((y,b)=>({x:n,y:b>=1?y-s[b-1]:y,color:b})),target:l,total:p,scale:m}:{targetData:[{x:n,y:l,color:"target"}],totalData:[{x:n,y:l,color:"target"},{x:n,y:p-l,color:"total"}],target:l,total:p,scale:m}}function Uae(e,{target:t,total:n}){const{content:r}=e;return r?r(t,n):t.toString()}const z9=e=>{const{data:t={},scale:n={},style:r={},animate:i={},transform:a=[]}=e,s=zA(e,["data","scale","style","animate","transform"]),{targetData:l,totalData:p,target:m,total:y,scale:b}=zae(t,n),E=ja(r,"text"),O=Q3(r,["pointer","pin"]),P=ja(r,"arc"),I=P.shape;return[Pi({},F9,Object.assign({type:"interval",transform:[{type:"stackY"}],data:p,scale:b,style:I==="round"?Object.assign(Object.assign({},P),{shape:Lae}):P,animate:typeof i=="object"?ja(i,"arc"):i},s)),Pi({},F9,Nae,Object.assign({type:"point",data:l,scale:b,style:O,animate:typeof i=="object"?ja(i,"indicator"):i},s)),Pi({},Bae,{style:Object.assign({text:Uae(E,{target:m,total:y})},E),animate:typeof i=="object"?ja(i,"text"):i})]};z9.props={};const BI=Math.PI/180,FE=64,UA=2048;function jae(e){return e.text}function Zae(){return"serif"}function U9(){return"normal"}function Vae(e){return e.value}function Hae(){return~~(Math.random()*2)*90}function Wae(){return 1}function $ae(){}function Gae(e,t,n,r){if(t.sprite)return;const i=e.context,a=e.ratio;i.clearRect(0,0,(FE<<5)/a,UA/a);let s=0,l=0,p=0;const m=n.length;for(--r;++r<m;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;let E=i.measureText(t.text+"m").width*a,O=t.size<<1;if(t.rotate){const P=Math.sin(t.rotate*BI),I=Math.cos(t.rotate*BI),N=E*I,z=E*P,V=O*I,W=O*P;E=Math.max(Math.abs(N+W),Math.abs(N-W))+31>>5<<5,O=~~Math.max(Math.abs(z+V),Math.abs(z-V))}else E=E+31>>5<<5;if(O>p&&(p=O),s+E>=FE<<5&&(s=0,l+=p,p=0),l+O>=UA)break;i.translate((s+(E>>1))/a,(l+(O>>1))/a),t.rotate&&i.rotate(t.rotate*BI),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=E,t.height=O,t.xoff=s,t.yoff=l,t.x1=E>>1,t.y1=O>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=E}const y=i.getImageData(0,0,(FE<<5)/a,UA/a).data,b=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;const E=t.width,O=E>>5;let P=t.y1-t.y0;for(let z=0;z<P*O;z++)b[z]=0;if(s=t.xoff,s==null)return;l=t.yoff;let I=0,N=-1;for(let z=0;z<P;z++){for(let V=0;V<E;V++){const W=O*z+(V>>5),K=y[(l+z)*(FE<<5)+(s+V)<<2]?1<<31-V%32:0;b[W]|=K,I|=K}I?N=z:(t.y0++,P--,z--,l++)}t.y1=t.y0+N,t.sprite=b.slice(0,(t.y1-t.y0)*O)}}function Xae(e,t,n){n>>=5;const r=e.sprite,i=e.width>>5,a=e.x-(i<<4),s=a&127,l=32-s,p=e.y1-e.y0;let m=(e.y+e.y0)*n+(a>>5),y;for(let b=0;b<p;b++){y=0;for(let E=0;E<=i;E++)if((y<<l|(E<i?(y=r[b*i+E])>>>s:0))&t[m+E])return!0;m+=n}return!1}function Yae(e,t){const n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function qae(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function j9(e){const t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Kae(e){const n=4*e[0]/e[1];let r=0,i=0;return function(a){const s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function Z9(e){const t=[];let n=-1;for(;++n<e;)t[n]=0;return t}function Qae(){return document.createElement("canvas")}function Ey(e){return typeof e=="function"?e:function(){return e}}const Jae={archimedean:j9,rectangular:Kae};function eoe(){let e=[256,256],t=jae,n=Zae,r=Vae,i=U9,a=Hae,s=Wae,l=j9,p=Math.random,m=$ae,y=[],b=null,E=1/0;const O=U9,P=Qae,I={};I.start=function(){const[V,W]=e,K=N(P()),J=I.board?I.board:Z9((e[0]>>5)*e[1]),oe=y.length,Te=[],Re=y.map(function(Ft,ft,St){return Ft.text=t.call(this,Ft,ft,St),Ft.font=n.call(this,Ft,ft,St),Ft.style=O.call(this,Ft,ft,St),Ft.weight=i.call(this,Ft,ft,St),Ft.rotate=a.call(this,Ft,ft,St),Ft.size=~~r.call(this,Ft,ft,St),Ft.padding=s.call(this,Ft,ft,St),Ft}).sort(function(Ft,ft){return ft.size-Ft.size});let We=-1,ut=I.board?[{x:0,y:0},{x:V,y:W}]:void 0;b&&clearInterval(b),b=setInterval(ct,0),ct();function ct(){const Ft=Date.now();for(;Date.now()-Ft<E&&++We<oe;){const ft=Re[We];ft.x=V*(p()+.5)>>1,ft.y=W*(p()+.5)>>1,Gae(K,ft,Re,We),ft.hasText&&z(J,ft,ut)&&(m.call(null,"word",{cloud:I,word:ft}),Te.push(ft),ut?I.hasImage||Yae(ut,ft):ut=[{x:ft.x+ft.x0,y:ft.y+ft.y0},{x:ft.x+ft.x1,y:ft.y+ft.y1}],ft.x-=e[0]>>1,ft.y-=e[1]>>1)}I._tags=Te,I._bounds=ut,We>=oe&&(I.stop(),m.call(null,"end",{cloud:I,words:Te,bounds:ut}))}return I},I.stop=function(){return b&&(clearInterval(b),b=null),I};function N(V){V.width=V.height=1;const W=Math.sqrt(V.getContext("2d").getImageData(0,0,1,1).data.length>>2);V.width=(FE<<5)/W,V.height=UA/W;const K=V.getContext("2d");return K.fillStyle=K.strokeStyle="red",K.textAlign="center",{context:K,ratio:W}}function z(V,W,K){const J=W.x,oe=W.y,Te=Math.sqrt(e[0]*e[0]+e[1]*e[1]),Re=l(e),We=p()<.5?1:-1;let ut,ct=-We,Ft,ft;for(;(ut=Re(ct+=We))&&(Ft=~~ut[0],ft=~~ut[1],!(Math.min(Math.abs(Ft),Math.abs(ft))>=Te));)if(W.x=J+Ft,W.y=oe+ft,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>e[0]||W.y+W.y1>e[1])&&(!K||!Xae(W,V,e[0]))&&(!K||qae(W,K))){const St=W.sprite,Mt=W.width>>5,Nt=e[0]>>5,tn=W.x-(Mt<<4),Yt=tn&127,fn=32-Yt,Hn=W.y1-W.y0;let cr,_r=(W.y+W.y0)*Nt+(tn>>5);for(let Mr=0;Mr<Hn;Mr++){cr=0;for(let fi=0;fi<=Mt;fi++)V[_r+fi]|=cr<<fn|(fi<Mt?(cr=St[Mr*Mt+fi])>>>Yt:0);_r+=Nt}return delete W.sprite,!0}return!1}return I.createMask=V=>{const W=document.createElement("canvas"),[K,J]=e;if(!K||!J)return;const oe=K>>5,Te=Z9((K>>5)*J);W.width=K,W.height=J;const Re=W.getContext("2d");Re.drawImage(V,0,0,V.width,V.height,0,0,K,J);const We=Re.getImageData(0,0,K,J).data;for(let ut=0;ut<J;ut++)for(let ct=0;ct<K;ct++){const Ft=oe*ut+(ct>>5),ft=ut*K+ct<<2,Mt=We[ft]>=250&&We[ft+1]>=250&&We[ft+2]>=250?1<<31-ct%32:0;Te[Ft]|=Mt}I.board=Te,I.hasImage=!0},I.timeInterval=function(V){E=V==null?1/0:V},I.words=function(V){y=V},I.size=function(V=[]){e=[+V[0],+V[1]]},I.text=function(V){t=Ey(V)},I.font=function(V){n=Ey(V)},I.fontWeight=function(V){i=Ey(V)},I.rotate=function(V){a=Ey(V)},I.spiral=function(V){l=Jae[V]||V},I.fontSize=function(V){r=Ey(V)},I.padding=function(V){s=Ey(V)},I.random=function(V){p=Ey(V)},I.on=function(V){m=Ey(V)},I}var toe=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})};function noe(e,t){return{set(n,r,i){if(t[n]===void 0)return this;const a=r?r.call(null,t[n]):t[n];return i?i.call(null,a):typeof e[n]=="function"?e[n](a):e[n]=a,this},setAsync(n,r,i){return toe(this,void 0,void 0,function*(){if(t[n]===void 0)return this;const a=r?yield r.call(null,t[n]):t[n];return i?i.call(null,a):typeof e[n]=="function"?e[n](a):e[n]=a,this})}}}var roe=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},ioe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const aoe={size:[500,500],fontSize:[14,28]};function ooe(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function soe(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){const[n,r]=e;if(!t)return()=>(r+n)/2;const[i,a]=t;return a===i?()=>(r+n)/2:({value:s})=>(r-n)/(a-i)*(s-i)+n}return()=>e}const V9=e=>t=>roe(void 0,void 0,void 0,function*(){const n=Object.assign({},aoe,e),r=eoe();yield noe(r,n).set("fontSize",z=>{const V=t.map(W=>W.value);return soe(z,[cv(V),Pu(V)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",ooe,r.createMask),r.words([...t]);const i=r.start(),[a,s]=n.size,l=[{x:0,y:0},{x:a,y:s}],{_bounds:p=l,_tags:m,hasImage:y}=i,b=m.map(z=>{var{x:V,y:W}=z,K=ioe(z,["x","y"]);return Object.assign(Object.assign({},K),{x:V+a/2,y:W+s/2})}),[{x:E,y:O},{x:P,y:I}]=p,N={text:"",value:0,opacity:0,fontSize:0};return b.push(Object.assign(Object.assign({},N),{x:y?0:E,y:y?0:O}),Object.assign(Object.assign({},N),{x:y?a:P,y:y?s:I})),b});V9.props={};var uoe=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(y){try{m(r.next(y))}catch(b){s(b)}}function p(y){try{m(r.throw(y))}catch(b){s(b)}}function m(y){y.done?a(y.value):i(y.value).then(l,p)}m((r=r.apply(e,t||[])).next())})},loe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function coe(e,t){const{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const foe=(e,t)=>({size:[e,t]}),hoe=(e,t)=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size"},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]},fontSize:{type:"identity"},rotate:{type:"identity"}},style:{textAlign:"center"}}),H9=(e,t)=>uoe(void 0,void 0,void 0,function*(){const{width:n,height:r}=t,{data:i,encode:a={},scale:s,style:l={},layout:p={}}=e,m=loe(e,["data","encode","scale","style","layout"]),y=coe(i,a),b=yield V9(Object.assign(Object.assign({},foe(n,r)),p))(y);return Pi({},hoe(n,r),Object.assign(Object.assign({data:b,encode:a,scale:s,style:l},m),{axis:!1}))});H9.props={};const W9=5e3;function $9(e,t,n){return e+(t-e)*n}function doe(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function poe(e,t,n,r,i,a,s){const l=Math.ceil(2*e/n*4)*4,p=[];let m=r;for(;m<-Math.PI*2;)m+=Math.PI*2;for(;m>0;)m-=Math.PI*2;m=m/Math.PI/2*n;const y=a-e+m-e*2;p.push(["M",y,t]);let b=0;for(let E=0;E<l;++E){const O=E%4,P=doe(E*n/4,O,n,i);p.push(["C",P[0][0]+y,-P[0][1]+t,P[1][0]+y,-P[1][1]+t,P[2][0]+y,-P[2][1]+t]),E===l-1&&(b=P[2][0])}return p.push(["L",b+y,s+e]),p.push(["L",y,s+e]),p.push(["Z"]),p}function voe(e,t,n,r,i,a,s,l,p,m,y){const{fill:b,fillOpacity:E,opacity:O}=i;for(let P=0;P<r;P++){const I=r<=1?1:P/(r-1),N=poe(l,s+l*n,p,0,l/40,e,t),z=y.createElement("path",{style:{path:N,fill:b,opacity:$9(.2,.9,I)*Number(O||E)}});a.appendChild(z);try{if(m===!1)return;const V=[{transform:"translate(0, 0)"},{transform:`translate(${p*2}px, 0)`}];z.animate(V,{duration:$9(.5*W9,W9,I)*2,iterations:1/0})}catch(V){console.warn("off-screen group animate error!")}}}function moe(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function goe(e,t,n){const i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function yoe(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function _oe(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function boe(e,t,n){const r=n*4/3,i=Math.max(r,n*2),a=r/2,s=e,l=a+t-i/2,p=Math.asin(a/((i-a)*.85)),m=Math.sin(p)*a,y=Math.cos(p)*a,b=s-y,E=l+m,O=e,P=l+a/Math.sin(p);return`
      M ${b} ${E}
      A ${a} ${a} 0 1 1 ${b+y*2} ${E}
      Q ${O} ${P} ${e} ${t+i/2}
      Q ${O} ${P} ${b} ${E}
      Z 
    `}const G9={pin:boe,rect:goe,circle:moe,diamond:yoe,triangle:_oe};var X9=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xoe=(e="circle")=>G9[e]||G9.circle,Y9=(e,t)=>{if(!t)return;const{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:a,percent:s}=r,{background:l,outline:p={},wave:m={}}=i,y=X9(i,["background","outline","wave"]),{border:b=2,distance:E=0}=p,O=X9(p,["border","distance"]),{length:P=192,count:I=3}=m;return(N,z,V)=>{const{document:W}=t.canvas,{color:K,fillOpacity:J}=V,oe=Object.assign(Object.assign({fill:K},V),y),Te=W.createElement("g",{}),[Re,We]=n.getCenter(),ut=n.getSize(),ct=Math.min(...ut)/2,ft=(hh(a)?a:xoe(a))(Re,We,ct,...ut);if(Object.keys(l).length){const Nt=W.createElement("path",{style:Object.assign({path:ft,fill:"#fff"},l)});Te.appendChild(Nt)}if(s>0){const Nt=W.createElement("path",{style:{path:ft}});Te.appendChild(Nt),Te.style.clipPath=Nt,voe(Re,We,1-s,I,oe,Te,Nt.getBBox().y,ct*2,P,!0,W)}const St=W.createElement("path",{style:{path:ft,fill:"transparent",lineWidth:b+2*E,stroke:"#fff"}}),Mt=W.createElement("path",{style:Object.assign(Object.assign(Object.assign({path:ft,stroke:K,strokeOpacity:J,lineWidth:b},oe),O),{fill:"transparent"})});return Te.appendChild(St),Te.appendChild(Mt),Te}};Y9.props={};var Eoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Soe={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:Y9},animate:{enter:{type:"fadeIn"}}},woe={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},q9=e=>{const{data:t={},style:n={},animate:r}=e,i=Eoe(e,["data","style","animate"]),a=Math.max(0,(0,Yl.Z)(t)?t:t==null?void 0:t.percent),s=[{percent:a,type:"liquid"}],l=Object.assign(Object.assign({},ja(n,"text")),ja(n,"content")),p=ja(n,"outline"),m=ja(n,"wave"),y=ja(n,"background");return[Pi({},Soe,Object.assign({type:"interval",data:s,style:{liquidOptions:{percent:a,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:p,wave:m,background:y})},animate:r},i)),Pi({},woe,{style:Object.assign({text:`${A_(a*100)} %`},l),animate:r})]};q9.props={};var vg=D(69916);const K9=1e-10;function Q9(e,t){const n=Aoe(e),r=n.filter(function(p){return Toe(p,e)});let i=0,a=0,s;const l=[];if(r.length>1){const p=Coe(r);for(s=0;s<r.length;++s){const y=r[s];y.angle=Math.atan2(y.x-p.x,y.y-p.y)}r.sort(function(y,b){return b.angle-y.angle});let m=r[r.length-1];for(s=0;s<r.length;++s){const y=r[s];a+=(m.x+y.x)*(y.y-m.y);const b={x:(y.x+m.x)/2,y:(y.y+m.y)/2};let E=null;for(let O=0;O<y.parentIndex.length;++O)if(m.parentIndex.indexOf(y.parentIndex[O])>-1){const P=e[y.parentIndex[O]],I=Math.atan2(y.x-P.x,y.y-P.y),N=Math.atan2(m.x-P.x,m.y-P.y);let z=N-I;z<0&&(z+=2*Math.PI);const V=N-z/2;let W=zE(b,{x:P.x+P.radius*Math.sin(V),y:P.y+P.radius*Math.cos(V)});W>P.radius*2&&(W=P.radius*2),(E===null||E.width>W)&&(E={circle:P,width:W,p1:y,p2:m})}E!==null&&(l.push(E),i+=FI(E.circle.radius,E.width),m=y)}}else{let p=e[0];for(s=1;s<e.length;++s)e[s].radius<p.radius&&(p=e[s]);let m=!1;for(s=0;s<e.length;++s)if(zE(e[s],p)>Math.abs(p.radius-e[s].radius)){m=!0;break}m?i=a=0:(i=p.radius*p.radius*Math.PI,l.push({circle:p,p1:{x:p.x,y:p.y+p.radius},p2:{x:p.x-K9,y:p.y+p.radius},width:p.radius*2}))}return a/=2,t&&(t.area=i+a,t.arcArea=i,t.polygonArea=a,t.arcs=l,t.innerPoints=r,t.intersectionPoints=n),i+a}function Toe(e,t){for(let n=0;n<t.length;++n)if(zE(e,t[n])>t[n].radius+K9)return!1;return!0}function Aoe(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=eU(e[n],e[r]);for(let a=0;a<i.length;++a){const s=i[a];s.parentIndex=[n,r],t.push(s)}}return t}function FI(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function zE(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function J9(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return FI(e,r)+FI(t,i)}function eU(e,t){const n=zE(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const a=(r*r-i*i+n*n)/(2*n),s=Math.sqrt(r*r-a*a),l=e.x+a*(t.x-e.x)/n,p=e.y+a*(t.y-e.y)/n,m=-(t.y-e.y)*(s/n),y=-(t.x-e.x)*(s/n);return[{x:l+m,y:p-y},{x:l-m,y:p+y}]}function Coe(e){const t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function Ooe(e,t){t=t||{},t.maxIterations=t.maxIterations||500;const n=t.initialLayout||Ioe,r=t.lossFunction||UI;e=Moe(e);const i=n(e,t),a=[],s=[];let l;for(l in i)i.hasOwnProperty(l)&&(a.push(i[l].x),a.push(i[l].y),s.push(l));const m=(0,vg.nelderMead)(function(y){const b={};for(let E=0;E<s.length;++E){const O=s[E];b[O]={x:y[2*E],y:y[2*E+1],radius:i[O].radius}}return r(b,e)},a,t).x;for(let y=0;y<s.length;++y)l=s[y],i[l].x=m[2*y],i[l].y=m[2*y+1];return i}const tU=1e-10;function zI(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+tU?Math.abs(e-t):(0,vg.bisect)(function(r){return J9(e,t,r)-n},0,e+t)}function Moe(e){e=e.slice();const t=[],n={};let r,i,a,s;for(r=0;r<e.length;++r){const l=e[r];l.sets.length==1?t.push(l.sets[0]):l.sets.length==2&&(a=l.sets[0],s=l.sets[1],n[[a,s]]=!0,n[[s,a]]=!0)}for(t.sort((l,p)=>l>p?1:-1),r=0;r<t.length;++r)for(a=t[r],i=r+1;i<t.length;++i)s=t[i],[a,s]in n||e.push({sets:[a,s],size:0});return e}function Roe(e,t,n){const r=(0,vg.zerosM)(t.length,t.length),i=(0,vg.zerosM)(t.length,t.length);return e.filter(function(a){return a.sets.length==2}).map(function(a){const s=n[a.sets[0]],l=n[a.sets[1]],p=Math.sqrt(t[s].size/Math.PI),m=Math.sqrt(t[l].size/Math.PI),y=zI(p,m,a.size);r[s][l]=r[l][s]=y;let b=0;a.size+1e-10>=Math.min(t[s].size,t[l].size)?b=1:a.size<=1e-10&&(b=-1),i[s][l]=i[l][s]=b}),{distances:r,constraints:i}}function Poe(e,t,n,r){let i=0,a;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<n.length;++a){const s=e[2*a],l=e[2*a+1];for(let p=a+1;p<n.length;++p){const m=e[2*p],y=e[2*p+1],b=n[a][p],E=r[a][p],O=(m-s)*(m-s)+(y-l)*(y-l),P=Math.sqrt(O),I=O-b*b;E>0&&P<=b||E<0&&P>=b||(i+=2*I*I,t[2*a]+=4*I*(s-m),t[2*a+1]+=4*I*(l-y),t[2*p]+=4*I*(m-s),t[2*p+1]+=4*I*(y-l))}}return i}function Ioe(e,t){let n=Loe(e,t);const r=t.lossFunction||UI;if(e.length>=8){const i=koe(e,t),a=r(i,e),s=r(n,e);a+1e-8<s&&(n=i)}return n}function koe(e,t){t=t||{};const n=t.restarts||10,r=[],i={};let a;for(a=0;a<e.length;++a){const I=e[a];I.sets.length==1&&(i[I.sets[0]]=r.length,r.push(I))}const s=Roe(e,r,i);let l=s.distances;const p=s.constraints,m=(0,vg.norm2)(l.map(vg.norm2))/l.length;l=l.map(function(I){return I.map(function(N){return N/m})});const y=function(I,N){return Poe(I,N,l,p)};let b,E;for(a=0;a<n;++a){const I=(0,vg.zeros)(l.length*2).map(Math.random);E=(0,vg.conjugateGradient)(y,I,t),(!b||E.fx<b.fx)&&(b=E)}const O=b.x,P={};for(a=0;a<r.length;++a){const I=r[a];P[I.sets[0]]={x:O[2*a]*m,y:O[2*a+1]*m,radius:Math.sqrt(I.size/Math.PI)}}if(t.history)for(a=0;a<t.history.length;++a)(0,vg.scale)(t.history[a].x,m);return P}function Loe(e,t){const n=t&&t.lossFunction?t.lossFunction:UI,r={},i={};let a;for(let b=0;b<e.length;++b){const E=e[b];E.sets.length==1&&(a=E.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:E.size,radius:Math.sqrt(E.size/Math.PI)},i[a]=[])}e=e.filter(function(b){return b.sets.length==2});for(let b=0;b<e.length;++b){const E=e[b];let O=E.hasOwnProperty("weight")?E.weight:1;const P=E.sets[0],I=E.sets[1];E.size+tU>=Math.min(r[P].size,r[I].size)&&(O=0),i[P].push({set:I,size:E.size,weight:O}),i[I].push({set:P,size:E.size,weight:O})}const s=[];for(a in i)if(i.hasOwnProperty(a)){let b=0;for(let E=0;E<i[a].length;++E)b+=i[a][E].size*i[a][E].weight;s.push({set:a,size:b})}function l(b,E){return E.size-b.size}s.sort(l);const p={};function m(b){return b.set in p}function y(b,E){r[E].x=b.x,r[E].y=b.y,p[E]=!0}y({x:0,y:0},s[0].set);for(let b=1;b<s.length;++b){const E=s[b].set,O=i[E].filter(m);if(a=r[E],O.sort(l),O.length===0)throw"ERROR: missing pairwise overlap information";const P=[];for(let z=0;z<O.length;++z){const V=r[O[z].set],W=zI(a.radius,V.radius,O[z].size);P.push({x:V.x+W,y:V.y}),P.push({x:V.x-W,y:V.y}),P.push({y:V.y+W,x:V.x}),P.push({y:V.y-W,x:V.x});for(let K=z+1;K<O.length;++K){const J=r[O[K].set],oe=zI(a.radius,J.radius,O[K].size),Te=eU({x:V.x,y:V.y,radius:W},{x:J.x,y:J.y,radius:oe});for(let Re=0;Re<Te.length;++Re)P.push(Te[Re])}}let I=1e50,N=P[0];for(let z=0;z<P.length;++z){r[E].x=P[z].x,r[E].y=P[z].y;const V=n(r,e);V<I&&(I=V,N=P[z])}y(N,E)}return r}function UI(e,t){let n=0;function r(i){return i.map(function(a){return e[a]})}for(let i=0;i<t.length;++i){const a=t[i];let s;if(a.sets.length==1)continue;if(a.sets.length==2){const p=e[a.sets[0]],m=e[a.sets[1]];s=J9(p.radius,m.radius,zE(p,m))}else s=Q9(r(a.sets));const l=a.hasOwnProperty("weight")?a.weight:1;n+=l*(s-a.size)*(s-a.size)}return n}function Doe(e,t,n){n===null?e.sort(function(i,a){return a.radius-i.radius}):e.sort(n);let r;if(e.length>0){const i=e[0].x,a=e[0].y;for(r=0;r<e.length;++r)e[r].x-=i,e[r].y-=a}if(e.length==2&&distance(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const i=Math.atan2(e[1].x,e[1].y)-t;let a,s;const l=Math.cos(i),p=Math.sin(i);for(r=0;r<e.length;++r)a=e[r].x,s=e[r].y,e[r].x=l*a-p*s,e[r].y=p*a+l*s}if(e.length>2){let i=Math.atan2(e[2].x,e[2].y)-t;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const a=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){const s=(e[r].x+a*e[r].y)/(1+a*a);e[r].x=2*s-e[r].x,e[r].y=2*s*a-e[r].y}}}}function Noe(e){e.map(function(s){s.parent=s});function t(s){return s.parent!==s&&(s.parent=t(s.parent)),s.parent}function n(s,l){const p=t(s),m=t(l);p.parent=m}for(let s=0;s<e.length;++s)for(let l=s+1;l<e.length;++l){const p=e[s].radius+e[l].radius;distance(e[s],e[l])+1e-10<p&&n(e[l],e[s])}const r={};let i;for(let s=0;s<e.length;++s)i=t(e[s]).parent.setid,i in r||(r[i]=[]),r[i].push(e[s]);e.map(function(s){delete s.parent});const a=[];for(i in r)r.hasOwnProperty(i)&&a.push(r[i]);return a}function jI(e){const t=function(n){const r=Math.max.apply(null,e.map(function(a){return a[n]+a.radius})),i=Math.min.apply(null,e.map(function(a){return a[n]-a.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function Lve(e,t,n){t===null&&(t=Math.PI/2);let r=[],i,a;for(a in e)if(e.hasOwnProperty(a)){const E=e[a];r.push({x:E.x,y:E.y,radius:E.radius,setid:a})}const s=Noe(r);for(i=0;i<s.length;++i){Doe(s[i],t,n);const E=jI(s[i]);s[i].size=(E.xRange.max-E.xRange.min)*(E.yRange.max-E.yRange.min),s[i].bounds=E}s.sort(function(E,O){return O.size-E.size}),r=s[0];let l=r.bounds;const p=(l.xRange.max-l.xRange.min)/50;function m(E,O,P){if(!E)return;const I=E.bounds;let N,z,V;O?N=l.xRange.max-I.xRange.min+p:(N=l.xRange.max-I.xRange.max,V=(I.xRange.max-I.xRange.min)/2-(l.xRange.max-l.xRange.min)/2,V<0&&(N+=V)),P?z=l.yRange.max-I.yRange.min+p:(z=l.yRange.max-I.yRange.max,V=(I.yRange.max-I.yRange.min)/2-(l.yRange.max-l.yRange.min)/2,V<0&&(z+=V));for(let W=0;W<E.length;++W)E[W].x+=N,E[W].y+=z,r.push(E[W])}let y=1;for(;y<s.length;)m(s[y],!0,!1),m(s[y+1],!1,!0),m(s[y+2],!0,!0),y+=3,l=jI(r);const b={};for(i=0;i<r.length;++i)b[r[i].setid]=r[i];return b}function Boe(e,t,n,r){const i=[],a=[];for(const I in e)e.hasOwnProperty(I)&&(a.push(I),i.push(e[I]));t-=2*r,n-=2*r;const s=jI(i),l=s.xRange,p=s.yRange;if(l.max==l.min||p.max==p.min)return console.log("not scaling solution: zero size detected"),e;const m=t/(l.max-l.min),y=n/(p.max-p.min),b=Math.min(y,m),E=(t-(l.max-l.min)*b)/2,O=(n-(p.max-p.min)*b)/2,P={};for(let I=0;I<i.length;++I){const N=i[I];P[a[I]]={radius:b*N.radius,x:r+E+(N.x-l.min)*b,y:r+O+(N.y-p.min)*b}}return P}function Foe(e,t,n){const r=[],i=e-n,a=t;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}function zoe(e){const t={};Q9(e,t);const n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return Foe(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const a=n[i],s=a.circle.radius,l=a.width>s;r.push(`
A`,s,s,0,l?1:0,1,a.p1.x,a.p1.y)}return r.join(" ")}}const nU=e=>{const{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[a,s]=r;return l=>{const p=l.map(b=>Object.assign(Object.assign({},b),{sets:b[t],size:b[n],[a]:b.sets.join("&")}));p.sort((b,E)=>b.sets.length-E.sets.length);const m=Ooe(p);let y;return p.map(b=>{const E=b[t],O=({width:P,height:I})=>{y=y||Boe(m,P,I,i);const N=E.map(V=>y[V]);let z=zoe(N);return/[zZ]$/.test(z)||(z+=" Z"),z};return Object.assign(Object.assign({},b),{[s]:O})})}};nU.props={};function Uoe(){return{"data.venn":nU,"mark.boxplot":N9,"mark.gauge":z9,"mark.wordCloud":H9,"mark.liquid":q9}}function joe(){return Object.assign(Object.assign(Object.assign(Object.assign({},Are()),Mae()),Uoe()),Ene())}var jA=function(){return jA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jA.apply(this,arguments)},Zoe=uY(sY,jA(jA({},joe()),XY())),Voe="[object Boolean]";function Hoe(e){return e===!0||e===!1||Wu(e)&&be(e)==Voe}var ZI=Hoe,UE=function(){return UE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},UE.apply(this,arguments)},Woe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},$oe=["renderer"],rU=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],VI="__transform__",Goe="__skipDelCustomKeys__",t1=function(e,t){return ZI(t)?{type:e,available:t}:UE({type:e},t)},HI={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(e){return t1("stackY",e)}},normalize:{target:"transform",value:function(e){return t1("normalizeY",e)}},percent:{target:"transform",value:function(e){return t1("normalizeY",e)}},group:{target:"transform",value:function(e){return t1("dodgeX",e)}},sort:{target:"transform",value:function(e){return t1("sortX",e)}},symmetry:{target:"transform",value:function(e){return t1("symmetryY",e)}},diff:{target:"transform",value:function(e){return t1("diffY",e)}},meta:{target:"scale",value:function(e){return e}},label:{target:"labels",value:function(e){return e}},shape:"style.shape",connectNulls:{target:"style",value:function(e){return ZI(e)?{connect:e}:e}}},WI=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],ZA=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:WI},{key:"point",type:"point",extend_keys:WI},{key:"area",type:"area",extend_keys:WI}],Xoe=[{key:"transform",callback:function(e,t,n){var r;e[t]=e[t]||[];var i=n.available,a=i===void 0?!0:i,s=Woe(n,["available"]);a?e[t].push(UE((r={},r[VI]=!0,r),s)):e[t].splice(e[t].indexOf(function(l){return l.type===n.type}),1)}},{key:"labels",callback:function(e,t,n){var r;if(!n||Ar(n)){e[t]=n||[];return}n.text||(n.text=e.yField),e[t]=e[t]||[],e[t].push(UE((r={},r[VI]=!0,r),n))}}],$I=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Yoe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VA=function(){return VA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},VA.apply(this,arguments)},qoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Koe=function(e){Yoe(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=qoe(n,["style"]);return e.call(this,VA({style:VA({fill:"#eee"},r)},i))||this}return t}(Cl),Qoe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HA=function(){return HA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},HA.apply(this,arguments)},Joe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},iU=function(e){Qoe(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Joe(n,["style"]);return e.call(this,HA({style:HA({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(Hf);function ese(e,t,n){(n!==void 0&&!bt(e[t],n)||n===void 0&&!(t in e))&&wn(e,t,n)}var GI=ese;function tse(e){return function(t,n,r){for(var i=-1,a=Object(t),s=r(t),l=s.length;l--;){var p=s[e?l:++i];if(n(a[p],p,a)===!1)break}return t}}var nse=tse,rse=nse(),aU=rse;function ise(e){return Wu(e)&&Qo(e)}var ase=ise,ose="[object Object]",sse=Function.prototype,use=Object.prototype,oU=sse.toString,lse=use.hasOwnProperty,cse=oU.call(Object);function fse(e){if(!Wu(e)||be(e)!=ose)return!1;var t=Fs(e);if(t===null)return!0;var n=lse.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&oU.call(n)==cse}var XI=fse;function hse(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var YI=hse;function dse(e){return qr(e,Xn(e))}var pse=dse;function vse(e,t,n,r,i,a,s){var l=YI(e,n),p=YI(t,n),m=s.get(p);if(m){GI(e,n,m);return}var y=a?a(l,p,n+"",e,t,s):void 0,b=y===void 0;if(b){var E=Ar(p),O=!E&&Df(p),P=!E&&!O&&zr(p);y=p,E||O||P?Ar(l)?y=l:ase(l)?y=$a(l):O?(b=!1,y=la(p,!0)):P?(b=!1,y=Yh(p,!0)):y=[]:XI(p)||yh(p)?(y=l,yh(l)?y=pse(l):(!Ee(l)||dr(l))&&(y=oc(p))):b=!1}b&&(s.set(p,y),i(y,p,r,a,s),s.delete(p)),GI(e,n,y)}var mse=vse;function sU(e,t,n,r,i){e!==t&&aU(t,function(a,s){if(i||(i=new fo),Ee(a))mse(e,t,s,n,sU,r,i);else{var l=r?r(YI(e,s),a,s+"",e,t,i):void 0;l===void 0&&(l=a),GI(e,s,l)}},Xn)}var gse=sU;function yse(e){return e}var qI=yse;function _se(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var bse=_se,uU=Math.max;function xse(e,t,n){return t=uU(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=uU(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(s),bse(e,this,l)}}var lU=xse;function Ese(e){return function(){return e}}var Sse=Ese,wse=Rn?function(e,t){return Rn(e,"toString",{configurable:!0,enumerable:!1,value:Sse(t),writable:!0})}:qI,Tse=wse,Ase=800,Cse=16,Ose=Date.now;function Mse(e){var t=0,n=0;return function(){var r=Ose(),i=Cse-(r-n);if(n=r,i>0){if(++t>=Ase)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Rse=Mse,Pse=Rse(Tse),cU=Pse;function Ise(e,t){return cU(lU(e,t,qI),e+"")}var kse=Ise;function Lse(e,t,n){if(!Ee(n))return!1;var r=typeof t;return(r=="number"?Qo(n)&&El(t,n.length):r=="string"&&t in n)?bt(n[t],e):!1}var Dse=Lse;function Nse(e){return kse(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&Dse(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,a)}return t})}var fU=Nse,Bse=fU(function(e,t,n,r){gse(e,t,n,r)}),Fse=Bse,hU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},zse=function(e,t){if(Ar(t))return t},Sy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fse.apply(void 0,hU(hU([],e,!1),[zse],!1))},Use=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dU=function(e){Use(t,e);function t(n,r,i){var a=e.call(this,{style:Sy(i,r)})||this;return a.chart=n,a}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(n){},t.prototype.update=function(n,r){var i;return this.attr(Sy({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(a){var s=a.getBBox(),l=s.x,p=s.y,m=s.width,y=s.height,b=a.__data__;i.push({bbox:s,x:l,y:p,width:m,height:y,key:b.key,data:b})}),i},t.prototype.bindEvents=function(n,r){},t}(K0),jse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),WA=function(){return WA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},WA.apply(this,arguments)},Zse=function(e){jse(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],a=i.x,s=i.y,l=i.height,p=i.width,m=i.data,y=["items",0,"value"],b=ji(m,y),E=n?r[1].y-s-l:r[1].x-a-p,O=[],P=this.attributes,I=P.size,N=I===void 0?40:I,z=P.arrowSize,V=z===void 0?20:z,W=P.spacing,K=W===void 0?4:W;return r.forEach(function(J,oe){if(oe>0){var Te=J.x,Re=J.y,We=J.height,ut=J.width,ct=J.data,Ft=J.key,ft=ji(ct,y),St=N/2;if(n){var Mt=Te+ut/2,Nt=Re;O.push({points:[[Mt+St,Nt-E+K],[Mt+St,Nt-V-K],[Mt,Nt-K],[Mt-St,Nt-V-K],[Mt-St,Nt-E+K]],center:[Mt,Nt-E/2-K],width:E,value:[b,ft],key:Ft})}else{var Mt=Te,Nt=Re+We/2;O.push({points:[[Te-E+K,Nt-St],[Te-V-K,Nt-St],[Mt-K,Nt],[Te-V-K,Nt+St],[Te-E+K,Nt+St]],center:[Mt-E/2-K,Nt],width:E,value:[b,ft],key:Ft})}b=ft}}),O},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=ji(n,"options.transformations"),i="horizontal";r.forEach(function(a){a.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,a=i.style,s=i.text,l=s.style,p=s.formatter;r.forEach(function(m){var y=m.points,b=m.center,E=m.value,O=m.key,P=E[0],I=E[1],N=b[0],z=b[1],V=new Koe({style:WA({points:y,fill:"#eee"},a),id:"polygon-".concat(O)}),W=new iU({style:WA({x:N,y:z,text:dr(p)?p(P,I):(I/P*100).toFixed(2)+"%"},l),id:"text-".concat(O)});n.appendChild(V),n.appendChild(W)})},t.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var a=i.points,s=i.center,l=i.key,p=s[0],m=s[1],y=n.getElementById("polygon-".concat(l)),b=n.getElementById("text-".concat(l));y.setAttribute("points",a),b.setAttribute("x",p),b.setAttribute("y",m)})},t.tag="ConversionTag",t}(dU),Vse=1,Hse=2;function Wse(e,t,n,r){var i=n.length,a=i,s=!r;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var p=l[0],m=e[p],y=l[1];if(s&&l[2]){if(m===void 0&&!(p in e))return!1}else{var b=new fo;if(r)var E=r(m,y,p,e,t,b);if(!(E===void 0?tt(y,m,Vse|Hse,r,b):E))return!1}}return!0}var $se=Wse;function Gse(e){return e===e&&!Ee(e)}var pU=Gse;function Xse(e){for(var t=No(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,pU(i)]}return t}var Yse=Xse;function qse(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var vU=qse;function Kse(e){var t=Yse(e);return t.length==1&&t[0][2]?vU(t[0][0],t[0][1]):function(n){return n===e||$se(n,e,t)}}var Qse=Kse;function Jse(e,t){return e!=null&&t in Object(e)}var eue=Jse;function tue(e,t,n){t=Vi(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var s=ba(t[r]);if(!(a=e!=null&&n(e,s)))break;e=e[s]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&Wh(i)&&El(s,i)&&(Ar(e)||yh(e)))}var nue=tue;function rue(e,t){return e!=null&&nue(e,t,eue)}var mU=rue,iue=1,aue=2;function oue(e,t){return Og(e)&&pU(t)?vU(ba(e),t):function(n){var r=ji(n,e);return r===void 0&&r===t?mU(n,e):tt(t,r,iue|aue)}}var sue=oue;function uue(e){return function(t){return t==null?void 0:t[e]}}var lue=uue;function cue(e){return function(t){return va(t,e)}}var fue=cue;function hue(e){return Og(e)?lue(ba(e)):fue(e)}var due=hue;function pue(e){return typeof e=="function"?e:e==null?qI:typeof e=="object"?Ar(e)?sue(e[0],e[1]):Qse(e):due(e)}var KI=pue;function vue(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var mue=vue;function gue(e){return e!==e}var yue=gue;function _ue(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var bue=_ue;function xue(e,t,n){return t===t?bue(e,t,n):mue(e,yue,n)}var gU=xue;function Eue(e,t){var n=e==null?0:e.length;return!!n&&gU(e,t,0)>-1}var Sue=Eue;function wue(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Tue=wue;function Aue(){}var yU=Aue,Cue=1/0,Oue=kc&&1/bl(new kc([,-0]))[1]==Cue?function(e){return new kc(e)}:yU,Mue=Oue,Rue=200;function Pue(e,t,n){var r=-1,i=Sue,a=e.length,s=!0,l=[],p=l;if(n)s=!1,i=Tue;else if(a>=Rue){var m=t?null:Mue(e);if(m)return bl(m);s=!1,i=Xf,p=new id}else p=t?[]:l;e:for(;++r<a;){var y=e[r],b=t?t(y):y;if(y=n||y!==0?y:0,s&&b===b){for(var E=p.length;E--;)if(p[E]===b)continue e;t&&p.push(b),l.push(y)}else i(p,b,n)||(p!==l&&p.push(b),l.push(y))}return l}var Iue=Pue;function kue(e,t){return e&&e.length?Iue(e,KI(t,2)):[]}var QI=kue;function Lue(e,t,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;){var s=e[i];t(r,s,n(s),e)}return r}var Due=Lue;function Nue(e,t){return e&&aU(e,t,No)}var Bue=Nue;function Fue(e,t){return function(n,r){if(n==null)return n;if(!Qo(n))return e(n,r);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var zue=Fue,Uue=zue(Bue),_U=Uue;function jue(e,t,n,r){return _U(e,function(i,a,s){t(r,i,n(i),s)}),r}var Zue=jue;function Vue(e,t){return function(n,r){var i=Ar(n)?Due:Zue,a=t?t():{};return i(n,e,KI(r,2),a)}}var Hue=Vue,Wue=Object.prototype,$ue=Wue.hasOwnProperty,Gue=Hue(function(e,t,n){$ue.call(e,n)?e[n].push(t):wn(e,n,[t])}),bU=Gue,JI=32,xU=16,EU=48,Xue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jE=function(){return jE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jE.apply(this,arguments)},Yue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},que=function(e){Xue(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),a=r?QI(i,"x"):QI(i,"y"),s=["title"],l=[],p=this.chart.getContext().views,m=ji(p,[0,"layout"]),y=m.width,b=m.height;return a.forEach(function(E){var O=E.x,P=E.y,I=E.height,N=E.width,z=E.data,V=E.key,W=ji(z,s);r?l.push({x:O+N/2,y:b,text:W,key:V}):l.push({x:y,y:P+I/2,text:W,key:V})}),QI(l,"text").length!==l.length&&(l=Object.values(bU(l,"text")).map(function(E){var O,P=E.reduce(function(I,N){return I+(r?N.x:N.y)},0);return jE(jE({},E[0]),(O={},O[r?"x":"y"]=P/E.length,O))})),l},t.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(a){i.test(a)&&(r[a.replace("label","").replace(/^[A-Z]/,function(s){return s.toLowerCase()})]=n[a])}),r},t.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,a=i.layout,s=i.labelFormatter,l=Yue(i,["layout","labelFormatter"]);r.forEach(function(p){var m=p.x,y=p.y,b=p.text,E=p.key,O=new iU({style:jE({x:m,y,text:dr(s)?s(b):b,wordWrap:!0,wordWrapWidth:a==="horizontal"?JI*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(l)),id:"text-".concat(E)});n.appendChild(O)})},t.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var a=i.x,s=i.y,l=i.key,p=n.getElementById("text-".concat(l));p.setAttribute("x",a),p.setAttribute("y",s)})},t.tag="BidirectionalBarAxisText",t}(dU),Kue={ConversionTag:Zse,BidirectionalBarAxisText:que},Que=function(){function e(t,n){this.container=new Map,this.chart=t,this.config=n,this.init()}return e.prototype.init=function(){var t=this;$I.forEach(function(n){var r,i=n.key,a=n.shape,s=t.config[i];if(s){var l=new Kue[a](t.chart,s),p=t.chart.getContext().canvas;p.appendChild(l),t.container.set(i,l)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},e.prototype.update=function(){var t=this;this.container.size&&$I.forEach(function(n){var r=n.key,i=t.container.get(r);i==null||i.update()})},e}();function Jue(e,t,n,r){if(!Ee(e))return e;t=Vi(t,e);for(var i=-1,a=t.length,s=a-1,l=e;l!=null&&++i<a;){var p=ba(t[i]),m=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(i!=s){var y=l[p];m=r?r(y,p,l):void 0,m===void 0&&(m=Ee(y)?y:El(t[i+1])?[]:{})}Wr(l,p,m),l=l[p]}return e}var SU=Jue;function ele(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var s=t[r],l=va(e,s);n(l,s)&&SU(a,Vi(s,e),l)}return a}var tle=ele;function nle(e,t){return tle(e,t,function(n,r){return mU(e,r)})}var rle=nle,wU=hn?hn.isConcatSpreadable:void 0;function ile(e){return Ar(e)||yh(e)||!!(wU&&e&&e[wU])}var ale=ile;function TU(e,t,n,r,i){var a=-1,s=e.length;for(n||(n=ale),i||(i=[]);++a<s;){var l=e[a];t>0&&n(l)?t>1?TU(l,t-1,n,r,i):Kf(i,l):r||(i[i.length]=l)}return i}var ole=TU;function sle(e){var t=e==null?0:e.length;return t?ole(e,1):[]}var ule=sle;function lle(e){return cU(lU(e,void 0,ule),e+"")}var e5=lle,cle=e5(function(e,t){return e==null?{}:rle(e,t)}),AU=cle,fle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yb=function(){return Yb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Yb.apply(this,arguments)},CU="data-chart-source-type",Iu=function(e){fle(t,e);function t(n,r){var i=e.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return Yb(Yb({},AU(this.options,$oe)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[Goe]?Yb(Yb({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new Zoe(this.getChartOptions()),this.container.setAttribute(CU,"Ant Design Charts")},t.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new Que(n.chart,n.options)}),this.bindSizeSensor()},t.prototype.update=function(n){this.options=this.mergeOption(n)},t.prototype.mergeOption=function(n){return Sy({},this.getBaseOptions(),this.getDefaultOptions(),n)},t.prototype.changeData=function(n){this.chart.changeData(n)},t.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(CU)},t.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(Xs.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},t}(io),hle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dle=function(e){hle(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="base",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(n){return n}},t}(Iu);function ple(){}var t5=ple;function $A(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}$A.prototype=gp(t5.prototype),$A.prototype.constructor=$A;var ZE=$A,vle=_c&&new _c,OU=vle,mle=OU?function(e){return OU.get(e)}:yU,MU=mle,gle={},RU=gle,yle=Object.prototype,_le=yle.hasOwnProperty;function ble(e){for(var t=e.name+"",n=RU[t],r=_le.call(RU,t)?n.length:0;r--;){var i=n[r],a=i.func;if(a==null||a==e)return i.name}return t}var GA=ble,xle=4294967295;function XA(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xle,this.__views__=[]}XA.prototype=gp(t5.prototype),XA.prototype.constructor=XA;var n5=XA;function Ele(e){if(e instanceof n5)return e.clone();var t=new ZE(e.__wrapped__,e.__chain__);return t.__actions__=$a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Sle=Ele,wle=Object.prototype,Tle=wle.hasOwnProperty;function YA(e){if(Wu(e)&&!Ar(e)&&!(e instanceof n5)){if(e instanceof ZE)return e;if(Tle.call(e,"__wrapped__"))return Sle(e)}return new ZE(e)}YA.prototype=t5.prototype,YA.prototype.constructor=YA;var Ale=YA;function Cle(e){var t=GA(e),n=Ale[t];if(typeof n!="function"||!(t in n5.prototype))return!1;if(e===n)return!0;var r=MU(n);return!!r&&e===r[0]}var PU=Cle,Ole="Expected a function",Mle=8,Rle=32,Ple=128,Ile=256;function kle(e){return e5(function(t){var n=t.length,r=n,i=ZE.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if(typeof a!="function")throw new TypeError(Ole);if(i&&!s&&GA(a)=="wrapper")var s=new ZE([],!0)}for(r=s?r:n;++r<n;){a=t[r];var l=GA(a),p=l=="wrapper"?MU(a):void 0;p&&PU(p[0])&&p[1]==(Ple|Mle|Rle|Ile)&&!p[4].length&&p[9]==1?s=s[GA(p[0])].apply(s,p[3]):s=a.length==1&&PU(a)?s[l]():s.thru(a)}return function(){var m=arguments,y=m[0];if(s&&m.length==1&&Ar(y))return s.plant(y).value();for(var b=0,E=n?t[b].apply(this,m):y;++b<n;)E=t[b].call(this,E);return E}})}var Lle=kle,Dle=Lle(),Zu=Dle,Nle=function(e){var t=e.options,n=t.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(a){Ar(i[a])&&a!=="data"&&(i[a]=i[a].filter(function(s){return!s[VI]}))})}),t};function Ble(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Fle=Ble;function zle(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var Ule=zle;function jle(e,t){return t.length<2?e:va(e,Ule(t,0,-1))}var Zle=jle;function Vle(e,t){return t=Vi(t,e),e=Zle(e,t),e==null||delete e[ba(Fle(t))]}var Hle=Vle;function Wle(e){return XI(e)?void 0:e}var $le=Wle,Gle=1,Xle=2,Yle=4,qle=e5(function(e,t){var n={};if(e==null)return n;var r=!1;t=ki(t,function(a){return a=Vi(a,e),r||(r=a.length>1),a}),qr(e,Du(e),n),r&&(n=t0(n,Gle|Xle|Yle,$le));for(var i=t.length;i--;)Hle(n,t[i]);return n}),r5=qle;function Kle(e){return e===void 0}var Qle=Kle;function Jle(e,t,n){return e==null?e:SU(e,t,n)}var Uo=Jle,IU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ece=function(e){var t=e.children,n=t===void 0?[]:t,r=Object.keys(HI).concat(ZA.map(function(i){return i.key}));return r.forEach(function(i){delete e[i]}),n.forEach(function(i){Object.keys(i).forEach(function(a){r.includes(a)&&delete i[a]})}),Object.keys(e).forEach(function(i){IU(IU([],rU,!0),$I.map(function(a){return a.key}),!0).includes(i)||delete e[i]}),e},Qu=function(e){var t=Nle(e),n=t.children,r=n===void 0?[]:n,i=r5(t,[].concat(rU,ZA.map(function(m){return m.key}))),a=function(m){var y;return(y=Xoe.find(function(b){return b.key===m}))===null||y===void 0?void 0:y.callback},s=function(m,y,b){var E=a(y);E?E(m,y,b):m[y]=Sy({},m[y],b)},l=function(m){Object.keys(m).forEach(function(y){var b=ZA.find(function(P){return P.key===y});if(b){var E=b.type,O=b.extend_keys;E?r.push(p(Sy({},AU(m,O),{type:E},m[y]))):Ar(m[y])&&m[y].forEach(function(P){r.push(p(P))})}})},p=function(m){return l(m),Object.keys(HI).forEach(function(y){var b=HI[y];if(!Qle(m[y]))if(Ee(b)){var E=b.value,O=b.target,P=E(m[y]);s(m,O,P)}else Uo(m,b,m[y])}),m};return r.forEach(function(m){var y=Sy({},i,m);p(Sy(m,y))}),l(t),ece(t),e},i5=function(){return i5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i5.apply(this,arguments)};function tce(e){var t=e.options,n=t.stack,r=t.tooltip,i=t.xField;if(!n)return e;var a=ZA.map(function(l){return l.type}).filter(function(l){return!!l}),s=!1;return a.forEach(function(l){t[l]&&(s=!0,Uo(t,[l,"stack"],i5({y1:"y"},typeof n=="object"?n:{})))}),s&&!ZI(r)&&!r&&Uo(t,"tooltip",{title:i,items:[{channel:"y"}]}),e}function Yc(e){return Zu(tce)(e)}function nce(e){return Zu(Yc,Qu)(e)}var rce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ice=function(e){rce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="area",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nce},t}(Iu),qb=function(){return qb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qb.apply(this,arguments)};function kU(e){var t=function(n){var r=n.options;ji(r,"children.length")>1&&Uo(r,"children",[{type:"interval"}]);var i=r.scale,a=r.markBackground,s=r.data,l=r.children,p=r.yField,m=ji(i,"y.domain",[]);if(a&&m.length&&Ar(s)){var y="domainMax",b=s.map(function(E){var O;return qb(qb({originData:qb({},E)},r5(E,p)),(O={},O[y]=m[m.length-1],O))});l.unshift(qb({type:"interval",data:b,yField:y,tooltip:!1,style:{fill:"#eee"},label:!1},a))}return n};return Zu(t,Yc,Qu)(e)}var ace=function(){var e=function(t,n){return function(r){var i=t.fill,a=i===void 0?"#2888FF":i,s=t.stroke,l=t.fillOpacity,p=l===void 0?1:l,m=t.strokeOpacity,y=m===void 0?.2:m,b=t.pitch,E=b===void 0?8:b,O=r[0],P=r[1],I=r[2],N=r[3],z=(P[1]-O[1])/2,V=n.document,W=V.createElement("g",{}),K=V.createElement("polygon",{style:{points:[O,[O[0]-E,O[1]+z],[I[0]-E,O[1]+z],N],fill:a,fillOpacity:p,stroke:s,strokeOpacity:y,inset:30}}),J=V.createElement("polygon",{style:{points:[[O[0]-E,O[1]+z],P,I,[I[0]-E,O[1]+z]],fill:a,fillOpacity:p,stroke:s,strokeOpacity:y}}),oe=V.createElement("polygon",{style:{points:[O,[O[0]-E,O[1]+z],P,[O[0]+E,O[1]+z]],fill:a,fillOpacity:p-.2}});return W.appendChild(K),W.appendChild(J),W.appendChild(oe),W}};e2("shape.interval.bar25D",e)},oce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();ace();var sce=function(e){oce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Bar",n}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kU},t}(Iu),uce=function(){var e=function(t,n){return function(r){var i=t.fill,a=i===void 0?"#2888FF":i,s=t.stroke,l=t.fillOpacity,p=l===void 0?1:l,m=t.strokeOpacity,y=m===void 0?.2:m,b=t.pitch,E=b===void 0?8:b,O=r[1][0]-r[0][0],P=O/2+r[0][0],I=n.document,N=I.createElement("g",{}),z=I.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[P,r[1][1]+E],[P,r[3][1]+E],[r[3][0],r[3][1]]],fill:a,fillOpacity:p,stroke:s,strokeOpacity:y,inset:30}}),V=I.createElement("polygon",{style:{points:[[P,r[1][1]+E],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[P,r[2][1]+E]],fill:a,fillOpacity:p,stroke:s,strokeOpacity:y}}),W=I.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[P,r[1][1]-E],[r[1][0],r[1][1]],[P,r[1][1]+E]],fill:a,fillOpacity:p-.2}});return N.appendChild(V),N.appendChild(z),N.appendChild(W),N}};e2("shape.interval.column25D",e)},lce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();uce();var cce=function(e){lce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kU},t}(Iu);function fce(e){var t=function(r){var i=r.options,a=i.children,s=a===void 0?[]:a,l=i.legend;return l&&s.forEach(function(p){if(!ji(p,"colorField")){var m=ji(p,"yField");Uo(p,"colorField",function(){return m})}}),r},n=function(r){var i=r.options,a=i.annotations,s=a===void 0?[]:a,l=i.children,p=l===void 0?[]:l,m=i.scale,y=!1;return ji(m,"y.key")||p.forEach(function(b,E){if(!ji(b,"scale.y.key")){var O="child".concat(E,"Scale");Uo(b,"scale.y.key",O);var P=b.annotations,I=P===void 0?[]:P;I.length>0&&(Uo(b,"scale.y.independent",!1),I.forEach(function(N){Uo(N,"scale.y.key",O)})),!y&&s.length>0&&ji(b,"scale.y.independent")===void 0&&(y=!0,Uo(b,"scale.y.independent",!1),s.forEach(function(N){Uo(N,"scale.y.key",O)}))}}),r};return Zu(t,n,Yc,Qu)(e)}var hce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LU=function(e){hce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="DualAxes",n}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return fce},t}(Iu);function dce(e){var t=function(a){var s=a.options,l=s.xField,p=s.colorField;return p||Uo(s,"colorField",l),a},n=function(a){var s=a.options,l=s.compareField,p=s.transform,m=s.isTransposed,y=m===void 0?!0:m,b=s.coordinate;return p||(l?Uo(s,"transform",[]):Uo(s,"transform",[{type:"symmetryY"}])),!b&&y&&Uo(s,"coordinate",{transform:[{type:"transpose"}]}),a},r=function(a){var s=a.options,l=s.compareField,p=s.seriesField,m=s.data,y=s.children,b=s.yField,E=s.isTransposed,O=E===void 0?!0:E;if(l||p){var P=Object.values(bU(m,function(I){return I[l||p]}));y[0].data=P[0],y.push({type:"interval",data:P[1],yField:function(I){return-I[b]}}),delete s.compareField,delete s.data}return p&&(Uo(s,"type","spaceFlex"),Uo(s,"ratio",[1,1]),Uo(s,"direction",O?"row":"col"),delete s.seriesField),a},i=function(a){var s=a.options,l=s.tooltip,p=s.xField,m=s.yField;return l||Uo(s,"tooltip",{title:!1,items:[function(y){return{name:y[p],value:y[m]}}]}),a};return Zu(t,n,r,i,Yc,Qu)(e)}var pce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vce=function(e){pce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dce},t}(Iu);function mce(e){return Zu(Yc,Qu)(e)}var gce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yce=function(e){gce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="line",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mce},t}(Iu),wy=function(){return wy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wy.apply(this,arguments)};function _ce(e){var t=function(n){var r=n.options,i=r.angleField,a=r.data,s=r.label,l=r.tooltip,p=r.colorField;if(Ar(a)){var m=a.reduce(function(b,E){return b+E[i]},0);if(m===0){var y=a.map(function(b){var E;return wy(wy({},b),(E={},E[i]=1,E))});Uo(r,"data",y),s&&Uo(r,"label",wy(wy({},s),{formatter:function(){return 0}})),l!==!1&&Uo(r,"tooltip",wy(wy({},l),{items:[function(b){return{name:b[p],value:0}}]}))}}return n};return Zu(t,Qu)(e)}var bce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xce=function(e){bce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="pie",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return _ce},t}(Iu);function Ece(e){return Zu(Yc,Qu)(e)}var Sce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wce=function(e){Sce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="scatter",n}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ece},t}(Iu);function Tce(e){var t=function(n){return Uo(n,"options.coordinate",{type:ji(n,"options.coordinateType","polar")}),n};return Zu(t,Qu)(e)}var Ace=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cce=function(e){Ace(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radar",n}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Tce},t}(Iu);function Oce(e,t){var n=-1,r=Qo(e)?Array(e.length):[];return _U(e,function(i,a,s){r[++n]=t(i,a,s)}),r}var Mce=Oce;function Rce(e,t){var n=Ar(e)?ki:Mce;return n(e,KI(t,3))}var Kb=Rce,mg=function(){return mg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mg.apply(this,arguments)},Pce="__stock-range__",Ice="trend",kce="up",Lce="down";function Dce(e){var t=function(r){var i=r.options,a=i.data,s=i.yField;return r.options.data=Kb(a,function(l){var p=l&&mg({},l);if(Array.isArray(s)&&p){var m=s[0],y=s[1],b=s[2],E=s[3];p[Ice]=p[m]<=p[y]?kce:Lce,p[Pce]=[p[m],p[y],p[b],p[E]]}return p}),r},n=function(r){var i=r.options,a=i.xField,s=i.yField,l=i.fallingFill,p=i.risingFill,m=s[0],y=s[1],b=s[2],E=s[3];return r.options.children=Kb(r.options.children,function(O,P){var I=P===0;return mg(mg({},O),{tooltip:{title:function(N){return N[a]instanceof Date?N[a].toLocaleString():N[a]},items:[{field:b},{field:E},{field:m},{field:y}]},encode:mg(mg({},O.encode||{}),{y:I?[b,E]:[m,y],color:function(N){return Math.sign(N[y]-N[m])}}),style:mg(mg({},O.style||{}),{lineWidth:I?1:10})})}),delete i.yField,r.options.legend={color:!1},l&&Uo(r,"options.scale.color.range[0]",l),p&&Uo(r,"options.scale.color.range[2]",p),r};return Zu(t,n,Qu)(e)}var Nce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bce=["#26a69a","#999999","#ef5350"],Fce=function(e){Nce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="stock",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:Bce},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Dce},t}(Iu);function zce(e){return Zu(Yc,Qu)(e)}var Uce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jce=function(e){Uce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyLine",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],autoFit:!1,animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zce},t}(Iu);function Zce(e){return Zu(Yc,Qu)(e)}var Vce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hce=function(e){Vce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyArea",n}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],autoFit:!1,padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Zce},t}(Iu);function Wce(e){return Zu(Yc,Qu)(e)}var $ce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gce=function(e){$ce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyColumn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],autoFit:!1,padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Wce},t}(Iu),a5=function(){return a5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a5.apply(this,arguments)};function Xce(e){var t=function(n){var r=n.options,i=r.percent,a=r.color,s=a===void 0?[]:a;if(!i)return n;var l={scale:{color:{range:s.length?s:[]}},data:[1,i]};return Object.assign(r,a5({},l)),n};return Zu(t,Yc,Qu)(e)}var Yce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qce=function(e){Yce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyProgress",n}return t.getDefaultOptions=function(){return{type:"view",data:[],autoFit:!1,margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Xce},t}(Iu),o5=function(){return o5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},o5.apply(this,arguments)};function Kce(e){var t=function(r){var i=r.options,a=i.radius,s=a===void 0?.8:a;return Uo(r,"options.coordinate.innerRadius",s),r},n=function(r){var i=r.options,a=i.percent,s=i.color,l=s===void 0?[]:s;if(!a)return r;var p={scale:{color:{range:l.length?l:[]}},data:[1,a]};return Object.assign(i,o5({},p)),r};return Zu(t,n,Yc,Qu)(e)}var Qce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jce=function(e){Qce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyRing",n}return t.getDefaultOptions=function(){return{type:"view",data:[],autoFit:!1,margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Kce},t}(Iu);function efe(e){return Zu(Qu)(e)}var tfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nfe=function(e){tfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="rose",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return efe},t}(Iu),s5="__start__",Qb="__end__",u5="__waterfall_value__",l5=function(){return l5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},l5.apply(this,arguments)},rfe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};function ife(e){var t=function(r){var i=r.options,a=i.data,s=a===void 0?[]:a,l=i.yField;return s.length&&(s.reduce(function(p,m,y){var b;if(y===0||m.isTotal)m[s5]=0,m[Qb]=m[l],m[u5]=m[l];else{var E=(b=p[Qb])!==null&&b!==void 0?b:p[l];m[s5]=E,m[Qb]=E+m[l],m[u5]=p[Qb]}return m},[]),Object.assign(i,{yField:[s5,Qb]})),r},n=function(r){var i=r.options,a=i.data,s=a===void 0?[]:a,l=i.xField,p=i.children,m=i.linkStyle,y=rfe([],s,!0);return y.reduce(function(b,E,O){return O>0&&(E.x1=b[l],E.x2=E[l],E.y1=b[Qb]),E},[]),y.shift(),p.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:y,style:l5({stroke:"#697474"},m),label:!1,tooltip:!1}),r};return Zu(t,n,Yc,Qu)(e)}var afe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ofe=function(e){afe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="waterfall",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:u5,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ife},t}(Iu),sfe="[object Number]";function ufe(e){return typeof e=="number"||Wu(e)&&be(e)==sfe}var Jb=ufe,lfe=Object.prototype,cfe=lfe.hasOwnProperty,ffe=fU(function(e,t){if(Ka(t)||Qo(t)){qr(t,No(t),e);return}for(var n in t)cfe.call(t,n)&&Wr(e,n,t[n])}),DU=ffe,hfe=/\s/;function dfe(e){for(var t=e.length;t--&&hfe.test(e.charAt(t)););return t}var pfe=dfe,vfe=/^\s+/;function mfe(e){return e&&e.slice(0,pfe(e)+1).replace(vfe,"")}var gfe=mfe,NU=0/0,yfe=/^[-+]0x[0-9a-f]+$/i,_fe=/^0b[01]+$/i,bfe=/^0o[0-7]+$/i,xfe=parseInt;function Efe(e){if(typeof e=="number")return e;if(n0(e))return NU;if(Ee(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ee(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=gfe(e);var n=_fe.test(e);return n||bfe.test(e)?xfe(e.slice(2),n?2:8):yfe.test(e)?NU:+e}var BU=Efe,FU=1/0,Sfe=17976931348623157e292;function wfe(e){if(!e)return e===0?e:0;if(e=BU(e),e===FU||e===-FU){var t=e<0?-1:1;return t*Sfe}return e===e?e:0}var Tfe=wfe;function Afe(e){var t=Tfe(e),n=t%1;return t===t?n?t-n:t:0}var zU=Afe,Cfe=vt.isFinite,Ofe=Math.min;function Mfe(e){var t=Math[e];return function(n,r){if(n=BU(n),r=r==null?0:Ofe(zU(r),292),r&&Cfe(n)){var i=(Sr(n)+"e").split("e"),a=t(i[0]+"e"+(+i[1]+r));return i=(Sr(a)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var Rfe=Mfe,Pfe=Rfe("ceil"),Ife=Pfe,kfe=0/0;function Lfe(e){return typeof e=="number"?e:n0(e)?kfe:+e}var UU=Lfe;function Dfe(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=Ui(n),r=Ui(r)):(n=UU(n),r=UU(r)),i=e(n,r)}return i}}var Nfe=Dfe,Bfe=Nfe(function(e,t){return e/t},1),Ffe=Bfe;function zfe(e){var t=function(n){var r=n.options,i=r.data,a=r.binNumber,s=r.binWidth,l=r.children,p=r.channel,m=p===void 0?"count":p,y=ji(l,"[0].transform[0]",{});return Jb(s)?(DU(y,{thresholds:Ife(Ffe(i.length,s)),y:m}),n):(Jb(a)&&DU(y,{thresholds:a,y:m}),n)};return Zu(t,Yc,Qu)(e)}var Ufe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jfe=function(e){Ufe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Histogram",n}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zfe},t}(Iu);function Zfe(e){var t=function(r){var i=r.options,a=i.tooltip,s=i.colorField,l=i.sizeField;return a&&!a.field&&(a.field=s||l),r},n=function(r){var i=r.options,a=i.mark,s=i.children;return a&&(s[0].type=a),r};return Zu(t,n,Yc,Qu)(e)}var Vfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hfe=function(e){Vfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="heatmap",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Zfe},t}(Iu);function Wfe(e){var t=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return Zu(t,Yc,Qu)(e)}var $fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gfe=function(e){$fe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="box",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Wfe},t}(Iu);function Xfe(e){var t=function(n){var r=n.options,i=r.data,a=[{type:"custom",callback:function(l){return{links:l}}}];if(Ar(i))i.length>0?Uo(r,"data",{value:i,transform:a}):delete r.children;else if(ji(i,"type")==="fetch"&&ji(i,"value")){var s=ji(i,"transform");Ar(s)?Uo(i,"transform",s.concat(a)):Uo(i,"transform",a)}return n};return Zu(t,Yc,Qu)(e)}var Yfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qfe=function(e){Yfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="sankey",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Xfe},t}(Iu);function Kfe(e){var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],e}function Qfe(e){Kfe(e);var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),e}function Jfe(e){return e==null}var ehe=Jfe,the="[object String]";function nhe(e){return typeof e=="string"||!Ar(e)&&Wu(e)&&be(e)==the}var jU=nhe;function rhe(e,t){return ki(t,function(n){return e[n]})}var ihe=rhe;function ahe(e){return e==null?[]:ihe(e,No(e))}var ohe=ahe,she=Math.max;function uhe(e,t,n,r){e=Qo(e)?e:ohe(e),n=n&&!r?zU(n):0;var i=e.length;return n<0&&(n=she(i+n,0)),jU(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&gU(e,t,n)>-1}var lhe=uhe,P0=function(){return P0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P0.apply(this,arguments)},qA=["#f0efff","#5B8FF9","#3D76DD"];function c5(e,t,n,r){r===void 0&&(r=!0);var i=0,a=!1,s=Kb(e,function(l){var p,m,y=ji(l,[t]);if(ehe(y))return[];if(jU(y)){var b=Number(y);return isNaN(b)?[]:(p={},p[n]=l[n],p[t]=b,p)}return Ar(y)?(a=!0,i=Math.max(i,y.length),Kb(r?y.sort(function(E,O){return O-E}):y,function(E,O){var P;return P={},P[n]=l[n],P[t]=E,P.index=O,P})):(i=Math.max(1,i),m={},m[n]=l[n],m[t]=y,m)}).flat();return a?[s.map(function(l){return P0({index:0},l)}),i]:[s,i]}function f5(e,t){return new Array(e).fill("").map(function(n,r){return Ar(t)?t[r%t.length]:t})}function che(e){var t=function(i){var a=i.options,s=a.color,l=a.rangeField,p=l===void 0?"ranges":l,m=a.measureField,y=m===void 0?"measures":m,b=a.targetField,E=b===void 0?"targets":b,O=a.xField,P=O===void 0?"title":O,I=a.mapField,N=a.data,z=c5(N,p,P),V=z[0],W=z[1],K=c5(N,y,P,!1),J=K[0],oe=K[1],Te=c5(N,E,P,!1),Re=Te[0],We=Te[1],ut=ji(s,[p],qA[0]),ct=ji(s,[y],qA[1]),Ft=ji(s,[E],qA[2]),ft=[f5(W,ut),f5(oe,ct),f5(We,Ft)].flat();return i.options.children=Kb(i.options.children,function(St,Mt){var Nt=[V,J,Re][Mt],tn=[p,y,E][Mt];return P0(P0({},St),{data:Nt,encode:P0(P0({},St.encode||{}),{x:P,y:tn,color:function(Yt){var fn=Yt.index,Hn=Jb(fn)?"".concat(tn,"_").concat(fn):tn;return I?ji(I,[tn,fn],Hn):Hn}}),style:P0(P0({},St.style||{}),{zIndex:function(Yt){return-Yt[tn]}}),labels:Mt!==0?Kb(St.labels,function(Yt){return P0(P0({},Yt),{text:tn})}):void 0})}),i.options.scale.color.range=ft,i.options.legend.color.itemMarker=function(St){return I&&lhe(I==null?void 0:I[E],St)||(St==null?void 0:St.replace(/\_\d$/,""))===E?"line":"square"},i},n=function(i){var a=i.options.layout,s=a===void 0?"horizontal":a;return s!=="horizontal"&&Uo(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var a=i.options,s=a.range,l=s===void 0?{}:s,p=a.measure,m=p===void 0?{}:p,y=a.target,b=y===void 0?{}:y,E=a.children;return i.options.children=[l,m,b].map(function(O,P){return Sy(E[P],O)}),i};return Zu(t,n,r,Qfe,Qu)(e)}var fhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hhe=function(e){fhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="bullet",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:qA}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return che},t}(Iu);function dhe(e){var t=function(n){var r=n.options.data;return n.options.data={value:r},n};return Zu(t,Yc,Qu)(e)}var phe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vhe=function(e){phe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Gauge",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dhe},t}(Iu);function mhe(e){var t=function(n){var r=n.options.percent;return Jb(r)&&Uo(n,"options.data",r),n};return Zu(t,Yc,Qu)(e)}var ghe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yhe=function(e){ghe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Liquid",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mhe},t}(Iu);function _he(e){return Zu(Yc,Qu)(e)}var bhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xhe=function(e){bhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="WordCloud",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return _he},t}(Iu);function Ehe(e){var t=function(n){var r=n.options,i=r.data;return i&&Uo(r,"data",{value:i}),n};return Zu(t,Yc,Qu)(e)}var She=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),whe=function(e){She(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="treemap",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ehe},t}(Iu),n1=function(){return n1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},n1.apply(this,arguments)};function The(e){var t=function(i){var a=i.options,s=a.startAngle,l=a.maxAngle,p=a.coordinate,m=Jb(s)?s/(2*Math.PI)*360:-90,y=Jb(l)?(Number(l)+m)/180*Math.PI:Math.PI;return Uo(i,["options","coordinate"],n1(n1({},p),{endAngle:y,startAngle:s!=null?s:-Math.PI/2})),i},n=function(i){var a=i.options,s=a.tooltip,l=a.xField,p=a.yField;return s||Uo(a,"tooltip",{title:!1,items:[function(m){return{name:m[l],value:m[p]}}]}),i},r=function(i){var a=i.options,s=a.markBackground,l=a.children,p=a.scale,m=a.coordinate,y=a.xField,b=ji(p,"y.domain",[]);return s&&l.unshift(n1({type:"interval",xField:y,yField:b[b.length-1],colorField:s.color,scale:{color:{type:"identity"}},style:{fillOpacity:s.opacity,fill:s.color?void 0:"#e0e4ee"},coordinate:n1(n1({},m),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},s)),i};return Zu(t,n,r,Yc,Qu)(e)}var Ahe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Che=function(e){Ahe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radial",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return The},t}(Iu);function Ohe(e){return Zu(Qu)(e)}var Mhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rhe=function(e){Mhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="CirclePacking",n}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ohe},t}(Iu),KA=function(){return KA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},KA.apply(this,arguments)};function Phe(e){var t=function(n){var r=n.options,i=r.xField,a=r.yField,s=r.seriesField,l=r.children,p=l==null?void 0:l.map(function(m){return KA(KA({},m),{xField:i,yField:a,seriesField:s,colorField:s,data:m.type==="density"?{transform:[{type:"kde",field:a,groupBy:[i,s]}]}:m.data})}).filter(function(m){return r.violinType!=="density"||m.type==="density"});return Uo(r,"children",p),r.violinType==="polar"&&Uo(r,"coordinate",{type:"polar"}),Uo(r,"violinType",void 0),n};return Zu(t,Yc,Qu)(e)}var Ihe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),khe=function(e){Ihe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="violin",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Phe},t}(Iu),VE=function(){return VE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},VE.apply(this,arguments)},Lhe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};function Dhe(e){var t=function(a){var s=a.options,l=s.yField,p=s.children;return p.forEach(function(m,y){Uo(m,"yField",l[y])}),a},n=function(a){var s=a.options,l=s.yField,p=s.children,m=s.data;if(XI(m))return a;var y=Ar(ji(m,[0]))?m:[m,m];return p.forEach(function(b,E){Uo(b,"data",Lhe([],y[E].map(function(O){return VE({groupKey:l[E]},O)}),!0))}),a},r=function(a){var s=a.options,l=s.yField,p=l[0],m=l[1],y=s.tooltip;return y||Uo(s,"tooltip",{items:[{field:p,value:p},{field:m,value:m}]}),a},i=function(a){var s=a.options,l=s.children,p=s.layout,m=s.coordinate.transform,y=s.paddingBottom,b=y===void 0?EU:y,E=s.paddingLeft,O=E===void 0?EU:E,P=s.axis;Uo(s,"axisText",VE(VE({},(P==null?void 0:P.x)||{}),{layout:p}));var I=l[0],N=l[1];if(p==="vertical")Uo(s,"direction","col"),Uo(s,"paddingLeft",O),Uo(s,"coordinate.transform",m.filter(function(J){return J.type!=="transpose"})),Uo(I,"paddingBottom",xU),Uo(N,"paddingTop",xU),Uo(N,"axis",{x:{position:"top"}}),Uo(N,"scale",{y:{range:[0,1]}});else{Uo(s,"paddingBottom",b),Uo(I,"scale",{y:{range:[0,1]}});var z=I.paddingRight,V=z===void 0?JI:z,W=N.paddingLeft,K=W===void 0?JI:W;Uo(I,"paddingRight",V),Uo(I,"axis",{x:{position:"right"}}),Uo(N,"paddingLeft",K)}return a};return Zu(t,n,r,i,Yc,Qu)(e)}var Nhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bhe=function(e){Nhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Dhe},t}(Iu),r1;(function(e){e.color="key",e.d="path"})(r1||(r1={}));function Fhe(e){var t=function(n){var r=n.options,i=r.data,a=r.setsField,s=r.sizeField;return Ar(i)&&(Uo(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:a,size:s,as:[r1.color,r1.d]}]}),Uo(r,"colorField",a),Uo(r,["children","0","encode","d"],r1.d)),Uo(n,"options",r5(r,["sizeField","setsField"])),n};return Zu(t,Qu)(e)}var zhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uhe=function(e){zhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="venn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:r1.color,d:r1.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fhe},t}(Iu);function jhe(e){var t=function(n){return n};return Zu(t,Qu)(e)}var Zhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vhe=function(e){Zhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Sunburst",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jhe},t}(Iu),Hhe={Base:dle,Line:yce,Column:cce,Pie:xce,Area:ice,Bar:sce,DualAxes:LU,Funnel:vce,Scatter:wce,Radar:Cce,Rose:nfe,Stock:Fce,TinyLine:jce,TinyArea:Hce,TinyColumn:Gce,TinyProgress:qce,TinyRing:Jce,Waterfall:ofe,Histogram:jfe,Heatmap:Hfe,Box:Gfe,Sankey:qfe,Bullet:hhe,Gauge:vhe,Liquid:yhe,WordCloud:xhe,Treemap:whe,RadialBar:Che,CirclePacking:Rhe,Violin:khe,BidirectionalBar:Bhe,Venn:Uhe,Mix:LU,Sunburst:Vhe},h5=function(){return h5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},h5.apply(this,arguments)},ZU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Whe=(0,Q.forwardRef)(function(e,t){var n=e.chartType,r=n===void 0?"Base":n,i=ZU(e,["chartType"]),a=i.containerStyle,s=a===void 0?{height:"inherit"}:a,l=i.containerAttributes,p=l===void 0?{}:l,m=i.className,y=i.loading,b=i.loadingTemplate,E=i.errorTemplate,O=ZU(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),P=ma(Hhe[r],O),I=P.chart,N=P.container;return(0,Q.useImperativeHandle)(t,function(){return I.current}),Q.createElement(pt,{errorTemplate:E},y&&Q.createElement(Pt,{loadingTemplate:b}),Q.createElement("div",h5({className:m,style:s,ref:N},p)))})},78677:function(It,G,D){"use strict";var ee=D(67294),ae=D(31934),T=function(){return T=Object.assign||function(Q){for(var ge,pe=1,Ce=arguments.length;pe<Ce;pe++){ge=arguments[pe];for(var he in ge)Object.prototype.hasOwnProperty.call(ge,he)&&(Q[he]=ge[he])}return Q},T.apply(this,arguments)},ne=function(Q){return ee.createElement(ae.P,T({},Q,{chartType:"Column"}))};G.Z=ne},80652:function(It,G,D){"use strict";var ee=D(67294),ae=D(31934),T=function(){return T=Object.assign||function(Q){for(var ge,pe=1,Ce=arguments.length;pe<Ce;pe++){ge=arguments[pe];for(var he in ge)Object.prototype.hasOwnProperty.call(ge,he)&&(Q[he]=ge[he])}return Q},T.apply(this,arguments)},ne=function(Q){return ee.createElement(ae.P,T({},Q,{chartType:"Line"}))};G.Z=ne},63430:function(It,G,D){"use strict";var ee=D(67294),ae=D(31934),T=function(){return T=Object.assign||function(Q){for(var ge,pe=1,Ce=arguments.length;pe<Ce;pe++){ge=arguments[pe];for(var he in ge)Object.prototype.hasOwnProperty.call(ge,he)&&(Q[he]=ge[he])}return Q},T.apply(this,arguments)},ne=function(Q){return ee.createElement(ae.P,T({},Q,{chartType:"Pie"}))};G.Z=ne},6466:function(It,G,D){"use strict";D.d(G,{Z:function(){return Tt}});var ee=D(4942),ae=D(1413),T=D(45987),ne=D(28459),Q=D(93967),ge=D.n(Q),pe=D(67294),Ce=D(72120),he=D(44962),st=D(98082),re=function(Ie){return(0,ee.Z)({},Ie.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ie.marginLG,marginInline:0,color:Ie.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function Se(Ze){return(0,st.Xj)("ProCardOperation",function(Ie){var Qe=(0,ae.Z)((0,ae.Z)({},Ie),{},{componentCls:".".concat(Ze)});return[re(Qe)]})}var se=D(85893),de=function(Ie){var Qe=Ie.className,it=Ie.style,De=it===void 0?{}:it,cn=Ie.children,qe=(0,pe.useContext)(ne.ZP.ConfigContext),Pt=qe.getPrefixCls,Le=Pt("pro-card-operation"),pt=Se(Le),at=pt.wrapSSR,nt=pt.hashId,Ct=ge()(Le,Qe,nt);return at((0,se.jsx)("div",{className:Ct,style:De,children:cn}))},xe=de,le=D(96604),Ue=function(Ie){return(0,ee.Z)({},Ie.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,ee.Z)({flexDirection:"row"},"".concat(Ie.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ie.colorBorder)}})};function Et(Ze){return(0,st.Xj)("StatisticCard",function(Ie){var Qe=(0,ae.Z)((0,ae.Z)({},Ie),{},{componentCls:".".concat(Ze)});return[Ue(Qe)]})}var mt=["children","statistic","className","chart","chartPlacement","footer"],Wt=function(Ie){var Qe=Ie.children,it=Ie.statistic,De=Ie.className,cn=Ie.chart,qe=Ie.chartPlacement,Pt=Ie.footer,Le=(0,T.Z)(Ie,mt),pt=(0,pe.useContext)(ne.ZP.ConfigContext),at=pt.getPrefixCls,nt=at("pro-statistic-card"),Ct=Et(nt),rt=Ct.wrapSSR,vt=Ct.hashId,Ve=ge()(nt,De,vt),hn=it&&(0,se.jsx)(le.Z,(0,ae.Z)({layout:"vertical"},it)),yn=ge()("".concat(nt,"-chart"),vt,(0,ee.Z)((0,ee.Z)({},"".concat(nt,"-chart-left"),qe==="left"&&cn&&it),"".concat(nt,"-chart-right"),qe==="right"&&cn&&it)),ir=cn&&(0,se.jsx)("div",{className:yn,children:cn}),Qn=ge()("".concat(nt,"-content "),vt,(0,ee.Z)({},"".concat(nt,"-content-horizontal"),qe==="left"||qe==="right")),Ut=(ir||hn)&&(qe==="left"?(0,se.jsxs)("div",{className:Qn,children:[ir,hn]}):(0,se.jsxs)("div",{className:Qn,children:[hn,ir]})),En=Pt&&(0,se.jsx)("div",{className:"".concat(nt,"-footer ").concat(vt).trim(),children:Pt});return rt((0,se.jsxs)(Ce.Z,(0,ae.Z)((0,ae.Z)({className:Ve},Le),{},{children:[Ut,Qe,En]})))},Rt=function(Ie){return(0,se.jsx)(Wt,(0,ae.Z)({bodyStyle:{padding:0}},Ie))};Wt.Statistic=le.Z,Wt.Divider=he.Z,Wt.Operation=xe,Wt.isProCard=!0,Wt.Group=Rt;var Tt=Wt},96604:function(It,G,D){"use strict";D.d(G,{Z:function(){return lr}});var ee=D(1413),ae=D(4942),T=D(45987),ne=D(87462),Q=D(67294),ge=D(36688),pe=D(5627),Ce=function(Lt,bn){return Q.createElement(pe.Z,(0,ne.Z)({},Lt,{ref:bn,icon:ge.Z}))},he=Q.forwardRef(Ce),st=D(28459),re=D(83062),Se=D(40411),se=D(57838),de=D(96159),xe=D(93967),le=D.n(xe),Ue=D(64217),Et=D(53124),mt=D(87564),Rt=ln=>{const{value:Lt,formatter:bn,precision:Xe,decimalSeparator:Fe,groupSeparator:on="",prefixCls:B}=ln;let be;if(typeof bn=="function")be=bn(Lt);else{const yt=String(Lt),Ee=yt.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Ee||yt==="-")be=yt;else{const Zt=Ee[1];let _n=Ee[2]||"0",Sn=Ee[4]||"";_n=_n.replace(/\B(?=(\d{3})+(?!\d))/g,on),typeof Xe=="number"&&(Sn=Sn.padEnd(Xe,"0").slice(0,Xe>0?Xe:0)),Sn&&(Sn=`${Fe}${Sn}`),be=[Q.createElement("span",{key:"int",className:`${B}-content-value-int`},Zt,_n),Sn&&Q.createElement("span",{key:"decimal",className:`${B}-content-value-decimal`},Sn)]}}return Q.createElement("span",{className:`${B}-content-value`},be)},Tt=D(14747),Ze=D(91945),Ie=D(45503);const Qe=ln=>{const{componentCls:Lt,marginXXS:bn,padding:Xe,colorTextDescription:Fe,titleFontSize:on,colorTextHeading:B,contentFontSize:be,fontFamily:yt}=ln;return{[`${Lt}`]:Object.assign(Object.assign({},(0,Tt.Wf)(ln)),{[`${Lt}-title`]:{marginBottom:bn,color:Fe,fontSize:on},[`${Lt}-skeleton`]:{paddingTop:Xe},[`${Lt}-content`]:{color:B,fontSize:be,fontFamily:yt,[`${Lt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${Lt}-content-prefix, ${Lt}-content-suffix`]:{display:"inline-block"},[`${Lt}-content-prefix`]:{marginInlineEnd:bn},[`${Lt}-content-suffix`]:{marginInlineStart:bn}}})}},it=ln=>{const{fontSizeHeading3:Lt,fontSize:bn}=ln;return{titleFontSize:bn,contentFontSize:Lt}};var De=(0,Ze.I$)("Statistic",ln=>{const Lt=(0,Ie.TS)(ln,{});return[Qe(Lt)]},it),cn=function(ln,Lt){var bn={};for(var Xe in ln)Object.prototype.hasOwnProperty.call(ln,Xe)&&Lt.indexOf(Xe)<0&&(bn[Xe]=ln[Xe]);if(ln!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Fe=0,Xe=Object.getOwnPropertySymbols(ln);Fe<Xe.length;Fe++)Lt.indexOf(Xe[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ln,Xe[Fe])&&(bn[Xe[Fe]]=ln[Xe[Fe]]);return bn},Pt=ln=>{const{prefixCls:Lt,className:bn,rootClassName:Xe,style:Fe,valueStyle:on,value:B=0,title:be,valueRender:yt,prefix:Ee,suffix:Zt,loading:_n=!1,formatter:Sn,precision:Bn,decimalSeparator:or=".",groupSeparator:dr=",",onMouseEnter:gr,onMouseLeave:wr}=ln,Ar=cn(ln,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:Ir,direction:Nr,statistic:Yr}=Q.useContext(Et.E_),bt=Ir("statistic",Lt),[ve,ye,Ke]=De(bt),ht=Q.createElement(Rt,{decimalSeparator:or,groupSeparator:dr,prefixCls:bt,formatter:Sn,precision:Bn,value:B}),xt=le()(bt,{[`${bt}-rtl`]:Nr==="rtl"},Yr==null?void 0:Yr.className,bn,Xe,ye,Ke),Jt=(0,Ue.Z)(Ar,{aria:!0,data:!0});return ve(Q.createElement("div",Object.assign({},Jt,{className:xt,style:Object.assign(Object.assign({},Yr==null?void 0:Yr.style),Fe),onMouseEnter:gr,onMouseLeave:wr}),be&&Q.createElement("div",{className:`${bt}-title`},be),Q.createElement(mt.Z,{paragraph:!1,loading:_n,className:`${bt}-skeleton`},Q.createElement("div",{style:on,className:`${bt}-content`},Ee&&Q.createElement("span",{className:`${bt}-content-prefix`},Ee),yt?yt(ht):ht,Zt&&Q.createElement("span",{className:`${bt}-content-suffix`},Zt)))))};const Le=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function pt(ln,Lt){let bn=ln;const Xe=/\[[^\]]*]/g,Fe=(Lt.match(Xe)||[]).map(yt=>yt.slice(1,-1)),on=Lt.replace(Xe,"[]"),B=Le.reduce((yt,Ee)=>{let[Zt,_n]=Ee;if(yt.includes(Zt)){const Sn=Math.floor(bn/_n);return bn-=Sn*_n,yt.replace(new RegExp(`${Zt}+`,"g"),Bn=>{const or=Bn.length;return Sn.toString().padStart(or,"0")})}return yt},on);let be=0;return B.replace(Xe,()=>{const yt=Fe[be];return be+=1,yt})}function at(ln,Lt){const{format:bn=""}=Lt,Xe=new Date(ln).getTime(),Fe=Date.now(),on=Math.max(Xe-Fe,0);return pt(on,bn)}var nt=function(ln,Lt){var bn={};for(var Xe in ln)Object.prototype.hasOwnProperty.call(ln,Xe)&&Lt.indexOf(Xe)<0&&(bn[Xe]=ln[Xe]);if(ln!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Fe=0,Xe=Object.getOwnPropertySymbols(ln);Fe<Xe.length;Fe++)Lt.indexOf(Xe[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ln,Xe[Fe])&&(bn[Xe[Fe]]=ln[Xe[Fe]]);return bn};const Ct=1e3/30;function rt(ln){return new Date(ln).getTime()}const vt=ln=>{const{value:Lt,format:bn="HH:mm:ss",onChange:Xe,onFinish:Fe}=ln,on=nt(ln,["value","format","onChange","onFinish"]),B=(0,se.Z)(),be=Q.useRef(null),yt=()=>{Fe==null||Fe(),be.current&&(clearInterval(be.current),be.current=null)},Ee=()=>{const Sn=rt(Lt);Sn>=Date.now()&&(be.current=setInterval(()=>{B(),Xe==null||Xe(Sn-Date.now()),Sn<Date.now()&&yt()},Ct))};Q.useEffect(()=>(Ee(),()=>{be.current&&(clearInterval(be.current),be.current=null)}),[Lt]);const Zt=(Sn,Bn)=>at(Sn,Object.assign(Object.assign({},Bn),{format:bn})),_n=Sn=>(0,de.Tm)(Sn,{title:void 0});return Q.createElement(Pt,Object.assign({},on,{value:Lt,valueRender:_n,formatter:Zt}))};var Ve=Q.memo(vt);Pt.Countdown=Ve;var hn=Pt,yn=D(98082),ir=function(Lt){return(0,ae.Z)({},Lt.componentCls,(0,ae.Z)((0,ae.Z)((0,ae.Z)((0,ae.Z)((0,ae.Z)({display:"flex",fontSize:Lt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,ae.Z)({display:"flex",width:"100%"},"".concat(Lt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,ae.Z)({width:"100%"},"".concat(Lt.antCls,"-statistic-content"),{"&-value-int":{fontSize:Lt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(Lt.antCls,"-statistic-title"),{color:Lt.colorText}),"&-trend-up",(0,ae.Z)({},"".concat(Lt.antCls,"-statistic-content"),(0,ae.Z)({color:"#f5222d"},"".concat(Lt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,ae.Z)({},"".concat(Lt.antCls,"-statistic-content"),(0,ae.Z)({color:"#389e0d"},"".concat(Lt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,ae.Z)((0,ae.Z)((0,ae.Z)({display:"flex",justifyContent:"space-between"},"".concat(Lt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(Lt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(Lt.antCls,"-statistic-title,").concat(Lt.antCls,"-statistic-content,").concat(Lt.antCls,"-statistic-content-suffix,").concat(Lt.antCls,"-statistic-content-prefix,").concat(Lt.antCls,"-statistic-content-value-decimal"),{fontSize:Lt.fontSize})),"& &-layout-inline",(0,ae.Z)((0,ae.Z)((0,ae.Z)({display:"inline-flex",color:Lt.colorTextSecondary},"".concat(Lt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(Lt.antCls,"-statistic-content"),{color:Lt.colorTextSecondary}),"".concat(Lt.antCls,"-statistic-title,").concat(Lt.antCls,"-statistic-content,").concat(Lt.antCls,"-statistic-content-suffix,").concat(Lt.antCls,"-statistic-content-prefix,").concat(Lt.antCls,"-statistic-content-value-decimal"),{fontSize:Lt.fontSizeSM})))};function Qn(ln){return(0,yn.Xj)("Statistic",function(Lt){var bn=(0,ee.Z)((0,ee.Z)({},Lt),{},{componentCls:".".concat(ln)});return[ir(bn)]})}var Ut=D(85893),En=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Tn=function(Lt){var bn=Lt.className,Xe=Lt.layout,Fe=Xe===void 0?"inline":Xe,on=Lt.style,B=Lt.description,be=Lt.children,yt=Lt.title,Ee=Lt.tip,Zt=Lt.status,_n=Lt.trend,Sn=Lt.prefix,Bn=Lt.icon,or=(0,T.Z)(Lt,En),dr=(0,Q.useContext)(st.ZP.ConfigContext),gr=dr.getPrefixCls,wr=gr("pro-card-statistic"),Ar=Qn(wr),Ir=Ar.wrapSSR,Nr=Ar.hashId,Yr=le()(wr,bn,Nr),bt=le()("".concat(wr,"-status"),Nr),ve=le()("".concat(wr,"-icon"),Nr),ye=le()("".concat(wr,"-wrapper"),Nr),Ke=le()("".concat(wr,"-content"),Nr),ht=le()(Nr,(0,ae.Z)((0,ae.Z)({},"".concat(wr,"-layout-").concat(Fe),Fe),"".concat(wr,"-trend-").concat(_n),_n)),xt=Ee&&(0,Ut.jsx)(re.Z,{title:Ee,children:(0,Ut.jsx)(he,{className:"".concat(wr,"-tip ").concat(Nr).trim()})}),Jt=le()("".concat(wr,"-trend-icon"),Nr,(0,ae.Z)({},"".concat(wr,"-trend-icon-").concat(_n),_n)),Dn=_n&&(0,Ut.jsx)("div",{className:Jt}),fr=Zt&&(0,Ut.jsx)("div",{className:bt,children:(0,Ut.jsx)(Se.Z,{status:Zt,text:null})}),In=Bn&&(0,Ut.jsx)("div",{className:ve,children:Bn});return Ir((0,Ut.jsxs)("div",{className:Yr,style:on,children:[In,(0,Ut.jsxs)("div",{className:ye,children:[fr,(0,Ut.jsxs)("div",{className:Ke,children:[(0,Ut.jsx)(hn,(0,ee.Z)({title:(yt||xt)&&(0,Ut.jsxs)(Ut.Fragment,{children:[yt,xt]}),prefix:(Dn||Sn)&&(0,Ut.jsxs)(Ut.Fragment,{children:[Dn,Sn]}),className:ht},or)),B&&(0,Ut.jsx)("div",{className:"".concat(wr,"-description ").concat(Nr).trim(),children:B})]})]})]}))},lr=Tn},46343:function(It,G,D){"use strict";D.d(G,{S$:function(){return Lt},bf:function(){return bn},ni:function(){return Ve},oI:function(){return lr},sX:function(){return ln}});var ee=D(34155);function ae(Xe,Fe,on,B){function be(yt){return yt instanceof on?yt:new on(function(Ee){Ee(yt)})}return new(on||(on=Promise))(function(yt,Ee){function Zt(Bn){try{Sn(B.next(Bn))}catch(or){Ee(or)}}function _n(Bn){try{Sn(B.throw(Bn))}catch(or){Ee(or)}}function Sn(Bn){Bn.done?yt(Bn.value):be(Bn.value).then(Zt,_n)}Sn((B=B.apply(Xe,Fe||[])).next())})}function T(Xe,Fe){var on={label:0,sent:function(){if(yt[0]&1)throw yt[1];return yt[1]},trys:[],ops:[]},B,be,yt,Ee;return Ee={next:Zt(0),throw:Zt(1),return:Zt(2)},typeof Symbol=="function"&&(Ee[Symbol.iterator]=function(){return this}),Ee;function Zt(Sn){return function(Bn){return _n([Sn,Bn])}}function _n(Sn){if(B)throw new TypeError("Generator is already executing.");for(;on;)try{if(B=1,be&&(yt=Sn[0]&2?be.return:Sn[0]?be.throw||((yt=be.return)&&yt.call(be),0):be.next)&&!(yt=yt.call(be,Sn[1])).done)return yt;switch(be=0,yt&&(Sn=[Sn[0]&2,yt.value]),Sn[0]){case 0:case 1:yt=Sn;break;case 4:return on.label++,{value:Sn[1],done:!1};case 5:on.label++,be=Sn[1],Sn=[0];continue;case 7:Sn=on.ops.pop(),on.trys.pop();continue;default:if(yt=on.trys,!(yt=yt.length>0&&yt[yt.length-1])&&(Sn[0]===6||Sn[0]===2)){on=0;continue}if(Sn[0]===3&&(!yt||Sn[1]>yt[0]&&Sn[1]<yt[3])){on.label=Sn[1];break}if(Sn[0]===6&&on.label<yt[1]){on.label=yt[1],yt=Sn;break}if(yt&&on.label<yt[2]){on.label=yt[2],on.ops.push(Sn);break}yt[2]&&on.ops.pop(),on.trys.pop();continue}Sn=Fe.call(Xe,on)}catch(Bn){Sn=[6,Bn],be=0}finally{B=yt=0}if(Sn[0]&5)throw Sn[1];return{value:Sn[0]?Sn[1]:void 0,done:!0}}}function ne(Xe,Fe){var on=typeof Symbol=="function"&&Xe[Symbol.iterator];if(!on)return Xe;var B=on.call(Xe),be,yt=[],Ee;try{for(;(Fe===void 0||Fe-- >0)&&!(be=B.next()).done;)yt.push(be.value)}catch(Zt){Ee={error:Zt}}finally{try{be&&!be.done&&(on=B.return)&&on.call(B)}finally{if(Ee)throw Ee.error}}return yt}function Q(Xe,Fe,on){if(on||arguments.length===2)for(var B=0,be=Fe.length,yt;B<be;B++)(yt||!(B in Fe))&&(yt||(yt=Array.prototype.slice.call(Fe,0,B)),yt[B]=Fe[B]);return Xe.concat(yt||Array.prototype.slice.call(Fe))}function ge(Xe){return Xe&&Xe.__esModule&&Object.prototype.hasOwnProperty.call(Xe,"default")?Xe.default:Xe}var pe={exports:{}},Ce={exports:{}},he={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=on;function on(B){return B&&typeof B.length=="number"&&B.length>=0&&B.length%1===0}Xe.exports=Fe.default})(he,he.exports);var st={},re={exports:{}},Se={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=function(on){return function(){for(var B=[],be=arguments.length;be--;)B[be]=arguments[be];var yt=B.pop();return on.call(this,B,yt)}},Xe.exports=Fe.default})(Se,Se.exports);var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.fallback=Ue,se.wrap=Et;var de=se.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,xe=se.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,le=se.hasNextTick=typeof ee=="object"&&typeof ee.nextTick=="function";function Ue(Xe){setTimeout(Xe,0)}function Et(Xe){return function(Fe){for(var on=[],B=arguments.length-1;B-- >0;)on[B]=arguments[B+1];return Xe(function(){return Fe.apply(void 0,on)})}}var mt;de?mt=queueMicrotask:xe?mt=setImmediate:le?mt=ee.nextTick:mt=Ue,se.default=Et(mt),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=_n;var on=Se.exports,B=Zt(on),be=se,yt=Zt(be),Ee=st;function Zt(or){return or&&or.__esModule?or:{default:or}}function _n(or){return(0,Ee.isAsync)(or)?function(){for(var dr=[],gr=arguments.length;gr--;)dr[gr]=arguments[gr];var wr=dr.pop(),Ar=or.apply(this,dr);return Sn(Ar,wr)}:(0,B.default)(function(dr,gr){var wr;try{wr=or.apply(this,dr)}catch(Ar){return gr(Ar)}if(wr&&typeof wr.then=="function")return Sn(wr,gr);gr(null,wr)})}function Sn(or,dr){return or.then(function(gr){Bn(dr,null,gr)},function(gr){Bn(dr,gr&&gr.message?gr:new Error(gr))})}function Bn(or,dr,gr){try{or(dr,gr)}catch(wr){(0,yt.default)(function(Ar){throw Ar},wr)}}Xe.exports=Fe.default}(re,re.exports),Object.defineProperty(st,"__esModule",{value:!0}),st.isAsyncIterable=st.isAsyncGenerator=st.isAsync=void 0;var Wt=re.exports,Rt=Tt(Wt);function Tt(Xe){return Xe&&Xe.__esModule?Xe:{default:Xe}}function Ze(Xe){return Xe[Symbol.toStringTag]==="AsyncFunction"}function Ie(Xe){return Xe[Symbol.toStringTag]==="AsyncGenerator"}function Qe(Xe){return typeof Xe[Symbol.asyncIterator]=="function"}function it(Xe){if(typeof Xe!="function")throw new Error("expected a function");return Ze(Xe)?(0,Rt.default)(Xe):Xe}st.default=it,st.isAsync=Ze,st.isAsyncGenerator=Ie,st.isAsyncIterable=Qe;var De={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=on;function on(B,be){if(be===void 0&&(be=B.length),!be)throw new Error("arity is undefined");function yt(){for(var Ee=this,Zt=[],_n=arguments.length;_n--;)Zt[_n]=arguments[_n];return typeof Zt[be-1]=="function"?B.apply(this,Zt):new Promise(function(Sn,Bn){Zt[be-1]=function(or){for(var dr=[],gr=arguments.length-1;gr-- >0;)dr[gr]=arguments[gr+1];if(or)return Bn(or);Sn(dr.length>1?dr:dr[0])},B.apply(Ee,Zt)})}return yt}Xe.exports=Fe.default})(De,De.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on=he.exports,B=_n(on),be=st,yt=_n(be),Ee=De.exports,Zt=_n(Ee);function _n(Sn){return Sn&&Sn.__esModule?Sn:{default:Sn}}Fe.default=(0,Zt.default)(function(Sn,Bn,or){var dr=(0,B.default)(Bn)?[]:{};Sn(Bn,function(gr,wr,Ar){(0,yt.default)(gr)(function(Ir){for(var Nr,Yr=[],bt=arguments.length-1;bt-- >0;)Yr[bt]=arguments[bt+1];Yr.length<2&&(Nr=Yr,Yr=Nr[0]),dr[wr]=Yr,Ar(Ir)})},function(gr){return or(gr,dr)})},3),Xe.exports=Fe.default}(Ce,Ce.exports);var cn={exports:{}},qe={exports:{}},Pt={exports:{}},Le={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=on;function on(B){function be(){for(var yt=[],Ee=arguments.length;Ee--;)yt[Ee]=arguments[Ee];if(B!==null){var Zt=B;B=null,Zt.apply(this,yt)}}return Object.assign(be,B),be}Xe.exports=Fe.default})(Le,Le.exports);var pt={exports:{}},at={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=function(on){return on[Symbol.iterator]&&on[Symbol.iterator]()},Xe.exports=Fe.default})(at,at.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=Bn;var on=he.exports,B=Ee(on),be=at.exports,yt=Ee(be);function Ee(or){return or&&or.__esModule?or:{default:or}}function Zt(or){var dr=-1,gr=or.length;return function(){return++dr<gr?{value:or[dr],key:dr}:null}}function _n(or){var dr=-1;return function(){var wr=or.next();return wr.done?null:(dr++,{value:wr.value,key:dr})}}function Sn(or){var dr=or?Object.keys(or):[],gr=-1,wr=dr.length;return function Ar(){var Ir=dr[++gr];return Ir==="__proto__"?Ar():gr<wr?{value:or[Ir],key:Ir}:null}}function Bn(or){if((0,B.default)(or))return Zt(or);var dr=(0,yt.default)(or);return dr?_n(dr):Sn(or)}Xe.exports=Fe.default}(pt,pt.exports);var nt={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=on;function on(B){return function(){for(var be=[],yt=arguments.length;yt--;)be[yt]=arguments[yt];if(B===null)throw new Error("Callback was already called.");var Ee=B;B=null,Ee.apply(this,be)}}Xe.exports=Fe.default})(nt,nt.exports);var Ct={exports:{}},rt={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on={};Fe.default=on,Xe.exports=Fe.default})(rt,rt.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=yt;var on=rt.exports,B=be(on);function be(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function yt(Ee,Zt,_n,Sn){var Bn=!1,or=!1,dr=!1,gr=0,wr=0;function Ar(){gr>=Zt||dr||Bn||(dr=!0,Ee.next().then(function(Yr){var bt=Yr.value,ve=Yr.done;if(!(or||Bn)){if(dr=!1,ve){Bn=!0,gr<=0&&Sn(null);return}gr++,_n(bt,wr,Ir),wr++,Ar()}}).catch(Nr))}function Ir(Yr,bt){if(gr-=1,!or){if(Yr)return Nr(Yr);if(Yr===!1){Bn=!0,or=!0;return}if(bt===B.default||Bn&&gr<=0)return Bn=!0,Sn(null);Ar()}}function Nr(Yr){or||(dr=!1,Bn=!0,Sn(Yr))}Ar()}Xe.exports=Fe.default}(Ct,Ct.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on=Le.exports,B=gr(on),be=pt.exports,yt=gr(be),Ee=nt.exports,Zt=gr(Ee),_n=st,Sn=Ct.exports,Bn=gr(Sn),or=rt.exports,dr=gr(or);function gr(wr){return wr&&wr.__esModule?wr:{default:wr}}Fe.default=function(wr){return function(Ar,Ir,Nr){if(Nr=(0,B.default)(Nr),wr<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Ar)return Nr(null);if((0,_n.isAsyncGenerator)(Ar))return(0,Bn.default)(Ar,wr,Ir,Nr);if((0,_n.isAsyncIterable)(Ar))return(0,Bn.default)(Ar[Symbol.asyncIterator](),wr,Ir,Nr);var Yr=(0,yt.default)(Ar),bt=!1,ve=!1,ye=0,Ke=!1;function ht(Jt,Dn){if(!ve)if(ye-=1,Jt)bt=!0,Nr(Jt);else if(Jt===!1)bt=!0,ve=!0;else{if(Dn===dr.default||bt&&ye<=0)return bt=!0,Nr(null);Ke||xt()}}function xt(){for(Ke=!0;ye<wr&&!bt;){var Jt=Yr();if(Jt===null){bt=!0,ye<=0&&Nr(null);return}ye+=1,Ir(Jt.value,Jt.key,(0,Zt.default)(ht))}Ke=!1}xt()}},Xe.exports=Fe.default}(Pt,Pt.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on=Pt.exports,B=_n(on),be=st,yt=_n(be),Ee=De.exports,Zt=_n(Ee);function _n(Bn){return Bn&&Bn.__esModule?Bn:{default:Bn}}function Sn(Bn,or,dr,gr){return(0,B.default)(or)(Bn,(0,yt.default)(dr),gr)}Fe.default=(0,Zt.default)(Sn,4),Xe.exports=Fe.default}(qe,qe.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on=qe.exports,B=Ee(on),be=De.exports,yt=Ee(be);function Ee(_n){return _n&&_n.__esModule?_n:{default:_n}}function Zt(_n,Sn,Bn){return(0,B.default)(_n,1,Sn,Bn)}Fe.default=(0,yt.default)(Zt,3),Xe.exports=Fe.default}(cn,cn.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=Zt;var on=Ce.exports,B=Ee(on),be=cn.exports,yt=Ee(be);function Ee(_n){return _n&&_n.__esModule?_n:{default:_n}}function Zt(_n,Sn){return(0,B.default)(yt.default,_n,Sn)}Xe.exports=Fe.default}(pe,pe.exports);var vt=ge(pe.exports),Ve=function(){function Xe(){this.args=[],this.tasks=[]}return Xe.prototype.call=function(){for(var Fe=arguments,on=[],B=0;B<arguments.length;B++)on[B]=Fe[B];return this.args=on,vt(this.tasks)},Xe.prototype.tap=function(Fe,on){var B=this;this.tasks.push(function(be){on.apply(void 0,Q([],ne(B.args),!1)),be(null,Fe)})},Xe}(),hn={exports:{}},yn={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on=he.exports,B=Ir(on),be=rt.exports,yt=Ir(be),Ee=qe.exports,Zt=Ir(Ee),_n=Le.exports,Sn=Ir(_n),Bn=nt.exports,or=Ir(Bn),dr=st,gr=Ir(dr),wr=De.exports,Ar=Ir(wr);function Ir(ve){return ve&&ve.__esModule?ve:{default:ve}}function Nr(ve,ye,Ke){Ke=(0,Sn.default)(Ke);var ht=0,xt=0,Jt=ve.length,Dn=!1;Jt===0&&Ke(null);function fr(In,ke){In===!1&&(Dn=!0),Dn!==!0&&(In?Ke(In):(++xt===Jt||ke===yt.default)&&Ke(null))}for(;ht<Jt;ht++)ye(ve[ht],ht,(0,or.default)(fr))}function Yr(ve,ye,Ke){return(0,Zt.default)(ve,1/0,ye,Ke)}function bt(ve,ye,Ke){var ht=(0,B.default)(ve)?Nr:Yr;return ht(ve,(0,gr.default)(ye),Ke)}Fe.default=(0,Ar.default)(bt,3),Xe.exports=Fe.default})(yn,yn.exports),function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.default=Zt;var on=yn.exports,B=Ee(on),be=Ce.exports,yt=Ee(be);function Ee(_n){return _n&&_n.__esModule?_n:{default:_n}}function Zt(_n,Sn){return(0,yt.default)(B.default,_n,Sn)}Xe.exports=Fe.default}(hn,hn.exports);var ir=ge(hn.exports),Qn=function(){function Xe(){this.tasks=[]}return Xe.prototype.promise=function(){return ir(this.tasks)},Xe.prototype.tapPromise=function(Fe,on){var B=this;this.tasks.push(function(be){return ae(B,void 0,void 0,function(){return T(this,function(yt){switch(yt.label){case 0:return[4,on()];case 1:return yt.sent(),be(null,Fe),[2]}})})})},Xe}(),Ut={exports:{}};(function(Xe,Fe){Object.defineProperty(Fe,"__esModule",{value:!0});var on=Le.exports,B=Bn(on),be=nt.exports,yt=Bn(be),Ee=st,Zt=Bn(Ee),_n=De.exports,Sn=Bn(_n);function Bn(dr){return dr&&dr.__esModule?dr:{default:dr}}function or(dr,gr){if(gr=(0,B.default)(gr),!Array.isArray(dr))return gr(new Error("First argument to waterfall must be an array of functions"));if(!dr.length)return gr();var wr=0;function Ar(Nr){var Yr=(0,Zt.default)(dr[wr++]);Yr.apply(void 0,Nr.concat([(0,yt.default)(Ir)]))}function Ir(Nr){for(var Yr=[],bt=arguments.length-1;bt-- >0;)Yr[bt]=arguments[bt+1];if(Nr!==!1){if(Nr||wr===dr.length)return gr.apply(void 0,[Nr].concat(Yr));Ar(Yr)}}Ar([])}Fe.default=(0,Sn.default)(or),Xe.exports=Fe.default})(Ut,Ut.exports);var En=ge(Ut.exports),Tn=function(){function Xe(){this.tasks=[]}return Xe.prototype.call=function(){return En(this.tasks)},Xe.prototype.tap=function(Fe,on){this.tasks.length===0?this.tasks.push(function(B){var be=on();B(be?null:!1,be)}):this.tasks.push(function(B,be){var yt=on.apply(void 0,Q([],ne(B),!1));be(yt?null:!1,Fe)})},Xe}(),lr=function(){function Xe(){this.tasks=[]}return Xe.prototype.call=function(){return vt(this.tasks)},Xe.prototype.tap=function(Fe,on){this.tasks.push(function(B){var be=on();B(be,Fe)})},Xe}(),ln=function(){function Xe(){this.args=[],this.tasks=[]}return Xe.prototype.promise=function(){for(var Fe=arguments,on=[],B=0;B<arguments.length;B++)on[B]=Fe[B];return this.args=on,vt(this.tasks)},Xe.prototype.tapPromise=function(Fe,on){var B=this;this.tasks.push(function(be){return ae(B,void 0,void 0,function(){return T(this,function(yt){switch(yt.label){case 0:return[4,on.apply(void 0,Q([],ne(this.args),!1))];case 1:return yt.sent(),be(null,Fe),[2]}})})})},Xe}(),Lt=function(){function Xe(){this.args=[],this.tasks=[]}return Xe.prototype.promise=function(){for(var Fe=arguments,on=[],B=0;B<arguments.length;B++)on[B]=Fe[B];return this.args=on,vt(this.tasks)},Xe.prototype.tapPromise=function(Fe,on){var B=this;this.tasks.push(function(be){return ae(B,void 0,void 0,function(){var yt;return T(this,function(Ee){switch(Ee.label){case 0:return[4,on.apply(void 0,Q([],ne(this.args),!1))];case 1:return yt=Ee.sent(),be(yt,Fe),[2]}})})})},Xe}(),bn=function(){function Xe(){this.tasks=[]}return Xe.prototype.promise=function(){return En(this.tasks)},Xe.prototype.tapPromise=function(Fe,on){this.tasks.length===0?this.tasks.push(function(B){on().then(function(be){B(null,be)})}):this.tasks.push(function(B,be){on(B).then(function(yt){be(null,yt)})})},Xe}()},17816:function(It,G){(function(D,ee){ee(G)})(this,function(D){"use strict";function ee(Je){var wt=typeof Symbol=="function"&&Symbol.iterator,Kt=wt&&Je[wt],Mn=0;if(Kt)return Kt.call(Je);if(Je&&typeof Je.length=="number")return{next:function(){return{value:(Je=Je&&Mn>=Je.length?void 0:Je)&&Je[Mn++],done:!Je}}};throw new TypeError(wt?"Object is not iterable.":"Symbol.iterator is not defined.")}function ae(Je,wt){var Kt=typeof Symbol=="function"&&Je[Symbol.iterator];if(!Kt)return Je;var Mn,Yn,Gn=Kt.call(Je),Ht=[];try{for(;(wt===void 0||0<wt--)&&!(Mn=Gn.next()).done;)Ht.push(Mn.value)}catch(On){Yn={error:On}}finally{try{Mn&&!Mn.done&&(Kt=Gn.return)&&Kt.call(Gn)}finally{if(Yn)throw Yn.error}}return Ht}function T(Je,wt,Kt){if(Kt||arguments.length===2)for(var Mn,Yn=0,Gn=wt.length;Yn<Gn;Yn++)!Mn&&Yn in wt||((Mn=Mn||Array.prototype.slice.call(wt,0,Yn))[Yn]=wt[Yn]);return Je.concat(Mn||Array.prototype.slice.call(wt))}function ne(Je){return ge(Je,"Function")}var Q={}.toString,ge=function(Je,wt){return Q.call(Je)==="[object "+wt+"]"},pe=function(Je){return Array.isArray?Array.isArray(Je):ge(Je,"Array")},Ce=function(Je){if(typeof(wt=Je)!="object"||wt===null||!ge(Je,"Object"))return!1;var wt;if(Object.getPrototypeOf(Je)===null)return!0;for(var Kt=Je;Object.getPrototypeOf(Kt)!==null;)Kt=Object.getPrototypeOf(Kt);return Object.getPrototypeOf(Je)===Kt},he=function(Je){return ge(Je,"Number")},st=Object.values?function(Je){return Object.values(Je)}:function(Je){var wt,Kt=[],Mn=Je,Yn=function(Cr,Er){ne(Je)&&Er==="prototype"||Kt.push(Cr)};if(Mn){if(pe(Mn))for(var Gn=0,Ht=Mn.length;Gn<Ht&&Yn(Mn[Gn],Gn)!==!1;Gn++);else if(wt=typeof Mn,Mn!==null&&wt=="object"||wt=="function"){for(var On in Mn)if(Mn.hasOwnProperty(On)&&Yn(Mn[On],On)===!1)break}}return Kt},re=5;function Se(Je){for(var wt=[],Kt=1;Kt<arguments.length;Kt++)wt[Kt-1]=arguments[Kt];for(var Mn=0;Mn<wt.length;Mn+=1)(function Yn(Gn,Ht,On,Cr){for(var Er in On=On||0,Cr=Cr||re,Ht){var gi;Ht.hasOwnProperty(Er)&&((gi=Ht[Er])!==null&&Ce(gi)?(Ce(Gn[Er])||(Gn[Er]={}),On<Cr?Yn(Gn[Er],gi,On+1,Cr):Gn[Er]=Ht[Er]):pe(gi)?(Gn[Er]=[],Gn[Er]=Gn[Er].concat(gi)):gi!==void 0&&(Gn[Er]=gi))}})(Je,wt[Mn]);return Je}function se(Je){return Je}(function(Je,wt){var Kt;if(ne(Je))return(Kt=function(){for(var Mn=[],Yn=0;Yn<arguments.length;Yn++)Mn[Yn]=arguments[Yn];var Gn,Ht=wt?wt.apply(this,Mn):Mn[0],On=Kt.cache;return On.has(Ht)?On.get(Ht):(Gn=Je.apply(this,Mn),On.set(Ht,Gn),Gn)}).cache=new Map;throw new TypeError("Expected a function")})(function(Je,Ht){var Kt=(Ht=Ht===void 0?{}:Ht).fontSize,Mn=Ht.fontFamily,Yn=Ht.fontWeight,Gn=Ht.fontStyle,Ht=Ht.fontVariant;return(de=de||document.createElement("canvas").getContext("2d")).font=[Gn,Ht,Yn,Kt+"px",Mn].join(" "),de.measureText(ge(Je,"String")?Je:"").width},function(Je,wt){return function(){for(var Kt=0,Mn=0,Yn=arguments.length;Mn<Yn;Mn++)Kt+=arguments[Mn].length;for(var Gn=Array(Kt),Ht=0,Mn=0;Mn<Yn;Mn++)for(var On=arguments[Mn],Cr=0,Er=On.length;Cr<Er;Cr++,Ht++)Gn[Ht]=On[Cr];return Gn}([Je],st(wt=wt===void 0?{}:wt)).join("")});var de,xe=typeof Float32Array!="undefined"?Float32Array:Array;function le(){var Je=new xe(9);return xe!=Float32Array&&(Je[1]=0,Je[2]=0,Je[3]=0,Je[5]=0,Je[6]=0,Je[7]=0),Je[0]=1,Je[4]=1,Je[8]=1,Je}Math.hypot||(Math.hypot=function(){for(var Je=0,wt=arguments.length;wt--;)Je+=arguments[wt]*arguments[wt];return Math.sqrt(Je)});var Ue=function(Je,aa,Bi){var Mn=aa[0],Yn=aa[1],Gn=aa[2],Ht=aa[3],On=aa[4],Cr=aa[5],Er=aa[6],gi=aa[7],aa=aa[8],ya=Bi[0],wi=Bi[1],sa=Bi[2],$i=Bi[3],hi=Bi[4],fa=Bi[5],ea=Bi[6],ka=Bi[7],Bi=Bi[8];return Je[0]=ya*Mn+wi*Ht+sa*Er,Je[1]=ya*Yn+wi*On+sa*gi,Je[2]=ya*Gn+wi*Cr+sa*aa,Je[3]=$i*Mn+hi*Ht+fa*Er,Je[4]=$i*Yn+hi*On+fa*gi,Je[5]=$i*Gn+hi*Cr+fa*aa,Je[6]=ea*Mn+ka*Ht+Bi*Er,Je[7]=ea*Yn+ka*On+Bi*gi,Je[8]=ea*Gn+ka*Cr+Bi*aa,Je};function Et(){var Je=new xe(16);return xe!=Float32Array&&(Je[1]=0,Je[2]=0,Je[3]=0,Je[4]=0,Je[6]=0,Je[7]=0,Je[8]=0,Je[9]=0,Je[11]=0,Je[12]=0,Je[13]=0,Je[14]=0),Je[0]=1,Je[5]=1,Je[10]=1,Je[15]=1,Je}var mt=function(Je,ea,Kt){var Mn=ea[0],Yn=ea[1],Gn=ea[2],Ht=ea[3],On=ea[4],Cr=ea[5],Er=ea[6],gi=ea[7],aa=ea[8],ya=ea[9],wi=ea[10],sa=ea[11],$i=ea[12],hi=ea[13],fa=ea[14],ea=ea[15],ka=Kt[0],Bi=Kt[1],_a=Kt[2],to=Kt[3];return Je[0]=ka*Mn+Bi*On+_a*aa+to*$i,Je[1]=ka*Yn+Bi*Cr+_a*ya+to*hi,Je[2]=ka*Gn+Bi*Er+_a*wi+to*fa,Je[3]=ka*Ht+Bi*gi+_a*sa+to*ea,ka=Kt[4],Bi=Kt[5],_a=Kt[6],to=Kt[7],Je[4]=ka*Mn+Bi*On+_a*aa+to*$i,Je[5]=ka*Yn+Bi*Cr+_a*ya+to*hi,Je[6]=ka*Gn+Bi*Er+_a*wi+to*fa,Je[7]=ka*Ht+Bi*gi+_a*sa+to*ea,ka=Kt[8],Bi=Kt[9],_a=Kt[10],to=Kt[11],Je[8]=ka*Mn+Bi*On+_a*aa+to*$i,Je[9]=ka*Yn+Bi*Cr+_a*ya+to*hi,Je[10]=ka*Gn+Bi*Er+_a*wi+to*fa,Je[11]=ka*Ht+Bi*gi+_a*sa+to*ea,ka=Kt[12],Bi=Kt[13],_a=Kt[14],to=Kt[15],Je[12]=ka*Mn+Bi*On+_a*aa+to*$i,Je[13]=ka*Yn+Bi*Cr+_a*ya+to*hi,Je[14]=ka*Gn+Bi*Er+_a*wi+to*fa,Je[15]=ka*Ht+Bi*gi+_a*sa+to*ea,Je};function Wt(Je){for(var wt=[],Kt=1;Kt<arguments.length;Kt++)wt[Kt-1]=arguments[Kt];return Je?wt.reduce(function(Mn,Yn){return function(Gn){return Yn(Mn(Gn))}},Je):se}function Rt(Je){return Je instanceof Float32Array||Je instanceof Array}function Tt(Je,wt,Kt){for(;Je<wt;)Je+=2*Math.PI;for(;Kt<Je;)Je-=2*Math.PI;return Je}Ke=new xe(3),xe!=Float32Array&&(Ke[0]=0,Ke[1]=0,Ke[2]=0),Ke=new xe(4),xe!=Float32Array&&(Ke[0]=0,Ke[1]=0,Ke[2]=0,Ke[3]=0);function Ze(Ht,wt,Kt,Mn,Yn){var Gn=(Ht=ae(Ht,2))[0],Ht=Ht[1],On=le();return Gn=[Gn,Ht],(Ht=On)[0]=1,Ht[1]=0,Ht[2]=0,Ht[3]=0,Ht[4]=1,Ht[5]=0,Ht[6]=Gn[0],Ht[7]=Gn[1],Ht[8]=1,Ht}function Ie(Je,...wt){return wt.reduce((Kt,Mn)=>Yn=>Kt(Mn(Yn)),Je)}function Qe(Je,wt){return wt-Je?Kt=>(Kt-Je)/(wt-Je):Kt=>.5}const it=Math.sqrt(50),De=Math.sqrt(10),cn=Math.sqrt(2);function qe(Je,wt,Kt){return wt=(wt-Je)/Math.max(0,Kt),Je=Math.floor(Math.log(wt)/Math.LN10),Kt=wt/Mf(10,Je),0<=Je?(Kt>=it?10:Kt>=De?5:Kt>=cn?2:1)*Mf(10,Je):-Mf(10,-Je)/(Kt>=it?10:Kt>=De?5:Kt>=cn?2:1)}const Pt=(Je,wt,Kt=5)=>{Je=[Je,wt];let Mn=0,Yn=Je.length-1,Gn=Je[Mn],Ht=Je[Yn],On;return Ht<Gn&&([Gn,Ht]=[Ht,Gn],[Mn,Yn]=[Yn,Mn]),0<(On=qe(Gn,Ht,Kt))?(Gn=Math.floor(Gn/On)*On,Ht=Math.ceil(Ht/On)*On,On=qe(Gn,Ht,Kt)):On<0&&(Gn=Math.ceil(Gn*On)/On,Ht=Math.floor(Ht*On)/On,On=qe(Gn,Ht,Kt)),0<On?(Je[Mn]=Math.floor(Gn/On)*On,Je[Yn]=Math.ceil(Ht/On)*On):On<0&&(Je[Mn]=Math.ceil(Gn*On)/On,Je[Yn]=Math.floor(Ht*On)/On),Je};function Le(Je){return Je!=null&&!Number.isNaN(Je)}function pt(Je,wt){return Kt=>{Kt.prototype.rescale=function(){this.initRange(),this.nice();var[Mn]=this.chooseTransforms();this.composeOutput(Mn,this.chooseClamp(Mn))},Kt.prototype.initRange=function(){var Mn=this.options.interpolator;this.options.range=Je(Mn)},Kt.prototype.composeOutput=function(Mn,Yn){var Gn,{domain:On,interpolator:Ht,round:Cr}=this.getOptions(),On=wt(On.map(Mn)),Cr=Cr?(Gn=Ht,Er=>(Er=Gn(Er),he(Er)?Math.round(Er):Er)):Ht;this.output=Ie(Cr,On,Yn,Mn)},Kt.prototype.invert=void 0}}var at,Ke={exports:{}},ye={exports:{}},nt=function(Je){return!(!Je||typeof Je=="string")&&(Je instanceof Array||Array.isArray(Je)||0<=Je.length&&(Je.splice instanceof Function||Object.getOwnPropertyDescriptor(Je,Je.length-1)&&Je.constructor.name!=="String"))},Ct=Array.prototype.concat,rt=Array.prototype.slice,vt=ye.exports=function(Je){for(var wt=[],Kt=0,Mn=Je.length;Kt<Mn;Kt++){var Yn=Je[Kt];nt(Yn)?wt=Ct.call(wt,rt.call(Yn)):wt.push(Yn)}return wt},Ve=(vt.wrap=function(Je){return function(){return Je(vt(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),hn=ye.exports,yn=Object.hasOwnProperty,ir=Object.create(null);for(at in Ve)yn.call(Ve,at)&&(ir[Ve[at]]=at);var Qn=Ke.exports={to:{},get:{}};function Ut(Je,wt,Kt){return Math.min(Math.max(wt,Je),Kt)}function En(Je){return Je=Math.round(Je).toString(16).toUpperCase(),Je.length<2?"0"+Je:Je}Qn.get=function(Je){var wt,Kt;switch(Je.substring(0,3).toLowerCase()){case"hsl":wt=Qn.get.hsl(Je),Kt="hsl";break;case"hwb":wt=Qn.get.hwb(Je),Kt="hwb";break;default:wt=Qn.get.rgb(Je),Kt="rgb"}return wt?{model:Kt,value:wt}:null},Qn.get.rgb=function(Je){if(!Je)return null;var wt,Kt,Mn,Yn=[0,0,0,1];if(wt=Je.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(Mn=wt[2],wt=wt[1],Kt=0;Kt<3;Kt++){var Gn=2*Kt;Yn[Kt]=parseInt(wt.slice(Gn,2+Gn),16)}Mn&&(Yn[3]=parseInt(Mn,16)/255)}else if(wt=Je.match(/^#([a-f0-9]{3,4})$/i)){for(Mn=(wt=wt[1])[3],Kt=0;Kt<3;Kt++)Yn[Kt]=parseInt(wt[Kt]+wt[Kt],16);Mn&&(Yn[3]=parseInt(Mn+Mn,16)/255)}else{if(wt=Je.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(Kt=0;Kt<3;Kt++)Yn[Kt]=parseInt(wt[Kt+1],0);else{if(!(wt=Je.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(wt=Je.match(/^(\w+)$/))?wt[1]==="transparent"?[0,0,0,0]:yn.call(Ve,wt[1])?((Yn=Ve[wt[1]])[3]=1,Yn):null:null;for(Kt=0;Kt<3;Kt++)Yn[Kt]=Math.round(2.55*parseFloat(wt[Kt+1]))}wt[4]&&(wt[5]?Yn[3]=.01*parseFloat(wt[4]):Yn[3]=parseFloat(wt[4]))}for(Kt=0;Kt<3;Kt++)Yn[Kt]=Ut(Yn[Kt],0,255);return Yn[3]=Ut(Yn[3],0,1),Yn},Qn.get.hsl=function(Je){var wt;return(Je=Je&&Je.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(wt=parseFloat(Je[4]),[(parseFloat(Je[1])%360+360)%360,Ut(parseFloat(Je[2]),0,100),Ut(parseFloat(Je[3]),0,100),Ut(isNaN(wt)?1:wt,0,1)]):null},Qn.get.hwb=function(Je){var wt;return(Je=Je&&Je.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(wt=parseFloat(Je[4]),[(parseFloat(Je[1])%360+360)%360,Ut(parseFloat(Je[2]),0,100),Ut(parseFloat(Je[3]),0,100),Ut(isNaN(wt)?1:wt,0,1)]):null},Qn.to.hex=function(){var Je=hn(arguments);return"#"+En(Je[0])+En(Je[1])+En(Je[2])+(Je[3]<1?En(Math.round(255*Je[3])):"")},Qn.to.rgb=function(){var Je=hn(arguments);return Je.length<4||Je[3]===1?"rgb("+Math.round(Je[0])+", "+Math.round(Je[1])+", "+Math.round(Je[2])+")":"rgba("+Math.round(Je[0])+", "+Math.round(Je[1])+", "+Math.round(Je[2])+", "+Je[3]+")"},Qn.to.rgb.percent=function(){var Je=hn(arguments),wt=Math.round(Je[0]/255*100),Kt=Math.round(Je[1]/255*100),Mn=Math.round(Je[2]/255*100);return Je.length<4||Je[3]===1?"rgb("+wt+"%, "+Kt+"%, "+Mn+"%)":"rgba("+wt+"%, "+Kt+"%, "+Mn+"%, "+Je[3]+")"},Qn.to.hsl=function(){var Je=hn(arguments);return Je.length<4||Je[3]===1?"hsl("+Je[0]+", "+Je[1]+"%, "+Je[2]+"%)":"hsla("+Je[0]+", "+Je[1]+"%, "+Je[2]+"%, "+Je[3]+")"},Qn.to.hwb=function(){var Je=hn(arguments),wt="";return 4<=Je.length&&Je[3]!==1&&(wt=", "+Je[3]),"hwb("+Je[0]+", "+Je[1]+"%, "+Je[2]+"%"+wt+")"},Qn.to.keyword=function(Je){return ir[Je.slice(0,3)]};var Tn=Ke.exports;function lr(Je,wt,Kt){let Mn=Kt;return Mn<0&&(Mn+=1),1<Mn&&--Mn,Mn<1/6?Je+6*(wt-Je)*Mn:Mn<.5?wt:Mn<2/3?Je+(wt-Je)*(2/3-Mn)*6:Je}function ln(Yn){var wt,Kt,Mn,Yn=Tn.get(Yn);return Yn?({model:Yn,value:wt}=Yn,Yn==="rgb"?wt:Yn==="hsl"?(wt=(Yn=wt)[0]/360,Kt=Yn[1]/100,Mn=Yn[2]/100,Yn=Yn[3],Kt==0?[255*Mn,255*Mn,255*Mn,Yn]:[255*lr(Kt=2*Mn-(Mn=Mn<.5?Mn*(1+Kt):Mn+Kt-Mn*Kt),Mn,wt+1/3),255*lr(Kt,Mn,wt),255*lr(Kt,Mn,wt-1/3),Yn]):null):null}const Lt=(Je,wt)=>Kt=>Je*(1-Kt)+wt*Kt,bn=(Je,wt)=>{if(typeof Je=="number"&&typeof wt=="number")return Lt(Je,wt);if(typeof Je!="string"||typeof wt!="string")return()=>Je;{var Kt=Je,Mn=wt;const Yn=ln(Kt),Gn=ln(Mn);return Yn===null||Gn===null?Yn?()=>Kt:()=>Mn:Ht=>{var On=new Array(4);for(let sa=0;sa<4;sa+=1){var Cr=Yn[sa],Er=Gn[sa];On[sa]=Cr*(1-Ht)+Er*Ht}var[gi,aa,ya,wi]=On;return`rgba(${Math.round(gi)}, ${Math.round(aa)}, ${Math.round(ya)}, ${wi})`}}},Xe=(Je,wt)=>{const Kt=Lt(Je,wt);return Mn=>Math.round(Kt(Mn))};function Fe({map:Je,initKey:wt},Kt){return wt=wt(Kt),Je.has(wt)?Je.get(wt):Kt}function on(Je){return typeof Je=="object"?Je.valueOf():Je}class B extends Map{constructor(wt){if(super(),this.map=new Map,this.initKey=on,wt!==null)for(var[Kt,Mn]of wt)this.set(Kt,Mn)}get(wt){return super.get(Fe({map:this.map,initKey:this.initKey},wt))}has(wt){return super.has(Fe({map:this.map,initKey:this.initKey},wt))}set(wt,Kt){return super.set(([{map:wt,initKey:Mn},Yn]=[{map:this.map,initKey:this.initKey},wt],Mn=Mn(Yn),wt.has(Mn)?wt.get(Mn):(wt.set(Mn,Yn),Yn)),Kt);var Mn,Yn}delete(wt){return super.delete(([{map:wt,initKey:Kt},Mn]=[{map:this.map,initKey:this.initKey},wt],Kt=Kt(Mn),wt.has(Kt)&&(Mn=wt.get(Kt),wt.delete(Kt)),Mn));var Kt,Mn}}class be{constructor(wt){this.options=Se({},this.getDefaultOptions()),this.update(wt)}getOptions(){return this.options}update(wt={}){this.options=Se({},this.options,wt),this.rescale(wt)}rescale(wt){}}const yt=Symbol("defaultUnknown");function Ee(Je,wt,Kt){for(let Mn=0;Mn<wt.length;Mn+=1)Je.has(wt[Mn])||Je.set(Kt(wt[Mn]),Mn)}function Zt(wt){var{value:wt,from:Kt,to:Mn,mapper:Yn,notFoundReturn:Gn}=wt;let Ht=Yn.get(wt);if(Ht===void 0){if(Gn!==yt)return Gn;Ht=Kt.push(wt)-1,Yn.set(wt,Ht)}return Mn[Ht%Mn.length]}function _n(Je){return Je instanceof Date?wt=>""+wt:typeof Je=="object"?wt=>JSON.stringify(wt):wt=>wt}class Sn extends be{getDefaultOptions(){return{domain:[],range:[],unknown:yt}}constructor(wt){super(wt)}map(wt){return this.domainIndexMap.size===0&&Ee(this.domainIndexMap,this.getDomain(),this.domainKey),Zt({value:this.domainKey(wt),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(wt){return this.rangeIndexMap.size===0&&Ee(this.rangeIndexMap,this.getRange(),this.rangeKey),Zt({value:this.rangeKey(wt),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(wt){var[Kt]=this.options.domain,[Mn]=this.options.range;this.domainKey=_n(Kt),this.rangeKey=_n(Mn),this.rangeIndexMap?(wt&&!wt.range||this.rangeIndexMap.clear(),wt&&!wt.domain&&!wt.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new Sn(this.options)}getRange(){return this.options.range}getDomain(){var wt,Kt;return this.sortedDomain||({domain:wt,compare:Kt}=this.options,this.sortedDomain=Kt?[...wt].sort(Kt):wt),this.sortedDomain}}function Bn(hi){const{domain:wt,range:Kt,paddingOuter:Mn,paddingInner:Yn,flex:Gn,round:Ht,align:On}=hi;var Cr=wt.length,wi=0<(wi=(hi=Cr)-(Er=Gn).length)?[...Er,...new Array(wi).fill(1)]:wi<0?Er.slice(0,hi):Er,[hi,Er]=Kt,Er=Er-hi,$i=Er/(2/Cr*Mn+1-1/Cr*Yn);const gi=$i*Yn/Cr;$i-=Cr*gi;const aa=function(Bi){const _a=Math.min(...Bi);return Bi.map(to=>to/_a)}(wi),ya=$i/aa.reduce((Bi,_a)=>Bi+_a);var wi=new B(wt.map((Bi,_a)=>(_a=aa[_a]*ya,[Bi,Ht?Math.floor(_a):_a]))),sa=new B(wt.map((Bi,_a)=>(_a=aa[_a]*ya+gi,[Bi,Ht?Math.floor(_a):_a]))),$i=Array.from(sa.values()).reduce((Bi,_a)=>Bi+_a),hi=hi+(Er-($i-$i/Cr*Yn))*On;let fa=Ht?Math.round(hi):hi;var ea=new Array(Cr);for(let Bi=0;Bi<Cr;Bi+=1){ea[Bi]=(ka=fa,Math.round(1e12*ka)/1e12);var ka=wt[Bi];fa+=sa.get(ka)}return{valueBandWidth:wi,valueStep:sa,adjustedRange:ea}}class or extends Sn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:yt,flex:[]}}constructor(wt){super(wt)}clone(){return new or(this.options)}getStep(wt){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:wt===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(wt)}getBandWidth(wt){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:wt===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(wt)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:wt,paddingInner:Kt}=this.options;return 0<wt?wt:Kt}getPaddingOuter(){var{padding:wt,paddingOuter:Kt}=this.options;return 0<wt?wt:Kt}rescale(){super.rescale();var{align:Mn,domain:wt,range:Yn,round:Gn,flex:Kt}=this.options,{adjustedRange:Mn,valueBandWidth:Yn,valueStep:Gn}=function(Er){var On=Er.domain;if((On=On.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((Cr=Er.flex)==null||!Cr.length))return Bn(Er);var{range:Cr,paddingOuter:Er,paddingInner:gi,round:aa,align:ya}=Er;let wi,sa,$i=Cr[0];return Cr=Cr[1]-$i,wi=Cr/Math.max(1,2*Er+(On-gi)),aa&&(wi=Math.floor(wi)),$i+=(Cr-wi*(On-gi))*ya,sa=wi*(1-gi),aa&&($i=Math.round($i),sa=Math.round(sa)),Er=new Array(On).fill(0).map((hi,fa)=>$i+fa*wi),{valueStep:wi,valueBandWidth:sa,adjustedRange:Er}}({align:Mn,range:Yn,round:Gn,flex:Kt,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:wt});this.valueStep=Gn,this.valueBandWidth=Yn,this.adjustedRange=Mn}}const dr=(Je,wt,Kt)=>{let Mn,Yn,Gn=Je,Ht=wt;if(Gn===Ht&&0<Kt)return[Gn];let On=qe(Gn,Ht,Kt);if(On===0||!Number.isFinite(On))return[];if(0<On){Gn=Math.ceil(Gn/On),Ht=Math.floor(Ht/On),Yn=new Array(Mn=Math.ceil(Ht-Gn+1));for(let Cr=0;Cr<Mn;Cr+=1)Yn[Cr]=(Gn+Cr)*On}else{On=-On,Gn=Math.ceil(Gn*On),Ht=Math.floor(Ht*On),Yn=new Array(Mn=Math.ceil(Ht-Gn+1));for(let Cr=0;Cr<Mn;Cr+=1)Yn[Cr]=(Gn+Cr)/On}return Yn},gr=(Mn,Gn,Kt)=>{var[Mn,Yn]=Mn,[Gn,Ht]=Gn;let On,Cr;return Ie(Cr=Mn<Yn?(On=Qe(Mn,Yn),Kt(Gn,Ht)):(On=Qe(Yn,Mn),Kt(Ht,Gn)),On)},wr=(Je,wt,Kt)=>{const Mn=Math.min(Je.length,wt.length)-1,Yn=new Array(Mn),Gn=new Array(Mn);var Ht=Je[0]>Je[Mn],On=Ht?[...Je].reverse():Je,Cr=Ht?[...wt].reverse():wt;for(let Er=0;Er<Mn;Er+=1)Yn[Er]=Qe(On[Er],On[Er+1]),Gn[Er]=Kt(Cr[Er],Cr[Er+1]);return Er=>{var gi=function(ya,wi,sa,$i,hi){let fa=sa||0,ea=$i||ya.length;for(var ka=hi||(_a=>_a);fa<ea;){var Bi=Math.floor((fa+ea)/2);ka(ya[Bi])>wi?ea=Bi:fa=Bi+1}return fa}(Je,Er,1,Mn)-1,aa=Yn[gi];return Ie(Gn[gi],aa)(Er)}},Ar=(Je,wt,Kt,Mn)=>(2<Math.min(Je.length,wt.length)?wr:gr)(Je,wt,Mn?Xe:Kt);class Ir extends be{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Lt,tickCount:5}}map(wt){return Le(wt)?this.output(wt):this.options.unknown}invert(wt){return Le(wt)?this.input(wt):this.options.unknown}nice(){var wt,Kt,Mn,Yn;this.options.nice&&([wt,Kt,Mn,...Yn]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(wt,Kt,Mn,...Yn))}getTicks(){var wt=this.options.tickMethod,[Kt,Mn,Yn,...Gn]=this.getTickMethodOptions();return wt(Kt,Mn,Yn,...Gn)}getTickMethodOptions(){var{domain:wt,tickCount:Kt}=this.options;return[wt[0],wt[wt.length-1],Kt]}chooseNice(){return Pt}rescale(){this.nice();var[wt,Kt]=this.chooseTransforms();this.composeOutput(wt,this.chooseClamp(wt)),this.composeInput(wt,Kt,this.chooseClamp(Kt))}chooseClamp(Mn){var{clamp:Kt,range:Yn}=this.options,Mn=this.options.domain.map(Mn),Yn=Math.min(Mn.length,Yn.length);if(Kt){Kt=Mn[0],Mn=Mn[Yn-1];const Gn=Mn<Kt?Mn:Kt,Ht=Mn<Kt?Kt:Mn;return On=>Math.min(Math.max(Gn,On),Ht)}return se}composeOutput(wt,Kt){var{domain:Ht,range:Mn,round:Yn,interpolate:Gn}=this.options,Ht=Ar(Ht.map(wt),Mn,Gn,Yn);this.output=Ie(Ht,Kt,wt)}composeInput(wt,Kt,Mn){var{domain:Yn,range:Gn}=this.options,Gn=Ar(Gn,Yn.map(wt),Lt);this.input=Ie(Kt,Mn,Gn)}}class Nr extends Ir{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:bn,tickMethod:dr,tickCount:5}}chooseTransforms(){return[se,se]}clone(){return new Nr(this.options)}}class Yr extends or{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:yt,paddingInner:1,paddingOuter:0}}constructor(wt){super(wt)}getPaddingInner(){return 1}clone(){return new Yr(this.options)}update(wt){super.update(wt)}getPaddingOuter(){return this.options.padding}}function bt(Je,wt){for(var Kt=[],Mn=0,Yn=Je.length;Mn<Yn;Mn++)Kt.push(Je[Mn].substr(0,wt));return Kt}var ve,ye=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ke=["January","February","March","April","May","June","July","August","September","October","November","December"],ht=bt(Ke,3);(function(Je){for(var wt=[],Kt=1;Kt<arguments.length;Kt++)wt[Kt-1]=arguments[Kt];for(var Mn=0,Yn=wt;Mn<Yn.length;Mn++){var Gn,Ht=Yn[Mn];for(Gn in Ht)Je[Gn]=Ht[Gn]}})({},{dayNamesShort:bt(ye,3),dayNames:ye,monthNamesShort:ht,monthNames:Ke,amPm:["am","pm"],DoFn:function(Je){return Je+["th","st","nd","rd"][3<Je%10?0:(Je-Je%10!=10?1:0)*Je%10]}});var xt;let Jt=ve=class extends Nr{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:se,tickMethod:dr,tickCount:5}}constructor(Je){super(Je)}clone(){return new ve(this.options)}};Jt=ve=function(Je,wt,Kt,Mn){var Yn,Gn=arguments.length,Ht=Gn<3?wt:Mn===null?Mn=Object.getOwnPropertyDescriptor(wt,Kt):Mn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ht=Reflect.decorate(Je,wt,Kt,Mn);else for(var On=Je.length-1;0<=On;On--)(Yn=Je[On])&&(Ht=(Gn<3?Yn(Ht):3<Gn?Yn(wt,Kt,Ht):Yn(wt,Kt))||Ht);return 3<Gn&&Ht&&Object.defineProperty(wt,Kt,Ht),Ht}([pt(function(Je){return[Je(0),Je(1)]},wt=>{var[wt,Kt]=wt;return Ie(Lt(0,1),Qe(wt,Kt))})],Jt);let Dn=xt=class extends Nr{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:se,tickMethod:dr,tickCount:5}}constructor(Je){super(Je)}clone(){return new xt(this.options)}};Dn=xt=function(Je,wt,Kt,Mn){var Yn,Gn=arguments.length,Ht=Gn<3?wt:Mn===null?Mn=Object.getOwnPropertyDescriptor(wt,Kt):Mn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ht=Reflect.decorate(Je,wt,Kt,Mn);else for(var On=Je.length-1;0<=On;On--)(Yn=Je[On])&&(Ht=(Gn<3?Yn(Ht):3<Gn?Yn(wt,Kt,Ht):Yn(wt,Kt))||Ht);return 3<Gn&&Ht&&Object.defineProperty(wt,Kt,Ht),Ht}([pt(function(Je){return[Je(0),Je(.5),Je(1)]},Je=>{const[wt,Kt,Mn]=Je,Yn=Ie(Lt(0,.5),Qe(wt,Kt)),Gn=Ie(Lt(.5,1),Qe(Kt,Mn));return Ht=>(wt>Mn?Ht<Kt?Gn:Yn:Ht<Kt?Yn:Gn)(Ht)})],Dn);function fr(Je,wt,Kt,Mn,Yn){var Gn=new Nr({range:[wt,wt+Mn]}),Ht=new Nr({range:[Kt,Kt+Yn]});return{transform:function(Er){var Er=ae(Er,2),Cr=Er[0],Er=Er[1];return[Gn.map(Cr),Ht.map(Er)]},untransform:function(Er){var Er=ae(Er,2),Cr=Er[0],Er=Er[1];return[Gn.invert(Cr),Ht.invert(Er)]}}}function In(Je,wt,Kt,Mn,Yn){return(0,ae(Je,1)[0])(wt,Kt,Mn,Yn)}function ke(Je,wt,Kt,Mn,Yn){return ae(Je,1)[0]}function Pe(Cr,wt,Kt,Mn,Yn){var Gn=(Cr=ae(Cr,4))[0],Ht=Cr[1],On=Cr[2],Cr=Cr[3],Er=new Nr({range:[On,Cr]}),gi=new Nr({range:[Gn,Ht]}),aa=1<(On=Yn/Mn)?1:On,ya=1<On?1/On:1;return{transform:function($i){var $i=ae($i,2),sa=$i[0],$i=$i[1],sa=gi.map(sa),$i=Er.map($i);return[.5*($i*Math.cos(sa)*aa)+.5,.5*($i*Math.sin(sa)*ya)+.5]},untransform:function(hi){var hi=ae(hi,2),sa=hi[0],hi=hi[1],sa=2*(sa-.5)/aa,hi=2*(hi-.5)/ya,$i=Math.sqrt(Math.pow(sa,2)+Math.pow(hi,2)),hi=Tt(Math.atan2(hi,sa),Gn,Ht);return[gi.invert(hi),Er.invert($i)]}}}function Ge(Je,wt,Kt,Mn,Yn){return{transform:function(Ht){var Ht=ae(Ht,2),On=Ht[0];return[Ht[1],On]},untransform:function(Ht){var Ht=ae(Ht,2),On=Ht[0];return[Ht[1],On]}}}function gt(Je){for(var wt=[],Kt=1;Kt<arguments.length;Kt++)wt[Kt-1]=arguments[Kt];return dn.apply(void 0,T([[-1,-1]],ae(wt),!1))}function Bt(Je){for(var wt=[],Kt=1;Kt<arguments.length;Kt++)wt[Kt-1]=arguments[Kt];return dn.apply(void 0,T([[-1,1]],ae(wt),!1))}function an(Je){for(var wt=[],Kt=1;Kt<arguments.length;Kt++)wt[Kt-1]=arguments[Kt];return dn.apply(void 0,T([[1,-1]],ae(wt),!1))}function An(Ht,wt,Kt,Mn,Yn){var Gn,Ht=ae(Ht,1)[0],On=le();return On=On,Ht=Ht,Gn=Math.sin(Ht),Ht=Math.cos(Ht),On[0]=Ht,On[1]=Gn,On[2]=0,On[3]=-Gn,On[4]=Ht,On[5]=0,On[6]=0,On[7]=0,On[8]=1,On}function kt(Je,wt,Kt,Mn,Yn){var Gn=(Je=ae(Je,4))[0],Ht=Je[1],On=Je[2],Cr=(Je[3]-On)/(+Ht/(2*Math.PI)+1),Er=Cr/(2*Math.PI),gi=new Nr({range:[On,On+.99*Cr]}),aa=new Nr({range:[Gn,Ht]}),ya=1<(Je=Yn/Mn)?1:Je,wi=1<Je?1/Je:1;return{transform:function(hi){var hi=ae(hi,2),$i=hi[0],hi=hi[1],$i=aa.map($i),hi=gi.map(hi);return[.5*(Math.cos($i)*(Er*$i+hi)*ya)+.5,.5*(Math.sin($i)*(Er*$i+hi)*wi)+.5]},untransform:function(hi){var hi=ae(hi,2),fa=hi[0],hi=hi[1],fa=2*(fa-.5)/ya,hi=2*(hi-.5)/wi,$i=Math.sqrt(Math.pow(fa,2)+Math.pow(hi,2)),hi=Tt(Math.atan2(hi,fa)+Math.floor($i/Cr)*Math.PI*2,Gn,Ht),fa=$i-Er*hi;return[aa.invert(hi),gi.invert(fa)]}}}function Dt(Cr,wt,Kt,Mn,Yn){var Gn=(Cr=ae(Cr,4))[0],Ht=Cr[1],On=Cr[2],Cr=Cr[3],Er=new Nr({range:[On,Cr]});return{transform:function(gi){for(var aa=[],ya=gi.length,wi=new Yr({domain:new Array(ya).fill(0).map(function(fa,ea){return ea}),range:[Gn,Ht]}),sa=0;sa<ya;sa++){var hi=gi[sa],$i=wi.map(sa),hi=Er.map(hi);aa.push($i,hi)}return aa},untransform:function(gi){for(var aa=[],ya=0;ya<gi.length;ya+=2){var wi=gi[ya+1];aa.push(Er.invert(wi))}return aa}}}var dn=function(Ht,wt,Kt,Mn,Yn){var Ht=ae(Ht,2),Gn=Ht[0],Ht=Ht[1],On=le();return Gn=[Gn,Ht],(Ht=On)[0]=Gn[0],Ht[1]=0,Ht[2]=0,Ht[3]=0,Ht[4]=Gn[1],Ht[5]=0,Ht[6]=0,Ht[7]=0,Ht[8]=1,Ht};function He(Je){return 1/Math.tan(Je)}function ei(Je,wt,Kt,Mn,Yn){var Gn=He(ae(Je,1)[0]);return{transform:function(Cr){var Cr=ae(Cr,2),On=Cr[0],Cr=Cr[1];return[On+Cr*Gn,Cr]},untransform:function(Cr){var Cr=ae(Cr,2),On=Cr[0],Cr=Cr[1];return[On-Cr*Gn,Cr]}}}function Tr(Je,wt,Kt,Mn,Yn){var Gn=He(ae(Je,1)[0]);return{transform:function(On){var On=ae(On,2),Cr=On[0];return[Cr,On[1]+Cr*Gn]},untransform:function(On){var On=ae(On,2),Cr=On[0];return[Cr,On[1]-Cr*Gn]}}}function ii(Je,wt,Kt,On,Ht){var Gn=Je<wt,Ht=(Gn?wt-On:Ht-wt)||Ht-On,On=Gn?-1:1;return On*Ht*(Kt+1)/(Kt+Ht/((Je-wt)*On))+wt}function Di(Je,wt,Kt,Mn,Ht){var Gn=Je<wt,Ht=(Gn?wt-Mn:Ht-wt)||Ht-Mn;return Ht/(Ht*(Kt+1)/(Je-wt)-Kt*(Gn?-1:1))+wt}function vi(Je,wt,Kt){return Kt?new Nr({range:[0,1],domain:[0,wt]}).map(Je):Je}function Br(On,wt,Kt,Mn,Yn){var Gn=(On=ae(On,3))[0],Ht=On[1],On=On[2],Cr=vi(Gn,Mn,On!==void 0&&On);return{transform:function(aa){var aa=ae(aa,2),gi=aa[0],aa=aa[1];return[ii(gi,Cr,Ht,0,1),aa]},untransform:function(aa){var aa=ae(aa,2),gi=aa[0],aa=aa[1];return[Di(gi,Cr,Ht,0,1),aa]}}}function Gr(On,wt,Kt,Mn,Yn){var Gn=(On=ae(On,3))[0],Ht=On[1],On=On[2],Cr=vi(Gn,Yn,On!==void 0&&On);return{transform:function(Er){return Er=ae(Er,2),[Er[0],ii(Er[1],Cr,Ht,0,1)]},untransform:function(Er){return Er=ae(Er,2),[Er[0],Di(Er[1],Cr,Ht,0,1)]}}}function bi(Er,wt,Kt,Mn,Yn){var Gn=(Er=ae(Er,5))[0],Ht=Er[1],On=Er[2],Cr=Er[3],Er=Er[4],gi=vi(Gn,Mn,Er=Er!==void 0&&Er),aa=vi(Ht,Yn,Er);return{transform:function(sa){var sa=ae(sa,2),wi=sa[0],sa=sa[1];return[ii(wi,gi,On,0,1),ii(sa,aa,Cr,0,1)]},untransform:function(sa){var sa=ae(sa,2),wi=sa[0],sa=sa[1];return[Di(wi,gi,On,0,1),Di(sa,aa,Cr,0,1)]}}}function Ni(Er,wt,Kt,Mn,Yn){var Gn=(Er=ae(Er,5))[0],Ht=Er[1],On=Er[2],Cr=Er[3],Er=(Er=Er[4])!==void 0&&Er,gi=new Nr({range:[0,Mn]}),aa=new Nr({range:[0,Yn]}),ya=Er?Gn:gi.map(Gn),wi=Er?Ht:aa.map(Ht);return{transform:function(hi){var hi=ae(hi,2),$i=hi[0],hi=hi[1],fa=gi.map($i)-ya,ea=aa.map(hi)-wi,ka=Math.sqrt(fa*fa+ea*ea);return On<ka?[$i,hi]:($i=ii(ka,0,Cr,0,On),hi=Math.atan2(ea,fa),ka=ya+$i*Math.cos(hi),ea=wi+$i*Math.sin(hi),[gi.invert(ka),aa.invert(ea)])},untransform:function(hi){var hi=ae(hi,2),$i=hi[0],hi=hi[1],fa=gi.map($i)-ya,ea=aa.map(hi)-wi,ka=Math.sqrt(fa*fa+ea*ea);return On<ka?[$i,hi]:($i=Di(ka,0,Cr,0,On),hi=Math.atan2(ea,fa),ka=ya+$i*Math.cos(hi),ea=wi+$i*Math.sin(hi),[gi.invert(ka),aa.invert(ea)])}}}function Qa(Je,wt,Kt,Mn,Yn,Gn,Ht){var On=new Nr({range:[wt,wt+Yn]}),Cr=new Nr({range:[Kt,Kt+Gn]}),Er=new Nr({range:[Mn,Mn+Ht]});return{transform:function(wi){var wi=ae(wi,3),aa=wi[0],ya=wi[1],wi=wi[2];return[On.map(aa),Cr.map(ya),Er.map(wi)]},untransform:function(wi){var wi=ae(wi,3),aa=wi[0],ya=wi[1],wi=wi[2];return[On.invert(aa),Cr.invert(ya),Er.invert(wi)]}}}function Xi(gi,wt,Kt,Mn,Yn,Gn,Ht){var On,Cr=(gi=ae(gi,3))[0],Er=gi[1],gi=gi[2];return On=Et(),Cr=[Cr,Er,gi],On[0]=1,On[1]=0,On[2]=0,On[3]=0,On[4]=0,On[5]=1,On[6]=0,On[7]=0,On[8]=0,On[9]=0,On[10]=1,On[11]=0,On[12]=Cr[0],On[13]=Cr[1],On[14]=Cr[2],On[15]=1,On}function ao(Je,wt,Kt,Mn,Yn,Gn,Ht){return{transform:function(Cr){var Cr=ae(Cr,3),Er=Cr[0];return[Cr[1],Er,Cr[2]]},untransform:function(Cr){var Cr=ae(Cr,3),Er=Cr[0];return[Cr[1],Er,Cr[2]]}}}function ko(gi,wt,Kt,Mn,Yn,Gn,Ht){var On,Cr=(gi=ae(gi,3))[0],Er=gi[1],gi=gi[2];return On=Et(),Cr=[Cr,Er,gi],On[0]=Cr[0],On[1]=0,On[2]=0,On[3]=0,On[4]=0,On[5]=Cr[1],On[6]=0,On[7]=0,On[8]=0,On[9]=0,On[10]=Cr[2],On[11]=0,On[12]=0,On[13]=0,On[14]=0,On[15]=1,On}Ba.prototype.update=function(Je){this.options=Se({},this.options,Je),this.recoordinate()},Ba.prototype.clone=function(){return new Ba(this.options)},Ba.prototype.getOptions=function(){return this.options},Ba.prototype.clear=function(){this.update({transformations:[]})},Ba.prototype.getSize=function(){var Je=this.options;return[Je.width,Je.height]},Ba.prototype.getCenter=function(){var Je=this.options,wt=Je.x,Kt=Je.y;return[(2*wt+Je.width)/2,(2*Kt+Je.height)/2]},Ba.prototype.transform=function(){for(var Je=[],wt=0;wt<arguments.length;wt++)Je[wt]=arguments[wt];var Kt=this.options.transformations;return this.update({transformations:T(T([],ae(Kt),!1),[T([],ae(Je),!1)],!1)}),this},Ba.prototype.map=function(Je){return this.output(Je)},Ba.prototype.invert=function(Je){return this.input(Je)},Ba.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Ba.prototype.compose=function(Je){function wt(Bi,_a){var to;On.push((_a=_a===void 0?!0:_a)?(to=Bi,function(Ae){for(var ns=[],Oo=0;Oo<Ae.length-1;Oo+=2){var Ms=[Ae[Oo],Ae[Oo+1]],Ms=to(Ms);ns.push.apply(ns,T([],ae(Ms),!1))}return ns}):Bi)}var Kt,Mn,Yn=(Je=Je===void 0?!1:Je)?T([],ae(this.options.transformations),!1).reverse():this.options.transformations,Gn=Je?function(Bi){return Bi.untransform}:function(Bi){return Bi.transform},Ht=[],On=[];try{for(var Cr=ee(Yn),Er=Cr.next();!Er.done;Er=Cr.next()){var gi,aa,ya,wi,sa,$i,hi=ae(Er.value),fa=hi[0],ea=hi.slice(1),ka=this.transformers[fa];ka&&(aa=(gi=this.options).x,ya=gi.y,wi=gi.width,sa=gi.height,Rt($i=ka(T([],ae(ea),!1),aa,ya,wi,sa))?Ht.push($i):(Ht.length&&(wt(this.createMatrixTransform(Ht,Je)),Ht.splice(0,Ht.length)),wt(Gn($i)||se,fa!=="parallel")))}}catch(Bi){Kt={error:Bi}}finally{try{Er&&!Er.done&&(Mn=Cr.return)&&Mn.call(Cr)}finally{if(Kt)throw Kt.error}}return Ht.length&&wt(this.createMatrixTransform(Ht,Je)),Wt.apply(void 0,T([],ae(On),!1))},Ba.prototype.createMatrixTransform=function(Je,wt){var Kt,Mn,Yn,Gn,Ht,On,Cr,Er,gi,aa,ya,wi,sa=le();return wt&&Je.reverse(),Je.forEach(function($i){return Ue(sa,sa,$i)}),wt&&(wt=Je=sa,(wi=new xe(9))[0]=wt[0],wi[1]=wt[1],wi[2]=wt[2],wi[3]=wt[3],wi[4]=wt[4],wi[5]=wt[5],wi[6]=wt[6],wi[7]=wt[7],wi[8]=wt[8],wi=(wt=wi)[0],Kt=wt[1],Mn=wt[2],Yn=wt[3],Gn=wt[4],Ht=wt[5],On=wt[6],Cr=wt[7],Er=(wt=wt[8])*Gn-Ht*Cr,ya=wi*Er+Kt*(gi=-wt*Yn+Ht*On)+Mn*(aa=Cr*Yn-Gn*On))&&(Je[0]=Er*(ya=1/ya),Je[1]=(-wt*Kt+Mn*Cr)*ya,Je[2]=(Ht*Kt-Mn*Gn)*ya,Je[3]=gi*ya,Je[4]=(wt*wi-Mn*On)*ya,Je[5]=(-Ht*wi+Mn*Yn)*ya,Je[6]=aa*ya,Je[7]=(-Cr*wi+Kt*On)*ya,Je[8]=(Gn*wi-Kt*Yn)*ya),function(_a){var hi,fa,ea,ka,Bi,_a=[_a[0],_a[1],1];return ea=sa,ka=(fa=hi=_a)[0],Bi=fa[1],fa=fa[2],hi[0]=ka*ea[0]+Bi*ea[3]+fa*ea[6],hi[1]=ka*ea[1]+Bi*ea[4]+fa*ea[7],hi[2]=ka*ea[2]+Bi*ea[5]+fa*ea[8],[_a[0],_a[1]]}},ye=Ba;function Ba(Je){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:fr,translate:Ze,custom:In,matrix:ke,polar:Pe,transpose:Ge,scale:dn,"shear.x":ei,"shear.y":Tr,reflect:gt,"reflect.x":Bt,"reflect.y":an,rotate:An,helix:kt,parallel:Dt,fisheye:bi,"fisheye.x":Br,"fisheye.y":Gr,"fisheye.circular":Ni},this.update(Je)}mi.prototype.update=function(Je){this.options=Se({},this.options,Je),this.recoordinate()},mi.prototype.clone=function(){return new mi(this.options)},mi.prototype.getOptions=function(){return this.options},mi.prototype.clear=function(){this.update({transformations:[]})},mi.prototype.getSize=function(){var Je=this.options;return[Je.width,Je.height,Je.depth]},mi.prototype.getCenter=function(){var Je=this.options,wt=Je.x,Kt=Je.y,Mn=Je.z;return[(2*wt+Je.width)/2,(2*Kt+Je.height)/2,(2*Mn+Je.depth)/2]},mi.prototype.transform=function(){for(var Je=[],wt=0;wt<arguments.length;wt++)Je[wt]=arguments[wt];var Kt=this.options.transformations;return this.update({transformations:T(T([],ae(Kt),!1),[T([],ae(Je),!1)],!1)}),this},mi.prototype.map=function(Je){return this.output(Je)},mi.prototype.invert=function(Je){return this.input(Je)},mi.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},mi.prototype.compose=function(Je){function wt(to,Ae){var ns;On.push((Ae=Ae===void 0?!0:Ae)?(ns=to,function(Oo){for(var Ms=[],ps=0;ps<Oo.length-1;ps+=3){var jt=[Oo[ps],Oo[ps+1],Oo[ps+2]],jt=ns(jt);Ms.push.apply(Ms,T([],ae(jt),!1))}return Ms}):to)}var Kt,Mn,Yn=(Je=Je===void 0?!1:Je)?T([],ae(this.options.transformations),!1).reverse():this.options.transformations,Gn=Je?function(to){return to.untransform}:function(to){return to.transform},Ht=[],On=[];try{for(var Cr=ee(Yn),Er=Cr.next();!Er.done;Er=Cr.next()){var gi,aa,ya,wi,sa,$i,hi,fa,ea=ae(Er.value),ka=ea[0],Bi=ea.slice(1),_a=this.transformers[ka];_a&&(aa=(gi=this.options).x,ya=gi.y,wi=gi.z,sa=gi.width,$i=gi.height,hi=gi.depth,Rt(fa=_a(T([],ae(Bi),!1),aa,ya,wi,sa,$i,hi))?Ht.push(fa):(Ht.length&&(wt(this.createMatrixTransform(Ht,Je)),Ht.splice(0,Ht.length)),wt(Gn(fa)||se,!0)))}}catch(to){Kt={error:to}}finally{try{Er&&!Er.done&&(Mn=Cr.return)&&Mn.call(Cr)}finally{if(Kt)throw Kt.error}}return Ht.length&&wt(this.createMatrixTransform(Ht,Je)),Wt.apply(void 0,T([],ae(On),!1))},mi.prototype.createMatrixTransform=function(Je,wt){var Kt,Mn,Yn,Gn,Ht,On,Cr,Er,gi,aa,ya,wi,sa,$i,hi,fa,ea,ka,Bi,_a,to,Ae,ns,Oo,Ms,ps,jt,sn,Jn=Et();return wt&&Je.reverse(),Je.forEach(function(Xr){return mt(Jn,Jn,Xr)}),wt&&(wt=Je=Jn,(sn=new xe(16))[0]=wt[0],sn[1]=wt[1],sn[2]=wt[2],sn[3]=wt[3],sn[4]=wt[4],sn[5]=wt[5],sn[6]=wt[6],sn[7]=wt[7],sn[8]=wt[8],sn[9]=wt[9],sn[10]=wt[10],sn[11]=wt[11],sn[12]=wt[12],sn[13]=wt[13],sn[14]=wt[14],sn[15]=wt[15],sn=(wt=sn)[0],Kt=wt[1],Mn=wt[2],Yn=wt[3],Gn=wt[4],Ht=wt[5],On=wt[6],Cr=wt[7],Er=wt[8],gi=wt[9],aa=wt[10],ya=wt[11],wi=wt[12],sa=wt[13],$i=wt[14],wt=wt[15],jt=(hi=sn*Ht-Kt*Gn)*(ps=aa*wt-ya*$i)-(fa=sn*On-Mn*Gn)*(Ms=gi*wt-ya*sa)+(ea=sn*Cr-Yn*Gn)*(Oo=gi*$i-aa*sa)+(ka=Kt*On-Mn*Ht)*(ns=Er*wt-ya*wi)-(Bi=Kt*Cr-Yn*Ht)*(Ae=Er*$i-aa*wi)+(_a=Mn*Cr-Yn*On)*(to=Er*sa-gi*wi))&&(Je[0]=(Ht*ps-On*Ms+Cr*Oo)*(jt=1/jt),Je[1]=(Mn*Ms-Kt*ps-Yn*Oo)*jt,Je[2]=(sa*_a-$i*Bi+wt*ka)*jt,Je[3]=(aa*Bi-gi*_a-ya*ka)*jt,Je[4]=(On*ns-Gn*ps-Cr*Ae)*jt,Je[5]=(sn*ps-Mn*ns+Yn*Ae)*jt,Je[6]=($i*ea-wi*_a-wt*fa)*jt,Je[7]=(Er*_a-aa*ea+ya*fa)*jt,Je[8]=(Gn*Ms-Ht*ns+Cr*to)*jt,Je[9]=(Kt*ns-sn*Ms-Yn*to)*jt,Je[10]=(wi*Bi-sa*ea+wt*hi)*jt,Je[11]=(gi*ea-Er*Bi-ya*hi)*jt,Je[12]=(Ht*Ae-Gn*Oo-On*to)*jt,Je[13]=(sn*Oo-Kt*Ae+Mn*to)*jt,Je[14]=(sa*fa-wi*ka-$i*hi)*jt,Je[15]=(Er*ka-gi*fa+aa*hi)*jt),function(vu){var Ii,Ea,co,Zs,Vs,Ds,vu=[vu[0],vu[1],vu[2],1];return co=Jn,Zs=(Ea=Ii=vu)[0],Vs=Ea[1],Ds=Ea[2],Ea=Ea[3],Ii[0]=co[0]*Zs+co[4]*Vs+co[8]*Ds+co[12]*Ea,Ii[1]=co[1]*Zs+co[5]*Vs+co[9]*Ds+co[13]*Ea,Ii[2]=co[2]*Zs+co[6]*Vs+co[10]*Ds+co[14]*Ea,Ii[3]=co[3]*Zs+co[7]*Vs+co[11]*Ds+co[15]*Ea,[vu[0],vu[1],vu[2]]}},ht=mi;function mi(Je){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Qa,translate3D:Xi,scale3D:ko,transpose3D:ao},this.update(Je)}D.Coordinate=ye,D.Coordinate3D=ht,Object.defineProperty(D,"__esModule",{value:!0})})},90857:function(It){"use strict";var G=Object.prototype.hasOwnProperty,D="~";function ee(){}Object.create&&(ee.prototype=Object.create(null),new ee().__proto__||(D=!1));function ae(ge,pe,Ce){this.fn=ge,this.context=pe,this.once=Ce||!1}function T(ge,pe,Ce,he,st){if(typeof Ce!="function")throw new TypeError("The listener must be a function");var re=new ae(Ce,he||ge,st),Se=D?D+pe:pe;return ge._events[Se]?ge._events[Se].fn?ge._events[Se]=[ge._events[Se],re]:ge._events[Se].push(re):(ge._events[Se]=re,ge._eventsCount++),ge}function ne(ge,pe){--ge._eventsCount===0?ge._events=new ee:delete ge._events[pe]}function Q(){this._events=new ee,this._eventsCount=0}Q.prototype.eventNames=function(){var pe=[],Ce,he;if(this._eventsCount===0)return pe;for(he in Ce=this._events)G.call(Ce,he)&&pe.push(D?he.slice(1):he);return Object.getOwnPropertySymbols?pe.concat(Object.getOwnPropertySymbols(Ce)):pe},Q.prototype.listeners=function(pe){var Ce=D?D+pe:pe,he=this._events[Ce];if(!he)return[];if(he.fn)return[he.fn];for(var st=0,re=he.length,Se=new Array(re);st<re;st++)Se[st]=he[st].fn;return Se},Q.prototype.listenerCount=function(pe){var Ce=D?D+pe:pe,he=this._events[Ce];return he?he.fn?1:he.length:0},Q.prototype.emit=function(pe,Ce,he,st,re,Se){var se=D?D+pe:pe;if(!this._events[se])return!1;var de=this._events[se],xe=arguments.length,le,Ue;if(de.fn){switch(de.once&&this.removeListener(pe,de.fn,void 0,!0),xe){case 1:return de.fn.call(de.context),!0;case 2:return de.fn.call(de.context,Ce),!0;case 3:return de.fn.call(de.context,Ce,he),!0;case 4:return de.fn.call(de.context,Ce,he,st),!0;case 5:return de.fn.call(de.context,Ce,he,st,re),!0;case 6:return de.fn.call(de.context,Ce,he,st,re,Se),!0}for(Ue=1,le=new Array(xe-1);Ue<xe;Ue++)le[Ue-1]=arguments[Ue];de.fn.apply(de.context,le)}else{var Et=de.length,mt;for(Ue=0;Ue<Et;Ue++)switch(de[Ue].once&&this.removeListener(pe,de[Ue].fn,void 0,!0),xe){case 1:de[Ue].fn.call(de[Ue].context);break;case 2:de[Ue].fn.call(de[Ue].context,Ce);break;case 3:de[Ue].fn.call(de[Ue].context,Ce,he);break;case 4:de[Ue].fn.call(de[Ue].context,Ce,he,st);break;default:if(!le)for(mt=1,le=new Array(xe-1);mt<xe;mt++)le[mt-1]=arguments[mt];de[Ue].fn.apply(de[Ue].context,le)}}return!0},Q.prototype.on=function(pe,Ce,he){return T(this,pe,Ce,he,!1)},Q.prototype.once=function(pe,Ce,he){return T(this,pe,Ce,he,!0)},Q.prototype.removeListener=function(pe,Ce,he,st){var re=D?D+pe:pe;if(!this._events[re])return this;if(!Ce)return ne(this,re),this;var Se=this._events[re];if(Se.fn)Se.fn===Ce&&(!st||Se.once)&&(!he||Se.context===he)&&ne(this,re);else{for(var se=0,de=[],xe=Se.length;se<xe;se++)(Se[se].fn!==Ce||st&&!Se[se].once||he&&Se[se].context!==he)&&de.push(Se[se]);de.length?this._events[re]=de.length===1?de[0]:de:ne(this,re)}return this},Q.prototype.removeAllListeners=function(pe){var Ce;return pe?(Ce=D?D+pe:pe,this._events[Ce]&&ne(this,Ce)):(this._events=new ee,this._eventsCount=0),this},Q.prototype.off=Q.prototype.removeListener,Q.prototype.addListener=Q.prototype.on,Q.prefixed=D,Q.EventEmitter=Q,It.exports=Q},38554:function(It){"use strict";var G=Object.prototype.hasOwnProperty,D="~";function ee(){}Object.create&&(ee.prototype=Object.create(null),new ee().__proto__||(D=!1));function ae(ge,pe,Ce){this.fn=ge,this.context=pe,this.once=Ce||!1}function T(ge,pe,Ce,he,st){if(typeof Ce!="function")throw new TypeError("The listener must be a function");var re=new ae(Ce,he||ge,st),Se=D?D+pe:pe;return ge._events[Se]?ge._events[Se].fn?ge._events[Se]=[ge._events[Se],re]:ge._events[Se].push(re):(ge._events[Se]=re,ge._eventsCount++),ge}function ne(ge,pe){--ge._eventsCount===0?ge._events=new ee:delete ge._events[pe]}function Q(){this._events=new ee,this._eventsCount=0}Q.prototype.eventNames=function(){var pe=[],Ce,he;if(this._eventsCount===0)return pe;for(he in Ce=this._events)G.call(Ce,he)&&pe.push(D?he.slice(1):he);return Object.getOwnPropertySymbols?pe.concat(Object.getOwnPropertySymbols(Ce)):pe},Q.prototype.listeners=function(pe){var Ce=D?D+pe:pe,he=this._events[Ce];if(!he)return[];if(he.fn)return[he.fn];for(var st=0,re=he.length,Se=new Array(re);st<re;st++)Se[st]=he[st].fn;return Se},Q.prototype.listenerCount=function(pe){var Ce=D?D+pe:pe,he=this._events[Ce];return he?he.fn?1:he.length:0},Q.prototype.emit=function(pe,Ce,he,st,re,Se){var se=D?D+pe:pe;if(!this._events[se])return!1;var de=this._events[se],xe=arguments.length,le,Ue;if(de.fn){switch(de.once&&this.removeListener(pe,de.fn,void 0,!0),xe){case 1:return de.fn.call(de.context),!0;case 2:return de.fn.call(de.context,Ce),!0;case 3:return de.fn.call(de.context,Ce,he),!0;case 4:return de.fn.call(de.context,Ce,he,st),!0;case 5:return de.fn.call(de.context,Ce,he,st,re),!0;case 6:return de.fn.call(de.context,Ce,he,st,re,Se),!0}for(Ue=1,le=new Array(xe-1);Ue<xe;Ue++)le[Ue-1]=arguments[Ue];de.fn.apply(de.context,le)}else{var Et=de.length,mt;for(Ue=0;Ue<Et;Ue++)switch(de[Ue].once&&this.removeListener(pe,de[Ue].fn,void 0,!0),xe){case 1:de[Ue].fn.call(de[Ue].context);break;case 2:de[Ue].fn.call(de[Ue].context,Ce);break;case 3:de[Ue].fn.call(de[Ue].context,Ce,he);break;case 4:de[Ue].fn.call(de[Ue].context,Ce,he,st);break;default:if(!le)for(mt=1,le=new Array(xe-1);mt<xe;mt++)le[mt-1]=arguments[mt];de[Ue].fn.apply(de[Ue].context,le)}}return!0},Q.prototype.on=function(pe,Ce,he){return T(this,pe,Ce,he,!1)},Q.prototype.once=function(pe,Ce,he){return T(this,pe,Ce,he,!0)},Q.prototype.removeListener=function(pe,Ce,he,st){var re=D?D+pe:pe;if(!this._events[re])return this;if(!Ce)return ne(this,re),this;var Se=this._events[re];if(Se.fn)Se.fn===Ce&&(!st||Se.once)&&(!he||Se.context===he)&&ne(this,re);else{for(var se=0,de=[],xe=Se.length;se<xe;se++)(Se[se].fn!==Ce||st&&!Se[se].once||he&&Se[se].context!==he)&&de.push(Se[se]);de.length?this._events[re]=de.length===1?de[0]:de:ne(this,re)}return this},Q.prototype.removeAllListeners=function(pe){var Ce;return pe?(Ce=D?D+pe:pe,this._events[Ce]&&ne(this,Ce)):(this._events=new ee,this._eventsCount=0),this},Q.prototype.off=Q.prototype.removeListener,Q.prototype.addListener=Q.prototype.on,Q.prefixed=D,Q.EventEmitter=Q,It.exports=Q},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(It){try{let he=function(){Q||(Q=!0,T())},st=function(){try{ne.documentElement.doScroll("left")}catch(re){return void setTimeout(st,50)}he()};var pe=he,Ce=st,D=(D=document.getElementsByTagName("script"))[D.length-1],G=D.getAttribute("data-injectcss"),D=D.getAttribute("data-disable-injectsvg");if(!D){var ee,ae,T,ne,Q,ge=function(Se,se){se.parentNode.insertBefore(Se,se)};if(G&&!It.__iconfont__svg__cssinject__){It.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(re){console&&console.log(re)}}ee=function(){var Se,se=document.createElement("div");se.innerHTML=It._iconfont_svg_string_3580659,(se=se.getElementsByTagName("svg")[0])&&(se.setAttribute("aria-hidden","true"),se.style.position="absolute",se.style.width=0,se.style.height=0,se.style.overflow="hidden",se=se,(Se=document.body).firstChild?ge(se,Se.firstChild):Se.appendChild(se))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(ee,0):(ae=function(){document.removeEventListener("DOMContentLoaded",ae,!1),ee()},document.addEventListener("DOMContentLoaded",ae,!1)):document.attachEvent&&(T=ee,ne=It.document,Q=!1,st(),ne.onreadystatechange=function(){ne.readyState=="complete"&&(ne.onreadystatechange=null,he())})}}catch(he){}}(window)},88120:function(It,G,D){"use strict";D.d(G,{GC:function(){return yt},h0:function(){return bn},lv:function(){return Ut},lo:function(){return Tn},kw:function(){return lr},Or:function(){return ln},KD:function(){return on},I9:function(){return Ee},lE:function(){return Fe},d:function(){return En},n3:function(){return Eh},vY:function(){return B},P7:function(){return As},yn:function(){return Xe},ee:function(){return be},v2:function(){return Zs},e7:function(){return qo},Hp:function(){return xh},gl:function(){return pe},cO:function(){return Il},Vb:function(){return Ue}});var ee=D(1413),ae=D(15671),T=D(43144),ne=D(4942),Q=D(57059),ge=function(Z){return Z.Normal="normal",Z.PostProcessing="post-processing",Z}({}),pe=function(Z){return Z[Z.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Z[Z.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Z[Z.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Z[Z.POINTS=0]="POINTS",Z[Z.LINES=1]="LINES",Z[Z.LINE_LOOP=2]="LINE_LOOP",Z[Z.LINE_STRIP=3]="LINE_STRIP",Z[Z.TRIANGLES=4]="TRIANGLES",Z[Z.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Z[Z.TRIANGLE_FAN=6]="TRIANGLE_FAN",Z[Z.ZERO=0]="ZERO",Z[Z.ONE=1]="ONE",Z[Z.SRC_COLOR=768]="SRC_COLOR",Z[Z.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Z[Z.SRC_ALPHA=770]="SRC_ALPHA",Z[Z.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Z[Z.DST_ALPHA=772]="DST_ALPHA",Z[Z.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Z[Z.DST_COLOR=774]="DST_COLOR",Z[Z.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Z[Z.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Z[Z.FUNC_ADD=32774]="FUNC_ADD",Z[Z.BLEND_EQUATION=32777]="BLEND_EQUATION",Z[Z.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Z[Z.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Z[Z.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Z[Z.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Z[Z.MAX_EXT=32776]="MAX_EXT",Z[Z.MIN_EXT=32775]="MIN_EXT",Z[Z.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Z[Z.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Z[Z.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Z[Z.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Z[Z.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Z[Z.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Z[Z.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Z[Z.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Z[Z.BLEND_COLOR=32773]="BLEND_COLOR",Z[Z.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Z[Z.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Z[Z.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Z[Z.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Z[Z.STREAM_DRAW=35040]="STREAM_DRAW",Z[Z.STATIC_DRAW=35044]="STATIC_DRAW",Z[Z.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Z[Z.BUFFER_SIZE=34660]="BUFFER_SIZE",Z[Z.BUFFER_USAGE=34661]="BUFFER_USAGE",Z[Z.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Z[Z.FRONT=1028]="FRONT",Z[Z.BACK=1029]="BACK",Z[Z.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Z[Z.CULL_FACE=2884]="CULL_FACE",Z[Z.BLEND=3042]="BLEND",Z[Z.DITHER=3024]="DITHER",Z[Z.STENCIL_TEST=2960]="STENCIL_TEST",Z[Z.DEPTH_TEST=2929]="DEPTH_TEST",Z[Z.SCISSOR_TEST=3089]="SCISSOR_TEST",Z[Z.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Z[Z.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Z[Z.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Z[Z.NO_ERROR=0]="NO_ERROR",Z[Z.INVALID_ENUM=1280]="INVALID_ENUM",Z[Z.INVALID_VALUE=1281]="INVALID_VALUE",Z[Z.INVALID_OPERATION=1282]="INVALID_OPERATION",Z[Z.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Z[Z.CW=2304]="CW",Z[Z.CCW=2305]="CCW",Z[Z.LINE_WIDTH=2849]="LINE_WIDTH",Z[Z.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Z[Z.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Z[Z.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Z[Z.FRONT_FACE=2886]="FRONT_FACE",Z[Z.DEPTH_RANGE=2928]="DEPTH_RANGE",Z[Z.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Z[Z.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Z[Z.DEPTH_FUNC=2932]="DEPTH_FUNC",Z[Z.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Z[Z.STENCIL_FUNC=2962]="STENCIL_FUNC",Z[Z.STENCIL_FAIL=2964]="STENCIL_FAIL",Z[Z.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Z[Z.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Z[Z.STENCIL_REF=2967]="STENCIL_REF",Z[Z.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Z[Z.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Z[Z.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Z[Z.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Z[Z.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Z[Z.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Z[Z.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Z[Z.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Z[Z.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Z[Z.VIEWPORT=2978]="VIEWPORT",Z[Z.SCISSOR_BOX=3088]="SCISSOR_BOX",Z[Z.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Z[Z.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Z[Z.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Z[Z.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Z[Z.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Z[Z.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Z[Z.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Z[Z.RED_BITS=3410]="RED_BITS",Z[Z.GREEN_BITS=3411]="GREEN_BITS",Z[Z.BLUE_BITS=3412]="BLUE_BITS",Z[Z.ALPHA_BITS=3413]="ALPHA_BITS",Z[Z.DEPTH_BITS=3414]="DEPTH_BITS",Z[Z.STENCIL_BITS=3415]="STENCIL_BITS",Z[Z.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Z[Z.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Z[Z.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Z[Z.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Z[Z.SAMPLES=32937]="SAMPLES",Z[Z.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Z[Z.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Z[Z.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Z[Z.DONT_CARE=4352]="DONT_CARE",Z[Z.FASTEST=4353]="FASTEST",Z[Z.NICEST=4354]="NICEST",Z[Z.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Z[Z.BYTE=5120]="BYTE",Z[Z.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Z[Z.SHORT=5122]="SHORT",Z[Z.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Z[Z.INT=5124]="INT",Z[Z.UNSIGNED_INT=5125]="UNSIGNED_INT",Z[Z.FLOAT=5126]="FLOAT",Z[Z.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Z[Z.ALPHA=6406]="ALPHA",Z[Z.RGB=6407]="RGB",Z[Z.RGBA=6408]="RGBA",Z[Z.LUMINANCE=6409]="LUMINANCE",Z[Z.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Z[Z.RED=6403]="RED",Z[Z.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Z[Z.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Z[Z.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Z[Z.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Z[Z.VERTEX_SHADER=35633]="VERTEX_SHADER",Z[Z.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Z[Z.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Z[Z.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Z[Z.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Z[Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Z[Z.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Z[Z.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Z[Z.SHADER_TYPE=35663]="SHADER_TYPE",Z[Z.DELETE_STATUS=35712]="DELETE_STATUS",Z[Z.LINK_STATUS=35714]="LINK_STATUS",Z[Z.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Z[Z.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Z[Z.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Z[Z.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Z[Z.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Z[Z.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Z[Z.NEVER=512]="NEVER",Z[Z.LESS=513]="LESS",Z[Z.EQUAL=514]="EQUAL",Z[Z.LEQUAL=515]="LEQUAL",Z[Z.GREATER=516]="GREATER",Z[Z.NOTEQUAL=517]="NOTEQUAL",Z[Z.GEQUAL=518]="GEQUAL",Z[Z.ALWAYS=519]="ALWAYS",Z[Z.KEEP=7680]="KEEP",Z[Z.REPLACE=7681]="REPLACE",Z[Z.INCR=7682]="INCR",Z[Z.DECR=7683]="DECR",Z[Z.INVERT=5386]="INVERT",Z[Z.INCR_WRAP=34055]="INCR_WRAP",Z[Z.DECR_WRAP=34056]="DECR_WRAP",Z[Z.VENDOR=7936]="VENDOR",Z[Z.RENDERER=7937]="RENDERER",Z[Z.VERSION=7938]="VERSION",Z[Z.NEAREST=9728]="NEAREST",Z[Z.LINEAR=9729]="LINEAR",Z[Z.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Z[Z.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Z[Z.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Z[Z.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Z[Z.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Z[Z.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Z[Z.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Z[Z.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Z[Z.TEXTURE_2D=3553]="TEXTURE_2D",Z[Z.TEXTURE=5890]="TEXTURE",Z[Z.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Z[Z.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Z[Z.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Z[Z.TEXTURE0=33984]="TEXTURE0",Z[Z.TEXTURE1=33985]="TEXTURE1",Z[Z.TEXTURE2=33986]="TEXTURE2",Z[Z.TEXTURE3=33987]="TEXTURE3",Z[Z.TEXTURE4=33988]="TEXTURE4",Z[Z.TEXTURE5=33989]="TEXTURE5",Z[Z.TEXTURE6=33990]="TEXTURE6",Z[Z.TEXTURE7=33991]="TEXTURE7",Z[Z.TEXTURE8=33992]="TEXTURE8",Z[Z.TEXTURE9=33993]="TEXTURE9",Z[Z.TEXTURE10=33994]="TEXTURE10",Z[Z.TEXTURE11=33995]="TEXTURE11",Z[Z.TEXTURE12=33996]="TEXTURE12",Z[Z.TEXTURE13=33997]="TEXTURE13",Z[Z.TEXTURE14=33998]="TEXTURE14",Z[Z.TEXTURE15=33999]="TEXTURE15",Z[Z.TEXTURE16=34e3]="TEXTURE16",Z[Z.TEXTURE17=34001]="TEXTURE17",Z[Z.TEXTURE18=34002]="TEXTURE18",Z[Z.TEXTURE19=34003]="TEXTURE19",Z[Z.TEXTURE20=34004]="TEXTURE20",Z[Z.TEXTURE21=34005]="TEXTURE21",Z[Z.TEXTURE22=34006]="TEXTURE22",Z[Z.TEXTURE23=34007]="TEXTURE23",Z[Z.TEXTURE24=34008]="TEXTURE24",Z[Z.TEXTURE25=34009]="TEXTURE25",Z[Z.TEXTURE26=34010]="TEXTURE26",Z[Z.TEXTURE27=34011]="TEXTURE27",Z[Z.TEXTURE28=34012]="TEXTURE28",Z[Z.TEXTURE29=34013]="TEXTURE29",Z[Z.TEXTURE30=34014]="TEXTURE30",Z[Z.TEXTURE31=34015]="TEXTURE31",Z[Z.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Z[Z.REPEAT=10497]="REPEAT",Z[Z.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Z[Z.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Z[Z.FLOAT_VEC2=35664]="FLOAT_VEC2",Z[Z.FLOAT_VEC3=35665]="FLOAT_VEC3",Z[Z.FLOAT_VEC4=35666]="FLOAT_VEC4",Z[Z.INT_VEC2=35667]="INT_VEC2",Z[Z.INT_VEC3=35668]="INT_VEC3",Z[Z.INT_VEC4=35669]="INT_VEC4",Z[Z.BOOL=35670]="BOOL",Z[Z.BOOL_VEC2=35671]="BOOL_VEC2",Z[Z.BOOL_VEC3=35672]="BOOL_VEC3",Z[Z.BOOL_VEC4=35673]="BOOL_VEC4",Z[Z.FLOAT_MAT2=35674]="FLOAT_MAT2",Z[Z.FLOAT_MAT3=35675]="FLOAT_MAT3",Z[Z.FLOAT_MAT4=35676]="FLOAT_MAT4",Z[Z.SAMPLER_2D=35678]="SAMPLER_2D",Z[Z.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Z[Z.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Z[Z.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Z[Z.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Z[Z.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Z[Z.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Z[Z.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Z[Z.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Z[Z.COMPILE_STATUS=35713]="COMPILE_STATUS",Z[Z.LOW_FLOAT=36336]="LOW_FLOAT",Z[Z.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Z[Z.HIGH_FLOAT=36338]="HIGH_FLOAT",Z[Z.LOW_INT=36339]="LOW_INT",Z[Z.MEDIUM_INT=36340]="MEDIUM_INT",Z[Z.HIGH_INT=36341]="HIGH_INT",Z[Z.FRAMEBUFFER=36160]="FRAMEBUFFER",Z[Z.RENDERBUFFER=36161]="RENDERBUFFER",Z[Z.RGBA4=32854]="RGBA4",Z[Z.RGB5_A1=32855]="RGB5_A1",Z[Z.RGB565=36194]="RGB565",Z[Z.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Z[Z.STENCIL_INDEX=6401]="STENCIL_INDEX",Z[Z.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Z[Z.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Z[Z.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Z[Z.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Z[Z.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Z[Z.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Z[Z.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Z[Z.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Z[Z.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Z[Z.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Z[Z.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Z[Z.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Z[Z.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Z[Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Z[Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Z[Z.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Z[Z.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Z[Z.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Z[Z.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Z[Z.NONE=0]="NONE",Z[Z.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Z[Z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Z[Z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Z[Z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Z[Z.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Z[Z.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Z[Z.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Z[Z.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Z[Z.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Z[Z.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Z[Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Z[Z.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Z[Z.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Z[Z.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Z}({}),Ce=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,he=Q.rU.camelCase,st=Q.rU.isNil,re=Q.rU.upperFirst,Se=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"shaderModuleService",void 0),(0,ne.Z)(this,"rendererService",void 0),(0,ne.Z)(this,"config",void 0),(0,ne.Z)(this,"quad",Ce),(0,ne.Z)(this,"enabled",!0),(0,ne.Z)(this,"renderToScreen",!1),(0,ne.Z)(this,"model",void 0),(0,ne.Z)(this,"name",void 0),(0,ne.Z)(this,"optionsToUpdate",{})}return(0,T.Z)(Z,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(Ne){this.name=Ne}},{key:"getType",value:function(){return ge.PostProcessing}},{key:"init",value:function(Ne,$e){this.config=$e,this.rendererService=Ne.getContainer().rendererService,this.shaderModuleService=Ne.getContainer().shaderModuleService;var Oe=this.rendererService,lt=Oe.createAttribute,un=Oe.createBuffer,Zn=Oe.createModel,mn=this.setupShaders(),jn=mn.vs,zr=mn.fs,li=mn.uniforms;this.model=Zn({vs:jn,fs:zr,attributes:{a_Position:lt({buffer:un({data:[-4,-4,4,-4,0,4],type:pe.FLOAT}),size:2})},uniforms:(0,ee.Z)((0,ee.Z)({u_Texture:null},li),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(Ne,$e){var Oe=this,lt=Ne.multiPassRenderer.getPostProcessor(),un=this.rendererService,Zn=un.useFramebuffer,mn=un.getViewportSize,jn=un.clear,zr=mn(),li=zr.width,Gi=zr.height;Zn(this.renderToScreen?null:lt.getWriteFBO(),function(){jn({framebuffer:lt.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var na=(0,ee.Z)({u_BloomFinal:0,u_Texture:lt.getReadFBO(),u_ViewportSize:[li,Gi]},Oe.convertOptionsToUniforms(Oe.optionsToUpdate));$e&&(na.u_BloomFinal=1,na.u_Texture2=$e),Oe.model.draw({uniforms:na})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(Ne){this.enabled=Ne}},{key:"setRenderToScreen",value:function(Ne){this.renderToScreen=Ne}},{key:"updateOptions",value:function(Ne){this.optionsToUpdate=(0,ee.Z)((0,ee.Z)({},this.optionsToUpdate),Ne)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(Ne){var $e={};return Object.keys(Ne).forEach(function(Oe){st(Ne[Oe])||($e["u_".concat(re(he(Oe)))]=Ne[Oe])}),$e}}]),Z}();function se(Z){var Vt=0;switch(Z){case"vec2":case"ivec2":Vt=2;break;case"vec3":case"ivec3":Vt=3;break;case"vec4":case"ivec4":case"mat2":Vt=4;break;case"mat3":Vt=9;break;case"mat4":Vt=16;break;default:}return Vt}var de=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function xe(Z){var Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ne={};return Z=Z.replace(de,function($e,Oe,lt){var un=lt.split(":"),Zn=un[0].trim(),mn="";switch(un.length>1&&(mn=un[1].trim()),Oe){case"bool":mn=mn==="true";break;case"float":case"int":mn=Number(mn);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":mn?mn=mn.replace("[","").replace("]","").split(",").reduce(function(jn,zr){return jn.push(Number(zr.trim())),jn},[]):mn=new Array(se(Oe)).fill(0);break;default:}return Ne[Zn]=mn,"".concat(Vt?"uniform ":"").concat(Oe," ").concat(Zn,`;
`)}),{content:Z,uniforms:Ne}}function le(Z){var Vt=xe(Z,!0),Ne=Vt.content,$e=Vt.uniforms;return Ne=Ne.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,function(Oe,lt,un){un=un.trim().replace(/^.*$/gm,function(zr){return"uniform ".concat(zr)});var Zn=xe(un),mn=Zn.content,jn=Zn.uniforms;return Object.assign($e,jn),"".concat(lt,`{
`).concat(mn,`
};`)}),{content:Ne,uniforms:$e}}function Ue(Z){var Vt={};return Z.replace(de,function(Ne,$e,Oe){var lt=Oe.trim();return Vt[lt]?"":(Vt[lt]=!0,"uniform ".concat($e," ").concat(lt,`;
`))})}var Et=null;function mt(Z){return Et.indexOf(Z)}var Wt=Q.rU.clamp,Rt=2,Tt=4,Ze=64,Ie=128,Qe=256,it=512,De=8192,cn=16384,qe=32768,Pt=null,Le=131072,pt=262144,at=524288,nt=1048576,Ct=2097152,rt=4194304,vt=8388608,Ve=16777216,hn=null;function yn(Z,Vt){return Z=Wt(Math.floor(Z),0,255),Vt=Wt(Math.floor(Vt),0,255),256*Z+Vt}function ir(Z){var Vt=Z.color,Ne=Z.radius,$e=Z.tileX,Oe=Z.tileY,lt=Z.shape,un=Z.opacity,Zn=Z.stroke,mn=Z.strokeWidth,jn=Z.strokeOpacity,zr=[],li=[],Gi=[],na=[yn(Vt[0],Vt[1]),yn(Vt[2],Vt[3])],ga=[yn(Zn[0],Zn[1]),yn(Zn[2],Zn[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(La){var ui=_slicedToArray(La,2),Ka=ui[0],uo=ui[1];zr.push([].concat(na,[(Ka+1)*vt+(uo+1)*Ct+getShapeIndex(lt)*Le+Ne,($e+512)*at+(Oe+512)*Ze])),li.push([].concat(ga,[mn,jn])),Gi.push([un,0,0,0])}),{packedBuffer:zr,packedBuffer2:li,packedBuffer3:Gi}}function Qn(Z,Vt){if(Z===0&&!Vt)return 0;if(Z===1&&Vt)return 4294967295;var Ne=Vt?1:0,$e=Math.floor(Z*127);return $e*hn+Ne*Ve+$e*Le+Ne*Pt+$e*it+Ne*Qe+$e*Rt+Ne}var Ut={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},En=function(Z){return Z.TOPRIGHT="topright",Z.TOPLEFT="topleft",Z.BOTTOMRIGHT="bottomright",Z.BOTTOMLEFT="bottomleft",Z.TOPCENTER="topcenter",Z.BOTTOMCENTER="bottomcenter",Z.LEFTCENTER="leftcenter",Z.RIGHTCENTER="rightcenter",Z.LEFTTOP="lefttop",Z.RIGHTTOP="righttop",Z.LEFTBOTTOM="leftbottom",Z.RIGHTBOTTOM="rightbottom",Z}({}),Tn=function(Z){return Z[Z.LNGLAT=1]="LNGLAT",Z[Z.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",Z[Z.VECTOR_TILE=3]="VECTOR_TILE",Z[Z.IDENTITY=4]="IDENTITY",Z[Z.P20=5]="P20",Z[Z.P20_OFFSET=6]="P20_OFFSET",Z[Z.METER_OFFSET=7]="METER_OFFSET",Z[Z.P20_2=8]="P20_2",Z}({}),lr={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},ln={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},Lt=function(Z){return Z.Hover="hover",Z.Click="click",Z.Select="select",Z.Active="active",Z.Drag="drag",Z}({}),bn=function(Z){return Z.normal="normal",Z.additive="additive",Z.subtractive="subtractive",Z.min="min",Z.max="max",Z.none="none",Z}({}),Xe=function(Z){return Z.MULTIPLE="MULTIPLE",Z.SINGLE="SINGLE",Z}({}),Fe=function(Z){return Z.AND="and",Z.OR="or",Z}({}),on=function(Z){return Z.INIT="init",Z.UPDATE="update",Z}({}),B=function(Z){return Z.LINEAR="linear",Z.SEQUENTIAL="sequential",Z.POWER="power",Z.LOG="log",Z.IDENTITY="identity",Z.TIME="time",Z.QUANTILE="quantile",Z.QUANTIZE="quantize",Z.THRESHOLD="threshold",Z.CAT="cat",Z.DIVERGING="diverging",Z.CUSTOM="threshold",Z}({}),be=function(Z){return Z.CONSTANT="constant",Z.VARIABLE="variable",Z}({}),yt=function(Z){return Z[Z.Attribute=0]="Attribute",Z[Z.InstancedAttribute=1]="InstancedAttribute",Z[Z.Uniform=2]="Uniform",Z}({}),Ee=["mapload","mapchange","mapAfterFrameChange"],Zt=D(97326),_n=D(60136),Sn=D(82963),Bn=D(61120),or=D(49296),dr=D.n(or),gr=D(26729),wr=D.n(gr);function Ar(Z,Vt){var Ne=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!Ne){if(Array.isArray(Z)||(Ne=Ir(Z))||Vt&&Z&&typeof Z.length=="number"){Ne&&(Z=Ne);var $e=0,Oe=function(){};return{s:Oe,n:function(){return $e>=Z.length?{done:!0}:{done:!1,value:Z[$e++]}},e:function(jn){throw jn},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt=!0,un=!1,Zn;return{s:function(){Ne=Ne.call(Z)},n:function(){var jn=Ne.next();return lt=jn.done,jn},e:function(jn){un=!0,Zn=jn},f:function(){try{!lt&&Ne.return!=null&&Ne.return()}finally{if(un)throw Zn}}}}function Ir(Z,Vt){if(Z){if(typeof Z=="string")return Nr(Z,Vt);var Ne=Object.prototype.toString.call(Z).slice(8,-1);if(Ne==="Object"&&Z.constructor&&(Ne=Z.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Z);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Nr(Z,Vt)}}function Nr(Z,Vt){(Vt==null||Vt>Z.length)&&(Vt=Z.length);for(var Ne=0,$e=new Array(Vt);Ne<Vt;Ne++)$e[Ne]=Z[Ne];return $e}var Yr=30;function bt(Z){var Vt=Z.characterSet,Ne=Z.getFontWidth,$e=Z.fontHeight,Oe=Z.buffer,lt=Z.maxCanvasWidth,un=Z.mapping,Zn=un===void 0?{}:un,mn=Z.xOffset,jn=mn===void 0?0:mn,zr=Z.yOffset,li=zr===void 0?0:zr,Gi=0,na=jn;Array.from(Vt).forEach(function(La,ui){if(!Zn[La]){var Ka=Ne(La,ui);na+Yr>lt&&(na=0,Gi++),Zn[La]={x:na,y:li+Gi*Yr,width:Yr,height:Yr,advance:Ka},na+=Yr}});var ga=$e+Oe*2;return{mapping:Zn,xOffset:na,yOffset:li+Gi*ga,canvasHeight:Ke(li+(Gi+1)*ga)}}function ve(Z,Vt,Ne){var $e=0,Oe=0,lt=0,un=[],Zn={},mn=Ar(Z),jn;try{for(mn.s();!(jn=mn.n()).done;){var zr=jn.value;if(!Zn[zr.id]){var li=zr.size;$e+li+Vt>Ne&&(ye(Zn,un,Oe),$e=0,Oe=lt+Oe+Vt,lt=0,un=[]),un.push({icon:zr,xOffset:$e}),$e=$e+li+Vt,lt=Math.max(lt,li)}}}catch(na){mn.e(na)}finally{mn.f()}un.length>0&&ye(Zn,un,Oe);var Gi=Ke(lt+Oe+Vt);return{mapping:Zn,canvasHeight:Gi}}function ye(Z,Vt,Ne){var $e=Ar(Vt),Oe;try{for($e.s();!(Oe=$e.n()).done;){var lt=Oe.value,un=lt.icon,Zn=lt.xOffset;Z[un.id]=(0,ee.Z)((0,ee.Z)({},un),{},{x:Zn,y:Ne,image:un.image,width:un.width,height:un.height})}}catch(mn){$e.e(mn)}finally{$e.f()}}function Ke(Z){return Math.pow(2,Math.ceil(Math.log2(Z)))}function ht(Z,Vt){var Ne=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!Ne){if(Array.isArray(Z)||(Ne=xt(Z))||Vt&&Z&&typeof Z.length=="number"){Ne&&(Z=Ne);var $e=0,Oe=function(){};return{s:Oe,n:function(){return $e>=Z.length?{done:!0}:{done:!1,value:Z[$e++]}},e:function(jn){throw jn},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt=!0,un=!1,Zn;return{s:function(){Ne=Ne.call(Z)},n:function(){var jn=Ne.next();return lt=jn.done,jn},e:function(jn){un=!0,Zn=jn},f:function(){try{!lt&&Ne.return!=null&&Ne.return()}finally{if(un)throw Zn}}}}function xt(Z,Vt){if(Z){if(typeof Z=="string")return Jt(Z,Vt);var Ne=Object.prototype.toString.call(Z).slice(8,-1);if(Ne==="Object"&&Z.constructor&&(Ne=Z.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Z);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Jt(Z,Vt)}}function Jt(Z,Vt){(Vt==null||Vt>Z.length)&&(Vt=Z.length);for(var Ne=0,$e=new Array(Vt);Ne<Vt;Ne++)$e[Ne]=Z[Ne];return $e}function Dn(Z){var Vt=fr();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function fr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var In=ei(),ke="sans-serif",Pe="normal",Ge=24,gt=3,Bt=.25,an=8,An=1024,kt=1,Dt=1,dn=3,He=null;function ei(){for(var Z=[],Vt=32;Vt<128;Vt++)Z.push(String.fromCharCode(Vt));return Z}function Tr(Z,Vt,Ne,$e){Z.font="".concat($e," ").concat(Ne,"px ").concat(Vt),Z.fillStyle="black",Z.textBaseline="middle"}function ii(Z,Vt){for(var Ne=0;Ne<Z.length;Ne++)Vt.data[4*Ne+3]=Z[Ne]}var Di=function(Z){(0,_n.Z)(Ne,Z);var Vt=Dn(Ne);function Ne(){var $e;(0,ae.Z)(this,Ne);for(var Oe=arguments.length,lt=new Array(Oe),un=0;un<Oe;un++)lt[un]=arguments[un];return $e=Vt.call.apply(Vt,[this].concat(lt)),(0,ne.Z)((0,Zt.Z)($e),"fontAtlas",void 0),(0,ne.Z)((0,Zt.Z)($e),"iconFontMap",void 0),(0,ne.Z)((0,Zt.Z)($e),"iconFontGlyphs",{}),(0,ne.Z)((0,Zt.Z)($e),"fontOptions",void 0),(0,ne.Z)((0,Zt.Z)($e),"key",void 0),(0,ne.Z)((0,Zt.Z)($e),"cache",new Q.z6(dn)),$e}return(0,T.Z)(Ne,[{key:"scale",get:function(){return Dt}},{key:"canvas",get:function(){var Oe=this.cache.get(this.key);return Oe&&Oe.data}},{key:"mapping",get:function(){var Oe=this.cache.get(this.key);return Oe&&Oe.mapping||{}}},{key:"getCanvasByKey",value:function(Oe){var lt=this.cache.get(Oe);return lt&&lt.data}},{key:"getMappingByKey",value:function(Oe){var lt=this.cache.get(Oe);return lt&&lt.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:ke,fontWeight:Pe,characterSet:In,fontSize:Ge,buffer:gt,sdf:!0,cutoff:Bt,radius:an,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(Oe){var lt=this;Oe.forEach(function(un){lt.iconFontGlyphs[un.name]=un.unicode})}},{key:"addIconFont",value:function(Oe,lt){this.iconFontMap.set(Oe,lt)}},{key:"getIconFontKey",value:function(Oe){return this.iconFontMap.get(Oe)||Oe}},{key:"getGlyph",value:function(Oe){return this.iconFontGlyphs[Oe]?String.fromCharCode(parseInt(this.iconFontGlyphs[Oe],16)):""}},{key:"setFontOptions",value:function(Oe){this.fontOptions=(0,ee.Z)((0,ee.Z)({},this.fontOptions),Oe),this.key=this.getKey();var lt=this.getNewChars(this.key,this.fontOptions.characterSet),un=this.cache.get(this.key);if(!(un&&lt.length===0)){var Zn=this.generateFontAtlas(this.key,lt,un);this.fontAtlas=Zn,this.cache.set(this.key,Zn)}}},{key:"addFontFace",value:function(Oe,lt){var un=this,Zn=document.createElement("style");Zn.type="text/css",Zn.innerText=`
        @font-face{
            font-family: '`.concat(Oe,`';
            src: url('`).concat(lt,`') format('woff2'),
            url('`).concat(lt,`') format('woff'),
            url('`).concat(lt,`') format('truetype');
        }`),Zn.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(Oe),"L7text"),document.fonts.ready.then(function(){un.emit("fontloaded",{fontFamily:Oe})})}catch(mn){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(mn)}},document.getElementsByTagName("head")[0].appendChild(Zn)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(Oe,lt,un){var Zn=this.fontOptions,mn=Zn.fontFamily,jn=Zn.fontWeight,zr=Zn.fontSize,li=Zn.buffer,Gi=Zn.sdf,na=Zn.radius,ga=Zn.cutoff,La=Zn.iconfont,ui=un&&un.data;ui||(ui=window.document.createElement("canvas"),ui.width=An);var Ka=ui.getContext("2d",{willReadFrequently:!0});Tr(Ka,mn,zr,jn);var uo=bt((0,ee.Z)({getFontWidth:function(qs){return Ka.measureText(qs).width},fontHeight:zr*Dt,buffer:li,characterSet:lt,maxCanvasWidth:An},un&&{mapping:un.mapping,xOffset:un.xOffset,yOffset:un.yOffset})),no=uo.mapping,as=uo.canvasHeight,Es=uo.xOffset,vs=uo.yOffset,Ko=Ka.getImageData(0,0,ui.width,ui.height);if(ui.height=as,Ka.putImageData(Ko,0,0),Tr(Ka,mn,zr,jn),Gi){var _o=new(dr())(zr,li,na,ga,mn,jn),oa=Ka.getImageData(0,0,_o.size,_o.size),ra=ht(lt),Qo;try{for(ra.s();!(Qo=ra.n()).done;){var Jo=Qo.value;if(La){var No=String.fromCharCode(parseInt(Jo.replace("&#x","").replace(";",""),16)),os=_o.draw(No);ii(os,oa)}else ii(_o.draw(Jo),oa);Ka.putImageData(oa,no[Jo].x,no[Jo].y)}}catch(jo){ra.e(jo)}finally{ra.f()}}else{var Fo=ht(lt),$u;try{for(Fo.s();!($u=Fo.n()).done;){var gf=$u.value;Ka.fillText(gf,no[gf].x,no[gf].y+zr*kt)}}catch(jo){Fo.e(jo)}finally{Fo.f()}}return{xOffset:Es,yOffset:vs,mapping:no,data:ui,width:ui.width,height:ui.height}}},{key:"getKey",value:function(){var Oe=this.fontOptions,lt=Oe.fontFamily,un=Oe.fontWeight;return"".concat(lt,"_").concat(un)}},{key:"getNewChars",value:function(Oe,lt){var un=this.cache.get(Oe);if(!un)return lt;var Zn=[],mn=un.mapping,jn=new Set(Object.keys(mn)),zr=new Set(lt);return zr.forEach(function(li){jn.has(li)||Zn.push(li)}),Zn}}]),Ne}(gr.EventEmitter),vi=D(15861),Br=D(64687),Gr=D.n(Br);function bi(Z){var Vt=Ni();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Ni(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Qa=3,Xi=1024,ao=64,ko=function(Z){(0,_n.Z)(Ne,Z);var Vt=bi(Ne);function Ne(){var $e;(0,ae.Z)(this,Ne);for(var Oe=arguments.length,lt=new Array(Oe),un=0;un<Oe;un++)lt[un]=arguments[un];return $e=Vt.call.apply(Vt,[this].concat(lt)),(0,ne.Z)((0,Zt.Z)($e),"canvasHeight",128),(0,ne.Z)((0,Zt.Z)($e),"texture",void 0),(0,ne.Z)((0,Zt.Z)($e),"canvas",void 0),(0,ne.Z)((0,Zt.Z)($e),"iconData",void 0),(0,ne.Z)((0,Zt.Z)($e),"iconMap",void 0),(0,ne.Z)((0,Zt.Z)($e),"ctx",void 0),(0,ne.Z)((0,Zt.Z)($e),"loadingImageCount",0),$e}return(0,T.Z)(Ne,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(un,Zn){var mn,jn;return Gr().wrap(function(li){for(;;)switch(li.prev=li.next){case 0:return mn=new Image,this.loadingImageCount++,this.hasImage(un)?console.warn("Image Id already exists"):this.iconData.push({id:un,size:ao}),this.updateIconMap(),li.next=6,this.loadImage(Zn);case 6:mn=li.sent,jn=this.iconData.find(function(Gi){return Gi.id===un}),jn&&(jn.image=mn,jn.width=mn.width,jn.height=mn.height),this.update();case 10:case"end":return li.stop()}},lt,this)}));function Oe(lt,un){return $e.apply(this,arguments)}return Oe}()},{key:"addImageMini",value:function(Oe,lt,un){var Zn=this,mn=un.getSceneConfig().canvas,jn=mn.createImage();if(this.loadingImageCount++,this.hasImage(Oe))throw new Error("Image Id already exists");this.iconData.push({id:Oe,size:ao}),this.updateIconMap(),this.loadImageMini(lt,mn).then(function(zr){jn=zr;var li=Zn.iconData.find(function(Gi){return Gi.id===Oe});li&&(li.image=jn,li.width=jn.width,li.height=jn.height),Zn.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(Oe){return this.iconMap.hasOwnProperty(Oe)}},{key:"removeImage",value:function(Oe){this.hasImage(Oe)&&(this.iconData=this.iconData.filter(function(lt){return lt.id!==Oe}),delete this.iconMap[Oe],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(Oe){return new Promise(function(lt,un){if(Oe instanceof HTMLImageElement){lt(Oe);return}var Zn=new Image;Zn.crossOrigin="anonymous",Zn.onload=function(){lt(Zn)},Zn.onerror=function(){un(new Error("Could not load image at "+Oe))},Zn.src=Oe instanceof File?URL.createObjectURL(Oe):Oe})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var Oe=this;this.canvas.width=Xi,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(lt){var un=Oe.iconMap[lt],Zn=un.x,mn=un.y,jn=un.image,zr=un.width,li=zr===void 0?64:zr,Gi=un.height,na=Gi===void 0?64:Gi,ga=Math.max(li,na),La=ga/ao,ui=na/La,Ka=li/La;jn&&Oe.ctx.drawImage(jn,Zn+(ao-Ka)/2,mn+(ao-ui)/2,Ka,ui)})}},{key:"updateIconMap",value:function(){var Oe=ve(this.iconData,Qa,Xi),lt=Oe.mapping,un=Oe.canvasHeight;this.iconMap=lt,this.canvasHeight=un}},{key:"loadImageMini",value:function(Oe,lt){return new Promise(function(un,Zn){var mn=lt.createImage();mn.crossOrigin="anonymous",mn.onload=function(){un(mn)},mn.onerror=function(){Zn(new Error("Could not load image at "+Oe))},mn.src=Oe})}}]),Ne}(gr.EventEmitter),Ba=D(97685),mi=D(85975),Je=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"viewport",void 0),(0,ne.Z)(this,"overridedViewProjectionMatrix",void 0),(0,ne.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,ne.Z)(this,"jitteredProjectionMatrix",void 0),(0,ne.Z)(this,"viewMatrixInverse",void 0),(0,ne.Z)(this,"cameraPosition",void 0)}return(0,T.Z)(Z,[{key:"init",value:function(){}},{key:"update",value:function(Ne){this.viewport=Ne,this.viewMatrixInverse=mi.create(),mi.invert(this.viewMatrixInverse,Ne.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Ne=this.viewport.getCenter(),$e=(0,Ba.Z)(Ne,2),Oe=$e[0],lt=$e[1];return[Oe,lt]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Ne,$e){return this.viewport.projectFlat(Ne,$e)}},{key:"setViewProjectionMatrix",value:function(Ne){this.overridedViewProjectionMatrix=Ne}},{key:"jitterProjectionMatrix",value:function(Ne,$e){var Oe=mi.fromTranslation(mi.create(),[Ne,$e,0]);this.jitteredProjectionMatrix=mi.multiply(mi.create(),Oe,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=mi.multiply(mi.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),Z}(),wt=D(74902);function Kt(Z,Vt){var Ne=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!Ne){if(Array.isArray(Z)||(Ne=Mn(Z))||Vt&&Z&&typeof Z.length=="number"){Ne&&(Z=Ne);var $e=0,Oe=function(){};return{s:Oe,n:function(){return $e>=Z.length?{done:!0}:{done:!1,value:Z[$e++]}},e:function(jn){throw jn},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt=!0,un=!1,Zn;return{s:function(){Ne=Ne.call(Z)},n:function(){var jn=Ne.next();return lt=jn.done,jn},e:function(jn){un=!0,Zn=jn},f:function(){try{!lt&&Ne.return!=null&&Ne.return()}finally{if(un)throw Zn}}}}function Mn(Z,Vt){if(Z){if(typeof Z=="string")return Yn(Z,Vt);var Ne=Object.prototype.toString.call(Z).slice(8,-1);if(Ne==="Object"&&Z.constructor&&(Ne=Z.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Z);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Yn(Z,Vt)}}function Yn(Z,Vt){(Vt==null||Vt>Z.length)&&(Vt=Z.length);for(var Ne=0,$e=new Array(Vt);Ne<Vt;Ne++)$e[Ne]=Z[Ne];return $e}var Gn={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},Ht=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"container",void 0),(0,ne.Z)(this,"controlCorners",void 0),(0,ne.Z)(this,"controlContainer",void 0),(0,ne.Z)(this,"scene",void 0),(0,ne.Z)(this,"mapsService",void 0),(0,ne.Z)(this,"controls",[]),(0,ne.Z)(this,"unAddControls",[])}return(0,T.Z)(Z,[{key:"init",value:function(Ne,$e){this.container=Ne.container,this.scene=$e,this.mapsService=$e.mapService,this.initControlPos()}},{key:"addControl",value:function(Ne,$e){var Oe=$e.mapService;Oe.map?(Ne.addTo(this.scene),this.controls.push(Ne)):this.unAddControls.push(Ne)}},{key:"getControlByName",value:function(Ne){return this.controls.find(function($e){return $e.controlOption.name===Ne})}},{key:"removeControl",value:function(Ne){var $e=this.controls.indexOf(Ne);return $e>-1&&this.controls.splice($e,1),Ne.remove(),this}},{key:"addControls",value:function(){var Ne=this;this.unAddControls.forEach(function($e){$e.addTo(Ne.scene),Ne.controls.push($e)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Ne=Kt(this.controls),$e;try{for(Ne.s();!($e=Ne.n()).done;){var Oe=$e.value;Oe.remove()}}catch(lt){Ne.e(lt)}finally{Ne.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Ne=this.controlCorners={},$e="l7-",Oe=this.controlContainer=Q.SO.create("div",$e+"control-container",this.container);function lt(){var Zn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],mn=Zn.map(function(jn){return $e+jn}).join(" ");Ne[Zn.filter(function(jn){return!["row","column"].includes(jn)}).join("")]=Q.SO.create("div",mn,Oe)}function un(Zn){var mn=Zn.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,wt.Z)(mn),[Gn[Zn]])}Object.values(En).forEach(function(Zn){lt(un(Zn))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var Ne in this.controlCorners)this.controlCorners[Ne]&&Q.SO.remove(this.controlCorners[Ne]);this.controlContainer&&Q.SO.remove(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var Ne=this,$e=window.MutationObserver;if($e)for(var Oe=function(){var mn=un[lt],jn=mn.match(/^(top|bottom)(left|right)$/);if(jn){var zr=(0,Ba.Z)(jn,3),li=zr[1],Gi=zr[2],na=Ne.controlCorners["".concat(li).concat(Gi)],ga=new $e(function(La){var ui=(0,Ba.Z)(La,1),Ka=ui[0].target;na&&(na.style[li]=Ka.clientHeight+"px")});ga.observe(Ne.controlCorners["".concat(Gi).concat(li)],{childList:!0,attributes:!0})}},lt=0,un=Object.keys(this.controlCorners);lt<un.length;lt++)Oe()}}]),Z}(),On=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"container",void 0),(0,ne.Z)(this,"scene",void 0),(0,ne.Z)(this,"mapsService",void 0),(0,ne.Z)(this,"markers",[]),(0,ne.Z)(this,"markerLayers",[]),(0,ne.Z)(this,"unAddMarkers",[]),(0,ne.Z)(this,"unAddMarkerLayers",[])}return(0,T.Z)(Z,[{key:"addMarkerLayer",value:function(Ne){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Ne),Ne.addTo(this.scene)):this.unAddMarkerLayers.push(Ne)}},{key:"removeMarkerLayer",value:function(Ne){Ne.destroy(),this.markerLayers.indexOf(Ne);var $e=this.markerLayers.indexOf(Ne);$e>-1&&this.markerLayers.splice($e,1)}},{key:"addMarker",value:function(Ne){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Ne),Ne.addTo(this.scene)):this.unAddMarkers.push(Ne)}},{key:"addMarkers",value:function(){var Ne=this;this.unAddMarkers.forEach(function($e){$e.addTo(Ne.scene),Ne.markers.push($e)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Ne=this;this.unAddMarkerLayers.forEach(function($e){Ne.markerLayers.push($e),$e.addTo(Ne.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Ne){Ne.remove(),this.markers.indexOf(Ne);var $e=this.markers.indexOf(Ne);$e>-1&&this.markers.splice($e,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Ne){this.scene=Ne,this.mapsService=Ne.mapService}},{key:"destroy",value:function(){this.markers.forEach(function(Ne){Ne.remove()}),this.markers=[],this.markerLayers.forEach(function(Ne){Ne.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Ne){Ne.destroy()}}]),Z}(),Cr=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"scene",void 0),(0,ne.Z)(this,"mapsService",void 0),(0,ne.Z)(this,"popups",[]),(0,ne.Z)(this,"unAddPopups",[])}return(0,T.Z)(Z,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(Ne){Ne!=null&&Ne.isOpen()&&Ne.remove();var $e=this.popups.indexOf(Ne);$e>-1&&this.popups.splice($e,1);var Oe=this.unAddPopups.indexOf(Ne);Oe>-1&&this.unAddPopups.splice(Oe,1)}},{key:"destroy",value:function(){this.popups.forEach(function(Ne){return Ne.remove()})}},{key:"addPopup",value:function(Ne){var $e=this;Ne&&Ne.getOptions().autoClose&&[].concat((0,wt.Z)(this.popups),(0,wt.Z)(this.unAddPopups)).forEach(function(Oe){Oe.getOptions().autoClose&&$e.removePopup(Oe)}),this.isMarkerReady?(Ne.addTo(this.scene),this.popups.push(Ne)):this.unAddPopups.push(Ne),Ne.on("close",function(){$e.removePopup(Ne)})}},{key:"initPopup",value:function(){var Ne=this;this.unAddPopups.length&&this.unAddPopups.forEach(function($e){Ne.addPopup($e),Ne.unAddPopups=[]})}},{key:"init",value:function(Ne){this.scene=Ne,this.mapsService=Ne.mapService}}]),Z}(),Er={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},gi=Er,aa=Q.rU.merge,ya={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},wi={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:Fe.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},sa=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"sceneConfigCache",{}),(0,ne.Z)(this,"layerConfigCache",{}),(0,ne.Z)(this,"layerAttributeConfigCache",{})}return(0,T.Z)(Z,[{key:"getSceneConfig",value:function(Ne){return this.sceneConfigCache[Ne]}},{key:"getSceneWarninfo",value:function(Ne){return gi[Ne]}},{key:"setSceneConfig",value:function(Ne,$e){this.sceneConfigCache[Ne]=(0,ee.Z)((0,ee.Z)({},ya),$e)}},{key:"getLayerConfig",value:function(Ne){return this.layerConfigCache[Ne]}},{key:"setLayerConfig",value:function(Ne,$e,Oe){this.layerConfigCache[$e]=(0,ee.Z)({},aa({},this.sceneConfigCache[Ne],wi,Oe))}},{key:"getAttributeConfig",value:function(Ne){return this.layerAttributeConfigCache[Ne]}},{key:"setAttributeConfig",value:function(Ne,$e){this.layerAttributeConfigCache[Ne]=(0,ee.Z)((0,ee.Z)({},this.layerAttributeConfigCache[Ne]),$e)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),Z}(),$i=D(98333),hi=Math.PI/180,fa=512,ea=4003e4;function ka(Z){var Vt=Z.latitude,Ne=Vt===void 0?0:Vt,$e=Z.zoom,Oe=$e===void 0?0:$e,lt=Z.scale,un=Z.highPrecision,Zn=un===void 0?!1:un,mn=Z.flipY,jn=mn===void 0?!1:mn;lt=lt!==void 0?lt:Math.pow(2,Oe);var zr={},li=fa*lt,Gi=Math.cos(Ne*hi),na=li/360,ga=na/Gi,La=li/ea/Gi;if(zr.pixelsPerMeter=[La,-La,La],zr.metersPerPixel=[1/La,-1/La,1/La],zr.pixelsPerDegree=[na,-ga,La],zr.degreesPerPixel=[1/na,-1/ga,1/La],Zn){var ui=hi*Math.tan(Ne*hi)/Gi,Ka=na*ui/2,uo=li/ea*ui,no=uo/ga*La;zr.pixelsPerDegree2=[0,-Ka,uo],zr.pixelsPerMeter2=[no,0,no],jn&&(zr.pixelsPerDegree2[1]=-zr.pixelsPerDegree2[1],zr.pixelsPerMeter2[1]=-zr.pixelsPerMeter2[1])}return jn&&(zr.pixelsPerMeter[1]=-zr.pixelsPerMeter[1],zr.metersPerPixel[1]=-zr.metersPerPixel[1],zr.pixelsPerDegree[1]=-zr.pixelsPerDegree[1],zr.degreesPerPixel[1]=-zr.degreesPerPixel[1]),zr}var Bi=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],_a=function(){function Z(Vt){(0,ae.Z)(this,Z),(0,ne.Z)(this,"needRefresh",!0),(0,ne.Z)(this,"coordinateSystem",void 0),(0,ne.Z)(this,"viewportCenter",void 0),(0,ne.Z)(this,"viewportCenterProjection",void 0),(0,ne.Z)(this,"pixelsPerDegree",void 0),(0,ne.Z)(this,"pixelsPerDegree2",void 0),(0,ne.Z)(this,"pixelsPerMeter",void 0),this.cameraService=Vt}return(0,T.Z)(Z,[{key:"refresh",value:function(Ne){var $e=this.cameraService.getZoom(),Oe=this.cameraService.getZoomScale(),lt=Ne||this.cameraService.getCenter(),un=ka({latitude:lt[1],zoom:$e}),Zn=un.pixelsPerMeter,mn=un.pixelsPerDegree;this.viewportCenter=lt,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Zn,this.pixelsPerDegree=mn,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Tn.LNGLAT||this.coordinateSystem===Tn.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Tn.LNGLAT_OFFSET?this.calculateLnglatOffset(lt,$e):this.coordinateSystem===Tn.P20_OFFSET&&this.calculateLnglatOffset(lt,$e,Oe,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Ne){this.coordinateSystem=Ne}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Ne,$e,Oe,lt){var un=ka({latitude:Ne[1],zoom:$e,scale:Oe,flipY:lt,highPrecision:!0}),Zn=un.pixelsPerMeter,mn=un.pixelsPerDegree,jn=un.pixelsPerDegree2,zr=this.cameraService.getViewMatrix(),li=this.cameraService.getProjectionMatrix(),Gi=mi.multiply([],li,zr),na=this.cameraService.projectFlat([Math.fround(Ne[0]),Math.fround(Ne[1])],Math.pow(2,$e));this.viewportCenterProjection=$i.fF([],[na[0],na[1],0,1],Gi),zr=this.cameraService.getViewMatrixUncentered()||zr,Gi=mi.multiply([],li,zr),Gi=mi.multiply([],Gi,Bi),this.cameraService.setViewProjectionMatrix(Gi),this.pixelsPerMeter=Zn,this.pixelsPerDegree=mn,this.pixelsPerDegree2=jn}}]),Z}(),to=D(71002);function Ae(Z){var Vt=ns();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function ns(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Oo=function(Z){(0,_n.Z)(Ne,Z);var Vt=Ae(Ne);function Ne(){var $e;(0,ae.Z)(this,Ne);for(var Oe=arguments.length,lt=new Array(Oe),un=0;un<Oe;un++)lt[un]=arguments[un];return $e=Vt.call.apply(Vt,[this].concat(lt)),(0,ne.Z)((0,Zt.Z)($e),"renderMap",new Map),(0,ne.Z)((0,Zt.Z)($e),"enable",!1),(0,ne.Z)((0,Zt.Z)($e),"renderEnable",!1),(0,ne.Z)((0,Zt.Z)($e),"cacheLogs",{}),$e}return(0,T.Z)(Ne,[{key:"setEnable",value:function(Oe){this.enable=!!Oe}},{key:"log",value:function(Oe,lt){var un=this;if(this.enable){var Zn=Oe.split("."),mn=null;Zn.forEach(function(jn,zr){mn!==null?(mn[jn]||(mn[jn]={}),zr!==Zn.length-1&&(mn=mn[jn])):(un.cacheLogs[jn]||(un.cacheLogs[jn]={}),zr!==Zn.length-1&&(mn=un.cacheLogs[jn])),zr===Zn.length-1&&(mn[jn]=(0,ee.Z)((0,ee.Z)({time:Date.now()},mn[jn]),lt))})}}},{key:"getLog",value:function(Oe){var lt=this;switch((0,to.Z)(Oe)){case"string":return this.cacheLogs[Oe];case"object":return Oe.map(function(un){return lt.cacheLogs[un]}).filter(function(un){return un!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(Oe){delete this.cacheLogs[Oe]}},{key:"generateRenderUid",value:function(){return this.renderEnable?(0,Q.M8)():""}},{key:"renderDebug",value:function(Oe){this.renderEnable=Oe}},{key:"renderStart",value:function(Oe){if(!(!this.renderEnable||!this.enable)){var lt=this.renderMap.get(Oe)||{};this.renderMap.set(Oe,(0,ee.Z)((0,ee.Z)({},lt),{},{renderUid:Oe,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(Oe){if(!(!this.renderEnable||!this.enable)){var lt=this.renderMap.get(Oe);if(lt){var un=lt.renderStart,Zn=Date.now();this.emit("renderEnd",(0,ee.Z)((0,ee.Z)({},lt),{},{renderEnd:Zn,renderDuration:Zn-un})),this.renderMap.delete(Oe)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),Ne}(gr.EventEmitter),Ms=D(50840),ps=D.n(Ms);function jt(Z){var Vt=sn();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function sn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Jn={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Xr=function(Z){(0,_n.Z)(Ne,Z);var Vt=jt(Ne);function Ne($e){var Oe;return(0,ae.Z)(this,Ne),Oe=Vt.call(this),(0,ne.Z)((0,Zt.Z)(Oe),"indragging",!1),(0,ne.Z)((0,Zt.Z)(Oe),"hammertime",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"lastClickTime",0),(0,ne.Z)((0,Zt.Z)(Oe),"lastClickXY",[-1,-1]),(0,ne.Z)((0,Zt.Z)(Oe),"clickTimer",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"$containter",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"onDrag",function(lt){var un=Oe.interactionEvent(lt);un.type=Jn[un.type],un.type==="dragging"?Oe.indragging=!0:Oe.indragging=!1,Oe.emit(Lt.Drag,un)}),(0,ne.Z)((0,Zt.Z)(Oe),"onHammer",function(lt){lt.srcEvent.stopPropagation();var un=Oe.interactionEvent(lt);Oe.emit(Lt.Hover,un)}),(0,ne.Z)((0,Zt.Z)(Oe),"onTouch",function(lt){var un=lt.touches[0];Oe.onHover({clientX:un.clientX,clientY:un.clientY,type:"touchstart"})}),(0,ne.Z)((0,Zt.Z)(Oe),"onTouchEnd",function(lt){if(lt.changedTouches.length>0){var un=lt.changedTouches[0];Oe.onHover({clientX:un.clientX,clientY:un.clientY,type:"touchend"})}}),(0,ne.Z)((0,Zt.Z)(Oe),"onTouchMove",function(lt){var un=lt.changedTouches[0];Oe.onHover({clientX:un.clientX,clientY:un.clientY,type:"touchmove"})}),(0,ne.Z)((0,Zt.Z)(Oe),"onHover",function(lt){var un=lt.clientX,Zn=lt.clientY,mn=un,jn=Zn,zr=lt.type,li=Oe.mapService.getMapContainer();if(li){var Gi=li.getBoundingClientRect(),na=Gi.top,ga=Gi.left;mn=mn-ga-li.clientLeft,jn=jn-na-li.clientTop}var La=Oe.mapService.containerToLngLat([mn,jn]);if(zr==="click"){Oe.isDoubleTap(mn,jn,La);return}if(zr==="touch"){Oe.isDoubleTap(mn,jn,La);return}zr!=="click"&&zr!=="dblclick"&&Oe.emit(Lt.Hover,{x:mn,y:jn,lngLat:La,type:zr,target:lt})}),Oe.container=$e,Oe}return(0,T.Z)(Ne,[{key:"mapService",get:function(){return this.container.mapService}},{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Lt.Hover)}},{key:"triggerHover",value:function(Oe){var lt=Oe.x,un=Oe.y;this.emit(Lt.Hover,{x:lt,y:un})}},{key:"triggerSelect",value:function(Oe){this.emit(Lt.Select,{featureId:Oe})}},{key:"triggerActive",value:function(Oe){this.emit(Lt.Active,{featureId:Oe})}},{key:"addEventListenerOnMap",value:function(){var Oe=this.mapService.getMapContainer();if(Oe){var lt=new(ps()).Manager(Oe);lt.add(new(ps()).Tap({event:"dblclick",taps:2})),lt.add(new(ps()).Tap({event:"click"})),lt.add(new(ps()).Pan({threshold:0,pointers:0})),lt.add(new(ps()).Press({})),lt.on("dblclick click",this.onHammer),lt.on("panstart panmove panend pancancel",this.onDrag),Oe.addEventListener("touchstart",this.onTouch),Oe.addEventListener("touchend",this.onTouchEnd),Oe.addEventListener("mousemove",this.onHover),Oe.addEventListener("touchmove",this.onTouchMove),Oe.addEventListener("mousedown",this.onHover,!0),Oe.addEventListener("mouseup",this.onHover),Oe.addEventListener("contextmenu",this.onHover),this.hammertime=lt}}},{key:"removeEventListenerOnMap",value:function(){var Oe=this.mapService.getMapContainer();Oe&&(Oe.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Oe.removeEventListener("touchstart",this.onTouch),Oe.removeEventListener("touchend",this.onTouchEnd),Oe.removeEventListener("mousedown",this.onHover),Oe.removeEventListener("mouseup",this.onHover),Oe.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(Oe){var lt=Oe.type,un=Oe.pointerType,Zn,mn;un==="touch"?(mn=Math.floor(Oe.pointers[0].clientY),Zn=Math.floor(Oe.pointers[0].clientX)):(mn=Math.floor(Oe.srcEvent.y),Zn=Math.floor(Oe.srcEvent.x));var jn=this.mapService.getMapContainer();if(jn){var zr=jn.getBoundingClientRect(),li=zr.top,Gi=zr.left;Zn-=Gi,mn-=li}var na=this.mapService.containerToLngLat([Zn,mn]);return{x:Zn,y:mn,lngLat:na,type:lt,target:Oe.srcEvent}}},{key:"isDoubleTap",value:function(Oe,lt,un){var Zn=this,mn=new Date().getTime(),jn="click";mn-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Oe)<10&&Math.abs(this.lastClickXY[1]-lt)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),jn="dblclick",this.emit(Lt.Hover,{x:Oe,y:lt,lngLat:un,type:jn})):(this.lastClickTime=mn,this.lastClickXY=[Oe,lt],this.clickTimer=setTimeout(function(){jn="click",Zn.emit(Lt.Hover,{x:Oe,y:lt,lngLat:un,type:jn})},400))}}]),Ne}(wr()),Ii=0;function Ea(Z){var Vt=Z;if(typeof Z=="string"&&(Vt=document.getElementById(Z)),Vt){var Ne=document.createElement("div");return Ne.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Ne.id="l7-scene-".concat(Ii++),Ne.classList.add("l7-scene"),Vt.appendChild(Ne),Ne}return null}function co(Z){var Vt,Ne=!0;if((Z==null||(Vt=Z.target)===null||Vt===void 0?void 0:Vt.target)instanceof HTMLElement)for(var $e,Oe=Z==null||($e=Z.target)===null||$e===void 0?void 0:$e.target;Oe;){var lt,un=Array.from(Oe.classList);if(un.includes("l7-marker")||un.includes("l7-popup")){Ne=!1;break}Oe=(lt=Oe)===null||lt===void 0?void 0:lt.parentElement}return Ne}var Zs=function(Z){return Z[Z.SAMPLED=0]="SAMPLED",Z[Z.RENDER_TARGET=1]="RENDER_TARGET",Z}({});function Vs(Z,Vt){var Ne=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!Ne){if(Array.isArray(Z)||(Ne=Ds(Z))||Vt&&Z&&typeof Z.length=="number"){Ne&&(Z=Ne);var $e=0,Oe=function(){};return{s:Oe,n:function(){return $e>=Z.length?{done:!0}:{done:!1,value:Z[$e++]}},e:function(jn){throw jn},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt=!0,un=!1,Zn;return{s:function(){Ne=Ne.call(Z)},n:function(){var jn=Ne.next();return lt=jn.done,jn},e:function(jn){un=!0,Zn=jn},f:function(){try{!lt&&Ne.return!=null&&Ne.return()}finally{if(un)throw Zn}}}}function Ds(Z,Vt){if(Z){if(typeof Z=="string")return vu(Z,Vt);var Ne=Object.prototype.toString.call(Z).slice(8,-1);if(Ne==="Object"&&Z.constructor&&(Ne=Z.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Z);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return vu(Z,Vt)}}function vu(Z,Vt){(Vt==null||Vt>Z.length)&&(Vt=Z.length);for(var Ne=0,$e=new Array(Vt);Ne<Vt;Ne++)$e[Ne]=Z[Ne];return $e}var Rl=function(){function Z(Vt){var Ne=this;(0,ae.Z)(this,Z),(0,ne.Z)(this,"pickedColors",void 0),(0,ne.Z)(this,"pickedTileLayers",[]),(0,ne.Z)(this,"pickingFBO",void 0),(0,ne.Z)(this,"width",0),(0,ne.Z)(this,"height",0),(0,ne.Z)(this,"alreadyInPicking",!1),(0,ne.Z)(this,"pickBufferScale",1),(0,ne.Z)(this,"pickFromPickingFBO",function(){var $e=(0,vi.Z)(Gr().mark(function Oe(lt,un){var Zn,mn,jn,zr,li,Gi,na,ga,La,ui,Ka,uo,no,as,Es,vs,Ko,_o,oa,ra,Qo,Jo,No;return Gr().wrap(function(Fo){for(;;)switch(Fo.prev=Fo.next){case 0:if(Zn=un.x,mn=un.y,jn=un.lngLat,zr=un.type,li=un.target,Gi=!1,na=Ne.rendererService,ga=na.readPixelsAsync,La=na.getViewportSize,ui=La(),Ka=ui.width,uo=ui.height,no=lt.getLayerConfig(),as=no.enableHighlight,Es=no.enableSelect,vs=Zn*Q.SO.DPR,Ko=mn*Q.SO.DPR,!(vs>Ka-1*Q.SO.DPR||vs<0||Ko>uo-1*Q.SO.DPR||Ko<0)){Fo.next=9;break}return Fo.abrupt("return",!1);case 9:return Fo.next=11,ga({x:Math.floor(vs/Ne.pickBufferScale),y:Math.floor((uo-(mn+1)*Q.SO.DPR)/Ne.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:Ne.pickingFBO});case 11:return _o=Fo.sent,Ne.pickedColors=_o,_o[0]!==0||_o[1]!==0||_o[2]!==0?(oa=(0,Q.W0)(_o),ra=lt.layerPickService.getFeatureById(oa),oa!==lt.getCurrentPickId()&&zr==="mousemove"&&(zr="mouseenter"),Qo={x:Zn,y:mn,type:zr,lngLat:jn,featureId:oa,feature:ra,target:li},ra&&(Gi=!0,lt.setCurrentPickId(oa),Ne.triggerHoverOnLayer(lt,Qo))):(Jo={x:Zn,y:mn,lngLat:jn,type:lt.getCurrentPickId()!==null&&zr==="mousemove"?"mouseout":"un"+zr,featureId:null,target:li,feature:null},Ne.triggerHoverOnLayer(lt,(0,ee.Z)((0,ee.Z)({},Jo),{},{type:"unpick"})),Ne.triggerHoverOnLayer(lt,Jo),lt.setCurrentPickId(null)),as&&lt.layerPickService.highlightPickedFeature(_o),Es&&zr==="click"&&(_o==null?void 0:_o.toString())!==[0,0,0,0].toString()&&(No=(0,Q.W0)(_o),lt.getCurrentSelectedId()===null||No!==lt.getCurrentSelectedId()?(lt.layerPickService.selectFeature(_o),lt.setCurrentSelectedId(No)):(lt.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),lt.setCurrentSelectedId(null))),Fo.abrupt("return",Gi);case 17:case"end":return Fo.stop()}},Oe)}));return function(Oe,lt){return $e.apply(this,arguments)}}()),this.container=Vt}return(0,T.Z)(Z,[{key:"mapService",get:function(){return this.container.mapService}},{key:"rendererService",get:function(){return this.container.rendererService}},{key:"configService",get:function(){return this.container.globalConfigService}},{key:"interactionService",get:function(){return this.container.interactionService}},{key:"layerService",get:function(){return this.container.layerService}},{key:"init",value:function(Ne){var $e=this.rendererService,Oe=$e.createTexture2D,lt=$e.createFramebuffer,un=$e.getViewportSize,Zn=un(),mn=Zn.width,jn=Zn.height;this.pickBufferScale=this.configService.getSceneConfig(Ne).pickBufferScale||1,mn=Math.round(mn/this.pickBufferScale),jn=Math.round(jn/this.pickBufferScale);var zr=Oe({width:mn,height:jn,usage:Zs.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=lt({color:zr,depth:!0,width:mn,height:jn}),this.interactionService.on(Lt.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(Oe,lt,un){var Zn=this,mn,jn,zr,li;return Gr().wrap(function(na){for(;;)switch(na.prev=na.next){case 0:return mn=this.rendererService,jn=mn.useFramebufferAsync,zr=mn.clear,this.resizePickingFBO(),Oe.hooks.beforePickingEncode.call(),na.next=5,jn(this.pickingFBO,(0,vi.Z)(Gr().mark(function ga(){return Gr().wrap(function(ui){for(;;)switch(ui.prev=ui.next){case 0:zr({framebuffer:Zn.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Oe.renderModels({ispick:!0});case 2:case"end":return ui.stop()}},ga)})));case 5:return Oe.hooks.afterPickingEncode.call(),na.next=8,this.pickBox(Oe,lt);case 8:li=na.sent,un(li);case 10:case"end":return na.stop()}},$e,this)}));function Ne($e,Oe,lt){return Vt.apply(this,arguments)}return Ne}()},{key:"pickBox",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(Oe,lt){var un=this,Zn,mn,jn,zr,li,Gi,na,ga,La,ui,Ka,uo,no,as,Es,vs,Ko,_o,oa,ra,Qo;return Gr().wrap(function(No){for(;;)switch(No.prev=No.next){case 0:if(Zn=lt.map(function(os){var Fo=os<0?0:os;return Math.floor(Fo*Q.SO.DPR/un.pickBufferScale)}),mn=(0,Ba.Z)(Zn,4),jn=mn[0],zr=mn[1],li=mn[2],Gi=mn[3],na=this.rendererService,ga=na.readPixelsAsync,La=na.getViewportSize,ui=La(),Ka=ui.width,uo=ui.height,!(jn>(Ka-1)*Q.SO.DPR/this.pickBufferScale||li<0||zr>(uo-1)*Q.SO.DPR/this.pickBufferScale||Gi<0)){No.next=5;break}return No.abrupt("return",[]);case 5:return no=Math.min(Ka/this.pickBufferScale,li)-jn,as=Math.min(uo/this.pickBufferScale,Gi)-zr,No.next=9,ga({x:jn,y:Math.floor(uo/this.pickBufferScale-(Gi+1)),width:no,height:as,data:new Uint8Array(no*as*4),framebuffer:this.pickingFBO});case 9:for(Es=No.sent,vs=[],Ko={},_o=0;_o<Es.length/4;_o=_o+1)oa=Es.slice(_o*4,_o*4+4),ra=(0,Q.W0)(oa),ra!==-1&&!Ko[ra]&&(Qo=Oe.layerPickService.getFeatureById(ra),vs.push((0,ee.Z)((0,ee.Z)({},Qo),{},{pickedFeatureIdx:ra})),Ko[ra]=!0);return No.abrupt("return",vs);case 14:case"end":return No.stop()}},$e,this)}));function Ne($e,Oe){return Vt.apply(this,arguments)}return Ne}()},{key:"handleCursor",value:function(Ne,$e){var Oe=Ne.getLayerConfig(),lt=Oe.cursor,un=lt===void 0?"":lt,Zn=Oe.cursorEnabled;if(Zn){var mn=this.mapService.version,jn=mn==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),zr=jn==null?void 0:jn.style.getPropertyValue("cursor");$e==="unmousemove"&&zr!==""?jn==null||jn.style.setProperty("cursor",""):$e==="mousemove"&&(jn==null||jn.style.setProperty("cursor",un))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(Ne){return Ne.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(Oe){return Gr().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:if(!(!this.layerService.needPick(Oe.type)||!this.isPickingAllLayer())){un.next=2;break}return un.abrupt("return");case 2:return this.alreadyInPicking=!0,un.next=5,this.pickingLayers(Oe);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return un.stop()}},$e,this)}));function Ne($e){return Vt.apply(this,arguments)}return Ne}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var Ne=this.rendererService.getViewportSize,$e=Ne(),Oe=$e.width,lt=$e.height;(this.width!==Oe||this.height!==lt)&&(this.pickingFBO.resize({width:Math.round(Oe/this.pickBufferScale),height:Math.round(lt/this.pickBufferScale)}),this.width=Oe,this.height=lt)}},{key:"pickingLayers",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(Oe){var lt=this,un,Zn,mn,jn,zr,li,Gi;return Gr().wrap(function(ga){for(;;)switch(ga.prev=ga.next){case 0:un=this.rendererService,Zn=un.clear,mn=un.useFramebufferAsync,this.resizePickingFBO(),jn=this.layerService.getRenderList(),zr=Vs(jn.filter(function(La){return La.needPick(Oe.type)}).reverse()),ga.prev=4,Gi=Gr().mark(function La(){var ui,Ka;return Gr().wrap(function(no){for(;;)switch(no.prev=no.next){case 0:return ui=li.value,no.next=3,mn(lt.pickingFBO,(0,vi.Z)(Gr().mark(function as(){return Gr().wrap(function(vs){for(;;)switch(vs.prev=vs.next){case 0:Zn({framebuffer:lt.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ui.layerPickService.pickRender(Oe);case 2:case"end":return vs.stop()}},as)})));case 3:return no.next=5,lt.pickFromPickingFBO(ui,Oe);case 5:if(Ka=no.sent,lt.layerService.pickedLayerId=Ka?+ui.id:-1,!(Ka&&!ui.getLayerConfig().enablePropagation)){no.next=9;break}return no.abrupt("return",1);case 9:case"end":return no.stop()}},La)}),zr.s();case 7:if((li=zr.n()).done){ga.next=13;break}return ga.delegateYield(Gi(),"t0",9);case 9:if(!ga.t0){ga.next=11;break}return ga.abrupt("break",13);case 11:ga.next=7;break;case 13:ga.next=18;break;case 15:ga.prev=15,ga.t1=ga.catch(4),zr.e(ga.t1);case 18:return ga.prev=18,zr.f(),ga.finish(18);case 21:case"end":return ga.stop()}},$e,this,[[4,15,18,21]])}));function Ne($e){return Vt.apply(this,arguments)}return Ne}()},{key:"triggerHoverOnLayer",value:function(Ne,$e){co($e)&&(this.handleCursor(Ne,$e.type),Ne.emit($e.type,$e))}}]),Z}(),ap=function(){function Z(){var Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,ae.Z)(this,Z),(0,ne.Z)(this,"autoStart",void 0),(0,ne.Z)(this,"startTime",0),(0,ne.Z)(this,"oldTime",0),(0,ne.Z)(this,"running",!1),(0,ne.Z)(this,"elapsedTime",0),this.autoStart=Vt}return(0,T.Z)(Z,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Ne=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var $e=(typeof performance=="undefined"?Date:performance).now();Ne=($e-this.oldTime)/1e3,this.oldTime=$e,this.elapsedTime+=Ne}return Ne}}]),Z}();function ph(Z,Vt){var Ne=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!Ne){if(Array.isArray(Z)||(Ne=el(Z))||Vt&&Z&&typeof Z.length=="number"){Ne&&(Z=Ne);var $e=0,Oe=function(){};return{s:Oe,n:function(){return $e>=Z.length?{done:!0}:{done:!1,value:Z[$e++]}},e:function(jn){throw jn},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt=!0,un=!1,Zn;return{s:function(){Ne=Ne.call(Z)},n:function(){var jn=Ne.next();return lt=jn.done,jn},e:function(jn){un=!0,Zn=jn},f:function(){try{!lt&&Ne.return!=null&&Ne.return()}finally{if(un)throw Zn}}}}function el(Z,Vt){if(Z){if(typeof Z=="string")return lf(Z,Vt);var Ne=Object.prototype.toString.call(Z).slice(8,-1);if(Ne==="Object"&&Z.constructor&&(Ne=Z.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Z);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return lf(Z,Vt)}}function lf(Z,Vt){(Vt==null||Vt>Z.length)&&(Vt=Z.length);for(var Ne=0,$e=new Array(Vt);Ne<Vt;Ne++)$e[Ne]=Z[Ne];return $e}function Rf(Z){var Vt=mu();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var tc=Q.rU.throttle,Pf=function(Z){(0,_n.Z)(Ne,Z);var Vt=Rf(Ne);function Ne($e){var Oe;return(0,ae.Z)(this,Ne),Oe=Vt.call(this),(0,ne.Z)((0,Zt.Z)(Oe),"pickedLayerId",-1),(0,ne.Z)((0,Zt.Z)(Oe),"clock",new ap),(0,ne.Z)((0,Zt.Z)(Oe),"alreadyInRendering",!1),(0,ne.Z)((0,Zt.Z)(Oe),"layers",[]),(0,ne.Z)((0,Zt.Z)(Oe),"layerList",[]),(0,ne.Z)((0,Zt.Z)(Oe),"layerRenderID",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"sceneInited",!1),(0,ne.Z)((0,Zt.Z)(Oe),"animateInstanceCount",0),(0,ne.Z)((0,Zt.Z)(Oe),"shaderPicking",!0),(0,ne.Z)((0,Zt.Z)(Oe),"enableRender",!0),(0,ne.Z)((0,Zt.Z)(Oe),"reRender",tc(function(){Oe.renderLayers()},32)),(0,ne.Z)((0,Zt.Z)(Oe),"throttleRenderLayers",tc(function(){Oe.renderLayers()},16)),Oe.container=$e,Oe}return(0,T.Z)(Ne,[{key:"renderService",get:function(){return this.container.rendererService}},{key:"mapService",get:function(){return this.container.mapService}},{key:"debugService",get:function(){return this.container.debugService}},{key:"needPick",value:function(Oe){return this.updateLayerRenderList(),this.layerList.some(function(lt){return lt.needPick(Oe)})}},{key:"add",value:function(Oe){var lt=this;this.layers.push(Oe),this.sceneInited&&Oe.init().then(function(){lt.renderLayers()})}},{key:"addMask",value:function(Oe){var lt=this;this.sceneInited&&Oe.init().then(function(){lt.renderLayers()})}},{key:"initLayers",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(){var un=this;return Gr().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var jn=(0,vi.Z)(Gr().mark(function zr(li){return Gr().wrap(function(na){for(;;)switch(na.prev=na.next){case 0:if(li.startInit){na.next=4;break}return na.next=3,li.init();case 3:un.updateLayerRenderList();case 4:case"end":return na.stop()}},zr)}));return function(zr){return jn.apply(this,arguments)}}());case 2:case"end":return mn.stop()}},lt,this)}));function Oe(){return $e.apply(this,arguments)}return Oe}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Oe){return this.layers.find(function(lt){return lt.id===Oe})}},{key:"getLayerByName",value:function(Oe){return this.layers.find(function(lt){return lt.name===Oe})}},{key:"remove",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(un,Zn){var mn,jn;return Gr().wrap(function(li){for(;;)switch(li.prev=li.next){case 0:Zn?(mn=Zn.layerChildren.indexOf(un),mn>-1&&Zn.layerChildren.splice(mn,1)):(jn=this.layers.indexOf(un),jn>-1&&this.layers.splice(jn,1)),un.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return li.stop()}},lt,this)}));function Oe(lt,un){return $e.apply(this,arguments)}return Oe}()},{key:"removeAllLayers",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(){return Gr().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:this.destroy(),this.reRender();case 2:case"end":return Zn.stop()}},lt,this)}));function Oe(){return $e.apply(this,arguments)}return Oe}()},{key:"setEnableRender",value:function(Oe){this.enableRender=Oe}},{key:"renderLayers",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(){var un,Zn,mn,jn,zr,li,Gi,na,ga;return Gr().wrap(function(ui){for(;;)switch(ui.prev=ui.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){ui.next=2;break}return ui.abrupt("return");case 2:this.updateLayerRenderList(),un=this.debugService.generateRenderUid(),this.debugService.renderStart(un),this.alreadyInRendering=!0,this.clear(),Zn=ph(this.layerList);try{for(Zn.s();!(mn=Zn.n()).done;)jn=mn.value,jn.prerender()}catch(Ka){Zn.e(Ka)}finally{Zn.f()}this.renderService.beginFrame(),zr=ph(this.layerList),ui.prev=11,zr.s();case 13:if((li=zr.n()).done){ui.next=25;break}if(Gi=li.value,na=Gi.getLayerConfig(),ga=na.enableMask,Gi.masks.filter(function(Ka){return Ka.inited}).length>0&&ga&&this.renderMask(Gi.masks),!Gi.getLayerConfig().enableMultiPassRenderer){ui.next=22;break}return ui.next=20,Gi.renderMultiPass();case 20:ui.next=23;break;case 22:Gi.render();case 23:ui.next=13;break;case 25:ui.next=30;break;case 27:ui.prev=27,ui.t0=ui.catch(11),zr.e(ui.t0);case 30:return ui.prev=30,zr.f(),ui.finish(30);case 33:this.renderService.endFrame(),this.debugService.renderEnd(un),this.alreadyInRendering=!1;case 36:case"end":return ui.stop()}},lt,this,[[11,27,30,33]])}));function Oe(){return $e.apply(this,arguments)}return Oe}()},{key:"renderMask",value:function(Oe){var lt=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var un=Oe.length>1?Xe.MULTIPLE:Xe.SINGLE,Zn=ph(Oe),mn;try{for(Zn.s();!(mn=Zn.n()).done;){var jn=mn.value;jn.render({isStencil:!0,stencilType:un,stencilIndex:lt++})}}catch(zr){Zn.e(zr)}finally{Zn.f()}}},{key:"beforeRenderData",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(un){var Zn;return Gr().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:return jn.next=2,un.hooks.beforeRenderData.promise();case 2:Zn=jn.sent,Zn&&this.renderLayers();case 4:case"end":return jn.stop()}},lt,this)}));function Oe(lt){return $e.apply(this,arguments)}return Oe}()},{key:"renderTileLayerMask",value:function(Oe){var lt=0,un=Oe.getLayerConfig(),Zn=un.enableMask,mn=Zn===void 0?!0:Zn,jn=Oe.tileMask?1:0,zr=Oe.masks.filter(function(La){return La.inited});jn=jn+(mn?zr.length:1);var li=jn>1?Xe.MULTIPLE:Xe.SINGLE;if((Oe.tileMask||zr.length&&mn)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),zr.length&&mn){var Gi=ph(zr),na;try{for(Gi.s();!(na=Gi.n()).done;){var ga=na.value;ga.render({isStencil:!0,stencilType:li,stencilIndex:lt++})}}catch(La){Gi.e(La)}finally{Gi.f()}}Oe.tileMask&&Oe.tileMask.render({isStencil:!0,stencilType:li,stencilIndex:lt++,stencilOperation:Fe.OR})}},{key:"renderTileLayer",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(un){return Gr().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:if(this.renderTileLayerMask(un),!un.getLayerConfig().enableMultiPassRenderer){mn.next=6;break}return mn.next=4,un.renderMultiPass();case 4:mn.next=8;break;case 6:return mn.next=8,un.render();case 8:case"end":return mn.stop()}},lt,this)}));function Oe(lt){return $e.apply(this,arguments)}return Oe}()},{key:"updateLayerRenderList",value:function(){var Oe=this;this.layerList=[],this.layers.filter(function(lt){return lt.inited}).filter(function(lt){return lt.isVisible()}).sort(function(lt,un){return lt.zIndex-un.zIndex}).forEach(function(lt){Oe.layerList.push(lt)})}},{key:"destroy",value:function(){this.layers.forEach(function(Oe){Oe.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var Oe=(0,Q.CI)(this.mapService.bgColor);this.renderService.clear({color:Oe,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){window.cancelAnimationFrame(this.layerRenderID)}}]),Ne}(gr.EventEmitter),zh=D(45987),Ti=Q.rU.isNil,za=function(){function Z(Vt){var Ne=this;(0,ae.Z)(this,Z),(0,ne.Z)(this,"name",void 0),(0,ne.Z)(this,"type",void 0),(0,ne.Z)(this,"scale",void 0),(0,ne.Z)(this,"descriptor",void 0),(0,ne.Z)(this,"featureBufferLayout",[]),(0,ne.Z)(this,"needRescale",!1),(0,ne.Z)(this,"needRemapping",!1),(0,ne.Z)(this,"needRegenerateVertices",!1),(0,ne.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,ne.Z)(this,"vertexAttribute",void 0),(0,ne.Z)(this,"defaultCallback",function($e){if($e.length===0){var Oe;return((Oe=Ne.scale)===null||Oe===void 0?void 0:Oe.defaultValues)||[]}return $e.map(function(lt,un){var Zn,mn=(Zn=Ne.scale)===null||Zn===void 0?void 0:Zn.scalers[un].func,jn=mn(lt);return jn})}),this.setProps(Vt)}return(0,T.Z)(Z,[{key:"setProps",value:function(Ne){Object.assign(this,Ne)}},{key:"mapping",value:function(Ne){var $e;if(($e=this.scale)!==null&&$e!==void 0&&$e.callback){var Oe,lt=(Oe=this.scale)===null||Oe===void 0?void 0:Oe.callback.apply(Oe,(0,wt.Z)(Ne));if(!Ti(lt))return[lt]}return this.defaultCallback(Ne)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),Z}(),fo=["buffer","update","name"],Ji=["buffer","update","name"],su,If=(su={},(0,ne.Z)(su,pe.FLOAT,4),(0,ne.Z)(su,pe.UNSIGNED_BYTE,1),(0,ne.Z)(su,pe.UNSIGNED_SHORT,2),su),Uh=function(){function Z(Vt){(0,ae.Z)(this,Z),(0,ne.Z)(this,"attributesAndIndices",void 0),(0,ne.Z)(this,"attributes",[]),(0,ne.Z)(this,"triangulation",void 0),(0,ne.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=Vt}return(0,T.Z)(Z,[{key:"registerStyleAttribute",value:function(Ne){var $e=this.getLayerStyleAttribute(Ne.name||"");return $e?$e.setProps(Ne):($e=new za(Ne),this.attributes.push($e)),$e}},{key:"unRegisterStyleAttribute",value:function(Ne){var $e=this.attributes.findIndex(function(Oe){return Oe.name===Ne});$e>-1&&this.attributes.splice($e,1)}},{key:"updateScaleAttribute",value:function(Ne){this.attributes.forEach(function($e){var Oe,lt=$e.name,un=(Oe=$e.scale)===null||Oe===void 0?void 0:Oe.field;(Ne[lt]||un&&Ne[un])&&($e.needRescale=!0,$e.needRemapping=!0,$e.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(Ne,$e,Oe){var lt=this.getLayerStyleAttribute(Ne);lt||(lt=this.registerStyleAttribute((0,ee.Z)((0,ee.Z)({},$e),{},{name:Ne})));var un=$e.scale;un&&lt&&(lt.scale=un,lt.needRescale=!0,lt.needRemapping=!0,lt.needRegenerateVertices=!0,Oe&&Oe.featureRange&&(lt.featureRange=Oe.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Ne){return this.attributes.find(function($e){return $e.name===Ne})}},{key:"getLayerAttributeScale",value:function(Ne){var $e,Oe=this.getLayerStyleAttribute(Ne),lt=Oe==null||($e=Oe.scale)===null||$e===void 0?void 0:$e.scalers;return lt&&lt[0]?lt[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Ne,$e){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,lt=arguments.length>3?arguments[3]:void 0,un=arguments.length>4?arguments[4]:void 0,Zn=this.attributes.find(function(Es){return Es.name===Ne});if(Zn&&Zn.descriptor){var mn=Zn.descriptor,jn=mn.update,zr=mn.buffer,li=mn.size,Gi=li===void 0?0:li,na=If[zr.type||pe.FLOAT];if(jn){var ga=this.featureLayout,La=ga.elements,ui=ga.sizePerElement,Ka=La.slice(Oe,lt);if(!Ka.length)return;var uo=Ka[0].offset,no=uo*Gi*na,as=Ka.map(function(Es,vs){for(var Ko=Es.featureIdx,_o=Es.vertices,oa=Es.normals,ra=_o.length/ui,Qo=[],Jo=0;Jo<ra;Jo++){var No=oa?oa.slice(Jo*3,Jo*3+3):[];Qo.push.apply(Qo,(0,wt.Z)(jn($e[Ko],Ko,_o.slice(Jo*ui,Jo*ui+ui),vs,No)))}return Qo}).flat();Zn.vertexAttribute.updateBuffer({data:as,offset:no}),un==null||un.emit("legend:".concat(Ne),un.getLegend(Ne))}}}},{key:"createAttributesAndIndices",value:function(Ne,$e,Oe,lt){var un=this;this.featureLayout={sizePerElement:0,elements:[]},$e&&(this.triangulation=$e);var Zn=this.attributes.map(function(uo){return uo.resetDescriptor(),uo.descriptor}),mn=0,jn=0,zr=[],li=3;Ne.forEach(function(uo,no){var as=un.triangulation(uo,Oe),Es=as.indices,vs=as.vertices,Ko=as.normals,_o=as.size,oa=as.indexes,ra=as.count;typeof ra=="number"&&(jn+=ra),Es.forEach(function(os){zr.push(os+mn)}),li=_o;var Qo=vs.length/_o;un.featureLayout.sizePerElement=li,un.featureLayout.elements.push({featureIdx:no,vertices:vs,normals:Ko,offset:mn}),mn+=Qo;for(var Jo=function(Fo){var $u=(Ko==null?void 0:Ko.slice(Fo*3,Fo*3+3))||[],gf=vs.slice(Fo*_o,Fo*_o+_o),jo=0;oa&&oa[Fo]!==void 0&&(jo=oa[Fo]),Zn.forEach(function(qs,Id){if(qs&&qs.update){var yc;(yc=qs.buffer.data).push.apply(yc,(0,wt.Z)(qs.update(uo,no,gf,Fo,$u,jo)))}})},No=0;No<Qo;No++)Jo(No)});var Gi=this.rendererService,na=Gi.createAttribute,ga=Gi.createBuffer,La=Gi.createElements,ui={};Zn.forEach(function(uo,no){if(uo){var as=uo.buffer,Es=uo.update,vs=uo.name,Ko=(0,zh.Z)(uo,fo),_o=na((0,ee.Z)({buffer:ga(as)},Ko));ui[uo.name||""]=_o,un.attributes[no].vertexAttribute=_o}});var Ka=La({data:zr,type:pe.UNSIGNED_INT,count:zr.length});return this.attributesAndIndices={attributes:ui,elements:Ka,count:jn},Object.values(this.attributes).filter(function(uo){return uo.scale}).forEach(function(uo){var no=uo.name;lt==null||lt.emit("legend:".concat(no),lt.getLegend(no))}),this.attributesAndIndices}},{key:"createAttributes",value:function(Ne,$e){var Oe=this;this.featureLayout={sizePerElement:0,elements:[]},$e&&(this.triangulation=$e);var lt=this.attributes.map(function(na){return na.resetDescriptor(),na.descriptor}),un=0,Zn=[],mn=3;Ne.forEach(function(na,ga){var La=Oe.triangulation(na),ui=La.indices,Ka=La.vertices,uo=La.normals,no=La.size,as=La.indexes;ui.forEach(function(_o){Zn.push(_o+un)}),mn=no;var Es=Ka.length/no;Oe.featureLayout.sizePerElement=mn,Oe.featureLayout.elements.push({featureIdx:ga,vertices:Ka,normals:uo,offset:un}),un+=Es;for(var vs=function(oa){var ra=(uo==null?void 0:uo.slice(oa*3,oa*3+3))||[],Qo=Ka.slice(oa*no,oa*no+no),Jo=0;as&&as[oa]!==void 0&&(Jo=as[oa]),lt.forEach(function(No,os){if(No&&No.update){var Fo;(Fo=No.buffer.data).push.apply(Fo,(0,wt.Z)(No.update(na,ga,Qo,oa,ra,Jo)))}})},Ko=0;Ko<Es;Ko++)vs(Ko)});var jn=this.rendererService,zr=jn.createAttribute,li=jn.createBuffer,Gi={};return lt.forEach(function(na,ga){if(na){var La=na.buffer,ui=na.update,Ka=na.name,uo=(0,zh.Z)(na,Ji),no=zr((0,ee.Z)({buffer:li(La)},uo));Gi[na.name||""]=no,Oe.attributes[ga].vertexAttribute=no}}),{attributes:Gi}}},{key:"clearAllAttributes",value:function(){var Ne;this.attributes.forEach(function($e){$e.vertexAttribute&&$e.vertexAttribute.destroy()}),(Ne=this.attributesAndIndices)===null||Ne===void 0||Ne.elements.destroy(),this.attributes=[]}}]),Z}(),Od=D(46343),Gf=D(63844),id=D.n(Gf);function op(Z){var Vt=Up();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Up(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var sp=function(Z){(0,_n.Z)(Ne,Z);var Vt=op(Ne);function Ne($e){var Oe;return(0,ae.Z)(this,Ne),Oe=Vt.call(this),(0,ne.Z)((0,Zt.Z)(Oe),"destroyed",!1),(0,ne.Z)((0,Zt.Z)(Oe),"loaded",!1),(0,ne.Z)((0,Zt.Z)(Oe),"id",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"inited",!1),(0,ne.Z)((0,Zt.Z)(Oe),"rendering",!1),(0,ne.Z)((0,Zt.Z)(Oe),"$container",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"canvas",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"markerContainer",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"resizeDetector",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"hooks",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"handleWindowResized",function(){Oe.emit("resize"),Oe.$container&&(Oe.initContainer(),Oe.coordinateSystemService.needRefresh=!0,Oe.render())}),(0,ne.Z)((0,Zt.Z)(Oe),"handleMapCameraChanged",function(lt){Oe.cameraService.update(lt),Oe.render()}),Oe.container=$e,Oe.hooks={init:new Od.sX},Oe.id=$e.id,Oe}return(0,T.Z)(Ne,[{key:"iconService",get:function(){return this.container.iconService}},{key:"fontService",get:function(){return this.container.fontService}},{key:"controlService",get:function(){return this.container.controlService}},{key:"configService",get:function(){return this.container.globalConfigService}},{key:"map",get:function(){return this.container.mapService}},{key:"coordinateSystemService",get:function(){return this.container.coordinateSystemService}},{key:"rendererService",get:function(){return this.container.rendererService}},{key:"layerService",get:function(){return this.container.layerService}},{key:"debugService",get:function(){return this.container.debugService}},{key:"cameraService",get:function(){return this.container.cameraService}},{key:"interactionService",get:function(){return this.container.interactionService}},{key:"pickingService",get:function(){return this.container.pickingService}},{key:"shaderModuleService",get:function(){return this.container.shaderModuleService}},{key:"markerService",get:function(){return this.container.markerService}},{key:"popupService",get:function(){return this.container.popupService}},{key:"init",value:function(Oe){var lt=this;this.configService.setSceneConfig(this.id,Oe),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return lt.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,vi.Z)(Gr().mark(function un(){return Gr().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return lt.debugService.log("map.mapInitStart",{type:lt.map.version}),mn.next=3,new Promise(function(jn){lt.map.onCameraChanged(function(zr){lt.cameraService.init(),lt.cameraService.update(zr),jn()}),lt.map.init()});case 3:lt.map.onCameraChanged(lt.handleMapCameraChanged),lt.map.addMarkerContainer(),lt.markerService.addMarkers(),lt.markerService.addMarkerLayers(),lt.popupService.initPopup(),lt.interactionService.init(),lt.interactionService.on(Lt.Drag,lt.addSceneEvent.bind(lt));case 10:case"end":return mn.stop()}},un)}))),this.hooks.init.tapPromise("initRenderer",(0,vi.Z)(Gr().mark(function un(){var Zn,mn,jn;return Gr().wrap(function(li){for(;;)switch(li.prev=li.next){case 0:if(mn=((Zn=lt.map)===null||Zn===void 0?void 0:Zn.getOverlayContainer())||void 0,mn?lt.$container=mn:lt.$container=Ea(lt.configService.getSceneConfig(lt.id).id||""),!lt.$container){li.next=14;break}return lt.canvas=Q.SO.create("canvas","",lt.$container),lt.setCanvas(),li.next=7,lt.rendererService.init(lt.canvas,lt.configService.getSceneConfig(lt.id),Oe.gl);case 7:lt.registerContextLost(),lt.initContainer(),lt.resizeDetector=id()({strategy:"scroll"}),lt.resizeDetector.listenTo(lt.$container,lt.handleWindowResized),window.matchMedia&&((jn=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||jn===void 0||jn.addListener(lt.handleWindowResized.bind("screen"))),li.next=15;break;case 14:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 15:lt.pickingService.init(lt.id);case 16:case"end":return li.stop()}},un)}))),this.render()}},{key:"registerContextLost",value:function(){var Oe=this,lt=this.rendererService.getCanvas();lt&&lt.addEventListener("webglcontextlost",function(){return Oe.emit("webglcontextlost")})}},{key:"addLayer",value:function(Oe){this.layerService.sceneService=this,this.layerService.add(Oe)}},{key:"addMask",value:function(Oe){this.layerService.sceneService=this,this.layerService.addMask(Oe)}},{key:"render",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(){return Gr().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:if(!(this.rendering||this.destroyed)){Zn.next=2;break}return Zn.abrupt("return");case 2:if(this.rendering=!0,this.inited){Zn.next=16;break}return Zn.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),Zn.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,Zn.next=20;break;case 16:return Zn.next=18,this.layerService.initLayers();case 18:return Zn.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return Zn.stop()}},lt,this)}));function Oe(){return $e.apply(this,arguments)}return Oe}()},{key:"addFontFace",value:function(Oe,lt){this.fontService.addFontFace(Oe,lt)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var $e=(0,vi.Z)(Gr().mark(function lt(un){var Zn,mn,jn;return Gr().wrap(function(li){for(;;)switch(li.prev=li.next){case 0:return mn=(Zn=this.$container)===null||Zn===void 0?void 0:Zn.getElementsByTagName("canvas")[0],li.next=3,this.render();case 3:return jn=un==="jpg"?mn==null?void 0:mn.toDataURL("image/jpeg"):mn==null?void 0:mn.toDataURL("image/png"),li.abrupt("return",jn);case 5:case"end":return li.stop()}},lt,this)}));function Oe(lt){return $e.apply(this,arguments)}return Oe}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var Oe=this.$container.parentElement;Oe!==null&&(this.markerContainer=Q.SO.create("div","l7-marker-container",Oe))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var Oe=this,lt;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var un;(un=Oe.$container)===null||un===void 0||un.removeChild(Oe.canvas),Oe.canvas=null,Oe.rendererService.destroy()}),(lt=this.$container)===null||lt===void 0||(lt=lt.parentNode)===null||lt===void 0||lt.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var Oe,lt,un=Q.SO.DPR,Zn=((Oe=this.$container)===null||Oe===void 0?void 0:Oe.clientWidth)||400,mn=((lt=this.$container)===null||lt===void 0?void 0:lt.clientHeight)||300,jn=this.canvas;jn&&(jn.width=Zn*un,jn.height=mn*un),this.rendererService.viewport({x:0,y:0,width:un*Zn,height:un*mn})}},{key:"setCanvas",value:function(){var Oe,lt,un=Q.SO.DPR,Zn=((Oe=this.$container)===null||Oe===void 0?void 0:Oe.clientWidth)||400,mn=((lt=this.$container)===null||lt===void 0?void 0:lt.clientHeight)||300,jn=this.canvas;jn.width=Zn*un,jn.height=mn*un,jn.style.width="100%",jn.style.height="100%"}},{key:"addSceneEvent",value:function(Oe){this.emit(Oe.type,Oe)}}]),Ne}(gr.EventEmitter),Xf=Q.rU.uniq,Cc="#define PI 3.14159265359",jp=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,hl=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,kf=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,Yf=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,_l=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,pc=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_EnableSelect;
  float u_activeMix;
};`,vc=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Oc=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,bl=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,cf=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,ff=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,ad=/precision\s+(high|low|medium)p\s+float/,od=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,_s=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,mv=/void\s+main\s*\([^)]*\)\s*\{\n?/,sd=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"moduleCache",{}),(0,ne.Z)(this,"rawContentCache",{})}return(0,T.Z)(Z,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:Cc,fs:Cc}),this.registerModule("decode",{vs:hl,fs:""}),this.registerModule("scene_uniforms",{vs:cf,fs:cf}),this.registerModule("picking_uniforms",{vs:pc,fs:pc}),this.registerModule("projection",{vs:Oc,fs:Oc}),this.registerModule("project",{vs:vc,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:ff}),this.registerModule("lighting",{vs:kf,fs:""}),this.registerModule("light",{vs:jp,fs:""}),this.registerModule("picking",{vs:_l,fs:Yf}),this.registerModule("rotation_2d",{vs:bl,fs:""})}},{key:"registerModule",value:function(Ne,$e){$e.vs=$e.vs.replace(/\r\n/g,`
`),$e.fs=$e.fs.replace(/\r\n/g,`
`);var Oe=$e.vs,lt=$e.fs,un=$e.uniforms,Zn=$e.inject,mn=le(Oe),jn=mn.content,zr=mn.uniforms,li=le(lt),Gi=li.content,na=li.uniforms;this.rawContentCache[Ne]={fs:Gi,inject:Zn,uniforms:(0,ee.Z)((0,ee.Z)((0,ee.Z)({},zr),na),un),vs:jn}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Ne){var $e=this,Oe=this.rawContentCache[Ne].vs,lt=this.rawContentCache[Ne].fs,un=this.rawContentCache[Ne].inject,Zn={};un!=null&&un["vs:#decl"]&&(Oe=(un==null?void 0:un["vs:#decl"])+Oe,Zn=le(un==null?void 0:un["vs:#decl"]).uniforms),un!=null&&un["vs:#main-start"]&&(Oe=Oe.replace(mv,function(Ka){return Ka+(un==null?void 0:un["vs:#main-start"])})),un!=null&&un["fs:#decl"]&&(lt=(un==null?void 0:un["fs:#decl"])+lt);var mn=this.processModule(Oe,[],"vs"),jn=mn.content,zr=mn.includeList,li=this.processModule(lt,[],"fs"),Gi=li.content,na=li.includeList,ga="",La=Xf(zr.concat(na).concat(Ne)).reduce(function(Ka,uo){return(0,ee.Z)((0,ee.Z)({},Ka),$e.rawContentCache[uo].uniforms)},(0,ee.Z)({},Zn));ad.test(Gi)||(ga=ga+od),ga=ga+Gi;var ui="";return ad.test(jn)||(ui=ui+od),ui=ui+jn,this.moduleCache[Ne]={fs:ga.trim(),uniforms:La,vs:ui.trim()},this.moduleCache[Ne]}},{key:"processModule",value:function(Ne,$e,Oe){var lt=this,un=Ne.replace(_s,function(Zn,mn){var jn=mn.split(" "),zr=jn[0].replace(/"/g,"");if($e.indexOf(zr)>-1)return"";var li=lt.rawContentCache[zr][Oe];$e.push(zr);var Gi=lt.processModule(li,$e,Oe),na=Gi.content;return na});return{content:un,includeList:$e}}},{key:"injectDefines",value:function(Ne){var $e=Object.keys(Ne).reduce(function(Oe,lt){return Oe+"#define ".concat(lt.toUpperCase()," ").concat(Ne[lt],`;
`)},`
`);return $e}}]),Z}(),vh=D(73237),Hs=function(){function Z(){(0,ae.Z)(this,Z),(0,ne.Z)(this,"shaderModuleService",void 0),(0,ne.Z)(this,"rendererService",void 0),(0,ne.Z)(this,"cameraService",void 0),(0,ne.Z)(this,"mapService",void 0),(0,ne.Z)(this,"interactionService",void 0),(0,ne.Z)(this,"layerService",void 0),(0,ne.Z)(this,"config",void 0)}return(0,T.Z)(Z,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return ge.Normal}},{key:"init",value:function(Ne,$e){this.config=$e,this.rendererService=Ne.getContainer().rendererService,this.cameraService=Ne.getContainer().cameraService,this.mapService=Ne.getContainer().mapService,this.interactionService=Ne.getContainer().interactionService,this.layerService=Ne.getContainer().layerService,this.shaderModuleService=Ne.getContainer().shaderModuleService}},{key:"render",value:function(Ne){}}]),Z}();function up(Z){var Vt=lp();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function lp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var ku=function(Z){(0,_n.Z)(Ne,Z);var Vt=up(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(Oe,lt){(0,vh.Z)((0,Bn.Z)(Ne.prototype),"init",this).call(this,Oe,lt)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Ne}(Hs);function qc(Z,Vt){var Ne=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!Ne){if(Array.isArray(Z)||(Ne=mc(Z))||Vt&&Z&&typeof Z.length=="number"){Ne&&(Z=Ne);var $e=0,Oe=function(){};return{s:Oe,n:function(){return $e>=Z.length?{done:!0}:{done:!1,value:Z[$e++]}},e:function(jn){throw jn},f:Oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt=!0,un=!1,Zn;return{s:function(){Ne=Ne.call(Z)},n:function(){var jn=Ne.next();return lt=jn.done,jn},e:function(jn){un=!0,Zn=jn},f:function(){try{!lt&&Ne.return!=null&&Ne.return()}finally{if(un)throw Zn}}}}function mc(Z,Vt){if(Z){if(typeof Z=="string")return nc(Z,Vt);var Ne=Object.prototype.toString.call(Z).slice(8,-1);if(Ne==="Object"&&Z.constructor&&(Ne=Z.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Z);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return nc(Z,Vt)}}function nc(Z,Vt){(Vt==null||Vt>Z.length)&&(Vt=Z.length);for(var Ne=0,$e=new Array(Vt);Ne<Vt;Ne++)$e[Ne]=Z[Ne];return $e}var jh=function(){function Z(Vt){(0,ae.Z)(this,Z),(0,ne.Z)(this,"passes",[]),(0,ne.Z)(this,"layer",void 0),(0,ne.Z)(this,"renderFlag",void 0),(0,ne.Z)(this,"width",0),(0,ne.Z)(this,"height",0),this.postProcessor=Vt}return(0,T.Z)(Z,[{key:"setLayer",value:function(Ne){this.layer=Ne}},{key:"setRenderFlag",value:function(Ne){this.renderFlag=Ne}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(){var Oe,lt,un;return Gr().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:Oe=qc(this.passes),mn.prev=1,Oe.s();case 3:if((lt=Oe.n()).done){mn.next=9;break}return un=lt.value,mn.next=7,un.render(this.layer);case 7:mn.next=3;break;case 9:mn.next=14;break;case 11:mn.prev=11,mn.t0=mn.catch(1),Oe.e(mn.t0);case 14:return mn.prev=14,Oe.f(),mn.finish(14);case 17:return mn.next=19,this.postProcessor.render(this.layer);case 19:case"end":return mn.stop()}},$e,this,[[1,11,14,17]])}));function Ne(){return Vt.apply(this,arguments)}return Ne}()},{key:"resize",value:function(Ne,$e){(this.width!==Ne||this.height!==$e)&&(this.postProcessor.resize(Ne,$e),this.width=Ne,this.height=$e)}},{key:"add",value:function(Ne,$e){Ne.getType()===ge.PostProcessing?this.postProcessor.add(Ne,this.layer,$e):(Ne.init(this.layer,$e),this.passes.push(Ne))}},{key:"insert",value:function(Ne,$e,Oe){Ne.init(this.layer,$e),this.passes.splice(Oe,0,Ne)}},{key:"destroy",value:function(){this.passes.length=0}}]),Z}();function qf(Z){var Vt=gc();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function gc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Kf=function(Z){(0,_n.Z)(Ne,Z);var Vt=qf(Ne);function Ne(){var $e;(0,ae.Z)(this,Ne);for(var Oe=arguments.length,lt=new Array(Oe),un=0;un<Oe;un++)lt[un]=arguments[un];return $e=Vt.call.apply(Vt,[this].concat(lt)),(0,ne.Z)((0,Zt.Z)($e),"pickingFBO",void 0),(0,ne.Z)((0,Zt.Z)($e),"layer",void 0),(0,ne.Z)((0,Zt.Z)($e),"width",0),(0,ne.Z)((0,Zt.Z)($e),"height",0),(0,ne.Z)((0,Zt.Z)($e),"alreadyInRendering",!1),(0,ne.Z)((0,Zt.Z)($e),"pickFromPickingFBO",function(Zn){var mn=Zn.x,jn=Zn.y,zr=Zn.lngLat,li=Zn.type;if(!(!$e.layer.isVisible()||!$e.layer.needPick(li))){var Gi=$e.rendererService,na=Gi.getViewportSize,ga=Gi.readPixelsAsync,La=Gi.useFramebuffer,ui=na(),Ka=ui.width,uo=ui.height,no=$e.layer.getLayerConfig(),as=no.enableHighlight,Es=no.enableSelect,vs=mn*Q.SO.DPR,Ko=jn*Q.SO.DPR;if(!(vs>Ka||vs<0||Ko>uo||Ko<0)){var _o;La($e.pickingFBO,(0,vi.Z)(Gr().mark(function oa(){var ra,Qo,Jo,No,os;return Gr().wrap(function($u){for(;;)switch($u.prev=$u.next){case 0:return $u.next=2,ga({x:Math.round(vs),y:Math.round(uo-(jn+1)*Q.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:$e.pickingFBO});case 2:_o=$u.sent,_o[0]!==0||_o[1]!==0||_o[2]!==0?(Qo=(0,Q.W0)(_o),Jo=$e.layer.getSource().getFeatureById(Qo),No={x:mn,y:jn,type:li,lngLat:zr,featureId:Qo,feature:Jo},Jo&&($e.layer.setCurrentPickId(Qo),$e.triggerHoverOnLayer(No))):(os={x:mn,y:jn,lngLat:zr,type:$e.layer.getCurrentPickId()===null?"un"+li:"mouseout",featureId:null,feature:null},$e.triggerHoverOnLayer((0,ee.Z)((0,ee.Z)({},os),{},{type:"unpick"})),$e.triggerHoverOnLayer(os),$e.layer.setCurrentPickId(null)),as&&$e.highlightPickedFeature(_o),Es&&li==="click"&&((ra=_o)===null||ra===void 0?void 0:ra.toString())!==[0,0,0,0].toString()&&$e.selectFeature(_o);case 6:case"end":return $u.stop()}},oa)})))}}}),$e}return(0,T.Z)(Ne,[{key:"getType",value:function(){return ge.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(Oe,lt){(0,vh.Z)((0,Bn.Z)(Ne.prototype),"init",this).call(this,Oe,lt),this.layer=Oe;var un=this.rendererService,Zn=un.createTexture2D,mn=un.createFramebuffer,jn=un.getViewportSize,zr=jn(),li=zr.width,Gi=zr.height,na=Zn({width:li,height:Gi,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=mn({color:na}),this.interactionService.on(Lt.Hover,this.pickFromPickingFBO),this.interactionService.on(Lt.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Lt.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(Oe){var lt=this;if(!this.alreadyInRendering){var un=this.rendererService,Zn=un.getViewportSize,mn=un.useFramebuffer,jn=un.clear,zr=Zn(),li=zr.width,Gi=zr.height;this.alreadyInRendering=!0,(this.width!==li||this.height!==Gi)&&(this.pickingFBO.resize({width:li,height:Gi}),this.width=li,this.height=Gi),mn(this.pickingFBO,function(){jn({framebuffer:lt.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var na=lt.layer.multiPassRenderer.getRenderFlag();lt.layer.multiPassRenderer.setRenderFlag(!1),Oe.hooks.beforePickingEncode.call(),Oe.render(),Oe.hooks.afterPickingEncode.call(),lt.layer.multiPassRenderer.setRenderFlag(na),lt.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(Oe){this.layer.emit(Oe.type,Oe)}},{key:"highlightPickedFeature",value:function(Oe){var lt=(0,Ba.Z)(Oe,3),un=lt[0],Zn=lt[1],mn=lt[2];this.layer.hooks.beforeHighlight.call([un,Zn,mn]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(Oe){var lt=(0,Ba.Z)(Oe,3),un=lt[0],Zn=lt[1],mn=lt[2];this.layer.hooks.beforeSelect.call([un,Zn,mn]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(Oe){var lt=Oe.featureId,un=(0,Q.Z6)(lt);this.selectFeature(new Uint8Array(un))}},{key:"highlightFeatureHandle",value:function(Oe){var lt=Oe.featureId,un=(0,Q.Z6)(lt);this.highlightPickedFeature(new Uint8Array(un))}}]),Ne}(Hs),Lf=function(){function Z(Vt){(0,ae.Z)(this,Z),(0,ne.Z)(this,"passes",[]),(0,ne.Z)(this,"readFBO",void 0),(0,ne.Z)(this,"writeFBO",void 0),this.rendererService=Vt,this.init()}return(0,T.Z)(Z,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var Ne=this.rendererService,$e=Ne.getViewportSize,Oe=Ne.createTexture2D,lt=$e(),un=lt.width,Zn=lt.height;return Oe({x:0,y:0,width:un,height:Zn,copy:!0})}},{key:"getReadFBOTex",value:function(){var Ne=this,$e=this.rendererService.useFramebuffer;return new Promise(function(Oe){$e(Ne.readFBO,(0,vi.Z)(Gr().mark(function lt(){return Gr().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:Oe(Ne.getCurrentFBOTex());case 1:case"end":return Zn.stop()}},lt)})))})}},{key:"renderBloomPass",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(Oe,lt){var un,Zn;return Gr().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:return jn.next=2,this.getReadFBOTex();case 2:un=jn.sent,Zn=0;case 4:if(!(Zn<4)){jn.next=11;break}return jn.next=7,lt.render(Oe,un);case 7:this.swap(),Zn++,jn.next=4;break;case 11:case"end":return jn.stop()}},$e,this)}));function Ne($e,Oe){return Vt.apply(this,arguments)}return Ne}()},{key:"render",value:function(){var Vt=(0,vi.Z)(Gr().mark(function $e(Oe){var lt,un;return Gr().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:lt=0;case 1:if(!(lt<this.passes.length)){mn.next=15;break}if(un=this.passes[lt],un.setRenderToScreen(this.isLastEnabledPass(lt)),un.getName()!=="bloom"){mn.next=9;break}return mn.next=7,this.renderBloomPass(Oe,un);case 7:mn.next=12;break;case 9:return mn.next=11,un.render(Oe);case 11:lt!==this.passes.length-1&&this.swap();case 12:lt++,mn.next=1;break;case 15:case"end":return mn.stop()}},$e,this)}));function Ne($e){return Vt.apply(this,arguments)}return Ne}()},{key:"resize",value:function(Ne,$e){this.readFBO.resize({width:Ne,height:$e}),this.writeFBO.resize({width:Ne,height:$e})}},{key:"add",value:function(Ne,$e,Oe){Ne.init($e,Oe),this.passes.push(Ne)}},{key:"insert",value:function(Ne,$e,Oe,lt){Ne.init(Oe,lt),this.passes.splice($e,0,Ne)}},{key:"getPostProcessingPassByName",value:function(Ne){return this.passes.find(function($e){return $e.getName()===Ne})}},{key:"init",value:function(){var Ne=this.rendererService,$e=Ne.createFramebuffer,Oe=Ne.createTexture2D;this.readFBO=$e({color:Oe({width:1,height:1,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE})}),this.writeFBO=$e({color:Oe({width:1,height:1,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(Ne){for(var $e=Ne+1;$e<this.passes.length;$e++)if(this.passes[$e].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Ne=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Ne}}]),Z}();function rc(Z){var Vt=Lu();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Lu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Ts=function(Z){(0,_n.Z)(Ne,Z);var Vt=rc(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"getType",value:function(){return ge.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(Oe,lt){(0,vh.Z)((0,Bn.Z)(Ne.prototype),"init",this).call(this,Oe,lt)}},{key:"render",value:function(Oe){var lt=this.rendererService,un=lt.useFramebuffer,Zn=lt.clear,mn=Oe.multiPassRenderer.getPostProcessor().getReadFBO();un(mn,function(){Zn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:mn}),Oe.multiPassRenderer.setRenderFlag(!1),Oe.models.forEach(function(jn){jn.draw({uniforms:Oe.layerModel.getUninforms()})}),Oe.multiPassRenderer.setRenderFlag(!0)})}}]),Ne}(Hs);function Ws(Z){var Vt=Mc();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Mc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Zp=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,hf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Zh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function mh(Z,Vt){for(var Ne=0,$e=1/Vt,Oe=Z;Oe>0;)Ne=Ne+$e*(Oe%Vt),Oe=Math.floor(Oe/Vt),$e=$e/Vt;return Ne}var xl=1,Kc=function(Z){(0,_n.Z)(Ne,Z);var Vt=Ws(Ne);function Ne($e){var Oe;return(0,ae.Z)(this,Ne),Oe=Vt.call(this),(0,ne.Z)((0,Zt.Z)(Oe),"haltonSequence",[]),(0,ne.Z)((0,Zt.Z)(Oe),"accumulatingId",0),(0,ne.Z)((0,Zt.Z)(Oe),"frame",0),(0,ne.Z)((0,Zt.Z)(Oe),"timer",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"sampleRenderTarget",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"prevRenderTarget",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"outputRenderTarget",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"copyRenderTarget",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"blendModel",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"outputModel",void 0),(0,ne.Z)((0,Zt.Z)(Oe),"copyModel",void 0),Oe.shaderModuleService=$e,Oe}return(0,T.Z)(Ne,[{key:"getType",value:function(){return ge.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(Oe,lt){(0,vh.Z)((0,Bn.Z)(Ne.prototype),"init",this).call(this,Oe,lt);var un=this.rendererService,Zn=un.createFramebuffer,mn=un.createTexture2D;this.sampleRenderTarget=Zn({color:mn({width:1,height:1,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE})}),this.prevRenderTarget=Zn({color:mn({width:1,height:1,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE})}),this.outputRenderTarget=Zn({color:mn({width:1,height:1,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE})}),this.copyRenderTarget=Zn({color:mn({width:1,height:1,wrapS:pe.CLAMP_TO_EDGE,wrapT:pe.CLAMP_TO_EDGE})});for(var jn=0;jn<30;jn++)this.haltonSequence.push([mh(jn,2),mh(jn,3)]);this.blendModel=this.createTriangleModel("blend-pass",Zp),this.outputModel=this.createTriangleModel("copy-pass",hf,{blend:{enable:!0,func:{srcRGB:pe.ONE,dstRGB:pe.ONE_MINUS_SRC_ALPHA,srcAlpha:pe.ONE,dstAlpha:pe.ONE_MINUS_SRC_ALPHA},equation:{rgb:pe.FUNC_ADD,alpha:pe.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",hf)}},{key:"render",value:function(Oe){var lt=this,un=this.rendererService,Zn=un.clear,mn=un.getViewportSize,jn=un.useFramebuffer,zr=mn(),li=zr.width,Gi=zr.height;this.sampleRenderTarget.resize({width:li,height:Gi}),this.prevRenderTarget.resize({width:li,height:Gi}),this.outputRenderTarget.resize({width:li,height:Gi}),this.copyRenderTarget.resize({width:li,height:Gi}),this.resetFrame(),this.stopAccumulating();var na=Oe.multiPassRenderer.getPostProcessor().getReadFBO();jn(na,function(){Zn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:na}),Oe.multiPassRenderer.setRenderFlag(!1),Oe.render(),Oe.multiPassRenderer.setRenderFlag(!0)});var ga=function La(ui){!lt.accumulatingId||ui!==lt.accumulatingId||lt.isFinished()||(lt.doRender(Oe),window.requestAnimationFrame(function(){La(ui)}))};this.accumulatingId=xl++,this.timer=window.setTimeout(function(){ga(lt.accumulatingId)},50)}},{key:"doRender",value:function(Oe){var lt=this,un=this.rendererService,Zn=un.clear,mn=un.getViewportSize,jn=un.useFramebuffer,zr=mn(),li=zr.width,Gi=zr.height,na=Oe.getLayerConfig(),ga=na.jitterScale,La=ga===void 0?1:ga,ui=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((ui[0]*2-1)/li*La,(ui[1]*2-1)/Gi*La),Oe.multiPassRenderer.setRenderFlag(!1),Oe.hooks.beforeRender.call(),jn(this.sampleRenderTarget,function(){Zn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:lt.sampleRenderTarget}),Oe.render()}),Oe.hooks.afterRender.call(),Oe.multiPassRenderer.setRenderFlag(!0);var Ka=Oe.getLayerConfig();jn(this.outputRenderTarget,function(){lt.blendModel.draw({uniforms:{u_opacity:Ka.opacity||1,u_MixRatio:lt.frame===0?1:.9,u_Diffuse1:lt.sampleRenderTarget,u_Diffuse2:lt.frame===0?Oe.multiPassRenderer.getPostProcessor().getReadFBO():lt.prevRenderTarget}})}),this.frame===0&&Zn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(jn(this.copyRenderTarget,function(){lt.outputModel.draw({uniforms:{u_Texture:lt.outputRenderTarget}})}),jn(Oe.multiPassRenderer.getPostProcessor().getReadFBO(),function(){lt.copyModel.draw({uniforms:{u_Texture:lt.copyRenderTarget}})}),Oe.multiPassRenderer.getPostProcessor().render(Oe));var uo=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=uo,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(Oe,lt,un){this.shaderModuleService.registerModule(Oe,{vs:Zh,fs:lt});var Zn=this.shaderModuleService.getModule(Oe),mn=Zn.vs,jn=Zn.fs,zr=Zn.uniforms,li=this.rendererService,Gi=li.createAttribute,na=li.createBuffer,ga=li.createModel;return ga((0,ee.Z)({vs:mn,fs:jn,attributes:{a_Position:Gi({buffer:na({data:[-4,-4,4,-4,0,4],type:pe.FLOAT}),size:2})},uniforms:(0,ee.Z)({},zr),depth:{enable:!1},count:3},un))}}]),Ne}(Hs);function Rc(Z){var Vt=df();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function df(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Wu=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,gh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,pf=Q.rU.isNil,Vh=function(Z){(0,_n.Z)(Ne,Z);var Vt=Rc(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:gh,fs:Wu});var Oe=this.shaderModuleService.getModule("blur-pass"),lt=Oe.vs,un=Oe.fs,Zn=Oe.uniforms,mn=this.rendererService.getViewportSize(),jn=mn.width,zr=mn.height;return{vs:lt,fs:un,uniforms:(0,ee.Z)((0,ee.Z)({},Zn),{},{u_ViewportSize:[jn,zr]})}}},{key:"convertOptionsToUniforms",value:function(Oe){var lt={};return pf(Oe.bloomRadius)||(lt.u_radius=Oe.bloomRadius),pf(Oe.bloomIntensity)||(lt.u_intensity=Oe.bloomIntensity),pf(Oe.bloomBaseRadio)||(lt.u_baseRadio=Oe.bloomBaseRadio),lt}}]),Ne}(Se);function Qc(Z){var Vt=Pl();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Pl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var cp=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Md=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,yh=Q.rU.isNil,Qf=function(Z){(0,_n.Z)(Ne,Z);var Vt=Qc(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Md,fs:cp});var Oe=this.shaderModuleService.getModule("blur-pass"),lt=Oe.vs,un=Oe.fs,Zn=Oe.uniforms,mn=this.rendererService.getViewportSize(),jn=mn.width,zr=mn.height;return{vs:lt,fs:un,uniforms:(0,ee.Z)((0,ee.Z)({},Zn),{},{u_ViewportSize:[jn,zr]})}}},{key:"convertOptionsToUniforms",value:function(Oe){var lt={};return yh(Oe.blurRadius)||(lt.u_BlurDir=[Oe.blurRadius,0]),lt}}]),Ne}(Se);function Jc(Z){var Vt=Jf();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Jf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var eh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,vf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fp=Q.rU.isNil,ud=function(Z){(0,_n.Z)(Ne,Z);var Vt=Jc(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:vf,fs:eh});var Oe=this.shaderModuleService.getModule("blur-pass"),lt=Oe.vs,un=Oe.fs,Zn=Oe.uniforms,mn=this.rendererService.getViewportSize(),jn=mn.width,zr=mn.height;return{vs:lt,fs:un,uniforms:(0,ee.Z)((0,ee.Z)({},Zn),{},{u_ViewportSize:[jn,zr]})}}},{key:"convertOptionsToUniforms",value:function(Oe){var lt={};return fp(Oe.blurRadius)||(lt.u_BlurDir=[0,Oe.blurRadius]),lt}}]),Ne}(Se);function hp(Z){var Vt=Df();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Df(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var dp=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Hh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ld=function(Z){(0,_n.Z)(Ne,Z);var Vt=hp(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Hh,fs:dp});var Oe=this.shaderModuleService.getModule("colorhalftone-pass"),lt=Oe.vs,un=Oe.fs,Zn=Oe.uniforms,mn=this.rendererService.getViewportSize(),jn=mn.width,zr=mn.height;return{vs:lt,fs:un,uniforms:(0,ee.Z)((0,ee.Z)({},Zn),{},{u_ViewportSize:[jn,zr]})}}}]),Ne}(Se);function El(Z){var Vt=Pc();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Pc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var tl=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Wh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,th=function(Z){(0,_n.Z)(Ne,Z);var Vt=El(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Wh,fs:tl}),this.shaderModuleService.getModule("copy-pass")}}]),Ne}(Se);function Ns(Z){var Vt=Rd();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Rd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Wl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Nf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,is=function(Z){(0,_n.Z)(Ne,Z);var Vt=Ns(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Nf,fs:Wl});var Oe=this.shaderModuleService.getModule("hexagonalpixelate-pass"),lt=Oe.vs,un=Oe.fs,Zn=Oe.uniforms,mn=this.rendererService.getViewportSize(),jn=mn.width,zr=mn.height;return{vs:lt,fs:un,uniforms:(0,ee.Z)((0,ee.Z)({},Zn),{},{u_ViewportSize:[jn,zr]})}}}]),Ne}(Se);function Bs(Z){var Vt=ic();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var cd=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,mf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ic=function(Z){(0,_n.Z)(Ne,Z);var Vt=Bs(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:mf,fs:cd});var Oe=this.shaderModuleService.getModule("ink-pass"),lt=Oe.vs,un=Oe.fs,Zn=Oe.uniforms,mn=this.rendererService.getViewportSize(),jn=mn.width,zr=mn.height;return{vs:lt,fs:un,uniforms:(0,ee.Z)((0,ee.Z)({},Zn),{},{u_ViewportSize:[jn,zr]})}}}]),Ne}(Se);function Vp(Z){var Vt=Pd();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function Pd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var fd=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,_h=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,nl=function(Z){(0,_n.Z)(Ne,Z);var Vt=Vp(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:_h,fs:fd}),this.shaderModuleService.getModule("noise-pass")}}]),Ne}(Se);function ru(Z){var Vt=bh();return function(){var $e=(0,Bn.Z)(Z),Oe;if(Vt){var lt=(0,Bn.Z)(this).constructor;Oe=Reflect.construct($e,arguments,lt)}else Oe=$e.apply(this,arguments);return(0,Sn.Z)(this,Oe)}}function bh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var pp=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,uu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Ma=function(Z){(0,_n.Z)(Ne,Z);var Vt=ru(Ne);function Ne(){return(0,ae.Z)(this,Ne),Vt.apply(this,arguments)}return(0,T.Z)(Ne,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:pp,fs:uu}),this.shaderModuleService.getModule("sepia-pass")}}]),Ne}(Se),Il=new sa,$h=0;function xh(){var Z=new sd,Vt=new Oo,Ne=new Je,$e=new _a(Ne),Oe=new Di,lt=new ko,un=new On,Zn=new Cr,mn=new Ht,jn={id:"".concat($h++),globalConfigService:Il,shaderModuleService:Z,debugService:Vt,cameraService:Ne,coordinateSystemService:$e,fontService:Oe,iconService:lt,markerService:un,popupService:Zn,controlService:mn,customRenderService:{}},zr=new Pf(jn);jn.layerService=zr;var li=new sp(jn);jn.sceneService=li;var Gi=new Xr(jn);jn.interactionService=Gi;var na=new Rl(jn);jn.pickingService=na;var ga={clear:new ku,pixelPicking:new Kf,render:new Ts,taa:new Kc(Z)};jn.normalPassFactory=function(ui){return ga[ui]};var La={copy:new th,bloom:new Vh,blurH:new Qf,blurV:new ud,noise:new nl,sepia:new Ma,colorHalftone:new ld,hexagonalPixelate:new is,ink:new Ic};return jn.postProcessingPass=La,jn.postProcessingPassFactory=function(ui){return La[ui]},jn}function qo(Z){var Vt=(0,ee.Z)({},Z);return Vt.postProcessor=new Lf(Vt.rendererService),Vt.multiPassRenderer=new jh(Vt.postProcessor),Vt.styleAttributeService=new Uh(Vt.rendererService),Vt}var As=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Eh=function(Z){return Z.IMAGE="image",Z.CUSTOMIMAGE="customImage",Z.ARRAYBUFFER="arraybuffer",Z.RGB="rgb",Z.TERRAINRGB="terrainRGB",Z.CUSTOMRGB="customRGB",Z.CUSTOMARRAYBUFFER="customArrayBuffer",Z.CUSTOMTERRAINRGB="customTerrainRGB",Z}({})},83366:function(It,G,D){"use strict";D.d(G,{Z:function(){return Yr}});var ee=D(15671),ae=D(43144),T=D(60136),ne=D(82963),Q=D(61120),ge=D(1413),pe=function(){function bt(ve){(0,ee.Z)(this,bt),this.config=ve}return(0,ae.Z)(bt,[{key:"setContainer",value:function(ye,Ke,ht){this.configService=ye.globalConfigService,ye.mapConfig=(0,ge.Z)((0,ge.Z)({},this.config),{},{id:Ke,canvas:ht}),ye.mapService=new(this.getServiceConstructor())(ye)}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),bt}(),Ce=D(45987),he=D(15861),st=D(97326),re=D(4942),Se=D(64687),se=D.n(Se),de=D(85975),xe=D(77160),le=D(6158),Ue=D.n(le),Et=D(88120),mt=D(57059),Wt=D(26729),Rt=function(){function bt(ve){(0,ee.Z)(this,bt),(0,re.Z)(this,"size",1e4),this.size=ve||1e4}return(0,ae.Z)(bt,[{key:"setSize",value:function(ye){this.size=ye}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(ye){return(180+ye)/360*this.size}},{key:"mercatorYfromLat",value:function(ye){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ye*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(ye){return ye/this.size*360-180}},{key:"latFromMercatorY",value:function(ye){var Ke=180-(1-ye/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(Ke*Math.PI/180))-90}},{key:"project",value:function(ye){var Ke=this.mercatorXfromLng(ye[0]),ht=this.mercatorYfromLat(ye[1]);return[Ke,ht]}},{key:"unproject",value:function(ye){var Ke=this.lngFromMercatorX(ye[0]),ht=this.latFromMercatorY(ye[1]);return[Ke,ht]}}]),bt}(),Tt={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Ze={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Ie=12,Qe=function(){function bt(ve){var ye=this;(0,ee.Z)(this,bt),(0,re.Z)(this,"version","DEFAUlTMAP"),(0,re.Z)(this,"simpleMapCoord",new Rt),(0,re.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,re.Z)(this,"handleCameraChanged",function(Ke){var ht=ye.map.getCenter(),xt=ht.lat,Jt=ht.lng;ye.emit("mapchange"),ye.viewport.syncWithMapCamera({bearing:ye.map.getBearing(),center:[Jt,xt],viewportHeight:ye.map.transform.height,pitch:ye.map.getPitch(),viewportWidth:ye.map.transform.width,zoom:ye.map.getZoom(),cameraHeight:0}),ye.updateCoordinateSystemService(),ye.cameraChangedCallback(ye.viewport)}),this.config=ve.mapConfig,this.configService=ve.globalConfigService,this.coordinateSystemService=ve.coordinateSystemService,this.eventEmitter=new Wt.EventEmitter}return(0,ae.Z)(bt,[{key:"setBgColor",value:function(ye){this.bgColor=ye}},{key:"addMarkerContainer",value:function(){var ye=this.map.getCanvasContainer();this.markerContainer=mt.SO.create("div","l7-marker-container",ye),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"getCanvasOverlays",value:function(){}},{key:"on",value:function(ye,Ke){Et.I9.indexOf(ye)!==-1?this.eventEmitter.on(ye,Ke):this.map.on(Ze[ye]||ye,Ke)}},{key:"off",value:function(ye,Ke){this.map.off(Ze[ye]||ye,Ke),this.eventEmitter.off(ye,Ke)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();var ye=this.map.transform;return[ye.width,ye.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(ye){return this.map.setZoom(ye)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(ye){this.map.setCenter(ye)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(ye){this.map.setBearing(ye)}},{key:"zoomIn",value:function(ye,Ke){this.map.zoomIn(ye,Ke)}},{key:"zoomOut",value:function(ye,Ke){this.map.zoomOut(ye,Ke)}},{key:"setPitch",value:function(ye){return this.map.setPitch(ye)}},{key:"panTo",value:function(ye){this.map.panTo(ye)}},{key:"panBy",value:function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy([ye,Ke])}},{key:"fitBounds",value:function(ye,Ke){this.map.fitBounds(ye,Ke)}},{key:"setMaxZoom",value:function(ye){this.map.setMaxZoom(ye)}},{key:"setMinZoom",value:function(ye){this.map.setMinZoom(ye)}},{key:"setMapStatus",value:function(ye){ye.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),ye.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),ye.dragEnable===!1&&this.map.dragPan.disable(),ye.dragEnable===!0&&this.map.dragPan.enable(),ye.rotateEnable===!1&&this.map.dragRotate.disable(),ye.dragEnable===!0&&this.map.dragRotate.enable(),ye.keyboardEnable===!1&&this.map.keyboard.disable(),ye.keyboardEnable===!0&&this.map.keyboard.enable(),ye.zoomEnable===!1&&this.map.scrollZoom.disable(),ye.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(ye,Ke){this.map.flyTo({zoom:ye,center:Ke})}},{key:"setMapStyle",value:function(ye){this.map.setStyle(this.getMapStyleValue(ye))}},{key:"meterToCoord",value:function(ye,Ke){return 1}},{key:"pixelToLngLat",value:function(ye){return this.map.unproject(ye)}},{key:"lngLatToPixel",value:function(ye){return this.map.project(ye)}},{key:"containerToLngLat",value:function(ye){return this.map.unproject(ye)}},{key:"lngLatToContainer",value:function(ye){return this.map.project(ye)}},{key:"getMapStyle",value:function(){try{var ye,Ke=(ye=this.map.getStyle().sprite)!==null&&ye!==void 0?ye:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(Ke)?Ke==null?void 0:Ke.replace(/\/\w+$/,"").replace(/sprites/,"styles"):Ke}catch(ht){return""}}},{key:"getMapStyleConfig",value:function(){return Tt}},{key:"getMapStyleValue",value:function(ye){var Ke;return(Ke=this.getMapStyleConfig()[ye])!==null&&Ke!==void 0?Ke:ye}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(ye){for(var Ke,ht=arguments.length,xt=new Array(ht>1?ht-1:0),Jt=1;Jt<ht;Jt++)xt[Jt-1]=arguments[Jt];(Ke=this.eventEmitter).emit.apply(Ke,[ye].concat(xt))}},{key:"once",value:function(ye){for(var Ke,ht=arguments.length,xt=new Array(ht>1?ht-1:0),Jt=1;Jt<ht;Jt++)xt[Jt-1]=arguments[Jt];(Ke=this.eventEmitter).once.apply(Ke,[ye].concat(xt))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(ye){var Ke=this.map.getCanvas(),ht=ye==="jpg"?Ke==null?void 0:Ke.toDataURL("image/jpeg"):Ke==null?void 0:Ke.toDataURL("image/png");return ht}},{key:"onCameraChanged",value:function(ye){this.cameraChangedCallback=ye}},{key:"creatMapContainer",value:function(ye){var Ke=ye;return typeof ye=="string"&&(Ke=document.getElementById(ye)),Ke}},{key:"updateView",value:function(ye){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:ye.bearing,center:ye.center,viewportHeight:ye.viewportHeight,pitch:ye.pitch,viewportWidth:ye.viewportWidth,zoom:ye.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var ye=this.config.offsetCoordinate,Ke=ye===void 0?!0:ye;this.viewport.getZoom()>Ie&&Ke?this.coordinateSystemService.setCoordinateSystem(Et.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Et.lo.LNGLAT)}}]),bt}(),it=D(97685),De=D(98333);function cn(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function qe(bt,ve){var ye=De.fF([],ve,bt);return De.bA(ye,ye,1/ye[3]),ye}function Pt(bt,ve){var ye=bt%ve;return ye<0?ve+ye:ye}function Le(bt,ve,ye){return ye*ve+(1-ye)*bt}var pt=D(31437);function at(bt,ve){if(!bt)throw new Error(ve||"viewport-mercator-project: assertion failed.")}var nt=Math.PI,Ct=nt/4,rt=nt/180,vt=180/nt,Ve=512,hn=4003e4,yn=1.5;function ir(bt){return Math.pow(2,bt)}function Qn(bt){return Math.log2(bt)}function Ut(bt,ve){var ye=(0,it.Z)(bt,2),Ke=ye[0],ht=ye[1];at(Number.isFinite(Ke)&&Number.isFinite(ve)),at(Number.isFinite(ht)&&ht>=-90&&ht<=90,"invalid latitude"),ve*=Ve;var xt=Ke*rt,Jt=ht*rt,Dn=ve*(xt+nt)/(2*nt),fr=ve*(nt-Math.log(Math.tan(Ct+Jt*.5)))/(2*nt);return[Dn,fr]}function En(bt,ve){var ye=(0,it.Z)(bt,2),Ke=ye[0],ht=ye[1];ve*=Ve;var xt=Ke/ve*(2*nt)-nt,Jt=2*(Math.atan(Math.exp(nt-ht/ve*(2*nt)))-Ct);return[xt*vt,Jt*vt]}function Tn(bt){var ve=bt.latitude;assert(Number.isFinite(ve));var ye=Math.cos(ve*rt);return Qn(hn*ye)-9}function lr(bt){var ve=bt.latitude,ye=bt.longitude,Ke=bt.zoom,ht=bt.scale,xt=bt.highPrecision,Jt=xt===void 0?!1:xt;ht=ht!==void 0?ht:ir(Ke),at(Number.isFinite(ve)&&Number.isFinite(ye)&&Number.isFinite(ht));var Dn={},fr=Ve*ht,In=Math.cos(ve*rt),ke=fr/360,Pe=ke/In,Ge=fr/hn/In;if(Dn.pixelsPerMeter=[Ge,-Ge,Ge],Dn.metersPerPixel=[1/Ge,-1/Ge,1/Ge],Dn.pixelsPerDegree=[ke,-Pe,Ge],Dn.degreesPerPixel=[1/ke,-1/Pe,1/Ge],Jt){var gt=rt*Math.tan(ve*rt)/In,Bt=ke*gt/2,an=fr/hn*gt,An=an/Pe*Ge;Dn.pixelsPerDegree2=[0,-Bt,an],Dn.pixelsPerMeter2=[An,0,An]}return Dn}function ln(bt,ve){var ye=_slicedToArray(bt,3),Ke=ye[0],ht=ye[1],xt=ye[2],Jt=_slicedToArray(ve,3),Dn=Jt[0],fr=Jt[1],In=Jt[2],ke=1,Pe=lr({longitude:Ke,latitude:ht,scale:ke,highPrecision:!0}),Ge=Pe.pixelsPerMeter,gt=Pe.pixelsPerMeter2,Bt=Ut(bt,ke);Bt[0]+=Dn*(Ge[0]+gt[0]*fr),Bt[1]+=fr*(Ge[1]+gt[1]*fr);var an=En(Bt,ke),An=(xt||0)+(In||0);return Number.isFinite(xt)||Number.isFinite(In)?[an[0],an[1],An]:an}function Lt(bt){var ve=bt.height,ye=bt.pitch,Ke=bt.bearing,ht=bt.altitude,xt=bt.center,Jt=xt===void 0?null:xt,Dn=bt.flipY,fr=Dn===void 0?!1:Dn,In=cn();return de.translate(In,In,[0,0,-ht]),de.scale(In,In,[1,1,1/ve]),de.rotateX(In,In,-ye*rt),de.rotateZ(In,In,Ke*rt),fr&&de.scale(In,In,[1,-1,1]),Jt&&de.translate(In,In,xe.negate([],Jt)),In}function bn(bt){var ve=bt.width,ye=bt.height,Ke=bt.altitude,ht=Ke===void 0?yn:Ke,xt=bt.pitch,Jt=xt===void 0?0:xt,Dn=bt.nearZMultiplier,fr=Dn===void 0?1:Dn,In=bt.farZMultiplier,ke=In===void 0?1:In,Pe=Jt*rt,Ge=Math.atan(.5/ht),gt=Math.sin(Ge)*ht/Math.sin(Math.PI/2-Pe-Ge),Bt=Math.cos(Math.PI/2-Pe)*gt+ht;return{fov:2*Math.atan(ye/2/ht),aspect:ve/ye,focalDistance:ht,near:fr,far:Bt*ke}}function Xe(bt){var ve=bt.width,ye=bt.height,Ke=bt.pitch,ht=bt.altitude,xt=bt.nearZMultiplier,Jt=bt.farZMultiplier,Dn=bn({width:ve,height:ye,altitude:ht,pitch:Ke,nearZMultiplier:xt,farZMultiplier:Jt}),fr=Dn.fov,In=Dn.aspect,ke=Dn.near,Pe=Dn.far,Ge=de.perspective([],fr,In,ke,Pe);return Ge}function Fe(bt,ve){var ye=(0,it.Z)(bt,3),Ke=ye[0],ht=ye[1],xt=ye[2],Jt=xt===void 0?0:xt;return at(Number.isFinite(Ke)&&Number.isFinite(ht)&&Number.isFinite(Jt)),qe(ve,[Ke,ht,Jt,1])}function on(bt,ve){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ke=(0,it.Z)(bt,3),ht=Ke[0],xt=Ke[1],Jt=Ke[2];if(at(Number.isFinite(ht)&&Number.isFinite(xt),"invalid pixel coordinate"),Number.isFinite(Jt)){var Dn=qe(ve,[ht,xt,Jt,1]);return Dn}var fr=qe(ve,[ht,xt,0,1]),In=qe(ve,[ht,xt,1,1]),ke=fr[2],Pe=In[2],Ge=ke===Pe?0:((ye||0)-ke)/(Pe-ke);return pt.t7([],fr,In,Ge)}var B=cn(),be=function(){function bt(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=ve.width,Ke=ve.height,ht=ve.viewMatrix,xt=ht===void 0?B:ht,Jt=ve.projectionMatrix,Dn=Jt===void 0?B:Jt;(0,ee.Z)(this,bt),this.width=ye||1,this.height=Ke||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=xt,this.projectionMatrix=Dn;var fr=cn();de.multiply(fr,fr,this.projectionMatrix),de.multiply(fr,fr,this.viewMatrix),this.viewProjectionMatrix=fr;var In=cn();de.scale(In,In,[this.width/2,-this.height/2,1]),de.translate(In,In,[1,-1,0]),de.multiply(In,In,this.viewProjectionMatrix);var ke=de.invert(cn(),In);if(!ke)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=In,this.pixelUnprojectionMatrix=ke,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,ae.Z)(bt,[{key:"equals",value:function(ye){return ye instanceof bt?ye.width===this.width&&ye.height===this.height&&de.equals(ye.projectionMatrix,this.projectionMatrix)&&de.equals(ye.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(ye){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ht=Ke.topLeft,xt=ht===void 0?!0:ht,Jt=this.projectPosition(ye),Dn=Fe(Jt,this.pixelProjectionMatrix),fr=(0,it.Z)(Dn,2),In=fr[0],ke=fr[1],Pe=xt?ke:this.height-ke;return ye.length===2?[In,Pe]:[In,Pe,Dn[2]]}},{key:"unproject",value:function(ye){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ht=Ke.topLeft,xt=ht===void 0?!0:ht,Jt=Ke.targetZ,Dn=(0,it.Z)(ye,3),fr=Dn[0],In=Dn[1],ke=Dn[2],Pe=xt?In:this.height-In,Ge=Jt&&Jt*this.pixelsPerMeter,gt=on([fr,Pe,ke],this.pixelUnprojectionMatrix,Ge),Bt=this.unprojectPosition(gt),an=(0,it.Z)(Bt,3),An=an[0],kt=an[1],Dt=an[2];return Number.isFinite(ke)?[An,kt,Dt]:Number.isFinite(Jt)?[An,kt,Jt]:[An,kt]}},{key:"projectPosition",value:function(ye){var Ke=this.projectFlat(ye),ht=(0,it.Z)(Ke,2),xt=ht[0],Jt=ht[1],Dn=(ye[2]||0)*this.pixelsPerMeter;return[xt,Jt,Dn]}},{key:"unprojectPosition",value:function(ye){var Ke=this.unprojectFlat(ye),ht=(0,it.Z)(Ke,2),xt=ht[0],Jt=ht[1],Dn=(ye[2]||0)/this.pixelsPerMeter;return[xt,Jt,Dn]}},{key:"projectFlat",value:function(ye){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return ye}},{key:"unprojectFlat",value:function(ye){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return ye}}]),bt}();function yt(bt){var ve=bt.width,ye=bt.height,Ke=bt.bounds,ht=bt.minExtent,xt=ht===void 0?0:ht,Jt=bt.maxZoom,Dn=Jt===void 0?24:Jt,fr=bt.padding,In=fr===void 0?0:fr,ke=bt.offset,Pe=ke===void 0?[0,0]:ke,Ge=(0,it.Z)(Ke,2),gt=(0,it.Z)(Ge[0],2),Bt=gt[0],an=gt[1],An=(0,it.Z)(Ge[1],2),kt=An[0],Dt=An[1];if(Number.isFinite(In)){var dn=In;In={top:dn,bottom:dn,left:dn,right:dn}}else at(Number.isFinite(In.top)&&Number.isFinite(In.bottom)&&Number.isFinite(In.left)&&Number.isFinite(In.right));var He=new Ee({width:ve,height:ye,longitude:0,latitude:0,zoom:0}),ei=He.project([Bt,Dt]),Tr=He.project([kt,an]),ii=[Math.max(Math.abs(Tr[0]-ei[0]),xt),Math.max(Math.abs(Tr[1]-ei[1]),xt)],Di=[ve-In.left-In.right-Math.abs(Pe[0])*2,ye-In.top-In.bottom-Math.abs(Pe[1])*2];at(Di[0]>0&&Di[1]>0);var vi=Di[0]/ii[0],Br=Di[1]/ii[1],Gr=(In.right-In.left)/2/vi,bi=(In.bottom-In.top)/2/Br,Ni=[(Tr[0]+ei[0])/2+Gr,(Tr[1]+ei[1])/2+bi],Qa=He.unproject(Ni),Xi=He.zoom+Math.log2(Math.abs(Math.min(vi,Br)));return{longitude:Qa[0],latitude:Qa[1],zoom:Math.min(Xi,Dn)}}var Ee=function(bt){(0,T.Z)(ve,bt);function ve(){var ye,Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht=Ke.width,xt=Ke.height,Jt=Ke.latitude,Dn=Jt===void 0?0:Jt,fr=Ke.longitude,In=fr===void 0?0:fr,ke=Ke.zoom,Pe=ke===void 0?0:ke,Ge=Ke.pitch,gt=Ge===void 0?0:Ge,Bt=Ke.bearing,an=Bt===void 0?0:Bt,An=Ke.altitude,kt=An===void 0?1.5:An,Dt=Ke.nearZMultiplier,dn=Ke.farZMultiplier;(0,ee.Z)(this,ve),ht=ht||1,xt=xt||1;var He=ir(Pe);kt=Math.max(.75,kt);var ei=Ut([In,Dn],He);ei[2]=0;var Tr=Xe({width:ht,height:xt,pitch:gt,bearing:an,altitude:kt,nearZMultiplier:Dt||1/xt,farZMultiplier:dn||1.01}),ii=Lt({height:xt,center:ei,pitch:gt,bearing:an,altitude:kt,flipY:!0});return ye=(0,ne.Z)(this,(0,Q.Z)(ve).call(this,{width:ht,height:xt,viewMatrix:ii,projectionMatrix:Tr})),ye.latitude=Dn,ye.longitude=In,ye.zoom=Pe,ye.pitch=gt,ye.bearing=an,ye.altitude=kt,ye.scale=He,ye.center=ei,ye.pixelsPerMeter=lr((0,st.Z)((0,st.Z)(ye))).pixelsPerMeter[2],Object.freeze((0,st.Z)((0,st.Z)(ye))),ye}return(0,ae.Z)(ve,[{key:"projectFlat",value:function(Ke){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ut(Ke,ht)}},{key:"unprojectFlat",value:function(Ke){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return En(Ke,ht)}},{key:"getMapCenterByLngLatPosition",value:function(Ke){var ht=Ke.lngLat,xt=Ke.pos,Jt=on(xt,this.pixelUnprojectionMatrix),Dn=Ut(ht,this.scale),fr=pt.IH([],Dn,pt.tk([],Jt)),In=pt.IH([],this.center,fr);return En(In,this.scale)}},{key:"getLocationAtPoint",value:function(Ke){var ht=Ke.lngLat,xt=Ke.pos;return this.getMapCenterByLngLatPosition({lngLat:ht,pos:xt})}},{key:"fitBounds",value:function(Ke){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xt=this.width,Jt=this.height,Dn=yt(Object.assign({width:xt,height:Jt,bounds:Ke},ht)),fr=Dn.longitude,In=Dn.latitude,ke=Dn.zoom;return new ve({width:xt,height:Jt,longitude:fr,latitude:In,zoom:ke})}}]),ve}(be),Zt=function(){function bt(){(0,ee.Z)(this,bt)}return(0,ae.Z)(bt,[{key:"syncWithMapCamera",value:function(ye){var Ke=ye.center,ht=ye.zoom,xt=ye.pitch,Jt=ye.bearing,Dn=ye.viewportHeight,fr=ye.viewportWidth;this.viewport=new Ee({width:fr,height:Dn,longitude:Ke&&Ke[0],latitude:Ke&&Ke[1],zoom:ht,pitch:xt,bearing:Jt})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(ye,Ke){return this.viewport.projectFlat(ye,Ke)}}]),bt}(),_n=["id","attributionControl","style","token","rotation","mapInstance"];function Sn(bt){var ve=Bn();return function(){var Ke=(0,Q.Z)(bt),ht;if(ve){var xt=(0,Q.Z)(this).constructor;ht=Reflect.construct(Ke,arguments,xt)}else ht=Ke.apply(this,arguments);return(0,ne.Z)(this,ht)}}function Bn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(bt){return!1}}function or(bt,ve){var ye=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ke=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(ye||Ke)&&(ve||(ve=document),!!ve)){var ht=ve.head||ve.getElementsByTagName("head")[0];if(!ht){ht=ve.createElement("head");var xt=ve.body||ve.getElementsByTagName("body")[0];xt?xt.parentNode.insertBefore(ht,xt):ve.documentElement.appendChild(ht)}var Jt=ve.createElement("style");return Jt.type="text/css",Jt.styleSheet?Jt.styleSheet.cssText=bt:Jt.appendChild(ve.createTextNode(bt)),ht.appendChild(Jt),Jt}}or(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=Ue();var dr=0,gr="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",wr=function(bt){(0,T.Z)(ye,bt);var ve=Sn(ye);function ye(){var Ke;(0,ee.Z)(this,ye);for(var ht=arguments.length,xt=new Array(ht),Jt=0;Jt<ht;Jt++)xt[Jt]=arguments[Jt];return Ke=ve.call.apply(ve,[this].concat(xt)),(0,re.Z)((0,st.Z)(Ke),"version","MAPBOX"),Ke}return(0,ae.Z)(ye,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(ht){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},Jt=this.lngLatToMercator(ht,0),Dn=Jt.x,fr=Jt.y;return[Dn-xt.x,fr-xt.y]}},{key:"lngLatToMercator",value:function(ht,xt){var Jt=window.mapboxgl.MercatorCoordinate.fromLngLat(ht,xt),Dn=Jt.x,fr=Dn===void 0?0:Dn,In=Jt.y,ke=In===void 0?0:In,Pe=Jt.z,Ge=Pe===void 0?0:Pe;return{x:fr,y:ke,z:Ge}}},{key:"getModelMatrix",value:function(ht,xt,Jt){var Dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],fr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},In=window.mapboxgl.MercatorCoordinate.fromLngLat(ht,xt),ke=In.meterInMercatorCoordinateUnits(),Pe=de.create();return de.translate(Pe,Pe,xe.fromValues(In.x-fr.x,In.y-fr.y,In.z||0-fr.z)),de.scale(Pe,Pe,xe.fromValues(ke*Dn[0],-ke*Dn[1],ke*Dn[2])),de.rotateX(Pe,Pe,Jt[0]),de.rotateY(Pe,Pe,Jt[1]),de.rotateZ(Pe,Pe,Jt[2]),Pe}},{key:"init",value:function(){var Ke=(0,he.Z)(se().mark(function xt(){var Jt=this,Dn,fr,In,ke,Pe,Ge,gt,Bt,an,An,kt,Dt,dn;return se().wrap(function(ei){for(;;)switch(ei.prev=ei.next){case 0:Dn=this.config,fr=Dn.id,In=fr===void 0?"map":fr,ke=Dn.attributionControl,Pe=ke===void 0?!1:ke,Ge=Dn.style,gt=Ge===void 0?"light":Ge,Bt=Dn.token,an=Bt===void 0?gr:Bt,An=Dn.rotation,kt=An===void 0?0:An,Dt=Dn.mapInstance,dn=(0,Ce.Z)(Dn,_n),this.viewport=new Zt,!Dt&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),an===gr&&gt!=="blank"&&!window.mapboxgl.accessToken&&!Dt&&console.warn(this.configService.getSceneWarninfo("MapToken")),!Dt&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=an),Dt?(this.map=Dt,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(In),this.map=new window.mapboxgl.Map((0,ge.Z)({container:this.$mapContainer,style:this.getMapStyleValue(gt),attributionControl:Pe,bearing:kt},dn))),this.map.on("load",function(){Jt.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return ei.stop()}},xt,this)}));function ht(){return Ke.apply(this,arguments)}return ht}()},{key:"destroy",value:function(){var ht;(ht=this.$mapContainer)===null||ht===void 0||(ht=ht.parentNode)===null||ht===void 0||ht.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(ht){for(var xt,Jt=arguments.length,Dn=new Array(Jt>1?Jt-1:0),fr=1;fr<Jt;fr++)Dn[fr-1]=arguments[fr];(xt=this.eventEmitter).emit.apply(xt,[ht].concat(Dn))}},{key:"once",value:function(ht){for(var xt,Jt=arguments.length,Dn=new Array(Jt>1?Jt-1:0),fr=1;fr<Jt;fr++)Dn[fr-1]=arguments[fr];(xt=this.eventEmitter).once.apply(xt,[ht].concat(Dn))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"getCanvasOverlays",value:function(){var ht;return(ht=this.getMapContainer())===null||ht===void 0?void 0:ht.querySelector(".mapboxgl-canvas-container")}},{key:"meterToCoord",value:function(ht,xt){var Jt=new(Ue()).LngLat(ht[0],ht[1]),Dn=new(Ue()).LngLat(xt[0],xt[1]),fr=Jt.distanceTo(Dn),In=Ue().MercatorCoordinate.fromLngLat({lng:ht[0],lat:ht[1]}),ke=Ue().MercatorCoordinate.fromLngLat({lng:xt[0],lat:xt[1]}),Pe=In.x,Ge=In.y,gt=ke.x,Bt=ke.y,an=Math.sqrt(Math.pow(Pe-gt,2)+Math.pow(Ge-Bt,2))*4194304*2;return an/fr}},{key:"exportMap",value:function(ht){var xt=this.map.getCanvas(),Jt=ht==="jpg"?xt==null?void 0:xt.toDataURL("image/jpeg"):xt==null?void 0:xt.toDataURL("image/png");return Jt}},{key:"creatMapContainer",value:function(ht){var xt=ht;typeof ht=="string"&&(xt=document.getElementById(ht));var Jt=document.createElement("div");return Jt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Jt.id="l7_mapbox_div"+dr++,xt.appendChild(Jt),Jt}}]),ye}(Qe);function Ar(bt){var ve=Ir();return function(){var Ke=(0,Q.Z)(bt),ht;if(ve){var xt=(0,Q.Z)(this).constructor;ht=Reflect.construct(Ke,arguments,xt)}else ht=Ke.apply(this,arguments);return(0,ne.Z)(this,ht)}}function Ir(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(bt){return!1}}function Nr(bt,ve){var ye=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ke=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(ye||Ke)&&(ve||(ve=document),!!ve)){var ht=ve.head||ve.getElementsByTagName("head")[0];if(!ht){ht=ve.createElement("head");var xt=ve.body||ve.getElementsByTagName("body")[0];xt?xt.parentNode.insertBefore(ht,xt):ve.documentElement.appendChild(ht)}var Jt=ve.createElement("style");return Jt.type="text/css",Jt.styleSheet?Jt.styleSheet.cssText=bt:Jt.appendChild(ve.createTextNode(bt)),ht.appendChild(Jt),Jt}}Nr(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var Yr=function(bt){(0,T.Z)(ye,bt);var ve=Ar(ye);function ye(){return(0,ee.Z)(this,ye),ve.apply(this,arguments)}return(0,ae.Z)(ye,[{key:"getServiceConstructor",value:function(){return wr}}]),ye}(pe)},57059:function(It,G,D){"use strict";D.d(G,{SO:function(){return ee},z6:function(){return ku},sN:function(){return R},oX:function(){return j},a5:function(){return ae},SA:function(){return de},nx:function(){return Nf},Z:function(){return mu},rQ:function(){return at},bV:function(){return pt},zi:function(){return nt},ds:function(){return su},oO:function(){return Ji},SI:function(){return sp},Rx:function(){return Xf},W0:function(){return Ve},LS:function(){return _i},Z6:function(){return hn},We:function(){return Vs},Co:function(){return Le},hj:function(){return Qn},Cl:function(){return yn},Oc:function(){return En},M4:function(){return ir},NJ:function(){return Ut},ks:function(){return Ze},Ol:function(){return Cc},fj:function(){return Lt},Yu:function(){return Qe},ZB:function(){return lr},gJ:function(){return Pt},z0:function(){return ic},jG:function(){return cd},M8:function(){return kf},fg:function(){return Bi},if:function(){return Zs},vP:function(){return ap},rU:function(){return Di},LF:function(){return Wt},Fv:function(){return If},yA:function(){return fo},yR:function(){return Y},CI:function(){return vt}});var ee={};D.r(ee),D.d(ee,{DPR:function(){return Cr},addClass:function(){return ao},addStyle:function(){return Er},appendElementType:function(){return fa},clearChildren:function(){return $i},create:function(){return Qa},css2Style:function(){return ya},empty:function(){return Kt},findParentElement:function(){return ea},getClass:function(){return wt},getContainer:function(){return Br},getDiffRect:function(){return wi},getStyleList:function(){return gi},getViewPortScale:function(){return On},hasClass:function(){return Ba},printCanvas:function(){return Ht},remove:function(){return Xi},removeClass:function(){return ko},removeStyle:function(){return aa},setChecked:function(){return sa},setClass:function(){return mi},setTransform:function(){return Yn},setUnDraggable:function(){return hi},splitWords:function(){return bi},toggleClass:function(){return Je},triggerResize:function(){return Gn},trim:function(){return Gr}});var ae={};D.r(ae),D.d(ae,{getColumn:function(){return Kf},getSatByColumn:function(){return Lf},max:function(){return qc},mean:function(){return jh},min:function(){return mc},mode:function(){return qf},statMap:function(){return gc},sum:function(){return nc}});var T=D(1413),ne=D(43144),Q=D(15671),ge=D(60136),pe=D(82963),Ce=D(61120),he=D(89611);function st(q){try{return Function.toString.call(q).indexOf("[native code]")!==-1}catch(ue){return typeof q=="function"}}var re=D(78814);function Se(q,ue,fe){if((0,re.Z)())return Reflect.construct.apply(null,arguments);var Me=[null];Me.push.apply(Me,ue);var ze=new(q.bind.apply(q,Me));return fe&&(0,he.Z)(ze,fe.prototype),ze}function se(q){var ue=typeof Map=="function"?new Map:void 0;return se=function(Me){if(Me===null||!st(Me))return Me;if(typeof Me!="function")throw new TypeError("Super expression must either be null or a function");if(typeof ue!="undefined"){if(ue.has(Me))return ue.get(Me);ue.set(Me,ze)}function ze(){return Se(Me,arguments,(0,Ce.Z)(this).constructor)}return ze.prototype=Object.create(Me.prototype,{constructor:{value:ze,enumerable:!1,writable:!0,configurable:!0}}),(0,he.Z)(ze,Me)},se(q)}var de={REGISTERED_PROTOCOLS:{}};function xe(q){var ue=le();return function(){var Me=(0,Ce.Z)(q),ze;if(ue){var Be=(0,Ce.Z)(this).constructor;ze=Reflect.construct(Me,arguments,Be)}else ze=Me.apply(this,arguments);return(0,pe.Z)(this,ze)}}function le(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}var Ue=function(ue){return de.REGISTERED_PROTOCOLS[ue.substring(0,ue.indexOf("://"))]},Et=function(q){(0,ge.Z)(fe,q);var ue=xe(fe);function fe(Me,ze,Be,en){var Qt;return(0,Q.Z)(this,fe),Qt=ue.call(this,"AJAXError: ".concat(ze," (").concat(Me,"): ").concat(Be)),Qt.status=Me,Qt.statusText=ze,Qt.url=Be,Qt.body=en,Qt}return(0,ne.Z)(fe)}(se(Error));function mt(q,ue){var fe=new XMLHttpRequest,Me=Array.isArray(q.url)?q.url[0]:q.url;fe.open(q.method||"GET",Me,!0),q.type==="arrayBuffer"&&(fe.responseType="arraybuffer");for(var ze in q.headers)q.headers.hasOwnProperty(ze)&&fe.setRequestHeader(ze,q.headers[ze]);return q.type==="json"&&(fe.responseType="text",fe.setRequestHeader("Accept","application/json")),fe.withCredentials=q.credentials==="include",fe.onerror=function(){ue(new Error(fe.statusText))},fe.onload=function(){if((fe.status>=200&&fe.status<300||fe.status===0)&&fe.response!==null){var Be=fe.response;if(q.type==="json")try{Be=JSON.parse(fe.response)}catch(Qt){return ue(Qt)}ue(null,Be,fe.getResponseHeader("Cache-Control"),fe.getResponseHeader("Expires"),fe)}else{var en=new Blob([fe.response],{type:fe.getResponseHeader("Content-Type")});ue(new Et(fe.status,fe.statusText,Me.toString(),en))}},fe.cancel=fe.abort,fe.send(q.body),fe}function Wt(q){return new Promise(function(ue,fe){mt(q,function(Me,ze,Be,en,Qt){Me?fe({err:Me,data:null,xhr:Qt}):ue({err:null,data:ze,cacheControl:Be,expires:en,xhr:Qt})})})}function Rt(q,ue){return mt(q,ue)}var Tt=function(ue,fe){var Me=Ue(ue.url)||Rt;return Me((0,T.Z)((0,T.Z)({},ue),{},{type:"json"}),fe)},Ze=function(ue,fe){var Me=Ue(ue.url)||Rt;return Me((0,T.Z)((0,T.Z)({},ue),{},{type:"arrayBuffer"}),fe)},Ie=function(ue,fe){return Rt(_objectSpread(_objectSpread({},ue),{},{method:"POST"}),fe)},Qe=function(ue,fe){return Rt((0,T.Z)((0,T.Z)({},ue),{},{method:"GET"}),fe)};function it(q){var ue=window.document.createElement("a");return ue.href=q,ue.protocol===window.document.location.protocol&&ue.host===window.document.location.host}var De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function cn(q,ue){var fe=new window.Image,Me=window.URL||window.webkitURL;fe.crossOrigin="anonymous",fe.onload=function(){ue(null,fe),Me.revokeObjectURL(fe.src),fe.onload=null,window.requestAnimationFrame(function(){fe.src=De})},fe.onerror=function(){return ue(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ze=new Blob([new Uint8Array(q)],{type:"image/png"});fe.src=q.byteLength?Me.createObjectURL(ze):De}function qe(q,ue){var fe=new Blob([new Uint8Array(q)],{type:"image/png"});createImageBitmap(fe).then(function(Me){ue(null,Me)}).catch(function(Me){ue(new Error("Could not load image because of ".concat(Me.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var Pt=function(ue,fe,Me){var ze=function(en,Qt){if(en)fe(en);else if(Qt){var Xn=typeof createImageBitmap=="function",pn=Me?Me(Qt):Qt;Xn?qe(pn,fe):cn(pn,fe)}};return ue.type==="json"?Tt(ue,ze):Ze(ue,ze)},Le=function(ue,fe){var Me=typeof createImageBitmap=="function";Me?qe(ue,fe):cn(ue,fe)},pt=function(q){return q.CENTER="center",q.TOP="top",q["TOP-LEFT"]="top-left",q["TOP-RIGHT"]="top-right",q.BOTTOM="bottom",q["BOTTOM-LEFT"]="bottom-left",q["BOTTOM-RIGHT"]="bottom-right",q.LEFT="left",q.RIGHT="right",q}({}),at={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nt(q,ue,fe){var Me=q.classList;for(var ze in at)at.hasOwnProperty(ze)&&Me.remove("l7-".concat(fe,"-anchor-").concat(ze));Me.add("l7-".concat(fe,"-anchor-").concat(ue))}var Ct=D(37620);function rt(q){return typeof q=="string"?!!d3.color(q):!1}function vt(q){var ue=Ct.ZP(q),fe=[0,0,0,0];return ue!=null&&(fe[0]=ue.r/255,fe[1]=ue.g/255,fe[2]=ue.b/255,fe[3]=ue.opacity),fe}function Ve(q){var ue=q&&q[0],fe=q&&q[1],Me=q&&q[2],ze=ue+fe*256+Me*65536-1;return ze}function hn(q){return[q+1&255,q+1>>8&255,q+1>>8>>8&255]}function yn(q){var ue=window.document.createElement("canvas"),fe=ue.getContext("2d");ue.width=256,ue.height=1;for(var Me=null,ze=fe.createLinearGradient(0,0,256,1),Be=q.positions[0],en=q.positions[q.positions.length-1],Qt=0;Qt<q.colors.length;++Qt){var Xn=(q.positions[Qt]-Be)/(en-Be);ze.addColorStop(Xn,q.colors[Qt])}return fe.fillStyle=ze,fe.fillRect(0,0,256,1),Me=new Uint8ClampedArray(fe.getImageData(0,0,256,1).data),ue=null,fe=null,{data:Me,width:256,height:1}}function ir(q,ue){var fe=window.document.createElement("canvas"),Me=fe.getContext("2d");fe.width=256,fe.height=1;for(var ze=Me.createLinearGradient(0,0,256,1),Be=ue[1]-ue[0],en=0;en<q.colors.length;++en){var Qt=Math.max((q.positions[en]-ue[0])/Be,0);ze.addColorStop(Qt,q.colors[en])}Me.fillStyle=ze,Me.fillRect(0,0,256,1);var Xn=Me.getImageData(0,0,256,1).data,pn=Tn(Me,Xn);return fe=null,Me=null,pn}function Qn(q){var ue=window.document.createElement("canvas"),fe=ue.getContext("2d");ue.width=256,ue.height=1;var Me=fe.createImageData(256,1);return Me.data.fill(0),q.positions.forEach(function(ze,Be){var en=vt(q.colors[Be]);Me.data[ze*4+0]=en[0]*255,Me.data[ze*4+1]=en[1]*255,Me.data[ze*4+2]=en[2]*255,Me.data[ze*4+3]=en[3]*255}),ue=null,fe=null,Me}function Ut(q){var ue=window.document.createElement("canvas"),fe=ue.getContext("2d");fe.globalAlpha=1,ue.width=256,ue.height=1;for(var Me=256/q.colors.length,ze=0;ze<q.colors.length;ze++)fe.beginPath(),fe.lineWidth=2,fe.strokeStyle=q.colors[ze],fe.moveTo(ze*Me,0),fe.lineTo((ze+1)*Me,0),fe.stroke();var Be=fe.getImageData(0,0,256,1).data,en=Tn(fe,Be);return ue=null,fe=null,en}function En(q,ue){var fe=window.document.createElement("canvas"),Me=fe.getContext("2d");Me.globalAlpha=1,fe.width=256,fe.height=1;var ze=ue[1]-ue[0];q.positions.length-q.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var Be=0;Be<q.colors.length;Be++)Me.beginPath(),Me.lineWidth=2,Me.strokeStyle=q.colors[Be],Me.moveTo((q.positions[Be]-ue[0])/ze*255,0),Me.lineTo((q.positions[Be+1]-ue[0])/ze*255,0),Me.stroke();var en=Me.getImageData(0,0,256,1).data,Qt=Tn(Me,en);return fe=null,Me=null,Qt}function Tn(q,ue){for(var fe=q.createImageData(256,1),Me=0;Me<fe.data.length;Me+=4)fe.data[Me+0]=ue[Me+0],fe.data[Me+1]=ue[Me+1],fe.data[Me+2]=ue[Me+2],fe.data[Me+3]=ue[Me+3];return fe}function lr(q){switch(q==null?void 0:q.type){case"cat":return[0,255];default:return[0,1]}}var ln={BACK:1029,FRONT:1028};function Lt(q){switch(q){case"GAODE1.x":return ln.BACK;case"GAODE2.x":return ln.BACK;case"MAPBOX":return ln.FRONT;case"SIMPLE":return ln.FRONT;case"GLOBEL":return ln.BACK;case"DEBAULT":return ln.FRONT;default:return ln.FRONT}}var bn=D(74902),Xe=D(97685),Fe=D(74691),on=D.n(Fe),B=D(50361),be=D.n(B),yt=D(23279),Ee=D.n(yt),Zt=D(27361),_n=D.n(Zt),Sn=D(51584),Bn=D.n(Sn),or=D(18446),dr=D.n(or),gr=D(14293),wr=D.n(gr),Ar=D(81763),Ir=D.n(Ar),Nr=D(68630),Yr=D.n(Nr),bt=D(47037),ve=D.n(bt),ye=D(36719),Ke=D.n(ye),ht=D(82492),xt=D.n(ht),Jt=D(30236),Dn=D.n(Jt),fr=D(97019),In=D.n(fr),ke=D(23493),Pe=D.n(ke),Ge=D(44908),gt=D.n(Ge),Bt=D(11700),an=D.n(Bt),An=D(23560),kt=D.n(An),Dt=D(13218),dn=D.n(Dt),He=D(52353),ei=D.n(He),Tr=D(68929),ii=D.n(Tr),Di={isNil:wr(),merge:xt(),throttle:Pe(),isString:ve(),debounce:Ee(),pull:In(),isTypedArray:Ke(),isPlainObject:Yr(),isNumber:Ir(),isBoolean:Bn(),isEqual:dr(),cloneDeep:be(),uniq:gt(),clamp:on(),upperFirst:an(),get:_n(),mergeWith:Dn(),isFunction:kt(),isObject:dn(),isUndefined:ei(),camelCase:ii()},vi=Di.pull;function Br(q){var ue=q;return typeof q=="string"&&(ue=window.document.getElementById(q)),ue}function Gr(q){return q.trim?q.trim():q.replace(/^\s+|\s+$/g,"")}function bi(q){return Gr(q).split(/\s+/)}function Ni(q){var ue,fe=(ue=document)===null||ue===void 0||(ue=ue.documentElement)===null||ue===void 0?void 0:ue.style;if(!fe)return q[0];for(var Me in q)if(q[Me]&&q[Me]in fe)return q[Me];return q[0]}function Qa(q,ue,fe){var Me=window.document.createElement(q);return ue&&(Me.className=ue||""),fe&&fe.appendChild(Me),Me}function Xi(q){var ue=q.parentNode;ue&&ue.removeChild(q)}function ao(q,ue){if(q.classList!==void 0)for(var fe=bi(ue),Me=0,ze=fe.length;Me<ze;Me++)q.classList.add(fe[Me]);else if(!Ba(q,ue)){var Be=wt(q);mi(q,(Be?Be+" ":"")+ue)}}function ko(q,ue){if(q.classList!==void 0){var fe=bi(ue);fe.forEach(function(Me){q.classList.remove(Me)})}else mi(q,Gr((" "+wt(q)+" ").replace(" "+ue+" "," ")))}function Ba(q,ue){if(q.classList!==void 0)return q.classList.contains(ue);var fe=wt(q);return fe.length>0&&new RegExp("(^|\\s)"+ue+"(\\s|$)").test(fe)}function mi(q,ue){q instanceof HTMLElement?q.className=ue:q.className.baseVal=ue}function Je(q,ue,fe){fe===void 0?Ba(q,ue)?ko(q,ue):ao(q,ue):fe?ao(q,ue):ko(q,ue)}function wt(q){return q instanceof SVGElement&&(q=q.correspondingElement),q.className.baseVal===void 0?q.className:q.className.baseVal}function Kt(q){for(;q&&q.firstChild;)q.removeChild(q.firstChild)}var Mn=Ni(["transform","WebkitTransform"]);function Yn(q,ue){q.style[Mn]=ue}function Gn(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var q=window.document.createEvent("UIEvents");q.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(q)}}function Ht(q){var ue=["padding: "+(q.height/2-8)+"px "+q.width/2+"px;","line-height: "+q.height+"px;","background-image: url("+q.toDataURL()+");"];console.log(`%c
`,ue.join(""))}function On(){var q,ue=window.document.querySelector('meta[name="viewport"]');if(!ue)return 1;var fe=(q=ue.content)===null||q===void 0?void 0:q.split(","),Me=fe.find(function(ze){var Be=ze.split("="),en=(0,Xe.Z)(Be,1),Qt=en[0];return Qt==="initial-scale"});return Me?Me.split("=")[1]*1:1}var Cr=On()<1?1:window.devicePixelRatio;function Er(q,ue){q.setAttribute("style","".concat(q.style.cssText).concat(ue))}function gi(q){return q.split(";").map(function(ue){return ue.trim()}).filter(function(ue){return ue})}function aa(q,ue){var fe,Me=gi((fe=q.getAttribute("style"))!==null&&fe!==void 0?fe:""),ze=gi(ue),Be=vi.apply(void 0,[Me].concat((0,bn.Z)(ze)));q.setAttribute("style",Be.join(";"))}function ya(q){return Object.entries(q).map(function(ue){var fe=(0,Xe.Z)(ue,2),Me=fe[0],ze=fe[1];return"".concat(Me,": ").concat(ze)}).join(";")}function wi(q,ue){return{left:q.left-ue.left,top:q.top-ue.top,right:ue.left+ue.width-q.left-q.width,bottom:ue.top+ue.height-q.top-q.height}}function sa(q,ue){q.checked=ue,ue?q.setAttribute("checked","true"):q.removeAttribute("checked")}function $i(q){q.innerHTML=""}function hi(q){q.setAttribute("draggable","false")}function fa(q,ue){if(typeof ue=="string"){var fe=document.createElement("div");for(fe.innerHTML=ue;fe.firstChild;)q.append(fe.firstChild)}else Array.isArray(ue)?q.append.apply(q,(0,bn.Z)(ue)):q.append(ue)}function ea(q,ue){for(var fe=Array.isArray(ue)?ue:[ue],Me=q;Me instanceof Element&&Me!==window.document.body;){var ze,Be;if(fe.find(function(en){var Qt;return(Qt=Me)===null||Qt===void 0?void 0:Qt.matches(en)}))return Me;Me=(ze=(Be=Me)===null||Be===void 0?void 0:Be.parentElement)!==null&&ze!==void 0?ze:null}}var ka;function Bi(q){return typeof ImageBitmap!="undefined"&&q instanceof ImageBitmap}function _a(){return typeof importScripts=="function"}var to=_a()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},Ae=(ka=navigator)===null||ka===void 0?void 0:ka.userAgent,ns=!!Ae.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),Oo=Ae.indexOf("Android")>-1||Ae.indexOf("Adr")>-1;function Ms(){for(var q=Ae,ue=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],fe=!0,Me=0,ze=ue;Me<ze.length;Me++){var Be=ze[Me];if(q.indexOf(Be)>0){fe=!1;break}}return fe}function ps(q,ue){q.forEach(function(fe){ue[fe]&&(ue[fe]=ue[fe].bind(ue))})}var jt=null,sn=D(39034);function Jn(q){var ue=[1/0,1/0,-1/0,-1/0];return(0,sn.pZ)(q,function(fe){ue[0]>fe[0]&&(ue[0]=fe[0]),ue[1]>fe[1]&&(ue[1]=fe[1]),ue[2]<fe[0]&&(ue[2]=fe[0]),ue[3]<fe[1]&&(ue[3]=fe[1])}),ue}Jn.default=Jn;var Xr=Jn,Ii=D(1449);function Ea(q){return typeof q=="number"}var co=2*Math.PI*6378137/2;function Zs(q,ue){var fe=(0,Xe.Z)(ue,4),Me=fe[0],ze=fe[1],Be=fe[2],en=fe[3];return q.lng>Me&&q.lng<=Be&&q.lat>ze&&q.lat<=en}function Vs(q){var ue=[1/0,1/0,-1/0,-1/0];return q.forEach(function(fe){var Me=fe.coordinates;Ds(ue,Me)}),ue}function Ds(q,ue){return Array.isArray(ue[0])?ue.forEach(function(fe){Ds(q,fe)}):(q[0]>ue[0]&&(q[0]=ue[0]),q[1]>ue[1]&&(q[1]=ue[1]),q[2]<ue[0]&&(q[2]=ue[0]),q[3]<ue[1]&&(q[3]=ue[1])),q}function vu(q,ue){return Rl(q,ue)}function Rl(q,ue){return Array.isArray(q[0])?q.map(function(fe){return Rl(fe,ue)}):ue(q)}function ap(q){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};q=Rf(q,ue);var Me=q[0],ze=q[1],Be=Me*co/180,en=Math.log(Math.tan((90+ze)*Math.PI/360))/(Math.PI/180);return en=en*co/180,fe.enable&&(Be=Number(Be.toFixed(fe.decimal)),en=Number(en.toFixed(fe.decimal))),q.length===3?[Be,en,q[2]]:[Be,en]}function ph(q){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,fe=q[0],Me=q[1],ze=fe/co*180,Be=Me/co*180;return Be=180/Math.PI*(2*Math.atan(Math.exp(Be*Math.PI/180))-Math.PI/2),ue!=null&&(ze=Number(ze.toFixed(ue)),Be=Number(Be.toFixed(ue))),q.length===3?[ze,Be,q[2]]:[ze,Be]}function el(q){if(q==null)throw new Error("lng is required");return(q>180||q<-180)&&(q=q%360,q>180&&(q=-360+q),q<-180&&(q=360+q),q===0&&(q=0)),q}function lf(q){if(q==null)throw new Error("lat is required");return(q>90||q<-90)&&(q=q%180,q>90&&(q=-180+q),q<-90&&(q=180+q),q===0&&(q=0)),q}function Rf(q,ue){if(ue===!1)return q;var fe=el(q[0]),Me=lf(q[1]);return Me>85&&(Me=85),Me<-85&&(Me=-85),q.length===3?[fe,Me,q[2]]:[fe,Me]}function mu(q){var ue=85.0511287798,fe=Math.max(Math.min(ue,q[1]),-ue),Me=256<<20,ze=Math.PI/180,Be=q[0]*ze,en=fe*ze;en=Math.log(Math.tan(Math.PI/4+en/2));var Qt=.5/Math.PI,Xn=.5,pn=-.5/Math.PI;return ze=.5,Be=Me*(Qt*Be+Xn),en=Me*(pn*en+ze),[Math.floor(Be),Math.floor(en)]}function tc(q){var ue=.5/Math.PI,fe=.5,Me=-.5/Math.PI,ze=.5,Be=256<<20,en=_slicedToArray(q,2),Qt=en[0],Xn=en[1];Qt=(Qt/Be-fe)/ue,Xn=(Xn/Be-ze)/Me,Xn=(Math.atan(Math.pow(Math.E,Xn))-Math.PI/4)*2,ze=Math.PI/180;var pn=Xn/ze,sr=Qt/ze;return[sr,pn]}function Pf(q,ue){var fe=85.0511287798,Me=Math.PI/180,ze=6378137;return ue=Math.max(Math.min(fe,ue),-fe),q*=Me,ue*=Me,ue=Math.log(Math.tan(Math.PI/4+ue/2)),[q*ze,ue*ze]}function zh(q,ue){var fe=Math.PI/180,Me=6378137,ze=q/Me/fe,Be=2*(Math.atan(Math.exp(ue/Me))-Math.PI/4)/fe;return[ze,Be]}function Ti(q,ue,fe){var Me=degreesToRadians(ue[1]-q[1]),ze=degreesToRadians(ue[0]-q[0]),Be=degreesToRadians(q[1]),en=degreesToRadians(ue[1]),Qt=Math.pow(Math.sin(Me/2),2)+Math.pow(Math.sin(ze/2),2)*Math.cos(Be)*Math.cos(en);return radiansToLength(2*Math.atan2(Math.sqrt(Qt),Math.sqrt(1-Qt)),fe="meters")}function za(q){var ue=Math.PI/180,fe=85.0511287798,Me=6378137,ze=Math.max(Math.min(fe,q[1]),-fe),Be=Math.sin(ze*ue),en=Me*q[0]*ue,Qt=Me*Math.log((1+Be)/(1-Be))/2;return[en,Qt]}function fo(q,ue){var fe=Math.abs(q[1][1]-q[0][1])*ue,Me=Math.abs(q[1][0]-q[0][0])*ue;return[[q[0][0]-Me,q[0][1]-fe],[q[1][0]+Me,q[1][1]+fe]]}function Ji(q,ue){return q[0][0]<=ue[0][0]&&q[0][1]<=ue[0][1]&&q[1][0]>=ue[1][0]&&q[1][1]>=ue[1][1]}function su(q){return[[q[0],q[1]],[q[2],q[3]]]}function If(q){var ue=Uh(q,[0,0]);return[q[0]/ue,q[1]/ue]}function Uh(q,ue){return Math.sqrt(Math.pow(q[0]-ue[0],2)+Math.pow(q[1]-ue[1],2))}function Od(q,ue){return q[0]*ue[0]+q[1]*ue[1]}function Gf(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])}function id(q,ue){return Math.acos(Od(q,ue)/(Gf(q)*Gf(ue)))*180/Math.PI}function op(q,ue){return ue[0]>0?ue[1]>0?90-Math.atan(ue[1]/ue[0])*180/Math.PI:90+Math.atan(-ue[1]/ue[0])*180/Math.PI:ue[1]<0?180+(90-Math.atan(ue[1]/ue[0])*180/Math.PI):270+Math.atan(ue[1]/-ue[0])*180/Math.PI}function Up(q){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!q||q.length<2)){for(var fe=[0,1],Me=0,ze=[],Be=0;Be<q.length-1;Be++){var en=q[Be],Qt=q[Be+1],Xn=Uh(en,Qt);Me+=Xn;var pn=[en[0]-Qt[0],en[1]-Qt[1]],sr=op(fe,pn);if(Be>0){var br=ze[Be-1].rotation;br-sr>360-br+sr&&(sr=sr+360)}ze.push({start:en,end:Qt,dis:Xn,rotation:sr,duration:0})}return ze.map(function(Ai){Ai.duration=ue*(Ai.dis/Me)}),ze}}function sp(q){if(Ea(q[0]))return q;if(Ea(q[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Ea(q[0][0][0])){var ue=q,fe=0,Me=0,ze=0;return ue.forEach(function(Be){Be.forEach(function(en){fe+=en[0],Me+=en[1],ze++})}),[fe/ze,Me/ze,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Xf(q){for(var ue=q[0],fe=q[1],Me=q[0],ze=q[1],Be=0,en=0,Qt=0,Xn=0;Xn<q.length;Xn+=2){var pn=q[Xn],sr=q[Xn+1];pn&&sr&&(ue=Math.max(pn,ue),fe=Math.max(sr,fe),Me=Math.min(pn,Me),ze=Math.min(sr,ze),Be+=pn,en+=sr,Qt++)}return{center:[Be/Qt,en/Qt],radius:Math.sqrt(Math.pow(ue-Me,2)+Math.pow(fe-ze,2))/2}}function Cc(q){return Xr((0,Ii.uf)([(0,Ii.Tu)(q)]))}function jp(q){var ue=131,fe=137,Me=0;q+="x";for(var ze=Math.floor(9007199254740991/fe),Be=0;Be<q.length;Be++)Me>ze&&(Me=Math.floor(Me/fe)),Me=Me*ue+q.charCodeAt(Be);return Me}function hl(q){q=q.toString();for(var ue=5381,fe=q.length;fe;)ue=ue*33^q.charCodeAt(--fe);return ue>>>0}function kf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){var ue=Math.random()*16|0,fe=q==="x"?ue:ue&3|8;return fe.toString(16)})}var Yf=function(q){return q["GAODE1.x"]="GAODE1.x",q["GAODE2.x"]="GAODE2.x",q.MAPBOX="MAPBOX",q.DEFAULT="DEFAUlTMAP",q.SIMPLE="SIMPLE",q.GLOBEL="GLOBEL",q}({});function _l(q,ue,fe,Me,ze){var Be=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,en=arguments.length>6?arguments[6]:void 0,Qt=fe;return en&&(Qt=Math.round(fe*(Be-1))/(Be-1)),Me?bl(q,ue,Qt,Me,ze):bl(q,ue,Qt,.314,ze)}function pc(q,ue){var fe=1-ue;return(q[0]*fe+q[1]*ue)*fe+(q[1]*fe+q[2]*ue)*ue}function vc(q,ue){return Math.sqrt(Math.pow(q[0]-ue[0],2)+Math.pow(q[1]-ue[1],2))}function Oc(q,ue,fe){var Me=[ue[0]-q[0],ue[1]-q[1]],ze=vc(Me,[0,0]),Be=Math.atan2(Me[1],Me[0]),en=ze/2/Math.cos(fe),Qt=Be+fe,Xn=[en*Math.cos(Qt)+q[0],en*Math.sin(Qt)+q[1]];return Xn}function bl(q,ue,fe,Me,ze){if(ze===MapType["GAODE2.x"]){var Be=amap2Project(q[0],q[1]),en=amap2Project(ue[0],ue[1]),Qt=Oc(Be,en,Me),Xn=[Be[0],Qt[0],en[0]],pn=[Be[1],Qt[1],en[1]];return[].concat(_toConsumableArray(amap2UnProject(pc(Xn,fe),pc(pn,fe))),[0])}else{var sr=Oc(q,ue,Me),br=[q[0],sr[0],ue[0]],Ai=[q[1],sr[1],ue[1]];return[pc(br,fe),pc(Ai,fe),0]}}function cf(q,ue,fe,Me,ze){var Be=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,en=arguments.length>6?arguments[6]:void 0,Qt=fe;return en&&(Qt=Math.round(fe*29)/29),_s(q,ue,Qt,ze)}function ff(q,ue){var fe=[ue[0]-q[0],ue[1]-q[1]],Me=calDistance(fe,[0,0]),ze=Math.atan2(fe[1],fe[0]),Be=.314,en=Me/2/Math.cos(Be),Qt=ze+Be,Xn=[en*Math.cos(Qt)+q[0],en*Math.sin(Qt)+q[1]];return Xn}function ad(q,ue){var fe=1-ue;return(q[0]*fe+q[1]*ue)*fe+(q[1]*fe+q[2]*ue)*ue}function od(q,ue){var fe=[q[0]-ue[0],q[1]-ue[1]],Me=[Math.sin(fe[0]/2),Math.sin(fe[1]/2)],ze=Me[1]*Me[1]+Math.cos(q[1])*Math.cos(ue[1])*Me[0]*Me[0];return 2*Math.atan2(Math.sqrt(ze),Math.sqrt(1-ze))}function _s(q,ue,fe,Me){var ze=[degreesToRadians(q[0]),degreesToRadians(q[1])],Be=[degreesToRadians(ue[0]),degreesToRadians(ue[1])];if(Me==="GAODE2.x"){var en=ff(ze,Be),Qt=[ze[0],en[0],Be[0]],Xn=[ze[1],en[1],Be[1]];return[ad(Qt,fe),ad(Xn,fe),0]}else{var pn=od(ze,Be);if(Math.abs(pn-Math.PI)<.001)return[(1-fe)*ze[0]+fe*Be[0],(1-fe)*ze[1]+fe*Be[1]];var sr=Math.sin((1-fe)*pn)/Math.sin(pn),br=Math.sin(fe*pn)/Math.sin(pn),Ai=[Math.sin(ze[0]),Math.sin(ze[1])],xi=[Math.cos(ze[0]),Math.cos(ze[1])],ci=[Math.sin(Be[0]),Math.sin(Be[1])],da=[Math.cos(Be[0]),Math.cos(Be[1])],ua=sr*xi[1]*xi[0]+br*da[1]*da[0],la=sr*xi[1]*Ai[0]+br*da[1]*ci[0],Ua=sr*Ai[1]+br*ci[1];return[radiansToDegrees(Math.atan2(la,ua)),radiansToDegrees(Math.atan2(Ua,Math.sqrt(ua*ua+la*la)))]}}function mv(q,ue){for(var fe=0,Me=[],ze=0;ze<q.length-1;ze++){var Be=q[ze],en=q[ze+1],Qt=vh(Be,en),Xn=fe;fe+=Qt,Me.push({p1:Be,p2:en,totalDistance:fe,distance:Qt,lastTotalDistance:Xn})}for(var pn=fe*ue,sr,br,Ai=0,xi=Me;Ai<xi.length;Ai++){var ci=xi[Ai],da=ci.totalDistance;if(da>pn){var ua=ci.p1,la=ci.p2,Ua=(pn-ci.lastTotalDistance)/ci.distance,$a=sd(la,ua,Ua);sr=$a[0],br=$a[1];break}}return{lng:sr,lat:br,height:0}}function sd(q,ue,fe){return[q[0]*fe+ue[0]*(1-fe),q[1]*fe+ue[1]*(1-fe)]}function vh(q,ue){return Math.sqrt(Math.pow(q[0]-ue[0],2)+Math.pow(q[1]-ue[1],2))}function Hs(q,ue){var fe=ue.featureId,Me=q.data.dataArray;return typeof fe=="number"&&(Me=Me.filter(function(ze){var Be=ze.id;return Be===fe})),Me.map(function(ze){var Be=lp(ze,ue);return _objectSpread(_objectSpread({},ze),Be)})}function up(q,ue){return new Promise(function(fe){q.inited?fe(Hs(q,ue)):q.once("update",function(){fe(Hs(q,ue))})})}function lp(q,ue){var fe=ue.offset,Me=ue.shape,ze=ue.thetaOffset,Be=ue.mapVersion,en=ue.segmentNumber,Qt=en===void 0?30:en,Xn=ue.autoFit,pn=Xn===void 0?!0:Xn,sr=q.coordinates;if(Me==="line")return pathLineAtOffset(sr,fe);var br=sr[0],Ai=sr[1],xi=typeof ze=="string"?q[ze]||0:ze,ci;switch(Me){case"arc":ci=arcLineAtOffset;break;case"greatcircle":ci=greatCircleLineAtOffset;break;default:ci=arcLineAtOffset}var da=ci(br,Ai,fe,xi,Be,Qt,pn),ua=_slicedToArray(da,3),la=ua[0],Ua=ua[1],$a=ua[2];return{lng:la,lat:Ua,height:$a}}var ku=function(){function q(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,fe=arguments.length>1?arguments[1]:void 0;(0,Q.Z)(this,q),this.limit=ue,this.destroy=fe||this.defaultDestroy,this.order=[],this.clear()}return(0,ne.Z)(q,[{key:"clear",value:function(){var fe=this;this.order.forEach(function(Me){fe.delete(Me)}),this.cache={},this.order=[]}},{key:"get",value:function(fe){var Me=this.cache[fe];return Me&&(this.deleteOrder(fe),this.appendOrder(fe)),Me}},{key:"set",value:function(fe,Me){this.cache[fe]?(this.delete(fe),this.cache[fe]=Me,this.appendOrder(fe)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[fe]=Me,this.appendOrder(fe))}},{key:"delete",value:function(fe){var Me=this.cache[fe];Me&&(this.deleteCache(fe),this.deleteOrder(fe),this.destroy(Me,fe))}},{key:"deleteCache",value:function(fe){delete this.cache[fe]}},{key:"deleteOrder",value:function(fe){var Me=this.order.findIndex(function(ze){return ze===fe});Me>=0&&this.order.splice(Me,1)}},{key:"appendOrder",value:function(fe){this.order.push(fe)}},{key:"defaultDestroy",value:function(fe,Me){return null}}]),q}();function qc(q){if(q.length===0)throw new Error("max requires at least one data point");for(var ue=q[0],fe=1;fe<q.length;fe++)q[fe]>ue&&(ue=q[fe]);return ue*1}function mc(q){if(q.length===0)throw new Error("min requires at least one data point");for(var ue=q[0],fe=1;fe<q.length;fe++)q[fe]<ue&&(ue=q[fe]);return ue*1}function nc(q){if(q.length===0)return 0;for(var ue=q[0]*1,fe=1;fe<q.length;fe++)ue+=q[fe]*1;return ue}function jh(q){if(q.length===0)throw new Error("mean requires at least one data point");return nc(q)/q.length}function qf(q){if(q.length===0)throw new Error("mean requires at least one data point");if(q.length<3)return q[0];q.sort();for(var ue=q[0],fe=NaN,Me=0,ze=1,Be=1;Be<q.length+1;Be++)q[Be]!==ue?(ze>Me&&(Me=ze,fe=ue),ze=1,ue=q[Be]):ze++;return fe*1}var gc={min:mc,max:qc,mean:jh,sum:nc,mode:qf};function Kf(q,ue){return q.map(function(fe){return fe[ue]})}function Lf(q,ue){return gc[q](ue)}var rc=D(15861),Lu=D(97326),Ts=D(4942),Ws=D(64687),Mc=D.n(Ws);function Zp(q,ue){ue===void 0&&(ue={});var fe=Number(q[0]),Me=Number(q[1]),ze=Number(q[2]),Be=Number(q[3]);if(q.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var en=[fe,Me],Qt=[fe,Be],Xn=[ze,Be],pn=[ze,Me];return(0,Ii.yu)([[en,pn,Xn,Qt,en]],ue.properties,{bbox:q,id:ue.id})}var hf=D(26729),Zh=D.n(hf),mh=function(q){return q.Realtime="realtime",q.Overlap="overlap",q.Replace="replace",q}({}),xl=function(q){return q.Loading="Loading",q.Loaded="Loaded",q.Failure="Failure",q.Cancelled="Cancelled",q}({}),Kc=0,Rc=1,df=2;function Wu(q){q.forEach(function(ue){ue.isCurrent&&(ue.isVisible=ue.isLoaded)})}function gh(q){q.forEach(function(ue){ue.properties.state=Kc}),q.forEach(function(ue){ue.isCurrent&&!Vh(ue)&&Qc(ue)}),q.forEach(function(ue){ue.isVisible=!!(ue.properties.state&df)})}function pf(q){q.forEach(function(fe){fe.properties.state=Kc}),q.forEach(function(fe){fe.isCurrent&&Vh(fe)});var ue=q.slice().sort(function(fe,Me){return fe.z-Me.z});ue.forEach(function(fe){fe.isVisible=!!(fe.properties.state&df),fe.children.length&&(fe.isVisible||fe.properties.state&Rc)?fe.children.forEach(function(Me){Me.properties.state=Rc}):fe.isCurrent&&Qc(fe)})}function Vh(q){for(;q;){if(q.isLoaded)return q.properties.state|=df,!0;q=q.parent}return!1}function Qc(q){q.children.forEach(function(ue){ue.isLoaded?ue.properties.state|=df:Qc(ue)})}var Pl,cp=256,Md=[-1/0,-1/0,1/0,1/0],yh=.2,Qf=5,Jc=(Pl={},(0,Ts.Z)(Pl,mh.Realtime,Wu),(0,Ts.Z)(Pl,mh.Overlap,gh),(0,Ts.Z)(Pl,mh.Replace,pf),Pl),Jf=function(){};function eh(q,ue,fe){var Me=Math.floor((q+180)/360*Math.pow(2,fe)),ze=Math.floor((1-Math.log(Math.tan(ue*Math.PI/180)+1/Math.cos(ue*Math.PI/180))/Math.PI)/2*Math.pow(2,fe));return[Me,ze]}function vf(q,ue,fe){var Me=q/Math.pow(2,fe)*360-180,ze=Math.PI-2*Math.PI*ue/Math.pow(2,fe),Be=180/Math.PI*Math.atan(.5*(Math.exp(ze)-Math.exp(-ze)));return[Me,Be]}var fp=function(ue,fe,Me){var ze=vf(ue,fe,Me),Be=(0,Xe.Z)(ze,2),en=Be[0],Qt=Be[1],Xn=vf(ue+1,fe+1,Me),pn=(0,Xe.Z)(Xn,2),sr=pn[0],br=pn[1];return[en,br,sr,Qt]};function ud(q){var ue=q.zoom,fe=q.latLonBounds,Me=q.maxZoom,ze=Me===void 0?1/0:Me,Be=q.minZoom,en=Be===void 0?0:Be,Qt=q.zoomOffset,Xn=Qt===void 0?0:Qt,pn=q.extent,sr=pn===void 0?Md:pn,br=Math.ceil(ue)+Xn;if(Number.isFinite(en)&&br<en)return[];Number.isFinite(ze)&&br>ze&&(br=ze);for(var Ai=(0,Xe.Z)(fe,4),xi=Ai[0],ci=Ai[1],da=Ai[2],ua=Ai[3],la=[Math.max(xi,sr[0]),Math.max(ci,sr[1]),Math.min(da,sr[2]),Math.min(ua,sr[3])],Ua=[],$a=eh(la[0],la[1],br),oo=(0,Xe.Z)($a,2),ms=oo[0],bs=oo[1],Fs=eh(la[2],la[3],br),rs=(0,Xe.Z)(Fs,2),So=rs[0],es=rs[1],Tu=ms;Tu<=So;Tu++)for(var rl=es;rl<=bs;rl++)Ua.push({x:Tu,y:rl,z:br});var bu=(So+ms)/2,Du=(bs+es)/2,Ll=function(ef,pl){return Math.abs(ef-bu)+Math.abs(pl-Du)};return Ua.sort(function(xc,ef){return Ll(xc.x,xc.y)-Ll(ef.x,ef.y)}),Ua}var hp=function(ue,fe,Me){var ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,Be=Math.pow(2,Me),en=Be-1,Qt=Be,Xn=ue,pn=fe;return ze&&(Xn<0?Xn=Xn+Qt:Xn>en&&(Xn=Xn%Qt)),{warpX:Xn,warpY:pn}};function Df(q){var ue=dp();return function(){var Me=(0,Ce.Z)(q),ze;if(ue){var Be=(0,Ce.Z)(this).constructor;ze=Reflect.construct(Me,arguments,Be)}else ze=Me.apply(this,arguments);return(0,pe.Z)(this,ze)}}function dp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}var Hh=function(q){(0,ge.Z)(fe,q);var ue=Df(fe);function fe(Me){var ze;(0,Q.Z)(this,fe),ze=ue.call(this),(0,Ts.Z)((0,Lu.Z)(ze),"tileSize",256),(0,Ts.Z)((0,Lu.Z)(ze),"isVisible",!1),(0,Ts.Z)((0,Lu.Z)(ze),"isCurrent",!1),(0,Ts.Z)((0,Lu.Z)(ze),"isVisibleChange",!1),(0,Ts.Z)((0,Lu.Z)(ze),"loadedLayers",0),(0,Ts.Z)((0,Lu.Z)(ze),"isLayerLoaded",!1),(0,Ts.Z)((0,Lu.Z)(ze),"isLoad",!1),(0,Ts.Z)((0,Lu.Z)(ze),"isChildLoad",!1),(0,Ts.Z)((0,Lu.Z)(ze),"parent",null),(0,Ts.Z)((0,Lu.Z)(ze),"children",[]),(0,Ts.Z)((0,Lu.Z)(ze),"data",null),(0,Ts.Z)((0,Lu.Z)(ze),"properties",{}),(0,Ts.Z)((0,Lu.Z)(ze),"loadDataId",0);var Be=Me.x,en=Me.y,Qt=Me.z,Xn=Me.tileSize,pn=Me.warp,sr=pn===void 0?!0:pn;return ze.x=Be,ze.y=en,ze.z=Qt,ze.warp=sr||!0,ze.tileSize=Xn,ze}return(0,ne.Z)(fe,[{key:"isLoading",get:function(){return this.loadStatus===xl.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===xl.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===xl.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===xl.Cancelled}},{key:"isDone",get:function(){return[xl.Loaded,xl.Cancelled,xl.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return fp(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var ze=(0,Xe.Z)(this.bounds,4),Be=ze[0],en=ze[1],Qt=ze[2],Xn=ze[3],pn=[(Qt-Be)/2,(Xn-en)/2],sr=Zp(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:pn,meta:`
      `.concat(this.key,`
      `)}});return sr}},{key:"key",get:function(){var ze="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return ze}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var Me=(0,rc.Z)(Mc().mark(function Be(en){var Qt,Xn,pn,sr,br,Ai,xi,ci,da,ua,la,Ua,$a,oo,ms,bs,Fs;return Mc().wrap(function(So){for(;;)switch(So.prev=So.next){case 0:return Qt=en.getData,Xn=en.onLoad,pn=en.onError,this.loadDataId++,sr=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=xl.Loading,br=null,So.prev=7,xi=this.x,ci=this.y,da=this.z,ua=this.bounds,la=this.tileSize,Ua=this.warp,$a=hp(xi,ci,da,Ua),oo=$a.warpX,ms=$a.warpY,bs=this.abortController.signal,Fs={x:oo,y:ms,z:da,bounds:ua,tileSize:la,signal:bs,warp:Ua},So.next=14,Qt(Fs,this);case 14:br=So.sent,So.next=20;break;case 17:So.prev=17,So.t0=So.catch(7),Ai=So.t0;case 20:if(sr===this.loadDataId){So.next=22;break}return So.abrupt("return");case 22:if(!(this.isCancelled&&!br)){So.next=24;break}return So.abrupt("return");case 24:if(!(Ai||!br)){So.next=28;break}return this.loadStatus=xl.Failure,pn(Ai,this),So.abrupt("return");case 28:this.loadStatus=xl.Loaded,this.data=br,Xn(this);case 31:case"end":return So.stop()}},Be,this,[[7,17]])}));function ze(Be){return Me.apply(this,arguments)}return ze}()},{key:"reloadData",value:function(ze){this.isLoading&&this.abortLoad(),this.loadData(ze)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=xl.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),fe}(hf.EventEmitter),ld=function(ue,fe){var Me=su(ue),ze=fo(Me,fe),Be=360*3-180,en=85.0511287798065,Qt=[Math.max(ze[0][0],-Be),Math.max(ze[0][1],-en),Math.min(ze[1][0],Be),Math.min(ze[1][1],en)];return Qt},El=function(ue,fe){var Me=su(ue),ze=su(fe),Be=Ji(Me,ze);return Be};function Pc(q,ue){var fe=typeof Symbol!="undefined"&&q[Symbol.iterator]||q["@@iterator"];if(!fe){if(Array.isArray(q)||(fe=tl(q))||ue&&q&&typeof q.length=="number"){fe&&(q=fe);var Me=0,ze=function(){};return{s:ze,n:function(){return Me>=q.length?{done:!0}:{done:!1,value:q[Me++]}},e:function(pn){throw pn},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Be=!0,en=!1,Qt;return{s:function(){fe=fe.call(q)},n:function(){var pn=fe.next();return Be=pn.done,pn},e:function(pn){en=!0,Qt=pn},f:function(){try{!Be&&fe.return!=null&&fe.return()}finally{if(en)throw Qt}}}}function tl(q,ue){if(q){if(typeof q=="string")return Wh(q,ue);var fe=Object.prototype.toString.call(q).slice(8,-1);if(fe==="Object"&&q.constructor&&(fe=q.constructor.name),fe==="Map"||fe==="Set")return Array.from(q);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Wh(q,ue)}}function Wh(q,ue){(ue==null||ue>q.length)&&(ue=q.length);for(var fe=0,Me=new Array(ue);fe<ue;fe++)Me[fe]=q[fe];return Me}function th(q){var ue=Ns();return function(){var Me=(0,Ce.Z)(q),ze;if(ue){var Be=(0,Ce.Z)(this).constructor;ze=Reflect.construct(Me,arguments,Be)}else ze=Me.apply(this,arguments);return(0,pe.Z)(this,ze)}}function Ns(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}var Rd=Di.throttle,Wl=function(q){return q.TilesLoadStart="tiles-load-start",q.TileLoaded="tile-loaded",q.TileError="tile-error",q.TileUnload="tile-unload",q.TileUpdate="tile-update",q.TilesLoadFinished="tiles-load-finished",q}({}),Nf=function(q){(0,ge.Z)(fe,q);var ue=th(fe);function fe(Me){var ze;return(0,Q.Z)(this,fe),ze=ue.call(this),(0,Ts.Z)((0,Lu.Z)(ze),"currentTiles",[]),(0,Ts.Z)((0,Lu.Z)(ze),"cacheTiles",new Map),(0,Ts.Z)((0,Lu.Z)(ze),"throttleUpdate",Rd(function(Be,en){ze.update(Be,en)},16)),(0,Ts.Z)((0,Lu.Z)(ze),"onTileLoad",function(Be){ze.emit(Wl.TileLoaded,Be),ze.updateTileVisible(),ze.loadFinished()}),(0,Ts.Z)((0,Lu.Z)(ze),"onTileError",function(Be,en){ze.emit(Wl.TileError,{error:Be,tile:en}),ze.updateTileVisible(),ze.loadFinished()}),(0,Ts.Z)((0,Lu.Z)(ze),"onTileUnload",function(Be){ze.emit(Wl.TileUnload,Be),ze.loadFinished()}),ze.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Md,getTileData:Jf,warp:!0,updateStrategy:mh.Replace},ze.updateOptions(Me),ze}return(0,ne.Z)(fe,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(ze){return ze.isDone})}},{key:"tiles",get:function(){var ze=Array.from(this.cacheTiles.values()).sort(function(Be,en){return Be.z-en.z});return ze}},{key:"updateOptions",value:function(ze){var Be=ze.minZoom===void 0?this.options.minZoom:Math.ceil(ze.minZoom),en=ze.maxZoom===void 0?this.options.maxZoom:Math.floor(ze.maxZoom);this.options=(0,T.Z)((0,T.Z)((0,T.Z)({},this.options),ze),{},{minZoom:Be,maxZoom:en})}},{key:"update",value:function(ze,Be){var en=this,Qt=Math.max(0,Math.ceil(ze));if(!(this.lastViewStates&&this.lastViewStates.zoom===Qt&&El(this.lastViewStates.latLonBoundsBuffer,Be))){var Xn=ld(Be,yh);this.lastViewStates={zoom:Qt,latLonBounds:Be,latLonBoundsBuffer:Xn},this.currentZoom=Qt;var pn=!1,sr=this.getTileIndices(Qt,Xn).filter(function(br){return en.options.warp||br.x>=0&&br.x<Math.pow(2,Qt)});this.emit(Wl.TilesLoadStart),this.currentTiles=sr.map(function(br){var Ai=br.x,xi=br.y,ci=br.z,da=en.getTile(Ai,xi,ci);if(da){var ua,la,Ua=((ua=da)===null||ua===void 0?void 0:ua.isFailure)||((la=da)===null||la===void 0?void 0:la.isCancelled);return Ua&&da.loadData({getData:en.options.getTileData,onLoad:en.onTileLoad,onError:en.onTileError}),da}return da=en.createTile(Ai,xi,ci),pn=!0,da}),pn&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var ze=Pc(this.cacheTiles),Be;try{for(ze.s();!(Be=ze.n()).done;){var en=(0,Xe.Z)(Be.value,2),Qt=en[0],Xn=en[1];if(!this.currentTiles.includes(Xn)){this.cacheTiles.delete(Qt),this.onTileUnload(Xn);return}this.onTileUnload(Xn),Xn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(pn){ze.e(pn)}finally{ze.f()}}},{key:"reloadTileById",value:function(ze,Be,en){var Qt=this.cacheTiles.get("".concat(Be,",").concat(en,",").concat(ze));Qt&&(this.onTileUnload(Qt),Qt.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(ze,Be,en){var Qt=this.getTileByLngLat(ze,Be,en);Qt&&this.reloadTileById(Qt.z,Qt.x,Qt.y)}},{key:"reloadTileByExtent",value:function(ze,Be){var en=this,Qt=this.getTileIndices(Be,ze);Qt.forEach(function(Xn){en.reloadTileById(Xn.z,Xn.x,Xn.y)})}},{key:"pruneRequests",value:function(){var ze=[],Be=Pc(this.cacheTiles.values()),en;try{for(Be.s();!(en=Be.n()).done;){var Qt=en.value;Qt.isLoading&&!Qt.isCurrent&&!Qt.isVisible&&ze.push(Qt)}}catch(pn){Be.e(pn)}finally{Be.f()}for(;ze.length>0;){var Xn=ze.shift();Xn.abortLoad()}}},{key:"getTileByLngLat",value:function(ze,Be,en){var Qt=this.options.zoomOffset,Xn=Math.ceil(en)+Qt,pn=eh(ze,Be,Xn),sr=this.tiles.filter(function(br){return br.key==="".concat(pn[0],"_").concat(pn[1],"_").concat(Xn)});return sr[0]}},{key:"getTileExtent",value:function(ze,Be){return this.getTileIndices(Be,ze)}},{key:"getTileByZXY",value:function(ze,Be,en){var Qt=this.tiles.filter(function(Xn){return Xn.key==="".concat(Be,"_").concat(en,"_").concat(ze)});return Qt[0]}},{key:"clear",value:function(){var ze=Pc(this.cacheTiles.values()),Be;try{for(ze.s();!(Be=ze.n()).done;){var en=Be.value;en.isLoading?en.abortLoad():this.onTileUnload(en)}}catch(Qt){ze.e(Qt)}finally{ze.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var ze=this.options.updateStrategy,Be=new Map,en=Pc(this.cacheTiles.values()),Qt;try{for(en.s();!(Qt=en.n()).done;){var Xn=Qt.value;Be.set(Xn.key,Xn.isVisible),Xn.isCurrent=!1,Xn.isVisible=!1}}catch(ci){en.e(ci)}finally{en.f()}var pn=Pc(this.currentTiles),sr;try{for(pn.s();!(sr=pn.n()).done;){var br=sr.value;br.isCurrent=!0,br.isVisible=!0}}catch(ci){pn.e(ci)}finally{pn.f()}var Ai=Array.from(this.cacheTiles.values());typeof ze=="function"?ze(Ai):Jc[ze](Ai);var xi=!1;Array.from(this.cacheTiles.values()).forEach(function(ci){ci.isVisible!==Be.get(ci.key)?(ci.isVisibleChange=!0,xi=!0):ci.isVisibleChange=!1}),xi&&this.emit(Wl.TileUpdate)}},{key:"getTileIndices",value:function(ze,Be){var en=this.options,Qt=en.tileSize,Xn=en.extent,pn=en.zoomOffset,sr=Math.floor(this.options.maxZoom),br=Math.ceil(this.options.minZoom),Ai=ud({maxZoom:sr,minZoom:br,zoomOffset:pn,tileSize:Qt,zoom:ze,latLonBounds:Be,extent:Xn});return Ai}},{key:"getTileId",value:function(ze,Be,en){var Qt="".concat(ze,",").concat(Be,",").concat(en);return Qt}},{key:"loadFinished",value:function(){var ze=!this.currentTiles.some(function(Be){return!Be.isDone});return ze&&this.emit(Wl.TilesLoadFinished),ze}},{key:"getTile",value:function(ze,Be,en){var Qt=this.getTileId(ze,Be,en),Xn=this.cacheTiles.get(Qt);return Xn}},{key:"createTile",value:function(ze,Be,en){var Qt=this.getTileId(ze,Be,en),Xn=new Hh({x:ze,y:Be,z:en,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(Qt,Xn),Xn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),Xn}},{key:"resizeCacheTiles",value:function(){var ze=Qf*this.currentTiles.length,Be=this.cacheTiles.size>ze;if(Be){var en=Pc(this.cacheTiles),Qt;try{for(en.s();!(Qt=en.n()).done;){var Xn=(0,Xe.Z)(Qt.value,2),pn=Xn[0],sr=Xn[1];if(!sr.isVisible&&!this.currentTiles.includes(sr)&&(this.cacheTiles.delete(pn),this.onTileUnload(sr)),this.cacheTiles.size<=ze)break}}catch(br){en.e(br)}finally{en.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var ze=Pc(this.cacheTiles.values()),Be;try{for(ze.s();!(Be=ze.n()).done;){var en=Be.value;en.parent=null,en.children.length=0}}catch(br){ze.e(br)}finally{ze.f()}var Qt=Pc(this.cacheTiles.values()),Xn;try{for(Qt.s();!(Xn=Qt.n()).done;){var pn=Xn.value,sr=this.getNearestAncestor(pn.x,pn.y,pn.z);pn.parent=sr,sr!=null&&sr.children&&sr.children.push(pn)}}catch(br){Qt.e(br)}finally{Qt.f()}}},{key:"getNearestAncestor",value:function(ze,Be,en){for(;en>this.options.minZoom;){ze=Math.floor(ze/2),Be=Math.floor(Be/2),en=en-1;var Qt=this.getTile(ze,Be,en);if(Qt)return Qt}return null}}]),fe}(Zh());function is(q){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(q)}function Bs(q){var ue=[],fe=/\{([a-z])-([a-z])\}/.exec(q);if(fe){var Me=fe[1].charCodeAt(0),ze=fe[2].charCodeAt(0),Be;for(Be=Me;Be<=ze;++Be)ue.push(q.replace(fe[0],String.fromCharCode(Be)));return ue}if(fe=/\{(\d+)-(\d+)\}/.exec(q),fe){for(var en=parseInt(fe[2],10),Qt=parseInt(fe[1],10);Qt<=en;Qt++)ue.push(q.replace(fe[0],Qt.toString()));return ue}return ue.push(q),ue}function ic(q,ue){if(!q||!q.length)throw new Error("url is not allowed to be empty");var fe=ue.x,Me=ue.y,ze=ue.z,Be=Bs(q),en=Math.abs(fe+Me)%Be.length,Qt=Ue(Be[en])?"".concat(Be[en],"/{z}/{x}/{y}"):Be[en];return Qt.replace(/\{x\}/g,fe.toString()).replace(/\{y\}/g,Me.toString()).replace(/\{z\}/g,ze.toString()).replace(/\{bbox\}/g,fp(fe,Me,ze).join(",")).replace(/\{-y\}/g,(Math.pow(2,ze)-Me-1).toString())}function cd(q,ue){var fe=ue.x,Me=ue.y,ze=ue.z,Be=ue.layer,en=ue.version,Qt=en===void 0?"1.0.0":en,Xn=ue.style,pn=Xn===void 0?"default":Xn,sr=ue.format,br=ue.service,Ai=br===void 0?"WMTS":br,xi=ue.tileMatrixset,ci=Bs(q),da=Math.abs(fe+Me)%ci.length,ua="".concat(ci[da],"&SERVICE=").concat(Ai,"&REQUEST=GetTile&VERSION=").concat(Qt,"&LAYER=").concat(Be,"&STYLE=").concat(pn,"&TILEMATRIXSET=").concat(xi,"&FORMAT=").concat(sr,"&TILECOL=").concat(fe,"&TILEROW=").concat(Me,"&TILEMATRIX=").concat(ze);return ua}function mf(q,ue){if(!q)throw new Error(ue||"web worker helper assertion failed.")}var Ic={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},Vp=Ic.self||Ic.window||{},Pd=Ic.window||Ic.self||{},fd=Ic.self||Ic.window||{},_h=Ic.document||{},nl=typeof importScripts=="function",ru=typeof window!="undefined"&&typeof window.orientation!="undefined",bh=function(){function q(ue,fe){var Me=this;this.name=ue,this.workerThread=fe,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(ze,Be){Me.resolve=ze,Me.reject=Be})}return q.prototype.postMessage=function(ue,fe){this.workerThread.postMessage({source:"Main thread",type:ue,payload:fe})},q.prototype.done=function(ue){mf(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(ue)},q.prototype.error=function(ue){mf(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(ue)},q}(),pp=bh,uu=new Map;function Ma(q){mf(q.source&&!q.url||!q.source&&q.url);var ue=uu.get(q.source||q.url);return ue||(q.url&&(ue=Il(q.url),uu.set(q.url,ue)),q.source&&(ue=$h(q.source),uu.set(q.source,ue))),mf(ue),ue}function Il(q){if(!q.startsWith("http"))return q;var ue=xh(q);return $h(ue)}function $h(q){var ue=new Blob([q],{type:"application/javascript"});return URL.createObjectURL(ue)}function xh(q){return`try {
  importScripts('`+q+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function qo(q,ue,fe){ue===void 0&&(ue=!0);var Me=fe||new Set;if(q){if(As(q))Me.add(q);else if(As(q.buffer))Me.add(q.buffer);else if(!ArrayBuffer.isView(q)){if(ue&&typeof q=="object")for(var ze in q)qo(q[ze],ue,Me)}}return fe===void 0?Array.from(Me):[]}function As(q){return q?q instanceof ArrayBuffer||typeof MessagePort!="undefined"&&q instanceof MessagePort||typeof ImageBitmap!="undefined"&&q instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&q instanceof OffscreenCanvas:!1}var Eh=function(){},Z=function(){function q(ue){this.terminated=!1,this.loadableURL="";var fe=ue.name,Me=ue.source,ze=ue.url;mf(Me||ze),this.name=fe,this.source=Me,this.url=ze,this.onMessage=Eh,this.onError=function(Be){return console.log(Be)},this.worker=this.createBrowserWorker()}return q.isSupported=function(){return typeof Worker!="undefined"},q.prototype.destroy=function(){this.onMessage=Eh,this.onError=Eh,this.worker.terminate(),this.terminated=!0},Object.defineProperty(q.prototype,"isRunning",{get:function(){return!!this.onMessage},enumerable:!1,configurable:!0}),q.prototype.postMessage=function(ue,fe){fe=fe||qo(ue),this.worker.postMessage(ue,fe)},q.prototype.getErrorFromErrorEvent=function(ue){var fe="Failed to load ";return fe+="worker "+this.name+" from "+this.url+". ",ue.message&&(fe+=ue.message+" in "),ue.lineno&&(fe+=":"+ue.lineno+":"+ue.colno),new Error(fe)},q.prototype.createBrowserWorker=function(){var ue=this;this.loadableURL=Ma({source:this.source,url:this.url});var fe=new Worker(this.loadableURL,{name:this.name});return fe.onmessage=function(Me){Me.data?ue.onMessage(Me.data):ue.onError(new Error("No data received"))},fe.onerror=function(Me){ue.onError(ue.getErrorFromErrorEvent(Me)),ue.terminated=!0},fe.onmessageerror=function(Me){return console.error("worker "+ue.name+", message error: "+Me)},fe},q}(),Vt=Z,Ne=function(){return Ne=Object.assign||function(q){for(var ue,fe=1,Me=arguments.length;fe<Me;fe++){ue=arguments[fe];for(var ze in ue)Object.prototype.hasOwnProperty.call(ue,ze)&&(q[ze]=ue[ze])}return q},Ne.apply(this,arguments)},$e=function(q,ue,fe,Me){function ze(Be){return Be instanceof fe?Be:new fe(function(en){en(Be)})}return new(fe||(fe=Promise))(function(Be,en){function Qt(sr){try{pn(Me.next(sr))}catch(br){en(br)}}function Xn(sr){try{pn(Me.throw(sr))}catch(br){en(br)}}function pn(sr){sr.done?Be(sr.value):ze(sr.value).then(Qt,Xn)}pn((Me=Me.apply(q,ue||[])).next())})},Oe=function(q,ue){var fe={label:0,sent:function(){if(Be[0]&1)throw Be[1];return Be[1]},trys:[],ops:[]},Me,ze,Be,en;return en={next:Qt(0),throw:Qt(1),return:Qt(2)},typeof Symbol=="function"&&(en[Symbol.iterator]=function(){return this}),en;function Qt(pn){return function(sr){return Xn([pn,sr])}}function Xn(pn){if(Me)throw new TypeError("Generator is already executing.");for(;fe;)try{if(Me=1,ze&&(Be=pn[0]&2?ze.return:pn[0]?ze.throw||((Be=ze.return)&&Be.call(ze),0):ze.next)&&!(Be=Be.call(ze,pn[1])).done)return Be;switch(ze=0,Be&&(pn=[pn[0]&2,Be.value]),pn[0]){case 0:case 1:Be=pn;break;case 4:return fe.label++,{value:pn[1],done:!1};case 5:fe.label++,ze=pn[1],pn=[0];continue;case 7:pn=fe.ops.pop(),fe.trys.pop();continue;default:if(Be=fe.trys,!(Be=Be.length>0&&Be[Be.length-1])&&(pn[0]===6||pn[0]===2)){fe=0;continue}if(pn[0]===3&&(!Be||pn[1]>Be[0]&&pn[1]<Be[3])){fe.label=pn[1];break}if(pn[0]===6&&fe.label<Be[1]){fe.label=Be[1],Be=pn;break}if(Be&&fe.label<Be[2]){fe.label=Be[2],fe.ops.push(pn);break}Be[2]&&fe.ops.pop(),fe.trys.pop();continue}pn=ue.call(q,fe)}catch(sr){pn=[6,sr],ze=0}finally{Me=Be=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}},lt=function(){function q(ue){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=ue.source,this.url=ue.url,this.setProps(ue)}return q.prototype.destroy=function(){this.idleQueue.forEach(function(ue){return ue.destroy()}),this.isDestroyed=!0},q.prototype.setProps=function(ue){this.props=Ne(Ne({},this.props),ue),ue.name!==void 0&&(this.name=ue.name),ue.maxConcurrency!==void 0&&(this.maxConcurrency=ue.maxConcurrency),ue.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=ue.maxMobileConcurrency),ue.reuseWorkers!==void 0&&(this.reuseWorkers=ue.reuseWorkers),ue.onDebug!==void 0&&(this.onDebug=ue.onDebug)},q.prototype.startJob=function(ue,fe,Me){return fe===void 0&&(fe=function(ze,Be,en){return ze.done(en)}),Me===void 0&&(Me=function(ze,Be){return ze.error(Be)}),$e(this,void 0,void 0,function(){var ze,Be=this;return Oe(this,function(en){switch(en.label){case 0:return ze=new Promise(function(Qt){return Be.jobQueue.push({name:ue,onMessage:fe,onError:Me,onStart:Qt}),Be}),this.startQueuedJob(),[4,ze];case 1:return[2,en.sent()]}})})},q.prototype.startQueuedJob=function(){return $e(this,void 0,void 0,function(){var ue,fe,Me;return Oe(this,function(ze){switch(ze.label){case 0:if(!this.jobQueue.length)return[2];if(ue=this.getAvailableWorker(),!ue)return[2];if(fe=this.jobQueue.shift(),!fe)return[3,4];this.onDebug({message:"Starting job",name:fe.name,backlog:this.jobQueue.length,workerThread:ue}),Me=new pp(fe.name,ue),ue.onMessage=function(Be){return fe.onMessage(Me,Be.type,Be.payload)},ue.onError=function(Be){return fe.onError(Me,Be)},fe.onStart(Me),ze.label=1;case 1:return ze.trys.push([1,,3,4]),[4,Me.result];case 2:return ze.sent(),[3,4];case 3:return this.returnWorkerToQueue(ue),[7];case 4:return[2]}})})},q.prototype.returnWorkerToQueue=function(ue){var fe=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();fe?(ue.destroy(),this.count--):this.idleQueue.push(ue),this.isDestroyed||this.startQueuedJob()},q.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var ue=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new Vt({name:ue,source:this.source,url:this.url})}return null},q.prototype.getMaxConcurrency=function(){return ru?this.maxMobileConcurrency:this.maxConcurrency},q}(),un=lt,Zn=function(){return Zn=Object.assign||function(q){for(var ue,fe=1,Me=arguments.length;fe<Me;fe++){ue=arguments[fe];for(var ze in ue)Object.prototype.hasOwnProperty.call(ue,ze)&&(q[ze]=ue[ze])}return q},Zn.apply(this,arguments)},mn=function(q){var ue=typeof Symbol=="function"&&Symbol.iterator,fe=ue&&q[ue],Me=0;if(fe)return fe.call(q);if(q&&typeof q.length=="number")return{next:function(){return q&&Me>=q.length&&(q=void 0),{value:q&&q[Me++],done:!q}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")},jn={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},zr=function(){function q(ue){this.workerPools=new Map,this.props=Zn({},jn),this.setProps(ue),this.workerPools=new Map}return q.isSupported=function(){return Vt.isSupported()},q.getWorkerFarm=function(ue){return ue===void 0&&(ue={}),q.workerFarm=q.workerFarm||new q({}),q.workerFarm.setProps(ue),q.workerFarm},q.prototype.destroy=function(){var ue,fe;try{for(var Me=mn(this.workerPools.values()),ze=Me.next();!ze.done;ze=Me.next()){var Be=ze.value;Be.destroy()}}catch(en){ue={error:en}}finally{try{ze&&!ze.done&&(fe=Me.return)&&fe.call(Me)}finally{if(ue)throw ue.error}}},q.prototype.setProps=function(ue){var fe,Me;this.props=Zn(Zn({},this.props),ue);try{for(var ze=mn(this.workerPools.values()),Be=ze.next();!Be.done;Be=ze.next()){var en=Be.value;en.setProps(this.getWorkerPoolProps())}}catch(Qt){fe={error:Qt}}finally{try{Be&&!Be.done&&(Me=ze.return)&&Me.call(ze)}finally{if(fe)throw fe.error}}},q.prototype.getWorkerPool=function(ue){var fe=ue.name,Me=ue.source,ze=ue.url,Be=this.workerPools.get(fe);return Be||(Be=new un({name:fe,source:Me,url:ze}),Be.setProps(this.getWorkerPoolProps()),this.workerPools.set(fe,Be)),Be},q.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},q}(),li=null,Gi=new Map,na=function(){function q(){}return Object.defineProperty(q,"onmessage",{set:function(ue){self.onmessage=function(fe){if(La(fe)){var Me=fe.data,ze=Me.type,Be=Me.payload;ue(ze,Be)}}},enumerable:!1,configurable:!0}),q.addEventListener=function(ue){var fe=Gi.get(ue);fe||(fe=function(Me){if(La(Me)){var ze=Me.data,Be=ze.type,en=ze.payload;ue(Be,en)}}),self.addEventListener("message",fe)},q.removeEventListener=function(ue){var fe=Gi.get(ue);Gi.delete(ue),self.removeEventListener("message",fe)},q.postMessage=function(ue,fe){if(self){var Me={source:"Worker thread",type:ue,payload:fe},ze=qo(fe);self.postMessage(Me,ze)}},q}(),ga=null;function La(q){var ue=q.type,fe=q.data;return ue==="message"&&fe&&typeof fe.source=="string"&&fe.source==="Main thread"}function ui(q){return JSON.parse(Ka(q))}function Ka(q){var ue=new Set;return JSON.stringify(q,function(fe,Me){if(typeof Me=="object"&&Me!==null){if(ue.has(Me))try{return JSON.parse(JSON.stringify(Me))}catch(ze){return}ue.add(Me)}return Me})}function uo(q){return""+q.name}function no(q,ue){ue===void 0&&(ue={});var fe=ue[q.id]||{},Me=q.name+".worker.js",ze=fe.workerUrl;return ue._workerType==="test"&&(ze=q.module+"/dist/"+Me),ze||(ze="https://unpkg.com/"+q.module+"/dist/"+Me),assert(ze),ze}var as=function(q,ue,fe,Me){function ze(Be){return Be instanceof fe?Be:new fe(function(en){en(Be)})}return new(fe||(fe=Promise))(function(Be,en){function Qt(sr){try{pn(Me.next(sr))}catch(br){en(br)}}function Xn(sr){try{pn(Me.throw(sr))}catch(br){en(br)}}function pn(sr){sr.done?Be(sr.value):ze(sr.value).then(Qt,Xn)}pn((Me=Me.apply(q,ue||[])).next())})},Es=function(q,ue){var fe={label:0,sent:function(){if(Be[0]&1)throw Be[1];return Be[1]},trys:[],ops:[]},Me,ze,Be,en;return en={next:Qt(0),throw:Qt(1),return:Qt(2)},typeof Symbol=="function"&&(en[Symbol.iterator]=function(){return this}),en;function Qt(pn){return function(sr){return Xn([pn,sr])}}function Xn(pn){if(Me)throw new TypeError("Generator is already executing.");for(;fe;)try{if(Me=1,ze&&(Be=pn[0]&2?ze.return:pn[0]?ze.throw||((Be=ze.return)&&Be.call(ze),0):ze.next)&&!(Be=Be.call(ze,pn[1])).done)return Be;switch(ze=0,Be&&(pn=[pn[0]&2,Be.value]),pn[0]){case 0:case 1:Be=pn;break;case 4:return fe.label++,{value:pn[1],done:!1};case 5:fe.label++,ze=pn[1],pn=[0];continue;case 7:pn=fe.ops.pop(),fe.trys.pop();continue;default:if(Be=fe.trys,!(Be=Be.length>0&&Be[Be.length-1])&&(pn[0]===6||pn[0]===2)){fe=0;continue}if(pn[0]===3&&(!Be||pn[1]>Be[0]&&pn[1]<Be[3])){fe.label=pn[1];break}if(pn[0]===6&&fe.label<Be[1]){fe.label=Be[1],Be=pn;break}if(Be&&fe.label<Be[2]){fe.label=Be[2],fe.ops.push(pn);break}Be[2]&&fe.ops.pop(),fe.trys.pop();continue}pn=ue.call(q,fe)}catch(sr){pn=[6,sr],ze=0}finally{Me=Be=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}};function vs(q,ue){return WorkerFarm.isSupported()?q.worker&&(ue==null?void 0:ue.worker):!1}function Ko(q,ue,fe,Me){return fe===void 0&&(fe={}),Me===void 0&&(Me={}),as(this,void 0,void 0,function(){var ze,Be,en,Qt,Xn,pn,sr,br;return Es(this,function(Ai){switch(Ai.label){case 0:return ze=getWorkerName(q),Be=getWorkerURL(q,fe),en=WorkerFarm.getWorkerFarm(fe),Qt=en.getWorkerPool({name:ze,url:Be}),Xn=fe.jobName||q.name,[4,Qt.startJob(Xn,_o.bind(null,Me))];case 1:return pn=Ai.sent(),sr=removeNontransferableOptions(fe),pn.postMessage("process",{input:ue,options:sr}),[4,pn.result];case 2:return br=Ai.sent(),[2,br.result]}})})}function _o(q,ue,fe,Me){return as(this,void 0,void 0,function(){var ze,Be,en,Qt,Xn,pn,sr;return Es(this,function(br){switch(br.label){case 0:switch(ze=fe,ze){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return ue.done(Me),[3,9];case 2:return ue.error(new Error(Me.error)),[3,9];case 3:Be=Me.id,en=Me.input,Qt=Me.options,br.label=4;case 4:return br.trys.push([4,6,,7]),q.process?[4,q.process(en,Qt)]:(ue.postMessage("error",{id:Be,error:"Worker not set up to process on main thread"}),[2]);case 5:return Xn=br.sent(),ue.postMessage("done",{id:Be,result:Xn}),[3,7];case 6:return pn=br.sent(),sr=pn instanceof Error?pn.message:"unknown error",ue.postMessage("error",{id:Be,error:sr}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+fe),br.label=9;case 9:return[2]}})})}var oa=function(){function q(){this._values=[],this._settlers=[],this._closed=!1}return q.prototype[Symbol.asyncIterator]=function(){return this},q.prototype.push=function(ue){return this.enqueue(ue)},q.prototype.enqueue=function(ue){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var fe=this._settlers.shift();ue instanceof Error?fe.reject(ue):fe.resolve({value:ue})}else this._values.push(ue)},q.prototype.close=function(){for(;this._settlers.length>0;){var ue=this._settlers.shift();ue.resolve({done:!0})}this._closed=!0},q.prototype.next=function(){var ue=this;if(this._values.length>0){var fe=this._values.shift();return fe instanceof Error?Promise.reject(fe):Promise.resolve({done:!1,value:fe})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(Me,ze){ue._settlers.push({resolve:Me,reject:ze})})},q}(),ra=null,Qo=function(q,ue,fe,Me){function ze(Be){return Be instanceof fe?Be:new fe(function(en){en(Be)})}return new(fe||(fe=Promise))(function(Be,en){function Qt(sr){try{pn(Me.next(sr))}catch(br){en(br)}}function Xn(sr){try{pn(Me.throw(sr))}catch(br){en(br)}}function pn(sr){sr.done?Be(sr.value):ze(sr.value).then(Qt,Xn)}pn((Me=Me.apply(q,ue||[])).next())})},Jo=function(q,ue){var fe={label:0,sent:function(){if(Be[0]&1)throw Be[1];return Be[1]},trys:[],ops:[]},Me,ze,Be,en;return en={next:Qt(0),throw:Qt(1),return:Qt(2)},typeof Symbol=="function"&&(en[Symbol.iterator]=function(){return this}),en;function Qt(pn){return function(sr){return Xn([pn,sr])}}function Xn(pn){if(Me)throw new TypeError("Generator is already executing.");for(;fe;)try{if(Me=1,ze&&(Be=pn[0]&2?ze.return:pn[0]?ze.throw||((Be=ze.return)&&Be.call(ze),0):ze.next)&&!(Be=Be.call(ze,pn[1])).done)return Be;switch(ze=0,Be&&(pn=[pn[0]&2,Be.value]),pn[0]){case 0:case 1:Be=pn;break;case 4:return fe.label++,{value:pn[1],done:!1};case 5:fe.label++,ze=pn[1],pn=[0];continue;case 7:pn=fe.ops.pop(),fe.trys.pop();continue;default:if(Be=fe.trys,!(Be=Be.length>0&&Be[Be.length-1])&&(pn[0]===6||pn[0]===2)){fe=0;continue}if(pn[0]===3&&(!Be||pn[1]>Be[0]&&pn[1]<Be[3])){fe.label=pn[1];break}if(pn[0]===6&&fe.label<Be[1]){fe.label=Be[1],Be=pn;break}if(Be&&fe.label<Be[2]){fe.label=Be[2],fe.ops.push(pn);break}Be[2]&&fe.ops.pop(),fe.trys.pop();continue}pn=ue.call(q,fe)}catch(sr){pn=[6,sr],ze=0}finally{Me=Be=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}},No=function(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue=q[Symbol.asyncIterator],fe;return ue?ue.call(q):(q=typeof __values=="function"?__values(q):q[Symbol.iterator](),fe={},Me("next"),Me("throw"),Me("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function Me(Be){fe[Be]=q[Be]&&function(en){return new Promise(function(Qt,Xn){en=q[Be](en),ze(Qt,Xn,en.done,en.value)})}}function ze(Be,en,Qt,Xn){Promise.resolve(Xn).then(function(pn){Be({value:pn,done:Qt})},en)}},os=0,Fo,$u;function gf(q,ue){var fe=this;if(typeof self!="undefined"){var Me={process:jo};WorkerBody.onmessage=function(ze,Be){return Qo(fe,void 0,void 0,function(){var en,Qt,Xn,pn,sr,br,Ai,xi,ci,da,ua;return Jo(this,function(la){switch(la.label){case 0:switch(la.trys.push([0,19,,20]),en=ze,en){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!q)throw new Error("Worker does not support atomic processing");return[4,q(Be.input,Be.options||{},Me)];case 2:return Qt=la.sent(),WorkerBody.postMessage("done",{result:Qt}),[3,18];case 3:if(!ue)throw new Error("Worker does not support batched processing");Fo=new AsyncQueue,$u=Be.options||{},Xn=ue(Fo,$u,Me),la.label=4;case 4:la.trys.push([4,9,10,15]),pn=No(Xn),la.label=5;case 5:return[4,pn.next()];case 6:if(sr=la.sent(),!!sr.done)return[3,8];br=sr.value,WorkerBody.postMessage("output-batch",{result:br}),la.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return Ai=la.sent(),da={error:Ai},[3,15];case 10:return la.trys.push([10,,13,14]),sr&&!sr.done&&(ua=pn.return)?[4,ua.call(pn)]:[3,12];case 11:la.sent(),la.label=12;case 12:return[3,14];case 13:if(da)throw da.error;return[7];case 14:return[7];case 15:return WorkerBody.postMessage("done",{}),[3,18];case 16:return Fo.push(Be.input),[3,18];case 17:return Fo.close(),[3,18];case 18:return[3,20];case 19:return xi=la.sent(),ci=xi instanceof Error?xi.message:"",WorkerBody.postMessage("error",{error:ci}),[3,20];case 20:return[2]}})})}}}function jo(q,ue){return ue===void 0&&(ue={}),new Promise(function(fe,Me){var ze=os++,Be=function(Qt,Xn){if(Xn.id===ze)switch(Qt){case"done":WorkerBody.removeEventListener(Be),fe(Xn.result);break;case"error":WorkerBody.removeEventListener(Be),Me(Xn.error);break;default:}};WorkerBody.addEventListener(Be);var en={id:ze,input:q,options:ue};WorkerBody.postMessage("process",en)})}var qs=function(q,ue,fe,Me){function ze(Be){return Be instanceof fe?Be:new fe(function(en){en(Be)})}return new(fe||(fe=Promise))(function(Be,en){function Qt(sr){try{pn(Me.next(sr))}catch(br){en(br)}}function Xn(sr){try{pn(Me.throw(sr))}catch(br){en(br)}}function pn(sr){sr.done?Be(sr.value):ze(sr.value).then(Qt,Xn)}pn((Me=Me.apply(q,ue||[])).next())})},Id=function(q,ue){var fe={label:0,sent:function(){if(Be[0]&1)throw Be[1];return Be[1]},trys:[],ops:[]},Me,ze,Be,en;return en={next:Qt(0),throw:Qt(1),return:Qt(2)},typeof Symbol=="function"&&(en[Symbol.iterator]=function(){return this}),en;function Qt(pn){return function(sr){return Xn([pn,sr])}}function Xn(pn){if(Me)throw new TypeError("Generator is already executing.");for(;fe;)try{if(Me=1,ze&&(Be=pn[0]&2?ze.return:pn[0]?ze.throw||((Be=ze.return)&&Be.call(ze),0):ze.next)&&!(Be=Be.call(ze,pn[1])).done)return Be;switch(ze=0,Be&&(pn=[pn[0]&2,Be.value]),pn[0]){case 0:case 1:Be=pn;break;case 4:return fe.label++,{value:pn[1],done:!1};case 5:fe.label++,ze=pn[1],pn=[0];continue;case 7:pn=fe.ops.pop(),fe.trys.pop();continue;default:if(Be=fe.trys,!(Be=Be.length>0&&Be[Be.length-1])&&(pn[0]===6||pn[0]===2)){fe=0;continue}if(pn[0]===3&&(!Be||pn[1]>Be[0]&&pn[1]<Be[3])){fe.label=pn[1];break}if(pn[0]===6&&fe.label<Be[1]){fe.label=Be[1],Be=pn;break}if(Be&&fe.label<Be[2]){fe.label=Be[2],fe.ops.push(pn);break}Be[2]&&fe.ops.pop(),fe.trys.pop();continue}pn=ue.call(q,fe)}catch(sr){pn=[6,sr],ze=0}finally{Me=Be=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}},yc={};function kd(q,ue,fe){return ue===void 0&&(ue=null),fe===void 0&&(fe={}),qs(this,void 0,void 0,function(){return Id(this,function(Me){switch(Me.label){case 0:return ue&&(q=Sh(q,ue,fe)),yc[q]=yc[q]||dl(q),[4,yc[q]];case 1:return[2,Me.sent()]}})})}function Sh(q,ue,fe){if(q.startsWith("http"))return q;var Me=fe.modules||{};return Me[q]?Me[q]:fe.CDN?(assert(fe.CDN.startsWith("http")),fe.CDN+"/"+ue+"/dist/libs/"+q):isWorker?"../src/libs/"+q:"modules/"+ue+"/src/libs/"+q}function dl(q){return qs(this,void 0,void 0,function(){var ue,fe,Me;return Id(this,function(ze){switch(ze.label){case 0:return q.endsWith("wasm")?[4,fetch(q)]:[3,3];case 1:return ue=ze.sent(),[4,ue.arrayBuffer()];case 2:return[2,ze.sent()];case 3:return isWorker?[2,importScripts(q)]:[4,fetch(q)];case 4:return fe=ze.sent(),[4,fe.text()];case 5:return Me=ze.sent(),[2,Gh(Me,q)]}})})}function Gh(q,ue){if(isWorker)return eval.call(global,q),null;var fe=document.createElement("script");fe.id=ue;try{fe.appendChild(document.createTextNode(q))}catch(Me){fe.text=q}return document.body.appendChild(fe),null}var kc="0.0.3",gv={id:"null",name:"null",module:"web-worker-helper",options:{}};function _c(q){var ue=q.color;return!ue||!ue.length?[1,1,1,1]:ue}function Bf(q,ue,fe){return fe.length===2?[fe[0],fe[1],0]:[fe[0],fe[1],fe[2]]}function wh(q){var ue=q.filter;return ue?[1]:[0]}function yf(q,ue){return[ue]}var _f=D(9187),Xh=D.n(_f),po=D(31437),Lc=po.Ue(),Hp=po.Ue(),iu=po.Ue(),$s=po.Ue(),bf=po.Ue();function bc(q,ue,fe,Me,ze){po.IH(q,fe,Me),po.Fv(q,q),ue=po.al(-q[1],q[0]);var Be=po.al(-fe[1],fe[0]);return[ze/po.AK(ue,Be),ue]}function kl(q,ue){return po.t8(q,-ue[1],ue[0])}function Th(q,ue,fe){return po.lu(q,ue,fe),po.Fv(q,q),q}function x(q,ue){return q[0]===ue[0]&&q[1]===ue[1]}function A(q){for(var ue=new Map,fe=0;fe<q.length;fe++){var Me=q[0].toString()+"-"+q[1].toString();ue.get(Me)?(q.splice(fe,1),fe++):ue.set(Me,Me)}return q}var w=function(){function q(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Q.Z)(this,q),(0,Ts.Z)(this,"lastFlip",-1),(0,Ts.Z)(this,"miter",po.al(0,0)),(0,Ts.Z)(this,"started",!1),(0,Ts.Z)(this,"dash",!1),(0,Ts.Z)(this,"totalDistance",0),(0,Ts.Z)(this,"currentIndex",0),this.join=ue.join||"miter",this.cap=ue.cap||"butt",this.miterLimit=ue.miterLimit||10,this.thickness=ue.thickness||1,this.dash=ue.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,ne.Z)(q,[{key:"extrude_gaode2",value:function(fe,Me){var ze=this.complex;if(fe.length<=1)return ze;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Be=fe.length,en=ze.startIndex,Qt=1;Qt<Be;Qt++){var Xn,pn,sr,br=fe[Qt-1];br.push((Xn=Me[Qt-1][2])!==null&&Xn!==void 0?Xn:0);var Ai=Me[Qt-1],xi=fe[Qt];xi.push((pn=Me[Qt][2])!==null&&pn!==void 0?pn:0);var ci=Me[Qt],da=Qt<fe.length-1?[].concat((0,bn.Z)(fe[Qt+1]),[(sr=Me[Qt+1][2])!==null&&sr!==void 0?sr:0]):null,ua=Qt<Me.length-1?Me[Qt+1]:null,la=this.segment_gaode2(ze,en,br,xi,da,Ai,ci,ua);en+=la}if(this.dash)for(var Ua=0;Ua<ze.positions.length/6;Ua++)ze.positions[Ua*6+5]=this.totalDistance;return ze.startIndex=ze.positions.length/6,ze}},{key:"simpleExtrude_gaode2",value:function(fe,Me){var ze=this.complex;if(fe.length<=1)return ze;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Be=fe.length,en=ze.startIndex,Qt=1;Qt<Be;Qt++){var Xn,pn,sr,br=fe[Qt-1];br.push((Xn=Me[Qt-1][2])!==null&&Xn!==void 0?Xn:0);var Ai=Me[Qt-1],xi=fe[Qt];xi.push((pn=Me[Qt][2])!==null&&pn!==void 0?pn:0);var ci=Me[Qt],da=Qt<fe.length-1?[].concat((0,bn.Z)(fe[Qt+1]),[(sr=Me[Qt+1][2])!==null&&sr!==void 0?sr:0]):null,ua=Qt<Me.length-1?Me[Qt+1]:null,la=this.simpleSegment(ze,en,br,xi,da,Ai,ci,ua);en+=la}if(this.dash)for(var Ua=0;Ua<ze.positions.length/6;Ua++)ze.positions[Ua*6+5]=this.totalDistance;return ze.startIndex=ze.positions.length/6,ze}},{key:"extrude",value:function(fe){var Me=this.complex;if(fe.length<=1)return Me;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var ze=fe.length,Be=Me.startIndex,en=1;en<ze;en++){var Qt=fe[en-1],Xn=fe[en],pn=en<fe.length-1?fe[en+1]:null,sr=this.segment(Me,Be,Qt,Xn,pn);Be+=sr}if(this.dash)for(var br=0;br<Me.positions.length/6;br++)Me.positions[br*6+5]=this.totalDistance;return Me.startIndex=Me.positions.length/6,Me}},{key:"simpleExtrude",value:function(fe){var Me=this.complex;if(fe.length<=1)return Me;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var ze=fe.length,Be=Me.startIndex,en=1;en<ze;en++){var Qt=fe[en-1],Xn=fe[en],pn=en<fe.length-1?fe[en+1]:null,sr=this.simpleSegment(Me,Be,Qt,Xn,pn);Be+=sr}if(this.dash)for(var br=0;br<Me.positions.length/6;br++)Me.positions[br*6+5]=this.totalDistance;return Me.startIndex=Me.positions.length/6,Me}},{key:"segment_gaode2",value:function(fe,Me,ze,Be,en,Qt,Xn,pn){var sr=0,br=fe.indices,Ai=fe.positions,xi=fe.normals,ci=this.cap==="square",da=this.join==="bevel",ua=mu([Xn[0],Xn[1]]),la=mu([Qt[0],Qt[1]]);Th(iu,Be,ze);var Ua=0;if(this.dash&&(Ua=this.lineSegmentDistance(ua,la),this.totalDistance+=Ua),this.normal||(this.normal=po.Ue(),kl(this.normal,iu)),!this.started)if(this.started=!0,ci){var $a=po.Ue(),oo=po.Ue();po.IH($a,this.normal,iu),po.IH(oo,this.normal,iu),xi.push(oo[0],oo[1],0),xi.push($a[0],$a[1],0),Ai.push(ze[0],ze[1],ze[2]|0,this.totalDistance-Ua,-this.thickness,ze[2]|0),this.complex.indexes.push(this.currentIndex),Ai.push(ze[0],ze[1],ze[2]|0,this.totalDistance-Ua,this.thickness,ze[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ai,xi,ze,this.normal,this.thickness,this.totalDistance-Ua);if(br.push(Me+0,Me+1,Me+2),en){x(Be,en)&&po.IH(en,Be,po.Fv(en,po.$X(en,Be,ze))),Th($s,en,Be);var Fs=bc(bf,po.Ue(),iu,$s,this.thickness),rs=(0,Xe.Z)(Fs,2),So=rs[0],es=rs[1],Tu=po.AK(bf,this.normal)<0?-1:1,rl=da;if(!rl&&this.join==="miter"){var bu=So;bu>this.miterLimit&&(rl=!0)}rl?(xi.push(this.normal[0],this.normal[1],0),xi.push(es[0],es[1],0),Ai.push(Be[0],Be[1],Be[2]|0,this.totalDistance,-this.thickness*Tu,Be[2]|0),this.complex.indexes.push(this.currentIndex),Ai.push(Be[0],Be[1],Be[2]|0,this.totalDistance,this.thickness*Tu,Be[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,br.push.apply(br,(0,bn.Z)(this.lastFlip!==-Tu?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),br.push(Me+2,Me+3,Me+4),kl(Lc,$s),po.JG(this.normal,Lc),xi.push(this.normal[0],this.normal[1],0),Ai.push(Be[0],Be[1],Be[2]|0,this.totalDistance,-this.thickness*Tu,Be[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,sr+=3):(this.extrusions(Ai,xi,Be,es,So,this.totalDistance),br.push.apply(br,(0,bn.Z)(this.lastFlip===1?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),Tu=-1,po.JG(this.normal,es),sr+=2),this.lastFlip=Tu}else{if(kl(this.normal,iu),ci){var ms=po.Ue(),bs=po.Ue();po.lu(bs,iu,this.normal),po.IH(ms,iu,this.normal),xi.push(bs[0],bs[1],0),xi.push(ms[0],ms[1],0),Ai.push(Be[0],Be[1],Be[2]|0,this.totalDistance,this.thickness,Be[2]|0),this.complex.indexes.push(this.currentIndex),Ai.push(Be[0],Be[1],Be[2]|0,this.totalDistance,this.thickness,Be[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ai,xi,Be,this.normal,this.thickness,this.totalDistance);br.push.apply(br,(0,bn.Z)(this.lastFlip===1?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),sr+=2}return sr}},{key:"simpleSegment",value:function(fe,Me,ze,Be,en){var Qt=0,Xn=fe.indices,pn=fe.positions,sr=fe.normals,br=mu([Be[0],Be[1]]),Ai=mu([ze[0],ze[1]]);Th(iu,br,Ai);var xi=0;if(this.dash&&(xi=this.lineSegmentDistance(br,Ai),this.totalDistance+=xi),this.normal||(this.normal=po.Ue(),kl(this.normal,iu)),this.started||(this.started=!0,this.extrusions(pn,sr,ze,this.normal,this.thickness,this.totalDistance-xi)),Xn.push(Me+0,Me+1,Me+2),!en)kl(this.normal,iu),this.extrusions(pn,sr,Be,this.normal,this.thickness,this.totalDistance),Xn.push.apply(Xn,(0,bn.Z)(this.lastFlip===1?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),Qt+=2;else{var ci=mu([en[0],en[1]]);x(br,ci)&&po.IH(ci,br,po.Fv(ci,po.$X(ci,br,Ai))),Th($s,ci,br);var da=bc(bf,po.Ue(),iu,$s,this.thickness),ua=(0,Xe.Z)(da,2),la=ua[0],Ua=ua[1],$a=po.AK(bf,this.normal)<0?-1:1;this.extrusions(pn,sr,Be,Ua,la,this.totalDistance),Xn.push.apply(Xn,(0,bn.Z)(this.lastFlip===1?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),$a=-1,po.JG(this.normal,Ua),Qt+=2,this.lastFlip=$a}return Qt}},{key:"segment",value:function(fe,Me,ze,Be,en){var Qt=0,Xn=fe.indices,pn=fe.positions,sr=fe.normals,br=this.cap==="square",Ai=this.join==="bevel",xi=mu([Be[0],Be[1]]),ci=mu([ze[0],ze[1]]);Th(iu,xi,ci);var da=0;if(this.dash&&(da=this.lineSegmentDistance(xi,ci),this.totalDistance+=da),this.normal||(this.normal=po.Ue(),kl(this.normal,iu)),!this.started)if(this.started=!0,br){var ua=po.Ue(),la=po.Ue();po.IH(ua,this.normal,iu),po.IH(la,this.normal,iu),sr.push(la[0],la[1],0),sr.push(ua[0],ua[1],0),pn.push(ze[0],ze[1],ze[2]|0,this.totalDistance-da,-this.thickness,ze[2]|0),this.complex.indexes.push(this.currentIndex),pn.push(ze[0],ze[1],ze[2]|0,this.totalDistance-da,this.thickness,ze[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(pn,sr,ze,this.normal,this.thickness,this.totalDistance-da);if(Xn.push(Me+0,Me+1,Me+2),en){var oo=mu([en[0],en[1]]);x(xi,oo)&&po.IH(oo,xi,po.Fv(oo,po.$X(oo,xi,ci))),Th($s,oo,xi);var ms=bc(bf,po.Ue(),iu,$s,this.thickness),bs=(0,Xe.Z)(ms,2),Fs=bs[0],rs=bs[1],So=po.AK(bf,this.normal)<0?-1:1,es=Ai;if(!es&&this.join==="miter"){var Tu=Fs;Tu>this.miterLimit&&(es=!0)}es?(sr.push(this.normal[0],this.normal[1],0),sr.push(rs[0],rs[1],0),pn.push(Be[0],Be[1],Be[2]|0,this.totalDistance,-this.thickness*So,Be[2]|0),this.complex.indexes.push(this.currentIndex),pn.push(Be[0],Be[1],Be[2]|0,this.totalDistance,this.thickness*So,Be[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Xn.push.apply(Xn,(0,bn.Z)(this.lastFlip!==-So?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),Xn.push(Me+2,Me+3,Me+4),kl(Lc,$s),po.JG(this.normal,Lc),sr.push(this.normal[0],this.normal[1],0),pn.push(Be[0],Be[1],Be[2]|0,this.totalDistance,-this.thickness*So,Be[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Qt+=3):(this.extrusions(pn,sr,Be,rs,Fs,this.totalDistance),Xn.push.apply(Xn,(0,bn.Z)(this.lastFlip===1?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),So=-1,po.JG(this.normal,rs),Qt+=2),this.lastFlip=So}else{if(kl(this.normal,iu),br){var Ua=po.Ue(),$a=po.Ue();po.lu($a,iu,this.normal),po.IH(Ua,iu,this.normal),sr.push($a[0],$a[1],0),sr.push(Ua[0],Ua[1],0),pn.push(Be[0],Be[1],Be[2]|0,this.totalDistance,this.thickness,Be[2]|0),this.complex.indexes.push(this.currentIndex),pn.push(Be[0],Be[1],Be[2]|0,this.totalDistance,this.thickness,Be[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(pn,sr,Be,this.normal,this.thickness,this.totalDistance);Xn.push.apply(Xn,(0,bn.Z)(this.lastFlip===1?[Me,Me+2,Me+3]:[Me+2,Me+1,Me+3])),Qt+=2}return Qt}},{key:"extrusions",value:function(fe,Me,ze,Be,en,Qt){Me.push(Be[0],Be[1],0),Me.push(Be[0],Be[1],0),fe.push(ze[0],ze[1],ze[2]|0,Qt,-en,ze[2]|0),this.complex.indexes.push(this.currentIndex),fe.push(ze[0],ze[1],ze[2]|0,Qt,en,ze[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(fe,Me){var ze=Me[0]-fe[0],Be=Me[1]-fe[1];return Math.sqrt(ze*ze+Be*Be)}}]),q}();function R(q){var ue=q.coordinates,fe=q.originCoordinates,Me=q.version,ze=new w({dash:!0,join:"bevel"});if(Me==="GAODE2.x"){var Be=ue;Array.isArray(Be[0][0])||(Be=[ue]);var en=fe;Array.isArray(en[0][0])||(en=[fe]);for(var Qt=0;Qt<Be.length;Qt++){var Xn=Be[Qt],pn=en[Qt];ze.extrude_gaode2(Xn,pn)}}else{var sr=ue;sr[0]&&!Array.isArray(sr[0][0])&&(sr=[ue]),sr.forEach(function(Ai){ze.extrude(Ai)})}var br=ze.complex;return{vertices:br.positions,indices:br.indices,normals:br.normals,indexes:br.indexes,size:6}}function j(q){var ue=sp(q.coordinates);return{vertices:[].concat((0,bn.Z)(ue),(0,bn.Z)(ue),(0,bn.Z)(ue),(0,bn.Z)(ue)),indices:[0,1,2,2,3,0],size:ue.length}}function Y(q){var ue=q.coordinates,fe=Xh().flatten(ue),Me=fe.vertices,ze=fe.dimensions,Be=fe.holes,en=Xh()(Me,Be,ze);return{indices:en,vertices:Me,size:ze}}var te=function(){var q=(0,rc.Z)(Mc().mark(function ue(fe){var Me,ze,Be,en,Qt,Xn,pn,sr,br;return Mc().wrap(function(xi){for(;;)switch(xi.prev=xi.next){case 0:return Me=fe.descriptors,ze=fe.features,Be=fe.enablePicking,en=fe.iconMap,Qt={a_Color:_c,a_Position:Bf,filter:wh,a_vertexId:yf,a_PickingColor:function(da){var ua=da.id;return Be?hn(ua):[0,0,0]},a_DistanceAndIndex:function(da,ua,la,Ua,$a,oo){return oo===void 0?[la[3],10]:[la[3],oo]},a_Total_Distance:function(da,ua,la){return[la[5]]},a_Size:function(da){var ua=da.size,la=ua===void 0?1:ua;return Array.isArray(la)?[la[0],la[1]]:[la,0]},a_Normal:function(da,ua,la,Ua,$a){return $a},a_Miter:function(da,ua,la){return[la[4]]},a_iconMapUV:function(da){var ua=da.texture,la=en[ua]||{x:0,y:0},Ua=la.x,$a=la.y;return[Ua,$a]}},Xn={sizePerElement:0,elements:[]},pn=0,sr=[],br=3,ze.forEach(function(ci,da){var ua=R(ci),la=ua.indices,Ua=ua.vertices,$a=ua.normals,oo=ua.size,ms=ua.indexes;la.forEach(function(So){sr.push(So+pn)}),br=oo;var bs=Ua.length/oo;Xn.sizePerElement=br,Xn.elements.push({featureIdx:da,vertices:Ua,normals:$a,offset:pn}),pn+=bs;for(var Fs=function(es){var Tu=($a==null?void 0:$a.slice(es*3,es*3+3))||[],rl=Ua.slice(es*oo,es*oo+oo),bu=0;ms&&ms[es]!==void 0&&(bu=ms[es]),Me.forEach(function(Du){if(Du&&Qt[Du.name]){var Ll;(Ll=Du.buffer.data).push.apply(Ll,(0,bn.Z)(Qt[Du.name](ci,da,rl,es,Tu,bu)))}})},rs=0;rs<bs;rs++)Fs(rs)}),xi.abrupt("return",{descriptors:Me,featureLayout:Xn,indices:sr});case 8:case"end":return xi.stop()}},ue)}));return function(fe){return q.apply(this,arguments)}}(),we=function(){var q=(0,rc.Z)(Mc().mark(function ue(fe){var Me,ze,Be,en,Qt,Xn,pn,sr,br;return Mc().wrap(function(xi){for(;;)switch(xi.prev=xi.next){case 0:return Me=fe.descriptors,ze=fe.features,Be=fe.enablePicking,en=fe.shape2d,Qt={a_Color:_c,a_Position:Bf,filter:wh,a_vertexId:yf,a_PickingColor:function(da){var ua=da.id;return Be?hn(ua):[0,0,0]},a_Shape:function(da){var ua=da.shape,la=ua===void 0?2:ua,Ua=en.indexOf(la);return[Ua]},a_Extrude:function(da,ua,la,Ua){var $a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],oo=Ua%4*3;return[$a[oo],$a[oo+1],$a[oo+2]]},a_Size:function(da){var ua=da.size,la=ua===void 0?5:ua;return Array.isArray(la)?[la[0]]:[la]}},Xn={sizePerElement:0,elements:[]},pn=0,sr=[],br=3,ze.forEach(function(ci,da){var ua=j(ci),la=ua.indices,Ua=ua.vertices,$a=ua.normals,oo=ua.size,ms=ua.indexes;la.forEach(function(So){sr.push(So+pn)}),br=oo;var bs=Ua.length/oo;Xn.sizePerElement=br,Xn.elements.push({featureIdx:da,vertices:Ua,normals:$a,offset:pn}),pn+=bs;for(var Fs=function(es){var Tu=($a==null?void 0:$a.slice(es*3,es*3+3))||[],rl=Ua.slice(es*oo,es*oo+oo),bu=0;ms&&ms[es]!==void 0&&(bu=ms[es]),Me.forEach(function(Du){if(Du&&Qt[Du.name]){var Ll;(Ll=Du.buffer.data).push.apply(Ll,(0,bn.Z)(Qt[Du.name](ci,da,rl,es,Tu,bu)))}})},rs=0;rs<bs;rs++)Fs(rs)}),xi.abrupt("return",{descriptors:Me,featureLayout:Xn,indices:sr});case 8:case"end":return xi.stop()}},ue)}));return function(fe){return q.apply(this,arguments)}}(),tt=function(){var q=(0,rc.Z)(Mc().mark(function ue(fe){var Me,ze,Be,en,Qt,Xn,pn,sr;return Mc().wrap(function(Ai){for(;;)switch(Ai.prev=Ai.next){case 0:return Me=fe.descriptors,ze=fe.features,Be=fe.enablePicking,en={a_Color:_c,a_Position:Bf,filter:wh,a_vertexId:yf,a_PickingColor:function(ci){var da=ci.id;return Be?hn(da):[0,0,0]}},Qt={sizePerElement:0,elements:[]},Xn=0,pn=[],sr=3,ze.forEach(function(xi,ci){var da=Y(xi),ua=da.indices,la=da.vertices,Ua=da.normals,$a=da.size,oo=da.indexes;ua.forEach(function(rs){pn.push(rs+Xn)}),sr=$a;var ms=la.length/$a;Qt.sizePerElement=sr,Qt.elements.push({featureIdx:ci,vertices:la,normals:Ua,offset:Xn}),Xn+=ms;for(var bs=function(So){var es=(Ua==null?void 0:Ua.slice(So*3,So*3+3))||[],Tu=la.slice(So*$a,So*$a+$a),rl=0;oo&&oo[So]!==void 0&&(rl=oo[So]),Me.forEach(function(bu){if(bu&&en[bu.name]){var Du;(Du=bu.buffer.data).push.apply(Du,(0,bn.Z)(en[bu.name](xi,ci,Tu,So,es,rl)))}})},Fs=0;Fs<ms;Fs++)bs(Fs)}),Ai.abrupt("return",{descriptors:Me,featureLayout:Qt,indices:pn});case 8:case"end":return Ai.stop()}},ue)}));return function(fe){return q.apply(this,arguments)}}(),At={pointFill:we,line:te,polygonFill:tt},$t=(0,T.Z)({},At);function qt(q){return rn.apply(this,arguments)}function rn(){return rn=_asyncToGenerator(_regeneratorRuntime.mark(function q(ue){var fe,Me;return _regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(fe=ue.workerType,Me=ue.data,!$t[fe]){Be.next=3;break}return Be.abrupt("return",$t[fe](Me));case 3:return Be.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(fe,'" non-existent.'))));case 4:case"end":return Be.stop()}},q)})),rn.apply(this,arguments)}var kn=new Map;function Rn(q,ue){kn.set(q,ue)}function qn(q){var ue=kn.get(q);return ue}var wn="l7-worker",Kn=3,mr=!0;function Or(q){registerWorkerSource(wn,q)}function Wr(){var q=getWorkerSource(wn);if(!q)throw new Error("get worker failed by workerName: ".concat(wn,"."));return q}function Ur(q,ue){return qr.apply(this,arguments)}function qr(){return qr=_asyncToGenerator(_regeneratorRuntime.mark(function q(ue,fe){var Me,ze,Be,en,Qt;return _regeneratorRuntime.wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return Me=Wr(),ze=WorkerFarm.getWorkerFarm({maxConcurrency:Kn,reuseWorkers:mr}),Be=ze.getWorkerPool({name:wn,source:Me}),pn.next=5,Be.startJob(wn,function(sr,br,Ai){return sr.done(Ai)});case 5:return en=pn.sent,en.postMessage("process",{input:{workerType:ue,data:fe}}),pn.next=9,en.result;case 9:return Qt=pn.sent,pn.abrupt("return",Qt.result);case 11:case"end":return pn.stop()}},q)})),qr.apply(this,arguments)}function _i(q,ue){return q==null?ue:q}},94221:function(It,G,D){"use strict";D.d(G,{oT:function(){return Rc},Ie:function(){return Pv},dW:function(){return xx},GI:function(){return PS},xs:function(){return V5}});var ee={},ae={},T=function(c){return ae[c]},ne=function(c,f){ae[c]=f},Q=function(c){return ee[c]},ge=function(c,f){ee[c]=f},pe={},Ce={},he=34,st=10,re=13;function Se(o){return new Function("d","return {"+o.map(function(c,f){return JSON.stringify(c)+": d["+f+'] || ""'}).join(",")+"}")}function se(o,c){var f=Se(o);return function(h,d){return c(f(h),d,o)}}function de(o){var c=Object.create(null),f=[];return o.forEach(function(h){for(var d in h)d in c||f.push(c[d]=d)}),f}function xe(o,c){var f=o+"",h=f.length;return h<c?new Array(c-h+1).join(0)+f:f}function le(o){return o<0?"-"+xe(-o,6):o>9999?"+"+xe(o,6):xe(o,4)}function Ue(o){var c=o.getUTCHours(),f=o.getUTCMinutes(),h=o.getUTCSeconds(),d=o.getUTCMilliseconds();return isNaN(o)?"Invalid Date":le(o.getUTCFullYear(),4)+"-"+xe(o.getUTCMonth()+1,2)+"-"+xe(o.getUTCDate(),2)+(d?"T"+xe(c,2)+":"+xe(f,2)+":"+xe(h,2)+"."+xe(d,3)+"Z":h?"T"+xe(c,2)+":"+xe(f,2)+":"+xe(h,2)+"Z":f||c?"T"+xe(c,2)+":"+xe(f,2)+"Z":"")}function Et(o){var c=new RegExp('["'+o+`
\r]`),f=o.charCodeAt(0);function h(X,me){var je,_t,Ot=d(X,function(nn,Un){if(je)return je(nn,Un-1);_t=nn,je=me?se(nn,me):Se(nn)});return Ot.columns=_t||[],Ot}function d(X,me){var je=[],_t=X.length,Ot=0,nn=0,Un,zn=_t<=0,ur=!1;X.charCodeAt(_t-1)===st&&--_t,X.charCodeAt(_t-1)===re&&--_t;function Pr(){if(zn)return Ce;if(ur)return ur=!1,pe;var kr,hr=Ot,Hr;if(X.charCodeAt(hr)===he){for(;Ot++<_t&&X.charCodeAt(Ot)!==he||X.charCodeAt(++Ot)===he;);return(kr=Ot)>=_t?zn=!0:(Hr=X.charCodeAt(Ot++))===st?ur=!0:Hr===re&&(ur=!0,X.charCodeAt(Ot)===st&&++Ot),X.slice(hr+1,kr-1).replace(/""/g,'"')}for(;Ot<_t;){if((Hr=X.charCodeAt(kr=Ot++))===st)ur=!0;else if(Hr===re)ur=!0,X.charCodeAt(Ot)===st&&++Ot;else if(Hr!==f)continue;return X.slice(hr,kr)}return zn=!0,X.slice(hr,_t)}for(;(Un=Pr())!==Ce;){for(var si=[];Un!==pe&&Un!==Ce;)si.push(Un),Un=Pr();me&&(si=me(si,nn++))==null||je.push(si)}return je}function g(X,me){return X.map(function(je){return me.map(function(_t){return $(je[_t])}).join(o)})}function S(X,me){return me==null&&(me=de(X)),[me.map($).join(o)].concat(g(X,me)).join(`
`)}function C(X,me){return me==null&&(me=de(X)),g(X,me).join(`
`)}function k(X){return X.map(F).join(`
`)}function F(X){return X.map($).join(o)}function $(X){return X==null?"":X instanceof Date?Ue(X):c.test(X+="")?'"'+X.replace(/"/g,'""')+'"':X}return{parse:h,parseRows:d,format:S,formatBody:C,formatRows:k,formatRow:F,formatValue:$}}var mt=Et(","),Wt=mt.parse,Rt=mt.parseRows,Tt=mt.format,Ze=mt.formatBody,Ie=mt.formatRows,Qe=mt.formatRow,it=mt.formatValue,De=D(1413),cn=D(1449);function qe(o){if(!o)throw new Error("coord is required");if(!Array.isArray(o)){if(o.type==="Feature"&&o.geometry!==null&&o.geometry.type==="Point")return o.geometry.coordinates;if(o.type==="Point")return o.coordinates}if(Array.isArray(o)&&o.length>=2&&!Array.isArray(o[0])&&!Array.isArray(o[1]))return o;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Pt(o){if(Array.isArray(o))return o;if(o.type==="Feature"){if(o.geometry!==null)return o.geometry.coordinates}else if(o.coordinates)return o.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Le(o){if(o.length>1&&isNumber(o[0])&&isNumber(o[1]))return!0;if(Array.isArray(o[0])&&o[0].length)return Le(o[0]);throw new Error("coordinates must only contain numbers")}function pt(o,c,f){if(!c||!f)throw new Error("type and name required");if(!o||o.type!==c)throw new Error("Invalid input to "+f+": must be a "+c+", given "+o.type)}function at(o,c,f){if(!o)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!o.geometry||o.geometry.type!==c)throw new Error("Invalid input to "+f+": must be a "+c+", given "+o.geometry.type)}function nt(o,c,f){if(!o)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!o||o.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var h=0,d=o.features;h<d.length;h++){var g=d[h];if(!g||g.type!=="Feature"||!g.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!g.geometry||g.geometry.type!==c)throw new Error("Invalid input to "+f+": must be a "+c+", given "+g.geometry.type)}}function Ct(o){return o.type==="Feature"?o.geometry:o}function rt(o,c){return o.type==="FeatureCollection"?"FeatureCollection":o.type==="GeometryCollection"?"GeometryCollection":o.type==="Feature"&&o.geometry!==null?o.geometry.type:o.type}var vt=D(39034),Ve=D(57059),hn=D(38163),yn=D.n(hn);function ir(o,c){return o.map(function(f){return f[c]*1})}function Qn(o){return o===void 0?!1:!Array.isArray(o)&&o.data!==void 0}function Ut(o){return Array.isArray(o)?o.length===0?!1:!!Qn(o[0]):!1}function En(o){return Array.isArray(o)?o.length===0||typeof o[0]=="number":!1}function Tn(o){var c=Object.isFrozen(o)?Ve.rU.cloneDeep(o):o;return yn()(c,!0),c}function lr(o,c){var f=c.x,h=c.y,d=c.x1,g=c.y1,S=c.coordinates,C=c.geometry,k=[];if(!Array.isArray(o))return{dataArray:[]};if(C)return o.filter(function(Un){return Un[C]&&Un[C].type&&Un[C].coordinates&&Un[C].coordinates.length>0}).forEach(function(Un,zn){var ur=Tn(Un[C]);(0,vt.nG)(ur,function(Pr){var si=Pt(Pr),kr=(0,De.Z)((0,De.Z)({},Un),{},{_id:zn,coordinates:si});k.push(kr)})}),{dataArray:k};for(var F=0;F<o.length;F++){var $=o[F],X=[];if(S){var me="Polygon";Array.isArray(S[0])||(me="Point"),Array.isArray(S[0])&&!Array.isArray(S[0][0])&&(me="LineString");var je=Tn({type:me,coordinates:$[S]});X=je.coordinates}else if(f&&h&&d&&g){var _t=[parseFloat($[f]),parseFloat($[h])],Ot=[parseFloat($[d]),parseFloat($[g])];X=[_t,Ot]}else f&&h&&(X=[parseFloat($[f]),parseFloat($[h])]);var nn=(0,De.Z)((0,De.Z)({},$),{},{_id:F,coordinates:X});k.push(nn)}return{dataArray:k}}function ln(o,c){var f=Wt(o);return lr(f,c)}function Lt(o){for(var c=o.toString(),f=5381,h=c.length;h;)f=f*33^c.charCodeAt(--h);return f>>>0}function bn(o,c){return c===void 0?null:typeof(o.properties[c]*1)=="number"?o.properties[c]*1:o.properties&&o.properties[c]?Lt(o.properties[c]+"")%1000019:null}function Xe(o,c){var f=[],h={};return o.features?(o.features=o.features.filter(function(d){var g=d.geometry;return d!=null&&g&&g.type&&g.coordinates&&g.coordinates.length>0}),o=Tn(o),o.features.length===0?{dataArray:[],featureKeys:h}:((0,vt.nG)(o,function(d,g){var S=bn(d,c==null?void 0:c.featureId);S===null&&(S=g);var C=S,k=Pt(d),F=(0,De.Z)((0,De.Z)({},d.properties),{},{coordinates:k,_id:C});f.push(F)}),{dataArray:f,featureKeys:h})):(o.features=[],{dataArray:[]})}var Fe=D(15861),on=D(64687),B=D.n(on);function be(o,c,f,h){for(var d=h,g=f-c>>1,S=f-c,C,k=o[c],F=o[c+1],$=o[f],X=o[f+1],me=c+3;me<f;me+=3){var je=yt(o[me],o[me+1],k,F,$,X);if(je>d)C=me,d=je;else if(je===d){var _t=Math.abs(me-g);_t<S&&(C=me,S=_t)}}d>h&&(C-c>3&&be(o,c,C,h),o[C+2]=d,f-C>3&&be(o,C,f,h))}function yt(o,c,f,h,d,g){var S=d-f,C=g-h;if(S!==0||C!==0){var k=((o-f)*S+(c-h)*C)/(S*S+C*C);k>1?(f=d,h=g):k>0&&(f+=S*k,h+=C*k)}return S=o-f,C=c-h,S*S+C*C}function Ee(o,c,f,h){var d={id:typeof o=="undefined"?null:o,type:c,geometry:f,tags:h,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Zt(d),d}function Zt(o){var c=o.geometry,f=o.type;if(f==="Point"||f==="MultiPoint"||f==="LineString")_n(o,c);else if(f==="Polygon"||f==="MultiLineString")for(var h=0;h<c.length;h++)_n(o,c[h]);else if(f==="MultiPolygon")for(h=0;h<c.length;h++)for(var d=0;d<c[h].length;d++)_n(o,c[h][d])}function _n(o,c){for(var f=0;f<c.length;f+=3)o.minX=Math.min(o.minX,c[f]),o.minY=Math.min(o.minY,c[f+1]),o.maxX=Math.max(o.maxX,c[f]),o.maxY=Math.max(o.maxY,c[f+1])}function Sn(o,c){var f=[];if(o.type==="FeatureCollection")for(var h=0;h<o.features.length;h++)Bn(f,o.features[h],c,h);else o.type==="Feature"?Bn(f,o,c):Bn(f,{geometry:o},c);return f}function Bn(o,c,f,h){if(c.geometry){var d=c.geometry.coordinates,g=c.geometry.type,S=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),C=[],k=c.id;if(f.promoteId?k=c.properties[f.promoteId]:f.generateId&&(k=h||0),g==="Point")or(d,C);else if(g==="MultiPoint")for(var F=0;F<d.length;F++)or(d[F],C);else if(g==="LineString")dr(d,C,S,!1);else if(g==="MultiLineString")if(f.lineMetrics){for(F=0;F<d.length;F++)C=[],dr(d[F],C,S,!1),o.push(Ee(k,"LineString",C,c.properties));return}else gr(d,C,S,!1);else if(g==="Polygon")gr(d,C,S,!0);else if(g==="MultiPolygon")for(F=0;F<d.length;F++){var $=[];gr(d[F],$,S,!0),C.push($)}else if(g==="GeometryCollection"){for(F=0;F<c.geometry.geometries.length;F++)Bn(o,{id:k,geometry:c.geometry.geometries[F],properties:c.properties},f,h);return}else throw new Error("Input data is not a valid GeoJSON object.");o.push(Ee(k,g,C,c.properties))}}function or(o,c){c.push(wr(o[0])),c.push(Ar(o[1])),c.push(0)}function dr(o,c,f,h){for(var d,g,S=0,C=0;C<o.length;C++){var k=wr(o[C][0]),F=Ar(o[C][1]);c.push(k),c.push(F),c.push(0),C>0&&(h?S+=(d*F-k*g)/2:S+=Math.sqrt(Math.pow(k-d,2)+Math.pow(F-g,2))),d=k,g=F}var $=c.length-3;c[2]=1,be(c,0,$,f),c[$+2]=1,c.size=Math.abs(S),c.start=0,c.end=c.size}function gr(o,c,f,h){for(var d=0;d<o.length;d++){var g=[];dr(o[d],g,f,h),c.push(g)}}function wr(o){return o/360+.5}function Ar(o){var c=Math.sin(o*Math.PI/180),f=.5-.25*Math.log((1+c)/(1-c))/Math.PI;return f<0?0:f>1?1:f}function Ir(o,c,f,h,d,g,S,C){if(f/=c,h/=c,g>=f&&S<h)return o;if(S<f||g>=h)return null;for(var k=[],F=0;F<o.length;F++){var $=o[F],X=$.geometry,me=$.type,je=d===0?$.minX:$.minY,_t=d===0?$.maxX:$.maxY;if(je>=f&&_t<h){k.push($);continue}else if(_t<f||je>=h)continue;var Ot=[];if(me==="Point"||me==="MultiPoint")Nr(X,Ot,f,h,d);else if(me==="LineString")Yr(X,Ot,f,h,d,!1,C.lineMetrics);else if(me==="MultiLineString")ve(X,Ot,f,h,d,!1);else if(me==="Polygon")ve(X,Ot,f,h,d,!0);else if(me==="MultiPolygon")for(var nn=0;nn<X.length;nn++){var Un=[];ve(X[nn],Un,f,h,d,!0),Un.length&&Ot.push(Un)}if(Ot.length){if(C.lineMetrics&&me==="LineString"){for(nn=0;nn<Ot.length;nn++)k.push(Ee($.id,me,Ot[nn],$.tags));continue}(me==="LineString"||me==="MultiLineString")&&(Ot.length===1?(me="LineString",Ot=Ot[0]):me="MultiLineString"),(me==="Point"||me==="MultiPoint")&&(me=Ot.length===3?"Point":"MultiPoint"),k.push(Ee($.id,me,Ot,$.tags))}}return k.length?k:null}function Nr(o,c,f,h,d){for(var g=0;g<o.length;g+=3){var S=o[g+d];S>=f&&S<=h&&(c.push(o[g]),c.push(o[g+1]),c.push(o[g+2]))}}function Yr(o,c,f,h,d,g,S){for(var C=bt(o),k=d===0?Ke:ht,F=o.start,$,X,me=0;me<o.length-3;me+=3){var je=o[me],_t=o[me+1],Ot=o[me+2],nn=o[me+3],Un=o[me+4],zn=d===0?je:_t,ur=d===0?nn:Un,Pr=!1;S&&($=Math.sqrt(Math.pow(je-nn,2)+Math.pow(_t-Un,2))),zn<f?ur>f&&(X=k(C,je,_t,nn,Un,f),S&&(C.start=F+$*X)):zn>h?ur<h&&(X=k(C,je,_t,nn,Un,h),S&&(C.start=F+$*X)):ye(C,je,_t,Ot),ur<f&&zn>=f&&(X=k(C,je,_t,nn,Un,f),Pr=!0),ur>h&&zn<=h&&(X=k(C,je,_t,nn,Un,h),Pr=!0),!g&&Pr&&(S&&(C.end=F+$*X),c.push(C),C=bt(o)),S&&(F+=$)}var si=o.length-3;je=o[si],_t=o[si+1],Ot=o[si+2],zn=d===0?je:_t,zn>=f&&zn<=h&&ye(C,je,_t,Ot),si=C.length-3,g&&si>=3&&(C[si]!==C[0]||C[si+1]!==C[1])&&ye(C,C[0],C[1],C[2]),C.length&&c.push(C)}function bt(o){var c=[];return c.size=o.size,c.start=o.start,c.end=o.end,c}function ve(o,c,f,h,d,g){for(var S=0;S<o.length;S++)Yr(o[S],c,f,h,d,g,!1)}function ye(o,c,f,h){o.push(c),o.push(f),o.push(h)}function Ke(o,c,f,h,d,g){var S=(g-c)/(h-c);return o.push(g),o.push(f+(d-f)*S),o.push(1),S}function ht(o,c,f,h,d,g){var S=(g-f)/(d-f);return o.push(c+(h-c)*S),o.push(g),o.push(1),S}function xt(o,c){var f=c.buffer/c.extent,h=o,d=Ir(o,1,-1-f,f,0,-1,2,c),g=Ir(o,1,1-f,2+f,0,-1,2,c);return(d||g)&&(h=Ir(o,1,-f,1+f,0,-1,2,c)||[],d&&(h=Jt(d,1).concat(h)),g&&(h=h.concat(Jt(g,-1)))),h}function Jt(o,c){for(var f=[],h=0;h<o.length;h++){var d=o[h],g=d.type,S;if(g==="Point"||g==="MultiPoint"||g==="LineString")S=Dn(d.geometry,c);else if(g==="MultiLineString"||g==="Polygon"){S=[];for(var C=0;C<d.geometry.length;C++)S.push(Dn(d.geometry[C],c))}else if(g==="MultiPolygon")for(S=[],C=0;C<d.geometry.length;C++){for(var k=[],F=0;F<d.geometry[C].length;F++)k.push(Dn(d.geometry[C][F],c));S.push(k)}f.push(Ee(d.id,g,S,d.tags))}return f}function Dn(o,c){var f=[];f.size=o.size,o.start!==void 0&&(f.start=o.start,f.end=o.end);for(var h=0;h<o.length;h+=3)f.push(o[h]+c,o[h+1],o[h+2]);return f}function fr(o,c){if(o.transformed)return o;var f=1<<o.z,h=o.x,d=o.y,g,S,C;for(g=0;g<o.features.length;g++){var k=o.features[g],F=k.geometry,$=k.type;if(k.geometry=[],$===1)for(S=0;S<F.length;S+=2)k.geometry.push(In(F[S],F[S+1],c,f,h,d));else for(S=0;S<F.length;S++){var X=[];for(C=0;C<F[S].length;C+=2)X.push(In(F[S][C],F[S][C+1],c,f,h,d));k.geometry.push(X)}}return o.transformed=!0,o}function In(o,c,f,h,d,g){return[Math.round(f*(o*h-d)),Math.round(f*(c*h-g))]}function ke(o,c,f,h,d){for(var g=c===d.maxZoom?0:d.tolerance/((1<<c)*d.extent),S={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:h,z:c,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},C=0;C<o.length;C++){S.numFeatures++,Pe(S,o[C],g,d);var k=o[C].minX,F=o[C].minY,$=o[C].maxX,X=o[C].maxY;k<S.minX&&(S.minX=k),F<S.minY&&(S.minY=F),$>S.maxX&&(S.maxX=$),X>S.maxY&&(S.maxY=X)}return S}function Pe(o,c,f,h){var d=c.geometry,g=c.type,S=[];if(g==="Point"||g==="MultiPoint")for(var C=0;C<d.length;C+=3)S.push(d[C]),S.push(d[C+1]),o.numPoints++,o.numSimplified++;else if(g==="LineString")Ge(S,d,o,f,!1,!1);else if(g==="MultiLineString"||g==="Polygon")for(C=0;C<d.length;C++)Ge(S,d[C],o,f,g==="Polygon",C===0);else if(g==="MultiPolygon")for(var k=0;k<d.length;k++){var F=d[k];for(C=0;C<F.length;C++)Ge(S,F[C],o,f,!0,C===0)}if(S.length){var $=c.tags||null;if(g==="LineString"&&h.lineMetrics){$={};for(var X in c.tags)$[X]=c.tags[X];$.mapbox_clip_start=d.start/d.size,$.mapbox_clip_end=d.end/d.size}var me={geometry:S,type:g==="Polygon"||g==="MultiPolygon"?3:g==="LineString"||g==="MultiLineString"?2:1,tags:$};c.id!==null&&(me.id=c.id),o.features.push(me)}}function Ge(o,c,f,h,d,g){var S=h*h;if(h>0&&c.size<(d?S:h)){f.numPoints+=c.length/3;return}for(var C=[],k=0;k<c.length;k+=3)(h===0||c[k+2]>S)&&(f.numSimplified++,C.push(c[k]),C.push(c[k+1])),f.numPoints++;d&&gt(C,g),o.push(C)}function gt(o,c){for(var f=0,h=0,d=o.length,g=d-2;h<d;g=h,h+=2)f+=(o[h]-o[g])*(o[h+1]+o[g+1]);if(f>0===c)for(h=0,d=o.length;h<d/2;h+=2){var S=o[h],C=o[h+1];o[h]=o[d-2-h],o[h+1]=o[d-1-h],o[d-2-h]=S,o[d-1-h]=C}}function Bt(o,c){return new an(o,c)}function an(o,c){c=this.options=kt(Object.create(this.options),c);var f=c.debug;if(f&&console.time("preprocess data"),c.maxZoom<0||c.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(c.promoteId&&c.generateId)throw new Error("promoteId and generateId cannot be used together.");var h=Sn(o,c);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",c.indexMaxZoom,c.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),h=xt(h,c),h.length&&this.splitTile(h,0,0,0),f&&(h.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}an.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},an.prototype.splitTile=function(o,c,f,h,d,g,S){for(var C=[o,c,f,h],k=this.options,F=k.debug;C.length;){h=C.pop(),f=C.pop(),c=C.pop(),o=C.pop();var $=1<<c,X=An(c,f,h),me=this.tiles[X];if(!me&&(F>1&&console.time("creation"),me=this.tiles[X]=ke(o,c,f,h,k),this.tileCoords.push({z:c,x:f,y:h}),F)){F>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",c,f,h,me.numFeatures,me.numPoints,me.numSimplified),console.timeEnd("creation"));var je="z"+c;this.stats[je]=(this.stats[je]||0)+1,this.total++}if(me.source=o,d){if(c===k.maxZoom||c===d)continue;var _t=1<<d-c;if(f!==Math.floor(g/_t)||h!==Math.floor(S/_t))continue}else if(c===k.indexMaxZoom||me.numPoints<=k.indexMaxPoints)continue;if(me.source=null,o.length!==0){F>1&&console.time("clipping");var Ot=.5*k.buffer/k.extent,nn=.5-Ot,Un=.5+Ot,zn=1+Ot,ur,Pr,si,kr,hr,Hr;ur=Pr=si=kr=null,hr=Ir(o,$,f-Ot,f+Un,0,me.minX,me.maxX,k),Hr=Ir(o,$,f+nn,f+zn,0,me.minX,me.maxX,k),o=null,hr&&(ur=Ir(hr,$,h-Ot,h+Un,1,me.minY,me.maxY,k),Pr=Ir(hr,$,h+nn,h+zn,1,me.minY,me.maxY,k),hr=null),Hr&&(si=Ir(Hr,$,h-Ot,h+Un,1,me.minY,me.maxY,k),kr=Ir(Hr,$,h+nn,h+zn,1,me.minY,me.maxY,k),Hr=null),F>1&&console.timeEnd("clipping"),C.push(ur||[],c+1,f*2,h*2),C.push(Pr||[],c+1,f*2,h*2+1),C.push(si||[],c+1,f*2+1,h*2),C.push(kr||[],c+1,f*2+1,h*2+1)}}},an.prototype.getTile=function(o,c,f){var h=this.options,d=h.extent,g=h.debug;if(o<0||o>24)return null;var S=1<<o;c=(c%S+S)%S;var C=An(o,c,f);if(this.tiles[C])return fr(this.tiles[C],d);g>1&&console.log("drilling down to z%d-%d-%d",o,c,f);for(var k=o,F=c,$=f,X;!X&&k>0;)k--,F=Math.floor(F/2),$=Math.floor($/2),X=this.tiles[An(k,F,$)];return!X||!X.source?null:(g>1&&console.log("found parent tile z%d-%d-%d",k,F,$),g>1&&console.time("drilling down"),this.splitTile(X.source,k,F,$,o,c,f),g>1&&console.timeEnd("drilling down"),this.tiles[C]?fr(this.tiles[C],d):null)};function An(o,c,f){return((1<<o)*f+c)*32+o}function kt(o,c){for(var f in c)o[f]=c[f];return o}var Dt=D(15671),dn=D(43144),He=D(4942),ei=function(){function o(c,f,h,d){(0,Dt.Z)(this,o),(0,He.Z)(this,"vectorLayerCache",{}),this.x=f,this.y=h,this.z=d,this.vectorTile=c}return(0,dn.Z)(o,[{key:"getTileData",value:function(f){if(!f||!this.vectorTile.layers[f])return[];if(this.vectorLayerCache[f])return this.vectorLayerCache[f];var h=this.vectorTile.layers[f];return h.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),o}(),Tr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function ii(o){for(var c=0,f=0,h=o.length,d=h-1,g,S;f<h;d=f++)g=o[f],S=o[d],c+=(S.x-g.x)*(g.y+S.y);return c}function Di(o){var c=o.length;if(c<=1)return[o];for(var f=[],h,d,g=0;g<c;g++){var S=ii(o[g]);S!==0&&(d===void 0&&(d=S<0),d===S<0?(h&&f.push(h),h=[o[g]]):h.push(o[g]))}return h&&f.push(h),f}var vi=["Unknown","Point","LineString","Polygon"];function Br(o,c,f,h,d){var g=d.geometry,S=d.type,C=d.tags,k=d.id,F=o*Math.pow(2,h),$=o*c,X=o*f,me=vi[S],je,_t;function Ot(zn){for(var ur=0;ur<zn.length;ur++){var Pr=zn[ur];if(Pr[3])break;var si=180-(Pr[1]+X)*360/F,kr=(Pr[0]+$)*360/F-180,hr=360/Math.PI*Math.atan(Math.exp(si*Math.PI/180))-90;zn[ur]=[kr,hr,0,1]}}switch(S){case 1:var nn=[];for(je=0;je<g.length;je++)nn[je]=g[je][0];g=nn,Ot(g);break;case 2:for(je=0;je<g.length;je++)Ot(g[je]);break;case 3:for(g=Di(g),je=0;je<g.length;je++)for(_t=0;_t<g[je].length;_t++)Ot(g[je][_t]);break}g.length===1?g=g[0]:me="Multi"+me;var Un={type:"Feature",geometry:{type:me,coordinates:g},properties:C,id:k,tileOrigin:[0,0],coord:""};return Un}var Gr=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",new Promise(function(k){var F=h.getTile(f.z,f.x,f.y),$=F?F.features.map(function(je){return Br(g,d.x,d.y,d.z,je)}):[],X={layers:{defaultLayer:{features:$}}},me=new ei(X,f.x,f.y,f.z);k(me)}));case 1:case"end":return C.stop()}},c)}));return function(f,h,d,g){return o.apply(this,arguments)}}();function bi(o){var c={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return o===void 0||typeof o.geojsonvtOptions=="undefined"?c:(0,De.Z)((0,De.Z)({},c),o.geojsonvtOptions)}function Ni(o,c){var f=bi(c),h=f.extent||4096,d=Bt(o,f),g=function(k,F){return Gr(F,d,k,h)},S=(0,De.Z)((0,De.Z)((0,De.Z)({},Tr),c),{},{getTileData:g});return{data:o,dataArray:[],tilesetOptions:S,isTile:!0}}function Qa(o,c){var f=c.extent,h=f===void 0?[121.168,30.2828,121.384,30.4219]:f,d=c.requestParameters,g=d===void 0?{}:d,S=new Promise(function(k){o instanceof HTMLImageElement||(0,Ve.fg)(o)?k([o]):Xi(o,g,function(F){k(F)})}),C={originData:o,images:S,_id:1,dataArray:[{_id:0,coordinates:[[h[0],h[1]],[h[2],h[3]]]}]};return C}function Xi(o,c,f){var h=[];if(typeof o=="string")(0,Ve.gJ)((0,De.Z)((0,De.Z)({},c),{},{url:o}),function(S,C){C&&(h.push(C),f(h))});else{var d=o.length,g=0;o.forEach(function(S){(0,Ve.gJ)((0,De.Z)((0,De.Z)({},c),{},{url:S}),function(C,k){g++,k&&h.push(k),g===d&&f(h)})})}return Qa}var ao=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g){var S,C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return S={x:h.x,y:h.y,z:h.z},C=(0,Ve.z0)(f,S),F.abrupt("return",new Promise(function($){g?g(S,function(X,me){if(X||!me){var je={layers:{defaultLayer:{features:[]}}},_t=new ei(je,h.x,h.y,h.z);$(_t)}else{var Ot={layers:{defaultLayer:{features:me.features}}},nn=new ei(Ot,h.x,h.y,h.z);$(nn)}}):(0,Ve.Yu)((0,De.Z)((0,De.Z)({},d),{},{url:C}),function(X,me){if(X||!me){var je={layers:{defaultLayer:{features:[]}}},_t=new ei(je,h.x,h.y,h.z);$(_t)}else{var Ot=JSON.parse(me),nn={layers:{defaultLayer:{features:Ot}}},Un=new ei(nn,h.x,h.y,h.z);$(Un)}})}));case 3:case"end":return F.stop()}},c)}));return function(f,h,d,g){return o.apply(this,arguments)}}();function ko(o,c){var f=function(g,S){return ao(o,S,c==null?void 0:c.requestParameters,c.getCustomData)},h=(0,De.Z)((0,De.Z)({},c),{},{getTileData:f});return{dataArray:[],tilesetOptions:h,isTile:!0}}var Ba=D(38929),mi=D(3614),Je=D.n(mi),wt=function(){function o(c,f,h,d){(0,Dt.Z)(this,o),(0,He.Z)(this,"vectorLayerCache",{}),this.x=f,this.y=h,this.z=d,this.vectorTile=new Ba.VectorTile(new(Je())(c))}return(0,dn.Z)(o,[{key:"getTileData",value:function(f){if(!f||!this.vectorTile.layers[f])return[];if(this.vectorLayerCache[f])return this.vectorLayerCache[f];var h=this.vectorTile.layers[f];if(Array.isArray(h.features))return this.vectorLayerCache[f]=h.features,h.features;for(var d=[],g=0;g<h.length;g++){var S=h.feature(g),C=S.toGeoJSON(this.x,this.y,this.z);d.push((0,De.Z)((0,De.Z)({},C),{},{properties:(0,De.Z)({id:C.id},C.properties)}))}return this.vectorLayerCache[f]=d,d}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),o}(),Kt={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Mn=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g,S){var C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return C=(0,Ve.z0)(f,h),F.abrupt("return",new Promise(function($){if(S)S({x:d.x,y:d.y,z:d.z},function(me,je){if(me||!je)$(void 0);else{var _t=new wt(je,d.x,d.y,d.z);$(_t)}});else{var X=(0,Ve.ks)((0,De.Z)((0,De.Z)({},g),{},{url:C}),function(me,je){if(me||!je)$(void 0);else{var _t=new wt(je,d.x,d.y,d.z);$(_t)}});d.xhrCancel=function(){return X.cancel()}}}));case 2:case"end":return F.stop()}},c)}));return function(f,h,d,g,S){return o.apply(this,arguments)}}();function Yn(o,c){var f=Array.isArray(o)?o[0]:o,h=function(S,C){return Mn(f,S,C,c==null?void 0:c.requestParameters,c==null?void 0:c.getCustomData)},d=(0,De.Z)((0,De.Z)((0,De.Z)({},Kt),c),{},{getTileData:h});return{data:f,dataArray:[],tilesetOptions:d,isTile:!0}}var Gn=D(71002),Ht=D(74902),On=D(97685);function Cr(o,c,f){switch(o){case"+":return c+f;case"-":return c-f;case"*":return c*f;case"/":return c/f;case"%":return c%f;case"^":return Math.pow(c,f);case"abs":return Math.abs(c);case"floor":return Math.floor(c);case"round":return Math.round(c);case"ceil":return Math.ceil(c);case"sin":return Math.sin(c);case"cos":return Math.cos(c);case"atan":return f===-1?Math.atan(c):Math.atan2(c,f);case"min":return Math.min(c,f);case"max":return Math.max(c,f);case"log10":return Math.log(c);case"log2":return Math.log2(c);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Er(o,c){for(var f=c[0],h=f.width,d=f.height,g=c.map(function(je){return je.rasterData}),S=h*d,C=[],k=JSON.stringify(o),F=0;F<S;F++){var $=JSON.parse(k),X=gi($,g,F);if(typeof X=="number")C.push(X);else{var me=ya($);C.push(me)}}return C}function gi(o,c,f){if(o.length===2&&o[0]==="band"&&typeof o[1]=="number")try{return c[o[1]][f]}catch(h){return console.warn("Raster Data err!"),0}o.map(function(h,d){if(Array.isArray(h)&&h.length>0)switch(h[0]){case"band":try{o[d]=c[h[1]][f]}catch(g){console.warn("Raster Data err!"),o[d]=0}break;default:gi(h,c,f)}})}function aa(o){var c=(0,On.Z)(o,3),f=c[0],h=c[1],d=h===void 0?-1:h,g=c[2],S=g===void 0?-1:g;if(f===void 0)return console.warn("Express err!"),["+",0,0];var C=f.replace(/\s+/g,"");return[C,d,S]}function ya(o){var c=aa(o),f=c[0],h=c[1],d=c[2];return Array.isArray(h)&&(h=ya(o[1])),Array.isArray(d)&&(d=ya(o[2])),Cr(f,h,d)}var wi={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:sa}};function sa(o,c){for(var f=o[0].rasterData,h=o[1].rasterData,d=o[2].rasterData,g=[],S=(c==null?void 0:c.countCut)||[2,98],C=(0,On.Z)(S,2),k=C[0],F=C[1],$=(c==null?void 0:c.RMinMax)||$i(f,k,F),X=(c==null?void 0:c.GMinMax)||$i(h,k,F),me=(c==null?void 0:c.BMinMax)||$i(d,k,F),je=0;je<f.length;je++)g.push(Math.max(0,f[je]-$[0])),g.push(Math.max(0,h[je]-X[0])),g.push(Math.max(0,d[je]-me[0]));return{rasterData:g,rMinMax:$,gMinMax:X,bMinMax:me}}function $i(o,c,f){var h=o.slice().sort(function(C,k){return C-k}),d=h.length,g=h[Math.ceil(d*c/100)],S=h[Math.ceil(d*f/100)];return[g,S]}function hi(o,c,f){return fa.apply(this,arguments)}function fa(){return fa=(0,Fe.Z)(B().mark(function o(c,f,h){var d,g,S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(c.length!==0){X.next=2;break}return X.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return X.next=4,Promise.all(c.map(function(me){var je=me.data,_t=me.bands,Ot=_t===void 0?[0]:_t;return f(je,Ot)}));case 4:d=X.sent,g=[],d.forEach(function(me){Array.isArray(me)?g.push.apply(g,(0,Ht.Z)(me)):g.push(me)}),S=g[0],C=S.width,k=S.height,X.t0=(0,Gn.Z)(h),X.next=X.t0==="function"?11:X.t0==="object"?13:15;break;case 11:return F=h(g),X.abrupt("break",16);case 13:return Array.isArray(h)?F={rasterData:Er(h,g)}:F=ea(h,g),X.abrupt("break",16);case 15:F={rasterData:g[0].rasterData};case 16:return X.abrupt("return",(0,De.Z)((0,De.Z)({},F),{},{width:C,height:k}));case 17:case"end":return X.stop()}},o)})),fa.apply(this,arguments)}function ea(o,c){var f=wi[o.type];if(f.type==="function")return f.method(c,o==null?void 0:o.options);if(f.type==="operation")return o.type==="rgb"?ka(f.expression,c):{rasterData:Er(f.expression,c)}}function ka(o,c){o.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),o.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),o.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var f=Er(o.r||["band",0],c),h=Er(o.g||["band",0],c),d=Er(o.b||["band",0],c);return[f,h,d]}function Bi(o,c,f,h){return _a.apply(this,arguments)}function _a(){return _a=(0,Fe.Z)(B().mark(function o(c,f,h,d){var g;return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,hi(c,f,h);case 2:g=C.sent,d(null,{data:g});case 4:case"end":return C.stop()}},o)})),_a.apply(this,arguments)}function to(o,c){var f=c.extent,h=c.width,d=c.height,g=c.min,S=c.max,C=c.format,k=c.operation,F,$,X;if(C===void 0||En(o))F=Array.from(o),$=h,X=d;else{var me=Array.isArray(o)?o:[o];F=hi(me,C,k)}var je={_id:1,dataArray:[{_id:1,data:F,width:$,height:X,min:g,max:S,coordinates:[[f[0],f[1]],[f[2],f[3]]]}]};return je}var Ae=D(88120),ns=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",new Promise(function(k,F){h({x:f.x,y:f.y,z:f.z},function($,X){if($||X.length===0){F($);return}X&&Bi([{data:X,bands:[0]}],d,g,function(me,je){me?F(me):je&&k(je)})})}));case 1:case"end":return C.stop()}},c)}));return function(f,h,d,g){return o.apply(this,arguments)}}(),Oo=function(){var o=(0,Fe.Z)(B().mark(function c(f,h){return B().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(S,C){h({x:f.x,y:f.y,z:f.z},function(k,F){if(k||!F){C(k);return}F instanceof ArrayBuffer?(0,Ve.Co)(F,function($,X){$&&C($),S(X)}):F instanceof HTMLImageElement?S(F):C(k)})}));case 1:case"end":return g.stop()}},c)}));return function(f,h){return o.apply(this,arguments)}}();function Ms(o,c){return Array.isArray(o)?typeof o[0]=="string"?o.map(function(f){return(0,Ve.z0)(f,c)}):o.map(function(f){return{url:(0,Ve.z0)(f.url,c),bands:f.bands||[0]}}):(0,Ve.z0)(o,c)}function ps(o){return typeof o=="string"?[{url:o,bands:[0]}]:typeof o[0]=="string"?o.map(function(c){return{url:c,bands:[0]}}):o}function jt(o,c){o.xhrCancel=function(){c.map(function(f){f.abort()})}}var sn=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g,S){var C,k,F,$,X,me;return B().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(C=ps(h.url),!(C.length>1)){_t.next=15;break}return _t.next=4,Jn(C,h);case 4:if(k=_t.sent,F=k.rasterFiles,$=k.xhrList,X=k.errList,jt(f,$),!(X.length>0)){_t.next=12;break}return d(X,null),_t.abrupt("return");case 12:Bi(F,g,S,d),_t.next=17;break;case 15:me=(0,Ve.ks)(h,function(Ot,nn){if(Ot)d(Ot);else if(nn){var Un=[{data:nn,bands:C[0].bands}];Bi(Un,g,S,d)}}),jt(f,[me]);case 17:case"end":return _t.stop()}},c)}));return function(f,h,d,g,S){return o.apply(this,arguments)}}();function Jn(o,c){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,Fe.Z)(B().mark(function o(c,f){var h,d,g,S,C,k,F,$,X,me,je;return B().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:h=[],d=[],g=[],S=0;case 4:if(!(S<c.length)){Ot.next=20;break}return C=c[S],k=(0,De.Z)((0,De.Z)({},f),{},{url:C.url}),F=C.bands,Ot.next=10,(0,Ve.LF)((0,De.Z)((0,De.Z)({},k),{},{type:"arrayBuffer"}));case 10:$=Ot.sent,X=$.err,me=$.data,je=$.xhr,X&&g.push(X),d.push(je),h.push({data:me,bands:F});case 17:S++,Ot.next=4;break;case 20:return Ot.abrupt("return",{rasterFiles:h,xhrList:d,errList:g});case 21:case"end":return Ot.stop()}},o)})),Xr.apply(this,arguments)}var Ii=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g,S){var C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return C={url:Ms(f,h)},F.abrupt("return",new Promise(function($,X){sn(d,C,function(me,je){me?X(me):je&&$(je)},g,S)}));case 2:case"end":return F.stop()}},c)}));return function(f,h,d,g,S){return o.apply(this,arguments)}}(),Ea=function(){var o=(0,Fe.Z)(B().mark(function c(f,h,d,g){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return C=Array.isArray(f)?f[0]:f,g.wmtsOptions?(k=(g==null?void 0:g.getURLFromTemplate)||Ve.jG,S=k(C,(0,De.Z)((0,De.Z)({},h),g.wmtsOptions))):(F=(g==null?void 0:g.getURLFromTemplate)||Ve.z0,S=F(C,h)),X.abrupt("return",new Promise(function(me,je){var _t,Ot=(0,Ve.gJ)({url:S,type:(g==null||(_t=g.requestParameters)===null||_t===void 0?void 0:_t.type)||"arrayBuffer"},function(nn,Un){nn?je(nn):Un&&me(Un)},g.transformResponse);d.xhrCancel=function(){return Ot.cancel()}}));case 3:case"end":return X.stop()}},c)}));return function(f,h,d,g){return o.apply(this,arguments)}}(),co=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},Zs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Vs=[Ae.n3.ARRAYBUFFER,Ae.n3.RGB];function Ds(o){return!!(Array.isArray(o)&&o.length===0||!Array.isArray(o)&&typeof o!="string")}function vu(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ds(o))throw new Error("tile server url is error");var f=(c==null?void 0:c.dataType)||Ae.n3.IMAGE;f===Ae.n3.RGB&&(f=Ae.n3.ARRAYBUFFER);var h=function(S,C){switch(f){case Ae.n3.IMAGE:return Ea(o,S,C,c);case Ae.n3.CUSTOMIMAGE:case Ae.n3.CUSTOMTERRAINRGB:return Oo(C,c==null?void 0:c.getCustomData);case Ae.n3.ARRAYBUFFER:return Ii(o,S,C,(c==null?void 0:c.format)||co,c==null?void 0:c.operation);case Ae.n3.CUSTOMARRAYBUFFER:case Ae.n3.CUSTOMRGB:return ns(C,c==null?void 0:c.getCustomData,(c==null?void 0:c.format)||co,c==null?void 0:c.operation);default:return Ea(o,S,C,c)}},d=(0,De.Z)((0,De.Z)((0,De.Z)({},Zs),c),{},{getTileData:h});return{data:o,dataArray:[],tilesetOptions:d,isTile:!0}}var Rl=D(45987),ap=["extent","min","max","width","height","format","operation"];function ph(o,c){var f=c.extent,h=c.min,d=c.max,g=c.width,S=c.height,C=c.format,k=c.operation,F=(0,Rl.Z)(c,ap),$;if(C===void 0||En(o))$=Array.from(o);else{var X=Array.isArray(o)?o:[o];$=hi(X,C,k)}var me={_id:1,dataArray:[(0,De.Z)((0,De.Z)({_id:1,data:$,width:g,height:S},F),{},{min:h,max:d,coordinates:[[f[0],f[1]],[f[2],f[3]]]})]};return me}var el={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},lf=function(){var o=(0,Fe.Z)(B().mark(function c(f){return B().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(g){var S=(0,On.Z)(f.bounds,4),C=S[0],k=S[1],F=S[2],$=S[3],X={layers:{testTile:{features:[{type:"Feature",properties:{key:f.x+"/"+f.y+"/"+f.z,x:(C+F)/2,y:(k+$)/2},geometry:{type:"LineString",coordinates:[[F,$],[F,k],[C,k],[C,k]]}}]}}};g(X)}));case 1:case"end":return d.stop()}},c)}));return function(f){return o.apply(this,arguments)}}();function Rf(o,c){var f=function(g){return lf(g)},h=(0,De.Z)((0,De.Z)((0,De.Z)({},el),c),{},{getTileData:f});return{data:o,dataArray:[],tilesetOptions:h,isTile:!0}}var mu=["extent","width","height"];function tc(o,c){var f=c.extent,h=c.width,d=c.height,g=(0,Rl.Z)(c,mu);o.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var S=g.bands||[0,1,2],C=(0,On.Z)(S,3),k=C[0],F=C[1],$=C[2],X=[o[k],o[F],o[$]],me=[],je=(g==null?void 0:g.countCut)||[2,98],_t=(0,On.Z)(je,2),Ot=_t[0],nn=_t[1],Un=(g==null?void 0:g.RMinMax)||$i(X[0],Ot,nn),zn=(g==null?void 0:g.GMinMax)||$i(X[1],Ot,nn),ur=(g==null?void 0:g.BMinMax)||$i(X[2],Ot,nn),Pr=0;Pr<X[0].length;Pr++)me.push(Math.max(0,X[0][Pr]-Un[0])),me.push(Math.max(0,X[1][Pr]-zn[0])),me.push(Math.max(0,X[2][Pr]-ur[0]));var si={_id:1,dataArray:[(0,De.Z)((0,De.Z)({_id:1,data:me,width:h,height:d,rMinMax:Un,gMinMax:zn,bMinMax:ur},g),{},{coordinates:[[f[0],f[1]],[f[2],f[3]]]})]};return si}var Pf=["extent","width","height"];function zh(o,c){var f=c.extent,h=c.width,d=c.height,g=(0,Rl.Z)(c,Pf);o.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var S=g.bands||[0,1],C=(0,On.Z)(S,2),k=C[0],F=C[1],$=[o[k],o[F]],X=[],me=0;me<$[0].length;me++)X.push(($[1][me]-$[0][me])/($[1][me]+$[0][me]));var je={_id:1,dataArray:[(0,De.Z)((0,De.Z)({_id:1,data:X,width:h,height:d},g),{},{coordinates:[[f[0],f[1]],[f[2],f[3]]]})]};return je}var Ti=D(97326),za=D(60136),fo=D(82963),Ji=D(61120),su=D(46343),If=D(26729),Uh=D.n(If),Od=D(69848),Gf=D.n(Od);function id(o,c){var f=c.radius,h=f===void 0?40:f,d=c.maxZoom,g=d===void 0?18:d,S=c.minZoom,C=S===void 0?0:S,k=c.zoom,F=k===void 0?2:k;if(o.pointIndex){var $=o.pointIndex.getClusters(o.extent,Math.floor(F));return o.dataArray=op($),o}var X=new(Gf())({radius:h,minZoom:C,maxZoom:g}),me={type:"FeatureCollection",features:[]};return me.features=o.dataArray.map(function(je){return{type:"Feature",geometry:{type:"Point",coordinates:je.coordinates},properties:(0,De.Z)({},je)}}),X.load(me.features),X}function op(o){return o.map(function(c,f){return(0,De.Z)({coordinates:c.geometry.coordinates,_id:f+1},c.properties)})}function Up(o){if(o.length===0)throw new Error("max requires at least one data point");for(var c=o[0],f=1;f<o.length;f++)o[f]>c&&(c=o[f]);return c}function sp(o){if(o.length===0)throw new Error("min requires at least one data point");for(var c=o[0],f=1;f<o.length;f++)o[f]<c&&(c=o[f]);return c}function Xf(o){if(o.length===0)return 0;for(var c=o[0],f=0,h,d=1;d<o.length;d++)h=c+o[d]*1,Math.abs(c)>=Math.abs(o[d])?f+=c-h+o[d]:f+=o[d]-h+c,c=h;return c+f*1}function Cc(o){if(o.length===0)throw new Error("mean requires at least one data point");return Xf(o)/o.length}var jp={min:sp,max:Up,mean:Cc,sum:Xf};function hl(o){var c=kf();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function kf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Yf=Ve.rU.cloneDeep,_l=Ve.rU.isFunction,pc=Ve.rU.isString,vc=Ve.rU.mergeWith;function Oc(o,c){if(Array.isArray(c))return c}var bl=function(o){(0,za.Z)(f,o);var c=hl(f);function f(h,d){var g;return(0,Dt.Z)(this,f),g=c.call(this),(0,He.Z)((0,Ti.Z)(g),"type","source"),(0,He.Z)((0,Ti.Z)(g),"isTile",!1),(0,He.Z)((0,Ti.Z)(g),"inited",!1),(0,He.Z)((0,Ti.Z)(g),"hooks",{init:new su.ni}),(0,He.Z)((0,Ti.Z)(g),"parser",{type:"geojson"}),(0,He.Z)((0,Ti.Z)(g),"transforms",[]),(0,He.Z)((0,Ti.Z)(g),"cluster",!1),(0,He.Z)((0,Ti.Z)(g),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,He.Z)((0,Ti.Z)(g),"invalidExtent",!1),(0,He.Z)((0,Ti.Z)(g),"dataArrayChanged",!1),(0,He.Z)((0,Ti.Z)(g),"cfg",{autoRender:!0}),g.originData=h,g.initCfg(d),g.init().then(function(){g.inited=!0,g.emit("update",{type:"inited"})}),g}return(0,dn.Z)(f,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(d){return this.clusterIndex.getClusters(this.caculClusterExtent(2),d)}},{key:"getClustersLeaves",value:function(d){return this.clusterIndex.getLeaves(d,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(d){var g=this,S=this.clusterOptions,C=S.method,k=C===void 0?"sum":C,F=S.field,$=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(d));this.clusterOptions.zoom=d,$.forEach(function(X){X.id||(X.properties.point_count=1)}),(F||_l(k))&&($=$.map(function(X){var me=X.id;if(me){var je=g.clusterIndex.getLeaves(me,1/0),_t=je.map(function(Un){return Un.properties}),Ot;if(pc(k)&&F){var nn=ir(_t,F);Ot=jp[k](nn)}_l(k)&&(Ot=k(_t)),X.properties.stat=Ot}else X.properties.point_count=1;return X})),this.data=T("geojson")({type:"FeatureCollection",features:$}),this.executeTrans()}},{key:"getFeatureById",value:function(d){var g=this.parser,S=g.type,C=S===void 0?"geojson":S,k=g.geometry;if(C==="geojson"&&!this.cluster){var F=d<this.originData.features.length?this.originData.features[d]:"null",$=Yf(F);if($!=null&&$.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var X=this.data.dataArray.find(function(me){return me._id===d});$.properties=X}return $}else return C==="json"&&k?this.data.dataArray.find(function(me){return me._id===d}):d<this.data.dataArray.length?this.data.dataArray[d]:"null"}},{key:"updateFeaturePropertiesById",value:function(d,g){this.data.dataArray=this.data.dataArray.map(function(S){return S._id===d?(0,De.Z)((0,De.Z)({},S),g):S}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(d,g){var S=this.data.dataArray.find(function(C){return C[d]===g});return S==null?void 0:S._id}},{key:"setData",value:function(d,g){var S=this;this.originData=d,this.dataArrayChanged=!1,this.initCfg(g),this.init().then(function(){S.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var d;(d=this.tileset)===null||d===void 0||d.reloadAll()}},{key:"reloadTilebyId",value:function(d,g,S){var C;(C=this.tileset)===null||C===void 0||C.reloadTileById(d,g,S)}},{key:"reloadTileByLnglat",value:function(d,g,S){var C;(C=this.tileset)===null||C===void 0||C.reloadTileByLnglat(d,g,S)}},{key:"getTileExtent",value:function(d,g){var S;return(S=this.tileset)===null||S===void 0?void 0:S.getTileExtent(d,g)}},{key:"getTileByZXY",value:function(d,g,S){var C;return(C=this.tileset)===null||C===void 0?void 0:C.getTileByZXY(d,g,S)}},{key:"reloadTileByExtent",value:function(d,g){var S;(S=this.tileset)===null||S===void 0||S.reloadTileByExtent(d,g)}},{key:"destroy",value:function(){var d;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(d=this.tileset)===null||d===void 0||d.destroy()}},{key:"processData",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S=this;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",new Promise(function(F,$){try{S.excuteParser(),S.initCluster(),S.executeTrans(),F({})}catch(X){$(X)}}));case 1:case"end":return k.stop()}},g)}));function d(){return h.apply(this,arguments)}return d}()},{key:"initCfg",value:function(d){this.cfg=vc(this.cfg,d,Oc);var g=this.cfg;g&&(g.parser&&(this.parser=g.parser),g.transforms&&(this.transforms=g.transforms),this.cluster=g.cluster||!1,g.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,De.Z)((0,De.Z)({},this.clusterOptions),g.clusterOptions)))}},{key:"init",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.inited=!1,C.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"excuteParser",value:function(){var d=this.parser,g=d.type||"geojson",S=T(g);this.data=S(this.originData,d),this.tileset=this.initTileset(),!d.cancelExtent&&(this.extent=(0,Ve.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(d){this.center=[(d[0]+d[2])/2,(d[1]+d[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var d=this.data.tilesetOptions;if(d){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(d),this.tileset;var g=new Ve.nx((0,De.Z)({},d));return g}}},{key:"executeTrans",value:function(){var d=this,g=this.transforms;g.forEach(function(S){var C=S.type,k=Q(C)(d.data,S);Object.assign(d.data,k)})}},{key:"initCluster",value:function(){if(this.cluster){var d=this.clusterOptions||{};this.clusterIndex=id(this.data,d)}}},{key:"caculClusterExtent",value:function(d){var g=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(g=(0,Ve.yA)((0,Ve.ds)(this.extent),d)),g[0].concat(g[1])}}]),f}(If.EventEmitter);function cf(o,c){var f=c.callback;return f&&(o.dataArray=o.dataArray.filter(f)),o}function ff(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=ad(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function ad(o,c){if(o){if(typeof o=="string")return od(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return od(o,c)}}function od(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}var _s=6378e3;function mv(o,c){var f=o.dataArray,h=c.size,d=h===void 0?10:h,g=d/(2*Math.PI*_s)*(256<<20)/2,S=sd(f,d),C=S.gridHash,k=S.gridOffset,F=lp(C,k,c);return{yOffset:g,xOffset:g,radius:g,type:"grid",dataArray:F}}function sd(o,c){var f=1/0,h=-1/0,d,g=ff(o),S;try{for(g.s();!(S=g.n()).done;){var C=S.value;d=C.coordinates[1],Number.isFinite(d)&&(f=d<f?d:f,h=d>h?d:h)}}catch(ur){g.e(ur)}finally{g.f()}var k=(f+h)/2,F=vh(c,k);if(F.xOffset<=0||F.yOffset<=0)return{gridHash:{},gridOffset:F};var $={},X=ff(o),me;try{for(X.s();!(me=X.n()).done;){var je=me.value,_t=je.coordinates[1],Ot=je.coordinates[0];if(Number.isFinite(_t)&&Number.isFinite(Ot)){var nn=Math.floor((_t+90)/F.yOffset),Un=Math.floor((Ot+180)/F.xOffset),zn="".concat(nn,"-").concat(Un);$[zn]=$[zn]||{count:0,points:[]},$[zn].count+=1,$[zn].points.push(je)}}}catch(ur){X.e(ur)}finally{X.f()}return{gridHash:$,gridOffset:F}}function vh(o,c){var f=Hs(o),h=up(c,o);return{yOffset:f,xOffset:h}}function Hs(o){return o/_s*(180/Math.PI)}function up(o,c){return c/_s*(180/Math.PI)/Math.cos(o*Math.PI/180)}function lp(o,c,f){return Object.keys(o).reduce(function(h,d,g){var S=d.split("-"),C=parseInt(S[0],10),k=parseInt(S[1],10),F={};if(f.field&&f.method){var $=Ve.a5.getColumn(o[d].points,f.field);F[f.method]=Ve.a5.statMap[f.method]($)}return Object.assign(F,{_id:g,coordinates:(0,Ve.Z)([-180+c.xOffset*(k+.5),-90+c.yOffset*(C+.5)]),rawData:o[d].points,count:o[d].count}),h.push(F),h},[])}var ku=Math.PI/3,qc=[0,ku,2*ku,3*ku,4*ku,5*ku];function mc(o){return o[0]}function nc(o){return o[1]}function jh(){var o=0,c=0,f=1,h=1,d=mc,g=nc,S,C,k;function F(X){var me={},je=[],_t,Ot=X.length;for(_t=0;_t<Ot;++_t)if(!(isNaN(Un=+d.call(null,nn=X[_t],_t,X))||isNaN(zn=+g.call(null,nn,_t,X)))){var nn,Un,zn,ur=Math.round(zn=zn/k),Pr=Math.round(Un=Un/C-(ur&1)/2),si=zn-ur;if(Math.abs(si)*3>1){var kr=Un-Pr,hr=Pr+(Un<Pr?-1:1)/2,Hr=ur+(zn<ur?-1:1),ha=Un-hr,Xa=zn-Hr;kr*kr+si*si>ha*ha+Xa*Xa&&(Pr=hr+(ur&1?1:-1)/2,ur=Hr)}var pa=Pr+"-"+ur,bo=me[pa];bo?bo.push(nn):(je.push(bo=me[pa]=[nn]),bo.x=(Pr+(ur&1)/2)*C,bo.y=ur*k)}return je}function $(X){var me=0,je=0;return qc.map(function(_t){var Ot=Math.sin(_t)*X,nn=-Math.cos(_t)*X,Un=Ot-me,zn=nn-je;return me=Ot,je=nn,[Un,zn]})}return F.hexagon=function(X){return"m"+$(X==null?S:+X).join("l")+"z"},F.centers=function(){for(var X=[],me=Math.round(c/k),je=Math.round(o/C),_t=me*k;_t<h+S;_t+=k,++me)for(var Ot=je*C+(me&1)*C/2;Ot<f+C/2;Ot+=C)X.push([Ot,_t]);return X},F.mesh=function(){var X=$(S).slice(0,4).join("l");return F.centers().map(function(me){return"M"+me+"m"+X}).join("")},F.x=function(X){return arguments.length?(d=X,F):d},F.y=function(X){return arguments.length?(g=X,F):g},F.radius=function(X){return arguments.length?(S=+X,C=S*2*Math.sin(ku),k=S*1.5,F):S},F.size=function(X){return arguments.length?(o=c=0,f=+X[0],h=+X[1],F):[f-o,h-c]},F.extent=function(X){return arguments.length?(o=+X[0][0],c=+X[0][1],f=+X[1][0],h=+X[1][1],F):[[o,c],[f,h]]},F.radius(1)}var qf=6378e3;function gc(o,c){var f=o.dataArray,h=c.size,d=h===void 0?10:h,g=c.method,S=g===void 0?"sum":g,C=d/(2*Math.PI*qf)*(256<<20)/2,k=f.map(function(me){var je=(0,Ve.Z)(me.coordinates),_t=(0,On.Z)(je,2),Ot=_t[0],nn=_t[1];return(0,De.Z)((0,De.Z)({},me),{},{coordinates:[Ot,nn]})}),F=jh().radius(C).x(function(me){return me.coordinates[0]}).y(function(me){return me.coordinates[1]}),$=F(k),X={dataArray:$.map(function(me,je){var _t;if(c.field&&S){var Ot=Ve.a5.getColumn(me,c.field);me[S]=Ve.a5.statMap[S](Ot)}return _t={},(0,He.Z)(_t,c.method,me[S]),(0,He.Z)(_t,"count",me.length),(0,He.Z)(_t,"rawData",me),(0,He.Z)(_t,"coordinates",[me.x,me.y]),(0,He.Z)(_t,"_id",je),_t}),radius:C,xOffset:C,yOffset:C,type:"hexagon"};return X}function Kf(o,c){var f=c.sourceField,h=c.targetField,d=c.data,g={};return d.forEach(function(S){g[S[f]]=S}),o.dataArray=o.dataArray.map(function(S){var C=S[h];return(0,De.Z)((0,De.Z)({},S),g[C])}),o}function Lf(o,c){var f=c.callback;return f&&(o.dataArray=o.dataArray.map(f)),o}ne("rasterTile",vu),ne("mvt",Yn),ne("geojsonvt",Ni),ne("testTile",Rf),ne("geojson",Xe),ne("jsonTile",ko),ne("image",Qa),ne("csv",ln),ne("json",lr),ne("raster",to),ne("rasterRgb",ph),ne("rgb",tc),ne("ndi",zh),ge("cluster",id),ge("filter",cf),ge("join",Kf),ge("map",Lf),ge("grid",mv),ge("hexagon",gc);var rc=bl;function Lu(o){var c=Ts();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Ts(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Ws=null;function Mc(o){var c=Zp();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Zp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var hf=Ve.rU.merge,Zh=null,mh=D(4157);function xl(o){var c=Kc();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Kc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Rc=function(o){(0,za.Z)(f,o);var c=xl(f);function f(h){var d;return(0,Dt.Z)(this,f),d=c.call(this),f.controlCount++,d.controlOption=(0,De.Z)((0,De.Z)({},d.getDefault(h)),h||{}),d}return(0,dn.Z)(f,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(d){var g=this.getDefault(d);Object.entries(d).forEach(function(S){var C=(0,On.Z)(S,2),k=C[0],F=C[1];F===void 0&&(d[k]=g[k])}),"position"in d&&this.setPosition(d.position),"className"in d&&this.setClassName(d.className),"style"in d&&this.setStyle(d.style),this.controlOption=(0,De.Z)((0,De.Z)({},this.controlOption),d)}},{key:"addTo",value:function(d){this.mapsService=d.mapService,this.renderService=d.rendererService,this.layerService=d.layerService,this.controlService=d.controlService,this.configService=d.globalConfigService,this.scene=d.sceneService,this.sceneContainer=d,this.isShow=!0,this.container=this.onAdd(),Ve.SO.addClass(this.container,"l7-control");var g=this.controlOption,S=g.className,C=g.style;return S&&this.setClassName(S),C&&this.setStyle(C),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;Ve.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return Ve.SO.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var d=this.container;Ve.SO.removeClass(d,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var d=this.container;Ve.SO.addClass(d,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(d){return{position:Ae.d.TOPRIGHT,name:"".concat(f.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(d){if(this.mapsService&&d&&d.screenX>0&&d.screenY>0){var g=this.mapsService.getContainer();g!==null&&g.focus()}}},{key:"setPosition",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ae.d.TOPLEFT,g=this.controlService;return g&&g.removeControl(this),this.controlOption.position=d,g&&g.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(d){var g=this.container,S=this.controlOption.className;S&&Ve.SO.removeClass(g,S),d&&Ve.SO.addClass(g,d)}},{key:"setStyle",value:function(d){var g=this.container;d?g.setAttribute("style",d):g.removeAttribute("style")}},{key:"insertContainer",value:function(){var d=this.controlOption.position,g=this.container;if(d instanceof Element)d.appendChild(g);else{var S=this.controlService.controlCorners[d];["bottomleft","bottomright","righttop","rightbottom"].includes(d)?S.insertBefore(g,S.firstChild):S.appendChild(g)}}},{key:"checkUpdateOption",value:function(d,g){return g.some(function(S){return S in d})}}]),f}(Uh());(0,He.Z)(Rc,"controlCount",0);function df(o){var c=Wu();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Wu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var gh=null;function pf(o){var c=Vh();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Vh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Qc=function(o){(0,za.Z)(f,o);var c=pf(f);function f(h,d){var g;return(0,Dt.Z)(this,f),g=c.call(this),(0,He.Z)((0,Ti.Z)(g),"isShow",!1),(0,He.Z)((0,Ti.Z)(g),"timeout",null),(0,He.Z)((0,Ti.Z)(g),"show",function(){return g.isShow||!g.contentDOM.innerHTML||(g.resetPopperPosition(),Ve.SO.removeClass(g.popperDOM,"l7-popper-hide"),g.isShow=!0,g.option.unique&&f.conflictPopperList.forEach(function(S){S!==(0,Ti.Z)(g)&&S.isShow&&S.hide()}),g.emit("show"),window.addEventListener("pointerdown",g.onPopperUnClick)),(0,Ti.Z)(g)}),(0,He.Z)((0,Ti.Z)(g),"hide",function(){return g.isShow&&(Ve.SO.addClass(g.popperDOM,"l7-popper-hide"),g.isShow=!1,g.emit("hide"),window.removeEventListener("pointerdown",g.onPopperUnClick)),(0,Ti.Z)(g)}),(0,He.Z)((0,Ti.Z)(g),"setHideTimeout",function(){g.timeout||(g.timeout=window.setTimeout(function(){g.isShow&&(g.hide(),g.timeout=null)},300))}),(0,He.Z)((0,Ti.Z)(g),"clearHideTimeout",function(){g.timeout&&(window.clearTimeout(g.timeout),g.timeout=null)}),(0,He.Z)((0,Ti.Z)(g),"onBtnClick",function(){g.isShow?g.hide():g.show()}),(0,He.Z)((0,Ti.Z)(g),"onPopperUnClick",function(S){Ve.SO.findParentElement(S.target,[".l7-button-control",".l7-popper-content"])||g.hide()}),(0,He.Z)((0,Ti.Z)(g),"onBtnMouseLeave",function(){g.setHideTimeout()}),(0,He.Z)((0,Ti.Z)(g),"onBtnMouseMove",function(){g.clearHideTimeout(),!g.isShow&&g.show()}),g.button=h,g.option=d,g.init(),d.unique&&f.conflictPopperList.push((0,Ti.Z)(g)),g}return(0,dn.Z)(f,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(d){typeof d=="string"?this.contentDOM.innerHTML=d:d instanceof HTMLElement&&(Ve.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(d)),this.content=d}},{key:"init",value:function(){var d=this.option.trigger;this.popperDOM=this.createPopper(),d==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ve.SO.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var d={},g=this.option,S=g.container,C=g.offset,k=C===void 0?[0,0]:C,F=g.placement,$=(0,On.Z)(k,2),X=$[0],me=$[1],je=this.button.getBoundingClientRect(),_t=S.getBoundingClientRect(),Ot=Ve.SO.getDiffRect(je,_t),nn=Ot.left,Un=Ot.right,zn=Ot.top,ur=Ot.bottom,Pr=!1,si=!1;/^(left|right)/.test(F)?(F.includes("left")?d.right="".concat(je.width+Un,"px"):F.includes("right")&&(d.left="".concat(je.width+nn,"px")),F.includes("start")?d.top="".concat(zn,"px"):F.includes("end")?d.bottom="".concat(ur,"px"):(d.top="".concat(zn+je.height/2,"px"),si=!0,d.transform="translate(".concat(X,"px, calc(").concat(me,"px - 50%))"))):/^(top|bottom)/.test(F)&&(F.includes("top")?d.bottom="".concat(je.height+ur,"px"):F.includes("bottom")&&(d.top="".concat(je.height+zn,"px")),F.includes("start")?d.left="".concat(nn,"px"):F.includes("end")?d.right="".concat(Un,"px"):(d.left="".concat(nn+je.width/2,"px"),Pr=!0,d.transform="translate(calc(".concat(X,"px - 50%), ").concat(me,"px)"))),d.transform="translate(calc(".concat(X,"px - ").concat(Pr?"50%":"0%","), calc(").concat(me,"px - ").concat(si?"50%":"0%",")");var kr=F.split("-");kr.length&&Ve.SO.addClass(this.popperDOM,kr.map(function(hr){return"l7-popper-".concat(hr)}).join(" ")),Ve.SO.addStyle(this.popperDOM,Ve.SO.css2Style(d))}},{key:"createPopper",value:function(){var d=this.option,g=d.container,S=d.className,C=S===void 0?"":S,k=d.content,F=Ve.SO.create("div","l7-popper l7-popper-hide ".concat(C)),$=Ve.SO.create("div","l7-popper-content"),X=Ve.SO.create("div","l7-popper-arrow");return F.appendChild($),F.appendChild(X),g.appendChild(F),this.popperDOM=F,this.contentDOM=$,k&&this.setContent(k),F}}]),f}(If.EventEmitter);(0,He.Z)(Qc,"conflictPopperList",[]);function Pl(o){var c=cp();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function cp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Md={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},yh=null;function Qf(o){var c=Jc();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Jc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Jf=function(o){return o.ActiveOptionClassName="l7-select-control-item-active",o.OptionValueAttrKey="data-option-value",o.OptionIndexAttrKey="data-option-index",o}(Jf||{}),eh=null,vf=function(c){var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.classList.add("l7-iconfont"),f.setAttribute("aria-hidden","true");var h=document.createElementNS("http://www.w3.org/2000/svg","use");return h.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(c)),f.appendChild(h),f};function fp(o){var c=ud();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function ud(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var hp=null;function Df(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=dp(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function dp(o,c){if(o){if(typeof o=="string")return Hh(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return Hh(o,c)}}function Hh(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}var ld=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],El=function(){if(typeof document=="undefined")return!1;for(var o=ld[0],c={},f=0,h=ld;f<h.length;f++){var d=h[f],g=d==null?void 0:d[1];if(g in document){var S=Df(d.entries()),C;try{for(S.s();!(C=S.n()).done;){var k=(0,On.Z)(C.value,2),F=k[0],$=k[1];c[o[F]]=$}}catch(X){S.e(X)}finally{S.f()}return c}}return!1}(),Pc={change:El.fullscreenchange,error:El.fullscreenerror},tl={request:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,f=arguments.length>1?arguments[1]:void 0;return new Promise(function(h,d){var g=function C(){tl.off("change",C),h()};tl.on("change",g);var S=c[El.requestFullscreen](f);S instanceof Promise&&S.then(g).catch(d)})},exit:function(){return new Promise(function(c,f){if(!tl.isFullscreen){c();return}var h=function g(){tl.off("change",g),c()};tl.on("change",h);var d=document[El.exitFullscreen]();d instanceof Promise&&d.then(h).catch(f)})},toggle:function(c,f){return tl.isFullscreen?tl.exit():tl.request(c,f)},onchange:function(c){tl.on("change",c)},onerror:function(c){tl.on("error",c)},on:function(c,f){var h=Pc[c];h&&document.addEventListener(h,f,!1)},off:function(c,f){var h=Pc[c];h&&document.removeEventListener(h,f,!1)},raw:El};Object.defineProperties(tl,{isFullscreen:{get:function(){return!!document[El.fullscreenElement]}},element:{enumerable:!0,get:function(){var c;return(c=document[El.fullscreenElement])!==null&&c!==void 0?c:void 0}},isEnabled:{enumerable:!0,get:function(){return!!document[El.fullscreenEnabled]}}}),El||(tl={isEnabled:!1});var Wh=null;function th(o){var c=Ns();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Ns(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Rd=null;function Wl(o){var c=Nf();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Nf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var is=null;function Bs(o){var c=ic();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}function cd(o){return Object.keys(o!=null?o:{}).every(function(c){return["layer","name","img"].includes(c)})}var mf=null,Ic=D(73237);function Vp(o){var c=Pd();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Pd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var fd=function(o){(0,za.Z)(f,o);var c=Vp(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getDefault",value:function(){return{position:Ae.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var d=Ve.SO.create("div","l7-control-logo");return this.setLogoContent(d),d}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(d){(0,Ic.Z)((0,Ji.Z)(f.prototype),"setOptions",this).call(this,d),this.checkUpdateOption(d,["img","href"])&&(Ve.SO.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(d){var g=this.controlOption,S=g.href,C=g.img,k=Ve.SO.create("img");if(k.setAttribute("src",C),k.setAttribute("aria-label","AntV logo"),Ve.SO.setUnDraggable(k),S){var F=Ve.SO.create("a","l7-control-logo-link");F.target="_blank",F.href=S,F.rel="noopener nofollow",F.setAttribute("rel","noopener nofollow"),F.appendChild(k),d.appendChild(F)}else d.appendChild(k)}}]),f}(Rc),_h={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},nl={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function ru(o){var c=bh();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function bh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var pp=null;function uu(o){var c=Ma();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Ma(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Il=null;function $h(o){var c=xh();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function xh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var qo=null,As=Ve.rU.cloneDeep,Eh=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f,h){var d=this,g=h.styleAttributeService,S=h.mapService,C=h.fontService;this.mapService=S,this.fontService=C,f.hooks.init.tapPromise("DataMappingPlugin",(0,Fe.Z)(B().mark(function k(){return B().wrap(function($){for(;;)switch($.prev=$.next){case 0:f.log(Ae.Or.MappingStart,Ae.KD.INIT),d.generateMaping(f,{styleAttributeService:g}),f.log(Ae.Or.MappingEnd,Ae.KD.INIT);case 3:case"end":return $.stop()}},k)}))),f.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var k=(0,Fe.Z)(B().mark(function F($){var X;return B().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if($){je.next=2;break}return je.abrupt("return",$);case 2:return f.dataState.dataMappingNeedUpdate=!1,f.log(Ae.Or.MappingStart,Ae.KD.UPDATE),X=d.generateMaping(f,{styleAttributeService:g}),f.log(Ae.Or.MappingEnd,Ae.KD.UPDATE),je.abrupt("return",X);case 7:case"end":return je.stop()}},F)}));return function(F){return k.apply(this,arguments)}}()),f.hooks.beforeRender.tap("DataMappingPlugin",function(){var k=f.getSource();if(!(f.layerModelNeedUpdate||!k||!k.inited)){var F=g.getLayerStyleAttributes()||[],$=g.getLayerStyleAttribute("filter"),X=k.data.dataArray;if(!(Array.isArray(X)&&X.length===0)){var me=F.filter(function(Ot){return Ot.needRemapping}),je=X;if($!=null&&$.needRemapping&&$!==null&&$!==void 0&&$.scale&&(je=X.filter(function(Ot){return d.applyAttributeMapping($,Ot)[0]})),me.length){var _t=d.mapping(f,me,je,f.getEncodedData());f.setEncodedData(_t)}}}})}},{key:"generateMaping",value:function(f,h){var d=this,g=h.styleAttributeService,S=g.getLayerStyleAttributes()||[],C=g.getLayerStyleAttribute("filter"),k=f.getSource().data.dataArray,F=k;C!=null&&C.scale&&(F=k.filter(function(X){return d.applyAttributeMapping(C,X)[0]})),F=f.processData(F);var $=this.mapping(f,S,F,void 0);return f.setEncodedData($),f.emit("dataUpdate",null),!0}},{key:"mapping",value:function(f,h,d,g){var S=this,C=h.filter(function(F){return F.scale!==void 0}).filter(function(F){return F.name!=="filter"}),k=d.map(function(F,$){var X=g?g[$]:{},me=(0,De.Z)({id:F._id,coordinates:F.coordinates},X);return C.forEach(function(je){var _t=S.applyAttributeMapping(je,F);(je.name==="color"||je.name==="stroke")&&(_t=_t.map(function(Ot){return(0,Ve.CI)(Ot)})),me[je.name]=Array.isArray(_t)&&_t.length===1?_t[0]:_t,je.name==="shape"&&(me.shape=S.fontService.getIconFontKey(me[je.name]))}),me});return h.forEach(function(F){F.needRemapping=!1}),this.adjustData2Amap2Coordinates(k,f),this.adjustData2SimpleCoordinates(k),k}},{key:"adjustData2Amap2Coordinates",value:function(f,h){var d=this;if(f.length>0&&this.mapService.version==="GAODE2.x"){var g=h.coordCenter||h.getSource().center;f.filter(function(S){return!S.originCoordinates}).map(function(S){S.version="GAODE2.x",S.originCoordinates=As(S.coordinates),S.coordinates=d.mapService.coordToAMap2RelativeCoordinates(S.coordinates,g)})}}},{key:"adjustData2SimpleCoordinates",value:function(f){var h=this;f.length>0&&this.mapService.version==="SIMPLE"&&f.map(function(d){d.simpleCoordinate||(d.coordinates=h.unProjectCoordinates(d.coordinates),d.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(f){var h=this;if(typeof f[0]=="number")return this.mapService.simpleMapCoord.unproject(f);if(f[0]&&f[0][0]instanceof Array){var d=[];return f.map(function(S){var C=[];S.map(function(k){C.push(h.mapService.simpleMapCoord.unproject(k))}),d.push(C)}),d}else{var g=[];return f.map(function(S){g.push(h.mapService.simpleMapCoord.unproject(S))}),g}}},{key:"applyAttributeMapping",value:function(f,h){var d;if(!f.scale)return[];var g=(f==null||(d=f.scale)===null||d===void 0?void 0:d.scalers)||[],S=[];g.forEach(function(k){var F,$=k.field;(h.hasOwnProperty($)||((F=f.scale)===null||F===void 0?void 0:F.type)==="variable")&&S.push(h[$])});var C=f.mapping?f.mapping(S):[];return C}},{key:"getArrowPoints",value:function(f,h){var d=[h[0]-f[0],h[1]-f[1]],g=(0,Ve.Fv)(d),S=[f[0]+g[0]*1e-4,f[1]+g[1]*1e-4];return S}}]),o}(),Z=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f){var h=this;this.mapService=f.getContainer().mapService,f.hooks.init.tapPromise("DataSourcePlugin",(0,Fe.Z)(B().mark(function d(){var g,S,C,k;return B().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(f.log(Ae.Or.SourceInitStart,Ae.KD.INIT),g=f.getSource(),g||(S=f.sourceOption||f.defaultSourceConfig,C=S.data,k=S.options,g=new rc(C,k),f.setSource(g)),!g.inited){$.next=8;break}h.updateClusterData(f),f.log(Ae.Or.SourceInitEnd,Ae.KD.INIT),$.next=10;break;case 8:return $.next=10,new Promise(function(X){g.on("update",function(me){me.type==="inited"&&(h.updateClusterData(f),f.log(Ae.Or.SourceInitEnd,Ae.KD.INIT)),X(null)})});case 10:case"end":return $.stop()}},d)}))),f.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Fe.Z)(B().mark(function d(){var g,S,C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return g=h.updateClusterData(f),S=f.dataState.dataSourceNeedUpdate,f.dataState.dataSourceNeedUpdate=!1,C=g||S,F.abrupt("return",C);case 5:case"end":return F.stop()}},d)})))}},{key:"updateClusterData",value:function(f){if(f.isTileLayer||f.tileLayer||!f.getSource())return!1;var h=f.getSource(),d=h.cluster,g=h.clusterOptions.zoom,S=g===void 0?0:g,C=this.mapService.getZoom()-1,k=f.dataState.dataSourceNeedUpdate;return d&&k&&h.updateClusterData(Math.floor(C)),d&&Math.abs(f.clusterZoom-C)>=1?(S!==Math.floor(C)&&h.updateClusterData(Math.floor(C)),f.clusterZoom=C,!0):!1}}]),o}();function Vt(o,c){return o<c?-1:o>c?1:o>=c?0:NaN}function Ne(o){return o.length===1&&(o=$e(o)),{left:function(c,f,h,d){for(h==null&&(h=0),d==null&&(d=c.length);h<d;){var g=h+d>>>1;o(c[g],f)<0?h=g+1:d=g}return h},right:function(c,f,h,d){for(h==null&&(h=0),d==null&&(d=c.length);h<d;){var g=h+d>>>1;o(c[g],f)>0?d=g:h=g+1}return h}}}function $e(o){return function(c,f){return Vt(o(c),f)}}var Oe=Ne(Vt),lt=Oe.right,un=Oe.left,Zn=null;function mn(o,c){var f=o.length,h=-1,d,g,S;if(c==null){for(;++h<f;)if((d=o[h])!=null&&d>=d)for(g=S=d;++h<f;)(d=o[h])!=null&&(g>d&&(g=d),S<d&&(S=d))}else for(;++h<f;)if((d=c(o[h],h,o))!=null&&d>=d)for(g=S=d;++h<f;)(d=c(o[h],h,o))!=null&&(g>d&&(g=d),S<d&&(S=d));return[g,S]}var jn=Array.prototype,zr=jn.slice,li=jn.map,Gi=Math.sqrt(50),na=Math.sqrt(10),ga=Math.sqrt(2);function La(o,c,f){var h,d=-1,g,S,C;if(c=+c,o=+o,f=+f,o===c&&f>0)return[o];if((h=c<o)&&(g=o,o=c,c=g),(C=ui(o,c,f))===0||!isFinite(C))return[];if(C>0)for(o=Math.ceil(o/C),c=Math.floor(c/C),S=new Array(g=Math.ceil(c-o+1));++d<g;)S[d]=(o+d)*C;else for(o=Math.floor(o*C),c=Math.ceil(c*C),S=new Array(g=Math.ceil(o-c+1));++d<g;)S[d]=(o-d)/C;return h&&S.reverse(),S}function ui(o,c,f){var h=(c-o)/Math.max(0,f),d=Math.floor(Math.log(h)/Math.LN10),g=h/Math.pow(10,d);return d>=0?(g>=Gi?10:g>=na?5:g>=ga?2:1)*Math.pow(10,d):-Math.pow(10,-d)/(g>=Gi?10:g>=na?5:g>=ga?2:1)}function Ka(o,c,f){var h=Math.abs(c-o)/Math.max(0,f),d=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),g=h/d;return g>=Gi?d*=10:g>=na?d*=5:g>=ga&&(d*=2),c<o?-d:d}function uo(){var o=identity,c=extent,f=sturges;function h(d){var g,S=d.length,C,k=new Array(S);for(g=0;g<S;++g)k[g]=o(d[g],g,d);var F=c(k),$=F[0],X=F[1],me=f(k,$,X);Array.isArray(me)||(me=tickStep($,X,me),me=range(Math.ceil($/me)*me,X,me));for(var je=me.length;me[0]<=$;)me.shift(),--je;for(;me[je-1]>X;)me.pop(),--je;var _t=new Array(je+1),Ot;for(g=0;g<=je;++g)Ot=_t[g]=[],Ot.x0=g>0?me[g-1]:$,Ot.x1=g<je?me[g]:X;for(g=0;g<S;++g)C=k[g],$<=C&&C<=X&&_t[bisect(me,C,0,je)].push(d[g]);return _t}return h.value=function(d){return arguments.length?(o=typeof d=="function"?d:constant(d),h):o},h.domain=function(d){return arguments.length?(c=typeof d=="function"?d:constant([d[0],d[1]]),h):c},h.thresholds=function(d){return arguments.length?(f=typeof d=="function"?d:Array.isArray(d)?constant(slice.call(d)):constant(d),h):f},h}function no(o,c,f){return o=map.call(o,number).sort(ascending),Math.ceil((f-c)/(2*(quantile(o,.75)-quantile(o,.25))*Math.pow(o.length,-1/3)))}var as=D(37620);function Es(o,c,f,h,d){var g=o*o,S=g*o;return((1-3*o+3*g-S)*c+(4-6*g+3*S)*f+(1+3*o+3*g-3*S)*h+S*d)/6}function vs(o){var c=o.length-1;return function(f){var h=f<=0?f=0:f>=1?(f=1,c-1):Math.floor(f*c),d=o[h],g=o[h+1],S=h>0?o[h-1]:2*d-g,C=h<c-1?o[h+2]:2*g-d;return Es((f-h/c)*c,S,d,g,C)}}function Ko(o){var c=o.length;return function(f){var h=Math.floor(((f%=1)<0?++f:f)*c),d=o[(h+c-1)%c],g=o[h%c],S=o[(h+1)%c],C=o[(h+2)%c];return Es((f-h/c)*c,d,g,S,C)}}function _o(o){return function(){return o}}function oa(o,c){return function(f){return o+f*c}}function ra(o,c,f){return o=Math.pow(o,f),c=Math.pow(c,f)-o,f=1/f,function(h){return Math.pow(o+h*c,f)}}function Qo(o,c){var f=c-o;return f?oa(o,f>180||f<-180?f-360*Math.round(f/360):f):constant(isNaN(o)?c:o)}function Jo(o){return(o=+o)==1?No:function(c,f){return f-c?ra(c,f,o):_o(isNaN(c)?f:c)}}function No(o,c){var f=c-o;return f?oa(o,f):_o(isNaN(o)?c:o)}var os=function o(c){var f=Jo(c);function h(d,g){var S=f((d=(0,as.B8)(d)).r,(g=(0,as.B8)(g)).r),C=f(d.g,g.g),k=f(d.b,g.b),F=No(d.opacity,g.opacity);return function($){return d.r=S($),d.g=C($),d.b=k($),d.opacity=F($),d+""}}return h.gamma=o,h}(1);function Fo(o){return function(c){var f=c.length,h=new Array(f),d=new Array(f),g=new Array(f),S,C;for(S=0;S<f;++S)C=(0,as.B8)(c[S]),h[S]=C.r||0,d[S]=C.g||0,g[S]=C.b||0;return h=o(h),d=o(d),g=o(g),C.opacity=1,function(k){return C.r=h(k),C.g=d(k),C.b=g(k),C+""}}}var $u=Fo(vs),gf=Fo(Ko);function jo(o,c){return o<c?-1:o>c?1:o>=c?0:NaN}function qs(o){return o.length===1&&(o=Id(o)),{left:function(c,f,h,d){for(h==null&&(h=0),d==null&&(d=c.length);h<d;){var g=h+d>>>1;o(c[g],f)<0?h=g+1:d=g}return h},right:function(c,f,h,d){for(h==null&&(h=0),d==null&&(d=c.length);h<d;){var g=h+d>>>1;o(c[g],f)>0?d=g:h=g+1}return h}}}function Id(o){return function(c,f){return jo(o(c),f)}}var yc=qs(jo),kd=yc.right,Sh=yc.left,dl=kd,Gh=Array.prototype,kc=Gh.slice,gv=Gh.map,_c=Math.sqrt(50),Bf=Math.sqrt(10),wh=Math.sqrt(2);function yf(o,c,f){var h,d=-1,g,S,C;if(c=+c,o=+o,f=+f,o===c&&f>0)return[o];if((h=c<o)&&(g=o,o=c,c=g),(C=_f(o,c,f))===0||!isFinite(C))return[];if(C>0)for(o=Math.ceil(o/C),c=Math.floor(c/C),S=new Array(g=Math.ceil(c-o+1));++d<g;)S[d]=(o+d)*C;else for(o=Math.floor(o*C),c=Math.ceil(c*C),S=new Array(g=Math.ceil(o-c+1));++d<g;)S[d]=(o-d)/C;return h&&S.reverse(),S}function _f(o,c,f){var h=(c-o)/Math.max(0,f),d=Math.floor(Math.log(h)/Math.LN10),g=h/Math.pow(10,d);return d>=0?(g>=_c?10:g>=Bf?5:g>=wh?2:1)*Math.pow(10,d):-Math.pow(10,-d)/(g>=_c?10:g>=Bf?5:g>=wh?2:1)}function Xh(o,c,f){var h=Math.abs(c-o)/Math.max(0,f),d=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),g=h/d;return g>=_c?d*=10:g>=Bf?d*=5:g>=wh&&(d*=2),c<o?-d:d}function po(){var o=identity,c=extent,f=sturges;function h(d){var g,S=d.length,C,k=new Array(S);for(g=0;g<S;++g)k[g]=o(d[g],g,d);var F=c(k),$=F[0],X=F[1],me=f(k,$,X);Array.isArray(me)||(me=tickStep($,X,me),me=range(Math.ceil($/me)*me,X,me));for(var je=me.length;me[0]<=$;)me.shift(),--je;for(;me[je-1]>X;)me.pop(),--je;var _t=new Array(je+1),Ot;for(g=0;g<=je;++g)Ot=_t[g]=[],Ot.x0=g>0?me[g-1]:$,Ot.x1=g<je?me[g]:X;for(g=0;g<S;++g)C=k[g],$<=C&&C<=X&&_t[bisect(me,C,0,je)].push(d[g]);return _t}return h.value=function(d){return arguments.length?(o=typeof d=="function"?d:constant(d),h):o},h.domain=function(d){return arguments.length?(c=typeof d=="function"?d:constant([d[0],d[1]]),h):c},h.thresholds=function(d){return arguments.length?(f=typeof d=="function"?d:Array.isArray(d)?constant(slice.call(d)):constant(d),h):f},h}function Lc(o,c,f){return o=map.call(o,number).sort(ascending),Math.ceil((f-c)/(2*(quantile(o,.75)-quantile(o,.25))*Math.pow(o.length,-1/3)))}function Hp(o){return o===null?NaN:+o}function iu(o,c,f){if(f==null&&(f=Hp),!!(h=o.length)){if((c=+c)<=0||h<2)return+f(o[0],0,o);if(c>=1)return+f(o[h-1],h-1,o);var h,d=(h-1)*c,g=Math.floor(d),S=+f(o[g],g,o),C=+f(o[g+1],g+1,o);return S+(C-S)*(d-g)}}var $s="$";function bf(){}bf.prototype=bc.prototype={constructor:bf,has:function(o){return $s+o in this},get:function(o){return this[$s+o]},set:function(o,c){return this[$s+o]=c,this},remove:function(o){var c=$s+o;return c in this&&delete this[c]},clear:function(){for(var o in this)o[0]===$s&&delete this[o]},keys:function(){var o=[];for(var c in this)c[0]===$s&&o.push(c.slice(1));return o},values:function(){var o=[];for(var c in this)c[0]===$s&&o.push(this[c]);return o},entries:function(){var o=[];for(var c in this)c[0]===$s&&o.push({key:c.slice(1),value:this[c]});return o},size:function(){var o=0;for(var c in this)c[0]===$s&&++o;return o},empty:function(){for(var o in this)if(o[0]===$s)return!1;return!0},each:function(o){for(var c in this)c[0]===$s&&o(this[c],c.slice(1),this)}};function bc(o,c){var f=new bf;if(o instanceof bf)o.each(function(C,k){f.set(k,C)});else if(Array.isArray(o)){var h=-1,d=o.length,g;if(c==null)for(;++h<d;)f.set(h,o[h]);else for(;++h<d;)f.set(c(g=o[h],h,o),g)}else if(o)for(var S in o)f.set(S,o[S]);return f}var kl=bc;function Th(){var o=[],c=[],f,h,d;function g(C,k,F,$){if(k>=o.length)return f!=null&&C.sort(f),h!=null?h(C):C;for(var X=-1,me=C.length,je=o[k++],_t,Ot,nn=map(),Un,zn=F();++X<me;)(Un=nn.get(_t=je(Ot=C[X])+""))?Un.push(Ot):nn.set(_t,[Ot]);return nn.each(function(ur,Pr){$(zn,Pr,g(ur,k,F,$))}),zn}function S(C,k){if(++k>o.length)return C;var F,$=c[k-1];return h!=null&&k>=o.length?F=C.entries():(F=[],C.each(function(X,me){F.push({key:me,values:S(X,k)})})),$!=null?F.sort(function(X,me){return $(X.key,me.key)}):F}return d={object:function(C){return g(C,0,x,A)},map:function(C){return g(C,0,w,R)},entries:function(C){return S(g(C,0,w,R),0)},key:function(C){return o.push(C),d},sortKeys:function(C){return c[o.length-1]=C,d},sortValues:function(C){return f=C,d},rollup:function(C){return h=C,d}}}function x(){return{}}function A(o,c,f){o[c]=f}function w(){return map()}function R(o,c,f){o.set(c,f)}function j(){}var Y=kl.prototype;j.prototype=te.prototype={constructor:j,has:Y.has,add:function(o){return o+="",this[$s+o]=o,this},remove:Y.remove,clear:Y.clear,values:Y.keys,size:Y.size,empty:Y.empty,each:Y.each};function te(o,c){var f=new j;if(o instanceof j)o.each(function(g){f.add(g)});else if(o){var h=-1,d=o.length;if(c==null)for(;++h<d;)f.add(o[h]);else for(;++h<d;)f.add(c(o[h],h,o))}return f}var we=null,tt=Array.prototype,At=tt.map,$t=tt.slice;function qt(o,c){switch(arguments.length){case 0:break;case 1:this.range(o);break;default:this.range(c).domain(o);break}return this}function rn(o,c){switch(arguments.length){case 0:break;case 1:this.interpolator(o);break;default:this.interpolator(c).domain(o);break}return this}var kn={name:"implicit"};function Rn(){var o=kl(),c=[],f=[],h=kn;function d(g){var S=g+"",C=o.get(S);if(!C){if(h!==kn)return h;o.set(S,C=c.push(g))}return f[(C-1)%f.length]}return d.domain=function(g){if(!arguments.length)return c.slice();c=[],o=kl();for(var S=-1,C=g.length,k,F;++S<C;)o.has(F=(k=g[S])+"")||o.set(F,c.push(k));return d},d.range=function(g){return arguments.length?(f=$t.call(g),d):f.slice()},d.unknown=function(g){return arguments.length?(h=g,d):h},d.copy=function(){return Rn(c,f).unknown(h)},qt.apply(d,arguments),d}function qn(){var o=ordinal().unknown(void 0),c=o.domain,f=o.range,h=[0,1],d,g,S=!1,C=0,k=0,F=.5;delete o.unknown;function $(){var X=c().length,me=h[1]<h[0],je=h[me-0],_t=h[1-me];d=(_t-je)/Math.max(1,X-C+k*2),S&&(d=Math.floor(d)),je+=(_t-je-d*(X-C))*F,g=d*(1-C),S&&(je=Math.round(je),g=Math.round(g));var Ot=sequence(X).map(function(nn){return je+d*nn});return f(me?Ot.reverse():Ot)}return o.domain=function(X){return arguments.length?(c(X),$()):c()},o.range=function(X){return arguments.length?(h=[+X[0],+X[1]],$()):h.slice()},o.rangeRound=function(X){return h=[+X[0],+X[1]],S=!0,$()},o.bandwidth=function(){return g},o.step=function(){return d},o.round=function(X){return arguments.length?(S=!!X,$()):S},o.padding=function(X){return arguments.length?(C=Math.min(1,k=+X),$()):C},o.paddingInner=function(X){return arguments.length?(C=Math.min(1,X),$()):C},o.paddingOuter=function(X){return arguments.length?(k=+X,$()):k},o.align=function(X){return arguments.length?(F=Math.max(0,Math.min(1,X)),$()):F},o.copy=function(){return qn(c(),h).round(S).paddingInner(C).paddingOuter(k).align(F)},initRange.apply($(),arguments)}function wn(o){var c=o.copy;return o.padding=o.paddingOuter,delete o.paddingInner,delete o.paddingOuter,o.copy=function(){return wn(c())},o}function Kn(){return wn(qn.apply(null,arguments).paddingInner(1))}function mr(o,c){return(isNumberArray(c)?numberArray:Or)(o,c)}function Or(o,c){var f=c?c.length:0,h=o?Math.min(f,o.length):0,d=new Array(h),g=new Array(f),S;for(S=0;S<h;++S)d[S]=en(o[S],c[S]);for(;S<f;++S)g[S]=c[S];return function(C){for(S=0;S<h;++S)g[S]=d[S](C);return g}}function Wr(o,c){var f=new Date;return o=+o,c=+c,function(h){return f.setTime(o*(1-h)+c*h),f}}function Ur(o,c){return o=+o,c=+c,function(f){return o*(1-f)+c*f}}function qr(o,c){var f={},h={},d;(o===null||typeof o!="object")&&(o={}),(c===null||typeof c!="object")&&(c={});for(d in c)d in o?f[d]=en(o[d],c[d]):h[d]=c[d];return function(g){for(d in f)h[d]=f[d](g);return h}}var _i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,q=new RegExp(_i.source,"g");function ue(o){return function(){return o}}function fe(o){return function(c){return o(c)+""}}function Me(o,c){var f=_i.lastIndex=q.lastIndex=0,h,d,g,S=-1,C=[],k=[];for(o=o+"",c=c+"";(h=_i.exec(o))&&(d=q.exec(c));)(g=d.index)>f&&(g=c.slice(f,g),C[S]?C[S]+=g:C[++S]=g),(h=h[0])===(d=d[0])?C[S]?C[S]+=d:C[++S]=d:(C[++S]=null,k.push({i:S,x:Ur(h,d)})),f=q.lastIndex;return f<c.length&&(g=c.slice(f),C[S]?C[S]+=g:C[++S]=g),C.length<2?k[0]?fe(k[0].x):ue(c):(c=k.length,function(F){for(var $=0,X;$<c;++$)C[(X=k[$]).i]=X.x(F);return C.join("")})}function ze(o,c){c||(c=[]);var f=o?Math.min(c.length,o.length):0,h=c.slice(),d;return function(g){for(d=0;d<f;++d)h[d]=o[d]*(1-g)+c[d]*g;return h}}function Be(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)}function en(o,c){var f=typeof c,h;return c==null||f==="boolean"?_o(c):(f==="number"?Ur:f==="string"?(h=(0,as.ZP)(c))?(c=h,os):Me:c instanceof as.ZP?os:c instanceof Date?Wr:Be(c)?ze:Array.isArray(c)?Or:typeof c.valueOf!="function"&&typeof c.toString!="function"||isNaN(c)?qr:Ur)(o,c)}function Qt(o,c){return o=+o,c=+c,function(f){return Math.round(o*(1-f)+c*f)}}function Xn(o){return function(){return o}}function pn(o){return+o}var sr=[0,1];function br(o){return o}function Ai(o,c){return(c-=o=+o)?function(f){return(f-o)/c}:Xn(isNaN(c)?NaN:.5)}function xi(o){var c=o[0],f=o[o.length-1],h;return c>f&&(h=c,c=f,f=h),function(d){return Math.max(c,Math.min(f,d))}}function ci(o,c,f){var h=o[0],d=o[1],g=c[0],S=c[1];return d<h?(h=Ai(d,h),g=f(S,g)):(h=Ai(h,d),g=f(g,S)),function(C){return g(h(C))}}function da(o,c,f){var h=Math.min(o.length,c.length)-1,d=new Array(h),g=new Array(h),S=-1;for(o[h]<o[0]&&(o=o.slice().reverse(),c=c.slice().reverse());++S<h;)d[S]=Ai(o[S],o[S+1]),g[S]=f(c[S],c[S+1]);return function(C){var k=dl(o,C,1,h)-1;return g[k](d[k](C))}}function ua(o,c){return c.domain(o.domain()).range(o.range()).interpolate(o.interpolate()).clamp(o.clamp()).unknown(o.unknown())}function la(){var o=sr,c=sr,f=en,h,d,g,S=br,C,k,F;function $(){return C=Math.min(o.length,c.length)>2?da:ci,k=F=null,X}function X(me){return isNaN(me=+me)?g:(k||(k=C(o.map(h),c,f)))(h(S(me)))}return X.invert=function(me){return S(d((F||(F=C(c,o.map(h),Ur)))(me)))},X.domain=function(me){return arguments.length?(o=At.call(me,pn),S===br||(S=xi(o)),$()):o.slice()},X.range=function(me){return arguments.length?(c=$t.call(me),$()):c.slice()},X.rangeRound=function(me){return c=$t.call(me),f=Qt,$()},X.clamp=function(me){return arguments.length?(S=me?xi(o):br,X):S!==br},X.interpolate=function(me){return arguments.length?(f=me,$()):f},X.unknown=function(me){return arguments.length?(g=me,X):g},function(me,je){return h=me,d=je,$()}}function Ua(o,c){return la()(o,c)}var $a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oo(o){if(!(c=$a.exec(o)))throw new Error("invalid format: "+o);var c;return new ms({fill:c[1],align:c[2],sign:c[3],symbol:c[4],zero:c[5],width:c[6],comma:c[7],precision:c[8]&&c[8].slice(1),trim:c[9],type:c[10]})}oo.prototype=ms.prototype;function ms(o){this.fill=o.fill===void 0?" ":o.fill+"",this.align=o.align===void 0?">":o.align+"",this.sign=o.sign===void 0?"-":o.sign+"",this.symbol=o.symbol===void 0?"":o.symbol+"",this.zero=!!o.zero,this.width=o.width===void 0?void 0:+o.width,this.comma=!!o.comma,this.precision=o.precision===void 0?void 0:+o.precision,this.trim=!!o.trim,this.type=o.type===void 0?"":o.type+""}ms.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bs(o){return Math.abs(o=Math.round(o))>=1e21?o.toLocaleString("en").replace(/,/g,""):o.toString(10)}function Fs(o,c){if((f=(o=c?o.toExponential(c-1):o.toExponential()).indexOf("e"))<0)return null;var f,h=o.slice(0,f);return[h.length>1?h[0]+h.slice(2):h,+o.slice(f+1)]}function rs(o){return o=Fs(Math.abs(o)),o?o[1]:NaN}function So(o,c){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rs(c)/3)))*3-rs(Math.abs(o)))}function es(o,c){return function(f,h){for(var d=f.length,g=[],S=0,C=o[0],k=0;d>0&&C>0&&(k+C+1>h&&(C=Math.max(1,h-k)),g.push(f.substring(d-=C,d+C)),!((k+=C+1)>h));)C=o[S=(S+1)%o.length];return g.reverse().join(c)}}function Tu(o){return function(c){return c.replace(/[0-9]/g,function(f){return o[+f]})}}function rl(o){e:for(var c=o.length,f=1,h=-1,d;f<c;++f)switch(o[f]){case".":h=d=f;break;case"0":h===0&&(h=f),d=f;break;default:if(!+o[f])break e;h>0&&(h=0);break}return h>0?o.slice(0,h)+o.slice(d+1):o}var bu;function Du(o,c){var f=Fs(o,c);if(!f)return o+"";var h=f[0],d=f[1],g=d-(bu=Math.max(-8,Math.min(8,Math.floor(d/3)))*3)+1,S=h.length;return g===S?h:g>S?h+new Array(g-S+1).join("0"):g>0?h.slice(0,g)+"."+h.slice(g):"0."+new Array(1-g).join("0")+Fs(o,Math.max(0,c+g-1))[0]}function Ll(o,c){var f=Fs(o,c);if(!f)return o+"";var h=f[0],d=f[1];return d<0?"0."+new Array(-d).join("0")+h:h.length>d+1?h.slice(0,d+1)+"."+h.slice(d+1):h+new Array(d-h.length+2).join("0")}var xc={"%":function(o,c){return(o*100).toFixed(c)},b:function(o){return Math.round(o).toString(2)},c:function(o){return o+""},d:bs,e:function(o,c){return o.toExponential(c)},f:function(o,c){return o.toFixed(c)},g:function(o,c){return o.toPrecision(c)},o:function(o){return Math.round(o).toString(8)},p:function(o,c){return Ll(o*100,c)},r:Ll,s:Du,X:function(o){return Math.round(o).toString(16).toUpperCase()},x:function(o){return Math.round(o).toString(16)}};function ef(o){return o}var pl=Array.prototype.map,Au=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ac(o){var c=o.grouping===void 0||o.thousands===void 0?ef:es(pl.call(o.grouping,Number),o.thousands+""),f=o.currency===void 0?"":o.currency[0]+"",h=o.currency===void 0?"":o.currency[1]+"",d=o.decimal===void 0?".":o.decimal+"",g=o.numerals===void 0?ef:Tu(pl.call(o.numerals,String)),S=o.percent===void 0?"%":o.percent+"",C=o.minus===void 0?"-":o.minus+"",k=o.nan===void 0?"NaN":o.nan+"";function F(X){X=oo(X);var me=X.fill,je=X.align,_t=X.sign,Ot=X.symbol,nn=X.zero,Un=X.width,zn=X.comma,ur=X.precision,Pr=X.trim,si=X.type;si==="n"?(zn=!0,si="g"):xc[si]||(ur===void 0&&(ur=12),Pr=!0,si="g"),(nn||me==="0"&&je==="=")&&(nn=!0,me="0",je="=");var kr=Ot==="$"?f:Ot==="#"&&/[boxX]/.test(si)?"0"+si.toLowerCase():"",hr=Ot==="$"?h:/[%p]/.test(si)?S:"",Hr=xc[si],ha=/[defgprs%]/.test(si);ur=ur===void 0?6:/[gprs]/.test(si)?Math.max(1,Math.min(21,ur)):Math.max(0,Math.min(20,ur));function Xa(pa){var bo=kr,Do=hr,so,af,Uu;if(si==="c")Do=Hr(pa)+Do,pa="";else{pa=+pa;var td=pa<0||1/pa<0;if(pa=isNaN(pa)?k:Hr(Math.abs(pa),ur),Pr&&(pa=rl(pa)),td&&+pa==0&&_t!=="+"&&(td=!1),bo=(td?_t==="("?_t:C:_t==="-"||_t==="("?"":_t)+bo,Do=(si==="s"?Au[8+bu/3]:"")+Do+(td&&_t==="("?")":""),ha){for(so=-1,af=pa.length;++so<af;)if(Uu=pa.charCodeAt(so),48>Uu||Uu>57){Do=(Uu===46?d+pa.slice(so+1):pa.slice(so))+Do,pa=pa.slice(0,so);break}}}zn&&!nn&&(pa=c(pa,1/0));var Jd=bo.length+pa.length+Do.length,fh=Jd<Un?new Array(Un-Jd+1).join(me):"";switch(zn&&nn&&(pa=c(fh+pa,fh.length?Un-Do.length:1/0),fh=""),je){case"<":pa=bo+pa+Do+fh;break;case"=":pa=bo+fh+pa+Do;break;case"^":pa=fh.slice(0,Jd=fh.length>>1)+bo+pa+Do+fh.slice(Jd);break;default:pa=fh+bo+pa+Do;break}return g(pa)}return Xa.toString=function(){return X+""},Xa}function $(X,me){var je=F((X=oo(X),X.type="f",X)),_t=Math.max(-8,Math.min(8,Math.floor(rs(me)/3)))*3,Ot=Math.pow(10,-_t),nn=Au[8+_t/3];return function(Un){return je(Ot*Un)+nn}}return{format:F,formatPrefix:$}}var Dc,xf,ss;Dl({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Dl(o){return Dc=ac(o),xf=Dc.format,ss=Dc.formatPrefix,Dc}function vl(o,c){return o=Math.abs(o),c=Math.abs(c)-o,Math.max(0,rs(c)-rs(o))+1}function nh(o){return Math.max(0,-rs(Math.abs(o)))}function Wp(o,c,f,h){var d=Xh(o,c,f),g;switch(h=oo(h==null?",f":h),h.type){case"s":{var S=Math.max(Math.abs(o),Math.abs(c));return h.precision==null&&!isNaN(g=So(d,S))&&(h.precision=g),ss(h,S)}case"":case"e":case"g":case"p":case"r":{h.precision==null&&!isNaN(g=vl(d,Math.max(Math.abs(o),Math.abs(c))))&&(h.precision=g-(h.type==="e"));break}case"f":case"%":{h.precision==null&&!isNaN(g=nh(d))&&(h.precision=g-(h.type==="%")*2);break}}return xf(h)}function Ff(o){var c=o.domain;return o.ticks=function(f){var h=c();return yf(h[0],h[h.length-1],f==null?10:f)},o.tickFormat=function(f,h){var d=c();return Wp(d[0],d[d.length-1],f==null?10:f,h)},o.nice=function(f){f==null&&(f=10);var h=c(),d=0,g=h.length-1,S=h[d],C=h[g],k;return C<S&&(k=S,S=C,C=k,k=d,d=g,g=k),k=_f(S,C,f),k>0?(S=Math.floor(S/k)*k,C=Math.ceil(C/k)*k,k=_f(S,C,f)):k<0&&(S=Math.ceil(S*k)/k,C=Math.floor(C*k)/k,k=_f(S,C,f)),k>0?(h[d]=Math.floor(S/k)*k,h[g]=Math.ceil(C/k)*k,c(h)):k<0&&(h[d]=Math.ceil(S*k)/k,h[g]=Math.floor(C*k)/k,c(h)),o},o}function yv(){var o=Ua(br,br);return o.copy=function(){return ua(o,yv())},qt.apply(o,arguments),Ff(o)}function Ld(o){var c;function f(h){return isNaN(h=+h)?c:h}return f.invert=f,f.domain=f.range=function(h){return arguments.length?(o=map.call(h,number),f):o.slice()},f.unknown=function(h){return arguments.length?(c=h,f):c},f.copy=function(){return Ld(o).unknown(c)},o=arguments.length?map.call(o,number):[0,1],linearish(f)}function Yh(o,c){o=o.slice();var f=0,h=o.length-1,d=o[f],g=o[h],S;return g<d&&(S=f,f=h,h=S,S=d,d=g,g=S),o[f]=c.floor(d),o[h]=c.ceil(g),o}function zf(o){return Math.log(o)}function $p(o){return Math.exp(o)}function bm(o){return-Math.log(-o)}function vp(o){return-Math.exp(-o)}function Nc(o){return isFinite(o)?+("1e"+o):o<0?0:o}function yg(o){return o===10?Nc:o===Math.E?Math.exp:function(c){return Math.pow(o,c)}}function _g(o){return o===Math.E?Math.log:o===10&&Math.log10||o===2&&Math.log2||(o=Math.log(o),function(c){return Math.log(c)/o})}function Gp(o){return function(c){return-o(-c)}}function Ay(o){var c=o(zf,$p),f=c.domain,h=10,d,g;function S(){return d=_g(h),g=yg(h),f()[0]<0?(d=Gp(d),g=Gp(g),o(bm,vp)):o(zf,$p),c}return c.base=function(C){return arguments.length?(h=+C,S()):h},c.domain=function(C){return arguments.length?(f(C),S()):f()},c.ticks=function(C){var k=f(),F=k[0],$=k[k.length-1],X;(X=$<F)&&(me=F,F=$,$=me);var me=d(F),je=d($),_t,Ot,nn,Un=C==null?10:+C,zn=[];if(!(h%1)&&je-me<Un){if(me=Math.round(me)-1,je=Math.round(je)+1,F>0){for(;me<je;++me)for(Ot=1,_t=g(me);Ot<h;++Ot)if(nn=_t*Ot,!(nn<F)){if(nn>$)break;zn.push(nn)}}else for(;me<je;++me)for(Ot=h-1,_t=g(me);Ot>=1;--Ot)if(nn=_t*Ot,!(nn<F)){if(nn>$)break;zn.push(nn)}}else zn=yf(me,je,Math.min(je-me,Un)).map(g);return X?zn.reverse():zn},c.tickFormat=function(C,k){if(k==null&&(k=h===10?".0e":","),typeof k!="function"&&(k=xf(k)),C===1/0)return k;C==null&&(C=10);var F=Math.max(1,h*C/c.ticks().length);return function($){var X=$/g(Math.round(d($)));return X*h<h-.5&&(X*=h),X<=F?k($):""}},c.nice=function(){return f(Yh(f(),{floor:function(C){return g(Math.floor(d(C)))},ceil:function(C){return g(Math.ceil(d(C)))}}))},c}function bg(){var o=Ay(la()).domain([1,10]);return o.copy=function(){return ua(o,bg()).base(o.base())},qt.apply(o,arguments),o}function xg(o){return function(c){return Math.sign(c)*Math.log1p(Math.abs(c/o))}}function Kv(o){return function(c){return Math.sign(c)*Math.expm1(Math.abs(c))*o}}function Cy(o){var c=1,f=o(xg(c),Kv(c));return f.constant=function(h){return arguments.length?o(xg(c=+h),Kv(c)):c},linearish(f)}function k0(){var o=Cy(transformer());return o.copy=function(){return copy(o,k0()).constant(o.constant())},initRange.apply(o,arguments)}function xm(o){return function(c){return c<0?-Math.pow(-c,o):Math.pow(c,o)}}function mp(o){return o<0?-Math.sqrt(-o):Math.sqrt(o)}function Qv(o){return o<0?-o*o:o*o}function Oy(o){var c=o(br,br),f=1;function h(){return f===1?o(br,br):f===.5?o(mp,Qv):o(xm(f),xm(1/f))}return c.exponent=function(d){return arguments.length?(f=+d,h()):f},Ff(c)}function Em(){var o=Oy(la());return o.copy=function(){return ua(o,Em()).exponent(o.exponent())},qt.apply(o,arguments),o}function a1(){return Em.apply(null,arguments).exponent(.5)}function Eg(){var o=[],c=[],f=[],h;function d(){var S=0,C=Math.max(1,c.length);for(f=new Array(C-1);++S<C;)f[S-1]=iu(o,S/C);return g}function g(S){return isNaN(S=+S)?h:c[dl(f,S)]}return g.invertExtent=function(S){var C=c.indexOf(S);return C<0?[NaN,NaN]:[C>0?f[C-1]:o[0],C<f.length?f[C]:o[o.length-1]]},g.domain=function(S){if(!arguments.length)return o.slice();o=[];for(var C=0,k=S.length,F;C<k;++C)F=S[C],F!=null&&!isNaN(F=+F)&&o.push(F);return o.sort(jo),d()},g.range=function(S){return arguments.length?(c=$t.call(S),d()):c.slice()},g.unknown=function(S){return arguments.length?(h=S,g):h},g.quantiles=function(){return f.slice()},g.copy=function(){return Eg().domain(o).range(c).unknown(h)},qt.apply(g,arguments)}function Sm(){var o=0,c=1,f=1,h=[.5],d=[0,1],g;function S(k){return k<=k?d[dl(h,k,0,f)]:g}function C(){var k=-1;for(h=new Array(f);++k<f;)h[k]=((k+1)*c-(k-f)*o)/(f+1);return S}return S.domain=function(k){return arguments.length?(o=+k[0],c=+k[1],C()):[o,c]},S.range=function(k){return arguments.length?(f=(d=$t.call(k)).length-1,C()):d.slice()},S.invertExtent=function(k){var F=d.indexOf(k);return F<0?[NaN,NaN]:F<1?[o,h[0]]:F>=f?[h[f-1],c]:[h[F-1],h[F]]},S.unknown=function(k){return arguments.length&&(g=k),S},S.thresholds=function(){return h.slice()},S.copy=function(){return Sm().domain([o,c]).range(d).unknown(g)},qt.apply(Ff(S),arguments)}function L0(){var o=[.5],c=[0,1],f,h=1;function d(g){return g<=g?c[dl(o,g,0,h)]:f}return d.domain=function(g){return arguments.length?(o=$t.call(g),h=Math.min(o.length,c.length-1),d):o.slice()},d.range=function(g){return arguments.length?(c=$t.call(g),h=Math.min(o.length,c.length-1),d):c.slice()},d.invertExtent=function(g){var S=c.indexOf(g);return[o[S-1],o[S]]},d.unknown=function(g){return arguments.length?(f=g,d):f},d.copy=function(){return L0().domain(o).range(c).unknown(f)},qt.apply(d,arguments)}var gp=new Date,yp=new Date;function oc(o,c,f,h){function d(g){return o(g=arguments.length===0?new Date:new Date(+g)),g}return d.floor=function(g){return o(g=new Date(+g)),g},d.ceil=function(g){return o(g=new Date(g-1)),c(g,1),o(g),g},d.round=function(g){var S=d(g),C=d.ceil(g);return g-S<C-g?S:C},d.offset=function(g,S){return c(g=new Date(+g),S==null?1:Math.floor(S)),g},d.range=function(g,S,C){var k=[],F;if(g=d.ceil(g),C=C==null?1:Math.floor(C),!(g<S)||!(C>0))return k;do k.push(F=new Date(+g)),c(g,C),o(g);while(F<g&&g<S);return k},d.filter=function(g){return oc(function(S){if(S>=S)for(;o(S),!g(S);)S.setTime(S-1)},function(S,C){if(S>=S)if(C<0)for(;++C<=0;)for(;c(S,-1),!g(S););else for(;--C>=0;)for(;c(S,1),!g(S););})},f&&(d.count=function(g,S){return gp.setTime(+g),yp.setTime(+S),o(gp),o(yp),Math.floor(f(gp,yp))},d.every=function(g){return g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?d.filter(h?function(S){return h(S)%g===0}:function(S){return d.count(0,S)%g===0}):d}),d}var hd=oc(function(o){o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,c){o.setFullYear(o.getFullYear()+c)},function(o,c){return c.getFullYear()-o.getFullYear()},function(o){return o.getFullYear()});hd.every=function(o){return!isFinite(o=Math.floor(o))||!(o>0)?null:oc(function(c){c.setFullYear(Math.floor(c.getFullYear()/o)*o),c.setMonth(0,1),c.setHours(0,0,0,0)},function(c,f){c.setFullYear(c.getFullYear()+f*o)})};var Dd=hd,Gu=hd.range,Nd=oc(function(o){o.setDate(1),o.setHours(0,0,0,0)},function(o,c){o.setMonth(o.getMonth()+c)},function(o,c){return c.getMonth()-o.getMonth()+(c.getFullYear()-o.getFullYear())*12},function(o){return o.getMonth()}),D0=Nd,_v=Nd.range,dd=1e3,Ah=6e4,Xp=36e5,_p=864e5,pd=6048e5;function rh(o){return oc(function(c){c.setDate(c.getDate()-(c.getDay()+7-o)%7),c.setHours(0,0,0,0)},function(c,f){c.setDate(c.getDate()+f*7)},function(c,f){return(f-c-(f.getTimezoneOffset()-c.getTimezoneOffset())*Ah)/pd})}var Bd=rh(0),Jv=rh(1),Fd=rh(2),bp=rh(3),zd=rh(4),wm=rh(5),Tm=rh(6),Sg=Bd.range,qh=Jv.range,Yp=Fd.range,My=bp.range,Ry=zd.range,wg=wm.range,Py=Tm.range,xp=oc(function(o){o.setHours(0,0,0,0)},function(o,c){o.setDate(o.getDate()+c)},function(o,c){return(c-o-(c.getTimezoneOffset()-o.getTimezoneOffset())*Ah)/_p},function(o){return o.getDate()-1}),Am=xp,Ud=xp.range,N0=oc(function(o){o.setTime(o-o.getMilliseconds()-o.getSeconds()*dd-o.getMinutes()*Ah)},function(o,c){o.setTime(+o+c*Xp)},function(o,c){return(c-o)/Xp},function(o){return o.getHours()}),qp=N0,Kp=N0.range,Cm=oc(function(o){o.setTime(o-o.getMilliseconds()-o.getSeconds()*dd)},function(o,c){o.setTime(+o+c*Ah)},function(o,c){return(c-o)/Ah},function(o){return o.getMinutes()}),Ep=Cm,Om=Cm.range,e0=oc(function(o){o.setTime(o-o.getMilliseconds())},function(o,c){o.setTime(+o+c*dd)},function(o,c){return(c-o)/dd},function(o){return o.getUTCSeconds()}),Bc=e0,Fc=e0.range,Xu=oc(function(){},function(o,c){o.setTime(+o+c)},function(o,c){return c-o});Xu.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?oc(function(c){c.setTime(Math.floor(c/o)*o)},function(c,f){c.setTime(+c+f*o)},function(c,f){return(f-c)/o}):Xu};var Uf=Xu,Iy=Xu.range;function Ps(o){return oc(function(c){c.setUTCDate(c.getUTCDate()-(c.getUTCDay()+7-o)%7),c.setUTCHours(0,0,0,0)},function(c,f){c.setUTCDate(c.getUTCDate()+f*7)},function(c,f){return(f-c)/pd})}var bv=Ps(0),t0=Ps(1),ky=Ps(2),Tg=Ps(3),xv=Ps(4),Mm=Ps(5),zc=Ps(6),o1=bv.range,n0=t0.range,Ag=ky.range,Ly=Tg.range,Cg=xv.range,Og=Mm.range,s1=zc.range,r0=oc(function(o){o.setUTCHours(0,0,0,0)},function(o,c){o.setUTCDate(o.getUTCDate()+c)},function(o,c){return(c-o)/_p},function(o){return o.getUTCDate()-1}),Rm=r0,et=r0.range,vn=oc(function(o){o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,c){o.setUTCFullYear(o.getUTCFullYear()+c)},function(o,c){return c.getUTCFullYear()-o.getUTCFullYear()},function(o){return o.getUTCFullYear()});vn.every=function(o){return!isFinite(o=Math.floor(o))||!(o>0)?null:oc(function(c){c.setUTCFullYear(Math.floor(c.getUTCFullYear()/o)*o),c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0)},function(c,f){c.setUTCFullYear(c.getUTCFullYear()+f*o)})};var Vn=vn,$r=vn.range;function di(o){if(0<=o.y&&o.y<100){var c=new Date(-1,o.m,o.d,o.H,o.M,o.S,o.L);return c.setFullYear(o.y),c}return new Date(o.y,o.m,o.d,o.H,o.M,o.S,o.L)}function Vr(o){if(0<=o.y&&o.y<100){var c=new Date(Date.UTC(-1,o.m,o.d,o.H,o.M,o.S,o.L));return c.setUTCFullYear(o.y),c}return new Date(Date.UTC(o.y,o.m,o.d,o.H,o.M,o.S,o.L))}function Rr(o,c,f){return{y:o,m:c,d:f,H:0,M:0,S:0,L:0}}function Yi(o){var c=o.dateTime,f=o.date,h=o.time,d=o.periods,g=o.days,S=o.shortDays,C=o.months,k=o.shortMonths,F=ta(d),$=Sr(d),X=ta(g),me=Sr(g),je=ta(S),_t=Sr(S),Ot=ta(C),nn=Sr(C),Un=ta(k),zn=Sr(k),ur={a:td,A:Jd,b:fh,B:Rs,c:null,d:us,e:us,f:lu,g:ls,G:wl,H:il,I:$l,j:hs,L:ml,m:Nl,M:Bl,p:hh,q:A0,Q:Si,s:Zi,S:Yu,u:Gl,U:Uc,V:Zo,w:Ec,W:Is,x:null,X:null,y:mo,Y:Ss,Z:vd,"%":Li},Pr={a:R_,A:w2,b:ng,B:rg,c:null,d:Nn,e:Nn,f:Js,g:gn,G:Qr,H:Kr,I:Fr,j:Pa,L:Vo,m:Gt,M:xn,p:P_,q:kw,Q:Si,s:Zi,S:Wn,u:jr,U:Dr,V:vr,w:tr,W:Cn,x:null,X:null,y:ar,Y:pr,Z:ti,"%":Li},si={a:Xa,A:pa,b:bo,B:Do,c:so,d:wo,e:wo,f:Aa,g:va,G:Hi,H:Wi,I:Wi,j:ma,L:ce,m:ro,M:yi,p:ha,q:ji,Q:nr,s:ni,S:io,u:Vi,U:xa,V:Oi,w:ri,W:ba,x:af,X:Uu,y:va,Y:Hi,Z:Ri,"%":Bo};ur.x=kr(f,ur),ur.X=kr(h,ur),ur.c=kr(c,ur),Pr.x=kr(f,Pr),Pr.X=kr(h,Pr),Pr.c=kr(c,Pr);function kr(Co,eu){return function(Ks){var Ia=[],Nh=-1,Ml=0,ep=Co.length,xd,ig,I_;for(Ks instanceof Date||(Ks=new Date(+Ks));++Nh<ep;)Co.charCodeAt(Nh)===37&&(Ia.push(Co.slice(Ml,Nh)),(ig=ki[xd=Co.charAt(++Nh)])!=null?xd=Co.charAt(++Nh):ig=xd==="e"?" ":"0",(I_=eu[xd])&&(xd=I_(Ks,ig)),Ia.push(xd),Ml=Nh+1);return Ia.push(Co.slice(Ml,Nh)),Ia.join("")}}function hr(Co,eu){return function(Ks){var Ia=Rr(1900,void 0,1),Nh=Hr(Ia,Co,Ks+="",0),Ml,ep;if(Nh!=Ks.length)return null;if("Q"in Ia)return new Date(Ia.Q);if("s"in Ia)return new Date(Ia.s*1e3+("L"in Ia?Ia.L:0));if(eu&&!("Z"in Ia)&&(Ia.Z=0),"p"in Ia&&(Ia.H=Ia.H%12+Ia.p*12),Ia.m===void 0&&(Ia.m="q"in Ia?Ia.q:0),"V"in Ia){if(Ia.V<1||Ia.V>53)return null;"w"in Ia||(Ia.w=1),"Z"in Ia?(Ml=Vr(Rr(Ia.y,0,1)),ep=Ml.getUTCDay(),Ml=ep>4||ep===0?t0.ceil(Ml):t0(Ml),Ml=Rm.offset(Ml,(Ia.V-1)*7),Ia.y=Ml.getUTCFullYear(),Ia.m=Ml.getUTCMonth(),Ia.d=Ml.getUTCDate()+(Ia.w+6)%7):(Ml=di(Rr(Ia.y,0,1)),ep=Ml.getDay(),Ml=ep>4||ep===0?Jv.ceil(Ml):Jv(Ml),Ml=Am.offset(Ml,(Ia.V-1)*7),Ia.y=Ml.getFullYear(),Ia.m=Ml.getMonth(),Ia.d=Ml.getDate()+(Ia.w+6)%7)}else("W"in Ia||"U"in Ia)&&("w"in Ia||(Ia.w="u"in Ia?Ia.u%7:"W"in Ia?1:0),ep="Z"in Ia?Vr(Rr(Ia.y,0,1)).getUTCDay():di(Rr(Ia.y,0,1)).getDay(),Ia.m=0,Ia.d="W"in Ia?(Ia.w+6)%7+Ia.W*7-(ep+5)%7:Ia.w+Ia.U*7-(ep+6)%7);return"Z"in Ia?(Ia.H+=Ia.Z/100|0,Ia.M+=Ia.Z%100,Vr(Ia)):di(Ia)}}function Hr(Co,eu,Ks,Ia){for(var Nh=0,Ml=eu.length,ep=Ks.length,xd,ig;Nh<Ml;){if(Ia>=ep)return-1;if(xd=eu.charCodeAt(Nh++),xd===37){if(xd=eu.charAt(Nh++),ig=si[xd in ki?eu.charAt(Nh++):xd],!ig||(Ia=ig(Co,Ks,Ia))<0)return-1}else if(xd!=Ks.charCodeAt(Ia++))return-1}return Ia}function ha(Co,eu,Ks){var Ia=F.exec(eu.slice(Ks));return Ia?(Co.p=$[Ia[0].toLowerCase()],Ks+Ia[0].length):-1}function Xa(Co,eu,Ks){var Ia=je.exec(eu.slice(Ks));return Ia?(Co.w=_t[Ia[0].toLowerCase()],Ks+Ia[0].length):-1}function pa(Co,eu,Ks){var Ia=X.exec(eu.slice(Ks));return Ia?(Co.w=me[Ia[0].toLowerCase()],Ks+Ia[0].length):-1}function bo(Co,eu,Ks){var Ia=Un.exec(eu.slice(Ks));return Ia?(Co.m=zn[Ia[0].toLowerCase()],Ks+Ia[0].length):-1}function Do(Co,eu,Ks){var Ia=Ot.exec(eu.slice(Ks));return Ia?(Co.m=nn[Ia[0].toLowerCase()],Ks+Ia[0].length):-1}function so(Co,eu,Ks){return Hr(Co,c,eu,Ks)}function af(Co,eu,Ks){return Hr(Co,f,eu,Ks)}function Uu(Co,eu,Ks){return Hr(Co,h,eu,Ks)}function td(Co){return S[Co.getDay()]}function Jd(Co){return g[Co.getDay()]}function fh(Co){return k[Co.getMonth()]}function Rs(Co){return C[Co.getMonth()]}function hh(Co){return d[+(Co.getHours()>=12)]}function A0(Co){return 1+~~(Co.getMonth()/3)}function R_(Co){return S[Co.getUTCDay()]}function w2(Co){return g[Co.getUTCDay()]}function ng(Co){return k[Co.getUTCMonth()]}function rg(Co){return C[Co.getUTCMonth()]}function P_(Co){return d[+(Co.getUTCHours()>=12)]}function kw(Co){return 1+~~(Co.getUTCMonth()/3)}return{format:function(Co){var eu=kr(Co+="",ur);return eu.toString=function(){return Co},eu},parse:function(Co){var eu=hr(Co+="",!1);return eu.toString=function(){return Co},eu},utcFormat:function(Co){var eu=kr(Co+="",Pr);return eu.toString=function(){return Co},eu},utcParse:function(Co){var eu=hr(Co+="",!0);return eu.toString=function(){return Co},eu}}}var ki={"-":"",_:" ",0:"0"},zi=/^\s*\d+/,qi=/^%/,ia=/[\\^$*+?|[\]().{}]/g;function Ei(o,c,f){var h=o<0?"-":"",d=(h?-o:o)+"",g=d.length;return h+(g<f?new Array(f-g+1).join(c)+d:d)}function Ui(o){return o.replace(ia,"\\$&")}function ta(o){return new RegExp("^(?:"+o.map(Ui).join("|")+")","i")}function Sr(o){for(var c={},f=-1,h=o.length;++f<h;)c[o[f].toLowerCase()]=f;return c}function ri(o,c,f){var h=zi.exec(c.slice(f,f+1));return h?(o.w=+h[0],f+h[0].length):-1}function Vi(o,c,f){var h=zi.exec(c.slice(f,f+1));return h?(o.u=+h[0],f+h[0].length):-1}function xa(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.U=+h[0],f+h[0].length):-1}function Oi(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.V=+h[0],f+h[0].length):-1}function ba(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.W=+h[0],f+h[0].length):-1}function Hi(o,c,f){var h=zi.exec(c.slice(f,f+4));return h?(o.y=+h[0],f+h[0].length):-1}function va(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.y=+h[0]+(+h[0]>68?1900:2e3),f+h[0].length):-1}function Ri(o,c,f){var h=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(c.slice(f,f+6));return h?(o.Z=h[1]?0:-(h[2]+(h[3]||"00")),f+h[0].length):-1}function ji(o,c,f){var h=zi.exec(c.slice(f,f+1));return h?(o.q=h[0]*3-3,f+h[0].length):-1}function ro(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.m=h[0]-1,f+h[0].length):-1}function wo(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.d=+h[0],f+h[0].length):-1}function ma(o,c,f){var h=zi.exec(c.slice(f,f+3));return h?(o.m=0,o.d=+h[0],f+h[0].length):-1}function Wi(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.H=+h[0],f+h[0].length):-1}function yi(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.M=+h[0],f+h[0].length):-1}function io(o,c,f){var h=zi.exec(c.slice(f,f+2));return h?(o.S=+h[0],f+h[0].length):-1}function ce(o,c,f){var h=zi.exec(c.slice(f,f+3));return h?(o.L=+h[0],f+h[0].length):-1}function Aa(o,c,f){var h=zi.exec(c.slice(f,f+6));return h?(o.L=Math.floor(h[0]/1e3),f+h[0].length):-1}function Bo(o,c,f){var h=qi.exec(c.slice(f,f+1));return h?f+h[0].length:-1}function nr(o,c,f){var h=zi.exec(c.slice(f));return h?(o.Q=+h[0],f+h[0].length):-1}function ni(o,c,f){var h=zi.exec(c.slice(f));return h?(o.s=+h[0],f+h[0].length):-1}function us(o,c){return Ei(o.getDate(),c,2)}function il(o,c){return Ei(o.getHours(),c,2)}function $l(o,c){return Ei(o.getHours()%12||12,c,2)}function hs(o,c){return Ei(1+Am.count(Dd(o),o),c,3)}function ml(o,c){return Ei(o.getMilliseconds(),c,3)}function lu(o,c){return ml(o,c)+"000"}function Nl(o,c){return Ei(o.getMonth()+1,c,2)}function Bl(o,c){return Ei(o.getMinutes(),c,2)}function Yu(o,c){return Ei(o.getSeconds(),c,2)}function Gl(o){var c=o.getDay();return c===0?7:c}function Uc(o,c){return Ei(Bd.count(Dd(o)-1,o),c,2)}function Sl(o){var c=o.getDay();return c>=4||c===0?zd(o):zd.ceil(o)}function Zo(o,c){return o=Sl(o),Ei(zd.count(Dd(o),o)+(Dd(o).getDay()===4),c,2)}function Ec(o){return o.getDay()}function Is(o,c){return Ei(Jv.count(Dd(o)-1,o),c,2)}function mo(o,c){return Ei(o.getFullYear()%100,c,2)}function ls(o,c){return o=Sl(o),Ei(o.getFullYear()%100,c,2)}function Ss(o,c){return Ei(o.getFullYear()%1e4,c,4)}function wl(o,c){var f=o.getDay();return o=f>=4||f===0?zd(o):zd.ceil(o),Ei(o.getFullYear()%1e4,c,4)}function vd(o){var c=o.getTimezoneOffset();return(c>0?"-":(c*=-1,"+"))+Ei(c/60|0,"0",2)+Ei(c%60,"0",2)}function Nn(o,c){return Ei(o.getUTCDate(),c,2)}function Kr(o,c){return Ei(o.getUTCHours(),c,2)}function Fr(o,c){return Ei(o.getUTCHours()%12||12,c,2)}function Pa(o,c){return Ei(1+Rm.count(Vn(o),o),c,3)}function Vo(o,c){return Ei(o.getUTCMilliseconds(),c,3)}function Js(o,c){return Vo(o,c)+"000"}function Gt(o,c){return Ei(o.getUTCMonth()+1,c,2)}function xn(o,c){return Ei(o.getUTCMinutes(),c,2)}function Wn(o,c){return Ei(o.getUTCSeconds(),c,2)}function jr(o){var c=o.getUTCDay();return c===0?7:c}function Dr(o,c){return Ei(bv.count(Vn(o)-1,o),c,2)}function er(o){var c=o.getUTCDay();return c>=4||c===0?xv(o):xv.ceil(o)}function vr(o,c){return o=er(o),Ei(xv.count(Vn(o),o)+(Vn(o).getUTCDay()===4),c,2)}function tr(o){return o.getUTCDay()}function Cn(o,c){return Ei(t0.count(Vn(o)-1,o),c,2)}function ar(o,c){return Ei(o.getUTCFullYear()%100,c,2)}function gn(o,c){return o=er(o),Ei(o.getUTCFullYear()%100,c,2)}function pr(o,c){return Ei(o.getUTCFullYear()%1e4,c,4)}function Qr(o,c){var f=o.getUTCDay();return o=f>=4||f===0?xv(o):xv.ceil(o),Ei(o.getUTCFullYear()%1e4,c,4)}function ti(){return"+0000"}function Li(){return"%"}function Si(o){return+o}function Zi(o){return Math.floor(+o/1e3)}var Va,Da,Ha,go,xo;ks({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ks(o){return Va=Yi(o),Da=Va.format,Ha=Va.parse,go=Va.utcFormat,xo=Va.utcParse,Va}var xu=1e3,jf=xu*60,Qp=jf*60,sc=Qp*24,Dy=sc*7,jd=sc*30,Jp=sc*365;function Pm(o){return new Date(o)}function ex(o){return o instanceof Date?+o:+new Date(+o)}function u1(o,c,f,h,d,g,S,C,k){var F=Ua(br,br),$=F.invert,X=F.domain,me=k(".%L"),je=k(":%S"),_t=k("%I:%M"),Ot=k("%I %p"),nn=k("%a %d"),Un=k("%b %d"),zn=k("%B"),ur=k("%Y"),Pr=[[S,1,xu],[S,5,5*xu],[S,15,15*xu],[S,30,30*xu],[g,1,jf],[g,5,5*jf],[g,15,15*jf],[g,30,30*jf],[d,1,Qp],[d,3,3*Qp],[d,6,6*Qp],[d,12,12*Qp],[h,1,sc],[h,2,2*sc],[f,1,Dy],[c,1,jd],[c,3,3*jd],[o,1,Jp]];function si(hr){return(S(hr)<hr?me:g(hr)<hr?je:d(hr)<hr?_t:h(hr)<hr?Ot:c(hr)<hr?f(hr)<hr?nn:Un:o(hr)<hr?zn:ur)(hr)}function kr(hr,Hr,ha,Xa){if(hr==null&&(hr=10),typeof hr=="number"){var pa=Math.abs(ha-Hr)/hr,bo=qs(function(Do){return Do[2]}).right(Pr,pa);bo===Pr.length?(Xa=Xh(Hr/Jp,ha/Jp,hr),hr=o):bo?(bo=Pr[pa/Pr[bo-1][2]<Pr[bo][2]/pa?bo-1:bo],Xa=bo[1],hr=bo[0]):(Xa=Math.max(Xh(Hr,ha,hr),1),hr=C)}return Xa==null?hr:hr.every(Xa)}return F.invert=function(hr){return new Date($(hr))},F.domain=function(hr){return arguments.length?X(At.call(hr,ex)):X().map(Pm)},F.ticks=function(hr,Hr){var ha=X(),Xa=ha[0],pa=ha[ha.length-1],bo=pa<Xa,Do;return bo&&(Do=Xa,Xa=pa,pa=Do),Do=kr(hr,Xa,pa,Hr),Do=Do?Do.range(Xa,pa+1):[],bo?Do.reverse():Do},F.tickFormat=function(hr,Hr){return Hr==null?si:k(Hr)},F.nice=function(hr,Hr){var ha=X();return(hr=kr(hr,ha[0],ha[ha.length-1],Hr))?X(Yh(ha,hr)):F},F.copy=function(){return ua(F,u1(o,c,f,h,d,g,S,C,k))},F}function Im(){return qt.apply(u1(Dd,D0,Bd,Am,qp,Ep,Bc,Uf,Da).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function B0(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function F0(){var o=0,c=1,f,h,d,g,S=br,C=!1,k;function F($){return isNaN($=+$)?k:S(d===0?.5:($=(g($)-f)*d,C?Math.max(0,Math.min(1,$)):$))}return F.domain=function($){return arguments.length?(f=g(o=+$[0]),h=g(c=+$[1]),d=f===h?0:1/(h-f),F):[o,c]},F.clamp=function($){return arguments.length?(C=!!$,F):C},F.interpolator=function($){return arguments.length?(S=$,F):S},F.unknown=function($){return arguments.length?(k=$,F):k},function($){return g=$,f=$(o),h=$(c),d=f===h?0:1/(h-f),F}}function ev(o,c){return c.domain(o.domain()).interpolator(o.interpolator()).clamp(o.clamp()).unknown(o.unknown())}function l1(){var o=Ff(F0()(br));return o.copy=function(){return ev(o,l1())},rn.apply(o,arguments)}function Xl(){var o=loggish(F0()).domain([1,10]);return o.copy=function(){return ev(o,Xl()).base(o.base())},initInterpolator.apply(o,arguments)}function Nu(){var o=symlogish(F0());return o.copy=function(){return ev(o,Nu()).constant(o.constant())},initInterpolator.apply(o,arguments)}function c1(){var o=powish(F0());return o.copy=function(){return ev(o,c1()).exponent(o.exponent())},initInterpolator.apply(o,arguments)}function Mg(){return c1.apply(null,arguments).exponent(.5)}function tx(){var o=[],c=identity;function f(h){if(!isNaN(h=+h))return c((bisect(o,h)-1)/(o.length-1))}return f.domain=function(h){if(!arguments.length)return o.slice();o=[];for(var d=0,g=h.length,S;d<g;++d)S=h[d],S!=null&&!isNaN(S=+S)&&o.push(S);return o.sort(ascending),f},f.interpolator=function(h){return arguments.length?(c=h,f):c},f.copy=function(){return tx(c).domain(o)},initInterpolator.apply(f,arguments)}function Rg(){var o=0,c=.5,f=1,h,d,g,S,C,k=br,F,$=!1,X;function me(je){return isNaN(je=+je)?X:(je=.5+((je=+F(je))-d)*(je<d?S:C),k($?Math.max(0,Math.min(1,je)):je))}return me.domain=function(je){return arguments.length?(h=F(o=+je[0]),d=F(c=+je[1]),g=F(f=+je[2]),S=h===d?0:.5/(d-h),C=d===g?0:.5/(g-d),me):[o,c,f]},me.clamp=function(je){return arguments.length?($=!!je,me):$},me.interpolator=function(je){return arguments.length?(k=je,me):k},me.unknown=function(je){return arguments.length?(X=je,me):X},function(je){return F=je,h=je(o),d=je(c),g=je(f),S=h===d?0:.5/(d-h),C=d===g?0:.5/(g-d),me}}function f1(){var o=Ff(Rg()(br));return o.copy=function(){return ev(o,f1())},rn.apply(o,arguments)}function h1(){var o=loggish(Rg()).domain([.1,1,10]);return o.copy=function(){return copy(o,h1()).base(o.base())},initInterpolator.apply(o,arguments)}function z0(){var o=symlogish(Rg());return o.copy=function(){return copy(o,z0()).constant(o.constant())},initInterpolator.apply(o,arguments)}function md(){var o=powish(Rg());return o.copy=function(){return copy(o,md()).exponent(o.exponent())},initInterpolator.apply(o,arguments)}function Yl(){return md.apply(null,arguments).exponent(.5)}function zs(o){var c,f=[];function h(d){return d==null?c:d}return h.invert=h,h.domain=h.range=function(d){return d?(f=d,d):f},h.unknown=function(d){return d?(c=d,d):c},h.copy=function(){return zs(o).unknown(c)},h}var wa,Ch=Ve.rU.isNil,Bu=Ve.rU.isString,al=Ve.rU.uniq,i0=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,a0=(wa={},(0,He.Z)(wa,Ae.vY.LINEAR,yv),(0,He.Z)(wa,Ae.vY.POWER,Em),(0,He.Z)(wa,Ae.vY.LOG,bg),(0,He.Z)(wa,Ae.vY.IDENTITY,zs),(0,He.Z)(wa,Ae.vY.SEQUENTIAL,l1),(0,He.Z)(wa,Ae.vY.TIME,Im),(0,He.Z)(wa,Ae.vY.QUANTILE,Eg),(0,He.Z)(wa,Ae.vY.QUANTIZE,Sm),(0,He.Z)(wa,Ae.vY.THRESHOLD,L0),(0,He.Z)(wa,Ae.vY.CAT,Rn),(0,He.Z)(wa,Ae.vY.DIVERGING,f1),wa),Sp=function(){function o(){(0,Dt.Z)(this,o),(0,He.Z)(this,"scaleOptions",{})}return(0,dn.Z)(o,[{key:"apply",value:function(f,h){var d=this,g=h.styleAttributeService;f.hooks.init.tapPromise("FeatureScalePlugin",(0,Fe.Z)(B().mark(function S(){var C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(f.log(Ae.Or.ScaleInitStart,Ae.KD.INIT),d.scaleOptions=f.getScaleOptions(),k=g.getLayerStyleAttributes(),F=(C=f.getSource())===null||C===void 0?void 0:C.data.dataArray,!(Array.isArray(F)&&F.length===0)){X.next=8;break}return X.abrupt("return");case 8:d.caculateScalesForAttributes(k||[],F);case 9:f.log(Ae.Or.ScaleInitEnd,Ae.KD.INIT);case 10:case"end":return X.stop()}},S)}))),f.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var S=(0,Fe.Z)(B().mark(function C(k){var F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(k){me.next=2;break}return me.abrupt("return",k);case 2:if(f.log(Ae.Or.ScaleInitStart,Ae.KD.UPDATE),d.scaleOptions=f.getScaleOptions(),F=g.getLayerStyleAttributes(),$=f.getSource().data.dataArray,!(Array.isArray($)&&$.length===0)){me.next=8;break}return me.abrupt("return",!0);case 8:return d.caculateScalesForAttributes(F||[],$),f.log(Ae.Or.ScaleInitEnd,Ae.KD.UPDATE),f.layerModelNeedUpdate=!0,me.abrupt("return",!0);case 12:case"end":return me.stop()}},C)}));return function(C){return S.apply(this,arguments)}}()),f.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!f.layerModelNeedUpdate){d.scaleOptions=f.getScaleOptions();var S=g.getLayerStyleAttributes(),C=f.getSource().data.dataArray;if(!(Array.isArray(C)&&C.length===0)&&S){var k=S.filter(function(F){return F.needRescale});k.length&&d.caculateScalesForAttributes(k,C)}}})}},{key:"isNumber",value:function(f){return!isNaN(parseFloat(f))&&isFinite(f)}},{key:"caculateScalesForAttributes",value:function(f,h){var d=this;f.forEach(function(g){if(g.scale){var S=g.scale,C=g.scale.field;S.names=d.parseFields(Ch(C)?[]:C);var k=[];S.names.forEach(function(F){var $;k.push(d.createScale(F,g.name,($=g.scale)===null||$===void 0?void 0:$.values,h))}),k.some(function(F){return F.type===Ae.ee.VARIABLE})?(S.type=Ae.ee.VARIABLE,k.forEach(function(F){if(!S.callback&&S.values!=="text"){var $;switch(($=F.option)===null||$===void 0?void 0:$.type){case Ae.vY.LOG:case Ae.vY.LINEAR:case Ae.vY.POWER:if(S.values&&S.values.length>2){var X=F.scale.ticks(S.values.length);F.scale.domain(X)}S.values?F.scale.range(S.values):F.scale.range(F.option.domain);break;case Ae.vY.QUANTILE:case Ae.vY.QUANTIZE:case Ae.vY.THRESHOLD:F.scale.range(S.values);break;case Ae.vY.IDENTITY:break;case Ae.vY.CAT:S.values?F.scale.range(S.values):F.scale.range(F.option.domain);break;case Ae.vY.DIVERGING:case Ae.vY.SEQUENTIAL:F.scale.interpolator($u(S.values));break}}if(S.values==="text"){var me;F.scale.range((me=F.option)===null||me===void 0?void 0:me.domain)}})):(S.type=Ae.ee.CONSTANT,S.defaultValues=k.map(function(F,$){return F.scale(S.names[$])})),S.scalers=k.map(function(F){return{field:F.field,func:F.scale,option:F.option}}),g.needRescale=!1}})}},{key:"parseFields",value:function(f){return Array.isArray(f)?f:Bu(f)?f.split("*"):[f]}},{key:"createScale",value:function(f,h,d,g){var S,C,k=this.scaleOptions[h]&&((S=this.scaleOptions[h])===null||S===void 0?void 0:S.field)===f?this.scaleOptions[h]:this.scaleOptions[f],F={field:f,scale:void 0,type:Ae.ee.VARIABLE,option:k};if(!g||!g.length)return k&&k.type?F.scale=this.createDefaultScale(k):(F.scale=Rn([f]),F.type=Ae.ee.CONSTANT),F;var $=(C=g.find(function(je){return!Ch(je[f])}))===null||C===void 0?void 0:C[f];if(this.isNumber(f)||Ch($)&&!k)F.scale=Rn([f]),F.type=Ae.ee.CONSTANT;else{var X=k&&k.type||this.getDefaultType($);d==="text"&&(X=Ae.vY.CAT),d===void 0&&(X=Ae.vY.IDENTITY);var me=this.createScaleConfig(X,f,k,g);F.scale=this.createDefaultScale(me),F.option=me}return F}},{key:"getDefaultType",value:function(f){var h=Ae.vY.LINEAR;return typeof f=="string"&&(h=i0.test(f)?Ae.vY.TIME:Ae.vY.CAT),h}},{key:"createScaleConfig",value:function(f,h,d,g){var S={type:f},C=[];if(f===Ae.vY.QUANTILE){var k=new Map;g==null||g.forEach(function(X){k.set(X._id,X[h])}),C=Array.from(k.values())}else C=(g==null?void 0:g.map(function(X){return X[h]}))||[];if(d!=null&&d.domain)S.domain=d==null?void 0:d.domain;else if(f===Ae.vY.CAT||f===Ae.vY.IDENTITY)S.domain=al(C);else if(f===Ae.vY.QUANTILE)S.domain=C;else if(f===Ae.vY.DIVERGING){var F=mn(C),$=(d==null?void 0:d.neutral)!==void 0?d==null?void 0:d.neutral:(F[0]+F[1])/2;S.domain=[F[0],$,F[1]]}else S.domain=mn(C);return(0,De.Z)((0,De.Z)({},S),d)}},{key:"createDefaultScale",value:function(f){var h=f.type,d=f.domain,g=f.unknown,S=f.clamp,C=f.nice,k=a0[h]();return d&&k.domain&&k.domain(d),g&&k.unknown(g),S!==void 0&&k.clamp&&k.clamp(S),C!==void 0&&k.nice&&k.nice(C),k}}]),o}(),Ny=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f){f.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var h=f.animateStatus;h&&f.models.forEach(function(d){d.addUniforms((0,De.Z)({},f.layerModel.getAnimateUniforms()))})})}}]),o}(),By=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f){f.hooks.afterInit.tap("LayerMaskPlugin",function(){var h=f.getLayerConfig(),d=h.maskLayers,g=h.enableMask;!f.tileLayer&&d&&d.length>0&&f.updateLayerConfig({mask:g})})}}]),o}(),d1=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"build",value:function(){var c=(0,Fe.Z)(B().mark(function h(d){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return d.prepareBuildModel(),S.next=3,d.buildModels();case 3:case"end":return S.stop()}},h)}));function f(h){return c.apply(this,arguments)}return f}()},{key:"initLayerModel",value:function(){var c=(0,Fe.Z)(B().mark(function h(d){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.build(d);case 2:d.styleNeedUpdate=!1;case 3:case"end":return S.stop()}},h,this)}));function f(h){return c.apply(this,arguments)}return f}()},{key:"prepareLayerModel",value:function(){var c=(0,Fe.Z)(B().mark(function h(d){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.build(d);case 2:d.styleNeedUpdate=!1;case 3:case"end":return S.stop()}},h,this)}));function f(h){return c.apply(this,arguments)}return f}()},{key:"apply",value:function(f){var h=this;f.hooks.init.tapPromise("LayerModelPlugin",(0,Fe.Z)(B().mark(function d(){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!f.getSource().isTile){S.next=3;break}return f.prepareBuildModel(),S.abrupt("return");case 3:return f.log(Ae.Or.BuildModelStart,Ae.KD.INIT),S.next=6,h.initLayerModel(f);case 6:f.log(Ae.Or.BuildModelEnd,Ae.KD.INIT);case 7:case"end":return S.stop()}},d)}))),f.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var d=(0,Fe.Z)(B().mark(function g(S){return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(S){k.next=2;break}return k.abrupt("return",!1);case 2:if(!f.getSource().isTile){k.next=4;break}return k.abrupt("return",!1);case 4:return f.log(Ae.Or.BuildModelStart,Ae.KD.UPDATE),k.next=7,h.prepareLayerModel(f);case 7:return f.log(Ae.Or.BuildModelEnd,Ae.KD.UPDATE),k.abrupt("return",!0);case 9:case"end":return k.stop()}},g)}));return function(g){return d.apply(this,arguments)}}())}}]),o}(),uc=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f){f.hooks.afterInit.tap("LayerStylePlugin",function(){var h=f.getLayerConfig(),d=h.autoFit,g=h.fitBoundsOptions;d&&f.fitBounds(g),f.styleNeedUpdate=!1})}}]),o}(),Ev=["type"],Sv={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},u={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},v={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},_={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function M(o){var c={u_DirectionalLights:new Array(3).fill((0,De.Z)({},v)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,De.Z)({},_)),u_NumOfSpotLights:0};return(!o||!o.length)&&(o=[u]),o.forEach(function(f){var h=f.type,d=h===void 0?"directional":h,g=(0,Rl.Z)(f,Ev),S=Sv[d].lights,C=Sv[d].num,k=c[C];c[S][k]=(0,De.Z)((0,De.Z)({},c[S][k]),g),c[C]++}),c}var L=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f){f.hooks.beforeRender.tap("LightingPlugin",function(){var h=f.getLayerConfig(),d=h.enableLighting;d&&f.models.forEach(function(g){return g.addUniforms((0,De.Z)({},M()))})})}}]),o}();function U(o){return o.map(function(c){return typeof c=="string"&&(c=[c,{}]),c})}function H(o,c,f,h){var d=o.multiPassRenderer,g=o.getLayerConfig(),S=g.enableTAA;return S?d.add(h("taa")):d.add(h("render")),U(c).forEach(function(C){var k=(0,On.Z)(C,2),F=k[0],$=k[1];d.add(f(F),$)}),d.add(f("copy")),d}var ie=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f,h){var d=this,g=h.rendererService,S=h.postProcessingPassFactory,C=h.normalPassFactory;f.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var k=f.getLayerConfig(),F=k.enableMultiPassRenderer,$=k.passes,X=$===void 0?[]:$;d.enabled=!!F&&f.getLayerConfig().enableMultiPassRenderer!==!1,d.enabled&&(f.multiPassRenderer=H(f,X,S,C),f.multiPassRenderer.setRenderFlag(!0))}),f.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(d.enabled){var k=g.getViewportSize(),F=k.width,$=k.height;f.multiPassRenderer.resize(F,$)}})}}]),o}(),_e=function(o){return o[o.POSITION=0]="POSITION",o[o.COLOR=1]="COLOR",o[o.VERTEX_ID=2]="VERTEX_ID",o[o.PICKING_COLOR=3]="PICKING_COLOR",o[o.STROKE=4]="STROKE",o[o.OPACITY=5]="OPACITY",o[o.OFFSETS=6]="OFFSETS",o[o.ROTATION=7]="ROTATION",o[o.EXTRUSION_BASE=8]="EXTRUSION_BASE",o[o.SIZE=9]="SIZE",o[o.SHAPE=10]="SHAPE",o[o.EXTRUDE=11]="EXTRUDE",o[o.MAX=12]="MAX",o[o.NORMAL=13]="NORMAL",o[o.UV=14]="UV",o[o.LINEAR=15]="LINEAR",o}({});function Ye(o){switch(o){case"rotation":return{name:"Rotation",type:Ae.GC.Attribute,descriptor:{name:"a_Rotation",shaderLocation:_e.ROTATION,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(f){var h=f.rotation,d=h===void 0?0:h;return Array.isArray(d)?[d[0]]:[d]}}};case"stroke":return{name:"stroke",type:Ae.GC.Attribute,descriptor:{name:"a_Stroke",shaderLocation:_e.STROKE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(f){var h=f.stroke,d=h===void 0?[1,1,1,1]:h;return d}}};case"opacity":return{name:"opacity",type:Ae.GC.Attribute,descriptor:{name:"a_Opacity",shaderLocation:_e.OPACITY,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(f){var h=f.opacity,d=h===void 0?1:h;return[d]}}};case"extrusionBase":return{name:"extrusionBase",type:Ae.GC.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:_e.EXTRUSION_BASE,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(f){var h=f.extrusionBase,d=h===void 0?0:h;return[d]}}};case"offsets":return{name:"offsets",type:Ae.GC.Attribute,descriptor:{name:"a_Offsets",shaderLocation:_e.OFFSETS,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(f){var h=f.offsets;return h}}};case"thetaOffset":return{name:"thetaOffset",type:Ae.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(f){var h=f.thetaOffset,d=h===void 0?1:h;return[d]}}};default:return}}var ot=Ve.rU.isNumber,dt={NONE:0,ENCODE:1,HIGHLIGHT:2},zt=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"pickOption2Array",value:function(){var f=[];return this.pickingUniformMap.forEach(function(h){ot(h)?f.push(h):f.push.apply(f,(0,Ht.Z)(h))}),f}},{key:"updatePickOption",value:function(f,h){var d=this;Object.keys(f).forEach(function(k){d.pickingUniformMap.set(k,f[k])});var g=h.getLayerConfig().pickingBuffer||0,S=Number(h.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",g),this.pickingUniformMap.set("u_shaderPick",S);var C=h.getPickingUniformBuffer();C.subData({offset:0,data:this.pickOption2Array()})}},{key:"apply",value:function(f,h){var d=this,g=h.styleAttributeService;this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_EnableSelect",0],["u_activeMix",0]]),f.hooks.init.tapPromise("PixelPickingPlugin",function(){var S=f.getLayerConfig(),C=S.enablePicking;g.registerStyleAttribute({name:"pickingColor",type:Ae.GC.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:_e.PICKING_COLOR,buffer:{data:[],type:Ae.gl.FLOAT},size:3,update:function(F){var $=F.id;return C?(0,Ve.Z6)($):[0,0,0]}}})}),f.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var S=f.getLayerConfig(),C=S.enablePicking;C&&f.isVisible()&&(d.updatePickOption({u_PickingStage:dt.ENCODE},f),f.models.forEach(function(k){return k.addUniforms({u_PickingStage:dt.ENCODE})}))}),f.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var S=f.getLayerConfig(),C=S.enablePicking;C&&f.isVisible()&&(d.updatePickOption({u_PickingStage:dt.HIGHLIGHT},f),f.models.forEach(function(k){return k.addUniforms({u_PickingStage:dt.HIGHLIGHT})}))}),f.hooks.beforeHighlight.tap("PixelPickingPlugin",function(S){var C=f.getLayerConfig(),k=C.highlightColor,F=C.activeMix,$=F===void 0?0:F,X=typeof k=="string"?(0,Ve.CI)(k):k||[1,0,0,1];f.updateLayerConfig({pickedFeatureID:(0,Ve.W0)(new Uint8Array(S))});var me={u_PickingStage:dt.HIGHLIGHT,u_PickingColor:S,u_HighlightColor:X.map(function(je){return je*255}),u_activeMix:$};d.updatePickOption(me,f),f.models.forEach(function(je){return je.addUniforms(me)})}),f.hooks.beforeSelect.tap("PixelPickingPlugin",function(S){var C=f.getLayerConfig(),k=C.selectColor,F=C.selectMix,$=F===void 0?0:F,X=typeof k=="string"?(0,Ve.CI)(k):k||[1,0,0,1];f.updateLayerConfig({pickedFeatureID:(0,Ve.W0)(new Uint8Array(S))});var me={u_PickingStage:dt.HIGHLIGHT,u_PickingColor:S,u_HighlightColor:X.map(function(je){return je*255}),u_activeMix:$,u_CurrentSelectedId:S,u_SelectColor:X.map(function(je){return je*255}),u_EnableSelect:1};d.updatePickOption(me,f),f.models.forEach(function(je){return je.addUniforms(me)})})}}]),o}(),Xt=["mvt","geojsonvt","testTile"];function Pn(o){var c=o.getSource();return Xt.includes(c.parser.type)}var Ln=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f,h){var d=this,g=h.styleAttributeService;f.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){Pn(f)||d.registerBuiltinAttributes(g,f)})}},{key:"registerBuiltinAttributes",value:function(f,h){if(h.type==="MaskLayer"){this.registerPositionAttribute(f);return}this.registerPositionAttribute(f),this.registerColorAttribute(f),this.registerVertexIdAttribute(f)}},{key:"registerPositionAttribute",value:function(f){f.registerStyleAttribute({name:"position",type:Ae.GC.Attribute,descriptor:{name:"a_Position",shaderLocation:_e.POSITION,buffer:{data:[],type:Ae.gl.FLOAT},size:3,update:function(d,g,S){return S.length===2?[S[0],S[1],0]:[S[0],S[1],S[2]]}}})}},{key:"registerColorAttribute",value:function(f){f.registerStyleAttribute({name:"color",type:Ae.GC.Attribute,descriptor:{name:"a_Color",shaderLocation:_e.COLOR,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(d){var g=d.color;return!g||!g.length?[1,1,1,1]:g}}})}},{key:"registerVertexIdAttribute",value:function(f){f.registerStyleAttribute({name:"vertexId",type:Ae.GC.Attribute,descriptor:{name:"a_vertexId",shaderLocation:_e.VERTEX_ID,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(d,g){return[g]}}})}}]),o}(),rr=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f,h){var d=this,g=h.rendererService,S=h.mapService,C=h.layerService,k=h.coordinateSystemService,F=h.cameraService;this.rendererService=g,this.mapService=S,this.layerService=C,this.coordinateSystemService=k,this.cameraService=F;var $=this.mapService.version,X=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],me=[0,0],je;this.rendererService.uniformBuffers[0]||(je=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=je),f.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var _t=f.getLayerConfig().tileOrigin;if(d.coordinateSystemService.refresh(_t),$==="GAODE2.x"){d.setLayerCenter(f),X=d.mapService.map.customCoords.getMVPMatrix(),me=d.mapService.getCustomCoordCenter();var Ot=f.getLayerUniformBuffer();Ot.subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,Ht.Z)(X),(0,Ht.Z)(me))).buffer)})}var nn=d.rendererService.getViewportSize(),Un=nn.width,zn=nn.height,ur=d.generateUBO(X,me,Un,zn),Pr=ur.data,si=ur.uniforms;if(d.layerService.alreadyInRendering&&d.rendererService.uniformBuffers[0]){var kr=d.rendererService.uniformBuffers[0];kr.subData({offset:0,data:Pr})}var hr=d.rendererService.queryVerdorInfo();hr==="WebGL1"&&f.models.forEach(function(Hr){Hr.addUniforms((0,De.Z)((0,De.Z)({},si),{},{u_PickingBuffer:f.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(f.getShaderPickStat())}))})})}},{key:"setLayerCenter",value:function(f){f.coordCenter===void 0&&(f.coordCenter=f.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(f.coordCenter)}},{key:"generateUBO",value:function(f,h,d,g){var S,C=this.cameraService.getProjectionMatrix(),k=this.cameraService.getViewMatrix(),F=this.cameraService.getViewProjectionMatrix(),$=this.cameraService.getModelMatrix(),X=this.coordinateSystemService.getViewportCenterProjection(),me=this.coordinateSystemService.getPixelsPerDegree(),je=this.cameraService.getZoom(),_t=this.coordinateSystemService.getPixelsPerDegree2(),Ot=this.cameraService.getZoomScale(),nn=this.coordinateSystemService.getPixelsPerMeter(),Un=this.coordinateSystemService.getCoordinateSystem(),zn=this.cameraService.getCameraPosition(),ur=window.devicePixelRatio,Pr=this.coordinateSystemService.getViewportCenter(),si=[d,g],kr=this.cameraService.getFocalDistance(),hr=[].concat((0,Ht.Z)(k),(0,Ht.Z)(C),(0,Ht.Z)(F),(0,Ht.Z)($),(0,Ht.Z)(X),(0,Ht.Z)(me),[je],(0,Ht.Z)(_t),[Ot],(0,Ht.Z)(nn),[Un],(0,Ht.Z)(zn),[ur],(0,Ht.Z)(Pr),si,[kr,0,0,0]);return{data:hr,uniforms:(S={},(0,He.Z)(S,Ae.lv.ProjectionMatrix,C),(0,He.Z)(S,Ae.lv.ViewMatrix,k),(0,He.Z)(S,Ae.lv.ViewProjectionMatrix,F),(0,He.Z)(S,Ae.lv.Zoom,je),(0,He.Z)(S,Ae.lv.ZoomScale,Ot),(0,He.Z)(S,Ae.lv.FocalDistance,kr),(0,He.Z)(S,Ae.lv.CameraPosition,zn),(0,He.Z)(S,Ae.kw.CoordinateSystem,Un),(0,He.Z)(S,Ae.kw.ViewportCenter,Pr),(0,He.Z)(S,Ae.kw.ViewportCenterProjection,X),(0,He.Z)(S,Ae.kw.PixelsPerDegree,me),(0,He.Z)(S,Ae.kw.PixelsPerDegree2,_t),(0,He.Z)(S,Ae.kw.PixelsPerMeter,nn),(0,He.Z)(S,Ae.kw.Mvp,f),(0,He.Z)(S,"u_sceneCenterMercator",h),(0,He.Z)(S,"u_ViewportSize",si),(0,He.Z)(S,"u_ModelMatrix",$),(0,He.Z)(S,"u_DevicePixelRatio",ur),S)}}}]),o}(),$n=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f){f.hooks.beforeRender.tap("UpdateModelPlugin",function(){f.layerModel&&f.layerModel.needUpdate().then(function(h){h&&f.renderLayers()})}),f.hooks.afterRender.tap("UpdateModelPlugin",function(){f.layerModelNeedUpdate=!1})}}]),o}(),xr=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"apply",value:function(f,h){var d=this,g=h.styleAttributeService;f.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){d.initStyleAttribute(f,{styleAttributeService:g})}),f.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){f.layerModelNeedUpdate||f.inited&&d.updateStyleAttribute(f,{styleAttributeService:g})})}},{key:"updateStyleAttribute",value:function(f,h){var d=h.styleAttributeService,g=d.getLayerStyleAttributes()||[],S=d.getLayerStyleAttribute("filter");if(S&&S.needRegenerateVertices){f.layerModelNeedUpdate=!0,g.forEach(function(C){return C.needRegenerateVertices=!1});return}g.filter(function(C){return C.needRegenerateVertices}).forEach(function(C){d.updateAttributeByFeatureRange(C.name,f.getEncodedData(),C.featureRange.startIndex,C.featureRange.endIndex,f),C.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(f,h){var d=h.styleAttributeService,g=d.getLayerStyleAttributes()||[];g.filter(function(S){return S.needRegenerateVertices}).forEach(function(S){d.updateAttributeByFeatureRange(S.name,f.getEncodedData(),S.featureRange.startIndex,S.featureRange.endIndex),S.needRegenerateVertices=!1})}}]),o}();function Lr(){return[new Z,new Ln,new Sp,new Eh,new uc,new By,new xr,new $n,new ie,new rr,new Ny,new L,new zt,new d1]}var Zr,Jr=(Zr={},(0,He.Z)(Zr,Ae.h0.additive,{enable:!0,func:{srcRGB:Ae.gl.ONE,dstRGB:Ae.gl.ONE,srcAlpha:1,dstAlpha:1}}),(0,He.Z)(Zr,Ae.h0.none,{enable:!1}),(0,He.Z)(Zr,Ae.h0.normal,{enable:!0,func:{srcRGB:Ae.gl.SRC_ALPHA,dstRGB:Ae.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,He.Z)(Zr,Ae.h0.subtractive,{enable:!0,func:{srcRGB:Ae.gl.ONE,dstRGB:Ae.gl.ONE,srcAlpha:Ae.gl.ZERO,dstAlpha:Ae.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:Ae.gl.FUNC_SUBTRACT,alpha:Ae.gl.FUNC_SUBTRACT}}),(0,He.Z)(Zr,Ae.h0.max,{enable:!0,func:{srcRGB:Ae.gl.ONE,dstRGB:Ae.gl.ONE},equation:{rgb:Ae.gl.MAX_EXT}}),(0,He.Z)(Zr,Ae.h0.min,{enable:!0,func:{srcRGB:Ae.gl.ONE,dstRGB:Ae.gl.ONE},equation:{rgb:Ae.gl.MIN_EXT}}),Zr),ai=function(){function o(c){(0,Dt.Z)(this,o),this.layer=c}return(0,dn.Z)(o,[{key:"pickRender",value:function(f){var h=this.layer.getContainer(),d=h.layerService,g=this.layer;if(g.tileLayer)return g.tileLayer.pickRender(f);g.hooks.beforePickingEncode.call(),d.renderTileLayerMask(g),g.renderModels({ispick:!0}),g.hooks.afterPickingEncode.call()}},{key:"pick",value:function(){var c=(0,Fe.Z)(B().mark(function h(d,g){var S,C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(S=this.layer.getContainer(),C=S.pickingService,d.type!=="RasterLayer"){F.next=4;break}return F.abrupt("return",this.pickRasterLayer(d,g));case 4:return this.pickRender(g),F.abrupt("return",C.pickFromPickingFBO(d,g));case 6:case"end":return F.stop()}},h,this)}));function f(h,d){return c.apply(this,arguments)}return f}()},{key:"pickRasterLayer",value:function(f,h,d){var g=this.layer.getContainer(),S=g.pickingService,C=g.mapService,k=this.layer.getSource().extent,F=(0,Ve.if)(h.lngLat,k),$={x:h.x,y:h.y,type:h.type,lngLat:h.lngLat,target:h,rasterValue:null},X=d||f;if(F){var me=this.readRasterValue(f,k,C,h.x,h.y);return $.rasterValue=me,S.triggerHoverOnLayer(X,$),!0}else return $.type=h.type==="mousemove"?"mouseout":"un"+h.type,S.triggerHoverOnLayer(X,(0,De.Z)((0,De.Z)({},$),{},{type:"unpick"})),S.triggerHoverOnLayer(X,$),!1}},{key:"readRasterValue",value:function(f,h,d,g,S){var C=f.getSource().data.dataArray[0],k=(0,On.Z)(h,4),F=k[0],$=F===void 0?0:F,X=k[1],me=X===void 0?0:X,je=k[2],_t=je===void 0?10:je,Ot=k[3],nn=Ot===void 0?-10:Ot,Un=d.lngLatToContainer([$,me]),zn=d.lngLatToContainer([_t,nn]),ur=zn.x-Un.x,Pr=Un.y-zn.y,si=[(g-Un.x)/ur,(S-zn.y)/Pr],kr=C.width||1,hr=C.height||1,Hr=Math.floor(si[0]*kr),ha=Math.floor(si[1]*hr),Xa=Math.max(0,ha-1)*kr+Hr,pa=C.data[Xa];return pa}},{key:"selectFeature",value:function(f){var h=this.layer,d=(0,On.Z)(f,3),g=d[0],S=d[1],C=d[2];h.hooks.beforeSelect.call([g,S,C])}},{key:"highlightPickedFeature",value:function(f){var h=(0,On.Z)(f,3),d=h[0],g=h[1],S=h[2];this.layer.hooks.beforeHighlight.call([d,g,S])}},{key:"getFeatureById",value:function(f){return this.layer.getSource().getFeatureById(f)}}]),o}(),Ki=function(){function o(c){(0,Dt.Z)(this,o),this.layer=c;var f=this.layer.getContainer();this.rendererService=f.rendererService}return(0,dn.Z)(o,[{key:"getColorTexture",value:function(f,h){var d=this.getTextureKey(f,h);return this.key===d?this.colorTexture:(this.createColorTexture(f,h),this.key=d,this.colorTexture)}},{key:"createColorTexture",value:function(f,h){var d=this.rendererService.createTexture2D,g=this.getColorRampBar(f,h),S=d({data:new Uint8Array(g.data),width:g.width,height:g.height,flipY:!1,unorm:!0});return this.colorTexture=S,S}},{key:"setColorTexture",value:function(f,h,d){this.key=this.getTextureKey(h,d),this.colorTexture=f}},{key:"destroy",value:function(){var f;(f=this.colorTexture)===null||f===void 0||f.destroy()}},{key:"getColorRampBar",value:function(f,h){switch(f.type){case"cat":return(0,Ve.hj)(f);case"quantize":return(0,Ve.NJ)(f);case"custom":return(0,Ve.Oc)(f,h);case"linear":return(0,Ve.M4)(f,h);default:return(0,Ve.Cl)(f)}}},{key:"getTextureKey",value:function(f,h){var d;return"".concat(f.colors.join("_"),"_").concat(f==null||(d=f.positions)===null||d===void 0?void 0:d.join("_"),"_").concat(f.type,"_").concat(h==null?void 0:h.join("_"))}}]),o}(),ca=["passes"],Ja=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption","pickingEnabled"];function Sa(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=lo(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function lo(o,c){if(o){if(typeof o=="string")return Ca(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return Ca(o,c)}}function Ca(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}function $o(o){var c=Eo();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Eo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Fa=Ve.rU.isEqual,Go=Ve.rU.isFunction,Lo=Ve.rU.isNumber,To=Ve.rU.isObject,ho=Ve.rU.isPlainObject,ws=Ve.rU.isUndefined,Eu=0,cu=function(o){(0,za.Z)(f,o);var c=$o(f);function f(){var h,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Dt.Z)(this,f),h=c.call(this),(0,He.Z)((0,Ti.Z)(h),"id","".concat(Eu++)),(0,He.Z)((0,Ti.Z)(h),"name","".concat(Eu)),(0,He.Z)((0,Ti.Z)(h),"visible",!0),(0,He.Z)((0,Ti.Z)(h),"zIndex",0),(0,He.Z)((0,Ti.Z)(h),"inited",!1),(0,He.Z)((0,Ti.Z)(h),"layerModelNeedUpdate",!1),(0,He.Z)((0,Ti.Z)(h),"pickedFeatureID",null),(0,He.Z)((0,Ti.Z)(h),"selectedFeatureID",null),(0,He.Z)((0,Ti.Z)(h),"styleNeedUpdate",!1),(0,He.Z)((0,Ti.Z)(h),"forceRender",!1),(0,He.Z)((0,Ti.Z)(h),"clusterZoom",0),(0,He.Z)((0,Ti.Z)(h),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,He.Z)((0,Ti.Z)(h),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,He.Z)((0,Ti.Z)(h),"hooks",{init:new su.S$,afterInit:new su.oI,beforeRender:new su.oI,beforeRenderData:new su.bf,afterRender:new su.ni,beforePickingEncode:new su.ni,afterPickingEncode:new su.ni,beforeHighlight:new su.ni(["pickedColor"]),afterHighlight:new su.ni,beforeSelect:new su.ni(["pickedColor"]),afterSelect:new su.ni,beforeDestroy:new su.ni,afterDestroy:new su.ni}),(0,He.Z)((0,Ti.Z)(h),"models",[]),(0,He.Z)((0,Ti.Z)(h),"startInit",!1),(0,He.Z)((0,Ti.Z)(h),"layerChildren",[]),(0,He.Z)((0,Ti.Z)(h),"masks",[]),(0,He.Z)((0,Ti.Z)(h),"configService",Ae.cO),(0,He.Z)((0,Ti.Z)(h),"animateOptions",{enable:!1}),(0,He.Z)((0,Ti.Z)(h),"currentPickId",null),(0,He.Z)((0,Ti.Z)(h),"encodeStyleAttribute",{}),(0,He.Z)((0,Ti.Z)(h),"enableShaderEncodeStyles",[]),(0,He.Z)((0,Ti.Z)(h),"enableDataEncodeStyles",[]),(0,He.Z)((0,Ti.Z)(h),"pendingStyleAttributes",[]),(0,He.Z)((0,Ti.Z)(h),"scaleOptions",{}),(0,He.Z)((0,Ti.Z)(h),"animateStatus",!1),(0,He.Z)((0,Ti.Z)(h),"isDestroyed",!1),(0,He.Z)((0,Ti.Z)(h),"uniformBuffers",[]),(0,He.Z)((0,Ti.Z)(h),"encodeDataLength",0),(0,He.Z)((0,Ti.Z)(h),"sourceEvent",function(){h.dataState.dataSourceNeedUpdate=!0;var g=h.getLayerConfig();g&&g.autoFit&&h.fitBounds(g.fitBoundsOptions);var S=h.layerSource.getSourceCfg().autoRender;S&&setTimeout(function(){h.reRender()},10)}),h.name=d.name||h.id,h.zIndex=d.zIndex||0,h.rawConfig=d,h.masks=d.maskLayers||[],h}return(0,dn.Z)(f,[{key:"shaderModuleService",get:function(){return this.container.shaderModuleService}},{key:"cameraService",get:function(){return this.container.cameraService}},{key:"coordinateService",get:function(){return this.container.coordinateSystemService}},{key:"iconService",get:function(){return this.container.iconService}},{key:"fontService",get:function(){return this.container.fontService}},{key:"pickingService",get:function(){return this.container.pickingService}},{key:"rendererService",get:function(){return this.container.rendererService}},{key:"layerService",get:function(){return this.container.layerService}},{key:"debugService",get:function(){return this.container.debugService}},{key:"interactionService",get:function(){return this.container.interactionService}},{key:"mapService",get:function(){return this.container.mapService}},{key:"normalPassFactory",get:function(){return this.container.normalPassFactory}},{key:"addMask",value:function(d){this.masks.push(d),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}},{key:"removeMask",value:function(d){var g=this.masks.indexOf(d);g>-1&&this.masks.splice(g,1),this.updateLayerConfig({maskLayers:this.masks})}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(d){this.masks.push(d)}},{key:"removeMaskLayer",value:function(d){var g=this.masks.indexOf(d);g>-1&&this.masks.splice(g,1),d.destroy()}},{key:"getAttribute",value:function(d){return this.styleAttributeService.getLayerStyleAttribute(d)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(d){var g=this;if(Object.keys(d).map(function(C){C in g.rawConfig&&(g.rawConfig[C]=d[C])}),!this.startInit)this.needUpdateConfig=(0,De.Z)((0,De.Z)({},this.needUpdateConfig),d);else{var S=this.container.id;this.configService.setLayerConfig(S,this.id,(0,De.Z)((0,De.Z)((0,De.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),d)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(d){this.container=d}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(d){return this.plugins.push(d),this}},{key:"init",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S=this,C,k,F,$,X,me,je;return B().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:C=this.container.id,this.startInit=!0,this.configService.setLayerConfig(C,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,k=this.getLayerConfig(),F=k.enableMultiPassRenderer,$=k.passes,F&&$!==null&&$!==void 0&&$.length&&$.length>0&&this.mapService.on("mapAfterFrameChange",function(){S.renderLayers()}),this.postProcessingPassFactory=this.container.postProcessingPassFactory,this.styleAttributeService=this.container.styleAttributeService,F&&(this.multiPassRenderer=this.container.multiPassRenderer,this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(nn){var Un=nn.attributeName,zn=nn.attributeField,ur=nn.attributeValues,Pr=nn.updateOptions;S.styleAttributeService.updateStyleAttribute(Un,{scale:(0,De.Z)({field:zn},S.splitValuesAndCallbackInAttribute(ur,zn?void 0:S.getLayerConfig()[Un]))},Pr)}),this.pendingStyleAttributes=[],this.plugins=Lr(),X=Sa(this.plugins);try{for(X.s();!(me=X.n()).done;)je=me.value,je.apply(this,this.container)}catch(nn){X.e(nn)}finally{X.f()}return this.layerPickService=new ai(this),this.textureService=new Ki(this),this.log(Ae.Or.LayerInitStart),Ot.next=19,this.hooks.init.promise();case 19:this.log(Ae.Or.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 24:case"end":return Ot.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"log",value:function(d){var g,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var C="".concat(this.id,".").concat(S,".").concat(d),k={id:this.id,type:this.type};(g=this.debugService)===null||g===void 0||g.log(C,k)}}},{key:"updateModelData",value:function(d){d.attributes&&d.elements?this.models.map(function(g){g.updateAttributesAndElements(d.attributes,d.elements)}):console.warn("data error")}},{key:"setLayerPickService",value:function(d){this.layerPickService=d}},{key:"prepareBuildModel",value:function(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});var d=this.getLayerConfig(),g=d.animateOption;g!=null&&g.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(d,g,S){return this.updateStyleAttribute("color",d,g,S),this}},{key:"texture",value:function(d,g,S){return this.updateStyleAttribute("texture",d,g,S),this}},{key:"rotate",value:function(d,g,S){return this.updateStyleAttribute("rotate",d,g,S),this}},{key:"size",value:function(d,g,S){return this.updateStyleAttribute("size",d,g,S),this}},{key:"filter",value:function(d,g,S){var C=this.updateStyleAttribute("filter",d,g,S);return this.dataState.dataSourceNeedUpdate=C&&this.inited,this}},{key:"shape",value:function(d,g,S){this.shapeOption={field:d,values:g};var C=this.updateStyleAttribute("shape",d,g,S);return this.dataState.dataSourceNeedUpdate=C&&this.inited,this}},{key:"label",value:function(d,g,S){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:d,attributeValues:g,updateOptions:S}),this}},{key:"animate",value:function(d){var g={};return To(d)?(g.enable=!0,g=(0,De.Z)((0,De.Z)({},g),d)):g.enable=d,this.updateLayerConfig({animateOption:g}),this}},{key:"source",value:function(d,g){return(d==null?void 0:d.type)==="source"?(this.setSource(d),this):(this.sourceOption={data:d,options:g},this.clusterZoom=0,this)}},{key:"setData",value:function(d,g){var S=this;return this.log(Ae.Or.SourceInitStart,Ae.KD.UPDATE),this.inited?this.layerSource.setData(d,g):this.on("inited",function(){S.layerSource.setData(d,g)}),this.layerSource.once("update",function(){S.log(Ae.Or.SourceInitEnd,Ae.KD.UPDATE)}),this}},{key:"style",value:function(d){var g=this,S=d.passes,C=(0,Rl.Z)(d,ca);S&&U(S).forEach(function(F){var $=g.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(F[0]);$&&$.updateOptions(F[1])}),C.borderColor&&(C.stroke=C.borderColor),C.borderWidth&&(C.strokeWidth=C.borderWidth);var k=C;return Object.keys(C).forEach(function(F){var $=C[F];Array.isArray($)&&$.length===2&&!Lo($[0])&&!Lo($[1])&&(k[F]={field:$[0],value:$[1]})}),this.encodeStyle(k),this.updateLayerConfig(k),this}},{key:"encodeStyle",value:function(d){var g=this;Object.keys(d).forEach(function(S){[].concat((0,Ht.Z)(g.enableShaderEncodeStyles),(0,Ht.Z)(g.enableDataEncodeStyles)).includes(S)&&ho(d[S])&&(d[S].field||d[S].value)&&!Fa(g.encodeStyleAttribute[S],d[S])?(g.encodeStyleAttribute[S]=d[S],g.updateStyleAttribute(S,d[S].field,d[S].value),g.inited&&(g.dataState.dataMappingNeedUpdate=!0)):g.encodeStyleAttribute[S]&&(delete g.encodeStyleAttribute[S],g.dataState.dataSourceNeedUpdate=!0)})}},{key:"scale",value:function(d,g){var S=(0,De.Z)({},this.scaleOptions);if(To(d)?this.scaleOptions=(0,De.Z)((0,De.Z)({},this.scaleOptions),d):this.scaleOptions[d]=g,this.styleAttributeService&&!Fa(S,this.scaleOptions)){var C=To(d)?d:(0,He.Z)({},d,g);this.styleAttributeService.updateScaleAttribute(C)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"prerender",value:function(){}},{key:"render",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(d),this))}},{key:"renderMultiPass",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){C.next=2;break}return C.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){C.next=7;break}return C.next=5,this.multiPassRenderer.render();case 5:C.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"active",value:function(d){var g={};return g.enableHighlight=To(d)?!0:d,To(d)?(g.enableHighlight=!0,d.color&&(g.highlightColor=d.color),d.mix&&(g.activeMix=d.mix)):g.enableHighlight=!!d,this.updateLayerConfig(g),this}},{key:"setActive",value:function(d,g){var S=this;if(To(d)){var C=d.x,k=C===void 0?0:C,F=d.y,$=F===void 0?0:F;this.updateLayerConfig({highlightColor:To(g)?g.color:this.getLayerConfig().highlightColor,activeMix:To(g)?g.mix:this.getLayerConfig().activeMix}),this.pick({x:k,y:$})}else this.updateLayerConfig({pickedFeatureID:d,highlightColor:To(g)?g.color:this.getLayerConfig().highlightColor,activeMix:To(g)?g.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,Ve.Z6)(d)).then(function(){setTimeout(function(){S.reRender()},1)})}},{key:"select",value:function(d){var g={};return g.enableSelect=To(d)?!0:d,To(d)?(g.enableSelect=!0,d.color&&(g.selectColor=d.color),d.mix&&(g.selectMix=d.mix)):g.enableSelect=!!d,this.updateLayerConfig(g),this}},{key:"setSelect",value:function(d,g){var S=this;if(To(d)){var C=d.x,k=C===void 0?0:C,F=d.y,$=F===void 0?0:F;this.updateLayerConfig({selectColor:To(g)?g.color:this.getLayerConfig().selectColor,selectMix:To(g)?g.mix:this.getLayerConfig().selectMix}),this.pick({x:k,y:$})}else this.updateLayerConfig({pickedFeatureID:d,selectColor:To(g)?g.color:this.getLayerConfig().selectColor,selectMix:To(g)?g.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Ve.Z6)(d)).then(function(){setTimeout(function(){S.reRender()},1)})}},{key:"setBlend",value:function(d){return this.updateLayerConfig({blend:d}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(d){return this.zIndex=d,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(d){this.currentPickId=d}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(d){this.selectedFeatureID=d}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var d=this.mapService.getZoom(),g=this.getLayerConfig(),S=g.visible,C=g.minZoom,k=C===void 0?-1/0:C,F=g.maxZoom,$=F===void 0?1/0:F;return!!S&&d>=k&&d<$}},{key:"setMultiPass",value:function(d,g){if(this.updateLayerConfig({enableMultiPassRenderer:d}),g&&this.updateLayerConfig({passes:g}),d){var S=this.getLayerConfig(),C=S.passes,k=C===void 0?[]:C;this.multiPassRenderer=H(this,k,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var F=this.rendererService.getViewportSize(),$=F.width,X=F.height;this.multiPassRenderer.resize($,X)}return this}},{key:"setMinZoom",value:function(d){return this.updateLayerConfig({minZoom:d}),this}},{key:"getMinZoom",value:function(){var d=this.getLayerConfig(),g=d.minZoom;return g}},{key:"getMaxZoom",value:function(){var d=this.getLayerConfig(),g=d.maxZoom;return g}},{key:"get",value:function(d){var g=this.getLayerConfig();return g[d]}},{key:"setMaxZoom",value:function(d){return this.updateLayerConfig({maxZoom:d}),this}},{key:"setAutoFit",value:function(d){return this.updateLayerConfig({autoFit:d}),this}},{key:"fitBounds",value:function(d){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var g=this.getSource(),S=g.extent,C=S.some(function(k){return Math.abs(k)===1/0});return C?this:(this.mapService.fitBounds([[S[0],S[1]],[S[2],S[3]]],d),this)}},{key:"destroy",value:function(){var d,g,S,C,k,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.isDestroyed){(d=this.layerModel)===null||d===void 0||d.uniformBuffers.forEach(function(me){me.destroy()}),this.layerChildren.map(function(me){return me.destroy(!1)}),this.layerChildren=[];var $=this.getLayerConfig(),X=$.maskfence;X&&(this.masks.map(function(me){return me.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(g=this.multiPassRenderer)===null||g===void 0||g.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(S=this.layerModel)===null||S===void 0||S.clearModels(F),(C=this.tileLayer)===null||C===void 0||C.destroy(),this.models=[],(k=this.debugService)===null||k===void 0||k.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var d;this.models.forEach(function(g){return g.destroy()}),(d=this.layerModel)===null||d===void 0||d.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(d){return d.needRescale||d.needRemapping||d.needRegenerateVertices}).length}},{key:"setSource",value:function(d){var g=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=d,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var S=this.mapService.getZoom();this.layerSource.updateClusterData(S)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(C){var k=C.type;if(g.coordCenter===void 0){var F,$=g.layerSource.center;g.coordCenter=$,(F=g.mapService)!==null&&F!==void 0&&F.setCoordCenter&&g.mapService.setCoordCenter($)}if(k==="update"){if(g.tileLayer){g.tileLayer.reload();return}g.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(d){this.encodedData=d,this.encodeDataLength=d.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(d){return this.styleAttributeService.getLayerAttributeScale(d)}},{key:"getLegend",value:function(d){var g,S,C,k=this.styleAttributeService.getLayerStyleAttribute(d),F=(k==null||(g=k.scale)===null||g===void 0?void 0:g.scalers)||[];return{type:(S=F[0])===null||S===void 0||(S=S.option)===null||S===void 0?void 0:S.type,field:k==null||(C=k.scale)===null||C===void 0?void 0:C.field,items:this.getLegendItems(d)}}},{key:"getLegendItems",value:function(d){var g=this.styleAttributeService.getLayerAttributeScale(d);if(!g)return[];if(g.invertExtent){var S=g.range().map(function(F){return(0,He.Z)({value:g.invertExtent(F)},d,F)});return S}else if(g.ticks){var C=g.ticks().map(function(F){return(0,He.Z)({value:F},d,g(F))});return C}else if(g!=null&&g.domain){var k=g.domain().filter(function(F){return!ws(F)}).map(function(F){return(0,He.Z)({value:F},d,g(F))});return k}return[]}},{key:"pick",value:function(d){var g=d.x,S=d.y;this.interactionService.triggerHover({x:g,y:S})}},{key:"boxSelect",value:function(d,g){this.pickingService.boxPickLayer(this,d,g)}},{key:"buildLayerModel",value:function(){var h=(0,Fe.Z)(B().mark(function g(S){var C=this,k,F,$,X,me,je,_t,Ot,nn,Un,zn,ur,Pr,si;return B().wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return k=S.moduleName,F=S.vertexShader,$=S.fragmentShader,X=S.inject,me=S.triangulation,je=S.styleOption,_t=S.pickingEnabled,Ot=_t===void 0?!0:_t,nn=(0,Rl.Z)(S,Ja),this.shaderModuleService.registerModule(k,{vs:F,fs:$,inject:X}),Un=this.shaderModuleService.getModule(k),zn=Un.vs,ur=Un.fs,Pr=Un.uniforms,si=this.rendererService.createModel,hr.abrupt("return",new Promise(function(Hr){var ha=C.styleAttributeService.createAttributesAndIndices(C.encodedData,me,je,C),Xa=ha.attributes,pa=ha.elements,bo=ha.count,Do=[].concat((0,Ht.Z)(C.layerModel.uniformBuffers),(0,Ht.Z)(C.rendererService.uniformBuffers),[C.getLayerUniformBuffer()]);Ot&&Do.push(C.getPickingUniformBuffer());var so=(0,De.Z)({attributes:Xa,uniforms:Pr,fs:ur,vs:zn,elements:pa,blend:Jr[Ae.h0.normal],uniformBuffers:Do,textures:C.layerModel.textures},nn);bo&&(so.count=bo);var af=si(so);Hr(af)}));case 5:case"end":return hr.stop()}},g,this)}));function d(g){return h.apply(this,arguments)}return d}()},{key:"createAttributes",value:function(d){var g=d.triangulation,S=this.styleAttributeService.createAttributes(this.encodedData,g),C=S.attributes;return C}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(d){var g=this.getLayerConfig(),S=g.enableHighlight,C=S===void 0?!0:S,k=g.enableSelect,F=k===void 0?!0:k,$=this.eventNames().indexOf(d)!==-1||this.eventNames().indexOf("un"+d)!==-1;return(d==="click"||d==="dblclick")&&F&&($=!0),d==="mousemove"&&(C||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&($=!0),this.isVisible()&&$}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return C.stop()}},g)}));function d(){return h.apply(this,arguments)}return d}()},{key:"rebuildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.buildModels();case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"renderMulPass",value:function(){var h=(0,Fe.Z)(B().mark(function g(S){return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,S.render();case 2:case"end":return k.stop()}},g)}));function d(g){return h.apply(this,arguments)}return d}()},{key:"renderModels",value:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(S){S.draw({uniforms:d.layerModel.getUninforms(),blend:d.layerModel.getBlend(),stencil:d.layerModel.getStencil(g),textures:d.layerModel.textures},(g==null?void 0:g.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(d,g,S,C){var k=this.configService.getAttributeConfig(this.id)||{};return Fa(k[d],{field:g,values:S})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(d)!==-1&&this.configService.setAttributeConfig(this.id,(0,He.Z)({},d,{field:g,values:S})),this.startInit?this.styleAttributeService.updateStyleAttribute(d,{scale:(0,De.Z)({field:g},this.splitValuesAndCallbackInAttribute(S,this.getLayerConfig()[g]))},C):this.pendingStyleAttributes.push({attributeName:d,attributeField:g,attributeValues:S,updateOptions:C}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(d){console.warn("empty fn")}},{key:"processData",value:function(d){return d}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return this.models.forEach(function($){return $.destroy()}),this.models=[],this.uniformBuffers.forEach(function($){$.destroy()}),this.uniformBuffers=[],S=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(S),C=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(C),F.next=10,this.layerModel.initModels();case 10:this.models=F.sent;case 11:case"end":return F.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getLayerUniformBuffer",value:function(){return this.uniformBuffers[0]}},{key:"getPickingUniformBuffer",value:function(){return this.uniformBuffers[1]}},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(d){return{values:Go(d)?void 0:d,callback:Go(d)?d:void 0}}}]),f}(If.EventEmitter);function Fu(o,c){return{enable:o,mask:255,func:{cmp:Ae.gl.EQUAL,ref:c?1:0,mask:1}}}function Su(o){return o.maskOperation===Ae.lE.OR?{enable:!0,mask:255,func:{cmp:Ae.gl.ALWAYS,ref:1,mask:255},opFront:{fail:Ae.gl.KEEP,zfail:Ae.gl.REPLACE,zpass:Ae.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:o.stencilType===Ae.yn.SINGLE||o.stencilIndex===0?Ae.gl.ALWAYS:Ae.gl.LESS,ref:o.stencilType===Ae.yn.SINGLE?1:o.stencilIndex===0?2:1,mask:255},opFront:{fail:Ae.gl.KEEP,zfail:Ae.gl.REPLACE,zpass:Ae.gl.REPLACE}}}var ol={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},sl={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function lc(o){var c="";return Object.keys(o).forEach(function(f){var h=o[f];Array.isArray(h)?c+="vec".concat(h.length," ").concat(f,`;
`):c+="flot ".concat(f,`;
`)}),c}function jc(o){return Math.max(Math.ceil(o/4)*4,4)}var Fl={opacity:_e.OPACITY,stroke:_e.STROKE,offsets:_e.OFFSETS,rotation:_e.ROTATION,extrusionBase:_e.EXTRUSION_BASE,thetaOffset:15},gs=function(){function o(c){(0,Dt.Z)(this,o),(0,He.Z)(this,"uniformBuffers",[]),(0,He.Z)(this,"textures",[]),(0,He.Z)(this,"preStyleAttribute",{}),(0,He.Z)(this,"encodeStyleAttribute",{}),this.layer=c,this.configService=c.getContainer().globalConfigService,this.rendererService=c.getContainer().rendererService,this.pickingService=c.getContainer().pickingService,this.shaderModuleService=c.getContainer().shaderModuleService,this.styleAttributeService=c.getContainer().styleAttributeService,this.mapService=c.getContainer().mapService,this.iconService=c.getContainer().iconService,this.fontService=c.getContainer().fontService,this.cameraService=c.getContainer().cameraService,this.layerService=c.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var f=this.rendererService.createTexture2D;this.createTexture2D=f}return(0,dn.Z)(o,[{key:"getBlend",value:function(){var f=this.layer.getLayerConfig(),h=f.blend,d=h===void 0?"normal":h;return Jr[Ae.h0[d]]}},{key:"getStencil",value:function(f){var h=this.layer.getLayerConfig(),d=h.mask,g=d===void 0?!1:d,S=h.maskInside,C=S===void 0?!0:S,k=h.enableMask,F=h.maskOperation,$=F===void 0?Ae.lE.AND:F;if(this.layer.type==="MaskLayer")return Su({isStencil:!0,stencilType:Ae.yn.SINGLE});if(f.isStencil)return Su((0,De.Z)((0,De.Z)({},f),{},{maskOperation:$}));var X=g||k&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return Fu(X,C)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){var f=this.getCommonUniformsInfo(),h=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();var d=(0,De.Z)((0,De.Z)({},h.uniformsOption),f.uniformsOption);return!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(d.u_texture=this.textures[0]),d}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var c=(0,Fe.Z)(B().mark(function h(){return B().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",!1);case 1:case"end":return g.stop()}},h)}));function f(){return c.apply(this,arguments)}return f}()},{key:"buildModels",value:function(){var c=(0,Fe.Z)(B().mark(function h(){return B().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return g.stop()}},h)}));function f(){return c.apply(this,arguments)}return f}()},{key:"initModels",value:function(){var c=(0,Fe.Z)(B().mark(function h(){return B().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return g.stop()}},h)}));function f(){return c.apply(this,arguments)}return f}()},{key:"clearModels",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"prerender",value:function(){}},{key:"render",value:function(f){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(f){return[f.enable?0:1,f.duration||4,f.interval||.2,f.trailLength||.1]}},{key:"startModelAnimate",value:function(){var f=this.layer.getLayerConfig(),h=f.animateOption;h.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var f=this.layer.encodeStyleAttribute,h="",d=[];this.layer.enableShaderEncodeStyles.forEach(function(C){f[C]?h+="#define USE_ATTRIBUTE_".concat(C.toUpperCase(),` 0.0; 

`):d.push("  ".concat(sl[C]," u_").concat(C,";"));var k=Fl[C];!k&&C==="THETA_OFFSET"&&(k=15),h+=`
          #ifdef USE_ATTRIBUTE_`.concat(C.toUpperCase(),`
          layout(location = `).concat(Fl[C],") in ").concat(sl[C]," a_").concat(C.charAt(0).toUpperCase()+C.slice(1),`;
        #endif

        `)});var g=d.length?`
layout(std140) uniform AttributeUniforms {
`.concat(d.join(`
`),`
};
    `):"";h+=g;var S="";return this.layer.enableShaderEncodeStyles.forEach(function(C){S+=`

    #ifdef USE_ATTRIBUTE_`.concat(C.toUpperCase(),`
      `).concat(sl[C]," ").concat(C,"  = a_").concat(C.charAt(0).toUpperCase()+C.slice(1),`;
    #else
      `).concat(sl[C]," ").concat(C," = u_").concat(C,`;
    #endif

    `)}),{"vs:#decl":h,"fs:#decl":g,"vs:#main-start":S}}},{key:"getStyleAttribute",value:function(){var f=this,h={};return this.layer.enableShaderEncodeStyles.forEach(function(d){if(!f.layer.encodeStyleAttribute[d]){var g=f.layer.getLayerConfig()[d],S=typeof g=="undefined"?ol[d]:g;d==="stroke"&&(S=(0,Ve.CI)(S)),h["u_"+d]=S}}),h}},{key:"registerStyleAttribute",value:function(){var f=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(h){var d=Ye(h);d&&(f.styleAttributeService.registerStyleAttribute(d),d.descriptor&&(d.descriptor.shaderLocation=Fl[h]))})}},{key:"updateEncodeAttribute",value:function(f,h){this.encodeStyleAttribute[f]=h}},{key:"initUniformsBuffer",value:function(){var f=this.getUniformsBufferInfo(this.getStyleAttribute()),h=this.getCommonUniformsInfo();f.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(jc(f.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),h.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(jc(h.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}},{key:"getUniformsBufferInfo",value:function(f){var h=0,d=[];return Object.values(f).forEach(function(g){Array.isArray(g)?(d.push.apply(d,(0,Ht.Z)(g)),h+=g.length):typeof g=="number"?(d.push(g),h+=1):typeof g=="boolean"&&(d.push(Number(g)),h+=1)}),{uniformsOption:f,uniformsLength:h,uniformsArray:d}}},{key:"getCommonUniformsInfo",value:function(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}},{key:"updateStyleUnifoms",value:function(){var f,h,d=this.getUniformsBufferInfo(this.getStyleAttribute()),g=d.uniformsArray,S=this.getCommonUniformsInfo(),C=S.uniformsArray;(f=this.attributeUnifoms)===null||f===void 0||f.subData({offset:0,data:new Uint8Array(new Float32Array(g).buffer)}),(h=this.commonUnifoms)===null||h===void 0||h.subData({offset:0,data:new Uint8Array(new Float32Array(C).buffer)})}}]),o}(),gl=D(9187),Cu=D.n(gl),zo=100,fu=36,Io=40;function xs(o){return o/180*Math.acos(-1)}function tf(o){var c=xs(o[0])+Math.PI/2,f=xs(o[1]),h=zo+Math.random()*.4,d=h*Math.cos(f)*Math.cos(c),g=h*Math.cos(f)*Math.sin(c),S=h*Math.sin(f);return[g,S,d]}function au(o,c){var f=mat4.create(),h=mat4.create(),d=vec3.fromValues(0,1,0),g=vec3.fromValues(0,0,0);c=c||{},o=typeof o!="undefined"?o:1;for(var S=typeof c.segments!="undefined"?c.segments:32,C=2+S,k=2*C,F=[],$=[],X=[],me=[],je=[],_t=[],Ot=0;Ot<=C;Ot++){for(var nn=Ot/C,Un=nn*Math.PI,zn=0;zn<=k;zn++){var ur=zn/k,Pr=ur*Math.PI*2;mat4.identity(h),mat4.rotateZ(h,h,-Un),mat4.identity(f),mat4.rotateY(f,f,Pr),vec3.transformMat4(g,d,h),vec3.transformMat4(g,g,f),vec3.scale(g,g,-o),X.push(g.slice()),me.push.apply(me,_toConsumableArray(g.slice())),vec3.normalize(g,g),je.push.apply(je,_toConsumableArray(g.slice())),_t.push([ur,1-nn]),me.push(ur,1-nn)}if(Ot>0)for(var si=X.length,kr=si-2*(k+1);kr+k+2<si;kr++)F.push([kr,kr+1,kr+k+1]),$.push(kr,kr+1,kr+k+1),F.push([kr+k+1,kr+1,kr+k+2]),$.push(kr+k+1,kr+1,kr+k+2)}return{cells:F,positions:X,uvs:_t,positionsArr:me,indicesArr:$,normalArr:je}}var Na=D(31437),zu=Na.Ue(),Zc=Na.Ue(),Mo=Na.Ue(),Ef=Na.Ue(),Vc=Na.Ue();function gd(o,c,f,h,d){Na.IH(o,f,h),Na.Fv(o,o),c=Na.al(-o[1],o[0]);var g=Na.al(-f[1],f[0]);return[d/Na.AK(c,g),c]}function hu(o,c){return Na.t8(o,-c[1],c[0])}function ih(o,c,f){return Na.lu(o,c,f),Na.Fv(o,o),o}function Oh(o,c){return o[0]===c[0]&&o[1]===c[1]}function km(o){for(var c=new Map,f=0;f<o.length;f++){var h=o[0].toString()+"-"+o[1].toString();c.get(h)?(o.splice(f,1),f++):c.set(h,h)}return o}var wv=function(){function o(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Dt.Z)(this,o),(0,He.Z)(this,"lastFlip",-1),(0,He.Z)(this,"miter",Na.al(0,0)),(0,He.Z)(this,"started",!1),(0,He.Z)(this,"dash",!1),(0,He.Z)(this,"totalDistance",0),(0,He.Z)(this,"currentIndex",0),this.join=c.join||"miter",this.cap=c.cap||"butt",this.miterLimit=c.miterLimit||10,this.thickness=c.thickness||1,this.dash=c.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,dn.Z)(o,[{key:"simpleExtrude",value:function(f){var h=this.complex;if(f.length<=1)return h;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var d=f.length,g=h.startIndex,S=1;S<d;S++){var C=f[S-1],k=f[S],F=S<f.length-1?f[S+1]:null,$=this.simpleSegment(h,g,C,k,F);g+=$}if(this.dash)for(var X=0;X<h.positions.length/6;X++)h.positions[X*6+5]=this.totalDistance;return h.startIndex=h.positions.length/6,h}},{key:"simpleExtrude_gaode2",value:function(f,h){var d=this.complex;if(f.length<=1)return d;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var g=f.length,S=d.startIndex,C=1;C<g;C++){var k,F,$,X=f[C-1];X.push((k=h[C-1][2])!==null&&k!==void 0?k:0);var me=h[C-1],je=f[C];je.push((F=h[C][2])!==null&&F!==void 0?F:0);var _t=h[C],Ot=C<f.length-1?[].concat((0,Ht.Z)(f[C+1]),[($=h[C+1][2])!==null&&$!==void 0?$:0]):null,nn=C<h.length-1?h[C+1]:null,Un=this.simpleSegment(d,S,X,je,Ot,me,_t,nn);S+=Un}if(this.dash)for(var zn=0;zn<d.positions.length/6;zn++)d.positions[zn*6+5]=this.totalDistance;return d.startIndex=d.positions.length/6,d}},{key:"extrude_gaode2",value:function(f,h){var d=this.complex;if(f.length<=1)return d;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var g=f.length,S=d.startIndex,C=1;C<g;C++){var k,F,$,X=f[C-1];X.push((k=h[C-1][2])!==null&&k!==void 0?k:0);var me=h[C-1],je=f[C];je.push((F=h[C][2])!==null&&F!==void 0?F:0);var _t=h[C],Ot=C<f.length-1?[].concat((0,Ht.Z)(f[C+1]),[($=h[C+1][2])!==null&&$!==void 0?$:0]):null,nn=C<h.length-1?h[C+1]:null,Un=this.segment_gaode2(d,S,X,je,Ot,me,_t,nn);S+=Un}if(this.dash)for(var zn=0;zn<d.positions.length/6;zn++)d.positions[zn*6+5]=this.totalDistance;return d.startIndex=d.positions.length/6,d}},{key:"extrude",value:function(f){var h=this.complex;if(f.length<=1)return h;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var d=f.length,g=h.startIndex,S=1;S<d;S++){var C=f[S-1],k=f[S],F=S<f.length-1?f[S+1]:null,$=this.segment(h,g,C,k,F);g+=$}if(this.dash)for(var X=0;X<h.positions.length/6;X++)h.positions[X*6+5]=this.totalDistance;return h.startIndex=h.positions.length/6,h}},{key:"simpleSegment",value:function(f,h,d,g,S){var C=0,k=f.indices,F=f.positions,$=f.normals,X=(0,Ve.Z)([g[0],g[1]]),me=(0,Ve.Z)([d[0],d[1]]);ih(Mo,X,me);var je=0;if(this.dash&&(je=this.lineSegmentDistance(X,me),this.totalDistance+=je),this.normal||(this.normal=Na.Ue(),hu(this.normal,Mo)),this.started||(this.started=!0,this.extrusions(F,$,d,this.normal,this.thickness,this.totalDistance-je)),k.push(h+0,h+1,h+2),!S)hu(this.normal,Mo),this.extrusions(F,$,g,this.normal,this.thickness,this.totalDistance),k.push.apply(k,(0,Ht.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),C+=2;else{var _t=(0,Ve.Z)([S[0],S[1]]);Oh(X,_t)&&Na.IH(_t,X,Na.Fv(_t,Na.$X(_t,X,me))),ih(Ef,_t,X);var Ot=gd(Vc,Na.Ue(),Mo,Ef,this.thickness),nn=(0,On.Z)(Ot,2),Un=nn[0],zn=nn[1],ur=Na.AK(Vc,this.normal)<0?-1:1;this.extrusions(F,$,g,zn,Un,this.totalDistance),k.push.apply(k,(0,Ht.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),ur=-1,Na.JG(this.normal,zn),C+=2,this.lastFlip=ur}return C}},{key:"segment_gaode2",value:function(f,h,d,g,S,C,k,F){var $=0,X=f.indices,me=f.positions,je=f.normals,_t=this.cap==="square",Ot=this.join==="bevel",nn=(0,Ve.Z)([k[0],k[1]]),Un=(0,Ve.Z)([C[0],C[1]]);ih(Mo,g,d);var zn=0;if(this.dash&&(zn=this.lineSegmentDistance(nn,Un),this.totalDistance+=zn),this.normal||(this.normal=Na.Ue(),hu(this.normal,Mo)),!this.started)if(this.started=!0,_t){var ur=Na.Ue(),Pr=Na.Ue();Na.IH(ur,this.normal,Mo),Na.IH(Pr,this.normal,Mo),je.push(Pr[0],Pr[1],0),je.push(ur[0],ur[1],0),me.push(d[0],d[1],d[2]|0,this.totalDistance-zn,-this.thickness,d[2]|0),this.complex.indexes.push(this.currentIndex),me.push(d[0],d[1],d[2]|0,this.totalDistance-zn,this.thickness,d[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(me,je,d,this.normal,this.thickness,this.totalDistance-zn);if(X.push(h+0,h+1,h+2),S){Oh(g,S)&&Na.IH(S,g,Na.Fv(S,Na.$X(S,g,d))),ih(Ef,S,g);var hr=gd(Vc,Na.Ue(),Mo,Ef,this.thickness),Hr=(0,On.Z)(hr,2),ha=Hr[0],Xa=Hr[1],pa=Na.AK(Vc,this.normal)<0?-1:1,bo=Ot;if(!bo&&this.join==="miter"){var Do=ha;Do>this.miterLimit&&(bo=!0)}bo?(je.push(this.normal[0],this.normal[1],0),je.push(Xa[0],Xa[1],0),me.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*pa,g[2]|0),this.complex.indexes.push(this.currentIndex),me.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness*pa,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,X.push.apply(X,(0,Ht.Z)(this.lastFlip!==-pa?[h,h+2,h+3]:[h+2,h+1,h+3])),X.push(h+2,h+3,h+4),hu(zu,Ef),Na.JG(this.normal,zu),je.push(this.normal[0],this.normal[1],0),me.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*pa,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,$+=3):(this.extrusions(me,je,g,Xa,ha,this.totalDistance),X.push.apply(X,(0,Ht.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),pa=-1,Na.JG(this.normal,Xa),$+=2),this.lastFlip=pa}else{if(hu(this.normal,Mo),_t){var si=Na.Ue(),kr=Na.Ue();Na.lu(kr,Mo,this.normal),Na.IH(si,Mo,this.normal),je.push(kr[0],kr[1],0),je.push(si[0],si[1],0),me.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),me.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(me,je,g,this.normal,this.thickness,this.totalDistance);X.push.apply(X,(0,Ht.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),$+=2}return $}},{key:"segment",value:function(f,h,d,g,S){var C=0,k=f.indices,F=f.positions,$=f.normals,X=this.cap==="square",me=this.join==="bevel",je=(0,Ve.Z)([g[0],g[1]]),_t=(0,Ve.Z)([d[0],d[1]]);ih(Mo,je,_t);var Ot=0;if(this.dash&&(Ot=this.lineSegmentDistance(je,_t),this.totalDistance+=Ot),this.normal||(this.normal=Na.Ue(),hu(this.normal,Mo)),!this.started)if(this.started=!0,X){var nn=Na.Ue(),Un=Na.Ue();Na.IH(nn,this.normal,Mo),Na.IH(Un,this.normal,Mo),$.push(Un[0],Un[1],0),$.push(nn[0],nn[1],0),F.push(d[0],d[1],d[2]|0,this.totalDistance-Ot,-this.thickness,d[2]|0),this.complex.indexes.push(this.currentIndex),F.push(d[0],d[1],d[2]|0,this.totalDistance-Ot,this.thickness,d[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(F,$,d,this.normal,this.thickness,this.totalDistance-Ot);if(k.push(h+0,h+1,h+2),S){var Pr=(0,Ve.Z)([S[0],S[1]]);Oh(je,Pr)&&Na.IH(Pr,je,Na.Fv(Pr,Na.$X(Pr,je,_t))),ih(Ef,Pr,je);var si=gd(Vc,Na.Ue(),Mo,Ef,this.thickness),kr=(0,On.Z)(si,2),hr=kr[0],Hr=kr[1],ha=Na.AK(Vc,this.normal)<0?-1:1,Xa=me;if(!Xa&&this.join==="miter"){var pa=hr;pa>this.miterLimit&&(Xa=!0)}Xa?($.push(this.normal[0],this.normal[1],0),$.push(Hr[0],Hr[1],0),F.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*ha,g[2]|0),this.complex.indexes.push(this.currentIndex),F.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness*ha,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,k.push.apply(k,(0,Ht.Z)(this.lastFlip!==-ha?[h,h+2,h+3]:[h+2,h+1,h+3])),k.push(h+2,h+3,h+4),hu(zu,Ef),Na.JG(this.normal,zu),$.push(this.normal[0],this.normal[1],0),F.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*ha,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,C+=3):(this.extrusions(F,$,g,Hr,hr,this.totalDistance),k.push.apply(k,(0,Ht.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),ha=-1,Na.JG(this.normal,Hr),C+=2),this.lastFlip=ha}else{if(hu(this.normal,Mo),X){var zn=Na.Ue(),ur=Na.Ue();Na.lu(ur,Mo,this.normal),Na.IH(zn,Mo,this.normal),$.push(ur[0],ur[1],0),$.push(zn[0],zn[1],0),F.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),F.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(F,$,g,this.normal,this.thickness,this.totalDistance);k.push.apply(k,(0,Ht.Z)(this.lastFlip===1?[h,h+2,h+3]:[h+2,h+1,h+3])),C+=2}return C}},{key:"extrusions",value:function(f,h,d,g,S,C){h.push(g[0],g[1],0),h.push(g[0],g[1],0),f.push(d[0],d[1],d[2]|0,C,-S,d[2]|0),this.complex.indexes.push(this.currentIndex),f.push(d[0],d[1],d[2]|0,C,S,d[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(f,h){var d=h[0]-f[0],g=h[1]-f[1];return Math.sqrt(d*d+g*g)}}]),o}(),Gs=D(77160);function Tv(o){var c=o[0][0],f=o[0][o[0].length-1];c[0]===f[0]&&c[1]===f[1]&&(o[0]=o[0].slice(0,o[0].length-1));for(var h=o[0].length,d=earcut.flatten(o),g=d.vertices,S=d.dimensions,C=[],k=[],F=0;F<g.length/S;F++)S===2?C.push(g[F*2],g[F*2+1],1):C.push(g[F*3],g[F*3+1],1);var $=earcut(d.vertices,d.holes,d.dimensions);k.push.apply(k,_toConsumableArray($));for(var X=function(){var _t=d.vertices.slice(me*S,(me+1)*S),Ot=d.vertices.slice((me+1)*S,(me+2)*S);Ot.length===0&&(Ot=d.vertices.slice(0,S));var nn=C.length/3;C.push(_t[0],_t[1],1,Ot[0],Ot[1],1,_t[0],_t[1],0,Ot[0],Ot[1],0),k.push.apply(k,_toConsumableArray([0,2,1,2,3,1].map(function(Un){return Un+nn})))},me=0;me<h;me++)X();return{positions:C,index:k}}function Pg(o){var c=earcut.flatten(o),f=earcut(c.vertices,c.holes,c.dimensions);return{positions:c.vertices,index:f}}function Ig(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=o[0][0],h=o[0][o[0].length-1];f[0]===h[0]&&f[1]===h[1]&&(o[0]=o[0].slice(0,o[0].length-1));for(var d=o[0].length,g=Cu().flatten(o),S=g.vertices,C=g.dimensions,k=[],F=[],$=[],X=0;X<S.length/C;X++)k.push(S[X*C],S[X*C+1],1,-1,-1),$.push(0,0,1);var me=Cu()(g.vertices,g.holes,g.dimensions);F.push.apply(F,(0,Ht.Z)(me));for(var je=function(){var nn=g.vertices.slice(_t*C,(_t+1)*C),Un=g.vertices.slice((_t+1)*C,(_t+2)*C);Un.length===0&&(Un=g.vertices.slice(0,C));var zn=k.length/5;k.push(nn[0],nn[1],1,0,0,Un[0],Un[1],1,.1,0,nn[0],nn[1],0,0,.8,Un[0],Un[1],0,.1,.8);var ur=U0([Un[0],Un[1],1],[nn[0],nn[1],0],[nn[0],nn[1],1],c);$.push.apply($,(0,Ht.Z)(ur).concat((0,Ht.Z)(ur),(0,Ht.Z)(ur),(0,Ht.Z)(ur))),F.push.apply(F,(0,Ht.Z)([1,2,0,3,2,1].map(function(Pr){return Pr+zn})))},_t=0;_t<d;_t++)je();return{positions:k,index:F,normals:$}}function U0(o,c,f){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=Gs.create(),g=Gs.create(),S=Gs.create();h&&(o=(0,Ve.vP)(o),c=(0,Ve.vP)(c),f=(0,Ve.vP)(f));var C=Gs.fromValues.apply(Gs,(0,Ht.Z)(o)),k=Gs.fromValues.apply(Gs,(0,Ht.Z)(c)),F=Gs.fromValues.apply(Gs,(0,Ht.Z)(f));Gs.sub(d,F,k),Gs.sub(g,C,k),Gs.cross(S,d,g);var $=Gs.create();return Gs.normalize($,S),$}var Sf,Av=function(o){return o.CYLINDER="cylinder",o.SQUARECOLUMN="squareColumn",o.TRIANGLECOLUMN="triangleColumn",o.HEXAGONCOLUMN="hexagonColumn",o.PENTAGONCOLUMN="pentagonColumn",o}({}),o0=function(o){return o.CIRCLE="circle",o.SQUARE="square",o.TRIANGLE="triangle",o.HEXAGON="hexagon",o.PENTAGON="pentagon",o}({});function Mh(o){for(var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=Math.PI*2/o,h=[],d=0;d<o;d++)h.push(f*d+c*Math.PI/12);var g=h.map(function(S){var C=Math.sin(S+Math.PI/4),k=Math.cos(S+Math.PI/4);return[C,k,0]});return g}function Zf(){return Mh(30)}function s0(){return Mh(4)}function wp(){return Mh(3)}function j0(){return Mh(6,1)}function Zd(){return Mh(5)}var u0=(Sf={},(0,He.Z)(Sf,o0.CIRCLE,Zf),(0,He.Z)(Sf,o0.HEXAGON,j0),(0,He.Z)(Sf,o0.TRIANGLE,wp),(0,He.Z)(Sf,o0.SQUARE,s0),(0,He.Z)(Sf,o0.PENTAGON,Zd),(0,He.Z)(Sf,Av.CYLINDER,Zf),(0,He.Z)(Sf,Av.HEXAGONCOLUMN,j0),(0,He.Z)(Sf,Av.TRIANGLECOLUMN,wp),(0,He.Z)(Sf,Av.SQUARECOLUMN,s0),(0,He.Z)(Sf,Av.PENTAGONCOLUMN,Zd),Sf),tv={};function Cv(o){var c=(0,Ve.SI)(o.coordinates);return{vertices:[].concat((0,Ht.Z)(c),(0,Ht.Z)(c),(0,Ht.Z)(c),(0,Ht.Z)(c)),indices:[0,1,2,2,3,0],size:c.length}}function l0(o){var c=(0,Ve.SI)(o.coordinates),f=tf(c);return{vertices:[].concat((0,Ht.Z)(f),(0,Ht.Z)(f),(0,Ht.Z)(f),(0,Ht.Z)(f)),indices:[0,1,2,2,3,0],size:f.length}}function Z0(o){var c=o.shape,f=Tl(c,!1),h=f.positions,d=f.index,g=f.normals;return{vertices:h,indices:d,normals:g,size:5}}function kg(o){var c=(0,Ve.SI)(o.coordinates);return{vertices:(0,Ht.Z)(c),indices:[0],size:c.length}}function Lm(o){var c=o.coordinates,f=o.originCoordinates,h=o.version,d=new wv({dash:!0,join:"bevel"});if(h==="GAODE2.x"){var g=c;Array.isArray(g[0][0])||(g=[c]);var S=f;Array.isArray(S[0][0])||(S=[f]);for(var C=0;C<g.length;C++){var k=g[C],F=S[C];d.extrude_gaode2(k,F)}}else{var $=c;$[0]&&!Array.isArray($[0][0])&&($=[c]),$.forEach(function(me){d.extrude(me)})}var X=d.complex;return{vertices:X.positions,indices:X.indices,normals:X.normals,indexes:X.indexes,size:6}}function Lg(o){var c=o.coordinates.flat(),f=1,h=1;return{vertices:[1,0,0].concat(_toConsumableArray(c),[1,2,-3],_toConsumableArray(c),[1,1,-3],_toConsumableArray(c),[0,1,0],_toConsumableArray(c),[0,0,0],_toConsumableArray(c),[1,0,0],_toConsumableArray(c),[1,2,-3],_toConsumableArray(c),[1,1,-3],_toConsumableArray(c),[0,1,0],_toConsumableArray(c),[0,0,0],_toConsumableArray(c)),normals:[-f,2*h,1,2*h,-h,1,h,-h,1,h,-h,1,-f,-h,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function Dm(o){var c=o.coordinates,f=o.originCoordinates,h=[];if(!Array.isArray(c[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var d=Mv(c,f),g=d.results,S=d.totalDistance;return g.map(function(C){h.push(C[0],C[1],C[2],C[3],0,S)}),{vertices:h,indices:[],normals:[],size:6,count:g.length}}function p1(o){var c=o.coordinates,f=[];if(!Array.isArray(c[0]))return{vertices:[],indices:[],size:4,count:0};var h=V0(c),d=h.results;return d.map(function(g){f.push(g[0],g[1],g[2],g[3])}),{vertices:f,indices:[],size:4,count:d.length}}function Ov(o,c){var f=c[0]-o[0],h=c[1]-o[1];return Math.sqrt(f*f+h*h)}function Vd(o,c){return o.length<3&&o.push(0),c!==void 0&&o.push(c),o}function Mv(o,c){var f=o,h=c||o;Array.isArray(f)&&Array.isArray(f[0])&&Array.isArray(f[0][0])&&(f=c.flat(),h=c.flat());var d=0;if(f.length<2)return{results:f,totalDistance:0};var g=[],S=Vd(f[0],d);g.push(S);for(var C=1;C<f.length-1;C++){var k=Ov((0,Ve.Z)(h[C-1]),(0,Ve.Z)(h[C]));d+=k;var F=Vd(f[C],d);g.push(F),g.push(F)}var $=Ov((0,Ve.Z)(h[h.length-2]),(0,Ve.Z)(h[h.length-1]));return d+=$,g.push(Vd(f[f.length-1],d)),{results:g,totalDistance:d}}function V0(o){if(o.length<2)return{results:o};var c=[],f=Vd(o[0]);c.push(f);for(var h=1;h<o.length-1;h++){var d=Vd(o[h]);c.push(d),c.push(d)}return c.push(Vd(o[o.length-1])),{results:c}}function nv(o){var c=o.coordinates,f=Cu().flatten(c),h=f.vertices,d=f.dimensions,g=f.holes;return{indices:Cu()(h,g,d),vertices:h,size:d}}function Fy(o){var c=o.coordinates,f=Cu().flatten(c),h=f.vertices,d=f.dimensions,g=f.holes;return{indices:Cu()(h,g,d),vertices:v1(h),size:d+4}}function v1(o){for(var c=[],f=(0,Ve.Rx)(o),h=f.center,d=f.radius,g=0;g<o.length;g+=2){var S=o[g],C=o[g+1];c.push.apply(c,[S,C,0].concat((0,Ht.Z)(h),[d]))}return c}function zy(o){var c=o.coordinates,f=Ig(c,!0),h=f.positions,d=f.index,g=f.normals;return{vertices:h,indices:d,normals:g,size:5}}function $E(o){var c=o.shape,f=c0(c),h=f.positions,d=f.index;return{vertices:h,indices:d,size:3}}function Nm(o){var c=o.coordinates,f=[].concat((0,Ht.Z)(c[0]),[0,0,1,c[1][0],c[0][1],0,1,1],(0,Ht.Z)(c[1]),[0,1,0],(0,Ht.Z)(c[0]),[0,0,1],(0,Ht.Z)(c[1]),[0,1,0,c[0][0],c[1][1],0,0,0]),h=[0,1,2,3,4,5];return{vertices:f,indices:h,size:5}}function H0(o,c){for(var f=c.segmentNumber,h=f===void 0?30:f,d=o.coordinates,g=[],S=[],C=function($){g.push($,1,$,d[0][0],d[0][1],d[1][0],d[1][1],$,-1,$,d[0][0],d[0][1],d[1][0],d[1][1]),$!==h-1&&S.push.apply(S,(0,Ht.Z)([0,1,2,1,3,2].map(function(X){return $*2+X})))},k=0;k<h;k++)C(k);return{vertices:g,indices:S,size:7}}function Uy(o){var c=o.coordinates;c.length===2&&c.push(0);var f=$0(-1,1),h=$0(1,1),d=$0(-1,-1),g=$0(1,-1),S=[].concat(_toConsumableArray(c),_toConsumableArray(f),_toConsumableArray(c),_toConsumableArray(d),_toConsumableArray(c),_toConsumableArray(g),_toConsumableArray(c),_toConsumableArray(h)),C=[0,1,2,3,0,2];return{vertices:S,indices:C,size:5}}function Tl(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(tv&&tv[o])return tv[o];var f=u0[o]?u0[o]():u0.cylinder(),h=Ig([f],c);return tv[o]=h,h}function rv(o,c){for(var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=new Float32Array(o.length/f*3),g,S,C,k=vec3.create(),F=vec3.create(),$=vec3.create(),X=0,me=c.length;X<me;X+=3){g=c[X+0]*3,S=c[X+1]*3,C=c[X+2]*3;var je=[o[g],o[g+1]],_t=[o[S],o[S+1]],Ot=[o[C],o[C+1]];h&&(je=lngLatToMeters(je),_t=lngLatToMeters(_t),Ot=lngLatToMeters(Ot));var nn=je,Un=_slicedToArray(nn,2),zn=Un[0],ur=Un[1],Pr=vec3.fromValues(zn,ur,o[g+2]),si=_t,kr=_slicedToArray(si,2),hr=kr[0],Hr=kr[1],ha=vec3.fromValues(hr,Hr,o[S+2]),Xa=Ot,pa=_slicedToArray(Xa,2),bo=pa[0],Do=pa[1],so=vec3.fromValues(bo,Do,o[C+2]);vec3.sub(k,so,ha),vec3.sub(F,Pr,ha),vec3.cross($,k,F),d[g]+=k[0],d[g+1]+=k[1],d[g+2]+=k[2],d[S]+=k[0],d[S+1]+=k[1],d[S+2]+=k[2],d[C]+=k[0],d[C+1]+=k[1],d[C+2]+=k[2]}return GE(d),d}function GE(o){for(var c=0,f=o.length;c<f;c+=3){var h=vec3.fromValues(o[c],o[c+1],o[c+2]),d=vec3.create();vec3.normalize(d,h),o.set(d,c)}}function W0(o){var c=o[0][0],f=o[0][o[0].length-1];return c[0]===f[0]&&c[1]===f[1]}function c0(o){var c=["cylinder","triangleColumn","hexagonColumn","squareColumn"],f=geometryShape[o]?geometryShape[o]():geometryShape.circle(),h=c.indexOf(o)===-1?fillPolygon([f]):extrudePolygon([f]);return h}function $0(o,c){var f=(o+1)/2,h=(c+1)/2;return[f,h]}function jy(){var o=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),c=o.positionsArr,f=o.indicesArr,h=o.normalArr;return{vertices:c,indices:f,size:5,normals:h}}function Hd(){var o=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),c=o.positionsArr,f=o.indicesArr,h=o.normalArr;return{vertices:c,indices:f,size:5,normals:h}}function Dg(o){var c=Ng();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Ng(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Bg=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,Fg=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Zy={solid:0,dash:1},Vy=function(o){(0,za.Z)(f,o);var c=Dg(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.NEAREST,min:Ae.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128}),h.textures=[h.texture]}),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.sourceColor,S=d.targetColor,C=d.textureBlend,k=C===void 0?"normal":C,F=d.lineType,$=F===void 0?"solid":F,X=d.dashArray,me=X===void 0?[10,5]:X,je=d.forward,_t=je===void 0?!0:je,Ot=d.lineTexture,nn=Ot===void 0?!1:Ot,Un=d.iconStep,zn=Un===void 0?100:Un,ur=d.segmentNumber,Pr=ur===void 0?30:ur,si=this.layer.getLayerConfig(),kr=si.animateOption,hr=me;$!=="dash"&&(hr=[0,0]),hr.length===2&&hr.push(0,0);var Hr=0,ha=[0,0,0,0],Xa=[0,0,0,0];if(g&&S&&(ha=(0,Ve.CI)(g),Xa=(0,Ve.CI)(S),Hr=1),this.rendererService.getDirty()){var pa;(pa=this.texture)===null||pa===void 0||pa.bind()}var bo={u_animate:this.animateOption2Array(kr),u_dash_array:hr,u_sourceColor:ha,u_targetColor:Xa,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:Pr,u_lineDir:_t?1:-1,u_icon_step:zn,u_line_texture:nn?1:0,u_textureBlend:k==="normal"?0:1,u_blur:.9,u_line_type:Zy[$||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Hr},Do=this.getUniformsBufferInfo(bo);return Do}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),C.abrupt("return",this.buildModels());case 3:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:Bg,vert:Fg,type:""}}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me,je;return B().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return this.initUniformsBuffer(),S=this.layer.getLayerConfig(),C=S.segmentNumber,k=C===void 0?30:C,F=this.getShaders(),$=F.frag,X=F.vert,me=F.type,Ot.next=5,this.layer.buildLayerModel({moduleName:"lineArc2d"+me,vertexShader:X,fragmentShader:$,inject:this.getInject(),triangulation:H0,depth:{enable:!1},styleOption:{segmentNumber:k}});case 5:return je=Ot.sent,Ot.abrupt("return",[je]);case 7:case"end":return Ot.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?1:C;return Array.isArray(k)?[k[0]]:[k]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ae.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(S,C,k){return[k[3],k[4],k[5],k[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.texture,F=C[k]||{x:0,y:0},$=F.x,X=F.y;return[$,X]}}})}}]),f}(gs);function Bm(o){var c=oi();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function oi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var f0=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,iv=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,m1={solid:0,dash:1},Rv=function(o){(0,za.Z)(f,o);var c=Bm(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.NEAREST,min:Ae.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128}),h.textures=[h.texture]}),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.sourceColor,S=d.targetColor,C=d.textureBlend,k=C===void 0?"normal":C,F=d.lineType,$=F===void 0?"solid":F,X=d.dashArray,me=X===void 0?[10,5]:X,je=d.lineTexture,_t=je===void 0?!1:je,Ot=d.iconStep,nn=Ot===void 0?100:Ot,Un=d.segmentNumber,zn=Un===void 0?30:Un,ur=d.globalArcHeight,Pr=ur===void 0?10:ur,si=this.layer.getLayerConfig(),kr=si.animateOption;me.length===2&&me.push(0,0);var hr=0,Hr=[0,0,0,0],ha=[0,0,0,0];if(g&&S&&(Hr=(0,Ve.CI)(g),ha=(0,Ve.CI)(S),hr=1),this.rendererService.getDirty()){var Xa;(Xa=this.texture)===null||Xa===void 0||Xa.bind()}var pa={u_animate:this.animateOption2Array(kr),u_dash_array:me,u_sourceColor:Hr,u_targetColor:ha,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:zo,u_global_height:Pr,segmentNumber:zn,u_line_type:m1[$]||0,u_icon_step:nn,u_line_texture:_t?1:0,u_textureBlend:k==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:hr},bo=this.getUniformsBufferInfo(pa);return bo}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),C.abrupt("return",this.buildModels());case 4:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:f0,vert:iv,type:""}}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me,je;return B().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return S=this.layer.getLayerConfig(),C=S.segmentNumber,k=C===void 0?30:C,F=this.getShaders(),$=F.frag,X=F.vert,me=F.type,Ot.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+me,vertexShader:X,fragmentShader:$,inject:this.getInject(),triangulation:H0,styleOption:{segmentNumber:k}});case 4:return je=Ot.sent,Ot.abrupt("return",[je]);case 6:case"end":return Ot.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?1:C;return Array.isArray(k)?[k[0]]:[k]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ae.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(S,C,k){return[k[3],k[4],k[5],k[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.texture,F=C[k]||{x:0,y:0},$=F.x,X=F.y;return[$,X]}}})}}]),f}(gs),wf={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Sc=1/2;function Hy(o,c){var f=c.width,h=f===void 0?2:f,d=c.height,g=d===void 0?1:d;return{vertices:[0,Sc*o,1*o*h,-(g+Sc)*o,1*o*h,(g-Sc)*o,0,Sc*o,1*o*h,-(g+Sc)*o,1*o*h,(g-Sc)*o],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*o,-2*o,1,-2*o,1.5*o,1,1*o,1.5*o,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Tp(o,c){var f=c.width,h=f===void 0?2:f,d=c.height,g=d===void 0?3:d;return{vertices:[0,0,1*o*h,1*g,1*o*h,-1*g,0,0,1*o*h,1*g,1*o*h,-1*g],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*o,1,2,1*o,1,-2,1*o,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function nx(o,c){var f=c.width,h=f===void 0?2:f,d=c.height,g=d===void 0?2:d;return{vertices:[0,g/2,o*h*1,g/2,o*h*1,-g/2,0,-g/2,0,g/2,o*h*1,g/2,o*h*1,-g/2,0,-g/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-o,1,1,0,1,0,-o,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function h0(o,c){var f=c.width,h=f===void 0?2:f,d=c.height,g=d===void 0?3:d;return{vertices:[0,0,1*h*o,.5*g,2*h*o,0,1*h*o,-.5*g,0,0,1*h*o,.5*g,2*h*o,0,1*h*o,-.5*g],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-o,1,1,0,1,0,-o,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function cc(o,c){var f=c.width,h=f===void 0?2:f,d=c.height,g=d===void 0?3:d;return{vertices:[0,0,2*o*h,1*g,1.5*o*h,0,2*o*h,-1*g,0,0,2*o*h,1*g,1.5*o*h,0,2*o*h,-1*g],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-o,1,1,0,1,0,-o,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Ou(o,c){var f=c.width,h=f===void 0?2:f,d=c.height,g=d===void 0?2:d,S=Zf(),C=Cu().flatten([S]),k=Cu()(C.vertices,C.holes,C.dimensions),F=S.map(function($){return[$[0]*h*o,$[1]*g]}).flat();return{vertices:[].concat((0,Ht.Z)(F),(0,Ht.Z)(F)),dimensions:2,indices:k.map(function($){return $+S.length}),outLineIndices:k,normals:[].concat((0,Ht.Z)(S.map(function($){return[$[1]*g,$[0]*h*o,1]}).flat()),(0,Ht.Z)(new Array(S.length*3).fill(0)))}}function Tf(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=arguments.length>2?arguments[2]:void 0,h=(0,Gn.Z)(f.source)==="object"?f.source.type:f.source,d=(0,Gn.Z)(f.target)==="object"?f.target.type:f.target,g=(0,Gn.Z)(f.source)==="object"?f.source:{},S=g.width,C=S===void 0?h?wf[h]:0:S,k=(0,Gn.Z)(f.target)==="object"?f.target:{},F=k.width,$=F===void 0?d?wf[d]:0:F;return{vertices:[0,Sc,1*C].concat((0,Ht.Z)(o),[1,Sc,-1*$],(0,Ht.Z)(o),[1,-Sc,-1*$],(0,Ht.Z)(o),[0,-Sc,1*C],(0,Ht.Z)(o),[0,Sc,1*C],(0,Ht.Z)(o),[1,Sc,-1*$],(0,Ht.Z)(o),[1,-Sc,-1*$],(0,Ht.Z)(o),[0,-Sc,1*C],(0,Ht.Z)(o)),outLineIndices:[0,1,2,0,2,3].map(function(X){return X+c}),indices:[4,5,6,4,6,7].map(function(X){return X+c}),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function G0(o,c){var f=(0,Gn.Z)(o)==="object"?o.type:o,h=c==="source"?1:-1,d=(0,Gn.Z)(o)==="object"?o:{};switch(f){case"circle":return Ou(h,d);case"triangle":return Tp(h,d);case"diamond":return h0(h,d);case"rect":return nx(h,d);case"classic":return cc(h,d);case"halfTriangle":return Hy(h,d);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function Fm(o){var c=o.coordinates.flat(),f=1,h=1;return{vertices:[1,0,0].concat((0,Ht.Z)(c),[1,2,-3],(0,Ht.Z)(c),[1,1,-3],(0,Ht.Z)(c),[0,1,0],(0,Ht.Z)(c),[0,0,0],(0,Ht.Z)(c),[1,0,0],(0,Ht.Z)(c),[1,2,-3],(0,Ht.Z)(c),[1,1,-3],(0,Ht.Z)(c),[0,1,0],(0,Ht.Z)(c),[0,0,0],(0,Ht.Z)(c)),normals:[-f,2*h,1,2*h,-h,1,h,-h,1,h,-h,1,-f,-h,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function g1(o,c){return c?y1(o,c):Fm(o)}function y1(o,c){var f=o.coordinates.flat(),h=c,d=h.target,g=d===void 0?"classic":d,S=h.source,C=S===void 0?"circle":S,k=Wy(G0(C,"source"),f,0,0),F=Tf(f,k.vertices.length/7,c),$=Wy(G0(g,"target"),f,1,k.vertices.length/7+F.vertices.length/7),X={vertices:[].concat((0,Ht.Z)(k.vertices),(0,Ht.Z)(F.vertices),(0,Ht.Z)($.vertices)),indices:[].concat((0,Ht.Z)(k.outLineIndices),(0,Ht.Z)(F.outLineIndices),(0,Ht.Z)($.outLineIndices),(0,Ht.Z)(k.indices),(0,Ht.Z)(F.indices),(0,Ht.Z)($.indices)),normals:[].concat((0,Ht.Z)(k.normals),(0,Ht.Z)(F.normals),(0,Ht.Z)($.normals)),size:7};return X}function Wy(o,c){for(var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,d=[],g=o.vertices,S=o.indices,C=o.dimensions,k=o.outLineIndices,F=0;F<g.length;F+=C)d.push.apply(d,[f,g[F+1],g[F]].concat((0,Ht.Z)(c)));return(0,De.Z)((0,De.Z)({},o),{},{vertices:d,indices:S.map(function($){return $+h}),outLineIndices:k.map(function($){return $+h})})}function zg(o){var c=$y();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function $y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Gy=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Ap=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`,Wd=function(o){(0,za.Z)(f,o);var c=zg(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.gapWidth,S=g===void 0?2:g,C=d.strokeWidth,k=C===void 0?1:C,F=d.strokeOpacity,$=F===void 0?1:F,X={u_gap_width:S,u_stroke_width:k,u_stroke_opacity:$},me=this.getUniformsBufferInfo(X);return me}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),C.abrupt("return",this.buildModels());case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.layer.buildLayerModel({moduleName:"flow_line",vertexShader:Ap,fragmentShader:Gy,inject:this.getInject(),triangulation:g1,styleOption:this.layer.getLayerConfig().symbol,primitive:Ae.gl.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return S=k.sent,k.abrupt("return",[S]);case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g){var S=g.size,C=S===void 0?1:S;return Array.isArray(C)?[C[0],C[1]]:[C,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ae.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(g,S,C){return[C[3],C[4],C[5],C[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ae.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g,S,C,k,F){return F}}})}}]),f}(gs);function Kh(o){var c=d0();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function d0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Xo=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,Ug=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,_1={solid:0,dash:1},b1=function(o){(0,za.Z)(f,o);var c=Kh(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.NEAREST,min:Ae.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128}),h.textures=[h.texture]}),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.sourceColor,S=d.targetColor,C=d.textureBlend,k=C===void 0?"normal":C,F=d.lineType,$=F===void 0?"solid":F,X=d.dashArray,me=X===void 0?[10,5]:X,je=d.lineTexture,_t=je===void 0?!1:je,Ot=d.iconStep,nn=Ot===void 0?100:Ot,Un=d.segmentNumber,zn=Un===void 0?30:Un,ur=this.layer.getLayerConfig(),Pr=ur.animateOption;if(me.length===2&&me.push(0,0),this.rendererService.getDirty()){var si;(si=this.texture)===null||si===void 0||si.bind()}var kr=0,hr=[0,0,0,0],Hr=[0,0,0,0];g&&S&&(hr=(0,Ve.CI)(g),Hr=(0,Ve.CI)(S),kr=1);var ha=this.layer.getLayerAnimateTime();isNaN(ha)&&(ha=0);var Xa={u_animate:this.animateOption2Array(Pr),u_dash_array:me,u_sourceColor:hr,u_targetColor:Hr,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:zn,u_line_type:_1[$]||0,u_icon_step:nn,u_line_texture:_t?1:0,u_textureBlend:k==="normal"?0:1,u_time:ha,u_linearColor:kr},pa=this.getUniformsBufferInfo(Xa);return pa}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),C.abrupt("return",this.buildModels());case 4:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.layer.getLayerConfig(),C=S.segmentNumber,k=C===void 0?30:C,X.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:Ug,fragmentShader:Xo,triangulation:H0,styleOption:{segmentNumber:k},inject:this.getInject(),depth:{enable:!1}});case 3:return F=X.sent,X.abrupt("return",[F]);case 5:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?1:C;return Array.isArray(k)?[k[0]]:[k]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ae.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(S,C,k){return[k[3],k[4],k[5],k[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.texture,F=C[k]||{x:0,y:0},$=F.x,X=F.y;return[$,X]}}})}}]),f}(gs),x1=function(o){return o[o.solid=0]="solid",o[o.dash=1]="dash",o}({}),zm=function(o){return o.VERTICAL="vertical",o.HORIZONTAL="horizontal",o}({}),Al=function(o){return o.NORMAL="normal",o.REPLACE="replace",o}({}),jg=function(o){return o[o.pixel=0]="pixel",o[o.meter=1]="meter",o}({}),Cp=function(o){return o.ALWAYS="always",o.DRAGEND="dragend",o}({});function rx(o){var c=Hc();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Hc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var p0=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,Mu=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in vec3 a_DistanceAndIndexAndMiter;
layout(location = 13) in vec4 a_Normal_Total_Distance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};


out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,v0=function(o){(0,za.Z)(f,o);var c=rx(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"textureEventFlag",!1),(0,He.Z)((0,Ti.Z)(h),"texture",h.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.textures.length===0&&(h.textures=[h.texture]),h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.NEAREST,min:Ae.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128})}),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.sourceColor,S=d.targetColor,C=d.textureBlend,k=C===void 0?"normal":C,F=d.lineType,$=F===void 0?"solid":F,X=d.dashArray,me=X===void 0?[10,5,0,0]:X,je=d.lineTexture,_t=je===void 0?!1:je,Ot=d.iconStep,nn=Ot===void 0?100:Ot,Un=d.vertexHeightScale,zn=Un===void 0?20:Un,ur=d.strokeWidth,Pr=ur===void 0?0:ur,si=d.raisingHeight,kr=si===void 0?0:si,hr=d.heightfixed,Hr=hr===void 0?!1:hr,ha=d.linearDir,Xa=ha===void 0?zm.VERTICAL:ha,pa=d.blur,bo=pa===void 0?[1,1,1,0]:pa,Do=me;if($!=="dash"&&(Do=[0,0,0,0]),Do.length===2&&Do.push(0,0),this.rendererService.getDirty()&&this.texture){var so;(so=this.texture)===null||so===void 0||so.bind()}var af=this.layer.getLayerConfig(),Uu=af.animateOption,td=0,Jd=[0,0,0,0],fh=[0,0,0,0];g&&S&&(Jd=(0,Ve.CI)(g),fh=(0,Ve.CI)(S),td=1);var Rs={u_animate:this.animateOption2Array(Uu),u_dash_array:Do,u_blur:bo,u_sourceColor:Jd,u_targetColor:fh,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:nn,u_heightfixed:Number(Hr),u_vertexScale:zn,u_raisingHeight:Number(kr),u_strokeWidth:Pr,u_textureBlend:k===Al.NORMAL?0:1,u_line_texture:_t?1:0,u_linearDir:Xa===zm.VERTICAL?1:0,u_linearColor:td,u_time:this.layer.getLayerAnimateTime()||0},hh=this.getUniformsBufferInfo(Rs);return hh}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),C.abrupt("return",this.buildModels());case 3:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me,je;return B().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return S=this.layer.getLayerConfig(),C=S.depth,k=C===void 0?!1:C,F=this.getShaders(),$=F.frag,X=F.vert,me=F.type,this.layer.triangulation=Ve.sN,Ot.next=5,this.layer.buildLayerModel({moduleName:"line"+me,vertexShader:X,fragmentShader:$,triangulation:Ve.sN,inject:this.getInject(),depth:{enable:k}});case 5:return je=Ot.sent,Ot.abrupt("return",[je]);case 7:case"end":return Ot.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getShaders",value:function(){return{frag:p0,vert:Mu,type:""}}},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ae.GC.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:10,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(S,C,k,F,$,X){return X===void 0?[k[3],10,k[4]]:[k[3],X,k[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=S.size,k=C===void 0?1:C;return Array.isArray(k)?[k[0],k[1]]:[k,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Ae.GC.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(S,C,k,F,$){return[].concat((0,Ht.Z)($),[k[5]])}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.texture,F=C[k]||{x:0,y:0},$=F.x,X=F.y;return[$,X]}}})}}]),f}(gs);function ix(o){var c=gu();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function gu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Um=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,Rh=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,E1=function(o){(0,za.Z)(f,o);var c=ix(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.sourceColor,S=d.targetColor,C=d.lineType,k=C===void 0?"solid":C,F=d.dashArray,$=F===void 0?[10,5,0,0]:F,X=d.vertexHeightScale,me=X===void 0?20:X,je=$;k!=="dash"&&(je=[0,0,0,0]),je.length===2&&je.push(0,0);var _t=0,Ot=[0,0,0,0],nn=[0,0,0,0];g&&S&&(Ot=(0,Ve.CI)(g),nn=(0,Ve.CI)(S),_t=1);var Un={u_sourceColor:Ot,u_targetColor:nn,u_dash_array:je,u_vertexScale:me,u_linearColor:_t},zn=this.getUniformsBufferInfo(Un);return zn}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getShaders",value:function(){return{frag:Um,vert:Rh,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return this.initUniformsBuffer(),S=this.getShaders(),C=S.frag,k=S.vert,F=S.type,me.next=4,this.layer.buildLayerModel({moduleName:F,vertexShader:k,fragmentShader:C,triangulation:Dm,inject:this.getInject(),primitive:Ae.gl.LINES,depth:{enable:!1},pick:!1});case 4:return $=me.sent,me.abrupt("return",[$]);case 6:case"end":return me.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Ae.GC.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:4,update:function(g,S,C){var k=g.size,F=k===void 0?1:k,$=Array.isArray(F)?[F[0],F[1]]:[F,0];return[$[0],$[1],C[3],C[5]]}}})}}]),f}(gs);function $d(o){var c=jm();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function jm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var nf=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,Oa=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Ph=function(o){(0,za.Z)(f,o);var c=$d(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas()}),h.layer.render();return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.NEAREST,min:Ae.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128}),h.textures=[h.texture]}),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.sourceColor,S=d.targetColor,C=d.textureBlend,k=C===void 0?"normal":C,F=d.heightfixed,$=F===void 0?!1:F,X=d.lineTexture,me=X===void 0?!1:X,je=d.iconStep,_t=je===void 0?100:je,Ot=d.iconStepCount,nn=Ot===void 0?1:Ot,Un=this.layer.getLayerConfig(),zn=Un.animateOption;if(this.rendererService.getDirty()){var ur;(ur=this.texture)===null||ur===void 0||ur.bind()}var Pr=0,si=[0,0,0,0],kr=[0,0,0,0];g&&S&&(si=(0,Ve.CI)(g),kr=(0,Ve.CI)(S),Pr=1);var hr={u_animate:this.animateOption2Array(zn),u_sourceColor:si,u_targetColor:kr,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:_t,u_heightfixed:Number($),u_linearColor:Pr,u_line_texture:me?1:0,u_textureBlend:k==="normal"?0:1,u_iconStepCount:nn,u_time:this.layer.getLayerAnimateTime()||0},Hr=this.getUniformsBufferInfo(hr);return Hr}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),C.abrupt("return",this.buildModels());case 4:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Oa,fragmentShader:nf,triangulation:Lm,inject:this.getInject(),depth:{enable:!1},blend:this.getBlend()});case 2:return S=k.sent,k.abrupt("return",[S]);case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:Ae.GC.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S,C,k){return[k[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ae.GC.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S,C,k){return[k[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=S.size,k=C===void 0?1:C;return Array.isArray(k)?[k[0],k[1]]:[k,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ae.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(S,C,k,F,$){return $}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ae.GC.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S,C,k){return[k[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.texture,F=C[k]||{x:0,y:0},$=F.x,X=F.y;return[$,X]}}})}}]),f}(gs),XE={arc:Vy,arc3d:Rv,greatcircle:b1,wall:Ph,line:v0,simple:E1,flowline:Wd,earthArc3d:Rv},ax=XE;function ox(o){var c=QA();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function QA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Pv=function(o){(0,za.Z)(f,o);var c=ox(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"type","LineLayer"),(0,He.Z)((0,Ti.Z)(h),"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,He.Z)((0,Ti.Z)(h),"arrowInsertCount",0),(0,He.Z)((0,Ti.Z)(h),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),h}return(0,dn.Z)(f,[{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=this.getModelType(),this.layerModel=new ax[S](this),k.next=4,this.initLayerModels();case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getDefaultConfig",value:function(){var d=this.getModelType(),g={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}};return g[d]}},{key:"getModelType",value:function(){var d;if(this.layerType)return this.layerType;var g=this.styleAttributeService.getLayerStyleAttribute("shape"),S=g==null||(d=g.scale)===null||d===void 0?void 0:d.field;return S||"line"}},{key:"processData",value:function(d){if(this.getModelType()!=="simple")return d;var g=[];return d.map(function(S){if(Array.isArray(S.coordinates)&&Array.isArray(S.coordinates[0])&&Array.isArray(S.coordinates[0][0])){var C=(0,De.Z)({},S);S.coordinates.map(function(k){g.push((0,De.Z)((0,De.Z)({},C),{},{coordinates:k}))})}else g.push(S)}),g}}]),f}(cu);function JA(o){var c=eC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function eC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var tC=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,nC=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`,sx=function(o){(0,za.Z)(f,o);var c=JA(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"raiseCount",0),(0,He.Z)((0,Ti.Z)(h),"raiseRepeat",0),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.animateOption,S=g===void 0?{enable:!1,speed:.01,repeat:!1}:g,C=d.sourceColor,k=d.targetColor,F=d.pickLight,$=F===void 0?!1:F,X=d.heightfixed,me=X===void 0?!1:X,je=d.opacityLinear,_t=je===void 0?{enable:!1,dir:"up"}:je,Ot=d.lightEnable,nn=Ot===void 0?!0:Ot,Un=0,zn=[0,0,0,0],ur=[0,0,0,0];if(C&&k&&(zn=(0,Ve.CI)(C),ur=(0,Ve.CI)(k),Un=1),this.raiseCount<1&&this.raiseRepeat>0&&S.enable){var Pr=S.speed,si=Pr===void 0?.01:Pr;this.raiseCount+=si,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var kr={u_pickLight:Number($),u_heightfixed:Number(me),u_r:S.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:Un,u_sourceColor:zn,u_targetColor:ur,u_opacitylinear:Number(_t.enable),u_opacitylinear_dir:_t.dir==="up"?1:0,u_lightEnable:Number(nn)},hr=this.getUniformsBufferInfo(kr);return hr}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X;return B().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return S=this.layer.getLayerConfig(),C=S.depth,k=C===void 0?!0:C,F=S.animateOption.repeat,$=F===void 0?1:F,this.raiseRepeat=$,this.initUniformsBuffer(),je.next=5,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:nC,fragmentShader:tC,triangulation:Z0,inject:this.getInject(),cull:{enable:!0,face:(0,Ve.fj)(this.mapService.version)},depth:{enable:k}});case 5:return X=je.sent,je.abrupt("return",[X]);case 7:case"end":return je.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g){var S=g.size;if(S){var C=[];return Array.isArray(S)&&(C=S.length===2?[S[0],S[0],S[1]]:S),Array.isArray(S)||(C=[S,S,S]),C}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ae.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g,S,C,k,F){return F}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ae.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:_e.EXTRUDE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g){var S=(0,Ve.SI)(g.coordinates);return[S[0],S[1],0]}}})}}]),f}(gs);function ux(o){var c=S1();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function S1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var rC=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,Iv=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,Xy=function(o){(0,za.Z)(f,o);var c=ux(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.strokeOpacity,S=g===void 0?1:g,C=d.strokeWidth,k=C===void 0?0:C,F=d.blend,$=d.blur,X=$===void 0?0:$,me=d.raisingHeight,je=me===void 0?0:me,_t=d.heightfixed,Ot=_t===void 0?!1:_t,nn=d.unit,Un=nn===void 0?"pixel":nn,zn=this.getAnimateUniforms().u_time;isNaN(zn)&&(zn=-1);var ur={u_blur_height_fixed:[X,Number(je),Number(Ot)],u_stroke_width:k,u_additive:F==="additive"?1:0,u_stroke_opacity:S,u_size_unit:jg[Un],u_time:zn,u_animate:this.getAnimateUniforms().u_animate},Pr=this.getUniformsBufferInfo(ur);return Pr}},{key:"getAnimateUniforms",value:function(){var d=this.layer.getLayerConfig(),g=d.animateOption,S=g===void 0?{enable:!1}:g;return{u_animate:this.animateOption2Array(S),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ve.oX)}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return S=this.getShaders(),C=S.frag,k=S.vert,F=S.type,this.layer.triangulation=Ve.oX,this.initUniformsBuffer(),me.next=5,this.layer.buildLayerModel({moduleName:F,vertexShader:k,fragmentShader:C,inject:this.getInject(),triangulation:Ve.oX,depth:{enable:!1}});case 5:return $=me.sent,me.abrupt("return",[$]);case 7:case"end":return me.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getShaders",value:function(){return{frag:rC,vert:Iv,type:"pointFill"}}},{key:"animateOption2Array",value:function(d){return[d.enable?0:1,d.speed||1,d.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var d=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ae.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:_e.EXTRUDE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(S,C,k,F){var $=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],X=F%4*3;return[$[X],$[X+1],$[X+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?5:C;return Array.isArray(k)?[k[0]]:[k]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Ae.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:_e.SHAPE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.shape,k=C===void 0?2:C,F=d.indexOf(k);return[F]}}})}}]),f}(gs);function yd(o){var c=iC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function iC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var YE=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,aC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,Zm=function(o){(0,za.Z)(f,o);var c=yd(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){h.layerService.throttleRenderLayers()});return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.LINEAR,min:Ae.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128,mipmap:!0})}),h}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){if(this.rendererService.getDirty()){var d;(d=this.texture)===null||d===void 0||d.bind()}var g=this.getCommonUniformsInfo(),S=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},g.uniformsOption),S.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.raisingHeight,S=g===void 0?0:g,C=d.heightfixed,k=C===void 0?!1:C,F={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(S),u_heightfixed:Number(k),u_texture:this.texture};this.textures=[this.texture];var $=this.getUniformsBufferInfo(F);return $}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),C.abrupt("return",this.buildModels());case 3:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:aC,fragmentShader:YE,triangulation:kg,inject:this.getInject(),depth:{enable:!1},primitive:Ae.gl.POINTS});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?5:C;return Array.isArray(k)?[k[0]]:[k]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.shape,F=C[k]||{x:-64,y:-64},$=F.x,X=F.y;return[$,X]}}})}}]),f}(gs);function oC(o){var c=g5();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function g5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var sC=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,lx=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function qE(o){var c=o.coordinates;return{vertices:(0,Ht.Z)(c),indices:[0],size:c.length}}var w1=function(o){(0,za.Z)(f,o);var c=oC(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var d={u_size_scale:.5},g=this.getUniformsBufferInfo(d);return g}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.layer.triangulation=qE,this.initUniformsBuffer(),k.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:lx,fragmentShader:sC,triangulation:qE,inject:this.getInject(),depth:{enable:!1},primitive:Ae.gl.POINTS,pick:!1});case 4:return S=k.sent,k.abrupt("return",[S]);case 6:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(g){var S=g.size,C=S===void 0?1:S;return Array.isArray(C)?[C[0]]:[C]}}})}}]),f}(gs),Ru=D(98333),fc=D(85975);function av(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=cx(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function cx(o,c){if(o){if(typeof o=="string")return ul(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return ul(o,c)}}function ul(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}var uC=function(){function o(c,f,h){(0,Dt.Z)(this,o),(0,He.Z)(this,"boxCells",[]);var d=this.boxCells;this.xCellCount=Math.ceil(c/h),this.yCellCount=Math.ceil(f/h);for(var g=0;g<this.xCellCount*this.yCellCount;g++)d.push([]);this.boxKeys=[],this.bboxes=[],this.width=c,this.height=f,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/f,this.boxUid=0}return(0,dn.Z)(o,[{key:"insert",value:function(f,h,d,g,S){this.forEachCell(h,d,g,S,this.insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(S)}},{key:"query",value:function(f,h,d,g,S){return this.queryHitTest(f,h,d,g,!1,S)}},{key:"hitTest",value:function(f,h,d,g,S){return this.queryHitTest(f,h,d,g,!0,S)}},{key:"insertBoxCell",value:function(f,h,d,g,S,C){this.boxCells[S].push(C)}},{key:"queryHitTest",value:function(f,h,d,g,S,C){if(d<0||f>this.width||g<0||h>this.height)return S?!1:[];var k=[];if(f<=0&&h<=0&&this.width<=d&&this.height<=g){if(S)return!0;for(var F=0;F<this.boxKeys.length;F++)k.push({key:this.boxKeys[F],x1:this.bboxes[F*4],y1:this.bboxes[F*4+1],x2:this.bboxes[F*4+2],y2:this.bboxes[F*4+3]});return C?k.filter(C):k}var $={hitTest:S,seenUids:{box:{},circle:{}}};return this.forEachCell(f,h,d,g,this.queryCell,k,$,C),S?k.length>0:k}},{key:"queryCell",value:function(f,h,d,g,S,C,k,F){var $=k.seenUids,X=this.boxCells[S];if(X!==null){var me=this.bboxes,je=av(X),_t;try{for(je.s();!(_t=je.n()).done;){var Ot=_t.value;if(!$.box[Ot]){$.box[Ot]=!0;var nn=Ot*4;if(f<=me[nn+2]&&h<=me[nn+3]&&d>=me[nn+0]&&g>=me[nn+1]&&(!F||F(this.boxKeys[Ot]))){if(k.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[Ot],x1:me[nn],y1:me[nn+1],x2:me[nn+2],y2:me[nn+3]})}}}}catch(Un){je.e(Un)}finally{je.f()}}return!1}},{key:"forEachCell",value:function(f,h,d,g,S,C,k,F){for(var $=this.convertToXCellCoord(f),X=this.convertToYCellCoord(h),me=this.convertToXCellCoord(d),je=this.convertToYCellCoord(g),_t=$;_t<=me;_t++)for(var Ot=X;Ot<=je;Ot++){var nn=this.xCellCount*Ot+_t;if(S.call(this,f,h,d,g,nn,C,k,F))return}}},{key:"convertToXCellCoord",value:function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}},{key:"convertToYCellCoord",value:function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}}]),o}(),lC=uC,fx=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"viewportPadding",100),this.width=c,this.height=f,this.viewportPadding=Math.max(c,f),this.grid=new lC(c+this.viewportPadding,f+this.viewportPadding,25),this.screenRightBoundary=c+this.viewportPadding,this.screenBottomBoundary=f+this.viewportPadding,this.gridRightBoundary=c+2*this.viewportPadding,this.gridBottomBoundary=f+2*this.viewportPadding}return(0,dn.Z)(o,[{key:"placeCollisionBox",value:function(f){var h=f.x1+f.anchorPointX+this.viewportPadding,d=f.y1+f.anchorPointY+this.viewportPadding,g=f.x2+f.anchorPointX+this.viewportPadding,S=f.y2+f.anchorPointY+this.viewportPadding;return!this.isInsideGrid(h,d,g,S)||this.grid.hitTest(h,d,g,S)?{box:[]}:{box:[h,d,g,S]}}},{key:"insertCollisionBox",value:function(f,h){var d={featureIndex:h};this.grid.insert(d,f[0],f[1],f[2],f[3])}},{key:"project",value:function(f,h,d){var g=Ru.al(h,d,0,1),S=Ru.Ue(),C=fc.fromValues.apply(fc,(0,Ht.Z)(f));return Ru.fF(S,g,C),{x:(S[0]/S[3]+1)/2*this.width+this.viewportPadding,y:(-S[1]/S[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(f,h,d,g){return d>=0&&f<this.gridRightBoundary&&g>=0&&h<this.gridBottomBoundary}}]),o}();function T1(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=hx(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function hx(o,c){if(o){if(typeof o=="string")return dx(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return dx(o,c)}}function dx(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}function KE(o){var c=.5,f=.5;switch(o){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0;break;default:c=.5}switch(o){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break;default:f=.5}return{horizontalAlign:c,verticalAlign:f}}function qu(o,c,f,h,d){if(d){var g=o[h],S=g.glyph;if(S)for(var C=c[S].advance*g.scale,k=(o[h].x+C)*d,F=f;F<=h;F++)o[F].x-=k}}function Yy(o,c,f,h,d,g,S){var C=(c-f)*d,k=(-h*S+.5)*g,F=T1(o),$;try{for(F.s();!($=F.n()).done;){var X=$.value;X.x+=C,X.y+=k}}catch(me){F.e(me)}finally{F.f()}}function px(o,c,f,h,d,g,S){var C=-8,k=0,F=C,$=0,X=o.positionedGlyphs,me=g==="right"?1:g==="left"?0:.5,je=X.length;f.forEach(function(zn){if(zn.split("").forEach(function(Pr){var si=c[Pr],kr=0;si&&(X.push({glyph:Pr,x:k,y:F+kr,vertical:!1,scale:1,metrics:si}),k+=si.advance+S)}),X.length!==je){var ur=k-S;$=Math.max(ur,$),qu(X,c,je,X.length-1,me)}k=0,F-=h+5});var _t=KE(d),Ot=_t.horizontalAlign,nn=_t.verticalAlign;Yy(X,me,Ot,nn,$,h,f.length);var Un=F-C;o.top+=-nn*Un,o.bottom=o.top-Un,o.left+=-Ot*$,o.right=o.left+$}function Zg(o,c,f,h,d,g,S){var C=-8,k=0,F=C,$=0,X=o.positionedGlyphs,me=g==="right"?1:g==="left"?0:.5,je=X.length;f.forEach(function(zn){var ur=c[zn],Pr=0;if(ur&&(X.push({glyph:zn,x:ur.advance/2,y:F+Pr,vertical:!1,scale:1,metrics:ur}),k+=ur.advance+S),X.length!==je){var si=k-S;$=Math.max(si,$),qu(X,c,je,X.length-1,me)}k=0,F-=h+5});var _t=KE(d),Ot=_t.horizontalAlign,nn=_t.verticalAlign;Yy(X,me,Ot,nn,$,h,f.length);var Un=F-C;o.top+=-nn*Un,o.bottom=o.top-Un,o.left+=-Ot*$,o.right=o.left+$}function QE(o,c,f,h,d,g){var S=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],C=arguments.length>7?arguments[7]:void 0,k=o.split(`
`),F=[],$={positionedGlyphs:F,top:S[1],bottom:S[1],left:S[0],right:S[0],lineCount:k.length,text:o};return C?Zg($,c,k,f,h,d,g):px($,c,k,f,h,d,g),F.length?$:!1}function Wa(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],f=arguments.length>2?arguments[2]:void 0,h=o.positionedGlyphs,d=h===void 0?[]:h,g=[],S=T1(d),C;try{for(S.s();!(C=S.n()).done;){var k=C.value,F=k.metrics,$=4,X=F.advance*k.scale/2,me=f?[k.x+X,k.y]:[0,0],je=f?[0,0]:[k.x+X+c[0],k.y+c[1]],_t=(0-$)*k.scale-X+je[0],Ot=(0-$)*k.scale+je[1],nn=_t+F.width*k.scale,Un=Ot+F.height*k.scale,zn={x:_t,y:Ot},ur={x:nn,y:Ot},Pr={x:_t,y:Un},si={x:nn,y:Un};g.push({tl:zn,tr:ur,bl:Pr,br:si,tex:F,glyphOffset:me})}}catch(kr){S.e(kr)}finally{S.f()}return g}function cC(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=fC(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function fC(o,c){if(o){if(typeof o=="string")return JE(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return JE(o,c)}}function JE(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}function hC(o){var c=dC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function dC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var eS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,tS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in vec2 a_textOffsets;
layout(location = 14) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,Vg=Ve.rU.isEqual;function nS(o){var c=this,f=o.id,h=[],d=[];if(!c.glyphInfoMap||!c.glyphInfoMap[f])return{vertices:[],indices:[],size:7};var g=c.glyphInfoMap[f].centroid,S=g.length===2?[g[0],g[1],0]:g;return c.glyphInfoMap[f].glyphQuads.forEach(function(C,k){h.push.apply(h,(0,Ht.Z)(S).concat([C.tex.x,C.tex.y+C.tex.height,C.tl.x,C.tl.y],(0,Ht.Z)(S),[C.tex.x+C.tex.width,C.tex.y+C.tex.height,C.tr.x,C.tr.y],(0,Ht.Z)(S),[C.tex.x+C.tex.width,C.tex.y,C.br.x,C.br.y],(0,Ht.Z)(S),[C.tex.x,C.tex.y,C.bl.x,C.bl.y])),d.push(0+k*4,1+k*4,2+k*4,2+k*4,3+k*4,0+k*4)}),{vertices:h,indices:d,size:7}}var rS=function(o){(0,za.Z)(f,o);var c=hC(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"glyphInfoMap",{}),(0,He.Z)((0,Ti.Z)(h),"currentZoom",-1),(0,He.Z)((0,Ti.Z)(h),"textureHeight",0),(0,He.Z)((0,Ti.Z)(h),"textCount",0),(0,He.Z)((0,Ti.Z)(h),"preTextStyle",{}),(0,He.Z)((0,Ti.Z)(h),"mapping",(0,Fe.Z)(B().mark(function C(){return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return h.initGlyph(),h.updateTexture(),F.next=4,h.reBuildModel();case 4:case"end":return F.stop()}},C)}))),h}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption),{u_sdf_map:this.textures[0]})}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.stroke,S=g===void 0?"#fff":g,C=d.strokeWidth,k=C===void 0?0:C,F=d.halo,$=F===void 0?.5:F,X=d.gamma,me=X===void 0?2:X,je=d.raisingHeight,_t=je===void 0?0:je,Ot=this.getFontServiceMapping(),nn=this.getFontServiceCanvas();Ot&&Object.keys(Ot).length!==this.textCount&&nn&&(this.updateTexture(),this.textCount=Object.keys(Ot).length),this.preTextStyle=this.getTextStyle();var Un={u_stroke_color:(0,Ve.CI)(S),u_sdf_map_size:[(nn==null?void 0:nn.width)||1,(nn==null?void 0:nn.height)||1],u_raisingHeight:Number(_t),u_stroke_width:k,u_gamma_scale:me,u_halo_blur:$},zn=this.getUniformsBufferInfo(Un);return zn}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.rawEncodeData=this.layer.getEncodedData(),this.preTextStyle=this.getTextStyle(),this.initUniformsBuffer(),C.abrupt("return",this.buildModels());case 6:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.layer.getLayerConfig(),C=S.textAllowOverlap,k=C===void 0?!1:C,this.initGlyph(),this.updateTexture(),k||this.filterGlyphs(),X.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:tS,fragmentShader:eS,inject:this.getInject(),triangulation:nS.bind(this),depth:{enable:!1}});case 6:return F=X.sent,X.abrupt("return",[F]);case 8:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"needUpdate",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me,je,_t,Ot,nn,Un;return B().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(S=this.getTextStyle(),C=S.textAllowOverlap,k=C===void 0?!1:C,F=S.textAnchor,$=F===void 0?"center":F,X=S.textOffset,me=S.padding,je=S.fontFamily,_t=S.fontWeight,!(!Vg(me,this.preTextStyle.padding)||!Vg(X,this.preTextStyle.textOffset)||!Vg($,this.preTextStyle.textAnchor)||!Vg(je,this.preTextStyle.fontFamily)||!Vg(_t,this.preTextStyle.fontWeight))){ur.next=5;break}return ur.next=4,this.mapping();case 4:return ur.abrupt("return",!0);case 5:if(!k){ur.next=7;break}return ur.abrupt("return",!1);case 7:if(Ot=this.mapService.getZoom(),nn=this.mapService.getBounds(),Un=(0,Ve.oO)(this.extent,nn),!(Math.abs(this.currentZoom-Ot)>.5||!Un||k!==this.preTextStyle.textAllowOverlap)){ur.next=14;break}return ur.next=13,this.reBuildModel();case 13:return ur.abrupt("return",!0);case 14:return ur.abrupt("return",!1);case 15:case"end":return ur.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Ae.GC.Attribute,descriptor:{shaderLocation:10,name:"a_textOffsets",buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g,S,C){return[C[5],C[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Ae.GC.Attribute,descriptor:{name:"a_tex",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g,S,C){return[C[3],C[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(g){var S=g.size,C=S===void 0?12:S;return Array.isArray(C)?[C[0]]:[C]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var d=this.mapService.getBounds();return(0,Ve.yA)(d,.5)}},{key:"initTextFont",value:function(){var d=this.getTextStyle(),g=d.fontWeight,S=d.fontFamily,C=this.rawEncodeData,k=[];C.forEach(function(F){var $=F.shape,X=$===void 0?"":$;X=X.toString();var me=cC(X),je;try{for(me.s();!(je=me.n()).done;){var _t=je.value;k.indexOf(_t)===-1&&k.push(_t)}}catch(Ot){me.e(Ot)}finally{me.f()}}),this.fontService.setFontOptions({characterSet:k,fontWeight:g,fontFamily:S,iconfont:!1})}},{key:"initIconFontTex",value:function(){var d=this.getTextStyle(),g=d.fontWeight,S=d.fontFamily,C=this.rawEncodeData,k=[];C.forEach(function(F){var $=F.shape,X=$===void 0?"":$;X="".concat(X),k.indexOf(X)===-1&&k.push(X)}),this.fontService.setFontOptions({characterSet:k,fontWeight:g,fontFamily:S,iconfont:!0})}},{key:"getTextStyle",value:function(){var d=this.layer.getLayerConfig(),g=d.fontWeight,S=g===void 0?"400":g,C=d.fontFamily,k=C===void 0?"sans-serif":C,F=d.textAllowOverlap,$=F===void 0?!1:F,X=d.padding,me=X===void 0?[0,0]:X,je=d.textAnchor,_t=je===void 0?"center":je,Ot=d.textOffset,nn=Ot===void 0?[0,0]:Ot,Un=d.opacity,zn=Un===void 0?1:Un,ur=d.strokeOpacity,Pr=ur===void 0?1:ur,si=d.strokeWidth,kr=si===void 0?0:si,hr=d.stroke,Hr=hr===void 0?"#000":hr;return{fontWeight:S,fontFamily:k,textAllowOverlap:$,padding:me,textAnchor:_t,textOffset:nn,opacity:zn,strokeOpacity:Pr,strokeWidth:kr,stroke:Hr}}},{key:"generateGlyphLayout",value:function(d){var g=this,S=this.getFontServiceMapping(),C=this.layer.getLayerConfig(),k=C.spacing,F=k===void 0?2:k,$=C.textAnchor,X=$===void 0?"center":$,me=C.textOffset,je=this.rawEncodeData;this.glyphInfo=je.map(function(_t){var Ot=_t.shape,nn=Ot===void 0?"":Ot,Un=_t.id,zn=_t.size,ur=zn===void 0?1:zn,Pr=_t.textOffset?_t.textOffset:me||[0,0],si=_t.textAnchor?_t.textAnchor:X||"center",kr=QE(nn.toString(),S,ur,si,"left",F,Pr,d),hr=Wa(kr,Pr,!1);return _t.shaping=kr,_t.glyphQuads=hr,_t.centroid=(0,Ve.SI)(_t.coordinates),_t.originCentroid=_t.version==="GAODE2.x"?(0,Ve.SI)(_t.originCoordinates):_t.originCentroid=_t.centroid,g.glyphInfoMap[Un]={shaping:kr,glyphQuads:hr,centroid:(0,Ve.SI)(_t.coordinates)},_t})}},{key:"getFontServiceMapping",value:function(){var d=this.layer.getLayerConfig(),g=d.fontWeight,S=g===void 0?"400":g,C=d.fontFamily,k=C===void 0?"sans-serif":C;return this.fontService.getMappingByKey("".concat(k,"_").concat(S))}},{key:"getFontServiceCanvas",value:function(){var d=this.layer.getLayerConfig(),g=d.fontWeight,S=g===void 0?"400":g,C=d.fontFamily,k=C===void 0?"sans-serif":C;return this.fontService.getCanvasByKey("".concat(k,"_").concat(S))}},{key:"filterGlyphs",value:function(){var d=this,g=this.layer.getLayerConfig(),S=g.padding,C=S===void 0?[0,0]:S,k=g.textAllowOverlap,F=k===void 0?!1:k;if(!F){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var $=this.rendererService.getViewportSize(),X=$.width,me=$.height,je=new fx(X,me),_t=this.glyphInfo.filter(function(Ot){var nn=Ot.shaping,Un=Ot.id,zn=Un===void 0?0:Un,ur=Ot.version==="GAODE2.x"?Ot.originCentroid:Ot.centroid,Pr=Ot.size,si=Pr/16,kr=d.mapService.lngLatToContainer(ur),hr=je.placeCollisionBox({x1:nn.left*si-C[0],x2:nn.right*si+C[0],y1:nn.top*si-C[1],y2:nn.bottom*si+C[1],anchorPointX:kr.x,anchorPointY:kr.y}),Hr=hr.box;return Hr&&Hr.length?(je.insertCollisionBox(Hr,zn),!0):!1});_t.forEach(function(Ot){d.glyphInfoMap[Ot.id]=Ot})}}},{key:"initGlyph",value:function(){var d=this.layer.getLayerConfig(),g=d.iconfont,S=g===void 0?!1:g;S?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(S)}},{key:"updateTexture",value:function(){var d=this.rendererService.createTexture2D,g=this.getFontServiceCanvas();this.textureHeight=g.height,this.texture&&this.texture.destroy(),this.texture=d({data:g,mag:Ae.gl.LINEAR,min:Ae.gl.LINEAR,width:g.width,height:g.height}),this.textures=[this.texture]}},{key:"reBuildModel",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.filterGlyphs(),k.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:tS,fragmentShader:eS,triangulation:nS.bind(this),inject:this.getInject(),depth:{enable:!1}});case 3:S=k.sent,this.layer.models=[S];case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()}]),f}(gs);function pC(o){return vx.apply(this,arguments)}function vx(){return vx=(0,Fe.Z)(B().mark(function o(c){var f,h,d;return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!window.createImageBitmap){S.next=14;break}return S.next=3,fetch(c);case 3:return f=S.sent,S.t0=createImageBitmap,S.next=7,f.blob();case 7:return S.t1=S.sent,S.next=10,(0,S.t0)(S.t1);case 10:return h=S.sent,S.abrupt("return",h);case 14:return d=new window.Image,S.abrupt("return",new Promise(function(C){d.onload=function(){return C(d)},d.src=c,d.crossOrigin="Anonymous"}));case 16:case"end":return S.stop()}},o)})),vx.apply(this,arguments)}function vC(o){var c=mC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function mC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var gC=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,y5=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,qy=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,A1=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,m0=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,yC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,Ky=function(o){(0,za.Z)(f,o);var c=vC(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.mapTexture,S=d.heightfixed,C=S===void 0?!1:S,k=d.raisingHeight,F=k===void 0?0:k,$=d.topsurface,X=$===void 0?!0:$,me=d.sidesurface,je=me===void 0?!0:me,_t=d.sourceColor,Ot=d.targetColor,nn=0,Un=[1,1,1,1],zn=[1,1,1,1];_t&&Ot&&(Un=(0,Ve.CI)(_t),zn=(0,Ve.CI)(Ot),nn=1);var ur={u_sourceColor:Un,u_targetColor:zn,u_linearColor:nn,u_topsurface:Number(X),u_sidesurface:Number(je),u_heightfixed:Number(C),u_raisingHeight:Number(F)};g&&this.texture&&(ur.u_texture=this.texture,this.textures=[this.texture]);var Pr=this.getUniformsBufferInfo(ur);return Pr}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.loadTexture();case 2:return C.abrupt("return",this.buildModels());case 3:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return S=this.getShaders(),C=S.frag,k=S.vert,F=S.type,this.initUniformsBuffer(),me.next=4,this.layer.buildLayerModel({moduleName:F,vertexShader:k,fragmentShader:C,depth:{enable:!0},inject:this.getInject(),triangulation:zy});case 4:return $=me.sent,me.abrupt("return",[$]);case 6:case"end":return me.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getShaders",value:function(){var d=this.layer.getLayerConfig(),g=d.pickLight,S=d.mapTexture;return S?{frag:qy,vert:A1,type:"polygonExtrudeTexture"}:g?{frag:m0,vert:yC,type:"polygonExtrudePickLight"}:{frag:gC,vert:y5,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy(),this.textures=[]}},{key:"registerBuiltinAttributes",value:function(){var d=this.layer.getSource().extent,g=d,S=this.layer.coordCenter||this.layer.getSource().center,C=g[2]-g[0],k=g[3]-g[1];if(this.mapService.version==="GAODE2.x"){var F=this.mapService.coordToAMap2RelativeCoordinates([d[0],d[1]],S),$=(0,On.Z)(F,2),X=$[0],me=$[1],je=this.mapService.coordToAMap2RelativeCoordinates([d[2],d[3]],S),_t=(0,On.Z)(je,2),Ot=_t[0],nn=_t[1];C=Ot-X,k=nn-me,g=[X,me,Ot,nn]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Ae.GC.Attribute,descriptor:{name:"a_uvs",shaderLocation:_e.UV,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(zn,ur,Pr){var si=Pr[0],kr=Pr[1];return[(si-g[0])/C,(kr-g[1])/k,Pr[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ae.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(zn,ur,Pr,si,kr){return kr}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(zn){var ur=zn.size,Pr=ur===void 0?10:ur;return Array.isArray(Pr)?[Pr[0]]:[Pr]}}})}},{key:"loadTexture",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(S=this.layer.getLayerConfig(),C=S.mapTexture,k=this.rendererService.createTexture2D,this.texture=k({height:1,width:1}),!C){X.next=8;break}return X.next=6,pC(C);case 6:F=X.sent,this.texture=k({data:F,width:F.width,height:F.height,wrapS:Ae.gl.CLAMP_TO_EDGE,wrapT:Ae.gl.CLAMP_TO_EDGE,min:Ae.gl.LINEAR,mag:Ae.gl.LINEAR});case 8:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()}]),f}(gs);function iS(o){var c=_C();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function _C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var bC=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,Qy=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,Hg=function(o){(0,za.Z)(f,o);var c=iS(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d={},g=this.getUniformsBufferInfo(d);return g}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return S=this.getShaders(),C=S.frag,k=S.vert,F=S.type,this.initUniformsBuffer(),me.next=4,this.layer.buildLayerModel({moduleName:F,vertexShader:k,fragmentShader:C,inject:this.getInject(),triangulation:zy,depth:{enable:!0}});case 4:return $=me.sent,me.abrupt("return",[$]);case 6:case"end":return me.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getShaders",value:function(){return{frag:bC,vert:Qy,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ae.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g,S,C,k,F){return F}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(g){var S=g.size,C=S===void 0?10:S;return Array.isArray(C)?[C[0]]:[C]}}})}}]),f}(gs);function mx(o){var c=aS();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function aS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var xC=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Gd=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,gx=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,oS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,Xd=function(o){(0,za.Z)(f,o);var c=mx(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.raisingHeight,S=g===void 0?0:g,C=d.opacityLinear,k=C===void 0?{enable:!1,dir:"in"}:C,F={u_raisingHeight:Number(S),u_opacitylinear:Number(k.enable),u_dir:k.dir==="in"?1:0},$=this.getUniformsBufferInfo(F);return $}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X;return B().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return S=this.getModelParams(),C=S.frag,k=S.vert,F=S.triangulation,$=S.type,this.initUniformsBuffer(),this.layer.triangulation=F,je.next=5,this.layer.buildLayerModel({moduleName:$,vertexShader:k,fragmentShader:C,inject:this.getInject(),triangulation:F,primitive:Ae.gl.TRIANGLES,depth:{enable:!1}});case 5:return X=je.sent,je.abrupt("return",[X]);case 7:case"end":return je.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){var d=this.layer.getLayerConfig(),g=d.opacityLinear,S=g===void 0?{enable:!1,dir:"in"}:g;S.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Ae.GC.Attribute,descriptor:{name:"a_linear",shaderLocation:_e.LINEAR,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(k,F,$){return[$[3],$[4],$[5]]}}})}},{key:"getModelParams",value:function(){var d=this.layer.getLayerConfig(),g=d.opacityLinear,S=g===void 0?{enable:!1}:g;return S.enable?{frag:Gd,vert:gx,type:"polygonLinear",triangulation:Fy}:{frag:xC,vert:oS,type:"polygonFill",triangulation:Ve.yR}}}]),f}(gs);function EC(o){var c=SC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function SC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var sS=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,uS=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,Wg=function(o){(0,za.Z)(f,o);var c=EC(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.watercolor,S=g===void 0?"#6D99A8":g,C=d.watercolor2,k=C===void 0?"#0F121C":C,F={u_watercolor:(0,Ve.CI)(S),u_watercolor2:(0,Ve.CI)(k),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};this.textures=[this.texture1,this.texture2,this.texture3];var $=this.getUniformsBufferInfo(F);return $}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.loadTexture(),C.abrupt("return",this.buildModels());case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:uS,fragmentShader:sS,inject:this.getInject(),triangulation:nv,primitive:Ae.gl.TRIANGLES,depth:{enable:!1}});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d,g,S;(d=this.texture1)===null||d===void 0||d.destroy(),(g=this.texture2)===null||g===void 0||g.destroy(),(S=this.texture3)===null||S===void 0||S.destroy()}},{key:"registerBuiltinAttributes",value:function(){var d=this.layer.getSource().extent,g=(0,On.Z)(d,4),S=g[0],C=g[1],k=g[2],F=g[3],$=k-S,X=F-C;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Ae.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(je,_t,Ot,nn){var Un=je.version==="GAODE2.x"?je.originCoordinates[0][nn]:Ot,zn=(0,On.Z)(Un,2),ur=zn[0],Pr=zn[1];return[(ur-S)/$,(Pr-C)/X]}}})}},{key:"loadTexture",value:function(){var d=this,g=this.rendererService.createTexture2D,S={height:0,width:0};this.texture1=g(S),this.texture2=g(S),this.texture3=g(S),C(function(F){d.texture1=k(F[0]),d.texture2=k(F[1]),d.texture3=k(F[2]),d.layerService.reRender()});function C(F){var $=0,X=[],me=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];me.map(function(je){var _t=new Image;_t.crossOrigin="",_t.src=je,X.push(_t),_t.onload=function(){$++,$===3&&F(X)}})}function k(F){return g({data:F,width:F.width,height:F.height,wrapS:Ae.gl.MIRRORED_REPEAT,wrapT:Ae.gl.MIRRORED_REPEAT,min:Ae.gl.LINEAR,mag:Ae.gl.LINEAR})}}}]),f}(gs);function Vm(o){var c=yx();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function yx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var _x=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,lS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,bx=function(o){(0,za.Z)(f,o);var c=Vm(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.speed,S=g===void 0?.5:g,C={u_speed:S,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};this.textures=[this.texture];var k=this.getUniformsBufferInfo(C);return k}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.loadTexture(),C.abrupt("return",this.buildModels());case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:lS,fragmentShader:_x,triangulation:nv,inject:this.getInject(),primitive:Ae.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy()}},{key:"registerBuiltinAttributes",value:function(){var d=this.layer.getSource().extent,g=(0,On.Z)(d,4),S=g[0],C=g[1],k=g[2],F=g[3],$=k-S,X=F-C;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Ae.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(je,_t,Ot,nn){var Un=je.version==="GAODE2.x"?je.originCoordinates[0][nn]:Ot,zn=(0,On.Z)(Un,2),ur=zn[0],Pr=zn[1];return[(ur-S)/$,(Pr-C)/X]}}})}},{key:"loadTexture",value:function(){var d=this,g=this.layer.getLayerConfig(),S=g.waterTexture,C=this.rendererService.createTexture2D;this.texture=C({height:1,width:1});var k=new Image;k.crossOrigin="",S?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),k.src=S):k.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",k.onload=function(){d.texture=C({data:k,width:k.width,height:k.height,wrapS:Ae.gl.MIRRORED_REPEAT,wrapT:Ae.gl.MIRRORED_REPEAT,min:Ae.gl.LINEAR,mag:Ae.gl.LINEAR}),d.layerService.reRender()}}}]),f}(gs),wC={fill:Xd,line:v0,extrude:Ky,text:rS,point_fill:Xy,point_image:Zm,point_normal:w1,point_extrude:sx,water:bx,ocean:Wg,extrusion:Hg},TC=wC;function AC(o){var c=C1();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function C1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var xx=function(o){(0,za.Z)(f,o);var c=AC(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"type","PolygonLayer"),(0,He.Z)((0,Ti.Z)(h),"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]),h}return(0,dn.Z)(f,[{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=this.getModelType(),this.layerModel=new TC[S](this),k.next=4,this.initLayerModels();case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getModelType",value:function(){var d,g=this.styleAttributeService.getLayerStyleAttribute("shape"),S=g==null||(d=g.scale)===null||d===void 0?void 0:d.field;return S==="fill"||!S?"fill":S==="extrude"?"extrude":S==="extrusion"?"extrusion":S==="water"?"water":S==="ocean"?"ocean":S==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var d=this.getEncodedData(),g=this.getLayerConfig(),S=g.shape2d,C=g.shape3d,k=this.iconService.getIconMap(),F=d.find(function(X){return X.hasOwnProperty("shape")});if(F){var $=F.shape;return $==="dot"?"point_normal":(S==null?void 0:S.indexOf($))!==-1?"point_fill":(C==null?void 0:C.indexOf($))!==-1?"point_extrude":k.hasOwnProperty($)?"point_image":"text"}else return"fill"}}]),f}(cu),O1=function(){function o(c){var f=c.rendererService,h=c.layerService,d=c.parent;(0,Dt.Z)(this,o),(0,He.Z)(this,"tileResource",new Map),(0,He.Z)(this,"layerTiles",[]),this.rendererService=f,this.layerService=h,this.parent=d}return(0,dn.Z)(o,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(f){return this.layerTiles.some(function(h){return h.key===f})}},{key:"addTile",value:function(f){this.layerTiles.push(f)}},{key:"getTile",value:function(f){return this.layerTiles.find(function(h){return h.key===f})}},{key:"getVisibleTileBylngLat",value:function(f){return this.layerTiles.find(function(h){return h.isLoaded&&h.visible&&h.lnglatInBounds(f)})}},{key:"removeTile",value:function(f){var h=this.layerTiles.findIndex(function(g){return g.key===f}),d=this.layerTiles.splice(h,1);d[0]&&d[0].destroy()}},{key:"updateTileVisible",value:function(f){var h=this.getTile(f.key);if(f.isVisible)if(f.parent){var d=this.isChildrenLoaded(f.parent);h==null||h.updateVisible(d)}else h==null||h.updateVisible(!0);else if(f.parent){var g=this.isChildrenLoaded(f.parent);h==null||h.updateVisible(!g)}else h==null||h.updateVisible(!1)}},{key:"isParentLoaded",value:function(f){var h=f.parent;if(!h)return!0;var d=this.getTile(h==null?void 0:h.key);return!!(d!=null&&d.isLoaded)}},{key:"isChildrenLoaded",value:function(f){var h=this,d=f==null?void 0:f.children;return d.length===0?!0:d.every(function(g){var S=h.getTile(g==null?void 0:g.key);return S?(S==null?void 0:S.isLoaded)===!0:!0})}},{key:"render",value:function(){var c=(0,Fe.Z)(B().mark(function h(){var d=this,g,S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g=this.getRenderLayers(),S=g.map(function(){var F=(0,Fe.Z)(B().mark(function $(X){return B().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,d.layerService.renderTileLayer(X);case 2:case"end":return je.stop()}},$)}));return function($){return F.apply(this,arguments)}}()),k.next=4,Promise.all(S);case 4:case"end":return k.stop()}},h,this)}));function f(){return c.apply(this,arguments)}return f}()},{key:"getRenderLayers",value:function(){var f=this.layerTiles.filter(function(d){return d.visible&&d.isLoaded}),h=[];return f.map(function(d){return h.push.apply(h,(0,Ht.Z)(d.getLayers()))}),h}},{key:"getLayers",value:function(){var f=this.layerTiles.filter(function(d){return d.isLoaded}),h=[];return f.map(function(d){return h.push.apply(h,(0,Ht.Z)(d.getLayers()))}),h}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(f){return f.destroy()}),this.tileResource.clear()}}]),o}(),cS=D(32676);function fS(o,c,f){f===void 0&&(f={});var h=Ct(o),d=Ct(c),g=cS.union(h.coordinates,d.coordinates);return g.length===0?null:g.length===1?(0,cn.yu)(g[0],f.properties):(0,cn.tw)(g,f.properties)}var hS=fS,CC=function(){function o(){(0,Dt.Z)(this,o)}return(0,dn.Z)(o,[{key:"getCombineFeature",value:function(f){var h=null,d=f[0];return f.map(function(g){var S=cn.yu(g.coordinates);h===null?h=S:h=hS(h,S)}),d&&(h.properties=(0,De.Z)({},d)),h}}]),o}(),$g="select",X0="active",Ex=function(){function o(c){var f=c.layerService,h=c.tileLayerService,d=c.parent;(0,Dt.Z)(this,o),(0,He.Z)(this,"tilePickID",new Map),this.layerService=f,this.tileLayerService=h,this.parent=d,this.tileSourceService=new CC}return(0,dn.Z)(o,[{key:"pickRender",value:function(f){var h=this.tileLayerService.getVisibleTileBylngLat(f.lngLat);if(h){var d=h.getMainLayer();d==null||d.layerPickService.pickRender(f)}}},{key:"pick",value:function(){var c=(0,Fe.Z)(B().mark(function h(d,g){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(S=this.parent.getContainer(),C=S.pickingService,d.type!=="RasterLayer"){X.next=8;break}if(k=this.tileLayerService.getVisibleTileBylngLat(g.lngLat),!(k&&k.getMainLayer()!==void 0)){X.next=7;break}return F=k.getMainLayer(),X.abrupt("return",F.layerPickService.pickRasterLayer(F,g,this.parent));case 7:return X.abrupt("return",!1);case 8:return this.pickRender(g),X.abrupt("return",C.pickFromPickingFBO(d,g));case 10:case"end":return X.stop()}},h,this)}));function f(h,d){return c.apply(this,arguments)}return f}()},{key:"selectFeature",value:function(f){var h=(0,On.Z)(f,3),d=h[0],g=h[1],S=h[2],C=this.color2PickId(d,g,S);this.tilePickID.set($g,C),this.updateHighLight(d,g,S,$g)}},{key:"highlightPickedFeature",value:function(f){var h=(0,On.Z)(f,3),d=h[0],g=h[1],S=h[2],C=this.color2PickId(d,g,S);this.tilePickID.set(X0,C),this.updateHighLight(d,g,S,X0)}},{key:"updateHighLight",value:function(f,h,d,g){this.tileLayerService.tiles.map(function(S){var C=S.getMainLayer();switch(g){case $g:C==null||C.hooks.beforeSelect.call([f,h,d]);break;case X0:C==null||C.hooks.beforeHighlight.call([f,h,d]);break}})}},{key:"setPickState",value:function(){var f=this.tilePickID.get($g),h=this.tilePickID.get(X0);if(f){var d=this.pickId2Color(f),g=(0,On.Z)(d,3),S=g[0],C=g[1],k=g[2];this.updateHighLight(S,C,k,$g);return}if(h){var F=this.pickId2Color(h),$=(0,On.Z)(F,3),X=$[0],me=$[1],je=$[2];this.updateHighLight(X,me,je,X0);return}}},{key:"color2PickId",value:function(f,h,d){return(0,Ve.W0)(new Uint8Array([f,h,d]))}},{key:"pickId2Color",value:function(f){return(0,Ve.Z6)(f)}},{key:"getFeatureById",value:function(f){var h=this.tileLayerService.getTiles().filter(function(g){return g.visible}),d=[];return h.forEach(function(g){d.push.apply(d,(0,Ht.Z)(g.getFeatureById(f)))}),d}},{key:"pickRasterLayer",value:function(){return!1}}]),o}();function dS(o){var c=OC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function OC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var MC=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,RC=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function Sx(o){var c=o.coordinates;return{vertices:(0,Ht.Z)(c),indices:[0],size:c.length}}var PC=function(o){(0,za.Z)(f,o);var c=dS(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.blend,S=d.strokeOpacity,C=S===void 0?1:S,k=d.strokeWidth,F=k===void 0?0:k,$=d.stroke,X=$===void 0?"#fff":$,me={u_stroke_color:(0,Ve.CI)(X),u_additive:g==="additive"?1:0,u_stroke_opacity:C,u_stroke_width:F},je=this.getUniformsBufferInfo(me);return je}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.layer.triangulation=Sx,this.initUniformsBuffer(),k.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:RC,fragmentShader:MC,inject:this.getInject(),triangulation:Sx,depth:{enable:!1},primitive:Ae.gl.POINTS});case 4:return S=k.sent,k.abrupt("return",[S]);case 6:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(g){var S=g.size,C=S===void 0?1:S;return Array.isArray(C)?[C[0]]:[C]}}})}}]),f}(gs);function IC(o){var c=Tx();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Tx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var _5=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,pS=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,kC=Ve.rU.isNumber,Ax=function(o){(0,za.Z)(f,o);var c=IC(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"raiseCount",0),(0,He.Z)((0,Ti.Z)(h),"raiseRepeat",0),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.animateOption,S=g===void 0?{enable:!1,speed:.01,repeat:!1}:g,C=d.opacity,k=C===void 0?1:C,F=d.sourceColor,$=d.targetColor,X=d.pickLight,me=X===void 0?!1:X,je=d.heightfixed,_t=je===void 0?!0:je,Ot=d.opacityLinear,nn=Ot===void 0?{enable:!1,dir:"up"}:Ot,Un=d.lightEnable,zn=Un===void 0?!0:Un,ur=0,Pr=[0,0,0,0],si=[0,0,0,0];if(F&&$&&(Pr=(0,Ve.CI)(F),si=(0,Ve.CI)($),ur=1),this.raiseCount<1&&this.raiseRepeat>0&&S.enable){var kr=S.speed,hr=kr===void 0?.01:kr;this.raiseCount+=hr,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var Hr={u_sourceColor:Pr,u_targetColor:si,u_linearColor:ur,u_pickLight:Number(me),u_heightfixed:Number(_t),u_r:S.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:kC(k)?k:1,u_opacitylinear:Number(nn.enable),u_opacitylinear_dir:nn.dir==="up"?1:0,u_lightEnable:Number(zn)},ha=this.getUniformsBufferInfo(Hr);return ha}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),C.abrupt("return",this.buildModels());case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.layer.getLayerConfig(),C=S.animateOption.repeat,k=C===void 0?1:C,this.raiseRepeat=k,X.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:pS,fragmentShader:_5,triangulation:Z0,depth:{enable:!0},inject:this.getInject(),cull:{enable:!0,face:(0,Ve.fj)(this.mapService.version)},blend:this.getBlend()});case 4:return F=X.sent,X.abrupt("return",[F]);case 6:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g){var S=g.size;if(S){var C=[];return Array.isArray(S)&&(C=S.length===2?[S[0],S[0],S[1]]:S),Array.isArray(S)||(C=[S,S,S]),C}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ae.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:_e.NORMAL,buffer:{usage:Ae.gl.STATIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g,S,C,k,F){return F}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ae.GC.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g){var S=(0,Ve.SI)(g.coordinates);return tf([S[0],S[1]])}}})}}]),f}(gs);function LC(o){var c=vS();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function vS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var DC=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,hc=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`,_d=function(o){(0,za.Z)(f,o);var c=LC(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.strokeOpacity,S=g===void 0?1:g,C=d.strokeWidth,k=C===void 0?0:C,F=d.blend,$=d.blur,X=$===void 0?0:$;this.layer.getLayerConfig();var me={u_additive:F==="additive"?1:0,u_stroke_opacity:S,u_stroke_width:k,u_blur:X},je=this.getUniformsBufferInfo(me);return je}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.initUniformsBuffer(),C.abrupt("return",this.buildModels());case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.layer.triangulation=l0,k.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:hc,fragmentShader:DC,triangulation:l0,inject:this.getInject(),depth:{enable:!0},blend:this.getBlend()});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"animateOption2Array",value:function(d){return[d.enable?0:1,d.speed||1,d.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ae.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:_e.EXTRUDE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(S,C,k,F){var $=(0,On.Z)(k,3),X=$[0],me=$[1],je=$[2],_t=Gs.fromValues(0,0,1),Ot=Gs.fromValues(X,0,je),nn=X>=0?Gs.angle(_t,Ot):Math.PI*2-Gs.angle(_t,Ot),Un=Math.PI*2-Math.asin(me/100),zn=fc.create();fc.rotateY(zn,zn,nn),fc.rotateX(zn,zn,Un);var ur=Gs.fromValues(1,1,0);Gs.transformMat4(ur,ur,zn),Gs.normalize(ur,ur);var Pr=Gs.fromValues(-1,1,0);Gs.transformMat4(Pr,Pr,zn),Gs.normalize(Pr,Pr);var si=Gs.fromValues(-1,-1,0);Gs.transformMat4(si,si,zn),Gs.normalize(si,si);var kr=Gs.fromValues(1,-1,0);Gs.transformMat4(kr,kr,zn),Gs.normalize(kr,kr);var hr=[].concat((0,Ht.Z)(ur),(0,Ht.Z)(Pr),(0,Ht.Z)(si),(0,Ht.Z)(kr)),Hr=F%4*3;return[hr[Hr],hr[Hr+1],hr[Hr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?5:C;return Array.isArray(k)?[k[0]]:[k]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Ae.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:_e.SHAPE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.shape,k=C===void 0?2:C,F=d.layer.getLayerConfig().shape2d,$=F.indexOf(k);return[$]}}})}}]),f}(gs);function Hm(o){var c=M1();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function M1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Cx=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,mS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,NC=function(o){(0,za.Z)(f,o);var c=Hm(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"meter2coord",1),(0,He.Z)((0,Ti.Z)(h),"isMeter",!1),(0,He.Z)((0,Ti.Z)(h),"radian",0),(0,He.Z)((0,Ti.Z)(h),"updateTexture",function(){var C=h.rendererService.createTexture2D;if(h.texture){h.texture.update({data:h.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),h.layerService.throttleRenderLayers();return}h.texture=C({data:h.iconService.getCanvas(),mag:Ae.gl.LINEAR,min:Ae.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:h.iconService.canvasHeight||128,mipmap:!0}),h.textures=[h.texture]}),h}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.raisingHeight,S=g===void 0?0:g,C=d.heightfixed,k=C===void 0?!1:C,F=d.unit,$=F===void 0?"pixel":F;if(this.rendererService.getDirty()){var X;(X=this.texture)===null||X===void 0||X.bind()}var me={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(k),u_raisingHeight:Number(S),u_size_unit:jg[$]},je=this.getUniformsBufferInfo(me);return je}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Cv)}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),C.abrupt("return",this.buildModels());case 3:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:mS,fragmentShader:Cx,triangulation:Cv,depth:{enable:!1},inject:this.getInject(),cull:{enable:!0,face:(0,Ve.fj)(this.mapService.version)}});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;this.iconService.off("imageUpdate",this.updateTexture),(d=this.texture)===null||d===void 0||d.destroy()}},{key:"registerBuiltinAttributes",value:function(){var d=this;this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(S){var C=d.iconService.getIconMap(),k=S.shape,F=C[k]||{x:-64,y:-64},$=F.x,X=F.y;return[$,X]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ae.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:_e.EXTRUDE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(S,C,k,F){var $=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],X=F%4*3;return[$[X],$[X+1],$[X+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:_e.SIZE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(S){var C=S.size,k=C===void 0?5:C;return Array.isArray(k)?[k[0]]:[k]}}})}}]),f}(gs);function BC(o){var c=FC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function FC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var gS=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,zC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`,UC=function(o){(0,za.Z)(f,o);var c=BC(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.blend,S=d.speed,C=S===void 0?1:S,k=d.unit,F=k===void 0?"pixel":k,$={u_additive:g==="additive"?1:0,u_size_unit:jg[F],u_speed:C,u_time:this.layer.getLayerAnimateTime()},X=this.getUniformsBufferInfo($);return X}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Cv)}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:zC,fragmentShader:gS,triangulation:Cv,inject:this.getInject(),depth:{enable:!1}});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"animateOption2Array",value:function(d){return[d.enable?0:1,d.speed||1,d.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ae.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:_e.EXTRUDE,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:3,update:function(g,S,C,k){var F=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],$=k%4*3;return[F[$],F[$+1],F[$+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ae.GC.Attribute,descriptor:{shaderLocation:_e.SIZE,name:"a_Size",buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:1,update:function(g){var S=g.size,C=S===void 0?5:S;return Array.isArray(C)?[C[0]]:[C]}}})}}]),f}(gs),Ox={fillImage:NC,fill:Xy,radar:UC,image:Zm,normal:w1,simplePoint:PC,extrude:sx,text:rS,earthFill:_d,earthExtrude:Ax},jC=Ox;function ZC(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=Mx(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function Mx(o,c){if(o){if(typeof o=="string")return R1(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return R1(o,c)}}function R1(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}function VC(o){var c=HC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function HC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var P1=function(o){(0,za.Z)(f,o);var c=VC(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"type","PointLayer"),(0,He.Z)((0,Ti.Z)(h),"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,He.Z)((0,Ti.Z)(h),"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,He.Z)((0,Ti.Z)(h),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),h}return(0,dn.Z)(f,[{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new jC[S](this),k.next=5,this.initLayerModels();case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"rebuildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.buildModels();case 2:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var d=this.shapeOption,g=d.field,S=d.values,C=this.getLayerConfig(),k=C.shape2d,F=this.iconService.getIconMap();if(g&&(k==null?void 0:k.indexOf(g))!==-1)return"fill";if(S==="text")return"text";if(S&&S instanceof Array){var $=ZC(S),X;try{for($.s();!(X=$.n()).done;){var me=X.value;if(typeof me=="string"&&F.hasOwnProperty(me))return"image"}}catch(je){$.e(je)}finally{$.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var d=this.getModelType(),g={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return g[d]}},{key:"getModelType",value:function(){var d=this.getEncodedData(),g=this.getLayerConfig(),S=g.shape2d,C=g.shape3d,k=g.billboard,F=k===void 0?!0:k,$=this.iconService.getIconMap(),X=d.find(function(je){return je.hasOwnProperty("shape")});if(X){var me=X.shape;return me==="dot"?"normal":me==="simple"?"simplePoint":me==="radar"?"radar":this.layerType==="fillImage"||F===!1?"fillImage":(S==null?void 0:S.indexOf(me))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(C==null?void 0:C.indexOf(me))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":$.hasOwnProperty(me)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),f}(cu);function WC(o){return o==="PolygonLayer"?xx:o==="LineLayer"?Pv:P1}function I1(o){return["PolygonLayer","LineLayer"].indexOf(o)!==-1}function Rx(o){var c=yS();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function yS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var bd=function(o){(0,za.Z)(f,o);var c=Rx(f);function f(h,d){var g;return(0,Dt.Z)(this,f),g=c.call(this),(0,He.Z)((0,Ti.Z)(g),"visible",!0),(0,He.Z)((0,Ti.Z)(g),"layers",[]),(0,He.Z)((0,Ti.Z)(g),"isLoaded",!1),(0,He.Z)((0,Ti.Z)(g),"tileMaskLayers",[]),g.parent=d,g.sourceTile=h,g.x=h.x,g.y=h.y,g.z=h.z,g.key="".concat(g.x,"_").concat(g.y,"_").concat(g.z),g}return(0,dn.Z)(f,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(d){var g=(0,On.Z)(this.sourceTile.bounds,4),S=g[0],C=g[1],k=g[2],F=g[3],$=d.lng,X=d.lat;return $>=S&&$<=k&&X>=C&&X<=F}},{key:"getLayerOptions",value:function(){var d,g=this.parent.getLayerConfig();return(0,De.Z)((0,De.Z)({},g),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:I1(this.parent.type),mask:g.mask||((d=g.maskLayers)===null||d===void 0?void 0:d.length)!==0&&g.enableMask})}},{key:"getMaskLayer",value:function(){var d=this,g=this.parent.getLayerConfig(),S=g.maskLayers,C=[];return S==null||S.forEach(function(k){if(!k.tileLayer)return C.push(k),k;var F=k.tileLayer,$=F.getTile(d.sourceTile.key),X=$==null?void 0:$.getLayers()[0];X&&C.push(X)}),C}},{key:"addTileMask",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k;return B().wrap(function($){for(;;)switch($.prev=$.next){case 0:return S=new xx({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),C=(0,Ae.e7)(this.parent.container),S.setContainer(C),$.next=5,S.init();case 5:return this.tileMask=S,k=this.getMainLayer(),k!==void 0&&(k.tileMask=S),$.abrupt("return",S);case 9:case"end":return $.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"addMask",value:function(){var h=(0,Fe.Z)(B().mark(function g(S,C){var k;return B().wrap(function($){for(;;)switch($.prev=$.next){case 0:return k=(0,Ae.e7)(this.parent.container),C.setContainer(k),$.next=4,C.init();case 4:S.addMask(C),this.tileMaskLayers.push(C);case 6:case"end":return $.stop()}},g,this)}));function d(g,S){return h.apply(this,arguments)}return d}()},{key:"addLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(S){var C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return S.isTileLayer=!0,C=(0,Ae.e7)(this.parent.container),S.setContainer(C),this.layers.push(S),F.next=6,S.init();case 6:case"end":return F.stop()}},g,this)}));function d(g){return h.apply(this,arguments)}return d}()},{key:"updateVisible",value:function(d){this.visible=d,this.updateOptions("visible",d)}},{key:"updateOptions",value:function(d,g){this.layers.forEach(function(S){S.updateLayerConfig((0,He.Z)({},d,g))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(d){return[]}},{key:"getFeatureById",value:function(d){return[]}},{key:"destroy",value:function(){var d;(d=this.tileMask)===null||d===void 0||d.destroy(),this.layers.forEach(function(g){return g.destroy()})}}]),f}(If.EventEmitter);function Gg(o){var c=$C();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function $C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var GC=function(o){(0,za.Z)(f,o);var c=Gg(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.getSourceOption(),C=S.data.features[0].properties,k=new Pv().source(S.data,S.options).size(1).shape("line").color("red"),F=new P1({minZoom:this.z-1,maxZoom:this.z+1,textAllowOverlap:!0}).source([C],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),X.next=6,this.addLayer(k);case 6:return X.next=8,this.addLayer(F);case 8:this.isLoaded=!0;case 9:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getSourceOption",value:function(){var d=this.parent.getSource(),g=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:g},options:{parser:{type:"geojson"},transforms:d.transforms}}}}]),f}(bd);function XC(o){var c=YC();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function YC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var qC=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,KC=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`,_S=function(o){(0,za.Z)(f,o);var c=XC(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.opacity,S=d.brightness,C=d.contrast,k=d.saturation,F=d.gamma,$={u_opacity:(0,Ve.LS)(g,1),u_brightness:(0,Ve.LS)(S,1),u_contrast:(0,Ve.LS)(C,1),u_saturation:(0,Ve.LS)(k,1),u_gamma:(0,Ve.LS)(F,1)};this.textures=[this.texture];var X=this.getUniformsBufferInfo($);return X}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.loadTexture();case 2:return C.abrupt("return",this.buildModels());case 3:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy()}},{key:"loadTexture",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k;return B().wrap(function($){for(;;)switch($.prev=$.next){case 0:return S=this.rendererService.createTexture2D,this.texture=S({height:1,width:1}),C=this.layer.getSource(),$.next=5,C.data.images;case 5:k=$.sent,this.texture=S({data:k[0],width:k[0].width,height:k[0].height,mag:Ae.gl.LINEAR,min:Ae.gl.LINEAR});case 7:case"end":return $.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:KC,fragmentShader:qC,triangulation:Nm,primitive:Ae.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g,S,C){return[C[3],C[4]]}}})}}]),f}(gs),Px={image:_S},QC=Px;function JC(o){var c=Jy();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Jy(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Ix=function(o){(0,za.Z)(f,o);var c=JC(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"type","ImageLayer"),h}return(0,dn.Z)(f,[{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=this.getModelType(),this.layerModel=new QC[S](this),k.next=4,this.initLayerModels();case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getDefaultConfig",value:function(){var d=this.getModelType(),g={image:{}};return g[d]}},{key:"getModelType",value:function(){return"image"}}]),f}(cu);function eO(o){var c=tO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function tO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var nO=function(o){(0,za.Z)(f,o);var c=eO(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.parent.getLayerAttributeConfig(),C=this.getLayerOptions(),k=this.getSourceOption(),F=new Ix((0,De.Z)({},C)).source(k.data,k.options),S&&Object.keys(S).forEach(function(me){var je,_t,Ot=me;F[Ot]((je=S[Ot])===null||je===void 0?void 0:je.field,(_t=S[Ot])===null||_t===void 0?void 0:_t.values)}),X.next=7,this.addLayer(F);case 7:this.isLoaded=!0;case 8:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getSourceOption",value:function(){var d=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:d.transforms}}}}]),f}(bd);function rO(o){var c=iO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function iO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var aO=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,oO=`layout(location = 0) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,sO=function(o){(0,za.Z)(f,o);var c=rO(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.opacity,S=g===void 0?1:g,C=d.color,k=C===void 0?"#000":C,F={u_color:(0,Ve.CI)(k),u_opacity:S||1},$=this.getUniformsBufferInfo(F);return $}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this.initUniformsBuffer(),k.next=3,this.layer.buildLayerModel({moduleName:"mask",vertexShader:oO,fragmentShader:aO,triangulation:nv,depth:{enable:!1},pick:!1});case 3:return S=k.sent,k.abrupt("return",[S]);case 5:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;d&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),f}(gs),uO={fill:sO},lO=uO;function kx(o){var c=cO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function cO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var bS=function(o){(0,za.Z)(f,o);var c=kx(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"type","MaskLayer"),h}return(0,dn.Z)(f,[{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=this.getModelType(),this.layerModel=new lO[S](this),k.next=4,this.initLayerModels();case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getModelType",value:function(){return"fill"}}]),f}(cu);function e_(o){var c=fO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function fO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var hO=function(o){(0,za.Z)(f,o);var c=e_(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.parent.getLayerAttributeConfig(),C=this.getLayerOptions(),k=this.getSourceOption(),F=new bS((0,De.Z)({},C)).source(k.data,k.options),S&&Object.keys(S).forEach(function(me){var je,_t,Ot=me;F[Ot]((je=S[Ot])===null||je===void 0?void 0:je.field,(_t=S[Ot])===null||_t===void 0?void 0:_t.values)}),X.next=7,this.addLayer(F);case 7:this.isLoaded=!0;case 8:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getFeatures",value:function(d){if(!d)return[];var g=this.sourceTile.data;return g.getTileData(d)}},{key:"getSourceOption",value:function(){var d=this.parent.getSource(),g=this.parent.getLayerConfig(),S=g.sourceLayer,C=g.featureId,k=this.getFeatures(S);return{data:{type:"FeatureCollection",features:k},options:{parser:{type:"geojson",featureId:C},transforms:d.transforms}}}}]),f}(bd);function xS(o){var c=ES();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function ES(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var SS=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,dO=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,Lx=function(o){(0,za.Z)(f,o);var c=xS(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.opacity,S=g===void 0?1:g,C=d.clampLow,k=C===void 0?!0:C,F=d.clampHigh,$=F===void 0?!0:F,X=d.noDataValue,me=X===void 0?-9999999:X,je=d.domain,_t=d.rampColors,Ot=je||(0,Ve.ZB)(_t);this.colorTexture=this.layer.textureService.getColorTexture(_t,Ot);var nn={u_domain:Ot,u_opacity:S||1,u_noDataValue:me,u_clampLow:k?1:0,u_clampHigh:(typeof $!="undefined"?$:k)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};this.textures=[this.texture,this.colorTexture];var Un=this.getUniformsBufferInfo(nn);return Un}},{key:"getRasterData",value:function(){var h=(0,Fe.Z)(B().mark(function g(S){var C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(!Array.isArray(S.data)){me.next=4;break}return me.abrupt("return",{data:S.data,width:S.width,height:S.height});case 4:return me.next=6,S.data;case 6:return C=me.sent,k=C.rasterData,F=C.width,$=C.height,me.abrupt("return",{data:Array.from(k),width:F,height:$});case 11:case"end":return me.stop()}},g)}));function d(g){return h.apply(this,arguments)}return d}()},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.buildModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me,je,_t,Ot;return B().wrap(function(Un){for(;;)switch(Un.prev=Un.next){case 0:return this.initUniformsBuffer(),S=this.layer.getSource(),C=this.rendererService,k=C.createTexture2D,F=C.queryVerdorInfo,$=S.data.dataArray[0],Un.next=6,this.getRasterData($);case 6:return X=Un.sent,me=X.data,je=X.width,_t=X.height,this.texture=k({data:new Float32Array(me),width:je,height:_t,format:F()==="WebGL1"?Ae.gl.LUMINANCE:Ae.gl.RED,type:Ae.gl.FLOAT,alignment:1}),Un.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:dO,fragmentShader:SS,triangulation:Nm,primitive:Ae.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1});case 13:return Ot=Un.sent,Un.abrupt("return",[Ot]);case 15:case"end":return Un.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d,g;(d=this.texture)===null||d===void 0||d.destroy(),(g=this.colorTexture)===null||g===void 0||g.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{shaderLocation:_e.UV,name:"a_Uv",buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g,S,C){return[C[3],C[4]]}}})}}]),f}(gs),pO=["data"],vO=["rasterData"];function mO(o){var c=gO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function gO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Dx=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,Wm=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,yO=function(o){(0,za.Z)(f,o);var c=mO(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"dataOption",{}),h}return(0,dn.Z)(f,[{key:"getUninforms",value:function(){var d=this.getCommonUniformsInfo(),g=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,De.Z)((0,De.Z)({},d.uniformsOption),g.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.opacity,S=g===void 0?1:g,C=d.noDataValue,k=C===void 0?0:C,F=this.dataOption,$=F.rMinMax,X=$===void 0?[0,255]:$,me=F.gMinMax,je=me===void 0?[0,255]:me,_t=F.bMinMax,Ot=_t===void 0?[0,255]:_t,nn={u_rminmax:X,u_gminmax:je,u_bminmax:Ot,u_opacity:S||1,u_noDataValue:k,u_texture:this.texture};this.textures=[this.texture];var Un=this.getUniformsBufferInfo(nn);return Un}},{key:"getRasterData",value:function(){var h=(0,Fe.Z)(B().mark(function g(S){var C,k,F,$,X;return B().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(!Array.isArray(S.data)){je.next=4;break}return C=S.data,k=(0,Rl.Z)(S,pO),this.dataOption=k,je.abrupt("return",(0,De.Z)({data:C},k));case 4:return je.next=6,S.data;case 6:if(F=je.sent,$=F.rasterData,X=(0,Rl.Z)(F,vO),this.dataOption=X,!Array.isArray($)){je.next=14;break}return je.abrupt("return",(0,De.Z)({data:$},X));case 14:return je.abrupt("return",(0,De.Z)({data:Array.from($)},X));case 15:case"end":return je.stop()}},g,this)}));function d(g){return h.apply(this,arguments)}return d}()},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me,je;return B().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return this.initUniformsBuffer(),S=this.layer.getSource(),C=this.rendererService.createTexture2D,k=S.data.dataArray[0],Ot.next=6,this.getRasterData(k);case 6:return F=Ot.sent,$=F.data,X=F.width,me=F.height,this.texture=C({data:new Float32Array($),width:X,height:me,format:Ae.gl.RGB,type:Ae.gl.FLOAT}),Ot.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:Wm,fragmentShader:Dx,triangulation:Nm,primitive:Ae.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1});case 13:return je=Ot.sent,Ot.abrupt("return",[je]);case 15:case"end":return Ot.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.initModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g,S,C){return[C[3],C[4]]}}})}}]),f}(gs);function _O(o){var c=kv();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function kv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var bO=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,xO=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
   vec4 u_unpack;
   vec2 u_domain;
   float u_opacity;
   float u_noDataValue;
   float u_clampLow;
   float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,t_=function(o){(0,za.Z)(f,o);var c=_O(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"getCommonUniformsInfo",value:function(){var d=this.layer.getLayerConfig(),g=d.opacity,S=d.clampLow,C=S===void 0?!0:S,k=d.clampHigh,F=k===void 0?!0:k,$=d.noDataValue,X=$===void 0?-9999999:$,me=d.domain,je=d.rampColors,_t=d.colorTexture,Ot=d.rScaler,nn=Ot===void 0?6553.6:Ot,Un=d.gScaler,zn=Un===void 0?25.6:Un,ur=d.bScaler,Pr=ur===void 0?.1:ur,si=d.offset,kr=si===void 0?1e4:si,hr=me||(0,Ve.ZB)(je),Hr=_t;_t?this.layer.textureService.setColorTexture(_t,je,hr):Hr=this.layer.textureService.getColorTexture(je,hr);var ha={u_unpack:[nn,zn,Pr,kr],u_domain:hr,u_opacity:g||1,u_noDataValue:X,u_clampLow:C,u_clampHigh:typeof F!="undefined"?F:C,u_texture:this.texture,u_colorTexture:Hr};this.textures=[this.texture,Hr];var Xa=this.getUniformsBufferInfo(ha);return Xa}},{key:"initModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return this.initUniformsBuffer(),S=this.layer.getSource(),C=this.rendererService.createTexture2D,X.next=5,S.data.images;case 5:return k=X.sent,this.texture=C({data:k[0],width:k[0].width,height:k[0].height,min:Ae.gl.LINEAR,mag:Ae.gl.LINEAR}),X.next=9,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:xO,fragmentShader:bO,triangulation:Nm,primitive:Ae.gl.TRIANGLES,depth:{enable:!1}});case 9:return F=X.sent,X.abrupt("return",[F]);case 11:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"clearModels",value:function(){var d;(d=this.texture)===null||d===void 0||d.destroy()}},{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.initModels());case 1:case"end":return C.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ae.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:_e.UV,buffer:{usage:Ae.gl.DYNAMIC_DRAW,data:[],type:Ae.gl.FLOAT},size:2,update:function(g,S,C){return[C[3],C[4]]}}})}}]),f}(gs),wS={raster:Lx,rasterRgb:yO,raster3d:Lx,rasterTerrainRgb:t_},EO=wS;function SO(o,c){return{type:o.type,field:"value",items:o.positions.map(function(f,h){var d;return d={},(0,He.Z)(d,c,h>=o.colors.length?null:o.colors[h]),(0,He.Z)(d,"value",f),d})}}function wO(o){var c=TS();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function TS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Nx=function(o){(0,za.Z)(f,o);var c=wO(f);function f(){var h;(0,Dt.Z)(this,f);for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return h=c.call.apply(c,[this].concat(g)),(0,He.Z)((0,Ti.Z)(h),"type","RasterLayer"),h}return(0,dn.Z)(f,[{key:"buildModels",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S;return B().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return S=this.getModelType(),this.layerModel=new EO[S](this),k.next=4,this.initLayerModels();case 4:case"end":return k.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getDefaultConfig",value:function(){var d=this.getModelType(),g={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return g[d]}},{key:"getModelType",value:function(){var d=this.layerSource.getParserType();switch(d){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}},{key:"getLegend",value:function(d){if(d!=="color")return{type:void 0,field:void 0,items:[]};var g=this.getLayerConfig().rampColors;return SO(g,d)}}]),f}(cu),TO=["rasterData"];function AS(o){var c=CS();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function CS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var OS=function(o){(0,za.Z)(f,o);var c=AS(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.parent.getLayerAttributeConfig(),C=this.getLayerOptions(),k=this.getSourceOption(),F=new Nx((0,De.Z)({},C)).source(k.data,k.options),S&&Object.keys(S).forEach(function(me){var je,_t,Ot=me;F[Ot]((je=S[Ot])===null||je===void 0?void 0:je.field,(_t=S[Ot])===null||_t===void 0?void 0:_t.values)}),X.next=7,this.addLayer(F);case 7:this.isLoaded=!0;case 8:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getSourceOption",value:function(){var d=this.parent.getSource(),g=this.sourceTile.data.data,S=g.rasterData,C=(0,Rl.Z)(g,TO);return{data:S,options:{parser:(0,De.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},C),transforms:d.transforms}}}}]),f}(bd);function AO(o){var c=CO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function CO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var Qh=function(o){(0,za.Z)(f,o);var c=AO(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F;return B().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return S=this.parent.getLayerAttributeConfig(),C=this.getLayerOptions(),k=this.getSourceOption(),F=new Nx((0,De.Z)({},C)).source(k.data,k.options),S&&Object.keys(S).forEach(function(me){var je,_t,Ot=me;F[Ot]((je=S[Ot])===null||je===void 0?void 0:je.field,(_t=S[Ot])===null||_t===void 0?void 0:_t.values)}),X.next=7,this.addLayer(F);case 7:this.isLoaded=!0;case 8:case"end":return X.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getSourceOption",value:function(){var d=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:d.transforms}}}}]),f}(bd),Bx=["rasterData"];function OO(o){var c=MO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function MO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var RO={positions:[0,1],colors:["#000","#fff"]},PO=function(o){(0,za.Z)(f,o);var c=OO(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$,X,me;return B().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return S=this.parent.getLayerAttributeConfig(),C=this.getLayerOptions(),k=this.getSourceOption(),F=this.getLayerOptions(),$=F.rampColors,X=F.domain,this.colorTexture=this.parent.textureService.getColorTexture($,X),me=new Nx((0,De.Z)((0,De.Z)({},C),{},{colorTexture:this.colorTexture})).source(k.data,k.options),S&&Object.keys(S).forEach(function(Ot){var nn,Un,zn=Ot;me[zn]((nn=S[zn])===null||nn===void 0?void 0:nn.field,(Un=S[zn])===null||Un===void 0?void 0:Un.values)}),_t.next=9,this.addLayer(me);case 9:this.isLoaded=!0;case 10:case"end":return _t.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getSourceOption",value:function(){var d=this.parent.getSource(),g=this.sourceTile.data.data,S=g.rasterData,C=(0,Rl.Z)(g,Bx);return{data:S,options:{parser:(0,De.Z)({type:"raster",extent:this.sourceTile.bounds},C),transforms:d.transforms}}}},{key:"styleUpdate",value:function(){for(var d=this,g=arguments.length,S=new Array(g),C=0;C<g;C++)S[C]=arguments[C];var k=S,F=k.rampColors,$=F===void 0?RO:F,X=k.domain;this.colorTexture=this.parent.textureService.getColorTexture($,X||(0,Ve.ZB)($)),this.layers.forEach(function(me){return me.style({colorTexture:d.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(d){return d.destroy()})}}]),f}(bd);function IO(o){var c=kO();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function kO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var k1=function(o){(0,za.Z)(f,o);var c=IO(f);function f(){return(0,Dt.Z)(this,f),c.apply(this,arguments)}return(0,dn.Z)(f,[{key:"initTileLayer",value:function(){var h=(0,Fe.Z)(B().mark(function g(){var S,C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(S=this.parent.getLayerAttributeConfig(),C=this.getLayerOptions(),k=WC(this.parent.type),F=this.getSourceOption(),F){me.next=8;break}return this.isLoaded=!0,this.emit("loaded"),me.abrupt("return");case 8:return $=new k((0,De.Z)({},C)).source(F.data,F.options),Object.keys(S).forEach(function(je){var _t,Ot,nn=je;$[nn]((_t=S[nn])===null||_t===void 0?void 0:_t.field,(Ot=S[nn])===null||Ot===void 0?void 0:Ot.values)}),me.next=12,this.addLayer($);case 12:if(!C.tileMask){me.next=15;break}return me.next=15,this.addTileMask();case 15:this.setLayerMinMaxZoom($),this.isLoaded=!0,this.emit("loaded");case 18:case"end":return me.stop()}},g,this)}));function d(){return h.apply(this,arguments)}return d}()},{key:"getSourceOption",value:function(){var d=this.parent.getSource(),g=this.parent.getLayerConfig(),S=g.sourceLayer,C=S===void 0?"defaultLayer":S,k=g.featureId,F=k===void 0?"id":k,$=this.getFeatures(C);return{data:{type:"FeatureCollection",features:$},options:{parser:{type:"geojson",featureId:F},transforms:d.transforms}}}},{key:"setLayerMinMaxZoom",value:function(d){d.getModelType()==="text"&&d.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(d){var g=this.sourceTile.data;return g.getTileData(d)}},{key:"getFeatureById",value:function(d){var g=this.getMainLayer();if(!g)return[];var S=g.getSource().data.dataArray.filter(function(C){return C._id===d});return S}}]),f}(bd);function LO(o){var c=o.type;switch(c){case"PolygonLayer":return k1;case"LineLayer":return k1;case"PointLayer":return k1;case"TileDebugLayer":return GC;case"MaskLayer":return hO;case"RasterLayer":var f=o.getSource().parser.dataType;switch(f){case Ae.n3.RGB:case Ae.n3.CUSTOMRGB:return OS;case Ae.n3.ARRAYBUFFER:case Ae.n3.CUSTOMARRAYBUFFER:return PO;case Ae.n3.TERRAINRGB:case Ae.n3.CUSTOMTERRAINRGB:return Qh;default:return nO}default:return k1}}var DO=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],NO=Ve.rU.debounce,BO=function(){function o(c){var f=this;(0,Dt.Z)(this,o),(0,He.Z)(this,"initedTileset",!1),(0,He.Z)(this,"mapchange",function(){var d;if(f.parent.isVisible()!==!1){var g=f.getCurrentView(),S=g.latLonBounds,C=g.zoom;if(f.mapService.version==="GAODE1.x"){var k=f.parent.getLayerConfig(),F=k.visible;C<2&&F?(f.parent.updateLayerConfig({visible:!1}),f.layerService.reRender()):C>=2&&!F&&(f.parent.updateLayerConfig({visible:!0}),f.layerService.reRender())}f.lastViewStates&&f.lastViewStates.zoom===C&&f.lastViewStates.latLonBounds.toString()===S.toString()||(f.lastViewStates={zoom:C,latLonBounds:S},(d=f.tilesetManager)===null||d===void 0||d.throttleUpdate(C,S))}}),(0,He.Z)(this,"viewchange",NO(this.mapchange,24)),this.parent=c;var h=this.parent.getContainer();this.rendererService=h.rendererService,this.layerService=h.layerService,this.mapService=h.mapService,this.pickingService=h.pickingService,this.tileLayerService=new O1({rendererService:this.rendererService,layerService:this.layerService,parent:c}),this.tilePickService=new Ex({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:c}),this.parent.setLayerPickService(this.tilePickService),this.proxy(c),this.initTileSetManager()}return(0,dn.Z)(o,[{key:"initTileSetManager",value:function(){var f,h=this.parent.getSource();if(this.tilesetManager=h.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()!==!1){var d=this.getCurrentView(),g=d.latLonBounds,S=d.zoom;(f=this.tilesetManager)===null||f===void 0||f.update(S,g)}}},{key:"getCurrentView",value:function(){var f=this.mapService.getBounds(),h=[f[0][0],f[0][1],f[1][0],f[1][1]],d=this.mapService.getZoom();return{latLonBounds:h,zoom:d}}},{key:"bindTilesetEvent",value:function(){var f=this;this.tilesetManager.on("tile-loaded",function(h){}),this.tilesetManager.on("tile-unload",function(h){f.tileUnLoad(h)}),this.tilesetManager.on("tile-error",function(h,d){f.tileError(h)}),this.tilesetManager.on("tile-update",function(){f.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(f){return this.tileLayerService.getTile(f)}},{key:"tileLoaded",value:function(f){}},{key:"tileError",value:function(f){console.warn("error:",f)}},{key:"destroy",value:function(){var f;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(f=this.tilesetManager)===null||f===void 0||f.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var f;this.tilesetManager.clear();var h=this.getCurrentView(),d=h.latLonBounds,g=h.zoom;(f=this.tilesetManager)===null||f===void 0||f.update(g,d)}},{key:"tileUnLoad",value:function(f){this.tileLayerService.removeTile(f.key)}},{key:"tileUpdate",value:function(){var c=(0,Fe.Z)(B().mark(function h(){var d=this,g,S,C;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.tilesetManager){F.next=2;break}return F.abrupt("return");case 2:return g=this.parent.getMinZoom(),S=this.parent.getMaxZoom(),C=this.tilesetManager.tiles.filter(function($){return $.isLoaded}).filter(function($){return $.isVisibleChange}).filter(function($){return $.data}).filter(function($){return $.z>=g&&$.z<S}),F.next=7,Promise.all(C.map(function(){var $=(0,Fe.Z)(B().mark(function X(me){var je,_t;return B().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(d.tileLayerService.hasTile(me.key)){nn.next=9;break}return je=LO(d.parent),_t=new je(me,d.parent),nn.next=5,_t.initTileLayer();case 5:d.tilePickService.setPickState(),_t.getLayers().length!==0&&(d.tileLayerService.addTile(_t),d.tileLayerService.updateTileVisible(me),d.layerService.reRender()),nn.next=12;break;case 9:d.tileLayerService.updateTileVisible(me),d.tilePickService.setPickState(),d.layerService.reRender();case 12:case"end":return nn.stop()}},X)}));return function(X){return $.apply(this,arguments)}}()));case 7:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 8:case"end":return F.stop()}},h,this)}));function f(){return c.apply(this,arguments)}return f}()},{key:"setPickState",value:function(f){}},{key:"pickRender",value:function(f){this.tilePickService.pickRender(f)}},{key:"selectFeature",value:function(f){this.tilePickService.selectFeature(f)}},{key:"highlightPickedFeature",value:function(f){this.tilePickService.highlightPickedFeature(f)}},{key:"proxy",value:function(f){var h=this;DO.forEach(function(d){var g=f[d].bind(f);f[d]=function(){for(var S=arguments.length,C=new Array(S),k=0;k<S;k++)C[k]=arguments[k];return g.apply(void 0,C),h.getLayers().map(function(F){F[d].apply(F,C)}),d==="style"&&h.getTiles().forEach(function(F){return F.styleUpdate.apply(F,C)}),f}})}}]),o}();function b5(o){var c=FO();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function FO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var x5=null;function Fx(o){var c=MS();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function MS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var RS=null;function zx(o){var c=Ku();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function Ku(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var PS=function(o){(0,za.Z)(f,o);var c=zx(f);function f(h){var d;(0,Dt.Z)(this,f),d=c.call(this),(0,He.Z)((0,Ti.Z)(d),"isShow",!0),(0,He.Z)((0,Ti.Z)(d),"onMouseMove",function(S){var C,k=d.mapsService.getMapContainer(),F=(C=k==null?void 0:k.getBoundingClientRect())!==null&&C!==void 0?C:{},$=F.left,X=$===void 0?0:$,me=F.top,je=me===void 0?0:me;d.setPopupPosition(S.clientX-X,S.clientY-je)}),(0,He.Z)((0,Ti.Z)(d),"updateLngLatPosition",function(){if(!(!d.mapsService||d.popupOption.followCursor)){var S=d.lngLat,C=S.lng,k=S.lat,F=d.mapsService.lngLatToContainer([C,k]),$=F.x,X=F.y;d.setPopupPosition($,X)}}),(0,He.Z)((0,Ti.Z)(d),"updateLngLatPositionWhenZoom",function(S){if(!(!d.mapsService||d.popupOption.followCursor)){var C=S.map,k=C.getSize();k.x=k.x/2,k.y=k.y/2;var F=S.center,$=S.zoom,X=C.DE(d.lngLat,$,F);X.x=Math.round(X.x),X.y=Math.round(X.y),d.setPopupPosition(X.x,X.y,!0)}}),(0,He.Z)((0,Ti.Z)(d),"onKeyDown",function(S){S.keyCode===27&&d.remove()}),(0,He.Z)((0,Ti.Z)(d),"onCloseButtonClick",function(S){S.stopPropagation&&S.stopPropagation(),d.hide()}),(0,He.Z)((0,Ti.Z)(d),"updatePosition",function(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,k=!!d.lngLat,F=d.popupOption,$=F.className,X=F.style,me=F.maxWidth,je=F.anchor,_t=F.stopPropagation;if(!(!d.mapsService||!k||!d.content)){var Ot=d.mapsService.getMarkerContainer();if(!d.container&&Ot&&(d.container=Ve.SO.create("div","l7-popup ".concat($!=null?$:""," ").concat(d.isShow?"":"l7-popup-hide"),Ot),X&&d.container.setAttribute("style",X),d.tip=Ve.SO.create("div","l7-popup-tip",d.container),d.container.appendChild(d.content),_t&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(zn){d.container.addEventListener(zn,function(ur){ur.stopPropagation()})}),d.container.style.whiteSpace="nowrap"),C?d.updateLngLatPositionWhenZoom(S):d.updateLngLatPosition(),Ve.SO.setTransform(d.container,"".concat(Ve.rQ[je])),(0,Ve.zi)(d.container,je,"popup"),me){var nn=d.container.getBoundingClientRect(),Un=nn.width;Un>parseFloat(me)&&(d.container.style.width=me)}else d.container.style.removeProperty("width")}}),(0,He.Z)((0,Ti.Z)(d),"updateWhenZoom",function(S){d.updatePosition(S,!0)}),(0,He.Z)((0,Ti.Z)(d),"update",function(){d.updatePosition(null,!1)}),d.popupOption=(0,De.Z)((0,De.Z)({},d.getDefault(h!=null?h:{})),h);var g=d.popupOption.lngLat;return g&&(d.lngLat=g),d}return(0,dn.Z)(f,[{key:"lngLat",get:function(){var d;return(d=this.popupOption.lngLat)!==null&&d!==void 0?d:{lng:0,lat:0}},set:function(d){this.popupOption.lngLat=d}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(d){this.mapsService=d.mapService,this.sceneService=d.sceneService,this.layerService=d.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=d,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var g=this.popupOption,S=g.html,C=g.text,k=g.title;return S?this.setHTML(S):C&&this.setText(C),k&&this.setTitle(k),this.emit("open"),this}},{key:"remove",value:function(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ve.SO.remove(this.content),this.container&&(Ve.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(d){return this.show(),this.popupOption=(0,De.Z)((0,De.Z)({},this.popupOption),d),this.checkUpdateOption(d,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(Ve.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(d,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(d,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(d,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(d,["html"])&&d.html?this.setHTML(d.html):this.checkUpdateOption(d,["text"])&&d.text&&this.setText(d.text),this.checkUpdateOption(d,["lngLat"])&&d.lngLat&&this.setLnglat(d.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&Ve.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(this.isShow)return this.container&&Ve.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(d){return this.popupOption.html=d,this.setDOMContent(d)}},{key:"setText",value:function(d){return this.popupOption.text=d,this.setDOMContent(window.document.createTextNode(d))}},{key:"setTitle",value:function(d){this.show(),this.popupOption.title=d,d?(this.contentTitle||(this.contentTitle=Ve.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Ve.SO.clearChildren(this.contentTitle),Ve.SO.appendElementType(this.contentTitle,d)):this.contentTitle&&(Ve.SO.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var d=this.lngLat,g=d.lng,S=d.lat;return this.popupOption.autoPan&&this.mapsService.panTo([g,S]),this}},{key:"setLngLat",value:function(d){return this.setLnglat(d)}},{key:"setLnglat",value:function(d){var g=this;return this.show(),this.lngLat=d,Array.isArray(d)&&(this.lngLat={lng:d[0],lat:d[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){g.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(d){return this.popupOption.maxWidth=d,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(d){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Ve.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(d){return this.show(),this.createContent(),Ve.SO.appendElementType(this.contentPanel,d),this.update(),this}},{key:"updateCloseOnClick",value:function(d){var g=this,S=this.mapsService;S&&(S==null||S.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!d&&requestAnimationFrame(function(){S==null||S.on("click",g.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(d){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!d&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(d){var g,S=(g=this.mapsService)===null||g===void 0?void 0:g.getContainer();S&&(S==null||S.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!d&&(S==null||S.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var d=this;if(this.content&&Ve.SO.remove(this.content),this.contentTitle=void 0,this.content=Ve.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var g=vf("l7-icon-guanbi");Ve.SO.addClass(g,"l7-popup-close-button"),this.content.appendChild(g),this.popupOption.closeButtonOffsets&&(g.style.right=this.popupOption.closeButtonOffsets[0]+"px",g.style.top=this.popupOption.closeButtonOffsets[1]+"px"),g.setAttribute("aria-label","Close popup"),g.addEventListener("click",function(){d.hide()}),g.addEventListener("pointerup",function(S){S.stopPropagation()}),g.addEventListener("pointerdown",function(S){S.stopPropagation()}),this.closeButton=g}else this.closeButton=void 0;this.contentPanel=Ve.SO.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(d,g){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.container){var C=this.popupOption.offsets;this.container.style.left=d+C[0]+"px",this.container.style.top=g-C[1]+"px",S?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}},{key:"checkUpdateOption",value:function(d,g){return g.some(function(S){return S in d})}}]),f}(If.EventEmitter);function zO(o){var c=Vf();return function(){var h=_getPrototypeOf(o),d;if(c){var g=_getPrototypeOf(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return _possibleConstructorReturn(this,d)}}function Vf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var E5=Ve.rU.get,S5=null;function UO(o,c){var f=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,h=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(f||h)&&(c||(c=document),!!c)){var d=c.head||c.getElementsByTagName("head")[0];if(!d){d=c.createElement("head");var g=c.body||c.getElementsByTagName("body")[0];g?g.parentNode.insertBefore(d,g):c.documentElement.appendChild(d)}var S=c.createElement("style");return S.type="text/css",S.styleSheet?S.styleSheet.cssText=o:S.appendChild(c.createTextNode(o)),d.appendChild(S),S}}UO(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 0;
      -ms-flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
          flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item input[type='radio'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -ms-touch-action: none;
      touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var Y0=D(81550),jO=D.n(Y0),ZO=function(){function o(c,f){(0,Dt.Z)(this,o);var h=f.buffer,d=f.offset,g=f.stride,S=f.normalized,C=f.size,k=f.divisor;this.buffer=h,this.attribute={buffer:h.get(),offset:d||0,stride:g||0,normalized:S||!1,divisor:k||0},C&&(this.attribute.size=C)}return(0,dn.Z)(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(f){this.buffer.subData(f)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),g0,Op,Ro,Yd,n_,q0,ov,r_,Lv,$m,ah,Dv,Nv,L1,VO=(g0={},(0,He.Z)(g0,Ae.gl.POINTS,"points"),(0,He.Z)(g0,Ae.gl.LINES,"lines"),(0,He.Z)(g0,Ae.gl.LINE_LOOP,"line loop"),(0,He.Z)(g0,Ae.gl.LINE_STRIP,"line strip"),(0,He.Z)(g0,Ae.gl.TRIANGLES,"triangles"),(0,He.Z)(g0,Ae.gl.TRIANGLE_FAN,"triangle fan"),(0,He.Z)(g0,Ae.gl.TRIANGLE_STRIP,"triangle strip"),g0),IS=(Op={},(0,He.Z)(Op,Ae.gl.STATIC_DRAW,"static"),(0,He.Z)(Op,Ae.gl.DYNAMIC_DRAW,"dynamic"),(0,He.Z)(Op,Ae.gl.STREAM_DRAW,"stream"),Op),Ux=(Ro={},(0,He.Z)(Ro,Ae.gl.BYTE,"int8"),(0,He.Z)(Ro,Ae.gl.INT,"int32"),(0,He.Z)(Ro,Ae.gl.UNSIGNED_BYTE,"uint8"),(0,He.Z)(Ro,Ae.gl.UNSIGNED_SHORT,"uint16"),(0,He.Z)(Ro,Ae.gl.UNSIGNED_INT,"uint32"),(0,He.Z)(Ro,Ae.gl.FLOAT,"float"),Ro),HO=(Yd={},(0,He.Z)(Yd,Ae.gl.ALPHA,"alpha"),(0,He.Z)(Yd,Ae.gl.LUMINANCE,"luminance"),(0,He.Z)(Yd,Ae.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,He.Z)(Yd,Ae.gl.RGB,"rgb"),(0,He.Z)(Yd,Ae.gl.RGBA,"rgba"),(0,He.Z)(Yd,Ae.gl.RGBA4,"rgba4"),(0,He.Z)(Yd,Ae.gl.RGB5_A1,"rgb5 a1"),(0,He.Z)(Yd,Ae.gl.RGB565,"rgb565"),(0,He.Z)(Yd,Ae.gl.DEPTH_COMPONENT,"depth"),(0,He.Z)(Yd,Ae.gl.DEPTH_STENCIL,"depth stencil"),Yd),WO=(n_={},(0,He.Z)(n_,Ae.gl.DONT_CARE,"dont care"),(0,He.Z)(n_,Ae.gl.NICEST,"nice"),(0,He.Z)(n_,Ae.gl.FASTEST,"fast"),n_),pi=(q0={},(0,He.Z)(q0,Ae.gl.NEAREST,"nearest"),(0,He.Z)(q0,Ae.gl.LINEAR,"linear"),(0,He.Z)(q0,Ae.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,He.Z)(q0,Ae.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,He.Z)(q0,Ae.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,He.Z)(q0,Ae.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),q0),kS=(ov={},(0,He.Z)(ov,Ae.gl.REPEAT,"repeat"),(0,He.Z)(ov,Ae.gl.CLAMP_TO_EDGE,"clamp"),(0,He.Z)(ov,Ae.gl.MIRRORED_REPEAT,"mirror"),ov),$O=(r_={},(0,He.Z)(r_,Ae.gl.NONE,"none"),(0,He.Z)(r_,Ae.gl.BROWSER_DEFAULT_WEBGL,"browser"),r_),GO=(Lv={},(0,He.Z)(Lv,Ae.gl.NEVER,"never"),(0,He.Z)(Lv,Ae.gl.ALWAYS,"always"),(0,He.Z)(Lv,Ae.gl.LESS,"less"),(0,He.Z)(Lv,Ae.gl.LEQUAL,"lequal"),(0,He.Z)(Lv,Ae.gl.GREATER,"greater"),(0,He.Z)(Lv,Ae.gl.GEQUAL,"gequal"),(0,He.Z)(Lv,Ae.gl.EQUAL,"equal"),(0,He.Z)(Lv,Ae.gl.NOTEQUAL,"notequal"),Lv),jx=($m={},(0,He.Z)($m,Ae.gl.FUNC_ADD,"add"),(0,He.Z)($m,Ae.gl.MIN_EXT,"min"),(0,He.Z)($m,Ae.gl.MAX_EXT,"max"),(0,He.Z)($m,Ae.gl.FUNC_SUBTRACT,"subtract"),(0,He.Z)($m,Ae.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),$m),Zx=(ah={},(0,He.Z)(ah,Ae.gl.ZERO,"zero"),(0,He.Z)(ah,Ae.gl.ONE,"one"),(0,He.Z)(ah,Ae.gl.SRC_COLOR,"src color"),(0,He.Z)(ah,Ae.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,He.Z)(ah,Ae.gl.SRC_ALPHA,"src alpha"),(0,He.Z)(ah,Ae.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,He.Z)(ah,Ae.gl.DST_COLOR,"dst color"),(0,He.Z)(ah,Ae.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,He.Z)(ah,Ae.gl.DST_ALPHA,"dst alpha"),(0,He.Z)(ah,Ae.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,He.Z)(ah,Ae.gl.CONSTANT_COLOR,"constant color"),(0,He.Z)(ah,Ae.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,He.Z)(ah,Ae.gl.CONSTANT_ALPHA,"constant alpha"),(0,He.Z)(ah,Ae.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,He.Z)(ah,Ae.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),ah),LS=(Dv={},(0,He.Z)(Dv,Ae.gl.NEVER,"never"),(0,He.Z)(Dv,Ae.gl.ALWAYS,"always"),(0,He.Z)(Dv,Ae.gl.LESS,"less"),(0,He.Z)(Dv,Ae.gl.LEQUAL,"lequal"),(0,He.Z)(Dv,Ae.gl.GREATER,"greater"),(0,He.Z)(Dv,Ae.gl.GEQUAL,"gequal"),(0,He.Z)(Dv,Ae.gl.EQUAL,"equal"),(0,He.Z)(Dv,Ae.gl.NOTEQUAL,"notequal"),Dv),Gm=(Nv={},(0,He.Z)(Nv,Ae.gl.ZERO,"zero"),(0,He.Z)(Nv,Ae.gl.KEEP,"keep"),(0,He.Z)(Nv,Ae.gl.REPLACE,"replace"),(0,He.Z)(Nv,Ae.gl.INVERT,"invert"),(0,He.Z)(Nv,Ae.gl.INCR,"increment"),(0,He.Z)(Nv,Ae.gl.DECR,"decrement"),(0,He.Z)(Nv,Ae.gl.INCR_WRAP,"increment wrap"),(0,He.Z)(Nv,Ae.gl.DECR_WRAP,"decrement wrap"),Nv),XO=(L1={},(0,He.Z)(L1,Ae.gl.FRONT,"front"),(0,He.Z)(L1,Ae.gl.BACK,"back"),L1),YO=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"isDestroyed",!1);var h=f.data,d=f.usage,g=f.type;this.buffer=c.buffer({data:h,usage:IS[d||Ae.gl.STATIC_DRAW],type:Ux[g||Ae.gl.UNSIGNED_BYTE]})}return(0,dn.Z)(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(f){var h=f.data,d=f.offset;this.buffer.subdata(h,d)}}]),o}(),du=function(){function o(c,f){(0,Dt.Z)(this,o);var h=f.data,d=f.usage,g=f.type,S=f.count;this.elements=c.elements({data:h,usage:IS[d||Ae.gl.STATIC_DRAW],type:Ux[g||Ae.gl.UNSIGNED_BYTE],count:S})}return(0,dn.Z)(o,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(f){var h=f.data;this.elements.subdata(h)}},{key:"destroy",value:function(){}}]),o}(),y0=function(){function o(c,f){(0,Dt.Z)(this,o);var h=f.width,d=f.height,g=f.color,S=f.colors,C={width:h,height:d};Array.isArray(S)&&(C.colors=S.map(function(k){return k.get()})),g&&typeof g!="boolean"&&(C.color=g.get()),this.framebuffer=c.framebuffer(C)}return(0,dn.Z)(o,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(f){var h=f.width,d=f.height;this.framebuffer.resize(h,d)}}]),o}(),Mp=D(95147),Xm=D(25897),qO=D(81957),Za=D(97582),KO=D(90857),Vx=KO,Fn;(function(o){o[o.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",o[o.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",o[o.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",o[o.POINTS=0]="POINTS",o[o.LINES=1]="LINES",o[o.LINE_LOOP=2]="LINE_LOOP",o[o.LINE_STRIP=3]="LINE_STRIP",o[o.TRIANGLES=4]="TRIANGLES",o[o.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",o[o.TRIANGLE_FAN=6]="TRIANGLE_FAN",o[o.ZERO=0]="ZERO",o[o.ONE=1]="ONE",o[o.SRC_COLOR=768]="SRC_COLOR",o[o.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",o[o.SRC_ALPHA=770]="SRC_ALPHA",o[o.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",o[o.DST_ALPHA=772]="DST_ALPHA",o[o.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",o[o.DST_COLOR=774]="DST_COLOR",o[o.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",o[o.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",o[o.CONSTANT_COLOR=32769]="CONSTANT_COLOR",o[o.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",o[o.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",o[o.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",o[o.FUNC_ADD=32774]="FUNC_ADD",o[o.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",o[o.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",o[o.BLEND_EQUATION=32777]="BLEND_EQUATION",o[o.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",o[o.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",o[o.BLEND_DST_RGB=32968]="BLEND_DST_RGB",o[o.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",o[o.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",o[o.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",o[o.BLEND_COLOR=32773]="BLEND_COLOR",o[o.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",o[o.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",o[o.LINE_WIDTH=2849]="LINE_WIDTH",o[o.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",o[o.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",o[o.CULL_FACE_MODE=2885]="CULL_FACE_MODE",o[o.FRONT_FACE=2886]="FRONT_FACE",o[o.DEPTH_RANGE=2928]="DEPTH_RANGE",o[o.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",o[o.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",o[o.DEPTH_FUNC=2932]="DEPTH_FUNC",o[o.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",o[o.STENCIL_FUNC=2962]="STENCIL_FUNC",o[o.STENCIL_FAIL=2964]="STENCIL_FAIL",o[o.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",o[o.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",o[o.STENCIL_REF=2967]="STENCIL_REF",o[o.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",o[o.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",o[o.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",o[o.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",o[o.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",o[o.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",o[o.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",o[o.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",o[o.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",o[o.VIEWPORT=2978]="VIEWPORT",o[o.SCISSOR_BOX=3088]="SCISSOR_BOX",o[o.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",o[o.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",o[o.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",o[o.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",o[o.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",o[o.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",o[o.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",o[o.RED_BITS=3410]="RED_BITS",o[o.GREEN_BITS=3411]="GREEN_BITS",o[o.BLUE_BITS=3412]="BLUE_BITS",o[o.ALPHA_BITS=3413]="ALPHA_BITS",o[o.DEPTH_BITS=3414]="DEPTH_BITS",o[o.STENCIL_BITS=3415]="STENCIL_BITS",o[o.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",o[o.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",o[o.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",o[o.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",o[o.SAMPLES=32937]="SAMPLES",o[o.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",o[o.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",o[o.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",o[o.VENDOR=7936]="VENDOR",o[o.RENDERER=7937]="RENDERER",o[o.VERSION=7938]="VERSION",o[o.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",o[o.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",o[o.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",o[o.STATIC_DRAW=35044]="STATIC_DRAW",o[o.STREAM_DRAW=35040]="STREAM_DRAW",o[o.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",o[o.ARRAY_BUFFER=34962]="ARRAY_BUFFER",o[o.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",o[o.BUFFER_SIZE=34660]="BUFFER_SIZE",o[o.BUFFER_USAGE=34661]="BUFFER_USAGE",o[o.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",o[o.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",o[o.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",o[o.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",o[o.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",o[o.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",o[o.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",o[o.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",o[o.CULL_FACE=2884]="CULL_FACE",o[o.FRONT=1028]="FRONT",o[o.BACK=1029]="BACK",o[o.FRONT_AND_BACK=1032]="FRONT_AND_BACK",o[o.BLEND=3042]="BLEND",o[o.DEPTH_TEST=2929]="DEPTH_TEST",o[o.DITHER=3024]="DITHER",o[o.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",o[o.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",o[o.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",o[o.SCISSOR_TEST=3089]="SCISSOR_TEST",o[o.STENCIL_TEST=2960]="STENCIL_TEST",o[o.NO_ERROR=0]="NO_ERROR",o[o.INVALID_ENUM=1280]="INVALID_ENUM",o[o.INVALID_VALUE=1281]="INVALID_VALUE",o[o.INVALID_OPERATION=1282]="INVALID_OPERATION",o[o.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",o[o.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",o[o.CW=2304]="CW",o[o.CCW=2305]="CCW",o[o.DONT_CARE=4352]="DONT_CARE",o[o.FASTEST=4353]="FASTEST",o[o.NICEST=4354]="NICEST",o[o.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",o[o.BYTE=5120]="BYTE",o[o.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",o[o.SHORT=5122]="SHORT",o[o.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",o[o.INT=5124]="INT",o[o.UNSIGNED_INT=5125]="UNSIGNED_INT",o[o.FLOAT=5126]="FLOAT",o[o.DOUBLE=5130]="DOUBLE",o[o.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",o[o.ALPHA=6406]="ALPHA",o[o.RGB=6407]="RGB",o[o.RGBA=6408]="RGBA",o[o.LUMINANCE=6409]="LUMINANCE",o[o.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",o[o.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",o[o.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",o[o.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",o[o.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",o[o.VERTEX_SHADER=35633]="VERTEX_SHADER",o[o.COMPILE_STATUS=35713]="COMPILE_STATUS",o[o.DELETE_STATUS=35712]="DELETE_STATUS",o[o.LINK_STATUS=35714]="LINK_STATUS",o[o.VALIDATE_STATUS=35715]="VALIDATE_STATUS",o[o.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",o[o.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",o[o.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",o[o.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",o[o.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",o[o.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",o[o.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",o[o.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",o[o.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",o[o.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",o[o.SHADER_TYPE=35663]="SHADER_TYPE",o[o.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",o[o.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",o[o.NEVER=512]="NEVER",o[o.ALWAYS=519]="ALWAYS",o[o.LESS=513]="LESS",o[o.EQUAL=514]="EQUAL",o[o.LEQUAL=515]="LEQUAL",o[o.GREATER=516]="GREATER",o[o.GEQUAL=518]="GEQUAL",o[o.NOTEQUAL=517]="NOTEQUAL",o[o.KEEP=7680]="KEEP",o[o.REPLACE=7681]="REPLACE",o[o.INCR=7682]="INCR",o[o.DECR=7683]="DECR",o[o.INVERT=5386]="INVERT",o[o.INCR_WRAP=34055]="INCR_WRAP",o[o.DECR_WRAP=34056]="DECR_WRAP",o[o.NEAREST=9728]="NEAREST",o[o.LINEAR=9729]="LINEAR",o[o.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",o[o.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",o[o.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",o[o.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",o[o.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",o[o.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",o[o.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",o[o.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",o[o.TEXTURE_2D=3553]="TEXTURE_2D",o[o.TEXTURE=5890]="TEXTURE",o[o.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",o[o.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",o[o.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",o[o.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",o[o.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",o[o.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",o[o.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",o[o.TEXTURE0=33984]="TEXTURE0",o[o.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",o[o.REPEAT=10497]="REPEAT",o[o.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",o[o.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",o[o.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",o[o.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",o[o.FLOAT_VEC2=35664]="FLOAT_VEC2",o[o.FLOAT_VEC3=35665]="FLOAT_VEC3",o[o.FLOAT_VEC4=35666]="FLOAT_VEC4",o[o.INT_VEC2=35667]="INT_VEC2",o[o.INT_VEC3=35668]="INT_VEC3",o[o.INT_VEC4=35669]="INT_VEC4",o[o.BOOL=35670]="BOOL",o[o.BOOL_VEC2=35671]="BOOL_VEC2",o[o.BOOL_VEC3=35672]="BOOL_VEC3",o[o.BOOL_VEC4=35673]="BOOL_VEC4",o[o.FLOAT_MAT2=35674]="FLOAT_MAT2",o[o.FLOAT_MAT3=35675]="FLOAT_MAT3",o[o.FLOAT_MAT4=35676]="FLOAT_MAT4",o[o.SAMPLER_2D=35678]="SAMPLER_2D",o[o.SAMPLER_CUBE=35680]="SAMPLER_CUBE",o[o.LOW_FLOAT=36336]="LOW_FLOAT",o[o.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",o[o.HIGH_FLOAT=36338]="HIGH_FLOAT",o[o.LOW_INT=36339]="LOW_INT",o[o.MEDIUM_INT=36340]="MEDIUM_INT",o[o.HIGH_INT=36341]="HIGH_INT",o[o.FRAMEBUFFER=36160]="FRAMEBUFFER",o[o.RENDERBUFFER=36161]="RENDERBUFFER",o[o.RGBA4=32854]="RGBA4",o[o.RGB5_A1=32855]="RGB5_A1",o[o.RGB565=36194]="RGB565",o[o.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",o[o.STENCIL_INDEX=6401]="STENCIL_INDEX",o[o.STENCIL_INDEX8=36168]="STENCIL_INDEX8",o[o.DEPTH_STENCIL=34041]="DEPTH_STENCIL",o[o.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",o[o.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",o[o.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",o[o.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",o[o.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",o[o.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",o[o.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",o[o.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",o[o.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",o[o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",o[o.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",o[o.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",o[o.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",o[o.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",o[o.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",o[o.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",o[o.NONE=0]="NONE",o[o.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",o[o.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",o[o.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",o[o.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",o[o.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",o[o.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",o[o.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",o[o.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",o[o.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",o[o.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",o[o.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",o[o.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",o[o.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",o[o.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",o[o.READ_BUFFER=3074]="READ_BUFFER",o[o.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",o[o.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",o[o.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",o[o.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",o[o.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",o[o.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",o[o.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",o[o.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",o[o.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",o[o.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",o[o.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",o[o.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",o[o.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",o[o.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",o[o.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",o[o.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",o[o.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",o[o.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",o[o.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",o[o.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",o[o.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",o[o.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",o[o.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",o[o.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",o[o.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",o[o.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",o[o.RED=6403]="RED",o[o.RGB8=32849]="RGB8",o[o.RGBA8=32856]="RGBA8",o[o.RGB10_A2=32857]="RGB10_A2",o[o.TEXTURE_3D=32879]="TEXTURE_3D",o[o.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",o[o.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",o[o.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",o[o.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",o[o.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",o[o.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",o[o.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",o[o.SRGB=35904]="SRGB",o[o.SRGB8=35905]="SRGB8",o[o.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",o[o.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",o[o.RGBA32F=34836]="RGBA32F",o[o.RGB32F=34837]="RGB32F",o[o.RGBA16F=34842]="RGBA16F",o[o.RGB16F=34843]="RGB16F",o[o.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",o[o.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",o[o.R11F_G11F_B10F=35898]="R11F_G11F_B10F",o[o.RGB9_E5=35901]="RGB9_E5",o[o.RGBA32UI=36208]="RGBA32UI",o[o.RGB32UI=36209]="RGB32UI",o[o.RGBA16UI=36214]="RGBA16UI",o[o.RGB16UI=36215]="RGB16UI",o[o.RGBA8UI=36220]="RGBA8UI",o[o.RGB8UI=36221]="RGB8UI",o[o.RGBA32I=36226]="RGBA32I",o[o.RGB32I=36227]="RGB32I",o[o.RGBA16I=36232]="RGBA16I",o[o.RGB16I=36233]="RGB16I",o[o.RGBA8I=36238]="RGBA8I",o[o.RGB8I=36239]="RGB8I",o[o.RED_INTEGER=36244]="RED_INTEGER",o[o.RGB_INTEGER=36248]="RGB_INTEGER",o[o.RGBA_INTEGER=36249]="RGBA_INTEGER",o[o.R8=33321]="R8",o[o.RG8=33323]="RG8",o[o.R16F=33325]="R16F",o[o.R32F=33326]="R32F",o[o.RG16F=33327]="RG16F",o[o.RG32F=33328]="RG32F",o[o.R8I=33329]="R8I",o[o.R8UI=33330]="R8UI",o[o.R16I=33331]="R16I",o[o.R16UI=33332]="R16UI",o[o.R32I=33333]="R32I",o[o.R32UI=33334]="R32UI",o[o.RG8I=33335]="RG8I",o[o.RG8UI=33336]="RG8UI",o[o.RG16I=33337]="RG16I",o[o.RG16UI=33338]="RG16UI",o[o.RG32I=33339]="RG32I",o[o.RG32UI=33340]="RG32UI",o[o.R8_SNORM=36756]="R8_SNORM",o[o.RG8_SNORM=36757]="RG8_SNORM",o[o.RGB8_SNORM=36758]="RGB8_SNORM",o[o.RGBA8_SNORM=36759]="RGBA8_SNORM",o[o.RGB10_A2UI=36975]="RGB10_A2UI",o[o.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",o[o.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",o[o.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",o[o.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",o[o.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",o[o.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",o[o.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",o[o.HALF_FLOAT=5131]="HALF_FLOAT",o[o.RG=33319]="RG",o[o.RG_INTEGER=33320]="RG_INTEGER",o[o.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",o[o.CURRENT_QUERY=34917]="CURRENT_QUERY",o[o.QUERY_RESULT=34918]="QUERY_RESULT",o[o.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",o[o.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",o[o.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",o[o.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",o[o.DRAW_BUFFER0=34853]="DRAW_BUFFER0",o[o.DRAW_BUFFER1=34854]="DRAW_BUFFER1",o[o.DRAW_BUFFER2=34855]="DRAW_BUFFER2",o[o.DRAW_BUFFER3=34856]="DRAW_BUFFER3",o[o.DRAW_BUFFER4=34857]="DRAW_BUFFER4",o[o.DRAW_BUFFER5=34858]="DRAW_BUFFER5",o[o.DRAW_BUFFER6=34859]="DRAW_BUFFER6",o[o.DRAW_BUFFER7=34860]="DRAW_BUFFER7",o[o.DRAW_BUFFER8=34861]="DRAW_BUFFER8",o[o.DRAW_BUFFER9=34862]="DRAW_BUFFER9",o[o.DRAW_BUFFER10=34863]="DRAW_BUFFER10",o[o.DRAW_BUFFER11=34864]="DRAW_BUFFER11",o[o.DRAW_BUFFER12=34865]="DRAW_BUFFER12",o[o.DRAW_BUFFER13=34866]="DRAW_BUFFER13",o[o.DRAW_BUFFER14=34867]="DRAW_BUFFER14",o[o.DRAW_BUFFER15=34868]="DRAW_BUFFER15",o[o.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",o[o.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",o[o.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",o[o.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",o[o.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",o[o.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",o[o.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",o[o.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",o[o.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",o[o.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",o[o.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",o[o.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",o[o.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",o[o.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",o[o.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",o[o.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",o[o.SAMPLER_3D=35679]="SAMPLER_3D",o[o.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",o[o.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",o[o.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",o[o.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",o[o.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",o[o.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",o[o.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",o[o.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",o[o.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",o[o.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",o[o.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",o[o.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",o[o.MAX_SAMPLES=36183]="MAX_SAMPLES",o[o.SAMPLER_BINDING=35097]="SAMPLER_BINDING",o[o.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",o[o.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",o[o.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",o[o.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",o[o.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",o[o.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",o[o.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",o[o.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",o[o.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",o[o.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",o[o.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",o[o.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",o[o.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",o[o.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",o[o.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",o[o.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",o[o.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",o[o.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",o[o.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",o[o.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",o[o.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",o[o.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",o[o.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",o[o.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",o[o.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",o[o.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",o[o.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",o[o.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",o[o.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",o[o.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",o[o.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",o[o.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",o[o.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",o[o.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",o[o.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",o[o.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",o[o.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",o[o.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",o[o.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",o[o.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",o[o.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",o[o.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",o[o.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",o[o.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",o[o.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",o[o.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",o[o.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",o[o.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",o[o.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",o[o.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",o[o.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",o[o.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",o[o.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",o[o.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",o[o.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",o[o.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",o[o.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",o[o.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",o[o.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",o[o.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",o[o.UNIFORM_TYPE=35383]="UNIFORM_TYPE",o[o.UNIFORM_SIZE=35384]="UNIFORM_SIZE",o[o.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",o[o.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",o[o.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",o[o.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",o[o.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",o[o.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",o[o.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",o[o.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",o[o.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",o[o.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",o[o.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",o[o.OBJECT_TYPE=37138]="OBJECT_TYPE",o[o.SYNC_CONDITION=37139]="SYNC_CONDITION",o[o.SYNC_STATUS=37140]="SYNC_STATUS",o[o.SYNC_FLAGS=37141]="SYNC_FLAGS",o[o.SYNC_FENCE=37142]="SYNC_FENCE",o[o.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",o[o.UNSIGNALED=37144]="UNSIGNALED",o[o.SIGNALED=37145]="SIGNALED",o[o.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",o[o.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",o[o.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",o[o.WAIT_FAILED=37149]="WAIT_FAILED",o[o.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",o[o.COLOR=6144]="COLOR",o[o.DEPTH=6145]="DEPTH",o[o.STENCIL=6146]="STENCIL",o[o.MIN=32775]="MIN",o[o.MAX=32776]="MAX",o[o.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",o[o.STREAM_READ=35041]="STREAM_READ",o[o.STREAM_COPY=35042]="STREAM_COPY",o[o.STATIC_READ=35045]="STATIC_READ",o[o.STATIC_COPY=35046]="STATIC_COPY",o[o.DYNAMIC_READ=35049]="DYNAMIC_READ",o[o.DYNAMIC_COPY=35050]="DYNAMIC_COPY",o[o.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",o[o.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",o[o.INVALID_INDEX=4294967295]="INVALID_INDEX",o[o.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",o[o.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",o[o.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",o[o.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",o[o.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",o[o.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",o[o.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",o[o.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",o[o.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",o[o.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",o[o.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",o[o.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",o[o.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",o[o.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",o[o.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",o[o.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",o[o.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",o[o.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",o[o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",o[o.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",o[o.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",o[o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",o[o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",o[o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",o[o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",o[o.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",o[o.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",o[o.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",o[o.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",o[o.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",o[o.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",o[o.RGBA32F_EXT=34836]="RGBA32F_EXT",o[o.RGB32F_EXT=34837]="RGB32F_EXT",o[o.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",o[o.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",o[o.MIN_EXT=32775]="MIN_EXT",o[o.MAX_EXT=32776]="MAX_EXT",o[o.SRGB_EXT=35904]="SRGB_EXT",o[o.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",o[o.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",o[o.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",o[o.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",o[o.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",o[o.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",o[o.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",o[o.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",o[o.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",o[o.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",o[o.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",o[o.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",o[o.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",o[o.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",o[o.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",o[o.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",o[o.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",o[o.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",o[o.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",o[o.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",o[o.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",o[o.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",o[o.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",o[o.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",o[o.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",o[o.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",o[o.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",o[o.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",o[o.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",o[o.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",o[o.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",o[o.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",o[o.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",o[o.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",o[o.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",o[o.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",o[o.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",o[o.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",o[o.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",o[o.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",o[o.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",o[o.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",o[o.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",o[o.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",o[o.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",o[o.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Fn||(Fn={}));var Us;(function(o){o[o.Buffer=0]="Buffer",o[o.Texture=1]="Texture",o[o.RenderTarget=2]="RenderTarget",o[o.Sampler=3]="Sampler",o[o.Program=4]="Program",o[o.Bindings=5]="Bindings",o[o.InputLayout=6]="InputLayout",o[o.RenderPipeline=7]="RenderPipeline",o[o.ComputePipeline=8]="ComputePipeline",o[o.Readback=9]="Readback",o[o.QueryPool=10]="QueryPool",o[o.RenderBundle=11]="RenderBundle"})(Us||(Us={}));var ts;(function(o){o[o.NEVER=512]="NEVER",o[o.LESS=513]="LESS",o[o.EQUAL=514]="EQUAL",o[o.LEQUAL=515]="LEQUAL",o[o.GREATER=516]="GREATER",o[o.NOTEQUAL=517]="NOTEQUAL",o[o.GEQUAL=518]="GEQUAL",o[o.ALWAYS=519]="ALWAYS"})(ts||(ts={}));var K0;(function(o){o[o.CCW=2305]="CCW",o[o.CW=2304]="CW"})(K0||(K0={}));var Ih;(function(o){o[o.NONE=0]="NONE",o[o.FRONT=1]="FRONT",o[o.BACK=2]="BACK",o[o.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(Ih||(Ih={}));var Ao;(function(o){o[o.ZERO=0]="ZERO",o[o.ONE=1]="ONE",o[o.SRC=768]="SRC",o[o.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",o[o.DST=774]="DST",o[o.ONE_MINUS_DST=775]="ONE_MINUS_DST",o[o.SRC_ALPHA=770]="SRC_ALPHA",o[o.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",o[o.DST_ALPHA=772]="DST_ALPHA",o[o.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",o[o.CONST=32769]="CONST",o[o.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",o[o.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Ao||(Ao={}));var wc;(function(o){o[o.ADD=32774]="ADD",o[o.SUBSTRACT=32778]="SUBSTRACT",o[o.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",o[o.MIN=32775]="MIN",o[o.MAX=32776]="MAX"})(wc||(wc={}));var oh;(function(o){o[o.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",o[o.REPEAT=1]="REPEAT",o[o.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(oh||(oh={}));var ll;(function(o){o[o.POINT=0]="POINT",o[o.BILINEAR=1]="BILINEAR"})(ll||(ll={}));var pu;(function(o){o[o.NO_MIP=0]="NO_MIP",o[o.NEAREST=1]="NEAREST",o[o.LINEAR=2]="LINEAR"})(pu||(pu={}));var Cl;(function(o){o[o.POINTS=0]="POINTS",o[o.TRIANGLES=1]="TRIANGLES",o[o.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",o[o.LINES=3]="LINES",o[o.LINE_STRIP=4]="LINE_STRIP"})(Cl||(Cl={}));var yu;(function(o){o[o.MAP_READ=1]="MAP_READ",o[o.MAP_WRITE=2]="MAP_WRITE",o[o.COPY_SRC=4]="COPY_SRC",o[o.COPY_DST=8]="COPY_DST",o[o.INDEX=16]="INDEX",o[o.VERTEX=32]="VERTEX",o[o.UNIFORM=64]="UNIFORM",o[o.STORAGE=128]="STORAGE",o[o.INDIRECT=256]="INDIRECT",o[o.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(yu||(yu={}));var sh;(function(o){o[o.STATIC=1]="STATIC",o[o.DYNAMIC=2]="DYNAMIC"})(sh||(sh={}));var Hf;(function(o){o[o.VERTEX=1]="VERTEX",o[o.INSTANCE=2]="INSTANCE"})(Hf||(Hf={}));var DS;(function(o){o.LOADED="loaded"})(DS||(DS={}));var ys;(function(o){o[o.TEXTURE_2D=0]="TEXTURE_2D",o[o.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",o[o.TEXTURE_3D=2]="TEXTURE_3D",o[o.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(ys||(ys={}));var uh;(function(o){o[o.SAMPLED=1]="SAMPLED",o[o.RENDER_TARGET=2]="RENDER_TARGET",o[o.STORAGE=4]="STORAGE"})(uh||(uh={}));var Af;(function(o){o[o.NONE=0]="NONE",o[o.RED=1]="RED",o[o.GREEN=2]="GREEN",o[o.BLUE=4]="BLUE",o[o.ALPHA=8]="ALPHA",o[o.RGB=7]="RGB",o[o.ALL=15]="ALL"})(Af||(Af={}));var zl;(function(o){o[o.KEEP=7680]="KEEP",o[o.ZERO=0]="ZERO",o[o.REPLACE=7681]="REPLACE",o[o.INVERT=5386]="INVERT",o[o.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",o[o.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",o[o.INCREMENT_WRAP=34055]="INCREMENT_WRAP",o[o.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(zl||(zl={}));function w5(o,c,f,h){var d=ys.TEXTURE_2D,g=1,S=uh.SAMPLED;return{dimension:d,format:o,width:c,height:f,depthOrArrayLayers:g,mipLevelCount:h,usage:S}}var Ul;(function(o){o[o.Float=0]="Float",o[o.UnfilterableFloat=1]="UnfilterableFloat",o[o.Uint=2]="Uint",o[o.Sint=3]="Sint",o[o.Depth=4]="Depth"})(Ul||(Ul={}));var _0;(function(o){o[o.LOWER_LEFT=0]="LOWER_LEFT",o[o.UPPER_LEFT=1]="UPPER_LEFT"})(_0||(_0={}));var Cf;(function(o){o[o.NEGATIVE_ONE=0]="NEGATIVE_ONE",o[o.ZERO=1]="ZERO"})(Cf||(Cf={}));var i_;(function(o){o[o.OcclusionConservative=0]="OcclusionConservative"})(i_||(i_={}));var Mi;(function(o){o[o.U8=1]="U8",o[o.U16=2]="U16",o[o.U32=3]="U32",o[o.S8=4]="S8",o[o.S16=5]="S16",o[o.S32=6]="S32",o[o.F16=7]="F16",o[o.F32=8]="F32",o[o.BC1=65]="BC1",o[o.BC2=66]="BC2",o[o.BC3=67]="BC3",o[o.BC4_UNORM=68]="BC4_UNORM",o[o.BC4_SNORM=69]="BC4_SNORM",o[o.BC5_UNORM=70]="BC5_UNORM",o[o.BC5_SNORM=71]="BC5_SNORM",o[o.U16_PACKED_5551=97]="U16_PACKED_5551",o[o.U16_PACKED_565=98]="U16_PACKED_565",o[o.D24=129]="D24",o[o.D32F=130]="D32F",o[o.D24S8=131]="D24S8",o[o.D32FS8=132]="D32FS8"})(Mi||(Mi={}));var qa;(function(o){o[o.R=1]="R",o[o.RG=2]="RG",o[o.RGB=3]="RGB",o[o.RGBA=4]="RGBA",o[o.A=5]="A"})(qa||(qa={}));function NS(o){return o}var Ra;(function(o){o[o.None=0]="None",o[o.Normalized=1]="Normalized",o[o.sRGB=2]="sRGB",o[o.Depth=4]="Depth",o[o.Stencil=8]="Stencil",o[o.RenderTarget=16]="RenderTarget",o[o.Luminance=32]="Luminance"})(Ra||(Ra={}));function yo(o,c,f){return o<<16|c<<8|f}var yr;(function(o){o[o.ALPHA=yo(Mi.U8,qa.A,Ra.None)]="ALPHA",o[o.U8_LUMINANCE=yo(Mi.U8,qa.A,Ra.Luminance)]="U8_LUMINANCE",o[o.F16_LUMINANCE=yo(Mi.F16,qa.A,Ra.Luminance)]="F16_LUMINANCE",o[o.F32_LUMINANCE=yo(Mi.F32,qa.A,Ra.Luminance)]="F32_LUMINANCE",o[o.F16_R=yo(Mi.F16,qa.R,Ra.None)]="F16_R",o[o.F16_RG=yo(Mi.F16,qa.RG,Ra.None)]="F16_RG",o[o.F16_RGB=yo(Mi.F16,qa.RGB,Ra.None)]="F16_RGB",o[o.F16_RGBA=yo(Mi.F16,qa.RGBA,Ra.None)]="F16_RGBA",o[o.F32_R=yo(Mi.F32,qa.R,Ra.None)]="F32_R",o[o.F32_RG=yo(Mi.F32,qa.RG,Ra.None)]="F32_RG",o[o.F32_RGB=yo(Mi.F32,qa.RGB,Ra.None)]="F32_RGB",o[o.F32_RGBA=yo(Mi.F32,qa.RGBA,Ra.None)]="F32_RGBA",o[o.U8_R=yo(Mi.U8,qa.R,Ra.None)]="U8_R",o[o.U8_R_NORM=yo(Mi.U8,qa.R,Ra.Normalized)]="U8_R_NORM",o[o.U8_RG=yo(Mi.U8,qa.RG,Ra.None)]="U8_RG",o[o.U8_RG_NORM=yo(Mi.U8,qa.RG,Ra.Normalized)]="U8_RG_NORM",o[o.U8_RGB=yo(Mi.U8,qa.RGB,Ra.None)]="U8_RGB",o[o.U8_RGB_NORM=yo(Mi.U8,qa.RGB,Ra.Normalized)]="U8_RGB_NORM",o[o.U8_RGB_SRGB=yo(Mi.U8,qa.RGB,Ra.sRGB|Ra.Normalized)]="U8_RGB_SRGB",o[o.U8_RGBA=yo(Mi.U8,qa.RGBA,Ra.None)]="U8_RGBA",o[o.U8_RGBA_NORM=yo(Mi.U8,qa.RGBA,Ra.Normalized)]="U8_RGBA_NORM",o[o.U8_RGBA_SRGB=yo(Mi.U8,qa.RGBA,Ra.sRGB|Ra.Normalized)]="U8_RGBA_SRGB",o[o.U16_R=yo(Mi.U16,qa.R,Ra.None)]="U16_R",o[o.U16_R_NORM=yo(Mi.U16,qa.R,Ra.Normalized)]="U16_R_NORM",o[o.U16_RG_NORM=yo(Mi.U16,qa.RG,Ra.Normalized)]="U16_RG_NORM",o[o.U16_RGBA_NORM=yo(Mi.U16,qa.RGBA,Ra.Normalized)]="U16_RGBA_NORM",o[o.U16_RGBA=yo(Mi.U16,qa.RGBA,Ra.None)]="U16_RGBA",o[o.U16_RGB=yo(Mi.U16,qa.RGB,Ra.None)]="U16_RGB",o[o.U16_RG=yo(Mi.U16,qa.RG,Ra.None)]="U16_RG",o[o.U32_R=yo(Mi.U32,qa.R,Ra.None)]="U32_R",o[o.U32_RG=yo(Mi.U32,qa.RG,Ra.None)]="U32_RG",o[o.U32_RGB=yo(Mi.U32,qa.RGB,Ra.None)]="U32_RGB",o[o.U32_RGBA=yo(Mi.U32,qa.RGBA,Ra.None)]="U32_RGBA",o[o.S8_R=yo(Mi.S8,qa.R,Ra.None)]="S8_R",o[o.S8_R_NORM=yo(Mi.S8,qa.R,Ra.Normalized)]="S8_R_NORM",o[o.S8_RG_NORM=yo(Mi.S8,qa.RG,Ra.Normalized)]="S8_RG_NORM",o[o.S8_RGB_NORM=yo(Mi.S8,qa.RGB,Ra.Normalized)]="S8_RGB_NORM",o[o.S8_RGBA_NORM=yo(Mi.S8,qa.RGBA,Ra.Normalized)]="S8_RGBA_NORM",o[o.S16_R=yo(Mi.S16,qa.R,Ra.None)]="S16_R",o[o.S16_RG=yo(Mi.S16,qa.RG,Ra.None)]="S16_RG",o[o.S16_RG_NORM=yo(Mi.S16,qa.RG,Ra.Normalized)]="S16_RG_NORM",o[o.S16_RGB_NORM=yo(Mi.S16,qa.RGB,Ra.Normalized)]="S16_RGB_NORM",o[o.S16_RGBA=yo(Mi.S16,qa.RGBA,Ra.None)]="S16_RGBA",o[o.S16_RGBA_NORM=yo(Mi.S16,qa.RGBA,Ra.Normalized)]="S16_RGBA_NORM",o[o.S32_R=yo(Mi.S32,qa.R,Ra.None)]="S32_R",o[o.S32_RG=yo(Mi.S32,qa.RG,Ra.None)]="S32_RG",o[o.S32_RGB=yo(Mi.S32,qa.RGB,Ra.None)]="S32_RGB",o[o.S32_RGBA=yo(Mi.S32,qa.RGBA,Ra.None)]="S32_RGBA",o[o.U16_RGBA_5551=yo(Mi.U16_PACKED_5551,qa.RGBA,Ra.Normalized)]="U16_RGBA_5551",o[o.U16_RGB_565=yo(Mi.U16_PACKED_565,qa.RGB,Ra.Normalized)]="U16_RGB_565",o[o.BC1=yo(Mi.BC1,qa.RGBA,Ra.Normalized)]="BC1",o[o.BC1_SRGB=yo(Mi.BC1,qa.RGBA,Ra.Normalized|Ra.sRGB)]="BC1_SRGB",o[o.BC2=yo(Mi.BC2,qa.RGBA,Ra.Normalized)]="BC2",o[o.BC2_SRGB=yo(Mi.BC2,qa.RGBA,Ra.Normalized|Ra.sRGB)]="BC2_SRGB",o[o.BC3=yo(Mi.BC3,qa.RGBA,Ra.Normalized)]="BC3",o[o.BC3_SRGB=yo(Mi.BC3,qa.RGBA,Ra.Normalized|Ra.sRGB)]="BC3_SRGB",o[o.BC4_UNORM=yo(Mi.BC4_UNORM,qa.R,Ra.Normalized)]="BC4_UNORM",o[o.BC4_SNORM=yo(Mi.BC4_SNORM,qa.R,Ra.Normalized)]="BC4_SNORM",o[o.BC5_UNORM=yo(Mi.BC5_UNORM,qa.RG,Ra.Normalized)]="BC5_UNORM",o[o.BC5_SNORM=yo(Mi.BC5_SNORM,qa.RG,Ra.Normalized)]="BC5_SNORM",o[o.D24=yo(Mi.D24,qa.R,Ra.Depth)]="D24",o[o.D24_S8=yo(Mi.D24S8,qa.RG,Ra.Depth|Ra.Stencil)]="D24_S8",o[o.D32F=yo(Mi.D32F,qa.R,Ra.Depth)]="D32F",o[o.D32F_S8=yo(Mi.D32FS8,qa.RG,Ra.Depth|Ra.Stencil)]="D32F_S8",o[o.U8_RGB_RT=yo(Mi.U8,qa.RGB,Ra.RenderTarget|Ra.Normalized)]="U8_RGB_RT",o[o.U8_RGBA_RT=yo(Mi.U8,qa.RGBA,Ra.RenderTarget|Ra.Normalized)]="U8_RGBA_RT",o[o.U8_RGBA_RT_SRGB=yo(Mi.U8,qa.RGBA,Ra.RenderTarget|Ra.Normalized|Ra.sRGB)]="U8_RGBA_RT_SRGB"})(yr||(yr={}));function D1(o){return o>>>8&255}function sv(o){return o>>>16&255}function Xg(o){return o&255}function Hx(o){switch(o){case Mi.F32:case Mi.U32:case Mi.S32:return 4;case Mi.U16:case Mi.S16:case Mi.F16:return 2;case Mi.U8:case Mi.S8:return 1;default:throw new Error("whoops")}}function BS(o){return Hx(sv(o))}function a_(o){return D1(o)}function QO(o){var c=Hx(sv(o)),f=D1(o);return c*f}function $U(o,c){return o&4294967040|c}function Wx(o,c){return o&4294902015|c<<8}function Bv(o){var c=Xg(o);if(c&Ra.Depth)return Ul.Depth;if(c&Ra.Normalized)return Ul.Float;var f=sv(o);if(f===Mi.F16||f===Mi.F32)return Ul.Float;if(f===Mi.U8||f===Mi.U16||f===Mi.U32)return Ul.Uint;if(f===Mi.S8||f===Mi.S16||f===Mi.S32)return Ul.Sint;throw new Error("whoops")}function Yo(o,c){if(c===void 0&&(c=""),!o)throw new Error("Assert fail: ".concat(c))}function Ym(o){if(o!=null)return o;throw new Error("Missing object")}function FS(o,c){return o.r===c.r&&o.g===c.g&&o.b===c.b&&o.a===c.a}function zS(o,c){o.r=c.r,o.g=c.g,o.b=c.b,o.a=c.a}function US(o){var c=o.r,f=o.g,h=o.b,d=o.a;return{r:c,g:f,b:h,a:d}}function o_(o,c,f,h){return h===void 0&&(h=1),{r:o,g:c,b:f,a:h}}var s_=o_(0,0,0,0),jS=o_(0,0,0,1),$x=o_(1,1,1,0),T5=o_(1,1,1,1),Q0=!0;function ZS(o,c){c===void 0&&(c=Q0),c&&(o[10]=-o[10],o[14]=-o[14])}function A5(o,c){c===void 0&&(c=Q0),c&&(o[10]=-o[10],o[14]=-o[14]+1)}function JO(o,c){if(c===void 0&&(c=Q0),c)switch(o){case ts.LESS:return ts.GREATER;case ts.LEQUAL:return ts.GEQUAL;case ts.GEQUAL:return ts.LEQUAL;case ts.GREATER:return ts.LESS;default:return o}else return o}function C5(o,c){return c===void 0&&(c=Q0),c?1-o:o}function O5(o,c){return c===void 0&&(c=Q0),c?-o:o}function M5(o,c,f,h){if(h===void 0&&(h=Q0),f=JO(f,h),f===ts.LESS)return o<c;if(f===ts.LEQUAL)return o<=c;if(f===ts.GREATER)return o>c;if(f===ts.GEQUAL)return o>=c;throw new Error("whoops")}function N1(o){return!!(o&&!(o&o-1))}function Fv(o,c){return o!=null?o:c}function B1(o){return o===void 0?null:o}function R5(o,c,f){o.length=c,o.fill(f)}function u_(o,c){var f=c-1;return o+f&~f}function e3(o,c){return((o+c-1)/c|0)*c}function VS(o,c,f){for(var h=0,d=o.length;h<d;){var g=h+(d-h>>>1),S=f(c,o[g]);S<0?d=g:h=g+1}return h}function Gx(o,c,f){var h=VS(o,c,f);o.splice(h,0,c)}function t3(o,c,f){return f?o|=c:o&=~c,o}function n3(o,c){for(var f=new Array(o),h=0;h<o;h++)f[h]=c();return f}function r3(o,c){c===void 0&&(c=1);var f=o.split(`
`);return f.map(function(h,d){return"".concat(Xx(""+(c+d),4," "),"  ").concat(h)}).join(`
`)}function Xx(o,c,f){for(f===void 0&&(f="0");o.length<c;)o="".concat(f).concat(o);return o}function P5(o,c){for(var f=[],h=o;h<o+c;h++)f.push(h);return f}function l_(o,c){o.blendDstFactor=c.blendDstFactor,o.blendSrcFactor=c.blendSrcFactor,o.blendMode=c.blendMode}function qm(o,c){return o===void 0&&(o={}),o.compare=c.compare,o.depthFailOp=c.depthFailOp,o.passOp=c.passOp,o.failOp=c.failOp,o.mask=c.mask,o}function c_(o,c){return o===void 0&&(o={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),l_(o.rgbBlendState,c.rgbBlendState),l_(o.alphaBlendState,c.alphaBlendState),o.channelWriteMask=c.channelWriteMask,o}function Yg(o,c){o.length!==c.length&&(o.length=c.length);for(var f=0;f<c.length;f++)o[f]=c_(o[f],c[f])}function F1(o,c){c.attachmentsState!==void 0&&Yg(o.attachmentsState,c.attachmentsState),o.blendConstant&&c.blendConstant&&zS(o.blendConstant,c.blendConstant),o.depthCompare=Fv(c.depthCompare,o.depthCompare),o.depthWrite=Fv(c.depthWrite,o.depthWrite),o.stencilWrite=Fv(c.stencilWrite,o.stencilWrite),o.stencilFront&&c.stencilFront&&qm(o.stencilFront,c.stencilFront),o.stencilBack&&c.stencilBack&&qm(o.stencilBack,c.stencilBack),o.cullMode=Fv(c.cullMode,o.cullMode),o.frontFace=Fv(c.frontFace,o.frontFace),o.polygonOffset=Fv(c.polygonOffset,o.polygonOffset)}function b0(o){var c=Object.assign({},o);return c.attachmentsState=[],Yg(c.attachmentsState,o.attachmentsState),c.blendConstant=c.blendConstant&&US(c.blendConstant),c.stencilFront=qm(void 0,o.stencilFront),c.stencilBack=qm(void 0,o.stencilBack),c}function z1(o,c){c.channelWriteMask!==void 0&&(o.channelWriteMask=c.channelWriteMask),c.rgbBlendMode!==void 0&&(o.rgbBlendState.blendMode=c.rgbBlendMode),c.alphaBlendMode!==void 0&&(o.alphaBlendState.blendMode=c.alphaBlendMode),c.rgbBlendSrcFactor!==void 0&&(o.rgbBlendState.blendSrcFactor=c.rgbBlendSrcFactor),c.alphaBlendSrcFactor!==void 0&&(o.alphaBlendState.blendSrcFactor=c.alphaBlendSrcFactor),c.rgbBlendDstFactor!==void 0&&(o.rgbBlendState.blendDstFactor=c.rgbBlendDstFactor),c.alphaBlendDstFactor!==void 0&&(o.alphaBlendState.blendDstFactor=c.alphaBlendDstFactor)}var f_={blendMode:wc.ADD,blendSrcFactor:Ao.ONE,blendDstFactor:Ao.ZERO},zv={attachmentsState:[{channelWriteMask:Af.ALL,rgbBlendState:f_,alphaBlendState:f_}],blendConstant:US(s_),depthWrite:!0,depthCompare:ts.LEQUAL,stencilWrite:!1,stencilFront:{compare:ts.ALWAYS,passOp:zl.KEEP,depthFailOp:zl.KEEP,failOp:zl.KEEP},stencilBack:{compare:ts.ALWAYS,passOp:zl.KEEP,depthFailOp:zl.KEEP,failOp:zl.KEEP},cullMode:Ih.NONE,frontFace:K0.CCW,polygonOffset:!1};function U1(o,c){o===void 0&&(o=null),c===void 0&&(c=zv);var f=b0(c);return o!==null&&F1(f,o),f}var j1=U1({depthCompare:ts.ALWAYS,depthWrite:!1},zv);function HS(o,c){return o.attachmentsState===void 0&&(o.attachmentsState=[],Yg(o.attachmentsState,zv.attachmentsState)),z1(o.attachmentsState[0],c),o}var Yx={texture:null,sampler:null,formatKind:Ul.Float,dimension:ys.TEXTURE_2D};function uv(o,c,f){if(o.length!==c.length)return!1;for(var h=0;h<o.length;h++)if(!f(o[h],c[h]))return!1;return!0}function lh(o,c){for(var f=Array(o.length),h=0;h<o.length;h++)f[h]=c(o[h]);return f}function Rp(o,c){return o.texture===c.texture&&o.binding===c.binding}function qd(o,c){return o.buffer===c.buffer&&o.size===c.size&&o.binding===c.binding&&o.offset===c.offset}function WS(o,c){return o===null?c===null:c===null?!1:o.sampler===c.sampler&&o.texture===c.texture&&o.dimension===c.dimension&&o.formatKind===c.formatKind&&o.comparison===c.comparison}function i3(o,c){return o.samplerBindings=o.samplerBindings||[],o.uniformBufferBindings=o.uniformBufferBindings||[],o.storageBufferBindings=o.storageBufferBindings||[],o.storageTextureBindings=o.storageTextureBindings||[],c.samplerBindings=c.samplerBindings||[],c.uniformBufferBindings=c.uniformBufferBindings||[],c.storageBufferBindings=c.storageBufferBindings||[],c.storageTextureBindings=c.storageTextureBindings||[],!(o.samplerBindings.length!==c.samplerBindings.length||!uv(o.samplerBindings,c.samplerBindings,WS)||!uv(o.uniformBufferBindings,c.uniformBufferBindings,qd)||!uv(o.storageBufferBindings,c.storageBufferBindings,qd)||!uv(o.storageTextureBindings,c.storageTextureBindings,Rp))}function $S(o,c){return o.blendMode==c.blendMode&&o.blendSrcFactor===c.blendSrcFactor&&o.blendDstFactor===c.blendDstFactor}function a3(o,c){return!(!$S(o.rgbBlendState,c.rgbBlendState)||!$S(o.alphaBlendState,c.alphaBlendState)||o.channelWriteMask!==c.channelWriteMask)}function Z1(o,c){return o.compare==c.compare&&o.depthFailOp===c.depthFailOp&&o.failOp===c.failOp&&o.passOp===c.passOp&&o.mask===c.mask}function o3(o,c){return!uv(o.attachmentsState,c.attachmentsState,a3)||o.blendConstant&&c.blendConstant&&!FS(o.blendConstant,c.blendConstant)||o.stencilFront&&c.stencilFront&&!Z1(o.stencilFront,c.stencilFront)||o.stencilBack&&c.stencilBack&&!Z1(o.stencilBack,c.stencilBack)?!1:o.depthCompare===c.depthCompare&&o.depthWrite===c.depthWrite&&o.stencilWrite===c.stencilWrite&&o.cullMode===c.cullMode&&o.frontFace===c.frontFace&&o.polygonOffset===c.polygonOffset}function qx(o,c){return o.id===c.id}function GS(o,c){return o===c}function V1(o,c){return!(o.topology!==c.topology||o.inputLayout!==c.inputLayout||o.sampleCount!==c.sampleCount||o.megaStateDescriptor&&c.megaStateDescriptor&&!o3(o.megaStateDescriptor,c.megaStateDescriptor)||!qx(o.program,c.program)||!uv(o.colorAttachmentFormats,c.colorAttachmentFormats,GS)||o.depthStencilAttachmentFormat!==c.depthStencilAttachmentFormat)}function s3(o,c){return o.offset===c.offset&&o.shaderLocation===c.shaderLocation&&o.format===c.format&&o.divisor===c.divisor}function u3(o,c){return(0,Mp.Z)(o)?(0,Mp.Z)(c):(0,Mp.Z)(c)?!1:o.arrayStride===c.arrayStride&&o.stepMode===c.stepMode&&uv(o.attributes,c.attributes,s3)}function l3(o,c){return!(o.indexBufferFormat!==c.indexBufferFormat||!uv(o.vertexBufferDescriptors,c.vertexBufferDescriptors,u3)||!qx(o.program,c.program))}function XS(o,c){return o.addressModeU===c.addressModeU&&o.addressModeV===c.addressModeV&&o.minFilter===c.minFilter&&o.magFilter===c.magFilter&&o.mipmapFilter===c.mipmapFilter&&o.lodMinClamp===c.lodMinClamp&&o.lodMaxClamp===c.lodMaxClamp&&o.maxAnisotropy===c.maxAnisotropy&&o.compareFunction===c.compareFunction}function c3(o){var c=o.sampler,f=o.texture,h=o.dimension,d=o.formatKind,g=o.comparison;return{sampler:c,texture:f,dimension:h,formatKind:d,comparison:g}}function YS(o){var c=o.buffer,f=o.size,h=o.binding,d=o.offset;return{binding:h,buffer:c,offset:d,size:f}}function qS(o){var c=o.binding,f=o.texture;return{binding:c,texture:f}}function Kx(o){var c=o.samplerBindings&&lh(o.samplerBindings,c3),f=o.uniformBufferBindings&&lh(o.uniformBufferBindings,YS),h=o.storageBufferBindings&&lh(o.storageBufferBindings,YS),d=o.storageTextureBindings&&lh(o.storageTextureBindings,qS);return{samplerBindings:c,uniformBufferBindings:f,storageBufferBindings:h,storageTextureBindings:d,pipeline:o.pipeline}}function H1(o){var c=o.inputLayout,f=o.program,h=o.topology,d=o.megaStateDescriptor&&b0(o.megaStateDescriptor),g=o.colorAttachmentFormats.slice(),S=o.depthStencilAttachmentFormat,C=o.sampleCount;return{inputLayout:c,megaStateDescriptor:d,program:f,topology:h,colorAttachmentFormats:g,depthStencilAttachmentFormat:S,sampleCount:C}}function KS(o){var c=o.shaderLocation,f=o.format,h=o.offset,d=o.divisor;return{shaderLocation:c,format:f,offset:h,divisor:d}}function f3(o){if((0,Mp.Z)(o))return o;var c=o.arrayStride,f=o.stepMode,h=lh(o.attributes,KS);return{arrayStride:c,stepMode:f,attributes:h}}function h3(o){var c=lh(o.vertexBufferDescriptors,f3),f=o.indexBufferFormat,h=o.program;return{vertexBufferDescriptors:c,indexBufferFormat:f,program:h}}var Cs,p3=/([^[]*)(\[[0-9]+\])?/;function v3(o){if(o[o.length-1]!=="]")return{name:o,length:1,isArray:!1};var c=o.match(p3);if(!c||c.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(o));return{name:c[1],length:Number(c[2])||1,isArray:!!c[2]}}function Jh(){var o=null;return function(c,f,h){var d=o!==h;return d&&(c.uniform1i(f,h),o=h),d}}function jl(o,c,f,h){var d=null,g=null;return function(S,C,k){var F=c(k,f),$=F.length,X=!1;if(d===null)d=new Float32Array($),g=$,X=!0;else{Yo(g===$,"Uniform length cannot change.");for(var me=0;me<$;++me)if(F[me]!==d[me]){X=!0;break}}return X&&(h(S,o,C,F),d.set(F)),X}}function kh(o,c,f,h){o[c](f,h)}function Uv(o,c,f,h){o[c](f,!1,h)}var m3={},g3={},QS={},JS=[0];function W1(o,c,f,h){c===1&&typeof o=="boolean"&&(o=o?1:0),Number.isFinite(o)&&(JS[0]=o,o=JS);var d=o.length;if(o instanceof f)return o;var g=h[d];g||(g=new f(d),h[d]=g);for(var S=0;S<d;S++)g[S]=o[S];return g}function Kd(o,c){return W1(o,c,Float32Array,m3)}function J0(o,c){return W1(o,c,Int32Array,g3)}function h_(o,c){return W1(o,c,Uint32Array,QS)}var y3=(Cs={},Cs[Fn.FLOAT]=jl.bind(null,"uniform1fv",Kd,1,kh),Cs[Fn.FLOAT_VEC2]=jl.bind(null,"uniform2fv",Kd,2,kh),Cs[Fn.FLOAT_VEC3]=jl.bind(null,"uniform3fv",Kd,3,kh),Cs[Fn.FLOAT_VEC4]=jl.bind(null,"uniform4fv",Kd,4,kh),Cs[Fn.INT]=jl.bind(null,"uniform1iv",J0,1,kh),Cs[Fn.INT_VEC2]=jl.bind(null,"uniform2iv",J0,2,kh),Cs[Fn.INT_VEC3]=jl.bind(null,"uniform3iv",J0,3,kh),Cs[Fn.INT_VEC4]=jl.bind(null,"uniform4iv",J0,4,kh),Cs[Fn.BOOL]=jl.bind(null,"uniform1iv",J0,1,kh),Cs[Fn.BOOL_VEC2]=jl.bind(null,"uniform2iv",J0,2,kh),Cs[Fn.BOOL_VEC3]=jl.bind(null,"uniform3iv",J0,3,kh),Cs[Fn.BOOL_VEC4]=jl.bind(null,"uniform4iv",J0,4,kh),Cs[Fn.FLOAT_MAT2]=jl.bind(null,"uniformMatrix2fv",Kd,4,Uv),Cs[Fn.FLOAT_MAT3]=jl.bind(null,"uniformMatrix3fv",Kd,9,Uv),Cs[Fn.FLOAT_MAT4]=jl.bind(null,"uniformMatrix4fv",Kd,16,Uv),Cs[Fn.UNSIGNED_INT]=jl.bind(null,"uniform1uiv",h_,1,kh),Cs[Fn.UNSIGNED_INT_VEC2]=jl.bind(null,"uniform2uiv",h_,2,kh),Cs[Fn.UNSIGNED_INT_VEC3]=jl.bind(null,"uniform3uiv",h_,3,kh),Cs[Fn.UNSIGNED_INT_VEC4]=jl.bind(null,"uniform4uiv",h_,4,kh),Cs[Fn.FLOAT_MAT2x3]=jl.bind(null,"uniformMatrix2x3fv",Kd,6,Uv),Cs[Fn.FLOAT_MAT2x4]=jl.bind(null,"uniformMatrix2x4fv",Kd,8,Uv),Cs[Fn.FLOAT_MAT3x2]=jl.bind(null,"uniformMatrix3x2fv",Kd,6,Uv),Cs[Fn.FLOAT_MAT3x4]=jl.bind(null,"uniformMatrix3x4fv",Kd,12,Uv),Cs[Fn.FLOAT_MAT4x2]=jl.bind(null,"uniformMatrix4x2fv",Kd,8,Uv),Cs[Fn.FLOAT_MAT4x3]=jl.bind(null,"uniformMatrix4x3fv",Kd,12,Uv),Cs[Fn.SAMPLER_2D]=Jh,Cs[Fn.SAMPLER_CUBE]=Jh,Cs[Fn.SAMPLER_3D]=Jh,Cs[Fn.SAMPLER_2D_SHADOW]=Jh,Cs[Fn.SAMPLER_2D_ARRAY]=Jh,Cs[Fn.SAMPLER_2D_ARRAY_SHADOW]=Jh,Cs[Fn.SAMPLER_CUBE_SHADOW]=Jh,Cs[Fn.INT_SAMPLER_2D]=Jh,Cs[Fn.INT_SAMPLER_3D]=Jh,Cs[Fn.INT_SAMPLER_CUBE]=Jh,Cs[Fn.INT_SAMPLER_2D_ARRAY]=Jh,Cs[Fn.UNSIGNED_INT_SAMPLER_2D]=Jh,Cs[Fn.UNSIGNED_INT_SAMPLER_3D]=Jh,Cs[Fn.UNSIGNED_INT_SAMPLER_CUBE]=Jh,Cs[Fn.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Jh,Cs);function ew(o,c,f){var h=y3[f.type];if(!h)throw new Error("Unknown GLSL uniform type ".concat(f.type));return h().bind(null,o,c)}var _3={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function b3(o){return Object.prototype.toString.call(o)in _3}function d_(o,c){return"#define ".concat(o," ").concat(c)}function x3(o){var c={};return o.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(f,h,d){var g=Number(d);return c[h]=isNaN(g)?d:g,""}),c}function tw(o,c){var f=[];return o.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(h,d,g){var S=Number(d);return f.push({location:isNaN(S)?c[d]:S,name:g}),""}),f}function I5(o){var c=[],f=[];return o.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(h,d,g){var S=[];return g.trim().replace(`\r
`,`
`).split(`
`).forEach(function(C){var k=__read(C.trim().split(/\s+/),2),F=k[0],$=k[1];S.push({type:F.trim(),name:$.replace(";","").trim()})}),f.push({type:d.trim(),uniforms:S}),""}),o.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(h,d){return d.trim().replace(`\r
`,`
`).split(`
`).forEach(function(g){var S=g.trim().split(" "),C=S[0]||"",k=S[1]||"",F=k.indexOf("[")>-1;if(k=k.replace(";","").replace("[","").trim(),!C.startsWith("#")){if(C){var $=f.find(function(je){return C===je.type});if($)if(F)for(var X=function(je){$.uniforms.forEach(function(_t){c.push("".concat(k,"[").concat(je,"].").concat(_t.name))})},me=0;me<5;me++)X(me);else $.uniforms.forEach(function(je){c.push("".concat(k,".").concat(je.name))})}k&&c.push(k)}}),""}),c}function Qx(o){if(o===void 0)return null;var c=/binding\s*=\s*(\d+)/.exec(o);if(c!==null){var f=parseInt(c[1],10);if(!Number.isNaN(f))return f}return null}function $1(o){var c="",f=o;return[f,c]}function Lh(o,c,f,h,d){var g;h===void 0&&(h=null),d===void 0&&(d=!0);var S=o.glslVersion==="#version 100",C=c==="frag"&&((g=f.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||g===void 0?void 0:g.length)>1,k=f.replace(`\r
`,`
`).split(`
`).map(function(kr){return kr.replace(/[/][/].*$/,"")}).filter(function(kr){var hr=!kr||/^\s+$/.test(kr);return!hr}),F="";h!==null&&(F=Object.keys(h).map(function(kr){return d_(kr,h[kr])}).join(`
`));var $=k.find(function(kr){return kr.startsWith("precision")})||"precision mediump float;",X=d?k.filter(function(kr){return!kr.startsWith("precision")}).join(`
`):k.join(`
`),me="";if(o.viewportOrigin===_0.UPPER_LEFT&&(me+="".concat(d_("VIEWPORT_ORIGIN_TL","1"),`
`)),o.clipSpaceNearZ===Cf.ZERO&&(me+="".concat(d_("CLIPSPACE_NEAR_ZERO","1"),`
`)),o.explicitBindingLocations){var je=0,_t=0,Ot=0;X=X.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(kr,hr,Hr,ha){var Xa=Hr?"".concat(Hr,", "):"";return"layout(".concat(Xa,"set = ").concat(je,", binding = ").concat(_t++,") uniform ").concat(ha)}),je++,_t=0,Yo(o.separateSamplerTextures),X=X.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(kr,hr,Hr,ha,Xa){var pa=Qx(Hr);pa===null&&(pa=_t++);var bo=(0,Za.CR)($1(ha),2),Do=bo[0],so=bo[1];return c==="frag"?`
layout(set = `.concat(je,", binding = ").concat(pa*2+0,") uniform texture").concat(Do," T_").concat(Xa,`;
layout(set = `).concat(je,", binding = ").concat(pa*2+1,") uniform sampler").concat(so," S_").concat(Xa,";").trim():""}),X=X.replace(c==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(kr,hr){return"layout(location = ".concat(Ot++,") ").concat(hr)}),me+="".concat(d_("gl_VertexID","gl_VertexIndex"),`
`),me+="".concat(d_("gl_InstanceID","gl_InstanceIndex"),`
`),$=$.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var nn=0;X=X.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(kr,hr,Hr,ha,Xa){var pa=Qx(Hr);return pa===null&&(pa=nn++),"uniform sampler".concat(ha," ").concat(Xa,"; // BINDING=").concat(pa)})}if(X=X.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return"SAMPLER_".concat(hr,"(P_").concat(Hr,")")}),X=X.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return"PP_SAMPLER_".concat(hr,"(P_").concat(Hr,")")}),X=X.replace(/\bPU_TEXTURE\((.*?)\)/g,function(kr,hr){return"TEXTURE(P_".concat(hr,")")}),o.separateSamplerTextures)X=X.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){var ha=(0,Za.CR)($1(hr),2),Xa=ha[0],pa=ha[1];return"texture".concat(Xa," T_P_").concat(Hr,", sampler").concat(pa," S_P_").concat(Hr)}),X=X.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return"T_".concat(Hr,", S_").concat(Hr)}),X=X.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return"sampler".concat(hr,"(T_").concat(Hr,", S_").concat(Hr,")")}),X=X.replace(/\bTEXTURE\((.*?)\)/g,function(kr,hr){return"T_".concat(hr)});else{var Un=[];X=X.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return"sampler".concat(hr," P_").concat(Hr)}),X=X.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return Hr}),X=X.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(kr,hr,Hr){return Un.push([Hr,hr]),Hr}),S&&Un.forEach(function(kr){var hr=(0,Za.CR)(kr,2),Hr=hr[0],ha=hr[1];X=X.replace(new RegExp("texture\\(".concat(Hr),"g"),function(){return"texture".concat(ha,"(").concat(Hr)})}),X=X.replace(/\bTEXTURE\((.*?)\)/g,function(kr,hr){return hr})}var zn="".concat(S?"":o.glslVersion,`
`).concat(S&&C?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(S&&c==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(d?$:"",`
`).concat(me||"").concat(F?F+`
`:"",`
`).concat(X,`
`).trim();if(o.explicitBindingLocations&&c==="frag"&&(zn=zn.replace(/^\b(out)\b/g,function(kr,hr){return"layout(location = 0) ".concat(hr)})),S){if(c==="frag"&&(zn=zn.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(kr,hr,Hr){return"varying ".concat(hr," ").concat(Hr,`;
`)})),c==="vert"&&(zn=zn.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(kr,hr,Hr){return"varying ".concat(hr," ").concat(Hr,`;
`)}),zn=zn.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(kr,hr,Hr){return"attribute ".concat(hr," ").concat(Hr,`;
`)})),zn=zn.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(kr,hr){return hr.trim().replace(/^.*$/gm,function(Hr){var ha=Hr.trim();return ha.startsWith("#")?ha:Hr?"uniform ".concat(ha):""})}),c==="frag")if(C){var ur=[];zn=zn.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(kr,hr){return ur.push(hr),"vec4 ".concat(hr,`;
`)});var Pr=zn.lastIndexOf("}");zn=zn.substring(0,Pr)+`
    `.concat(ur.map(function(kr,hr){return"gl_FragData[".concat(hr,"] = ").concat(kr,`;
    `)}).join(`
`))+zn.substring(Pr)}else{var si;if(zn=zn.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(kr,hr,Hr){return si=Hr,"".concat(hr," ").concat(Hr,`;
`)}),si){var Pr=zn.lastIndexOf("}");zn=zn.substring(0,Pr)+`
  gl_FragColor = vec4(`.concat(si,`);
`)+zn.substring(Pr)}}zn=zn.replace(/^\s*layout\((.*)\)/gm,"")}return zn}function nw(o,c,f,h){h===void 0&&(h=null);var d=Lh(o,"vert",c,h),g=Lh(o,"frag",f,h);return{vert:c,frag:f,preprocessedVert:d,preprocessedFrag:g}}var Dh=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=o.call(this)||this;return g.id=h,g.device=d,g.device.resourceCreationTracker!==null&&g.device.resourceCreationTracker.trackResourceCreated(g),g}return c.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},c}(Vx),rw=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.Bindings;var C=g.uniformBufferBindings,k=g.samplerBindings;return S.uniformBufferBindings=C||[],S.samplerBindings=k||[],S.bindingLayouts=S.createBindingLayouts(),S}return c.prototype.createBindingLayouts=function(){var f=0,h=0,d=[],g=this.uniformBufferBindings.length,S=this.samplerBindings.length;return d.push({firstUniformBuffer:f,numUniformBuffers:g,firstSampler:h,numSamplers:S}),f+=g,h+=S,{numUniformBuffers:f,numSamplers:h,bindingLayoutTables:d}},c}(Dh);function eo(o){return typeof WebGL2RenderingContext!="undefined"&&o instanceof WebGL2RenderingContext?!0:!!(o&&o._version===2)}function Jx(o){var c=sv(o);switch(c){case Mi.BC1:case Mi.BC2:case Mi.BC3:case Mi.BC4_UNORM:case Mi.BC4_SNORM:case Mi.BC5_UNORM:case Mi.BC5_SNORM:return!0;default:return!1}}function E3(o){var c=Xg(o);if(c&Ra.Normalized)return!1;var f=sv(o);return f===Mi.S8||f===Mi.S16||f===Mi.S32||f===Mi.U8||f===Mi.U16||f===Mi.U32}function iw(o){switch(o){case sh.STATIC:return Fn.STATIC_DRAW;case sh.DYNAMIC:return Fn.DYNAMIC_DRAW}}function e2(o){if(o&yu.INDEX)return Fn.ELEMENT_ARRAY_BUFFER;if(o&yu.VERTEX)return Fn.ARRAY_BUFFER;if(o&yu.UNIFORM)return Fn.UNIFORM_BUFFER}function S3(o){switch(o){case Cl.TRIANGLES:return Fn.TRIANGLES;case Cl.POINTS:return Fn.POINTS;case Cl.TRIANGLE_STRIP:return Fn.TRIANGLE_STRIP;case Cl.LINES:return Fn.LINES;case Cl.LINE_STRIP:return Fn.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function w3(o){switch(o){case Mi.U8:return Fn.UNSIGNED_BYTE;case Mi.U16:return Fn.UNSIGNED_SHORT;case Mi.U32:return Fn.UNSIGNED_INT;case Mi.S8:return Fn.BYTE;case Mi.S16:return Fn.SHORT;case Mi.S32:return Fn.INT;case Mi.F16:return Fn.HALF_FLOAT;case Mi.F32:return Fn.FLOAT;default:throw new Error("whoops")}}function T3(o){switch(o){case qa.R:return 1;case qa.RG:return 2;case qa.RGB:return 3;case qa.RGBA:return 4;default:return 1}}function A3(o){var c=sv(o),f=D1(o),h=Xg(o),d=w3(c),g=T3(f),S=!!(h&Ra.Normalized);return{size:g,type:d,normalized:S}}function C3(o){switch(o){case yr.U8_R:return Fn.UNSIGNED_BYTE;case yr.U16_R:return Fn.UNSIGNED_SHORT;case yr.U32_R:return Fn.UNSIGNED_INT;default:throw new Error("whoops")}}function p_(o){switch(o){case oh.CLAMP_TO_EDGE:return Fn.CLAMP_TO_EDGE;case oh.REPEAT:return Fn.REPEAT;case oh.MIRRORED_REPEAT:return Fn.MIRRORED_REPEAT;default:throw new Error("whoops")}}function G1(o,c){if(c===pu.LINEAR&&o===ll.BILINEAR)return Fn.LINEAR_MIPMAP_LINEAR;if(c===pu.LINEAR&&o===ll.POINT)return Fn.NEAREST_MIPMAP_LINEAR;if(c===pu.NEAREST&&o===ll.BILINEAR)return Fn.LINEAR_MIPMAP_NEAREST;if(c===pu.NEAREST&&o===ll.POINT)return Fn.NEAREST_MIPMAP_NEAREST;if(c===pu.NO_MIP&&o===ll.BILINEAR)return Fn.LINEAR;if(c===pu.NO_MIP&&o===ll.POINT)return Fn.NEAREST;throw new Error("Unknown texture filter mode")}function qg(o,c){c===void 0&&(c=0);var f=o;return f.gl_buffer_pages[c/f.pageByteSize|0]}function Kg(o){var c=o;return c.gl_texture}function t2(o){var c=o;return c.gl_sampler}function v_(o,c){o.name=c,o.__SPECTOR_Metadata={name:c}}function aw(o,c){for(var f=[];;){var h=c.exec(o);if(!h)break;f.push(h)}return f}function em(o){return o.blendMode==wc.ADD&&o.blendSrcFactor==Ao.ONE&&o.blendDstFactor===Ao.ZERO}function O3(o){switch(o){case i_.OcclusionConservative:return Fn.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function X1(o){if(o===ys.TEXTURE_2D)return Fn.TEXTURE_2D;if(o===ys.TEXTURE_2D_ARRAY)return Fn.TEXTURE_2D_ARRAY;if(o===ys.TEXTURE_CUBE_MAP)return Fn.TEXTURE_CUBE_MAP;if(o===ys.TEXTURE_3D)return Fn.TEXTURE_3D;throw new Error("whoops")}function n2(o,c,f,h){return!(o%f!==0||c%h!==0)}var Km=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.Buffer;var C=g.viewOrSize,k=g.usage,F=g.hint,$=F===void 0?sh.STATIC:F,X=d.uniformBufferMaxPageByteSize,me=d.gl,je=k&yu.UNIFORM;je||(eo(me)?me.bindVertexArray(null):d.OES_vertex_array_object.bindVertexArrayOES(null));var _t=(0,Xm.Z)(C)?u_(C,4):u_(C.byteLength,4);S.gl_buffer_pages=[];var Ot;if(je){for(var nn=_t;nn>0;)S.gl_buffer_pages.push(S.createBufferPage(Math.min(nn,X),k,$)),nn-=X;Ot=X}else S.gl_buffer_pages.push(S.createBufferPage(_t,k,$)),Ot=_t;return S.pageByteSize=Ot,S.byteSize=_t,S.usage=k,S.gl_target=e2(k),(0,Xm.Z)(C)||S.setSubData(0,new Uint8Array(C.buffer)),je||(eo(me)?me.bindVertexArray(S.device.currentBoundVAO):d.OES_vertex_array_object.bindVertexArrayOES(S.device.currentBoundVAO)),S}return c.prototype.setSubData=function(f,h,d,g){d===void 0&&(d=0),g===void 0&&(g=h.byteLength-d);for(var S=this.device.gl,C=this.pageByteSize,k=f+g,F=f,$=f%C;F<k;){var X=eo(S)?S.COPY_WRITE_BUFFER:this.gl_target,me=qg(this,F);if(me.ubo)return;S.bindBuffer(X,me),eo(S)?S.bufferSubData(X,$,h,d,Math.min(k-F,C)):S.bufferSubData(X,$,h),F+=C,$=0,d+=C,this.device.debugGroupStatisticsBufferUpload()}},c.prototype.destroy=function(){o.prototype.destroy.call(this);for(var f=0;f<this.gl_buffer_pages.length;f++)this.gl_buffer_pages[f].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[f]);this.gl_buffer_pages=[]},c.prototype.createBufferPage=function(f,h,d){var g=this.device.gl,S=h&yu.UNIFORM;if(!eo(g)&&S)return{ubo:!0};var C=this.device.ensureResourceExists(g.createBuffer()),k=e2(h),F=iw(d);return g.bindBuffer(k,C),g.bufferData(k,f,F),C},c}(Dh),M3=function(o){(0,Za.ZT)(c,o);function c(f){var h,d,g,S,C=f.id,k=f.device,F=f.descriptor,$,X=o.call(this,{id:C,device:k})||this;X.type=Us.InputLayout;var me=F.vertexBufferDescriptors,je=F.indexBufferFormat,_t=F.program;Yo(je===yr.U16_R||je===yr.U32_R||je===null);var Ot=je!==null?C3(je):null,nn=je!==null?BS(je):null,Un=X.device.gl,zn=X.device.ensureResourceExists(eo(Un)?Un.createVertexArray():k.OES_vertex_array_object.createVertexArrayOES());eo(Un)?Un.bindVertexArray(zn):k.OES_vertex_array_object.bindVertexArrayOES(zn),Un.bindBuffer(Un.ARRAY_BUFFER,qg(X.device.fallbackVertexBuffer));try{for(var ur=(0,Za.XA)(F.vertexBufferDescriptors),Pr=ur.next();!Pr.done;Pr=ur.next()){var si=Pr.value,kr=si.stepMode,hr=si.attributes;try{for(var Hr=(g=void 0,(0,Za.XA)(hr)),ha=Hr.next();!ha.done;ha=Hr.next()){var Xa=ha.value,pa=Xa.shaderLocation,bo=Xa.format,Do=Xa.divisor,so=Do===void 0?1:Do,af=eo(Un)?pa:($=_t.attributes[pa])===null||$===void 0?void 0:$.location,Uu=A3(bo);if(Xa.vertexFormat=Uu,!(0,Mp.Z)(af)){E3(bo);var td=Uu.size,Jd=Uu.type,fh=Uu.normalized;Un.vertexAttribPointer(af,td,Jd,fh,0,0),kr===Hf.INSTANCE&&(eo(Un)?Un.vertexAttribDivisor(af,so):k.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(af,so)),Un.enableVertexAttribArray(af)}}}catch(Rs){g={error:Rs}}finally{try{ha&&!ha.done&&(S=Hr.return)&&S.call(Hr)}finally{if(g)throw g.error}}}}catch(Rs){h={error:Rs}}finally{try{Pr&&!Pr.done&&(d=ur.return)&&d.call(ur)}finally{if(h)throw h.error}}return eo(Un)?Un.bindVertexArray(null):k.OES_vertex_array_object.bindVertexArrayOES(null),X.vertexBufferDescriptors=me,X.vao=zn,X.indexBufferFormat=je,X.indexBufferType=Ot,X.indexBufferCompByteSize=nn,X.program=_t,X}return c.prototype.destroy=function(){o.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(eo(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},c}(Dh),Qg=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=f.fake,C=o.call(this,{id:h,device:d})||this;C.type=Us.Texture,g=(0,Za.pi)({dimension:ys.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},g);var k=C.device.gl,F,$,X=C.clampmipLevelCount(g);if(C.immutable=g.usage===uh.RENDER_TARGET,C.pixelStore=g.pixelStore,C.format=g.format,C.dimension=g.dimension,C.formatKind=Bv(g.format),C.width=g.width,C.height=g.height,C.depthOrArrayLayers=g.depthOrArrayLayers,C.mipmaps=X>=1,!S){$=C.device.ensureResourceExists(k.createTexture());var me=C.device.translateTextureType(g.format),je=C.device.translateTextureInternalFormat(g.format);if(C.device.setActiveTexture(k.TEXTURE0),C.device.currentTextures[0]=null,C.preprocessImage(),g.dimension===ys.TEXTURE_2D){if(F=Fn.TEXTURE_2D,k.bindTexture(F,$),C.immutable)if(eo(k))k.texStorage2D(F,X,je,g.width,g.height);else{var _t=(je===Fn.DEPTH_COMPONENT||C.isNPOT(),0);(C.format===yr.D32F||C.format===yr.D24_S8)&&!eo(k)&&!d.WEBGL_depth_texture||(k.texImage2D(F,_t,je,g.width,g.height,0,je,me,null),C.mipmaps&&(C.mipmaps=!1,k.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_MIN_FILTER,Fn.LINEAR),k.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_WRAP_S,Fn.CLAMP_TO_EDGE),k.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_WRAP_T,Fn.CLAMP_TO_EDGE)))}Yo(g.depthOrArrayLayers===1)}else if(g.dimension===ys.TEXTURE_2D_ARRAY)F=Fn.TEXTURE_2D_ARRAY,k.bindTexture(F,$),C.immutable&&eo(k)&&k.texStorage3D(F,X,je,g.width,g.height,g.depthOrArrayLayers);else if(g.dimension===ys.TEXTURE_3D)F=Fn.TEXTURE_3D,k.bindTexture(F,$),C.immutable&&eo(k)&&k.texStorage3D(F,X,je,g.width,g.height,g.depthOrArrayLayers);else if(g.dimension===ys.TEXTURE_CUBE_MAP)F=Fn.TEXTURE_CUBE_MAP,k.bindTexture(F,$),C.immutable&&eo(k)&&k.texStorage2D(F,X,je,g.width,g.height),Yo(g.depthOrArrayLayers===6);else throw new Error("whoops")}return C.gl_texture=$,C.gl_target=F,C.mipLevelCount=X,C}return c.prototype.setImageData=function(f,h){h===void 0&&(h=0);var d=this.device.gl;Jx(this.format);var g=this.gl_target===Fn.TEXTURE_3D||this.gl_target===Fn.TEXTURE_2D_ARRAY,S=this.gl_target===Fn.TEXTURE_CUBE_MAP,C=b3(f[0]);this.device.setActiveTexture(d.TEXTURE0),this.device.currentTextures[0]=null;var k=f[0],F,$;C?(F=this.width,$=this.height):(F=k.width,$=k.height,this.width=F,this.height=$),d.bindTexture(this.gl_target,this.gl_texture);var X=this.device.translateTextureFormat(this.format),me=eo(d)?this.device.translateInternalTextureFormat(this.format):X,je=this.device.translateTextureType(this.format);this.preprocessImage();for(var _t=0;_t<this.depthOrArrayLayers;_t++){var Ot=f[_t],nn=this.gl_target;S&&(nn=Fn.TEXTURE_CUBE_MAP_POSITIVE_X+_t%6),this.immutable?d.texSubImage2D(nn,h,0,0,F,$,X,je,Ot):eo(d)?g?d.texImage3D(nn,h,me,F,$,this.depthOrArrayLayers,0,X,je,Ot):d.texImage2D(nn,h,me,F,$,0,X,je,Ot):C?d.texImage2D(nn,h,X,F,$,0,X,je,Ot):d.texImage2D(nn,h,X,X,je,Ot)}this.mipmaps&&this.generateMipmap(g)},c.prototype.destroy=function(){o.prototype.destroy.call(this),this.device.gl.deleteTexture(Kg(this))},c.prototype.clampmipLevelCount=function(f){if(f.dimension===ys.TEXTURE_2D_ARRAY&&f.depthOrArrayLayers>1){var h=sv(f.format);if(h===Mi.BC1)for(var d=f.width,g=f.height,S=0;S<f.mipLevelCount;S++){if(d<=2||g<=2)return S-1;d=Math.max(d/2|0,1),g=Math.max(g/2|0,1)}}return f.mipLevelCount},c.prototype.preprocessImage=function(){var f=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&f.pixelStorei(Fn.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&f.pixelStorei(Fn.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&f.pixelStorei(Fn.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},c.prototype.generateMipmap=function(f){f===void 0&&(f=!1);var h=this.device.gl;return!eo(h)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(h.bindTexture(this.gl_target,this.gl_texture),f?(h.texParameteri(this.gl_target,Fn.TEXTURE_BASE_LEVEL,0),h.texParameteri(this.gl_target,Fn.TEXTURE_MAX_LEVEL,Math.log2(this.width)),h.texParameteri(this.gl_target,Fn.TEXTURE_MIN_FILTER,Fn.LINEAR_MIPMAP_LINEAR),h.texParameteri(this.gl_target,Fn.TEXTURE_MAG_FILTER,Fn.LINEAR)):h.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_MIN_FILTER,Fn.NEAREST_MIPMAP_LINEAR),h.generateMipmap(this.gl_target),h.bindTexture(this.gl_target,null)),this)},c.prototype.isNPOT=function(){var f=this.device.gl;return eo(f)?!1:!N1(this.width)||!N1(this.height)},c}(Dh),tm=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.RenderTarget,S.gl_renderbuffer=null,S.texture=null;var C=S.device.gl,k=g.format,F=g.width,$=g.height,X=g.sampleCount,me=X===void 0?1:X,je=g.texture,_t=!1;if((k===yr.D32F||k===yr.D24_S8)&&je&&!eo(C)&&!d.WEBGL_depth_texture&&(je.destroy(),S.texture=null,_t=!0),!_t&&je)S.texture=je;else{S.gl_renderbuffer=S.device.ensureResourceExists(C.createRenderbuffer()),C.bindRenderbuffer(C.RENDERBUFFER,S.gl_renderbuffer);var Ot=S.device.translateTextureInternalFormat(k,!0);eo(C)&&me>1?C.renderbufferStorageMultisample(Fn.RENDERBUFFER,me,Ot,F,$):C.renderbufferStorage(Fn.RENDERBUFFER,Ot,F,$)}return S.format=k,S.width=F,S.height=$,S.sampleCount=me,S}return c.prototype.destroy=function(){o.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},c}(Dh),ed;(function(o){o[o.NeedsCompile=0]="NeedsCompile",o[o.Compiling=1]="Compiling",o[o.NeedsBind=2]="NeedsBind",o[o.ReadyToUse=3]="ReadyToUse"})(ed||(ed={}));var R3=function(o){(0,Za.ZT)(c,o);function c(f,h){var d=f.id,g=f.device,S=f.descriptor,C=o.call(this,{id:d,device:g})||this;C.rawVertexGLSL=h,C.type=Us.Program,C.uniformSetters={},C.attributes=[];var k=C.device.gl;return C.descriptor=S,C.gl_program=C.device.ensureResourceExists(k.createProgram()),C.gl_shader_vert=null,C.gl_shader_frag=null,C.compileState=ed.NeedsCompile,C.tryCompileProgram(),C}return c.prototype.destroy=function(){o.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},c.prototype.tryCompileProgram=function(){Yo(this.compileState===ed.NeedsCompile);var f=this.descriptor,h=f.vertex,d=f.fragment,g=this.device.gl;h!=null&&h.glsl&&(d!=null&&d.glsl)&&(this.gl_shader_vert=this.compileShader(h.postprocess?h.postprocess(h.glsl):h.glsl,g.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(d.postprocess?d.postprocess(d.glsl):d.glsl,g.FRAGMENT_SHADER),g.attachShader(this.gl_program,this.gl_shader_vert),g.attachShader(this.gl_program,this.gl_shader_frag),g.linkProgram(this.gl_program),this.compileState=ed.Compiling,eo(g)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},c.prototype.readAttributesFromLinkedProgram=function(){for(var f,h=this.device.gl,d=h.getProgramParameter(this.gl_program,h.ACTIVE_ATTRIBUTES),g=x3(this.descriptor.vertex.glsl),S=tw(this.rawVertexGLSL,g),C=function($){var X=h.getActiveAttrib(k.gl_program,$),me=X.name,je=X.type,_t=X.size,Ot=h.getAttribLocation(k.gl_program,me),nn=(f=S.find(function(Un){return Un.name===me}))===null||f===void 0?void 0:f.location;Ot>=0&&!(0,Mp.Z)(nn)&&(k.attributes[nn]={name:me,location:Ot,type:je,size:_t})},k=this,F=0;F<d;F++)C(F)},c.prototype.readUniformLocationsFromLinkedProgram=function(){for(var f=this.device.gl,h=f.getProgramParameter(this.gl_program,f.ACTIVE_UNIFORMS),d=0;d<h;d++){var g=f.getActiveUniform(this.gl_program,d),S=v3(g.name).name,C=f.getUniformLocation(this.gl_program,S);if(this.uniformSetters[S]=ew(f,C,g),g&&g.size>1)for(var k=0;k<g.size;k++)C=f.getUniformLocation(this.gl_program,"".concat(S,"[").concat(k,"]")),this.uniformSetters["".concat(S,"[").concat(k,"]")]=ew(f,C,g)}},c.prototype.compileShader=function(f,h){var d=this.device.gl,g=this.device.ensureResourceExists(d.createShader(h));return d.shaderSource(g,f),d.compileShader(g),g},c.prototype.setUniformsLegacy=function(f){f===void 0&&(f={});var h=this.device.gl;if(!eo(h)){var d=!1;for(var g in f){d||(h.useProgram(this.gl_program),d=!0);var S=f[g],C=this.uniformSetters[g];if(C){var k=S;k instanceof Qg&&(k=k.textureIndex),C(k)}}}return this},c}(Dh),r2=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.QueryPool;var C=S.device.gl;if(eo(C)){var k=g.elemCount,F=g.type;S.gl_query=n3(k,function(){return S.device.ensureResourceExists(C.createQuery())}),S.gl_query_type=O3(F)}return S}return c.prototype.queryResultOcclusion=function(f){var h=this.device.gl;if(eo(h)){var d=this.gl_query[f];return h.getQueryParameter(d,h.QUERY_RESULT_AVAILABLE)?!!h.getQueryParameter(d,h.QUERY_RESULT):null}return null},c.prototype.destroy=function(){o.prototype.destroy.call(this);var f=this.device.gl;if(eo(f))for(var h=0;h<this.gl_query.length;h++)f.deleteQuery(this.gl_query[h])},c}(Dh),P3=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=o.call(this,{id:h,device:d})||this;return g.type=Us.Readback,g.gl_pbo=null,g.gl_sync=null,g}return c.prototype.clientWaitAsync=function(f,h,d){h===void 0&&(h=0),d===void 0&&(d=10);var g=this.device.gl;return new Promise(function(S,C){function k(){var F=g.clientWaitSync(f,h,0);if(F==g.WAIT_FAILED){C();return}if(F==g.TIMEOUT_EXPIRED){setTimeout(k,(0,qO.Z)(d,0,g.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}S()}k()})},c.prototype.getBufferSubDataAsync=function(f,h,d,g,S,C){return(0,Za.mG)(this,void 0,void 0,function(){var k;return(0,Za.Jh)(this,function(F){switch(F.label){case 0:return k=this.device.gl,eo(k)?(this.gl_sync=k.fenceSync(k.SYNC_GPU_COMMANDS_COMPLETE,0),k.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return F.sent(),k.bindBuffer(f,h),k.getBufferSubData(f,d,g,S,C),k.bindBuffer(f,null),[2,g];case 2:return[2]}})})},c.prototype.readTexture=function(f,h,d,g,S,C,k,F){return k===void 0&&(k=0),F===void 0&&(F=C.byteLength||0),(0,Za.mG)(this,void 0,void 0,function(){var $,X,me,je,_t;return(0,Za.Jh)(this,function(Ot){return $=this.device.gl,X=f,me=this.device.translateTextureFormat(X.format),je=this.device.translateTextureType(X.format),_t=QO(X.format),eo($)?(this.gl_pbo=this.device.ensureResourceExists($.createBuffer()),$.bindBuffer($.PIXEL_PACK_BUFFER,this.gl_pbo),$.bufferData($.PIXEL_PACK_BUFFER,F,$.STREAM_READ),$.bindBuffer($.PIXEL_PACK_BUFFER,null),$.bindFramebuffer(Fn.READ_FRAMEBUFFER,this.device.readbackFramebuffer),$.framebufferTexture2D(Fn.READ_FRAMEBUFFER,Fn.COLOR_ATTACHMENT0,Fn.TEXTURE_2D,X.gl_texture,0),$.bindBuffer($.PIXEL_PACK_BUFFER,this.gl_pbo),$.readPixels(h,d,g,S,me,je,k*_t),$.bindBuffer($.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync($.PIXEL_PACK_BUFFER,this.gl_pbo,0,C,k,0)]):[2,this.readTextureSync(f,h,d,g,S,C,k,F)]})})},c.prototype.readTextureSync=function(f,h,d,g,S,C,k,F){F===void 0&&(F=C.byteLength||0);var $=this.device.gl,X=f,me=this.device.translateTextureType(X.format);return $.bindFramebuffer(Fn.FRAMEBUFFER,this.device.readbackFramebuffer),$.framebufferTexture2D(Fn.FRAMEBUFFER,Fn.COLOR_ATTACHMENT0,Fn.TEXTURE_2D,X.gl_texture,0),$.pixelStorei($.PACK_ALIGNMENT,4),$.readPixels(h,d,g,S,$.RGBA,me,C),C},c.prototype.readBuffer=function(f,h,d,g,S){return(0,Za.mG)(this,void 0,void 0,function(){var C;return(0,Za.Jh)(this,function(k){return C=this.device.gl,eo(C)?[2,this.getBufferSubDataAsync(C.ARRAY_BUFFER,qg(f,h),h,d,g,S)]:[2,Promise.reject()]})})},c.prototype.destroy=function(){o.prototype.destroy.call(this),eo(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},c}(Dh),ow=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S,C,k=o.call(this,{id:h,device:d})||this;return k.type=Us.RenderPipeline,k.drawMode=S3((S=g.topology)!==null&&S!==void 0?S:Cl.TRIANGLES),k.program=g.program,k.inputLayout=g.inputLayout,k.megaState=(0,Za.pi)((0,Za.pi)({},b0(zv)),g.megaStateDescriptor),k.colorAttachmentFormats=g.colorAttachmentFormats.slice(),k.depthStencilAttachmentFormat=g.depthStencilAttachmentFormat,k.sampleCount=(C=g.sampleCount)!==null&&C!==void 0?C:1,k}return c}(Dh),sw=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;return S.type=Us.ComputePipeline,S.descriptor=g,S}return c}(Dh),I3=function(){function o(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return o.prototype.trackResourceCreated=function(c){this.creationStacks.set(c,new Error().stack),this.liveObjects.add(c)},o.prototype.trackResourceDestroyed=function(c){this.deletionStacks.has(c)&&console.warn("Object double freed:",c,`

Creation stack: `,this.creationStacks.get(c),`

Deletion stack: `,this.deletionStacks.get(c),`

This stack: `,new Error().stack),this.deletionStacks.set(c,new Error().stack),this.liveObjects.delete(c)},o.prototype.checkForLeaks=function(){var c,f;try{for(var h=(0,Za.XA)(this.liveObjects.values()),d=h.next();!d.done;d=h.next()){var g=d.value;console.warn("Object leaked:",g,"Creation stack:",this.creationStacks.get(g))}}catch(S){c={error:S}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}},o.prototype.setResourceLeakCheck=function(c,f){f?this.liveObjects.add(c):this.liveObjects.delete(c)},o}(),k3=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S,C,k=o.call(this,{id:h,device:d})||this;k.type=Us.Sampler;var F=k.device.gl;if(eo(F)){var $=k.device.ensureResourceExists(F.createSampler());F.samplerParameteri($,Fn.TEXTURE_WRAP_S,p_(g.addressModeU)),F.samplerParameteri($,Fn.TEXTURE_WRAP_T,p_(g.addressModeV)),F.samplerParameteri($,Fn.TEXTURE_WRAP_R,p_((S=g.addressModeW)!==null&&S!==void 0?S:g.addressModeU)),F.samplerParameteri($,Fn.TEXTURE_MIN_FILTER,G1(g.minFilter,g.mipmapFilter)),F.samplerParameteri($,Fn.TEXTURE_MAG_FILTER,G1(g.magFilter,pu.NO_MIP)),g.lodMinClamp!==void 0&&F.samplerParameterf($,Fn.TEXTURE_MIN_LOD,g.lodMinClamp),g.lodMaxClamp!==void 0&&F.samplerParameterf($,Fn.TEXTURE_MAX_LOD,g.lodMaxClamp),g.compareFunction!==void 0&&(F.samplerParameteri($,F.TEXTURE_COMPARE_MODE,F.COMPARE_REF_TO_TEXTURE),F.samplerParameteri($,F.TEXTURE_COMPARE_FUNC,g.compareFunction));var X=(C=g.maxAnisotropy)!==null&&C!==void 0?C:1;X>1&&k.device.EXT_texture_filter_anisotropic!==null&&(Yo(g.minFilter===ll.BILINEAR&&g.magFilter===ll.BILINEAR&&g.mipmapFilter===pu.LINEAR),F.samplerParameterf($,k.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X)),k.gl_sampler=$}else k.descriptor=g;return k}return c.prototype.setTextureParameters=function(f,h,d){var g,S=this.device.gl,C=this.descriptor;this.isNPOT(h,d)?S.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_MIN_FILTER,Fn.LINEAR):S.texParameteri(f,Fn.TEXTURE_MIN_FILTER,G1(C.minFilter,C.mipmapFilter)),S.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_WRAP_S,p_(C.addressModeU)),S.texParameteri(Fn.TEXTURE_2D,Fn.TEXTURE_WRAP_T,p_(C.addressModeV)),S.texParameteri(f,Fn.TEXTURE_MAG_FILTER,G1(C.magFilter,pu.NO_MIP));var k=(g=C.maxAnisotropy)!==null&&g!==void 0?g:1;k>1&&this.device.EXT_texture_filter_anisotropic!==null&&(Yo(C.minFilter===ll.BILINEAR&&C.magFilter===ll.BILINEAR&&C.mipmapFilter===pu.LINEAR),S.texParameteri(f,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k))},c.prototype.destroy=function(){o.prototype.destroy.call(this),eo(this.device.gl)&&this.device.gl.deleteSampler(t2(this))},c.prototype.isNPOT=function(f,h){return!N1(f)||!N1(h)},c}(Dh),L3=function(){function o(){}return o.prototype.dispatchWorkgroups=function(c,f,h){},o.prototype.dispatchWorkgroupsIndirect=function(c,f){},o.prototype.setPipeline=function(c){},o.prototype.setBindings=function(c){},o.prototype.pushDebugGroup=function(c){},o.prototype.popDebugGroup=function(){},o.prototype.insertDebugMarker=function(c){},o}(),D3=function(o){(0,Za.ZT)(c,o);function c(){var f=o!==null&&o.apply(this,arguments)||this;return f.type=Us.RenderBundle,f.commands=[],f}return c.prototype.push=function(f){this.commands.push(f)},c.prototype.replay=function(){this.commands.forEach(function(f){return f()})},c}(Dh),uw=65536,N3=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,B3=function(){function o(c,f){f===void 0&&(f={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=b0(zv),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=_0.LOWER_LEFT,this.clipSpaceNearZ=Cf.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=c,this.contextAttributes=Ym(c.getContextAttributes()),eo(c)?(this.EXT_texture_norm16=c.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=c.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=c.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=c.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=c.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=c.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=c.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=c.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=c.getExtension("EXT_color_buffer_half_float"),c.getExtension("EXT_frag_depth"),c.getExtension("OES_element_index_uint"),c.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=c.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=c.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=c.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=c.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=c.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=c.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=c.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=c.getExtension("KHR_parallel_shader_compile"),eo(c)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new Qg({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:ys.TEXTURE_2D,mipLevelCount:1,usage:uh.RENDER_TARGET,format:this.contextAttributes.alpha===!1?yr.U8_RGB_RT:yr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Ul.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(c.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(c.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(c.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(c.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(c.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(c.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(ys.TEXTURE_2D,Ul.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(ys.TEXTURE_2D,Ul.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:yu.VERTEX,hint:sh.STATIC}),eo(c)&&(this.fallbackTexture2DArray=this.createFallbackTexture(ys.TEXTURE_2D_ARRAY,Ul.Float),this.fallbackTexture3D=this.createFallbackTexture(ys.TEXTURE_3D,Ul.Float),this.fallbackTextureCube=this.createFallbackTexture(ys.TEXTURE_CUBE_MAP,Ul.Float)),this.currentMegaState.depthCompare=ts.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Af.ALL,c.enable(c.DEPTH_TEST),c.enable(c.STENCIL_TEST),this.checkLimits(),f.shaderDebug&&(this.shaderDebug=!0),f.trackResources&&(this.resourceCreationTracker=new I3)}return o.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},o.prototype.createFallbackTexture=function(c,f){var h=c===ys.TEXTURE_CUBE_MAP?6:1,d=f===Ul.Depth?yr.D32F:yr.U8_RGBA_NORM,g=this.createTexture({dimension:c,format:d,usage:uh.SAMPLED,width:1,height:1,depthOrArrayLayers:h,mipLevelCount:1});return f===Ul.Float&&g.setImageData([new Uint8Array(4*h)]),Kg(g)},o.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},o.prototype.checkLimits=function(){var c=this.gl;if(this.maxVertexAttribs=c.getParameter(Fn.MAX_VERTEX_ATTRIBS),eo(c)){this.uniformBufferMaxPageByteSize=Math.min(c.getParameter(Fn.MAX_UNIFORM_BLOCK_SIZE),uw),this.uniformBufferWordAlignment=c.getParameter(c.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var f=c.getInternalformatParameter(c.RENDERBUFFER,c.DEPTH32F_STENCIL8,c.SAMPLES);this.supportedSampleCounts=f?(0,Za.ev)([],(0,Za.CR)(f),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=uw;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(h,d){return h-d})},o.prototype.configureSwapChain=function(c,f,h){var d=this.scTexture;d.width=c,d.height=f,this.scPlatformFramebuffer=B1(h)},o.prototype.getDevice=function(){return this},o.prototype.getCanvas=function(){return this.gl.canvas},o.prototype.getOnscreenTexture=function(){return this.scTexture},o.prototype.beginFrame=function(){},o.prototype.endFrame=function(){},o.prototype.translateTextureInternalFormat=function(c,f){switch(f===void 0&&(f=!1),c){case yr.ALPHA:return Fn.ALPHA;case yr.U8_LUMINANCE:case yr.F16_LUMINANCE:case yr.F32_LUMINANCE:return Fn.LUMINANCE;case yr.F16_R:return Fn.R16F;case yr.F16_RG:return Fn.RG16F;case yr.F16_RGB:return Fn.RGB16F;case yr.F16_RGBA:return Fn.RGBA16F;case yr.F32_R:return Fn.R32F;case yr.F32_RG:return Fn.RG32F;case yr.F32_RGB:return Fn.RGB32F;case yr.F32_RGBA:return eo(this.gl)?Fn.RGBA32F:f?this.WEBGL_color_buffer_float.RGBA32F_EXT:Fn.RGBA;case yr.U8_R_NORM:return Fn.R8;case yr.U8_RG_NORM:return Fn.RG8;case yr.U8_RGB_NORM:case yr.U8_RGB_RT:return Fn.RGB8;case yr.U8_RGB_SRGB:return Fn.SRGB8;case yr.U8_RGBA_NORM:case yr.U8_RGBA_RT:return eo(this.gl)?Fn.RGBA8:f?Fn.RGBA4:Fn.RGBA;case yr.U8_RGBA:return Fn.RGBA;case yr.U8_RGBA_SRGB:case yr.U8_RGBA_RT_SRGB:return Fn.SRGB8_ALPHA8;case yr.U16_R:return Fn.R16UI;case yr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case yr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case yr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case yr.U16_RGBA_5551:return Fn.RGB5_A1;case yr.U16_RGB_565:return Fn.RGB565;case yr.U32_R:return Fn.R32UI;case yr.S8_RGBA_NORM:return Fn.RGBA8_SNORM;case yr.S8_RG_NORM:return Fn.RG8_SNORM;case yr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case yr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case yr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case yr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case yr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case yr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case yr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case yr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case yr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case yr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case yr.D32F_S8:return eo(this.gl)?Fn.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Fn.DEPTH_STENCIL:Fn.DEPTH_COMPONENT16;case yr.D24_S8:return eo(this.gl)?Fn.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Fn.DEPTH_STENCIL:Fn.DEPTH_COMPONENT16;case yr.D32F:return eo(this.gl)?Fn.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Fn.DEPTH_COMPONENT:Fn.DEPTH_COMPONENT16;case yr.D24:return eo(this.gl)?Fn.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Fn.DEPTH_COMPONENT:Fn.DEPTH_COMPONENT16;default:throw new Error("whoops")}},o.prototype.translateTextureType=function(c){var f=sv(c);switch(f){case Mi.U8:return Fn.UNSIGNED_BYTE;case Mi.U16:return Fn.UNSIGNED_SHORT;case Mi.U32:return Fn.UNSIGNED_INT;case Mi.S8:return Fn.BYTE;case Mi.F16:return Fn.HALF_FLOAT;case Mi.F32:return Fn.FLOAT;case Mi.U16_PACKED_5551:return Fn.UNSIGNED_SHORT_5_5_5_1;case Mi.D32F:return eo(this.gl)?Fn.FLOAT:this.WEBGL_depth_texture?Fn.UNSIGNED_INT:Fn.UNSIGNED_BYTE;case Mi.D24:return eo(this.gl)?Fn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Fn.UNSIGNED_SHORT:Fn.UNSIGNED_BYTE;case Mi.D24S8:return eo(this.gl)?Fn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Fn.UNSIGNED_INT_24_8_WEBGL:Fn.UNSIGNED_BYTE;case Mi.D32FS8:return Fn.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},o.prototype.translateInternalTextureFormat=function(c){switch(c){case yr.F32_R:return Fn.R32F;case yr.F32_RG:return Fn.RG32F;case yr.F32_RGB:return Fn.RGB32F;case yr.F32_RGBA:return Fn.RGBA32F;case yr.F16_R:return Fn.R16F;case yr.F16_RG:return Fn.RG16F;case yr.F16_RGB:return Fn.RGB16F;case yr.F16_RGBA:return Fn.RGBA16F}return this.translateTextureFormat(c)},o.prototype.translateTextureFormat=function(c){if(Jx(c)||c===yr.F32_LUMINANCE||c===yr.U8_LUMINANCE)return this.translateTextureInternalFormat(c);var f=eo(this.gl)||!eo(this.gl)&&!!this.WEBGL_depth_texture;switch(c){case yr.D24_S8:case yr.D32F_S8:return f?Fn.DEPTH_STENCIL:Fn.RGBA;case yr.D24:case yr.D32F:return f?Fn.DEPTH_COMPONENT:Fn.RGBA}var h=E3(c),d=D1(c);switch(d){case qa.A:return Fn.ALPHA;case qa.R:return h?Fn.RED_INTEGER:Fn.RED;case qa.RG:return h?Fn.RG_INTEGER:Fn.RG;case qa.RGB:return h?Fn.RGB_INTEGER:Fn.RGB;case qa.RGBA:return Fn.RGBA}},o.prototype.setActiveTexture=function(c){this.currentActiveTexture!==c&&(this.gl.activeTexture(c),this.currentActiveTexture=c)},o.prototype.bindVAO=function(c){this.currentBoundVAO!==c&&(eo(this.gl)?this.gl.bindVertexArray(c):this.OES_vertex_array_object.bindVertexArrayOES(c),this.currentBoundVAO=c)},o.prototype.programCompiled=function(c){Yo(c.compileState!==ed.NeedsCompile),c.compileState===ed.Compiling&&(c.compileState=ed.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(c))},o.prototype.useProgram=function(c){this.currentProgram!==c&&(this.programCompiled(c),this.gl.useProgram(c.gl_program),this.currentProgram=c)},o.prototype.ensureResourceExists=function(c){if(c===null){var f=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(f))}else return c},o.prototype.createBuffer=function(c){return new Km({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createTexture=function(c){return new Qg({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createSampler=function(c){return new k3({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createRenderTarget=function(c){return new tm({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createRenderTargetFromTexture=function(c){var f=c,h=f.format,d=f.width,g=f.height,S=f.mipLevelCount;return Yo(S===1),this.createRenderTarget({format:h,width:d,height:g,sampleCount:1,texture:c})},o.prototype.createProgram=function(c){var f,h,d,g=(f=c.vertex)===null||f===void 0?void 0:f.glsl;return!((h=c.vertex)===null||h===void 0)&&h.glsl&&(c.vertex.glsl=Lh(this.queryVendorInfo(),"vert",c.vertex.glsl)),!((d=c.fragment)===null||d===void 0)&&d.glsl&&(c.fragment.glsl=Lh(this.queryVendorInfo(),"frag",c.fragment.glsl)),this.createProgramSimple(c,g)},o.prototype.createProgramSimple=function(c,f){var h=new R3({id:this.getNextUniqueId(),device:this,descriptor:c},f);return h},o.prototype.createBindings=function(c){return new rw({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createInputLayout=function(c){return new M3({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createRenderPipeline=function(c){return new ow({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createComputePass=function(){return new L3},o.prototype.createComputePipeline=function(c){return new sw({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createReadback=function(){return new P3({id:this.getNextUniqueId(),device:this})},o.prototype.createQueryPool=function(c,f){return new r2({id:this.getNextUniqueId(),device:this,descriptor:{type:c,elemCount:f}})},o.prototype.formatRenderPassDescriptor=function(c){var f,h,d,g,S,C,k=c.colorAttachment;c.depthClearValue=(f=c.depthClearValue)!==null&&f!==void 0?f:"load",c.stencilClearValue=(h=c.stencilClearValue)!==null&&h!==void 0?h:"load";for(var F=0;F<k.length;F++)c.colorAttachmentLevel||(c.colorAttachmentLevel=[]),c.colorAttachmentLevel[F]=(d=c.colorAttachmentLevel[F])!==null&&d!==void 0?d:0,c.colorResolveToLevel||(c.colorResolveToLevel=[]),c.colorResolveToLevel[F]=(g=c.colorResolveToLevel[F])!==null&&g!==void 0?g:0,c.colorClearColor||(c.colorClearColor=[]),c.colorClearColor[F]=(S=c.colorClearColor[F])!==null&&S!==void 0?S:"load",c.colorStore||(c.colorStore=[]),c.colorStore[F]=(C=c.colorStore[F])!==null&&C!==void 0?C:!1},o.prototype.createRenderBundle=function(){return new D3({id:this.getNextUniqueId(),device:this})},o.prototype.beginBundle=function(c){this.renderBundle=c},o.prototype.endBundle=function(){this.renderBundle=void 0},o.prototype.executeBundles=function(c){c.forEach(function(f){f.replay()})},o.prototype.createRenderPass=function(c){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=c,this.formatRenderPassDescriptor(c);var f=c.colorAttachment,h=c.colorAttachmentLevel,d=c.colorClearColor,g=c.colorResolveTo,S=c.colorResolveToLevel,C=c.depthStencilAttachment,k=c.depthClearValue,F=c.stencilClearValue,$=c.depthStencilResolveTo;this.setRenderPassParametersBegin(f.length);for(var X=0;X<f.length;X++)this.setRenderPassParametersColor(X,f[X],h[X],g[X],S[X]);this.setRenderPassParametersDepthStencil(C,$),this.validateCurrentAttachments();for(var X=0;X<f.length;X++){var me=d[X];me!=="load"&&this.setRenderPassParametersClearColor(X,me.r,me.g,me.b,me.a)}return this.setRenderPassParametersClearDepthStencil(k,F),this},o.prototype.submitPass=function(c){Yo(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},o.prototype.copySubTexture2D=function(c,f,h,d,g,S){var C=this.gl,k=c,F=d;if(Yo(F.mipLevelCount===1),Yo(k.mipLevelCount===1),eo(C))k===this.scTexture?C.bindFramebuffer(C.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(C.bindFramebuffer(C.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0,k,0)),C.bindFramebuffer(C.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(C.READ_FRAMEBUFFER,C.COLOR_ATTACHMENT0,F,0),C.blitFramebuffer(g,S,g+F.width,S+F.height,f,h,f+F.width,h+F.height,C.COLOR_BUFFER_BIT,C.LINEAR),C.bindFramebuffer(C.READ_FRAMEBUFFER,null),C.bindFramebuffer(C.DRAW_FRAMEBUFFER,null);else if(k===this.scTexture){var $=this.createRenderTargetFromTexture(d);this.submitBlitRenderPass($,k)}},o.prototype.queryLimits=function(){return this},o.prototype.queryTextureFormatSupported=function(c,f,h){switch(c){case yr.BC1_SRGB:case yr.BC2_SRGB:case yr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?n2(f,h,4,4):!1;case yr.BC1:case yr.BC2:case yr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?n2(f,h,4,4):!1;case yr.BC4_UNORM:case yr.BC4_SNORM:case yr.BC5_UNORM:case yr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?n2(f,h,4,4):!1;case yr.U16_R_NORM:case yr.U16_RG_NORM:case yr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case yr.F32_R:case yr.F32_RG:case yr.F32_RGB:case yr.F32_RGBA:return this.OES_texture_float_linear!==null;case yr.F16_R:case yr.F16_RG:case yr.F16_RGB:case yr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},o.prototype.queryProgramReady=function(c){var f=this.gl;if(c.compileState===ed.NeedsCompile)throw new Error("whoops");if(c.compileState===ed.Compiling){var h=void 0;return this.KHR_parallel_shader_compile!==null?h=f.getProgramParameter(c.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):h=!0,h&&this.programCompiled(c),h}return c.compileState===ed.NeedsBind||c.compileState===ed.ReadyToUse},o.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},o.prototype.queryVendorInfo=function(){return this},o.prototype.queryRenderPass=function(c){return this.currentRenderPassDescriptor},o.prototype.queryRenderTarget=function(c){var f=c;return f},o.prototype.setResourceName=function(c,f){if(c.name=f,c.type===Us.Buffer)for(var h=c.gl_buffer_pages,d=0;d<h.length;d++)v_(h[d],"".concat(f," Page ").concat(d));else if(c.type===Us.Texture)v_(Kg(c),f);else if(c.type===Us.Sampler)v_(t2(c),f);else if(c.type===Us.RenderTarget){var g=c.gl_renderbuffer;g!==null&&v_(g,f)}else c.type===Us.InputLayout&&v_(c.vao,f)},o.prototype.setResourceLeakCheck=function(c,f){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(c,f)},o.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},o.prototype.pushDebugGroup=function(c){},o.prototype.popDebugGroup=function(){},o.prototype.insertDebugMarker=function(c){},o.prototype.programPatched=function(c,f){Yo(this.shaderDebug)},o.prototype.getBufferData=function(c,f,h){h===void 0&&(h=0);var d=this.gl;eo(d)&&(d.bindBuffer(d.COPY_READ_BUFFER,qg(c,h*4)),d.getBufferSubData(d.COPY_READ_BUFFER,h*4,f))},o.prototype.debugGroupStatisticsDrawCall=function(c){c===void 0&&(c=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].drawCallCount+=c},o.prototype.debugGroupStatisticsBufferUpload=function(c){c===void 0&&(c=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].bufferUploadCount+=c},o.prototype.debugGroupStatisticsTextureBind=function(c){c===void 0&&(c=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].textureBindCount+=c},o.prototype.debugGroupStatisticsTriangles=function(c){for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].triangleCount+=c},o.prototype.reportShaderError=function(c,f){var h=this.gl,d=h.getShaderParameter(c,h.COMPILE_STATUS);if(!d){console.error(r3(f));var g=h.getExtension("WEBGL_debug_shaders");g&&console.error(g.getTranslatedShaderSource(c)),console.error(h.getShaderInfoLog(c))}return d},o.prototype.checkProgramCompilationForErrors=function(c){var f=this.gl,h=c.gl_program;if(!f.getProgramParameter(h,f.LINK_STATUS)){var d=c.descriptor;if(!this.reportShaderError(c.gl_shader_vert,d.vertex.glsl)||!this.reportShaderError(c.gl_shader_frag,d.fragment.glsl))return;console.error(f.getProgramInfoLog(c.gl_program))}},o.prototype.bindFramebufferAttachment=function(c,f,h,d){var g=this.gl;if((0,Mp.Z)(h))g.framebufferRenderbuffer(c,f,g.RENDERBUFFER,null);else if(h.type===Us.RenderTarget)h.gl_renderbuffer!==null?g.framebufferRenderbuffer(c,f,g.RENDERBUFFER,h.gl_renderbuffer):h.texture!==null&&g.framebufferTexture2D(c,f,Fn.TEXTURE_2D,Kg(h.texture),d);else if(h.type===Us.Texture){var S=Kg(h);h.dimension===ys.TEXTURE_2D?g.framebufferTexture2D(c,f,Fn.TEXTURE_2D,S,d):eo(g)&&(h.dimension,ys.TEXTURE_2D_ARRAY)}},o.prototype.bindFramebufferDepthStencilAttachment=function(c,f){var h=this.gl,d=(0,Mp.Z)(f)?Ra.Depth|Ra.Stencil:Xg(f.format),g=!!(d&Ra.Depth),S=!!(d&Ra.Stencil);if(g&&S){var C=eo(this.gl)||!eo(this.gl)&&!!this.WEBGL_depth_texture;C?this.bindFramebufferAttachment(c,h.DEPTH_STENCIL_ATTACHMENT,f,0):this.bindFramebufferAttachment(c,h.DEPTH_ATTACHMENT,f,0)}else g?(this.bindFramebufferAttachment(c,h.DEPTH_ATTACHMENT,f,0),this.bindFramebufferAttachment(c,h.STENCIL_ATTACHMENT,null,0)):S&&(this.bindFramebufferAttachment(c,h.STENCIL_ATTACHMENT,f,0),this.bindFramebufferAttachment(c,h.DEPTH_ATTACHMENT,null,0))},o.prototype.validateCurrentAttachments=function(){for(var c=-1,f=-1,h=-1,d=0;d<this.currentColorAttachments.length;d++){var g=this.currentColorAttachments[d];g!==null&&(c===-1?(c=g.sampleCount,f=g.width,h=g.height):(Yo(c===g.sampleCount),Yo(f===g.width),Yo(h===g.height)))}this.currentDepthStencilAttachment&&(c===-1?c=this.currentDepthStencilAttachment.sampleCount:(Yo(c===this.currentDepthStencilAttachment.sampleCount),Yo(f===this.currentDepthStencilAttachment.width),Yo(h===this.currentDepthStencilAttachment.height))),this.currentSampleCount=c},o.prototype.setRenderPassParametersBegin=function(c){var f=this.gl;if(eo(f)?f.bindFramebuffer(Fn.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||f.bindFramebuffer(Fn.FRAMEBUFFER,this.renderPassDrawFramebuffer),eo(f)?f.drawBuffers([Fn.COLOR_ATTACHMENT0,Fn.COLOR_ATTACHMENT1,Fn.COLOR_ATTACHMENT2,Fn.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Fn.COLOR_ATTACHMENT0_WEBGL,Fn.COLOR_ATTACHMENT1_WEBGL,Fn.COLOR_ATTACHMENT2_WEBGL,Fn.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var h=c;h<this.currentColorAttachments.length;h++){var d=eo(f)?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,g=eo(f)?Fn.COLOR_ATTACHMENT0:Fn.COLOR_ATTACHMENT0_WEBGL;f.framebufferRenderbuffer(d,g+h,Fn.RENDERBUFFER,null),f.framebufferTexture2D(d,g+h,Fn.TEXTURE_2D,null,0)}this.currentColorAttachments.length=c},o.prototype.setRenderPassParametersColor=function(c,f,h,d,g){var S=this.gl,C=eo(S);(this.currentColorAttachments[c]!==f||this.currentColorAttachmentLevels[c]!==h)&&(this.currentColorAttachments[c]=f,this.currentColorAttachmentLevels[c]=h,(C||!C&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(C?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,(C?Fn.COLOR_ATTACHMENT0:Fn.COLOR_ATTACHMENT0_WEBGL)+c,f,h),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[c]!==d||this.currentColorResolveToLevels[c]!==g)&&(this.currentColorResolveTos[c]=d,this.currentColorResolveToLevels[c]=g,d!==null&&(this.resolveColorAttachmentsChanged=!0))},o.prototype.setRenderPassParametersDepthStencil=function(c,f){var h=this.gl;this.currentDepthStencilAttachment!==c&&(this.currentDepthStencilAttachment=c,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(eo(h)?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==f&&(this.currentDepthStencilResolveTo=f,f&&(this.resolveDepthStencilAttachmentsChanged=!0))},o.prototype.setRenderPassParametersClearColor=function(c,f,h,d,g){var S=this.gl;if(this.OES_draw_buffers_indexed!==null){var C=this.currentMegaState.attachmentsState[c];C&&C.channelWriteMask!==Af.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(c,!0,!0,!0,!0),C.channelWriteMask=Af.ALL)}else{var C=this.currentMegaState.attachmentsState[0];C&&C.channelWriteMask!==Af.ALL&&(S.colorMask(!0,!0,!0,!0),C.channelWriteMask=Af.ALL)}this.setScissorRectEnabled(!1),eo(S)?S.clearBufferfv(S.COLOR,c,[f,h,d,g]):(S.clearColor(f,h,d,g),S.clear(S.COLOR_BUFFER_BIT))},o.prototype.setRenderPassParametersClearDepthStencil=function(c,f){c===void 0&&(c="load"),f===void 0&&(f="load");var h=this.gl;c!=="load"&&(Yo(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(h.depthMask(!0),this.currentMegaState.depthWrite=!0),eo(h)?h.clearBufferfv(h.DEPTH,0,[c]):(h.clearDepth(c),h.clear(h.DEPTH_BUFFER_BIT))),f!=="load"&&(Yo(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(h.enable(h.STENCIL_TEST),h.stencilMask(255),this.currentMegaState.stencilWrite=!0),eo(h)?h.clearBufferiv(h.STENCIL,0,[f]):(h.clearStencil(f),h.clear(h.STENCIL_BUFFER_BIT)))},o.prototype.setBindings=function(c){var f=this,h;if(this.renderBundle){this.renderBundle.push(function(){return f.setBindings(c)});return}var d=this.gl,g=c,S=g.uniformBufferBindings,C=g.samplerBindings,k=g.bindingLayouts;Yo(0<k.bindingLayoutTables.length);var F=k.bindingLayoutTables[0];Yo(S.length>=F.numUniformBuffers),Yo(C.length>=F.numSamplers);for(var $=0;$<S.length;$++){var X=S[$];if(X.size!==0){var me=F.firstUniformBuffer+$,je=X.buffer,_t=X.offset||0,Ot=X.size||je.byteSize;if(je!==this.currentUniformBuffers[me]||_t!==this.currentUniformBufferByteOffsets[me]||Ot!==this.currentUniformBufferByteSizes[me]){var nn=_t%je.pageByteSize,Un=je.gl_buffer_pages[_t/je.pageByteSize|0];Yo(nn+Ot<=je.pageByteSize),eo(d)&&d.bindBufferRange(d.UNIFORM_BUFFER,me,Un,nn,Ot),this.currentUniformBuffers[me]=je,this.currentUniformBufferByteOffsets[me]=_t,this.currentUniformBufferByteSizes[me]=Ot}}}for(var $=0;$<F.numSamplers;$++){var X=C[$],zn=F.firstSampler+$,ur=X!==null&&X.sampler!==null?t2(X.sampler):null,Pr=X!==null&&X.texture!==null?Kg(X.texture):null;if(this.currentSamplers[zn]!==ur&&(eo(d)&&d.bindSampler(zn,ur),this.currentSamplers[zn]=ur),this.currentTextures[zn]!==Pr){if(this.setActiveTexture(d.TEXTURE0+zn),Pr!==null){var si=Ym(X).texture,kr=si.gl_target,hr=si.width,Hr=si.height;X.texture.textureIndex=zn,d.bindTexture(kr,Pr),eo(d)||(h=X.sampler)===null||h===void 0||h.setTextureParameters(kr,hr,Hr),this.debugGroupStatisticsTextureBind()}else{var ha=(0,Za.pi)((0,Za.pi)({},X),Yx),Xa=ha.dimension,pa=ha.formatKind,kr=X1(Xa);d.bindTexture(kr,this.getFallbackTexture((0,Za.pi)({gl_target:kr,formatKind:pa},ha)))}this.currentTextures[zn]=Pr}}},o.prototype.setViewport=function(c,f,h,d){var g=this.gl;g.viewport(c,f,h,d)},o.prototype.setScissorRect=function(c,f,h,d){var g=this.gl;this.setScissorRectEnabled(!0),g.scissor(c,f,h,d)},o.prototype.applyAttachmentStateIndexed=function(c,f,h){var d=this.gl,g=this.OES_draw_buffers_indexed;f.channelWriteMask!==h.channelWriteMask&&(g.colorMaskiOES(c,!!(h.channelWriteMask&Af.RED),!!(h.channelWriteMask&Af.GREEN),!!(h.channelWriteMask&Af.BLUE),!!(h.channelWriteMask&Af.ALPHA)),f.channelWriteMask=h.channelWriteMask);var S=f.rgbBlendState.blendMode!==h.rgbBlendState.blendMode||f.alphaBlendState.blendMode!==h.alphaBlendState.blendMode,C=f.rgbBlendState.blendSrcFactor!==h.rgbBlendState.blendSrcFactor||f.alphaBlendState.blendSrcFactor!==h.alphaBlendState.blendSrcFactor||f.rgbBlendState.blendDstFactor!==h.rgbBlendState.blendDstFactor||f.alphaBlendState.blendDstFactor!==h.alphaBlendState.blendDstFactor;(C||S)&&(em(f.rgbBlendState)&&em(f.alphaBlendState)?g.enableiOES(c,d.BLEND):em(h.rgbBlendState)&&em(h.alphaBlendState)&&g.disableiOES(c,d.BLEND)),S&&(g.blendEquationSeparateiOES(c,h.rgbBlendState.blendMode,h.alphaBlendState.blendMode),f.rgbBlendState.blendMode=h.rgbBlendState.blendMode,f.alphaBlendState.blendMode=h.alphaBlendState.blendMode),C&&(g.blendFuncSeparateiOES(c,h.rgbBlendState.blendSrcFactor,h.rgbBlendState.blendDstFactor,h.alphaBlendState.blendSrcFactor,h.alphaBlendState.blendDstFactor),f.rgbBlendState.blendSrcFactor=h.rgbBlendState.blendSrcFactor,f.alphaBlendState.blendSrcFactor=h.alphaBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor=h.rgbBlendState.blendDstFactor,f.alphaBlendState.blendDstFactor=h.alphaBlendState.blendDstFactor)},o.prototype.applyAttachmentState=function(c,f){var h=this.gl;c.channelWriteMask!==f.channelWriteMask&&(h.colorMask(!!(f.channelWriteMask&Af.RED),!!(f.channelWriteMask&Af.GREEN),!!(f.channelWriteMask&Af.BLUE),!!(f.channelWriteMask&Af.ALPHA)),c.channelWriteMask=f.channelWriteMask);var d=c.rgbBlendState.blendMode!==f.rgbBlendState.blendMode||c.alphaBlendState.blendMode!==f.alphaBlendState.blendMode,g=c.rgbBlendState.blendSrcFactor!==f.rgbBlendState.blendSrcFactor||c.alphaBlendState.blendSrcFactor!==f.alphaBlendState.blendSrcFactor||c.rgbBlendState.blendDstFactor!==f.rgbBlendState.blendDstFactor||c.alphaBlendState.blendDstFactor!==f.alphaBlendState.blendDstFactor;(g||d)&&(em(c.rgbBlendState)&&em(c.alphaBlendState)?h.enable(h.BLEND):em(f.rgbBlendState)&&em(f.alphaBlendState)&&h.disable(h.BLEND)),d&&(h.blendEquationSeparate(f.rgbBlendState.blendMode,f.alphaBlendState.blendMode),c.rgbBlendState.blendMode=f.rgbBlendState.blendMode,c.alphaBlendState.blendMode=f.alphaBlendState.blendMode),g&&(h.blendFuncSeparate(f.rgbBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor,f.alphaBlendState.blendSrcFactor,f.alphaBlendState.blendDstFactor),c.rgbBlendState.blendSrcFactor=f.rgbBlendState.blendSrcFactor,c.alphaBlendState.blendSrcFactor=f.alphaBlendState.blendSrcFactor,c.rgbBlendState.blendDstFactor=f.rgbBlendState.blendDstFactor,c.alphaBlendState.blendDstFactor=f.alphaBlendState.blendDstFactor)},o.prototype.setMegaState=function(c){var f=this.gl,h=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var d=0;d<c.attachmentsState.length;d++)this.applyAttachmentStateIndexed(d,h.attachmentsState[0],c.attachmentsState[0]);else Yo(c.attachmentsState.length===1),this.applyAttachmentState(h.attachmentsState[0],c.attachmentsState[0]);if(FS(h.blendConstant,c.blendConstant)||(f.blendColor(c.blendConstant.r,c.blendConstant.g,c.blendConstant.b,c.blendConstant.a),zS(h.blendConstant,c.blendConstant)),h.depthCompare!==c.depthCompare&&(f.depthFunc(c.depthCompare),h.depthCompare=c.depthCompare),!!h.depthWrite!=!!c.depthWrite&&(f.depthMask(c.depthWrite),h.depthWrite=c.depthWrite),!!h.stencilWrite!=!!c.stencilWrite&&(f.stencilMask(c.stencilWrite?255:0),h.stencilWrite=c.stencilWrite),!Z1(h.stencilFront,c.stencilFront)){var g=c.stencilFront,S=g.passOp,C=g.failOp,k=g.depthFailOp,F=g.compare;(h.stencilFront.passOp!==S||h.stencilFront.failOp!==C||h.stencilFront.depthFailOp!==k)&&(f.stencilOpSeparate(f.FRONT,C,k,S),h.stencilFront.passOp=S,h.stencilFront.failOp=C,h.stencilFront.depthFailOp=k),h.stencilFront.compare!==F&&(this.setStencilReference(0),h.stencilFront.compare=F)}if(!Z1(h.stencilBack,c.stencilBack)){var $=c.stencilBack,S=$.passOp,C=$.failOp,k=$.depthFailOp,F=$.compare;(h.stencilBack.passOp!==S||h.stencilBack.failOp!==C||h.stencilBack.depthFailOp!==k)&&(f.stencilOpSeparate(f.BACK,C,k,S),h.stencilBack.passOp=S,h.stencilBack.failOp=C,h.stencilBack.depthFailOp=k),h.stencilBack.compare!==F&&(this.setStencilReference(0),h.stencilBack.compare=F)}(h.stencilFront.mask!==c.stencilFront.mask||h.stencilBack.mask!==c.stencilBack.mask)&&(h.stencilFront.mask=c.stencilFront.mask,h.stencilBack.mask=c.stencilBack.mask,this.applyStencil()),h.cullMode!==c.cullMode&&(h.cullMode===Ih.NONE?f.enable(f.CULL_FACE):c.cullMode===Ih.NONE&&f.disable(f.CULL_FACE),c.cullMode===Ih.BACK?f.cullFace(f.BACK):c.cullMode===Ih.FRONT?f.cullFace(f.FRONT):c.cullMode===Ih.FRONT_AND_BACK&&f.cullFace(f.FRONT_AND_BACK),h.cullMode=c.cullMode),h.frontFace!==c.frontFace&&(f.frontFace(c.frontFace),h.frontFace=c.frontFace),h.polygonOffset!==c.polygonOffset&&(c.polygonOffset?(f.polygonOffset(1,1),f.enable(f.POLYGON_OFFSET_FILL)):f.disable(f.POLYGON_OFFSET_FILL),h.polygonOffset=c.polygonOffset)},o.prototype.validatePipelineFormats=function(c){for(var f=0;f<this.currentColorAttachments.length;f++)var h=this.currentColorAttachments[f];this.currentDepthStencilAttachment&&Yo(this.currentDepthStencilAttachment.format===c.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&Yo(this.currentSampleCount===c.sampleCount)},o.prototype.setPipeline=function(c){var f=this;if(this.renderBundle){this.renderBundle.push(function(){return f.setPipeline(c)});return}this.currentPipeline=c,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var h=this.currentPipeline.program;if(this.useProgram(h),h.compileState===ed.NeedsBind){var d=this.gl,g=h.gl_program,S=h.descriptor,C=aw(S.vertex.glsl,N3);if(eo(d))for(var k=0;k<C.length;k++){var F=(0,Za.CR)(C[k],2),$=F[1],X=d.getUniformBlockIndex(g,$);X!==-1&&X!==4294967295&&d.uniformBlockBinding(g,X,k)}for(var me=aw(S.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),k=0;k<me.length;k++){var je=(0,Za.CR)(me[k],3),_t=je[1],Ot=je[2],nn=d.getUniformLocation(g,_t);d.uniform1i(nn,parseInt(Ot))}h.compileState=ed.ReadyToUse}},o.prototype.setVertexInput=function(c,f,h){var d,g,S=this,C;if(this.renderBundle){this.renderBundle.push(function(){return S.setVertexInput(c,f,h)});return}if(c!==null){Yo(this.currentPipeline.inputLayout===c);var k=c;this.bindVAO(k.vao);for(var F=this.gl,$=0;$<k.vertexBufferDescriptors.length;$++){var X=k.vertexBufferDescriptors[$],me=X.arrayStride,je=X.attributes;try{for(var _t=(d=void 0,(0,Za.XA)(je)),Ot=_t.next();!Ot.done;Ot=_t.next()){var nn=Ot.value,Un=nn.shaderLocation,zn=nn.offset,ur=eo(F)?Un:(C=k.program.attributes[Un])===null||C===void 0?void 0:C.location;if(!(0,Mp.Z)(ur)){var Pr=f[$];if(Pr===null)continue;var si=nn.vertexFormat;F.bindBuffer(F.ARRAY_BUFFER,qg(Pr.buffer));var kr=(Pr.offset||0)+zn;F.vertexAttribPointer(ur,si.size,si.type,si.normalized,me,kr)}}}catch(Hr){d={error:Hr}}finally{try{Ot&&!Ot.done&&(g=_t.return)&&g.call(_t)}finally{if(d)throw d.error}}}if(Yo(h!==null==(k.indexBufferFormat!==null)),h!==null){var hr=h.buffer;Yo(hr.usage===yu.INDEX),F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,qg(hr)),this.currentIndexBufferByteOffset=h.offset||0}else this.currentIndexBufferByteOffset=null}else Yo(this.currentPipeline.inputLayout===null),Yo(h===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},o.prototype.setStencilReference=function(c){this.currentStencilRef!==c&&(this.currentStencilRef=c,this.applyStencil())},o.prototype.draw=function(c,f,h,d){var g,S=this;if(this.renderBundle){this.renderBundle.push(function(){return S.draw(c,f,h,d)});return}var C=this.gl,k=this.currentPipeline;if(f){var F=[k.drawMode,h||0,c,f];eo(C)?C.drawArraysInstanced.apply(C,(0,Za.ev)([],(0,Za.CR)(F),!1)):(g=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(g,(0,Za.ev)([],(0,Za.CR)(F),!1))}else C.drawArrays(k.drawMode,h,c);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(c/3*Math.max(f,1))},o.prototype.drawIndexed=function(c,f,h,d,g){var S,C=this;if(this.renderBundle){this.renderBundle.push(function(){return C.drawIndexed(c,f,h,d,g)});return}var k=this.gl,F=this.currentPipeline,$=Ym(F.inputLayout),X=Ym(this.currentIndexBufferByteOffset)+h*$.indexBufferCompByteSize;if(f){var me=[F.drawMode,c,$.indexBufferType,X,f];eo(k)?k.drawElementsInstanced.apply(k,(0,Za.ev)([],(0,Za.CR)(me),!1)):(S=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(S,(0,Za.ev)([],(0,Za.CR)(me),!1))}else k.drawElements(F.drawMode,c,$.indexBufferType,X);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(c/3*Math.max(f,1))},o.prototype.drawIndirect=function(c,f){},o.prototype.drawIndexedIndirect=function(c,f){},o.prototype.beginOcclusionQuery=function(c){var f=this.gl;if(eo(f)){var h=this.currentRenderPassDescriptor.occlusionQueryPool;f.beginQuery(h.gl_query_type,h.gl_query[c])}},o.prototype.endOcclusionQuery=function(){var c=this.gl;if(eo(c)){var f=this.currentRenderPassDescriptor.occlusionQueryPool;c.endQuery(f.gl_query_type)}},o.prototype.pipelineQueryReady=function(c){var f=c;return this.queryProgramReady(f.program)},o.prototype.pipelineForceReady=function(c){},o.prototype.endPass=function(){for(var c=this.gl,f=eo(c),h=!1,d=0;d<this.currentColorAttachments.length;d++){var g=this.currentColorAttachments[d];if(g!==null){var S=this.currentColorResolveTos[d],C=!1;S!==null&&(Yo(g.width===S.width&&g.height===S.height),this.setScissorRectEnabled(!1),f&&c.bindFramebuffer(c.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&f&&this.bindFramebufferAttachment(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,g,this.currentColorAttachmentLevels[d]),C=!0,S===this.scTexture?c.bindFramebuffer(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,this.scPlatformFramebuffer):(c.bindFramebuffer(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&c.framebufferTexture2D(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,S.gl_texture,this.currentColorResolveToLevels[d])),f?(c.blitFramebuffer(0,0,g.width,g.height,0,0,S.width,S.height,c.COLOR_BUFFER_BIT,c.LINEAR),c.bindFramebuffer(c.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(g,S),h=!0),this.currentRenderPassDescriptor.colorStore[d]||C||(c.bindFramebuffer(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,c.COLOR_ATTACHMENT0,g,this.currentColorAttachmentLevels[d])),c.bindFramebuffer(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var k=this.currentDepthStencilAttachment;if(k){var F=this.currentDepthStencilResolveTo,C=!1;F&&(Yo(k.width===F.width&&k.height===F.height),this.setScissorRectEnabled(!1),c.bindFramebuffer(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),c.bindFramebuffer(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,k),this.bindFramebufferDepthStencilAttachment(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,F)),C=!0,f&&c.blitFramebuffer(0,0,k.width,k.height,0,0,F.width,F.height,c.DEPTH_BUFFER_BIT,c.NEAREST),c.bindFramebuffer(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,null),h=!0),this.currentRenderPassDescriptor.depthStencilStore||(C||(c.bindFramebuffer(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,k),C=!0),f&&c.invalidateFramebuffer(c.READ_FRAMEBUFFER,[c.DEPTH_STENCIL_ATTACHMENT])),C&&c.bindFramebuffer(f?Fn.READ_FRAMEBUFFER:Fn.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}h||c.bindFramebuffer(f?Fn.DRAW_FRAMEBUFFER:Fn.FRAMEBUFFER,null)},o.prototype.setScissorRectEnabled=function(c){if(this.currentScissorEnabled!==c){var f=this.gl;c?f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST),this.currentScissorEnabled=c}},o.prototype.applyStencil=function(){(0,Mp.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Fn.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(Fn.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},o.prototype.getFallbackTexture=function(c){var f=c.gl_target,h=c.formatKind;if(f===Fn.TEXTURE_2D)return h===Ul.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===Fn.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===Fn.TEXTURE_3D)return this.fallbackTexture3D;if(f===Fn.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},o.prototype.submitBlitRenderPass=function(c,f){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:yu.VERTEX|yu.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Hf.VERTEX,attributes:[{format:yr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Cl.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[yr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:b0(zv)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:c.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:c}));var h=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var d=this.createRenderPass({colorAttachment:[c],colorResolveTo:[f],colorClearColor:[$x]}),g=this.getCanvas(),S=g.width,C=g.height;d.setPipeline(this.blitRenderPipeline),d.setBindings(this.blitBindings),d.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),d.setViewport(0,0,S,C),this.gl.disable(this.gl.BLEND),d.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=h,this.inBlitRenderPass=!1},o}(),F3=function(){function o(c){this.pluginOptions=c}return o.prototype.createSwapChain=function(c){return(0,Za.mG)(this,void 0,void 0,function(){var f,h,d,g,S,C,k,F,$,X,me,je,_t;return(0,Za.Jh)(this,function(Ot){return f=this.pluginOptions,h=f.targets,d=f.xrCompatible,g=f.antialias,S=g===void 0?!1:g,C=f.preserveDrawingBuffer,k=C===void 0?!1:C,F=f.premultipliedAlpha,$=F===void 0?!0:F,X=f.shaderDebug,me=f.trackResources,je={antialias:S,preserveDrawingBuffer:k,stencil:!0,premultipliedAlpha:$,xrCompatible:d},this.handleContextEvents(c),h.includes("webgl2")&&(_t=c.getContext("webgl2",je)||c.getContext("experimental-webgl2",je)),!_t&&h.includes("webgl1")&&(_t=c.getContext("webgl",je)||c.getContext("experimental-webgl",je)),[2,new B3(_t,{shaderDebug:X,trackResources:me})]})})},o.prototype.handleContextEvents=function(c){var f=this.pluginOptions,h=f.onContextLost,d=f.onContextRestored,g=f.onContextCreationError;g&&c.addEventListener("webglcontextcreationerror",g,!1),h&&c.addEventListener("webglcontextlost",h,!1),d&&c.addEventListener("webglcontextrestored",d,!1)},o}();let Tc;const lw=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&lw.decode();let Pp=null;function Qm(){return(Pp===null||Pp.byteLength===0)&&(Pp=new Uint8Array(Tc.memory.buffer)),Pp}function Y1(o,c){return o=o>>>0,lw.decode(Qm().subarray(o,o+c))}const x0=new Array(128).fill(void 0);x0.push(void 0,null,!0,!1);let q1=x0.length;function k5(o){q1===x0.length&&x0.push(x0.length+1);const c=q1;return q1=x0[c],x0[c]=o,c}function i2(o){return x0[o]}function L5(o){o<132||(x0[o]=q1,q1=o)}function D5(o){const c=i2(o);return L5(o),c}let K1=0;const a2=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},z3=typeof a2.encodeInto=="function"?function(o,c){return a2.encodeInto(o,c)}:function(o,c){const f=a2.encode(o);return c.set(f),{read:o.length,written:f.length}};function o2(o,c,f){if(f===void 0){const C=a2.encode(o),k=c(C.length,1)>>>0;return Qm().subarray(k,k+C.length).set(C),K1=C.length,k}let h=o.length,d=c(h,1)>>>0;const g=Qm();let S=0;for(;S<h;S++){const C=o.charCodeAt(S);if(C>127)break;g[d+S]=C}if(S!==h){S!==0&&(o=o.slice(S)),d=f(d,h,h=S+o.length*3,1)>>>0;const C=Qm().subarray(d+S,d+h),k=z3(o,C);S+=k.written}return K1=S,d}let m_=null;function Q1(){return(m_===null||m_.byteLength===0)&&(m_=new Int32Array(Tc.memory.buffer)),m_}function U3(o,c,f){let h,d;try{const C=Tc.__wbindgen_add_to_stack_pointer(-16),k=o2(o,Tc.__wbindgen_malloc,Tc.__wbindgen_realloc),F=K1,$=o2(c,Tc.__wbindgen_malloc,Tc.__wbindgen_realloc),X=K1;Tc.glsl_compile(C,k,F,$,X,f);var g=Q1()[C/4+0],S=Q1()[C/4+1];return h=g,d=S,Y1(g,S)}finally{Tc.__wbindgen_add_to_stack_pointer(16),Tc.__wbindgen_free(h,d,1)}}class g_{static __wrap(c){c=c>>>0;const f=Object.create(g_.prototype);return f.__wbg_ptr=c,f}__destroy_into_raw(){const c=this.__wbg_ptr;return this.__wbg_ptr=0,c}free(){const c=this.__destroy_into_raw();Tc.__wbg_wgslcomposer_free(c)}constructor(){const c=Tc.wgslcomposer_new();return g_.__wrap(c)}wgsl_compile(c){let f,h;try{const S=Tc.__wbindgen_add_to_stack_pointer(-16),C=o2(c,Tc.__wbindgen_malloc,Tc.__wbindgen_realloc),k=K1;Tc.wgslcomposer_wgsl_compile(S,this.__wbg_ptr,C,k);var d=Q1()[S/4+0],g=Q1()[S/4+1];return f=d,h=g,Y1(d,g)}finally{Tc.__wbindgen_add_to_stack_pointer(16),Tc.__wbindgen_free(f,h,1)}}}function j3(o,c){return m5(this,null,function*(){if(typeof Response=="function"&&o instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(o,c)}catch(h){if(o.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",h);else throw h}const f=yield o.arrayBuffer();return yield WebAssembly.instantiate(f,c)}else{const f=yield WebAssembly.instantiate(o,c);return f instanceof WebAssembly.Instance?{instance:f,module:o}:f}})}function Z3(){const o={};return o.wbg={},o.wbg.__wbindgen_string_new=function(c,f){const h=Y1(c,f);return k5(h)},o.wbg.__wbindgen_object_drop_ref=function(c){D5(c)},o.wbg.__wbg_log_1d3ae0273d8f4f8a=function(c){console.log(i2(c))},o.wbg.__wbg_log_576ca876af0d4a77=function(c,f){console.log(i2(c),i2(f))},o.wbg.__wbindgen_throw=function(c,f){throw new Error(Y1(c,f))},o}function V3(o,c){return Tc=o.exports,cw.__wbindgen_wasm_module=c,m_=null,Pp=null,Tc}function cw(o){return m5(this,null,function*(){if(Tc!==void 0)return Tc;const c=Z3();(typeof o=="string"||typeof Request=="function"&&o instanceof Request||typeof URL=="function"&&o instanceof URL)&&(o=fetch(o));const{instance:f,module:h}=yield j3(yield o,c);return V3(f,h)})}var rf;(function(o){o[o.COPY_SRC=1]="COPY_SRC",o[o.COPY_DST=2]="COPY_DST",o[o.TEXTURE_BINDING=4]="TEXTURE_BINDING",o[o.STORAGE_BINDING=8]="STORAGE_BINDING",o[o.STORAGE=8]="STORAGE",o[o.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(rf||(rf={}));var J1;(function(o){o[o.READ=1]="READ",o[o.WRITE=2]="WRITE"})(J1||(J1={}));function H3(o){var c=0;return o&uh.SAMPLED&&(c|=rf.TEXTURE_BINDING|rf.COPY_DST|rf.COPY_SRC),o&uh.STORAGE&&(c|=rf.TEXTURE_BINDING|rf.STORAGE_BINDING|rf.COPY_SRC|rf.COPY_DST),o&uh.RENDER_TARGET&&(c|=rf.RENDER_ATTACHMENT|rf.TEXTURE_BINDING|rf.COPY_SRC|rf.COPY_DST),c}function eb(o){if(o===yr.U8_R_NORM)return"r8unorm";if(o===yr.S8_R_NORM)return"r8snorm";if(o===yr.U8_RG_NORM)return"rg8unorm";if(o===yr.S8_RG_NORM)return"rg8snorm";if(o===yr.U32_R)return"r32uint";if(o===yr.S32_R)return"r32sint";if(o===yr.F32_R)return"r32float";if(o===yr.U16_RG)return"rg16uint";if(o===yr.S16_RG)return"rg16sint";if(o===yr.F16_RG)return"rg16float";if(o===yr.U8_RGBA_RT)return"bgra8unorm";if(o===yr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(o===yr.U8_RGBA_NORM)return"rgba8unorm";if(o===yr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(o===yr.S8_RGBA_NORM)return"rgba8snorm";if(o===yr.U32_RG)return"rg32uint";if(o===yr.S32_RG)return"rg32sint";if(o===yr.F32_RG)return"rg32float";if(o===yr.U16_RGBA)return"rgba16uint";if(o===yr.S16_RGBA)return"rgba16sint";if(o===yr.F16_RGBA)return"rgba16float";if(o===yr.F32_RGBA)return"rgba32float";if(o===yr.U32_RGBA)return"rgba32uint";if(o===yr.S32_RGBA)return"rgba32sint";if(o===yr.D24)return"depth24plus";if(o===yr.D24_S8)return"depth24plus-stencil8";if(o===yr.D32F)return"depth32float";if(o===yr.D32F_S8)return"depth32float-stencil8";if(o===yr.BC1)return"bc1-rgba-unorm";if(o===yr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(o===yr.BC2)return"bc2-rgba-unorm";if(o===yr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(o===yr.BC3)return"bc3-rgba-unorm";if(o===yr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(o===yr.BC4_SNORM)return"bc4-r-snorm";if(o===yr.BC4_UNORM)return"bc4-r-unorm";if(o===yr.BC5_SNORM)return"bc5-rg-snorm";if(o===yr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function W3(o){if(o===ys.TEXTURE_2D)return"2d";if(o===ys.TEXTURE_CUBE_MAP)return"2d";if(o===ys.TEXTURE_2D_ARRAY)return"2d";if(o===ys.TEXTURE_3D)return"3d";throw new Error("whoops")}function fw(o){if(o===ys.TEXTURE_2D)return"2d";if(o===ys.TEXTURE_CUBE_MAP)return"cube";if(o===ys.TEXTURE_2D_ARRAY)return"2d-array";if(o===ys.TEXTURE_3D)return"3d";throw new Error("whoops")}function $3(o){var c=0;return o&yu.INDEX&&(c|=GPUBufferUsage.INDEX),o&yu.VERTEX&&(c|=GPUBufferUsage.VERTEX),o&yu.UNIFORM&&(c|=GPUBufferUsage.UNIFORM),o&yu.STORAGE&&(c|=GPUBufferUsage.STORAGE),o&yu.COPY_SRC&&(c|=GPUBufferUsage.COPY_SRC),o&yu.INDIRECT&&(c|=GPUBufferUsage.INDIRECT),c|=GPUBufferUsage.COPY_DST,c}function y_(o){if(o===oh.CLAMP_TO_EDGE)return"clamp-to-edge";if(o===oh.REPEAT)return"repeat";if(o===oh.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function hw(o){if(o===ll.BILINEAR)return"linear";if(o===ll.POINT)return"nearest";throw new Error("whoops")}function E0(o){if(o===pu.LINEAR)return"linear";if(o===pu.NEAREST)return"nearest";if(o===pu.NO_MIP)return"nearest";throw new Error("whoops")}function Jg(o){var c=o;return c.gpuBuffer}function G3(o){var c=o;return c.gpuSampler}function dw(o){var c=o;return c.querySet}function X3(o){if(o===i_.OcclusionConservative)return"occlusion";throw new Error("whoops")}function Pi(o){switch(o){case Cl.TRIANGLES:return"triangle-list";case Cl.POINTS:return"point-list";case Cl.TRIANGLE_STRIP:return"triangle-strip";case Cl.LINES:return"line-list";case Cl.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function Y3(o){if(o===Ih.NONE)return"none";if(o===Ih.FRONT)return"front";if(o===Ih.BACK)return"back";throw new Error("whoops")}function N5(o){if(o===K0.CCW)return"ccw";if(o===K0.CW)return"cw";throw new Error("whoops")}function s2(o,c){return{topology:Pi(o),cullMode:Y3(c.cullMode),frontFace:N5(c.frontFace)}}function u2(o){if(o===Ao.ZERO)return"zero";if(o===Ao.ONE)return"one";if(o===Ao.SRC)return"src";if(o===Ao.ONE_MINUS_SRC)return"one-minus-src";if(o===Ao.DST)return"dst";if(o===Ao.ONE_MINUS_DST)return"one-minus-dst";if(o===Ao.SRC_ALPHA)return"src-alpha";if(o===Ao.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(o===Ao.DST_ALPHA)return"dst-alpha";if(o===Ao.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(o===Ao.CONST)return"constant";if(o===Ao.ONE_MINUS_CONSTANT)return"one-minus-constant";if(o===Ao.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function pw(o){if(o===wc.ADD)return"add";if(o===wc.SUBSTRACT)return"subtract";if(o===wc.REVERSE_SUBSTRACT)return"reverse-subtract";if(o===wc.MIN)return"min";if(o===wc.MAX)return"max";throw new Error("whoops")}function l2(o){return{operation:pw(o.blendMode),srcFactor:u2(o.blendSrcFactor),dstFactor:u2(o.blendDstFactor)}}function ey(o){return o.blendMode===wc.ADD&&o.blendSrcFactor===Ao.ONE&&o.blendDstFactor===Ao.ZERO}function Zl(o){if(!(ey(o.rgbBlendState)&&ey(o.alphaBlendState)))return{color:l2(o.rgbBlendState),alpha:l2(o.alphaBlendState)}}function tb(o,c){return{format:eb(c),blend:Zl(o),writeMask:o.channelWriteMask}}function vw(o,c){return c.attachmentsState.map(function(f,h){return tb(f,o[h])})}function c2(o){if(o===ts.NEVER)return"never";if(o===ts.LESS)return"less";if(o===ts.EQUAL)return"equal";if(o===ts.LEQUAL)return"less-equal";if(o===ts.GREATER)return"greater";if(o===ts.NOTEQUAL)return"not-equal";if(o===ts.GEQUAL)return"greater-equal";if(o===ts.ALWAYS)return"always";throw new Error("whoops")}function __(o){if(o===zl.KEEP)return"keep";if(o===zl.REPLACE)return"replace";if(o===zl.ZERO)return"zero";if(o===zl.DECREMENT_CLAMP)return"decrement-clamp";if(o===zl.DECREMENT_WRAP)return"decrement-wrap";if(o===zl.INCREMENT_CLAMP)return"increment-clamp";if(o===zl.INCREMENT_WRAP)return"increment-wrap";if(o===zl.INVERT)return"invert";throw new Error("whoops")}function f2(o,c){if(!(0,Mp.Z)(o))return{format:eb(o),depthWriteEnabled:!!c.depthWrite,depthCompare:c2(c.depthCompare),depthBias:c.polygonOffset?1:0,depthBiasSlopeScale:c.polygonOffset?1:0,stencilFront:{compare:c2(c.stencilFront.compare),passOp:__(c.stencilFront.passOp),failOp:__(c.stencilFront.failOp),depthFailOp:__(c.stencilFront.depthFailOp)},stencilBack:{compare:c2(c.stencilBack.compare),passOp:__(c.stencilBack.passOp),failOp:__(c.stencilBack.failOp),depthFailOp:__(c.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function h2(o){if(o!==null){if(o===yr.U16_R)return"uint16";if(o===yr.U32_R)return"uint32";throw new Error("whoops")}}function B5(o){if(o===Hf.VERTEX)return"vertex";if(o===Hf.INSTANCE)return"instance";throw new Error("whoops")}function F5(o){if(o===yr.U8_R)return"uint8x2";if(o===yr.U8_RG)return"uint8x2";if(o===yr.U8_RGB)return"uint8x4";if(o===yr.U8_RGBA)return"uint8x4";if(o===yr.U8_RG_NORM)return"unorm8x2";if(o===yr.U8_RGBA_NORM)return"unorm8x4";if(o===yr.S8_RGB_NORM)return"snorm8x4";if(o===yr.S8_RGBA_NORM)return"snorm8x4";if(o===yr.U16_RG_NORM)return"unorm16x2";if(o===yr.U16_RGBA_NORM)return"unorm16x4";if(o===yr.S16_RG_NORM)return"snorm16x2";if(o===yr.S16_RGBA_NORM)return"snorm16x4";if(o===yr.S16_RG)return"uint16x2";if(o===yr.F16_RG)return"float16x2";if(o===yr.F16_RGBA)return"float16x4";if(o===yr.F32_R)return"float32";if(o===yr.F32_RG)return"float32x2";if(o===yr.F32_RGB)return"float32x3";if(o===yr.F32_RGBA)return"float32x4";throw"whoops"}function mw(o){var c=sv(o);switch(c){case Mi.BC1:case Mi.BC2:case Mi.BC3:case Mi.BC4_SNORM:case Mi.BC4_UNORM:case Mi.BC5_SNORM:case Mi.BC5_UNORM:return!0;default:return!1}}function ty(o){var c=sv(o);switch(c){case Mi.BC1:case Mi.BC2:case Mi.BC3:case Mi.BC4_SNORM:case Mi.BC4_UNORM:case Mi.BC5_SNORM:case Mi.BC5_UNORM:return 4;default:return 1}}function d2(o,c,f,h){switch(f===void 0&&(f=!1),o){case yr.S8_R:case yr.S8_R_NORM:case yr.S8_RG_NORM:case yr.S8_RGB_NORM:case yr.S8_RGBA_NORM:{var d=c instanceof ArrayBuffer?new Int8Array(c):new Int8Array(c);return h&&d.set(new Int8Array(h)),d}case yr.U8_R:case yr.U8_R_NORM:case yr.U8_RG:case yr.U8_RG_NORM:case yr.U8_RGB:case yr.U8_RGB_NORM:case yr.U8_RGB_SRGB:case yr.U8_RGBA:case yr.U8_RGBA_NORM:case yr.U8_RGBA_SRGB:{var g=c instanceof ArrayBuffer?new Uint8Array(c):new Uint8Array(c);return h&&g.set(new Uint8Array(h)),g}case yr.S16_R:case yr.S16_RG:case yr.S16_RG_NORM:case yr.S16_RGB_NORM:case yr.S16_RGBA:case yr.S16_RGBA_NORM:{var S=c instanceof ArrayBuffer?new Int16Array(c):new Int16Array(f?c/2:c);return h&&S.set(new Int16Array(h)),S}case yr.U16_R:case yr.U16_RGB:case yr.U16_RGBA_5551:case yr.U16_RGBA_NORM:case yr.U16_RG_NORM:case yr.U16_R_NORM:{var C=c instanceof ArrayBuffer?new Uint16Array(c):new Uint16Array(f?c/2:c);return h&&C.set(new Uint16Array(h)),C}case yr.S32_R:{var k=c instanceof ArrayBuffer?new Int32Array(c):new Int32Array(f?c/4:c);return h&&k.set(new Int32Array(h)),k}case yr.U32_R:case yr.U32_RG:{var F=c instanceof ArrayBuffer?new Uint32Array(c):new Uint32Array(f?c/4:c);return h&&F.set(new Uint32Array(h)),F}case yr.F32_R:case yr.F32_RG:case yr.F32_RGB:case yr.F32_RGBA:{var $=c instanceof ArrayBuffer?new Float32Array(c):new Float32Array(f?c/4:c);return h&&$.set(new Float32Array(h)),$}}var X=c instanceof ArrayBuffer?new Uint8Array(c):new Uint8Array(c);return h&&X.set(new Uint8Array(h)),X}function q3(o){var c=(o&32768)>>15,f=(o&31744)>>10,h=o&1023;return f===0?(c?-1:1)*Math.pow(2,-14)*(h/Math.pow(2,10)):f==31?h?NaN:(c?-1:1)*(1/0):(c?-1:1)*Math.pow(2,f-15)*(1+h/Math.pow(2,10))}function p2(o){switch(o){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var lv=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=o.call(this)||this;return g.id=h,g.device=d,g}return c.prototype.destroy=function(){},c}(Vx),Jm=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S,C,k=o.call(this,{id:h,device:d})||this;k.type=Us.Bindings;var F=g.pipeline;Yo(!!F);var $=g.uniformBufferBindings,X=g.storageBufferBindings,me=g.samplerBindings,je=g.storageTextureBindings;k.numUniformBuffers=($==null?void 0:$.length)||0;var _t=[[],[],[],[]],Ot=0;if($&&$.length)for(var nn=0;nn<$.length;nn++){var Un=g.uniformBufferBindings[nn],zn=Un.binding,ur=Un.size,Pr=Un.offset,si=Un.buffer,kr={buffer:Jg(si),offset:Pr!=null?Pr:0,size:ur};_t[0].push({binding:zn!=null?zn:Ot++,resource:kr})}if(me&&me.length){Ot=0;for(var nn=0;nn<me.length;nn++){var hr=(0,Za.pi)((0,Za.pi)({},me[nn]),Yx),zn=g.samplerBindings[nn],Hr=zn.texture!==null?zn.texture:k.device.getFallbackTexture(hr);hr.dimension=Hr.dimension,hr.formatKind=Bv(Hr.format);var ha=Hr.gpuTextureView;if(_t[1].push({binding:(S=zn.textureBinding)!==null&&S!==void 0?S:Ot++,resource:ha}),zn.samplerBinding!==-1){var Xa=zn.sampler!==null?zn.sampler:k.device.getFallbackSampler(hr),pa=G3(Xa);_t[1].push({binding:(C=zn.samplerBinding)!==null&&C!==void 0?C:Ot++,resource:pa})}}}if(X&&X.length){Ot=0;for(var nn=0;nn<X.length;nn++){var bo=g.storageBufferBindings[nn],zn=bo.binding,ur=bo.size,Pr=bo.offset,si=bo.buffer,kr={buffer:Jg(si),offset:Pr!=null?Pr:0,size:ur};_t[2].push({binding:zn!=null?zn:Ot++,resource:kr})}}if(je&&je.length){Ot=0;for(var nn=0;nn<je.length;nn++){var Do=g.storageTextureBindings[nn],zn=Do.binding,Hr=Do.texture,ha=Hr.gpuTextureView;_t[3].push({binding:zn!=null?zn:Ot++,resource:ha})}}var so=_t.findLastIndex(function(af){return!!af.length});return k.gpuBindGroup=_t.map(function(af,Uu){return Uu<=so&&k.device.device.createBindGroup({layout:F.getBindGroupLayout(Uu),entries:af})}),k}return c}(lv),v2=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.Buffer;var C=g.usage,k=g.viewOrSize,F=!!(C&yu.MAP_READ);S.usage=$3(C),F&&(S.usage=yu.MAP_READ|yu.COPY_DST);var $=!(0,Xm.Z)(k);if(S.view=(0,Xm.Z)(k)?null:k,S.size=(0,Xm.Z)(k)?u_(k,4):u_(k.byteLength,4),(0,Xm.Z)(k))S.gpuBuffer=S.device.device.createBuffer({usage:S.usage,size:S.size,mappedAtCreation:F?$:!1});else{S.gpuBuffer=S.device.device.createBuffer({usage:S.usage,size:S.size,mappedAtCreation:!0});var X=k&&k.constructor||Float32Array;new X(S.gpuBuffer.getMappedRange()).set(k),S.gpuBuffer.unmap()}return S}return c.prototype.setSubData=function(f,h,d,g){d===void 0&&(d=0),g===void 0&&(g=0);var S=this.gpuBuffer;g=g||h.byteLength,g=Math.min(g,this.size-f);var C=h.byteOffset+d,k=C+g,F=g+3&-4;if(F!==g){var $=new Uint8Array(h.buffer.slice(C,k));h=new Uint8Array(F),h.set($),d=0,C=0,k=F,g=F}for(var X=1024*1024*15,me=0;k-(C+me)>X;)this.device.device.queue.writeBuffer(S,f+me,h.buffer,C+me,X),me+=X;this.device.device.queue.writeBuffer(S,f+me,h.buffer,C+me,g-me)},c.prototype.destroy=function(){o.prototype.destroy.call(this),this.gpuBuffer.destroy()},c}(lv),gw=function(){function o(){this.gpuComputePassEncoder=null}return o.prototype.dispatchWorkgroups=function(c,f,h){this.gpuComputePassEncoder.dispatchWorkgroups(c,f,h)},o.prototype.dispatchWorkgroupsIndirect=function(c,f){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(c.gpuBuffer,f)},o.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},o.prototype.beginComputePass=function(c){Yo(this.gpuComputePassEncoder===null),this.frameCommandEncoder=c,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},o.prototype.setPipeline=function(c){var f=c,h=Ym(f.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(h)},o.prototype.setBindings=function(c){var f=this,h=c;h.gpuBindGroup.forEach(function(d,g){d&&f.gpuComputePassEncoder.setBindGroup(g,h.gpuBindGroup[g])})},o.prototype.pushDebugGroup=function(c){this.gpuComputePassEncoder.pushDebugGroup(c)},o.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},o.prototype.insertDebugMarker=function(c){this.gpuComputePassEncoder.insertDebugMarker(c)},o}(),m2=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.ComputePipeline,S.gpuComputePipeline=null,S.descriptor=g;var C=g.program,k=C.computeStage;if(k===null)return S;var F={layout:"auto",compute:(0,Za.pi)({},k)};return S.gpuComputePipeline=S.device.device.createComputePipeline(F),S.name!==void 0&&(S.gpuComputePipeline.label=S.name),S}return c.prototype.getBindGroupLayout=function(f){return this.gpuComputePipeline.getBindGroupLayout(f)},c}(lv),ny=function(o){(0,Za.ZT)(c,o);function c(f){var h,d,g,S,C=f.id,k=f.device,F=f.descriptor,$=o.call(this,{id:C,device:k})||this;$.type=Us.InputLayout;var X=[];try{for(var me=(0,Za.XA)(F.vertexBufferDescriptors),je=me.next();!je.done;je=me.next()){var _t=je.value,Ot=_t.arrayStride,nn=_t.stepMode,Un=_t.attributes;X.push({arrayStride:Ot,stepMode:B5(nn),attributes:[]});try{for(var zn=(g=void 0,(0,Za.XA)(Un)),ur=zn.next();!ur.done;ur=zn.next()){var Pr=ur.value,si=Pr.shaderLocation,kr=Pr.format,hr=Pr.offset;X[X.length-1].attributes.push({shaderLocation:si,format:F5(kr),offset:hr})}}catch(Hr){g={error:Hr}}finally{try{ur&&!ur.done&&(S=zn.return)&&S.call(zn)}finally{if(g)throw g.error}}}}catch(Hr){h={error:Hr}}finally{try{je&&!je.done&&(d=me.return)&&d.call(me)}finally{if(h)throw h.error}}return $.indexFormat=h2(F.indexBufferFormat),$.buffers=X,$}return c}(lv),nb=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;return S.type=Us.Program,S.vertexStage=null,S.fragmentStage=null,S.computeStage=null,S.descriptor=g,g.vertex&&(S.vertexStage=S.createShaderStage(g.vertex,"vertex")),g.fragment&&(S.fragmentStage=S.createShaderStage(g.fragment,"fragment")),g.compute&&(S.computeStage=S.createShaderStage(g.compute,"compute")),S}return c.prototype.setUniformsLegacy=function(f){},c.prototype.createShaderStage=function(f,h){var d,g,S=f.glsl,C=f.wgsl,k=f.entryPoint,F=f.postprocess,$=!1,X=C;if(!X)try{X=this.device.glsl_compile(S,h,$)}catch(Un){throw console.error(Un,S),new Error("whoops")}var me=function(Un){if(!X.includes(Un))return"continue";X=X.replace("var T_".concat(Un,": texture_2d<f32>;"),"var T_".concat(Un,": texture_depth_2d;")),X=X.replace(new RegExp("textureSample\\(T_".concat(Un,"(.*)\\);$"),"gm"),function(zn,ur){return"vec4<f32>(textureSample(T_".concat(Un).concat(ur,"), 0.0, 0.0, 0.0);")})};try{for(var je=(0,Za.XA)(["u_TextureFramebufferDepth"]),_t=je.next();!_t.done;_t=je.next()){var Ot=_t.value;me(Ot)}}catch(Un){d={error:Un}}finally{try{_t&&!_t.done&&(g=je.return)&&g.call(je)}finally{if(d)throw d.error}}F&&(X=F(X));var nn=this.device.device.createShaderModule({code:X});return{module:nn,entryPoint:k||"main"}},c}(lv),cl=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;S.type=Us.QueryPool;var C=g.elemCount,k=g.type;return S.querySet=S.device.device.createQuerySet({type:X3(k),count:C}),S.resolveBuffer=S.device.device.createBuffer({size:C*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),S.cpuBuffer=S.device.device.createBuffer({size:C*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),S.results=null,S}return c.prototype.queryResultOcclusion=function(f){return this.results===null?null:this.results[f]!==BigInt(0)},c.prototype.destroy=function(){o.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},c}(lv),z5=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=o.call(this,{id:h,device:d})||this;return g.type=Us.Readback,g}return c.prototype.readTexture=function(f,h,d,g,S,C,k,F){return k===void 0&&(k=0),(0,Za.mG)(this,void 0,void 0,function(){var $,X,me,je,_t,Ot,nn,Un;return(0,Za.Jh)(this,function(zn){return $=f,X=0,me=p2($.gpuTextureformat),je=Math.ceil(g/me.width)*me.length,_t=Math.ceil(je/256)*256,Ot=_t*S,nn=this.device.createBuffer({usage:yu.STORAGE|yu.MAP_READ|yu.COPY_DST,hint:sh.STATIC,viewOrSize:Ot}),Un=this.device.device.createCommandEncoder(),Un.copyTextureToBuffer({texture:$.gpuTexture,mipLevel:0,origin:{x:h,y:d,z:Math.max(X,0)}},{buffer:nn.gpuBuffer,offset:0,bytesPerRow:_t},{width:g,height:S,depthOrArrayLayers:1}),this.device.device.queue.submit([Un.finish()]),[2,this.readBuffer(nn,0,C.byteLength===Ot?C:null,k,Ot,$.format,!0,!1,je,_t,S)]})})},c.prototype.readTextureSync=function(f,h,d,g,S,C,k,F){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},c.prototype.readBuffer=function(f,h,d,g,S,C,k,F,$,X,me){var je=this;h===void 0&&(h=0),d===void 0&&(d=null),S===void 0&&(S=0),C===void 0&&(C=yr.U8_RGB),k===void 0&&(k=!1),$===void 0&&($=0),X===void 0&&(X=0),me===void 0&&(me=0);var _t=f,Ot=S||_t.size,nn=d||_t.view,Un=nn&&nn.constructor&&nn.constructor.BYTES_PER_ELEMENT||BS(C),zn=_t;if(!(_t.usage&yu.MAP_READ&&_t.usage&yu.COPY_DST)){var ur=this.device.device.createCommandEncoder();zn=this.device.createBuffer({usage:yu.STORAGE|yu.MAP_READ|yu.COPY_DST,hint:sh.STATIC,viewOrSize:Ot}),ur.copyBufferToBuffer(_t.gpuBuffer,h,zn.gpuBuffer,0,Ot),this.device.device.queue.submit([ur.finish()])}return new Promise(function(Pr,si){zn.gpuBuffer.mapAsync(J1.READ,h,Ot).then(function(){var kr=zn.gpuBuffer.getMappedRange(h,Ot),hr=nn;if(k)hr===null?hr=d2(C,Ot,!0,kr):hr=d2(C,hr.buffer,void 0,kr);else if(hr===null)switch(Un){case 1:hr=new Uint8Array(Ot),hr.set(new Uint8Array(kr));break;case 2:hr=je.getHalfFloatAsFloatRGBAArrayBuffer(Ot/2,kr);break;case 4:hr=new Float32Array(Ot/4),hr.set(new Float32Array(kr));break}else switch(Un){case 1:hr=new Uint8Array(hr.buffer),hr.set(new Uint8Array(kr));break;case 2:hr=je.getHalfFloatAsFloatRGBAArrayBuffer(Ot/2,kr,nn);break;case 4:var Hr=nn&&nn.constructor||Float32Array;hr=new Hr(hr.buffer),hr.set(new Hr(kr));break}if($!==X){Un===1&&!k&&($*=2,X*=2);for(var ha=new Uint8Array(hr.buffer),Xa=$,pa=0,bo=1;bo<me;++bo){pa=bo*X;for(var Do=0;Do<$;++Do)ha[Xa++]=ha[pa++]}Un!==0&&!k?hr=new Float32Array(ha.buffer,0,Xa/4):hr=new Uint8Array(ha.buffer,0,Xa)}zn.gpuBuffer.unmap(),Pr(hr)},function(kr){return si(kr)})})},c.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(f,h,d){d||(d=new Float32Array(f));for(var g=new Uint16Array(h);f--;)d[f]=q3(g[f]);return d},c}(lv),yw=function(){function o(c){this.device=c,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return o.prototype.getEncoder=function(){var c;return((c=this.renderBundle)===null||c===void 0?void 0:c.renderBundleEncoder)||this.gpuRenderPassEncoder},o.prototype.getTextureView=function(c,f){return Yo(f<c.mipLevelCount),c.mipLevelCount===1?c.gpuTextureView:c.gpuTexture.createView({baseMipLevel:f,mipLevelCount:1})},o.prototype.setRenderPassDescriptor=function(c){var f,h,d,g,S,C;this.descriptor=c,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var k=c.colorAttachment.length;this.gfxColorAttachment.length=k,this.gfxColorResolveTo.length=k;for(var F=0;F<c.colorAttachment.length;F++){var $=c.colorAttachment[F],X=c.colorResolveTo[F];if($===null&&X!==null&&($=X,X=null),this.gfxColorAttachment[F]=$,this.gfxColorResolveTo[F]=X,this.gfxColorAttachmentLevel[F]=((f=c.colorAttachmentLevel)===null||f===void 0?void 0:f[F])||0,this.gfxColorResolveToLevel[F]=((h=c.colorResolveToLevel)===null||h===void 0?void 0:h[F])||0,$!==null){this.gpuColorAttachments[F]===void 0&&(this.gpuColorAttachments[F]={});var me=this.gpuColorAttachments[F];me.view=this.getTextureView($,((d=this.gfxColorAttachmentLevel)===null||d===void 0?void 0:d[F])||0);var je=(S=(g=c.colorClearColor)===null||g===void 0?void 0:g[F])!==null&&S!==void 0?S:"load";je==="load"?me.loadOp="load":(me.loadOp="clear",me.clearValue=je),me.storeOp=!((C=c.colorStore)===null||C===void 0)&&C[F]?"store":"discard",me.resolveTarget=void 0,X!==null&&($.sampleCount>1?me.resolveTarget=this.getTextureView(X,this.gfxColorResolveToLevel[F]):me.storeOp="store")}else{this.gpuColorAttachments.length=F,this.gfxColorAttachment.length=F,this.gfxColorResolveTo.length=F;break}}if(this.gfxDepthStencilAttachment=c.depthStencilAttachment,this.gfxDepthStencilResolveTo=c.depthStencilResolveTo,c.depthStencilAttachment){var _t=c.depthStencilAttachment,me=this.gpuDepthStencilAttachment;me.view=_t.gpuTextureView;var Ot=!!(Xg(_t.format)&Ra.Depth);Ot?(c.depthClearValue==="load"?me.depthLoadOp="load":(me.depthLoadOp="clear",me.depthClearValue=c.depthClearValue),c.depthStencilStore||this.gfxDepthStencilResolveTo!==null?me.depthStoreOp="store":me.depthStoreOp="discard"):(me.depthLoadOp=void 0,me.depthStoreOp=void 0);var nn=!!(Xg(_t.format)&Ra.Stencil);nn?(c.stencilClearValue==="load"?me.stencilLoadOp="load":(me.stencilLoadOp="clear",me.stencilClearValue=c.stencilClearValue),c.depthStencilStore||this.gfxDepthStencilResolveTo!==null?me.stencilStoreOp="store":me.stencilStoreOp="discard"):(me.stencilLoadOp=void 0,me.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,Mp.Z)(c.occlusionQueryPool)?void 0:dw(c.occlusionQueryPool)},o.prototype.beginRenderPass=function(c,f){Yo(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(f),this.frameCommandEncoder=c,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},o.prototype.flipY=function(c,f){var h=this.device.swapChainHeight;return h-c-f},o.prototype.setViewport=function(c,f,h,d,g,S){g===void 0&&(g=0),S===void 0&&(S=1),this.gpuRenderPassEncoder.setViewport(c,this.flipY(f,d),h,d,g,S)},o.prototype.setScissorRect=function(c,f,h,d){this.gpuRenderPassEncoder.setScissorRect(c,this.flipY(f,d),h,d)},o.prototype.setPipeline=function(c){var f=c,h=Ym(f.gpuRenderPipeline);this.getEncoder().setPipeline(h)},o.prototype.setVertexInput=function(c,f,h){if(c!==null){var d=this.getEncoder(),g=c;h!==null&&d.setIndexBuffer(Jg(h.buffer),Ym(g.indexFormat),h.offset);for(var S=0;S<f.length;S++){var C=f[S];C!==null&&d.setVertexBuffer(S,Jg(C.buffer),C.offset)}}},o.prototype.setBindings=function(c){var f=c,h=this.getEncoder();f.gpuBindGroup.forEach(function(d,g){d&&h.setBindGroup(g,f.gpuBindGroup[g])})},o.prototype.setStencilReference=function(c){this.gpuRenderPassEncoder.setStencilReference(c)},o.prototype.draw=function(c,f,h,d){this.getEncoder().draw(c,f,h,d)},o.prototype.drawIndexed=function(c,f,h,d,g){this.getEncoder().drawIndexed(c,f,h,d,g)},o.prototype.drawIndirect=function(c,f){this.getEncoder().drawIndirect(Jg(c),f)},o.prototype.drawIndexedIndirect=function(c,f){this.getEncoder().drawIndexedIndirect(Jg(c),f)},o.prototype.beginOcclusionQuery=function(c){this.gpuRenderPassEncoder.beginOcclusionQuery(c)},o.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},o.prototype.pushDebugGroup=function(c){this.gpuRenderPassEncoder.pushDebugGroup(c)},o.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},o.prototype.insertDebugMarker=function(c){this.gpuRenderPassEncoder.insertDebugMarker(c)},o.prototype.beginBundle=function(c){this.renderBundle=c},o.prototype.endBundle=function(){this.renderBundle.finish()},o.prototype.executeBundles=function(c){this.gpuRenderPassEncoder.executeBundles(c.map(function(f){return f.renderBundle}))},o.prototype.finish=function(){var c;(c=this.gpuRenderPassEncoder)===null||c===void 0||c.end(),this.gpuRenderPassEncoder=null;for(var f=0;f<this.gfxColorAttachment.length;f++){var h=this.gfxColorAttachment[f],d=this.gfxColorResolveTo[f];h!==null&&d!==null&&h.sampleCount===1&&this.copyAttachment(d,this.gfxColorAttachmentLevel[f],h,this.gfxColorResolveToLevel[f])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},o.prototype.copyAttachment=function(c,f,h,d){Yo(h.sampleCount===1);var g={texture:h.gpuTexture,mipLevel:d},S={texture:c.gpuTexture,mipLevel:f};Yo(h.width>>>d===c.width>>>f),Yo(h.height>>>d===c.height>>>f),Yo(!!(h.usage&rf.COPY_SRC)),Yo(!!(c.usage&rf.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(g,S,[c.width,c.height,1])},o}(),K3=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=o.call(this,{id:h,device:d})||this;return S.type=Us.RenderPipeline,S.isCreatingAsync=!1,S.gpuRenderPipeline=null,S.descriptor=g,S.device.createRenderPipelineInternal(S,!1),S}return c.prototype.getBindGroupLayout=function(f){return this.gpuRenderPipeline.getBindGroupLayout(f)},c}(lv),ja=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S,C,k=o.call(this,{id:h,device:d})||this;k.type=Us.Sampler;var F=g.lodMinClamp,$=g.mipmapFilter===pu.NO_MIP?g.lodMinClamp:g.lodMaxClamp,X=(S=g.maxAnisotropy)!==null&&S!==void 0?S:1;return X>1&&Yo(g.minFilter===ll.BILINEAR&&g.magFilter===ll.BILINEAR&&g.mipmapFilter===pu.LINEAR),k.gpuSampler=k.device.device.createSampler({addressModeU:y_(g.addressModeU),addressModeV:y_(g.addressModeV),addressModeW:y_((C=g.addressModeW)!==null&&C!==void 0?C:g.addressModeU),lodMinClamp:F,lodMaxClamp:$,minFilter:hw(g.minFilter),magFilter:hw(g.magFilter),mipmapFilter:E0(g.mipmapFilter),compare:g.compareFunction!==void 0?c2(g.compareFunction):void 0,maxAnisotropy:X}),k}return c}(lv),b_=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=f.descriptor,S=f.skipCreate,C=f.sampleCount,k=o.call(this,{id:h,device:d})||this;k.type=Us.Texture,k.flipY=!1;var F=g.format,$=g.dimension,X=g.width,me=g.height,je=g.depthOrArrayLayers,_t=g.mipLevelCount,Ot=g.usage,nn=g.pixelStore;return k.flipY=!!(nn!=null&&nn.unpackFlipY),k.device.createTextureShared({format:F,dimension:$!=null?$:ys.TEXTURE_2D,width:X,height:me,depthOrArrayLayers:je!=null?je:1,mipLevelCount:_t!=null?_t:1,usage:Ot,sampleCount:C!=null?C:1},k,S),k}return c.prototype.textureFromImageBitmapOrCanvas=function(f,h,d){for(var g=h[0].width,S=h[0].height,C={size:{width:g,height:S,depthOrArrayLayers:d},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},k=f.createTexture(C),F=0;F<h.length;F++)f.queue.copyExternalImageToTexture({source:h[F],flipY:this.flipY},{texture:k,origin:[0,0,F]},[g,S]);return[k,g,S]},c.prototype.isImageBitmapOrCanvases=function(f){var h=f[0];return h instanceof ImageBitmap||h instanceof HTMLCanvasElement||h instanceof OffscreenCanvas},c.prototype.isVideo=function(f){var h=f[0];return h instanceof HTMLVideoElement},c.prototype.setImageData=function(f,h){var d,g=this,S=this.device.device,C,k,F;if(this.isImageBitmapOrCanvases(f))d=(0,Za.CR)(this.textureFromImageBitmapOrCanvas(S,f,this.depthOrArrayLayers),3),C=d[0],k=d[1],F=d[2];else if(this.isVideo(f))C=S.importExternalTexture({source:f[0]});else{var $=p2(this.gpuTextureformat),X=Math.ceil(this.width/$.width)*$.length;f.forEach(function(me){S.queue.writeTexture({texture:g.gpuTexture},me,{bytesPerRow:X},{width:g.width,height:g.height})})}this.width=k,this.height=F,C&&(this.gpuTexture=C),this.gpuTextureView=this.gpuTexture.createView({dimension:fw(this.dimension)})},c.prototype.destroy=function(){o.prototype.destroy.call(this),this.gpuTexture.destroy()},c}(lv),U5=function(o){(0,Za.ZT)(c,o);function c(f){var h=f.id,d=f.device,g=o.call(this,{id:h,device:d})||this;return g.type=Us.RenderBundle,g.renderBundleEncoder=g.device.device.createRenderBundleEncoder({colorFormats:[g.device.swapChainFormat]}),g}return c.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},c}(lv),Q3=function(){function o(c,f,h,d,g,S){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=rf.RENDER_ATTACHMENT|rf.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=_0.UPPER_LEFT,this.clipSpaceNearZ=Cf.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=f,this.canvas=h,this.canvasContext=d,this.glsl_compile=g,this.WGSLComposer=S,this.fallbackTexture2D=this.createFallbackTexture(ys.TEXTURE_2D,Ul.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(ys.TEXTURE_2D,Ul.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(ys.TEXTURE_2D_ARRAY,Ul.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(ys.TEXTURE_3D,Ul.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(ys.TEXTURE_CUBE_MAP,Ul.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:oh.REPEAT,addressModeV:oh.REPEAT,minFilter:ll.POINT,magFilter:ll.POINT,mipmapFilter:pu.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:oh.REPEAT,addressModeV:oh.REPEAT,minFilter:ll.POINT,magFilter:ll.POINT,mipmapFilter:pu.NEAREST,compareFunction:ts.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(C){console.error(C.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return o.prototype.destroy=function(){},o.prototype.configureSwapChain=function(c,f){this.swapChainWidth===c&&this.swapChainHeight===f||(this.swapChainWidth=c,this.swapChainHeight=f)},o.prototype.getOnscreenTexture=function(){var c=this.canvasContext.getCurrentTexture(),f=c.createView(),h=new b_({id:0,device:this,descriptor:{format:yr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:ys.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return h.depthOrArrayLayers=1,h.sampleCount=1,h.gpuTexture=c,h.gpuTextureView=f,h.name="Onscreen",this.setResourceName(h,"Onscreen Texture"),h},o.prototype.getDevice=function(){return this},o.prototype.getCanvas=function(){return this.canvas},o.prototype.beginFrame=function(){Yo(this.frameCommandEncoderPool.length===0)},o.prototype.endFrame=function(){Yo(this.frameCommandEncoderPool.every(function(c){return c!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(c){return c.finish()})),this.frameCommandEncoderPool=[]},o.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},o.prototype.createBuffer=function(c){return new v2({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createTexture=function(c){return new b_({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createSampler=function(c){return new ja({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createRenderTarget=function(c){var f=new b_({id:this.getNextUniqueId(),device:this,descriptor:(0,Za.pi)((0,Za.pi)({},c),{dimension:ys.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:uh.RENDER_TARGET}),sampleCount:c.sampleCount});return f.depthOrArrayLayers=1,f.type=Us.RenderTarget,f},o.prototype.createRenderTargetFromTexture=function(c){var f=c,h=f.format,d=f.width,g=f.height,S=f.depthOrArrayLayers,C=f.sampleCount,k=f.mipLevelCount,F=f.gpuTexture,$=f.gpuTextureView,X=f.usage;Yo(!!(X&rf.RENDER_ATTACHMENT));var me=new b_({id:this.getNextUniqueId(),device:this,descriptor:{format:h,width:d,height:g,depthOrArrayLayers:S,dimension:ys.TEXTURE_2D,mipLevelCount:k,usage:X},skipCreate:!0});return me.depthOrArrayLayers=S,me.sampleCount=C,me.gpuTexture=F,me.gpuTextureView=$,me},o.prototype.createProgram=function(c){var f,h;return!((f=c.vertex)===null||f===void 0)&&f.glsl&&(c.vertex.glsl=Lh(this.queryVendorInfo(),"vert",c.vertex.glsl)),!((h=c.fragment)===null||h===void 0)&&h.glsl&&(c.fragment.glsl=Lh(this.queryVendorInfo(),"frag",c.fragment.glsl)),new nb({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createProgramSimple=function(c){return new nb({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createTextureShared=function(c,f,h){var d={width:c.width,height:c.height,depthOrArrayLayers:c.depthOrArrayLayers},g=c.mipLevelCount,S=eb(c.format),C=W3(c.dimension),k=H3(c.usage);if(f.gpuTextureformat=S,f.dimension=c.dimension,f.format=c.format,f.width=c.width,f.height=c.height,f.depthOrArrayLayers=c.depthOrArrayLayers,f.mipLevelCount=g,f.usage=k,f.sampleCount=c.sampleCount,!h){var F=this.device.createTexture({size:d,mipLevelCount:g,format:S,dimension:C,sampleCount:c.sampleCount,usage:k}),$=F.createView();f.gpuTexture=F,f.gpuTextureView=$}},o.prototype.getFallbackSampler=function(c){var f=c.formatKind;return f===Ul.Depth&&c.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},o.prototype.getFallbackTexture=function(c){var f=c.dimension,h=c.formatKind;if(f===ys.TEXTURE_2D)return h===Ul.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===ys.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===ys.TEXTURE_3D)return this.fallbackTexture3D;if(f===ys.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},o.prototype.createFallbackTexture=function(c,f){var h=c===ys.TEXTURE_CUBE_MAP?6:1,d=f===Ul.Float?yr.U8_RGBA_NORM:yr.D24;return this.createTexture({dimension:c,format:d,usage:uh.SAMPLED,width:1,height:1,depthOrArrayLayers:h,mipLevelCount:1})},o.prototype.createBindings=function(c){return new Jm({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createInputLayout=function(c){return new ny({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createComputePipeline=function(c){return new m2({id:this.getNextUniqueId(),device:this,descriptor:c})},o.prototype.createRenderPipeline=function(c){return new K3({id:this.getNextUniqueId(),device:this,descriptor:(0,Za.pi)({},c)})},o.prototype.createQueryPool=function(c,f){return new cl({id:this.getNextUniqueId(),device:this,descriptor:{type:c,elemCount:f}})},o.prototype.createRenderPipelineInternal=function(c,f){var h;if(c.gpuRenderPipeline===null){var d=c.descriptor,g=d.program,S=g.vertexStage,C=g.fragmentStage;if(!(S===null||C===null)){var k=d.megaStateDescriptor||{},F=k.stencilBack,$=k.stencilFront,X=(0,Za._T)(k,["stencilBack","stencilFront"]),me=b0(zv);d.megaStateDescriptor=(0,Za.pi)((0,Za.pi)((0,Za.pi)({},me),{stencilBack:(0,Za.pi)((0,Za.pi)({},me.stencilBack),F),stencilFront:(0,Za.pi)((0,Za.pi)({},me.stencilFront),$)}),X);var je=d.megaStateDescriptor.attachmentsState[0];d.colorAttachmentFormats.forEach(function(Pr,si){d.megaStateDescriptor.attachmentsState[si]||(d.megaStateDescriptor.attachmentsState[si]=c_(void 0,je))});var _t=s2((h=d.topology)!==null&&h!==void 0?h:Cl.TRIANGLES,d.megaStateDescriptor),Ot=vw(d.colorAttachmentFormats,d.megaStateDescriptor),nn=f2(d.depthStencilAttachmentFormat,d.megaStateDescriptor),Un=void 0;d.inputLayout!==null&&(Un=d.inputLayout.buffers);var zn=d.sampleCount,ur={layout:"auto",vertex:(0,Za.pi)((0,Za.pi)({},S),{buffers:Un}),primitive:_t,depthStencil:nn,multisample:{count:zn},fragment:(0,Za.pi)((0,Za.pi)({},C),{targets:Ot})};c.gpuRenderPipeline=this.device.createRenderPipeline(ur)}}},o.prototype.createReadback=function(){return new z5({id:this.getNextUniqueId(),device:this})},o.prototype.createRenderBundle=function(){return new U5({id:this.getNextUniqueId(),device:this})},o.prototype.createRenderPass=function(c){var f=this.renderPassPool.pop();f===void 0&&(f=new yw(this));var h=this.frameCommandEncoderPool.pop();return h===void 0&&(h=this.device.createCommandEncoder()),f.beginRenderPass(h,c),f},o.prototype.createComputePass=function(){var c=this.computePassPool.pop();c===void 0&&(c=new gw);var f=this.frameCommandEncoderPool.pop();return f===void 0&&(f=this.device.createCommandEncoder()),c.beginComputePass(f),c},o.prototype.submitPass=function(c){var f=c;f instanceof yw?(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.renderPassPool.push(f)):f instanceof gw&&(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.computePassPool.push(f))},o.prototype.copySubTexture2D=function(c,f,h,d,g,S,C){var k=this.device.createCommandEncoder(),F=c,$=d,X={texture:$.gpuTexture,origin:[g,S,0],mipLevel:0,aspect:"all"},me={texture:F.gpuTexture,origin:[f,h,0],mipLevel:0,aspect:"all"};Yo(!!($.usage&rf.COPY_SRC)),Yo(!!(F.usage&rf.COPY_DST)),k.copyTextureToTexture(X,me,[$.width,$.height,C||1]),this.device.queue.submit([k.finish()])},o.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},o.prototype.queryTextureFormatSupported=function(c,f,h){if(mw(c)){if(!this.featureTextureCompressionBC)return!1;var d=ty(c);return f%d!==0||h%d!==0?!1:this.featureTextureCompressionBC}switch(c){case yr.U16_RGBA_NORM:return!1;case yr.F32_RGBA:return!1}return!0},o.prototype.queryPlatformAvailable=function(){return!0},o.prototype.queryVendorInfo=function(){return this},o.prototype.queryRenderPass=function(c){var f=c;return f.descriptor},o.prototype.queryRenderTarget=function(c){var f=c;return f},o.prototype.setResourceName=function(c,f){if(c.name=f,c.type===Us.Buffer){var h=c;h.gpuBuffer.label=f}else if(c.type===Us.Texture){var h=c;h.gpuTexture.label=f,h.gpuTextureView.label=f}else if(c.type===Us.RenderTarget){var h=c;h.gpuTexture.label=f,h.gpuTextureView.label=f}else if(c.type===Us.Sampler){var h=c;h.gpuSampler.label=f}else if(c.type===Us.RenderPipeline){var h=c;h.gpuRenderPipeline!==null&&(h.gpuRenderPipeline.label=f)}},o.prototype.setResourceLeakCheck=function(c,f){},o.prototype.checkForLeaks=function(){},o.prototype.programPatched=function(c){},o.prototype.pipelineQueryReady=function(c){var f=c;return f.gpuRenderPipeline!==null},o.prototype.pipelineForceReady=function(c){var f=c;this.createRenderPipelineInternal(f,!1)},o}(),g2=function(){function o(c){this.pluginOptions=c}return o.prototype.createSwapChain=function(c){return(0,Za.mG)(this,void 0,void 0,function(){var f,h,d,g,S,C,k,F;return(0,Za.Jh)(this,function($){switch($.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];f=null,$.label=1;case 1:return $.trys.push([1,3,,4]),h=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:h})];case 2:return f=$.sent(),[3,4];case 3:return d=$.sent(),console.log(d),[3,4];case 4:return f===null?[2,null]:(g=["depth32float-stencil8","texture-compression-bc","float32-filterable"],S=g.filter(function(X){return f.features.has(X)}),[4,f.requestDevice({requiredFeatures:S})]);case 5:if(C=$.sent(),C&&(k=this.pluginOptions.onContextLost,C.lost.then(function(){k&&k()})),C===null)return[2,null];if(F=c.getContext("webgpu"),!F)return[2,null];$.label=6;case 6:return $.trys.push([6,8,,9]),[4,cw(this.pluginOptions.shaderCompilerPath)];case 7:return $.sent(),[3,9];case 8:return $.sent(),[3,9];case 9:return[2,new Q3(f,C,c,F,U3,g_&&new g_)]}})})},o}(),_w=Ve.rU.isPlainObject,x_=Ve.rU.isTypedArray,S0=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"destroyed",!1),(0,He.Z)(this,"uniforms",{}),this.reGl=c;var h=f.vs,d=f.fs,g=f.attributes,S=f.uniforms,C=f.primitive,k=f.count,F=f.elements,$=f.depth,X=f.cull,me=f.instances,je={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:_0.LOWER_LEFT,clipSpaceNearZ:Cf.NEGATIVE_ONE,supportMRT:!1},_t={};this.options=f,S&&(this.uniforms=this.extractUniforms(S),Object.keys(S).forEach(function(ur){_t[ur]=c.prop(ur)}));var Ot={};Object.keys(g).forEach(function(ur){Ot[ur]=g[ur].get()});var nn=(0,Ae.Vb)(Lh(je,"frag",d,null,!1)),Un=(0,Ae.Vb)(Lh(je,"vert",h,null,!1)),zn={attributes:Ot,frag:nn,uniforms:_t,vert:Un,colorMask:c.prop("colorMask"),lineWidth:1,blend:{enable:c.prop("blend.enable"),func:c.prop("blend.func"),equation:c.prop("blend.equation"),color:c.prop("blend.color")},stencil:{enable:c.prop("stencil.enable"),mask:c.prop("stencil.mask"),func:c.prop("stencil.func"),opFront:c.prop("stencil.opFront"),opBack:c.prop("stencil.opBack")},primitive:VO[C===void 0?Ae.gl.TRIANGLES:C]};me&&(zn.instances=me),k?zn.count=k:F&&(zn.elements=F.get()),this.initDepthDrawParams({depth:$},zn),this.initCullDrawParams({cull:X},zn),this.drawCommand=c(zn),this.drawParams=zn}return(0,dn.Z)(o,[{key:"updateAttributesAndElements",value:function(f,h){var d={};Object.keys(f).forEach(function(g){d[g]=f[g].get()}),this.drawParams.attributes=d,this.drawParams.elements=h.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(f){var h={};Object.keys(f).forEach(function(d){h[d]=f[d].get()}),this.drawParams.attributes=h,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(f){this.uniforms=(0,De.Z)((0,De.Z)({},this.uniforms),this.extractUniforms(f))}},{key:"draw",value:function(f,h){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var d=(0,De.Z)((0,De.Z)({},this.uniforms),this.extractUniforms(f.uniforms||{})),g={};Object.keys(d).forEach(function(S){var C=(0,Gn.Z)(d[S]);C==="boolean"||C==="number"||Array.isArray(d[S])||d[S].BYTES_PER_ELEMENT?g[S]=d[S]:g[S]=d[S].get()}),g.blend=h?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(f),g.stencil=this.getStencilDrawParams(f),g.colorMask=this.getColorMaskDrawParams(f,h),this.drawCommand(g)}}},{key:"destroy",value:function(){var f;(f=this.drawParams)===null||f===void 0||(f=f.elements)===null||f===void 0||f.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(h){h==null||h.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(f,h){var d=f.depth;d&&(h.depth={enable:d.enable===void 0?!0:!!d.enable,mask:d.mask===void 0?!0:!!d.mask,func:GO[d.func||Ae.gl.LESS],range:d.range||[0,1]})}},{key:"getBlendDrawParams",value:function(f){var h=f.blend,d=h||{},g=d.enable,S=d.func,C=d.equation,k=d.color,F=k===void 0?[0,0,0,0]:k;return{enable:!!g,func:{srcRGB:Zx[S&&S.srcRGB||Ae.gl.SRC_ALPHA],srcAlpha:Zx[S&&S.srcAlpha||Ae.gl.SRC_ALPHA],dstRGB:Zx[S&&S.dstRGB||Ae.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Zx[S&&S.dstAlpha||Ae.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:jx[C&&C.rgb||Ae.gl.FUNC_ADD],alpha:jx[C&&C.alpha||Ae.gl.FUNC_ADD]},color:F}}},{key:"getStencilDrawParams",value:function(f){var h=f.stencil,d=h||{},g=d.enable,S=d.mask,C=S===void 0?-1:S,k=d.func,F=k===void 0?{cmp:Ae.gl.ALWAYS,ref:0,mask:-1}:k,$=d.opFront,X=$===void 0?{fail:Ae.gl.KEEP,zfail:Ae.gl.KEEP,zpass:Ae.gl.KEEP}:$,me=d.opBack,je=me===void 0?{fail:Ae.gl.KEEP,zfail:Ae.gl.KEEP,zpass:Ae.gl.KEEP}:me;return{enable:!!g,mask:C,func:(0,De.Z)((0,De.Z)({},F),{},{cmp:LS[F.cmp]}),opFront:{fail:Gm[X.fail],zfail:Gm[X.zfail],zpass:Gm[X.zpass]},opBack:{fail:Gm[je.fail],zfail:Gm[je.zfail],zpass:Gm[je.zpass]}}}},{key:"getColorMaskDrawParams",value:function(f,h){var d=f.stencil,g=d!=null&&d.enable&&d.opFront&&!h?[!1,!1,!1,!1]:[!0,!0,!0,!0];return g}},{key:"initCullDrawParams",value:function(f,h){var d=f.cull;if(d){var g=d.enable,S=d.face,C=S===void 0?Ae.gl.BACK:S;h.cull={enable:!!g,face:XO[C]}}}},{key:"extractUniforms",value:function(f){var h=this,d={};return Object.keys(f).forEach(function(g){h.extractUniformsRecursively(g,f[g],d,"")}),d}},{key:"extractUniformsRecursively",value:function(f,h,d,g){var S=this;if(h===null||typeof h=="number"||typeof h=="boolean"||Array.isArray(h)&&typeof h[0]=="number"||x_(h)||h===""||"resize"in h){d["".concat(g&&g+".").concat(f)]=h;return}_w(h)&&Object.keys(h).forEach(function(C){S.extractUniformsRecursively(C,h[C],d,"".concat(g&&g+".").concat(f))}),Array.isArray(h)&&h.forEach(function(C,k){Object.keys(C).forEach(function(F){S.extractUniformsRecursively(F,C[F],d,"".concat(g&&g+".").concat(f,"[").concat(k,"]"))})})}}]),o}(),bw=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"isDestroy",!1);var h=f.data,d=f.type,g=d===void 0?Ae.gl.UNSIGNED_BYTE:d,S=f.width,C=f.height,k=f.flipY,F=k===void 0?!1:k,$=f.format,X=$===void 0?Ae.gl.RGBA:$,me=f.mipmap,je=me===void 0?!1:me,_t=f.wrapS,Ot=_t===void 0?Ae.gl.CLAMP_TO_EDGE:_t,nn=f.wrapT,Un=nn===void 0?Ae.gl.CLAMP_TO_EDGE:nn,zn=f.aniso,ur=zn===void 0?0:zn,Pr=f.alignment,si=Pr===void 0?1:Pr,kr=f.premultiplyAlpha,hr=kr===void 0?!1:kr,Hr=f.mag,ha=Hr===void 0?Ae.gl.NEAREST:Hr,Xa=f.min,pa=Xa===void 0?Ae.gl.NEAREST:Xa,bo=f.colorSpace,Do=bo===void 0?Ae.gl.BROWSER_DEFAULT_WEBGL:bo,so=f.x,af=so===void 0?0:so,Uu=f.y,td=Uu===void 0?0:Uu,Jd=f.copy,fh=Jd===void 0?!1:Jd;this.width=S,this.height=C;var Rs={width:S,height:C,type:Ux[g],format:HO[X],wrapS:kS[Ot],wrapT:kS[Un],mag:pi[ha],min:pi[pa],alignment:si,flipY:F,colorSpace:$O[Do],premultiplyAlpha:hr,aniso:ur,x:af,y:td,copy:fh};h&&(Rs.data=h),typeof je=="number"?Rs.mipmap=WO[je]:typeof je=="boolean"&&(Rs.mipmap=je),this.texture=c.texture(Rs)}return(0,dn.Z)(o,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(f)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(f){var h=f.width,d=f.height;this.texture.resize(h,d),this.width=h,this.height=d}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var f;(f=this.texture)===null||f===void 0||f.destroy()}this.isDestroy=!0}}]),o}(),Ho=function(){function o(){var c=this;(0,Dt.Z)(this,o),(0,He.Z)(this,"uniformBuffers",[]),(0,He.Z)(this,"queryVerdorInfo",function(){return"WebGL1"}),(0,He.Z)(this,"createModel",function(f){return new S0(c.gl,f)}),(0,He.Z)(this,"createAttribute",function(f){return new ZO(c.gl,f)}),(0,He.Z)(this,"createBuffer",function(f){return new YO(c.gl,f)}),(0,He.Z)(this,"createElements",function(f){return new du(c.gl,f)}),(0,He.Z)(this,"createTexture2D",function(f){return new bw(c.gl,f)}),(0,He.Z)(this,"createFramebuffer",function(f){return new y0(c.gl,f)}),(0,He.Z)(this,"useFramebuffer",function(f,h){c.gl({framebuffer:f?f.get():null})(h)}),(0,He.Z)(this,"useFramebufferAsync",function(){var f=(0,Fe.Z)(B().mark(function h(d,g){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:c.gl({framebuffer:d?d.get():null})(g);case 1:case"end":return C.stop()}},h)}));return function(h,d){return f.apply(this,arguments)}}()),(0,He.Z)(this,"clear",function(f){var h,d=f.color,g=f.depth,S=f.stencil,C=f.framebuffer,k=C===void 0?null:C,F={color:d,depth:g,stencil:S};F.framebuffer=k===null?k:k.get(),(h=c.gl)===null||h===void 0||h.clear(F)}),(0,He.Z)(this,"viewport",function(f){var h=f.x,d=f.y,g=f.width,S=f.height;c.gl._gl.viewport(h,d,g,S),c.width=g,c.height=S,c.gl._refresh()}),(0,He.Z)(this,"readPixels",function(f){var h=f.framebuffer,d=f.x,g=f.y,S=f.width,C=f.height,k={x:d,y:g,width:S,height:C};return h&&(k.framebuffer=h.get()),c.gl.read(k)}),(0,He.Z)(this,"readPixelsAsync",function(){var f=(0,Fe.Z)(B().mark(function h(d){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",c.readPixels(d));case 1:case"end":return S.stop()}},h)}));return function(h){return f.apply(this,arguments)}}()),(0,He.Z)(this,"getViewportSize",function(){return{width:c.gl._gl.drawingBufferWidth,height:c.gl._gl.drawingBufferHeight}}),(0,He.Z)(this,"getContainer",function(){var f;return(f=c.canvas)===null||f===void 0?void 0:f.parentElement}),(0,He.Z)(this,"getCanvas",function(){return c.canvas}),(0,He.Z)(this,"getGLContext",function(){return c.gl._gl}),(0,He.Z)(this,"destroy",function(){var f;c.canvas=null,(f=c.gl)===null||f===void 0||(f=f._gl)===null||f===void 0||(f=f.getExtension("WEBGL_lose_context"))===null||f===void 0||f.loseContext(),c.gl.destroy(),c.gl=null})}return(0,dn.Z)(o,[{key:"init",value:function(){var c=(0,Fe.Z)(B().mark(function h(d,g,S){var C=this;return B().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.canvas=d,!S){F.next=5;break}this.gl=S,F.next=8;break;case 5:return F.next=7,new Promise(function($,X){jO()({canvas:C.canvas,attributes:{alpha:!0,antialias:g.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:g.preserveDrawingBuffer,stencil:g.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(je,_t){(je||!_t)&&X(je),$(_t)}})});case 7:this.gl=F.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return F.stop()}},h,this)}));function f(h,d,g){return c.apply(this,arguments)}return f}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(f){return!!this.getGLContext().getExtension(f)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var f=this.getGLContext();f.disable(f.CULL_FACE)}},{key:"setDirty",value:function(f){this.isDirty=f}},{key:"getDirty",value:function(){return this.isDirty}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),o}(),Wc=function(){function o(c,f){(0,Dt.Z)(this,o);var h=f.buffer,d=f.offset,g=f.stride,S=f.normalized,C=f.size,k=f.divisor,F=f.shaderLocation;this.buffer=h,this.attribute={shaderLocation:F,buffer:h.get(),offset:d||0,stride:g||0,normalized:S||!1,divisor:k||0},C&&(this.attribute.size=C)}return(0,dn.Z)(o,[{key:"get",value:function(){return this.buffer}},{key:"updateBuffer",value:function(f){this.buffer.subData(f)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),Xs,w0,Qd,E_,nm,jv,rb,eg,ch,Ip,kp,ib=(Xs={},(0,He.Z)(Xs,Ae.gl.FLOAT,Float32Array),(0,He.Z)(Xs,Ae.gl.UNSIGNED_BYTE,Uint8Array),(0,He.Z)(Xs,Ae.gl.SHORT,Int16Array),(0,He.Z)(Xs,Ae.gl.UNSIGNED_SHORT,Uint16Array),(0,He.Z)(Xs,Ae.gl.INT,Int32Array),(0,He.Z)(Xs,Ae.gl.UNSIGNED_INT,Uint32Array),Xs),xw=(w0={},(0,He.Z)(w0,Ae.gl.POINTS,Cl.POINTS),(0,He.Z)(w0,Ae.gl.LINES,Cl.LINES),(0,He.Z)(w0,Ae.gl.LINE_LOOP,Cl.LINES),(0,He.Z)(w0,Ae.gl.LINE_STRIP,Cl.LINE_STRIP),(0,He.Z)(w0,Ae.gl.TRIANGLES,Cl.TRIANGLES),(0,He.Z)(w0,Ae.gl.TRIANGLE_FAN,Cl.TRIANGLES),(0,He.Z)(w0,Ae.gl.TRIANGLE_STRIP,Cl.TRIANGLE_STRIP),w0),J3=(Qd={},(0,He.Z)(Qd,1,yr.F32_R),(0,He.Z)(Qd,2,yr.F32_RG),(0,He.Z)(Qd,3,yr.F32_RGB),(0,He.Z)(Qd,4,yr.F32_RGBA),Qd),Ew=(E_={},(0,He.Z)(E_,Ae.gl.STATIC_DRAW,sh.STATIC),(0,He.Z)(E_,Ae.gl.DYNAMIC_DRAW,sh.DYNAMIC),(0,He.Z)(E_,Ae.gl.STREAM_DRAW,sh.DYNAMIC),E_),y2=(nm={},(0,He.Z)(nm,Ae.gl.REPEAT,oh.REPEAT),(0,He.Z)(nm,Ae.gl.CLAMP_TO_EDGE,oh.CLAMP_TO_EDGE),(0,He.Z)(nm,Ae.gl.MIRRORED_REPEAT,oh.MIRRORED_REPEAT),nm),Sw=(jv={},(0,He.Z)(jv,Ae.gl.NEVER,ts.NEVER),(0,He.Z)(jv,Ae.gl.ALWAYS,ts.ALWAYS),(0,He.Z)(jv,Ae.gl.LESS,ts.LESS),(0,He.Z)(jv,Ae.gl.LEQUAL,ts.LEQUAL),(0,He.Z)(jv,Ae.gl.GREATER,ts.GREATER),(0,He.Z)(jv,Ae.gl.GEQUAL,ts.GEQUAL),(0,He.Z)(jv,Ae.gl.EQUAL,ts.EQUAL),(0,He.Z)(jv,Ae.gl.NOTEQUAL,ts.NOTEQUAL),jv),ww=(rb={},(0,He.Z)(rb,Ae.gl.FRONT,Ih.FRONT),(0,He.Z)(rb,Ae.gl.BACK,Ih.BACK),rb),_2=(eg={},(0,He.Z)(eg,Ae.gl.FUNC_ADD,wc.ADD),(0,He.Z)(eg,Ae.gl.MIN_EXT,wc.MIN),(0,He.Z)(eg,Ae.gl.MAX_EXT,wc.MAX),(0,He.Z)(eg,Ae.gl.FUNC_SUBTRACT,wc.SUBSTRACT),(0,He.Z)(eg,Ae.gl.FUNC_REVERSE_SUBTRACT,wc.REVERSE_SUBSTRACT),eg),ab=(ch={},(0,He.Z)(ch,Ae.gl.ZERO,Ao.ZERO),(0,He.Z)(ch,Ae.gl.ONE,Ao.ONE),(0,He.Z)(ch,Ae.gl.SRC_COLOR,Ao.SRC),(0,He.Z)(ch,Ae.gl.ONE_MINUS_SRC_COLOR,Ao.ONE_MINUS_SRC),(0,He.Z)(ch,Ae.gl.SRC_ALPHA,Ao.SRC_ALPHA),(0,He.Z)(ch,Ae.gl.ONE_MINUS_SRC_ALPHA,Ao.ONE_MINUS_SRC_ALPHA),(0,He.Z)(ch,Ae.gl.DST_COLOR,Ao.DST),(0,He.Z)(ch,Ae.gl.ONE_MINUS_DST_COLOR,Ao.ONE_MINUS_DST),(0,He.Z)(ch,Ae.gl.DST_ALPHA,Ao.DST_ALPHA),(0,He.Z)(ch,Ae.gl.ONE_MINUS_DST_ALPHA,Ao.ONE_MINUS_DST_ALPHA),(0,He.Z)(ch,Ae.gl.CONSTANT_COLOR,Ao.CONST),(0,He.Z)(ch,Ae.gl.ONE_MINUS_CONSTANT_COLOR,Ao.ONE_MINUS_CONSTANT),(0,He.Z)(ch,Ae.gl.CONSTANT_ALPHA,Ao.CONST),(0,He.Z)(ch,Ae.gl.ONE_MINUS_CONSTANT_ALPHA,Ao.ONE_MINUS_CONSTANT),(0,He.Z)(ch,Ae.gl.SRC_ALPHA_SATURATE,Ao.SRC_ALPHA_SATURATE),ch),T0=(Ip={},(0,He.Z)(Ip,Ae.gl.REPLACE,zl.REPLACE),(0,He.Z)(Ip,Ae.gl.KEEP,zl.KEEP),(0,He.Z)(Ip,Ae.gl.ZERO,zl.ZERO),(0,He.Z)(Ip,Ae.gl.INVERT,zl.INVERT),(0,He.Z)(Ip,Ae.gl.INCR,zl.INCREMENT_CLAMP),(0,He.Z)(Ip,Ae.gl.DECR,zl.DECREMENT_CLAMP),(0,He.Z)(Ip,Ae.gl.INCR_WRAP,zl.INCREMENT_WRAP),(0,He.Z)(Ip,Ae.gl.DECR_WRAP,zl.DECREMENT_WRAP),Ip),rm=(kp={},(0,He.Z)(kp,Ae.gl.ALWAYS,ts.ALWAYS),(0,He.Z)(kp,Ae.gl.EQUAL,ts.EQUAL),(0,He.Z)(kp,Ae.gl.GEQUAL,ts.GEQUAL),(0,He.Z)(kp,Ae.gl.GREATER,ts.GREATER),(0,He.Z)(kp,Ae.gl.LEQUAL,ts.LEQUAL),(0,He.Z)(kp,Ae.gl.LESS,ts.LESS),(0,He.Z)(kp,Ae.gl.NEVER,ts.NEVER),(0,He.Z)(kp,Ae.gl.NOTEQUAL,ts.NOTEQUAL),kp),eM={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function ob(o){return Object.prototype.toString.call(o)in eM}function im(o,c){for(var f=o.length,h=Math.ceil(f/3),d=f+h,g=new Float32Array(d),S=0;S<d;S+=4)g[S]=o[S/4*3],g[S+1]=o[S/4*3+1],g[S+2]=o[S/4*3+2],g[S+3]=c;return g}var tg=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"isDestroyed",!1);var h=f.data,d=f.usage,g=f.type,S=f.isUBO,C=f.label,k;ob(h)?k=h:k=new ib[this.type||Ae.gl.FLOAT](h),this.type=g,this.size=k.byteLength,this.buffer=c.createBuffer({viewOrSize:k,usage:S?yu.UNIFORM:yu.VERTEX,hint:Ew[d||Ae.gl.STATIC_DRAW]}),C&&c.setResourceName(this.buffer,C)}return(0,dn.Z)(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(f){var h=f.data,d=f.offset,g;ob(h)?g=h:g=new ib[this.type||Ae.gl.FLOAT](h),this.buffer.setSubData(d,new Uint8Array(g.buffer))}}]),o}();function tM(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=nM(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function nM(o,c){if(o){if(typeof o=="string")return b2(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return b2(o,c)}}function b2(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}function _u(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return o+=c,o+=o<<10,o+=o>>>6,o>>>0}function Tw(o){return o+=o<<3,o^=o>>>11,o+=o<<15,o>>>0}function x2(){return 0}var Aw=(0,dn.Z)(function o(){(0,Dt.Z)(this,o),(0,He.Z)(this,"keys",[]),(0,He.Z)(this,"values",[])}),sb=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"buckets",new Map),this.keyEqualFunc=c,this.keyHashFunc=f}return(0,dn.Z)(o,[{key:"findBucketIndex",value:function(f,h){for(var d=0;d<f.keys.length;d++)if(this.keyEqualFunc(h,f.keys[d]))return d;return-1}},{key:"findBucket",value:function(f){var h=this.keyHashFunc(f);return this.buckets.get(h)}},{key:"get",value:function(f){var h=this.findBucket(f);if(h===void 0)return null;var d=this.findBucketIndex(h,f);return d<0?null:h.values[d]}},{key:"add",value:function(f,h){var d=this.keyHashFunc(f);this.buckets.get(d)===void 0&&this.buckets.set(d,new Aw);var g=this.buckets.get(d);g.keys.push(f),g.values.push(h)}},{key:"delete",value:function(f){var h=this.findBucket(f);if(h!==void 0){var d=this.findBucketIndex(h,f);d!==-1&&(h.keys.splice(d,1),h.values.splice(d,1))}}},{key:"clear",value:function(){this.buckets.clear()}},{key:"size",value:function(){var f=0,h=tM(this.buckets.values()),d;try{for(h.s();!(d=h.n()).done;){var g=d.value;f+=g.values.length}}catch(S){h.e(S)}finally{h.f()}return f}},{key:"values",value:B().mark(function c(){var f,h,d,g;return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:f=tM(this.buckets.values()),C.prev=1,f.s();case 3:if((h=f.n()).done){C.next=14;break}d=h.value,g=d.values.length-1;case 6:if(!(g>=0)){C.next=12;break}return C.next=9,d.values[g];case 9:g--,C.next=6;break;case 12:C.next=3;break;case 14:C.next=19;break;case 16:C.prev=16,C.t0=C.catch(1),f.e(C.t0);case 19:return C.prev=19,f.f(),C.finish(19);case 22:case"end":return C.stop()}},c,this,[[1,16,19,22]])})}]),o}();function ub(o,c){var f=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!f){if(Array.isArray(o)||(f=S_(o))||c&&o&&typeof o.length=="number"){f&&(o=f);var h=0,d=function(){};return{s:d,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(F){throw F},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,S=!1,C;return{s:function(){f=f.call(o)},n:function(){var F=f.next();return g=F.done,F},e:function(F){S=!0,C=F},f:function(){try{!g&&f.return!=null&&f.return()}finally{if(S)throw C}}}}function S_(o,c){if(o){if(typeof o=="string")return lb(o,c);var f=Object.prototype.toString.call(o).slice(8,-1);if(f==="Object"&&o.constructor&&(f=o.constructor.name),f==="Map"||f==="Set")return Array.from(o);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return lb(o,c)}}function lb(o,c){(c==null||c>o.length)&&(c=o.length);for(var f=0,h=new Array(c);f<c;f++)h[f]=o[f];return h}function E2(o,c){return o=_u(o,c.blendMode),o=_u(o,c.blendSrcFactor),o=_u(o,c.blendDstFactor),o}function Lp(o,c){return o=E2(o,c.rgbBlendState),o=E2(o,c.alphaBlendState),o=_u(o,c.channelWriteMask),o}function Pu(o,c){return o=_u(o,c.r<<24|c.g<<16|c.b<<8|c.a),o}function j5(o,c){for(var f,h,d,g,S,C,k,F,$=0;$<c.attachmentsState.length;$++)o=Lp(o,c.attachmentsState[$]);return o=Pu(o,c.blendConstant||s_),o=_u(o,c.depthCompare),o=_u(o,c.depthWrite?1:0),o=_u(o,(f=c.stencilFront)===null||f===void 0?void 0:f.compare),o=_u(o,(h=c.stencilFront)===null||h===void 0?void 0:h.passOp),o=_u(o,(d=c.stencilFront)===null||d===void 0?void 0:d.failOp),o=_u(o,(g=c.stencilFront)===null||g===void 0?void 0:g.depthFailOp),o=_u(o,(S=c.stencilBack)===null||S===void 0?void 0:S.compare),o=_u(o,(C=c.stencilBack)===null||C===void 0?void 0:C.passOp),o=_u(o,(k=c.stencilBack)===null||k===void 0?void 0:k.failOp),o=_u(o,(F=c.stencilBack)===null||F===void 0?void 0:F.depthFailOp),o=_u(o,c.stencilWrite?1:0),o=_u(o,c.cullMode),o=_u(o,c.frontFace?1:0),o=_u(o,c.polygonOffset?1:0),o}function Z5(o){var c=0;c=_u(c,o.program.id),o.inputLayout!==null&&(c=_u(c,o.inputLayout.id)),c=j5(c,o.megaStateDescriptor);for(var f=0;f<o.colorAttachmentFormats.length;f++)c=_u(c,o.colorAttachmentFormats[f]||0);return c=_u(c,o.depthStencilAttachmentFormat||0),Tw(c)}function rM(o){var c=0;if(o.samplerBindings)for(var f=0;f<o.samplerBindings.length;f++){var h=o.samplerBindings[f];h!==null&&h.texture!==null&&(c=_u(c,h.texture.id))}if(o.uniformBufferBindings)for(var d=0;d<o.uniformBufferBindings.length;d++){var g=o.uniformBufferBindings[d];g!==null&&g.buffer!==null&&(c=_u(c,g.buffer.id),c=_u(c,g.binding),c=_u(c,g.offset),c=_u(c,g.size))}if(o.storageBufferBindings)for(var S=0;S<o.storageBufferBindings.length;S++){var C=o.storageBufferBindings[S];C!==null&&C.buffer!==null&&(c=_u(c,C.buffer.id),c=_u(c,C.binding),c=_u(c,C.offset),c=_u(c,C.size))}if(o.storageTextureBindings)for(var k=0;k<o.storageTextureBindings.length;k++){var F=o.storageTextureBindings[k];F!==null&&F.texture!==null&&(c=_u(c,F.texture.id),c=_u(c,F.binding))}return Tw(c)}function Cw(o,c){var f,h,d,g;return((f=o.vertex)===null||f===void 0?void 0:f.glsl)===((h=c.vertex)===null||h===void 0?void 0:h.glsl)&&((d=o.fragment)===null||d===void 0?void 0:d.glsl)===((g=c.fragment)===null||g===void 0?void 0:g.glsl)}function w_(o){var c,f;return{vertex:{glsl:(c=o.vertex)===null||c===void 0?void 0:c.glsl},fragment:{glsl:(f=o.fragment)===null||f===void 0?void 0:f.glsl}}}var Ow=function(){function o(c){(0,Dt.Z)(this,o),(0,He.Z)(this,"bindingsCache",new sb(i3,rM)),(0,He.Z)(this,"renderPipelinesCache",new sb(V1,Z5)),(0,He.Z)(this,"inputLayoutsCache",new sb(l3,x2)),(0,He.Z)(this,"programCache",new sb(Cw,x2)),this.device=c}return(0,dn.Z)(o,[{key:"createBindings",value:function(f){var h=this.bindingsCache.get(f);if(h===null){var d,g=Kx(f);g.uniformBufferBindings=(d=g.uniformBufferBindings)===null||d===void 0?void 0:d.filter(function(S){var C=S.size;return C&&C>0}),h=this.device.createBindings(g),this.bindingsCache.add(g,h)}return h}},{key:"createRenderPipeline",value:function(f){var h=this.renderPipelinesCache.get(f);if(h===null){var d=H1(f);d.colorAttachmentFormats=d.colorAttachmentFormats.filter(function(g){return g}),h=this.device.createRenderPipeline(d),this.renderPipelinesCache.add(d,h)}return h}},{key:"createInputLayout",value:function(f){f.vertexBufferDescriptors=f.vertexBufferDescriptors.filter(function(g){return!!g});var h=this.inputLayoutsCache.get(f);if(h===null){var d=h3(f);h=this.device.createInputLayout(d),this.inputLayoutsCache.add(d,h)}return h}},{key:"createProgram",value:function(f){var h=this.programCache.get(f);if(h===null){var d=w_(f);h=this.device.createProgram(f),this.programCache.add(d,h)}return h}},{key:"destroy",value:function(){var f=ub(this.bindingsCache.values()),h;try{for(f.s();!(h=f.n()).done;){var d=h.value;d.destroy()}}catch(_t){f.e(_t)}finally{f.f()}var g=ub(this.renderPipelinesCache.values()),S;try{for(g.s();!(S=g.n()).done;){var C=S.value;C.destroy()}}catch(_t){g.e(_t)}finally{g.f()}var k=ub(this.inputLayoutsCache.values()),F;try{for(k.s();!(F=k.n()).done;){var $=F.value;$.destroy()}}catch(_t){k.e(_t)}finally{k.f()}var X=ub(this.programCache.values()),me;try{for(X.s();!(me=X.n()).done;){var je=me.value;je.destroy()}}catch(_t){X.e(_t)}finally{X.f()}this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}}]),o}(),S2=function(){function o(c,f){(0,Dt.Z)(this,o);var h=f.data,d=f.type,g=f.count,S=g===void 0?0:g,C;ob(h)?C=h:C=new ib[this.type||Ae.gl.UNSIGNED_INT](h),this.type=d,this.count=S,this.indexBuffer=c.createBuffer({viewOrSize:C,usage:yu.INDEX})}return(0,dn.Z)(o,[{key:"get",value:function(){return this.indexBuffer}},{key:"subData",value:function(f){var h=f.data,d;ob(h)?d=h:d=new ib[this.type||Ae.gl.UNSIGNED_INT](h),this.indexBuffer.setSubData(0,new Uint8Array(d.buffer))}},{key:"destroy",value:function(){this.indexBuffer.destroy()}}]),o}();function T_(o){return!!(o&&o.texture)}var A_=function(){function o(c,f){(0,Dt.Z)(this,o),(0,He.Z)(this,"isDestroy",!1),this.device=c,this.options=f;var h=f.wrapS,d=h===void 0?Ae.gl.CLAMP_TO_EDGE:h,g=f.wrapT,S=g===void 0?Ae.gl.CLAMP_TO_EDGE:g,C=f.aniso,k=f.mag,F=k===void 0?Ae.gl.NEAREST:k,$=f.min,X=$===void 0?Ae.gl.NEAREST:$;this.createTexture(f),this.sampler=c.createSampler({addressModeU:y2[d],addressModeV:y2[S],minFilter:X===Ae.gl.NEAREST?ll.POINT:ll.BILINEAR,magFilter:F===Ae.gl.NEAREST?ll.POINT:ll.BILINEAR,mipmapFilter:pu.NO_MIP,maxAnisotropy:C})}return(0,dn.Z)(o,[{key:"createTexture",value:function(f){var h=f.type,d=h===void 0?Ae.gl.UNSIGNED_BYTE:h,g=f.width,S=f.height,C=f.flipY,k=C===void 0?!1:C,F=f.format,$=F===void 0?Ae.gl.RGBA:F,X=f.alignment,me=X===void 0?1:X,je=f.usage,_t=je===void 0?Ae.v2.SAMPLED:je,Ot=f.unorm,nn=Ot===void 0?!1:Ot,Un=f.label,zn=f.data;this.width=g,this.height=S;var ur=yr.U8_RGBA_RT;if(d===Ae.gl.UNSIGNED_BYTE&&$===Ae.gl.RGBA)ur=nn?yr.U8_RGBA_NORM:yr.U8_RGBA_RT;else if(d===Ae.gl.UNSIGNED_BYTE&&$===Ae.gl.LUMINANCE)ur=yr.U8_LUMINANCE;else if(d===Ae.gl.FLOAT&&$===Ae.gl.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(zn&&(zn=im(zn,0)),ur=yr.F32_RGBA):ur=yr.F32_RGB;else if(d===Ae.gl.FLOAT&&$===Ae.gl.RGBA)ur=yr.F32_RGBA;else if(d===Ae.gl.FLOAT&&$===Ae.gl.RED)ur=yr.F32_R;else throw new Error("create texture error, type: ".concat(d,", format: ").concat($));this.texture=this.device.createTexture({format:ur,width:g,height:S,usage:_t===Ae.v2.SAMPLED?uh.SAMPLED:uh.RENDER_TARGET,pixelStore:{unpackFlipY:k,packAlignment:me},mipLevelCount:1}),Un&&this.device.setResourceName(this.texture,Un),zn&&this.texture.setImageData([zn])}},{key:"get",value:function(){return this.texture}},{key:"update",value:function(f){var h=f.data;this.texture.setImageData([h])}},{key:"bind",value:function(){}},{key:"resize",value:function(f){var h=f.width,d=f.height;(this.width!==h||this.height!==d)&&this.destroy(),this.options.width=h,this.options.height=d,this.createTexture(this.options),this.isDestroy=!1}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy&&!this.texture.destroyed){var f;(f=this.texture)===null||f===void 0||f.destroy()}this.isDestroy=!0}}]),o}(),Mw=function(){function o(c,f){(0,Dt.Z)(this,o),this.device=c,this.options=f,this.createColorRenderTarget(),this.createDepthRenderTarget()}return(0,dn.Z)(o,[{key:"createColorRenderTarget",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,h=this.options,d=h.width,g=h.height,S=h.color;S&&(T_(S)?(f&&S.resize({width:d,height:g}),this.colorTexture=S.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=S.width,this.height=S.height):d&&g&&(this.colorTexture=this.device.createTexture({format:yr.U8_RGBA_RT,usage:uh.RENDER_TARGET,width:d,height:g}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=d,this.height=g))}},{key:"createDepthRenderTarget",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,h=this.options,d=h.width,g=h.height,S=h.depth;S&&(T_(S)?(f&&S.resize({width:d,height:g}),this.depthTexture=S.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=S.width,this.height=S.height):d&&g&&(this.depthTexture=this.device.createTexture({format:yr.D24_S8,usage:uh.RENDER_TARGET,width:d,height:g}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=d,this.height=g))}},{key:"get",value:function(){return this.colorRenderTarget}},{key:"destroy",value:function(){var f,h;(f=this.colorRenderTarget)===null||f===void 0||f.destroy(),(h=this.depthRenderTarget)===null||h===void 0||h.destroy()}},{key:"resize",value:function(f){var h=f.width,d=f.height;(this.width!==h||this.height!==d)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=h,this.options.height=d,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}}]),o}(),Rw=Ve.rU.isPlainObject,Ol=Ve.rU.isTypedArray,fl=function(){function o(c,f,h){var d=this;(0,Dt.Z)(this,o),(0,He.Z)(this,"destroyed",!1),(0,He.Z)(this,"uniforms",{}),(0,He.Z)(this,"vertexBuffers",[]),this.device=c,this.options=f,this.service=h;var g=f.vs,S=f.fs,C=f.attributes,k=f.uniforms,F=f.count,$=f.elements,X=f.diagnosticDerivativeUniformityEnabled;this.options=f;var me=X?"":this.service.viewportOrigin===_0.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=h.renderCache.createProgram({vertex:{glsl:g},fragment:{glsl:S,postprocess:function(Un){return me+Un}}}),k&&(this.uniforms=this.extractUniforms(k));var je=[],_t=0;Object.keys(C).forEach(function(nn){var Un=C[nn],zn=Un.get();d.vertexBuffers.push(zn.get());var ur=Un.attribute,Pr=ur.offset,si=Pr===void 0?0:Pr,kr=ur.stride,hr=kr===void 0?0:kr,Hr=ur.size,ha=Hr===void 0?1:Hr,Xa=ur.divisor,pa=Xa===void 0?0:Xa,bo=ur.shaderLocation,Do=bo===void 0?0:bo;je.push({arrayStride:hr||ha*4,stepMode:Hf.VERTEX,attributes:[{format:J3[ha],shaderLocation:Do,offset:si,divisor:pa}]}),_t=zn.size/ha}),F||(this.options.count=_t),$&&(this.indexBuffer=$.get());var Ot=h.renderCache.createInputLayout({vertexBufferDescriptors:je,indexBufferFormat:$?yr.U32_R:null,program:this.program});this.inputLayout=Ot,this.pipeline=this.createPipeline(f)}return(0,dn.Z)(o,[{key:"createPipeline",value:function(f,h){var d=f.primitive,g=d===void 0?Ae.gl.TRIANGLES:d,S=f.depth,C=f.cull,k=f.blend,F=f.stencil,$=this.initDepthDrawParams({depth:S}),X=!!($&&$.enable),me=this.initCullDrawParams({cull:C}),je=!!(me&&me.enable),_t=this.getBlendDrawParams({blend:k}),Ot=!!(_t&&_t.enable),nn=this.getStencilDrawParams({stencil:F}),Un=!!(nn&&nn.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:xw[g],colorAttachmentFormats:[yr.U8_RGBA_RT],depthStencilAttachmentFormat:yr.D24_S8,megaStateDescriptor:{attachmentsState:[h?{channelWriteMask:Af.ALL,rgbBlendState:{blendMode:wc.ADD,blendSrcFactor:Ao.ONE,blendDstFactor:Ao.ZERO},alphaBlendState:{blendMode:wc.ADD,blendSrcFactor:Ao.ONE,blendDstFactor:Ao.ZERO}}:{channelWriteMask:Un&&nn.opFront.zpass===zl.REPLACE?Af.NONE:Af.ALL,rgbBlendState:{blendMode:Ot&&_t.equation.rgb||wc.ADD,blendSrcFactor:Ot&&_t.func.srcRGB||Ao.SRC_ALPHA,blendDstFactor:Ot&&_t.func.dstRGB||Ao.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:Ot&&_t.equation.alpha||wc.ADD,blendSrcFactor:Ot&&_t.func.srcAlpha||Ao.ONE,blendDstFactor:Ot&&_t.func.dstAlpha||Ao.ONE}}],blendConstant:Ot?s_:void 0,depthWrite:X,depthCompare:X&&$.func||ts.LESS,cullMode:je&&me.face||Ih.NONE,stencilWrite:Un,stencilFront:{compare:Un?nn.func.cmp:ts.ALWAYS,passOp:nn.opFront.zpass,failOp:nn.opFront.fail,depthFailOp:nn.opFront.zfail,mask:nn.opFront.mask},stencilBack:{compare:Un?nn.func.cmp:ts.ALWAYS,passOp:nn.opBack.zpass,failOp:nn.opBack.fail,depthFailOp:nn.opBack.zfail,mask:nn.opBack.mask}}})}},{key:"updateAttributesAndElements",value:function(){}},{key:"updateAttributes",value:function(){}},{key:"addUniforms",value:function(f){this.uniforms=(0,De.Z)((0,De.Z)({},this.uniforms),this.extractUniforms(f))}},{key:"draw",value:function(f,h){var d=this,g=(0,De.Z)((0,De.Z)({},this.options),f),S=g.count,C=S===void 0?0:S,k=g.instances,F=g.elements,$=g.uniforms,X=$===void 0?{}:$,me=g.uniformBuffers,je=g.textures;this.uniforms=(0,De.Z)((0,De.Z)({},this.uniforms),this.extractUniforms(X));var _t=this.service,Ot=_t.renderPass,nn=_t.currentFramebuffer,Un=_t.width,zn=_t.height,ur=_t.renderCache;this.pipeline=this.createPipeline(g,h);var Pr=this.service.device,si=Pr.swapChainHeight;if(Pr.swapChainHeight=(nn==null?void 0:nn.height)||zn,Ot.setViewport(0,0,(nn==null?void 0:nn.width)||Un,(nn==null?void 0:nn.height)||zn),Pr.swapChainHeight=si,Ot.setPipeline(this.pipeline),Ot.setStencilReference(1),Ot.setVertexInput(this.inputLayout,this.vertexBuffers.map(function(hr){return{buffer:hr}}),F?{buffer:this.indexBuffer,offset:0}:null),me&&(this.bindings=ur.createBindings({pipeline:this.pipeline,uniformBufferBindings:me.map(function(hr,Hr){var ha=hr;return{binding:Hr,buffer:ha.get(),size:ha.size}}),samplerBindings:je==null?void 0:je.map(function(hr){return{texture:hr.texture,sampler:hr.sampler}})})),this.bindings&&(Ot.setBindings(this.bindings),Object.keys(this.uniforms).forEach(function(hr){var Hr=d.uniforms[hr];Hr instanceof A_?d.uniforms[hr]=Hr.get():Hr instanceof Mw&&(d.uniforms[hr]=Hr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),F){var kr=F.count;kr===0?Ot.draw(C,k):Ot.drawIndexed(kr,k)}else Ot.draw(C,k)}},{key:"destroy",value:function(){var f,h,d;this.program.destroy(),(f=this.vertexBuffers)===null||f===void 0||f.forEach(function(g){return g.destroy()}),(h=this.indexBuffer)===null||h===void 0||h.destroy(),(d=this.bindings)===null||d===void 0||d.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(f){var h=f.depth;if(h)return{enable:h.enable===void 0?!0:!!h.enable,mask:h.mask===void 0?!0:!!h.mask,func:Sw[h.func||Ae.gl.LESS],range:h.range||[0,1]}}},{key:"getBlendDrawParams",value:function(f){var h=f.blend,d=h||{},g=d.enable,S=d.func,C=d.equation,k=d.color,F=k===void 0?[0,0,0,0]:k;return{enable:!!g,func:{srcRGB:ab[S&&S.srcRGB||Ae.gl.SRC_ALPHA],srcAlpha:ab[S&&S.srcAlpha||Ae.gl.SRC_ALPHA],dstRGB:ab[S&&S.dstRGB||Ae.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:ab[S&&S.dstAlpha||Ae.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:_2[C&&C.rgb||Ae.gl.FUNC_ADD],alpha:_2[C&&C.alpha||Ae.gl.FUNC_ADD]},color:F}}},{key:"getStencilDrawParams",value:function(f){var h=f.stencil,d=h||{},g=d.enable,S=d.mask,C=S===void 0?4294967295:S,k=d.func,F=k===void 0?{cmp:Ae.gl.ALWAYS,ref:0,mask:4294967295}:k,$=d.opFront,X=$===void 0?{fail:Ae.gl.KEEP,zfail:Ae.gl.KEEP,zpass:Ae.gl.KEEP}:$,me=d.opBack,je=me===void 0?{fail:Ae.gl.KEEP,zfail:Ae.gl.KEEP,zpass:Ae.gl.KEEP}:me;return{enable:!!g,mask:C,func:(0,De.Z)((0,De.Z)({},F),{},{cmp:rm[F.cmp]}),opFront:{fail:T0[X.fail],zfail:T0[X.zfail],zpass:T0[X.zpass],mask:F.mask},opBack:{fail:T0[je.fail],zfail:T0[je.zfail],zpass:T0[je.zpass],mask:F.mask}}}},{key:"initCullDrawParams",value:function(f){var h=f.cull;if(h){var d=h.enable,g=h.face,S=g===void 0?Ae.gl.BACK:g;return{enable:!!d,face:ww[S]}}}},{key:"extractUniforms",value:function(f){var h=this,d={};return Object.keys(f).forEach(function(g){h.extractUniformsRecursively(g,f[g],d,"")}),d}},{key:"extractUniformsRecursively",value:function(f,h,d,g){var S=this;if(h===null||typeof h=="number"||typeof h=="boolean"||Array.isArray(h)&&typeof h[0]=="number"||Ol(h)||h===""||"resize"in h){d["".concat(g&&g+".").concat(f)]=h;return}Rw(h)&&Object.keys(h).forEach(function(C){S.extractUniformsRecursively(C,h[C],d,"".concat(g&&g+".").concat(f))}),Array.isArray(h)&&h.forEach(function(C,k){Object.keys(C).forEach(function(F){S.extractUniformsRecursively(F,C[F],d,"".concat(g&&g+".").concat(f,"[").concat(k,"]"))})})}}]),o}();function C_(o){return typeof WebGL2RenderingContext!="undefined"&&o instanceof WebGL2RenderingContext?!0:!!(o&&o._version===2)}var O_=Ve.rU.isUndefined,M_=function(){function o(){var c=this;(0,Dt.Z)(this,o),(0,He.Z)(this,"uniformBuffers",[]),(0,He.Z)(this,"queryVerdorInfo",function(){return c.device.queryVendorInfo().platformString}),(0,He.Z)(this,"createModel",function(f){return new fl(c.device,f,c)}),(0,He.Z)(this,"createAttribute",function(f){return new Wc(c.device,f)}),(0,He.Z)(this,"createBuffer",function(f){return new tg(c.device,f)}),(0,He.Z)(this,"createElements",function(f){return new S2(c.device,f)}),(0,He.Z)(this,"createTexture2D",function(f){return new A_(c.device,f)}),(0,He.Z)(this,"createFramebuffer",function(f){return new Mw(c.device,f)}),(0,He.Z)(this,"useFramebuffer",function(f,h){c.currentFramebuffer=f,c.beginFrame(),h(),c.endFrame(),c.currentFramebuffer=null}),(0,He.Z)(this,"useFramebufferAsync",function(){var f=(0,Fe.Z)(B().mark(function h(d,g){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return c.currentFramebuffer=d,c.preRenderPass=c.renderPass,c.beginFrame(),C.next=5,g();case 5:c.endFrame(),c.currentFramebuffer=null,c.renderPass=c.preRenderPass;case 8:case"end":return C.stop()}},h)}));return function(h,d){return f.apply(this,arguments)}}()),(0,He.Z)(this,"clear",function(f){var h=f.color,d=f.depth,g=f.stencil,S=f.framebuffer,C=S===void 0?null:S;if(C)C.clearOptions={color:h,depth:d,stencil:g};else{var k=c.queryVerdorInfo();if(k==="WebGL1"){var F=c.getGLContext();O_(g)?O_(d)||(F.clearDepth(d),F.clear(F.DEPTH_BUFFER_BIT)):(F.clearStencil(g),F.clear(F.STENCIL_BUFFER_BIT))}else if(k==="WebGL2"){var $=c.getGLContext();O_(g)?O_(d)||$.clearBufferfv($.DEPTH,0,[d]):$.clearBufferiv($.STENCIL,0,[g])}}}),(0,He.Z)(this,"viewport",function(f){var h=f.width,d=f.height;c.swapChain.configureSwapChain(h,d),c.createMainColorDepthRT(h,d),c.width=h,c.height=d}),(0,He.Z)(this,"readPixels",function(f){var h=f.framebuffer,d=f.x,g=f.y,S=f.width,C=f.height,k=c.device.createReadback(),F=h.colorTexture,$=k.readTextureSync(F,d,c.viewportOrigin===_0.LOWER_LEFT?g:c.height-g,S,C,new Uint8Array(S*C*4));return k.destroy(),$}),(0,He.Z)(this,"readPixelsAsync",function(){var f=(0,Fe.Z)(B().mark(function h(d){var g,S,C,k,F,$,X,me,je,_t;return B().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return g=d.framebuffer,S=d.x,C=d.y,k=d.width,F=d.height,$=c.device.createReadback(),X=g.colorTexture,nn.next=5,$.readTexture(X,S,c.viewportOrigin===_0.LOWER_LEFT?C:c.height-C,k,F,new Uint8Array(k*F*4));case 5:if(me=nn.sent,c.viewportOrigin!==_0.LOWER_LEFT)for(je=0;je<me.length;je+=4)_t=me[je],me[je]=me[je+2],me[je+2]=_t;return $.destroy(),nn.abrupt("return",me);case 9:case"end":return nn.stop()}},h)}));return function(h){return f.apply(this,arguments)}}()),(0,He.Z)(this,"getViewportSize",function(){return{width:c.width,height:c.height}}),(0,He.Z)(this,"getContainer",function(){var f;return(f=c.canvas)===null||f===void 0?void 0:f.parentElement}),(0,He.Z)(this,"getCanvas",function(){return c.canvas}),(0,He.Z)(this,"getGLContext",function(){return c.device.gl}),(0,He.Z)(this,"destroy",function(){var f;c.canvas=null,(f=c.uniformBuffers)===null||f===void 0||f.forEach(function(h){h.destroy()}),c.device.destroy(),c.renderCache.destroy()})}return(0,dn.Z)(o,[{key:"init",value:function(){var c=(0,Fe.Z)(B().mark(function h(d,g){var S,C,k,F,$;return B().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return S=g.enableWebGPU,C=g.shaderCompilerPath,this.canvas=d,k=S?new g2({shaderCompilerPath:C}):new F3({targets:["webgl2","webgl1"],onContextLost:function(_t){console.warn("context lost",_t)},onContextCreationError:function(_t){console.warn("context creation error",_t)},onContextRestored:function(_t){console.warn("context restored",_t)}}),me.next=5,k.createSwapChain(d);case 5:F=me.sent,F.configureSwapChain(d.width,d.height),this.device=F.getDevice(),this.swapChain=F,this.renderCache=new Ow(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin,$=this.device.gl,this.extensionObject={OES_texture_float:!C_($)&&this.device.OES_texture_float},this.createMainColorDepthRT(d.width,d.height);case 15:case"end":return me.stop()}},h,this)}));function f(h,d){return c.apply(this,arguments)}return f}()},{key:"createMainColorDepthRT",value:function(f,h){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:yr.U8_RGBA_RT,width:f,height:h,usage:uh.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:yr.D24_S8,width:f,height:h,usage:uh.RENDER_TARGET}))}},{key:"beginFrame",value:function(){this.device.beginFrame();var f=this.currentFramebuffer,h=this.swapChain,d=this.mainColorRT,g=this.mainDepthRT,S=f?f.colorRenderTarget:d,C=f?null:h.getOnscreenTexture(),k=f?f.depthRenderTarget:g,F=(f==null?void 0:f.clearOptions)||{},$=F.color,X=$===void 0?[0,0,0,0]:$,me=F.depth,je=me===void 0?1:me,_t=F.stencil,Ot=_t===void 0?0:_t,nn=S?o_(X[0]*255,X[1]*255,X[2]*255,X[3]):s_,Un=k?je:void 0,zn=k?Ot:void 0,ur=this.device.createRenderPass({colorAttachment:[S],colorResolveTo:[C],colorClearColor:[nn],colorStore:[!0],depthStencilAttachment:k,depthClearValue:Un,stencilClearValue:zn});this.renderPass=ur}},{key:"endFrame",value:function(){this.device.submitPass(this.renderPass),this.device.endFrame()}},{key:"getPointSizeRange",value:function(){var f=this.device.gl;return f.getParameter(f.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(f){return!!this.getGLContext().getExtension(f)}},{key:"setState",value:function(){}},{key:"setBaseState",value:function(){}},{key:"setCustomLayerDefaults",value:function(){}},{key:"setDirty",value:function(f){this.isDirty=f}},{key:"getDirty",value:function(){return this.isDirty}}]),o}();function Pw(o){var c=iM();return function(){var h=(0,Ji.Z)(o),d;if(c){var g=(0,Ji.Z)(this).constructor;d=Reflect.construct(h,arguments,g)}else d=h.apply(this,arguments);return(0,fo.Z)(this,d)}}function iM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}var am=["selectstart","selecting","selectend"],Iw=function(o){(0,za.Z)(f,o);var c=Pw(f);function f(h){var d,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Dt.Z)(this,f),d=c.call(this),(0,He.Z)((0,Ti.Z)(d),"isEnable",!1),(0,He.Z)((0,Ti.Z)(d),"onDragStart",function(S){d.box.style.display="block",d.startEvent=d.endEvent=S,d.syncBoxBound(),d.emit("selectstart",d.getLngLatBox(),d.startEvent,d.endEvent)}),(0,He.Z)((0,Ti.Z)(d),"onDragging",function(S){d.endEvent=S,d.syncBoxBound(),d.emit("selecting",d.getLngLatBox(),d.startEvent,d.endEvent)}),(0,He.Z)((0,Ti.Z)(d),"onDragEnd",function(S){d.endEvent=S,d.box.style.display="none",d.emit("selectend",d.getLngLatBox(),d.startEvent,d.endEvent)}),d.scene=h,d.options=g,d}return(0,dn.Z)(f,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var d=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var g=Ve.SO.create("div",void 0,this.container);g.classList.add("l7-select-box"),d&&g.classList.add(d),g.style.display="none",this.box=g}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var d=this.startEvent,g=d.x,S=d.y,C=this.endEvent,k=C.x,F=C.y,$=Math.min(g,k),X=Math.min(S,F),me=Math.abs(g-k),je=Math.abs(S-F);this.box.style.top="".concat(X,"px"),this.box.style.left="".concat($,"px"),this.box.style.width="".concat(me,"px"),this.box.style.height="".concat(je,"px")}},{key:"getLngLatBox",value:function(){var d=this.startEvent.lngLat,g=d.lng,S=d.lat,C=this.endEvent.lngLat,k=C.lng,F=C.lat;return(0,Ve.Ol)([[g,S],[k,F]])}}]),f}(If.EventEmitter),V5=function(){function o(c){(0,Dt.Z)(this,o);var f=c.id,h=c.map,d=c.canvas,g=c.renderer,S=g===void 0?"regl":g,C=(0,Ae.Hp)();this.container=C,h.setContainer(C,f,d),S==="regl"?C.rendererService=new Ho:C.rendererService=new M_,this.sceneService=C.sceneService,this.mapService=C.mapService,this.iconService=C.iconService,this.fontService=C.fontService,this.controlService=C.controlService,this.layerService=C.layerService,this.debugService=C.debugService,this.debugService.setEnable(c.debug),this.markerService=C.markerService,this.interactionService=C.interactionService,this.popupService=C.popupService,this.boxSelect=new Iw(this,{}),this.initComponent(f),this.sceneService.init(c),this.initControl()}return(0,dn.Z)(o,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var c=(0,Fe.Z)(B().mark(function h(d){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.sceneService.exportPng(d));case 1:case"end":return S.stop()}},h,this)}));function f(h){return c.apply(this,arguments)}return f}()},{key:"exportMap",value:function(){var c=(0,Fe.Z)(B().mark(function h(d){return B().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.sceneService.exportPng(d));case 1:case"end":return S.stop()}},h,this)}));function f(h){return c.apply(this,arguments)}return f}()},{key:"registerRenderService",value:function(f){var h=this;if(this.sceneService.loaded){var d=new f(this);d.init()}else this.on("loaded",function(){var g=new f(h);g.init()})}},{key:"setBgColor",value:function(f){this.mapService.setBgColor(f)}},{key:"addLayer",value:function(f){var h=this;this.loaded?this.preAddLayer(f):(console.log("layer not loaded"),this.once("loaded",function(){console.log("layer loaded"),h.preAddLayer(f)}))}},{key:"preAddLayer",value:function(f){var h=this,d=(0,Ae.e7)(this.container);if(f.setContainer(d),this.sceneService.addLayer(f),f.inited){this.initTileLayer(f);var g=this.initMask(f);this.addMask(g,f.id)}else f.on("inited",function(){h.initTileLayer(f);var S=h.initMask(f);h.addMask(S,f.id)})}},{key:"initMask",value:function(f){var h=f.getLayerConfig(),d=h.mask,g=h.maskfence,S=h.maskColor,C=S===void 0?"#000":S,k=h.maskOpacity,F=k===void 0?0:k;if(!(!d||!g)){var $=new bS().source(g).shape("fill").style({color:C,opacity:F});return $}}},{key:"addMask",value:function(f,h){if(f){var d=this.getLayer(h);if(d){var g=(0,Ae.e7)(this.container);f.setContainer(g),d.addMaskLayer(f),this.sceneService.addMask(f)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(f){return this.layerService.getLayer(f)}},{key:"getLayerByName",value:function(f){return this.layerService.getLayerByName(f)}},{key:"removeLayer",value:function(){var c=(0,Fe.Z)(B().mark(function h(d,g){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.layerService.remove(d,g);case 2:case"end":return C.stop()}},h,this)}));function f(h,d){return c.apply(this,arguments)}return f}()},{key:"removeAllLayer",value:function(){var c=(0,Fe.Z)(B().mark(function h(){return B().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layerService.removeAllLayers();case 2:case"end":return g.stop()}},h,this)}));function f(){return c.apply(this,arguments)}return f}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(f){this.layerService.setEnableRender(f)}},{key:"addIconFont",value:function(f,h){this.fontService.addIconFont(f,h)}},{key:"addIconFonts",value:function(f){var h=this;f.forEach(function(d){var g=(0,On.Z)(d,2),S=g[0],C=g[1];h.fontService.addIconFont(S,C)})}},{key:"addFontFace",value:function(f,h){var d=this;this.fontService.once("fontloaded",function(g){d.emit("fontloaded",g)}),this.fontService.addFontFace(f,h)}},{key:"addImage",value:function(){var c=(0,Fe.Z)(B().mark(function h(d,g){return B().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.iconService.addImage(d,g);case 2:case"end":return C.stop()}},h,this)}));function f(h,d){return c.apply(this,arguments)}return f}()},{key:"hasImage",value:function(f){return this.iconService.hasImage(f)}},{key:"removeImage",value:function(f){this.iconService.removeImage(f)}},{key:"addIconFontGlyphs",value:function(f,h){this.fontService.addIconGlyphs(h)}},{key:"addControl",value:function(f){this.controlService.addControl(f,this.container)}},{key:"removeControl",value:function(f){this.controlService.removeControl(f)}},{key:"getControlByName",value:function(f){return this.controlService.getControlByName(f)}},{key:"addMarker",value:function(f){this.markerService.addMarker(f)}},{key:"addMarkerLayer",value:function(f){this.markerService.addMarkerLayer(f)}},{key:"removeMarkerLayer",value:function(f){this.markerService.removeMarkerLayer(f)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(f){this.popupService.addPopup(f)}},{key:"removePopup",value:function(f){this.popupService.removePopup(f)}},{key:"on",value:function(f,h){if(am.includes(f)){var d;(d=this.boxSelect)===null||d===void 0||d.on(f,h)}else Ae.P7.includes(f)?this.sceneService.on(f,h):this.mapService.on(f,h)}},{key:"once",value:function(f,h){if(am.includes(f)){var d;(d=this.boxSelect)===null||d===void 0||d.once(f,h)}else Ae.P7.includes(f)?this.sceneService.once(f,h):this.mapService.once(f,h)}},{key:"emit",value:function(f,h){Ae.P7.indexOf(f)===-1?this.mapService.on(f,h):this.sceneService.emit(f,h)}},{key:"off",value:function(f,h){if(am.includes(f)){var d;(d=this.boxSelect)===null||d===void 0||d.off(f,h)}else Ae.P7.includes(f)?this.sceneService.off(f,h):this.mapService.off(f,h)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(f){return this.mapService.getCenter(f)}},{key:"setCenter",value:function(f,h){return this.mapService.setCenter(f,h)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(f){return this.mapService.setPitch(f)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(f){this.mapService.setRotation(f)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(f){this.mapService.panTo(f)}},{key:"panBy",value:function(f,h){this.mapService.panBy(f,h)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(f){this.mapService.setZoom(f)}},{key:"fitBounds",value:function(f,h){var d=this.sceneService.getSceneConfig(),g=d.fitBoundsOptions,S=d.animate;this.mapService.fitBounds(f,h||(0,De.Z)((0,De.Z)({},g),{},{animate:S}))}},{key:"setZoomAndCenter",value:function(f,h){this.mapService.setZoomAndCenter(f,h)}},{key:"setMapStyle",value:function(f){this.mapService.setMapStyle(f)}},{key:"setMapStatus",value:function(f){this.mapService.setMapStatus(f)}},{key:"pixelToLngLat",value:function(f){return this.mapService.pixelToLngLat(f)}},{key:"lngLatToPixel",value:function(f){return this.mapService.lngLatToPixel(f)}},{key:"containerToLngLat",value:function(f){return this.mapService.containerToLngLat(f)}},{key:"lngLatToContainer",value:function(f){return this.mapService.lngLatToContainer(f)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(f){this.container.postProcessingPass.name=new f}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var f=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),h&&this.boxSelect.once("selectend",function(){f.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getProtocol",value:function(f){return Ve.SA.REGISTERED_PROTOCOLS[f]}},{key:"startAnimate",value:function(){this.layerService.startAnimate()}},{key:"stopAnimate",value:function(){this.layerService.stopAnimate()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(f){this.controlService.init({container:Ve.SO.getContainer(f)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var f=this.sceneService.getSceneConfig(),h=f.logoVisible,d=f.logoPosition;h&&this.addControl(new fd({position:d}))}},{key:"initTileLayer",value:function(f){f.getSource().isTile&&(f.tileLayer=new BO(f))}}],[{key:"addProtocol",value:function(f,h){Ve.SA.REGISTERED_PROTOCOLS[f]=h}},{key:"removeProtocol",value:function(f){delete Ve.SA.REGISTERED_PROTOCOLS[f]}}]),o}(),H5="2.21.0"},81957:function(It,G){"use strict";var D=function(ee,ae,T){return ee<ae?ae:ee>T?T:ee};G.Z=D},95147:function(It,G){"use strict";var D=function(ee){return ee==null};G.Z=D},25897:function(It,G,D){"use strict";var ee=D(95456),ae=function(T){return(0,ee.Z)(T,"Number")};G.Z=ae},95456:function(It,G){"use strict";var D={}.toString,ee=function(ae,T){return D.call(ae)==="[object "+T+"]"};G.Z=ee},131:function(It,G,D){"use strict";D.r(G),D.d(G,{TinyColor:function(){return ee.C},bounds:function(){return Rt},convertDecimalToHex:function(){return ge.Wl},convertHexToDecimal:function(){return ge.T6},default:function(){return Tt},fromRatio:function(){return he},hslToRgb:function(){return ge.ve},hsvToRgb:function(){return ge.WE},inputToRGB:function(){return re.uA},isReadable:function(){return ne},isValidCSSUnit:function(){return re.ky},legacyRandom:function(){return st},mostReadable:function(){return Q},names:function(){return ae.R},numberInputToObject:function(){return ge.Yt},parseIntFromHex:function(){return ge.VD},random:function(){return Se},readability:function(){return T},rgbToHex:function(){return ge.vq},rgbToHsl:function(){return ge.lC},rgbToHsv:function(){return ge.py},rgbToRgb:function(){return ge.rW},rgbaToArgbHex:function(){return ge.GC},rgbaToHex:function(){return ge.s},stringInputToObject:function(){return re.uz},tinycolor:function(){return ee.H},toMsFilter:function(){return pe}});var ee=D(10274),ae=D(48701);function T(Ze,Ie){var Qe=new ee.C(Ze),it=new ee.C(Ie);return(Math.max(Qe.getLuminance(),it.getLuminance())+.05)/(Math.min(Qe.getLuminance(),it.getLuminance())+.05)}function ne(Ze,Ie,Qe){var it,De;Qe===void 0&&(Qe={level:"AA",size:"small"});var cn=T(Ze,Ie);switch(((it=Qe.level)!==null&&it!==void 0?it:"AA")+((De=Qe.size)!==null&&De!==void 0?De:"small")){case"AAsmall":case"AAAlarge":return cn>=4.5;case"AAlarge":return cn>=3;case"AAAsmall":return cn>=7;default:return!1}}function Q(Ze,Ie,Qe){Qe===void 0&&(Qe={includeFallbackColors:!1,level:"AA",size:"small"});for(var it=null,De=0,cn=Qe.includeFallbackColors,qe=Qe.level,Pt=Qe.size,Le=0,pt=Ie;Le<pt.length;Le++){var at=pt[Le],nt=T(Ze,at);nt>De&&(De=nt,it=new ee.C(at))}return ne(Ze,it,{level:qe,size:Pt})||!cn?it:(Qe.includeFallbackColors=!1,Q(Ze,["#fff","#000"],Qe))}var ge=D(86500);function pe(Ze,Ie){var Qe=new ee.C(Ze),it="#"+(0,ge.GC)(Qe.r,Qe.g,Qe.b,Qe.a),De=it,cn=Qe.gradientType?"GradientType = 1, ":"";if(Ie){var qe=new ee.C(Ie);De="#"+(0,ge.GC)(qe.r,qe.g,qe.b,qe.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(cn,"startColorstr=").concat(it,",endColorstr=").concat(De,")")}var Ce=D(90279);function he(Ze,Ie){var Qe={r:(0,Ce.JX)(Ze.r),g:(0,Ce.JX)(Ze.g),b:(0,Ce.JX)(Ze.b)};return Ze.a!==void 0&&(Qe.a=Number(Ze.a)),new ee.C(Qe,Ie)}function st(){return new ee.C({r:Math.random(),g:Math.random(),b:Math.random()})}var re=D(1350);function Se(Ze){if(Ze===void 0&&(Ze={}),Ze.count!==void 0&&Ze.count!==null){var Ie=Ze.count,Qe=[];for(Ze.count=void 0;Ie>Qe.length;)Ze.count=null,Ze.seed&&(Ze.seed+=1),Qe.push(Se(Ze));return Ze.count=Ie,Qe}var it=se(Ze.hue,Ze.seed),De=de(it,Ze),cn=xe(it,De,Ze),qe={h:it,s:De,v:cn};return Ze.alpha!==void 0&&(qe.a=Ze.alpha),new ee.C(qe)}function se(Ze,Ie){var Qe=Ue(Ze),it=mt(Qe,Ie);return it<0&&(it=360+it),it}function de(Ze,Ie){if(Ie.hue==="monochrome")return 0;if(Ie.luminosity==="random")return mt([0,100],Ie.seed);var Qe=Et(Ze).saturationRange,it=Qe[0],De=Qe[1];switch(Ie.luminosity){case"bright":it=55;break;case"dark":it=De-10;break;case"light":De=55;break;default:break}return mt([it,De],Ie.seed)}function xe(Ze,Ie,Qe){var it=le(Ze,Ie),De=100;switch(Qe.luminosity){case"dark":De=it+20;break;case"light":it=(De+it)/2;break;case"random":it=0,De=100;break;default:break}return mt([it,De],Qe.seed)}function le(Ze,Ie){for(var Qe=Et(Ze).lowerBounds,it=0;it<Qe.length-1;it++){var De=Qe[it][0],cn=Qe[it][1],qe=Qe[it+1][0],Pt=Qe[it+1][1];if(Ie>=De&&Ie<=qe){var Le=(Pt-cn)/(qe-De),pt=cn-Le*De;return Le*Ie+pt}}return 0}function Ue(Ze){var Ie=parseInt(Ze,10);if(!Number.isNaN(Ie)&&Ie<360&&Ie>0)return[Ie,Ie];if(typeof Ze=="string"){var Qe=Rt.find(function(qe){return qe.name===Ze});if(Qe){var it=Wt(Qe);if(it.hueRange)return it.hueRange}var De=new ee.C(Ze);if(De.isValid){var cn=De.toHsv().h;return[cn,cn]}}return[0,360]}function Et(Ze){Ze>=334&&Ze<=360&&(Ze-=360);for(var Ie=0,Qe=Rt;Ie<Qe.length;Ie++){var it=Qe[Ie],De=Wt(it);if(De.hueRange&&Ze>=De.hueRange[0]&&Ze<=De.hueRange[1])return De}throw Error("Color not found")}function mt(Ze,Ie){if(Ie===void 0)return Math.floor(Ze[0]+Math.random()*(Ze[1]+1-Ze[0]));var Qe=Ze[1]||1,it=Ze[0]||0;Ie=(Ie*9301+49297)%233280;var De=Ie/233280;return Math.floor(it+De*(Qe-it))}function Wt(Ze){var Ie=Ze.lowerBounds[0][0],Qe=Ze.lowerBounds[Ze.lowerBounds.length-1][0],it=Ze.lowerBounds[Ze.lowerBounds.length-1][1],De=Ze.lowerBounds[0][1];return{name:Ze.name,hueRange:Ze.hueRange,lowerBounds:Ze.lowerBounds,saturationRange:[Ie,Qe],brightnessRange:[it,De]}}var Rt=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],Tt=ee.H},38163:function(It){It.exports=G;function G(ae,T){var ne=ae&&ae.type,Q;if(ne==="FeatureCollection")for(Q=0;Q<ae.features.length;Q++)G(ae.features[Q],T);else if(ne==="GeometryCollection")for(Q=0;Q<ae.geometries.length;Q++)G(ae.geometries[Q],T);else if(ne==="Feature")G(ae.geometry,T);else if(ne==="Polygon")D(ae.coordinates,T);else if(ne==="MultiPolygon")for(Q=0;Q<ae.coordinates.length;Q++)D(ae.coordinates[Q],T);return ae}function D(ae,T){if(ae.length!==0){ee(ae[0],T);for(var ne=1;ne<ae.length;ne++)ee(ae[ne],!T)}}function ee(ae,T){for(var ne=0,Q=0,ge=0,pe=ae.length,Ce=pe-1;ge<pe;Ce=ge++){var he=(ae[ge][0]-ae[Ce][0])*(ae[Ce][1]+ae[ge][1]),st=ne+he;Q+=Math.abs(ne)>=Math.abs(he)?ne-st+he:he-st+ne,ne=st}ne+Q>=0!=!!T&&ae.reverse()}},75550:function(It){"use strict";It.exports=G;function G(D,ee){this.x=D,this.y=ee}G.prototype={clone:function(){return new G(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,ee){return this.clone()._rotateAround(D,ee)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var ee=D.x-this.x,ae=D.y-this.y;return ee*ee+ae*ae},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,ee){return Math.atan2(this.x*ee-this.y*D,this.x*D+this.y*ee)},_matMult:function(D){var ee=D[0]*this.x+D[1]*this.y,ae=D[2]*this.x+D[3]*this.y;return this.x=ee,this.y=ae,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var ee=Math.cos(D),ae=Math.sin(D),T=ee*this.x-ae*this.y,ne=ae*this.x+ee*this.y;return this.x=T,this.y=ne,this},_rotateAround:function(D,ee){var ae=Math.cos(D),T=Math.sin(D),ne=ee.x+ae*(this.x-ee.x)-T*(this.y-ee.y),Q=ee.y+T*(this.x-ee.x)+ae*(this.y-ee.y);return this.x=ne,this.y=Q,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},G.convert=function(D){return D instanceof G?D:Array.isArray(D)?new G(D[0],D[1]):D}},49296:function(It){"use strict";It.exports=D,It.exports.default=D;var G=1e20;function D(Q,ge,pe,Ce,he,st){this.fontSize=Q||24,this.buffer=ge===void 0?3:ge,this.cutoff=Ce||.25,this.fontFamily=he||"sans-serif",this.fontWeight=st||"normal",this.radius=pe||8;var re=this.size=this.fontSize+this.buffer*2,Se=re+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=re,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Se*Se),this.gridInner=new Float64Array(Se*Se),this.f=new Float64Array(Se),this.z=new Float64Array(Se+1),this.v=new Uint16Array(Se),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(re/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ee(Q,ge,pe,Ce,he,st,re){st.fill(G,0,ge*pe),re.fill(0,0,ge*pe);for(var Se=(ge-Ce)/2,se=0;se<he;se++)for(var de=0;de<Ce;de++){var xe=(se+Se)*ge+de+Se,le=Q.data[4*(se*Ce+de)+3]/255;if(le===1)st[xe]=0,re[xe]=G;else if(le===0)st[xe]=G,re[xe]=0;else{var Ue=Math.max(0,.5-le),Et=Math.max(0,le-.5);st[xe]=Ue*Ue,re[xe]=Et*Et}}}function ae(Q,ge,pe,Ce,he,st,re){for(var Se=0;Se<ge*pe;Se++){var se=Math.sqrt(Ce[Se])-Math.sqrt(he[Se]);Q[Se]=Math.round(255-255*(se/st+re))}}D.prototype._draw=function(Q,ge){var pe=this.ctx.measureText(Q),Ce=pe.width,he=2*this.buffer,st,re,Se,se,de,xe,le,Ue;ge&&this.useMetrics?(de=Math.floor(pe.actualBoundingBoxAscent),Ue=this.buffer+Math.ceil(pe.actualBoundingBoxAscent),xe=this.buffer,le=this.buffer,re=Math.min(this.size,Math.ceil(pe.actualBoundingBoxRight-pe.actualBoundingBoxLeft)),se=Math.min(this.size-xe,Math.ceil(pe.actualBoundingBoxAscent+pe.actualBoundingBoxDescent)),st=re+he,Se=se+he,this.ctx.textBaseline="alphabetic"):(st=re=this.size,Se=se=this.size,de=19*this.fontSize/24,xe=le=0,Ue=this.middle,this.ctx.textBaseline="middle");var Et;re&&se&&(this.ctx.clearRect(le,xe,re,se),this.ctx.fillText(Q,this.buffer,Ue),Et=this.ctx.getImageData(le,xe,re,se));var mt=new Uint8ClampedArray(st*Se);return ee(Et,st,Se,re,se,this.gridOuter,this.gridInner),T(this.gridOuter,st,Se,this.f,this.v,this.z),T(this.gridInner,st,Se,this.f,this.v,this.z),ae(mt,st,Se,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:mt,metrics:{width:re,height:se,sdfWidth:st,sdfHeight:Se,top:de,left:0,advance:Ce}}},D.prototype.draw=function(Q){return this._draw(Q,!1).data},D.prototype.drawWithMetrics=function(Q){return this._draw(Q,!0)};function T(Q,ge,pe,Ce,he,st){for(var re=0;re<ge;re++)ne(Q,re,ge,pe,Ce,he,st);for(var Se=0;Se<pe;Se++)ne(Q,Se*ge,1,ge,Ce,he,st)}function ne(Q,ge,pe,Ce,he,st,re){var Se,se,de,xe;for(st[0]=0,re[0]=-G,re[1]=G,Se=0;Se<Ce;Se++)he[Se]=Q[ge+Se*pe];for(Se=1,se=0,de=0;Se<Ce;Se++){do xe=st[se],de=(he[Se]-he[xe]+Se*Se-xe*xe)/(Se-xe)/2;while(de<=re[se]&&--se>-1);se++,st[se]=Se,re[se]=de,re[se+1]=G}for(Se=0,se=0;Se<Ce;Se++){for(;re[se+1]<Se;)se++;xe=st[se],Q[ge+Se*pe]=he[xe]+(Se-xe)*(Se-xe)}}},38929:function(It,G,D){It.exports.VectorTile=D(22779),D(66024),D(59701)},22779:function(It,G,D){"use strict";var ee=D(59701);It.exports=ae;function ae(ne,Q){this.layers=ne.readFields(T,{},Q)}function T(ne,Q,ge){if(ne===3){var pe=new ee(ge,ge.readVarint()+ge.pos);pe.length&&(Q[pe.name]=pe)}}},66024:function(It,G,D){"use strict";var ee=D(75550);It.exports=ae;function ae(pe,Ce,he,st,re){this.properties={},this.extent=he,this.type=0,this._pbf=pe,this._geometry=-1,this._keys=st,this._values=re,pe.readFields(T,this,Ce)}function T(pe,Ce,he){pe==1?Ce.id=he.readVarint():pe==2?ne(he,Ce):pe==3?Ce.type=he.readVarint():pe==4&&(Ce._geometry=he.pos)}function ne(pe,Ce){for(var he=pe.readVarint()+pe.pos;pe.pos<he;){var st=Ce._keys[pe.readVarint()],re=Ce._values[pe.readVarint()];Ce.properties[st]=re}}ae.types=["Unknown","Point","LineString","Polygon"],ae.prototype.loadGeometry=function(){var pe=this._pbf;pe.pos=this._geometry;for(var Ce=pe.readVarint()+pe.pos,he=1,st=0,re=0,Se=0,se=[],de;pe.pos<Ce;){if(st<=0){var xe=pe.readVarint();he=xe&7,st=xe>>3}if(st--,he===1||he===2)re+=pe.readSVarint(),Se+=pe.readSVarint(),he===1&&(de&&se.push(de),de=[]),de.push(new ee(re,Se));else if(he===7)de&&de.push(de[0].clone());else throw new Error("unknown command "+he)}return de&&se.push(de),se},ae.prototype.bbox=function(){var pe=this._pbf;pe.pos=this._geometry;for(var Ce=pe.readVarint()+pe.pos,he=1,st=0,re=0,Se=0,se=1/0,de=-1/0,xe=1/0,le=-1/0;pe.pos<Ce;){if(st<=0){var Ue=pe.readVarint();he=Ue&7,st=Ue>>3}if(st--,he===1||he===2)re+=pe.readSVarint(),Se+=pe.readSVarint(),re<se&&(se=re),re>de&&(de=re),Se<xe&&(xe=Se),Se>le&&(le=Se);else if(he!==7)throw new Error("unknown command "+he)}return[se,xe,de,le]},ae.prototype.toGeoJSON=function(pe,Ce,he){var st=this.extent*Math.pow(2,he),re=this.extent*pe,Se=this.extent*Ce,se=this.loadGeometry(),de=ae.types[this.type],xe,le;function Ue(Wt){for(var Rt=0;Rt<Wt.length;Rt++){var Tt=Wt[Rt],Ze=180-(Tt.y+Se)*360/st;Wt[Rt]=[(Tt.x+re)*360/st-180,360/Math.PI*Math.atan(Math.exp(Ze*Math.PI/180))-90]}}switch(this.type){case 1:var Et=[];for(xe=0;xe<se.length;xe++)Et[xe]=se[xe][0];se=Et,Ue(se);break;case 2:for(xe=0;xe<se.length;xe++)Ue(se[xe]);break;case 3:for(se=Q(se),xe=0;xe<se.length;xe++)for(le=0;le<se[xe].length;le++)Ue(se[xe][le]);break}se.length===1?se=se[0]:de="Multi"+de;var mt={type:"Feature",geometry:{type:de,coordinates:se},properties:this.properties};return"id"in this&&(mt.id=this.id),mt};function Q(pe){var Ce=pe.length;if(Ce<=1)return[pe];for(var he=[],st,re,Se=0;Se<Ce;Se++){var se=ge(pe[Se]);se!==0&&(re===void 0&&(re=se<0),re===se<0?(st&&he.push(st),st=[pe[Se]]):st.push(pe[Se]))}return st&&he.push(st),he}function ge(pe){for(var Ce=0,he=0,st=pe.length,re=st-1,Se,se;he<st;re=he++)Se=pe[he],se=pe[re],Ce+=(se.x-Se.x)*(Se.y+se.y);return Ce}},59701:function(It,G,D){"use strict";var ee=D(66024);It.exports=ae;function ae(Q,ge){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=Q,this._keys=[],this._values=[],this._features=[],Q.readFields(T,this,ge),this.length=this._features.length}function T(Q,ge,pe){Q===15?ge.version=pe.readVarint():Q===1?ge.name=pe.readString():Q===5?ge.extent=pe.readVarint():Q===2?ge._features.push(pe.pos):Q===3?ge._keys.push(pe.readString()):Q===4&&ge._values.push(ne(pe))}function ne(Q){for(var ge=null,pe=Q.readVarint()+Q.pos;Q.pos<pe;){var Ce=Q.readVarint()>>3;ge=Ce===1?Q.readString():Ce===2?Q.readFloat():Ce===3?Q.readDouble():Ce===4?Q.readVarint64():Ce===5?Q.readVarint():Ce===6?Q.readSVarint():Ce===7?Q.readBoolean():null}return ge}ae.prototype.feature=function(Q){if(Q<0||Q>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[Q];var ge=this._pbf.readVarint()+this._pbf.pos;return new ee(this._pbf,ge,this.extent,this._keys,this._values)}},45471:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.PresetStatusColorTypes=void 0,G.isPresetColor=ge,G.isPresetStatusColor=pe;var ae=ee(D(861)),T=D(36496);const ne=T.PresetColors.map(Ce=>`${Ce}-inverse`),Q=G.PresetStatusColorTypes=["success","processing","error","default","warning"];function ge(Ce){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,ae.default)(ne),(0,ae.default)(T.PresetColors)).includes(Ce):T.PresetColors.includes(Ce)}function pe(Ce){return Q.includes(Ce)}},49314:function(It,G,D){"use strict";"use client";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(67294)),T=ee(D(43273));const ne=ge=>{let pe;return typeof ge=="object"&&(ge!=null&&ge.clearIcon)?pe=ge:ge&&(pe={clearIcon:ae.default.createElement(T.default,null)}),pe};var Q=G.default=ne},56333:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.containerBaseZIndexOffset=G.consumerBaseZIndexOffset=G.CONTAINER_MAX_OFFSET=void 0,G.useZIndex=re;var ae=ee(D(67294)),T=ee(D(41401)),ne=ee(D(96877));const Q=100,ge=10,pe=G.CONTAINER_MAX_OFFSET=Q*ge,Ce=G.containerBaseZIndexOffset={Modal:Q,Drawer:Q,Popover:Q,Popconfirm:Q,Tooltip:Q,Tour:Q},he=G.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function st(Se){return Se in Ce}function re(Se,se){const[,de]=(0,T.default)(),xe=ae.default.useContext(ne.default),le=st(Se);if(se!==void 0)return[se,se];let Ue=xe!=null?xe:0;return le?(Ue+=(xe?0:de.zIndexPopupBase)+Ce[Se],Ue=Math.min(Ue,de.zIndexPopupBase+pe)):Ue+=he[Se],[xe===void 0?se:Ue,Ue]}},53683:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getTransitionName=G.default=void 0;const D=()=>({height:0,opacity:0}),ee=Ce=>{const{scrollHeight:he}=Ce;return{height:he,opacity:1}},ae=Ce=>({height:Ce?Ce.offsetHeight:0}),T=(Ce,he)=>(he==null?void 0:he.deadline)===!0||he.propertyName==="height",ne=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:D,onEnterStart:D,onAppearActive:ee,onEnterActive:ee,onLeaveStart:ae,onLeaveActive:D,onAppearEnd:T,onEnterEnd:T,onLeaveEnd:T,motionDeadline:500}},Q=null,ge=(Ce,he,st)=>st!==void 0?st:`${Ce}-${he}`;G.getTransitionName=ge;var pe=G.default=ne},74132:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ge,G.getOverflowOptions=ae;var ee=D(9064);function ae(pe,Ce,he,st){if(st===!1)return{adjustX:!1,adjustY:!1};const re=st&&typeof st=="object"?st:{},Se={};switch(pe){case"top":case"bottom":Se.shiftX=Ce.arrowOffsetHorizontal*2+he,Se.shiftY=!0,Se.adjustY=!0;break;case"left":case"right":Se.shiftY=Ce.arrowOffsetVertical*2+he,Se.shiftX=!0,Se.adjustX=!0;break}const se=Object.assign(Object.assign({},Se),re);return se.shiftX||(se.adjustX=!0),se.shiftY||(se.adjustY=!0),se}const T={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},ne={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Q=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function ge(pe){const{arrowWidth:Ce,autoAdjustOverflow:he,arrowPointAtCenter:st,offset:re,borderRadius:Se,visibleFirst:se}=pe,de=Ce/2,xe={};return Object.keys(T).forEach(le=>{const Ue=st&&ne[le]||T[le],Et=Object.assign(Object.assign({},Ue),{offset:[0,0],dynamicInset:!0});switch(xe[le]=Et,Q.has(le)&&(Et.autoArrow=!1),le){case"top":case"topLeft":case"topRight":Et.offset[1]=-de-re;break;case"bottom":case"bottomLeft":case"bottomRight":Et.offset[1]=de+re;break;case"left":case"leftTop":case"leftBottom":Et.offset[0]=-de-re;break;case"right":case"rightTop":case"rightBottom":Et.offset[0]=de+re;break}const mt=(0,ee.getArrowOffsetToken)({contentRadius:Se,limitVerticalRadius:!0});if(st)switch(le){case"topLeft":case"bottomLeft":Et.offset[0]=-mt.arrowOffsetHorizontal-de;break;case"topRight":case"bottomRight":Et.offset[0]=mt.arrowOffsetHorizontal+de;break;case"leftTop":case"rightTop":Et.offset[1]=-mt.arrowOffsetHorizontal-de;break;case"leftBottom":case"rightBottom":Et.offset[1]=mt.arrowOffsetHorizontal+de;break}Et.overflow=ae(le,mt,Ce,he),se&&(Et.htmlRegion="visibleFirst")}),xe}},47419:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.cloneElement=Q,G.isFragment=T,G.replaceElement=void 0;var ae=ee(D(67294));function T(ge){return ge&&ae.default.isValidElement(ge)&&ge.type===ae.default.Fragment}const ne=(ge,pe,Ce)=>ae.default.isValidElement(ge)?ae.default.cloneElement(ge,typeof Ce=="function"?Ce(ge.props||{}):Ce):pe;G.replaceElement=ne;function Q(ge,pe){return ne(ge,ge,pe)}},71434:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getMergedStatus=void 0,G.getStatusClassNames=ne;var ae=ee(D(93967));const T=null;function ne(ge,pe,Ce){return(0,ae.default)({[`${ge}-status-success`]:pe==="success",[`${ge}-status-warning`]:pe==="warning",[`${ge}-status-error`]:pe==="error",[`${ge}-status-validating`]:pe==="validating",[`${ge}-has-feedback`]:Ce})}const Q=(ge,pe)=>pe||ge;G.getMergedStatus=Q},38882:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.canUseDocElement=void 0,Object.defineProperty(G,"isStyleSupport",{enumerable:!0,get:function(){return T.isStyleSupport}});var ae=ee(D(19158)),T=D(3481);const ne=()=>(0,ae.default)()&&window.document.documentElement;G.canUseDocElement=ne},60938:function(It,G,D){"use strict";"use client";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(27712)),ne=ee(D(67294)),Q=function(he,st){var re={};for(var Se in he)Object.prototype.hasOwnProperty.call(he,Se)&&st.indexOf(Se)<0&&(re[Se]=he[Se]);if(he!=null&&typeof Object.getOwnPropertySymbols=="function")for(var se=0,Se=Object.getOwnPropertySymbols(he);se<Se.length;se++)st.indexOf(Se[se])<0&&Object.prototype.propertyIsEnumerable.call(he,Se[se])&&(re[Se[se]]=he[Se[se]]);return re};const ge={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},pe=ne.forwardRef((he,st)=>{const re=Et=>{const{keyCode:mt}=Et;mt===T.default.ENTER&&Et.preventDefault()},Se=Et=>{const{keyCode:mt}=Et,{onClick:Wt}=he;mt===T.default.ENTER&&Wt&&Wt()},{style:se,noStyle:de,disabled:xe}=he,le=Q(he,["style","noStyle","disabled"]);let Ue={};return de||(Ue=Object.assign({},ge)),xe&&(Ue.pointerEvents="none"),Ue=Object.assign(Object.assign({},Ue),se),ne.createElement("div",Object.assign({role:"button",tabIndex:0,ref:st},le,{onKeyDown:re,onKeyUp:Se,style:Ue}))});var Ce=G.default=pe},13594:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.devUseWarning=G.default=G.WarningContext=void 0,G.noop=ne,G.resetWarned=ge;var ae=ee(D(67294)),T=ee(D(45520));function ne(){}let Q=null;function ge(){Q=null,(0,T.resetWarned)()}let pe=ne;const Ce=G.WarningContext=ae.createContext({}),he=G.devUseWarning=()=>{const re=()=>{};return re.deprecated=ne,re};var st=G.default=pe},96877:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(67294));const T=ae.default.createContext(void 0);var ne=G.default=T},1028:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(25633)),T=G.default=ae.default},93319:function(It,G,D){"use strict";"use client";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.DisabledContextProvider=void 0;var ae=ee(D(67294));const T=ae.createContext(!1),ne=ge=>{let{children:pe,disabled:Ce}=ge;const he=ae.useContext(T);return ae.createElement(T.Provider,{value:Ce!=null?Ce:he},pe)};G.DisabledContextProvider=ne;var Q=G.default=T},16722:function(It,G,D){"use strict";"use client";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=Q;var ae=D(82225),T=ee(D(67294)),ne=D(3184);function Q(ge){const{children:pe}=ge,[,Ce]=(0,ne.useToken)(),{motion:he}=Ce,st=T.useRef(!1);return st.current=st.current||he===!1,st.current?T.createElement(ae.Provider,{motion:he},pe):pe}},11380:function(It,G,D){"use strict";"use client";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(67294)),T=D(13594);const ne=null;var Q=G.default=()=>null},3236:function(It,G,D){"use strict";"use client";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.SizeContextProvider=void 0;var ae=ee(D(67294));const T=ae.createContext(void 0),ne=ge=>{let{children:pe,size:Ce}=ge;const he=ae.useContext(T);return ae.createElement(T.Provider,{value:Ce||he},pe)};G.SizeContextProvider=ne;var Q=G.default=T},7177:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.defaultIconPrefixCls=G.ConfigContext=G.ConfigConsumer=void 0;var ae=ee(D(67294));const T=G.defaultIconPrefixCls="anticon",ne=(pe,Ce)=>Ce||(pe?`ant-${pe}`:"ant"),Q=G.ConfigContext=ae.createContext({getPrefixCls:ne,iconPrefixCls:T}),{Consumer:ge}=Q;G.ConfigConsumer=ge},56301:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getStyle=Ce,G.registerTheme=he;var ae=D(78589),T=D(131),ne=ee(D(19158)),Q=D(93399),ge=ee(D(13594));const pe=`-ant-${Date.now()}-${Math.random()}`;function Ce(st,re){const Se={},se=(le,Ue)=>{let Et=le.clone();return Et=(Ue==null?void 0:Ue(Et))||Et,Et.toRgbString()},de=(le,Ue)=>{const Et=new T.TinyColor(le),mt=(0,ae.generate)(Et.toRgbString());Se[`${Ue}-color`]=se(Et),Se[`${Ue}-color-disabled`]=mt[1],Se[`${Ue}-color-hover`]=mt[4],Se[`${Ue}-color-active`]=mt[6],Se[`${Ue}-color-outline`]=Et.clone().setAlpha(.2).toRgbString(),Se[`${Ue}-color-deprecated-bg`]=mt[0],Se[`${Ue}-color-deprecated-border`]=mt[2]};if(re.primaryColor){de(re.primaryColor,"primary");const le=new T.TinyColor(re.primaryColor),Ue=(0,ae.generate)(le.toRgbString());Ue.forEach((mt,Wt)=>{Se[`primary-${Wt+1}`]=mt}),Se["primary-color-deprecated-l-35"]=se(le,mt=>mt.lighten(35)),Se["primary-color-deprecated-l-20"]=se(le,mt=>mt.lighten(20)),Se["primary-color-deprecated-t-20"]=se(le,mt=>mt.tint(20)),Se["primary-color-deprecated-t-50"]=se(le,mt=>mt.tint(50)),Se["primary-color-deprecated-f-12"]=se(le,mt=>mt.setAlpha(mt.getAlpha()*.12));const Et=new T.TinyColor(Ue[0]);Se["primary-color-active-deprecated-f-30"]=se(Et,mt=>mt.setAlpha(mt.getAlpha()*.3)),Se["primary-color-active-deprecated-d-02"]=se(Et,mt=>mt.darken(2))}return re.successColor&&de(re.successColor,"success"),re.warningColor&&de(re.warningColor,"warning"),re.errorColor&&de(re.errorColor,"error"),re.infoColor&&de(re.infoColor,"info"),`
  :root {
    ${Object.keys(Se).map(le=>`--${st}-${le}: ${Se[le]};`).join(`
`)}
  }
  `.trim()}function he(st,re){const Se=Ce(st,re);(0,ne.default)()&&(0,Q.updateCSS)(Se,`${pe}-dynamic-theme`)}},14893:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ee=D(3184);const ae=ne=>{const[,,,,Q]=(0,ee.useToken)();return Q?`${ne}-css-var`:""};var T=G.default=ae},5819:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=D(67294),T=ee(D(93319)),ne=ee(D(3236));function Q(){const pe=(0,ae.useContext)(T.default),Ce=(0,ae.useContext)(ne.default);return{componentDisabled:pe,componentSize:Ce}}var ge=G.default=Q},65693:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(67294)),T=ee(D(3236));const ne=ge=>{const pe=ae.default.useContext(T.default);return ae.default.useMemo(()=>ge?typeof ge=="string"?ge!=null?ge:pe:ge instanceof Function?ge(pe):pe:pe,[ge,pe])};var Q=G.default=ne},25494:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=pe;var ae=ee(D(67265)),T=ee(D(11102)),ne=D(3184),Q=ee(D(78459)),ge=D(13594);function pe(Ce,he,st){var re,Se;const se=(0,ge.devUseWarning)("ConfigProvider"),de=Ce||{},xe=de.inherit===!1||!he?Object.assign(Object.assign({},ne.defaultConfig),{hashed:(re=he==null?void 0:he.hashed)!==null&&re!==void 0?re:ne.defaultConfig.hashed,cssVar:he==null?void 0:he.cssVar}):he,le=(0,Q.default)();return(0,ae.default)(()=>{var Ue,Et;if(!Ce)return he;const mt=Object.assign({},xe.components);Object.keys(Ce.components||{}).forEach(Tt=>{mt[Tt]=Object.assign(Object.assign({},mt[Tt]),Ce.components[Tt])});const Wt=`css-var-${le.replace(/:/g,"")}`,Rt=((Ue=de.cssVar)!==null&&Ue!==void 0?Ue:xe.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:st==null?void 0:st.prefixCls},typeof xe.cssVar=="object"?xe.cssVar:{}),typeof de.cssVar=="object"?de.cssVar:{}),{key:typeof de.cssVar=="object"&&((Et=de.cssVar)===null||Et===void 0?void 0:Et.key)||Wt});return Object.assign(Object.assign(Object.assign({},xe),de),{token:Object.assign(Object.assign({},xe.token),de.token),components:mt,cssVar:Rt})},[de,xe],(Ue,Et)=>Ue.some((mt,Wt)=>{const Rt=Et[Wt];return!(0,T.default)(mt,Rt,!0)}))}},78459:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(67294));const T=Object.assign({},ae),{useId:ne}=T,ge=typeof ne=="undefined"?()=>"":ne;var pe=G.default=ge},31929:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"ConfigConsumer",{enumerable:!0,get:function(){return xe.ConfigConsumer}}),Object.defineProperty(G,"ConfigContext",{enumerable:!0,get:function(){return xe.ConfigContext}}),G.default=G.configConsumerProps=void 0,Object.defineProperty(G,"defaultIconPrefixCls",{enumerable:!0,get:function(){return xe.defaultIconPrefixCls}}),G.warnContext=G.globalConfig=G.defaultPrefixCls=void 0;var T=ae(D(67294)),ne=D(6731),Q=ee(D(13357)),ge=ee(D(67265)),pe=D(20059),Ce=ae(D(13594)),he=ee(D(2197)),st=ae(D(24522)),re=ee(D(44805)),Se=ee(D(18253)),se=D(89329),de=ee(D(98411)),xe=D(7177),le=D(56301),Ue=D(93319),Et=ee(D(5819)),mt=ee(D(25494)),Wt=ee(D(16722)),Rt=ee(D(11380)),Tt=ae(D(3236)),Ze=ee(D(82932)),Ie=function(Qn,Ut){var En={};for(var Tn in Qn)Object.prototype.hasOwnProperty.call(Qn,Tn)&&Ut.indexOf(Tn)<0&&(En[Tn]=Qn[Tn]);if(Qn!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lr=0,Tn=Object.getOwnPropertySymbols(Qn);lr<Tn.length;lr++)Ut.indexOf(Tn[lr])<0&&Object.prototype.propertyIsEnumerable.call(Qn,Tn[lr])&&(En[Tn[lr]]=Qn[Tn[lr]]);return En};let Qe=!1;const it=G.warnContext=null,De=G.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],cn=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],qe=G.defaultPrefixCls="ant";let Pt,Le,pt,at;function nt(){return Pt||qe}function Ct(){return Le||xe.defaultIconPrefixCls}function rt(Qn){return Object.keys(Qn).some(Ut=>Ut.endsWith("Color"))}const vt=Qn=>{const{prefixCls:Ut,iconPrefixCls:En,theme:Tn,holderRender:lr}=Qn;Ut!==void 0&&(Pt=Ut),En!==void 0&&(Le=En),"holderRender"in Qn&&(at=lr),Tn&&(rt(Tn)?(0,le.registerTheme)(nt(),Tn):pt=Tn)},Ve=()=>({getPrefixCls:(Qn,Ut)=>Ut||(Qn?`${nt()}-${Qn}`:nt()),getIconPrefixCls:Ct,getRootPrefixCls:()=>Pt||nt(),getTheme:()=>pt,holderRender:at});G.globalConfig=Ve;const hn=Qn=>{const{children:Ut,csp:En,autoInsertSpaceInButton:Tn,alert:lr,anchor:ln,form:Lt,locale:bn,componentSize:Xe,direction:Fe,space:on,virtual:B,dropdownMatchSelectWidth:be,popupMatchSelectWidth:yt,popupOverflow:Ee,legacyLocale:Zt,parentContext:_n,iconPrefixCls:Sn,theme:Bn,componentDisabled:or,segmented:dr,statistic:gr,spin:wr,calendar:Ar,carousel:Ir,cascader:Nr,collapse:Yr,typography:bt,checkbox:ve,descriptions:ye,divider:Ke,drawer:ht,skeleton:xt,steps:Jt,image:Dn,layout:fr,list:In,mentions:ke,modal:Pe,progress:Ge,result:gt,slider:Bt,breadcrumb:an,menu:An,pagination:kt,input:Dt,textArea:dn,empty:He,badge:ei,radio:Tr,rate:ii,switch:Di,transfer:vi,avatar:Br,message:Gr,tag:bi,table:Ni,card:Qa,tabs:Xi,timeline:ao,timePicker:ko,upload:Ba,notification:mi,tree:Je,colorPicker:wt,datePicker:Kt,rangePicker:Mn,flex:Yn,wave:Gn,dropdown:Ht,warning:On,tour:Cr}=Qn,Er=T.useCallback((Bi,_a)=>{const{prefixCls:to}=Qn;if(_a)return _a;const Ae=to||_n.getPrefixCls("");return Bi?`${Ae}-${Bi}`:Ae},[_n.getPrefixCls,Qn.prefixCls]),gi=Sn||_n.iconPrefixCls||xe.defaultIconPrefixCls,aa=En||_n.csp;(0,Ze.default)(gi,aa);const ya=(0,mt.default)(Bn,_n.theme,{prefixCls:Er("")}),wi={csp:aa,autoInsertSpaceInButton:Tn,alert:lr,anchor:ln,locale:bn||Zt,direction:Fe,space:on,virtual:B,popupMatchSelectWidth:yt!=null?yt:be,popupOverflow:Ee,getPrefixCls:Er,iconPrefixCls:gi,theme:ya,segmented:dr,statistic:gr,spin:wr,calendar:Ar,carousel:Ir,cascader:Nr,collapse:Yr,typography:bt,checkbox:ve,descriptions:ye,divider:Ke,drawer:ht,skeleton:xt,steps:Jt,image:Dn,input:Dt,textArea:dn,layout:fr,list:In,mentions:ke,modal:Pe,progress:Ge,result:gt,slider:Bt,breadcrumb:an,menu:An,pagination:kt,empty:He,badge:ei,radio:Tr,rate:ii,switch:Di,transfer:vi,avatar:Br,message:Gr,tag:bi,table:Ni,card:Qa,tabs:Xi,timeline:ao,timePicker:ko,upload:Ba,notification:mi,tree:Je,colorPicker:wt,datePicker:Kt,rangePicker:Mn,flex:Yn,wave:Gn,dropdown:Ht,warning:On,tour:Cr},sa=Object.assign({},_n);Object.keys(wi).forEach(Bi=>{wi[Bi]!==void 0&&(sa[Bi]=wi[Bi])}),cn.forEach(Bi=>{const _a=Qn[Bi];_a&&(sa[Bi]=_a)});const $i=(0,ge.default)(()=>sa,sa,(Bi,_a)=>{const to=Object.keys(Bi),Ae=Object.keys(_a);return to.length!==Ae.length||to.some(ns=>Bi[ns]!==_a[ns])}),hi=T.useMemo(()=>({prefixCls:gi,csp:aa}),[gi,aa]);let fa=T.createElement(T.Fragment,null,T.createElement(Rt.default,{dropdownMatchSelectWidth:be}),Ut);const ea=T.useMemo(()=>{var Bi,_a,to,Ae;return(0,pe.merge)(((Bi=Se.default.Form)===null||Bi===void 0?void 0:Bi.defaultValidateMessages)||{},((to=(_a=$i.locale)===null||_a===void 0?void 0:_a.Form)===null||to===void 0?void 0:to.defaultValidateMessages)||{},((Ae=$i.form)===null||Ae===void 0?void 0:Ae.validateMessages)||{},(Lt==null?void 0:Lt.validateMessages)||{})},[$i,Lt==null?void 0:Lt.validateMessages]);Object.keys(ea).length>0&&(fa=T.createElement(he.default.Provider,{value:ea},fa)),bn&&(fa=T.createElement(st.default,{locale:bn,_ANT_MARK__:st.ANT_MARK},fa)),(gi||aa)&&(fa=T.createElement(Q.default.Provider,{value:hi},fa)),Xe&&(fa=T.createElement(Tt.SizeContextProvider,{size:Xe},fa)),fa=T.createElement(Wt.default,null,fa);const ka=T.useMemo(()=>{const Bi=ya||{},{algorithm:_a,token:to,components:Ae,cssVar:ns}=Bi,Oo=Ie(Bi,["algorithm","token","components","cssVar"]),Ms=_a&&(!Array.isArray(_a)||_a.length>0)?(0,ne.createTheme)(_a):se.defaultTheme,ps={};Object.entries(Ae||{}).forEach(sn=>{let[Jn,Xr]=sn;const Ii=Object.assign({},Xr);"algorithm"in Ii&&(Ii.algorithm===!0?Ii.theme=Ms:(Array.isArray(Ii.algorithm)||typeof Ii.algorithm=="function")&&(Ii.theme=(0,ne.createTheme)(Ii.algorithm)),delete Ii.algorithm),ps[Jn]=Ii});const jt=Object.assign(Object.assign({},de.default),to);return Object.assign(Object.assign({},Oo),{theme:Ms,token:jt,components:ps,override:Object.assign({override:jt},ps),cssVar:ns})},[ya]);return Bn&&(fa=T.createElement(se.DesignTokenContext.Provider,{value:ka},fa)),$i.warning&&(fa=T.createElement(Ce.WarningContext.Provider,{value:$i.warning},fa)),or!==void 0&&(fa=T.createElement(Ue.DisabledContextProvider,{disabled:or},fa)),T.createElement(xe.ConfigContext.Provider,{value:$i},fa)},yn=Qn=>{const Ut=T.useContext(xe.ConfigContext),En=T.useContext(re.default);return T.createElement(hn,Object.assign({parentContext:Ut,legacyLocale:En},Qn))};yn.ConfigContext=xe.ConfigContext,yn.SizeContext=Tt.default,yn.config=vt,yn.useConfig=Et.default,Object.defineProperty(yn,"SizeContext",{get:()=>Tt.default});var ir=G.default=yn},82932:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return ee.useResetIconStyle}});var ee=D(3184)},25633:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(27590)),T=ee(D(52040));const ne={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},ae.default),timePickerLocale:Object.assign({},T.default)};var Q=G.default=ne},51130:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.VariantContext=G.NoStyleItemContext=G.NoFormStyle=G.FormProvider=G.FormItemPrefixContext=G.FormItemInputContext=G.FormContext=void 0;var T=ae(D(67294)),ne=T,Q=D(43589),ge=ee(D(18475));const pe=G.FormContext=ne.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Ce=G.NoStyleItemContext=ne.createContext(null),he=de=>{const xe=(0,ge.default)(de,["prefixCls"]);return ne.createElement(Q.FormProvider,Object.assign({},xe))};G.FormProvider=he;const st=G.FormItemPrefixContext=ne.createContext({prefixCls:""}),re=G.FormItemInputContext=ne.createContext({}),Se=de=>{let{children:xe,status:le,override:Ue}=de;const Et=(0,T.useContext)(re),mt=(0,T.useMemo)(()=>{const Wt=Object.assign({},Et);return Ue&&delete Wt.isFormItemInput,le&&(delete Wt.status,delete Wt.hasFeedback,delete Wt.feedbackIcon),Wt},[le,Ue,Et]);return ne.createElement(re.Provider,{value:mt},xe)};G.NoFormStyle=Se;const se=G.VariantContext=(0,T.createContext)(void 0)},96424:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.Variants=void 0;var ee=D(67294),ae=D(51130);const T=G.Variants=["outlined","borderless","filled"],ne=function(ge){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const Ce=(0,ee.useContext)(ae.VariantContext);let he;typeof ge!="undefined"?he=ge:pe===!1?he="borderless":he=Ce!=null?Ce:"outlined";const st=T.includes(he);return[he,st]};var Q=G.default=ne},2197:function(It,G,D){"use strict";"use client";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ee=D(67294),ae=G.default=(0,ee.createContext)(void 0)},10815:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0,G.triggerFocus=Rt;var T=ae(D(67294)),ne=ee(D(93967)),Q=ee(D(67656)),ge=D(75531),pe=ee(D(49314)),Ce=D(71434),he=D(13594),st=D(31929),re=ee(D(93319)),Se=ee(D(14893)),se=ee(D(65693)),de=D(51130),xe=ee(D(96424)),le=D(46549),Ue=ee(D(81722)),Et=ee(D(89858)),mt=D(36714),Wt=function(Ie,Qe){var it={};for(var De in Ie)Object.prototype.hasOwnProperty.call(Ie,De)&&Qe.indexOf(De)<0&&(it[De]=Ie[De]);if(Ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var cn=0,De=Object.getOwnPropertySymbols(Ie);cn<De.length;cn++)Qe.indexOf(De[cn])<0&&Object.prototype.propertyIsEnumerable.call(Ie,De[cn])&&(it[De[cn]]=Ie[De[cn]]);return it};function Rt(Ie,Qe){if(!Ie)return;Ie.focus(Qe);const{cursor:it}=Qe||{};if(it){const De=Ie.value.length;switch(it){case"start":Ie.setSelectionRange(0,0);break;case"end":Ie.setSelectionRange(De,De);break;default:Ie.setSelectionRange(0,De);break}}}const Tt=(0,T.forwardRef)((Ie,Qe)=>{var it;const{prefixCls:De,bordered:cn=!0,status:qe,size:Pt,disabled:Le,onBlur:pt,onFocus:at,suffix:nt,allowClear:Ct,addonAfter:rt,addonBefore:vt,className:Ve,style:hn,styles:yn,rootClassName:ir,onChange:Qn,classNames:Ut,variant:En}=Ie,Tn=Wt(Ie,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:lr,direction:ln,input:Lt}=T.default.useContext(st.ConfigContext),bn=lr("input",De),Xe=(0,T.useRef)(null),Fe=(0,Se.default)(bn),[on,B,be]=(0,Et.default)(bn,Fe),{compactSize:yt,compactItemClassnames:Ee}=(0,le.useCompactItemContext)(bn,ln),Zt=(0,se.default)(xt=>{var Jt;return(Jt=Pt!=null?Pt:yt)!==null&&Jt!==void 0?Jt:xt}),_n=T.default.useContext(re.default),Sn=Le!=null?Le:_n,{status:Bn,hasFeedback:or,feedbackIcon:dr}=(0,T.useContext)(de.FormItemInputContext),gr=(0,Ce.getMergedStatus)(Bn,qe),wr=(0,mt.hasPrefixSuffix)(Ie)||!!or,Ar=(0,T.useRef)(wr),Ir=(0,Ue.default)(Xe,!0),Nr=xt=>{Ir(),pt==null||pt(xt)},Yr=xt=>{Ir(),at==null||at(xt)},bt=xt=>{Ir(),Qn==null||Qn(xt)},ve=(or||nt)&&T.default.createElement(T.default.Fragment,null,nt,or&&dr),ye=(0,pe.default)(Ct!=null?Ct:Lt==null?void 0:Lt.allowClear),[Ke,ht]=(0,xe.default)(En,cn);return on(T.default.createElement(Q.default,Object.assign({ref:(0,ge.composeRef)(Qe,Xe),prefixCls:bn,autoComplete:Lt==null?void 0:Lt.autoComplete},Tn,{disabled:Sn,onBlur:Nr,onFocus:Yr,style:Object.assign(Object.assign({},Lt==null?void 0:Lt.style),hn),styles:Object.assign(Object.assign({},Lt==null?void 0:Lt.styles),yn),suffix:ve,allowClear:ye,className:(0,ne.default)(Ve,ir,be,Fe,Ee,Lt==null?void 0:Lt.className),onChange:bt,addonAfter:rt&&T.default.createElement(le.NoCompactStyle,null,T.default.createElement(de.NoFormStyle,{override:!0,status:!0},rt)),addonBefore:vt&&T.default.createElement(le.NoCompactStyle,null,T.default.createElement(de.NoFormStyle,{override:!0,status:!0},vt)),classNames:Object.assign(Object.assign(Object.assign({},Ut),Lt==null?void 0:Lt.classNames),{input:(0,ne.default)({[`${bn}-sm`]:Zt==="small",[`${bn}-lg`]:Zt==="large",[`${bn}-rtl`]:ln==="rtl"},Ut==null?void 0:Ut.input,(it=Lt==null?void 0:Lt.classNames)===null||it===void 0?void 0:it.input,B),variant:(0,ne.default)({[`${bn}-${Ke}`]:ht},(0,Ce.getStatusClassNames)(bn,gr)),affixWrapper:(0,ne.default)({[`${bn}-affix-wrapper-sm`]:Zt==="small",[`${bn}-affix-wrapper-lg`]:Zt==="large",[`${bn}-affix-wrapper-rtl`]:ln==="rtl"},B),wrapper:(0,ne.default)({[`${bn}-group-rtl`]:ln==="rtl"},B),groupWrapper:(0,ne.default)({[`${bn}-group-wrapper-sm`]:Zt==="small",[`${bn}-group-wrapper-lg`]:Zt==="large",[`${bn}-group-wrapper-rtl`]:ln==="rtl",[`${bn}-group-wrapper-${Ke}`]:ht},(0,Ce.getStatusClassNames)(`${bn}-group-wrapper`,gr,or),B)})})))});var Ze=G.default=Tt},14104:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(67294)),ne=T,Q=ee(D(93967)),ge=ee(D(43961)),pe=ee(D(49314)),Ce=D(71434),he=D(13594),st=D(31929),re=ee(D(93319)),Se=ee(D(14893)),se=ee(D(65693)),de=D(51130),xe=ee(D(96424)),le=D(10815),Ue=ee(D(89858)),Et=function(Rt,Tt){var Ze={};for(var Ie in Rt)Object.prototype.hasOwnProperty.call(Rt,Ie)&&Tt.indexOf(Ie)<0&&(Ze[Ie]=Rt[Ie]);if(Rt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Qe=0,Ie=Object.getOwnPropertySymbols(Rt);Qe<Ie.length;Qe++)Tt.indexOf(Ie[Qe])<0&&Object.prototype.propertyIsEnumerable.call(Rt,Ie[Qe])&&(Ze[Ie[Qe]]=Rt[Ie[Qe]]);return Ze};const mt=(0,T.forwardRef)((Rt,Tt)=>{var Ze,Ie;const{prefixCls:Qe,bordered:it=!0,size:De,disabled:cn,status:qe,allowClear:Pt,classNames:Le,rootClassName:pt,className:at,style:nt,styles:Ct,variant:rt}=Rt,vt=Et(Rt,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:Ve,direction:hn,textArea:yn}=ne.useContext(st.ConfigContext),ir=(0,se.default)(De),Qn=ne.useContext(re.default),Ut=cn!=null?cn:Qn,{status:En,hasFeedback:Tn,feedbackIcon:lr}=ne.useContext(de.FormItemInputContext),ln=(0,Ce.getMergedStatus)(En,qe),Lt=ne.useRef(null);ne.useImperativeHandle(Tt,()=>{var Zt;return{resizableTextArea:(Zt=Lt.current)===null||Zt===void 0?void 0:Zt.resizableTextArea,focus:_n=>{var Sn,Bn;(0,le.triggerFocus)((Bn=(Sn=Lt.current)===null||Sn===void 0?void 0:Sn.resizableTextArea)===null||Bn===void 0?void 0:Bn.textArea,_n)},blur:()=>{var _n;return(_n=Lt.current)===null||_n===void 0?void 0:_n.blur()}}});const bn=Ve("input",Qe),Xe=(0,Se.default)(bn),[Fe,on,B]=(0,Ue.default)(bn,Xe),[be,yt]=(0,xe.default)(rt,it),Ee=(0,pe.default)(Pt!=null?Pt:yn==null?void 0:yn.allowClear);return Fe(ne.createElement(ge.default,Object.assign({autoComplete:yn==null?void 0:yn.autoComplete},vt,{style:Object.assign(Object.assign({},yn==null?void 0:yn.style),nt),styles:Object.assign(Object.assign({},yn==null?void 0:yn.styles),Ct),disabled:Ut,allowClear:Ee,className:(0,Q.default)(B,Xe,at,pt,yn==null?void 0:yn.className),classNames:Object.assign(Object.assign(Object.assign({},Le),yn==null?void 0:yn.classNames),{textarea:(0,Q.default)({[`${bn}-sm`]:ir==="small",[`${bn}-lg`]:ir==="large"},on,Le==null?void 0:Le.textarea,(Ze=yn==null?void 0:yn.classNames)===null||Ze===void 0?void 0:Ze.textarea),variant:(0,Q.default)({[`${bn}-${be}`]:yt},(0,Ce.getStatusClassNames)(bn,ln)),affixWrapper:(0,Q.default)(`${bn}-textarea-affix-wrapper`,{[`${bn}-affix-wrapper-rtl`]:hn==="rtl",[`${bn}-affix-wrapper-sm`]:ir==="small",[`${bn}-affix-wrapper-lg`]:ir==="large",[`${bn}-textarea-show-count`]:Rt.showCount||((Ie=Rt.count)===null||Ie===void 0?void 0:Ie.show)},on)}),prefixCls:bn,suffix:Tn&&ne.createElement("span",{className:`${bn}-textarea-suffix`},lr),ref:Lt})))});var Wt=G.default=mt},81722:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ae;var ee=D(67294);function ae(T,ne){const Q=(0,ee.useRef)([]),ge=()=>{Q.current.push(setTimeout(()=>{var pe,Ce,he,st;!((pe=T.current)===null||pe===void 0)&&pe.input&&((Ce=T.current)===null||Ce===void 0?void 0:Ce.input.getAttribute("type"))==="password"&&(!((he=T.current)===null||he===void 0)&&he.input.hasAttribute("value"))&&((st=T.current)===null||st===void 0||st.input.removeAttribute("value"))}))};return(0,ee.useEffect)(()=>(ne&&ge(),()=>Q.current.forEach(pe=>{pe&&clearTimeout(pe)})),[]),ge}},89858:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genPlaceholderStyle=G.genInputSmallStyle=G.genInputGroupStyle=G.genBasicInputStyle=G.genActiveStyle=G.default=void 0,Object.defineProperty(G,"initComponentToken",{enumerable:!0,get:function(){return Q.initComponentToken}}),Object.defineProperty(G,"initInputToken",{enumerable:!0,get:function(){return Q.initInputToken}});var ee=D(6731),ae=D(98078),T=D(78793),ne=D(3184),Q=D(25735),ge=D(58594);const pe=Rt=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:Rt,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});G.genPlaceholderStyle=pe;const Ce=Rt=>({borderColor:Rt.activeBorderColor,boxShadow:Rt.activeShadow,outline:0,backgroundColor:Rt.activeBg});G.genActiveStyle=Ce;const he=Rt=>{const{paddingBlockLG:Tt,lineHeightLG:Ze,borderRadiusLG:Ie,paddingInlineLG:Qe}=Rt;return{padding:`${(0,ee.unit)(Tt)} ${(0,ee.unit)(Qe)}`,fontSize:Rt.inputFontSizeLG,lineHeight:Ze,borderRadius:Ie}},st=Rt=>({padding:`${(0,ee.unit)(Rt.paddingBlockSM)} ${(0,ee.unit)(Rt.paddingInlineSM)}`,fontSize:Rt.inputFontSizeSM,borderRadius:Rt.borderRadiusSM});G.genInputSmallStyle=st;const re=Rt=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,ee.unit)(Rt.paddingBlock)} ${(0,ee.unit)(Rt.paddingInline)}`,color:Rt.colorText,fontSize:Rt.inputFontSize,lineHeight:Rt.lineHeight,borderRadius:Rt.borderRadius,transition:`all ${Rt.motionDurationMid}`},pe(Rt.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:Rt.controlHeight,lineHeight:Rt.lineHeight,verticalAlign:"bottom",transition:`all ${Rt.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},he(Rt)),"&-sm":Object.assign({},st(Rt)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});G.genBasicInputStyle=re;const Se=Rt=>{const{componentCls:Tt,antCls:Ze}=Rt;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:Rt.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${Tt}, &-lg > ${Tt}-group-addon`]:Object.assign({},he(Rt)),[`&-sm ${Tt}, &-sm > ${Tt}-group-addon`]:Object.assign({},st(Rt)),[`&-lg ${Ze}-select-single ${Ze}-select-selector`]:{height:Rt.controlHeightLG},[`&-sm ${Ze}-select-single ${Ze}-select-selector`]:{height:Rt.controlHeightSM},[`> ${Tt}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${Tt}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,ee.unit)(Rt.paddingInline)}`,color:Rt.colorText,fontWeight:"normal",fontSize:Rt.inputFontSize,textAlign:"center",borderRadius:Rt.borderRadius,transition:`all ${Rt.motionDurationSlow}`,lineHeight:1,[`${Ze}-select`]:{margin:`${(0,ee.unit)(Rt.calc(Rt.paddingBlock).add(1).mul(-1).equal())} ${(0,ee.unit)(Rt.calc(Rt.paddingInline).mul(-1).equal())}`,[`&${Ze}-select-single:not(${Ze}-select-customize-input):not(${Ze}-pagination-size-changer)`]:{[`${Ze}-select-selector`]:{backgroundColor:"inherit",border:`${(0,ee.unit)(Rt.lineWidth)} ${Rt.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Ze}-select-selector`]:{color:Rt.colorPrimary}}},[`${Ze}-cascader-picker`]:{margin:`-9px ${(0,ee.unit)(Rt.calc(Rt.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Ze}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${Tt}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${Tt}-search-with-button &`]:{zIndex:0}}},[`> ${Tt}:first-child, ${Tt}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Ze}-select ${Ze}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${Tt}-affix-wrapper`]:{[`&:not(:first-child) ${Tt}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${Tt}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${Tt}:last-child, ${Tt}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Ze}-select ${Ze}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${Tt}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${Tt}-search &`]:{borderStartStartRadius:Rt.borderRadius,borderEndStartRadius:Rt.borderRadius}},[`&:not(:first-child), ${Tt}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${Tt}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,ae.clearFix)()),{[`${Tt}-group-addon, ${Tt}-group-wrap, > ${Tt}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:Rt.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${Tt}-affix-wrapper,
        & > ${Tt}-number-affix-wrapper,
        & > ${Ze}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:Rt.calc(Rt.lineWidth).mul(-1).equal(),borderInlineEndWidth:Rt.lineWidth},[`${Tt}`]:{float:"none"},[`& > ${Ze}-select > ${Ze}-select-selector,
      & > ${Ze}-select-auto-complete ${Tt},
      & > ${Ze}-cascader-picker ${Tt},
      & > ${Tt}-group-wrapper ${Tt}`]:{borderInlineEndWidth:Rt.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Ze}-select-focused`]:{zIndex:1},[`& > ${Ze}-select > ${Ze}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Ze}-select:first-child > ${Ze}-select-selector,
      & > ${Ze}-select-auto-complete:first-child ${Tt},
      & > ${Ze}-cascader-picker:first-child ${Tt}`]:{borderStartStartRadius:Rt.borderRadius,borderEndStartRadius:Rt.borderRadius},[`& > *:last-child,
      & > ${Ze}-select:last-child > ${Ze}-select-selector,
      & > ${Ze}-cascader-picker:last-child ${Tt},
      & > ${Ze}-cascader-picker-focused:last-child ${Tt}`]:{borderInlineEndWidth:Rt.lineWidth,borderStartEndRadius:Rt.borderRadius,borderEndEndRadius:Rt.borderRadius},[`& > ${Ze}-select-auto-complete ${Tt}`]:{verticalAlign:"top"},[`${Tt}-group-wrapper + ${Tt}-group-wrapper`]:{marginInlineStart:Rt.calc(Rt.lineWidth).mul(-1).equal(),[`${Tt}-affix-wrapper`]:{borderRadius:0}},[`${Tt}-group-wrapper:not(:last-child)`]:{[`&${Tt}-search > ${Tt}-group`]:{[`& > ${Tt}-group-addon > ${Tt}-search-button`]:{borderRadius:0},[`& > ${Tt}`]:{borderStartStartRadius:Rt.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:Rt.borderRadius}}}})}};G.genInputGroupStyle=Se;const se=Rt=>{const{componentCls:Tt,controlHeightSM:Ze,lineWidth:Ie,calc:Qe}=Rt,it=16,De=Qe(Ze).sub(Qe(Ie).mul(2)).sub(it).div(2).equal();return{[Tt]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,ae.resetComponent)(Rt)),re(Rt)),(0,ge.genOutlinedStyle)(Rt)),(0,ge.genFilledStyle)(Rt)),(0,ge.genBorderlessStyle)(Rt)),{'&[type="color"]':{height:Rt.controlHeight,[`&${Tt}-lg`]:{height:Rt.controlHeightLG},[`&${Tt}-sm`]:{height:Ze,paddingTop:De,paddingBottom:De}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},de=Rt=>{const{componentCls:Tt}=Rt;return{[`${Tt}-clear-icon`]:{margin:0,color:Rt.colorTextQuaternary,fontSize:Rt.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${Rt.motionDurationSlow}`,"&:hover":{color:Rt.colorTextTertiary},"&:active":{color:Rt.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,ee.unit)(Rt.inputAffixPadding)}`}}}},xe=Rt=>{const{componentCls:Tt,inputAffixPadding:Ze,colorTextDescription:Ie,motionDurationSlow:Qe,colorIcon:it,colorIconHover:De,iconCls:cn}=Rt;return{[`${Tt}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},re(Rt)),{display:"inline-flex",[`&:not(${Tt}-disabled):hover`]:{zIndex:1,[`${Tt}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${Tt}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${Tt}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:Rt.paddingXS}},"&-show-count-suffix":{color:Ie},"&-show-count-has-suffix":{marginInlineEnd:Rt.paddingXXS},"&-prefix":{marginInlineEnd:Ze},"&-suffix":{marginInlineStart:Ze}}}),de(Rt)),{[`${cn}${Tt}-password-icon`]:{color:it,cursor:"pointer",transition:`all ${Qe}`,"&:hover":{color:De}}})}},le=Rt=>{const{componentCls:Tt,borderRadiusLG:Ze,borderRadiusSM:Ie}=Rt;return{[`${Tt}-group`]:Object.assign(Object.assign(Object.assign({},(0,ae.resetComponent)(Rt)),Se(Rt)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${Tt}-group-addon`]:{borderRadius:Ze,fontSize:Rt.inputFontSizeLG}},"&-sm":{[`${Tt}-group-addon`]:{borderRadius:Ie}}},(0,ge.genOutlinedGroupStyle)(Rt)),(0,ge.genFilledGroupStyle)(Rt)),{[`&:not(${Tt}-compact-first-item):not(${Tt}-compact-last-item)${Tt}-compact-item`]:{[`${Tt}, ${Tt}-group-addon`]:{borderRadius:0}},[`&:not(${Tt}-compact-last-item)${Tt}-compact-first-item`]:{[`${Tt}, ${Tt}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${Tt}-compact-first-item)${Tt}-compact-last-item`]:{[`${Tt}, ${Tt}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${Tt}-compact-last-item)${Tt}-compact-item`]:{[`${Tt}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},Ue=Rt=>{const{componentCls:Tt,antCls:Ze}=Rt,Ie=`${Tt}-search`;return{[Ie]:{[`${Tt}`]:{"&:hover, &:focus":{borderColor:Rt.colorPrimaryHover,[`+ ${Tt}-group-addon ${Ie}-button:not(${Ze}-btn-primary)`]:{borderInlineStartColor:Rt.colorPrimaryHover}}},[`${Tt}-affix-wrapper`]:{borderRadius:0},[`${Tt}-lg`]:{lineHeight:Rt.calc(Rt.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${Tt}-group`]:{[`> ${Tt}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ie}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:Rt.borderRadius,borderEndEndRadius:Rt.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ie}-button:not(${Ze}-btn-primary)`]:{color:Rt.colorTextDescription,"&:hover":{color:Rt.colorPrimaryHover},"&:active":{color:Rt.colorPrimaryActive},[`&${Ze}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ie}-button`]:{height:Rt.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ie}-button`]:{height:Rt.controlHeightLG},[`&-small ${Ie}-button`]:{height:Rt.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${Tt}-compact-item`]:{[`&:not(${Tt}-compact-last-item)`]:{[`${Tt}-group-addon`]:{[`${Tt}-search-button`]:{marginInlineEnd:Rt.calc(Rt.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${Tt}-compact-first-item)`]:{[`${Tt},${Tt}-affix-wrapper`]:{borderRadius:0}},[`> ${Tt}-group-addon ${Tt}-search-button,
        > ${Tt},
        ${Tt}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${Tt}-affix-wrapper-focused`]:{zIndex:2}}}}},Et=Rt=>{const{componentCls:Tt,paddingLG:Ze}=Rt,Ie=`${Tt}-textarea`;return{[Ie]:{position:"relative","&-show-count":{[`> ${Tt}`]:{height:"100%"},[`${Tt}-data-count`]:{position:"absolute",bottom:Rt.calc(Rt.fontSize).mul(Rt.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:Rt.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${Tt}`]:{paddingInlineEnd:Ze}},[`&-affix-wrapper${Ie}-has-feedback`]:{[`${Tt}`]:{paddingInlineEnd:Ze}},[`&-affix-wrapper${Tt}-affix-wrapper`]:{padding:0,[`> textarea${Tt}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${Tt}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${Tt}-clear-icon`]:{position:"absolute",insetInlineEnd:Rt.paddingXS,insetBlockStart:Rt.paddingXS},[`${Ie}-suffix`]:{position:"absolute",top:0,insetInlineEnd:Rt.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},mt=Rt=>{const{componentCls:Tt}=Rt;return{[`${Tt}-out-of-range`]:{[`&, & input, & textarea, ${Tt}-show-count-suffix, ${Tt}-data-count`]:{color:Rt.colorError}}}};var Wt=G.default=(0,ne.genStyleHooks)("Input",Rt=>{const Tt=(0,ne.mergeToken)(Rt,(0,Q.initInputToken)(Rt));return[se(Tt),Et(Tt),xe(Tt),le(Tt),Ue(Tt),mt(Tt),(0,T.genCompactItemStyle)(Tt)]},Q.initComponentToken)},25735:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initComponentToken=void 0,G.initInputToken=ae;var ee=D(3184);function ae(ne){return(0,ee.mergeToken)(ne,{inputAffixPadding:ne.paddingXXS})}const T=ne=>{const{controlHeight:Q,fontSize:ge,lineHeight:pe,lineWidth:Ce,controlHeightSM:he,controlHeightLG:st,fontSizeLG:re,lineHeightLG:Se,paddingSM:se,controlPaddingHorizontalSM:de,controlPaddingHorizontal:xe,colorFillAlter:le,colorPrimaryHover:Ue,colorPrimary:Et,controlOutlineWidth:mt,controlOutline:Wt,colorErrorOutline:Rt,colorWarningOutline:Tt,colorBgContainer:Ze}=ne;return{paddingBlock:Math.max(Math.round((Q-ge*pe)/2*10)/10-Ce,0),paddingBlockSM:Math.max(Math.round((he-ge*pe)/2*10)/10-Ce,0),paddingBlockLG:Math.ceil((st-re*Se)/2*10)/10-Ce,paddingInline:se-Ce,paddingInlineSM:de-Ce,paddingInlineLG:xe-Ce,addonBg:le,activeBorderColor:Et,hoverBorderColor:Ue,activeShadow:`0 0 0 ${mt}px ${Wt}`,errorActiveShadow:`0 0 0 ${mt}px ${Rt}`,warningActiveShadow:`0 0 0 ${mt}px ${Tt}`,hoverBg:Ze,activeBg:Ze,inputFontSize:ge,inputFontSizeLG:re,inputFontSizeSM:ge}};G.initComponentToken=T},58594:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genOutlinedStyle=G.genOutlinedGroupStyle=G.genHoverStyle=G.genFilledStyle=G.genFilledGroupStyle=G.genDisabledStyle=G.genBorderlessStyle=G.genBaseOutlinedStyle=void 0;var ee=D(6731),ae=D(3184);const T=le=>({borderColor:le.hoverBorderColor,backgroundColor:le.hoverBg});G.genHoverStyle=T;const ne=le=>({color:le.colorTextDisabled,backgroundColor:le.colorBgContainerDisabled,borderColor:le.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},T((0,ae.mergeToken)(le,{hoverBorderColor:le.colorBorder,hoverBg:le.colorBgContainerDisabled})))});G.genDisabledStyle=ne;const Q=(le,Ue)=>({background:le.colorBgContainer,borderWidth:le.lineWidth,borderStyle:le.lineType,borderColor:Ue.borderColor,"&:hover":{borderColor:Ue.hoverBorderColor,backgroundColor:le.hoverBg},"&:focus, &:focus-within":{borderColor:Ue.activeBorderColor,boxShadow:Ue.activeShadow,outline:0,backgroundColor:le.activeBg}});G.genBaseOutlinedStyle=Q;const ge=(le,Ue)=>({[`&${le.componentCls}-status-${Ue.status}:not(${le.componentCls}-disabled)`]:Object.assign(Object.assign({},Q(le,Ue)),{[`${le.componentCls}-prefix, ${le.componentCls}-suffix`]:{color:Ue.affixColor}})}),pe=(le,Ue)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Q(le,{borderColor:le.colorBorder,hoverBorderColor:le.hoverBorderColor,activeBorderColor:le.activeBorderColor,activeShadow:le.activeShadow})),{[`&${le.componentCls}-disabled, &[disabled]`]:Object.assign({},ne(le))}),ge(le,{status:"error",borderColor:le.colorError,hoverBorderColor:le.colorErrorBorderHover,activeBorderColor:le.colorError,activeShadow:le.errorActiveShadow,affixColor:le.colorError})),ge(le,{status:"warning",borderColor:le.colorWarning,hoverBorderColor:le.colorWarningBorderHover,activeBorderColor:le.colorWarning,activeShadow:le.warningActiveShadow,affixColor:le.colorWarning})),Ue)});G.genOutlinedStyle=pe;const Ce=(le,Ue)=>({[`&${le.componentCls}-group-wrapper-status-${Ue.status}`]:{[`${le.componentCls}-group-addon`]:{borderColor:Ue.addonBorderColor,color:Ue.addonColor}}}),he=le=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${le.componentCls}-group`]:{"&-addon":{background:le.addonBg,border:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Ce(le,{status:"error",addonBorderColor:le.colorError,addonColor:le.colorErrorText})),Ce(le,{status:"warning",addonBorderColor:le.colorWarning,addonColor:le.colorWarningText})),{[`&${le.componentCls}-group-wrapper-disabled`]:{[`${le.componentCls}-group-addon`]:Object.assign({},ne(le))}})});G.genOutlinedGroupStyle=he;const st=(le,Ue)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${le.componentCls}-disabled, &[disabled]`]:{color:le.colorTextDisabled}},Ue)});G.genBorderlessStyle=st;const re=(le,Ue)=>({background:Ue.bg,borderWidth:le.lineWidth,borderStyle:le.lineType,borderColor:"transparent",["input&, & input, textarea&, & textarea"]:{color:Ue==null?void 0:Ue.inputColor},"&:hover":{background:Ue.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:Ue.activeBorderColor,backgroundColor:le.activeBg}}),Se=(le,Ue)=>({[`&${le.componentCls}-status-${Ue.status}:not(${le.componentCls}-disabled)`]:Object.assign(Object.assign({},re(le,Ue)),{[`${le.componentCls}-prefix, ${le.componentCls}-suffix`]:{color:Ue.affixColor}})}),se=(le,Ue)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},re(le,{bg:le.colorFillTertiary,hoverBg:le.colorFillSecondary,activeBorderColor:le.colorPrimary})),{[`&${le.componentCls}-disabled, &[disabled]`]:Object.assign({},ne(le))}),Se(le,{status:"error",bg:le.colorErrorBg,hoverBg:le.colorErrorBgHover,activeBorderColor:le.colorError,inputColor:le.colorErrorText,affixColor:le.colorError})),Se(le,{status:"warning",bg:le.colorWarningBg,hoverBg:le.colorWarningBgHover,activeBorderColor:le.colorWarning,inputColor:le.colorWarningText,affixColor:le.colorWarning})),Ue)});G.genFilledStyle=se;const de=(le,Ue)=>({[`&${le.componentCls}-group-wrapper-status-${Ue.status}`]:{[`${le.componentCls}-group-addon`]:{background:Ue.addonBg,color:Ue.addonColor}}}),xe=le=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${le.componentCls}-group`]:{"&-addon":{background:le.colorFillTertiary},[`${le.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorSplit}`}}}},de(le,{status:"error",addonBg:le.colorErrorBg,addonColor:le.colorErrorText})),de(le,{status:"warning",addonBg:le.colorWarningBg,addonColor:le.colorWarningText})),{[`&${le.componentCls}-group-wrapper-disabled`]:{[`${le.componentCls}-group`]:{"&-addon":{background:le.colorFillTertiary,color:le.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`,borderTop:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`,borderBottom:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`,borderTop:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`,borderBottom:`${(0,ee.unit)(le.lineWidth)} ${le.lineType} ${le.colorBorder}`}}}})});G.genFilledGroupStyle=xe},36714:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.hasPrefixSuffix=D;function D(ee){return!!(ee.prefix||ee.suffix||ee.allowClear||ee.showCount)}},44805:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ee=D(67294);const ae=(0,ee.createContext)(void 0);var T=G.default=ae},18253:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(62273)),T=ee(D(1028)),ne=ee(D(25633)),Q=ee(D(52040));const ge="${label} is not a valid ${type}",pe={locale:"en",Pagination:ae.default,DatePicker:ne.default,TimePicker:Q.default,Calendar:T.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ge,method:ge,array:ge,object:ge,number:ge,date:ge,boolean:ge,integer:ge,float:ge,regexp:ge,email:ge,url:ge,hex:ge},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};var Ce=G.default=pe},24522:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.ANT_MARK=void 0,Object.defineProperty(G,"useLocale",{enumerable:!0,get:function(){return pe.default}});var T=ae(D(67294)),ne=D(13594),Q=D(10625),ge=ee(D(44805)),pe=ee(D(76647));const Ce=G.ANT_MARK="internalMark",he=re=>{const{locale:Se={},children:se,_ANT_MARK__:de}=re;T.useEffect(()=>(0,Q.changeConfirmLocale)(Se&&Se.Modal),[Se]);const xe=T.useMemo(()=>Object.assign(Object.assign({},Se),{exist:!0}),[Se]);return T.createElement(ge.default.Provider,{value:xe},se)};var st=G.default=he},76647:function(It,G,D){"use strict";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(67294)),ne=ee(D(44805)),Q=ee(D(18253));const ge=(Ce,he)=>{const st=T.useContext(ne.default),re=T.useMemo(()=>{var se;const de=he||Q.default[Ce],xe=(se=st==null?void 0:st[Ce])!==null&&se!==void 0?se:{};return Object.assign(Object.assign({},typeof de=="function"?de():de),xe||{})},[Ce,he,st]),Se=T.useMemo(()=>{const se=st==null?void 0:st.locale;return st!=null&&st.exist&&!se?Q.default.locale:se},[st]);return[re,Se]};var pe=G.default=ge},10625:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.changeConfirmLocale=ge,G.getConfirmLocale=pe;var ae=ee(D(18253));let T=Object.assign({},ae.default.Modal),ne=[];const Q=()=>ne.reduce((Ce,he)=>Object.assign(Object.assign({},Ce),he),ae.default.Modal);function ge(Ce){if(Ce){const he=Object.assign({},Ce);return ne.push(he),T=Q(),()=>{ne=ne.filter(st=>st!==he),T=Q()}}T=Object.assign({},ae.default.Modal)}function pe(){return T}},46549:function(It,G,D){"use strict";"use client";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useCompactItemContext=G.default=G.SpaceCompactItemContext=G.NoCompactStyle=void 0;var T=ae(D(93967)),ne=ae(D(45598)),Q=ee(D(67294)),ge=D(31929),pe=ae(D(65693)),Ce=ae(D(54277)),he=function(le,Ue){var Et={};for(var mt in le)Object.prototype.hasOwnProperty.call(le,mt)&&Ue.indexOf(mt)<0&&(Et[mt]=le[mt]);if(le!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,mt=Object.getOwnPropertySymbols(le);Wt<mt.length;Wt++)Ue.indexOf(mt[Wt])<0&&Object.prototype.propertyIsEnumerable.call(le,mt[Wt])&&(Et[mt[Wt]]=le[mt[Wt]]);return Et};const st=G.SpaceCompactItemContext=Q.createContext(null),re=(le,Ue)=>{const Et=Q.useContext(st),mt=Q.useMemo(()=>{if(!Et)return"";const{compactDirection:Wt,isFirstItem:Rt,isLastItem:Tt}=Et,Ze=Wt==="vertical"?"-vertical-":"-";return(0,T.default)(`${le}-compact${Ze}item`,{[`${le}-compact${Ze}first-item`]:Rt,[`${le}-compact${Ze}last-item`]:Tt,[`${le}-compact${Ze}item-rtl`]:Ue==="rtl"})},[le,Ue,Et]);return{compactSize:Et==null?void 0:Et.compactSize,compactDirection:Et==null?void 0:Et.compactDirection,compactItemClassnames:mt}};G.useCompactItemContext=re;const Se=le=>{let{children:Ue}=le;return Q.createElement(st.Provider,{value:null},Ue)};G.NoCompactStyle=Se;const se=le=>{var{children:Ue}=le,Et=he(le,["children"]);return Q.createElement(st.Provider,{value:Et},Ue)},de=le=>{const{getPrefixCls:Ue,direction:Et}=Q.useContext(ge.ConfigContext),{size:mt,direction:Wt,block:Rt,prefixCls:Tt,className:Ze,rootClassName:Ie,children:Qe}=le,it=he(le,["size","direction","block","prefixCls","className","rootClassName","children"]),De=(0,pe.default)(Ct=>mt!=null?mt:Ct),cn=Ue("space-compact",Tt),[qe,Pt]=(0,Ce.default)(cn),Le=(0,T.default)(cn,Pt,{[`${cn}-rtl`]:Et==="rtl",[`${cn}-block`]:Rt,[`${cn}-vertical`]:Wt==="vertical"},Ze,Ie),pt=Q.useContext(st),at=(0,ne.default)(Qe),nt=Q.useMemo(()=>at.map((Ct,rt)=>{const vt=Ct&&Ct.key||`${cn}-item-${rt}`;return Q.createElement(se,{key:vt,compactSize:De,compactDirection:Wt,isFirstItem:rt===0&&(!pt||(pt==null?void 0:pt.isFirstItem)),isLastItem:rt===at.length-1&&(!pt||(pt==null?void 0:pt.isLastItem))},Ct)}),[mt,at,pt]);return at.length===0?null:qe(Q.createElement("div",Object.assign({className:Le},it),nt))};var xe=G.default=de},35969:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const D=ae=>{const{componentCls:T}=ae;return{[T]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var ee=G.default=D},54277:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var ae=D(3184),T=ee(D(35969));const ne=Ce=>{const{componentCls:he,antCls:st}=Ce;return{[he]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${he}-item:empty`]:{display:"none"},[`${he}-item > ${st}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},Q=Ce=>{const{componentCls:he}=Ce;return{[he]:{"&-gap-row-small":{rowGap:Ce.spaceGapSmallSize},"&-gap-row-middle":{rowGap:Ce.spaceGapMiddleSize},"&-gap-row-large":{rowGap:Ce.spaceGapLargeSize},"&-gap-col-small":{columnGap:Ce.spaceGapSmallSize},"&-gap-col-middle":{columnGap:Ce.spaceGapMiddleSize},"&-gap-col-large":{columnGap:Ce.spaceGapLargeSize}}}},ge=()=>({});G.prepareComponentToken=ge;var pe=G.default=(0,ae.genStyleHooks)("Space",Ce=>{const he=(0,ae.mergeToken)(Ce,{spaceGapSmallSize:Ce.paddingXS,spaceGapMiddleSize:Ce.padding,spaceGapLargeSize:Ce.paddingLG});return[ne(he),Q(he),(0,T.default)(he)]},()=>({}),{resetStyle:!1})},78793:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genCompactItemStyle=ae;function D(T,ne,Q){const{focusElCls:ge,focus:pe,borderElCls:Ce}=Q,he=Ce?"> *":"",st=["hover",pe?"focus":null,"active"].filter(Boolean).map(re=>`&:${re} ${he}`).join(",");return{[`&-item:not(${ne}-last-item)`]:{marginInlineEnd:T.calc(T.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[st]:{zIndex:2}},ge?{[`&${ge}`]:{zIndex:2}}:{}),{[`&[disabled] ${he}`]:{zIndex:0}})}}function ee(T,ne,Q){const{borderElCls:ge}=Q,pe=ge?`> ${ge}`:"";return{[`&-item:not(${ne}-first-item):not(${ne}-last-item) ${pe}`]:{borderRadius:0},[`&-item:not(${ne}-last-item)${ne}-first-item`]:{[`& ${pe}, &${T}-sm ${pe}, &${T}-lg ${pe}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${ne}-first-item)${ne}-last-item`]:{[`& ${pe}, &${T}-sm ${pe}, &${T}-lg ${pe}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function ae(T){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:Q}=T,ge=`${Q}-compact`;return{[ge]:Object.assign(Object.assign({},D(T,ge,ne)),ee(Q,ge,ne))}}},98078:function(It,G,D){"use strict";"use client";Object.defineProperty(G,"__esModule",{value:!0}),G.genLinkStyle=G.genFocusStyle=G.genFocusOutline=G.genCommonStyle=G.clearFix=void 0,Object.defineProperty(G,"operationUnit",{enumerable:!0,get:function(){return ae.operationUnit}}),G.textEllipsis=G.resetIcon=G.resetComponent=void 0;var ee=D(6731),ae=D(22548);const T=G.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ne=function(re){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:re.colorText,fontSize:re.fontSize,lineHeight:re.lineHeight,listStyle:"none",fontFamily:Se?"inherit":re.fontFamily}};G.resetComponent=ne;const Q=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});G.resetIcon=Q;const ge=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});G.clearFix=ge;const pe=re=>({a:{color:re.colorLink,textDecoration:re.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${re.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:re.colorLinkHover},"&:active":{color:re.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:re.linkHoverDecoration,outline:0},"&:focus":{textDecoration:re.linkFocusDecoration,outline:0},"&[disabled]":{color:re.colorTextDisabled,cursor:"not-allowed"}}});G.genLinkStyle=pe;const Ce=(re,Se,se)=>{const{fontFamily:de,fontSize:xe}=re,le=`[class^="${Se}"], [class*=" ${Se}"]`;return{[se?`.${se}`:le]:{fontFamily:de,fontSize:xe,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[le]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}};G.genCommonStyle=Ce;const he=re=>({outline:`${(0,ee.unit)(re.lineWidthFocus)} solid ${re.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});G.genFocusOutline=he;const st=re=>({"&:focus-visible":Object.assign({},he(re))});G.genFocusStyle=st},57253:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const D=ae=>({[ae.componentCls]:{[`${ae.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${ae.motionDurationMid} ${ae.motionEaseInOut},
        opacity ${ae.motionDurationMid} ${ae.motionEaseInOut} !important`}},[`${ae.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${ae.motionDurationMid} ${ae.motionEaseInOut},
        opacity ${ae.motionDurationMid} ${ae.motionEaseInOut} !important`}}});var ee=G.default=D},84460:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initFadeMotion=G.fadeOut=G.fadeIn=void 0;var ee=D(6731),ae=D(94631);const T=G.fadeIn=new ee.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),ne=G.fadeOut=new ee.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Q=function(ge){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:Ce}=ge,he=`${Ce}-fade`,st=pe?"&":"";return[(0,ae.initMotion)(he,T,ne,ge.motionDurationMid,pe),{[`
        ${st}${he}-enter,
        ${st}${he}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${st}${he}-leave`]:{animationTimingFunction:"linear"}}]};G.initFadeMotion=Q},42836:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"fadeIn",{enumerable:!0,get:function(){return ae.fadeIn}}),Object.defineProperty(G,"fadeOut",{enumerable:!0,get:function(){return ae.fadeOut}}),Object.defineProperty(G,"genCollapseMotion",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(G,"initFadeMotion",{enumerable:!0,get:function(){return ae.initFadeMotion}}),Object.defineProperty(G,"initMoveMotion",{enumerable:!0,get:function(){return T.initMoveMotion}}),Object.defineProperty(G,"initSlideMotion",{enumerable:!0,get:function(){return ne.initSlideMotion}}),Object.defineProperty(G,"initZoomMotion",{enumerable:!0,get:function(){return Q.initZoomMotion}}),Object.defineProperty(G,"moveDownIn",{enumerable:!0,get:function(){return T.moveDownIn}}),Object.defineProperty(G,"moveDownOut",{enumerable:!0,get:function(){return T.moveDownOut}}),Object.defineProperty(G,"moveLeftIn",{enumerable:!0,get:function(){return T.moveLeftIn}}),Object.defineProperty(G,"moveLeftOut",{enumerable:!0,get:function(){return T.moveLeftOut}}),Object.defineProperty(G,"moveRightIn",{enumerable:!0,get:function(){return T.moveRightIn}}),Object.defineProperty(G,"moveRightOut",{enumerable:!0,get:function(){return T.moveRightOut}}),Object.defineProperty(G,"moveUpIn",{enumerable:!0,get:function(){return T.moveUpIn}}),Object.defineProperty(G,"moveUpOut",{enumerable:!0,get:function(){return T.moveUpOut}}),Object.defineProperty(G,"slideDownIn",{enumerable:!0,get:function(){return ne.slideDownIn}}),Object.defineProperty(G,"slideDownOut",{enumerable:!0,get:function(){return ne.slideDownOut}}),Object.defineProperty(G,"slideLeftIn",{enumerable:!0,get:function(){return ne.slideLeftIn}}),Object.defineProperty(G,"slideLeftOut",{enumerable:!0,get:function(){return ne.slideLeftOut}}),Object.defineProperty(G,"slideRightIn",{enumerable:!0,get:function(){return ne.slideRightIn}}),Object.defineProperty(G,"slideRightOut",{enumerable:!0,get:function(){return ne.slideRightOut}}),Object.defineProperty(G,"slideUpIn",{enumerable:!0,get:function(){return ne.slideUpIn}}),Object.defineProperty(G,"slideUpOut",{enumerable:!0,get:function(){return ne.slideUpOut}}),Object.defineProperty(G,"zoomBigIn",{enumerable:!0,get:function(){return Q.zoomBigIn}}),Object.defineProperty(G,"zoomBigOut",{enumerable:!0,get:function(){return Q.zoomBigOut}}),Object.defineProperty(G,"zoomDownIn",{enumerable:!0,get:function(){return Q.zoomDownIn}}),Object.defineProperty(G,"zoomDownOut",{enumerable:!0,get:function(){return Q.zoomDownOut}}),Object.defineProperty(G,"zoomIn",{enumerable:!0,get:function(){return Q.zoomIn}}),Object.defineProperty(G,"zoomLeftIn",{enumerable:!0,get:function(){return Q.zoomLeftIn}}),Object.defineProperty(G,"zoomLeftOut",{enumerable:!0,get:function(){return Q.zoomLeftOut}}),Object.defineProperty(G,"zoomOut",{enumerable:!0,get:function(){return Q.zoomOut}}),Object.defineProperty(G,"zoomRightIn",{enumerable:!0,get:function(){return Q.zoomRightIn}}),Object.defineProperty(G,"zoomRightOut",{enumerable:!0,get:function(){return Q.zoomRightOut}}),Object.defineProperty(G,"zoomUpIn",{enumerable:!0,get:function(){return Q.zoomUpIn}}),Object.defineProperty(G,"zoomUpOut",{enumerable:!0,get:function(){return Q.zoomUpOut}});var ae=D(84460),T=D(17060),ne=D(17581),Q=D(99269),ge=ee(D(57253))},94631:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initMotion=void 0;const D=T=>({animationDuration:T,animationFillMode:"both"}),ee=T=>({animationDuration:T,animationFillMode:"both"}),ae=function(T,ne,Q,ge){const Ce=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${Ce}${T}-enter,
      ${Ce}${T}-appear
    `]:Object.assign(Object.assign({},D(ge)),{animationPlayState:"paused"}),[`${Ce}${T}-leave`]:Object.assign(Object.assign({},ee(ge)),{animationPlayState:"paused"}),[`
      ${Ce}${T}-enter${T}-enter-active,
      ${Ce}${T}-appear${T}-appear-active
    `]:{animationName:ne,animationPlayState:"running"},[`${Ce}${T}-leave${T}-leave-active`]:{animationName:Q,animationPlayState:"running",pointerEvents:"none"}}};G.initMotion=ae},17060:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.moveUpOut=G.moveUpIn=G.moveRightOut=G.moveRightIn=G.moveLeftOut=G.moveLeftIn=G.moveDownOut=G.moveDownIn=G.initMoveMotion=void 0;var ee=D(6731),ae=D(94631);const T=G.moveDownIn=new ee.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ne=G.moveDownOut=new ee.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),Q=G.moveLeftIn=new ee.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ge=G.moveLeftOut=new ee.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),pe=G.moveRightIn=new ee.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Ce=G.moveRightOut=new ee.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),he=G.moveUpIn=new ee.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),st=G.moveUpOut=new ee.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),re={"move-up":{inKeyframes:he,outKeyframes:st},"move-down":{inKeyframes:T,outKeyframes:ne},"move-left":{inKeyframes:Q,outKeyframes:ge},"move-right":{inKeyframes:pe,outKeyframes:Ce}},Se=(se,de)=>{const{antCls:xe}=se,le=`${xe}-${de}`,{inKeyframes:Ue,outKeyframes:Et}=re[de];return[(0,ae.initMotion)(le,Ue,Et,se.motionDurationMid),{[`
        ${le}-enter,
        ${le}-appear
      `]:{opacity:0,animationTimingFunction:se.motionEaseOutCirc},[`${le}-leave`]:{animationTimingFunction:se.motionEaseInOutCirc}}]};G.initMoveMotion=Se},17581:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slideUpOut=G.slideUpIn=G.slideRightOut=G.slideRightIn=G.slideLeftOut=G.slideLeftIn=G.slideDownOut=G.slideDownIn=G.initSlideMotion=void 0;var ee=D(6731),ae=D(94631);const T=G.slideUpIn=new ee.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),ne=G.slideUpOut=new ee.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Q=G.slideDownIn=new ee.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),ge=G.slideDownOut=new ee.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),pe=G.slideLeftIn=new ee.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Ce=G.slideLeftOut=new ee.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),he=G.slideRightIn=new ee.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),st=G.slideRightOut=new ee.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),re={"slide-up":{inKeyframes:T,outKeyframes:ne},"slide-down":{inKeyframes:Q,outKeyframes:ge},"slide-left":{inKeyframes:pe,outKeyframes:Ce},"slide-right":{inKeyframes:he,outKeyframes:st}},Se=(se,de)=>{const{antCls:xe}=se,le=`${xe}-${de}`,{inKeyframes:Ue,outKeyframes:Et}=re[de];return[(0,ae.initMotion)(le,Ue,Et,se.motionDurationMid),{[`
      ${le}-enter,
      ${le}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:se.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${le}-leave`]:{animationTimingFunction:se.motionEaseInQuint}}]};G.initSlideMotion=Se},99269:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.zoomUpOut=G.zoomUpIn=G.zoomRightOut=G.zoomRightIn=G.zoomOut=G.zoomLeftOut=G.zoomLeftIn=G.zoomIn=G.zoomDownOut=G.zoomDownIn=G.zoomBigOut=G.zoomBigIn=G.initZoomMotion=void 0;var ee=D(6731),ae=D(94631);const T=G.zoomIn=new ee.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ne=G.zoomOut=new ee.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),Q=G.zoomBigIn=new ee.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ge=G.zoomBigOut=new ee.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),pe=G.zoomUpIn=new ee.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Ce=G.zoomUpOut=new ee.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),he=G.zoomLeftIn=new ee.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),st=G.zoomLeftOut=new ee.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),re=G.zoomRightIn=new ee.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Se=G.zoomRightOut=new ee.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),se=G.zoomDownIn=new ee.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),de=G.zoomDownOut=new ee.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),xe={zoom:{inKeyframes:T,outKeyframes:ne},"zoom-big":{inKeyframes:Q,outKeyframes:ge},"zoom-big-fast":{inKeyframes:Q,outKeyframes:ge},"zoom-left":{inKeyframes:he,outKeyframes:st},"zoom-right":{inKeyframes:re,outKeyframes:Se},"zoom-up":{inKeyframes:pe,outKeyframes:Ce},"zoom-down":{inKeyframes:se,outKeyframes:de}},le=(Ue,Et)=>{const{antCls:mt}=Ue,Wt=`${mt}-${Et}`,{inKeyframes:Rt,outKeyframes:Tt}=xe[Et];return[(0,ae.initMotion)(Wt,Rt,Tt,Et==="zoom-big-fast"?Ue.motionDurationFast:Ue.motionDurationMid),{[`
        ${Wt}-enter,
        ${Wt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:Ue.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Wt}-leave`]:{animationTimingFunction:Ue.motionEaseInOutCirc}}]};G.initZoomMotion=le},22548:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.operationUnit=void 0;const D=ee=>({color:ee.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${ee.motionDurationSlow}`,"&:focus, &:hover":{color:ee.colorLinkHover},"&:active":{color:ee.colorLinkActive}});G.operationUnit=D},9064:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MAX_VERTICAL_CONTENT_RADIUS=void 0,G.default=Q,G.getArrowOffsetToken=T;var ee=D(51337);const ae=G.MAX_VERTICAL_CONTENT_RADIUS=8;function T(ge){const{contentRadius:pe,limitVerticalRadius:Ce}=ge,he=pe>12?pe+2:12;return{arrowOffsetHorizontal:he,arrowOffsetVertical:Ce?ae:he}}function ne(ge,pe){return ge?pe:{}}function Q(ge,pe,Ce){const{componentCls:he,boxShadowPopoverArrow:st,arrowOffsetVertical:re,arrowOffsetHorizontal:Se}=ge,{arrowDistance:se=0,arrowPlacement:de={left:!0,right:!0,top:!0,bottom:!0}}=Ce||{};return{[he]:Object.assign(Object.assign(Object.assign(Object.assign({[`${he}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,ee.genRoundedArrow)(ge,pe,st)),{"&:before":{background:pe}})]},ne(!!de.top,{[[`&-placement-top > ${he}-arrow`,`&-placement-topLeft > ${he}-arrow`,`&-placement-topRight > ${he}-arrow`].join(",")]:{bottom:se,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${he}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${he}-arrow`]:{left:{_skip_check_:!0,value:Se}},[`&-placement-topRight > ${he}-arrow`]:{right:{_skip_check_:!0,value:Se}}})),ne(!!de.bottom,{[[`&-placement-bottom > ${he}-arrow`,`&-placement-bottomLeft > ${he}-arrow`,`&-placement-bottomRight > ${he}-arrow`].join(",")]:{top:se,transform:"translateY(-100%)"},[`&-placement-bottom > ${he}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${he}-arrow`]:{left:{_skip_check_:!0,value:Se}},[`&-placement-bottomRight > ${he}-arrow`]:{right:{_skip_check_:!0,value:Se}}})),ne(!!de.left,{[[`&-placement-left > ${he}-arrow`,`&-placement-leftTop > ${he}-arrow`,`&-placement-leftBottom > ${he}-arrow`].join(",")]:{right:{_skip_check_:!0,value:se},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${he}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${he}-arrow`]:{top:re},[`&-placement-leftBottom > ${he}-arrow`]:{bottom:re}})),ne(!!de.right,{[[`&-placement-right > ${he}-arrow`,`&-placement-rightTop > ${he}-arrow`,`&-placement-rightBottom > ${he}-arrow`].join(",")]:{left:{_skip_check_:!0,value:se},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${he}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${he}-arrow`]:{top:re},[`&-placement-rightBottom > ${he}-arrow`]:{bottom:re}}))}}},51337:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genRoundedArrow=void 0,G.getArrowToken=ae;var ee=D(6731);function ae(ne){const{sizePopupArrow:Q,borderRadiusXS:ge,borderRadiusOuter:pe}=ne,Ce=Q/2,he=0,st=Ce,re=pe*1/Math.sqrt(2),Se=Ce-pe*(1-1/Math.sqrt(2)),se=Ce-ge*(1/Math.sqrt(2)),de=pe*(Math.sqrt(2)-1)+ge*(1/Math.sqrt(2)),xe=2*Ce-se,le=de,Ue=2*Ce-re,Et=Se,mt=2*Ce-he,Wt=st,Rt=Ce*Math.sqrt(2)+pe*(Math.sqrt(2)-2),Tt=pe*(Math.sqrt(2)-1),Ze=`polygon(${Tt}px 100%, 50% ${Tt}px, ${2*Ce-Tt}px 100%, ${Tt}px 100%)`,Ie=`path('M ${he} ${st} A ${pe} ${pe} 0 0 0 ${re} ${Se} L ${se} ${de} A ${ge} ${ge} 0 0 1 ${xe} ${le} L ${Ue} ${Et} A ${pe} ${pe} 0 0 0 ${mt} ${Wt} Z')`;return{arrowShadowWidth:Rt,arrowPath:Ie,arrowPolygon:Ze}}const T=(ne,Q,ge)=>{const{sizePopupArrow:pe,arrowPolygon:Ce,arrowPath:he,arrowShadowWidth:st,borderRadiusXS:re,calc:Se}=ne;return{pointerEvents:"none",width:pe,height:pe,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:pe,height:Se(pe).div(2).equal(),background:Q,clipPath:{_multi_value_:!0,value:[Ce,he]},content:'""'},"&::after":{content:'""',position:"absolute",width:st,height:st,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,ee.unit)(re)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:ge,zIndex:0,background:"transparent"}}};G.genRoundedArrow=T},89329:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.defaultTheme=G.defaultConfig=G.DesignTokenContext=void 0;var ae=ee(D(67294)),T=D(6731),ne=ee(D(9924)),Q=ee(D(98411));const ge=G.defaultTheme=(0,T.createTheme)(ne.default),pe=G.defaultConfig={token:Q.default,override:{override:Q.default},hashed:!0},Ce=G.DesignTokenContext=ae.default.createContext(pe)},36496:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"PresetColors",{enumerable:!0,get:function(){return ee.PresetColors}});var ee=D(81342)},81342:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.PresetColors=void 0;const D=G.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(It,G,D){"use strict";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"DesignTokenContext",{enumerable:!0,get:function(){return Se.DesignTokenContext}}),Object.defineProperty(G,"PresetColors",{enumerable:!0,get:function(){return ne.PresetColors}}),Object.defineProperty(G,"calc",{enumerable:!0,get:function(){return st.default}}),Object.defineProperty(G,"defaultConfig",{enumerable:!0,get:function(){return Se.defaultConfig}}),Object.defineProperty(G,"genComponentStyleHook",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(G,"genPresetColor",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(G,"genStyleHooks",{enumerable:!0,get:function(){return ge.genStyleHooks}}),Object.defineProperty(G,"genSubStyleComponent",{enumerable:!0,get:function(){return ge.genSubStyleComponent}}),Object.defineProperty(G,"getLineHeight",{enumerable:!0,get:function(){return re.getLineHeight}}),Object.defineProperty(G,"mergeToken",{enumerable:!0,get:function(){return Ce.merge}}),Object.defineProperty(G,"statisticToken",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(G,"useResetIconStyle",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(G,"useStyleRegister",{enumerable:!0,get:function(){return T.useStyleRegister}}),Object.defineProperty(G,"useToken",{enumerable:!0,get:function(){return Q.default}});var T=D(6731),ne=D(36496),Q=ae(D(41401)),ge=ee(D(3737)),pe=ae(D(36219)),Ce=ee(D(99636)),he=ae(D(54894)),st=ae(D(22996)),re=D(62231),Se=D(89329)},26162:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getSolidColor=G.getAlphaColor=void 0;var ee=D(131);const ae=(ne,Q)=>new ee.TinyColor(ne).setAlpha(Q).toRgbString();G.getAlphaColor=ae;const T=(ne,Q)=>new ee.TinyColor(ne).darken(Q).toHexString();G.getSolidColor=T},80373:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.generateNeutralColorPalettes=G.generateColorPalettes=void 0;var ee=D(78589),ae=D(26162);const T=Q=>{const ge=(0,ee.generate)(Q);return{1:ge[0],2:ge[1],3:ge[2],4:ge[3],5:ge[4],6:ge[5],7:ge[6],8:ge[4],9:ge[5],10:ge[6]}};G.generateColorPalettes=T;const ne=(Q,ge)=>{const pe=Q||"#fff",Ce=ge||"#000";return{colorBgBase:pe,colorTextBase:Ce,colorText:(0,ae.getAlphaColor)(Ce,.88),colorTextSecondary:(0,ae.getAlphaColor)(Ce,.65),colorTextTertiary:(0,ae.getAlphaColor)(Ce,.45),colorTextQuaternary:(0,ae.getAlphaColor)(Ce,.25),colorFill:(0,ae.getAlphaColor)(Ce,.15),colorFillSecondary:(0,ae.getAlphaColor)(Ce,.06),colorFillTertiary:(0,ae.getAlphaColor)(Ce,.04),colorFillQuaternary:(0,ae.getAlphaColor)(Ce,.02),colorBgLayout:(0,ae.getSolidColor)(pe,4),colorBgContainer:(0,ae.getSolidColor)(pe,0),colorBgElevated:(0,ae.getSolidColor)(pe,0),colorBgSpotlight:(0,ae.getAlphaColor)(Ce,.85),colorBgBlur:"transparent",colorBorder:(0,ae.getSolidColor)(pe,15),colorBorderSecondary:(0,ae.getSolidColor)(pe,6)}};G.generateNeutralColorPalettes=ne},9924:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=st;var ae=D(78589),T=ee(D(54730)),ne=ee(D(19216)),Q=D(98411),ge=ee(D(10805)),pe=ee(D(81594)),Ce=D(80373),he=ee(D(69853));function st(re){const Se=Object.keys(Q.defaultPresetColors).map(se=>{const de=(0,ae.generate)(re[se]);return new Array(10).fill(1).reduce((xe,le,Ue)=>(xe[`${se}-${Ue+1}`]=de[Ue],xe[`${se}${Ue+1}`]=de[Ue],xe),{})}).reduce((se,de)=>(se=Object.assign(Object.assign({},se),de),se),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},re),Se),(0,ge.default)(re,{generateColorPalettes:Ce.generateColorPalettes,generateNeutralColorPalettes:Ce.generateNeutralColorPalettes})),(0,he.default)(re.fontSize)),(0,ne.default)(re)),(0,T.default)(re)),(0,pe.default)(re))}},98411:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.defaultPresetColors=G.default=void 0;const D=G.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ee=Object.assign(Object.assign({},D),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var ae=G.default=ee},10805:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ae;var ee=D(131);function ae(T,ne){let{generateColorPalettes:Q,generateNeutralColorPalettes:ge}=ne;const{colorSuccess:pe,colorWarning:Ce,colorError:he,colorInfo:st,colorPrimary:re,colorBgBase:Se,colorTextBase:se}=T,de=Q(re),xe=Q(pe),le=Q(Ce),Ue=Q(he),Et=Q(st),mt=ge(Se,se),Wt=T.colorLink||T.colorInfo,Rt=Q(Wt);return Object.assign(Object.assign({},mt),{colorPrimaryBg:de[1],colorPrimaryBgHover:de[2],colorPrimaryBorder:de[3],colorPrimaryBorderHover:de[4],colorPrimaryHover:de[5],colorPrimary:de[6],colorPrimaryActive:de[7],colorPrimaryTextHover:de[8],colorPrimaryText:de[9],colorPrimaryTextActive:de[10],colorSuccessBg:xe[1],colorSuccessBgHover:xe[2],colorSuccessBorder:xe[3],colorSuccessBorderHover:xe[4],colorSuccessHover:xe[4],colorSuccess:xe[6],colorSuccessActive:xe[7],colorSuccessTextHover:xe[8],colorSuccessText:xe[9],colorSuccessTextActive:xe[10],colorErrorBg:Ue[1],colorErrorBgHover:Ue[2],colorErrorBorder:Ue[3],colorErrorBorderHover:Ue[4],colorErrorHover:Ue[5],colorError:Ue[6],colorErrorActive:Ue[7],colorErrorTextHover:Ue[8],colorErrorText:Ue[9],colorErrorTextActive:Ue[10],colorWarningBg:le[1],colorWarningBgHover:le[2],colorWarningBorder:le[3],colorWarningBorderHover:le[4],colorWarningHover:le[4],colorWarning:le[6],colorWarningActive:le[7],colorWarningTextHover:le[8],colorWarningText:le[9],colorWarningTextActive:le[10],colorInfoBg:Et[1],colorInfoBgHover:Et[2],colorInfoBorder:Et[3],colorInfoBorderHover:Et[4],colorInfoHover:Et[4],colorInfo:Et[6],colorInfoActive:Et[7],colorInfoTextHover:Et[8],colorInfoText:Et[9],colorInfoTextActive:Et[10],colorLinkHover:Rt[4],colorLink:Rt[6],colorLinkActive:Rt[7],colorBgMask:new ee.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=T;var ae=ee(D(78117));function T(ne){const{motionUnit:Q,motionBase:ge,borderRadius:pe,lineWidth:Ce}=ne;return Object.assign({motionDurationFast:`${(ge+Q).toFixed(1)}s`,motionDurationMid:`${(ge+Q*2).toFixed(1)}s`,motionDurationSlow:`${(ge+Q*3).toFixed(1)}s`,lineWidthBold:Ce+1},(0,ae.default)(pe))}},54730:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const D=ae=>{const{controlHeight:T}=ae;return{controlHeightSM:T*.75,controlHeightXS:T*.5,controlHeightLG:T*1.25}};var ee=G.default=D},69853:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(62231));const T=Q=>{const ge=(0,ae.default)(Q),pe=ge.map(xe=>xe.size),Ce=ge.map(xe=>xe.lineHeight),he=pe[1],st=pe[0],re=pe[2],Se=Ce[1],se=Ce[0],de=Ce[2];return{fontSizeSM:st,fontSize:he,fontSizeLG:re,fontSizeXL:pe[3],fontSizeHeading1:pe[6],fontSizeHeading2:pe[5],fontSizeHeading3:pe[4],fontSizeHeading4:pe[3],fontSizeHeading5:pe[2],lineHeight:Se,lineHeightLG:de,lineHeightSM:se,fontHeight:Math.round(Se*he),fontHeightLG:Math.round(de*re),fontHeightSM:Math.round(se*st),lineHeightHeading1:Ce[6],lineHeightHeading2:Ce[5],lineHeightHeading3:Ce[4],lineHeightHeading4:Ce[3],lineHeightHeading5:Ce[2]}};var ne=G.default=T},62231:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ee,G.getLineHeight=D;function D(ae){return(ae+8)/ae}function ee(ae){const T=new Array(10).fill(null).map((ne,Q)=>{const ge=Q-1,pe=ae*Math.pow(2.71828,ge/5),Ce=Q>1?Math.floor(pe):Math.ceil(pe);return Math.floor(Ce/2)*2});return T[1]=ae,T.map(ne=>({size:ne,lineHeight:D(ne)}))}},78117:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const D=ae=>{let T=ae,ne=ae,Q=ae,ge=ae;return ae<6&&ae>=5?T=ae+1:ae<16&&ae>=6?T=ae+2:ae>=16&&(T=16),ae<7&&ae>=5?ne=4:ae<8&&ae>=7?ne=5:ae<14&&ae>=8?ne=6:ae<16&&ae>=14?ne=7:ae>=16&&(ne=8),ae<6&&ae>=2?Q=1:ae>=6&&(Q=2),ae>4&&ae<8?ge=4:ae>=8&&(ge=6),{borderRadius:ae,borderRadiusXS:Q,borderRadiusSM:ne,borderRadiusLG:T,borderRadiusOuter:ge}};var ee=G.default=D},19216:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=D;function D(ee){const{sizeUnit:ae,sizeStep:T}=ee;return{sizeXXL:ae*(T+8),sizeXL:ae*(T+4),sizeLG:ae*(T+2),sizeMD:ae*(T+1),sizeMS:ae*T,size:ae*T,sizeSM:ae*(T-1),sizeXS:ae*(T-2),sizeXXS:ae*(T-3)}}},41401:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=se,G.unitless=G.ignore=G.getComputedToken=void 0;var ae=ee(D(67294)),T=D(6731),ne=ee(D(87629)),Q=D(89329),ge=ee(D(98411)),pe=ee(D(27722)),Ce=function(de,xe){var le={};for(var Ue in de)Object.prototype.hasOwnProperty.call(de,Ue)&&xe.indexOf(Ue)<0&&(le[Ue]=de[Ue]);if(de!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Et=0,Ue=Object.getOwnPropertySymbols(de);Et<Ue.length;Et++)xe.indexOf(Ue[Et])<0&&Object.prototype.propertyIsEnumerable.call(de,Ue[Et])&&(le[Ue[Et]]=de[Ue[Et]]);return le};const he=G.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},st=G.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},re={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Se=(de,xe,le)=>{const Ue=le.getDerivativeToken(de),{override:Et}=xe,mt=Ce(xe,["override"]);let Wt=Object.assign(Object.assign({},Ue),{override:Et});return Wt=(0,pe.default)(Wt),mt&&Object.entries(mt).forEach(Rt=>{let[Tt,Ze]=Rt;const{theme:Ie}=Ze,Qe=Ce(Ze,["theme"]);let it=Qe;Ie&&(it=Se(Object.assign(Object.assign({},Wt),Qe),{override:Qe},Ie)),Wt[Tt]=it}),Wt};G.getComputedToken=Se;function se(){const{token:de,hashed:xe,theme:le,override:Ue,cssVar:Et}=ae.default.useContext(Q.DesignTokenContext),mt=`${ne.default}-${xe||""}`,Wt=le||Q.defaultTheme,[Rt,Tt,Ze]=(0,T.useCacheToken)(Wt,[ge.default,de],{salt:mt,override:Ue,getComputedToken:Se,formatToken:pe.default,cssVar:Et&&{prefix:Et.prefix,key:Et.key,unitless:he,ignore:st,preserve:re}});return[Wt,Ze,xe?Tt:"",Rt,Et]}},27722:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ge;var ae=D(131),T=ee(D(98411)),ne=ee(D(83609)),Q=function(pe,Ce){var he={};for(var st in pe)Object.prototype.hasOwnProperty.call(pe,st)&&Ce.indexOf(st)<0&&(he[st]=pe[st]);if(pe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,st=Object.getOwnPropertySymbols(pe);re<st.length;re++)Ce.indexOf(st[re])<0&&Object.prototype.propertyIsEnumerable.call(pe,st[re])&&(he[st[re]]=pe[st[re]]);return he};function ge(pe){const{override:Ce}=pe,he=Q(pe,["override"]),st=Object.assign({},Ce);Object.keys(T.default).forEach(mt=>{delete st[mt]});const re=Object.assign(Object.assign({},he),st),Se=480,se=576,de=768,xe=992,le=1200,Ue=1600;if(re.motion===!1){const mt="0s";re.motionDurationFast=mt,re.motionDurationMid=mt,re.motionDurationSlow=mt}return Object.assign(Object.assign(Object.assign({},re),{colorFillContent:re.colorFillSecondary,colorFillContentHover:re.colorFill,colorFillAlter:re.colorFillQuaternary,colorBgContainerDisabled:re.colorFillTertiary,colorBorderBg:re.colorBgContainer,colorSplit:(0,ne.default)(re.colorBorderSecondary,re.colorBgContainer),colorTextPlaceholder:re.colorTextQuaternary,colorTextDisabled:re.colorTextQuaternary,colorTextHeading:re.colorText,colorTextLabel:re.colorTextSecondary,colorTextDescription:re.colorTextTertiary,colorTextLightSolid:re.colorWhite,colorHighlight:re.colorError,colorBgTextHover:re.colorFillSecondary,colorBgTextActive:re.colorFill,colorIcon:re.colorTextTertiary,colorIconHover:re.colorText,colorErrorOutline:(0,ne.default)(re.colorErrorBg,re.colorBgContainer),colorWarningOutline:(0,ne.default)(re.colorWarningBg,re.colorBgContainer),fontSizeIcon:re.fontSizeSM,lineWidthFocus:re.lineWidth*4,lineWidth:re.lineWidth,controlOutlineWidth:re.lineWidth*2,controlInteractiveSize:re.controlHeight/2,controlItemBgHover:re.colorFillTertiary,controlItemBgActive:re.colorPrimaryBg,controlItemBgActiveHover:re.colorPrimaryBgHover,controlItemBgActiveDisabled:re.colorFill,controlTmpOutline:re.colorFillQuaternary,controlOutline:(0,ne.default)(re.colorPrimaryBg,re.colorBgContainer),lineType:re.lineType,borderRadius:re.borderRadius,borderRadiusXS:re.borderRadiusXS,borderRadiusSM:re.borderRadiusSM,borderRadiusLG:re.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:re.sizeXXS,paddingXS:re.sizeXS,paddingSM:re.sizeSM,padding:re.size,paddingMD:re.sizeMD,paddingLG:re.sizeLG,paddingXL:re.sizeXL,paddingContentHorizontalLG:re.sizeLG,paddingContentVerticalLG:re.sizeMS,paddingContentHorizontal:re.sizeMS,paddingContentVertical:re.sizeSM,paddingContentHorizontalSM:re.size,paddingContentVerticalSM:re.sizeXS,marginXXS:re.sizeXXS,marginXS:re.sizeXS,marginSM:re.sizeSM,margin:re.size,marginMD:re.sizeMD,marginLG:re.sizeLG,marginXL:re.sizeXL,marginXXL:re.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:Se,screenXSMin:Se,screenXSMax:se-1,screenSM:se,screenSMMin:se,screenSMMax:de-1,screenMD:de,screenMDMin:de,screenMDMax:xe-1,screenLG:xe,screenLGMin:xe,screenLGMax:le-1,screenXL:le,screenXLMin:le,screenXLMax:Ue-1,screenXXL:Ue,screenXXLMin:Ue,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new ae.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new ae.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new ae.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),st)}},24312:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(56690)),T=ee(D(89728)),ne=ee(D(76976)),Q=ee(D(61655)),ge=ee(D(38194));const pe="CALC_UNIT";function Ce(st){return typeof st=="number"?`${st}${pe}`:st}let he=G.default=function(st){(0,Q.default)(re,st);function re(Se){var se;return(0,ae.default)(this,re),se=(0,ne.default)(this,re),se.result="",Se instanceof re?se.result=`(${Se.result})`:typeof Se=="number"?se.result=Ce(Se):typeof Se=="string"&&(se.result=Se),se}return(0,T.default)(re,[{key:"add",value:function(se){return se instanceof re?this.result=`${this.result} + ${se.getResult()}`:(typeof se=="number"||typeof se=="string")&&(this.result=`${this.result} + ${Ce(se)}`),this.lowPriority=!0,this}},{key:"sub",value:function(se){return se instanceof re?this.result=`${this.result} - ${se.getResult()}`:(typeof se=="number"||typeof se=="string")&&(this.result=`${this.result} - ${Ce(se)}`),this.lowPriority=!0,this}},{key:"mul",value:function(se){return this.lowPriority&&(this.result=`(${this.result})`),se instanceof re?this.result=`${this.result} * ${se.getResult(!0)}`:(typeof se=="number"||typeof se=="string")&&(this.result=`${this.result} * ${se}`),this.lowPriority=!1,this}},{key:"div",value:function(se){return this.lowPriority&&(this.result=`(${this.result})`),se instanceof re?this.result=`${this.result} / ${se.getResult(!0)}`:(typeof se=="number"||typeof se=="string")&&(this.result=`${this.result} / ${se}`),this.lowPriority=!1,this}},{key:"getResult",value:function(se){return this.lowPriority||se?`(${this.result})`:this.result}},{key:"equal",value:function(se){const{unit:de=!0}=se||{},xe=new RegExp(`${pe}`,"g");return this.result=this.result.replace(xe,de?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}]),re}(ge.default)},14774:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(56690)),T=ee(D(89728)),ne=ee(D(76976)),Q=ee(D(61655)),ge=ee(D(38194));let pe=G.default=function(Ce){(0,Q.default)(he,Ce);function he(st){var re;return(0,ae.default)(this,he),re=(0,ne.default)(this,he),re.result=0,st instanceof he?re.result=st.result:typeof st=="number"&&(re.result=st),re}return(0,T.default)(he,[{key:"add",value:function(re){return re instanceof he?this.result+=re.result:typeof re=="number"&&(this.result+=re),this}},{key:"sub",value:function(re){return re instanceof he?this.result-=re.result:typeof re=="number"&&(this.result-=re),this}},{key:"mul",value:function(re){return re instanceof he?this.result*=re.result:typeof re=="number"&&(this.result*=re),this}},{key:"div",value:function(re){return re instanceof he?this.result/=re.result:typeof re=="number"&&(this.result/=re),this}},{key:"equal",value:function(){return this.result}}]),he}(ge.default)},38194:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(89728)),T=ee(D(56690));let ne=(0,ae.default)(function ge(){(0,T.default)(this,ge)});var Q=G.default=ne},22996:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(14774)),T=ee(D(24312));const ne=ge=>{const pe=ge==="css"?T.default:ae.default;return Ce=>new pe(Ce)};var Q=G.default=ne},3737:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=le,G.genSubStyleComponent=G.genStyleHooks=void 0;var T=ae(D(67294)),ne=D(6731),Q=D(56790),ge=D(7177),pe=D(98078),Ce=ae(D(41401)),he=ee(D(22996)),st=ee(D(1657)),re=ae(D(99636)),Se=ee(D(54894));const se=(Wt,Rt,Tt)=>{var Ze;return typeof Tt=="function"?Tt((0,re.merge)(Rt,(Ze=Rt[Wt])!==null&&Ze!==void 0?Ze:{})):Tt!=null?Tt:{}},de=(Wt,Rt,Tt,Ze)=>{const Ie=Object.assign({},Rt[Wt]);if(Ze!=null&&Ze.deprecatedTokens){const{deprecatedTokens:it}=Ze;it.forEach(De=>{let[cn,qe]=De;var Pt;(Ie!=null&&Ie[cn]||Ie!=null&&Ie[qe])&&((Pt=Ie[qe])!==null&&Pt!==void 0||(Ie[qe]=Ie==null?void 0:Ie[cn]))})}const Qe=Object.assign(Object.assign({},Tt),Ie);return Object.keys(Qe).forEach(it=>{Qe[it]===Rt[it]&&delete Qe[it]}),Qe},xe=(Wt,Rt)=>`${[Rt,Wt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function le(Wt,Rt,Tt){let Ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Ie=Array.isArray(Wt)?Wt:[Wt,Wt],[Qe]=Ie,it=Ie.join("-");return function(De){let cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:De;const[qe,Pt,Le,pt,at]=(0,Ce.default)(),{getPrefixCls:nt,iconPrefixCls:Ct,csp:rt}=(0,T.useContext)(ge.ConfigContext),vt=nt(),Ve=at?"css":"js",hn=(0,he.default)(Ve),{max:yn,min:ir}=(0,st.default)(Ve),Qn={theme:qe,token:pt,hashId:Le,nonce:()=>rt==null?void 0:rt.nonce,clientOnly:Ze.clientOnly,order:Ze.order||-999};return(0,ne.useStyleRegister)(Object.assign(Object.assign({},Qn),{clientOnly:!1,path:["Shared",vt]}),()=>[{"&":(0,pe.genLinkStyle)(pt)}]),(0,Se.default)(Ct,rt),[(0,ne.useStyleRegister)(Object.assign(Object.assign({},Qn),{path:[it,De,Ct]}),()=>{if(Ze.injectStyle===!1)return[];const{token:En,flush:Tn}=(0,re.default)(pt),lr=se(Qe,Pt,Tt),ln=`.${De}`,Lt=de(Qe,Pt,lr,{deprecatedTokens:Ze.deprecatedTokens});at&&Object.keys(lr).forEach(Fe=>{lr[Fe]=`var(${(0,ne.token2CSSVar)(Fe,xe(Qe,at.prefix))})`});const bn=(0,re.merge)(En,{componentCls:ln,prefixCls:De,iconCls:`.${Ct}`,antCls:`.${vt}`,calc:hn,max:yn,min:ir},at?lr:Lt),Xe=Rt(bn,{hashId:Le,prefixCls:De,rootPrefixCls:vt,iconPrefixCls:Ct});return Tn(Qe,Lt),[Ze.resetStyle===!1?null:(0,pe.genCommonStyle)(bn,De,cn),Xe]}),Le]}}const Ue=(Wt,Rt,Tt,Ze)=>{const Ie=le(Wt,Rt,Tt,Object.assign({resetStyle:!1,order:-998},Ze));return it=>{let{prefixCls:De,rootCls:cn=De}=it;return Ie(De,cn),null}};G.genSubStyleComponent=Ue;const Et=(Wt,Rt,Tt)=>{function Ze(qe){return`${Wt}${qe.slice(0,1).toUpperCase()}${qe.slice(1)}`}const{unitless:Ie={},injectStyle:Qe=!0}=Tt!=null?Tt:{},it={[Ze("zIndexPopup")]:!0};Object.keys(Ie).forEach(qe=>{it[Ze(qe)]=Ie[qe]});const De=qe=>{let{rootCls:Pt,cssVar:Le}=qe;const[,pt]=(0,Ce.default)();return(0,ne.useCSSVarRegister)({path:[Wt],prefix:Le.prefix,key:Le==null?void 0:Le.key,unitless:Object.assign(Object.assign({},Ce.unitless),it),ignore:Ce.ignore,token:pt,scope:Pt},()=>{const at=se(Wt,pt,Rt),nt=de(Wt,pt,at,{deprecatedTokens:Tt==null?void 0:Tt.deprecatedTokens});return Object.keys(at).forEach(Ct=>{nt[Ze(Ct)]=nt[Ct],delete nt[Ct]}),nt}),null};return qe=>{const[,,,,Pt]=(0,Ce.default)();return[Le=>Qe&&Pt?T.default.createElement(T.default.Fragment,null,T.default.createElement(De,{rootCls:qe,cssVar:Pt,component:Wt}),Le):Le,Pt==null?void 0:Pt.key]}},mt=(Wt,Rt,Tt,Ze)=>{const Ie=le(Wt,Rt,Tt,Ze),Qe=Et(Array.isArray(Wt)?Wt[0]:Wt,Tt,Ze);return function(it){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it;const[,cn]=Ie(it,De),[qe,Pt]=Qe(De);return[qe,cn,Pt]}};G.genStyleHooks=mt},36219:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ae;var ee=D(36496);function ae(T,ne){return ee.PresetColors.reduce((Q,ge)=>{const pe=T[`${ge}1`],Ce=T[`${ge}3`],he=T[`${ge}6`],st=T[`${ge}7`];return Object.assign(Object.assign({},Q),ne(ge,{lightColor:pe,lightBorderColor:Ce,darkColor:he,textColor:st}))},{})}},83609:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ee=D(131);function ae(Q){return Q>=0&&Q<=255}function T(Q,ge){const{r:pe,g:Ce,b:he,a:st}=new ee.TinyColor(Q).toRgb();if(st<1)return Q;const{r:re,g:Se,b:se}=new ee.TinyColor(ge).toRgb();for(let de=.01;de<=1;de+=.01){const xe=Math.round((pe-re*(1-de))/de),le=Math.round((Ce-Se*(1-de))/de),Ue=Math.round((he-se*(1-de))/de);if(ae(xe)&&ae(le)&&ae(Ue))return new ee.TinyColor({r:xe,g:le,b:Ue,a:Math.round(de*100)/100}).toRgbString()}return new ee.TinyColor({r:pe,g:Ce,b:he,a:1}).toRgbString()}var ne=G.default=T},1657:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ae;var ee=D(6731);function ae(T){return T==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var ne=arguments.length,Q=new Array(ne),ge=0;ge<ne;ge++)Q[ge]=arguments[ge];return`max(${Q.map(pe=>(0,ee.unit)(pe)).join(",")})`},min:function(){for(var ne=arguments.length,Q=new Array(ne),ge=0;ge<ne;ge++)Q[ge]=arguments[ge];return`min(${Q.map(pe=>(0,ee.unit)(pe)).join(",")})`}}}},99636:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G._statistic_build_=void 0,G.merge=ae,G.statistic=void 0;const D=typeof CSSINJS_STATISTIC!="undefined";let ee=!0;function ae(){for(var Ce=arguments.length,he=new Array(Ce),st=0;st<Ce;st++)he[st]=arguments[st];if(!D)return Object.assign.apply(Object,[{}].concat(he));ee=!1;const re={};return he.forEach(Se=>{Object.keys(Se).forEach(de=>{Object.defineProperty(re,de,{configurable:!0,enumerable:!0,get:()=>Se[de]})})}),ee=!0,re}const T=G.statistic={},ne=G._statistic_build_={};function Q(){}const ge=Ce=>{let he,st=Ce,re=Q;return D&&typeof Proxy!="undefined"&&(he=new Set,st=new Proxy(Ce,{get(Se,se){return ee&&he.add(se),Se[se]}}),re=(Se,se)=>{var de;T[Se]={global:Array.from(he),component:Object.assign(Object.assign({},(de=T[Se])===null||de===void 0?void 0:de.component),se)}}),{token:st,keys:he,flush:re}};var pe=G.default=ge},54894:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=D(6731),T=D(98078),ne=ee(D(41401));const Q=(pe,Ce)=>{const[he,st]=(0,ne.default)();return(0,ae.useStyleRegister)({theme:he,token:st,hashId:"",path:["ant-design-icons",pe],nonce:()=>Ce==null?void 0:Ce.nonce},()=>[{[`.${pe}`]:Object.assign(Object.assign({},(0,T.resetIcon)()),{[`.${pe} .${pe}-icon`]:{display:"block"}})}])};var ge=G.default=Q},52040:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const D={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var ee=G.default=D},92125:function(It,G,D){"use strict";"use client";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(93967)),ne=D(92419),Q=ee(D(67294)),ge=D(31929),pe=ae(D(15086)),Ce=D(48125);const he=re=>{const{prefixCls:Se,className:se,placement:de="top",title:xe,color:le,overlayInnerStyle:Ue}=re,{getPrefixCls:Et}=Q.useContext(ge.ConfigContext),mt=Et("tooltip",Se),[Wt,Rt,Tt]=(0,pe.default)(mt),Ze=(0,Ce.parseColor)(mt,le),Ie=Ze.arrowStyle,Qe=Object.assign(Object.assign({},Ue),Ze.overlayStyle),it=(0,T.default)(Rt,Tt,mt,`${mt}-pure`,`${mt}-placement-${de}`,se,Ze.className);return Wt(Q.createElement("div",{className:it,style:Ie},Q.createElement("div",{className:`${mt}-arrow`}),Q.createElement(ne.Popup,Object.assign({},re,{className:Rt,prefixCls:mt,overlayInnerStyle:Qe}),xe)))};var st=G.default=he},94055:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(67294)),ne=ee(D(93967)),Q=ee(D(92419)),ge=ee(D(60869)),pe=D(56333),Ce=D(53683),he=ee(D(74132)),st=D(47419),re=D(13594),Se=ee(D(96877)),se=D(31929),de=D(46549),xe=D(3184),le=ee(D(92125)),Ue=ee(D(15086)),Et=D(48125),mt=function(Tt,Ze){var Ie={};for(var Qe in Tt)Object.prototype.hasOwnProperty.call(Tt,Qe)&&Ze.indexOf(Qe)<0&&(Ie[Qe]=Tt[Qe]);if(Tt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var it=0,Qe=Object.getOwnPropertySymbols(Tt);it<Qe.length;it++)Ze.indexOf(Qe[it])<0&&Object.prototype.propertyIsEnumerable.call(Tt,Qe[it])&&(Ie[Qe[it]]=Tt[Qe[it]]);return Ie};const Wt=T.forwardRef((Tt,Ze)=>{var Ie,Qe;const{prefixCls:it,openClassName:De,getTooltipContainer:cn,overlayClassName:qe,color:Pt,overlayInnerStyle:Le,children:pt,afterOpenChange:at,afterVisibleChange:nt,destroyTooltipOnHide:Ct,arrow:rt=!0,title:vt,overlay:Ve,builtinPlacements:hn,arrowPointAtCenter:yn=!1,autoAdjustOverflow:ir=!0}=Tt,Qn=!!rt,[,Ut]=(0,xe.useToken)(),{getPopupContainer:En,getPrefixCls:Tn,direction:lr}=T.useContext(se.ConfigContext),ln=(0,re.devUseWarning)("Tooltip"),Lt=T.useRef(null),bn=()=>{var Ge;(Ge=Lt.current)===null||Ge===void 0||Ge.forceAlign()};T.useImperativeHandle(Ze,()=>({forceAlign:bn,forcePopupAlign:()=>{ln.deprecated(!1,"forcePopupAlign","forceAlign"),bn()}}));const[Xe,Fe]=(0,ge.default)(!1,{value:(Ie=Tt.open)!==null&&Ie!==void 0?Ie:Tt.visible,defaultValue:(Qe=Tt.defaultOpen)!==null&&Qe!==void 0?Qe:Tt.defaultVisible}),on=!vt&&!Ve&&vt!==0,B=Ge=>{var gt,Bt;Fe(on?!1:Ge),on||((gt=Tt.onOpenChange)===null||gt===void 0||gt.call(Tt,Ge),(Bt=Tt.onVisibleChange)===null||Bt===void 0||Bt.call(Tt,Ge))},be=T.useMemo(()=>{var Ge,gt;let Bt=yn;return typeof rt=="object"&&(Bt=(gt=(Ge=rt.pointAtCenter)!==null&&Ge!==void 0?Ge:rt.arrowPointAtCenter)!==null&&gt!==void 0?gt:yn),hn||(0,he.default)({arrowPointAtCenter:Bt,autoAdjustOverflow:ir,arrowWidth:Qn?Ut.sizePopupArrow:0,borderRadius:Ut.borderRadius,offset:Ut.marginXXS,visibleFirst:!0})},[yn,rt,hn,Ut]),yt=T.useMemo(()=>vt===0?vt:Ve||vt||"",[Ve,vt]),Ee=T.createElement(de.NoCompactStyle,null,typeof yt=="function"?yt():yt),{getPopupContainer:Zt,placement:_n="top",mouseEnterDelay:Sn=.1,mouseLeaveDelay:Bn=.1,overlayStyle:or,rootClassName:dr}=Tt,gr=mt(Tt,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),wr=Tn("tooltip",it),Ar=Tn(),Ir=Tt["data-popover-inject"];let Nr=Xe;!("open"in Tt)&&!("visible"in Tt)&&on&&(Nr=!1);const Yr=T.isValidElement(pt)&&!(0,st.isFragment)(pt)?pt:T.createElement("span",null,pt),bt=Yr.props,ve=!bt.className||typeof bt.className=="string"?(0,ne.default)(bt.className,De||`${wr}-open`):bt.className,[ye,Ke,ht]=(0,Ue.default)(wr,!Ir),xt=(0,Et.parseColor)(wr,Pt),Jt=xt.arrowStyle,Dn=Object.assign(Object.assign({},Le),xt.overlayStyle),fr=(0,ne.default)(qe,{[`${wr}-rtl`]:lr==="rtl"},xt.className,dr,Ke,ht),[In,ke]=(0,pe.useZIndex)("Tooltip",gr.zIndex),Pe=T.createElement(Q.default,Object.assign({},gr,{zIndex:In,showArrow:Qn,placement:_n,mouseEnterDelay:Sn,mouseLeaveDelay:Bn,prefixCls:wr,overlayClassName:fr,overlayStyle:Object.assign(Object.assign({},Jt),or),getTooltipContainer:Zt||cn||En,ref:Lt,builtinPlacements:be,overlay:Ee,visible:Nr,onVisibleChange:B,afterVisibleChange:at!=null?at:nt,overlayInnerStyle:Dn,arrowContent:T.createElement("span",{className:`${wr}-arrow-content`}),motion:{motionName:(0,Ce.getTransitionName)(Ar,"zoom-big-fast",Tt.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!Ct}),Nr?(0,st.cloneElement)(Yr,{className:ve}):Yr);return ye(T.createElement(Se.default.Provider,{value:ke},Pe))});Wt._InternalPanelDoNotUseOrYouWillBeFired=le.default;var Rt=G.default=Wt},15086:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var ae=D(98078),T=D(42836),ne=ee(D(9064)),Q=D(3184),ge=D(6731),pe=D(51337);const Ce=re=>{const{componentCls:Se,tooltipMaxWidth:se,tooltipColor:de,tooltipBg:xe,tooltipBorderRadius:le,zIndexPopup:Ue,controlHeight:Et,boxShadowSecondary:mt,paddingSM:Wt,paddingXS:Rt}=re;return[{[Se]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,ae.resetComponent)(re)),{position:"absolute",zIndex:Ue,display:"block",width:"max-content",maxWidth:se,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":xe,[`${Se}-inner`]:{minWidth:Et,minHeight:Et,padding:`${(0,ge.unit)(re.calc(Wt).div(2).equal())} ${(0,ge.unit)(Rt)}`,color:de,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:xe,borderRadius:le,boxShadow:mt,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${Se}-inner`]:{borderRadius:re.min(le,ne.MAX_VERTICAL_CONTENT_RADIUS)}},[`${Se}-content`]:{position:"relative"}}),(0,Q.genPresetColor)(re,(Tt,Ze)=>{let{darkColor:Ie}=Ze;return{[`&${Se}-${Tt}`]:{[`${Se}-inner`]:{backgroundColor:Ie},[`${Se}-arrow`]:{"--antd-arrow-background-color":Ie}}}})),{"&-rtl":{direction:"rtl"}})},(0,ne.default)(re,"var(--antd-arrow-background-color)"),{[`${Se}-pure`]:{position:"relative",maxWidth:"none",margin:re.sizePopupArrow}}]},he=re=>Object.assign(Object.assign({zIndexPopup:re.zIndexPopupBase+70},(0,ne.getArrowOffsetToken)({contentRadius:re.borderRadius,limitVerticalRadius:!0})),(0,pe.getArrowToken)((0,Q.mergeToken)(re,{borderRadiusOuter:Math.min(re.borderRadiusOuter,4)})));G.prepareComponentToken=he;var st=G.default=function(Se){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,Q.genStyleHooks)("Tooltip",xe=>{const{borderRadius:le,colorTextLightSolid:Ue,colorBgSpotlight:Et}=xe,mt=(0,Q.mergeToken)(xe,{tooltipMaxWidth:250,tooltipColor:Ue,tooltipBorderRadius:le,tooltipBg:Et});return[Ce(mt),(0,T.initZoomMotion)(xe,"zoom-big-fast")]},he,{resetStyle:!1,injectStyle:se})(Se)}},48125:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.parseColor=ne;var ae=ee(D(93967)),T=D(45471);function ne(Q,ge){const pe=(0,T.isPresetColor)(ge),Ce=(0,ae.default)({[`${Q}-${ge}`]:ge&&pe}),he={},st={};return ge&&!pe&&(he.background=ge,st["--antd-arrow-background-color"]=ge),{className:Ce,overlayStyle:he,arrowStyle:st}}},6847:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=st;var T=ae(D(67294)),ne=ee(D(83874)),Q=ee(D(90091)),ge=ee(D(93967)),pe=ee(D(60938)),Ce=ee(D(94055)),he=D(81410);function st(re){const{prefixCls:Se,copied:se,locale:de={},onCopy:xe,iconOnly:le,tooltips:Ue,icon:Et}=re,mt=(0,he.toList)(Ue),Wt=(0,he.toList)(Et),{copied:Rt,copy:Tt}=de,Ze=se?(0,he.getNode)(mt[1],Rt):(0,he.getNode)(mt[0],Tt),Qe=typeof Ze=="string"?Ze:se?Rt:Tt;return T.createElement(Ce.default,{key:"copy",title:Ze},T.createElement(pe.default,{className:(0,ge.default)(`${Se}-copy`,{[`${Se}-copy-success`]:se,[`${Se}-copy-icon-only`]:le}),onClick:xe,"aria-label":Qe},se?(0,he.getNode)(Wt[1],T.createElement(ne.default,null),!0):(0,he.getNode)(Wt[0],T.createElement(Q.default,null),!0)))}},12385:function(It,G,D){"use strict";"use client";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=le;var T=ae(D(861)),ne=ee(D(67294)),Q=ae(D(45598)),ge=ae(D(82546));const pe=ne.forwardRef((Ue,Et)=>{let{style:mt,children:Wt}=Ue;const Rt=ne.useRef(null);return ne.useImperativeHandle(Et,()=>({isExceed:()=>{const Tt=Rt.current;return Tt.scrollHeight>Tt.clientHeight},getHeight:()=>Rt.current.clientHeight})),ne.createElement("span",{"aria-hidden":!0,ref:Rt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},mt)},Wt)});function Ce(Ue){const Et=typeof Ue;return Et==="string"||Et==="number"}function he(Ue){let Et=0;return Ue.forEach(mt=>{Ce(mt)?Et+=String(mt).length:Et+=1}),Et}function st(Ue,Et){let mt=0;const Wt=[];for(let Rt=0;Rt<Ue.length;Rt+=1){if(mt===Et)return Wt;const Tt=Ue[Rt],Ie=Ce(Tt)?String(Tt).length:1,Qe=mt+Ie;if(Qe>Et){const it=Et-mt;return Wt.push(String(Tt).slice(0,it)),Wt}Wt.push(Tt),mt=Qe}return Ue}const re=0,Se=1,se=2,de=3,xe={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function le(Ue){const{enableMeasure:Et,width:mt,text:Wt,children:Rt,rows:Tt,miscDeps:Ze,onEllipsis:Ie}=Ue,Qe=ne.useMemo(()=>(0,Q.default)(Wt),[Wt]),it=ne.useMemo(()=>he(Qe),[Wt]),De=ne.useMemo(()=>Rt(Qe,!1,!1),[Wt]),[cn,qe]=ne.useState(null),Pt=ne.useRef(null),Le=ne.useRef(null),pt=ne.useRef(null),at=ne.useRef(null),[nt,Ct]=ne.useState(re),[rt,vt]=ne.useState(0);(0,ge.default)(()=>{Ct(Et&&mt&&it?Se:re)},[mt,Wt,Tt,Et,Qe]),(0,ge.default)(()=>{var ir,Qn,Ut,En;if(nt===Se){const Tn=!!(!((ir=Le.current)===null||ir===void 0)&&ir.isExceed());Ct(Tn?se:de),qe(Tn?[0,it]:null);const lr=((Qn=Le.current)===null||Qn===void 0?void 0:Qn.getHeight())||0,ln=Tt===1?0:((Ut=pt.current)===null||Ut===void 0?void 0:Ut.getHeight())||0,Lt=((En=at.current)===null||En===void 0?void 0:En.getHeight())||0,bn=ln+Lt,Xe=Math.max(lr,bn);vt(Xe+1),Ie(Tn)}},[nt]);const Ve=cn?Math.ceil((cn[0]+cn[1])/2):0;(0,ge.default)(()=>{var ir;const[Qn,Ut]=cn||[0,0];if(Qn!==Ut){const Tn=(((ir=Pt.current)===null||ir===void 0?void 0:ir.getHeight())||0)>rt;let lr=Ve;Ut-Qn===1&&(lr=Tn?Qn:Ut),qe(Tn?[Qn,lr]:[lr,Ut])}},[cn,Ve]);const hn=ne.useMemo(()=>{if(nt!==se||!cn||cn[0]!==cn[1]){const ir=Rt(Qe,!1,!1);return nt!==de&&nt!==re?ne.createElement("span",{style:Object.assign(Object.assign({},xe),{WebkitLineClamp:Tt})},ir):ir}return Rt(st(Qe,cn[0]),!0,!0)},[nt,cn,Qe].concat((0,T.default)(Ze))),yn={width:mt,whiteSpace:"normal",margin:0,padding:0};return ne.createElement(ne.Fragment,null,hn,nt===Se&&ne.createElement(ne.Fragment,null,ne.createElement(pe,{style:Object.assign(Object.assign(Object.assign({},yn),xe),{WebkitLineClamp:Tt}),ref:Le},De),ne.createElement(pe,{style:Object.assign(Object.assign(Object.assign({},yn),xe),{WebkitLineClamp:Tt-1}),ref:pt},De),ne.createElement(pe,{style:Object.assign(Object.assign(Object.assign({},yn),xe),{WebkitLineClamp:1}),ref:at},Rt([],!0,!0))),nt===se&&cn&&cn[0]!==cn[1]&&ne.createElement(pe,{style:Object.assign(Object.assign({},yn),{top:400}),ref:Pt},Rt(st(Qe,Ve),!0,!0)))}},69274:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(67294)),ne=ee(D(94055));const Q=pe=>{let{enableEllipsis:Ce,isEllipsis:he,children:st,tooltipProps:re}=pe;return!(re!=null&&re.title)||!Ce?st:T.createElement(ne.default,Object.assign({open:he?void 0:!1},re),st)};var ge=G.default=Q},28460:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(67294)),ne=ee(D(10875)),Q=ee(D(93967)),ge=ee(D(20640)),pe=ee(D(9220)),Ce=ee(D(45598)),he=ee(D(82546)),st=ee(D(60869)),re=ee(D(18475)),Se=D(75531),se=D(38882),de=ee(D(60938)),xe=D(31929),le=ee(D(76647)),Ue=ee(D(94055)),Et=ee(D(69425)),mt=ee(D(92759)),Wt=ee(D(67312)),Rt=ee(D(89652)),Tt=ee(D(6847)),Ze=ee(D(12385)),Ie=ee(D(69274)),Qe=function(Pt,Le){var pt={};for(var at in Pt)Object.prototype.hasOwnProperty.call(Pt,at)&&Le.indexOf(at)<0&&(pt[at]=Pt[at]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nt=0,at=Object.getOwnPropertySymbols(Pt);nt<at.length;nt++)Le.indexOf(at[nt])<0&&Object.prototype.propertyIsEnumerable.call(Pt,at[nt])&&(pt[at[nt]]=Pt[at[nt]]);return pt};function it(Pt,Le){let{mark:pt,code:at,underline:nt,delete:Ct,strong:rt,keyboard:vt,italic:Ve}=Pt,hn=Le;function yn(ir,Qn){Qn&&(hn=T.createElement(ir,{},hn))}return yn("strong",rt),yn("u",nt),yn("del",Ct),yn("code",at),yn("mark",pt),yn("kbd",vt),yn("i",Ve),hn}const De="...",cn=T.forwardRef((Pt,Le)=>{var pt,at,nt;const{prefixCls:Ct,className:rt,style:vt,type:Ve,disabled:hn,children:yn,ellipsis:ir,editable:Qn,copyable:Ut,component:En,title:Tn}=Pt,lr=Qe(Pt,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:ln,direction:Lt}=T.useContext(xe.ConfigContext),[bn]=(0,le.default)("Text"),Xe=T.useRef(null),Fe=T.useRef(null),on=ln("typography",Ct),B=(0,re.default)(lr,["mark","code","delete","underline","strong","keyboard","italic"]),[be,yt]=(0,mt.default)(Qn),[Ee,Zt]=(0,st.default)(!1,{value:yt.editing}),{triggerType:_n=["icon"]}=yt,Sn=mi=>{var Je;mi&&((Je=yt.onStart)===null||Je===void 0||Je.call(yt)),Zt(mi)};(0,Wt.default)(()=>{var mi;Ee||(mi=Fe.current)===null||mi===void 0||mi.focus()},[Ee]);const Bn=mi=>{mi==null||mi.preventDefault(),Sn(!0)},or=mi=>{var Je;(Je=yt.onChange)===null||Je===void 0||Je.call(yt,mi),Sn(!1)},dr=()=>{var mi;(mi=yt.onCancel)===null||mi===void 0||mi.call(yt),Sn(!1)},[gr,wr]=(0,mt.default)(Ut),[Ar,Ir]=T.useState(!1),Nr=T.useRef(null),Yr={};wr.format&&(Yr.format=wr.format);const bt=()=>{Nr.current&&clearTimeout(Nr.current)},ve=mi=>{var Je;mi==null||mi.preventDefault(),mi==null||mi.stopPropagation(),(0,ge.default)(wr.text||String(yn)||"",Yr),Ir(!0),bt(),Nr.current=setTimeout(()=>{Ir(!1)},3e3),(Je=wr.onCopy)===null||Je===void 0||Je.call(wr,mi)};T.useEffect(()=>bt,[]);const[ye,Ke]=T.useState(!1),[ht,xt]=T.useState(!1),[Jt,Dn]=T.useState(!1),[fr,In]=T.useState(!1),[ke,Pe]=T.useState(!1),[Ge,gt]=T.useState(!0),[Bt,an]=(0,mt.default)(ir,{expandable:!1}),An=Bt&&!Jt,{rows:kt=1}=an,Dt=T.useMemo(()=>!An||an.suffix!==void 0||an.onEllipsis||an.expandable||be||gr,[An,an,be,gr]);(0,he.default)(()=>{Bt&&!Dt&&(Ke((0,se.isStyleSupport)("webkitLineClamp")),xt((0,se.isStyleSupport)("textOverflow")))},[Dt,Bt]);const dn=T.useMemo(()=>Dt?!1:kt===1?ht:ye,[Dt,ht,ye]),He=An&&(dn?ke:fr),ei=An&&kt===1&&dn,Tr=An&&kt>1&&dn,ii=mi=>{var Je;Dn(!0),(Je=an.onExpand)===null||Je===void 0||Je.call(an,mi)},[Di,vi]=T.useState(0),Br=mi=>{let{offsetWidth:Je}=mi;vi(Je)},Gr=mi=>{var Je;In(mi),fr!==mi&&((Je=an.onEllipsis)===null||Je===void 0||Je.call(an,mi))};T.useEffect(()=>{const mi=Xe.current;if(Bt&&dn&&mi){const Je=Tr?mi.offsetHeight<mi.scrollHeight:mi.offsetWidth<mi.scrollWidth;ke!==Je&&Pe(Je)}},[Bt,dn,yn,Tr,Ge,Di]),T.useEffect(()=>{const mi=Xe.current;if(typeof IntersectionObserver=="undefined"||!mi||!dn||!An)return;const Je=new IntersectionObserver(()=>{gt(!!mi.offsetParent)});return Je.observe(mi),()=>{Je.disconnect()}},[dn,An]);let bi={};an.tooltip===!0?bi={title:(pt=yt.text)!==null&&pt!==void 0?pt:yn}:T.isValidElement(an.tooltip)?bi={title:an.tooltip}:typeof an.tooltip=="object"?bi=Object.assign({title:(at=yt.text)!==null&&at!==void 0?at:yn},an.tooltip):bi={title:an.tooltip};const Ni=T.useMemo(()=>{const mi=Je=>["string","number"].includes(typeof Je);if(!(!Bt||dn)){if(mi(yt.text))return yt.text;if(mi(yn))return yn;if(mi(Tn))return Tn;if(mi(bi.title))return bi.title}},[Bt,dn,Tn,bi.title,He]);if(Ee)return T.createElement(Et.default,{value:(nt=yt.text)!==null&&nt!==void 0?nt:typeof yn=="string"?yn:"",onSave:or,onCancel:dr,onEnd:yt.onEnd,prefixCls:on,className:rt,style:vt,direction:Lt,component:En,maxLength:yt.maxLength,autoSize:yt.autoSize,enterIcon:yt.enterIcon});const Qa=()=>{const{expandable:mi,symbol:Je}=an;if(!mi)return null;let wt;return Je?wt=Je:wt=bn==null?void 0:bn.expand,T.createElement("a",{key:"expand",className:`${on}-expand`,onClick:ii,"aria-label":bn==null?void 0:bn.expand},wt)},Xi=()=>{if(!be)return;const{icon:mi,tooltip:Je}=yt,wt=(0,Ce.default)(Je)[0]||(bn==null?void 0:bn.edit),Kt=typeof wt=="string"?wt:"";return _n.includes("icon")?T.createElement(Ue.default,{key:"edit",title:Je===!1?"":wt},T.createElement(de.default,{ref:Fe,className:`${on}-edit`,onClick:Bn,"aria-label":Kt},mi||T.createElement(ne.default,{role:"button"}))):null},ao=()=>gr?T.createElement(Tt.default,Object.assign({key:"copy"},wr,{prefixCls:on,copied:Ar,locale:bn,onCopy:ve,iconOnly:yn==null})):null,ko=mi=>[mi&&Qa(),Xi(),ao()],Ba=mi=>[mi&&T.createElement("span",{"aria-hidden":!0,key:"ellipsis"},De),an.suffix,ko(mi)];return T.createElement(pe.default,{onResize:Br,disabled:!An},mi=>T.createElement(Ie.default,{tooltipProps:bi,enableEllipsis:An,isEllipsis:He},T.createElement(Rt.default,Object.assign({className:(0,Q.default)({[`${on}-${Ve}`]:Ve,[`${on}-disabled`]:hn,[`${on}-ellipsis`]:Bt,[`${on}-single-line`]:An&&kt===1,[`${on}-ellipsis-single-line`]:ei,[`${on}-ellipsis-multiple-line`]:Tr},rt),prefixCls:Ct,style:Object.assign(Object.assign({},vt),{WebkitLineClamp:Tr?kt:void 0}),component:En,ref:(0,Se.composeRef)(mi,Xe,Le),direction:Lt,onClick:_n.includes("text")?Bn:void 0,"aria-label":Ni==null?void 0:Ni.toString(),title:Tn},B),T.createElement(Ze.default,{enableMeasure:An&&!dn,text:yn,rows:kt,width:Di,onEllipsis:Gr,miscDeps:[Ar,Jt]},(Je,wt)=>{let Kt=Je;return Je.length&&wt&&Ni&&(Kt=T.createElement("span",{key:"show-content","aria-hidden":!0},Kt)),it(Pt,T.createElement(T.Fragment,null,Kt,Ba(wt)))}))))});var qe=G.default=cn},81410:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getNode=ee,G.toList=D;function D(ae){return ae===!1?[!1,!1]:Array.isArray(ae)?ae:[ae]}function ee(ae,T,ne){return ae===!0||ae===void 0?T:ae||ne&&T}},69425:function(It,G,D){"use strict";"use client";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(7224)),ne=ae(D(93967)),Q=ae(D(27712)),ge=ee(D(67294)),pe=D(47419),Ce=ae(D(14104)),he=ae(D(23461));const st=Se=>{const{prefixCls:se,"aria-label":de,className:xe,style:le,direction:Ue,maxLength:Et,autoSize:mt=!0,value:Wt,onSave:Rt,onCancel:Tt,onEnd:Ze,component:Ie,enterIcon:Qe=ge.createElement(T.default,null)}=Se,it=ge.useRef(null),De=ge.useRef(!1),cn=ge.useRef(),[qe,Pt]=ge.useState(Wt);ge.useEffect(()=>{Pt(Wt)},[Wt]),ge.useEffect(()=>{if(it.current&&it.current.resizableTextArea){const{textArea:Ut}=it.current.resizableTextArea;Ut.focus();const{length:En}=Ut.value;Ut.setSelectionRange(En,En)}},[]);const Le=Ut=>{let{target:En}=Ut;Pt(En.value.replace(/[\n\r]/g,""))},pt=()=>{De.current=!0},at=()=>{De.current=!1},nt=Ut=>{let{keyCode:En}=Ut;De.current||(cn.current=En)},Ct=()=>{Rt(qe.trim())},rt=Ut=>{let{keyCode:En,ctrlKey:Tn,altKey:lr,metaKey:ln,shiftKey:Lt}=Ut;cn.current===En&&!De.current&&!Tn&&!lr&&!ln&&!Lt&&(En===Q.default.ENTER?(Ct(),Ze==null||Ze()):En===Q.default.ESC&&Tt())},vt=()=>{Ct()},Ve=Ie?`${se}-${Ie}`:"",[hn,yn,ir]=(0,he.default)(se),Qn=(0,ne.default)(se,`${se}-edit-content`,{[`${se}-rtl`]:Ue==="rtl"},xe,Ve,yn,ir);return hn(ge.createElement("div",{className:Qn,style:le},ge.createElement(Ce.default,{ref:it,maxLength:Et,value:qe,onChange:Le,onKeyDown:nt,onKeyUp:rt,onCompositionStart:pt,onCompositionEnd:at,onBlur:vt,"aria-label":de,rows:1,autoSize:mt}),Qe!==null?(0,pe.cloneElement)(Qe,{className:`${se}-edit-content-confirm`}):null))};var re=G.default=st},34528:function(It,G,D){"use strict";var ee,ae=D(64836).default,T=D(75263).default;ee={value:!0},G.Z=void 0;var ne=T(D(67294)),Q=D(13594),ge=ae(D(28460)),pe=function(re,Se){var se={};for(var de in re)Object.prototype.hasOwnProperty.call(re,de)&&Se.indexOf(de)<0&&(se[de]=re[de]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var xe=0,de=Object.getOwnPropertySymbols(re);xe<de.length;xe++)Se.indexOf(de[xe])<0&&Object.prototype.propertyIsEnumerable.call(re,de[xe])&&(se[de[xe]]=re[de[xe]]);return se};const Ce=[1,2,3,4,5],he=ne.forwardRef((re,Se)=>{const{level:se=1}=re,de=pe(re,["level"]);let xe;return Ce.includes(se)?xe=`h${se}`:xe="h1",ne.createElement(ge.default,Object.assign({ref:Se},de,{component:xe}))});var st=G.Z=he},89652:function(It,G,D){"use strict";"use client";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var T=ae(D(67294)),ne=ee(D(93967)),Q=D(75531),ge=D(13594),pe=D(31929),Ce=ee(D(23461)),he=function(Se,se){var de={};for(var xe in Se)Object.prototype.hasOwnProperty.call(Se,xe)&&se.indexOf(xe)<0&&(de[xe]=Se[xe]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,xe=Object.getOwnPropertySymbols(Se);le<xe.length;le++)se.indexOf(xe[le])<0&&Object.prototype.propertyIsEnumerable.call(Se,xe[le])&&(de[xe[le]]=Se[xe[le]]);return de};const st=T.forwardRef((Se,se)=>{const{prefixCls:de,component:xe="article",className:le,rootClassName:Ue,setContentRef:Et,children:mt,direction:Wt,style:Rt}=Se,Tt=he(Se,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Ze,direction:Ie,typography:Qe}=T.useContext(pe.ConfigContext),it=Wt!=null?Wt:Ie;let De=se;Et&&(De=(0,Q.composeRef)(se,Et));const cn=Ze("typography",de),[qe,Pt,Le]=(0,Ce.default)(cn),pt=(0,ne.default)(cn,Qe==null?void 0:Qe.className,{[`${cn}-rtl`]:it==="rtl"},le,Ue,Pt,Le),at=Object.assign(Object.assign({},Qe==null?void 0:Qe.style),Rt);return qe(T.createElement(xe,Object.assign({className:pt,style:at,ref:De},Tt),mt))});var re=G.default=st},92759:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=T;var ae=ee(D(67294));function T(ne,Q){return ae.useMemo(()=>{const ge=!!ne;return[ge,Object.assign(Object.assign({},Q),ge&&typeof ne=="object"?ne:null)]},[ne])}},67312:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(67294));const T=(Q,ge)=>{const pe=ae.useRef(!1);ae.useEffect(()=>{pe.current?Q():pe.current=!0},ge)};var ne=G.default=T},23461:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var ee=D(98078),ae=D(3184),T=D(48385);const ne=pe=>{const{componentCls:Ce,titleMarginTop:he}=pe;return{[Ce]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:pe.colorText,wordBreak:"break-word",lineHeight:pe.lineHeight,[`&${Ce}-secondary`]:{color:pe.colorTextDescription},[`&${Ce}-success`]:{color:pe.colorSuccess},[`&${Ce}-warning`]:{color:pe.colorWarning},[`&${Ce}-danger`]:{color:pe.colorError,"a&:active, a&:focus":{color:pe.colorErrorActive},"a&:hover":{color:pe.colorErrorHover}},[`&${Ce}-disabled`]:{color:pe.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,T.getTitleStyles)(pe)),{[`
      & + h1${Ce},
      & + h2${Ce},
      & + h3${Ce},
      & + h4${Ce},
      & + h5${Ce}
      `]:{marginTop:he},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:he}}}),(0,T.getResetStyles)(pe)),(0,T.getLinkStyles)(pe)),{[`
        ${Ce}-expand,
        ${Ce}-edit,
        ${Ce}-copy
      `]:Object.assign(Object.assign({},(0,ee.operationUnit)(pe)),{marginInlineStart:pe.marginXXS})}),(0,T.getEditableStyles)(pe)),(0,T.getCopyableStyles)(pe)),(0,T.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},Q=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});G.prepareComponentToken=Q;var ge=G.default=(0,ae.genStyleHooks)("Typography",pe=>[ne(pe)],Q)},48385:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getTitleStyles=G.getResetStyles=G.getLinkStyles=G.getEllipsisStyles=G.getEditableStyles=G.getCopyableStyles=void 0;var ee=D(78589),ae=D(6731),T=D(98078);const ne=(re,Se,se,de)=>{const{titleMarginBottom:xe,fontWeightStrong:le}=de;return{marginBottom:xe,color:se,fontWeight:le,fontSize:re,lineHeight:Se}},Q=re=>{const Se=[1,2,3,4,5],se={};return Se.forEach(de=>{se[`
      h${de}&,
      div&-h${de},
      div&-h${de} > textarea,
      h${de}
    `]=ne(re[`fontSizeHeading${de}`],re[`lineHeightHeading${de}`],re.colorTextHeading,re)}),se};G.getTitleStyles=Q;const ge=re=>{const{componentCls:Se}=re;return{"a&, a":Object.assign(Object.assign({},(0,T.operationUnit)(re)),{textDecoration:re.linkDecoration,"&:active, &:hover":{textDecoration:re.linkHoverDecoration},[`&[disabled], &${Se}-disabled`]:{color:re.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:re.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};G.getLinkStyles=ge;const pe=re=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:re.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:re.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:ee.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:re.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});G.getResetStyles=pe;const Ce=re=>{const{componentCls:Se,paddingSM:se}=re,de=se;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:re.calc(re.paddingSM).mul(-1).equal(),marginTop:re.calc(de).mul(-1).equal(),marginBottom:`calc(1em - ${(0,ae.unit)(de)})`},[`${Se}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:re.calc(re.marginXS).add(2).equal(),insetBlockEnd:re.marginXS,color:re.colorTextDescription,fontWeight:"normal",fontSize:re.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};G.getEditableStyles=Ce;const he=re=>({[`${re.componentCls}-copy-success`]:{[`
    &,
    &:hover,
    &:focus`]:{color:re.colorSuccess}},[`${re.componentCls}-copy-icon-only`]:{marginInlineStart:0}});G.getCopyableStyles=he;const st=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});G.getEllipsisStyles=st},87629:function(It,G,D){"use strict";"use client";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(36245)),T=G.default=ae.default},36245:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var D=G.default="5.15.3"},83874:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const ee=ae(D(71079));function ae(ne){return ne&&ne.__esModule?ne:{default:ne}}const T=ee;G.default=T,It.exports=T},43273:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const ee=ae(D(72225));function ae(ne){return ne&&ne.__esModule?ne:{default:ne}}const T=ee;G.default=T,It.exports=T},90091:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const ee=ae(D(29539));function ae(ne){return ne&&ne.__esModule?ne:{default:ne}}const T=ee;G.default=T,It.exports=T},10875:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const ee=ae(D(54825));function ae(ne){return ne&&ne.__esModule?ne:{default:ne}}const T=ee;G.default=T,It.exports=T},7224:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const ee=ae(D(43552));function ae(ne){return ne&&ne.__esModule?ne:{default:ne}}const T=ee;G.default=T,It.exports=T},26545:function(It,G,D){"use client";"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Ie}});var ee=se(D(67294)),ae=re(D(93967)),T=D(78589),ne=re(D(13357)),Q=re(D(46648)),ge=D(46338),pe=D(49458);function Ce(Qe,it){(it==null||it>Qe.length)&&(it=Qe.length);for(var De=0,cn=new Array(it);De<it;De++)cn[De]=Qe[De];return cn}function he(Qe){if(Array.isArray(Qe))return Qe}function st(Qe,it,De){return it in Qe?Object.defineProperty(Qe,it,{value:De,enumerable:!0,configurable:!0,writable:!0}):Qe[it]=De,Qe}function re(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}function Se(Qe){if(typeof WeakMap!="function")return null;var it=new WeakMap,De=new WeakMap;return(Se=function(cn){return cn?De:it})(Qe)}function se(Qe,it){if(!it&&Qe&&Qe.__esModule)return Qe;if(Qe===null||typeof Qe!="object"&&typeof Qe!="function")return{default:Qe};var De=Se(it);if(De&&De.has(Qe))return De.get(Qe);var cn={__proto__:null},qe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Pt in Qe)if(Pt!=="default"&&Object.prototype.hasOwnProperty.call(Qe,Pt)){var Le=qe?Object.getOwnPropertyDescriptor(Qe,Pt):null;Le&&(Le.get||Le.set)?Object.defineProperty(cn,Pt,Le):cn[Pt]=Qe[Pt]}return cn.default=Qe,De&&De.set(Qe,cn),cn}function de(Qe,it){var De=Qe==null?null:typeof Symbol!="undefined"&&Qe[Symbol.iterator]||Qe["@@iterator"];if(De!=null){var cn=[],qe=!0,Pt=!1,Le,pt;try{for(De=De.call(Qe);!(qe=(Le=De.next()).done)&&(cn.push(Le.value),!(it&&cn.length===it));qe=!0);}catch(at){Pt=!0,pt=at}finally{try{!qe&&De.return!=null&&De.return()}finally{if(Pt)throw pt}}return cn}}function xe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(Qe){for(var it=1;it<arguments.length;it++){var De=arguments[it]!=null?arguments[it]:{},cn=Object.keys(De);typeof Object.getOwnPropertySymbols=="function"&&(cn=cn.concat(Object.getOwnPropertySymbols(De).filter(function(qe){return Object.getOwnPropertyDescriptor(De,qe).enumerable}))),cn.forEach(function(qe){st(Qe,qe,De[qe])})}return Qe}function Ue(Qe,it){var De=Object.keys(Qe);if(Object.getOwnPropertySymbols){var cn=Object.getOwnPropertySymbols(Qe);it&&(cn=cn.filter(function(qe){return Object.getOwnPropertyDescriptor(Qe,qe).enumerable})),De.push.apply(De,cn)}return De}function Et(Qe,it){return it=it!=null?it:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(it)):Ue(Object(it)).forEach(function(De){Object.defineProperty(Qe,De,Object.getOwnPropertyDescriptor(it,De))}),Qe}function mt(Qe,it){if(Qe==null)return{};var De=Wt(Qe,it),cn,qe;if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(Qe);for(qe=0;qe<Pt.length;qe++)cn=Pt[qe],!(it.indexOf(cn)>=0)&&Object.prototype.propertyIsEnumerable.call(Qe,cn)&&(De[cn]=Qe[cn])}return De}function Wt(Qe,it){if(Qe==null)return{};var De={},cn=Object.keys(Qe),qe,Pt;for(Pt=0;Pt<cn.length;Pt++)qe=cn[Pt],!(it.indexOf(qe)>=0)&&(De[qe]=Qe[qe]);return De}function Rt(Qe,it){return he(Qe)||de(Qe,it)||Tt(Qe,it)||xe()}function Tt(Qe,it){if(Qe){if(typeof Qe=="string")return Ce(Qe,it);var De=Object.prototype.toString.call(Qe).slice(8,-1);if(De==="Object"&&Qe.constructor&&(De=Qe.constructor.name),De==="Map"||De==="Set")return Array.from(De);if(De==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(De))return Ce(Qe,it)}}(0,ge.setTwoToneColor)(T.blue.primary);var Ze=ee.forwardRef(function(Qe,it){var De=Qe.className,cn=Qe.icon,qe=Qe.spin,Pt=Qe.rotate,Le=Qe.tabIndex,pt=Qe.onClick,at=Qe.twoToneColor,nt=mt(Qe,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),Ct=ee.useContext(ne.default),rt=Ct.prefixCls,vt=rt===void 0?"anticon":rt,Ve=Ct.rootClassName,hn,yn=(0,ae.default)(Ve,vt,(hn={},st(hn,"".concat(vt,"-").concat(cn.name),!!cn.name),st(hn,"".concat(vt,"-spin"),!!qe||cn.name==="loading"),hn),De),ir=Le;ir===void 0&&pt&&(ir=-1);var Qn=Pt?{msTransform:"rotate(".concat(Pt,"deg)"),transform:"rotate(".concat(Pt,"deg)")}:void 0,Ut=Rt((0,pe.normalizeTwoToneColors)(at),2),En=Ut[0],Tn=Ut[1];return ee.createElement("span",Et(le({role:"img","aria-label":cn.name},nt),{ref:it,tabIndex:ir,onClick:pt,className:yn}),ee.createElement(Q.default,{icon:cn,primaryColor:En,secondaryColor:Tn,style:Qn}))});Ze.displayName="AntdIcon",Ze.getTwoToneColor=ge.getTwoToneColor,Ze.setTwoToneColor=ge.setTwoToneColor;var Ie=Ze},13357:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return T}});var ee=D(67294),ae=(0,ee.createContext)({}),T=ae},46648:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return xe}});var ee=Q(D(67294)),ae=D(49458);function T(le,Ue,Et){return Ue in le?Object.defineProperty(le,Ue,{value:Et,enumerable:!0,configurable:!0,writable:!0}):le[Ue]=Et,le}function ne(le){if(typeof WeakMap!="function")return null;var Ue=new WeakMap,Et=new WeakMap;return(ne=function(mt){return mt?Et:Ue})(le)}function Q(le,Ue){if(!Ue&&le&&le.__esModule)return le;if(le===null||typeof le!="object"&&typeof le!="function")return{default:le};var Et=ne(Ue);if(Et&&Et.has(le))return Et.get(le);var mt={__proto__:null},Wt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Rt in le)if(Rt!=="default"&&Object.prototype.hasOwnProperty.call(le,Rt)){var Tt=Wt?Object.getOwnPropertyDescriptor(le,Rt):null;Tt&&(Tt.get||Tt.set)?Object.defineProperty(mt,Rt,Tt):mt[Rt]=le[Rt]}return mt.default=le,Et&&Et.set(le,mt),mt}function ge(le){for(var Ue=1;Ue<arguments.length;Ue++){var Et=arguments[Ue]!=null?arguments[Ue]:{},mt=Object.keys(Et);typeof Object.getOwnPropertySymbols=="function"&&(mt=mt.concat(Object.getOwnPropertySymbols(Et).filter(function(Wt){return Object.getOwnPropertyDescriptor(Et,Wt).enumerable}))),mt.forEach(function(Wt){T(le,Wt,Et[Wt])})}return le}function pe(le,Ue){var Et=Object.keys(le);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(le);Ue&&(mt=mt.filter(function(Wt){return Object.getOwnPropertyDescriptor(le,Wt).enumerable})),Et.push.apply(Et,mt)}return Et}function Ce(le,Ue){return Ue=Ue!=null?Ue:{},Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(Ue)):pe(Object(Ue)).forEach(function(Et){Object.defineProperty(le,Et,Object.getOwnPropertyDescriptor(Ue,Et))}),le}function he(le,Ue){if(le==null)return{};var Et=st(le,Ue),mt,Wt;if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(le);for(Wt=0;Wt<Rt.length;Wt++)mt=Rt[Wt],!(Ue.indexOf(mt)>=0)&&Object.prototype.propertyIsEnumerable.call(le,mt)&&(Et[mt]=le[mt])}return Et}function st(le,Ue){if(le==null)return{};var Et={},mt=Object.keys(le),Wt,Rt;for(Rt=0;Rt<mt.length;Rt++)Wt=mt[Rt],!(Ue.indexOf(Wt)>=0)&&(Et[Wt]=le[Wt]);return Et}var re={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Se(le){var Ue=le.primaryColor,Et=le.secondaryColor;re.primaryColor=Ue,re.secondaryColor=Et||(0,ae.getSecondaryColor)(Ue),re.calculated=!!Et}function se(){return ge({},re)}var de=function(le){var Ue=le.icon,Et=le.className,mt=le.onClick,Wt=le.style,Rt=le.primaryColor,Tt=le.secondaryColor,Ze=he(le,["icon","className","onClick","style","primaryColor","secondaryColor"]),Ie=ee.useRef(),Qe=re;if(Rt&&(Qe={primaryColor:Rt,secondaryColor:Tt||(0,ae.getSecondaryColor)(Rt)}),(0,ae.useInsertStyles)(Ie),(0,ae.warning)((0,ae.isIconDefinition)(Ue),"icon should be icon definiton, but got ".concat(Ue)),!(0,ae.isIconDefinition)(Ue))return null;var it=Ue;return it&&typeof it.icon=="function"&&(it=Ce(ge({},it),{icon:it.icon(Qe.primaryColor,Qe.secondaryColor)})),(0,ae.generate)(it.icon,"svg-".concat(it.name),Ce(ge({className:Et,onClick:mt,style:Wt,"data-icon":it.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Ze),{ref:Ie}))};de.displayName="IconReact",de.getTwoToneColors=se,de.setTwoToneColors=Se;var xe=de},46338:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0});function ee(se,de){for(var xe in de)Object.defineProperty(se,xe,{enumerable:!0,get:de[xe]})}ee(G,{getTwoToneColor:function(){return Se},setTwoToneColor:function(){return re}});var ae=ge(D(46648)),T=D(49458);function ne(se,de){(de==null||de>se.length)&&(de=se.length);for(var xe=0,le=new Array(de);xe<de;xe++)le[xe]=se[xe];return le}function Q(se){if(Array.isArray(se))return se}function ge(se){return se&&se.__esModule?se:{default:se}}function pe(se,de){var xe=se==null?null:typeof Symbol!="undefined"&&se[Symbol.iterator]||se["@@iterator"];if(xe!=null){var le=[],Ue=!0,Et=!1,mt,Wt;try{for(xe=xe.call(se);!(Ue=(mt=xe.next()).done)&&(le.push(mt.value),!(de&&le.length===de));Ue=!0);}catch(Rt){Et=!0,Wt=Rt}finally{try{!Ue&&xe.return!=null&&xe.return()}finally{if(Et)throw Wt}}return le}}function Ce(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function he(se,de){return Q(se)||pe(se,de)||st(se,de)||Ce()}function st(se,de){if(se){if(typeof se=="string")return ne(se,de);var xe=Object.prototype.toString.call(se).slice(8,-1);if(xe==="Object"&&se.constructor&&(xe=se.constructor.name),xe==="Map"||xe==="Set")return Array.from(xe);if(xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe))return ne(se,de)}}function re(se){var de=he((0,T.normalizeTwoToneColors)(se),2),xe=de[0],le=de[1];return ae.default.setTwoToneColors({primaryColor:xe,secondaryColor:le})}function Se(){var se=ae.default.getTwoToneColors();return se.calculated?[se.primaryColor,se.secondaryColor]:se.primaryColor}},71079:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Se}});var ee=pe(D(67294)),ae=Q(D(25330)),T=Q(D(26545));function ne(se,de,xe){return de in se?Object.defineProperty(se,de,{value:xe,enumerable:!0,configurable:!0,writable:!0}):se[de]=xe,se}function Q(se){return se&&se.__esModule?se:{default:se}}function ge(se){if(typeof WeakMap!="function")return null;var de=new WeakMap,xe=new WeakMap;return(ge=function(le){return le?xe:de})(se)}function pe(se,de){if(!de&&se&&se.__esModule)return se;if(se===null||typeof se!="object"&&typeof se!="function")return{default:se};var xe=ge(de);if(xe&&xe.has(se))return xe.get(se);var le={__proto__:null},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in se)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(se,Et)){var mt=Ue?Object.getOwnPropertyDescriptor(se,Et):null;mt&&(mt.get||mt.set)?Object.defineProperty(le,Et,mt):le[Et]=se[Et]}return le.default=se,xe&&xe.set(se,le),le}function Ce(se){for(var de=1;de<arguments.length;de++){var xe=arguments[de]!=null?arguments[de]:{},le=Object.keys(xe);typeof Object.getOwnPropertySymbols=="function"&&(le=le.concat(Object.getOwnPropertySymbols(xe).filter(function(Ue){return Object.getOwnPropertyDescriptor(xe,Ue).enumerable}))),le.forEach(function(Ue){ne(se,Ue,xe[Ue])})}return se}function he(se,de){var xe=Object.keys(se);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(se);de&&(le=le.filter(function(Ue){return Object.getOwnPropertyDescriptor(se,Ue).enumerable})),xe.push.apply(xe,le)}return xe}function st(se,de){return de=de!=null?de:{},Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(de)):he(Object(de)).forEach(function(xe){Object.defineProperty(se,xe,Object.getOwnPropertyDescriptor(de,xe))}),se}var re=function(se,de){return ee.createElement(T.default,st(Ce({},se),{ref:de,icon:ae.default}))},Se=ee.forwardRef(re)},72225:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Se}});var ee=pe(D(67294)),ae=Q(D(67303)),T=Q(D(26545));function ne(se,de,xe){return de in se?Object.defineProperty(se,de,{value:xe,enumerable:!0,configurable:!0,writable:!0}):se[de]=xe,se}function Q(se){return se&&se.__esModule?se:{default:se}}function ge(se){if(typeof WeakMap!="function")return null;var de=new WeakMap,xe=new WeakMap;return(ge=function(le){return le?xe:de})(se)}function pe(se,de){if(!de&&se&&se.__esModule)return se;if(se===null||typeof se!="object"&&typeof se!="function")return{default:se};var xe=ge(de);if(xe&&xe.has(se))return xe.get(se);var le={__proto__:null},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in se)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(se,Et)){var mt=Ue?Object.getOwnPropertyDescriptor(se,Et):null;mt&&(mt.get||mt.set)?Object.defineProperty(le,Et,mt):le[Et]=se[Et]}return le.default=se,xe&&xe.set(se,le),le}function Ce(se){for(var de=1;de<arguments.length;de++){var xe=arguments[de]!=null?arguments[de]:{},le=Object.keys(xe);typeof Object.getOwnPropertySymbols=="function"&&(le=le.concat(Object.getOwnPropertySymbols(xe).filter(function(Ue){return Object.getOwnPropertyDescriptor(xe,Ue).enumerable}))),le.forEach(function(Ue){ne(se,Ue,xe[Ue])})}return se}function he(se,de){var xe=Object.keys(se);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(se);de&&(le=le.filter(function(Ue){return Object.getOwnPropertyDescriptor(se,Ue).enumerable})),xe.push.apply(xe,le)}return xe}function st(se,de){return de=de!=null?de:{},Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(de)):he(Object(de)).forEach(function(xe){Object.defineProperty(se,xe,Object.getOwnPropertyDescriptor(de,xe))}),se}var re=function(se,de){return ee.createElement(T.default,st(Ce({},se),{ref:de,icon:ae.default}))},Se=ee.forwardRef(re)},29539:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Se}});var ee=pe(D(67294)),ae=Q(D(83647)),T=Q(D(26545));function ne(se,de,xe){return de in se?Object.defineProperty(se,de,{value:xe,enumerable:!0,configurable:!0,writable:!0}):se[de]=xe,se}function Q(se){return se&&se.__esModule?se:{default:se}}function ge(se){if(typeof WeakMap!="function")return null;var de=new WeakMap,xe=new WeakMap;return(ge=function(le){return le?xe:de})(se)}function pe(se,de){if(!de&&se&&se.__esModule)return se;if(se===null||typeof se!="object"&&typeof se!="function")return{default:se};var xe=ge(de);if(xe&&xe.has(se))return xe.get(se);var le={__proto__:null},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in se)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(se,Et)){var mt=Ue?Object.getOwnPropertyDescriptor(se,Et):null;mt&&(mt.get||mt.set)?Object.defineProperty(le,Et,mt):le[Et]=se[Et]}return le.default=se,xe&&xe.set(se,le),le}function Ce(se){for(var de=1;de<arguments.length;de++){var xe=arguments[de]!=null?arguments[de]:{},le=Object.keys(xe);typeof Object.getOwnPropertySymbols=="function"&&(le=le.concat(Object.getOwnPropertySymbols(xe).filter(function(Ue){return Object.getOwnPropertyDescriptor(xe,Ue).enumerable}))),le.forEach(function(Ue){ne(se,Ue,xe[Ue])})}return se}function he(se,de){var xe=Object.keys(se);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(se);de&&(le=le.filter(function(Ue){return Object.getOwnPropertyDescriptor(se,Ue).enumerable})),xe.push.apply(xe,le)}return xe}function st(se,de){return de=de!=null?de:{},Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(de)):he(Object(de)).forEach(function(xe){Object.defineProperty(se,xe,Object.getOwnPropertyDescriptor(de,xe))}),se}var re=function(se,de){return ee.createElement(T.default,st(Ce({},se),{ref:de,icon:ae.default}))},Se=ee.forwardRef(re)},54825:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Se}});var ee=pe(D(67294)),ae=Q(D(57583)),T=Q(D(26545));function ne(se,de,xe){return de in se?Object.defineProperty(se,de,{value:xe,enumerable:!0,configurable:!0,writable:!0}):se[de]=xe,se}function Q(se){return se&&se.__esModule?se:{default:se}}function ge(se){if(typeof WeakMap!="function")return null;var de=new WeakMap,xe=new WeakMap;return(ge=function(le){return le?xe:de})(se)}function pe(se,de){if(!de&&se&&se.__esModule)return se;if(se===null||typeof se!="object"&&typeof se!="function")return{default:se};var xe=ge(de);if(xe&&xe.has(se))return xe.get(se);var le={__proto__:null},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in se)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(se,Et)){var mt=Ue?Object.getOwnPropertyDescriptor(se,Et):null;mt&&(mt.get||mt.set)?Object.defineProperty(le,Et,mt):le[Et]=se[Et]}return le.default=se,xe&&xe.set(se,le),le}function Ce(se){for(var de=1;de<arguments.length;de++){var xe=arguments[de]!=null?arguments[de]:{},le=Object.keys(xe);typeof Object.getOwnPropertySymbols=="function"&&(le=le.concat(Object.getOwnPropertySymbols(xe).filter(function(Ue){return Object.getOwnPropertyDescriptor(xe,Ue).enumerable}))),le.forEach(function(Ue){ne(se,Ue,xe[Ue])})}return se}function he(se,de){var xe=Object.keys(se);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(se);de&&(le=le.filter(function(Ue){return Object.getOwnPropertyDescriptor(se,Ue).enumerable})),xe.push.apply(xe,le)}return xe}function st(se,de){return de=de!=null?de:{},Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(de)):he(Object(de)).forEach(function(xe){Object.defineProperty(se,xe,Object.getOwnPropertyDescriptor(de,xe))}),se}var re=function(se,de){return ee.createElement(T.default,st(Ce({},se),{ref:de,icon:ae.default}))},Se=ee.forwardRef(re)},43552:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Se}});var ee=pe(D(67294)),ae=Q(D(29260)),T=Q(D(26545));function ne(se,de,xe){return de in se?Object.defineProperty(se,de,{value:xe,enumerable:!0,configurable:!0,writable:!0}):se[de]=xe,se}function Q(se){return se&&se.__esModule?se:{default:se}}function ge(se){if(typeof WeakMap!="function")return null;var de=new WeakMap,xe=new WeakMap;return(ge=function(le){return le?xe:de})(se)}function pe(se,de){if(!de&&se&&se.__esModule)return se;if(se===null||typeof se!="object"&&typeof se!="function")return{default:se};var xe=ge(de);if(xe&&xe.has(se))return xe.get(se);var le={__proto__:null},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in se)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(se,Et)){var mt=Ue?Object.getOwnPropertyDescriptor(se,Et):null;mt&&(mt.get||mt.set)?Object.defineProperty(le,Et,mt):le[Et]=se[Et]}return le.default=se,xe&&xe.set(se,le),le}function Ce(se){for(var de=1;de<arguments.length;de++){var xe=arguments[de]!=null?arguments[de]:{},le=Object.keys(xe);typeof Object.getOwnPropertySymbols=="function"&&(le=le.concat(Object.getOwnPropertySymbols(xe).filter(function(Ue){return Object.getOwnPropertyDescriptor(xe,Ue).enumerable}))),le.forEach(function(Ue){ne(se,Ue,xe[Ue])})}return se}function he(se,de){var xe=Object.keys(se);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(se);de&&(le=le.filter(function(Ue){return Object.getOwnPropertyDescriptor(se,Ue).enumerable})),xe.push.apply(xe,le)}return xe}function st(se,de){return de=de!=null?de:{},Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(de)):he(Object(de)).forEach(function(xe){Object.defineProperty(se,xe,Object.getOwnPropertyDescriptor(de,xe))}),se}var re=function(se,de){return ee.createElement(T.default,st(Ce({},se),{ref:de,icon:ae.default}))},Se=ee.forwardRef(re)},49458:function(It,G,D){"use strict";Object.defineProperty(G,"__esModule",{value:!0});function ee(Ze,Ie){for(var Qe in Ie)Object.defineProperty(Ze,Qe,{enumerable:!0,get:Ie[Qe]})}ee(G,{generate:function(){return Ue},getSecondaryColor:function(){return Et},iconStyles:function(){return Rt},isIconDefinition:function(){return xe},normalizeAttrs:function(){return le},normalizeTwoToneColors:function(){return mt},svgBaseProps:function(){return Wt},useInsertStyles:function(){return Tt},warning:function(){return de}});var ae=D(78589),T=D(93399),ne=D(63298),Q=he(D(45520)),ge=re(D(67294)),pe=he(D(13357));function Ce(Ze,Ie,Qe){return Ie in Ze?Object.defineProperty(Ze,Ie,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):Ze[Ie]=Qe,Ze}function he(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function st(Ze){if(typeof WeakMap!="function")return null;var Ie=new WeakMap,Qe=new WeakMap;return(st=function(it){return it?Qe:Ie})(Ze)}function re(Ze,Ie){if(!Ie&&Ze&&Ze.__esModule)return Ze;if(Ze===null||typeof Ze!="object"&&typeof Ze!="function")return{default:Ze};var Qe=st(Ie);if(Qe&&Qe.has(Ze))return Qe.get(Ze);var it={__proto__:null},De=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var cn in Ze)if(cn!=="default"&&Object.prototype.hasOwnProperty.call(Ze,cn)){var qe=De?Object.getOwnPropertyDescriptor(Ze,cn):null;qe&&(qe.get||qe.set)?Object.defineProperty(it,cn,qe):it[cn]=Ze[cn]}return it.default=Ze,Qe&&Qe.set(Ze,it),it}function Se(Ze){for(var Ie=1;Ie<arguments.length;Ie++){var Qe=arguments[Ie]!=null?arguments[Ie]:{},it=Object.keys(Qe);typeof Object.getOwnPropertySymbols=="function"&&(it=it.concat(Object.getOwnPropertySymbols(Qe).filter(function(De){return Object.getOwnPropertyDescriptor(Qe,De).enumerable}))),it.forEach(function(De){Ce(Ze,De,Qe[De])})}return Ze}function se(Ze){return Ze.replace(/-(.)/g,function(Ie,Qe){return Qe.toUpperCase()})}function de(Ze,Ie){(0,Q.default)(Ze,"[@ant-design/icons] ".concat(Ie))}function xe(Ze){return typeof Ze=="object"&&typeof Ze.name=="string"&&typeof Ze.theme=="string"&&(typeof Ze.icon=="object"||typeof Ze.icon=="function")}function le(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Ze).reduce(function(Ie,Qe){var it=Ze[Qe];switch(Qe){case"class":Ie.className=it,delete Ie.class;break;default:delete Ie[Qe],Ie[se(Qe)]=it}return Ie},{})}function Ue(Ze,Ie,Qe){return Qe?ge.default.createElement(Ze.tag,Se({key:Ie},le(Ze.attrs),Qe),(Ze.children||[]).map(function(it,De){return Ue(it,"".concat(Ie,"-").concat(Ze.tag,"-").concat(De))})):ge.default.createElement(Ze.tag,Se({key:Ie},le(Ze.attrs)),(Ze.children||[]).map(function(it,De){return Ue(it,"".concat(Ie,"-").concat(Ze.tag,"-").concat(De))}))}function Et(Ze){return(0,ae.generate)(Ze)[0]}function mt(Ze){return Ze?Array.isArray(Ze)?Ze:[Ze]:[]}var Wt={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},Rt=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Tt=function(Ze){var Ie=(0,ge.useContext)(pe.default),Qe=Ie.csp,it=Ie.prefixCls,De=Rt;it&&(De=De.replace(/anticon/g,it)),(0,ge.useEffect)(function(){var cn=Ze.current,qe=(0,ne.getShadowRoot)(cn);(0,T.updateCSS)(De,"@ant-design-icons",{prepend:!0,csp:Qe,attachTo:qe})},[])}},98129:function(It,G,D){"use strict";var ee=D(60690);It.exports=function(ne){ne=ne||{};var Q=ne.reporter,ge=ee.getOption(ne,"async",!0),pe=ee.getOption(ne,"auto",!0);pe&&!ge&&(Q&&Q.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),ge=!0);var Ce=ae(),he,st=!1;function re(Et,mt){!st&&pe&&ge&&Ce.size()===0&&de(),Ce.add(Et,mt)}function Se(){for(st=!0;Ce.size();){var Et=Ce;Ce=ae(),Et.process()}st=!1}function se(Et){st||(Et===void 0&&(Et=ge),he&&(le(he),he=null),Et?de():Se())}function de(){he=Ue(Se)}function xe(){Ce={},batchSize=0,topLevel=0,bottomLevel=0}function le(Et){var mt=clearTimeout;return mt(Et)}function Ue(Et){var mt=function(Wt){return setTimeout(Wt,0)};return mt(Et)}return{add:re,force:se}};function ae(){var T={},ne=0,Q=0,ge=0;function pe(st,re){re||(re=st,st=0),st>Q?Q=st:st<ge&&(ge=st),T[st]||(T[st]=[]),T[st].push(re),ne++}function Ce(){for(var st=ge;st<=Q;st++)for(var re=T[st],Se=0;Se<re.length;Se++){var se=re[Se];se()}}function he(){return ne}return{add:pe,process:Ce,size:he}}},60690:function(It){"use strict";var G=It.exports={};G.getOption=D;function D(ee,ae,T){var ne=ee[ae];return ne==null&&T!==void 0?T:ne}},8874:function(It){"use strict";It.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(It,G,D){var ee=D(8874),ae=D(86851),T=Object.hasOwnProperty,ne=Object.create(null);for(var Q in ee)T.call(ee,Q)&&(ne[ee[Q]]=Q);var ge=It.exports={to:{},get:{}};ge.get=function(he){var st=he.substring(0,3).toLowerCase(),re,Se;switch(st){case"hsl":re=ge.get.hsl(he),Se="hsl";break;case"hwb":re=ge.get.hwb(he),Se="hwb";break;default:re=ge.get.rgb(he),Se="rgb";break}return re?{model:Se,value:re}:null},ge.get.rgb=function(he){if(!he)return null;var st=/^#([a-f0-9]{3,4})$/i,re=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,Se=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,se=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,de=/^(\w+)$/,xe=[0,0,0,1],le,Ue,Et;if(le=he.match(re)){for(Et=le[2],le=le[1],Ue=0;Ue<3;Ue++){var mt=Ue*2;xe[Ue]=parseInt(le.slice(mt,mt+2),16)}Et&&(xe[3]=parseInt(Et,16)/255)}else if(le=he.match(st)){for(le=le[1],Et=le[3],Ue=0;Ue<3;Ue++)xe[Ue]=parseInt(le[Ue]+le[Ue],16);Et&&(xe[3]=parseInt(Et+Et,16)/255)}else if(le=he.match(Se)){for(Ue=0;Ue<3;Ue++)xe[Ue]=parseInt(le[Ue+1],0);le[4]&&(le[5]?xe[3]=parseFloat(le[4])*.01:xe[3]=parseFloat(le[4]))}else if(le=he.match(se)){for(Ue=0;Ue<3;Ue++)xe[Ue]=Math.round(parseFloat(le[Ue+1])*2.55);le[4]&&(le[5]?xe[3]=parseFloat(le[4])*.01:xe[3]=parseFloat(le[4]))}else return(le=he.match(de))?le[1]==="transparent"?[0,0,0,0]:T.call(ee,le[1])?(xe=ee[le[1]],xe[3]=1,xe):null:null;for(Ue=0;Ue<3;Ue++)xe[Ue]=pe(xe[Ue],0,255);return xe[3]=pe(xe[3],0,1),xe},ge.get.hsl=function(he){if(!he)return null;var st=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,re=he.match(st);if(re){var Se=parseFloat(re[4]),se=(parseFloat(re[1])%360+360)%360,de=pe(parseFloat(re[2]),0,100),xe=pe(parseFloat(re[3]),0,100),le=pe(isNaN(Se)?1:Se,0,1);return[se,de,xe,le]}return null},ge.get.hwb=function(he){if(!he)return null;var st=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,re=he.match(st);if(re){var Se=parseFloat(re[4]),se=(parseFloat(re[1])%360+360)%360,de=pe(parseFloat(re[2]),0,100),xe=pe(parseFloat(re[3]),0,100),le=pe(isNaN(Se)?1:Se,0,1);return[se,de,xe,le]}return null},ge.to.hex=function(){var he=ae(arguments);return"#"+Ce(he[0])+Ce(he[1])+Ce(he[2])+(he[3]<1?Ce(Math.round(he[3]*255)):"")},ge.to.rgb=function(){var he=ae(arguments);return he.length<4||he[3]===1?"rgb("+Math.round(he[0])+", "+Math.round(he[1])+", "+Math.round(he[2])+")":"rgba("+Math.round(he[0])+", "+Math.round(he[1])+", "+Math.round(he[2])+", "+he[3]+")"},ge.to.rgb.percent=function(){var he=ae(arguments),st=Math.round(he[0]/255*100),re=Math.round(he[1]/255*100),Se=Math.round(he[2]/255*100);return he.length<4||he[3]===1?"rgb("+st+"%, "+re+"%, "+Se+"%)":"rgba("+st+"%, "+re+"%, "+Se+"%, "+he[3]+")"},ge.to.hsl=function(){var he=ae(arguments);return he.length<4||he[3]===1?"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)":"hsla("+he[0]+", "+he[1]+"%, "+he[2]+"%, "+he[3]+")"},ge.to.hwb=function(){var he=ae(arguments),st="";return he.length>=4&&he[3]!==1&&(st=", "+he[3]),"hwb("+he[0]+", "+he[1]+"%, "+he[2]+"%"+st+")"},ge.to.keyword=function(he){return ne[he.slice(0,3)]};function pe(he,st,re){return Math.min(Math.max(st,he),re)}function Ce(he){var st=Math.round(he).toString(16).toUpperCase();return st.length<2?"0"+st:st}},37620:function(It,G,D){"use strict";D.d(G,{ZP:function(){return Wt},B8:function(){return Ie}});function ee(nt,Ct,rt){nt.prototype=Ct.prototype=rt,rt.constructor=nt}function ae(nt,Ct){var rt=Object.create(nt.prototype);for(var vt in Ct)rt[vt]=Ct[vt];return rt}function T(){}var ne=.7,Q=1/ne,ge="\\s*([+-]?\\d+)\\s*",pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",he=/^#([0-9a-f]{3,8})$/,st=new RegExp("^rgb\\("+[ge,ge,ge]+"\\)$"),re=new RegExp("^rgb\\("+[Ce,Ce,Ce]+"\\)$"),Se=new RegExp("^rgba\\("+[ge,ge,ge,pe]+"\\)$"),se=new RegExp("^rgba\\("+[Ce,Ce,Ce,pe]+"\\)$"),de=new RegExp("^hsl\\("+[pe,Ce,Ce]+"\\)$"),xe=new RegExp("^hsla\\("+[pe,Ce,Ce,pe]+"\\)$"),le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ee(T,Wt,{copy:function(nt){return Object.assign(new this.constructor,this,nt)},displayable:function(){return this.rgb().displayable()},hex:Ue,formatHex:Ue,formatHsl:Et,formatRgb:mt,toString:mt});function Ue(){return this.rgb().formatHex()}function Et(){return Pt(this).formatHsl()}function mt(){return this.rgb().formatRgb()}function Wt(nt){var Ct,rt;return nt=(nt+"").trim().toLowerCase(),(Ct=he.exec(nt))?(rt=Ct[1].length,Ct=parseInt(Ct[1],16),rt===6?Rt(Ct):rt===3?new Qe(Ct>>8&15|Ct>>4&240,Ct>>4&15|Ct&240,(Ct&15)<<4|Ct&15,1):rt===8?Tt(Ct>>24&255,Ct>>16&255,Ct>>8&255,(Ct&255)/255):rt===4?Tt(Ct>>12&15|Ct>>8&240,Ct>>8&15|Ct>>4&240,Ct>>4&15|Ct&240,((Ct&15)<<4|Ct&15)/255):null):(Ct=st.exec(nt))?new Qe(Ct[1],Ct[2],Ct[3],1):(Ct=re.exec(nt))?new Qe(Ct[1]*255/100,Ct[2]*255/100,Ct[3]*255/100,1):(Ct=Se.exec(nt))?Tt(Ct[1],Ct[2],Ct[3],Ct[4]):(Ct=se.exec(nt))?Tt(Ct[1]*255/100,Ct[2]*255/100,Ct[3]*255/100,Ct[4]):(Ct=de.exec(nt))?qe(Ct[1],Ct[2]/100,Ct[3]/100,1):(Ct=xe.exec(nt))?qe(Ct[1],Ct[2]/100,Ct[3]/100,Ct[4]):le.hasOwnProperty(nt)?Rt(le[nt]):nt==="transparent"?new Qe(NaN,NaN,NaN,0):null}function Rt(nt){return new Qe(nt>>16&255,nt>>8&255,nt&255,1)}function Tt(nt,Ct,rt,vt){return vt<=0&&(nt=Ct=rt=NaN),new Qe(nt,Ct,rt,vt)}function Ze(nt){return nt instanceof T||(nt=Wt(nt)),nt?(nt=nt.rgb(),new Qe(nt.r,nt.g,nt.b,nt.opacity)):new Qe}function Ie(nt,Ct,rt,vt){return arguments.length===1?Ze(nt):new Qe(nt,Ct,rt,vt==null?1:vt)}function Qe(nt,Ct,rt,vt){this.r=+nt,this.g=+Ct,this.b=+rt,this.opacity=+vt}ee(Qe,Ie,ae(T,{brighter:function(nt){return nt=nt==null?Q:Math.pow(Q,nt),new Qe(this.r*nt,this.g*nt,this.b*nt,this.opacity)},darker:function(nt){return nt=nt==null?ne:Math.pow(ne,nt),new Qe(this.r*nt,this.g*nt,this.b*nt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:it,formatHex:it,formatRgb:De,toString:De}));function it(){return"#"+cn(this.r)+cn(this.g)+cn(this.b)}function De(){var nt=this.opacity;return nt=isNaN(nt)?1:Math.max(0,Math.min(1,nt)),(nt===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(nt===1?")":", "+nt+")")}function cn(nt){return nt=Math.max(0,Math.min(255,Math.round(nt)||0)),(nt<16?"0":"")+nt.toString(16)}function qe(nt,Ct,rt,vt){return vt<=0?nt=Ct=rt=NaN:rt<=0||rt>=1?nt=Ct=NaN:Ct<=0&&(nt=NaN),new pt(nt,Ct,rt,vt)}function Pt(nt){if(nt instanceof pt)return new pt(nt.h,nt.s,nt.l,nt.opacity);if(nt instanceof T||(nt=Wt(nt)),!nt)return new pt;if(nt instanceof pt)return nt;nt=nt.rgb();var Ct=nt.r/255,rt=nt.g/255,vt=nt.b/255,Ve=Math.min(Ct,rt,vt),hn=Math.max(Ct,rt,vt),yn=NaN,ir=hn-Ve,Qn=(hn+Ve)/2;return ir?(Ct===hn?yn=(rt-vt)/ir+(rt<vt)*6:rt===hn?yn=(vt-Ct)/ir+2:yn=(Ct-rt)/ir+4,ir/=Qn<.5?hn+Ve:2-hn-Ve,yn*=60):ir=Qn>0&&Qn<1?0:yn,new pt(yn,ir,Qn,nt.opacity)}function Le(nt,Ct,rt,vt){return arguments.length===1?Pt(nt):new pt(nt,Ct,rt,vt==null?1:vt)}function pt(nt,Ct,rt,vt){this.h=+nt,this.s=+Ct,this.l=+rt,this.opacity=+vt}ee(pt,Le,ae(T,{brighter:function(nt){return nt=nt==null?Q:Math.pow(Q,nt),new pt(this.h,this.s,this.l*nt,this.opacity)},darker:function(nt){return nt=nt==null?ne:Math.pow(ne,nt),new pt(this.h,this.s,this.l*nt,this.opacity)},rgb:function(){var nt=this.h%360+(this.h<0)*360,Ct=isNaN(nt)||isNaN(this.s)?0:this.s,rt=this.l,vt=rt+(rt<.5?rt:1-rt)*Ct,Ve=2*rt-vt;return new Qe(at(nt>=240?nt-240:nt+120,Ve,vt),at(nt,Ve,vt),at(nt<120?nt+240:nt-120,Ve,vt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var nt=this.opacity;return nt=isNaN(nt)?1:Math.max(0,Math.min(1,nt)),(nt===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(nt===1?")":", "+nt+")")}}));function at(nt,Ct,rt){return(nt<60?Ct+(rt-Ct)*nt/60:nt<180?rt:nt<240?Ct+(rt-Ct)*(240-nt)/60:Ct)*255}},9187:function(It){"use strict";It.exports=G,It.exports.default=G;function G(Le,pt,at){at=at||2;var nt=pt&&pt.length,Ct=nt?pt[0]*at:Le.length,rt=D(Le,0,Ct,at,!0),vt=[];if(!rt||rt.next===rt.prev)return vt;var Ve,hn,yn,ir,Qn,Ut,En;if(nt&&(rt=pe(Le,pt,rt,at)),Le.length>80*at){Ve=yn=Le[0],hn=ir=Le[1];for(var Tn=at;Tn<Ct;Tn+=at)Qn=Le[Tn],Ut=Le[Tn+1],Qn<Ve&&(Ve=Qn),Ut<hn&&(hn=Ut),Qn>yn&&(yn=Qn),Ut>ir&&(ir=Ut);En=Math.max(yn-Ve,ir-hn),En=En!==0?32767/En:0}return ae(rt,vt,at,Ve,hn,En,0),vt}function D(Le,pt,at,nt,Ct){var rt,vt;if(Ct===Pt(Le,pt,at,nt)>0)for(rt=pt;rt<at;rt+=nt)vt=De(rt,Le[rt],Le[rt+1],vt);else for(rt=at-nt;rt>=pt;rt-=nt)vt=De(rt,Le[rt],Le[rt+1],vt);return vt&&mt(vt,vt.next)&&(cn(vt),vt=vt.next),vt}function ee(Le,pt){if(!Le)return Le;pt||(pt=Le);var at=Le,nt;do if(nt=!1,!at.steiner&&(mt(at,at.next)||Et(at.prev,at,at.next)===0)){if(cn(at),at=pt=at.prev,at===at.next)break;nt=!0}else at=at.next;while(nt||at!==pt);return pt}function ae(Le,pt,at,nt,Ct,rt,vt){if(Le){!vt&&rt&&Se(Le,nt,Ct,rt);for(var Ve=Le,hn,yn;Le.prev!==Le.next;){if(hn=Le.prev,yn=Le.next,rt?ne(Le,nt,Ct,rt):T(Le)){pt.push(hn.i/at|0),pt.push(Le.i/at|0),pt.push(yn.i/at|0),cn(Le),Le=yn.next,Ve=yn.next;continue}if(Le=yn,Le===Ve){vt?vt===1?(Le=Q(ee(Le),pt,at),ae(Le,pt,at,nt,Ct,rt,2)):vt===2&&ge(Le,pt,at,nt,Ct,rt):ae(ee(Le),pt,at,nt,Ct,rt,1);break}}}}function T(Le){var pt=Le.prev,at=Le,nt=Le.next;if(Et(pt,at,nt)>=0)return!1;for(var Ct=pt.x,rt=at.x,vt=nt.x,Ve=pt.y,hn=at.y,yn=nt.y,ir=Ct<rt?Ct<vt?Ct:vt:rt<vt?rt:vt,Qn=Ve<hn?Ve<yn?Ve:yn:hn<yn?hn:yn,Ut=Ct>rt?Ct>vt?Ct:vt:rt>vt?rt:vt,En=Ve>hn?Ve>yn?Ve:yn:hn>yn?hn:yn,Tn=nt.next;Tn!==pt;){if(Tn.x>=ir&&Tn.x<=Ut&&Tn.y>=Qn&&Tn.y<=En&&le(Ct,Ve,rt,hn,vt,yn,Tn.x,Tn.y)&&Et(Tn.prev,Tn,Tn.next)>=0)return!1;Tn=Tn.next}return!0}function ne(Le,pt,at,nt){var Ct=Le.prev,rt=Le,vt=Le.next;if(Et(Ct,rt,vt)>=0)return!1;for(var Ve=Ct.x,hn=rt.x,yn=vt.x,ir=Ct.y,Qn=rt.y,Ut=vt.y,En=Ve<hn?Ve<yn?Ve:yn:hn<yn?hn:yn,Tn=ir<Qn?ir<Ut?ir:Ut:Qn<Ut?Qn:Ut,lr=Ve>hn?Ve>yn?Ve:yn:hn>yn?hn:yn,ln=ir>Qn?ir>Ut?ir:Ut:Qn>Ut?Qn:Ut,Lt=de(En,Tn,pt,at,nt),bn=de(lr,ln,pt,at,nt),Xe=Le.prevZ,Fe=Le.nextZ;Xe&&Xe.z>=Lt&&Fe&&Fe.z<=bn;){if(Xe.x>=En&&Xe.x<=lr&&Xe.y>=Tn&&Xe.y<=ln&&Xe!==Ct&&Xe!==vt&&le(Ve,ir,hn,Qn,yn,Ut,Xe.x,Xe.y)&&Et(Xe.prev,Xe,Xe.next)>=0||(Xe=Xe.prevZ,Fe.x>=En&&Fe.x<=lr&&Fe.y>=Tn&&Fe.y<=ln&&Fe!==Ct&&Fe!==vt&&le(Ve,ir,hn,Qn,yn,Ut,Fe.x,Fe.y)&&Et(Fe.prev,Fe,Fe.next)>=0))return!1;Fe=Fe.nextZ}for(;Xe&&Xe.z>=Lt;){if(Xe.x>=En&&Xe.x<=lr&&Xe.y>=Tn&&Xe.y<=ln&&Xe!==Ct&&Xe!==vt&&le(Ve,ir,hn,Qn,yn,Ut,Xe.x,Xe.y)&&Et(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.prevZ}for(;Fe&&Fe.z<=bn;){if(Fe.x>=En&&Fe.x<=lr&&Fe.y>=Tn&&Fe.y<=ln&&Fe!==Ct&&Fe!==vt&&le(Ve,ir,hn,Qn,yn,Ut,Fe.x,Fe.y)&&Et(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.nextZ}return!0}function Q(Le,pt,at){var nt=Le;do{var Ct=nt.prev,rt=nt.next.next;!mt(Ct,rt)&&Wt(Ct,nt,nt.next,rt)&&Ie(Ct,rt)&&Ie(rt,Ct)&&(pt.push(Ct.i/at|0),pt.push(nt.i/at|0),pt.push(rt.i/at|0),cn(nt),cn(nt.next),nt=Le=rt),nt=nt.next}while(nt!==Le);return ee(nt)}function ge(Le,pt,at,nt,Ct,rt){var vt=Le;do{for(var Ve=vt.next.next;Ve!==vt.prev;){if(vt.i!==Ve.i&&Ue(vt,Ve)){var hn=it(vt,Ve);vt=ee(vt,vt.next),hn=ee(hn,hn.next),ae(vt,pt,at,nt,Ct,rt,0),ae(hn,pt,at,nt,Ct,rt,0);return}Ve=Ve.next}vt=vt.next}while(vt!==Le)}function pe(Le,pt,at,nt){var Ct=[],rt,vt,Ve,hn,yn;for(rt=0,vt=pt.length;rt<vt;rt++)Ve=pt[rt]*nt,hn=rt<vt-1?pt[rt+1]*nt:Le.length,yn=D(Le,Ve,hn,nt,!1),yn===yn.next&&(yn.steiner=!0),Ct.push(xe(yn));for(Ct.sort(Ce),rt=0;rt<Ct.length;rt++)at=he(Ct[rt],at);return at}function Ce(Le,pt){return Le.x-pt.x}function he(Le,pt){var at=st(Le,pt);if(!at)return pt;var nt=it(at,Le);return ee(nt,nt.next),ee(at,at.next)}function st(Le,pt){var at=pt,nt=Le.x,Ct=Le.y,rt=-1/0,vt;do{if(Ct<=at.y&&Ct>=at.next.y&&at.next.y!==at.y){var Ve=at.x+(Ct-at.y)*(at.next.x-at.x)/(at.next.y-at.y);if(Ve<=nt&&Ve>rt&&(rt=Ve,vt=at.x<at.next.x?at:at.next,Ve===nt))return vt}at=at.next}while(at!==pt);if(!vt)return null;var hn=vt,yn=vt.x,ir=vt.y,Qn=1/0,Ut;at=vt;do nt>=at.x&&at.x>=yn&&nt!==at.x&&le(Ct<ir?nt:rt,Ct,yn,ir,Ct<ir?rt:nt,Ct,at.x,at.y)&&(Ut=Math.abs(Ct-at.y)/(nt-at.x),Ie(at,Le)&&(Ut<Qn||Ut===Qn&&(at.x>vt.x||at.x===vt.x&&re(vt,at)))&&(vt=at,Qn=Ut)),at=at.next;while(at!==hn);return vt}function re(Le,pt){return Et(Le.prev,Le,pt.prev)<0&&Et(pt.next,Le,Le.next)<0}function Se(Le,pt,at,nt){var Ct=Le;do Ct.z===0&&(Ct.z=de(Ct.x,Ct.y,pt,at,nt)),Ct.prevZ=Ct.prev,Ct.nextZ=Ct.next,Ct=Ct.next;while(Ct!==Le);Ct.prevZ.nextZ=null,Ct.prevZ=null,se(Ct)}function se(Le){var pt,at,nt,Ct,rt,vt,Ve,hn,yn=1;do{for(at=Le,Le=null,rt=null,vt=0;at;){for(vt++,nt=at,Ve=0,pt=0;pt<yn&&(Ve++,nt=nt.nextZ,!!nt);pt++);for(hn=yn;Ve>0||hn>0&&nt;)Ve!==0&&(hn===0||!nt||at.z<=nt.z)?(Ct=at,at=at.nextZ,Ve--):(Ct=nt,nt=nt.nextZ,hn--),rt?rt.nextZ=Ct:Le=Ct,Ct.prevZ=rt,rt=Ct;at=nt}rt.nextZ=null,yn*=2}while(vt>1);return Le}function de(Le,pt,at,nt,Ct){return Le=(Le-at)*Ct|0,pt=(pt-nt)*Ct|0,Le=(Le|Le<<8)&16711935,Le=(Le|Le<<4)&252645135,Le=(Le|Le<<2)&858993459,Le=(Le|Le<<1)&1431655765,pt=(pt|pt<<8)&16711935,pt=(pt|pt<<4)&252645135,pt=(pt|pt<<2)&858993459,pt=(pt|pt<<1)&1431655765,Le|pt<<1}function xe(Le){var pt=Le,at=Le;do(pt.x<at.x||pt.x===at.x&&pt.y<at.y)&&(at=pt),pt=pt.next;while(pt!==Le);return at}function le(Le,pt,at,nt,Ct,rt,vt,Ve){return(Ct-vt)*(pt-Ve)>=(Le-vt)*(rt-Ve)&&(Le-vt)*(nt-Ve)>=(at-vt)*(pt-Ve)&&(at-vt)*(rt-Ve)>=(Ct-vt)*(nt-Ve)}function Ue(Le,pt){return Le.next.i!==pt.i&&Le.prev.i!==pt.i&&!Ze(Le,pt)&&(Ie(Le,pt)&&Ie(pt,Le)&&Qe(Le,pt)&&(Et(Le.prev,Le,pt.prev)||Et(Le,pt.prev,pt))||mt(Le,pt)&&Et(Le.prev,Le,Le.next)>0&&Et(pt.prev,pt,pt.next)>0)}function Et(Le,pt,at){return(pt.y-Le.y)*(at.x-pt.x)-(pt.x-Le.x)*(at.y-pt.y)}function mt(Le,pt){return Le.x===pt.x&&Le.y===pt.y}function Wt(Le,pt,at,nt){var Ct=Tt(Et(Le,pt,at)),rt=Tt(Et(Le,pt,nt)),vt=Tt(Et(at,nt,Le)),Ve=Tt(Et(at,nt,pt));return!!(Ct!==rt&&vt!==Ve||Ct===0&&Rt(Le,at,pt)||rt===0&&Rt(Le,nt,pt)||vt===0&&Rt(at,Le,nt)||Ve===0&&Rt(at,pt,nt))}function Rt(Le,pt,at){return pt.x<=Math.max(Le.x,at.x)&&pt.x>=Math.min(Le.x,at.x)&&pt.y<=Math.max(Le.y,at.y)&&pt.y>=Math.min(Le.y,at.y)}function Tt(Le){return Le>0?1:Le<0?-1:0}function Ze(Le,pt){var at=Le;do{if(at.i!==Le.i&&at.next.i!==Le.i&&at.i!==pt.i&&at.next.i!==pt.i&&Wt(at,at.next,Le,pt))return!0;at=at.next}while(at!==Le);return!1}function Ie(Le,pt){return Et(Le.prev,Le,Le.next)<0?Et(Le,pt,Le.next)>=0&&Et(Le,Le.prev,pt)>=0:Et(Le,pt,Le.prev)<0||Et(Le,Le.next,pt)<0}function Qe(Le,pt){var at=Le,nt=!1,Ct=(Le.x+pt.x)/2,rt=(Le.y+pt.y)/2;do at.y>rt!=at.next.y>rt&&at.next.y!==at.y&&Ct<(at.next.x-at.x)*(rt-at.y)/(at.next.y-at.y)+at.x&&(nt=!nt),at=at.next;while(at!==Le);return nt}function it(Le,pt){var at=new qe(Le.i,Le.x,Le.y),nt=new qe(pt.i,pt.x,pt.y),Ct=Le.next,rt=pt.prev;return Le.next=pt,pt.prev=Le,at.next=Ct,Ct.prev=at,nt.next=at,at.prev=nt,rt.next=nt,nt.prev=rt,nt}function De(Le,pt,at,nt){var Ct=new qe(Le,pt,at);return nt?(Ct.next=nt.next,Ct.prev=nt,nt.next.prev=Ct,nt.next=Ct):(Ct.prev=Ct,Ct.next=Ct),Ct}function cn(Le){Le.next.prev=Le.prev,Le.prev.next=Le.next,Le.prevZ&&(Le.prevZ.nextZ=Le.nextZ),Le.nextZ&&(Le.nextZ.prevZ=Le.prevZ)}function qe(Le,pt,at){this.i=Le,this.x=pt,this.y=at,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}G.deviation=function(Le,pt,at,nt){var Ct=pt&&pt.length,rt=Ct?pt[0]*at:Le.length,vt=Math.abs(Pt(Le,0,rt,at));if(Ct)for(var Ve=0,hn=pt.length;Ve<hn;Ve++){var yn=pt[Ve]*at,ir=Ve<hn-1?pt[Ve+1]*at:Le.length;vt-=Math.abs(Pt(Le,yn,ir,at))}var Qn=0;for(Ve=0;Ve<nt.length;Ve+=3){var Ut=nt[Ve]*at,En=nt[Ve+1]*at,Tn=nt[Ve+2]*at;Qn+=Math.abs((Le[Ut]-Le[Tn])*(Le[En+1]-Le[Ut+1])-(Le[Ut]-Le[En])*(Le[Tn+1]-Le[Ut+1]))}return vt===0&&Qn===0?0:Math.abs((Qn-vt)/vt)};function Pt(Le,pt,at,nt){for(var Ct=0,rt=pt,vt=at-nt;rt<at;rt+=nt)Ct+=(Le[vt]-Le[rt])*(Le[rt+1]+Le[vt+1]),vt=rt;return Ct}G.flatten=function(Le){for(var pt=Le[0][0].length,at={vertices:[],holes:[],dimensions:pt},nt=0,Ct=0;Ct<Le.length;Ct++){for(var rt=0;rt<Le[Ct].length;rt++)for(var vt=0;vt<pt;vt++)at.vertices.push(Le[Ct][rt][vt]);Ct>0&&(nt+=Le[Ct-1].length,at.holes.push(nt))}return at}},2268:function(It){"use strict";var G=It.exports={};G.isIE=function(D){function ee(){var T=navigator.userAgent.toLowerCase();return T.indexOf("msie")!==-1||T.indexOf("trident")!==-1||T.indexOf(" edge/")!==-1}if(!ee())return!1;if(!D)return!0;var ae=function(){var T,ne=3,Q=document.createElement("div"),ge=Q.getElementsByTagName("i");do Q.innerHTML="<!--[if gt IE "+ ++ne+"]><i></i><![endif]-->";while(ge[0]);return ne>4?ne:T}();return D===ae},G.isLegacyOpera=function(){return!!window.opera}},17900:function(It){"use strict";var G=It.exports={};G.forEach=function(D,ee){for(var ae=0;ae<D.length;ae++){var T=ee(D[ae]);if(T)return T}}},58229:function(It,G,D){"use strict";var ee=D(2268);It.exports=function(ae){ae=ae||{};var T=ae.reporter,ne=ae.batchProcessor,Q=ae.stateHandler.getState;if(!T)throw new Error("Missing required dependency: reporter.");function ge(re,Se){function se(){Se(re)}if(ee.isIE(8))Q(re).object={proxy:se},re.attachEvent("onresize",se);else{var de=he(re);if(!de)throw new Error("Element is not detectable by this strategy.");de.contentDocument.defaultView.addEventListener("resize",se)}}function pe(re){var Se=ae.important?" !important; ":"; ";return(re.join(Se)+Se).trim()}function Ce(re,Se,se){se||(se=Se,Se=re,re=null),re=re||{};var de=re.debug;function xe(le,Ue){var Et=pe(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),mt=!1,Wt=window.getComputedStyle(le),Rt=le.offsetWidth,Tt=le.offsetHeight;Q(le).startSize={width:Rt,height:Tt};function Ze(){function Ie(){if(Wt.position==="static"){le.style.setProperty("position","relative",re.important?"important":"");var De=function(cn,qe,Pt,Le){function pt(nt){return nt.replace(/[^-\d\.]/g,"")}var at=Pt[Le];at!=="auto"&&pt(at)!=="0"&&(cn.warn("An element that is positioned static has style."+Le+"="+at+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Le+" will be set to 0. Element: ",qe),qe.style.setProperty(Le,"0",re.important?"important":""))};De(T,le,Wt,"top"),De(T,le,Wt,"right"),De(T,le,Wt,"bottom"),De(T,le,Wt,"left")}}function Qe(){mt||Ie();function De(qe,Pt){if(!qe.contentDocument){var Le=Q(qe);Le.checkForObjectDocumentTimeoutId&&window.clearTimeout(Le.checkForObjectDocumentTimeoutId),Le.checkForObjectDocumentTimeoutId=setTimeout(function(){Le.checkForObjectDocumentTimeoutId=0,De(qe,Pt)},100);return}Pt(qe.contentDocument)}var cn=this;De(cn,function(Pt){Ue(le)})}Wt.position!==""&&(Ie(Wt),mt=!0);var it=document.createElement("object");it.style.cssText=Et,it.tabIndex=-1,it.type="text/html",it.setAttribute("aria-hidden","true"),it.onload=Qe,ee.isIE()||(it.data="about:blank"),Q(le)&&(le.appendChild(it),Q(le).object=it,ee.isIE()&&(it.data="about:blank"))}ne?ne.add(Ze):Ze()}ee.isIE(8)?se(Se):xe(Se,se)}function he(re){return Q(re).object}function st(re){if(Q(re)){var Se=he(re);Se&&(ee.isIE(8)?re.detachEvent("onresize",Se.proxy):re.removeChild(Se),Q(re).checkForObjectDocumentTimeoutId&&window.clearTimeout(Q(re).checkForObjectDocumentTimeoutId),delete Q(re).object)}}return{makeDetectable:Ce,addListener:ge,uninstall:st}}},60787:function(It,G,D){"use strict";var ee=D(17900).forEach;It.exports=function(ae){ae=ae||{};var T=ae.reporter,ne=ae.batchProcessor,Q=ae.stateHandler.getState,ge=ae.stateHandler.hasState,pe=ae.idHandler;if(!ne)throw new Error("Missing required dependency: batchProcessor");if(!T)throw new Error("Missing required dependency: reporter.");var Ce=se(),he="erd_scroll_detection_scrollbar_style",st="erd_scroll_detection_container";function re(Ze){de(Ze,he,st)}re(window.document);function Se(Ze){var Ie=ae.important?" !important; ":"; ";return(Ze.join(Ie)+Ie).trim()}function se(){var Ze=500,Ie=500,Qe=document.createElement("div");Qe.style.cssText=Se(["position: absolute","width: "+Ze*2+"px","height: "+Ie*2+"px","visibility: hidden","margin: 0","padding: 0"]);var it=document.createElement("div");it.style.cssText=Se(["position: absolute","width: "+Ze+"px","height: "+Ie+"px","overflow: scroll","visibility: none","top: "+-Ze*3+"px","left: "+-Ie*3+"px","visibility: hidden","margin: 0","padding: 0"]),it.appendChild(Qe),document.body.insertBefore(it,document.body.firstChild);var De=Ze-it.clientWidth,cn=Ie-it.clientHeight;return document.body.removeChild(it),{width:De,height:cn}}function de(Ze,Ie,Qe){function it(Pt,Le){Le=Le||function(at){Ze.head.appendChild(at)};var pt=Ze.createElement("style");return pt.innerHTML=Pt,pt.id=Ie,Le(pt),pt}if(!Ze.getElementById(Ie)){var De=Qe+"_animation",cn=Qe+"_animation_active",qe=`/* Created by the element-resize-detector library. */
`;qe+="."+Qe+" > div::-webkit-scrollbar { "+Se(["display: none"])+` }

`,qe+="."+cn+" { "+Se(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+De,"animation-name: "+De])+` }
`,qe+="@-webkit-keyframes "+De+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,qe+="@keyframes "+De+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",it(qe)}}function xe(Ze){Ze.className+=" "+st+"_animation_active"}function le(Ze,Ie,Qe){if(Ze.addEventListener)Ze.addEventListener(Ie,Qe);else if(Ze.attachEvent)Ze.attachEvent("on"+Ie,Qe);else return T.error("[scroll] Don't know how to add event listeners.")}function Ue(Ze,Ie,Qe){if(Ze.removeEventListener)Ze.removeEventListener(Ie,Qe);else if(Ze.detachEvent)Ze.detachEvent("on"+Ie,Qe);else return T.error("[scroll] Don't know how to remove event listeners.")}function Et(Ze){return Q(Ze).container.childNodes[0].childNodes[0].childNodes[0]}function mt(Ze){return Q(Ze).container.childNodes[0].childNodes[0].childNodes[1]}function Wt(Ze,Ie){var Qe=Q(Ze).listeners;if(!Qe.push)throw new Error("Cannot add listener to an element that is not detectable.");Q(Ze).listeners.push(Ie)}function Rt(Ze,Ie,Qe){Qe||(Qe=Ie,Ie=Ze,Ze=null),Ze=Ze||{};function it(){if(Ze.debug){var Lt=Array.prototype.slice.call(arguments);if(Lt.unshift(pe.get(Ie),"Scroll: "),T.log.apply)T.log.apply(null,Lt);else for(var bn=0;bn<Lt.length;bn++)T.log(Lt[bn])}}function De(Lt){function bn(Xe){var Fe=Xe.getRootNode&&Xe.getRootNode().contains(Xe);return Xe===Xe.ownerDocument.body||Xe.ownerDocument.body.contains(Xe)||Fe}return!bn(Lt)||window.getComputedStyle(Lt)===null}function cn(Lt){var bn=Q(Lt).container.childNodes[0],Xe=window.getComputedStyle(bn);return!Xe.width||Xe.width.indexOf("px")===-1}function qe(){var Lt=window.getComputedStyle(Ie),bn={};return bn.position=Lt.position,bn.width=Ie.offsetWidth,bn.height=Ie.offsetHeight,bn.top=Lt.top,bn.right=Lt.right,bn.bottom=Lt.bottom,bn.left=Lt.left,bn.widthCSS=Lt.width,bn.heightCSS=Lt.height,bn}function Pt(){var Lt=qe();Q(Ie).startSize={width:Lt.width,height:Lt.height},it("Element start size",Q(Ie).startSize)}function Le(){Q(Ie).listeners=[]}function pt(){if(it("storeStyle invoked."),!Q(Ie)){it("Aborting because element has been uninstalled");return}var Lt=qe();Q(Ie).style=Lt}function at(Lt,bn,Xe){Q(Lt).lastWidth=bn,Q(Lt).lastHeight=Xe}function nt(Lt){return Et(Lt).childNodes[0]}function Ct(){return 2*Ce.width+1}function rt(){return 2*Ce.height+1}function vt(Lt){return Lt+10+Ct()}function Ve(Lt){return Lt+10+rt()}function hn(Lt){return Lt*2+Ct()}function yn(Lt){return Lt*2+rt()}function ir(Lt,bn,Xe){var Fe=Et(Lt),on=mt(Lt),B=vt(bn),be=Ve(Xe),yt=hn(bn),Ee=yn(Xe);Fe.scrollLeft=B,Fe.scrollTop=be,on.scrollLeft=yt,on.scrollTop=Ee}function Qn(){var Lt=Q(Ie).container;if(!Lt){Lt=document.createElement("div"),Lt.className=st,Lt.style.cssText=Se(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),Q(Ie).container=Lt,xe(Lt),Ie.appendChild(Lt);var bn=function(){Q(Ie).onRendered&&Q(Ie).onRendered()};le(Lt,"animationstart",bn),Q(Ie).onAnimationStart=bn}return Lt}function Ut(){function Lt(){var Nr=Q(Ie).style;if(Nr.position==="static"){Ie.style.setProperty("position","relative",Ze.important?"important":"");var Yr=function(bt,ve,ye,Ke){function ht(Jt){return Jt.replace(/[^-\d\.]/g,"")}var xt=ye[Ke];xt!=="auto"&&ht(xt)!=="0"&&(bt.warn("An element that is positioned static has style."+Ke+"="+xt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Ke+" will be set to 0. Element: ",ve),ve.style[Ke]=0)};Yr(T,Ie,Nr,"top"),Yr(T,Ie,Nr,"right"),Yr(T,Ie,Nr,"bottom"),Yr(T,Ie,Nr,"left")}}function bn(Nr,Yr,bt,ve){return Nr=Nr?Nr+"px":"0",Yr=Yr?Yr+"px":"0",bt=bt?bt+"px":"0",ve=ve?ve+"px":"0",["left: "+Nr,"top: "+Yr,"right: "+ve,"bottom: "+bt]}if(it("Injecting elements"),!Q(Ie)){it("Aborting because element has been uninstalled");return}Lt();var Xe=Q(Ie).container;Xe||(Xe=Qn());var Fe=Ce.width,on=Ce.height,B=Se(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),be=Se(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(bn(-(1+Fe),-(1+on),-on,-Fe))),yt=Se(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Ee=Se(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Zt=Se(["position: absolute","left: 0","top: 0"]),_n=Se(["position: absolute","width: 200%","height: 200%"]),Sn=document.createElement("div"),Bn=document.createElement("div"),or=document.createElement("div"),dr=document.createElement("div"),gr=document.createElement("div"),wr=document.createElement("div");Sn.dir="ltr",Sn.style.cssText=B,Sn.className=st,Bn.className=st,Bn.style.cssText=be,or.style.cssText=yt,dr.style.cssText=Zt,gr.style.cssText=Ee,wr.style.cssText=_n,or.appendChild(dr),gr.appendChild(wr),Bn.appendChild(or),Bn.appendChild(gr),Sn.appendChild(Bn),Xe.appendChild(Sn);function Ar(){var Nr=Q(Ie);Nr&&Nr.onExpand?Nr.onExpand():it("Aborting expand scroll handler: element has been uninstalled")}function Ir(){var Nr=Q(Ie);Nr&&Nr.onShrink?Nr.onShrink():it("Aborting shrink scroll handler: element has been uninstalled")}le(or,"scroll",Ar),le(gr,"scroll",Ir),Q(Ie).onExpandScroll=Ar,Q(Ie).onShrinkScroll=Ir}function En(){function Lt(yt,Ee,Zt){var _n=nt(yt),Sn=vt(Ee),Bn=Ve(Zt);_n.style.setProperty("width",Sn+"px",Ze.important?"important":""),_n.style.setProperty("height",Bn+"px",Ze.important?"important":"")}function bn(yt){var Ee=Ie.offsetWidth,Zt=Ie.offsetHeight,_n=Ee!==Q(Ie).lastWidth||Zt!==Q(Ie).lastHeight;it("Storing current size",Ee,Zt),at(Ie,Ee,Zt),ne.add(0,function(){if(_n){if(!Q(Ie)){it("Aborting because element has been uninstalled");return}if(!Xe()){it("Aborting because element container has not been initialized");return}if(Ze.debug){var Bn=Ie.offsetWidth,or=Ie.offsetHeight;(Bn!==Ee||or!==Zt)&&T.warn(pe.get(Ie),"Scroll: Size changed before updating detector elements.")}Lt(Ie,Ee,Zt)}}),ne.add(1,function(){if(!Q(Ie)){it("Aborting because element has been uninstalled");return}if(!Xe()){it("Aborting because element container has not been initialized");return}ir(Ie,Ee,Zt)}),_n&&yt&&ne.add(2,function(){if(!Q(Ie)){it("Aborting because element has been uninstalled");return}if(!Xe()){it("Aborting because element container has not been initialized");return}yt()})}function Xe(){return!!Q(Ie).container}function Fe(){function yt(){return Q(Ie).lastNotifiedWidth===void 0}it("notifyListenersIfNeeded invoked");var Ee=Q(Ie);if(yt()&&Ee.lastWidth===Ee.startSize.width&&Ee.lastHeight===Ee.startSize.height)return it("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Ee.lastWidth===Ee.lastNotifiedWidth&&Ee.lastHeight===Ee.lastNotifiedHeight)return it("Not notifying: Size already notified");it("Current size not notified, notifying..."),Ee.lastNotifiedWidth=Ee.lastWidth,Ee.lastNotifiedHeight=Ee.lastHeight,ee(Q(Ie).listeners,function(Zt){Zt(Ie)})}function on(){if(it("startanimation triggered."),cn(Ie)){it("Ignoring since element is still unrendered...");return}it("Element rendered.");var yt=Et(Ie),Ee=mt(Ie);(yt.scrollLeft===0||yt.scrollTop===0||Ee.scrollLeft===0||Ee.scrollTop===0)&&(it("Scrollbars out of sync. Updating detector elements..."),bn(Fe))}function B(){if(it("Scroll detected."),cn(Ie)){it("Scroll event fired while unrendered. Ignoring...");return}bn(Fe)}if(it("registerListenersAndPositionElements invoked."),!Q(Ie)){it("Aborting because element has been uninstalled");return}Q(Ie).onRendered=on,Q(Ie).onExpand=B,Q(Ie).onShrink=B;var be=Q(Ie).style;Lt(Ie,be.width,be.height)}function Tn(){if(it("finalizeDomMutation invoked."),!Q(Ie)){it("Aborting because element has been uninstalled");return}var Lt=Q(Ie).style;at(Ie,Lt.width,Lt.height),ir(Ie,Lt.width,Lt.height)}function lr(){Qe(Ie)}function ln(){it("Installing..."),Le(),Pt(),ne.add(0,pt),ne.add(1,Ut),ne.add(2,En),ne.add(3,Tn),ne.add(4,lr)}it("Making detectable..."),De(Ie)?(it("Element is detached"),Qn(),it("Waiting until element is attached..."),Q(Ie).onRendered=function(){it("Element is now attached"),ln()}):ln()}function Tt(Ze){var Ie=Q(Ze);Ie&&(Ie.onExpandScroll&&Ue(Et(Ze),"scroll",Ie.onExpandScroll),Ie.onShrinkScroll&&Ue(mt(Ze),"scroll",Ie.onShrinkScroll),Ie.onAnimationStart&&Ue(Ie.container,"animationstart",Ie.onAnimationStart),Ie.container&&Ze.removeChild(Ie.container))}return{makeDetectable:Rt,addListener:Wt,uninstall:Tt,initDocument:re}}},63844:function(It,G,D){"use strict";var ee=D(17900).forEach,ae=D(68452),T=D(96199),ne=D(75805),Q=D(79799),ge=D(71724),pe=D(2268),Ce=D(98129),he=D(21931),st=D(58229),re=D(60787);function Se(le){return Array.isArray(le)||le.length!==void 0}function se(le){if(Array.isArray(le))return le;var Ue=[];return ee(le,function(Et){Ue.push(Et)}),Ue}function de(le){return le&&le.nodeType===1}It.exports=function(le){le=le||{};var Ue;if(le.idHandler)Ue={get:function(nt){return le.idHandler.get(nt,!0)},set:le.idHandler.set};else{var Et=ne(),mt=Q({idGenerator:Et,stateHandler:he});Ue=mt}var Wt=le.reporter;if(!Wt){var Rt=Wt===!1;Wt=ge(Rt)}var Tt=xe(le,"batchProcessor",Ce({reporter:Wt})),Ze={};Ze.callOnAdd=!!xe(le,"callOnAdd",!0),Ze.debug=!!xe(le,"debug",!1);var Ie=T(Ue),Qe=ae({stateHandler:he}),it,De=xe(le,"strategy","object"),cn=xe(le,"important",!1),qe={reporter:Wt,batchProcessor:Tt,stateHandler:he,idHandler:Ue,important:cn};if(De==="scroll"&&(pe.isLegacyOpera()?(Wt.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),De="object"):pe.isIE(9)&&(Wt.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),De="object")),De==="scroll")it=re(qe);else if(De==="object")it=st(qe);else throw new Error("Invalid strategy name: "+De);var Pt={};function Le(nt,Ct,rt){function vt(Ut){var En=Ie.get(Ut);ee(En,function(lr){lr(Ut)})}function Ve(Ut,En,Tn){Ie.add(En,Tn),Ut&&Tn(En)}if(rt||(rt=Ct,Ct=nt,nt={}),!Ct)throw new Error("At least one element required.");if(!rt)throw new Error("Listener required.");if(de(Ct))Ct=[Ct];else if(Se(Ct))Ct=se(Ct);else return Wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var hn=0,yn=xe(nt,"callOnAdd",Ze.callOnAdd),ir=xe(nt,"onReady",function(){}),Qn=xe(nt,"debug",Ze.debug);ee(Ct,function(En){he.getState(En)||(he.initState(En),Ue.set(En));var Tn=Ue.get(En);if(Qn&&Wt.log("Attaching listener to element",Tn,En),!Qe.isDetectable(En)){if(Qn&&Wt.log(Tn,"Not detectable."),Qe.isBusy(En)){Qn&&Wt.log(Tn,"System busy making it detectable"),Ve(yn,En,rt),Pt[Tn]=Pt[Tn]||[],Pt[Tn].push(function(){hn++,hn===Ct.length&&ir()});return}return Qn&&Wt.log(Tn,"Making detectable..."),Qe.markBusy(En,!0),it.makeDetectable({debug:Qn,important:cn},En,function(ln){if(Qn&&Wt.log(Tn,"onElementDetectable"),he.getState(ln)){Qe.markAsDetectable(ln),Qe.markBusy(ln,!1),it.addListener(ln,vt),Ve(yn,ln,rt);var Lt=he.getState(ln);if(Lt&&Lt.startSize){var bn=ln.offsetWidth,Xe=ln.offsetHeight;(Lt.startSize.width!==bn||Lt.startSize.height!==Xe)&&vt(ln)}Pt[Tn]&&ee(Pt[Tn],function(Fe){Fe()})}else Qn&&Wt.log(Tn,"Element uninstalled before being detectable.");delete Pt[Tn],hn++,hn===Ct.length&&ir()})}Qn&&Wt.log(Tn,"Already detecable, adding listener."),Ve(yn,En,rt),hn++}),hn===Ct.length&&ir()}function pt(nt){if(!nt)return Wt.error("At least one element is required.");if(de(nt))nt=[nt];else if(Se(nt))nt=se(nt);else return Wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");ee(nt,function(Ct){Ie.removeAllListeners(Ct),it.uninstall(Ct),he.cleanState(Ct)})}function at(nt){it.initDocument&&it.initDocument(nt)}return{listenTo:Le,removeListener:Ie.removeListener,removeAllListeners:Ie.removeAllListeners,uninstall:pt,initDocument:at}};function xe(le,Ue,Et){var mt=le[Ue];return mt==null&&Et!==void 0?Et:mt}},68452:function(It){"use strict";It.exports=function(G){var D=G.stateHandler.getState;function ee(Q){var ge=D(Q);return ge&&!!ge.isDetectable}function ae(Q){D(Q).isDetectable=!0}function T(Q){return!!D(Q).busy}function ne(Q,ge){D(Q).busy=!!ge}return{isDetectable:ee,markAsDetectable:ae,isBusy:T,markBusy:ne}}},75805:function(It){"use strict";It.exports=function(){var G=1;function D(){return G++}return{generate:D}}},79799:function(It){"use strict";It.exports=function(G){var D=G.idGenerator,ee=G.stateHandler.getState;function ae(ne){var Q=ee(ne);return Q&&Q.id!==void 0?Q.id:null}function T(ne){var Q=ee(ne);if(!Q)throw new Error("setId required the element to have a resize detection state.");var ge=D.generate();return Q.id=ge,ge}return{get:ae,set:T}}},96199:function(It){"use strict";It.exports=function(G){var D={};function ee(Q){var ge=G.get(Q);return ge===void 0?[]:D[ge]||[]}function ae(Q,ge){var pe=G.get(Q);D[pe]||(D[pe]=[]),D[pe].push(ge)}function T(Q,ge){for(var pe=ee(Q),Ce=0,he=pe.length;Ce<he;++Ce)if(pe[Ce]===ge){pe.splice(Ce,1);break}}function ne(Q){var ge=ee(Q);ge&&(ge.length=0)}return{get:ee,add:ae,removeListener:T,removeAllListeners:ne}}},71724:function(It){"use strict";It.exports=function(G){function D(){}var ee={log:D,warn:D,error:D};if(!G&&window.console){var ae=function(T,ne){T[ne]=function(){var ge=console[ne];if(ge.apply)ge.apply(console,arguments);else for(var pe=0;pe<arguments.length;pe++)ge(arguments[pe])}};ae(ee,"log"),ae(ee,"warn"),ae(ee,"error")}return ee}},21931:function(It){"use strict";var G="_erd";function D(T){return T[G]={},ee(T)}function ee(T){return T[G]}function ae(T){delete T[G]}It.exports={initState:D,getState:ee,cleanState:ae}},26729:function(It){"use strict";var G=Object.prototype.hasOwnProperty,D="~";function ee(){}Object.create&&(ee.prototype=Object.create(null),new ee().__proto__||(D=!1));function ae(ge,pe,Ce){this.fn=ge,this.context=pe,this.once=Ce||!1}function T(ge,pe,Ce,he,st){if(typeof Ce!="function")throw new TypeError("The listener must be a function");var re=new ae(Ce,he||ge,st),Se=D?D+pe:pe;return ge._events[Se]?ge._events[Se].fn?ge._events[Se]=[ge._events[Se],re]:ge._events[Se].push(re):(ge._events[Se]=re,ge._eventsCount++),ge}function ne(ge,pe){--ge._eventsCount===0?ge._events=new ee:delete ge._events[pe]}function Q(){this._events=new ee,this._eventsCount=0}Q.prototype.eventNames=function(){var pe=[],Ce,he;if(this._eventsCount===0)return pe;for(he in Ce=this._events)G.call(Ce,he)&&pe.push(D?he.slice(1):he);return Object.getOwnPropertySymbols?pe.concat(Object.getOwnPropertySymbols(Ce)):pe},Q.prototype.listeners=function(pe){var Ce=D?D+pe:pe,he=this._events[Ce];if(!he)return[];if(he.fn)return[he.fn];for(var st=0,re=he.length,Se=new Array(re);st<re;st++)Se[st]=he[st].fn;return Se},Q.prototype.listenerCount=function(pe){var Ce=D?D+pe:pe,he=this._events[Ce];return he?he.fn?1:he.length:0},Q.prototype.emit=function(pe,Ce,he,st,re,Se){var se=D?D+pe:pe;if(!this._events[se])return!1;var de=this._events[se],xe=arguments.length,le,Ue;if(de.fn){switch(de.once&&this.removeListener(pe,de.fn,void 0,!0),xe){case 1:return de.fn.call(de.context),!0;case 2:return de.fn.call(de.context,Ce),!0;case 3:return de.fn.call(de.context,Ce,he),!0;case 4:return de.fn.call(de.context,Ce,he,st),!0;case 5:return de.fn.call(de.context,Ce,he,st,re),!0;case 6:return de.fn.call(de.context,Ce,he,st,re,Se),!0}for(Ue=1,le=new Array(xe-1);Ue<xe;Ue++)le[Ue-1]=arguments[Ue];de.fn.apply(de.context,le)}else{var Et=de.length,mt;for(Ue=0;Ue<Et;Ue++)switch(de[Ue].once&&this.removeListener(pe,de[Ue].fn,void 0,!0),xe){case 1:de[Ue].fn.call(de[Ue].context);break;case 2:de[Ue].fn.call(de[Ue].context,Ce);break;case 3:de[Ue].fn.call(de[Ue].context,Ce,he);break;case 4:de[Ue].fn.call(de[Ue].context,Ce,he,st);break;default:if(!le)for(mt=1,le=new Array(xe-1);mt<xe;mt++)le[mt-1]=arguments[mt];de[Ue].fn.apply(de[Ue].context,le)}}return!0},Q.prototype.on=function(pe,Ce,he){return T(this,pe,Ce,he,!1)},Q.prototype.once=function(pe,Ce,he){return T(this,pe,Ce,he,!0)},Q.prototype.removeListener=function(pe,Ce,he,st){var re=D?D+pe:pe;if(!this._events[re])return this;if(!Ce)return ne(this,re),this;var Se=this._events[re];if(Se.fn)Se.fn===Ce&&(!st||Se.once)&&(!he||Se.context===he)&&ne(this,re);else{for(var se=0,de=[],xe=Se.length;se<xe;se++)(Se[se].fn!==Ce||st&&!Se[se].once||he&&Se[se].context!==he)&&de.push(Se[se]);de.length?this._events[re]=de.length===1?de[0]:de:ne(this,re)}return this},Q.prototype.removeAllListeners=function(pe){var Ce;return pe?(Ce=D?D+pe:pe,this._events[Ce]&&ne(this,Ce)):(this._events=new ee,this._eventsCount=0),this},Q.prototype.off=Q.prototype.removeListener,Q.prototype.addListener=Q.prototype.on,Q.prefixed=D,Q.EventEmitter=Q,It.exports=Q},69916:function(It,G){(function(D,ee){ee(G)})(this,function(D){"use strict";function ee(se,de,xe,le){le=le||{};var Ue=le.maxIterations||100,Et=le.tolerance||1e-10,mt=se(de),Wt=se(xe),Rt=xe-de;if(mt*Wt>0)throw"Initial bisect points must have opposite signs";if(mt===0)return de;if(Wt===0)return xe;for(var Tt=0;Tt<Ue;++Tt){Rt/=2;var Ze=de+Rt,Ie=se(Ze);if(Ie*mt>=0&&(de=Ze),Math.abs(Rt)<Et||Ie===0)return Ze}return de+Rt}function ae(se){for(var de=new Array(se),xe=0;xe<se;++xe)de[xe]=0;return de}function T(se,de){return ae(se).map(function(){return ae(de)})}function ne(se,de){for(var xe=0,le=0;le<se.length;++le)xe+=se[le]*de[le];return xe}function Q(se){return Math.sqrt(ne(se,se))}function ge(se,de,xe){for(var le=0;le<de.length;++le)se[le]=de[le]*xe}function pe(se,de,xe,le,Ue){for(var Et=0;Et<se.length;++Et)se[Et]=de*xe[Et]+le*Ue[Et]}function Ce(se,de,xe){xe=xe||{};var le=xe.maxIterations||de.length*200,Ue=xe.nonZeroDelta||1.05,Et=xe.zeroDelta||.001,mt=xe.minErrorDelta||1e-6,Wt=xe.minErrorDelta||1e-5,Rt=xe.rho!==void 0?xe.rho:1,Tt=xe.chi!==void 0?xe.chi:2,Ze=xe.psi!==void 0?xe.psi:-.5,Ie=xe.sigma!==void 0?xe.sigma:.5,Qe,it=de.length,De=new Array(it+1);De[0]=de,De[0].fx=se(de),De[0].id=0;for(var cn=0;cn<it;++cn){var qe=de.slice();qe[cn]=qe[cn]?qe[cn]*Ue:Et,De[cn+1]=qe,De[cn+1].fx=se(qe),De[cn+1].id=cn+1}function Pt(ir){for(var Qn=0;Qn<ir.length;Qn++)De[it][Qn]=ir[Qn];De[it].fx=ir.fx}for(var Le=function(ir,Qn){return ir.fx-Qn.fx},pt=de.slice(),at=de.slice(),nt=de.slice(),Ct=de.slice(),rt=0;rt<le;++rt){if(De.sort(Le),xe.history){var vt=De.map(function(ir){var Qn=ir.slice();return Qn.fx=ir.fx,Qn.id=ir.id,Qn});vt.sort(function(ir,Qn){return ir.id-Qn.id}),xe.history.push({x:De[0].slice(),fx:De[0].fx,simplex:vt})}for(Qe=0,cn=0;cn<it;++cn)Qe=Math.max(Qe,Math.abs(De[0][cn]-De[1][cn]));if(Math.abs(De[0].fx-De[it].fx)<mt&&Qe<Wt)break;for(cn=0;cn<it;++cn){pt[cn]=0;for(var Ve=0;Ve<it;++Ve)pt[cn]+=De[Ve][cn];pt[cn]/=it}var hn=De[it];if(pe(at,1+Rt,pt,-Rt,hn),at.fx=se(at),at.fx<De[0].fx)pe(Ct,1+Tt,pt,-Tt,hn),Ct.fx=se(Ct),Ct.fx<at.fx?Pt(Ct):Pt(at);else if(at.fx>=De[it-1].fx){var yn=!1;if(at.fx>hn.fx?(pe(nt,1+Ze,pt,-Ze,hn),nt.fx=se(nt),nt.fx<hn.fx?Pt(nt):yn=!0):(pe(nt,1-Ze*Rt,pt,Ze*Rt,hn),nt.fx=se(nt),nt.fx<at.fx?Pt(nt):yn=!0),yn){if(Ie>=1)break;for(cn=1;cn<De.length;++cn)pe(De[cn],1-Ie,De[0],Ie,De[cn]),De[cn].fx=se(De[cn])}}else Pt(at)}return De.sort(Le),{fx:De[0].fx,x:De[0]}}function he(se,de,xe,le,Ue,Et,mt){var Wt=xe.fx,Rt=ne(xe.fxprime,de),Tt=Wt,Ze=Wt,Ie=Rt,Qe=0;Ue=Ue||1,Et=Et||1e-6,mt=mt||.1;function it(cn,qe,Pt){for(var Le=0;Le<16;++Le)if(Ue=(cn+qe)/2,pe(le.x,1,xe.x,Ue,de),Tt=le.fx=se(le.x,le.fxprime),Ie=ne(le.fxprime,de),Tt>Wt+Et*Ue*Rt||Tt>=Pt)qe=Ue;else{if(Math.abs(Ie)<=-mt*Rt)return Ue;Ie*(qe-cn)>=0&&(qe=cn),cn=Ue,Pt=Tt}return 0}for(var De=0;De<10;++De){if(pe(le.x,1,xe.x,Ue,de),Tt=le.fx=se(le.x,le.fxprime),Ie=ne(le.fxprime,de),Tt>Wt+Et*Ue*Rt||De&&Tt>=Ze)return it(Qe,Ue,Ze);if(Math.abs(Ie)<=-mt*Rt)return Ue;if(Ie>=0)return it(Ue,Qe,Tt);Ze=Tt,Qe=Ue,Ue*=2}return Ue}function st(se,de,xe){var le={x:de.slice(),fx:0,fxprime:de.slice()},Ue={x:de.slice(),fx:0,fxprime:de.slice()},Et=de.slice(),mt,Wt,Rt=1,Tt;xe=xe||{},Tt=xe.maxIterations||de.length*20,le.fx=se(le.x,le.fxprime),mt=le.fxprime.slice(),ge(mt,le.fxprime,-1);for(var Ze=0;Ze<Tt;++Ze){if(Rt=he(se,mt,le,Ue,Rt),xe.history&&xe.history.push({x:le.x.slice(),fx:le.fx,fxprime:le.fxprime.slice(),alpha:Rt}),!Rt)ge(mt,le.fxprime,-1);else{pe(Et,1,Ue.fxprime,-1,le.fxprime);var Ie=ne(le.fxprime,le.fxprime),Qe=Math.max(0,ne(Et,Ue.fxprime)/Ie);pe(mt,Qe,mt,-1,Ue.fxprime),Wt=le,le=Ue,Ue=Wt}if(Q(le.fxprime)<=1e-5)break}return xe.history&&xe.history.push({x:le.x.slice(),fx:le.fx,fxprime:le.fxprime.slice(),alpha:Rt}),le}function re(se,de,xe){xe=xe||{};for(var le=xe.maxIterations||de.length*100,Ue=xe.learnRate||.001,Et={x:de.slice(),fx:0,fxprime:de.slice()},mt=0;mt<le&&(Et.fx=se(Et.x,Et.fxprime),xe.history&&xe.history.push({x:Et.x.slice(),fx:Et.fx,fxprime:Et.fxprime.slice()}),pe(Et.x,1,Et.x,-Ue,Et.fxprime),!(Q(Et.fxprime)<=1e-5));++mt);return Et}function Se(se,de,xe){xe=xe||{};var le={x:de.slice(),fx:0,fxprime:de.slice()},Ue={x:de.slice(),fx:0,fxprime:de.slice()},Et=xe.maxIterations||de.length*100,mt=xe.learnRate||1,Wt=de.slice(),Rt=xe.c1||.001,Tt=xe.c2||.1,Ze,Ie=[];if(xe.history){var Qe=se;se=function(De,cn){return Ie.push(De.slice()),Qe(De,cn)}}le.fx=se(le.x,le.fxprime);for(var it=0;it<Et&&(ge(Wt,le.fxprime,-1),mt=he(se,Wt,le,Ue,mt,Rt,Tt),xe.history&&(xe.history.push({x:le.x.slice(),fx:le.fx,fxprime:le.fxprime.slice(),functionCalls:Ie,learnRate:mt,alpha:mt}),Ie=[]),Ze=le,le=Ue,Ue=Ze,!(mt===0||Q(le.fxprime)<1e-5));++it);return le}D.bisect=ee,D.nelderMead=Ce,D.conjugateGradient=st,D.gradientDescent=re,D.gradientDescentLineSearch=Se,D.zeros=ae,D.zerosM=T,D.norm2=Q,D.weightedSum=pe,D.scale=ge})},49685:function(It,G,D){"use strict";D.d(G,{FD:function(){return T},Ib:function(){return ee},WT:function(){return ae}});var ee=1e-6,ae=typeof Float32Array!="undefined"?Float32Array:Array,T=Math.random;function ne(Ce){ae=Ce}var Q=Math.PI/180;function ge(Ce){return Ce*Q}function pe(Ce,he){return Math.abs(Ce-he)<=ee*Math.max(1,Math.abs(Ce),Math.abs(he))}Math.hypot||(Math.hypot=function(){for(var Ce=0,he=arguments.length;he--;)Ce+=arguments[he]*arguments[he];return Math.sqrt(Ce)})},85975:function(It,G,D){"use strict";D.r(G),D.d(G,{add:function(){return Tn},adjoint:function(){return st},clone:function(){return T},copy:function(){return ne},create:function(){return ae},determinant:function(){return re},equals:function(){return Xe},exactEquals:function(){return bn},frob:function(){return En},fromQuat:function(){return pt},fromQuat2:function(){return it},fromRotation:function(){return Rt},fromRotationTranslation:function(){return Qe},fromRotationTranslationScale:function(){return Pt},fromRotationTranslationScaleOrigin:function(){return Le},fromScaling:function(){return Wt},fromTranslation:function(){return mt},fromValues:function(){return Q},fromXRotation:function(){return Tt},fromYRotation:function(){return Ze},fromZRotation:function(){return Ie},frustum:function(){return at},getRotation:function(){return qe},getScaling:function(){return cn},getTranslation:function(){return De},identity:function(){return pe},invert:function(){return he},lookAt:function(){return ir},mul:function(){return Fe},multiply:function(){return Se},multiplyScalar:function(){return ln},multiplyScalarAndAdd:function(){return Lt},ortho:function(){return hn},orthoNO:function(){return Ve},orthoZO:function(){return yn},perspective:function(){return Ct},perspectiveFromFieldOfView:function(){return vt},perspectiveNO:function(){return nt},perspectiveZO:function(){return rt},rotate:function(){return xe},rotateX:function(){return le},rotateY:function(){return Ue},rotateZ:function(){return Et},scale:function(){return de},set:function(){return ge},str:function(){return Ut},sub:function(){return on},subtract:function(){return lr},targetTo:function(){return Qn},translate:function(){return se},transpose:function(){return Ce}});var ee=D(49685);function ae(){var B=new ee.WT(16);return ee.WT!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[11]=0,B[12]=0,B[13]=0,B[14]=0),B[0]=1,B[5]=1,B[10]=1,B[15]=1,B}function T(B){var be=new ee.WT(16);return be[0]=B[0],be[1]=B[1],be[2]=B[2],be[3]=B[3],be[4]=B[4],be[5]=B[5],be[6]=B[6],be[7]=B[7],be[8]=B[8],be[9]=B[9],be[10]=B[10],be[11]=B[11],be[12]=B[12],be[13]=B[13],be[14]=B[14],be[15]=B[15],be}function ne(B,be){return B[0]=be[0],B[1]=be[1],B[2]=be[2],B[3]=be[3],B[4]=be[4],B[5]=be[5],B[6]=be[6],B[7]=be[7],B[8]=be[8],B[9]=be[9],B[10]=be[10],B[11]=be[11],B[12]=be[12],B[13]=be[13],B[14]=be[14],B[15]=be[15],B}function Q(B,be,yt,Ee,Zt,_n,Sn,Bn,or,dr,gr,wr,Ar,Ir,Nr,Yr){var bt=new ee.WT(16);return bt[0]=B,bt[1]=be,bt[2]=yt,bt[3]=Ee,bt[4]=Zt,bt[5]=_n,bt[6]=Sn,bt[7]=Bn,bt[8]=or,bt[9]=dr,bt[10]=gr,bt[11]=wr,bt[12]=Ar,bt[13]=Ir,bt[14]=Nr,bt[15]=Yr,bt}function ge(B,be,yt,Ee,Zt,_n,Sn,Bn,or,dr,gr,wr,Ar,Ir,Nr,Yr,bt){return B[0]=be,B[1]=yt,B[2]=Ee,B[3]=Zt,B[4]=_n,B[5]=Sn,B[6]=Bn,B[7]=or,B[8]=dr,B[9]=gr,B[10]=wr,B[11]=Ar,B[12]=Ir,B[13]=Nr,B[14]=Yr,B[15]=bt,B}function pe(B){return B[0]=1,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=1,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=1,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}function Ce(B,be){if(B===be){var yt=be[1],Ee=be[2],Zt=be[3],_n=be[6],Sn=be[7],Bn=be[11];B[1]=be[4],B[2]=be[8],B[3]=be[12],B[4]=yt,B[6]=be[9],B[7]=be[13],B[8]=Ee,B[9]=_n,B[11]=be[14],B[12]=Zt,B[13]=Sn,B[14]=Bn}else B[0]=be[0],B[1]=be[4],B[2]=be[8],B[3]=be[12],B[4]=be[1],B[5]=be[5],B[6]=be[9],B[7]=be[13],B[8]=be[2],B[9]=be[6],B[10]=be[10],B[11]=be[14],B[12]=be[3],B[13]=be[7],B[14]=be[11],B[15]=be[15];return B}function he(B,be){var yt=be[0],Ee=be[1],Zt=be[2],_n=be[3],Sn=be[4],Bn=be[5],or=be[6],dr=be[7],gr=be[8],wr=be[9],Ar=be[10],Ir=be[11],Nr=be[12],Yr=be[13],bt=be[14],ve=be[15],ye=yt*Bn-Ee*Sn,Ke=yt*or-Zt*Sn,ht=yt*dr-_n*Sn,xt=Ee*or-Zt*Bn,Jt=Ee*dr-_n*Bn,Dn=Zt*dr-_n*or,fr=gr*Yr-wr*Nr,In=gr*bt-Ar*Nr,ke=gr*ve-Ir*Nr,Pe=wr*bt-Ar*Yr,Ge=wr*ve-Ir*Yr,gt=Ar*ve-Ir*bt,Bt=ye*gt-Ke*Ge+ht*Pe+xt*ke-Jt*In+Dn*fr;return Bt?(Bt=1/Bt,B[0]=(Bn*gt-or*Ge+dr*Pe)*Bt,B[1]=(Zt*Ge-Ee*gt-_n*Pe)*Bt,B[2]=(Yr*Dn-bt*Jt+ve*xt)*Bt,B[3]=(Ar*Jt-wr*Dn-Ir*xt)*Bt,B[4]=(or*ke-Sn*gt-dr*In)*Bt,B[5]=(yt*gt-Zt*ke+_n*In)*Bt,B[6]=(bt*ht-Nr*Dn-ve*Ke)*Bt,B[7]=(gr*Dn-Ar*ht+Ir*Ke)*Bt,B[8]=(Sn*Ge-Bn*ke+dr*fr)*Bt,B[9]=(Ee*ke-yt*Ge-_n*fr)*Bt,B[10]=(Nr*Jt-Yr*ht+ve*ye)*Bt,B[11]=(wr*ht-gr*Jt-Ir*ye)*Bt,B[12]=(Bn*In-Sn*Pe-or*fr)*Bt,B[13]=(yt*Pe-Ee*In+Zt*fr)*Bt,B[14]=(Yr*Ke-Nr*xt-bt*ye)*Bt,B[15]=(gr*xt-wr*Ke+Ar*ye)*Bt,B):null}function st(B,be){var yt=be[0],Ee=be[1],Zt=be[2],_n=be[3],Sn=be[4],Bn=be[5],or=be[6],dr=be[7],gr=be[8],wr=be[9],Ar=be[10],Ir=be[11],Nr=be[12],Yr=be[13],bt=be[14],ve=be[15];return B[0]=Bn*(Ar*ve-Ir*bt)-wr*(or*ve-dr*bt)+Yr*(or*Ir-dr*Ar),B[1]=-(Ee*(Ar*ve-Ir*bt)-wr*(Zt*ve-_n*bt)+Yr*(Zt*Ir-_n*Ar)),B[2]=Ee*(or*ve-dr*bt)-Bn*(Zt*ve-_n*bt)+Yr*(Zt*dr-_n*or),B[3]=-(Ee*(or*Ir-dr*Ar)-Bn*(Zt*Ir-_n*Ar)+wr*(Zt*dr-_n*or)),B[4]=-(Sn*(Ar*ve-Ir*bt)-gr*(or*ve-dr*bt)+Nr*(or*Ir-dr*Ar)),B[5]=yt*(Ar*ve-Ir*bt)-gr*(Zt*ve-_n*bt)+Nr*(Zt*Ir-_n*Ar),B[6]=-(yt*(or*ve-dr*bt)-Sn*(Zt*ve-_n*bt)+Nr*(Zt*dr-_n*or)),B[7]=yt*(or*Ir-dr*Ar)-Sn*(Zt*Ir-_n*Ar)+gr*(Zt*dr-_n*or),B[8]=Sn*(wr*ve-Ir*Yr)-gr*(Bn*ve-dr*Yr)+Nr*(Bn*Ir-dr*wr),B[9]=-(yt*(wr*ve-Ir*Yr)-gr*(Ee*ve-_n*Yr)+Nr*(Ee*Ir-_n*wr)),B[10]=yt*(Bn*ve-dr*Yr)-Sn*(Ee*ve-_n*Yr)+Nr*(Ee*dr-_n*Bn),B[11]=-(yt*(Bn*Ir-dr*wr)-Sn*(Ee*Ir-_n*wr)+gr*(Ee*dr-_n*Bn)),B[12]=-(Sn*(wr*bt-Ar*Yr)-gr*(Bn*bt-or*Yr)+Nr*(Bn*Ar-or*wr)),B[13]=yt*(wr*bt-Ar*Yr)-gr*(Ee*bt-Zt*Yr)+Nr*(Ee*Ar-Zt*wr),B[14]=-(yt*(Bn*bt-or*Yr)-Sn*(Ee*bt-Zt*Yr)+Nr*(Ee*or-Zt*Bn)),B[15]=yt*(Bn*Ar-or*wr)-Sn*(Ee*Ar-Zt*wr)+gr*(Ee*or-Zt*Bn),B}function re(B){var be=B[0],yt=B[1],Ee=B[2],Zt=B[3],_n=B[4],Sn=B[5],Bn=B[6],or=B[7],dr=B[8],gr=B[9],wr=B[10],Ar=B[11],Ir=B[12],Nr=B[13],Yr=B[14],bt=B[15],ve=be*Sn-yt*_n,ye=be*Bn-Ee*_n,Ke=be*or-Zt*_n,ht=yt*Bn-Ee*Sn,xt=yt*or-Zt*Sn,Jt=Ee*or-Zt*Bn,Dn=dr*Nr-gr*Ir,fr=dr*Yr-wr*Ir,In=dr*bt-Ar*Ir,ke=gr*Yr-wr*Nr,Pe=gr*bt-Ar*Nr,Ge=wr*bt-Ar*Yr;return ve*Ge-ye*Pe+Ke*ke+ht*In-xt*fr+Jt*Dn}function Se(B,be,yt){var Ee=be[0],Zt=be[1],_n=be[2],Sn=be[3],Bn=be[4],or=be[5],dr=be[6],gr=be[7],wr=be[8],Ar=be[9],Ir=be[10],Nr=be[11],Yr=be[12],bt=be[13],ve=be[14],ye=be[15],Ke=yt[0],ht=yt[1],xt=yt[2],Jt=yt[3];return B[0]=Ke*Ee+ht*Bn+xt*wr+Jt*Yr,B[1]=Ke*Zt+ht*or+xt*Ar+Jt*bt,B[2]=Ke*_n+ht*dr+xt*Ir+Jt*ve,B[3]=Ke*Sn+ht*gr+xt*Nr+Jt*ye,Ke=yt[4],ht=yt[5],xt=yt[6],Jt=yt[7],B[4]=Ke*Ee+ht*Bn+xt*wr+Jt*Yr,B[5]=Ke*Zt+ht*or+xt*Ar+Jt*bt,B[6]=Ke*_n+ht*dr+xt*Ir+Jt*ve,B[7]=Ke*Sn+ht*gr+xt*Nr+Jt*ye,Ke=yt[8],ht=yt[9],xt=yt[10],Jt=yt[11],B[8]=Ke*Ee+ht*Bn+xt*wr+Jt*Yr,B[9]=Ke*Zt+ht*or+xt*Ar+Jt*bt,B[10]=Ke*_n+ht*dr+xt*Ir+Jt*ve,B[11]=Ke*Sn+ht*gr+xt*Nr+Jt*ye,Ke=yt[12],ht=yt[13],xt=yt[14],Jt=yt[15],B[12]=Ke*Ee+ht*Bn+xt*wr+Jt*Yr,B[13]=Ke*Zt+ht*or+xt*Ar+Jt*bt,B[14]=Ke*_n+ht*dr+xt*Ir+Jt*ve,B[15]=Ke*Sn+ht*gr+xt*Nr+Jt*ye,B}function se(B,be,yt){var Ee=yt[0],Zt=yt[1],_n=yt[2],Sn,Bn,or,dr,gr,wr,Ar,Ir,Nr,Yr,bt,ve;return be===B?(B[12]=be[0]*Ee+be[4]*Zt+be[8]*_n+be[12],B[13]=be[1]*Ee+be[5]*Zt+be[9]*_n+be[13],B[14]=be[2]*Ee+be[6]*Zt+be[10]*_n+be[14],B[15]=be[3]*Ee+be[7]*Zt+be[11]*_n+be[15]):(Sn=be[0],Bn=be[1],or=be[2],dr=be[3],gr=be[4],wr=be[5],Ar=be[6],Ir=be[7],Nr=be[8],Yr=be[9],bt=be[10],ve=be[11],B[0]=Sn,B[1]=Bn,B[2]=or,B[3]=dr,B[4]=gr,B[5]=wr,B[6]=Ar,B[7]=Ir,B[8]=Nr,B[9]=Yr,B[10]=bt,B[11]=ve,B[12]=Sn*Ee+gr*Zt+Nr*_n+be[12],B[13]=Bn*Ee+wr*Zt+Yr*_n+be[13],B[14]=or*Ee+Ar*Zt+bt*_n+be[14],B[15]=dr*Ee+Ir*Zt+ve*_n+be[15]),B}function de(B,be,yt){var Ee=yt[0],Zt=yt[1],_n=yt[2];return B[0]=be[0]*Ee,B[1]=be[1]*Ee,B[2]=be[2]*Ee,B[3]=be[3]*Ee,B[4]=be[4]*Zt,B[5]=be[5]*Zt,B[6]=be[6]*Zt,B[7]=be[7]*Zt,B[8]=be[8]*_n,B[9]=be[9]*_n,B[10]=be[10]*_n,B[11]=be[11]*_n,B[12]=be[12],B[13]=be[13],B[14]=be[14],B[15]=be[15],B}function xe(B,be,yt,Ee){var Zt=Ee[0],_n=Ee[1],Sn=Ee[2],Bn=Math.hypot(Zt,_n,Sn),or,dr,gr,wr,Ar,Ir,Nr,Yr,bt,ve,ye,Ke,ht,xt,Jt,Dn,fr,In,ke,Pe,Ge,gt,Bt,an;return Bn<ee.Ib?null:(Bn=1/Bn,Zt*=Bn,_n*=Bn,Sn*=Bn,or=Math.sin(yt),dr=Math.cos(yt),gr=1-dr,wr=be[0],Ar=be[1],Ir=be[2],Nr=be[3],Yr=be[4],bt=be[5],ve=be[6],ye=be[7],Ke=be[8],ht=be[9],xt=be[10],Jt=be[11],Dn=Zt*Zt*gr+dr,fr=_n*Zt*gr+Sn*or,In=Sn*Zt*gr-_n*or,ke=Zt*_n*gr-Sn*or,Pe=_n*_n*gr+dr,Ge=Sn*_n*gr+Zt*or,gt=Zt*Sn*gr+_n*or,Bt=_n*Sn*gr-Zt*or,an=Sn*Sn*gr+dr,B[0]=wr*Dn+Yr*fr+Ke*In,B[1]=Ar*Dn+bt*fr+ht*In,B[2]=Ir*Dn+ve*fr+xt*In,B[3]=Nr*Dn+ye*fr+Jt*In,B[4]=wr*ke+Yr*Pe+Ke*Ge,B[5]=Ar*ke+bt*Pe+ht*Ge,B[6]=Ir*ke+ve*Pe+xt*Ge,B[7]=Nr*ke+ye*Pe+Jt*Ge,B[8]=wr*gt+Yr*Bt+Ke*an,B[9]=Ar*gt+bt*Bt+ht*an,B[10]=Ir*gt+ve*Bt+xt*an,B[11]=Nr*gt+ye*Bt+Jt*an,be!==B&&(B[12]=be[12],B[13]=be[13],B[14]=be[14],B[15]=be[15]),B)}function le(B,be,yt){var Ee=Math.sin(yt),Zt=Math.cos(yt),_n=be[4],Sn=be[5],Bn=be[6],or=be[7],dr=be[8],gr=be[9],wr=be[10],Ar=be[11];return be!==B&&(B[0]=be[0],B[1]=be[1],B[2]=be[2],B[3]=be[3],B[12]=be[12],B[13]=be[13],B[14]=be[14],B[15]=be[15]),B[4]=_n*Zt+dr*Ee,B[5]=Sn*Zt+gr*Ee,B[6]=Bn*Zt+wr*Ee,B[7]=or*Zt+Ar*Ee,B[8]=dr*Zt-_n*Ee,B[9]=gr*Zt-Sn*Ee,B[10]=wr*Zt-Bn*Ee,B[11]=Ar*Zt-or*Ee,B}function Ue(B,be,yt){var Ee=Math.sin(yt),Zt=Math.cos(yt),_n=be[0],Sn=be[1],Bn=be[2],or=be[3],dr=be[8],gr=be[9],wr=be[10],Ar=be[11];return be!==B&&(B[4]=be[4],B[5]=be[5],B[6]=be[6],B[7]=be[7],B[12]=be[12],B[13]=be[13],B[14]=be[14],B[15]=be[15]),B[0]=_n*Zt-dr*Ee,B[1]=Sn*Zt-gr*Ee,B[2]=Bn*Zt-wr*Ee,B[3]=or*Zt-Ar*Ee,B[8]=_n*Ee+dr*Zt,B[9]=Sn*Ee+gr*Zt,B[10]=Bn*Ee+wr*Zt,B[11]=or*Ee+Ar*Zt,B}function Et(B,be,yt){var Ee=Math.sin(yt),Zt=Math.cos(yt),_n=be[0],Sn=be[1],Bn=be[2],or=be[3],dr=be[4],gr=be[5],wr=be[6],Ar=be[7];return be!==B&&(B[8]=be[8],B[9]=be[9],B[10]=be[10],B[11]=be[11],B[12]=be[12],B[13]=be[13],B[14]=be[14],B[15]=be[15]),B[0]=_n*Zt+dr*Ee,B[1]=Sn*Zt+gr*Ee,B[2]=Bn*Zt+wr*Ee,B[3]=or*Zt+Ar*Ee,B[4]=dr*Zt-_n*Ee,B[5]=gr*Zt-Sn*Ee,B[6]=wr*Zt-Bn*Ee,B[7]=Ar*Zt-or*Ee,B}function mt(B,be){return B[0]=1,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=1,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=1,B[11]=0,B[12]=be[0],B[13]=be[1],B[14]=be[2],B[15]=1,B}function Wt(B,be){return B[0]=be[0],B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=be[1],B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=be[2],B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}function Rt(B,be,yt){var Ee=yt[0],Zt=yt[1],_n=yt[2],Sn=Math.hypot(Ee,Zt,_n),Bn,or,dr;return Sn<ee.Ib?null:(Sn=1/Sn,Ee*=Sn,Zt*=Sn,_n*=Sn,Bn=Math.sin(be),or=Math.cos(be),dr=1-or,B[0]=Ee*Ee*dr+or,B[1]=Zt*Ee*dr+_n*Bn,B[2]=_n*Ee*dr-Zt*Bn,B[3]=0,B[4]=Ee*Zt*dr-_n*Bn,B[5]=Zt*Zt*dr+or,B[6]=_n*Zt*dr+Ee*Bn,B[7]=0,B[8]=Ee*_n*dr+Zt*Bn,B[9]=Zt*_n*dr-Ee*Bn,B[10]=_n*_n*dr+or,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B)}function Tt(B,be){var yt=Math.sin(be),Ee=Math.cos(be);return B[0]=1,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=Ee,B[6]=yt,B[7]=0,B[8]=0,B[9]=-yt,B[10]=Ee,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}function Ze(B,be){var yt=Math.sin(be),Ee=Math.cos(be);return B[0]=Ee,B[1]=0,B[2]=-yt,B[3]=0,B[4]=0,B[5]=1,B[6]=0,B[7]=0,B[8]=yt,B[9]=0,B[10]=Ee,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}function Ie(B,be){var yt=Math.sin(be),Ee=Math.cos(be);return B[0]=Ee,B[1]=yt,B[2]=0,B[3]=0,B[4]=-yt,B[5]=Ee,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=1,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}function Qe(B,be,yt){var Ee=be[0],Zt=be[1],_n=be[2],Sn=be[3],Bn=Ee+Ee,or=Zt+Zt,dr=_n+_n,gr=Ee*Bn,wr=Ee*or,Ar=Ee*dr,Ir=Zt*or,Nr=Zt*dr,Yr=_n*dr,bt=Sn*Bn,ve=Sn*or,ye=Sn*dr;return B[0]=1-(Ir+Yr),B[1]=wr+ye,B[2]=Ar-ve,B[3]=0,B[4]=wr-ye,B[5]=1-(gr+Yr),B[6]=Nr+bt,B[7]=0,B[8]=Ar+ve,B[9]=Nr-bt,B[10]=1-(gr+Ir),B[11]=0,B[12]=yt[0],B[13]=yt[1],B[14]=yt[2],B[15]=1,B}function it(B,be){var yt=new ee.WT(3),Ee=-be[0],Zt=-be[1],_n=-be[2],Sn=be[3],Bn=be[4],or=be[5],dr=be[6],gr=be[7],wr=Ee*Ee+Zt*Zt+_n*_n+Sn*Sn;return wr>0?(yt[0]=(Bn*Sn+gr*Ee+or*_n-dr*Zt)*2/wr,yt[1]=(or*Sn+gr*Zt+dr*Ee-Bn*_n)*2/wr,yt[2]=(dr*Sn+gr*_n+Bn*Zt-or*Ee)*2/wr):(yt[0]=(Bn*Sn+gr*Ee+or*_n-dr*Zt)*2,yt[1]=(or*Sn+gr*Zt+dr*Ee-Bn*_n)*2,yt[2]=(dr*Sn+gr*_n+Bn*Zt-or*Ee)*2),Qe(B,be,yt),B}function De(B,be){return B[0]=be[12],B[1]=be[13],B[2]=be[14],B}function cn(B,be){var yt=be[0],Ee=be[1],Zt=be[2],_n=be[4],Sn=be[5],Bn=be[6],or=be[8],dr=be[9],gr=be[10];return B[0]=Math.hypot(yt,Ee,Zt),B[1]=Math.hypot(_n,Sn,Bn),B[2]=Math.hypot(or,dr,gr),B}function qe(B,be){var yt=new ee.WT(3);cn(yt,be);var Ee=1/yt[0],Zt=1/yt[1],_n=1/yt[2],Sn=be[0]*Ee,Bn=be[1]*Zt,or=be[2]*_n,dr=be[4]*Ee,gr=be[5]*Zt,wr=be[6]*_n,Ar=be[8]*Ee,Ir=be[9]*Zt,Nr=be[10]*_n,Yr=Sn+gr+Nr,bt=0;return Yr>0?(bt=Math.sqrt(Yr+1)*2,B[3]=.25*bt,B[0]=(wr-Ir)/bt,B[1]=(Ar-or)/bt,B[2]=(Bn-dr)/bt):Sn>gr&&Sn>Nr?(bt=Math.sqrt(1+Sn-gr-Nr)*2,B[3]=(wr-Ir)/bt,B[0]=.25*bt,B[1]=(Bn+dr)/bt,B[2]=(Ar+or)/bt):gr>Nr?(bt=Math.sqrt(1+gr-Sn-Nr)*2,B[3]=(Ar-or)/bt,B[0]=(Bn+dr)/bt,B[1]=.25*bt,B[2]=(wr+Ir)/bt):(bt=Math.sqrt(1+Nr-Sn-gr)*2,B[3]=(Bn-dr)/bt,B[0]=(Ar+or)/bt,B[1]=(wr+Ir)/bt,B[2]=.25*bt),B}function Pt(B,be,yt,Ee){var Zt=be[0],_n=be[1],Sn=be[2],Bn=be[3],or=Zt+Zt,dr=_n+_n,gr=Sn+Sn,wr=Zt*or,Ar=Zt*dr,Ir=Zt*gr,Nr=_n*dr,Yr=_n*gr,bt=Sn*gr,ve=Bn*or,ye=Bn*dr,Ke=Bn*gr,ht=Ee[0],xt=Ee[1],Jt=Ee[2];return B[0]=(1-(Nr+bt))*ht,B[1]=(Ar+Ke)*ht,B[2]=(Ir-ye)*ht,B[3]=0,B[4]=(Ar-Ke)*xt,B[5]=(1-(wr+bt))*xt,B[6]=(Yr+ve)*xt,B[7]=0,B[8]=(Ir+ye)*Jt,B[9]=(Yr-ve)*Jt,B[10]=(1-(wr+Nr))*Jt,B[11]=0,B[12]=yt[0],B[13]=yt[1],B[14]=yt[2],B[15]=1,B}function Le(B,be,yt,Ee,Zt){var _n=be[0],Sn=be[1],Bn=be[2],or=be[3],dr=_n+_n,gr=Sn+Sn,wr=Bn+Bn,Ar=_n*dr,Ir=_n*gr,Nr=_n*wr,Yr=Sn*gr,bt=Sn*wr,ve=Bn*wr,ye=or*dr,Ke=or*gr,ht=or*wr,xt=Ee[0],Jt=Ee[1],Dn=Ee[2],fr=Zt[0],In=Zt[1],ke=Zt[2],Pe=(1-(Yr+ve))*xt,Ge=(Ir+ht)*xt,gt=(Nr-Ke)*xt,Bt=(Ir-ht)*Jt,an=(1-(Ar+ve))*Jt,An=(bt+ye)*Jt,kt=(Nr+Ke)*Dn,Dt=(bt-ye)*Dn,dn=(1-(Ar+Yr))*Dn;return B[0]=Pe,B[1]=Ge,B[2]=gt,B[3]=0,B[4]=Bt,B[5]=an,B[6]=An,B[7]=0,B[8]=kt,B[9]=Dt,B[10]=dn,B[11]=0,B[12]=yt[0]+fr-(Pe*fr+Bt*In+kt*ke),B[13]=yt[1]+In-(Ge*fr+an*In+Dt*ke),B[14]=yt[2]+ke-(gt*fr+An*In+dn*ke),B[15]=1,B}function pt(B,be){var yt=be[0],Ee=be[1],Zt=be[2],_n=be[3],Sn=yt+yt,Bn=Ee+Ee,or=Zt+Zt,dr=yt*Sn,gr=Ee*Sn,wr=Ee*Bn,Ar=Zt*Sn,Ir=Zt*Bn,Nr=Zt*or,Yr=_n*Sn,bt=_n*Bn,ve=_n*or;return B[0]=1-wr-Nr,B[1]=gr+ve,B[2]=Ar-bt,B[3]=0,B[4]=gr-ve,B[5]=1-dr-Nr,B[6]=Ir+Yr,B[7]=0,B[8]=Ar+bt,B[9]=Ir-Yr,B[10]=1-dr-wr,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}function at(B,be,yt,Ee,Zt,_n,Sn){var Bn=1/(yt-be),or=1/(Zt-Ee),dr=1/(_n-Sn);return B[0]=_n*2*Bn,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=_n*2*or,B[6]=0,B[7]=0,B[8]=(yt+be)*Bn,B[9]=(Zt+Ee)*or,B[10]=(Sn+_n)*dr,B[11]=-1,B[12]=0,B[13]=0,B[14]=Sn*_n*2*dr,B[15]=0,B}function nt(B,be,yt,Ee,Zt){var _n=1/Math.tan(be/2),Sn;return B[0]=_n/yt,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=_n,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[11]=-1,B[12]=0,B[13]=0,B[15]=0,Zt!=null&&Zt!==1/0?(Sn=1/(Ee-Zt),B[10]=(Zt+Ee)*Sn,B[14]=2*Zt*Ee*Sn):(B[10]=-1,B[14]=-2*Ee),B}var Ct=nt;function rt(B,be,yt,Ee,Zt){var _n=1/Math.tan(be/2),Sn;return B[0]=_n/yt,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=_n,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[11]=-1,B[12]=0,B[13]=0,B[15]=0,Zt!=null&&Zt!==1/0?(Sn=1/(Ee-Zt),B[10]=Zt*Sn,B[14]=Zt*Ee*Sn):(B[10]=-1,B[14]=-Ee),B}function vt(B,be,yt,Ee){var Zt=Math.tan(be.upDegrees*Math.PI/180),_n=Math.tan(be.downDegrees*Math.PI/180),Sn=Math.tan(be.leftDegrees*Math.PI/180),Bn=Math.tan(be.rightDegrees*Math.PI/180),or=2/(Sn+Bn),dr=2/(Zt+_n);return B[0]=or,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=dr,B[6]=0,B[7]=0,B[8]=-((Sn-Bn)*or*.5),B[9]=(Zt-_n)*dr*.5,B[10]=Ee/(yt-Ee),B[11]=-1,B[12]=0,B[13]=0,B[14]=Ee*yt/(yt-Ee),B[15]=0,B}function Ve(B,be,yt,Ee,Zt,_n,Sn){var Bn=1/(be-yt),or=1/(Ee-Zt),dr=1/(_n-Sn);return B[0]=-2*Bn,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=-2*or,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=2*dr,B[11]=0,B[12]=(be+yt)*Bn,B[13]=(Zt+Ee)*or,B[14]=(Sn+_n)*dr,B[15]=1,B}var hn=Ve;function yn(B,be,yt,Ee,Zt,_n,Sn){var Bn=1/(be-yt),or=1/(Ee-Zt),dr=1/(_n-Sn);return B[0]=-2*Bn,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=-2*or,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=dr,B[11]=0,B[12]=(be+yt)*Bn,B[13]=(Zt+Ee)*or,B[14]=_n*dr,B[15]=1,B}function ir(B,be,yt,Ee){var Zt,_n,Sn,Bn,or,dr,gr,wr,Ar,Ir,Nr=be[0],Yr=be[1],bt=be[2],ve=Ee[0],ye=Ee[1],Ke=Ee[2],ht=yt[0],xt=yt[1],Jt=yt[2];return Math.abs(Nr-ht)<ee.Ib&&Math.abs(Yr-xt)<ee.Ib&&Math.abs(bt-Jt)<ee.Ib?pe(B):(gr=Nr-ht,wr=Yr-xt,Ar=bt-Jt,Ir=1/Math.hypot(gr,wr,Ar),gr*=Ir,wr*=Ir,Ar*=Ir,Zt=ye*Ar-Ke*wr,_n=Ke*gr-ve*Ar,Sn=ve*wr-ye*gr,Ir=Math.hypot(Zt,_n,Sn),Ir?(Ir=1/Ir,Zt*=Ir,_n*=Ir,Sn*=Ir):(Zt=0,_n=0,Sn=0),Bn=wr*Sn-Ar*_n,or=Ar*Zt-gr*Sn,dr=gr*_n-wr*Zt,Ir=Math.hypot(Bn,or,dr),Ir?(Ir=1/Ir,Bn*=Ir,or*=Ir,dr*=Ir):(Bn=0,or=0,dr=0),B[0]=Zt,B[1]=Bn,B[2]=gr,B[3]=0,B[4]=_n,B[5]=or,B[6]=wr,B[7]=0,B[8]=Sn,B[9]=dr,B[10]=Ar,B[11]=0,B[12]=-(Zt*Nr+_n*Yr+Sn*bt),B[13]=-(Bn*Nr+or*Yr+dr*bt),B[14]=-(gr*Nr+wr*Yr+Ar*bt),B[15]=1,B)}function Qn(B,be,yt,Ee){var Zt=be[0],_n=be[1],Sn=be[2],Bn=Ee[0],or=Ee[1],dr=Ee[2],gr=Zt-yt[0],wr=_n-yt[1],Ar=Sn-yt[2],Ir=gr*gr+wr*wr+Ar*Ar;Ir>0&&(Ir=1/Math.sqrt(Ir),gr*=Ir,wr*=Ir,Ar*=Ir);var Nr=or*Ar-dr*wr,Yr=dr*gr-Bn*Ar,bt=Bn*wr-or*gr;return Ir=Nr*Nr+Yr*Yr+bt*bt,Ir>0&&(Ir=1/Math.sqrt(Ir),Nr*=Ir,Yr*=Ir,bt*=Ir),B[0]=Nr,B[1]=Yr,B[2]=bt,B[3]=0,B[4]=wr*bt-Ar*Yr,B[5]=Ar*Nr-gr*bt,B[6]=gr*Yr-wr*Nr,B[7]=0,B[8]=gr,B[9]=wr,B[10]=Ar,B[11]=0,B[12]=Zt,B[13]=_n,B[14]=Sn,B[15]=1,B}function Ut(B){return"mat4("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+", "+B[6]+", "+B[7]+", "+B[8]+", "+B[9]+", "+B[10]+", "+B[11]+", "+B[12]+", "+B[13]+", "+B[14]+", "+B[15]+")"}function En(B){return Math.hypot(B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],B[8],B[9],B[10],B[11],B[12],B[13],B[14],B[15])}function Tn(B,be,yt){return B[0]=be[0]+yt[0],B[1]=be[1]+yt[1],B[2]=be[2]+yt[2],B[3]=be[3]+yt[3],B[4]=be[4]+yt[4],B[5]=be[5]+yt[5],B[6]=be[6]+yt[6],B[7]=be[7]+yt[7],B[8]=be[8]+yt[8],B[9]=be[9]+yt[9],B[10]=be[10]+yt[10],B[11]=be[11]+yt[11],B[12]=be[12]+yt[12],B[13]=be[13]+yt[13],B[14]=be[14]+yt[14],B[15]=be[15]+yt[15],B}function lr(B,be,yt){return B[0]=be[0]-yt[0],B[1]=be[1]-yt[1],B[2]=be[2]-yt[2],B[3]=be[3]-yt[3],B[4]=be[4]-yt[4],B[5]=be[5]-yt[5],B[6]=be[6]-yt[6],B[7]=be[7]-yt[7],B[8]=be[8]-yt[8],B[9]=be[9]-yt[9],B[10]=be[10]-yt[10],B[11]=be[11]-yt[11],B[12]=be[12]-yt[12],B[13]=be[13]-yt[13],B[14]=be[14]-yt[14],B[15]=be[15]-yt[15],B}function ln(B,be,yt){return B[0]=be[0]*yt,B[1]=be[1]*yt,B[2]=be[2]*yt,B[3]=be[3]*yt,B[4]=be[4]*yt,B[5]=be[5]*yt,B[6]=be[6]*yt,B[7]=be[7]*yt,B[8]=be[8]*yt,B[9]=be[9]*yt,B[10]=be[10]*yt,B[11]=be[11]*yt,B[12]=be[12]*yt,B[13]=be[13]*yt,B[14]=be[14]*yt,B[15]=be[15]*yt,B}function Lt(B,be,yt,Ee){return B[0]=be[0]+yt[0]*Ee,B[1]=be[1]+yt[1]*Ee,B[2]=be[2]+yt[2]*Ee,B[3]=be[3]+yt[3]*Ee,B[4]=be[4]+yt[4]*Ee,B[5]=be[5]+yt[5]*Ee,B[6]=be[6]+yt[6]*Ee,B[7]=be[7]+yt[7]*Ee,B[8]=be[8]+yt[8]*Ee,B[9]=be[9]+yt[9]*Ee,B[10]=be[10]+yt[10]*Ee,B[11]=be[11]+yt[11]*Ee,B[12]=be[12]+yt[12]*Ee,B[13]=be[13]+yt[13]*Ee,B[14]=be[14]+yt[14]*Ee,B[15]=be[15]+yt[15]*Ee,B}function bn(B,be){return B[0]===be[0]&&B[1]===be[1]&&B[2]===be[2]&&B[3]===be[3]&&B[4]===be[4]&&B[5]===be[5]&&B[6]===be[6]&&B[7]===be[7]&&B[8]===be[8]&&B[9]===be[9]&&B[10]===be[10]&&B[11]===be[11]&&B[12]===be[12]&&B[13]===be[13]&&B[14]===be[14]&&B[15]===be[15]}function Xe(B,be){var yt=B[0],Ee=B[1],Zt=B[2],_n=B[3],Sn=B[4],Bn=B[5],or=B[6],dr=B[7],gr=B[8],wr=B[9],Ar=B[10],Ir=B[11],Nr=B[12],Yr=B[13],bt=B[14],ve=B[15],ye=be[0],Ke=be[1],ht=be[2],xt=be[3],Jt=be[4],Dn=be[5],fr=be[6],In=be[7],ke=be[8],Pe=be[9],Ge=be[10],gt=be[11],Bt=be[12],an=be[13],An=be[14],kt=be[15];return Math.abs(yt-ye)<=ee.Ib*Math.max(1,Math.abs(yt),Math.abs(ye))&&Math.abs(Ee-Ke)<=ee.Ib*Math.max(1,Math.abs(Ee),Math.abs(Ke))&&Math.abs(Zt-ht)<=ee.Ib*Math.max(1,Math.abs(Zt),Math.abs(ht))&&Math.abs(_n-xt)<=ee.Ib*Math.max(1,Math.abs(_n),Math.abs(xt))&&Math.abs(Sn-Jt)<=ee.Ib*Math.max(1,Math.abs(Sn),Math.abs(Jt))&&Math.abs(Bn-Dn)<=ee.Ib*Math.max(1,Math.abs(Bn),Math.abs(Dn))&&Math.abs(or-fr)<=ee.Ib*Math.max(1,Math.abs(or),Math.abs(fr))&&Math.abs(dr-In)<=ee.Ib*Math.max(1,Math.abs(dr),Math.abs(In))&&Math.abs(gr-ke)<=ee.Ib*Math.max(1,Math.abs(gr),Math.abs(ke))&&Math.abs(wr-Pe)<=ee.Ib*Math.max(1,Math.abs(wr),Math.abs(Pe))&&Math.abs(Ar-Ge)<=ee.Ib*Math.max(1,Math.abs(Ar),Math.abs(Ge))&&Math.abs(Ir-gt)<=ee.Ib*Math.max(1,Math.abs(Ir),Math.abs(gt))&&Math.abs(Nr-Bt)<=ee.Ib*Math.max(1,Math.abs(Nr),Math.abs(Bt))&&Math.abs(Yr-an)<=ee.Ib*Math.max(1,Math.abs(Yr),Math.abs(an))&&Math.abs(bt-An)<=ee.Ib*Math.max(1,Math.abs(bt),Math.abs(An))&&Math.abs(ve-kt)<=ee.Ib*Math.max(1,Math.abs(ve),Math.abs(kt))}var Fe=Se,on=lr},31437:function(It,G,D){"use strict";D.d(G,{$X:function(){return Ce},AK:function(){return Qe},Fv:function(){return Ie},I6:function(){return vt},IH:function(){return pe},JG:function(){return Q},Ue:function(){return ae},al:function(){return ne},lu:function(){return yn},t7:function(){return De},t8:function(){return ge},tk:function(){return Tt}});var ee=D(49685);function ae(){var ln=new ee.WT(2);return ee.WT!=Float32Array&&(ln[0]=0,ln[1]=0),ln}function T(ln){var Lt=new glMatrix.ARRAY_TYPE(2);return Lt[0]=ln[0],Lt[1]=ln[1],Lt}function ne(ln,Lt){var bn=new ee.WT(2);return bn[0]=ln,bn[1]=Lt,bn}function Q(ln,Lt){return ln[0]=Lt[0],ln[1]=Lt[1],ln}function ge(ln,Lt,bn){return ln[0]=Lt,ln[1]=bn,ln}function pe(ln,Lt,bn){return ln[0]=Lt[0]+bn[0],ln[1]=Lt[1]+bn[1],ln}function Ce(ln,Lt,bn){return ln[0]=Lt[0]-bn[0],ln[1]=Lt[1]-bn[1],ln}function he(ln,Lt,bn){return ln[0]=Lt[0]*bn[0],ln[1]=Lt[1]*bn[1],ln}function st(ln,Lt,bn){return ln[0]=Lt[0]/bn[0],ln[1]=Lt[1]/bn[1],ln}function re(ln,Lt){return ln[0]=Math.ceil(Lt[0]),ln[1]=Math.ceil(Lt[1]),ln}function Se(ln,Lt){return ln[0]=Math.floor(Lt[0]),ln[1]=Math.floor(Lt[1]),ln}function se(ln,Lt,bn){return ln[0]=Math.min(Lt[0],bn[0]),ln[1]=Math.min(Lt[1],bn[1]),ln}function de(ln,Lt,bn){return ln[0]=Math.max(Lt[0],bn[0]),ln[1]=Math.max(Lt[1],bn[1]),ln}function xe(ln,Lt){return ln[0]=Math.round(Lt[0]),ln[1]=Math.round(Lt[1]),ln}function le(ln,Lt,bn){return ln[0]=Lt[0]*bn,ln[1]=Lt[1]*bn,ln}function Ue(ln,Lt,bn,Xe){return ln[0]=Lt[0]+bn[0]*Xe,ln[1]=Lt[1]+bn[1]*Xe,ln}function Et(ln,Lt){var bn=Lt[0]-ln[0],Xe=Lt[1]-ln[1];return Math.hypot(bn,Xe)}function mt(ln,Lt){var bn=Lt[0]-ln[0],Xe=Lt[1]-ln[1];return bn*bn+Xe*Xe}function Wt(ln){var Lt=ln[0],bn=ln[1];return Math.hypot(Lt,bn)}function Rt(ln){var Lt=ln[0],bn=ln[1];return Lt*Lt+bn*bn}function Tt(ln,Lt){return ln[0]=-Lt[0],ln[1]=-Lt[1],ln}function Ze(ln,Lt){return ln[0]=1/Lt[0],ln[1]=1/Lt[1],ln}function Ie(ln,Lt){var bn=Lt[0],Xe=Lt[1],Fe=bn*bn+Xe*Xe;return Fe>0&&(Fe=1/Math.sqrt(Fe)),ln[0]=Lt[0]*Fe,ln[1]=Lt[1]*Fe,ln}function Qe(ln,Lt){return ln[0]*Lt[0]+ln[1]*Lt[1]}function it(ln,Lt,bn){var Xe=Lt[0]*bn[1]-Lt[1]*bn[0];return ln[0]=ln[1]=0,ln[2]=Xe,ln}function De(ln,Lt,bn,Xe){var Fe=Lt[0],on=Lt[1];return ln[0]=Fe+Xe*(bn[0]-Fe),ln[1]=on+Xe*(bn[1]-on),ln}function cn(ln,Lt){Lt=Lt||1;var bn=glMatrix.RANDOM()*2*Math.PI;return ln[0]=Math.cos(bn)*Lt,ln[1]=Math.sin(bn)*Lt,ln}function qe(ln,Lt,bn){var Xe=Lt[0],Fe=Lt[1];return ln[0]=bn[0]*Xe+bn[2]*Fe,ln[1]=bn[1]*Xe+bn[3]*Fe,ln}function Pt(ln,Lt,bn){var Xe=Lt[0],Fe=Lt[1];return ln[0]=bn[0]*Xe+bn[2]*Fe+bn[4],ln[1]=bn[1]*Xe+bn[3]*Fe+bn[5],ln}function Le(ln,Lt,bn){var Xe=Lt[0],Fe=Lt[1];return ln[0]=bn[0]*Xe+bn[3]*Fe+bn[6],ln[1]=bn[1]*Xe+bn[4]*Fe+bn[7],ln}function pt(ln,Lt,bn){var Xe=Lt[0],Fe=Lt[1];return ln[0]=bn[0]*Xe+bn[4]*Fe+bn[12],ln[1]=bn[1]*Xe+bn[5]*Fe+bn[13],ln}function at(ln,Lt,bn,Xe){var Fe=Lt[0]-bn[0],on=Lt[1]-bn[1],B=Math.sin(Xe),be=Math.cos(Xe);return ln[0]=Fe*be-on*B+bn[0],ln[1]=Fe*B+on*be+bn[1],ln}function nt(ln,Lt){var bn=ln[0],Xe=ln[1],Fe=Lt[0],on=Lt[1],B=Math.sqrt(bn*bn+Xe*Xe)*Math.sqrt(Fe*Fe+on*on),be=B&&(bn*Fe+Xe*on)/B;return Math.acos(Math.min(Math.max(be,-1),1))}function Ct(ln){return ln[0]=0,ln[1]=0,ln}function rt(ln){return"vec2("+ln[0]+", "+ln[1]+")"}function vt(ln,Lt){return ln[0]===Lt[0]&&ln[1]===Lt[1]}function Ve(ln,Lt){var bn=ln[0],Xe=ln[1],Fe=Lt[0],on=Lt[1];return Math.abs(bn-Fe)<=glMatrix.EPSILON*Math.max(1,Math.abs(bn),Math.abs(Fe))&&Math.abs(Xe-on)<=glMatrix.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(on))}var hn=null,yn=Ce,ir=null,Qn=null,Ut=null,En=null,Tn=null,lr=function(){var ln=ae();return function(Lt,bn,Xe,Fe,on,B){var be,yt;for(bn||(bn=2),Xe||(Xe=0),Fe?yt=Math.min(Fe*bn+Xe,Lt.length):yt=Lt.length,be=Xe;be<yt;be+=bn)ln[0]=Lt[be],ln[1]=Lt[be+1],on(ln,ln,B),Lt[be]=ln[0],Lt[be+1]=ln[1];return Lt}}()},77160:function(It,G,D){"use strict";D.r(G),D.d(G,{add:function(){return Ce},angle:function(){return vt},bezier:function(){return qe},ceil:function(){return Se},clone:function(){return T},copy:function(){return ge},create:function(){return ae},cross:function(){return it},dist:function(){return Tn},distance:function(){return mt},div:function(){return En},divide:function(){return re},dot:function(){return Qe},equals:function(){return ir},exactEquals:function(){return yn},floor:function(){return se},forEach:function(){return bn},fromValues:function(){return Q},hermite:function(){return cn},inverse:function(){return Ze},len:function(){return ln},length:function(){return ne},lerp:function(){return De},max:function(){return xe},min:function(){return de},mul:function(){return Ut},multiply:function(){return st},negate:function(){return Tt},normalize:function(){return Ie},random:function(){return Pt},rotateX:function(){return nt},rotateY:function(){return Ct},rotateZ:function(){return rt},round:function(){return le},scale:function(){return Ue},scaleAndAdd:function(){return Et},set:function(){return pe},sqrDist:function(){return lr},sqrLen:function(){return Lt},squaredDistance:function(){return Wt},squaredLength:function(){return Rt},str:function(){return hn},sub:function(){return Qn},subtract:function(){return he},transformMat3:function(){return pt},transformMat4:function(){return Le},transformQuat:function(){return at},zero:function(){return Ve}});var ee=D(49685);function ae(){var Xe=new ee.WT(3);return ee.WT!=Float32Array&&(Xe[0]=0,Xe[1]=0,Xe[2]=0),Xe}function T(Xe){var Fe=new ee.WT(3);return Fe[0]=Xe[0],Fe[1]=Xe[1],Fe[2]=Xe[2],Fe}function ne(Xe){var Fe=Xe[0],on=Xe[1],B=Xe[2];return Math.hypot(Fe,on,B)}function Q(Xe,Fe,on){var B=new ee.WT(3);return B[0]=Xe,B[1]=Fe,B[2]=on,B}function ge(Xe,Fe){return Xe[0]=Fe[0],Xe[1]=Fe[1],Xe[2]=Fe[2],Xe}function pe(Xe,Fe,on,B){return Xe[0]=Fe,Xe[1]=on,Xe[2]=B,Xe}function Ce(Xe,Fe,on){return Xe[0]=Fe[0]+on[0],Xe[1]=Fe[1]+on[1],Xe[2]=Fe[2]+on[2],Xe}function he(Xe,Fe,on){return Xe[0]=Fe[0]-on[0],Xe[1]=Fe[1]-on[1],Xe[2]=Fe[2]-on[2],Xe}function st(Xe,Fe,on){return Xe[0]=Fe[0]*on[0],Xe[1]=Fe[1]*on[1],Xe[2]=Fe[2]*on[2],Xe}function re(Xe,Fe,on){return Xe[0]=Fe[0]/on[0],Xe[1]=Fe[1]/on[1],Xe[2]=Fe[2]/on[2],Xe}function Se(Xe,Fe){return Xe[0]=Math.ceil(Fe[0]),Xe[1]=Math.ceil(Fe[1]),Xe[2]=Math.ceil(Fe[2]),Xe}function se(Xe,Fe){return Xe[0]=Math.floor(Fe[0]),Xe[1]=Math.floor(Fe[1]),Xe[2]=Math.floor(Fe[2]),Xe}function de(Xe,Fe,on){return Xe[0]=Math.min(Fe[0],on[0]),Xe[1]=Math.min(Fe[1],on[1]),Xe[2]=Math.min(Fe[2],on[2]),Xe}function xe(Xe,Fe,on){return Xe[0]=Math.max(Fe[0],on[0]),Xe[1]=Math.max(Fe[1],on[1]),Xe[2]=Math.max(Fe[2],on[2]),Xe}function le(Xe,Fe){return Xe[0]=Math.round(Fe[0]),Xe[1]=Math.round(Fe[1]),Xe[2]=Math.round(Fe[2]),Xe}function Ue(Xe,Fe,on){return Xe[0]=Fe[0]*on,Xe[1]=Fe[1]*on,Xe[2]=Fe[2]*on,Xe}function Et(Xe,Fe,on,B){return Xe[0]=Fe[0]+on[0]*B,Xe[1]=Fe[1]+on[1]*B,Xe[2]=Fe[2]+on[2]*B,Xe}function mt(Xe,Fe){var on=Fe[0]-Xe[0],B=Fe[1]-Xe[1],be=Fe[2]-Xe[2];return Math.hypot(on,B,be)}function Wt(Xe,Fe){var on=Fe[0]-Xe[0],B=Fe[1]-Xe[1],be=Fe[2]-Xe[2];return on*on+B*B+be*be}function Rt(Xe){var Fe=Xe[0],on=Xe[1],B=Xe[2];return Fe*Fe+on*on+B*B}function Tt(Xe,Fe){return Xe[0]=-Fe[0],Xe[1]=-Fe[1],Xe[2]=-Fe[2],Xe}function Ze(Xe,Fe){return Xe[0]=1/Fe[0],Xe[1]=1/Fe[1],Xe[2]=1/Fe[2],Xe}function Ie(Xe,Fe){var on=Fe[0],B=Fe[1],be=Fe[2],yt=on*on+B*B+be*be;return yt>0&&(yt=1/Math.sqrt(yt)),Xe[0]=Fe[0]*yt,Xe[1]=Fe[1]*yt,Xe[2]=Fe[2]*yt,Xe}function Qe(Xe,Fe){return Xe[0]*Fe[0]+Xe[1]*Fe[1]+Xe[2]*Fe[2]}function it(Xe,Fe,on){var B=Fe[0],be=Fe[1],yt=Fe[2],Ee=on[0],Zt=on[1],_n=on[2];return Xe[0]=be*_n-yt*Zt,Xe[1]=yt*Ee-B*_n,Xe[2]=B*Zt-be*Ee,Xe}function De(Xe,Fe,on,B){var be=Fe[0],yt=Fe[1],Ee=Fe[2];return Xe[0]=be+B*(on[0]-be),Xe[1]=yt+B*(on[1]-yt),Xe[2]=Ee+B*(on[2]-Ee),Xe}function cn(Xe,Fe,on,B,be,yt){var Ee=yt*yt,Zt=Ee*(2*yt-3)+1,_n=Ee*(yt-2)+yt,Sn=Ee*(yt-1),Bn=Ee*(3-2*yt);return Xe[0]=Fe[0]*Zt+on[0]*_n+B[0]*Sn+be[0]*Bn,Xe[1]=Fe[1]*Zt+on[1]*_n+B[1]*Sn+be[1]*Bn,Xe[2]=Fe[2]*Zt+on[2]*_n+B[2]*Sn+be[2]*Bn,Xe}function qe(Xe,Fe,on,B,be,yt){var Ee=1-yt,Zt=Ee*Ee,_n=yt*yt,Sn=Zt*Ee,Bn=3*yt*Zt,or=3*_n*Ee,dr=_n*yt;return Xe[0]=Fe[0]*Sn+on[0]*Bn+B[0]*or+be[0]*dr,Xe[1]=Fe[1]*Sn+on[1]*Bn+B[1]*or+be[1]*dr,Xe[2]=Fe[2]*Sn+on[2]*Bn+B[2]*or+be[2]*dr,Xe}function Pt(Xe,Fe){Fe=Fe||1;var on=ee.FD()*2*Math.PI,B=ee.FD()*2-1,be=Math.sqrt(1-B*B)*Fe;return Xe[0]=Math.cos(on)*be,Xe[1]=Math.sin(on)*be,Xe[2]=B*Fe,Xe}function Le(Xe,Fe,on){var B=Fe[0],be=Fe[1],yt=Fe[2],Ee=on[3]*B+on[7]*be+on[11]*yt+on[15];return Ee=Ee||1,Xe[0]=(on[0]*B+on[4]*be+on[8]*yt+on[12])/Ee,Xe[1]=(on[1]*B+on[5]*be+on[9]*yt+on[13])/Ee,Xe[2]=(on[2]*B+on[6]*be+on[10]*yt+on[14])/Ee,Xe}function pt(Xe,Fe,on){var B=Fe[0],be=Fe[1],yt=Fe[2];return Xe[0]=B*on[0]+be*on[3]+yt*on[6],Xe[1]=B*on[1]+be*on[4]+yt*on[7],Xe[2]=B*on[2]+be*on[5]+yt*on[8],Xe}function at(Xe,Fe,on){var B=on[0],be=on[1],yt=on[2],Ee=on[3],Zt=Fe[0],_n=Fe[1],Sn=Fe[2],Bn=be*Sn-yt*_n,or=yt*Zt-B*Sn,dr=B*_n-be*Zt,gr=be*dr-yt*or,wr=yt*Bn-B*dr,Ar=B*or-be*Bn,Ir=Ee*2;return Bn*=Ir,or*=Ir,dr*=Ir,gr*=2,wr*=2,Ar*=2,Xe[0]=Zt+Bn+gr,Xe[1]=_n+or+wr,Xe[2]=Sn+dr+Ar,Xe}function nt(Xe,Fe,on,B){var be=[],yt=[];return be[0]=Fe[0]-on[0],be[1]=Fe[1]-on[1],be[2]=Fe[2]-on[2],yt[0]=be[0],yt[1]=be[1]*Math.cos(B)-be[2]*Math.sin(B),yt[2]=be[1]*Math.sin(B)+be[2]*Math.cos(B),Xe[0]=yt[0]+on[0],Xe[1]=yt[1]+on[1],Xe[2]=yt[2]+on[2],Xe}function Ct(Xe,Fe,on,B){var be=[],yt=[];return be[0]=Fe[0]-on[0],be[1]=Fe[1]-on[1],be[2]=Fe[2]-on[2],yt[0]=be[2]*Math.sin(B)+be[0]*Math.cos(B),yt[1]=be[1],yt[2]=be[2]*Math.cos(B)-be[0]*Math.sin(B),Xe[0]=yt[0]+on[0],Xe[1]=yt[1]+on[1],Xe[2]=yt[2]+on[2],Xe}function rt(Xe,Fe,on,B){var be=[],yt=[];return be[0]=Fe[0]-on[0],be[1]=Fe[1]-on[1],be[2]=Fe[2]-on[2],yt[0]=be[0]*Math.cos(B)-be[1]*Math.sin(B),yt[1]=be[0]*Math.sin(B)+be[1]*Math.cos(B),yt[2]=be[2],Xe[0]=yt[0]+on[0],Xe[1]=yt[1]+on[1],Xe[2]=yt[2]+on[2],Xe}function vt(Xe,Fe){var on=Xe[0],B=Xe[1],be=Xe[2],yt=Fe[0],Ee=Fe[1],Zt=Fe[2],_n=Math.sqrt(on*on+B*B+be*be),Sn=Math.sqrt(yt*yt+Ee*Ee+Zt*Zt),Bn=_n*Sn,or=Bn&&Qe(Xe,Fe)/Bn;return Math.acos(Math.min(Math.max(or,-1),1))}function Ve(Xe){return Xe[0]=0,Xe[1]=0,Xe[2]=0,Xe}function hn(Xe){return"vec3("+Xe[0]+", "+Xe[1]+", "+Xe[2]+")"}function yn(Xe,Fe){return Xe[0]===Fe[0]&&Xe[1]===Fe[1]&&Xe[2]===Fe[2]}function ir(Xe,Fe){var on=Xe[0],B=Xe[1],be=Xe[2],yt=Fe[0],Ee=Fe[1],Zt=Fe[2];return Math.abs(on-yt)<=ee.Ib*Math.max(1,Math.abs(on),Math.abs(yt))&&Math.abs(B-Ee)<=ee.Ib*Math.max(1,Math.abs(B),Math.abs(Ee))&&Math.abs(be-Zt)<=ee.Ib*Math.max(1,Math.abs(be),Math.abs(Zt))}var Qn=he,Ut=st,En=re,Tn=mt,lr=Wt,ln=ne,Lt=Rt,bn=function(){var Xe=ae();return function(Fe,on,B,be,yt,Ee){var Zt,_n;for(on||(on=3),B||(B=0),be?_n=Math.min(be*on+B,Fe.length):_n=Fe.length,Zt=B;Zt<_n;Zt+=on)Xe[0]=Fe[Zt],Xe[1]=Fe[Zt+1],Xe[2]=Fe[Zt+2],yt(Xe,Xe,Ee),Fe[Zt]=Xe[0],Fe[Zt+1]=Xe[1],Fe[Zt+2]=Xe[2];return Fe}}()},98333:function(It,G,D){"use strict";D.d(G,{AK:function(){return Qe},Fv:function(){return Ie},I6:function(){return at},IH:function(){return pe},JG:function(){return Q},Ue:function(){return ae},al:function(){return ne},bA:function(){return le},d9:function(){return T},fF:function(){return qe},fS:function(){return nt},kE:function(){return Wt},t7:function(){return De},t8:function(){return ge},we:function(){return Rt}});var ee=D(49685);function ae(){var Ut=new ee.WT(4);return ee.WT!=Float32Array&&(Ut[0]=0,Ut[1]=0,Ut[2]=0,Ut[3]=0),Ut}function T(Ut){var En=new ee.WT(4);return En[0]=Ut[0],En[1]=Ut[1],En[2]=Ut[2],En[3]=Ut[3],En}function ne(Ut,En,Tn,lr){var ln=new ee.WT(4);return ln[0]=Ut,ln[1]=En,ln[2]=Tn,ln[3]=lr,ln}function Q(Ut,En){return Ut[0]=En[0],Ut[1]=En[1],Ut[2]=En[2],Ut[3]=En[3],Ut}function ge(Ut,En,Tn,lr,ln){return Ut[0]=En,Ut[1]=Tn,Ut[2]=lr,Ut[3]=ln,Ut}function pe(Ut,En,Tn){return Ut[0]=En[0]+Tn[0],Ut[1]=En[1]+Tn[1],Ut[2]=En[2]+Tn[2],Ut[3]=En[3]+Tn[3],Ut}function Ce(Ut,En,Tn){return Ut[0]=En[0]-Tn[0],Ut[1]=En[1]-Tn[1],Ut[2]=En[2]-Tn[2],Ut[3]=En[3]-Tn[3],Ut}function he(Ut,En,Tn){return Ut[0]=En[0]*Tn[0],Ut[1]=En[1]*Tn[1],Ut[2]=En[2]*Tn[2],Ut[3]=En[3]*Tn[3],Ut}function st(Ut,En,Tn){return Ut[0]=En[0]/Tn[0],Ut[1]=En[1]/Tn[1],Ut[2]=En[2]/Tn[2],Ut[3]=En[3]/Tn[3],Ut}function re(Ut,En){return Ut[0]=Math.ceil(En[0]),Ut[1]=Math.ceil(En[1]),Ut[2]=Math.ceil(En[2]),Ut[3]=Math.ceil(En[3]),Ut}function Se(Ut,En){return Ut[0]=Math.floor(En[0]),Ut[1]=Math.floor(En[1]),Ut[2]=Math.floor(En[2]),Ut[3]=Math.floor(En[3]),Ut}function se(Ut,En,Tn){return Ut[0]=Math.min(En[0],Tn[0]),Ut[1]=Math.min(En[1],Tn[1]),Ut[2]=Math.min(En[2],Tn[2]),Ut[3]=Math.min(En[3],Tn[3]),Ut}function de(Ut,En,Tn){return Ut[0]=Math.max(En[0],Tn[0]),Ut[1]=Math.max(En[1],Tn[1]),Ut[2]=Math.max(En[2],Tn[2]),Ut[3]=Math.max(En[3],Tn[3]),Ut}function xe(Ut,En){return Ut[0]=Math.round(En[0]),Ut[1]=Math.round(En[1]),Ut[2]=Math.round(En[2]),Ut[3]=Math.round(En[3]),Ut}function le(Ut,En,Tn){return Ut[0]=En[0]*Tn,Ut[1]=En[1]*Tn,Ut[2]=En[2]*Tn,Ut[3]=En[3]*Tn,Ut}function Ue(Ut,En,Tn,lr){return Ut[0]=En[0]+Tn[0]*lr,Ut[1]=En[1]+Tn[1]*lr,Ut[2]=En[2]+Tn[2]*lr,Ut[3]=En[3]+Tn[3]*lr,Ut}function Et(Ut,En){var Tn=En[0]-Ut[0],lr=En[1]-Ut[1],ln=En[2]-Ut[2],Lt=En[3]-Ut[3];return Math.hypot(Tn,lr,ln,Lt)}function mt(Ut,En){var Tn=En[0]-Ut[0],lr=En[1]-Ut[1],ln=En[2]-Ut[2],Lt=En[3]-Ut[3];return Tn*Tn+lr*lr+ln*ln+Lt*Lt}function Wt(Ut){var En=Ut[0],Tn=Ut[1],lr=Ut[2],ln=Ut[3];return Math.hypot(En,Tn,lr,ln)}function Rt(Ut){var En=Ut[0],Tn=Ut[1],lr=Ut[2],ln=Ut[3];return En*En+Tn*Tn+lr*lr+ln*ln}function Tt(Ut,En){return Ut[0]=-En[0],Ut[1]=-En[1],Ut[2]=-En[2],Ut[3]=-En[3],Ut}function Ze(Ut,En){return Ut[0]=1/En[0],Ut[1]=1/En[1],Ut[2]=1/En[2],Ut[3]=1/En[3],Ut}function Ie(Ut,En){var Tn=En[0],lr=En[1],ln=En[2],Lt=En[3],bn=Tn*Tn+lr*lr+ln*ln+Lt*Lt;return bn>0&&(bn=1/Math.sqrt(bn)),Ut[0]=Tn*bn,Ut[1]=lr*bn,Ut[2]=ln*bn,Ut[3]=Lt*bn,Ut}function Qe(Ut,En){return Ut[0]*En[0]+Ut[1]*En[1]+Ut[2]*En[2]+Ut[3]*En[3]}function it(Ut,En,Tn,lr){var ln=Tn[0]*lr[1]-Tn[1]*lr[0],Lt=Tn[0]*lr[2]-Tn[2]*lr[0],bn=Tn[0]*lr[3]-Tn[3]*lr[0],Xe=Tn[1]*lr[2]-Tn[2]*lr[1],Fe=Tn[1]*lr[3]-Tn[3]*lr[1],on=Tn[2]*lr[3]-Tn[3]*lr[2],B=En[0],be=En[1],yt=En[2],Ee=En[3];return Ut[0]=be*on-yt*Fe+Ee*Xe,Ut[1]=-(B*on)+yt*bn-Ee*Lt,Ut[2]=B*Fe-be*bn+Ee*ln,Ut[3]=-(B*Xe)+be*Lt-yt*ln,Ut}function De(Ut,En,Tn,lr){var ln=En[0],Lt=En[1],bn=En[2],Xe=En[3];return Ut[0]=ln+lr*(Tn[0]-ln),Ut[1]=Lt+lr*(Tn[1]-Lt),Ut[2]=bn+lr*(Tn[2]-bn),Ut[3]=Xe+lr*(Tn[3]-Xe),Ut}function cn(Ut,En){En=En||1;var Tn,lr,ln,Lt,bn,Xe;do Tn=glMatrix.RANDOM()*2-1,lr=glMatrix.RANDOM()*2-1,bn=Tn*Tn+lr*lr;while(bn>=1);do ln=glMatrix.RANDOM()*2-1,Lt=glMatrix.RANDOM()*2-1,Xe=ln*ln+Lt*Lt;while(Xe>=1);var Fe=Math.sqrt((1-bn)/Xe);return Ut[0]=En*Tn,Ut[1]=En*lr,Ut[2]=En*ln*Fe,Ut[3]=En*Lt*Fe,Ut}function qe(Ut,En,Tn){var lr=En[0],ln=En[1],Lt=En[2],bn=En[3];return Ut[0]=Tn[0]*lr+Tn[4]*ln+Tn[8]*Lt+Tn[12]*bn,Ut[1]=Tn[1]*lr+Tn[5]*ln+Tn[9]*Lt+Tn[13]*bn,Ut[2]=Tn[2]*lr+Tn[6]*ln+Tn[10]*Lt+Tn[14]*bn,Ut[3]=Tn[3]*lr+Tn[7]*ln+Tn[11]*Lt+Tn[15]*bn,Ut}function Pt(Ut,En,Tn){var lr=En[0],ln=En[1],Lt=En[2],bn=Tn[0],Xe=Tn[1],Fe=Tn[2],on=Tn[3],B=on*lr+Xe*Lt-Fe*ln,be=on*ln+Fe*lr-bn*Lt,yt=on*Lt+bn*ln-Xe*lr,Ee=-bn*lr-Xe*ln-Fe*Lt;return Ut[0]=B*on+Ee*-bn+be*-Fe-yt*-Xe,Ut[1]=be*on+Ee*-Xe+yt*-bn-B*-Fe,Ut[2]=yt*on+Ee*-Fe+B*-Xe-be*-bn,Ut[3]=En[3],Ut}function Le(Ut){return Ut[0]=0,Ut[1]=0,Ut[2]=0,Ut[3]=0,Ut}function pt(Ut){return"vec4("+Ut[0]+", "+Ut[1]+", "+Ut[2]+", "+Ut[3]+")"}function at(Ut,En){return Ut[0]===En[0]&&Ut[1]===En[1]&&Ut[2]===En[2]&&Ut[3]===En[3]}function nt(Ut,En){var Tn=Ut[0],lr=Ut[1],ln=Ut[2],Lt=Ut[3],bn=En[0],Xe=En[1],Fe=En[2],on=En[3];return Math.abs(Tn-bn)<=ee.Ib*Math.max(1,Math.abs(Tn),Math.abs(bn))&&Math.abs(lr-Xe)<=ee.Ib*Math.max(1,Math.abs(lr),Math.abs(Xe))&&Math.abs(ln-Fe)<=ee.Ib*Math.max(1,Math.abs(ln),Math.abs(Fe))&&Math.abs(Lt-on)<=ee.Ib*Math.max(1,Math.abs(Lt),Math.abs(on))}var Ct=null,rt=null,vt=null,Ve=null,hn=null,yn=null,ir=null,Qn=function(){var Ut=ae();return function(En,Tn,lr,ln,Lt,bn){var Xe,Fe;for(Tn||(Tn=4),lr||(lr=0),ln?Fe=Math.min(ln*Tn+lr,En.length):Fe=En.length,Xe=lr;Xe<Fe;Xe+=Tn)Ut[0]=En[Xe],Ut[1]=En[Xe+1],Ut[2]=En[Xe+2],Ut[3]=En[Xe+3],Lt(Ut,Ut,bn),En[Xe]=Ut[0],En[Xe+1]=Ut[1],En[Xe+2]=Ut[2],En[Xe+3]=Ut[3];return En}}()},50840:function(It,G,D){var ee;(function(ae,T,ne,Q){"use strict";var ge=["","webkit","Moz","MS","ms","o"],pe=T.createElement("div"),Ce="function",he=Math.round,st=Math.abs,re=Date.now;function Se(jt,sn,Jn){return setTimeout(Wt(jt,Jn),sn)}function se(jt,sn,Jn){return Array.isArray(jt)?(de(jt,Jn[sn],Jn),!0):!1}function de(jt,sn,Jn){var Xr;if(jt)if(jt.forEach)jt.forEach(sn,Jn);else if(jt.length!==Q)for(Xr=0;Xr<jt.length;)sn.call(Jn,jt[Xr],Xr,jt),Xr++;else for(Xr in jt)jt.hasOwnProperty(Xr)&&sn.call(Jn,jt[Xr],Xr,jt)}function xe(jt,sn,Jn){var Xr="DEPRECATED METHOD: "+sn+`
`+Jn+` AT 
`;return function(){var Ii=new Error("get-stack-trace"),Ea=Ii&&Ii.stack?Ii.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",co=ae.console&&(ae.console.warn||ae.console.log);return co&&co.call(ae.console,Xr,Ea),jt.apply(this,arguments)}}var le;typeof Object.assign!="function"?le=function(sn){if(sn===Q||sn===null)throw new TypeError("Cannot convert undefined or null to object");for(var Jn=Object(sn),Xr=1;Xr<arguments.length;Xr++){var Ii=arguments[Xr];if(Ii!==Q&&Ii!==null)for(var Ea in Ii)Ii.hasOwnProperty(Ea)&&(Jn[Ea]=Ii[Ea])}return Jn}:le=Object.assign;var Ue=xe(function(sn,Jn,Xr){for(var Ii=Object.keys(Jn),Ea=0;Ea<Ii.length;)(!Xr||Xr&&sn[Ii[Ea]]===Q)&&(sn[Ii[Ea]]=Jn[Ii[Ea]]),Ea++;return sn},"extend","Use `assign`."),Et=xe(function(sn,Jn){return Ue(sn,Jn,!0)},"merge","Use `assign`.");function mt(jt,sn,Jn){var Xr=sn.prototype,Ii;Ii=jt.prototype=Object.create(Xr),Ii.constructor=jt,Ii._super=Xr,Jn&&le(Ii,Jn)}function Wt(jt,sn){return function(){return jt.apply(sn,arguments)}}function Rt(jt,sn){return typeof jt==Ce?jt.apply(sn&&sn[0]||Q,sn):jt}function Tt(jt,sn){return jt===Q?sn:jt}function Ze(jt,sn,Jn){de(De(sn),function(Xr){jt.addEventListener(Xr,Jn,!1)})}function Ie(jt,sn,Jn){de(De(sn),function(Xr){jt.removeEventListener(Xr,Jn,!1)})}function Qe(jt,sn){for(;jt;){if(jt==sn)return!0;jt=jt.parentNode}return!1}function it(jt,sn){return jt.indexOf(sn)>-1}function De(jt){return jt.trim().split(/\s+/g)}function cn(jt,sn,Jn){if(jt.indexOf&&!Jn)return jt.indexOf(sn);for(var Xr=0;Xr<jt.length;){if(Jn&&jt[Xr][Jn]==sn||!Jn&&jt[Xr]===sn)return Xr;Xr++}return-1}function qe(jt){return Array.prototype.slice.call(jt,0)}function Pt(jt,sn,Jn){for(var Xr=[],Ii=[],Ea=0;Ea<jt.length;){var co=sn?jt[Ea][sn]:jt[Ea];cn(Ii,co)<0&&Xr.push(jt[Ea]),Ii[Ea]=co,Ea++}return Jn&&(sn?Xr=Xr.sort(function(Vs,Ds){return Vs[sn]>Ds[sn]}):Xr=Xr.sort()),Xr}function Le(jt,sn){for(var Jn,Xr,Ii=sn[0].toUpperCase()+sn.slice(1),Ea=0;Ea<ge.length;){if(Jn=ge[Ea],Xr=Jn?Jn+Ii:sn,Xr in jt)return Xr;Ea++}return Q}var pt=1;function at(){return pt++}function nt(jt){var sn=jt.ownerDocument||jt;return sn.defaultView||sn.parentWindow||ae}var Ct=/mobile|tablet|ip(ad|hone|od)|android/i,rt="ontouchstart"in ae,vt=Le(ae,"PointerEvent")!==Q,Ve=rt&&Ct.test(navigator.userAgent),hn="touch",yn="pen",ir="mouse",Qn="kinect",Ut=25,En=1,Tn=2,lr=4,ln=8,Lt=1,bn=2,Xe=4,Fe=8,on=16,B=bn|Xe,be=Fe|on,yt=B|be,Ee=["x","y"],Zt=["clientX","clientY"];function _n(jt,sn){var Jn=this;this.manager=jt,this.callback=sn,this.element=jt.element,this.target=jt.options.inputTarget,this.domHandler=function(Xr){Rt(jt.options.enable,[jt])&&Jn.handler(Xr)},this.init()}_n.prototype={handler:function(){},init:function(){this.evEl&&Ze(this.element,this.evEl,this.domHandler),this.evTarget&&Ze(this.target,this.evTarget,this.domHandler),this.evWin&&Ze(nt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ie(this.element,this.evEl,this.domHandler),this.evTarget&&Ie(this.target,this.evTarget,this.domHandler),this.evWin&&Ie(nt(this.element),this.evWin,this.domHandler)}};function Sn(jt){var sn,Jn=jt.options.inputClass;return Jn?sn=Jn:vt?sn=Pe:Ve?sn=dn:rt?sn=ii:sn=Jt,new sn(jt,Bn)}function Bn(jt,sn,Jn){var Xr=Jn.pointers.length,Ii=Jn.changedPointers.length,Ea=sn&En&&Xr-Ii===0,co=sn&(lr|ln)&&Xr-Ii===0;Jn.isFirst=!!Ea,Jn.isFinal=!!co,Ea&&(jt.session={}),Jn.eventType=sn,or(jt,Jn),jt.emit("hammer.input",Jn),jt.recognize(Jn),jt.session.prevInput=Jn}function or(jt,sn){var Jn=jt.session,Xr=sn.pointers,Ii=Xr.length;Jn.firstInput||(Jn.firstInput=wr(sn)),Ii>1&&!Jn.firstMultiple?Jn.firstMultiple=wr(sn):Ii===1&&(Jn.firstMultiple=!1);var Ea=Jn.firstInput,co=Jn.firstMultiple,Zs=co?co.center:Ea.center,Vs=sn.center=Ar(Xr);sn.timeStamp=re(),sn.deltaTime=sn.timeStamp-Ea.timeStamp,sn.angle=bt(Zs,Vs),sn.distance=Yr(Zs,Vs),dr(Jn,sn),sn.offsetDirection=Nr(sn.deltaX,sn.deltaY);var Ds=Ir(sn.deltaTime,sn.deltaX,sn.deltaY);sn.overallVelocityX=Ds.x,sn.overallVelocityY=Ds.y,sn.overallVelocity=st(Ds.x)>st(Ds.y)?Ds.x:Ds.y,sn.scale=co?ye(co.pointers,Xr):1,sn.rotation=co?ve(co.pointers,Xr):0,sn.maxPointers=Jn.prevInput?sn.pointers.length>Jn.prevInput.maxPointers?sn.pointers.length:Jn.prevInput.maxPointers:sn.pointers.length,gr(Jn,sn);var vu=jt.element;Qe(sn.srcEvent.target,vu)&&(vu=sn.srcEvent.target),sn.target=vu}function dr(jt,sn){var Jn=sn.center,Xr=jt.offsetDelta||{},Ii=jt.prevDelta||{},Ea=jt.prevInput||{};(sn.eventType===En||Ea.eventType===lr)&&(Ii=jt.prevDelta={x:Ea.deltaX||0,y:Ea.deltaY||0},Xr=jt.offsetDelta={x:Jn.x,y:Jn.y}),sn.deltaX=Ii.x+(Jn.x-Xr.x),sn.deltaY=Ii.y+(Jn.y-Xr.y)}function gr(jt,sn){var Jn=jt.lastInterval||sn,Xr=sn.timeStamp-Jn.timeStamp,Ii,Ea,co,Zs;if(sn.eventType!=ln&&(Xr>Ut||Jn.velocity===Q)){var Vs=sn.deltaX-Jn.deltaX,Ds=sn.deltaY-Jn.deltaY,vu=Ir(Xr,Vs,Ds);Ea=vu.x,co=vu.y,Ii=st(vu.x)>st(vu.y)?vu.x:vu.y,Zs=Nr(Vs,Ds),jt.lastInterval=sn}else Ii=Jn.velocity,Ea=Jn.velocityX,co=Jn.velocityY,Zs=Jn.direction;sn.velocity=Ii,sn.velocityX=Ea,sn.velocityY=co,sn.direction=Zs}function wr(jt){for(var sn=[],Jn=0;Jn<jt.pointers.length;)sn[Jn]={clientX:he(jt.pointers[Jn].clientX),clientY:he(jt.pointers[Jn].clientY)},Jn++;return{timeStamp:re(),pointers:sn,center:Ar(sn),deltaX:jt.deltaX,deltaY:jt.deltaY}}function Ar(jt){var sn=jt.length;if(sn===1)return{x:he(jt[0].clientX),y:he(jt[0].clientY)};for(var Jn=0,Xr=0,Ii=0;Ii<sn;)Jn+=jt[Ii].clientX,Xr+=jt[Ii].clientY,Ii++;return{x:he(Jn/sn),y:he(Xr/sn)}}function Ir(jt,sn,Jn){return{x:sn/jt||0,y:Jn/jt||0}}function Nr(jt,sn){return jt===sn?Lt:st(jt)>=st(sn)?jt<0?bn:Xe:sn<0?Fe:on}function Yr(jt,sn,Jn){Jn||(Jn=Ee);var Xr=sn[Jn[0]]-jt[Jn[0]],Ii=sn[Jn[1]]-jt[Jn[1]];return Math.sqrt(Xr*Xr+Ii*Ii)}function bt(jt,sn,Jn){Jn||(Jn=Ee);var Xr=sn[Jn[0]]-jt[Jn[0]],Ii=sn[Jn[1]]-jt[Jn[1]];return Math.atan2(Ii,Xr)*180/Math.PI}function ve(jt,sn){return bt(sn[1],sn[0],Zt)+bt(jt[1],jt[0],Zt)}function ye(jt,sn){return Yr(sn[0],sn[1],Zt)/Yr(jt[0],jt[1],Zt)}var Ke={mousedown:En,mousemove:Tn,mouseup:lr},ht="mousedown",xt="mousemove mouseup";function Jt(){this.evEl=ht,this.evWin=xt,this.pressed=!1,_n.apply(this,arguments)}mt(Jt,_n,{handler:function(sn){var Jn=Ke[sn.type];Jn&En&&sn.button===0&&(this.pressed=!0),Jn&Tn&&sn.which!==1&&(Jn=lr),this.pressed&&(Jn&lr&&(this.pressed=!1),this.callback(this.manager,Jn,{pointers:[sn],changedPointers:[sn],pointerType:ir,srcEvent:sn}))}});var Dn={pointerdown:En,pointermove:Tn,pointerup:lr,pointercancel:ln,pointerout:ln},fr={2:hn,3:yn,4:ir,5:Qn},In="pointerdown",ke="pointermove pointerup pointercancel";ae.MSPointerEvent&&!ae.PointerEvent&&(In="MSPointerDown",ke="MSPointerMove MSPointerUp MSPointerCancel");function Pe(){this.evEl=In,this.evWin=ke,_n.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}mt(Pe,_n,{handler:function(sn){var Jn=this.store,Xr=!1,Ii=sn.type.toLowerCase().replace("ms",""),Ea=Dn[Ii],co=fr[sn.pointerType]||sn.pointerType,Zs=co==hn,Vs=cn(Jn,sn.pointerId,"pointerId");Ea&En&&(sn.button===0||Zs)?Vs<0&&(Jn.push(sn),Vs=Jn.length-1):Ea&(lr|ln)&&(Xr=!0),!(Vs<0)&&(Jn[Vs]=sn,this.callback(this.manager,Ea,{pointers:Jn,changedPointers:[sn],pointerType:co,srcEvent:sn}),Xr&&Jn.splice(Vs,1))}});var Ge={touchstart:En,touchmove:Tn,touchend:lr,touchcancel:ln},gt="touchstart",Bt="touchstart touchmove touchend touchcancel";function an(){this.evTarget=gt,this.evWin=Bt,this.started=!1,_n.apply(this,arguments)}mt(an,_n,{handler:function(sn){var Jn=Ge[sn.type];if(Jn===En&&(this.started=!0),!!this.started){var Xr=An.call(this,sn,Jn);Jn&(lr|ln)&&Xr[0].length-Xr[1].length===0&&(this.started=!1),this.callback(this.manager,Jn,{pointers:Xr[0],changedPointers:Xr[1],pointerType:hn,srcEvent:sn})}}});function An(jt,sn){var Jn=qe(jt.touches),Xr=qe(jt.changedTouches);return sn&(lr|ln)&&(Jn=Pt(Jn.concat(Xr),"identifier",!0)),[Jn,Xr]}var kt={touchstart:En,touchmove:Tn,touchend:lr,touchcancel:ln},Dt="touchstart touchmove touchend touchcancel";function dn(){this.evTarget=Dt,this.targetIds={},_n.apply(this,arguments)}mt(dn,_n,{handler:function(sn){var Jn=kt[sn.type],Xr=He.call(this,sn,Jn);Xr&&this.callback(this.manager,Jn,{pointers:Xr[0],changedPointers:Xr[1],pointerType:hn,srcEvent:sn})}});function He(jt,sn){var Jn=qe(jt.touches),Xr=this.targetIds;if(sn&(En|Tn)&&Jn.length===1)return Xr[Jn[0].identifier]=!0,[Jn,Jn];var Ii,Ea,co=qe(jt.changedTouches),Zs=[],Vs=this.target;if(Ea=Jn.filter(function(Ds){return Qe(Ds.target,Vs)}),sn===En)for(Ii=0;Ii<Ea.length;)Xr[Ea[Ii].identifier]=!0,Ii++;for(Ii=0;Ii<co.length;)Xr[co[Ii].identifier]&&Zs.push(co[Ii]),sn&(lr|ln)&&delete Xr[co[Ii].identifier],Ii++;if(Zs.length)return[Pt(Ea.concat(Zs),"identifier",!0),Zs]}var ei=2500,Tr=25;function ii(){_n.apply(this,arguments);var jt=Wt(this.handler,this);this.touch=new dn(this.manager,jt),this.mouse=new Jt(this.manager,jt),this.primaryTouch=null,this.lastTouches=[]}mt(ii,_n,{handler:function(sn,Jn,Xr){var Ii=Xr.pointerType==hn,Ea=Xr.pointerType==ir;if(!(Ea&&Xr.sourceCapabilities&&Xr.sourceCapabilities.firesTouchEvents)){if(Ii)Di.call(this,Jn,Xr);else if(Ea&&Br.call(this,Xr))return;this.callback(sn,Jn,Xr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Di(jt,sn){jt&En?(this.primaryTouch=sn.changedPointers[0].identifier,vi.call(this,sn)):jt&(lr|ln)&&vi.call(this,sn)}function vi(jt){var sn=jt.changedPointers[0];if(sn.identifier===this.primaryTouch){var Jn={x:sn.clientX,y:sn.clientY};this.lastTouches.push(Jn);var Xr=this.lastTouches,Ii=function(){var Ea=Xr.indexOf(Jn);Ea>-1&&Xr.splice(Ea,1)};setTimeout(Ii,ei)}}function Br(jt){for(var sn=jt.srcEvent.clientX,Jn=jt.srcEvent.clientY,Xr=0;Xr<this.lastTouches.length;Xr++){var Ii=this.lastTouches[Xr],Ea=Math.abs(sn-Ii.x),co=Math.abs(Jn-Ii.y);if(Ea<=Tr&&co<=Tr)return!0}return!1}var Gr=Le(pe.style,"touchAction"),bi=Gr!==Q,Ni="compute",Qa="auto",Xi="manipulation",ao="none",ko="pan-x",Ba="pan-y",mi=Kt();function Je(jt,sn){this.manager=jt,this.set(sn)}Je.prototype={set:function(jt){jt==Ni&&(jt=this.compute()),bi&&this.manager.element.style&&mi[jt]&&(this.manager.element.style[Gr]=jt),this.actions=jt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var jt=[];return de(this.manager.recognizers,function(sn){Rt(sn.options.enable,[sn])&&(jt=jt.concat(sn.getTouchAction()))}),wt(jt.join(" "))},preventDefaults:function(jt){var sn=jt.srcEvent,Jn=jt.offsetDirection;if(this.manager.session.prevented){sn.preventDefault();return}var Xr=this.actions,Ii=it(Xr,ao)&&!mi[ao],Ea=it(Xr,Ba)&&!mi[Ba],co=it(Xr,ko)&&!mi[ko];if(Ii){var Zs=jt.pointers.length===1,Vs=jt.distance<2,Ds=jt.deltaTime<250;if(Zs&&Vs&&Ds)return}if(!(co&&Ea)&&(Ii||Ea&&Jn&B||co&&Jn&be))return this.preventSrc(sn)},preventSrc:function(jt){this.manager.session.prevented=!0,jt.preventDefault()}};function wt(jt){if(it(jt,ao))return ao;var sn=it(jt,ko),Jn=it(jt,Ba);return sn&&Jn?ao:sn||Jn?sn?ko:Ba:it(jt,Xi)?Xi:Qa}function Kt(){if(!bi)return!1;var jt={},sn=ae.CSS&&ae.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Jn){jt[Jn]=sn?ae.CSS.supports("touch-action",Jn):!0}),jt}var Mn=1,Yn=2,Gn=4,Ht=8,On=Ht,Cr=16,Er=32;function gi(jt){this.options=le({},this.defaults,jt||{}),this.id=at(),this.manager=null,this.options.enable=Tt(this.options.enable,!0),this.state=Mn,this.simultaneous={},this.requireFail=[]}gi.prototype={defaults:{},set:function(jt){return le(this.options,jt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(jt){if(se(jt,"recognizeWith",this))return this;var sn=this.simultaneous;return jt=wi(jt,this),sn[jt.id]||(sn[jt.id]=jt,jt.recognizeWith(this)),this},dropRecognizeWith:function(jt){return se(jt,"dropRecognizeWith",this)?this:(jt=wi(jt,this),delete this.simultaneous[jt.id],this)},requireFailure:function(jt){if(se(jt,"requireFailure",this))return this;var sn=this.requireFail;return jt=wi(jt,this),cn(sn,jt)===-1&&(sn.push(jt),jt.requireFailure(this)),this},dropRequireFailure:function(jt){if(se(jt,"dropRequireFailure",this))return this;jt=wi(jt,this);var sn=cn(this.requireFail,jt);return sn>-1&&this.requireFail.splice(sn,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(jt){return!!this.simultaneous[jt.id]},emit:function(jt){var sn=this,Jn=this.state;function Xr(Ii){sn.manager.emit(Ii,jt)}Jn<Ht&&Xr(sn.options.event+aa(Jn)),Xr(sn.options.event),jt.additionalEvent&&Xr(jt.additionalEvent),Jn>=Ht&&Xr(sn.options.event+aa(Jn))},tryEmit:function(jt){if(this.canEmit())return this.emit(jt);this.state=Er},canEmit:function(){for(var jt=0;jt<this.requireFail.length;){if(!(this.requireFail[jt].state&(Er|Mn)))return!1;jt++}return!0},recognize:function(jt){var sn=le({},jt);if(!Rt(this.options.enable,[this,sn])){this.reset(),this.state=Er;return}this.state&(On|Cr|Er)&&(this.state=Mn),this.state=this.process(sn),this.state&(Yn|Gn|Ht|Cr)&&this.tryEmit(sn)},process:function(jt){},getTouchAction:function(){},reset:function(){}};function aa(jt){return jt&Cr?"cancel":jt&Ht?"end":jt&Gn?"move":jt&Yn?"start":""}function ya(jt){return jt==on?"down":jt==Fe?"up":jt==bn?"left":jt==Xe?"right":""}function wi(jt,sn){var Jn=sn.manager;return Jn?Jn.get(jt):jt}function sa(){gi.apply(this,arguments)}mt(sa,gi,{defaults:{pointers:1},attrTest:function(jt){var sn=this.options.pointers;return sn===0||jt.pointers.length===sn},process:function(jt){var sn=this.state,Jn=jt.eventType,Xr=sn&(Yn|Gn),Ii=this.attrTest(jt);return Xr&&(Jn&ln||!Ii)?sn|Cr:Xr||Ii?Jn&lr?sn|Ht:sn&Yn?sn|Gn:Yn:Er}});function $i(){sa.apply(this,arguments),this.pX=null,this.pY=null}mt($i,sa,{defaults:{event:"pan",threshold:10,pointers:1,direction:yt},getTouchAction:function(){var jt=this.options.direction,sn=[];return jt&B&&sn.push(Ba),jt&be&&sn.push(ko),sn},directionTest:function(jt){var sn=this.options,Jn=!0,Xr=jt.distance,Ii=jt.direction,Ea=jt.deltaX,co=jt.deltaY;return Ii&sn.direction||(sn.direction&B?(Ii=Ea===0?Lt:Ea<0?bn:Xe,Jn=Ea!=this.pX,Xr=Math.abs(jt.deltaX)):(Ii=co===0?Lt:co<0?Fe:on,Jn=co!=this.pY,Xr=Math.abs(jt.deltaY))),jt.direction=Ii,Jn&&Xr>sn.threshold&&Ii&sn.direction},attrTest:function(jt){return sa.prototype.attrTest.call(this,jt)&&(this.state&Yn||!(this.state&Yn)&&this.directionTest(jt))},emit:function(jt){this.pX=jt.deltaX,this.pY=jt.deltaY;var sn=ya(jt.direction);sn&&(jt.additionalEvent=this.options.event+sn),this._super.emit.call(this,jt)}});function hi(){sa.apply(this,arguments)}mt(hi,sa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ao]},attrTest:function(jt){return this._super.attrTest.call(this,jt)&&(Math.abs(jt.scale-1)>this.options.threshold||this.state&Yn)},emit:function(jt){if(jt.scale!==1){var sn=jt.scale<1?"in":"out";jt.additionalEvent=this.options.event+sn}this._super.emit.call(this,jt)}});function fa(){gi.apply(this,arguments),this._timer=null,this._input=null}mt(fa,gi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Qa]},process:function(jt){var sn=this.options,Jn=jt.pointers.length===sn.pointers,Xr=jt.distance<sn.threshold,Ii=jt.deltaTime>sn.time;if(this._input=jt,!Xr||!Jn||jt.eventType&(lr|ln)&&!Ii)this.reset();else if(jt.eventType&En)this.reset(),this._timer=Se(function(){this.state=On,this.tryEmit()},sn.time,this);else if(jt.eventType&lr)return On;return Er},reset:function(){clearTimeout(this._timer)},emit:function(jt){this.state===On&&(jt&&jt.eventType&lr?this.manager.emit(this.options.event+"up",jt):(this._input.timeStamp=re(),this.manager.emit(this.options.event,this._input)))}});function ea(){sa.apply(this,arguments)}mt(ea,sa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ao]},attrTest:function(jt){return this._super.attrTest.call(this,jt)&&(Math.abs(jt.rotation)>this.options.threshold||this.state&Yn)}});function ka(){sa.apply(this,arguments)}mt(ka,sa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:B|be,pointers:1},getTouchAction:function(){return $i.prototype.getTouchAction.call(this)},attrTest:function(jt){var sn=this.options.direction,Jn;return sn&(B|be)?Jn=jt.overallVelocity:sn&B?Jn=jt.overallVelocityX:sn&be&&(Jn=jt.overallVelocityY),this._super.attrTest.call(this,jt)&&sn&jt.offsetDirection&&jt.distance>this.options.threshold&&jt.maxPointers==this.options.pointers&&st(Jn)>this.options.velocity&&jt.eventType&lr},emit:function(jt){var sn=ya(jt.offsetDirection);sn&&this.manager.emit(this.options.event+sn,jt),this.manager.emit(this.options.event,jt)}});function Bi(){gi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}mt(Bi,gi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xi]},process:function(jt){var sn=this.options,Jn=jt.pointers.length===sn.pointers,Xr=jt.distance<sn.threshold,Ii=jt.deltaTime<sn.time;if(this.reset(),jt.eventType&En&&this.count===0)return this.failTimeout();if(Xr&&Ii&&Jn){if(jt.eventType!=lr)return this.failTimeout();var Ea=this.pTime?jt.timeStamp-this.pTime<sn.interval:!0,co=!this.pCenter||Yr(this.pCenter,jt.center)<sn.posThreshold;this.pTime=jt.timeStamp,this.pCenter=jt.center,!co||!Ea?this.count=1:this.count+=1,this._input=jt;var Zs=this.count%sn.taps;if(Zs===0)return this.hasRequireFailures()?(this._timer=Se(function(){this.state=On,this.tryEmit()},sn.interval,this),Yn):On}return Er},failTimeout:function(){return this._timer=Se(function(){this.state=Er},this.options.interval,this),Er},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==On&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function _a(jt,sn){return sn=sn||{},sn.recognizers=Tt(sn.recognizers,_a.defaults.preset),new ns(jt,sn)}_a.VERSION="2.0.7",_a.defaults={domEvents:!1,touchAction:Ni,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[hi,{enable:!1},["rotate"]],[ka,{direction:B}],[$i,{direction:B},["swipe"]],[Bi],[Bi,{event:"doubletap",taps:2},["tap"]],[fa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var to=1,Ae=2;function ns(jt,sn){this.options=le({},_a.defaults,sn||{}),this.options.inputTarget=this.options.inputTarget||jt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=jt,this.input=Sn(this),this.touchAction=new Je(this,this.options.touchAction),Oo(this,!0),de(this.options.recognizers,function(Jn){var Xr=this.add(new Jn[0](Jn[1]));Jn[2]&&Xr.recognizeWith(Jn[2]),Jn[3]&&Xr.requireFailure(Jn[3])},this)}ns.prototype={set:function(jt){return le(this.options,jt),jt.touchAction&&this.touchAction.update(),jt.inputTarget&&(this.input.destroy(),this.input.target=jt.inputTarget,this.input.init()),this},stop:function(jt){this.session.stopped=jt?Ae:to},recognize:function(jt){var sn=this.session;if(!sn.stopped){this.touchAction.preventDefaults(jt);var Jn,Xr=this.recognizers,Ii=sn.curRecognizer;(!Ii||Ii&&Ii.state&On)&&(Ii=sn.curRecognizer=null);for(var Ea=0;Ea<Xr.length;)Jn=Xr[Ea],sn.stopped!==Ae&&(!Ii||Jn==Ii||Jn.canRecognizeWith(Ii))?Jn.recognize(jt):Jn.reset(),!Ii&&Jn.state&(Yn|Gn|Ht)&&(Ii=sn.curRecognizer=Jn),Ea++}},get:function(jt){if(jt instanceof gi)return jt;for(var sn=this.recognizers,Jn=0;Jn<sn.length;Jn++)if(sn[Jn].options.event==jt)return sn[Jn];return null},add:function(jt){if(se(jt,"add",this))return this;var sn=this.get(jt.options.event);return sn&&this.remove(sn),this.recognizers.push(jt),jt.manager=this,this.touchAction.update(),jt},remove:function(jt){if(se(jt,"remove",this))return this;if(jt=this.get(jt),jt){var sn=this.recognizers,Jn=cn(sn,jt);Jn!==-1&&(sn.splice(Jn,1),this.touchAction.update())}return this},on:function(jt,sn){if(jt!==Q&&sn!==Q){var Jn=this.handlers;return de(De(jt),function(Xr){Jn[Xr]=Jn[Xr]||[],Jn[Xr].push(sn)}),this}},off:function(jt,sn){if(jt!==Q){var Jn=this.handlers;return de(De(jt),function(Xr){sn?Jn[Xr]&&Jn[Xr].splice(cn(Jn[Xr],sn),1):delete Jn[Xr]}),this}},emit:function(jt,sn){this.options.domEvents&&Ms(jt,sn);var Jn=this.handlers[jt]&&this.handlers[jt].slice();if(!(!Jn||!Jn.length)){sn.type=jt,sn.preventDefault=function(){sn.srcEvent.preventDefault()};for(var Xr=0;Xr<Jn.length;)Jn[Xr](sn),Xr++}},destroy:function(){this.element&&Oo(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Oo(jt,sn){var Jn=jt.element;if(Jn.style){var Xr;de(jt.options.cssProps,function(Ii,Ea){Xr=Le(Jn.style,Ea),sn?(jt.oldCssProps[Xr]=Jn.style[Xr],Jn.style[Xr]=Ii):Jn.style[Xr]=jt.oldCssProps[Xr]||""}),sn||(jt.oldCssProps={})}}function Ms(jt,sn){var Jn=T.createEvent("Event");Jn.initEvent(jt,!0,!0),Jn.gesture=sn,sn.target.dispatchEvent(Jn)}le(_a,{INPUT_START:En,INPUT_MOVE:Tn,INPUT_END:lr,INPUT_CANCEL:ln,STATE_POSSIBLE:Mn,STATE_BEGAN:Yn,STATE_CHANGED:Gn,STATE_ENDED:Ht,STATE_RECOGNIZED:On,STATE_CANCELLED:Cr,STATE_FAILED:Er,DIRECTION_NONE:Lt,DIRECTION_LEFT:bn,DIRECTION_RIGHT:Xe,DIRECTION_UP:Fe,DIRECTION_DOWN:on,DIRECTION_HORIZONTAL:B,DIRECTION_VERTICAL:be,DIRECTION_ALL:yt,Manager:ns,Input:_n,TouchAction:Je,TouchInput:dn,MouseInput:Jt,PointerEventInput:Pe,TouchMouseInput:ii,SingleTouchInput:an,Recognizer:gi,AttrRecognizer:sa,Tap:Bi,Pan:$i,Swipe:ka,Pinch:hi,Rotate:ea,Press:fa,on:Ze,off:Ie,each:de,merge:Et,extend:Ue,assign:le,inherit:mt,bindFn:Wt,prefixed:Le});var ps=typeof ae!="undefined"?ae:typeof self!="undefined"?self:{};ps.Hammer=_a,ee=function(){return _a}.call(G,D,G,It),ee!==Q&&(It.exports=ee)})(window,document,"Hammer")},47443:function(It,G,D){var ee=D(42118);function ae(T,ne){var Q=T==null?0:T.length;return!!Q&&ee(T,ne,0)>-1}It.exports=ae},1196:function(It){function G(D,ee,ae){for(var T=-1,ne=D==null?0:D.length;++T<ne;)if(ae(ee,D[T]))return!0;return!1}It.exports=G},29750:function(It){function G(D,ee,ae){return D===D&&(ae!==void 0&&(D=D<=ae?D:ae),ee!==void 0&&(D=D>=ee?D:ee)),D}It.exports=G},41848:function(It){function G(D,ee,ae,T){for(var ne=D.length,Q=ae+(T?1:-1);T?Q--:++Q<ne;)if(ee(D[Q],Q,D))return Q;return-1}It.exports=G},42118:function(It,G,D){var ee=D(41848),ae=D(62722),T=D(39375);function ne(Q,ge,pe){return ge===ge?T(Q,ge,pe):ee(Q,ae,pe)}It.exports=ne},74221:function(It){function G(D,ee,ae,T){for(var ne=ae-1,Q=D.length;++ne<Q;)if(T(D[ne],ee))return ne;return-1}It.exports=G},62722:function(It){function G(D){return D!==D}It.exports=G},65464:function(It,G,D){var ee=D(29932),ae=D(42118),T=D(74221),ne=D(51717),Q=D(6450),ge=Array.prototype,pe=ge.splice;function Ce(he,st,re,Se){var se=Se?T:ae,de=-1,xe=st.length,le=he;for(he===st&&(st=Q(st)),re&&(le=ee(he,ne(re)));++de<xe;)for(var Ue=0,Et=st[de],mt=re?re(Et):Et;(Ue=se(le,mt,Ue,Se))>-1;)le!==he&&pe.call(le,Ue,1),pe.call(he,Ue,1);return he}It.exports=Ce},45652:function(It,G,D){var ee=D(88668),ae=D(47443),T=D(1196),ne=D(74757),Q=D(23593),ge=D(21814),pe=200;function Ce(he,st,re){var Se=-1,se=ae,de=he.length,xe=!0,le=[],Ue=le;if(re)xe=!1,se=T;else if(de>=pe){var Et=st?null:Q(he);if(Et)return ge(Et);xe=!1,se=ne,Ue=new ee}else Ue=st?[]:le;e:for(;++Se<de;){var mt=he[Se],Wt=st?st(mt):mt;if(mt=re||mt!==0?mt:0,xe&&Wt===Wt){for(var Rt=Ue.length;Rt--;)if(Ue[Rt]===Wt)continue e;st&&Ue.push(Wt),le.push(mt)}else se(Ue,Wt,re)||(Ue!==le&&Ue.push(Wt),le.push(mt))}return le}It.exports=Ce},23593:function(It,G,D){var ee=D(58525),ae=D(28117),T=D(21814),ne=1/0,Q=ee&&1/T(new ee([,-0]))[1]==ne?function(ge){return new ee(ge)}:ae;It.exports=Q},39375:function(It){function G(D,ee,ae){for(var T=ae-1,ne=D.length;++T<ne;)if(D[T]===ee)return T;return-1}It.exports=G},74691:function(It,G,D){var ee=D(29750),ae=D(14841);function T(ne,Q,ge){return ge===void 0&&(ge=Q,Q=void 0),ge!==void 0&&(ge=ae(ge),ge=ge===ge?ge:0),Q!==void 0&&(Q=ae(Q),Q=Q===Q?Q:0),ee(ae(ne),Q,ge)}It.exports=T},51584:function(It,G,D){var ee=D(44239),ae=D(37005),T="[object Boolean]";function ne(Q){return Q===!0||Q===!1||ae(Q)&&ee(Q)==T}It.exports=ne},18446:function(It,G,D){var ee=D(90939);function ae(T,ne){return ee(T,ne)}It.exports=ae},14293:function(It){function G(D){return D==null}It.exports=G},81763:function(It,G,D){var ee=D(44239),ae=D(37005),T="[object Number]";function ne(Q){return typeof Q=="number"||ae(Q)&&ee(Q)==T}It.exports=ne},52353:function(It){function G(D){return D===void 0}It.exports=G},30236:function(It,G,D){var ee=D(42980),ae=D(21463),T=ae(function(ne,Q,ge,pe){ee(ne,Q,ge,pe)});It.exports=T},28117:function(It){function G(){}It.exports=G},97019:function(It,G,D){var ee=D(5976),ae=D(45604),T=ee(ae);It.exports=T},45604:function(It,G,D){var ee=D(65464);function ae(T,ne){return T&&T.length&&ne&&ne.length?ee(T,ne):T}It.exports=ae},44908:function(It,G,D){var ee=D(45652);function ae(T){return T&&T.length?ee(T):[]}It.exports=ae},6158:function(It){(function(G,D){It.exports=D()})(this,function(){"use strict";var G,D,ee;function ae(T,ne){if(!G)G=ne;else if(!D)D=ne;else{var Q="var sharedChunk = {}; ("+G+")(sharedChunk); ("+D+")(sharedChunk);",ge={};G(ge),ee=ne(ge),typeof window!="undefined"&&(ee.workerUrl=window.URL.createObjectURL(new Blob([Q],{type:"text/javascript"})))}}return ae(["exports"],function(T){"use strict";function ne(u,v){return u(v={exports:{}},v.exports),v.exports}var Q=ge;function ge(u,v,_,M){this.cx=3*u,this.bx=3*(_-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(M-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=M,this.p2x=_,this.p2y=M}ge.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},ge.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},ge.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},ge.prototype.solveCurveX=function(u,v){var _,M,L,U,H;for(v===void 0&&(v=1e-6),L=u,H=0;H<8;H++){if(U=this.sampleCurveX(L)-u,Math.abs(U)<v)return L;var ie=this.sampleCurveDerivativeX(L);if(Math.abs(ie)<1e-6)break;L-=U/ie}if((L=u)<(_=0))return _;if(L>(M=1))return M;for(;_<M;){if(U=this.sampleCurveX(L),Math.abs(U-u)<v)return L;u>U?_=L:M=L,L=.5*(M-_)+_}return L},ge.prototype.solve=function(u,v){return this.sampleCurveY(this.solveCurveX(u,v))};var pe=Ce;function Ce(u,v){this.x=u,this.y=v}Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,v){return this.clone()._rotateAround(u,v)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var v=u.x-this.x,_=u.y-this.y;return v*v+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,v){return Math.atan2(this.x*v-this.y*u,this.x*u+this.y*v)},_matMult:function(u){var v=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=v,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var v=Math.cos(u),_=Math.sin(u),M=_*this.x+v*this.y;return this.x=v*this.x-_*this.y,this.y=M,this},_rotateAround:function(u,v){var _=Math.cos(u),M=Math.sin(u),L=v.y+M*(this.x-v.x)+_*(this.y-v.y);return this.x=v.x+_*(this.x-v.x)-M*(this.y-v.y),this.y=L,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ce.convert=function(u){return u instanceof Ce?u:Array.isArray(u)?new Ce(u[0],u[1]):u};var he=typeof self!="undefined"?self:{},st=Math.pow(2,53)-1;function re(u,v,_,M){var L=new Q(u,v,_,M);return function(U){return L.solve(U)}}var Se=re(.25,.1,.25,1);function se(u,v,_){return Math.min(_,Math.max(v,u))}function de(u,v,_){var M=_-v,L=((u-v)%M+M)%M+v;return L===v?_:L}function xe(u){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var M=0,L=v;M<L.length;M+=1){var U=L[M];for(var H in U)u[H]=U[H]}return u}var le=1;function Ue(){return le++}function Et(){return function u(v){return v?(v^16*Math.random()>>v/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function mt(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function Wt(u,v){u.forEach(function(_){v[_]&&(v[_]=v[_].bind(v))})}function Rt(u,v){return u.indexOf(v,u.length-v.length)!==-1}function Tt(u,v,_){var M={};for(var L in u)M[L]=v.call(_||this,u[L],L,u);return M}function Ze(u,v,_){var M={};for(var L in u)v.call(_||this,u[L],L,u)&&(M[L]=u[L]);return M}function Ie(u){return Array.isArray(u)?u.map(Ie):typeof u=="object"&&u?Tt(u,Ie):u}var Qe={};function it(u){Qe[u]||(typeof console!="undefined"&&console.warn(u),Qe[u]=!0)}function De(u,v,_){return(_.y-u.y)*(v.x-u.x)>(v.y-u.y)*(_.x-u.x)}function cn(u){for(var v=0,_=0,M=u.length,L=M-1,U=void 0,H=void 0;_<M;L=_++)v+=((H=u[L]).x-(U=u[_]).x)*(U.y+H.y);return v}function qe(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Pt(u){var v={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(M,L,U,H){var ie=U||H;return v[L]=!ie||ie.toLowerCase(),""}),v["max-age"]){var _=parseInt(v["max-age"],10);isNaN(_)?delete v["max-age"]:v["max-age"]=_}return v}var Le=null;function pt(u){if(Le==null){var v=u.navigator?u.navigator.userAgent:null;Le=!!u.safari||!(!v||!(/\b(iPad|iPhone|iPod)\b/.test(v)||v.match("Safari")&&!v.match("Chrome")))}return Le}function at(u){try{var v=he[u];return v.setItem("_mapbox_test_",1),v.removeItem("_mapbox_test_"),!0}catch(_){return!1}}var nt,Ct,rt,vt,Ve=he.performance&&he.performance.now?he.performance.now.bind(he.performance):Date.now.bind(Date),hn=he.requestAnimationFrame||he.mozRequestAnimationFrame||he.webkitRequestAnimationFrame||he.msRequestAnimationFrame,yn=he.cancelAnimationFrame||he.mozCancelAnimationFrame||he.webkitCancelAnimationFrame||he.msCancelAnimationFrame,ir={now:Ve,frame:function(u){var v=hn(u);return{cancel:function(){return yn(v)}}},getImageData:function(u,v){v===void 0&&(v=0);var _=he.document.createElement("canvas"),M=_.getContext("2d");if(!M)throw new Error("failed to create canvas 2d context");return _.width=u.width,_.height=u.height,M.drawImage(u,0,0,u.width,u.height),M.getImageData(-v,-v,u.width+2*v,u.height+2*v)},resolveURL:function(u){return nt||(nt=he.document.createElement("a")),nt.href=u,nt.href},hardwareConcurrency:he.navigator&&he.navigator.hardwareConcurrency||4,get devicePixelRatio(){return he.devicePixelRatio},get prefersReducedMotion(){return!!he.matchMedia&&(Ct==null&&(Ct=he.matchMedia("(prefers-reduced-motion: reduce)")),Ct.matches)}},Qn={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ut={supported:!1,testSupport:function(u){!En&&vt&&(Tn?lr(u):rt=u)}},En=!1,Tn=!1;function lr(u){var v=u.createTexture();u.bindTexture(u.TEXTURE_2D,v);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,vt),u.isContextLost())return;Ut.supported=!0}catch(_){}u.deleteTexture(v),En=!0}he.document&&((vt=he.document.createElement("img")).onload=function(){rt&&lr(rt),rt=null,Tn=!0},vt.onerror=function(){En=!0,rt=null},vt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ln="01",Lt=function(u,v){this._transformRequestFn=u,this._customAccessToken=v,this._createSkuToken()};function bn(u){return u.indexOf("mapbox:")===0}Lt.prototype._createSkuToken=function(){var u=function(){for(var v="",_=0;_<10;_++)v+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ln,v].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt},Lt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Lt.prototype.transformRequest=function(u,v){return this._transformRequestFn&&this._transformRequestFn(u,v)||{url:u}},Lt.prototype.normalizeStyleURL=function(u,v){if(!bn(u))return u;var _=B(u);return _.path="/styles/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},Lt.prototype.normalizeGlyphsURL=function(u,v){if(!bn(u))return u;var _=B(u);return _.path="/fonts/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},Lt.prototype.normalizeSourceURL=function(u,v){if(!bn(u))return u;var _=B(u);return _.path="/v4/"+_.authority+".json",_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||v)},Lt.prototype.normalizeSpriteURL=function(u,v,_,M){var L=B(u);return bn(u)?(L.path="/styles/v1"+L.path+"/sprite"+v+_,this._makeAPIURL(L,this._customAccessToken||M)):(L.path+=""+v+_,be(L))},Lt.prototype.normalizeTileURL=function(u,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!bn(u))return u;var _=B(u);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ir.devicePixelRatio>=2||v===512?"@2x":"")+(Ut.supported?".webp":"$1")),_.path=_.path.replace(/^.+\/v4\//,"/"),_.path="/v4"+_.path;var M=this._customAccessToken||function(L){for(var U=0,H=L;U<H.length;U+=1){var ie=H[U].match(/^access_token=(.*)$/);if(ie)return ie[1]}return null}(_.params)||Qn.ACCESS_TOKEN;return Qn.REQUIRE_ACCESS_TOKEN&&M&&this._skuToken&&_.params.push("sku="+this._skuToken),this._makeAPIURL(_,M)},Lt.prototype.canonicalizeTileURL=function(u,v){var _=B(u);if(!_.path.match(/(^\/v4\/)/)||!_.path.match(/\.[\w]+$/))return u;var M="mapbox://tiles/";M+=_.path.replace("/v4/","");var L=_.params;return v&&(L=L.filter(function(U){return!U.match(/^access_token=/)})),L.length&&(M+="?"+L.join("&")),M},Lt.prototype.canonicalizeTileset=function(u,v){for(var _=!!v&&bn(v),M=[],L=0,U=u.tiles||[];L<U.length;L+=1){var H=U[L];Fe(H)?M.push(this.canonicalizeTileURL(H,_)):M.push(H)}return M},Lt.prototype._makeAPIURL=function(u,v){var _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",M=B(Qn.API_URL);if(u.protocol=M.protocol,u.authority=M.authority,u.protocol==="http"){var L=u.params.indexOf("secure");L>=0&&u.params.splice(L,1)}if(M.path!=="/"&&(u.path=""+M.path+u.path),!Qn.REQUIRE_ACCESS_TOKEN)return be(u);if(!(v=v||Qn.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+_);if(v[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+_);return u.params=u.params.filter(function(U){return U.indexOf("access_token")===-1}),u.params.push("access_token="+v),be(u)};var Xe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Fe(u){return Xe.test(u)}var on=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function B(u){var v=u.match(on);if(!v)throw new Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("&"):[]}}function be(u){var v=u.params.length?"?"+u.params.join("&"):"";return u.protocol+"://"+u.authority+u.path+v}function yt(u){if(!u)return null;var v=u.split(".");if(!v||v.length!==3)return null;try{return JSON.parse(decodeURIComponent(he.atob(v[1]).split("").map(function(_){return"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(_){return null}}var Ee=function(u){this.type=u,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ee.prototype.getStorageKey=function(u){var v,_=yt(Qn.ACCESS_TOKEN);return v=_&&_.u?he.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,function(M,L){return String.fromCharCode(+("0x"+L))})):Qn.ACCESS_TOKEN||"",u?"mapbox.eventData."+u+":"+v:"mapbox.eventData:"+v},Ee.prototype.fetchEventData=function(){var u=at("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(u)try{var M=he.localStorage.getItem(v);M&&(this.eventData=JSON.parse(M));var L=he.localStorage.getItem(_);L&&(this.anonId=L)}catch(U){it("Unable to read from LocalStorage")}},Ee.prototype.saveEventData=function(){var u=at("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(u)try{he.localStorage.setItem(_,this.anonId),Object.keys(this.eventData).length>=1&&he.localStorage.setItem(v,JSON.stringify(this.eventData))}catch(M){it("Unable to write to LocalStorage")}},Ee.prototype.processRequests=function(u){},Ee.prototype.postEvent=function(u,v,_,M){var L=this;if(Qn.EVENTS_URL){var U=B(Qn.EVENTS_URL);U.params.push("access_token="+(M||Qn.ACCESS_TOKEN||""));var H={event:this.type,created:new Date(u).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:ln,userId:this.anonId},ie=v?xe(H,v):H,_e={url:be(U),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ie])};this.pendingRequest=In(_e,function(Ye){L.pendingRequest=null,_(Ye),L.saveEventData(),L.processRequests(M)})}},Ee.prototype.queueRequest=function(u,v){this.queue.push(u),this.processRequests(v)};var Zt,_n,Sn=function(u){function v(){u.call(this,"map.load"),this.success={},this.skuToken=""}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.postMapLoadEvent=function(_,M,L,U){this.skuToken=L;var H=!(!U&&!Qn.ACCESS_TOKEN),ie=Array.isArray(_)&&_.some(function(_e){return bn(_e)||Fe(_e)});Qn.EVENTS_URL&&H&&ie&&this.queueRequest({id:M,timestamp:Date.now()},U)},v.prototype.processRequests=function(_){var M=this;if(!this.pendingRequest&&this.queue.length!==0){var L=this.queue.shift(),U=L.id,H=L.timestamp;U&&this.success[U]||(this.anonId||this.fetchEventData(),mt(this.anonId)||(this.anonId=Et()),this.postEvent(H,{skuToken:this.skuToken},function(ie){ie||U&&(M.success[U]=!0)},_))}},v}(Ee),Bn=new(function(u){function v(_){u.call(this,"appUserTurnstile"),this._customAccessToken=_}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.postTurnstileEvent=function(_,M){Qn.EVENTS_URL&&Qn.ACCESS_TOKEN&&Array.isArray(_)&&_.some(function(L){return bn(L)||Fe(L)})&&this.queueRequest(Date.now(),M)},v.prototype.processRequests=function(_){var M=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var L=yt(Qn.ACCESS_TOKEN),U=L?L.u:Qn.ACCESS_TOKEN,H=U!==this.eventData.tokenU;mt(this.anonId)||(this.anonId=Et(),H=!0);var ie=this.queue.shift();if(this.eventData.lastSuccess){var _e=new Date(this.eventData.lastSuccess),Ye=new Date(ie),ot=(ie-this.eventData.lastSuccess)/864e5;H=H||ot>=1||ot<-1||_e.getDate()!==Ye.getDate()}else H=!0;if(!H)return this.processRequests();this.postEvent(ie,{"enabled.telemetry":!1},function(dt){dt||(M.eventData.lastSuccess=ie,M.eventData.tokenU=U)},_)}},v}(Ee)),or=Bn.postTurnstileEvent.bind(Bn),dr=new Sn,gr=dr.postMapLoadEvent.bind(dr),wr=500,Ar=50;function Ir(){he.caches&&!Zt&&(Zt=he.caches.open("mapbox-tiles"))}function Nr(u){var v=u.indexOf("?");return v<0?u:u.slice(0,v)}var Yr,bt=1/0;function ve(){return Yr==null&&(Yr=he.OffscreenCanvas&&new he.OffscreenCanvas(1,1).getContext("2d")&&typeof he.createImageBitmap=="function"),Yr}var ye={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ye);var Ke=function(u){function v(_,M,L){M===401&&Fe(L)&&(_+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),u.call(this,_),this.status=M,this.url=L,this.name=this.constructor.name,this.message=_}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},v}(Error),ht=qe()?function(){return self.worker&&self.worker.referrer}:function(){return(he.location.protocol==="blob:"?he.parent:he).location.href},xt,Jt,Dn=function(u,v){if(!(/^file:/.test(_=u.url)||/^file:/.test(ht())&&!/^\w+:/.test(_))){if(he.fetch&&he.Request&&he.AbortController&&he.Request.prototype.hasOwnProperty("signal"))return function(M,L){var U,H=new he.AbortController,ie=new he.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:ht(),signal:H.signal}),_e=!1,Ye=!1,ot=(U=ie.url).indexOf("sku=")>0&&Fe(U);M.type==="json"&&ie.headers.set("Accept","application/json");var dt=function(Xt,Pn,Ln){if(!Ye){if(Xt&&Xt.message!=="SecurityError"&&it(Xt),Pn&&Ln)return zt(Pn);var rr=Date.now();he.fetch(ie).then(function($n){if($n.ok){var xr=ot?$n.clone():null;return zt($n,xr,rr)}return L(new Ke($n.statusText,$n.status,M.url))}).catch(function($n){$n.code!==20&&L(new Error($n.message))})}},zt=function(Xt,Pn,Ln){(M.type==="arrayBuffer"?Xt.arrayBuffer():M.type==="json"?Xt.json():Xt.text()).then(function(rr){Ye||(Pn&&Ln&&function($n,xr,Lr){if(Ir(),Zt){var Zr={status:xr.status,statusText:xr.statusText,headers:new he.Headers};xr.headers.forEach(function(ai,Ki){return Zr.headers.set(Ki,ai)});var Jr=Pt(xr.headers.get("Cache-Control")||"");Jr["no-store"]||(Jr["max-age"]&&Zr.headers.set("Expires",new Date(Lr+1e3*Jr["max-age"]).toUTCString()),new Date(Zr.headers.get("Expires")).getTime()-Lr<42e4||function(ai,Ki){if(_n===void 0)try{new Response(new ReadableStream),_n=!0}catch(ca){_n=!1}_n?Ki(ai.body):ai.blob().then(Ki)}(xr,function(ai){var Ki=new he.Response(ai,Zr);Ir(),Zt&&Zt.then(function(ca){return ca.put(Nr($n.url),Ki)}).catch(function(ca){return it(ca.message)})}))}}(ie,Pn,Ln),_e=!0,L(null,rr,Xt.headers.get("Cache-Control"),Xt.headers.get("Expires")))}).catch(function(rr){Ye||L(new Error(rr.message))})};return ot?function(Xt,Pn){if(Ir(),!Zt)return Pn(null);var Ln=Nr(Xt.url);Zt.then(function(rr){rr.match(Ln).then(function($n){var xr=function(Lr){if(!Lr)return!1;var Zr=new Date(Lr.headers.get("Expires")||0),Jr=Pt(Lr.headers.get("Cache-Control")||"");return Zr>Date.now()&&!Jr["no-cache"]}($n);rr.delete(Ln),xr&&rr.put(Ln,$n.clone()),Pn(null,$n,xr)}).catch(Pn)}).catch(Pn)}(ie,dt):dt(null,null),{cancel:function(){Ye=!0,_e||H.abort()}}}(u,v);if(qe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,v,void 0,!0)}var _;return function(M,L){var U=new he.XMLHttpRequest;for(var H in U.open(M.method||"GET",M.url,!0),M.type==="arrayBuffer"&&(U.responseType="arraybuffer"),M.headers)U.setRequestHeader(H,M.headers[H]);return M.type==="json"&&(U.responseType="text",U.setRequestHeader("Accept","application/json")),U.withCredentials=M.credentials==="include",U.onerror=function(){L(new Error(U.statusText))},U.onload=function(){if((U.status>=200&&U.status<300||U.status===0)&&U.response!==null){var ie=U.response;if(M.type==="json")try{ie=JSON.parse(U.response)}catch(_e){return L(_e)}L(null,ie,U.getResponseHeader("Cache-Control"),U.getResponseHeader("Expires"))}else L(new Ke(U.statusText,U.status,M.url))},U.send(M.body),{cancel:function(){return U.abort()}}}(u,v)},fr=function(u,v){return Dn(xe(u,{type:"arrayBuffer"}),v)},In=function(u,v){return Dn(xe(u,{method:"POST"}),v)},ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";xt=[],Jt=0;var Pe=function(u,v){if(Ut.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),Jt>=Qn.MAX_PARALLEL_IMAGE_REQUESTS){var _={requestParameters:u,callback:v,cancelled:!1,cancel:function(){this.cancelled=!0}};return xt.push(_),_}Jt++;var M=!1,L=function(){if(!M)for(M=!0,Jt--;xt.length&&Jt<Qn.MAX_PARALLEL_IMAGE_REQUESTS;){var H=xt.shift();H.cancelled||(H.cancel=Pe(H.requestParameters,H.callback).cancel)}},U=fr(u,function(H,ie,_e,Ye){L(),H?v(H):ie&&(ve()?function(ot,dt){var zt=new he.Blob([new Uint8Array(ot)],{type:"image/png"});he.createImageBitmap(zt).then(function(Xt){dt(null,Xt)}).catch(function(Xt){dt(new Error("Could not load image because of "+Xt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ie,v):function(ot,dt,zt,Xt){var Pn=new he.Image,Ln=he.URL;Pn.onload=function(){dt(null,Pn),Ln.revokeObjectURL(Pn.src),Pn.onload=null,he.requestAnimationFrame(function(){Pn.src=ke})},Pn.onerror=function(){return dt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var rr=new he.Blob([new Uint8Array(ot)],{type:"image/png"});Pn.cacheControl=zt,Pn.expires=Xt,Pn.src=ot.byteLength?Ln.createObjectURL(rr):ke}(ie,v,_e,Ye))});return{cancel:function(){U.cancel(),L()}}};function Ge(u,v,_){_[u]&&_[u].indexOf(v)!==-1||(_[u]=_[u]||[],_[u].push(v))}function gt(u,v,_){if(_&&_[u]){var M=_[u].indexOf(v);M!==-1&&_[u].splice(M,1)}}var Bt=function(u,v){v===void 0&&(v={}),xe(this,v),this.type=u},an=function(u){function v(_,M){M===void 0&&(M={}),u.call(this,"error",xe({error:_},M))}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v}(Bt),An=function(){};An.prototype.on=function(u,v){return this._listeners=this._listeners||{},Ge(u,v,this._listeners),this},An.prototype.off=function(u,v){return gt(u,v,this._listeners),gt(u,v,this._oneTimeListeners),this},An.prototype.once=function(u,v){return this._oneTimeListeners=this._oneTimeListeners||{},Ge(u,v,this._oneTimeListeners),this},An.prototype.fire=function(u,v){typeof u=="string"&&(u=new Bt(u,v||{}));var _=u.type;if(this.listens(_)){u.target=this;for(var M=0,L=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];M<L.length;M+=1)L[M].call(this,u);for(var U=0,H=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];U<H.length;U+=1){var ie=H[U];gt(_,ie,this._oneTimeListeners),ie.call(this,u)}var _e=this._eventedParent;_e&&(xe(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_e.fire(u))}else u instanceof an&&console.error(u.error);return this},An.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)},An.prototype.setEventedParent=function(u,v){return this._eventedParent=u,this._eventedParentData=v,this};var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Dt=function(u,v,_,M){this.message=(u?u+": ":"")+_,M&&(this.identifier=M),v!=null&&v.__line__&&(this.line=v.__line__)};function dn(u){var v=u.value;return v?[new Dt(u.key,v,"constants have been deprecated as of v8")]:[]}function He(u){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var M=0,L=v;M<L.length;M+=1){var U=L[M];for(var H in U)u[H]=U[H]}return u}function ei(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Tr(u){if(Array.isArray(u))return u.map(Tr);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var v={};for(var _ in u)v[_]=Tr(u[_]);return v}return ei(u)}var ii=function(u){function v(_,M){u.call(this,M),this.message=M,this.key=_}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v}(Error),Di=function(u,v){v===void 0&&(v=[]),this.parent=u,this.bindings={};for(var _=0,M=v;_<M.length;_+=1){var L=M[_];this.bindings[L[0]]=L[1]}};Di.prototype.concat=function(u){return new Di(this,u)},Di.prototype.get=function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")},Di.prototype.has=function(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)};var vi={kind:"null"},Br={kind:"number"},Gr={kind:"string"},bi={kind:"boolean"},Ni={kind:"color"},Qa={kind:"object"},Xi={kind:"value"},ao={kind:"collator"},ko={kind:"formatted"},Ba={kind:"resolvedImage"};function mi(u,v){return{kind:"array",itemType:u,N:v}}function Je(u){if(u.kind==="array"){var v=Je(u.itemType);return typeof u.N=="number"?"array<"+v+", "+u.N+">":u.itemType.kind==="value"?"array":"array<"+v+">"}return u.kind}var wt=[vi,Br,Gr,bi,Ni,ko,Qa,mi(Xi),Ba];function Kt(u,v){if(v.kind==="error")return null;if(u.kind==="array"){if(v.kind==="array"&&(v.N===0&&v.itemType.kind==="value"||!Kt(u.itemType,v.itemType))&&(typeof u.N!="number"||u.N===v.N))return null}else{if(u.kind===v.kind)return null;if(u.kind==="value"){for(var _=0,M=wt;_<M.length;_+=1)if(!Kt(M[_],v))return null}}return"Expected "+Je(u)+" but found "+Je(v)+" instead."}function Mn(u,v){return v.some(function(_){return _.kind===u.kind})}function Yn(u,v){return v.some(function(_){return _==="null"?u===null:_==="array"?Array.isArray(u):_==="object"?u&&!Array.isArray(u)&&typeof u=="object":_===typeof u})}var Gn=ne(function(u,v){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function M(ie){return(ie=Math.round(ie))<0?0:ie>255?255:ie}function L(ie){return M(ie[ie.length-1]==="%"?parseFloat(ie)/100*255:parseInt(ie))}function U(ie){return(_e=ie[ie.length-1]==="%"?parseFloat(ie)/100:parseFloat(ie))<0?0:_e>1?1:_e;var _e}function H(ie,_e,Ye){return Ye<0?Ye+=1:Ye>1&&(Ye-=1),6*Ye<1?ie+(_e-ie)*Ye*6:2*Ye<1?_e:3*Ye<2?ie+(_e-ie)*(2/3-Ye)*6:ie}try{v.parseCSSColor=function(ie){var _e,Ye=ie.replace(/ /g,"").toLowerCase();if(Ye in _)return _[Ye].slice();if(Ye[0]==="#")return Ye.length===4?(_e=parseInt(Ye.substr(1),16))>=0&&_e<=4095?[(3840&_e)>>4|(3840&_e)>>8,240&_e|(240&_e)>>4,15&_e|(15&_e)<<4,1]:null:Ye.length===7&&(_e=parseInt(Ye.substr(1),16))>=0&&_e<=16777215?[(16711680&_e)>>16,(65280&_e)>>8,255&_e,1]:null;var ot=Ye.indexOf("("),dt=Ye.indexOf(")");if(ot!==-1&&dt+1===Ye.length){var zt=Ye.substr(0,ot),Xt=Ye.substr(ot+1,dt-(ot+1)).split(","),Pn=1;switch(zt){case"rgba":if(Xt.length!==4)return null;Pn=U(Xt.pop());case"rgb":return Xt.length!==3?null:[L(Xt[0]),L(Xt[1]),L(Xt[2]),Pn];case"hsla":if(Xt.length!==4)return null;Pn=U(Xt.pop());case"hsl":if(Xt.length!==3)return null;var Ln=(parseFloat(Xt[0])%360+360)%360/360,rr=U(Xt[1]),$n=U(Xt[2]),xr=$n<=.5?$n*(rr+1):$n+rr-$n*rr,Lr=2*$n-xr;return[M(255*H(Lr,xr,Ln+1/3)),M(255*H(Lr,xr,Ln)),M(255*H(Lr,xr,Ln-1/3)),Pn];default:return null}}return null}}catch(ie){}}).parseCSSColor,Ht=function(u,v,_,M){M===void 0&&(M=1),this.r=u,this.g=v,this.b=_,this.a=M};Ht.parse=function(u){if(u){if(u instanceof Ht)return u;if(typeof u=="string"){var v=Gn(u);if(v)return new Ht(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}}},Ht.prototype.toString=function(){var u=this.toArray(),v=u[1],_=u[2],M=u[3];return"rgba("+Math.round(u[0])+","+Math.round(v)+","+Math.round(_)+","+M+")"},Ht.prototype.toArray=function(){var u=this.a;return u===0?[0,0,0,0]:[255*this.r/u,255*this.g/u,255*this.b/u,u]},Ht.black=new Ht(0,0,0,1),Ht.white=new Ht(1,1,1,1),Ht.transparent=new Ht(0,0,0,0),Ht.red=new Ht(1,0,0,1);var On=function(u,v,_){this.sensitivity=u?v?"variant":"case":v?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};On.prototype.compare=function(u,v){return this.collator.compare(u,v)},On.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Cr=function(u,v,_,M,L){this.text=u,this.image=v,this.scale=_,this.fontStack=M,this.textColor=L},Er=function(u){this.sections=u};Er.fromString=function(u){return new Er([new Cr(u,null,null,null,null)])},Er.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(u){return u.text.length!==0||u.image&&u.image.name.length!==0})},Er.factory=function(u){return u instanceof Er?u:Er.fromString(u)},Er.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(u){return u.text}).join("")},Er.prototype.serialize=function(){for(var u=["format"],v=0,_=this.sections;v<_.length;v+=1){var M=_[v];if(M.image)u.push(["image",M.image.name]);else{u.push(M.text);var L={};M.fontStack&&(L["text-font"]=["literal",M.fontStack.split(",")]),M.scale&&(L["font-scale"]=M.scale),M.textColor&&(L["text-color"]=["rgba"].concat(M.textColor.toArray())),u.push(L)}}return u};var gi=function(u){this.name=u.name,this.available=u.available};function aa(u,v,_,M){return typeof u=="number"&&u>=0&&u<=255&&typeof v=="number"&&v>=0&&v<=255&&typeof _=="number"&&_>=0&&_<=255?M===void 0||typeof M=="number"&&M>=0&&M<=1?null:"Invalid rgba value ["+[u,v,_,M].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof M=="number"?[u,v,_,M]:[u,v,_]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ya(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Ht||u instanceof On||u instanceof Er||u instanceof gi)return!0;if(Array.isArray(u)){for(var v=0,_=u;v<_.length;v+=1)if(!ya(_[v]))return!1;return!0}if(typeof u=="object"){for(var M in u)if(!ya(u[M]))return!1;return!0}return!1}function wi(u){if(u===null)return vi;if(typeof u=="string")return Gr;if(typeof u=="boolean")return bi;if(typeof u=="number")return Br;if(u instanceof Ht)return Ni;if(u instanceof On)return ao;if(u instanceof Er)return ko;if(u instanceof gi)return Ba;if(Array.isArray(u)){for(var v,_=u.length,M=0,L=u;M<L.length;M+=1){var U=wi(L[M]);if(v){if(v===U)continue;v=Xi;break}v=U}return mi(v||Xi,_)}return Qa}function sa(u){var v=typeof u;return u===null?"":v==="string"||v==="number"||v==="boolean"?String(u):u instanceof Ht||u instanceof Er||u instanceof gi?u.toString():JSON.stringify(u)}gi.prototype.toString=function(){return this.name},gi.fromString=function(u){return u?new gi({name:u,available:!1}):null},gi.prototype.serialize=function(){return["image",this.name]};var $i=function(u,v){this.type=u,this.value=v};$i.parse=function(u,v){if(u.length!==2)return v.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!ya(u[1]))return v.error("invalid value");var _=u[1],M=wi(_),L=v.expectedType;return M.kind!=="array"||M.N!==0||!L||L.kind!=="array"||typeof L.N=="number"&&L.N!==0||(M=L),new $i(M,_)},$i.prototype.evaluate=function(){return this.value},$i.prototype.eachChild=function(){},$i.prototype.outputDefined=function(){return!0},$i.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ht?["rgba"].concat(this.value.toArray()):this.value instanceof Er?this.value.serialize():this.value};var hi=function(u){this.name="ExpressionEvaluationError",this.message=u};hi.prototype.toJSON=function(){return this.message};var fa={string:Gr,number:Br,boolean:bi,object:Qa},ea=function(u,v){this.type=u,this.args=v};ea.parse=function(u,v){if(u.length<2)return v.error("Expected at least one argument.");var _,M=1,L=u[0];if(L==="array"){var U,H;if(u.length>2){var ie=u[1];if(typeof ie!="string"||!(ie in fa)||ie==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);U=fa[ie],M++}else U=Xi;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return v.error('The length argument to "array" must be a positive integer literal',2);H=u[2],M++}_=mi(U,H)}else _=fa[L];for(var _e=[];M<u.length;M++){var Ye=v.parse(u[M],M,Xi);if(!Ye)return null;_e.push(Ye)}return new ea(_,_e)},ea.prototype.evaluate=function(u){for(var v=0;v<this.args.length;v++){var _=this.args[v].evaluate(u);if(!Kt(this.type,wi(_)))return _;if(v===this.args.length-1)throw new hi("Expected value to be of type "+Je(this.type)+", but found "+Je(wi(_))+" instead.")}return null},ea.prototype.eachChild=function(u){this.args.forEach(u)},ea.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},ea.prototype.serialize=function(){var u=this.type,v=[u.kind];if(u.kind==="array"){var _=u.itemType;if(_.kind==="string"||_.kind==="number"||_.kind==="boolean"){v.push(_.kind);var M=u.N;(typeof M=="number"||this.args.length>1)&&v.push(M)}}return v.concat(this.args.map(function(L){return L.serialize()}))};var ka=function(u){this.type=ko,this.sections=u};ka.parse=function(u,v){if(u.length<2)return v.error("Expected at least one argument.");var _=u[1];if(!Array.isArray(_)&&typeof _=="object")return v.error("First argument must be an image or text section.");for(var M=[],L=!1,U=1;U<=u.length-1;++U){var H=u[U];if(L&&typeof H=="object"&&!Array.isArray(H)){L=!1;var ie=null;if(H["font-scale"]&&!(ie=v.parse(H["font-scale"],1,Br)))return null;var _e=null;if(H["text-font"]&&!(_e=v.parse(H["text-font"],1,mi(Gr))))return null;var Ye=null;if(H["text-color"]&&!(Ye=v.parse(H["text-color"],1,Ni)))return null;var ot=M[M.length-1];ot.scale=ie,ot.font=_e,ot.textColor=Ye}else{var dt=v.parse(u[U],1,Xi);if(!dt)return null;var zt=dt.type.kind;if(zt!=="string"&&zt!=="value"&&zt!=="null"&&zt!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");L=!0,M.push({content:dt,scale:null,font:null,textColor:null})}}return new ka(M)},ka.prototype.evaluate=function(u){return new Er(this.sections.map(function(v){var _=v.content.evaluate(u);return wi(_)===Ba?new Cr("",_,null,null,null):new Cr(sa(_),null,v.scale?v.scale.evaluate(u):null,v.font?v.font.evaluate(u).join(","):null,v.textColor?v.textColor.evaluate(u):null)}))},ka.prototype.eachChild=function(u){for(var v=0,_=this.sections;v<_.length;v+=1){var M=_[v];u(M.content),M.scale&&u(M.scale),M.font&&u(M.font),M.textColor&&u(M.textColor)}},ka.prototype.outputDefined=function(){return!1},ka.prototype.serialize=function(){for(var u=["format"],v=0,_=this.sections;v<_.length;v+=1){var M=_[v];u.push(M.content.serialize());var L={};M.scale&&(L["font-scale"]=M.scale.serialize()),M.font&&(L["text-font"]=M.font.serialize()),M.textColor&&(L["text-color"]=M.textColor.serialize()),u.push(L)}return u};var Bi=function(u){this.type=Ba,this.input=u};Bi.parse=function(u,v){if(u.length!==2)return v.error("Expected two arguments.");var _=v.parse(u[1],1,Gr);return _?new Bi(_):v.error("No image name provided.")},Bi.prototype.evaluate=function(u){var v=this.input.evaluate(u),_=gi.fromString(v);return _&&u.availableImages&&(_.available=u.availableImages.indexOf(v)>-1),_},Bi.prototype.eachChild=function(u){u(this.input)},Bi.prototype.outputDefined=function(){return!1},Bi.prototype.serialize=function(){return["image",this.input.serialize()]};var _a={"to-boolean":bi,"to-color":Ni,"to-number":Br,"to-string":Gr},to=function(u,v){this.type=u,this.args=v};to.parse=function(u,v){if(u.length<2)return v.error("Expected at least one argument.");var _=u[0];if((_==="to-boolean"||_==="to-string")&&u.length!==2)return v.error("Expected one argument.");for(var M=_a[_],L=[],U=1;U<u.length;U++){var H=v.parse(u[U],U,Xi);if(!H)return null;L.push(H)}return new to(M,L)},to.prototype.evaluate=function(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){for(var v,_,M=0,L=this.args;M<L.length;M+=1){if(_=null,(v=L[M].evaluate(u))instanceof Ht)return v;if(typeof v=="string"){var U=u.parseColor(v);if(U)return U}else if(Array.isArray(v)&&!(_=v.length<3||v.length>4?"Invalid rbga value "+JSON.stringify(v)+": expected an array containing either three or four numeric values.":aa(v[0],v[1],v[2],v[3])))return new Ht(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new hi(_||"Could not parse color from value '"+(typeof v=="string"?v:String(JSON.stringify(v)))+"'")}if(this.type.kind==="number"){for(var H=null,ie=0,_e=this.args;ie<_e.length;ie+=1){if((H=_e[ie].evaluate(u))===null)return 0;var Ye=Number(H);if(!isNaN(Ye))return Ye}throw new hi("Could not convert "+JSON.stringify(H)+" to number.")}return this.type.kind==="formatted"?Er.fromString(sa(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?gi.fromString(sa(this.args[0].evaluate(u))):sa(this.args[0].evaluate(u))},to.prototype.eachChild=function(u){this.args.forEach(u)},to.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},to.prototype.serialize=function(){if(this.type.kind==="formatted")return new ka([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bi(this.args[0]).serialize();var u=["to-"+this.type.kind];return this.eachChild(function(v){u.push(v.serialize())}),u};var Ae=["Unknown","Point","LineString","Polygon"],ns=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ns.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ns.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Ae[this.feature.type]:this.feature.type:null},ns.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ns.prototype.canonicalID=function(){return this.canonical},ns.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ns.prototype.parseColor=function(u){var v=this._parseColorCache[u];return v||(v=this._parseColorCache[u]=Ht.parse(u)),v};var Oo=function(u,v,_,M){this.name=u,this.type=v,this._evaluate=_,this.args=M};Oo.prototype.evaluate=function(u){return this._evaluate(u,this.args)},Oo.prototype.eachChild=function(u){this.args.forEach(u)},Oo.prototype.outputDefined=function(){return!1},Oo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))},Oo.parse=function(u,v){var _,M=u[0],L=Oo.definitions[M];if(!L)return v.error('Unknown expression "'+M+'". If you wanted a literal array, use ["literal", [...]].',0);for(var U=Array.isArray(L)?L[0]:L.type,H=Array.isArray(L)?[[L[1],L[2]]]:L.overloads,ie=H.filter(function(lo){var Ca=lo[0];return!Array.isArray(Ca)||Ca.length===u.length-1}),_e=null,Ye=0,ot=ie;Ye<ot.length;Ye+=1){var dt=ot[Ye],zt=dt[0],Xt=dt[1];_e=new Pf(v.registry,v.path,null,v.scope);for(var Pn=[],Ln=!1,rr=1;rr<u.length;rr++){var $n=u[rr],xr=Array.isArray(zt)?zt[rr-1]:zt.type,Lr=_e.parse($n,1+Pn.length,xr);if(!Lr){Ln=!0;break}Pn.push(Lr)}if(!Ln)if(Array.isArray(zt)&&zt.length!==Pn.length)_e.error("Expected "+zt.length+" arguments, but found "+Pn.length+" instead.");else{for(var Zr=0;Zr<Pn.length;Zr++){var Jr=Array.isArray(zt)?zt[Zr]:zt.type,ai=Pn[Zr];_e.concat(Zr+1).checkSubtype(Jr,ai.type)}if(_e.errors.length===0)return new Oo(M,U,Xt,Pn)}}if(ie.length===1)(_=v.errors).push.apply(_,_e.errors);else{for(var Ki=(ie.length?ie:H).map(function(lo){var Ca;return Ca=lo[0],Array.isArray(Ca)?"("+Ca.map(Je).join(", ")+")":"("+Je(Ca.type)+"...)"}).join(" | "),ca=[],Ja=1;Ja<u.length;Ja++){var Sa=v.parse(u[Ja],1+ca.length);if(!Sa)return null;ca.push(Je(Sa.type))}v.error("Expected arguments of type "+Ki+", but found ("+ca.join(", ")+") instead.")}return null},Oo.register=function(u,v){for(var _ in Oo.definitions=v,v)u[_]=Oo};var Ms=function(u,v,_){this.type=ao,this.locale=_,this.caseSensitive=u,this.diacriticSensitive=v};function ps(u,v){u[0]=Math.min(u[0],v[0]),u[1]=Math.min(u[1],v[1]),u[2]=Math.max(u[2],v[0]),u[3]=Math.max(u[3],v[1])}function jt(u,v){return!(u[0]<=v[0]||u[2]>=v[2]||u[1]<=v[1]||u[3]>=v[3])}function sn(u,v){var _=(180+u[0])/360,M=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,L=Math.pow(2,v.z);return[Math.round(_*L*8192),Math.round(M*L*8192)]}function Jn(u,v,_){return v[1]>u[1]!=_[1]>u[1]&&u[0]<(_[0]-v[0])*(u[1]-v[1])/(_[1]-v[1])+v[0]}function Xr(u,v){for(var _,M,L,U,H,ie,_e,Ye=!1,ot=0,dt=v.length;ot<dt;ot++)for(var zt=v[ot],Xt=0,Pn=zt.length;Xt<Pn-1;Xt++){if((U=(_=u)[0]-(M=zt[Xt])[0])*(_e=_[1]-(L=zt[Xt+1])[1])-(ie=_[0]-L[0])*(H=_[1]-M[1])==0&&U*ie<=0&&H*_e<=0)return!1;Jn(u,zt[Xt],zt[Xt+1])&&(Ye=!Ye)}return Ye}function Ii(u,v){for(var _=0;_<v.length;_++)if(Xr(u,v[_]))return!0;return!1}function Ea(u,v,_,M){var L=M[0]-_[0],U=M[1]-_[1],H=(u[0]-_[0])*U-L*(u[1]-_[1]),ie=(v[0]-_[0])*U-L*(v[1]-_[1]);return H>0&&ie<0||H<0&&ie>0}function co(u,v,_){for(var M=0,L=_;M<L.length;M+=1)for(var U=L[M],H=0;H<U.length-1;++H)if((dt=[(ot=U[H+1])[0]-(Ye=U[H])[0],ot[1]-Ye[1]])[0]*(zt=[(_e=v)[0]-(ie=u)[0],_e[1]-ie[1]])[1]-dt[1]*zt[0]!=0&&Ea(ie,_e,Ye,ot)&&Ea(Ye,ot,ie,_e))return!0;var ie,_e,Ye,ot,dt,zt;return!1}function Zs(u,v){for(var _=0;_<u.length;++_)if(!Xr(u[_],v))return!1;for(var M=0;M<u.length-1;++M)if(co(u[M],u[M+1],v))return!1;return!0}function Vs(u,v){for(var _=0;_<v.length;_++)if(Zs(u,v[_]))return!0;return!1}function Ds(u,v,_){for(var M=[],L=0;L<u.length;L++){for(var U=[],H=0;H<u[L].length;H++){var ie=sn(u[L][H],_);ps(v,ie),U.push(ie)}M.push(U)}return M}function vu(u,v,_){for(var M=[],L=0;L<u.length;L++){var U=Ds(u[L],v,_);M.push(U)}return M}function Rl(u,v,_,M){if(u[0]<_[0]||u[0]>_[2]){var L=.5*M,U=u[0]-_[0]>L?-M:_[0]-u[0]>L?M:0;U===0&&(U=u[0]-_[2]>L?-M:_[2]-u[0]>L?M:0),u[0]+=U}ps(v,u)}function ap(u,v,_,M){for(var L=8192*Math.pow(2,M.z),U=[8192*M.x,8192*M.y],H=[],ie=0,_e=u;ie<_e.length;ie+=1)for(var Ye=0,ot=_e[ie];Ye<ot.length;Ye+=1){var dt=ot[Ye],zt=[dt.x+U[0],dt.y+U[1]];Rl(zt,v,_,L),H.push(zt)}return H}function ph(u,v,_,M){for(var L,U=8192*Math.pow(2,M.z),H=[8192*M.x,8192*M.y],ie=[],_e=0,Ye=u;_e<Ye.length;_e+=1){for(var ot=[],dt=0,zt=Ye[_e];dt<zt.length;dt+=1){var Xt=zt[dt],Pn=[Xt.x+H[0],Xt.y+H[1]];ps(v,Pn),ot.push(Pn)}ie.push(ot)}if(v[2]-v[0]<=U/2){(L=v)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(var Ln=0,rr=ie;Ln<rr.length;Ln+=1)for(var $n=0,xr=rr[Ln];$n<xr.length;$n+=1)Rl(xr[$n],v,_,U)}return ie}Ms.parse=function(u,v){if(u.length!==2)return v.error("Expected one argument.");var _=u[1];if(typeof _!="object"||Array.isArray(_))return v.error("Collator options argument must be an object.");var M=v.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,bi);if(!M)return null;var L=v.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,bi);if(!L)return null;var U=null;return _.locale&&!(U=v.parse(_.locale,1,Gr))?null:new Ms(M,L,U)},Ms.prototype.evaluate=function(u){return new On(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)},Ms.prototype.eachChild=function(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)},Ms.prototype.outputDefined=function(){return!1},Ms.prototype.serialize=function(){var u={};return u["case-sensitive"]=this.caseSensitive.serialize(),u["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(u.locale=this.locale.serialize()),["collator",u]};var el=function(u,v){this.type=bi,this.geojson=u,this.geometries=v};function lf(u){if(u instanceof Oo&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof el)return!1;var v=!0;return u.eachChild(function(_){v&&!lf(_)&&(v=!1)}),v}function Rf(u){if(u instanceof Oo&&u.name==="feature-state")return!1;var v=!0;return u.eachChild(function(_){v&&!Rf(_)&&(v=!1)}),v}function mu(u,v){if(u instanceof Oo&&v.indexOf(u.name)>=0)return!1;var _=!0;return u.eachChild(function(M){_&&!mu(M,v)&&(_=!1)}),_}el.parse=function(u,v){if(u.length!==2)return v.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(ya(u[1])){var _=u[1];if(_.type==="FeatureCollection")for(var M=0;M<_.features.length;++M){var L=_.features[M].geometry.type;if(L==="Polygon"||L==="MultiPolygon")return new el(_,_.features[M].geometry)}else if(_.type==="Feature"){var U=_.geometry.type;if(U==="Polygon"||U==="MultiPolygon")return new el(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new el(_,_)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")},el.prototype.evaluate=function(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(v,_){var M=[1/0,1/0,-1/0,-1/0],L=[1/0,1/0,-1/0,-1/0],U=v.canonicalID();if(_.type==="Polygon"){var H=Ds(_.coordinates,L,U),ie=ap(v.geometry(),M,L,U);if(!jt(M,L))return!1;for(var _e=0,Ye=ie;_e<Ye.length;_e+=1)if(!Xr(Ye[_e],H))return!1}if(_.type==="MultiPolygon"){var ot=vu(_.coordinates,L,U),dt=ap(v.geometry(),M,L,U);if(!jt(M,L))return!1;for(var zt=0,Xt=dt;zt<Xt.length;zt+=1)if(!Ii(Xt[zt],ot))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(v,_){var M=[1/0,1/0,-1/0,-1/0],L=[1/0,1/0,-1/0,-1/0],U=v.canonicalID();if(_.type==="Polygon"){var H=Ds(_.coordinates,L,U),ie=ph(v.geometry(),M,L,U);if(!jt(M,L))return!1;for(var _e=0,Ye=ie;_e<Ye.length;_e+=1)if(!Zs(Ye[_e],H))return!1}if(_.type==="MultiPolygon"){var ot=vu(_.coordinates,L,U),dt=ph(v.geometry(),M,L,U);if(!jt(M,L))return!1;for(var zt=0,Xt=dt;zt<Xt.length;zt+=1)if(!Vs(Xt[zt],ot))return!1}return!0}(u,this.geometries)}return!1},el.prototype.eachChild=function(){},el.prototype.outputDefined=function(){return!0},el.prototype.serialize=function(){return["within",this.geojson]};var tc=function(u,v){this.type=v.type,this.name=u,this.boundExpression=v};tc.parse=function(u,v){if(u.length!==2||typeof u[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");var _=u[1];return v.scope.has(_)?new tc(_,v.scope.get(_)):v.error('Unknown variable "'+_+'". Make sure "'+_+'" has been bound in an enclosing "let" expression before using it.',1)},tc.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)},tc.prototype.eachChild=function(){},tc.prototype.outputDefined=function(){return!1},tc.prototype.serialize=function(){return["var",this.name]};var Pf=function(u,v,_,M,L){v===void 0&&(v=[]),M===void 0&&(M=new Di),L===void 0&&(L=[]),this.registry=u,this.path=v,this.key=v.map(function(U){return"["+U+"]"}).join(""),this.scope=M,this.errors=L,this.expectedType=_};function zh(u,v){for(var _,M=u.length-1,L=0,U=M,H=0;L<=U;)if((_=u[H=Math.floor((L+U)/2)])<=v){if(H===M||v<u[H+1])return H;L=H+1}else{if(!(_>v))throw new hi("Input is not a number.");U=H-1}return 0}Pf.prototype.parse=function(u,v,_,M,L){return L===void 0&&(L={}),v?this.concat(v,_,M)._parse(u,L):this._parse(u,L)},Pf.prototype._parse=function(u,v){function _(Ye,ot,dt){return dt==="assert"?new ea(ot,[Ye]):dt==="coerce"?new to(ot,[Ye]):Ye}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var M=u[0];if(typeof M!="string")return this.error("Expression name must be a string, but found "+typeof M+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var L=this.registry[M];if(L){var U=L.parse(u,this);if(!U)return null;if(this.expectedType){var H=this.expectedType,ie=U.type;if(H.kind!=="string"&&H.kind!=="number"&&H.kind!=="boolean"&&H.kind!=="object"&&H.kind!=="array"||ie.kind!=="value")if(H.kind!=="color"&&H.kind!=="formatted"&&H.kind!=="resolvedImage"||ie.kind!=="value"&&ie.kind!=="string"){if(this.checkSubtype(H,ie))return null}else U=_(U,H,v.typeAnnotation||"coerce");else U=_(U,H,v.typeAnnotation||"assert")}if(!(U instanceof $i)&&U.type.kind!=="resolvedImage"&&function Ye(ot){if(ot instanceof tc)return Ye(ot.boundExpression);if(ot instanceof Oo&&ot.name==="error"||ot instanceof Ms||ot instanceof el)return!1;var dt=ot instanceof to||ot instanceof ea,zt=!0;return ot.eachChild(function(Xt){zt=dt?zt&&Ye(Xt):zt&&Xt instanceof $i}),!!zt&&lf(ot)&&mu(ot,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(U)){var _e=new ns;try{U=new $i(U.type,U.evaluate(_e))}catch(Ye){return this.error(Ye.message),null}}return U}return this.error('Unknown expression "'+M+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof u+" instead.")},Pf.prototype.concat=function(u,v,_){var M=typeof u=="number"?this.path.concat(u):this.path,L=_?this.scope.concat(_):this.scope;return new Pf(this.registry,M,v||null,L,this.errors)},Pf.prototype.error=function(u){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];var M=""+this.key+v.map(function(L){return"["+L+"]"}).join("");this.errors.push(new ii(M,u))},Pf.prototype.checkSubtype=function(u,v){var _=Kt(u,v);return _&&this.error(_),_};var Ti=function(u,v,_){this.type=u,this.input=v,this.labels=[],this.outputs=[];for(var M=0,L=_;M<L.length;M+=1){var U=L[M],H=U[1];this.labels.push(U[0]),this.outputs.push(H)}};function za(u,v,_){return u*(1-_)+v*_}Ti.parse=function(u,v){if(u.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return v.error("Expected an even number of arguments.");var _=v.parse(u[1],1,Br);if(!_)return null;var M=[],L=null;v.expectedType&&v.expectedType.kind!=="value"&&(L=v.expectedType);for(var U=1;U<u.length;U+=2){var H=U===1?-1/0:u[U],ie=u[U+1],_e=U,Ye=U+1;if(typeof H!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(M.length&&M[M.length-1][0]>=H)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);var ot=v.parse(ie,Ye,L);if(!ot)return null;L=L||ot.type,M.push([H,ot])}return new Ti(L,_,M)},Ti.prototype.evaluate=function(u){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(u);var M=this.input.evaluate(u);if(M<=v[0])return _[0].evaluate(u);var L=v.length;return M>=v[L-1]?_[L-1].evaluate(u):_[zh(v,M)].evaluate(u)},Ti.prototype.eachChild=function(u){u(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)u(_[v])},Ti.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},Ti.prototype.serialize=function(){for(var u=["step",this.input.serialize()],v=0;v<this.labels.length;v++)v>0&&u.push(this.labels[v]),u.push(this.outputs[v].serialize());return u};var fo=Object.freeze({__proto__:null,number:za,color:function(u,v,_){return new Ht(za(u.r,v.r,_),za(u.g,v.g,_),za(u.b,v.b,_),za(u.a,v.a,_))},array:function(u,v,_){return u.map(function(M,L){return za(M,v[L],_)})}}),Ji=6/29*3*(6/29),su=Math.PI/180,If=180/Math.PI;function Uh(u){return u>.008856451679035631?Math.pow(u,1/3):u/Ji+4/29}function Od(u){return u>6/29?u*u*u:Ji*(u-4/29)}function Gf(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function id(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function op(u){var v=id(u.r),_=id(u.g),M=id(u.b),L=Uh((.4124564*v+.3575761*_+.1804375*M)/.95047),U=Uh((.2126729*v+.7151522*_+.072175*M)/1);return{l:116*U-16,a:500*(L-U),b:200*(U-Uh((.0193339*v+.119192*_+.9503041*M)/1.08883)),alpha:u.a}}function Up(u){var v=(u.l+16)/116,_=isNaN(u.a)?v:v+u.a/500,M=isNaN(u.b)?v:v-u.b/200;return v=1*Od(v),_=.95047*Od(_),M=1.08883*Od(M),new Ht(Gf(3.2404542*_-1.5371385*v-.4985314*M),Gf(-.969266*_+1.8760108*v+.041556*M),Gf(.0556434*_-.2040259*v+1.0572252*M),u.alpha)}function sp(u,v,_){var M=v-u;return u+_*(M>180||M<-180?M-360*Math.round(M/360):M)}var Xf={forward:op,reverse:Up,interpolate:function(u,v,_){return{l:za(u.l,v.l,_),a:za(u.a,v.a,_),b:za(u.b,v.b,_),alpha:za(u.alpha,v.alpha,_)}}},Cc={forward:function(u){var v=op(u),_=v.l,M=v.a,L=v.b,U=Math.atan2(L,M)*If;return{h:U<0?U+360:U,c:Math.sqrt(M*M+L*L),l:_,alpha:u.a}},reverse:function(u){var v=u.h*su,_=u.c;return Up({l:u.l,a:Math.cos(v)*_,b:Math.sin(v)*_,alpha:u.alpha})},interpolate:function(u,v,_){return{h:sp(u.h,v.h,_),c:za(u.c,v.c,_),l:za(u.l,v.l,_),alpha:za(u.alpha,v.alpha,_)}}},jp=Object.freeze({__proto__:null,lab:Xf,hcl:Cc}),hl=function(u,v,_,M,L){this.type=u,this.operator=v,this.interpolation=_,this.input=M,this.labels=[],this.outputs=[];for(var U=0,H=L;U<H.length;U+=1){var ie=H[U],_e=ie[1];this.labels.push(ie[0]),this.outputs.push(_e)}};function kf(u,v,_,M){var L=M-_,U=u-_;return L===0?0:v===1?U/L:(Math.pow(v,U)-1)/(Math.pow(v,L)-1)}hl.interpolationFactor=function(u,v,_,M){var L=0;if(u.name==="exponential")L=kf(v,u.base,_,M);else if(u.name==="linear")L=kf(v,1,_,M);else if(u.name==="cubic-bezier"){var U=u.controlPoints;L=new Q(U[0],U[1],U[2],U[3]).solve(kf(v,1,_,M))}return L},hl.parse=function(u,v){var _=u[0],M=u[1],L=u[2],U=u.slice(3);if(!Array.isArray(M)||M.length===0)return v.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){var H=M[1];if(typeof H!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:H}}else{if(M[0]!=="cubic-bezier")return v.error("Unknown interpolation type "+String(M[0]),1,0);var ie=M.slice(1);if(ie.length!==4||ie.some(function(rr){return typeof rr!="number"||rr<0||rr>1}))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ie}}if(u.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(!(L=v.parse(L,2,Br)))return null;var _e=[],Ye=null;_==="interpolate-hcl"||_==="interpolate-lab"?Ye=Ni:v.expectedType&&v.expectedType.kind!=="value"&&(Ye=v.expectedType);for(var ot=0;ot<U.length;ot+=2){var dt=U[ot],zt=U[ot+1],Xt=ot+3,Pn=ot+4;if(typeof dt!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xt);if(_e.length&&_e[_e.length-1][0]>=dt)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Xt);var Ln=v.parse(zt,Pn,Ye);if(!Ln)return null;Ye=Ye||Ln.type,_e.push([dt,Ln])}return Ye.kind==="number"||Ye.kind==="color"||Ye.kind==="array"&&Ye.itemType.kind==="number"&&typeof Ye.N=="number"?new hl(Ye,_,M,L,_e):v.error("Type "+Je(Ye)+" is not interpolatable.")},hl.prototype.evaluate=function(u){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(u);var M=this.input.evaluate(u);if(M<=v[0])return _[0].evaluate(u);var L=v.length;if(M>=v[L-1])return _[L-1].evaluate(u);var U=zh(v,M),H=hl.interpolationFactor(this.interpolation,M,v[U],v[U+1]),ie=_[U].evaluate(u),_e=_[U+1].evaluate(u);return this.operator==="interpolate"?fo[this.type.kind.toLowerCase()](ie,_e,H):this.operator==="interpolate-hcl"?Cc.reverse(Cc.interpolate(Cc.forward(ie),Cc.forward(_e),H)):Xf.reverse(Xf.interpolate(Xf.forward(ie),Xf.forward(_e),H))},hl.prototype.eachChild=function(u){u(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)u(_[v])},hl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},hl.prototype.serialize=function(){var u;u=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var v=[this.operator,u,this.input.serialize()],_=0;_<this.labels.length;_++)v.push(this.labels[_],this.outputs[_].serialize());return v};var Yf=function(u,v){this.type=u,this.args=v};Yf.parse=function(u,v){if(u.length<2)return v.error("Expectected at least one argument.");var _=null,M=v.expectedType;M&&M.kind!=="value"&&(_=M);for(var L=[],U=0,H=u.slice(1);U<H.length;U+=1){var ie=v.parse(H[U],1+L.length,_,void 0,{typeAnnotation:"omit"});if(!ie)return null;_=_||ie.type,L.push(ie)}var _e=M&&L.some(function(Ye){return Kt(M,Ye.type)});return new Yf(_e?Xi:_,L)},Yf.prototype.evaluate=function(u){for(var v,_=null,M=0,L=0,U=this.args;L<U.length&&(M++,(_=U[L].evaluate(u))&&_ instanceof gi&&!_.available&&(v||(v=_.name),_=null,M===this.args.length&&(_=v)),_===null);L+=1);return _},Yf.prototype.eachChild=function(u){this.args.forEach(u)},Yf.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Yf.prototype.serialize=function(){var u=["coalesce"];return this.eachChild(function(v){u.push(v.serialize())}),u};var _l=function(u,v){this.type=v.type,this.bindings=[].concat(u),this.result=v};_l.prototype.evaluate=function(u){return this.result.evaluate(u)},_l.prototype.eachChild=function(u){for(var v=0,_=this.bindings;v<_.length;v+=1)u(_[v][1]);u(this.result)},_l.parse=function(u,v){if(u.length<4)return v.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var _=[],M=1;M<u.length-1;M+=2){var L=u[M];if(typeof L!="string")return v.error("Expected string, but found "+typeof L+" instead.",M);if(/[^a-zA-Z0-9_]/.test(L))return v.error("Variable names must contain only alphanumeric characters or '_'.",M);var U=v.parse(u[M+1],M+1);if(!U)return null;_.push([L,U])}var H=v.parse(u[u.length-1],u.length-1,v.expectedType,_);return H?new _l(_,H):null},_l.prototype.outputDefined=function(){return this.result.outputDefined()},_l.prototype.serialize=function(){for(var u=["let"],v=0,_=this.bindings;v<_.length;v+=1){var M=_[v];u.push(M[0],M[1].serialize())}return u.push(this.result.serialize()),u};var pc=function(u,v,_){this.type=u,this.index=v,this.input=_};pc.parse=function(u,v){if(u.length!==3)return v.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var _=v.parse(u[1],1,Br),M=v.parse(u[2],2,mi(v.expectedType||Xi));return _&&M?new pc(M.type.itemType,_,M):null},pc.prototype.evaluate=function(u){var v=this.index.evaluate(u),_=this.input.evaluate(u);if(v<0)throw new hi("Array index out of bounds: "+v+" < 0.");if(v>=_.length)throw new hi("Array index out of bounds: "+v+" > "+(_.length-1)+".");if(v!==Math.floor(v))throw new hi("Array index must be an integer, but found "+v+" instead.");return _[v]},pc.prototype.eachChild=function(u){u(this.index),u(this.input)},pc.prototype.outputDefined=function(){return!1},pc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var vc=function(u,v){this.type=bi,this.needle=u,this.haystack=v};vc.parse=function(u,v){if(u.length!==3)return v.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var _=v.parse(u[1],1,Xi),M=v.parse(u[2],2,Xi);return _&&M?Mn(_.type,[bi,Gr,Br,vi,Xi])?new vc(_,M):v.error("Expected first argument to be of type boolean, string, number or null, but found "+Je(_.type)+" instead"):null},vc.prototype.evaluate=function(u){var v=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!_)return!1;if(!Yn(v,["boolean","string","number","null"]))throw new hi("Expected first argument to be of type boolean, string, number or null, but found "+Je(wi(v))+" instead.");if(!Yn(_,["string","array"]))throw new hi("Expected second argument to be of type array or string, but found "+Je(wi(_))+" instead.");return _.indexOf(v)>=0},vc.prototype.eachChild=function(u){u(this.needle),u(this.haystack)},vc.prototype.outputDefined=function(){return!0},vc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Oc=function(u,v,_){this.type=Br,this.needle=u,this.haystack=v,this.fromIndex=_};Oc.parse=function(u,v){if(u.length<=2||u.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var _=v.parse(u[1],1,Xi),M=v.parse(u[2],2,Xi);if(!_||!M)return null;if(!Mn(_.type,[bi,Gr,Br,vi,Xi]))return v.error("Expected first argument to be of type boolean, string, number or null, but found "+Je(_.type)+" instead");if(u.length===4){var L=v.parse(u[3],3,Br);return L?new Oc(_,M,L):null}return new Oc(_,M)},Oc.prototype.evaluate=function(u){var v=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!Yn(v,["boolean","string","number","null"]))throw new hi("Expected first argument to be of type boolean, string, number or null, but found "+Je(wi(v))+" instead.");if(!Yn(_,["string","array"]))throw new hi("Expected second argument to be of type array or string, but found "+Je(wi(_))+" instead.");if(this.fromIndex){var M=this.fromIndex.evaluate(u);return _.indexOf(v,M)}return _.indexOf(v)},Oc.prototype.eachChild=function(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)},Oc.prototype.outputDefined=function(){return!1},Oc.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var u=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var bl=function(u,v,_,M,L,U){this.inputType=u,this.type=v,this.input=_,this.cases=M,this.outputs=L,this.otherwise=U};bl.parse=function(u,v){if(u.length<5)return v.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(u.length%2!=1)return v.error("Expected an even number of arguments.");var _,M;v.expectedType&&v.expectedType.kind!=="value"&&(M=v.expectedType);for(var L={},U=[],H=2;H<u.length-1;H+=2){var ie=u[H],_e=u[H+1];Array.isArray(ie)||(ie=[ie]);var Ye=v.concat(H);if(ie.length===0)return Ye.error("Expected at least one branch label.");for(var ot=0,dt=ie;ot<dt.length;ot+=1){var zt=dt[ot];if(typeof zt!="number"&&typeof zt!="string")return Ye.error("Branch labels must be numbers or strings.");if(typeof zt=="number"&&Math.abs(zt)>Number.MAX_SAFE_INTEGER)return Ye.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof zt=="number"&&Math.floor(zt)!==zt)return Ye.error("Numeric branch labels must be integer values.");if(_){if(Ye.checkSubtype(_,wi(zt)))return null}else _=wi(zt);if(L[String(zt)]!==void 0)return Ye.error("Branch labels must be unique.");L[String(zt)]=U.length}var Xt=v.parse(_e,H,M);if(!Xt)return null;M=M||Xt.type,U.push(Xt)}var Pn=v.parse(u[1],1,Xi);if(!Pn)return null;var Ln=v.parse(u[u.length-1],u.length-1,M);return Ln?Pn.type.kind!=="value"&&v.concat(1).checkSubtype(_,Pn.type)?null:new bl(_,M,Pn,L,U,Ln):null},bl.prototype.evaluate=function(u){var v=this.input.evaluate(u);return(wi(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(u)},bl.prototype.eachChild=function(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)},bl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()},bl.prototype.serialize=function(){for(var u=this,v=["match",this.input.serialize()],_=[],M={},L=0,U=Object.keys(this.cases).sort();L<U.length;L+=1){var H=U[L];(dt=M[this.cases[H]])===void 0?(M[this.cases[H]]=_.length,_.push([this.cases[H],[H]])):_[dt][1].push(H)}for(var ie=function(Xt){return u.inputType.kind==="number"?Number(Xt):Xt},_e=0,Ye=_;_e<Ye.length;_e+=1){var ot=Ye[_e],dt=ot[0],zt=ot[1];v.push(zt.length===1?ie(zt[0]):zt.map(ie)),v.push(this.outputs[outputIndex$1].serialize())}return v.push(this.otherwise.serialize()),v};var cf=function(u,v,_){this.type=u,this.branches=v,this.otherwise=_};cf.parse=function(u,v){if(u.length<4)return v.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(u.length%2!=0)return v.error("Expected an odd number of arguments.");var _;v.expectedType&&v.expectedType.kind!=="value"&&(_=v.expectedType);for(var M=[],L=1;L<u.length-1;L+=2){var U=v.parse(u[L],L,bi);if(!U)return null;var H=v.parse(u[L+1],L+1,_);if(!H)return null;M.push([U,H]),_=_||H.type}var ie=v.parse(u[u.length-1],u.length-1,_);return ie?new cf(_,M,ie):null},cf.prototype.evaluate=function(u){for(var v=0,_=this.branches;v<_.length;v+=1){var M=_[v],L=M[1];if(M[0].evaluate(u))return L.evaluate(u)}return this.otherwise.evaluate(u)},cf.prototype.eachChild=function(u){for(var v=0,_=this.branches;v<_.length;v+=1){var M=_[v],L=M[1];u(M[0]),u(L)}u(this.otherwise)},cf.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()},cf.prototype.serialize=function(){var u=["case"];return this.eachChild(function(v){u.push(v.serialize())}),u};var ff=function(u,v,_,M){this.type=u,this.input=v,this.beginIndex=_,this.endIndex=M};function ad(u,v){return u==="=="||u==="!="?v.kind==="boolean"||v.kind==="string"||v.kind==="number"||v.kind==="null"||v.kind==="value":v.kind==="string"||v.kind==="number"||v.kind==="value"}function od(u,v,_,M){return M.compare(v,_)===0}function _s(u,v,_){var M=u!=="=="&&u!=="!=";return function(){function L(U,H,ie){this.type=bi,this.lhs=U,this.rhs=H,this.collator=ie,this.hasUntypedArgument=U.type.kind==="value"||H.type.kind==="value"}return L.parse=function(U,H){if(U.length!==3&&U.length!==4)return H.error("Expected two or three arguments.");var ie=U[0],_e=H.parse(U[1],1,Xi);if(!_e)return null;if(!ad(ie,_e.type))return H.concat(1).error('"'+ie+`" comparisons are not supported for type '`+Je(_e.type)+"'.");var Ye=H.parse(U[2],2,Xi);if(!Ye)return null;if(!ad(ie,Ye.type))return H.concat(2).error('"'+ie+`" comparisons are not supported for type '`+Je(Ye.type)+"'.");if(_e.type.kind!==Ye.type.kind&&_e.type.kind!=="value"&&Ye.type.kind!=="value")return H.error("Cannot compare types '"+Je(_e.type)+"' and '"+Je(Ye.type)+"'.");M&&(_e.type.kind==="value"&&Ye.type.kind!=="value"?_e=new ea(Ye.type,[_e]):_e.type.kind!=="value"&&Ye.type.kind==="value"&&(Ye=new ea(_e.type,[Ye])));var ot=null;if(U.length===4){if(_e.type.kind!=="string"&&Ye.type.kind!=="string"&&_e.type.kind!=="value"&&Ye.type.kind!=="value")return H.error("Cannot use collator to compare non-string types.");if(!(ot=H.parse(U[3],3,ao)))return null}return new L(_e,Ye,ot)},L.prototype.evaluate=function(U){var H=this.lhs.evaluate(U),ie=this.rhs.evaluate(U);if(M&&this.hasUntypedArgument){var _e=wi(H),Ye=wi(ie);if(_e.kind!==Ye.kind||_e.kind!=="string"&&_e.kind!=="number")throw new hi('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+_e.kind+", "+Ye.kind+") instead.")}if(this.collator&&!M&&this.hasUntypedArgument){var ot=wi(H),dt=wi(ie);if(ot.kind!=="string"||dt.kind!=="string")return v(U,H,ie)}return this.collator?_(U,H,ie,this.collator.evaluate(U)):v(U,H,ie)},L.prototype.eachChild=function(U){U(this.lhs),U(this.rhs),this.collator&&U(this.collator)},L.prototype.outputDefined=function(){return!0},L.prototype.serialize=function(){var U=[u];return this.eachChild(function(H){U.push(H.serialize())}),U},L}()}ff.parse=function(u,v){if(u.length<=2||u.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var _=v.parse(u[1],1,Xi),M=v.parse(u[2],2,Br);if(!_||!M)return null;if(!Mn(_.type,[mi(Xi),Gr,Xi]))return v.error("Expected first argument to be of type array or string, but found "+Je(_.type)+" instead");if(u.length===4){var L=v.parse(u[3],3,Br);return L?new ff(_.type,_,M,L):null}return new ff(_.type,_,M)},ff.prototype.evaluate=function(u){var v=this.input.evaluate(u),_=this.beginIndex.evaluate(u);if(!Yn(v,["string","array"]))throw new hi("Expected first argument to be of type array or string, but found "+Je(wi(v))+" instead.");if(this.endIndex){var M=this.endIndex.evaluate(u);return v.slice(_,M)}return v.slice(_)},ff.prototype.eachChild=function(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)},ff.prototype.outputDefined=function(){return!1},ff.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var mv=_s("==",function(u,v,_){return v===_},od),sd=_s("!=",function(u,v,_){return v!==_},function(u,v,_,M){return!od(0,v,_,M)}),vh=_s("<",function(u,v,_){return v<_},function(u,v,_,M){return M.compare(v,_)<0}),Hs=_s(">",function(u,v,_){return v>_},function(u,v,_,M){return M.compare(v,_)>0}),up=_s("<=",function(u,v,_){return v<=_},function(u,v,_,M){return M.compare(v,_)<=0}),lp=_s(">=",function(u,v,_){return v>=_},function(u,v,_,M){return M.compare(v,_)>=0}),ku=function(u,v,_,M,L){this.type=Gr,this.number=u,this.locale=v,this.currency=_,this.minFractionDigits=M,this.maxFractionDigits=L};ku.parse=function(u,v){if(u.length!==3)return v.error("Expected two arguments.");var _=v.parse(u[1],1,Br);if(!_)return null;var M=u[2];if(typeof M!="object"||Array.isArray(M))return v.error("NumberFormat options argument must be an object.");var L=null;if(M.locale&&!(L=v.parse(M.locale,1,Gr)))return null;var U=null;if(M.currency&&!(U=v.parse(M.currency,1,Gr)))return null;var H=null;if(M["min-fraction-digits"]&&!(H=v.parse(M["min-fraction-digits"],1,Br)))return null;var ie=null;return M["max-fraction-digits"]&&!(ie=v.parse(M["max-fraction-digits"],1,Br))?null:new ku(_,L,U,H,ie)},ku.prototype.evaluate=function(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))},ku.prototype.eachChild=function(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)},ku.prototype.outputDefined=function(){return!1},ku.prototype.serialize=function(){var u={};return this.locale&&(u.locale=this.locale.serialize()),this.currency&&(u.currency=this.currency.serialize()),this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),u]};var qc=function(u){this.type=Br,this.input=u};qc.parse=function(u,v){if(u.length!==2)return v.error("Expected 1 argument, but found "+(u.length-1)+" instead.");var _=v.parse(u[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?v.error("Expected argument of type string or array, but found "+Je(_.type)+" instead."):new qc(_):null},qc.prototype.evaluate=function(u){var v=this.input.evaluate(u);if(typeof v=="string"||Array.isArray(v))return v.length;throw new hi("Expected value to be of type string or array, but found "+Je(wi(v))+" instead.")},qc.prototype.eachChild=function(u){u(this.input)},qc.prototype.outputDefined=function(){return!1},qc.prototype.serialize=function(){var u=["length"];return this.eachChild(function(v){u.push(v.serialize())}),u};var mc={"==":mv,"!=":sd,">":Hs,"<":vh,">=":lp,"<=":up,array:ea,at:pc,boolean:ea,case:cf,coalesce:Yf,collator:Ms,format:ka,image:Bi,in:vc,"index-of":Oc,interpolate:hl,"interpolate-hcl":hl,"interpolate-lab":hl,length:qc,let:_l,literal:$i,match:bl,number:ea,"number-format":ku,object:ea,slice:ff,step:Ti,string:ea,"to-boolean":to,"to-color":to,"to-number":to,"to-string":to,var:tc,within:el};function nc(u,v){var _=v[0],M=v[1],L=v[2],U=v[3];_=_.evaluate(u),M=M.evaluate(u),L=L.evaluate(u);var H=U?U.evaluate(u):1,ie=aa(_,M,L,H);if(ie)throw new hi(ie);return new Ht(_/255*H,M/255*H,L/255*H,H)}function jh(u,v){return u in v}function qf(u,v){var _=v[u];return _===void 0?null:_}function gc(u){return{type:u}}function Kf(u){return{result:"success",value:u}}function Lf(u){return{result:"error",value:u}}function rc(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Lu(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Ts(u){return!!u.expression&&u.expression.interpolated}function Ws(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Mc(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Zp(u){return u}function hf(u,v,_){return u!==void 0?u:v!==void 0?v:_!==void 0?_:void 0}function Zh(u,v,_,M,L){return hf(typeof _===L?M[_]:void 0,u.default,v.default)}function mh(u,v,_){if(Ws(_)!=="number")return hf(u.default,v.default);var M=u.stops.length;if(M===1||_<=u.stops[0][0])return u.stops[0][1];if(_>=u.stops[M-1][0])return u.stops[M-1][1];var L=zh(u.stops.map(function(U){return U[0]}),_);return u.stops[L][1]}function xl(u,v,_){var M=u.base!==void 0?u.base:1;if(Ws(_)!=="number")return hf(u.default,v.default);var L=u.stops.length;if(L===1||_<=u.stops[0][0])return u.stops[0][1];if(_>=u.stops[L-1][0])return u.stops[L-1][1];var U=zh(u.stops.map(function(dt){return dt[0]}),_),H=function(dt,zt,Xt,Pn){var Ln=Pn-Xt,rr=dt-Xt;return Ln===0?0:zt===1?rr/Ln:(Math.pow(zt,rr)-1)/(Math.pow(zt,Ln)-1)}(_,M,u.stops[U][0],u.stops[U+1][0]),ie=u.stops[U][1],_e=u.stops[U+1][1],Ye=fo[v.type]||Zp;if(u.colorSpace&&u.colorSpace!=="rgb"){var ot=jp[u.colorSpace];Ye=function(dt,zt){return ot.reverse(ot.interpolate(ot.forward(dt),ot.forward(zt),H))}}return typeof ie.evaluate=="function"?{evaluate:function(){for(var dt=[],zt=arguments.length;zt--;)dt[zt]=arguments[zt];var Xt=ie.evaluate.apply(void 0,dt),Pn=_e.evaluate.apply(void 0,dt);if(Xt!==void 0&&Pn!==void 0)return Ye(Xt,Pn,H)}}:Ye(ie,_e,H)}function Kc(u,v,_){return v.type==="color"?_=Ht.parse(_):v.type==="formatted"?_=Er.fromString(_.toString()):v.type==="resolvedImage"?_=gi.fromString(_.toString()):Ws(_)===v.type||v.type==="enum"&&v.values[_]||(_=void 0),hf(_,u.default,v.default)}Oo.register(mc,{error:[{kind:"error"},[Gr],function(u,v){throw new hi(v[0].evaluate(u))}],typeof:[Gr,[Xi],function(u,v){return Je(wi(v[0].evaluate(u)))}],"to-rgba":[mi(Br,4),[Ni],function(u,v){return v[0].evaluate(u).toArray()}],rgb:[Ni,[Br,Br,Br],nc],rgba:[Ni,[Br,Br,Br,Br],nc],has:{type:bi,overloads:[[[Gr],function(u,v){return jh(v[0].evaluate(u),u.properties())}],[[Gr,Qa],function(u,v){var _=v[1];return jh(v[0].evaluate(u),_.evaluate(u))}]]},get:{type:Xi,overloads:[[[Gr],function(u,v){return qf(v[0].evaluate(u),u.properties())}],[[Gr,Qa],function(u,v){var _=v[1];return qf(v[0].evaluate(u),_.evaluate(u))}]]},"feature-state":[Xi,[Gr],function(u,v){return qf(v[0].evaluate(u),u.featureState||{})}],properties:[Qa,[],function(u){return u.properties()}],"geometry-type":[Gr,[],function(u){return u.geometryType()}],id:[Xi,[],function(u){return u.id()}],zoom:[Br,[],function(u){return u.globals.zoom}],"heatmap-density":[Br,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[Br,[],function(u){return u.globals.lineProgress||0}],accumulated:[Xi,[],function(u){return u.globals.accumulated===void 0?null:u.globals.accumulated}],"+":[Br,gc(Br),function(u,v){for(var _=0,M=0,L=v;M<L.length;M+=1)_+=L[M].evaluate(u);return _}],"*":[Br,gc(Br),function(u,v){for(var _=1,M=0,L=v;M<L.length;M+=1)_*=L[M].evaluate(u);return _}],"-":{type:Br,overloads:[[[Br,Br],function(u,v){var _=v[1];return v[0].evaluate(u)-_.evaluate(u)}],[[Br],function(u,v){return-v[0].evaluate(u)}]]},"/":[Br,[Br,Br],function(u,v){var _=v[1];return v[0].evaluate(u)/_.evaluate(u)}],"%":[Br,[Br,Br],function(u,v){var _=v[1];return v[0].evaluate(u)%_.evaluate(u)}],ln2:[Br,[],function(){return Math.LN2}],pi:[Br,[],function(){return Math.PI}],e:[Br,[],function(){return Math.E}],"^":[Br,[Br,Br],function(u,v){var _=v[1];return Math.pow(v[0].evaluate(u),_.evaluate(u))}],sqrt:[Br,[Br],function(u,v){return Math.sqrt(v[0].evaluate(u))}],log10:[Br,[Br],function(u,v){return Math.log(v[0].evaluate(u))/Math.LN10}],ln:[Br,[Br],function(u,v){return Math.log(v[0].evaluate(u))}],log2:[Br,[Br],function(u,v){return Math.log(v[0].evaluate(u))/Math.LN2}],sin:[Br,[Br],function(u,v){return Math.sin(v[0].evaluate(u))}],cos:[Br,[Br],function(u,v){return Math.cos(v[0].evaluate(u))}],tan:[Br,[Br],function(u,v){return Math.tan(v[0].evaluate(u))}],asin:[Br,[Br],function(u,v){return Math.asin(v[0].evaluate(u))}],acos:[Br,[Br],function(u,v){return Math.acos(v[0].evaluate(u))}],atan:[Br,[Br],function(u,v){return Math.atan(v[0].evaluate(u))}],min:[Br,gc(Br),function(u,v){return Math.min.apply(Math,v.map(function(_){return _.evaluate(u)}))}],max:[Br,gc(Br),function(u,v){return Math.max.apply(Math,v.map(function(_){return _.evaluate(u)}))}],abs:[Br,[Br],function(u,v){return Math.abs(v[0].evaluate(u))}],round:[Br,[Br],function(u,v){var _=v[0].evaluate(u);return _<0?-Math.round(-_):Math.round(_)}],floor:[Br,[Br],function(u,v){return Math.floor(v[0].evaluate(u))}],ceil:[Br,[Br],function(u,v){return Math.ceil(v[0].evaluate(u))}],"filter-==":[bi,[Gr,Xi],function(u,v){var _=v[0],M=v[1];return u.properties()[_.value]===M.value}],"filter-id-==":[bi,[Xi],function(u,v){var _=v[0];return u.id()===_.value}],"filter-type-==":[bi,[Gr],function(u,v){var _=v[0];return u.geometryType()===_.value}],"filter-<":[bi,[Gr,Xi],function(u,v){var _=v[0],M=v[1],L=u.properties()[_.value],U=M.value;return typeof L==typeof U&&L<U}],"filter-id-<":[bi,[Xi],function(u,v){var _=v[0],M=u.id(),L=_.value;return typeof M==typeof L&&M<L}],"filter->":[bi,[Gr,Xi],function(u,v){var _=v[0],M=v[1],L=u.properties()[_.value],U=M.value;return typeof L==typeof U&&L>U}],"filter-id->":[bi,[Xi],function(u,v){var _=v[0],M=u.id(),L=_.value;return typeof M==typeof L&&M>L}],"filter-<=":[bi,[Gr,Xi],function(u,v){var _=v[0],M=v[1],L=u.properties()[_.value],U=M.value;return typeof L==typeof U&&L<=U}],"filter-id-<=":[bi,[Xi],function(u,v){var _=v[0],M=u.id(),L=_.value;return typeof M==typeof L&&M<=L}],"filter->=":[bi,[Gr,Xi],function(u,v){var _=v[0],M=v[1],L=u.properties()[_.value],U=M.value;return typeof L==typeof U&&L>=U}],"filter-id->=":[bi,[Xi],function(u,v){var _=v[0],M=u.id(),L=_.value;return typeof M==typeof L&&M>=L}],"filter-has":[bi,[Xi],function(u,v){return v[0].value in u.properties()}],"filter-has-id":[bi,[],function(u){return u.id()!==null&&u.id()!==void 0}],"filter-type-in":[bi,[mi(Gr)],function(u,v){return v[0].value.indexOf(u.geometryType())>=0}],"filter-id-in":[bi,[mi(Xi)],function(u,v){return v[0].value.indexOf(u.id())>=0}],"filter-in-small":[bi,[Gr,mi(Xi)],function(u,v){var _=v[0];return v[1].value.indexOf(u.properties()[_.value])>=0}],"filter-in-large":[bi,[Gr,mi(Xi)],function(u,v){var _=v[0],M=v[1];return function(L,U,H,ie){for(;H<=ie;){var _e=H+ie>>1;if(U[_e]===L)return!0;U[_e]>L?ie=_e-1:H=_e+1}return!1}(u.properties()[_.value],M.value,0,M.value.length-1)}],all:{type:bi,overloads:[[[bi,bi],function(u,v){var _=v[1];return v[0].evaluate(u)&&_.evaluate(u)}],[gc(bi),function(u,v){for(var _=0,M=v;_<M.length;_+=1)if(!M[_].evaluate(u))return!1;return!0}]]},any:{type:bi,overloads:[[[bi,bi],function(u,v){var _=v[1];return v[0].evaluate(u)||_.evaluate(u)}],[gc(bi),function(u,v){for(var _=0,M=v;_<M.length;_+=1)if(M[_].evaluate(u))return!0;return!1}]]},"!":[bi,[bi],function(u,v){return!v[0].evaluate(u)}],"is-supported-script":[bi,[Gr],function(u,v){var _=u.globals&&u.globals.isSupportedScript;return!_||_(v[0].evaluate(u))}],upcase:[Gr,[Gr],function(u,v){return v[0].evaluate(u).toUpperCase()}],downcase:[Gr,[Gr],function(u,v){return v[0].evaluate(u).toLowerCase()}],concat:[Gr,gc(Xi),function(u,v){return v.map(function(_){return sa(_.evaluate(u))}).join("")}],"resolved-locale":[Gr,[ao],function(u,v){return v[0].evaluate(u).resolvedLocale()}]});var Rc=function(u,v){this.expression=u,this._warningHistory={},this._evaluator=new ns,this._defaultValue=v?function(_){return _.type==="color"&&Mc(_.default)?new Ht(0,0,0,0):_.type==="color"?Ht.parse(_.default)||null:_.default===void 0?null:_.default}(v):null,this._enumValues=v&&v.type==="enum"?v.values:null};function df(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in mc}function Wu(u,v){var _=new Pf(mc,[],v?function(L){var U={color:Ni,string:Gr,number:Br,enum:Gr,boolean:bi,formatted:ko,resolvedImage:Ba};return L.type==="array"?mi(U[L.value]||Xi,L.length):U[L.type]}(v):void 0),M=_.parse(u,void 0,void 0,void 0,v&&v.type==="string"?{typeAnnotation:"coerce"}:void 0);return M?Kf(new Rc(M,v)):Lf(_.errors)}Rc.prototype.evaluateWithoutErrorHandling=function(u,v,_,M,L,U){return this._evaluator.globals=u,this._evaluator.feature=v,this._evaluator.featureState=_,this._evaluator.canonical=M,this._evaluator.availableImages=L||null,this._evaluator.formattedSection=U,this.expression.evaluate(this._evaluator)},Rc.prototype.evaluate=function(u,v,_,M,L,U){this._evaluator.globals=u,this._evaluator.feature=v||null,this._evaluator.featureState=_||null,this._evaluator.canonical=M,this._evaluator.availableImages=L||null,this._evaluator.formattedSection=U||null;try{var H=this.expression.evaluate(this._evaluator);if(H==null||typeof H=="number"&&H!=H)return this._defaultValue;if(this._enumValues&&!(H in this._enumValues))throw new hi("Expected value to be one of "+Object.keys(this._enumValues).map(function(ie){return JSON.stringify(ie)}).join(", ")+", but found "+JSON.stringify(H)+" instead.");return H}catch(ie){return this._warningHistory[ie.message]||(this._warningHistory[ie.message]=!0,typeof console!="undefined"&&console.warn(ie.message)),this._defaultValue}};var gh=function(u,v){this.kind=u,this._styleExpression=v,this.isStateDependent=u!=="constant"&&!Rf(v.expression)};gh.prototype.evaluateWithoutErrorHandling=function(u,v,_,M,L,U){return this._styleExpression.evaluateWithoutErrorHandling(u,v,_,M,L,U)},gh.prototype.evaluate=function(u,v,_,M,L,U){return this._styleExpression.evaluate(u,v,_,M,L,U)};var pf=function(u,v,_,M){this.kind=u,this.zoomStops=_,this._styleExpression=v,this.isStateDependent=u!=="camera"&&!Rf(v.expression),this.interpolationType=M};function Vh(u,v){if((u=Wu(u,v)).result==="error")return u;var _=u.value.expression,M=lf(_);if(!M&&!rc(v))return Lf([new ii("","data expressions not supported")]);var L=mu(_,["zoom"]);if(!L&&!Lu(v))return Lf([new ii("","zoom expressions not supported")]);var U=function H(ie){var _e=null;if(ie instanceof _l)_e=H(ie.result);else if(ie instanceof Yf)for(var Ye=0,ot=ie.args;Ye<ot.length&&!(_e=H(ot[Ye]));Ye+=1);else(ie instanceof Ti||ie instanceof hl)&&ie.input instanceof Oo&&ie.input.name==="zoom"&&(_e=ie);return _e instanceof ii||ie.eachChild(function(dt){var zt=H(dt);zt instanceof ii?_e=zt:!_e&&zt?_e=new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_e&&zt&&_e!==zt&&(_e=new ii("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_e}(_);return U||L?U instanceof ii?Lf([U]):U instanceof hl&&!Ts(v)?Lf([new ii("",'"interpolate" expressions cannot be used with this property')]):Kf(U?new pf(M?"camera":"composite",u.value,U.labels,U instanceof hl?U.interpolation:void 0):new gh(M?"constant":"source",u.value)):Lf([new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}pf.prototype.evaluateWithoutErrorHandling=function(u,v,_,M,L,U){return this._styleExpression.evaluateWithoutErrorHandling(u,v,_,M,L,U)},pf.prototype.evaluate=function(u,v,_,M,L,U){return this._styleExpression.evaluate(u,v,_,M,L,U)},pf.prototype.interpolationFactor=function(u,v,_){return this.interpolationType?hl.interpolationFactor(this.interpolationType,u,v,_):0};var Qc=function(u,v){this._parameters=u,this._specification=v,He(this,function _(M,L){var U,H,ie,_e=L.type==="color",Ye=M.stops&&typeof M.stops[0][0]=="object",ot=Ye||!(Ye||M.property!==void 0),dt=M.type||(Ts(L)?"exponential":"interval");if(_e&&((M=He({},M)).stops&&(M.stops=M.stops.map(function(Sa){return[Sa[0],Ht.parse(Sa[1])]})),M.default=Ht.parse(M.default?M.default:L.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!jp[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(dt==="exponential")U=xl;else if(dt==="interval")U=mh;else if(dt==="categorical"){U=Zh,H=Object.create(null);for(var zt=0,Xt=M.stops;zt<Xt.length;zt+=1){var Pn=Xt[zt];H[Pn[0]]=Pn[1]}ie=typeof M.stops[0][0]}else{if(dt!=="identity")throw new Error('Unknown function type "'+dt+'"');U=Kc}if(Ye){for(var Ln={},rr=[],$n=0;$n<M.stops.length;$n++){var xr=M.stops[$n],Lr=xr[0].zoom;Ln[Lr]===void 0&&(Ln[Lr]={zoom:Lr,type:M.type,property:M.property,default:M.default,stops:[]},rr.push(Lr)),Ln[Lr].stops.push([xr[0].value,xr[1]])}for(var Zr=[],Jr=0,ai=rr;Jr<ai.length;Jr+=1){var Ki=ai[Jr];Zr.push([Ln[Ki].zoom,_(Ln[Ki],L)])}var ca={name:"linear"};return{kind:"composite",interpolationType:ca,interpolationFactor:hl.interpolationFactor.bind(void 0,ca),zoomStops:Zr.map(function(Sa){return Sa[0]}),evaluate:function(Sa,lo){var Ca=Sa.zoom;return xl({stops:Zr,base:M.base},L,Ca).evaluate(Ca,lo)}}}if(ot){var Ja=dt==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:Ja,interpolationFactor:hl.interpolationFactor.bind(void 0,Ja),zoomStops:M.stops.map(function(Sa){return Sa[0]}),evaluate:function(Sa){return U(M,L,Sa.zoom,H,ie)}}}return{kind:"source",evaluate:function(Sa,lo){var Ca=lo&&lo.properties?lo.properties[M.property]:void 0;return Ca===void 0?hf(M.default,L.default):U(M,L,Ca,H,ie)}}}(this._parameters,this._specification))};function Pl(u){var v=u.key,_=u.value,M=u.valueSpec||{},L=u.objectElementValidators||{},U=u.style,H=u.styleSpec,ie=[],_e=Ws(_);if(_e!=="object")return[new Dt(v,_,"object expected, "+_e+" found")];for(var Ye in _){var ot=Ye.split(".")[0],dt=M[ot]||M["*"],zt=void 0;if(L[ot])zt=L[ot];else if(M[ot])zt=is;else if(L["*"])zt=L["*"];else{if(!M["*"]){ie.push(new Dt(v,_[Ye],'unknown property "'+Ye+'"'));continue}zt=is}ie=ie.concat(zt({key:(v&&v+".")+Ye,value:_[Ye],valueSpec:dt,style:U,styleSpec:H,object:_,objectKey:Ye},_))}for(var Xt in M)L[Xt]||M[Xt].required&&M[Xt].default===void 0&&_[Xt]===void 0&&ie.push(new Dt(v,_,'missing required property "'+Xt+'"'));return ie}function cp(u){var v=u.value,_=u.valueSpec,M=u.style,L=u.styleSpec,U=u.key,H=u.arrayElementValidator||is;if(Ws(v)!=="array")return[new Dt(U,v,"array expected, "+Ws(v)+" found")];if(_.length&&v.length!==_.length)return[new Dt(U,v,"array length "+_.length+" expected, length "+v.length+" found")];if(_["min-length"]&&v.length<_["min-length"])return[new Dt(U,v,"array length at least "+_["min-length"]+" expected, length "+v.length+" found")];var ie={type:_.value,values:_.values};L.$version<7&&(ie.function=_.function),Ws(_.value)==="object"&&(ie=_.value);for(var _e=[],Ye=0;Ye<v.length;Ye++)_e=_e.concat(H({array:v,arrayIndex:Ye,value:v[Ye],valueSpec:ie,style:M,styleSpec:L,key:U+"["+Ye+"]"}));return _e}function Md(u){var v=u.key,_=u.value,M=u.valueSpec,L=Ws(_);return L==="number"&&_!=_&&(L="NaN"),L!=="number"?[new Dt(v,_,"number expected, "+L+" found")]:"minimum"in M&&_<M.minimum?[new Dt(v,_,_+" is less than the minimum value "+M.minimum)]:"maximum"in M&&_>M.maximum?[new Dt(v,_,_+" is greater than the maximum value "+M.maximum)]:[]}function yh(u){var v,_,M,L=u.valueSpec,U=ei(u.value.type),H={},ie=U!=="categorical"&&u.value.property===void 0,_e=!ie,Ye=Ws(u.value.stops)==="array"&&Ws(u.value.stops[0])==="array"&&Ws(u.value.stops[0][0])==="object",ot=Pl({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Xt){if(U==="identity")return[new Dt(Xt.key,Xt.value,'identity function may not have a "stops" property')];var Pn=[],Ln=Xt.value;return Pn=Pn.concat(cp({key:Xt.key,value:Ln,valueSpec:Xt.valueSpec,style:Xt.style,styleSpec:Xt.styleSpec,arrayElementValidator:dt})),Ws(Ln)==="array"&&Ln.length===0&&Pn.push(new Dt(Xt.key,Ln,"array must have at least one stop")),Pn},default:function(Xt){return is({key:Xt.key,value:Xt.value,valueSpec:L,style:Xt.style,styleSpec:Xt.styleSpec})}}});return U==="identity"&&ie&&ot.push(new Dt(u.key,u.value,'missing required property "property"')),U==="identity"||u.value.stops||ot.push(new Dt(u.key,u.value,'missing required property "stops"')),U==="exponential"&&u.valueSpec.expression&&!Ts(u.valueSpec)&&ot.push(new Dt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(_e&&!rc(u.valueSpec)?ot.push(new Dt(u.key,u.value,"property functions not supported")):ie&&!Lu(u.valueSpec)&&ot.push(new Dt(u.key,u.value,"zoom functions not supported"))),U!=="categorical"&&!Ye||u.value.property!==void 0||ot.push(new Dt(u.key,u.value,'"property" property is required')),ot;function dt(Xt){var Pn=[],Ln=Xt.value,rr=Xt.key;if(Ws(Ln)!=="array")return[new Dt(rr,Ln,"array expected, "+Ws(Ln)+" found")];if(Ln.length!==2)return[new Dt(rr,Ln,"array length 2 expected, length "+Ln.length+" found")];if(Ye){if(Ws(Ln[0])!=="object")return[new Dt(rr,Ln,"object expected, "+Ws(Ln[0])+" found")];if(Ln[0].zoom===void 0)return[new Dt(rr,Ln,"object stop key must have zoom")];if(Ln[0].value===void 0)return[new Dt(rr,Ln,"object stop key must have value")];if(M&&M>ei(Ln[0].zoom))return[new Dt(rr,Ln[0].zoom,"stop zoom values must appear in ascending order")];ei(Ln[0].zoom)!==M&&(M=ei(Ln[0].zoom),_=void 0,H={}),Pn=Pn.concat(Pl({key:rr+"[0]",value:Ln[0],valueSpec:{zoom:{}},style:Xt.style,styleSpec:Xt.styleSpec,objectElementValidators:{zoom:Md,value:zt}}))}else Pn=Pn.concat(zt({key:rr+"[0]",value:Ln[0],valueSpec:{},style:Xt.style,styleSpec:Xt.styleSpec},Ln));return df(Tr(Ln[1]))?Pn.concat([new Dt(rr+"[1]",Ln[1],"expressions are not allowed in function stops.")]):Pn.concat(is({key:rr+"[1]",value:Ln[1],valueSpec:L,style:Xt.style,styleSpec:Xt.styleSpec}))}function zt(Xt,Pn){var Ln=Ws(Xt.value),rr=ei(Xt.value),$n=Xt.value!==null?Xt.value:Pn;if(v){if(Ln!==v)return[new Dt(Xt.key,$n,Ln+" stop domain type must match previous stop domain type "+v)]}else v=Ln;if(Ln!=="number"&&Ln!=="string"&&Ln!=="boolean")return[new Dt(Xt.key,$n,"stop domain value must be a number, string, or boolean")];if(Ln!=="number"&&U!=="categorical"){var xr="number expected, "+Ln+" found";return rc(L)&&U===void 0&&(xr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Dt(Xt.key,$n,xr)]}return U!=="categorical"||Ln!=="number"||isFinite(rr)&&Math.floor(rr)===rr?U!=="categorical"&&Ln==="number"&&_!==void 0&&rr<_?[new Dt(Xt.key,$n,"stop domain values must appear in ascending order")]:(_=rr,U==="categorical"&&rr in H?[new Dt(Xt.key,$n,"stop domain values must be unique")]:(H[rr]=!0,[])):[new Dt(Xt.key,$n,"integer expected, found "+rr)]}}function Qf(u){var v=(u.expressionContext==="property"?Vh:Wu)(Tr(u.value),u.valueSpec);if(v.result==="error")return v.value.map(function(M){return new Dt(""+u.key+M.key,u.value,M.message)});var _=v.value.expression||v.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!_.outputDefined())return[new Dt(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Rf(_))return[new Dt(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Rf(_))return[new Dt(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!mu(_,["zoom","feature-state"]))return[new Dt(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!lf(_))return[new Dt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jc(u){var v=u.key,_=u.value,M=u.valueSpec,L=[];return Array.isArray(M.values)?M.values.indexOf(ei(_))===-1&&L.push(new Dt(v,_,"expected one of ["+M.values.join(", ")+"], "+JSON.stringify(_)+" found")):Object.keys(M.values).indexOf(ei(_))===-1&&L.push(new Dt(v,_,"expected one of ["+Object.keys(M.values).join(", ")+"], "+JSON.stringify(_)+" found")),L}function Jf(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(var v=0,_=u.slice(1);v<_.length;v+=1){var M=_[v];if(!Jf(M)&&typeof M!="boolean")return!1}return!0;default:return!0}}Qc.deserialize=function(u){return new Qc(u._parameters,u._specification)},Qc.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var eh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vf(u){if(u==null)return{filter:function(){return!0},needGeometry:!1};Jf(u)||(u=ud(u));var v=Wu(u,eh);if(v.result==="error")throw new Error(v.value.map(function(_){return _.key+": "+_.message}).join(", "));return{filter:function(_,M,L){return v.value.evaluate(_,M,{},L)},needGeometry:function _(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var L=1;L<M.length;L++)if(_(M[L]))return!0;return!1}(u)}}function fp(u,v){return u<v?-1:u>v?1:0}function ud(u){if(!u)return!0;var v,_=u[0];return u.length<=1?_!=="any":_==="=="?hp(u[1],u[2],"=="):_==="!="?Hh(hp(u[1],u[2],"==")):_==="<"||_===">"||_==="<="||_===">="?hp(u[1],u[2],_):_==="any"?(v=u.slice(1),["any"].concat(v.map(ud))):_==="all"?["all"].concat(u.slice(1).map(ud)):_==="none"?["all"].concat(u.slice(1).map(ud).map(Hh)):_==="in"?Df(u[1],u.slice(2)):_==="!in"?Hh(Df(u[1],u.slice(2))):_==="has"?dp(u[1]):_==="!has"?Hh(dp(u[1])):_!=="within"||u}function hp(u,v,_){switch(u){case"$type":return["filter-type-"+_,v];case"$id":return["filter-id-"+_,v];default:return["filter-"+_,u,v]}}function Df(u,v){if(v.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",v]];case"$id":return["filter-id-in",["literal",v]];default:return v.length>200&&!v.some(function(_){return typeof _!=typeof v[0]})?["filter-in-large",u,["literal",v.sort(fp)]]:["filter-in-small",u,["literal",v]]}}function dp(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Hh(u){return["!",u]}function ld(u){return Jf(Tr(u.value))?Qf(He({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function v(_){var M=_.value,L=_.key;if(Ws(M)!=="array")return[new Dt(L,M,"array expected, "+Ws(M)+" found")];var U,H=_.styleSpec,ie=[];if(M.length<1)return[new Dt(L,M,"filter array must have at least 1 element")];switch(ie=ie.concat(Jc({key:L+"[0]",value:M[0],valueSpec:H.filter_operator,style:_.style,styleSpec:_.styleSpec})),ei(M[0])){case"<":case"<=":case">":case">=":M.length>=2&&ei(M[1])==="$type"&&ie.push(new Dt(L,M,'"$type" cannot be use with operator "'+M[0]+'"'));case"==":case"!=":M.length!==3&&ie.push(new Dt(L,M,'filter array for operator "'+M[0]+'" must have 3 elements'));case"in":case"!in":M.length>=2&&(U=Ws(M[1]))!=="string"&&ie.push(new Dt(L+"[1]",M[1],"string expected, "+U+" found"));for(var _e=2;_e<M.length;_e++)U=Ws(M[_e]),ei(M[1])==="$type"?ie=ie.concat(Jc({key:L+"["+_e+"]",value:M[_e],valueSpec:H.geometry_type,style:_.style,styleSpec:_.styleSpec})):U!=="string"&&U!=="number"&&U!=="boolean"&&ie.push(new Dt(L+"["+_e+"]",M[_e],"string, number, or boolean expected, "+U+" found"));break;case"any":case"all":case"none":for(var Ye=1;Ye<M.length;Ye++)ie=ie.concat(v({key:L+"["+Ye+"]",value:M[Ye],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":U=Ws(M[1]),M.length!==2?ie.push(new Dt(L,M,'filter array for "'+M[0]+'" operator must have 2 elements')):U!=="string"&&ie.push(new Dt(L+"[1]",M[1],"string expected, "+U+" found"));break;case"within":U=Ws(M[1]),M.length!==2?ie.push(new Dt(L,M,'filter array for "'+M[0]+'" operator must have 2 elements')):U!=="object"&&ie.push(new Dt(L+"[1]",M[1],"object expected, "+U+" found"))}return ie}(u)}function El(u,v){var _=u.key,M=u.style,L=u.styleSpec,U=u.value,H=u.objectKey,ie=L[v+"_"+u.layerType];if(!ie)return[];var _e=H.match(/^(.*)-transition$/);if(v==="paint"&&_e&&ie[_e[1]]&&ie[_e[1]].transition)return is({key:_,value:U,valueSpec:L.transition,style:M,styleSpec:L});var Ye,ot=u.valueSpec||ie[H];if(!ot)return[new Dt(_,U,'unknown property "'+H+'"')];if(Ws(U)==="string"&&rc(ot)&&!ot.tokens&&(Ye=/^{([^}]+)}$/.exec(U)))return[new Dt(_,U,'"'+H+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ye[1])+" }`.")];var dt=[];return u.layerType==="symbol"&&(H==="text-field"&&M&&!M.glyphs&&dt.push(new Dt(_,U,'use of "text-field" requires a style "glyphs" property')),H==="text-font"&&Mc(Tr(U))&&ei(U.type)==="identity"&&dt.push(new Dt(_,U,'"text-font" does not support identity functions'))),dt.concat(is({key:u.key,value:U,valueSpec:ot,style:M,styleSpec:L,expressionContext:"property",propertyType:v,propertyKey:H}))}function Pc(u){return El(u,"paint")}function tl(u){return El(u,"layout")}function Wh(u){var v=[],_=u.value,M=u.key,L=u.style,U=u.styleSpec;_.type||_.ref||v.push(new Dt(M,_,'either "type" or "ref" is required'));var H,ie=ei(_.type),_e=ei(_.ref);if(_.id)for(var Ye=ei(_.id),ot=0;ot<u.arrayIndex;ot++){var dt=L.layers[ot];ei(dt.id)===Ye&&v.push(new Dt(M,_.id,'duplicate layer id "'+_.id+'", previously used at line '+dt.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach(function(Pn){Pn in _&&v.push(new Dt(M,_[Pn],'"'+Pn+'" is prohibited for ref layers'))}),L.layers.forEach(function(Pn){ei(Pn.id)===_e&&(H=Pn)}),H?H.ref?v.push(new Dt(M,_.ref,"ref cannot reference another ref layer")):ie=ei(H.type):v.push(new Dt(M,_.ref,'ref layer "'+_e+'" not found'));else if(ie!=="background")if(_.source){var zt=L.sources&&L.sources[_.source],Xt=zt&&ei(zt.type);zt?Xt==="vector"&&ie==="raster"?v.push(new Dt(M,_.source,'layer "'+_.id+'" requires a raster source')):Xt==="raster"&&ie!=="raster"?v.push(new Dt(M,_.source,'layer "'+_.id+'" requires a vector source')):Xt!=="vector"||_["source-layer"]?Xt==="raster-dem"&&ie!=="hillshade"?v.push(new Dt(M,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):ie!=="line"||!_.paint||!_.paint["line-gradient"]||Xt==="geojson"&&zt.lineMetrics||v.push(new Dt(M,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):v.push(new Dt(M,_,'layer "'+_.id+'" must specify a "source-layer"')):v.push(new Dt(M,_.source,'source "'+_.source+'" not found'))}else v.push(new Dt(M,_,'missing required property "source"'));return v=v.concat(Pl({key:M,value:_,valueSpec:U.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return is({key:M+".type",value:_.type,valueSpec:U.layer.type,style:u.style,styleSpec:u.styleSpec,object:_,objectKey:"type"})},filter:ld,layout:function(Pn){return Pl({layer:_,key:Pn.key,value:Pn.value,style:Pn.style,styleSpec:Pn.styleSpec,objectElementValidators:{"*":function(Ln){return tl(He({layerType:ie},Ln))}}})},paint:function(Pn){return Pl({layer:_,key:Pn.key,value:Pn.value,style:Pn.style,styleSpec:Pn.styleSpec,objectElementValidators:{"*":function(Ln){return Pc(He({layerType:ie},Ln))}}})}}}))}function th(u){var v=u.value,_=u.key,M=Ws(v);return M!=="string"?[new Dt(_,v,"string expected, "+M+" found")]:[]}var Ns={promoteId:function(u){var v=u.key,_=u.value;if(Ws(_)==="string")return th({key:v,value:_});var M=[];for(var L in _)M.push.apply(M,th({key:v+"."+L,value:_[L]}));return M}};function Rd(u){var v=u.value,_=u.key,M=u.styleSpec,L=u.style;if(!v.type)return[new Dt(_,v,'"type" is required')];var U,H=ei(v.type);switch(H){case"vector":case"raster":case"raster-dem":return Pl({key:_,value:v,valueSpec:M["source_"+H.replace("-","_")],style:u.style,styleSpec:M,objectElementValidators:Ns});case"geojson":if(U=Pl({key:_,value:v,valueSpec:M.source_geojson,style:L,styleSpec:M,objectElementValidators:Ns}),v.cluster)for(var ie in v.clusterProperties){var _e=v.clusterProperties[ie],Ye=_e[0],ot=typeof Ye=="string"?[Ye,["accumulated"],["get",ie]]:Ye;U.push.apply(U,Qf({key:_+"."+ie+".map",value:_e[1],expressionContext:"cluster-map"})),U.push.apply(U,Qf({key:_+"."+ie+".reduce",value:ot,expressionContext:"cluster-reduce"}))}return U;case"video":return Pl({key:_,value:v,valueSpec:M.source_video,style:L,styleSpec:M});case"image":return Pl({key:_,value:v,valueSpec:M.source_image,style:L,styleSpec:M});case"canvas":return[new Dt(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Jc({key:_+".type",value:v.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:L,styleSpec:M})}}function Wl(u){var v=u.value,_=u.styleSpec,M=_.light,L=u.style,U=[],H=Ws(v);if(v===void 0)return U;if(H!=="object")return U.concat([new Dt("light",v,"object expected, "+H+" found")]);for(var ie in v){var _e=ie.match(/^(.*)-transition$/);U=U.concat(_e&&M[_e[1]]&&M[_e[1]].transition?is({key:ie,value:v[ie],valueSpec:_.transition,style:L,styleSpec:_}):M[ie]?is({key:ie,value:v[ie],valueSpec:M[ie],style:L,styleSpec:_}):[new Dt(ie,v[ie],'unknown property "'+ie+'"')])}return U}var Nf={"*":function(){return[]},array:cp,boolean:function(u){var v=u.value,_=u.key,M=Ws(v);return M!=="boolean"?[new Dt(_,v,"boolean expected, "+M+" found")]:[]},number:Md,color:function(u){var v=u.key,_=u.value,M=Ws(_);return M!=="string"?[new Dt(v,_,"color expected, "+M+" found")]:Gn(_)===null?[new Dt(v,_,'color expected, "'+_+'" found')]:[]},constants:dn,enum:Jc,filter:ld,function:yh,layer:Wh,object:Pl,source:Rd,light:Wl,string:th,formatted:function(u){return th(u).length===0?[]:Qf(u)},resolvedImage:function(u){return th(u).length===0?[]:Qf(u)}};function is(u){var v=u.value,_=u.valueSpec,M=u.styleSpec;return _.expression&&Mc(ei(v))?yh(u):_.expression&&df(Tr(v))?Qf(u):_.type&&Nf[_.type]?Nf[_.type](u):Pl(He({},u,{valueSpec:_.type?M[_.type]:_}))}function Bs(u){var v=u.value,_=u.key,M=th(u);return M.length||(v.indexOf("{fontstack}")===-1&&M.push(new Dt(_,v,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&M.push(new Dt(_,v,'"glyphs" url must include a "{range}" token'))),M}function ic(u,v){v===void 0&&(v=kt);var _=[];return _=_.concat(is({key:"",value:u,valueSpec:v.$root,styleSpec:v,style:u,objectElementValidators:{glyphs:Bs,"*":function(){return[]}}})),u.constants&&(_=_.concat(dn({key:"constants",value:u.constants,style:u,styleSpec:v}))),cd(_)}function cd(u){return[].concat(u).sort(function(v,_){return v.line-_.line})}function mf(u){return function(){for(var v=[],_=arguments.length;_--;)v[_]=arguments[_];return cd(u.apply(this,v))}}ic.source=mf(Rd),ic.light=mf(Wl),ic.layer=mf(Wh),ic.filter=mf(ld),ic.paintProperty=mf(Pc),ic.layoutProperty=mf(tl);var Ic=ic,Vp=Ic.light,Pd=Ic.paintProperty,fd=Ic.layoutProperty;function _h(u,v){var _=!1;if(v&&v.length)for(var M=0,L=v;M<L.length;M+=1)u.fire(new an(new Error(L[M].message))),_=!0;return _}var nl=ru;function ru(u,v,_){var M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var L=new Int32Array(this.arrayBuffer);u=L[0],this.d=(v=L[1])+2*(_=L[2]);for(var U=0;U<this.d*this.d;U++){var H=L[3+U],ie=L[3+U+1];M.push(H===ie?null:L.subarray(H,ie))}var _e=L[3+M.length+1];this.keys=L.subarray(L[3+M.length],_e),this.bboxes=L.subarray(_e),this.insert=this._insertReadonly}else{this.d=v+2*_;for(var Ye=0;Ye<this.d*this.d;Ye++)M.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=u,this.padding=_,this.scale=v/u,this.uid=0;var ot=_/v*u;this.min=-ot,this.max=u+ot}ru.prototype.insert=function(u,v,_,M,L){this._forEachCell(v,_,M,L,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(M),this.bboxes.push(L)},ru.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ru.prototype._insertCell=function(u,v,_,M,L,U){this.cells[L].push(U)},ru.prototype.query=function(u,v,_,M,L){var U=this.min,H=this.max;if(u<=U&&v<=U&&H<=_&&H<=M&&!L)return Array.prototype.slice.call(this.keys);var ie=[];return this._forEachCell(u,v,_,M,this._queryCell,ie,{},L),ie},ru.prototype._queryCell=function(u,v,_,M,L,U,H,ie){var _e=this.cells[L];if(_e!==null)for(var Ye=this.keys,ot=this.bboxes,dt=0;dt<_e.length;dt++){var zt=_e[dt];if(H[zt]===void 0){var Xt=4*zt;(ie?ie(ot[Xt+0],ot[Xt+1],ot[Xt+2],ot[Xt+3]):u<=ot[Xt+2]&&v<=ot[Xt+3]&&_>=ot[Xt+0]&&M>=ot[Xt+1])?(H[zt]=!0,U.push(Ye[zt])):H[zt]=!1}}},ru.prototype._forEachCell=function(u,v,_,M,L,U,H,ie){for(var _e=this._convertToCellCoord(u),Ye=this._convertToCellCoord(v),ot=this._convertToCellCoord(_),dt=this._convertToCellCoord(M),zt=_e;zt<=ot;zt++)for(var Xt=Ye;Xt<=dt;Xt++){var Pn=this.d*Xt+zt;if((!ie||ie(this._convertFromCellCoord(zt),this._convertFromCellCoord(Xt),this._convertFromCellCoord(zt+1),this._convertFromCellCoord(Xt+1)))&&L.call(this,u,v,_,M,Pn,U,H,ie))return}},ru.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},ru.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},ru.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,v=3+this.cells.length+1+1,_=0,M=0;M<this.cells.length;M++)_+=this.cells[M].length;var L=new Int32Array(v+_+this.keys.length+this.bboxes.length);L[0]=this.extent,L[1]=this.n,L[2]=this.padding;for(var U=v,H=0;H<u.length;H++){var ie=u[H];L[3+H]=U,L.set(ie,U),U+=ie.length}return L[3+u.length]=U,L.set(this.keys,U),L[3+u.length+1]=U+=this.keys.length,L.set(this.bboxes,U),U+=this.bboxes.length,L.buffer};var bh=he.ImageData,pp=he.ImageBitmap,uu={};function Ma(u,v,_){_===void 0&&(_={}),Object.defineProperty(v,"_classRegistryKey",{value:u,writeable:!1}),uu[u]={klass:v,omit:_.omit||[],shallow:_.shallow||[]}}for(var Il in Ma("Object",Object),nl.serialize=function(u,v){var _=u.toArrayBuffer();return v&&v.push(_),{buffer:_}},nl.deserialize=function(u){return new nl(u.buffer)},Ma("Grid",nl),Ma("Color",Ht),Ma("Error",Error),Ma("ResolvedImage",gi),Ma("StylePropertyFunction",Qc),Ma("StyleExpression",Rc,{omit:["_evaluator"]}),Ma("ZoomDependentExpression",pf),Ma("ZoomConstantExpression",gh),Ma("CompoundExpression",Oo,{omit:["_evaluate"]}),mc)mc[Il]._classRegistryKey||Ma("Expression_"+Il,mc[Il]);function $h(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function xh(u){return pp&&u instanceof pp}function qo(u,v){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if($h(u)||xh(u))return v&&v.push(u),u;if(ArrayBuffer.isView(u)){var _=u;return v&&v.push(_.buffer),_}if(u instanceof bh)return v&&v.push(u.data.buffer),u;if(Array.isArray(u)){for(var M=[],L=0,U=u;L<U.length;L+=1)M.push(qo(U[L],v));return M}if(typeof u=="object"){var H=u.constructor,ie=H._classRegistryKey;if(!ie)throw new Error("can't serialize object of unregistered class");var _e=H.serialize?H.serialize(u,v):{};if(!H.serialize){for(var Ye in u)if(u.hasOwnProperty(Ye)&&!(uu[ie].omit.indexOf(Ye)>=0)){var ot=u[Ye];_e[Ye]=uu[ie].shallow.indexOf(Ye)>=0?ot:qo(ot,v)}u instanceof Error&&(_e.message=u.message)}if(_e.$name)throw new Error("$name property is reserved for worker serialization logic.");return ie!=="Object"&&(_e.$name=ie),_e}throw new Error("can't serialize object of type "+typeof u)}function As(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||$h(u)||xh(u)||ArrayBuffer.isView(u)||u instanceof bh)return u;if(Array.isArray(u))return u.map(As);if(typeof u=="object"){var v=u.$name||"Object",_=uu[v].klass;if(!_)throw new Error("can't deserialize unregistered class "+v);if(_.deserialize)return _.deserialize(u);for(var M=Object.create(_.prototype),L=0,U=Object.keys(u);L<U.length;L+=1){var H=U[L];if(H!=="$name"){var ie=u[H];M[H]=uu[v].shallow.indexOf(H)>=0?ie:As(ie)}}return M}throw new Error("can't deserialize object of type "+typeof u)}var Eh=function(){this.first=!0};Eh.prototype.update=function(u,v){var _=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=v),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=_,!0))};var Z={"Latin-1 Supplement":function(u){return u>=128&&u<=255},Arabic:function(u){return u>=1536&&u<=1791},"Arabic Supplement":function(u){return u>=1872&&u<=1919},"Arabic Extended-A":function(u){return u>=2208&&u<=2303},"Hangul Jamo":function(u){return u>=4352&&u<=4607},"Unified Canadian Aboriginal Syllabics":function(u){return u>=5120&&u<=5759},Khmer:function(u){return u>=6016&&u<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(u){return u>=6320&&u<=6399},"General Punctuation":function(u){return u>=8192&&u<=8303},"Letterlike Symbols":function(u){return u>=8448&&u<=8527},"Number Forms":function(u){return u>=8528&&u<=8591},"Miscellaneous Technical":function(u){return u>=8960&&u<=9215},"Control Pictures":function(u){return u>=9216&&u<=9279},"Optical Character Recognition":function(u){return u>=9280&&u<=9311},"Enclosed Alphanumerics":function(u){return u>=9312&&u<=9471},"Geometric Shapes":function(u){return u>=9632&&u<=9727},"Miscellaneous Symbols":function(u){return u>=9728&&u<=9983},"Miscellaneous Symbols and Arrows":function(u){return u>=11008&&u<=11263},"CJK Radicals Supplement":function(u){return u>=11904&&u<=12031},"Kangxi Radicals":function(u){return u>=12032&&u<=12255},"Ideographic Description Characters":function(u){return u>=12272&&u<=12287},"CJK Symbols and Punctuation":function(u){return u>=12288&&u<=12351},Hiragana:function(u){return u>=12352&&u<=12447},Katakana:function(u){return u>=12448&&u<=12543},Bopomofo:function(u){return u>=12544&&u<=12591},"Hangul Compatibility Jamo":function(u){return u>=12592&&u<=12687},Kanbun:function(u){return u>=12688&&u<=12703},"Bopomofo Extended":function(u){return u>=12704&&u<=12735},"CJK Strokes":function(u){return u>=12736&&u<=12783},"Katakana Phonetic Extensions":function(u){return u>=12784&&u<=12799},"Enclosed CJK Letters and Months":function(u){return u>=12800&&u<=13055},"CJK Compatibility":function(u){return u>=13056&&u<=13311},"CJK Unified Ideographs Extension A":function(u){return u>=13312&&u<=19903},"Yijing Hexagram Symbols":function(u){return u>=19904&&u<=19967},"CJK Unified Ideographs":function(u){return u>=19968&&u<=40959},"Yi Syllables":function(u){return u>=40960&&u<=42127},"Yi Radicals":function(u){return u>=42128&&u<=42191},"Hangul Jamo Extended-A":function(u){return u>=43360&&u<=43391},"Hangul Syllables":function(u){return u>=44032&&u<=55215},"Hangul Jamo Extended-B":function(u){return u>=55216&&u<=55295},"Private Use Area":function(u){return u>=57344&&u<=63743},"CJK Compatibility Ideographs":function(u){return u>=63744&&u<=64255},"Arabic Presentation Forms-A":function(u){return u>=64336&&u<=65023},"Vertical Forms":function(u){return u>=65040&&u<=65055},"CJK Compatibility Forms":function(u){return u>=65072&&u<=65103},"Small Form Variants":function(u){return u>=65104&&u<=65135},"Arabic Presentation Forms-B":function(u){return u>=65136&&u<=65279},"Halfwidth and Fullwidth Forms":function(u){return u>=65280&&u<=65519}};function Vt(u){for(var v=0,_=u;v<_.length;v+=1)if(Ne(_[v].charCodeAt(0)))return!0;return!1}function Ne(u){return!(u!==746&&u!==747&&(u<4352||!(Z["Bopomofo Extended"](u)||Z.Bopomofo(u)||Z["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Z["CJK Compatibility Ideographs"](u)||Z["CJK Compatibility"](u)||Z["CJK Radicals Supplement"](u)||Z["CJK Strokes"](u)||!(!Z["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Z["CJK Unified Ideographs Extension A"](u)||Z["CJK Unified Ideographs"](u)||Z["Enclosed CJK Letters and Months"](u)||Z["Hangul Compatibility Jamo"](u)||Z["Hangul Jamo Extended-A"](u)||Z["Hangul Jamo Extended-B"](u)||Z["Hangul Jamo"](u)||Z["Hangul Syllables"](u)||Z.Hiragana(u)||Z["Ideographic Description Characters"](u)||Z.Kanbun(u)||Z["Kangxi Radicals"](u)||Z["Katakana Phonetic Extensions"](u)||Z.Katakana(u)&&u!==12540||!(!Z["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Z["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Z["Unified Canadian Aboriginal Syllabics"](u)||Z["Unified Canadian Aboriginal Syllabics Extended"](u)||Z["Vertical Forms"](u)||Z["Yijing Hexagram Symbols"](u)||Z["Yi Syllables"](u)||Z["Yi Radicals"](u))))}function $e(u){return!(Ne(u)||function(v){return!!(Z["Latin-1 Supplement"](v)&&(v===167||v===169||v===174||v===177||v===188||v===189||v===190||v===215||v===247)||Z["General Punctuation"](v)&&(v===8214||v===8224||v===8225||v===8240||v===8241||v===8251||v===8252||v===8258||v===8263||v===8264||v===8265||v===8273)||Z["Letterlike Symbols"](v)||Z["Number Forms"](v)||Z["Miscellaneous Technical"](v)&&(v>=8960&&v<=8967||v>=8972&&v<=8991||v>=8996&&v<=9e3||v===9003||v>=9085&&v<=9114||v>=9150&&v<=9165||v===9167||v>=9169&&v<=9179||v>=9186&&v<=9215)||Z["Control Pictures"](v)&&v!==9251||Z["Optical Character Recognition"](v)||Z["Enclosed Alphanumerics"](v)||Z["Geometric Shapes"](v)||Z["Miscellaneous Symbols"](v)&&!(v>=9754&&v<=9759)||Z["Miscellaneous Symbols and Arrows"](v)&&(v>=11026&&v<=11055||v>=11088&&v<=11097||v>=11192&&v<=11243)||Z["CJK Symbols and Punctuation"](v)||Z.Katakana(v)||Z["Private Use Area"](v)||Z["CJK Compatibility Forms"](v)||Z["Small Form Variants"](v)||Z["Halfwidth and Fullwidth Forms"](v)||v===8734||v===8756||v===8757||v>=9984&&v<=10087||v>=10102&&v<=10131||v===65532||v===65533)}(u))}function Oe(u){return u>=1424&&u<=2303||Z["Arabic Presentation Forms-A"](u)||Z["Arabic Presentation Forms-B"](u)}function lt(u,v){return!(!v&&Oe(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Z.Khmer(u))}function un(u){for(var v=0,_=u;v<_.length;v+=1)if(Oe(_[v].charCodeAt(0)))return!0;return!1}var Zn=null,mn="unavailable",jn=null,zr=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(mn="error"),Zn&&Zn(u)};function li(){Gi.fire(new Bt("pluginStateChange",{pluginStatus:mn,pluginURL:jn}))}var Gi=new An,na=function(){return mn},ga=function(){if(mn!=="deferred"||!jn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");mn="loading",li(),jn&&fr({url:jn},function(u){u?zr(u):(mn="loaded",li())})},La={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return mn==="loaded"||La.applyArabicShaping!=null},isLoading:function(){return mn==="loading"},setState:function(u){mn=u.pluginStatus,jn=u.pluginURL},isParsed:function(){return La.applyArabicShaping!=null&&La.processBidirectionalText!=null&&La.processStyledBidirectionalText!=null},getPluginURL:function(){return jn}},ui=function(u,v){this.zoom=u,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Eh,this.transition={})};ui.prototype.isSupportedScript=function(u){return function(v,_){for(var M=0,L=v;M<L.length;M+=1)if(!lt(L[M].charCodeAt(0),_))return!1;return!0}(u,La.isLoaded())},ui.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ui.prototype.getCrossfadeParameters=function(){var u=this.zoom,v=u-Math.floor(u),_=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*v}};var Ka=function(u,v){this.property=u,this.value=v,this.expression=function(_,M){if(Mc(_))return new Qc(_,M);if(df(_)){var L=Vh(_,M);if(L.result==="error")throw new Error(L.value.map(function(H){return H.key+": "+H.message}).join(", "));return L.value}var U=_;return typeof _=="string"&&M.type==="color"&&(U=Ht.parse(_)),{kind:"constant",evaluate:function(){return U}}}(v===void 0?u.specification.default:v,u.specification)};Ka.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ka.prototype.possiblyEvaluate=function(u,v,_){return this.property.possiblyEvaluate(this,u,v,_)};var uo=function(u){this.property=u,this.value=new Ka(u,void 0)};uo.prototype.transitioned=function(u,v){return new as(this.property,this.value,v,xe({},u.transition,this.transition),u.now)},uo.prototype.untransitioned=function(){return new as(this.property,this.value,null,{},0)};var no=function(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)};no.prototype.getValue=function(u){return Ie(this._values[u].value.value)},no.prototype.setValue=function(u,v){this._values.hasOwnProperty(u)||(this._values[u]=new uo(this._values[u].property)),this._values[u].value=new Ka(this._values[u].property,v===null?void 0:Ie(v))},no.prototype.getTransition=function(u){return Ie(this._values[u].transition)},no.prototype.setTransition=function(u,v){this._values.hasOwnProperty(u)||(this._values[u]=new uo(this._values[u].property)),this._values[u].transition=Ie(v)||void 0},no.prototype.serialize=function(){for(var u={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var M=_[v],L=this.getValue(M);L!==void 0&&(u[M]=L);var U=this.getTransition(M);U!==void 0&&(u[M+"-transition"]=U)}return u},no.prototype.transitioned=function(u,v){for(var _=new Es(this._properties),M=0,L=Object.keys(this._values);M<L.length;M+=1){var U=L[M];_._values[U]=this._values[U].transitioned(u,v._values[U])}return _},no.prototype.untransitioned=function(){for(var u=new Es(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var M=_[v];u._values[M]=this._values[M].untransitioned()}return u};var as=function(u,v,_,M,L){this.property=u,this.value=v,this.begin=L+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=_)};as.prototype.possiblyEvaluate=function(u,v,_){var M=u.now||0,L=this.value.possiblyEvaluate(u,v,_),U=this.prior;if(U){if(M>this.end)return this.prior=null,L;if(this.value.isDataDriven())return this.prior=null,L;if(M<this.begin)return U.possiblyEvaluate(u,v,_);var H=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(U.possiblyEvaluate(u,v,_),L,function(ie){if(ie<=0)return 0;if(ie>=1)return 1;var _e=ie*ie,Ye=_e*ie;return 4*(ie<.5?Ye:3*(ie-_e)+Ye-.75)}(H))}return L};var Es=function(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)};Es.prototype.possiblyEvaluate=function(u,v,_){for(var M=new _o(this._properties),L=0,U=Object.keys(this._values);L<U.length;L+=1){var H=U[L];M._values[H]=this._values[H].possiblyEvaluate(u,v,_)}return M},Es.prototype.hasTransition=function(){for(var u=0,v=Object.keys(this._values);u<v.length;u+=1)if(this._values[v[u]].prior)return!0;return!1};var vs=function(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)};vs.prototype.getValue=function(u){return Ie(this._values[u].value)},vs.prototype.setValue=function(u,v){this._values[u]=new Ka(this._values[u].property,v===null?void 0:Ie(v))},vs.prototype.serialize=function(){for(var u={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var M=_[v],L=this.getValue(M);L!==void 0&&(u[M]=L)}return u},vs.prototype.possiblyEvaluate=function(u,v,_){for(var M=new _o(this._properties),L=0,U=Object.keys(this._values);L<U.length;L+=1){var H=U[L];M._values[H]=this._values[H].possiblyEvaluate(u,v,_)}return M};var Ko=function(u,v,_){this.property=u,this.value=v,this.parameters=_};Ko.prototype.isConstant=function(){return this.value.kind==="constant"},Ko.prototype.constantOr=function(u){return this.value.kind==="constant"?this.value.value:u},Ko.prototype.evaluate=function(u,v,_,M){return this.property.evaluate(this.value,this.parameters,u,v,_,M)};var _o=function(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)};_o.prototype.get=function(u){return this._values[u]};var oa=function(u){this.specification=u};oa.prototype.possiblyEvaluate=function(u,v){return u.expression.evaluate(v)},oa.prototype.interpolate=function(u,v,_){var M=fo[this.specification.type];return M?M(u,v,_):u};var ra=function(u,v){this.specification=u,this.overrides=v};ra.prototype.possiblyEvaluate=function(u,v,_,M){return new Ko(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(v,null,{},_,M)}:u.expression,v)},ra.prototype.interpolate=function(u,v,_){if(u.value.kind!=="constant"||v.value.kind!=="constant")return u;if(u.value.value===void 0||v.value.value===void 0)return new Ko(this,{kind:"constant",value:void 0},u.parameters);var M=fo[this.specification.type];return M?new Ko(this,{kind:"constant",value:M(u.value.value,v.value.value,_)},u.parameters):u},ra.prototype.evaluate=function(u,v,_,M,L,U){return u.kind==="constant"?u.value:u.evaluate(v,_,M,L,U)};var Qo=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,M,L,U){if(_.value===void 0)return new Ko(this,{kind:"constant",value:void 0},M);if(_.expression.kind==="constant"){var H=_.expression.evaluate(M,null,{},L,U),ie=_.property.specification.type==="resolvedImage"&&typeof H!="string"?H.name:H,_e=this._calculate(ie,ie,ie,M);return new Ko(this,{kind:"constant",value:_e},M)}if(_.expression.kind==="camera"){var Ye=this._calculate(_.expression.evaluate({zoom:M.zoom-1}),_.expression.evaluate({zoom:M.zoom}),_.expression.evaluate({zoom:M.zoom+1}),M);return new Ko(this,{kind:"constant",value:Ye},M)}return new Ko(this,_.expression,M)},v.prototype.evaluate=function(_,M,L,U,H,ie){if(_.kind==="source"){var _e=_.evaluate(M,L,U,H,ie);return this._calculate(_e,_e,_e,M)}return _.kind==="composite"?this._calculate(_.evaluate({zoom:Math.floor(M.zoom)-1},L,U),_.evaluate({zoom:Math.floor(M.zoom)},L,U),_.evaluate({zoom:Math.floor(M.zoom)+1},L,U),M):_.value},v.prototype._calculate=function(_,M,L,U){return U.zoom>U.zoomHistory.lastIntegerZoom?{from:_,to:M}:{from:L,to:M}},v.prototype.interpolate=function(_){return _},v}(ra),Jo=function(u){this.specification=u};Jo.prototype.possiblyEvaluate=function(u,v,_,M){if(u.value!==void 0){if(u.expression.kind==="constant"){var L=u.expression.evaluate(v,null,{},_,M);return this._calculate(L,L,L,v)}return this._calculate(u.expression.evaluate(new ui(Math.floor(v.zoom-1),v)),u.expression.evaluate(new ui(Math.floor(v.zoom),v)),u.expression.evaluate(new ui(Math.floor(v.zoom+1),v)),v)}},Jo.prototype._calculate=function(u,v,_,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:v}:{from:_,to:v}},Jo.prototype.interpolate=function(u){return u};var No=function(u){this.specification=u};No.prototype.possiblyEvaluate=function(u,v,_,M){return!!u.expression.evaluate(v,null,{},_,M)},No.prototype.interpolate=function(){return!1};var os=function(u){for(var v in this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],u){var _=u[v];_.specification.overridable&&this.overridableProperties.push(v);var M=this.defaultPropertyValues[v]=new Ka(_,void 0),L=this.defaultTransitionablePropertyValues[v]=new uo(_);this.defaultTransitioningPropertyValues[v]=L.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=M.possiblyEvaluate({})}};Ma("DataDrivenProperty",ra),Ma("DataConstantProperty",oa),Ma("CrossFadedDataDrivenProperty",Qo),Ma("CrossFadedProperty",Jo),Ma("ColorRampProperty",No);var Fo=function(u){function v(_,M){if(u.call(this),this.id=_.id,this.type=_.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},_.type!=="custom"&&(this.metadata=(_=_).metadata,this.minzoom=_.minzoom,this.maxzoom=_.maxzoom,_.type!=="background"&&(this.source=_.source,this.sourceLayer=_["source-layer"],this.filter=_.filter),M.layout&&(this._unevaluatedLayout=new vs(M.layout)),M.paint)){for(var L in this._transitionablePaint=new no(M.paint),_.paint)this.setPaintProperty(L,_.paint[L],{validate:!1});for(var U in _.layout)this.setLayoutProperty(U,_.layout[U],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new _o(M.paint)}}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},v.prototype.getLayoutProperty=function(_){return _==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_)},v.prototype.setLayoutProperty=function(_,M,L){L===void 0&&(L={}),M!=null&&this._validate(fd,"layers."+this.id+".layout."+_,_,M,L)||(_!=="visibility"?this._unevaluatedLayout.setValue(_,M):this.visibility=M)},v.prototype.getPaintProperty=function(_){return Rt(_,"-transition")?this._transitionablePaint.getTransition(_.slice(0,-11)):this._transitionablePaint.getValue(_)},v.prototype.setPaintProperty=function(_,M,L){if(L===void 0&&(L={}),M!=null&&this._validate(Pd,"layers."+this.id+".paint."+_,_,M,L))return!1;if(Rt(_,"-transition"))return this._transitionablePaint.setTransition(_.slice(0,-11),M||void 0),!1;var U=this._transitionablePaint._values[_],H=U.property.specification["property-type"]==="cross-faded-data-driven",ie=U.value.isDataDriven(),_e=U.value;this._transitionablePaint.setValue(_,M),this._handleSpecialPaintPropertyUpdate(_);var Ye=this._transitionablePaint._values[_].value;return Ye.isDataDriven()||ie||H||this._handleOverridablePaintPropertyUpdate(_,_e,Ye)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){},v.prototype._handleOverridablePaintPropertyUpdate=function(_,M,L){return!1},v.prototype.isHidden=function(_){return!!(this.minzoom&&_<this.minzoom)||!!(this.maxzoom&&_>=this.maxzoom)||this.visibility==="none"},v.prototype.updateTransitions=function(_){this._transitioningPaint=this._transitionablePaint.transitioned(_,this._transitioningPaint)},v.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},v.prototype.recalculate=function(_,M){_.getCrossfadeParameters&&(this._crossfadeParameters=_.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_,void 0,M)),this.paint=this._transitioningPaint.possiblyEvaluate(_,void 0,M)},v.prototype.serialize=function(){var _={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_.layout=_.layout||{},_.layout.visibility=this.visibility),Ze(_,function(M,L){return!(M===void 0||L==="layout"&&!Object.keys(M).length||L==="paint"&&!Object.keys(M).length)})},v.prototype._validate=function(_,M,L,U,H){return H===void 0&&(H={}),(!H||H.validate!==!1)&&_h(this,_.call(Ic,{key:M,layerType:this.type,objectKey:L,value:U,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))},v.prototype.is3D=function(){return!1},v.prototype.isTileClipped=function(){return!1},v.prototype.hasOffscreenPass=function(){return!1},v.prototype.resize=function(){},v.prototype.isStateDependent=function(){for(var _ in this.paint._values){var M=this.paint.get(_);if(M instanceof Ko&&rc(M.property.specification)&&(M.value.kind==="source"||M.value.kind==="composite")&&M.value.isStateDependent)return!0}return!1},v}(An),$u={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},gf=function(u,v){this._structArray=u,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},jo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function qs(u,v){v===void 0&&(v=1);var _=0,M=0;return{members:u.map(function(L){var U=$u[L.type].BYTES_PER_ELEMENT,H=_=Id(_,Math.max(v,U)),ie=L.components||1;return M=Math.max(M,U),_+=U*ie,{name:L.name,type:L.type,components:ie,offset:H}}),size:Id(_,Math.max(M,v)),alignment:v}}function Id(u,v){return Math.ceil(u/v)*v}jo.serialize=function(u,v){return u._trim(),v&&(u.isTransferred=!0,v.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}},jo.deserialize=function(u){var v=Object.create(this.prototype);return v.arrayBuffer=u.arrayBuffer,v.length=u.length,v.capacity=u.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v},jo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},jo.prototype.clear=function(){this.length=0},jo.prototype.resize=function(u){this.reserve(u),this.length=u},jo.prototype.reserve=function(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}},jo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var yc=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M){var L=this.length;return this.resize(L+1),this.emplace(L,_,M)},v.prototype.emplace=function(_,M,L){var U=2*_;return this.int16[U+0]=M,this.int16[U+1]=L,_},v}(jo);yc.prototype.bytesPerElement=4,Ma("StructArrayLayout2i4",yc);var kd=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U){var H=this.length;return this.resize(H+1),this.emplace(H,_,M,L,U)},v.prototype.emplace=function(_,M,L,U,H){var ie=4*_;return this.int16[ie+0]=M,this.int16[ie+1]=L,this.int16[ie+2]=U,this.int16[ie+3]=H,_},v}(jo);kd.prototype.bytesPerElement=8,Ma("StructArrayLayout4i8",kd);var Sh=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie){var _e=this.length;return this.resize(_e+1),this.emplace(_e,_,M,L,U,H,ie)},v.prototype.emplace=function(_,M,L,U,H,ie,_e){var Ye=6*_;return this.int16[Ye+0]=M,this.int16[Ye+1]=L,this.int16[Ye+2]=U,this.int16[Ye+3]=H,this.int16[Ye+4]=ie,this.int16[Ye+5]=_e,_},v}(jo);Sh.prototype.bytesPerElement=12,Ma("StructArrayLayout2i4i12",Sh);var dl=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie){var _e=this.length;return this.resize(_e+1),this.emplace(_e,_,M,L,U,H,ie)},v.prototype.emplace=function(_,M,L,U,H,ie,_e){var Ye=4*_,ot=8*_;return this.int16[Ye+0]=M,this.int16[Ye+1]=L,this.uint8[ot+4]=U,this.uint8[ot+5]=H,this.uint8[ot+6]=ie,this.uint8[ot+7]=_e,_},v}(jo);dl.prototype.bytesPerElement=8,Ma("StructArrayLayout2i4ub8",dl);var Gh=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M){var L=this.length;return this.resize(L+1),this.emplace(L,_,M)},v.prototype.emplace=function(_,M,L){var U=2*_;return this.float32[U+0]=M,this.float32[U+1]=L,_},v}(jo);Gh.prototype.bytesPerElement=8,Ma("StructArrayLayout2f8",Gh);var kc=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie,_e,Ye,ot,dt){var zt=this.length;return this.resize(zt+1),this.emplace(zt,_,M,L,U,H,ie,_e,Ye,ot,dt)},v.prototype.emplace=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt){var Xt=10*_;return this.uint16[Xt+0]=M,this.uint16[Xt+1]=L,this.uint16[Xt+2]=U,this.uint16[Xt+3]=H,this.uint16[Xt+4]=ie,this.uint16[Xt+5]=_e,this.uint16[Xt+6]=Ye,this.uint16[Xt+7]=ot,this.uint16[Xt+8]=dt,this.uint16[Xt+9]=zt,_},v}(jo);kc.prototype.bytesPerElement=20,Ma("StructArrayLayout10ui20",kc);var gv=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt){var Pn=this.length;return this.resize(Pn+1),this.emplace(Pn,_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt)},v.prototype.emplace=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn){var Ln=12*_;return this.int16[Ln+0]=M,this.int16[Ln+1]=L,this.int16[Ln+2]=U,this.int16[Ln+3]=H,this.uint16[Ln+4]=ie,this.uint16[Ln+5]=_e,this.uint16[Ln+6]=Ye,this.uint16[Ln+7]=ot,this.int16[Ln+8]=dt,this.int16[Ln+9]=zt,this.int16[Ln+10]=Xt,this.int16[Ln+11]=Pn,_},v}(jo);gv.prototype.bytesPerElement=24,Ma("StructArrayLayout4i4ui4i24",gv);var _c=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L){var U=this.length;return this.resize(U+1),this.emplace(U,_,M,L)},v.prototype.emplace=function(_,M,L,U){var H=3*_;return this.float32[H+0]=M,this.float32[H+1]=L,this.float32[H+2]=U,_},v}(jo);_c.prototype.bytesPerElement=12,Ma("StructArrayLayout3f12",_c);var Bf=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var M=this.length;return this.resize(M+1),this.emplace(M,_)},v.prototype.emplace=function(_,M){return this.uint32[1*_+0]=M,_},v}(jo);Bf.prototype.bytesPerElement=4,Ma("StructArrayLayout1ul4",Bf);var wh=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie,_e,Ye,ot){var dt=this.length;return this.resize(dt+1),this.emplace(dt,_,M,L,U,H,ie,_e,Ye,ot)},v.prototype.emplace=function(_,M,L,U,H,ie,_e,Ye,ot,dt){var zt=10*_,Xt=5*_;return this.int16[zt+0]=M,this.int16[zt+1]=L,this.int16[zt+2]=U,this.int16[zt+3]=H,this.int16[zt+4]=ie,this.int16[zt+5]=_e,this.uint32[Xt+3]=Ye,this.uint16[zt+8]=ot,this.uint16[zt+9]=dt,_},v}(jo);wh.prototype.bytesPerElement=20,Ma("StructArrayLayout6i1ul2ui20",wh);var yf=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie){var _e=this.length;return this.resize(_e+1),this.emplace(_e,_,M,L,U,H,ie)},v.prototype.emplace=function(_,M,L,U,H,ie,_e){var Ye=6*_;return this.int16[Ye+0]=M,this.int16[Ye+1]=L,this.int16[Ye+2]=U,this.int16[Ye+3]=H,this.int16[Ye+4]=ie,this.int16[Ye+5]=_e,_},v}(jo);yf.prototype.bytesPerElement=12,Ma("StructArrayLayout2i2i2i12",yf);var _f=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H){var ie=this.length;return this.resize(ie+1),this.emplace(ie,_,M,L,U,H)},v.prototype.emplace=function(_,M,L,U,H,ie){var _e=4*_,Ye=8*_;return this.float32[_e+0]=M,this.float32[_e+1]=L,this.float32[_e+2]=U,this.int16[Ye+6]=H,this.int16[Ye+7]=ie,_},v}(jo);_f.prototype.bytesPerElement=16,Ma("StructArrayLayout2f1f2i16",_f);var Xh=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U){var H=this.length;return this.resize(H+1),this.emplace(H,_,M,L,U)},v.prototype.emplace=function(_,M,L,U,H){var ie=12*_,_e=3*_;return this.uint8[ie+0]=M,this.uint8[ie+1]=L,this.float32[_e+1]=U,this.float32[_e+2]=H,_},v}(jo);Xh.prototype.bytesPerElement=12,Ma("StructArrayLayout2ub2f12",Xh);var po=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L){var U=this.length;return this.resize(U+1),this.emplace(U,_,M,L)},v.prototype.emplace=function(_,M,L,U){var H=3*_;return this.uint16[H+0]=M,this.uint16[H+1]=L,this.uint16[H+2]=U,_},v}(jo);po.prototype.bytesPerElement=6,Ma("StructArrayLayout3ui6",po);var Lc=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln,rr,$n,xr){var Lr=this.length;return this.resize(Lr+1),this.emplace(Lr,_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln,rr,$n,xr)},v.prototype.emplace=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln,rr,$n,xr,Lr){var Zr=24*_,Jr=12*_,ai=48*_;return this.int16[Zr+0]=M,this.int16[Zr+1]=L,this.uint16[Zr+2]=U,this.uint16[Zr+3]=H,this.uint32[Jr+2]=ie,this.uint32[Jr+3]=_e,this.uint32[Jr+4]=Ye,this.uint16[Zr+10]=ot,this.uint16[Zr+11]=dt,this.uint16[Zr+12]=zt,this.float32[Jr+7]=Xt,this.float32[Jr+8]=Pn,this.uint8[ai+36]=Ln,this.uint8[ai+37]=rr,this.uint8[ai+38]=$n,this.uint32[Jr+10]=xr,this.int16[Zr+22]=Lr,_},v}(jo);Lc.prototype.bytesPerElement=48,Ma("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Lc);var Hp=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln,rr,$n,xr,Lr,Zr,Jr,ai,Ki,ca,Ja,Sa,lo,Ca,$o){var Eo=this.length;return this.resize(Eo+1),this.emplace(Eo,_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln,rr,$n,xr,Lr,Zr,Jr,ai,Ki,ca,Ja,Sa,lo,Ca,$o)},v.prototype.emplace=function(_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln,rr,$n,xr,Lr,Zr,Jr,ai,Ki,ca,Ja,Sa,lo,Ca,$o,Eo){var Fa=34*_,Go=17*_;return this.int16[Fa+0]=M,this.int16[Fa+1]=L,this.int16[Fa+2]=U,this.int16[Fa+3]=H,this.int16[Fa+4]=ie,this.int16[Fa+5]=_e,this.int16[Fa+6]=Ye,this.int16[Fa+7]=ot,this.uint16[Fa+8]=dt,this.uint16[Fa+9]=zt,this.uint16[Fa+10]=Xt,this.uint16[Fa+11]=Pn,this.uint16[Fa+12]=Ln,this.uint16[Fa+13]=rr,this.uint16[Fa+14]=$n,this.uint16[Fa+15]=xr,this.uint16[Fa+16]=Lr,this.uint16[Fa+17]=Zr,this.uint16[Fa+18]=Jr,this.uint16[Fa+19]=ai,this.uint16[Fa+20]=Ki,this.uint16[Fa+21]=ca,this.uint16[Fa+22]=Ja,this.uint32[Go+12]=Sa,this.float32[Go+13]=lo,this.float32[Go+14]=Ca,this.float32[Go+15]=$o,this.float32[Go+16]=Eo,_},v}(jo);Hp.prototype.bytesPerElement=68,Ma("StructArrayLayout8i15ui1ul4f68",Hp);var iu=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var M=this.length;return this.resize(M+1),this.emplace(M,_)},v.prototype.emplace=function(_,M){return this.float32[1*_+0]=M,_},v}(jo);iu.prototype.bytesPerElement=4,Ma("StructArrayLayout1f4",iu);var $s=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L){var U=this.length;return this.resize(U+1),this.emplace(U,_,M,L)},v.prototype.emplace=function(_,M,L,U){var H=3*_;return this.int16[H+0]=M,this.int16[H+1]=L,this.int16[H+2]=U,_},v}(jo);$s.prototype.bytesPerElement=6,Ma("StructArrayLayout3i6",$s);var bf=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L){var U=this.length;return this.resize(U+1),this.emplace(U,_,M,L)},v.prototype.emplace=function(_,M,L,U){var H=4*_;return this.uint32[2*_+0]=M,this.uint16[H+2]=L,this.uint16[H+3]=U,_},v}(jo);bf.prototype.bytesPerElement=8,Ma("StructArrayLayout1ul2ui8",bf);var bc=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M){var L=this.length;return this.resize(L+1),this.emplace(L,_,M)},v.prototype.emplace=function(_,M,L){var U=2*_;return this.uint16[U+0]=M,this.uint16[U+1]=L,_},v}(jo);bc.prototype.bytesPerElement=4,Ma("StructArrayLayout2ui4",bc);var kl=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var M=this.length;return this.resize(M+1),this.emplace(M,_)},v.prototype.emplace=function(_,M){return this.uint16[1*_+0]=M,_},v}(jo);kl.prototype.bytesPerElement=2,Ma("StructArrayLayout1ui2",kl);var Th=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,M,L,U){var H=this.length;return this.resize(H+1),this.emplace(H,_,M,L,U)},v.prototype.emplace=function(_,M,L,U,H){var ie=4*_;return this.float32[ie+0]=M,this.float32[ie+1]=L,this.float32[ie+2]=U,this.float32[ie+3]=H,_},v}(jo);Th.prototype.bytesPerElement=16,Ma("StructArrayLayout4f16",Th);var x=function(u){function v(){u.apply(this,arguments)}u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v;var _={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return _.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},_.x1.get=function(){return this._structArray.int16[this._pos2+2]},_.y1.get=function(){return this._structArray.int16[this._pos2+3]},_.x2.get=function(){return this._structArray.int16[this._pos2+4]},_.y2.get=function(){return this._structArray.int16[this._pos2+5]},_.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.anchorPoint.get=function(){return new pe(this.anchorPointX,this.anchorPointY)},Object.defineProperties(v.prototype,_),v}(gf);x.prototype.size=20;var A=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.get=function(_){return new x(this,_)},v}(wh);Ma("CollisionBoxArray",A);var w=function(u){function v(){u.apply(this,arguments)}u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},_.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},_.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},_.segment.get=function(){return this._structArray.uint16[this._pos2+10]},_.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},_.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},_.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},_.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},_.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},_.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},_.placedOrientation.set=function(M){this._structArray.uint8[this._pos1+37]=M},_.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},_.hidden.set=function(M){this._structArray.uint8[this._pos1+38]=M},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},_.crossTileID.set=function(M){this._structArray.uint32[this._pos4+10]=M},_.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(v.prototype,_),v}(gf);w.prototype.size=48;var R=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.get=function(_){return new w(this,_)},v}(Lc);Ma("PlacedSymbolArray",R);var j=function(u){function v(){u.apply(this,arguments)}u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},_.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},_.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},_.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},_.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},_.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},_.key.get=function(){return this._structArray.uint16[this._pos2+8]},_.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},_.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},_.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},_.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},_.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},_.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},_.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},_.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},_.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},_.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},_.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},_.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},_.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},_.crossTileID.set=function(M){this._structArray.uint32[this._pos4+12]=M},_.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},_.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},_.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},_.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(v.prototype,_),v}(gf);j.prototype.size=68;var Y=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.get=function(_){return new j(this,_)},v}(Hp);Ma("SymbolInstanceArray",Y);var te=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.getoffsetX=function(_){return this.float32[1*_+0]},v}(iu);Ma("GlyphOffsetArray",te);var we=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.getx=function(_){return this.int16[3*_+0]},v.prototype.gety=function(_){return this.int16[3*_+1]},v.prototype.gettileUnitDistanceFromAnchor=function(_){return this.int16[3*_+2]},v}($s);Ma("SymbolLineVertexArray",we);var tt=function(u){function v(){u.apply(this,arguments)}u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v;var _={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return _.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(v.prototype,_),v}(gf);tt.prototype.size=8;var At=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.get=function(_){return new tt(this,_)},v}(bf);Ma("FeatureIndexArray",At);var $t=qs([{name:"a_pos",components:2,type:"Int16"}],4).members,qt=function(u){u===void 0&&(u=[]),this.segments=u};function rn(u,v){return 256*(u=se(Math.floor(u),0,255))+se(Math.floor(v),0,255)}qt.prototype.prepareSegment=function(u,v,_,M){var L=this.segments[this.segments.length-1];return u>qt.MAX_VERTEX_ARRAY_LENGTH&&it("Max vertices per segment is "+qt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u),(!L||L.vertexLength+u>qt.MAX_VERTEX_ARRAY_LENGTH||L.sortKey!==M)&&(L={vertexOffset:v.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},M!==void 0&&(L.sortKey=M),this.segments.push(L)),L},qt.prototype.get=function(){return this.segments},qt.prototype.destroy=function(){for(var u=0,v=this.segments;u<v.length;u+=1){var _=v[u];for(var M in _.vaos)_.vaos[M].destroy()}},qt.simpleSegment=function(u,v,_,M){return new qt([{vertexOffset:u,primitiveOffset:v,vertexLength:_,primitiveLength:M,vaos:{},sortKey:0}])},qt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ma("SegmentVector",qt);var kn=qs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Rn=ne(function(u){u.exports=function(v,_){var M,L,U,H,ie,_e,Ye,ot;for(L=v.length-(M=3&v.length),U=_,ie=3432918353,_e=461845907,ot=0;ot<L;)Ye=255&v.charCodeAt(ot)|(255&v.charCodeAt(++ot))<<8|(255&v.charCodeAt(++ot))<<16|(255&v.charCodeAt(++ot))<<24,++ot,U=27492+(65535&(H=5*(65535&(U=(U^=Ye=(65535&(Ye=(Ye=(65535&Ye)*ie+(((Ye>>>16)*ie&65535)<<16)&4294967295)<<15|Ye>>>17))*_e+(((Ye>>>16)*_e&65535)<<16)&4294967295)<<13|U>>>19))+((5*(U>>>16)&65535)<<16)&4294967295))+((58964+(H>>>16)&65535)<<16);switch(Ye=0,M){case 3:Ye^=(255&v.charCodeAt(ot+2))<<16;case 2:Ye^=(255&v.charCodeAt(ot+1))<<8;case 1:U^=Ye=(65535&(Ye=(Ye=(65535&(Ye^=255&v.charCodeAt(ot)))*ie+(((Ye>>>16)*ie&65535)<<16)&4294967295)<<15|Ye>>>17))*_e+(((Ye>>>16)*_e&65535)<<16)&4294967295}return U^=v.length,U=2246822507*(65535&(U^=U>>>16))+((2246822507*(U>>>16)&65535)<<16)&4294967295,U=3266489909*(65535&(U^=U>>>13))+((3266489909*(U>>>16)&65535)<<16)&4294967295,(U^=U>>>16)>>>0}}),qn=ne(function(u){u.exports=function(v,_){for(var M,L=v.length,U=_^L,H=0;L>=4;)M=1540483477*(65535&(M=255&v.charCodeAt(H)|(255&v.charCodeAt(++H))<<8|(255&v.charCodeAt(++H))<<16|(255&v.charCodeAt(++H))<<24))+((1540483477*(M>>>16)&65535)<<16),U=1540483477*(65535&U)+((1540483477*(U>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),L-=4,++H;switch(L){case 3:U^=(255&v.charCodeAt(H+2))<<16;case 2:U^=(255&v.charCodeAt(H+1))<<8;case 1:U=1540483477*(65535&(U^=255&v.charCodeAt(H)))+((1540483477*(U>>>16)&65535)<<16)}return U=1540483477*(65535&(U^=U>>>13))+((1540483477*(U>>>16)&65535)<<16),(U^=U>>>15)>>>0}}),wn=Rn,Kn=qn;wn.murmur3=Rn,wn.murmur2=Kn;var mr=function(){this.ids=[],this.positions=[],this.indexed=!1};mr.prototype.add=function(u,v,_,M){this.ids.push(Wr(u)),this.positions.push(v,_,M)},mr.prototype.getPositions=function(u){for(var v=Wr(u),_=0,M=this.ids.length-1;_<M;){var L=_+M>>1;this.ids[L]>=v?M=L:_=L+1}for(var U=[];this.ids[_]===v;)U.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return U},mr.serialize=function(u,v){var _=new Float64Array(u.ids),M=new Uint32Array(u.positions);return function L(U,H,ie,_e){for(;ie<_e;){for(var Ye=U[ie+_e>>1],ot=ie-1,dt=_e+1;;){do ot++;while(U[ot]<Ye);do dt--;while(U[dt]>Ye);if(ot>=dt)break;Ur(U,ot,dt),Ur(H,3*ot,3*dt),Ur(H,3*ot+1,3*dt+1),Ur(H,3*ot+2,3*dt+2)}dt-ie<_e-dt?(L(U,H,ie,dt),ie=dt+1):(L(U,H,dt+1,_e),_e=dt)}}(_,M,0,_.length-1),v&&v.push(_.buffer,M.buffer),{ids:_,positions:M}},mr.deserialize=function(u){var v=new mr;return v.ids=u.ids,v.positions=u.positions,v.indexed=!0,v};var Or=Math.pow(2,53)-1;function Wr(u){var v=+u;return!isNaN(v)&&v<=Or?v:wn(String(u))}function Ur(u,v,_){var M=u[v];u[v]=u[_],u[_]=M}Ma("FeaturePositionMap",mr);var qr=function(u,v){this.gl=u.gl,this.location=v},_i=function(u){function v(_,M){u.call(this,_,M),this.current=0}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))},v}(qr),q=function(u){function v(_,M){u.call(this,_,M),this.current=0}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1f(this.location,_))},v}(qr),ue=function(u){function v(_,M){u.call(this,_,M),this.current=[0,0]}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))},v}(qr),fe=function(u){function v(_,M){u.call(this,_,M),this.current=[0,0,0]}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))},v}(qr),Me=function(u){function v(_,M){u.call(this,_,M),this.current=[0,0,0,0]}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]&&_[3]===this.current[3]||(this.current=_,this.gl.uniform4f(this.location,_[0],_[1],_[2],_[3]))},v}(qr),ze=function(u){function v(_,M){u.call(this,_,M),this.current=Ht.transparent}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){_.r===this.current.r&&_.g===this.current.g&&_.b===this.current.b&&_.a===this.current.a||(this.current=_,this.gl.uniform4f(this.location,_.r,_.g,_.b,_.a))},v}(qr),Be=new Float32Array(16),en=function(u){function v(_,M){u.call(this,_,M),this.current=Be}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.set=function(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(var M=1;M<16;M++)if(_[M]!==this.current[M]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}},v}(qr);function Qt(u){return[rn(255*u.r,255*u.g),rn(255*u.b,255*u.a)]}var Xn=function(u,v,_){this.value=u,this.uniformNames=v.map(function(M){return"u_"+M}),this.type=_};Xn.prototype.setUniform=function(u,v,_){u.set(_.constantOr(this.value))},Xn.prototype.getBinding=function(u,v,_){return this.type==="color"?new ze(u,v):new q(u,v)};var pn=function(u,v){this.uniformNames=v.map(function(_){return"u_"+_}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};pn.prototype.setConstantPatternPositions=function(u,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=u.tlbr},pn.prototype.setUniform=function(u,v,_,M){var L=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;L&&u.set(L)},pn.prototype.getBinding=function(u,v,_){return _.substr(0,9)==="u_pattern"?new Me(u,v):new q(u,v)};var sr=function(u,v,_,M){this.expression=u,this.type=_,this.maxValue=0,this.paintVertexAttributes=v.map(function(L){return{name:"a_"+L,type:"Float32",components:_==="color"?2:1,offset:0}}),this.paintVertexArray=new M};sr.prototype.populatePaintArray=function(u,v,_,M,L){var U=this.paintVertexArray.length,H=this.expression.evaluate(new ui(0),v,{},M,[],L);this.paintVertexArray.resize(u),this._setPaintValue(U,u,H)},sr.prototype.updatePaintArray=function(u,v,_,M){var L=this.expression.evaluate({zoom:0},_,M);this._setPaintValue(u,v,L)},sr.prototype._setPaintValue=function(u,v,_){if(this.type==="color")for(var M=Qt(_),L=u;L<v;L++)this.paintVertexArray.emplace(L,M[0],M[1]);else{for(var U=u;U<v;U++)this.paintVertexArray.emplace(U,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}},sr.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var br=function(u,v,_,M,L,U){this.expression=u,this.uniformNames=v.map(function(H){return"u_"+H+"_t"}),this.type=_,this.useIntegerZoom=M,this.zoom=L,this.maxValue=0,this.paintVertexAttributes=v.map(function(H){return{name:"a_"+H,type:"Float32",components:_==="color"?4:2,offset:0}}),this.paintVertexArray=new U};br.prototype.populatePaintArray=function(u,v,_,M,L){var U=this.expression.evaluate(new ui(this.zoom),v,{},M,[],L),H=this.expression.evaluate(new ui(this.zoom+1),v,{},M,[],L),ie=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(ie,u,U,H)},br.prototype.updatePaintArray=function(u,v,_,M){var L=this.expression.evaluate({zoom:this.zoom},_,M),U=this.expression.evaluate({zoom:this.zoom+1},_,M);this._setPaintValue(u,v,L,U)},br.prototype._setPaintValue=function(u,v,_,M){if(this.type==="color")for(var L=Qt(_),U=Qt(M),H=u;H<v;H++)this.paintVertexArray.emplace(H,L[0],L[1],U[0],U[1]);else{for(var ie=u;ie<v;ie++)this.paintVertexArray.emplace(ie,_,M);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(M))}},br.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},br.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},br.prototype.setUniform=function(u,v){var _=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,M=se(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);u.set(M)},br.prototype.getBinding=function(u,v,_){return new q(u,v)};var Ai=function(u,v,_,M,L,U){this.expression=u,this.type=v,this.useIntegerZoom=_,this.zoom=M,this.layerId=U,this.zoomInPaintVertexArray=new L,this.zoomOutPaintVertexArray=new L};Ai.prototype.populatePaintArray=function(u,v,_){var M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,v.patterns&&v.patterns[this.layerId],_)},Ai.prototype.updatePaintArray=function(u,v,_,M,L){this._setPaintValues(u,v,_.patterns&&_.patterns[this.layerId],L)},Ai.prototype._setPaintValues=function(u,v,_,M){if(M&&_){var L=M[_.min],U=M[_.mid],H=M[_.max];if(L&&U&&H)for(var ie=u;ie<v;ie++)this.zoomInPaintVertexArray.emplace(ie,U.tl[0],U.tl[1],U.br[0],U.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],U.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,U.tl[0],U.tl[1],U.br[0],U.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],U.pixelRatio,H.pixelRatio)}},Ai.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,kn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,kn.members,this.expression.isStateDependent))},Ai.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xi=function(u,v,_){this.binders={},this._buffers=[];var M=[];for(var L in u.paint._values)if(_(L)){var U=u.paint.get(L);if(U instanceof Ko&&rc(U.property.specification)){var H=da(L,u.type),ie=U.value,_e=U.property.specification.type,Ye=U.property.useIntegerZoom,ot=U.property.specification["property-type"],dt=ot==="cross-faded"||ot==="cross-faded-data-driven";if(ie.kind==="constant")this.binders[L]=dt?new pn(ie.value,H):new Xn(ie.value,H,_e),M.push("/u_"+L);else if(ie.kind==="source"||dt){var zt=ua(L,_e,"source");this.binders[L]=dt?new Ai(ie,_e,Ye,v,zt,u.id):new sr(ie,H,_e,zt),M.push("/a_"+L)}else{var Xt=ua(L,_e,"composite");this.binders[L]=new br(ie,H,_e,Ye,v,Xt),M.push("/z_"+L)}}}this.cacheKey=M.sort().join("")};xi.prototype.getMaxValue=function(u){var v=this.binders[u];return v instanceof sr||v instanceof br?v.maxValue:0},xi.prototype.populatePaintArrays=function(u,v,_,M,L){for(var U in this.binders){var H=this.binders[U];(H instanceof sr||H instanceof br||H instanceof Ai)&&H.populatePaintArray(u,v,_,M,L)}},xi.prototype.setConstantPatternPositions=function(u,v){for(var _ in this.binders){var M=this.binders[_];M instanceof pn&&M.setConstantPatternPositions(u,v)}},xi.prototype.updatePaintArrays=function(u,v,_,M,L){var U=!1;for(var H in u)for(var ie=0,_e=v.getPositions(H);ie<_e.length;ie+=1){var Ye=_e[ie],ot=_.feature(Ye.index);for(var dt in this.binders){var zt=this.binders[dt];if((zt instanceof sr||zt instanceof br||zt instanceof Ai)&&zt.expression.isStateDependent===!0){var Xt=M.paint.get(dt);zt.expression=Xt.value,zt.updatePaintArray(Ye.start,Ye.end,ot,u[H],L),U=!0}}}return U},xi.prototype.defines=function(){var u=[];for(var v in this.binders){var _=this.binders[v];(_ instanceof Xn||_ instanceof pn)&&u.push.apply(u,_.uniformNames.map(function(M){return"#define HAS_UNIFORM_"+M}))}return u},xi.prototype.getBinderAttributes=function(){var u=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof sr||_ instanceof br)for(var M=0;M<_.paintVertexAttributes.length;M++)u.push(_.paintVertexAttributes[M].name);else if(_ instanceof Ai)for(var L=0;L<kn.members.length;L++)u.push(kn.members[L].name)}return u},xi.prototype.getBinderUniforms=function(){var u=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Xn||_ instanceof pn||_ instanceof br)for(var M=0,L=_.uniformNames;M<L.length;M+=1)u.push(L[M])}return u},xi.prototype.getPaintVertexBuffers=function(){return this._buffers},xi.prototype.getUniforms=function(u,v){var _=[];for(var M in this.binders){var L=this.binders[M];if(L instanceof Xn||L instanceof pn||L instanceof br)for(var U=0,H=L.uniformNames;U<H.length;U+=1){var ie=H[U];if(v[ie]){var _e=L.getBinding(u,v[ie],ie);_.push({name:ie,property:M,binding:_e})}}}return _},xi.prototype.setUniforms=function(u,v,_,M){for(var L=0,U=v;L<U.length;L+=1){var H=U[L],ie=H.name,_e=H.property;this.binders[_e].setUniform(H.binding,M,_.get(_e),ie)}},xi.prototype.updatePaintBuffers=function(u){for(var v in this._buffers=[],this.binders){var _=this.binders[v];if(u&&_ instanceof Ai){var M=u.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(_ instanceof sr||_ instanceof br)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}},xi.prototype.upload=function(u){for(var v in this.binders){var _=this.binders[v];(_ instanceof sr||_ instanceof br||_ instanceof Ai)&&_.upload(u)}this.updatePaintBuffers()},xi.prototype.destroy=function(){for(var u in this.binders){var v=this.binders[u];(v instanceof sr||v instanceof br||v instanceof Ai)&&v.destroy()}};var ci=function(u,v,_){_===void 0&&(_=function(){return!0}),this.programConfigurations={};for(var M=0,L=u;M<L.length;M+=1){var U=L[M];this.programConfigurations[U.id]=new xi(U,v,_)}this.needsUpload=!1,this._featureMap=new mr,this._bufferOffset=0};function da(u,v){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(v+"-","").replace(/-/g,"_")]}function ua(u,v,_){var M={color:{source:Gh,composite:Th},number:{source:iu,composite:Gh}},L=function(U){return{"line-pattern":{source:kc,composite:kc},"fill-pattern":{source:kc,composite:kc},"fill-extrusion-pattern":{source:kc,composite:kc}}[U]}(u);return L&&L[_]||M[v][_]}ci.prototype.populatePaintArrays=function(u,v,_,M,L,U){for(var H in this.programConfigurations)this.programConfigurations[H].populatePaintArrays(u,v,M,L,U);v.id!==void 0&&this._featureMap.add(v.id,_,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0},ci.prototype.updatePaintArrays=function(u,v,_,M){for(var L=0,U=_;L<U.length;L+=1){var H=U[L];this.needsUpload=this.programConfigurations[H.id].updatePaintArrays(u,this._featureMap,v,H,M)||this.needsUpload}},ci.prototype.get=function(u){return this.programConfigurations[u]},ci.prototype.upload=function(u){if(this.needsUpload){for(var v in this.programConfigurations)this.programConfigurations[v].upload(u);this.needsUpload=!1}},ci.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()},Ma("ConstantBinder",Xn),Ma("CrossFadedConstantBinder",pn),Ma("SourceExpressionBinder",sr),Ma("CrossFadedCompositeBinder",Ai),Ma("CompositeExpressionBinder",br),Ma("ProgramConfiguration",xi,{omit:["_buffers"]}),Ma("ProgramConfigurationSet",ci);var la=Math.pow(2,14)-1,Ua=-la-1;function $a(u){for(var v=8192/u.extent,_=u.loadGeometry(),M=0;M<_.length;M++)for(var L=_[M],U=0;U<L.length;U++){var H=L[U],ie=Math.round(H.x*v),_e=Math.round(H.y*v);H.x=se(ie,Ua,la),H.y=se(_e,Ua,la),(ie<H.x||ie>H.x+1||_e<H.y||_e>H.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return _}function oo(u,v){return{type:u.type,id:u.id,properties:u.properties,geometry:v?$a(u):[]}}function ms(u,v,_,M,L){u.emplaceBack(2*v+(M+1)/2,2*_+(L+1)/2)}var bs=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new yc,this.indexArray=new po,this.segments=new qt,this.programConfigurations=new ci(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Fs(u,v){for(var _=0;_<u.length;_++)if(xc(v,u[_]))return!0;for(var M=0;M<v.length;M++)if(xc(u,v[M]))return!0;return!!Tu(u,v)}function rs(u,v,_){return!!xc(u,v)||!!bu(v,u,_)}function So(u,v){if(u.length===1)return Ll(v,u[0]);for(var _=0;_<v.length;_++)for(var M=v[_],L=0;L<M.length;L++)if(xc(u,M[L]))return!0;for(var U=0;U<u.length;U++)if(Ll(v,u[U]))return!0;for(var H=0;H<v.length;H++)if(Tu(u,v[H]))return!0;return!1}function es(u,v,_){if(u.length>1){if(Tu(u,v))return!0;for(var M=0;M<v.length;M++)if(bu(v[M],u,_))return!0}for(var L=0;L<u.length;L++)if(bu(u[L],v,_))return!0;return!1}function Tu(u,v){if(u.length===0||v.length===0)return!1;for(var _=0;_<u.length-1;_++)for(var M=u[_],L=u[_+1],U=0;U<v.length-1;U++)if(rl(M,L,v[U],v[U+1]))return!0;return!1}function rl(u,v,_,M){return De(u,_,M)!==De(v,_,M)&&De(u,v,_)!==De(u,v,M)}function bu(u,v,_){var M=_*_;if(v.length===1)return u.distSqr(v[0])<M;for(var L=1;L<v.length;L++)if(Du(u,v[L-1],v[L])<M)return!0;return!1}function Du(u,v,_){var M=v.distSqr(_);if(M===0)return u.distSqr(v);var L=((u.x-v.x)*(_.x-v.x)+(u.y-v.y)*(_.y-v.y))/M;return u.distSqr(L<0?v:L>1?_:_.sub(v)._mult(L)._add(v))}function Ll(u,v){for(var _,M,L,U=!1,H=0;H<u.length;H++)for(var ie=0,_e=(_=u[H]).length-1;ie<_.length;_e=ie++)(M=_[ie]).y>v.y!=(L=_[_e]).y>v.y&&v.x<(L.x-M.x)*(v.y-M.y)/(L.y-M.y)+M.x&&(U=!U);return U}function xc(u,v){for(var _=!1,M=0,L=u.length-1;M<u.length;L=M++){var U=u[M],H=u[L];U.y>v.y!=H.y>v.y&&v.x<(H.x-U.x)*(v.y-U.y)/(H.y-U.y)+U.x&&(_=!_)}return _}function ef(u,v,_){var M=_[0],L=_[2];if(u.x<M.x&&v.x<M.x||u.x>L.x&&v.x>L.x||u.y<M.y&&v.y<M.y||u.y>L.y&&v.y>L.y)return!1;var U=De(u,v,_[0]);return U!==De(u,v,_[1])||U!==De(u,v,_[2])||U!==De(u,v,_[3])}function pl(u,v,_){var M=v.paint.get(u).value;return M.kind==="constant"?M.value:_.programConfigurations.get(v.id).getMaxValue(u)}function Au(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ac(u,v,_,M,L){if(!v[0]&&!v[1])return u;var U=pe.convert(v)._mult(L);_==="viewport"&&U._rotate(-M);for(var H=[],ie=0;ie<u.length;ie++)H.push(u[ie].sub(U));return H}bs.prototype.populate=function(u,v,_){var M=this.layers[0],L=[],U=null;M.type==="circle"&&(U=M.layout.get("circle-sort-key"));for(var H=0,ie=u;H<ie.length;H+=1){var _e=ie[H],Ye=_e.feature,ot=_e.id,dt=_e.index,zt=_e.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,Pn=oo(Ye,Xt);if(this.layers[0]._featureFilter.filter(new ui(this.zoom),Pn,_)){var Ln=U?U.evaluate(Pn,{},_):void 0,rr={id:ot,properties:Ye.properties,type:Ye.type,sourceLayerIndex:zt,index:dt,geometry:Xt?Pn.geometry:$a(Ye),patterns:{},sortKey:Ln};L.push(rr)}}U&&L.sort(function(ca,Ja){return ca.sortKey-Ja.sortKey});for(var $n=0,xr=L;$n<xr.length;$n+=1){var Lr=xr[$n],Zr=Lr.geometry,Jr=Lr.index,ai=Lr.sourceLayerIndex,Ki=u[Jr].feature;this.addFeature(Lr,Zr,Jr,_),v.featureIndex.insert(Ki,Zr,Jr,ai,this.index)}},bs.prototype.update=function(u,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,v,this.stateDependentLayers,_)},bs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,$t),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bs.prototype.addFeature=function(u,v,_,M){for(var L=0,U=v;L<U.length;L+=1)for(var H=0,ie=U[L];H<ie.length;H+=1){var _e=ie[H],Ye=_e.x,ot=_e.y;if(!(Ye<0||Ye>=8192||ot<0||ot>=8192)){var dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),zt=dt.vertexLength;ms(this.layoutVertexArray,Ye,ot,-1,-1),ms(this.layoutVertexArray,Ye,ot,1,-1),ms(this.layoutVertexArray,Ye,ot,1,1),ms(this.layoutVertexArray,Ye,ot,-1,1),this.indexArray.emplaceBack(zt,zt+1,zt+2),this.indexArray.emplaceBack(zt,zt+3,zt+2),dt.vertexLength+=4,dt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{},M)},Ma("CircleBucket",bs,{omit:["layers"]});var Dc=new os({"circle-sort-key":new ra(kt.layout_circle["circle-sort-key"])}),xf={paint:new os({"circle-radius":new ra(kt.paint_circle["circle-radius"]),"circle-color":new ra(kt.paint_circle["circle-color"]),"circle-blur":new ra(kt.paint_circle["circle-blur"]),"circle-opacity":new ra(kt.paint_circle["circle-opacity"]),"circle-translate":new oa(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new oa(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oa(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oa(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ra(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ra(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ra(kt.paint_circle["circle-stroke-opacity"])}),layout:Dc},ss=typeof Float32Array!="undefined"?Float32Array:Array;function Dl(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function vl(u,v,_){var M=v[0],L=v[1],U=v[2],H=v[3],ie=v[4],_e=v[5],Ye=v[6],ot=v[7],dt=v[8],zt=v[9],Xt=v[10],Pn=v[11],Ln=v[12],rr=v[13],$n=v[14],xr=v[15],Lr=_[0],Zr=_[1],Jr=_[2],ai=_[3];return u[0]=Lr*M+Zr*ie+Jr*dt+ai*Ln,u[1]=Lr*L+Zr*_e+Jr*zt+ai*rr,u[2]=Lr*U+Zr*Ye+Jr*Xt+ai*$n,u[3]=Lr*H+Zr*ot+Jr*Pn+ai*xr,u[4]=(Lr=_[4])*M+(Zr=_[5])*ie+(Jr=_[6])*dt+(ai=_[7])*Ln,u[5]=Lr*L+Zr*_e+Jr*zt+ai*rr,u[6]=Lr*U+Zr*Ye+Jr*Xt+ai*$n,u[7]=Lr*H+Zr*ot+Jr*Pn+ai*xr,u[8]=(Lr=_[8])*M+(Zr=_[9])*ie+(Jr=_[10])*dt+(ai=_[11])*Ln,u[9]=Lr*L+Zr*_e+Jr*zt+ai*rr,u[10]=Lr*U+Zr*Ye+Jr*Xt+ai*$n,u[11]=Lr*H+Zr*ot+Jr*Pn+ai*xr,u[12]=(Lr=_[12])*M+(Zr=_[13])*ie+(Jr=_[14])*dt+(ai=_[15])*Ln,u[13]=Lr*L+Zr*_e+Jr*zt+ai*rr,u[14]=Lr*U+Zr*Ye+Jr*Xt+ai*$n,u[15]=Lr*H+Zr*ot+Jr*Pn+ai*xr,u}Math.hypot||(Math.hypot=function(){for(var u=arguments,v=0,_=arguments.length;_--;)v+=u[_]*u[_];return Math.sqrt(v)});var nh,Wp=vl;function Ff(u,v,_){var M=v[0],L=v[1],U=v[2],H=v[3];return u[0]=_[0]*M+_[4]*L+_[8]*U+_[12]*H,u[1]=_[1]*M+_[5]*L+_[9]*U+_[13]*H,u[2]=_[2]*M+_[6]*L+_[10]*U+_[14]*H,u[3]=_[3]*M+_[7]*L+_[11]*U+_[15]*H,u}nh=new ss(3),ss!=Float32Array&&(nh[0]=0,nh[1]=0,nh[2]=0),function(){var u=new ss(4);ss!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0)}();var yv=(function(){var u=new ss(2);ss!=Float32Array&&(u[0]=0,u[1]=0)}(),function(u){function v(_){u.call(this,_,xf)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.createBucket=function(_){return new bs(_)},v.prototype.queryRadius=function(_){var M=_;return pl("circle-radius",this,M)+pl("circle-stroke-width",this,M)+Au(this.paint.get("circle-translate"))},v.prototype.queryIntersectsFeature=function(_,M,L,U,H,ie,_e,Ye){for(var ot=ac(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ie.angle,_e),dt=this.paint.get("circle-radius").evaluate(M,L)+this.paint.get("circle-stroke-width").evaluate(M,L),zt=this.paint.get("circle-pitch-alignment")==="map",Xt=zt?ot:function(Ki,ca){return Ki.map(function(Ja){return Ld(Ja,ca)})}(ot,Ye),Pn=zt?dt*_e:dt,Ln=0,rr=U;Ln<rr.length;Ln+=1)for(var $n=0,xr=rr[Ln];$n<xr.length;$n+=1){var Lr=xr[$n],Zr=zt?Lr:Ld(Lr,Ye),Jr=Pn,ai=Ff([],[Lr.x,Lr.y,0,1],Ye);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Jr*=ai[3]/ie.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Jr*=ie.cameraToCenterDistance/ai[3]),rs(Xt,Zr,Jr))return!0}return!1},v}(Fo));function Ld(u,v){var _=Ff([],[u.x,u.y,0,1],v);return new pe(_[0]/_[3],_[1]/_[3])}var Yh=function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v}(bs);function zf(u,v,_,M){var L=v.width,U=v.height;if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==L*U*_)throw new RangeError("mismatched image size")}else M=new Uint8Array(L*U*_);return u.width=L,u.height=U,u.data=M,u}function $p(u,v,_){var M=v.width,L=v.height;if(M!==u.width||L!==u.height){var U=zf({},{width:M,height:L},_);bm(u,U,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,M),height:Math.min(u.height,L)},_),u.width=M,u.height=L,u.data=U.data}}function bm(u,v,_,M,L,U){if(L.width===0||L.height===0)return v;if(L.width>u.width||L.height>u.height||_.x>u.width-L.width||_.y>u.height-L.height)throw new RangeError("out of range source coordinates for image copy");if(L.width>v.width||L.height>v.height||M.x>v.width-L.width||M.y>v.height-L.height)throw new RangeError("out of range destination coordinates for image copy");for(var H=u.data,ie=v.data,_e=0;_e<L.height;_e++)for(var Ye=((_.y+_e)*u.width+_.x)*U,ot=((M.y+_e)*v.width+M.x)*U,dt=0;dt<L.width*U;dt++)ie[ot+dt]=H[Ye+dt];return v}Ma("HeatmapBucket",Yh,{omit:["layers"]});var vp=function(u,v){zf(this,u,1,v)};vp.prototype.resize=function(u){$p(this,u,1)},vp.prototype.clone=function(){return new vp({width:this.width,height:this.height},new Uint8Array(this.data))},vp.copy=function(u,v,_,M,L){bm(u,v,_,M,L,1)};var Nc=function(u,v){zf(this,u,4,v)};Nc.prototype.resize=function(u){$p(this,u,4)},Nc.prototype.replace=function(u,v){v?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u},Nc.prototype.clone=function(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))},Nc.copy=function(u,v,_,M,L){bm(u,v,_,M,L,4)},Ma("AlphaImage",vp),Ma("RGBAImage",Nc);var yg={paint:new os({"heatmap-radius":new ra(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ra(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oa(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new No(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oa(kt.paint_heatmap["heatmap-opacity"])})};function _g(u){var v={},_=u.resolution||256,M=u.clips?u.clips.length:1,L=u.image||new Nc({width:_,height:M}),U=function(Pn,Ln,rr){v[u.evaluationKey]=rr;var $n=u.expression.evaluate(v);L.data[Pn+Ln+0]=Math.floor(255*$n.r/$n.a),L.data[Pn+Ln+1]=Math.floor(255*$n.g/$n.a),L.data[Pn+Ln+2]=Math.floor(255*$n.b/$n.a),L.data[Pn+Ln+3]=Math.floor(255*$n.a)};if(u.clips)for(var H=0,ie=0;H<M;++H,ie+=4*_)for(var _e=0,Ye=0;_e<_;_e++,Ye+=4){var ot=_e/(_-1),dt=u.clips[H];U(ie,Ye,dt.start*(1-ot)+dt.end*ot)}else for(var zt=0,Xt=0;zt<_;zt++,Xt+=4)U(0,Xt,zt/(_-1));return L}var Gp=function(u){function v(_){u.call(this,_,yg),this._updateColorRamp()}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Yh(_)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="heatmap-color"&&this._updateColorRamp()},v.prototype._updateColorRamp=function(){this.colorRamp=_g({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},v.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},v}(Fo),Ay={paint:new os({"hillshade-illumination-direction":new oa(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oa(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oa(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oa(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oa(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oa(kt.paint_hillshade["hillshade-accent-color"])})},bg=function(u){function v(_){u.call(this,_,Ay)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},v}(Fo),xg=qs([{name:"a_pos",components:2,type:"Int16"}],4).members,Kv=k0,Cy=k0;function k0(u,v,_){_=_||2;var M,L,U,H,ie,_e,Ye,ot=v&&v.length,dt=ot?v[0]*_:u.length,zt=xm(u,0,dt,_,!0),Xt=[];if(!zt||zt.next===zt.prev)return Xt;if(ot&&(zt=function(Ln,rr,$n,xr){var Lr,Zr,Jr,ai=[];for(Lr=0,Zr=rr.length;Lr<Zr;Lr++)(Jr=xm(Ln,rr[Lr]*xr,Lr<Zr-1?rr[Lr+1]*xr:Ln.length,xr,!1))===Jr.next&&(Jr.steiner=!0),ai.push(oc(Jr));for(ai.sort(Sm),Lr=0;Lr<ai.length;Lr++)L0(ai[Lr],$n),$n=mp($n,$n.next);return $n}(u,v,zt,_)),u.length>80*_){M=U=u[0],L=H=u[1];for(var Pn=_;Pn<dt;Pn+=_)(ie=u[Pn])<M&&(M=ie),(_e=u[Pn+1])<L&&(L=_e),ie>U&&(U=ie),_e>H&&(H=_e);Ye=(Ye=Math.max(U-M,H-L))!==0?1/Ye:0}return Qv(zt,Xt,_,M,L,Ye),Xt}function xm(u,v,_,M,L){var U,H;if(L===Bd(u,v,_,M)>0)for(U=v;U<_;U+=M)H=_p(U,u[U],u[U+1],H);else for(U=_-M;U>=v;U-=M)H=_p(U,u[U],u[U+1],H);return H&&Nd(H,H.next)&&(pd(H),H=H.next),H}function mp(u,v){if(!u)return u;v||(v=u);var _,M=u;do if(_=!1,M.steiner||!Nd(M,M.next)&&Gu(M.prev,M,M.next)!==0)M=M.next;else{if(pd(M),(M=v=M.prev)===M.next)break;_=!0}while(_||M!==v);return v}function Qv(u,v,_,M,L,U,H){if(u){!H&&U&&function(ot,dt,zt,Xt){var Pn=ot;do Pn.z===null&&(Pn.z=yp(Pn.x,Pn.y,dt,zt,Xt)),Pn.prevZ=Pn.prev,Pn.nextZ=Pn.next,Pn=Pn.next;while(Pn!==ot);Pn.prevZ.nextZ=null,Pn.prevZ=null,function(Ln){var rr,$n,xr,Lr,Zr,Jr,ai,Ki,ca=1;do{for($n=Ln,Ln=null,Zr=null,Jr=0;$n;){for(Jr++,xr=$n,ai=0,rr=0;rr<ca&&(ai++,xr=xr.nextZ);rr++);for(Ki=ca;ai>0||Ki>0&&xr;)ai!==0&&(Ki===0||!xr||$n.z<=xr.z)?(Lr=$n,$n=$n.nextZ,ai--):(Lr=xr,xr=xr.nextZ,Ki--),Zr?Zr.nextZ=Lr:Ln=Lr,Lr.prevZ=Zr,Zr=Lr;$n=xr}Zr.nextZ=null,ca*=2}while(Jr>1)}(Pn)}(u,M,L,U);for(var ie,_e,Ye=u;u.prev!==u.next;)if(ie=u.prev,_e=u.next,U?Em(u,M,L,U):Oy(u))v.push(ie.i/_),v.push(u.i/_),v.push(_e.i/_),pd(u),u=_e.next,Ye=_e.next;else if((u=_e)===Ye){H?H===1?Qv(u=a1(mp(u),v,_),v,_,M,L,U,2):H===2&&Eg(u,v,_,M,L,U):Qv(mp(u),v,_,M,L,U,1);break}}}function Oy(u){var v=u.prev,_=u,M=u.next;if(Gu(v,_,M)>=0)return!1;for(var L=u.next.next;L!==u.prev;){if(hd(v.x,v.y,_.x,_.y,M.x,M.y,L.x,L.y)&&Gu(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function Em(u,v,_,M){var L=u.prev,U=u,H=u.next;if(Gu(L,U,H)>=0)return!1;for(var ie=L.x>U.x?L.x>H.x?L.x:H.x:U.x>H.x?U.x:H.x,_e=L.y>U.y?L.y>H.y?L.y:H.y:U.y>H.y?U.y:H.y,Ye=yp(L.x<U.x?L.x<H.x?L.x:H.x:U.x<H.x?U.x:H.x,L.y<U.y?L.y<H.y?L.y:H.y:U.y<H.y?U.y:H.y,v,_,M),ot=yp(ie,_e,v,_,M),dt=u.prevZ,zt=u.nextZ;dt&&dt.z>=Ye&&zt&&zt.z<=ot;){if(dt!==u.prev&&dt!==u.next&&hd(L.x,L.y,U.x,U.y,H.x,H.y,dt.x,dt.y)&&Gu(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,zt!==u.prev&&zt!==u.next&&hd(L.x,L.y,U.x,U.y,H.x,H.y,zt.x,zt.y)&&Gu(zt.prev,zt,zt.next)>=0))return!1;zt=zt.nextZ}for(;dt&&dt.z>=Ye;){if(dt!==u.prev&&dt!==u.next&&hd(L.x,L.y,U.x,U.y,H.x,H.y,dt.x,dt.y)&&Gu(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;zt&&zt.z<=ot;){if(zt!==u.prev&&zt!==u.next&&hd(L.x,L.y,U.x,U.y,H.x,H.y,zt.x,zt.y)&&Gu(zt.prev,zt,zt.next)>=0)return!1;zt=zt.nextZ}return!0}function a1(u,v,_){var M=u;do{var L=M.prev,U=M.next.next;!Nd(L,U)&&D0(L,M,M.next,U)&&Ah(L,U)&&Ah(U,L)&&(v.push(L.i/_),v.push(M.i/_),v.push(U.i/_),pd(M),pd(M.next),M=u=U),M=M.next}while(M!==u);return mp(M)}function Eg(u,v,_,M,L,U){var H=u;do{for(var ie=H.next.next;ie!==H.prev;){if(H.i!==ie.i&&Dd(H,ie)){var _e=Xp(H,ie);return H=mp(H,H.next),_e=mp(_e,_e.next),Qv(H,v,_,M,L,U),void Qv(_e,v,_,M,L,U)}ie=ie.next}H=H.next}while(H!==u)}function Sm(u,v){return u.x-v.x}function L0(u,v){if(v=function(M,L){var U,H=L,ie=M.x,_e=M.y,Ye=-1/0;do{if(_e<=H.y&&_e>=H.next.y&&H.next.y!==H.y){var ot=H.x+(_e-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(ot<=ie&&ot>Ye){if(Ye=ot,ot===ie){if(_e===H.y)return H;if(_e===H.next.y)return H.next}U=H.x<H.next.x?H:H.next}}H=H.next}while(H!==L);if(!U)return null;if(ie===Ye)return U;var dt,zt=U,Xt=U.x,Pn=U.y,Ln=1/0;H=U;do ie>=H.x&&H.x>=Xt&&ie!==H.x&&hd(_e<Pn?ie:Ye,_e,Xt,Pn,_e<Pn?Ye:ie,_e,H.x,H.y)&&(dt=Math.abs(_e-H.y)/(ie-H.x),Ah(H,M)&&(dt<Ln||dt===Ln&&(H.x>U.x||H.x===U.x&&gp(U,H)))&&(U=H,Ln=dt)),H=H.next;while(H!==zt);return U}(u,v)){var _=Xp(v,u);mp(v,v.next),mp(_,_.next)}}function gp(u,v){return Gu(u.prev,u,v.prev)<0&&Gu(v.next,u,u.next)<0}function yp(u,v,_,M,L){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-_)*L)|u<<8))|u<<4))|u<<2))|u<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-M)*L)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function oc(u){var v=u,_=u;do(v.x<_.x||v.x===_.x&&v.y<_.y)&&(_=v),v=v.next;while(v!==u);return _}function hd(u,v,_,M,L,U,H,ie){return(L-H)*(v-ie)-(u-H)*(U-ie)>=0&&(u-H)*(M-ie)-(_-H)*(v-ie)>=0&&(_-H)*(U-ie)-(L-H)*(M-ie)>=0}function Dd(u,v){return u.next.i!==v.i&&u.prev.i!==v.i&&!function(_,M){var L=_;do{if(L.i!==_.i&&L.next.i!==_.i&&L.i!==M.i&&L.next.i!==M.i&&D0(L,L.next,_,M))return!0;L=L.next}while(L!==_);return!1}(u,v)&&(Ah(u,v)&&Ah(v,u)&&function(_,M){var L=_,U=!1,H=(_.x+M.x)/2,ie=(_.y+M.y)/2;do L.y>ie!=L.next.y>ie&&L.next.y!==L.y&&H<(L.next.x-L.x)*(ie-L.y)/(L.next.y-L.y)+L.x&&(U=!U),L=L.next;while(L!==_);return U}(u,v)&&(Gu(u.prev,u,v.prev)||Gu(u,v.prev,v))||Nd(u,v)&&Gu(u.prev,u,u.next)>0&&Gu(v.prev,v,v.next)>0)}function Gu(u,v,_){return(v.y-u.y)*(_.x-v.x)-(v.x-u.x)*(_.y-v.y)}function Nd(u,v){return u.x===v.x&&u.y===v.y}function D0(u,v,_,M){var L=dd(Gu(u,v,_)),U=dd(Gu(u,v,M)),H=dd(Gu(_,M,u)),ie=dd(Gu(_,M,v));return L!==U&&H!==ie||!(L!==0||!_v(u,_,v))||!(U!==0||!_v(u,M,v))||!(H!==0||!_v(_,u,M))||!(ie!==0||!_v(_,v,M))}function _v(u,v,_){return v.x<=Math.max(u.x,_.x)&&v.x>=Math.min(u.x,_.x)&&v.y<=Math.max(u.y,_.y)&&v.y>=Math.min(u.y,_.y)}function dd(u){return u>0?1:u<0?-1:0}function Ah(u,v){return Gu(u.prev,u,u.next)<0?Gu(u,v,u.next)>=0&&Gu(u,u.prev,v)>=0:Gu(u,v,u.prev)<0||Gu(u,u.next,v)<0}function Xp(u,v){var _=new rh(u.i,u.x,u.y),M=new rh(v.i,v.x,v.y),L=u.next,U=v.prev;return u.next=v,v.prev=u,_.next=L,L.prev=_,M.next=_,_.prev=M,U.next=M,M.prev=U,M}function _p(u,v,_,M){var L=new rh(u,v,_);return M?(L.next=M.next,L.prev=M,M.next.prev=L,M.next=L):(L.prev=L,L.next=L),L}function pd(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function rh(u,v,_){this.i=u,this.x=v,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Bd(u,v,_,M){for(var L=0,U=v,H=_-M;U<_;U+=M)L+=(u[H]-u[U])*(u[U+1]+u[H+1]),H=U;return L}function Jv(u,v,_,M,L){(function U(H,ie,_e,Ye,ot){for(;Ye>_e;){if(Ye-_e>600){var dt=Ye-_e+1,zt=ie-_e+1,Xt=Math.log(dt),Pn=.5*Math.exp(2*Xt/3),Ln=.5*Math.sqrt(Xt*Pn*(dt-Pn)/dt)*(zt-dt/2<0?-1:1);U(H,ie,Math.max(_e,Math.floor(ie-zt*Pn/dt+Ln)),Math.min(Ye,Math.floor(ie+(dt-zt)*Pn/dt+Ln)),ot)}var rr=H[ie],$n=_e,xr=Ye;for(Fd(H,_e,ie),ot(H[Ye],rr)>0&&Fd(H,_e,Ye);$n<xr;){for(Fd(H,$n,xr),$n++,xr--;ot(H[$n],rr)<0;)$n++;for(;ot(H[xr],rr)>0;)xr--}ot(H[_e],rr)===0?Fd(H,_e,xr):Fd(H,++xr,Ye),xr<=ie&&(_e=xr+1),ie<=xr&&(Ye=xr-1)}})(u,v,_||0,M||u.length-1,L||bp)}function Fd(u,v,_){var M=u[v];u[v]=u[_],u[_]=M}function bp(u,v){return u<v?-1:u>v?1:0}function zd(u,v){var _=u.length;if(_<=1)return[u];for(var M,L,U=[],H=0;H<_;H++){var ie=cn(u[H]);ie!==0&&(u[H].area=Math.abs(ie),L===void 0&&(L=ie<0),L===ie<0?(M&&U.push(M),M=[u[H]]):M.push(u[H]))}if(M&&U.push(M),v>1)for(var _e=0;_e<U.length;_e++)U[_e].length<=v||(Jv(U[_e],v,1,U[_e].length-1,wm),U[_e]=U[_e].slice(0,v));return U}function wm(u,v){return v.area-u.area}function Tm(u,v,_){for(var M=_.patternDependencies,L=!1,U=0,H=v;U<H.length;U+=1){var ie=H[U].paint.get(u+"-pattern");ie.isConstant()||(L=!0);var _e=ie.constantOr(null);_e&&(L=!0,M[_e.to]=!0,M[_e.from]=!0)}return L}function Sg(u,v,_,M,L){for(var U=L.patternDependencies,H=0,ie=v;H<ie.length;H+=1){var _e=ie[H],Ye=_e.paint.get(u+"-pattern").value;if(Ye.kind!=="constant"){var ot=Ye.evaluate({zoom:M-1},_,{},L.availableImages),dt=Ye.evaluate({zoom:M},_,{},L.availableImages),zt=Ye.evaluate({zoom:M+1},_,{},L.availableImages);dt=dt&&dt.name?dt.name:dt,zt=zt&&zt.name?zt.name:zt,U[ot=ot&&ot.name?ot.name:ot]=!0,U[dt]=!0,U[zt]=!0,_.patterns[_e.id]={min:ot,mid:dt,max:zt}}}return _}k0.deviation=function(u,v,_,M){var L=v&&v.length,U=Math.abs(Bd(u,0,L?v[0]*_:u.length,_));if(L)for(var H=0,ie=v.length;H<ie;H++)U-=Math.abs(Bd(u,v[H]*_,H<ie-1?v[H+1]*_:u.length,_));var _e=0;for(H=0;H<M.length;H+=3){var Ye=M[H]*_,ot=M[H+1]*_,dt=M[H+2]*_;_e+=Math.abs((u[Ye]-u[dt])*(u[ot+1]-u[Ye+1])-(u[Ye]-u[ot])*(u[dt+1]-u[Ye+1]))}return U===0&&_e===0?0:Math.abs((_e-U)/U)},k0.flatten=function(u){for(var v=u[0][0].length,_={vertices:[],holes:[],dimensions:v},M=0,L=0;L<u.length;L++){for(var U=0;U<u[L].length;U++)for(var H=0;H<v;H++)_.vertices.push(u[L][U][H]);L>0&&_.holes.push(M+=u[L-1].length)}return _},Kv.default=Cy;var qh=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new yc,this.indexArray=new po,this.indexArray2=new bc,this.programConfigurations=new ci(u.layers,u.zoom),this.segments=new qt,this.segments2=new qt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};qh.prototype.populate=function(u,v,_){this.hasPattern=Tm("fill",this.layers,v);for(var M=this.layers[0].layout.get("fill-sort-key"),L=[],U=0,H=u;U<H.length;U+=1){var ie=H[U],_e=ie.feature,Ye=ie.id,ot=ie.index,dt=ie.sourceLayerIndex,zt=this.layers[0]._featureFilter.needGeometry,Xt=oo(_e,zt);if(this.layers[0]._featureFilter.filter(new ui(this.zoom),Xt,_)){var Pn=M?M.evaluate(Xt,{},_,v.availableImages):void 0,Ln={id:Ye,properties:_e.properties,type:_e.type,sourceLayerIndex:dt,index:ot,geometry:zt?Xt.geometry:$a(_e),patterns:{},sortKey:Pn};L.push(Ln)}}M&&L.sort(function(Ki,ca){return Ki.sortKey-ca.sortKey});for(var rr=0,$n=L;rr<$n.length;rr+=1){var xr=$n[rr],Lr=xr.geometry,Zr=xr.index,Jr=xr.sourceLayerIndex;if(this.hasPattern){var ai=Sg("fill",this.layers,xr,this.zoom,v);this.patternFeatures.push(ai)}else this.addFeature(xr,Lr,Zr,_,{});v.featureIndex.insert(u[Zr].feature,Lr,Zr,Jr,this.index)}},qh.prototype.update=function(u,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,v,this.stateDependentLayers,_)},qh.prototype.addFeatures=function(u,v,_){for(var M=0,L=this.patternFeatures;M<L.length;M+=1){var U=L[M];this.addFeature(U,U.geometry,U.index,v,_)}},qh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qh.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,xg),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0},qh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},qh.prototype.addFeature=function(u,v,_,M,L){for(var U=0,H=zd(v,500);U<H.length;U+=1){for(var ie=H[U],_e=0,Ye=0,ot=ie;Ye<ot.length;Ye+=1)_e+=ot[Ye].length;for(var dt=this.segments.prepareSegment(_e,this.layoutVertexArray,this.indexArray),zt=dt.vertexLength,Xt=[],Pn=[],Ln=0,rr=ie;Ln<rr.length;Ln+=1){var $n=rr[Ln];if($n.length!==0){$n!==ie[0]&&Pn.push(Xt.length/2);var xr=this.segments2.prepareSegment($n.length,this.layoutVertexArray,this.indexArray2),Lr=xr.vertexLength;this.layoutVertexArray.emplaceBack($n[0].x,$n[0].y),this.indexArray2.emplaceBack(Lr+$n.length-1,Lr),Xt.push($n[0].x),Xt.push($n[0].y);for(var Zr=1;Zr<$n.length;Zr++)this.layoutVertexArray.emplaceBack($n[Zr].x,$n[Zr].y),this.indexArray2.emplaceBack(Lr+Zr-1,Lr+Zr),Xt.push($n[Zr].x),Xt.push($n[Zr].y);xr.vertexLength+=$n.length,xr.primitiveLength+=$n.length}}for(var Jr=Kv(Xt,Pn),ai=0;ai<Jr.length;ai+=3)this.indexArray.emplaceBack(zt+Jr[ai],zt+Jr[ai+1],zt+Jr[ai+2]);dt.vertexLength+=_e,dt.primitiveLength+=Jr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,L,M)},Ma("FillBucket",qh,{omit:["layers","patternFeatures"]});var Yp=new os({"fill-sort-key":new ra(kt.layout_fill["fill-sort-key"])}),My={paint:new os({"fill-antialias":new oa(kt.paint_fill["fill-antialias"]),"fill-opacity":new ra(kt.paint_fill["fill-opacity"]),"fill-color":new ra(kt.paint_fill["fill-color"]),"fill-outline-color":new ra(kt.paint_fill["fill-outline-color"]),"fill-translate":new oa(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new oa(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qo(kt.paint_fill["fill-pattern"])}),layout:Yp},Ry=function(u){function v(_){u.call(this,_,My)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.recalculate=function(_,M){u.prototype.recalculate.call(this,_,M);var L=this.paint._values["fill-outline-color"];L.value.kind==="constant"&&L.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},v.prototype.createBucket=function(_){return new qh(_)},v.prototype.queryRadius=function(){return Au(this.paint.get("fill-translate"))},v.prototype.queryIntersectsFeature=function(_,M,L,U,H,ie,_e){return So(ac(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ie.angle,_e),U)},v.prototype.isTileClipped=function(){return!0},v}(Fo),wg=qs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Py=xp;function xp(u,v,_,M,L){this.properties={},this.extent=_,this.type=0,this._pbf=u,this._geometry=-1,this._keys=M,this._values=L,u.readFields(Am,this,v)}function Am(u,v,_){u==1?v.id=_.readVarint():u==2?function(M,L){for(var U=M.readVarint()+M.pos;M.pos<U;){var H=L._keys[M.readVarint()],ie=L._values[M.readVarint()];L.properties[H]=ie}}(_,v):u==3?v.type=_.readVarint():u==4&&(v._geometry=_.pos)}function Ud(u){for(var v,_,M=0,L=0,U=u.length,H=U-1;L<U;H=L++)M+=((_=u[H]).x-(v=u[L]).x)*(v.y+_.y);return M}xp.types=["Unknown","Point","LineString","Polygon"],xp.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var v,_=u.readVarint()+u.pos,M=1,L=0,U=0,H=0,ie=[];u.pos<_;){if(L<=0){var _e=u.readVarint();M=7&_e,L=_e>>3}if(L--,M===1||M===2)U+=u.readSVarint(),H+=u.readSVarint(),M===1&&(v&&ie.push(v),v=[]),v.push(new pe(U,H));else{if(M!==7)throw new Error("unknown command "+M);v&&v.push(v[0].clone())}}return v&&ie.push(v),ie},xp.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var v=u.readVarint()+u.pos,_=1,M=0,L=0,U=0,H=1/0,ie=-1/0,_e=1/0,Ye=-1/0;u.pos<v;){if(M<=0){var ot=u.readVarint();_=7&ot,M=ot>>3}if(M--,_===1||_===2)(L+=u.readSVarint())<H&&(H=L),L>ie&&(ie=L),(U+=u.readSVarint())<_e&&(_e=U),U>Ye&&(Ye=U);else if(_!==7)throw new Error("unknown command "+_)}return[H,_e,ie,Ye]},xp.prototype.toGeoJSON=function(u,v,_){var M,L,U=this.extent*Math.pow(2,_),H=this.extent*u,ie=this.extent*v,_e=this.loadGeometry(),Ye=xp.types[this.type];function ot(Xt){for(var Pn=0;Pn<Xt.length;Pn++){var Ln=Xt[Pn];Xt[Pn]=[360*(Ln.x+H)/U-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ln.y+ie)/U)*Math.PI/180))-90]}}switch(this.type){case 1:var dt=[];for(M=0;M<_e.length;M++)dt[M]=_e[M][0];ot(_e=dt);break;case 2:for(M=0;M<_e.length;M++)ot(_e[M]);break;case 3:for(_e=function(Xt){var Pn=Xt.length;if(Pn<=1)return[Xt];for(var Ln,rr,$n=[],xr=0;xr<Pn;xr++){var Lr=Ud(Xt[xr]);Lr!==0&&(rr===void 0&&(rr=Lr<0),rr===Lr<0?(Ln&&$n.push(Ln),Ln=[Xt[xr]]):Ln.push(Xt[xr]))}return Ln&&$n.push(Ln),$n}(_e),M=0;M<_e.length;M++)for(L=0;L<_e[M].length;L++)ot(_e[M][L])}_e.length===1?_e=_e[0]:Ye="Multi"+Ye;var zt={type:"Feature",geometry:{type:Ye,coordinates:_e},properties:this.properties};return"id"in this&&(zt.id=this.id),zt};var N0=qp;function qp(u,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(Kp,this,v),this.length=this._features.length}function Kp(u,v,_){u===15?v.version=_.readVarint():u===1?v.name=_.readString():u===5?v.extent=_.readVarint():u===2?v._features.push(_.pos):u===3?v._keys.push(_.readString()):u===4&&v._values.push(function(M){for(var L=null,U=M.readVarint()+M.pos;M.pos<U;){var H=M.readVarint()>>3;L=H===1?M.readString():H===2?M.readFloat():H===3?M.readDouble():H===4?M.readVarint64():H===5?M.readVarint():H===6?M.readSVarint():H===7?M.readBoolean():null}return L}(_))}function Cm(u,v,_){if(u===3){var M=new N0(_,_.readVarint()+_.pos);M.length&&(v[M.name]=M)}}qp.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var v=this._pbf.readVarint()+this._pbf.pos;return new Py(this._pbf,v,this.extent,this._keys,this._values)};var Ep={VectorTile:function(u,v){this.layers=u.readFields(Cm,{},v)},VectorTileFeature:Py,VectorTileLayer:N0},Om=Ep.VectorTileFeature.types,e0=Math.pow(2,13);function Bc(u,v,_,M,L,U,H,ie){u.emplaceBack(v,_,2*Math.floor(M*e0)+H,L*e0*2,U*e0*2,Math.round(ie))}var Fc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Sh,this.indexArray=new po,this.programConfigurations=new ci(u.layers,u.zoom),this.segments=new qt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Xu(u,v){return u.x===v.x&&(u.x<0||u.x>8192)||u.y===v.y&&(u.y<0||u.y>8192)}Fc.prototype.populate=function(u,v,_){this.features=[],this.hasPattern=Tm("fill-extrusion",this.layers,v);for(var M=0,L=u;M<L.length;M+=1){var U=L[M],H=U.feature,ie=U.id,_e=U.index,Ye=U.sourceLayerIndex,ot=this.layers[0]._featureFilter.needGeometry,dt=oo(H,ot);if(this.layers[0]._featureFilter.filter(new ui(this.zoom),dt,_)){var zt={id:ie,sourceLayerIndex:Ye,index:_e,geometry:ot?dt.geometry:$a(H),properties:H.properties,type:H.type,patterns:{}};this.hasPattern?this.features.push(Sg("fill-extrusion",this.layers,zt,this.zoom,v)):this.addFeature(zt,zt.geometry,_e,_,{}),v.featureIndex.insert(H,zt.geometry,_e,Ye,this.index,!0)}}},Fc.prototype.addFeatures=function(u,v,_){for(var M=0,L=this.features;M<L.length;M+=1){var U=L[M];this.addFeature(U,U.geometry,U.index,v,_)}},Fc.prototype.update=function(u,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,v,this.stateDependentLayers,_)},Fc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,wg),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Fc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fc.prototype.addFeature=function(u,v,_,M,L){for(var U=0,H=zd(v,500);U<H.length;U+=1){for(var ie=H[U],_e=0,Ye=0,ot=ie;Ye<ot.length;Ye+=1)_e+=ot[Ye].length;for(var dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),zt=0,Xt=ie;zt<Xt.length;zt+=1){var Pn=Xt[zt];if(Pn.length!==0&&!((Go=Pn).every(function(Lo){return Lo.x<0})||Go.every(function(Lo){return Lo.x>8192})||Go.every(function(Lo){return Lo.y<0})||Go.every(function(Lo){return Lo.y>8192})))for(var Ln=0,rr=0;rr<Pn.length;rr++){var $n=Pn[rr];if(rr>=1){var xr=Pn[rr-1];if(!Xu($n,xr)){dt.vertexLength+4>qt.MAX_VERTEX_ARRAY_LENGTH&&(dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Lr=$n.sub(xr)._perp()._unit(),Zr=xr.dist($n);Ln+Zr>32768&&(Ln=0),Bc(this.layoutVertexArray,$n.x,$n.y,Lr.x,Lr.y,0,0,Ln),Bc(this.layoutVertexArray,$n.x,$n.y,Lr.x,Lr.y,0,1,Ln),Bc(this.layoutVertexArray,xr.x,xr.y,Lr.x,Lr.y,0,0,Ln+=Zr),Bc(this.layoutVertexArray,xr.x,xr.y,Lr.x,Lr.y,0,1,Ln);var Jr=dt.vertexLength;this.indexArray.emplaceBack(Jr,Jr+2,Jr+1),this.indexArray.emplaceBack(Jr+1,Jr+2,Jr+3),dt.vertexLength+=4,dt.primitiveLength+=2}}}}if(dt.vertexLength+_e>qt.MAX_VERTEX_ARRAY_LENGTH&&(dt=this.segments.prepareSegment(_e,this.layoutVertexArray,this.indexArray)),Om[u.type]==="Polygon"){for(var ai=[],Ki=[],ca=dt.vertexLength,Ja=0,Sa=ie;Ja<Sa.length;Ja+=1){var lo=Sa[Ja];if(lo.length!==0){lo!==ie[0]&&Ki.push(ai.length/2);for(var Ca=0;Ca<lo.length;Ca++){var $o=lo[Ca];Bc(this.layoutVertexArray,$o.x,$o.y,0,0,1,1,0),ai.push($o.x),ai.push($o.y)}}}for(var Eo=Kv(ai,Ki),Fa=0;Fa<Eo.length;Fa+=3)this.indexArray.emplaceBack(ca+Eo[Fa],ca+Eo[Fa+2],ca+Eo[Fa+1]);dt.primitiveLength+=Eo.length/3,dt.vertexLength+=_e}}var Go;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,L,M)},Ma("FillExtrusionBucket",Fc,{omit:["layers","features"]});var Uf={paint:new os({"fill-extrusion-opacity":new oa(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ra(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oa(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oa(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qo(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ra(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ra(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oa(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Iy=function(u){function v(_){u.call(this,_,Uf)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Fc(_)},v.prototype.queryRadius=function(){return Au(this.paint.get("fill-extrusion-translate"))},v.prototype.is3D=function(){return!0},v.prototype.queryIntersectsFeature=function(_,M,L,U,H,ie,_e,Ye){var ot=ac(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ie.angle,_e),dt=this.paint.get("fill-extrusion-height").evaluate(M,L),zt=this.paint.get("fill-extrusion-base").evaluate(M,L),Xt=function(Ln,rr,$n,xr){for(var Lr=[],Zr=0,Jr=Ln;Zr<Jr.length;Zr+=1){var ai=Jr[Zr],Ki=[ai.x,ai.y,0,1];Ff(Ki,Ki,rr),Lr.push(new pe(Ki[0]/Ki[3],Ki[1]/Ki[3]))}return Lr}(ot,Ye),Pn=function(Ln,rr,$n,xr){for(var Lr=[],Zr=[],Jr=xr[8]*rr,ai=xr[9]*rr,Ki=xr[10]*rr,ca=xr[11]*rr,Ja=xr[8]*$n,Sa=xr[9]*$n,lo=xr[10]*$n,Ca=xr[11]*$n,$o=0,Eo=Ln;$o<Eo.length;$o+=1){for(var Fa=[],Go=[],Lo=0,To=Eo[$o];Lo<To.length;Lo+=1){var ho=To[Lo],ws=ho.x,Eu=ho.y,cu=xr[0]*ws+xr[4]*Eu+xr[12],Fu=xr[1]*ws+xr[5]*Eu+xr[13],Su=xr[2]*ws+xr[6]*Eu+xr[14],ol=xr[3]*ws+xr[7]*Eu+xr[15],sl=Su+Ki,lc=ol+ca,jc=cu+Ja,Fl=Fu+Sa,gs=Su+lo,gl=ol+Ca,Cu=new pe((cu+Jr)/lc,(Fu+ai)/lc);Cu.z=sl/lc,Fa.push(Cu);var zo=new pe(jc/gl,Fl/gl);zo.z=gs/gl,Go.push(zo)}Lr.push(Fa),Zr.push(Go)}return[Lr,Zr]}(U,zt,dt,Ye);return function(Ln,rr,$n){var xr=1/0;So($n,rr)&&(xr=bv($n,rr[0]));for(var Lr=0;Lr<rr.length;Lr++)for(var Zr=rr[Lr],Jr=Ln[Lr],ai=0;ai<Zr.length-1;ai++){var Ki=Zr[ai],ca=[Ki,Zr[ai+1],Jr[ai+1],Jr[ai],Ki];Fs($n,ca)&&(xr=Math.min(xr,bv($n,ca)))}return xr!==1/0&&xr}(Pn[0],Pn[1],Xt)},v}(Fo);function Ps(u,v){return u.x*v.x+u.y*v.y}function bv(u,v){if(u.length===1){for(var _,M=0,L=v[M++];!_||L.equals(_);)if(!(_=v[M++]))return 1/0;for(;M<v.length;M++){var U=v[M],H=u[0],ie=_.sub(L),_e=U.sub(L),Ye=H.sub(L),ot=Ps(ie,ie),dt=Ps(ie,_e),zt=Ps(_e,_e),Xt=Ps(Ye,ie),Pn=Ps(Ye,_e),Ln=ot*zt-dt*dt,rr=(zt*Xt-dt*Pn)/Ln,$n=(ot*Pn-dt*Xt)/Ln,xr=L.z*(1-rr-$n)+_.z*rr+U.z*$n;if(isFinite(xr))return xr}return 1/0}for(var Lr=1/0,Zr=0,Jr=v;Zr<Jr.length;Zr+=1)Lr=Math.min(Lr,Jr[Zr].z);return Lr}var t0=qs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ky=qs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Tg=Ep.VectorTileFeature.types,xv=Math.cos(Math.PI/180*37.5),Mm=Math.pow(2,14)/.5,zc=function(u){var v=this;this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(_){return _.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(_){v.gradients[_.id]={}}),this.layoutVertexArray=new dl,this.layoutVertexArray2=new Gh,this.indexArray=new po,this.programConfigurations=new ci(u.layers,u.zoom),this.segments=new qt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(_){return _.isStateDependent()}).map(function(_){return _.id})};zc.prototype.populate=function(u,v,_){this.hasPattern=Tm("line",this.layers,v);for(var M=this.layers[0].layout.get("line-sort-key"),L=[],U=0,H=u;U<H.length;U+=1){var ie=H[U],_e=ie.feature,Ye=ie.id,ot=ie.index,dt=ie.sourceLayerIndex,zt=this.layers[0]._featureFilter.needGeometry,Xt=oo(_e,zt);if(this.layers[0]._featureFilter.filter(new ui(this.zoom),Xt,_)){var Pn=M?M.evaluate(Xt,{},_):void 0,Ln={id:Ye,properties:_e.properties,type:_e.type,sourceLayerIndex:dt,index:ot,geometry:zt?Xt.geometry:$a(_e),patterns:{},sortKey:Pn};L.push(Ln)}}M&&L.sort(function(Ki,ca){return Ki.sortKey-ca.sortKey});for(var rr=0,$n=L;rr<$n.length;rr+=1){var xr=$n[rr],Lr=xr.geometry,Zr=xr.index,Jr=xr.sourceLayerIndex;if(this.hasPattern){var ai=Sg("line",this.layers,xr,this.zoom,v);this.patternFeatures.push(ai)}else this.addFeature(xr,Lr,Zr,_,{});v.featureIndex.insert(u[Zr].feature,Lr,Zr,Jr,this.index)}},zc.prototype.update=function(u,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,v,this.stateDependentLayers,_)},zc.prototype.addFeatures=function(u,v,_){for(var M=0,L=this.patternFeatures;M<L.length;M+=1){var U=L[M];this.addFeature(U,U.geometry,U.index,v,_)}},zc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},zc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zc.prototype.upload=function(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,ky)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,t0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},zc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},zc.prototype.lineFeatureClips=function(u){if(u.properties&&u.properties.hasOwnProperty("mapbox_clip_start")&&u.properties.hasOwnProperty("mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}},zc.prototype.addFeature=function(u,v,_,M,L){var U=this.layers[0].layout,H=U.get("line-join").evaluate(u,{}),ie=U.get("line-cap"),_e=U.get("line-miter-limit"),Ye=U.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(var ot=0,dt=v;ot<dt.length;ot+=1)this.addLine(dt[ot],u,H,ie,_e,Ye);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,L,M)},zc.prototype.addLine=function(u,v,_,M,L,U){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var H=0;H<u.length-1;H++)this.totalDistance+=u[H].dist(u[H+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ie=Tg[v.type]==="Polygon",_e=u.length;_e>=2&&u[_e-1].equals(u[_e-2]);)_e--;for(var Ye=0;Ye<_e-1&&u[Ye].equals(u[Ye+1]);)Ye++;if(!(_e<(ie?3:2))){_==="bevel"&&(L=1.05);var ot,dt=this.overscaling<=16?122880/(512*this.overscaling):0,zt=this.segments.prepareSegment(10*_e,this.layoutVertexArray,this.indexArray),Xt=void 0,Pn=void 0,Ln=void 0,rr=void 0;this.e1=this.e2=-1,ie&&(rr=u[Ye].sub(ot=u[_e-2])._unit()._perp());for(var $n=Ye;$n<_e;$n++)if(!(Pn=$n===_e-1?ie?u[Ye+1]:void 0:u[$n+1])||!u[$n].equals(Pn)){rr&&(Ln=rr),ot&&(Xt=ot),ot=u[$n],rr=Pn?Pn.sub(ot)._unit()._perp():Ln;var xr=(Ln=Ln||rr).add(rr);xr.x===0&&xr.y===0||xr._unit();var Lr=Ln.x*rr.x+Ln.y*rr.y,Zr=xr.x*rr.x+xr.y*rr.y,Jr=Zr!==0?1/Zr:1/0,ai=2*Math.sqrt(2-2*Zr),Ki=Zr<xv&&Xt&&Pn,ca=Ln.x*rr.y-Ln.y*rr.x>0;if(Ki&&$n>Ye){var Ja=ot.dist(Xt);if(Ja>2*dt){var Sa=ot.sub(ot.sub(Xt)._mult(dt/Ja)._round());this.updateDistance(Xt,Sa),this.addCurrentVertex(Sa,Ln,0,0,zt),Xt=Sa}}var lo=Xt&&Pn,Ca=lo?_:ie?"butt":M;if(lo&&Ca==="round"&&(Jr<U?Ca="miter":Jr<=2&&(Ca="fakeround")),Ca==="miter"&&Jr>L&&(Ca="bevel"),Ca==="bevel"&&(Jr>2&&(Ca="flipbevel"),Jr<L&&(Ca="miter")),Xt&&this.updateDistance(Xt,ot),Ca==="miter")xr._mult(Jr),this.addCurrentVertex(ot,xr,0,0,zt);else if(Ca==="flipbevel"){if(Jr>100)xr=rr.mult(-1);else{var $o=Jr*Ln.add(rr).mag()/Ln.sub(rr).mag();xr._perp()._mult($o*(ca?-1:1))}this.addCurrentVertex(ot,xr,0,0,zt),this.addCurrentVertex(ot,xr.mult(-1),0,0,zt)}else if(Ca==="bevel"||Ca==="fakeround"){var Eo=-Math.sqrt(Jr*Jr-1),Fa=ca?Eo:0,Go=ca?0:Eo;if(Xt&&this.addCurrentVertex(ot,Ln,Fa,Go,zt),Ca==="fakeround")for(var Lo=Math.round(180*ai/Math.PI/20),To=1;To<Lo;To++){var ho=To/Lo;if(ho!==.5){var ws=ho-.5;ho+=ho*ws*(ho-1)*((1.0904+Lr*(Lr*(3.55645-1.43519*Lr)-3.2452))*ws*ws+(.848013+Lr*(.215638*Lr-1.06021)))}var Eu=rr.sub(Ln)._mult(ho)._add(Ln)._unit()._mult(ca?-1:1);this.addHalfVertex(ot,Eu.x,Eu.y,!1,ca,0,zt)}Pn&&this.addCurrentVertex(ot,rr,-Fa,-Go,zt)}else if(Ca==="butt")this.addCurrentVertex(ot,xr,0,0,zt);else if(Ca==="square"){var cu=Xt?1:-1;this.addCurrentVertex(ot,xr,cu,cu,zt)}else Ca==="round"&&(Xt&&(this.addCurrentVertex(ot,Ln,0,0,zt),this.addCurrentVertex(ot,Ln,1,1,zt,!0)),Pn&&(this.addCurrentVertex(ot,rr,-1,-1,zt,!0),this.addCurrentVertex(ot,rr,0,0,zt)));if(Ki&&$n<_e-1){var Fu=ot.dist(Pn);if(Fu>2*dt){var Su=ot.add(Pn.sub(ot)._mult(dt/Fu)._round());this.updateDistance(ot,Su),this.addCurrentVertex(Su,rr,0,0,zt),ot=Su}}}}},zc.prototype.addCurrentVertex=function(u,v,_,M,L,U){U===void 0&&(U=!1);var H=v.y*M-v.x,ie=-v.y-v.x*M;this.addHalfVertex(u,v.x+v.y*_,v.y-v.x*_,U,!1,_,L),this.addHalfVertex(u,H,ie,U,!0,-M,L),this.distance>Mm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,v,_,M,L,U))},zc.prototype.addHalfVertex=function(u,v,_,M,L,U,H){var ie=.5*(this.lineClips?this.scaledDistance*(Mm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u.x<<1)+(M?1:0),(u.y<<1)+(L?1:0),Math.round(63*v)+128,Math.round(63*_)+128,1+(U===0?0:U<0?-1:1)|(63&ie)<<2,ie>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var _e=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_e),H.primitiveLength++),L?this.e2=_e:this.e1=_e},zc.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},zc.prototype.updateDistance=function(u,v){this.distance+=u.dist(v),this.updateScaledDistance()},Ma("LineBucket",zc,{omit:["layers","patternFeatures"]});var o1=new os({"line-cap":new oa(kt.layout_line["line-cap"]),"line-join":new ra(kt.layout_line["line-join"]),"line-miter-limit":new oa(kt.layout_line["line-miter-limit"]),"line-round-limit":new oa(kt.layout_line["line-round-limit"]),"line-sort-key":new ra(kt.layout_line["line-sort-key"])}),n0={paint:new os({"line-opacity":new ra(kt.paint_line["line-opacity"]),"line-color":new ra(kt.paint_line["line-color"]),"line-translate":new oa(kt.paint_line["line-translate"]),"line-translate-anchor":new oa(kt.paint_line["line-translate-anchor"]),"line-width":new ra(kt.paint_line["line-width"]),"line-gap-width":new ra(kt.paint_line["line-gap-width"]),"line-offset":new ra(kt.paint_line["line-offset"]),"line-blur":new ra(kt.paint_line["line-blur"]),"line-dasharray":new Jo(kt.paint_line["line-dasharray"]),"line-pattern":new Qo(kt.paint_line["line-pattern"]),"line-gradient":new No(kt.paint_line["line-gradient"])}),layout:o1},Ag=new(function(u){function v(){u.apply(this,arguments)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,M){return M=new ui(Math.floor(M.zoom),{now:M.now,fadeDuration:M.fadeDuration,zoomHistory:M.zoomHistory,transition:M.transition}),u.prototype.possiblyEvaluate.call(this,_,M)},v.prototype.evaluate=function(_,M,L,U){return M=xe({},M,{zoom:Math.floor(M.zoom)}),u.prototype.evaluate.call(this,_,M,L,U)},v}(ra))(n0.paint.properties["line-width"].specification);Ag.useIntegerZoom=!0;var Ly=function(u){function v(_){u.call(this,_,n0),this.gradientVersion=0}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ti,this.gradientVersion=(this.gradientVersion+1)%st)},v.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},v.prototype.recalculate=function(_,M){u.prototype.recalculate.call(this,_,M),this.paint._values["line-floorwidth"]=Ag.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)},v.prototype.createBucket=function(_){return new zc(_)},v.prototype.queryRadius=function(_){var M=_,L=Cg(pl("line-width",this,M),pl("line-gap-width",this,M)),U=pl("line-offset",this,M);return L/2+Math.abs(U)+Au(this.paint.get("line-translate"))},v.prototype.queryIntersectsFeature=function(_,M,L,U,H,ie,_e){var Ye=ac(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ie.angle,_e),ot=_e/2*Cg(this.paint.get("line-width").evaluate(M,L),this.paint.get("line-gap-width").evaluate(M,L)),dt=this.paint.get("line-offset").evaluate(M,L);return dt&&(U=function(zt,Xt){for(var Pn=[],Ln=new pe(0,0),rr=0;rr<zt.length;rr++){for(var $n=zt[rr],xr=[],Lr=0;Lr<$n.length;Lr++){var Zr=$n[Lr],Jr=$n[Lr+1],ai=Lr===0?Ln:Zr.sub($n[Lr-1])._unit()._perp(),Ki=Lr===$n.length-1?Ln:Jr.sub(Zr)._unit()._perp(),ca=ai._add(Ki)._unit();ca._mult(1/(ca.x*Ki.x+ca.y*Ki.y)),xr.push(ca._mult(Xt)._add(Zr))}Pn.push(xr)}return Pn}(U,dt*_e)),function(zt,Xt,Pn){for(var Ln=0;Ln<Xt.length;Ln++){var rr=Xt[Ln];if(zt.length>=3){for(var $n=0;$n<rr.length;$n++)if(xc(zt,rr[$n]))return!0}if(es(zt,rr,Pn))return!0}return!1}(Ye,U,ot)},v.prototype.isTileClipped=function(){return!0},v}(Fo);function Cg(u,v){return v>0?v+2*u:u}var Og=qs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),s1=qs([{name:"a_projected_pos",components:3,type:"Float32"}],4),r0=(qs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),qs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Rm=(qs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),qs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),et=qs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function vn(u,v,_){return u.sections.forEach(function(M){M.text=function(L,U,H){var ie=U.layout.get("text-transform").evaluate(H,{});return ie==="uppercase"?L=L.toLocaleUpperCase():ie==="lowercase"&&(L=L.toLocaleLowerCase()),La.applyArabicShaping&&(L=La.applyArabicShaping(L)),L}(M.text,v,_)}),u}qs([{name:"triangle",components:3,type:"Uint16"}]),qs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),qs([{type:"Float32",name:"offsetX"}]),qs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Vn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},$r=function(u,v,_,M,L){var U,H,ie=8*L-M-1,_e=(1<<ie)-1,Ye=_e>>1,ot=-7,dt=_?L-1:0,zt=_?-1:1,Xt=u[v+dt];for(dt+=zt,U=Xt&(1<<-ot)-1,Xt>>=-ot,ot+=ie;ot>0;U=256*U+u[v+dt],dt+=zt,ot-=8);for(H=U&(1<<-ot)-1,U>>=-ot,ot+=M;ot>0;H=256*H+u[v+dt],dt+=zt,ot-=8);if(U===0)U=1-Ye;else{if(U===_e)return H?NaN:1/0*(Xt?-1:1);H+=Math.pow(2,M),U-=Ye}return(Xt?-1:1)*H*Math.pow(2,U-M)},di=function(u,v,_,M,L,U){var H,ie,_e,Ye=8*U-L-1,ot=(1<<Ye)-1,dt=ot>>1,zt=L===23?Math.pow(2,-24)-Math.pow(2,-77):0,Xt=M?0:U-1,Pn=M?1:-1,Ln=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(ie=isNaN(v)?1:0,H=ot):(H=Math.floor(Math.log(v)/Math.LN2),v*(_e=Math.pow(2,-H))<1&&(H--,_e*=2),(v+=H+dt>=1?zt/_e:zt*Math.pow(2,1-dt))*_e>=2&&(H++,_e/=2),H+dt>=ot?(ie=0,H=ot):H+dt>=1?(ie=(v*_e-1)*Math.pow(2,L),H+=dt):(ie=v*Math.pow(2,dt-1)*Math.pow(2,L),H=0));L>=8;u[_+Xt]=255&ie,Xt+=Pn,ie/=256,L-=8);for(H=H<<L|ie,Ye+=L;Ye>0;u[_+Xt]=255&H,Xt+=Pn,H/=256,Ye-=8);u[_+Xt-Pn]|=128*Ln},Vr=Rr;function Rr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Rr.Varint=0,Rr.Fixed64=1,Rr.Bytes=2,Rr.Fixed32=5;var Yi=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ki(u){return u.type===Rr.Bytes?u.readVarint()+u.pos:u.pos+1}function zi(u,v,_){return _?4294967296*v+(u>>>0):4294967296*(v>>>0)+(u>>>0)}function qi(u,v,_){var M=v<=16383?1:v<=2097151?2:v<=268435455?3:Math.floor(Math.log(v)/(7*Math.LN2));_.realloc(M);for(var L=_.pos-1;L>=u;L--)_.buf[L+M]=_.buf[L]}function ia(u,v){for(var _=0;_<u.length;_++)v.writeVarint(u[_])}function Ei(u,v){for(var _=0;_<u.length;_++)v.writeSVarint(u[_])}function Ui(u,v){for(var _=0;_<u.length;_++)v.writeFloat(u[_])}function ta(u,v){for(var _=0;_<u.length;_++)v.writeDouble(u[_])}function Sr(u,v){for(var _=0;_<u.length;_++)v.writeBoolean(u[_])}function ri(u,v){for(var _=0;_<u.length;_++)v.writeFixed32(u[_])}function Vi(u,v){for(var _=0;_<u.length;_++)v.writeSFixed32(u[_])}function xa(u,v){for(var _=0;_<u.length;_++)v.writeFixed64(u[_])}function Oi(u,v){for(var _=0;_<u.length;_++)v.writeSFixed64(u[_])}function ba(u,v){return(u[v]|u[v+1]<<8|u[v+2]<<16)+16777216*u[v+3]}function Hi(u,v,_){u[_]=v,u[_+1]=v>>>8,u[_+2]=v>>>16,u[_+3]=v>>>24}function va(u,v){return(u[v]|u[v+1]<<8|u[v+2]<<16)+(u[v+3]<<24)}function Ri(u,v,_){u===1&&_.readMessage(ji,v)}function ji(u,v,_){if(u===3){var M=_.readMessage(ro,{}),L=M.width,U=M.height,H=M.left,ie=M.top,_e=M.advance;v.push({id:M.id,bitmap:new vp({width:L+6,height:U+6},M.bitmap),metrics:{width:L,height:U,left:H,top:ie,advance:_e}})}}function ro(u,v,_){u===1?v.id=_.readVarint():u===2?v.bitmap=_.readBytes():u===3?v.width=_.readVarint():u===4?v.height=_.readVarint():u===5?v.left=_.readSVarint():u===6?v.top=_.readSVarint():u===7&&(v.advance=_.readVarint())}function wo(u){for(var v=0,_=0,M=0,L=u;M<L.length;M+=1){var U=L[M];v+=U.w*U.h,_=Math.max(_,U.w)}u.sort(function(Ln,rr){return rr.h-Ln.h});for(var H=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(v/.95)),_),h:1/0}],ie=0,_e=0,Ye=0,ot=u;Ye<ot.length;Ye+=1)for(var dt=ot[Ye],zt=H.length-1;zt>=0;zt--){var Xt=H[zt];if(!(dt.w>Xt.w||dt.h>Xt.h)){if(dt.x=Xt.x,dt.y=Xt.y,_e=Math.max(_e,dt.y+dt.h),ie=Math.max(ie,dt.x+dt.w),dt.w===Xt.w&&dt.h===Xt.h){var Pn=H.pop();zt<H.length&&(H[zt]=Pn)}else dt.h===Xt.h?(Xt.x+=dt.w,Xt.w-=dt.w):dt.w===Xt.w?(Xt.y+=dt.h,Xt.h-=dt.h):(H.push({x:Xt.x+dt.w,y:Xt.y,w:Xt.w-dt.w,h:dt.h}),Xt.y+=dt.h,Xt.h-=dt.h);break}}return{w:ie,h:_e,fill:v/(ie*_e)||0}}Rr.prototype={destroy:function(){this.buf=null},readFields:function(u,v,_){for(_=_||this.length;this.pos<_;){var M=this.readVarint(),L=M>>3,U=this.pos;this.type=7&M,u(L,v,this),this.pos===U&&this.skip(M)}return v},readMessage:function(u,v){return this.readFields(u,v,this.readVarint()+this.pos)},readFixed32:function(){var u=ba(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=va(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=ba(this.buf,this.pos)+4294967296*ba(this.buf,this.pos+4);return this.pos+=8,u},readSFixed64:function(){var u=ba(this.buf,this.pos)+4294967296*va(this.buf,this.pos+4);return this.pos+=8,u},readFloat:function(){var u=$r(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=$r(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var v,_,M=this.buf;return v=127&(_=M[this.pos++]),_<128?v:(v|=(127&(_=M[this.pos++]))<<7,_<128?v:(v|=(127&(_=M[this.pos++]))<<14,_<128?v:(v|=(127&(_=M[this.pos++]))<<21,_<128?v:function(L,U,H){var ie,_e,Ye=H.buf;if(ie=(112&(_e=Ye[H.pos++]))>>4,_e<128||(ie|=(127&(_e=Ye[H.pos++]))<<3,_e<128)||(ie|=(127&(_e=Ye[H.pos++]))<<10,_e<128)||(ie|=(127&(_e=Ye[H.pos++]))<<17,_e<128)||(ie|=(127&(_e=Ye[H.pos++]))<<24,_e<128)||(ie|=(1&(_e=Ye[H.pos++]))<<31,_e<128))return zi(L,ie,U);throw new Error("Expected varint not more than 10 bytes")}(v|=(15&(_=M[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,v=this.pos;return this.pos=u,u-v>=12&&Yi?function(_,M,L){return Yi.decode(_.subarray(M,L))}(this.buf,v,u):function(_,M,L){for(var U="",H=M;H<L;){var ie,_e,Ye,ot=_[H],dt=null,zt=ot>239?4:ot>223?3:ot>191?2:1;if(H+zt>L)break;zt===1?ot<128&&(dt=ot):zt===2?(192&(ie=_[H+1]))==128&&(dt=(31&ot)<<6|63&ie)<=127&&(dt=null):zt===3?(_e=_[H+2],(192&(ie=_[H+1]))==128&&(192&_e)==128&&((dt=(15&ot)<<12|(63&ie)<<6|63&_e)<=2047||dt>=55296&&dt<=57343)&&(dt=null)):zt===4&&(_e=_[H+2],Ye=_[H+3],(192&(ie=_[H+1]))==128&&(192&_e)==128&&(192&Ye)==128&&((dt=(15&ot)<<18|(63&ie)<<12|(63&_e)<<6|63&Ye)<=65535||dt>=1114112)&&(dt=null)),dt===null?(dt=65533,zt=1):dt>65535&&(dt-=65536,U+=String.fromCharCode(dt>>>10&1023|55296),dt=56320|1023&dt),U+=String.fromCharCode(dt),H+=zt}return U}(this.buf,v,u)},readBytes:function(){var u=this.readVarint()+this.pos,v=this.buf.subarray(this.pos,u);return this.pos=u,v},readPackedVarint:function(u,v){if(this.type!==Rr.Bytes)return u.push(this.readVarint(v));var _=ki(this);for(u=u||[];this.pos<_;)u.push(this.readVarint(v));return u},readPackedSVarint:function(u){if(this.type!==Rr.Bytes)return u.push(this.readSVarint());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Rr.Bytes)return u.push(this.readBoolean());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Rr.Bytes)return u.push(this.readFloat());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Rr.Bytes)return u.push(this.readDouble());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Rr.Bytes)return u.push(this.readFixed32());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Rr.Bytes)return u.push(this.readSFixed32());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Rr.Bytes)return u.push(this.readFixed64());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Rr.Bytes)return u.push(this.readSFixed64());var v=ki(this);for(u=u||[];this.pos<v;)u.push(this.readSFixed64());return u},skip:function(u){var v=7&u;if(v===Rr.Varint)for(;this.buf[this.pos++]>127;);else if(v===Rr.Bytes)this.pos=this.readVarint()+this.pos;else if(v===Rr.Fixed32)this.pos+=4;else{if(v!==Rr.Fixed64)throw new Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(u,v){this.writeVarint(u<<3|v)},realloc:function(u){for(var v=this.length||16;v<this.pos+u;)v*=2;if(v!==this.length){var _=new Uint8Array(v);_.set(this.buf),this.buf=_,this.length=v}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Hi(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Hi(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Hi(this.buf,-1&u,this.pos),Hi(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Hi(this.buf,-1&u,this.pos),Hi(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(v,_){var M,L;if(v>=0?(M=v%4294967296|0,L=v/4294967296|0):(L=~(-v/4294967296),4294967295^(M=~(-v%4294967296))?M=M+1|0:(M=0,L=L+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(U,H,ie){ie.buf[ie.pos++]=127&U|128,U>>>=7,ie.buf[ie.pos++]=127&U|128,U>>>=7,ie.buf[ie.pos++]=127&U|128,U>>>=7,ie.buf[ie.pos++]=127&U|128,ie.buf[ie.pos]=127&(U>>>=7)}(M,0,_),function(U,H){var ie=(7&U)<<4;H.buf[H.pos++]|=ie|((U>>>=3)?128:0),U&&(H.buf[H.pos++]=127&U|((U>>>=7)?128:0),U&&(H.buf[H.pos++]=127&U|((U>>>=7)?128:0),U&&(H.buf[H.pos++]=127&U|((U>>>=7)?128:0),U&&(H.buf[H.pos++]=127&U|((U>>>=7)?128:0),U&&(H.buf[H.pos++]=127&U)))))}(L,_)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var v=this.pos;this.pos=function(M,L,U){for(var H,ie,_e=0;_e<L.length;_e++){if((H=L.charCodeAt(_e))>55295&&H<57344){if(!ie){H>56319||_e+1===L.length?(M[U++]=239,M[U++]=191,M[U++]=189):ie=H;continue}if(H<56320){M[U++]=239,M[U++]=191,M[U++]=189,ie=H;continue}H=ie-55296<<10|H-56320|65536,ie=null}else ie&&(M[U++]=239,M[U++]=191,M[U++]=189,ie=null);H<128?M[U++]=H:(H<2048?M[U++]=H>>6|192:(H<65536?M[U++]=H>>12|224:(M[U++]=H>>18|240,M[U++]=H>>12&63|128),M[U++]=H>>6&63|128),M[U++]=63&H|128)}return U}(this.buf,u,this.pos);var _=this.pos-v;_>=128&&qi(v,_,this),this.pos=v-1,this.writeVarint(_),this.pos+=_},writeFloat:function(u){this.realloc(4),di(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),di(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var v=u.length;this.writeVarint(v),this.realloc(v);for(var _=0;_<v;_++)this.buf[this.pos++]=u[_]},writeRawMessage:function(u,v){this.pos++;var _=this.pos;u(v,this);var M=this.pos-_;M>=128&&qi(_,M,this),this.pos=_-1,this.writeVarint(M),this.pos+=M},writeMessage:function(u,v,_){this.writeTag(u,Rr.Bytes),this.writeRawMessage(v,_)},writePackedVarint:function(u,v){v.length&&this.writeMessage(u,ia,v)},writePackedSVarint:function(u,v){v.length&&this.writeMessage(u,Ei,v)},writePackedBoolean:function(u,v){v.length&&this.writeMessage(u,Sr,v)},writePackedFloat:function(u,v){v.length&&this.writeMessage(u,Ui,v)},writePackedDouble:function(u,v){v.length&&this.writeMessage(u,ta,v)},writePackedFixed32:function(u,v){v.length&&this.writeMessage(u,ri,v)},writePackedSFixed32:function(u,v){v.length&&this.writeMessage(u,Vi,v)},writePackedFixed64:function(u,v){v.length&&this.writeMessage(u,xa,v)},writePackedSFixed64:function(u,v){v.length&&this.writeMessage(u,Oi,v)},writeBytesField:function(u,v){this.writeTag(u,Rr.Bytes),this.writeBytes(v)},writeFixed32Field:function(u,v){this.writeTag(u,Rr.Fixed32),this.writeFixed32(v)},writeSFixed32Field:function(u,v){this.writeTag(u,Rr.Fixed32),this.writeSFixed32(v)},writeFixed64Field:function(u,v){this.writeTag(u,Rr.Fixed64),this.writeFixed64(v)},writeSFixed64Field:function(u,v){this.writeTag(u,Rr.Fixed64),this.writeSFixed64(v)},writeVarintField:function(u,v){this.writeTag(u,Rr.Varint),this.writeVarint(v)},writeSVarintField:function(u,v){this.writeTag(u,Rr.Varint),this.writeSVarint(v)},writeStringField:function(u,v){this.writeTag(u,Rr.Bytes),this.writeString(v)},writeFloatField:function(u,v){this.writeTag(u,Rr.Fixed32),this.writeFloat(v)},writeDoubleField:function(u,v){this.writeTag(u,Rr.Fixed64),this.writeDouble(v)},writeBooleanField:function(u,v){this.writeVarintField(u,!!v)}};var ma=function(u,v){var _=v.pixelRatio,M=v.version,L=v.stretchX,U=v.stretchY,H=v.content;this.paddedRect=u,this.pixelRatio=_,this.stretchX=L,this.stretchY=U,this.content=H,this.version=M},Wi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Wi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Wi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Wi.tlbr.get=function(){return this.tl.concat(this.br)},Wi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ma.prototype,Wi);var yi=function(u,v){var _={},M={};this.haveRenderCallbacks=[];var L=[];this.addImages(u,_,L),this.addImages(v,M,L);var U=wo(L),H=new Nc({width:U.w||1,height:U.h||1});for(var ie in u){var _e=u[ie],Ye=_[ie].paddedRect;Nc.copy(_e.data,H,{x:0,y:0},{x:Ye.x+1,y:Ye.y+1},_e.data)}for(var ot in v){var dt=v[ot],zt=M[ot].paddedRect,Xt=zt.x+1,Pn=zt.y+1,Ln=dt.data.width,rr=dt.data.height;Nc.copy(dt.data,H,{x:0,y:0},{x:Xt,y:Pn},dt.data),Nc.copy(dt.data,H,{x:0,y:rr-1},{x:Xt,y:Pn-1},{width:Ln,height:1}),Nc.copy(dt.data,H,{x:0,y:0},{x:Xt,y:Pn+rr},{width:Ln,height:1}),Nc.copy(dt.data,H,{x:Ln-1,y:0},{x:Xt-1,y:Pn},{width:1,height:rr}),Nc.copy(dt.data,H,{x:0,y:0},{x:Xt+Ln,y:Pn},{width:1,height:rr})}this.image=H,this.iconPositions=_,this.patternPositions=M};yi.prototype.addImages=function(u,v,_){for(var M in u){var L=u[M],U={x:0,y:0,w:L.data.width+2,h:L.data.height+2};_.push(U),v[M]=new ma(U,L),L.hasRenderCallback&&this.haveRenderCallbacks.push(M)}},yi.prototype.patchUpdatedImages=function(u,v){for(var _ in u.dispatchRenderCallbacks(this.haveRenderCallbacks),u.updatedImages)this.patchUpdatedImage(this.iconPositions[_],u.getImage(_),v),this.patchUpdatedImage(this.patternPositions[_],u.getImage(_),v)},yi.prototype.patchUpdatedImage=function(u,v,_){if(u&&v&&u.version!==v.version){u.version=v.version;var M=u.tl;_.update(v.data,void 0,{x:M[0],y:M[1]})}},Ma("ImagePosition",ma),Ma("ImageAtlas",yi);var io={horizontal:1,vertical:2,horizontalOnly:3},ce=function(){this.scale=1,this.fontStack="",this.imageName=null};ce.forText=function(u,v){var _=new ce;return _.scale=u||1,_.fontStack=v,_},ce.forImage=function(u){var v=new ce;return v.imageName=u,v};var Aa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Bo(u,v,_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln){var rr,$n=Aa.fromFeature(u,L);dt===io.vertical&&$n.verticalizePunctuation();var xr=La.processBidirectionalText,Lr=La.processStyledBidirectionalText;if(xr&&$n.sections.length===1){rr=[];for(var Zr=0,Jr=xr($n.toString(),ml($n,Ye,U,v,M,Xt,Pn));Zr<Jr.length;Zr+=1){var ai=Jr[Zr],Ki=new Aa;Ki.text=ai,Ki.sections=$n.sections;for(var ca=0;ca<ai.length;ca++)Ki.sectionIndex.push(0);rr.push(Ki)}}else if(Lr){rr=[];for(var Ja=0,Sa=Lr($n.text,$n.sectionIndex,ml($n,Ye,U,v,M,Xt,Pn));Ja<Sa.length;Ja+=1){var lo=Sa[Ja],Ca=new Aa;Ca.text=lo[0],Ca.sectionIndex=lo[1],Ca.sections=$n.sections,rr.push(Ca)}}else rr=function(Fa,Go){for(var Lo=[],To=Fa.text,ho=0,ws=0,Eu=Go;ws<Eu.length;ws+=1){var cu=Eu[ws];Lo.push(Fa.substring(ho,cu)),ho=cu}return ho<To.length&&Lo.push(Fa.substring(ho,To.length)),Lo}($n,ml($n,Ye,U,v,M,Xt,Pn));var $o=[],Eo={positionedLines:$o,text:$n.toString(),top:ot[1],bottom:ot[1],left:ot[0],right:ot[0],writingMode:dt,iconsInText:!1,verticalizable:!1};return function(Fa,Go,Lo,To,ho,ws,Eu,cu,Fu,Su,ol,sl){for(var lc=0,jc=-17,Fl=0,gs=0,gl=cu==="right"?1:cu==="left"?0:.5,Cu=0,zo=0,fu=ho;zo<fu.length;zo+=1){var Io=fu[zo];Io.trim();var xs=Io.getMaxScale(),tf=24*(xs-1),au={positionedGlyphs:[],lineOffset:0};Fa.positionedLines[Cu]=au;var Na=au.positionedGlyphs,zu=0;if(Io.length()){for(var Zc=0;Zc<Io.length();Zc++){var Mo=Io.getSection(Zc),Ef=Io.getSectionIndex(Zc),Vc=Io.getCharCode(Zc),gd=0,hu=null,ih=null,Oh=null,km=24,wv=!(Fu===io.horizontal||!ol&&!Ne(Vc)||ol&&(nr[Vc]||(Mh=Vc,Z.Arabic(Mh)||Z["Arabic Supplement"](Mh)||Z["Arabic Extended-A"](Mh)||Z["Arabic Presentation Forms-A"](Mh)||Z["Arabic Presentation Forms-B"](Mh))));if(Mo.imageName){var Gs=To[Mo.imageName];if(!Gs)continue;Oh=Mo.imageName,Fa.iconsInText=Fa.iconsInText||!0,ih=Gs.paddedRect;var Tv=Gs.displaySize;Mo.scale=24*Mo.scale/sl,gd=tf+(24-Tv[1]*Mo.scale),km=(hu={width:Tv[0],height:Tv[1],left:1,top:-3,advance:wv?Tv[1]:Tv[0]}).advance;var Pg=wv?Tv[0]*Mo.scale-24*xs:Tv[1]*Mo.scale-24*xs;Pg>0&&Pg>zu&&(zu=Pg)}else{var Ig=Lo[Mo.fontStack],U0=Ig&&Ig[Vc];if(U0&&U0.rect)ih=U0.rect,hu=U0.metrics;else{var Sf=Go[Mo.fontStack],Av=Sf&&Sf[Vc];if(!Av)continue;hu=Av.metrics}gd=24*(xs-Mo.scale)}wv?(Fa.verticalizable=!0,Na.push({glyph:Vc,imageName:Oh,x:lc,y:jc+gd,vertical:wv,scale:Mo.scale,fontStack:Mo.fontStack,sectionIndex:Ef,metrics:hu,rect:ih}),lc+=km*Mo.scale+Su):(Na.push({glyph:Vc,imageName:Oh,x:lc,y:jc+gd,vertical:wv,scale:Mo.scale,fontStack:Mo.fontStack,sectionIndex:Ef,metrics:hu,rect:ih}),lc+=hu.advance*Mo.scale+Su)}Na.length!==0&&(Fl=Math.max(lc-Su,Fl),Nl(Na,0,Na.length-1,gl,zu)),lc=0;var o0=ws*xs+zu;au.lineOffset=Math.max(zu,tf),jc+=o0,gs=Math.max(o0,gs),++Cu}else jc+=ws,++Cu}var Mh,Zf=jc- -17,s0=lu(Eu),wp=s0.horizontalAlign,j0=s0.verticalAlign;(function(Zd,u0,tv,Cv,l0,Z0,kg,Lm,Lg){var Dm,p1=(u0-tv)*l0;Dm=Z0!==kg?-Lm*Cv- -17:(-Cv*Lg+.5)*kg;for(var Ov=0,Vd=Zd;Ov<Vd.length;Ov+=1)for(var Mv=0,V0=Vd[Ov].positionedGlyphs;Mv<V0.length;Mv+=1){var nv=V0[Mv];nv.x+=p1,nv.y+=Dm}})(Fa.positionedLines,gl,wp,j0,Fl,gs,ws,Zf,ho.length),Fa.top+=-j0*Zf,Fa.bottom=Fa.top+Zf,Fa.left+=-wp*Fl,Fa.right=Fa.left+Fl}(Eo,v,_,M,rr,H,ie,_e,dt,Ye,zt,Ln),!function(Fa){for(var Go=0,Lo=Fa;Go<Lo.length;Go+=1)if(Lo[Go].positionedGlyphs.length!==0)return!1;return!0}($o)&&Eo}Aa.fromFeature=function(u,v){for(var _=new Aa,M=0;M<u.sections.length;M++){var L=u.sections[M];L.image?_.addImageSection(L):_.addTextSection(L,v)}return _},Aa.prototype.length=function(){return this.text.length},Aa.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]},Aa.prototype.getSectionIndex=function(u){return this.sectionIndex[u]},Aa.prototype.getCharCode=function(u){return this.text.charCodeAt(u)},Aa.prototype.verticalizePunctuation=function(){this.text=function(u){for(var v="",_=0;_<u.length;_++){var M=u.charCodeAt(_+1)||null,L=u.charCodeAt(_-1)||null;v+=M&&$e(M)&&!Vn[u[_+1]]||L&&$e(L)&&!Vn[u[_-1]]||!Vn[u[_]]?u[_]:Vn[u[_]]}return v}(this.text)},Aa.prototype.trim=function(){for(var u=0,v=0;v<this.text.length&&nr[this.text.charCodeAt(v)];v++)u++;for(var _=this.text.length,M=this.text.length-1;M>=0&&M>=u&&nr[this.text.charCodeAt(M)];M--)_--;this.text=this.text.substring(u,_),this.sectionIndex=this.sectionIndex.slice(u,_)},Aa.prototype.substring=function(u,v){var _=new Aa;return _.text=this.text.substring(u,v),_.sectionIndex=this.sectionIndex.slice(u,v),_.sections=this.sections,_},Aa.prototype.toString=function(){return this.text},Aa.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(v,_){return Math.max(v,u.sections[_].scale)},0)},Aa.prototype.addTextSection=function(u,v){this.text+=u.text,this.sections.push(ce.forText(u.scale,u.fontStack||v));for(var _=this.sections.length-1,M=0;M<u.text.length;++M)this.sectionIndex.push(_)},Aa.prototype.addImageSection=function(u){var v=u.image?u.image.name:"";if(v.length!==0){var _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(ce.forImage(v)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}else it("Can't add FormattedSection with an empty image.")},Aa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var nr={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ni={};function us(u,v,_,M,L,U){if(v.imageName){var H=M[v.imageName];return H?H.displaySize[0]*v.scale*24/U+L:0}var ie=_[v.fontStack],_e=ie&&ie[u];return _e?_e.metrics.advance*v.scale+L:0}function il(u,v,_,M){var L=Math.pow(u-v,2);return M?u<v?L/2:2*L:L+Math.abs(_)*_}function $l(u,v,_){var M=0;return u===10&&(M-=1e4),_&&(M+=150),u!==40&&u!==65288||(M+=50),v!==41&&v!==65289||(M+=50),M}function hs(u,v,_,M,L,U){for(var H=null,ie=il(v,_,L,U),_e=0,Ye=M;_e<Ye.length;_e+=1){var ot=Ye[_e],dt=il(v-ot.x,_,L,U)+ot.badness;dt<=ie&&(H=ot,ie=dt)}return{index:u,x:v,priorBreak:H,badness:ie}}function ml(u,v,_,M,L,U,H){if(U!=="point")return[];if(!u)return[];for(var ie,_e=[],Ye=function(rr,$n,xr,Lr,Zr,Jr){for(var ai=0,Ki=0;Ki<rr.length();Ki++){var ca=rr.getSection(Ki);ai+=us(rr.getCharCode(Ki),ca,Lr,Zr,$n,Jr)}return ai/Math.max(1,Math.ceil(ai/xr))}(u,v,_,M,L,H),ot=u.text.indexOf("\u200B")>=0,dt=0,zt=0;zt<u.length();zt++){var Xt=u.getSection(zt),Pn=u.getCharCode(zt);if(nr[Pn]||(dt+=us(Pn,Xt,M,L,v,H)),zt<u.length()-1){var Ln=!((ie=Pn)<11904||!(Z["Bopomofo Extended"](ie)||Z.Bopomofo(ie)||Z["CJK Compatibility Forms"](ie)||Z["CJK Compatibility Ideographs"](ie)||Z["CJK Compatibility"](ie)||Z["CJK Radicals Supplement"](ie)||Z["CJK Strokes"](ie)||Z["CJK Symbols and Punctuation"](ie)||Z["CJK Unified Ideographs Extension A"](ie)||Z["CJK Unified Ideographs"](ie)||Z["Enclosed CJK Letters and Months"](ie)||Z["Halfwidth and Fullwidth Forms"](ie)||Z.Hiragana(ie)||Z["Ideographic Description Characters"](ie)||Z["Kangxi Radicals"](ie)||Z["Katakana Phonetic Extensions"](ie)||Z.Katakana(ie)||Z["Vertical Forms"](ie)||Z["Yi Radicals"](ie)||Z["Yi Syllables"](ie)));(ni[Pn]||Ln||Xt.imageName)&&_e.push(hs(zt+1,dt,Ye,_e,$l(Pn,u.getCharCode(zt+1),Ln&&ot),!1))}}return function rr($n){return $n?rr($n.priorBreak).concat($n.index):[]}(hs(u.length(),dt,Ye,_e,0,!0))}function lu(u){var v=.5,_=.5;switch(u){case"right":case"top-right":case"bottom-right":v=1;break;case"left":case"top-left":case"bottom-left":v=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:v,verticalAlign:_}}function Nl(u,v,_,M,L){if(M||L)for(var U=u[_],H=(u[_].x+U.metrics.advance*U.scale)*M,ie=v;ie<=_;ie++)u[ie].x-=H,u[ie].y+=L}function Bl(u,v,_,M,L,U){var H,ie=u.image;if(ie.content){var _e=ie.content,Ye=ie.pixelRatio||1;H=[_e[0]/Ye,_e[1]/Ye,ie.displaySize[0]-_e[2]/Ye,ie.displaySize[1]-_e[3]/Ye]}var ot,dt,zt,Xt,Pn=v.left*U,Ln=v.right*U;_==="width"||_==="both"?(Xt=L[0]+Pn-M[3],dt=L[0]+Ln+M[1]):dt=(Xt=L[0]+(Pn+Ln-ie.displaySize[0])/2)+ie.displaySize[0];var rr=v.top*U,$n=v.bottom*U;return _==="height"||_==="both"?(ot=L[1]+rr-M[0],zt=L[1]+$n+M[2]):zt=(ot=L[1]+(rr+$n-ie.displaySize[1])/2)+ie.displaySize[1],{image:ie,top:ot,right:dt,bottom:zt,left:Xt,collisionPadding:H}}ni[10]=!0,ni[32]=!0,ni[38]=!0,ni[40]=!0,ni[41]=!0,ni[43]=!0,ni[45]=!0,ni[47]=!0,ni[173]=!0,ni[183]=!0,ni[8203]=!0,ni[8208]=!0,ni[8211]=!0,ni[8231]=!0;var Yu=function(u){function v(_,M,L,U){u.call(this,_,M),this.angle=L,U!==void 0&&(this.segment=U)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.clone=function(){return new v(this.x,this.y,this.angle,this.segment)},v}(pe);function Gl(u,v){var _=v.expression;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new ui(u+1))};if(_.kind==="source")return{kind:"source"};for(var M=_.zoomStops,L=_.interpolationType,U=0;U<M.length&&M[U]<=u;)U++;for(var H=U=Math.max(0,U-1);H<M.length&&M[H]<u+1;)H++;H=Math.min(M.length-1,H);var ie=M[U],_e=M[H];return _.kind==="composite"?{kind:"composite",minZoom:ie,maxZoom:_e,interpolationType:L}:{kind:"camera",minZoom:ie,maxZoom:_e,minSize:_.evaluate(new ui(ie)),maxSize:_.evaluate(new ui(_e)),interpolationType:L}}function Uc(u,v,_){var M=v.uSize,L=_.lowerSize;return u.kind==="source"?L/128:u.kind==="composite"?za(L/128,_.upperSize/128,v.uSizeT):M}function Sl(u,v){var _=0,M=0;if(u.kind==="constant")M=u.layoutSize;else if(u.kind!=="source"){var L=u.interpolationType,U=L?se(hl.interpolationFactor(L,v,u.minZoom,u.maxZoom),0,1):0;u.kind==="camera"?M=za(u.minSize,u.maxSize,U):_=U}return{uSizeT:_,uSize:M}}Ma("Anchor",Yu);var Zo=Object.freeze({__proto__:null,getSizeData:Gl,evaluateSizeForFeature:Uc,evaluateSizeForZoom:Sl,SIZE_PACK_FACTOR:128});function Ec(u,v,_,M,L){if(v.segment===void 0)return!0;for(var U=v,H=v.segment+1,ie=0;ie>-_/2;){if(--H<0)return!1;ie-=u[H].dist(U),U=u[H]}ie+=u[H].dist(u[H+1]),H++;for(var _e=[],Ye=0;ie<_/2;){var ot=u[H],dt=u[H+1];if(!dt)return!1;var zt=u[H-1].angleTo(ot)-ot.angleTo(dt);for(zt=Math.abs((zt+3*Math.PI)%(2*Math.PI)-Math.PI),_e.push({distance:ie,angleDelta:zt}),Ye+=zt;ie-_e[0].distance>M;)Ye-=_e.shift().angleDelta;if(Ye>L)return!1;H++,ie+=ot.dist(dt)}return!0}function Is(u){for(var v=0,_=0;_<u.length-1;_++)v+=u[_].dist(u[_+1]);return v}function mo(u,v,_){return u?.6*v*_:0}function ls(u,v){return Math.max(u?u.right-u.left:0,v?v.right-v.left:0)}function Ss(u,v,_,M,L,U){for(var H=mo(_,L,U),ie=ls(_,M)*U,_e=0,Ye=Is(u)/2,ot=0;ot<u.length-1;ot++){var dt=u[ot],zt=u[ot+1],Xt=dt.dist(zt);if(_e+Xt>Ye){var Pn=(Ye-_e)/Xt,Ln=za(dt.x,zt.x,Pn),rr=za(dt.y,zt.y,Pn),$n=new Yu(Ln,rr,zt.angleTo(dt),ot);return $n._round(),!H||Ec(u,$n,ie,H,v)?$n:void 0}_e+=Xt}}function wl(u,v,_,M,L,U,H,ie,_e){var Ye=mo(M,U,H),ot=ls(M,L),dt=ot*H,zt=u[0].x===0||u[0].x===_e||u[0].y===0||u[0].y===_e;return v-dt<v/4&&(v=dt+v/4),function Xt(Pn,Ln,rr,$n,xr,Lr,Zr,Jr,ai){for(var Ki=Lr/2,ca=Is(Pn),Ja=0,Sa=Ln-rr,lo=[],Ca=0;Ca<Pn.length-1;Ca++){for(var $o=Pn[Ca],Eo=Pn[Ca+1],Fa=$o.dist(Eo),Go=Eo.angleTo($o);Sa+rr<Ja+Fa;){var Lo=((Sa+=rr)-Ja)/Fa,To=za($o.x,Eo.x,Lo),ho=za($o.y,Eo.y,Lo);if(To>=0&&To<ai&&ho>=0&&ho<ai&&Sa-Ki>=0&&Sa+Ki<=ca){var ws=new Yu(To,ho,Go,Ca);ws._round(),$n&&!Ec(Pn,ws,Lr,$n,xr)||lo.push(ws)}}Ja+=Fa}return Jr||lo.length||Zr||(lo=Xt(Pn,Ja/2,rr,$n,xr,Lr,Zr,!0,ai)),lo}(u,zt?v/2*ie%v:(ot/2+2*U)*H*ie%v,v,Ye,_,dt,zt,!1,_e)}function vd(u,v,_,M,L){for(var U=[],H=0;H<u.length;H++)for(var ie=u[H],_e=void 0,Ye=0;Ye<ie.length-1;Ye++){var ot=ie[Ye],dt=ie[Ye+1];ot.x<v&&dt.x<v||(ot.x<v?ot=new pe(v,ot.y+(v-ot.x)/(dt.x-ot.x)*(dt.y-ot.y))._round():dt.x<v&&(dt=new pe(v,ot.y+(v-ot.x)/(dt.x-ot.x)*(dt.y-ot.y))._round()),ot.y<_&&dt.y<_||(ot.y<_?ot=new pe(ot.x+(_-ot.y)/(dt.y-ot.y)*(dt.x-ot.x),_)._round():dt.y<_&&(dt=new pe(ot.x+(_-ot.y)/(dt.y-ot.y)*(dt.x-ot.x),_)._round()),ot.x>=M&&dt.x>=M||(ot.x>=M?ot=new pe(M,ot.y+(M-ot.x)/(dt.x-ot.x)*(dt.y-ot.y))._round():dt.x>=M&&(dt=new pe(M,ot.y+(M-ot.x)/(dt.x-ot.x)*(dt.y-ot.y))._round()),ot.y>=L&&dt.y>=L||(ot.y>=L?ot=new pe(ot.x+(L-ot.y)/(dt.y-ot.y)*(dt.x-ot.x),L)._round():dt.y>=L&&(dt=new pe(ot.x+(L-ot.y)/(dt.y-ot.y)*(dt.x-ot.x),L)._round()),_e&&ot.equals(_e[_e.length-1])||U.push(_e=[ot]),_e.push(dt)))))}return U}function Nn(u,v,_,M){var L=[],U=u.image,H=U.pixelRatio,ie=U.paddedRect.w-2,_e=U.paddedRect.h-2,Ye=u.right-u.left,ot=u.bottom-u.top,dt=U.stretchX||[[0,ie]],zt=U.stretchY||[[0,_e]],Xt=function(To,ho){return To+ho[1]-ho[0]},Pn=dt.reduce(Xt,0),Ln=zt.reduce(Xt,0),rr=ie-Pn,$n=_e-Ln,xr=0,Lr=Pn,Zr=0,Jr=Ln,ai=0,Ki=rr,ca=0,Ja=$n;if(U.content&&M){var Sa=U.content;xr=Kr(dt,0,Sa[0]),Zr=Kr(zt,0,Sa[1]),Lr=Kr(dt,Sa[0],Sa[2]),Jr=Kr(zt,Sa[1],Sa[3]),ai=Sa[0]-xr,ca=Sa[1]-Zr,Ki=Sa[2]-Sa[0]-Lr,Ja=Sa[3]-Sa[1]-Jr}var lo=function(To,ho,ws,Eu){var cu=Pa(To.stretch-xr,Lr,Ye,u.left),Fu=Vo(To.fixed-ai,Ki,To.stretch,Pn),Su=Pa(ho.stretch-Zr,Jr,ot,u.top),ol=Vo(ho.fixed-ca,Ja,ho.stretch,Ln),sl=Pa(ws.stretch-xr,Lr,Ye,u.left),lc=Vo(ws.fixed-ai,Ki,ws.stretch,Pn),jc=Pa(Eu.stretch-Zr,Jr,ot,u.top),Fl=Vo(Eu.fixed-ca,Ja,Eu.stretch,Ln),gs=new pe(cu,Su),gl=new pe(sl,Su),Cu=new pe(sl,jc),zo=new pe(cu,jc),fu=new pe(Fu/H,ol/H),Io=new pe(lc/H,Fl/H),xs=v*Math.PI/180;if(xs){var tf=Math.sin(xs),au=Math.cos(xs),Na=[au,-tf,tf,au];gs._matMult(Na),gl._matMult(Na),zo._matMult(Na),Cu._matMult(Na)}var zu=To.stretch+To.fixed,Zc=ho.stretch+ho.fixed;return{tl:gs,tr:gl,bl:zo,br:Cu,tex:{x:U.paddedRect.x+1+zu,y:U.paddedRect.y+1+Zc,w:ws.stretch+ws.fixed-zu,h:Eu.stretch+Eu.fixed-Zc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fu,pixelOffsetBR:Io,minFontScaleX:Ki/H/Ye,minFontScaleY:Ja/H/ot,isSDF:_}};if(M&&(U.stretchX||U.stretchY))for(var Ca=Fr(dt,rr,Pn),$o=Fr(zt,$n,Ln),Eo=0;Eo<Ca.length-1;Eo++)for(var Fa=Ca[Eo],Go=Ca[Eo+1],Lo=0;Lo<$o.length-1;Lo++)L.push(lo(Fa,$o[Lo],Go,$o[Lo+1]));else L.push(lo({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ie+1},{fixed:0,stretch:_e+1}));return L}function Kr(u,v,_){for(var M=0,L=0,U=u;L<U.length;L+=1){var H=U[L];M+=Math.max(v,Math.min(_,H[1]))-Math.max(v,Math.min(_,H[0]))}return M}function Fr(u,v,_){for(var M=[{fixed:-1,stretch:0}],L=0,U=u;L<U.length;L+=1){var H=U[L],ie=H[0],_e=H[1],Ye=M[M.length-1];M.push({fixed:ie-Ye.stretch,stretch:Ye.stretch}),M.push({fixed:ie-Ye.stretch,stretch:Ye.stretch+(_e-ie)})}return M.push({fixed:v+1,stretch:_}),M}function Pa(u,v,_,M){return u/v*_+M}function Vo(u,v,_,M){return u-v*_/M}var Js=function(u,v,_,M,L,U,H,ie,_e,Ye){if(this.boxStartIndex=u.length,_e){var ot=U.top,dt=U.bottom,zt=U.collisionPadding;zt&&(ot-=zt[1],dt+=zt[3]);var Xt=dt-ot;Xt>0&&(Xt=Math.max(10,Xt),this.circleDiameter=Xt)}else{var Pn=U.top*H-ie,Ln=U.bottom*H+ie,rr=U.left*H-ie,$n=U.right*H+ie,xr=U.collisionPadding;if(xr&&(rr-=xr[0]*H,Pn-=xr[1]*H,$n+=xr[2]*H,Ln+=xr[3]*H),Ye){var Lr=new pe(rr,Pn),Zr=new pe($n,Pn),Jr=new pe(rr,Ln),ai=new pe($n,Ln),Ki=Ye*Math.PI/180;Lr._rotate(Ki),Zr._rotate(Ki),Jr._rotate(Ki),ai._rotate(Ki),rr=Math.min(Lr.x,Zr.x,Jr.x,ai.x),$n=Math.max(Lr.x,Zr.x,Jr.x,ai.x),Pn=Math.min(Lr.y,Zr.y,Jr.y,ai.y),Ln=Math.max(Lr.y,Zr.y,Jr.y,ai.y)}u.emplaceBack(v.x,v.y,rr,Pn,$n,Ln,_,M,L)}this.boxEndIndex=u.length},Gt=function(u,v){if(u===void 0&&(u=[]),v===void 0&&(v=xn),this.data=u,this.length=this.data.length,this.compare=v,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function xn(u,v){return u<v?-1:u>v?1:0}function Wn(u,v,_){v===void 0&&(v=1),_===void 0&&(_=!1);for(var M=1/0,L=1/0,U=-1/0,H=-1/0,ie=u[0],_e=0;_e<ie.length;_e++){var Ye=ie[_e];(!_e||Ye.x<M)&&(M=Ye.x),(!_e||Ye.y<L)&&(L=Ye.y),(!_e||Ye.x>U)&&(U=Ye.x),(!_e||Ye.y>H)&&(H=Ye.y)}var ot=Math.min(U-M,H-L),dt=ot/2,zt=new Gt([],jr);if(ot===0)return new pe(M,L);for(var Xt=M;Xt<U;Xt+=ot)for(var Pn=L;Pn<H;Pn+=ot)zt.push(new Dr(Xt+dt,Pn+dt,dt,u));for(var Ln=function(xr){for(var Lr=0,Zr=0,Jr=0,ai=xr[0],Ki=0,ca=ai.length,Ja=ca-1;Ki<ca;Ja=Ki++){var Sa=ai[Ki],lo=ai[Ja],Ca=Sa.x*lo.y-lo.x*Sa.y;Zr+=(Sa.x+lo.x)*Ca,Jr+=(Sa.y+lo.y)*Ca,Lr+=3*Ca}return new Dr(Zr/Lr,Jr/Lr,0,xr)}(u),rr=zt.length;zt.length;){var $n=zt.pop();($n.d>Ln.d||!Ln.d)&&(Ln=$n,_&&console.log("found best %d after %d probes",Math.round(1e4*$n.d)/1e4,rr)),$n.max-Ln.d<=v||(zt.push(new Dr($n.p.x-(dt=$n.h/2),$n.p.y-dt,dt,u)),zt.push(new Dr($n.p.x+dt,$n.p.y-dt,dt,u)),zt.push(new Dr($n.p.x-dt,$n.p.y+dt,dt,u)),zt.push(new Dr($n.p.x+dt,$n.p.y+dt,dt,u)),rr+=4)}return _&&(console.log("num probes: "+rr),console.log("best distance: "+Ln.d)),Ln.p}function jr(u,v){return v.max-u.max}function Dr(u,v,_,M){this.p=new pe(u,v),this.h=_,this.d=function(L,U){for(var H=!1,ie=1/0,_e=0;_e<U.length;_e++)for(var Ye=U[_e],ot=0,dt=Ye.length,zt=dt-1;ot<dt;zt=ot++){var Xt=Ye[ot],Pn=Ye[zt];Xt.y>L.y!=Pn.y>L.y&&L.x<(Pn.x-Xt.x)*(L.y-Xt.y)/(Pn.y-Xt.y)+Xt.x&&(H=!H),ie=Math.min(ie,Du(L,Xt,Pn))}return(H?1:-1)*Math.sqrt(ie)}(this.p,M),this.max=this.d+this.h*Math.SQRT2}Gt.prototype.push=function(u){this.data.push(u),this.length++,this._up(this.length-1)},Gt.prototype.pop=function(){if(this.length!==0){var u=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),u}},Gt.prototype.peek=function(){return this.data[0]},Gt.prototype._up=function(u){for(var v=this.data,_=this.compare,M=v[u];u>0;){var L=u-1>>1,U=v[L];if(_(M,U)>=0)break;v[u]=U,u=L}v[u]=M},Gt.prototype._down=function(u){for(var v=this.data,_=this.compare,M=this.length>>1,L=v[u];u<M;){var U=1+(u<<1),H=v[U],ie=U+1;if(ie<this.length&&_(v[ie],H)<0&&(U=ie,H=v[ie]),_(H,L)>=0)break;v[u]=H,u=U}v[u]=L};var er=Number.POSITIVE_INFINITY;function vr(u,v){return v[1]!==er?function(_,M,L){var U=0,H=0;switch(M=Math.abs(M),L=Math.abs(L),_){case"top-right":case"top-left":case"top":H=L-7;break;case"bottom-right":case"bottom-left":case"bottom":H=7-L}switch(_){case"top-right":case"bottom-right":case"right":U=-M;break;case"top-left":case"bottom-left":case"left":U=M}return[U,H]}(u,v[0],v[1]):function(_,M){var L=0,U=0;M<0&&(M=0);var H=M/Math.sqrt(2);switch(_){case"top-right":case"top-left":U=H-7;break;case"bottom-right":case"bottom-left":U=7-H;break;case"bottom":U=7-M;break;case"top":U=M-7}switch(_){case"top-right":case"bottom-right":L=-H;break;case"top-left":case"bottom-left":L=H;break;case"left":L=M;break;case"right":L=-M}return[L,U]}(u,v[0])}function tr(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cn(u,v,_,M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn){var Ln=function(Zr,Jr,ai,Ki,ca,Ja,Sa,lo){for(var Ca=Ki.layout.get("text-rotate").evaluate(Ja,{})*Math.PI/180,$o=[],Eo=0,Fa=Jr.positionedLines;Eo<Fa.length;Eo+=1)for(var Go=Fa[Eo],Lo=0,To=Go.positionedGlyphs;Lo<To.length;Lo+=1){var ho=To[Lo];if(ho.rect){var ws=ho.rect||{},Eu=4,cu=!0,Fu=1,Su=0,ol=(ca||lo)&&ho.vertical,sl=ho.metrics.advance*ho.scale/2;if(lo&&Jr.verticalizable&&(Su=Go.lineOffset/2-(ho.imageName?-(24-ho.metrics.width*ho.scale)/2:24*(ho.scale-1))),ho.imageName){var lc=Sa[ho.imageName];cu=lc.sdf,Eu=1/(Fu=lc.pixelRatio)}var jc=ca?[ho.x+sl,ho.y]:[0,0],Fl=ca?[0,0]:[ho.x+sl+ai[0],ho.y+ai[1]-Su],gs=[0,0];ol&&(gs=Fl,Fl=[0,0]);var gl=(ho.metrics.left-Eu)*ho.scale-sl+Fl[0],Cu=(-ho.metrics.top-Eu)*ho.scale+Fl[1],zo=gl+ws.w*ho.scale/Fu,fu=Cu+ws.h*ho.scale/Fu,Io=new pe(gl,Cu),xs=new pe(zo,Cu),tf=new pe(gl,fu),au=new pe(zo,fu);if(ol){var Na=new pe(-sl,sl- -17),zu=-Math.PI/2,Zc=12-sl,Mo=new pe(22-Zc,-(ho.imageName?Zc:0)),Ef=new(Function.prototype.bind.apply(pe,[null].concat(gs)));Io._rotateAround(zu,Na)._add(Mo)._add(Ef),xs._rotateAround(zu,Na)._add(Mo)._add(Ef),tf._rotateAround(zu,Na)._add(Mo)._add(Ef),au._rotateAround(zu,Na)._add(Mo)._add(Ef)}if(Ca){var Vc=Math.sin(Ca),gd=Math.cos(Ca),hu=[gd,-Vc,Vc,gd];Io._matMult(hu),xs._matMult(hu),tf._matMult(hu),au._matMult(hu)}var ih=new pe(0,0),Oh=new pe(0,0);$o.push({tl:Io,tr:xs,bl:tf,br:au,tex:ws,writingMode:Jr.writingMode,glyphOffset:jc,sectionIndex:ho.sectionIndex,isSDF:cu,pixelOffsetTL:ih,pixelOffsetBR:Oh,minFontScaleX:0,minFontScaleY:0})}}return $o}(0,_,ie,L,U,H,M,u.allowVerticalPlacement),rr=u.textSizeData,$n=null;rr.kind==="source"?($n=[128*L.layout.get("text-size").evaluate(H,{})])[0]>32640&&it(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):rr.kind==="composite"&&(($n=[128*Xt.compositeTextSizes[0].evaluate(H,{},Pn),128*Xt.compositeTextSizes[1].evaluate(H,{},Pn)])[0]>32640||$n[1]>32640)&&it(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),u.addSymbols(u.text,Ln,$n,ie,U,H,Ye,v,_e.lineStartIndex,_e.lineLength,zt,Pn);for(var xr=0,Lr=ot;xr<Lr.length;xr+=1)dt[Lr[xr]]=u.text.placedSymbolArray.length-1;return 4*Ln.length}function ar(u){for(var v in u)return u[v];return null}function gn(u,v,_,M){var L=u.compareText;if(v in L){for(var U=L[v],H=U.length-1;H>=0;H--)if(M.dist(U[H])<_)return!0}else L[v]=[];return L[v].push(M),!1}var pr=Ep.VectorTileFeature.types,Qr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ti(u,v,_,M,L,U,H,ie,_e,Ye,ot,dt,zt){var Xt=ie?Math.min(32640,Math.round(ie[0])):0,Pn=ie?Math.min(32640,Math.round(ie[1])):0;u.emplaceBack(v,_,Math.round(32*M),Math.round(32*L),U,H,(Xt<<1)+(_e?1:0),Pn,16*Ye,16*ot,256*dt,256*zt)}function Li(u,v,_){u.emplaceBack(v.x,v.y,_),u.emplaceBack(v.x,v.y,_),u.emplaceBack(v.x,v.y,_),u.emplaceBack(v.x,v.y,_)}function Si(u){for(var v=0,_=u.sections;v<_.length;v+=1)if(un(_[v].text))return!0;return!1}var Zi=function(u){this.layoutVertexArray=new gv,this.indexArray=new po,this.programConfigurations=u,this.segments=new qt,this.dynamicLayoutVertexArray=new _c,this.opacityVertexArray=new Bf,this.placedSymbolArray=new R};Zi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Zi.prototype.upload=function(u,v,_,M){this.isEmpty()||(_&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Og.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,s1.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Qr,!0),this.opacityVertexBuffer.itemSize=1),(_||M)&&this.programConfigurations.upload(u))},Zi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ma("SymbolBuffers",Zi);var Va=function(u,v,_){this.layoutVertexArray=new u,this.layoutAttributes=v,this.indexArray=new _,this.segments=new qt,this.collisionVertexArray=new Xh};Va.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,r0.members,!0)},Va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ma("CollisionBuffers",Va);var Da=function(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(U){return U.id}),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Dl([]),this.placementViewportMatrix=Dl([]);var v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gl(this.zoom,v["text-size"]),this.iconSizeData=Gl(this.zoom,v["icon-size"]);var _=this.layers[0].layout,M=_.get("symbol-sort-key"),L=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=L!=="viewport-y"&&M.constantOr(1)!==void 0,this.sortFeaturesByY=(L==="viewport-y"||L==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(function(U){return io[U]})),this.stateDependentLayerIds=this.layers.filter(function(U){return U.isStateDependent()}).map(function(U){return U.id}),this.sourceID=u.sourceID};Da.prototype.createArrays=function(){this.text=new Zi(new ci(this.layers,this.zoom,function(u){return/^text/.test(u)})),this.icon=new Zi(new ci(this.layers,this.zoom,function(u){return/^icon/.test(u)})),this.glyphOffsetArray=new te,this.lineVertexArray=new we,this.symbolInstances=new Y},Da.prototype.calculateGlyphDependencies=function(u,v,_,M,L){for(var U=0;U<u.length;U++)if(v[u.charCodeAt(U)]=!0,(_||M)&&L){var H=Vn[u.charAt(U)];H&&(v[H.charCodeAt(0)]=!0)}},Da.prototype.populate=function(u,v,_){var M=this.layers[0],L=M.layout,U=L.get("text-font"),H=L.get("text-field"),ie=L.get("icon-image"),_e=(H.value.kind!=="constant"||H.value.value instanceof Er&&!H.value.value.isEmpty()||H.value.value.toString().length>0)&&(U.value.kind!=="constant"||U.value.value.length>0),Ye=ie.value.kind!=="constant"||!!ie.value.value||Object.keys(ie.parameters).length>0,ot=L.get("symbol-sort-key");if(this.features=[],_e||Ye){for(var dt=v.iconDependencies,zt=v.glyphDependencies,Xt=v.availableImages,Pn=new ui(this.zoom),Ln=0,rr=u;Ln<rr.length;Ln+=1){var $n=rr[Ln],xr=$n.feature,Lr=$n.id,Zr=$n.index,Jr=$n.sourceLayerIndex,ai=M._featureFilter.needGeometry,Ki=oo(xr,ai);if(M._featureFilter.filter(Pn,Ki,_)){ai||(Ki.geometry=$a(xr));var ca=void 0;if(_e){var Ja=M.getValueAndResolveTokens("text-field",Ki,_,Xt),Sa=Er.factory(Ja);Si(Sa)&&(this.hasRTLText=!0),(!this.hasRTLText||na()==="unavailable"||this.hasRTLText&&La.isParsed())&&(ca=vn(Sa,M,Ki))}var lo=void 0;if(Ye){var Ca=M.getValueAndResolveTokens("icon-image",Ki,_,Xt);lo=Ca instanceof gi?Ca:gi.fromString(Ca)}if(ca||lo){var $o=this.sortFeaturesByKey?ot.evaluate(Ki,{},_):void 0;if(this.features.push({id:Lr,text:ca,icon:lo,index:Zr,sourceLayerIndex:Jr,geometry:Ki.geometry,properties:xr.properties,type:pr[xr.type],sortKey:$o}),lo&&(dt[lo.name]=!0),ca){var Eo=U.evaluate(Ki,{},_).join(","),Fa=L.get("text-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(io.vertical)>=0;for(var Go=0,Lo=ca.sections;Go<Lo.length;Go+=1){var To=Lo[Go];if(To.image)dt[To.image.name]=!0;else{var ho=Vt(ca.toString()),ws=To.fontStack||Eo,Eu=zt[ws]=zt[ws]||{};this.calculateGlyphDependencies(To.text,Eu,Fa,this.allowVerticalPlacement,ho)}}}}}}L.get("symbol-placement")==="line"&&(this.features=function(cu){var Fu={},Su={},ol=[],sl=0;function lc(Na){ol.push(cu[Na]),sl++}function jc(Na,zu,Zc){var Mo=Su[Na];return delete Su[Na],Su[zu]=Mo,ol[Mo].geometry[0].pop(),ol[Mo].geometry[0]=ol[Mo].geometry[0].concat(Zc[0]),Mo}function Fl(Na,zu,Zc){var Mo=Fu[zu];return delete Fu[zu],Fu[Na]=Mo,ol[Mo].geometry[0].shift(),ol[Mo].geometry[0]=Zc[0].concat(ol[Mo].geometry[0]),Mo}function gs(Na,zu,Zc){var Mo=Zc?zu[0][zu[0].length-1]:zu[0][0];return Na+":"+Mo.x+":"+Mo.y}for(var gl=0;gl<cu.length;gl++){var Cu=cu[gl],zo=Cu.geometry,fu=Cu.text?Cu.text.toString():null;if(fu){var Io=gs(fu,zo),xs=gs(fu,zo,!0);if(Io in Su&&xs in Fu&&Su[Io]!==Fu[xs]){var tf=Fl(Io,xs,zo),au=jc(Io,xs,ol[tf].geometry);delete Fu[Io],delete Su[xs],Su[gs(fu,ol[au].geometry,!0)]=au,ol[tf].geometry=null}else Io in Su?jc(Io,xs,zo):xs in Fu?Fl(Io,xs,zo):(lc(gl),Fu[Io]=sl-1,Su[xs]=sl-1)}else lc(gl)}return ol.filter(function(Na){return Na.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(cu,Fu){return cu.sortKey-Fu.sortKey})}},Da.prototype.update=function(u,v,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,v,this.layers,_),this.icon.programConfigurations.updatePaintArrays(u,v,this.layers,_))},Da.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Da.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Da.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Da.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Da.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Da.prototype.addToLineVertexArray=function(u,v){var _=this.lineVertexArray.length;if(u.segment!==void 0){for(var M=u.dist(v[u.segment+1]),L=u.dist(v[u.segment]),U={},H=u.segment+1;H<v.length;H++)U[H]={x:v[H].x,y:v[H].y,tileUnitDistanceFromAnchor:M},H<v.length-1&&(M+=v[H+1].dist(v[H]));for(var ie=u.segment||0;ie>=0;ie--)U[ie]={x:v[ie].x,y:v[ie].y,tileUnitDistanceFromAnchor:L},ie>0&&(L+=v[ie-1].dist(v[ie]));for(var _e=0;_e<v.length;_e++){var Ye=U[_e];this.lineVertexArray.emplaceBack(Ye.x,Ye.y,Ye.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}},Da.prototype.addSymbols=function(u,v,_,M,L,U,H,ie,_e,Ye,ot,dt){for(var zt=u.indexArray,Xt=u.layoutVertexArray,Pn=u.segments.prepareSegment(4*v.length,Xt,zt,this.canOverlap?U.sortKey:void 0),Ln=this.glyphOffsetArray.length,rr=Pn.vertexLength,$n=this.allowVerticalPlacement&&H===io.vertical?Math.PI/2:0,xr=U.text&&U.text.sections,Lr=0;Lr<v.length;Lr++){var Zr=v[Lr],Jr=Zr.tl,ai=Zr.tr,Ki=Zr.bl,ca=Zr.br,Ja=Zr.tex,Sa=Zr.pixelOffsetTL,lo=Zr.pixelOffsetBR,Ca=Zr.minFontScaleX,$o=Zr.minFontScaleY,Eo=Zr.glyphOffset,Fa=Zr.isSDF,Go=Zr.sectionIndex,Lo=Pn.vertexLength,To=Eo[1];ti(Xt,ie.x,ie.y,Jr.x,To+Jr.y,Ja.x,Ja.y,_,Fa,Sa.x,Sa.y,Ca,$o),ti(Xt,ie.x,ie.y,ai.x,To+ai.y,Ja.x+Ja.w,Ja.y,_,Fa,lo.x,Sa.y,Ca,$o),ti(Xt,ie.x,ie.y,Ki.x,To+Ki.y,Ja.x,Ja.y+Ja.h,_,Fa,Sa.x,lo.y,Ca,$o),ti(Xt,ie.x,ie.y,ca.x,To+ca.y,Ja.x+Ja.w,Ja.y+Ja.h,_,Fa,lo.x,lo.y,Ca,$o),Li(u.dynamicLayoutVertexArray,ie,$n),zt.emplaceBack(Lo,Lo+1,Lo+2),zt.emplaceBack(Lo+1,Lo+2,Lo+3),Pn.vertexLength+=4,Pn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Eo[0]),Lr!==v.length-1&&Go===v[Lr+1].sectionIndex||u.programConfigurations.populatePaintArrays(Xt.length,U,U.index,{},dt,xr&&xr[Go])}u.placedSymbolArray.emplaceBack(ie.x,ie.y,Ln,this.glyphOffsetArray.length-Ln,rr,_e,Ye,ie.segment,_?_[0]:0,_?_[1]:0,M[0],M[1],H,0,!1,0,ot)},Da.prototype._addCollisionDebugVertex=function(u,v,_,M,L,U){return v.emplaceBack(0,0),u.emplaceBack(_.x,_.y,M,L,Math.round(U.x),Math.round(U.y))},Da.prototype.addCollisionDebugVertices=function(u,v,_,M,L,U,H){var ie=L.segments.prepareSegment(4,L.layoutVertexArray,L.indexArray),_e=ie.vertexLength,Ye=L.layoutVertexArray,ot=L.collisionVertexArray,dt=H.anchorX,zt=H.anchorY;this._addCollisionDebugVertex(Ye,ot,U,dt,zt,new pe(u,v)),this._addCollisionDebugVertex(Ye,ot,U,dt,zt,new pe(_,v)),this._addCollisionDebugVertex(Ye,ot,U,dt,zt,new pe(_,M)),this._addCollisionDebugVertex(Ye,ot,U,dt,zt,new pe(u,M)),ie.vertexLength+=4;var Xt=L.indexArray;Xt.emplaceBack(_e,_e+1),Xt.emplaceBack(_e+1,_e+2),Xt.emplaceBack(_e+2,_e+3),Xt.emplaceBack(_e+3,_e),ie.primitiveLength+=4},Da.prototype.addDebugCollisionBoxes=function(u,v,_,M){for(var L=u;L<v;L++){var U=this.collisionBoxArray.get(L);this.addCollisionDebugVertices(U.x1,U.y1,U.x2,U.y2,M?this.textCollisionBox:this.iconCollisionBox,U.anchorPoint,_)}},Da.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Va(yf,Rm.members,bc),this.iconCollisionBox=new Va(yf,Rm.members,bc);for(var u=0;u<this.symbolInstances.length;u++){var v=this.symbolInstances.get(u);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}},Da.prototype._deserializeCollisionBoxesForSymbol=function(u,v,_,M,L,U,H,ie,_e){for(var Ye={},ot=v;ot<_;ot++){var dt=u.get(ot);Ye.textBox={x1:dt.x1,y1:dt.y1,x2:dt.x2,y2:dt.y2,anchorPointX:dt.anchorPointX,anchorPointY:dt.anchorPointY},Ye.textFeatureIndex=dt.featureIndex;break}for(var zt=M;zt<L;zt++){var Xt=u.get(zt);Ye.verticalTextBox={x1:Xt.x1,y1:Xt.y1,x2:Xt.x2,y2:Xt.y2,anchorPointX:Xt.anchorPointX,anchorPointY:Xt.anchorPointY},Ye.verticalTextFeatureIndex=Xt.featureIndex;break}for(var Pn=U;Pn<H;Pn++){var Ln=u.get(Pn);Ye.iconBox={x1:Ln.x1,y1:Ln.y1,x2:Ln.x2,y2:Ln.y2,anchorPointX:Ln.anchorPointX,anchorPointY:Ln.anchorPointY},Ye.iconFeatureIndex=Ln.featureIndex;break}for(var rr=ie;rr<_e;rr++){var $n=u.get(rr);Ye.verticalIconBox={x1:$n.x1,y1:$n.y1,x2:$n.x2,y2:$n.y2,anchorPointX:$n.anchorPointX,anchorPointY:$n.anchorPointY},Ye.verticalIconFeatureIndex=$n.featureIndex;break}return Ye},Da.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var v=0;v<this.symbolInstances.length;v++){var _=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}},Da.prototype.hasTextData=function(){return this.text.segments.get().length>0},Da.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Da.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Da.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Da.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Da.prototype.addIndicesForPlacedSymbol=function(u,v){for(var _=u.placedSymbolArray.get(v),M=_.vertexStartIndex+4*_.numGlyphs,L=_.vertexStartIndex;L<M;L+=4)u.indexArray.emplaceBack(L,L+1,L+2),u.indexArray.emplaceBack(L+1,L+2,L+3)},Da.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var v=Math.sin(u),_=Math.cos(u),M=[],L=[],U=[],H=0;H<this.symbolInstances.length;++H){U.push(H);var ie=this.symbolInstances.get(H);M.push(0|Math.round(v*ie.anchorX+_*ie.anchorY)),L.push(ie.featureIndex)}return U.sort(function(_e,Ye){return M[_e]-M[Ye]||L[Ye]-L[_e]}),U},Da.prototype.addToSortKeyRanges=function(u,v){var _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===v?_.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:u,symbolInstanceEnd:u+1})},Da.prototype.sortFeatures=function(u){var v=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var _=0,M=this.symbolInstanceIndexes;_<M.length;_+=1){var L=this.symbolInstances.get(M[_]);this.featureSortOrder.push(L.featureIndex),[L.rightJustifiedTextSymbolIndex,L.centerJustifiedTextSymbolIndex,L.leftJustifiedTextSymbolIndex].forEach(function(U,H,ie){U>=0&&ie.indexOf(U)===H&&v.addIndicesForPlacedSymbol(v.text,U)}),L.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,L.verticalPlacedTextSymbolIndex),L.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,L.placedIconSymbolIndex),L.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,L.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ma("SymbolBucket",Da,{omit:["layers","collisionBoxArray","features","compareText"]}),Da.MAX_GLYPHS=65535,Da.addDynamicAttributes=Li;var Ha=new os({"symbol-placement":new oa(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new oa(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oa(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ra(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oa(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oa(kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new oa(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new oa(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oa(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ra(kt.layout_symbol["icon-size"]),"icon-text-fit":new oa(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oa(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ra(kt.layout_symbol["icon-image"]),"icon-rotate":new ra(kt.layout_symbol["icon-rotate"]),"icon-padding":new oa(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new oa(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new ra(kt.layout_symbol["icon-offset"]),"icon-anchor":new ra(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oa(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oa(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oa(kt.layout_symbol["text-rotation-alignment"]),"text-field":new ra(kt.layout_symbol["text-field"]),"text-font":new ra(kt.layout_symbol["text-font"]),"text-size":new ra(kt.layout_symbol["text-size"]),"text-max-width":new ra(kt.layout_symbol["text-max-width"]),"text-line-height":new oa(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new ra(kt.layout_symbol["text-letter-spacing"]),"text-justify":new ra(kt.layout_symbol["text-justify"]),"text-radial-offset":new ra(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oa(kt.layout_symbol["text-variable-anchor"]),"text-anchor":new ra(kt.layout_symbol["text-anchor"]),"text-max-angle":new oa(kt.layout_symbol["text-max-angle"]),"text-writing-mode":new oa(kt.layout_symbol["text-writing-mode"]),"text-rotate":new ra(kt.layout_symbol["text-rotate"]),"text-padding":new oa(kt.layout_symbol["text-padding"]),"text-keep-upright":new oa(kt.layout_symbol["text-keep-upright"]),"text-transform":new ra(kt.layout_symbol["text-transform"]),"text-offset":new ra(kt.layout_symbol["text-offset"]),"text-allow-overlap":new oa(kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new oa(kt.layout_symbol["text-ignore-placement"]),"text-optional":new oa(kt.layout_symbol["text-optional"])}),go={paint:new os({"icon-opacity":new ra(kt.paint_symbol["icon-opacity"]),"icon-color":new ra(kt.paint_symbol["icon-color"]),"icon-halo-color":new ra(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ra(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ra(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new oa(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new oa(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ra(kt.paint_symbol["text-opacity"]),"text-color":new ra(kt.paint_symbol["text-color"],{runtimeType:Ni,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new ra(kt.paint_symbol["text-halo-color"]),"text-halo-width":new ra(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new ra(kt.paint_symbol["text-halo-blur"]),"text-translate":new oa(kt.paint_symbol["text-translate"]),"text-translate-anchor":new oa(kt.paint_symbol["text-translate-anchor"])}),layout:Ha},xo=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:vi,this.defaultValue=u};xo.prototype.evaluate=function(u){if(u.formattedSection){var v=this.defaultValue.property.overrides;if(v&&v.hasOverride(u.formattedSection))return v.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default},xo.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){return null},Ma("FormatSectionOverride",xo,{omit:["defaultValue"]});var ks=function(u){function v(_){u.call(this,_,go)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.recalculate=function(_,M){if(u.prototype.recalculate.call(this,_,M),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var L=this.layout.get("text-writing-mode");if(L){for(var U=[],H=0,ie=L;H<ie.length;H+=1){var _e=ie[H];U.indexOf(_e)<0&&U.push(_e)}this.layout._values["text-writing-mode"]=U}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},v.prototype.getValueAndResolveTokens=function(_,M,L,U){var H=this.layout.get(_).evaluate(M,{},L,U),ie=this._unevaluatedLayout._values[_];return ie.isDataDriven()||df(ie.value)||!H?H:function(_e,Ye){return Ye.replace(/{([^{}]+)}/g,function(ot,dt){return dt in _e?String(_e[dt]):""})}(M.properties,H)},v.prototype.createBucket=function(_){return new Da(_)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype._setPaintOverrides=function(){for(var _=0,M=go.paint.overridableProperties;_<M.length;_+=1){var L=M[_];if(v.hasPaintOverride(this.layout,L)){var U,H=this.paint.get(L),ie=new xo(H),_e=new Rc(ie,H.property.specification);U=H.value.kind==="constant"||H.value.kind==="source"?new gh("source",_e):new pf("composite",_e,H.value.zoomStops,H.value._interpolationType),this.paint._values[L]=new Ko(H.property,U,H.parameters)}}},v.prototype._handleOverridablePaintPropertyUpdate=function(_,M,L){return!(!this.layout||M.isDataDriven()||L.isDataDriven())&&v.hasPaintOverride(this.layout,_)},v.hasPaintOverride=function(_,M){var L=_.get("text-field"),U=go.paint.properties[M],H=!1,ie=function(ot){for(var dt=0,zt=ot;dt<zt.length;dt+=1)if(U.overrides&&U.overrides.hasOverride(zt[dt]))return void(H=!0)};if(L.value.kind==="constant"&&L.value.value instanceof Er)ie(L.value.value.sections);else if(L.value.kind==="source"){var _e=function(ot){H||(ot instanceof $i&&wi(ot.value)===ko?ie(ot.value.sections):ot instanceof ka?ie(ot.sections):ot.eachChild(_e))},Ye=L.value;Ye._styleExpression&&_e(Ye._styleExpression.expression)}return H},v}(Fo),xu={paint:new os({"background-color":new oa(kt.paint_background["background-color"]),"background-pattern":new Jo(kt.paint_background["background-pattern"]),"background-opacity":new oa(kt.paint_background["background-opacity"])})},jf=function(u){function v(_){u.call(this,_,xu)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v}(Fo),Qp={paint:new os({"raster-opacity":new oa(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new oa(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oa(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oa(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new oa(kt.paint_raster["raster-saturation"]),"raster-contrast":new oa(kt.paint_raster["raster-contrast"]),"raster-resampling":new oa(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new oa(kt.paint_raster["raster-fade-duration"])})},sc=function(u){function v(_){u.call(this,_,Qp)}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v}(Fo),Dy=function(u){function v(_){u.call(this,_,{}),this.implementation=_}return u&&(v.__proto__=u),(v.prototype=Object.create(u&&u.prototype)).constructor=v,v.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},v.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},v.prototype.recalculate=function(){},v.prototype.updateTransitions=function(){},v.prototype.hasTransition=function(){},v.prototype.serialize=function(){},v.prototype.onAdd=function(_){this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},v.prototype.onRemove=function(_){this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},v}(Fo),jd={circle:yv,heatmap:Gp,hillshade:bg,fill:Ry,"fill-extrusion":Iy,line:Ly,symbol:ks,background:jf,raster:sc},Jp=he.HTMLImageElement,Pm=he.HTMLCanvasElement,ex=he.HTMLVideoElement,u1=he.ImageData,Im=he.ImageBitmap,B0=function(u,v,_,M){this.context=u,this.format=_,this.texture=u.gl.createTexture(),this.update(v,M)};B0.prototype.update=function(u,v,_){var M=u.width,L=u.height,U=!(this.size&&this.size[0]===M&&this.size[1]===L||_),H=this.context,ie=H.gl;if(this.useMipmap=!!(v&&v.useMipmap),ie.bindTexture(ie.TEXTURE_2D,this.texture),H.pixelStoreUnpackFlipY.set(!1),H.pixelStoreUnpack.set(1),H.pixelStoreUnpackPremultiplyAlpha.set(this.format===ie.RGBA&&(!v||v.premultiply!==!1)),U)this.size=[M,L],u instanceof Jp||u instanceof Pm||u instanceof ex||u instanceof u1||Im&&u instanceof Im?ie.texImage2D(ie.TEXTURE_2D,0,this.format,this.format,ie.UNSIGNED_BYTE,u):ie.texImage2D(ie.TEXTURE_2D,0,this.format,M,L,0,this.format,ie.UNSIGNED_BYTE,u.data);else{var _e=_||{x:0,y:0},Ye=_e.x,ot=_e.y;u instanceof Jp||u instanceof Pm||u instanceof ex||u instanceof u1||Im&&u instanceof Im?ie.texSubImage2D(ie.TEXTURE_2D,0,Ye,ot,ie.RGBA,ie.UNSIGNED_BYTE,u):ie.texSubImage2D(ie.TEXTURE_2D,0,Ye,ot,M,L,ie.RGBA,ie.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ie.generateMipmap(ie.TEXTURE_2D)},B0.prototype.bind=function(u,v,_){var M=this.context.gl;M.bindTexture(M.TEXTURE_2D,this.texture),_!==M.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=M.LINEAR),u!==this.filter&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,u),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,_||u),this.filter=u),v!==this.wrap&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,v),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,v),this.wrap=v)},B0.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},B0.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var F0=function(u){var v=this;this._callback=u,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){v._triggered=!1,v._callback()})};F0.prototype.trigger=function(){var u=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1,u._callback()},0))},F0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ev=function(u,v,_){this.target=u,this.parent=v,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Wt(["receive","process"],this),this.invoker=new F0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=qe()?u:he};function l1(u,v,_){var M=2*Math.PI*6378137/256/Math.pow(2,_);return[u*M-2*Math.PI*6378137/2,v*M-2*Math.PI*6378137/2]}ev.prototype.send=function(u,v,_,M,L){var U=this;L===void 0&&(L=!1);var H=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[H]=_);var ie=pt(this.globalScope)?void 0:[];return this.target.postMessage({id:H,type:u,hasCallback:!!_,targetMapId:M,mustQueue:L,sourceMapId:this.mapId,data:qo(v,ie)},ie),{cancel:function(){_&&delete U.callbacks[H],U.target.postMessage({id:H,type:"<cancel>",targetMapId:M,sourceMapId:U.mapId})}}},ev.prototype.receive=function(u){var v=u.data,_=v.id;if(_&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[_];var M=this.cancelCallbacks[_];delete this.cancelCallbacks[_],M&&M()}else qe()||v.mustQueue?(this.tasks[_]=v,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,v)},ev.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),v=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(u,v)}},ev.prototype.processTask=function(u,v){var _=this;if(v.type==="<response>"){var M=this.callbacks[u];delete this.callbacks[u],M&&(v.error?M(As(v.error)):M(null,As(v.data)))}else{var L=!1,U=pt(this.globalScope)?void 0:[],H=v.hasCallback?function(ot,dt){L=!0,delete _.cancelCallbacks[u],_.target.postMessage({id:u,type:"<response>",sourceMapId:_.mapId,error:ot?qo(ot):null,data:qo(dt,U)},U)}:function(ot){L=!0},ie=null,_e=As(v.data);if(this.parent[v.type])ie=this.parent[v.type](v.sourceMapId,_e,H);else if(this.parent.getWorkerSource){var Ye=v.type.split(".");ie=this.parent.getWorkerSource(v.sourceMapId,Ye[0],_e.source)[Ye[1]](_e,H)}else H(new Error("Could not find function "+v.type));!L&&ie&&ie.cancel&&(this.cancelCallbacks[u]=ie.cancel)}},ev.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Xl=function(u,v){u&&(v?this.setSouthWest(u).setNorthEast(v):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};Xl.prototype.setNorthEast=function(u){return this._ne=u instanceof Nu?new Nu(u.lng,u.lat):Nu.convert(u),this},Xl.prototype.setSouthWest=function(u){return this._sw=u instanceof Nu?new Nu(u.lng,u.lat):Nu.convert(u),this},Xl.prototype.extend=function(u){var v,_,M=this._sw,L=this._ne;if(u instanceof Nu)v=u,_=u;else{if(!(u instanceof Xl))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Xl.convert(u)):this.extend(Nu.convert(u)):this;if(_=u._ne,!(v=u._sw)||!_)return this}return M||L?(M.lng=Math.min(v.lng,M.lng),M.lat=Math.min(v.lat,M.lat),L.lng=Math.max(_.lng,L.lng),L.lat=Math.max(_.lat,L.lat)):(this._sw=new Nu(v.lng,v.lat),this._ne=new Nu(_.lng,_.lat)),this},Xl.prototype.getCenter=function(){return new Nu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Xl.prototype.getSouthWest=function(){return this._sw},Xl.prototype.getNorthEast=function(){return this._ne},Xl.prototype.getNorthWest=function(){return new Nu(this.getWest(),this.getNorth())},Xl.prototype.getSouthEast=function(){return new Nu(this.getEast(),this.getSouth())},Xl.prototype.getWest=function(){return this._sw.lng},Xl.prototype.getSouth=function(){return this._sw.lat},Xl.prototype.getEast=function(){return this._ne.lng},Xl.prototype.getNorth=function(){return this._ne.lat},Xl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Xl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Xl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Xl.prototype.contains=function(u){var v=Nu.convert(u),_=v.lng,M=v.lat,L=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(L=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=M&&M<=this._ne.lat&&L},Xl.convert=function(u){return!u||u instanceof Xl?u:new Xl(u)};var Nu=function(u,v){if(isNaN(u)||isNaN(v))throw new Error("Invalid LngLat object: ("+u+", "+v+")");if(this.lng=+u,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Nu.prototype.wrap=function(){return new Nu(de(this.lng,-180,180),this.lat)},Nu.prototype.toArray=function(){return[this.lng,this.lat]},Nu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Nu.prototype.distanceTo=function(u){var v=Math.PI/180,_=this.lat*v,M=u.lat*v,L=Math.sin(_)*Math.sin(M)+Math.cos(_)*Math.cos(M)*Math.cos((u.lng-this.lng)*v);return 63710088e-1*Math.acos(Math.min(L,1))},Nu.prototype.toBounds=function(u){u===void 0&&(u=0);var v=360*u/40075017,_=v/Math.cos(Math.PI/180*this.lat);return new Xl(new Nu(this.lng-_,this.lat-v),new Nu(this.lng+_,this.lat+v))},Nu.convert=function(u){if(u instanceof Nu)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Nu(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Nu(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var c1=2*Math.PI*63710088e-1;function Mg(u){return c1*Math.cos(u*Math.PI/180)}function tx(u){return(180+u)/360}function Rg(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function f1(u,v){return u/Mg(v)}function h1(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}var z0=function(u,v,_){_===void 0&&(_=0),this.x=+u,this.y=+v,this.z=+_};z0.fromLngLat=function(u,v){v===void 0&&(v=0);var _=Nu.convert(u);return new z0(tx(_.lng),Rg(_.lat),f1(v,_.lat))},z0.prototype.toLngLat=function(){return new Nu(360*this.x-180,h1(this.y))},z0.prototype.toAltitude=function(){return this.z*Mg(h1(this.y))},z0.prototype.meterInMercatorCoordinateUnits=function(){return 1/c1*(u=h1(this.y),1/Math.cos(u*Math.PI/180));var u};var md=function(u,v,_){this.z=u,this.x=v,this.y=_,this.key=wa(0,u,u,v,_)};md.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y},md.prototype.url=function(u,v){var _,M,L,U,H,ie=(M=this.y,L=this.z,U=l1(256*(_=this.x),256*(M=Math.pow(2,L)-M-1),L),H=l1(256*(_+1),256*(M+1),L),U[0]+","+U[1]+","+H[0]+","+H[1]),_e=function(Ye,ot,dt){for(var zt,Xt="",Pn=Ye;Pn>0;Pn--)Xt+=(ot&(zt=1<<Pn-1)?1:0)+(dt&zt?2:0);return Xt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_e).replace("{bbox-epsg-3857}",ie)},md.prototype.getTilePoint=function(u){var v=Math.pow(2,this.z);return new pe(8192*(u.x*v-this.x),8192*(u.y*v-this.y))},md.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Yl=function(u,v){this.wrap=u,this.canonical=v,this.key=wa(u,v.z,v.z,v.x,v.y)},zs=function(u,v,_,M,L){this.overscaledZ=u,this.wrap=v,this.canonical=new md(_,+M,+L),this.key=wa(v,u,_,M,L)};function wa(u,v,_,M,L){(u*=2)<0&&(u=-1*u-1);var U=1<<_;return(U*U*u+U*L+M).toString(36)+_.toString(36)+v.toString(36)}zs.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)},zs.prototype.scaledTo=function(u){var v=this.canonical.z-u;return u>this.canonical.z?new zs(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zs(u,this.wrap,u,this.canonical.x>>v,this.canonical.y>>v)},zs.prototype.calculateScaledKey=function(u,v){var _=this.canonical.z-u;return u>this.canonical.z?wa(this.wrap*+v,u,this.canonical.z,this.canonical.x,this.canonical.y):wa(this.wrap*+v,u,u,this.canonical.x>>_,this.canonical.y>>_)},zs.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var v=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>v&&u.canonical.y===this.canonical.y>>v},zs.prototype.children=function(u){if(this.overscaledZ>=u)return[new zs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var v=this.canonical.z+1,_=2*this.canonical.x,M=2*this.canonical.y;return[new zs(v,this.wrap,v,_,M),new zs(v,this.wrap,v,_+1,M),new zs(v,this.wrap,v,_,M+1),new zs(v,this.wrap,v,_+1,M+1)]},zs.prototype.isLessThan=function(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))},zs.prototype.wrapped=function(){return new zs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},zs.prototype.unwrapTo=function(u){return new zs(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)},zs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},zs.prototype.toUnwrapped=function(){return new Yl(this.wrap,this.canonical)},zs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},zs.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new z0(u.x-this.wrap,u.y))},Ma("CanonicalTileID",md),Ma("OverscaledTileID",zs,{omit:["posMatrix"]});var Ch=function(u,v,_){if(this.uid=u,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(_&&_!=="mapbox"&&_!=="terrarium")return it('"'+_+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=v.height;var M=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=_||"mapbox";for(var L=0;L<M;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(M,L)]=this.data[this._idx(M-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,M)]=this.data[this._idx(L,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)]};Ch.prototype.get=function(u,v){var _=new Uint8Array(this.data.buffer),M=4*this._idx(u,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(_[M],_[M+1],_[M+2])},Ch.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ch.prototype._idx=function(u,v){if(u<-1||u>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(u+1)},Ch.prototype._unpackMapbox=function(u,v,_){return(256*u*256+256*v+_)/10-1e4},Ch.prototype._unpackTerrarium=function(u,v,_){return 256*u+v+_/256-32768},Ch.prototype.getPixels=function(){return new Nc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ch.prototype.backfillBorder=function(u,v,_){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");var M=v*this.dim,L=v*this.dim+this.dim,U=_*this.dim,H=_*this.dim+this.dim;switch(v){case-1:M=L-1;break;case 1:L=M+1}switch(_){case-1:U=H-1;break;case 1:H=U+1}for(var ie=-v*this.dim,_e=-_*this.dim,Ye=U;Ye<H;Ye++)for(var ot=M;ot<L;ot++)this.data[this._idx(ot,Ye)]=u.data[this._idx(ot+ie,Ye+_e)]},Ma("DEMData",Ch);var Bu=function(u){this._stringToNumber={},this._numberToString=[];for(var v=0;v<u.length;v++){var _=u[v];this._stringToNumber[_]=v,this._numberToString[v]=_}};Bu.prototype.encode=function(u){return this._stringToNumber[u]},Bu.prototype.decode=function(u){return this._numberToString[u]};var al=function(u,v,_,M,L){this.type="Feature",this._vectorTileFeature=u,u._z=v,u._x=_,u._y=M,this.properties=u.properties,this.id=L},i0={geometry:{configurable:!0}};i0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i0.geometry.set=function(u){this._geometry=u},al.prototype.toJSON=function(){var u={geometry:this.geometry};for(var v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(u[v]=this[v]);return u},Object.defineProperties(al.prototype,i0);var a0=function(){this.state={},this.stateChanges={},this.deletedStates={}};a0.prototype.updateState=function(u,v,_){var M=String(v);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][M]=this.stateChanges[u][M]||{},xe(this.stateChanges[u][M],_),this.deletedStates[u]===null)for(var L in this.deletedStates[u]={},this.state[u])L!==M&&(this.deletedStates[u][L]=null);else if(this.deletedStates[u]&&this.deletedStates[u][M]===null)for(var U in this.deletedStates[u][M]={},this.state[u][M])_[U]||(this.deletedStates[u][M][U]=null);else for(var H in _)this.deletedStates[u]&&this.deletedStates[u][M]&&this.deletedStates[u][M][H]===null&&delete this.deletedStates[u][M][H]},a0.prototype.removeFeatureState=function(u,v,_){if(this.deletedStates[u]!==null){var M=String(v);if(this.deletedStates[u]=this.deletedStates[u]||{},_&&v!==void 0)this.deletedStates[u][M]!==null&&(this.deletedStates[u][M]=this.deletedStates[u][M]||{},this.deletedStates[u][M][_]=null);else if(v!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][M])for(_ in this.deletedStates[u][M]={},this.stateChanges[u][M])this.deletedStates[u][M][_]=null;else this.deletedStates[u][M]=null;else this.deletedStates[u]=null}},a0.prototype.getState=function(u,v){var _=String(v),M=xe({},(this.state[u]||{})[_],(this.stateChanges[u]||{})[_]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){var L=this.deletedStates[u][v];if(L===null)return{};for(var U in L)delete M[U]}return M},a0.prototype.initializeTileState=function(u,v){u.setFeatureState(this.state,v)},a0.prototype.coalesceChanges=function(u,v){var _={};for(var M in this.stateChanges){this.state[M]=this.state[M]||{};var L={};for(var U in this.stateChanges[M])this.state[M][U]||(this.state[M][U]={}),xe(this.state[M][U],this.stateChanges[M][U]),L[U]=this.state[M][U];_[M]=L}for(var H in this.deletedStates){this.state[H]=this.state[H]||{};var ie={};if(this.deletedStates[H]===null)for(var _e in this.state[H])ie[_e]={},this.state[H][_e]={};else for(var Ye in this.deletedStates[H]){if(this.deletedStates[H][Ye]===null)this.state[H][Ye]={};else for(var ot=0,dt=Object.keys(this.deletedStates[H][Ye]);ot<dt.length;ot+=1)delete this.state[H][Ye][dt[ot]];ie[Ye]=this.state[H][Ye]}_[H]=_[H]||{},xe(_[H],ie)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(var zt in u)u[zt].setFeatureState(_,v)};var Sp=function(u,v){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new nl(8192,16,0),this.grid3D=new nl(8192,16,0),this.featureIndexArray=new At,this.promoteId=v};function Ny(u,v,_,M,L){return Tt(u,function(U,H){var ie=v instanceof _o?v.get(H):null;return ie&&ie.evaluate?ie.evaluate(_,M,L):ie})}function By(u){for(var v=1/0,_=1/0,M=-1/0,L=-1/0,U=0,H=u;U<H.length;U+=1){var ie=H[U];v=Math.min(v,ie.x),_=Math.min(_,ie.y),M=Math.max(M,ie.x),L=Math.max(L,ie.y)}return{minX:v,minY:_,maxX:M,maxY:L}}function d1(u,v){return v-u}Sp.prototype.insert=function(u,v,_,M,L,U){var H=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,M,L);for(var ie=U?this.grid3D:this.grid,_e=0;_e<v.length;_e++){for(var Ye=v[_e],ot=[1/0,1/0,-1/0,-1/0],dt=0;dt<Ye.length;dt++){var zt=Ye[dt];ot[0]=Math.min(ot[0],zt.x),ot[1]=Math.min(ot[1],zt.y),ot[2]=Math.max(ot[2],zt.x),ot[3]=Math.max(ot[3],zt.y)}ot[0]<8192&&ot[1]<8192&&ot[2]>=0&&ot[3]>=0&&ie.insert(H,ot[0],ot[1],ot[2],ot[3])}},Sp.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ep.VectorTile(new Vr(this.rawTileData)).layers,this.sourceLayerCoder=new Bu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Sp.prototype.query=function(u,v,_,M){var L=this;this.loadVTLayers();for(var U=u.params||{},H=8192/u.tileSize/u.scale,ie=vf(U.filter),_e=u.queryGeometry,Ye=u.queryPadding*H,ot=By(_e),dt=this.grid.query(ot.minX-Ye,ot.minY-Ye,ot.maxX+Ye,ot.maxY+Ye),zt=By(u.cameraQueryGeometry),Xt=this.grid3D.query(zt.minX-Ye,zt.minY-Ye,zt.maxX+Ye,zt.maxY+Ye,function(Zr,Jr,ai,Ki){return function(ca,Ja,Sa,lo,Ca){for(var $o=0,Eo=ca;$o<Eo.length;$o+=1){var Fa=Eo[$o];if(Ja<=Fa.x&&Sa<=Fa.y&&lo>=Fa.x&&Ca>=Fa.y)return!0}var Go=[new pe(Ja,Sa),new pe(Ja,Ca),new pe(lo,Ca),new pe(lo,Sa)];if(ca.length>2){for(var Lo=0,To=Go;Lo<To.length;Lo+=1)if(xc(ca,To[Lo]))return!0}for(var ho=0;ho<ca.length-1;ho++)if(ef(ca[ho],ca[ho+1],Go))return!0;return!1}(u.cameraQueryGeometry,Zr-Ye,Jr-Ye,ai+Ye,Ki+Ye)}),Pn=0,Ln=Xt;Pn<Ln.length;Pn+=1)dt.push(Ln[Pn]);dt.sort(d1);for(var rr,$n={},xr=function(Zr){var Jr=dt[Zr];if(Jr!==rr){rr=Jr;var ai=L.featureIndexArray.get(Jr),Ki=null;L.loadMatchingFeature($n,ai.bucketIndex,ai.sourceLayerIndex,ai.featureIndex,ie,U.layers,U.availableImages,v,_,M,function(ca,Ja,Sa){return Ki||(Ki=$a(ca)),Ja.queryIntersectsFeature(_e,ca,Sa,Ki,L.z,u.transform,H,u.pixelPosMatrix)})}},Lr=0;Lr<dt.length;Lr++)xr(Lr);return $n},Sp.prototype.loadMatchingFeature=function(u,v,_,M,L,U,H,ie,_e,Ye,ot){var dt=this.bucketLayerIDs[v];if(!U||function(ca,Ja){for(var Sa=0;Sa<ca.length;Sa++)if(Ja.indexOf(ca[Sa])>=0)return!0;return!1}(U,dt)){var zt=this.sourceLayerCoder.decode(_),Xt=this.vtLayers[zt].feature(M);if(L.needGeometry){var Pn=oo(Xt,!0);if(!L.filter(new ui(this.tileID.overscaledZ),Pn,this.tileID.canonical))return}else if(!L.filter(new ui(this.tileID.overscaledZ),Xt))return;for(var Ln=this.getId(Xt,zt),rr=0;rr<dt.length;rr++){var $n=dt[rr];if(!(U&&U.indexOf($n)<0)){var xr=ie[$n];if(xr){var Lr={};Ln!==void 0&&Ye&&(Lr=Ye.getState(xr.sourceLayer||"_geojsonTileLayer",Ln));var Zr=xe({},_e[$n]);Zr.paint=Ny(Zr.paint,xr.paint,Xt,Lr,H),Zr.layout=Ny(Zr.layout,xr.layout,Xt,Lr,H);var Jr=!ot||ot(Xt,xr,Lr);if(Jr){var ai=new al(Xt,this.z,this.x,this.y,Ln);ai.layer=Zr;var Ki=u[$n];Ki===void 0&&(Ki=u[$n]=[]),Ki.push({featureIndex:M,feature:ai,intersectionZ:Jr})}}}}}},Sp.prototype.lookupSymbolFeatures=function(u,v,_,M,L,U,H,ie){var _e={};this.loadVTLayers();for(var Ye=vf(L),ot=0,dt=u;ot<dt.length;ot+=1)this.loadMatchingFeature(_e,_,M,dt[ot],Ye,U,H,ie,v);return _e},Sp.prototype.hasLayer=function(u){for(var v=0,_=this.bucketLayerIDs;v<_.length;v+=1)for(var M=0,L=_[v];M<L.length;M+=1)if(u===L[M])return!0;return!1},Sp.prototype.getId=function(u,v){var _=u.id;return this.promoteId&&typeof(_=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]])=="boolean"&&(_=Number(_)),_},Ma("FeatureIndex",Sp,{omit:["rawTileData","sourceLayerCoder"]});var uc=function(u,v){this.tileID=u,this.uid=Ue(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};uc.prototype.registerFadeDuration=function(u){var v=u+this.timeAdded;v<ir.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)},uc.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},uc.prototype.loadVectorData=function(u,v,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){for(var M in u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(Ye,ot){var dt={};if(!ot)return dt;for(var zt=function(){var Ln=Pn[Xt],rr=Ln.layerIds.map(function(Lr){return ot.getLayer(Lr)}).filter(Boolean);if(rr.length!==0){Ln.layers=rr,Ln.stateDependentLayerIds&&(Ln.stateDependentLayers=Ln.stateDependentLayerIds.map(function(Lr){return rr.filter(function(Zr){return Zr.id===Lr})[0]}));for(var $n=0,xr=rr;$n<xr.length;$n+=1)dt[xr[$n].id]=Ln}},Xt=0,Pn=Ye;Xt<Pn.length;Xt+=1)zt();return dt}(u.buckets,v.style),this.hasSymbolBuckets=!1,this.buckets){var L=this.buckets[M];if(L instanceof Da){if(this.hasSymbolBuckets=!0,!_)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var U in this.buckets){var H=this.buckets[U];if(H instanceof Da&&H.hasRTLText){this.hasRTLText=!0,La.isLoading()||La.isLoaded()||na()!=="deferred"||ga();break}}for(var ie in this.queryPadding=0,this.buckets){var _e=this.buckets[ie];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(ie).queryRadius(_e))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new A},uc.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},uc.prototype.getBucket=function(u){return this.buckets[u.id]},uc.prototype.upload=function(u){for(var v in this.buckets){var _=this.buckets[v];_.uploadPending()&&_.upload(u)}var M=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new B0(u,this.imageAtlas.image,M.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new B0(u,this.glyphAtlasImage,M.ALPHA),this.glyphAtlasImage=null)},uc.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)},uc.prototype.queryRenderedFeatures=function(u,v,_,M,L,U,H,ie,_e,Ye){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:L,scale:U,tileSize:this.tileSize,pixelPosMatrix:Ye,transform:ie,params:H,queryPadding:this.queryPadding*_e},u,v,_):{}},uc.prototype.querySourceFeatures=function(u,v){var _=this.latestFeatureIndex;if(_&&_.rawTileData){var M=_.loadVTLayers(),L=v?v.sourceLayer:"",U=M._geojsonTileLayer||M[L];if(U)for(var H=vf(v&&v.filter),ie=this.tileID.canonical,_e=ie.z,Ye=ie.x,ot=ie.y,dt={z:_e,x:Ye,y:ot},zt=0;zt<U.length;zt++){var Xt=U.feature(zt);if(H.needGeometry){var Pn=oo(Xt,!0);if(!H.filter(new ui(this.tileID.overscaledZ),Pn,this.tileID.canonical))continue}else if(!H.filter(new ui(this.tileID.overscaledZ),Xt))continue;var Ln=_.getId(Xt,L),rr=new al(Xt,_e,Ye,ot,Ln);rr.tile=dt,u.push(rr)}}},uc.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},uc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},uc.prototype.setExpiryData=function(u){var v=this.expirationTime;if(u.cacheControl){var _=Pt(u.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){var M=Date.now(),L=!1;if(this.expirationTime>M)L=!1;else if(v)if(this.expirationTime<v)L=!0;else{var U=this.expirationTime-v;U?this.expirationTime=M+Math.max(U,3e4):L=!0}else L=!0;L?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},uc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},uc.prototype.setFeatureState=function(u,v){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(u).length!==0){var _=this.latestFeatureIndex.loadVTLayers();for(var M in this.buckets)if(v.style.hasLayer(M)){var L=this.buckets[M],U=L.layers[0].sourceLayer||"_geojsonTileLayer",H=_[U],ie=u[U];if(H&&ie&&Object.keys(ie).length!==0){L.update(ie,H,this.imageAtlas&&this.imageAtlas.patternPositions||{});var _e=v&&v.style&&v.style.getLayer(M);_e&&(this.queryPadding=Math.max(this.queryPadding,_e.queryRadius(L)))}}}},uc.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},uc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ir.now()},uc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},uc.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=ir.now()+u},uc.prototype.setDependencies=function(u,v){for(var _={},M=0,L=v;M<L.length;M+=1)_[L[M]]=!0;this.dependencies[u]=_},uc.prototype.hasDependency=function(u,v){for(var _=0,M=u;_<M.length;_+=1){var L=this.dependencies[M[_]];if(L){for(var U=0,H=v;U<H.length;U+=1)if(L[H[U]])return!0}}return!1};var Ev=he.performance,Sv=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},Ev.mark(this._marks.start)};Sv.prototype.finish=function(){Ev.mark(this._marks.end);var u=Ev.getEntriesByName(this._marks.measure);return u.length===0&&(Ev.measure(this._marks.measure,this._marks.start,this._marks.end),u=Ev.getEntriesByName(this._marks.measure),Ev.clearMarks(this._marks.start),Ev.clearMarks(this._marks.end),Ev.clearMeasures(this._marks.measure)),u},T.Actor=ev,T.AlphaImage=vp,T.CanonicalTileID=md,T.CollisionBoxArray=A,T.Color=Ht,T.DEMData=Ch,T.DataConstantProperty=oa,T.DictionaryCoder=Bu,T.EXTENT=8192,T.ErrorEvent=an,T.EvaluationParameters=ui,T.Event=Bt,T.Evented=An,T.FeatureIndex=Sp,T.FillBucket=qh,T.FillExtrusionBucket=Fc,T.ImageAtlas=yi,T.ImagePosition=ma,T.LineBucket=zc,T.LngLat=Nu,T.LngLatBounds=Xl,T.MercatorCoordinate=z0,T.ONE_EM=24,T.OverscaledTileID=zs,T.Point=pe,T.Point$1=pe,T.Properties=os,T.Protobuf=Vr,T.RGBAImage=Nc,T.RequestManager=Lt,T.RequestPerformance=Sv,T.ResourceType=ye,T.SegmentVector=qt,T.SourceFeatureState=a0,T.StructArrayLayout1ui2=kl,T.StructArrayLayout2f1f2i16=_f,T.StructArrayLayout2i4=yc,T.StructArrayLayout3ui6=po,T.StructArrayLayout4i8=kd,T.SymbolBucket=Da,T.Texture=B0,T.Tile=uc,T.Transitionable=no,T.Uniform1f=q,T.Uniform1i=_i,T.Uniform2f=ue,T.Uniform3f=fe,T.Uniform4f=Me,T.UniformColor=ze,T.UniformMatrix4f=en,T.UnwrappedTileID=Yl,T.ValidationError=Dt,T.WritingMode=io,T.ZoomHistory=Eh,T.add=function(u,v,_){return u[0]=v[0]+_[0],u[1]=v[1]+_[1],u[2]=v[2]+_[2],u},T.addDynamicAttributes=Li,T.asyncAll=function(u,v,_){if(!u.length)return _(null,[]);var M=u.length,L=new Array(u.length),U=null;u.forEach(function(H,ie){v(H,function(_e,Ye){_e&&(U=_e),L[ie]=Ye,--M==0&&_(U,L)})})},T.bezier=re,T.bindAll=Wt,T.browser=ir,T.cacheEntryPossiblyAdded=function(u){++bt>Ar&&(u.getActor().send("enforceCacheSizeLimit",wr),bt=0)},T.clamp=se,T.clearTileCache=function(u){var v=he.caches.delete("mapbox-tiles");u&&v.catch(u).then(function(){return u()})},T.clipLine=vd,T.clone=function(u){var v=new ss(16);return v[0]=u[0],v[1]=u[1],v[2]=u[2],v[3]=u[3],v[4]=u[4],v[5]=u[5],v[6]=u[6],v[7]=u[7],v[8]=u[8],v[9]=u[9],v[10]=u[10],v[11]=u[11],v[12]=u[12],v[13]=u[13],v[14]=u[14],v[15]=u[15],v},T.clone$1=Ie,T.clone$2=function(u){var v=new ss(3);return v[0]=u[0],v[1]=u[1],v[2]=u[2],v},T.collisionCircleLayout=et,T.config=Qn,T.create=function(){var u=new ss(16);return ss!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},T.create$1=function(){var u=new ss(9);return ss!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},T.create$2=function(){var u=new ss(4);return ss!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},T.createCommonjsModule=ne,T.createExpression=Wu,T.createLayout=qs,T.createStyleLayer=function(u){return u.type==="custom"?new Dy(u):new jd[u.type](u)},T.cross=function(u,v,_){var M=v[0],L=v[1],U=v[2],H=_[0],ie=_[1],_e=_[2];return u[0]=L*_e-U*ie,u[1]=U*H-M*_e,u[2]=M*ie-L*H,u},T.deepEqual=function u(v,_){if(Array.isArray(v)){if(!Array.isArray(_)||v.length!==_.length)return!1;for(var M=0;M<v.length;M++)if(!u(v[M],_[M]))return!1;return!0}if(typeof v=="object"&&v!==null&&_!==null){if(typeof _!="object"||Object.keys(v).length!==Object.keys(_).length)return!1;for(var L in v)if(!u(v[L],_[L]))return!1;return!0}return v===_},T.dot=function(u,v){return u[0]*v[0]+u[1]*v[1]+u[2]*v[2]},T.dot$1=function(u,v){return u[0]*v[0]+u[1]*v[1]+u[2]*v[2]+u[3]*v[3]},T.ease=Se,T.emitValidationErrors=_h,T.endsWith=Rt,T.enforceCacheSizeLimit=function(u){Ir(),Zt&&Zt.then(function(v){v.keys().then(function(_){for(var M=0;M<_.length-u;M++)v.delete(_[M])})})},T.evaluateSizeForFeature=Uc,T.evaluateSizeForZoom=Sl,T.evaluateVariableOffset=vr,T.evented=Gi,T.extend=xe,T.featureFilter=vf,T.filterObject=Ze,T.fromRotation=function(u,v){var _=Math.sin(v),M=Math.cos(v);return u[0]=M,u[1]=_,u[2]=0,u[3]=-_,u[4]=M,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},T.getAnchorAlignment=lu,T.getAnchorJustification=tr,T.getArrayBuffer=fr,T.getImage=Pe,T.getJSON=function(u,v){return Dn(xe(u,{type:"json"}),v)},T.getRTLTextPluginStatus=na,T.getReferrer=ht,T.getVideo=function(u,v){var _,M,L=he.document.createElement("video");L.muted=!0,L.onloadstart=function(){v(null,L)};for(var U=0;U<u.length;U++){var H=he.document.createElement("source");_=u[U],M=void 0,(M=he.document.createElement("a")).href=_,(M.protocol!==he.document.location.protocol||M.host!==he.document.location.host)&&(L.crossOrigin="Anonymous"),H.src=u[U],L.appendChild(H)}return{cancel:function(){}}},T.identity=Dl,T.invert=function(u,v){var _=v[0],M=v[1],L=v[2],U=v[3],H=v[4],ie=v[5],_e=v[6],Ye=v[7],ot=v[8],dt=v[9],zt=v[10],Xt=v[11],Pn=v[12],Ln=v[13],rr=v[14],$n=v[15],xr=_*ie-M*H,Lr=_*_e-L*H,Zr=_*Ye-U*H,Jr=M*_e-L*ie,ai=M*Ye-U*ie,Ki=L*Ye-U*_e,ca=ot*Ln-dt*Pn,Ja=ot*rr-zt*Pn,Sa=ot*$n-Xt*Pn,lo=dt*rr-zt*Ln,Ca=dt*$n-Xt*Ln,$o=zt*$n-Xt*rr,Eo=xr*$o-Lr*Ca+Zr*lo+Jr*Sa-ai*Ja+Ki*ca;return Eo?(u[0]=(ie*$o-_e*Ca+Ye*lo)*(Eo=1/Eo),u[1]=(L*Ca-M*$o-U*lo)*Eo,u[2]=(Ln*Ki-rr*ai+$n*Jr)*Eo,u[3]=(zt*ai-dt*Ki-Xt*Jr)*Eo,u[4]=(_e*Sa-H*$o-Ye*Ja)*Eo,u[5]=(_*$o-L*Sa+U*Ja)*Eo,u[6]=(rr*Zr-Pn*Ki-$n*Lr)*Eo,u[7]=(ot*Ki-zt*Zr+Xt*Lr)*Eo,u[8]=(H*Ca-ie*Sa+Ye*ca)*Eo,u[9]=(M*Sa-_*Ca-U*ca)*Eo,u[10]=(Pn*ai-Ln*Zr+$n*xr)*Eo,u[11]=(dt*Zr-ot*ai-Xt*xr)*Eo,u[12]=(ie*Ja-H*lo-_e*ca)*Eo,u[13]=(_*lo-M*Ja+L*ca)*Eo,u[14]=(Ln*Lr-Pn*Jr-rr*xr)*Eo,u[15]=(ot*Jr-dt*Lr+zt*xr)*Eo,u):null},T.isChar=Z,T.isMapboxURL=bn,T.keysDifference=function(u,v){var _=[];for(var M in u)M in v||_.push(M);return _},T.makeRequest=Dn,T.mapObject=Tt,T.mercatorXfromLng=tx,T.mercatorYfromLat=Rg,T.mercatorZfromAltitude=f1,T.mul=Wp,T.multiply=vl,T.mvt=Ep,T.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},T.normalize=function(u,v){var _=v[0],M=v[1],L=v[2],U=_*_+M*M+L*L;return U>0&&(U=1/Math.sqrt(U)),u[0]=v[0]*U,u[1]=v[1]*U,u[2]=v[2]*U,u},T.number=za,T.offscreenCanvasSupported=ve,T.ortho=function(u,v,_,M,L,U,H){var ie=1/(v-_),_e=1/(M-L),Ye=1/(U-H);return u[0]=-2*ie,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*_e,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*Ye,u[11]=0,u[12]=(v+_)*ie,u[13]=(L+M)*_e,u[14]=(H+U)*Ye,u[15]=1,u},T.parseGlyphPBF=function(u){return new Vr(u).readFields(Ri,[])},T.pbf=Vr,T.performSymbolLayout=function(u,v,_,M,L,U,H){u.createArrays(),u.tilePixelRatio=8192/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;var ie=u.layers[0].layout,_e=u.layers[0]._unevaluatedLayout._values,Ye={};if(u.textSizeData.kind==="composite"){var ot=u.textSizeData,dt=ot.maxZoom;Ye.compositeTextSizes=[_e["text-size"].possiblyEvaluate(new ui(ot.minZoom),H),_e["text-size"].possiblyEvaluate(new ui(dt),H)]}if(u.iconSizeData.kind==="composite"){var zt=u.iconSizeData,Xt=zt.maxZoom;Ye.compositeIconSizes=[_e["icon-size"].possiblyEvaluate(new ui(zt.minZoom),H),_e["icon-size"].possiblyEvaluate(new ui(Xt),H)]}Ye.layoutTextSize=_e["text-size"].possiblyEvaluate(new ui(u.zoom+1),H),Ye.layoutIconSize=_e["icon-size"].possiblyEvaluate(new ui(u.zoom+1),H),Ye.textMaxSize=_e["text-size"].possiblyEvaluate(new ui(18));for(var Pn=24*ie.get("text-line-height"),Ln=ie.get("text-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",rr=ie.get("text-keep-upright"),$n=ie.get("text-size"),xr=function(){var Jr=Zr[Lr],ai=ie.get("text-font").evaluate(Jr,{},H).join(","),Ki=$n.evaluate(Jr,{},H),ca=Ye.layoutTextSize.evaluate(Jr,{},H),Ja=Ye.layoutIconSize.evaluate(Jr,{},H),Sa={horizontal:{},vertical:void 0},lo=Jr.text,Ca=[0,0];if(lo){var $o=lo.toString(),Eo=24*ie.get("text-letter-spacing").evaluate(Jr,{},H),Fa=function(zo){for(var fu=0,Io=zo;fu<Io.length;fu+=1)if(xs=Io[fu].charCodeAt(0),Z.Arabic(xs)||Z["Arabic Supplement"](xs)||Z["Arabic Extended-A"](xs)||Z["Arabic Presentation Forms-A"](xs)||Z["Arabic Presentation Forms-B"](xs))return!1;var xs;return!0}($o)?Eo:0,Go=ie.get("text-anchor").evaluate(Jr,{},H),Lo=ie.get("text-variable-anchor");if(!Lo){var To=ie.get("text-radial-offset").evaluate(Jr,{},H);Ca=To?vr(Go,[24*To,er]):ie.get("text-offset").evaluate(Jr,{},H).map(function(zo){return 24*zo})}var ho=Ln?"center":ie.get("text-justify").evaluate(Jr,{},H),ws=ie.get("symbol-placement"),Eu=ws==="point"?24*ie.get("text-max-width").evaluate(Jr,{},H):0,cu=function(){u.allowVerticalPlacement&&Vt($o)&&(Sa.vertical=Bo(lo,v,_,L,ai,Eu,Pn,Go,"left",Fa,Ca,io.vertical,!0,ws,ca,Ki))};if(!Ln&&Lo){for(var Fu=ho==="auto"?Lo.map(function(zo){return tr(zo)}):[ho],Su=!1,ol=0;ol<Fu.length;ol++){var sl=Fu[ol];if(!Sa.horizontal[sl])if(Su)Sa.horizontal[sl]=Sa.horizontal[0];else{var lc=Bo(lo,v,_,L,ai,Eu,Pn,"center",sl,Fa,Ca,io.horizontal,!1,ws,ca,Ki);lc&&(Sa.horizontal[sl]=lc,Su=lc.positionedLines.length===1)}}cu()}else{ho==="auto"&&(ho=tr(Go));var jc=Bo(lo,v,_,L,ai,Eu,Pn,Go,ho,Fa,Ca,io.horizontal,!1,ws,ca,Ki);jc&&(Sa.horizontal[ho]=jc),cu(),Vt($o)&&Ln&&rr&&(Sa.vertical=Bo(lo,v,_,L,ai,Eu,Pn,Go,ho,Fa,Ca,io.vertical,!1,ws,ca,Ki))}}var Fl=void 0,gs=!1;if(Jr.icon&&Jr.icon.name){var gl=M[Jr.icon.name];gl&&(Fl=function(zo,fu,Io){var xs=lu(Io),tf=fu[0]-zo.displaySize[0]*xs.horizontalAlign,au=fu[1]-zo.displaySize[1]*xs.verticalAlign;return{image:zo,top:au,bottom:au+zo.displaySize[1],left:tf,right:tf+zo.displaySize[0]}}(L[Jr.icon.name],ie.get("icon-offset").evaluate(Jr,{},H),ie.get("icon-anchor").evaluate(Jr,{},H)),gs=gl.sdf,u.sdfIcons===void 0?u.sdfIcons=gl.sdf:u.sdfIcons!==gl.sdf&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gl.pixelRatio!==u.pixelRatio||ie.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}var Cu=ar(Sa.horizontal)||Sa.vertical;u.iconsInText=!!Cu&&Cu.iconsInText,(Cu||Fl)&&function(zo,fu,Io,xs,tf,au,Na,zu,Zc,Mo,Ef){var Vc=au.textMaxSize.evaluate(fu,{});Vc===void 0&&(Vc=Na);var gd,hu=zo.layers[0].layout,ih=hu.get("icon-offset").evaluate(fu,{},Ef),Oh=ar(Io.horizontal),km=Na/24,wv=zo.tilePixelRatio*km,Gs=zo.tilePixelRatio*Vc/24,Tv=zo.tilePixelRatio*zu,Pg=zo.tilePixelRatio*hu.get("symbol-spacing"),Ig=hu.get("text-padding")*zo.tilePixelRatio,U0=hu.get("icon-padding")*zo.tilePixelRatio,Sf=hu.get("text-max-angle")/180*Math.PI,Av=hu.get("text-rotation-alignment")==="map"&&hu.get("symbol-placement")!=="point",o0=hu.get("icon-rotation-alignment")==="map"&&hu.get("symbol-placement")!=="point",Mh=hu.get("symbol-placement"),Zf=Pg/2,s0=hu.get("icon-text-fit");xs&&s0!=="none"&&(zo.allowVerticalPlacement&&Io.vertical&&(gd=Bl(xs,Io.vertical,s0,hu.get("icon-text-fit-padding"),ih,km)),Oh&&(xs=Bl(xs,Oh,s0,hu.get("icon-text-fit-padding"),ih,km)));var wp=function(H0,Uy){Uy.x<0||Uy.x>=8192||Uy.y<0||Uy.y>=8192||function(Tl,rv,GE,W0,c0,$0,jy,Hd,Dg,Ng,Bg,Fg,Zy,Vy,Bm,oi,f0,iv,m1,Rv,wf,Sc,Hy,Tp,nx){var h0,cc,Ou,Tf,G0,Fm=Tl.addToLineVertexArray(rv,GE),g1=0,y1=0,Wy=0,zg=0,$y=-1,Gy=-1,Ap={},Wd=wn(""),Kh=0,d0=0;if(Hd._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Kh=(h0=Hd.layout.get("text-offset").evaluate(wf,{},Tp).map(function(Oa){return 24*Oa}))[0],d0=h0[1]):(Kh=24*Hd.layout.get("text-radial-offset").evaluate(wf,{},Tp),d0=er),Tl.allowVerticalPlacement&&W0.vertical){var Xo=Hd.layout.get("text-rotate").evaluate(wf,{},Tp)+90;Tf=new Js(Dg,rv,Ng,Bg,Fg,W0.vertical,Zy,Vy,Bm,Xo),jy&&(G0=new Js(Dg,rv,Ng,Bg,Fg,jy,f0,iv,Bm,Xo))}if(c0){var Ug=Hd.layout.get("icon-rotate").evaluate(wf,{}),_1=Hd.layout.get("icon-text-fit")!=="none",b1=Nn(c0,Ug,Hy,_1),x1=jy?Nn(jy,Ug,Hy,_1):void 0;Ou=new Js(Dg,rv,Ng,Bg,Fg,c0,f0,iv,!1,Ug),g1=4*b1.length;var zm=Tl.iconSizeData,Al=null;zm.kind==="source"?(Al=[128*Hd.layout.get("icon-size").evaluate(wf,{})])[0]>32640&&it(Tl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):zm.kind==="composite"&&((Al=[128*Sc.compositeIconSizes[0].evaluate(wf,{},Tp),128*Sc.compositeIconSizes[1].evaluate(wf,{},Tp)])[0]>32640||Al[1]>32640)&&it(Tl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Tl.addSymbols(Tl.icon,b1,Al,Rv,m1,wf,!1,rv,Fm.lineStartIndex,Fm.lineLength,-1,Tp),$y=Tl.icon.placedSymbolArray.length-1,x1&&(y1=4*x1.length,Tl.addSymbols(Tl.icon,x1,Al,Rv,m1,wf,io.vertical,rv,Fm.lineStartIndex,Fm.lineLength,-1,Tp),Gy=Tl.icon.placedSymbolArray.length-1)}for(var jg in W0.horizontal){var Cp=W0.horizontal[jg];if(!cc){Wd=wn(Cp.text);var rx=Hd.layout.get("text-rotate").evaluate(wf,{},Tp);cc=new Js(Dg,rv,Ng,Bg,Fg,Cp,Zy,Vy,Bm,rx)}var Hc=Cp.positionedLines.length===1;if(Wy+=Cn(Tl,rv,Cp,$0,Hd,Bm,wf,oi,Fm,W0.vertical?io.horizontal:io.horizontalOnly,Hc?Object.keys(W0.horizontal):[jg],Ap,$y,Sc,Tp),Hc)break}W0.vertical&&(zg+=Cn(Tl,rv,W0.vertical,$0,Hd,Bm,wf,oi,Fm,io.vertical,["vertical"],Ap,Gy,Sc,Tp));var p0=cc?cc.boxStartIndex:Tl.collisionBoxArray.length,Mu=cc?cc.boxEndIndex:Tl.collisionBoxArray.length,v0=Tf?Tf.boxStartIndex:Tl.collisionBoxArray.length,ix=Tf?Tf.boxEndIndex:Tl.collisionBoxArray.length,gu=Ou?Ou.boxStartIndex:Tl.collisionBoxArray.length,Um=Ou?Ou.boxEndIndex:Tl.collisionBoxArray.length,Rh=G0?G0.boxStartIndex:Tl.collisionBoxArray.length,E1=G0?G0.boxEndIndex:Tl.collisionBoxArray.length,$d=-1,jm=function(Oa,Ph){return Oa&&Oa.circleDiameter?Math.max(Oa.circleDiameter,Ph):Ph};$d=jm(cc,$d),$d=jm(Tf,$d),$d=jm(Ou,$d);var nf=($d=jm(G0,$d))>-1?1:0;nf&&($d*=nx/24),Tl.glyphOffsetArray.length>=Da.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),wf.sortKey!==void 0&&Tl.addToSortKeyRanges(Tl.symbolInstances.length,wf.sortKey),Tl.symbolInstances.emplaceBack(rv.x,rv.y,Ap.right>=0?Ap.right:-1,Ap.center>=0?Ap.center:-1,Ap.left>=0?Ap.left:-1,Ap.vertical||-1,$y,Gy,Wd,p0,Mu,v0,ix,gu,Um,Rh,E1,Ng,Wy,zg,g1,y1,nf,0,Zy,Kh,d0,$d)}(zo,Uy,H0,Io,xs,tf,gd,zo.layers[0],zo.collisionBoxArray,fu.index,fu.sourceLayerIndex,zo.index,wv,Ig,Av,Zc,Tv,U0,o0,ih,fu,au,Mo,Ef,Na)};if(Mh==="line")for(var j0=0,Zd=vd(fu.geometry,0,0,8192,8192);j0<Zd.length;j0+=1)for(var u0=Zd[j0],tv=0,Cv=wl(u0,Pg,Sf,Io.vertical||Oh,xs,24,Gs,zo.overscaling,8192);tv<Cv.length;tv+=1){var l0=Cv[tv];Oh&&gn(zo,Oh.text,Zf,l0)||wp(u0,l0)}else if(Mh==="line-center")for(var Z0=0,kg=fu.geometry;Z0<kg.length;Z0+=1){var Lm=kg[Z0];if(Lm.length>1){var Lg=Ss(Lm,Sf,Io.vertical||Oh,xs,24,Gs);Lg&&wp(Lm,Lg)}}else if(fu.type==="Polygon")for(var Dm=0,p1=zd(fu.geometry,0);Dm<p1.length;Dm+=1){var Ov=p1[Dm],Vd=Wn(Ov,16);wp(Ov[0],new Yu(Vd.x,Vd.y,0))}else if(fu.type==="LineString")for(var Mv=0,V0=fu.geometry;Mv<V0.length;Mv+=1){var nv=V0[Mv];wp(nv,new Yu(nv[0].x,nv[0].y,0))}else if(fu.type==="Point")for(var Fy=0,v1=fu.geometry;Fy<v1.length;Fy+=1)for(var zy=0,$E=v1[Fy];zy<$E.length;zy+=1){var Nm=$E[zy];wp([Nm],new Yu(Nm.x,Nm.y,0))}}(u,Jr,Sa,Fl,M,Ye,ca,Ja,Ca,gs,H)},Lr=0,Zr=u.features;Lr<Zr.length;Lr+=1)xr();U&&u.generateCollisionDebugBuffers()},T.perspective=function(u,v,_,M,L){var U,H=1/Math.tan(v/2);return u[0]=H/_,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=H,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,L!=null&&L!==1/0?(u[10]=(L+M)*(U=1/(M-L)),u[14]=2*L*M*U):(u[10]=-1,u[14]=-2*M),u},T.pick=function(u,v){for(var _={},M=0;M<v.length;M++){var L=v[M];L in u&&(_[L]=u[L])}return _},T.plugin=La,T.polygonIntersectsPolygon=Fs,T.postMapLoadEvent=gr,T.postTurnstileEvent=or,T.potpack=wo,T.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],T.register=Ma,T.registerForPluginStateChange=function(u){return u({pluginStatus:mn,pluginURL:jn}),Gi.on("pluginStateChange",u),u},T.renderColorRamp=_g,T.rotate=function(u,v,_){var M=v[0],L=v[1],U=v[2],H=v[3],ie=Math.sin(_),_e=Math.cos(_);return u[0]=M*_e+U*ie,u[1]=L*_e+H*ie,u[2]=M*-ie+U*_e,u[3]=L*-ie+H*_e,u},T.rotateX=function(u,v,_){var M=Math.sin(_),L=Math.cos(_),U=v[4],H=v[5],ie=v[6],_e=v[7],Ye=v[8],ot=v[9],dt=v[10],zt=v[11];return v!==u&&(u[0]=v[0],u[1]=v[1],u[2]=v[2],u[3]=v[3],u[12]=v[12],u[13]=v[13],u[14]=v[14],u[15]=v[15]),u[4]=U*L+Ye*M,u[5]=H*L+ot*M,u[6]=ie*L+dt*M,u[7]=_e*L+zt*M,u[8]=Ye*L-U*M,u[9]=ot*L-H*M,u[10]=dt*L-ie*M,u[11]=zt*L-_e*M,u},T.rotateZ=function(u,v,_){var M=Math.sin(_),L=Math.cos(_),U=v[0],H=v[1],ie=v[2],_e=v[3],Ye=v[4],ot=v[5],dt=v[6],zt=v[7];return v!==u&&(u[8]=v[8],u[9]=v[9],u[10]=v[10],u[11]=v[11],u[12]=v[12],u[13]=v[13],u[14]=v[14],u[15]=v[15]),u[0]=U*L+Ye*M,u[1]=H*L+ot*M,u[2]=ie*L+dt*M,u[3]=_e*L+zt*M,u[4]=Ye*L-U*M,u[5]=ot*L-H*M,u[6]=dt*L-ie*M,u[7]=zt*L-_e*M,u},T.scale=function(u,v,_){var M=_[0],L=_[1],U=_[2];return u[0]=v[0]*M,u[1]=v[1]*M,u[2]=v[2]*M,u[3]=v[3]*M,u[4]=v[4]*L,u[5]=v[5]*L,u[6]=v[6]*L,u[7]=v[7]*L,u[8]=v[8]*U,u[9]=v[9]*U,u[10]=v[10]*U,u[11]=v[11]*U,u[12]=v[12],u[13]=v[13],u[14]=v[14],u[15]=v[15],u},T.scale$1=function(u,v,_){return u[0]=v[0]*_,u[1]=v[1]*_,u[2]=v[2]*_,u[3]=v[3]*_,u},T.scale$2=function(u,v,_){return u[0]=v[0]*_,u[1]=v[1]*_,u[2]=v[2]*_,u},T.setCacheLimits=function(u,v){wr=u,Ar=v},T.setRTLTextPlugin=function(u,v,_){if(_===void 0&&(_=!1),mn==="deferred"||mn==="loading"||mn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");jn=ir.resolveURL(u),mn="deferred",Zn=v,li(),_||ga()},T.sphericalToCartesian=function(u){var v=u[0],_=u[1],M=u[2];return _+=90,_*=Math.PI/180,M*=Math.PI/180,{x:v*Math.cos(_)*Math.sin(M),y:v*Math.sin(_)*Math.sin(M),z:v*Math.cos(M)}},T.sqrLen=function(u){var v=u[0],_=u[1];return v*v+_*_},T.styleSpec=kt,T.sub=function(u,v,_){return u[0]=v[0]-_[0],u[1]=v[1]-_[1],u[2]=v[2]-_[2],u},T.symbolSize=Zo,T.transformMat3=function(u,v,_){var M=v[0],L=v[1],U=v[2];return u[0]=M*_[0]+L*_[3]+U*_[6],u[1]=M*_[1]+L*_[4]+U*_[7],u[2]=M*_[2]+L*_[5]+U*_[8],u},T.transformMat4=Ff,T.translate=function(u,v,_){var M,L,U,H,ie,_e,Ye,ot,dt,zt,Xt,Pn,Ln=_[0],rr=_[1],$n=_[2];return v===u?(u[12]=v[0]*Ln+v[4]*rr+v[8]*$n+v[12],u[13]=v[1]*Ln+v[5]*rr+v[9]*$n+v[13],u[14]=v[2]*Ln+v[6]*rr+v[10]*$n+v[14],u[15]=v[3]*Ln+v[7]*rr+v[11]*$n+v[15]):(L=v[1],U=v[2],H=v[3],ie=v[4],_e=v[5],Ye=v[6],ot=v[7],dt=v[8],zt=v[9],Xt=v[10],Pn=v[11],u[0]=M=v[0],u[1]=L,u[2]=U,u[3]=H,u[4]=ie,u[5]=_e,u[6]=Ye,u[7]=ot,u[8]=dt,u[9]=zt,u[10]=Xt,u[11]=Pn,u[12]=M*Ln+ie*rr+dt*$n+v[12],u[13]=L*Ln+_e*rr+zt*$n+v[13],u[14]=U*Ln+Ye*rr+Xt*$n+v[14],u[15]=H*Ln+ot*rr+Pn*$n+v[15]),u},T.triggerPluginCompletionEvent=zr,T.uniqueId=Ue,T.validateCustomStyleLayer=function(u){var v=[],_=u.id;return _===void 0&&v.push({message:"layers."+_+': missing required property "id"'}),u.render===void 0&&v.push({message:"layers."+_+': missing required method "render"'}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&v.push({message:"layers."+_+': property "renderingMode" must be either "2d" or "3d"'}),v},T.validateLight=Vp,T.validateStyle=Ic,T.values=function(u){var v=[];for(var _ in u)v.push(u[_]);return v},T.vectorTile=Ep,T.version="1.13.3",T.warnOnce=it,T.webpSupported=Ut,T.window=he,T.wrap=de}),ae(["./shared"],function(T){"use strict";function ne(ke){var Pe=typeof ke;if(Pe==="number"||Pe==="boolean"||Pe==="string"||ke==null)return JSON.stringify(ke);if(Array.isArray(ke)){for(var Ge="[",gt=0,Bt=ke;gt<Bt.length;gt+=1)Ge+=ne(Bt[gt])+",";return Ge+"]"}for(var an=Object.keys(ke).sort(),An="{",kt=0;kt<an.length;kt++)An+=JSON.stringify(an[kt])+":"+ne(ke[an[kt]])+",";return An+"}"}function Q(ke){for(var Pe="",Ge=0,gt=T.refProperties;Ge<gt.length;Ge+=1)Pe+="/"+ne(ke[gt[Ge]]);return Pe}var ge=function(ke){this.keyCache={},ke&&this.replace(ke)};ge.prototype.replace=function(ke){this._layerConfigs={},this._layers={},this.update(ke,[])},ge.prototype.update=function(ke,Pe){for(var Ge=this,gt=0,Bt=ke;gt<Bt.length;gt+=1){var an=Bt[gt];this._layerConfigs[an.id]=an;var An=this._layers[an.id]=T.createStyleLayer(an);An._featureFilter=T.featureFilter(An.filter),this.keyCache[an.id]&&delete this.keyCache[an.id]}for(var kt=0,Dt=Pe;kt<Dt.length;kt+=1){var dn=Dt[kt];delete this.keyCache[dn],delete this._layerConfigs[dn],delete this._layers[dn]}this.familiesBySource={};for(var He=0,ei=function(bi,Ni){for(var Qa={},Xi=0;Xi<bi.length;Xi++){var ao=Ni&&Ni[bi[Xi].id]||Q(bi[Xi]);Ni&&(Ni[bi[Xi].id]=ao);var ko=Qa[ao];ko||(ko=Qa[ao]=[]),ko.push(bi[Xi])}var Ba=[];for(var mi in Qa)Ba.push(Qa[mi]);return Ba}(T.values(this._layerConfigs),this.keyCache);He<ei.length;He+=1){var Tr=ei[He].map(function(bi){return Ge._layers[bi.id]}),ii=Tr[0];if(ii.visibility!=="none"){var Di=ii.source||"",vi=this.familiesBySource[Di];vi||(vi=this.familiesBySource[Di]={});var Br=ii.sourceLayer||"_geojsonTileLayer",Gr=vi[Br];Gr||(Gr=vi[Br]=[]),Gr.push(Tr)}}};var pe=function(ke){var Pe={},Ge=[];for(var gt in ke){var Bt=ke[gt],an=Pe[gt]={};for(var An in Bt){var kt=Bt[+An];if(kt&&kt.bitmap.width!==0&&kt.bitmap.height!==0){var Dt={x:0,y:0,w:kt.bitmap.width+2,h:kt.bitmap.height+2};Ge.push(Dt),an[An]={rect:Dt,metrics:kt.metrics}}}}var dn=T.potpack(Ge),He=new T.AlphaImage({width:dn.w||1,height:dn.h||1});for(var ei in ke){var Tr=ke[ei];for(var ii in Tr){var Di=Tr[+ii];if(Di&&Di.bitmap.width!==0&&Di.bitmap.height!==0){var vi=Pe[ei][ii].rect;T.AlphaImage.copy(Di.bitmap,He,{x:0,y:0},{x:vi.x+1,y:vi.y+1},Di.bitmap)}}}this.image=He,this.positions=Pe};T.register("GlyphAtlas",pe);var Ce=function(ke){this.tileID=new T.OverscaledTileID(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),this.uid=ke.uid,this.zoom=ke.zoom,this.pixelRatio=ke.pixelRatio,this.tileSize=ke.tileSize,this.source=ke.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ke.showCollisionBoxes,this.collectResourceTiming=!!ke.collectResourceTiming,this.returnDependencies=!!ke.returnDependencies,this.promoteId=ke.promoteId};function he(ke,Pe,Ge){for(var gt=new T.EvaluationParameters(Pe),Bt=0,an=ke;Bt<an.length;Bt+=1)an[Bt].recalculate(gt,Ge)}function st(ke,Pe){var Ge=T.getArrayBuffer(ke.request,function(gt,Bt,an,An){gt?Pe(gt):Bt&&Pe(null,{vectorTile:new T.vectorTile.VectorTile(new T.pbf(Bt)),rawData:Bt,cacheControl:an,expires:An})});return function(){Ge.cancel(),Pe()}}Ce.prototype.parse=function(ke,Pe,Ge,gt,Bt){var an=this;this.status="parsing",this.data=ke,this.collisionBoxArray=new T.CollisionBoxArray;var An=new T.DictionaryCoder(Object.keys(ke.layers).sort()),kt=new T.FeatureIndex(this.tileID,this.promoteId);kt.bucketLayerIDs=[];var Dt,dn,He,ei,Tr={},ii={featureIndex:kt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ge},Di=Pe.familiesBySource[this.source];for(var vi in Di){var Br=ke.layers[vi];if(Br){Br.version===1&&T.warnOnce('Vector tile source "'+this.source+'" layer "'+vi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Gr=An.encode(vi),bi=[],Ni=0;Ni<Br.length;Ni++){var Qa=Br.feature(Ni),Xi=kt.getId(Qa,vi);bi.push({feature:Qa,id:Xi,index:Ni,sourceLayerIndex:Gr})}for(var ao=0,ko=Di[vi];ao<ko.length;ao+=1){var Ba=ko[ao],mi=Ba[0];mi.minzoom&&this.zoom<Math.floor(mi.minzoom)||mi.maxzoom&&this.zoom>=mi.maxzoom||mi.visibility!=="none"&&(he(Ba,this.zoom,Ge),(Tr[mi.id]=mi.createBucket({index:kt.bucketLayerIDs.length,layers:Ba,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source})).populate(bi,ii,this.tileID.canonical),kt.bucketLayerIDs.push(Ba.map(function(Yn){return Yn.id})))}}}var Je=T.mapObject(ii.glyphDependencies,function(Yn){return Object.keys(Yn).map(Number)});Object.keys(Je).length?gt.send("getGlyphs",{uid:this.uid,stacks:Je},function(Yn,Gn){Dt||(Dt=Yn,dn=Gn,Mn.call(an))}):dn={};var wt=Object.keys(ii.iconDependencies);wt.length?gt.send("getImages",{icons:wt,source:this.source,tileID:this.tileID,type:"icons"},function(Yn,Gn){Dt||(Dt=Yn,He=Gn,Mn.call(an))}):He={};var Kt=Object.keys(ii.patternDependencies);function Mn(){if(Dt)return Bt(Dt);if(dn&&He&&ei){var Yn=new pe(dn),Gn=new T.ImageAtlas(He,ei);for(var Ht in Tr){var On=Tr[Ht];On instanceof T.SymbolBucket?(he(On.layers,this.zoom,Ge),T.performSymbolLayout(On,dn,Yn.positions,He,Gn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):On.hasPattern&&(On instanceof T.LineBucket||On instanceof T.FillBucket||On instanceof T.FillExtrusionBucket)&&(he(On.layers,this.zoom,Ge),On.addFeatures(ii,this.tileID.canonical,Gn.patternPositions))}this.status="done",Bt(null,{buckets:T.values(Tr).filter(function(Cr){return!Cr.isEmpty()}),featureIndex:kt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yn.image,imageAtlas:Gn,glyphMap:this.returnDependencies?dn:null,iconMap:this.returnDependencies?He:null,glyphPositions:this.returnDependencies?Yn.positions:null})}}Kt.length?gt.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},function(Yn,Gn){Dt||(Dt=Yn,ei=Gn,Mn.call(an))}):ei={},Mn.call(this)};var re=function(ke,Pe,Ge,gt){this.actor=ke,this.layerIndex=Pe,this.availableImages=Ge,this.loadVectorData=gt||st,this.loading={},this.loaded={}};re.prototype.loadTile=function(ke,Pe){var Ge=this,gt=ke.uid;this.loading||(this.loading={});var Bt=!!(ke&&ke.request&&ke.request.collectResourceTiming)&&new T.RequestPerformance(ke.request),an=this.loading[gt]=new Ce(ke);an.abort=this.loadVectorData(ke,function(An,kt){if(delete Ge.loading[gt],An||!kt)return an.status="done",Ge.loaded[gt]=an,Pe(An);var Dt=kt.rawData,dn={};kt.expires&&(dn.expires=kt.expires),kt.cacheControl&&(dn.cacheControl=kt.cacheControl);var He={};if(Bt){var ei=Bt.finish();ei&&(He.resourceTiming=JSON.parse(JSON.stringify(ei)))}an.vectorTile=kt.vectorTile,an.parse(kt.vectorTile,Ge.layerIndex,Ge.availableImages,Ge.actor,function(Tr,ii){if(Tr||!ii)return Pe(Tr);Pe(null,T.extend({rawTileData:Dt.slice(0)},ii,dn,He))}),Ge.loaded=Ge.loaded||{},Ge.loaded[gt]=an})},re.prototype.reloadTile=function(ke,Pe){var Ge=this,gt=this.loaded,Bt=ke.uid,an=this;if(gt&&gt[Bt]){var An=gt[Bt];An.showCollisionBoxes=ke.showCollisionBoxes;var kt=function(Dt,dn){var He=An.reloadCallback;He&&(delete An.reloadCallback,An.parse(An.vectorTile,an.layerIndex,Ge.availableImages,an.actor,He)),Pe(Dt,dn)};An.status==="parsing"?An.reloadCallback=kt:An.status==="done"&&(An.vectorTile?An.parse(An.vectorTile,this.layerIndex,this.availableImages,this.actor,kt):kt())}},re.prototype.abortTile=function(ke,Pe){var Ge=this.loading,gt=ke.uid;Ge&&Ge[gt]&&Ge[gt].abort&&(Ge[gt].abort(),delete Ge[gt]),Pe()},re.prototype.removeTile=function(ke,Pe){var Ge=this.loaded,gt=ke.uid;Ge&&Ge[gt]&&delete Ge[gt],Pe()};var Se=T.window.ImageBitmap,se=function(){this.loaded={}};function de(ke,Pe){if(ke.length!==0){xe(ke[0],Pe);for(var Ge=1;Ge<ke.length;Ge++)xe(ke[Ge],!Pe)}}function xe(ke,Pe){for(var Ge=0,gt=0,Bt=0,an=ke.length,An=an-1;Bt<an;An=Bt++){var kt=(ke[Bt][0]-ke[An][0])*(ke[An][1]+ke[Bt][1]),Dt=Ge+kt;gt+=Math.abs(Ge)>=Math.abs(kt)?Ge-Dt+kt:kt-Dt+Ge,Ge=Dt}Ge+gt>=0!=!!Pe&&ke.reverse()}se.prototype.loadTile=function(ke,Pe){var Ge=ke.uid,gt=ke.encoding,Bt=ke.rawImageData,an=Se&&Bt instanceof Se?this.getImageData(Bt):Bt,An=new T.DEMData(Ge,an,gt);this.loaded=this.loaded||{},this.loaded[Ge]=An,Pe(null,An)},se.prototype.getImageData=function(ke){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ke.width,ke.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ke.width,this.offscreenCanvas.height=ke.height,this.offscreenCanvasContext.drawImage(ke,0,0,ke.width,ke.height);var Pe=this.offscreenCanvasContext.getImageData(-1,-1,ke.width+2,ke.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new T.RGBAImage({width:Pe.width,height:Pe.height},Pe.data)},se.prototype.removeTile=function(ke){var Pe=this.loaded,Ge=ke.uid;Pe&&Pe[Ge]&&delete Pe[Ge]};var le=T.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ue=function(ke){this._feature=ke,this.extent=T.EXTENT,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))};Ue.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ke=[],Pe=0,Ge=this._feature.geometry;Pe<Ge.length;Pe+=1){var gt=Ge[Pe];ke.push([new T.Point$1(gt[0],gt[1])])}return ke}for(var Bt=[],an=0,An=this._feature.geometry;an<An.length;an+=1){for(var kt=[],Dt=0,dn=An[an];Dt<dn.length;Dt+=1){var He=dn[Dt];kt.push(new T.Point$1(He[0],He[1]))}Bt.push(kt)}return Bt},Ue.prototype.toGeoJSON=function(ke,Pe,Ge){return le.call(this,ke,Pe,Ge)};var Et=function(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=T.EXTENT,this.length=ke.length,this._features=ke};Et.prototype.feature=function(ke){return new Ue(this._features[ke])};var mt=T.vectorTile.VectorTileFeature,Wt=Rt;function Rt(ke,Pe){this.options=Pe||{},this.features=ke,this.length=ke.length}function Tt(ke,Pe){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=Pe||4096}Rt.prototype.feature=function(ke){return new Tt(this.features[ke],this.options.extent)},Tt.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var Pe=0;Pe<ke.length;Pe++){for(var Ge=ke[Pe],gt=[],Bt=0;Bt<Ge.length;Bt++)gt.push(new T.Point$1(Ge[Bt][0],Ge[Bt][1]));this.geometry.push(gt)}return this.geometry},Tt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,Pe=1/0,Ge=-1/0,gt=1/0,Bt=-1/0,an=0;an<ke.length;an++)for(var An=ke[an],kt=0;kt<An.length;kt++){var Dt=An[kt];Pe=Math.min(Pe,Dt.x),Ge=Math.max(Ge,Dt.x),gt=Math.min(gt,Dt.y),Bt=Math.max(Bt,Dt.y)}return[Pe,gt,Ge,Bt]},Tt.prototype.toGeoJSON=mt.prototype.toGeoJSON;var Ze=Qe,Ie=Wt;function Qe(ke){var Pe=new T.pbf;return function(Ge,gt){for(var Bt in Ge.layers)gt.writeMessage(3,it,Ge.layers[Bt])}(ke,Pe),Pe.finish()}function it(ke,Pe){var Ge;Pe.writeVarintField(15,ke.version||1),Pe.writeStringField(1,ke.name||""),Pe.writeVarintField(5,ke.extent||4096);var gt={keys:[],values:[],keycache:{},valuecache:{}};for(Ge=0;Ge<ke.length;Ge++)gt.feature=ke.feature(Ge),Pe.writeMessage(2,De,gt);var Bt=gt.keys;for(Ge=0;Ge<Bt.length;Ge++)Pe.writeStringField(3,Bt[Ge]);var an=gt.values;for(Ge=0;Ge<an.length;Ge++)Pe.writeMessage(4,pt,an[Ge])}function De(ke,Pe){var Ge=ke.feature;Ge.id!==void 0&&Pe.writeVarintField(1,Ge.id),Pe.writeMessage(2,cn,ke),Pe.writeVarintField(3,Ge.type),Pe.writeMessage(4,Le,Ge)}function cn(ke,Pe){var Ge=ke.feature,gt=ke.keys,Bt=ke.values,an=ke.keycache,An=ke.valuecache;for(var kt in Ge.properties){var Dt=an[kt];Dt===void 0&&(gt.push(kt),an[kt]=Dt=gt.length-1),Pe.writeVarint(Dt);var dn=Ge.properties[kt],He=typeof dn;He!=="string"&&He!=="boolean"&&He!=="number"&&(dn=JSON.stringify(dn));var ei=He+":"+dn,Tr=An[ei];Tr===void 0&&(Bt.push(dn),An[ei]=Tr=Bt.length-1),Pe.writeVarint(Tr)}}function qe(ke,Pe){return(Pe<<3)+(7&ke)}function Pt(ke){return ke<<1^ke>>31}function Le(ke,Pe){for(var Ge=ke.loadGeometry(),gt=ke.type,Bt=0,an=0,An=Ge.length,kt=0;kt<An;kt++){var Dt=Ge[kt],dn=1;gt===1&&(dn=Dt.length),Pe.writeVarint(qe(1,dn));for(var He=gt===3?Dt.length-1:Dt.length,ei=0;ei<He;ei++){ei===1&&gt!==1&&Pe.writeVarint(qe(2,He-1));var Tr=Dt[ei].x-Bt,ii=Dt[ei].y-an;Pe.writeVarint(Pt(Tr)),Pe.writeVarint(Pt(ii)),Bt+=Tr,an+=ii}gt===3&&Pe.writeVarint(qe(7,1))}}function pt(ke,Pe){var Ge=typeof ke;Ge==="string"?Pe.writeStringField(1,ke):Ge==="boolean"?Pe.writeBooleanField(7,ke):Ge==="number"&&(ke%1!=0?Pe.writeDoubleField(3,ke):ke<0?Pe.writeSVarintField(6,ke):Pe.writeVarintField(5,ke))}function at(ke,Pe,Ge,gt){nt(ke,Ge,gt),nt(Pe,2*Ge,2*gt),nt(Pe,2*Ge+1,2*gt+1)}function nt(ke,Pe,Ge){var gt=ke[Pe];ke[Pe]=ke[Ge],ke[Ge]=gt}function Ct(ke,Pe,Ge,gt){var Bt=ke-Ge,an=Pe-gt;return Bt*Bt+an*an}Ze.fromVectorTileJs=Qe,Ze.fromGeojsonVt=function(ke,Pe){Pe=Pe||{};var Ge={};for(var gt in ke)Ge[gt]=new Wt(ke[gt].features,Pe),Ge[gt].name=gt,Ge[gt].version=Pe.version,Ge[gt].extent=Pe.extent;return Qe({layers:Ge})},Ze.GeoJSONWrapper=Ie;var rt=function(ke){return ke[0]},vt=function(ke){return ke[1]},Ve=function(ke,Pe,Ge,gt,Bt){Pe===void 0&&(Pe=rt),Ge===void 0&&(Ge=vt),gt===void 0&&(gt=64),Bt===void 0&&(Bt=Float64Array),this.nodeSize=gt,this.points=ke;for(var an=ke.length<65536?Uint16Array:Uint32Array,An=this.ids=new an(ke.length),kt=this.coords=new Bt(2*ke.length),Dt=0;Dt<ke.length;Dt++)An[Dt]=Dt,kt[2*Dt]=Pe(ke[Dt]),kt[2*Dt+1]=Ge(ke[Dt]);(function dn(He,ei,Tr,ii,Di,vi){if(!(Di-ii<=Tr)){var Br=ii+Di>>1;(function Gr(bi,Ni,Qa,Xi,ao,ko){for(;ao>Xi;){if(ao-Xi>600){var Ba=ao-Xi+1,mi=Qa-Xi+1,Je=Math.log(Ba),wt=.5*Math.exp(2*Je/3),Kt=.5*Math.sqrt(Je*wt*(Ba-wt)/Ba)*(mi-Ba/2<0?-1:1);Gr(bi,Ni,Qa,Math.max(Xi,Math.floor(Qa-mi*wt/Ba+Kt)),Math.min(ao,Math.floor(Qa+(Ba-mi)*wt/Ba+Kt)),ko)}var Mn=Ni[2*Qa+ko],Yn=Xi,Gn=ao;for(at(bi,Ni,Xi,Qa),Ni[2*ao+ko]>Mn&&at(bi,Ni,Xi,ao);Yn<Gn;){for(at(bi,Ni,Yn,Gn),Yn++,Gn--;Ni[2*Yn+ko]<Mn;)Yn++;for(;Ni[2*Gn+ko]>Mn;)Gn--}Ni[2*Xi+ko]===Mn?at(bi,Ni,Xi,Gn):at(bi,Ni,++Gn,ao),Gn<=Qa&&(Xi=Gn+1),Qa<=Gn&&(ao=Gn-1)}})(He,ei,Br,ii,Di,vi%2),dn(He,ei,Tr,ii,Br-1,vi+1),dn(He,ei,Tr,Br+1,Di,vi+1)}})(An,kt,gt,0,An.length-1,0)};Ve.prototype.range=function(ke,Pe,Ge,gt){return function(Bt,an,An,kt,Dt,dn,He){for(var ei,Tr,ii=[0,Bt.length-1,0],Di=[];ii.length;){var vi=ii.pop(),Br=ii.pop(),Gr=ii.pop();if(Br-Gr<=He)for(var bi=Gr;bi<=Br;bi++)Tr=an[2*bi+1],(ei=an[2*bi])>=An&&ei<=Dt&&Tr>=kt&&Tr<=dn&&Di.push(Bt[bi]);else{var Ni=Math.floor((Gr+Br)/2);Tr=an[2*Ni+1],(ei=an[2*Ni])>=An&&ei<=Dt&&Tr>=kt&&Tr<=dn&&Di.push(Bt[Ni]);var Qa=(vi+1)%2;(vi===0?An<=ei:kt<=Tr)&&(ii.push(Gr),ii.push(Ni-1),ii.push(Qa)),(vi===0?Dt>=ei:dn>=Tr)&&(ii.push(Ni+1),ii.push(Br),ii.push(Qa))}}return Di}(this.ids,this.coords,ke,Pe,Ge,gt,this.nodeSize)},Ve.prototype.within=function(ke,Pe,Ge){return function(gt,Bt,an,An,kt,Dt){for(var dn=[0,gt.length-1,0],He=[],ei=kt*kt;dn.length;){var Tr=dn.pop(),ii=dn.pop(),Di=dn.pop();if(ii-Di<=Dt)for(var vi=Di;vi<=ii;vi++)Ct(Bt[2*vi],Bt[2*vi+1],an,An)<=ei&&He.push(gt[vi]);else{var Br=Math.floor((Di+ii)/2),Gr=Bt[2*Br],bi=Bt[2*Br+1];Ct(Gr,bi,an,An)<=ei&&He.push(gt[Br]);var Ni=(Tr+1)%2;(Tr===0?an-kt<=Gr:An-kt<=bi)&&(dn.push(Di),dn.push(Br-1),dn.push(Ni)),(Tr===0?an+kt>=Gr:An+kt>=bi)&&(dn.push(Br+1),dn.push(ii),dn.push(Ni))}}return He}(this.ids,this.coords,ke,Pe,Ge,this.nodeSize)};var hn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ke){return ke}},yn=function(ke){this.options=ln(Object.create(hn),ke),this.trees=new Array(this.options.maxZoom+1)};function ir(ke,Pe,Ge,gt,Bt){return{x:ke,y:Pe,zoom:1/0,id:Ge,parentId:-1,numPoints:gt,properties:Bt}}function Qn(ke,Pe){var Ge=ke.geometry.coordinates,gt=Ge[1];return{x:Tn(Ge[0]),y:lr(gt),zoom:1/0,index:Pe,parentId:-1}}function Ut(ke){return{type:"Feature",id:ke.id,properties:En(ke),geometry:{type:"Point",coordinates:[(gt=ke.x,360*(gt-.5)),(Pe=ke.y,Ge=(180-360*Pe)*Math.PI/180,360*Math.atan(Math.exp(Ge))/Math.PI-90)]}};var Pe,Ge,gt}function En(ke){var Pe=ke.numPoints,Ge=Pe>=1e4?Math.round(Pe/1e3)+"k":Pe>=1e3?Math.round(Pe/100)/10+"k":Pe;return ln(ln({},ke.properties),{cluster:!0,cluster_id:ke.id,point_count:Pe,point_count_abbreviated:Ge})}function Tn(ke){return ke/360+.5}function lr(ke){var Pe=Math.sin(ke*Math.PI/180),Ge=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return Ge<0?0:Ge>1?1:Ge}function ln(ke,Pe){for(var Ge in Pe)ke[Ge]=Pe[Ge];return ke}function Lt(ke){return ke.x}function bn(ke){return ke.y}function Xe(ke,Pe,Ge,gt,Bt,an){var An=Bt-Ge,kt=an-gt;if(An!==0||kt!==0){var Dt=((ke-Ge)*An+(Pe-gt)*kt)/(An*An+kt*kt);Dt>1?(Ge=Bt,gt=an):Dt>0&&(Ge+=An*Dt,gt+=kt*Dt)}return(An=ke-Ge)*An+(kt=Pe-gt)*kt}function Fe(ke,Pe,Ge,gt){var Bt={id:ke===void 0?null:ke,type:Pe,geometry:Ge,tags:gt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(an){var An=an.geometry,kt=an.type;if(kt==="Point"||kt==="MultiPoint"||kt==="LineString")on(an,An);else if(kt==="Polygon"||kt==="MultiLineString")for(var Dt=0;Dt<An.length;Dt++)on(an,An[Dt]);else if(kt==="MultiPolygon")for(Dt=0;Dt<An.length;Dt++)for(var dn=0;dn<An[Dt].length;dn++)on(an,An[Dt][dn])}(Bt),Bt}function on(ke,Pe){for(var Ge=0;Ge<Pe.length;Ge+=3)ke.minX=Math.min(ke.minX,Pe[Ge]),ke.minY=Math.min(ke.minY,Pe[Ge+1]),ke.maxX=Math.max(ke.maxX,Pe[Ge]),ke.maxY=Math.max(ke.maxY,Pe[Ge+1])}function B(ke,Pe,Ge,gt){if(Pe.geometry){var Bt=Pe.geometry.coordinates,an=Pe.geometry.type,An=Math.pow(Ge.tolerance/((1<<Ge.maxZoom)*Ge.extent),2),kt=[],Dt=Pe.id;if(Ge.promoteId?Dt=Pe.properties[Ge.promoteId]:Ge.generateId&&(Dt=gt||0),an==="Point")be(Bt,kt);else if(an==="MultiPoint")for(var dn=0;dn<Bt.length;dn++)be(Bt[dn],kt);else if(an==="LineString")yt(Bt,kt,An,!1);else if(an==="MultiLineString"){if(Ge.lineMetrics){for(dn=0;dn<Bt.length;dn++)yt(Bt[dn],kt=[],An,!1),ke.push(Fe(Dt,"LineString",kt,Pe.properties));return}Ee(Bt,kt,An,!1)}else if(an==="Polygon")Ee(Bt,kt,An,!0);else{if(an!=="MultiPolygon"){if(an==="GeometryCollection"){for(dn=0;dn<Pe.geometry.geometries.length;dn++)B(ke,{id:Dt,geometry:Pe.geometry.geometries[dn],properties:Pe.properties},Ge,gt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(dn=0;dn<Bt.length;dn++){var He=[];Ee(Bt[dn],He,An,!0),kt.push(He)}}ke.push(Fe(Dt,an,kt,Pe.properties))}}function be(ke,Pe){Pe.push(Zt(ke[0])),Pe.push(_n(ke[1])),Pe.push(0)}function yt(ke,Pe,Ge,gt){for(var Bt,an,An=0,kt=0;kt<ke.length;kt++){var Dt=Zt(ke[kt][0]),dn=_n(ke[kt][1]);Pe.push(Dt),Pe.push(dn),Pe.push(0),kt>0&&(An+=gt?(Bt*dn-Dt*an)/2:Math.sqrt(Math.pow(Dt-Bt,2)+Math.pow(dn-an,2))),Bt=Dt,an=dn}var He=Pe.length-3;Pe[2]=1,function ei(Tr,ii,Di,vi){for(var Br,Gr=vi,bi=Di-ii>>1,Ni=Di-ii,Qa=Tr[ii],Xi=Tr[ii+1],ao=Tr[Di],ko=Tr[Di+1],Ba=ii+3;Ba<Di;Ba+=3){var mi=Xe(Tr[Ba],Tr[Ba+1],Qa,Xi,ao,ko);if(mi>Gr)Br=Ba,Gr=mi;else if(mi===Gr){var Je=Math.abs(Ba-bi);Je<Ni&&(Br=Ba,Ni=Je)}}Gr>vi&&(Br-ii>3&&ei(Tr,ii,Br,vi),Tr[Br+2]=Gr,Di-Br>3&&ei(Tr,Br,Di,vi))}(Pe,0,He,Ge),Pe[He+2]=1,Pe.size=Math.abs(An),Pe.start=0,Pe.end=Pe.size}function Ee(ke,Pe,Ge,gt){for(var Bt=0;Bt<ke.length;Bt++){var an=[];yt(ke[Bt],an,Ge,gt),Pe.push(an)}}function Zt(ke){return ke/360+.5}function _n(ke){var Pe=Math.sin(ke*Math.PI/180),Ge=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return Ge<0?0:Ge>1?1:Ge}function Sn(ke,Pe,Ge,gt,Bt,an,An,kt){if(gt/=Pe,an>=(Ge/=Pe)&&An<gt)return ke;if(An<Ge||an>=gt)return null;for(var Dt=[],dn=0;dn<ke.length;dn++){var He=ke[dn],ei=He.geometry,Tr=He.type,ii=Bt===0?He.minX:He.minY,Di=Bt===0?He.maxX:He.maxY;if(ii>=Ge&&Di<gt)Dt.push(He);else if(!(Di<Ge||ii>=gt)){var vi=[];if(Tr==="Point"||Tr==="MultiPoint")Bn(ei,vi,Ge,gt,Bt);else if(Tr==="LineString")or(ei,vi,Ge,gt,Bt,!1,kt.lineMetrics);else if(Tr==="MultiLineString")gr(ei,vi,Ge,gt,Bt,!1);else if(Tr==="Polygon")gr(ei,vi,Ge,gt,Bt,!0);else if(Tr==="MultiPolygon")for(var Br=0;Br<ei.length;Br++){var Gr=[];gr(ei[Br],Gr,Ge,gt,Bt,!0),Gr.length&&vi.push(Gr)}if(vi.length){if(kt.lineMetrics&&Tr==="LineString"){for(Br=0;Br<vi.length;Br++)Dt.push(Fe(He.id,Tr,vi[Br],He.tags));continue}Tr!=="LineString"&&Tr!=="MultiLineString"||(vi.length===1?(Tr="LineString",vi=vi[0]):Tr="MultiLineString"),Tr!=="Point"&&Tr!=="MultiPoint"||(Tr=vi.length===3?"Point":"MultiPoint"),Dt.push(Fe(He.id,Tr,vi,He.tags))}}}return Dt.length?Dt:null}function Bn(ke,Pe,Ge,gt,Bt){for(var an=0;an<ke.length;an+=3){var An=ke[an+Bt];An>=Ge&&An<=gt&&(Pe.push(ke[an]),Pe.push(ke[an+1]),Pe.push(ke[an+2]))}}function or(ke,Pe,Ge,gt,Bt,an,An){for(var kt,Dt,dn=dr(ke),He=Bt===0?Ar:Ir,ei=ke.start,Tr=0;Tr<ke.length-3;Tr+=3){var ii=ke[Tr],Di=ke[Tr+1],vi=ke[Tr+2],Br=ke[Tr+3],Gr=ke[Tr+4],bi=Bt===0?ii:Di,Ni=Bt===0?Br:Gr,Qa=!1;An&&(kt=Math.sqrt(Math.pow(ii-Br,2)+Math.pow(Di-Gr,2))),bi<Ge?Ni>Ge&&(Dt=He(dn,ii,Di,Br,Gr,Ge),An&&(dn.start=ei+kt*Dt)):bi>gt?Ni<gt&&(Dt=He(dn,ii,Di,Br,Gr,gt),An&&(dn.start=ei+kt*Dt)):wr(dn,ii,Di,vi),Ni<Ge&&bi>=Ge&&(Dt=He(dn,ii,Di,Br,Gr,Ge),Qa=!0),Ni>gt&&bi<=gt&&(Dt=He(dn,ii,Di,Br,Gr,gt),Qa=!0),!an&&Qa&&(An&&(dn.end=ei+kt*Dt),Pe.push(dn),dn=dr(ke)),An&&(ei+=kt)}var Xi=ke.length-3;ii=ke[Xi],Di=ke[Xi+1],vi=ke[Xi+2],(bi=Bt===0?ii:Di)>=Ge&&bi<=gt&&wr(dn,ii,Di,vi),Xi=dn.length-3,an&&Xi>=3&&(dn[Xi]!==dn[0]||dn[Xi+1]!==dn[1])&&wr(dn,dn[0],dn[1],dn[2]),dn.length&&Pe.push(dn)}function dr(ke){var Pe=[];return Pe.size=ke.size,Pe.start=ke.start,Pe.end=ke.end,Pe}function gr(ke,Pe,Ge,gt,Bt,an){for(var An=0;An<ke.length;An++)or(ke[An],Pe,Ge,gt,Bt,an,!1)}function wr(ke,Pe,Ge,gt){ke.push(Pe),ke.push(Ge),ke.push(gt)}function Ar(ke,Pe,Ge,gt,Bt,an){var An=(an-Pe)/(gt-Pe);return ke.push(an),ke.push(Ge+(Bt-Ge)*An),ke.push(1),An}function Ir(ke,Pe,Ge,gt,Bt,an){var An=(an-Ge)/(Bt-Ge);return ke.push(Pe+(gt-Pe)*An),ke.push(an),ke.push(1),An}function Nr(ke,Pe){for(var Ge=[],gt=0;gt<ke.length;gt++){var Bt,an=ke[gt],An=an.type;if(An==="Point"||An==="MultiPoint"||An==="LineString")Bt=Yr(an.geometry,Pe);else if(An==="MultiLineString"||An==="Polygon"){Bt=[];for(var kt=0;kt<an.geometry.length;kt++)Bt.push(Yr(an.geometry[kt],Pe))}else if(An==="MultiPolygon")for(Bt=[],kt=0;kt<an.geometry.length;kt++){for(var Dt=[],dn=0;dn<an.geometry[kt].length;dn++)Dt.push(Yr(an.geometry[kt][dn],Pe));Bt.push(Dt)}Ge.push(Fe(an.id,An,Bt,an.tags))}return Ge}function Yr(ke,Pe){var Ge=[];Ge.size=ke.size,ke.start!==void 0&&(Ge.start=ke.start,Ge.end=ke.end);for(var gt=0;gt<ke.length;gt+=3)Ge.push(ke[gt]+Pe,ke[gt+1],ke[gt+2]);return Ge}function bt(ke,Pe){if(ke.transformed)return ke;var Ge,gt,Bt,an=1<<ke.z,An=ke.x,kt=ke.y;for(Ge=0;Ge<ke.features.length;Ge++){var Dt=ke.features[Ge],dn=Dt.geometry,He=Dt.type;if(Dt.geometry=[],He===1)for(gt=0;gt<dn.length;gt+=2)Dt.geometry.push(ve(dn[gt],dn[gt+1],Pe,an,An,kt));else for(gt=0;gt<dn.length;gt++){var ei=[];for(Bt=0;Bt<dn[gt].length;Bt+=2)ei.push(ve(dn[gt][Bt],dn[gt][Bt+1],Pe,an,An,kt));Dt.geometry.push(ei)}}return ke.transformed=!0,ke}function ve(ke,Pe,Ge,gt,Bt,an){return[Math.round(Ge*(ke*gt-Bt)),Math.round(Ge*(Pe*gt-an))]}function ye(ke,Pe,Ge,gt,Bt){for(var an=Pe===Bt.maxZoom?0:Bt.tolerance/((1<<Pe)*Bt.extent),An={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ge,y:gt,z:Pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},kt=0;kt<ke.length;kt++){An.numFeatures++,Ke(An,ke[kt],an,Bt);var Dt=ke[kt].minX,dn=ke[kt].minY,He=ke[kt].maxX,ei=ke[kt].maxY;Dt<An.minX&&(An.minX=Dt),dn<An.minY&&(An.minY=dn),He>An.maxX&&(An.maxX=He),ei>An.maxY&&(An.maxY=ei)}return An}function Ke(ke,Pe,Ge,gt){var Bt=Pe.geometry,an=Pe.type,An=[];if(an==="Point"||an==="MultiPoint")for(var kt=0;kt<Bt.length;kt+=3)An.push(Bt[kt]),An.push(Bt[kt+1]),ke.numPoints++,ke.numSimplified++;else if(an==="LineString")ht(An,Bt,ke,Ge,!1,!1);else if(an==="MultiLineString"||an==="Polygon")for(kt=0;kt<Bt.length;kt++)ht(An,Bt[kt],ke,Ge,an==="Polygon",kt===0);else if(an==="MultiPolygon")for(var Dt=0;Dt<Bt.length;Dt++){var dn=Bt[Dt];for(kt=0;kt<dn.length;kt++)ht(An,dn[kt],ke,Ge,!0,kt===0)}if(An.length){var He=Pe.tags||null;if(an==="LineString"&&gt.lineMetrics){for(var ei in He={},Pe.tags)He[ei]=Pe.tags[ei];He.mapbox_clip_start=Bt.start/Bt.size,He.mapbox_clip_end=Bt.end/Bt.size}var Tr={geometry:An,type:an==="Polygon"||an==="MultiPolygon"?3:an==="LineString"||an==="MultiLineString"?2:1,tags:He};Pe.id!==null&&(Tr.id=Pe.id),ke.features.push(Tr)}}function ht(ke,Pe,Ge,gt,Bt,an){var An=gt*gt;if(gt>0&&Pe.size<(Bt?An:gt))Ge.numPoints+=Pe.length/3;else{for(var kt=[],Dt=0;Dt<Pe.length;Dt+=3)(gt===0||Pe[Dt+2]>An)&&(Ge.numSimplified++,kt.push(Pe[Dt]),kt.push(Pe[Dt+1])),Ge.numPoints++;Bt&&function(dn,He){for(var ei=0,Tr=0,ii=dn.length,Di=ii-2;Tr<ii;Di=Tr,Tr+=2)ei+=(dn[Tr]-dn[Di])*(dn[Tr+1]+dn[Di+1]);if(ei>0===He)for(Tr=0,ii=dn.length;Tr<ii/2;Tr+=2){var vi=dn[Tr],Br=dn[Tr+1];dn[Tr]=dn[ii-2-Tr],dn[Tr+1]=dn[ii-1-Tr],dn[ii-2-Tr]=vi,dn[ii-1-Tr]=Br}}(kt,an),ke.push(kt)}}function xt(ke,Pe){var Ge=(Pe=this.options=function(Bt,an){for(var An in an)Bt[An]=an[An];return Bt}(Object.create(this.options),Pe)).debug;if(Ge&&console.time("preprocess data"),Pe.maxZoom<0||Pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Pe.promoteId&&Pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var gt=function(Bt,an){var An=[];if(Bt.type==="FeatureCollection")for(var kt=0;kt<Bt.features.length;kt++)B(An,Bt.features[kt],an,kt);else B(An,Bt.type==="Feature"?Bt:{geometry:Bt},an);return An}(ke,Pe);this.tiles={},this.tileCoords=[],Ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Pe.indexMaxZoom,Pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(gt=function(Bt,an){var An=an.buffer/an.extent,kt=Bt,Dt=Sn(Bt,1,-1-An,An,0,-1,2,an),dn=Sn(Bt,1,1-An,2+An,0,-1,2,an);return(Dt||dn)&&(kt=Sn(Bt,1,-An,1+An,0,-1,2,an)||[],Dt&&(kt=Nr(Dt,1).concat(kt)),dn&&(kt=kt.concat(Nr(dn,-1)))),kt}(gt,Pe)).length&&this.splitTile(gt,0,0,0),Ge&&(gt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Jt(ke,Pe,Ge){return 32*((1<<ke)*Ge+Pe)+ke}function Dn(ke,Pe){var Ge=ke.tileID.canonical;if(!this._geoJSONIndex)return Pe(null,null);var gt=this._geoJSONIndex.getTile(Ge.z,Ge.x,Ge.y);if(!gt)return Pe(null,null);var Bt=new Et(gt.features),an=Ze(Bt);an.byteOffset===0&&an.byteLength===an.buffer.byteLength||(an=new Uint8Array(an)),Pe(null,{vectorTile:Bt,rawData:an.buffer})}yn.prototype.load=function(ke){var Pe=this.options,Ge=Pe.log,gt=Pe.minZoom,Bt=Pe.maxZoom,an=Pe.nodeSize;Ge&&console.time("total time");var An="prepare "+ke.length+" points";Ge&&console.time(An),this.points=ke;for(var kt=[],Dt=0;Dt<ke.length;Dt++)ke[Dt].geometry&&kt.push(Qn(ke[Dt],Dt));this.trees[Bt+1]=new Ve(kt,Lt,bn,an,Float32Array),Ge&&console.timeEnd(An);for(var dn=Bt;dn>=gt;dn--){var He=+Date.now();kt=this._cluster(kt,dn),this.trees[dn]=new Ve(kt,Lt,bn,an,Float32Array),Ge&&console.log("z%d: %d clusters in %dms",dn,kt.length,+Date.now()-He)}return Ge&&console.timeEnd("total time"),this},yn.prototype.getClusters=function(ke,Pe){var Ge=((ke[0]+180)%360+360)%360-180,gt=Math.max(-90,Math.min(90,ke[1])),Bt=ke[2]===180?180:((ke[2]+180)%360+360)%360-180,an=Math.max(-90,Math.min(90,ke[3]));if(ke[2]-ke[0]>=360)Ge=-180,Bt=180;else if(Ge>Bt){var An=this.getClusters([Ge,gt,180,an],Pe),kt=this.getClusters([-180,gt,Bt,an],Pe);return An.concat(kt)}for(var Dt=this.trees[this._limitZoom(Pe)],dn=[],He=0,ei=Dt.range(Tn(Ge),lr(an),Tn(Bt),lr(gt));He<ei.length;He+=1){var Tr=Dt.points[ei[He]];dn.push(Tr.numPoints?Ut(Tr):this.points[Tr.index])}return dn},yn.prototype.getChildren=function(ke){var Pe=this._getOriginId(ke),Ge=this._getOriginZoom(ke),gt="No cluster with the specified id.",Bt=this.trees[Ge];if(!Bt)throw new Error(gt);var an=Bt.points[Pe];if(!an)throw new Error(gt);for(var An=this.options.radius/(this.options.extent*Math.pow(2,Ge-1)),kt=[],Dt=0,dn=Bt.within(an.x,an.y,An);Dt<dn.length;Dt+=1){var He=Bt.points[dn[Dt]];He.parentId===ke&&kt.push(He.numPoints?Ut(He):this.points[He.index])}if(kt.length===0)throw new Error(gt);return kt},yn.prototype.getLeaves=function(ke,Pe,Ge){var gt=[];return this._appendLeaves(gt,ke,Pe=Pe||10,Ge=Ge||0,0),gt},yn.prototype.getTile=function(ke,Pe,Ge){var gt=this.trees[this._limitZoom(ke)],Bt=Math.pow(2,ke),an=this.options,An=an.radius/an.extent,kt=(Ge-An)/Bt,Dt=(Ge+1+An)/Bt,dn={features:[]};return this._addTileFeatures(gt.range((Pe-An)/Bt,kt,(Pe+1+An)/Bt,Dt),gt.points,Pe,Ge,Bt,dn),Pe===0&&this._addTileFeatures(gt.range(1-An/Bt,kt,1,Dt),gt.points,Bt,Ge,Bt,dn),Pe===Bt-1&&this._addTileFeatures(gt.range(0,kt,An/Bt,Dt),gt.points,-1,Ge,Bt,dn),dn.features.length?dn:null},yn.prototype.getClusterExpansionZoom=function(ke){for(var Pe=this._getOriginZoom(ke)-1;Pe<=this.options.maxZoom;){var Ge=this.getChildren(ke);if(Pe++,Ge.length!==1)break;ke=Ge[0].properties.cluster_id}return Pe},yn.prototype._appendLeaves=function(ke,Pe,Ge,gt,Bt){for(var an=0,An=this.getChildren(Pe);an<An.length;an+=1){var kt=An[an],Dt=kt.properties;if(Dt&&Dt.cluster?Bt+Dt.point_count<=gt?Bt+=Dt.point_count:Bt=this._appendLeaves(ke,Dt.cluster_id,Ge,gt,Bt):Bt<gt?Bt++:ke.push(kt),ke.length===Ge)break}return Bt},yn.prototype._addTileFeatures=function(ke,Pe,Ge,gt,Bt,an){for(var An=0,kt=ke;An<kt.length;An+=1){var Dt=Pe[kt[An]],dn=Dt.numPoints,He={type:1,geometry:[[Math.round(this.options.extent*(Dt.x*Bt-Ge)),Math.round(this.options.extent*(Dt.y*Bt-gt))]],tags:dn?En(Dt):this.points[Dt.index].properties},ei=void 0;dn?ei=Dt.id:this.options.generateId?ei=Dt.index:this.points[Dt.index].id&&(ei=this.points[Dt.index].id),ei!==void 0&&(He.id=ei),an.features.push(He)}},yn.prototype._limitZoom=function(ke){return Math.max(this.options.minZoom,Math.min(+ke,this.options.maxZoom+1))},yn.prototype._cluster=function(ke,Pe){for(var Ge=[],gt=this.options,Bt=gt.reduce,an=gt.minPoints,An=gt.radius/(gt.extent*Math.pow(2,Pe)),kt=0;kt<ke.length;kt++){var Dt=ke[kt];if(!(Dt.zoom<=Pe)){Dt.zoom=Pe;for(var dn=this.trees[Pe+1],He=dn.within(Dt.x,Dt.y,An),ei=Dt.numPoints||1,Tr=ei,ii=0,Di=He;ii<Di.length;ii+=1){var vi=dn.points[Di[ii]];vi.zoom>Pe&&(Tr+=vi.numPoints||1)}if(Tr>=an){for(var Br=Dt.x*ei,Gr=Dt.y*ei,bi=Bt&&ei>1?this._map(Dt,!0):null,Ni=(kt<<5)+(Pe+1)+this.points.length,Qa=0,Xi=He;Qa<Xi.length;Qa+=1){var ao=dn.points[Xi[Qa]];if(!(ao.zoom<=Pe)){ao.zoom=Pe;var ko=ao.numPoints||1;Br+=ao.x*ko,Gr+=ao.y*ko,ao.parentId=Ni,Bt&&(bi||(bi=this._map(Dt,!0)),Bt(bi,this._map(ao)))}}Dt.parentId=Ni,Ge.push(ir(Br/Tr,Gr/Tr,Ni,Tr,bi))}else if(Ge.push(Dt),Tr>1)for(var Ba=0,mi=He;Ba<mi.length;Ba+=1){var Je=dn.points[mi[Ba]];Je.zoom<=Pe||(Je.zoom=Pe,Ge.push(Je))}}}return Ge},yn.prototype._getOriginId=function(ke){return ke-this.points.length>>5},yn.prototype._getOriginZoom=function(ke){return(ke-this.points.length)%32},yn.prototype._map=function(ke,Pe){if(ke.numPoints)return Pe?ln({},ke.properties):ke.properties;var Ge=this.points[ke.index].properties,gt=this.options.map(Ge);return Pe&&gt===Ge?ln({},gt):gt},xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(ke,Pe,Ge,gt,Bt,an,An){for(var kt=[ke,Pe,Ge,gt],Dt=this.options,dn=Dt.debug;kt.length;){gt=kt.pop(),Ge=kt.pop(),Pe=kt.pop(),ke=kt.pop();var He=1<<Pe,ei=Jt(Pe,Ge,gt),Tr=this.tiles[ei];if(!Tr&&(dn>1&&console.time("creation"),Tr=this.tiles[ei]=ye(ke,Pe,Ge,gt,Dt),this.tileCoords.push({z:Pe,x:Ge,y:gt}),dn)){dn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Pe,Ge,gt,Tr.numFeatures,Tr.numPoints,Tr.numSimplified),console.timeEnd("creation"));var ii="z"+Pe;this.stats[ii]=(this.stats[ii]||0)+1,this.total++}if(Tr.source=ke,Bt){if(Pe===Dt.maxZoom||Pe===Bt)continue;var Di=1<<Bt-Pe;if(Ge!==Math.floor(an/Di)||gt!==Math.floor(An/Di))continue}else if(Pe===Dt.indexMaxZoom||Tr.numPoints<=Dt.indexMaxPoints)continue;if(Tr.source=null,ke.length!==0){dn>1&&console.time("clipping");var vi,Br,Gr,bi,Ni,Qa,Xi=.5*Dt.buffer/Dt.extent,ao=.5-Xi,ko=.5+Xi,Ba=1+Xi;vi=Br=Gr=bi=null,Ni=Sn(ke,He,Ge-Xi,Ge+ko,0,Tr.minX,Tr.maxX,Dt),Qa=Sn(ke,He,Ge+ao,Ge+Ba,0,Tr.minX,Tr.maxX,Dt),ke=null,Ni&&(vi=Sn(Ni,He,gt-Xi,gt+ko,1,Tr.minY,Tr.maxY,Dt),Br=Sn(Ni,He,gt+ao,gt+Ba,1,Tr.minY,Tr.maxY,Dt),Ni=null),Qa&&(Gr=Sn(Qa,He,gt-Xi,gt+ko,1,Tr.minY,Tr.maxY,Dt),bi=Sn(Qa,He,gt+ao,gt+Ba,1,Tr.minY,Tr.maxY,Dt),Qa=null),dn>1&&console.timeEnd("clipping"),kt.push(vi||[],Pe+1,2*Ge,2*gt),kt.push(Br||[],Pe+1,2*Ge,2*gt+1),kt.push(Gr||[],Pe+1,2*Ge+1,2*gt),kt.push(bi||[],Pe+1,2*Ge+1,2*gt+1)}}},xt.prototype.getTile=function(ke,Pe,Ge){var gt=this.options,Bt=gt.extent,an=gt.debug;if(ke<0||ke>24)return null;var An=1<<ke,kt=Jt(ke,Pe=(Pe%An+An)%An,Ge);if(this.tiles[kt])return bt(this.tiles[kt],Bt);an>1&&console.log("drilling down to z%d-%d-%d",ke,Pe,Ge);for(var Dt,dn=ke,He=Pe,ei=Ge;!Dt&&dn>0;)dn--,He=Math.floor(He/2),ei=Math.floor(ei/2),Dt=this.tiles[Jt(dn,He,ei)];return Dt&&Dt.source?(an>1&&console.log("found parent tile z%d-%d-%d",dn,He,ei),an>1&&console.time("drilling down"),this.splitTile(Dt.source,dn,He,ei,ke,Pe,Ge),an>1&&console.timeEnd("drilling down"),this.tiles[kt]?bt(this.tiles[kt],Bt):null):null};var fr=function(ke){function Pe(Ge,gt,Bt,an){ke.call(this,Ge,gt,Bt,Dn),an&&(this.loadGeoJSON=an)}return ke&&(Pe.__proto__=ke),(Pe.prototype=Object.create(ke&&ke.prototype)).constructor=Pe,Pe.prototype.loadData=function(Ge,gt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=gt,this._pendingLoadDataParams=Ge,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Pe.prototype._loadData=function(){var Ge=this;if(this._pendingCallback&&this._pendingLoadDataParams){var gt=this._pendingCallback,Bt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var an=!!(Bt&&Bt.request&&Bt.request.collectResourceTiming)&&new T.RequestPerformance(Bt.request);this.loadGeoJSON(Bt,function(An,kt){if(An||!kt)return gt(An);if(typeof kt!="object")return gt(new Error("Input data given to '"+Bt.source+"' is not a valid GeoJSON object."));(function Tr(ii,Di){var vi,Br=ii&&ii.type;if(Br==="FeatureCollection")for(vi=0;vi<ii.features.length;vi++)Tr(ii.features[vi],Di);else if(Br==="GeometryCollection")for(vi=0;vi<ii.geometries.length;vi++)Tr(ii.geometries[vi],Di);else if(Br==="Feature")Tr(ii.geometry,Di);else if(Br==="Polygon")de(ii.coordinates,Di);else if(Br==="MultiPolygon")for(vi=0;vi<ii.coordinates.length;vi++)de(ii.coordinates[vi],Di);return ii})(kt,!0);try{if(Bt.filter){var Dt=T.createExpression(Bt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Dt.result==="error")throw new Error(Dt.value.map(function(Tr){return Tr.key+": "+Tr.message}).join(", "));var dn=kt.features.filter(function(Tr){return Dt.value.evaluate({zoom:0},Tr)});kt={type:"FeatureCollection",features:dn}}Ge._geoJSONIndex=Bt.cluster?new yn(function(Tr){var ii=Tr.superclusterOptions,Di=Tr.clusterProperties;if(!Di||!ii)return ii;for(var vi={},Br={},Gr={accumulated:null,zoom:0},bi={properties:null},Ni=Object.keys(Di),Qa=0,Xi=Ni;Qa<Xi.length;Qa+=1){var ao=Xi[Qa],ko=Di[ao],Ba=ko[0],mi=T.createExpression(ko[1]),Je=T.createExpression(typeof Ba=="string"?[Ba,["accumulated"],["get",ao]]:Ba);vi[ao]=mi.value,Br[ao]=Je.value}return ii.map=function(wt){bi.properties=wt;for(var Kt={},Mn=0,Yn=Ni;Mn<Yn.length;Mn+=1){var Gn=Yn[Mn];Kt[Gn]=vi[Gn].evaluate(Gr,bi)}return Kt},ii.reduce=function(wt,Kt){bi.properties=Kt;for(var Mn=0,Yn=Ni;Mn<Yn.length;Mn+=1){var Gn=Yn[Mn];Gr.accumulated=wt[Gn],wt[Gn]=Br[Gn].evaluate(Gr,bi)}},ii}(Bt)).load(kt.features):function(Tr,ii){return new xt(Tr,ii)}(kt,Bt.geojsonVtOptions)}catch(Tr){return gt(Tr)}Ge.loaded={};var He={};if(an){var ei=an.finish();ei&&(He.resourceTiming={},He.resourceTiming[Bt.source]=JSON.parse(JSON.stringify(ei)))}gt(null,He)})}},Pe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Pe.prototype.reloadTile=function(Ge,gt){var Bt=this.loaded;return Bt&&Bt[Ge.uid]?ke.prototype.reloadTile.call(this,Ge,gt):this.loadTile(Ge,gt)},Pe.prototype.loadGeoJSON=function(Ge,gt){if(Ge.request)T.getJSON(Ge.request,gt);else{if(typeof Ge.data!="string")return gt(new Error("Input data given to '"+Ge.source+"' is not a valid GeoJSON object."));try{return gt(null,JSON.parse(Ge.data))}catch(Bt){return gt(new Error("Input data given to '"+Ge.source+"' is not a valid GeoJSON object."))}}},Pe.prototype.removeSource=function(Ge,gt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),gt()},Pe.prototype.getClusterExpansionZoom=function(Ge,gt){try{gt(null,this._geoJSONIndex.getClusterExpansionZoom(Ge.clusterId))}catch(Bt){gt(Bt)}},Pe.prototype.getClusterChildren=function(Ge,gt){try{gt(null,this._geoJSONIndex.getChildren(Ge.clusterId))}catch(Bt){gt(Bt)}},Pe.prototype.getClusterLeaves=function(Ge,gt){try{gt(null,this._geoJSONIndex.getLeaves(Ge.clusterId,Ge.limit,Ge.offset))}catch(Bt){gt(Bt)}},Pe}(re),In=function(ke){var Pe=this;this.self=ke,this.actor=new T.Actor(ke,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:re,geojson:fr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ge,gt){if(Pe.workerSourceTypes[Ge])throw new Error('Worker source with name "'+Ge+'" already registered.');Pe.workerSourceTypes[Ge]=gt},this.self.registerRTLTextPlugin=function(Ge){if(T.plugin.isParsed())throw new Error("RTL text plugin already registered.");T.plugin.applyArabicShaping=Ge.applyArabicShaping,T.plugin.processBidirectionalText=Ge.processBidirectionalText,T.plugin.processStyledBidirectionalText=Ge.processStyledBidirectionalText}};return In.prototype.setReferrer=function(ke,Pe){this.referrer=Pe},In.prototype.setImages=function(ke,Pe,Ge){for(var gt in this.availableImages[ke]=Pe,this.workerSources[ke]){var Bt=this.workerSources[ke][gt];for(var an in Bt)Bt[an].availableImages=Pe}Ge()},In.prototype.setLayers=function(ke,Pe,Ge){this.getLayerIndex(ke).replace(Pe),Ge()},In.prototype.updateLayers=function(ke,Pe,Ge){this.getLayerIndex(ke).update(Pe.layers,Pe.removedIds),Ge()},In.prototype.loadTile=function(ke,Pe,Ge){this.getWorkerSource(ke,Pe.type,Pe.source).loadTile(Pe,Ge)},In.prototype.loadDEMTile=function(ke,Pe,Ge){this.getDEMWorkerSource(ke,Pe.source).loadTile(Pe,Ge)},In.prototype.reloadTile=function(ke,Pe,Ge){this.getWorkerSource(ke,Pe.type,Pe.source).reloadTile(Pe,Ge)},In.prototype.abortTile=function(ke,Pe,Ge){this.getWorkerSource(ke,Pe.type,Pe.source).abortTile(Pe,Ge)},In.prototype.removeTile=function(ke,Pe,Ge){this.getWorkerSource(ke,Pe.type,Pe.source).removeTile(Pe,Ge)},In.prototype.removeDEMTile=function(ke,Pe){this.getDEMWorkerSource(ke,Pe.source).removeTile(Pe)},In.prototype.removeSource=function(ke,Pe,Ge){if(this.workerSources[ke]&&this.workerSources[ke][Pe.type]&&this.workerSources[ke][Pe.type][Pe.source]){var gt=this.workerSources[ke][Pe.type][Pe.source];delete this.workerSources[ke][Pe.type][Pe.source],gt.removeSource!==void 0?gt.removeSource(Pe,Ge):Ge()}},In.prototype.loadWorkerSource=function(ke,Pe,Ge){try{this.self.importScripts(Pe.url),Ge()}catch(gt){Ge(gt.toString())}},In.prototype.syncRTLPluginState=function(ke,Pe,Ge){try{T.plugin.setState(Pe);var gt=T.plugin.getPluginURL();if(T.plugin.isLoaded()&&!T.plugin.isParsed()&&gt!=null){this.self.importScripts(gt);var Bt=T.plugin.isParsed();Ge(Bt?void 0:new Error("RTL Text Plugin failed to import scripts from "+gt),Bt)}}catch(an){Ge(an.toString())}},In.prototype.getAvailableImages=function(ke){var Pe=this.availableImages[ke];return Pe||(Pe=[]),Pe},In.prototype.getLayerIndex=function(ke){var Pe=this.layerIndexes[ke];return Pe||(Pe=this.layerIndexes[ke]=new ge),Pe},In.prototype.getWorkerSource=function(ke,Pe,Ge){var gt=this;return this.workerSources[ke]||(this.workerSources[ke]={}),this.workerSources[ke][Pe]||(this.workerSources[ke][Pe]={}),this.workerSources[ke][Pe][Ge]||(this.workerSources[ke][Pe][Ge]=new this.workerSourceTypes[Pe]({send:function(Bt,an,An){gt.actor.send(Bt,an,An,ke)}},this.getLayerIndex(ke),this.getAvailableImages(ke))),this.workerSources[ke][Pe][Ge]},In.prototype.getDEMWorkerSource=function(ke,Pe){return this.demWorkerSources[ke]||(this.demWorkerSources[ke]={}),this.demWorkerSources[ke][Pe]||(this.demWorkerSources[ke][Pe]=new se),this.demWorkerSources[ke][Pe]},In.prototype.enforceCacheSizeLimit=function(ke,Pe){T.enforceCacheSizeLimit(Pe)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new In(self)),In}),ae(["./shared"],function(T){"use strict";var ne=T.createCommonjsModule(function(x){function A(j){return!w(j)}function w(j){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var te,we,tt=new Blob([""],{type:"text/javascript"}),At=URL.createObjectURL(tt);try{we=new Worker(At),te=!0}catch($t){te=!1}return we&&we.terminate(),URL.revokeObjectURL(At),te}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var te=document.createElement("canvas");te.width=te.height=1;var we=te.getContext("2d");if(!we)return!1;var tt=we.getImageData(0,0,1,1);return tt&&tt.width===te.width}()?(R[Y=j&&j.failIfMajorPerformanceCaveat]===void 0&&(R[Y]=function(te){var we=function(At){var $t=document.createElement("canvas"),qt=Object.create(A.webGLContextAttributes);return qt.failIfMajorPerformanceCaveat=At,$t.probablySupportsContext?$t.probablySupportsContext("webgl",qt)||$t.probablySupportsContext("experimental-webgl",qt):$t.supportsContext?$t.supportsContext("webgl",qt)||$t.supportsContext("experimental-webgl",qt):$t.getContext("webgl",qt)||$t.getContext("experimental-webgl",qt)}(te);if(!we)return!1;var tt=we.createShader(we.VERTEX_SHADER);return!(!tt||we.isContextLost())&&(we.shaderSource(tt,"void main() {}"),we.compileShader(tt),we.getShaderParameter(tt,we.COMPILE_STATUS)===!0)}(Y)),R[Y]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Y}x.exports?x.exports=A:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=A,window.mapboxgl.notSupportedReason=w);var R={};A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Q={create:function(x,A,w){var R=T.window.document.createElement(x);return A!==void 0&&(R.className=A),w&&w.appendChild(R),R},createNS:function(x,A){return T.window.document.createElementNS(x,A)}},ge=T.window.document&&T.window.document.documentElement.style;function pe(x){if(!ge)return x[0];for(var A=0;A<x.length;A++)if(x[A]in ge)return x[A];return x[0]}var Ce,he=pe(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Q.disableDrag=function(){ge&&he&&(Ce=ge[he],ge[he]="none")},Q.enableDrag=function(){ge&&he&&(ge[he]=Ce)};var st=pe(["transform","WebkitTransform"]);Q.setTransform=function(x,A){x.style[st]=A};var re=!1;try{var Se=Object.defineProperty({},"passive",{get:function(){re=!0}});T.window.addEventListener("test",Se,Se),T.window.removeEventListener("test",Se,Se)}catch(x){re=!1}Q.addEventListener=function(x,A,w,R){R===void 0&&(R={}),x.addEventListener(A,w,"passive"in R&&re?R:R.capture)},Q.removeEventListener=function(x,A,w,R){R===void 0&&(R={}),x.removeEventListener(A,w,"passive"in R&&re?R:R.capture)};var se=function(x){x.preventDefault(),x.stopPropagation(),T.window.removeEventListener("click",se,!0)};function de(x){var A=x.userImage;return!!(A&&A.render&&A.render())&&(x.data.replace(new Uint8Array(A.data.buffer)),!0)}Q.suppressClick=function(){T.window.addEventListener("click",se,!0),T.window.setTimeout(function(){T.window.removeEventListener("click",se,!0)},0)},Q.mousePos=function(x,A){var w=x.getBoundingClientRect();return new T.Point(A.clientX-w.left-x.clientLeft,A.clientY-w.top-x.clientTop)},Q.touchPos=function(x,A){for(var w=x.getBoundingClientRect(),R=[],j=0;j<A.length;j++)R.push(new T.Point(A[j].clientX-w.left-x.clientLeft,A[j].clientY-w.top-x.clientTop));return R},Q.mouseButton=function(x){return T.window.InstallTrigger!==void 0&&x.button===2&&x.ctrlKey&&T.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:x.button},Q.remove=function(x){x.parentNode&&x.parentNode.removeChild(x)};var xe=function(x){function A(){x.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new T.RGBAImage({width:1,height:1}),this.dirty=!0}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.isLoaded=function(){return this.loaded},A.prototype.setLoaded=function(w){if(this.loaded!==w&&(this.loaded=w,w)){for(var R=0,j=this.requestors;R<j.length;R+=1){var Y=j[R];this._notify(Y.ids,Y.callback)}this.requestors=[]}},A.prototype.getImage=function(w){return this.images[w]},A.prototype.addImage=function(w,R){this._validate(w,R)&&(this.images[w]=R)},A.prototype._validate=function(w,R){var j=!0;return this._validateStretch(R.stretchX,R.data&&R.data.width)||(this.fire(new T.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchX" value'))),j=!1),this._validateStretch(R.stretchY,R.data&&R.data.height)||(this.fire(new T.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchY" value'))),j=!1),this._validateContent(R.content,R)||(this.fire(new T.ErrorEvent(new Error('Image "'+w+'" has invalid "content" value'))),j=!1),j},A.prototype._validateStretch=function(w,R){if(!w)return!0;for(var j=0,Y=0,te=w;Y<te.length;Y+=1){var we=te[Y];if(we[0]<j||we[1]<we[0]||R<we[1])return!1;j=we[1]}return!0},A.prototype._validateContent=function(w,R){return!(w&&(w.length!==4||w[0]<0||R.data.width<w[0]||w[1]<0||R.data.height<w[1]||w[2]<0||R.data.width<w[2]||w[3]<0||R.data.height<w[3]||w[2]<w[0]||w[3]<w[1]))},A.prototype.updateImage=function(w,R){R.version=this.images[w].version+1,this.images[w]=R,this.updatedImages[w]=!0},A.prototype.removeImage=function(w){var R=this.images[w];delete this.images[w],delete this.patterns[w],R.userImage&&R.userImage.onRemove&&R.userImage.onRemove()},A.prototype.listImages=function(){return Object.keys(this.images)},A.prototype.getImages=function(w,R){var j=!0;if(!this.isLoaded())for(var Y=0,te=w;Y<te.length;Y+=1)this.images[te[Y]]||(j=!1);this.isLoaded()||j?this._notify(w,R):this.requestors.push({ids:w,callback:R})},A.prototype._notify=function(w,R){for(var j={},Y=0,te=w;Y<te.length;Y+=1){var we=te[Y];this.images[we]||this.fire(new T.Event("styleimagemissing",{id:we}));var tt=this.images[we];tt?j[we]={data:tt.data.clone(),pixelRatio:tt.pixelRatio,sdf:tt.sdf,version:tt.version,stretchX:tt.stretchX,stretchY:tt.stretchY,content:tt.content,hasRenderCallback:!!(tt.userImage&&tt.userImage.render)}:T.warnOnce('Image "'+we+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}R(null,j)},A.prototype.getPixelSize=function(){var w=this.atlasImage;return{width:w.width,height:w.height}},A.prototype.getPattern=function(w){var R=this.patterns[w],j=this.getImage(w);if(!j)return null;if(R&&R.position.version===j.version)return R.position;if(R)R.position.version=j.version;else{var Y={w:j.data.width+2,h:j.data.height+2,x:0,y:0},te=new T.ImagePosition(Y,j);this.patterns[w]={bin:Y,position:te}}return this._updatePatternAtlas(),this.patterns[w].position},A.prototype.bind=function(w){var R=w.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T.Texture(w,this.atlasImage,R.RGBA),this.atlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE)},A.prototype._updatePatternAtlas=function(){var w=[];for(var R in this.patterns)w.push(this.patterns[R].bin);var j=T.potpack(w),Y=j.w,te=j.h,we=this.atlasImage;for(var tt in we.resize({width:Y||1,height:te||1}),this.patterns){var At=this.patterns[tt].bin,$t=At.x+1,qt=At.y+1,rn=this.images[tt].data,kn=rn.width,Rn=rn.height;T.RGBAImage.copy(rn,we,{x:0,y:0},{x:$t,y:qt},{width:kn,height:Rn}),T.RGBAImage.copy(rn,we,{x:0,y:Rn-1},{x:$t,y:qt-1},{width:kn,height:1}),T.RGBAImage.copy(rn,we,{x:0,y:0},{x:$t,y:qt+Rn},{width:kn,height:1}),T.RGBAImage.copy(rn,we,{x:kn-1,y:0},{x:$t-1,y:qt},{width:1,height:Rn}),T.RGBAImage.copy(rn,we,{x:0,y:0},{x:$t+kn,y:qt},{width:1,height:Rn})}this.dirty=!0},A.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},A.prototype.dispatchRenderCallbacks=function(w){for(var R=0,j=w;R<j.length;R+=1){var Y=j[R];if(!this.callbackDispatchedThisFrame[Y]){this.callbackDispatchedThisFrame[Y]=!0;var te=this.images[Y];de(te)&&this.updateImage(Y,te)}}},A}(T.Evented),le=mt,Ue=mt,Et=1e20;function mt(x,A,w,R,j,Y){this.fontSize=x||24,this.buffer=A===void 0?3:A,this.cutoff=R||.25,this.fontFamily=j||"sans-serif",this.fontWeight=Y||"normal",this.radius=w||8;var te=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=te,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(te*te),this.gridInner=new Float64Array(te*te),this.f=new Float64Array(te),this.d=new Float64Array(te),this.z=new Float64Array(te+1),this.v=new Int16Array(te),this.middle=Math.round(te/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Wt(x,A,w,R,j,Y,te){for(var we=0;we<A;we++){for(var tt=0;tt<w;tt++)R[tt]=x[tt*A+we];for(Rt(R,j,Y,te,w),tt=0;tt<w;tt++)x[tt*A+we]=j[tt]}for(tt=0;tt<w;tt++){for(we=0;we<A;we++)R[we]=x[tt*A+we];for(Rt(R,j,Y,te,A),we=0;we<A;we++)x[tt*A+we]=Math.sqrt(j[we])}}function Rt(x,A,w,R,j){w[0]=0,R[0]=-Et,R[1]=+Et;for(var Y=1,te=0;Y<j;Y++){for(var we=(x[Y]+Y*Y-(x[w[te]]+w[te]*w[te]))/(2*Y-2*w[te]);we<=R[te];)te--,we=(x[Y]+Y*Y-(x[w[te]]+w[te]*w[te]))/(2*Y-2*w[te]);w[++te]=Y,R[te]=we,R[te+1]=+Et}for(Y=0,te=0;Y<j;Y++){for(;R[te+1]<Y;)te++;A[Y]=(Y-w[te])*(Y-w[te])+x[w[te]]}}mt.prototype.draw=function(x){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(x,this.buffer,this.middle);for(var A=this.ctx.getImageData(0,0,this.size,this.size),w=new Uint8ClampedArray(this.size*this.size),R=0;R<this.size*this.size;R++){var j=A.data[4*R+3]/255;this.gridOuter[R]=j===1?0:j===0?Et:Math.pow(Math.max(0,.5-j),2),this.gridInner[R]=j===1?Et:j===0?0:Math.pow(Math.max(0,j-.5),2)}for(Wt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Wt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),R=0;R<this.size*this.size;R++)w[R]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[R]-this.gridInner[R])/this.radius+this.cutoff))));return w},le.default=Ue;var Tt=function(x,A){this.requestManager=x,this.localIdeographFontFamily=A,this.entries={}};Tt.prototype.setURL=function(x){this.url=x},Tt.prototype.getGlyphs=function(x,A){var w=this,R=[];for(var j in x)for(var Y=0,te=x[j];Y<te.length;Y+=1)R.push({stack:j,id:te[Y]});T.asyncAll(R,function(we,tt){var At=we.stack,$t=we.id,qt=w.entries[At];qt||(qt=w.entries[At]={glyphs:{},requests:{},ranges:{}});var rn=qt.glyphs[$t];if(rn===void 0){if(rn=w._tinySDF(qt,At,$t))return qt.glyphs[$t]=rn,void tt(null,{stack:At,id:$t,glyph:rn});var kn=Math.floor($t/256);if(256*kn>65535)tt(new Error("glyphs > 65535 not supported"));else if(qt.ranges[kn])tt(null,{stack:At,id:$t,glyph:rn});else{var Rn=qt.requests[kn];Rn||(Rn=qt.requests[kn]=[],Tt.loadGlyphRange(At,kn,w.url,w.requestManager,function(qn,wn){if(wn){for(var Kn in wn)w._doesCharSupportLocalGlyph(+Kn)||(qt.glyphs[+Kn]=wn[+Kn]);qt.ranges[kn]=!0}for(var mr=0,Or=Rn;mr<Or.length;mr+=1)(0,Or[mr])(qn,wn);delete qt.requests[kn]})),Rn.push(function(qn,wn){qn?tt(qn):wn&&tt(null,{stack:At,id:$t,glyph:wn[$t]||null})})}}else tt(null,{stack:At,id:$t,glyph:rn})},function(we,tt){if(we)A(we);else if(tt){for(var At={},$t=0,qt=tt;$t<qt.length;$t+=1){var rn=qt[$t],kn=rn.stack,Rn=rn.id,qn=rn.glyph;(At[kn]||(At[kn]={}))[Rn]=qn&&{id:qn.id,bitmap:qn.bitmap.clone(),metrics:qn.metrics}}A(null,At)}})},Tt.prototype._doesCharSupportLocalGlyph=function(x){return!!this.localIdeographFontFamily&&(T.isChar["CJK Unified Ideographs"](x)||T.isChar["Hangul Syllables"](x)||T.isChar.Hiragana(x)||T.isChar.Katakana(x))},Tt.prototype._tinySDF=function(x,A,w){var R=this.localIdeographFontFamily;if(R&&this._doesCharSupportLocalGlyph(w)){var j=x.tinySDF;if(!j){var Y="400";/bold/i.test(A)?Y="900":/medium/i.test(A)?Y="500":/light/i.test(A)&&(Y="200"),j=x.tinySDF=new Tt.TinySDF(24,3,8,.25,R,Y)}return{id:w,bitmap:new T.AlphaImage({width:30,height:30},j.draw(String.fromCharCode(w))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Tt.loadGlyphRange=function(x,A,w,R,j){var Y=256*A,te=Y+255,we=R.transformRequest(R.normalizeGlyphsURL(w).replace("{fontstack}",x).replace("{range}",Y+"-"+te),T.ResourceType.Glyphs);T.getArrayBuffer(we,function(tt,At){if(tt)j(tt);else if(At){for(var $t={},qt=0,rn=T.parseGlyphPBF(At);qt<rn.length;qt+=1){var kn=rn[qt];$t[kn.id]=kn}j(null,$t)}})},Tt.TinySDF=le;var Ze=function(){this.specification=T.styleSpec.light.position};Ze.prototype.possiblyEvaluate=function(x,A){return T.sphericalToCartesian(x.expression.evaluate(A))},Ze.prototype.interpolate=function(x,A,w){return{x:T.number(x.x,A.x,w),y:T.number(x.y,A.y,w),z:T.number(x.z,A.z,w)}};var Ie=new T.Properties({anchor:new T.DataConstantProperty(T.styleSpec.light.anchor),position:new Ze,color:new T.DataConstantProperty(T.styleSpec.light.color),intensity:new T.DataConstantProperty(T.styleSpec.light.intensity)}),Qe=function(x){function A(w){x.call(this),this._transitionable=new T.Transitionable(Ie),this.setLight(w),this._transitioning=this._transitionable.untransitioned()}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getLight=function(){return this._transitionable.serialize()},A.prototype.setLight=function(w,R){if(R===void 0&&(R={}),!this._validate(T.validateLight,w,R))for(var j in w){var Y=w[j];T.endsWith(j,"-transition")?this._transitionable.setTransition(j.slice(0,-11),Y):this._transitionable.setValue(j,Y)}},A.prototype.updateTransitions=function(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)},A.prototype.hasTransition=function(){return this._transitioning.hasTransition()},A.prototype.recalculate=function(w){this.properties=this._transitioning.possiblyEvaluate(w)},A.prototype._validate=function(w,R,j){return(!j||j.validate!==!1)&&T.emitValidationErrors(this,w.call(T.validateStyle,T.extend({value:R,style:{glyphs:!0,sprite:!0},styleSpec:T.styleSpec})))},A}(T.Evented),it=function(x,A){this.width=x,this.height=A,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};it.prototype.getDash=function(x,A){var w=x.join(",")+String(A);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(x,A)),this.dashEntry[w]},it.prototype.getDashRanges=function(x,A,w){var R=[],j=x.length%2==1?-x[x.length-1]*w:0,Y=x[0]*w,te=!0;R.push({left:j,right:Y,isDash:te,zeroLength:x[0]===0});for(var we=x[0],tt=1;tt<x.length;tt++){var At=x[tt];R.push({left:j=we*w,right:Y=(we+=At)*w,isDash:te=!te,zeroLength:At===0})}return R},it.prototype.addRoundDash=function(x,A,w){for(var R=A/2,j=-w;j<=w;j++)for(var Y=this.width*(this.nextRow+w+j),te=0,we=x[te],tt=0;tt<this.width;tt++){tt/we.right>1&&(we=x[++te]);var At=Math.abs(tt-we.left),$t=Math.abs(tt-we.right),qt=Math.min(At,$t),rn=void 0,kn=j/w*(R+1);if(we.isDash){var Rn=R-Math.abs(kn);rn=Math.sqrt(qt*qt+Rn*Rn)}else rn=R-Math.sqrt(qt*qt+kn*kn);this.data[Y+tt]=Math.max(0,Math.min(255,rn+128))}},it.prototype.addRegularDash=function(x){for(var A=x.length-1;A>=0;--A){var w=x[A],R=x[A+1];w.zeroLength?x.splice(A,1):R&&R.isDash===w.isDash&&(R.left=w.left,x.splice(A,1))}var j=x[0],Y=x[x.length-1];j.isDash===Y.isDash&&(j.left=Y.left-this.width,Y.right=j.right+this.width);for(var te=this.width*this.nextRow,we=0,tt=x[we],At=0;At<this.width;At++){At/tt.right>1&&(tt=x[++we]);var $t=Math.abs(At-tt.left),qt=Math.abs(At-tt.right),rn=Math.min($t,qt);this.data[te+At]=Math.max(0,Math.min(255,(tt.isDash?rn:-rn)+128))}},it.prototype.addDash=function(x,A){var w=A?7:0,R=2*w+1;if(this.nextRow+R>this.height)return T.warnOnce("LineAtlas out of space"),null;for(var j=0,Y=0;Y<x.length;Y++)j+=x[Y];if(j!==0){var te=this.width/j,we=this.getDashRanges(x,this.width,te);A?this.addRoundDash(we,te,w):this.addRegularDash(we)}var tt={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:j};return this.nextRow+=R,this.dirty=!0,tt},it.prototype.bind=function(x){var A=x.gl;this.texture?(A.bindTexture(A.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,A.texSubImage2D(A.TEXTURE_2D,0,0,0,this.width,this.height,A.ALPHA,A.UNSIGNED_BYTE,this.data))):(this.texture=A.createTexture(),A.bindTexture(A.TEXTURE_2D,this.texture),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.REPEAT),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.REPEAT),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texImage2D(A.TEXTURE_2D,0,A.ALPHA,this.width,this.height,0,A.ALPHA,A.UNSIGNED_BYTE,this.data))};var De=function x(A,w){this.workerPool=A,this.actors=[],this.currentActor=0,this.id=T.uniqueId();for(var R=this.workerPool.acquire(this.id),j=0;j<R.length;j++){var Y=new x.Actor(R[j],w,this.id);Y.name="Worker "+j,this.actors.push(Y)}};function cn(x,A,w){var R=function(j,Y){if(j)return w(j);if(Y){var te=T.pick(T.extend(Y,x),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Y.vector_layers&&(te.vectorLayers=Y.vector_layers,te.vectorLayerIds=te.vectorLayers.map(function(we){return we.id})),te.tiles=A.canonicalizeTileset(te,x.url),w(null,te)}};return x.url?T.getJSON(A.transformRequest(A.normalizeSourceURL(x.url),T.ResourceType.Source),R):T.browser.frame(function(){return R(null,x)})}De.prototype.broadcast=function(x,A,w){T.asyncAll(this.actors,function(R,j){R.send(x,A,j)},w=w||function(){})},De.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},De.prototype.remove=function(){this.actors.forEach(function(x){x.remove()}),this.actors=[],this.workerPool.release(this.id)},De.Actor=T.Actor;var qe=function(x,A,w){this.bounds=T.LngLatBounds.convert(this.validateBounds(x)),this.minzoom=A||0,this.maxzoom=w||24};qe.prototype.validateBounds=function(x){return Array.isArray(x)&&x.length===4?[Math.max(-180,x[0]),Math.max(-90,x[1]),Math.min(180,x[2]),Math.min(90,x[3])]:[-180,-90,180,90]},qe.prototype.contains=function(x){var A=Math.pow(2,x.z),w=Math.floor(T.mercatorXfromLng(this.bounds.getWest())*A),R=Math.floor(T.mercatorYfromLat(this.bounds.getNorth())*A),j=Math.ceil(T.mercatorXfromLng(this.bounds.getEast())*A),Y=Math.ceil(T.mercatorYfromLat(this.bounds.getSouth())*A);return x.x>=w&&x.x<j&&x.y>=R&&x.y<Y};var Pt=function(x){function A(w,R,j,Y){if(x.call(this),this.id=w,this.dispatcher=j,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,T.extend(this,T.pick(R,["url","scheme","tileSize","promoteId"])),this._options=T.extend({type:"vector"},R),this._collectResourceTiming=R.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Y)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new T.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=cn(this._options,this.map._requestManager,function(R,j){w._tileJSONRequest=null,w._loaded=!0,R?w.fire(new T.ErrorEvent(R)):j&&(T.extend(w,j),j.bounds&&(w.tileBounds=new qe(j.bounds,w.minzoom,w.maxzoom)),T.postTurnstileEvent(j.tiles,w.map._requestManager._customAccessToken),T.postMapLoadEvent(j.tiles,w.map._getMapId(),w.map._requestManager._skuToken,w.map._requestManager._customAccessToken),w.fire(new T.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new T.Event("data",{dataType:"source",sourceDataType:"content"})))})},A.prototype.loaded=function(){return this._loaded},A.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},A.prototype.onAdd=function(w){this.map=w,this.load()},A.prototype.setSourceProperty=function(w){this._tileJSONRequest&&this._tileJSONRequest.cancel(),w(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},A.prototype.setTiles=function(w){var R=this;return this.setSourceProperty(function(){R._options.tiles=w}),this},A.prototype.setUrl=function(w){var R=this;return this.setSourceProperty(function(){R.url=w,R._options.url=w}),this},A.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},A.prototype.serialize=function(){return T.extend({},this._options)},A.prototype.loadTile=function(w,R){var j=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),Y={request:this.map._requestManager.transformRequest(j,T.ResourceType.Tile),uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:T.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function te(we,tt){return delete w.request,w.aborted?R(null):we&&we.status!==404?R(we):(tt&&tt.resourceTiming&&(w.resourceTiming=tt.resourceTiming),this.map._refreshExpiredTiles&&tt&&w.setExpiryData(tt),w.loadVectorData(tt,this.map.painter),T.cacheEntryPossiblyAdded(this.dispatcher),R(null),void(w.reloadCallback&&(this.loadTile(w,w.reloadCallback),w.reloadCallback=null)))}Y.request.collectResourceTiming=this._collectResourceTiming,w.actor&&w.state!=="expired"?w.state==="loading"?w.reloadCallback=R:w.request=w.actor.send("reloadTile",Y,te.bind(this)):(w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",Y,te.bind(this)))},A.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.actor&&w.actor.send("abortTile",{uid:w.uid,type:this.type,source:this.id},void 0)},A.prototype.unloadTile=function(w){w.unloadVectorData(),w.actor&&w.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id},void 0)},A.prototype.hasTransition=function(){return!1},A}(T.Evented),Le=function(x){function A(w,R,j,Y){x.call(this),this.id=w,this.dispatcher=j,this.setEventedParent(Y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=T.extend({type:"raster"},R),T.extend(this,T.pick(R,["url","scheme","tileSize"]))}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new T.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=cn(this._options,this.map._requestManager,function(R,j){w._tileJSONRequest=null,w._loaded=!0,R?w.fire(new T.ErrorEvent(R)):j&&(T.extend(w,j),j.bounds&&(w.tileBounds=new qe(j.bounds,w.minzoom,w.maxzoom)),T.postTurnstileEvent(j.tiles),T.postMapLoadEvent(j.tiles,w.map._getMapId(),w.map._requestManager._skuToken),w.fire(new T.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new T.Event("data",{dataType:"source",sourceDataType:"content"})))})},A.prototype.loaded=function(){return this._loaded},A.prototype.onAdd=function(w){this.map=w,this.load()},A.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},A.prototype.serialize=function(){return T.extend({},this._options)},A.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},A.prototype.loadTile=function(w,R){var j=this,Y=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);w.request=T.getImage(this.map._requestManager.transformRequest(Y,T.ResourceType.Tile),function(te,we){if(delete w.request,w.aborted)w.state="unloaded",R(null);else if(te)w.state="errored",R(te);else if(we){j.map._refreshExpiredTiles&&w.setExpiryData(we),delete we.cacheControl,delete we.expires;var tt=j.map.painter.context,At=tt.gl;w.texture=j.map.painter.getTileTexture(we.width),w.texture?w.texture.update(we,{useMipmap:!0}):(w.texture=new T.Texture(tt,we,At.RGBA,{useMipmap:!0}),w.texture.bind(At.LINEAR,At.CLAMP_TO_EDGE,At.LINEAR_MIPMAP_NEAREST),tt.extTextureFilterAnisotropic&&At.texParameterf(At.TEXTURE_2D,tt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,tt.extTextureFilterAnisotropicMax)),w.state="loaded",T.cacheEntryPossiblyAdded(j.dispatcher),R(null)}})},A.prototype.abortTile=function(w,R){w.request&&(w.request.cancel(),delete w.request),R()},A.prototype.unloadTile=function(w,R){w.texture&&this.map.painter.saveTileTexture(w.texture),R()},A.prototype.hasTransition=function(){return!1},A}(T.Evented),pt=function(x){function A(w,R,j,Y){x.call(this,w,R,j,Y),this.type="raster-dem",this.maxzoom=22,this._options=T.extend({type:"raster-dem"},R),this.encoding=R.encoding||"mapbox"}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},A.prototype.loadTile=function(w,R){var j=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Y(te,we){te&&(w.state="errored",R(te)),we&&(w.dem=we,w.needsHillshadePrepare=!0,w.state="loaded",R(null))}w.request=T.getImage(this.map._requestManager.transformRequest(j,T.ResourceType.Tile),function(te,we){if(delete w.request,w.aborted)w.state="unloaded",R(null);else if(te)w.state="errored",R(te);else if(we){this.map._refreshExpiredTiles&&w.setExpiryData(we),delete we.cacheControl,delete we.expires;var tt=T.window.ImageBitmap&&we instanceof T.window.ImageBitmap&&T.offscreenCanvasSupported()?we:T.browser.getImageData(we,1),At={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:tt,encoding:this.encoding};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",At,Y.bind(this)))}}.bind(this)),w.neighboringTiles=this._getNeighboringTiles(w.tileID)},A.prototype._getNeighboringTiles=function(w){var R=w.canonical,j=Math.pow(2,R.z),Y=(R.x-1+j)%j,te=R.x===0?w.wrap-1:w.wrap,we=(R.x+1+j)%j,tt=R.x+1===j?w.wrap+1:w.wrap,At={};return At[new T.OverscaledTileID(w.overscaledZ,te,R.z,Y,R.y).key]={backfilled:!1},At[new T.OverscaledTileID(w.overscaledZ,tt,R.z,we,R.y).key]={backfilled:!1},R.y>0&&(At[new T.OverscaledTileID(w.overscaledZ,te,R.z,Y,R.y-1).key]={backfilled:!1},At[new T.OverscaledTileID(w.overscaledZ,w.wrap,R.z,R.x,R.y-1).key]={backfilled:!1},At[new T.OverscaledTileID(w.overscaledZ,tt,R.z,we,R.y-1).key]={backfilled:!1}),R.y+1<j&&(At[new T.OverscaledTileID(w.overscaledZ,te,R.z,Y,R.y+1).key]={backfilled:!1},At[new T.OverscaledTileID(w.overscaledZ,w.wrap,R.z,R.x,R.y+1).key]={backfilled:!1},At[new T.OverscaledTileID(w.overscaledZ,tt,R.z,we,R.y+1).key]={backfilled:!1}),At},A.prototype.unloadTile=function(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded",w.actor&&w.actor.send("removeDEMTile",{uid:w.uid,source:this.id})},A}(Le),at=function(x){function A(w,R,j,Y){x.call(this),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=j.getActor(),this.setEventedParent(Y),this._data=R.data,this._options=T.extend({},R),this._collectResourceTiming=R.collectResourceTiming,this._resourceTiming=[],R.maxzoom!==void 0&&(this.maxzoom=R.maxzoom),R.type&&(this.type=R.type),R.attribution&&(this.attribution=R.attribution),this.promoteId=R.promoteId;var te=T.EXTENT/this.tileSize;this.workerOptions=T.extend({source:this.id,cluster:R.cluster||!1,geojsonVtOptions:{buffer:(R.buffer!==void 0?R.buffer:128)*te,tolerance:(R.tolerance!==void 0?R.tolerance:.375)*te,extent:T.EXTENT,maxZoom:this.maxzoom,lineMetrics:R.lineMetrics||!1,generateId:R.generateId||!1},superclusterOptions:{maxZoom:R.clusterMaxZoom!==void 0?Math.min(R.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,R.clusterMinPoints||2),extent:T.EXTENT,radius:(R.clusterRadius||50)*te,log:!1,generateId:R.generateId||!1},clusterProperties:R.clusterProperties,filter:R.filter},R.workerOptions)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.load=function(){var w=this;this.fire(new T.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(R){if(R)w.fire(new T.ErrorEvent(R));else{var j={dataType:"source",sourceDataType:"metadata"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(j.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new T.Event("data",j))}})},A.prototype.onAdd=function(w){this.map=w,this.load()},A.prototype.setData=function(w){var R=this;return this._data=w,this.fire(new T.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(j){if(j)R.fire(new T.ErrorEvent(j));else{var Y={dataType:"source",sourceDataType:"content"};R._collectResourceTiming&&R._resourceTiming&&R._resourceTiming.length>0&&(Y.resourceTiming=R._resourceTiming,R._resourceTiming=[]),R.fire(new T.Event("data",Y))}}),this},A.prototype.getClusterExpansionZoom=function(w,R){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},R),this},A.prototype.getClusterChildren=function(w,R){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},R),this},A.prototype.getClusterLeaves=function(w,R,j,Y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:R,offset:j},Y),this},A.prototype._updateWorkerData=function(w){var R=this;this._loaded=!1;var j=T.extend({},this.workerOptions),Y=this._data;typeof Y=="string"?(j.request=this.map._requestManager.transformRequest(T.browser.resolveURL(Y),T.ResourceType.Source),j.request.collectResourceTiming=this._collectResourceTiming):j.data=JSON.stringify(Y),this.actor.send(this.type+".loadData",j,function(te,we){R._removed||we&&we.abandoned||(R._loaded=!0,we&&we.resourceTiming&&we.resourceTiming[R.id]&&(R._resourceTiming=we.resourceTiming[R.id].slice(0)),R.actor.send(R.type+".coalesce",{source:j.source},null),w(te))})},A.prototype.loaded=function(){return this._loaded},A.prototype.loadTile=function(w,R){var j=this,Y=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(Y,{type:this.type,uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:T.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(te,we){return delete w.request,w.unloadVectorData(),w.aborted?R(null):te?R(te):(w.loadVectorData(we,j.map.painter,Y==="reloadTile"),R(null))})},A.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0},A.prototype.unloadTile=function(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})},A.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},A.prototype.serialize=function(){return T.extend({},this._options,{type:this.type,data:this._data})},A.prototype.hasTransition=function(){return!1},A}(T.Evented),nt=T.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ct=function(x){function A(w,R,j,Y){x.call(this),this.id=w,this.dispatcher=j,this.coordinates=R.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Y),this.options=R}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.load=function(w,R){var j=this;this._loaded=!1,this.fire(new T.Event("dataloading",{dataType:"source"})),this.url=this.options.url,T.getImage(this.map._requestManager.transformRequest(this.url,T.ResourceType.Image),function(Y,te){j._loaded=!0,Y?j.fire(new T.ErrorEvent(Y)):te&&(j.image=te,w&&(j.coordinates=w),R&&R(),j._finishLoading())})},A.prototype.loaded=function(){return this._loaded},A.prototype.updateImage=function(w){var R=this;return this.image&&w.url?(this.options.url=w.url,this.load(w.coordinates,function(){R.texture=null}),this):this},A.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new T.Event("data",{dataType:"source",sourceDataType:"metadata"})))},A.prototype.onAdd=function(w){this.map=w,this.load()},A.prototype.setCoordinates=function(w){var R=this;this.coordinates=w;var j=w.map(T.MercatorCoordinate.fromLngLat);this.tileID=function(te){for(var we=1/0,tt=1/0,At=-1/0,$t=-1/0,qt=0,rn=te;qt<rn.length;qt+=1){var kn=rn[qt];we=Math.min(we,kn.x),tt=Math.min(tt,kn.y),At=Math.max(At,kn.x),$t=Math.max($t,kn.y)}var Rn=Math.max(At-we,$t-tt),qn=Math.max(0,Math.floor(-Math.log(Rn)/Math.LN2)),wn=Math.pow(2,qn);return new T.CanonicalTileID(qn,Math.floor((we+At)/2*wn),Math.floor((tt+$t)/2*wn))}(j),this.minzoom=this.maxzoom=this.tileID.z;var Y=j.map(function(te){return R.tileID.getTilePoint(te)._round()});return this._boundsArray=new T.StructArrayLayout4i8,this._boundsArray.emplaceBack(Y[0].x,Y[0].y,0,0),this._boundsArray.emplaceBack(Y[1].x,Y[1].y,T.EXTENT,0),this._boundsArray.emplaceBack(Y[3].x,Y[3].y,0,T.EXTENT),this._boundsArray.emplaceBack(Y[2].x,Y[2].y,T.EXTENT,T.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new T.Event("data",{dataType:"source",sourceDataType:"content"})),this},A.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var w=this.map.painter.context,R=w.gl;for(var j in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=T.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T.Texture(w,this.image,R.RGBA),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE)),this.tiles){var Y=this.tiles[j];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}}},A.prototype.loadTile=function(w,R){this.tileID&&this.tileID.equals(w.tileID.canonical)?(this.tiles[String(w.tileID.wrap)]=w,w.buckets={},R(null)):(w.state="errored",R(null))},A.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},A.prototype.hasTransition=function(){return!1},A}(T.Evented),rt=function(x){function A(w,R,j,Y){x.call(this,w,R,j,Y),this.roundZoom=!0,this.type="video",this.options=R}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.load=function(){var w=this;this._loaded=!1;var R=this.options;this.urls=[];for(var j=0,Y=R.urls;j<Y.length;j+=1)this.urls.push(this.map._requestManager.transformRequest(Y[j],T.ResourceType.Source).url);T.getVideo(this.urls,function(te,we){w._loaded=!0,te?w.fire(new T.ErrorEvent(te)):we&&(w.video=we,w.video.loop=!0,w.video.setAttribute("playsinline",""),w.video.addEventListener("playing",function(){w.map.triggerRepaint()}),w.map&&w.video.play(),w._finishLoading())})},A.prototype.pause=function(){this.video&&this.video.pause()},A.prototype.play=function(){this.video&&this.video.play()},A.prototype.seek=function(w){if(this.video){var R=this.video.seekable;w<R.start(0)||w>R.end(0)?this.fire(new T.ErrorEvent(new T.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+R.start(0)+" and "+R.end(0)+"-second mark."))):this.video.currentTime=w}},A.prototype.getVideo=function(){return this.video},A.prototype.onAdd=function(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},A.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var w=this.map.painter.context,R=w.gl;for(var j in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=T.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE),R.texSubImage2D(R.TEXTURE_2D,0,0,0,R.RGBA,R.UNSIGNED_BYTE,this.video)):(this.texture=new T.Texture(w,this.video,R.RGBA),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE)),this.tiles){var Y=this.tiles[j];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}}},A.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},A.prototype.hasTransition=function(){return this.video&&!this.video.paused},A}(Ct),vt=function(x){function A(w,R,j,Y){x.call(this,w,R,j,Y),R.coordinates?Array.isArray(R.coordinates)&&R.coordinates.length===4&&!R.coordinates.some(function(te){return!Array.isArray(te)||te.length!==2||te.some(function(we){return typeof we!="number"})})||this.fire(new T.ErrorEvent(new T.ValidationError("sources."+w,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new T.ErrorEvent(new T.ValidationError("sources."+w,null,'missing required property "coordinates"'))),R.animate&&typeof R.animate!="boolean"&&this.fire(new T.ErrorEvent(new T.ValidationError("sources."+w,null,'optional "animate" property must be a boolean value'))),R.canvas?typeof R.canvas=="string"||R.canvas instanceof T.window.HTMLCanvasElement||this.fire(new T.ErrorEvent(new T.ValidationError("sources."+w,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new T.ErrorEvent(new T.ValidationError("sources."+w,null,'missing required property "canvas"'))),this.options=R,this.animate=R.animate===void 0||R.animate}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof T.window.HTMLCanvasElement?this.options.canvas:T.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new T.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},A.prototype.getCanvas=function(){return this.canvas},A.prototype.onAdd=function(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()},A.prototype.onRemove=function(){this.pause()},A.prototype.prepare=function(){var w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var R=this.map.painter.context,j=R.gl;for(var Y in this.boundsBuffer||(this.boundsBuffer=R.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=T.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T.Texture(R,this.canvas,j.RGBA,{premultiply:!0}),this.tiles){var te=this.tiles[Y];te.state!=="loaded"&&(te.state="loaded",te.texture=this.texture)}}},A.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},A.prototype.hasTransition=function(){return this._playing},A.prototype._hasInvalidDimensions=function(){for(var w=0,R=[this.canvas.width,this.canvas.height];w<R.length;w+=1){var j=R[w];if(isNaN(j)||j<=0)return!0}return!1},A}(Ct),Ve={vector:Pt,raster:Le,"raster-dem":pt,geojson:at,video:rt,image:Ct,canvas:vt};function hn(x,A){var w=T.identity([]);return T.translate(w,w,[1,1,0]),T.scale(w,w,[.5*x.width,.5*x.height,1]),T.multiply(w,w,x.calculatePosMatrix(A.toUnwrapped()))}function yn(x,A,w,R,j,Y){var te=function(qn,wn,Kn){if(qn)for(var mr=0,Or=qn;mr<Or.length;mr+=1){var Wr=wn[Or[mr]];if(Wr&&Wr.source===Kn&&Wr.type==="fill-extrusion")return!0}else for(var Ur in wn){var qr=wn[Ur];if(qr.source===Kn&&qr.type==="fill-extrusion")return!0}return!1}(j&&j.layers,A,x.id),we=Y.maxPitchScaleFactor(),tt=x.tilesIn(R,we,te);tt.sort(ir);for(var At=[],$t=0,qt=tt;$t<qt.length;$t+=1){var rn=qt[$t];At.push({wrappedTileID:rn.tileID.wrapped().key,queryResults:rn.tile.queryRenderedFeatures(A,w,x._state,rn.queryGeometry,rn.cameraQueryGeometry,rn.scale,j,Y,we,hn(x.transform,rn.tileID))})}var kn=function(qn){for(var wn={},Kn={},mr=0,Or=qn;mr<Or.length;mr+=1){var Wr=Or[mr],Ur=Wr.queryResults,qr=Wr.wrappedTileID,_i=Kn[qr]=Kn[qr]||{};for(var q in Ur)for(var ue=Ur[q],fe=_i[q]=_i[q]||{},Me=wn[q]=wn[q]||[],ze=0,Be=ue;ze<Be.length;ze+=1){var en=Be[ze];fe[en.featureIndex]||(fe[en.featureIndex]=!0,Me.push(en))}}return wn}(At);for(var Rn in kn)kn[Rn].forEach(function(qn){var wn=qn.feature,Kn=x.getFeatureState(wn.layer["source-layer"],wn.id);wn.source=wn.layer.source,wn.layer["source-layer"]&&(wn.sourceLayer=wn.layer["source-layer"]),wn.state=Kn});return kn}function ir(x,A){var w=x.tileID,R=A.tileID;return w.overscaledZ-R.overscaledZ||w.canonical.y-R.canonical.y||w.wrap-R.wrap||w.canonical.x-R.canonical.x}var Qn=function(x,A){this.max=x,this.onRemove=A,this.reset()};Qn.prototype.reset=function(){for(var x in this.data)for(var A=0,w=this.data[x];A<w.length;A+=1){var R=w[A];R.timeout&&clearTimeout(R.timeout),this.onRemove(R.value)}return this.data={},this.order=[],this},Qn.prototype.add=function(x,A,w){var R=this,j=x.wrapped().key;this.data[j]===void 0&&(this.data[j]=[]);var Y={value:A,timeout:void 0};if(w!==void 0&&(Y.timeout=setTimeout(function(){R.remove(x,Y)},w)),this.data[j].push(Y),this.order.push(j),this.order.length>this.max){var te=this._getAndRemoveByKey(this.order[0]);te&&this.onRemove(te)}return this},Qn.prototype.has=function(x){return x.wrapped().key in this.data},Qn.prototype.getAndRemove=function(x){return this.has(x)?this._getAndRemoveByKey(x.wrapped().key):null},Qn.prototype._getAndRemoveByKey=function(x){var A=this.data[x].shift();return A.timeout&&clearTimeout(A.timeout),this.data[x].length===0&&delete this.data[x],this.order.splice(this.order.indexOf(x),1),A.value},Qn.prototype.getByKey=function(x){var A=this.data[x];return A?A[0].value:null},Qn.prototype.get=function(x){return this.has(x)?this.data[x.wrapped().key][0].value:null},Qn.prototype.remove=function(x,A){if(!this.has(x))return this;var w=x.wrapped().key,R=A===void 0?0:this.data[w].indexOf(A),j=this.data[w][R];return this.data[w].splice(R,1),j.timeout&&clearTimeout(j.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(j.value),this.order.splice(this.order.indexOf(w),1),this},Qn.prototype.setMaxSize=function(x){for(this.max=x;this.order.length>this.max;){var A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this},Qn.prototype.filter=function(x){var A=[];for(var w in this.data)for(var R=0,j=this.data[w];R<j.length;R+=1){var Y=j[R];x(Y.value)||A.push(Y)}for(var te=0,we=A;te<we.length;te+=1){var tt=we[te];this.remove(tt.value.tileID,tt)}};var Ut=function(x,A,w){this.context=x;var R=x.gl;this.buffer=R.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),x.bindElementBuffer.set(this.buffer),R.bufferData(R.ELEMENT_ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete A.arrayBuffer};Ut.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ut.prototype.updateData=function(x){var A=this.context.gl;this.context.unbindVAO(),this.bind(),A.bufferSubData(A.ELEMENT_ARRAY_BUFFER,0,x.arrayBuffer)},Ut.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var En={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Tn=function(x,A,w,R){this.length=A.length,this.attributes=w,this.itemSize=A.bytesPerElement,this.dynamicDraw=R,this.context=x;var j=x.gl;this.buffer=j.createBuffer(),x.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete A.arrayBuffer};Tn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Tn.prototype.updateData=function(x){var A=this.context.gl;this.bind(),A.bufferSubData(A.ARRAY_BUFFER,0,x.arrayBuffer)},Tn.prototype.enableAttributes=function(x,A){for(var w=0;w<this.attributes.length;w++){var R=A.attributes[this.attributes[w].name];R!==void 0&&x.enableVertexAttribArray(R)}},Tn.prototype.setVertexAttribPointers=function(x,A,w){for(var R=0;R<this.attributes.length;R++){var j=this.attributes[R],Y=A.attributes[j.name];Y!==void 0&&x.vertexAttribPointer(Y,j.components,x[En[j.type]],!1,this.itemSize,j.offset+this.itemSize*(w||0))}},Tn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var lr=function(x){this.gl=x.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};lr.prototype.get=function(){return this.current},lr.prototype.set=function(x){},lr.prototype.getDefault=function(){return this.default},lr.prototype.setDefault=function(){this.set(this.default)};var ln=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return T.Color.transparent},A.prototype.set=function(w){var R=this.current;(w.r!==R.r||w.g!==R.g||w.b!==R.b||w.a!==R.a||this.dirty)&&(this.gl.clearColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},A}(lr),Lt=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return 1},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearDepth(w),this.current=w,this.dirty=!1)},A}(lr),bn=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return 0},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearStencil(w),this.current=w,this.dirty=!1)},A}(lr),Xe=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return[!0,!0,!0,!0]},A.prototype.set=function(w){var R=this.current;(w[0]!==R[0]||w[1]!==R[1]||w[2]!==R[2]||w[3]!==R[3]||this.dirty)&&(this.gl.colorMask(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},A}(lr),Fe=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!0},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthMask(w),this.current=w,this.dirty=!1)},A}(lr),on=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return 255},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.stencilMask(w),this.current=w,this.dirty=!1)},A}(lr),B=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},A.prototype.set=function(w){var R=this.current;(w.func!==R.func||w.ref!==R.ref||w.mask!==R.mask||this.dirty)&&(this.gl.stencilFunc(w.func,w.ref,w.mask),this.current=w,this.dirty=!1)},A}(lr),be=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){var w=this.gl;return[w.KEEP,w.KEEP,w.KEEP]},A.prototype.set=function(w){var R=this.current;(w[0]!==R[0]||w[1]!==R[1]||w[2]!==R[2]||this.dirty)&&(this.gl.stencilOp(w[0],w[1],w[2]),this.current=w,this.dirty=!1)},A}(lr),yt=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;w?R.enable(R.STENCIL_TEST):R.disable(R.STENCIL_TEST),this.current=w,this.dirty=!1}},A}(lr),Ee=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return[0,1]},A.prototype.set=function(w){var R=this.current;(w[0]!==R[0]||w[1]!==R[1]||this.dirty)&&(this.gl.depthRange(w[0],w[1]),this.current=w,this.dirty=!1)},A}(lr),Zt=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;w?R.enable(R.DEPTH_TEST):R.disable(R.DEPTH_TEST),this.current=w,this.dirty=!1}},A}(lr),_n=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.LESS},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthFunc(w),this.current=w,this.dirty=!1)},A}(lr),Sn=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;w?R.enable(R.BLEND):R.disable(R.BLEND),this.current=w,this.dirty=!1}},A}(lr),Bn=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){var w=this.gl;return[w.ONE,w.ZERO]},A.prototype.set=function(w){var R=this.current;(w[0]!==R[0]||w[1]!==R[1]||this.dirty)&&(this.gl.blendFunc(w[0],w[1]),this.current=w,this.dirty=!1)},A}(lr),or=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return T.Color.transparent},A.prototype.set=function(w){var R=this.current;(w.r!==R.r||w.g!==R.g||w.b!==R.b||w.a!==R.a||this.dirty)&&(this.gl.blendColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},A}(lr),dr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.FUNC_ADD},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.blendEquation(w),this.current=w,this.dirty=!1)},A}(lr),gr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;w?R.enable(R.CULL_FACE):R.disable(R.CULL_FACE),this.current=w,this.dirty=!1}},A}(lr),wr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.BACK},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.cullFace(w),this.current=w,this.dirty=!1)},A}(lr),Ar=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.CCW},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.frontFace(w),this.current=w,this.dirty=!1)},A}(lr),Ir=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)},A}(lr),Nr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.TEXTURE0},A.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.activeTexture(w),this.current=w,this.dirty=!1)},A}(lr),Yr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){var w=this.gl;return[0,0,w.drawingBufferWidth,w.drawingBufferHeight]},A.prototype.set=function(w){var R=this.current;(w[0]!==R[0]||w[1]!==R[1]||w[2]!==R[2]||w[3]!==R[3]||this.dirty)&&(this.gl.viewport(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},A}(lr),bt=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,w),this.current=w,this.dirty=!1}},A}(lr),ve=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.bindRenderbuffer(R.RENDERBUFFER,w),this.current=w,this.dirty=!1}},A}(lr),ye=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.bindTexture(R.TEXTURE_2D,w),this.current=w,this.dirty=!1}},A}(lr),Ke=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.bindBuffer(R.ARRAY_BUFFER,w),this.current=w,this.dirty=!1}},A}(lr),ht=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){var R=this.gl;R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,w),this.current=w,this.dirty=!1},A}(lr),xt=function(x){function A(w){x.call(this,w),this.vao=w.extVertexArrayObject}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(w){this.vao&&(w!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(w),this.current=w,this.dirty=!1)},A}(lr),Jt=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return 4},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.pixelStorei(R.UNPACK_ALIGNMENT,w),this.current=w,this.dirty=!1}},A}(lr),Dn=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),this.current=w,this.dirty=!1}},A}(lr),fr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(w){if(w!==this.current||this.dirty){var R=this.gl;R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,w),this.current=w,this.dirty=!1}},A}(lr),In=function(x){function A(w,R){x.call(this,w),this.context=w,this.parent=R}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A}(lr),ke=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.setDirty=function(){this.dirty=!0},A.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var R=this.gl;R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,w,0),this.current=w,this.dirty=!1}},A}(In),Pe=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var R=this.gl;R.framebufferRenderbuffer(R.FRAMEBUFFER,R.DEPTH_ATTACHMENT,R.RENDERBUFFER,w),this.current=w,this.dirty=!1}},A}(In),Ge=function(x,A,w,R){this.context=x,this.width=A,this.height=w;var j=this.framebuffer=x.gl.createFramebuffer();this.colorAttachment=new ke(x,j),R&&(this.depthAttachment=new Pe(x,j))};Ge.prototype.destroy=function(){var x=this.context.gl,A=this.colorAttachment.get();if(A&&x.deleteTexture(A),this.depthAttachment){var w=this.depthAttachment.get();w&&x.deleteRenderbuffer(w)}x.deleteFramebuffer(this.framebuffer)};var gt=function(x,A,w){this.func=x,this.mask=A,this.range=w};gt.ReadOnly=!1,gt.ReadWrite=!0,gt.disabled=new gt(519,gt.ReadOnly,[0,1]);var Bt=function(x,A,w,R,j,Y){this.test=x,this.ref=A,this.mask=w,this.fail=R,this.depthFail=j,this.pass=Y};Bt.disabled=new Bt({func:519,mask:0},0,0,7680,7680,7680);var an=function(x,A,w){this.blendFunction=x,this.blendColor=A,this.mask=w};an.disabled=new an(an.Replace=[1,0],T.Color.transparent,[!1,!1,!1,!1]),an.unblended=new an(an.Replace,T.Color.transparent,[!0,!0,!0,!0]),an.alphaBlended=new an([1,771],T.Color.transparent,[!0,!0,!0,!0]);var An=function(x,A,w){this.enable=x,this.mode=A,this.frontFace=w};An.disabled=new An(!1,1029,2305),An.backCCW=new An(!0,1029,2305);var kt=function(x){this.gl=x,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ln(this),this.clearDepth=new Lt(this),this.clearStencil=new bn(this),this.colorMask=new Xe(this),this.depthMask=new Fe(this),this.stencilMask=new on(this),this.stencilFunc=new B(this),this.stencilOp=new be(this),this.stencilTest=new yt(this),this.depthRange=new Ee(this),this.depthTest=new Zt(this),this.depthFunc=new _n(this),this.blend=new Sn(this),this.blendFunc=new Bn(this),this.blendColor=new or(this),this.blendEquation=new dr(this),this.cullFace=new gr(this),this.cullFaceSide=new wr(this),this.frontFace=new Ar(this),this.program=new Ir(this),this.activeTexture=new Nr(this),this.viewport=new Yr(this),this.bindFramebuffer=new bt(this),this.bindRenderbuffer=new ve(this),this.bindTexture=new ye(this),this.bindVertexBuffer=new Ke(this),this.bindElementBuffer=new ht(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xt(this),this.pixelStoreUnpack=new Jt(this),this.pixelStoreUnpackPremultiplyAlpha=new Dn(this),this.pixelStoreUnpackFlipY=new fr(this),this.extTextureFilterAnisotropic=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=x.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=x.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(x.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=x.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=x.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=x.getParameter(x.MAX_TEXTURE_SIZE)};kt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kt.prototype.createIndexBuffer=function(x,A){return new Ut(this,x,A)},kt.prototype.createVertexBuffer=function(x,A,w){return new Tn(this,x,A,w)},kt.prototype.createRenderbuffer=function(x,A,w){var R=this.gl,j=R.createRenderbuffer();return this.bindRenderbuffer.set(j),R.renderbufferStorage(R.RENDERBUFFER,x,A,w),this.bindRenderbuffer.set(null),j},kt.prototype.createFramebuffer=function(x,A,w){return new Ge(this,x,A,w)},kt.prototype.clear=function(x){var A=x.color,w=x.depth,R=this.gl,j=0;A&&(j|=R.COLOR_BUFFER_BIT,this.clearColor.set(A),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(j|=R.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),R.clear(j)},kt.prototype.setCullFace=function(x){x.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(x.mode),this.frontFace.set(x.frontFace))},kt.prototype.setDepthMode=function(x){x.func!==this.gl.ALWAYS||x.mask?(this.depthTest.set(!0),this.depthFunc.set(x.func),this.depthMask.set(x.mask),this.depthRange.set(x.range)):this.depthTest.set(!1)},kt.prototype.setStencilMode=function(x){x.test.func!==this.gl.ALWAYS||x.mask?(this.stencilTest.set(!0),this.stencilMask.set(x.mask),this.stencilOp.set([x.fail,x.depthFail,x.pass]),this.stencilFunc.set({func:x.test.func,ref:x.ref,mask:x.test.mask})):this.stencilTest.set(!1)},kt.prototype.setColorMode=function(x){T.deepEqual(x.blendFunction,an.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(x.blendFunction),this.blendColor.set(x.blendColor)),this.colorMask.set(x.mask)},kt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Dt=function(x){function A(w,R,j){var Y=this;x.call(this),this.id=w,this.dispatcher=j,this.on("data",function(te){te.dataType==="source"&&te.sourceDataType==="metadata"&&(Y._sourceLoaded=!0),Y._sourceLoaded&&!Y._paused&&te.dataType==="source"&&te.sourceDataType==="content"&&(Y.reload(),Y.transform&&Y.update(Y.transform))}),this.on("error",function(){Y._sourceErrored=!0}),this._source=function(te,we,tt,At){var $t=new Ve[we.type](te,we,tt,At);if($t.id!==te)throw new Error("Expected Source id to be "+te+" instead of "+$t.id);return T.bindAll(["load","abort","unload","serialize","prepare"],$t),$t}(w,R,j,this),this._tiles={},this._cache=new Qn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new T.SourceFeatureState}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.onAdd=function(w){this.map=w,this._maxTileCacheSize=w?w._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(w)},A.prototype.onRemove=function(w){this._source&&this._source.onRemove&&this._source.onRemove(w)},A.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var w in this._tiles){var R=this._tiles[w];if(R.state!=="loaded"&&R.state!=="errored")return!1}return!0},A.prototype.getSource=function(){return this._source},A.prototype.pause=function(){this._paused=!0},A.prototype.resume=function(){if(this._paused){var w=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,w&&this.reload(),this.transform&&this.update(this.transform)}},A.prototype._loadTile=function(w,R){return this._source.loadTile(w,R)},A.prototype._unloadTile=function(w){if(this._source.unloadTile)return this._source.unloadTile(w,function(){})},A.prototype._abortTile=function(w){if(this._source.abortTile)return this._source.abortTile(w,function(){})},A.prototype.serialize=function(){return this._source.serialize()},A.prototype.prepare=function(w){for(var R in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var j=this._tiles[R];j.upload(w),j.prepare(this.map.style.imageManager)}},A.prototype.getIds=function(){return T.values(this._tiles).map(function(w){return w.tileID}).sort(dn).map(function(w){return w.key})},A.prototype.getRenderableIds=function(w){var R=this,j=[];for(var Y in this._tiles)this._isIdRenderable(Y,w)&&j.push(this._tiles[Y]);return w?j.sort(function(te,we){var tt=te.tileID,At=we.tileID,$t=new T.Point(tt.canonical.x,tt.canonical.y)._rotate(R.transform.angle),qt=new T.Point(At.canonical.x,At.canonical.y)._rotate(R.transform.angle);return tt.overscaledZ-At.overscaledZ||qt.y-$t.y||qt.x-$t.x}).map(function(te){return te.tileID.key}):j.map(function(te){return te.tileID}).sort(dn).map(function(te){return te.key})},A.prototype.hasRenderableParent=function(w){var R=this.findLoadedParent(w,0);return!!R&&this._isIdRenderable(R.tileID.key)},A.prototype._isIdRenderable=function(w,R){return this._tiles[w]&&this._tiles[w].hasData()&&!this._coveredTiles[w]&&(R||!this._tiles[w].holdingForFade())},A.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var w in this._cache.reset(),this._tiles)this._tiles[w].state!=="errored"&&this._reloadTile(w,"reloading")},A.prototype._reloadTile=function(w,R){var j=this._tiles[w];j&&(j.state!=="loading"&&(j.state=R),this._loadTile(j,this._tileLoaded.bind(this,j,w,R)))},A.prototype._tileLoaded=function(w,R,j,Y){if(Y)return w.state="errored",void(Y.status!==404?this._source.fire(new T.ErrorEvent(Y,{tile:w})):this.update(this.transform));w.timeAdded=T.browser.now(),j==="expired"&&(w.refreshedUponExpiration=!0),this._setTileReloadTimer(R,w),this.getSource().type==="raster-dem"&&w.dem&&this._backfillDEM(w),this._state.initializeTileState(w,this.map?this.map.painter:null),this._source.fire(new T.Event("data",{dataType:"source",tile:w,coord:w.tileID}))},A.prototype._backfillDEM=function(w){for(var R=this.getRenderableIds(),j=0;j<R.length;j++){var Y=R[j];if(w.neighboringTiles&&w.neighboringTiles[Y]){var te=this.getTileByID(Y);we(w,te),we(te,w)}}function we(tt,At){tt.needsHillshadePrepare=!0;var $t=At.tileID.canonical.x-tt.tileID.canonical.x,qt=At.tileID.canonical.y-tt.tileID.canonical.y,rn=Math.pow(2,tt.tileID.canonical.z),kn=At.tileID.key;$t===0&&qt===0||Math.abs(qt)>1||(Math.abs($t)>1&&(Math.abs($t+rn)===1?$t+=rn:Math.abs($t-rn)===1&&($t-=rn)),At.dem&&tt.dem&&(tt.dem.backfillBorder(At.dem,$t,qt),tt.neighboringTiles&&tt.neighboringTiles[kn]&&(tt.neighboringTiles[kn].backfilled=!0)))}},A.prototype.getTile=function(w){return this.getTileByID(w.key)},A.prototype.getTileByID=function(w){return this._tiles[w]},A.prototype._retainLoadedChildren=function(w,R,j,Y){for(var te in this._tiles){var we=this._tiles[te];if(!(Y[te]||!we.hasData()||we.tileID.overscaledZ<=R||we.tileID.overscaledZ>j)){for(var tt=we.tileID;we&&we.tileID.overscaledZ>R+1;){var At=we.tileID.scaledTo(we.tileID.overscaledZ-1);(we=this._tiles[At.key])&&we.hasData()&&(tt=At)}for(var $t=tt;$t.overscaledZ>R;)if(w[($t=$t.scaledTo($t.overscaledZ-1)).key]){Y[tt.key]=tt;break}}}},A.prototype.findLoadedParent=function(w,R){if(w.key in this._loadedParentTiles){var j=this._loadedParentTiles[w.key];return j&&j.tileID.overscaledZ>=R?j:null}for(var Y=w.overscaledZ-1;Y>=R;Y--){var te=w.scaledTo(Y),we=this._getLoadedTile(te);if(we)return we}},A.prototype._getLoadedTile=function(w){var R=this._tiles[w.key];return R&&R.hasData()?R:this._cache.getByKey(w.wrapped().key)},A.prototype.updateCacheSize=function(w){var R=Math.ceil(w.width/this._source.tileSize)+1,j=Math.ceil(w.height/this._source.tileSize)+1,Y=Math.floor(R*j*5),te=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Y):Y;this._cache.setMaxSize(te)},A.prototype.handleWrapJump=function(w){var R=Math.round((w-(this._prevLng===void 0?w:this._prevLng))/360);if(this._prevLng=w,R){var j={};for(var Y in this._tiles){var te=this._tiles[Y];te.tileID=te.tileID.unwrapTo(te.tileID.wrap+R),j[te.tileID.key]=te}for(var we in this._tiles=j,this._timers)clearTimeout(this._timers[we]),delete this._timers[we];for(var tt in this._tiles)this._setTileReloadTimer(tt,this._tiles[tt])}},A.prototype.update=function(w){var R=this;if(this.transform=w,this._sourceLoaded&&!this._paused){var j;this.updateCacheSize(w),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?j=w.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(_i){return new T.OverscaledTileID(_i.canonical.z,_i.wrap,_i.canonical.z,_i.canonical.x,_i.canonical.y)}):(j=w.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(j=j.filter(function(_i){return R._source.hasTile(_i)}))):j=[];var Y=w.coveringZoomLevel(this._source),te=Math.max(Y-A.maxOverzooming,this._source.minzoom),we=Math.max(Y+A.maxUnderzooming,this._source.minzoom),tt=this._updateRetainedTiles(j,Y);if(He(this._source.type)){for(var At={},$t={},qt=0,rn=Object.keys(tt);qt<rn.length;qt+=1){var kn=rn[qt],Rn=tt[kn],qn=this._tiles[kn];if(qn&&!(qn.fadeEndTime&&qn.fadeEndTime<=T.browser.now())){var wn=this.findLoadedParent(Rn,te);wn&&(this._addTile(wn.tileID),At[wn.tileID.key]=wn.tileID),$t[kn]=Rn}}for(var Kn in this._retainLoadedChildren($t,Y,we,tt),At)tt[Kn]||(this._coveredTiles[Kn]=!0,tt[Kn]=At[Kn])}for(var mr in tt)this._tiles[mr].clearFadeHold();for(var Or=0,Wr=T.keysDifference(this._tiles,tt);Or<Wr.length;Or+=1){var Ur=Wr[Or],qr=this._tiles[Ur];qr.hasSymbolBuckets&&!qr.holdingForFade()?qr.setHoldDuration(this.map._fadeDuration):qr.hasSymbolBuckets&&!qr.symbolFadeFinished()||this._removeTile(Ur)}this._updateLoadedParentTileCache()}},A.prototype.releaseSymbolFadeTiles=function(){for(var w in this._tiles)this._tiles[w].holdingForFade()&&this._removeTile(w)},A.prototype._updateRetainedTiles=function(w,R){for(var j={},Y={},te=Math.max(R-A.maxOverzooming,this._source.minzoom),we=Math.max(R+A.maxUnderzooming,this._source.minzoom),tt={},At=0,$t=w;At<$t.length;At+=1){var qt=$t[At],rn=this._addTile(qt);j[qt.key]=qt,rn.hasData()||R<this._source.maxzoom&&(tt[qt.key]=qt)}this._retainLoadedChildren(tt,R,we,j);for(var kn=0,Rn=w;kn<Rn.length;kn+=1){var qn=Rn[kn],wn=this._tiles[qn.key];if(!wn.hasData()){if(R+1>this._source.maxzoom){var Kn=qn.children(this._source.maxzoom)[0],mr=this.getTile(Kn);if(mr&&mr.hasData()){j[Kn.key]=Kn;continue}}else{var Or=qn.children(this._source.maxzoom);if(j[Or[0].key]&&j[Or[1].key]&&j[Or[2].key]&&j[Or[3].key])continue}for(var Wr=wn.wasRequested(),Ur=qn.overscaledZ-1;Ur>=te;--Ur){var qr=qn.scaledTo(Ur);if(Y[qr.key]||(Y[qr.key]=!0,!(wn=this.getTile(qr))&&Wr&&(wn=this._addTile(qr)),wn&&(j[qr.key]=qr,Wr=wn.wasRequested(),wn.hasData())))break}}}return j},A.prototype._updateLoadedParentTileCache=function(){for(var w in this._loadedParentTiles={},this._tiles){for(var R=[],j=void 0,Y=this._tiles[w].tileID;Y.overscaledZ>0;){if(Y.key in this._loadedParentTiles){j=this._loadedParentTiles[Y.key];break}R.push(Y.key);var te=Y.scaledTo(Y.overscaledZ-1);if(j=this._getLoadedTile(te))break;Y=te}for(var we=0,tt=R;we<tt.length;we+=1)this._loadedParentTiles[tt[we]]=j}},A.prototype._addTile=function(w){var R=this._tiles[w.key];if(R)return R;(R=this._cache.getAndRemove(w))&&(this._setTileReloadTimer(w.key,R),R.tileID=w,this._state.initializeTileState(R,this.map?this.map.painter:null),this._cacheTimers[w.key]&&(clearTimeout(this._cacheTimers[w.key]),delete this._cacheTimers[w.key],this._setTileReloadTimer(w.key,R)));var j=!!R;return j||(R=new T.Tile(w,this._source.tileSize*w.overscaleFactor()),this._loadTile(R,this._tileLoaded.bind(this,R,w.key,R.state))),R?(R.uses++,this._tiles[w.key]=R,j||this._source.fire(new T.Event("dataloading",{tile:R,coord:R.tileID,dataType:"source"})),R):null},A.prototype._setTileReloadTimer=function(w,R){var j=this;w in this._timers&&(clearTimeout(this._timers[w]),delete this._timers[w]);var Y=R.getExpiryTimeout();Y&&(this._timers[w]=setTimeout(function(){j._reloadTile(w,"expired"),delete j._timers[w]},Y))},A.prototype._removeTile=function(w){var R=this._tiles[w];R&&(R.uses--,delete this._tiles[w],this._timers[w]&&(clearTimeout(this._timers[w]),delete this._timers[w]),R.uses>0||(R.hasData()&&R.state!=="reloading"?this._cache.add(R.tileID,R,R.getExpiryTimeout()):(R.aborted=!0,this._abortTile(R),this._unloadTile(R))))},A.prototype.clearTiles=function(){for(var w in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(w);this._cache.reset()},A.prototype.tilesIn=function(w,R,j){var Y=this,te=[],we=this.transform;if(!we)return te;for(var tt=j?we.getCameraQueryGeometry(w):w,At=w.map(function(Ur){return we.pointCoordinate(Ur)}),$t=tt.map(function(Ur){return we.pointCoordinate(Ur)}),qt=this.getIds(),rn=1/0,kn=1/0,Rn=-1/0,qn=-1/0,wn=0,Kn=$t;wn<Kn.length;wn+=1){var mr=Kn[wn];rn=Math.min(rn,mr.x),kn=Math.min(kn,mr.y),Rn=Math.max(Rn,mr.x),qn=Math.max(qn,mr.y)}for(var Or=function(Ur){var qr=Y._tiles[qt[Ur]];if(!qr.holdingForFade()){var _i=qr.tileID,q=Math.pow(2,we.zoom-qr.tileID.overscaledZ),ue=R*qr.queryPadding*T.EXTENT/qr.tileSize/q,fe=[_i.getTilePoint(new T.MercatorCoordinate(rn,kn)),_i.getTilePoint(new T.MercatorCoordinate(Rn,qn))];if(fe[0].x-ue<T.EXTENT&&fe[0].y-ue<T.EXTENT&&fe[1].x+ue>=0&&fe[1].y+ue>=0){var Me=At.map(function(Be){return _i.getTilePoint(Be)}),ze=$t.map(function(Be){return _i.getTilePoint(Be)});te.push({tile:qr,tileID:_i,queryGeometry:Me,cameraQueryGeometry:ze,scale:q})}}},Wr=0;Wr<qt.length;Wr++)Or(Wr);return te},A.prototype.getVisibleCoordinates=function(w){for(var R=this,j=this.getRenderableIds(w).map(function(tt){return R._tiles[tt].tileID}),Y=0,te=j;Y<te.length;Y+=1){var we=te[Y];we.posMatrix=this.transform.calculatePosMatrix(we.toUnwrapped())}return j},A.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(He(this._source.type))for(var w in this._tiles){var R=this._tiles[w];if(R.fadeEndTime!==void 0&&R.fadeEndTime>=T.browser.now())return!0}return!1},A.prototype.setFeatureState=function(w,R,j){this._state.updateState(w=w||"_geojsonTileLayer",R,j)},A.prototype.removeFeatureState=function(w,R,j){this._state.removeFeatureState(w=w||"_geojsonTileLayer",R,j)},A.prototype.getFeatureState=function(w,R){return this._state.getState(w=w||"_geojsonTileLayer",R)},A.prototype.setDependencies=function(w,R,j){var Y=this._tiles[w];Y&&Y.setDependencies(R,j)},A.prototype.reloadTilesForDependencies=function(w,R){for(var j in this._tiles)this._tiles[j].hasDependency(w,R)&&this._reloadTile(j,"reloading");this._cache.filter(function(Y){return!Y.hasDependency(w,R)})},A}(T.Evented);function dn(x,A){var w=Math.abs(2*x.wrap)-+(x.wrap<0),R=Math.abs(2*A.wrap)-+(A.wrap<0);return x.overscaledZ-A.overscaledZ||R-w||A.canonical.y-x.canonical.y||A.canonical.x-x.canonical.x}function He(x){return x==="raster"||x==="image"||x==="video"}function ei(){return new T.window.Worker(Th.workerUrl)}Dt.maxOverzooming=10,Dt.maxUnderzooming=3;var Tr="mapboxgl_preloaded_worker_pool",ii=function(){this.active={}};ii.prototype.acquire=function(x){if(!this.workers)for(this.workers=[];this.workers.length<ii.workerCount;)this.workers.push(new ei);return this.active[x]=!0,this.workers.slice()},ii.prototype.release=function(x){delete this.active[x],this.numActive()===0&&(this.workers.forEach(function(A){A.terminate()}),this.workers=null)},ii.prototype.isPreloaded=function(){return!!this.active[Tr]},ii.prototype.numActive=function(){return Object.keys(this.active).length};var Di,vi=Math.floor(T.browser.hardwareConcurrency/2);function Br(){return Di||(Di=new ii),Di}function Gr(x,A){var w={};for(var R in x)R!=="ref"&&(w[R]=x[R]);return T.refProperties.forEach(function(j){j in A&&(w[j]=A[j])}),w}function bi(x){x=x.slice();for(var A=Object.create(null),w=0;w<x.length;w++)A[x[w].id]=x[w];for(var R=0;R<x.length;R++)"ref"in x[R]&&(x[R]=Gr(x[R],A[x[R].ref]));return x}ii.workerCount=Math.max(Math.min(vi,6),1);var Ni={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Qa(x,A,w){w.push({command:Ni.addSource,args:[x,A[x]]})}function Xi(x,A,w){A.push({command:Ni.removeSource,args:[x]}),w[x]=!0}function ao(x,A,w,R){Xi(x,w,R),Qa(x,A,w)}function ko(x,A,w){var R;for(R in x[w])if(x[w].hasOwnProperty(R)&&R!=="data"&&!T.deepEqual(x[w][R],A[w][R]))return!1;for(R in A[w])if(A[w].hasOwnProperty(R)&&R!=="data"&&!T.deepEqual(x[w][R],A[w][R]))return!1;return!0}function Ba(x,A,w,R,j,Y){var te;for(te in A=A||{},x=x||{})x.hasOwnProperty(te)&&(T.deepEqual(x[te],A[te])||w.push({command:Y,args:[R,te,A[te],j]}));for(te in A)A.hasOwnProperty(te)&&!x.hasOwnProperty(te)&&(T.deepEqual(x[te],A[te])||w.push({command:Y,args:[R,te,A[te],j]}))}function mi(x){return x.id}function Je(x,A){return x[A.id]=A,x}var wt=function(x,A){this.reset(x,A)};wt.prototype.reset=function(x,A){this.points=x||[],this._distances=[0];for(var w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(A||0,.5*this.length),this.paddedLength=this.length-2*this.padding},wt.prototype.lerp=function(x){if(this.points.length===1)return this.points[0];x=T.clamp(x,0,1);for(var A=1,w=this._distances[A],R=x*this.paddedLength+this.padding;w<R&&A<this._distances.length;)w=this._distances[++A];var j=A-1,Y=this._distances[j],te=w-Y,we=te>0?(R-Y)/te:0;return this.points[j].mult(1-we).add(this.points[A].mult(we))};var Kt=function(x,A,w){var R=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(x/w),this.yCellCount=Math.ceil(A/w);for(var Y=0;Y<this.xCellCount*this.yCellCount;Y++)R.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=x,this.height=A,this.xScale=this.xCellCount/x,this.yScale=this.yCellCount/A,this.boxUid=0,this.circleUid=0};function Mn(x,A,w,R,j){var Y=T.create();return A?(T.scale(Y,Y,[1/j,1/j,1]),w||T.rotateZ(Y,Y,R.angle)):T.multiply(Y,R.labelPlaneMatrix,x),Y}function Yn(x,A,w,R,j){if(A){var Y=T.clone(x);return T.scale(Y,Y,[j,j,1]),w||T.rotateZ(Y,Y,-R.angle),Y}return R.glCoordMatrix}function Gn(x,A){var w=[x.x,x.y,0,1];hi(w,w,A);var R=w[3];return{point:new T.Point(w[0]/R,w[1]/R),signedDistanceFromCamera:R}}function Ht(x,A){return .5+x/A*.5}function On(x,A){var w=x[0]/x[3],R=x[1]/x[3];return w>=-A[0]&&w<=A[0]&&R>=-A[1]&&R<=A[1]}function Cr(x,A,w,R,j,Y,te,we){var tt=R?x.textSizeData:x.iconSizeData,At=T.evaluateSizeForZoom(tt,w.transform.zoom),$t=[256/w.width*2+1,256/w.height*2+1],qt=R?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;qt.clear();for(var rn=x.lineVertexArray,kn=R?x.text.placedSymbolArray:x.icon.placedSymbolArray,Rn=w.transform.width/w.transform.height,qn=!1,wn=0;wn<kn.length;wn++){var Kn=kn.get(wn);if(Kn.hidden||Kn.writingMode===T.WritingMode.vertical&&!qn)$i(Kn.numGlyphs,qt);else{qn=!1;var mr=[Kn.anchorX,Kn.anchorY,0,1];if(T.transformMat4(mr,mr,A),On(mr,$t)){var Or=Ht(w.transform.cameraToCenterDistance,mr[3]),Wr=T.evaluateSizeForFeature(tt,At,Kn),Ur=te?Wr/Or:Wr*Or,qr=new T.Point(Kn.anchorX,Kn.anchorY),_i=Gn(qr,j).point,q={},ue=aa(Kn,Ur,!1,we,A,j,Y,x.glyphOffsetArray,rn,qt,_i,qr,q,Rn);qn=ue.useVertical,(ue.notEnoughRoom||qn||ue.needsFlipping&&aa(Kn,Ur,!0,we,A,j,Y,x.glyphOffsetArray,rn,qt,_i,qr,q,Rn).notEnoughRoom)&&$i(Kn.numGlyphs,qt)}else $i(Kn.numGlyphs,qt)}}R?x.text.dynamicLayoutVertexBuffer.updateData(qt):x.icon.dynamicLayoutVertexBuffer.updateData(qt)}function Er(x,A,w,R,j,Y,te,we,tt,At,$t){var qt=we.glyphStartIndex+we.numGlyphs,rn=we.lineStartIndex,kn=we.lineStartIndex+we.lineLength,Rn=A.getoffsetX(we.glyphStartIndex),qn=A.getoffsetX(qt-1),wn=wi(x*Rn,w,R,j,Y,te,we.segment,rn,kn,tt,At,$t);if(!wn)return null;var Kn=wi(x*qn,w,R,j,Y,te,we.segment,rn,kn,tt,At,$t);return Kn?{first:wn,last:Kn}:null}function gi(x,A,w,R){return x===T.WritingMode.horizontal&&Math.abs(w.y-A.y)>Math.abs(w.x-A.x)*R?{useVertical:!0}:(x===T.WritingMode.vertical?A.y<w.y:A.x>w.x)?{needsFlipping:!0}:null}function aa(x,A,w,R,j,Y,te,we,tt,At,$t,qt,rn,kn){var Rn,qn=A/24,wn=x.lineOffsetX*qn,Kn=x.lineOffsetY*qn;if(x.numGlyphs>1){var mr=x.glyphStartIndex+x.numGlyphs,Or=x.lineStartIndex,Wr=x.lineStartIndex+x.lineLength,Ur=Er(qn,we,wn,Kn,w,$t,qt,x,tt,Y,rn);if(!Ur)return{notEnoughRoom:!0};var qr=Gn(Ur.first.point,te).point,_i=Gn(Ur.last.point,te).point;if(R&&!w){var q=gi(x.writingMode,qr,_i,kn);if(q)return q}Rn=[Ur.first];for(var ue=x.glyphStartIndex+1;ue<mr-1;ue++)Rn.push(wi(qn*we.getoffsetX(ue),wn,Kn,w,$t,qt,x.segment,Or,Wr,tt,Y,rn));Rn.push(Ur.last)}else{if(R&&!w){var fe=Gn(qt,j).point,Me=x.lineStartIndex+x.segment+1,ze=new T.Point(tt.getx(Me),tt.gety(Me)),Be=Gn(ze,j),en=Be.signedDistanceFromCamera>0?Be.point:ya(qt,ze,fe,1,j),Qt=gi(x.writingMode,fe,en,kn);if(Qt)return Qt}var Xn=wi(qn*we.getoffsetX(x.glyphStartIndex),wn,Kn,w,$t,qt,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,tt,Y,rn);if(!Xn)return{notEnoughRoom:!0};Rn=[Xn]}for(var pn=0,sr=Rn;pn<sr.length;pn+=1){var br=sr[pn];T.addDynamicAttributes(At,br.point,br.angle)}return{}}function ya(x,A,w,R,j){var Y=Gn(x.add(x.sub(A)._unit()),j).point,te=w.sub(Y);return w.add(te._mult(R/te.mag()))}function wi(x,A,w,R,j,Y,te,we,tt,At,$t,qt){var rn=R?x-A:x+A,kn=rn>0?1:-1,Rn=0;R&&(kn*=-1,Rn=Math.PI),kn<0&&(Rn+=Math.PI);for(var qn=kn>0?we+te:we+te+1,wn=j,Kn=j,mr=0,Or=0,Wr=Math.abs(rn),Ur=[];mr+Or<=Wr;){if((qn+=kn)<we||qn>=tt)return null;if(Kn=wn,Ur.push(wn),(wn=qt[qn])===void 0){var qr=new T.Point(At.getx(qn),At.gety(qn)),_i=Gn(qr,$t);if(_i.signedDistanceFromCamera>0)wn=qt[qn]=_i.point;else{var q=qn-kn;wn=ya(mr===0?Y:new T.Point(At.getx(q),At.gety(q)),qr,Kn,Wr-mr+1,$t)}}mr+=Or,Or=Kn.dist(wn)}var ue=(Wr-mr)/Or,fe=wn.sub(Kn),Me=fe.mult(ue)._add(Kn);Me._add(fe._unit()._perp()._mult(w*kn));var ze=Rn+Math.atan2(wn.y-Kn.y,wn.x-Kn.x);return Ur.push(Me),{point:Me,angle:ze,path:Ur}}Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(x,A,w,R,j){this._forEachCell(A,w,R,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(x),this.bboxes.push(A),this.bboxes.push(w),this.bboxes.push(R),this.bboxes.push(j)},Kt.prototype.insertCircle=function(x,A,w,R){this._forEachCell(A-R,w-R,A+R,w+R,this._insertCircleCell,this.circleUid++),this.circleKeys.push(x),this.circles.push(A),this.circles.push(w),this.circles.push(R)},Kt.prototype._insertBoxCell=function(x,A,w,R,j,Y){this.boxCells[j].push(Y)},Kt.prototype._insertCircleCell=function(x,A,w,R,j,Y){this.circleCells[j].push(Y)},Kt.prototype._query=function(x,A,w,R,j,Y){if(w<0||x>this.width||R<0||A>this.height)return!j&&[];var te=[];if(x<=0&&A<=0&&this.width<=w&&this.height<=R){if(j)return!0;for(var we=0;we<this.boxKeys.length;we++)te.push({key:this.boxKeys[we],x1:this.bboxes[4*we],y1:this.bboxes[4*we+1],x2:this.bboxes[4*we+2],y2:this.bboxes[4*we+3]});for(var tt=0;tt<this.circleKeys.length;tt++){var At=this.circles[3*tt],$t=this.circles[3*tt+1],qt=this.circles[3*tt+2];te.push({key:this.circleKeys[tt],x1:At-qt,y1:$t-qt,x2:At+qt,y2:$t+qt})}return Y?te.filter(Y):te}return this._forEachCell(x,A,w,R,this._queryCell,te,{hitTest:j,seenUids:{box:{},circle:{}}},Y),j?te.length>0:te},Kt.prototype._queryCircle=function(x,A,w,R,j){var Y=x-w,te=x+w,we=A-w,tt=A+w;if(te<0||Y>this.width||tt<0||we>this.height)return!R&&[];var At=[];return this._forEachCell(Y,we,te,tt,this._queryCellCircle,At,{hitTest:R,circle:{x,y:A,radius:w},seenUids:{box:{},circle:{}}},j),R?At.length>0:At},Kt.prototype.query=function(x,A,w,R,j){return this._query(x,A,w,R,!1,j)},Kt.prototype.hitTest=function(x,A,w,R,j){return this._query(x,A,w,R,!0,j)},Kt.prototype.hitTestCircle=function(x,A,w,R){return this._queryCircle(x,A,w,!0,R)},Kt.prototype._queryCell=function(x,A,w,R,j,Y,te,we){var tt=te.seenUids,At=this.boxCells[j];if(At!==null)for(var $t=this.bboxes,qt=0,rn=At;qt<rn.length;qt+=1){var kn=rn[qt];if(!tt.box[kn]){tt.box[kn]=!0;var Rn=4*kn;if(x<=$t[Rn+2]&&A<=$t[Rn+3]&&w>=$t[Rn+0]&&R>=$t[Rn+1]&&(!we||we(this.boxKeys[kn]))){if(te.hitTest)return Y.push(!0),!0;Y.push({key:this.boxKeys[kn],x1:$t[Rn],y1:$t[Rn+1],x2:$t[Rn+2],y2:$t[Rn+3]})}}}var qn=this.circleCells[j];if(qn!==null)for(var wn=this.circles,Kn=0,mr=qn;Kn<mr.length;Kn+=1){var Or=mr[Kn];if(!tt.circle[Or]){tt.circle[Or]=!0;var Wr=3*Or;if(this._circleAndRectCollide(wn[Wr],wn[Wr+1],wn[Wr+2],x,A,w,R)&&(!we||we(this.circleKeys[Or]))){if(te.hitTest)return Y.push(!0),!0;var Ur=wn[Wr],qr=wn[Wr+1],_i=wn[Wr+2];Y.push({key:this.circleKeys[Or],x1:Ur-_i,y1:qr-_i,x2:Ur+_i,y2:qr+_i})}}}},Kt.prototype._queryCellCircle=function(x,A,w,R,j,Y,te,we){var tt=te.circle,At=te.seenUids,$t=this.boxCells[j];if($t!==null)for(var qt=this.bboxes,rn=0,kn=$t;rn<kn.length;rn+=1){var Rn=kn[rn];if(!At.box[Rn]){At.box[Rn]=!0;var qn=4*Rn;if(this._circleAndRectCollide(tt.x,tt.y,tt.radius,qt[qn+0],qt[qn+1],qt[qn+2],qt[qn+3])&&(!we||we(this.boxKeys[Rn])))return Y.push(!0),!0}}var wn=this.circleCells[j];if(wn!==null)for(var Kn=this.circles,mr=0,Or=wn;mr<Or.length;mr+=1){var Wr=Or[mr];if(!At.circle[Wr]){At.circle[Wr]=!0;var Ur=3*Wr;if(this._circlesCollide(Kn[Ur],Kn[Ur+1],Kn[Ur+2],tt.x,tt.y,tt.radius)&&(!we||we(this.circleKeys[Wr])))return Y.push(!0),!0}}},Kt.prototype._forEachCell=function(x,A,w,R,j,Y,te,we){for(var tt=this._convertToXCellCoord(x),At=this._convertToYCellCoord(A),$t=this._convertToXCellCoord(w),qt=this._convertToYCellCoord(R),rn=tt;rn<=$t;rn++)for(var kn=At;kn<=qt;kn++)if(j.call(this,x,A,w,R,this.xCellCount*kn+rn,Y,te,we))return},Kt.prototype._convertToXCellCoord=function(x){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(x*this.xScale)))},Kt.prototype._convertToYCellCoord=function(x){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(x*this.yScale)))},Kt.prototype._circlesCollide=function(x,A,w,R,j,Y){var te=R-x,we=j-A,tt=w+Y;return tt*tt>te*te+we*we},Kt.prototype._circleAndRectCollide=function(x,A,w,R,j,Y,te){var we=(Y-R)/2,tt=Math.abs(x-(R+we));if(tt>we+w)return!1;var At=(te-j)/2,$t=Math.abs(A-(j+At));if($t>At+w)return!1;if(tt<=we||$t<=At)return!0;var qt=tt-we,rn=$t-At;return qt*qt+rn*rn<=w*w};var sa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $i(x,A){for(var w=0;w<x;w++){var R=A.length;A.resize(R+4),A.float32.set(sa,3*R)}}function hi(x,A,w){var R=A[0],j=A[1];return x[0]=w[0]*R+w[4]*j+w[12],x[1]=w[1]*R+w[5]*j+w[13],x[3]=w[3]*R+w[7]*j+w[15],x}var fa=function(x,A,w){A===void 0&&(A=new Kt(x.width+200,x.height+200,25)),w===void 0&&(w=new Kt(x.width+200,x.height+200,25)),this.transform=x,this.grid=A,this.ignoredGrid=w,this.pitchfactor=Math.cos(x._pitch)*x.cameraToCenterDistance,this.screenRightBoundary=x.width+100,this.screenBottomBoundary=x.height+100,this.gridRightBoundary=x.width+200,this.gridBottomBoundary=x.height+200};function ea(x,A,w){return A*(T.EXTENT/(x.tileSize*Math.pow(2,w-x.tileID.overscaledZ)))}fa.prototype.placeCollisionBox=function(x,A,w,R,j){var Y=this.projectAndGetPerspectiveRatio(R,x.anchorPointX,x.anchorPointY),te=w*Y.perspectiveRatio,we=x.x1*te+Y.point.x,tt=x.y1*te+Y.point.y,At=x.x2*te+Y.point.x,$t=x.y2*te+Y.point.y;return!this.isInsideGrid(we,tt,At,$t)||!A&&this.grid.hitTest(we,tt,At,$t,j)?{box:[],offscreen:!1}:{box:[we,tt,At,$t],offscreen:this.isOffscreen(we,tt,At,$t)}},fa.prototype.placeCollisionCircles=function(x,A,w,R,j,Y,te,we,tt,At,$t,qt,rn){var kn=[],Rn=new T.Point(A.anchorX,A.anchorY),qn=Gn(Rn,Y),wn=Ht(this.transform.cameraToCenterDistance,qn.signedDistanceFromCamera),Kn=(At?j/wn:j*wn)/T.ONE_EM,mr=Gn(Rn,te).point,Or=Er(Kn,R,A.lineOffsetX*Kn,A.lineOffsetY*Kn,!1,mr,Rn,A,w,te,{}),Wr=!1,Ur=!1,qr=!0;if(Or){for(var _i=.5*qt*wn+rn,q=new T.Point(-100,-100),ue=new T.Point(this.screenRightBoundary,this.screenBottomBoundary),fe=new wt,Me=Or.first,ze=Or.last,Be=[],en=Me.path.length-1;en>=1;en--)Be.push(Me.path[en]);for(var Qt=1;Qt<ze.path.length;Qt++)Be.push(ze.path[Qt]);var Xn=2.5*_i;if(we){var pn=Be.map(function(es){return Gn(es,we)});Be=pn.some(function(es){return es.signedDistanceFromCamera<=0})?[]:pn.map(function(es){return es.point})}var sr=[];if(Be.length>0){for(var br=Be[0].clone(),Ai=Be[0].clone(),xi=1;xi<Be.length;xi++)br.x=Math.min(br.x,Be[xi].x),br.y=Math.min(br.y,Be[xi].y),Ai.x=Math.max(Ai.x,Be[xi].x),Ai.y=Math.max(Ai.y,Be[xi].y);sr=br.x>=q.x&&Ai.x<=ue.x&&br.y>=q.y&&Ai.y<=ue.y?[Be]:Ai.x<q.x||br.x>ue.x||Ai.y<q.y||br.y>ue.y?[]:T.clipLine([Be],q.x,q.y,ue.x,ue.y)}for(var ci=0,da=sr;ci<da.length;ci+=1){var ua;fe.reset(da[ci],.25*_i),ua=fe.length<=.5*_i?1:Math.ceil(fe.paddedLength/Xn)+1;for(var la=0;la<ua;la++){var Ua=la/Math.max(ua-1,1),$a=fe.lerp(Ua),oo=$a.x+100,ms=$a.y+100;kn.push(oo,ms,_i,0);var bs=oo-_i,Fs=ms-_i,rs=oo+_i,So=ms+_i;if(qr=qr&&this.isOffscreen(bs,Fs,rs,So),Ur=Ur||this.isInsideGrid(bs,Fs,rs,So),!x&&this.grid.hitTestCircle(oo,ms,_i,$t)&&(Wr=!0,!tt))return{circles:[],offscreen:!1,collisionDetected:Wr}}}}return{circles:!tt&&Wr||!Ur?[]:kn,offscreen:qr,collisionDetected:Wr}},fa.prototype.queryRenderedSymbols=function(x){if(x.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var A=[],w=1/0,R=1/0,j=-1/0,Y=-1/0,te=0,we=x;te<we.length;te+=1){var tt=we[te],At=new T.Point(tt.x+100,tt.y+100);w=Math.min(w,At.x),R=Math.min(R,At.y),j=Math.max(j,At.x),Y=Math.max(Y,At.y),A.push(At)}for(var $t={},qt={},rn=0,kn=this.grid.query(w,R,j,Y).concat(this.ignoredGrid.query(w,R,j,Y));rn<kn.length;rn+=1){var Rn=kn[rn],qn=Rn.key;if($t[qn.bucketInstanceId]===void 0&&($t[qn.bucketInstanceId]={}),!$t[qn.bucketInstanceId][qn.featureIndex]){var wn=[new T.Point(Rn.x1,Rn.y1),new T.Point(Rn.x2,Rn.y1),new T.Point(Rn.x2,Rn.y2),new T.Point(Rn.x1,Rn.y2)];T.polygonIntersectsPolygon(A,wn)&&($t[qn.bucketInstanceId][qn.featureIndex]=!0,qt[qn.bucketInstanceId]===void 0&&(qt[qn.bucketInstanceId]=[]),qt[qn.bucketInstanceId].push(qn.featureIndex))}}return qt},fa.prototype.insertCollisionBox=function(x,A,w,R,j){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:R,collisionGroupID:j},x[0],x[1],x[2],x[3])},fa.prototype.insertCollisionCircles=function(x,A,w,R,j){for(var Y=A?this.ignoredGrid:this.grid,te={bucketInstanceId:w,featureIndex:R,collisionGroupID:j},we=0;we<x.length;we+=4)Y.insertCircle(te,x[we],x[we+1],x[we+2])},fa.prototype.projectAndGetPerspectiveRatio=function(x,A,w){var R=[A,w,0,1];return hi(R,R,x),{point:new T.Point((R[0]/R[3]+1)/2*this.transform.width+100,(-R[1]/R[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/R[3]*.5}},fa.prototype.isOffscreen=function(x,A,w,R){return w<100||x>=this.screenRightBoundary||R<100||A>this.screenBottomBoundary},fa.prototype.isInsideGrid=function(x,A,w,R){return w>=0&&x<this.gridRightBoundary&&R>=0&&A<this.gridBottomBoundary},fa.prototype.getViewportMatrix=function(){var x=T.identity([]);return T.translate(x,x,[-100,-100,0]),x};var ka=function(x,A,w,R){this.opacity=x?Math.max(0,Math.min(1,x.opacity+(x.placed?A:-A))):R&&w?1:0,this.placed=w};ka.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bi=function(x,A,w,R,j){this.text=new ka(x?x.text:null,A,w,j),this.icon=new ka(x?x.icon:null,A,R,j)};Bi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _a=function(x,A,w){this.text=x,this.icon=A,this.skipFade=w},to=function(){this.invProjMatrix=T.create(),this.viewportMatrix=T.create(),this.circles=[]},Ae=function(x,A,w,R,j){this.bucketInstanceId=x,this.featureIndex=A,this.sourceLayerIndex=w,this.bucketIndex=R,this.tileID=j},ns=function(x){this.crossSourceCollisions=x,this.maxGroupID=0,this.collisionGroups={}};function Oo(x,A,w,R,j){var Y=T.getAnchorAlignment(x),te=-(Y.horizontalAlign-.5)*A,we=-(Y.verticalAlign-.5)*w,tt=T.evaluateVariableOffset(x,R);return new T.Point(te+tt[0]*j,we+tt[1]*j)}function Ms(x,A,w,R,j,Y){var te=x.x1,we=x.x2,tt=x.y1,At=x.y2,$t=x.anchorPointX,qt=x.anchorPointY,rn=new T.Point(A,w);return R&&rn._rotate(j?Y:-Y),{x1:te+rn.x,y1:tt+rn.y,x2:we+rn.x,y2:At+rn.y,anchorPointX:$t,anchorPointY:qt}}ns.prototype.get=function(x){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[x]){var A=++this.maxGroupID;this.collisionGroups[x]={ID:A,predicate:function(w){return w.collisionGroupID===A}}}return this.collisionGroups[x]};var ps=function(x,A,w,R){this.transform=x.clone(),this.collisionIndex=new fa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=A,this.retainedQueryData={},this.collisionGroups=new ns(w),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}};function jt(x,A,w,R,j){x.emplaceBack(A?1:0,w?1:0,R||0,j||0),x.emplaceBack(A?1:0,w?1:0,R||0,j||0),x.emplaceBack(A?1:0,w?1:0,R||0,j||0),x.emplaceBack(A?1:0,w?1:0,R||0,j||0)}ps.prototype.getBucketParts=function(x,A,w,R){var j=w.getBucket(A),Y=w.latestFeatureIndex;if(j&&Y&&A.id===j.layerIds[0]){var te=w.collisionBoxArray,we=j.layers[0].layout,tt=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),At=w.tileSize/T.EXTENT,$t=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),qt=we.get("text-pitch-alignment")==="map",rn=we.get("text-rotation-alignment")==="map",kn=ea(w,1,this.transform.zoom),Rn=Mn($t,qt,rn,this.transform,kn),qn=null;if(qt){var wn=Yn($t,qt,rn,this.transform,kn);qn=T.multiply([],this.transform.labelPlaneMatrix,wn)}this.retainedQueryData[j.bucketInstanceId]=new Ae(j.bucketInstanceId,Y,j.sourceLayerIndex,j.index,w.tileID);var Kn={bucket:j,layout:we,posMatrix:$t,textLabelPlaneMatrix:Rn,labelToScreenMatrix:qn,scale:tt,textPixelRatio:At,holdingForFade:w.holdingForFade(),collisionBoxArray:te,partiallyEvaluatedTextSize:T.evaluateSizeForZoom(j.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(j.sourceID)};if(R)for(var mr=0,Or=j.sortKeyRanges;mr<Or.length;mr+=1){var Wr=Or[mr];x.push({sortKey:Wr.sortKey,symbolInstanceStart:Wr.symbolInstanceStart,symbolInstanceEnd:Wr.symbolInstanceEnd,parameters:Kn})}else x.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:Kn})}},ps.prototype.attemptAnchorPlacement=function(x,A,w,R,j,Y,te,we,tt,At,$t,qt,rn,kn,Rn){var qn,wn=[qt.textOffset0,qt.textOffset1],Kn=Oo(x,w,R,wn,j),mr=this.collisionIndex.placeCollisionBox(Ms(A,Kn.x,Kn.y,Y,te,this.transform.angle),$t,we,tt,At.predicate);if(!Rn||this.collisionIndex.placeCollisionBox(Ms(Rn,Kn.x,Kn.y,Y,te,this.transform.angle),$t,we,tt,At.predicate).box.length!==0)return mr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[qt.crossTileID]&&this.prevPlacement.placements[qt.crossTileID]&&this.prevPlacement.placements[qt.crossTileID].text&&(qn=this.prevPlacement.variableOffsets[qt.crossTileID].anchor),this.variableOffsets[qt.crossTileID]={textOffset:wn,width:w,height:R,anchor:x,textBoxScale:j,prevAnchor:qn},this.markUsedJustification(rn,x,qt,kn),rn.allowVerticalPlacement&&(this.markUsedOrientation(rn,kn,qt),this.placedOrientations[qt.crossTileID]=kn),{shift:Kn,placedGlyphBoxes:mr}):void 0},ps.prototype.placeLayerBucketPart=function(x,A,w){var R=this,j=x.parameters,Y=j.bucket,te=j.layout,we=j.posMatrix,tt=j.textLabelPlaneMatrix,At=j.labelToScreenMatrix,$t=j.textPixelRatio,qt=j.holdingForFade,rn=j.collisionBoxArray,kn=j.partiallyEvaluatedTextSize,Rn=j.collisionGroup,qn=te.get("text-optional"),wn=te.get("icon-optional"),Kn=te.get("text-allow-overlap"),mr=te.get("icon-allow-overlap"),Or=te.get("text-rotation-alignment")==="map",Wr=te.get("text-pitch-alignment")==="map",Ur=te.get("icon-text-fit")!=="none",qr=te.get("symbol-z-order")==="viewport-y",_i=Kn&&(mr||!Y.hasIconData()||wn),q=mr&&(Kn||!Y.hasTextData()||qn);!Y.collisionArrays&&rn&&Y.deserializeCollisionBoxes(rn);var ue=function(Qt,Xn){if(!A[Qt.crossTileID])if(qt)R.placements[Qt.crossTileID]=new _a(!1,!1,!1);else{var pn,sr=!1,br=!1,Ai=!0,xi=null,ci={box:null,offscreen:null},da={box:null,offscreen:null},ua=null,la=null,Ua=0,$a=0,oo=0;Xn.textFeatureIndex?Ua=Xn.textFeatureIndex:Qt.useRuntimeCollisionCircles&&(Ua=Qt.featureIndex),Xn.verticalTextFeatureIndex&&($a=Xn.verticalTextFeatureIndex);var ms=Xn.textBox;if(ms){var bs=function(ss){var Dl=T.WritingMode.horizontal;if(Y.allowVerticalPlacement&&!ss&&R.prevPlacement){var vl=R.prevPlacement.placedOrientations[Qt.crossTileID];vl&&(R.placedOrientations[Qt.crossTileID]=vl,R.markUsedOrientation(Y,Dl=vl,Qt))}return Dl},Fs=function(ss,Dl){if(Y.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Xn.verticalTextBox)for(var vl=0,nh=Y.writingModes;vl<nh.length&&(nh[vl]===T.WritingMode.vertical?(ci=Dl(),da=ci):ci=ss(),!(ci&&ci.box&&ci.box.length));vl+=1);else ci=ss()};if(te.get("text-variable-anchor")){var rs=te.get("text-variable-anchor");if(R.prevPlacement&&R.prevPlacement.variableOffsets[Qt.crossTileID]){var So=R.prevPlacement.variableOffsets[Qt.crossTileID];rs.indexOf(So.anchor)>0&&(rs=rs.filter(function(ss){return ss!==So.anchor})).unshift(So.anchor)}var es=function(ss,Dl,vl){for(var nh=ss.x2-ss.x1,Wp=ss.y2-ss.y1,Ff=Qt.textBoxScale,yv=Ur&&!mr?Dl:null,Ld={box:[],offscreen:!1},Yh=Kn?2*rs.length:rs.length,zf=0;zf<Yh;++zf){var $p=R.attemptAnchorPlacement(rs[zf%rs.length],ss,nh,Wp,Ff,Or,Wr,$t,we,Rn,zf>=rs.length,Qt,Y,vl,yv);if($p&&(Ld=$p.placedGlyphBoxes)&&Ld.box&&Ld.box.length){sr=!0,xi=$p.shift;break}}return Ld};Fs(function(){return es(ms,Xn.iconBox,T.WritingMode.horizontal)},function(){var ss=Xn.verticalTextBox;return Y.allowVerticalPlacement&&!(ci&&ci.box&&ci.box.length)&&Qt.numVerticalGlyphVertices>0&&ss?es(ss,Xn.verticalIconBox,T.WritingMode.vertical):{box:null,offscreen:null}}),ci&&(sr=ci.box,Ai=ci.offscreen);var Tu=bs(ci&&ci.box);if(!sr&&R.prevPlacement){var rl=R.prevPlacement.variableOffsets[Qt.crossTileID];rl&&(R.variableOffsets[Qt.crossTileID]=rl,R.markUsedJustification(Y,rl.anchor,Qt,Tu))}}else{var bu=function(ss,Dl){var vl=R.collisionIndex.placeCollisionBox(ss,Kn,$t,we,Rn.predicate);return vl&&vl.box&&vl.box.length&&(R.markUsedOrientation(Y,Dl,Qt),R.placedOrientations[Qt.crossTileID]=Dl),vl};Fs(function(){return bu(ms,T.WritingMode.horizontal)},function(){var ss=Xn.verticalTextBox;return Y.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&ss?bu(ss,T.WritingMode.vertical):{box:null,offscreen:null}}),bs(ci&&ci.box&&ci.box.length)}}if(sr=(pn=ci)&&pn.box&&pn.box.length>0,Ai=pn&&pn.offscreen,Qt.useRuntimeCollisionCircles){var Du=Y.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),Ll=T.evaluateSizeForFeature(Y.textSizeData,kn,Du),xc=te.get("text-padding");ua=R.collisionIndex.placeCollisionCircles(Kn,Du,Y.lineVertexArray,Y.glyphOffsetArray,Ll,we,tt,At,w,Wr,Rn.predicate,Qt.collisionCircleDiameter,xc),sr=Kn||ua.circles.length>0&&!ua.collisionDetected,Ai=Ai&&ua.offscreen}if(Xn.iconFeatureIndex&&(oo=Xn.iconFeatureIndex),Xn.iconBox){var ef=function(ss){var Dl=Ur&&xi?Ms(ss,xi.x,xi.y,Or,Wr,R.transform.angle):ss;return R.collisionIndex.placeCollisionBox(Dl,mr,$t,we,Rn.predicate)};br=da&&da.box&&da.box.length&&Xn.verticalIconBox?(la=ef(Xn.verticalIconBox)).box.length>0:(la=ef(Xn.iconBox)).box.length>0,Ai=Ai&&la.offscreen}var pl=qn||Qt.numHorizontalGlyphVertices===0&&Qt.numVerticalGlyphVertices===0,Au=wn||Qt.numIconVertices===0;if(pl||Au?Au?pl||(br=br&&sr):sr=br&&sr:br=sr=br&&sr,sr&&pn&&pn.box&&R.collisionIndex.insertCollisionBox(pn.box,te.get("text-ignore-placement"),Y.bucketInstanceId,da&&da.box&&$a?$a:Ua,Rn.ID),br&&la&&R.collisionIndex.insertCollisionBox(la.box,te.get("icon-ignore-placement"),Y.bucketInstanceId,oo,Rn.ID),ua&&(sr&&R.collisionIndex.insertCollisionCircles(ua.circles,te.get("text-ignore-placement"),Y.bucketInstanceId,Ua,Rn.ID),w)){var ac=Y.bucketInstanceId,Dc=R.collisionCircleArrays[ac];Dc===void 0&&(Dc=R.collisionCircleArrays[ac]=new to);for(var xf=0;xf<ua.circles.length;xf+=4)Dc.circles.push(ua.circles[xf+0]),Dc.circles.push(ua.circles[xf+1]),Dc.circles.push(ua.circles[xf+2]),Dc.circles.push(ua.collisionDetected?1:0)}R.placements[Qt.crossTileID]=new _a(sr||_i,br||q,Ai||Y.justReloaded),A[Qt.crossTileID]=!0}};if(qr)for(var fe=Y.getSortedSymbolIndexes(this.transform.angle),Me=fe.length-1;Me>=0;--Me){var ze=fe[Me];ue(Y.symbolInstances.get(ze),Y.collisionArrays[ze])}else for(var Be=x.symbolInstanceStart;Be<x.symbolInstanceEnd;Be++)ue(Y.symbolInstances.get(Be),Y.collisionArrays[Be]);if(w&&Y.bucketInstanceId in this.collisionCircleArrays){var en=this.collisionCircleArrays[Y.bucketInstanceId];T.invert(en.invProjMatrix,we),en.viewportMatrix=this.collisionIndex.getViewportMatrix()}Y.justReloaded=!1},ps.prototype.markUsedJustification=function(x,A,w,R){var j;j=R===T.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[T.getAnchorJustification(A)];for(var Y=0,te=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];Y<te.length;Y+=1){var we=te[Y];we>=0&&(x.text.placedSymbolArray.get(we).crossTileID=j>=0&&we!==j?0:w.crossTileID)}},ps.prototype.markUsedOrientation=function(x,A,w){for(var R=A===T.WritingMode.horizontal||A===T.WritingMode.horizontalOnly?A:0,j=A===T.WritingMode.vertical?A:0,Y=0,te=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];Y<te.length;Y+=1)x.text.placedSymbolArray.get(te[Y]).placedOrientation=R;w.verticalPlacedTextSymbolIndex&&(x.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=j)},ps.prototype.commit=function(x){this.commitTime=x,this.zoomAtLastRecencyCheck=this.transform.zoom;var A=this.prevPlacement,w=!1;this.prevZoomAdjustment=A?A.zoomAdjustment(this.transform.zoom):0;var R=A?A.symbolFadeChange(x):1,j=A?A.opacities:{},Y=A?A.variableOffsets:{},te=A?A.placedOrientations:{};for(var we in this.placements){var tt=this.placements[we],At=j[we];At?(this.opacities[we]=new Bi(At,R,tt.text,tt.icon),w=w||tt.text!==At.text.placed||tt.icon!==At.icon.placed):(this.opacities[we]=new Bi(null,R,tt.text,tt.icon,tt.skipFade),w=w||tt.text||tt.icon)}for(var $t in j){var qt=j[$t];if(!this.opacities[$t]){var rn=new Bi(qt,R,!1,!1);rn.isHidden()||(this.opacities[$t]=rn,w=w||qt.text.placed||qt.icon.placed)}}for(var kn in Y)this.variableOffsets[kn]||!this.opacities[kn]||this.opacities[kn].isHidden()||(this.variableOffsets[kn]=Y[kn]);for(var Rn in te)this.placedOrientations[Rn]||!this.opacities[Rn]||this.opacities[Rn].isHidden()||(this.placedOrientations[Rn]=te[Rn]);w?this.lastPlacementChangeTime=x:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=A?A.lastPlacementChangeTime:x)},ps.prototype.updateLayerOpacities=function(x,A){for(var w={},R=0,j=A;R<j.length;R+=1){var Y=j[R],te=Y.getBucket(x);te&&Y.latestFeatureIndex&&x.id===te.layerIds[0]&&this.updateBucketOpacities(te,w,Y.collisionBoxArray)}},ps.prototype.updateBucketOpacities=function(x,A,w){var R=this;x.hasTextData()&&x.text.opacityVertexArray.clear(),x.hasIconData()&&x.icon.opacityVertexArray.clear(),x.hasIconCollisionBoxData()&&x.iconCollisionBox.collisionVertexArray.clear(),x.hasTextCollisionBoxData()&&x.textCollisionBox.collisionVertexArray.clear();var j=x.layers[0].layout,Y=new Bi(null,0,!1,!1,!0),te=j.get("text-allow-overlap"),we=j.get("icon-allow-overlap"),tt=j.get("text-variable-anchor"),At=j.get("text-rotation-alignment")==="map",$t=j.get("text-pitch-alignment")==="map",qt=j.get("icon-text-fit")!=="none",rn=new Bi(null,0,te&&(we||!x.hasIconData()||j.get("icon-optional")),we&&(te||!x.hasTextData()||j.get("text-optional")),!0);!x.collisionArrays&&w&&(x.hasIconCollisionBoxData()||x.hasTextCollisionBoxData())&&x.deserializeCollisionBoxes(w);for(var kn=function(Kn,mr,Or){for(var Wr=0;Wr<mr/4;Wr++)Kn.opacityVertexArray.emplaceBack(Or)},Rn=function(Kn){var mr=x.symbolInstances.get(Kn),Or=mr.numHorizontalGlyphVertices,Wr=mr.numVerticalGlyphVertices,Ur=mr.crossTileID,qr=R.opacities[Ur];A[Ur]?qr=Y:qr||(R.opacities[Ur]=qr=rn),A[Ur]=!0;var _i=mr.numIconVertices>0,q=R.placedOrientations[mr.crossTileID],ue=q===T.WritingMode.vertical,fe=q===T.WritingMode.horizontal||q===T.WritingMode.horizontalOnly;if(Or>0||Wr>0){var Me=Vs(qr.text);kn(x.text,Or,ue?Ds:Me),kn(x.text,Wr,fe?Ds:Me);var ze=qr.text.isHidden();[mr.rightJustifiedTextSymbolIndex,mr.centerJustifiedTextSymbolIndex,mr.leftJustifiedTextSymbolIndex].forEach(function(ci){ci>=0&&(x.text.placedSymbolArray.get(ci).hidden=ze||ue?1:0)}),mr.verticalPlacedTextSymbolIndex>=0&&(x.text.placedSymbolArray.get(mr.verticalPlacedTextSymbolIndex).hidden=ze||fe?1:0);var Be=R.variableOffsets[mr.crossTileID];Be&&R.markUsedJustification(x,Be.anchor,mr,q);var en=R.placedOrientations[mr.crossTileID];en&&(R.markUsedJustification(x,"left",mr,en),R.markUsedOrientation(x,en,mr))}if(_i){var Qt=Vs(qr.icon),Xn=!(qt&&mr.verticalPlacedIconSymbolIndex&&ue);mr.placedIconSymbolIndex>=0&&(kn(x.icon,mr.numIconVertices,Xn?Qt:Ds),x.icon.placedSymbolArray.get(mr.placedIconSymbolIndex).hidden=qr.icon.isHidden()),mr.verticalPlacedIconSymbolIndex>=0&&(kn(x.icon,mr.numVerticalIconVertices,Xn?Ds:Qt),x.icon.placedSymbolArray.get(mr.verticalPlacedIconSymbolIndex).hidden=qr.icon.isHidden())}if(x.hasIconCollisionBoxData()||x.hasTextCollisionBoxData()){var pn=x.collisionArrays[Kn];if(pn){var sr=new T.Point(0,0);if(pn.textBox||pn.verticalTextBox){var br=!0;if(tt){var Ai=R.variableOffsets[Ur];Ai?(sr=Oo(Ai.anchor,Ai.width,Ai.height,Ai.textOffset,Ai.textBoxScale),At&&sr._rotate($t?R.transform.angle:-R.transform.angle)):br=!1}pn.textBox&&jt(x.textCollisionBox.collisionVertexArray,qr.text.placed,!br||ue,sr.x,sr.y),pn.verticalTextBox&&jt(x.textCollisionBox.collisionVertexArray,qr.text.placed,!br||fe,sr.x,sr.y)}var xi=!!(!fe&&pn.verticalIconBox);pn.iconBox&&jt(x.iconCollisionBox.collisionVertexArray,qr.icon.placed,xi,qt?sr.x:0,qt?sr.y:0),pn.verticalIconBox&&jt(x.iconCollisionBox.collisionVertexArray,qr.icon.placed,!xi,qt?sr.x:0,qt?sr.y:0)}}},qn=0;qn<x.symbolInstances.length;qn++)Rn(qn);if(x.sortFeatures(this.transform.angle),this.retainedQueryData[x.bucketInstanceId]&&(this.retainedQueryData[x.bucketInstanceId].featureSortOrder=x.featureSortOrder),x.hasTextData()&&x.text.opacityVertexBuffer&&x.text.opacityVertexBuffer.updateData(x.text.opacityVertexArray),x.hasIconData()&&x.icon.opacityVertexBuffer&&x.icon.opacityVertexBuffer.updateData(x.icon.opacityVertexArray),x.hasIconCollisionBoxData()&&x.iconCollisionBox.collisionVertexBuffer&&x.iconCollisionBox.collisionVertexBuffer.updateData(x.iconCollisionBox.collisionVertexArray),x.hasTextCollisionBoxData()&&x.textCollisionBox.collisionVertexBuffer&&x.textCollisionBox.collisionVertexBuffer.updateData(x.textCollisionBox.collisionVertexArray),x.bucketInstanceId in this.collisionCircleArrays){var wn=this.collisionCircleArrays[x.bucketInstanceId];x.placementInvProjMatrix=wn.invProjMatrix,x.placementViewportMatrix=wn.viewportMatrix,x.collisionCircleArray=wn.circles,delete this.collisionCircleArrays[x.bucketInstanceId]}},ps.prototype.symbolFadeChange=function(x){return this.fadeDuration===0?1:(x-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ps.prototype.zoomAdjustment=function(x){return Math.max(0,(this.transform.zoom-x)/1.5)},ps.prototype.hasTransitions=function(x){return this.stale||x-this.lastPlacementChangeTime<this.fadeDuration},ps.prototype.stillRecent=function(x,A){var w=this.zoomAtLastRecencyCheck===A?1-this.zoomAdjustment(A):1;return this.zoomAtLastRecencyCheck=A,this.commitTime+this.fadeDuration*w>x},ps.prototype.setStale=function(){this.stale=!0};var sn=Math.pow(2,25),Jn=Math.pow(2,24),Xr=Math.pow(2,17),Ii=Math.pow(2,16),Ea=Math.pow(2,9),co=Math.pow(2,8),Zs=Math.pow(2,1);function Vs(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;var A=x.placed?1:0,w=Math.floor(127*x.opacity);return w*sn+A*Jn+w*Xr+A*Ii+w*Ea+A*co+w*Zs+A}var Ds=0,vu=function(x){this._sortAcrossTiles=x.layout.get("symbol-z-order")!=="viewport-y"&&x.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};vu.prototype.continuePlacement=function(x,A,w,R,j){for(var Y=this._bucketParts;this._currentTileIndex<x.length;)if(A.getBucketParts(Y,R,x[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,j())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Y.sort(function(te,we){return te.sortKey-we.sortKey}));this._currentPartIndex<Y.length;)if(A.placeLayerBucketPart(Y[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,j())return!0;return!1};var Rl=function(x,A,w,R,j,Y,te){this.placement=new ps(x,j,Y,te),this._currentPlacementIndex=A.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=R,this._done=!1};Rl.prototype.isDone=function(){return this._done},Rl.prototype.continuePlacement=function(x,A,w){for(var R=this,j=T.browser.now(),Y=function(){var tt=T.browser.now()-j;return!R._forceFullPlacement&&tt>2};this._currentPlacementIndex>=0;){var te=A[x[this._currentPlacementIndex]],we=this.placement.collisionIndex.transform.zoom;if(te.type==="symbol"&&(!te.minzoom||te.minzoom<=we)&&(!te.maxzoom||te.maxzoom>we)){if(this._inProgressLayer||(this._inProgressLayer=new vu(te)),this._inProgressLayer.continuePlacement(w[te.source],this.placement,this._showCollisionBoxes,te,Y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Rl.prototype.commit=function(x){return this.placement.commit(x),this.placement};var ap=512/T.EXTENT/2,ph=function(x,A,w){this.tileID=x,this.indexedSymbolInstances={},this.bucketInstanceId=w;for(var R=0;R<A.length;R++){var j=A.get(R),Y=j.key;this.indexedSymbolInstances[Y]||(this.indexedSymbolInstances[Y]=[]),this.indexedSymbolInstances[Y].push({crossTileID:j.crossTileID,coord:this.getScaledCoordinates(j,x)})}};ph.prototype.getScaledCoordinates=function(x,A){var w=ap/Math.pow(2,A.canonical.z-this.tileID.canonical.z);return{x:Math.floor((A.canonical.x*T.EXTENT+x.anchorX)*w),y:Math.floor((A.canonical.y*T.EXTENT+x.anchorY)*w)}},ph.prototype.findMatches=function(x,A,w){for(var R=this.tileID.canonical.z<A.canonical.z?1:Math.pow(2,this.tileID.canonical.z-A.canonical.z),j=0;j<x.length;j++){var Y=x.get(j);if(!Y.crossTileID){var te=this.indexedSymbolInstances[Y.key];if(te)for(var we=this.getScaledCoordinates(Y,A),tt=0,At=te;tt<At.length;tt+=1){var $t=At[tt];if(Math.abs($t.coord.x-we.x)<=R&&Math.abs($t.coord.y-we.y)<=R&&!w[$t.crossTileID]){w[$t.crossTileID]=!0,Y.crossTileID=$t.crossTileID;break}}}}};var el=function(){this.maxCrossTileID=0};el.prototype.generate=function(){return++this.maxCrossTileID};var lf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};lf.prototype.handleWrapJump=function(x){var A=Math.round((x-this.lng)/360);if(A!==0)for(var w in this.indexes){var R=this.indexes[w],j={};for(var Y in R){var te=R[Y];te.tileID=te.tileID.unwrapTo(te.tileID.wrap+A),j[te.tileID.key]=te}this.indexes[w]=j}this.lng=x},lf.prototype.addBucket=function(x,A,w){if(this.indexes[x.overscaledZ]&&this.indexes[x.overscaledZ][x.key]){if(this.indexes[x.overscaledZ][x.key].bucketInstanceId===A.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(x.overscaledZ,this.indexes[x.overscaledZ][x.key])}for(var R=0;R<A.symbolInstances.length;R++)A.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[x.overscaledZ]||(this.usedCrossTileIDs[x.overscaledZ]={});var j=this.usedCrossTileIDs[x.overscaledZ];for(var Y in this.indexes){var te=this.indexes[Y];if(Number(Y)>x.overscaledZ)for(var we in te){var tt=te[we];tt.tileID.isChildOf(x)&&tt.findMatches(A.symbolInstances,x,j)}else{var At=te[x.scaledTo(Number(Y)).key];At&&At.findMatches(A.symbolInstances,x,j)}}for(var $t=0;$t<A.symbolInstances.length;$t++){var qt=A.symbolInstances.get($t);qt.crossTileID||(qt.crossTileID=w.generate(),j[qt.crossTileID]=!0)}return this.indexes[x.overscaledZ]===void 0&&(this.indexes[x.overscaledZ]={}),this.indexes[x.overscaledZ][x.key]=new ph(x,A.symbolInstances,A.bucketInstanceId),!0},lf.prototype.removeBucketCrossTileIDs=function(x,A){for(var w in A.indexedSymbolInstances)for(var R=0,j=A.indexedSymbolInstances[w];R<j.length;R+=1)delete this.usedCrossTileIDs[x][j[R].crossTileID]},lf.prototype.removeStaleBuckets=function(x){var A=!1;for(var w in this.indexes){var R=this.indexes[w];for(var j in R)x[R[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,R[j]),delete R[j],A=!0)}return A};var Rf=function(){this.layerIndexes={},this.crossTileIDs=new el,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Rf.prototype.addLayer=function(x,A,w){var R=this.layerIndexes[x.id];R===void 0&&(R=this.layerIndexes[x.id]=new lf);var j=!1,Y={};R.handleWrapJump(w);for(var te=0,we=A;te<we.length;te+=1){var tt=we[te],At=tt.getBucket(x);At&&x.id===At.layerIds[0]&&(At.bucketInstanceId||(At.bucketInstanceId=++this.maxBucketInstanceId),R.addBucket(tt.tileID,At,this.crossTileIDs)&&(j=!0),Y[At.bucketInstanceId]=!0)}return R.removeStaleBuckets(Y)&&(j=!0),j},Rf.prototype.pruneUnusedLayers=function(x){var A={};for(var w in x.forEach(function(R){A[R]=!0}),this.layerIndexes)A[w]||delete this.layerIndexes[w]};var mu=function(x,A){return T.emitValidationErrors(x,A&&A.filter(function(w){return w.identifier!=="source.canvas"}))},tc=T.pick(Ni,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Pf=T.pick(Ni,["setCenter","setZoom","setBearing","setPitch"]),zh=function(){var x={},A=T.styleSpec.$version;for(var w in T.styleSpec.$root){var R,j=T.styleSpec.$root[w];j.required&&(R=w==="version"?A:j.type==="array"?[]:{})!=null&&(x[w]=R)}return x}(),Ti=function(x){function A(w,R){var j=this;R===void 0&&(R={}),x.call(this),this.map=w,this.dispatcher=new De(Br(),this),this.imageManager=new xe,this.imageManager.setEventedParent(this),this.glyphManager=new Tt(w._requestManager,R.localIdeographFontFamily),this.lineAtlas=new it(256,512),this.crossTileSymbolIndex=new Rf,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new T.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",T.getReferrer());var Y=this;this._rtlTextPluginCallback=A.registerForPluginStateChange(function(te){Y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:te.pluginStatus,pluginURL:te.pluginURL},function(we,tt){if(T.triggerPluginCompletionEvent(we),tt&&tt.every(function($t){return $t}))for(var At in Y.sourceCaches)Y.sourceCaches[At].reload()})}),this.on("data",function(te){if(te.dataType==="source"&&te.sourceDataType==="metadata"){var we=j.sourceCaches[te.sourceId];if(we){var tt=we.getSource();if(tt&&tt.vectorLayerIds)for(var At in j._layers){var $t=j._layers[At];$t.source===tt.id&&j._validateLayer($t)}}}})}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.loadURL=function(w,R){var j=this;R===void 0&&(R={}),this.fire(new T.Event("dataloading",{dataType:"style"}));var Y=typeof R.validate=="boolean"?R.validate:!T.isMapboxURL(w);w=this.map._requestManager.normalizeStyleURL(w,R.accessToken);var te=this.map._requestManager.transformRequest(w,T.ResourceType.Style);this._request=T.getJSON(te,function(we,tt){j._request=null,we?j.fire(new T.ErrorEvent(we)):tt&&j._load(tt,Y)})},A.prototype.loadJSON=function(w,R){var j=this;R===void 0&&(R={}),this.fire(new T.Event("dataloading",{dataType:"style"})),this._request=T.browser.frame(function(){j._request=null,j._load(w,R.validate!==!1)})},A.prototype.loadEmpty=function(){this.fire(new T.Event("dataloading",{dataType:"style"})),this._load(zh,!1)},A.prototype._load=function(w,R){if(!R||!mu(this,T.validateStyle(w))){for(var j in this._loaded=!0,this.stylesheet=w,w.sources)this.addSource(j,w.sources[j],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs);var Y=bi(this.stylesheet.layers);this._order=Y.map(function(At){return At.id}),this._layers={},this._serializedLayers={};for(var te=0,we=Y;te<we.length;te+=1){var tt=we[te];(tt=T.createStyleLayer(tt)).setEventedParent(this,{layer:{id:tt.id}}),this._layers[tt.id]=tt,this._serializedLayers[tt.id]=tt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Qe(this.stylesheet.light),this.fire(new T.Event("data",{dataType:"style"})),this.fire(new T.Event("style.load"))}},A.prototype._loadSprite=function(w){var R=this;this._spriteRequest=function(j,Y,te){var we,tt,At,$t=T.browser.devicePixelRatio>1?"@2x":"",qt=T.getJSON(Y.transformRequest(Y.normalizeSpriteURL(j,$t,".json"),T.ResourceType.SpriteJSON),function(Rn,qn){qt=null,At||(At=Rn,we=qn,kn())}),rn=T.getImage(Y.transformRequest(Y.normalizeSpriteURL(j,$t,".png"),T.ResourceType.SpriteImage),function(Rn,qn){rn=null,At||(At=Rn,tt=qn,kn())});function kn(){if(At)te(At);else if(we&&tt){var Rn=T.browser.getImageData(tt),qn={};for(var wn in we){var Kn=we[wn],mr=Kn.width,Or=Kn.height,Wr=Kn.x,Ur=Kn.y,qr=Kn.sdf,_i=Kn.pixelRatio,q=Kn.stretchX,ue=Kn.stretchY,fe=Kn.content,Me=new T.RGBAImage({width:mr,height:Or});T.RGBAImage.copy(Rn,Me,{x:Wr,y:Ur},{x:0,y:0},{width:mr,height:Or}),qn[wn]={data:Me,pixelRatio:_i,sdf:qr,stretchX:q,stretchY:ue,content:fe}}te(null,qn)}}return{cancel:function(){qt&&(qt.cancel(),qt=null),rn&&(rn.cancel(),rn=null)}}}(w,this.map._requestManager,function(j,Y){if(R._spriteRequest=null,j)R.fire(new T.ErrorEvent(j));else if(Y)for(var te in Y)R.imageManager.addImage(te,Y[te]);R.imageManager.setLoaded(!0),R._availableImages=R.imageManager.listImages(),R.dispatcher.broadcast("setImages",R._availableImages),R.fire(new T.Event("data",{dataType:"style"}))})},A.prototype._validateLayer=function(w){var R=this.sourceCaches[w.source];if(R){var j=w.sourceLayer;if(j){var Y=R.getSource();(Y.type==="geojson"||Y.vectorLayerIds&&Y.vectorLayerIds.indexOf(j)===-1)&&this.fire(new T.ErrorEvent(new Error('Source layer "'+j+'" does not exist on source "'+Y.id+'" as specified by style layer "'+w.id+'"')))}}},A.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var w in this.sourceCaches)if(!this.sourceCaches[w].loaded())return!1;return!!this.imageManager.isLoaded()},A.prototype._serializeLayers=function(w){for(var R=[],j=0,Y=w;j<Y.length;j+=1){var te=this._layers[Y[j]];te.type!=="custom"&&R.push(te.serialize())}return R},A.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(var R in this._layers)if(this._layers[R].hasTransition())return!0;return!1},A.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},A.prototype.update=function(w){if(this._loaded){var R=this._changed;if(this._changed){var j=Object.keys(this._updatedLayers),Y=Object.keys(this._removedLayers);for(var te in(j.length||Y.length)&&this._updateWorkerLayers(j,Y),this._updatedSources){var we=this._updatedSources[te];we==="reload"?this._reloadSource(te):we==="clear"&&this._clearSource(te)}for(var tt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[tt].updateTransitions(w);this.light.updateTransitions(w),this._resetUpdates()}var At={};for(var $t in this.sourceCaches){var qt=this.sourceCaches[$t];At[$t]=qt.used,qt.used=!1}for(var rn=0,kn=this._order;rn<kn.length;rn+=1){var Rn=this._layers[kn[rn]];Rn.recalculate(w,this._availableImages),!Rn.isHidden(w.zoom)&&Rn.source&&(this.sourceCaches[Rn.source].used=!0)}for(var qn in At){var wn=this.sourceCaches[qn];At[qn]!==wn.used&&wn.fire(new T.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:qn}))}this.light.recalculate(w),this.z=w.zoom,R&&this.fire(new T.Event("data",{dataType:"style"}))}},A.prototype._updateTilesForChangedImages=function(){var w=Object.keys(this._changedImages);if(w.length){for(var R in this.sourceCaches)this.sourceCaches[R].reloadTilesForDependencies(["icons","patterns"],w);this._changedImages={}}},A.prototype._updateWorkerLayers=function(w,R){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(w),removedIds:R})},A.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},A.prototype.setState=function(w){var R=this;if(this._checkLoaded(),mu(this,T.validateStyle(w)))return!1;(w=T.clone$1(w)).layers=bi(w.layers);var j=function(te,we){if(!te)return[{command:Ni.setStyle,args:[we]}];var tt=[];try{if(!T.deepEqual(te.version,we.version))return[{command:Ni.setStyle,args:[we]}];T.deepEqual(te.center,we.center)||tt.push({command:Ni.setCenter,args:[we.center]}),T.deepEqual(te.zoom,we.zoom)||tt.push({command:Ni.setZoom,args:[we.zoom]}),T.deepEqual(te.bearing,we.bearing)||tt.push({command:Ni.setBearing,args:[we.bearing]}),T.deepEqual(te.pitch,we.pitch)||tt.push({command:Ni.setPitch,args:[we.pitch]}),T.deepEqual(te.sprite,we.sprite)||tt.push({command:Ni.setSprite,args:[we.sprite]}),T.deepEqual(te.glyphs,we.glyphs)||tt.push({command:Ni.setGlyphs,args:[we.glyphs]}),T.deepEqual(te.transition,we.transition)||tt.push({command:Ni.setTransition,args:[we.transition]}),T.deepEqual(te.light,we.light)||tt.push({command:Ni.setLight,args:[we.light]});var At={},$t=[];(function(rn,kn,Rn,qn){var wn;for(wn in kn=kn||{},rn=rn||{})rn.hasOwnProperty(wn)&&(kn.hasOwnProperty(wn)||Xi(wn,Rn,qn));for(wn in kn)kn.hasOwnProperty(wn)&&(rn.hasOwnProperty(wn)?T.deepEqual(rn[wn],kn[wn])||(rn[wn].type==="geojson"&&kn[wn].type==="geojson"&&ko(rn,kn,wn)?Rn.push({command:Ni.setGeoJSONSourceData,args:[wn,kn[wn].data]}):ao(wn,kn,Rn,qn)):Qa(wn,kn,Rn))})(te.sources,we.sources,$t,At);var qt=[];te.layers&&te.layers.forEach(function(rn){At[rn.source]?tt.push({command:Ni.removeLayer,args:[rn.id]}):qt.push(rn)}),tt=tt.concat($t),function(rn,kn,Rn){kn=kn||[];var qn,wn,Kn,mr,Or,Wr,Ur,qr=(rn=rn||[]).map(mi),_i=kn.map(mi),q=rn.reduce(Je,{}),ue=kn.reduce(Je,{}),fe=qr.slice(),Me=Object.create(null);for(qn=0,wn=0;qn<qr.length;qn++)ue.hasOwnProperty(Kn=qr[qn])?wn++:(Rn.push({command:Ni.removeLayer,args:[Kn]}),fe.splice(fe.indexOf(Kn,wn),1));for(qn=0,wn=0;qn<_i.length;qn++)fe[fe.length-1-qn]!==(Kn=_i[_i.length-1-qn])&&(q.hasOwnProperty(Kn)?(Rn.push({command:Ni.removeLayer,args:[Kn]}),fe.splice(fe.lastIndexOf(Kn,fe.length-wn),1)):wn++,Rn.push({command:Ni.addLayer,args:[ue[Kn],Wr=fe[fe.length-qn]]}),fe.splice(fe.length-qn,0,Kn),Me[Kn]=!0);for(qn=0;qn<_i.length;qn++)if(mr=q[Kn=_i[qn]],Or=ue[Kn],!Me[Kn]&&!T.deepEqual(mr,Or))if(T.deepEqual(mr.source,Or.source)&&T.deepEqual(mr["source-layer"],Or["source-layer"])&&T.deepEqual(mr.type,Or.type)){for(Ur in Ba(mr.layout,Or.layout,Rn,Kn,null,Ni.setLayoutProperty),Ba(mr.paint,Or.paint,Rn,Kn,null,Ni.setPaintProperty),T.deepEqual(mr.filter,Or.filter)||Rn.push({command:Ni.setFilter,args:[Kn,Or.filter]}),T.deepEqual(mr.minzoom,Or.minzoom)&&T.deepEqual(mr.maxzoom,Or.maxzoom)||Rn.push({command:Ni.setLayerZoomRange,args:[Kn,Or.minzoom,Or.maxzoom]}),mr)mr.hasOwnProperty(Ur)&&Ur!=="layout"&&Ur!=="paint"&&Ur!=="filter"&&Ur!=="metadata"&&Ur!=="minzoom"&&Ur!=="maxzoom"&&(Ur.indexOf("paint.")===0?Ba(mr[Ur],Or[Ur],Rn,Kn,Ur.slice(6),Ni.setPaintProperty):T.deepEqual(mr[Ur],Or[Ur])||Rn.push({command:Ni.setLayerProperty,args:[Kn,Ur,Or[Ur]]}));for(Ur in Or)Or.hasOwnProperty(Ur)&&!mr.hasOwnProperty(Ur)&&Ur!=="layout"&&Ur!=="paint"&&Ur!=="filter"&&Ur!=="metadata"&&Ur!=="minzoom"&&Ur!=="maxzoom"&&(Ur.indexOf("paint.")===0?Ba(mr[Ur],Or[Ur],Rn,Kn,Ur.slice(6),Ni.setPaintProperty):T.deepEqual(mr[Ur],Or[Ur])||Rn.push({command:Ni.setLayerProperty,args:[Kn,Ur,Or[Ur]]}))}else Rn.push({command:Ni.removeLayer,args:[Kn]}),Wr=fe[fe.lastIndexOf(Kn)+1],Rn.push({command:Ni.addLayer,args:[Or,Wr]})}(qt,we.layers,tt)}catch(rn){console.warn("Unable to compute style diff:",rn),tt=[{command:Ni.setStyle,args:[we]}]}return tt}(this.serialize(),w).filter(function(te){return!(te.command in Pf)});if(j.length===0)return!1;var Y=j.filter(function(te){return!(te.command in tc)});if(Y.length>0)throw new Error("Unimplemented: "+Y.map(function(te){return te.command}).join(", ")+".");return j.forEach(function(te){te.command!=="setTransition"&&R[te.command].apply(R,te.args)}),this.stylesheet=w,!0},A.prototype.addImage=function(w,R){if(this.getImage(w))return this.fire(new T.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(w,R),this._afterImageUpdated(w)},A.prototype.updateImage=function(w,R){this.imageManager.updateImage(w,R)},A.prototype.getImage=function(w){return this.imageManager.getImage(w)},A.prototype.removeImage=function(w){if(!this.getImage(w))return this.fire(new T.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(w),this._afterImageUpdated(w)},A.prototype._afterImageUpdated=function(w){this._availableImages=this.imageManager.listImages(),this._changedImages[w]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new T.Event("data",{dataType:"style"}))},A.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},A.prototype.addSource=function(w,R,j){var Y=this;if(j===void 0&&(j={}),this._checkLoaded(),this.sourceCaches[w]!==void 0)throw new Error("There is already a source with this ID");if(!R.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(R).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(R.type)>=0&&this._validate(T.validateStyle.source,"sources."+w,R,null,j))){this.map&&this.map._collectResourceTiming&&(R.collectResourceTiming=!0);var te=this.sourceCaches[w]=new Dt(w,R,this.dispatcher);te.style=this,te.setEventedParent(this,function(){return{isSourceLoaded:Y.loaded(),source:te.serialize(),sourceId:w}}),te.onAdd(this.map),this._changed=!0}},A.prototype.removeSource=function(w){if(this._checkLoaded(),this.sourceCaches[w]===void 0)throw new Error("There is no source with this ID");for(var R in this._layers)if(this._layers[R].source===w)return this.fire(new T.ErrorEvent(new Error('Source "'+w+'" cannot be removed while layer "'+R+'" is using it.')));var j=this.sourceCaches[w];delete this.sourceCaches[w],delete this._updatedSources[w],j.fire(new T.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w})),j.setEventedParent(null),j.clearTiles(),j.onRemove&&j.onRemove(this.map),this._changed=!0},A.prototype.setGeoJSONSourceData=function(w,R){this._checkLoaded(),this.sourceCaches[w].getSource().setData(R),this._changed=!0},A.prototype.getSource=function(w){return this.sourceCaches[w]&&this.sourceCaches[w].getSource()},A.prototype.addLayer=function(w,R,j){j===void 0&&(j={}),this._checkLoaded();var Y=w.id;if(this.getLayer(Y))this.fire(new T.ErrorEvent(new Error('Layer with id "'+Y+'" already exists on this map')));else{var te;if(w.type==="custom"){if(mu(this,T.validateCustomStyleLayer(w)))return;te=T.createStyleLayer(w)}else{if(typeof w.source=="object"&&(this.addSource(Y,w.source),w=T.clone$1(w),w=T.extend(w,{source:Y})),this._validate(T.validateStyle.layer,"layers."+Y,w,{arrayIndex:-1},j))return;te=T.createStyleLayer(w),this._validateLayer(te),te.setEventedParent(this,{layer:{id:Y}}),this._serializedLayers[te.id]=te.serialize()}var we=R?this._order.indexOf(R):this._order.length;if(R&&we===-1)this.fire(new T.ErrorEvent(new Error('Layer with id "'+R+'" does not exist on this map.')));else{if(this._order.splice(we,0,Y),this._layerOrderChanged=!0,this._layers[Y]=te,this._removedLayers[Y]&&te.source&&te.type!=="custom"){var tt=this._removedLayers[Y];delete this._removedLayers[Y],tt.type!==te.type?this._updatedSources[te.source]="clear":(this._updatedSources[te.source]="reload",this.sourceCaches[te.source].pause())}this._updateLayer(te),te.onAdd&&te.onAdd(this.map)}}},A.prototype.moveLayer=function(w,R){if(this._checkLoaded(),this._changed=!0,this._layers[w]){if(w!==R){var j=this._order.indexOf(w);this._order.splice(j,1);var Y=R?this._order.indexOf(R):this._order.length;R&&Y===-1?this.fire(new T.ErrorEvent(new Error('Layer with id "'+R+'" does not exist on this map.'))):(this._order.splice(Y,0,w),this._layerOrderChanged=!0)}}else this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be moved.")))},A.prototype.removeLayer=function(w){this._checkLoaded();var R=this._layers[w];if(R){R.setEventedParent(null);var j=this._order.indexOf(w);this._order.splice(j,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[w]=R,delete this._layers[w],delete this._serializedLayers[w],delete this._updatedLayers[w],delete this._updatedPaintProps[w],R.onRemove&&R.onRemove(this.map)}else this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be removed.")))},A.prototype.getLayer=function(w){return this._layers[w]},A.prototype.hasLayer=function(w){return w in this._layers},A.prototype.setLayerZoomRange=function(w,R,j){this._checkLoaded();var Y=this.getLayer(w);Y?Y.minzoom===R&&Y.maxzoom===j||(R!=null&&(Y.minzoom=R),j!=null&&(Y.maxzoom=j),this._updateLayer(Y)):this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot have zoom extent.")))},A.prototype.setFilter=function(w,R,j){j===void 0&&(j={}),this._checkLoaded();var Y=this.getLayer(w);if(Y){if(!T.deepEqual(Y.filter,R))return R==null?(Y.filter=void 0,void this._updateLayer(Y)):void(this._validate(T.validateStyle.filter,"layers."+Y.id+".filter",R,null,j)||(Y.filter=T.clone$1(R),this._updateLayer(Y)))}else this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be filtered.")))},A.prototype.getFilter=function(w){return T.clone$1(this.getLayer(w).filter)},A.prototype.setLayoutProperty=function(w,R,j,Y){Y===void 0&&(Y={}),this._checkLoaded();var te=this.getLayer(w);te?T.deepEqual(te.getLayoutProperty(R),j)||(te.setLayoutProperty(R,j,Y),this._updateLayer(te)):this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},A.prototype.getLayoutProperty=function(w,R){var j=this.getLayer(w);if(j)return j.getLayoutProperty(R);this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style.")))},A.prototype.setPaintProperty=function(w,R,j,Y){Y===void 0&&(Y={}),this._checkLoaded();var te=this.getLayer(w);te?T.deepEqual(te.getPaintProperty(R),j)||(te.setPaintProperty(R,j,Y)&&this._updateLayer(te),this._changed=!0,this._updatedPaintProps[w]=!0):this.fire(new T.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},A.prototype.getPaintProperty=function(w,R){return this.getLayer(w).getPaintProperty(R)},A.prototype.setFeatureState=function(w,R){this._checkLoaded();var j=w.source,Y=w.sourceLayer,te=this.sourceCaches[j];if(te!==void 0){var we=te.getSource().type;we==="geojson"&&Y?this.fire(new T.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):we!=="vector"||Y?(w.id===void 0&&this.fire(new T.ErrorEvent(new Error("The feature id parameter must be provided."))),te.setFeatureState(Y,w.id,R)):this.fire(new T.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new T.ErrorEvent(new Error("The source '"+j+"' does not exist in the map's style.")))},A.prototype.removeFeatureState=function(w,R){this._checkLoaded();var j=w.source,Y=this.sourceCaches[j];if(Y!==void 0){var te=Y.getSource().type,we=te==="vector"?w.sourceLayer:void 0;te!=="vector"||we?R&&typeof w.id!="string"&&typeof w.id!="number"?this.fire(new T.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Y.removeFeatureState(we,w.id,R):this.fire(new T.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new T.ErrorEvent(new Error("The source '"+j+"' does not exist in the map's style.")))},A.prototype.getFeatureState=function(w){this._checkLoaded();var R=w.source,j=w.sourceLayer,Y=this.sourceCaches[R];if(Y!==void 0){if(Y.getSource().type!=="vector"||j)return w.id===void 0&&this.fire(new T.ErrorEvent(new Error("The feature id parameter must be provided."))),Y.getFeatureState(j,w.id);this.fire(new T.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new T.ErrorEvent(new Error("The source '"+R+"' does not exist in the map's style.")))},A.prototype.getTransition=function(){return T.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},A.prototype.serialize=function(){return T.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:T.mapObject(this.sourceCaches,function(w){return w.serialize()}),layers:this._serializeLayers(this._order)},function(w){return w!==void 0})},A.prototype._updateLayer=function(w){this._updatedLayers[w.id]=!0,w.source&&!this._updatedSources[w.source]&&this.sourceCaches[w.source].getSource().type!=="raster"&&(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause()),this._changed=!0},A.prototype._flattenAndSortRenderedFeatures=function(w){for(var R=this,j=function(q){return R._layers[q].type==="fill-extrusion"},Y={},te=[],we=this._order.length-1;we>=0;we--){var tt=this._order[we];if(j(tt)){Y[tt]=we;for(var At=0,$t=w;At<$t.length;At+=1){var qt=$t[At][tt];if(qt)for(var rn=0,kn=qt;rn<kn.length;rn+=1)te.push(kn[rn])}}}te.sort(function(q,ue){return ue.intersectionZ-q.intersectionZ});for(var Rn=[],qn=this._order.length-1;qn>=0;qn--){var wn=this._order[qn];if(j(wn))for(var Kn=te.length-1;Kn>=0;Kn--){var mr=te[Kn].feature;if(Y[mr.layer.id]<qn)break;Rn.push(mr),te.pop()}else for(var Or=0,Wr=w;Or<Wr.length;Or+=1){var Ur=Wr[Or][wn];if(Ur)for(var qr=0,_i=Ur;qr<_i.length;qr+=1)Rn.push(_i[qr].feature)}}return Rn},A.prototype.queryRenderedFeatures=function(w,R,j){R&&R.filter&&this._validate(T.validateStyle.filter,"queryRenderedFeatures.filter",R.filter,null,R);var Y={};if(R&&R.layers){if(!Array.isArray(R.layers))return this.fire(new T.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var te=0,we=R.layers;te<we.length;te+=1){var tt=we[te],At=this._layers[tt];if(!At)return this.fire(new T.ErrorEvent(new Error("The layer '"+tt+"' does not exist in the map's style and cannot be queried for features."))),[];Y[At.source]=!0}}var $t=[];for(var qt in R.availableImages=this._availableImages,this.sourceCaches)R.layers&&!Y[qt]||$t.push(yn(this.sourceCaches[qt],this._layers,this._serializedLayers,w,R,j));return this.placement&&$t.push(function(rn,kn,Rn,qn,wn,Kn,mr){for(var Or={},Wr=Kn.queryRenderedSymbols(qn),Ur=[],qr=0,_i=Object.keys(Wr).map(Number);qr<_i.length;qr+=1)Ur.push(mr[_i[qr]]);Ur.sort(ir);for(var q=function(){var Be=fe[ue],en=Be.featureIndex.lookupSymbolFeatures(Wr[Be.bucketInstanceId],kn,Be.bucketIndex,Be.sourceLayerIndex,wn.filter,wn.layers,wn.availableImages,rn);for(var Qt in en){var Xn=Or[Qt]=Or[Qt]||[],pn=en[Qt];pn.sort(function(Ai,xi){var ci=Be.featureSortOrder;if(ci){var da=ci.indexOf(Ai.featureIndex);return ci.indexOf(xi.featureIndex)-da}return xi.featureIndex-Ai.featureIndex});for(var sr=0,br=pn;sr<br.length;sr+=1)Xn.push(br[sr])}},ue=0,fe=Ur;ue<fe.length;ue+=1)q();var Me=function(Be){Or[Be].forEach(function(en){var Qt=en.feature,Xn=Rn[rn[Be].source].getFeatureState(Qt.layer["source-layer"],Qt.id);Qt.source=Qt.layer.source,Qt.layer["source-layer"]&&(Qt.sourceLayer=Qt.layer["source-layer"]),Qt.state=Xn})};for(var ze in Or)Me(ze);return Or}(this._layers,this._serializedLayers,this.sourceCaches,w,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($t)},A.prototype.querySourceFeatures=function(w,R){R&&R.filter&&this._validate(T.validateStyle.filter,"querySourceFeatures.filter",R.filter,null,R);var j=this.sourceCaches[w];return j?function(Y,te){for(var we=Y.getRenderableIds().map(function(kn){return Y.getTileByID(kn)}),tt=[],At={},$t=0;$t<we.length;$t++){var qt=we[$t],rn=qt.tileID.canonical.key;At[rn]||(At[rn]=!0,qt.querySourceFeatures(tt,te))}return tt}(j,R):[]},A.prototype.addSourceType=function(w,R,j){return A.getSourceType(w)?j(new Error('A source type called "'+w+'" already exists.')):(A.setSourceType(w,R),R.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:w,url:R.workerSourceURL},j):j(null,null))},A.prototype.getLight=function(){return this.light.getLight()},A.prototype.setLight=function(w,R){R===void 0&&(R={}),this._checkLoaded();var j=this.light.getLight(),Y=!1;for(var te in w)if(!T.deepEqual(w[te],j[te])){Y=!0;break}if(Y){var we={now:T.browser.now(),transition:T.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(w,R),this.light.updateTransitions(we)}},A.prototype._validate=function(w,R,j,Y,te){return te===void 0&&(te={}),(!te||te.validate!==!1)&&mu(this,w.call(T.validateStyle,T.extend({key:R,style:this.serialize(),value:j,styleSpec:T.styleSpec},Y)))},A.prototype._remove=function(){for(var w in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),T.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[w].setEventedParent(null);for(var R in this.sourceCaches)this.sourceCaches[R].clearTiles(),this.sourceCaches[R].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},A.prototype._clearSource=function(w){this.sourceCaches[w].clearTiles()},A.prototype._reloadSource=function(w){this.sourceCaches[w].resume(),this.sourceCaches[w].reload()},A.prototype._updateSources=function(w){for(var R in this.sourceCaches)this.sourceCaches[R].update(w)},A.prototype._generateCollisionBoxes=function(){for(var w in this.sourceCaches)this._reloadSource(w)},A.prototype._updatePlacement=function(w,R,j,Y,te){te===void 0&&(te=!1);for(var we=!1,tt=!1,At={},$t=0,qt=this._order;$t<qt.length;$t+=1){var rn=this._layers[qt[$t]];if(rn.type==="symbol"){if(!At[rn.source]){var kn=this.sourceCaches[rn.source];At[rn.source]=kn.getRenderableIds(!0).map(function(mr){return kn.getTileByID(mr)}).sort(function(mr,Or){return Or.tileID.overscaledZ-mr.tileID.overscaledZ||(mr.tileID.isLessThan(Or.tileID)?-1:1)})}var Rn=this.crossTileSymbolIndex.addLayer(rn,At[rn.source],w.center.lng);we=we||Rn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((te=te||this._layerOrderChanged||j===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.browser.now(),w.zoom))&&(this.pauseablePlacement=new Rl(w,this._order,te,R,j,Y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,At),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.browser.now()),tt=!0),we&&this.pauseablePlacement.placement.setStale()),tt||we)for(var qn=0,wn=this._order;qn<wn.length;qn+=1){var Kn=this._layers[wn[qn]];Kn.type==="symbol"&&this.placement.updateLayerOpacities(Kn,At[Kn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.browser.now())},A.prototype._releaseSymbolFadeTiles=function(){for(var w in this.sourceCaches)this.sourceCaches[w].releaseSymbolFadeTiles()},A.prototype.getImages=function(w,R,j){this.imageManager.getImages(R.icons,j),this._updateTilesForChangedImages();var Y=this.sourceCaches[R.source];Y&&Y.setDependencies(R.tileID.key,R.type,R.icons)},A.prototype.getGlyphs=function(w,R,j){this.glyphManager.getGlyphs(R.stacks,j)},A.prototype.getResource=function(w,R,j){return T.makeRequest(R,j)},A}(T.Evented);Ti.getSourceType=function(x){return Ve[x]},Ti.setSourceType=function(x,A){Ve[x]=A},Ti.registerForPluginStateChange=T.registerForPluginStateChange;var za=T.createLayout([{name:"a_pos",type:"Int16",components:2}]),fo=_s(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ji=_s(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),su=_s(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),If=_s(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Uh=_s("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Od=_s(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gf=_s(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),id=_s("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),op=_s("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Up=_s("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),sp=_s(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Xf=_s(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Cc=_s(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),jp=_s(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),hl=_s(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),kf=_s(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Yf=_s(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),_l=_s(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),pc=_s(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),vc=_s(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Oc=_s(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),bl=_s(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),cf=_s(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ff=_s(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ad=_s(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),od=_s(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function _s(x,A){var w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,R=A.match(/attribute ([\w]+) ([\w]+)/g),j=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Y=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=Y?Y.concat(j):j,we={};return{fragmentSource:x=x.replace(w,function(tt,At,$t,qt,rn){return we[rn]=!0,At==="define"?`
#ifndef HAS_UNIFORM_u_`+rn+`
varying `+$t+" "+qt+" "+rn+`;
#else
uniform `+$t+" "+qt+" u_"+rn+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+rn+`
    `+$t+" "+qt+" "+rn+" = u_"+rn+`;
#endif
`}),vertexSource:A=A.replace(w,function(tt,At,$t,qt,rn){var kn=qt==="float"?"vec2":"vec4",Rn=rn.match(/color/)?"color":kn;return we[rn]?At==="define"?`
#ifndef HAS_UNIFORM_u_`+rn+`
uniform lowp float u_`+rn+`_t;
attribute `+$t+" "+kn+" a_"+rn+`;
varying `+$t+" "+qt+" "+rn+`;
#else
uniform `+$t+" "+qt+" u_"+rn+`;
#endif
`:Rn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+rn+`
    `+rn+" = a_"+rn+`;
#else
    `+$t+" "+qt+" "+rn+" = u_"+rn+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+rn+`
    `+rn+" = unpack_mix_"+Rn+"(a_"+rn+", u_"+rn+`_t);
#else
    `+$t+" "+qt+" "+rn+" = u_"+rn+`;
#endif
`:At==="define"?`
#ifndef HAS_UNIFORM_u_`+rn+`
uniform lowp float u_`+rn+`_t;
attribute `+$t+" "+kn+" a_"+rn+`;
#else
uniform `+$t+" "+qt+" u_"+rn+`;
#endif
`:Rn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+rn+`
    `+$t+" "+qt+" "+rn+" = a_"+rn+`;
#else
    `+$t+" "+qt+" "+rn+" = u_"+rn+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+rn+`
    `+$t+" "+qt+" "+rn+" = unpack_mix_"+Rn+"(a_"+rn+", u_"+rn+`_t);
#else
    `+$t+" "+qt+" "+rn+" = u_"+rn+`;
#endif
`}),staticAttributes:R,staticUniforms:te}}var mv=Object.freeze({__proto__:null,prelude:fo,background:Ji,backgroundPattern:su,circle:If,clippingMask:Uh,heatmap:Od,heatmapTexture:Gf,collisionBox:id,collisionCircle:op,debug:Up,fill:sp,fillOutline:Xf,fillOutlinePattern:Cc,fillPattern:jp,fillExtrusion:hl,fillExtrusionPattern:kf,hillshadePrepare:Yf,hillshade:_l,line:pc,lineGradient:vc,linePattern:Oc,lineSDF:bl,raster:cf,symbolIcon:ff,symbolSDF:ad,symbolTextAndIcon:od}),sd=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function vh(x){for(var A=[],w=0;w<x.length;w++)if(x[w]!==null){var R=x[w].split(" ");A.push(R.pop())}return A}sd.prototype.bind=function(x,A,w,R,j,Y,te,we){this.context=x;for(var tt=this.boundPaintVertexBuffers.length!==R.length,At=0;!tt&&At<R.length;At++)this.boundPaintVertexBuffers[At]!==R[At]&&(tt=!0);x.extVertexArrayObject&&this.vao&&this.boundProgram===A&&this.boundLayoutVertexBuffer===w&&!tt&&this.boundIndexBuffer===j&&this.boundVertexOffset===Y&&this.boundDynamicVertexBuffer===te&&this.boundDynamicVertexBuffer2===we?(x.bindVertexArrayOES.set(this.vao),te&&te.bind(),j&&j.dynamicDraw&&j.bind(),we&&we.bind()):this.freshBind(A,w,R,j,Y,te,we)},sd.prototype.freshBind=function(x,A,w,R,j,Y,te){var we,tt=x.numAttributes,At=this.context,$t=At.gl;if(At.extVertexArrayObject)this.vao&&this.destroy(),this.vao=At.extVertexArrayObject.createVertexArrayOES(),At.bindVertexArrayOES.set(this.vao),we=0,this.boundProgram=x,this.boundLayoutVertexBuffer=A,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=R,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=Y,this.boundDynamicVertexBuffer2=te;else{we=At.currentNumAttributes||0;for(var qt=tt;qt<we;qt++)$t.disableVertexAttribArray(qt)}A.enableAttributes($t,x);for(var rn=0,kn=w;rn<kn.length;rn+=1)kn[rn].enableAttributes($t,x);Y&&Y.enableAttributes($t,x),te&&te.enableAttributes($t,x),A.bind(),A.setVertexAttribPointers($t,x,j);for(var Rn=0,qn=w;Rn<qn.length;Rn+=1){var wn=qn[Rn];wn.bind(),wn.setVertexAttribPointers($t,x,j)}Y&&(Y.bind(),Y.setVertexAttribPointers($t,x,j)),R&&R.bind(),te&&(te.bind(),te.setVertexAttribPointers($t,x,j)),At.currentNumAttributes=tt},sd.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Hs=function(x,A,w,R,j,Y){var te=x.gl;this.program=te.createProgram();for(var we=vh(w.staticAttributes),tt=R?R.getBinderAttributes():[],At=we.concat(tt),$t=w.staticUniforms?vh(w.staticUniforms):[],qt=R?R.getBinderUniforms():[],rn=[],kn=0,Rn=$t.concat(qt);kn<Rn.length;kn+=1){var qn=Rn[kn];rn.indexOf(qn)<0&&rn.push(qn)}var wn=R?R.defines():[];Y&&wn.push("#define OVERDRAW_INSPECTOR;");var Kn=wn.concat(fo.fragmentSource,w.fragmentSource).join(`
`),mr=wn.concat(fo.vertexSource,w.vertexSource).join(`
`),Or=te.createShader(te.FRAGMENT_SHADER);if(te.isContextLost())this.failedToCreate=!0;else{te.shaderSource(Or,Kn),te.compileShader(Or),te.attachShader(this.program,Or);var Wr=te.createShader(te.VERTEX_SHADER);if(te.isContextLost())this.failedToCreate=!0;else{te.shaderSource(Wr,mr),te.compileShader(Wr),te.attachShader(this.program,Wr),this.attributes={};var Ur={};this.numAttributes=At.length;for(var qr=0;qr<this.numAttributes;qr++)At[qr]&&(te.bindAttribLocation(this.program,qr,At[qr]),this.attributes[At[qr]]=qr);te.linkProgram(this.program),te.deleteShader(Wr),te.deleteShader(Or);for(var _i=0;_i<rn.length;_i++){var q=rn[_i];if(q&&!Ur[q]){var ue=te.getUniformLocation(this.program,q);ue&&(Ur[q]=ue)}}this.fixedUniforms=j(x,Ur),this.binderUniforms=R?R.getUniforms(x,Ur):[]}}};function up(x,A,w){var R=1/ea(w,1,A.transform.tileZoom),j=Math.pow(2,w.tileID.overscaledZ),Y=w.tileSize*Math.pow(2,A.transform.tileZoom)/j,te=Y*(w.tileID.canonical.x+w.tileID.wrap*j),we=Y*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[R,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[te>>16,we>>16],u_pixel_coord_lower:[65535&te,65535&we]}}Hs.prototype.draw=function(x,A,w,R,j,Y,te,we,tt,At,$t,qt,rn,kn,Rn,qn){var wn,Kn=x.gl;if(!this.failedToCreate){for(var mr in x.program.set(this.program),x.setDepthMode(w),x.setStencilMode(R),x.setColorMode(j),x.setCullFace(Y),this.fixedUniforms)this.fixedUniforms[mr].set(te[mr]);kn&&kn.setUniforms(x,this.binderUniforms,qt,{zoom:rn});for(var Or=(wn={},wn[Kn.LINES]=2,wn[Kn.TRIANGLES]=3,wn[Kn.LINE_STRIP]=1,wn)[A],Wr=0,Ur=$t.get();Wr<Ur.length;Wr+=1){var qr=Ur[Wr],_i=qr.vaos||(qr.vaos={});(_i[we]||(_i[we]=new sd)).bind(x,this,tt,kn?kn.getPaintVertexBuffers():[],At,qr.vertexOffset,Rn,qn),Kn.drawElements(A,qr.primitiveLength*Or,Kn.UNSIGNED_SHORT,qr.primitiveOffset*Or*2)}}};var lp=function(x,A,w,R){var j=A.style.light,Y=j.properties.get("position"),te=[Y.x,Y.y,Y.z],we=T.create$1();j.properties.get("anchor")==="viewport"&&T.fromRotation(we,-A.transform.angle),T.transformMat3(te,te,we);var tt=j.properties.get("color");return{u_matrix:x,u_lightpos:te,u_lightintensity:j.properties.get("intensity"),u_lightcolor:[tt.r,tt.g,tt.b],u_vertical_gradient:+w,u_opacity:R}},ku=function(x,A,w,R,j,Y,te){return T.extend(lp(x,A,w,R),up(Y,A,te),{u_height_factor:-Math.pow(2,j.overscaledZ)/te.tileSize/8})},qc=function(x){return{u_matrix:x}},mc=function(x,A,w,R){return T.extend(qc(x),up(w,A,R))},nc=function(x,A){return{u_matrix:x,u_world:A}},jh=function(x,A,w,R,j){return T.extend(mc(x,A,w,R),{u_world:j})},qf=function(x,A,w,R){var j,Y,te=x.transform;if(R.paint.get("circle-pitch-alignment")==="map"){var we=ea(w,1,te.zoom);j=!0,Y=[we,we]}else j=!1,Y=te.pixelsToGLUnits;return{u_camera_to_center_distance:te.cameraToCenterDistance,u_scale_with_map:+(R.paint.get("circle-pitch-scale")==="map"),u_matrix:x.translatePosMatrix(A.posMatrix,w,R.paint.get("circle-translate"),R.paint.get("circle-translate-anchor")),u_pitch_with_map:+j,u_device_pixel_ratio:T.browser.devicePixelRatio,u_extrude_scale:Y}},gc=function(x,A,w){var R=ea(w,1,A.zoom),j=Math.pow(2,A.zoom-w.tileID.overscaledZ),Y=w.tileID.overscaleFactor();return{u_matrix:x,u_camera_to_center_distance:A.cameraToCenterDistance,u_pixels_to_tile_units:R,u_extrude_scale:[A.pixelsToGLUnits[0]/(R*j),A.pixelsToGLUnits[1]/(R*j)],u_overscale_factor:Y}},Kf=function(x,A,w){return{u_matrix:x,u_inv_matrix:A,u_camera_to_center_distance:w.cameraToCenterDistance,u_viewport_size:[w.width,w.height]}},Lf=function(x,A,w){return w===void 0&&(w=1),{u_matrix:x,u_color:A,u_overlay:0,u_overlay_scale:w}},rc=function(x){return{u_matrix:x}},Lu=function(x,A,w,R){return{u_matrix:x,u_extrude_scale:ea(A,1,w),u_intensity:R}},Ts=function(x,A,w){var R=x.transform;return{u_matrix:Zh(x,A,w),u_ratio:1/ea(A,1,R.zoom),u_device_pixel_ratio:T.browser.devicePixelRatio,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},Ws=function(x,A,w,R){return T.extend(Ts(x,A,w),{u_image:0,u_image_height:R})},Mc=function(x,A,w,R){var j=x.transform,Y=hf(A,j);return{u_matrix:Zh(x,A,w),u_texsize:A.imageAtlasTexture.size,u_ratio:1/ea(A,1,j.zoom),u_device_pixel_ratio:T.browser.devicePixelRatio,u_image:0,u_scale:[Y,R.fromScale,R.toScale],u_fade:R.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},Zp=function(x,A,w,R,j){var Y=x.lineAtlas,te=hf(A,x.transform),we=w.layout.get("line-cap")==="round",tt=Y.getDash(R.from,we),At=Y.getDash(R.to,we),$t=tt.width*j.fromScale,qt=At.width*j.toScale;return T.extend(Ts(x,A,w),{u_patternscale_a:[te/$t,-tt.height/2],u_patternscale_b:[te/qt,-At.height/2],u_sdfgamma:Y.width/(256*Math.min($t,qt)*T.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:tt.y,u_tex_y_b:At.y,u_mix:j.t})};function hf(x,A){return 1/ea(x,1,A.tileZoom)}function Zh(x,A,w){return x.translatePosMatrix(A.tileID.posMatrix,A,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}var mh=function(x,A,w,R,j){return{u_matrix:x,u_tl_parent:A,u_scale_parent:w,u_buffer_scale:1,u_fade_t:R.mix,u_opacity:R.opacity*j.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:j.paint.get("raster-brightness-min"),u_brightness_high:j.paint.get("raster-brightness-max"),u_saturation_factor:(te=j.paint.get("raster-saturation"),te>0?1-1/(1.001-te):-te),u_contrast_factor:(Y=j.paint.get("raster-contrast"),Y>0?1/(1-Y):1+Y),u_spin_weights:xl(j.paint.get("raster-hue-rotate"))};var Y,te};function xl(x){x*=Math.PI/180;var A=Math.sin(x),w=Math.cos(x);return[(2*w+1)/3,(-Math.sqrt(3)*A-w+1)/3,(Math.sqrt(3)*A-w+1)/3]}var Kc,Rc=function(x,A,w,R,j,Y,te,we,tt,At){var $t=j.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:A?A.uSizeT:0,u_size:A?A.uSize:0,u_camera_to_center_distance:$t.cameraToCenterDistance,u_pitch:$t.pitch/360*2*Math.PI,u_rotate_symbol:+w,u_aspect_ratio:$t.width/$t.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_matrix:Y,u_label_plane_matrix:te,u_coord_matrix:we,u_is_text:+tt,u_pitch_with_map:+R,u_texsize:At,u_texture:0}},df=function(x,A,w,R,j,Y,te,we,tt,At,$t){var qt=j.transform;return T.extend(Rc(x,A,w,R,j,Y,te,we,tt,At),{u_gamma_scale:R?Math.cos(qt._pitch)*qt.cameraToCenterDistance:1,u_device_pixel_ratio:T.browser.devicePixelRatio,u_is_halo:+$t})},Wu=function(x,A,w,R,j,Y,te,we,tt,At){return T.extend(df(x,A,w,R,j,Y,te,we,!0,tt,!0),{u_texsize_icon:At,u_texture_icon:1})},gh=function(x,A,w){return{u_matrix:x,u_opacity:A,u_color:w}},pf=function(x,A,w,R,j,Y){return T.extend(function(te,we,tt,At){var $t=tt.imageManager.getPattern(te.from.toString()),qt=tt.imageManager.getPattern(te.to.toString()),rn=tt.imageManager.getPixelSize(),kn=rn.width,Rn=rn.height,qn=Math.pow(2,At.tileID.overscaledZ),wn=At.tileSize*Math.pow(2,tt.transform.tileZoom)/qn,Kn=wn*(At.tileID.canonical.x+At.tileID.wrap*qn),mr=wn*At.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$t.tl,u_pattern_br_a:$t.br,u_pattern_tl_b:qt.tl,u_pattern_br_b:qt.br,u_texsize:[kn,Rn],u_mix:we.t,u_pattern_size_a:$t.displaySize,u_pattern_size_b:qt.displaySize,u_scale_a:we.fromScale,u_scale_b:we.toScale,u_tile_units_to_pixels:1/ea(At,1,tt.transform.tileZoom),u_pixel_coord_upper:[Kn>>16,mr>>16],u_pixel_coord_lower:[65535&Kn,65535&mr]}}(R,Y,w,j),{u_matrix:x,u_opacity:A})},Vh={fillExtrusion:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_lightpos:new T.Uniform3f(x,A.u_lightpos),u_lightintensity:new T.Uniform1f(x,A.u_lightintensity),u_lightcolor:new T.Uniform3f(x,A.u_lightcolor),u_vertical_gradient:new T.Uniform1f(x,A.u_vertical_gradient),u_opacity:new T.Uniform1f(x,A.u_opacity)}},fillExtrusionPattern:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_lightpos:new T.Uniform3f(x,A.u_lightpos),u_lightintensity:new T.Uniform1f(x,A.u_lightintensity),u_lightcolor:new T.Uniform3f(x,A.u_lightcolor),u_vertical_gradient:new T.Uniform1f(x,A.u_vertical_gradient),u_height_factor:new T.Uniform1f(x,A.u_height_factor),u_image:new T.Uniform1i(x,A.u_image),u_texsize:new T.Uniform2f(x,A.u_texsize),u_pixel_coord_upper:new T.Uniform2f(x,A.u_pixel_coord_upper),u_pixel_coord_lower:new T.Uniform2f(x,A.u_pixel_coord_lower),u_scale:new T.Uniform3f(x,A.u_scale),u_fade:new T.Uniform1f(x,A.u_fade),u_opacity:new T.Uniform1f(x,A.u_opacity)}},fill:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix)}},fillPattern:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_image:new T.Uniform1i(x,A.u_image),u_texsize:new T.Uniform2f(x,A.u_texsize),u_pixel_coord_upper:new T.Uniform2f(x,A.u_pixel_coord_upper),u_pixel_coord_lower:new T.Uniform2f(x,A.u_pixel_coord_lower),u_scale:new T.Uniform3f(x,A.u_scale),u_fade:new T.Uniform1f(x,A.u_fade)}},fillOutline:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_world:new T.Uniform2f(x,A.u_world)}},fillOutlinePattern:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_world:new T.Uniform2f(x,A.u_world),u_image:new T.Uniform1i(x,A.u_image),u_texsize:new T.Uniform2f(x,A.u_texsize),u_pixel_coord_upper:new T.Uniform2f(x,A.u_pixel_coord_upper),u_pixel_coord_lower:new T.Uniform2f(x,A.u_pixel_coord_lower),u_scale:new T.Uniform3f(x,A.u_scale),u_fade:new T.Uniform1f(x,A.u_fade)}},circle:function(x,A){return{u_camera_to_center_distance:new T.Uniform1f(x,A.u_camera_to_center_distance),u_scale_with_map:new T.Uniform1i(x,A.u_scale_with_map),u_pitch_with_map:new T.Uniform1i(x,A.u_pitch_with_map),u_extrude_scale:new T.Uniform2f(x,A.u_extrude_scale),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_matrix:new T.UniformMatrix4f(x,A.u_matrix)}},collisionBox:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_camera_to_center_distance:new T.Uniform1f(x,A.u_camera_to_center_distance),u_pixels_to_tile_units:new T.Uniform1f(x,A.u_pixels_to_tile_units),u_extrude_scale:new T.Uniform2f(x,A.u_extrude_scale),u_overscale_factor:new T.Uniform1f(x,A.u_overscale_factor)}},collisionCircle:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_inv_matrix:new T.UniformMatrix4f(x,A.u_inv_matrix),u_camera_to_center_distance:new T.Uniform1f(x,A.u_camera_to_center_distance),u_viewport_size:new T.Uniform2f(x,A.u_viewport_size)}},debug:function(x,A){return{u_color:new T.UniformColor(x,A.u_color),u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_overlay:new T.Uniform1i(x,A.u_overlay),u_overlay_scale:new T.Uniform1f(x,A.u_overlay_scale)}},clippingMask:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix)}},heatmap:function(x,A){return{u_extrude_scale:new T.Uniform1f(x,A.u_extrude_scale),u_intensity:new T.Uniform1f(x,A.u_intensity),u_matrix:new T.UniformMatrix4f(x,A.u_matrix)}},heatmapTexture:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_world:new T.Uniform2f(x,A.u_world),u_image:new T.Uniform1i(x,A.u_image),u_color_ramp:new T.Uniform1i(x,A.u_color_ramp),u_opacity:new T.Uniform1f(x,A.u_opacity)}},hillshade:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_image:new T.Uniform1i(x,A.u_image),u_latrange:new T.Uniform2f(x,A.u_latrange),u_light:new T.Uniform2f(x,A.u_light),u_shadow:new T.UniformColor(x,A.u_shadow),u_highlight:new T.UniformColor(x,A.u_highlight),u_accent:new T.UniformColor(x,A.u_accent)}},hillshadePrepare:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_image:new T.Uniform1i(x,A.u_image),u_dimension:new T.Uniform2f(x,A.u_dimension),u_zoom:new T.Uniform1f(x,A.u_zoom),u_unpack:new T.Uniform4f(x,A.u_unpack)}},line:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_ratio:new T.Uniform1f(x,A.u_ratio),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_units_to_pixels:new T.Uniform2f(x,A.u_units_to_pixels)}},lineGradient:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_ratio:new T.Uniform1f(x,A.u_ratio),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_units_to_pixels:new T.Uniform2f(x,A.u_units_to_pixels),u_image:new T.Uniform1i(x,A.u_image),u_image_height:new T.Uniform1f(x,A.u_image_height)}},linePattern:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_texsize:new T.Uniform2f(x,A.u_texsize),u_ratio:new T.Uniform1f(x,A.u_ratio),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_image:new T.Uniform1i(x,A.u_image),u_units_to_pixels:new T.Uniform2f(x,A.u_units_to_pixels),u_scale:new T.Uniform3f(x,A.u_scale),u_fade:new T.Uniform1f(x,A.u_fade)}},lineSDF:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_ratio:new T.Uniform1f(x,A.u_ratio),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_units_to_pixels:new T.Uniform2f(x,A.u_units_to_pixels),u_patternscale_a:new T.Uniform2f(x,A.u_patternscale_a),u_patternscale_b:new T.Uniform2f(x,A.u_patternscale_b),u_sdfgamma:new T.Uniform1f(x,A.u_sdfgamma),u_image:new T.Uniform1i(x,A.u_image),u_tex_y_a:new T.Uniform1f(x,A.u_tex_y_a),u_tex_y_b:new T.Uniform1f(x,A.u_tex_y_b),u_mix:new T.Uniform1f(x,A.u_mix)}},raster:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_tl_parent:new T.Uniform2f(x,A.u_tl_parent),u_scale_parent:new T.Uniform1f(x,A.u_scale_parent),u_buffer_scale:new T.Uniform1f(x,A.u_buffer_scale),u_fade_t:new T.Uniform1f(x,A.u_fade_t),u_opacity:new T.Uniform1f(x,A.u_opacity),u_image0:new T.Uniform1i(x,A.u_image0),u_image1:new T.Uniform1i(x,A.u_image1),u_brightness_low:new T.Uniform1f(x,A.u_brightness_low),u_brightness_high:new T.Uniform1f(x,A.u_brightness_high),u_saturation_factor:new T.Uniform1f(x,A.u_saturation_factor),u_contrast_factor:new T.Uniform1f(x,A.u_contrast_factor),u_spin_weights:new T.Uniform3f(x,A.u_spin_weights)}},symbolIcon:function(x,A){return{u_is_size_zoom_constant:new T.Uniform1i(x,A.u_is_size_zoom_constant),u_is_size_feature_constant:new T.Uniform1i(x,A.u_is_size_feature_constant),u_size_t:new T.Uniform1f(x,A.u_size_t),u_size:new T.Uniform1f(x,A.u_size),u_camera_to_center_distance:new T.Uniform1f(x,A.u_camera_to_center_distance),u_pitch:new T.Uniform1f(x,A.u_pitch),u_rotate_symbol:new T.Uniform1i(x,A.u_rotate_symbol),u_aspect_ratio:new T.Uniform1f(x,A.u_aspect_ratio),u_fade_change:new T.Uniform1f(x,A.u_fade_change),u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_label_plane_matrix:new T.UniformMatrix4f(x,A.u_label_plane_matrix),u_coord_matrix:new T.UniformMatrix4f(x,A.u_coord_matrix),u_is_text:new T.Uniform1i(x,A.u_is_text),u_pitch_with_map:new T.Uniform1i(x,A.u_pitch_with_map),u_texsize:new T.Uniform2f(x,A.u_texsize),u_texture:new T.Uniform1i(x,A.u_texture)}},symbolSDF:function(x,A){return{u_is_size_zoom_constant:new T.Uniform1i(x,A.u_is_size_zoom_constant),u_is_size_feature_constant:new T.Uniform1i(x,A.u_is_size_feature_constant),u_size_t:new T.Uniform1f(x,A.u_size_t),u_size:new T.Uniform1f(x,A.u_size),u_camera_to_center_distance:new T.Uniform1f(x,A.u_camera_to_center_distance),u_pitch:new T.Uniform1f(x,A.u_pitch),u_rotate_symbol:new T.Uniform1i(x,A.u_rotate_symbol),u_aspect_ratio:new T.Uniform1f(x,A.u_aspect_ratio),u_fade_change:new T.Uniform1f(x,A.u_fade_change),u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_label_plane_matrix:new T.UniformMatrix4f(x,A.u_label_plane_matrix),u_coord_matrix:new T.UniformMatrix4f(x,A.u_coord_matrix),u_is_text:new T.Uniform1i(x,A.u_is_text),u_pitch_with_map:new T.Uniform1i(x,A.u_pitch_with_map),u_texsize:new T.Uniform2f(x,A.u_texsize),u_texture:new T.Uniform1i(x,A.u_texture),u_gamma_scale:new T.Uniform1f(x,A.u_gamma_scale),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_is_halo:new T.Uniform1i(x,A.u_is_halo)}},symbolTextAndIcon:function(x,A){return{u_is_size_zoom_constant:new T.Uniform1i(x,A.u_is_size_zoom_constant),u_is_size_feature_constant:new T.Uniform1i(x,A.u_is_size_feature_constant),u_size_t:new T.Uniform1f(x,A.u_size_t),u_size:new T.Uniform1f(x,A.u_size),u_camera_to_center_distance:new T.Uniform1f(x,A.u_camera_to_center_distance),u_pitch:new T.Uniform1f(x,A.u_pitch),u_rotate_symbol:new T.Uniform1i(x,A.u_rotate_symbol),u_aspect_ratio:new T.Uniform1f(x,A.u_aspect_ratio),u_fade_change:new T.Uniform1f(x,A.u_fade_change),u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_label_plane_matrix:new T.UniformMatrix4f(x,A.u_label_plane_matrix),u_coord_matrix:new T.UniformMatrix4f(x,A.u_coord_matrix),u_is_text:new T.Uniform1i(x,A.u_is_text),u_pitch_with_map:new T.Uniform1i(x,A.u_pitch_with_map),u_texsize:new T.Uniform2f(x,A.u_texsize),u_texsize_icon:new T.Uniform2f(x,A.u_texsize_icon),u_texture:new T.Uniform1i(x,A.u_texture),u_texture_icon:new T.Uniform1i(x,A.u_texture_icon),u_gamma_scale:new T.Uniform1f(x,A.u_gamma_scale),u_device_pixel_ratio:new T.Uniform1f(x,A.u_device_pixel_ratio),u_is_halo:new T.Uniform1i(x,A.u_is_halo)}},background:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_opacity:new T.Uniform1f(x,A.u_opacity),u_color:new T.UniformColor(x,A.u_color)}},backgroundPattern:function(x,A){return{u_matrix:new T.UniformMatrix4f(x,A.u_matrix),u_opacity:new T.Uniform1f(x,A.u_opacity),u_image:new T.Uniform1i(x,A.u_image),u_pattern_tl_a:new T.Uniform2f(x,A.u_pattern_tl_a),u_pattern_br_a:new T.Uniform2f(x,A.u_pattern_br_a),u_pattern_tl_b:new T.Uniform2f(x,A.u_pattern_tl_b),u_pattern_br_b:new T.Uniform2f(x,A.u_pattern_br_b),u_texsize:new T.Uniform2f(x,A.u_texsize),u_mix:new T.Uniform1f(x,A.u_mix),u_pattern_size_a:new T.Uniform2f(x,A.u_pattern_size_a),u_pattern_size_b:new T.Uniform2f(x,A.u_pattern_size_b),u_scale_a:new T.Uniform1f(x,A.u_scale_a),u_scale_b:new T.Uniform1f(x,A.u_scale_b),u_pixel_coord_upper:new T.Uniform2f(x,A.u_pixel_coord_upper),u_pixel_coord_lower:new T.Uniform2f(x,A.u_pixel_coord_lower),u_tile_units_to_pixels:new T.Uniform1f(x,A.u_tile_units_to_pixels)}}};function Qc(x,A,w,R,j,Y,te){for(var we=x.context,tt=we.gl,At=x.useProgram("collisionBox"),$t=[],qt=0,rn=0,kn=0;kn<R.length;kn++){var Rn=R[kn],qn=A.getTile(Rn),wn=qn.getBucket(w);if(wn){var Kn=Rn.posMatrix;j[0]===0&&j[1]===0||(Kn=x.translatePosMatrix(Rn.posMatrix,qn,j,Y));var mr=te?wn.textCollisionBox:wn.iconCollisionBox,Or=wn.collisionCircleArray;if(Or.length>0){var Wr=T.create(),Ur=Kn;T.mul(Wr,wn.placementInvProjMatrix,x.transform.glCoordMatrix),T.mul(Wr,Wr,wn.placementViewportMatrix),$t.push({circleArray:Or,circleOffset:rn,transform:Ur,invTransform:Wr}),rn=qt+=Or.length/4}mr&&At.draw(we,tt.LINES,gt.disabled,Bt.disabled,x.colorModeForRenderPass(),An.disabled,gc(Kn,x.transform,qn),w.id,mr.layoutVertexBuffer,mr.indexBuffer,mr.segments,null,x.transform.zoom,null,null,mr.collisionVertexBuffer)}}if(te&&$t.length){var qr=x.useProgram("collisionCircle"),_i=new T.StructArrayLayout2f1f2i16;_i.resize(4*qt),_i._trim();for(var q=0,ue=0,fe=$t;ue<fe.length;ue+=1)for(var Me=fe[ue],ze=0;ze<Me.circleArray.length/4;ze++){var Be=4*ze,en=Me.circleArray[Be+0],Qt=Me.circleArray[Be+1],Xn=Me.circleArray[Be+2],pn=Me.circleArray[Be+3];_i.emplace(q++,en,Qt,Xn,pn,0),_i.emplace(q++,en,Qt,Xn,pn,1),_i.emplace(q++,en,Qt,Xn,pn,2),_i.emplace(q++,en,Qt,Xn,pn,3)}(!Kc||Kc.length<2*qt)&&(Kc=function(ua){var la=2*ua,Ua=new T.StructArrayLayout3ui6;Ua.resize(la),Ua._trim();for(var $a=0;$a<la;$a++){var oo=6*$a;Ua.uint16[oo+0]=4*$a+0,Ua.uint16[oo+1]=4*$a+1,Ua.uint16[oo+2]=4*$a+2,Ua.uint16[oo+3]=4*$a+2,Ua.uint16[oo+4]=4*$a+3,Ua.uint16[oo+5]=4*$a+0}return Ua}(qt));for(var sr=we.createIndexBuffer(Kc,!0),br=we.createVertexBuffer(_i,T.collisionCircleLayout.members,!0),Ai=0,xi=$t;Ai<xi.length;Ai+=1){var ci=xi[Ai],da=Kf(ci.transform,ci.invTransform,x.transform);qr.draw(we,tt.TRIANGLES,gt.disabled,Bt.disabled,x.colorModeForRenderPass(),An.disabled,da,w.id,br,sr,T.SegmentVector.simpleSegment(0,2*ci.circleOffset,ci.circleArray.length,ci.circleArray.length/2),null,x.transform.zoom,null,null,null)}br.destroy(),sr.destroy()}}var Pl=T.identity(new Float32Array(16));function cp(x,A,w,R,j,Y){var te=T.getAnchorAlignment(x),we=-(te.horizontalAlign-.5)*A,tt=-(te.verticalAlign-.5)*w,At=T.evaluateVariableOffset(x,R);return new T.Point((we/j+At[0])*Y,(tt/j+At[1])*Y)}function Md(x,A,w,R,j,Y,te,we,tt,At,$t){var qt=x.text.placedSymbolArray,rn=x.text.dynamicLayoutVertexArray,kn=x.icon.dynamicLayoutVertexArray,Rn={};rn.clear();for(var qn=0;qn<qt.length;qn++){var wn=qt.get(qn),Kn=wn.hidden||!wn.crossTileID||x.allowVerticalPlacement&&!wn.placedOrientation?null:R[wn.crossTileID];if(Kn){var mr=new T.Point(wn.anchorX,wn.anchorY),Or=Gn(mr,w?we:te),Wr=Ht(Y.cameraToCenterDistance,Or.signedDistanceFromCamera),Ur=j.evaluateSizeForFeature(x.textSizeData,At,wn)*Wr/T.ONE_EM;w&&(Ur*=x.tilePixelRatio/tt);for(var qr=cp(Kn.anchor,Kn.width,Kn.height,Kn.textOffset,Kn.textBoxScale,Ur),_i=w?Gn(mr.add(qr),te).point:Or.point.add(A?qr.rotate(-Y.angle):qr),q=x.allowVerticalPlacement&&wn.placedOrientation===T.WritingMode.vertical?Math.PI/2:0,ue=0;ue<wn.numGlyphs;ue++)T.addDynamicAttributes(rn,_i,q);$t&&wn.associatedIconIndex>=0&&(Rn[wn.associatedIconIndex]={shiftedAnchor:_i,angle:q})}else $i(wn.numGlyphs,rn)}if($t){kn.clear();for(var fe=x.icon.placedSymbolArray,Me=0;Me<fe.length;Me++){var ze=fe.get(Me);if(ze.hidden)$i(ze.numGlyphs,kn);else{var Be=Rn[Me];if(Be)for(var en=0;en<ze.numGlyphs;en++)T.addDynamicAttributes(kn,Be.shiftedAnchor,Be.angle);else $i(ze.numGlyphs,kn)}}x.icon.dynamicLayoutVertexBuffer.updateData(kn)}x.text.dynamicLayoutVertexBuffer.updateData(rn)}function yh(x,A,w){return w.iconsInText&&A?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function Qf(x,A,w,R,j,Y,te,we,tt,At,$t,qt){for(var rn=x.context,kn=rn.gl,Rn=x.transform,qn=we==="map",wn=tt==="map",Kn=qn&&w.layout.get("symbol-placement")!=="point",mr=qn&&!wn&&!Kn,Or=w.layout.get("symbol-sort-key").constantOr(1)!==void 0,Wr=!1,Ur=x.depthModeForSublayer(0,gt.ReadOnly),qr=w.layout.get("text-variable-anchor"),_i=[],q=0,ue=R;q<ue.length;q+=1){var fe=ue[q],Me=A.getTile(fe),ze=Me.getBucket(w);if(ze){var Be=j?ze.text:ze.icon;if(Be&&Be.segments.get().length){var en=Be.programConfigurations.get(w.id),Qt=j||ze.sdfIcons,Xn=j?ze.textSizeData:ze.iconSizeData,pn=wn||Rn.pitch!==0,sr=x.useProgram(yh(Qt,j,ze),en),br=T.evaluateSizeForZoom(Xn,Rn.zoom),Ai=void 0,xi=[0,0],ci=void 0,da=void 0,ua=null,la=void 0;if(j)ci=Me.glyphAtlasTexture,da=kn.LINEAR,Ai=Me.glyphAtlasTexture.size,ze.iconsInText&&(xi=Me.imageAtlasTexture.size,ua=Me.imageAtlasTexture,la=pn||x.options.rotating||x.options.zooming||Xn.kind==="composite"||Xn.kind==="camera"?kn.LINEAR:kn.NEAREST);else{var Ua=w.layout.get("icon-size").constantOr(0)!==1||ze.iconsNeedLinear;ci=Me.imageAtlasTexture,da=Qt||x.options.rotating||x.options.zooming||Ua||pn?kn.LINEAR:kn.NEAREST,Ai=Me.imageAtlasTexture.size}var $a=ea(Me,1,x.transform.zoom),oo=Mn(fe.posMatrix,wn,qn,x.transform,$a),ms=Yn(fe.posMatrix,wn,qn,x.transform,$a),bs=qr&&ze.hasTextData(),Fs=w.layout.get("icon-text-fit")!=="none"&&bs&&ze.hasIconData();Kn&&Cr(ze,fe.posMatrix,x,j,oo,ms,wn,At);var rs=x.translatePosMatrix(fe.posMatrix,Me,Y,te),So=Kn||j&&qr||Fs?Pl:oo,es=x.translatePosMatrix(ms,Me,Y,te,!0),Tu=Qt&&w.paint.get(j?"text-halo-width":"icon-halo-width").constantOr(1)!==0,rl={program:sr,buffers:Be,uniformValues:Qt?ze.iconsInText?Wu(Xn.kind,br,mr,wn,x,rs,So,es,Ai,xi):df(Xn.kind,br,mr,wn,x,rs,So,es,j,Ai,!0):Rc(Xn.kind,br,mr,wn,x,rs,So,es,j,Ai),atlasTexture:ci,atlasTextureIcon:ua,atlasInterpolation:da,atlasInterpolationIcon:la,isSDF:Qt,hasHalo:Tu};if(Or&&ze.canOverlap){Wr=!0;for(var bu=0,Du=Be.segments.get();bu<Du.length;bu+=1){var Ll=Du[bu];_i.push({segments:new T.SegmentVector([Ll]),sortKey:Ll.sortKey,state:rl})}}else _i.push({segments:Be.segments,sortKey:0,state:rl})}}}Wr&&_i.sort(function(Dc,xf){return Dc.sortKey-xf.sortKey});for(var xc=0,ef=_i;xc<ef.length;xc+=1){var pl=ef[xc],Au=pl.state;if(rn.activeTexture.set(kn.TEXTURE0),Au.atlasTexture.bind(Au.atlasInterpolation,kn.CLAMP_TO_EDGE),Au.atlasTextureIcon&&(rn.activeTexture.set(kn.TEXTURE1),Au.atlasTextureIcon&&Au.atlasTextureIcon.bind(Au.atlasInterpolationIcon,kn.CLAMP_TO_EDGE)),Au.isSDF){var ac=Au.uniformValues;Au.hasHalo&&(ac.u_is_halo=1,Jc(Au.buffers,pl.segments,w,x,Au.program,Ur,$t,qt,ac)),ac.u_is_halo=0}Jc(Au.buffers,pl.segments,w,x,Au.program,Ur,$t,qt,Au.uniformValues)}}function Jc(x,A,w,R,j,Y,te,we,tt){var At=R.context;j.draw(At,At.gl.TRIANGLES,Y,te,we,An.disabled,tt,w.id,x.layoutVertexBuffer,x.indexBuffer,A,w.paint,R.transform.zoom,x.programConfigurations.get(w.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Jf(x,A,w,R,j,Y,te){var we,tt,At,$t,qt,rn=x.context.gl,kn=w.paint.get("fill-pattern"),Rn=kn&&kn.constantOr(1),qn=w.getCrossfadeParameters();te?(tt=Rn&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=rn.LINES):(tt=Rn?"fillPattern":"fill",we=rn.TRIANGLES);for(var wn=0,Kn=R;wn<Kn.length;wn+=1){var mr=Kn[wn],Or=A.getTile(mr);if(!Rn||Or.patternsLoaded()){var Wr=Or.getBucket(w);if(Wr){var Ur=Wr.programConfigurations.get(w.id),qr=x.useProgram(tt,Ur);Rn&&(x.context.activeTexture.set(rn.TEXTURE0),Or.imageAtlasTexture.bind(rn.LINEAR,rn.CLAMP_TO_EDGE),Ur.updatePaintBuffers(qn));var _i=kn.constantOr(null);if(_i&&Or.imageAtlas){var q=Or.imageAtlas,ue=q.patternPositions[_i.to.toString()],fe=q.patternPositions[_i.from.toString()];ue&&fe&&Ur.setConstantPatternPositions(ue,fe)}var Me=x.translatePosMatrix(mr.posMatrix,Or,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(te){$t=Wr.indexBuffer2,qt=Wr.segments2;var ze=[rn.drawingBufferWidth,rn.drawingBufferHeight];At=tt==="fillOutlinePattern"&&Rn?jh(Me,x,qn,Or,ze):nc(Me,ze)}else $t=Wr.indexBuffer,qt=Wr.segments,At=Rn?mc(Me,x,qn,Or):qc(Me);qr.draw(x.context,we,j,x.stencilModeForClipping(mr),Y,An.disabled,At,w.id,Wr.layoutVertexBuffer,$t,qt,w.paint,x.transform.zoom,Ur)}}}}function eh(x,A,w,R,j,Y,te){for(var we=x.context,tt=we.gl,At=w.paint.get("fill-extrusion-pattern"),$t=At.constantOr(1),qt=w.getCrossfadeParameters(),rn=w.paint.get("fill-extrusion-opacity"),kn=0,Rn=R;kn<Rn.length;kn+=1){var qn=Rn[kn],wn=A.getTile(qn),Kn=wn.getBucket(w);if(Kn){var mr=Kn.programConfigurations.get(w.id),Or=x.useProgram($t?"fillExtrusionPattern":"fillExtrusion",mr);$t&&(x.context.activeTexture.set(tt.TEXTURE0),wn.imageAtlasTexture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE),mr.updatePaintBuffers(qt));var Wr=At.constantOr(null);if(Wr&&wn.imageAtlas){var Ur=wn.imageAtlas,qr=Ur.patternPositions[Wr.to.toString()],_i=Ur.patternPositions[Wr.from.toString()];qr&&_i&&mr.setConstantPatternPositions(qr,_i)}var q=x.translatePosMatrix(qn.posMatrix,wn,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),ue=w.paint.get("fill-extrusion-vertical-gradient"),fe=$t?ku(q,x,ue,rn,qn,qt,wn):lp(q,x,ue,rn);Or.draw(we,we.gl.TRIANGLES,j,Y,te,An.backCCW,fe,w.id,Kn.layoutVertexBuffer,Kn.indexBuffer,Kn.segments,w.paint,x.transform.zoom,mr)}}}function vf(x,A,w,R,j,Y){var te=x.context,we=te.gl,tt=A.fbo;if(tt){var At=x.useProgram("hillshade");te.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,tt.colorAttachment.get());var $t=function(qt,rn,kn){var Rn=kn.paint.get("hillshade-shadow-color"),qn=kn.paint.get("hillshade-highlight-color"),wn=kn.paint.get("hillshade-accent-color"),Kn=kn.paint.get("hillshade-illumination-direction")*(Math.PI/180);kn.paint.get("hillshade-illumination-anchor")==="viewport"&&(Kn-=qt.transform.angle);var mr,Or,Wr,Ur=!qt.options.moving;return{u_matrix:qt.transform.calculatePosMatrix(rn.tileID.toUnwrapped(),Ur),u_image:0,u_latrange:(mr=rn.tileID,Or=Math.pow(2,mr.canonical.z),Wr=mr.canonical.y,[new T.MercatorCoordinate(0,Wr/Or).toLngLat().lat,new T.MercatorCoordinate(0,(Wr+1)/Or).toLngLat().lat]),u_light:[kn.paint.get("hillshade-exaggeration"),Kn],u_shadow:Rn,u_highlight:qn,u_accent:wn}}(x,A,w);At.draw(te,we.TRIANGLES,R,j,Y,An.disabled,$t,w.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}}function fp(x,A,w,R,j,Y){var te=x.context,we=te.gl,tt=A.dem;if(tt&&tt.data){var At=tt.dim,$t=tt.stride,qt=tt.getPixels();if(te.activeTexture.set(we.TEXTURE1),te.pixelStoreUnpackPremultiplyAlpha.set(!1),A.demTexture=A.demTexture||x.getTileTexture($t),A.demTexture){var rn=A.demTexture;rn.update(qt,{premultiply:!1}),rn.bind(we.NEAREST,we.CLAMP_TO_EDGE)}else A.demTexture=new T.Texture(te,qt,we.RGBA,{premultiply:!1}),A.demTexture.bind(we.NEAREST,we.CLAMP_TO_EDGE);te.activeTexture.set(we.TEXTURE0);var kn=A.fbo;if(!kn){var Rn=new T.Texture(te,{width:At,height:At,data:null},we.RGBA);Rn.bind(we.LINEAR,we.CLAMP_TO_EDGE),(kn=A.fbo=te.createFramebuffer(At,At,!0)).colorAttachment.set(Rn.texture)}te.bindFramebuffer.set(kn.framebuffer),te.viewport.set([0,0,At,At]),x.useProgram("hillshadePrepare").draw(te,we.TRIANGLES,R,j,Y,An.disabled,function(qn,wn){var Kn=wn.stride,mr=T.create();return T.ortho(mr,0,T.EXTENT,-T.EXTENT,0,0,1),T.translate(mr,mr,[0,-T.EXTENT,0]),{u_matrix:mr,u_image:1,u_dimension:[Kn,Kn],u_zoom:qn.overscaledZ,u_unpack:wn.getUnpackVector()}}(A.tileID,tt),w.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments),A.needsHillshadePrepare=!1}}function ud(x,A,w,R,j){var Y=R.paint.get("raster-fade-duration");if(Y>0){var te=T.browser.now(),we=(te-x.timeAdded)/Y,tt=A?(te-A.timeAdded)/Y:-1,At=w.getSource(),$t=j.coveringZoomLevel({tileSize:At.tileSize,roundZoom:At.roundZoom}),qt=!A||Math.abs(A.tileID.overscaledZ-$t)>Math.abs(x.tileID.overscaledZ-$t),rn=qt&&x.refreshedUponExpiration?1:T.clamp(qt?we:1-tt,0,1);return x.refreshedUponExpiration&&we>=1&&(x.refreshedUponExpiration=!1),A?{opacity:1,mix:1-rn}:{opacity:rn,mix:0}}return{opacity:1,mix:0}}var hp=new T.Color(1,0,0,1),Df=new T.Color(0,1,0,1),dp=new T.Color(0,0,1,1),Hh=new T.Color(1,0,1,1),ld=new T.Color(0,1,1,1);function El(x,A,w,R){tl(x,0,A+w/2,x.transform.width,w,R)}function Pc(x,A,w,R){tl(x,A-w/2,0,w,x.transform.height,R)}function tl(x,A,w,R,j,Y){var te=x.context,we=te.gl;we.enable(we.SCISSOR_TEST),we.scissor(A*T.browser.devicePixelRatio,w*T.browser.devicePixelRatio,R*T.browser.devicePixelRatio,j*T.browser.devicePixelRatio),te.clear({color:Y}),we.disable(we.SCISSOR_TEST)}function Wh(x,A,w){var R=x.context,j=R.gl,Y=w.posMatrix,te=x.useProgram("debug"),we=gt.disabled,tt=Bt.disabled,At=x.colorModeForRenderPass();R.activeTexture.set(j.TEXTURE0),x.emptyTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),te.draw(R,j.LINE_STRIP,we,tt,At,An.disabled,Lf(Y,T.Color.red),"$debug",x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments);var $t=A.getTileByID(w.key).latestRawTileData,qt=Math.floor(($t&&$t.byteLength||0)/1024),rn=A.getTile(w).tileSize,kn=512/Math.min(rn,512)*(w.overscaledZ/x.transform.zoom)*.5,Rn=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(Rn+=" => "+w.overscaledZ),function(qn,wn){qn.initDebugOverlayCanvas();var Kn=qn.debugOverlayCanvas,mr=qn.context.gl,Or=qn.debugOverlayCanvas.getContext("2d");Or.clearRect(0,0,Kn.width,Kn.height),Or.shadowColor="white",Or.shadowBlur=2,Or.lineWidth=1.5,Or.strokeStyle="white",Or.textBaseline="top",Or.font="bold 36px Open Sans, sans-serif",Or.fillText(wn,5,5),Or.strokeText(wn,5,5),qn.debugOverlayTexture.update(Kn),qn.debugOverlayTexture.bind(mr.LINEAR,mr.CLAMP_TO_EDGE)}(x,Rn+" "+qt+"kb"),te.draw(R,j.TRIANGLES,we,tt,an.alphaBlended,An.disabled,Lf(Y,T.Color.transparent,kn),"$debug",x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments)}var th={symbol:function(x,A,w,R,j){if(x.renderPass==="translucent"){var Y=Bt.disabled,te=x.colorModeForRenderPass();w.layout.get("text-variable-anchor")&&function(we,tt,At,$t,qt,rn,kn){for(var Rn=tt.transform,qn=qt==="map",wn=rn==="map",Kn=0,mr=we;Kn<mr.length;Kn+=1){var Or=mr[Kn],Wr=$t.getTile(Or),Ur=Wr.getBucket(At);if(Ur&&Ur.text&&Ur.text.segments.get().length){var qr=T.evaluateSizeForZoom(Ur.textSizeData,Rn.zoom),_i=ea(Wr,1,tt.transform.zoom),q=Mn(Or.posMatrix,wn,qn,tt.transform,_i),ue=At.layout.get("icon-text-fit")!=="none"&&Ur.hasIconData();if(qr){var fe=Math.pow(2,Rn.zoom-Wr.tileID.overscaledZ);Md(Ur,qn,wn,kn,T.symbolSize,Rn,q,Or.posMatrix,fe,qr,ue)}}}}(R,x,w,A,w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),j),w.paint.get("icon-opacity").constantOr(1)!==0&&Qf(x,A,w,R,!1,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),w.layout.get("icon-rotation-alignment"),w.layout.get("icon-pitch-alignment"),w.layout.get("icon-keep-upright"),Y,te),w.paint.get("text-opacity").constantOr(1)!==0&&Qf(x,A,w,R,!0,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.layout.get("text-keep-upright"),Y,te),A.map.showCollisionBoxes&&(Qc(x,A,w,R,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),!0),Qc(x,A,w,R,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),!1))}},circle:function(x,A,w,R){if(x.renderPass==="translucent"){var j=w.paint.get("circle-opacity"),Y=w.paint.get("circle-stroke-width"),te=w.paint.get("circle-stroke-opacity"),we=w.layout.get("circle-sort-key").constantOr(1)!==void 0;if(j.constantOr(1)!==0||Y.constantOr(1)!==0&&te.constantOr(1)!==0){for(var tt=x.context,At=tt.gl,$t=x.depthModeForSublayer(0,gt.ReadOnly),qt=Bt.disabled,rn=x.colorModeForRenderPass(),kn=[],Rn=0;Rn<R.length;Rn++){var qn=R[Rn],wn=A.getTile(qn),Kn=wn.getBucket(w);if(Kn){var mr=Kn.programConfigurations.get(w.id),Or={programConfiguration:mr,program:x.useProgram("circle",mr),layoutVertexBuffer:Kn.layoutVertexBuffer,indexBuffer:Kn.indexBuffer,uniformValues:qf(x,qn,wn,w)};if(we)for(var Wr=0,Ur=Kn.segments.get();Wr<Ur.length;Wr+=1){var qr=Ur[Wr];kn.push({segments:new T.SegmentVector([qr]),sortKey:qr.sortKey,state:Or})}else kn.push({segments:Kn.segments,sortKey:0,state:Or})}}we&&kn.sort(function(Me,ze){return Me.sortKey-ze.sortKey});for(var _i=0,q=kn;_i<q.length;_i+=1){var ue=q[_i],fe=ue.state;fe.program.draw(tt,At.TRIANGLES,$t,qt,rn,An.disabled,fe.uniformValues,w.id,fe.layoutVertexBuffer,fe.indexBuffer,ue.segments,w.paint,x.transform.zoom,fe.programConfiguration)}}}},heatmap:function(x,A,w,R){if(w.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){var j=x.context,Y=j.gl,te=Bt.disabled,we=new an([Y.ONE,Y.ONE],T.Color.transparent,[!0,!0,!0,!0]);(function(kn,Rn,qn){var wn=kn.gl;kn.activeTexture.set(wn.TEXTURE1),kn.viewport.set([0,0,Rn.width/4,Rn.height/4]);var Kn=qn.heatmapFbo;if(Kn)wn.bindTexture(wn.TEXTURE_2D,Kn.colorAttachment.get()),kn.bindFramebuffer.set(Kn.framebuffer);else{var mr=wn.createTexture();wn.bindTexture(wn.TEXTURE_2D,mr),wn.texParameteri(wn.TEXTURE_2D,wn.TEXTURE_WRAP_S,wn.CLAMP_TO_EDGE),wn.texParameteri(wn.TEXTURE_2D,wn.TEXTURE_WRAP_T,wn.CLAMP_TO_EDGE),wn.texParameteri(wn.TEXTURE_2D,wn.TEXTURE_MIN_FILTER,wn.LINEAR),wn.texParameteri(wn.TEXTURE_2D,wn.TEXTURE_MAG_FILTER,wn.LINEAR),Kn=qn.heatmapFbo=kn.createFramebuffer(Rn.width/4,Rn.height/4,!1),function(Or,Wr,Ur,qr){var _i=Or.gl;_i.texImage2D(_i.TEXTURE_2D,0,_i.RGBA,Wr.width/4,Wr.height/4,0,_i.RGBA,Or.extRenderToTextureHalfFloat?Or.extTextureHalfFloat.HALF_FLOAT_OES:_i.UNSIGNED_BYTE,null),qr.colorAttachment.set(Ur)}(kn,Rn,mr,Kn)}})(j,x,w),j.clear({color:T.Color.transparent});for(var tt=0;tt<R.length;tt++){var At=R[tt];if(!A.hasRenderableParent(At)){var $t=A.getTile(At),qt=$t.getBucket(w);if(qt){var rn=qt.programConfigurations.get(w.id);x.useProgram("heatmap",rn).draw(j,Y.TRIANGLES,gt.disabled,te,we,An.disabled,Lu(At.posMatrix,$t,x.transform.zoom,w.paint.get("heatmap-intensity")),w.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,w.paint,x.transform.zoom,rn)}}}j.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(kn,Rn){var qn=kn.context,wn=qn.gl,Kn=Rn.heatmapFbo;if(Kn){qn.activeTexture.set(wn.TEXTURE0),wn.bindTexture(wn.TEXTURE_2D,Kn.colorAttachment.get()),qn.activeTexture.set(wn.TEXTURE1);var mr=Rn.colorRampTexture;mr||(mr=Rn.colorRampTexture=new T.Texture(qn,Rn.colorRamp,wn.RGBA)),mr.bind(wn.LINEAR,wn.CLAMP_TO_EDGE),kn.useProgram("heatmapTexture").draw(qn,wn.TRIANGLES,gt.disabled,Bt.disabled,kn.colorModeForRenderPass(),An.disabled,function(Or,Wr,Ur,qr){var _i=T.create();T.ortho(_i,0,Or.width,Or.height,0,0,1);var q=Or.context.gl;return{u_matrix:_i,u_world:[q.drawingBufferWidth,q.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Wr.paint.get("heatmap-opacity")}}(kn,Rn),Rn.id,kn.viewportBuffer,kn.quadTriangleIndexBuffer,kn.viewportSegments,Rn.paint,kn.transform.zoom)}}(x,w))},line:function(x,A,w,R){if(x.renderPass==="translucent"){var j=w.paint.get("line-opacity"),Y=w.paint.get("line-width");if(j.constantOr(1)!==0&&Y.constantOr(1)!==0)for(var te=x.depthModeForSublayer(0,gt.ReadOnly),we=x.colorModeForRenderPass(),tt=w.paint.get("line-dasharray"),At=w.paint.get("line-pattern"),$t=At.constantOr(1),qt=w.paint.get("line-gradient"),rn=w.getCrossfadeParameters(),kn=$t?"linePattern":tt?"lineSDF":qt?"lineGradient":"line",Rn=x.context,qn=Rn.gl,wn=!0,Kn=0,mr=R;Kn<mr.length;Kn+=1){var Or=mr[Kn],Wr=A.getTile(Or);if(!$t||Wr.patternsLoaded()){var Ur=Wr.getBucket(w);if(Ur){var qr=Ur.programConfigurations.get(w.id),_i=x.context.program.get(),q=x.useProgram(kn,qr),ue=wn||q.program!==_i,fe=At.constantOr(null);if(fe&&Wr.imageAtlas){var Me=Wr.imageAtlas,ze=Me.patternPositions[fe.to.toString()],Be=Me.patternPositions[fe.from.toString()];ze&&Be&&qr.setConstantPatternPositions(ze,Be)}var en=$t?Mc(x,Wr,w,rn):tt?Zp(x,Wr,w,tt,rn):qt?Ws(x,Wr,w,Ur.lineClipsArray.length):Ts(x,Wr,w);if($t)Rn.activeTexture.set(qn.TEXTURE0),Wr.imageAtlasTexture.bind(qn.LINEAR,qn.CLAMP_TO_EDGE),qr.updatePaintBuffers(rn);else if(tt&&(ue||x.lineAtlas.dirty))Rn.activeTexture.set(qn.TEXTURE0),x.lineAtlas.bind(Rn);else if(qt){var Qt=Ur.gradients[w.id],Xn=Qt.texture;if(w.gradientVersion!==Qt.version){var pn=256;if(w.stepInterpolant){var sr=A.getSource().maxzoom,br=Or.canonical.z===sr?Math.ceil(1<<x.transform.maxZoom-Or.canonical.z):1;pn=T.clamp(T.nextPowerOfTwo(Ur.maxLineLength/T.EXTENT*1024*br),256,Rn.maxTextureSize)}Qt.gradient=T.renderColorRamp({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:pn,image:Qt.gradient||void 0,clips:Ur.lineClipsArray}),Qt.texture?Qt.texture.update(Qt.gradient):Qt.texture=new T.Texture(Rn,Qt.gradient,qn.RGBA),Qt.version=w.gradientVersion,Xn=Qt.texture}Rn.activeTexture.set(qn.TEXTURE0),Xn.bind(w.stepInterpolant?qn.NEAREST:qn.LINEAR,qn.CLAMP_TO_EDGE)}q.draw(Rn,qn.TRIANGLES,te,x.stencilModeForClipping(Or),we,An.disabled,en,w.id,Ur.layoutVertexBuffer,Ur.indexBuffer,Ur.segments,w.paint,x.transform.zoom,qr,Ur.layoutVertexBuffer2),wn=!1}}}}},fill:function(x,A,w,R){var j=w.paint.get("fill-color"),Y=w.paint.get("fill-opacity");if(Y.constantOr(1)!==0){var te=x.colorModeForRenderPass(),we=w.paint.get("fill-pattern"),tt=x.opaquePassEnabledForLayer()&&!we.constantOr(1)&&j.constantOr(T.Color.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===tt){var At=x.depthModeForSublayer(1,x.renderPass==="opaque"?gt.ReadWrite:gt.ReadOnly);Jf(x,A,w,R,At,te,!1)}if(x.renderPass==="translucent"&&w.paint.get("fill-antialias")){var $t=x.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,gt.ReadOnly);Jf(x,A,w,R,$t,te,!0)}}},"fill-extrusion":function(x,A,w,R){var j=w.paint.get("fill-extrusion-opacity");if(j!==0&&x.renderPass==="translucent"){var Y=new gt(x.context.gl.LEQUAL,gt.ReadWrite,x.depthRangeFor3D);if(j!==1||w.paint.get("fill-extrusion-pattern").constantOr(1))eh(x,A,w,R,Y,Bt.disabled,an.disabled),eh(x,A,w,R,Y,x.stencilModeFor3D(),x.colorModeForRenderPass());else{var te=x.colorModeForRenderPass();eh(x,A,w,R,Y,Bt.disabled,te)}}},hillshade:function(x,A,w,R){if(x.renderPass==="offscreen"||x.renderPass==="translucent"){for(var j=x.context,Y=x.depthModeForSublayer(0,gt.ReadOnly),te=x.colorModeForRenderPass(),we=x.renderPass==="translucent"?x.stencilConfigForOverlap(R):[{},R],tt=we[0],At=0,$t=we[1];At<$t.length;At+=1){var qt=$t[At],rn=A.getTile(qt);rn.needsHillshadePrepare&&x.renderPass==="offscreen"?fp(x,rn,w,Y,Bt.disabled,te):x.renderPass==="translucent"&&vf(x,rn,w,Y,tt[qt.overscaledZ],te)}j.viewport.set([0,0,x.width,x.height])}},raster:function(x,A,w,R){if(x.renderPass==="translucent"&&w.paint.get("raster-opacity")!==0&&R.length)for(var j=x.context,Y=j.gl,te=A.getSource(),we=x.useProgram("raster"),tt=x.colorModeForRenderPass(),At=te instanceof Ct?[{},R]:x.stencilConfigForOverlap(R),$t=At[0],qt=At[1],rn=qt[qt.length-1].overscaledZ,kn=!x.options.moving,Rn=0,qn=qt;Rn<qn.length;Rn+=1){var wn=qn[Rn],Kn=x.depthModeForSublayer(wn.overscaledZ-rn,w.paint.get("raster-opacity")===1?gt.ReadWrite:gt.ReadOnly,Y.LESS),mr=A.getTile(wn),Or=x.transform.calculatePosMatrix(wn.toUnwrapped(),kn);mr.registerFadeDuration(w.paint.get("raster-fade-duration"));var Wr=A.findLoadedParent(wn,0),Ur=ud(mr,Wr,A,w,x.transform),qr=void 0,_i=void 0,q=w.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;j.activeTexture.set(Y.TEXTURE0),mr.texture.bind(q,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(Y.TEXTURE1),Wr?(Wr.texture.bind(q,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),qr=Math.pow(2,Wr.tileID.overscaledZ-mr.tileID.overscaledZ),_i=[mr.tileID.canonical.x*qr%1,mr.tileID.canonical.y*qr%1]):mr.texture.bind(q,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST);var ue=mh(Or,_i||[0,0],qr||1,Ur,w);te instanceof Ct?we.draw(j,Y.TRIANGLES,Kn,Bt.disabled,tt,An.disabled,ue,w.id,te.boundsBuffer,x.quadTriangleIndexBuffer,te.boundsSegments):we.draw(j,Y.TRIANGLES,Kn,$t[wn.overscaledZ],tt,An.disabled,ue,w.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}},background:function(x,A,w){var R=w.paint.get("background-color"),j=w.paint.get("background-opacity");if(j!==0){var Y=x.context,te=Y.gl,we=x.transform,tt=we.tileSize,At=w.paint.get("background-pattern");if(!x.isPatternMissing(At)){var $t=!At&&R.a===1&&j===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass===$t){var qt=Bt.disabled,rn=x.depthModeForSublayer(0,$t==="opaque"?gt.ReadWrite:gt.ReadOnly),kn=x.colorModeForRenderPass(),Rn=x.useProgram(At?"backgroundPattern":"background"),qn=we.coveringTiles({tileSize:tt});At&&(Y.activeTexture.set(te.TEXTURE0),x.imageManager.bind(x.context));for(var wn=w.getCrossfadeParameters(),Kn=0,mr=qn;Kn<mr.length;Kn+=1){var Or=mr[Kn],Wr=x.transform.calculatePosMatrix(Or.toUnwrapped()),Ur=At?pf(Wr,j,x,At,{tileID:Or,tileSize:tt},wn):gh(Wr,j,R);Rn.draw(Y,te.TRIANGLES,rn,qt,kn,An.disabled,Ur,w.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}}}},debug:function(x,A,w){for(var R=0;R<w.length;R++)Wh(x,A,w[R])},custom:function(x,A,w){var R=x.context,j=w.implementation;if(x.renderPass==="offscreen"){var Y=j.prerender;Y&&(x.setCustomLayerDefaults(),R.setColorMode(x.colorModeForRenderPass()),Y.call(j,R.gl,x.transform.customLayerMatrix()),R.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),R.setColorMode(x.colorModeForRenderPass()),R.setStencilMode(Bt.disabled);var te=j.renderingMode==="3d"?new gt(x.context.gl.LEQUAL,gt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,gt.ReadOnly);R.setDepthMode(te),j.render(R.gl,x.transform.customLayerMatrix()),R.setDirty(),x.setBaseState(),R.bindFramebuffer.set(null)}}},Ns=function(x,A){this.context=new kt(x),this.transform=A,this._tileTextures={},this.setup(),this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rf,this.gpuTimers={}};Ns.prototype.resize=function(x,A){if(this.width=x*T.browser.devicePixelRatio,this.height=A*T.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var w=0,R=this.style._order;w<R.length;w+=1)this.style._layers[R[w]].resize()},Ns.prototype.setup=function(){var x=this.context,A=new T.StructArrayLayout2i4;A.emplaceBack(0,0),A.emplaceBack(T.EXTENT,0),A.emplaceBack(0,T.EXTENT),A.emplaceBack(T.EXTENT,T.EXTENT),this.tileExtentBuffer=x.createVertexBuffer(A,za.members),this.tileExtentSegments=T.SegmentVector.simpleSegment(0,0,4,2);var w=new T.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(T.EXTENT,0),w.emplaceBack(0,T.EXTENT),w.emplaceBack(T.EXTENT,T.EXTENT),this.debugBuffer=x.createVertexBuffer(w,za.members),this.debugSegments=T.SegmentVector.simpleSegment(0,0,4,5);var R=new T.StructArrayLayout4i8;R.emplaceBack(0,0,0,0),R.emplaceBack(T.EXTENT,0,T.EXTENT,0),R.emplaceBack(0,T.EXTENT,0,T.EXTENT),R.emplaceBack(T.EXTENT,T.EXTENT,T.EXTENT,T.EXTENT),this.rasterBoundsBuffer=x.createVertexBuffer(R,nt.members),this.rasterBoundsSegments=T.SegmentVector.simpleSegment(0,0,4,2);var j=new T.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=x.createVertexBuffer(j,za.members),this.viewportSegments=T.SegmentVector.simpleSegment(0,0,4,2);var Y=new T.StructArrayLayout1ui2;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=x.createIndexBuffer(Y);var te=new T.StructArrayLayout3ui6;te.emplaceBack(0,1,2),te.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=x.createIndexBuffer(te),this.emptyTexture=new T.Texture(x,{width:1,height:1,data:new Uint8Array([0,0,0,0])},x.gl.RGBA);var we=this.context.gl;this.stencilClearMode=new Bt({func:we.ALWAYS,mask:0},0,255,we.ZERO,we.ZERO,we.ZERO)},Ns.prototype.clearStencil=function(){var x=this.context,A=x.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var w=T.create();T.ortho(w,0,this.width,this.height,0,0,1),T.scale(w,w,[A.drawingBufferWidth,A.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(x,A.TRIANGLES,gt.disabled,this.stencilClearMode,an.disabled,An.disabled,rc(w),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ns.prototype._renderTileClippingMasks=function(x,A){if(this.currentStencilSource!==x.source&&x.isTileClipped()&&A&&A.length){this.currentStencilSource=x.source;var w=this.context,R=w.gl;this.nextStencilID+A.length>256&&this.clearStencil(),w.setColorMode(an.disabled),w.setDepthMode(gt.disabled);var j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Y=0,te=A;Y<te.length;Y+=1){var we=te[Y],tt=this._tileClippingMaskIDs[we.key]=this.nextStencilID++;j.draw(w,R.TRIANGLES,gt.disabled,new Bt({func:R.ALWAYS,mask:0},tt,255,R.KEEP,R.KEEP,R.REPLACE),an.disabled,An.disabled,rc(we.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ns.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var x=this.nextStencilID++,A=this.context.gl;return new Bt({func:A.NOTEQUAL,mask:255},x,255,A.KEEP,A.KEEP,A.REPLACE)},Ns.prototype.stencilModeForClipping=function(x){var A=this.context.gl;return new Bt({func:A.EQUAL,mask:255},this._tileClippingMaskIDs[x.key],0,A.KEEP,A.KEEP,A.REPLACE)},Ns.prototype.stencilConfigForOverlap=function(x){var A,w=this.context.gl,R=x.sort(function(tt,At){return At.overscaledZ-tt.overscaledZ}),j=R[R.length-1].overscaledZ,Y=R[0].overscaledZ-j+1;if(Y>1){this.currentStencilSource=void 0,this.nextStencilID+Y>256&&this.clearStencil();for(var te={},we=0;we<Y;we++)te[we+j]=new Bt({func:w.GEQUAL,mask:255},we+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=Y,[te,R]}return[(A={},A[j]=Bt.disabled,A),R]},Ns.prototype.colorModeForRenderPass=function(){var x=this.context.gl;return this._showOverdrawInspector?new an([x.CONSTANT_COLOR,x.ONE],new T.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?an.unblended:an.alphaBlended},Ns.prototype.depthModeForSublayer=function(x,A,w){if(!this.opaquePassEnabledForLayer())return gt.disabled;var R=1-((1+this.currentLayer)*this.numSublayers+x)*this.depthEpsilon;return new gt(w||this.context.gl.LEQUAL,A,[R,R])},Ns.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ns.prototype.render=function(x,A){var w=this;this.style=x,this.options=A,this.lineAtlas=x.lineAtlas,this.imageManager=x.imageManager,this.glyphManager=x.glyphManager,this.symbolFadeChange=x.placement.symbolFadeChange(T.browser.now()),this.imageManager.beginFrame();var R=this.style._order,j=this.style.sourceCaches;for(var Y in j){var te=j[Y];te.used&&te.prepare(this.context)}var we,tt,At={},$t={},qt={};for(var rn in j){var kn=j[rn];At[rn]=kn.getVisibleCoordinates(),$t[rn]=At[rn].slice().reverse(),qt[rn]=kn.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Rn=0;Rn<R.length;Rn++)if(this.style._layers[R[Rn]].is3D()){this.opaquePassCutoff=Rn;break}this.renderPass="offscreen";for(var qn=0,wn=R;qn<wn.length;qn+=1){var Kn=this.style._layers[wn[qn]];if(Kn.hasOffscreenPass()&&!Kn.isHidden(this.transform.zoom)){var mr=$t[Kn.source];(Kn.type==="custom"||mr.length)&&this.renderLayer(this,j[Kn.source],Kn,mr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:A.showOverdrawInspector?T.Color.black:T.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=A.showOverdrawInspector,this.depthRangeFor3D=[0,1-(x._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){var Or=this.style._layers[R[this.currentLayer]],Wr=j[Or.source],Ur=At[Or.source];this._renderTileClippingMasks(Or,Ur),this.renderLayer(this,Wr,Or,Ur)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){var qr=this.style._layers[R[this.currentLayer]],_i=j[qr.source],q=(qr.type==="symbol"?qt:$t)[qr.source];this._renderTileClippingMasks(qr,At[qr.source]),this.renderLayer(this,_i,qr,q)}this.options.showTileBoundaries&&(T.values(this.style._layers).forEach(function(ue){ue.source&&!ue.isHidden(w.transform.zoom)&&(ue.source!==(tt&&tt.id)&&(tt=w.style.sourceCaches[ue.source]),(!we||we.getSource().maxzoom<tt.getSource().maxzoom)&&(we=tt))}),we&&th.debug(this,we,we.getVisibleCoordinates())),this.options.showPadding&&function(ue){var fe=ue.transform.padding;El(ue,ue.transform.height-(fe.top||0),3,hp),El(ue,fe.bottom||0,3,Df),Pc(ue,fe.left||0,3,dp),Pc(ue,ue.transform.width-(fe.right||0),3,Hh);var Me=ue.transform.centerPoint;(function(ze,Be,en,Qt){tl(ze,Be-1,en-10,2,20,Qt),tl(ze,Be-10,en-1,20,2,Qt)})(ue,Me.x,ue.transform.height-Me.y,ld)}(this),this.context.setDefault()},Ns.prototype.renderLayer=function(x,A,w,R){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||R.length)&&(this.id=w.id,this.gpuTimingStart(w),th[w.type](x,A,w,R,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ns.prototype.gpuTimingStart=function(x){if(this.options.gpuTiming){var A=this.context.extTimerQuery,w=this.gpuTimers[x.id];w||(w=this.gpuTimers[x.id]={calls:0,cpuTime:0,query:A.createQueryEXT()}),w.calls++,A.beginQueryEXT(A.TIME_ELAPSED_EXT,w.query)}},Ns.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var x=this.context.extTimerQuery;x.endQueryEXT(x.TIME_ELAPSED_EXT)}},Ns.prototype.collectGpuTimers=function(){var x=this.gpuTimers;return this.gpuTimers={},x},Ns.prototype.queryGpuTimers=function(x){var A={};for(var w in x){var R=x[w],j=this.context.extTimerQuery,Y=j.getQueryObjectEXT(R.query,j.QUERY_RESULT_EXT)/1e6;j.deleteQueryEXT(R.query),A[w]=Y}return A},Ns.prototype.translatePosMatrix=function(x,A,w,R,j){if(!w[0]&&!w[1])return x;var Y=j?R==="map"?this.transform.angle:0:R==="viewport"?-this.transform.angle:0;if(Y){var te=Math.sin(Y),we=Math.cos(Y);w=[w[0]*we-w[1]*te,w[0]*te+w[1]*we]}var tt=[j?w[0]:ea(A,w[0],this.transform.zoom),j?w[1]:ea(A,w[1],this.transform.zoom),0],At=new Float32Array(16);return T.translate(At,x,tt),At},Ns.prototype.saveTileTexture=function(x){var A=this._tileTextures[x.size[0]];A?A.push(x):this._tileTextures[x.size[0]]=[x]},Ns.prototype.getTileTexture=function(x){var A=this._tileTextures[x];return A&&A.length>0?A.pop():null},Ns.prototype.isPatternMissing=function(x){if(!x)return!1;if(!x.from||!x.to)return!0;var A=this.imageManager.getPattern(x.from.toString()),w=this.imageManager.getPattern(x.to.toString());return!A||!w},Ns.prototype.useProgram=function(x,A){this.cache=this.cache||{};var w=""+x+(A?A.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[w]||(this.cache[w]=new Hs(this.context,x,mv[x],A,Vh[x],this._showOverdrawInspector)),this.cache[w]},Ns.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ns.prototype.setBaseState=function(){var x=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(x.FUNC_ADD)},Ns.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=T.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ns.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Rd=function(x,A){this.points=x,this.planes=A};Rd.fromInvProjectionMatrix=function(x,A,w){var R=Math.pow(2,w),j=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(te){return T.transformMat4([],te,x)}).map(function(te){return T.scale$1([],te,1/te[3]/A*R)}),Y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(te){var we=T.sub([],j[te[0]],j[te[1]]),tt=T.sub([],j[te[2]],j[te[1]]),At=T.normalize([],T.cross([],we,tt)),$t=-T.dot(At,j[te[1]]);return At.concat($t)});return new Rd(j,Y)};var Wl=function(x,A){this.min=x,this.max=A,this.center=T.scale$2([],T.add([],this.min,this.max),.5)};Wl.prototype.quadrant=function(x){for(var A=[x%2==0,x<2],w=T.clone$2(this.min),R=T.clone$2(this.max),j=0;j<A.length;j++)w[j]=A[j]?this.min[j]:this.center[j],R[j]=A[j]?this.center[j]:this.max[j];return R[2]=this.max[2],new Wl(w,R)},Wl.prototype.distanceX=function(x){return Math.max(Math.min(this.max[0],x[0]),this.min[0])-x[0]},Wl.prototype.distanceY=function(x){return Math.max(Math.min(this.max[1],x[1]),this.min[1])-x[1]},Wl.prototype.intersects=function(x){for(var A=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],w=!0,R=0;R<x.planes.length;R++){for(var j=x.planes[R],Y=0,te=0;te<A.length;te++)Y+=T.dot$1(j,A[te])>=0;if(Y===0)return 0;Y!==A.length&&(w=!1)}if(w)return 2;for(var we=0;we<3;we++){for(var tt=Number.MAX_VALUE,At=-Number.MAX_VALUE,$t=0;$t<x.points.length;$t++){var qt=x.points[$t][we]-this.min[we];tt=Math.min(tt,qt),At=Math.max(At,qt)}if(At<0||tt>this.max[we]-this.min[we])return 0}return 1};var Nf=function(x,A,w,R){if(x===void 0&&(x=0),A===void 0&&(A=0),w===void 0&&(w=0),R===void 0&&(R=0),isNaN(x)||x<0||isNaN(A)||A<0||isNaN(w)||w<0||isNaN(R)||R<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=x,this.bottom=A,this.left=w,this.right=R};Nf.prototype.interpolate=function(x,A,w){return A.top!=null&&x.top!=null&&(this.top=T.number(x.top,A.top,w)),A.bottom!=null&&x.bottom!=null&&(this.bottom=T.number(x.bottom,A.bottom,w)),A.left!=null&&x.left!=null&&(this.left=T.number(x.left,A.left,w)),A.right!=null&&x.right!=null&&(this.right=T.number(x.right,A.right,w)),this},Nf.prototype.getCenter=function(x,A){var w=T.clamp((this.left+x-this.right)/2,0,x),R=T.clamp((this.top+A-this.bottom)/2,0,A);return new T.Point(w,R)},Nf.prototype.equals=function(x){return this.top===x.top&&this.bottom===x.bottom&&this.left===x.left&&this.right===x.right},Nf.prototype.clone=function(){return new Nf(this.top,this.bottom,this.left,this.right)},Nf.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var is=function(x,A,w,R,j){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=j===void 0||j,this._minZoom=x||0,this._maxZoom=A||22,this._minPitch=w==null?0:w,this._maxPitch=R==null?60:R,this.setMaxBounds(),this.width=0,this.height=0,this._center=new T.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Nf,this._posMatrixCache={},this._alignedPosMatrixCache={}},Bs={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};is.prototype.clone=function(){var x=new is(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return x.tileSize=this.tileSize,x.latRange=this.latRange,x.width=this.width,x.height=this.height,x._center=this._center,x.zoom=this.zoom,x.angle=this.angle,x._fov=this._fov,x._pitch=this._pitch,x._unmodified=this._unmodified,x._edgeInsets=this._edgeInsets.clone(),x._calcMatrices(),x},Bs.minZoom.get=function(){return this._minZoom},Bs.minZoom.set=function(x){this._minZoom!==x&&(this._minZoom=x,this.zoom=Math.max(this.zoom,x))},Bs.maxZoom.get=function(){return this._maxZoom},Bs.maxZoom.set=function(x){this._maxZoom!==x&&(this._maxZoom=x,this.zoom=Math.min(this.zoom,x))},Bs.minPitch.get=function(){return this._minPitch},Bs.minPitch.set=function(x){this._minPitch!==x&&(this._minPitch=x,this.pitch=Math.max(this.pitch,x))},Bs.maxPitch.get=function(){return this._maxPitch},Bs.maxPitch.set=function(x){this._maxPitch!==x&&(this._maxPitch=x,this.pitch=Math.min(this.pitch,x))},Bs.renderWorldCopies.get=function(){return this._renderWorldCopies},Bs.renderWorldCopies.set=function(x){x===void 0?x=!0:x===null&&(x=!1),this._renderWorldCopies=x},Bs.worldSize.get=function(){return this.tileSize*this.scale},Bs.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Bs.size.get=function(){return new T.Point(this.width,this.height)},Bs.bearing.get=function(){return-this.angle/Math.PI*180},Bs.bearing.set=function(x){var A=-T.wrap(x,-180,180)*Math.PI/180;this.angle!==A&&(this._unmodified=!1,this.angle=A,this._calcMatrices(),this.rotationMatrix=T.create$2(),T.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Bs.pitch.get=function(){return this._pitch/Math.PI*180},Bs.pitch.set=function(x){var A=T.clamp(x,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==A&&(this._unmodified=!1,this._pitch=A,this._calcMatrices())},Bs.fov.get=function(){return this._fov/Math.PI*180},Bs.fov.set=function(x){x=Math.max(.01,Math.min(60,x)),this._fov!==x&&(this._unmodified=!1,this._fov=x/180*Math.PI,this._calcMatrices())},Bs.zoom.get=function(){return this._zoom},Bs.zoom.set=function(x){var A=Math.min(Math.max(x,this.minZoom),this.maxZoom);this._zoom!==A&&(this._unmodified=!1,this._zoom=A,this.scale=this.zoomScale(A),this.tileZoom=Math.floor(A),this.zoomFraction=A-this.tileZoom,this._constrain(),this._calcMatrices())},Bs.center.get=function(){return this._center},Bs.center.set=function(x){x.lat===this._center.lat&&x.lng===this._center.lng||(this._unmodified=!1,this._center=x,this._constrain(),this._calcMatrices())},Bs.padding.get=function(){return this._edgeInsets.toJSON()},Bs.padding.set=function(x){this._edgeInsets.equals(x)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,x,1),this._calcMatrices())},Bs.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},is.prototype.isPaddingEqual=function(x){return this._edgeInsets.equals(x)},is.prototype.interpolatePadding=function(x,A,w){this._unmodified=!1,this._edgeInsets.interpolate(x,A,w),this._constrain(),this._calcMatrices()},is.prototype.coveringZoomLevel=function(x){var A=(x.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/x.tileSize));return Math.max(0,A)},is.prototype.getVisibleUnwrappedCoordinates=function(x){var A=[new T.UnwrappedTileID(0,x)];if(this._renderWorldCopies)for(var w=this.pointCoordinate(new T.Point(0,0)),R=this.pointCoordinate(new T.Point(this.width,0)),j=this.pointCoordinate(new T.Point(this.width,this.height)),Y=this.pointCoordinate(new T.Point(0,this.height)),te=Math.floor(Math.min(w.x,R.x,j.x,Y.x)),we=Math.floor(Math.max(w.x,R.x,j.x,Y.x)),tt=te-1;tt<=we+1;tt++)tt!==0&&A.push(new T.UnwrappedTileID(tt,x));return A},is.prototype.coveringTiles=function(x){var A=this.coveringZoomLevel(x),w=A;if(x.minzoom!==void 0&&A<x.minzoom)return[];x.maxzoom!==void 0&&A>x.maxzoom&&(A=x.maxzoom);var R=T.MercatorCoordinate.fromLngLat(this.center),j=Math.pow(2,A),Y=[j*R.x,j*R.y,0],te=Rd.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,A),we=x.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(we=A);var tt=function(ue){return{aabb:new Wl([ue*j,0,0],[(ue+1)*j,j,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}},At=[],$t=[],qt=A,rn=x.reparseOverscaled?w:A;if(this._renderWorldCopies)for(var kn=1;kn<=3;kn++)At.push(tt(-kn)),At.push(tt(kn));for(At.push(tt(0));At.length>0;){var Rn=At.pop(),qn=Rn.x,wn=Rn.y,Kn=Rn.fullyVisible;if(!Kn){var mr=Rn.aabb.intersects(te);if(mr===0)continue;Kn=mr===2}var Or=Rn.aabb.distanceX(Y),Wr=Rn.aabb.distanceY(Y),Ur=Math.max(Math.abs(Or),Math.abs(Wr));if(Rn.zoom===qt||Ur>3+(1<<qt-Rn.zoom)-2&&Rn.zoom>=we)$t.push({tileID:new T.OverscaledTileID(Rn.zoom===qt?rn:Rn.zoom,Rn.wrap,Rn.zoom,qn,wn),distanceSq:T.sqrLen([Y[0]-.5-qn,Y[1]-.5-wn])});else for(var qr=0;qr<4;qr++){var _i=(qn<<1)+qr%2,q=(wn<<1)+(qr>>1);At.push({aabb:Rn.aabb.quadrant(qr),zoom:Rn.zoom+1,x:_i,y:q,wrap:Rn.wrap,fullyVisible:Kn})}}return $t.sort(function(ue,fe){return ue.distanceSq-fe.distanceSq}).map(function(ue){return ue.tileID})},is.prototype.resize=function(x,A){this.width=x,this.height=A,this.pixelsToGLUnits=[2/x,-2/A],this._constrain(),this._calcMatrices()},Bs.unmodified.get=function(){return this._unmodified},is.prototype.zoomScale=function(x){return Math.pow(2,x)},is.prototype.scaleZoom=function(x){return Math.log(x)/Math.LN2},is.prototype.project=function(x){var A=T.clamp(x.lat,-this.maxValidLatitude,this.maxValidLatitude);return new T.Point(T.mercatorXfromLng(x.lng)*this.worldSize,T.mercatorYfromLat(A)*this.worldSize)},is.prototype.unproject=function(x){return new T.MercatorCoordinate(x.x/this.worldSize,x.y/this.worldSize).toLngLat()},Bs.point.get=function(){return this.project(this.center)},is.prototype.setLocationAtPoint=function(x,A){var w=this.pointCoordinate(A),R=this.pointCoordinate(this.centerPoint),j=this.locationCoordinate(x),Y=new T.MercatorCoordinate(j.x-(w.x-R.x),j.y-(w.y-R.y));this.center=this.coordinateLocation(Y),this._renderWorldCopies&&(this.center=this.center.wrap())},is.prototype.locationPoint=function(x){return this.coordinatePoint(this.locationCoordinate(x))},is.prototype.pointLocation=function(x){return this.coordinateLocation(this.pointCoordinate(x))},is.prototype.locationCoordinate=function(x){return T.MercatorCoordinate.fromLngLat(x)},is.prototype.coordinateLocation=function(x){return x.toLngLat()},is.prototype.pointCoordinate=function(x){var A=[x.x,x.y,0,1],w=[x.x,x.y,1,1];T.transformMat4(A,A,this.pixelMatrixInverse),T.transformMat4(w,w,this.pixelMatrixInverse);var R=A[3],j=w[3],Y=A[1]/R,te=w[1]/j,we=A[2]/R,tt=w[2]/j,At=we===tt?0:(0-we)/(tt-we);return new T.MercatorCoordinate(T.number(A[0]/R,w[0]/j,At)/this.worldSize,T.number(Y,te,At)/this.worldSize)},is.prototype.coordinatePoint=function(x){var A=[x.x*this.worldSize,x.y*this.worldSize,0,1];return T.transformMat4(A,A,this.pixelMatrix),new T.Point(A[0]/A[3],A[1]/A[3])},is.prototype.getBounds=function(){return new T.LngLatBounds().extend(this.pointLocation(new T.Point(0,0))).extend(this.pointLocation(new T.Point(this.width,0))).extend(this.pointLocation(new T.Point(this.width,this.height))).extend(this.pointLocation(new T.Point(0,this.height)))},is.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new T.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},is.prototype.setMaxBounds=function(x){x?(this.lngRange=[x.getWest(),x.getEast()],this.latRange=[x.getSouth(),x.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},is.prototype.calculatePosMatrix=function(x,A){A===void 0&&(A=!1);var w=x.key,R=A?this._alignedPosMatrixCache:this._posMatrixCache;if(R[w])return R[w];var j=x.canonical,Y=this.worldSize/this.zoomScale(j.z),te=j.x+Math.pow(2,j.z)*x.wrap,we=T.identity(new Float64Array(16));return T.translate(we,we,[te*Y,j.y*Y,0]),T.scale(we,we,[Y/T.EXTENT,Y/T.EXTENT,1]),T.multiply(we,A?this.alignedProjMatrix:this.projMatrix,we),R[w]=new Float32Array(we),R[w]},is.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},is.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var x,A,w,R,j=-90,Y=90,te=-180,we=180,tt=this.size,At=this._unmodified;if(this.latRange){var $t=this.latRange;j=T.mercatorYfromLat($t[1])*this.worldSize,x=(Y=T.mercatorYfromLat($t[0])*this.worldSize)-j<tt.y?tt.y/(Y-j):0}if(this.lngRange){var qt=this.lngRange;te=T.mercatorXfromLng(qt[0])*this.worldSize,A=(we=T.mercatorXfromLng(qt[1])*this.worldSize)-te<tt.x?tt.x/(we-te):0}var rn=this.point,kn=Math.max(A||0,x||0);if(kn)return this.center=this.unproject(new T.Point(A?(we+te)/2:rn.x,x?(Y+j)/2:rn.y)),this.zoom+=this.scaleZoom(kn),this._unmodified=At,void(this._constraining=!1);if(this.latRange){var Rn=rn.y,qn=tt.y/2;Rn-qn<j&&(R=j+qn),Rn+qn>Y&&(R=Y-qn)}if(this.lngRange){var wn=rn.x,Kn=tt.x/2;wn-Kn<te&&(w=te+Kn),wn+Kn>we&&(w=we-Kn)}w===void 0&&R===void 0||(this.center=this.unproject(new T.Point(w!==void 0?w:rn.x,R!==void 0?R:rn.y))),this._unmodified=At,this._constraining=!1}},is.prototype._calcMatrices=function(){if(this.height){var x=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var A=Math.PI/2+this._pitch,w=this._fov*(.5+x.y/this.height),R=Math.sin(w)*this.cameraToCenterDistance/Math.sin(T.clamp(Math.PI-A-w,.01,Math.PI-.01)),j=this.point,Y=j.x,te=j.y,we=1.01*(Math.cos(Math.PI/2-this._pitch)*R+this.cameraToCenterDistance),tt=this.height/50,At=new Float64Array(16);T.perspective(At,this._fov,this.width/this.height,tt,we),At[8]=2*-x.x/this.width,At[9]=2*x.y/this.height,T.scale(At,At,[1,-1,1]),T.translate(At,At,[0,0,-this.cameraToCenterDistance]),T.rotateX(At,At,this._pitch),T.rotateZ(At,At,this.angle),T.translate(At,At,[-Y,-te,0]),this.mercatorMatrix=T.scale([],At,[this.worldSize,this.worldSize,this.worldSize]),T.scale(At,At,[1,1,T.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=At,this.invProjMatrix=T.invert([],this.projMatrix);var $t=this.width%2/2,qt=this.height%2/2,rn=Math.cos(this.angle),kn=Math.sin(this.angle),Rn=Y-Math.round(Y)+rn*$t+kn*qt,qn=te-Math.round(te)+rn*qt+kn*$t,wn=new Float64Array(At);if(T.translate(wn,wn,[Rn>.5?Rn-1:Rn,qn>.5?qn-1:qn,0]),this.alignedProjMatrix=wn,At=T.create(),T.scale(At,At,[this.width/2,-this.height/2,1]),T.translate(At,At,[1,-1,0]),this.labelPlaneMatrix=At,At=T.create(),T.scale(At,At,[1,-1,1]),T.translate(At,At,[-1,-1,0]),T.scale(At,At,[2/this.width,2/this.height,1]),this.glCoordMatrix=At,this.pixelMatrix=T.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(At=T.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=At,this._posMatrixCache={},this._alignedPosMatrixCache={}}},is.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var x=this.pointCoordinate(new T.Point(0,0)),A=[x.x*this.worldSize,x.y*this.worldSize,0,1];return T.transformMat4(A,A,this.pixelMatrix)[3]/this.cameraToCenterDistance},is.prototype.getCameraPoint=function(){var x=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new T.Point(0,x))},is.prototype.getCameraQueryGeometry=function(x){var A=this.getCameraPoint();if(x.length===1)return[x[0],A];for(var w=A.x,R=A.y,j=A.x,Y=A.y,te=0,we=x;te<we.length;te+=1){var tt=we[te];w=Math.min(w,tt.x),R=Math.min(R,tt.y),j=Math.max(j,tt.x),Y=Math.max(Y,tt.y)}return[new T.Point(w,R),new T.Point(j,R),new T.Point(j,Y),new T.Point(w,Y),new T.Point(w,R)]},Object.defineProperties(is.prototype,Bs);var ic=function(x){var A,w,R,j;this._hashName=x&&encodeURIComponent(x),T.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(A=this._updateHashUnthrottled.bind(this),w=!1,R=null,j=function(){R=null,w&&(A(),R=setTimeout(j,300),w=!1)},function(){return w=!0,R||j(),R})};ic.prototype.addTo=function(x){return this._map=x,T.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ic.prototype.remove=function(){return T.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ic.prototype.getHashString=function(x){var A=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,R=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,R),Y=Math.round(A.lng*j)/j,te=Math.round(A.lat*j)/j,we=this._map.getBearing(),tt=this._map.getPitch(),At="";if(At+=x?"/"+Y+"/"+te+"/"+w:w+"/"+te+"/"+Y,(we||tt)&&(At+="/"+Math.round(10*we)/10),tt&&(At+="/"+Math.round(tt)),this._hashName){var $t=this._hashName,qt=!1,rn=T.window.location.hash.slice(1).split("&").map(function(kn){var Rn=kn.split("=")[0];return Rn===$t?(qt=!0,Rn+"="+At):kn}).filter(function(kn){return kn});return qt||rn.push($t+"="+At),"#"+rn.join("&")}return"#"+At},ic.prototype._getCurrentHash=function(){var x,A=this,w=T.window.location.hash.replace("#","");return this._hashName?(w.split("&").map(function(R){return R.split("=")}).forEach(function(R){R[0]===A._hashName&&(x=R)}),(x&&x[1]||"").split("/")):w.split("/")},ic.prototype._onHashChange=function(){var x=this._getCurrentHash();if(x.length>=3&&!x.some(function(w){return isNaN(w)})){var A=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(x[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+x[2],+x[1]],zoom:+x[0],bearing:A,pitch:+(x[4]||0)}),!0}return!1},ic.prototype._updateHashUnthrottled=function(){var x=T.window.location.href.replace(/(#.+)?$/,this.getHashString());try{T.window.history.replaceState(T.window.history.state,null,x)}catch(A){}};var cd={linearity:.3,easing:T.bezier(0,0,.3,1)},mf=T.extend({deceleration:2500,maxSpeed:1400},cd),Ic=T.extend({deceleration:20,maxSpeed:1400},cd),Vp=T.extend({deceleration:1e3,maxSpeed:360},cd),Pd=T.extend({deceleration:1e3,maxSpeed:90},cd),fd=function(x){this._map=x,this.clear()};function _h(x,A){(!x.duration||x.duration<A.duration)&&(x.duration=A.duration,x.easing=A.easing)}function nl(x,A,w){var R=w.maxSpeed,j=w.linearity,Y=w.deceleration,te=T.clamp(x*j/(A/1e3),-R,R),we=Math.abs(te)/(Y*j);return{easing:w.easing,duration:1e3*we,amount:te*(we/2)}}fd.prototype.clear=function(){this._inertiaBuffer=[]},fd.prototype.record=function(x){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.browser.now(),settings:x})},fd.prototype._drainInertiaBuffer=function(){for(var x=this._inertiaBuffer,A=T.browser.now();x.length>0&&A-x[0].time>160;)x.shift()},fd.prototype._onMoveEnd=function(x){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var A={zoom:0,bearing:0,pitch:0,pan:new T.Point(0,0),pinchAround:void 0,around:void 0},w=0,R=this._inertiaBuffer;w<R.length;w+=1){var j=R[w].settings;A.zoom+=j.zoomDelta||0,A.bearing+=j.bearingDelta||0,A.pitch+=j.pitchDelta||0,j.panDelta&&A.pan._add(j.panDelta),j.around&&(A.around=j.around),j.pinchAround&&(A.pinchAround=j.pinchAround)}var Y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,te={};if(A.pan.mag()){var we=nl(A.pan.mag(),Y,T.extend({},mf,x||{}));te.offset=A.pan.mult(we.amount/A.pan.mag()),te.center=this._map.transform.center,_h(te,we)}if(A.zoom){var tt=nl(A.zoom,Y,Ic);te.zoom=this._map.transform.zoom+tt.amount,_h(te,tt)}if(A.bearing){var At=nl(A.bearing,Y,Vp);te.bearing=this._map.transform.bearing+T.clamp(At.amount,-179,179),_h(te,At)}if(A.pitch){var $t=nl(A.pitch,Y,Pd);te.pitch=this._map.transform.pitch+$t.amount,_h(te,$t)}if(te.zoom||te.bearing){var qt=A.pinchAround===void 0?A.around:A.pinchAround;te.around=qt?this._map.unproject(qt):this._map.getCenter()}return this.clear(),T.extend(te,{noMoveStart:!0})}};var ru=function(x){function A(R,j,Y,te){te===void 0&&(te={});var we=Q.mousePos(j.getCanvasContainer(),Y),tt=j.unproject(we);x.call(this,R,T.extend({point:we,lngLat:tt,originalEvent:Y},te)),this._defaultPrevented=!1,this.target=j}x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A;var w={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,w),A}(T.Event),bh=function(x){function A(R,j,Y){var te=R==="touchend"?Y.changedTouches:Y.touches,we=Q.touchPos(j.getCanvasContainer(),te),tt=we.map(function(qt){return j.unproject(qt)}),At=we.reduce(function(qt,rn,kn,Rn){return qt.add(rn.div(Rn.length))},new T.Point(0,0)),$t=j.unproject(At);x.call(this,R,{points:we,point:At,lngLats:tt,lngLat:$t,originalEvent:Y}),this._defaultPrevented=!1}x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A;var w={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,w),A}(T.Event),pp=function(x){function A(R,j,Y){x.call(this,R,{originalEvent:Y}),this._defaultPrevented=!1}x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A;var w={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,w),A}(T.Event),uu=function(x,A){this._map=x,this._clickTolerance=A.clickTolerance};uu.prototype.reset=function(){delete this._mousedownPos},uu.prototype.wheel=function(x){return this._firePreventable(new pp(x.type,this._map,x))},uu.prototype.mousedown=function(x,A){return this._mousedownPos=A,this._firePreventable(new ru(x.type,this._map,x))},uu.prototype.mouseup=function(x){this._map.fire(new ru(x.type,this._map,x))},uu.prototype.click=function(x,A){this._mousedownPos&&this._mousedownPos.dist(A)>=this._clickTolerance||this._map.fire(new ru(x.type,this._map,x))},uu.prototype.dblclick=function(x){return this._firePreventable(new ru(x.type,this._map,x))},uu.prototype.mouseover=function(x){this._map.fire(new ru(x.type,this._map,x))},uu.prototype.mouseout=function(x){this._map.fire(new ru(x.type,this._map,x))},uu.prototype.touchstart=function(x){return this._firePreventable(new bh(x.type,this._map,x))},uu.prototype.touchmove=function(x){this._map.fire(new bh(x.type,this._map,x))},uu.prototype.touchend=function(x){this._map.fire(new bh(x.type,this._map,x))},uu.prototype.touchcancel=function(x){this._map.fire(new bh(x.type,this._map,x))},uu.prototype._firePreventable=function(x){if(this._map.fire(x),x.defaultPrevented)return{}},uu.prototype.isEnabled=function(){return!0},uu.prototype.isActive=function(){return!1},uu.prototype.enable=function(){},uu.prototype.disable=function(){};var Ma=function(x){this._map=x};Ma.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ma.prototype.mousemove=function(x){this._map.fire(new ru(x.type,this._map,x))},Ma.prototype.mousedown=function(){this._delayContextMenu=!0},Ma.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ru("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ma.prototype.contextmenu=function(x){this._delayContextMenu?this._contextMenuEvent=x:this._map.fire(new ru(x.type,this._map,x)),this._map.listens("contextmenu")&&x.preventDefault()},Ma.prototype.isEnabled=function(){return!0},Ma.prototype.isActive=function(){return!1},Ma.prototype.enable=function(){},Ma.prototype.disable=function(){};var Il=function(x,A){this._map=x,this._el=x.getCanvasContainer(),this._container=x.getContainer(),this._clickTolerance=A.clickTolerance||1};function $h(x,A){for(var w={},R=0;R<x.length;R++)w[x[R].identifier]=A[R];return w}Il.prototype.isEnabled=function(){return!!this._enabled},Il.prototype.isActive=function(){return!!this._active},Il.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Il.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Il.prototype.mousedown=function(x,A){this.isEnabled()&&x.shiftKey&&x.button===0&&(Q.disableDrag(),this._startPos=this._lastPos=A,this._active=!0)},Il.prototype.mousemoveWindow=function(x,A){if(this._active){var w=A;if(!(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)){var R=this._startPos;this._lastPos=w,this._box||(this._box=Q.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",x));var j=Math.min(R.x,w.x),Y=Math.max(R.x,w.x),te=Math.min(R.y,w.y),we=Math.max(R.y,w.y);Q.setTransform(this._box,"translate("+j+"px,"+te+"px)"),this._box.style.width=Y-j+"px",this._box.style.height=we-te+"px"}}},Il.prototype.mouseupWindow=function(x,A){var w=this;if(this._active&&x.button===0){var R=this._startPos,j=A;if(this.reset(),Q.suppressClick(),R.x!==j.x||R.y!==j.y)return this._map.fire(new T.Event("boxzoomend",{originalEvent:x})),{cameraAnimation:function(Y){return Y.fitScreenCoordinates(R,j,w._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",x)}},Il.prototype.keydown=function(x){this._active&&x.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",x))},Il.prototype.blur=function(){this.reset()},Il.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Q.remove(this._box),this._box=null),Q.enableDrag(),delete this._startPos,delete this._lastPos},Il.prototype._fireEvent=function(x,A){return this._map.fire(new T.Event(x,{originalEvent:A}))};var xh=function(x){this.reset(),this.numTouches=x.numTouches};xh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},xh.prototype.touchstart=function(x,A,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=x.timeStamp),w.length===this.numTouches&&(this.centroid=function(R){for(var j=new T.Point(0,0),Y=0,te=R;Y<te.length;Y+=1)j._add(te[Y]);return j.div(R.length)}(A),this.touches=$h(w,A)))},xh.prototype.touchmove=function(x,A,w){if(!this.aborted&&this.centroid){var R=$h(w,A);for(var j in this.touches){var Y=R[j];(!Y||Y.dist(this.touches[j])>30)&&(this.aborted=!0)}}},xh.prototype.touchend=function(x,A,w){if((!this.centroid||x.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){var R=!this.aborted&&this.centroid;if(this.reset(),R)return R}};var qo=function(x){this.singleTap=new xh(x),this.numTaps=x.numTaps,this.reset()};qo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},qo.prototype.touchstart=function(x,A,w){this.singleTap.touchstart(x,A,w)},qo.prototype.touchmove=function(x,A,w){this.singleTap.touchmove(x,A,w)},qo.prototype.touchend=function(x,A,w){var R=this.singleTap.touchend(x,A,w);if(R){var j=x.timeStamp-this.lastTime<500,Y=!this.lastTap||this.lastTap.dist(R)<30;if(j&&Y||this.reset(),this.count++,this.lastTime=x.timeStamp,this.lastTap=R,this.count===this.numTaps)return this.reset(),R}};var As=function(){this._zoomIn=new qo({numTouches:1,numTaps:2}),this._zoomOut=new qo({numTouches:2,numTaps:1}),this.reset()};As.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},As.prototype.touchstart=function(x,A,w){this._zoomIn.touchstart(x,A,w),this._zoomOut.touchstart(x,A,w)},As.prototype.touchmove=function(x,A,w){this._zoomIn.touchmove(x,A,w),this._zoomOut.touchmove(x,A,w)},As.prototype.touchend=function(x,A,w){var R=this,j=this._zoomIn.touchend(x,A,w),Y=this._zoomOut.touchend(x,A,w);return j?(this._active=!0,x.preventDefault(),setTimeout(function(){return R.reset()},0),{cameraAnimation:function(te){return te.easeTo({duration:300,zoom:te.getZoom()+1,around:te.unproject(j)},{originalEvent:x})}}):Y?(this._active=!0,x.preventDefault(),setTimeout(function(){return R.reset()},0),{cameraAnimation:function(te){return te.easeTo({duration:300,zoom:te.getZoom()-1,around:te.unproject(Y)},{originalEvent:x})}}):void 0},As.prototype.touchcancel=function(){this.reset()},As.prototype.enable=function(){this._enabled=!0},As.prototype.disable=function(){this._enabled=!1,this.reset()},As.prototype.isEnabled=function(){return this._enabled},As.prototype.isActive=function(){return this._active};var Eh={0:1,2:2},Z=function(x){this.reset(),this._clickTolerance=x.clickTolerance||1};Z.prototype.blur=function(){this.reset()},Z.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Z.prototype._correctButton=function(x,A){return!1},Z.prototype._move=function(x,A){return{}},Z.prototype.mousedown=function(x,A){if(!this._lastPoint){var w=Q.mouseButton(x);this._correctButton(x,w)&&(this._lastPoint=A,this._eventButton=w)}},Z.prototype.mousemoveWindow=function(x,A){var w=this._lastPoint;if(w){if(x.preventDefault(),function(R,j){var Y=Eh[j];return R.buttons===void 0||(R.buttons&Y)!==Y}(x,this._eventButton))this.reset();else if(this._moved||!(A.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=A,this._move(w,A)}},Z.prototype.mouseupWindow=function(x){this._lastPoint&&Q.mouseButton(x)===this._eventButton&&(this._moved&&Q.suppressClick(),this.reset())},Z.prototype.enable=function(){this._enabled=!0},Z.prototype.disable=function(){this._enabled=!1,this.reset()},Z.prototype.isEnabled=function(){return this._enabled},Z.prototype.isActive=function(){return this._active};var Vt=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.mousedown=function(w,R){x.prototype.mousedown.call(this,w,R),this._lastPoint&&(this._active=!0)},A.prototype._correctButton=function(w,R){return R===0&&!w.ctrlKey},A.prototype._move=function(w,R){return{around:R,panDelta:R.sub(w)}},A}(Z),Ne=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype._correctButton=function(w,R){return R===0&&w.ctrlKey||R===2},A.prototype._move=function(w,R){var j=.8*(R.x-w.x);if(j)return this._active=!0,{bearingDelta:j}},A.prototype.contextmenu=function(w){w.preventDefault()},A}(Z),$e=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype._correctButton=function(w,R){return R===0&&w.ctrlKey||R===2},A.prototype._move=function(w,R){var j=-.5*(R.y-w.y);if(j)return this._active=!0,{pitchDelta:j}},A.prototype.contextmenu=function(w){w.preventDefault()},A}(Z),Oe=function(x){this._minTouches=1,this._clickTolerance=x.clickTolerance||1,this.reset()};Oe.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new T.Point(0,0)},Oe.prototype.touchstart=function(x,A,w){return this._calculateTransform(x,A,w)},Oe.prototype.touchmove=function(x,A,w){if(this._active&&!(w.length<this._minTouches))return x.preventDefault(),this._calculateTransform(x,A,w)},Oe.prototype.touchend=function(x,A,w){this._calculateTransform(x,A,w),this._active&&w.length<this._minTouches&&this.reset()},Oe.prototype.touchcancel=function(){this.reset()},Oe.prototype._calculateTransform=function(x,A,w){w.length>0&&(this._active=!0);var R=$h(w,A),j=new T.Point(0,0),Y=new T.Point(0,0),te=0;for(var we in R){var tt=R[we],At=this._touches[we];At&&(j._add(tt),Y._add(tt.sub(At)),te++,R[we]=tt)}if(this._touches=R,!(te<this._minTouches)&&Y.mag()){var $t=Y.div(te);if(this._sum._add($t),!(this._sum.mag()<this._clickTolerance))return{around:j.div(te),panDelta:$t}}},Oe.prototype.enable=function(){this._enabled=!0},Oe.prototype.disable=function(){this._enabled=!1,this.reset()},Oe.prototype.isEnabled=function(){return this._enabled},Oe.prototype.isActive=function(){return this._active};var lt=function(){this.reset()};function un(x,A,w){for(var R=0;R<x.length;R++)if(x[R].identifier===w)return A[R]}function Zn(x,A){return Math.log(x/A)/Math.LN2}lt.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},lt.prototype._start=function(x){},lt.prototype._move=function(x,A,w){return{}},lt.prototype.touchstart=function(x,A,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([A[0],A[1]]))},lt.prototype.touchmove=function(x,A,w){if(this._firstTwoTouches){x.preventDefault();var R=this._firstTwoTouches,j=R[1],Y=un(w,A,R[0]),te=un(w,A,j);if(Y&&te){var we=this._aroundCenter?null:Y.add(te).div(2);return this._move([Y,te],we,x)}}},lt.prototype.touchend=function(x,A,w){if(this._firstTwoTouches){var R=this._firstTwoTouches,j=R[1],Y=un(w,A,R[0]),te=un(w,A,j);Y&&te||(this._active&&Q.suppressClick(),this.reset())}},lt.prototype.touchcancel=function(){this.reset()},lt.prototype.enable=function(x){this._enabled=!0,this._aroundCenter=!!x&&x.around==="center"},lt.prototype.disable=function(){this._enabled=!1,this.reset()},lt.prototype.isEnabled=function(){return this._enabled},lt.prototype.isActive=function(){return this._active};var mn=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.reset=function(){x.prototype.reset.call(this),delete this._distance,delete this._startDistance},A.prototype._start=function(w){this._startDistance=this._distance=w[0].dist(w[1])},A.prototype._move=function(w,R){var j=this._distance;if(this._distance=w[0].dist(w[1]),this._active||!(Math.abs(Zn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zn(this._distance,j),pinchAround:R}},A}(lt);function jn(x,A){return 180*x.angleWith(A)/Math.PI}var zr=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.reset=function(){x.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},A.prototype._start=function(w){this._startVector=this._vector=w[0].sub(w[1]),this._minDiameter=w[0].dist(w[1])},A.prototype._move=function(w,R){var j=this._vector;if(this._vector=w[0].sub(w[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:jn(this._vector,j),pinchAround:R}},A.prototype._isBelowThreshold=function(w){this._minDiameter=Math.min(this._minDiameter,w.mag());var R=25/(Math.PI*this._minDiameter)*360,j=jn(w,this._startVector);return Math.abs(j)<R},A}(lt);function li(x){return Math.abs(x.y)>Math.abs(x.x)}var Gi=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.reset=function(){x.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},A.prototype._start=function(w){this._lastPoints=w,li(w[0].sub(w[1]))&&(this._valid=!1)},A.prototype._move=function(w,R,j){var Y=w[0].sub(this._lastPoints[0]),te=w[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Y,te,j.timeStamp),this._valid)return this._lastPoints=w,this._active=!0,{pitchDelta:(Y.y+te.y)/2*-.5}},A.prototype.gestureBeginsVertically=function(w,R,j){if(this._valid!==void 0)return this._valid;var Y=w.mag()>=2,te=R.mag()>=2;if(Y||te){if(!Y||!te)return this._firstMove===void 0&&(this._firstMove=j),j-this._firstMove<100&&void 0;var we=w.y>0==R.y>0;return li(w)&&li(R)&&we}},A}(lt),na={panStep:100,bearingStep:15,pitchStep:10},ga=function(){var x=na;this._panStep=x.panStep,this._bearingStep=x.bearingStep,this._pitchStep=x.pitchStep,this._rotationDisabled=!1};function La(x){return x*(2-x)}ga.prototype.blur=function(){this.reset()},ga.prototype.reset=function(){this._active=!1},ga.prototype.keydown=function(x){var A=this;if(!(x.altKey||x.ctrlKey||x.metaKey)){var w=0,R=0,j=0,Y=0,te=0;switch(x.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:x.shiftKey?R=-1:(x.preventDefault(),Y=-1);break;case 39:x.shiftKey?R=1:(x.preventDefault(),Y=1);break;case 38:x.shiftKey?j=1:(x.preventDefault(),te=-1);break;case 40:x.shiftKey?j=-1:(x.preventDefault(),te=1);break;default:return}return this._rotationDisabled&&(R=0,j=0),{cameraAnimation:function(we){var tt=we.getZoom();we.easeTo({duration:300,easeId:"keyboardHandler",easing:La,zoom:w?Math.round(tt)+w*(x.shiftKey?2:1):tt,bearing:we.getBearing()+R*A._bearingStep,pitch:we.getPitch()+j*A._pitchStep,offset:[-Y*A._panStep,-te*A._panStep],center:we.getCenter()},{originalEvent:x})}}}},ga.prototype.enable=function(){this._enabled=!0},ga.prototype.disable=function(){this._enabled=!1,this.reset()},ga.prototype.isEnabled=function(){return this._enabled},ga.prototype.isActive=function(){return this._active},ga.prototype.disableRotation=function(){this._rotationDisabled=!0},ga.prototype.enableRotation=function(){this._rotationDisabled=!1};var ui=function(x,A){this._map=x,this._el=x.getCanvasContainer(),this._handler=A,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,T.bindAll(["_onTimeout"],this)};ui.prototype.setZoomRate=function(x){this._defaultZoomRate=x},ui.prototype.setWheelZoomRate=function(x){this._wheelZoomRate=x},ui.prototype.isEnabled=function(){return!!this._enabled},ui.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ui.prototype.isZooming=function(){return!!this._zooming},ui.prototype.enable=function(x){this.isEnabled()||(this._enabled=!0,this._aroundCenter=x&&x.around==="center")},ui.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ui.prototype.wheel=function(x){if(this.isEnabled()){var A=x.deltaMode===T.window.WheelEvent.DOM_DELTA_LINE?40*x.deltaY:x.deltaY,w=T.browser.now(),R=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,A!==0&&A%4.000244140625==0?this._type="wheel":A!==0&&Math.abs(A)<4?this._type="trackpad":R>400?(this._type=null,this._lastValue=A,this._timeout=setTimeout(this._onTimeout,40,x)):this._type||(this._type=Math.abs(R*A)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,A+=this._lastValue)),x.shiftKey&&A&&(A/=4),this._type&&(this._lastWheelEvent=x,this._delta-=A,this._active||this._start(x)),x.preventDefault()}},ui.prototype._onTimeout=function(x){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(x)},ui.prototype._start=function(x){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var A=Q.mousePos(this._el,x);this._around=T.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(A)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ui.prototype.renderFrame=function(){var x=this;if(this._frameId&&(this._frameId=null,this.isActive())){var A=this._map.transform;if(this._delta!==0){var w=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,R=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&R!==0&&(R=1/R);var j=typeof this._targetZoom=="number"?A.zoomScale(this._targetZoom):A.scale;this._targetZoom=Math.min(A.maxZoom,Math.max(A.minZoom,A.scaleZoom(j*R))),this._type==="wheel"&&(this._startZoom=A.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Y,te=typeof this._targetZoom=="number"?this._targetZoom:A.zoom,we=this._startZoom,tt=this._easing,At=!1;if(this._type==="wheel"&&we&&tt){var $t=Math.min((T.browser.now()-this._lastWheelEventTime)/200,1),qt=tt($t);Y=T.number(we,te,qt),$t<1?this._frameId||(this._frameId=!0):At=!0}else Y=te,At=!0;return this._active=!0,At&&(this._active=!1,this._finishTimeout=setTimeout(function(){x._zooming=!1,x._handler._triggerRenderFrame(),delete x._targetZoom,delete x._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!At,zoomDelta:Y-A.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ui.prototype._smoothOutEasing=function(x){var A=T.ease;if(this._prevEase){var w=this._prevEase,R=(T.browser.now()-w.start)/w.duration,j=w.easing(R+.01)-w.easing(R),Y=.27/Math.sqrt(j*j+1e-4)*.01,te=Math.sqrt(.0729-Y*Y);A=T.bezier(Y,te,.25,1)}return this._prevEase={start:T.browser.now(),duration:x,easing:A},A},ui.prototype.blur=function(){this.reset()},ui.prototype.reset=function(){this._active=!1};var Ka=function(x,A){this._clickZoom=x,this._tapZoom=A};Ka.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ka.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ka.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ka.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var uo=function(){this.reset()};uo.prototype.reset=function(){this._active=!1},uo.prototype.blur=function(){this.reset()},uo.prototype.dblclick=function(x,A){return x.preventDefault(),{cameraAnimation:function(w){w.easeTo({duration:300,zoom:w.getZoom()+(x.shiftKey?-1:1),around:w.unproject(A)},{originalEvent:x})}}},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active};var no=function(){this._tap=new qo({numTouches:1,numTaps:1}),this.reset()};no.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},no.prototype.touchstart=function(x,A,w){this._swipePoint||(this._tapTime&&x.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=A[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(x,A,w))},no.prototype.touchmove=function(x,A,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;var R=A[0],j=R.y-this._swipePoint.y;return this._swipePoint=R,x.preventDefault(),this._active=!0,{zoomDelta:j/128}}}else this._tap.touchmove(x,A,w)},no.prototype.touchend=function(x,A,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(x,A,w)&&(this._tapTime=x.timeStamp)},no.prototype.touchcancel=function(){this.reset()},no.prototype.enable=function(){this._enabled=!0},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var as=function(x,A,w){this._el=x,this._mousePan=A,this._touchPan=w};as.prototype.enable=function(x){this._inertiaOptions=x||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},as.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},as.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},as.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Es=function(x,A,w){this._pitchWithRotate=x.pitchWithRotate,this._mouseRotate=A,this._mousePitch=w};Es.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Es.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Es.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Es.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var vs=function(x,A,w,R){this._el=x,this._touchZoom=A,this._touchRotate=w,this._tapDragZoom=R,this._rotationDisabled=!1,this._enabled=!0};vs.prototype.enable=function(x){this._touchZoom.enable(x),this._rotationDisabled||this._touchRotate.enable(x),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},vs.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},vs.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},vs.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},vs.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},vs.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ko=function(x){return x.zoom||x.drag||x.pitch||x.rotate},_o=function(x){function A(){x.apply(this,arguments)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A}(T.Event);function oa(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}var ra=function(x,A){this._map=x,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new fd(x),this._bearingSnap=A.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(A),T.bindAll(["handleEvent","handleWindowEvent"],this);var w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[T.window.document,"mousemove",{capture:!0}],[T.window.document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[T.window,"blur",void 0]];for(var R=0,j=this._listeners;R<j.length;R+=1){var Y=j[R],te=Y[0];Q.addEventListener(te,Y[1],te===T.window.document?this.handleWindowEvent:this.handleEvent,Y[2])}};ra.prototype.destroy=function(){for(var x=0,A=this._listeners;x<A.length;x+=1){var w=A[x],R=w[0];Q.removeEventListener(R,w[1],R===T.window.document?this.handleWindowEvent:this.handleEvent,w[2])}},ra.prototype._addDefaultHandlers=function(x){var A=this._map,w=A.getCanvasContainer();this._add("mapEvent",new uu(A,x));var R=A.boxZoom=new Il(A,x);this._add("boxZoom",R);var j=new As,Y=new uo;A.doubleClickZoom=new Ka(Y,j),this._add("tapZoom",j),this._add("clickZoom",Y);var te=new no;this._add("tapDragZoom",te);var we=A.touchPitch=new Gi;this._add("touchPitch",we);var tt=new Ne(x),At=new $e(x);A.dragRotate=new Es(x,tt,At),this._add("mouseRotate",tt,["mousePitch"]),this._add("mousePitch",At,["mouseRotate"]);var $t=new Vt(x),qt=new Oe(x);A.dragPan=new as(w,$t,qt),this._add("mousePan",$t),this._add("touchPan",qt,["touchZoom","touchRotate"]);var rn=new zr,kn=new mn;A.touchZoomRotate=new vs(w,kn,rn,te),this._add("touchRotate",rn,["touchPan","touchZoom"]),this._add("touchZoom",kn,["touchPan","touchRotate"]);var Rn=A.scrollZoom=new ui(A,this);this._add("scrollZoom",Rn,["mousePan"]);var qn=A.keyboard=new ga;this._add("keyboard",qn),this._add("blockableMapEvent",new Ma(A));for(var wn=0,Kn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];wn<Kn.length;wn+=1){var mr=Kn[wn];x.interactive&&x[mr]&&A[mr].enable(x[mr])}},ra.prototype._add=function(x,A,w){this._handlers.push({handlerName:x,handler:A,allowed:w}),this._handlersById[x]=A},ra.prototype.stop=function(x){if(!this._updatingCamera){for(var A=0,w=this._handlers;A<w.length;A+=1)w[A].handler.reset();this._inertia.clear(),this._fireEvents({},{},x),this._changes=[]}},ra.prototype.isActive=function(){for(var x=0,A=this._handlers;x<A.length;x+=1)if(A[x].handler.isActive())return!0;return!1},ra.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ra.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ra.prototype.isMoving=function(){return!!Ko(this._eventsInProgress)||this.isZooming()},ra.prototype._blockedByActive=function(x,A,w){for(var R in x)if(R!==w&&(!A||A.indexOf(R)<0))return!0;return!1},ra.prototype.handleWindowEvent=function(x){this.handleEvent(x,x.type+"Window")},ra.prototype._getMapTouches=function(x){for(var A=[],w=0,R=x;w<R.length;w+=1){var j=R[w];this._el.contains(j.target)&&A.push(j)}return A},ra.prototype.handleEvent=function(x,A){this._updatingCamera=!0;for(var w=x.type==="renderFrame"?void 0:x,R={needsRenderFrame:!1},j={},Y={},te=x.touches?this._getMapTouches(x.touches):void 0,we=te?Q.touchPos(this._el,te):Q.mousePos(this._el,x),tt=0,At=this._handlers;tt<At.length;tt+=1){var $t=At[tt],qt=$t.handlerName,rn=$t.handler,kn=$t.allowed;if(rn.isEnabled()){var Rn=void 0;this._blockedByActive(Y,kn,qt)?rn.reset():rn[A||x.type]&&(Rn=rn[A||x.type](x,we,te),this.mergeHandlerResult(R,j,Rn,qt,w),Rn&&Rn.needsRenderFrame&&this._triggerRenderFrame()),(Rn||rn.isActive())&&(Y[qt]=rn)}}var qn={};for(var wn in this._previousActiveHandlers)Y[wn]||(qn[wn]=w);this._previousActiveHandlers=Y,(Object.keys(qn).length||oa(R))&&(this._changes.push([R,j,qn]),this._triggerRenderFrame()),(Object.keys(Y).length||oa(R))&&this._map._stop(!0),this._updatingCamera=!1;var Kn=R.cameraAnimation;Kn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Kn(this._map))},ra.prototype.mergeHandlerResult=function(x,A,w,R,j){if(w){T.extend(x,w);var Y={handlerName:R,originalEvent:w.originalEvent||j};w.zoomDelta!==void 0&&(A.zoom=Y),w.panDelta!==void 0&&(A.drag=Y),w.pitchDelta!==void 0&&(A.pitch=Y),w.bearingDelta!==void 0&&(A.rotate=Y)}},ra.prototype._applyChanges=function(){for(var x={},A={},w={},R=0,j=this._changes;R<j.length;R+=1){var Y=j[R],te=Y[0],we=Y[1],tt=Y[2];te.panDelta&&(x.panDelta=(x.panDelta||new T.Point(0,0))._add(te.panDelta)),te.zoomDelta&&(x.zoomDelta=(x.zoomDelta||0)+te.zoomDelta),te.bearingDelta&&(x.bearingDelta=(x.bearingDelta||0)+te.bearingDelta),te.pitchDelta&&(x.pitchDelta=(x.pitchDelta||0)+te.pitchDelta),te.around!==void 0&&(x.around=te.around),te.pinchAround!==void 0&&(x.pinchAround=te.pinchAround),te.noInertia&&(x.noInertia=te.noInertia),T.extend(A,we),T.extend(w,tt)}this._updateMapTransform(x,A,w),this._changes=[]},ra.prototype._updateMapTransform=function(x,A,w){var R=this._map,j=R.transform;if(!oa(x))return this._fireEvents(A,w,!0);var Y=x.panDelta,te=x.zoomDelta,we=x.bearingDelta,tt=x.pitchDelta,At=x.around,$t=x.pinchAround;$t!==void 0&&(At=$t),R._stop(!0),At=At||R.transform.centerPoint;var qt=j.pointLocation(Y?At.sub(Y):At);we&&(j.bearing+=we),tt&&(j.pitch+=tt),te&&(j.zoom+=te),j.setLocationAtPoint(qt,At),this._map._update(),x.noInertia||this._inertia.record(x),this._fireEvents(A,w,!0)},ra.prototype._fireEvents=function(x,A,w){var R=this,j=Ko(this._eventsInProgress),Y=Ko(x),te={};for(var we in x)this._eventsInProgress[we]||(te[we+"start"]=x[we].originalEvent),this._eventsInProgress[we]=x[we];for(var tt in!j&&Y&&this._fireEvent("movestart",Y.originalEvent),te)this._fireEvent(tt,te[tt]);for(var At in Y&&this._fireEvent("move",Y.originalEvent),x)this._fireEvent(At,x[At].originalEvent);var $t,qt={};for(var rn in this._eventsInProgress){var kn=this._eventsInProgress[rn],Rn=kn.handlerName,qn=kn.originalEvent;this._handlersById[Rn].isActive()||(delete this._eventsInProgress[rn],qt[rn+"end"]=$t=A[Rn]||qn)}for(var wn in qt)this._fireEvent(wn,qt[wn]);var Kn=Ko(this._eventsInProgress);if(w&&(j||Y)&&!Kn){this._updatingCamera=!0;var mr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Or=function(Wr){return Wr!==0&&-R._bearingSnap<Wr&&Wr<R._bearingSnap};mr?(Or(mr.bearing||this._map.getBearing())&&(mr.bearing=0),this._map.easeTo(mr,{originalEvent:$t})):(this._map.fire(new T.Event("moveend",{originalEvent:$t})),Or(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ra.prototype._fireEvent=function(x,A){this._map.fire(new T.Event(x,A?{originalEvent:A}:{}))},ra.prototype._requestFrame=function(){var x=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(A){delete x._frameId,x.handleEvent(new _o("renderFrame",{timeStamp:A})),x._applyChanges()})},ra.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Qo=function(x){function A(w,R){x.call(this),this._moving=!1,this._zooming=!1,this.transform=w,this._bearingSnap=R.bearingSnap,T.bindAll(["_renderFrameCallback"],this)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.getCenter=function(){return new T.LngLat(this.transform.center.lng,this.transform.center.lat)},A.prototype.setCenter=function(w,R){return this.jumpTo({center:w},R)},A.prototype.panBy=function(w,R,j){return w=T.Point.convert(w).mult(-1),this.panTo(this.transform.center,T.extend({offset:w},R),j)},A.prototype.panTo=function(w,R,j){return this.easeTo(T.extend({center:w},R),j)},A.prototype.getZoom=function(){return this.transform.zoom},A.prototype.setZoom=function(w,R){return this.jumpTo({zoom:w},R),this},A.prototype.zoomTo=function(w,R,j){return this.easeTo(T.extend({zoom:w},R),j)},A.prototype.zoomIn=function(w,R){return this.zoomTo(this.getZoom()+1,w,R),this},A.prototype.zoomOut=function(w,R){return this.zoomTo(this.getZoom()-1,w,R),this},A.prototype.getBearing=function(){return this.transform.bearing},A.prototype.setBearing=function(w,R){return this.jumpTo({bearing:w},R),this},A.prototype.getPadding=function(){return this.transform.padding},A.prototype.setPadding=function(w,R){return this.jumpTo({padding:w},R),this},A.prototype.rotateTo=function(w,R,j){return this.easeTo(T.extend({bearing:w},R),j)},A.prototype.resetNorth=function(w,R){return this.rotateTo(0,T.extend({duration:1e3},w),R),this},A.prototype.resetNorthPitch=function(w,R){return this.easeTo(T.extend({bearing:0,pitch:0,duration:1e3},w),R),this},A.prototype.snapToNorth=function(w,R){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(w,R):this},A.prototype.getPitch=function(){return this.transform.pitch},A.prototype.setPitch=function(w,R){return this.jumpTo({pitch:w},R),this},A.prototype.cameraForBounds=function(w,R){w=T.LngLatBounds.convert(w);var j=R&&R.bearing||0;return this._cameraForBoxAndBearing(w.getNorthWest(),w.getSouthEast(),j,R)},A.prototype._cameraForBoxAndBearing=function(w,R,j,Y){var te={top:0,bottom:0,right:0,left:0};if(typeof(Y=T.extend({padding:te,offset:[0,0],maxZoom:this.transform.maxZoom},Y)).padding=="number"){var we=Y.padding;Y.padding={top:we,bottom:we,right:we,left:we}}Y.padding=T.extend(te,Y.padding);var tt=this.transform,At=tt.padding,$t=tt.project(T.LngLat.convert(w)),qt=tt.project(T.LngLat.convert(R)),rn=$t.rotate(-j*Math.PI/180),kn=qt.rotate(-j*Math.PI/180),Rn=new T.Point(Math.max(rn.x,kn.x),Math.max(rn.y,kn.y)),qn=new T.Point(Math.min(rn.x,kn.x),Math.min(rn.y,kn.y)),wn=Rn.sub(qn),Kn=(tt.width-(At.left+At.right+Y.padding.left+Y.padding.right))/wn.x,mr=(tt.height-(At.top+At.bottom+Y.padding.top+Y.padding.bottom))/wn.y;if(!(mr<0||Kn<0)){var Or=Math.min(tt.scaleZoom(tt.scale*Math.min(Kn,mr)),Y.maxZoom),Wr=typeof Y.offset.x=="number"?new T.Point(Y.offset.x,Y.offset.y):T.Point.convert(Y.offset),Ur=new T.Point((Y.padding.left-Y.padding.right)/2,(Y.padding.top-Y.padding.bottom)/2).rotate(j*Math.PI/180),qr=Wr.add(Ur).mult(tt.scale/tt.zoomScale(Or));return{center:tt.unproject($t.add(qt).div(2).sub(qr)),zoom:Or,bearing:j}}T.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},A.prototype.fitBounds=function(w,R,j){return this._fitInternal(this.cameraForBounds(w,R),R,j)},A.prototype.fitScreenCoordinates=function(w,R,j,Y,te){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(T.Point.convert(w)),this.transform.pointLocation(T.Point.convert(R)),j,Y),Y,te)},A.prototype._fitInternal=function(w,R,j){return w?(delete(R=T.extend(w,R)).padding,R.linear?this.easeTo(R,j):this.flyTo(R,j)):this},A.prototype.jumpTo=function(w,R){this.stop();var j=this.transform,Y=!1,te=!1,we=!1;return"zoom"in w&&j.zoom!==+w.zoom&&(Y=!0,j.zoom=+w.zoom),w.center!==void 0&&(j.center=T.LngLat.convert(w.center)),"bearing"in w&&j.bearing!==+w.bearing&&(te=!0,j.bearing=+w.bearing),"pitch"in w&&j.pitch!==+w.pitch&&(we=!0,j.pitch=+w.pitch),w.padding==null||j.isPaddingEqual(w.padding)||(j.padding=w.padding),this.fire(new T.Event("movestart",R)).fire(new T.Event("move",R)),Y&&this.fire(new T.Event("zoomstart",R)).fire(new T.Event("zoom",R)).fire(new T.Event("zoomend",R)),te&&this.fire(new T.Event("rotatestart",R)).fire(new T.Event("rotate",R)).fire(new T.Event("rotateend",R)),we&&this.fire(new T.Event("pitchstart",R)).fire(new T.Event("pitch",R)).fire(new T.Event("pitchend",R)),this.fire(new T.Event("moveend",R))},A.prototype.easeTo=function(w,R){var j=this;this._stop(!1,w.easeId),((w=T.extend({offset:[0,0],duration:500,easing:T.ease},w)).animate===!1||!w.essential&&T.browser.prefersReducedMotion)&&(w.duration=0);var Y=this.transform,te=this.getZoom(),we=this.getBearing(),tt=this.getPitch(),At=this.getPadding(),$t="zoom"in w?+w.zoom:te,qt="bearing"in w?this._normalizeBearing(w.bearing,we):we,rn="pitch"in w?+w.pitch:tt,kn="padding"in w?w.padding:Y.padding,Rn=T.Point.convert(w.offset),qn=Y.centerPoint.add(Rn),wn=Y.pointLocation(qn),Kn=T.LngLat.convert(w.center||wn);this._normalizeCenter(Kn);var mr,Or,Wr=Y.project(wn),Ur=Y.project(Kn).sub(Wr),qr=Y.zoomScale($t-te);w.around&&(mr=T.LngLat.convert(w.around),Or=Y.locationPoint(mr));var _i={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$t!==te,this._rotating=this._rotating||we!==qt,this._pitching=this._pitching||rn!==tt,this._padding=!Y.isPaddingEqual(kn),this._easeId=w.easeId,this._prepareEase(R,w.noMoveStart,_i),this._ease(function(q){if(j._zooming&&(Y.zoom=T.number(te,$t,q)),j._rotating&&(Y.bearing=T.number(we,qt,q)),j._pitching&&(Y.pitch=T.number(tt,rn,q)),j._padding&&(Y.interpolatePadding(At,kn,q),qn=Y.centerPoint.add(Rn)),mr)Y.setLocationAtPoint(mr,Or);else{var ue=Y.zoomScale(Y.zoom-te),fe=$t>te?Math.min(2,qr):Math.max(.5,qr),Me=Math.pow(fe,1-q),ze=Y.unproject(Wr.add(Ur.mult(q*Me)).mult(ue));Y.setLocationAtPoint(Y.renderWorldCopies?ze.wrap():ze,qn)}j._fireMoveEvents(R)},function(q){j._afterEase(R,q)},w),this},A.prototype._prepareEase=function(w,R,j){j===void 0&&(j={}),this._moving=!0,R||j.moving||this.fire(new T.Event("movestart",w)),this._zooming&&!j.zooming&&this.fire(new T.Event("zoomstart",w)),this._rotating&&!j.rotating&&this.fire(new T.Event("rotatestart",w)),this._pitching&&!j.pitching&&this.fire(new T.Event("pitchstart",w))},A.prototype._fireMoveEvents=function(w){this.fire(new T.Event("move",w)),this._zooming&&this.fire(new T.Event("zoom",w)),this._rotating&&this.fire(new T.Event("rotate",w)),this._pitching&&this.fire(new T.Event("pitch",w))},A.prototype._afterEase=function(w,R){if(!this._easeId||!R||this._easeId!==R){delete this._easeId;var j=this._zooming,Y=this._rotating,te=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,j&&this.fire(new T.Event("zoomend",w)),Y&&this.fire(new T.Event("rotateend",w)),te&&this.fire(new T.Event("pitchend",w)),this.fire(new T.Event("moveend",w))}},A.prototype.flyTo=function(w,R){var j=this;if(!w.essential&&T.browser.prefersReducedMotion){var Y=T.pick(w,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Y,R)}this.stop(),w=T.extend({offset:[0,0],speed:1.2,curve:1.42,easing:T.ease},w);var te=this.transform,we=this.getZoom(),tt=this.getBearing(),At=this.getPitch(),$t=this.getPadding(),qt="zoom"in w?T.clamp(+w.zoom,te.minZoom,te.maxZoom):we,rn="bearing"in w?this._normalizeBearing(w.bearing,tt):tt,kn="pitch"in w?+w.pitch:At,Rn="padding"in w?w.padding:te.padding,qn=te.zoomScale(qt-we),wn=T.Point.convert(w.offset),Kn=te.centerPoint.add(wn),mr=te.pointLocation(Kn),Or=T.LngLat.convert(w.center||mr);this._normalizeCenter(Or);var Wr=te.project(mr),Ur=te.project(Or).sub(Wr),qr=w.curve,_i=Math.max(te.width,te.height),q=_i/qn,ue=Ur.mag();if("minZoom"in w){var fe=T.clamp(Math.min(w.minZoom,we,qt),te.minZoom,te.maxZoom),Me=_i/te.zoomScale(fe-we);qr=Math.sqrt(Me/ue*2)}var ze=qr*qr;function Be(xi){var ci=(q*q-_i*_i+(xi?-1:1)*ze*ze*ue*ue)/(2*(xi?q:_i)*ze*ue);return Math.log(Math.sqrt(ci*ci+1)-ci)}function en(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function Qt(xi){return(Math.exp(xi)+Math.exp(-xi))/2}var Xn=Be(0),pn=function(xi){return Qt(Xn)/Qt(Xn+qr*xi)},sr=function(xi){return _i*((Qt(Xn)*(en(ci=Xn+qr*xi)/Qt(ci))-en(Xn))/ze)/ue;var ci},br=(Be(1)-Xn)/qr;if(Math.abs(ue)<1e-6||!isFinite(br)){if(Math.abs(_i-q)<1e-6)return this.easeTo(w,R);var Ai=q<_i?-1:1;br=Math.abs(Math.log(q/_i))/qr,sr=function(){return 0},pn=function(xi){return Math.exp(Ai*qr*xi)}}return w.duration="duration"in w?+w.duration:1e3*br/("screenSpeed"in w?+w.screenSpeed/qr:+w.speed),w.maxDuration&&w.duration>w.maxDuration&&(w.duration=0),this._zooming=!0,this._rotating=tt!==rn,this._pitching=kn!==At,this._padding=!te.isPaddingEqual(Rn),this._prepareEase(R,!1),this._ease(function(xi){var ci=xi*br,da=1/pn(ci);te.zoom=xi===1?qt:we+te.scaleZoom(da),j._rotating&&(te.bearing=T.number(tt,rn,xi)),j._pitching&&(te.pitch=T.number(At,kn,xi)),j._padding&&(te.interpolatePadding($t,Rn,xi),Kn=te.centerPoint.add(wn));var ua=xi===1?Or:te.unproject(Wr.add(Ur.mult(sr(ci))).mult(da));te.setLocationAtPoint(te.renderWorldCopies?ua.wrap():ua,Kn),j._fireMoveEvents(R)},function(){return j._afterEase(R)},w),this},A.prototype.isEasing=function(){return!!this._easeFrameId},A.prototype.stop=function(){return this._stop()},A.prototype._stop=function(w,R){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var j=this._onEaseEnd;delete this._onEaseEnd,j.call(this,R)}if(!w){var Y=this.handlers;Y&&Y.stop(!1)}return this},A.prototype._ease=function(w,R,j){j.animate===!1||j.duration===0?(w(1),R()):(this._easeStart=T.browser.now(),this._easeOptions=j,this._onEaseFrame=w,this._onEaseEnd=R,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},A.prototype._renderFrameCallback=function(){var w=Math.min((T.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},A.prototype._normalizeBearing=function(w,R){w=T.wrap(w,-180,180);var j=Math.abs(w-R);return Math.abs(w-360-R)<j&&(w-=360),Math.abs(w+360-R)<j&&(w+=360),w},A.prototype._normalizeCenter=function(w){var R=this.transform;if(R.renderWorldCopies&&!R.lngRange){var j=w.lng-R.center.lng;w.lng+=j>180?-360:j<-180?360:0}},A}(T.Evented),Jo=function(x){x===void 0&&(x={}),this.options=x,T.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Jo.prototype.getDefaultPosition=function(){return"bottom-right"},Jo.prototype.onAdd=function(x){var A=this.options&&this.options.compact;return this._map=x,this._container=Q.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Q.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Q.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),A&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),A===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Jo.prototype.onRemove=function(){Q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Jo.prototype._setElementTitle=function(x,A){var w=this._map._getUIString("AttributionControl."+A);x.title=w,x.setAttribute("aria-label",w)},Jo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Jo.prototype._updateEditLink=function(){var x=this._editLink;x||(x=this._editLink=this._container.querySelector(".mapbox-improve-map"));var A=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||T.config.ACCESS_TOKEN}];if(x){var w=A.reduce(function(R,j,Y){return j.value&&(R+=j.key+"="+j.value+(Y<A.length-1?"&":"")),R},"?");x.href=T.config.FEEDBACK_URL+"/"+w+(this._map._hash?this._map._hash.getHashString(!0):""),x.rel="noopener nofollow",this._setElementTitle(x,"MapFeedback")}},Jo.prototype._updateData=function(x){!x||x.sourceDataType!=="metadata"&&x.sourceDataType!=="visibility"&&x.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Jo.prototype._updateAttributions=function(){if(this._map.style){var x=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?x=x.concat(this.options.customAttribution.map(function(we){return typeof we!="string"?"":we})):typeof this.options.customAttribution=="string"&&x.push(this.options.customAttribution)),this._map.style.stylesheet){var A=this._map.style.stylesheet;this.styleOwner=A.owner,this.styleId=A.id}var w=this._map.style.sourceCaches;for(var R in w){var j=w[R];if(j.used){var Y=j.getSource();Y.attribution&&x.indexOf(Y.attribution)<0&&x.push(Y.attribution)}}x.sort(function(we,tt){return we.length-tt.length});var te=(x=x.filter(function(we,tt){for(var At=tt+1;At<x.length;At++)if(x[At].indexOf(we)>=0)return!1;return!0})).join(" | ");te!==this._attribHTML&&(this._attribHTML=te,x.length?(this._innerContainer.innerHTML=te,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Jo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var No=function(){T.bindAll(["_updateLogo"],this),T.bindAll(["_updateCompact"],this)};No.prototype.onAdd=function(x){this._map=x,this._container=Q.create("div","mapboxgl-ctrl");var A=Q.create("a","mapboxgl-ctrl-logo");return A.target="_blank",A.rel="noopener nofollow",A.href="https://www.mapbox.com/",A.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),A.setAttribute("rel","noopener nofollow"),this._container.appendChild(A),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},No.prototype.onRemove=function(){Q.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},No.prototype.getDefaultPosition=function(){return"bottom-left"},No.prototype._updateLogo=function(x){x&&x.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},No.prototype._logoRequired=function(){if(this._map.style){var x=this._map.style.sourceCaches;for(var A in x)if(x[A].getSource().mapbox_logo)return!0;return!1}},No.prototype._updateCompact=function(){var x=this._container.children;if(x.length){var A=x[0];this._map.getCanvasContainer().offsetWidth<250?A.classList.add("mapboxgl-compact"):A.classList.remove("mapboxgl-compact")}};var os=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};os.prototype.add=function(x){var A=++this._id;return this._queue.push({callback:x,id:A,cancelled:!1}),A},os.prototype.remove=function(x){for(var A=this._currentlyRunning,w=0,R=A?this._queue.concat(A):this._queue;w<R.length;w+=1){var j=R[w];if(j.id===x)return void(j.cancelled=!0)}},os.prototype.run=function(x){x===void 0&&(x=0);var A=this._currentlyRunning=this._queue;this._queue=[];for(var w=0,R=A;w<R.length;w+=1){var j=R[w];if(!j.cancelled&&(j.callback(x),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},os.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Fo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},$u=T.window.HTMLImageElement,gf=T.window.HTMLElement,jo=T.window.ImageBitmap,qs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Id=function(x){function A(R){var j=this;if((R=T.extend({},qs,R)).minZoom!=null&&R.maxZoom!=null&&R.minZoom>R.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(R.minPitch!=null&&R.maxPitch!=null&&R.minPitch>R.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(R.minPitch!=null&&R.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(R.maxPitch!=null&&R.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Y=new is(R.minZoom,R.maxZoom,R.minPitch,R.maxPitch,R.renderWorldCopies);if(x.call(this,Y,R),this._interactive=R.interactive,this._maxTileCacheSize=R.maxTileCacheSize,this._failIfMajorPerformanceCaveat=R.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=R.preserveDrawingBuffer,this._antialias=R.antialias,this._trackResize=R.trackResize,this._bearingSnap=R.bearingSnap,this._refreshExpiredTiles=R.refreshExpiredTiles,this._fadeDuration=R.fadeDuration,this._crossSourceCollisions=R.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=R.collectResourceTiming,this._renderTaskQueue=new os,this._controls=[],this._mapId=T.uniqueId(),this._locale=T.extend({},Fo,R.locale),this._clickTolerance=R.clickTolerance,this._requestManager=new T.RequestManager(R.transformRequest,R.accessToken),typeof R.container=="string"){if(this._container=T.window.document.getElementById(R.container),!this._container)throw new Error("Container '"+R.container+"' not found.")}else{if(!(R.container instanceof gf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=R.container}if(R.maxBounds&&this.setMaxBounds(R.maxBounds),T.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return j._update(!1)}),this.on("moveend",function(){return j._update(!1)}),this.on("zoom",function(){return j._update(!0)}),T.window!==void 0&&(T.window.addEventListener("online",this._onWindowOnline,!1),T.window.addEventListener("resize",this._onWindowResize,!1),T.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ra(this,R),this._hash=R.hash&&new ic(typeof R.hash=="string"&&R.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:R.center,zoom:R.zoom,bearing:R.bearing,pitch:R.pitch}),R.bounds&&(this.resize(),this.fitBounds(R.bounds,T.extend({},R.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=R.localIdeographFontFamily,R.style&&this.setStyle(R.style,{localIdeographFontFamily:R.localIdeographFontFamily}),R.attributionControl&&this.addControl(new Jo({customAttribution:R.customAttribution})),this.addControl(new No,R.logoPosition),this.on("style.load",function(){j.transform.unmodified&&j.jumpTo(j.style.stylesheet)}),this.on("data",function(te){j._update(te.dataType==="style"),j.fire(new T.Event(te.dataType+"data",te))}),this.on("dataloading",function(te){j.fire(new T.Event(te.dataType+"dataloading",te))})}x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A;var w={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return A.prototype._getMapId=function(){return this._mapId},A.prototype.addControl=function(R,j){if(j===void 0&&(j=R.getDefaultPosition?R.getDefaultPosition():"top-right"),!R||!R.onAdd)return this.fire(new T.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Y=R.onAdd(this);this._controls.push(R);var te=this._controlPositions[j];return j.indexOf("bottom")!==-1?te.insertBefore(Y,te.firstChild):te.appendChild(Y),this},A.prototype.removeControl=function(R){if(!R||!R.onRemove)return this.fire(new T.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var j=this._controls.indexOf(R);return j>-1&&this._controls.splice(j,1),R.onRemove(this),this},A.prototype.hasControl=function(R){return this._controls.indexOf(R)>-1},A.prototype.resize=function(R){var j=this._containerDimensions(),Y=j[0],te=j[1];if(Y===this.transform.width&&te===this.transform.height)return this;this._resizeCanvas(Y,te),this.transform.resize(Y,te),this.painter.resize(Y,te);var we=!this._moving;return we&&this.fire(new T.Event("movestart",R)).fire(new T.Event("move",R)),this.fire(new T.Event("resize",R)),we&&this.fire(new T.Event("moveend",R)),this},A.prototype.getBounds=function(){return this.transform.getBounds()},A.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},A.prototype.setMaxBounds=function(R){return this.transform.setMaxBounds(T.LngLatBounds.convert(R)),this._update()},A.prototype.setMinZoom=function(R){if((R=R==null?-2:R)>=-2&&R<=this.transform.maxZoom)return this.transform.minZoom=R,this._update(),this.getZoom()<R&&this.setZoom(R),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},A.prototype.getMinZoom=function(){return this.transform.minZoom},A.prototype.setMaxZoom=function(R){if((R=R==null?22:R)>=this.transform.minZoom)return this.transform.maxZoom=R,this._update(),this.getZoom()>R&&this.setZoom(R),this;throw new Error("maxZoom must be greater than the current minZoom")},A.prototype.getMaxZoom=function(){return this.transform.maxZoom},A.prototype.setMinPitch=function(R){if((R=R==null?0:R)<0)throw new Error("minPitch must be greater than or equal to 0");if(R>=0&&R<=this.transform.maxPitch)return this.transform.minPitch=R,this._update(),this.getPitch()<R&&this.setPitch(R),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},A.prototype.getMinPitch=function(){return this.transform.minPitch},A.prototype.setMaxPitch=function(R){if((R=R==null?60:R)>60)throw new Error("maxPitch must be less than or equal to 60");if(R>=this.transform.minPitch)return this.transform.maxPitch=R,this._update(),this.getPitch()>R&&this.setPitch(R),this;throw new Error("maxPitch must be greater than the current minPitch")},A.prototype.getMaxPitch=function(){return this.transform.maxPitch},A.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},A.prototype.setRenderWorldCopies=function(R){return this.transform.renderWorldCopies=R,this._update()},A.prototype.project=function(R){return this.transform.locationPoint(T.LngLat.convert(R))},A.prototype.unproject=function(R){return this.transform.pointLocation(T.Point.convert(R))},A.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},A.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},A.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},A.prototype._createDelegatedListener=function(R,j,Y){var te,we=this;if(R==="mouseenter"||R==="mouseover"){var tt=!1;return{layer:j,listener:Y,delegates:{mousemove:function($t){var qt=we.getLayer(j)?we.queryRenderedFeatures($t.point,{layers:[j]}):[];qt.length?tt||(tt=!0,Y.call(we,new ru(R,we,$t.originalEvent,{features:qt}))):tt=!1},mouseout:function(){tt=!1}}}}if(R==="mouseleave"||R==="mouseout"){var At=!1;return{layer:j,listener:Y,delegates:{mousemove:function($t){(we.getLayer(j)?we.queryRenderedFeatures($t.point,{layers:[j]}):[]).length?At=!0:At&&(At=!1,Y.call(we,new ru(R,we,$t.originalEvent)))},mouseout:function($t){At&&(At=!1,Y.call(we,new ru(R,we,$t.originalEvent)))}}}}return{layer:j,listener:Y,delegates:(te={},te[R]=function($t){var qt=we.getLayer(j)?we.queryRenderedFeatures($t.point,{layers:[j]}):[];qt.length&&($t.features=qt,Y.call(we,$t),delete $t.features)},te)}},A.prototype.on=function(R,j,Y){if(Y===void 0)return x.prototype.on.call(this,R,j);var te=this._createDelegatedListener(R,j,Y);for(var we in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[R]=this._delegatedListeners[R]||[],this._delegatedListeners[R].push(te),te.delegates)this.on(we,te.delegates[we]);return this},A.prototype.once=function(R,j,Y){if(Y===void 0)return x.prototype.once.call(this,R,j);var te=this._createDelegatedListener(R,j,Y);for(var we in te.delegates)this.once(we,te.delegates[we]);return this},A.prototype.off=function(R,j,Y){var te=this;return Y===void 0?x.prototype.off.call(this,R,j):(this._delegatedListeners&&this._delegatedListeners[R]&&function(we){for(var tt=we[R],At=0;At<tt.length;At++){var $t=tt[At];if($t.layer===j&&$t.listener===Y){for(var qt in $t.delegates)te.off(qt,$t.delegates[qt]);return tt.splice(At,1),te}}}(this._delegatedListeners),this)},A.prototype.queryRenderedFeatures=function(R,j){if(!this.style)return[];var Y;if(j!==void 0||R===void 0||R instanceof T.Point||Array.isArray(R)||(j=R,R=void 0),j=j||{},(R=R||[[0,0],[this.transform.width,this.transform.height]])instanceof T.Point||typeof R[0]=="number")Y=[T.Point.convert(R)];else{var te=T.Point.convert(R[0]),we=T.Point.convert(R[1]);Y=[te,new T.Point(we.x,te.y),we,new T.Point(te.x,we.y),te]}return this.style.queryRenderedFeatures(Y,j,this.transform)},A.prototype.querySourceFeatures=function(R,j){return this.style.querySourceFeatures(R,j)},A.prototype.setStyle=function(R,j){return(j=T.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},j)).diff!==!1&&j.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&R?(this._diffStyle(R,j),this):(this._localIdeographFontFamily=j.localIdeographFontFamily,this._updateStyle(R,j))},A.prototype._getUIString=function(R){var j=this._locale[R];if(j==null)throw new Error("Missing UI string '"+R+"'");return j},A.prototype._updateStyle=function(R,j){return this.style&&(this.style.setEventedParent(null),this.style._remove()),R?(this.style=new Ti(this,j||{}),this.style.setEventedParent(this,{style:this.style}),typeof R=="string"?this.style.loadURL(R):this.style.loadJSON(R),this):(delete this.style,this)},A.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ti(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},A.prototype._diffStyle=function(R,j){var Y=this;if(typeof R=="string"){var te=this._requestManager.normalizeStyleURL(R),we=this._requestManager.transformRequest(te,T.ResourceType.Style);T.getJSON(we,function(tt,At){tt?Y.fire(new T.ErrorEvent(tt)):At&&Y._updateDiff(At,j)})}else typeof R=="object"&&this._updateDiff(R,j)},A.prototype._updateDiff=function(R,j){try{this.style.setState(R)&&this._update(!0)}catch(Y){T.warnOnce("Unable to perform style diff: "+(Y.message||Y.error||Y)+".  Rebuilding the style from scratch."),this._updateStyle(R,j)}},A.prototype.getStyle=function(){if(this.style)return this.style.serialize()},A.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():T.warnOnce("There is no style added to the map.")},A.prototype.addSource=function(R,j){return this._lazyInitEmptyStyle(),this.style.addSource(R,j),this._update(!0)},A.prototype.isSourceLoaded=function(R){var j=this.style&&this.style.sourceCaches[R];if(j!==void 0)return j.loaded();this.fire(new T.ErrorEvent(new Error("There is no source with ID '"+R+"'")))},A.prototype.areTilesLoaded=function(){var R=this.style&&this.style.sourceCaches;for(var j in R){var Y=R[j]._tiles;for(var te in Y){var we=Y[te];if(we.state!=="loaded"&&we.state!=="errored")return!1}}return!0},A.prototype.addSourceType=function(R,j,Y){return this._lazyInitEmptyStyle(),this.style.addSourceType(R,j,Y)},A.prototype.removeSource=function(R){return this.style.removeSource(R),this._update(!0)},A.prototype.getSource=function(R){return this.style.getSource(R)},A.prototype.addImage=function(R,j,Y){Y===void 0&&(Y={});var te=Y.pixelRatio;te===void 0&&(te=1);var we=Y.sdf;we===void 0&&(we=!1);var tt=Y.stretchX,At=Y.stretchY,$t=Y.content;if(this._lazyInitEmptyStyle(),j instanceof $u||jo&&j instanceof jo){var qt=T.browser.getImageData(j);this.style.addImage(R,{data:new T.RGBAImage({width:qt.width,height:qt.height},qt.data),pixelRatio:te,stretchX:tt,stretchY:At,content:$t,sdf:we,version:0})}else{if(j.width===void 0||j.height===void 0)return this.fire(new T.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var rn=j;this.style.addImage(R,{data:new T.RGBAImage({width:j.width,height:j.height},new Uint8Array(j.data)),pixelRatio:te,stretchX:tt,stretchY:At,content:$t,sdf:we,version:0,userImage:rn}),rn.onAdd&&rn.onAdd(this,R)}},A.prototype.updateImage=function(R,j){var Y=this.style.getImage(R);if(!Y)return this.fire(new T.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var te=j instanceof $u||jo&&j instanceof jo?T.browser.getImageData(j):j,we=te.width,tt=te.height,At=te.data;return we===void 0||tt===void 0?this.fire(new T.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):we!==Y.data.width||tt!==Y.data.height?this.fire(new T.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Y.data.replace(At,!(j instanceof $u||jo&&j instanceof jo)),void this.style.updateImage(R,Y))},A.prototype.hasImage=function(R){return R?!!this.style.getImage(R):(this.fire(new T.ErrorEvent(new Error("Missing required image id"))),!1)},A.prototype.removeImage=function(R){this.style.removeImage(R)},A.prototype.loadImage=function(R,j){T.getImage(this._requestManager.transformRequest(R,T.ResourceType.Image),j)},A.prototype.listImages=function(){return this.style.listImages()},A.prototype.addLayer=function(R,j){return this._lazyInitEmptyStyle(),this.style.addLayer(R,j),this._update(!0)},A.prototype.moveLayer=function(R,j){return this.style.moveLayer(R,j),this._update(!0)},A.prototype.removeLayer=function(R){return this.style.removeLayer(R),this._update(!0)},A.prototype.getLayer=function(R){return this.style.getLayer(R)},A.prototype.setLayerZoomRange=function(R,j,Y){return this.style.setLayerZoomRange(R,j,Y),this._update(!0)},A.prototype.setFilter=function(R,j,Y){return Y===void 0&&(Y={}),this.style.setFilter(R,j,Y),this._update(!0)},A.prototype.getFilter=function(R){return this.style.getFilter(R)},A.prototype.setPaintProperty=function(R,j,Y,te){return te===void 0&&(te={}),this.style.setPaintProperty(R,j,Y,te),this._update(!0)},A.prototype.getPaintProperty=function(R,j){return this.style.getPaintProperty(R,j)},A.prototype.setLayoutProperty=function(R,j,Y,te){return te===void 0&&(te={}),this.style.setLayoutProperty(R,j,Y,te),this._update(!0)},A.prototype.getLayoutProperty=function(R,j){return this.style.getLayoutProperty(R,j)},A.prototype.setLight=function(R,j){return j===void 0&&(j={}),this._lazyInitEmptyStyle(),this.style.setLight(R,j),this._update(!0)},A.prototype.getLight=function(){return this.style.getLight()},A.prototype.setFeatureState=function(R,j){return this.style.setFeatureState(R,j),this._update()},A.prototype.removeFeatureState=function(R,j){return this.style.removeFeatureState(R,j),this._update()},A.prototype.getFeatureState=function(R){return this.style.getFeatureState(R)},A.prototype.getContainer=function(){return this._container},A.prototype.getCanvasContainer=function(){return this._canvasContainer},A.prototype.getCanvas=function(){return this._canvas},A.prototype._containerDimensions=function(){var R=0,j=0;return this._container&&(R=this._container.clientWidth||400,j=this._container.clientHeight||300),[R,j]},A.prototype._detectMissingCSS=function(){T.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&T.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},A.prototype._setupContainer=function(){var R=this._container;R.classList.add("mapboxgl-map"),(this._missingCSSCanary=Q.create("div","mapboxgl-canary",R)).style.visibility="hidden",this._detectMissingCSS();var j=this._canvasContainer=Q.create("div","mapboxgl-canvas-container",R);this._interactive&&j.classList.add("mapboxgl-interactive"),this._canvas=Q.create("canvas","mapboxgl-canvas",j),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Y=this._containerDimensions();this._resizeCanvas(Y[0],Y[1]);var te=this._controlContainer=Q.create("div","mapboxgl-control-container",R),we=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(tt){we[tt]=Q.create("div","mapboxgl-ctrl-"+tt,te)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},A.prototype._resizeCanvas=function(R,j){var Y=T.browser.devicePixelRatio||1;this._canvas.width=Y*R,this._canvas.height=Y*j,this._canvas.style.width=R+"px",this._canvas.style.height=j+"px"},A.prototype._setupPainter=function(){var R=T.extend({},ne.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),j=this._canvas.getContext("webgl",R)||this._canvas.getContext("experimental-webgl",R);j?(this.painter=new Ns(j,this.transform),T.webpSupported.testSupport(j)):this.fire(new T.ErrorEvent(new Error("Failed to initialize WebGL")))},A.prototype._contextLost=function(R){R.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new T.Event("webglcontextlost",{originalEvent:R}))},A.prototype._contextRestored=function(R){this._setupPainter(),this.resize(),this._update(),this.fire(new T.Event("webglcontextrestored",{originalEvent:R}))},A.prototype._onMapScroll=function(R){if(R.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},A.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},A.prototype._update=function(R){return this.style?(this._styleDirty=this._styleDirty||R,this._sourcesDirty=!0,this.triggerRepaint(),this):this},A.prototype._requestRenderFrame=function(R){return this._update(),this._renderTaskQueue.add(R)},A.prototype._cancelRenderFrame=function(R){this._renderTaskQueue.remove(R)},A.prototype._render=function(R){var j,Y=this,te=0,we=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(j=we.createQueryEXT(),we.beginQueryEXT(we.TIME_ELAPSED_EXT,j),te=T.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(R),!this._removed){var tt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var At=this.transform.zoom,$t=T.browser.now();this.style.zoomHistory.update(At,$t);var qt=new T.EvaluationParameters(At,{now:$t,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),rn=qt.crossFadingFactor();rn===1&&rn===this._crossFadingFactor||(tt=!0,this._crossFadingFactor=rn),this.style.update(qt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new T.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new T.Event("load"))),this.style&&(this.style.hasTransitions()||tt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var kn=T.browser.now()-te;we.endQueryEXT(we.TIME_ELAPSED_EXT,j),setTimeout(function(){var wn=we.getQueryObjectEXT(j,we.QUERY_RESULT_EXT)/1e6;we.deleteQueryEXT(j),Y.fire(new T.Event("gpu-timing-frame",{cpuTime:kn,gpuTime:wn}))},50)}if(this.listens("gpu-timing-layer")){var Rn=this.painter.collectGpuTimers();setTimeout(function(){var wn=Y.painter.queryGpuTimers(Rn);Y.fire(new T.Event("gpu-timing-layer",{layerTimes:wn}))},50)}var qn=this._sourcesDirty||this._styleDirty||this._placementDirty;return qn||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new T.Event("idle")),!this._loaded||this._fullyLoaded||qn||(this._fullyLoaded=!0),this}},A.prototype.remove=function(){this._hash&&this._hash.remove();for(var R=0,j=this._controls;R<j.length;R+=1)j[R].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),T.window!==void 0&&(T.window.removeEventListener("resize",this._onWindowResize,!1),T.window.removeEventListener("orientationchange",this._onWindowResize,!1),T.window.removeEventListener("online",this._onWindowOnline,!1));var Y=this.painter.context.gl.getExtension("WEBGL_lose_context");Y&&Y.loseContext(),yc(this._canvasContainer),yc(this._controlContainer),yc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new T.Event("remove"))},A.prototype.triggerRepaint=function(){var R=this;this.style&&!this._frame&&(this._frame=T.browser.frame(function(j){R._frame=null,R._render(j)}))},A.prototype._onWindowOnline=function(){this._update()},A.prototype._onWindowResize=function(R){this._trackResize&&this.resize({originalEvent:R})._update()},w.showTileBoundaries.get=function(){return!!this._showTileBoundaries},w.showTileBoundaries.set=function(R){this._showTileBoundaries!==R&&(this._showTileBoundaries=R,this._update())},w.showPadding.get=function(){return!!this._showPadding},w.showPadding.set=function(R){this._showPadding!==R&&(this._showPadding=R,this._update())},w.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},w.showCollisionBoxes.set=function(R){this._showCollisionBoxes!==R&&(this._showCollisionBoxes=R,R?this.style._generateCollisionBoxes():this._update())},w.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},w.showOverdrawInspector.set=function(R){this._showOverdrawInspector!==R&&(this._showOverdrawInspector=R,this._update())},w.repaint.get=function(){return!!this._repaint},w.repaint.set=function(R){this._repaint!==R&&(this._repaint=R,this.triggerRepaint())},w.vertices.get=function(){return!!this._vertices},w.vertices.set=function(R){this._vertices=R,this._update()},A.prototype._setCacheLimits=function(R,j){T.setCacheLimits(R,j)},w.version.get=function(){return T.version},Object.defineProperties(A.prototype,w),A}(Qo);function yc(x){x.parentNode&&x.parentNode.removeChild(x)}var kd={showCompass:!0,showZoom:!0,visualizePitch:!1},Sh=function(x){var A=this;this.options=T.extend({},kd,x),this._container=Q.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(w){return w.preventDefault()}),this.options.showZoom&&(T.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(w){return A._map.zoomIn({},{originalEvent:w})}),Q.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(w){return A._map.zoomOut({},{originalEvent:w})}),Q.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(T.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(w){A.options.visualizePitch?A._map.resetNorthPitch({},{originalEvent:w}):A._map.resetNorth({},{originalEvent:w})}),this._compassIcon=Q.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Sh.prototype._updateZoomButtons=function(){var x=this._map.getZoom(),A=x===this._map.getMaxZoom(),w=x===this._map.getMinZoom();this._zoomInButton.disabled=A,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",A.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},Sh.prototype._rotateCompassArrow=function(){var x=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=x},Sh.prototype.onAdd=function(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dl(this._map,this._compass,this.options.visualizePitch)),this._container},Sh.prototype.onRemove=function(){Q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Sh.prototype._createButton=function(x,A){var w=Q.create("button",x,this._container);return w.type="button",w.addEventListener("click",A),w},Sh.prototype._setButtonTitle=function(x,A){var w=this._map._getUIString("NavigationControl."+A);x.title=w,x.setAttribute("aria-label",w)};var dl=function(x,A,w){w===void 0&&(w=!1),this._clickTolerance=10,this.element=A,this.mouseRotate=new Ne({clickTolerance:x.dragRotate._mouseRotate._clickTolerance}),this.map=x,w&&(this.mousePitch=new $e({clickTolerance:x.dragRotate._mousePitch._clickTolerance})),T.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Q.addEventListener(A,"mousedown",this.mousedown),Q.addEventListener(A,"touchstart",this.touchstart,{passive:!1}),Q.addEventListener(A,"touchmove",this.touchmove),Q.addEventListener(A,"touchend",this.touchend),Q.addEventListener(A,"touchcancel",this.reset)};function Gh(x,A,w){if(x=new T.LngLat(x.lng,x.lat),A){var R=new T.LngLat(x.lng-360,x.lat),j=new T.LngLat(x.lng+360,x.lat),Y=w.locationPoint(x).distSqr(A);w.locationPoint(R).distSqr(A)<Y?x=R:w.locationPoint(j).distSqr(A)<Y&&(x=j)}for(;Math.abs(x.lng-w.center.lng)>180;){var te=w.locationPoint(x);if(te.x>=0&&te.y>=0&&te.x<=w.width&&te.y<=w.height)break;x.lng>w.center.lng?x.lng-=360:x.lng+=360}return x}dl.prototype.down=function(x,A){this.mouseRotate.mousedown(x,A),this.mousePitch&&this.mousePitch.mousedown(x,A),Q.disableDrag()},dl.prototype.move=function(x,A){var w=this.map,R=this.mouseRotate.mousemoveWindow(x,A);if(R&&R.bearingDelta&&w.setBearing(w.getBearing()+R.bearingDelta),this.mousePitch){var j=this.mousePitch.mousemoveWindow(x,A);j&&j.pitchDelta&&w.setPitch(w.getPitch()+j.pitchDelta)}},dl.prototype.off=function(){var x=this.element;Q.removeEventListener(x,"mousedown",this.mousedown),Q.removeEventListener(x,"touchstart",this.touchstart,{passive:!1}),Q.removeEventListener(x,"touchmove",this.touchmove),Q.removeEventListener(x,"touchend",this.touchend),Q.removeEventListener(x,"touchcancel",this.reset),this.offTemp()},dl.prototype.offTemp=function(){Q.enableDrag(),Q.removeEventListener(T.window,"mousemove",this.mousemove),Q.removeEventListener(T.window,"mouseup",this.mouseup)},dl.prototype.mousedown=function(x){this.down(T.extend({},x,{ctrlKey:!0,preventDefault:function(){return x.preventDefault()}}),Q.mousePos(this.element,x)),Q.addEventListener(T.window,"mousemove",this.mousemove),Q.addEventListener(T.window,"mouseup",this.mouseup)},dl.prototype.mousemove=function(x){this.move(x,Q.mousePos(this.element,x))},dl.prototype.mouseup=function(x){this.mouseRotate.mouseupWindow(x),this.mousePitch&&this.mousePitch.mouseupWindow(x),this.offTemp()},dl.prototype.touchstart=function(x){x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Q.touchPos(this.element,x.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return x.preventDefault()}},this._startPos))},dl.prototype.touchmove=function(x){x.targetTouches.length!==1?this.reset():(this._lastPos=Q.touchPos(this.element,x.targetTouches)[0],this.move({preventDefault:function(){return x.preventDefault()}},this._lastPos))},dl.prototype.touchend=function(x){x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},dl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var kc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gv(x,A,w){var R=x.classList;for(var j in kc)R.remove("mapboxgl-"+w+"-anchor-"+j);R.add("mapboxgl-"+w+"-anchor-"+A)}var _c,Bf=function(x){function A(w,R){if(x.call(this),(w instanceof T.window.HTMLElement||R)&&(w=T.extend({element:w},R)),T.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=w&&w.anchor||"center",this._color=w&&w.color||"#3FB1CE",this._scale=w&&w.scale||1,this._draggable=w&&w.draggable||!1,this._clickTolerance=w&&w.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=w&&w.rotation||0,this._rotationAlignment=w&&w.rotationAlignment||"auto",this._pitchAlignment=w&&w.pitchAlignment&&w.pitchAlignment!=="auto"?w.pitchAlignment:this._rotationAlignment,w&&w.element)this._element=w.element,this._offset=T.Point.convert(w&&w.offset||[0,0]);else{this._defaultMarker=!0,this._element=Q.create("div"),this._element.setAttribute("aria-label","Map marker");var j=Q.createNS("http://www.w3.org/2000/svg","svg");j.setAttributeNS(null,"display","block"),j.setAttributeNS(null,"height","41px"),j.setAttributeNS(null,"width","27px"),j.setAttributeNS(null,"viewBox","0 0 27 41");var Y=Q.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"stroke","none"),Y.setAttributeNS(null,"stroke-width","1"),Y.setAttributeNS(null,"fill","none"),Y.setAttributeNS(null,"fill-rule","evenodd");var te=Q.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"fill-rule","nonzero");var we=Q.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(3.0, 29.0)"),we.setAttributeNS(null,"fill","#000000");for(var tt=0,At=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];tt<At.length;tt+=1){var $t=At[tt],qt=Q.createNS("http://www.w3.org/2000/svg","ellipse");qt.setAttributeNS(null,"opacity","0.04"),qt.setAttributeNS(null,"cx","10.5"),qt.setAttributeNS(null,"cy","5.80029008"),qt.setAttributeNS(null,"rx",$t.rx),qt.setAttributeNS(null,"ry",$t.ry),we.appendChild(qt)}var rn=Q.createNS("http://www.w3.org/2000/svg","g");rn.setAttributeNS(null,"fill",this._color);var kn=Q.createNS("http://www.w3.org/2000/svg","path");kn.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),rn.appendChild(kn);var Rn=Q.createNS("http://www.w3.org/2000/svg","g");Rn.setAttributeNS(null,"opacity","0.25"),Rn.setAttributeNS(null,"fill","#000000");var qn=Q.createNS("http://www.w3.org/2000/svg","path");qn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Rn.appendChild(qn);var wn=Q.createNS("http://www.w3.org/2000/svg","g");wn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),wn.setAttributeNS(null,"fill","#FFFFFF");var Kn=Q.createNS("http://www.w3.org/2000/svg","g");Kn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var mr=Q.createNS("http://www.w3.org/2000/svg","circle");mr.setAttributeNS(null,"fill","#000000"),mr.setAttributeNS(null,"opacity","0.25"),mr.setAttributeNS(null,"cx","5.5"),mr.setAttributeNS(null,"cy","5.5"),mr.setAttributeNS(null,"r","5.4999962");var Or=Q.createNS("http://www.w3.org/2000/svg","circle");Or.setAttributeNS(null,"fill","#FFFFFF"),Or.setAttributeNS(null,"cx","5.5"),Or.setAttributeNS(null,"cy","5.5"),Or.setAttributeNS(null,"r","5.4999962"),Kn.appendChild(mr),Kn.appendChild(Or),te.appendChild(we),te.appendChild(rn),te.appendChild(Rn),te.appendChild(wn),te.appendChild(Kn),j.appendChild(te),j.setAttributeNS(null,"height",41*this._scale+"px"),j.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(j),this._offset=T.Point.convert(w&&w.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Wr){Wr.preventDefault()}),this._element.addEventListener("mousedown",function(Wr){Wr.preventDefault()}),gv(this._element,this._anchor,"marker"),this._popup=null}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.addTo=function(w){return this.remove(),this._map=w,w.getCanvasContainer().appendChild(this._element),w.on("move",this._update),w.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},A.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Q.remove(this._element),this._popup&&this._popup.remove(),this},A.prototype.getLngLat=function(){return this._lngLat},A.prototype.setLngLat=function(w){return this._lngLat=T.LngLat.convert(w),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},A.prototype.getElement=function(){return this._element},A.prototype.setPopup=function(w){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),w){if(!("offset"in w.options)){var R=Math.sqrt(Math.pow(13.5,2)/2);w.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[R,-1*(24.6+R)],"bottom-right":[-R,-1*(24.6+R)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=w,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},A.prototype._onKeyPress=function(w){var R=w.code,j=w.charCode||w.keyCode;R!=="Space"&&R!=="Enter"&&j!==32&&j!==13||this.togglePopup()},A.prototype._onMapClick=function(w){var R=w.originalEvent.target,j=this._element;this._popup&&(R===j||j.contains(R))&&this.togglePopup()},A.prototype.getPopup=function(){return this._popup},A.prototype.togglePopup=function(){var w=this._popup;return w?(w.isOpen()?w.remove():w.addTo(this._map),this):this},A.prototype._update=function(w){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Gh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var R="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?R="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(R="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j="rotateX("+this._map.getPitch()+"deg)"),w&&w.type!=="moveend"||(this._pos=this._pos.round()),Q.setTransform(this._element,kc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+j+" "+R)}},A.prototype.getOffset=function(){return this._offset},A.prototype.setOffset=function(w){return this._offset=T.Point.convert(w),this._update(),this},A.prototype._onMove=function(w){if(!this._isDragging){var R=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=R}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new T.Event("dragstart"))),this.fire(new T.Event("drag")))},A.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new T.Event("dragend")),this._state="inactive"},A.prototype._addDragHandler=function(w){this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},A.prototype.setDraggable=function(w){return this._draggable=!!w,this._map&&(w?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},A.prototype.isDraggable=function(){return this._draggable},A.prototype.setRotation=function(w){return this._rotation=w||0,this._update(),this},A.prototype.getRotation=function(){return this._rotation},A.prototype.setRotationAlignment=function(w){return this._rotationAlignment=w||"auto",this._update(),this},A.prototype.getRotationAlignment=function(){return this._rotationAlignment},A.prototype.setPitchAlignment=function(w){return this._pitchAlignment=w&&w!=="auto"?w:this._rotationAlignment,this._update(),this},A.prototype.getPitchAlignment=function(){return this._pitchAlignment},A}(T.Evented),wh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},yf=0,_f=!1,Xh=function(x){function A(w){x.call(this),this.options=T.extend({},wh,w),T.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.onAdd=function(w){var R;return this._map=w,this._container=Q.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),R=this._setupUI,_c!==void 0?R(_c):T.window.navigator.permissions!==void 0?T.window.navigator.permissions.query({name:"geolocation"}).then(function(j){R(_c=j.state!=="denied")}):R(_c=!!T.window.navigator.geolocation),this._container},A.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(T.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Q.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yf=0,_f=!1},A.prototype._isOutOfMapMaxBounds=function(w){var R=this._map.getMaxBounds(),j=w.coords;return R&&(j.longitude<R.getWest()||j.longitude>R.getEast()||j.latitude<R.getSouth()||j.latitude>R.getNorth())},A.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},A.prototype._onSuccess=function(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new T.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new T.Event("geolocate",w)),this._finish()}},A.prototype._updateCamera=function(w){var R=new T.LngLat(w.coords.longitude,w.coords.latitude),j=w.coords.accuracy,Y=this._map.getBearing(),te=T.extend({bearing:Y},this.options.fitBoundsOptions);this._map.fitBounds(R.toBounds(j),te,{geolocateSource:!0})},A.prototype._updateMarker=function(w){if(w){var R=new T.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(R).addTo(this._map),this._userLocationDotMarker.setLngLat(R).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},A.prototype._updateCircleRadius=function(){var w=this._map._container.clientHeight/2,R=this._map.unproject([0,w]),j=this._map.unproject([1,w]),Y=R.distanceTo(j),te=Math.ceil(2*this._accuracy/Y);this._circleElement.style.width=te+"px",this._circleElement.style.height=te+"px"},A.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},A.prototype._onError=function(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var R=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=R,this._geolocateButton.setAttribute("aria-label",R),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&_f)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new T.Event("error",w)),this._finish()}},A.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},A.prototype._setupUI=function(w){var R=this;if(this._container.addEventListener("contextmenu",function(te){return te.preventDefault()}),this._geolocateButton=Q.create("button","mapboxgl-ctrl-geolocate",this._container),Q.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",w===!1){T.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var j=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=j,this._geolocateButton.setAttribute("aria-label",j)}else{var Y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Y,this._geolocateButton.setAttribute("aria-label",Y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Q.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Bf(this._dotElement),this._circleElement=Q.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(te){te.geolocateSource||R._watchState!=="ACTIVE_LOCK"||te.originalEvent&&te.originalEvent.type==="resize"||(R._watchState="BACKGROUND",R._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),R._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),R.fire(new T.Event("trackuserlocationend")))})},A.prototype.trigger=function(){if(!this._setup)return T.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new T.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yf--,_f=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new T.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new T.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++yf>1?(w={maximumAge:6e5,timeout:0},_f=!0):(w=this.options.positionOptions,_f=!1),this._geolocationWatchID=T.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else T.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},A.prototype._clearWatch=function(){T.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},A}(T.Evented),po={maxWidth:100,unit:"metric"},Lc=function(x){this.options=T.extend({},po,x),T.bindAll(["_onMove","setUnit"],this)};function Hp(x,A,w){var R=w&&w.maxWidth||100,j=x._container.clientHeight/2,Y=x.unproject([0,j]),te=x.unproject([R,j]),we=Y.distanceTo(te);if(w&&w.unit==="imperial"){var tt=3.2808*we;tt>5280?iu(A,R,tt/5280,x._getUIString("ScaleControl.Miles")):iu(A,R,tt,x._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?iu(A,R,we/1852,x._getUIString("ScaleControl.NauticalMiles")):we>=1e3?iu(A,R,we/1e3,x._getUIString("ScaleControl.Kilometers")):iu(A,R,we,x._getUIString("ScaleControl.Meters"))}function iu(x,A,w,R){var j,Y,te,we=(j=w,(Y=Math.pow(10,(""+Math.floor(j)).length-1))*(te=(te=j/Y)>=10?10:te>=5?5:te>=3?3:te>=2?2:te>=1?1:function(tt){var At=Math.pow(10,Math.ceil(-Math.log(tt)/Math.LN10));return Math.round(tt*At)/At}(te)));x.style.width=A*(we/w)+"px",x.innerHTML=we+"&nbsp;"+R}Lc.prototype.getDefaultPosition=function(){return"bottom-left"},Lc.prototype._onMove=function(){Hp(this._map,this._container,this.options)},Lc.prototype.onAdd=function(x){return this._map=x,this._container=Q.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Lc.prototype.onRemove=function(){Q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Lc.prototype.setUnit=function(x){this.options.unit=x,Hp(this._map,this._container,this.options)};var $s=function(x){this._fullscreen=!1,x&&x.container&&(x.container instanceof T.window.HTMLElement?this._container=x.container:T.warnOnce("Full screen control 'container' must be a DOM element.")),T.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in T.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in T.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in T.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in T.window.document&&(this._fullscreenchange="MSFullscreenChange")};$s.prototype.onAdd=function(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=Q.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",T.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$s.prototype.onRemove=function(){Q.remove(this._controlContainer),this._map=null,T.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$s.prototype._checkFullscreenSupport=function(){return!!(T.window.document.fullscreenEnabled||T.window.document.mozFullScreenEnabled||T.window.document.msFullscreenEnabled||T.window.document.webkitFullscreenEnabled)},$s.prototype._setupUI=function(){var x=this._fullscreenButton=Q.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Q.create("span","mapboxgl-ctrl-icon",x).setAttribute("aria-hidden",!0),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),T.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$s.prototype._updateTitle=function(){var x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x},$s.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$s.prototype._isFullscreen=function(){return this._fullscreen},$s.prototype._changeIcon=function(){(T.window.document.fullscreenElement||T.window.document.mozFullScreenElement||T.window.document.webkitFullscreenElement||T.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$s.prototype._onClickFullscreen=function(){this._isFullscreen()?T.window.document.exitFullscreen?T.window.document.exitFullscreen():T.window.document.mozCancelFullScreen?T.window.document.mozCancelFullScreen():T.window.document.msExitFullscreen?T.window.document.msExitFullscreen():T.window.document.webkitCancelFullScreen&&T.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var bf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},bc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),kl=function(x){function A(w){x.call(this),this.options=T.extend(Object.create(bf),w),T.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return x&&(A.__proto__=x),(A.prototype=Object.create(x&&x.prototype)).constructor=A,A.prototype.addTo=function(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new T.Event("open")),this},A.prototype.isOpen=function(){return!!this._map},A.prototype.remove=function(){return this._content&&Q.remove(this._content),this._container&&(Q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new T.Event("close")),this},A.prototype.getLngLat=function(){return this._lngLat},A.prototype.setLngLat=function(w){return this._lngLat=T.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},A.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},A.prototype.getElement=function(){return this._container},A.prototype.setText=function(w){return this.setDOMContent(T.window.document.createTextNode(w))},A.prototype.setHTML=function(w){var R,j=T.window.document.createDocumentFragment(),Y=T.window.document.createElement("body");for(Y.innerHTML=w;R=Y.firstChild;)j.appendChild(R);return this.setDOMContent(j)},A.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},A.prototype.setMaxWidth=function(w){return this.options.maxWidth=w,this._update(),this},A.prototype.setDOMContent=function(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Q.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this},A.prototype.addClassName=function(w){this._container&&this._container.classList.add(w)},A.prototype.removeClassName=function(w){this._container&&this._container.classList.remove(w)},A.prototype.setOffset=function(w){return this.options.offset=w,this._update(),this},A.prototype.toggleClassName=function(w){if(this._container)return this._container.classList.toggle(w)},A.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Q.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},A.prototype._onMouseUp=function(w){this._update(w.point)},A.prototype._onMouseMove=function(w){this._update(w.point)},A.prototype._onDrag=function(w){this._update(w.point)},A.prototype._update=function(w){var R=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Q.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Q.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(qt){return R._container.classList.add(qt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Gh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||w)){var j=this._pos=this._trackPointer&&w?w:this._map.project(this._lngLat),Y=this.options.anchor,te=function qt(rn){if(rn){if(typeof rn=="number"){var kn=Math.round(Math.sqrt(.5*Math.pow(rn,2)));return{center:new T.Point(0,0),top:new T.Point(0,rn),"top-left":new T.Point(kn,kn),"top-right":new T.Point(-kn,kn),bottom:new T.Point(0,-rn),"bottom-left":new T.Point(kn,-kn),"bottom-right":new T.Point(-kn,-kn),left:new T.Point(rn,0),right:new T.Point(-rn,0)}}if(rn instanceof T.Point||Array.isArray(rn)){var Rn=T.Point.convert(rn);return{center:Rn,top:Rn,"top-left":Rn,"top-right":Rn,bottom:Rn,"bottom-left":Rn,"bottom-right":Rn,left:Rn,right:Rn}}return{center:T.Point.convert(rn.center||[0,0]),top:T.Point.convert(rn.top||[0,0]),"top-left":T.Point.convert(rn["top-left"]||[0,0]),"top-right":T.Point.convert(rn["top-right"]||[0,0]),bottom:T.Point.convert(rn.bottom||[0,0]),"bottom-left":T.Point.convert(rn["bottom-left"]||[0,0]),"bottom-right":T.Point.convert(rn["bottom-right"]||[0,0]),left:T.Point.convert(rn.left||[0,0]),right:T.Point.convert(rn.right||[0,0])}}return qt(new T.Point(0,0))}(this.options.offset);if(!Y){var we,tt=this._container.offsetWidth,At=this._container.offsetHeight;we=j.y+te.bottom.y<At?["top"]:j.y>this._map.transform.height-At?["bottom"]:[],j.x<tt/2?we.push("left"):j.x>this._map.transform.width-tt/2&&we.push("right"),Y=we.length===0?"bottom":we.join("-")}var $t=j.add(te[Y]).round();Q.setTransform(this._container,kc[Y]+" translate("+$t.x+"px,"+$t.y+"px)"),gv(this._container,Y,"popup")}},A.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var w=this._container.querySelector(bc);w&&w.focus()}},A.prototype._onClose=function(){this.remove()},A}(T.Evented),Th={version:T.version,supported:ne,setRTLTextPlugin:T.setRTLTextPlugin,getRTLTextPluginStatus:T.getRTLTextPluginStatus,Map:Id,NavigationControl:Sh,GeolocateControl:Xh,AttributionControl:Jo,ScaleControl:Lc,FullscreenControl:$s,Popup:kl,Marker:Bf,Style:Ti,LngLat:T.LngLat,LngLatBounds:T.LngLatBounds,Point:T.Point,MercatorCoordinate:T.MercatorCoordinate,Evented:T.Evented,config:T.config,prewarm:function(){Br().acquire(Tr)},clearPrewarmedResources:function(){var x=Di;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(Tr),Di=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return T.config.ACCESS_TOKEN},set accessToken(x){T.config.ACCESS_TOKEN=x},get baseApiUrl(){return T.config.API_URL},set baseApiUrl(x){T.config.API_URL=x},get workerCount(){return ii.workerCount},set workerCount(x){ii.workerCount=x},get maxParallelImageRequests(){return T.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(x){T.config.MAX_PARALLEL_IMAGE_REQUESTS=x},clearStorage:function(x){T.clearTileCache(x)},workerUrl:""};return Th}),ee})},92077:function(It,G,D){var ee,ae;(function(T,ne){ee=ne,ae=typeof ee=="function"?ee.call(G,D,G,It):ee,ae!==void 0&&(It.exports=ae)})(this,function(){var T,ne,Q="2.0.6",ge={},pe={},Ce={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},he={currentLocale:Ce.currentLocale,zeroFormat:Ce.zeroFormat,nullFormat:Ce.nullFormat,defaultFormat:Ce.defaultFormat,scalePercentBy100:Ce.scalePercentBy100};function st(re,Se){this._input=re,this._value=Se}return T=function(re){var Se,se,de,xe;if(T.isNumeral(re))Se=re.value();else if(re===0||typeof re=="undefined")Se=0;else if(re===null||ne.isNaN(re))Se=null;else if(typeof re=="string")if(he.zeroFormat&&re===he.zeroFormat)Se=0;else if(he.nullFormat&&re===he.nullFormat||!re.replace(/[^0-9]+/g,"").length)Se=null;else{for(se in ge)if(xe=typeof ge[se].regexps.unformat=="function"?ge[se].regexps.unformat():ge[se].regexps.unformat,xe&&re.match(xe)){de=ge[se].unformat;break}de=de||T._.stringToNumber,Se=de(re)}else Se=Number(re)||null;return new st(re,Se)},T.version=Q,T.isNumeral=function(re){return re instanceof st},T._=ne={numberToFormat:function(re,Se,se){var de=pe[T.options.currentLocale],xe=!1,le=!1,Ue=0,Et="",mt=1e12,Wt=1e9,Rt=1e6,Tt=1e3,Ze="",Ie=!1,Qe,it,De,cn,qe,Pt,Le,pt,at,nt;if(re=re||0,it=Math.abs(re),T._.includes(Se,"(")?(xe=!0,Se=Se.replace(/[\(|\)]/g,"")):(T._.includes(Se,"+")||T._.includes(Se,"-"))&&(pt=T._.includes(Se,"+")?Se.indexOf("+"):re<0?Se.indexOf("-"):-1,Se=Se.replace(/[\+|\-]/g,"")),T._.includes(Se,"a")&&(Qe=Se.match(/a(k|m|b|t)?/),Qe=Qe?Qe[1]:!1,T._.includes(Se," a")&&(Et=" "),Se=Se.replace(new RegExp(Et+"a[kmbt]?"),""),it>=mt&&!Qe||Qe==="t"?(Et+=de.abbreviations.trillion,re=re/mt):it<mt&&it>=Wt&&!Qe||Qe==="b"?(Et+=de.abbreviations.billion,re=re/Wt):it<Wt&&it>=Rt&&!Qe||Qe==="m"?(Et+=de.abbreviations.million,re=re/Rt):(it<Rt&&it>=Tt&&!Qe||Qe==="k")&&(Et+=de.abbreviations.thousand,re=re/Tt)),T._.includes(Se,"[.]")&&(le=!0,Se=Se.replace("[.]",".")),Pt=re.toString().split(".")[0],Le=Se.split(".")[1],at=Se.indexOf(","),Ue=(Se.split(".")[0].split(",")[0].match(/0/g)||[]).length,Le?(T._.includes(Le,"[")?(Le=Le.replace("]",""),Le=Le.split("["),Ze=T._.toFixed(re,Le[0].length+Le[1].length,se,Le[1].length)):Ze=T._.toFixed(re,Le.length,se),Pt=Ze.split(".")[0],T._.includes(Ze,".")?Ze=de.delimiters.decimal+Ze.split(".")[1]:Ze="",le&&Number(Ze.slice(1))===0&&(Ze="")):Pt=T._.toFixed(re,0,se),Et&&!Qe&&Number(Pt)>=1e3&&Et!==de.abbreviations.trillion)switch(Pt=String(Number(Pt)/1e3),Et){case de.abbreviations.thousand:Et=de.abbreviations.million;break;case de.abbreviations.million:Et=de.abbreviations.billion;break;case de.abbreviations.billion:Et=de.abbreviations.trillion;break}if(T._.includes(Pt,"-")&&(Pt=Pt.slice(1),Ie=!0),Pt.length<Ue)for(var Ct=Ue-Pt.length;Ct>0;Ct--)Pt="0"+Pt;return at>-1&&(Pt=Pt.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+de.delimiters.thousands)),Se.indexOf(".")===0&&(Pt=""),nt=Pt+Ze+(Et||""),xe?nt=(xe&&Ie?"(":"")+nt+(xe&&Ie?")":""):pt>=0?nt=pt===0?(Ie?"-":"+")+nt:nt+(Ie?"-":"+"):Ie&&(nt="-"+nt),nt},stringToNumber:function(re){var Se=pe[he.currentLocale],se=re,de={thousand:3,million:6,billion:9,trillion:12},xe,le,Ue,Et;if(he.zeroFormat&&re===he.zeroFormat)le=0;else if(he.nullFormat&&re===he.nullFormat||!re.replace(/[^0-9]+/g,"").length)le=null;else{le=1,Se.delimiters.decimal!=="."&&(re=re.replace(/\./g,"").replace(Se.delimiters.decimal,"."));for(xe in de)if(Et=new RegExp("[^a-zA-Z]"+Se.abbreviations[xe]+"(?:\\)|(\\"+Se.currency.symbol+")?(?:\\))?)?$"),se.match(Et)){le*=Math.pow(10,de[xe]);break}le*=(re.split("-").length+Math.min(re.split("(").length-1,re.split(")").length-1))%2?1:-1,re=re.replace(/[^0-9\.]+/g,""),le*=Number(re)}return le},isNaN:function(re){return typeof re=="number"&&isNaN(re)},includes:function(re,Se){return re.indexOf(Se)!==-1},insert:function(re,Se,se){return re.slice(0,se)+Se+re.slice(se)},reduce:function(re,Se){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof Se!="function")throw new TypeError(Se+" is not a function");var se=Object(re),de=se.length>>>0,xe=0,le;if(arguments.length===3)le=arguments[2];else{for(;xe<de&&!(xe in se);)xe++;if(xe>=de)throw new TypeError("Reduce of empty array with no initial value");le=se[xe++]}for(;xe<de;xe++)xe in se&&(le=Se(le,se[xe],xe,se));return le},multiplier:function(re){var Se=re.toString().split(".");return Se.length<2?1:Math.pow(10,Se[1].length)},correctionFactor:function(){var re=Array.prototype.slice.call(arguments);return re.reduce(function(Se,se){var de=ne.multiplier(se);return Se>de?Se:de},1)},toFixed:function(re,Se,se,de){var xe=re.toString().split("."),le=Se-(de||0),Ue,Et,mt,Wt;return xe.length===2?Ue=Math.min(Math.max(xe[1].length,le),Se):Ue=le,mt=Math.pow(10,Ue),Wt=(se(re+"e+"+Ue)/mt).toFixed(Ue),de>Se-Ue&&(Et=new RegExp("\\.?0{1,"+(de-(Se-Ue))+"}$"),Wt=Wt.replace(Et,"")),Wt}},T.options=he,T.formats=ge,T.locales=pe,T.locale=function(re){return re&&(he.currentLocale=re.toLowerCase()),he.currentLocale},T.localeData=function(re){if(!re)return pe[he.currentLocale];if(re=re.toLowerCase(),!pe[re])throw new Error("Unknown locale : "+re);return pe[re]},T.reset=function(){for(var re in Ce)he[re]=Ce[re]},T.zeroFormat=function(re){he.zeroFormat=typeof re=="string"?re:null},T.nullFormat=function(re){he.nullFormat=typeof re=="string"?re:null},T.defaultFormat=function(re){he.defaultFormat=typeof re=="string"?re:"0.0"},T.register=function(re,Se,se){if(Se=Se.toLowerCase(),this[re+"s"][Se])throw new TypeError(Se+" "+re+" already registered.");return this[re+"s"][Se]=se,se},T.validate=function(re,Se){var se,de,xe,le,Ue,Et,mt,Wt;if(typeof re!="string"&&(re+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",re)),re=re.trim(),re.match(/^\d+$/))return!0;if(re==="")return!1;try{mt=T.localeData(Se)}catch(Rt){mt=T.localeData(T.locale())}return xe=mt.currency.symbol,Ue=mt.abbreviations,se=mt.delimiters.decimal,mt.delimiters.thousands==="."?de="\\.":de=mt.delimiters.thousands,Wt=re.match(/^[^\d]+/),Wt!==null&&(re=re.substr(1),Wt[0]!==xe)||(Wt=re.match(/[^\d]+$/),Wt!==null&&(re=re.slice(0,-1),Wt[0]!==Ue.thousand&&Wt[0]!==Ue.million&&Wt[0]!==Ue.billion&&Wt[0]!==Ue.trillion))?!1:(Et=new RegExp(de+"{2}"),re.match(/[^\d.,]/g)?!1:(le=re.split(se),le.length>2?!1:le.length<2?!!le[0].match(/^\d+.*\d$/)&&!le[0].match(Et):le[0].length===1?!!le[0].match(/^\d+$/)&&!le[0].match(Et)&&!!le[1].match(/^\d+$/):!!le[0].match(/^\d+.*\d$/)&&!le[0].match(Et)&&!!le[1].match(/^\d+$/)))},T.fn=st.prototype={clone:function(){return T(this)},format:function(re,Se){var se=this._value,de=re||he.defaultFormat,xe,le,Ue;if(Se=Se||Math.round,se===0&&he.zeroFormat!==null)le=he.zeroFormat;else if(se===null&&he.nullFormat!==null)le=he.nullFormat;else{for(xe in ge)if(de.match(ge[xe].regexps.format)){Ue=ge[xe].format;break}Ue=Ue||T._.numberToFormat,le=Ue(se,de,Se)}return le},value:function(){return this._value},input:function(){return this._input},set:function(re){return this._value=Number(re),this},add:function(re){var Se=ne.correctionFactor.call(null,this._value,re);function se(de,xe,le,Ue){return de+Math.round(Se*xe)}return this._value=ne.reduce([this._value,re],se,0)/Se,this},subtract:function(re){var Se=ne.correctionFactor.call(null,this._value,re);function se(de,xe,le,Ue){return de-Math.round(Se*xe)}return this._value=ne.reduce([re],se,Math.round(this._value*Se))/Se,this},multiply:function(re){function Se(se,de,xe,le){var Ue=ne.correctionFactor(se,de);return Math.round(se*Ue)*Math.round(de*Ue)/Math.round(Ue*Ue)}return this._value=ne.reduce([this._value,re],Se,1),this},divide:function(re){function Se(se,de,xe,le){var Ue=ne.correctionFactor(se,de);return Math.round(se*Ue)/Math.round(de*Ue)}return this._value=ne.reduce([this._value,re],Se),this},difference:function(re){return Math.abs(T(this._value).subtract(re).value())}},T.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(re){var Se=re%10;return~~(re%100/10)===1?"th":Se===1?"st":Se===2?"nd":Se===3?"rd":"th"},currency:{symbol:"$"}}),function(){T.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(re,Se,se){var de=T._.includes(Se," BPS")?" ":"",xe;return re=re*1e4,Se=Se.replace(/\s?BPS/,""),xe=T._.numberToFormat(re,Se,se),T._.includes(xe,")")?(xe=xe.split(""),xe.splice(-1,0,de+"BPS"),xe=xe.join("")):xe=xe+de+"BPS",xe},unformat:function(re){return+(T._.stringToNumber(re)*1e-4).toFixed(15)}})}(),function(){var re={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},Se={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},se=re.suffixes.concat(Se.suffixes.filter(function(xe){return re.suffixes.indexOf(xe)<0})),de=se.join("|");de="("+de.replace("B","B(?!PS)")+")",T.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(de)},format:function(xe,le,Ue){var Et,mt=T._.includes(le,"ib")?Se:re,Wt=T._.includes(le," b")||T._.includes(le," ib")?" ":"",Rt,Tt,Ze;for(le=le.replace(/\s?i?b/,""),Rt=0;Rt<=mt.suffixes.length;Rt++)if(Tt=Math.pow(mt.base,Rt),Ze=Math.pow(mt.base,Rt+1),xe===null||xe===0||xe>=Tt&&xe<Ze){Wt+=mt.suffixes[Rt],Tt>0&&(xe=xe/Tt);break}return Et=T._.numberToFormat(xe,le,Ue),Et+Wt},unformat:function(xe){var le=T._.stringToNumber(xe),Ue,Et;if(le){for(Ue=re.suffixes.length-1;Ue>=0;Ue--){if(T._.includes(xe,re.suffixes[Ue])){Et=Math.pow(re.base,Ue);break}if(T._.includes(xe,Se.suffixes[Ue])){Et=Math.pow(Se.base,Ue);break}}le*=Et||1}return le}})}(),function(){T.register("format","currency",{regexps:{format:/(\$)/},format:function(re,Se,se){var de=T.locales[T.options.currentLocale],xe={before:Se.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:Se.match(/([\+|\-|\)|\s|\$]*)$/)[0]},le,Ue,Et;for(Se=Se.replace(/\s?\$\s?/,""),le=T._.numberToFormat(re,Se,se),re>=0?(xe.before=xe.before.replace(/[\-\(]/,""),xe.after=xe.after.replace(/[\-\)]/,"")):re<0&&!T._.includes(xe.before,"-")&&!T._.includes(xe.before,"(")&&(xe.before="-"+xe.before),Et=0;Et<xe.before.length;Et++)switch(Ue=xe.before[Et],Ue){case"$":le=T._.insert(le,de.currency.symbol,Et);break;case" ":le=T._.insert(le," ",Et+de.currency.symbol.length-1);break}for(Et=xe.after.length-1;Et>=0;Et--)switch(Ue=xe.after[Et],Ue){case"$":le=Et===xe.after.length-1?le+de.currency.symbol:T._.insert(le,de.currency.symbol,-(xe.after.length-(1+Et)));break;case" ":le=Et===xe.after.length-1?le+" ":T._.insert(le," ",-(xe.after.length-(1+Et)+de.currency.symbol.length-1));break}return le}})}(),function(){T.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(re,Se,se){var de,xe=typeof re=="number"&&!T._.isNaN(re)?re.toExponential():"0e+0",le=xe.split("e");return Se=Se.replace(/e[\+|\-]{1}0/,""),de=T._.numberToFormat(Number(le[0]),Se,se),de+"e"+le[1]},unformat:function(re){var Se=T._.includes(re,"e+")?re.split("e+"):re.split("e-"),se=Number(Se[0]),de=Number(Se[1]);de=T._.includes(re,"e-")?de*=-1:de;function xe(le,Ue,Et,mt){var Wt=T._.correctionFactor(le,Ue),Rt=le*Wt*(Ue*Wt)/(Wt*Wt);return Rt}return T._.reduce([se,Math.pow(10,de)],xe,1)}})}(),function(){T.register("format","ordinal",{regexps:{format:/(o)/},format:function(re,Se,se){var de=T.locales[T.options.currentLocale],xe,le=T._.includes(Se," o")?" ":"";return Se=Se.replace(/\s?o/,""),le+=de.ordinal(re),xe=T._.numberToFormat(re,Se,se),xe+le}})}(),function(){T.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(re,Se,se){var de=T._.includes(Se," %")?" ":"",xe;return T.options.scalePercentBy100&&(re=re*100),Se=Se.replace(/\s?\%/,""),xe=T._.numberToFormat(re,Se,se),T._.includes(xe,")")?(xe=xe.split(""),xe.splice(-1,0,de+"%"),xe=xe.join("")):xe=xe+de+"%",xe},unformat:function(re){var Se=T._.stringToNumber(re);return T.options.scalePercentBy100?Se*.01:Se}})}(),function(){T.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(re,Se,se){var de=Math.floor(re/60/60),xe=Math.floor((re-de*60*60)/60),le=Math.round(re-de*60*60-xe*60);return de+":"+(xe<10?"0"+xe:xe)+":"+(le<10?"0"+le:le)},unformat:function(re){var Se=re.split(":"),se=0;return Se.length===3?(se=se+Number(Se[0])*60*60,se=se+Number(Se[1])*60,se=se+Number(Se[2])):Se.length===2&&(se=se+Number(Se[0])*60,se=se+Number(Se[1])),Number(se)}})}(),T})},3614:function(It,G,D){"use strict";It.exports=ae;var ee=D(80645);function ae(qe){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(qe)?qe:new Uint8Array(qe||0),this.pos=0,this.type=0,this.length=this.buf.length}ae.Varint=0,ae.Fixed64=1,ae.Bytes=2,ae.Fixed32=5;var T=65536*65536,ne=1/T,Q=12,ge=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");ae.prototype={destroy:function(){this.buf=null},readFields:function(qe,Pt,Le){for(Le=Le||this.length;this.pos<Le;){var pt=this.readVarint(),at=pt>>3,nt=this.pos;this.type=pt&7,qe(at,Pt,this),this.pos===nt&&this.skip(pt)}return Pt},readMessage:function(qe,Pt){return this.readFields(qe,Pt,this.readVarint()+this.pos)},readFixed32:function(){var qe=Ze(this.buf,this.pos);return this.pos+=4,qe},readSFixed32:function(){var qe=Qe(this.buf,this.pos);return this.pos+=4,qe},readFixed64:function(){var qe=Ze(this.buf,this.pos)+Ze(this.buf,this.pos+4)*T;return this.pos+=8,qe},readSFixed64:function(){var qe=Ze(this.buf,this.pos)+Qe(this.buf,this.pos+4)*T;return this.pos+=8,qe},readFloat:function(){var qe=ee.read(this.buf,this.pos,!0,23,4);return this.pos+=4,qe},readDouble:function(){var qe=ee.read(this.buf,this.pos,!0,52,8);return this.pos+=8,qe},readVarint:function(qe){var Pt=this.buf,Le,pt;return pt=Pt[this.pos++],Le=pt&127,pt<128||(pt=Pt[this.pos++],Le|=(pt&127)<<7,pt<128)||(pt=Pt[this.pos++],Le|=(pt&127)<<14,pt<128)||(pt=Pt[this.pos++],Le|=(pt&127)<<21,pt<128)?Le:(pt=Pt[this.pos],Le|=(pt&15)<<28,pe(Le,qe,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var qe=this.readVarint();return qe%2===1?(qe+1)/-2:qe/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var qe=this.readVarint()+this.pos,Pt=this.pos;return this.pos=qe,qe-Pt>=Q&&ge?De(this.buf,Pt,qe):it(this.buf,Pt,qe)},readBytes:function(){var qe=this.readVarint()+this.pos,Pt=this.buf.subarray(this.pos,qe);return this.pos=qe,Pt},readPackedVarint:function(qe,Pt){if(this.type!==ae.Bytes)return qe.push(this.readVarint(Pt));var Le=Ce(this);for(qe=qe||[];this.pos<Le;)qe.push(this.readVarint(Pt));return qe},readPackedSVarint:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readSVarint());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readSVarint());return qe},readPackedBoolean:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readBoolean());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readBoolean());return qe},readPackedFloat:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readFloat());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readFloat());return qe},readPackedDouble:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readDouble());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readDouble());return qe},readPackedFixed32:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readFixed32());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readFixed32());return qe},readPackedSFixed32:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readSFixed32());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readSFixed32());return qe},readPackedFixed64:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readFixed64());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readFixed64());return qe},readPackedSFixed64:function(qe){if(this.type!==ae.Bytes)return qe.push(this.readSFixed64());var Pt=Ce(this);for(qe=qe||[];this.pos<Pt;)qe.push(this.readSFixed64());return qe},skip:function(qe){var Pt=qe&7;if(Pt===ae.Varint)for(;this.buf[this.pos++]>127;);else if(Pt===ae.Bytes)this.pos=this.readVarint()+this.pos;else if(Pt===ae.Fixed32)this.pos+=4;else if(Pt===ae.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Pt)},writeTag:function(qe,Pt){this.writeVarint(qe<<3|Pt)},realloc:function(qe){for(var Pt=this.length||16;Pt<this.pos+qe;)Pt*=2;if(Pt!==this.length){var Le=new Uint8Array(Pt);Le.set(this.buf),this.buf=Le,this.length=Pt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(qe){this.realloc(4),Ie(this.buf,qe,this.pos),this.pos+=4},writeSFixed32:function(qe){this.realloc(4),Ie(this.buf,qe,this.pos),this.pos+=4},writeFixed64:function(qe){this.realloc(8),Ie(this.buf,qe&-1,this.pos),Ie(this.buf,Math.floor(qe*ne),this.pos+4),this.pos+=8},writeSFixed64:function(qe){this.realloc(8),Ie(this.buf,qe&-1,this.pos),Ie(this.buf,Math.floor(qe*ne),this.pos+4),this.pos+=8},writeVarint:function(qe){if(qe=+qe||0,qe>268435455||qe<0){st(qe,this);return}this.realloc(4),this.buf[this.pos++]=qe&127|(qe>127?128:0),!(qe<=127)&&(this.buf[this.pos++]=(qe>>>=7)&127|(qe>127?128:0),!(qe<=127)&&(this.buf[this.pos++]=(qe>>>=7)&127|(qe>127?128:0),!(qe<=127)&&(this.buf[this.pos++]=qe>>>7&127)))},writeSVarint:function(qe){this.writeVarint(qe<0?-qe*2-1:qe*2)},writeBoolean:function(qe){this.writeVarint(!!qe)},writeString:function(qe){qe=String(qe),this.realloc(qe.length*4),this.pos++;var Pt=this.pos;this.pos=cn(this.buf,qe,this.pos);var Le=this.pos-Pt;Le>=128&&se(Pt,Le,this),this.pos=Pt-1,this.writeVarint(Le),this.pos+=Le},writeFloat:function(qe){this.realloc(4),ee.write(this.buf,qe,this.pos,!0,23,4),this.pos+=4},writeDouble:function(qe){this.realloc(8),ee.write(this.buf,qe,this.pos,!0,52,8),this.pos+=8},writeBytes:function(qe){var Pt=qe.length;this.writeVarint(Pt),this.realloc(Pt);for(var Le=0;Le<Pt;Le++)this.buf[this.pos++]=qe[Le]},writeRawMessage:function(qe,Pt){this.pos++;var Le=this.pos;qe(Pt,this);var pt=this.pos-Le;pt>=128&&se(Le,pt,this),this.pos=Le-1,this.writeVarint(pt),this.pos+=pt},writeMessage:function(qe,Pt,Le){this.writeTag(qe,ae.Bytes),this.writeRawMessage(Pt,Le)},writePackedVarint:function(qe,Pt){Pt.length&&this.writeMessage(qe,de,Pt)},writePackedSVarint:function(qe,Pt){Pt.length&&this.writeMessage(qe,xe,Pt)},writePackedBoolean:function(qe,Pt){Pt.length&&this.writeMessage(qe,Et,Pt)},writePackedFloat:function(qe,Pt){Pt.length&&this.writeMessage(qe,le,Pt)},writePackedDouble:function(qe,Pt){Pt.length&&this.writeMessage(qe,Ue,Pt)},writePackedFixed32:function(qe,Pt){Pt.length&&this.writeMessage(qe,mt,Pt)},writePackedSFixed32:function(qe,Pt){Pt.length&&this.writeMessage(qe,Wt,Pt)},writePackedFixed64:function(qe,Pt){Pt.length&&this.writeMessage(qe,Rt,Pt)},writePackedSFixed64:function(qe,Pt){Pt.length&&this.writeMessage(qe,Tt,Pt)},writeBytesField:function(qe,Pt){this.writeTag(qe,ae.Bytes),this.writeBytes(Pt)},writeFixed32Field:function(qe,Pt){this.writeTag(qe,ae.Fixed32),this.writeFixed32(Pt)},writeSFixed32Field:function(qe,Pt){this.writeTag(qe,ae.Fixed32),this.writeSFixed32(Pt)},writeFixed64Field:function(qe,Pt){this.writeTag(qe,ae.Fixed64),this.writeFixed64(Pt)},writeSFixed64Field:function(qe,Pt){this.writeTag(qe,ae.Fixed64),this.writeSFixed64(Pt)},writeVarintField:function(qe,Pt){this.writeTag(qe,ae.Varint),this.writeVarint(Pt)},writeSVarintField:function(qe,Pt){this.writeTag(qe,ae.Varint),this.writeSVarint(Pt)},writeStringField:function(qe,Pt){this.writeTag(qe,ae.Bytes),this.writeString(Pt)},writeFloatField:function(qe,Pt){this.writeTag(qe,ae.Fixed32),this.writeFloat(Pt)},writeDoubleField:function(qe,Pt){this.writeTag(qe,ae.Fixed64),this.writeDouble(Pt)},writeBooleanField:function(qe,Pt){this.writeVarintField(qe,!!Pt)}};function pe(qe,Pt,Le){var pt=Le.buf,at,nt;if(nt=pt[Le.pos++],at=(nt&112)>>4,nt<128||(nt=pt[Le.pos++],at|=(nt&127)<<3,nt<128)||(nt=pt[Le.pos++],at|=(nt&127)<<10,nt<128)||(nt=pt[Le.pos++],at|=(nt&127)<<17,nt<128)||(nt=pt[Le.pos++],at|=(nt&127)<<24,nt<128)||(nt=pt[Le.pos++],at|=(nt&1)<<31,nt<128))return he(qe,at,Pt);throw new Error("Expected varint not more than 10 bytes")}function Ce(qe){return qe.type===ae.Bytes?qe.readVarint()+qe.pos:qe.pos+1}function he(qe,Pt,Le){return Le?Pt*4294967296+(qe>>>0):(Pt>>>0)*4294967296+(qe>>>0)}function st(qe,Pt){var Le,pt;if(qe>=0?(Le=qe%4294967296|0,pt=qe/4294967296|0):(Le=~(-qe%4294967296),pt=~(-qe/4294967296),Le^4294967295?Le=Le+1|0:(Le=0,pt=pt+1|0)),qe>=18446744073709552e3||qe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Pt.realloc(10),re(Le,pt,Pt),Se(pt,Pt)}function re(qe,Pt,Le){Le.buf[Le.pos++]=qe&127|128,qe>>>=7,Le.buf[Le.pos++]=qe&127|128,qe>>>=7,Le.buf[Le.pos++]=qe&127|128,qe>>>=7,Le.buf[Le.pos++]=qe&127|128,qe>>>=7,Le.buf[Le.pos]=qe&127}function Se(qe,Pt){var Le=(qe&7)<<4;Pt.buf[Pt.pos++]|=Le|((qe>>>=3)?128:0),qe&&(Pt.buf[Pt.pos++]=qe&127|((qe>>>=7)?128:0),qe&&(Pt.buf[Pt.pos++]=qe&127|((qe>>>=7)?128:0),qe&&(Pt.buf[Pt.pos++]=qe&127|((qe>>>=7)?128:0),qe&&(Pt.buf[Pt.pos++]=qe&127|((qe>>>=7)?128:0),qe&&(Pt.buf[Pt.pos++]=qe&127)))))}function se(qe,Pt,Le){var pt=Pt<=16383?1:Pt<=2097151?2:Pt<=268435455?3:Math.floor(Math.log(Pt)/(Math.LN2*7));Le.realloc(pt);for(var at=Le.pos-1;at>=qe;at--)Le.buf[at+pt]=Le.buf[at]}function de(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeVarint(qe[Le])}function xe(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeSVarint(qe[Le])}function le(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeFloat(qe[Le])}function Ue(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeDouble(qe[Le])}function Et(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeBoolean(qe[Le])}function mt(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeFixed32(qe[Le])}function Wt(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeSFixed32(qe[Le])}function Rt(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeFixed64(qe[Le])}function Tt(qe,Pt){for(var Le=0;Le<qe.length;Le++)Pt.writeSFixed64(qe[Le])}function Ze(qe,Pt){return(qe[Pt]|qe[Pt+1]<<8|qe[Pt+2]<<16)+qe[Pt+3]*16777216}function Ie(qe,Pt,Le){qe[Le]=Pt,qe[Le+1]=Pt>>>8,qe[Le+2]=Pt>>>16,qe[Le+3]=Pt>>>24}function Qe(qe,Pt){return(qe[Pt]|qe[Pt+1]<<8|qe[Pt+2]<<16)+(qe[Pt+3]<<24)}function it(qe,Pt,Le){for(var pt="",at=Pt;at<Le;){var nt=qe[at],Ct=null,rt=nt>239?4:nt>223?3:nt>191?2:1;if(at+rt>Le)break;var vt,Ve,hn;rt===1?nt<128&&(Ct=nt):rt===2?(vt=qe[at+1],(vt&192)===128&&(Ct=(nt&31)<<6|vt&63,Ct<=127&&(Ct=null))):rt===3?(vt=qe[at+1],Ve=qe[at+2],(vt&192)===128&&(Ve&192)===128&&(Ct=(nt&15)<<12|(vt&63)<<6|Ve&63,(Ct<=2047||Ct>=55296&&Ct<=57343)&&(Ct=null))):rt===4&&(vt=qe[at+1],Ve=qe[at+2],hn=qe[at+3],(vt&192)===128&&(Ve&192)===128&&(hn&192)===128&&(Ct=(nt&15)<<18|(vt&63)<<12|(Ve&63)<<6|hn&63,(Ct<=65535||Ct>=1114112)&&(Ct=null))),Ct===null?(Ct=65533,rt=1):Ct>65535&&(Ct-=65536,pt+=String.fromCharCode(Ct>>>10&1023|55296),Ct=56320|Ct&1023),pt+=String.fromCharCode(Ct),at+=rt}return pt}function De(qe,Pt,Le){return ge.decode(qe.subarray(Pt,Le))}function cn(qe,Pt,Le){for(var pt=0,at,nt;pt<Pt.length;pt++){if(at=Pt.charCodeAt(pt),at>55295&&at<57344)if(nt)if(at<56320){qe[Le++]=239,qe[Le++]=191,qe[Le++]=189,nt=at;continue}else at=nt-55296<<10|at-56320|65536,nt=null;else{at>56319||pt+1===Pt.length?(qe[Le++]=239,qe[Le++]=191,qe[Le++]=189):nt=at;continue}else nt&&(qe[Le++]=239,qe[Le++]=191,qe[Le++]=189,nt=null);at<128?qe[Le++]=at:(at<2048?qe[Le++]=at>>6|192:(at<65536?qe[Le++]=at>>12|224:(qe[Le++]=at>>18|240,qe[Le++]=at>>12&63|128),qe[Le++]=at>>6&63|128),qe[Le++]=at&63|128)}return Le}},73807:function(It){"use strict";var G=It.exports;It.exports.isNumber=function(D){return typeof D=="number"},It.exports.findMin=function(D){if(D.length===0)return 1/0;for(var ee=D[0],ae=1;ae<D.length;ae++)ee=Math.min(ee,D[ae]);return ee},It.exports.findMax=function(D){if(D.length===0)return-1/0;for(var ee=D[0],ae=1;ae<D.length;ae++)ee=Math.max(ee,D[ae]);return ee},It.exports.findMinMulti=function(D){for(var ee=G.findMin(D[0]),ae=1;ae<D.length;ae++)ee=Math.min(ee,G.findMin(D[ae]));return ee},It.exports.findMaxMulti=function(D){for(var ee=G.findMax(D[0]),ae=1;ae<D.length;ae++)ee=Math.max(ee,G.findMax(D[ae]));return ee},It.exports.inside=function(D,ee,ae){return D<=ae&&ae<=ee}},53843:function(It,G,D){"use strict";var ee=50,ae=2,T=Math.log(2),ne=It.exports,Q=D(73807);function ge(Ce){return 1-Math.abs(Ce)}It.exports.getUnifiedMinMax=function(Ce,he){return ne.getUnifiedMinMaxMulti([Ce],he)},It.exports.getUnifiedMinMaxMulti=function(Ce,he){he=he||{};var st=!1,re=!1,Se=Q.isNumber(he.width)?he.width:ae,se=Q.isNumber(he.size)?he.size:ee,de=Q.isNumber(he.min)?he.min:(st=!0,Q.findMinMulti(Ce)),xe=Q.isNumber(he.max)?he.max:(re=!0,Q.findMaxMulti(Ce)),le=xe-de,Ue=le/(se-1);return st&&(de=de-2*Se*Ue),re&&(xe=xe+2*Se*Ue),{min:de,max:xe}},It.exports.create=function(Ce,he){if(he=he||{},!Ce||Ce.length===0)return[];var st=Q.isNumber(he.size)?he.size:ee,re=Q.isNumber(he.width)?he.width:ae,Se=ne.getUnifiedMinMax(Ce,{size:st,width:re,min:he.min,max:he.max}),se=Se.min,de=Se.max,xe=de-se,le=xe/(st-1);if(xe===0)return[{x:se,y:1}];for(var Ue=[],Et=0;Et<st;Et++)Ue.push({x:se+Et*le,y:0});var mt=function(De){return Math.floor((De-se)/le)},Wt=pe(ge,re),Rt=Wt[re],Tt=Wt[re-1]-Wt[re-2],Ze=0;Ce.forEach(function(De){var cn=mt(De);if(!(cn+re<0||cn-re>=Ue.length)){var qe=Math.max(cn-re,0),Pt=cn,Le=Math.min(cn+re,Ue.length-1),pt=qe-(cn-re),at=cn+re-Le,nt=Wt[-re-1+pt]||0,Ct=Wt[-re-1+at]||0,rt=Rt/(Rt-nt-Ct);pt>0&&(Ze+=rt*(pt-1)*Tt);var vt=Math.max(0,cn-re+1);Q.inside(0,Ue.length-1,vt)&&(Ue[vt].y+=rt*1*Tt),Q.inside(0,Ue.length-1,Pt+1)&&(Ue[Pt+1].y-=rt*2*Tt),Q.inside(0,Ue.length-1,Le+1)&&(Ue[Le+1].y+=rt*1*Tt)}});var Ie=Ze,Qe=0,it=0;return Ue.forEach(function(De){Qe+=De.y,Ie+=Qe,De.y=Ie,it+=Ie}),it>0&&Ue.forEach(function(De){De.y/=it}),Ue};function pe(Ce,he){for(var st={},re=0,Se=-he;Se<=he;Se++)re+=Ce(Se/he),st[Se]=re;return st}It.exports.getExpectedValueFromPdf=function(Ce){if(!(!Ce||Ce.length===0)){var he=0;return Ce.forEach(function(st){he+=st.x*st.y}),he}},It.exports.getXWithLeftTailArea=function(Ce,he){if(!(!Ce||Ce.length===0)){for(var st=0,re=0,Se=0;Se<Ce.length&&(re=Se,st+=Ce[Se].y,!(st>=he));Se++);return Ce[re].x}},It.exports.getPerplexity=function(Ce){if(!(!Ce||Ce.length===0)){var he=0;return Ce.forEach(function(st){var re=Math.log(st.y);isFinite(re)&&(he+=st.y*re)}),he=-he/T,Math.pow(2,he)}}},32676:function(It,G,D){var ee=D(34155);(function(ae,T){It.exports=T()})(this,function(){"use strict";function ae(bt,ve){var ye={label:0,sent:function(){if(xt[0]&1)throw xt[1];return xt[1]},trys:[],ops:[]},Ke,ht,xt,Jt;return Jt={next:Dn(0),throw:Dn(1),return:Dn(2)},typeof Symbol=="function"&&(Jt[Symbol.iterator]=function(){return this}),Jt;function Dn(In){return function(ke){return fr([In,ke])}}function fr(In){if(Ke)throw new TypeError("Generator is already executing.");for(;ye;)try{if(Ke=1,ht&&(xt=In[0]&2?ht.return:In[0]?ht.throw||((xt=ht.return)&&xt.call(ht),0):ht.next)&&!(xt=xt.call(ht,In[1])).done)return xt;switch(ht=0,xt&&(In=[In[0]&2,xt.value]),In[0]){case 0:case 1:xt=In;break;case 4:return ye.label++,{value:In[1],done:!1};case 5:ye.label++,ht=In[1],In=[0];continue;case 7:In=ye.ops.pop(),ye.trys.pop();continue;default:if(xt=ye.trys,!(xt=xt.length>0&&xt[xt.length-1])&&(In[0]===6||In[0]===2)){ye=0;continue}if(In[0]===3&&(!xt||In[1]>xt[0]&&In[1]<xt[3])){ye.label=In[1];break}if(In[0]===6&&ye.label<xt[1]){ye.label=xt[1],xt=In;break}if(xt&&ye.label<xt[2]){ye.label=xt[2],ye.ops.push(In);break}xt[2]&&ye.ops.pop(),ye.trys.pop();continue}In=ve.call(bt,ye)}catch(ke){In=[6,ke],ht=0}finally{Ke=xt=0}if(In[0]&5)throw In[1];return{value:In[0]?In[1]:void 0,done:!0}}}var T=function(){function bt(ve,ye){this.next=null,this.key=ve,this.data=ye,this.left=null,this.right=null}return bt}();function ne(bt,ve){return bt>ve?1:bt<ve?-1:0}function Q(bt,ve,ye){for(var Ke=new T(null,null),ht=Ke,xt=Ke;;){var Jt=ye(bt,ve.key);if(Jt<0){if(ve.left===null)break;if(ye(bt,ve.left.key)<0){var Dn=ve.left;if(ve.left=Dn.right,Dn.right=ve,ve=Dn,ve.left===null)break}xt.left=ve,xt=ve,ve=ve.left}else if(Jt>0){if(ve.right===null)break;if(ye(bt,ve.right.key)>0){var Dn=ve.right;if(ve.right=Dn.left,Dn.left=ve,ve=Dn,ve.right===null)break}ht.right=ve,ht=ve,ve=ve.right}else break}return ht.right=ve.left,xt.left=ve.right,ve.left=Ke.right,ve.right=Ke.left,ve}function ge(bt,ve,ye,Ke){var ht=new T(bt,ve);if(ye===null)return ht.left=ht.right=null,ht;ye=Q(bt,ye,Ke);var xt=Ke(bt,ye.key);return xt<0?(ht.left=ye.left,ht.right=ye,ye.left=null):xt>=0&&(ht.right=ye.right,ht.left=ye,ye.right=null),ht}function pe(bt,ve,ye){var Ke=null,ht=null;if(ve){ve=Q(bt,ve,ye);var xt=ye(ve.key,bt);xt===0?(Ke=ve.left,ht=ve.right):xt<0?(ht=ve.right,ve.right=null,Ke=ve):(Ke=ve.left,ve.left=null,ht=ve)}return{left:Ke,right:ht}}function Ce(bt,ve,ye){return ve===null?bt:(bt===null||(ve=Q(bt.key,ve,ye),ve.left=bt),ve)}function he(bt,ve,ye,Ke,ht){if(bt){Ke(""+ve+(ye?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+ht(bt)+`
`);var xt=ve+(ye?"    ":"\u2502   ");bt.left&&he(bt.left,xt,!1,Ke,ht),bt.right&&he(bt.right,xt,!0,Ke,ht)}}var st=function(){function bt(ve){ve===void 0&&(ve=ne),this._root=null,this._size=0,this._comparator=ve}return bt.prototype.insert=function(ve,ye){return this._size++,this._root=ge(ve,ye,this._root,this._comparator)},bt.prototype.add=function(ve,ye){var Ke=new T(ve,ye);this._root===null&&(Ke.left=Ke.right=null,this._size++,this._root=Ke);var ht=this._comparator,xt=Q(ve,this._root,ht),Jt=ht(ve,xt.key);return Jt===0?this._root=xt:(Jt<0?(Ke.left=xt.left,Ke.right=xt,xt.left=null):Jt>0&&(Ke.right=xt.right,Ke.left=xt,xt.right=null),this._size++,this._root=Ke),this._root},bt.prototype.remove=function(ve){this._root=this._remove(ve,this._root,this._comparator)},bt.prototype._remove=function(ve,ye,Ke){var ht;if(ye===null)return null;ye=Q(ve,ye,Ke);var xt=Ke(ve,ye.key);return xt===0?(ye.left===null?ht=ye.right:(ht=Q(ve,ye.left,Ke),ht.right=ye.right),this._size--,ht):ye},bt.prototype.pop=function(){var ve=this._root;if(ve){for(;ve.left;)ve=ve.left;return this._root=Q(ve.key,this._root,this._comparator),this._root=this._remove(ve.key,this._root,this._comparator),{key:ve.key,data:ve.data}}return null},bt.prototype.findStatic=function(ve){for(var ye=this._root,Ke=this._comparator;ye;){var ht=Ke(ve,ye.key);if(ht===0)return ye;ht<0?ye=ye.left:ye=ye.right}return null},bt.prototype.find=function(ve){return this._root&&(this._root=Q(ve,this._root,this._comparator),this._comparator(ve,this._root.key)!==0)?null:this._root},bt.prototype.contains=function(ve){for(var ye=this._root,Ke=this._comparator;ye;){var ht=Ke(ve,ye.key);if(ht===0)return!0;ht<0?ye=ye.left:ye=ye.right}return!1},bt.prototype.forEach=function(ve,ye){for(var Ke=this._root,ht=[],xt=!1;!xt;)Ke!==null?(ht.push(Ke),Ke=Ke.left):ht.length!==0?(Ke=ht.pop(),ve.call(ye,Ke),Ke=Ke.right):xt=!0;return this},bt.prototype.range=function(ve,ye,Ke,ht){for(var xt=[],Jt=this._comparator,Dn=this._root,fr;xt.length!==0||Dn;)if(Dn)xt.push(Dn),Dn=Dn.left;else{if(Dn=xt.pop(),fr=Jt(Dn.key,ye),fr>0)break;if(Jt(Dn.key,ve)>=0&&Ke.call(ht,Dn))return this;Dn=Dn.right}return this},bt.prototype.keys=function(){var ve=[];return this.forEach(function(ye){var Ke=ye.key;return ve.push(Ke)}),ve},bt.prototype.values=function(){var ve=[];return this.forEach(function(ye){var Ke=ye.data;return ve.push(Ke)}),ve},bt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},bt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},bt.prototype.minNode=function(ve){if(ve===void 0&&(ve=this._root),ve)for(;ve.left;)ve=ve.left;return ve},bt.prototype.maxNode=function(ve){if(ve===void 0&&(ve=this._root),ve)for(;ve.right;)ve=ve.right;return ve},bt.prototype.at=function(ve){for(var ye=this._root,Ke=!1,ht=0,xt=[];!Ke;)if(ye)xt.push(ye),ye=ye.left;else if(xt.length>0){if(ye=xt.pop(),ht===ve)return ye;ht++,ye=ye.right}else Ke=!0;return null},bt.prototype.next=function(ve){var ye=this._root,Ke=null;if(ve.right){for(Ke=ve.right;Ke.left;)Ke=Ke.left;return Ke}for(var ht=this._comparator;ye;){var xt=ht(ve.key,ye.key);if(xt===0)break;xt<0?(Ke=ye,ye=ye.left):ye=ye.right}return Ke},bt.prototype.prev=function(ve){var ye=this._root,Ke=null;if(ve.left!==null){for(Ke=ve.left;Ke.right;)Ke=Ke.right;return Ke}for(var ht=this._comparator;ye;){var xt=ht(ve.key,ye.key);if(xt===0)break;xt<0?ye=ye.left:(Ke=ye,ye=ye.right)}return Ke},bt.prototype.clear=function(){return this._root=null,this._size=0,this},bt.prototype.toList=function(){return se(this._root)},bt.prototype.load=function(ve,ye,Ke){ye===void 0&&(ye=[]),Ke===void 0&&(Ke=!1);var ht=ve.length,xt=this._comparator;if(Ke&&le(ve,ye,0,ht-1,xt),this._root===null)this._root=re(ve,ye,0,ht),this._size=ht;else{var Jt=xe(this.toList(),Se(ve,ye),xt);ht=this._size+ht,this._root=de({head:Jt},0,ht)}return this},bt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(bt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(bt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),bt.prototype.toString=function(ve){ve===void 0&&(ve=function(Ke){return String(Ke.key)});var ye=[];return he(this._root,"",!0,function(Ke){return ye.push(Ke)},ve),ye.join("")},bt.prototype.update=function(ve,ye,Ke){var ht=this._comparator,xt=pe(ve,this._root,ht),Jt=xt.left,Dn=xt.right;ht(ve,ye)<0?Dn=ge(ye,Ke,Dn,ht):Jt=ge(ye,Ke,Jt,ht),this._root=Ce(Jt,Dn,ht)},bt.prototype.split=function(ve){return pe(ve,this._root,this._comparator)},bt.prototype[Symbol.iterator]=function(){var ve,ye,Ke;return ae(this,function(ht){switch(ht.label){case 0:ve=this._root,ye=[],Ke=!1,ht.label=1;case 1:return Ke?[3,6]:ve===null?[3,2]:(ye.push(ve),ve=ve.left,[3,5]);case 2:return ye.length===0?[3,4]:(ve=ye.pop(),[4,ve]);case 3:return ht.sent(),ve=ve.right,[3,5];case 4:Ke=!0,ht.label=5;case 5:return[3,1];case 6:return[2]}})},bt}();function re(bt,ve,ye,Ke){var ht=Ke-ye;if(ht>0){var xt=ye+Math.floor(ht/2),Jt=bt[xt],Dn=ve[xt],fr=new T(Jt,Dn);return fr.left=re(bt,ve,ye,xt),fr.right=re(bt,ve,xt+1,Ke),fr}return null}function Se(bt,ve){for(var ye=new T(null,null),Ke=ye,ht=0;ht<bt.length;ht++)Ke=Ke.next=new T(bt[ht],ve[ht]);return Ke.next=null,ye.next}function se(bt){for(var ve=bt,ye=[],Ke=!1,ht=new T(null,null),xt=ht;!Ke;)ve?(ye.push(ve),ve=ve.left):ye.length>0?(ve=xt=xt.next=ye.pop(),ve=ve.right):Ke=!0;return xt.next=null,ht.next}function de(bt,ve,ye){var Ke=ye-ve;if(Ke>0){var ht=ve+Math.floor(Ke/2),xt=de(bt,ve,ht),Jt=bt.head;return Jt.left=xt,bt.head=bt.head.next,Jt.right=de(bt,ht+1,ye),Jt}return null}function xe(bt,ve,ye){for(var Ke=new T(null,null),ht=Ke,xt=bt,Jt=ve;xt!==null&&Jt!==null;)ye(xt.key,Jt.key)<0?(ht.next=xt,xt=xt.next):(ht.next=Jt,Jt=Jt.next),ht=ht.next;return xt!==null?ht.next=xt:Jt!==null&&(ht.next=Jt),Ke.next}function le(bt,ve,ye,Ke,ht){if(!(ye>=Ke)){for(var xt=bt[ye+Ke>>1],Jt=ye-1,Dn=Ke+1;;){do Jt++;while(ht(bt[Jt],xt)<0);do Dn--;while(ht(bt[Dn],xt)>0);if(Jt>=Dn)break;var fr=bt[Jt];bt[Jt]=bt[Dn],bt[Dn]=fr,fr=ve[Jt],ve[Jt]=ve[Dn],ve[Dn]=fr}le(bt,ve,ye,Dn,ht),le(bt,ve,Dn+1,Ke,ht)}}const Ue=(bt,ve)=>bt.ll.x<=ve.x&&ve.x<=bt.ur.x&&bt.ll.y<=ve.y&&ve.y<=bt.ur.y,Et=(bt,ve)=>{if(ve.ur.x<bt.ll.x||bt.ur.x<ve.ll.x||ve.ur.y<bt.ll.y||bt.ur.y<ve.ll.y)return null;const ye=bt.ll.x<ve.ll.x?ve.ll.x:bt.ll.x,Ke=bt.ur.x<ve.ur.x?bt.ur.x:ve.ur.x,ht=bt.ll.y<ve.ll.y?ve.ll.y:bt.ll.y,xt=bt.ur.y<ve.ur.y?bt.ur.y:ve.ur.y;return{ll:{x:ye,y:ht},ur:{x:Ke,y:xt}}};let mt=Number.EPSILON;mt===void 0&&(mt=Math.pow(2,-52));const Wt=mt*mt,Rt=(bt,ve)=>{if(-mt<bt&&bt<mt&&-mt<ve&&ve<mt)return 0;const ye=bt-ve;return ye*ye<Wt*bt*ve?0:bt<ve?-1:1};class Tt{constructor(){this.reset()}reset(){this.xRounder=new Ze,this.yRounder=new Ze}round(ve,ye){return{x:this.xRounder.round(ve),y:this.yRounder.round(ye)}}}class Ze{constructor(){this.tree=new st,this.round(0)}round(ve){const ye=this.tree.add(ve),Ke=this.tree.prev(ye);if(Ke!==null&&Rt(ye.key,Ke.key)===0)return this.tree.remove(ve),Ke.key;const ht=this.tree.next(ye);return ht!==null&&Rt(ye.key,ht.key)===0?(this.tree.remove(ve),ht.key):ve}}const Ie=new Tt,Qe=11102230246251565e-32,it=134217729,De=(3+8*Qe)*Qe;function cn(bt,ve,ye,Ke,ht){let xt,Jt,Dn,fr,In=ve[0],ke=Ke[0],Pe=0,Ge=0;ke>In==ke>-In?(xt=In,In=ve[++Pe]):(xt=ke,ke=Ke[++Ge]);let gt=0;if(Pe<bt&&Ge<ye)for(ke>In==ke>-In?(Jt=In+xt,Dn=xt-(Jt-In),In=ve[++Pe]):(Jt=ke+xt,Dn=xt-(Jt-ke),ke=Ke[++Ge]),xt=Jt,Dn!==0&&(ht[gt++]=Dn);Pe<bt&&Ge<ye;)ke>In==ke>-In?(Jt=xt+In,fr=Jt-xt,Dn=xt-(Jt-fr)+(In-fr),In=ve[++Pe]):(Jt=xt+ke,fr=Jt-xt,Dn=xt-(Jt-fr)+(ke-fr),ke=Ke[++Ge]),xt=Jt,Dn!==0&&(ht[gt++]=Dn);for(;Pe<bt;)Jt=xt+In,fr=Jt-xt,Dn=xt-(Jt-fr)+(In-fr),In=ve[++Pe],xt=Jt,Dn!==0&&(ht[gt++]=Dn);for(;Ge<ye;)Jt=xt+ke,fr=Jt-xt,Dn=xt-(Jt-fr)+(ke-fr),ke=Ke[++Ge],xt=Jt,Dn!==0&&(ht[gt++]=Dn);return(xt!==0||gt===0)&&(ht[gt++]=xt),gt}function qe(bt,ve){let ye=ve[0];for(let Ke=1;Ke<bt;Ke++)ye+=ve[Ke];return ye}function Pt(bt){return new Float64Array(bt)}const Le=(3+16*Qe)*Qe,pt=(2+12*Qe)*Qe,at=(9+64*Qe)*Qe*Qe,nt=Pt(4),Ct=Pt(8),rt=Pt(12),vt=Pt(16),Ve=Pt(4);function hn(bt,ve,ye,Ke,ht,xt,Jt){let Dn,fr,In,ke,Pe,Ge,gt,Bt,an,An,kt,Dt,dn,He,ei,Tr,ii,Di;const vi=bt-ht,Br=ye-ht,Gr=ve-xt,bi=Ke-xt;He=vi*bi,Ge=it*vi,gt=Ge-(Ge-vi),Bt=vi-gt,Ge=it*bi,an=Ge-(Ge-bi),An=bi-an,ei=Bt*An-(He-gt*an-Bt*an-gt*An),Tr=Gr*Br,Ge=it*Gr,gt=Ge-(Ge-Gr),Bt=Gr-gt,Ge=it*Br,an=Ge-(Ge-Br),An=Br-an,ii=Bt*An-(Tr-gt*an-Bt*an-gt*An),kt=ei-ii,Pe=ei-kt,nt[0]=ei-(kt+Pe)+(Pe-ii),Dt=He+kt,Pe=Dt-He,dn=He-(Dt-Pe)+(kt-Pe),kt=dn-Tr,Pe=dn-kt,nt[1]=dn-(kt+Pe)+(Pe-Tr),Di=Dt+kt,Pe=Di-Dt,nt[2]=Dt-(Di-Pe)+(kt-Pe),nt[3]=Di;let Ni=qe(4,nt),Qa=pt*Jt;if(Ni>=Qa||-Ni>=Qa||(Pe=bt-vi,Dn=bt-(vi+Pe)+(Pe-ht),Pe=ye-Br,In=ye-(Br+Pe)+(Pe-ht),Pe=ve-Gr,fr=ve-(Gr+Pe)+(Pe-xt),Pe=Ke-bi,ke=Ke-(bi+Pe)+(Pe-xt),Dn===0&&fr===0&&In===0&&ke===0)||(Qa=at*Jt+De*Math.abs(Ni),Ni+=vi*ke+bi*Dn-(Gr*In+Br*fr),Ni>=Qa||-Ni>=Qa))return Ni;He=Dn*bi,Ge=it*Dn,gt=Ge-(Ge-Dn),Bt=Dn-gt,Ge=it*bi,an=Ge-(Ge-bi),An=bi-an,ei=Bt*An-(He-gt*an-Bt*an-gt*An),Tr=fr*Br,Ge=it*fr,gt=Ge-(Ge-fr),Bt=fr-gt,Ge=it*Br,an=Ge-(Ge-Br),An=Br-an,ii=Bt*An-(Tr-gt*an-Bt*an-gt*An),kt=ei-ii,Pe=ei-kt,Ve[0]=ei-(kt+Pe)+(Pe-ii),Dt=He+kt,Pe=Dt-He,dn=He-(Dt-Pe)+(kt-Pe),kt=dn-Tr,Pe=dn-kt,Ve[1]=dn-(kt+Pe)+(Pe-Tr),Di=Dt+kt,Pe=Di-Dt,Ve[2]=Dt-(Di-Pe)+(kt-Pe),Ve[3]=Di;const Xi=cn(4,nt,4,Ve,Ct);He=vi*ke,Ge=it*vi,gt=Ge-(Ge-vi),Bt=vi-gt,Ge=it*ke,an=Ge-(Ge-ke),An=ke-an,ei=Bt*An-(He-gt*an-Bt*an-gt*An),Tr=Gr*In,Ge=it*Gr,gt=Ge-(Ge-Gr),Bt=Gr-gt,Ge=it*In,an=Ge-(Ge-In),An=In-an,ii=Bt*An-(Tr-gt*an-Bt*an-gt*An),kt=ei-ii,Pe=ei-kt,Ve[0]=ei-(kt+Pe)+(Pe-ii),Dt=He+kt,Pe=Dt-He,dn=He-(Dt-Pe)+(kt-Pe),kt=dn-Tr,Pe=dn-kt,Ve[1]=dn-(kt+Pe)+(Pe-Tr),Di=Dt+kt,Pe=Di-Dt,Ve[2]=Dt-(Di-Pe)+(kt-Pe),Ve[3]=Di;const ao=cn(Xi,Ct,4,Ve,rt);He=Dn*ke,Ge=it*Dn,gt=Ge-(Ge-Dn),Bt=Dn-gt,Ge=it*ke,an=Ge-(Ge-ke),An=ke-an,ei=Bt*An-(He-gt*an-Bt*an-gt*An),Tr=fr*In,Ge=it*fr,gt=Ge-(Ge-fr),Bt=fr-gt,Ge=it*In,an=Ge-(Ge-In),An=In-an,ii=Bt*An-(Tr-gt*an-Bt*an-gt*An),kt=ei-ii,Pe=ei-kt,Ve[0]=ei-(kt+Pe)+(Pe-ii),Dt=He+kt,Pe=Dt-He,dn=He-(Dt-Pe)+(kt-Pe),kt=dn-Tr,Pe=dn-kt,Ve[1]=dn-(kt+Pe)+(Pe-Tr),Di=Dt+kt,Pe=Di-Dt,Ve[2]=Dt-(Di-Pe)+(kt-Pe),Ve[3]=Di;const ko=cn(ao,rt,4,Ve,vt);return vt[ko-1]}function yn(bt,ve,ye,Ke,ht,xt){const Jt=(ve-xt)*(ye-ht),Dn=(bt-ht)*(Ke-xt),fr=Jt-Dn,In=Math.abs(Jt+Dn);return Math.abs(fr)>=Le*In?fr:-hn(bt,ve,ye,Ke,ht,xt,In)}const ir=(bt,ve)=>bt.x*ve.y-bt.y*ve.x,Qn=(bt,ve)=>bt.x*ve.x+bt.y*ve.y,Ut=(bt,ve,ye)=>{const Ke=yn(bt.x,bt.y,ve.x,ve.y,ye.x,ye.y);return Ke>0?-1:Ke<0?1:0},En=bt=>Math.sqrt(Qn(bt,bt)),Tn=(bt,ve,ye)=>{const Ke={x:ve.x-bt.x,y:ve.y-bt.y},ht={x:ye.x-bt.x,y:ye.y-bt.y};return ir(ht,Ke)/En(ht)/En(Ke)},lr=(bt,ve,ye)=>{const Ke={x:ve.x-bt.x,y:ve.y-bt.y},ht={x:ye.x-bt.x,y:ye.y-bt.y};return Qn(ht,Ke)/En(ht)/En(Ke)},ln=(bt,ve,ye)=>ve.y===0?null:{x:bt.x+ve.x/ve.y*(ye-bt.y),y:ye},Lt=(bt,ve,ye)=>ve.x===0?null:{x:ye,y:bt.y+ve.y/ve.x*(ye-bt.x)},bn=(bt,ve,ye,Ke)=>{if(ve.x===0)return Lt(ye,Ke,bt.x);if(Ke.x===0)return Lt(bt,ve,ye.x);if(ve.y===0)return ln(ye,Ke,bt.y);if(Ke.y===0)return ln(bt,ve,ye.y);const ht=ir(ve,Ke);if(ht==0)return null;const xt={x:ye.x-bt.x,y:ye.y-bt.y},Jt=ir(xt,ve)/ht,Dn=ir(xt,Ke)/ht,fr=bt.x+Dn*ve.x,In=ye.x+Jt*Ke.x,ke=bt.y+Dn*ve.y,Pe=ye.y+Jt*Ke.y,Ge=(fr+In)/2,gt=(ke+Pe)/2;return{x:Ge,y:gt}};class Xe{static compare(ve,ye){const Ke=Xe.comparePoints(ve.point,ye.point);return Ke!==0?Ke:(ve.point!==ye.point&&ve.link(ye),ve.isLeft!==ye.isLeft?ve.isLeft?1:-1:on.compare(ve.segment,ye.segment))}static comparePoints(ve,ye){return ve.x<ye.x?-1:ve.x>ye.x?1:ve.y<ye.y?-1:ve.y>ye.y?1:0}constructor(ve,ye){ve.events===void 0?ve.events=[this]:ve.events.push(this),this.point=ve,this.isLeft=ye}link(ve){if(ve.point===this.point)throw new Error("Tried to link already linked events");const ye=ve.point.events;for(let Ke=0,ht=ye.length;Ke<ht;Ke++){const xt=ye[Ke];this.point.events.push(xt),xt.point=this.point}this.checkForConsuming()}checkForConsuming(){const ve=this.point.events.length;for(let ye=0;ye<ve;ye++){const Ke=this.point.events[ye];if(Ke.segment.consumedBy===void 0)for(let ht=ye+1;ht<ve;ht++){const xt=this.point.events[ht];xt.consumedBy===void 0&&Ke.otherSE.point.events===xt.otherSE.point.events&&Ke.segment.consume(xt.segment)}}}getAvailableLinkedEvents(){const ve=[];for(let ye=0,Ke=this.point.events.length;ye<Ke;ye++){const ht=this.point.events[ye];ht!==this&&!ht.segment.ringOut&&ht.segment.isInResult()&&ve.push(ht)}return ve}getLeftmostComparator(ve){const ye=new Map,Ke=ht=>{const xt=ht.otherSE;ye.set(ht,{sine:Tn(this.point,ve.point,xt.point),cosine:lr(this.point,ve.point,xt.point)})};return(ht,xt)=>{ye.has(ht)||Ke(ht),ye.has(xt)||Ke(xt);const{sine:Jt,cosine:Dn}=ye.get(ht),{sine:fr,cosine:In}=ye.get(xt);return Jt>=0&&fr>=0?Dn<In?1:Dn>In?-1:0:Jt<0&&fr<0?Dn<In?-1:Dn>In?1:0:fr<Jt?-1:fr>Jt?1:0}}}let Fe=0;class on{static compare(ve,ye){const Ke=ve.leftSE.point.x,ht=ye.leftSE.point.x,xt=ve.rightSE.point.x,Jt=ye.rightSE.point.x;if(Jt<Ke)return 1;if(xt<ht)return-1;const Dn=ve.leftSE.point.y,fr=ye.leftSE.point.y,In=ve.rightSE.point.y,ke=ye.rightSE.point.y;if(Ke<ht){if(fr<Dn&&fr<In)return 1;if(fr>Dn&&fr>In)return-1;const Pe=ve.comparePoint(ye.leftSE.point);if(Pe<0)return 1;if(Pe>0)return-1;const Ge=ye.comparePoint(ve.rightSE.point);return Ge!==0?Ge:-1}if(Ke>ht){if(Dn<fr&&Dn<ke)return-1;if(Dn>fr&&Dn>ke)return 1;const Pe=ye.comparePoint(ve.leftSE.point);if(Pe!==0)return Pe;const Ge=ve.comparePoint(ye.rightSE.point);return Ge<0?1:Ge>0?-1:1}if(Dn<fr)return-1;if(Dn>fr)return 1;if(xt<Jt){const Pe=ye.comparePoint(ve.rightSE.point);if(Pe!==0)return Pe}if(xt>Jt){const Pe=ve.comparePoint(ye.rightSE.point);if(Pe<0)return 1;if(Pe>0)return-1}if(xt!==Jt){const Pe=In-Dn,Ge=xt-Ke,gt=ke-fr,Bt=Jt-ht;if(Pe>Ge&&gt<Bt)return 1;if(Pe<Ge&&gt>Bt)return-1}return xt>Jt?1:xt<Jt||In<ke?-1:In>ke?1:ve.id<ye.id?-1:ve.id>ye.id?1:0}constructor(ve,ye,Ke,ht){this.id=++Fe,this.leftSE=ve,ve.segment=this,ve.otherSE=ye,this.rightSE=ye,ye.segment=this,ye.otherSE=ve,this.rings=Ke,this.windings=ht}static fromRing(ve,ye,Ke){let ht,xt,Jt;const Dn=Xe.comparePoints(ve,ye);if(Dn<0)ht=ve,xt=ye,Jt=1;else if(Dn>0)ht=ye,xt=ve,Jt=-1;else throw new Error(`Tried to create degenerate segment at [${ve.x}, ${ve.y}]`);const fr=new Xe(ht,!0),In=new Xe(xt,!1);return new on(fr,In,[Ke],[Jt])}replaceRightSE(ve){this.rightSE=ve,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const ve=this.leftSE.point.y,ye=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ve<ye?ve:ye},ur:{x:this.rightSE.point.x,y:ve>ye?ve:ye}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(ve){return ve.x===this.leftSE.point.x&&ve.y===this.leftSE.point.y||ve.x===this.rightSE.point.x&&ve.y===this.rightSE.point.y}comparePoint(ve){if(this.isAnEndpoint(ve))return 0;const ye=this.leftSE.point,Ke=this.rightSE.point,ht=this.vector();if(ye.x===Ke.x)return ve.x===ye.x?0:ve.x<ye.x?1:-1;const xt=(ve.y-ye.y)/ht.y,Jt=ye.x+xt*ht.x;if(ve.x===Jt)return 0;const Dn=(ve.x-ye.x)/ht.x,fr=ye.y+Dn*ht.y;return ve.y===fr?0:ve.y<fr?-1:1}getIntersection(ve){const ye=this.bbox(),Ke=ve.bbox(),ht=Et(ye,Ke);if(ht===null)return null;const xt=this.leftSE.point,Jt=this.rightSE.point,Dn=ve.leftSE.point,fr=ve.rightSE.point,In=Ue(ye,Dn)&&this.comparePoint(Dn)===0,ke=Ue(Ke,xt)&&ve.comparePoint(xt)===0,Pe=Ue(ye,fr)&&this.comparePoint(fr)===0,Ge=Ue(Ke,Jt)&&ve.comparePoint(Jt)===0;if(ke&&In)return Ge&&!Pe?Jt:!Ge&&Pe?fr:null;if(ke)return Pe&&xt.x===fr.x&&xt.y===fr.y?null:xt;if(In)return Ge&&Jt.x===Dn.x&&Jt.y===Dn.y?null:Dn;if(Ge&&Pe)return null;if(Ge)return Jt;if(Pe)return fr;const gt=bn(xt,this.vector(),Dn,ve.vector());return gt===null||!Ue(ht,gt)?null:Ie.round(gt.x,gt.y)}split(ve){const ye=[],Ke=ve.events!==void 0,ht=new Xe(ve,!0),xt=new Xe(ve,!1),Jt=this.rightSE;this.replaceRightSE(xt),ye.push(xt),ye.push(ht);const Dn=new on(ht,Jt,this.rings.slice(),this.windings.slice());return Xe.comparePoints(Dn.leftSE.point,Dn.rightSE.point)>0&&Dn.swapEvents(),Xe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Ke&&(ht.checkForConsuming(),xt.checkForConsuming()),ye}swapEvents(){const ve=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ve,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let ye=0,Ke=this.windings.length;ye<Ke;ye++)this.windings[ye]*=-1}consume(ve){let ye=this,Ke=ve;for(;ye.consumedBy;)ye=ye.consumedBy;for(;Ke.consumedBy;)Ke=Ke.consumedBy;const ht=on.compare(ye,Ke);if(ht!==0){if(ht>0){const xt=ye;ye=Ke,Ke=xt}if(ye.prev===Ke){const xt=ye;ye=Ke,Ke=xt}for(let xt=0,Jt=Ke.rings.length;xt<Jt;xt++){const Dn=Ke.rings[xt],fr=Ke.windings[xt],In=ye.rings.indexOf(Dn);In===-1?(ye.rings.push(Dn),ye.windings.push(fr)):ye.windings[In]+=fr}Ke.rings=null,Ke.windings=null,Ke.consumedBy=ye,Ke.leftSE.consumedBy=ye.leftSE,Ke.rightSE.consumedBy=ye.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const ve=this.prev.consumedBy||this.prev;this._beforeState=ve.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const ve=this.beforeState();this._afterState={rings:ve.rings.slice(0),windings:ve.windings.slice(0),multiPolys:[]};const ye=this._afterState.rings,Ke=this._afterState.windings,ht=this._afterState.multiPolys;for(let Dn=0,fr=this.rings.length;Dn<fr;Dn++){const In=this.rings[Dn],ke=this.windings[Dn],Pe=ye.indexOf(In);Pe===-1?(ye.push(In),Ke.push(ke)):Ke[Pe]+=ke}const xt=[],Jt=[];for(let Dn=0,fr=ye.length;Dn<fr;Dn++){if(Ke[Dn]===0)continue;const In=ye[Dn],ke=In.poly;if(Jt.indexOf(ke)===-1)if(In.isExterior)xt.push(ke);else{Jt.indexOf(ke)===-1&&Jt.push(ke);const Pe=xt.indexOf(In.poly);Pe!==-1&&xt.splice(Pe,1)}}for(let Dn=0,fr=xt.length;Dn<fr;Dn++){const In=xt[Dn].multiPoly;ht.indexOf(In)===-1&&ht.push(In)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const ve=this.beforeState().multiPolys,ye=this.afterState().multiPolys;switch(gr.type){case"union":{const Ke=ve.length===0,ht=ye.length===0;this._isInResult=Ke!==ht;break}case"intersection":{let Ke,ht;ve.length<ye.length?(Ke=ve.length,ht=ye.length):(Ke=ye.length,ht=ve.length),this._isInResult=ht===gr.numMultiPolys&&Ke<ht;break}case"xor":{const Ke=Math.abs(ve.length-ye.length);this._isInResult=Ke%2===1;break}case"difference":{const Ke=ht=>ht.length===1&&ht[0].isSubject;this._isInResult=Ke(ve)!==Ke(ye);break}default:throw new Error(`Unrecognized operation type found ${gr.type}`)}return this._isInResult}}class B{constructor(ve,ye,Ke){if(!Array.isArray(ve)||ve.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ye,this.isExterior=Ke,this.segments=[],typeof ve[0][0]!="number"||typeof ve[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const ht=Ie.round(ve[0][0],ve[0][1]);this.bbox={ll:{x:ht.x,y:ht.y},ur:{x:ht.x,y:ht.y}};let xt=ht;for(let Jt=1,Dn=ve.length;Jt<Dn;Jt++){if(typeof ve[Jt][0]!="number"||typeof ve[Jt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let fr=Ie.round(ve[Jt][0],ve[Jt][1]);fr.x===xt.x&&fr.y===xt.y||(this.segments.push(on.fromRing(xt,fr,this)),fr.x<this.bbox.ll.x&&(this.bbox.ll.x=fr.x),fr.y<this.bbox.ll.y&&(this.bbox.ll.y=fr.y),fr.x>this.bbox.ur.x&&(this.bbox.ur.x=fr.x),fr.y>this.bbox.ur.y&&(this.bbox.ur.y=fr.y),xt=fr)}(ht.x!==xt.x||ht.y!==xt.y)&&this.segments.push(on.fromRing(xt,ht,this))}getSweepEvents(){const ve=[];for(let ye=0,Ke=this.segments.length;ye<Ke;ye++){const ht=this.segments[ye];ve.push(ht.leftSE),ve.push(ht.rightSE)}return ve}}class be{constructor(ve,ye){if(!Array.isArray(ve))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new B(ve[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let Ke=1,ht=ve.length;Ke<ht;Ke++){const xt=new B(ve[Ke],this,!1);xt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=xt.bbox.ll.x),xt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=xt.bbox.ll.y),xt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=xt.bbox.ur.x),xt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=xt.bbox.ur.y),this.interiorRings.push(xt)}this.multiPoly=ye}getSweepEvents(){const ve=this.exteriorRing.getSweepEvents();for(let ye=0,Ke=this.interiorRings.length;ye<Ke;ye++){const ht=this.interiorRings[ye].getSweepEvents();for(let xt=0,Jt=ht.length;xt<Jt;xt++)ve.push(ht[xt])}return ve}}class yt{constructor(ve,ye){if(!Array.isArray(ve))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof ve[0][0][0]=="number"&&(ve=[ve])}catch(Ke){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let Ke=0,ht=ve.length;Ke<ht;Ke++){const xt=new be(ve[Ke],this);xt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=xt.bbox.ll.x),xt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=xt.bbox.ll.y),xt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=xt.bbox.ur.x),xt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=xt.bbox.ur.y),this.polys.push(xt)}this.isSubject=ye}getSweepEvents(){const ve=[];for(let ye=0,Ke=this.polys.length;ye<Ke;ye++){const ht=this.polys[ye].getSweepEvents();for(let xt=0,Jt=ht.length;xt<Jt;xt++)ve.push(ht[xt])}return ve}}class Ee{static factory(ve){const ye=[];for(let Ke=0,ht=ve.length;Ke<ht;Ke++){const xt=ve[Ke];if(!xt.isInResult()||xt.ringOut)continue;let Jt=null,Dn=xt.leftSE,fr=xt.rightSE;const In=[Dn],ke=Dn.point,Pe=[];for(;Jt=Dn,Dn=fr,In.push(Dn),Dn.point!==ke;)for(;;){const Ge=Dn.getAvailableLinkedEvents();if(Ge.length===0){const an=In[0].point,An=In[In.length-1].point;throw new Error(`Unable to complete output ring starting at [${an.x}, ${an.y}]. Last matching segment found ends at [${An.x}, ${An.y}].`)}if(Ge.length===1){fr=Ge[0].otherSE;break}let gt=null;for(let an=0,An=Pe.length;an<An;an++)if(Pe[an].point===Dn.point){gt=an;break}if(gt!==null){const an=Pe.splice(gt)[0],An=In.splice(an.index);An.unshift(An[0].otherSE),ye.push(new Ee(An.reverse()));continue}Pe.push({index:In.length,point:Dn.point});const Bt=Dn.getLeftmostComparator(Jt);fr=Ge.sort(Bt)[0].otherSE;break}ye.push(new Ee(In))}return ye}constructor(ve){this.events=ve;for(let ye=0,Ke=ve.length;ye<Ke;ye++)ve[ye].segment.ringOut=this;this.poly=null}getGeom(){let ve=this.events[0].point;const ye=[ve];for(let In=1,ke=this.events.length-1;In<ke;In++){const Pe=this.events[In].point,Ge=this.events[In+1].point;Ut(Pe,ve,Ge)!==0&&(ye.push(Pe),ve=Pe)}if(ye.length===1)return null;const Ke=ye[0],ht=ye[1];Ut(Ke,ve,ht)===0&&ye.shift(),ye.push(ye[0]);const xt=this.isExteriorRing()?1:-1,Jt=this.isExteriorRing()?0:ye.length-1,Dn=this.isExteriorRing()?ye.length:-1,fr=[];for(let In=Jt;In!=Dn;In+=xt)fr.push([ye[In].x,ye[In].y]);return fr}isExteriorRing(){if(this._isExteriorRing===void 0){const ve=this.enclosingRing();this._isExteriorRing=ve?!ve.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let ve=this.events[0];for(let ht=1,xt=this.events.length;ht<xt;ht++){const Jt=this.events[ht];Xe.compare(ve,Jt)>0&&(ve=Jt)}let ye=ve.segment.prevInResult(),Ke=ye?ye.prevInResult():null;for(;;){if(!ye)return null;if(!Ke)return ye.ringOut;if(Ke.ringOut!==ye.ringOut)return Ke.ringOut.enclosingRing()!==ye.ringOut?ye.ringOut:ye.ringOut.enclosingRing();ye=Ke.prevInResult(),Ke=ye?ye.prevInResult():null}}}class Zt{constructor(ve){this.exteriorRing=ve,ve.poly=this,this.interiorRings=[]}addInterior(ve){this.interiorRings.push(ve),ve.poly=this}getGeom(){const ve=[this.exteriorRing.getGeom()];if(ve[0]===null)return null;for(let ye=0,Ke=this.interiorRings.length;ye<Ke;ye++){const ht=this.interiorRings[ye].getGeom();ht!==null&&ve.push(ht)}return ve}}class _n{constructor(ve){this.rings=ve,this.polys=this._composePolys(ve)}getGeom(){const ve=[];for(let ye=0,Ke=this.polys.length;ye<Ke;ye++){const ht=this.polys[ye].getGeom();ht!==null&&ve.push(ht)}return ve}_composePolys(ve){const ye=[];for(let Ke=0,ht=ve.length;Ke<ht;Ke++){const xt=ve[Ke];if(!xt.poly)if(xt.isExteriorRing())ye.push(new Zt(xt));else{const Jt=xt.enclosingRing();Jt.poly||ye.push(new Zt(Jt)),Jt.poly.addInterior(xt)}}return ye}}class Sn{constructor(ve){let ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:on.compare;this.queue=ve,this.tree=new st(ye),this.segments=[]}process(ve){const ye=ve.segment,Ke=[];if(ve.consumedBy)return ve.isLeft?this.queue.remove(ve.otherSE):this.tree.remove(ye),Ke;const ht=ve.isLeft?this.tree.add(ye):this.tree.find(ye);if(!ht)throw new Error(`Unable to find segment #${ye.id} [${ye.leftSE.point.x}, ${ye.leftSE.point.y}] -> [${ye.rightSE.point.x}, ${ye.rightSE.point.y}] in SweepLine tree.`);let xt=ht,Jt=ht,Dn,fr;for(;Dn===void 0;)xt=this.tree.prev(xt),xt===null?Dn=null:xt.key.consumedBy===void 0&&(Dn=xt.key);for(;fr===void 0;)Jt=this.tree.next(Jt),Jt===null?fr=null:Jt.key.consumedBy===void 0&&(fr=Jt.key);if(ve.isLeft){let In=null;if(Dn){const Pe=Dn.getIntersection(ye);if(Pe!==null&&(ye.isAnEndpoint(Pe)||(In=Pe),!Dn.isAnEndpoint(Pe))){const Ge=this._splitSafely(Dn,Pe);for(let gt=0,Bt=Ge.length;gt<Bt;gt++)Ke.push(Ge[gt])}}let ke=null;if(fr){const Pe=fr.getIntersection(ye);if(Pe!==null&&(ye.isAnEndpoint(Pe)||(ke=Pe),!fr.isAnEndpoint(Pe))){const Ge=this._splitSafely(fr,Pe);for(let gt=0,Bt=Ge.length;gt<Bt;gt++)Ke.push(Ge[gt])}}if(In!==null||ke!==null){let Pe=null;In===null?Pe=ke:ke===null?Pe=In:Pe=Xe.comparePoints(In,ke)<=0?In:ke,this.queue.remove(ye.rightSE),Ke.push(ye.rightSE);const Ge=ye.split(Pe);for(let gt=0,Bt=Ge.length;gt<Bt;gt++)Ke.push(Ge[gt])}Ke.length>0?(this.tree.remove(ye),Ke.push(ve)):(this.segments.push(ye),ye.prev=Dn)}else{if(Dn&&fr){const In=Dn.getIntersection(fr);if(In!==null){if(!Dn.isAnEndpoint(In)){const ke=this._splitSafely(Dn,In);for(let Pe=0,Ge=ke.length;Pe<Ge;Pe++)Ke.push(ke[Pe])}if(!fr.isAnEndpoint(In)){const ke=this._splitSafely(fr,In);for(let Pe=0,Ge=ke.length;Pe<Ge;Pe++)Ke.push(ke[Pe])}}}this.tree.remove(ye)}return Ke}_splitSafely(ve,ye){this.tree.remove(ve);const Ke=ve.rightSE;this.queue.remove(Ke);const ht=ve.split(ye);return ht.push(Ke),ve.consumedBy===void 0&&this.tree.add(ve),ht}}const Bn=typeof ee!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,or=typeof ee!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class dr{run(ve,ye,Ke){gr.type=ve,Ie.reset();const ht=[new yt(ye,!0)];for(let Pe=0,Ge=Ke.length;Pe<Ge;Pe++)ht.push(new yt(Ke[Pe],!1));if(gr.numMultiPolys=ht.length,gr.type==="difference"){const Pe=ht[0];let Ge=1;for(;Ge<ht.length;)Et(ht[Ge].bbox,Pe.bbox)!==null?Ge++:ht.splice(Ge,1)}if(gr.type==="intersection")for(let Pe=0,Ge=ht.length;Pe<Ge;Pe++){const gt=ht[Pe];for(let Bt=Pe+1,an=ht.length;Bt<an;Bt++)if(Et(gt.bbox,ht[Bt].bbox)===null)return[]}const xt=new st(Xe.compare);for(let Pe=0,Ge=ht.length;Pe<Ge;Pe++){const gt=ht[Pe].getSweepEvents();for(let Bt=0,an=gt.length;Bt<an;Bt++)if(xt.insert(gt[Bt]),xt.size>Bn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const Jt=new Sn(xt);let Dn=xt.size,fr=xt.pop();for(;fr;){const Pe=fr.key;if(xt.size===Dn){const gt=Pe.segment;throw new Error(`Unable to pop() ${Pe.isLeft?"left":"right"} SweepEvent [${Pe.point.x}, ${Pe.point.y}] from segment #${gt.id} [${gt.leftSE.point.x}, ${gt.leftSE.point.y}] -> [${gt.rightSE.point.x}, ${gt.rightSE.point.y}] from queue.`)}if(xt.size>Bn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(Jt.segments.length>or)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Ge=Jt.process(Pe);for(let gt=0,Bt=Ge.length;gt<Bt;gt++){const an=Ge[gt];an.consumedBy===void 0&&xt.insert(an)}Dn=xt.size,fr=xt.pop()}Ie.reset();const In=Ee.factory(Jt.segments);return new _n(In).getGeom()}}const gr=new dr;var Yr={union:function(bt){for(var ve=arguments.length,ye=new Array(ve>1?ve-1:0),Ke=1;Ke<ve;Ke++)ye[Ke-1]=arguments[Ke];return gr.run("union",bt,ye)},intersection:function(bt){for(var ve=arguments.length,ye=new Array(ve>1?ve-1:0),Ke=1;Ke<ve;Ke++)ye[Ke-1]=arguments[Ke];return gr.run("intersection",bt,ye)},xor:function(bt){for(var ve=arguments.length,ye=new Array(ve>1?ve-1:0),Ke=1;Ke<ve;Ke++)ye[Ke-1]=arguments[Ke];return gr.run("xor",bt,ye)},difference:function(bt){for(var ve=arguments.length,ye=new Array(ve>1?ve-1:0),Ke=1;Ke<ve;Ke++)ye[Ke-1]=arguments[Ke];return gr.run("difference",bt,ye)}};return Yr})},62273:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var D={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},ee=G.default=D},27590:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var D={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},ee=G.default=D},45598:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ne;var ae=ee(D(67294)),T=D(11805);function ne(Q){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=[];return ae.default.Children.forEach(Q,function(Ce){Ce==null&&!ge.keepEmpty||(Array.isArray(Ce)?pe=pe.concat(ne(Ce)):(0,T.isFragment)(Ce)&&Ce.props?pe=pe.concat(ne(Ce.props.children,ge)):pe.push(Ce))}),pe}},3481:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.isStyleSupport=Q;var ae=ee(D(19158)),T=function(pe){if((0,ae.default)()&&window.document.documentElement){var Ce=Array.isArray(pe)?pe:[pe],he=window.document.documentElement;return Ce.some(function(st){return st in he.style})}return!1},ne=function(pe,Ce){if(!T(pe))return!1;var he=document.createElement("div"),st=he.style[pe];return he.style[pe]=Ce,he.style[pe]!==st};function Q(ge,pe){return!Array.isArray(ge)&&pe!==void 0?ne(ge,pe):T(ge)}},27712:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var D={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(T){var ne=T.keyCode;if(T.altKey&&!T.ctrlKey||T.metaKey||ne>=D.F1&&ne<=D.F12)return!1;switch(ne){case D.ALT:case D.CAPS_LOCK:case D.CONTEXT_MENU:case D.CTRL:case D.DOWN:case D.END:case D.ESC:case D.HOME:case D.INSERT:case D.LEFT:case D.MAC_FF_META:case D.META:case D.NUMLOCK:case D.NUM_CENTER:case D.PAGE_DOWN:case D.PAGE_UP:case D.PAUSE:case D.PRINT_SCREEN:case D.RIGHT:case D.SHIFT:case D.UP:case D.WIN_KEY:case D.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(T){if(T>=D.ZERO&&T<=D.NINE||T>=D.NUM_ZERO&&T<=D.NUM_MULTIPLY||T>=D.A&&T<=D.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&T===0)return!0;switch(T){case D.SPACE:case D.QUESTION_MARK:case D.NUM_PLUS:case D.NUM_MINUS:case D.NUM_PERIOD:case D.NUM_DIVISION:case D.SEMICOLON:case D.DASH:case D.EQUALS:case D.COMMA:case D.PERIOD:case D.SLASH:case D.APOSTROPHE:case D.SINGLE_QUOTE:case D.OPEN_SQUARE_BRACKET:case D.BACKSLASH:case D.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},ee=G.default=D},18545:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=T;var ae=ee(D(67294));function T(ne){var Q=ae.useRef();Q.current=ne;var ge=ae.useCallback(function(){for(var pe,Ce=arguments.length,he=new Array(Ce),st=0;st<Ce;st++)he[st]=arguments[st];return(pe=Q.current)===null||pe===void 0?void 0:pe.call.apply(pe,[Q].concat(he))},[]);return ge}},82546:function(It,G,D){"use strict";var ee=D(64836).default,ae=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useLayoutUpdateEffect=G.default=void 0;var T=ae(D(67294)),ne=ee(D(19158)),Q=(0,ne.default)()?T.useLayoutEffect:T.useEffect,ge=function(st,re){var Se=T.useRef(!0);Q(function(){return st(Se.current)},re),Q(function(){return Se.current=!1,function(){Se.current=!0}},[])},pe=G.useLayoutUpdateEffect=function(st,re){ge(function(Se){if(!Se)return st()},re)},Ce=G.default=ge},67265:function(It,G,D){"use strict";var ee=D(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=T;var ae=ee(D(67294));function T(ne,Q,ge){var pe=ae.useRef({});return(!("value"in pe.current)||ge(pe.current.condition,Q))&&(pe.current.value=ne(),pe.current.condition=Q),pe.current.value}},60869:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=pe;var ae=ee(D(27424)),T=ee(D(18545)),ne=D(82546),Q=ee(D(78423));function ge(Ce){return Ce!==void 0}function pe(Ce,he){var st=he||{},re=st.defaultValue,Se=st.value,se=st.onChange,de=st.postState,xe=(0,Q.default)(function(){return ge(Se)?Se:ge(re)?typeof re=="function"?re():re:typeof Ce=="function"?Ce():Ce}),le=(0,ae.default)(xe,2),Ue=le[0],Et=le[1],mt=Se!==void 0?Se:Ue,Wt=de?de(mt):mt,Rt=(0,T.default)(se),Tt=(0,Q.default)([mt]),Ze=(0,ae.default)(Tt,2),Ie=Ze[0],Qe=Ze[1];(0,ne.useLayoutUpdateEffect)(function(){var De=Ie[0];Ue!==De&&Rt(Ue,De)},[Ie]),(0,ne.useLayoutUpdateEffect)(function(){ge(Se)||Et(Se)},[Se]);var it=(0,T.default)(function(De,cn){Et(De,cn),Qe([mt],cn)});return[Wt,it]}},78423:function(It,G,D){"use strict";var ee=D(75263).default,ae=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=Q;var T=ae(D(27424)),ne=ee(D(67294));function Q(ge){var pe=ne.useRef(!1),Ce=ne.useState(ge),he=(0,T.default)(Ce,2),st=he[0],re=he[1];ne.useEffect(function(){return pe.current=!1,function(){pe.current=!0}},[]);function Se(se,de){de&&pe.current||re(se)}return[st,Se]}},11102:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ae=ee(D(18698)),T=ee(D(45520));function ne(ge,pe){var Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,he=new Set;function st(re,Se){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,de=he.has(re);if((0,T.default)(!de,"Warning: There may be circular references"),de)return!1;if(re===Se)return!0;if(Ce&&se>1)return!1;he.add(re);var xe=se+1;if(Array.isArray(re)){if(!Array.isArray(Se)||re.length!==Se.length)return!1;for(var le=0;le<re.length;le++)if(!st(re[le],Se[le],xe))return!1;return!0}if(re&&Se&&(0,ae.default)(re)==="object"&&(0,ae.default)(Se)==="object"){var Ue=Object.keys(re);return Ue.length!==Object.keys(Se).length?!1:Ue.every(function(Et){return st(re[Et],Se[Et],xe)})}return!1}return st(ge,pe)}var Q=G.default=ne},18475:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=T;var ae=ee(D(42122));function T(ne,Q){var ge=(0,ae.default)({},ne);return Array.isArray(Q)&&Q.forEach(function(pe){delete ge[pe]}),ge}},75531:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.composeRef=pe,G.fillRef=ge,G.supportNodeRef=st,G.supportRef=he,G.useComposeRef=Ce;var ae=ee(D(18698)),T=D(67294),ne=D(11805),Q=ee(D(67265));function ge(re,Se){typeof re=="function"?re(Se):(0,ae.default)(re)==="object"&&re&&"current"in re&&(re.current=Se)}function pe(){for(var re=arguments.length,Se=new Array(re),se=0;se<re;se++)Se[se]=arguments[se];var de=Se.filter(function(xe){return xe});return de.length<=1?de[0]:function(xe){Se.forEach(function(le){ge(le,xe)})}}function Ce(){for(var re=arguments.length,Se=new Array(re),se=0;se<re;se++)Se[se]=arguments[se];return(0,Q.default)(function(){return pe.apply(void 0,Se)},Se,function(de,xe){return de.length!==xe.length||de.every(function(le,Ue){return le!==xe[Ue]})})}function he(re){var Se,se,de=(0,ne.isMemo)(re)?re.type.type:re.type;return!(typeof de=="function"&&!((Se=de.prototype)!==null&&Se!==void 0&&Se.render)&&de.$$typeof!==ne.ForwardRef||typeof re=="function"&&!((se=re.prototype)!==null&&se!==void 0&&se.render)&&re.$$typeof!==ne.ForwardRef)}function st(re){return!(0,T.isValidElement)(re)||(0,ne.isFragment)(re)?!1:he(re)}},94787:function(It,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=D;function D(ee,ae){for(var T=ee,ne=0;ne<ae.length;ne+=1){if(T==null)return;T=T[ae[ne]]}return T}},20059:function(It,G,D){"use strict";var ee=D(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=Ce,G.merge=Se;var ae=ee(D(18698)),T=ee(D(42122)),ne=ee(D(861)),Q=ee(D(51589)),ge=ee(D(94787));function pe(se,de,xe,le){if(!de.length)return xe;var Ue=(0,Q.default)(de),Et=Ue[0],mt=Ue.slice(1),Wt;return!se&&typeof Et=="number"?Wt=[]:Array.isArray(se)?Wt=(0,ne.default)(se):Wt=(0,T.default)({},se),le&&xe===void 0&&mt.length===1?delete Wt[Et][mt[0]]:Wt[Et]=pe(Wt[Et],mt,xe,le),Wt}function Ce(se,de,xe){var le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return de.length&&le&&xe===void 0&&!(0,ge.default)(se,de.slice(0,-1))?se:pe(se,de,xe,le)}function he(se){return(0,ae.default)(se)==="object"&&se!==null&&Object.getPrototypeOf(se)===Object.prototype}function st(se){return Array.isArray(se)?[]:{}}var re=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function Se(){for(var se=arguments.length,de=new Array(se),xe=0;xe<se;xe++)de[xe]=arguments[xe];var le=st(de[0]);return de.forEach(function(Ue){function Et(mt,Wt){var Rt=new Set(Wt),Tt=(0,ge.default)(Ue,mt),Ze=Array.isArray(Tt);if(Ze||he(Tt)){if(!Rt.has(Tt)){Rt.add(Tt);var Ie=(0,ge.default)(le,mt);Ze?le=Ce(le,mt,[]):(!Ie||(0,ae.default)(Ie)!=="object")&&(le=Ce(le,mt,st(Tt))),re(Tt).forEach(function(Qe){Et([].concat((0,ne.default)(mt),[Qe]),Rt)})}}else le=Ce(le,mt,Tt)}Et([])}),le}},81550:function(It){(function(G,D){It.exports=D()})(this,function(){"use strict";var G=function(et){return et instanceof Uint8Array||et instanceof Uint16Array||et instanceof Uint32Array||et instanceof Int8Array||et instanceof Int16Array||et instanceof Int32Array||et instanceof Float32Array||et instanceof Float64Array||et instanceof Uint8ClampedArray},D=function(et,vn){for(var Vn=Object.keys(vn),$r=0;$r<Vn.length;++$r)et[Vn[$r]]=vn[Vn[$r]];return et},ee=`
`;function ae(et){return typeof atob!="undefined"?atob(et):"base64:"+et}function T(et){var vn=new Error("(regl) "+et);throw console.error(vn),vn}function ne(et,vn){et||T(vn)}function Q(et){return et?": "+et:""}function ge(et,vn,Vn){et in vn||T("unknown parameter ("+et+")"+Q(Vn)+". possible values: "+Object.keys(vn).join())}function pe(et,vn){G(et)||T("invalid parameter type"+Q(vn)+". must be a typed array")}function Ce(et,vn){switch(vn){case"number":return typeof et=="number";case"object":return typeof et=="object";case"string":return typeof et=="string";case"boolean":return typeof et=="boolean";case"function":return typeof et=="function";case"undefined":return typeof et=="undefined";case"symbol":return typeof et=="symbol"}}function he(et,vn,Vn){Ce(et,vn)||T("invalid parameter type"+Q(Vn)+". expected "+vn+", got "+typeof et)}function st(et,vn){et>=0&&(et|0)===et||T("invalid parameter type, ("+et+")"+Q(vn)+". must be a nonnegative integer")}function re(et,vn,Vn){vn.indexOf(et)<0&&T("invalid value"+Q(Vn)+". must be one of: "+vn)}var Se=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function se(et){Object.keys(et).forEach(function(vn){Se.indexOf(vn)<0&&T('invalid regl constructor argument "'+vn+'". must be one of '+Se)})}function de(et,vn){for(et=et+"";et.length<vn;)et=" "+et;return et}function xe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function le(et,vn){this.number=et,this.line=vn,this.errors=[]}function Ue(et,vn,Vn){this.file=et,this.line=vn,this.message=Vn}function Et(){var et=new Error,vn=(et.stack||et).toString(),Vn=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(vn);if(Vn)return Vn[1];var $r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(vn);return $r?$r[1]:"unknown"}function mt(){var et=new Error,vn=(et.stack||et).toString(),Vn=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(vn);if(Vn)return Vn[1];var $r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(vn);return $r?$r[1]:"unknown"}function Wt(et,vn){var Vn=et.split(`
`),$r=1,di=0,Vr={unknown:new xe,0:new xe};Vr.unknown.name=Vr[0].name=vn||Et(),Vr.unknown.lines.push(new le(0,""));for(var Rr=0;Rr<Vn.length;++Rr){var Yi=Vn[Rr],ki=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Yi);if(ki)switch(ki[1]){case"line":var zi=/(\d+)(\s+\d+)?/.exec(ki[2]);zi&&($r=zi[1]|0,zi[2]&&(di=zi[2]|0,di in Vr||(Vr[di]=new xe)));break;case"define":var qi=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ki[2]);qi&&(Vr[di].name=qi[1]?ae(qi[2]):qi[2]);break}Vr[di].lines.push(new le($r++,Yi))}return Object.keys(Vr).forEach(function(ia){var Ei=Vr[ia];Ei.lines.forEach(function(Ui){Ei.index[Ui.number]=Ui})}),Vr}function Rt(et){var vn=[];return et.split(`
`).forEach(function(Vn){if(!(Vn.length<5)){var $r=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Vn);$r?vn.push(new Ue($r[1]|0,$r[2]|0,$r[3].trim())):Vn.length>0&&vn.push(new Ue("unknown",0,Vn))}}),vn}function Tt(et,vn){vn.forEach(function(Vn){var $r=et[Vn.file];if($r){var di=$r.index[Vn.line];if(di){di.errors.push(Vn),$r.hasErrors=!0;return}}et.unknown.hasErrors=!0,et.unknown.lines[0].errors.push(Vn)})}function Ze(et,vn,Vn,$r,di){if(!et.getShaderParameter(vn,et.COMPILE_STATUS)){var Vr=et.getShaderInfoLog(vn),Rr=$r===et.FRAGMENT_SHADER?"fragment":"vertex";Pt(Vn,"string",Rr+" shader source must be a string",di);var Yi=Wt(Vn,di),ki=Rt(Vr);Tt(Yi,ki),Object.keys(Yi).forEach(function(zi){var qi=Yi[zi];if(!qi.hasErrors)return;var ia=[""],Ei=[""];function Ui(ta,Sr){ia.push(ta),Ei.push(Sr||"")}Ui("file number "+zi+": "+qi.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),qi.lines.forEach(function(ta){if(ta.errors.length>0){Ui(de(ta.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ui(ta.line+ee,"color:red; background-color:yellow; font-weight:bold");var Sr=0;ta.errors.forEach(function(ri){var Vi=ri.message,xa=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Vi);if(xa){var Oi=xa[1];switch(Vi=xa[2],Oi){case"assign":Oi="=";break}Sr=Math.max(ta.line.indexOf(Oi,Sr),0)}else Sr=0;Ui(de("| ",6)),Ui(de("^^^",Sr+3)+ee,"font-weight:bold"),Ui(de("| ",6)),Ui(Vi+ee,"font-weight:bold")}),Ui(de("| ",6)+ee)}else Ui(de(ta.number,4)+"|  "),Ui(ta.line+ee,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ei[0]=ia.join("%c"),console.log.apply(console,Ei)):console.log(ia.join(""))}),ne.raise("Error compiling "+Rr+" shader, "+Yi[0].name)}}function Ie(et,vn,Vn,$r,di){if(!et.getProgramParameter(vn,et.LINK_STATUS)){var Vr=et.getProgramInfoLog(vn),Rr=Wt(Vn,di),Yi=Wt($r,di),ki='Error linking program with vertex shader, "'+Yi[0].name+'", and fragment shader "'+Rr[0].name+'"';typeof document!="undefined"?console.log("%c"+ki+ee+"%c"+Vr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ki+ee+Vr),ne.raise(ki)}}function Qe(et){et._commandRef=Et()}function it(et,vn,Vn,$r){Qe(et);function di(ki){return ki?$r.id(ki):0}et._fragId=di(et.static.frag),et._vertId=di(et.static.vert);function Vr(ki,zi){Object.keys(zi).forEach(function(qi){ki[$r.id(qi)]=!0})}var Rr=et._uniformSet={};Vr(Rr,vn.static),Vr(Rr,vn.dynamic);var Yi=et._attributeSet={};Vr(Yi,Vn.static),Vr(Yi,Vn.dynamic),et._hasCount="count"in et.static||"count"in et.dynamic||"elements"in et.static||"elements"in et.dynamic}function De(et,vn){var Vn=mt();T(et+" in command "+(vn||Et())+(Vn==="unknown"?"":" called from "+Vn))}function cn(et,vn,Vn){et||De(vn,Vn||Et())}function qe(et,vn,Vn,$r){et in vn||De("unknown parameter ("+et+")"+Q(Vn)+". possible values: "+Object.keys(vn).join(),$r||Et())}function Pt(et,vn,Vn,$r){Ce(et,vn)||De("invalid parameter type"+Q(Vn)+". expected "+vn+", got "+typeof et,$r||Et())}function Le(et){et()}function pt(et,vn,Vn){et.texture?re(et.texture._texture.internalformat,vn,"unsupported texture format for attachment"):re(et.renderbuffer._renderbuffer.format,Vn,"unsupported renderbuffer format for attachment")}var at=33071,nt=9728,Ct=9984,rt=9985,vt=9986,Ve=9987,hn=5120,yn=5121,ir=5122,Qn=5123,Ut=5124,En=5125,Tn=5126,lr=32819,ln=32820,Lt=33635,bn=34042,Xe=36193,Fe={};Fe[hn]=Fe[yn]=1,Fe[ir]=Fe[Qn]=Fe[Xe]=Fe[Lt]=Fe[lr]=Fe[ln]=2,Fe[Ut]=Fe[En]=Fe[Tn]=Fe[bn]=4;function on(et,vn){return et===ln||et===lr||et===Lt?2:et===bn?4:Fe[et]*vn}function B(et){return!(et&et-1)&&!!et}function be(et,vn,Vn){var $r,di=vn.width,Vr=vn.height,Rr=vn.channels;ne(di>0&&di<=Vn.maxTextureSize&&Vr>0&&Vr<=Vn.maxTextureSize,"invalid texture shape"),(et.wrapS!==at||et.wrapT!==at)&&ne(B(di)&&B(Vr),"incompatible wrap mode for texture, both width and height must be power of 2"),vn.mipmask===1?di!==1&&Vr!==1&&ne(et.minFilter!==Ct&&et.minFilter!==vt&&et.minFilter!==rt&&et.minFilter!==Ve,"min filter requires mipmap"):(ne(B(di)&&B(Vr),"texture must be a square power of 2 to support mipmapping"),ne(vn.mipmask===(di<<1)-1,"missing or incomplete mipmap data")),vn.type===Tn&&(Vn.extensions.indexOf("oes_texture_float_linear")<0&&ne(et.minFilter===nt&&et.magFilter===nt,"filter not supported, must enable oes_texture_float_linear"),ne(!et.genMipmaps,"mipmap generation not supported with float textures"));var Yi=vn.images;for($r=0;$r<16;++$r)if(Yi[$r]){var ki=di>>$r,zi=Vr>>$r;ne(vn.mipmask&1<<$r,"missing mipmap data");var qi=Yi[$r];if(ne(qi.width===ki&&qi.height===zi,"invalid shape for mip images"),ne(qi.format===vn.format&&qi.internalformat===vn.internalformat&&qi.type===vn.type,"incompatible type for mip image"),!qi.compressed)if(qi.data){var ia=Math.ceil(on(qi.type,Rr)*ki/qi.unpackAlignment)*qi.unpackAlignment;ne(qi.data.byteLength===ia*zi,"invalid data for image, buffer size is inconsistent with image format")}else qi.element||qi.copy}else et.genMipmaps||ne((vn.mipmask&1<<$r)===0,"extra mipmap data");vn.compressed&&ne(!et.genMipmaps,"mipmap generation for compressed images not supported")}function yt(et,vn,Vn,$r){var di=et.width,Vr=et.height,Rr=et.channels;ne(di>0&&di<=$r.maxTextureSize&&Vr>0&&Vr<=$r.maxTextureSize,"invalid texture shape"),ne(di===Vr,"cube map must be square"),ne(vn.wrapS===at&&vn.wrapT===at,"wrap mode not supported by cube map");for(var Yi=0;Yi<Vn.length;++Yi){var ki=Vn[Yi];ne(ki.width===di&&ki.height===Vr,"inconsistent cube map face shape"),vn.genMipmaps&&(ne(!ki.compressed,"can not generate mipmap for compressed textures"),ne(ki.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var zi=ki.images,qi=0;qi<16;++qi){var ia=zi[qi];if(ia){var Ei=di>>qi,Ui=Vr>>qi;ne(ki.mipmask&1<<qi,"missing mipmap data"),ne(ia.width===Ei&&ia.height===Ui,"invalid shape for mip images"),ne(ia.format===et.format&&ia.internalformat===et.internalformat&&ia.type===et.type,"incompatible type for mip image"),ia.compressed||(ia.data?ne(ia.data.byteLength===Ei*Ui*Math.max(on(ia.type,Rr),ia.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ia.element||ia.copy)}}}}var Ee=D(ne,{optional:Le,raise:T,commandRaise:De,command:cn,parameter:ge,commandParameter:qe,constructor:se,type:he,commandType:Pt,isTypedArray:pe,nni:st,oneOf:re,shaderError:Ze,linkError:Ie,callSite:mt,saveCommandRef:Qe,saveDrawInfo:it,framebufferFormat:pt,guessCommand:Et,texture2D:be,textureCube:yt}),Zt=0,_n=0;function Sn(et,vn){this.id=Zt++,this.type=et,this.data=vn}function Bn(et){return et.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function or(et){if(et.length===0)return[];var vn=et.charAt(0),Vn=et.charAt(et.length-1);if(et.length>1&&vn===Vn&&(vn==='"'||vn==="'"))return['"'+Bn(et.substr(1,et.length-2))+'"'];var $r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(et);if($r)return or(et.substr(0,$r.index)).concat(or($r[1])).concat(or(et.substr($r.index+$r[0].length)));var di=et.split(".");if(di.length===1)return['"'+Bn(et)+'"'];for(var Vr=[],Rr=0;Rr<di.length;++Rr)Vr=Vr.concat(or(di[Rr]));return Vr}function dr(et){return"["+or(et).join("][")+"]"}function gr(et,vn){return new Sn(et,dr(vn+""))}function wr(et){return typeof et=="function"&&!et._reglType||et instanceof Sn}function Ar(et,vn){return typeof et=="function"?new Sn(_n,et):et}var Ir={DynamicVariable:Sn,define:gr,isDynamic:wr,unbox:Ar,accessor:dr},Nr={next:typeof requestAnimationFrame=="function"?function(et){return requestAnimationFrame(et)}:function(et){return setTimeout(et,16)},cancel:typeof cancelAnimationFrame=="function"?function(et){return cancelAnimationFrame(et)}:clearTimeout},Yr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function bt(){var et={"":0},vn=[""];return{id:function(Vn){var $r=et[Vn];return $r||($r=et[Vn]=vn.length,vn.push(Vn),$r)},str:function(Vn){return vn[Vn]}}}function ve(et,vn,Vn){var $r=document.createElement("canvas");D($r.style,{border:0,margin:0,padding:0,top:0,left:0}),et.appendChild($r),et===document.body&&($r.style.position="absolute",D(et.style,{margin:0,padding:0}));function di(){var Yi=window.innerWidth,ki=window.innerHeight;if(et!==document.body){var zi=et.getBoundingClientRect();Yi=zi.right-zi.left,ki=zi.bottom-zi.top}$r.width=Vn*Yi,$r.height=Vn*ki,D($r.style,{width:Yi+"px",height:ki+"px"})}var Vr;et!==document.body&&typeof ResizeObserver=="function"?(Vr=new ResizeObserver(function(){setTimeout(di)}),Vr.observe(et)):window.addEventListener("resize",di,!1);function Rr(){Vr?Vr.disconnect():window.removeEventListener("resize",di),et.removeChild($r)}return di(),{canvas:$r,onDestroy:Rr}}function ye(et,vn){function Vn($r){try{return et.getContext($r,vn)}catch(di){return null}}return Vn("webgl")||Vn("experimental-webgl")||Vn("webgl-experimental")}function Ke(et){return typeof et.nodeName=="string"&&typeof et.appendChild=="function"&&typeof et.getBoundingClientRect=="function"}function ht(et){return typeof et.drawArrays=="function"||typeof et.drawElements=="function"}function xt(et){return typeof et=="string"?et.split():(Ee(Array.isArray(et),"invalid extension array"),et)}function Jt(et){return typeof et=="string"?(Ee(typeof document!="undefined","not supported outside of DOM"),document.querySelector(et)):et}function Dn(et){var vn=et||{},Vn,$r,di,Vr,Rr={},Yi=[],ki=[],zi=typeof window=="undefined"?1:window.devicePixelRatio,qi=!1,ia=function(ta){ta&&Ee.raise(ta)},Ei=function(){};if(typeof vn=="string"?(Ee(typeof document!="undefined","selector queries only supported in DOM enviroments"),Vn=document.querySelector(vn),Ee(Vn,"invalid query string for element")):typeof vn=="object"?Ke(vn)?Vn=vn:ht(vn)?(Vr=vn,di=Vr.canvas):(Ee.constructor(vn),"gl"in vn?Vr=vn.gl:"canvas"in vn?di=Jt(vn.canvas):"container"in vn&&($r=Jt(vn.container)),"attributes"in vn&&(Rr=vn.attributes,Ee.type(Rr,"object","invalid context attributes")),"extensions"in vn&&(Yi=xt(vn.extensions)),"optionalExtensions"in vn&&(ki=xt(vn.optionalExtensions)),"onDone"in vn&&(Ee.type(vn.onDone,"function","invalid or missing onDone callback"),ia=vn.onDone),"profile"in vn&&(qi=!!vn.profile),"pixelRatio"in vn&&(zi=+vn.pixelRatio,Ee(zi>0,"invalid pixel ratio"))):Ee.raise("invalid arguments to regl"),Vn&&(Vn.nodeName.toLowerCase()==="canvas"?di=Vn:$r=Vn),!Vr){if(!di){Ee(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Ui=ve($r||document.body,ia,zi);if(!Ui)return null;di=Ui.canvas,Ei=Ui.onDestroy}Rr.premultipliedAlpha===void 0&&(Rr.premultipliedAlpha=!0),Vr=ye(di,Rr)}return Vr?{gl:Vr,canvas:di,container:$r,extensions:Yi,optionalExtensions:ki,pixelRatio:zi,profile:qi,onDone:ia,onDestroy:Ei}:(Ei(),ia("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function fr(et,vn){var Vn={};function $r(Rr){Ee.type(Rr,"string","extension name must be string");var Yi=Rr.toLowerCase(),ki;try{ki=Vn[Yi]=et.getExtension(Yi)}catch(zi){}return!!ki}for(var di=0;di<vn.extensions.length;++di){var Vr=vn.extensions[di];if(!$r(Vr))return vn.onDestroy(),vn.onDone('"'+Vr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return vn.optionalExtensions.forEach($r),{extensions:Vn,restore:function(){Object.keys(Vn).forEach(function(Rr){if(Vn[Rr]&&!$r(Rr))throw new Error("(regl): error restoring extension "+Rr)})}}}function In(et,vn){for(var Vn=Array(et),$r=0;$r<et;++$r)Vn[$r]=vn($r);return Vn}var ke=5120,Pe=5121,Ge=5122,gt=5123,Bt=5124,an=5125,An=5126;function kt(et){for(var vn=16;vn<=1<<28;vn*=16)if(et<=vn)return vn;return 0}function Dt(et){var vn,Vn;return vn=(et>65535)<<4,et>>>=vn,Vn=(et>255)<<3,et>>>=Vn,vn|=Vn,Vn=(et>15)<<2,et>>>=Vn,vn|=Vn,Vn=(et>3)<<1,et>>>=Vn,vn|=Vn,vn|et>>1}function dn(){var et=In(8,function(){return[]});function vn(Vr){var Rr=kt(Vr),Yi=et[Dt(Rr)>>2];return Yi.length>0?Yi.pop():new ArrayBuffer(Rr)}function Vn(Vr){et[Dt(Vr.byteLength)>>2].push(Vr)}function $r(Vr,Rr){var Yi=null;switch(Vr){case ke:Yi=new Int8Array(vn(Rr),0,Rr);break;case Pe:Yi=new Uint8Array(vn(Rr),0,Rr);break;case Ge:Yi=new Int16Array(vn(2*Rr),0,Rr);break;case gt:Yi=new Uint16Array(vn(2*Rr),0,Rr);break;case Bt:Yi=new Int32Array(vn(4*Rr),0,Rr);break;case an:Yi=new Uint32Array(vn(4*Rr),0,Rr);break;case An:Yi=new Float32Array(vn(4*Rr),0,Rr);break;default:return null}return Yi.length!==Rr?Yi.subarray(0,Rr):Yi}function di(Vr){Vn(Vr.buffer)}return{alloc:vn,free:Vn,allocType:$r,freeType:di}}var He=dn();He.zero=dn();var ei=3408,Tr=3410,ii=3411,Di=3412,vi=3413,Br=3414,Gr=3415,bi=33901,Ni=33902,Qa=3379,Xi=3386,ao=34921,ko=36347,Ba=36348,mi=35661,Je=35660,wt=34930,Kt=36349,Mn=34076,Yn=34024,Gn=7936,Ht=7937,On=7938,Cr=35724,Er=34047,gi=36063,aa=34852,ya=3553,wi=34067,sa=34069,$i=33984,hi=6408,fa=5126,ea=5121,ka=36160,Bi=36053,_a=36064,to=16384,Ae=function(et,vn){var Vn=1;vn.ext_texture_filter_anisotropic&&(Vn=et.getParameter(Er));var $r=1,di=1;vn.webgl_draw_buffers&&($r=et.getParameter(aa),di=et.getParameter(gi));var Vr=!!vn.oes_texture_float;if(Vr){var Rr=et.createTexture();et.bindTexture(ya,Rr),et.texImage2D(ya,0,hi,1,1,0,hi,fa,null);var Yi=et.createFramebuffer();if(et.bindFramebuffer(ka,Yi),et.framebufferTexture2D(ka,_a,ya,Rr,0),et.bindTexture(ya,null),et.checkFramebufferStatus(ka)!==Bi)Vr=!1;else{et.viewport(0,0,1,1),et.clearColor(1,0,0,1),et.clear(to);var ki=He.allocType(fa,4);et.readPixels(0,0,1,1,hi,fa,ki),et.getError()?Vr=!1:(et.deleteFramebuffer(Yi),et.deleteTexture(Rr),Vr=ki[0]===1),He.freeType(ki)}}var zi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),qi=!0;if(!zi){var ia=et.createTexture(),Ei=He.allocType(ea,36);et.activeTexture($i),et.bindTexture(wi,ia),et.texImage2D(sa,0,hi,3,3,0,hi,ea,Ei),He.freeType(Ei),et.bindTexture(wi,null),et.deleteTexture(ia),qi=!et.getError()}return{colorBits:[et.getParameter(Tr),et.getParameter(ii),et.getParameter(Di),et.getParameter(vi)],depthBits:et.getParameter(Br),stencilBits:et.getParameter(Gr),subpixelBits:et.getParameter(ei),extensions:Object.keys(vn).filter(function(Ui){return!!vn[Ui]}),maxAnisotropic:Vn,maxDrawbuffers:$r,maxColorAttachments:di,pointSizeDims:et.getParameter(bi),lineWidthDims:et.getParameter(Ni),maxViewportDims:et.getParameter(Xi),maxCombinedTextureUnits:et.getParameter(mi),maxCubeMapSize:et.getParameter(Mn),maxRenderbufferSize:et.getParameter(Yn),maxTextureUnits:et.getParameter(wt),maxTextureSize:et.getParameter(Qa),maxAttributes:et.getParameter(ao),maxVertexUniforms:et.getParameter(ko),maxVertexTextureUnits:et.getParameter(Je),maxVaryingVectors:et.getParameter(Ba),maxFragmentUniforms:et.getParameter(Kt),glsl:et.getParameter(Cr),renderer:et.getParameter(Ht),vendor:et.getParameter(Gn),version:et.getParameter(On),readFloat:Vr,npotTextureCube:qi}};function ns(et){return!!et&&typeof et=="object"&&Array.isArray(et.shape)&&Array.isArray(et.stride)&&typeof et.offset=="number"&&et.shape.length===et.stride.length&&(Array.isArray(et.data)||G(et.data))}var Oo=function(et){return Object.keys(et).map(function(vn){return et[vn]})},Ms={shape:Ii,flatten:Xr};function ps(et,vn,Vn){for(var $r=0;$r<vn;++$r)Vn[$r]=et[$r]}function jt(et,vn,Vn,$r){for(var di=0,Vr=0;Vr<vn;++Vr)for(var Rr=et[Vr],Yi=0;Yi<Vn;++Yi)$r[di++]=Rr[Yi]}function sn(et,vn,Vn,$r,di,Vr){for(var Rr=Vr,Yi=0;Yi<vn;++Yi)for(var ki=et[Yi],zi=0;zi<Vn;++zi)for(var qi=ki[zi],ia=0;ia<$r;++ia)di[Rr++]=qi[ia]}function Jn(et,vn,Vn,$r,di){for(var Vr=1,Rr=Vn+1;Rr<vn.length;++Rr)Vr*=vn[Rr];var Yi=vn[Vn];if(vn.length-Vn===4){var ki=vn[Vn+1],zi=vn[Vn+2],qi=vn[Vn+3];for(Rr=0;Rr<Yi;++Rr)sn(et[Rr],ki,zi,qi,$r,di),di+=Vr}else for(Rr=0;Rr<Yi;++Rr)Jn(et[Rr],vn,Vn+1,$r,di),di+=Vr}function Xr(et,vn,Vn,$r){var di=1;if(vn.length)for(var Vr=0;Vr<vn.length;++Vr)di*=vn[Vr];else di=0;var Rr=$r||He.allocType(Vn,di);switch(vn.length){case 0:break;case 1:ps(et,vn[0],Rr);break;case 2:jt(et,vn[0],vn[1],Rr);break;case 3:sn(et,vn[0],vn[1],vn[2],Rr,0);break;default:Jn(et,vn,0,Rr,0)}return Rr}function Ii(et){for(var vn=[],Vn=et;Vn.length;Vn=Vn[0])vn.push(Vn.length);return vn}var Ea={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},co=5120,Zs=5122,Vs=5124,Ds=5121,vu=5123,Rl=5125,ap=5126,ph=5126,el={int8:co,int16:Zs,int32:Vs,uint8:Ds,uint16:vu,uint32:Rl,float:ap,float32:ph},lf=35048,Rf=35040,mu={dynamic:lf,stream:Rf,static:35044},tc=Ms.flatten,Pf=Ms.shape,zh=35044,Ti=35040,za=5121,fo=5126,Ji=[];Ji[5120]=1,Ji[5122]=2,Ji[5124]=4,Ji[5121]=1,Ji[5123]=2,Ji[5125]=4,Ji[5126]=4;function su(et){return Ea[Object.prototype.toString.call(et)]|0}function If(et,vn){for(var Vn=0;Vn<vn.length;++Vn)et[Vn]=vn[Vn]}function Uh(et,vn,Vn,$r,di,Vr,Rr){for(var Yi=0,ki=0;ki<Vn;++ki)for(var zi=0;zi<$r;++zi)et[Yi++]=vn[di*ki+Vr*zi+Rr]}function Od(et,vn,Vn,$r){var di=0,Vr={};function Rr(Sr){this.id=di++,this.buffer=et.createBuffer(),this.type=Sr,this.usage=zh,this.byteLength=0,this.dimension=1,this.dtype=za,this.persistentData=null,Vn.profile&&(this.stats={size:0})}Rr.prototype.bind=function(){et.bindBuffer(this.type,this.buffer)},Rr.prototype.destroy=function(){Ei(this)};var Yi=[];function ki(Sr,ri){var Vi=Yi.pop();return Vi||(Vi=new Rr(Sr)),Vi.bind(),ia(Vi,ri,Ti,0,1,!1),Vi}function zi(Sr){Yi.push(Sr)}function qi(Sr,ri,Vi){Sr.byteLength=ri.byteLength,et.bufferData(Sr.type,ri,Vi)}function ia(Sr,ri,Vi,xa,Oi,ba){var Hi;if(Sr.usage=Vi,Array.isArray(ri)){if(Sr.dtype=xa||fo,ri.length>0){var va;if(Array.isArray(ri[0])){Hi=Pf(ri);for(var Ri=1,ji=1;ji<Hi.length;++ji)Ri*=Hi[ji];Sr.dimension=Ri,va=tc(ri,Hi,Sr.dtype),qi(Sr,va,Vi),ba?Sr.persistentData=va:He.freeType(va)}else if(typeof ri[0]=="number"){Sr.dimension=Oi;var ro=He.allocType(Sr.dtype,ri.length);If(ro,ri),qi(Sr,ro,Vi),ba?Sr.persistentData=ro:He.freeType(ro)}else G(ri[0])?(Sr.dimension=ri[0].length,Sr.dtype=xa||su(ri[0])||fo,va=tc(ri,[ri.length,ri[0].length],Sr.dtype),qi(Sr,va,Vi),ba?Sr.persistentData=va:He.freeType(va)):Ee.raise("invalid buffer data")}}else if(G(ri))Sr.dtype=xa||su(ri),Sr.dimension=Oi,qi(Sr,ri,Vi),ba&&(Sr.persistentData=new Uint8Array(new Uint8Array(ri.buffer)));else if(ns(ri)){Hi=ri.shape;var wo=ri.stride,ma=ri.offset,Wi=0,yi=0,io=0,ce=0;Hi.length===1?(Wi=Hi[0],yi=1,io=wo[0],ce=0):Hi.length===2?(Wi=Hi[0],yi=Hi[1],io=wo[0],ce=wo[1]):Ee.raise("invalid shape"),Sr.dtype=xa||su(ri.data)||fo,Sr.dimension=yi;var Aa=He.allocType(Sr.dtype,Wi*yi);Uh(Aa,ri.data,Wi,yi,io,ce,ma),qi(Sr,Aa,Vi),ba?Sr.persistentData=Aa:He.freeType(Aa)}else ri instanceof ArrayBuffer?(Sr.dtype=za,Sr.dimension=Oi,qi(Sr,ri,Vi),ba&&(Sr.persistentData=new Uint8Array(new Uint8Array(ri)))):Ee.raise("invalid buffer data")}function Ei(Sr){vn.bufferCount--,$r(Sr);var ri=Sr.buffer;Ee(ri,"buffer must not be deleted already"),et.deleteBuffer(ri),Sr.buffer=null,delete Vr[Sr.id]}function Ui(Sr,ri,Vi,xa){vn.bufferCount++;var Oi=new Rr(ri);Vr[Oi.id]=Oi;function ba(Ri){var ji=zh,ro=null,wo=0,ma=0,Wi=1;return Array.isArray(Ri)||G(Ri)||ns(Ri)||Ri instanceof ArrayBuffer?ro=Ri:typeof Ri=="number"?wo=Ri|0:Ri&&(Ee.type(Ri,"object","buffer arguments must be an object, a number or an array"),"data"in Ri&&(Ee(ro===null||Array.isArray(ro)||G(ro)||ns(ro),"invalid data for buffer"),ro=Ri.data),"usage"in Ri&&(Ee.parameter(Ri.usage,mu,"invalid buffer usage"),ji=mu[Ri.usage]),"type"in Ri&&(Ee.parameter(Ri.type,el,"invalid buffer type"),ma=el[Ri.type]),"dimension"in Ri&&(Ee.type(Ri.dimension,"number","invalid dimension"),Wi=Ri.dimension|0),"length"in Ri&&(Ee.nni(wo,"buffer length must be a nonnegative integer"),wo=Ri.length|0)),Oi.bind(),ro?ia(Oi,ro,ji,ma,Wi,xa):(wo&&et.bufferData(Oi.type,wo,ji),Oi.dtype=ma||za,Oi.usage=ji,Oi.dimension=Wi,Oi.byteLength=wo),Vn.profile&&(Oi.stats.size=Oi.byteLength*Ji[Oi.dtype]),ba}function Hi(Ri,ji){Ee(ji+Ri.byteLength<=Oi.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ri.byteLength+" starting from offset "+ji+" to a buffer of size "+Oi.byteLength),et.bufferSubData(Oi.type,ji,Ri)}function va(Ri,ji){var ro=(ji||0)|0,wo;if(Oi.bind(),G(Ri)||Ri instanceof ArrayBuffer)Hi(Ri,ro);else if(Array.isArray(Ri)){if(Ri.length>0)if(typeof Ri[0]=="number"){var ma=He.allocType(Oi.dtype,Ri.length);If(ma,Ri),Hi(ma,ro),He.freeType(ma)}else if(Array.isArray(Ri[0])||G(Ri[0])){wo=Pf(Ri);var Wi=tc(Ri,wo,Oi.dtype);Hi(Wi,ro),He.freeType(Wi)}else Ee.raise("invalid buffer data")}else if(ns(Ri)){wo=Ri.shape;var yi=Ri.stride,io=0,ce=0,Aa=0,Bo=0;wo.length===1?(io=wo[0],ce=1,Aa=yi[0],Bo=0):wo.length===2?(io=wo[0],ce=wo[1],Aa=yi[0],Bo=yi[1]):Ee.raise("invalid shape");var nr=Array.isArray(Ri.data)?Oi.dtype:su(Ri.data),ni=He.allocType(nr,io*ce);Uh(ni,Ri.data,io,ce,Aa,Bo,Ri.offset),Hi(ni,ro),He.freeType(ni)}else Ee.raise("invalid data for buffer subdata");return ba}return Vi||ba(Sr),ba._reglType="buffer",ba._buffer=Oi,ba.subdata=va,Vn.profile&&(ba.stats=Oi.stats),ba.destroy=function(){Ei(Oi)},ba}function ta(){Oo(Vr).forEach(function(Sr){Sr.buffer=et.createBuffer(),et.bindBuffer(Sr.type,Sr.buffer),et.bufferData(Sr.type,Sr.persistentData||Sr.byteLength,Sr.usage)})}return Vn.profile&&(vn.getTotalBufferSize=function(){var Sr=0;return Object.keys(Vr).forEach(function(ri){Sr+=Vr[ri].stats.size}),Sr}),{create:Ui,createStream:ki,destroyStream:zi,clear:function(){Oo(Vr).forEach(Ei),Yi.forEach(Ei)},getBuffer:function(Sr){return Sr&&Sr._buffer instanceof Rr?Sr._buffer:null},restore:ta,_initBuffer:ia}}var Gf=0,id=0,op=1,Up=1,sp=4,Xf=4,Cc={points:Gf,point:id,lines:op,line:Up,triangles:sp,triangle:Xf,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},jp=0,hl=1,kf=4,Yf=5120,_l=5121,pc=5122,vc=5123,Oc=5124,bl=5125,cf=34963,ff=35040,ad=35044;function od(et,vn,Vn,$r){var di={},Vr=0,Rr={uint8:_l,uint16:vc};vn.oes_element_index_uint&&(Rr.uint32=bl);function Yi(ta){this.id=Vr++,di[this.id]=this,this.buffer=ta,this.primType=kf,this.vertCount=0,this.type=0}Yi.prototype.bind=function(){this.buffer.bind()};var ki=[];function zi(ta){var Sr=ki.pop();return Sr||(Sr=new Yi(Vn.create(null,cf,!0,!1)._buffer)),ia(Sr,ta,ff,-1,-1,0,0),Sr}function qi(ta){ki.push(ta)}function ia(ta,Sr,ri,Vi,xa,Oi,ba){ta.buffer.bind();var Hi;if(Sr){var va=ba;!ba&&(!G(Sr)||ns(Sr)&&!G(Sr.data))&&(va=vn.oes_element_index_uint?bl:vc),Vn._initBuffer(ta.buffer,Sr,ri,va,3)}else et.bufferData(cf,Oi,ri),ta.buffer.dtype=Hi||_l,ta.buffer.usage=ri,ta.buffer.dimension=3,ta.buffer.byteLength=Oi;if(Hi=ba,!ba){switch(ta.buffer.dtype){case _l:case Yf:Hi=_l;break;case vc:case pc:Hi=vc;break;case bl:case Oc:Hi=bl;break;default:Ee.raise("unsupported type for element array")}ta.buffer.dtype=Hi}ta.type=Hi,Ee(Hi!==bl||!!vn.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ri=xa;Ri<0&&(Ri=ta.buffer.byteLength,Hi===vc?Ri>>=1:Hi===bl&&(Ri>>=2)),ta.vertCount=Ri;var ji=Vi;if(Vi<0){ji=kf;var ro=ta.buffer.dimension;ro===1&&(ji=jp),ro===2&&(ji=hl),ro===3&&(ji=kf)}ta.primType=ji}function Ei(ta){$r.elementsCount--,Ee(ta.buffer!==null,"must not double destroy elements"),delete di[ta.id],ta.buffer.destroy(),ta.buffer=null}function Ui(ta,Sr){var ri=Vn.create(null,cf,!0),Vi=new Yi(ri._buffer);$r.elementsCount++;function xa(Oi){if(!Oi)ri(),Vi.primType=kf,Vi.vertCount=0,Vi.type=_l;else if(typeof Oi=="number")ri(Oi),Vi.primType=kf,Vi.vertCount=Oi|0,Vi.type=_l;else{var ba=null,Hi=ad,va=-1,Ri=-1,ji=0,ro=0;Array.isArray(Oi)||G(Oi)||ns(Oi)?ba=Oi:(Ee.type(Oi,"object","invalid arguments for elements"),"data"in Oi&&(ba=Oi.data,Ee(Array.isArray(ba)||G(ba)||ns(ba),"invalid data for element buffer")),"usage"in Oi&&(Ee.parameter(Oi.usage,mu,"invalid element buffer usage"),Hi=mu[Oi.usage]),"primitive"in Oi&&(Ee.parameter(Oi.primitive,Cc,"invalid element buffer primitive"),va=Cc[Oi.primitive]),"count"in Oi&&(Ee(typeof Oi.count=="number"&&Oi.count>=0,"invalid vertex count for elements"),Ri=Oi.count|0),"type"in Oi&&(Ee.parameter(Oi.type,Rr,"invalid buffer type"),ro=Rr[Oi.type]),"length"in Oi?ji=Oi.length|0:(ji=Ri,ro===vc||ro===pc?ji*=2:(ro===bl||ro===Oc)&&(ji*=4))),ia(Vi,ba,Hi,va,Ri,ji,ro)}return xa}return xa(ta),xa._reglType="elements",xa._elements=Vi,xa.subdata=function(Oi,ba){return ri.subdata(Oi,ba),xa},xa.destroy=function(){Ei(Vi)},xa}return{create:Ui,createStream:zi,destroyStream:qi,getElements:function(ta){return typeof ta=="function"&&ta._elements instanceof Yi?ta._elements:null},clear:function(){Oo(di).forEach(Ei)}}}var _s=new Float32Array(1),mv=new Uint32Array(_s.buffer),sd=5123;function vh(et){for(var vn=He.allocType(sd,et.length),Vn=0;Vn<et.length;++Vn)if(isNaN(et[Vn]))vn[Vn]=65535;else if(et[Vn]===1/0)vn[Vn]=31744;else if(et[Vn]===-1/0)vn[Vn]=64512;else{_s[0]=et[Vn];var $r=mv[0],di=$r>>>31<<15,Vr=($r<<1>>>24)-127,Rr=$r>>13&1024-1;if(Vr<-24)vn[Vn]=di;else if(Vr<-14){var Yi=-14-Vr;vn[Vn]=di+(Rr+1024>>Yi)}else Vr>15?vn[Vn]=di+31744:vn[Vn]=di+(Vr+15<<10)+Rr}return vn}function Hs(et){return Array.isArray(et)||G(et)}var up=function(et){return!(et&et-1)&&!!et},lp=34467,ku=3553,qc=34067,mc=34069,nc=6408,jh=6406,qf=6407,gc=6409,Kf=6410,Lf=32854,rc=32855,Lu=36194,Ts=32819,Ws=32820,Mc=33635,Zp=34042,hf=6402,Zh=34041,mh=35904,xl=35906,Kc=36193,Rc=33776,df=33777,Wu=33778,gh=33779,pf=35986,Vh=35987,Qc=34798,Pl=35840,cp=35841,Md=35842,yh=35843,Qf=36196,Jc=5121,Jf=5123,eh=5125,vf=5126,fp=10242,ud=10243,hp=10497,Df=33071,dp=33648,Hh=10240,ld=10241,El=9728,Pc=9729,tl=9984,Wh=9985,th=9986,Ns=9987,Rd=33170,Wl=4352,Nf=4353,is=4354,Bs=34046,ic=3317,cd=37440,mf=37441,Ic=37443,Vp=37444,Pd=33984,fd=[tl,th,Wh,Ns],_h=[0,gc,Kf,qf,nc],nl={};nl[gc]=nl[jh]=nl[hf]=1,nl[Zh]=nl[Kf]=2,nl[qf]=nl[mh]=3,nl[nc]=nl[xl]=4;function ru(et){return"[object "+et+"]"}var bh=ru("HTMLCanvasElement"),pp=ru("OffscreenCanvas"),uu=ru("CanvasRenderingContext2D"),Ma=ru("ImageBitmap"),Il=ru("HTMLImageElement"),$h=ru("HTMLVideoElement"),xh=Object.keys(Ea).concat([bh,pp,uu,Ma,Il,$h]),qo=[];qo[Jc]=1,qo[vf]=4,qo[Kc]=2,qo[Jf]=2,qo[eh]=4;var As=[];As[Lf]=2,As[rc]=2,As[Lu]=2,As[Zh]=4,As[Rc]=.5,As[df]=.5,As[Wu]=1,As[gh]=1,As[pf]=.5,As[Vh]=1,As[Qc]=1,As[Pl]=.5,As[cp]=.25,As[Md]=.5,As[yh]=.25,As[Qf]=.5;function Eh(et){return Array.isArray(et)&&(et.length===0||typeof et[0]=="number")}function Z(et){if(!Array.isArray(et))return!1;var vn=et.length;return!(vn===0||!Hs(et[0]))}function Vt(et){return Object.prototype.toString.call(et)}function Ne(et){return Vt(et)===bh}function $e(et){return Vt(et)===pp}function Oe(et){return Vt(et)===uu}function lt(et){return Vt(et)===Ma}function un(et){return Vt(et)===Il}function Zn(et){return Vt(et)===$h}function mn(et){if(!et)return!1;var vn=Vt(et);return xh.indexOf(vn)>=0?!0:Eh(et)||Z(et)||ns(et)}function jn(et){return Ea[Object.prototype.toString.call(et)]|0}function zr(et,vn){var Vn=vn.length;switch(et.type){case Jc:case Jf:case eh:case vf:var $r=He.allocType(et.type,Vn);$r.set(vn),et.data=$r;break;case Kc:et.data=vh(vn);break;default:Ee.raise("unsupported texture type, must specify a typed array")}}function li(et,vn){return He.allocType(et.type===Kc?vf:et.type,vn)}function Gi(et,vn){et.type===Kc?(et.data=vh(vn),He.freeType(vn)):et.data=vn}function na(et,vn,Vn,$r,di,Vr){for(var Rr=et.width,Yi=et.height,ki=et.channels,zi=Rr*Yi*ki,qi=li(et,zi),ia=0,Ei=0;Ei<Yi;++Ei)for(var Ui=0;Ui<Rr;++Ui)for(var ta=0;ta<ki;++ta)qi[ia++]=vn[Vn*Ui+$r*Ei+di*ta+Vr];Gi(et,qi)}function ga(et,vn,Vn,$r,di,Vr){var Rr;if(typeof As[et]!="undefined"?Rr=As[et]:Rr=nl[et]*qo[vn],Vr&&(Rr*=6),di){for(var Yi=0,ki=Vn;ki>=1;)Yi+=Rr*ki*ki,ki/=2;return Yi}else return Rr*Vn*$r}function La(et,vn,Vn,$r,di,Vr,Rr){var Yi={"don't care":Wl,"dont care":Wl,nice:is,fast:Nf},ki={repeat:hp,clamp:Df,mirror:dp},zi={nearest:El,linear:Pc},qi=D({mipmap:Ns,"nearest mipmap nearest":tl,"linear mipmap nearest":Wh,"nearest mipmap linear":th,"linear mipmap linear":Ns},zi),ia={none:0,browser:Vp},Ei={uint8:Jc,rgba4:Ts,rgb565:Mc,"rgb5 a1":Ws},Ui={alpha:jh,luminance:gc,"luminance alpha":Kf,rgb:qf,rgba:nc,rgba4:Lf,"rgb5 a1":rc,rgb565:Lu},ta={};vn.ext_srgb&&(Ui.srgb=mh,Ui.srgba=xl),vn.oes_texture_float&&(Ei.float32=Ei.float=vf),vn.oes_texture_half_float&&(Ei.float16=Ei["half float"]=Kc),vn.webgl_depth_texture&&(D(Ui,{depth:hf,"depth stencil":Zh}),D(Ei,{uint16:Jf,uint32:eh,"depth stencil":Zp})),vn.webgl_compressed_texture_s3tc&&D(ta,{"rgb s3tc dxt1":Rc,"rgba s3tc dxt1":df,"rgba s3tc dxt3":Wu,"rgba s3tc dxt5":gh}),vn.webgl_compressed_texture_atc&&D(ta,{"rgb atc":pf,"rgba atc explicit alpha":Vh,"rgba atc interpolated alpha":Qc}),vn.webgl_compressed_texture_pvrtc&&D(ta,{"rgb pvrtc 4bppv1":Pl,"rgb pvrtc 2bppv1":cp,"rgba pvrtc 4bppv1":Md,"rgba pvrtc 2bppv1":yh}),vn.webgl_compressed_texture_etc1&&(ta["rgb etc1"]=Qf);var Sr=Array.prototype.slice.call(et.getParameter(lp));Object.keys(ta).forEach(function(Nn){var Kr=ta[Nn];Sr.indexOf(Kr)>=0&&(Ui[Nn]=Kr)});var ri=Object.keys(Ui);Vn.textureFormats=ri;var Vi=[];Object.keys(Ui).forEach(function(Nn){var Kr=Ui[Nn];Vi[Kr]=Nn});var xa=[];Object.keys(Ei).forEach(function(Nn){var Kr=Ei[Nn];xa[Kr]=Nn});var Oi=[];Object.keys(zi).forEach(function(Nn){var Kr=zi[Nn];Oi[Kr]=Nn});var ba=[];Object.keys(qi).forEach(function(Nn){var Kr=qi[Nn];ba[Kr]=Nn});var Hi=[];Object.keys(ki).forEach(function(Nn){var Kr=ki[Nn];Hi[Kr]=Nn});var va=ri.reduce(function(Nn,Kr){var Fr=Ui[Kr];return Fr===gc||Fr===jh||Fr===gc||Fr===Kf||Fr===hf||Fr===Zh||vn.ext_srgb&&(Fr===mh||Fr===xl)?Nn[Fr]=Fr:Fr===rc||Kr.indexOf("rgba")>=0?Nn[Fr]=nc:Nn[Fr]=qf,Nn},{});function Ri(){this.internalformat=nc,this.format=nc,this.type=Jc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Vp,this.width=0,this.height=0,this.channels=0}function ji(Nn,Kr){Nn.internalformat=Kr.internalformat,Nn.format=Kr.format,Nn.type=Kr.type,Nn.compressed=Kr.compressed,Nn.premultiplyAlpha=Kr.premultiplyAlpha,Nn.flipY=Kr.flipY,Nn.unpackAlignment=Kr.unpackAlignment,Nn.colorSpace=Kr.colorSpace,Nn.width=Kr.width,Nn.height=Kr.height,Nn.channels=Kr.channels}function ro(Nn,Kr){if(!(typeof Kr!="object"||!Kr)){if("premultiplyAlpha"in Kr&&(Ee.type(Kr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Nn.premultiplyAlpha=Kr.premultiplyAlpha),"flipY"in Kr&&(Ee.type(Kr.flipY,"boolean","invalid texture flip"),Nn.flipY=Kr.flipY),"alignment"in Kr&&(Ee.oneOf(Kr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Nn.unpackAlignment=Kr.alignment),"colorSpace"in Kr&&(Ee.parameter(Kr.colorSpace,ia,"invalid colorSpace"),Nn.colorSpace=ia[Kr.colorSpace]),"type"in Kr){var Fr=Kr.type;Ee(vn.oes_texture_float||!(Fr==="float"||Fr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ee(vn.oes_texture_half_float||!(Fr==="half float"||Fr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ee(vn.webgl_depth_texture||!(Fr==="uint16"||Fr==="uint32"||Fr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ee.parameter(Fr,Ei,"invalid texture type"),Nn.type=Ei[Fr]}var Pa=Nn.width,Vo=Nn.height,Js=Nn.channels,Gt=!1;"shape"in Kr?(Ee(Array.isArray(Kr.shape)&&Kr.shape.length>=2,"shape must be an array"),Pa=Kr.shape[0],Vo=Kr.shape[1],Kr.shape.length===3&&(Js=Kr.shape[2],Ee(Js>0&&Js<=4,"invalid number of channels"),Gt=!0),Ee(Pa>=0&&Pa<=Vn.maxTextureSize,"invalid width"),Ee(Vo>=0&&Vo<=Vn.maxTextureSize,"invalid height")):("radius"in Kr&&(Pa=Vo=Kr.radius,Ee(Pa>=0&&Pa<=Vn.maxTextureSize,"invalid radius")),"width"in Kr&&(Pa=Kr.width,Ee(Pa>=0&&Pa<=Vn.maxTextureSize,"invalid width")),"height"in Kr&&(Vo=Kr.height,Ee(Vo>=0&&Vo<=Vn.maxTextureSize,"invalid height")),"channels"in Kr&&(Js=Kr.channels,Ee(Js>0&&Js<=4,"invalid number of channels"),Gt=!0)),Nn.width=Pa|0,Nn.height=Vo|0,Nn.channels=Js|0;var xn=!1;if("format"in Kr){var Wn=Kr.format;Ee(vn.webgl_depth_texture||!(Wn==="depth"||Wn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ee.parameter(Wn,Ui,"invalid texture format");var jr=Nn.internalformat=Ui[Wn];Nn.format=va[jr],Wn in Ei&&("type"in Kr||(Nn.type=Ei[Wn])),Wn in ta&&(Nn.compressed=!0),xn=!0}!Gt&&xn?Nn.channels=nl[Nn.format]:Gt&&!xn?Nn.channels!==_h[Nn.format]&&(Nn.format=Nn.internalformat=_h[Nn.channels]):xn&&Gt&&Ee(Nn.channels===nl[Nn.format],"number of channels inconsistent with specified format")}}function wo(Nn){et.pixelStorei(cd,Nn.flipY),et.pixelStorei(mf,Nn.premultiplyAlpha),et.pixelStorei(Ic,Nn.colorSpace),et.pixelStorei(ic,Nn.unpackAlignment)}function ma(){Ri.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Wi(Nn,Kr){var Fr=null;if(mn(Kr)?Fr=Kr:Kr&&(Ee.type(Kr,"object","invalid pixel data type"),ro(Nn,Kr),"x"in Kr&&(Nn.xOffset=Kr.x|0),"y"in Kr&&(Nn.yOffset=Kr.y|0),mn(Kr.data)&&(Fr=Kr.data)),Ee(!Nn.compressed||Fr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Kr.copy){Ee(!Fr,"can not specify copy and data field for the same texture");var Pa=di.viewportWidth,Vo=di.viewportHeight;Nn.width=Nn.width||Pa-Nn.xOffset,Nn.height=Nn.height||Vo-Nn.yOffset,Nn.needsCopy=!0,Ee(Nn.xOffset>=0&&Nn.xOffset<Pa&&Nn.yOffset>=0&&Nn.yOffset<Vo&&Nn.width>0&&Nn.width<=Pa&&Nn.height>0&&Nn.height<=Vo,"copy texture read out of bounds")}else if(!Fr)Nn.width=Nn.width||1,Nn.height=Nn.height||1,Nn.channels=Nn.channels||4;else if(G(Fr))Nn.channels=Nn.channels||4,Nn.data=Fr,!("type"in Kr)&&Nn.type===Jc&&(Nn.type=jn(Fr));else if(Eh(Fr))Nn.channels=Nn.channels||4,zr(Nn,Fr),Nn.alignment=1,Nn.needsFree=!0;else if(ns(Fr)){var Js=Fr.data;!Array.isArray(Js)&&Nn.type===Jc&&(Nn.type=jn(Js));var Gt=Fr.shape,xn=Fr.stride,Wn,jr,Dr,er,vr,tr;Gt.length===3?(Dr=Gt[2],tr=xn[2]):(Ee(Gt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Dr=1,tr=1),Wn=Gt[0],jr=Gt[1],er=xn[0],vr=xn[1],Nn.alignment=1,Nn.width=Wn,Nn.height=jr,Nn.channels=Dr,Nn.format=Nn.internalformat=_h[Dr],Nn.needsFree=!0,na(Nn,Js,er,vr,tr,Fr.offset)}else if(Ne(Fr)||$e(Fr)||Oe(Fr))Ne(Fr)||$e(Fr)?Nn.element=Fr:Nn.element=Fr.canvas,Nn.width=Nn.element.width,Nn.height=Nn.element.height,Nn.channels=4;else if(lt(Fr))Nn.element=Fr,Nn.width=Fr.width,Nn.height=Fr.height,Nn.channels=4;else if(un(Fr))Nn.element=Fr,Nn.width=Fr.naturalWidth,Nn.height=Fr.naturalHeight,Nn.channels=4;else if(Zn(Fr))Nn.element=Fr,Nn.width=Fr.videoWidth,Nn.height=Fr.videoHeight,Nn.channels=4;else if(Z(Fr)){var Cn=Nn.width||Fr[0].length,ar=Nn.height||Fr.length,gn=Nn.channels;Hs(Fr[0][0])?gn=gn||Fr[0][0].length:gn=gn||1;for(var pr=Ms.shape(Fr),Qr=1,ti=0;ti<pr.length;++ti)Qr*=pr[ti];var Li=li(Nn,Qr);Ms.flatten(Fr,pr,"",Li),Gi(Nn,Li),Nn.alignment=1,Nn.width=Cn,Nn.height=ar,Nn.channels=gn,Nn.format=Nn.internalformat=_h[gn],Nn.needsFree=!0}Nn.type===vf?Ee(Vn.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Nn.type===Kc&&Ee(Vn.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function yi(Nn,Kr,Fr){var Pa=Nn.element,Vo=Nn.data,Js=Nn.internalformat,Gt=Nn.format,xn=Nn.type,Wn=Nn.width,jr=Nn.height;wo(Nn),Pa?et.texImage2D(Kr,Fr,Gt,Gt,xn,Pa):Nn.compressed?et.compressedTexImage2D(Kr,Fr,Js,Wn,jr,0,Vo):Nn.needsCopy?($r(),et.copyTexImage2D(Kr,Fr,Gt,Nn.xOffset,Nn.yOffset,Wn,jr,0)):et.texImage2D(Kr,Fr,Gt,Wn,jr,0,Gt,xn,Vo||null)}function io(Nn,Kr,Fr,Pa,Vo){var Js=Nn.element,Gt=Nn.data,xn=Nn.internalformat,Wn=Nn.format,jr=Nn.type,Dr=Nn.width,er=Nn.height;wo(Nn),Js?et.texSubImage2D(Kr,Vo,Fr,Pa,Wn,jr,Js):Nn.compressed?et.compressedTexSubImage2D(Kr,Vo,Fr,Pa,xn,Dr,er,Gt):Nn.needsCopy?($r(),et.copyTexSubImage2D(Kr,Vo,Fr,Pa,Nn.xOffset,Nn.yOffset,Dr,er)):et.texSubImage2D(Kr,Vo,Fr,Pa,Dr,er,Wn,jr,Gt)}var ce=[];function Aa(){return ce.pop()||new ma}function Bo(Nn){Nn.needsFree&&He.freeType(Nn.data),ma.call(Nn),ce.push(Nn)}function nr(){Ri.call(this),this.genMipmaps=!1,this.mipmapHint=Wl,this.mipmask=0,this.images=Array(16)}function ni(Nn,Kr,Fr){var Pa=Nn.images[0]=Aa();Nn.mipmask=1,Pa.width=Nn.width=Kr,Pa.height=Nn.height=Fr,Pa.channels=Nn.channels=4}function us(Nn,Kr){var Fr=null;if(mn(Kr))Fr=Nn.images[0]=Aa(),ji(Fr,Nn),Wi(Fr,Kr),Nn.mipmask=1;else if(ro(Nn,Kr),Array.isArray(Kr.mipmap))for(var Pa=Kr.mipmap,Vo=0;Vo<Pa.length;++Vo)Fr=Nn.images[Vo]=Aa(),ji(Fr,Nn),Fr.width>>=Vo,Fr.height>>=Vo,Wi(Fr,Pa[Vo]),Nn.mipmask|=1<<Vo;else Fr=Nn.images[0]=Aa(),ji(Fr,Nn),Wi(Fr,Kr),Nn.mipmask=1;ji(Nn,Nn.images[0]),Nn.compressed&&(Nn.internalformat===Rc||Nn.internalformat===df||Nn.internalformat===Wu||Nn.internalformat===gh)&&Ee(Nn.width%4===0&&Nn.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function il(Nn,Kr){for(var Fr=Nn.images,Pa=0;Pa<Fr.length;++Pa){if(!Fr[Pa])return;yi(Fr[Pa],Kr,Pa)}}var $l=[];function hs(){var Nn=$l.pop()||new nr;Ri.call(Nn),Nn.mipmask=0;for(var Kr=0;Kr<16;++Kr)Nn.images[Kr]=null;return Nn}function ml(Nn){for(var Kr=Nn.images,Fr=0;Fr<Kr.length;++Fr)Kr[Fr]&&Bo(Kr[Fr]),Kr[Fr]=null;$l.push(Nn)}function lu(){this.minFilter=El,this.magFilter=El,this.wrapS=Df,this.wrapT=Df,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Wl}function Nl(Nn,Kr){if("min"in Kr){var Fr=Kr.min;Ee.parameter(Fr,qi),Nn.minFilter=qi[Fr],fd.indexOf(Nn.minFilter)>=0&&!("faces"in Kr)&&(Nn.genMipmaps=!0)}if("mag"in Kr){var Pa=Kr.mag;Ee.parameter(Pa,zi),Nn.magFilter=zi[Pa]}var Vo=Nn.wrapS,Js=Nn.wrapT;if("wrap"in Kr){var Gt=Kr.wrap;typeof Gt=="string"?(Ee.parameter(Gt,ki),Vo=Js=ki[Gt]):Array.isArray(Gt)&&(Ee.parameter(Gt[0],ki),Ee.parameter(Gt[1],ki),Vo=ki[Gt[0]],Js=ki[Gt[1]])}else{if("wrapS"in Kr){var xn=Kr.wrapS;Ee.parameter(xn,ki),Vo=ki[xn]}if("wrapT"in Kr){var Wn=Kr.wrapT;Ee.parameter(Wn,ki),Js=ki[Wn]}}if(Nn.wrapS=Vo,Nn.wrapT=Js,"anisotropic"in Kr){var jr=Kr.anisotropic;Ee(typeof jr=="number"&&jr>=1&&jr<=Vn.maxAnisotropic,"aniso samples must be between 1 and "),Nn.anisotropic=Kr.anisotropic}if("mipmap"in Kr){var Dr=!1;switch(typeof Kr.mipmap){case"string":Ee.parameter(Kr.mipmap,Yi,"invalid mipmap hint"),Nn.mipmapHint=Yi[Kr.mipmap],Nn.genMipmaps=!0,Dr=!0;break;case"boolean":Dr=Nn.genMipmaps=Kr.mipmap;break;case"object":Ee(Array.isArray(Kr.mipmap),"invalid mipmap type"),Nn.genMipmaps=!1,Dr=!0;break;default:Ee.raise("invalid mipmap type")}Dr&&!("min"in Kr)&&(Nn.minFilter=tl)}}function Bl(Nn,Kr){et.texParameteri(Kr,ld,Nn.minFilter),et.texParameteri(Kr,Hh,Nn.magFilter),et.texParameteri(Kr,fp,Nn.wrapS),et.texParameteri(Kr,ud,Nn.wrapT),vn.ext_texture_filter_anisotropic&&et.texParameteri(Kr,Bs,Nn.anisotropic),Nn.genMipmaps&&(et.hint(Rd,Nn.mipmapHint),et.generateMipmap(Kr))}var Yu=0,Gl={},Uc=Vn.maxTextureUnits,Sl=Array(Uc).map(function(){return null});function Zo(Nn){Ri.call(this),this.mipmask=0,this.internalformat=nc,this.id=Yu++,this.refCount=1,this.target=Nn,this.texture=et.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new lu,Rr.profile&&(this.stats={size:0})}function Ec(Nn){et.activeTexture(Pd),et.bindTexture(Nn.target,Nn.texture)}function Is(){var Nn=Sl[0];Nn?et.bindTexture(Nn.target,Nn.texture):et.bindTexture(ku,null)}function mo(Nn){var Kr=Nn.texture;Ee(Kr,"must not double destroy texture");var Fr=Nn.unit,Pa=Nn.target;Fr>=0&&(et.activeTexture(Pd+Fr),et.bindTexture(Pa,null),Sl[Fr]=null),et.deleteTexture(Kr),Nn.texture=null,Nn.params=null,Nn.pixels=null,Nn.refCount=0,delete Gl[Nn.id],Vr.textureCount--}D(Zo.prototype,{bind:function(){var Nn=this;Nn.bindCount+=1;var Kr=Nn.unit;if(Kr<0){for(var Fr=0;Fr<Uc;++Fr){var Pa=Sl[Fr];if(Pa){if(Pa.bindCount>0)continue;Pa.unit=-1}Sl[Fr]=Nn,Kr=Fr;break}Kr>=Uc&&Ee.raise("insufficient number of texture units"),Rr.profile&&Vr.maxTextureUnits<Kr+1&&(Vr.maxTextureUnits=Kr+1),Nn.unit=Kr,et.activeTexture(Pd+Kr),et.bindTexture(Nn.target,Nn.texture)}return Kr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&mo(this)}});function ls(Nn,Kr){var Fr=new Zo(ku);Gl[Fr.id]=Fr,Vr.textureCount++;function Pa(Gt,xn){var Wn=Fr.texInfo;lu.call(Wn);var jr=hs();return typeof Gt=="number"?typeof xn=="number"?ni(jr,Gt|0,xn|0):ni(jr,Gt|0,Gt|0):Gt?(Ee.type(Gt,"object","invalid arguments to regl.texture"),Nl(Wn,Gt),us(jr,Gt)):ni(jr,1,1),Wn.genMipmaps&&(jr.mipmask=(jr.width<<1)-1),Fr.mipmask=jr.mipmask,ji(Fr,jr),Ee.texture2D(Wn,jr,Vn),Fr.internalformat=jr.internalformat,Pa.width=jr.width,Pa.height=jr.height,Ec(Fr),il(jr,ku),Bl(Wn,ku),Is(),ml(jr),Rr.profile&&(Fr.stats.size=ga(Fr.internalformat,Fr.type,jr.width,jr.height,Wn.genMipmaps,!1)),Pa.format=Vi[Fr.internalformat],Pa.type=xa[Fr.type],Pa.mag=Oi[Wn.magFilter],Pa.min=ba[Wn.minFilter],Pa.wrapS=Hi[Wn.wrapS],Pa.wrapT=Hi[Wn.wrapT],Pa}function Vo(Gt,xn,Wn,jr){Ee(!!Gt,"must specify image data");var Dr=xn|0,er=Wn|0,vr=jr|0,tr=Aa();return ji(tr,Fr),tr.width=0,tr.height=0,Wi(tr,Gt),tr.width=tr.width||(Fr.width>>vr)-Dr,tr.height=tr.height||(Fr.height>>vr)-er,Ee(Fr.type===tr.type&&Fr.format===tr.format&&Fr.internalformat===tr.internalformat,"incompatible format for texture.subimage"),Ee(Dr>=0&&er>=0&&Dr+tr.width<=Fr.width&&er+tr.height<=Fr.height,"texture.subimage write out of bounds"),Ee(Fr.mipmask&1<<vr,"missing mipmap data"),Ee(tr.data||tr.element||tr.needsCopy,"missing image data"),Ec(Fr),io(tr,ku,Dr,er,vr),Is(),Bo(tr),Pa}function Js(Gt,xn){var Wn=Gt|0,jr=xn|0||Wn;if(Wn===Fr.width&&jr===Fr.height)return Pa;Pa.width=Fr.width=Wn,Pa.height=Fr.height=jr,Ec(Fr);for(var Dr=0;Fr.mipmask>>Dr;++Dr){var er=Wn>>Dr,vr=jr>>Dr;if(!er||!vr)break;et.texImage2D(ku,Dr,Fr.format,er,vr,0,Fr.format,Fr.type,null)}return Is(),Rr.profile&&(Fr.stats.size=ga(Fr.internalformat,Fr.type,Wn,jr,!1,!1)),Pa}return Pa(Nn,Kr),Pa.subimage=Vo,Pa.resize=Js,Pa._reglType="texture2d",Pa._texture=Fr,Rr.profile&&(Pa.stats=Fr.stats),Pa.destroy=function(){Fr.decRef()},Pa}function Ss(Nn,Kr,Fr,Pa,Vo,Js){var Gt=new Zo(qc);Gl[Gt.id]=Gt,Vr.cubeCount++;var xn=new Array(6);function Wn(er,vr,tr,Cn,ar,gn){var pr,Qr=Gt.texInfo;for(lu.call(Qr),pr=0;pr<6;++pr)xn[pr]=hs();if(typeof er=="number"||!er){var ti=er|0||1;for(pr=0;pr<6;++pr)ni(xn[pr],ti,ti)}else if(typeof er=="object")if(vr)us(xn[0],er),us(xn[1],vr),us(xn[2],tr),us(xn[3],Cn),us(xn[4],ar),us(xn[5],gn);else if(Nl(Qr,er),ro(Gt,er),"faces"in er){var Li=er.faces;for(Ee(Array.isArray(Li)&&Li.length===6,"cube faces must be a length 6 array"),pr=0;pr<6;++pr)Ee(typeof Li[pr]=="object"&&!!Li[pr],"invalid input for cube map face"),ji(xn[pr],Gt),us(xn[pr],Li[pr])}else for(pr=0;pr<6;++pr)us(xn[pr],er);else Ee.raise("invalid arguments to cube map");for(ji(Gt,xn[0]),Vn.npotTextureCube||Ee(up(Gt.width)&&up(Gt.height),"your browser does not support non power or two texture dimensions"),Qr.genMipmaps?Gt.mipmask=(xn[0].width<<1)-1:Gt.mipmask=xn[0].mipmask,Ee.textureCube(Gt,Qr,xn,Vn),Gt.internalformat=xn[0].internalformat,Wn.width=xn[0].width,Wn.height=xn[0].height,Ec(Gt),pr=0;pr<6;++pr)il(xn[pr],mc+pr);for(Bl(Qr,qc),Is(),Rr.profile&&(Gt.stats.size=ga(Gt.internalformat,Gt.type,Wn.width,Wn.height,Qr.genMipmaps,!0)),Wn.format=Vi[Gt.internalformat],Wn.type=xa[Gt.type],Wn.mag=Oi[Qr.magFilter],Wn.min=ba[Qr.minFilter],Wn.wrapS=Hi[Qr.wrapS],Wn.wrapT=Hi[Qr.wrapT],pr=0;pr<6;++pr)ml(xn[pr]);return Wn}function jr(er,vr,tr,Cn,ar){Ee(!!vr,"must specify image data"),Ee(typeof er=="number"&&er===(er|0)&&er>=0&&er<6,"invalid face");var gn=tr|0,pr=Cn|0,Qr=ar|0,ti=Aa();return ji(ti,Gt),ti.width=0,ti.height=0,Wi(ti,vr),ti.width=ti.width||(Gt.width>>Qr)-gn,ti.height=ti.height||(Gt.height>>Qr)-pr,Ee(Gt.type===ti.type&&Gt.format===ti.format&&Gt.internalformat===ti.internalformat,"incompatible format for texture.subimage"),Ee(gn>=0&&pr>=0&&gn+ti.width<=Gt.width&&pr+ti.height<=Gt.height,"texture.subimage write out of bounds"),Ee(Gt.mipmask&1<<Qr,"missing mipmap data"),Ee(ti.data||ti.element||ti.needsCopy,"missing image data"),Ec(Gt),io(ti,mc+er,gn,pr,Qr),Is(),Bo(ti),Wn}function Dr(er){var vr=er|0;if(vr!==Gt.width){Wn.width=Gt.width=vr,Wn.height=Gt.height=vr,Ec(Gt);for(var tr=0;tr<6;++tr)for(var Cn=0;Gt.mipmask>>Cn;++Cn)et.texImage2D(mc+tr,Cn,Gt.format,vr>>Cn,vr>>Cn,0,Gt.format,Gt.type,null);return Is(),Rr.profile&&(Gt.stats.size=ga(Gt.internalformat,Gt.type,Wn.width,Wn.height,!1,!0)),Wn}}return Wn(Nn,Kr,Fr,Pa,Vo,Js),Wn.subimage=jr,Wn.resize=Dr,Wn._reglType="textureCube",Wn._texture=Gt,Rr.profile&&(Wn.stats=Gt.stats),Wn.destroy=function(){Gt.decRef()},Wn}function wl(){for(var Nn=0;Nn<Uc;++Nn)et.activeTexture(Pd+Nn),et.bindTexture(ku,null),Sl[Nn]=null;Oo(Gl).forEach(mo),Vr.cubeCount=0,Vr.textureCount=0}Rr.profile&&(Vr.getTotalTextureSize=function(){var Nn=0;return Object.keys(Gl).forEach(function(Kr){Nn+=Gl[Kr].stats.size}),Nn});function vd(){for(var Nn=0;Nn<Uc;++Nn){var Kr=Sl[Nn];Kr&&(Kr.bindCount=0,Kr.unit=-1,Sl[Nn]=null)}Oo(Gl).forEach(function(Fr){Fr.texture=et.createTexture(),et.bindTexture(Fr.target,Fr.texture);for(var Pa=0;Pa<32;++Pa)if(Fr.mipmask&1<<Pa)if(Fr.target===ku)et.texImage2D(ku,Pa,Fr.internalformat,Fr.width>>Pa,Fr.height>>Pa,0,Fr.internalformat,Fr.type,null);else for(var Vo=0;Vo<6;++Vo)et.texImage2D(mc+Vo,Pa,Fr.internalformat,Fr.width>>Pa,Fr.height>>Pa,0,Fr.internalformat,Fr.type,null);Bl(Fr.texInfo,Fr.target)})}return{create2D:ls,createCube:Ss,clear:wl,getTexture:function(Nn){return null},restore:vd}}var ui=36161,Ka=32854,uo=32855,no=36194,as=33189,Es=36168,vs=34041,Ko=35907,_o=34836,oa=34842,ra=34843,Qo=[];Qo[Ka]=2,Qo[uo]=2,Qo[no]=2,Qo[as]=2,Qo[Es]=1,Qo[vs]=4,Qo[Ko]=4,Qo[_o]=16,Qo[oa]=8,Qo[ra]=6;function Jo(et,vn,Vn){return Qo[et]*vn*Vn}var No=function(et,vn,Vn,$r,di){var Vr={rgba4:Ka,rgb565:no,"rgb5 a1":uo,depth:as,stencil:Es,"depth stencil":vs};vn.ext_srgb&&(Vr.srgba=Ko),vn.ext_color_buffer_half_float&&(Vr.rgba16f=oa,Vr.rgb16f=ra),vn.webgl_color_buffer_float&&(Vr.rgba32f=_o);var Rr=[];Object.keys(Vr).forEach(function(Ui){var ta=Vr[Ui];Rr[ta]=Ui});var Yi=0,ki={};function zi(Ui){this.id=Yi++,this.refCount=1,this.renderbuffer=Ui,this.format=Ka,this.width=0,this.height=0,di.profile&&(this.stats={size:0})}zi.prototype.decRef=function(){--this.refCount<=0&&qi(this)};function qi(Ui){var ta=Ui.renderbuffer;Ee(ta,"must not double destroy renderbuffer"),et.bindRenderbuffer(ui,null),et.deleteRenderbuffer(ta),Ui.renderbuffer=null,Ui.refCount=0,delete ki[Ui.id],$r.renderbufferCount--}function ia(Ui,ta){var Sr=new zi(et.createRenderbuffer());ki[Sr.id]=Sr,$r.renderbufferCount++;function ri(xa,Oi){var ba=0,Hi=0,va=Ka;if(typeof xa=="object"&&xa){var Ri=xa;if("shape"in Ri){var ji=Ri.shape;Ee(Array.isArray(ji)&&ji.length>=2,"invalid renderbuffer shape"),ba=ji[0]|0,Hi=ji[1]|0}else"radius"in Ri&&(ba=Hi=Ri.radius|0),"width"in Ri&&(ba=Ri.width|0),"height"in Ri&&(Hi=Ri.height|0);"format"in Ri&&(Ee.parameter(Ri.format,Vr,"invalid renderbuffer format"),va=Vr[Ri.format])}else typeof xa=="number"?(ba=xa|0,typeof Oi=="number"?Hi=Oi|0:Hi=ba):xa?Ee.raise("invalid arguments to renderbuffer constructor"):ba=Hi=1;if(Ee(ba>0&&Hi>0&&ba<=Vn.maxRenderbufferSize&&Hi<=Vn.maxRenderbufferSize,"invalid renderbuffer size"),!(ba===Sr.width&&Hi===Sr.height&&va===Sr.format))return ri.width=Sr.width=ba,ri.height=Sr.height=Hi,Sr.format=va,et.bindRenderbuffer(ui,Sr.renderbuffer),et.renderbufferStorage(ui,va,ba,Hi),Ee(et.getError()===0,"invalid render buffer format"),di.profile&&(Sr.stats.size=Jo(Sr.format,Sr.width,Sr.height)),ri.format=Rr[Sr.format],ri}function Vi(xa,Oi){var ba=xa|0,Hi=Oi|0||ba;return ba===Sr.width&&Hi===Sr.height||(Ee(ba>0&&Hi>0&&ba<=Vn.maxRenderbufferSize&&Hi<=Vn.maxRenderbufferSize,"invalid renderbuffer size"),ri.width=Sr.width=ba,ri.height=Sr.height=Hi,et.bindRenderbuffer(ui,Sr.renderbuffer),et.renderbufferStorage(ui,Sr.format,ba,Hi),Ee(et.getError()===0,"invalid render buffer format"),di.profile&&(Sr.stats.size=Jo(Sr.format,Sr.width,Sr.height))),ri}return ri(Ui,ta),ri.resize=Vi,ri._reglType="renderbuffer",ri._renderbuffer=Sr,di.profile&&(ri.stats=Sr.stats),ri.destroy=function(){Sr.decRef()},ri}di.profile&&($r.getTotalRenderbufferSize=function(){var Ui=0;return Object.keys(ki).forEach(function(ta){Ui+=ki[ta].stats.size}),Ui});function Ei(){Oo(ki).forEach(function(Ui){Ui.renderbuffer=et.createRenderbuffer(),et.bindRenderbuffer(ui,Ui.renderbuffer),et.renderbufferStorage(ui,Ui.format,Ui.width,Ui.height)}),et.bindRenderbuffer(ui,null)}return{create:ia,clear:function(){Oo(ki).forEach(qi)},restore:Ei}},os=36160,Fo=36161,$u=3553,gf=34069,jo=36064,qs=36096,Id=36128,yc=33306,kd=36053,Sh=36054,dl=36055,Gh=36057,kc=36061,gv=36193,_c=5121,Bf=5126,wh=6407,yf=6408,_f=6402,Xh=[wh,yf],po=[];po[yf]=4,po[wh]=3;var Lc=[];Lc[_c]=1,Lc[Bf]=4,Lc[gv]=2;var Hp=32854,iu=32855,$s=36194,bf=33189,bc=36168,kl=34041,Th=35907,x=34836,A=34842,w=34843,R=[Hp,iu,$s,Th,A,w,x],j={};j[kd]="complete",j[Sh]="incomplete attachment",j[Gh]="incomplete dimensions",j[dl]="incomplete, missing attachment",j[kc]="unsupported";function Y(et,vn,Vn,$r,di,Vr){var Rr={cur:null,next:null,dirty:!1,setFBO:null},Yi=["rgba"],ki=["rgba4","rgb565","rgb5 a1"];vn.ext_srgb&&ki.push("srgba"),vn.ext_color_buffer_half_float&&ki.push("rgba16f","rgb16f"),vn.webgl_color_buffer_float&&ki.push("rgba32f");var zi=["uint8"];vn.oes_texture_half_float&&zi.push("half float","float16"),vn.oes_texture_float&&zi.push("float","float32");function qi(ma,Wi,yi){this.target=ma,this.texture=Wi,this.renderbuffer=yi;var io=0,ce=0;Wi?(io=Wi.width,ce=Wi.height):yi&&(io=yi.width,ce=yi.height),this.width=io,this.height=ce}function ia(ma){ma&&(ma.texture&&ma.texture._texture.decRef(),ma.renderbuffer&&ma.renderbuffer._renderbuffer.decRef())}function Ei(ma,Wi,yi){if(ma)if(ma.texture){var io=ma.texture._texture,ce=Math.max(1,io.width),Aa=Math.max(1,io.height);Ee(ce===Wi&&Aa===yi,"inconsistent width/height for supplied texture"),io.refCount+=1}else{var Bo=ma.renderbuffer._renderbuffer;Ee(Bo.width===Wi&&Bo.height===yi,"inconsistent width/height for renderbuffer"),Bo.refCount+=1}}function Ui(ma,Wi){Wi&&(Wi.texture?et.framebufferTexture2D(os,ma,Wi.target,Wi.texture._texture.texture,0):et.framebufferRenderbuffer(os,ma,Fo,Wi.renderbuffer._renderbuffer.renderbuffer))}function ta(ma){var Wi=$u,yi=null,io=null,ce=ma;typeof ma=="object"&&(ce=ma.data,"target"in ma&&(Wi=ma.target|0)),Ee.type(ce,"function","invalid attachment data");var Aa=ce._reglType;return Aa==="texture2d"?(yi=ce,Ee(Wi===$u)):Aa==="textureCube"?(yi=ce,Ee(Wi>=gf&&Wi<gf+6,"invalid cube map target")):Aa==="renderbuffer"?(io=ce,Wi=Fo):Ee.raise("invalid regl object for attachment"),new qi(Wi,yi,io)}function Sr(ma,Wi,yi,io,ce){if(yi){var Aa=$r.create2D({width:ma,height:Wi,format:io,type:ce});return Aa._texture.refCount=0,new qi($u,Aa,null)}else{var Bo=di.create({width:ma,height:Wi,format:io});return Bo._renderbuffer.refCount=0,new qi(Fo,null,Bo)}}function ri(ma){return ma&&(ma.texture||ma.renderbuffer)}function Vi(ma,Wi,yi){ma&&(ma.texture?ma.texture.resize(Wi,yi):ma.renderbuffer&&ma.renderbuffer.resize(Wi,yi),ma.width=Wi,ma.height=yi)}var xa=0,Oi={};function ba(){this.id=xa++,Oi[this.id]=this,this.framebuffer=et.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Hi(ma){ma.colorAttachments.forEach(ia),ia(ma.depthAttachment),ia(ma.stencilAttachment),ia(ma.depthStencilAttachment)}function va(ma){var Wi=ma.framebuffer;Ee(Wi,"must not double destroy framebuffer"),et.deleteFramebuffer(Wi),ma.framebuffer=null,Vr.framebufferCount--,delete Oi[ma.id]}function Ri(ma){var Wi;et.bindFramebuffer(os,ma.framebuffer);var yi=ma.colorAttachments;for(Wi=0;Wi<yi.length;++Wi)Ui(jo+Wi,yi[Wi]);for(Wi=yi.length;Wi<Vn.maxColorAttachments;++Wi)et.framebufferTexture2D(os,jo+Wi,$u,null,0);et.framebufferTexture2D(os,yc,$u,null,0),et.framebufferTexture2D(os,qs,$u,null,0),et.framebufferTexture2D(os,Id,$u,null,0),Ui(qs,ma.depthAttachment),Ui(Id,ma.stencilAttachment),Ui(yc,ma.depthStencilAttachment);var io=et.checkFramebufferStatus(os);!et.isContextLost()&&io!==kd&&Ee.raise("framebuffer configuration not supported, status = "+j[io]),et.bindFramebuffer(os,Rr.next?Rr.next.framebuffer:null),Rr.cur=Rr.next,et.getError()}function ji(ma,Wi){var yi=new ba;Vr.framebufferCount++;function io(Aa,Bo){var nr;Ee(Rr.next!==yi,"can not update framebuffer which is currently in use");var ni=0,us=0,il=!0,$l=!0,hs=null,ml=!0,lu="rgba",Nl="uint8",Bl=1,Yu=null,Gl=null,Uc=null,Sl=!1;if(typeof Aa=="number")ni=Aa|0,us=Bo|0||ni;else if(!Aa)ni=us=1;else{Ee.type(Aa,"object","invalid arguments for framebuffer");var Zo=Aa;if("shape"in Zo){var Ec=Zo.shape;Ee(Array.isArray(Ec)&&Ec.length>=2,"invalid shape for framebuffer"),ni=Ec[0],us=Ec[1]}else"radius"in Zo&&(ni=us=Zo.radius),"width"in Zo&&(ni=Zo.width),"height"in Zo&&(us=Zo.height);("color"in Zo||"colors"in Zo)&&(hs=Zo.color||Zo.colors,Array.isArray(hs)&&Ee(hs.length===1||vn.webgl_draw_buffers,"multiple render targets not supported")),hs||("colorCount"in Zo&&(Bl=Zo.colorCount|0,Ee(Bl>0,"invalid color buffer count")),"colorTexture"in Zo&&(ml=!!Zo.colorTexture,lu="rgba4"),"colorType"in Zo&&(Nl=Zo.colorType,ml?(Ee(vn.oes_texture_float||!(Nl==="float"||Nl==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ee(vn.oes_texture_half_float||!(Nl==="half float"||Nl==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Nl==="half float"||Nl==="float16"?(Ee(vn.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),lu="rgba16f"):(Nl==="float"||Nl==="float32")&&(Ee(vn.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),lu="rgba32f"),Ee.oneOf(Nl,zi,"invalid color type")),"colorFormat"in Zo&&(lu=Zo.colorFormat,Yi.indexOf(lu)>=0?ml=!0:ki.indexOf(lu)>=0?ml=!1:ml?Ee.oneOf(Zo.colorFormat,Yi,"invalid color format for texture"):Ee.oneOf(Zo.colorFormat,ki,"invalid color format for renderbuffer"))),("depthTexture"in Zo||"depthStencilTexture"in Zo)&&(Sl=!!(Zo.depthTexture||Zo.depthStencilTexture),Ee(!Sl||vn.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Zo&&(typeof Zo.depth=="boolean"?il=Zo.depth:(Yu=Zo.depth,$l=!1)),"stencil"in Zo&&(typeof Zo.stencil=="boolean"?$l=Zo.stencil:(Gl=Zo.stencil,il=!1)),"depthStencil"in Zo&&(typeof Zo.depthStencil=="boolean"?il=$l=Zo.depthStencil:(Uc=Zo.depthStencil,il=!1,$l=!1))}var Is=null,mo=null,ls=null,Ss=null;if(Array.isArray(hs))Is=hs.map(ta);else if(hs)Is=[ta(hs)];else for(Is=new Array(Bl),nr=0;nr<Bl;++nr)Is[nr]=Sr(ni,us,ml,lu,Nl);Ee(vn.webgl_draw_buffers||Is.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ee(Is.length<=Vn.maxColorAttachments,"too many color attachments, not supported"),ni=ni||Is[0].width,us=us||Is[0].height,Yu?mo=ta(Yu):il&&!$l&&(mo=Sr(ni,us,Sl,"depth","uint32")),Gl?ls=ta(Gl):$l&&!il&&(ls=Sr(ni,us,!1,"stencil","uint8")),Uc?Ss=ta(Uc):!Yu&&!Gl&&$l&&il&&(Ss=Sr(ni,us,Sl,"depth stencil","depth stencil")),Ee(!!Yu+!!Gl+!!Uc<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var wl=null;for(nr=0;nr<Is.length;++nr)if(Ei(Is[nr],ni,us),Ee(!Is[nr]||Is[nr].texture&&Xh.indexOf(Is[nr].texture._texture.format)>=0||Is[nr].renderbuffer&&R.indexOf(Is[nr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+nr+" is invalid"),Is[nr]&&Is[nr].texture){var vd=po[Is[nr].texture._texture.format]*Lc[Is[nr].texture._texture.type];wl===null?wl=vd:Ee(wl===vd,"all color attachments much have the same number of bits per pixel.")}return Ei(mo,ni,us),Ee(!mo||mo.texture&&mo.texture._texture.format===_f||mo.renderbuffer&&mo.renderbuffer._renderbuffer.format===bf,"invalid depth attachment for framebuffer object"),Ei(ls,ni,us),Ee(!ls||ls.renderbuffer&&ls.renderbuffer._renderbuffer.format===bc,"invalid stencil attachment for framebuffer object"),Ei(Ss,ni,us),Ee(!Ss||Ss.texture&&Ss.texture._texture.format===kl||Ss.renderbuffer&&Ss.renderbuffer._renderbuffer.format===kl,"invalid depth-stencil attachment for framebuffer object"),Hi(yi),yi.width=ni,yi.height=us,yi.colorAttachments=Is,yi.depthAttachment=mo,yi.stencilAttachment=ls,yi.depthStencilAttachment=Ss,io.color=Is.map(ri),io.depth=ri(mo),io.stencil=ri(ls),io.depthStencil=ri(Ss),io.width=yi.width,io.height=yi.height,Ri(yi),io}function ce(Aa,Bo){Ee(Rr.next!==yi,"can not resize a framebuffer which is currently in use");var nr=Math.max(Aa|0,1),ni=Math.max(Bo|0||nr,1);if(nr===yi.width&&ni===yi.height)return io;for(var us=yi.colorAttachments,il=0;il<us.length;++il)Vi(us[il],nr,ni);return Vi(yi.depthAttachment,nr,ni),Vi(yi.stencilAttachment,nr,ni),Vi(yi.depthStencilAttachment,nr,ni),yi.width=io.width=nr,yi.height=io.height=ni,Ri(yi),io}return io(ma,Wi),D(io,{resize:ce,_reglType:"framebuffer",_framebuffer:yi,destroy:function(){va(yi),Hi(yi)},use:function(Aa){Rr.setFBO({framebuffer:io},Aa)}})}function ro(ma){var Wi=Array(6);function yi(ce){var Aa;Ee(Wi.indexOf(Rr.next)<0,"can not update framebuffer which is currently in use");var Bo={color:null},nr=0,ni=null,us="rgba",il="uint8",$l=1;if(typeof ce=="number")nr=ce|0;else if(!ce)nr=1;else{Ee.type(ce,"object","invalid arguments for framebuffer");var hs=ce;if("shape"in hs){var ml=hs.shape;Ee(Array.isArray(ml)&&ml.length>=2,"invalid shape for framebuffer"),Ee(ml[0]===ml[1],"cube framebuffer must be square"),nr=ml[0]}else"radius"in hs&&(nr=hs.radius|0),"width"in hs?(nr=hs.width|0,"height"in hs&&Ee(hs.height===nr,"must be square")):"height"in hs&&(nr=hs.height|0);("color"in hs||"colors"in hs)&&(ni=hs.color||hs.colors,Array.isArray(ni)&&Ee(ni.length===1||vn.webgl_draw_buffers,"multiple render targets not supported")),ni||("colorCount"in hs&&($l=hs.colorCount|0,Ee($l>0,"invalid color buffer count")),"colorType"in hs&&(Ee.oneOf(hs.colorType,zi,"invalid color type"),il=hs.colorType),"colorFormat"in hs&&(us=hs.colorFormat,Ee.oneOf(hs.colorFormat,Yi,"invalid color format for texture"))),"depth"in hs&&(Bo.depth=hs.depth),"stencil"in hs&&(Bo.stencil=hs.stencil),"depthStencil"in hs&&(Bo.depthStencil=hs.depthStencil)}var lu;if(ni)if(Array.isArray(ni))for(lu=[],Aa=0;Aa<ni.length;++Aa)lu[Aa]=ni[Aa];else lu=[ni];else{lu=Array($l);var Nl={radius:nr,format:us,type:il};for(Aa=0;Aa<$l;++Aa)lu[Aa]=$r.createCube(Nl)}for(Bo.color=Array(lu.length),Aa=0;Aa<lu.length;++Aa){var Bl=lu[Aa];Ee(typeof Bl=="function"&&Bl._reglType==="textureCube","invalid cube map"),nr=nr||Bl.width,Ee(Bl.width===nr&&Bl.height===nr,"invalid cube map shape"),Bo.color[Aa]={target:gf,data:lu[Aa]}}for(Aa=0;Aa<6;++Aa){for(var Yu=0;Yu<lu.length;++Yu)Bo.color[Yu].target=gf+Aa;Aa>0&&(Bo.depth=Wi[0].depth,Bo.stencil=Wi[0].stencil,Bo.depthStencil=Wi[0].depthStencil),Wi[Aa]?Wi[Aa](Bo):Wi[Aa]=ji(Bo)}return D(yi,{width:nr,height:nr,color:lu})}function io(ce){var Aa,Bo=ce|0;if(Ee(Bo>0&&Bo<=Vn.maxCubeMapSize,"invalid radius for cube fbo"),Bo===yi.width)return yi;var nr=yi.color;for(Aa=0;Aa<nr.length;++Aa)nr[Aa].resize(Bo);for(Aa=0;Aa<6;++Aa)Wi[Aa].resize(Bo);return yi.width=yi.height=Bo,yi}return yi(ma),D(yi,{faces:Wi,resize:io,_reglType:"framebufferCube",destroy:function(){Wi.forEach(function(ce){ce.destroy()})}})}function wo(){Rr.cur=null,Rr.next=null,Rr.dirty=!0,Oo(Oi).forEach(function(ma){ma.framebuffer=et.createFramebuffer(),Ri(ma)})}return D(Rr,{getFramebuffer:function(ma){if(typeof ma=="function"&&ma._reglType==="framebuffer"){var Wi=ma._framebuffer;if(Wi instanceof ba)return Wi}return null},create:ji,createCube:ro,clear:function(){Oo(Oi).forEach(va)},restore:wo})}var te=5126,we=34962;function tt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=te,this.offset=0,this.stride=0,this.divisor=0}function At(et,vn,Vn,$r,di){for(var Vr=Vn.maxAttributes,Rr=new Array(Vr),Yi=0;Yi<Vr;++Yi)Rr[Yi]=new tt;var ki=0,zi={},qi={Record:tt,scope:{},state:Rr,currentVAO:null,targetVAO:null,restore:Ei()?Oi:function(){},createVAO:ba,getVAO:ta,destroyBuffer:ia,setVAO:Ei()?Sr:ri,clear:Ei()?Vi:function(){}};function ia(Hi){for(var va=0;va<Rr.length;++va){var Ri=Rr[va];Ri.buffer===Hi&&(et.disableVertexAttribArray(va),Ri.buffer=null)}}function Ei(){return vn.oes_vertex_array_object}function Ui(){return vn.angle_instanced_arrays}function ta(Hi){return typeof Hi=="function"&&Hi._vao?Hi._vao:null}function Sr(Hi){if(Hi!==qi.currentVAO){var va=Ei();Hi?va.bindVertexArrayOES(Hi.vao):va.bindVertexArrayOES(null),qi.currentVAO=Hi}}function ri(Hi){if(Hi!==qi.currentVAO){if(Hi)Hi.bindAttrs();else for(var va=Ui(),Ri=0;Ri<Rr.length;++Ri){var ji=Rr[Ri];ji.buffer?(et.enableVertexAttribArray(Ri),et.vertexAttribPointer(Ri,ji.size,ji.type,ji.normalized,ji.stride,ji.offfset),va&&va.vertexAttribDivisorANGLE(Ri,ji.divisor)):(et.disableVertexAttribArray(Ri),et.vertexAttrib4f(Ri,ji.x,ji.y,ji.z,ji.w))}qi.currentVAO=Hi}}function Vi(){Oo(zi).forEach(function(Hi){Hi.destroy()})}function xa(){this.id=++ki,this.attributes=[];var Hi=Ei();Hi?this.vao=Hi.createVertexArrayOES():this.vao=null,zi[this.id]=this,this.buffers=[]}xa.prototype.bindAttrs=function(){for(var Hi=Ui(),va=this.attributes,Ri=0;Ri<va.length;++Ri){var ji=va[Ri];ji.buffer?(et.enableVertexAttribArray(Ri),et.bindBuffer(we,ji.buffer.buffer),et.vertexAttribPointer(Ri,ji.size,ji.type,ji.normalized,ji.stride,ji.offset),Hi&&Hi.vertexAttribDivisorANGLE(Ri,ji.divisor)):(et.disableVertexAttribArray(Ri),et.vertexAttrib4f(Ri,ji.x,ji.y,ji.z,ji.w))}for(var ro=va.length;ro<Vr;++ro)et.disableVertexAttribArray(ro)},xa.prototype.refresh=function(){var Hi=Ei();Hi&&(Hi.bindVertexArrayOES(this.vao),this.bindAttrs(),qi.currentVAO=this)},xa.prototype.destroy=function(){if(this.vao){var Hi=Ei();this===qi.currentVAO&&(qi.currentVAO=null,Hi.bindVertexArrayOES(null)),Hi.deleteVertexArrayOES(this.vao),this.vao=null}zi[this.id]&&(delete zi[this.id],$r.vaoCount-=1)};function Oi(){var Hi=Ei();Hi&&Oo(zi).forEach(function(va){va.refresh()})}function ba(Hi){var va=new xa;$r.vaoCount+=1;function Ri(ji){Ee(Array.isArray(ji),"arguments to vertex array constructor must be an array"),Ee(ji.length<Vr,"too many attributes"),Ee(ji.length>0,"must specify at least one attribute");for(var ro=0;ro<va.buffers.length;++ro)va.buffers[ro].destroy();va.buffers.length=0;var wo=va.attributes;wo.length=ji.length;for(var ma=0;ma<ji.length;++ma){var Wi=ji[ma],yi=wo[ma]=new tt;if(Array.isArray(Wi)||G(Wi)||ns(Wi)){var io=di.create(Wi,we,!1,!0);yi.buffer=di.getBuffer(io),yi.size=yi.buffer.dimension|0,yi.normalized=!1,yi.type=yi.buffer.dtype,yi.offset=0,yi.stride=0,yi.divisor=0,yi.state=1,va.buffers.push(io)}else di.getBuffer(Wi)?(yi.buffer=di.getBuffer(Wi),yi.size=yi.buffer.dimension|0,yi.normalized=!1,yi.type=yi.buffer.dtype,yi.offset=0,yi.stride=0,yi.divisor=0,yi.state=1):di.getBuffer(Wi.buffer)?(yi.buffer=di.getBuffer(Wi.buffer),yi.size=(+Wi.size||yi.buffer.dimension)|0,yi.normalized=!!Wi.normalized||!1,"type"in Wi?(Ee.parameter(Wi.type,el,"invalid buffer type"),yi.type=el[Wi.type]):yi.type=yi.buffer.dtype,yi.offset=(Wi.offset||0)|0,yi.stride=(Wi.stride||0)|0,yi.divisor=(Wi.divisor||0)|0,yi.state=1,Ee(yi.size>=1&&yi.size<=4,"size must be between 1 and 4"),Ee(yi.offset>=0,"invalid offset"),Ee(yi.stride>=0&&yi.stride<=255,"stride must be between 0 and 255"),Ee(yi.divisor>=0,"divisor must be positive"),Ee(!yi.divisor||!!vn.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Wi?(Ee(ma>0,"first attribute must not be a constant"),yi.x=+Wi.x||0,yi.y=+Wi.y||0,yi.z=+Wi.z||0,yi.w=+Wi.w||0,yi.state=2):Ee(!1,"invalid attribute spec for location "+ma)}return va.refresh(),Ri}return Ri.destroy=function(){va.destroy()},Ri._vao=va,Ri._reglType="vao",Ri(Hi)}return qi}var $t=35632,qt=35633,rn=35718,kn=35721;function Rn(et,vn,Vn,$r){var di={},Vr={};function Rr(Sr,ri,Vi,xa){this.name=Sr,this.id=ri,this.location=Vi,this.info=xa}function Yi(Sr,ri){for(var Vi=0;Vi<Sr.length;++Vi)if(Sr[Vi].id===ri.id){Sr[Vi].location=ri.location;return}Sr.push(ri)}function ki(Sr,ri,Vi){var xa=Sr===$t?di:Vr,Oi=xa[ri];if(!Oi){var ba=vn.str(ri);Oi=et.createShader(Sr),et.shaderSource(Oi,ba),et.compileShader(Oi),Ee.shaderError(et,Oi,ba,Sr,Vi),xa[ri]=Oi}return Oi}var zi={},qi=[],ia=0;function Ei(Sr,ri){this.id=ia++,this.fragId=Sr,this.vertId=ri,this.program=null,this.uniforms=[],this.attributes=[],$r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ui(Sr,ri,Vi){var xa,Oi,ba=ki($t,Sr.fragId),Hi=ki(qt,Sr.vertId),va=Sr.program=et.createProgram();if(et.attachShader(va,ba),et.attachShader(va,Hi),Vi)for(xa=0;xa<Vi.length;++xa){var Ri=Vi[xa];et.bindAttribLocation(va,Ri[0],Ri[1])}et.linkProgram(va),Ee.linkError(et,va,vn.str(Sr.fragId),vn.str(Sr.vertId),ri);var ji=et.getProgramParameter(va,rn);$r.profile&&(Sr.stats.uniformsCount=ji);var ro=Sr.uniforms;for(xa=0;xa<ji;++xa)if(Oi=et.getActiveUniform(va,xa),Oi)if(Oi.size>1)for(var wo=0;wo<Oi.size;++wo){var ma=Oi.name.replace("[0]","["+wo+"]");Yi(ro,new Rr(ma,vn.id(ma),et.getUniformLocation(va,ma),Oi))}else Yi(ro,new Rr(Oi.name,vn.id(Oi.name),et.getUniformLocation(va,Oi.name),Oi));var Wi=et.getProgramParameter(va,kn);$r.profile&&(Sr.stats.attributesCount=Wi);var yi=Sr.attributes;for(xa=0;xa<Wi;++xa)Oi=et.getActiveAttrib(va,xa),Oi&&Yi(yi,new Rr(Oi.name,vn.id(Oi.name),et.getAttribLocation(va,Oi.name),Oi))}$r.profile&&(Vn.getMaxUniformsCount=function(){var Sr=0;return qi.forEach(function(ri){ri.stats.uniformsCount>Sr&&(Sr=ri.stats.uniformsCount)}),Sr},Vn.getMaxAttributesCount=function(){var Sr=0;return qi.forEach(function(ri){ri.stats.attributesCount>Sr&&(Sr=ri.stats.attributesCount)}),Sr});function ta(){di={},Vr={};for(var Sr=0;Sr<qi.length;++Sr)Ui(qi[Sr],null,qi[Sr].attributes.map(function(ri){return[ri.location,ri.name]}))}return{clear:function(){var Sr=et.deleteShader.bind(et);Oo(di).forEach(Sr),di={},Oo(Vr).forEach(Sr),Vr={},qi.forEach(function(ri){et.deleteProgram(ri.program)}),qi.length=0,zi={},Vn.shaderCount=0},program:function(Sr,ri,Vi,xa){Ee.command(Sr>=0,"missing vertex shader",Vi),Ee.command(ri>=0,"missing fragment shader",Vi);var Oi=zi[ri];Oi||(Oi=zi[ri]={});var ba=Oi[Sr];if(ba&&!xa)return ba;var Hi=new Ei(ri,Sr);return Vn.shaderCount++,Ui(Hi,Vi,xa),ba||(Oi[Sr]=Hi),qi.push(Hi),Hi},restore:ta,shader:ki,frag:-1,vert:-1}}var qn=6408,wn=5121,Kn=3333,mr=5126;function Or(et,vn,Vn,$r,di,Vr,Rr){function Yi(qi){var ia;vn.next===null?(Ee(di.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ia=wn):(Ee(vn.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ia=vn.next.colorAttachments[0].texture._texture.type,Vr.oes_texture_float?(Ee(ia===wn||ia===mr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ia===mr&&Ee(Rr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ee(ia===wn,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ei=0,Ui=0,ta=$r.framebufferWidth,Sr=$r.framebufferHeight,ri=null;G(qi)?ri=qi:qi&&(Ee.type(qi,"object","invalid arguments to regl.read()"),Ei=qi.x|0,Ui=qi.y|0,Ee(Ei>=0&&Ei<$r.framebufferWidth,"invalid x offset for regl.read"),Ee(Ui>=0&&Ui<$r.framebufferHeight,"invalid y offset for regl.read"),ta=(qi.width||$r.framebufferWidth-Ei)|0,Sr=(qi.height||$r.framebufferHeight-Ui)|0,ri=qi.data||null),ri&&(ia===wn?Ee(ri instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ia===mr&&Ee(ri instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ee(ta>0&&ta+Ei<=$r.framebufferWidth,"invalid width for read pixels"),Ee(Sr>0&&Sr+Ui<=$r.framebufferHeight,"invalid height for read pixels"),Vn();var Vi=ta*Sr*4;return ri||(ia===wn?ri=new Uint8Array(Vi):ia===mr&&(ri=ri||new Float32Array(Vi))),Ee.isTypedArray(ri,"data buffer for regl.read() must be a typedarray"),Ee(ri.byteLength>=Vi,"data buffer for regl.read() too small"),et.pixelStorei(Kn,4),et.readPixels(Ei,Ui,ta,Sr,qn,ia,ri),ri}function ki(qi){var ia;return vn.setFBO({framebuffer:qi.framebuffer},function(){ia=Yi(qi)}),ia}function zi(qi){return!qi||!("framebuffer"in qi)?Yi(qi):ki(qi)}return zi}function Wr(et){return Array.prototype.slice.call(et)}function Ur(et){return Wr(et).join("")}function qr(){var et=0,vn=[],Vn=[];function $r(ia){for(var Ei=0;Ei<Vn.length;++Ei)if(Vn[Ei]===ia)return vn[Ei];var Ui="g"+et++;return vn.push(Ui),Vn.push(ia),Ui}function di(){var ia=[];function Ei(){ia.push.apply(ia,Wr(arguments))}var Ui=[];function ta(){var Sr="v"+et++;return Ui.push(Sr),arguments.length>0&&(ia.push(Sr,"="),ia.push.apply(ia,Wr(arguments)),ia.push(";")),Sr}return D(Ei,{def:ta,toString:function(){return Ur([Ui.length>0?"var "+Ui.join(",")+";":"",Ur(ia)])}})}function Vr(){var ia=di(),Ei=di(),Ui=ia.toString,ta=Ei.toString;function Sr(ri,Vi){Ei(ri,Vi,"=",ia.def(ri,Vi),";")}return D(function(){ia.apply(ia,Wr(arguments))},{def:ia.def,entry:ia,exit:Ei,save:Sr,set:function(ri,Vi,xa){Sr(ri,Vi),ia(ri,Vi,"=",xa,";")},toString:function(){return Ui()+ta()}})}function Rr(){var ia=Ur(arguments),Ei=Vr(),Ui=Vr(),ta=Ei.toString,Sr=Ui.toString;return D(Ei,{then:function(){return Ei.apply(Ei,Wr(arguments)),this},else:function(){return Ui.apply(Ui,Wr(arguments)),this},toString:function(){var ri=Sr();return ri&&(ri="else{"+ri+"}"),Ur(["if(",ia,"){",ta(),"}",ri])}})}var Yi=di(),ki={};function zi(ia,Ei){var Ui=[];function ta(){var Oi="a"+Ui.length;return Ui.push(Oi),Oi}Ei=Ei||0;for(var Sr=0;Sr<Ei;++Sr)ta();var ri=Vr(),Vi=ri.toString,xa=ki[ia]=D(ri,{arg:ta,toString:function(){return Ur(["function(",Ui.join(),"){",Vi(),"}"])}});return xa}function qi(){var ia=['"use strict";',Yi,"return {"];Object.keys(ki).forEach(function(ta){ia.push('"',ta,'":',ki[ta].toString(),",")}),ia.push("}");var Ei=Ur(ia).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ui=Function.apply(null,vn.concat(Ei));return Ui.apply(null,Vn)}return{global:Yi,link:$r,block:di,proc:zi,scope:Vr,cond:Rr,compile:qi}}var _i="xyzw".split(""),q=5121,ue=1,fe=2,Me=0,ze=1,Be=2,en=3,Qt=4,Xn="dither",pn="blend.enable",sr="blend.color",br="blend.equation",Ai="blend.func",xi="depth.enable",ci="depth.func",da="depth.range",ua="depth.mask",la="colorMask",Ua="cull.enable",$a="cull.face",oo="frontFace",ms="lineWidth",bs="polygonOffset.enable",Fs="polygonOffset.offset",rs="sample.alpha",So="sample.enable",es="sample.coverage",Tu="stencil.enable",rl="stencil.mask",bu="stencil.func",Du="stencil.opFront",Ll="stencil.opBack",xc="scissor.enable",ef="scissor.box",pl="viewport",Au="profile",ac="framebuffer",Dc="vert",xf="frag",ss="elements",Dl="primitive",vl="count",nh="offset",Wp="instances",Ff="vao",yv="Width",Ld="Height",Yh=ac+yv,zf=ac+Ld,$p=pl+yv,bm=pl+Ld,vp="drawingBuffer",Nc=vp+yv,yg=vp+Ld,_g=[Ai,br,bu,Du,Ll,es,pl,ef,Fs],Gp=34962,Ay=34963,bg=35632,xg=35633,Kv=3553,Cy=34067,k0=2884,xm=3042,mp=3024,Qv=2960,Oy=2929,Em=3089,a1=32823,Eg=32926,Sm=32928,L0=5126,gp=35664,yp=35665,oc=35666,hd=5124,Dd=35667,Gu=35668,Nd=35669,D0=35670,_v=35671,dd=35672,Ah=35673,Xp=35674,_p=35675,pd=35676,rh=35678,Bd=35680,Jv=4,Fd=1028,bp=1029,zd=2304,wm=2305,Tm=32775,Sg=32776,qh=519,Yp=7680,My=0,Ry=1,wg=32774,Py=513,xp=36160,Am=36064,Ud={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},N0=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],qp={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Kp={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Cm={frag:bg,vert:xg},Ep={cw:zd,ccw:wm};function Om(et){return Array.isArray(et)||G(et)||ns(et)}function e0(et){return et.sort(function(vn,Vn){return vn===pl?-1:Vn===pl?1:vn<Vn?-1:1})}function Bc(et,vn,Vn,$r){this.thisDep=et,this.contextDep=vn,this.propDep=Vn,this.append=$r}function Fc(et){return et&&!(et.thisDep||et.contextDep||et.propDep)}function Xu(et){return new Bc(!1,!1,!1,et)}function Uf(et,vn){var Vn=et.type;if(Vn===Me){var $r=et.data.length;return new Bc(!0,$r>=1,$r>=2,vn)}else if(Vn===Qt){var di=et.data;return new Bc(di.thisDep,di.contextDep,di.propDep,vn)}else return new Bc(Vn===en,Vn===Be,Vn===ze,vn)}var Iy=new Bc(!1,!1,!1,function(){});function Ps(et,vn,Vn,$r,di,Vr,Rr,Yi,ki,zi,qi,ia,Ei,Ui,ta){var Sr=zi.Record,ri={add:32774,subtract:32778,"reverse subtract":32779};Vn.ext_blend_minmax&&(ri.min=Tm,ri.max=Sg);var Vi=Vn.angle_instanced_arrays,xa=Vn.webgl_draw_buffers,Oi={dirty:!0,profile:ta.profile},ba={},Hi=[],va={},Ri={};function ji(Gt){return Gt.replace(".","_")}function ro(Gt,xn,Wn){var jr=ji(Gt);Hi.push(Gt),ba[jr]=Oi[jr]=!!Wn,va[jr]=xn}function wo(Gt,xn,Wn){var jr=ji(Gt);Hi.push(Gt),Array.isArray(Wn)?(Oi[jr]=Wn.slice(),ba[jr]=Wn.slice()):Oi[jr]=ba[jr]=Wn,Ri[jr]=xn}ro(Xn,mp),ro(pn,xm),wo(sr,"blendColor",[0,0,0,0]),wo(br,"blendEquationSeparate",[wg,wg]),wo(Ai,"blendFuncSeparate",[Ry,My,Ry,My]),ro(xi,Oy,!0),wo(ci,"depthFunc",Py),wo(da,"depthRange",[0,1]),wo(ua,"depthMask",!0),wo(la,la,[!0,!0,!0,!0]),ro(Ua,k0),wo($a,"cullFace",bp),wo(oo,oo,wm),wo(ms,ms,1),ro(bs,a1),wo(Fs,"polygonOffset",[0,0]),ro(rs,Eg),ro(So,Sm),wo(es,"sampleCoverage",[1,!1]),ro(Tu,Qv),wo(rl,"stencilMask",-1),wo(bu,"stencilFunc",[qh,0,-1]),wo(Du,"stencilOpSeparate",[Fd,Yp,Yp,Yp]),wo(Ll,"stencilOpSeparate",[bp,Yp,Yp,Yp]),ro(xc,Em),wo(ef,"scissor",[0,0,et.drawingBufferWidth,et.drawingBufferHeight]),wo(pl,pl,[0,0,et.drawingBufferWidth,et.drawingBufferHeight]);var ma={gl:et,context:Ei,strings:vn,next:ba,current:Oi,draw:ia,elements:Vr,buffer:di,shader:qi,attributes:zi.state,vao:zi,uniforms:ki,framebuffer:Yi,extensions:Vn,timer:Ui,isBufferArgs:Om},Wi={primTypes:Cc,compareFuncs:qp,blendFuncs:Ud,blendEquations:ri,stencilOps:Kp,glTypes:el,orientationType:Ep};Ee.optional(function(){ma.isArrayLike=Hs}),xa&&(Wi.backBuffer=[bp],Wi.drawBuffer=In($r.maxDrawbuffers,function(Gt){return Gt===0?[0]:In(Gt,function(xn){return Am+xn})}));var yi=0;function io(){var Gt=qr(),xn=Gt.link,Wn=Gt.global;Gt.id=yi++,Gt.batchId="0";var jr=xn(ma),Dr=Gt.shared={props:"a0"};Object.keys(ma).forEach(function(ar){Dr[ar]=Wn.def(jr,".",ar)}),Ee.optional(function(){Gt.CHECK=xn(Ee),Gt.commandStr=Ee.guessCommand(),Gt.command=xn(Gt.commandStr),Gt.assert=function(ar,gn,pr){ar("if(!(",gn,"))",this.CHECK,".commandRaise(",xn(pr),",",this.command,");")},Wi.invalidBlendCombinations=N0});var er=Gt.next={},vr=Gt.current={};Object.keys(Ri).forEach(function(ar){Array.isArray(Oi[ar])&&(er[ar]=Wn.def(Dr.next,".",ar),vr[ar]=Wn.def(Dr.current,".",ar))});var tr=Gt.constants={};Object.keys(Wi).forEach(function(ar){tr[ar]=Wn.def(JSON.stringify(Wi[ar]))}),Gt.invoke=function(ar,gn){switch(gn.type){case Me:var pr=["this",Dr.context,Dr.props,Gt.batchId];return ar.def(xn(gn.data),".call(",pr.slice(0,Math.max(gn.data.length+1,4)),")");case ze:return ar.def(Dr.props,gn.data);case Be:return ar.def(Dr.context,gn.data);case en:return ar.def("this",gn.data);case Qt:return gn.data.append(Gt,ar),gn.data.ref}},Gt.attribCache={};var Cn={};return Gt.scopeAttrib=function(ar){var gn=vn.id(ar);if(gn in Cn)return Cn[gn];var pr=zi.scope[gn];pr||(pr=zi.scope[gn]=new Sr);var Qr=Cn[gn]=xn(pr);return Qr},Gt}function ce(Gt){var xn=Gt.static,Wn=Gt.dynamic,jr;if(Au in xn){var Dr=!!xn[Au];jr=Xu(function(vr,tr){return Dr}),jr.enable=Dr}else if(Au in Wn){var er=Wn[Au];jr=Uf(er,function(vr,tr){return vr.invoke(tr,er)})}return jr}function Aa(Gt,xn){var Wn=Gt.static,jr=Gt.dynamic;if(ac in Wn){var Dr=Wn[ac];return Dr?(Dr=Yi.getFramebuffer(Dr),Ee.command(Dr,"invalid framebuffer object"),Xu(function(vr,tr){var Cn=vr.link(Dr),ar=vr.shared;tr.set(ar.framebuffer,".next",Cn);var gn=ar.context;return tr.set(gn,"."+Yh,Cn+".width"),tr.set(gn,"."+zf,Cn+".height"),Cn})):Xu(function(vr,tr){var Cn=vr.shared;tr.set(Cn.framebuffer,".next","null");var ar=Cn.context;return tr.set(ar,"."+Yh,ar+"."+Nc),tr.set(ar,"."+zf,ar+"."+yg),"null"})}else if(ac in jr){var er=jr[ac];return Uf(er,function(vr,tr){var Cn=vr.invoke(tr,er),ar=vr.shared,gn=ar.framebuffer,pr=tr.def(gn,".getFramebuffer(",Cn,")");Ee.optional(function(){vr.assert(tr,"!"+Cn+"||"+pr,"invalid framebuffer object")}),tr.set(gn,".next",pr);var Qr=ar.context;return tr.set(Qr,"."+Yh,pr+"?"+pr+".width:"+Qr+"."+Nc),tr.set(Qr,"."+zf,pr+"?"+pr+".height:"+Qr+"."+yg),pr})}else return null}function Bo(Gt,xn,Wn){var jr=Gt.static,Dr=Gt.dynamic;function er(Cn){if(Cn in jr){var ar=jr[Cn];Ee.commandType(ar,"object","invalid "+Cn,Wn.commandStr);var gn=!0,pr=ar.x|0,Qr=ar.y|0,ti,Li;return"width"in ar?(ti=ar.width|0,Ee.command(ti>=0,"invalid "+Cn,Wn.commandStr)):gn=!1,"height"in ar?(Li=ar.height|0,Ee.command(Li>=0,"invalid "+Cn,Wn.commandStr)):gn=!1,new Bc(!gn&&xn&&xn.thisDep,!gn&&xn&&xn.contextDep,!gn&&xn&&xn.propDep,function(Va,Da){var Ha=Va.shared.context,go=ti;"width"in ar||(go=Da.def(Ha,".",Yh,"-",pr));var xo=Li;return"height"in ar||(xo=Da.def(Ha,".",zf,"-",Qr)),[pr,Qr,go,xo]})}else if(Cn in Dr){var Si=Dr[Cn],Zi=Uf(Si,function(Va,Da){var Ha=Va.invoke(Da,Si);Ee.optional(function(){Va.assert(Da,Ha+"&&typeof "+Ha+'==="object"',"invalid "+Cn)});var go=Va.shared.context,xo=Da.def(Ha,".x|0"),ks=Da.def(Ha,".y|0"),xu=Da.def('"width" in ',Ha,"?",Ha,".width|0:","(",go,".",Yh,"-",xo,")"),jf=Da.def('"height" in ',Ha,"?",Ha,".height|0:","(",go,".",zf,"-",ks,")");return Ee.optional(function(){Va.assert(Da,xu+">=0&&"+jf+">=0","invalid "+Cn)}),[xo,ks,xu,jf]});return xn&&(Zi.thisDep=Zi.thisDep||xn.thisDep,Zi.contextDep=Zi.contextDep||xn.contextDep,Zi.propDep=Zi.propDep||xn.propDep),Zi}else return xn?new Bc(xn.thisDep,xn.contextDep,xn.propDep,function(Va,Da){var Ha=Va.shared.context;return[0,0,Da.def(Ha,".",Yh),Da.def(Ha,".",zf)]}):null}var vr=er(pl);if(vr){var tr=vr;vr=new Bc(vr.thisDep,vr.contextDep,vr.propDep,function(Cn,ar){var gn=tr.append(Cn,ar),pr=Cn.shared.context;return ar.set(pr,"."+$p,gn[2]),ar.set(pr,"."+bm,gn[3]),gn})}return{viewport:vr,scissor_box:er(ef)}}function nr(Gt,xn){var Wn=Gt.static,jr=typeof Wn[xf]=="string"&&typeof Wn[Dc]=="string";if(jr){if(Object.keys(xn.dynamic).length>0)return null;var Dr=xn.static,er=Object.keys(Dr);if(er.length>0&&typeof Dr[er[0]]=="number"){for(var vr=[],tr=0;tr<er.length;++tr)Ee(typeof Dr[er[tr]]=="number","must specify all vertex attribute locations when using vaos"),vr.push([Dr[er[tr]]|0,er[tr]]);return vr}}return null}function ni(Gt,xn,Wn){var jr=Gt.static,Dr=Gt.dynamic;function er(gn){if(gn in jr){var pr=vn.id(jr[gn]);Ee.optional(function(){qi.shader(Cm[gn],pr,Ee.guessCommand())});var Qr=Xu(function(){return pr});return Qr.id=pr,Qr}else if(gn in Dr){var ti=Dr[gn];return Uf(ti,function(Li,Si){var Zi=Li.invoke(Si,ti),Va=Si.def(Li.shared.strings,".id(",Zi,")");return Ee.optional(function(){Si(Li.shared.shader,".shader(",Cm[gn],",",Va,",",Li.command,");")}),Va})}return null}var vr=er(xf),tr=er(Dc),Cn=null,ar;return Fc(vr)&&Fc(tr)?(Cn=qi.program(tr.id,vr.id,null,Wn),ar=Xu(function(gn,pr){return gn.link(Cn)})):ar=new Bc(vr&&vr.thisDep||tr&&tr.thisDep,vr&&vr.contextDep||tr&&tr.contextDep,vr&&vr.propDep||tr&&tr.propDep,function(gn,pr){var Qr=gn.shared.shader,ti;vr?ti=vr.append(gn,pr):ti=pr.def(Qr,".",xf);var Li;tr?Li=tr.append(gn,pr):Li=pr.def(Qr,".",Dc);var Si=Qr+".program("+Li+","+ti;return Ee.optional(function(){Si+=","+gn.command}),pr.def(Si+")")}),{frag:vr,vert:tr,progVar:ar,program:Cn}}function us(Gt,xn){var Wn=Gt.static,jr=Gt.dynamic;function Dr(){if(ss in Wn){var gn=Wn[ss];Om(gn)?gn=Vr.getElements(Vr.create(gn,!0)):gn&&(gn=Vr.getElements(gn),Ee.command(gn,"invalid elements",xn.commandStr));var pr=Xu(function(ti,Li){if(gn){var Si=ti.link(gn);return ti.ELEMENTS=Si,Si}return ti.ELEMENTS=null,null});return pr.value=gn,pr}else if(ss in jr){var Qr=jr[ss];return Uf(Qr,function(ti,Li){var Si=ti.shared,Zi=Si.isBufferArgs,Va=Si.elements,Da=ti.invoke(Li,Qr),Ha=Li.def("null"),go=Li.def(Zi,"(",Da,")"),xo=ti.cond(go).then(Ha,"=",Va,".createStream(",Da,");").else(Ha,"=",Va,".getElements(",Da,");");return Ee.optional(function(){ti.assert(xo.else,"!"+Da+"||"+Ha,"invalid elements")}),Li.entry(xo),Li.exit(ti.cond(go).then(Va,".destroyStream(",Ha,");")),ti.ELEMENTS=Ha,Ha})}return null}var er=Dr();function vr(){if(Dl in Wn){var gn=Wn[Dl];return Ee.commandParameter(gn,Cc,"invalid primitve",xn.commandStr),Xu(function(Qr,ti){return Cc[gn]})}else if(Dl in jr){var pr=jr[Dl];return Uf(pr,function(Qr,ti){var Li=Qr.constants.primTypes,Si=Qr.invoke(ti,pr);return Ee.optional(function(){Qr.assert(ti,Si+" in "+Li,"invalid primitive, must be one of "+Object.keys(Cc))}),ti.def(Li,"[",Si,"]")})}else if(er)return Fc(er)?er.value?Xu(function(Qr,ti){return ti.def(Qr.ELEMENTS,".primType")}):Xu(function(){return Jv}):new Bc(er.thisDep,er.contextDep,er.propDep,function(Qr,ti){var Li=Qr.ELEMENTS;return ti.def(Li,"?",Li,".primType:",Jv)});return null}function tr(gn,pr){if(gn in Wn){var Qr=Wn[gn]|0;return Ee.command(!pr||Qr>=0,"invalid "+gn,xn.commandStr),Xu(function(Li,Si){return pr&&(Li.OFFSET=Qr),Qr})}else if(gn in jr){var ti=jr[gn];return Uf(ti,function(Li,Si){var Zi=Li.invoke(Si,ti);return pr&&(Li.OFFSET=Zi,Ee.optional(function(){Li.assert(Si,Zi+">=0","invalid "+gn)})),Zi})}else if(pr&&er)return Xu(function(Li,Si){return Li.OFFSET="0",0});return null}var Cn=tr(nh,!0);function ar(){if(vl in Wn){var gn=Wn[vl]|0;return Ee.command(typeof gn=="number"&&gn>=0,"invalid vertex count",xn.commandStr),Xu(function(){return gn})}else if(vl in jr){var pr=jr[vl];return Uf(pr,function(Li,Si){var Zi=Li.invoke(Si,pr);return Ee.optional(function(){Li.assert(Si,"typeof "+Zi+'==="number"&&'+Zi+">=0&&"+Zi+"===("+Zi+"|0)","invalid vertex count")}),Zi})}else if(er)if(Fc(er)){if(er)return Cn?new Bc(Cn.thisDep,Cn.contextDep,Cn.propDep,function(Li,Si){var Zi=Si.def(Li.ELEMENTS,".vertCount-",Li.OFFSET);return Ee.optional(function(){Li.assert(Si,Zi+">=0","invalid vertex offset/element buffer too small")}),Zi}):Xu(function(Li,Si){return Si.def(Li.ELEMENTS,".vertCount")});var Qr=Xu(function(){return-1});return Ee.optional(function(){Qr.MISSING=!0}),Qr}else{var ti=new Bc(er.thisDep||Cn.thisDep,er.contextDep||Cn.contextDep,er.propDep||Cn.propDep,function(Li,Si){var Zi=Li.ELEMENTS;return Li.OFFSET?Si.def(Zi,"?",Zi,".vertCount-",Li.OFFSET,":-1"):Si.def(Zi,"?",Zi,".vertCount:-1")});return Ee.optional(function(){ti.DYNAMIC=!0}),ti}return null}return{elements:er,primitive:vr(),count:ar(),instances:tr(Wp,!1),offset:Cn}}function il(Gt,xn){var Wn=Gt.static,jr=Gt.dynamic,Dr={};return Hi.forEach(function(er){var vr=ji(er);function tr(Cn,ar){if(er in Wn){var gn=Cn(Wn[er]);Dr[vr]=Xu(function(){return gn})}else if(er in jr){var pr=jr[er];Dr[vr]=Uf(pr,function(Qr,ti){return ar(Qr,ti,Qr.invoke(ti,pr))})}}switch(er){case Ua:case pn:case Xn:case Tu:case xi:case xc:case bs:case rs:case So:case ua:return tr(function(Cn){return Ee.commandType(Cn,"boolean",er,xn.commandStr),Cn},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,"typeof "+gn+'==="boolean"',"invalid flag "+er,Cn.commandStr)}),gn});case ci:return tr(function(Cn){return Ee.commandParameter(Cn,qp,"invalid "+er,xn.commandStr),qp[Cn]},function(Cn,ar,gn){var pr=Cn.constants.compareFuncs;return Ee.optional(function(){Cn.assert(ar,gn+" in "+pr,"invalid "+er+", must be one of "+Object.keys(qp))}),ar.def(pr,"[",gn,"]")});case da:return tr(function(Cn){return Ee.command(Hs(Cn)&&Cn.length===2&&typeof Cn[0]=="number"&&typeof Cn[1]=="number"&&Cn[0]<=Cn[1],"depth range is 2d array",xn.commandStr),Cn},function(Cn,ar,gn){Ee.optional(function(){Cn.assert(ar,Cn.shared.isArrayLike+"("+gn+")&&"+gn+".length===2&&typeof "+gn+'[0]==="number"&&typeof '+gn+'[1]==="number"&&'+gn+"[0]<="+gn+"[1]","depth range must be a 2d array")});var pr=ar.def("+",gn,"[0]"),Qr=ar.def("+",gn,"[1]");return[pr,Qr]});case Ai:return tr(function(Cn){Ee.commandType(Cn,"object","blend.func",xn.commandStr);var ar="srcRGB"in Cn?Cn.srcRGB:Cn.src,gn="srcAlpha"in Cn?Cn.srcAlpha:Cn.src,pr="dstRGB"in Cn?Cn.dstRGB:Cn.dst,Qr="dstAlpha"in Cn?Cn.dstAlpha:Cn.dst;return Ee.commandParameter(ar,Ud,vr+".srcRGB",xn.commandStr),Ee.commandParameter(gn,Ud,vr+".srcAlpha",xn.commandStr),Ee.commandParameter(pr,Ud,vr+".dstRGB",xn.commandStr),Ee.commandParameter(Qr,Ud,vr+".dstAlpha",xn.commandStr),Ee.command(N0.indexOf(ar+", "+pr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ar+", "+pr+")",xn.commandStr),[Ud[ar],Ud[pr],Ud[gn],Ud[Qr]]},function(Cn,ar,gn){var pr=Cn.constants.blendFuncs;Ee.optional(function(){Cn.assert(ar,gn+"&&typeof "+gn+'==="object"',"invalid blend func, must be an object")});function Qr(Ha,go){var xo=ar.def('"',Ha,go,'" in ',gn,"?",gn,".",Ha,go,":",gn,".",Ha);return Ee.optional(function(){Cn.assert(ar,xo+" in "+pr,"invalid "+er+"."+Ha+go+", must be one of "+Object.keys(Ud))}),xo}var ti=Qr("src","RGB"),Li=Qr("dst","RGB");Ee.optional(function(){var Ha=Cn.constants.invalidBlendCombinations;Cn.assert(ar,Ha+".indexOf("+ti+'+", "+'+Li+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Si=ar.def(pr,"[",ti,"]"),Zi=ar.def(pr,"[",Qr("src","Alpha"),"]"),Va=ar.def(pr,"[",Li,"]"),Da=ar.def(pr,"[",Qr("dst","Alpha"),"]");return[Si,Va,Zi,Da]});case br:return tr(function(Cn){if(typeof Cn=="string")return Ee.commandParameter(Cn,ri,"invalid "+er,xn.commandStr),[ri[Cn],ri[Cn]];if(typeof Cn=="object")return Ee.commandParameter(Cn.rgb,ri,er+".rgb",xn.commandStr),Ee.commandParameter(Cn.alpha,ri,er+".alpha",xn.commandStr),[ri[Cn.rgb],ri[Cn.alpha]];Ee.commandRaise("invalid blend.equation",xn.commandStr)},function(Cn,ar,gn){var pr=Cn.constants.blendEquations,Qr=ar.def(),ti=ar.def(),Li=Cn.cond("typeof ",gn,'==="string"');return Ee.optional(function(){function Si(Zi,Va,Da){Cn.assert(Zi,Da+" in "+pr,"invalid "+Va+", must be one of "+Object.keys(ri))}Si(Li.then,er,gn),Cn.assert(Li.else,gn+"&&typeof "+gn+'==="object"',"invalid "+er),Si(Li.else,er+".rgb",gn+".rgb"),Si(Li.else,er+".alpha",gn+".alpha")}),Li.then(Qr,"=",ti,"=",pr,"[",gn,"];"),Li.else(Qr,"=",pr,"[",gn,".rgb];",ti,"=",pr,"[",gn,".alpha];"),ar(Li),[Qr,ti]});case sr:return tr(function(Cn){return Ee.command(Hs(Cn)&&Cn.length===4,"blend.color must be a 4d array",xn.commandStr),In(4,function(ar){return+Cn[ar]})},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,Cn.shared.isArrayLike+"("+gn+")&&"+gn+".length===4","blend.color must be a 4d array")}),In(4,function(pr){return ar.def("+",gn,"[",pr,"]")})});case rl:return tr(function(Cn){return Ee.commandType(Cn,"number",vr,xn.commandStr),Cn|0},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,"typeof "+gn+'==="number"',"invalid stencil.mask")}),ar.def(gn,"|0")});case bu:return tr(function(Cn){Ee.commandType(Cn,"object",vr,xn.commandStr);var ar=Cn.cmp||"keep",gn=Cn.ref||0,pr="mask"in Cn?Cn.mask:-1;return Ee.commandParameter(ar,qp,er+".cmp",xn.commandStr),Ee.commandType(gn,"number",er+".ref",xn.commandStr),Ee.commandType(pr,"number",er+".mask",xn.commandStr),[qp[ar],gn,pr]},function(Cn,ar,gn){var pr=Cn.constants.compareFuncs;Ee.optional(function(){function Si(){Cn.assert(ar,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Si(gn+"&&typeof ",gn,'==="object"'),Si('!("cmp" in ',gn,")||(",gn,".cmp in ",pr,")")});var Qr=ar.def('"cmp" in ',gn,"?",pr,"[",gn,".cmp]",":",Yp),ti=ar.def(gn,".ref|0"),Li=ar.def('"mask" in ',gn,"?",gn,".mask|0:-1");return[Qr,ti,Li]});case Du:case Ll:return tr(function(Cn){Ee.commandType(Cn,"object",vr,xn.commandStr);var ar=Cn.fail||"keep",gn=Cn.zfail||"keep",pr=Cn.zpass||"keep";return Ee.commandParameter(ar,Kp,er+".fail",xn.commandStr),Ee.commandParameter(gn,Kp,er+".zfail",xn.commandStr),Ee.commandParameter(pr,Kp,er+".zpass",xn.commandStr),[er===Ll?bp:Fd,Kp[ar],Kp[gn],Kp[pr]]},function(Cn,ar,gn){var pr=Cn.constants.stencilOps;Ee.optional(function(){Cn.assert(ar,gn+"&&typeof "+gn+'==="object"',"invalid "+er)});function Qr(ti){return Ee.optional(function(){Cn.assert(ar,'!("'+ti+'" in '+gn+")||("+gn+"."+ti+" in "+pr+")","invalid "+er+"."+ti+", must be one of "+Object.keys(Kp))}),ar.def('"',ti,'" in ',gn,"?",pr,"[",gn,".",ti,"]:",Yp)}return[er===Ll?bp:Fd,Qr("fail"),Qr("zfail"),Qr("zpass")]});case Fs:return tr(function(Cn){Ee.commandType(Cn,"object",vr,xn.commandStr);var ar=Cn.factor|0,gn=Cn.units|0;return Ee.commandType(ar,"number",vr+".factor",xn.commandStr),Ee.commandType(gn,"number",vr+".units",xn.commandStr),[ar,gn]},function(Cn,ar,gn){Ee.optional(function(){Cn.assert(ar,gn+"&&typeof "+gn+'==="object"',"invalid "+er)});var pr=ar.def(gn,".factor|0"),Qr=ar.def(gn,".units|0");return[pr,Qr]});case $a:return tr(function(Cn){var ar=0;return Cn==="front"?ar=Fd:Cn==="back"&&(ar=bp),Ee.command(!!ar,vr,xn.commandStr),ar},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,gn+'==="front"||'+gn+'==="back"',"invalid cull.face")}),ar.def(gn,'==="front"?',Fd,":",bp)});case ms:return tr(function(Cn){return Ee.command(typeof Cn=="number"&&Cn>=$r.lineWidthDims[0]&&Cn<=$r.lineWidthDims[1],"invalid line width, must be a positive number between "+$r.lineWidthDims[0]+" and "+$r.lineWidthDims[1],xn.commandStr),Cn},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,"typeof "+gn+'==="number"&&'+gn+">="+$r.lineWidthDims[0]+"&&"+gn+"<="+$r.lineWidthDims[1],"invalid line width")}),gn});case oo:return tr(function(Cn){return Ee.commandParameter(Cn,Ep,vr,xn.commandStr),Ep[Cn]},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,gn+'==="cw"||'+gn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ar.def(gn+'==="cw"?'+zd+":"+wm)});case la:return tr(function(Cn){return Ee.command(Hs(Cn)&&Cn.length===4,"color.mask must be length 4 array",xn.commandStr),Cn.map(function(ar){return!!ar})},function(Cn,ar,gn){return Ee.optional(function(){Cn.assert(ar,Cn.shared.isArrayLike+"("+gn+")&&"+gn+".length===4","invalid color.mask")}),In(4,function(pr){return"!!"+gn+"["+pr+"]"})});case es:return tr(function(Cn){Ee.command(typeof Cn=="object"&&Cn,vr,xn.commandStr);var ar="value"in Cn?Cn.value:1,gn=!!Cn.invert;return Ee.command(typeof ar=="number"&&ar>=0&&ar<=1,"sample.coverage.value must be a number between 0 and 1",xn.commandStr),[ar,gn]},function(Cn,ar,gn){Ee.optional(function(){Cn.assert(ar,gn+"&&typeof "+gn+'==="object"',"invalid sample.coverage")});var pr=ar.def('"value" in ',gn,"?+",gn,".value:1"),Qr=ar.def("!!",gn,".invert");return[pr,Qr]})}}),Dr}function $l(Gt,xn){var Wn=Gt.static,jr=Gt.dynamic,Dr={};return Object.keys(Wn).forEach(function(er){var vr=Wn[er],tr;if(typeof vr=="number"||typeof vr=="boolean")tr=Xu(function(){return vr});else if(typeof vr=="function"){var Cn=vr._reglType;Cn==="texture2d"||Cn==="textureCube"?tr=Xu(function(ar){return ar.link(vr)}):Cn==="framebuffer"||Cn==="framebufferCube"?(Ee.command(vr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+er+'"',xn.commandStr),tr=Xu(function(ar){return ar.link(vr.color[0])})):Ee.commandRaise('invalid data for uniform "'+er+'"',xn.commandStr)}else Hs(vr)?tr=Xu(function(ar){var gn=ar.global.def("[",In(vr.length,function(pr){return Ee.command(typeof vr[pr]=="number"||typeof vr[pr]=="boolean","invalid uniform "+er,ar.commandStr),vr[pr]}),"]");return gn}):Ee.commandRaise('invalid or missing data for uniform "'+er+'"',xn.commandStr);tr.value=vr,Dr[er]=tr}),Object.keys(jr).forEach(function(er){var vr=jr[er];Dr[er]=Uf(vr,function(tr,Cn){return tr.invoke(Cn,vr)})}),Dr}function hs(Gt,xn){var Wn=Gt.static,jr=Gt.dynamic,Dr={};return Object.keys(Wn).forEach(function(er){var vr=Wn[er],tr=vn.id(er),Cn=new Sr;if(Om(vr))Cn.state=ue,Cn.buffer=di.getBuffer(di.create(vr,Gp,!1,!0)),Cn.type=0;else{var ar=di.getBuffer(vr);if(ar)Cn.state=ue,Cn.buffer=ar,Cn.type=0;else if(Ee.command(typeof vr=="object"&&vr,"invalid data for attribute "+er,xn.commandStr),"constant"in vr){var gn=vr.constant;Cn.buffer="null",Cn.state=fe,typeof gn=="number"?Cn.x=gn:(Ee.command(Hs(gn)&&gn.length>0&&gn.length<=4,"invalid constant for attribute "+er,xn.commandStr),_i.forEach(function(Va,Da){Da<gn.length&&(Cn[Va]=gn[Da])}))}else{Om(vr.buffer)?ar=di.getBuffer(di.create(vr.buffer,Gp,!1,!0)):ar=di.getBuffer(vr.buffer),Ee.command(!!ar,'missing buffer for attribute "'+er+'"',xn.commandStr);var pr=vr.offset|0;Ee.command(pr>=0,'invalid offset for attribute "'+er+'"',xn.commandStr);var Qr=vr.stride|0;Ee.command(Qr>=0&&Qr<256,'invalid stride for attribute "'+er+'", must be integer betweeen [0, 255]',xn.commandStr);var ti=vr.size|0;Ee.command(!("size"in vr)||ti>0&&ti<=4,'invalid size for attribute "'+er+'", must be 1,2,3,4',xn.commandStr);var Li=!!vr.normalized,Si=0;"type"in vr&&(Ee.commandParameter(vr.type,el,"invalid type for attribute "+er,xn.commandStr),Si=el[vr.type]);var Zi=vr.divisor|0;"divisor"in vr&&(Ee.command(Zi===0||Vi,'cannot specify divisor for attribute "'+er+'", instancing not supported',xn.commandStr),Ee.command(Zi>=0,'invalid divisor for attribute "'+er+'"',xn.commandStr)),Ee.optional(function(){var Va=xn.commandStr,Da=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(vr).forEach(function(Ha){Ee.command(Da.indexOf(Ha)>=0,'unknown parameter "'+Ha+'" for attribute pointer "'+er+'" (valid parameters are '+Da+")",Va)})}),Cn.buffer=ar,Cn.state=ue,Cn.size=ti,Cn.normalized=Li,Cn.type=Si||ar.dtype,Cn.offset=pr,Cn.stride=Qr,Cn.divisor=Zi}}Dr[er]=Xu(function(Va,Da){var Ha=Va.attribCache;if(tr in Ha)return Ha[tr];var go={isStream:!1};return Object.keys(Cn).forEach(function(xo){go[xo]=Cn[xo]}),Cn.buffer&&(go.buffer=Va.link(Cn.buffer),go.type=go.type||go.buffer+".dtype"),Ha[tr]=go,go})}),Object.keys(jr).forEach(function(er){var vr=jr[er];function tr(Cn,ar){var gn=Cn.invoke(ar,vr),pr=Cn.shared,Qr=Cn.constants,ti=pr.isBufferArgs,Li=pr.buffer;Ee.optional(function(){Cn.assert(ar,gn+"&&(typeof "+gn+'==="object"||typeof '+gn+'==="function")&&('+ti+"("+gn+")||"+Li+".getBuffer("+gn+")||"+Li+".getBuffer("+gn+".buffer)||"+ti+"("+gn+'.buffer)||("constant" in '+gn+"&&(typeof "+gn+'.constant==="number"||'+pr.isArrayLike+"("+gn+".constant))))",'invalid dynamic attribute "'+er+'"')});var Si={isStream:ar.def(!1)},Zi=new Sr;Zi.state=ue,Object.keys(Zi).forEach(function(go){Si[go]=ar.def(""+Zi[go])});var Va=Si.buffer,Da=Si.type;ar("if(",ti,"(",gn,")){",Si.isStream,"=true;",Va,"=",Li,".createStream(",Gp,",",gn,");",Da,"=",Va,".dtype;","}else{",Va,"=",Li,".getBuffer(",gn,");","if(",Va,"){",Da,"=",Va,".dtype;",'}else if("constant" in ',gn,"){",Si.state,"=",fe,";","if(typeof "+gn+'.constant === "number"){',Si[_i[0]],"=",gn,".constant;",_i.slice(1).map(function(go){return Si[go]}).join("="),"=0;","}else{",_i.map(function(go,xo){return Si[go]+"="+gn+".constant.length>"+xo+"?"+gn+".constant["+xo+"]:0;"}).join(""),"}}else{","if(",ti,"(",gn,".buffer)){",Va,"=",Li,".createStream(",Gp,",",gn,".buffer);","}else{",Va,"=",Li,".getBuffer(",gn,".buffer);","}",Da,'="type" in ',gn,"?",Qr.glTypes,"[",gn,".type]:",Va,".dtype;",Si.normalized,"=!!",gn,".normalized;");function Ha(go){ar(Si[go],"=",gn,".",go,"|0;")}return Ha("size"),Ha("offset"),Ha("stride"),Ha("divisor"),ar("}}"),ar.exit("if(",Si.isStream,"){",Li,".destroyStream(",Va,");","}"),Si}Dr[er]=Uf(vr,tr)}),Dr}function ml(Gt,xn){var Wn=Gt.static,jr=Gt.dynamic;if(Ff in Wn){var Dr=Wn[Ff];return Dr!==null&&zi.getVAO(Dr)===null&&(Dr=zi.createVAO(Dr)),Xu(function(vr){return vr.link(zi.getVAO(Dr))})}else if(Ff in jr){var er=jr[Ff];return Uf(er,function(vr,tr){var Cn=vr.invoke(tr,er);return tr.def(vr.shared.vao+".getVAO("+Cn+")")})}return null}function lu(Gt){var xn=Gt.static,Wn=Gt.dynamic,jr={};return Object.keys(xn).forEach(function(Dr){var er=xn[Dr];jr[Dr]=Xu(function(vr,tr){return typeof er=="number"||typeof er=="boolean"?""+er:vr.link(er)})}),Object.keys(Wn).forEach(function(Dr){var er=Wn[Dr];jr[Dr]=Uf(er,function(vr,tr){return vr.invoke(tr,er)})}),jr}function Nl(Gt,xn,Wn,jr,Dr){var er=Gt.static,vr=Gt.dynamic;Ee.optional(function(){var Ha=[ac,Dc,xf,ss,Dl,nh,vl,Wp,Au,Ff].concat(Hi);function go(xo){Object.keys(xo).forEach(function(ks){Ee.command(Ha.indexOf(ks)>=0,'unknown parameter "'+ks+'"',Dr.commandStr)})}go(er),go(vr)});var tr=nr(Gt,xn),Cn=Aa(Gt,Dr),ar=Bo(Gt,Cn,Dr),gn=us(Gt,Dr),pr=il(Gt,Dr),Qr=ni(Gt,Dr,tr);function ti(Ha){var go=ar[Ha];go&&(pr[Ha]=go)}ti(pl),ti(ji(ef));var Li=Object.keys(pr).length>0,Si={framebuffer:Cn,draw:gn,shader:Qr,state:pr,dirty:Li,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Si.profile=ce(Gt,Dr),Si.uniforms=$l(Wn,Dr),Si.drawVAO=Si.scopeVAO=ml(Gt,Dr),!Si.drawVAO&&Qr.program&&!tr&&Vn.angle_instanced_arrays){var Zi=!0,Va=Qr.program.attributes.map(function(Ha){var go=xn.static[Ha];return Zi=Zi&&!!go,go});if(Zi&&Va.length>0){var Da=zi.getVAO(zi.createVAO(Va));Si.drawVAO=new Bc(null,null,null,function(Ha,go){return Ha.link(Da)}),Si.useVAO=!0}}return tr?Si.useVAO=!0:Si.attributes=hs(xn,Dr),Si.context=lu(jr,Dr),Si}function Bl(Gt,xn,Wn){var jr=Gt.shared,Dr=jr.context,er=Gt.scope();Object.keys(Wn).forEach(function(vr){xn.save(Dr,"."+vr);var tr=Wn[vr];er(Dr,".",vr,"=",tr.append(Gt,xn),";")}),xn(er)}function Yu(Gt,xn,Wn,jr){var Dr=Gt.shared,er=Dr.gl,vr=Dr.framebuffer,tr;xa&&(tr=xn.def(Dr.extensions,".webgl_draw_buffers"));var Cn=Gt.constants,ar=Cn.drawBuffer,gn=Cn.backBuffer,pr;Wn?pr=Wn.append(Gt,xn):pr=xn.def(vr,".next"),jr||xn("if(",pr,"!==",vr,".cur){"),xn("if(",pr,"){",er,".bindFramebuffer(",xp,",",pr,".framebuffer);"),xa&&xn(tr,".drawBuffersWEBGL(",ar,"[",pr,".colorAttachments.length]);"),xn("}else{",er,".bindFramebuffer(",xp,",null);"),xa&&xn(tr,".drawBuffersWEBGL(",gn,");"),xn("}",vr,".cur=",pr,";"),jr||xn("}")}function Gl(Gt,xn,Wn){var jr=Gt.shared,Dr=jr.gl,er=Gt.current,vr=Gt.next,tr=jr.current,Cn=jr.next,ar=Gt.cond(tr,".dirty");Hi.forEach(function(gn){var pr=ji(gn);if(!(pr in Wn.state)){var Qr,ti;if(pr in vr){Qr=vr[pr],ti=er[pr];var Li=In(Oi[pr].length,function(Zi){return ar.def(Qr,"[",Zi,"]")});ar(Gt.cond(Li.map(function(Zi,Va){return Zi+"!=="+ti+"["+Va+"]"}).join("||")).then(Dr,".",Ri[pr],"(",Li,");",Li.map(function(Zi,Va){return ti+"["+Va+"]="+Zi}).join(";"),";"))}else{Qr=ar.def(Cn,".",pr);var Si=Gt.cond(Qr,"!==",tr,".",pr);ar(Si),pr in va?Si(Gt.cond(Qr).then(Dr,".enable(",va[pr],");").else(Dr,".disable(",va[pr],");"),tr,".",pr,"=",Qr,";"):Si(Dr,".",Ri[pr],"(",Qr,");",tr,".",pr,"=",Qr,";")}}}),Object.keys(Wn.state).length===0&&ar(tr,".dirty=false;"),xn(ar)}function Uc(Gt,xn,Wn,jr){var Dr=Gt.shared,er=Gt.current,vr=Dr.current,tr=Dr.gl;e0(Object.keys(Wn)).forEach(function(Cn){var ar=Wn[Cn];if(!(jr&&!jr(ar))){var gn=ar.append(Gt,xn);if(va[Cn]){var pr=va[Cn];Fc(ar)?gn?xn(tr,".enable(",pr,");"):xn(tr,".disable(",pr,");"):xn(Gt.cond(gn).then(tr,".enable(",pr,");").else(tr,".disable(",pr,");")),xn(vr,".",Cn,"=",gn,";")}else if(Hs(gn)){var Qr=er[Cn];xn(tr,".",Ri[Cn],"(",gn,");",gn.map(function(ti,Li){return Qr+"["+Li+"]="+ti}).join(";"),";")}else xn(tr,".",Ri[Cn],"(",gn,");",vr,".",Cn,"=",gn,";")}})}function Sl(Gt,xn){Vi&&(Gt.instancing=xn.def(Gt.shared.extensions,".angle_instanced_arrays"))}function Zo(Gt,xn,Wn,jr,Dr){var er=Gt.shared,vr=Gt.stats,tr=er.current,Cn=er.timer,ar=Wn.profile;function gn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var pr,Qr;function ti(Ha){pr=xn.def(),Ha(pr,"=",gn(),";"),typeof Dr=="string"?Ha(vr,".count+=",Dr,";"):Ha(vr,".count++;"),Ui&&(jr?(Qr=xn.def(),Ha(Qr,"=",Cn,".getNumPendingQueries();")):Ha(Cn,".beginQuery(",vr,");"))}function Li(Ha){Ha(vr,".cpuTime+=",gn(),"-",pr,";"),Ui&&(jr?Ha(Cn,".pushScopeStats(",Qr,",",Cn,".getNumPendingQueries(),",vr,");"):Ha(Cn,".endQuery();"))}function Si(Ha){var go=xn.def(tr,".profile");xn(tr,".profile=",Ha,";"),xn.exit(tr,".profile=",go,";")}var Zi;if(ar){if(Fc(ar)){ar.enable?(ti(xn),Li(xn.exit),Si("true")):Si("false");return}Zi=ar.append(Gt,xn),Si(Zi)}else Zi=xn.def(tr,".profile");var Va=Gt.block();ti(Va),xn("if(",Zi,"){",Va,"}");var Da=Gt.block();Li(Da),xn.exit("if(",Zi,"){",Da,"}")}function Ec(Gt,xn,Wn,jr,Dr){var er=Gt.shared;function vr(Cn){switch(Cn){case gp:case Dd:case _v:return 2;case yp:case Gu:case dd:return 3;case oc:case Nd:case Ah:return 4;default:return 1}}function tr(Cn,ar,gn){var pr=er.gl,Qr=xn.def(Cn,".location"),ti=xn.def(er.attributes,"[",Qr,"]"),Li=gn.state,Si=gn.buffer,Zi=[gn.x,gn.y,gn.z,gn.w],Va=["buffer","normalized","offset","stride"];function Da(){xn("if(!",ti,".buffer){",pr,".enableVertexAttribArray(",Qr,");}");var go=gn.type,xo;if(gn.size?xo=xn.def(gn.size,"||",ar):xo=ar,xn("if(",ti,".type!==",go,"||",ti,".size!==",xo,"||",Va.map(function(xu){return ti+"."+xu+"!=="+gn[xu]}).join("||"),"){",pr,".bindBuffer(",Gp,",",Si,".buffer);",pr,".vertexAttribPointer(",[Qr,xo,go,gn.normalized,gn.stride,gn.offset],");",ti,".type=",go,";",ti,".size=",xo,";",Va.map(function(xu){return ti+"."+xu+"="+gn[xu]+";"}).join(""),"}"),Vi){var ks=gn.divisor;xn("if(",ti,".divisor!==",ks,"){",Gt.instancing,".vertexAttribDivisorANGLE(",[Qr,ks],");",ti,".divisor=",ks,";}")}}function Ha(){xn("if(",ti,".buffer){",pr,".disableVertexAttribArray(",Qr,");",ti,".buffer=null;","}if(",_i.map(function(go,xo){return ti+"."+go+"!=="+Zi[xo]}).join("||"),"){",pr,".vertexAttrib4f(",Qr,",",Zi,");",_i.map(function(go,xo){return ti+"."+go+"="+Zi[xo]+";"}).join(""),"}")}Li===ue?Da():Li===fe?Ha():(xn("if(",Li,"===",ue,"){"),Da(),xn("}else{"),Ha(),xn("}"))}jr.forEach(function(Cn){var ar=Cn.name,gn=Wn.attributes[ar],pr;if(gn){if(!Dr(gn))return;pr=gn.append(Gt,xn)}else{if(!Dr(Iy))return;var Qr=Gt.scopeAttrib(ar);Ee.optional(function(){Gt.assert(xn,Qr+".state","missing attribute "+ar)}),pr={},Object.keys(new Sr).forEach(function(ti){pr[ti]=xn.def(Qr,".",ti)})}tr(Gt.link(Cn),vr(Cn.info.type),pr)})}function Is(Gt,xn,Wn,jr,Dr){for(var er=Gt.shared,vr=er.gl,tr,Cn=0;Cn<jr.length;++Cn){var ar=jr[Cn],gn=ar.name,pr=ar.info.type,Qr=Wn.uniforms[gn],ti=Gt.link(ar),Li=ti+".location",Si;if(Qr){if(!Dr(Qr))continue;if(Fc(Qr)){var Zi=Qr.value;if(Ee.command(Zi!==null&&typeof Zi!="undefined",'missing uniform "'+gn+'"',Gt.commandStr),pr===rh||pr===Bd){Ee.command(typeof Zi=="function"&&(pr===rh&&(Zi._reglType==="texture2d"||Zi._reglType==="framebuffer")||pr===Bd&&(Zi._reglType==="textureCube"||Zi._reglType==="framebufferCube")),"invalid texture for uniform "+gn,Gt.commandStr);var Va=Gt.link(Zi._texture||Zi.color[0]._texture);xn(vr,".uniform1i(",Li,",",Va+".bind());"),xn.exit(Va,".unbind();")}else if(pr===Xp||pr===_p||pr===pd){Ee.optional(function(){Ee.command(Hs(Zi),"invalid matrix for uniform "+gn,Gt.commandStr),Ee.command(pr===Xp&&Zi.length===4||pr===_p&&Zi.length===9||pr===pd&&Zi.length===16,"invalid length for matrix uniform "+gn,Gt.commandStr)});var Da=Gt.global.def("new Float32Array(["+Array.prototype.slice.call(Zi)+"])"),Ha=2;pr===_p?Ha=3:pr===pd&&(Ha=4),xn(vr,".uniformMatrix",Ha,"fv(",Li,",false,",Da,");")}else{switch(pr){case L0:Ee.commandType(Zi,"number","uniform "+gn,Gt.commandStr),tr="1f";break;case gp:Ee.command(Hs(Zi)&&Zi.length===2,"uniform "+gn,Gt.commandStr),tr="2f";break;case yp:Ee.command(Hs(Zi)&&Zi.length===3,"uniform "+gn,Gt.commandStr),tr="3f";break;case oc:Ee.command(Hs(Zi)&&Zi.length===4,"uniform "+gn,Gt.commandStr),tr="4f";break;case D0:Ee.commandType(Zi,"boolean","uniform "+gn,Gt.commandStr),tr="1i";break;case hd:Ee.commandType(Zi,"number","uniform "+gn,Gt.commandStr),tr="1i";break;case _v:Ee.command(Hs(Zi)&&Zi.length===2,"uniform "+gn,Gt.commandStr),tr="2i";break;case Dd:Ee.command(Hs(Zi)&&Zi.length===2,"uniform "+gn,Gt.commandStr),tr="2i";break;case dd:Ee.command(Hs(Zi)&&Zi.length===3,"uniform "+gn,Gt.commandStr),tr="3i";break;case Gu:Ee.command(Hs(Zi)&&Zi.length===3,"uniform "+gn,Gt.commandStr),tr="3i";break;case Ah:Ee.command(Hs(Zi)&&Zi.length===4,"uniform "+gn,Gt.commandStr),tr="4i";break;case Nd:Ee.command(Hs(Zi)&&Zi.length===4,"uniform "+gn,Gt.commandStr),tr="4i";break}xn(vr,".uniform",tr,"(",Li,",",Hs(Zi)?Array.prototype.slice.call(Zi):Zi,");")}continue}else Si=Qr.append(Gt,xn)}else{if(!Dr(Iy))continue;Si=xn.def(er.uniforms,"[",vn.id(gn),"]")}pr===rh?xn("if(",Si,"&&",Si,'._reglType==="framebuffer"){',Si,"=",Si,".color[0];","}"):pr===Bd&&xn("if(",Si,"&&",Si,'._reglType==="framebufferCube"){',Si,"=",Si,".color[0];","}"),Ee.optional(function(){function jf(jd,Jp){Gt.assert(xn,jd,'bad data or missing for uniform "'+gn+'".  '+Jp)}function Qp(jd){jf("typeof "+Si+'==="'+jd+'"',"invalid type, expected "+jd)}function sc(jd,Jp){jf(er.isArrayLike+"("+Si+")&&"+Si+".length==="+jd,"invalid vector, should have length "+jd,Gt.commandStr)}function Dy(jd){jf("typeof "+Si+'==="function"&&'+Si+'._reglType==="texture'+(jd===Kv?"2d":"Cube")+'"',"invalid texture type",Gt.commandStr)}switch(pr){case hd:Qp("number");break;case Dd:sc(2,"number");break;case Gu:sc(3,"number");break;case Nd:sc(4,"number");break;case L0:Qp("number");break;case gp:sc(2,"number");break;case yp:sc(3,"number");break;case oc:sc(4,"number");break;case D0:Qp("boolean");break;case _v:sc(2,"boolean");break;case dd:sc(3,"boolean");break;case Ah:sc(4,"boolean");break;case Xp:sc(4,"number");break;case _p:sc(9,"number");break;case pd:sc(16,"number");break;case rh:Dy(Kv);break;case Bd:Dy(Cy);break}});var go=1;switch(pr){case rh:case Bd:var xo=xn.def(Si,"._texture");xn(vr,".uniform1i(",Li,",",xo,".bind());"),xn.exit(xo,".unbind();");continue;case hd:case D0:tr="1i";break;case Dd:case _v:tr="2i",go=2;break;case Gu:case dd:tr="3i",go=3;break;case Nd:case Ah:tr="4i",go=4;break;case L0:tr="1f";break;case gp:tr="2f",go=2;break;case yp:tr="3f",go=3;break;case oc:tr="4f",go=4;break;case Xp:tr="Matrix2fv";break;case _p:tr="Matrix3fv";break;case pd:tr="Matrix4fv";break}if(xn(vr,".uniform",tr,"(",Li,","),tr.charAt(0)==="M"){var ks=Math.pow(pr-Xp+2,2),xu=Gt.global.def("new Float32Array(",ks,")");xn("false,(Array.isArray(",Si,")||",Si," instanceof Float32Array)?",Si,":(",In(ks,function(jf){return xu+"["+jf+"]="+Si+"["+jf+"]"}),",",xu,")")}else go>1?xn(In(go,function(jf){return Si+"["+jf+"]"})):xn(Si);xn(");")}}function mo(Gt,xn,Wn,jr){var Dr=Gt.shared,er=Dr.gl,vr=Dr.draw,tr=jr.draw;function Cn(){var xo=tr.elements,ks,xu=xn;return xo?((xo.contextDep&&jr.contextDynamic||xo.propDep)&&(xu=Wn),ks=xo.append(Gt,xu)):ks=xu.def(vr,".",ss),ks&&xu("if("+ks+")"+er+".bindBuffer("+Ay+","+ks+".buffer.buffer);"),ks}function ar(){var xo=tr.count,ks,xu=xn;return xo?((xo.contextDep&&jr.contextDynamic||xo.propDep)&&(xu=Wn),ks=xo.append(Gt,xu),Ee.optional(function(){xo.MISSING&&Gt.assert(xn,"false","missing vertex count"),xo.DYNAMIC&&Gt.assert(xu,ks+">=0","missing vertex count")})):(ks=xu.def(vr,".",vl),Ee.optional(function(){Gt.assert(xu,ks+">=0","missing vertex count")})),ks}var gn=Cn();function pr(xo){var ks=tr[xo];return ks?ks.contextDep&&jr.contextDynamic||ks.propDep?ks.append(Gt,Wn):ks.append(Gt,xn):xn.def(vr,".",xo)}var Qr=pr(Dl),ti=pr(nh),Li=ar();if(typeof Li=="number"){if(Li===0)return}else Wn("if(",Li,"){"),Wn.exit("}");var Si,Zi;Vi&&(Si=pr(Wp),Zi=Gt.instancing);var Va=gn+".type",Da=tr.elements&&Fc(tr.elements);function Ha(){function xo(){Wn(Zi,".drawElementsInstancedANGLE(",[Qr,Li,Va,ti+"<<(("+Va+"-"+q+")>>1)",Si],");")}function ks(){Wn(Zi,".drawArraysInstancedANGLE(",[Qr,ti,Li,Si],");")}gn?Da?xo():(Wn("if(",gn,"){"),xo(),Wn("}else{"),ks(),Wn("}")):ks()}function go(){function xo(){Wn(er+".drawElements("+[Qr,Li,Va,ti+"<<(("+Va+"-"+q+")>>1)"]+");")}function ks(){Wn(er+".drawArrays("+[Qr,ti,Li]+");")}gn?Da?xo():(Wn("if(",gn,"){"),xo(),Wn("}else{"),ks(),Wn("}")):ks()}Vi&&(typeof Si!="number"||Si>=0)?typeof Si=="string"?(Wn("if(",Si,">0){"),Ha(),Wn("}else if(",Si,"<0){"),go(),Wn("}")):Ha():go()}function ls(Gt,xn,Wn,jr,Dr){var er=io(),vr=er.proc("body",Dr);return Ee.optional(function(){er.commandStr=xn.commandStr,er.command=er.link(xn.commandStr)}),Vi&&(er.instancing=vr.def(er.shared.extensions,".angle_instanced_arrays")),Gt(er,vr,Wn,jr),er.compile().body}function Ss(Gt,xn,Wn,jr){Sl(Gt,xn),Wn.useVAO?Wn.drawVAO?xn(Gt.shared.vao,".setVAO(",Wn.drawVAO.append(Gt,xn),");"):xn(Gt.shared.vao,".setVAO(",Gt.shared.vao,".targetVAO);"):(xn(Gt.shared.vao,".setVAO(null);"),Ec(Gt,xn,Wn,jr.attributes,function(){return!0})),Is(Gt,xn,Wn,jr.uniforms,function(){return!0}),mo(Gt,xn,xn,Wn)}function wl(Gt,xn){var Wn=Gt.proc("draw",1);Sl(Gt,Wn),Bl(Gt,Wn,xn.context),Yu(Gt,Wn,xn.framebuffer),Gl(Gt,Wn,xn),Uc(Gt,Wn,xn.state),Zo(Gt,Wn,xn,!1,!0);var jr=xn.shader.progVar.append(Gt,Wn);if(Wn(Gt.shared.gl,".useProgram(",jr,".program);"),xn.shader.program)Ss(Gt,Wn,xn,xn.shader.program);else{Wn(Gt.shared.vao,".setVAO(null);");var Dr=Gt.global.def("{}"),er=Wn.def(jr,".id"),vr=Wn.def(Dr,"[",er,"]");Wn(Gt.cond(vr).then(vr,".call(this,a0);").else(vr,"=",Dr,"[",er,"]=",Gt.link(function(tr){return ls(Ss,Gt,xn,tr,1)}),"(",jr,");",vr,".call(this,a0);"))}Object.keys(xn.state).length>0&&Wn(Gt.shared.current,".dirty=true;")}function vd(Gt,xn,Wn,jr){Gt.batchId="a1",Sl(Gt,xn);function Dr(){return!0}Ec(Gt,xn,Wn,jr.attributes,Dr),Is(Gt,xn,Wn,jr.uniforms,Dr),mo(Gt,xn,xn,Wn)}function Nn(Gt,xn,Wn,jr){Sl(Gt,xn);var Dr=Wn.contextDep,er=xn.def(),vr="a0",tr="a1",Cn=xn.def();Gt.shared.props=Cn,Gt.batchId=er;var ar=Gt.scope(),gn=Gt.scope();xn(ar.entry,"for(",er,"=0;",er,"<",tr,";++",er,"){",Cn,"=",vr,"[",er,"];",gn,"}",ar.exit);function pr(Va){return Va.contextDep&&Dr||Va.propDep}function Qr(Va){return!pr(Va)}if(Wn.needsContext&&Bl(Gt,gn,Wn.context),Wn.needsFramebuffer&&Yu(Gt,gn,Wn.framebuffer),Uc(Gt,gn,Wn.state,pr),Wn.profile&&pr(Wn.profile)&&Zo(Gt,gn,Wn,!1,!0),jr)Wn.useVAO?Wn.drawVAO?pr(Wn.drawVAO)?gn(Gt.shared.vao,".setVAO(",Wn.drawVAO.append(Gt,gn),");"):ar(Gt.shared.vao,".setVAO(",Wn.drawVAO.append(Gt,ar),");"):ar(Gt.shared.vao,".setVAO(",Gt.shared.vao,".targetVAO);"):(ar(Gt.shared.vao,".setVAO(null);"),Ec(Gt,ar,Wn,jr.attributes,Qr),Ec(Gt,gn,Wn,jr.attributes,pr)),Is(Gt,ar,Wn,jr.uniforms,Qr),Is(Gt,gn,Wn,jr.uniforms,pr),mo(Gt,ar,gn,Wn);else{var ti=Gt.global.def("{}"),Li=Wn.shader.progVar.append(Gt,gn),Si=gn.def(Li,".id"),Zi=gn.def(ti,"[",Si,"]");gn(Gt.shared.gl,".useProgram(",Li,".program);","if(!",Zi,"){",Zi,"=",ti,"[",Si,"]=",Gt.link(function(Va){return ls(vd,Gt,Wn,Va,2)}),"(",Li,");}",Zi,".call(this,a0[",er,"],",er,");")}}function Kr(Gt,xn){var Wn=Gt.proc("batch",2);Gt.batchId="0",Sl(Gt,Wn);var jr=!1,Dr=!0;Object.keys(xn.context).forEach(function(ti){jr=jr||xn.context[ti].propDep}),jr||(Bl(Gt,Wn,xn.context),Dr=!1);var er=xn.framebuffer,vr=!1;er?(er.propDep?jr=vr=!0:er.contextDep&&jr&&(vr=!0),vr||Yu(Gt,Wn,er)):Yu(Gt,Wn,null),xn.state.viewport&&xn.state.viewport.propDep&&(jr=!0);function tr(ti){return ti.contextDep&&jr||ti.propDep}Gl(Gt,Wn,xn),Uc(Gt,Wn,xn.state,function(ti){return!tr(ti)}),(!xn.profile||!tr(xn.profile))&&Zo(Gt,Wn,xn,!1,"a1"),xn.contextDep=jr,xn.needsContext=Dr,xn.needsFramebuffer=vr;var Cn=xn.shader.progVar;if(Cn.contextDep&&jr||Cn.propDep)Nn(Gt,Wn,xn,null);else{var ar=Cn.append(Gt,Wn);if(Wn(Gt.shared.gl,".useProgram(",ar,".program);"),xn.shader.program)Nn(Gt,Wn,xn,xn.shader.program);else{Wn(Gt.shared.vao,".setVAO(null);");var gn=Gt.global.def("{}"),pr=Wn.def(ar,".id"),Qr=Wn.def(gn,"[",pr,"]");Wn(Gt.cond(Qr).then(Qr,".call(this,a0,a1);").else(Qr,"=",gn,"[",pr,"]=",Gt.link(function(ti){return ls(Nn,Gt,xn,ti,2)}),"(",ar,");",Qr,".call(this,a0,a1);"))}}Object.keys(xn.state).length>0&&Wn(Gt.shared.current,".dirty=true;")}function Fr(Gt,xn){var Wn=Gt.proc("scope",3);Gt.batchId="a2";var jr=Gt.shared,Dr=jr.current;Bl(Gt,Wn,xn.context),xn.framebuffer&&xn.framebuffer.append(Gt,Wn),e0(Object.keys(xn.state)).forEach(function(vr){var tr=xn.state[vr],Cn=tr.append(Gt,Wn);Hs(Cn)?Cn.forEach(function(ar,gn){Wn.set(Gt.next[vr],"["+gn+"]",ar)}):Wn.set(jr.next,"."+vr,Cn)}),Zo(Gt,Wn,xn,!0,!0),[ss,nh,vl,Wp,Dl].forEach(function(vr){var tr=xn.draw[vr];tr&&Wn.set(jr.draw,"."+vr,""+tr.append(Gt,Wn))}),Object.keys(xn.uniforms).forEach(function(vr){Wn.set(jr.uniforms,"["+vn.id(vr)+"]",xn.uniforms[vr].append(Gt,Wn))}),Object.keys(xn.attributes).forEach(function(vr){var tr=xn.attributes[vr].append(Gt,Wn),Cn=Gt.scopeAttrib(vr);Object.keys(new Sr).forEach(function(ar){Wn.set(Cn,"."+ar,tr[ar])})}),xn.scopeVAO&&Wn.set(jr.vao,".targetVAO",xn.scopeVAO.append(Gt,Wn));function er(vr){var tr=xn.shader[vr];tr&&Wn.set(jr.shader,"."+vr,tr.append(Gt,Wn))}er(Dc),er(xf),Object.keys(xn.state).length>0&&(Wn(Dr,".dirty=true;"),Wn.exit(Dr,".dirty=true;")),Wn("a1(",Gt.shared.context,",a0,",Gt.batchId,");")}function Pa(Gt){if(!(typeof Gt!="object"||Hs(Gt))){for(var xn=Object.keys(Gt),Wn=0;Wn<xn.length;++Wn)if(Ir.isDynamic(Gt[xn[Wn]]))return!0;return!1}}function Vo(Gt,xn,Wn){var jr=xn.static[Wn];if(!jr||!Pa(jr))return;var Dr=Gt.global,er=Object.keys(jr),vr=!1,tr=!1,Cn=!1,ar=Gt.global.def("{}");er.forEach(function(pr){var Qr=jr[pr];if(Ir.isDynamic(Qr)){typeof Qr=="function"&&(Qr=jr[pr]=Ir.unbox(Qr));var ti=Uf(Qr,null);vr=vr||ti.thisDep,Cn=Cn||ti.propDep,tr=tr||ti.contextDep}else{switch(Dr(ar,".",pr,"="),typeof Qr){case"number":Dr(Qr);break;case"string":Dr('"',Qr,'"');break;case"object":Array.isArray(Qr)&&Dr("[",Qr.join(),"]");break;default:Dr(Gt.link(Qr));break}Dr(";")}});function gn(pr,Qr){er.forEach(function(ti){var Li=jr[ti];if(Ir.isDynamic(Li)){var Si=pr.invoke(Qr,Li);Qr(ar,".",ti,"=",Si,";")}})}xn.dynamic[Wn]=new Ir.DynamicVariable(Qt,{thisDep:vr,contextDep:tr,propDep:Cn,ref:ar,append:gn}),delete xn.static[Wn]}function Js(Gt,xn,Wn,jr,Dr){var er=io();er.stats=er.link(Dr),Object.keys(xn.static).forEach(function(tr){Vo(er,xn,tr)}),_g.forEach(function(tr){Vo(er,Gt,tr)});var vr=Nl(Gt,xn,Wn,jr,er);return wl(er,vr),Fr(er,vr),Kr(er,vr),er.compile()}return{next:ba,current:Oi,procs:function(){var Gt=io(),xn=Gt.proc("poll"),Wn=Gt.proc("refresh"),jr=Gt.block();xn(jr),Wn(jr);var Dr=Gt.shared,er=Dr.gl,vr=Dr.next,tr=Dr.current;jr(tr,".dirty=false;"),Yu(Gt,xn),Yu(Gt,Wn,null,!0);var Cn;Vi&&(Cn=Gt.link(Vi)),Vn.oes_vertex_array_object&&Wn(Gt.link(Vn.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ar=0;ar<$r.maxAttributes;++ar){var gn=Wn.def(Dr.attributes,"[",ar,"]"),pr=Gt.cond(gn,".buffer");pr.then(er,".enableVertexAttribArray(",ar,");",er,".bindBuffer(",Gp,",",gn,".buffer.buffer);",er,".vertexAttribPointer(",ar,",",gn,".size,",gn,".type,",gn,".normalized,",gn,".stride,",gn,".offset);").else(er,".disableVertexAttribArray(",ar,");",er,".vertexAttrib4f(",ar,",",gn,".x,",gn,".y,",gn,".z,",gn,".w);",gn,".buffer=null;"),Wn(pr),Vi&&Wn(Cn,".vertexAttribDivisorANGLE(",ar,",",gn,".divisor);")}return Wn(Gt.shared.vao,".currentVAO=null;",Gt.shared.vao,".setVAO(",Gt.shared.vao,".targetVAO);"),Object.keys(va).forEach(function(Qr){var ti=va[Qr],Li=jr.def(vr,".",Qr),Si=Gt.block();Si("if(",Li,"){",er,".enable(",ti,")}else{",er,".disable(",ti,")}",tr,".",Qr,"=",Li,";"),Wn(Si),xn("if(",Li,"!==",tr,".",Qr,"){",Si,"}")}),Object.keys(Ri).forEach(function(Qr){var ti=Ri[Qr],Li=Oi[Qr],Si,Zi,Va=Gt.block();if(Va(er,".",ti,"("),Hs(Li)){var Da=Li.length;Si=Gt.global.def(vr,".",Qr),Zi=Gt.global.def(tr,".",Qr),Va(In(Da,function(Ha){return Si+"["+Ha+"]"}),");",In(Da,function(Ha){return Zi+"["+Ha+"]="+Si+"["+Ha+"];"}).join("")),xn("if(",In(Da,function(Ha){return Si+"["+Ha+"]!=="+Zi+"["+Ha+"]"}).join("||"),"){",Va,"}")}else Si=jr.def(vr,".",Qr),Zi=jr.def(tr,".",Qr),Va(Si,");",tr,".",Qr,"=",Si,";"),xn("if(",Si,"!==",Zi,"){",Va,"}");Wn(Va)}),Gt.compile()}(),compile:Js}}function bv(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var t0=34918,ky=34919,Tg=35007,xv=function(et,vn){if(!vn.ext_disjoint_timer_query)return null;var Vn=[];function $r(){return Vn.pop()||vn.ext_disjoint_timer_query.createQueryEXT()}function di(Vi){Vn.push(Vi)}var Vr=[];function Rr(Vi){var xa=$r();vn.ext_disjoint_timer_query.beginQueryEXT(Tg,xa),Vr.push(xa),Ui(Vr.length-1,Vr.length,Vi)}function Yi(){vn.ext_disjoint_timer_query.endQueryEXT(Tg)}function ki(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var zi=[];function qi(){return zi.pop()||new ki}function ia(Vi){zi.push(Vi)}var Ei=[];function Ui(Vi,xa,Oi){var ba=qi();ba.startQueryIndex=Vi,ba.endQueryIndex=xa,ba.sum=0,ba.stats=Oi,Ei.push(ba)}var ta=[],Sr=[];function ri(){var Vi,xa,Oi=Vr.length;if(Oi!==0){Sr.length=Math.max(Sr.length,Oi+1),ta.length=Math.max(ta.length,Oi+1),ta[0]=0,Sr[0]=0;var ba=0;for(Vi=0,xa=0;xa<Vr.length;++xa){var Hi=Vr[xa];vn.ext_disjoint_timer_query.getQueryObjectEXT(Hi,ky)?(ba+=vn.ext_disjoint_timer_query.getQueryObjectEXT(Hi,t0),di(Hi)):Vr[Vi++]=Hi,ta[xa+1]=ba,Sr[xa+1]=Vi}for(Vr.length=Vi,Vi=0,xa=0;xa<Ei.length;++xa){var va=Ei[xa],Ri=va.startQueryIndex,ji=va.endQueryIndex;va.sum+=ta[ji]-ta[Ri];var ro=Sr[Ri],wo=Sr[ji];wo===ro?(va.stats.gpuTime+=va.sum/1e6,ia(va)):(va.startQueryIndex=ro,va.endQueryIndex=wo,Ei[Vi++]=va)}Ei.length=Vi}}return{beginQuery:Rr,endQuery:Yi,pushScopeStats:Ui,update:ri,getNumPendingQueries:function(){return Vr.length},clear:function(){Vn.push.apply(Vn,Vr);for(var Vi=0;Vi<Vn.length;Vi++)vn.ext_disjoint_timer_query.deleteQueryEXT(Vn[Vi]);Vr.length=0,Vn.length=0},restore:function(){Vr.length=0,Vn.length=0}}},Mm=16384,zc=256,o1=1024,n0=34962,Ag="webglcontextlost",Ly="webglcontextrestored",Cg=1,Og=2,s1=3;function r0(et,vn){for(var Vn=0;Vn<et.length;++Vn)if(et[Vn]===vn)return Vn;return-1}function Rm(et){var vn=Dn(et);if(!vn)return null;var Vn=vn.gl,$r=Vn.getContextAttributes(),di=Vn.isContextLost(),Vr=fr(Vn,vn);if(!Vr)return null;var Rr=bt(),Yi=bv(),ki=Vr.extensions,zi=xv(Vn,ki),qi=Yr(),ia=Vn.drawingBufferWidth,Ei=Vn.drawingBufferHeight,Ui={tick:0,time:0,viewportWidth:ia,viewportHeight:Ei,framebufferWidth:ia,framebufferHeight:Ei,drawingBufferWidth:ia,drawingBufferHeight:Ei,pixelRatio:vn.pixelRatio},ta={},Sr={elements:null,primitive:4,count:-1,offset:0,instances:-1},ri=Ae(Vn,ki),Vi=Od(Vn,Yi,vn,Oi),xa=At(Vn,ki,ri,Yi,Vi);function Oi(mo){return xa.destroyBuffer(mo)}var ba=od(Vn,ki,Vi,Yi),Hi=Rn(Vn,Rr,Yi,vn),va=La(Vn,ki,ri,function(){ro.procs.poll()},Ui,Yi,vn),Ri=No(Vn,ki,ri,Yi,vn),ji=Y(Vn,ki,ri,va,Ri,Yi),ro=Ps(Vn,Rr,ki,ri,Vi,ba,va,ji,ta,xa,Hi,Sr,Ui,zi,vn),wo=Or(Vn,ji,ro.procs.poll,Ui,$r,ki,ri),ma=ro.next,Wi=Vn.canvas,yi=[],io=[],ce=[],Aa=[vn.onDestroy],Bo=null;function nr(){if(yi.length===0){zi&&zi.update(),Bo=null;return}Bo=Nr.next(nr),Uc();for(var mo=yi.length-1;mo>=0;--mo){var ls=yi[mo];ls&&ls(Ui,null,0)}Vn.flush(),zi&&zi.update()}function ni(){!Bo&&yi.length>0&&(Bo=Nr.next(nr))}function us(){Bo&&(Nr.cancel(nr),Bo=null)}function il(mo){mo.preventDefault(),di=!0,us(),io.forEach(function(ls){ls()})}function $l(mo){Vn.getError(),di=!1,Vr.restore(),Hi.restore(),Vi.restore(),va.restore(),Ri.restore(),ji.restore(),xa.restore(),zi&&zi.restore(),ro.procs.refresh(),ni(),ce.forEach(function(ls){ls()})}Wi&&(Wi.addEventListener(Ag,il,!1),Wi.addEventListener(Ly,$l,!1));function hs(){yi.length=0,us(),Wi&&(Wi.removeEventListener(Ag,il),Wi.removeEventListener(Ly,$l)),Hi.clear(),ji.clear(),Ri.clear(),va.clear(),ba.clear(),Vi.clear(),xa.clear(),zi&&zi.clear(),Aa.forEach(function(mo){mo()})}function ml(mo){Ee(!!mo,"invalid args to regl({...})"),Ee.type(mo,"object","invalid args to regl({...})");function ls(Dr){var er=D({},Dr);delete er.uniforms,delete er.attributes,delete er.context,delete er.vao,"stencil"in er&&er.stencil.op&&(er.stencil.opBack=er.stencil.opFront=er.stencil.op,delete er.stencil.op);function vr(tr){if(tr in er){var Cn=er[tr];delete er[tr],Object.keys(Cn).forEach(function(ar){er[tr+"."+ar]=Cn[ar]})}}return vr("blend"),vr("depth"),vr("cull"),vr("stencil"),vr("polygonOffset"),vr("scissor"),vr("sample"),"vao"in Dr&&(er.vao=Dr.vao),er}function Ss(Dr){var er={},vr={};return Object.keys(Dr).forEach(function(tr){var Cn=Dr[tr];Ir.isDynamic(Cn)?vr[tr]=Ir.unbox(Cn,tr):er[tr]=Cn}),{dynamic:vr,static:er}}var wl=Ss(mo.context||{}),vd=Ss(mo.uniforms||{}),Nn=Ss(mo.attributes||{}),Kr=Ss(ls(mo)),Fr={gpuTime:0,cpuTime:0,count:0},Pa=ro.compile(Kr,Nn,vd,wl,Fr),Vo=Pa.draw,Js=Pa.batch,Gt=Pa.scope,xn=[];function Wn(Dr){for(;xn.length<Dr;)xn.push(null);return xn}function jr(Dr,er){var vr;if(di&&Ee.raise("context lost"),typeof Dr=="function")return Gt.call(this,null,Dr,0);if(typeof er=="function")if(typeof Dr=="number")for(vr=0;vr<Dr;++vr)Gt.call(this,null,er,vr);else if(Array.isArray(Dr))for(vr=0;vr<Dr.length;++vr)Gt.call(this,Dr[vr],er,vr);else return Gt.call(this,Dr,er,0);else if(typeof Dr=="number"){if(Dr>0)return Js.call(this,Wn(Dr|0),Dr|0)}else if(Array.isArray(Dr)){if(Dr.length)return Js.call(this,Dr,Dr.length)}else return Vo.call(this,Dr)}return D(jr,{stats:Fr})}var lu=ji.setFBO=ml({framebuffer:Ir.define.call(null,Cg,"framebuffer")});function Nl(mo,ls){var Ss=0;ro.procs.poll();var wl=ls.color;wl&&(Vn.clearColor(+wl[0]||0,+wl[1]||0,+wl[2]||0,+wl[3]||0),Ss|=Mm),"depth"in ls&&(Vn.clearDepth(+ls.depth),Ss|=zc),"stencil"in ls&&(Vn.clearStencil(ls.stencil|0),Ss|=o1),Ee(!!Ss,"called regl.clear with no buffer specified"),Vn.clear(Ss)}function Bl(mo){if(Ee(typeof mo=="object"&&mo,"regl.clear() takes an object as input"),"framebuffer"in mo)if(mo.framebuffer&&mo.framebuffer_reglType==="framebufferCube")for(var ls=0;ls<6;++ls)lu(D({framebuffer:mo.framebuffer.faces[ls]},mo),Nl);else lu(mo,Nl);else Nl(null,mo)}function Yu(mo){Ee.type(mo,"function","regl.frame() callback must be a function"),yi.push(mo);function ls(){var Ss=r0(yi,mo);Ee(Ss>=0,"cannot cancel a frame twice");function wl(){var vd=r0(yi,wl);yi[vd]=yi[yi.length-1],yi.length-=1,yi.length<=0&&us()}yi[Ss]=wl}return ni(),{cancel:ls}}function Gl(){var mo=ma.viewport,ls=ma.scissor_box;mo[0]=mo[1]=ls[0]=ls[1]=0,Ui.viewportWidth=Ui.framebufferWidth=Ui.drawingBufferWidth=mo[2]=ls[2]=Vn.drawingBufferWidth,Ui.viewportHeight=Ui.framebufferHeight=Ui.drawingBufferHeight=mo[3]=ls[3]=Vn.drawingBufferHeight}function Uc(){Ui.tick+=1,Ui.time=Zo(),Gl(),ro.procs.poll()}function Sl(){Gl(),ro.procs.refresh(),zi&&zi.update()}function Zo(){return(Yr()-qi)/1e3}Sl();function Ec(mo,ls){Ee.type(ls,"function","listener callback must be a function");var Ss;switch(mo){case"frame":return Yu(ls);case"lost":Ss=io;break;case"restore":Ss=ce;break;case"destroy":Ss=Aa;break;default:Ee.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ss.push(ls),{cancel:function(){for(var wl=0;wl<Ss.length;++wl)if(Ss[wl]===ls){Ss[wl]=Ss[Ss.length-1],Ss.pop();return}}}}var Is=D(ml,{clear:Bl,prop:Ir.define.bind(null,Cg),context:Ir.define.bind(null,Og),this:Ir.define.bind(null,s1),draw:ml({}),buffer:function(mo){return Vi.create(mo,n0,!1,!1)},elements:function(mo){return ba.create(mo,!1)},texture:va.create2D,cube:va.createCube,renderbuffer:Ri.create,framebuffer:ji.create,framebufferCube:ji.createCube,vao:xa.createVAO,attributes:$r,frame:Yu,on:Ec,limits:ri,hasExtension:function(mo){return ri.extensions.indexOf(mo.toLowerCase())>=0},read:wo,destroy:hs,_gl:Vn,_refresh:Sl,poll:function(){Uc(),zi&&zi.update()},now:Zo,stats:Yi});return vn.onDone(null,Is),Is}return Rm})},86851:function(It,G,D){"use strict";var ee=D(89594),ae=Array.prototype.concat,T=Array.prototype.slice,ne=It.exports=function(ge){for(var pe=[],Ce=0,he=ge.length;Ce<he;Ce++){var st=ge[Ce];ee(st)?pe=ae.call(pe,T.call(st)):pe.push(st)}return pe};ne.wrap=function(Q){return function(){return Q(ne(arguments))}}},89594:function(It){It.exports=function(D){return!D||typeof D=="string"?!1:D instanceof Array||Array.isArray(D)||D.length>=0&&(D.splice instanceof Function||Object.getOwnPropertyDescriptor(D,D.length-1)&&D.constructor.name!=="String")}},69848:function(It){(function(G,D){It.exports=D()})(this,function(){"use strict";function G(Ze,Ie,Qe,it,De,cn){if(!(De-it<=Qe)){var qe=it+De>>1;D(Ze,Ie,qe,it,De,cn%2),G(Ze,Ie,Qe,it,qe-1,cn+1),G(Ze,Ie,Qe,qe+1,De,cn+1)}}function D(Ze,Ie,Qe,it,De,cn){for(;De>it;){if(De-it>600){var qe=De-it+1,Pt=Qe-it+1,Le=Math.log(qe),pt=.5*Math.exp(2*Le/3),at=.5*Math.sqrt(Le*pt*(qe-pt)/qe)*(Pt-qe/2<0?-1:1),nt=Math.max(it,Math.floor(Qe-Pt*pt/qe+at)),Ct=Math.min(De,Math.floor(Qe+(qe-Pt)*pt/qe+at));D(Ze,Ie,Qe,nt,Ct,cn)}var rt=Ie[2*Qe+cn],vt=it,Ve=De;for(ee(Ze,Ie,it,Qe),Ie[2*De+cn]>rt&&ee(Ze,Ie,it,De);vt<Ve;){for(ee(Ze,Ie,vt,Ve),vt++,Ve--;Ie[2*vt+cn]<rt;)vt++;for(;Ie[2*Ve+cn]>rt;)Ve--}Ie[2*it+cn]===rt?ee(Ze,Ie,it,Ve):(Ve++,ee(Ze,Ie,Ve,De)),Ve<=Qe&&(it=Ve+1),Qe<=Ve&&(De=Ve-1)}}function ee(Ze,Ie,Qe,it){ae(Ze,Qe,it),ae(Ie,2*Qe,2*it),ae(Ie,2*Qe+1,2*it+1)}function ae(Ze,Ie,Qe){var it=Ze[Ie];Ze[Ie]=Ze[Qe],Ze[Qe]=it}function T(Ze,Ie,Qe,it,De,cn,qe){for(var Pt=[0,Ze.length-1,0],Le=[],pt,at;Pt.length;){var nt=Pt.pop(),Ct=Pt.pop(),rt=Pt.pop();if(Ct-rt<=qe){for(var vt=rt;vt<=Ct;vt++)pt=Ie[2*vt],at=Ie[2*vt+1],pt>=Qe&&pt<=De&&at>=it&&at<=cn&&Le.push(Ze[vt]);continue}var Ve=Math.floor((rt+Ct)/2);pt=Ie[2*Ve],at=Ie[2*Ve+1],pt>=Qe&&pt<=De&&at>=it&&at<=cn&&Le.push(Ze[Ve]);var hn=(nt+1)%2;(nt===0?Qe<=pt:it<=at)&&(Pt.push(rt),Pt.push(Ve-1),Pt.push(hn)),(nt===0?De>=pt:cn>=at)&&(Pt.push(Ve+1),Pt.push(Ct),Pt.push(hn))}return Le}function ne(Ze,Ie,Qe,it,De,cn){for(var qe=[0,Ze.length-1,0],Pt=[],Le=De*De;qe.length;){var pt=qe.pop(),at=qe.pop(),nt=qe.pop();if(at-nt<=cn){for(var Ct=nt;Ct<=at;Ct++)Q(Ie[2*Ct],Ie[2*Ct+1],Qe,it)<=Le&&Pt.push(Ze[Ct]);continue}var rt=Math.floor((nt+at)/2),vt=Ie[2*rt],Ve=Ie[2*rt+1];Q(vt,Ve,Qe,it)<=Le&&Pt.push(Ze[rt]);var hn=(pt+1)%2;(pt===0?Qe-De<=vt:it-De<=Ve)&&(qe.push(nt),qe.push(rt-1),qe.push(hn)),(pt===0?Qe+De>=vt:it+De>=Ve)&&(qe.push(rt+1),qe.push(at),qe.push(hn))}return Pt}function Q(Ze,Ie,Qe,it){var De=Ze-Qe,cn=Ie-it;return De*De+cn*cn}var ge=function(Ze){return Ze[0]},pe=function(Ze){return Ze[1]},Ce=function(Ie,Qe,it,De,cn){Qe===void 0&&(Qe=ge),it===void 0&&(it=pe),De===void 0&&(De=64),cn===void 0&&(cn=Float64Array),this.nodeSize=De,this.points=Ie;for(var qe=Ie.length<65536?Uint16Array:Uint32Array,Pt=this.ids=new qe(Ie.length),Le=this.coords=new cn(Ie.length*2),pt=0;pt<Ie.length;pt++)Pt[pt]=pt,Le[2*pt]=Qe(Ie[pt]),Le[2*pt+1]=it(Ie[pt]);G(Pt,Le,De,0,Pt.length-1,0)};Ce.prototype.range=function(Ie,Qe,it,De){return T(this.ids,this.coords,Ie,Qe,it,De,this.nodeSize)},Ce.prototype.within=function(Ie,Qe,it){return ne(this.ids,this.coords,Ie,Qe,it,this.nodeSize)};var he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ze){return Ze}},st=Math.fround||function(Ze){return function(Ie){return Ze[0]=+Ie,Ze[0]}}(new Float32Array(1)),re=function(Ie){this.options=Wt(Object.create(he),Ie),this.trees=new Array(this.options.maxZoom+1)};re.prototype.load=function(Ie){var Qe=this.options,it=Qe.log,De=Qe.minZoom,cn=Qe.maxZoom,qe=Qe.nodeSize;it&&console.time("total time");var Pt="prepare "+Ie.length+" points";it&&console.time(Pt),this.points=Ie;for(var Le=[],pt=0;pt<Ie.length;pt++)Ie[pt].geometry&&Le.push(se(Ie[pt],pt));this.trees[cn+1]=new Ce(Le,Rt,Tt,qe,Float32Array),it&&console.timeEnd(Pt);for(var at=cn;at>=De;at--){var nt=+Date.now();Le=this._cluster(Le,at),this.trees[at]=new Ce(Le,Rt,Tt,qe,Float32Array),it&&console.log("z%d: %d clusters in %dms",at,Le.length,+Date.now()-nt)}return it&&console.timeEnd("total time"),this},re.prototype.getClusters=function(Ie,Qe){var it=((Ie[0]+180)%360+360)%360-180,De=Math.max(-90,Math.min(90,Ie[1])),cn=Ie[2]===180?180:((Ie[2]+180)%360+360)%360-180,qe=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)it=-180,cn=180;else if(it>cn){var Pt=this.getClusters([it,De,180,qe],Qe),Le=this.getClusters([-180,De,cn,qe],Qe);return Pt.concat(Le)}for(var pt=this.trees[this._limitZoom(Qe)],at=pt.range(le(it),Ue(qe),le(cn),Ue(De)),nt=[],Ct=0,rt=at;Ct<rt.length;Ct+=1){var vt=rt[Ct],Ve=pt.points[vt];nt.push(Ve.numPoints?de(Ve):this.points[Ve.index])}return nt},re.prototype.getChildren=function(Ie){var Qe=this._getOriginId(Ie),it=this._getOriginZoom(Ie),De="No cluster with the specified id.",cn=this.trees[it];if(!cn)throw new Error(De);var qe=cn.points[Qe];if(!qe)throw new Error(De);for(var Pt=this.options.radius/(this.options.extent*Math.pow(2,it-1)),Le=cn.within(qe.x,qe.y,Pt),pt=[],at=0,nt=Le;at<nt.length;at+=1){var Ct=nt[at],rt=cn.points[Ct];rt.parentId===Ie&&pt.push(rt.numPoints?de(rt):this.points[rt.index])}if(pt.length===0)throw new Error(De);return pt},re.prototype.getLeaves=function(Ie,Qe,it){Qe=Qe||10,it=it||0;var De=[];return this._appendLeaves(De,Ie,Qe,it,0),De},re.prototype.getTile=function(Ie,Qe,it){var De=this.trees[this._limitZoom(Ie)],cn=Math.pow(2,Ie),qe=this.options,Pt=qe.extent,Le=qe.radius,pt=Le/Pt,at=(it-pt)/cn,nt=(it+1+pt)/cn,Ct={features:[]};return this._addTileFeatures(De.range((Qe-pt)/cn,at,(Qe+1+pt)/cn,nt),De.points,Qe,it,cn,Ct),Qe===0&&this._addTileFeatures(De.range(1-pt/cn,at,1,nt),De.points,cn,it,cn,Ct),Qe===cn-1&&this._addTileFeatures(De.range(0,at,pt/cn,nt),De.points,-1,it,cn,Ct),Ct.features.length?Ct:null},re.prototype.getClusterExpansionZoom=function(Ie){for(var Qe=this._getOriginZoom(Ie)-1;Qe<=this.options.maxZoom;){var it=this.getChildren(Ie);if(Qe++,it.length!==1)break;Ie=it[0].properties.cluster_id}return Qe},re.prototype._appendLeaves=function(Ie,Qe,it,De,cn){for(var qe=this.getChildren(Qe),Pt=0,Le=qe;Pt<Le.length;Pt+=1){var pt=Le[Pt],at=pt.properties;if(at&&at.cluster?cn+at.point_count<=De?cn+=at.point_count:cn=this._appendLeaves(Ie,at.cluster_id,it,De,cn):cn<De?cn++:Ie.push(pt),Ie.length===it)break}return cn},re.prototype._addTileFeatures=function(Ie,Qe,it,De,cn,qe){for(var Pt=0,Le=Ie;Pt<Le.length;Pt+=1){var pt=Le[Pt],at=Qe[pt],nt=at.numPoints,Ct=void 0,rt=void 0,vt=void 0;if(nt)Ct=xe(at),rt=at.x,vt=at.y;else{var Ve=this.points[at.index];Ct=Ve.properties,rt=le(Ve.geometry.coordinates[0]),vt=Ue(Ve.geometry.coordinates[1])}var hn={type:1,geometry:[[Math.round(this.options.extent*(rt*cn-it)),Math.round(this.options.extent*(vt*cn-De))]],tags:Ct},yn=void 0;nt?yn=at.id:this.options.generateId?yn=at.index:this.points[at.index].id&&(yn=this.points[at.index].id),yn!==void 0&&(hn.id=yn),qe.features.push(hn)}},re.prototype._limitZoom=function(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))},re.prototype._cluster=function(Ie,Qe){for(var it=[],De=this.options,cn=De.radius,qe=De.extent,Pt=De.reduce,Le=De.minPoints,pt=cn/(qe*Math.pow(2,Qe)),at=0;at<Ie.length;at++){var nt=Ie[at];if(!(nt.zoom<=Qe)){nt.zoom=Qe;for(var Ct=this.trees[Qe+1],rt=Ct.within(nt.x,nt.y,pt),vt=nt.numPoints||1,Ve=vt,hn=0,yn=rt;hn<yn.length;hn+=1){var ir=yn[hn],Qn=Ct.points[ir];Qn.zoom>Qe&&(Ve+=Qn.numPoints||1)}if(Ve>vt&&Ve>=Le){for(var Ut=nt.x*vt,En=nt.y*vt,Tn=Pt&&vt>1?this._map(nt,!0):null,lr=(at<<5)+(Qe+1)+this.points.length,ln=0,Lt=rt;ln<Lt.length;ln+=1){var bn=Lt[ln],Xe=Ct.points[bn];if(!(Xe.zoom<=Qe)){Xe.zoom=Qe;var Fe=Xe.numPoints||1;Ut+=Xe.x*Fe,En+=Xe.y*Fe,Xe.parentId=lr,Pt&&(Tn||(Tn=this._map(nt,!0)),Pt(Tn,this._map(Xe)))}}nt.parentId=lr,it.push(Se(Ut/Ve,En/Ve,lr,Ve,Tn))}else if(it.push(nt),Ve>1)for(var on=0,B=rt;on<B.length;on+=1){var be=B[on],yt=Ct.points[be];yt.zoom<=Qe||(yt.zoom=Qe,it.push(yt))}}}return it},re.prototype._getOriginId=function(Ie){return Ie-this.points.length>>5},re.prototype._getOriginZoom=function(Ie){return(Ie-this.points.length)%32},re.prototype._map=function(Ie,Qe){if(Ie.numPoints)return Qe?Wt({},Ie.properties):Ie.properties;var it=this.points[Ie.index].properties,De=this.options.map(it);return Qe&&De===it?Wt({},De):De};function Se(Ze,Ie,Qe,it,De){return{x:st(Ze),y:st(Ie),zoom:1/0,id:Qe,parentId:-1,numPoints:it,properties:De}}function se(Ze,Ie){var Qe=Ze.geometry.coordinates,it=Qe[0],De=Qe[1];return{x:st(le(it)),y:st(Ue(De)),zoom:1/0,index:Ie,parentId:-1}}function de(Ze){return{type:"Feature",id:Ze.id,properties:xe(Ze),geometry:{type:"Point",coordinates:[Et(Ze.x),mt(Ze.y)]}}}function xe(Ze){var Ie=Ze.numPoints,Qe=Ie>=1e4?Math.round(Ie/1e3)+"k":Ie>=1e3?Math.round(Ie/100)/10+"k":Ie;return Wt(Wt({},Ze.properties),{cluster:!0,cluster_id:Ze.id,point_count:Ie,point_count_abbreviated:Qe})}function le(Ze){return Ze/360+.5}function Ue(Ze){var Ie=Math.sin(Ze*Math.PI/180),Qe=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Qe<0?0:Qe>1?1:Qe}function Et(Ze){return(Ze-.5)*360}function mt(Ze){var Ie=(180-Ze*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Wt(Ze,Ie){for(var Qe in Ie)Ze[Qe]=Ie[Qe];return Ze}function Rt(Ze){return Ze.x}function Tt(Ze){return Ze.y}return re})},73897:function(It){function G(D,ee){(ee==null||ee>D.length)&&(ee=D.length);for(var ae=0,T=new Array(ee);ae<ee;ae++)T[ae]=D[ae];return T}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},85372:function(It){function G(D){if(Array.isArray(D))return D}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},63405:function(It,G,D){var ee=D(73897);function ae(T){if(Array.isArray(T))return ee(T)}It.exports=ae,It.exports.__esModule=!0,It.exports.default=It.exports},66115:function(It){function G(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},76976:function(It,G,D){var ee=D(73808),ae=D(69617),T=D(94993);function ne(Q,ge,pe){return ge=ee(ge),T(Q,ae()?Reflect.construct(ge,pe||[],ee(Q).constructor):ge.apply(Q,pe))}It.exports=ne,It.exports.__esModule=!0,It.exports.default=It.exports},56690:function(It){function G(D,ee){if(!(D instanceof ee))throw new TypeError("Cannot call a class as a function")}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},89728:function(It,G,D){var ee=D(64062);function ae(ne,Q){for(var ge=0;ge<Q.length;ge++){var pe=Q[ge];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ne,ee(pe.key),pe)}}function T(ne,Q,ge){return Q&&ae(ne.prototype,Q),ge&&ae(ne,ge),Object.defineProperty(ne,"prototype",{writable:!1}),ne}It.exports=T,It.exports.__esModule=!0,It.exports.default=It.exports},73808:function(It){function G(D){return It.exports=G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ae){return ae.__proto__||Object.getPrototypeOf(ae)},It.exports.__esModule=!0,It.exports.default=It.exports,G(D)}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},61655:function(It,G,D){var ee=D(6015);function ae(T,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(ne&&ne.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),ne&&ee(T,ne)}It.exports=ae,It.exports.__esModule=!0,It.exports.default=It.exports},75263:function(It,G,D){var ee=D(18698).default;function ae(ne){if(typeof WeakMap!="function")return null;var Q=new WeakMap,ge=new WeakMap;return(ae=function(Ce){return Ce?ge:Q})(ne)}function T(ne,Q){if(!Q&&ne&&ne.__esModule)return ne;if(ne===null||ee(ne)!="object"&&typeof ne!="function")return{default:ne};var ge=ae(Q);if(ge&&ge.has(ne))return ge.get(ne);var pe={__proto__:null},Ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in ne)if(he!=="default"&&Object.prototype.hasOwnProperty.call(ne,he)){var st=Ce?Object.getOwnPropertyDescriptor(ne,he):null;st&&(st.get||st.set)?Object.defineProperty(pe,he,st):pe[he]=ne[he]}return pe.default=ne,ge&&ge.set(ne,pe),pe}It.exports=T,It.exports.__esModule=!0,It.exports.default=It.exports},69617:function(It){function G(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(ee){}return(It.exports=G=function(){return!!D},It.exports.__esModule=!0,It.exports.default=It.exports)()}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},79498:function(It){function G(D){if(typeof Symbol!="undefined"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},68872:function(It){function G(D,ee){var ae=D==null?null:typeof Symbol!="undefined"&&D[Symbol.iterator]||D["@@iterator"];if(ae!=null){var T,ne,Q,ge,pe=[],Ce=!0,he=!1;try{if(Q=(ae=ae.call(D)).next,ee===0){if(Object(ae)!==ae)return;Ce=!1}else for(;!(Ce=(T=Q.call(ae)).done)&&(pe.push(T.value),pe.length!==ee);Ce=!0);}catch(st){he=!0,ne=st}finally{try{if(!Ce&&ae.return!=null&&(ge=ae.return(),Object(ge)!==ge))return}finally{if(he)throw ne}}return pe}}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},12218:function(It){function G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},42281:function(It){function G(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},94993:function(It,G,D){var ee=D(18698).default,ae=D(66115);function T(ne,Q){if(Q&&(ee(Q)==="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ae(ne)}It.exports=T,It.exports.__esModule=!0,It.exports.default=It.exports},17061:function(It,G,D){var ee=D(18698).default;function ae(){"use strict";It.exports=ae=function(){return ne},It.exports.__esModule=!0,It.exports.default=It.exports;var T,ne={},Q=Object.prototype,ge=Q.hasOwnProperty,pe=Object.defineProperty||function(Ct,rt,vt){Ct[rt]=vt.value},Ce=typeof Symbol=="function"?Symbol:{},he=Ce.iterator||"@@iterator",st=Ce.asyncIterator||"@@asyncIterator",re=Ce.toStringTag||"@@toStringTag";function Se(Ct,rt,vt){return Object.defineProperty(Ct,rt,{value:vt,enumerable:!0,configurable:!0,writable:!0}),Ct[rt]}try{Se({},"")}catch(Ct){Se=function(vt,Ve,hn){return vt[Ve]=hn}}function se(Ct,rt,vt,Ve){var hn=rt&&rt.prototype instanceof Wt?rt:Wt,yn=Object.create(hn.prototype),ir=new at(Ve||[]);return pe(yn,"_invoke",{value:qe(Ct,vt,ir)}),yn}function de(Ct,rt,vt){try{return{type:"normal",arg:Ct.call(rt,vt)}}catch(Ve){return{type:"throw",arg:Ve}}}ne.wrap=se;var xe="suspendedStart",le="suspendedYield",Ue="executing",Et="completed",mt={};function Wt(){}function Rt(){}function Tt(){}var Ze={};Se(Ze,he,function(){return this});var Ie=Object.getPrototypeOf,Qe=Ie&&Ie(Ie(nt([])));Qe&&Qe!==Q&&ge.call(Qe,he)&&(Ze=Qe);var it=Tt.prototype=Wt.prototype=Object.create(Ze);function De(Ct){["next","throw","return"].forEach(function(rt){Se(Ct,rt,function(vt){return this._invoke(rt,vt)})})}function cn(Ct,rt){function vt(hn,yn,ir,Qn){var Ut=de(Ct[hn],Ct,yn);if(Ut.type!=="throw"){var En=Ut.arg,Tn=En.value;return Tn&&ee(Tn)=="object"&&ge.call(Tn,"__await")?rt.resolve(Tn.__await).then(function(lr){vt("next",lr,ir,Qn)},function(lr){vt("throw",lr,ir,Qn)}):rt.resolve(Tn).then(function(lr){En.value=lr,ir(En)},function(lr){return vt("throw",lr,ir,Qn)})}Qn(Ut.arg)}var Ve;pe(this,"_invoke",{value:function(yn,ir){function Qn(){return new rt(function(Ut,En){vt(yn,ir,Ut,En)})}return Ve=Ve?Ve.then(Qn,Qn):Qn()}})}function qe(Ct,rt,vt){var Ve=xe;return function(hn,yn){if(Ve===Ue)throw new Error("Generator is already running");if(Ve===Et){if(hn==="throw")throw yn;return{value:T,done:!0}}for(vt.method=hn,vt.arg=yn;;){var ir=vt.delegate;if(ir){var Qn=Pt(ir,vt);if(Qn){if(Qn===mt)continue;return Qn}}if(vt.method==="next")vt.sent=vt._sent=vt.arg;else if(vt.method==="throw"){if(Ve===xe)throw Ve=Et,vt.arg;vt.dispatchException(vt.arg)}else vt.method==="return"&&vt.abrupt("return",vt.arg);Ve=Ue;var Ut=de(Ct,rt,vt);if(Ut.type==="normal"){if(Ve=vt.done?Et:le,Ut.arg===mt)continue;return{value:Ut.arg,done:vt.done}}Ut.type==="throw"&&(Ve=Et,vt.method="throw",vt.arg=Ut.arg)}}}function Pt(Ct,rt){var vt=rt.method,Ve=Ct.iterator[vt];if(Ve===T)return rt.delegate=null,vt==="throw"&&Ct.iterator.return&&(rt.method="return",rt.arg=T,Pt(Ct,rt),rt.method==="throw")||vt!=="return"&&(rt.method="throw",rt.arg=new TypeError("The iterator does not provide a '"+vt+"' method")),mt;var hn=de(Ve,Ct.iterator,rt.arg);if(hn.type==="throw")return rt.method="throw",rt.arg=hn.arg,rt.delegate=null,mt;var yn=hn.arg;return yn?yn.done?(rt[Ct.resultName]=yn.value,rt.next=Ct.nextLoc,rt.method!=="return"&&(rt.method="next",rt.arg=T),rt.delegate=null,mt):yn:(rt.method="throw",rt.arg=new TypeError("iterator result is not an object"),rt.delegate=null,mt)}function Le(Ct){var rt={tryLoc:Ct[0]};1 in Ct&&(rt.catchLoc=Ct[1]),2 in Ct&&(rt.finallyLoc=Ct[2],rt.afterLoc=Ct[3]),this.tryEntries.push(rt)}function pt(Ct){var rt=Ct.completion||{};rt.type="normal",delete rt.arg,Ct.completion=rt}function at(Ct){this.tryEntries=[{tryLoc:"root"}],Ct.forEach(Le,this),this.reset(!0)}function nt(Ct){if(Ct||Ct===""){var rt=Ct[he];if(rt)return rt.call(Ct);if(typeof Ct.next=="function")return Ct;if(!isNaN(Ct.length)){var vt=-1,Ve=function hn(){for(;++vt<Ct.length;)if(ge.call(Ct,vt))return hn.value=Ct[vt],hn.done=!1,hn;return hn.value=T,hn.done=!0,hn};return Ve.next=Ve}}throw new TypeError(ee(Ct)+" is not iterable")}return Rt.prototype=Tt,pe(it,"constructor",{value:Tt,configurable:!0}),pe(Tt,"constructor",{value:Rt,configurable:!0}),Rt.displayName=Se(Tt,re,"GeneratorFunction"),ne.isGeneratorFunction=function(Ct){var rt=typeof Ct=="function"&&Ct.constructor;return!!rt&&(rt===Rt||(rt.displayName||rt.name)==="GeneratorFunction")},ne.mark=function(Ct){return Object.setPrototypeOf?Object.setPrototypeOf(Ct,Tt):(Ct.__proto__=Tt,Se(Ct,re,"GeneratorFunction")),Ct.prototype=Object.create(it),Ct},ne.awrap=function(Ct){return{__await:Ct}},De(cn.prototype),Se(cn.prototype,st,function(){return this}),ne.AsyncIterator=cn,ne.async=function(Ct,rt,vt,Ve,hn){hn===void 0&&(hn=Promise);var yn=new cn(se(Ct,rt,vt,Ve),hn);return ne.isGeneratorFunction(rt)?yn:yn.next().then(function(ir){return ir.done?ir.value:yn.next()})},De(it),Se(it,re,"Generator"),Se(it,he,function(){return this}),Se(it,"toString",function(){return"[object Generator]"}),ne.keys=function(Ct){var rt=Object(Ct),vt=[];for(var Ve in rt)vt.push(Ve);return vt.reverse(),function hn(){for(;vt.length;){var yn=vt.pop();if(yn in rt)return hn.value=yn,hn.done=!1,hn}return hn.done=!0,hn}},ne.values=nt,at.prototype={constructor:at,reset:function(rt){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(pt),!rt)for(var vt in this)vt.charAt(0)==="t"&&ge.call(this,vt)&&!isNaN(+vt.slice(1))&&(this[vt]=T)},stop:function(){this.done=!0;var rt=this.tryEntries[0].completion;if(rt.type==="throw")throw rt.arg;return this.rval},dispatchException:function(rt){if(this.done)throw rt;var vt=this;function Ve(En,Tn){return ir.type="throw",ir.arg=rt,vt.next=En,Tn&&(vt.method="next",vt.arg=T),!!Tn}for(var hn=this.tryEntries.length-1;hn>=0;--hn){var yn=this.tryEntries[hn],ir=yn.completion;if(yn.tryLoc==="root")return Ve("end");if(yn.tryLoc<=this.prev){var Qn=ge.call(yn,"catchLoc"),Ut=ge.call(yn,"finallyLoc");if(Qn&&Ut){if(this.prev<yn.catchLoc)return Ve(yn.catchLoc,!0);if(this.prev<yn.finallyLoc)return Ve(yn.finallyLoc)}else if(Qn){if(this.prev<yn.catchLoc)return Ve(yn.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<yn.finallyLoc)return Ve(yn.finallyLoc)}}}},abrupt:function(rt,vt){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var hn=this.tryEntries[Ve];if(hn.tryLoc<=this.prev&&ge.call(hn,"finallyLoc")&&this.prev<hn.finallyLoc){var yn=hn;break}}yn&&(rt==="break"||rt==="continue")&&yn.tryLoc<=vt&&vt<=yn.finallyLoc&&(yn=null);var ir=yn?yn.completion:{};return ir.type=rt,ir.arg=vt,yn?(this.method="next",this.next=yn.finallyLoc,mt):this.complete(ir)},complete:function(rt,vt){if(rt.type==="throw")throw rt.arg;return rt.type==="break"||rt.type==="continue"?this.next=rt.arg:rt.type==="return"?(this.rval=this.arg=rt.arg,this.method="return",this.next="end"):rt.type==="normal"&&vt&&(this.next=vt),mt},finish:function(rt){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var Ve=this.tryEntries[vt];if(Ve.finallyLoc===rt)return this.complete(Ve.completion,Ve.afterLoc),pt(Ve),mt}},catch:function(rt){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var Ve=this.tryEntries[vt];if(Ve.tryLoc===rt){var hn=Ve.completion;if(hn.type==="throw"){var yn=hn.arg;pt(Ve)}return yn}}throw new Error("illegal catch attempt")},delegateYield:function(rt,vt,Ve){return this.delegate={iterator:nt(rt),resultName:vt,nextLoc:Ve},this.method==="next"&&(this.arg=T),mt}},ne}It.exports=ae,It.exports.__esModule=!0,It.exports.default=It.exports},6015:function(It){function G(D,ee){return It.exports=G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,ne){return T.__proto__=ne,T},It.exports.__esModule=!0,It.exports.default=It.exports,G(D,ee)}It.exports=G,It.exports.__esModule=!0,It.exports.default=It.exports},27424:function(It,G,D){var ee=D(85372),ae=D(68872),T=D(86116),ne=D(12218);function Q(ge,pe){return ee(ge)||ae(ge,pe)||T(ge,pe)||ne()}It.exports=Q,It.exports.__esModule=!0,It.exports.default=It.exports},51589:function(It,G,D){var ee=D(85372),ae=D(79498),T=D(86116),ne=D(12218);function Q(ge){return ee(ge)||ae(ge)||T(ge)||ne()}It.exports=Q,It.exports.__esModule=!0,It.exports.default=It.exports},861:function(It,G,D){var ee=D(63405),ae=D(79498),T=D(86116),ne=D(42281);function Q(ge){return ee(ge)||ae(ge)||T(ge)||ne()}It.exports=Q,It.exports.__esModule=!0,It.exports.default=It.exports},86116:function(It,G,D){var ee=D(73897);function ae(T,ne){if(T){if(typeof T=="string")return ee(T,ne);var Q=Object.prototype.toString.call(T).slice(8,-1);if(Q==="Object"&&T.constructor&&(Q=T.constructor.name),Q==="Map"||Q==="Set")return Array.from(T);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return ee(T,ne)}}It.exports=ae,It.exports.__esModule=!0,It.exports.default=It.exports},64687:function(It,G,D){var ee=D(17061)();It.exports=ee;try{regeneratorRuntime=ee}catch(ae){typeof globalThis=="object"?globalThis.regeneratorRuntime=ee:Function("r","regeneratorRuntime = r")(ee)}},73237:function(It,G,D){"use strict";D.d(G,{Z:function(){return T}});var ee=D(61120);function ae(ne,Q){for(;!Object.prototype.hasOwnProperty.call(ne,Q)&&(ne=(0,ee.Z)(ne),ne!==null););return ne}function T(){return typeof Reflect!="undefined"&&Reflect.get?T=Reflect.get.bind():T=function(Q,ge,pe){var Ce=ae(Q,ge);if(Ce){var he=Object.getOwnPropertyDescriptor(Ce,ge);return he.get?he.get.call(arguments.length<3?Q:pe):he.value}},T.apply(this,arguments)}},1449:function(It,G,D){"use strict";D.d(G,{Tu:function(){return re},tw:function(){return le},uf:function(){return se},yu:function(){return he},zL:function(){return Q}});var ee=63710088e-1,ae={centimeters:ee*100,centimetres:ee*100,degrees:ee/111325,feet:ee*3.28084,inches:ee*39.37,kilometers:ee/1e3,kilometres:ee/1e3,meters:ee,metres:ee,miles:ee/1609.344,millimeters:ee*1e3,millimetres:ee*1e3,nauticalmiles:ee/1852,radians:1,yards:ee*1.0936},T={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ee,yards:1.0936133},ne={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Q(Le,pt,at){at===void 0&&(at={});var nt={type:"Feature"};return(at.id===0||at.id)&&(nt.id=at.id),at.bbox&&(nt.bbox=at.bbox),nt.properties=pt||{},nt.geometry=Le,nt}function ge(Le,pt,at){switch(at===void 0&&(at={}),Le){case"Point":return pe(pt).geometry;case"LineString":return re(pt).geometry;case"Polygon":return he(pt).geometry;case"MultiPoint":return xe(pt).geometry;case"MultiLineString":return de(pt).geometry;case"MultiPolygon":return le(pt).geometry;default:throw new Error(Le+" is invalid")}}function pe(Le,pt,at){if(at===void 0&&(at={}),!Le)throw new Error("coordinates is required");if(!Array.isArray(Le))throw new Error("coordinates must be an Array");if(Le.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!De(Le[0])||!De(Le[1]))throw new Error("coordinates must contain numbers");var nt={type:"Point",coordinates:Le};return Q(nt,pt,at)}function Ce(Le,pt,at){return at===void 0&&(at={}),se(Le.map(function(nt){return pe(nt,pt)}),at)}function he(Le,pt,at){at===void 0&&(at={});for(var nt=0,Ct=Le;nt<Ct.length;nt++){var rt=Ct[nt];if(rt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var vt=0;vt<rt[rt.length-1].length;vt++)if(rt[rt.length-1][vt]!==rt[0][vt])throw new Error("First and last Position are not equivalent.")}var Ve={type:"Polygon",coordinates:Le};return Q(Ve,pt,at)}function st(Le,pt,at){return at===void 0&&(at={}),se(Le.map(function(nt){return he(nt,pt)}),at)}function re(Le,pt,at){if(at===void 0&&(at={}),Le.length<2)throw new Error("coordinates must be an array of two or more positions");var nt={type:"LineString",coordinates:Le};return Q(nt,pt,at)}function Se(Le,pt,at){return at===void 0&&(at={}),se(Le.map(function(nt){return re(nt,pt)}),at)}function se(Le,pt){pt===void 0&&(pt={});var at={type:"FeatureCollection"};return pt.id&&(at.id=pt.id),pt.bbox&&(at.bbox=pt.bbox),at.features=Le,at}function de(Le,pt,at){at===void 0&&(at={});var nt={type:"MultiLineString",coordinates:Le};return Q(nt,pt,at)}function xe(Le,pt,at){at===void 0&&(at={});var nt={type:"MultiPoint",coordinates:Le};return Q(nt,pt,at)}function le(Le,pt,at){at===void 0&&(at={});var nt={type:"MultiPolygon",coordinates:Le};return Q(nt,pt,at)}function Ue(Le,pt,at){at===void 0&&(at={});var nt={type:"GeometryCollection",geometries:Le};return Q(nt,pt,at)}function Et(Le,pt){if(pt===void 0&&(pt=0),pt&&!(pt>=0))throw new Error("precision must be a positive number");var at=Math.pow(10,pt||0);return Math.round(Le*at)/at}function mt(Le,pt){pt===void 0&&(pt="kilometers");var at=ae[pt];if(!at)throw new Error(pt+" units is invalid");return Le*at}function Wt(Le,pt){pt===void 0&&(pt="kilometers");var at=ae[pt];if(!at)throw new Error(pt+" units is invalid");return Le/at}function Rt(Le,pt){return Ze(Wt(Le,pt))}function Tt(Le){var pt=Le%360;return pt<0&&(pt+=360),pt}function Ze(Le){var pt=Le%(2*Math.PI);return pt*180/Math.PI}function Ie(Le){var pt=Le%360;return pt*Math.PI/180}function Qe(Le,pt,at){if(pt===void 0&&(pt="kilometers"),at===void 0&&(at="kilometers"),!(Le>=0))throw new Error("length must be a positive number");return mt(Wt(Le,pt),at)}function it(Le,pt,at){if(pt===void 0&&(pt="meters"),at===void 0&&(at="kilometers"),!(Le>=0))throw new Error("area must be a positive number");var nt=ne[pt];if(!nt)throw new Error("invalid original units");var Ct=ne[at];if(!Ct)throw new Error("invalid final units");return Le/nt*Ct}function De(Le){return!isNaN(Le)&&Le!==null&&!Array.isArray(Le)}function cn(Le){return!!Le&&Le.constructor===Object}function qe(Le){if(!Le)throw new Error("bbox is required");if(!Array.isArray(Le))throw new Error("bbox must be an Array");if(Le.length!==4&&Le.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Le.forEach(function(pt){if(!De(pt))throw new Error("bbox must only contain numbers")})}function Pt(Le){if(!Le)throw new Error("id is required");if(["string","number"].indexOf(typeof Le)===-1)throw new Error("id must be a number or a string")}},39034:function(It,G,D){"use strict";D.d(G,{nG:function(){return re},pZ:function(){return ae}});var ee=D(1449);function ae(mt,Wt,Rt){if(mt!==null)for(var Tt,Ze,Ie,Qe,it,De,cn,qe=0,Pt=0,Le,pt=mt.type,at=pt==="FeatureCollection",nt=pt==="Feature",Ct=at?mt.features.length:1,rt=0;rt<Ct;rt++){cn=at?mt.features[rt].geometry:nt?mt.geometry:mt,Le=cn?cn.type==="GeometryCollection":!1,it=Le?cn.geometries.length:1;for(var vt=0;vt<it;vt++){var Ve=0,hn=0;if(Qe=Le?cn.geometries[vt]:cn,Qe!==null){De=Qe.coordinates;var yn=Qe.type;switch(qe=Rt&&(yn==="Polygon"||yn==="MultiPolygon")?1:0,yn){case null:break;case"Point":if(Wt(De,Pt,rt,Ve,hn)===!1)return!1;Pt++,Ve++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<De.length;Tt++){if(Wt(De[Tt],Pt,rt,Ve,hn)===!1)return!1;Pt++,yn==="MultiPoint"&&Ve++}yn==="LineString"&&Ve++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<De.length;Tt++){for(Ze=0;Ze<De[Tt].length-qe;Ze++){if(Wt(De[Tt][Ze],Pt,rt,Ve,hn)===!1)return!1;Pt++}yn==="MultiLineString"&&Ve++,yn==="Polygon"&&hn++}yn==="Polygon"&&Ve++;break;case"MultiPolygon":for(Tt=0;Tt<De.length;Tt++){for(hn=0,Ze=0;Ze<De[Tt].length;Ze++){for(Ie=0;Ie<De[Tt][Ze].length-qe;Ie++){if(Wt(De[Tt][Ze][Ie],Pt,rt,Ve,hn)===!1)return!1;Pt++}hn++}Ve++}break;case"GeometryCollection":for(Tt=0;Tt<Qe.geometries.length;Tt++)if(ae(Qe.geometries[Tt],Wt,Rt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(mt,Wt,Rt,Tt){var Ze=Rt;return ae(mt,function(Ie,Qe,it,De,cn){Qe===0&&Rt===void 0?Ze=Ie:Ze=Wt(Ze,Ie,Qe,it,De,cn)},Tt),Ze}function ne(mt,Wt){var Rt;switch(mt.type){case"FeatureCollection":for(Rt=0;Rt<mt.features.length&&Wt(mt.features[Rt].properties,Rt)!==!1;Rt++);break;case"Feature":Wt(mt.properties,0);break}}function Q(mt,Wt,Rt){var Tt=Rt;return ne(mt,function(Ze,Ie){Ie===0&&Rt===void 0?Tt=Ze:Tt=Wt(Tt,Ze,Ie)}),Tt}function ge(mt,Wt){if(mt.type==="Feature")Wt(mt,0);else if(mt.type==="FeatureCollection")for(var Rt=0;Rt<mt.features.length&&Wt(mt.features[Rt],Rt)!==!1;Rt++);}function pe(mt,Wt,Rt){var Tt=Rt;return ge(mt,function(Ze,Ie){Ie===0&&Rt===void 0?Tt=Ze:Tt=Wt(Tt,Ze,Ie)}),Tt}function Ce(mt){var Wt=[];return ae(mt,function(Rt){Wt.push(Rt)}),Wt}function he(mt,Wt){var Rt,Tt,Ze,Ie,Qe,it,De,cn,qe,Pt,Le=0,pt=mt.type==="FeatureCollection",at=mt.type==="Feature",nt=pt?mt.features.length:1;for(Rt=0;Rt<nt;Rt++){for(it=pt?mt.features[Rt].geometry:at?mt.geometry:mt,cn=pt?mt.features[Rt].properties:at?mt.properties:{},qe=pt?mt.features[Rt].bbox:at?mt.bbox:void 0,Pt=pt?mt.features[Rt].id:at?mt.id:void 0,De=it?it.type==="GeometryCollection":!1,Qe=De?it.geometries.length:1,Ze=0;Ze<Qe;Ze++){if(Ie=De?it.geometries[Ze]:it,Ie===null){if(Wt(null,Le,cn,qe,Pt)===!1)return!1;continue}switch(Ie.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Wt(Ie,Le,cn,qe,Pt)===!1)return!1;break}case"GeometryCollection":{for(Tt=0;Tt<Ie.geometries.length;Tt++)if(Wt(Ie.geometries[Tt],Le,cn,qe,Pt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Le++}}function st(mt,Wt,Rt){var Tt=Rt;return he(mt,function(Ze,Ie,Qe,it,De){Ie===0&&Rt===void 0?Tt=Ze:Tt=Wt(Tt,Ze,Ie,Qe,it,De)}),Tt}function re(mt,Wt){he(mt,function(Rt,Tt,Ze,Ie,Qe){var it=Rt===null?null:Rt.type;switch(it){case null:case"Point":case"LineString":case"Polygon":return Wt((0,ee.zL)(Rt,Ze,{bbox:Ie,id:Qe}),Tt,0)===!1?!1:void 0}var De;switch(it){case"MultiPoint":De="Point";break;case"MultiLineString":De="LineString";break;case"MultiPolygon":De="Polygon";break}for(var cn=0;cn<Rt.coordinates.length;cn++){var qe=Rt.coordinates[cn],Pt={type:De,coordinates:qe};if(Wt((0,ee.zL)(Pt,Ze),Tt,cn)===!1)return!1}})}function Se(mt,Wt,Rt){var Tt=Rt;return re(mt,function(Ze,Ie,Qe){Ie===0&&Qe===0&&Rt===void 0?Tt=Ze:Tt=Wt(Tt,Ze,Ie,Qe)}),Tt}function se(mt,Wt){re(mt,function(Rt,Tt,Ze){var Ie=0;if(Rt.geometry){var Qe=Rt.geometry.type;if(!(Qe==="Point"||Qe==="MultiPoint")){var it,De=0,cn=0,qe=0;if(ae(Rt,function(Pt,Le,pt,at,nt){if(it===void 0||Tt>De||at>cn||nt>qe){it=Pt,De=Tt,cn=at,qe=nt,Ie=0;return}var Ct=lineString([it,Pt],Rt.properties);if(Wt(Ct,Tt,Ze,nt,Ie)===!1)return!1;Ie++,it=Pt})===!1)return!1}}})}function de(mt,Wt,Rt){var Tt=Rt,Ze=!1;return se(mt,function(Ie,Qe,it,De,cn){Ze===!1&&Rt===void 0?Tt=Ie:Tt=Wt(Tt,Ie,Qe,it,De,cn),Ze=!0}),Tt}function xe(mt,Wt){if(!mt)throw new Error("geojson is required");re(mt,function(Rt,Tt,Ze){if(Rt.geometry!==null){var Ie=Rt.geometry.type,Qe=Rt.geometry.coordinates;switch(Ie){case"LineString":if(Wt(Rt,Tt,Ze,0,0)===!1)return!1;break;case"Polygon":for(var it=0;it<Qe.length;it++)if(Wt(lineString(Qe[it],Rt.properties),Tt,Ze,it)===!1)return!1;break}}})}function le(mt,Wt,Rt){var Tt=Rt;return xe(mt,function(Ze,Ie,Qe,it){Ie===0&&Rt===void 0?Tt=Ze:Tt=Wt(Tt,Ze,Ie,Qe,it)}),Tt}function Ue(mt,Wt){if(Wt=Wt||{},!isObject(Wt))throw new Error("options is invalid");var Rt=Wt.featureIndex||0,Tt=Wt.multiFeatureIndex||0,Ze=Wt.geometryIndex||0,Ie=Wt.segmentIndex||0,Qe=Wt.properties,it;switch(mt.type){case"FeatureCollection":Rt<0&&(Rt=mt.features.length+Rt),Qe=Qe||mt.features[Rt].properties,it=mt.features[Rt].geometry;break;case"Feature":Qe=Qe||mt.properties,it=mt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":it=mt;break;default:throw new Error("geojson is invalid")}if(it===null)return null;var De=it.coordinates;switch(it.type){case"Point":case"MultiPoint":return null;case"LineString":return Ie<0&&(Ie=De.length+Ie-1),lineString([De[Ie],De[Ie+1]],Qe,Wt);case"Polygon":return Ze<0&&(Ze=De.length+Ze),Ie<0&&(Ie=De[Ze].length+Ie-1),lineString([De[Ze][Ie],De[Ze][Ie+1]],Qe,Wt);case"MultiLineString":return Tt<0&&(Tt=De.length+Tt),Ie<0&&(Ie=De[Tt].length+Ie-1),lineString([De[Tt][Ie],De[Tt][Ie+1]],Qe,Wt);case"MultiPolygon":return Tt<0&&(Tt=De.length+Tt),Ze<0&&(Ze=De[Tt].length+Ze),Ie<0&&(Ie=De[Tt][Ze].length-Ie-1),lineString([De[Tt][Ze][Ie],De[Tt][Ze][Ie+1]],Qe,Wt)}throw new Error("geojson is invalid")}function Et(mt,Wt){if(Wt=Wt||{},!isObject(Wt))throw new Error("options is invalid");var Rt=Wt.featureIndex||0,Tt=Wt.multiFeatureIndex||0,Ze=Wt.geometryIndex||0,Ie=Wt.coordIndex||0,Qe=Wt.properties,it;switch(mt.type){case"FeatureCollection":Rt<0&&(Rt=mt.features.length+Rt),Qe=Qe||mt.features[Rt].properties,it=mt.features[Rt].geometry;break;case"Feature":Qe=Qe||mt.properties,it=mt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":it=mt;break;default:throw new Error("geojson is invalid")}if(it===null)return null;var De=it.coordinates;switch(it.type){case"Point":return point(De,Qe,Wt);case"MultiPoint":return Tt<0&&(Tt=De.length+Tt),point(De[Tt],Qe,Wt);case"LineString":return Ie<0&&(Ie=De.length+Ie),point(De[Ie],Qe,Wt);case"Polygon":return Ze<0&&(Ze=De.length+Ze),Ie<0&&(Ie=De[Ze].length+Ie),point(De[Ze][Ie],Qe,Wt);case"MultiLineString":return Tt<0&&(Tt=De.length+Tt),Ie<0&&(Ie=De[Tt].length+Ie),point(De[Tt][Ie],Qe,Wt);case"MultiPolygon":return Tt<0&&(Tt=De.length+Tt),Ze<0&&(Ze=De[Tt].length+Ze),Ie<0&&(Ie=De[Tt][Ze].length-Ie),point(De[Tt][Ze][Ie],Qe,Wt)}throw new Error("geojson is invalid")}},97582:function(It,G,D){"use strict";D.d(G,{CR:function(){return Ue},Jh:function(){return se},Q_:function(){return qe},XA:function(){return le},ZT:function(){return ae},_T:function(){return ne},ev:function(){return Wt},mG:function(){return Se},pi:function(){return T},pr:function(){return mt}});var ee=function(rt,vt){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ve,hn){Ve.__proto__=hn}||function(Ve,hn){for(var yn in hn)Object.prototype.hasOwnProperty.call(hn,yn)&&(Ve[yn]=hn[yn])},ee(rt,vt)};function ae(rt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Class extends value "+String(vt)+" is not a constructor or null");ee(rt,vt);function Ve(){this.constructor=rt}rt.prototype=vt===null?Object.create(vt):(Ve.prototype=vt.prototype,new Ve)}var T=function(){return T=Object.assign||function(vt){for(var Ve,hn=1,yn=arguments.length;hn<yn;hn++){Ve=arguments[hn];for(var ir in Ve)Object.prototype.hasOwnProperty.call(Ve,ir)&&(vt[ir]=Ve[ir])}return vt},T.apply(this,arguments)};function ne(rt,vt){var Ve={};for(var hn in rt)Object.prototype.hasOwnProperty.call(rt,hn)&&vt.indexOf(hn)<0&&(Ve[hn]=rt[hn]);if(rt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var yn=0,hn=Object.getOwnPropertySymbols(rt);yn<hn.length;yn++)vt.indexOf(hn[yn])<0&&Object.prototype.propertyIsEnumerable.call(rt,hn[yn])&&(Ve[hn[yn]]=rt[hn[yn]]);return Ve}function Q(rt,vt,Ve,hn){var yn=arguments.length,ir=yn<3?vt:hn===null?hn=Object.getOwnPropertyDescriptor(vt,Ve):hn,Qn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ir=Reflect.decorate(rt,vt,Ve,hn);else for(var Ut=rt.length-1;Ut>=0;Ut--)(Qn=rt[Ut])&&(ir=(yn<3?Qn(ir):yn>3?Qn(vt,Ve,ir):Qn(vt,Ve))||ir);return yn>3&&ir&&Object.defineProperty(vt,Ve,ir),ir}function ge(rt,vt){return function(Ve,hn){vt(Ve,hn,rt)}}function pe(rt,vt,Ve,hn,yn,ir){function Qn(B){if(B!==void 0&&typeof B!="function")throw new TypeError("Function expected");return B}for(var Ut=hn.kind,En=Ut==="getter"?"get":Ut==="setter"?"set":"value",Tn=!vt&&rt?hn.static?rt:rt.prototype:null,lr=vt||(Tn?Object.getOwnPropertyDescriptor(Tn,hn.name):{}),ln,Lt=!1,bn=Ve.length-1;bn>=0;bn--){var Xe={};for(var Fe in hn)Xe[Fe]=Fe==="access"?{}:hn[Fe];for(var Fe in hn.access)Xe.access[Fe]=hn.access[Fe];Xe.addInitializer=function(B){if(Lt)throw new TypeError("Cannot add initializers after decoration has completed");ir.push(Qn(B||null))};var on=(0,Ve[bn])(Ut==="accessor"?{get:lr.get,set:lr.set}:lr[En],Xe);if(Ut==="accessor"){if(on===void 0)continue;if(on===null||typeof on!="object")throw new TypeError("Object expected");(ln=Qn(on.get))&&(lr.get=ln),(ln=Qn(on.set))&&(lr.set=ln),(ln=Qn(on.init))&&yn.unshift(ln)}else(ln=Qn(on))&&(Ut==="field"?yn.unshift(ln):lr[En]=ln)}Tn&&Object.defineProperty(Tn,hn.name,lr),Lt=!0}function Ce(rt,vt,Ve){for(var hn=arguments.length>2,yn=0;yn<vt.length;yn++)Ve=hn?vt[yn].call(rt,Ve):vt[yn].call(rt);return hn?Ve:void 0}function he(rt){return typeof rt=="symbol"?rt:"".concat(rt)}function st(rt,vt,Ve){return typeof vt=="symbol"&&(vt=vt.description?"[".concat(vt.description,"]"):""),Object.defineProperty(rt,"name",{configurable:!0,value:Ve?"".concat(Ve," ",vt):vt})}function re(rt,vt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(rt,vt)}function Se(rt,vt,Ve,hn){function yn(ir){return ir instanceof Ve?ir:new Ve(function(Qn){Qn(ir)})}return new(Ve||(Ve=Promise))(function(ir,Qn){function Ut(lr){try{Tn(hn.next(lr))}catch(ln){Qn(ln)}}function En(lr){try{Tn(hn.throw(lr))}catch(ln){Qn(ln)}}function Tn(lr){lr.done?ir(lr.value):yn(lr.value).then(Ut,En)}Tn((hn=hn.apply(rt,vt||[])).next())})}function se(rt,vt){var Ve={label:0,sent:function(){if(ir[0]&1)throw ir[1];return ir[1]},trys:[],ops:[]},hn,yn,ir,Qn;return Qn={next:Ut(0),throw:Ut(1),return:Ut(2)},typeof Symbol=="function"&&(Qn[Symbol.iterator]=function(){return this}),Qn;function Ut(Tn){return function(lr){return En([Tn,lr])}}function En(Tn){if(hn)throw new TypeError("Generator is already executing.");for(;Qn&&(Qn=0,Tn[0]&&(Ve=0)),Ve;)try{if(hn=1,yn&&(ir=Tn[0]&2?yn.return:Tn[0]?yn.throw||((ir=yn.return)&&ir.call(yn),0):yn.next)&&!(ir=ir.call(yn,Tn[1])).done)return ir;switch(yn=0,ir&&(Tn=[Tn[0]&2,ir.value]),Tn[0]){case 0:case 1:ir=Tn;break;case 4:return Ve.label++,{value:Tn[1],done:!1};case 5:Ve.label++,yn=Tn[1],Tn=[0];continue;case 7:Tn=Ve.ops.pop(),Ve.trys.pop();continue;default:if(ir=Ve.trys,!(ir=ir.length>0&&ir[ir.length-1])&&(Tn[0]===6||Tn[0]===2)){Ve=0;continue}if(Tn[0]===3&&(!ir||Tn[1]>ir[0]&&Tn[1]<ir[3])){Ve.label=Tn[1];break}if(Tn[0]===6&&Ve.label<ir[1]){Ve.label=ir[1],ir=Tn;break}if(ir&&Ve.label<ir[2]){Ve.label=ir[2],Ve.ops.push(Tn);break}ir[2]&&Ve.ops.pop(),Ve.trys.pop();continue}Tn=vt.call(rt,Ve)}catch(lr){Tn=[6,lr],yn=0}finally{hn=ir=0}if(Tn[0]&5)throw Tn[1];return{value:Tn[0]?Tn[1]:void 0,done:!0}}}var de=Object.create?function(rt,vt,Ve,hn){hn===void 0&&(hn=Ve);var yn=Object.getOwnPropertyDescriptor(vt,Ve);(!yn||("get"in yn?!vt.__esModule:yn.writable||yn.configurable))&&(yn={enumerable:!0,get:function(){return vt[Ve]}}),Object.defineProperty(rt,hn,yn)}:function(rt,vt,Ve,hn){hn===void 0&&(hn=Ve),rt[hn]=vt[Ve]};function xe(rt,vt){for(var Ve in rt)Ve!=="default"&&!Object.prototype.hasOwnProperty.call(vt,Ve)&&de(vt,rt,Ve)}function le(rt){var vt=typeof Symbol=="function"&&Symbol.iterator,Ve=vt&&rt[vt],hn=0;if(Ve)return Ve.call(rt);if(rt&&typeof rt.length=="number")return{next:function(){return rt&&hn>=rt.length&&(rt=void 0),{value:rt&&rt[hn++],done:!rt}}};throw new TypeError(vt?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(rt,vt){var Ve=typeof Symbol=="function"&&rt[Symbol.iterator];if(!Ve)return rt;var hn=Ve.call(rt),yn,ir=[],Qn;try{for(;(vt===void 0||vt-- >0)&&!(yn=hn.next()).done;)ir.push(yn.value)}catch(Ut){Qn={error:Ut}}finally{try{yn&&!yn.done&&(Ve=hn.return)&&Ve.call(hn)}finally{if(Qn)throw Qn.error}}return ir}function Et(){for(var rt=[],vt=0;vt<arguments.length;vt++)rt=rt.concat(Ue(arguments[vt]));return rt}function mt(){for(var rt=0,vt=0,Ve=arguments.length;vt<Ve;vt++)rt+=arguments[vt].length;for(var hn=Array(rt),yn=0,vt=0;vt<Ve;vt++)for(var ir=arguments[vt],Qn=0,Ut=ir.length;Qn<Ut;Qn++,yn++)hn[yn]=ir[Qn];return hn}function Wt(rt,vt,Ve){if(Ve||arguments.length===2)for(var hn=0,yn=vt.length,ir;hn<yn;hn++)(ir||!(hn in vt))&&(ir||(ir=Array.prototype.slice.call(vt,0,hn)),ir[hn]=vt[hn]);return rt.concat(ir||Array.prototype.slice.call(vt))}function Rt(rt){return this instanceof Rt?(this.v=rt,this):new Rt(rt)}function Tt(rt,vt,Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var hn=Ve.apply(rt,vt||[]),yn,ir=[];return yn={},Qn("next"),Qn("throw"),Qn("return"),yn[Symbol.asyncIterator]=function(){return this},yn;function Qn(Lt){hn[Lt]&&(yn[Lt]=function(bn){return new Promise(function(Xe,Fe){ir.push([Lt,bn,Xe,Fe])>1||Ut(Lt,bn)})})}function Ut(Lt,bn){try{En(hn[Lt](bn))}catch(Xe){ln(ir[0][3],Xe)}}function En(Lt){Lt.value instanceof Rt?Promise.resolve(Lt.value.v).then(Tn,lr):ln(ir[0][2],Lt)}function Tn(Lt){Ut("next",Lt)}function lr(Lt){Ut("throw",Lt)}function ln(Lt,bn){Lt(bn),ir.shift(),ir.length&&Ut(ir[0][0],ir[0][1])}}function Ze(rt){var vt,Ve;return vt={},hn("next"),hn("throw",function(yn){throw yn}),hn("return"),vt[Symbol.iterator]=function(){return this},vt;function hn(yn,ir){vt[yn]=rt[yn]?function(Qn){return(Ve=!Ve)?{value:Rt(rt[yn](Qn)),done:!1}:ir?ir(Qn):Qn}:ir}}function Ie(rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt=rt[Symbol.asyncIterator],Ve;return vt?vt.call(rt):(rt=typeof le=="function"?le(rt):rt[Symbol.iterator](),Ve={},hn("next"),hn("throw"),hn("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve);function hn(ir){Ve[ir]=rt[ir]&&function(Qn){return new Promise(function(Ut,En){Qn=rt[ir](Qn),yn(Ut,En,Qn.done,Qn.value)})}}function yn(ir,Qn,Ut,En){Promise.resolve(En).then(function(Tn){ir({value:Tn,done:Ut})},Qn)}}function Qe(rt,vt){return Object.defineProperty?Object.defineProperty(rt,"raw",{value:vt}):rt.raw=vt,rt}var it=Object.create?function(rt,vt){Object.defineProperty(rt,"default",{enumerable:!0,value:vt})}:function(rt,vt){rt.default=vt};function De(rt){if(rt&&rt.__esModule)return rt;var vt={};if(rt!=null)for(var Ve in rt)Ve!=="default"&&Object.prototype.hasOwnProperty.call(rt,Ve)&&de(vt,rt,Ve);return it(vt,rt),vt}function cn(rt){return rt&&rt.__esModule?rt:{default:rt}}function qe(rt,vt,Ve,hn){if(Ve==="a"&&!hn)throw new TypeError("Private accessor was defined without a getter");if(typeof vt=="function"?rt!==vt||!hn:!vt.has(rt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Ve==="m"?hn:Ve==="a"?hn.call(rt):hn?hn.value:vt.get(rt)}function Pt(rt,vt,Ve,hn,yn){if(hn==="m")throw new TypeError("Private method is not writable");if(hn==="a"&&!yn)throw new TypeError("Private accessor was defined without a setter");if(typeof vt=="function"?rt!==vt||!yn:!vt.has(rt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return hn==="a"?yn.call(rt,Ve):yn?yn.value=Ve:vt.set(rt,Ve),Ve}function Le(rt,vt){if(vt===null||typeof vt!="object"&&typeof vt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof rt=="function"?vt===rt:rt.has(vt)}function pt(rt,vt,Ve){if(vt!=null){if(typeof vt!="object"&&typeof vt!="function")throw new TypeError("Object expected.");var hn;if(Ve){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");hn=vt[Symbol.asyncDispose]}if(hn===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");hn=vt[Symbol.dispose]}if(typeof hn!="function")throw new TypeError("Object not disposable.");rt.stack.push({value:vt,dispose:hn,async:Ve})}else Ve&&rt.stack.push({async:!0});return vt}var at=typeof SuppressedError=="function"?SuppressedError:function(rt,vt,Ve){var hn=new Error(Ve);return hn.name="SuppressedError",hn.error=rt,hn.suppressed=vt,hn};function nt(rt){function vt(hn){rt.error=rt.hasError?new at(hn,rt.error,"An error was suppressed during disposal."):hn,rt.hasError=!0}function Ve(){for(;rt.stack.length;){var hn=rt.stack.pop();try{var yn=hn.dispose&&hn.dispose.call(hn.value);if(hn.async)return Promise.resolve(yn).then(Ve,function(ir){return vt(ir),Ve()})}catch(ir){vt(ir)}}if(rt.hasError)throw rt.error}return Ve()}var Ct={__extends:ae,__assign:T,__rest:ne,__decorate:Q,__param:ge,__metadata:re,__awaiter:Se,__generator:se,__createBinding:de,__exportStar:xe,__values:le,__read:Ue,__spread:Et,__spreadArrays:mt,__spreadArray:Wt,__await:Rt,__asyncGenerator:Tt,__asyncDelegator:Ze,__asyncValues:Ie,__makeTemplateObject:Qe,__importStar:De,__importDefault:cn,__classPrivateFieldGet:qe,__classPrivateFieldSet:Pt,__classPrivateFieldIn:Le,__addDisposableResource:pt,__disposeResources:nt}}}]);
}());