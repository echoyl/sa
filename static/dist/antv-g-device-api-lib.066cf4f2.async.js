!(function(){"use strict";var Ct=(gt,Rt,_e)=>new Promise((ee,ce)=>{var ct=_=>{try{Ue(_e.next(_))}catch(P){ce(P)}},p=_=>{try{Ue(_e.throw(_))}catch(P){ce(P)}},Ue=_=>_.done?ee(_.value):Promise.resolve(_.value).then(ct,p);Ue((_e=_e.apply(gt,Rt)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[286],{75334:function(gt,Rt,_e){_e.d(Rt,{Ab:function(){return Pt},ED:function(){return R},F3:function(){return Ur},FB:function(){return W},Fp:function(){return ve},GI:function(){return z},Id:function(){return br},Kd:function(){return j},Kz:function(){return Be},LJ:function(){return Mr},MP:function(){return fe},OB:function(){return ne},PU:function(){return Sr},R$:function(){return Fe},RH:function(){return Ve},Wf:function(){return ae},X9:function(){return K},YV:function(){return $},bt:function(){return Ee},f$:function(){return Z},j8:function(){return Tn},oX:function(){return Ie},v2:function(){return se},wb:function(){return X},yA:function(){return Dr},zC:function(){return gr},zi:function(){return Y},zo:function(){return ni}});var ee=_e(95147),ce=_e(25897),ct=_e(81957),p=_e(97582),Ue=_e(5501),_;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(_||(_={}));var P;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool",e[e.RenderBundle=11]="RenderBundle"})(P||(P={}));var X;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(X||(X={}));var He;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(He||(He={}));var ae;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(ae||(ae={}));var Y;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Y||(Y={}));var Ee;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})(Ee||(Ee={}));var ne;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(ne||(ne={}));var K;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})(K||(K={}));var Z;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(Z||(Z={}));var $;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})($||($={}));var W;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(W||(W={}));var fe;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(fe||(fe={}));var Be;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(Be||(Be={}));var It;(function(e){e.LOADED="loaded"})(It||(It={}));var D;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(D||(D={}));var se;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET",e[e.STORAGE=4]="STORAGE"})(se||(se={}));var z;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(z||(z={}));var j;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(j||(j={}));function oi(e,t,r,n){var a=D.TEXTURE_2D,i=1,s=se.SAMPLED;return{dimension:a,format:e,width:t,height:r,depthOrArrayLayers:i,mipLevelCount:n,usage:s}}var w;(function(e){e[e.Float=0]="Float",e[e.UnfilterableFloat=1]="UnfilterableFloat",e[e.Uint=2]="Uint",e[e.Sint=3]="Sint",e[e.Depth=4]="Depth"})(w||(w={}));var ve;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(ve||(ve={}));var Fe;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})(Fe||(Fe={}));var je;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(je||(je={}));var T;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(T||(T={}));var N;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(N||(N={}));function _i(e){return e}var d;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"})(d||(d={}));function I(e,t,r){return e<<16|t<<8|r}var R;(function(e){e[e.ALPHA=I(T.U8,N.A,d.None)]="ALPHA",e[e.U8_LUMINANCE=I(T.U8,N.A,d.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=I(T.F16,N.A,d.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=I(T.F32,N.A,d.Luminance)]="F32_LUMINANCE",e[e.F16_R=I(T.F16,N.R,d.None)]="F16_R",e[e.F16_RG=I(T.F16,N.RG,d.None)]="F16_RG",e[e.F16_RGB=I(T.F16,N.RGB,d.None)]="F16_RGB",e[e.F16_RGBA=I(T.F16,N.RGBA,d.None)]="F16_RGBA",e[e.F32_R=I(T.F32,N.R,d.None)]="F32_R",e[e.F32_RG=I(T.F32,N.RG,d.None)]="F32_RG",e[e.F32_RGB=I(T.F32,N.RGB,d.None)]="F32_RGB",e[e.F32_RGBA=I(T.F32,N.RGBA,d.None)]="F32_RGBA",e[e.U8_R=I(T.U8,N.R,d.None)]="U8_R",e[e.U8_R_NORM=I(T.U8,N.R,d.Normalized)]="U8_R_NORM",e[e.U8_RG=I(T.U8,N.RG,d.None)]="U8_RG",e[e.U8_RG_NORM=I(T.U8,N.RG,d.Normalized)]="U8_RG_NORM",e[e.U8_RGB=I(T.U8,N.RGB,d.None)]="U8_RGB",e[e.U8_RGB_NORM=I(T.U8,N.RGB,d.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=I(T.U8,N.RGB,d.sRGB|d.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=I(T.U8,N.RGBA,d.None)]="U8_RGBA",e[e.U8_RGBA_NORM=I(T.U8,N.RGBA,d.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=I(T.U8,N.RGBA,d.sRGB|d.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=I(T.U16,N.R,d.None)]="U16_R",e[e.U16_R_NORM=I(T.U16,N.R,d.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=I(T.U16,N.RG,d.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=I(T.U16,N.RGBA,d.Normalized)]="U16_RGBA_NORM",e[e.U16_RGBA=I(T.U16,N.RGBA,d.None)]="U16_RGBA",e[e.U16_RGB=I(T.U16,N.RGB,d.None)]="U16_RGB",e[e.U16_RG=I(T.U16,N.RG,d.None)]="U16_RG",e[e.U32_R=I(T.U32,N.R,d.None)]="U32_R",e[e.U32_RG=I(T.U32,N.RG,d.None)]="U32_RG",e[e.U32_RGB=I(T.U32,N.RGB,d.None)]="U32_RGB",e[e.U32_RGBA=I(T.U32,N.RGBA,d.None)]="U32_RGBA",e[e.S8_R=I(T.S8,N.R,d.None)]="S8_R",e[e.S8_R_NORM=I(T.S8,N.R,d.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=I(T.S8,N.RG,d.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=I(T.S8,N.RGB,d.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=I(T.S8,N.RGBA,d.Normalized)]="S8_RGBA_NORM",e[e.S16_R=I(T.S16,N.R,d.None)]="S16_R",e[e.S16_RG=I(T.S16,N.RG,d.None)]="S16_RG",e[e.S16_RG_NORM=I(T.S16,N.RG,d.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=I(T.S16,N.RGB,d.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=I(T.S16,N.RGBA,d.None)]="S16_RGBA",e[e.S16_RGBA_NORM=I(T.S16,N.RGBA,d.Normalized)]="S16_RGBA_NORM",e[e.S32_R=I(T.S32,N.R,d.None)]="S32_R",e[e.S32_RG=I(T.S32,N.RG,d.None)]="S32_RG",e[e.S32_RGB=I(T.S32,N.RGB,d.None)]="S32_RGB",e[e.S32_RGBA=I(T.S32,N.RGBA,d.None)]="S32_RGBA",e[e.U16_RGBA_5551=I(T.U16_PACKED_5551,N.RGBA,d.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=I(T.U16_PACKED_565,N.RGB,d.Normalized)]="U16_RGB_565",e[e.BC1=I(T.BC1,N.RGBA,d.Normalized)]="BC1",e[e.BC1_SRGB=I(T.BC1,N.RGBA,d.Normalized|d.sRGB)]="BC1_SRGB",e[e.BC2=I(T.BC2,N.RGBA,d.Normalized)]="BC2",e[e.BC2_SRGB=I(T.BC2,N.RGBA,d.Normalized|d.sRGB)]="BC2_SRGB",e[e.BC3=I(T.BC3,N.RGBA,d.Normalized)]="BC3",e[e.BC3_SRGB=I(T.BC3,N.RGBA,d.Normalized|d.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=I(T.BC4_UNORM,N.R,d.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=I(T.BC4_SNORM,N.R,d.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=I(T.BC5_UNORM,N.RG,d.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=I(T.BC5_SNORM,N.RG,d.Normalized)]="BC5_SNORM",e[e.D24=I(T.D24,N.R,d.Depth)]="D24",e[e.D24_S8=I(T.D24S8,N.RG,d.Depth|d.Stencil)]="D24_S8",e[e.D32F=I(T.D32F,N.R,d.Depth)]="D32F",e[e.D32F_S8=I(T.D32FS8,N.RG,d.Depth|d.Stencil)]="D32F_S8",e[e.U8_RGB_RT=I(T.U8,N.RGB,d.RenderTarget|d.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=I(T.U8,N.RGBA,d.RenderTarget|d.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=I(T.U8,N.RGBA,d.RenderTarget|d.Normalized|d.sRGB)]="U8_RGBA_RT_SRGB"})(R||(R={}));function $e(e){return e>>>8&255}function le(e){return e>>>16&255}function Me(e){return e&255}function Ot(e){switch(e){case T.F32:case T.U32:case T.S32:return 4;case T.U16:case T.S16:case T.F16:return 2;case T.U8:case T.S8:return 1;default:throw new Error("whoops")}}function Ut(e){return Ot(le(e))}function Ei(e){return $e(e)}function or(e){var t=Ot(le(e)),r=$e(e);return t*r}function ui(e,t){return e&4294967040|t}function li(e,t){return e&4294902015|t<<8}function vt(e){var t=Me(e);if(t&d.Depth)return w.Depth;if(t&d.Normalized)return w.Float;var r=le(e);if(r===T.F16||r===T.F32)return w.Float;if(r===T.U8||r===T.U16||r===T.U32)return w.Uint;if(r===T.S8||r===T.S16||r===T.S32)return w.Sint;throw new Error("whoops")}function M(e,t){if(t===void 0&&(t=""),!e)throw new Error("Assert fail: ".concat(t))}function Ce(e){if(e!=null)return e;throw new Error("Missing object")}function Ft(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function Mt(e,t){e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a}function Dt(e){var t=e.r,r=e.g,n=e.b,a=e.a;return{r:t,g:r,b:n,a}}function Ve(e,t,r,n){return n===void 0&&(n=1),{r:e,g:t,b:r,a:n}}var Pt=Ve(0,0,0,0),Ri=Ve(0,0,0,1),_r=Ve(1,1,1,0),ci=Ve(1,1,1,1),De=!0;function fi(e,t){t===void 0&&(t=De),t&&(e[10]=-e[10],e[14]=-e[14])}function Ti(e,t){t===void 0&&(t=De),t&&(e[10]=-e[10],e[14]=-e[14]+1)}function Er(e,t){if(t===void 0&&(t=De),t)switch(e){case X.LESS:return X.GREATER;case X.LEQUAL:return X.GEQUAL;case X.GEQUAL:return X.LEQUAL;case X.GREATER:return X.LESS;default:return e}else return e}function Ai(e,t){return t===void 0&&(t=De),t?1-e:e}function di(e,t){return t===void 0&&(t=De),t?-e:e}function pi(e,t,r,n){if(n===void 0&&(n=De),r=Er(r,n),r===X.LESS)return e<t;if(r===X.LEQUAL)return e<=t;if(r===X.GREATER)return e>t;if(r===X.GEQUAL)return e>=t;throw new Error("whoops")}function Je(e){return!!(e&&!(e&e-1))}function pe(e,t){return e!=null?e:t}function ur(e){return e===void 0?null:e}function hi(e,t,r){e.length=t,e.fill(r)}function Ge(e,t){var r=t-1;return e+r&~r}function Si(e,t){return((e+t-1)/t|0)*t}function lr(e,t,r){for(var n=0,a=e.length;n<a;){var i=n+(a-n>>>1),s=r(t,e[i]);s<0?a=i:n=i+1}return n}function Ni(e,t,r){var n=lr(e,t,r);e.splice(n,0,t)}function Bi(e,t,r){return r?e|=t:e&=~t,e}function Rr(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=t();return r}function cr(e,t){t===void 0&&(t=1);var r=e.split(`
`);return r.map(function(n,a){return"".concat(fr(""+(t+a),4," "),"  ").concat(n)}).join(`
`)}function fr(e,t,r){for(r===void 0&&(r="0");e.length<t;)e="".concat(r).concat(e);return e}function Ci(e,t){for(var r=[],n=e;n<e+t;n++)r.push(n);return r}function mt(e,t){e.blendDstFactor=t.blendDstFactor,e.blendSrcFactor=t.blendSrcFactor,e.blendMode=t.blendMode}function et(e,t){return e===void 0&&(e={}),e.compare=t.compare,e.depthFailOp=t.depthFailOp,e.passOp=t.passOp,e.failOp=t.failOp,e.mask=t.mask,e}function bt(e,t){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),mt(e.rgbBlendState,t.rgbBlendState),mt(e.alphaBlendState,t.alphaBlendState),e.channelWriteMask=t.channelWriteMask,e}function ft(e,t){e.length!==t.length&&(e.length=t.length);for(var r=0;r<t.length;r++)e[r]=bt(e[r],t[r])}function Tr(e,t){t.attachmentsState!==void 0&&ft(e.attachmentsState,t.attachmentsState),e.blendConstant&&t.blendConstant&&Mt(e.blendConstant,t.blendConstant),e.depthCompare=pe(t.depthCompare,e.depthCompare),e.depthWrite=pe(t.depthWrite,e.depthWrite),e.stencilWrite=pe(t.stencilWrite,e.stencilWrite),e.stencilFront&&t.stencilFront&&et(e.stencilFront,t.stencilFront),e.stencilBack&&t.stencilBack&&et(e.stencilBack,t.stencilBack),e.cullMode=pe(t.cullMode,e.cullMode),e.frontFace=pe(t.frontFace,e.frontFace),e.polygonOffset=pe(t.polygonOffset,e.polygonOffset),e.polygonOffsetFactor=pe(t.polygonOffsetFactor,e.polygonOffsetFactor),e.polygonOffsetUnits=pe(t.polygonOffsetUnits,e.polygonOffsetUnits)}function Pe(e){var t=Object.assign({},e);return t.attachmentsState=[],ft(t.attachmentsState,e.attachmentsState),t.blendConstant=t.blendConstant&&Dt(t.blendConstant),t.stencilFront=et(void 0,e.stencilFront),t.stencilBack=et(void 0,e.stencilBack),t}function Ar(e,t){t.channelWriteMask!==void 0&&(e.channelWriteMask=t.channelWriteMask),t.rgbBlendMode!==void 0&&(e.rgbBlendState.blendMode=t.rgbBlendMode),t.alphaBlendMode!==void 0&&(e.alphaBlendState.blendMode=t.alphaBlendMode),t.rgbBlendSrcFactor!==void 0&&(e.rgbBlendState.blendSrcFactor=t.rgbBlendSrcFactor),t.alphaBlendSrcFactor!==void 0&&(e.alphaBlendState.blendSrcFactor=t.alphaBlendSrcFactor),t.rgbBlendDstFactor!==void 0&&(e.rgbBlendState.blendDstFactor=t.rgbBlendDstFactor),t.alphaBlendDstFactor!==void 0&&(e.alphaBlendState.blendDstFactor=t.alphaBlendDstFactor)}var yt={blendMode:Ee.ADD,blendSrcFactor:Y.ONE,blendDstFactor:Y.ZERO},ge={attachmentsState:[{channelWriteMask:z.ALL,rgbBlendState:yt,alphaBlendState:yt}],blendConstant:Dt(Pt),depthWrite:!0,depthCompare:X.LEQUAL,stencilWrite:!1,stencilFront:{compare:X.ALWAYS,passOp:j.KEEP,depthFailOp:j.KEEP,failOp:j.KEEP},stencilBack:{compare:X.ALWAYS,passOp:j.KEEP,depthFailOp:j.KEEP,failOp:j.KEEP},cullMode:ae.NONE,frontFace:He.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function dr(e,t){e===void 0&&(e=null),t===void 0&&(t=ge);var r=Pe(t);return e!==null&&Tr(r,e),r}var gi=dr({depthCompare:X.ALWAYS,depthWrite:!1},ge);function Ii(e,t){return e.attachmentsState===void 0&&(e.attachmentsState=[],ft(e.attachmentsState,ge.attachmentsState)),Ar(e.attachmentsState[0],t),e}var xt={texture:null,sampler:null,formatKind:w.Float,dimension:D.TEXTURE_2D};function he(e,t,r){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function me(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n]);return r}function pr(e,t){return e.texture===t.texture&&e.binding===t.binding}function Xt(e,t){return e.buffer===t.buffer&&e.size===t.size&&e.binding===t.binding&&e.offset===t.offset}function hr(e,t){return e===null?t===null:t===null?!1:e.sampler===t.sampler&&e.texture===t.texture&&e.dimension===t.dimension&&e.formatKind===t.formatKind&&e.comparison===t.comparison}function Sr(e,t){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],!(e.samplerBindings.length!==t.samplerBindings.length||!he(e.samplerBindings,t.samplerBindings,hr)||!he(e.uniformBufferBindings,t.uniformBufferBindings,Xt)||!he(e.storageBufferBindings,t.storageBufferBindings,Xt)||!he(e.storageTextureBindings,t.storageTextureBindings,pr))}function Wt(e,t){return e.blendMode==t.blendMode&&e.blendSrcFactor===t.blendSrcFactor&&e.blendDstFactor===t.blendDstFactor}function Nr(e,t){return!(!Wt(e.rgbBlendState,t.rgbBlendState)||!Wt(e.alphaBlendState,t.alphaBlendState)||e.channelWriteMask!==t.channelWriteMask)}function tt(e,t){return e.compare==t.compare&&e.depthFailOp===t.depthFailOp&&e.failOp===t.failOp&&e.passOp===t.passOp&&e.mask===t.mask}function Br(e,t){return!he(e.attachmentsState,t.attachmentsState,Nr)||e.blendConstant&&t.blendConstant&&!Ft(e.blendConstant,t.blendConstant)||e.stencilFront&&t.stencilFront&&!tt(e.stencilFront,t.stencilFront)||e.stencilBack&&t.stencilBack&&!tt(e.stencilBack,t.stencilBack)?!1:e.depthCompare===t.depthCompare&&e.depthWrite===t.depthWrite&&e.stencilWrite===t.stencilWrite&&e.cullMode===t.cullMode&&e.frontFace===t.frontFace&&e.polygonOffset===t.polygonOffset&&e.polygonOffsetFactor===t.polygonOffsetFactor&&e.polygonOffsetUnits===t.polygonOffsetUnits}function wt(e,t){return e.id===t.id}function Cr(e,t){return e===t}function gr(e,t){return!(e.topology!==t.topology||e.inputLayout!==t.inputLayout||e.sampleCount!==t.sampleCount||e.megaStateDescriptor&&t.megaStateDescriptor&&!Br(e.megaStateDescriptor,t.megaStateDescriptor)||!wt(e.program,t.program)||!he(e.colorAttachmentFormats,t.colorAttachmentFormats,Cr)||e.depthStencilAttachmentFormat!==t.depthStencilAttachmentFormat)}function Ir(e,t){return e.offset===t.offset&&e.shaderLocation===t.shaderLocation&&e.format===t.format&&e.divisor===t.divisor}function Or(e,t){return(0,ee.Z)(e)?(0,ee.Z)(t):(0,ee.Z)(t)?!1:e.arrayStride===t.arrayStride&&e.stepMode===t.stepMode&&he(e.attributes,t.attributes,Ir)}function Ur(e,t){return!(e.indexBufferFormat!==t.indexBufferFormat||!he(e.vertexBufferDescriptors,t.vertexBufferDescriptors,Or)||!wt(e.program,t.program))}function Oi(e,t){return e.addressModeU===t.addressModeU&&e.addressModeV===t.addressModeV&&e.minFilter===t.minFilter&&e.magFilter===t.magFilter&&e.mipmapFilter===t.mipmapFilter&&e.lodMinClamp===t.lodMinClamp&&e.lodMaxClamp===t.lodMaxClamp&&e.maxAnisotropy===t.maxAnisotropy&&e.compareFunction===t.compareFunction}function vr(e){var t=e.sampler,r=e.texture,n=e.dimension,a=e.formatKind,i=e.comparison;return{sampler:t,texture:r,dimension:n,formatKind:a,comparison:i}}function Ht(e){var t=e.buffer,r=e.size,n=e.binding,a=e.offset;return{binding:n,buffer:t,offset:a,size:r}}function Fr(e){var t=e.binding,r=e.texture;return{binding:t,texture:r}}function Mr(e){var t=e.samplerBindings&&me(e.samplerBindings,vr),r=e.uniformBufferBindings&&me(e.uniformBufferBindings,Ht),n=e.storageBufferBindings&&me(e.storageBufferBindings,Ht),a=e.storageTextureBindings&&me(e.storageTextureBindings,Fr);return{samplerBindings:t,uniformBufferBindings:r,storageBufferBindings:n,storageTextureBindings:a,pipeline:e.pipeline}}function Dr(e){var t=e.inputLayout,r=e.program,n=e.topology,a=e.megaStateDescriptor&&Pe(e.megaStateDescriptor),i=e.colorAttachmentFormats.slice(),s=e.depthStencilAttachmentFormat,o=e.sampleCount;return{inputLayout:t,megaStateDescriptor:a,program:r,topology:n,colorAttachmentFormats:i,depthStencilAttachmentFormat:s,sampleCount:o}}function Pr(e){var t=e.shaderLocation,r=e.format,n=e.offset,a=e.divisor;return{shaderLocation:t,format:r,offset:n,divisor:a}}function mr(e){if((0,ee.Z)(e))return e;var t=e.arrayStride,r=e.stepMode,n=me(e.attributes,Pr);return{arrayStride:t,stepMode:r,attributes:n}}function br(e){var t=me(e.vertexBufferDescriptors,mr),r=e.indexBufferFormat,n=e.program;return{vertexBufferDescriptors:t,indexBufferFormat:r,program:n}}var m,yr=/([^[]*)(\[[0-9]+\])?/;function xr(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var t=e.match(yr);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:Number(t[2])||1,isArray:!!t[2]}}function G(){var e=null;return function(t,r,n){var a=e!==n;return a&&(t.uniform1i(r,n),e=n),a}}function H(e,t,r,n){var a=null,i=null;return function(s,o,E){var u=t(E,r),l=u.length,c=!1;if(a===null)a=new Float32Array(l),i=l,c=!0;else{M(i===l,"Uniform length cannot change.");for(var f=0;f<l;++f)if(u[f]!==a[f]){c=!0;break}}return c&&(n(s,e,o,u),a.set(u)),c}}function J(e,t,r,n){e[t](r,n)}function Te(e,t,r,n){e[t](r,!1,n)}var Xr={},Wr={},wr={},Vt=[0];function Tt(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(Vt[0]=e,e=Vt);var a=e.length;if(e instanceof r)return e;var i=n[a];i||(i=new r(a),n[a]=i);for(var s=0;s<a;s++)i[s]=e[s];return i}function ie(e,t){return Tt(e,t,Float32Array,Xr)}function Se(e,t){return Tt(e,t,Int32Array,Wr)}function rt(e,t){return Tt(e,t,Uint32Array,wr)}var Hr=(m={},m[_.FLOAT]=H.bind(null,"uniform1fv",ie,1,J),m[_.FLOAT_VEC2]=H.bind(null,"uniform2fv",ie,2,J),m[_.FLOAT_VEC3]=H.bind(null,"uniform3fv",ie,3,J),m[_.FLOAT_VEC4]=H.bind(null,"uniform4fv",ie,4,J),m[_.INT]=H.bind(null,"uniform1iv",Se,1,J),m[_.INT_VEC2]=H.bind(null,"uniform2iv",Se,2,J),m[_.INT_VEC3]=H.bind(null,"uniform3iv",Se,3,J),m[_.INT_VEC4]=H.bind(null,"uniform4iv",Se,4,J),m[_.BOOL]=H.bind(null,"uniform1iv",Se,1,J),m[_.BOOL_VEC2]=H.bind(null,"uniform2iv",Se,2,J),m[_.BOOL_VEC3]=H.bind(null,"uniform3iv",Se,3,J),m[_.BOOL_VEC4]=H.bind(null,"uniform4iv",Se,4,J),m[_.FLOAT_MAT2]=H.bind(null,"uniformMatrix2fv",ie,4,Te),m[_.FLOAT_MAT3]=H.bind(null,"uniformMatrix3fv",ie,9,Te),m[_.FLOAT_MAT4]=H.bind(null,"uniformMatrix4fv",ie,16,Te),m[_.UNSIGNED_INT]=H.bind(null,"uniform1uiv",rt,1,J),m[_.UNSIGNED_INT_VEC2]=H.bind(null,"uniform2uiv",rt,2,J),m[_.UNSIGNED_INT_VEC3]=H.bind(null,"uniform3uiv",rt,3,J),m[_.UNSIGNED_INT_VEC4]=H.bind(null,"uniform4uiv",rt,4,J),m[_.FLOAT_MAT2x3]=H.bind(null,"uniformMatrix2x3fv",ie,6,Te),m[_.FLOAT_MAT2x4]=H.bind(null,"uniformMatrix2x4fv",ie,8,Te),m[_.FLOAT_MAT3x2]=H.bind(null,"uniformMatrix3x2fv",ie,6,Te),m[_.FLOAT_MAT3x4]=H.bind(null,"uniformMatrix3x4fv",ie,12,Te),m[_.FLOAT_MAT4x2]=H.bind(null,"uniformMatrix4x2fv",ie,8,Te),m[_.FLOAT_MAT4x3]=H.bind(null,"uniformMatrix4x3fv",ie,12,Te),m[_.SAMPLER_2D]=G,m[_.SAMPLER_CUBE]=G,m[_.SAMPLER_3D]=G,m[_.SAMPLER_2D_SHADOW]=G,m[_.SAMPLER_2D_ARRAY]=G,m[_.SAMPLER_2D_ARRAY_SHADOW]=G,m[_.SAMPLER_CUBE_SHADOW]=G,m[_.INT_SAMPLER_2D]=G,m[_.INT_SAMPLER_3D]=G,m[_.INT_SAMPLER_CUBE]=G,m[_.INT_SAMPLER_2D_ARRAY]=G,m[_.UNSIGNED_INT_SAMPLER_2D]=G,m[_.UNSIGNED_INT_SAMPLER_3D]=G,m[_.UNSIGNED_INT_SAMPLER_CUBE]=G,m[_.UNSIGNED_INT_SAMPLER_2D_ARRAY]=G,m);function kt(e,t,r){var n=Hr[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}var Vr={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function kr(e){return Object.prototype.toString.call(e)in Vr}function ke(e,t){return"#define ".concat(e," ").concat(t)}function Yr(e){var t={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,n,a){var i=Number(a);return t[n]=isNaN(i)?a:i,""}),t}function Kr(e,t){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(n,a,i){var s=Number(a);return r.push({location:isNaN(s)?t[a]:s,name:i}),""}),r}function Ui(e){var t=[],r=[];return e.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(n,a,i){var s=[];return i.trim().replace(`\r
`,`
`).split(`
`).forEach(function(o){var E=__read(o.trim().split(/\s+/),2),u=E[0],l=E[1];s.push({type:u.trim(),name:l.replace(";","").trim()})}),r.push({type:a.trim(),uniforms:s}),""}),e.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(n,a){return a.trim().replace(`\r
`,`
`).split(`
`).forEach(function(i){var s=i.trim().split(" "),o=s[0]||"",E=s[1]||"",u=E.indexOf("[")>-1;if(E=E.replace(";","").replace("[","").trim(),!o.startsWith("#")){if(o){var l=r.find(function(A){return o===A.type});if(l)if(u)for(var c=function(A){l.uniforms.forEach(function(h){t.push("".concat(E,"[").concat(A,"].").concat(h.name))})},f=0;f<5;f++)c(f);else l.uniforms.forEach(function(A){t.push("".concat(E,".").concat(A.name))})}E&&t.push(E)}}),""}),t}function Yt(e){if(e===void 0)return null;var t=/binding\s*=\s*(\d+)/.exec(e);if(t!==null){var r=parseInt(t[1],10);if(!Number.isNaN(r))return r}return null}function Kt(e){var t="",r=e;return[r,t]}function Ie(e,t,r,n,a){var i;n===void 0&&(n=null),a===void 0&&(a=!0);var s=e.glslVersion==="#version 100",o=t==="frag"&&((i=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||i===void 0?void 0:i.length)>1,E=r.replace(`\r
`,`
`).split(`
`).map(function(U){return U.replace(/[/][/].*$/,"")}).filter(function(U){var S=!U||/^\s+$/.test(U);return!S}),u="";n!==null&&(u=Object.keys(n).map(function(U){return ke(U,n[U])}).join(`
`));var l=E.find(function(U){return U.startsWith("precision")})||"precision mediump float;",c=a?E.filter(function(U){return!U.startsWith("precision")}).join(`
`):E.join(`
`),f="";if(e.viewportOrigin===ve.UPPER_LEFT&&(f+="".concat(ke("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===Fe.ZERO&&(f+="".concat(ke("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var A=0,h=0,g=0;c=c.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(U,S,v,y){var L=v?"".concat(v,", "):"";return"layout(".concat(L,"set = ").concat(A,", binding = ").concat(h++,") uniform ").concat(y)}),A++,h=0,M(e.separateSamplerTextures),c=c.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(U,S,v,y,L){var Q=Yt(v);Q===null&&(Q=h++);var re=(0,p.CR)(Kt(y),2),Re=re[0],we=re[1];return t==="frag"?`
layout(set = `.concat(A,", binding = ").concat(Q*2+0,") uniform texture").concat(Re," T_").concat(L,`;
layout(set = `).concat(A,", binding = ").concat(Q*2+1,") uniform sampler").concat(we," S_").concat(L,";").trim():""}),c=c.replace(t==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(U,S){return"layout(location = ".concat(g++,") ").concat(S)}),f+="".concat(ke("gl_VertexID","gl_VertexIndex"),`
`),f+="".concat(ke("gl_InstanceID","gl_InstanceIndex"),`
`),l=l.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var O=0;c=c.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(U,S,v,y,L){var Q=Yt(v);return Q===null&&(Q=O++),"uniform sampler".concat(y," ").concat(L,"; // BINDING=").concat(Q)})}if(c=c.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return"SAMPLER_".concat(S,"(P_").concat(v,")")}),c=c.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return"PP_SAMPLER_".concat(S,"(P_").concat(v,")")}),c=c.replace(/\bPU_TEXTURE\((.*?)\)/g,function(U,S){return"TEXTURE(P_".concat(S,")")}),e.separateSamplerTextures)c=c.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){var y=(0,p.CR)(Kt(S),2),L=y[0],Q=y[1];return"texture".concat(L," T_P_").concat(v,", sampler").concat(Q," S_P_").concat(v)}),c=c.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return"T_".concat(v,", S_").concat(v)}),c=c.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return"sampler".concat(S,"(T_").concat(v,", S_").concat(v,")")}),c=c.replace(/\bTEXTURE\((.*?)\)/g,function(U,S){return"T_".concat(S)});else{var F=[];c=c.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return"sampler".concat(S," P_").concat(v)}),c=c.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return v}),c=c.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(U,S,v){return F.push([v,S]),v}),s&&F.forEach(function(U){var S=(0,p.CR)(U,2),v=S[0],y=S[1];c=c.replace(new RegExp("texture\\(".concat(v),"g"),function(){return"texture".concat(y,"(").concat(v)})}),c=c.replace(/\bTEXTURE\((.*?)\)/g,function(U,S){return S})}var B="".concat(s?"":e.glslVersion,`
`).concat(s&&o?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(s&&t==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(a?l:"",`
`).concat(f||"").concat(u?u+`
`:"",`
`).concat(c,`
`).trim();if(e.explicitBindingLocations&&t==="frag"&&(B=B.replace(/^\b(out)\b/g,function(U,S){return"layout(location = 0) ".concat(S)})),s){if(t==="frag"&&(B=B.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(U,S,v){return"varying ".concat(S," ").concat(v,`;
`)})),t==="vert"&&(B=B.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(U,S,v){return"varying ".concat(S," ").concat(v,`;
`)}),B=B.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(U,S,v){return"attribute ".concat(S," ").concat(v,`;
`)})),B=B.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(U,S){return S.trim().replace(/^.*$/gm,function(v){var y=v.trim();return y.startsWith("#")?y:v?"uniform ".concat(y):""})}),t==="frag")if(o){var x=[];B=B.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(U,S){return x.push(S),"vec4 ".concat(S,`;
`)});var b=B.lastIndexOf("}");B=B.substring(0,b)+`
    `.concat(x.map(function(U,S){return"gl_FragData[".concat(S,"] = ").concat(U,`;
    `)}).join(`
`))+B.substring(b)}else{var k;if(B=B.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(U,S,v){return k=v,"".concat(S," ").concat(v,`;
`)}),k){var b=B.lastIndexOf("}");B=B.substring(0,b)+`
  gl_FragColor = vec4(`.concat(k,`);
`)+B.substring(b)}}B=B.replace(/^\s*layout\((.*)\)/gm,"")}return B}function vi(e,t,r,n){n===void 0&&(n=null);var a=Ie(e,"vert",t,n),i=Ie(e,"frag",r,n);return{vert:t,frag:r,preprocessedVert:a,preprocessedFrag:i}}var oe=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=e.call(this)||this;return i.id=n,i.device=a,i.device.resourceCreationTracker!==null&&i.device.resourceCreationTracker.trackResourceCreated(i),i}return t.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},t}(Ue.Z),Lr=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.Bindings;var o=i.uniformBufferBindings,E=i.samplerBindings;return s.uniformBufferBindings=o||[],s.samplerBindings=E||[],s.bindingLayouts=s.createBindingLayouts(),s}return t.prototype.createBindingLayouts=function(){var r=0,n=0,a=[],i=this.uniformBufferBindings.length,s=this.samplerBindings.length;return a.push({firstUniformBuffer:r,numUniformBuffers:i,firstSampler:n,numSamplers:s}),r+=i,n+=s,{numUniformBuffers:r,numSamplers:n,bindingLayoutTables:a}},t}(oe),Ye;function C(e){return Ye!==void 0?Ye:typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?(Ye=!0,!0):(Ye=!!(e&&e._version===2),Ye)}function Lt(e){var t=le(e);switch(t){case T.BC1:case T.BC2:case T.BC3:case T.BC4_UNORM:case T.BC4_SNORM:case T.BC5_UNORM:case T.BC5_SNORM:return!0;default:return!1}}function Zt(e){var t=Me(e);if(t&d.Normalized)return!1;var r=le(e);return r===T.S8||r===T.S16||r===T.S32||r===T.U8||r===T.U16||r===T.U32}function Zr(e){switch(e){case fe.STATIC:return _.STATIC_DRAW;case fe.DYNAMIC:return _.DYNAMIC_DRAW}}function qt(e){if(e&W.INDEX)return _.ELEMENT_ARRAY_BUFFER;if(e&W.VERTEX)return _.ARRAY_BUFFER;if(e&W.UNIFORM)return _.UNIFORM_BUFFER}function qr(e){switch(e){case $.TRIANGLES:return _.TRIANGLES;case $.POINTS:return _.POINTS;case $.TRIANGLE_STRIP:return _.TRIANGLE_STRIP;case $.LINES:return _.LINES;case $.LINE_STRIP:return _.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function Qr(e){switch(e){case T.U8:return _.UNSIGNED_BYTE;case T.U16:return _.UNSIGNED_SHORT;case T.U32:return _.UNSIGNED_INT;case T.S8:return _.BYTE;case T.S16:return _.SHORT;case T.S32:return _.INT;case T.F16:return _.HALF_FLOAT;case T.F32:return _.FLOAT;default:throw new Error("whoops")}}function zr(e){switch(e){case N.R:return 1;case N.RG:return 2;case N.RGB:return 3;case N.RGBA:return 4;default:return 1}}function jr(e){var t=le(e),r=$e(e),n=Me(e),a=Qr(t),i=zr(r),s=!!(n&d.Normalized);return{size:i,type:a,normalized:s}}function $r(e){switch(e){case R.U8_R:return _.UNSIGNED_BYTE;case R.U16_R:return _.UNSIGNED_SHORT;case R.U32_R:return _.UNSIGNED_INT;default:throw new Error("whoops")}}function Ke(e){switch(e){case ne.CLAMP_TO_EDGE:return _.CLAMP_TO_EDGE;case ne.REPEAT:return _.REPEAT;case ne.MIRRORED_REPEAT:return _.MIRRORED_REPEAT;default:throw new Error("whoops")}}function nt(e,t){if(t===Z.LINEAR&&e===K.BILINEAR)return _.LINEAR_MIPMAP_LINEAR;if(t===Z.LINEAR&&e===K.POINT)return _.NEAREST_MIPMAP_LINEAR;if(t===Z.NEAREST&&e===K.BILINEAR)return _.LINEAR_MIPMAP_NEAREST;if(t===Z.NEAREST&&e===K.POINT)return _.NEAREST_MIPMAP_NEAREST;if(t===Z.NO_MIP&&e===K.BILINEAR)return _.LINEAR;if(t===Z.NO_MIP&&e===K.POINT)return _.NEAREST;throw new Error("Unknown texture filter mode")}function be(e,t){t===void 0&&(t=0);var r=e;return r.gl_buffer_pages[t/r.pageByteSize|0]}function ye(e){var t=e;return t.gl_texture}function At(e){var t=e;return t.gl_sampler}function Le(e,t){e.name=t,e.__SPECTOR_Metadata={name:t}}function Qt(e,t){for(var r=[];;){var n=t.exec(e);if(!n)break;r.push(n)}return r}function Ne(e){return e.blendMode==Ee.ADD&&e.blendSrcFactor==Y.ONE&&e.blendDstFactor===Y.ZERO}function Jr(e){switch(e){case je.OcclusionConservative:return _.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function Gr(e){if(e===D.TEXTURE_2D)return _.TEXTURE_2D;if(e===D.TEXTURE_2D_ARRAY)return _.TEXTURE_2D_ARRAY;if(e===D.TEXTURE_CUBE_MAP)return _.TEXTURE_CUBE_MAP;if(e===D.TEXTURE_3D)return _.TEXTURE_3D;throw new Error("whoops")}function dt(e,t,r,n){return!(e%r!==0||t%n!==0)}var en=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.Buffer;var o=i.viewOrSize,E=i.usage,u=i.hint,l=u===void 0?fe.STATIC:u,c=a.uniformBufferMaxPageByteSize,f=a.gl,A=E&W.UNIFORM;A||(C(f)?f.bindVertexArray(null):a.OES_vertex_array_object.bindVertexArrayOES(null));var h=(0,ce.Z)(o)?Ge(o,4):Ge(o.byteLength,4);s.gl_buffer_pages=[];var g;if(A){for(var O=h;O>0;)s.gl_buffer_pages.push(s.createBufferPage(Math.min(O,c),E,l)),O-=c;g=c}else s.gl_buffer_pages.push(s.createBufferPage(h,E,l)),g=h;return s.pageByteSize=g,s.byteSize=h,s.usage=E,s.gl_target=qt(E),(0,ce.Z)(o)||s.setSubData(0,new Uint8Array(o.buffer)),A||(C(f)?f.bindVertexArray(s.device.currentBoundVAO):a.OES_vertex_array_object.bindVertexArrayOES(s.device.currentBoundVAO)),s}return t.prototype.setSubData=function(r,n,a,i){a===void 0&&(a=0),i===void 0&&(i=n.byteLength-a);for(var s=this.device.gl,o=this.pageByteSize,E=r+i,u=r,l=r%o;u<E;){var c=C(s)?s.COPY_WRITE_BUFFER:this.gl_target,f=be(this,u);if(f.ubo)return;s.bindBuffer(c,f),C(s)?s.bufferSubData(c,l,n,a,Math.min(E-u,o)):s.bufferSubData(c,l,n),u+=o,l=0,a+=o,this.device.debugGroupStatisticsBufferUpload()}},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},t.prototype.createBufferPage=function(r,n,a){var i=this.device.gl,s=n&W.UNIFORM;if(!C(i)&&s)return{ubo:!0};var o=this.device.ensureResourceExists(i.createBuffer()),E=qt(n),u=Zr(a);return i.bindBuffer(E,o),i.bufferData(E,r,u),o},t}(oe),tn=function(e){(0,p.ZT)(t,e);function t(r){var n,a,i,s,o=r.id,E=r.device,u=r.descriptor,l,c=e.call(this,{id:o,device:E})||this;c.type=P.InputLayout;var f=u.vertexBufferDescriptors,A=u.indexBufferFormat,h=u.program;M(A===R.U16_R||A===R.U32_R||A===null);var g=A!==null?$r(A):null,O=A!==null?Ut(A):null,F=c.device.gl,B=c.device.ensureResourceExists(C(F)?F.createVertexArray():E.OES_vertex_array_object.createVertexArrayOES());C(F)?F.bindVertexArray(B):E.OES_vertex_array_object.bindVertexArrayOES(B),F.bindBuffer(F.ARRAY_BUFFER,be(c.device.fallbackVertexBuffer));try{for(var x=(0,p.XA)(u.vertexBufferDescriptors),b=x.next();!b.done;b=x.next()){var k=b.value,U=k.stepMode,S=k.attributes;try{for(var v=(i=void 0,(0,p.XA)(S)),y=v.next();!y.done;y=v.next()){var L=y.value,Q=L.shaderLocation,re=L.format,Re=L.divisor,we=Re===void 0?1:Re,de=C(F)?Q:(l=h.attributes[Q])===null||l===void 0?void 0:l.location,Oe=jr(re);if(L.vertexFormat=Oe,!(0,ee.Z)(de)){Zt(re);var ii=Oe.size,ai=Oe.type,si=Oe.normalized;F.vertexAttribPointer(de,ii,ai,si,0,0),U===Be.INSTANCE&&(C(F)?F.vertexAttribDivisor(de,we):E.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(de,we)),F.enableVertexAttribArray(de)}}}catch(Bt){i={error:Bt}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}}}catch(Bt){n={error:Bt}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(n)throw n.error}}return C(F)?F.bindVertexArray(null):E.OES_vertex_array_object.bindVertexArrayOES(null),c.vertexBufferDescriptors=f,c.vao=B,c.indexBufferFormat=A,c.indexBufferType=g,c.indexBufferCompByteSize=O,c.program=h,c}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(C(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},t}(oe),pt=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=r.fake,o=e.call(this,{id:n,device:a})||this;o.type=P.Texture,i=(0,p.pi)({dimension:D.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},i);var E=o.device.gl,u,l,c=o.clampmipLevelCount(i);if(o.immutable=i.usage===se.RENDER_TARGET,o.pixelStore=i.pixelStore,o.format=i.format,o.dimension=i.dimension,o.formatKind=vt(i.format),o.width=i.width,o.height=i.height,o.depthOrArrayLayers=i.depthOrArrayLayers,o.mipmaps=c>=1,!s){l=o.device.ensureResourceExists(E.createTexture());var f=o.device.translateTextureType(i.format),A=o.device.translateTextureInternalFormat(i.format);if(o.device.setActiveTexture(E.TEXTURE0),o.device.currentTextures[0]=null,o.preprocessImage(),i.dimension===D.TEXTURE_2D){if(u=_.TEXTURE_2D,E.bindTexture(u,l),o.immutable)if(C(E))E.texStorage2D(u,c,A,i.width,i.height);else{var h=(A===_.DEPTH_COMPONENT||o.isNPOT(),0);(o.format===R.D32F||o.format===R.D24_S8)&&!C(E)&&!a.WEBGL_depth_texture||(E.texImage2D(u,h,A,i.width,i.height,0,A,f,null),o.mipmaps&&(o.mipmaps=!1,E.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),E.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),E.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE)))}M(i.depthOrArrayLayers===1)}else if(i.dimension===D.TEXTURE_2D_ARRAY)u=_.TEXTURE_2D_ARRAY,E.bindTexture(u,l),o.immutable&&C(E)&&E.texStorage3D(u,c,A,i.width,i.height,i.depthOrArrayLayers);else if(i.dimension===D.TEXTURE_3D)u=_.TEXTURE_3D,E.bindTexture(u,l),o.immutable&&C(E)&&E.texStorage3D(u,c,A,i.width,i.height,i.depthOrArrayLayers);else if(i.dimension===D.TEXTURE_CUBE_MAP)u=_.TEXTURE_CUBE_MAP,E.bindTexture(u,l),o.immutable&&C(E)&&E.texStorage2D(u,c,A,i.width,i.height),M(i.depthOrArrayLayers===6);else throw new Error("whoops")}return o.gl_texture=l,o.gl_target=u,o.mipLevelCount=c,o}return t.prototype.setImageData=function(r,n){n===void 0&&(n=0);var a=this.device.gl;Lt(this.format);var i=this.gl_target===_.TEXTURE_3D||this.gl_target===_.TEXTURE_2D_ARRAY,s=this.gl_target===_.TEXTURE_CUBE_MAP,o=kr(r[0]);this.device.setActiveTexture(a.TEXTURE0),this.device.currentTextures[0]=null;var E=r[0],u,l;o?(u=this.width,l=this.height):(u=E.width,l=E.height,this.width=u,this.height=l),a.bindTexture(this.gl_target,this.gl_texture);var c=this.device.translateTextureFormat(this.format),f=C(a)?this.device.translateInternalTextureFormat(this.format):c,A=this.device.translateTextureType(this.format);this.preprocessImage();for(var h=0;h<this.depthOrArrayLayers;h++){var g=r[h],O=this.gl_target;s&&(O=_.TEXTURE_CUBE_MAP_POSITIVE_X+h%6),this.immutable?a.texSubImage2D(O,n,0,0,u,l,c,A,g):C(a)?i?a.texImage3D(O,n,f,u,l,this.depthOrArrayLayers,0,c,A,g):a.texImage2D(O,n,f,u,l,0,c,A,g):o?a.texImage2D(O,n,c,u,l,0,c,A,g):a.texImage2D(O,n,c,c,A,g)}this.mipmaps&&this.generateMipmap(i)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(ye(this))},t.prototype.clampmipLevelCount=function(r){if(r.dimension===D.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var n=le(r.format);if(n===T.BC1)for(var a=r.width,i=r.height,s=0;s<r.mipLevelCount;s++){if(a<=2||i<=2)return s-1;a=Math.max(a/2|0,1),i=Math.max(i/2|0,1)}}return r.mipLevelCount},t.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(_.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(_.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},t.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var n=this.device.gl;return!C(n)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(n.bindTexture(this.gl_target,this.gl_texture),r?(n.texParameteri(this.gl_target,_.TEXTURE_BASE_LEVEL,0),n.texParameteri(this.gl_target,_.TEXTURE_MAX_LEVEL,Math.log2(this.width)),n.texParameteri(this.gl_target,_.TEXTURE_MIN_FILTER,_.LINEAR_MIPMAP_LINEAR),n.texParameteri(this.gl_target,_.TEXTURE_MAG_FILTER,_.LINEAR)):n.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST_MIPMAP_LINEAR),n.generateMipmap(this.gl_target),n.bindTexture(this.gl_target,null)),this)},t.prototype.isNPOT=function(){var r=this.device.gl;return C(r)?!1:!Je(this.width)||!Je(this.height)},t}(oe),rn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.RenderTarget,s.gl_renderbuffer=null,s.texture=null;var o=s.device.gl,E=i.format,u=i.width,l=i.height,c=i.sampleCount,f=c===void 0?1:c,A=i.texture,h=!1;if((E===R.D32F||E===R.D24_S8)&&A&&!C(o)&&!a.WEBGL_depth_texture&&(A.destroy(),s.texture=null,h=!0),!h&&A)s.texture=A;else{s.gl_renderbuffer=s.device.ensureResourceExists(o.createRenderbuffer()),o.bindRenderbuffer(o.RENDERBUFFER,s.gl_renderbuffer);var g=s.device.translateTextureInternalFormat(E,!0);C(o)&&f>1?o.renderbufferStorageMultisample(_.RENDERBUFFER,f,g,u,l):o.renderbufferStorage(_.RENDERBUFFER,g,u,l)}return s.format=E,s.width=u,s.height=l,s.sampleCount=f,s}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},t}(oe),te;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(te||(te={}));var nn=function(e){(0,p.ZT)(t,e);function t(r,n){var a=r.id,i=r.device,s=r.descriptor,o=e.call(this,{id:a,device:i})||this;o.rawVertexGLSL=n,o.type=P.Program,o.uniformSetters={},o.attributes=[];var E=o.device.gl;return o.descriptor=s,o.gl_program=o.device.ensureResourceExists(E.createProgram()),o.gl_shader_vert=null,o.gl_shader_frag=null,o.compileState=te.NeedsCompile,o.tryCompileProgram(),o}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},t.prototype.tryCompileProgram=function(){M(this.compileState===te.NeedsCompile);var r=this.descriptor,n=r.vertex,a=r.fragment,i=this.device.gl;n!=null&&n.glsl&&(a!=null&&a.glsl)&&(this.gl_shader_vert=this.compileShader(n.postprocess?n.postprocess(n.glsl):n.glsl,i.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(a.postprocess?a.postprocess(a.glsl):a.glsl,i.FRAGMENT_SHADER),i.attachShader(this.gl_program,this.gl_shader_vert),i.attachShader(this.gl_program,this.gl_shader_frag),i.linkProgram(this.gl_program),this.compileState=te.Compiling,C(i)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},t.prototype.readAttributesFromLinkedProgram=function(){for(var r,n=this.device.gl,a=n.getProgramParameter(this.gl_program,n.ACTIVE_ATTRIBUTES),i=Yr(this.descriptor.vertex.glsl),s=Kr(this.rawVertexGLSL,i),o=function(l){var c=n.getActiveAttrib(E.gl_program,l),f=c.name,A=c.type,h=c.size,g=n.getAttribLocation(E.gl_program,f),O=(r=s.find(function(F){return F.name===f}))===null||r===void 0?void 0:r.location;g>=0&&!(0,ee.Z)(O)&&(E.attributes[O]={name:f,location:g,type:A,size:h})},E=this,u=0;u<a;u++)o(u)},t.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,n=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),a=0;a<n;a++){var i=r.getActiveUniform(this.gl_program,a),s=xr(i.name).name,o=r.getUniformLocation(this.gl_program,s);if(this.uniformSetters[s]=kt(r,o,i),i&&i.size>1)for(var E=0;E<i.size;E++)o=r.getUniformLocation(this.gl_program,"".concat(s,"[").concat(E,"]")),this.uniformSetters["".concat(s,"[").concat(E,"]")]=kt(r,o,i)}},t.prototype.compileShader=function(r,n){var a=this.device.gl,i=this.device.ensureResourceExists(a.createShader(n));return a.shaderSource(i,r),a.compileShader(i),i},t.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var n=this.device.gl;if(!C(n)){var a=!1;for(var i in r){a||(n.useProgram(this.gl_program),a=!0);var s=r[i],o=this.uniformSetters[i];if(o){var E=s;E instanceof pt&&(E=E.textureIndex),o(E)}}}return this},t}(oe),an=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.QueryPool;var o=s.device.gl;if(C(o)){var E=i.elemCount,u=i.type;s.gl_query=Rr(E,function(){return s.device.ensureResourceExists(o.createQuery())}),s.gl_query_type=Jr(u)}return s}return t.prototype.queryResultOcclusion=function(r){var n=this.device.gl;if(C(n)){var a=this.gl_query[r];return n.getQueryParameter(a,n.QUERY_RESULT_AVAILABLE)?!!n.getQueryParameter(a,n.QUERY_RESULT):null}return null},t.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(C(r))for(var n=0;n<this.gl_query.length;n++)r.deleteQuery(this.gl_query[n])},t}(oe),sn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=e.call(this,{id:n,device:a})||this;return i.type=P.Readback,i.gl_pbo=null,i.gl_sync=null,i}return t.prototype.clientWaitAsync=function(r,n,a){n===void 0&&(n=0),a===void 0&&(a=10);var i=this.device.gl;return new Promise(function(s,o){function E(){var u=i.clientWaitSync(r,n,0);if(u==i.WAIT_FAILED){o();return}if(u==i.TIMEOUT_EXPIRED){setTimeout(E,(0,ct.Z)(a,0,i.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}s()}E()})},t.prototype.getBufferSubDataAsync=function(r,n,a,i,s,o){return(0,p.mG)(this,void 0,void 0,function(){var E;return(0,p.Jh)(this,function(u){switch(u.label){case 0:return E=this.device.gl,C(E)?(this.gl_sync=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0),E.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return u.sent(),E.bindBuffer(r,n),E.getBufferSubData(r,a,i,s,o),E.bindBuffer(r,null),[2,i];case 2:return[2]}})})},t.prototype.readTexture=function(r,n,a,i,s,o,E,u){return E===void 0&&(E=0),u===void 0&&(u=o.byteLength||0),(0,p.mG)(this,void 0,void 0,function(){var l,c,f,A,h;return(0,p.Jh)(this,function(g){return l=this.device.gl,c=r,f=this.device.translateTextureFormat(c.format),A=this.device.translateTextureType(c.format),h=or(c.format),C(l)?(this.gl_pbo=this.device.ensureResourceExists(l.createBuffer()),l.bindBuffer(l.PIXEL_PACK_BUFFER,this.gl_pbo),l.bufferData(l.PIXEL_PACK_BUFFER,u,l.STREAM_READ),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.bindFramebuffer(_.READ_FRAMEBUFFER,this.device.readbackFramebuffer),l.framebufferTexture2D(_.READ_FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,c.gl_texture,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,this.gl_pbo),l.readPixels(n,a,i,s,f,A,E*h),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(l.PIXEL_PACK_BUFFER,this.gl_pbo,0,o,E,0)]):[2,this.readTextureSync(r,n,a,i,s,o,E,u)]})})},t.prototype.readTextureSync=function(r,n,a,i,s,o,E,u){u===void 0&&(u=o.byteLength||0);var l=this.device.gl,c=r,f=this.device.translateTextureType(c.format);return l.bindFramebuffer(_.FRAMEBUFFER,this.device.readbackFramebuffer),l.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,c.gl_texture,0),l.pixelStorei(l.PACK_ALIGNMENT,4),l.readPixels(n,a,i,s,l.RGBA,f,o),o},t.prototype.readBuffer=function(r,n,a,i,s){return(0,p.mG)(this,void 0,void 0,function(){var o;return(0,p.Jh)(this,function(E){return o=this.device.gl,C(o)?[2,this.getBufferSubDataAsync(o.ARRAY_BUFFER,be(r,n),n,a,i,s)]:[2,Promise.reject()]})})},t.prototype.destroy=function(){e.prototype.destroy.call(this),C(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},t}(oe),on=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s,o,E=e.call(this,{id:n,device:a})||this;return E.type=P.RenderPipeline,E.drawMode=qr((s=i.topology)!==null&&s!==void 0?s:$.TRIANGLES),E.program=i.program,E.inputLayout=i.inputLayout,E.megaState=(0,p.pi)((0,p.pi)({},Pe(ge)),i.megaStateDescriptor),E.colorAttachmentFormats=i.colorAttachmentFormats.slice(),E.depthStencilAttachmentFormat=i.depthStencilAttachmentFormat,E.sampleCount=(o=i.sampleCount)!==null&&o!==void 0?o:1,E}return t}(oe),_n=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;return s.type=P.ComputePipeline,s.descriptor=i,s}return t}(oe),En=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(t){this.creationStacks.set(t,new Error().stack),this.liveObjects.add(t)},e.prototype.trackResourceDestroyed=function(t){this.deletionStacks.has(t)&&console.warn("Object double freed:",t,`

Creation stack: `,this.creationStacks.get(t),`

Deletion stack: `,this.deletionStacks.get(t),`

This stack: `,new Error().stack),this.deletionStacks.set(t,new Error().stack),this.liveObjects.delete(t)},e.prototype.checkForLeaks=function(){var t,r;try{for(var n=(0,p.XA)(this.liveObjects.values()),a=n.next();!a.done;a=n.next()){var i=a.value;console.warn("Object leaked:",i,"Creation stack:",this.creationStacks.get(i))}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.setResourceLeakCheck=function(t,r){r?this.liveObjects.add(t):this.liveObjects.delete(t)},e}(),un=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s,o,E=e.call(this,{id:n,device:a})||this;E.type=P.Sampler;var u=E.device.gl;if(C(u)){var l=E.device.ensureResourceExists(u.createSampler());u.samplerParameteri(l,_.TEXTURE_WRAP_S,Ke(i.addressModeU)),u.samplerParameteri(l,_.TEXTURE_WRAP_T,Ke(i.addressModeV)),u.samplerParameteri(l,_.TEXTURE_WRAP_R,Ke((s=i.addressModeW)!==null&&s!==void 0?s:i.addressModeU)),u.samplerParameteri(l,_.TEXTURE_MIN_FILTER,nt(i.minFilter,i.mipmapFilter)),u.samplerParameteri(l,_.TEXTURE_MAG_FILTER,nt(i.magFilter,Z.NO_MIP)),i.lodMinClamp!==void 0&&u.samplerParameterf(l,_.TEXTURE_MIN_LOD,i.lodMinClamp),i.lodMaxClamp!==void 0&&u.samplerParameterf(l,_.TEXTURE_MAX_LOD,i.lodMaxClamp),i.compareFunction!==void 0&&(u.samplerParameteri(l,u.TEXTURE_COMPARE_MODE,u.COMPARE_REF_TO_TEXTURE),u.samplerParameteri(l,u.TEXTURE_COMPARE_FUNC,i.compareFunction));var c=(o=i.maxAnisotropy)!==null&&o!==void 0?o:1;c>1&&E.device.EXT_texture_filter_anisotropic!==null&&(M(i.minFilter===K.BILINEAR&&i.magFilter===K.BILINEAR&&i.mipmapFilter===Z.LINEAR),u.samplerParameterf(l,E.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c)),E.gl_sampler=l}else E.descriptor=i;return E}return t.prototype.setTextureParameters=function(r,n,a){var i,s=this.device.gl,o=this.descriptor;this.isNPOT(n,a)?s.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR):s.texParameteri(r,_.TEXTURE_MIN_FILTER,nt(o.minFilter,o.mipmapFilter)),s.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,Ke(o.addressModeU)),s.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,Ke(o.addressModeV)),s.texParameteri(r,_.TEXTURE_MAG_FILTER,nt(o.magFilter,Z.NO_MIP));var E=(i=o.maxAnisotropy)!==null&&i!==void 0?i:1;E>1&&this.device.EXT_texture_filter_anisotropic!==null&&(M(o.minFilter===K.BILINEAR&&o.magFilter===K.BILINEAR&&o.mipmapFilter===Z.LINEAR),s.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E))},t.prototype.destroy=function(){e.prototype.destroy.call(this),C(this.device.gl)&&this.device.gl.deleteSampler(At(this))},t.prototype.isNPOT=function(r,n){return!Je(r)||!Je(n)},t}(oe),ln=function(){function e(){}return e.prototype.dispatchWorkgroups=function(t,r,n){},e.prototype.dispatchWorkgroupsIndirect=function(t,r){},e.prototype.setPipeline=function(t){},e.prototype.setBindings=function(t){},e.prototype.pushDebugGroup=function(t){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(t){},e}(),Rn=function(e){(0,p.ZT)(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=P.RenderBundle,r.commands=[],r}return t.prototype.push=function(r){this.commands.push(r)},t.prototype.replay=function(){this.commands.forEach(function(r){return r()})},t}(oe),zt=65536,cn=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,fn=function(){function e(t,r){r===void 0&&(r={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=Pe(ge),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=ve.LOWER_LEFT,this.clipSpaceNearZ=Fe.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=t,this.contextAttributes=Ce(t.getContextAttributes()),C(t)?(this.EXT_texture_norm16=t.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=t.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=t.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=t.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=t.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=t.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=t.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=t.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=t.getExtension("EXT_color_buffer_half_float"),t.getExtension("EXT_frag_depth"),t.getExtension("OES_element_index_uint"),t.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=t.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=t.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=t.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=t.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=t.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=t.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=t.getExtension("KHR_parallel_shader_compile"),C(t)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new pt({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:D.TEXTURE_2D,mipLevelCount:1,usage:se.RENDER_TARGET,format:this.contextAttributes.alpha===!1?R.U8_RGB_RT:R.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=w.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(D.TEXTURE_2D,w.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(D.TEXTURE_2D,w.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:W.VERTEX,hint:fe.STATIC}),C(t)&&(this.fallbackTexture2DArray=this.createFallbackTexture(D.TEXTURE_2D_ARRAY,w.Float),this.fallbackTexture3D=this.createFallbackTexture(D.TEXTURE_3D,w.Float),this.fallbackTextureCube=this.createFallbackTexture(D.TEXTURE_CUBE_MAP,w.Float)),this.currentMegaState.depthCompare=X.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=z.ALL,t.enable(t.DEPTH_TEST),t.enable(t.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new En)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(t,r){var n=t===D.TEXTURE_CUBE_MAP?6:1,a=r===w.Depth?R.D32F:R.U8_RGBA_NORM,i=this.createTexture({dimension:t,format:a,usage:se.SAMPLED,width:1,height:1,depthOrArrayLayers:n,mipLevelCount:1});return r===w.Float&&i.setImageData([new Uint8Array(4*n)]),ye(i)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var t=this.gl;if(this.maxVertexAttribs=t.getParameter(_.MAX_VERTEX_ATTRIBS),C(t)){this.uniformBufferMaxPageByteSize=Math.min(t.getParameter(_.MAX_UNIFORM_BLOCK_SIZE),zt),this.uniformBufferWordAlignment=t.getParameter(t.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=t.getInternalformatParameter(t.RENDERBUFFER,t.DEPTH32F_STENCIL8,t.SAMPLES);this.supportedSampleCounts=r?(0,p.ev)([],(0,p.CR)(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=zt;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(n,a){return n-a})},e.prototype.configureSwapChain=function(t,r,n){var a=this.scTexture;a.width=t,a.height=r,this.scPlatformFramebuffer=ur(n)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(t,r){switch(r===void 0&&(r=!1),t){case R.ALPHA:return _.ALPHA;case R.U8_LUMINANCE:case R.F16_LUMINANCE:case R.F32_LUMINANCE:return _.LUMINANCE;case R.F16_R:return _.R16F;case R.F16_RG:return _.RG16F;case R.F16_RGB:return _.RGB16F;case R.F16_RGBA:return _.RGBA16F;case R.F32_R:return _.R32F;case R.F32_RG:return _.RG32F;case R.F32_RGB:return _.RGB32F;case R.F32_RGBA:return C(this.gl)?_.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:_.RGBA;case R.U8_R_NORM:return _.R8;case R.U8_RG_NORM:return _.RG8;case R.U8_RGB_NORM:case R.U8_RGB_RT:return _.RGB8;case R.U8_RGB_SRGB:return _.SRGB8;case R.U8_RGBA_NORM:case R.U8_RGBA_RT:return C(this.gl)?_.RGBA8:r?_.RGBA4:_.RGBA;case R.U8_RGBA:return _.RGBA;case R.U8_RGBA_SRGB:case R.U8_RGBA_RT_SRGB:return _.SRGB8_ALPHA8;case R.U16_R:return _.R16UI;case R.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case R.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case R.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case R.U16_RGBA_5551:return _.RGB5_A1;case R.U16_RGB_565:return _.RGB565;case R.U32_R:return _.R32UI;case R.S8_RGBA_NORM:return _.RGBA8_SNORM;case R.S8_RG_NORM:return _.RG8_SNORM;case R.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case R.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case R.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case R.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case R.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case R.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case R.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case R.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case R.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case R.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case R.D32F_S8:return C(this.gl)?_.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?_.DEPTH_STENCIL:_.DEPTH_COMPONENT16;case R.D24_S8:return C(this.gl)?_.DEPTH24_STENCIL8:this.WEBGL_depth_texture?_.DEPTH_STENCIL:_.DEPTH_COMPONENT16;case R.D32F:return C(this.gl)?_.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?_.DEPTH_COMPONENT:_.DEPTH_COMPONENT16;case R.D24:return C(this.gl)?_.DEPTH_COMPONENT24:this.WEBGL_depth_texture?_.DEPTH_COMPONENT:_.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(t){var r=le(t);switch(r){case T.U8:return _.UNSIGNED_BYTE;case T.U16:return _.UNSIGNED_SHORT;case T.U32:return _.UNSIGNED_INT;case T.S8:return _.BYTE;case T.F16:return _.HALF_FLOAT;case T.F32:return _.FLOAT;case T.U16_PACKED_5551:return _.UNSIGNED_SHORT_5_5_5_1;case T.D32F:return C(this.gl)?_.FLOAT:this.WEBGL_depth_texture?_.UNSIGNED_INT:_.UNSIGNED_BYTE;case T.D24:return C(this.gl)?_.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?_.UNSIGNED_SHORT:_.UNSIGNED_BYTE;case T.D24S8:return C(this.gl)?_.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?_.UNSIGNED_INT_24_8_WEBGL:_.UNSIGNED_BYTE;case T.D32FS8:return _.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateInternalTextureFormat=function(t){switch(t){case R.F32_R:return _.R32F;case R.F32_RG:return _.RG32F;case R.F32_RGB:return _.RGB32F;case R.F32_RGBA:return _.RGBA32F;case R.F16_R:return _.R16F;case R.F16_RG:return _.RG16F;case R.F16_RGB:return _.RGB16F;case R.F16_RGBA:return _.RGBA16F}return this.translateTextureFormat(t)},e.prototype.translateTextureFormat=function(t){if(Lt(t)||t===R.F32_LUMINANCE||t===R.U8_LUMINANCE)return this.translateTextureInternalFormat(t);var r=C(this.gl)||!C(this.gl)&&!!this.WEBGL_depth_texture;switch(t){case R.D24_S8:case R.D32F_S8:return r?_.DEPTH_STENCIL:_.RGBA;case R.D24:case R.D32F:return r?_.DEPTH_COMPONENT:_.RGBA}var n=Zt(t),a=$e(t);switch(a){case N.A:return _.ALPHA;case N.R:return n?_.RED_INTEGER:_.RED;case N.RG:return n?_.RG_INTEGER:_.RG;case N.RGB:return n?_.RGB_INTEGER:_.RGB;case N.RGBA:return _.RGBA}},e.prototype.setActiveTexture=function(t){this.currentActiveTexture!==t&&(this.gl.activeTexture(t),this.currentActiveTexture=t)},e.prototype.bindVAO=function(t){this.currentBoundVAO!==t&&(C(this.gl)?this.gl.bindVertexArray(t):this.OES_vertex_array_object.bindVertexArrayOES(t),this.currentBoundVAO=t)},e.prototype.programCompiled=function(t){M(t.compileState!==te.NeedsCompile),t.compileState===te.Compiling&&(t.compileState=te.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(t))},e.prototype.useProgram=function(t){this.currentProgram!==t&&(this.programCompiled(t),this.gl.useProgram(t.gl_program),this.currentProgram=t)},e.prototype.ensureResourceExists=function(t){if(t===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return t},e.prototype.createBuffer=function(t){return new en({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTexture=function(t){return new pt({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createSampler=function(t){return new un({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTarget=function(t){return new rn({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTargetFromTexture=function(t){var r=t,n=r.format,a=r.width,i=r.height,s=r.mipLevelCount;return M(s===1),this.createRenderTarget({format:n,width:a,height:i,sampleCount:1,texture:t})},e.prototype.createProgram=function(t){var r,n,a,i=(r=t.vertex)===null||r===void 0?void 0:r.glsl;return!((n=t.vertex)===null||n===void 0)&&n.glsl&&(t.vertex.glsl=Ie(this.queryVendorInfo(),"vert",t.vertex.glsl)),!((a=t.fragment)===null||a===void 0)&&a.glsl&&(t.fragment.glsl=Ie(this.queryVendorInfo(),"frag",t.fragment.glsl)),this.createProgramSimple(t,i)},e.prototype.createProgramSimple=function(t,r){var n=new nn({id:this.getNextUniqueId(),device:this,descriptor:t},r);return n},e.prototype.createBindings=function(t){return new Lr({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createInputLayout=function(t){return new tn({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderPipeline=function(t){return new on({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createComputePass=function(){return new ln},e.prototype.createComputePipeline=function(t){return new _n({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createReadback=function(){return new sn({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(t,r){return new an({id:this.getNextUniqueId(),device:this,descriptor:{type:t,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(t){var r,n,a,i,s,o,E=t.colorAttachment;t.depthClearValue=(r=t.depthClearValue)!==null&&r!==void 0?r:"load",t.stencilClearValue=(n=t.stencilClearValue)!==null&&n!==void 0?n:"load";for(var u=0;u<E.length;u++)t.colorAttachmentLevel||(t.colorAttachmentLevel=[]),t.colorAttachmentLevel[u]=(a=t.colorAttachmentLevel[u])!==null&&a!==void 0?a:0,t.colorResolveToLevel||(t.colorResolveToLevel=[]),t.colorResolveToLevel[u]=(i=t.colorResolveToLevel[u])!==null&&i!==void 0?i:0,t.colorClearColor||(t.colorClearColor=[]),t.colorClearColor[u]=(s=t.colorClearColor[u])!==null&&s!==void 0?s:"load",t.colorStore||(t.colorStore=[]),t.colorStore[u]=(o=t.colorStore[u])!==null&&o!==void 0?o:!1},e.prototype.createRenderBundle=function(){return new Rn({id:this.getNextUniqueId(),device:this})},e.prototype.beginBundle=function(t){this.renderBundle=t},e.prototype.endBundle=function(){this.renderBundle=void 0},e.prototype.executeBundles=function(t){t.forEach(function(r){r.replay()})},e.prototype.createRenderPass=function(t){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=t,this.formatRenderPassDescriptor(t);var r=t.colorAttachment,n=t.colorAttachmentLevel,a=t.colorClearColor,i=t.colorResolveTo,s=t.colorResolveToLevel,o=t.depthStencilAttachment,E=t.depthClearValue,u=t.stencilClearValue,l=t.depthStencilResolveTo,c=i&&i.length===1&&i[0]===this.scTexture;this.setRenderPassParametersBegin(r.length,c);for(var f=0;f<r.length;f++)this.setRenderPassParametersColor(f,r[f],n[f],i[f],s[f],c);this.setRenderPassParametersDepthStencil(o,l,c),this.validateCurrentAttachments();for(var f=0;f<r.length;f++){var A=a[f];A!=="load"&&this.setRenderPassParametersClearColor(f,A.r,A.g,A.b,A.a)}return this.setRenderPassParametersClearDepthStencil(E,u),this},e.prototype.submitPass=function(t){M(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(t,r,n,a,i,s){var o=this.gl,E=t,u=a;if(M(u.mipLevelCount===1),M(E.mipLevelCount===1),C(o))E===this.scTexture?o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,E,0)),o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,u,0),o.blitFramebuffer(i,s,i+u.width,s+u.height,r,n,r+u.width,n+u.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null);else if(E===this.scTexture){var l=this.createRenderTargetFromTexture(a);this.submitBlitRenderPass(l,E)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(t,r,n){switch(t){case R.BC1_SRGB:case R.BC2_SRGB:case R.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?dt(r,n,4,4):!1;case R.BC1:case R.BC2:case R.BC3:return this.WEBGL_compressed_texture_s3tc!==null?dt(r,n,4,4):!1;case R.BC4_UNORM:case R.BC4_SNORM:case R.BC5_UNORM:case R.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?dt(r,n,4,4):!1;case R.U16_R_NORM:case R.U16_RG_NORM:case R.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case R.F32_R:case R.F32_RG:case R.F32_RGB:case R.F32_RGBA:return this.OES_texture_float_linear!==null;case R.F16_R:case R.F16_RG:case R.F16_RGB:case R.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(t){var r=this.gl;if(t.compileState===te.NeedsCompile)throw new Error("whoops");if(t.compileState===te.Compiling){var n=void 0;return this.KHR_parallel_shader_compile!==null?n=r.getProgramParameter(t.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):n=!0,n&&this.programCompiled(t),n}return t.compileState===te.NeedsBind||t.compileState===te.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(t){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(t){var r=t;return r},e.prototype.setResourceName=function(t,r){if(t.name=r,t.type===P.Buffer)for(var n=t.gl_buffer_pages,a=0;a<n.length;a++)Le(n[a],"".concat(r," Page ").concat(a));else if(t.type===P.Texture)Le(ye(t),r);else if(t.type===P.Sampler)Le(At(t),r);else if(t.type===P.RenderTarget){var i=t.gl_renderbuffer;i!==null&&Le(i,r)}else t.type===P.InputLayout&&Le(t.vao,r)},e.prototype.setResourceLeakCheck=function(t,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(t,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(t){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(t){},e.prototype.programPatched=function(t,r){M(this.shaderDebug)},e.prototype.getBufferData=function(t,r,n){n===void 0&&(n=0);var a=this.gl;C(a)&&(a.bindBuffer(a.COPY_READ_BUFFER,be(t,n*4)),a.getBufferSubData(a.COPY_READ_BUFFER,n*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=t},e.prototype.debugGroupStatisticsBufferUpload=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=t},e.prototype.debugGroupStatisticsTextureBind=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=t},e.prototype.debugGroupStatisticsTriangles=function(t){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=t},e.prototype.reportShaderError=function(t,r){var n=this.gl,a=n.getShaderParameter(t,n.COMPILE_STATUS);if(!a){console.error(cr(r));var i=n.getExtension("WEBGL_debug_shaders");i&&console.error(i.getTranslatedShaderSource(t)),console.error(n.getShaderInfoLog(t))}return a},e.prototype.checkProgramCompilationForErrors=function(t){var r=this.gl,n=t.gl_program;if(!r.getProgramParameter(n,r.LINK_STATUS)){var a=t.descriptor;if(!this.reportShaderError(t.gl_shader_vert,a.vertex.glsl)||!this.reportShaderError(t.gl_shader_frag,a.fragment.glsl))return;console.error(r.getProgramInfoLog(t.gl_program))}},e.prototype.bindFramebufferAttachment=function(t,r,n,a){var i=this.gl;if((0,ee.Z)(n))i.framebufferRenderbuffer(t,r,i.RENDERBUFFER,null);else if(n.type===P.RenderTarget)n.gl_renderbuffer!==null?i.framebufferRenderbuffer(t,r,i.RENDERBUFFER,n.gl_renderbuffer):n.texture!==null&&i.framebufferTexture2D(t,r,_.TEXTURE_2D,ye(n.texture),a);else if(n.type===P.Texture){var s=ye(n);n.dimension===D.TEXTURE_2D?i.framebufferTexture2D(t,r,_.TEXTURE_2D,s,a):C(i)&&(n.dimension,D.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(t,r){var n=this.gl,a=(0,ee.Z)(r)?d.Depth|d.Stencil:Me(r.format),i=!!(a&d.Depth),s=!!(a&d.Stencil);if(i&&s){var o=C(this.gl)||!C(this.gl)&&!!this.WEBGL_depth_texture;o?this.bindFramebufferAttachment(t,n.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,r,0)}else i?(this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(t,n.STENCIL_ATTACHMENT,null,0)):s&&(this.bindFramebufferAttachment(t,n.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var t=-1,r=-1,n=-1,a=0;a<this.currentColorAttachments.length;a++){var i=this.currentColorAttachments[a];i!==null&&(t===-1?(t=i.sampleCount,r=i.width,n=i.height):(M(t===i.sampleCount),M(r===i.width),M(n===i.height)))}this.currentDepthStencilAttachment&&(t===-1?t=this.currentDepthStencilAttachment.sampleCount:(M(t===this.currentDepthStencilAttachment.sampleCount),M(r===this.currentDepthStencilAttachment.width),M(n===this.currentDepthStencilAttachment.height))),this.currentSampleCount=t},e.prototype.setRenderPassParametersBegin=function(t,r){r===void 0&&(r=!1);var n=this.gl;if(r)n.bindFramebuffer(_.FRAMEBUFFER,null);else if(C(n)?n.bindFramebuffer(_.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||n.bindFramebuffer(_.FRAMEBUFFER,this.renderPassDrawFramebuffer),C(n)?n.drawBuffers([_.COLOR_ATTACHMENT0,_.COLOR_ATTACHMENT1,_.COLOR_ATTACHMENT2,_.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([_.COLOR_ATTACHMENT0_WEBGL,_.COLOR_ATTACHMENT1_WEBGL,_.COLOR_ATTACHMENT2_WEBGL,_.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var a=t;a<this.currentColorAttachments.length;a++){var i=C(n)?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,s=C(n)?_.COLOR_ATTACHMENT0:_.COLOR_ATTACHMENT0_WEBGL;n.framebufferRenderbuffer(i,s+a,_.RENDERBUFFER,null),n.framebufferTexture2D(i,s+a,_.TEXTURE_2D,null,0)}this.currentColorAttachments.length=t},e.prototype.setRenderPassParametersColor=function(t,r,n,a,i,s){s===void 0&&(s=!1);var o=this.gl,E=C(o);(this.currentColorAttachments[t]!==r||this.currentColorAttachmentLevels[t]!==n)&&(this.currentColorAttachments[t]=r,this.currentColorAttachmentLevels[t]=n,!s&&(E||!E&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(E?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,(E?_.COLOR_ATTACHMENT0:_.COLOR_ATTACHMENT0_WEBGL)+t,r,n),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[t]!==a||this.currentColorResolveToLevels[t]!==i)&&(this.currentColorResolveTos[t]=a,this.currentColorResolveToLevels[t]=i,a!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(t,r,n){n===void 0&&(n=!1);var a=this.gl;this.currentDepthStencilAttachment!==t&&(this.currentDepthStencilAttachment=t,!n&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(C(a)?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(t,r,n,a,i){var s=this.gl;if(this.OES_draw_buffers_indexed!==null){var o=this.currentMegaState.attachmentsState[t];o&&o.channelWriteMask!==z.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(t,!0,!0,!0,!0),o.channelWriteMask=z.ALL)}else{var o=this.currentMegaState.attachmentsState[0];o&&o.channelWriteMask!==z.ALL&&(s.colorMask(!0,!0,!0,!0),o.channelWriteMask=z.ALL)}this.setScissorRectEnabled(!1),C(s)?s.clearBufferfv(s.COLOR,t,[r,n,a,i]):(s.clearColor(r,n,a,i),s.clear(s.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(t,r){t===void 0&&(t="load"),r===void 0&&(r="load");var n=this.gl;t!=="load"&&(M(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(n.depthMask(!0),this.currentMegaState.depthWrite=!0),C(n)?n.clearBufferfv(n.DEPTH,0,[t]):(n.clearDepth(t),n.clear(n.DEPTH_BUFFER_BIT))),r!=="load"&&(M(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(n.enable(n.STENCIL_TEST),n.stencilMask(255),this.currentMegaState.stencilWrite=!0),C(n)?n.clearBufferiv(n.STENCIL,0,[r]):(n.clearStencil(r),n.clear(n.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(t){var r=this,n;if(this.renderBundle){this.renderBundle.push(function(){return r.setBindings(t)});return}var a=this.gl,i=t,s=i.uniformBufferBindings,o=i.samplerBindings,E=i.bindingLayouts;M(0<E.bindingLayoutTables.length);var u=E.bindingLayoutTables[0];M(s.length>=u.numUniformBuffers),M(o.length>=u.numSamplers);for(var l=0;l<s.length;l++){var c=s[l];if(c.size!==0){var f=u.firstUniformBuffer+l,A=c.buffer,h=c.offset||0,g=c.size||A.byteSize;if(A!==this.currentUniformBuffers[f]||h!==this.currentUniformBufferByteOffsets[f]||g!==this.currentUniformBufferByteSizes[f]){var O=h%A.pageByteSize,F=A.gl_buffer_pages[h/A.pageByteSize|0];M(O+g<=A.pageByteSize),C(a)&&a.bindBufferRange(a.UNIFORM_BUFFER,f,F,O,g),this.currentUniformBuffers[f]=A,this.currentUniformBufferByteOffsets[f]=h,this.currentUniformBufferByteSizes[f]=g}}}for(var l=0;l<u.numSamplers;l++){var c=o[l],B=u.firstSampler+l,x=c!==null&&c.sampler!==null?At(c.sampler):null,b=c!==null&&c.texture!==null?ye(c.texture):null;if(this.currentSamplers[B]!==x&&(C(a)&&a.bindSampler(B,x),this.currentSamplers[B]=x),this.currentTextures[B]!==b){if(this.setActiveTexture(a.TEXTURE0+B),b!==null){var k=Ce(c).texture,U=k.gl_target,S=k.width,v=k.height;c.texture.textureIndex=B,a.bindTexture(U,b),C(a)||(n=c.sampler)===null||n===void 0||n.setTextureParameters(U,S,v),this.debugGroupStatisticsTextureBind()}else{var y=(0,p.pi)((0,p.pi)({},c),xt),L=y.dimension,Q=y.formatKind,U=Gr(L);a.bindTexture(U,this.getFallbackTexture((0,p.pi)({gl_target:U,formatKind:Q},y)))}this.currentTextures[B]=b}}},e.prototype.setViewport=function(t,r,n,a){var i=this.gl;i.viewport(t,r,n,a)},e.prototype.setScissorRect=function(t,r,n,a){var i=this.gl;this.setScissorRectEnabled(!0),i.scissor(t,r,n,a)},e.prototype.applyAttachmentStateIndexed=function(t,r,n){var a=this.gl,i=this.OES_draw_buffers_indexed;r.channelWriteMask!==n.channelWriteMask&&(i.colorMaskiOES(t,!!(n.channelWriteMask&z.RED),!!(n.channelWriteMask&z.GREEN),!!(n.channelWriteMask&z.BLUE),!!(n.channelWriteMask&z.ALPHA)),r.channelWriteMask=n.channelWriteMask);var s=r.rgbBlendState.blendMode!==n.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==n.alphaBlendState.blendMode,o=r.rgbBlendState.blendSrcFactor!==n.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==n.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==n.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==n.alphaBlendState.blendDstFactor;(o||s)&&(Ne(r.rgbBlendState)&&Ne(r.alphaBlendState)?i.enableiOES(t,a.BLEND):Ne(n.rgbBlendState)&&Ne(n.alphaBlendState)&&i.disableiOES(t,a.BLEND)),s&&(i.blendEquationSeparateiOES(t,n.rgbBlendState.blendMode,n.alphaBlendState.blendMode),r.rgbBlendState.blendMode=n.rgbBlendState.blendMode,r.alphaBlendState.blendMode=n.alphaBlendState.blendMode),o&&(i.blendFuncSeparateiOES(t,n.rgbBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor,n.alphaBlendState.blendSrcFactor,n.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=n.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=n.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=n.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=n.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(t,r){var n=this.gl;t.channelWriteMask!==r.channelWriteMask&&(n.colorMask(!!(r.channelWriteMask&z.RED),!!(r.channelWriteMask&z.GREEN),!!(r.channelWriteMask&z.BLUE),!!(r.channelWriteMask&z.ALPHA)),t.channelWriteMask=r.channelWriteMask);var a=t.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||t.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,i=t.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||t.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||t.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||t.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(i||a)&&(Ne(t.rgbBlendState)&&Ne(t.alphaBlendState)?n.enable(n.BLEND):Ne(r.rgbBlendState)&&Ne(r.alphaBlendState)&&n.disable(n.BLEND)),a&&(n.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),t.rgbBlendState.blendMode=r.rgbBlendState.blendMode,t.alphaBlendState.blendMode=r.alphaBlendState.blendMode),i&&(n.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),t.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,t.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,t.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(t){var r=this.gl,n=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var a=0;a<t.attachmentsState.length;a++)this.applyAttachmentStateIndexed(a,n.attachmentsState[0],t.attachmentsState[0]);else M(t.attachmentsState.length===1),this.applyAttachmentState(n.attachmentsState[0],t.attachmentsState[0]);Ft(n.blendConstant,t.blendConstant)||(r.blendColor(t.blendConstant.r,t.blendConstant.g,t.blendConstant.b,t.blendConstant.a),Mt(n.blendConstant,t.blendConstant)),n.depthCompare!==t.depthCompare&&(r.depthFunc(t.depthCompare),n.depthCompare=t.depthCompare),!!n.depthWrite!=!!t.depthWrite&&(r.depthMask(t.depthWrite),n.depthWrite=t.depthWrite),!!n.stencilWrite!=!!t.stencilWrite&&(r.stencilMask(t.stencilWrite?255:0),n.stencilWrite=t.stencilWrite);var i=!1;if(!tt(n.stencilFront,t.stencilFront)){i=!0;var s=t.stencilFront,o=s.passOp,E=s.failOp,u=s.depthFailOp,l=s.compare;(n.stencilFront.passOp!==o||n.stencilFront.failOp!==E||n.stencilFront.depthFailOp!==u)&&(r.stencilOpSeparate(r.FRONT,E,u,o),n.stencilFront.passOp=o,n.stencilFront.failOp=E,n.stencilFront.depthFailOp=u),n.stencilFront.compare!==l&&(this.setStencilReference(0),n.stencilFront.compare=l)}if(!tt(n.stencilBack,t.stencilBack)){i=!0;var c=t.stencilBack,o=c.passOp,E=c.failOp,u=c.depthFailOp,l=c.compare;(n.stencilBack.passOp!==o||n.stencilBack.failOp!==E||n.stencilBack.depthFailOp!==u)&&(r.stencilOpSeparate(r.BACK,E,u,o),n.stencilBack.passOp=o,n.stencilBack.failOp=E,n.stencilBack.depthFailOp=u),n.stencilBack.compare!==l&&(this.setStencilReference(0),n.stencilBack.compare=l)}(n.stencilFront.mask!==t.stencilFront.mask||n.stencilBack.mask!==t.stencilBack.mask)&&(i=!0,n.stencilFront.mask=t.stencilFront.mask,n.stencilBack.mask=t.stencilBack.mask),i&&this.applyStencil(),n.cullMode!==t.cullMode&&(n.cullMode===ae.NONE?r.enable(r.CULL_FACE):t.cullMode===ae.NONE&&r.disable(r.CULL_FACE),t.cullMode===ae.BACK?r.cullFace(r.BACK):t.cullMode===ae.FRONT?r.cullFace(r.FRONT):t.cullMode===ae.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),n.cullMode=t.cullMode),n.frontFace!==t.frontFace&&(r.frontFace(t.frontFace),n.frontFace=t.frontFace),n.polygonOffset!==t.polygonOffset&&(t.polygonOffset?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),n.polygonOffset=t.polygonOffset),(n.polygonOffsetFactor!==t.polygonOffsetFactor||n.polygonOffsetUnits!==t.polygonOffsetUnits)&&(r.polygonOffset(t.polygonOffsetFactor,t.polygonOffsetUnits),n.polygonOffsetFactor=t.polygonOffsetFactor,n.polygonOffsetUnits=t.polygonOffsetUnits)},e.prototype.validatePipelineFormats=function(t){for(var r=0;r<this.currentColorAttachments.length;r++)var n=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&M(this.currentDepthStencilAttachment.format===t.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&M(this.currentSampleCount===t.sampleCount)},e.prototype.setPipeline=function(t){var r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setPipeline(t)});return}this.currentPipeline=t,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var n=this.currentPipeline.program;if(this.useProgram(n),n.compileState===te.NeedsBind){var a=this.gl,i=n.gl_program,s=n.descriptor,o=Qt(s.vertex.glsl,cn);if(C(a))for(var E=0;E<o.length;E++){var u=(0,p.CR)(o[E],2),l=u[1],c=a.getUniformBlockIndex(i,l);c!==-1&&c!==4294967295&&a.uniformBlockBinding(i,c,E)}for(var f=Qt(s.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),E=0;E<f.length;E++){var A=(0,p.CR)(f[E],3),h=A[1],g=A[2],O=a.getUniformLocation(i,h);a.uniform1i(O,parseInt(g))}n.compileState=te.ReadyToUse}},e.prototype.setVertexInput=function(t,r,n){var a,i,s=this,o;if(this.renderBundle){this.renderBundle.push(function(){return s.setVertexInput(t,r,n)});return}if(t!==null){M(this.currentPipeline.inputLayout===t);var E=t;this.bindVAO(E.vao);for(var u=this.gl,l=0;l<E.vertexBufferDescriptors.length;l++){var c=E.vertexBufferDescriptors[l],f=c.arrayStride,A=c.attributes;try{for(var h=(a=void 0,(0,p.XA)(A)),g=h.next();!g.done;g=h.next()){var O=g.value,F=O.shaderLocation,B=O.offset,x=C(u)?F:(o=E.program.attributes[F])===null||o===void 0?void 0:o.location;if(!(0,ee.Z)(x)){var b=r[l];if(b===null)continue;var k=O.vertexFormat;u.bindBuffer(u.ARRAY_BUFFER,be(b.buffer));var U=(b.offset||0)+B;u.vertexAttribPointer(x,k.size,k.type,k.normalized,f,U)}}}catch(v){a={error:v}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}}if(M(n!==null==(E.indexBufferFormat!==null)),n!==null){var S=n.buffer;M(S.usage===W.INDEX),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,be(S)),this.currentIndexBufferByteOffset=n.offset||0}else this.currentIndexBufferByteOffset=null}else M(this.currentPipeline.inputLayout===null),M(n===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(t){this.currentStencilRef!==t&&(this.currentStencilRef=t,this.applyStencil())},e.prototype.draw=function(t,r,n,a){var i,s=this;if(this.renderBundle){this.renderBundle.push(function(){return s.draw(t,r,n,a)});return}var o=this.gl,E=this.currentPipeline;if(r){var u=[E.drawMode,n||0,t,r];C(o)?o.drawArraysInstanced.apply(o,(0,p.ev)([],(0,p.CR)(u),!1)):(i=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(i,(0,p.ev)([],(0,p.CR)(u),!1))}else o.drawArrays(E.drawMode,n,t);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(t/3*Math.max(r,1))},e.prototype.drawIndexed=function(t,r,n,a,i){var s,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.drawIndexed(t,r,n,a,i)});return}var E=this.gl,u=this.currentPipeline,l=Ce(u.inputLayout),c=Ce(this.currentIndexBufferByteOffset)+n*l.indexBufferCompByteSize;if(r){var f=[u.drawMode,t,l.indexBufferType,c,r];C(E)?E.drawElementsInstanced.apply(E,(0,p.ev)([],(0,p.CR)(f),!1)):(s=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(s,(0,p.ev)([],(0,p.CR)(f),!1))}else E.drawElements(u.drawMode,t,l.indexBufferType,c);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(t/3*Math.max(r,1))},e.prototype.drawIndirect=function(t,r){},e.prototype.drawIndexedIndirect=function(t,r){},e.prototype.beginOcclusionQuery=function(t){var r=this.gl;if(C(r)){var n=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(n.gl_query_type,n.gl_query[t])}},e.prototype.endOcclusionQuery=function(){var t=this.gl;if(C(t)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;t.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(t){var r=t;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(t){},e.prototype.endPass=function(){for(var t=this.gl,r=C(t),n=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,a=!1,i=0;i<this.currentColorAttachments.length;i++){var s=this.currentColorAttachments[i];if(s!==null){var o=this.currentColorResolveTos[i],E=!1;o!==null&&(M(s.width===o.width&&s.height===o.height),this.setScissorRectEnabled(!1),n||(r&&t.bindFramebuffer(t.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,s,this.currentColorAttachmentLevels[i])),E=!0,n||(o===this.scTexture?t.bindFramebuffer(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,this.scPlatformFramebuffer):(t.bindFramebuffer(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&t.framebufferTexture2D(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o.gl_texture,this.currentColorResolveToLevels[i]))),n||(r?(t.blitFramebuffer(0,0,s.width,s.height,0,0,o.width,o.height,t.COLOR_BUFFER_BIT,t.LINEAR),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(s,o)),a=!0),this.currentRenderPassDescriptor.colorStore[i]||!n&&!E&&(t.bindFramebuffer(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,t.COLOR_ATTACHMENT0,s,this.currentColorAttachmentLevels[i])),n||t.bindFramebuffer(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var u=this.currentDepthStencilAttachment;if(u){var l=this.currentDepthStencilResolveTo,E=!1;l&&(M(u.width===l.width&&u.height===l.height),this.setScissorRectEnabled(!1),n||(t.bindFramebuffer(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),t.bindFramebuffer(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,u),this.bindFramebufferDepthStencilAttachment(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,l))),E=!0,n||(r&&t.blitFramebuffer(0,0,u.width,u.height,0,0,l.width,l.height,t.DEPTH_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,null)),a=!0),!n&&!this.currentRenderPassDescriptor.depthStencilStore&&(E||(t.bindFramebuffer(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,u),E=!0),r&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[t.DEPTH_STENCIL_ATTACHMENT])),!n&&E&&t.bindFramebuffer(r?_.READ_FRAMEBUFFER:_.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!n&&!a&&t.bindFramebuffer(r?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(t){if(this.currentScissorEnabled!==t){var r=this.gl;t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=t}},e.prototype.applyStencil=function(){(0,ee.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(_.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(_.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},e.prototype.getFallbackTexture=function(t){var r=t.gl_target,n=t.formatKind;if(r===_.TEXTURE_2D)return n===w.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===_.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===_.TEXTURE_3D)return this.fallbackTexture3D;if(r===_.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(t,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:W.VERTEX|W.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Be.VERTEX,attributes:[{format:R.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:$.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[R.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:Pe(ge)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:t.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:t}));var n=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var a=this.createRenderPass({colorAttachment:[t],colorResolveTo:[r],colorClearColor:[_r]}),i=this.getCanvas(),s=i.width,o=i.height;a.setPipeline(this.blitRenderPipeline),a.setBindings(this.blitBindings),a.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),a.setViewport(0,0,s,o),this.gl.disable(this.gl.BLEND),a.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=n,this.inBlitRenderPass=!1},e}(),Tn=function(){function e(t){this.pluginOptions=t}return e.prototype.createSwapChain=function(t){return(0,p.mG)(this,void 0,void 0,function(){var r,n,a,i,s,o,E,u,l,c,f,A,h;return(0,p.Jh)(this,function(g){return r=this.pluginOptions,n=r.targets,a=r.xrCompatible,i=r.antialias,s=i===void 0?!1:i,o=r.preserveDrawingBuffer,E=o===void 0?!1:o,u=r.premultipliedAlpha,l=u===void 0?!0:u,c=r.shaderDebug,f=r.trackResources,A={antialias:s,preserveDrawingBuffer:E,stencil:!0,premultipliedAlpha:l,xrCompatible:a},this.handleContextEvents(t),n.includes("webgl2")&&(h=t.getContext("webgl2",A)||t.getContext("experimental-webgl2",A)),!h&&n.includes("webgl1")&&(h=t.getContext("webgl",A)||t.getContext("experimental-webgl",A)),[2,new fn(h,{shaderDebug:c,trackResources:f})]})})},e.prototype.handleContextEvents=function(t){var r=this.pluginOptions,n=r.onContextLost,a=r.onContextRestored,i=r.onContextCreationError;i&&t.addEventListener("webglcontextcreationerror",i,!1),n&&t.addEventListener("webglcontextlost",n,!1),a&&t.addEventListener("webglcontextrestored",a,!1)},e}();let V;const jt=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&jt.decode();let Ze=null;function it(){return(Ze===null||Ze.byteLength===0)&&(Ze=new Uint8Array(V.memory.buffer)),Ze}function at(e,t){return e=e>>>0,jt.decode(it().subarray(e,e+t))}const Ae=new Array(128).fill(void 0);Ae.push(void 0,null,!0,!1);let qe=Ae.length;function An(e){qe===Ae.length&&Ae.push(Ae.length+1);const t=qe;return qe=Ae[t],Ae[t]=e,t}function st(e){return Ae[e]}function dn(e){e<132||(Ae[e]=qe,qe=e)}function pn(e){const t=st(e);return dn(e),t}let xe=0;const ot=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},hn=typeof ot.encodeInto=="function"?function(e,t){return ot.encodeInto(e,t)}:function(e,t){const r=ot.encode(e);return t.set(r),{read:e.length,written:r.length}};function _t(e,t,r){if(r===void 0){const o=ot.encode(e),E=t(o.length,1)>>>0;return it().subarray(E,E+o.length).set(o),xe=o.length,E}let n=e.length,a=t(n,1)>>>0;const i=it();let s=0;for(;s<n;s++){const o=e.charCodeAt(s);if(o>127)break;i[a+s]=o}if(s!==n){s!==0&&(e=e.slice(s)),a=r(a,n,n=s+e.length*3,1)>>>0;const o=it().subarray(a+s,a+n),E=hn(e,o);s+=E.written}return xe=s,a}let Qe=null;function Et(){return(Qe===null||Qe.byteLength===0)&&(Qe=new Int32Array(V.memory.buffer)),Qe}function Sn(e,t,r){let n,a;try{const o=V.__wbindgen_add_to_stack_pointer(-16),E=_t(e,V.__wbindgen_malloc,V.__wbindgen_realloc),u=xe,l=_t(t,V.__wbindgen_malloc,V.__wbindgen_realloc),c=xe;V.glsl_compile(o,E,u,l,c,r);var i=Et()[o/4+0],s=Et()[o/4+1];return n=i,a=s,at(i,s)}finally{V.__wbindgen_add_to_stack_pointer(16),V.__wbindgen_free(n,a,1)}}class ze{static __wrap(t){t=t>>>0;const r=Object.create(ze.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();V.__wbg_wgslcomposer_free(t)}constructor(){const t=V.wgslcomposer_new();return ze.__wrap(t)}load_composable(t){const r=_t(t,V.__wbindgen_malloc,V.__wbindgen_realloc),n=xe;V.wgslcomposer_load_composable(this.__wbg_ptr,r,n)}wgsl_compile(t){let r,n;try{const s=V.__wbindgen_add_to_stack_pointer(-16),o=_t(t,V.__wbindgen_malloc,V.__wbindgen_realloc),E=xe;V.wgslcomposer_wgsl_compile(s,this.__wbg_ptr,o,E);var a=Et()[s/4+0],i=Et()[s/4+1];return r=a,n=i,at(a,i)}finally{V.__wbindgen_add_to_stack_pointer(16),V.__wbindgen_free(r,n,1)}}}function Nn(e,t){return Ct(this,null,function*(){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=yield e.arrayBuffer();return yield WebAssembly.instantiate(r,t)}else{const r=yield WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}})}function Bn(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(t,r){const n=at(t,r);return An(n)},e.wbg.__wbindgen_object_drop_ref=function(t){pn(t)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(t){console.log(st(t))},e.wbg.__wbg_log_576ca876af0d4a77=function(t,r){console.log(st(t),st(r))},e.wbg.__wbindgen_throw=function(t,r){throw new Error(at(t,r))},e}function Cn(e,t){return V=e.exports,$t.__wbindgen_wasm_module=t,Qe=null,Ze=null,V}function $t(e){return Ct(this,null,function*(){if(V!==void 0)return V;const t=Bn();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=yield Nn(yield e,t);return Cn(r,n)})}var q;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(q||(q={}));var ht;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(ht||(ht={}));function gn(e){var t=0;return e&se.SAMPLED&&(t|=q.TEXTURE_BINDING|q.COPY_DST|q.COPY_SRC),e&se.STORAGE&&(t|=q.TEXTURE_BINDING|q.STORAGE_BINDING|q.COPY_SRC|q.COPY_DST),e&se.RENDER_TARGET&&(t|=q.RENDER_ATTACHMENT|q.TEXTURE_BINDING|q.COPY_SRC|q.COPY_DST),t}function St(e){if(e===R.U8_R_NORM)return"r8unorm";if(e===R.S8_R_NORM)return"r8snorm";if(e===R.U8_RG_NORM)return"rg8unorm";if(e===R.S8_RG_NORM)return"rg8snorm";if(e===R.U32_R)return"r32uint";if(e===R.S32_R)return"r32sint";if(e===R.F32_R)return"r32float";if(e===R.U16_RG)return"rg16uint";if(e===R.S16_RG)return"rg16sint";if(e===R.F16_RG)return"rg16float";if(e===R.U8_RGBA_RT)return"bgra8unorm";if(e===R.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===R.U8_RGBA_NORM)return"rgba8unorm";if(e===R.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===R.S8_RGBA_NORM)return"rgba8snorm";if(e===R.U32_RG)return"rg32uint";if(e===R.S32_RG)return"rg32sint";if(e===R.F32_RG)return"rg32float";if(e===R.U16_RGBA)return"rgba16uint";if(e===R.S16_RGBA)return"rgba16sint";if(e===R.F16_RGBA)return"rgba16float";if(e===R.F32_RGBA)return"rgba32float";if(e===R.U32_RGBA)return"rgba32uint";if(e===R.S32_RGBA)return"rgba32sint";if(e===R.D24)return"depth24plus";if(e===R.D24_S8)return"depth24plus-stencil8";if(e===R.D32F)return"depth32float";if(e===R.D32F_S8)return"depth32float-stencil8";if(e===R.BC1)return"bc1-rgba-unorm";if(e===R.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===R.BC2)return"bc2-rgba-unorm";if(e===R.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===R.BC3)return"bc3-rgba-unorm";if(e===R.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===R.BC4_SNORM)return"bc4-r-snorm";if(e===R.BC4_UNORM)return"bc4-r-unorm";if(e===R.BC5_SNORM)return"bc5-rg-snorm";if(e===R.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function In(e){if(e===D.TEXTURE_2D)return"2d";if(e===D.TEXTURE_CUBE_MAP)return"2d";if(e===D.TEXTURE_2D_ARRAY)return"2d";if(e===D.TEXTURE_3D)return"3d";throw new Error("whoops")}function On(e){if(e===D.TEXTURE_2D)return"2d";if(e===D.TEXTURE_CUBE_MAP)return"cube";if(e===D.TEXTURE_2D_ARRAY)return"2d-array";if(e===D.TEXTURE_3D)return"3d";throw new Error("whoops")}function Un(e){var t=0;return e&W.INDEX&&(t|=GPUBufferUsage.INDEX),e&W.VERTEX&&(t|=GPUBufferUsage.VERTEX),e&W.UNIFORM&&(t|=GPUBufferUsage.UNIFORM),e&W.STORAGE&&(t|=GPUBufferUsage.STORAGE),e&W.COPY_SRC&&(t|=GPUBufferUsage.COPY_SRC),e&W.INDIRECT&&(t|=GPUBufferUsage.INDIRECT),t|=GPUBufferUsage.COPY_DST,t}function Nt(e){if(e===ne.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===ne.REPEAT)return"repeat";if(e===ne.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function Jt(e){if(e===K.BILINEAR)return"linear";if(e===K.POINT)return"nearest";throw new Error("whoops")}function vn(e){if(e===Z.LINEAR)return"linear";if(e===Z.NEAREST)return"nearest";if(e===Z.NO_MIP)return"nearest";throw new Error("whoops")}function Xe(e){var t=e;return t.gpuBuffer}function Fn(e){var t=e;return t.gpuSampler}function Mn(e){var t=e;return t.querySet}function Dn(e){if(e===je.OcclusionConservative)return"occlusion";throw new Error("whoops")}function Pn(e){switch(e){case $.TRIANGLES:return"triangle-list";case $.POINTS:return"point-list";case $.TRIANGLE_STRIP:return"triangle-strip";case $.LINES:return"line-list";case $.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function mn(e){if(e===ae.NONE)return"none";if(e===ae.FRONT)return"front";if(e===ae.BACK)return"back";throw new Error("whoops")}function bn(e){if(e===He.CCW)return"ccw";if(e===He.CW)return"cw";throw new Error("whoops")}function yn(e,t){return{topology:Pn(e),cullMode:mn(t.cullMode),frontFace:bn(t.frontFace)}}function Gt(e){if(e===Y.ZERO)return"zero";if(e===Y.ONE)return"one";if(e===Y.SRC)return"src";if(e===Y.ONE_MINUS_SRC)return"one-minus-src";if(e===Y.DST)return"dst";if(e===Y.ONE_MINUS_DST)return"one-minus-dst";if(e===Y.SRC_ALPHA)return"src-alpha";if(e===Y.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===Y.DST_ALPHA)return"dst-alpha";if(e===Y.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===Y.CONST)return"constant";if(e===Y.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===Y.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function xn(e){if(e===Ee.ADD)return"add";if(e===Ee.SUBSTRACT)return"subtract";if(e===Ee.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===Ee.MIN)return"min";if(e===Ee.MAX)return"max";throw new Error("whoops")}function er(e){return{operation:xn(e.blendMode),srcFactor:Gt(e.blendSrcFactor),dstFactor:Gt(e.blendDstFactor)}}function tr(e){return e.blendMode===Ee.ADD&&e.blendSrcFactor===Y.ONE&&e.blendDstFactor===Y.ZERO}function Xn(e){if(!(tr(e.rgbBlendState)&&tr(e.alphaBlendState)))return{color:er(e.rgbBlendState),alpha:er(e.alphaBlendState)}}function Wn(e,t){return{format:St(t),blend:Xn(e),writeMask:e.channelWriteMask}}function wn(e,t){return t.attachmentsState.map(function(r,n){return Wn(r,e[n])})}function ut(e){if(e===X.NEVER)return"never";if(e===X.LESS)return"less";if(e===X.EQUAL)return"equal";if(e===X.LEQUAL)return"less-equal";if(e===X.GREATER)return"greater";if(e===X.NOTEQUAL)return"not-equal";if(e===X.GEQUAL)return"greater-equal";if(e===X.ALWAYS)return"always";throw new Error("whoops")}function We(e){if(e===j.KEEP)return"keep";if(e===j.REPLACE)return"replace";if(e===j.ZERO)return"zero";if(e===j.DECREMENT_CLAMP)return"decrement-clamp";if(e===j.DECREMENT_WRAP)return"decrement-wrap";if(e===j.INCREMENT_CLAMP)return"increment-clamp";if(e===j.INCREMENT_WRAP)return"increment-wrap";if(e===j.INVERT)return"invert";throw new Error("whoops")}function Hn(e,t){if(!(0,ee.Z)(e))return{format:St(e),depthWriteEnabled:!!t.depthWrite,depthCompare:ut(t.depthCompare),depthBias:t.polygonOffset?t.polygonOffsetUnits:0,depthBiasSlopeScale:t.polygonOffset?t.polygonOffsetFactor:0,stencilFront:{compare:ut(t.stencilFront.compare),passOp:We(t.stencilFront.passOp),failOp:We(t.stencilFront.failOp),depthFailOp:We(t.stencilFront.depthFailOp)},stencilBack:{compare:ut(t.stencilBack.compare),passOp:We(t.stencilBack.passOp),failOp:We(t.stencilBack.failOp),depthFailOp:We(t.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Vn(e){if(e!==null){if(e===R.U16_R)return"uint16";if(e===R.U32_R)return"uint32";throw new Error("whoops")}}function kn(e){if(e===Be.VERTEX)return"vertex";if(e===Be.INSTANCE)return"instance";throw new Error("whoops")}function Yn(e){if(e===R.U8_R)return"uint8x2";if(e===R.U8_RG)return"uint8x2";if(e===R.U8_RGB)return"uint8x4";if(e===R.U8_RGBA)return"uint8x4";if(e===R.U8_RG_NORM)return"unorm8x2";if(e===R.U8_RGBA_NORM)return"unorm8x4";if(e===R.S8_RGB_NORM)return"snorm8x4";if(e===R.S8_RGBA_NORM)return"snorm8x4";if(e===R.U16_RG_NORM)return"unorm16x2";if(e===R.U16_RGBA_NORM)return"unorm16x4";if(e===R.S16_RG_NORM)return"snorm16x2";if(e===R.S16_RGBA_NORM)return"snorm16x4";if(e===R.S16_RG)return"uint16x2";if(e===R.F16_RG)return"float16x2";if(e===R.F16_RGBA)return"float16x4";if(e===R.F32_R)return"float32";if(e===R.F32_RG)return"float32x2";if(e===R.F32_RGB)return"float32x3";if(e===R.F32_RGBA)return"float32x4";throw"whoops"}function Kn(e){var t=le(e);switch(t){case T.BC1:case T.BC2:case T.BC3:case T.BC4_SNORM:case T.BC4_UNORM:case T.BC5_SNORM:case T.BC5_UNORM:return!0;default:return!1}}function Ln(e){var t=le(e);switch(t){case T.BC1:case T.BC2:case T.BC3:case T.BC4_SNORM:case T.BC4_UNORM:case T.BC5_SNORM:case T.BC5_UNORM:return 4;default:return 1}}function rr(e,t,r,n){switch(r===void 0&&(r=!1),e){case R.S8_R:case R.S8_R_NORM:case R.S8_RG_NORM:case R.S8_RGB_NORM:case R.S8_RGBA_NORM:{var a=t instanceof ArrayBuffer?new Int8Array(t):new Int8Array(t);return n&&a.set(new Int8Array(n)),a}case R.U8_R:case R.U8_R_NORM:case R.U8_RG:case R.U8_RG_NORM:case R.U8_RGB:case R.U8_RGB_NORM:case R.U8_RGB_SRGB:case R.U8_RGBA:case R.U8_RGBA_NORM:case R.U8_RGBA_SRGB:{var i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t);return n&&i.set(new Uint8Array(n)),i}case R.S16_R:case R.S16_RG:case R.S16_RG_NORM:case R.S16_RGB_NORM:case R.S16_RGBA:case R.S16_RGBA_NORM:{var s=t instanceof ArrayBuffer?new Int16Array(t):new Int16Array(r?t/2:t);return n&&s.set(new Int16Array(n)),s}case R.U16_R:case R.U16_RGB:case R.U16_RGBA_5551:case R.U16_RGBA_NORM:case R.U16_RG_NORM:case R.U16_R_NORM:{var o=t instanceof ArrayBuffer?new Uint16Array(t):new Uint16Array(r?t/2:t);return n&&o.set(new Uint16Array(n)),o}case R.S32_R:{var E=t instanceof ArrayBuffer?new Int32Array(t):new Int32Array(r?t/4:t);return n&&E.set(new Int32Array(n)),E}case R.U32_R:case R.U32_RG:{var u=t instanceof ArrayBuffer?new Uint32Array(t):new Uint32Array(r?t/4:t);return n&&u.set(new Uint32Array(n)),u}case R.F32_R:case R.F32_RG:case R.F32_RGB:case R.F32_RGBA:{var l=t instanceof ArrayBuffer?new Float32Array(t):new Float32Array(r?t/4:t);return n&&l.set(new Float32Array(n)),l}}var c=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t);return n&&c.set(new Uint8Array(n)),c}function Zn(e){var t=(e&32768)>>15,r=(e&31744)>>10,n=e&1023;return r===0?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):r==31?n?NaN:(t?-1:1)*(1/0):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))}function nr(e){switch(e){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var ue=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=e.call(this)||this;return i.id=n,i.device=a,i}return t.prototype.destroy=function(){},t}(Ue.Z),qn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s,o,E=e.call(this,{id:n,device:a})||this;E.type=P.Bindings;var u=i.pipeline;M(!!u);var l=i.uniformBufferBindings,c=i.storageBufferBindings,f=i.samplerBindings,A=i.storageTextureBindings;E.numUniformBuffers=(l==null?void 0:l.length)||0;var h=[[],[],[],[]],g=0;if(l&&l.length)for(var O=0;O<l.length;O++){var F=i.uniformBufferBindings[O],B=F.binding,x=F.size,b=F.offset,k=F.buffer,U={buffer:Xe(k),offset:b!=null?b:0,size:x};h[0].push({binding:B!=null?B:g++,resource:U})}if(f&&f.length){g=0;for(var O=0;O<f.length;O++){var S=(0,p.pi)((0,p.pi)({},f[O]),xt),B=i.samplerBindings[O],v=B.texture!==null?B.texture:E.device.getFallbackTexture(S);S.dimension=v.dimension,S.formatKind=vt(v.format);var y=v.gpuTextureView;if(h[1].push({binding:(s=B.textureBinding)!==null&&s!==void 0?s:g++,resource:y}),B.samplerBinding!==-1){var L=B.sampler!==null?B.sampler:E.device.getFallbackSampler(S),Q=Fn(L);h[1].push({binding:(o=B.samplerBinding)!==null&&o!==void 0?o:g++,resource:Q})}}}if(c&&c.length){g=0;for(var O=0;O<c.length;O++){var re=i.storageBufferBindings[O],B=re.binding,x=re.size,b=re.offset,k=re.buffer,U={buffer:Xe(k),offset:b!=null?b:0,size:x};h[2].push({binding:B!=null?B:g++,resource:U})}}if(A&&A.length){g=0;for(var O=0;O<A.length;O++){var Re=i.storageTextureBindings[O],B=Re.binding,v=Re.texture,y=v.gpuTextureView;h[3].push({binding:B!=null?B:g++,resource:y})}}var we=h.findLastIndex(function(de){return!!de.length});return E.gpuBindGroup=h.map(function(de,Oe){return Oe<=we&&E.device.device.createBindGroup({layout:u.getBindGroupLayout(Oe),entries:de})}),E}return t}(ue),Qn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.Buffer;var o=i.usage,E=i.viewOrSize,u=!!(o&W.MAP_READ);s.usage=Un(o),u&&(s.usage=W.MAP_READ|W.COPY_DST);var l=!(0,ce.Z)(E);if(s.view=(0,ce.Z)(E)?null:E,s.size=(0,ce.Z)(E)?Ge(E,4):Ge(E.byteLength,4),(0,ce.Z)(E))s.gpuBuffer=s.device.device.createBuffer({usage:s.usage,size:s.size,mappedAtCreation:u?l:!1});else{s.gpuBuffer=s.device.device.createBuffer({usage:s.usage,size:s.size,mappedAtCreation:!0});var c=E&&E.constructor||Float32Array;new c(s.gpuBuffer.getMappedRange()).set(E),s.gpuBuffer.unmap()}return s}return t.prototype.setSubData=function(r,n,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var s=this.gpuBuffer;i=i||n.byteLength,i=Math.min(i,this.size-r);var o=n.byteOffset+a,E=o+i,u=i+3&-4;if(u!==i){var l=new Uint8Array(n.buffer.slice(o,E));n=new Uint8Array(u),n.set(l),a=0,o=0,E=u,i=u}for(var c=1024*1024*15,f=0;E-(o+f)>c;)this.device.device.queue.writeBuffer(s,r+f,n.buffer,o+f,c),f+=c;this.device.device.queue.writeBuffer(s,r+f,n.buffer,o+f,i-f)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},t}(ue),ir=function(){function e(){this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(t,r,n){this.gpuComputePassEncoder.dispatchWorkgroups(t,r,n)},e.prototype.dispatchWorkgroupsIndirect=function(t,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(t.gpuBuffer,r)},e.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},e.prototype.beginComputePass=function(t){M(this.gpuComputePassEncoder===null),this.frameCommandEncoder=t,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(t){var r=t,n=Ce(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(n)},e.prototype.setBindings=function(t){var r=this,n=t;n.gpuBindGroup.forEach(function(a,i){a&&r.gpuComputePassEncoder.setBindGroup(i,n.gpuBindGroup[i])})},e.prototype.pushDebugGroup=function(t){this.gpuComputePassEncoder.pushDebugGroup(t)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(t){this.gpuComputePassEncoder.insertDebugMarker(t)},e}(),zn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.ComputePipeline,s.gpuComputePipeline=null,s.descriptor=i;var o=i.program,E=o.computeStage;if(E===null)return s;var u={layout:"auto",compute:(0,p.pi)({},E)};return s.gpuComputePipeline=s.device.device.createComputePipeline(u),s.name!==void 0&&(s.gpuComputePipeline.label=s.name),s}return t.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},t}(ue),jn=function(e){(0,p.ZT)(t,e);function t(r){var n,a,i,s,o=r.id,E=r.device,u=r.descriptor,l=e.call(this,{id:o,device:E})||this;l.type=P.InputLayout;var c=[];try{for(var f=(0,p.XA)(u.vertexBufferDescriptors),A=f.next();!A.done;A=f.next()){var h=A.value,g=h.arrayStride,O=h.stepMode,F=h.attributes;c.push({arrayStride:g,stepMode:kn(O),attributes:[]});try{for(var B=(i=void 0,(0,p.XA)(F)),x=B.next();!x.done;x=B.next()){var b=x.value,k=b.shaderLocation,U=b.format,S=b.offset;c[c.length-1].attributes.push({shaderLocation:k,format:Yn(U),offset:S})}}catch(v){i={error:v}}finally{try{x&&!x.done&&(s=B.return)&&s.call(B)}finally{if(i)throw i.error}}}}catch(v){n={error:v}}finally{try{A&&!A.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}return l.indexFormat=Vn(u.indexBufferFormat),l.buffers=c,l}return t}(ue),ar=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;return s.type=P.Program,s.vertexStage=null,s.fragmentStage=null,s.computeStage=null,s.descriptor=i,i.vertex&&(s.vertexStage=s.createShaderStage(i.vertex,"vertex")),i.fragment&&(s.fragmentStage=s.createShaderStage(i.fragment,"fragment")),i.compute&&(s.computeStage=s.createShaderStage(i.compute,"compute")),s}return t.prototype.setUniformsLegacy=function(r){},t.prototype.createShaderStage=function(r,n){var a,i,s=r.glsl,o=r.wgsl,E=r.entryPoint,u=r.postprocess,l=!1,c=o;if(!c)try{c=this.device.glsl_compile(s,n,l)}catch(F){throw console.error(F,s),new Error("whoops")}var f=function(F){if(!c.includes(F))return"continue";c=c.replace("var T_".concat(F,": texture_2d<f32>;"),"var T_".concat(F,": texture_depth_2d;")),c=c.replace(new RegExp("textureSample\\(T_".concat(F,"(.*)\\);$"),"gm"),function(B,x){return"vec4<f32>(textureSample(T_".concat(F).concat(x,"), 0.0, 0.0, 0.0);")})};try{for(var A=(0,p.XA)(["u_TextureFramebufferDepth"]),h=A.next();!h.done;h=A.next()){var g=h.value;f(g)}}catch(F){a={error:F}}finally{try{h&&!h.done&&(i=A.return)&&i.call(A)}finally{if(a)throw a.error}}u&&(c=u(c));var O=this.device.device.createShaderModule({code:c});return{module:O,entryPoint:E||"main"}},t}(ue),$n=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;s.type=P.QueryPool;var o=i.elemCount,E=i.type;return s.querySet=s.device.device.createQuerySet({type:Dn(E),count:o}),s.resolveBuffer=s.device.device.createBuffer({size:o*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),s.cpuBuffer=s.device.device.createBuffer({size:o*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),s.results=null,s}return t.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},t}(ue),Jn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=e.call(this,{id:n,device:a})||this;return i.type=P.Readback,i}return t.prototype.readTexture=function(r,n,a,i,s,o,E,u){return E===void 0&&(E=0),(0,p.mG)(this,void 0,void 0,function(){var l,c,f,A,h,g,O,F;return(0,p.Jh)(this,function(B){return l=r,c=0,f=nr(l.gpuTextureformat),A=Math.ceil(i/f.width)*f.length,h=Math.ceil(A/256)*256,g=h*s,O=this.device.createBuffer({usage:W.STORAGE|W.MAP_READ|W.COPY_DST,hint:fe.STATIC,viewOrSize:g}),F=this.device.device.createCommandEncoder(),F.copyTextureToBuffer({texture:l.gpuTexture,mipLevel:0,origin:{x:n,y:a,z:Math.max(c,0)}},{buffer:O.gpuBuffer,offset:0,bytesPerRow:h},{width:i,height:s,depthOrArrayLayers:1}),this.device.device.queue.submit([F.finish()]),[2,this.readBuffer(O,0,o.byteLength===g?o:null,E,g,l.format,!0,!1,A,h,s)]})})},t.prototype.readTextureSync=function(r,n,a,i,s,o,E,u){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},t.prototype.readBuffer=function(r,n,a,i,s,o,E,u,l,c,f){var A=this;n===void 0&&(n=0),a===void 0&&(a=null),s===void 0&&(s=0),o===void 0&&(o=R.U8_RGB),E===void 0&&(E=!1),l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=0);var h=r,g=s||h.size,O=a||h.view,F=O&&O.constructor&&O.constructor.BYTES_PER_ELEMENT||Ut(o),B=h;if(!(h.usage&W.MAP_READ&&h.usage&W.COPY_DST)){var x=this.device.device.createCommandEncoder();B=this.device.createBuffer({usage:W.STORAGE|W.MAP_READ|W.COPY_DST,hint:fe.STATIC,viewOrSize:g}),x.copyBufferToBuffer(h.gpuBuffer,n,B.gpuBuffer,0,g),this.device.device.queue.submit([x.finish()])}return new Promise(function(b,k){B.gpuBuffer.mapAsync(ht.READ,n,g).then(function(){var U=B.gpuBuffer.getMappedRange(n,g),S=O;if(E)S===null?S=rr(o,g,!0,U):S=rr(o,S.buffer,void 0,U);else if(S===null)switch(F){case 1:S=new Uint8Array(g),S.set(new Uint8Array(U));break;case 2:S=A.getHalfFloatAsFloatRGBAArrayBuffer(g/2,U);break;case 4:S=new Float32Array(g/4),S.set(new Float32Array(U));break}else switch(F){case 1:S=new Uint8Array(S.buffer),S.set(new Uint8Array(U));break;case 2:S=A.getHalfFloatAsFloatRGBAArrayBuffer(g/2,U,O);break;case 4:var v=O&&O.constructor||Float32Array;S=new v(S.buffer),S.set(new v(U));break}if(l!==c){F===1&&!E&&(l*=2,c*=2);for(var y=new Uint8Array(S.buffer),L=l,Q=0,re=1;re<f;++re){Q=re*c;for(var Re=0;Re<l;++Re)y[L++]=y[Q++]}F!==0&&!E?S=new Float32Array(y.buffer,0,L/4):S=new Uint8Array(y.buffer,0,L)}B.gpuBuffer.unmap(),b(S)},function(U){return k(U)})})},t.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,n,a){a||(a=new Float32Array(r));for(var i=new Uint16Array(n);r--;)a[r]=Zn(i[r]);return a},t}(ue),sr=function(){function e(t){this.device=t,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getEncoder=function(){var t;return((t=this.renderBundle)===null||t===void 0?void 0:t.renderBundleEncoder)||this.gpuRenderPassEncoder},e.prototype.getTextureView=function(t,r){return M(r<t.mipLevelCount),t.mipLevelCount===1?t.gpuTextureView:t.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(t){var r,n,a,i,s,o;this.descriptor=t,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var E=t.colorAttachment.length;this.gfxColorAttachment.length=E,this.gfxColorResolveTo.length=E;for(var u=0;u<t.colorAttachment.length;u++){var l=t.colorAttachment[u],c=t.colorResolveTo[u];if(l===null&&c!==null&&(l=c,c=null),this.gfxColorAttachment[u]=l,this.gfxColorResolveTo[u]=c,this.gfxColorAttachmentLevel[u]=((r=t.colorAttachmentLevel)===null||r===void 0?void 0:r[u])||0,this.gfxColorResolveToLevel[u]=((n=t.colorResolveToLevel)===null||n===void 0?void 0:n[u])||0,l!==null){this.gpuColorAttachments[u]===void 0&&(this.gpuColorAttachments[u]={});var f=this.gpuColorAttachments[u];f.view=this.getTextureView(l,((a=this.gfxColorAttachmentLevel)===null||a===void 0?void 0:a[u])||0);var A=(s=(i=t.colorClearColor)===null||i===void 0?void 0:i[u])!==null&&s!==void 0?s:"load";A==="load"?f.loadOp="load":(f.loadOp="clear",f.clearValue=A),f.storeOp=!((o=t.colorStore)===null||o===void 0)&&o[u]?"store":"discard",f.resolveTarget=void 0,c!==null&&(l.sampleCount>1?f.resolveTarget=this.getTextureView(c,this.gfxColorResolveToLevel[u]):f.storeOp="store")}else{this.gpuColorAttachments.length=u,this.gfxColorAttachment.length=u,this.gfxColorResolveTo.length=u;break}}if(this.gfxDepthStencilAttachment=t.depthStencilAttachment,this.gfxDepthStencilResolveTo=t.depthStencilResolveTo,t.depthStencilAttachment){var h=t.depthStencilAttachment,f=this.gpuDepthStencilAttachment;f.view=h.gpuTextureView;var g=!!(Me(h.format)&d.Depth);g?(t.depthClearValue==="load"?f.depthLoadOp="load":(f.depthLoadOp="clear",f.depthClearValue=t.depthClearValue),t.depthStencilStore||this.gfxDepthStencilResolveTo!==null?f.depthStoreOp="store":f.depthStoreOp="discard"):(f.depthLoadOp=void 0,f.depthStoreOp=void 0);var O=!!(Me(h.format)&d.Stencil);O?(t.stencilClearValue==="load"?f.stencilLoadOp="load":(f.stencilLoadOp="clear",f.stencilClearValue=t.stencilClearValue),t.depthStencilStore||this.gfxDepthStencilResolveTo!==null?f.stencilStoreOp="store":f.stencilStoreOp="discard"):(f.stencilLoadOp=void 0,f.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,ee.Z)(t.occlusionQueryPool)?void 0:Mn(t.occlusionQueryPool)},e.prototype.beginRenderPass=function(t,r){M(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(r),this.frameCommandEncoder=t,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(t,r){var n=this.device.swapChainHeight;return n-t-r},e.prototype.setViewport=function(t,r,n,a,i,s){i===void 0&&(i=0),s===void 0&&(s=1),this.gpuRenderPassEncoder.setViewport(t,this.flipY(r,a),n,a,i,s)},e.prototype.setScissorRect=function(t,r,n,a){this.gpuRenderPassEncoder.setScissorRect(t,this.flipY(r,a),n,a)},e.prototype.setPipeline=function(t){var r=t,n=Ce(r.gpuRenderPipeline);this.getEncoder().setPipeline(n)},e.prototype.setVertexInput=function(t,r,n){if(t!==null){var a=this.getEncoder(),i=t;n!==null&&a.setIndexBuffer(Xe(n.buffer),Ce(i.indexFormat),n.offset);for(var s=0;s<r.length;s++){var o=r[s];o!==null&&a.setVertexBuffer(s,Xe(o.buffer),o.offset)}}},e.prototype.setBindings=function(t){var r=t,n=this.getEncoder();r.gpuBindGroup.forEach(function(a,i){a&&n.setBindGroup(i,r.gpuBindGroup[i])})},e.prototype.setStencilReference=function(t){this.gpuRenderPassEncoder.setStencilReference(t)},e.prototype.draw=function(t,r,n,a){this.getEncoder().draw(t,r,n,a)},e.prototype.drawIndexed=function(t,r,n,a,i){this.getEncoder().drawIndexed(t,r,n,a,i)},e.prototype.drawIndirect=function(t,r){this.getEncoder().drawIndirect(Xe(t),r)},e.prototype.drawIndexedIndirect=function(t,r){this.getEncoder().drawIndexedIndirect(Xe(t),r)},e.prototype.beginOcclusionQuery=function(t){this.gpuRenderPassEncoder.beginOcclusionQuery(t)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(t){this.gpuRenderPassEncoder.pushDebugGroup(t)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(t){this.gpuRenderPassEncoder.insertDebugMarker(t)},e.prototype.beginBundle=function(t){this.renderBundle=t},e.prototype.endBundle=function(){this.renderBundle.finish()},e.prototype.executeBundles=function(t){this.gpuRenderPassEncoder.executeBundles(t.map(function(r){return r.renderBundle}))},e.prototype.finish=function(){var t;(t=this.gpuRenderPassEncoder)===null||t===void 0||t.end(),this.gpuRenderPassEncoder=null;for(var r=0;r<this.gfxColorAttachment.length;r++){var n=this.gfxColorAttachment[r],a=this.gfxColorResolveTo[r];n!==null&&a!==null&&n.sampleCount===1&&this.copyAttachment(a,this.gfxColorAttachmentLevel[r],n,this.gfxColorResolveToLevel[r])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},e.prototype.copyAttachment=function(t,r,n,a){M(n.sampleCount===1);var i={texture:n.gpuTexture,mipLevel:a},s={texture:t.gpuTexture,mipLevel:r};M(n.width>>>a===t.width>>>r),M(n.height>>>a===t.height>>>r),M(!!(n.usage&q.COPY_SRC)),M(!!(t.usage&q.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(i,s,[t.width,t.height,1])},e}(),Gn=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=e.call(this,{id:n,device:a})||this;return s.type=P.RenderPipeline,s.isCreatingAsync=!1,s.gpuRenderPipeline=null,s.descriptor=i,s.device.createRenderPipelineInternal(s,!1),s}return t.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},t}(ue),ei=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s,o,E=e.call(this,{id:n,device:a})||this;E.type=P.Sampler;var u=i.lodMinClamp,l=i.mipmapFilter===Z.NO_MIP?i.lodMinClamp:i.lodMaxClamp,c=(s=i.maxAnisotropy)!==null&&s!==void 0?s:1;return c>1&&M(i.minFilter===K.BILINEAR&&i.magFilter===K.BILINEAR&&i.mipmapFilter===Z.LINEAR),E.gpuSampler=E.device.device.createSampler({addressModeU:Nt(i.addressModeU),addressModeV:Nt(i.addressModeV),addressModeW:Nt((o=i.addressModeW)!==null&&o!==void 0?o:i.addressModeU),lodMinClamp:u,lodMaxClamp:l,minFilter:Jt(i.minFilter),magFilter:Jt(i.magFilter),mipmapFilter:vn(i.mipmapFilter),compare:i.compareFunction!==void 0?ut(i.compareFunction):void 0,maxAnisotropy:c}),E}return t}(ue),lt=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=r.descriptor,s=r.skipCreate,o=r.sampleCount,E=e.call(this,{id:n,device:a})||this;E.type=P.Texture,E.flipY=!1;var u=i.format,l=i.dimension,c=i.width,f=i.height,A=i.depthOrArrayLayers,h=i.mipLevelCount,g=i.usage,O=i.pixelStore;return E.flipY=!!(O!=null&&O.unpackFlipY),E.device.createTextureShared({format:u,dimension:l!=null?l:D.TEXTURE_2D,width:c,height:f,depthOrArrayLayers:A!=null?A:1,mipLevelCount:h!=null?h:1,usage:g,sampleCount:o!=null?o:1},E,s),E}return t.prototype.textureFromImageBitmapOrCanvas=function(r,n,a){for(var i=n[0].width,s=n[0].height,o={size:{width:i,height:s,depthOrArrayLayers:a},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},E=r.createTexture(o),u=0;u<n.length;u++)r.queue.copyExternalImageToTexture({source:n[u],flipY:this.flipY},{texture:E,origin:[0,0,u]},[i,s]);return[E,i,s]},t.prototype.isImageBitmapOrCanvases=function(r){var n=r[0];return n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof OffscreenCanvas},t.prototype.isVideo=function(r){var n=r[0];return n instanceof HTMLVideoElement},t.prototype.setImageData=function(r,n){var a,i=this,s=this.device.device,o,E,u;if(this.isImageBitmapOrCanvases(r))a=(0,p.CR)(this.textureFromImageBitmapOrCanvas(s,r,this.depthOrArrayLayers),3),o=a[0],E=a[1],u=a[2];else if(this.isVideo(r))o=s.importExternalTexture({source:r[0]});else{var l=nr(this.gpuTextureformat),c=Math.ceil(this.width/l.width)*l.length;r.forEach(function(f){s.queue.writeTexture({texture:i.gpuTexture},f,{bytesPerRow:c},{width:i.width,height:i.height})})}this.width=E,this.height=u,o&&(this.gpuTexture=o),this.gpuTextureView=this.gpuTexture.createView({dimension:On(this.dimension)})},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},t}(ue),ti=function(e){(0,p.ZT)(t,e);function t(r){var n=r.id,a=r.device,i=e.call(this,{id:n,device:a})||this;return i.type=P.RenderBundle,i.renderBundleEncoder=i.device.device.createRenderBundleEncoder({colorFormats:[i.device.swapChainFormat]}),i}return t.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},t}(ue),ri=function(){function e(t,r,n,a,i,s){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=q.RENDER_ATTACHMENT|q.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=ve.UPPER_LEFT,this.clipSpaceNearZ=Fe.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=n,this.canvasContext=a,this.glsl_compile=i,this.WGSLComposer=s,this.fallbackTexture2D=this.createFallbackTexture(D.TEXTURE_2D,w.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(D.TEXTURE_2D,w.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(D.TEXTURE_2D_ARRAY,w.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(D.TEXTURE_3D,w.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(D.TEXTURE_CUBE_MAP,w.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:ne.REPEAT,addressModeV:ne.REPEAT,minFilter:K.POINT,magFilter:K.POINT,mipmapFilter:Z.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:ne.REPEAT,addressModeV:ne.REPEAT,minFilter:K.POINT,magFilter:K.POINT,mipmapFilter:Z.NEAREST,compareFunction:X.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(o){console.error(o.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(t,r){this.swapChainWidth===t&&this.swapChainHeight===r||(this.swapChainWidth=t,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var t=this.canvasContext.getCurrentTexture(),r=t.createView(),n=new lt({id:0,device:this,descriptor:{format:R.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:D.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return n.depthOrArrayLayers=1,n.sampleCount=1,n.gpuTexture=t,n.gpuTextureView=r,n.name="Onscreen",this.setResourceName(n,"Onscreen Texture"),n},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){M(this.frameCommandEncoderPool.length===0)},e.prototype.endFrame=function(){M(this.frameCommandEncoderPool.every(function(t){return t!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(t){return t.finish()})),this.frameCommandEncoderPool=[]},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(t){return new Qn({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTexture=function(t){return new lt({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createSampler=function(t){return new ei({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTarget=function(t){var r=new lt({id:this.getNextUniqueId(),device:this,descriptor:(0,p.pi)((0,p.pi)({},t),{dimension:D.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:se.RENDER_TARGET}),sampleCount:t.sampleCount});return r.depthOrArrayLayers=1,r.type=P.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(t){var r=t,n=r.format,a=r.width,i=r.height,s=r.depthOrArrayLayers,o=r.sampleCount,E=r.mipLevelCount,u=r.gpuTexture,l=r.gpuTextureView,c=r.usage;M(!!(c&q.RENDER_ATTACHMENT));var f=new lt({id:this.getNextUniqueId(),device:this,descriptor:{format:n,width:a,height:i,depthOrArrayLayers:s,dimension:D.TEXTURE_2D,mipLevelCount:E,usage:c},skipCreate:!0});return f.depthOrArrayLayers=s,f.sampleCount=o,f.gpuTexture=u,f.gpuTextureView=l,f},e.prototype.createProgram=function(t){var r,n;return!((r=t.vertex)===null||r===void 0)&&r.glsl&&(t.vertex.glsl=Ie(this.queryVendorInfo(),"vert",t.vertex.glsl)),!((n=t.fragment)===null||n===void 0)&&n.glsl&&(t.fragment.glsl=Ie(this.queryVendorInfo(),"frag",t.fragment.glsl)),new ar({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createProgramSimple=function(t){return new ar({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTextureShared=function(t,r,n){var a={width:t.width,height:t.height,depthOrArrayLayers:t.depthOrArrayLayers},i=t.mipLevelCount,s=St(t.format),o=In(t.dimension),E=gn(t.usage);if(r.gpuTextureformat=s,r.dimension=t.dimension,r.format=t.format,r.width=t.width,r.height=t.height,r.depthOrArrayLayers=t.depthOrArrayLayers,r.mipLevelCount=i,r.usage=E,r.sampleCount=t.sampleCount,!n){var u=this.device.createTexture({size:a,mipLevelCount:i,format:s,dimension:o,sampleCount:t.sampleCount,usage:E}),l=u.createView();r.gpuTexture=u,r.gpuTextureView=l}},e.prototype.getFallbackSampler=function(t){var r=t.formatKind;return r===w.Depth&&t.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(t){var r=t.dimension,n=t.formatKind;if(r===D.TEXTURE_2D)return n===w.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===D.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===D.TEXTURE_3D)return this.fallbackTexture3D;if(r===D.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(t,r){var n=t===D.TEXTURE_CUBE_MAP?6:1,a=r===w.Float?R.U8_RGBA_NORM:R.D24;return this.createTexture({dimension:t,format:a,usage:se.SAMPLED,width:1,height:1,depthOrArrayLayers:n,mipLevelCount:1})},e.prototype.createBindings=function(t){return new qn({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createInputLayout=function(t){return new jn({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createComputePipeline=function(t){return new zn({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderPipeline=function(t){return new Gn({id:this.getNextUniqueId(),device:this,descriptor:(0,p.pi)({},t)})},e.prototype.createQueryPool=function(t,r){return new $n({id:this.getNextUniqueId(),device:this,descriptor:{type:t,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(t,r){var n;if(t.gpuRenderPipeline===null){var a=t.descriptor,i=a.program,s=i.vertexStage,o=i.fragmentStage;if(!(s===null||o===null)){var E=a.megaStateDescriptor||{},u=E.stencilBack,l=E.stencilFront,c=(0,p._T)(E,["stencilBack","stencilFront"]),f=Pe(ge);a.megaStateDescriptor=(0,p.pi)((0,p.pi)((0,p.pi)({},f),{stencilBack:(0,p.pi)((0,p.pi)({},f.stencilBack),u),stencilFront:(0,p.pi)((0,p.pi)({},f.stencilFront),l)}),c);var A=a.megaStateDescriptor.attachmentsState[0];a.colorAttachmentFormats.forEach(function(b,k){a.megaStateDescriptor.attachmentsState[k]||(a.megaStateDescriptor.attachmentsState[k]=bt(void 0,A))});var h=yn((n=a.topology)!==null&&n!==void 0?n:$.TRIANGLES,a.megaStateDescriptor),g=wn(a.colorAttachmentFormats,a.megaStateDescriptor),O=Hn(a.depthStencilAttachmentFormat,a.megaStateDescriptor),F=void 0;a.inputLayout!==null&&(F=a.inputLayout.buffers);var B=a.sampleCount,x={layout:"auto",vertex:(0,p.pi)((0,p.pi)({},s),{buffers:F}),primitive:h,depthStencil:O,multisample:{count:B},fragment:(0,p.pi)((0,p.pi)({},o),{targets:g})};t.gpuRenderPipeline=this.device.createRenderPipeline(x)}}},e.prototype.createReadback=function(){return new Jn({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderBundle=function(){return new ti({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(t){var r=this.renderPassPool.pop();r===void 0&&(r=new sr(this));var n=this.frameCommandEncoderPool.pop();return n===void 0&&(n=this.device.createCommandEncoder()),r.beginRenderPass(n,t),r},e.prototype.createComputePass=function(){var t=this.computePassPool.pop();t===void 0&&(t=new ir);var r=this.frameCommandEncoderPool.pop();return r===void 0&&(r=this.device.createCommandEncoder()),t.beginComputePass(r),t},e.prototype.submitPass=function(t){var r=t;r instanceof sr?(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.renderPassPool.push(r)):r instanceof ir&&(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.computePassPool.push(r))},e.prototype.copySubTexture2D=function(t,r,n,a,i,s,o){var E=this.device.createCommandEncoder(),u=t,l=a,c={texture:l.gpuTexture,origin:[i,s,0],mipLevel:0,aspect:"all"},f={texture:u.gpuTexture,origin:[r,n,0],mipLevel:0,aspect:"all"};M(!!(l.usage&q.COPY_SRC)),M(!!(u.usage&q.COPY_DST)),E.copyTextureToTexture(c,f,[l.width,l.height,o||1]),this.device.queue.submit([E.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(t,r,n){if(Kn(t)){if(!this.featureTextureCompressionBC)return!1;var a=Ln(t);return r%a!==0||n%a!==0?!1:this.featureTextureCompressionBC}switch(t){case R.U16_RGBA_NORM:return!1;case R.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(t){var r=t;return r.descriptor},e.prototype.queryRenderTarget=function(t){var r=t;return r},e.prototype.setResourceName=function(t,r){if(t.name=r,t.type===P.Buffer){var n=t;n.gpuBuffer.label=r}else if(t.type===P.Texture){var n=t;n.gpuTexture.label=r,n.gpuTextureView.label=r}else if(t.type===P.RenderTarget){var n=t;n.gpuTexture.label=r,n.gpuTextureView.label=r}else if(t.type===P.Sampler){var n=t;n.gpuSampler.label=r}else if(t.type===P.RenderPipeline){var n=t;n.gpuRenderPipeline!==null&&(n.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(t,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(t){},e.prototype.pipelineQueryReady=function(t){var r=t;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(t){var r=t;this.createRenderPipelineInternal(r,!1)},e}(),ni=function(){function e(t){this.pluginOptions=t}return e.prototype.createSwapChain=function(t){return(0,p.mG)(this,void 0,void 0,function(){var r,n,a,i,s,o,E,u;return(0,p.Jh)(this,function(l){switch(l.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,l.label=1;case 1:return l.trys.push([1,3,,4]),n=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:n})];case 2:return r=l.sent(),[3,4];case 3:return a=l.sent(),console.log(a),[3,4];case 4:return r===null?[2,null]:(i=["depth32float-stencil8","texture-compression-bc","float32-filterable"],s=i.filter(function(c){return r.features.has(c)}),[4,r.requestDevice({requiredFeatures:s})]);case 5:if(o=l.sent(),o&&(E=this.pluginOptions.onContextLost,o.lost.then(function(){E&&E()})),o===null)return[2,null];if(u=t.getContext("webgpu"),!u)return[2,null];l.label=6;case 6:return l.trys.push([6,8,,9]),[4,$t(this.pluginOptions.shaderCompilerPath)];case 7:return l.sent(),[3,9];case 8:return l.sent(),[3,9];case 9:return[2,new ri(r,o,t,u,Sn,ze&&new ze)]}})})},e}()}}]);
}());