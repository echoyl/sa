"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[669],{3669:function(Ue,ae,e){e.r(ae),e.d(ae,{default:function(){return Oe}});var ue=e(19632),ve=e.n(ue),ce=e(9783),le=e.n(ce),fe=e(97857),o=e.n(fe),he=e(5574),c=e.n(he),ge=e(13769),me=e.n(ge),xe=e(36942),S=e(18829),ne=e(45830),Se=e(71230),re=e(15746),u=e(67294),ze=e(21655),ye=e(64233),je=e(97937),de=e(24969),Ze=e(86548),Ce=e(48689),A=e(34586),Pe=e(45416),Ee=e(83062),se=e(71577),$e=e(20863),Me=e(85418),pe=e(36825),De=e(61723),t=e(85893),Te=function(a){var g=a.url,y=a.id,K=a.children,j=a.title,v=j===void 0?"":j,r=a.callback;return(0,t.jsx)(pe.ZP,{trigger:K,method:"delete",url:g,dataId:y,callback:r,msg:(0,t.jsxs)(A.Z,{children:["\u786E\u5B9A\u8981\u5220\u9664",(0,t.jsx)("span",{style:{color:"red"},children:v},"title"),"\u5417\uFF1F"]})})},Ae=function(a){var g,y,K=a.title,j=a.page,v=j===void 0?0:j,r=a.treeData,Z=r===void 0?[]:r,N=a.fieldNames,C=N===void 0?{}:N,f=a.selectedKeys,h=a.onSelect,i=a.onReload,z=a.defaultExpandAll,E=z===void 0?!0:z,P=a.showLine,G=P===void 0?!0:P,Y=(0,u.useState)(!1),R=c()(Y,2),W=R[0],$=R[1],b=(0,u.useState)([]),O=c()(b,2),m=O[0],B=O[1],k=(0,u.useState)(0),F=c()(k,2),w=F[0],I=F[1],M=(0,u.useState)({}),Q=c()(M,2),H=Q[0],J=Q[1],q=(0,ne.useModel)("@@initialState"),L=q.initialState,x=(0,S.dm)(L==null||(g=L.currentUser)===null||g===void 0?void 0:g.menuData,v),V=(x==null||(y=x.data)===null||y===void 0?void 0:y.level)||0,p=C.title||"label",U=C.key||"value",D=C.children||"children",X=E?{defaultExpandAll:E}:{expandedKeys:m,onExpand:function(n){B(n)}};(0,u.useEffect)(function(){if(!E&&f&&f[0]&&m.length<1){var d=(0,S.aT)(Z,f[0],{id:U,children:D});B(d)}},[f]);var _=function d(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.forEach(function(l){l._level=s,l[D]&&d(l[D],s+1)})};return(0,u.useEffect)(function(){_(Z)},[Z,C]),(0,t.jsxs)(Pe.Z,{title:K,variant:"borderless",styles:{root:{height:"100%"}},extra:(0,t.jsxs)(A.Z,{children:[f&&f[0]?(0,t.jsx)(Ee.Z,{title:"\u91CD\u7F6E",children:(0,t.jsx)(se.ZP,{color:"default",variant:"link",size:"small",icon:(0,t.jsx)(je.Z,{}),onClick:function(){h==null||h([0])}})}):null,v?(0,t.jsx)(se.ZP,{color:"default",variant:"link",size:"small",icon:(0,t.jsx)(de.Z,{}),onClick:function(){$(!0),I(0)}}):null]}),children:[(0,t.jsx)(De.Z,{page:v,trigger:(0,t.jsx)(t.Fragment,{}),open:W,onOpen:function(n){return $(n)},dataId:w,data:H,callback:function(){return i==null||i(),!0}}),(0,t.jsx)($e.Z,o()(o()({selectedKeys:f},X),{},{showLine:G,treeData:Z,fieldNames:{title:p,key:U,children:D},titleRender:function(n){var s,l,T=n[p],ee=n[U],Fe=(s=n._level)!==null&&s!==void 0?s:0;return v?(0,t.jsx)(Me.Z,{trigger:["contextMenu"],menu:{items:[{key:"edit",label:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(Ze.Z,{}),(0,t.jsx)("span",{children:(0,S.t)("edit")})]})},V-1>Fe?{key:"add",label:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(de.Z,{}),(0,t.jsx)("span",{children:(0,S.t)("addchild")})]})}:null,{type:"divider"},{key:"delete",label:(0,t.jsx)(Te,{id:ee,title:T,url:(x==null||(l=x.data)===null||l===void 0?void 0:l.url)+"/1",callback:function(){return i==null||i(),!0},children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(Ce.Z,{}),(0,t.jsx)("span",{children:(0,S.t)("delete")})]})}),danger:!0}],onClick:function(oe){var te=oe.key,Le=oe.domEvent;te==="edit"?(I(ee),$(!0)):te=="add"&&(I(0),J({parent_id:ee}),$(!0)),Le.stopPropagation()}},children:T}):T},onSelect:function(n){h==null||h(n)}}))]})},Ke=Ae,Ne=["name","title","url_name","field","close","page","span"],Re=function(a){var g=a.tableTitle,y=g===void 0?!1:g,K=a.path,j=a.leftMenu,v=a.setting,r=(v==null?void 0:v.leftMenu)||j||{close:!0},Z=r.name,N=Z===void 0?"categorys":Z,C=r.title,f=C===void 0?"\u5206\u7C7B\u9009\u62E9":C,h=r.url_name,i=h===void 0?"category_id":h,z=r.field,E=r.close,P=E===void 0?!0:E,G=r.page,Y=G===void 0?0:G,R=r.span,W=R===void 0?3:R,$=me()(r,Ne),b=(0,u.useState)([]),O=c()(b,2),m=O[0],B=O[1],k=(0,ne.useSearchParams)(),F=c()(k,2),w=F[0],I=F[1],M=w.get(i),Q=(0,u.useState)(M?Number.isNaN(M)?M:parseInt(M):0),H=c()(Q,2),J=H[0],q=H[1],L=function(s){var l=s.length>0?s[s.length-1]:0;q(l);var T=(0,S.Cc)([i]);l&&(T[i]=l+""),I(o()({},T))},x=(0,u.useState)(""),V=c()(x,2),p=V[0],U=V[1],D=(0,u.useState)(!1),X=c()(D,2),_=X[0],d=X[1];return(0,t.jsx)(xe.PageContainer404,{title:y,path:K,children:(0,t.jsxs)(Se.Z,{gutter:[30,0],style:!P&&m.length>1?{marginLeft:0}:{},children:[!P&&m.length>1&&(0,t.jsx)(re.Z,{span:W,style:{paddingInline:0},children:(0,t.jsx)(Ke,o()({treeData:m,onSelect:L,fieldNames:z,selectedKeys:[J],title:f,page:Y,onReload:function(){d(!1),U((0,S.hQ)())}},$))}),(0,t.jsx)(re.Z,{span:!P&&m.length>1?24-W:24,children:(0,t.jsx)(ye.Z,o()(o()({},a),{},{initPageUid:p,paramExtra:P?o()(o()({},a.paramExtra),{},{reloadUid:p}):o()(o()({},a.paramExtra),{},le()(le()({},i,J||""),"reloadUid",p)),beforeTableGet:function(s){var l;m.length>1&&_||!((l=s.search)!==null&&l!==void 0&&l[N])||(d(!0),B(ve()(s.search[N])))}}))})]})})},Oe=Re}}]);
