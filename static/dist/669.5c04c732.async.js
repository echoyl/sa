"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[669],{3669:function(Ue,ae,e){e.r(ae),e.d(ae,{default:function(){return Oe}});var ue=e(19632),ve=e.n(ue),ce=e(9783),le=e.n(ce),fe=e(97857),s=e.n(fe),he=e(5574),v=e.n(he),ge=e(13769),me=e.n(ge),xe=e(36942),m=e(80316),ne=e(45830),Se=e(71230),re=e(15746),i=e(67294),ze=e(21655),ye=e(64233),je=e(97937),de=e(24969),Ze=e(86548),Ce=e(48689),A=e(34586),Pe=e(45416),Ee=e(83062),se=e(71577),$e=e(20863),Me=e(85418),De=e(36825),Te=e(61723),t=e(85893),pe=function(a){var g=a.url,x=a.id,K=a.children,S=a.title,o=S===void 0?"":S,r=a.callback;return(0,t.jsx)(De.ZP,{trigger:K,method:"delete",url:g,dataId:x,callback:r,msg:(0,t.jsxs)(A.Z,{children:["\u786E\u5B9A\u8981\u5220\u9664",(0,t.jsx)("span",{style:{color:"red"},children:o},"title"),"\u5417\uFF1F"]})})},Ae=function(a){var g,x,K=a.title,S=a.page,o=S===void 0?0:S,r=a.treeData,y=r===void 0?[]:r,N=a.fieldNames,j=N===void 0?{}:N,c=a.selectedKeys,f=a.onSelect,d=a.onReload,I=a.defaultExpandAll,$=I===void 0?!0:I,Z=a.showLine,L=Z===void 0?!0:Z,V=(0,i.useState)(!1),U=v()(V,2),X=U[0],C=U[1],P=(0,i.useState)([]),z=v()(P,2),G=z[0],R=z[1],Y=(0,i.useState)(0),W=v()(Y,2),M=W[0],O=W[1],B=(0,i.useState)({}),F=v()(B,2),b=F[0],k=F[1],w=(0,ne.useModel)("@@initialState"),D=w.initialState,u=(0,m.dm)(D==null||(g=D.currentUser)===null||g===void 0?void 0:g.menuData,o),q=(u==null||(x=u.data)===null||x===void 0?void 0:x.level)||0,Q=j.title||"label",T=j.key||"value",p=j.children||"children",H=$?{defaultExpandAll:$}:{expandedKeys:G,onExpand:function(l){R(l)}};(0,i.useEffect)(function(){if(!$&&c&&c[0]&&G.length<1){var n=(0,m.aT)(y,c[0],{id:T,children:p});R(n)}},[c]);var J=function n(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;l.forEach(function(E){E._level=h,E[p]&&n(E[p],h+1)})};return(0,i.useEffect)(function(){J(y)},[y,j]),(0,t.jsxs)(Pe.Z,{title:K,variant:"borderless",styles:{root:{height:"100%"}},extra:(0,t.jsxs)(A.Z,{children:[c&&c[0]?(0,t.jsx)(Ee.Z,{title:"\u91CD\u7F6E",children:(0,t.jsx)(se.ZP,{color:"default",variant:"link",size:"small",icon:(0,t.jsx)(je.Z,{}),onClick:function(){f==null||f([0])}})}):null,o?(0,t.jsx)(se.ZP,{color:"default",variant:"link",size:"small",icon:(0,t.jsx)(de.Z,{}),onClick:function(){C(!0),O(0)}}):null]}),children:[(0,t.jsx)(Te.Z,{page:o,trigger:(0,t.jsx)(t.Fragment,{}),open:X,onOpen:function(l){return C(l)},dataId:M,data:b,callback:function(){return d==null||d(),!0}}),(0,t.jsx)($e.Z,s()(s()({selectedKeys:c},H),{},{showLine:L,treeData:y,fieldNames:{title:Q,key:T,children:p},titleRender:function(l){var h,E,_=l[Q],ee=l[T],Fe=(h=l._level)!==null&&h!==void 0?h:0;return o?(0,t.jsx)(Me.Z,{trigger:["contextMenu"],menu:{items:[{key:"edit",label:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(Ze.Z,{}),(0,t.jsx)("span",{children:(0,m.t)("edit")})]})},q-1>Fe?{key:"add",label:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(de.Z,{}),(0,t.jsx)("span",{children:(0,m.t)("addchild")})]})}:null,{type:"divider"},{key:"delete",label:(0,t.jsx)(pe,{id:ee,title:_,url:(u==null||(E=u.data)===null||E===void 0?void 0:E.url)+"/1",callback:function(){return d==null||d(),!0},children:(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(Ce.Z,{}),(0,t.jsx)("span",{children:(0,m.t)("delete")})]})}),danger:!0}],onClick:function(oe){var te=oe.key,Le=oe.domEvent;te==="edit"?(O(ee),C(!0)):te=="add"&&(O(0),k({parent_id:ee}),C(!0)),Le.stopPropagation()}},children:_}):_},onSelect:function(l){f==null||f(l)}}))]})},Ke=Ae,Ne=["name","title","url_name","field","close","page"],Re=function(a){var g=a.tableTitle,x=g===void 0?!1:g,K=a.path,S=a.leftMenu,o=a.setting,r=(o==null?void 0:o.leftMenu)||S||{close:!0},y=r.name,N=y===void 0?"categorys":y,j=r.title,c=j===void 0?"\u5206\u7C7B\u9009\u62E9":j,f=r.url_name,d=f===void 0?"category_id":f,I=r.field,$=r.close,Z=$===void 0?!1:$,L=r.page,V=L===void 0?0:L,U=me()(r,Ne),X=(0,i.useState)([]),C=v()(X,2),P=C[0],z=C[1],G=(0,ne.useSearchParams)(),R=v()(G,2),Y=R[0],W=R[1],M=Y.get(d),O=(0,i.useState)(M?Number.isNaN(M)?M:parseInt(M):0),B=v()(O,2),F=B[0],b=B[1],k=function(n){var l=n.length>0?n[n.length-1]:0;b(l);var h=(0,m.Cc)([d]);l&&(h[d]=l+""),W(s()({},h))},w=(0,i.useState)(""),D=v()(w,2),u=D[0],q=D[1],Q=(0,i.useState)(!1),T=v()(Q,2),p=T[0],H=T[1];return(0,t.jsx)(xe.PageContainer404,{title:x,path:K,children:(0,t.jsxs)(Se.Z,{gutter:[30,0],style:!Z&&P.length>1?{marginLeft:0}:{},children:[!Z&&P.length>1&&(0,t.jsx)(re.Z,{span:3,style:{paddingInline:0},children:(0,t.jsx)(Ke,s()({treeData:P,onSelect:k,fieldNames:I,selectedKeys:[F],title:c,page:V,onReload:function(){H(!1),q((0,m.hQ)())}},U))}),(0,t.jsx)(re.Z,{span:!Z&&P.length>1?21:24,children:(0,t.jsx)(ye.Z,s()(s()({},a),{},{initPageUid:u,paramExtra:Z?s()(s()({},a.paramExtra),{},{reloadUid:u}):s()(s()({},a.paramExtra),{},le()(le()({},d,F||""),"reloadUid",u)),beforeTableGet:function(n){var l;P.length>1&&p||!((l=n.search)!==null&&l!==void 0&&l[N])||(H(!0),z(ve()(n.search[N])))}}))})]})})},Oe=Re}}]);
