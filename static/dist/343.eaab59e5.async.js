"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[343],{31024:function(se,R,e){var $=e(48134),x=e(48271),J=e(35914),u=e(67294),X=e(85893),b=function(S){var z=S.data,y=S.config,E=y===void 0?{}:y,I=(0,$.hQ)();return(0,u.useEffect)(function(){var j=new x.xs({id:I,map:new J.Z({pitch:0,style:"blank",center:[116.368652,39.93866],zoom:10.07})}),p=["#0A3663","#3771D9","#4D89E5","#64A5D3","#72BED6","#83CED6","#A6E1E0","#B8EFE2","#D7F9F0"].reverse(),C=E.field,W=E.domain_min,N=W===void 0?0:W,U=E.domain_max,Y=U===void 0?100:U,M=new x.dW({autoFit:!0}).source(z);M.color(C,p).scale(C,{type:"quantize",domain:[N,Y]}).shape("fill").style({opacity:1}).active(!0);var k=new x.Ie({zIndex:2}).source(z).color("#eee").size(.8).active(!0).style({lineType:"solid",dashArray:[2,2],opacity:1});j.addLayer(M),j.addLayer(k);var T=new x.GI({offsets:[0,0],closeButton:!1});M.on("mousemove",function(s){T.setLnglat(s.lngLat).setHTML("<span>".concat(s.feature.properties.name,":").concat(s&&s.feature.properties[C]?s.feature.properties[C]:"-","</span>")),j.addPopup(T)}),M.on("mouseout",function(s){j.removePopup(T)});var K=new x.oT({position:"bottomright"});K.onAdd=function(){var s=document.createElement("div");s.className="infolegend legend";for(var f=Math.floor(Y/p.length),h=0;h<p.length;h++)s.innerHTML+='<i style="width: 18px;height: 18px;float: left;margin-right: 8px;opacity: 0.7;background:'+p[h]+'"></i> '+(N+h*f)+(p[h+1]?"\u2013"+f*(h+1)+"<br>":"+");return s},j.addControl(K)},[]),(0,X.jsx)("div",{id:I,style:{width:"100%",minHeight:300,position:"relative",overflow:"hidden",height:E.height}})};R.Z=b},47343:function(se,R,e){e.r(R),e.d(R,{PagePanelHeader:function(){return ne},default:function(){return Ze}});var $=e(15009),x=e.n($),J=e(97857),u=e.n(J),X=e(99289),b=e.n(X),_=e(5574),S=e.n(_),z=e(97584),y=e(38345),E=e(1956),I=e(90755),j=e(6466),p=e(7837),C={fixedHeader:!0},W=e(48134),N=e(98165),U=e(63430),Y=e(79611),M=e(78677),k=e(80652),T=e(87564),K=e(7134),s=e(71230),f=e(15746),h=e(14726),re=e(31418),ee=e(86250),de=e(48096),ue=e(8988),ve=e(27484),te=e.n(ve),G=e(67294),fe=e(61503),me=e(33237),ge=e(17003),Q={pageHeaderContent:"pageHeaderContent___exWxI",avatar:"avatar___rptEO",content:"content___jBAzR",contentTitle:"contentTitle___TsVhT",extraContent:"extraContent___tNqx0",statItem:"statItem___jPU6u"},ce=e(31024),pe=e(96486),xe=e(92077),ye=e.n(xe),t=e(85893),ne=function(A){var v,H=(0,p.useModel)("@@initialState"),Z=H.initialState,r=Z.currentUser,L=r&&Object.keys(r).length;return L?(0,t.jsxs)("div",{className:Q.pageHeaderContent,children:[(0,t.jsx)("div",{className:Q.avatar,children:(0,t.jsx)(K.C,{size:"large",src:r.avatar?r.avatar:Z==null||(v=Z.settings)===null||v===void 0||(v=v.adminSetting)===null||v===void 0?void 0:v.logo})}),(0,t.jsx)("div",{className:Q.content,children:(0,t.jsx)("div",{className:Q.contentTitle,children:(0,t.jsxs)(s.Z,{children:[(0,t.jsxs)(f.Z,{span:12,children:[(0,t.jsx)(s.Z,{children:(0,t.jsxs)(f.Z,{children:["\u4F60\u597D\uFF0C",r.realname?r.realname:r.name]})}),(0,t.jsx)(s.Z,{children:(0,t.jsxs)(f.Z,{children:[r.rolename," ",(0,t.jsx)(h.ZP,{shape:"circle",type:"text",onClick:function(){var O;(O=A.flash)===null||O===void 0||O.call(A)},icon:(0,t.jsx)(N.Z,{})})]})})]}),(0,t.jsx)(f.Z,{span:12,style:{textAlign:"right"},children:(0,t.jsx)(je,{})})]})})})]}):(0,t.jsx)(T.Z,{avatar:!0,paragraph:{rows:1},active:!0})},je=function(){var A=(0,G.useState)(te()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),v=S()(A,2),H=v[0],Z=v[1],r=function L(){Z(te()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),setTimeout(function(){return L()},1e3)};return setTimeout(function(){return r()},1e3),(0,t.jsx)(t.Fragment,{children:H})},he=function(A){var v=A.url,H=v===void 0?"":v,Z=(0,G.useState)(),r=S()(Z,2),L=r[0],ie=r[1],O=re.Z.useApp(),le=O.message,De=(0,G.useState)(),oe=S()(De,2),w=oe[0],Ce=oe[1],Fe=(0,p.useModel)("@@initialState"),Pe=Fe.initialState,q=function(){var a=b()(x()().mark(function n(){var o,m,l,g=arguments;return x()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=g.length>0&&g[0]!==void 0?g[0]:{},le.loading("\u52A0\u8F7D\u4E2D..."),i.next=4,z.ZP.get(H,{params:u()(u()({},w),o),then:function(){}});case 4:m=i.sent,l=m.data,le.destroy(),ie(l);case 8:case"end":return i.stop()}},n)}));return function(){return a.apply(this,arguments)}}();(0,G.useEffect)(function(){q()},[]);var Se=function(n){var o,m,l=n.type,g=(o=n.config)===null||o===void 0?void 0:o.xField,c=(m=n.config)===null||m===void 0?void 0:m.yField;if(l=="pie"){var i,d;g=n.config.colorField,c=n.config.angleField;var B=(0,pe.sum)(n.data.map(function(D){return D[c]}));return(0,t.jsx)(U.Z,u()({height:280,appendPadding:10,data:n.data,radius:.9,label:{position:"spider",text:function(F){return console.log("item is ",F),"".concat(F[g],": ").concat(ye()(F[c]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(B),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],legend:(i=n.config)!==null&&i!==void 0&&i.legend?(d=n.config)===null||d===void 0?void 0:d.legend:!1},n.config))}else if(l=="bar"){var P;return(0,t.jsx)(Y.Z,u()({xField:g,yField:c,scale:{x:{paddingInner:.4}},data:n.data,tooltip:{name:(P=n.config)===null||P===void 0?void 0:P.name,field:c}},n.config))}else{if(l=="column")return(0,t.jsx)(M.Z,u()({xField:g,yField:c,scale:{x:{paddingInner:.4}},data:n.data},n.config));if(l=="areaMap"){var V=u()({map:{type:"mapbox",style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:n.data,parser:{type:"geojson"}},autoFit:!0,color:{field:n.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},n.config);return(0,t.jsx)("div",{style:{width:"100%",height:500},children:(0,t.jsx)(ce.Z,{data:n.data,config:n})})}else return(0,t.jsx)(k.Z,u()({smooth:!0,shapeField:"smooth",height:280,data:n.data,xField:"x",yField:"y",title:{visible:!0,text:n.title,style:{fontSize:14}},meta:{y:{alias:n.y}},label:{content:function(F){return F.y},position:"top",style:{fill:"#000000",opacity:.6}}},n.config))}},Ee=function a(n,o){var m;return(0,t.jsx)(ee.Z,{vertical:!0,gap:"middle",children:n==null||(m=n.row)===null||m===void 0?void 0:m.map(function(l,g){var c;return(0,t.jsxs)(s.Z,{gutter:[16,16],children:[l.form?(0,t.jsx)(f.Z,{span:24,children:(0,t.jsx)(y.Z,{bodyStyle:{padding:0},children:(0,t.jsx)(E.Z,{layoutType:"QueryFilter",columns:(0,me.ab)({initRequest:!0,columns:l.form.columns,devEnable:!1}),initialValues:w||l.form.value,onFinish:function(d){q(d),console.log("onFinish",d)}})})},g+"form"):null,l==null||(c=l.col)===null||c===void 0?void 0:c.map(function(i,d){if(i.row){var B;return(0,t.jsx)(f.Z,{span:i.span?i.span:24/((B=l.col)===null||B===void 0?void 0:B.length),children:a(i,o)},d)}else if(i.tab){var P;return(0,t.jsx)(f.Z,{span:i.span?i.span:24/((P=l.col)===null||P===void 0?void 0:P.length),children:(0,t.jsx)(y.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},children:(0,t.jsx)(de.Z,{style:{background:"none"},tabBarStyle:{paddingLeft:0,marginBottom:0},items:i.tab.map(function(D,F){return{key:F,label:D.title,children:D.row?a(D,o):o(D,F,{notitle:!0})}})})},d)},d)}else{var V;return(0,t.jsx)(f.Z,{span:i.span?i.span:24/((V=l.col)===null||V===void 0?void 0:V.length),children:o(i,d)},d)}})]},g)})})};return(0,t.jsx)(I._z,{title:!1,className:"saContainer",fixedHeader:C.fixedHeader,header:{breadcrumbRender:function(n,o){return(0,t.jsx)(W.Lr,{})}},children:(0,t.jsxs)(ee.Z,{vertical:!0,gap:"middle",children:[(0,t.jsx)(y.Z,{children:(0,t.jsx)(ne,{flash:q})},"headcard"),Ee(L,function(a,n,o){return a.type=="card"?(0,t.jsx)(j.Z,{style:{height:"100%"},statistic:{title:a.title,value:a.value,prefix:a.prefix,suffix:a.suffix,description:a.href?(0,t.jsx)(p.Link,{to:a.href,style:{fontSize:12},children:"\u67E5\u770B\u66F4\u591A"}):""}},n+"card"):a.type=="table"?(0,t.jsx)(y.Z,{style:{height:"100%"},children:(0,t.jsx)(ue.Z,u()({columns:(0,ge.S)({initRequest:!0,columns:a.columns,initialState:Pe,devEnable:!1}),dataSource:a.data,title:function(){return a.title},rowKey:"id"},a.props))},n+"table"):a.type=="mapDots"?(0,t.jsx)(y.Z,{title:a.title,style:{height:"100%"},children:(0,t.jsx)(fe.O1,u()(u()({},a.props),{},{dots:a.data}))},n+"mapDots"):(0,t.jsx)(j.Z,{style:{height:"100%"},title:o!=null&&o.notitle?(0,t.jsx)("div",{style:{height:20}}):a.title,chart:Se(a)},n+"chart")})]})})},Ze=he}}]);
