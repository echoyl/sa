!(function(){var iB=(ct,N,k)=>new Promise(($,K)=>{var w=q=>{try{j(k.next(q))}catch(Q){K(Q)}},W=q=>{try{j(k.throw(q))}catch(Q){K(Q)}},j=q=>q.done?$(q.value):Promise.resolve(q.value).then(w,W);j((k=k.apply(ct,N)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[488],{81618:function(ct){"use strict";(function(N,k){ct.exports=k()})(this,function(){function N(ie){var te=[];return ie.AMapUI&&te.push(k(ie.AMapUI)),ie.Loca&&te.push($(ie.Loca)),Promise.all(te)}function k(ie){return new Promise(function(te,we){var fe=[];if(ie.plugins)for(var ce=0;ce<ie.plugins.length;ce+=1)w.AMapUI.plugins.indexOf(ie.plugins[ce])==-1&&fe.push(ie.plugins[ce]);if(W.AMapUI===K.failed)we("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(W.AMapUI===K.notload){W.AMapUI=K.loading,w.AMapUI.version=ie.version||w.AMapUI.version,ce=w.AMapUI.version;var J=document.body||document.head,M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/ui/"+ce+"/main.js",M.onerror=function(E){W.AMapUI=K.failed,we("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){if(W.AMapUI=K.loaded,fe.length)window.AMapUI.loadUI(fe,function(){for(var E=0,ge=fe.length;E<ge;E++){var be=fe[E].split("/").slice(-1)[0];window.AMapUI[be]=arguments[E]}for(te();j.AMapUI.length;)j.AMapUI.splice(0,1)[0]()});else for(te();j.AMapUI.length;)j.AMapUI.splice(0,1)[0]()},J.appendChild(M)}else W.AMapUI===K.loaded?ie.version&&ie.version!==w.AMapUI.version?we("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):fe.length?window.AMapUI.loadUI(fe,function(){for(var E=0,ge=fe.length;E<ge;E++){var be=fe[E].split("/").slice(-1)[0];window.AMapUI[be]=arguments[E]}te()}):te():ie.version&&ie.version!==w.AMapUI.version?we("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):j.AMapUI.push(function(E){E?we(E):fe.length?window.AMapUI.loadUI(fe,function(){for(var ge=0,be=fe.length;ge<be;ge++){var ze=fe[ge].split("/").slice(-1)[0];window.AMapUI[ze]=arguments[ge]}te()}):te()})})}function $(ie){return new Promise(function(te,we){if(W.Loca===K.failed)we("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(W.Loca===K.notload){W.Loca=K.loading,w.Loca.version=ie.version||w.Loca.version;var fe=w.Loca.version,ce=w.AMap.version.startsWith("2"),J=fe.startsWith("2");if(ce&&!J||!ce&&J)we("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{ce=w.key,J=document.body||document.head;var M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/loca?v="+fe+"&key="+ce,M.onerror=function(E){W.Loca=K.failed,we("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){for(W.Loca=K.loaded,te();j.Loca.length;)j.Loca.splice(0,1)[0]()},J.appendChild(M)}}else W.Loca===K.loaded?ie.version&&ie.version!==w.Loca.version?we("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):te():ie.version&&ie.version!==w.Loca.version?we("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):j.Loca.push(function(E){E?we(E):we()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var K;(function(ie){ie.notload="notload",ie.loading="loading",ie.loaded="loaded",ie.failed="failed"})(K||(K={}));var w={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},W={AMap:K.notload,AMapUI:K.notload,Loca:K.notload},j={AMap:[],AMapUI:[],Loca:[]},q=[],Q=function(ie){typeof ie=="function"&&(W.AMap===K.loaded?ie(window.AMap):q.push(ie))};return{load:function(ie){return new Promise(function(te,we){if(W.AMap==K.failed)we("");else if(W.AMap==K.notload){var fe=ie.key,ce=ie.version,J=ie.plugins;fe?(window.AMap&&location.host!=="lbs.amap.com"&&we("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),w.key=fe,w.AMap.version=ce||w.AMap.version,w.AMap.plugins=J||w.AMap.plugins,W.AMap=K.loading,ce=document.body||document.head,window.___onAPILoaded=function(E){if(delete window.___onAPILoaded,E)W.AMap=K.failed,we(E);else for(W.AMap=K.loaded,N(ie).then(function(){te(window.AMap)}).catch(we);q.length;)q.splice(0,1)[0]()},J=document.createElement("script"),J.type="text/javascript",J.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+w.AMap.version+"&key="+fe+"&plugin="+w.AMap.plugins.join(","),J.onerror=function(E){W.AMap=K.failed,we(E)},ce.appendChild(J)):we("\u8BF7\u586B\u5199key")}else if(W.AMap==K.loaded)if(ie.key&&ie.key!==w.key)we("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(ie.version&&ie.version!==w.AMap.version)we("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(fe=[],ie.plugins)for(ce=0;ce<ie.plugins.length;ce+=1)w.AMap.plugins.indexOf(ie.plugins[ce])==-1&&fe.push(ie.plugins[ce]);fe.length?window.AMap.plugin(fe,function(){N(ie).then(function(){te(window.AMap)}).catch(we)}):N(ie).then(function(){te(window.AMap)}).catch(we)}else if(ie.key&&ie.key!==w.key)we("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(ie.version&&ie.version!==w.AMap.version)we("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var M=[];if(ie.plugins)for(ce=0;ce<ie.plugins.length;ce+=1)w.AMap.plugins.indexOf(ie.plugins[ce])==-1&&M.push(ie.plugins[ce]);Q(function(){M.length?window.AMap.plugin(M,function(){N(ie).then(function(){te(window.AMap)}).catch(we)}):N(ie).then(function(){te(window.AMap)}).catch(we)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,w={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},W={AMap:K.notload,AMapUI:K.notload,Loca:K.notload},j={AMap:[],AMapUI:[],Loca:[]}}}})},25330:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};N.default=k},67303:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};N.default=k},83647:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};N.default=k},57583:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};N.default=k},29260:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};N.default=k},3307:function(ct,N,k){"use strict";k.d(N,{Z:function(){return ij}});var $={};k.r($),k.d($,{add:function(){return Ji},adjoint:function(){return ep},clone:function(){return Jh},copy:function(){return gd},create:function(){return Js},determinant:function(){return i_},equals:function(){return qi},exactEquals:function(){return eo},frob:function(){return Si},fromQuat:function(){return Lt},fromQuat2:function(){return X},fromRotation:function(){return v},fromRotationTranslation:function(){return z},fromRotationTranslationScale:function(){return lt},fromRotationTranslationScaleOrigin:function(){return yt},fromScaling:function(){return h},fromTranslation:function(){return D0},fromValues:function(){return Cg},fromXRotation:function(){return _},fromYRotation:function(){return R},fromZRotation:function(){return F},frustum:function(){return Ut},getRotation:function(){return qe},getScaling:function(){return Ie},getTranslation:function(){return ue},identity:function(){return Wv},invert:function(){return Sh},lookAt:function(){return wn},mul:function(){return Gi},multiply:function(){return vl},multiplyScalar:function(){return la},multiplyScalarAndAdd:function(){return Ii},ortho:function(){return on},orthoNO:function(){return Yr},orthoZO:function(){return vn},perspective:function(){return fr},perspectiveFromFieldOfView:function(){return Mr},perspectiveNO:function(){return ur},perspectiveZO:function(){return Dr},rotate:function(){return a_},rotateX:function(){return Np},rotateY:function(){return Ya},rotateZ:function(){return kc},scale:function(){return dc},set:function(){return Uu},str:function(){return ci},sub:function(){return fo},subtract:function(){return ki},targetTo:function(){return Fn},translate:function(){return Pu},transpose:function(){return bh}});var K=k(67294),w=k(97582),W=k(21030),j={},q={},Q=function(a){return q[a]},ie=function(a,r){q[a]=r},te=function(a){return j[a]},we=function(a,r){j[a]=r},fe={},ce={},J=34,M=10,E=13;function ge(e){return new Function("d","return {"+e.map(function(a,r){return JSON.stringify(a)+": d["+r+'] || ""'}).join(",")+"}")}function be(e,a){var r=ge(e);return function(o,u){return a(r(o),u,e)}}function ze(e){var a=Object.create(null),r=[];return e.forEach(function(o){for(var u in o)u in a||r.push(a[u]=u)}),r}function Be(e,a){var r=e+"",o=r.length;return o<a?new Array(a-o+1).join(0)+r:r}function Ue(e){return e<0?"-"+Be(-e,6):e>9999?"+"+Be(e,6):Be(e,4)}function it(e){var a=e.getUTCHours(),r=e.getUTCMinutes(),o=e.getUTCSeconds(),u=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ue(e.getUTCFullYear(),4)+"-"+Be(e.getUTCMonth()+1,2)+"-"+Be(e.getUTCDate(),2)+(u?"T"+Be(a,2)+":"+Be(r,2)+":"+Be(o,2)+"."+Be(u,3)+"Z":o?"T"+Be(a,2)+":"+Be(r,2)+":"+Be(o,2)+"Z":r||a?"T"+Be(a,2)+":"+Be(r,2)+"Z":"")}function ht(e){var a=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function o(L,V){var G,he,ve=u(L,function(Pe,Xe){if(G)return G(Pe,Xe-1);he=Pe,G=V?be(Pe,V):ge(Pe)});return ve.columns=he||[],ve}function u(L,V){var G=[],he=L.length,ve=0,Pe=0,Xe,gt=he<=0,_t=!1;L.charCodeAt(he-1)===M&&--he,L.charCodeAt(he-1)===E&&--he;function zt(){if(gt)return ce;if(_t)return _t=!1,fe;var nr,ar=ve,Tr;if(L.charCodeAt(ar)===J){for(;ve++<he&&L.charCodeAt(ve)!==J||L.charCodeAt(++ve)===J;);return(nr=ve)>=he?gt=!0:(Tr=L.charCodeAt(ve++))===M?_t=!0:Tr===E&&(_t=!0,L.charCodeAt(ve)===M&&++ve),L.slice(ar+1,nr-1).replace(/""/g,'"')}for(;ve<he;){if((Tr=L.charCodeAt(nr=ve++))===M)_t=!0;else if(Tr===E)_t=!0,L.charCodeAt(ve)===M&&++ve;else if(Tr!==r)continue;return L.slice(ar,nr)}return gt=!0,L.slice(ar,he)}for(;(Xe=zt())!==ce;){for(var Xt=[];Xe!==fe&&Xe!==ce;)Xt.push(Xe),Xe=zt();V&&(Xt=V(Xt,Pe++))==null||G.push(Xt)}return G}function c(L,V){return L.map(function(G){return V.map(function(he){return O(G[he])}).join(e)})}function p(L,V){return V==null&&(V=ze(L)),[V.map(O).join(e)].concat(c(L,V)).join(`
`)}function g(L,V){return V==null&&(V=ze(L)),c(L,V).join(`
`)}function y(L){return L.map(S).join(`
`)}function S(L){return L.map(O).join(e)}function O(L){return L==null?"":L instanceof Date?it(L):a.test(L+="")?'"'+L.replace(/"/g,'""')+'"':L}return{parse:o,parseRows:u,format:p,formatBody:g,formatRows:y,formatRow:S,formatValue:O}}var Le=ht(","),Se=Le.parse,ye=Le.parseRows,Ve=Le.format,je=Le.formatBody,Et=Le.formatRows,Oe=Le.formatRow,Qe=Le.formatValue,ne=k(1413),We=63710088e-1,oe={centimeters:We*100,centimetres:We*100,degrees:We/111325,feet:We*3.28084,inches:We*39.37,kilometers:We/1e3,kilometres:We/1e3,meters:We,metres:We,miles:We/1609.344,millimeters:We*1e3,millimetres:We*1e3,nauticalmiles:We/1852,radians:1,yards:We*1.0936},Fe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/We,yards:1.0936133},st={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ce(e,a,r){r===void 0&&(r={});var o={type:"Feature"};return(r.id===0||r.id)&&(o.id=r.id),r.bbox&&(o.bbox=r.bbox),o.properties=a||{},o.geometry=e,o}function De(e,a,r){switch(r===void 0&&(r={}),e){case"Point":return tt(a).geometry;case"LineString":return Ze(a).geometry;case"Polygon":return me(a).geometry;case"MultiPoint":return $e(a).geometry;case"MultiLineString":return Je(a).geometry;case"MultiPolygon":return Te(a).geometry;default:throw new Error(e+" is invalid")}}function tt(e,a,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Gr(e[0])||!Gr(e[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:e};return Ce(o,a,r)}function _e(e,a,r){return r===void 0&&(r={}),Ht(e.map(function(o){return tt(o,a)}),r)}function me(e,a,r){r===void 0&&(r={});for(var o=0,u=e;o<u.length;o++){var c=u[o];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<c[c.length-1].length;p++)if(c[c.length-1][p]!==c[0][p])throw new Error("First and last Position are not equivalent.")}var g={type:"Polygon",coordinates:e};return Ce(g,a,r)}function Ge(e,a,r){return r===void 0&&(r={}),Ht(e.map(function(o){return me(o,a)}),r)}function Ze(e,a,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:e};return Ce(o,a,r)}function pt(e,a,r){return r===void 0&&(r={}),Ht(e.map(function(o){return Ze(o,a)}),r)}function Ht(e,a){a===void 0&&(a={});var r={type:"FeatureCollection"};return a.id&&(r.id=a.id),a.bbox&&(r.bbox=a.bbox),r.features=e,r}function Je(e,a,r){r===void 0&&(r={});var o={type:"MultiLineString",coordinates:e};return Ce(o,a,r)}function $e(e,a,r){r===void 0&&(r={});var o={type:"MultiPoint",coordinates:e};return Ce(o,a,r)}function Te(e,a,r){r===void 0&&(r={});var o={type:"MultiPolygon",coordinates:e};return Ce(o,a,r)}function Ye(e,a,r){r===void 0&&(r={});var o={type:"GeometryCollection",geometries:e};return Ce(o,a,r)}function ft(e,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,a||0);return Math.round(e*r)/r}function ke(e,a){a===void 0&&(a="kilometers");var r=oe[a];if(!r)throw new Error(a+" units is invalid");return e*r}function Ne(e,a){a===void 0&&(a="kilometers");var r=oe[a];if(!r)throw new Error(a+" units is invalid");return e/r}function dt(e,a){return rr(Ne(e,a))}function Pt(e){var a=e%360;return a<0&&(a+=360),a}function rr(e){var a=e%(2*Math.PI);return a*180/Math.PI}function xr(e){var a=e%360;return a*Math.PI/180}function ut(e,a,r){if(a===void 0&&(a="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return ke(Ne(e,a),r)}function nn(e,a,r){if(a===void 0&&(a="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=st[a];if(!o)throw new Error("invalid original units");var u=st[r];if(!u)throw new Error("invalid final units");return e/o*u}function Gr(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Xr(e){return!!e&&e.constructor===Object}function Nt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(a){if(!Gr(a))throw new Error("bbox must only contain numbers")})}function Yt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function sr(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Dt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Qt(e){if(e.length>1&&isNumber(e[0])&&isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return Qt(e[0]);throw new Error("coordinates must only contain numbers")}function Sr(e,a,r){if(!a||!r)throw new Error("type and name required");if(!e||e.type!==a)throw new Error("Invalid input to "+r+": must be a "+a+", given "+e.type)}function Er(e,a,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==a)throw new Error("Invalid input to "+r+": must be a "+a+", given "+e.geometry.type)}function Fr(e,a,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var o=0,u=e.features;o<u.length;o++){var c=u[o];if(!c||c.type!=="Feature"||!c.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!c.geometry||c.geometry.type!==a)throw new Error("Invalid input to "+r+": must be a "+a+", given "+c.geometry.type)}}function zr(e){return e.type==="Feature"?e.geometry:e}function le(e,a){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function H(e,a,r){if(e!==null)for(var o,u,c,p,g,y,S,O=0,L=0,V,G=e.type,he=G==="FeatureCollection",ve=G==="Feature",Pe=he?e.features.length:1,Xe=0;Xe<Pe;Xe++){S=he?e.features[Xe].geometry:ve?e.geometry:e,V=S?S.type==="GeometryCollection":!1,g=V?S.geometries.length:1;for(var gt=0;gt<g;gt++){var _t=0,zt=0;if(p=V?S.geometries[gt]:S,p!==null){y=p.coordinates;var Xt=p.type;switch(O=r&&(Xt==="Polygon"||Xt==="MultiPolygon")?1:0,Xt){case null:break;case"Point":if(a(y,L,Xe,_t,zt)===!1)return!1;L++,_t++;break;case"LineString":case"MultiPoint":for(o=0;o<y.length;o++){if(a(y[o],L,Xe,_t,zt)===!1)return!1;L++,Xt==="MultiPoint"&&_t++}Xt==="LineString"&&_t++;break;case"Polygon":case"MultiLineString":for(o=0;o<y.length;o++){for(u=0;u<y[o].length-O;u++){if(a(y[o][u],L,Xe,_t,zt)===!1)return!1;L++}Xt==="MultiLineString"&&_t++,Xt==="Polygon"&&zt++}Xt==="Polygon"&&_t++;break;case"MultiPolygon":for(o=0;o<y.length;o++){for(zt=0,u=0;u<y[o].length;u++){for(c=0;c<y[o][u].length-O;c++){if(a(y[o][u][c],L,Xe,_t,zt)===!1)return!1;L++}zt++}_t++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(H(p.geometries[o],a,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function re(e,a,r,o){var u=r;return H(e,function(c,p,g,y,S){p===0&&r===void 0?u=c:u=a(u,c,p,g,y,S)},o),u}function Re(e,a){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&a(e.features[r].properties,r)!==!1;r++);break;case"Feature":a(e.properties,0);break}}function Ke(e,a,r){var o=r;return Re(e,function(u,c){c===0&&r===void 0?o=u:o=a(o,u,c)}),o}function Tt(e,a){if(e.type==="Feature")a(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&a(e.features[r],r)!==!1;r++);}function or(e,a,r){var o=r;return Tt(e,function(u,c){c===0&&r===void 0?o=u:o=a(o,u,c)}),o}function jt(e){var a=[];return H(e,function(r){a.push(r)}),a}function wt(e,a){var r,o,u,c,p,g,y,S,O,L,V=0,G=e.type==="FeatureCollection",he=e.type==="Feature",ve=G?e.features.length:1;for(r=0;r<ve;r++){for(g=G?e.features[r].geometry:he?e.geometry:e,S=G?e.features[r].properties:he?e.properties:{},O=G?e.features[r].bbox:he?e.bbox:void 0,L=G?e.features[r].id:he?e.id:void 0,y=g?g.type==="GeometryCollection":!1,p=y?g.geometries.length:1,u=0;u<p;u++){if(c=y?g.geometries[u]:g,c===null){if(a(null,V,S,O,L)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(c,V,S,O,L)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<c.geometries.length;o++)if(a(c.geometries[o],V,S,O,L)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function It(e,a,r){var o=r;return wt(e,function(u,c,p,g,y){c===0&&r===void 0?o=u:o=a(o,u,c,p,g,y)}),o}function de(e,a){wt(e,function(r,o,u,c,p){var g=r===null?null:r.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return a(Ce(r,u,{bbox:c,id:p}),o,0)===!1?!1:void 0}var y;switch(g){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var S=0;S<r.coordinates.length;S++){var O=r.coordinates[S],L={type:y,coordinates:O};if(a(Ce(L,u),o,S)===!1)return!1}})}function pe(e,a,r){var o=r;return de(e,function(u,c,p){c===0&&p===0&&r===void 0?o=u:o=a(o,u,c,p)}),o}function Me(e,a){de(e,function(r,o,u){var c=0;if(r.geometry){var p=r.geometry.type;if(!(p==="Point"||p==="MultiPoint")){var g,y=0,S=0,O=0;if(H(r,function(L,V,G,he,ve){if(g===void 0||o>y||he>S||ve>O){g=L,y=o,S=he,O=ve,c=0;return}var Pe=lineString([g,L],r.properties);if(a(Pe,o,u,ve,c)===!1)return!1;c++,g=L})===!1)return!1}}})}function et(e,a,r){var o=r,u=!1;return Me(e,function(c,p,g,y,S){u===!1&&r===void 0?o=c:o=a(o,c,p,g,y,S),u=!0}),o}function St(e,a){if(!e)throw new Error("geojson is required");de(e,function(r,o,u){if(r.geometry!==null){var c=r.geometry.type,p=r.geometry.coordinates;switch(c){case"LineString":if(a(r,o,u,0,0)===!1)return!1;break;case"Polygon":for(var g=0;g<p.length;g++)if(a(lineString(p[g],r.properties),o,u,g)===!1)return!1;break}}})}function Gt(e,a,r){var o=r;return St(e,function(u,c,p,g){c===0&&r===void 0?o=u:o=a(o,u,c,p,g)}),o}function gr(e,a){if(a=a||{},!isObject(a))throw new Error("options is invalid");var r=a.featureIndex||0,o=a.multiFeatureIndex||0,u=a.geometryIndex||0,c=a.segmentIndex||0,p=a.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=y.length+c-1),lineString([y[c],y[c+1]],p,a);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c-1),lineString([y[u][c],y[u][c+1]],p,a);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c-1),lineString([y[o][c],y[o][c+1]],p,a);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c-1),lineString([y[o][u][c],y[o][u][c+1]],p,a)}throw new Error("geojson is invalid")}function At(e,a){if(a=a||{},!isObject(a))throw new Error("options is invalid");var r=a.featureIndex||0,o=a.multiFeatureIndex||0,u=a.geometryIndex||0,c=a.coordIndex||0,p=a.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":return point(y,p,a);case"MultiPoint":return o<0&&(o=y.length+o),point(y[o],p,a);case"LineString":return c<0&&(c=y.length+c),point(y[c],p,a);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c),point(y[u][c],p,a);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c),point(y[o][c],p,a);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c),point(y[o][u][c],p,a)}throw new Error("geojson is invalid")}var ot=k(43144),Ot=k(15671),yr=k(60136),kr=k(82963),Ft=k(61120),Mn=k(89611);function qn(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch(a){return typeof e=="function"}}var ri=k(78814);function un(e,a,r){return(0,ri.Z)()?un=Reflect.construct.bind():un=function(u,c,p){var g=[null];g.push.apply(g,c);var y=Function.bind.apply(u,g),S=new y;return p&&(0,Mn.Z)(S,p.prototype),S},un.apply(null,arguments)}function Yn(e){var a=typeof Map=="function"?new Map:void 0;return Yn=function(o){if(o===null||!qn(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a!="undefined"){if(a.has(o))return a.get(o);a.set(o,u)}function u(){return un(o,arguments,(0,Ft.Z)(this).constructor)}return u.prototype=Object.create(o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),(0,Mn.Z)(u,o)},Yn(e)}var jn={REGISTERED_PROTOCOLS:{}};function Kn(e){var a=aa();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function aa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vi=function(a){return jn.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]},da=function(e){(0,yr.Z)(r,e);var a=Kn(r);function r(o,u,c,p){var g;return(0,Ot.Z)(this,r),g=a.call(this,"AJAXError: ".concat(u," (").concat(o,"): ").concat(c)),g.status=o,g.statusText=u,g.url=c,g.body=p,g}return(0,ot.Z)(r)}(Yn(Error));function Oa(e,a){var r=new XMLHttpRequest,o=Array.isArray(e.url)?e.url[0]:e.url;r.open(e.method||"GET",o,!0),e.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(var u in e.headers)e.headers.hasOwnProperty(u)&&r.setRequestHeader(u,e.headers[u]);return e.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=e.credentials==="include",r.onerror=function(){a(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){var c=r.response;if(e.type==="json")try{c=JSON.parse(r.response)}catch(g){return a(g)}a(null,c,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"),r)}else{var p=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});a(new da(r.status,r.statusText,o.toString(),p))}},r.cancel=r.abort,r.send(e.body),r}function xa(e){return new Promise(function(a,r){Oa(e,function(o,u,c,p,g){o?r({err:o,data:null,xhr:g}):a({err:null,data:u,cacheControl:c,expires:p,xhr:g})})})}function Va(e,a){return Oa(e,a)}var Sa=function(a,r){var o=vi(a.url)||Va;return o((0,ne.Z)((0,ne.Z)({},a),{},{type:"json"}),r)},gs=function(a,r){var o=vi(a.url)||Va;return o((0,ne.Z)((0,ne.Z)({},a),{},{type:"arrayBuffer"}),r)},io=function(a,r){return Va(_objectSpread(_objectSpread({},a),{},{method:"POST"}),r)},Oo=function(a,r){return Va((0,ne.Z)((0,ne.Z)({},a),{},{method:"GET"}),r)};function ai(e){var a=window.document.createElement("a");return a.href=e,a.protocol===window.document.location.protocol&&a.host===window.document.location.host}var _i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ea(e,a){var r=new window.Image,o=window.URL||window.webkitURL;r.crossOrigin="anonymous",r.onload=function(){a(null,r),o.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(function(){r.src=_i})},r.onerror=function(){return a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?o.createObjectURL(u):_i}function Ha(e,a){var r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(function(o){a(null,o)}).catch(function(o){a(new Error("Could not load image because of ".concat(o.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var ms=function(a,r,o){var u=function(p,g){if(p)r(p);else if(g){var y=typeof createImageBitmap=="function",S=o?o(g):g;y?Ha(S,r):ea(S,r)}};return a.type==="json"?Sa(a,u):gs(a,u)},lo=function(a,r){var o=typeof createImageBitmap=="function";o?Ha(a,r):ea(a,r)},ko=function(e){return e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right",e}({}),cr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kt(e,a,r){var o=e.classList;for(var u in cr)cr.hasOwnProperty(u)&&o.remove("l7-".concat(r,"-anchor-").concat(u));o.add("l7-".concat(r,"-anchor-").concat(a))}function qt(e,a,r){e.prototype=a.prototype=r,r.constructor=e}function Ar(e,a){var r=Object.create(e.prototype);for(var o in a)r[o]=a[o];return r}function tn(){}var Pn=.7,Bn=1/Pn,Cn="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wo=/^#([0-9a-f]{3,8})$/,os=new RegExp("^rgb\\("+[Cn,Cn,Cn]+"\\)$"),wu=new RegExp("^rgb\\("+[Yi,Yi,Yi]+"\\)$"),Do=new RegExp("^rgba\\("+[Cn,Cn,Cn,Ai]+"\\)$"),Qa=new RegExp("^rgba\\("+[Yi,Yi,Yi,Ai]+"\\)$"),pu=new RegExp("^hsl\\("+[Ai,Yi,Yi]+"\\)$"),Jo=new RegExp("^hsla\\("+[Ai,Yi,Yi,Ai]+"\\)$"),Zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qt(tn,si,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Jt,formatHex:Jt,formatHsl:Ur,formatRgb:Tn,toString:Tn});function Jt(){return this.rgb().formatHex()}function Ur(){return du(this).formatHsl()}function Tn(){return this.rgb().formatRgb()}function si(e){var a,r;return e=(e+"").trim().toLowerCase(),(a=Wo.exec(e))?(r=a[1].length,a=parseInt(a[1],16),r===6?Hi(a):r===3?new Lo(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):r===8?ao(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):r===4?ao(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=os.exec(e))?new Lo(a[1],a[2],a[3],1):(a=wu.exec(e))?new Lo(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=Do.exec(e))?ao(a[1],a[2],a[3],a[4]):(a=Qa.exec(e))?ao(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=pu.exec(e))?nh(a[1],a[2]/100,a[3]/100,1):(a=Jo.exec(e))?nh(a[1],a[2]/100,a[3]/100,a[4]):Zt.hasOwnProperty(e)?Hi(Zt[e]):e==="transparent"?new Lo(NaN,NaN,NaN,0):null}function Hi(e){return new Lo(e>>16&255,e>>8&255,e&255,1)}function ao(e,a,r,o){return o<=0&&(e=a=r=NaN),new Lo(e,a,r,o)}function Us(e){return e instanceof tn||(e=si(e)),e?(e=e.rgb(),new Lo(e.r,e.g,e.b,e.opacity)):new Lo}function wo(e,a,r,o){return arguments.length===1?Us(e):new Lo(e,a,r,o==null?1:o)}function Lo(e,a,r,o){this.r=+e,this.g=+a,this.b=+r,this.opacity=+o}qt(Lo,wo,Ar(tn,{brighter:function(e){return e=e==null?Bn:Math.pow(Bn,e),new Lo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Pn:Math.pow(Pn,e),new Lo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hu,formatHex:Hu,formatRgb:cf,toString:cf}));function Hu(){return"#"+rh(this.r)+rh(this.g)+rh(this.b)}function cf(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function rh(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function nh(e,a,r,o){return o<=0?e=a=r=NaN:r<=0||r>=1?e=a=NaN:a<=0&&(e=NaN),new ru(e,a,r,o)}function du(e){if(e instanceof ru)return new ru(e.h,e.s,e.l,e.opacity);if(e instanceof tn||(e=si(e)),!e)return new ru;if(e instanceof ru)return e;e=e.rgb();var a=e.r/255,r=e.g/255,o=e.b/255,u=Math.min(a,r,o),c=Math.max(a,r,o),p=NaN,g=c-u,y=(c+u)/2;return g?(a===c?p=(r-o)/g+(r<o)*6:r===c?p=(o-a)/g+2:p=(a-r)/g+4,g/=y<.5?c+u:2-c-u,p*=60):g=y>0&&y<1?0:p,new ru(p,g,y,e.opacity)}function ec(e,a,r,o){return arguments.length===1?du(e):new ru(e,a,r,o==null?1:o)}function ru(e,a,r,o){this.h=+e,this.s=+a,this.l=+r,this.opacity=+o}qt(ru,ec,Ar(tn,{brighter:function(e){return e=e==null?Bn:Math.pow(Bn,e),new ru(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Pn:Math.pow(Pn,e),new ru(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,a=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*a,u=2*r-o;return new Lo(Sl(e>=240?e-240:e+120,u,o),Sl(e,u,o),Sl(e<120?e+240:e-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Sl(e,a,r){return(e<60?a+(r-a)*e/60:e<180?r:e<240?a+(r-a)*(240-e)/60:a)*255}function tc(e){return typeof e=="string"?!!d3.color(e):!1}function ho(e){var a=si(e),r=[0,0,0,0];return a!=null&&(r[0]=a.r/255,r[1]=a.g/255,r[2]=a.b/255,r[3]=a.opacity),r}function Xl(e){var a=e&&e[0],r=e&&e[1],o=e&&e[2],u=a+r*256+o*65536-1;return u}function bs(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function Ss(e){var a=window.document.createElement("canvas"),r=a.getContext("2d");a.width=256,a.height=1;for(var o=null,u=r.createLinearGradient(0,0,256,1),c=e.positions[0],p=e.positions[e.positions.length-1],g=0;g<e.colors.length;++g){var y=(e.positions[g]-c)/(p-c);u.addColorStop(y,e.colors[g])}return r.fillStyle=u,r.fillRect(0,0,256,1),o=new Uint8ClampedArray(r.getImageData(0,0,256,1).data),a=null,r=null,{data:o,width:256,height:1}}function xc(e,a){var r=window.document.createElement("canvas"),o=r.getContext("2d");r.width=256,r.height=1;for(var u=o.createLinearGradient(0,0,256,1),c=a[1]-a[0],p=0;p<e.colors.length;++p){var g=Math.max((e.positions[p]-a[0])/c,0);u.addColorStop(g,e.colors[p])}o.fillStyle=u,o.fillRect(0,0,256,1);var y=o.getImageData(0,0,256,1).data,S=Fl(o,y);return r=null,o=null,S}function bc(e){var a=window.document.createElement("canvas"),r=a.getContext("2d");a.width=256,a.height=1;var o=r.createImageData(256,1);return o.data.fill(0),e.positions.forEach(function(u,c){var p=ho(e.colors[c]);o.data[u*4+0]=p[0]*255,o.data[u*4+1]=p[1]*255,o.data[u*4+2]=p[2]*255,o.data[u*4+3]=p[3]*255}),a=null,r=null,o}function Rf(e){var a=window.document.createElement("canvas"),r=a.getContext("2d");r.globalAlpha=1,a.width=256,a.height=1;for(var o=256/e.colors.length,u=0;u<e.colors.length;u++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[u],r.moveTo(u*o,0),r.lineTo((u+1)*o,0),r.stroke();var c=r.getImageData(0,0,256,1).data,p=Fl(r,c);return a=null,r=null,p}function Ll(e,a){var r=window.document.createElement("canvas"),o=r.getContext("2d");o.globalAlpha=1,r.width=256,r.height=1;var u=a[1]-a[0];e.positions.length-e.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var c=0;c<e.colors.length;c++)o.beginPath(),o.lineWidth=2,o.strokeStyle=e.colors[c],o.moveTo((e.positions[c]-a[0])/u*255,0),o.lineTo((e.positions[c+1]-a[0])/u*255,0),o.stroke();var p=o.getImageData(0,0,256,1).data,g=Fl(o,p);return r=null,o=null,g}function Fl(e,a){for(var r=e.createImageData(256,1),o=0;o<r.data.length;o+=4)r.data[o+0]=a[o+0],r.data[o+1]=a[o+1],r.data[o+2]=a[o+2],r.data[o+3]=a[o+3];return r}function Yl(e){switch(e.type){case"cat":return[0,255];default:return[0,1]}}var ku={BACK:1029,FRONT:1028};function Sc(e){switch(e){case"GAODE1.x":return ku.BACK;case"GAODE2.x":return ku.BACK;case"MAPBOX":return ku.FRONT;case"SIMPLE":return ku.FRONT;case"GLOBEL":return ku.BACK;case"DEBAULT":return ku.FRONT;default:return ku.FRONT}}var Rn=k(74902),ji=k(97685),Pv=k(74691),ih=k.n(Pv),rc=k(50361),Jp=k.n(rc),Gs=k(23279),Ec=k.n(Gs),Bl=k(27361),nu=k.n(Bl),vu=k(51584),El=k.n(vu),nc=k(18446),Nl=k.n(nc),wc=k(14293),jc=k.n(wc),ah=k(81763),ed=k.n(ah),Uo=k(68630),Nd=k.n(Uo),Uh=k(47037),ff=k.n(Uh),ss=k(36719),vp=k.n(ss),gp=k(82492),Du=k.n(gp),Mt=k(30236),mr=k.n(Mt),Vr=k(97019),Qr=k.n(Vr),On=k(23493),gi=k.n(On),oa=k(44908),po=k.n(oa),Ps=k(11700),ll=k.n(Ps),Ju=k(23560),Fo=k.n(Ju),mp=k(13218),zd=k.n(mp),Wc=k(52353),yp=k.n(Wc),hf=k(68929),td=k.n(hf),Ca={isNil:jc(),merge:Du(),throttle:gi(),isString:ff(),debounce:Ec(),pull:Qr(),isTypedArray:vp(),isPlainObject:Nd(),isNumber:ed(),isBoolean:El(),isEqual:Nl(),cloneDeep:Jp(),uniq:po(),clamp:ih(),upperFirst:ll(),get:nu(),mergeWith:mr(),isFunction:Fo(),isObject:zd(),isUndefined:yp(),camelCase:td()},pf=Ca.pull;function oh(e){var a=e;return typeof e=="string"&&(a=window.document.getElementById(e)),a}function sh(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function If(e){return sh(e).split(/\s+/)}function uh(e){var a,r=(a=document)===null||a===void 0||(a=a.documentElement)===null||a===void 0?void 0:a.style;if(!r)return e[0];for(var o in e)if(e[o]&&e[o]in r)return e[o];return e[0]}function Zs(e,a,r){var o=window.document.createElement(e);return a&&(o.className=a||""),r&&r.appendChild(o),o}function ic(e){var a=e.parentNode;a&&a.removeChild(e)}function el(e,a){if(e.classList!==void 0)for(var r=If(a),o=0,u=r.length;o<u;o++)e.classList.add(r[o]);else if(!Ud(e,a)){var c=Gc(e);rd(e,(c?c+" ":"")+a)}}function _p(e,a){if(e.classList!==void 0){var r=If(a);r.forEach(function(o){e.classList.remove(o)})}else rd(e,sh((" "+Gc(e)+" ").replace(" "+a+" "," ")))}function Ud(e,a){if(e.classList!==void 0)return e.classList.contains(a);var r=Gc(e);return r.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(r)}function rd(e,a){e instanceof HTMLElement?e.className=a:e.className.baseVal=a}function Gc(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function df(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var lh=uh(["transform","WebkitTransform"]);function xp(e,a){e.style[lh]=a}function Pf(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}}function cm(e){var a=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log(`%c
`,a.join(""))}function nd(){var e,a=window.document.querySelector('meta[name="viewport"]');if(!a)return 1;var r=(e=a.content)===null||e===void 0?void 0:e.split(","),o=r.find(function(u){var c=u.split("="),p=(0,ji.Z)(c,1),g=p[0];return g==="initial-scale"});return o?o.split("=")[1]*1:1}var Os=nd()<1?1:window.devicePixelRatio;function bp(e,a){e.setAttribute("style","".concat(e.style.cssText).concat(a))}function Zh(e){return e.split(";").map(function(a){return a.trim()}).filter(function(a){return a})}function Zd(e,a){var r,o=Zh((r=e.getAttribute("style"))!==null&&r!==void 0?r:""),u=Zh(a),c=pf.apply(void 0,[o].concat((0,Rn.Z)(u)));e.setAttribute("style",c.join(";"))}function Sp(e){return Object.entries(e).map(function(a){var r=(0,ji.Z)(a,2),o=r[0],u=r[1];return"".concat(o,": ").concat(u)}).join(";")}function Ep(e,a){return{left:e.left-a.left,top:e.top-a.top,right:a.left+a.width-e.left-e.width,bottom:a.top+a.height-e.top-e.height}}function Ov(e,a){e.checked=a,a?e.setAttribute("checked","true"):e.removeAttribute("checked")}function $c(e){e.innerHTML=""}function Vd(e){e.setAttribute("draggable","false")}function ch(e,a){if(typeof a=="string"){var r=document.createElement("div");for(r.innerHTML=a;r.firstChild;)e.append(r.firstChild)}else Array.isArray(a)?e.append.apply(e,(0,Rn.Z)(a)):e.append(a)}function us(e,a){for(var r=Array.isArray(a)?a:[a],o=e;o instanceof Element&&o!==window.document.body;){var u,c;if(r.find(function(p){var g;return(g=o)===null||g===void 0?void 0:g.matches(p)}))return o;o=(u=(c=o)===null||c===void 0?void 0:c.parentElement)!==null&&u!==void 0?u:null}}var fh;function Cc(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function ac(){return typeof importScripts=="function"}var oo=ac()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},$o=(fh=navigator)===null||fh===void 0?void 0:fh.userAgent,vo=!!$o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),id=$o.indexOf("Android")>-1||$o.indexOf("Adr")>-1;function Of(){for(var e=$o,a=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,o=0,u=a;o<u.length;o++){var c=u[o];if(e.indexOf(c)>0){r=!1;break}}return r}function wp(e,a){e.forEach(function(r){a[r]&&(a[r]=a[r].bind(a))})}var kv=null;function va(e){var a=[1/0,1/0,-1/0,-1/0];return H(e,function(r){a[0]>r[0]&&(a[0]=r[0]),a[1]>r[1]&&(a[1]=r[1]),a[2]<r[0]&&(a[2]=r[0]),a[3]<r[1]&&(a[3]=r[1])}),a}va.default=va;var Cp=va;function Xc(e){return typeof e=="number"}var $s=2*Math.PI*6378137/2;function Es(e,a){var r=(0,ji.Z)(a,4),o=r[0],u=r[1],c=r[2],p=r[3];return e.lng>o&&e.lng<=c&&e.lat>u&&e.lat<=p}function hh(e){var a=[1/0,1/0,-1/0,-1/0];return e.forEach(function(r){var o=r.coordinates;ad(a,o)}),a}function ad(e,a){return Array.isArray(a[0])?a.forEach(function(r){ad(e,r)}):(e[0]>a[0]&&(e[0]=a[0]),e[1]>a[1]&&(e[1]=a[1]),e[2]<a[0]&&(e[2]=a[0]),e[3]<a[1]&&(e[3]=a[1])),e}function ks(e,a){return Ni(e,a)}function Ni(e,a){return Array.isArray(e[0])?e.map(function(r){return Ni(r,a)}):a(e)}function ju(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=Zo(e,a);var o=e[0],u=e[1],c=o*$s/180,p=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return p=p*$s/180,r.enable&&(c=Number(c.toFixed(r.decimal)),p=Number(p.toFixed(r.decimal))),e.length===3?[c,p,e[2]]:[c,p]}function Yc(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=e[0],o=e[1],u=r/$s*180,c=o/$s*180;return c=180/Math.PI*(2*Math.atan(Math.exp(c*Math.PI/180))-Math.PI/2),a!=null&&(u=Number(u.toFixed(a)),c=Number(c.toFixed(a))),e.length===3?[u,c,e[2]]:[u,c]}function kf(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function cl(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Zo(e,a){if(a===!1)return e;var r=kf(e[0]),o=cl(e[1]);return o>85&&(o=85),o<-85&&(o=-85),e.length===3?[r,o,e[2]]:[r,o]}function Ds(e){var a=85.0511287798,r=Math.max(Math.min(a,e[1]),-a),o=256<<20,u=Math.PI/180,c=e[0]*u,p=r*u;p=Math.log(Math.tan(Math.PI/4+p/2));var g=.5/Math.PI,y=.5,S=-.5/Math.PI;return u=.5,c=o*(g*c+y),p=o*(S*p+u),[Math.floor(c),Math.floor(p)]}function Ei(e){var a=.5/Math.PI,r=.5,o=-.5/Math.PI,u=.5,c=256<<20,p=_slicedToArray(e,2),g=p[0],y=p[1];g=(g/c-r)/a,y=(y/c-u)/o,y=(Math.atan(Math.pow(Math.E,y))-Math.PI/4)*2,u=Math.PI/180;var S=y/u,O=g/u;return[O,S]}function zl(e,a){var r=85.0511287798,o=Math.PI/180,u=6378137;return a=Math.max(Math.min(r,a),-r),e*=o,a*=o,a=Math.log(Math.tan(Math.PI/4+a/2)),[e*u,a*u]}function ph(e,a){var r=Math.PI/180,o=6378137,u=e/o/r,c=2*(Math.atan(Math.exp(a/o))-Math.PI/4)/r;return[u,c]}function Vh(e,a,r){var o=xr(a[1]-e[1]),u=xr(a[0]-e[0]),c=xr(e[1]),p=xr(a[1]),g=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(p);return ke(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),r="meters")}function Tc(e){var a=Math.PI/180,r=85.0511287798,o=6378137,u=Math.max(Math.min(r,e[1]),-r),c=Math.sin(u*a),p=o*e[0]*a,g=o*Math.log((1+c)/(1-c))/2;return[p,g]}function Cu(e,a){var r=Math.abs(e[1][1]-e[0][1])*a,o=Math.abs(e[1][0]-e[0][0])*a;return[[e[0][0]-o,e[0][1]-r],[e[1][0]+o,e[1][1]+r]]}function Tp(e,a){return e[0][0]<=a[0][0]&&e[0][1]<=a[0][1]&&e[1][0]>=a[1][0]&&e[1][1]>=a[1][1]}function Ac(e){return[[e[0],e[1]],[e[2],e[3]]]}function iu(e){var a=fl(e,[0,0]);return[e[0]/a,e[1]/a]}function fl(e,a){return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function Dv(e,a){return e[0]*a[0]+e[1]*a[1]}function Hh(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function jh(e,a){return Math.acos(Dv(e,a)/(Hh(e)*Hh(a)))*180/Math.PI}function Hd(e,a){return a[0]>0?a[1]>0?90-Math.atan(a[1]/a[0])*180/Math.PI:90+Math.atan(-a[1]/a[0])*180/Math.PI:a[1]<0?180+(90-Math.atan(a[1]/a[0])*180/Math.PI):270+Math.atan(a[1]/-a[0])*180/Math.PI}function oc(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!e||e.length<2)){for(var r=[0,1],o=0,u=[],c=0;c<e.length-1;c++){var p=e[c],g=e[c+1],y=fl(p,g);o+=y;var S=[p[0]-g[0],p[1]-g[1]],O=Hd(r,S);if(c>0){var L=u[c-1].rotation;L-O>360-L+O&&(O=O+360)}u.push({start:p,end:g,dis:y,rotation:O,duration:0})}return u.map(function(V){V.duration=a*(V.dis/o)}),u}}function au(e){if(Xc(e[0]))return e;if(Xc(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Xc(e[0][0][0])){var a=e,r=0,o=0,u=0;return a.forEach(function(c){c.forEach(function(p){r+=p[0],o+=p[1],u++})}),[r/u,o/u,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function ja(e){for(var a=e[0],r=e[1],o=e[0],u=e[1],c=0,p=0,g=0,y=0;y<e.length;y+=2){var S=e[y],O=e[y+1];S&&O&&(a=Math.max(S,a),r=Math.max(O,r),o=Math.min(S,o),u=Math.min(O,u),c+=S,p+=O,g++)}return{center:[c/g,p/g],radius:Math.sqrt(Math.pow(a-o,2)+Math.pow(r-u,2))/2}}function ws(e){return Cp(Ht([Ze(e)]))}function Kl(e){var a=131,r=137,o=0;e+="x";for(var u=Math.floor(9007199254740991/r),c=0;c<e.length;c++)o>u&&(o=Math.floor(o/r)),o=o*a+e.charCodeAt(c);return o}function Wu(e){e=e.toString();for(var a=5381,r=e.length;r;)a=a*33^e.charCodeAt(--r);return a>>>0}function Df(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,r=e==="x"?a:a&3|8;return r.toString(16)})}var Mc=function(e){return e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL",e}({});function tl(e,a,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*(c-1))/(c-1)),o?wi(e,a,g,o,u):wi(e,a,g,.314,u)}function Tu(e,a){var r=1-a;return(e[0]*r+e[1]*a)*r+(e[1]*r+e[2]*a)*a}function Wh(e,a){return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function Qi(e,a,r){var o=[a[0]-e[0],a[1]-e[1]],u=Wh(o,[0,0]),c=Math.atan2(o[1],o[0]),p=u/2/Math.cos(r),g=c+r,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function wi(e,a,r,o,u){if(u===MapType["GAODE2.x"]){var c=amap2Project(e[0],e[1]),p=amap2Project(a[0],a[1]),g=Qi(c,p,o),y=[c[0],g[0],p[0]],S=[c[1],g[1],p[1]];return[].concat(_toConsumableArray(amap2UnProject(Tu(y,r),Tu(S,r))),[0])}else{var O=Qi(e,a,o),L=[e[0],O[0],a[0]],V=[e[1],O[1],a[1]];return[Tu(L,r),Tu(V,r),0]}}function wl(e,a,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*29)/29),sc(e,a,g,u)}function rl(e,a){var r=[a[0]-e[0],a[1]-e[1]],o=calDistance(r,[0,0]),u=Math.atan2(r[1],r[0]),c=.314,p=o/2/Math.cos(c),g=u+c,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function Gu(e,a){var r=1-a;return(e[0]*r+e[1]*a)*r+(e[1]*r+e[2]*a)*a}function Cs(e,a){var r=[e[0]-a[0],e[1]-a[1]],o=[Math.sin(r[0]/2),Math.sin(r[1]/2)],u=o[1]*o[1]+Math.cos(e[1])*Math.cos(a[1])*o[0]*o[0];return 2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function sc(e,a,r,o){var u=[degreesToRadians(e[0]),degreesToRadians(e[1])],c=[degreesToRadians(a[0]),degreesToRadians(a[1])];if(o==="GAODE2.x"){var p=rl(u,c),g=[u[0],p[0],c[0]],y=[u[1],p[1],c[1]];return[Gu(g,r),Gu(y,r),0]}else{var S=Cs(u,c);if(Math.abs(S-Math.PI)<.001)return[(1-r)*u[0]+r*c[0],(1-r)*u[1]+r*c[1]];var O=Math.sin((1-r)*S)/Math.sin(S),L=Math.sin(r*S)/Math.sin(S),V=[Math.sin(u[0]),Math.sin(u[1])],G=[Math.cos(u[0]),Math.cos(u[1])],he=[Math.sin(c[0]),Math.sin(c[1])],ve=[Math.cos(c[0]),Math.cos(c[1])],Pe=O*G[1]*G[0]+L*ve[1]*ve[0],Xe=O*G[1]*V[0]+L*ve[1]*he[0],gt=O*V[1]+L*he[1];return[radiansToDegrees(Math.atan2(Xe,Pe)),radiansToDegrees(Math.atan2(gt,Math.sqrt(Pe*Pe+Xe*Xe)))]}}function Lf(e,a){for(var r=0,o=[],u=0;u<e.length-1;u++){var c=e[u],p=e[u+1],g=zo(c,p),y=r;r+=g,o.push({p1:c,p2:p,totalDistance:r,distance:g,lastTotalDistance:y})}for(var S=r*a,O,L,V=0,G=o;V<G.length;V++){var he=G[V],ve=he.totalDistance;if(ve>S){var Pe=he.p1,Xe=he.p2,gt=(S-he.lastTotalDistance)/he.distance,_t=dh(Xe,Pe,gt);O=_t[0],L=_t[1];break}}return{lng:O,lat:L,height:0}}function dh(e,a,r){return[e[0]*r+a[0]*(1-r),e[1]*r+a[1]*(1-r)]}function zo(e,a){return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function Xs(e,a){var r=a.featureId,o=e.data.dataArray;return typeof r=="number"&&(o=o.filter(function(u){var c=u.id;return c===r})),o.map(function(u){var c=vh(u,a);return _objectSpread(_objectSpread({},u),c)})}function Lv(e,a){return new Promise(function(r){e.inited?r(Xs(e,a)):e.once("update",function(){r(Xs(e,a))})})}function vh(e,a){var r=a.offset,o=a.shape,u=a.thetaOffset,c=a.mapVersion,p=a.segmentNumber,g=p===void 0?30:p,y=a.autoFit,S=y===void 0?!0:y,O=e.coordinates;if(o==="line")return pathLineAtOffset(O,r);var L=O[0],V=O[1],G=typeof u=="string"?e[u]||0:u,he;switch(o){case"arc":he=arcLineAtOffset;break;case"greatcircle":he=greatCircleLineAtOffset;break;default:he=arcLineAtOffset}var ve=he(L,V,r,G,c,g,S),Pe=_slicedToArray(ve,3),Xe=Pe[0],gt=Pe[1],_t=Pe[2];return{lng:Xe,lat:gt,height:_t}}var Ff=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,r=arguments.length>1?arguments[1]:void 0;(0,Ot.Z)(this,e),this.limit=a,this.destroy=r||this.defaultDestroy,this.order=[],this.clear()}return(0,ot.Z)(e,[{key:"clear",value:function(){var r=this;this.order.forEach(function(o){r.delete(o)}),this.cache={},this.order=[]}},{key:"get",value:function(r){var o=this.cache[r];return o&&(this.deleteOrder(r),this.appendOrder(r)),o}},{key:"set",value:function(r,o){this.cache[r]?(this.delete(r),this.cache[r]=o,this.appendOrder(r)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[r]=o,this.appendOrder(r))}},{key:"delete",value:function(r){var o=this.cache[r];o&&(this.deleteCache(r),this.deleteOrder(r),this.destroy(o,r))}},{key:"deleteCache",value:function(r){delete this.cache[r]}},{key:"deleteOrder",value:function(r){var o=this.order.findIndex(function(u){return u===r});o>=0&&this.order.splice(o,1)}},{key:"appendOrder",value:function(r){this.order.push(r)}},{key:"defaultDestroy",value:function(r,o){return null}}]),e}();function uc(e){if(e.length===0)throw new Error("max requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]>a&&(a=e[r]);return a*1}function Ta(e){if(e.length===0)throw new Error("min requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]<a&&(a=e[r]);return a*1}function gh(e){if(e.length===0)return 0;for(var a=e[0]*1,r=1;r<e.length;r++)a+=e[r]*1;return a}function Kc(e){if(e.length===0)throw new Error("mean requires at least one data point");return gh(e)/e.length}function od(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var a=e[0],r=NaN,o=0,u=1,c=1;c<e.length+1;c++)e[c]!==a?(u>o&&(o=u,r=a),u=1,a=e[c]):u++;return r*1}var Bf={min:Ta,max:uc,mean:Kc,sum:gh,mode:od};function Gh(e,a){return e.map(function(r){return r[a]})}function jd(e,a){return Bf[e](a)}var Sn=k(15861),wr=k(97326),He=k(4942),qc=k(64687),er=k.n(qc);function sd(e,a){a===void 0&&(a={});var r=Number(e[0]),o=Number(e[1]),u=Number(e[2]),c=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var p=[r,o],g=[r,c],y=[u,c],S=[u,o];return me([[p,S,y,g,p]],a.properties,{bbox:e,id:a.id})}var Ys=k(26729),Ul=k.n(Ys),$h=function(e){return e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace",e}({}),Cl=function(e){return e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled",e}({}),Ap=0,Mp=1,b=2;function A(e){e.forEach(function(a){a.isCurrent&&(a.isVisible=a.isLoaded)})}function C(e){e.forEach(function(a){a.properties.state=Ap}),e.forEach(function(a){a.isCurrent&&!Z(a)&&ee(a)}),e.forEach(function(a){a.isVisible=!!(a.properties.state&b)})}function I(e){e.forEach(function(r){r.properties.state=Ap}),e.forEach(function(r){r.isCurrent&&Z(r)});var a=e.slice().sort(function(r,o){return r.z-o.z});a.forEach(function(r){r.isVisible=!!(r.properties.state&b),r.children.length&&(r.isVisible||r.properties.state&Mp)?r.children.forEach(function(o){o.properties.state=Mp}):r.isCurrent&&ee(r)})}function Z(e){for(;e;){if(e.isLoaded)return e.properties.state|=b,!0;e=e.parent}return!1}function ee(e){e.children.forEach(function(a){a.isLoaded?a.properties.state|=b:ee(a)})}var ae,Ae=256,at=[-1/0,-1/0,1/0,1/0],bt=.2,Vt=5,Wt=(ae={},(0,He.Z)(ae,$h.Realtime,A),(0,He.Z)(ae,$h.Overlap,C),(0,He.Z)(ae,$h.Replace,I),ae),$t=function(){};function dr(e,a,r){var o=Math.floor((e+180)/360*Math.pow(2,r)),u=Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*Math.pow(2,r));return[o,u]}function hr(e,a,r){var o=e/Math.pow(2,r)*360-180,u=Math.PI-2*Math.PI*a/Math.pow(2,r),c=180/Math.PI*Math.atan(.5*(Math.exp(u)-Math.exp(-u)));return[o,c]}var Rr=function(a,r,o){var u=hr(a,r,o),c=(0,ji.Z)(u,2),p=c[0],g=c[1],y=hr(a+1,r+1,o),S=(0,ji.Z)(y,2),O=S[0],L=S[1];return[p,L,O,g]};function lr(e){var a=e.zoom,r=e.latLonBounds,o=e.maxZoom,u=o===void 0?1/0:o,c=e.minZoom,p=c===void 0?0:c,g=e.zoomOffset,y=g===void 0?0:g,S=e.extent,O=S===void 0?at:S,L=Math.ceil(a)+y;if(Number.isFinite(p)&&L<p)return[];Number.isFinite(u)&&L>u&&(L=u);for(var V=(0,ji.Z)(r,4),G=V[0],he=V[1],ve=V[2],Pe=V[3],Xe=[Math.max(G,O[0]),Math.max(he,O[1]),Math.min(ve,O[2]),Math.min(Pe,O[3])],gt=[],_t=dr(Xe[0],Xe[1],L),zt=(0,ji.Z)(_t,2),Xt=zt[0],nr=zt[1],ar=dr(Xe[2],Xe[3],L),Tr=(0,ji.Z)(ar,2),Zr=Tr[0],rn=Tr[1],ln=Xt;ln<=Zr;ln++)for(var Gn=rn;Gn<=nr;Gn++)gt.push({x:ln,y:Gn,z:L});var fi=(Zr+Xt)/2,Fi=(nr+rn)/2,uo=function(as,tu){return Math.abs(as-fi)+Math.abs(tu-Fi)};return gt.sort(function(is,as){return uo(is.x,is.y)-uo(as.x,as.y)}),gt}var Ir=function(a,r,o){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=Math.pow(2,o),p=c-1,g=c,y=a,S=r;return u&&(y<0?y=y+g:y>p&&(y=y%g)),{warpX:y,warpY:S}};function Hr(e){var a=en();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function en(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var _n=function(e){(0,yr.Z)(r,e);var a=Hr(r);function r(o){var u;(0,Ot.Z)(this,r),u=a.call(this),(0,He.Z)((0,wr.Z)(u),"tileSize",256),(0,He.Z)((0,wr.Z)(u),"isVisible",!1),(0,He.Z)((0,wr.Z)(u),"isCurrent",!1),(0,He.Z)((0,wr.Z)(u),"isVisibleChange",!1),(0,He.Z)((0,wr.Z)(u),"loadedLayers",0),(0,He.Z)((0,wr.Z)(u),"isLayerLoaded",!1),(0,He.Z)((0,wr.Z)(u),"isLoad",!1),(0,He.Z)((0,wr.Z)(u),"isChildLoad",!1),(0,He.Z)((0,wr.Z)(u),"parent",null),(0,He.Z)((0,wr.Z)(u),"children",[]),(0,He.Z)((0,wr.Z)(u),"data",null),(0,He.Z)((0,wr.Z)(u),"properties",{}),(0,He.Z)((0,wr.Z)(u),"loadDataId",0);var c=o.x,p=o.y,g=o.z,y=o.tileSize,S=o.warp,O=S===void 0?!0:S;return u.x=c,u.y=p,u.z=g,u.warp=O||!0,u.tileSize=y,u}return(0,ot.Z)(r,[{key:"isLoading",get:function(){return this.loadStatus===Cl.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Cl.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Cl.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===Cl.Cancelled}},{key:"isDone",get:function(){return[Cl.Loaded,Cl.Cancelled,Cl.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return Rr(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var u=(0,ji.Z)(this.bounds,4),c=u[0],p=u[1],g=u[2],y=u[3],S=[(g-c)/2,(y-p)/2],O=sd(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:S,meta:`
      `.concat(this.key,`
      `)}});return O}},{key:"key",get:function(){var u="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return u}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g,y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t,zt,Xt,nr,ar;return er().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return g=p.getData,y=p.onLoad,S=p.onError,this.loadDataId++,O=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Cl.Loading,L=null,Zr.prev=7,G=this.x,he=this.y,ve=this.z,Pe=this.bounds,Xe=this.tileSize,gt=this.warp,_t=Ir(G,he,ve,gt),zt=_t.warpX,Xt=_t.warpY,nr=this.abortController.signal,ar={x:zt,y:Xt,z:ve,bounds:Pe,tileSize:Xe,signal:nr,warp:gt},Zr.next=14,g(ar,this);case 14:L=Zr.sent,Zr.next=20;break;case 17:Zr.prev=17,Zr.t0=Zr.catch(7),V=Zr.t0;case 20:if(O===this.loadDataId){Zr.next=22;break}return Zr.abrupt("return");case 22:if(!(this.isCancelled&&!L)){Zr.next=24;break}return Zr.abrupt("return");case 24:if(!(V||!L)){Zr.next=28;break}return this.loadStatus=Cl.Failure,S(V,this),Zr.abrupt("return");case 28:this.loadStatus=Cl.Loaded,this.data=L,y(this);case 31:case"end":return Zr.stop()}},c,this,[[7,17]])}));function u(c){return o.apply(this,arguments)}return u}()},{key:"reloadData",value:function(u){this.isLoading&&this.abortLoad(),this.loadData(u)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Cl.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),r}(Ys.EventEmitter),pn=function(a,r){var o=Ac(a),u=Cu(o,r),c=360*3-180,p=85.0511287798065,g=[Math.max(u[0][0],-c),Math.max(u[0][1],-p),Math.min(u[1][0],c),Math.min(u[1][1],p)];return g},An=function(a,r){var o=Ac(a),u=Ac(r),c=Tp(o,u);return c};function Ln(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=pi(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function pi(e,a){if(e){if(typeof e=="string")return oi(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oi(e,a)}}function oi(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function Pi(e){var a=ta();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function ta(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sa=Ca.throttle,Ki=function(e){return e.TilesLoadStart="tiles-load-start",e.TileLoaded="tile-loaded",e.TileError="tile-error",e.TileUnload="tile-unload",e.TileUpdate="tile-update",e.TilesLoadFinished="tiles-load-finished",e}({}),_o=function(e){(0,yr.Z)(r,e);var a=Pi(r);function r(o){var u;return(0,Ot.Z)(this,r),u=a.call(this),(0,He.Z)((0,wr.Z)(u),"currentTiles",[]),(0,He.Z)((0,wr.Z)(u),"cacheTiles",new Map),(0,He.Z)((0,wr.Z)(u),"throttleUpdate",sa(function(c,p){u.update(c,p)},16)),(0,He.Z)((0,wr.Z)(u),"onTileLoad",function(c){u.emit(Ki.TileLoaded,c),u.updateTileVisible(),u.loadFinished()}),(0,He.Z)((0,wr.Z)(u),"onTileError",function(c,p){u.emit(Ki.TileError,{error:c,tile:p}),u.updateTileVisible(),u.loadFinished()}),(0,He.Z)((0,wr.Z)(u),"onTileUnload",function(c){u.emit(Ki.TileUnload,c),u.loadFinished()}),u.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:at,getTileData:$t,warp:!0,updateStrategy:$h.Replace},u.updateOptions(o),u}return(0,ot.Z)(r,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(u){return u.isDone})}},{key:"tiles",get:function(){var u=Array.from(this.cacheTiles.values()).sort(function(c,p){return c.z-p.z});return u}},{key:"updateOptions",value:function(u){var c=u.minZoom===void 0?this.options.minZoom:Math.ceil(u.minZoom),p=u.maxZoom===void 0?this.options.maxZoom:Math.floor(u.maxZoom);this.options=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},this.options),u),{},{minZoom:c,maxZoom:p})}},{key:"update",value:function(u,c){var p=this,g=Math.max(0,Math.ceil(u));if(!(this.lastViewStates&&this.lastViewStates.zoom===g&&An(this.lastViewStates.latLonBoundsBuffer,c))){var y=pn(c,bt);this.lastViewStates={zoom:g,latLonBounds:c,latLonBoundsBuffer:y},this.currentZoom=g;var S=!1,O=this.getTileIndices(g,y).filter(function(L){return p.options.warp||L.x>=0&&L.x<Math.pow(2,g)});this.emit(Ki.TilesLoadStart),this.currentTiles=O.map(function(L){var V=L.x,G=L.y,he=L.z,ve=p.getTile(V,G,he);if(ve){var Pe,Xe,gt=((Pe=ve)===null||Pe===void 0?void 0:Pe.isFailure)||((Xe=ve)===null||Xe===void 0?void 0:Xe.isCancelled);return gt&&ve.loadData({getData:p.options.getTileData,onLoad:p.onTileLoad,onError:p.onTileError}),ve}return ve=p.createTile(V,G,he),S=!0,ve}),S&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var u=Ln(this.cacheTiles),c;try{for(u.s();!(c=u.n()).done;){var p=(0,ji.Z)(c.value,2),g=p[0],y=p[1];if(!this.currentTiles.includes(y)){this.cacheTiles.delete(g),this.onTileUnload(y);return}this.onTileUnload(y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(S){u.e(S)}finally{u.f()}}},{key:"reloadTileById",value:function(u,c,p){var g=this.cacheTiles.get("".concat(c,",").concat(p,",").concat(u));g&&(this.onTileUnload(g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(u,c,p){var g=this.getTileByLngLat(u,c,p);g&&this.reloadTileById(g.z,g.x,g.y)}},{key:"reloadTileByExtent",value:function(u,c){var p=this,g=this.getTileIndices(c,u);g.forEach(function(y){p.reloadTileById(y.z,y.x,y.y)})}},{key:"pruneRequests",value:function(){var u=[],c=Ln(this.cacheTiles.values()),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;g.isLoading&&!g.isCurrent&&!g.isVisible&&u.push(g)}}catch(S){c.e(S)}finally{c.f()}for(;u.length>0;){var y=u.shift();y.abortLoad()}}},{key:"getTileByLngLat",value:function(u,c,p){var g=this.options.zoomOffset,y=Math.ceil(p)+g,S=dr(u,c,y),O=this.tiles.filter(function(L){return L.key==="".concat(S[0],"_").concat(S[1],"_").concat(y)});return O[0]}},{key:"getTileExtent",value:function(u,c){return this.getTileIndices(c,u)}},{key:"getTileByZXY",value:function(u,c,p){var g=this.tiles.filter(function(y){return y.key==="".concat(c,"_").concat(p,"_").concat(u)});return g[0]}},{key:"clear",value:function(){var u=Ln(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.isLoading?p.abortLoad():this.onTileUnload(p)}}catch(g){u.e(g)}finally{u.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var u=this.options.updateStrategy,c=new Map,p=Ln(this.cacheTiles.values()),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;c.set(y.key,y.isVisible),y.isCurrent=!1,y.isVisible=!1}}catch(he){p.e(he)}finally{p.f()}var S=Ln(this.currentTiles),O;try{for(S.s();!(O=S.n()).done;){var L=O.value;L.isCurrent=!0,L.isVisible=!0}}catch(he){S.e(he)}finally{S.f()}var V=Array.from(this.cacheTiles.values());typeof u=="function"?u(V):Wt[u](V);var G=!1;Array.from(this.cacheTiles.values()).forEach(function(he){he.isVisible!==c.get(he.key)?(he.isVisibleChange=!0,G=!0):he.isVisibleChange=!1}),G&&this.emit(Ki.TileUpdate)}},{key:"getTileIndices",value:function(u,c){var p=this.options,g=p.tileSize,y=p.extent,S=p.zoomOffset,O=Math.floor(this.options.maxZoom),L=Math.ceil(this.options.minZoom),V=lr({maxZoom:O,minZoom:L,zoomOffset:S,tileSize:g,zoom:u,latLonBounds:c,extent:y});return V}},{key:"getTileId",value:function(u,c,p){var g="".concat(u,",").concat(c,",").concat(p);return g}},{key:"loadFinished",value:function(){var u=!this.currentTiles.some(function(c){return!c.isDone});return u&&this.emit(Ki.TilesLoadFinished),u}},{key:"getTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=this.cacheTiles.get(g);return y}},{key:"createTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=new _n({x:u,y:c,z:p,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(g,y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),y}},{key:"resizeCacheTiles",value:function(){var u=Vt*this.currentTiles.length,c=this.cacheTiles.size>u;if(c){var p=Ln(this.cacheTiles),g;try{for(p.s();!(g=p.n()).done;){var y=(0,ji.Z)(g.value,2),S=y[0],O=y[1];if(!O.isVisible&&!this.currentTiles.includes(O)&&(this.cacheTiles.delete(S),this.onTileUnload(O)),this.cacheTiles.size<=u)break}}catch(L){p.e(L)}finally{p.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var u=Ln(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.parent=null,p.children.length=0}}catch(L){u.e(L)}finally{u.f()}var g=Ln(this.cacheTiles.values()),y;try{for(g.s();!(y=g.n()).done;){var S=y.value,O=this.getNearestAncestor(S.x,S.y,S.z);S.parent=O,O!=null&&O.children&&O.children.push(S)}}catch(L){g.e(L)}finally{g.f()}}},{key:"getNearestAncestor",value:function(u,c,p){for(;p>this.options.minZoom;){u=Math.floor(u/2),c=Math.floor(c/2),p=p-1;var g=this.getTile(u,c,p);if(g)return g}return null}}]),r}(Ul());function Bi(e){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function Ia(e){var a=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var o=r[1].charCodeAt(0),u=r[2].charCodeAt(0),c;for(c=o;c<=u;++c)a.push(e.replace(r[0],String.fromCharCode(c)));return a}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var p=parseInt(r[2],10),g=parseInt(r[1],10);g<=p;g++)a.push(e.replace(r[0],g.toString()));return a}return a.push(e),a}function La(e,a){if(!e||!e.length)throw new Error("url is not allowed to be empty");var r=a.x,o=a.y,u=a.z,c=Ia(e),p=Math.abs(r+o)%c.length,g=vi(c[p])?"".concat(c[p],"/{z}/{x}/{y}"):c[p];return g.replace(/\{x\}/g,r.toString()).replace(/\{y\}/g,o.toString()).replace(/\{z\}/g,u.toString()).replace(/\{bbox\}/g,Rr(r,o,u).join(",")).replace(/\{-y\}/g,(Math.pow(2,u)-o-1).toString())}function Aa(e,a){var r=a.x,o=a.y,u=a.z,c=a.layer,p=a.version,g=p===void 0?"1.0.0":p,y=a.style,S=y===void 0?"default":y,O=a.format,L=a.service,V=L===void 0?"WMTS":L,G=a.tileMatrixset,he="".concat(e,"&SERVICE=").concat(V,"&REQUEST=GetTile&VERSION=").concat(g,"&LAYER=").concat(c,"&STYLE=").concat(S,"&TILEMATRIXSET=").concat(G,"&FORMAT=").concat(O,"&TILECOL=").concat(r,"&TILEROW=").concat(o,"&TILEMATRIX=").concat(u);return he}function fa(e,a){if(!e)throw new Error(a||"web worker helper assertion failed.")}var Ma={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},Ea=Ma.self||Ma.window||{},ha=Ma.window||Ma.self||{},Au=Ma.self||Ma.window||{},Ls=Ma.document||{},$u=typeof importScripts=="function",Mu=typeof window!="undefined"&&typeof window.orientation!="undefined",es=function(){function e(a,r){var o=this;this.name=a,this.workerThread=r,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(u,c){o.resolve=u,o.reject=c})}return e.prototype.postMessage=function(a,r){this.workerThread.postMessage({source:"Main thread",type:a,payload:r})},e.prototype.done=function(a){fa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(a)},e.prototype.error=function(a){fa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(a)},e}(),ys=es,Ru=new Map;function gu(e){fa(e.source&&!e.url||!e.source&&e.url);var a=Ru.get(e.source||e.url);return a||(e.url&&(a=Qc(e.url),Ru.set(e.url,a)),e.source&&(a=nl(e.source),Ru.set(e.source,a))),fa(a),a}function Qc(e){if(!e.startsWith("http"))return e;var a=lc(e);return nl(a)}function nl(e){var a=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(a)}function lc(e){return`try {
  importScripts('`+e+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function hl(e,a,r){a===void 0&&(a=!0);var o=r||new Set;if(e){if(Nf(e))o.add(e);else if(Nf(e.buffer))o.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(a&&typeof e=="object")for(var u in e)hl(e[u],a,o)}}return r===void 0?Array.from(o):[]}function Nf(e){return e?e instanceof ArrayBuffer||typeof MessagePort!="undefined"&&e instanceof MessagePort||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas:!1}var vf=function(){},Jc=function(){function e(a){this.terminated=!1,this.loadableURL="";var r=a.name,o=a.source,u=a.url;fa(o||u),this.name=r,this.source=o,this.url=u,this.onMessage=vf,this.onError=function(c){return console.log(c)},this.worker=this.createBrowserWorker()}return e.isSupported=function(){return typeof Worker!="undefined"},e.prototype.destroy=function(){this.onMessage=vf,this.onError=vf,this.worker.terminate(),this.terminated=!0},Object.defineProperty(e.prototype,"isRunning",{get:function(){return!!this.onMessage},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(a,r){r=r||hl(a),this.worker.postMessage(a,r)},e.prototype.getErrorFromErrorEvent=function(a){var r="Failed to load ";return r+="worker "+this.name+" from "+this.url+". ",a.message&&(r+=a.message+" in "),a.lineno&&(r+=":"+a.lineno+":"+a.colno),new Error(r)},e.prototype.createBrowserWorker=function(){var a=this;this.loadableURL=gu({source:this.source,url:this.url});var r=new Worker(this.loadableURL,{name:this.name});return r.onmessage=function(o){o.data?a.onMessage(o.data):a.onError(new Error("No data received"))},r.onerror=function(o){a.onError(a.getErrorFromErrorEvent(o)),a.terminated=!0},r.onmessageerror=function(o){return console.error("worker "+a.name+", message error: "+o)},r},e}(),gf=Jc,cc=function(){return cc=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},cc.apply(this,arguments)},fc=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(L){p(L)}}function y(O){try{S(o.throw(O))}catch(L){p(L)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},mf=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Lu=function(){function e(a){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=a.source,this.url=a.url,this.setProps(a)}return e.prototype.destroy=function(){this.idleQueue.forEach(function(a){return a.destroy()}),this.isDestroyed=!0},e.prototype.setProps=function(a){this.props=cc(cc({},this.props),a),a.name!==void 0&&(this.name=a.name),a.maxConcurrency!==void 0&&(this.maxConcurrency=a.maxConcurrency),a.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=a.maxMobileConcurrency),a.reuseWorkers!==void 0&&(this.reuseWorkers=a.reuseWorkers),a.onDebug!==void 0&&(this.onDebug=a.onDebug)},e.prototype.startJob=function(a,r,o){return r===void 0&&(r=function(u,c,p){return u.done(p)}),o===void 0&&(o=function(u,c){return u.error(c)}),fc(this,void 0,void 0,function(){var u,c=this;return mf(this,function(p){switch(p.label){case 0:return u=new Promise(function(g){return c.jobQueue.push({name:a,onMessage:r,onError:o,onStart:g}),c}),this.startQueuedJob(),[4,u];case 1:return[2,p.sent()]}})})},e.prototype.startQueuedJob=function(){return fc(this,void 0,void 0,function(){var a,r,o;return mf(this,function(u){switch(u.label){case 0:if(!this.jobQueue.length)return[2];if(a=this.getAvailableWorker(),!a)return[2];if(r=this.jobQueue.shift(),!r)return[3,4];this.onDebug({message:"Starting job",name:r.name,backlog:this.jobQueue.length,workerThread:a}),o=new ys(r.name,a),a.onMessage=function(c){return r.onMessage(o,c.type,c.payload)},a.onError=function(c){return r.onError(o,c)},r.onStart(o),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,o.result];case 2:return u.sent(),[3,4];case 3:return this.returnWorkerToQueue(a),[7];case 4:return[2]}})})},e.prototype.returnWorkerToQueue=function(a){var r=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();r?(a.destroy(),this.count--):this.idleQueue.push(a),this.isDestroyed||this.startQueuedJob()},e.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var a=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new gf({name:a,source:this.source,url:this.url})}return null},e.prototype.getMaxConcurrency=function(){return Mu?this.maxMobileConcurrency:this.maxConcurrency},e}(),Ts=Lu,ou=function(){return ou=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},ou.apply(this,arguments)},Tl=function(e){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&e[a],o=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},ql={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},go=function(){function e(a){this.workerPools=new Map,this.props=ou({},ql),this.setProps(a),this.workerPools=new Map}return e.isSupported=function(){return gf.isSupported()},e.getWorkerFarm=function(a){return a===void 0&&(a={}),e.workerFarm=e.workerFarm||new e({}),e.workerFarm.setProps(a),e.workerFarm},e.prototype.destroy=function(){var a,r;try{for(var o=Tl(this.workerPools.values()),u=o.next();!u.done;u=o.next()){var c=u.value;c.destroy()}}catch(p){a={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}},e.prototype.setProps=function(a){var r,o;this.props=ou(ou({},this.props),a);try{for(var u=Tl(this.workerPools.values()),c=u.next();!c.done;c=u.next()){var p=c.value;p.setProps(this.getWorkerPoolProps())}}catch(g){r={error:g}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},e.prototype.getWorkerPool=function(a){var r=a.name,o=a.source,u=a.url,c=this.workerPools.get(r);return c||(c=new Ts({name:r,source:o,url:u}),c.setProps(this.getWorkerPoolProps()),this.workerPools.set(r,c)),c},e.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}(),Xu=null,Ks=new Map,yf=function(){function e(){}return Object.defineProperty(e,"onmessage",{set:function(a){self.onmessage=function(r){if(_f(r)){var o=r.data,u=o.type,c=o.payload;a(u,c)}}},enumerable:!1,configurable:!0}),e.addEventListener=function(a){var r=Ks.get(a);r||(r=function(o){if(_f(o)){var u=o.data,c=u.type,p=u.payload;a(c,p)}}),self.addEventListener("message",r)},e.removeEventListener=function(a){var r=Ks.get(a);Ks.delete(a),self.removeEventListener("message",r)},e.postMessage=function(a,r){if(self){var o={source:"Worker thread",type:a,payload:r},u=hl(r);self.postMessage(o,u)}},e}(),ud=null;function _f(e){var a=e.type,r=e.data;return a==="message"&&r&&typeof r.source=="string"&&r.source==="Main thread"}function Fv(e){return JSON.parse(Al(e))}function Al(e){var a=new Set;return JSON.stringify(e,function(r,o){if(typeof o=="object"&&o!==null){if(a.has(o))try{return JSON.parse(JSON.stringify(o))}catch(u){return}a.add(o)}return o})}function Zl(e){return""+e.name}function Vl(e,a){a===void 0&&(a={});var r=a[e.id]||{},o=e.name+".worker.js",u=r.workerUrl;return a._workerType==="test"&&(u=e.module+"/dist/"+o),u||(u="https://unpkg.com/"+e.module+"/dist/"+o),assert(u),u}var zf=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(L){p(L)}}function y(O){try{S(o.throw(O))}catch(L){p(L)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},Rp=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};function Uf(e,a){return WorkerFarm.isSupported()?e.worker&&(a==null?void 0:a.worker):!1}function Ml(e,a,r,o){return r===void 0&&(r={}),o===void 0&&(o={}),zf(this,void 0,void 0,function(){var u,c,p,g,y,S,O,L;return Rp(this,function(V){switch(V.label){case 0:return u=getWorkerName(e),c=getWorkerURL(e,r),p=WorkerFarm.getWorkerFarm(r),g=p.getWorkerPool({name:u,url:c}),y=r.jobName||e.name,[4,g.startJob(y,Bv.bind(null,o))];case 1:return S=V.sent(),O=removeNontransferableOptions(r),S.postMessage("process",{input:a,options:O}),[4,S.result];case 2:return L=V.sent(),[2,L.result]}})})}function Bv(e,a,r,o){return zf(this,void 0,void 0,function(){var u,c,p,g,y,S,O;return Rp(this,function(L){switch(L.label){case 0:switch(u=r,u){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return a.done(o),[3,9];case 2:return a.error(new Error(o.error)),[3,9];case 3:c=o.id,p=o.input,g=o.options,L.label=4;case 4:return L.trys.push([4,6,,7]),e.process?[4,e.process(p,g)]:(a.postMessage("error",{id:c,error:"Worker not set up to process on main thread"}),[2]);case 5:return y=L.sent(),a.postMessage("done",{id:c,result:y}),[3,7];case 6:return S=L.sent(),O=S instanceof Error?S.message:"unknown error",a.postMessage("error",{id:c,error:O}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+r),L.label=9;case 9:return[2]}})})}var vg=function(){function e(){this._values=[],this._settlers=[],this._closed=!1}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.push=function(a){return this.enqueue(a)},e.prototype.enqueue=function(a){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var r=this._settlers.shift();a instanceof Error?r.reject(a):r.resolve({value:a})}else this._values.push(a)},e.prototype.close=function(){for(;this._settlers.length>0;){var a=this._settlers.shift();a.resolve({done:!0})}this._closed=!0},e.prototype.next=function(){var a=this;if(this._values.length>0){var r=this._values.shift();return r instanceof Error?Promise.reject(r):Promise.resolve({done:!1,value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(o,u){a._settlers.push({resolve:o,reject:u})})},e}(),hc=null,C0=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(L){p(L)}}function y(O){try{S(o.throw(O))}catch(L){p(L)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},T0=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},A0=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=e[Symbol.asyncIterator],r;return a?a.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(c){r[c]=e[c]&&function(p){return new Promise(function(g,y){p=e[c](p),u(g,y,p.done,p.value)})}}function u(c,p,g,y){Promise.resolve(y).then(function(S){c({value:S,done:g})},p)}},Nv=0,zv,Wd;function M0(e,a){var r=this;if(typeof self!="undefined"){var o={process:Xh};WorkerBody.onmessage=function(u,c){return C0(r,void 0,void 0,function(){var p,g,y,S,O,L,V,G,he,ve,Pe;return T0(this,function(Xe){switch(Xe.label){case 0:switch(Xe.trys.push([0,19,,20]),p=u,p){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!e)throw new Error("Worker does not support atomic processing");return[4,e(c.input,c.options||{},o)];case 2:return g=Xe.sent(),WorkerBody.postMessage("done",{result:g}),[3,18];case 3:if(!a)throw new Error("Worker does not support batched processing");zv=new AsyncQueue,Wd=c.options||{},y=a(zv,Wd,o),Xe.label=4;case 4:Xe.trys.push([4,9,10,15]),S=A0(y),Xe.label=5;case 5:return[4,S.next()];case 6:if(O=Xe.sent(),!!O.done)return[3,8];L=O.value,WorkerBody.postMessage("output-batch",{result:L}),Xe.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return V=Xe.sent(),ve={error:V},[3,15];case 10:return Xe.trys.push([10,,13,14]),O&&!O.done&&(Pe=S.return)?[4,Pe.call(S)]:[3,12];case 11:Xe.sent(),Xe.label=12;case 12:return[3,14];case 13:if(ve)throw ve.error;return[7];case 14:return[7];case 15:return WorkerBody.postMessage("done",{}),[3,18];case 16:return zv.push(c.input),[3,18];case 17:return zv.close(),[3,18];case 18:return[3,20];case 19:return G=Xe.sent(),he=G instanceof Error?G.message:"",WorkerBody.postMessage("error",{error:he}),[3,20];case 20:return[2]}})})}}}function Xh(e,a){return a===void 0&&(a={}),new Promise(function(r,o){var u=Nv++,c=function(g,y){if(y.id===u)switch(g){case"done":WorkerBody.removeEventListener(c),r(y.result);break;case"error":WorkerBody.removeEventListener(c),o(y.error);break;default:}};WorkerBody.addEventListener(c);var p={id:u,input:e,options:a};WorkerBody.postMessage("process",p)})}var ld=function(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(L){p(L)}}function y(O){try{S(o.throw(O))}catch(L){p(L)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})},fm=function(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Yh={};function t_(e,a,r){return a===void 0&&(a=null),r===void 0&&(r={}),ld(this,void 0,void 0,function(){return fm(this,function(o){switch(o.label){case 0:return a&&(e=hm(e,a,r)),Yh[e]=Yh[e]||R0(e),[4,Yh[e]];case 1:return[2,o.sent()]}})})}function hm(e,a,r){if(e.startsWith("http"))return e;var o=r.modules||{};return o[e]?o[e]:r.CDN?(assert(r.CDN.startsWith("http")),r.CDN+"/"+a+"/dist/libs/"+e):isWorker?"../src/libs/"+e:"modules/"+a+"/src/libs/"+e}function R0(e){return ld(this,void 0,void 0,function(){var a,r,o;return fm(this,function(u){switch(u.label){case 0:return e.endsWith("wasm")?[4,fetch(e)]:[3,3];case 1:return a=u.sent(),[4,a.arrayBuffer()];case 2:return[2,u.sent()];case 3:return isWorker?[2,importScripts(e)]:[4,fetch(e)];case 4:return r=u.sent(),[4,r.text()];case 5:return o=u.sent(),[2,gg(o,e)]}})})}function gg(e,a){if(isWorker)return eval.call(global,e),null;var r=document.createElement("script");r.id=a;try{r.appendChild(document.createTextNode(e))}catch(o){r.text=e}return document.body.appendChild(r),null}var mg="0.0.3",Gd={id:"null",name:"null",module:"web-worker-helper",options:{}};function cd(e){var a=e.color;return!a||!a.length?[1,1,1,1]:a}function mh(e,a,r){return r.length===2?[r[0],r[1],0]:[r[0],r[1],r[2]]}function Ip(e){var a=e.filter;return a?[1]:[0]}function _s(e,a){return[a]}var fd=k(9187),Rc=k.n(fd),ei=k(31437),Ic=ei.Ue(),Pp=ei.Ue(),qs=ei.Ue(),Pc=ei.Ue(),pc=ei.Ue();function Kh(e,a,r,o,u){ei.IH(e,r,o),ei.Fv(e,e),a=ei.al(-e[1],e[0]);var c=ei.al(-r[1],r[0]);return[u/ei.AK(a,c),a]}function il(e,a){return ei.t8(e,-a[1],a[0])}function Op(e,a,r){return ei.lu(e,a,r),ei.Fv(e,e),e}function Oc(e,a){return e[0]===a[0]&&e[1]===a[1]}function hd(e){for(var a=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();a.get(o)?(e.splice(r,1),r++):a.set(o,o)}return e}var Uv=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Ot.Z)(this,e),(0,He.Z)(this,"lastFlip",-1),(0,He.Z)(this,"miter",ei.al(0,0)),(0,He.Z)(this,"started",!1),(0,He.Z)(this,"dash",!1),(0,He.Z)(this,"totalDistance",0),(0,He.Z)(this,"currentIndex",0),this.join=a.join||"miter",this.cap=a.cap||"butt",this.miterLimit=a.miterLimit||10,this.thickness=a.thickness||1,this.dash=a.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,ot.Z)(e,[{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],G=r[g];G.push((S=o[g][2])!==null&&S!==void 0?S:0);var he=o[g],ve=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,Pe=g<o.length-1?o[g+1]:null,Xe=this.segment_gaode2(u,p,L,G,ve,V,he,Pe);p+=Xe}if(this.dash)for(var gt=0;gt<u.positions.length/6;gt++)u.positions[gt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],G=r[g];G.push((S=o[g][2])!==null&&S!==void 0?S:0);var he=o[g],ve=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,Pe=g<o.length-1?o[g+1]:null,Xe=this.simpleSegment(u,p,L,G,ve,V,he,Pe);p+=Xe}if(this.dash)for(var gt=0;gt<u.positions.length/6;gt++)u.positions[gt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.segment(o,c,g,y,S);c+=O}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.simpleSegment(o,c,g,y,S);c+=O}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,S){var O=0,L=r.indices,V=r.positions,G=r.normals,he=this.cap==="square",ve=this.join==="bevel",Pe=Ds([y[0],y[1]]),Xe=Ds([g[0],g[1]]);Op(qs,c,u);var gt=0;if(this.dash&&(gt=this.lineSegmentDistance(Pe,Xe),this.totalDistance+=gt),this.normal||(this.normal=ei.Ue(),il(this.normal,qs)),!this.started)if(this.started=!0,he){var _t=ei.Ue(),zt=ei.Ue();ei.IH(_t,this.normal,qs),ei.IH(zt,this.normal,qs),G.push(zt[0],zt[1],0),G.push(_t[0],_t[1],0),V.push(u[0],u[1],u[2]|0,this.totalDistance-gt,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),V.push(u[0],u[1],u[2]|0,this.totalDistance-gt,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,G,u,this.normal,this.thickness,this.totalDistance-gt);if(L.push(o+0,o+1,o+2),p){Oc(c,p)&&ei.IH(p,c,ei.Fv(p,ei.$X(p,c,u))),Op(Pc,p,c);var ar=Kh(pc,ei.Ue(),qs,Pc,this.thickness),Tr=(0,ji.Z)(ar,2),Zr=Tr[0],rn=Tr[1],ln=ei.AK(pc,this.normal)<0?-1:1,Gn=ve;if(!Gn&&this.join==="miter"){var fi=Zr;fi>this.miterLimit&&(Gn=!0)}Gn?(G.push(this.normal[0],this.normal[1],0),G.push(rn[0],rn[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,L.push.apply(L,(0,Rn.Z)(this.lastFlip!==-ln?[o,o+2,o+3]:[o+2,o+1,o+3])),L.push(o+2,o+3,o+4),il(Ic,Pc),ei.JG(this.normal,Ic),G.push(this.normal[0],this.normal[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O+=3):(this.extrusions(V,G,c,rn,Zr,this.totalDistance),L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),ln=-1,ei.JG(this.normal,rn),O+=2),this.lastFlip=ln}else{if(il(this.normal,qs),he){var Xt=ei.Ue(),nr=ei.Ue();ei.lu(nr,qs,this.normal),ei.IH(Xt,qs,this.normal),G.push(nr[0],nr[1],0),G.push(Xt[0],Xt[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,G,c,this.normal,this.thickness,this.totalDistance);L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),O+=2}return O}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,L=Ds([c[0],c[1]]),V=Ds([u[0],u[1]]);Op(qs,L,V);var G=0;if(this.dash&&(G=this.lineSegmentDistance(L,V),this.totalDistance+=G),this.normal||(this.normal=ei.Ue(),il(this.normal,qs)),this.started||(this.started=!0,this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-G)),y.push(o+0,o+1,o+2),!p)il(this.normal,qs),this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var he=Ds([p[0],p[1]]);Oc(L,he)&&ei.IH(he,L,ei.Fv(he,ei.$X(he,L,V))),Op(Pc,he,L);var ve=Kh(pc,ei.Ue(),qs,Pc,this.thickness),Pe=(0,ji.Z)(ve,2),Xe=Pe[0],gt=Pe[1],_t=ei.AK(pc,this.normal)<0?-1:1;this.extrusions(S,O,c,gt,Xe,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),_t=-1,ei.JG(this.normal,gt),g+=2,this.lastFlip=_t}return g}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,L=this.cap==="square",V=this.join==="bevel",G=Ds([c[0],c[1]]),he=Ds([u[0],u[1]]);Op(qs,G,he);var ve=0;if(this.dash&&(ve=this.lineSegmentDistance(G,he),this.totalDistance+=ve),this.normal||(this.normal=ei.Ue(),il(this.normal,qs)),!this.started)if(this.started=!0,L){var Pe=ei.Ue(),Xe=ei.Ue();ei.IH(Pe,this.normal,qs),ei.IH(Xe,this.normal,qs),O.push(Xe[0],Xe[1],0),O.push(Pe[0],Pe[1],0),S.push(u[0],u[1],u[2]|0,this.totalDistance-ve,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),S.push(u[0],u[1],u[2]|0,this.totalDistance-ve,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-ve);if(y.push(o+0,o+1,o+2),p){var zt=Ds([p[0],p[1]]);Oc(G,zt)&&ei.IH(zt,G,ei.Fv(zt,ei.$X(zt,G,he))),Op(Pc,zt,G);var Xt=Kh(pc,ei.Ue(),qs,Pc,this.thickness),nr=(0,ji.Z)(Xt,2),ar=nr[0],Tr=nr[1],Zr=ei.AK(pc,this.normal)<0?-1:1,rn=V;if(!rn&&this.join==="miter"){var ln=ar;ln>this.miterLimit&&(rn=!0)}rn?(O.push(this.normal[0],this.normal[1],0),O.push(Tr[0],Tr[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Zr,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Zr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,Rn.Z)(this.lastFlip!==-Zr?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),il(Ic,Pc),ei.JG(this.normal,Ic),O.push(this.normal[0],this.normal[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Zr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(S,O,c,Tr,ar,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Zr=-1,ei.JG(this.normal,Tr),g+=2),this.lastFlip=Zr}else{if(il(this.normal,qs),L){var gt=ei.Ue(),_t=ei.Ue();ei.lu(_t,qs,this.normal),ei.IH(gt,qs,this.normal),O.push(_t[0],_t[1],0),O.push(gt[0],gt[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}();function $d(e){var a=e.coordinates,r=e.originCoordinates,o=e.version,u=new Uv({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=a;Array.isArray(c[0][0])||(c=[a]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],S=p[g];u.extrude_gaode2(y,S)}}else{var O=a;O[0]&&!Array.isArray(O[0][0])&&(O=[a]),O.forEach(function(V){u.extrude(V)})}var L=u.complex;return{vertices:L.positions,indices:L.indices,normals:L.normals,indexes:L.indexes,size:6}}function pd(e){var a=au(e.coordinates);return{vertices:[].concat((0,Rn.Z)(a),(0,Rn.Z)(a),(0,Rn.Z)(a),(0,Rn.Z)(a)),indices:[0,1,2,2,3,0],size:a.length}}function Zv(e){var a=e.coordinates,r=Rc().flatten(a),o=r.vertices,u=r.dimensions,c=r.holes,p=Rc()(o,c,u);return{indices:p,vertices:o,size:u}}var ef=function(){var e=(0,Sn.Z)(er().mark(function a(r){var o,u,c,p,g,y,S,O,L;return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.iconMap,g={a_Color:cd,a_Position:mh,filter:Ip,a_vertexId:_s,a_PickingColor:function(ve){var Pe=ve.id;return c?bs(Pe):[0,0,0]},a_DistanceAndIndex:function(ve,Pe,Xe,gt,_t,zt){return zt===void 0?[Xe[3],10]:[Xe[3],zt]},a_Total_Distance:function(ve,Pe,Xe){return[Xe[5]]},a_Size:function(ve){var Pe=ve.size,Xe=Pe===void 0?1:Pe;return Array.isArray(Xe)?[Xe[0],Xe[1]]:[Xe,0]},a_Normal:function(ve,Pe,Xe,gt,_t){return _t},a_Miter:function(ve,Pe,Xe){return[Xe[4]]},a_iconMapUV:function(ve){var Pe=ve.texture,Xe=p[Pe]||{x:0,y:0},gt=Xe.x,_t=Xe.y;return[gt,_t]}},y={sizePerElement:0,elements:[]},S=0,O=[],L=3,u.forEach(function(he,ve){var Pe=$d(he),Xe=Pe.indices,gt=Pe.vertices,_t=Pe.normals,zt=Pe.size,Xt=Pe.indexes;Xe.forEach(function(Zr){O.push(Zr+S)}),L=zt;var nr=gt.length/zt;y.sizePerElement=L,y.elements.push({featureIdx:ve,vertices:gt,normals:_t,offset:S}),S+=nr;for(var ar=function(rn){var ln=(_t==null?void 0:_t.slice(rn*3,rn*3+3))||[],Gn=gt.slice(rn*zt,rn*zt+zt),fi=0;Xt&&Xt[rn]!==void 0&&(fi=Xt[rn]),o.forEach(function(Fi){if(Fi&&g[Fi.name]){var uo;(uo=Fi.buffer.data).push.apply(uo,(0,Rn.Z)(g[Fi.name](he,ve,Gn,rn,ln,fi)))}})},Tr=0;Tr<nr;Tr++)ar(Tr)}),G.abrupt("return",{descriptors:o,featureLayout:y,indices:O});case 8:case"end":return G.stop()}},a)}));return function(r){return e.apply(this,arguments)}}(),qh=function(){var e=(0,Sn.Z)(er().mark(function a(r){var o,u,c,p,g,y,S,O,L;return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.shape2d,g={a_Color:cd,a_Position:mh,filter:Ip,a_vertexId:_s,a_PickingColor:function(ve){var Pe=ve.id;return c?bs(Pe):[0,0,0]},a_Shape:function(ve){var Pe=ve.shape,Xe=Pe===void 0?2:Pe,gt=p.indexOf(Xe);return[gt]},a_Extrude:function(ve,Pe,Xe,gt){var _t=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],zt=gt%4*3;return[_t[zt],_t[zt+1],_t[zt+2]]},a_Size:function(ve){var Pe=ve.size,Xe=Pe===void 0?5:Pe;return Array.isArray(Xe)?[Xe[0]]:[Xe]}},y={sizePerElement:0,elements:[]},S=0,O=[],L=3,u.forEach(function(he,ve){var Pe=pd(he),Xe=Pe.indices,gt=Pe.vertices,_t=Pe.normals,zt=Pe.size,Xt=Pe.indexes;Xe.forEach(function(Zr){O.push(Zr+S)}),L=zt;var nr=gt.length/zt;y.sizePerElement=L,y.elements.push({featureIdx:ve,vertices:gt,normals:_t,offset:S}),S+=nr;for(var ar=function(rn){var ln=(_t==null?void 0:_t.slice(rn*3,rn*3+3))||[],Gn=gt.slice(rn*zt,rn*zt+zt),fi=0;Xt&&Xt[rn]!==void 0&&(fi=Xt[rn]),o.forEach(function(Fi){if(Fi&&g[Fi.name]){var uo;(uo=Fi.buffer.data).push.apply(uo,(0,Rn.Z)(g[Fi.name](he,ve,Gn,rn,ln,fi)))}})},Tr=0;Tr<nr;Tr++)ar(Tr)}),G.abrupt("return",{descriptors:o,featureLayout:y,indices:O});case 8:case"end":return G.stop()}},a)}));return function(r){return e.apply(this,arguments)}}(),Xd=function(){var e=(0,Sn.Z)(er().mark(function a(r){var o,u,c,p,g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p={a_Color:cd,a_Position:mh,filter:Ip,a_vertexId:_s,a_PickingColor:function(he){var ve=he.id;return c?bs(ve):[0,0,0]}},g={sizePerElement:0,elements:[]},y=0,S=[],O=3,u.forEach(function(G,he){var ve=Zv(G),Pe=ve.indices,Xe=ve.vertices,gt=ve.normals,_t=ve.size,zt=ve.indexes;Pe.forEach(function(Tr){S.push(Tr+y)}),O=_t;var Xt=Xe.length/_t;g.sizePerElement=O,g.elements.push({featureIdx:he,vertices:Xe,normals:gt,offset:y}),y+=Xt;for(var nr=function(Zr){var rn=(gt==null?void 0:gt.slice(Zr*3,Zr*3+3))||[],ln=Xe.slice(Zr*_t,Zr*_t+_t),Gn=0;zt&&zt[Zr]!==void 0&&(Gn=zt[Zr]),o.forEach(function(fi){if(fi&&p[fi.name]){var Fi;(Fi=fi.buffer.data).push.apply(Fi,(0,Rn.Z)(p[fi.name](G,he,ln,Zr,rn,Gn)))}})},ar=0;ar<Xt;ar++)nr(ar)}),V.abrupt("return",{descriptors:o,featureLayout:g,indices:S});case 8:case"end":return V.stop()}},a)}));return function(r){return e.apply(this,arguments)}}(),pm={pointFill:qh,line:ef,polygonFill:Xd},Vv=(0,ne.Z)({},pm);function dm(e){return fs.apply(this,arguments)}function fs(){return fs=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){var r,o;return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=a.workerType,o=a.data,!Vv[r]){c.next=3;break}return c.abrupt("return",Vv[r](o));case 3:return c.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(r,'" non-existent.'))));case 4:case"end":return c.stop()}},e)})),fs.apply(this,arguments)}var yh=new Map;function Zf(e,a){yh.set(e,a)}function dd(e){var a=yh.get(e);return a}var xf="l7-worker",_h=3,kp=!0;function Dp(e){registerWorkerSource(xf,e)}function Rl(){var e=getWorkerSource(xf);if(!e)throw new Error("get worker failed by workerName: ".concat(xf,"."));return e}function Vf(e,a){return Xo.apply(this,arguments)}function Xo(){return Xo=_asyncToGenerator(_regeneratorRuntime.mark(function e(a,r){var o,u,c,p,g;return _regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o=Rl(),u=WorkerFarm.getWorkerFarm({maxConcurrency:_h,reuseWorkers:kp}),c=u.getWorkerPool({name:xf,source:o}),S.next=5,c.startJob(xf,function(O,L,V){return O.done(V)});case 5:return p=S.sent,p.postMessage("process",{input:{workerType:a,data:r}}),S.next=9,p.result;case 9:return g=S.sent,S.abrupt("return",g.result);case 11:case"end":return S.stop()}},e)})),Xo.apply(this,arguments)}function Fu(e,a){return e==null?a:e}var Iu=k(38163),pl=k.n(Iu);function vm(e,a){return e.map(function(r){return r[a]*1})}function Qh(e){return e===void 0?!1:!Array.isArray(e)&&e.data!==void 0}function I0(e){return Array.isArray(e)?e.length===0?!1:!!Qh(e[0]):!1}function Lp(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function Yd(e){var a=Object.isFrozen(e)?Ca.cloneDeep(e):e;return pl()(a,!0),a}function yg(e,a){var r=a.x,o=a.y,u=a.x1,c=a.y1,p=a.coordinates,g=a.geometry,y=[];if(!Array.isArray(e))return{dataArray:[]};if(g)return e.filter(function(Xe){return Xe[g]&&Xe[g].type&&Xe[g].coordinates&&Xe[g].coordinates.length>0}).forEach(function(Xe,gt){var _t=Yd(Xe[g]);de(_t,function(zt){var Xt=Dt(zt),nr=(0,ne.Z)((0,ne.Z)({},Xe),{},{_id:gt,coordinates:Xt});y.push(nr)})}),{dataArray:y};for(var S=0;S<e.length;S++){var O=e[S],L=[];if(p){var V="Polygon";Array.isArray(p[0])||(V="Point"),Array.isArray(p[0])&&!Array.isArray(p[0][0])&&(V="LineString");var G=Yd({type:V,coordinates:O[p]});L=G.coordinates}else if(r&&o&&u&&c){var he=[parseFloat(O[r]),parseFloat(O[o])],ve=[parseFloat(O[u]),parseFloat(O[c])];L=[he,ve]}else r&&o&&(L=[parseFloat(O[r]),parseFloat(O[o])]);var Pe=(0,ne.Z)((0,ne.Z)({},O),{},{_id:S,coordinates:L});y.push(Pe)}return{dataArray:y}}function P0(e,a){var r=Se(e);return yg(r,a)}var tf=k(71002);function dl(e){for(var a=e.toString(),r=5381,o=a.length;o;)r=r*33^a.charCodeAt(--o);return r>>>0}function O0(e,a){return a===void 0?null:(0,tf.Z)(e.properties[a])*1==="number"?e.properties[a]*1:e.properties&&e.properties[a]?dl(e.properties[a]+"")%1000019:null}function gm(e,a){var r=[],o={};return e.features?(e.features=e.features.filter(function(u){var c=u.geometry;return u!=null&&c&&c.type&&c.coordinates&&c.coordinates.length>0}),e=Yd(e),e.features.length===0?{dataArray:[],featureKeys:o}:(de(e,function(u,c){var p=O0(u,a==null?void 0:a.featureId);p===null&&(p=c);var g=p,y=Dt(u),S=(0,ne.Z)((0,ne.Z)({},u.properties),{},{coordinates:y,_id:g});r.push(S)}),{dataArray:r,featureKeys:o})):(e.features=[],{dataArray:[]})}function xh(e,a,r,o){for(var u=o,c=r-a>>1,p=r-a,g,y=e[a],S=e[a+1],O=e[r],L=e[r+1],V=a+3;V<r;V+=3){var G=_g(e[V],e[V+1],y,S,O,L);if(G>u)g=V,u=G;else if(G===u){var he=Math.abs(V-c);he<p&&(g=V,p=he)}}u>o&&(g-a>3&&xh(e,a,g,o),e[g+2]=u,r-g>3&&xh(e,g,r,o))}function _g(e,a,r,o,u,c){var p=u-r,g=c-o;if(p!==0||g!==0){var y=((e-r)*p+(a-o)*g)/(p*p+g*g);y>1?(r=u,o=c):y>0&&(r+=p*y,o+=g*y)}return p=e-r,g=a-o,p*p+g*g}function Fp(e,a,r,o){var u={id:typeof e=="undefined"?null:e,type:a,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return k0(u),u}function k0(e){var a=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")xg(e,a);else if(r==="Polygon"||r==="MultiLineString")for(var o=0;o<a.length;o++)xg(e,a[o]);else if(r==="MultiPolygon")for(o=0;o<a.length;o++)for(var u=0;u<a[o].length;u++)xg(e,a[o][u])}function xg(e,a){for(var r=0;r<a.length;r+=3)e.minX=Math.min(e.minX,a[r]),e.minY=Math.min(e.minY,a[r+1]),e.maxX=Math.max(e.maxX,a[r]),e.maxY=Math.max(e.maxY,a[r+1])}function Kd(e,a){var r=[];if(e.type==="FeatureCollection")for(var o=0;o<e.features.length;o++)Hv(r,e.features[o],a,o);else e.type==="Feature"?Hv(r,e,a):Hv(r,{geometry:e},a);return r}function Hv(e,a,r,o){if(a.geometry){var u=a.geometry.coordinates,c=a.geometry.type,p=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),g=[],y=a.id;if(r.promoteId?y=a.properties[r.promoteId]:r.generateId&&(y=o||0),c==="Point")nt(u,g);else if(c==="MultiPoint")for(var S=0;S<u.length;S++)nt(u[S],g);else if(c==="LineString")Kt(u,g,p,!1);else if(c==="MultiLineString")if(r.lineMetrics){for(S=0;S<u.length;S++)g=[],Kt(u[S],g,p,!1),e.push(Fp(y,"LineString",g,a.properties));return}else br(u,g,p,!1);else if(c==="Polygon")br(u,g,p,!0);else if(c==="MultiPolygon")for(S=0;S<u.length;S++){var O=[];br(u[S],O,p,!0),g.push(O)}else if(c==="GeometryCollection"){for(S=0;S<a.geometry.geometries.length;S++)Hv(e,{id:y,geometry:a.geometry.geometries[S],properties:a.properties},r,o);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push(Fp(y,c,g,a.properties))}}function nt(e,a){a.push(dn(e[0])),a.push(kn(e[1])),a.push(0)}function Kt(e,a,r,o){for(var u,c,p=0,g=0;g<e.length;g++){var y=dn(e[g][0]),S=kn(e[g][1]);a.push(y),a.push(S),a.push(0),g>0&&(o?p+=(u*S-y*c)/2:p+=Math.sqrt(Math.pow(y-u,2)+Math.pow(S-c,2))),u=y,c=S}var O=a.length-3;a[2]=1,xh(a,0,O,r),a[O+2]=1,a.size=Math.abs(p),a.start=0,a.end=a.size}function br(e,a,r,o){for(var u=0;u<e.length;u++){var c=[];Kt(e[u],c,r,o),a.push(c)}}function dn(e){return e/360+.5}function kn(e){var a=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return r<0?0:r>1?1:r}function fn(e,a,r,o,u,c,p,g){if(r/=a,o/=a,c>=r&&p<o)return e;if(p<r||c>=o)return null;for(var y=[],S=0;S<e.length;S++){var O=e[S],L=O.geometry,V=O.type,G=u===0?O.minX:O.minY,he=u===0?O.maxX:O.maxY;if(G>=r&&he<o){y.push(O);continue}else if(he<r||G>=o)continue;var ve=[];if(V==="Point"||V==="MultiPoint")sn(L,ve,r,o,u);else if(V==="LineString")ti(L,ve,r,o,u,!1,g.lineMetrics);else if(V==="MultiLineString")hi(L,ve,r,o,u,!1);else if(V==="Polygon")hi(L,ve,r,o,u,!0);else if(V==="MultiPolygon")for(var Pe=0;Pe<L.length;Pe++){var Xe=[];hi(L[Pe],Xe,r,o,u,!0),Xe.length&&ve.push(Xe)}if(ve.length){if(g.lineMetrics&&V==="LineString"){for(Pe=0;Pe<ve.length;Pe++)y.push(Fp(O.id,V,ve[Pe],O.tags));continue}(V==="LineString"||V==="MultiLineString")&&(ve.length===1?(V="LineString",ve=ve[0]):V="MultiLineString"),(V==="Point"||V==="MultiPoint")&&(V=ve.length===3?"Point":"MultiPoint"),y.push(Fp(O.id,V,ve,O.tags))}}return y.length?y:null}function sn(e,a,r,o,u){for(var c=0;c<e.length;c+=3){var p=e[c+u];p>=r&&p<=o&&(a.push(e[c]),a.push(e[c+1]),a.push(e[c+2]))}}function ti(e,a,r,o,u,c,p){for(var g=Vn(e),y=u===0?ui:xi,S=e.start,O,L,V=0;V<e.length-3;V+=3){var G=e[V],he=e[V+1],ve=e[V+2],Pe=e[V+3],Xe=e[V+4],gt=u===0?G:he,_t=u===0?Pe:Xe,zt=!1;p&&(O=Math.sqrt(Math.pow(G-Pe,2)+Math.pow(he-Xe,2))),gt<r?_t>r&&(L=y(g,G,he,Pe,Xe,r),p&&(g.start=S+O*L)):gt>o?_t<o&&(L=y(g,G,he,Pe,Xe,o),p&&(g.start=S+O*L)):ni(g,G,he,ve),_t<r&&gt>=r&&(L=y(g,G,he,Pe,Xe,r),zt=!0),_t>o&&gt<=o&&(L=y(g,G,he,Pe,Xe,o),zt=!0),!c&&zt&&(p&&(g.end=S+O*L),a.push(g),g=Vn(e)),p&&(S+=O)}var Xt=e.length-3;G=e[Xt],he=e[Xt+1],ve=e[Xt+2],gt=u===0?G:he,gt>=r&&gt<=o&&ni(g,G,he,ve),Xt=g.length-3,c&&Xt>=3&&(g[Xt]!==g[0]||g[Xt+1]!==g[1])&&ni(g,g[0],g[1],g[2]),g.length&&a.push(g)}function Vn(e){var a=[];return a.size=e.size,a.start=e.start,a.end=e.end,a}function hi(e,a,r,o,u,c){for(var p=0;p<e.length;p++)ti(e[p],a,r,o,u,c,!1)}function ni(e,a,r,o){e.push(a),e.push(r),e.push(o)}function ui(e,a,r,o,u,c){var p=(c-a)/(o-a);return e.push(c),e.push(r+(u-r)*p),e.push(1),p}function xi(e,a,r,o,u,c){var p=(c-r)/(u-r);return e.push(a+(o-a)*p),e.push(c),e.push(1),p}function In(e,a){var r=a.buffer/a.extent,o=e,u=fn(e,1,-1-r,r,0,-1,2,a),c=fn(e,1,1-r,2+r,0,-1,2,a);return(u||c)&&(o=fn(e,1,-r,1+r,0,-1,2,a)||[],u&&(o=di(u,1).concat(o)),c&&(o=o.concat(di(c,-1)))),o}function di(e,a){for(var r=[],o=0;o<e.length;o++){var u=e[o],c=u.type,p;if(c==="Point"||c==="MultiPoint"||c==="LineString")p=qr(u.geometry,a);else if(c==="MultiLineString"||c==="Polygon"){p=[];for(var g=0;g<u.geometry.length;g++)p.push(qr(u.geometry[g],a))}else if(c==="MultiPolygon")for(p=[],g=0;g<u.geometry.length;g++){for(var y=[],S=0;S<u.geometry[g].length;S++)y.push(qr(u.geometry[g][S],a));p.push(y)}r.push(Fp(u.id,c,p,u.tags))}return r}function qr(e,a){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+a,e[o+1],e[o+2]);return r}function En(e,a){if(e.transformed)return e;var r=1<<e.z,o=e.x,u=e.y,c,p,g;for(c=0;c<e.features.length;c++){var y=e.features[c],S=y.geometry,O=y.type;if(y.geometry=[],O===1)for(p=0;p<S.length;p+=2)y.geometry.push(ii(S[p],S[p+1],a,r,o,u));else for(p=0;p<S.length;p++){var L=[];for(g=0;g<S[p].length;g+=2)L.push(ii(S[p][g],S[p][g+1],a,r,o,u));y.geometry.push(L)}}return e.transformed=!0,e}function ii(e,a,r,o,u,c){return[Math.round(r*(e*o-u)),Math.round(r*(a*o-c))]}function Ci(e,a,r,o,u){for(var c=a===u.maxZoom?0:u.tolerance/((1<<a)*u.extent),p={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:a,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},g=0;g<e.length;g++){p.numFeatures++,Kr(p,e[g],c,u);var y=e[g].minX,S=e[g].minY,O=e[g].maxX,L=e[g].maxY;y<p.minX&&(p.minX=y),S<p.minY&&(p.minY=S),O>p.maxX&&(p.maxX=O),L>p.maxY&&(p.maxY=L)}return p}function Kr(e,a,r,o){var u=a.geometry,c=a.type,p=[];if(c==="Point"||c==="MultiPoint")for(var g=0;g<u.length;g+=3)p.push(u[g]),p.push(u[g+1]),e.numPoints++,e.numSimplified++;else if(c==="LineString")Oi(p,u,e,r,!1,!1);else if(c==="MultiLineString"||c==="Polygon")for(g=0;g<u.length;g++)Oi(p,u[g],e,r,c==="Polygon",g===0);else if(c==="MultiPolygon")for(var y=0;y<u.length;y++){var S=u[y];for(g=0;g<S.length;g++)Oi(p,S[g],e,r,!0,g===0)}if(p.length){var O=a.tags||null;if(c==="LineString"&&o.lineMetrics){O={};for(var L in a.tags)O[L]=a.tags[L];O.mapbox_clip_start=u.start/u.size,O.mapbox_clip_end=u.end/u.size}var V={geometry:p,type:c==="Polygon"||c==="MultiPolygon"?3:c==="LineString"||c==="MultiLineString"?2:1,tags:O};a.id!==null&&(V.id=a.id),e.features.push(V)}}function Oi(e,a,r,o,u,c){var p=o*o;if(o>0&&a.size<(u?p:o)){r.numPoints+=a.length/3;return}for(var g=[],y=0;y<a.length;y+=3)(o===0||a[y+2]>p)&&(r.numSimplified++,g.push(a[y]),g.push(a[y+1])),r.numPoints++;u&&Qn(g,c),e.push(g)}function Qn(e,a){for(var r=0,o=0,u=e.length,c=u-2;o<u;c=o,o+=2)r+=(e[o]-e[c])*(e[o+1]+e[c+1]);if(r>0===a)for(o=0,u=e.length;o<u/2;o+=2){var p=e[o],g=e[o+1];e[o]=e[u-2-o],e[o+1]=e[u-1-o],e[u-2-o]=p,e[u-1-o]=g}}function Mi(e,a){return new Un(e,a)}function Un(e,a){a=this.options=ua(Object.create(this.options),a);var r=a.debug;if(r&&console.time("preprocess data"),a.maxZoom<0||a.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(a.promoteId&&a.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=Kd(e,a);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",a.indexMaxZoom,a.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=In(o,a),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Un.prototype.splitTile=function(e,a,r,o,u,c,p){for(var g=[e,a,r,o],y=this.options,S=y.debug;g.length;){o=g.pop(),r=g.pop(),a=g.pop(),e=g.pop();var O=1<<a,L=bi(a,r,o),V=this.tiles[L];if(!V&&(S>1&&console.time("creation"),V=this.tiles[L]=Ci(e,a,r,o,y),this.tileCoords.push({z:a,x:r,y:o}),S)){S>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",a,r,o,V.numFeatures,V.numPoints,V.numSimplified),console.timeEnd("creation"));var G="z"+a;this.stats[G]=(this.stats[G]||0)+1,this.total++}if(V.source=e,u){if(a===y.maxZoom||a===u)continue;var he=1<<u-a;if(r!==Math.floor(c/he)||o!==Math.floor(p/he))continue}else if(a===y.indexMaxZoom||V.numPoints<=y.indexMaxPoints)continue;if(V.source=null,e.length!==0){S>1&&console.time("clipping");var ve=.5*y.buffer/y.extent,Pe=.5-ve,Xe=.5+ve,gt=1+ve,_t,zt,Xt,nr,ar,Tr;_t=zt=Xt=nr=null,ar=fn(e,O,r-ve,r+Xe,0,V.minX,V.maxX,y),Tr=fn(e,O,r+Pe,r+gt,0,V.minX,V.maxX,y),e=null,ar&&(_t=fn(ar,O,o-ve,o+Xe,1,V.minY,V.maxY,y),zt=fn(ar,O,o+Pe,o+gt,1,V.minY,V.maxY,y),ar=null),Tr&&(Xt=fn(Tr,O,o-ve,o+Xe,1,V.minY,V.maxY,y),nr=fn(Tr,O,o+Pe,o+gt,1,V.minY,V.maxY,y),Tr=null),S>1&&console.timeEnd("clipping"),g.push(_t||[],a+1,r*2,o*2),g.push(zt||[],a+1,r*2,o*2+1),g.push(Xt||[],a+1,r*2+1,o*2),g.push(nr||[],a+1,r*2+1,o*2+1)}}},Un.prototype.getTile=function(e,a,r){var o=this.options,u=o.extent,c=o.debug;if(e<0||e>24)return null;var p=1<<e;a=(a%p+p)%p;var g=bi(e,a,r);if(this.tiles[g])return En(this.tiles[g],u);c>1&&console.log("drilling down to z%d-%d-%d",e,a,r);for(var y=e,S=a,O=r,L;!L&&y>0;)y--,S=Math.floor(S/2),O=Math.floor(O/2),L=this.tiles[bi(y,S,O)];return!L||!L.source?null:(c>1&&console.log("found parent tile z%d-%d-%d",y,S,O),c>1&&console.time("drilling down"),this.splitTile(L.source,y,S,O,e,a,r),c>1&&console.timeEnd("drilling down"),this.tiles[g]?En(this.tiles[g],u):null)};function bi(e,a,r){return((1<<e)*r+a)*32+e}function ua(e,a){for(var r in a)e[r]=a[r];return e}var Ra=function(){function e(a,r,o,u){(0,Ot.Z)(this,e),(0,He.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=a}return(0,ot.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];return o.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Ti={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Jn(e){for(var a=0,r=0,o=e.length,u=o-1,c,p;r<o;u=r++)c=e[r],p=e[u],a+=(p.x-c.x)*(c.y+p.y);return a}function Dn(e){var a=e.length;if(a<=1)return[e];for(var r=[],o,u,c=0;c<a;c++){var p=Jn(e[c]);p!==0&&(u===void 0&&(u=p<0),u===p<0?(o&&r.push(o),o=[e[c]]):o.push(e[c]))}return o&&r.push(o),r}var ra=["Unknown","Point","LineString","Polygon"];function Ja(e,a,r,o,u){var c=u.geometry,p=u.type,g=u.tags,y=u.id,S=e*Math.pow(2,o),O=e*a,L=e*r,V=ra[p],G,he;function ve(gt){for(var _t=0;_t<gt.length;_t++){var zt=gt[_t];if(zt[3])break;var Xt=180-(zt[1]+L)*360/S,nr=(zt[0]+O)*360/S-180,ar=360/Math.PI*Math.atan(Math.exp(Xt*Math.PI/180))-90;gt[_t]=[nr,ar,0,1]}}switch(p){case 1:var Pe=[];for(G=0;G<c.length;G++)Pe[G]=c[G][0];c=Pe,ve(c);break;case 2:for(G=0;G<c.length;G++)ve(c[G]);break;case 3:for(c=Dn(c),G=0;G<c.length;G++)for(he=0;he<c[G].length;he++)ve(c[G][he]);break}c.length===1?c=c[0]:V="Multi"+V;var Xe={type:"Feature",geometry:{type:V,coordinates:c},properties:g,id:y,tileOrigin:[0,0],coord:""};return Xe}var Li=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y){var S=o.getTile(r.z,r.x,r.y),O=S?S.features.map(function(G){return Ja(c,u.x,u.y,u.z,G)}):[],L={layers:{defaultLayer:{features:O}}},V=new Ra(L,r.x,r.y,r.z);y(V)}));case 1:case"end":return g.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function $a(e){var a={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions=="undefined"?a:(0,ne.Z)((0,ne.Z)({},a),e.geojsonvtOptions)}function ka(e,a){var r=$a(a),o=r.extent||4096,u=Mi(e,r),c=function(y,S){return Li(S,u,y,o)},p=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},Ti),a),{},{getTileData:c});return{data:e,dataArray:[],tilesetOptions:p,isTile:!0}}function ga(e,a){var r=a.extent,o=r===void 0?[121.168,30.2828,121.384,30.4219]:r,u=a.requestParameters,c=u===void 0?{}:u,p=new Promise(function(y){e instanceof HTMLImageElement||Cc(e)?y([e]):Co(e,c,function(S){y(S)})}),g={originData:e,images:p,_id:1,dataArray:[{_id:0,coordinates:[[o[0],o[1]],[o[2],o[3]]]}]};return g}function Co(e,a,r){var o=[];if(typeof e=="string")ms((0,ne.Z)((0,ne.Z)({},a),{},{url:e}),function(p,g){g&&(o.push(g),r(o))});else{var u=e.length,c=0;e.forEach(function(p){ms((0,ne.Z)((0,ne.Z)({},a),{},{url:p}),function(g,y){c++,y&&o.push(y),c===u&&r(o)})})}return ga}var mu=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c){var p,g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p={x:o.x,y:o.y,z:o.z},g=La(r,p),S.abrupt("return",new Promise(function(O){c?c(p,function(L,V){if(L||!V){var G={layers:{defaultLayer:{features:[]}}},he=new Ra(G,o.x,o.y,o.z);O(he)}else{var ve={layers:{defaultLayer:{features:V.features}}},Pe=new Ra(ve,o.x,o.y,o.z);O(Pe)}}):Oo((0,ne.Z)((0,ne.Z)({},u),{},{url:g}),function(L,V){if(L||!V){var G={layers:{defaultLayer:{features:[]}}},he=new Ra(G,o.x,o.y,o.z);O(he)}else{var ve=JSON.parse(V),Pe={layers:{defaultLayer:{features:ve}}},Xe=new Ra(Pe,o.x,o.y,o.z);O(Xe)}})}));case 3:case"end":return S.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function Bu(e,a){var r=function(c,p){return mu(e,p,a==null?void 0:a.requestParameters,a.getCustomData)},o=(0,ne.Z)((0,ne.Z)({},a),{},{getTileData:r});return{dataArray:[],tilesetOptions:o,isTile:!0}}var co=k(38929),hs=k(3614),Vo=k.n(hs),su=function(){function e(a,r,o,u){(0,Ot.Z)(this,e),(0,He.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=new co.VectorTile(new(Vo())(a))}return(0,ot.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];if(Array.isArray(o.features))return this.vectorLayerCache[r]=o.features,o.features;for(var u=[],c=0;c<o.length;c++){var p=o.feature(c),g=p.toGeoJSON(this.x,this.y,this.z);u.push((0,ne.Z)((0,ne.Z)({},g),{},{properties:(0,ne.Z)({id:g.id},g.properties)}))}return this.vectorLayerCache[r]=u,u}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Vs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Fs=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c,p){var g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g=La(r,o),S.abrupt("return",new Promise(function(O){if(p)p({x:u.x,y:u.y,z:u.z},function(V,G){if(V||!G)O(void 0);else{var he=new su(G,u.x,u.y,u.z);O(he)}});else{var L=gs((0,ne.Z)((0,ne.Z)({},c),{},{url:g}),function(V,G){if(V||!G)O(void 0);else{var he=new su(G,u.x,u.y,u.z);O(he)}});u.xhrCancel=function(){return L.cancel()}}}));case 2:case"end":return S.stop()}},a)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function Qs(e,a){var r=Array.isArray(e)?e[0]:e,o=function(p,g){return Fs(r,p,g,a==null?void 0:a.requestParameters,a==null?void 0:a.getCustomData)},u=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},Vs),a),{},{getTileData:o});return{data:r,dataArray:[],tilesetOptions:u,isTile:!0}}function Nu(e,a,r){switch(e){case"+":return a+r;case"-":return a-r;case"*":return a*r;case"/":return a/r;case"%":return a%r;case"^":return Math.pow(a,r);case"abs":return Math.abs(a);case"floor":return Math.floor(a);case"round":return Math.round(a);case"ceil":return Math.ceil(a);case"sin":return Math.sin(a);case"cos":return Math.cos(a);case"atan":return r===-1?Math.atan(a):Math.atan2(a,r);case"min":return Math.min(a,r);case"max":return Math.max(a,r);case"log10":return Math.log(a);case"log2":return Math.log2(a);default:return console.warn("Calculate symbol err! Return default 0"),0}}function As(e,a){for(var r=a[0],o=r.width,u=r.height,c=a.map(function(G){return G.rasterData}),p=o*u,g=[],y=JSON.stringify(e),S=0;S<p;S++){var O=JSON.parse(y),L=Ga(O,c,S);if(typeof L=="number")g.push(L);else{var V=To(O);g.push(V)}}return g}function Ga(e,a,r){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return a[e[1]][r]}catch(o){return console.warn("Raster Data err!"),0}e.map(function(o,u){if(Array.isArray(o)&&o.length>0)switch(o[0]){case"band":try{e[u]=a[o[1]][r]}catch(c){console.warn("Raster Data err!"),e[u]=0}break;default:Ga(o,a,r)}})}function Yu(e){var a=(0,ji.Z)(e,3),r=a[0],o=a[1],u=o===void 0?-1:o,c=a[2],p=c===void 0?-1:c;if(r===void 0)return console.warn("Express err!"),["+",0,0];var g=r.replace(/\s+/g,"");return[g,u,p]}function To(e){var a=Yu(e),r=a[0],o=a[1],u=a[2];return Array.isArray(o)&&(o=To(e[1])),Array.isArray(u)&&(u=To(e[2])),Nu(r,o,u)}var ma={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:ba}};function ba(e,a){for(var r=e[0].rasterData,o=e[1].rasterData,u=e[2].rasterData,c=[],p=(a==null?void 0:a.countCut)||[2,98],g=(0,ji.Z)(p,2),y=g[0],S=g[1],O=(a==null?void 0:a.RMinMax)||xo(r,y,S),L=(a==null?void 0:a.GMinMax)||xo(o,y,S),V=(a==null?void 0:a.BMinMax)||xo(u,y,S),G=0;G<r.length;G++)c.push(Math.max(0,r[G]-O[0])),c.push(Math.max(0,o[G]-L[0])),c.push(Math.max(0,u[G]-V[0]));return{rasterData:c,rMinMax:O,gMinMax:L,bMinMax:V}}function xo(e,a,r){var o=e.slice().sort(function(g,y){return g-y}),u=o.length,c=o[Math.ceil(u*a/100)],p=o[Math.ceil(u*r/100)];return[c,p]}function Hs(e,a,r){return yu.apply(this,arguments)}function yu(){return yu=(0,Sn.Z)(er().mark(function e(a,r,o){var u,c,p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(a.length!==0){L.next=2;break}return L.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return L.next=4,Promise.all(a.map(function(V){var G=V.data,he=V.bands,ve=he===void 0?[0]:he;return r(G,ve)}));case 4:u=L.sent,c=[],u.forEach(function(V){Array.isArray(V)?c.push.apply(c,(0,Rn.Z)(V)):c.push(V)}),p=c[0],g=p.width,y=p.height,L.t0=(0,tf.Z)(o),L.next=L.t0==="function"?11:L.t0==="object"?13:15;break;case 11:return S=o(c),L.abrupt("break",16);case 13:return Array.isArray(o)?S={rasterData:As(o,c)}:S=vr(o,c),L.abrupt("break",16);case 15:S={rasterData:c[0].rasterData};case 16:return L.abrupt("return",(0,ne.Z)((0,ne.Z)({},S),{},{width:g,height:y}));case 17:case"end":return L.stop()}},e)})),yu.apply(this,arguments)}function vr(e,a){var r=ma[e.type];if(r.type==="function")return r.method(a,e==null?void 0:e.options);if(r.type==="operation")return e.type==="rgb"?yn(r.expression,a):{rasterData:As(r.expression,a)}}function yn(e,a){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var r=As(e.r||["band",0],a),o=As(e.g||["band",0],a),u=As(e.b||["band",0],a);return[r,o,u]}function cn(e,a,r,o){return Ri.apply(this,arguments)}function Ri(){return Ri=(0,Sn.Z)(er().mark(function e(a,r,o,u){var c;return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Hs(a,r,o);case 2:c=g.sent,u(null,{data:c});case 4:case"end":return g.stop()}},e)})),Ri.apply(this,arguments)}function Xa(e,a){var r=a.extent,o=a.width,u=a.height,c=a.min,p=a.max,g=a.format,y=a.operation,S,O,L;if(g===void 0||Lp(e))S=Array.from(e),O=o,L=u;else{var V=Array.isArray(e)?e:[e];S=Hs(V,g,y)}var G={_id:1,dataArray:[{_id:1,data:S,width:O,height:L,min:c,max:p,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return G}var Yo=k(27330),mt=k(86700),ir=k(84879),Ct={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},hn=k(49296),an=k.n(hn);function Pr(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Br(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Br(e,a){if(e){if(typeof e=="string")return jr(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,a)}}function jr(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var pr=30;function Lr(e){var a=e.characterSet,r=e.getFontWidth,o=e.fontHeight,u=e.buffer,c=e.maxCanvasWidth,p=e.mapping,g=p===void 0?{}:p,y=e.xOffset,S=y===void 0?0:y,O=e.yOffset,L=O===void 0?0:O,V=0,G=S;Array.from(a).forEach(function(ve,Pe){if(!g[ve]){var Xe=r(ve,Pe);G+pr>c&&(G=0,V++),g[ve]={x:G,y:L+V*pr,width:pr,height:pr,advance:Xe},G+=pr}});var he=o+u*2;return{mapping:g,xOffset:G,yOffset:L+V*he,canvasHeight:xn(L+(V+1)*he)}}function tr(e,a,r){var o=0,u=0,c=0,p=[],g={},y=Pr(e),S;try{for(y.s();!(S=y.n()).done;){var O=S.value;if(!g[O.id]){var L=O.size;o+L+a>r&&(Nr(g,p,u),o=0,u=c+u+a,c=0,p=[]),p.push({icon:O,xOffset:o}),o=o+L+a,c=Math.max(c,L)}}}catch(G){y.e(G)}finally{y.f()}p.length>0&&Nr(g,p,u);var V=xn(c+u+a);return{mapping:g,canvasHeight:V}}function Nr(e,a,r){var o=Pr(a),u;try{for(o.s();!(u=o.n()).done;){var c=u.value,p=c.icon,g=c.xOffset;e[p.id]=(0,ne.Z)((0,ne.Z)({},p),{},{x:g,y:r,image:p.image,width:p.width,height:p.height})}}catch(y){o.e(y)}finally{o.f()}}function xn(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var bn,Wn;function Zn(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$n(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function $n(e,a){if(e){if(typeof e=="string")return Xi(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xi(e,a)}}function Xi(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function Nn(e){var a=Wi();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Wi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ya=mm(),Da="sans-serif",Bo="normal",Na=24,Hl=3,bg=.25,rf=8,Sg=1024,Hf=1,Eg=1,wg=3,xx=null;function mm(){for(var e=[],a=32;a<128;a++)e.push(String.fromCharCode(a));return e}function Bp(e,a,r,o){e.font="".concat(o," ").concat(r,"px ").concat(a),e.fillStyle="black",e.textBaseline="middle"}function vd(e,a){for(var r=0;r<e.length;r++)a.data[4*r+3]=e[r]}var ym=(bn=(0,mt.b2)(),bn(Wn=function(e){(0,yr.Z)(r,e);var a=Nn(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"fontAtlas",void 0),(0,He.Z)((0,wr.Z)(o),"iconFontMap",void 0),(0,He.Z)((0,wr.Z)(o),"iconFontGlyphs",{}),(0,He.Z)((0,wr.Z)(o),"fontOptions",void 0),(0,He.Z)((0,wr.Z)(o),"key",void 0),(0,He.Z)((0,wr.Z)(o),"cache",new Ff(wg)),o}return(0,ot.Z)(r,[{key:"scale",get:function(){return Eg}},{key:"canvas",get:function(){var u=this.cache.get(this.key);return u&&u.data}},{key:"mapping",get:function(){var u=this.cache.get(this.key);return u&&u.mapping||{}}},{key:"getCanvasByKey",value:function(u){var c=this.cache.get(u);return c&&c.data}},{key:"getMappingByKey",value:function(u){var c=this.cache.get(u);return c&&c.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Da,fontWeight:Bo,characterSet:ya,fontSize:Na,buffer:Hl,sdf:!0,cutoff:bg,radius:rf,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(u){var c=this;u.forEach(function(p){c.iconFontGlyphs[p.name]=p.unicode})}},{key:"addIconFont",value:function(u,c){this.iconFontMap.set(u,c)}},{key:"getIconFontKey",value:function(u){return this.iconFontMap.get(u)||u}},{key:"getGlyph",value:function(u){return this.iconFontGlyphs[u]?String.fromCharCode(parseInt(this.iconFontGlyphs[u],16)):""}},{key:"setFontOptions",value:function(u){this.fontOptions=(0,ne.Z)((0,ne.Z)({},this.fontOptions),u),this.key=this.getKey();var c=this.getNewChars(this.key,this.fontOptions.characterSet),p=this.cache.get(this.key);if(!(p&&c.length===0)){var g=this.generateFontAtlas(this.key,c,p);this.fontAtlas=g,this.cache.set(this.key,g)}}},{key:"addFontFace",value:function(u,c){var p=this,g=document.createElement("style");g.type="text/css",g.innerText=`
        @font-face{
            font-family: '`.concat(u,`';
            src: url('`).concat(c,`') format('woff2'),
            url('`).concat(c,`') format('woff'),
            url('`).concat(c,`') format('truetype');
        }`),g.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(u),"L7text"),document.fonts.ready.then(function(){p.emit("fontloaded",{fontFamily:u})})}catch(y){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(y)}},document.getElementsByTagName("head")[0].appendChild(g)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(u,c,p){var g=this.fontOptions,y=g.fontFamily,S=g.fontWeight,O=g.fontSize,L=g.buffer,V=g.sdf,G=g.radius,he=g.cutoff,ve=g.iconfont,Pe=p&&p.data;Pe||(Pe=window.document.createElement("canvas"),Pe.width=Sg);var Xe=Pe.getContext("2d",{willReadFrequently:!0});Bp(Xe,y,O,S);var gt=Lr((0,ne.Z)({getFontWidth:function(hu){return Xe.measureText(hu).width},fontHeight:O*Eg,buffer:L,characterSet:c,maxCanvasWidth:Sg},p&&{mapping:p.mapping,xOffset:p.xOffset,yOffset:p.yOffset})),_t=gt.mapping,zt=gt.canvasHeight,Xt=gt.xOffset,nr=gt.yOffset,ar=Xe.getImageData(0,0,Pe.width,Pe.height);if(Pe.height=zt,Xe.putImageData(ar,0,0),Bp(Xe,y,O,S),V){var Tr=new(an())(O,L,G,he,y,S),Zr=Xe.getImageData(0,0,Tr.size,Tr.size),rn=Zn(c),ln;try{for(rn.s();!(ln=rn.n()).done;){var Gn=ln.value;if(ve){var fi=String.fromCharCode(parseInt(Gn.replace("&#x","").replace(";",""),16)),Fi=Tr.draw(fi);vd(Fi,Zr)}else vd(Tr.draw(Gn),Zr);Xe.putImageData(Zr,_t[Gn].x,_t[Gn].y)}}catch(tu){rn.e(tu)}finally{rn.f()}}else{var uo=Zn(c),is;try{for(uo.s();!(is=uo.n()).done;){var as=is.value;Xe.fillText(as,_t[as].x,_t[as].y+O*Hf)}}catch(tu){uo.e(tu)}finally{uo.f()}}return{xOffset:Xt,yOffset:nr,mapping:_t,data:Pe,width:Pe.width,height:Pe.height}}},{key:"getKey",value:function(){var u=this.fontOptions,c=u.fontFamily,p=u.fontWeight;return"".concat(c,"_").concat(p)}},{key:"getNewChars",value:function(u,c){var p=this.cache.get(u);if(!p)return c;var g=[],y=p.mapping,S=new Set(Object.keys(y)),O=new Set(c);return O.forEach(function(L){S.has(L)||g.push(L)}),g}}]),r}(Ys.EventEmitter))||Wn),qd,_m;function zu(e){var a=Bs();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Bs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var r_=3,xm=1024,jv=64,n_=(qd=(0,mt.b2)(),qd(_m=function(e){(0,yr.Z)(r,e);var a=zu(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"canvasHeight",128),(0,He.Z)((0,wr.Z)(o),"texture",void 0),(0,He.Z)((0,wr.Z)(o),"canvas",void 0),(0,He.Z)((0,wr.Z)(o),"iconData",void 0),(0,He.Z)((0,wr.Z)(o),"iconMap",void 0),(0,He.Z)((0,wr.Z)(o),"ctx",void 0),(0,He.Z)((0,wr.Z)(o),"loadingImageCount",0),o}return(0,ot.Z)(r,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var o=(0,Sn.Z)(er().mark(function c(p,g){var y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return y=new Image,this.loadingImageCount++,this.hasImage(p)?console.warn("Image Id already exists"):this.iconData.push({id:p,size:jv}),this.updateIconMap(),L.next=6,this.loadImage(g);case 6:y=L.sent,S=this.iconData.find(function(V){return V.id===p}),S&&(S.image=y,S.width=y.width,S.height=y.height),this.update();case 10:case"end":return L.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addImageMini",value:function(u,c,p){var g=this,y=p.getSceneConfig().canvas,S=y.createImage();if(this.loadingImageCount++,this.hasImage(u))throw new Error("Image Id already exists");this.iconData.push({id:u,size:jv}),this.updateIconMap(),this.loadImageMini(c,y).then(function(O){S=O;var L=g.iconData.find(function(V){return V.id===u});L&&(L.image=S,L.width=S.width,L.height=S.height),g.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(u){return this.iconMap.hasOwnProperty(u)}},{key:"removeImage",value:function(u){this.hasImage(u)&&(this.iconData=this.iconData.filter(function(c){return c.id!==u}),delete this.iconMap[u],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(u){return new Promise(function(c,p){if(u instanceof HTMLImageElement){c(u);return}var g=new Image;g.crossOrigin="anonymous",g.onload=function(){c(g)},g.onerror=function(){p(new Error("Could not load image at "+u))},g.src=u instanceof File?URL.createObjectURL(u):u})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var u=this;this.canvas.width=xm,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(c){var p=u.iconMap[c],g=p.x,y=p.y,S=p.image,O=p.width,L=O===void 0?64:O,V=p.height,G=V===void 0?64:V,he=Math.max(L,G),ve=he/jv,Pe=G/ve,Xe=L/ve;S&&u.ctx.drawImage(S,g+(jv-Xe)/2,y+(jv-Pe)/2,Xe,Pe)})}},{key:"updateIconMap",value:function(){var u=tr(this.iconData,r_,xm),c=u.mapping,p=u.canvasHeight;this.iconMap=c,this.canvasHeight=p}},{key:"loadImageMini",value:function(u,c){return new Promise(function(p,g){var y=c.createImage();y.crossOrigin="anonymous",y.onload=function(){p(y)},y.onerror=function(){g(new Error("Could not load image at "+u))},y.src=u})}}]),r}(Ys.EventEmitter))||_m),ts=k(49685);function Js(){var e=new ts.WT(16);return ts.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Jh(e){var a=new ts.WT(16);return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a}function gd(e,a){return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e}function Cg(e,a,r,o,u,c,p,g,y,S,O,L,V,G,he,ve){var Pe=new ts.WT(16);return Pe[0]=e,Pe[1]=a,Pe[2]=r,Pe[3]=o,Pe[4]=u,Pe[5]=c,Pe[6]=p,Pe[7]=g,Pe[8]=y,Pe[9]=S,Pe[10]=O,Pe[11]=L,Pe[12]=V,Pe[13]=G,Pe[14]=he,Pe[15]=ve,Pe}function Uu(e,a,r,o,u,c,p,g,y,S,O,L,V,G,he,ve,Pe){return e[0]=a,e[1]=r,e[2]=o,e[3]=u,e[4]=c,e[5]=p,e[6]=g,e[7]=y,e[8]=S,e[9]=O,e[10]=L,e[11]=V,e[12]=G,e[13]=he,e[14]=ve,e[15]=Pe,e}function Wv(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bh(e,a){if(e===a){var r=a[1],o=a[2],u=a[3],c=a[6],p=a[7],g=a[11];e[1]=a[4],e[2]=a[8],e[3]=a[12],e[4]=r,e[6]=a[9],e[7]=a[13],e[8]=o,e[9]=c,e[11]=a[14],e[12]=u,e[13]=p,e[14]=g}else e[0]=a[0],e[1]=a[4],e[2]=a[8],e[3]=a[12],e[4]=a[1],e[5]=a[5],e[6]=a[9],e[7]=a[13],e[8]=a[2],e[9]=a[6],e[10]=a[10],e[11]=a[14],e[12]=a[3],e[13]=a[7],e[14]=a[11],e[15]=a[15];return e}function Sh(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=a[4],g=a[5],y=a[6],S=a[7],O=a[8],L=a[9],V=a[10],G=a[11],he=a[12],ve=a[13],Pe=a[14],Xe=a[15],gt=r*g-o*p,_t=r*y-u*p,zt=r*S-c*p,Xt=o*y-u*g,nr=o*S-c*g,ar=u*S-c*y,Tr=O*ve-L*he,Zr=O*Pe-V*he,rn=O*Xe-G*he,ln=L*Pe-V*ve,Gn=L*Xe-G*ve,fi=V*Xe-G*Pe,Fi=gt*fi-_t*Gn+zt*ln+Xt*rn-nr*Zr+ar*Tr;return Fi?(Fi=1/Fi,e[0]=(g*fi-y*Gn+S*ln)*Fi,e[1]=(u*Gn-o*fi-c*ln)*Fi,e[2]=(ve*ar-Pe*nr+Xe*Xt)*Fi,e[3]=(V*nr-L*ar-G*Xt)*Fi,e[4]=(y*rn-p*fi-S*Zr)*Fi,e[5]=(r*fi-u*rn+c*Zr)*Fi,e[6]=(Pe*zt-he*ar-Xe*_t)*Fi,e[7]=(O*ar-V*zt+G*_t)*Fi,e[8]=(p*Gn-g*rn+S*Tr)*Fi,e[9]=(o*rn-r*Gn-c*Tr)*Fi,e[10]=(he*nr-ve*zt+Xe*gt)*Fi,e[11]=(L*zt-O*nr-G*gt)*Fi,e[12]=(g*Zr-p*ln-y*Tr)*Fi,e[13]=(r*ln-o*Zr+u*Tr)*Fi,e[14]=(ve*_t-he*Xt-Pe*gt)*Fi,e[15]=(O*Xt-L*_t+V*gt)*Fi,e):null}function ep(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=a[4],g=a[5],y=a[6],S=a[7],O=a[8],L=a[9],V=a[10],G=a[11],he=a[12],ve=a[13],Pe=a[14],Xe=a[15];return e[0]=g*(V*Xe-G*Pe)-L*(y*Xe-S*Pe)+ve*(y*G-S*V),e[1]=-(o*(V*Xe-G*Pe)-L*(u*Xe-c*Pe)+ve*(u*G-c*V)),e[2]=o*(y*Xe-S*Pe)-g*(u*Xe-c*Pe)+ve*(u*S-c*y),e[3]=-(o*(y*G-S*V)-g*(u*G-c*V)+L*(u*S-c*y)),e[4]=-(p*(V*Xe-G*Pe)-O*(y*Xe-S*Pe)+he*(y*G-S*V)),e[5]=r*(V*Xe-G*Pe)-O*(u*Xe-c*Pe)+he*(u*G-c*V),e[6]=-(r*(y*Xe-S*Pe)-p*(u*Xe-c*Pe)+he*(u*S-c*y)),e[7]=r*(y*G-S*V)-p*(u*G-c*V)+O*(u*S-c*y),e[8]=p*(L*Xe-G*ve)-O*(g*Xe-S*ve)+he*(g*G-S*L),e[9]=-(r*(L*Xe-G*ve)-O*(o*Xe-c*ve)+he*(o*G-c*L)),e[10]=r*(g*Xe-S*ve)-p*(o*Xe-c*ve)+he*(o*S-c*g),e[11]=-(r*(g*G-S*L)-p*(o*G-c*L)+O*(o*S-c*g)),e[12]=-(p*(L*Pe-V*ve)-O*(g*Pe-y*ve)+he*(g*V-y*L)),e[13]=r*(L*Pe-V*ve)-O*(o*Pe-u*ve)+he*(o*V-u*L),e[14]=-(r*(g*Pe-y*ve)-p*(o*Pe-u*ve)+he*(o*y-u*g)),e[15]=r*(g*V-y*L)-p*(o*V-u*L)+O*(o*y-u*g),e}function i_(e){var a=e[0],r=e[1],o=e[2],u=e[3],c=e[4],p=e[5],g=e[6],y=e[7],S=e[8],O=e[9],L=e[10],V=e[11],G=e[12],he=e[13],ve=e[14],Pe=e[15],Xe=a*p-r*c,gt=a*g-o*c,_t=a*y-u*c,zt=r*g-o*p,Xt=r*y-u*p,nr=o*y-u*g,ar=S*he-O*G,Tr=S*ve-L*G,Zr=S*Pe-V*G,rn=O*ve-L*he,ln=O*Pe-V*he,Gn=L*Pe-V*ve;return Xe*Gn-gt*ln+_t*rn+zt*Zr-Xt*Tr+nr*ar}function vl(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=a[4],y=a[5],S=a[6],O=a[7],L=a[8],V=a[9],G=a[10],he=a[11],ve=a[12],Pe=a[13],Xe=a[14],gt=a[15],_t=r[0],zt=r[1],Xt=r[2],nr=r[3];return e[0]=_t*o+zt*g+Xt*L+nr*ve,e[1]=_t*u+zt*y+Xt*V+nr*Pe,e[2]=_t*c+zt*S+Xt*G+nr*Xe,e[3]=_t*p+zt*O+Xt*he+nr*gt,_t=r[4],zt=r[5],Xt=r[6],nr=r[7],e[4]=_t*o+zt*g+Xt*L+nr*ve,e[5]=_t*u+zt*y+Xt*V+nr*Pe,e[6]=_t*c+zt*S+Xt*G+nr*Xe,e[7]=_t*p+zt*O+Xt*he+nr*gt,_t=r[8],zt=r[9],Xt=r[10],nr=r[11],e[8]=_t*o+zt*g+Xt*L+nr*ve,e[9]=_t*u+zt*y+Xt*V+nr*Pe,e[10]=_t*c+zt*S+Xt*G+nr*Xe,e[11]=_t*p+zt*O+Xt*he+nr*gt,_t=r[12],zt=r[13],Xt=r[14],nr=r[15],e[12]=_t*o+zt*g+Xt*L+nr*ve,e[13]=_t*u+zt*y+Xt*V+nr*Pe,e[14]=_t*c+zt*S+Xt*G+nr*Xe,e[15]=_t*p+zt*O+Xt*he+nr*gt,e}function Pu(e,a,r){var o=r[0],u=r[1],c=r[2],p,g,y,S,O,L,V,G,he,ve,Pe,Xe;return a===e?(e[12]=a[0]*o+a[4]*u+a[8]*c+a[12],e[13]=a[1]*o+a[5]*u+a[9]*c+a[13],e[14]=a[2]*o+a[6]*u+a[10]*c+a[14],e[15]=a[3]*o+a[7]*u+a[11]*c+a[15]):(p=a[0],g=a[1],y=a[2],S=a[3],O=a[4],L=a[5],V=a[6],G=a[7],he=a[8],ve=a[9],Pe=a[10],Xe=a[11],e[0]=p,e[1]=g,e[2]=y,e[3]=S,e[4]=O,e[5]=L,e[6]=V,e[7]=G,e[8]=he,e[9]=ve,e[10]=Pe,e[11]=Xe,e[12]=p*o+O*u+he*c+a[12],e[13]=g*o+L*u+ve*c+a[13],e[14]=y*o+V*u+Pe*c+a[14],e[15]=S*o+G*u+Xe*c+a[15]),e}function dc(e,a,r){var o=r[0],u=r[1],c=r[2];return e[0]=a[0]*o,e[1]=a[1]*o,e[2]=a[2]*o,e[3]=a[3]*o,e[4]=a[4]*u,e[5]=a[5]*u,e[6]=a[6]*u,e[7]=a[7]*u,e[8]=a[8]*c,e[9]=a[9]*c,e[10]=a[10]*c,e[11]=a[11]*c,e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e}function a_(e,a,r,o){var u=o[0],c=o[1],p=o[2],g=Math.hypot(u,c,p),y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t,zt,Xt,nr,ar,Tr,Zr,rn,ln,Gn,fi,Fi,uo;return g<ts.Ib?null:(g=1/g,u*=g,c*=g,p*=g,y=Math.sin(r),S=Math.cos(r),O=1-S,L=a[0],V=a[1],G=a[2],he=a[3],ve=a[4],Pe=a[5],Xe=a[6],gt=a[7],_t=a[8],zt=a[9],Xt=a[10],nr=a[11],ar=u*u*O+S,Tr=c*u*O+p*y,Zr=p*u*O-c*y,rn=u*c*O-p*y,ln=c*c*O+S,Gn=p*c*O+u*y,fi=u*p*O+c*y,Fi=c*p*O-u*y,uo=p*p*O+S,e[0]=L*ar+ve*Tr+_t*Zr,e[1]=V*ar+Pe*Tr+zt*Zr,e[2]=G*ar+Xe*Tr+Xt*Zr,e[3]=he*ar+gt*Tr+nr*Zr,e[4]=L*rn+ve*ln+_t*Gn,e[5]=V*rn+Pe*ln+zt*Gn,e[6]=G*rn+Xe*ln+Xt*Gn,e[7]=he*rn+gt*ln+nr*Gn,e[8]=L*fi+ve*Fi+_t*uo,e[9]=V*fi+Pe*Fi+zt*uo,e[10]=G*fi+Xe*Fi+Xt*uo,e[11]=he*fi+gt*Fi+nr*uo,a!==e&&(e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e)}function Np(e,a,r){var o=Math.sin(r),u=Math.cos(r),c=a[4],p=a[5],g=a[6],y=a[7],S=a[8],O=a[9],L=a[10],V=a[11];return a!==e&&(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e[4]=c*u+S*o,e[5]=p*u+O*o,e[6]=g*u+L*o,e[7]=y*u+V*o,e[8]=S*u-c*o,e[9]=O*u-p*o,e[10]=L*u-g*o,e[11]=V*u-y*o,e}function Ya(e,a,r){var o=Math.sin(r),u=Math.cos(r),c=a[0],p=a[1],g=a[2],y=a[3],S=a[8],O=a[9],L=a[10],V=a[11];return a!==e&&(e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e[0]=c*u-S*o,e[1]=p*u-O*o,e[2]=g*u-L*o,e[3]=y*u-V*o,e[8]=c*o+S*u,e[9]=p*o+O*u,e[10]=g*o+L*u,e[11]=y*o+V*u,e}function kc(e,a,r){var o=Math.sin(r),u=Math.cos(r),c=a[0],p=a[1],g=a[2],y=a[3],S=a[4],O=a[5],L=a[6],V=a[7];return a!==e&&(e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]),e[0]=c*u+S*o,e[1]=p*u+O*o,e[2]=g*u+L*o,e[3]=y*u+V*o,e[4]=S*u-c*o,e[5]=O*u-p*o,e[6]=L*u-g*o,e[7]=V*u-y*o,e}function D0(e,a){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function h(e,a){return e[0]=a[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=a[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,a,r){var o=r[0],u=r[1],c=r[2],p=Math.hypot(o,u,c),g,y,S;return p<ts.Ib?null:(p=1/p,o*=p,u*=p,c*=p,g=Math.sin(a),y=Math.cos(a),S=1-y,e[0]=o*o*S+y,e[1]=u*o*S+c*g,e[2]=c*o*S-u*g,e[3]=0,e[4]=o*u*S-c*g,e[5]=u*u*S+y,e[6]=c*u*S+o*g,e[7]=0,e[8]=o*c*S+u*g,e[9]=u*c*S-o*g,e[10]=c*c*S+y,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function _(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=o,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=o+o,y=u+u,S=c+c,O=o*g,L=o*y,V=o*S,G=u*y,he=u*S,ve=c*S,Pe=p*g,Xe=p*y,gt=p*S;return e[0]=1-(G+ve),e[1]=L+gt,e[2]=V-Xe,e[3]=0,e[4]=L-gt,e[5]=1-(O+ve),e[6]=he+Pe,e[7]=0,e[8]=V+Xe,e[9]=he-Pe,e[10]=1-(O+G),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function X(e,a){var r=new ts.WT(3),o=-a[0],u=-a[1],c=-a[2],p=a[3],g=a[4],y=a[5],S=a[6],O=a[7],L=o*o+u*u+c*c+p*p;return L>0?(r[0]=(g*p+O*o+y*c-S*u)*2/L,r[1]=(y*p+O*u+S*o-g*c)*2/L,r[2]=(S*p+O*c+g*u-y*o)*2/L):(r[0]=(g*p+O*o+y*c-S*u)*2,r[1]=(y*p+O*u+S*o-g*c)*2,r[2]=(S*p+O*c+g*u-y*o)*2),z(e,a,r),e}function ue(e,a){return e[0]=a[12],e[1]=a[13],e[2]=a[14],e}function Ie(e,a){var r=a[0],o=a[1],u=a[2],c=a[4],p=a[5],g=a[6],y=a[8],S=a[9],O=a[10];return e[0]=Math.hypot(r,o,u),e[1]=Math.hypot(c,p,g),e[2]=Math.hypot(y,S,O),e}function qe(e,a){var r=new ts.WT(3);Ie(r,a);var o=1/r[0],u=1/r[1],c=1/r[2],p=a[0]*o,g=a[1]*u,y=a[2]*c,S=a[4]*o,O=a[5]*u,L=a[6]*c,V=a[8]*o,G=a[9]*u,he=a[10]*c,ve=p+O+he,Pe=0;return ve>0?(Pe=Math.sqrt(ve+1)*2,e[3]=.25*Pe,e[0]=(L-G)/Pe,e[1]=(V-y)/Pe,e[2]=(g-S)/Pe):p>O&&p>he?(Pe=Math.sqrt(1+p-O-he)*2,e[3]=(L-G)/Pe,e[0]=.25*Pe,e[1]=(g+S)/Pe,e[2]=(V+y)/Pe):O>he?(Pe=Math.sqrt(1+O-p-he)*2,e[3]=(V-y)/Pe,e[0]=(g+S)/Pe,e[1]=.25*Pe,e[2]=(L+G)/Pe):(Pe=Math.sqrt(1+he-p-O)*2,e[3]=(g-S)/Pe,e[0]=(V+y)/Pe,e[1]=(L+G)/Pe,e[2]=.25*Pe),e}function lt(e,a,r,o){var u=a[0],c=a[1],p=a[2],g=a[3],y=u+u,S=c+c,O=p+p,L=u*y,V=u*S,G=u*O,he=c*S,ve=c*O,Pe=p*O,Xe=g*y,gt=g*S,_t=g*O,zt=o[0],Xt=o[1],nr=o[2];return e[0]=(1-(he+Pe))*zt,e[1]=(V+_t)*zt,e[2]=(G-gt)*zt,e[3]=0,e[4]=(V-_t)*Xt,e[5]=(1-(L+Pe))*Xt,e[6]=(ve+Xe)*Xt,e[7]=0,e[8]=(G+gt)*nr,e[9]=(ve-Xe)*nr,e[10]=(1-(L+he))*nr,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function yt(e,a,r,o,u){var c=a[0],p=a[1],g=a[2],y=a[3],S=c+c,O=p+p,L=g+g,V=c*S,G=c*O,he=c*L,ve=p*O,Pe=p*L,Xe=g*L,gt=y*S,_t=y*O,zt=y*L,Xt=o[0],nr=o[1],ar=o[2],Tr=u[0],Zr=u[1],rn=u[2],ln=(1-(ve+Xe))*Xt,Gn=(G+zt)*Xt,fi=(he-_t)*Xt,Fi=(G-zt)*nr,uo=(1-(V+Xe))*nr,is=(Pe+gt)*nr,as=(he+_t)*ar,tu=(Pe-gt)*ar,hu=(1-(V+ve))*ar;return e[0]=ln,e[1]=Gn,e[2]=fi,e[3]=0,e[4]=Fi,e[5]=uo,e[6]=is,e[7]=0,e[8]=as,e[9]=tu,e[10]=hu,e[11]=0,e[12]=r[0]+Tr-(ln*Tr+Fi*Zr+as*rn),e[13]=r[1]+Zr-(Gn*Tr+uo*Zr+tu*rn),e[14]=r[2]+rn-(fi*Tr+is*Zr+hu*rn),e[15]=1,e}function Lt(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=r+r,g=o+o,y=u+u,S=r*p,O=o*p,L=o*g,V=u*p,G=u*g,he=u*y,ve=c*p,Pe=c*g,Xe=c*y;return e[0]=1-L-he,e[1]=O+Xe,e[2]=V-Pe,e[3]=0,e[4]=O-Xe,e[5]=1-S-he,e[6]=G+ve,e[7]=0,e[8]=V+Pe,e[9]=G-ve,e[10]=1-S-L,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ut(e,a,r,o,u,c,p){var g=1/(r-a),y=1/(u-o),S=1/(c-p);return e[0]=c*2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c*2*y,e[6]=0,e[7]=0,e[8]=(r+a)*g,e[9]=(u+o)*y,e[10]=(p+c)*S,e[11]=-1,e[12]=0,e[13]=0,e[14]=p*c*2*S,e[15]=0,e}function ur(e,a,r,o,u){var c=1/Math.tan(a/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=(u+o)*p,e[14]=2*u*o*p):(e[10]=-1,e[14]=-2*o),e}var fr=ur;function Dr(e,a,r,o,u){var c=1/Math.tan(a/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=u*p,e[14]=u*o*p):(e[10]=-1,e[14]=-o),e}function Mr(e,a,r,o){var u=Math.tan(a.upDegrees*Math.PI/180),c=Math.tan(a.downDegrees*Math.PI/180),p=Math.tan(a.leftDegrees*Math.PI/180),g=Math.tan(a.rightDegrees*Math.PI/180),y=2/(p+g),S=2/(u+c);return e[0]=y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=S,e[6]=0,e[7]=0,e[8]=-((p-g)*y*.5),e[9]=(u-c)*S*.5,e[10]=o/(r-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r/(r-o),e[15]=0,e}function Yr(e,a,r,o,u,c,p){var g=1/(a-r),y=1/(o-u),S=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*S,e[11]=0,e[12]=(a+r)*g,e[13]=(u+o)*y,e[14]=(p+c)*S,e[15]=1,e}var on=Yr;function vn(e,a,r,o,u,c,p){var g=1/(a-r),y=1/(o-u),S=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=S,e[11]=0,e[12]=(a+r)*g,e[13]=(u+o)*y,e[14]=c*S,e[15]=1,e}function wn(e,a,r,o){var u,c,p,g,y,S,O,L,V,G,he=a[0],ve=a[1],Pe=a[2],Xe=o[0],gt=o[1],_t=o[2],zt=r[0],Xt=r[1],nr=r[2];return Math.abs(he-zt)<ts.Ib&&Math.abs(ve-Xt)<ts.Ib&&Math.abs(Pe-nr)<ts.Ib?Wv(e):(O=he-zt,L=ve-Xt,V=Pe-nr,G=1/Math.hypot(O,L,V),O*=G,L*=G,V*=G,u=gt*V-_t*L,c=_t*O-Xe*V,p=Xe*L-gt*O,G=Math.hypot(u,c,p),G?(G=1/G,u*=G,c*=G,p*=G):(u=0,c=0,p=0),g=L*p-V*c,y=V*u-O*p,S=O*c-L*u,G=Math.hypot(g,y,S),G?(G=1/G,g*=G,y*=G,S*=G):(g=0,y=0,S=0),e[0]=u,e[1]=g,e[2]=O,e[3]=0,e[4]=c,e[5]=y,e[6]=L,e[7]=0,e[8]=p,e[9]=S,e[10]=V,e[11]=0,e[12]=-(u*he+c*ve+p*Pe),e[13]=-(g*he+y*ve+S*Pe),e[14]=-(O*he+L*ve+V*Pe),e[15]=1,e)}function Fn(e,a,r,o){var u=a[0],c=a[1],p=a[2],g=o[0],y=o[1],S=o[2],O=u-r[0],L=c-r[1],V=p-r[2],G=O*O+L*L+V*V;G>0&&(G=1/Math.sqrt(G),O*=G,L*=G,V*=G);var he=y*V-S*L,ve=S*O-g*V,Pe=g*L-y*O;return G=he*he+ve*ve+Pe*Pe,G>0&&(G=1/Math.sqrt(G),he*=G,ve*=G,Pe*=G),e[0]=he,e[1]=ve,e[2]=Pe,e[3]=0,e[4]=L*Pe-V*ve,e[5]=V*he-O*Pe,e[6]=O*ve-L*he,e[7]=0,e[8]=O,e[9]=L,e[10]=V,e[11]=0,e[12]=u,e[13]=c,e[14]=p,e[15]=1,e}function ci(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Si(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Ji(e,a,r){return e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e[3]=a[3]+r[3],e[4]=a[4]+r[4],e[5]=a[5]+r[5],e[6]=a[6]+r[6],e[7]=a[7]+r[7],e[8]=a[8]+r[8],e[9]=a[9]+r[9],e[10]=a[10]+r[10],e[11]=a[11]+r[11],e[12]=a[12]+r[12],e[13]=a[13]+r[13],e[14]=a[14]+r[14],e[15]=a[15]+r[15],e}function ki(e,a,r){return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],e[3]=a[3]-r[3],e[4]=a[4]-r[4],e[5]=a[5]-r[5],e[6]=a[6]-r[6],e[7]=a[7]-r[7],e[8]=a[8]-r[8],e[9]=a[9]-r[9],e[10]=a[10]-r[10],e[11]=a[11]-r[11],e[12]=a[12]-r[12],e[13]=a[13]-r[13],e[14]=a[14]-r[14],e[15]=a[15]-r[15],e}function la(e,a,r){return e[0]=a[0]*r,e[1]=a[1]*r,e[2]=a[2]*r,e[3]=a[3]*r,e[4]=a[4]*r,e[5]=a[5]*r,e[6]=a[6]*r,e[7]=a[7]*r,e[8]=a[8]*r,e[9]=a[9]*r,e[10]=a[10]*r,e[11]=a[11]*r,e[12]=a[12]*r,e[13]=a[13]*r,e[14]=a[14]*r,e[15]=a[15]*r,e}function Ii(e,a,r,o){return e[0]=a[0]+r[0]*o,e[1]=a[1]+r[1]*o,e[2]=a[2]+r[2]*o,e[3]=a[3]+r[3]*o,e[4]=a[4]+r[4]*o,e[5]=a[5]+r[5]*o,e[6]=a[6]+r[6]*o,e[7]=a[7]+r[7]*o,e[8]=a[8]+r[8]*o,e[9]=a[9]+r[9]*o,e[10]=a[10]+r[10]*o,e[11]=a[11]+r[11]*o,e[12]=a[12]+r[12]*o,e[13]=a[13]+r[13]*o,e[14]=a[14]+r[14]*o,e[15]=a[15]+r[15]*o,e}function eo(e,a){return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]&&e[3]===a[3]&&e[4]===a[4]&&e[5]===a[5]&&e[6]===a[6]&&e[7]===a[7]&&e[8]===a[8]&&e[9]===a[9]&&e[10]===a[10]&&e[11]===a[11]&&e[12]===a[12]&&e[13]===a[13]&&e[14]===a[14]&&e[15]===a[15]}function qi(e,a){var r=e[0],o=e[1],u=e[2],c=e[3],p=e[4],g=e[5],y=e[6],S=e[7],O=e[8],L=e[9],V=e[10],G=e[11],he=e[12],ve=e[13],Pe=e[14],Xe=e[15],gt=a[0],_t=a[1],zt=a[2],Xt=a[3],nr=a[4],ar=a[5],Tr=a[6],Zr=a[7],rn=a[8],ln=a[9],Gn=a[10],fi=a[11],Fi=a[12],uo=a[13],is=a[14],as=a[15];return Math.abs(r-gt)<=ts.Ib*Math.max(1,Math.abs(r),Math.abs(gt))&&Math.abs(o-_t)<=ts.Ib*Math.max(1,Math.abs(o),Math.abs(_t))&&Math.abs(u-zt)<=ts.Ib*Math.max(1,Math.abs(u),Math.abs(zt))&&Math.abs(c-Xt)<=ts.Ib*Math.max(1,Math.abs(c),Math.abs(Xt))&&Math.abs(p-nr)<=ts.Ib*Math.max(1,Math.abs(p),Math.abs(nr))&&Math.abs(g-ar)<=ts.Ib*Math.max(1,Math.abs(g),Math.abs(ar))&&Math.abs(y-Tr)<=ts.Ib*Math.max(1,Math.abs(y),Math.abs(Tr))&&Math.abs(S-Zr)<=ts.Ib*Math.max(1,Math.abs(S),Math.abs(Zr))&&Math.abs(O-rn)<=ts.Ib*Math.max(1,Math.abs(O),Math.abs(rn))&&Math.abs(L-ln)<=ts.Ib*Math.max(1,Math.abs(L),Math.abs(ln))&&Math.abs(V-Gn)<=ts.Ib*Math.max(1,Math.abs(V),Math.abs(Gn))&&Math.abs(G-fi)<=ts.Ib*Math.max(1,Math.abs(G),Math.abs(fi))&&Math.abs(he-Fi)<=ts.Ib*Math.max(1,Math.abs(he),Math.abs(Fi))&&Math.abs(ve-uo)<=ts.Ib*Math.max(1,Math.abs(ve),Math.abs(uo))&&Math.abs(Pe-is)<=ts.Ib*Math.max(1,Math.abs(Pe),Math.abs(is))&&Math.abs(Xe-as)<=ts.Ib*Math.max(1,Math.abs(Xe),Math.abs(as))}var Gi=vl,fo=ki,za,to,mi=(za=(0,mt.b2)(),za(to=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"viewport",void 0),(0,He.Z)(this,"overridedViewProjectionMatrix",void 0),(0,He.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,He.Z)(this,"jitteredProjectionMatrix",void 0),(0,He.Z)(this,"viewMatrixInverse",void 0),(0,He.Z)(this,"cameraPosition",void 0)}return(0,ot.Z)(e,[{key:"init",value:function(){}},{key:"update",value:function(r){this.viewport=r,this.viewMatrixInverse=Js(),Sh(this.viewMatrixInverse,r.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var r=this.viewport.getCenter(),o=(0,ji.Z)(r,2),u=o[0],c=o[1];return[u,c]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}},{key:"setViewProjectionMatrix",value:function(r){this.overridedViewProjectionMatrix=r}},{key:"jitterProjectionMatrix",value:function(r,o){var u=D0(Js(),[r,o,0]);this.jitteredProjectionMatrix=vl(Js(),u,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=vl(Js(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||to),mo=function(e){return e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom",e}({}),Ms,js;function xs(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Rs(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Rs(e,a){if(e){if(typeof e=="string")return eu(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,a)}}function eu(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var Ns={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},_u=(Ms=(0,mt.b2)(),Ms(js=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"container",void 0),(0,He.Z)(this,"controlCorners",void 0),(0,He.Z)(this,"controlContainer",void 0),(0,He.Z)(this,"scene",void 0),(0,He.Z)(this,"mapsService",void 0),(0,He.Z)(this,"controls",[]),(0,He.Z)(this,"unAddControls",[])}return(0,ot.Z)(e,[{key:"init",value:function(r,o){this.container=r.container,this.scene=o,this.mapsService=o.get(Ct.IMapService),this.initControlPos()}},{key:"addControl",value:function(r,o){var u=o.get(Ct.IMapService);u.map?(r.addTo(this.scene),this.controls.push(r)):this.unAddControls.push(r)}},{key:"getControlByName",value:function(r){return this.controls.find(function(o){return o.controlOption.name===r})}},{key:"removeControl",value:function(r){var o=this.controls.indexOf(r);return o>-1&&this.controls.splice(o,1),r.remove(),this}},{key:"addControls",value:function(){var r=this;this.unAddControls.forEach(function(o){o.addTo(r.scene),r.controls.push(o)}),this.unAddControls=[]}},{key:"destroy",value:function(){var r=xs(this.controls),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.remove()}}catch(c){r.e(c)}finally{r.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var r=this.controlCorners={},o="l7-",u=this.controlContainer=Zs("div",o+"control-container",this.container);function c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=g.map(function(S){return o+S}).join(" ");r[g.filter(function(S){return!["row","column"].includes(S)}).join("")]=Zs("div",y,u)}function p(g){var y=g.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,Rn.Z)(y),[Ns[g]])}Object.values(mo).forEach(function(g){c(p(g))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var r in this.controlCorners)this.controlCorners[r]&&ic(this.controlCorners[r]);this.controlContainer&&ic(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var r=this,o=window.MutationObserver;if(o)for(var u=function(){var y=p[c],S=y.match(/^(top|bottom)(left|right)$/);if(S){var O=(0,ji.Z)(S,3),L=O[1],V=O[2],G=r.controlCorners["".concat(L).concat(V)],he=new o(function(ve){var Pe=(0,ji.Z)(ve,1),Xe=Pe[0].target;G&&(G.style[L]=Xe.clientHeight+"px")});he.observe(r.controlCorners["".concat(V).concat(L)],{childList:!0,attributes:!0})}},c=0,p=Object.keys(this.controlCorners);c<p.length;c++)u()}}]),e}())||js),Zu,Ku,gl=(Zu=(0,mt.b2)(),Zu(Ku=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"container",void 0),(0,He.Z)(this,"scene",void 0),(0,He.Z)(this,"mapsService",void 0),(0,He.Z)(this,"markers",[]),(0,He.Z)(this,"markerLayers",[]),(0,He.Z)(this,"unAddMarkers",[]),(0,He.Z)(this,"unAddMarkerLayers",[])}return(0,ot.Z)(e,[{key:"addMarkerLayer",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(r),r.addTo(this.scene)):this.unAddMarkerLayers.push(r)}},{key:"removeMarkerLayer",value:function(r){r.destroy(),this.markerLayers.indexOf(r);var o=this.markerLayers.indexOf(r);o>-1&&this.markerLayers.splice(o,1)}},{key:"addMarker",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(r),r.addTo(this.scene)):this.unAddMarkers.push(r)}},{key:"addMarkers",value:function(){var r=this;this.unAddMarkers.forEach(function(o){o.addTo(r.scene),r.markers.push(o)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var r=this;this.unAddMarkerLayers.forEach(function(o){r.markerLayers.push(o),o.addTo(r.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(r){r.remove(),this.markers.indexOf(r);var o=this.markers.indexOf(r);o>-1&&this.markers.splice(o,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(Ct.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(r){r.remove()}),this.markers=[],this.markerLayers.forEach(function(r){r.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(r){r.destroy()}}]),e}())||Ku),xu,qu,Ka=(xu=(0,mt.b2)(),xu(qu=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"scene",void 0),(0,He.Z)(this,"mapsService",void 0),(0,He.Z)(this,"popups",[]),(0,He.Z)(this,"unAddPopups",[])}return(0,ot.Z)(e,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(r){r!=null&&r.isOpen()&&r.remove();var o=this.popups.indexOf(r);o>-1&&this.popups.splice(o,1);var u=this.unAddPopups.indexOf(r);u>-1&&this.unAddPopups.splice(u,1)}},{key:"destroy",value:function(){this.popups.forEach(function(r){return r.remove()})}},{key:"addPopup",value:function(r){var o=this;r&&r.getOptions().autoClose&&[].concat((0,Rn.Z)(this.popups),(0,Rn.Z)(this.unAddPopups)).forEach(function(u){u.getOptions().autoClose&&o.removePopup(u)}),this.isMarkerReady?(r.addTo(this.scene),this.popups.push(r)):this.unAddPopups.push(r),r.on("close",function(){o.removePopup(r)})}},{key:"initPopup",value:function(){var r=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(o){r.addPopup(o),r.unAddPopups=[]})}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(Ct.IMapService)}}]),e}())||qu),Ro=function(e){return e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none",e}({}),Io=function(e){return e.MULTIPLE="MULTIPLE",e.SINGLE="SINGLE",e}({}),bo=function(e){return e.AND="and",e.OR="or",e}({}),Ko=function(e){return e.INIT="init",e.UPDATE="update",e}({}),Il={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Is=Il,uu,ml,Ao=Ca.merge,jf={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},yl={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:bo.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},tp=(uu=(0,mt.b2)(),uu(ml=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"sceneConfigCache",{}),(0,He.Z)(this,"layerConfigCache",{}),(0,He.Z)(this,"layerAttributeConfigCache",{})}return(0,ot.Z)(e,[{key:"getSceneConfig",value:function(r){return this.sceneConfigCache[r]}},{key:"getSceneWarninfo",value:function(r){return Is[r]}},{key:"setSceneConfig",value:function(r,o){this.sceneConfigCache[r]=(0,ne.Z)((0,ne.Z)({},jf),o)}},{key:"getLayerConfig",value:function(r){return this.layerConfigCache[r]}},{key:"setLayerConfig",value:function(r,o,u){this.layerConfigCache[o]=(0,ne.Z)({},Ao({},this.sceneConfigCache[r],yl,u))}},{key:"getAttributeConfig",value:function(r){return this.layerAttributeConfigCache[r]}},{key:"setAttributeConfig",value:function(r,o){this.layerAttributeConfigCache[r]=(0,ne.Z)((0,ne.Z)({},this.layerAttributeConfigCache[r]),o)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||ml);function na(e,a,r,o){r&&Object.defineProperty(e,a,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Fa(e,a,r,o,u){var c={};return Object.keys(o).forEach(function(p){c[p]=o[p]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=r.slice().reverse().reduce(function(p,g){return g(e,a,p)||p},c),u&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(u):void 0,c.initializer=void 0),c.initializer===void 0&&(Object.defineProperty(e,a,c),c=null),c}function nf(){var e=new ts.WT(4);return ts.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Qd(e){var a=new glMatrix.ARRAY_TYPE(4);return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a}function zp(e,a,r,o){var u=new ts.WT(4);return u[0]=e,u[1]=a,u[2]=r,u[3]=o,u}function Tg(e,a){return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e}function Up(e,a,r,o,u){return e[0]=a,e[1]=r,e[2]=o,e[3]=u,e}function Jd(e,a,r){return e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e[3]=a[3]+r[3],e}function bm(e,a,r){return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],e[3]=a[3]-r[3],e}function md(e,a,r){return e[0]=a[0]*r[0],e[1]=a[1]*r[1],e[2]=a[2]*r[2],e[3]=a[3]*r[3],e}function Ag(e,a,r){return e[0]=a[0]/r[0],e[1]=a[1]/r[1],e[2]=a[2]/r[2],e[3]=a[3]/r[3],e}function Sm(e,a){return e[0]=Math.ceil(a[0]),e[1]=Math.ceil(a[1]),e[2]=Math.ceil(a[2]),e[3]=Math.ceil(a[3]),e}function bu(e,a){return e[0]=Math.floor(a[0]),e[1]=Math.floor(a[1]),e[2]=Math.floor(a[2]),e[3]=Math.floor(a[3]),e}function Zp(e,a,r){return e[0]=Math.min(a[0],r[0]),e[1]=Math.min(a[1],r[1]),e[2]=Math.min(a[2],r[2]),e[3]=Math.min(a[3],r[3]),e}function Gv(e,a,r){return e[0]=Math.max(a[0],r[0]),e[1]=Math.max(a[1],r[1]),e[2]=Math.max(a[2],r[2]),e[3]=Math.max(a[3],r[3]),e}function Mg(e,a){return e[0]=Math.round(a[0]),e[1]=Math.round(a[1]),e[2]=Math.round(a[2]),e[3]=Math.round(a[3]),e}function Vp(e,a,r){return e[0]=a[0]*r,e[1]=a[1]*r,e[2]=a[2]*r,e[3]=a[3]*r,e}function Rg(e,a,r,o){return e[0]=a[0]+r[0]*o,e[1]=a[1]+r[1]*o,e[2]=a[2]+r[2]*o,e[3]=a[3]+r[3]*o,e}function Ig(e,a){var r=a[0]-e[0],o=a[1]-e[1],u=a[2]-e[2],c=a[3]-e[3];return Math.hypot(r,o,u,c)}function L0(e,a){var r=a[0]-e[0],o=a[1]-e[1],u=a[2]-e[2],c=a[3]-e[3];return r*r+o*o+u*u+c*c}function Pg(e){var a=e[0],r=e[1],o=e[2],u=e[3];return Math.hypot(a,r,o,u)}function F0(e){var a=e[0],r=e[1],o=e[2],u=e[3];return a*a+r*r+o*o+u*u}function o_(e,a){return e[0]=-a[0],e[1]=-a[1],e[2]=-a[2],e[3]=-a[3],e}function B0(e,a){return e[0]=1/a[0],e[1]=1/a[1],e[2]=1/a[2],e[3]=1/a[3],e}function Ql(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=r*r+o*o+u*u+c*c;return p>0&&(p=1/Math.sqrt(p)),e[0]=r*p,e[1]=o*p,e[2]=u*p,e[3]=c*p,e}function Eh(e,a){return e[0]*a[0]+e[1]*a[1]+e[2]*a[2]+e[3]*a[3]}function rs(e,a,r,o){var u=r[0]*o[1]-r[1]*o[0],c=r[0]*o[2]-r[2]*o[0],p=r[0]*o[3]-r[3]*o[0],g=r[1]*o[2]-r[2]*o[1],y=r[1]*o[3]-r[3]*o[1],S=r[2]*o[3]-r[3]*o[2],O=a[0],L=a[1],V=a[2],G=a[3];return e[0]=L*S-V*y+G*g,e[1]=-(O*S)+V*p-G*c,e[2]=O*y-L*p+G*u,e[3]=-(O*g)+L*c-V*u,e}function Dc(e,a,r,o){var u=a[0],c=a[1],p=a[2],g=a[3];return e[0]=u+o*(r[0]-u),e[1]=c+o*(r[1]-c),e[2]=p+o*(r[2]-p),e[3]=g+o*(r[3]-g),e}function N0(e,a){a=a||1;var r,o,u,c,p,g;do r=glMatrix.RANDOM()*2-1,o=glMatrix.RANDOM()*2-1,p=r*r+o*o;while(p>=1);do u=glMatrix.RANDOM()*2-1,c=glMatrix.RANDOM()*2-1,g=u*u+c*c;while(g>=1);var y=Math.sqrt((1-p)/g);return e[0]=a*r,e[1]=a*o,e[2]=a*u*y,e[3]=a*c*y,e}function Wf(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3];return e[0]=r[0]*o+r[4]*u+r[8]*c+r[12]*p,e[1]=r[1]*o+r[5]*u+r[9]*c+r[13]*p,e[2]=r[2]*o+r[6]*u+r[10]*c+r[14]*p,e[3]=r[3]*o+r[7]*u+r[11]*c+r[15]*p,e}function Em(e,a,r){var o=a[0],u=a[1],c=a[2],p=r[0],g=r[1],y=r[2],S=r[3],O=S*o+g*c-y*u,L=S*u+y*o-p*c,V=S*c+p*u-g*o,G=-p*o-g*u-y*c;return e[0]=O*S+G*-p+L*-y-V*-g,e[1]=L*S+G*-g+V*-p-O*-y,e[2]=V*S+G*-y+O*-g-L*-p,e[3]=a[3],e}function $v(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function wm(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Xv(e,a){return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]&&e[3]===a[3]}function yd(e,a){var r=e[0],o=e[1],u=e[2],c=e[3],p=a[0],g=a[1],y=a[2],S=a[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))}var Og=null,s_=null,u_=null,l_=null,zE=null,Cm=null,Su=null,wh=function(){var e=nf();return function(a,r,o,u,c,p){var g,y;for(r||(r=4),o||(o=0),u?y=Math.min(u*r+o,a.length):y=a.length,g=o;g<y;g+=r)e[0]=a[g],e[1]=a[g+1],e[2]=a[g+2],e[3]=a[g+3],c(e,e,p),a[g]=e[0],a[g+1]=e[1],a[g+2]=e[2],a[g+3]=e[3];return a}}(),z0=Math.PI/180,_d=512,Tm=4003e4;function U0(e){var a=e.latitude,r=a===void 0?0:a,o=e.zoom,u=o===void 0?0:o,c=e.scale,p=e.highPrecision,g=p===void 0?!1:p,y=e.flipY,S=y===void 0?!1:y;c=c!==void 0?c:Math.pow(2,u);var O={},L=_d*c,V=Math.cos(r*z0),G=L/360,he=G/V,ve=L/Tm/V;if(O.pixelsPerMeter=[ve,-ve,ve],O.metersPerPixel=[1/ve,-1/ve,1/ve],O.pixelsPerDegree=[G,-he,ve],O.degreesPerPixel=[1/G,-1/he,1/ve],g){var Pe=z0*Math.tan(r*z0)/V,Xe=G*Pe/2,gt=L/Tm*Pe,_t=gt/he*ve;O.pixelsPerDegree2=[0,-Xe,gt],O.pixelsPerMeter2=[_t,0,_t],S&&(O.pixelsPerDegree2[1]=-O.pixelsPerDegree2[1],O.pixelsPerMeter2[1]=-O.pixelsPerMeter2[1])}return S&&(O.pixelsPerMeter[1]=-O.pixelsPerMeter[1],O.metersPerPixel[1]=-O.metersPerPixel[1],O.pixelsPerDegree[1]=-O.pixelsPerDegree[1],O.degreesPerPixel[1]=-O.degreesPerPixel[1]),O}var Lc=function(e){return e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2",e}({}),Pl={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},ev,tv,xd,Hp,rv,Am=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],bd=(ev=(0,mt.b2)(),tv=(0,mt.f3)(Ct.ICameraService),ev(xd=(Hp=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"needRefresh",!0),na(this,"cameraService",rv,this),(0,He.Z)(this,"coordinateSystem",void 0),(0,He.Z)(this,"viewportCenter",void 0),(0,He.Z)(this,"viewportCenterProjection",void 0),(0,He.Z)(this,"pixelsPerDegree",void 0),(0,He.Z)(this,"pixelsPerDegree2",void 0),(0,He.Z)(this,"pixelsPerMeter",void 0)}return(0,ot.Z)(e,[{key:"refresh",value:function(r){var o=this.cameraService.getZoom(),u=this.cameraService.getZoomScale(),c=r||this.cameraService.getCenter(),p=U0({latitude:c[1],zoom:o}),g=p.pixelsPerMeter,y=p.pixelsPerDegree;this.viewportCenter=c,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Lc.LNGLAT||this.coordinateSystem===Lc.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Lc.LNGLAT_OFFSET?this.calculateLnglatOffset(c,o):this.coordinateSystem===Lc.P20_OFFSET&&this.calculateLnglatOffset(c,o,u,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(r){this.coordinateSystem=r}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(r,o,u,c){var p=U0({latitude:r[1],zoom:o,scale:u,flipY:c,highPrecision:!0}),g=p.pixelsPerMeter,y=p.pixelsPerDegree,S=p.pixelsPerDegree2,O=this.cameraService.getViewMatrix(),L=this.cameraService.getProjectionMatrix(),V=vl([],L,O),G=this.cameraService.projectFlat([Math.fround(r[0]),Math.fround(r[1])],Math.pow(2,o));this.viewportCenterProjection=Wf([],[G[0],G[1],0,1],V),O=this.cameraService.getViewMatrixUncentered()||O,V=vl([],L,O),V=vl([],V,Am),this.cameraService.setViewProjectionMatrix(V),this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=S}}]),e}(),rv=Fa(Hp.prototype,"cameraService",[tv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hp))||xd),Mm,Rm;function Sd(e){var a=Im();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Im(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Pm=(Mm=(0,mt.b2)(),Mm(Rm=function(e){(0,yr.Z)(r,e);var a=Sd(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"renderMap",new Map),(0,He.Z)((0,wr.Z)(o),"enable",!1),(0,He.Z)((0,wr.Z)(o),"renderEnable",!1),(0,He.Z)((0,wr.Z)(o),"cacheLogs",{}),o}return(0,ot.Z)(r,[{key:"setEnable",value:function(u){this.enable=!!u}},{key:"log",value:function(u,c){var p=this;if(this.enable){var g=u.split("."),y=null;g.forEach(function(S,O){y!==null?(y[S]||(y[S]={}),O!==g.length-1&&(y=y[S])):(p.cacheLogs[S]||(p.cacheLogs[S]={}),O!==g.length-1&&(y=p.cacheLogs[S])),O===g.length-1&&(y[S]=(0,ne.Z)((0,ne.Z)({time:Date.now()},y[S]),c))})}}},{key:"getLog",value:function(u){var c=this;switch((0,tf.Z)(u)){case"string":return this.cacheLogs[u];case"object":return u.map(function(p){return c.cacheLogs[p]}).filter(function(p){return p!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(u){delete this.cacheLogs[u]}},{key:"generateRenderUid",value:function(){return this.renderEnable?Df():""}},{key:"renderDebug",value:function(u){this.renderEnable=u}},{key:"renderStart",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u)||{};this.renderMap.set(u,(0,ne.Z)((0,ne.Z)({},c),{},{renderUid:u,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u);if(c){var p=c.renderStart,g=Date.now();this.emit("renderEnd",(0,ne.Z)((0,ne.Z)({},c),{},{renderEnd:g,renderDuration:g-p})),this.renderMap.delete(u)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),r}(Ys.EventEmitter))||Rm),Fc=k(50840),bf=k.n(Fc),jl=function(e){return e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag",e}({}),Ch,Om,km,Th,nv;function iv(e){var a=av();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function av(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Yv={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},c_=(Ch=(0,mt.b2)(),Om=(0,mt.f3)(Ct.IMapService),Ch(km=(Th=function(e){(0,yr.Z)(r,e);var a=iv(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"indragging",!1),na((0,wr.Z)(o),"mapService",nv,(0,wr.Z)(o)),(0,He.Z)((0,wr.Z)(o),"hammertime",void 0),(0,He.Z)((0,wr.Z)(o),"lastClickTime",0),(0,He.Z)((0,wr.Z)(o),"lastClickXY",[-1,-1]),(0,He.Z)((0,wr.Z)(o),"clickTimer",void 0),(0,He.Z)((0,wr.Z)(o),"$containter",void 0),(0,He.Z)((0,wr.Z)(o),"onDrag",function(g){var y=o.interactionEvent(g);y.type=Yv[y.type],y.type==="dragging"?o.indragging=!0:o.indragging=!1,o.emit(jl.Drag,y)}),(0,He.Z)((0,wr.Z)(o),"onHammer",function(g){g.srcEvent.stopPropagation();var y=o.interactionEvent(g);o.emit(jl.Hover,y)}),(0,He.Z)((0,wr.Z)(o),"onTouch",function(g){var y=g.touches[0];o.onHover({x:y.pageX,y:y.pageY,type:"touch"})}),(0,He.Z)((0,wr.Z)(o),"onHover",function(g){var y=g.clientX,S=g.clientY,O=y,L=S,V=g.type,G=o.mapService.getMapContainer();if(G){var he=G.getBoundingClientRect(),ve=he.top,Pe=he.left;O=O-Pe-G.clientLeft,L=L-ve-G.clientTop}var Xe=o.mapService.containerToLngLat([O,L]);if(V==="click"){o.isDoubleTap(O,L,Xe);return}if(V==="touch"){o.isDoubleTap(O,L,Xe);return}V!=="click"&&V!=="dblclick"&&o.emit(jl.Hover,{x:O,y:L,lngLat:Xe,type:V,target:g})}),o}return(0,ot.Z)(r,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(jl.Hover)}},{key:"triggerHover",value:function(u){var c=u.x,p=u.y;this.emit(jl.Hover,{x:c,y:p})}},{key:"triggerSelect",value:function(u){this.emit(jl.Select,{featureId:u})}},{key:"triggerActive",value:function(u){this.emit(jl.Active,{featureId:u})}},{key:"handleMiniEvent",value:function(u){this.onHover({clientX:u.touches[0].pageX,clientY:u.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();if(u){var c=new(bf()).Manager(u);c.add(new(bf()).Tap({event:"dblclick",taps:2})),c.add(new(bf()).Tap({event:"click"})),c.add(new(bf()).Pan({threshold:0,pointers:0})),c.add(new(bf()).Press({})),c.on("dblclick click",this.onHammer),c.on("panstart panmove panend pancancel",this.onDrag),u.addEventListener("mousemove",this.onHover),u.addEventListener("mousedown",this.onHover,!0),u.addEventListener("mouseup",this.onHover),u.addEventListener("contextmenu",this.onHover),this.hammertime=c}}},{key:"removeEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();u&&(u.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),u.removeEventListener("mousedown",this.onHover),u.removeEventListener("mouseup",this.onHover),u.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(u){var c=u.type,p=u.pointerType,g,y;p==="touch"?(y=Math.floor(u.pointers[0].clientY),g=Math.floor(u.pointers[0].clientX)):(y=Math.floor(u.srcEvent.y),g=Math.floor(u.srcEvent.x));var S=this.mapService.getMapContainer();if(S){var O=S.getBoundingClientRect(),L=O.top,V=O.left;g-=V,y-=L}var G=this.mapService.containerToLngLat([g,y]);return{x:g,y,lngLat:G,type:c,target:u.srcEvent}}},{key:"isDoubleTap",value:function(u,c,p){var g=this,y=new Date().getTime(),S="click";y-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-u)<10&&Math.abs(this.lastClickXY[1]-c)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),S="dblclick",this.emit(jl.Hover,{x:u,y:c,lngLat:p,type:S})):(this.lastClickTime=y,this.lastClickXY=[u,c],this.clickTimer=setTimeout(function(){S="click",g.emit(jl.Hover,{x:u,y:c,lngLat:p,type:S})},400))}}]),r}(Ul()),nv=Fa(Th.prototype,"mapService",[Om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Th))||km),f_=0;function h_(e){var a=e;if(typeof e=="string"&&(a=document.getElementById(e)),a){var r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,r.id="l7-scene-".concat(f_++),r.classList.add("l7-scene"),a.appendChild(r),r}return null}function Dm(e){var a,r=!0;if((e==null||(a=e.target)===null||a===void 0?void 0:a.target)instanceof HTMLElement)for(var o,u=e==null||(o=e.target)===null||o===void 0?void 0:o.target;u;){var c,p=Array.from(u.classList);if(p.includes("l7-marker")||p.includes("l7-popup")){r=!1;break}u=(c=u)===null||c===void 0?void 0:c.parentElement}return r}var Rt=function(e){return e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e}({}),vc=function(e){return e[e.SAMPLED=0]="SAMPLED",e[e.RENDER_TARGET=1]="RENDER_TARGET",e}({}),rp,Z0,ov,Lm,V0,kg,H0,Ed,Ol,np,Kv,j0,Dg,bx=(rp=(0,mt.b2)(),Z0=(0,mt.f3)(Ct.IMapService),ov=(0,mt.f3)(Ct.IRendererService),Lm=(0,mt.f3)(Ct.IGlobalConfigService),V0=(0,mt.f3)(Ct.IInteractionService),kg=(0,mt.f3)(Ct.ILayerService),rp(H0=(Ed=function(){function e(){var a=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"pickedColors",void 0),(0,He.Z)(this,"pickedTileLayers",[]),na(this,"mapService",Ol,this),na(this,"rendererService",np,this),na(this,"configService",Kv,this),na(this,"interactionService",j0,this),na(this,"layerService",Dg,this),(0,He.Z)(this,"pickingFBO",void 0),(0,He.Z)(this,"width",0),(0,He.Z)(this,"height",0),(0,He.Z)(this,"alreadyInPicking",!1),(0,He.Z)(this,"pickBufferScale",1),(0,He.Z)(this,"pickFromPickingFBO",function(r,o){var u=o.x,c=o.y,p=o.lngLat,g=o.type,y=o.target,S=!1,O=a.rendererService,L=O.readPixels,V=O.getContainer,G=a.getContainerSize(V()),he=G.width,ve=G.height;he*=Os,ve*=Os;var Pe=r.getLayerConfig(),Xe=Pe.enableHighlight,gt=Pe.enableSelect,_t=u*Os,zt=c*Os;if(_t>he-1*Os||_t<0||zt>ve-1*Os||zt<0)return!1;var Xt=L({x:Math.floor(_t/a.pickBufferScale),y:Math.floor((ve-(c+1)*Os)/a.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:a.pickingFBO});if(a.pickedColors=Xt,Xt[0]!==0||Xt[1]!==0||Xt[2]!==0){var nr=Xl(Xt),ar=r.layerPickService.getFeatureById(nr);nr!==r.getCurrentPickId()&&g==="mousemove"&&(g="mouseenter");var Tr={x:u,y:c,type:g,lngLat:p,featureId:nr,feature:ar,target:y};ar&&(S=!0,r.setCurrentPickId(nr),a.triggerHoverOnLayer(r,Tr))}else{var Zr={x:u,y:c,lngLat:p,type:r.getCurrentPickId()!==null&&g==="mousemove"?"mouseout":"un"+g,featureId:null,target:y,feature:null};a.triggerHoverOnLayer(r,(0,ne.Z)((0,ne.Z)({},Zr),{},{type:"unpick"})),a.triggerHoverOnLayer(r,Zr),r.setCurrentPickId(null)}if(Xe&&r.layerPickService.highlightPickedFeature(Xt),gt&&g==="click"&&(Xt==null?void 0:Xt.toString())!==[0,0,0,0].toString()){var rn=Xl(Xt);r.getCurrentSelectedId()===null||rn!==r.getCurrentSelectedId()?(r.layerPickService.selectFeature(Xt),r.setCurrentSelectedId(rn)):(r.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),r.setCurrentSelectedId(null))}return S})}return(0,ot.Z)(e,[{key:"init",value:function(r){var o=this.rendererService,u=o.createTexture2D,c=o.createFramebuffer,p=o.getContainer,g=this.getContainerSize(p()),y=g.width,S=g.height;y*=Os,S*=Os,this.pickBufferScale=this.configService.getSceneConfig(r).pickBufferScale||1,y=Math.round(y/this.pickBufferScale),S=Math.round(S/this.pickBufferScale),this.pickingFBO=c({color:u({width:y,height:S,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE,usage:vc.RENDER_TARGET}),depth:!0,width:y,height:S}),this.interactionService.on(jl.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var a=(0,Sn.Z)(er().mark(function o(u,c,p){var g=this,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:y=this.rendererService,S=y.useFramebuffer,O=y.clear,this.resizePickingFBO(),S(this.pickingFBO,function(){O({framebuffer:g.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),u.hooks.beforePickingEncode.call(),u.renderModels({ispick:!0}),u.hooks.afterPickingEncode.call();var G=g.pickBox(u,c);p(G)});case 3:case"end":return V.stop()}},o,this)}));function r(o,u,c){return a.apply(this,arguments)}return r}()},{key:"pickBox",value:function(r,o){var u=this,c=o.map(function(rn){var ln=rn<0?0:rn;return Math.floor(ln*Os/u.pickBufferScale)}),p=(0,ji.Z)(c,4),g=p[0],y=p[1],S=p[2],O=p[3],L=this.rendererService,V=L.readPixels,G=L.getContainer,he=this.getContainerSize(G()),ve=he.width,Pe=he.height;if(ve*=Os,Pe*=Os,g>(ve-1)*Os/this.pickBufferScale||S<0||y>(Pe-1)*Os/this.pickBufferScale||O<0)return[];for(var Xe=Math.min(ve/this.pickBufferScale,S)-g,gt=Math.min(Pe/this.pickBufferScale,O)-y,_t=V({x:g,y:Math.floor(Pe/this.pickBufferScale-(O+1)),width:Xe,height:gt,data:new Uint8Array(Xe*gt*4),framebuffer:this.pickingFBO}),zt=[],Xt={},nr=0;nr<_t.length/4;nr=nr+1){var ar=_t.slice(nr*4,nr*4+4),Tr=Xl(ar);if(Tr!==-1&&!Xt[Tr]){var Zr=r.layerPickService.getFeatureById(Tr);zt.push((0,ne.Z)((0,ne.Z)({},Zr),{},{pickedFeatureIdx:Tr})),Xt[Tr]=!0}}return zt}},{key:"handleCursor",value:function(r,o){var u=r.getLayerConfig(),c=u.cursor,p=c===void 0?"":c,g=u.cursorEnabled;if(g){var y=this.mapService.version,S=y==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),O=S==null?void 0:S.style.getPropertyValue("cursor");o==="unmousemove"&&O!==""?S==null||S.style.setProperty("cursor",""):o==="mousemove"&&(S==null||S.style.setProperty("cursor",p))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(r){return r.getContext?{width:r.width/Os,height:r.height/Os}:r.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!this.layerService.needPick(u.type)||!this.isPickingAllLayer())){p.next=2;break}return p.abrupt("return");case 2:return this.alreadyInPicking=!0,p.next=5,this.pickingLayers(u);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var r=this.rendererService.getContainer,o=this.getContainerSize(r()),u=o.width,c=o.height;u*=Os,c*=Os,(this.width!==u||this.height!==c)&&(this.pickingFBO.resize({width:Math.round(u/this.pickBufferScale),height:Math.round(c/this.pickBufferScale)}),this.width=u,this.height=c)}},{key:"pickingLayers",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){var c=this,p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:p=this.rendererService.clear,this.resizePickingFBO(),this.rendererService.useFramebuffer(this.pickingFBO,function(){var S=c.layerService.getRenderList();S.filter(function(O){return O.needPick(u.type)}).reverse().some(function(O){p({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),O.layerPickService.pickRender(u);var L=c.pickFromPickingFBO(O,u);return c.layerService.pickedLayerId=L?+O.id:-1,L&&!O.getLayerConfig().enablePropagation})});case 3:case"end":return y.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"triggerHoverOnLayer",value:function(r,o){Dm(o)&&(this.handleCursor(r,o.type),r.emit(o.type,o))}}]),e}(),Ol=Fa(Ed.prototype,"mapService",[Z0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np=Fa(Ed.prototype,"rendererService",[ov],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv=Fa(Ed.prototype,"configService",[Lm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j0=Fa(Ed.prototype,"interactionService",[V0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dg=Fa(Ed.prototype,"layerService",[kg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ed))||H0),p_=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,Ot.Z)(this,e),(0,He.Z)(this,"autoStart",void 0),(0,He.Z)(this,"startTime",0),(0,He.Z)(this,"oldTime",0),(0,He.Z)(this,"running",!1),(0,He.Z)(this,"elapsedTime",0),this.autoStart=a}return(0,ot.Z)(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var o=(typeof performance=="undefined"?Date:performance).now();r=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=r}return r}}]),e}(),W0,d_,Fm,v_,G0,jp,g_,m_,Ah;function qv(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Lg(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Lg(e,a){if(e){if(typeof e=="string")return sv(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sv(e,a)}}function sv(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function y_(e){var a=Sx();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Sx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ex=Ca.throttle,$R=(W0=(0,mt.b2)(),d_=(0,mt.f3)(Ct.IRendererService),Fm=(0,mt.f3)(Ct.IMapService),v_=(0,mt.f3)(Ct.IDebugService),W0(G0=(jp=function(e){(0,yr.Z)(r,e);var a=y_(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"pickedLayerId",-1),(0,He.Z)((0,wr.Z)(o),"clock",new p_),(0,He.Z)((0,wr.Z)(o),"alreadyInRendering",!1),(0,He.Z)((0,wr.Z)(o),"layers",[]),(0,He.Z)((0,wr.Z)(o),"layerList",[]),(0,He.Z)((0,wr.Z)(o),"layerRenderID",void 0),(0,He.Z)((0,wr.Z)(o),"sceneInited",!1),(0,He.Z)((0,wr.Z)(o),"animateInstanceCount",0),(0,He.Z)((0,wr.Z)(o),"shaderPicking",!0),(0,He.Z)((0,wr.Z)(o),"enableRender",!0),na((0,wr.Z)(o),"renderService",g_,(0,wr.Z)(o)),na((0,wr.Z)(o),"mapService",m_,(0,wr.Z)(o)),na((0,wr.Z)(o),"debugService",Ah,(0,wr.Z)(o)),(0,He.Z)((0,wr.Z)(o),"reRender",Ex(function(){o.renderLayers()},32)),(0,He.Z)((0,wr.Z)(o),"throttleRenderLayers",Ex(function(){o.renderLayers()},16)),o}return(0,ot.Z)(r,[{key:"needPick",value:function(u){return this.layerList.some(function(c){return c.needPick(u)})}},{key:"add",value:function(u){var c=this;this.layers.push(u),this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"addMask",value:function(u){var c=this;this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"initLayers",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var S=(0,Sn.Z)(er().mark(function O(L){return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(L.startInit){G.next=4;break}return G.next=3,L.init();case 3:p.updateLayerRenderList();case 4:case"end":return G.stop()}},O)}));return function(O){return S.apply(this,arguments)}}());case 2:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(u){return this.layers.find(function(c){return c.id===u})}},{key:"getLayerByName",value:function(u){return this.layers.find(function(c){return c.name===u})}},{key:"remove",value:function(){var o=(0,Sn.Z)(er().mark(function c(p,g){var y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:g?(y=g.layerChildren.indexOf(p),y>-1&&g.layerChildren.splice(y,1)):(S=this.layers.indexOf(p),S>-1&&this.layers.splice(S,1)),p.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return L.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"removeAllLayers",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.destroy(),this.reRender();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"setEnableRender",value:function(u){this.enableRender=u}},{key:"renderLayers",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L;return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){G.next=2;break}return G.abrupt("return");case 2:this.updateLayerRenderList(),p=this.debugService.generateRenderUid(),this.debugService.renderStart(p),this.alreadyInRendering=!0,this.clear(),this.renderService.beginFrame(),g=qv(this.layerList),G.prev=9,g.s();case 11:if((y=g.n()).done){G.next=24;break}if(S=y.value,O=S.getLayerConfig(),L=O.enableMask,S.masks.filter(function(he){return he.inited}).length>0&&L&&this.renderMask(S.masks),!S.getLayerConfig().enableMultiPassRenderer){G.next=20;break}return G.next=18,S.renderMultiPass();case 18:G.next=22;break;case 20:return G.next=22,S.render();case 22:G.next=11;break;case 24:G.next=29;break;case 26:G.prev=26,G.t0=G.catch(9),g.e(G.t0);case 29:return G.prev=29,g.f(),G.finish(29);case 32:this.renderService.endFrame(),this.debugService.renderEnd(p),this.alreadyInRendering=!1;case 35:case"end":return G.stop()}},c,this,[[9,26,29,32]])}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMask",value:function(u){var c=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var p=u.length>1?Io.MULTIPLE:Io.SINGLE,g=qv(u),y;try{for(g.s();!(y=g.n()).done;){var S=y.value;S.render({isStencil:!0,stencilType:p,stencilIndex:c++})}}catch(O){g.e(O)}finally{g.f()}}},{key:"beforeRenderData",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,p.hooks.beforeRenderData.promise();case 2:g=S.sent,g&&this.renderLayers();case 4:case"end":return S.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderTileLayerMask",value:function(u){var c=0,p=u.getLayerConfig(),g=p.enableMask,y=g===void 0?!0:g,S=u.tileMask?1:0,O=u.masks.filter(function(ve){return ve.inited});S=S+(y?O.length:1);var L=S>1?Io.MULTIPLE:Io.SINGLE;if((u.tileMask||O.length&&y)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),O.length&&y){var V=qv(O),G;try{for(V.s();!(G=V.n()).done;){var he=G.value;he.render({isStencil:!0,stencilType:L,stencilIndex:c++})}}catch(ve){V.e(ve)}finally{V.f()}}u.tileMask&&u.tileMask.render({isStencil:!0,stencilType:L,stencilIndex:c++,stencilOperation:bo.OR})}},{key:"renderTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.renderTileLayerMask(p),!p.getLayerConfig().enableMultiPassRenderer){y.next=6;break}return y.next=4,p.renderMultiPass();case 4:y.next=8;break;case 6:return y.next=8,p.render();case 8:case"end":return y.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateLayerRenderList",value:function(){var u=this;this.layerList=[],this.layers.filter(function(c){return c.inited}).filter(function(c){return c.isVisible()}).sort(function(c,p){return c.zIndex-p.zIndex}).forEach(function(c){u.layerList.push(c)})}},{key:"destroy",value:function(){this.layers.forEach(function(u){u.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var u=ho(this.mapService.bgColor);this.renderService.clear({color:u,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){window.cancelAnimationFrame(this.layerRenderID)}}]),r}(Ys.EventEmitter),g_=Fa(jp.prototype,"renderService",[d_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m_=Fa(jp.prototype,"mapService",[Fm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ah=Fa(jp.prototype,"debugService",[v_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jp))||G0),Sf=k(91),XR=Ca.isNil,YR=function(){function e(a){var r=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"name",void 0),(0,He.Z)(this,"type",void 0),(0,He.Z)(this,"scale",void 0),(0,He.Z)(this,"descriptor",void 0),(0,He.Z)(this,"featureBufferLayout",[]),(0,He.Z)(this,"needRescale",!1),(0,He.Z)(this,"needRemapping",!1),(0,He.Z)(this,"needRegenerateVertices",!1),(0,He.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,He.Z)(this,"vertexAttribute",void 0),(0,He.Z)(this,"defaultCallback",function(o){if(o.length===0){var u;return((u=r.scale)===null||u===void 0?void 0:u.defaultValues)||[]}return o.map(function(c,p){var g,y=(g=r.scale)===null||g===void 0?void 0:g.scalers[p].func,S=y(c);return S})}),this.setProps(a)}return(0,ot.Z)(e,[{key:"setProps",value:function(r){Object.assign(this,r)}},{key:"mapping",value:function(r){var o;if((o=this.scale)!==null&&o!==void 0&&o.callback){var u,c=(u=this.scale)===null||u===void 0?void 0:u.callback.apply(u,(0,Rn.Z)(r));if(!XR(c))return[c]}return this.defaultCallback(r)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),KR=["buffer","update","name"],qR=["buffer","update","name"],$0,UE,ZE,VE,Cx,Tx,HE=($0={},(0,He.Z)($0,Rt.FLOAT,4),(0,He.Z)($0,Rt.UNSIGNED_BYTE,1),(0,He.Z)($0,Rt.UNSIGNED_SHORT,2),$0),jE=(UE=(0,mt.b2)(),ZE=(0,mt.f3)(Ct.IRendererService),UE(VE=(Cx=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"attributesAndIndices",void 0),na(this,"rendererService",Tx,this),(0,He.Z)(this,"attributes",[]),(0,He.Z)(this,"triangulation",void 0),(0,He.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,ot.Z)(e,[{key:"registerStyleAttribute",value:function(r){var o=this.getLayerStyleAttribute(r.name||"");return o?o.setProps(r):(o=new YR(r),this.attributes.push(o)),o}},{key:"unRegisterStyleAttribute",value:function(r){var o=this.attributes.findIndex(function(u){return u.name===r});o>-1&&this.attributes.splice(o,1)}},{key:"updateScaleAttribute",value:function(r){this.attributes.forEach(function(o){var u,c=o.name,p=(u=o.scale)===null||u===void 0?void 0:u.field;(r[c]||p&&r[p])&&(o.needRescale=!0,o.needRemapping=!0,o.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(r,o,u){var c=this.getLayerStyleAttribute(r);c||(c=this.registerStyleAttribute((0,ne.Z)((0,ne.Z)({},o),{},{name:r})));var p=o.scale;p&&c&&(c.scale=p,c.needRescale=!0,c.needRemapping=!0,c.needRegenerateVertices=!0,u&&u.featureRange&&(c.featureRange=u.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(r){return this.attributes.find(function(o){return o.name===r})}},{key:"getLayerAttributeScale",value:function(r){var o,u=this.getLayerStyleAttribute(r),c=u==null||(o=u.scale)===null||o===void 0?void 0:o.scalers;return c&&c[0]?c[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(r,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0,g=this.attributes.find(function(Xt){return Xt.name===r});if(g&&g.descriptor){var y=g.descriptor,S=y.update,O=y.buffer,L=y.size,V=L===void 0?0:L,G=HE[O.type||Rt.FLOAT];if(S){var he=this.featureLayout,ve=he.elements,Pe=he.sizePerElement,Xe=ve.slice(u,c);if(!Xe.length)return;var gt=Xe[0].offset,_t=gt*V*G,zt=Xe.map(function(Xt,nr){for(var ar=Xt.featureIdx,Tr=Xt.vertices,Zr=Xt.normals,rn=Tr.length/Pe,ln=[],Gn=0;Gn<rn;Gn++){var fi=Zr?Zr.slice(Gn*3,Gn*3+3):[];ln.push.apply(ln,(0,Rn.Z)(S(o[ar],ar,Tr.slice(Gn*Pe,Gn*Pe+Pe),nr,fi)))}return ln}).reduce(function(Xt,nr){return Xt.push.apply(Xt,(0,Rn.Z)(nr)),Xt},[]);g.vertexAttribute.updateBuffer({data:zt,offset:_t}),p==null||p.emit("legend:".concat(r),{type:r,attr:g})}}}},{key:"createAttributesAndIndices",value:function(r,o,u){var c=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var p=this.attributes.map(function(Xe){return Xe.resetDescriptor(),Xe.descriptor}),g=0,y=0,S=[],O=3;r.forEach(function(Xe,gt){var _t=c.triangulation(Xe,u),zt=_t.indices,Xt=_t.vertices,nr=_t.normals,ar=_t.size,Tr=_t.indexes,Zr=_t.count;typeof Zr=="number"&&(y+=Zr),zt.forEach(function(fi){S.push(fi+g)}),O=ar;var rn=Xt.length/ar;c.featureLayout.sizePerElement=O,c.featureLayout.elements.push({featureIdx:gt,vertices:Xt,normals:nr,offset:g}),g+=rn;for(var ln=function(Fi){var uo=(nr==null?void 0:nr.slice(Fi*3,Fi*3+3))||[],is=Xt.slice(Fi*ar,Fi*ar+ar),as=0;Tr&&Tr[Fi]!==void 0&&(as=Tr[Fi]),p.forEach(function(tu,hu){if(tu&&tu.update){var lf;(lf=tu.buffer.data).push.apply(lf,(0,Rn.Z)(tu.update(Xe,gt,is,Fi,uo,as)))}})},Gn=0;Gn<rn;Gn++)ln(Gn)});var L=this.rendererService,V=L.createAttribute,G=L.createBuffer,he=L.createElements,ve={};p.forEach(function(Xe,gt){if(Xe){var _t=Xe.buffer,zt=Xe.update,Xt=Xe.name,nr=(0,Sf.Z)(Xe,KR),ar=V((0,ne.Z)({buffer:G(_t)},nr));ve[Xe.name||""]=ar,c.attributes[gt].vertexAttribute=ar}});var Pe=he({data:S,type:Rt.UNSIGNED_INT,count:S.length});return this.attributesAndIndices={attributes:ve,elements:Pe,count:y},this.attributesAndIndices}},{key:"createAttributes",value:function(r,o){var u=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var c=this.attributes.map(function(G){return G.resetDescriptor(),G.descriptor}),p=0,g=[],y=3;r.forEach(function(G,he){var ve=u.triangulation(G),Pe=ve.indices,Xe=ve.vertices,gt=ve.normals,_t=ve.size,zt=ve.indexes;Pe.forEach(function(Tr){g.push(Tr+p)}),y=_t;var Xt=Xe.length/_t;u.featureLayout.sizePerElement=y,u.featureLayout.elements.push({featureIdx:he,vertices:Xe,normals:gt,offset:p}),p+=Xt;for(var nr=function(Zr){var rn=(gt==null?void 0:gt.slice(Zr*3,Zr*3+3))||[],ln=Xe.slice(Zr*_t,Zr*_t+_t),Gn=0;zt&&zt[Zr]!==void 0&&(Gn=zt[Zr]),c.forEach(function(fi,Fi){if(fi&&fi.update){var uo;(uo=fi.buffer.data).push.apply(uo,(0,Rn.Z)(fi.update(G,he,ln,Zr,rn,Gn)))}})},ar=0;ar<Xt;ar++)nr(ar)});var S=this.rendererService,O=S.createAttribute,L=S.createBuffer,V={};return c.forEach(function(G,he){if(G){var ve=G.buffer,Pe=G.update,Xe=G.name,gt=(0,Sf.Z)(G,qR),_t=O((0,ne.Z)({buffer:L(ve)},gt));V[G.name||""]=_t,u.attributes[he].vertexAttribute=_t}}),{attributes:V}}},{key:"clearAllAttributes",value:function(){var r;this.attributes.forEach(function(o){o.vertexAttribute&&o.vertexAttribute.destroy()}),(r=this.attributesAndIndices)===null||r===void 0||r.elements.destroy(),this.attributes=[]}}]),e}(),Tx=Fa(Cx.prototype,"rendererService",[ZE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cx))||VE),Ax=k(34155);function Mx(e,a,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{S(o.next(O))}catch(L){p(L)}}function y(O){try{S(o.throw(O))}catch(L){p(L)}}function S(O){O.done?c(O.value):u(O.value).then(g,y)}S((o=o.apply(e,a||[])).next())})}function Rx(e,a){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(S){return function(O){return y([S,O])}}function y(S){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=S[0]&2?u.return:S[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,S[1])).done)return c;switch(u=0,c&&(S=[S[0]&2,c.value]),S[0]){case 0:case 1:c=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!c||S[1]>c[0]&&S[1]<c[3])){r.label=S[1];break}if(S[0]===6&&r.label<c[1]){r.label=c[1],c=S;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(S);break}c[2]&&r.ops.pop(),r.trys.pop();continue}S=a.call(e,r)}catch(O){S=[6,O],u=0}finally{o=c=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function Bm(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),u,c=[],p;try{for(;(a===void 0||a-- >0)&&!(u=o.next()).done;)c.push(u.value)}catch(g){p={error:g}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(p)throw p.error}}return c}function Ho(e,a,r){if(r||arguments.length===2)for(var o=0,u=a.length,c;o<u;o++)(c||!(o in a))&&(c||(c=Array.prototype.slice.call(a,0,o)),c[o]=a[o]);return e.concat(c||Array.prototype.slice.call(a))}function WE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gf={exports:{}},X0={exports:{}},Nm={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o){return o&&typeof o.length=="number"&&o.length>=0&&o.length%1===0}e.exports=a.default})(Nm,Nm.exports);var $f={},Ix={exports:{}},Fg={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(r){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];var c=o.pop();return r.call(this,o,c)}},e.exports=a.default})(Fg,Fg.exports);var ip={};Object.defineProperty(ip,"__esModule",{value:!0}),ip.fallback=__,ip.wrap=XE;var GE=ip.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,$E=ip.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,QR=ip.hasNextTick=typeof Ax=="object"&&typeof Ax.nextTick=="function";function __(e){setTimeout(e,0)}function XE(e){return function(a){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return e(function(){return a.apply(void 0,r)})}}var af;GE?af=queueMicrotask:$E?af=setImmediate:QR?af=Ax.nextTick:af=__,ip.default=XE(af),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var r=Fg.exports,o=g(r),u=ip,c=g(u),p=$f;function g(L){return L&&L.__esModule?L:{default:L}}function y(L){return(0,p.isAsync)(L)?function(){for(var V=[],G=arguments.length;G--;)V[G]=arguments[G];var he=V.pop(),ve=L.apply(this,V);return S(ve,he)}:(0,o.default)(function(V,G){var he;try{he=L.apply(this,V)}catch(ve){return G(ve)}if(he&&typeof he.then=="function")return S(he,G);G(null,he)})}function S(L,V){return L.then(function(G){O(V,null,G)},function(G){O(V,G&&G.message?G:new Error(G))})}function O(L,V,G){try{L(V,G)}catch(he){(0,c.default)(function(ve){throw ve},he)}}e.exports=a.default}(Ix,Ix.exports),Object.defineProperty($f,"__esModule",{value:!0}),$f.isAsyncIterable=$f.isAsyncGenerator=$f.isAsync=void 0;var JR=Ix.exports,e3=t3(JR);function t3(e){return e&&e.__esModule?e:{default:e}}function YE(e){return e[Symbol.toStringTag]==="AsyncFunction"}function r3(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function n3(e){return typeof e[Symbol.asyncIterator]=="function"}function i3(e){if(typeof e!="function")throw new Error("expected a function");return YE(e)?(0,e3.default)(e):e}$f.default=i3,$f.isAsync=YE,$f.isAsyncGenerator=r3,$f.isAsyncIterable=n3;var Bg={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o,u){if(u===void 0&&(u=o.length),!u)throw new Error("arity is undefined");function c(){for(var p=this,g=[],y=arguments.length;y--;)g[y]=arguments[y];return typeof g[u-1]=="function"?o.apply(this,g):new Promise(function(S,O){g[u-1]=function(L){for(var V=[],G=arguments.length-1;G-- >0;)V[G]=arguments[G+1];if(L)return O(L);S(V.length>1?V:V[0])},o.apply(p,g)})}return c}e.exports=a.default})(Bg,Bg.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=Nm.exports,o=y(r),u=$f,c=y(u),p=Bg.exports,g=y(p);function y(S){return S&&S.__esModule?S:{default:S}}a.default=(0,g.default)(function(S,O,L){var V=(0,o.default)(O)?[]:{};S(O,function(G,he,ve){(0,c.default)(G)(function(Pe){for(var Xe,gt=[],_t=arguments.length-1;_t-- >0;)gt[_t]=arguments[_t+1];gt.length<2&&(Xe=gt,gt=Xe[0]),V[he]=gt,ve(Pe)})},function(G){return L(G,V)})},3),e.exports=a.default}(X0,X0.exports);var Px={exports:{}},x_={exports:{}},zm={exports:{}},Um={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o){function u(){for(var c=[],p=arguments.length;p--;)c[p]=arguments[p];if(o!==null){var g=o;o=null,g.apply(this,c)}}return Object.assign(u,o),u}e.exports=a.default})(Um,Um.exports);var Ox={exports:{}},kx={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()},e.exports=a.default})(kx,kx.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=O;var r=Nm.exports,o=p(r),u=kx.exports,c=p(u);function p(L){return L&&L.__esModule?L:{default:L}}function g(L){var V=-1,G=L.length;return function(){return++V<G?{value:L[V],key:V}:null}}function y(L){var V=-1;return function(){var he=L.next();return he.done?null:(V++,{value:he.value,key:V})}}function S(L){var V=L?Object.keys(L):[],G=-1,he=V.length;return function ve(){var Pe=V[++G];return Pe==="__proto__"?ve():G<he?{value:L[Pe],key:Pe}:null}}function O(L){if((0,o.default)(L))return g(L);var V=(0,c.default)(L);return V?y(V):S(L)}e.exports=a.default}(Ox,Ox.exports);var Y0={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;function r(o){return function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(o===null)throw new Error("Callback was already called.");var p=o;o=null,p.apply(this,u)}}e.exports=a.default})(Y0,Y0.exports);var Dx={exports:{}},K0={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r={};a.default=r,e.exports=a.default})(K0,K0.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var r=K0.exports,o=u(r);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g,y,S){var O=!1,L=!1,V=!1,G=0,he=0;function ve(){G>=g||V||O||(V=!0,p.next().then(function(gt){var _t=gt.value,zt=gt.done;if(!(L||O)){if(V=!1,zt){O=!0,G<=0&&S(null);return}G++,y(_t,he,Pe),he++,ve()}}).catch(Xe))}function Pe(gt,_t){if(G-=1,!L){if(gt)return Xe(gt);if(gt===!1){O=!0,L=!0;return}if(_t===o.default||O&&G<=0)return O=!0,S(null);ve()}}function Xe(gt){L||(V=!1,O=!0,S(gt))}ve()}e.exports=a.default}(Dx,Dx.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=Um.exports,o=G(r),u=Ox.exports,c=G(u),p=Y0.exports,g=G(p),y=$f,S=Dx.exports,O=G(S),L=K0.exports,V=G(L);function G(he){return he&&he.__esModule?he:{default:he}}a.default=function(he){return function(ve,Pe,Xe){if(Xe=(0,o.default)(Xe),he<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!ve)return Xe(null);if((0,y.isAsyncGenerator)(ve))return(0,O.default)(ve,he,Pe,Xe);if((0,y.isAsyncIterable)(ve))return(0,O.default)(ve[Symbol.asyncIterator](),he,Pe,Xe);var gt=(0,c.default)(ve),_t=!1,zt=!1,Xt=0,nr=!1;function ar(Zr,rn){if(!zt)if(Xt-=1,Zr)_t=!0,Xe(Zr);else if(Zr===!1)_t=!0,zt=!0;else{if(rn===V.default||_t&&Xt<=0)return _t=!0,Xe(null);nr||Tr()}}function Tr(){for(nr=!0;Xt<he&&!_t;){var Zr=gt();if(Zr===null){_t=!0,Xt<=0&&Xe(null);return}Xt+=1,Pe(Zr.value,Zr.key,(0,g.default)(ar))}nr=!1}Tr()}},e.exports=a.default}(zm,zm.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=zm.exports,o=y(r),u=$f,c=y(u),p=Bg.exports,g=y(p);function y(O){return O&&O.__esModule?O:{default:O}}function S(O,L,V,G){return(0,o.default)(L)(O,(0,c.default)(V),G)}a.default=(0,g.default)(S,4),e.exports=a.default}(x_,x_.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=x_.exports,o=p(r),u=Bg.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S,O){return(0,o.default)(y,1,S,O)}a.default=(0,c.default)(g,3),e.exports=a.default}(Px,Px.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var r=X0.exports,o=p(r),u=Px.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S){return(0,o.default)(c.default,y,S)}e.exports=a.default}(Gf,Gf.exports);var b_=WE(Gf.exports),wd=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var a=arguments,r=[],o=0;o<arguments.length;o++)r[o]=a[o];return this.args=r,b_(this.tasks)},e.prototype.tap=function(a,r){var o=this;this.tasks.push(function(u){r.apply(void 0,Ho([],Bm(o.args),!1)),u(null,a)})},e}(),Lx={exports:{}},Fx={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=Nm.exports,o=Pe(r),u=K0.exports,c=Pe(u),p=x_.exports,g=Pe(p),y=Um.exports,S=Pe(y),O=Y0.exports,L=Pe(O),V=$f,G=Pe(V),he=Bg.exports,ve=Pe(he);function Pe(zt){return zt&&zt.__esModule?zt:{default:zt}}function Xe(zt,Xt,nr){nr=(0,S.default)(nr);var ar=0,Tr=0,Zr=zt.length,rn=!1;Zr===0&&nr(null);function ln(Gn,fi){Gn===!1&&(rn=!0),rn!==!0&&(Gn?nr(Gn):(++Tr===Zr||fi===c.default)&&nr(null))}for(;ar<Zr;ar++)Xt(zt[ar],ar,(0,L.default)(ln))}function gt(zt,Xt,nr){return(0,g.default)(zt,1/0,Xt,nr)}function _t(zt,Xt,nr){var ar=(0,o.default)(zt)?Xe:gt;return ar(zt,(0,G.default)(Xt),nr)}a.default=(0,ve.default)(_t,3),e.exports=a.default})(Fx,Fx.exports),function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var r=Fx.exports,o=p(r),u=X0.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,S){return(0,c.default)(o.default,y,S)}e.exports=a.default}(Lx,Lx.exports);var a3=WE(Lx.exports),aB=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return a3(this.tasks)},e.prototype.tapPromise=function(a,r){var o=this;this.tasks.push(function(u){return Mx(o,void 0,void 0,function(){return Rx(this,function(c){switch(c.label){case 0:return[4,r()];case 1:return c.sent(),u(null,a),[2]}})})})},e}(),KE={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var r=Um.exports,o=O(r),u=Y0.exports,c=O(u),p=$f,g=O(p),y=Bg.exports,S=O(y);function O(V){return V&&V.__esModule?V:{default:V}}function L(V,G){if(G=(0,o.default)(G),!Array.isArray(V))return G(new Error("First argument to waterfall must be an array of functions"));if(!V.length)return G();var he=0;function ve(Xe){var gt=(0,g.default)(V[he++]);gt.apply(void 0,Xe.concat([(0,c.default)(Pe)]))}function Pe(Xe){for(var gt=[],_t=arguments.length-1;_t-- >0;)gt[_t]=arguments[_t+1];if(Xe!==!1){if(Xe||he===V.length)return G.apply(void 0,[Xe].concat(gt));ve(gt)}}ve([])}a.default=(0,S.default)(L),e.exports=a.default})(KE,KE.exports);var qE=WE(KE.exports),oB=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return qE(this.tasks)},e.prototype.tap=function(a,r){this.tasks.length===0?this.tasks.push(function(o){var u=r();o(u?null:!1,u)}):this.tasks.push(function(o,u){var c=r.apply(void 0,Ho([],Bm(o),!1));u(c?null:!1,a)})},e}(),QE=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return b_(this.tasks)},e.prototype.tap=function(a,r){this.tasks.push(function(o){var u=r();o(u,a)})},e}(),JE=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var a=arguments,r=[],o=0;o<arguments.length;o++)r[o]=a[o];return this.args=r,b_(this.tasks)},e.prototype.tapPromise=function(a,r){var o=this;this.tasks.push(function(u){return Mx(o,void 0,void 0,function(){return Rx(this,function(c){switch(c.label){case 0:return[4,r.apply(void 0,Ho([],Bm(this.args),!1))];case 1:return c.sent(),u(null,a),[2]}})})})},e}(),o3=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var a=arguments,r=[],o=0;o<arguments.length;o++)r[o]=a[o];return this.args=r,b_(this.tasks)},e.prototype.tapPromise=function(a,r){var o=this;this.tasks.push(function(u){return Mx(o,void 0,void 0,function(){var c;return Rx(this,function(p){switch(p.label){case 0:return[4,r.apply(void 0,Ho([],Bm(this.args),!1))];case 1:return c=p.sent(),u(c,a),[2]}})})})},e}(),s3=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return qE(this.tasks)},e.prototype.tapPromise=function(a,r){this.tasks.length===0?this.tasks.push(function(o){r().then(function(u){o(null,u)})}):this.tasks.push(function(o,u){r(o).then(function(c){u(null,c)})})},e}(),e2=k(67709),u3=k.n(e2),t2,r2,n2,i2,Bx,a2,o2,s2,u2,l2,c2,f2,h2,p2,Nx,d2,v2,g2,gc,m2,y2,_2,x2,b2,S2,E2,S_,w2,q0,zx,l3,c3,C2,T2,f3;function sB(e){var a=h3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function h3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var p3=(t2=(0,mt.b2)(),r2=(0,mt.f3)(Ct.SceneID),n2=(0,mt.f3)(Ct.IIconService),i2=(0,mt.f3)(Ct.IFontService),Bx=(0,mt.f3)(Ct.IControlService),a2=(0,mt.f3)(Ct.IGlobalConfigService),o2=(0,mt.f3)(Ct.IMapService),s2=(0,mt.f3)(Ct.ICoordinateSystemService),u2=(0,mt.f3)(Ct.IRendererService),l2=(0,mt.f3)(Ct.ILayerService),c2=(0,mt.f3)(Ct.IDebugService),f2=(0,mt.f3)(Ct.ICameraService),h2=(0,mt.f3)(Ct.IInteractionService),p2=(0,mt.f3)(Ct.IPickingService),Nx=(0,mt.f3)(Ct.IShaderModuleService),d2=(0,mt.f3)(Ct.IMarkerService),v2=(0,mt.f3)(Ct.IPopupService),t2(g2=(gc=function(e){(0,yr.Z)(r,e);var a=sB(r);function r(){var o;return(0,Ot.Z)(this,r),o=a.call(this),(0,He.Z)((0,wr.Z)(o),"destroyed",!1),(0,He.Z)((0,wr.Z)(o),"loaded",!1),na((0,wr.Z)(o),"id",m2,(0,wr.Z)(o)),na((0,wr.Z)(o),"iconService",y2,(0,wr.Z)(o)),na((0,wr.Z)(o),"fontService",_2,(0,wr.Z)(o)),na((0,wr.Z)(o),"controlService",x2,(0,wr.Z)(o)),na((0,wr.Z)(o),"configService",b2,(0,wr.Z)(o)),na((0,wr.Z)(o),"map",S2,(0,wr.Z)(o)),na((0,wr.Z)(o),"coordinateSystemService",E2,(0,wr.Z)(o)),na((0,wr.Z)(o),"rendererService",S_,(0,wr.Z)(o)),na((0,wr.Z)(o),"layerService",w2,(0,wr.Z)(o)),na((0,wr.Z)(o),"debugService",q0,(0,wr.Z)(o)),na((0,wr.Z)(o),"cameraService",zx,(0,wr.Z)(o)),na((0,wr.Z)(o),"interactionService",l3,(0,wr.Z)(o)),na((0,wr.Z)(o),"pickingService",c3,(0,wr.Z)(o)),na((0,wr.Z)(o),"shaderModuleService",C2,(0,wr.Z)(o)),na((0,wr.Z)(o),"markerService",T2,(0,wr.Z)(o)),na((0,wr.Z)(o),"popupService",f3,(0,wr.Z)(o)),(0,He.Z)((0,wr.Z)(o),"inited",!1),(0,He.Z)((0,wr.Z)(o),"initPromise",void 0),(0,He.Z)((0,wr.Z)(o),"rendering",!1),(0,He.Z)((0,wr.Z)(o),"$container",void 0),(0,He.Z)((0,wr.Z)(o),"canvas",void 0),(0,He.Z)((0,wr.Z)(o),"markerContainer",void 0),(0,He.Z)((0,wr.Z)(o),"hooks",void 0),(0,He.Z)((0,wr.Z)(o),"handleWindowResized",function(){o.emit("resize"),o.$container&&(o.initContainer(),Pf(),o.coordinateSystemService.needRefresh=!0,o.render())}),(0,He.Z)((0,wr.Z)(o),"handleMapCameraChanged",function(u){o.cameraService.update(u),o.render()}),o.hooks={init:new JE},o}return(0,ot.Z)(r,[{key:"init",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Sn.Z)(er().mark(function p(){return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c.debugService.log("map.mapInitStart",{type:c.map.version}),y.next=3,new Promise(function(S){c.map.onCameraChanged(function(O){c.cameraService.init(),c.cameraService.update(O),S()}),c.map.init()});case 3:c.map.onCameraChanged(c.handleMapCameraChanged),c.map.addMarkerContainer(),c.markerService.addMarkers(),c.markerService.addMarkerLayers(),c.popupService.initPopup(),c.interactionService.init(),c.interactionService.on(jl.Drag,c.addSceneEvent.bind(c));case 10:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,Sn.Z)(er().mark(function p(){var g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(y=((g=c.map)===null||g===void 0?void 0:g.getOverlayContainer())||void 0,y?c.$container=y:c.$container=h_(c.configService.getSceneConfig(c.id).id||""),!c.$container){L.next=13;break}return c.canvas=Zs("canvas","",c.$container),c.setCanvas(),L.next=7,c.rendererService.init(c.canvas,c.configService.getSceneConfig(c.id),u.gl);case 7:c.registerContextLost(),c.initContainer(),u3()(c.$container,c.handleWindowResized),window.matchMedia&&((S=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||S===void 0||S.addListener(c.handleWindowResized)),L.next=14;break;case 13:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 14:c.pickingService.init(c.id);case 15:case"end":return L.stop()}},p)}))),this.render()}},{key:"registerContextLost",value:function(){var u=this,c=this.rendererService.getCanvas();c&&c.addEventListener("webglcontextlost",function(){return u.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Sn.Z)(er().mark(function p(){return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,new Promise(function(S){c.map.onCameraChanged(function(O){c.cameraService.init(),c.cameraService.update(O),c.map.version!=="GAODE2.x"&&S()}),c.map.initMiniMap()});case 2:c.map.onCameraChanged(c.handleMapCameraChanged),c.interactionService.init(),c.interactionService.on(jl.Drag,c.addSceneEvent.bind(c));case 5:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,Sn.Z)(er().mark(function p(){var g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(g=u.canvas,c.$container=g||null,!c.$container){S.next=7;break}return S.next=5,c.rendererService.init(u.canvas,c.configService.getSceneConfig(c.id),void 0);case 5:S.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:c.pickingService.init(c.id);case 9:case"end":return S.stop()}},p)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(u){this.layerService.sceneService=this,this.layerService.add(u)}},{key:"addMask",value:function(u){this.layerService.sceneService=this,this.layerService.addMask(u)}},{key:"render",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.rendering||this.destroyed)){g.next=2;break}return g.abrupt("return");case 2:if(this.rendering=!0,this.inited){g.next=16;break}return g.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),g.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,g.next=20;break;case 16:return g.next=18,this.layerService.initLayers();case 18:return g.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addFontFace",value:function(u,c){this.fontService.addFontFace(u,c)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return y=(g=this.$container)===null||g===void 0?void 0:g.getElementsByTagName("canvas")[0],L.next=3,this.render();case 3:return S=p==="jpg"?y==null?void 0:y.toDataURL("image/jpeg"):y==null?void 0:y.toDataURL("image/png"),L.abrupt("return",S);case 5:case"end":return L.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var u=this.$container.parentElement;u!==null&&(this.markerContainer=Zs("div","l7-marker-container",u))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var u=this,c;if(!this.inited){this.destroyed=!0;return}if((0,e2.unbind)(this.$container,this.handleWindowResized),window.matchMedia){var p;(p=window.matchMedia("screen and (min-resolution: 2dppx)"))===null||p===void 0||p.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var g;(g=u.$container)===null||g===void 0||g.removeChild(u.canvas),u.canvas=null,u.rendererService.destroy()}),(c=this.$container)===null||c===void 0||(c=c.parentNode)===null||c===void 0||c.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var u,c,p=Os,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,S=this.canvas;S&&(S.width=g*p,S.height=y*p),this.rendererService.viewport({x:0,y:0,width:p*g,height:p*y})}},{key:"setCanvas",value:function(){var u,c,p=Os,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,S=this.canvas;S.width=g*p,S.height=y*p,S.style.width="100%",S.style.height="100%"}},{key:"addSceneEvent",value:function(u){this.emit(u.type,u)}}]),r}(Ys.EventEmitter),m2=Fa(gc.prototype,"id",[r2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y2=Fa(gc.prototype,"iconService",[n2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_2=Fa(gc.prototype,"fontService",[i2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x2=Fa(gc.prototype,"controlService",[Bx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b2=Fa(gc.prototype,"configService",[a2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S2=Fa(gc.prototype,"map",[o2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E2=Fa(gc.prototype,"coordinateSystemService",[s2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S_=Fa(gc.prototype,"rendererService",[u2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w2=Fa(gc.prototype,"layerService",[l2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q0=Fa(gc.prototype,"debugService",[c2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zx=Fa(gc.prototype,"cameraService",[f2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l3=Fa(gc.prototype,"interactionService",[h2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c3=Fa(gc.prototype,"pickingService",[p2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C2=Fa(gc.prototype,"shaderModuleService",[Nx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T2=Fa(gc.prototype,"markerService",[d2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f3=Fa(gc.prototype,"popupService",[v2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gc))||g2);function v3(e){var a=0;switch(e){case"vec2":case"ivec2":a=2;break;case"vec3":case"ivec3":a=3;break;case"vec4":case"ivec4":case"mat2":a=4;break;case"mat3":a=9;break;case"mat4":a=16;break;default:}return a}var A2=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function E_(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r={};return e=e.replace(A2,function(o,u,c){var p=c.split(":"),g=p[0].trim(),y="";switch(p.length>1&&(y=p[1].trim()),u){case"bool":y=y==="true";break;case"float":case"int":y=Number(y);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":y?y=y.replace("[","").replace("]","").split(",").reduce(function(S,O){return S.push(Number(O.trim())),S},[]):y=new Array(v3(u)).fill(0);break;default:}return r[g]=y,"".concat(a?"uniform ":"").concat(u," ").concat(g,`;
`)}),{content:e,uniforms:r}}function Q0(e){var a=E_(e,!0),r=a.content,o=a.uniforms;return r=r.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,function(u,c,p){p=p.trim().replace(/^.*$/gm,function(O){return"uniform ".concat(O)});var g=E_(p),y=g.content,S=g.uniforms;return Object.assign(o,S),"".concat(c,`{
`).concat(y,`
};`)}),{content:r,uniforms:o}}function Ux(e){var a={};return e.replace(A2,function(r,o,u){var c=u.trim();return a[c]?"":(a[c]=!0,"uniform ".concat(o," ").concat(c,`;
`))})}var Zx,M2,R2=Ca.uniq,Zm="#define PI 3.14159265359",g3=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,m3=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,y3=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_EnableSelect;
  float u_activeMix;
};`,_3=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,x3=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,Vx=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,b3=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,S3=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,I2=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,E3=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,P2=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,O2=/precision\s+(high|low|medium)p\s+float/,w_=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,uB=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,lB=/void\s+main\s*\([^)]*\)\s*\{\n?/,cB=/}\n?[^{}]*$/,w3=(Zx=(0,mt.b2)(),Zx(M2=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"moduleCache",{}),(0,He.Z)(this,"rawContentCache",{})}return(0,ot.Z)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:Zm,fs:Zm}),this.registerModule("decode",{vs:g3,fs:""}),this.registerModule("scene_uniforms",{vs:m3,fs:m3}),this.registerModule("picking_uniforms",{vs:y3,fs:y3}),this.registerModule("projection",{vs:I2,fs:I2}),this.registerModule("project",{vs:S3,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:P2}),this.registerModule("lighting",{vs:x3,fs:""}),this.registerModule("light",{vs:_3,fs:""}),this.registerModule("picking",{vs:b3,fs:Vx}),this.registerModule("rotation_2d",{vs:E3,fs:""})}},{key:"registerModule",value:function(r,o){o.vs=o.vs.replace(/\r\n/g,`
`),o.fs=o.fs.replace(/\r\n/g,`
`);var u=o.vs,c=o.fs,p=o.uniforms,g=o.inject,y=Q0(u),S=y.content,O=y.uniforms,L=Q0(c),V=L.content,G=L.uniforms;this.rawContentCache[r]={fs:V,inject:g,uniforms:(0,ne.Z)((0,ne.Z)((0,ne.Z)({},O),G),p),vs:S}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(r){var o=this,u=this.rawContentCache[r].vs,c=this.rawContentCache[r].fs,p=this.rawContentCache[r].inject,g={};p!=null&&p["vs:#decl"]&&(u=(p==null?void 0:p["vs:#decl"])+u,g=Q0(p==null?void 0:p["vs:#decl"]).uniforms),p!=null&&p["vs:#main-start"]&&(u=u.replace(lB,function(Xe){return Xe+(p==null?void 0:p["vs:#main-start"])})),p!=null&&p["fs:#decl"]&&(c=(p==null?void 0:p["fs:#decl"])+c);var y=this.processModule(u,[],"vs"),S=y.content,O=y.includeList,L=this.processModule(c,[],"fs"),V=L.content,G=L.includeList,he="",ve=R2(O.concat(G).concat(r)).reduce(function(Xe,gt){return(0,ne.Z)((0,ne.Z)({},Xe),o.rawContentCache[gt].uniforms)},(0,ne.Z)({},g));O2.test(V)||(he=he+w_),he=he+V;var Pe="";return O2.test(S)||(Pe=Pe+w_),Pe=Pe+S,this.moduleCache[r]={fs:he.trim(),uniforms:ve,vs:Pe.trim()},this.moduleCache[r]}},{key:"processModule",value:function(r,o,u){var c=this,p=r.replace(uB,function(g,y){var S=y.split(" "),O=S[0].replace(/"/g,"");if(o.indexOf(O)>-1)return"";var L=c.rawContentCache[O][u];o.push(O);var V=c.processModule(L,o,u),G=V.content;return G});return{content:p,includeList:o}}},{key:"injectDefines",value:function(r){var o=Object.keys(r).reduce(function(u,c){return u+"#define ".concat(c.toUpperCase()," ").concat(r[c],`;
`)},`
`);return o}}]),e}())||M2);function C3(e,a){for(;!Object.prototype.hasOwnProperty.call(e,a)&&(e=(0,Ft.Z)(e),e!==null););return e}function Ef(){return typeof Reflect!="undefined"&&Reflect.get?Ef=Reflect.get.bind():Ef=function(a,r,o){var u=C3(a,r);if(u){var c=Object.getOwnPropertyDescriptor(u,r);return c.get?c.get.call(arguments.length<3?a:o):c.value}},Ef.apply(this,arguments)}var J0=function(e){return e.Normal="normal",e.PostProcessing="post-processing",e}({}),k2,D2,Hx=(k2=(0,mt.b2)(),k2(D2=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"shaderModuleService",void 0),(0,He.Z)(this,"rendererService",void 0),(0,He.Z)(this,"cameraService",void 0),(0,He.Z)(this,"mapService",void 0),(0,He.Z)(this,"interactionService",void 0),(0,He.Z)(this,"layerService",void 0),(0,He.Z)(this,"config",void 0)}return(0,ot.Z)(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return J0.Normal}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(Ct.IRendererService),this.cameraService=r.getContainer().get(Ct.ICameraService),this.mapService=r.getContainer().get(Ct.IMapService),this.interactionService=r.getContainer().get(Ct.IInteractionService),this.layerService=r.getContainer().get(Ct.ILayerService),this.shaderModuleService=r.getContainer().get(Ct.IShaderModuleService)}},{key:"render",value:function(r){}}]),e}())||D2),T3,L2;function A3(e){var a=M3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function M3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fB=(T3=(0,mt.b2)(),T3(L2=function(e){(0,yr.Z)(r,e);var a=A3(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(u,c){Ef((0,Ft.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),r}(Hx))||L2),R3,F2,B2,ey,C_;function I3(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=P3(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function P3(e,a){if(e){if(typeof e=="string")return N2(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N2(e,a)}}function N2(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var T_=(R3=(0,mt.b2)(),F2=(0,mt.f3)(Ct.IPostProcessor),R3(B2=(ey=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"passes",[]),na(this,"postProcessor",C_,this),(0,He.Z)(this,"layer",void 0),(0,He.Z)(this,"renderFlag",void 0),(0,He.Z)(this,"width",0),(0,He.Z)(this,"height",0)}return(0,ot.Z)(e,[{key:"setLayer",value:function(r){this.layer=r}},{key:"setRenderFlag",value:function(r){this.renderFlag=r}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var a=(0,Sn.Z)(er().mark(function o(){var u,c,p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:u=I3(this.passes),y.prev=1,u.s();case 3:if((c=u.n()).done){y.next=9;break}return p=c.value,y.next=7,p.render(this.layer);case 7:y.next=3;break;case 9:y.next=14;break;case 11:y.prev=11,y.t0=y.catch(1),u.e(y.t0);case 14:return y.prev=14,u.f(),y.finish(14);case 17:return y.next=19,this.postProcessor.render(this.layer);case 19:case"end":return y.stop()}},o,this,[[1,11,14,17]])}));function r(){return a.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){(this.width!==r||this.height!==o)&&(this.postProcessor.resize(r,o),this.width=r,this.height=o)}},{key:"add",value:function(r,o){r.getType()===J0.PostProcessing?this.postProcessor.add(r,this.layer,o):(r.init(this.layer,o),this.passes.push(r))}},{key:"insert",value:function(r,o,u){r.init(this.layer,o),this.passes.splice(u,0,r)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),C_=Fa(ey.prototype,"postProcessor",[F2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ey))||B2),z2,U2;function O3(e){var a=k3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function k3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var D3=(z2=(0,mt.b2)(),z2(U2=function(e){(0,yr.Z)(r,e);var a=O3(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"pickingFBO",void 0),(0,He.Z)((0,wr.Z)(o),"layer",void 0),(0,He.Z)((0,wr.Z)(o),"width",0),(0,He.Z)((0,wr.Z)(o),"height",0),(0,He.Z)((0,wr.Z)(o),"alreadyInRendering",!1),(0,He.Z)((0,wr.Z)(o),"pickFromPickingFBO",function(g){var y=g.x,S=g.y,O=g.lngLat,L=g.type;if(!(!o.layer.isVisible()||!o.layer.needPick(L))){var V=o.rendererService,G=V.getViewportSize,he=V.readPixels,ve=V.useFramebuffer,Pe=G(),Xe=Pe.width,gt=Pe.height,_t=o.layer.getLayerConfig(),zt=_t.enableHighlight,Xt=_t.enableSelect,nr=y*Os,ar=S*Os;if(!(nr>Xe||nr<0||ar>gt||ar<0)){var Tr;ve(o.pickingFBO,function(){var Zr;if(Tr=he({x:Math.round(nr),y:Math.round(gt-(S+1)*Os),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:o.pickingFBO}),Tr[0]!==0||Tr[1]!==0||Tr[2]!==0){var rn=Xl(Tr),ln=o.layer.getSource().getFeatureById(rn),Gn={x:y,y:S,type:L,lngLat:O,featureId:rn,feature:ln};ln&&(o.layer.setCurrentPickId(rn),o.triggerHoverOnLayer(Gn))}else{var fi={x:y,y:S,lngLat:O,type:o.layer.getCurrentPickId()===null?"un"+L:"mouseout",featureId:null,feature:null};o.triggerHoverOnLayer((0,ne.Z)((0,ne.Z)({},fi),{},{type:"unpick"})),o.triggerHoverOnLayer(fi),o.layer.setCurrentPickId(null)}zt&&o.highlightPickedFeature(Tr),Xt&&L==="click"&&((Zr=Tr)===null||Zr===void 0?void 0:Zr.toString())!==[0,0,0,0].toString()&&o.selectFeature(Tr)})}}}),o}return(0,ot.Z)(r,[{key:"getType",value:function(){return J0.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(u,c){Ef((0,Ft.Z)(r.prototype),"init",this).call(this,u,c),this.layer=u;var p=this.rendererService,g=p.createTexture2D,y=p.createFramebuffer,S=p.getViewportSize,O=S(),L=O.width,V=O.height;this.pickingFBO=y({color:g({width:L,height:V,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})}),this.interactionService.on(jl.Hover,this.pickFromPickingFBO),this.interactionService.on(jl.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(jl.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(u){var c=this;if(!this.alreadyInRendering){var p=this.rendererService,g=p.getViewportSize,y=p.useFramebuffer,S=p.clear,O=g(),L=O.width,V=O.height;this.alreadyInRendering=!0,(this.width!==L||this.height!==V)&&(this.pickingFBO.resize({width:L,height:V}),this.width=L,this.height=V),y(this.pickingFBO,function(){S({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var G=c.layer.multiPassRenderer.getRenderFlag();c.layer.multiPassRenderer.setRenderFlag(!1),u.hooks.beforePickingEncode.call(),u.render(),u.hooks.afterPickingEncode.call(),c.layer.multiPassRenderer.setRenderFlag(G),c.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(u){this.layer.emit(u.type,u)}},{key:"highlightPickedFeature",value:function(u){var c=(0,ji.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeHighlight.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(u){var c=(0,ji.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeSelect.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(u){var c=u.featureId,p=bs(c);this.selectFeature(new Uint8Array(p))}},{key:"highlightFeatureHandle",value:function(u){var c=u.featureId,p=bs(c);this.highlightPickedFeature(new Uint8Array(p))}}]),r}(Hx))||U2),Z2,V2,H2,A_,jx,L3=Ca.camelCase,F3=Ca.isNil,j2=Ca.upperFirst,B3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,uv=(Z2=(0,mt.b2)(),V2=(0,mt.f3)(Ct.IShaderModuleService),Z2(H2=(A_=function(){function e(){(0,Ot.Z)(this,e),na(this,"shaderModuleService",jx,this),(0,He.Z)(this,"rendererService",void 0),(0,He.Z)(this,"config",void 0),(0,He.Z)(this,"quad",B3),(0,He.Z)(this,"enabled",!0),(0,He.Z)(this,"renderToScreen",!1),(0,He.Z)(this,"model",void 0),(0,He.Z)(this,"name",void 0),(0,He.Z)(this,"optionsToUpdate",{})}return(0,ot.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(r){this.name=r}},{key:"getType",value:function(){return J0.PostProcessing}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(Ct.IRendererService),this.shaderModuleService=r.getContainer().get(Ct.IShaderModuleService);var u=this.rendererService,c=u.createAttribute,p=u.createBuffer,g=u.createModel,y=this.setupShaders(),S=y.vs,O=y.fs,L=y.uniforms;this.model=g({vs:S,fs:O,attributes:{a_Position:c({buffer:p({data:[-4,-4,4,-4,0,4],type:Rt.FLOAT}),size:2})},uniforms:(0,ne.Z)((0,ne.Z)({u_Texture:null},L),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(r,o){var u=this,c=r.multiPassRenderer.getPostProcessor(),p=this.rendererService,g=p.useFramebuffer,y=p.getViewportSize,S=p.clear,O=y(),L=O.width,V=O.height;g(this.renderToScreen?null:c.getWriteFBO(),function(){S({framebuffer:c.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var G=(0,ne.Z)({u_BloomFinal:0,u_Texture:c.getReadFBO(),u_ViewportSize:[L,V]},u.convertOptionsToUniforms(u.optionsToUpdate));o&&(G.u_BloomFinal=1,G.u_Texture2=o),u.model.draw({uniforms:G})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(r){this.enabled=r}},{key:"setRenderToScreen",value:function(r){this.renderToScreen=r}},{key:"updateOptions",value:function(r){this.optionsToUpdate=(0,ne.Z)((0,ne.Z)({},this.optionsToUpdate),r)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(r){var o={};return Object.keys(r).forEach(function(u){F3(r[u])||(o["u_".concat(j2(L3(u)))]=r[u])}),o}}]),e}(),jx=Fa(A_.prototype,"shaderModuleService",[V2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A_))||H2),W2,G2;function M_(e){var a=N3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function N3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $2=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,z3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Wx=Ca.isNil,X2=(W2=(0,mt.b2)(),W2(G2=function(e){(0,yr.Z)(r,e);var a=M_(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:z3,fs:$2});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[S,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return Wx(u.bloomRadius)||(c.u_radius=u.bloomRadius),Wx(u.bloomIntensity)||(c.u_intensity=u.bloomIntensity),Wx(u.bloomBaseRadio)||(c.u_baseRadio=u.bloomBaseRadio),c}}]),r}(uv))||G2),Y2,K2;function q2(e){var a=Q2();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Q2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var U3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Z3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Gx=Ca.isNil,V3=(Y2=(0,mt.b2)(),Y2(K2=function(e){(0,yr.Z)(r,e);var a=q2(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Z3,fs:U3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[S,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return Gx(u.blurRadius)||(c.u_BlurDir=[u.blurRadius,0]),c}}]),r}(uv))||K2),$x,J2;function H3(e){var a=j3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function j3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var W3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,G3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ew=Ca.isNil,$3=($x=(0,mt.b2)(),$x(J2=function(e){(0,yr.Z)(r,e);var a=H3(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:G3,fs:W3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[S,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return ew(u.blurRadius)||(c.u_BlurDir=[0,u.blurRadius]),c}}]),r}(uv))||J2),tw,rw;function X3(e){var a=Y3();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Y3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,R_=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,iw=(tw=(0,mt.b2)(),tw(rw=function(e){(0,yr.Z)(r,e);var a=X3(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:R_,fs:nw});var u=this.shaderModuleService.getModule("colorhalftone-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[S,O]})}}}]),r}(uv))||rw),Xx,aw;function K3(e){var a=ow();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function ow(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var q3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Q3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,J3=(Xx=(0,mt.b2)(),Xx(aw=function(e){(0,yr.Z)(r,e);var a=K3(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Q3,fs:q3}),this.shaderModuleService.getModule("copy-pass")}}]),r}(uv))||aw),sw,uw;function eI(e){var a=Yx();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Yx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Kx=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,lw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,tI=(sw=(0,mt.b2)(),sw(uw=function(e){(0,yr.Z)(r,e);var a=eI(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:lw,fs:Kx});var u=this.shaderModuleService.getModule("hexagonalpixelate-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[S,O]})}}}]),r}(uv))||uw),qx,cw;function rI(e){var a=nI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function nI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var iI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,aI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,oI=(qx=(0,mt.b2)(),qx(cw=function(e){(0,yr.Z)(r,e);var a=rI(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:aI,fs:iI});var u=this.shaderModuleService.getModule("ink-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),S=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[S,O]})}}}]),r}(uv))||cw),fw,hw;function sI(e){var a=pw();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function pw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var uI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,dw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,lI=(fw=(0,mt.b2)(),fw(hw=function(e){(0,yr.Z)(r,e);var a=sI(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:dw,fs:uI}),this.shaderModuleService.getModule("noise-pass")}}]),r}(uv))||hw),vw,Qx;function cI(e){var a=gw();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function gw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Jx=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,hI=(vw=(0,mt.b2)(),vw(Qx=function(e){(0,yr.Z)(r,e);var a=cI(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:fI,fs:Jx}),this.shaderModuleService.getModule("sepia-pass")}}]),r}(uv))||Qx),ty,mw,yw,_w,Vm,xw,eb=(ty=(0,mt.b2)(),mw=(0,mt.f3)(Ct.IRendererService),yw=(0,mt.zY)(),ty(_w=(Vm=function(){function e(){(0,Ot.Z)(this,e),na(this,"rendererService",xw,this),(0,He.Z)(this,"passes",[]),(0,He.Z)(this,"readFBO",void 0),(0,He.Z)(this,"writeFBO",void 0)}return(0,ot.Z)(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var r=this.rendererService,o=r.getViewportSize,u=r.createTexture2D,c=o(),p=c.width,g=c.height;return u({x:0,y:0,width:p,height:g,copy:!0})}},{key:"getReadFBOTex",value:function(){var r=this,o=this.rendererService.useFramebuffer;return new Promise(function(u){o(r.readFBO,(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u(r.getCurrentFBOTex());case 1:case"end":return g.stop()}},c)})))})}},{key:"renderBloomPass",value:function(){var a=(0,Sn.Z)(er().mark(function o(u,c){var p,g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.getReadFBOTex();case 2:p=S.sent,g=0;case 4:if(!(g<4)){S.next=11;break}return S.next=7,c.render(u,p);case 7:this.swap(),g++,S.next=4;break;case 11:case"end":return S.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"render",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){var c,p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:c=0;case 1:if(!(c<this.passes.length)){y.next=15;break}if(p=this.passes[c],p.setRenderToScreen(this.isLastEnabledPass(c)),p.getName()!=="bloom"){y.next=9;break}return y.next=7,this.renderBloomPass(u,p);case 7:y.next=12;break;case 9:return y.next=11,p.render(u);case 11:c!==this.passes.length-1&&this.swap();case 12:c++,y.next=1;break;case 15:case"end":return y.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){this.readFBO.resize({width:r,height:o}),this.writeFBO.resize({width:r,height:o})}},{key:"add",value:function(r,o,u){r.init(o,u),this.passes.push(r)}},{key:"insert",value:function(r,o,u,c){r.init(u,c),this.passes.splice(o,0,r)}},{key:"getPostProcessingPassByName",value:function(r){return this.passes.find(function(o){return o.getName()===r})}},{key:"init",value:function(){var r=this.rendererService,o=r.createFramebuffer,u=r.createTexture2D;this.readFBO=o({color:u({width:1,height:1,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})}),this.writeFBO=o({color:u({width:1,height:1,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(r){for(var o=r+1;o<this.passes.length;o++)if(this.passes[o].isEnabled())return!1;return!0}},{key:"swap",value:function(){var r=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=r}}]),e}(),xw=Fa(Vm.prototype,"rendererService",[mw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa(Vm.prototype,"init",[yw],Object.getOwnPropertyDescriptor(Vm.prototype,"init"),Vm.prototype),Vm))||_w),bw,Sw;function pI(e){var a=dI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function dI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vI=(bw=(0,mt.b2)(),bw(Sw=function(e){(0,yr.Z)(r,e);var a=pI(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getType",value:function(){return J0.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(u,c){Ef((0,Ft.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(u){var c=this.rendererService,p=c.useFramebuffer,g=c.clear,y=u.multiPassRenderer.getPostProcessor().getReadFBO();p(y,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:y}),u.multiPassRenderer.setRenderFlag(!1),u.models.forEach(function(S){S.draw({uniforms:u.layerModel.getUninforms()})}),u.multiPassRenderer.setRenderFlag(!0)})}}]),r}(Hx))||Sw),Ew,ww,tb,I_,rb;function gI(e){var a=mI();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function mI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nb=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Cw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,yI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Cd(e,a){for(var r=0,o=1/a,u=e;u>0;)r=r+o*(u%a),u=Math.floor(u/a),o=o/a;return r}var ib=1,_I=(Ew=(0,mt.b2)(),ww=(0,mt.f3)(Ct.IShaderModuleService),Ew(tb=(I_=function(e){(0,yr.Z)(r,e);var a=gI(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),na((0,wr.Z)(o),"shaderModuleService",rb,(0,wr.Z)(o)),(0,He.Z)((0,wr.Z)(o),"haltonSequence",[]),(0,He.Z)((0,wr.Z)(o),"accumulatingId",0),(0,He.Z)((0,wr.Z)(o),"frame",0),(0,He.Z)((0,wr.Z)(o),"timer",void 0),(0,He.Z)((0,wr.Z)(o),"sampleRenderTarget",void 0),(0,He.Z)((0,wr.Z)(o),"prevRenderTarget",void 0),(0,He.Z)((0,wr.Z)(o),"outputRenderTarget",void 0),(0,He.Z)((0,wr.Z)(o),"copyRenderTarget",void 0),(0,He.Z)((0,wr.Z)(o),"blendModel",void 0),(0,He.Z)((0,wr.Z)(o),"outputModel",void 0),(0,He.Z)((0,wr.Z)(o),"copyModel",void 0),o}return(0,ot.Z)(r,[{key:"getType",value:function(){return J0.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(u,c){Ef((0,Ft.Z)(r.prototype),"init",this).call(this,u,c);var p=this.rendererService,g=p.createFramebuffer,y=p.createTexture2D;this.sampleRenderTarget=g({color:y({width:1,height:1,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})}),this.prevRenderTarget=g({color:y({width:1,height:1,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})}),this.outputRenderTarget=g({color:y({width:1,height:1,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})}),this.copyRenderTarget=g({color:y({width:1,height:1,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE})});for(var S=0;S<30;S++)this.haltonSequence.push([Cd(S,2),Cd(S,3)]);this.blendModel=this.createTriangleModel("blend-pass",nb),this.outputModel=this.createTriangleModel("copy-pass",Cw,{blend:{enable:!0,func:{srcRGB:Rt.ONE,dstRGB:Rt.ONE_MINUS_SRC_ALPHA,srcAlpha:Rt.ONE,dstAlpha:Rt.ONE_MINUS_SRC_ALPHA},equation:{rgb:Rt.FUNC_ADD,alpha:Rt.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Cw)}},{key:"render",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,S=p.useFramebuffer,O=y(),L=O.width,V=O.height;this.sampleRenderTarget.resize({width:L,height:V}),this.prevRenderTarget.resize({width:L,height:V}),this.outputRenderTarget.resize({width:L,height:V}),this.copyRenderTarget.resize({width:L,height:V}),this.resetFrame(),this.stopAccumulating();var G=u.multiPassRenderer.getPostProcessor().getReadFBO();S(G,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:G}),u.multiPassRenderer.setRenderFlag(!1),u.render(),u.multiPassRenderer.setRenderFlag(!0)});var he=function ve(Pe){!c.accumulatingId||Pe!==c.accumulatingId||c.isFinished()||(c.doRender(u),window.requestAnimationFrame(function(){ve(Pe)}))};this.accumulatingId=ib++,this.timer=window.setTimeout(function(){he(c.accumulatingId)},50)}},{key:"doRender",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,S=p.useFramebuffer,O=y(),L=O.width,V=O.height,G=u.getLayerConfig(),he=G.jitterScale,ve=he===void 0?1:he,Pe=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Pe[0]*2-1)/L*ve,(Pe[1]*2-1)/V*ve),u.multiPassRenderer.setRenderFlag(!1),u.hooks.beforeRender.call(),S(this.sampleRenderTarget,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c.sampleRenderTarget}),u.render()}),u.hooks.afterRender.call(),u.multiPassRenderer.setRenderFlag(!0);var Xe=u.getLayerConfig();S(this.outputRenderTarget,function(){c.blendModel.draw({uniforms:{u_opacity:Xe.opacity||1,u_MixRatio:c.frame===0?1:.9,u_Diffuse1:c.sampleRenderTarget,u_Diffuse2:c.frame===0?u.multiPassRenderer.getPostProcessor().getReadFBO():c.prevRenderTarget}})}),this.frame===0&&g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(S(this.copyRenderTarget,function(){c.outputModel.draw({uniforms:{u_Texture:c.outputRenderTarget}})}),S(u.multiPassRenderer.getPostProcessor().getReadFBO(),function(){c.copyModel.draw({uniforms:{u_Texture:c.copyRenderTarget}})}),u.multiPassRenderer.getPostProcessor().render(u));var gt=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=gt,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(u,c,p){this.shaderModuleService.registerModule(u,{vs:yI,fs:c});var g=this.shaderModuleService.getModule(u),y=g.vs,S=g.fs,O=g.uniforms,L=this.rendererService,V=L.createAttribute,G=L.createBuffer,he=L.createModel;return he((0,ne.Z)({vs:y,fs:S,attributes:{a_Position:V({buffer:G({data:[-4,-4,4,-4,0,4],type:Rt.FLOAT}),size:2})},uniforms:(0,ne.Z)({},O),depth:{enable:!1},count:3},p))}}]),r}(Hx),rb=Fa(I_.prototype,"shaderModuleService",[ww],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I_))||tb),ry=new mt.W2;ry.bind(Ct.IGlobalConfigService).to(tp).inSingletonScope(),(0,mt.GW)((0,mt.b2)(),Ys.EventEmitter),ry.bind(Ct.IEventEmitter).to(Ys.EventEmitter);var Tw=(0,ir.Z)(ry,!1),ab=function(a){var r=Tw.lazyInject(a);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},hB=function(a){var r=Tw.lazyMultiInject(a);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},Xf=ry,xI=0;function bI(){var e=new mt.W2;return e.parent=ry,e.bind(Ct.SceneID).toConstantValue("".concat(xI++)),e.bind(Ct.IShaderModuleService).to(w3).inSingletonScope(),e.bind(Ct.ILayerService).to($R).inSingletonScope(),e.bind(Ct.IDebugService).to(Pm).inSingletonScope(),e.bind(Ct.ISceneService).to(p3).inSingletonScope(),e.bind(Ct.ICameraService).to(mi).inSingletonScope(),e.bind(Ct.ICoordinateSystemService).to(bd).inSingletonScope(),e.bind(Ct.IInteractionService).to(c_).inSingletonScope(),e.bind(Ct.IPickingService).to(bx).inSingletonScope(),e.bind(Ct.IControlService).to(_u).inSingletonScope(),e.bind(Ct.IMarkerService).to(gl).inSingletonScope(),e.bind(Ct.IIconService).to(n_).inSingletonScope(),e.bind(Ct.IFontService).to(ym).inSingletonScope(),e.bind(Ct.IPopupService).to(Ka).inSingletonScope(),e.bind(Ct.INormalPass).to(fB).whenTargetNamed("clear"),e.bind(Ct.INormalPass).to(D3).whenTargetNamed("pixelPicking"),e.bind(Ct.INormalPass).to(vI).whenTargetNamed("render"),e.bind(Ct.INormalPass).to(_I).whenTargetNamed("taa"),e.bind(Ct.IFactoryNormalPass).toFactory(function(a){return function(r){return a.container.getNamed(Ct.INormalPass,r)}}),e.bind(Ct.IPostProcessingPass).to(J3).whenTargetNamed("copy"),e.bind(Ct.IPostProcessingPass).to(X2).whenTargetNamed("bloom"),e.bind(Ct.IPostProcessingPass).to(V3).whenTargetNamed("blurH"),e.bind(Ct.IPostProcessingPass).to($3).whenTargetNamed("blurV"),e.bind(Ct.IPostProcessingPass).to(lI).whenTargetNamed("noise"),e.bind(Ct.IPostProcessingPass).to(hI).whenTargetNamed("sepia"),e.bind(Ct.IPostProcessingPass).to(iw).whenTargetNamed("colorHalftone"),e.bind(Ct.IPostProcessingPass).to(tI).whenTargetNamed("hexagonalPixelate"),e.bind(Ct.IPostProcessingPass).to(oI).whenTargetNamed("ink"),e.bind(Ct.IFactoryPostProcessingPass).toFactory(function(a){return function(r){var o=a.container.getNamed(Ct.IPostProcessingPass,r);return o.setName(r),o}}),e}function ny(e){var a=new mt.W2;return a.parent=e,a.bind(Ct.IStyleAttributeService).to(jE).inSingletonScope(),a.bind(Ct.IMultiPassRenderer).to(T_).inSingletonScope(),a.bind(Ct.IPostProcessor).to(eb).inSingletonScope(),a}var SI=null;function pB(e){return SI.indexOf(e)}var Aw=Ca.clamp,Mw=2,dB=4,P_=64,ob=128,EI=256,wI=512,CI=8192,sb=16384,Rw=32768,Iw=null,lv=131072,TI=262144,AI=524288,vB=1048576,Qv=2097152,gB=4194304,Pw=8388608,Ow=16777216,MI=null;function O_(e,a){return e=Aw(Math.floor(e),0,255),a=Aw(Math.floor(a),0,255),256*e+a}function i8(e){var a=e.color,r=e.radius,o=e.tileX,u=e.tileY,c=e.shape,p=e.opacity,g=e.stroke,y=e.strokeWidth,S=e.strokeOpacity,O=[],L=[],V=[],G=[O_(a[0],a[1]),O_(a[2],a[3])],he=[O_(g[0],g[1]),O_(g[2],g[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(ve){var Pe=_slicedToArray(ve,2),Xe=Pe[0],gt=Pe[1];O.push([].concat(G,[(Xe+1)*Pw+(gt+1)*Qv+getShapeIndex(c)*lv+r,(o+512)*AI+(u+512)*P_])),L.push([].concat(he,[y,S])),V.push([p,0,0,0])}),{packedBuffer:O,packedBuffer2:L,packedBuffer3:V}}function RI(e,a){if(e===0&&!a)return 0;if(e===1&&a)return 4294967295;var r=a?1:0,o=Math.floor(e*127);return o*MI+r*Ow+o*lv+r*Iw+o*wI+r*EI+o*Mw+r}var Td={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},kl={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},zs=function(e){return e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging",e}({}),Hm=function(e){return e.CONSTANT="constant",e.VARIABLE="variable",e}({}),wa=function(e){return e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform",e}({}),jm=["mapload","mapchange","mapAfterFrameChange"],iy=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Bc=function(e){return e.IMAGE="image",e.CUSTOMIMAGE="customImage",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb",e.TERRAINRGB="terrainRGB",e.CUSTOMRGB="customRGB",e.CUSTOMARRAYBUFFER="customArrayBuffer",e.CUSTOMTERRAINRGB="customTerrainRGB",e}({}),II=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y,S){o({x:r.x,y:r.y,z:r.z},function(O,L){if(O||L.length===0){S(O);return}L&&cn([{data:L,bands:[0]}],u,c,function(V,G){V?S(V):G&&y(G)})})}));case 1:case"end":return g.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),PI=function(){var e=(0,Sn.Z)(er().mark(function a(r,o){return er().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(p,g){o({x:r.x,y:r.y,z:r.z},function(y,S){if(y||!S){g(y);return}S instanceof ArrayBuffer?lo(S,function(O,L){O&&g(O),p(L)}):S instanceof HTMLImageElement?p(S):g(y)})}));case 1:case"end":return c.stop()}},a)}));return function(r,o){return e.apply(this,arguments)}}();function OI(e,a){return Array.isArray(e)?typeof e[0]=="string"?e.map(function(r){return La(r,a)}):e.map(function(r){return{url:La(r.url,a),bands:r.bands||[0]}}):La(e,a)}function kI(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(function(a){return{url:a,bands:[0]}}):e}function kw(e,a){e.xhrCancel=function(){a.map(function(r){r.abort()})}}var DI=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c,p){var g,y,S,O,L,V;return er().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(g=kI(o.url),!(g.length>1)){he.next=15;break}return he.next=4,LI(g,o);case 4:if(y=he.sent,S=y.rasterFiles,O=y.xhrList,L=y.errList,kw(r,O),!(L.length>0)){he.next=12;break}return u(L,null),he.abrupt("return");case 12:cn(S,c,p,u),he.next=17;break;case 15:V=gs(o,function(ve,Pe){if(ve)u(ve);else if(Pe){var Xe=[{data:Pe,bands:g[0].bands}];cn(Xe,c,p,u)}}),kw(r,[V]);case 17:case"end":return he.stop()}},a)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function LI(e,a){return ub.apply(this,arguments)}function ub(){return ub=(0,Sn.Z)(er().mark(function e(a,r){var o,u,c,p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:o=[],u=[],c=[],p=0;case 4:if(!(p<a.length)){ve.next=20;break}return g=a[p],y=(0,ne.Z)((0,ne.Z)({},r),{},{url:g.url}),S=g.bands,ve.next=10,xa((0,ne.Z)((0,ne.Z)({},y),{},{type:"arrayBuffer"}));case 10:O=ve.sent,L=O.err,V=O.data,G=O.xhr,L&&c.push(L),u.push(G),o.push({data:V,bands:S});case 17:p++,ve.next=4;break;case 20:return ve.abrupt("return",{rasterFiles:o,xhrList:u,errList:c});case 21:case"end":return ve.stop()}},e)})),ub.apply(this,arguments)}var Dw=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c,p){var g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g={url:OI(r,o)},S.abrupt("return",new Promise(function(O,L){DI(u,g,function(V,G){V?L(V):G&&O(G)},c,p)}));case 2:case"end":return S.stop()}},a)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}(),Lw=function(){var e=(0,Sn.Z)(er().mark(function a(r,o,u,c){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return g=Array.isArray(r)?r[0]:r,c.wmtsOptions?(y=(c==null?void 0:c.getURLFromTemplate)||Aa,p=y(g,(0,ne.Z)((0,ne.Z)({},o),c.wmtsOptions))):(S=(c==null?void 0:c.getURLFromTemplate)||La,p=S(g,o)),L.abrupt("return",new Promise(function(V,G){var he,ve=ms({url:p,type:(c==null||(he=c.requestParameters)===null||he===void 0?void 0:he.type)||"arrayBuffer"},function(Pe,Xe){Pe?G(Pe):Xe&&V(Xe)},c.transformResponse);u.xhrCancel=function(){return ve.cancel()}}));case 3:case"end":return L.stop()}},a)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),Fw=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},FI={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},mB=[Bc.ARRAYBUFFER,Bc.RGB];function BI(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function lb(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(BI(e))throw new Error("tile server url is error");var r=(a==null?void 0:a.dataType)||Bc.IMAGE;r===Bc.RGB&&(r=Bc.ARRAYBUFFER);var o=function(p,g){switch(r){case Bc.IMAGE:return Lw(e,p,g,a);case Bc.CUSTOMIMAGE:case Bc.CUSTOMTERRAINRGB:return PI(g,a==null?void 0:a.getCustomData);case Bc.ARRAYBUFFER:return Dw(e,p,g,(a==null?void 0:a.format)||Fw,a==null?void 0:a.operation);case Bc.CUSTOMARRAYBUFFER:case Bc.CUSTOMRGB:return II(g,a==null?void 0:a.getCustomData,(a==null?void 0:a.format)||Fw,a==null?void 0:a.operation);default:return Lw(e,p,g,a)}},u=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},FI),a),{},{getTileData:o});return{data:e,dataArray:[],tilesetOptions:u,isTile:!0}}var Bw=["extent","min","max","width","height","format","operation"];function NI(e,a){var r=a.extent,o=a.min,u=a.max,c=a.width,p=a.height,g=a.format,y=a.operation,S=(0,Sf.Z)(a,Bw),O;if(g===void 0||Lp(e))O=Array.from(e);else{var L=Array.isArray(e)?e:[e];O=Hs(L,g,y)}var V={_id:1,dataArray:[(0,ne.Z)((0,ne.Z)({_id:1,data:O,width:c,height:p},S),{},{min:o,max:u,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return V}var cb={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},zI=function(){var e=(0,Sn.Z)(er().mark(function a(r){return er().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c){var p=(0,ji.Z)(r.bounds,4),g=p[0],y=p[1],S=p[2],O=p[3],L={layers:{testTile:{features:[{type:"Feature",properties:{key:r.x+"/"+r.y+"/"+r.z,x:(g+S)/2,y:(y+O)/2},geometry:{type:"LineString",coordinates:[[S,O],[S,y],[g,y],[g,y]]}}]}}};c(L)}));case 1:case"end":return u.stop()}},a)}));return function(r){return e.apply(this,arguments)}}();function UI(e,a){var r=function(c){return zI(c)},o=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},cb),a),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:o,isTile:!0}}var ZI=k(69848),VI=k.n(ZI);function Nw(e,a){var r=a.radius,o=r===void 0?40:r,u=a.maxZoom,c=u===void 0?18:u,p=a.minZoom,g=p===void 0?0:p,y=a.zoom,S=y===void 0?2:y;if(e.pointIndex){var O=e.pointIndex.getClusters(e.extent,Math.floor(S));return e.dataArray=fb(O),e}var L=new(VI())({radius:o,minZoom:g,maxZoom:c}),V={type:"FeatureCollection",features:[]};return V.features=e.dataArray.map(function(G){return{type:"Feature",geometry:{type:"Point",coordinates:G.coordinates},properties:(0,ne.Z)({},G)}}),L.load(V.features),L}function fb(e){return e.map(function(a,r){return(0,ne.Z)({coordinates:a.geometry.coordinates,_id:r+1},a.properties)})}function HI(e){if(e.length===0)throw new Error("max requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]>a&&(a=e[r]);return a}function jI(e){if(e.length===0)throw new Error("min requires at least one data point");for(var a=e[0],r=1;r<e.length;r++)e[r]<a&&(a=e[r]);return a}function zw(e){if(e.length===0)return 0;for(var a=e[0],r=0,o,u=1;u<e.length;u++)o=a+e[u]*1,Math.abs(a)>=Math.abs(e[u])?r+=a-o+e[u]:r+=e[u]-o+a,a=o;return a+r*1}function hb(e){if(e.length===0)throw new Error("mean requires at least one data point");return zw(e)/e.length}var WI={min:jI,max:HI,mean:hb,sum:zw};function GI(e){var a=ay();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function ay(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var oy=Ca.cloneDeep,k_=Ca.isFunction,Uw=Ca.isString,Ng=Ca.mergeWith;function cv(e,a){if(Array.isArray(a))return a}var $I=function(e){(0,yr.Z)(r,e);var a=GI(r);function r(o,u){var c;return(0,Ot.Z)(this,r),c=a.call(this),(0,He.Z)((0,wr.Z)(c),"type","source"),(0,He.Z)((0,wr.Z)(c),"isTile",!1),(0,He.Z)((0,wr.Z)(c),"inited",!1),(0,He.Z)((0,wr.Z)(c),"hooks",{init:new wd}),(0,He.Z)((0,wr.Z)(c),"parser",{type:"geojson"}),(0,He.Z)((0,wr.Z)(c),"transforms",[]),(0,He.Z)((0,wr.Z)(c),"cluster",!1),(0,He.Z)((0,wr.Z)(c),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,He.Z)((0,wr.Z)(c),"invalidExtent",!1),(0,He.Z)((0,wr.Z)(c),"dataArrayChanged",!1),(0,He.Z)((0,wr.Z)(c),"cfg",{autoRender:!0}),c.originData=o,c.initCfg(u),c.init().then(function(){c.inited=!0,c.emit("update",{type:"inited"})}),c}return(0,ot.Z)(r,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(u){return this.clusterIndex.getClusters(this.caculClusterExtent(2),u)}},{key:"getClustersLeaves",value:function(u){return this.clusterIndex.getLeaves(u,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(u){var c=this,p=this.clusterOptions,g=p.method,y=g===void 0?"sum":g,S=p.field,O=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(u));this.clusterOptions.zoom=u,O.forEach(function(L){L.id||(L.properties.point_count=1)}),(S||k_(y))&&(O=O.map(function(L){var V=L.id;if(V){var G=c.clusterIndex.getLeaves(V,1/0),he=G.map(function(Xe){return Xe.properties}),ve;if(Uw(y)&&S){var Pe=vm(he,S);ve=WI[y](Pe)}k_(y)&&(ve=y(he)),L.properties.stat=ve}else L.properties.point_count=1;return L})),this.data=Q("geojson")({type:"FeatureCollection",features:O}),this.executeTrans()}},{key:"getFeatureById",value:function(u){var c=this.parser,p=c.type,g=p===void 0?"geojson":p,y=c.geometry;if(g==="geojson"&&!this.cluster){var S=u<this.originData.features.length?this.originData.features[u]:"null",O=oy(S);if(O!=null&&O.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var L=this.data.dataArray.find(function(V){return V._id===u});O.properties=L}return O}else return g==="json"&&y?this.data.dataArray.find(function(V){return V._id===u}):u<this.data.dataArray.length?this.data.dataArray[u]:"null"}},{key:"updateFeaturePropertiesById",value:function(u,c){this.data.dataArray=this.data.dataArray.map(function(p){return p._id===u?(0,ne.Z)((0,ne.Z)({},p),c):p}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(u,c){var p=this.data.dataArray.find(function(g){return g[u]===c});return p==null?void 0:p._id}},{key:"setData",value:function(u,c){var p=this;this.originData=u,this.dataArrayChanged=!1,this.initCfg(c),this.init().then(function(){p.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var u;(u=this.tileset)===null||u===void 0||u.reloadAll()}},{key:"reloadTilebyId",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileById(u,c,p)}},{key:"reloadTileByLnglat",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileByLnglat(u,c,p)}},{key:"getTileExtent",value:function(u,c){var p;return(p=this.tileset)===null||p===void 0?void 0:p.getTileExtent(u,c)}},{key:"getTileByZXY",value:function(u,c,p){var g;return(g=this.tileset)===null||g===void 0?void 0:g.getTileByZXY(u,c,p)}},{key:"reloadTileByExtent",value:function(u,c){var p;(p=this.tileset)===null||p===void 0||p.reloadTileByExtent(u,c)}},{key:"destroy",value:function(){var u;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(u=this.tileset)===null||u===void 0||u.destroy()}},{key:"processData",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",new Promise(function(S,O){try{p.excuteParser(),p.initCluster(),p.executeTrans(),S({})}catch(L){O(L)}}));case 1:case"end":return y.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"initCfg",value:function(u){this.cfg=Ng(this.cfg,u,cv);var c=this.cfg;c&&(c.parser&&(this.parser=c.parser),c.transforms&&(this.transforms=c.transforms),this.cluster=c.cluster||!1,c.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,ne.Z)((0,ne.Z)({},this.clusterOptions),c.clusterOptions)))}},{key:"init",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.inited=!1,g.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"excuteParser",value:function(){var u=this.parser,c=u.type||"geojson",p=Q(c);this.data=p(this.originData,u),this.tileset=this.initTileset(),!u.cancelExtent&&(this.extent=hh(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(u){this.center=[(u[0]+u[2])/2,(u[1]+u[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var u=this.data.tilesetOptions;if(u){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(u),this.tileset;var c=new _o((0,ne.Z)({},u));return c}}},{key:"executeTrans",value:function(){var u=this,c=this.transforms;c.forEach(function(p){var g=p.type,y=te(g)(u.data,p);Object.assign(u.data,y)})}},{key:"initCluster",value:function(){if(this.cluster){var u=this.clusterOptions||{};this.clusterIndex=Nw(this.data,u)}}},{key:"caculClusterExtent",value:function(u){var c=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(c=Cu(Ac(this.extent),u)),c[0].concat(c[1])}}]),r}(Ys.EventEmitter);function pb(e,a){var r=a.callback;return r&&(e.dataArray=e.dataArray.filter(r)),e}function Zw(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=XI(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function XI(e,a){if(e){if(typeof e=="string")return Vw(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vw(e,a)}}function Vw(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var db=6378e3;function Ad(e,a){var r=e.dataArray,o=a.size,u=o===void 0?10:o,c=u/(2*Math.PI*db)*(256<<20)/2,p=YI(r,u),g=p.gridHash,y=p.gridOffset,S=QI(g,y,a);return{yOffset:c,xOffset:c,radius:c,type:"grid",dataArray:S}}function YI(e,a){var r=1/0,o=-1/0,u,c=Zw(e),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;u=g.coordinates[1],Number.isFinite(u)&&(r=u<r?u:r,o=u>o?u:o)}}catch(_t){c.e(_t)}finally{c.f()}var y=(r+o)/2,S=Hw(a,y);if(S.xOffset<=0||S.yOffset<=0)return{gridHash:{},gridOffset:S};var O={},L=Zw(e),V;try{for(L.s();!(V=L.n()).done;){var G=V.value,he=G.coordinates[1],ve=G.coordinates[0];if(Number.isFinite(he)&&Number.isFinite(ve)){var Pe=Math.floor((he+90)/S.yOffset),Xe=Math.floor((ve+180)/S.xOffset),gt="".concat(Pe,"-").concat(Xe);O[gt]=O[gt]||{count:0,points:[]},O[gt].count+=1,O[gt].points.push(G)}}}catch(_t){L.e(_t)}finally{L.f()}return{gridHash:O,gridOffset:S}}function Hw(e,a){var r=KI(e),o=qI(a,e);return{yOffset:r,xOffset:o}}function KI(e){return e/db*(180/Math.PI)}function qI(e,a){return a/db*(180/Math.PI)/Math.cos(e*Math.PI/180)}function QI(e,a,r){return Object.keys(e).reduce(function(o,u,c){var p=u.split("-"),g=parseInt(p[0],10),y=parseInt(p[1],10),S={};if(r.field&&r.method){var O=Gh(e[u].points,r.field);S[r.method]=Bf[r.method](O)}return Object.assign(S,{_id:c,coordinates:Ds([-180+a.xOffset*(y+.5),-90+a.yOffset*(g+.5)]),rawData:e[u].points,count:e[u].count}),o.push(S),o},[])}var Wm=Math.PI/3,JI=[0,Wm,2*Wm,3*Wm,4*Wm,5*Wm];function eP(e){return e[0]}function tP(e){return e[1]}function rP(){var e=0,a=0,r=1,o=1,u=eP,c=tP,p,g,y;function S(L){var V={},G=[],he,ve=L.length;for(he=0;he<ve;++he)if(!(isNaN(Xe=+u.call(null,Pe=L[he],he,L))||isNaN(gt=+c.call(null,Pe,he,L)))){var Pe,Xe,gt,_t=Math.round(gt=gt/y),zt=Math.round(Xe=Xe/g-(_t&1)/2),Xt=gt-_t;if(Math.abs(Xt)*3>1){var nr=Xe-zt,ar=zt+(Xe<zt?-1:1)/2,Tr=_t+(gt<_t?-1:1),Zr=Xe-ar,rn=gt-Tr;nr*nr+Xt*Xt>Zr*Zr+rn*rn&&(zt=ar+(_t&1?1:-1)/2,_t=Tr)}var ln=zt+"-"+_t,Gn=V[ln];Gn?Gn.push(Pe):(G.push(Gn=V[ln]=[Pe]),Gn.x=(zt+(_t&1)/2)*g,Gn.y=_t*y)}return G}function O(L){var V=0,G=0;return JI.map(function(he){var ve=Math.sin(he)*L,Pe=-Math.cos(he)*L,Xe=ve-V,gt=Pe-G;return V=ve,G=Pe,[Xe,gt]})}return S.hexagon=function(L){return"m"+O(L==null?p:+L).join("l")+"z"},S.centers=function(){for(var L=[],V=Math.round(a/y),G=Math.round(e/g),he=V*y;he<o+p;he+=y,++V)for(var ve=G*g+(V&1)*g/2;ve<r+g/2;ve+=g)L.push([ve,he]);return L},S.mesh=function(){var L=O(p).slice(0,4).join("l");return S.centers().map(function(V){return"M"+V+"m"+L}).join("")},S.x=function(L){return arguments.length?(u=L,S):u},S.y=function(L){return arguments.length?(c=L,S):c},S.radius=function(L){return arguments.length?(p=+L,g=p*2*Math.sin(Wm),y=p*1.5,S):p},S.size=function(L){return arguments.length?(e=a=0,r=+L[0],o=+L[1],S):[r-e,o-a]},S.extent=function(L){return arguments.length?(e=+L[0][0],a=+L[0][1],r=+L[1][0],o=+L[1][1],S):[[e,a],[r,o]]},S.radius(1)}var nP=6378e3;function zg(e,a){var r=e.dataArray,o=a.size,u=o===void 0?10:o,c=a.method,p=c===void 0?"sum":c,g=u/(2*Math.PI*nP)*(256<<20)/2,y=r.map(function(V){var G=Ds(V.coordinates),he=(0,ji.Z)(G,2),ve=he[0],Pe=he[1];return(0,ne.Z)((0,ne.Z)({},V),{},{coordinates:[ve,Pe]})}),S=rP().radius(g).x(function(V){return V.coordinates[0]}).y(function(V){return V.coordinates[1]}),O=S(y),L={dataArray:O.map(function(V,G){var he;if(a.field&&p){var ve=Gh(V,a.field);V[p]=Bf[p](ve)}return he={},(0,He.Z)(he,a.method,V[p]),(0,He.Z)(he,"count",V.length),(0,He.Z)(he,"rawData",V),(0,He.Z)(he,"coordinates",[V.x,V.y]),(0,He.Z)(he,"_id",G),he}),radius:g,xOffset:g,yOffset:g,type:"hexagon"};return L}function iP(e,a){var r=a.sourceField,o=a.targetField,u=a.data,c={};return u.forEach(function(p){c[p[r]]=p}),e.dataArray=e.dataArray.map(function(p){var g=p[o];return(0,ne.Z)((0,ne.Z)({},p),c[g])}),e}function aP(e,a){var r=a.callback;return r&&(e.dataArray=e.dataArray.map(r)),e}ie("rasterTile",lb),ie("mvt",Qs),ie("geojsonvt",ka),ie("testTile",UI),ie("geojson",gm),ie("jsonTile",Bu),ie("image",ga),ie("csv",P0),ie("json",yg),ie("raster",Xa),ie("rasterRgb",NI),we("cluster",Nw),we("filter",pb),we("join",iP),we("map",aP),we("grid",Ad),we("hexagon",zg);var sy=$I;function jw(e){var a=oP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function oP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Gm=function(e){(0,yr.Z)(r,e);var a=jw(r);function r(o){var u;return(0,Ot.Z)(this,r),u=a.call(this),(0,He.Z)((0,wr.Z)(u),"added",!1),(0,He.Z)((0,wr.Z)(u),"eventHandle",function(c){u.polyfillEvent(c),u.emit(c.type,{target:c,data:u.markerOption.extData,lngLat:u.lngLat})}),u.markerOption=(0,ne.Z)((0,ne.Z)({},u.getDefault()),o),wp(["update","onMove","onMapClick"],(0,wr.Z)(u)),u.init(),u}return(0,ot.Z)(r,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:ko.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(u){this.scene=u,this.mapsService=u.get(Ct.IMapService),this.sceneSerive=u.get(Ct.ISceneService);var c=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(c),this.registerMarkerEvent(c),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var u=this.markerOption.element;return u&&ic(u),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(u){return this.lngLat=u,Array.isArray(u)&&(this.lngLat={lng:u[0],lat:u[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(u){var c=this;if(!this.added)return this.once("added",function(){c.setElement(u)}),this;var p=this.markerOption.element;return p&&ic(p),this.markerOption.element=u,this.init(),this.mapsService.getMarkerContainer().appendChild(u),this.registerMarkerEvent(u),this.update(),this}},{key:"openPopup",value:function(){var u=this;if(!this.added)return this.once("added",function(){u.openPopup()}),this;var c=this.popup;return c?(c.isOpen()||c.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var u=this;this.added||this.once("added",function(){u.closePopup()});var c=this.popup;return c&&c.remove(),this}},{key:"setPopup",value:function(u){return this.popup=u,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var u=this.popup;if(u)u.isOpen()?u.remove():u.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(u){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(u){this.markerOption.extData=u}},{key:"update",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.anchor;this.updatePosition(),xp(c,"".concat(cr[p]))}}},{key:"onMapClick",value:function(u){var c=this.markerOption.element;this.popup&&c&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var u=this.mapsService.getContainer();return{containerHeight:(u==null?void 0:u.scrollHeight)||0,containerWidth:(u==null?void 0:u.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.offsets,g=this.lngLat,y=g.lng,S=g.lat,O=this.mapsService.lngLatToContainer([y,S]);if(c){c.style.display="block",c.style.whiteSpace="nowrap";var L=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),V=L.containerHeight,G=L.containerWidth,he=L.bounds;if(!he)return;if(Math.abs(he[0][0])>180||Math.abs(he[1][0])>180){if(O.x>G){var ve=this.mapsService.lngLatToContainer([y-360,S]);O.x=ve.x}if(O.x<0){var Pe=this.mapsService.lngLatToContainer([y+360,S]);O.x=Pe.x}}(O.x>G||O.x<0||O.y>V||O.y<0)&&(c.style.display="none"),c.style.left=O.x+p[0]+"px",c.style.top=O.y-p[1]+"px"}}}},{key:"init",value:function(){var u=this,c=this.markerOption.element,p=this.markerOption,g=p.color,y=p.anchor;if(!c){this.defaultMarker=!0,c=Zs("div"),this.markerOption.element=c;var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttributeNS(null,"display","block"),S.setAttributeNS(null,"height","48px"),S.setAttributeNS(null,"width","48px"),S.setAttributeNS(null,"viewBox","0 0 1024 1024");var O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),O.setAttributeNS(null,"fill",g),S.appendChild(O),c.appendChild(S)}el(c,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(L){var V,G,he=((V=u.markerOption)===null||V===void 0?void 0:V.style)&&((G=u.markerOption)===null||G===void 0?void 0:G.style[L]);c&&(c.style[L]=he)}),kt(c,y,"marker")}},{key:"registerMarkerEvent",value:function(u){u.addEventListener("click",this.onMapClick),u.addEventListener("mousemove",this.eventHandle),u.addEventListener("click",this.eventHandle),u.addEventListener("mousedown",this.eventHandle),u.addEventListener("mouseup",this.eventHandle),u.addEventListener("dblclick",this.eventHandle),u.addEventListener("contextmenu",this.eventHandle),u.addEventListener("mouseover",this.eventHandle),u.addEventListener("mouseout",this.eventHandle),u.addEventListener("touchstart",this.eventHandle),u.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var u=this.getElement();u.removeEventListener("click",this.onMapClick),u.removeEventListener("mousemove",this.eventHandle),u.removeEventListener("click",this.eventHandle),u.removeEventListener("mousedown",this.eventHandle),u.removeEventListener("mouseup",this.eventHandle),u.removeEventListener("dblclick",this.eventHandle),u.removeEventListener("contextmenu",this.eventHandle),u.removeEventListener("mouseover",this.eventHandle),u.removeEventListener("mouseout",this.eventHandle),u.removeEventListener("touchstart",this.eventHandle),u.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(u){!this.mapsService||this.mapsService.version!=="GAODE2.x"||Of()||(u.type==="touchstart"&&(this.touchStartTime=Date.now()),u.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:u,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(u){return null}},{key:"onUp",value:function(u){throw new Error("Method not implemented.")}}]),r}(Ys.EventEmitter);function $m(e){var a=sP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function sP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ww=Ca.merge,yB=null,_B=k(4157);function uP(e){var a=lP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function lP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Md=function(e){(0,yr.Z)(r,e);var a=uP(r);function r(o){var u;return(0,Ot.Z)(this,r),u=a.call(this),r.controlCount++,u.controlOption=(0,ne.Z)((0,ne.Z)({},u.getDefault(o)),o||{}),u}return(0,ot.Z)(r,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(u){var c=this.getDefault(u);Object.entries(u).forEach(function(p){var g=(0,ji.Z)(p,2),y=g[0],S=g[1];S===void 0&&(u[y]=c[y])}),"position"in u&&this.setPosition(u.position),"className"in u&&this.setClassName(u.className),"style"in u&&this.setStyle(u.style),this.controlOption=(0,ne.Z)((0,ne.Z)({},this.controlOption),u)}},{key:"addTo",value:function(u){this.mapsService=u.get(Ct.IMapService),this.renderService=u.get(Ct.IRendererService),this.layerService=u.get(Ct.ILayerService),this.controlService=u.get(Ct.IControlService),this.configService=u.get(Ct.IGlobalConfigService),this.scene=u.get(Ct.ISceneService),this.sceneContainer=u,this.isShow=!0,this.container=this.onAdd(),el(this.container,"l7-control");var c=this.controlOption,p=c.className,g=c.style;return p&&this.setClassName(p),g&&this.setStyle(g),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;ic(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return Zs("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var u=this.container;_p(u,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var u=this.container;el(u,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(u){return{position:mo.TOPRIGHT,name:"".concat(r.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(u){if(this.mapsService&&u&&u.screenX>0&&u.screenY>0){var c=this.mapsService.getContainer();c!==null&&c.focus()}}},{key:"setPosition",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mo.TOPLEFT,c=this.controlService;return c&&c.removeControl(this),this.controlOption.position=u,c&&c.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(u){var c=this.container,p=this.controlOption.className;p&&_p(c,p),u&&el(c,u)}},{key:"setStyle",value:function(u){var c=this.container;u?c.setAttribute("style",u):c.removeAttribute("style")}},{key:"insertContainer",value:function(){var u=this.controlOption.position,c=this.container;if(u instanceof Element)u.appendChild(c);else{var p=this.controlService.controlCorners[u];["bottomleft","bottomright","righttop","rightbottom"].includes(u)?p.insertBefore(c,p.firstChild):p.appendChild(c)}}},{key:"checkUpdateOption",value:function(u,c){return c.some(function(p){return p in u})}}]),r}(Ul());(0,He.Z)(Md,"controlCount",0);function vb(e){var a=cP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function cP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var xB=null;function Xm(e){var a=fP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function fP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hP=function(e){(0,yr.Z)(r,e);var a=Xm(r);function r(o,u){var c;return(0,Ot.Z)(this,r),c=a.call(this),(0,He.Z)((0,wr.Z)(c),"isShow",!1),(0,He.Z)((0,wr.Z)(c),"timeout",null),(0,He.Z)((0,wr.Z)(c),"show",function(){return c.isShow||!c.contentDOM.innerHTML||(c.resetPopperPosition(),_p(c.popperDOM,"l7-popper-hide"),c.isShow=!0,c.option.unique&&r.conflictPopperList.forEach(function(p){p!==(0,wr.Z)(c)&&p.isShow&&p.hide()}),c.emit("show"),window.addEventListener("pointerdown",c.onPopperUnClick)),(0,wr.Z)(c)}),(0,He.Z)((0,wr.Z)(c),"hide",function(){return c.isShow&&(el(c.popperDOM,"l7-popper-hide"),c.isShow=!1,c.emit("hide"),window.removeEventListener("pointerdown",c.onPopperUnClick)),(0,wr.Z)(c)}),(0,He.Z)((0,wr.Z)(c),"setHideTimeout",function(){c.timeout||(c.timeout=window.setTimeout(function(){c.isShow&&(c.hide(),c.timeout=null)},300))}),(0,He.Z)((0,wr.Z)(c),"clearHideTimeout",function(){c.timeout&&(window.clearTimeout(c.timeout),c.timeout=null)}),(0,He.Z)((0,wr.Z)(c),"onBtnClick",function(){c.isShow?c.hide():c.show()}),(0,He.Z)((0,wr.Z)(c),"onPopperUnClick",function(p){us(p.target,[".l7-button-control",".l7-popper-content"])||c.hide()}),(0,He.Z)((0,wr.Z)(c),"onBtnMouseLeave",function(){c.setHideTimeout()}),(0,He.Z)((0,wr.Z)(c),"onBtnMouseMove",function(){c.clearHideTimeout(),!c.isShow&&c.show()}),c.button=o,c.option=u,c.init(),u.unique&&r.conflictPopperList.push((0,wr.Z)(c)),c}return(0,ot.Z)(r,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(u){typeof u=="string"?this.contentDOM.innerHTML=u:u instanceof HTMLElement&&($c(this.contentDOM),this.contentDOM.appendChild(u)),this.content=u}},{key:"init",value:function(){var u=this.option.trigger;this.popperDOM=this.createPopper(),u==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),ic(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var u={},c=this.option,p=c.container,g=c.offset,y=g===void 0?[0,0]:g,S=c.placement,O=(0,ji.Z)(y,2),L=O[0],V=O[1],G=this.button.getBoundingClientRect(),he=p.getBoundingClientRect(),ve=Ep(G,he),Pe=ve.left,Xe=ve.right,gt=ve.top,_t=ve.bottom,zt=!1,Xt=!1;/^(left|right)/.test(S)?(S.includes("left")?u.right="".concat(G.width+Xe,"px"):S.includes("right")&&(u.left="".concat(G.width+Pe,"px")),S.includes("start")?u.top="".concat(gt,"px"):S.includes("end")?u.bottom="".concat(_t,"px"):(u.top="".concat(gt+G.height/2,"px"),Xt=!0,u.transform="translate(".concat(L,"px, calc(").concat(V,"px - 50%))"))):/^(top|bottom)/.test(S)&&(S.includes("top")?u.bottom="".concat(G.height+_t,"px"):S.includes("bottom")&&(u.top="".concat(G.height+gt,"px")),S.includes("start")?u.left="".concat(Pe,"px"):S.includes("end")?u.right="".concat(Xe,"px"):(u.left="".concat(Pe+G.width/2,"px"),zt=!0,u.transform="translate(calc(".concat(L,"px - 50%), ").concat(V,"px)"))),u.transform="translate(calc(".concat(L,"px - ").concat(zt?"50%":"0%","), calc(").concat(V,"px - ").concat(Xt?"50%":"0%",")");var nr=S.split("-");nr.length&&el(this.popperDOM,nr.map(function(ar){return"l7-popper-".concat(ar)}).join(" ")),bp(this.popperDOM,Sp(u))}},{key:"createPopper",value:function(){var u=this.option,c=u.container,p=u.className,g=p===void 0?"":p,y=u.content,S=Zs("div","l7-popper l7-popper-hide ".concat(g)),O=Zs("div","l7-popper-content"),L=Zs("div","l7-popper-arrow");return S.appendChild(O),S.appendChild(L),c.appendChild(S),this.popperDOM=S,this.contentDOM=O,y&&this.setContent(y),S}}]),r}(Ys.EventEmitter);(0,He.Z)(hP,"conflictPopperList",[]);function pP(e){var a=gb();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function gb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bB={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},SB=null;function EB(e){var a=mb();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function mb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Gw=function(e){return e.ActiveOptionClassName="l7-select-control-item-active",e.OptionValueAttrKey="data-option-value",e.OptionIndexAttrKey="data-option-index",e}(Gw||{}),wB=null,$w=function(a){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("l7-iconfont"),r.setAttribute("aria-hidden","true");var o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(a)),r.appendChild(o),r};function dP(e){var a=Xw();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Xw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CB=null;function Yw(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Kw(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Kw(e,a){if(e){if(typeof e=="string")return yb(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yb(e,a)}}function yb(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var qw=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Rd=function(){if(typeof document=="undefined")return!1;for(var e=qw[0],a={},r=0,o=qw;r<o.length;r++){var u=o[r],c=u==null?void 0:u[1];if(c in document){var p=Yw(u.entries()),g;try{for(p.s();!(g=p.n()).done;){var y=(0,ji.Z)(g.value,2),S=y[0],O=y[1];a[e[S]]=O}}catch(L){p.e(L)}finally{p.f()}return a}}return!1}(),D_={change:Rd.fullscreenchange,error:Rd.fullscreenerror},Mh={request:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,r=arguments.length>1?arguments[1]:void 0;return new Promise(function(o,u){var c=function g(){Mh.off("change",g),o()};Mh.on("change",c);var p=a[Rd.requestFullscreen](r);p instanceof Promise&&p.then(c).catch(u)})},exit:function(){return new Promise(function(a,r){if(!Mh.isFullscreen){a();return}var o=function c(){Mh.off("change",c),a()};Mh.on("change",o);var u=document[Rd.exitFullscreen]();u instanceof Promise&&u.then(o).catch(r)})},toggle:function(a,r){return Mh.isFullscreen?Mh.exit():Mh.request(a,r)},onchange:function(a){Mh.on("change",a)},onerror:function(a){Mh.on("error",a)},on:function(a,r){var o=D_[a];o&&document.addEventListener(o,r,!1)},off:function(a,r){var o=D_[a];o&&document.removeEventListener(o,r,!1)},raw:Rd};Object.defineProperties(Mh,{isFullscreen:{get:function(){return!!document[Rd.fullscreenElement]}},element:{enumerable:!0,get:function(){var a;return(a=document[Rd.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:function(){return!!document[Rd.fullscreenEnabled]}}}),Rd||(Mh={isEnabled:!1});var TB=null;function vP(e){var a=_b();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function _b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var gP=null;function AB(e){var a=mP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function mP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var MB=null;function Qw(e){var a=yP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function yP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _P(e){return Object.keys(e!=null?e:{}).every(function(a){return["layer","name","img"].includes(a)})}var RB=null;function Jw(e){var a=xP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function xP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bP=function(e){(0,yr.Z)(r,e);var a=Jw(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getDefault",value:function(){return{position:mo.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var u=Zs("div","l7-control-logo");return this.setLogoContent(u),u}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(u){Ef((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["img","href"])&&($c(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(u){var c=this.controlOption,p=c.href,g=c.img,y=Zs("img");if(y.setAttribute("src",g),y.setAttribute("aria-label","AntV logo"),Vd(y),p){var S=Zs("a","l7-control-logo-link");S.target="_blank",S.href=p,S.rel="noopener nofollow",S.setAttribute("rel","noopener nofollow"),S.appendChild(y),u.appendChild(S)}else u.appendChild(y)}}]),r}(Md),IB={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},SP={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function PB(e){var a=EP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function EP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var OB=null;function kB(e){var a=wP();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function wP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var DB=null;function eC(e){var a=Yf();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Yf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CP=function(e){(0,yr.Z)(r,e);var a=eC(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"update",function(){var g=o.mapsService,y=o.controlOption.maxWidth,S=g.getSize()[1]/2,O=g.containerToLngLat([0,S]),L=g.containerToLngLat([y,S]),V=Vh([O.lng,O.lat],[L.lng,L.lat]);o.updateScales(V)}),o}return(0,ot.Z)(r,[{key:"getDefault",value:function(u){return(0,ne.Z)((0,ne.Z)({},Ef((0,Ft.Z)(r.prototype),"getDefault",this).call(this,u)),{},{name:"scale",position:mo.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var u="l7-control-scale",c=Zs("div",u);this.resetScaleLines(c);var p=this.controlOption.updateWhenIdle;return this.mapsService.on(p?"moveend":"mapmove",this.update),this.mapsService.on(p?"zoomend":"zoomchange",this.update),c}},{key:"onRemove",value:function(){var u=this.controlOption.updateWhenIdle;this.mapsService.off(u?"zoomend":"zoomchange",this.update),this.mapsService.off(u?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(u){Ef((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(u){var c=this.controlOption,p=c.metric,g=c.imperial;p&&u&&this.updateMetric(u),g&&u&&this.updateImperial(u)}},{key:"resetScaleLines",value:function(u){$c(u);var c=this.controlOption,p=c.metric,g=c.imperial,y=c.maxWidth,S=c.lockWidth;S&&bp(u,"width: ".concat(y,"px")),p&&(this.mScale=Zs("div","l7-control-scale-line",u)),g&&(this.iScale=Zs("div","l7-control-scale-line",u)),this.update()}},{key:"updateScale",value:function(u,c,p){var g=this.controlOption.maxWidth;u.style.width=Math.round(g*p)+"px",u.innerHTML=c}},{key:"getRoundNum",value:function(u){var c=Math.pow(10,(Math.floor(u)+"").length-1),p=u/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}},{key:"updateMetric",value:function(u){var c=this.getRoundNum(u),p=c<1e3?c+" m":c/1e3+" km";this.updateScale(this.mScale,p,c/u)}},{key:"updateImperial",value:function(u){var c=u*3.2808399,p,g,y;c>5280?(p=c/5280,g=this.getRoundNum(p),this.updateScale(this.iScale,g+" mi",g/p)):(y=this.getRoundNum(c),this.updateScale(this.iScale,y+" ft",y/c))}}]),r}(Md),Wp,tC=(Wp={},(0,He.Z)(Wp,Ro.additive,{enable:!0,func:{srcRGB:Rt.ONE,dstRGB:Rt.ONE,srcAlpha:1,dstAlpha:1}}),(0,He.Z)(Wp,Ro.none,{enable:!1}),(0,He.Z)(Wp,Ro.normal,{enable:!0,func:{srcRGB:Rt.SRC_ALPHA,dstRGB:Rt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,He.Z)(Wp,Ro.subtractive,{enable:!0,func:{srcRGB:Rt.ONE,dstRGB:Rt.ONE,srcAlpha:Rt.ZERO,dstAlpha:Rt.ONE_MINUS_SRC_COLOR},equation:{rgb:Rt.FUNC_SUBTRACT,alpha:Rt.FUNC_SUBTRACT}}),(0,He.Z)(Wp,Ro.max,{enable:!0,func:{srcRGB:Rt.ONE,dstRGB:Rt.ONE},equation:{rgb:Rt.MAX_EXT}}),(0,He.Z)(Wp,Ro.min,{enable:!0,func:{srcRGB:Rt.ONE,dstRGB:Rt.ONE},equation:{rgb:Rt.MIN_EXT}}),Wp);function L_(e){return e.map(function(a){return typeof a=="string"&&(a=[a,{}]),a})}function rC(e,a,r,o){var u=e.multiPassRenderer,c=e.getLayerConfig(),p=c.enableTAA;return p?u.add(o("taa")):u.add(o("render")),L_(a).forEach(function(g){var y=(0,ji.Z)(g,2),S=y[0],O=y[1];u.add(r(S),O)}),u.add(r("copy")),u}var TP=function(){function e(a){(0,Ot.Z)(this,e),this.layer=a}return(0,ot.Z)(e,[{key:"pickRender",value:function(r){var o=this.layer.getContainer(),u=o.get(Ct.ILayerService),c=this.layer;if(c.tileLayer)return c.tileLayer.pickRender(r);c.hooks.beforePickingEncode.call(),u.renderTileLayerMask(c),c.renderModels({ispick:!0}),c.hooks.afterPickingEncode.call()}},{key:"pick",value:function(r,o){var u=this.layer.getContainer(),c=u.get(Ct.IPickingService);return r.type==="RasterLayer"?this.pickRasterLayer(r,o):(this.pickRender(o),c.pickFromPickingFBO(r,o))}},{key:"pickRasterLayer",value:function(r,o,u){var c=this.layer.getContainer(),p=c.get(Ct.IPickingService),g=c.get(Ct.IMapService),y=this.layer.getSource().extent,S=Es(o.lngLat,y),O={x:o.x,y:o.y,type:o.type,lngLat:o.lngLat,target:o,rasterValue:null},L=u||r;if(S){var V=this.readRasterValue(r,y,g,o.x,o.y);return O.rasterValue=V,p.triggerHoverOnLayer(L,O),!0}else return O.type=o.type==="mousemove"?"mouseout":"un"+o.type,p.triggerHoverOnLayer(L,(0,ne.Z)((0,ne.Z)({},O),{},{type:"unpick"})),p.triggerHoverOnLayer(L,O),!1}},{key:"readRasterValue",value:function(r,o,u,c,p){var g=r.getSource().data.dataArray[0],y=(0,ji.Z)(o,4),S=y[0],O=S===void 0?0:S,L=y[1],V=L===void 0?0:L,G=y[2],he=G===void 0?10:G,ve=y[3],Pe=ve===void 0?-10:ve,Xe=u.lngLatToContainer([O,V]),gt=u.lngLatToContainer([he,Pe]),_t=gt.x-Xe.x,zt=Xe.y-gt.y,Xt=[(c-Xe.x)/_t,(p-gt.y)/zt],nr=g.width||1,ar=g.height||1,Tr=Math.floor(Xt[0]*nr),Zr=Math.floor(Xt[1]*ar),rn=Math.max(0,Zr-1)*nr+Tr,ln=g.data[rn];return ln}},{key:"selectFeature",value:function(r){var o=this.layer,u=(0,ji.Z)(r,3),c=u[0],p=u[1],g=u[2];o.hooks.beforeSelect.call([c,p,g])}},{key:"highlightPickedFeature",value:function(r){var o=(0,ji.Z)(r,3),u=o[0],c=o[1],p=o[2];this.layer.hooks.beforeHighlight.call([u,c,p])}},{key:"getFeatureById",value:function(r){return this.layer.getSource().getFeatureById(r)}}]),e}(),AP=function(){function e(a){(0,Ot.Z)(this,e),this.layer=a;var r=this.layer.getContainer();this.rendererService=r.get(Ct.IRendererService)}return(0,ot.Z)(e,[{key:"getColorTexture",value:function(r,o){var u=this.getTextureKey(r,o);return this.key===u?this.colorTexture:(this.createColorTexture(r,o),this.key=u,this.colorTexture)}},{key:"createColorTexture",value:function(r,o){var u=this.rendererService.createTexture2D,c=this.getColorRampBar(r,o),p=u({data:new Uint8Array(c.data),width:c.width,height:c.height,flipY:!1});return this.colorTexture=p,p}},{key:"setColorTexture",value:function(r,o,u){this.key=this.getTextureKey(o,u),this.colorTexture=r}},{key:"destroy",value:function(){var r;(r=this.colorTexture)===null||r===void 0||r.destroy()}},{key:"getColorRampBar",value:function(r,o){switch(r.type){case"cat":return bc(r);case"quantize":return Rf(r);case"custom":return Ll(r,o);case"linear":return xc(r,o);default:return Ss(r)}}},{key:"getTextureKey",value:function(r,o){var u;return"".concat(r.colors.join("_"),"_").concat(r==null||(u=r.positions)===null||u===void 0?void 0:u.join("_"),"_").concat(r.type,"_").concat(o==null?void 0:o.join("_"))}}]),e}(),nC=["passes"],MP=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption"],iC,xb,aC;function RP(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=IP(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function IP(e,a){if(e){if(typeof e=="string")return oC(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oC(e,a)}}function oC(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function PP(e){var a=OP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function OP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bb=Ca.isEqual,Sb=Ca.isFunction,Eb=Ca.isNumber,Nc=Ca.isObject,sC=Ca.isPlainObject,kP=Ca.isUndefined,uC=0,Ym=(iC=ab(Ct.IGlobalConfigService),xb=function(e){(0,yr.Z)(r,e);var a=PP(r);function r(){var o,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Ot.Z)(this,r),o=a.call(this),(0,He.Z)((0,wr.Z)(o),"id","".concat(uC++)),(0,He.Z)((0,wr.Z)(o),"name","".concat(uC)),(0,He.Z)((0,wr.Z)(o),"visible",!0),(0,He.Z)((0,wr.Z)(o),"zIndex",0),(0,He.Z)((0,wr.Z)(o),"inited",!1),(0,He.Z)((0,wr.Z)(o),"layerModelNeedUpdate",!1),(0,He.Z)((0,wr.Z)(o),"pickedFeatureID",null),(0,He.Z)((0,wr.Z)(o),"selectedFeatureID",null),(0,He.Z)((0,wr.Z)(o),"styleNeedUpdate",!1),(0,He.Z)((0,wr.Z)(o),"forceRender",!1),(0,He.Z)((0,wr.Z)(o),"clusterZoom",0),(0,He.Z)((0,wr.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,He.Z)((0,wr.Z)(o),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,He.Z)((0,wr.Z)(o),"hooks",{init:new o3,afterInit:new QE,beforeRender:new QE,beforeRenderData:new s3,afterRender:new wd,beforePickingEncode:new wd,afterPickingEncode:new wd,beforeHighlight:new wd(["pickedColor"]),afterHighlight:new wd,beforeSelect:new wd(["pickedColor"]),afterSelect:new wd,beforeDestroy:new wd,afterDestroy:new wd}),(0,He.Z)((0,wr.Z)(o),"models",[]),(0,He.Z)((0,wr.Z)(o),"startInit",!1),(0,He.Z)((0,wr.Z)(o),"layerChildren",[]),(0,He.Z)((0,wr.Z)(o),"masks",[]),na((0,wr.Z)(o),"configService",aC,(0,wr.Z)(o)),(0,He.Z)((0,wr.Z)(o),"animateOptions",{enable:!1}),(0,He.Z)((0,wr.Z)(o),"currentPickId",null),(0,He.Z)((0,wr.Z)(o),"encodeStyleAttribute",{}),(0,He.Z)((0,wr.Z)(o),"enableShaderEncodeStyles",[]),(0,He.Z)((0,wr.Z)(o),"enableDataEncodeStyles",[]),(0,He.Z)((0,wr.Z)(o),"enablg",[]),(0,He.Z)((0,wr.Z)(o),"pendingStyleAttributes",[]),(0,He.Z)((0,wr.Z)(o),"scaleOptions",{}),(0,He.Z)((0,wr.Z)(o),"animateStatus",!1),(0,He.Z)((0,wr.Z)(o),"isDestroyed",!1),(0,He.Z)((0,wr.Z)(o),"uniformBuffers",[]),(0,He.Z)((0,wr.Z)(o),"encodeDataLength",0),(0,He.Z)((0,wr.Z)(o),"sourceEvent",function(){o.dataState.dataSourceNeedUpdate=!0;var c=o.getLayerConfig();c&&c.autoFit&&o.fitBounds(c.fitBoundsOptions);var p=o.layerSource.getSourceCfg().autoRender;p&&setTimeout(function(){o.reRender()},10)}),o.name=u.name||o.id,o.zIndex=u.zIndex||0,o.rawConfig=u,o}return(0,ot.Z)(r,[{key:"addMask",value:function(u){this.masks.push(u),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}},{key:"removeMask",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),this.updateLayerConfig({maskLayers:this.masks})}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(u){this.masks.push(u)}},{key:"removeMaskLayer",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),u.destroy()}},{key:"getAttribute",value:function(u){return this.styleAttributeService.getLayerStyleAttribute(u)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(u){var c=this;if(Object.keys(u).map(function(g){g in c.rawConfig&&(c.rawConfig[g]=u[g])}),!this.startInit)this.needUpdateConfig=(0,ne.Z)((0,ne.Z)({},this.needUpdateConfig),u);else{var p=this.container.get(Ct.SceneID);this.configService.setLayerConfig(p,this.id,(0,ne.Z)((0,ne.Z)((0,ne.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),u)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(u,c){this.container=u,this.sceneContainer=c}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(u){return this.plugins.push(u),this}},{key:"init",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:g=this.container.get(Ct.SceneID),this.startInit=!0,this.configService.setLayerConfig(g,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Ct.IIconService),this.fontService=this.container.get(Ct.IFontService),this.rendererService=this.container.get(Ct.IRendererService),this.layerService=this.container.get(Ct.ILayerService),this.debugService=this.container.get(Ct.IDebugService),this.interactionService=this.container.get(Ct.IInteractionService),this.pickingService=this.container.get(Ct.IPickingService),this.mapService=this.container.get(Ct.IMapService),y=this.getLayerConfig(),S=y.enableMultiPassRenderer,O=y.passes,S&&O!==null&&O!==void 0&&O.length&&O.length>0&&this.mapService.on("mapAfterFrameChange",function(){p.renderLayers()}),this.cameraService=this.container.get(Ct.ICameraService),this.coordinateService=this.container.get(Ct.ICoordinateSystemService),this.shaderModuleService=this.container.get(Ct.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Ct.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Ct.IFactoryNormalPass),this.styleAttributeService=this.container.get(Ct.IStyleAttributeService),S&&(this.multiPassRenderer=this.container.get(Ct.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(Pe){var Xe=Pe.attributeName,gt=Pe.attributeField,_t=Pe.attributeValues,zt=Pe.updateOptions;p.styleAttributeService.updateStyleAttribute(Xe,{scale:(0,ne.Z)({field:gt},p.splitValuesAndCallbackInAttribute(_t,gt?void 0:p.getLayerConfig()[Xe]))},zt)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Ct.ILayerPlugin),L=RP(this.plugins);try{for(L.s();!(V=L.n()).done;)G=V.value,G.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(Pe){L.e(Pe)}finally{L.f()}return this.layerPickService=new TP(this),this.textureService=new AP(this),this.log(kl.LayerInitStart),ve.next=31,this.hooks.init.promise();case 31:this.log(kl.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"log",value:function(u){var c,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var g="".concat(this.id,".").concat(p,".").concat(u),y={id:this.id,type:this.type};(c=this.debugService)===null||c===void 0||c.log(g,y)}}},{key:"updateModelData",value:function(u){u.attributes&&u.elements?this.models.map(function(c){c.updateAttributesAndElements(u.attributes,u.elements)}):console.warn("data error")}},{key:"setLayerPickService",value:function(u){this.layerPickService=u}},{key:"prepareBuildModel",value:function(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});var u=this.getLayerConfig(),c=u.animateOption;c!=null&&c.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(u,c,p){return this.updateStyleAttribute("color",u,c,p),this}},{key:"texture",value:function(u,c,p){return this.updateStyleAttribute("texture",u,c,p),this}},{key:"rotate",value:function(u,c,p){return this.updateStyleAttribute("rotate",u,c,p),this}},{key:"size",value:function(u,c,p){return this.updateStyleAttribute("size",u,c,p),this}},{key:"filter",value:function(u,c,p){var g=this.updateStyleAttribute("filter",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"shape",value:function(u,c,p){this.shapeOption={field:u,values:c};var g=this.updateStyleAttribute("shape",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"label",value:function(u,c,p){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:u,attributeValues:c,updateOptions:p}),this}},{key:"animate",value:function(u){var c={};return Nc(u)?(c.enable=!0,c=(0,ne.Z)((0,ne.Z)({},c),u)):c.enable=u,this.updateLayerConfig({animateOption:c}),this}},{key:"source",value:function(u,c){return(u==null?void 0:u.type)==="source"?(this.setSource(u),this):(this.sourceOption={data:u,options:c},this.clusterZoom=0,this)}},{key:"setData",value:function(u,c){var p=this;return this.inited?(this.log(kl.SourceInitStart,Ko.UPDATE),this.layerSource.setData(u,c),this.log(kl.SourceInitEnd,Ko.UPDATE)):this.on("inited",function(){p.log(kl.SourceInitStart,Ko.UPDATE);var g=p.getSource();g?p.layerSource.setData(u,c):p.source(new sy(u,c)),p.layerSource.once("update",function(){p.log(kl.SourceInitEnd,Ko.UPDATE)})}),this}},{key:"style",value:function(u){var c=this,p=u.passes,g=(0,Sf.Z)(u,nC);p&&L_(p).forEach(function(S){var O=c.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(S[0]);O&&O.updateOptions(S[1])}),g.borderColor&&(g.stroke=g.borderColor),g.borderWidth&&(g.strokeWidth=g.borderWidth);var y=g;return Object.keys(g).forEach(function(S){var O=g[S];Array.isArray(O)&&O.length===2&&!Eb(O[0])&&!Eb(O[1])&&(y[S]={field:O[0],value:O[1]})}),this.encodeStyle(y),this.updateLayerConfig(y),this}},{key:"encodeStyle",value:function(u){var c=this;Object.keys(u).forEach(function(p){[].concat((0,Rn.Z)(c.enableShaderEncodeStyles),(0,Rn.Z)(c.enableDataEncodeStyles)).includes(p)&&sC(u[p])&&(u[p].field||u[p].value)&&!bb(c.encodeStyleAttribute[p],u[p])?(c.encodeStyleAttribute[p]=u[p],c.updateStyleAttribute(p,u[p].field,u[p].value),c.inited&&(c.dataState.dataMappingNeedUpdate=!0)):c.encodeStyleAttribute[p]&&(delete c.encodeStyleAttribute[p],c.dataState.dataSourceNeedUpdate=!0)})}},{key:"scale",value:function(u,c){var p=(0,ne.Z)({},this.scaleOptions);if(Nc(u)?this.scaleOptions=(0,ne.Z)((0,ne.Z)({},this.scaleOptions),u):this.scaleOptions[u]=c,this.styleAttributeService&&!bb(p,this.scaleOptions)){var g=Nc(u)?u:(0,He.Z)({},u,c);this.styleAttributeService.updateScaleAttribute(g)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"render",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(u),this))}},{key:"renderMultiPass",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){g.next=2;break}return g.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){g.next=7;break}return g.next=5,this.multiPassRenderer.render();case 5:g.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"active",value:function(u){var c={};return c.enableHighlight=Nc(u)?!0:u,Nc(u)?(c.enableHighlight=!0,u.color&&(c.highlightColor=u.color),u.mix&&(c.activeMix=u.mix)):c.enableHighlight=!!u,this.updateLayerConfig(c),this}},{key:"setActive",value:function(u,c){var p=this;if(Nc(u)){var g=u.x,y=g===void 0?0:g,S=u.y,O=S===void 0?0:S;this.updateLayerConfig({highlightColor:Nc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:Nc(c)?c.mix:this.getLayerConfig().activeMix}),this.pick({x:y,y:O})}else this.updateLayerConfig({pickedFeatureID:u,highlightColor:Nc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:Nc(c)?c.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(bs(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"select",value:function(u){var c={};return c.enableSelect=Nc(u)?!0:u,Nc(u)?(c.enableSelect=!0,u.color&&(c.selectColor=u.color),u.mix&&(c.selectMix=u.mix)):c.enableSelect=!!u,this.updateLayerConfig(c),this}},{key:"setSelect",value:function(u,c){var p=this;if(Nc(u)){var g=u.x,y=g===void 0?0:g,S=u.y,O=S===void 0?0:S;this.updateLayerConfig({selectColor:Nc(c)?c.color:this.getLayerConfig().selectColor,selectMix:Nc(c)?c.mix:this.getLayerConfig().selectMix}),this.pick({x:y,y:O})}else this.updateLayerConfig({pickedFeatureID:u,selectColor:Nc(c)?c.color:this.getLayerConfig().selectColor,selectMix:Nc(c)?c.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(bs(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"setBlend",value:function(u){return this.updateLayerConfig({blend:u}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(u){return this.zIndex=u,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(u){this.currentPickId=u}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(u){this.selectedFeatureID=u}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var u=this.mapService.getZoom(),c=this.getLayerConfig(),p=c.visible,g=c.minZoom,y=g===void 0?-1/0:g,S=c.maxZoom,O=S===void 0?1/0:S;return!!p&&u>=y&&u<O}},{key:"setMultiPass",value:function(u,c){if(this.updateLayerConfig({enableMultiPassRenderer:u}),c&&this.updateLayerConfig({passes:c}),u){var p=this.getLayerConfig(),g=p.passes,y=g===void 0?[]:g;this.multiPassRenderer=rC(this,y,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var S=this.rendererService.getViewportSize(),O=S.width,L=S.height;this.multiPassRenderer.resize(O,L)}return this}},{key:"setMinZoom",value:function(u){return this.updateLayerConfig({minZoom:u}),this}},{key:"getMinZoom",value:function(){var u=this.getLayerConfig(),c=u.minZoom;return c}},{key:"getMaxZoom",value:function(){var u=this.getLayerConfig(),c=u.maxZoom;return c}},{key:"get",value:function(u){var c=this.getLayerConfig();return c[u]}},{key:"setMaxZoom",value:function(u){return this.updateLayerConfig({maxZoom:u}),this}},{key:"setAutoFit",value:function(u){return this.updateLayerConfig({autoFit:u}),this}},{key:"fitBounds",value:function(u){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var c=this.getSource(),p=c.extent,g=p.some(function(y){return Math.abs(y)===1/0});return g?this:(this.mapService.fitBounds([[p[0],p[1]],[p[2],p[3]]],u),this)}},{key:"destroy",value:function(){var u,c,p,g,y,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.isDestroyed){(u=this.layerModel)===null||u===void 0||u.uniformBuffers.forEach(function(V){V.destroy()}),this.layerChildren.map(function(V){return V.destroy(!1)}),this.layerChildren=[];var O=this.getLayerConfig(),L=O.maskfence;L&&(this.masks.map(function(V){return V.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(c=this.multiPassRenderer)===null||c===void 0||c.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(p=this.layerModel)===null||p===void 0||p.clearModels(S),(g=this.tileLayer)===null||g===void 0||g.destroy(),this.models=[],(y=this.debugService)===null||y===void 0||y.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var u;this.models.forEach(function(c){return c.destroy()}),(u=this.layerModel)===null||u===void 0||u.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(u){return u.needRescale||u.needRemapping||u.needRegenerateVertices}).length}},{key:"setSource",value:function(u){var c=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=u,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var p=this.mapService.getZoom();this.layerSource.updateClusterData(p)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(g){var y=g.type;if(c.coordCenter===void 0){var S,O=c.layerSource.center;c.coordCenter=O,(S=c.mapService)!==null&&S!==void 0&&S.setCoordCenter&&c.mapService.setCoordCenter(O)}if(y==="update"){if(c.tileLayer){c.tileLayer.reload();return}c.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(u){this.encodedData=u,this.encodeDataLength=u.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(u){return this.styleAttributeService.getLayerAttributeScale(u)}},{key:"getLegend",value:function(u){var c,p,g,y=this.styleAttributeService.getLayerStyleAttribute(u),S=(y==null||(c=y.scale)===null||c===void 0?void 0:c.scalers)||[];return{type:(p=S[0].option)===null||p===void 0?void 0:p.type,field:y==null||(g=y.scale)===null||g===void 0?void 0:g.field,items:this.getLegendItems(u)}}},{key:"getLegendItems",value:function(u){var c=this.styleAttributeService.getLayerAttributeScale(u);if(!c)return[];if(c.invertExtent){var p=c.range().map(function(S){return(0,He.Z)({value:c.invertExtent(S)},u,S)});return p}else if(c.ticks){var g=c.ticks().map(function(S){return(0,He.Z)({value:S},u,c(S))});return g}else if(c!=null&&c.domain){var y=c.domain().filter(function(S){return!kP(S)}).map(function(S){return(0,He.Z)({value:S},u,c(S))});return y}return[]}},{key:"pick",value:function(u){var c=u.x,p=u.y;this.interactionService.triggerHover({x:c,y:p})}},{key:"boxSelect",value:function(u,c){this.pickingService.boxPickLayer(this,u,c)}},{key:"buildLayerModel",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g=this,y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t;return er().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:return y=p.moduleName,S=p.vertexShader,O=p.fragmentShader,L=p.inject,V=p.triangulation,G=p.styleOption,he=(0,Sf.Z)(p,MP),this.shaderModuleService.registerModule(y,{vs:S,fs:O,inject:L}),ve=this.shaderModuleService.getModule(y),Pe=ve.vs,Xe=ve.fs,gt=ve.uniforms,_t=this.rendererService.createModel,Xt.abrupt("return",new Promise(function(nr){var ar=g.styleAttributeService.createAttributesAndIndices(g.encodedData,V,G),Tr=ar.attributes,Zr=ar.elements,rn=ar.count,ln=(0,ne.Z)({attributes:Tr,uniforms:gt,fs:Xe,vs:Pe,elements:Zr,blend:tC[Ro.normal],uniformBuffers:[].concat((0,Rn.Z)(g.layerModel.uniformBuffers),(0,Rn.Z)(g.rendererService.uniformBuffers),[g.getLayerUniformBuffer(),g.getPickingUniformBuffer()]),textures:g.layerModel.textures},he);rn&&(ln.count=rn);var Gn=_t(ln);nr(Gn)}));case 5:case"end":return Xt.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"createAttributes",value:function(u){var c=u.triangulation,p=this.styleAttributeService.createAttributes(this.encodedData,c),g=p.attributes;return g}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(u){var c=this.getLayerConfig(),p=c.enableHighlight,g=p===void 0?!0:p,y=c.enableSelect,S=y===void 0?!0:y,O=this.eventNames().indexOf(u)!==-1||this.eventNames().indexOf("un"+u)!==-1;return(u==="click"||u==="dblclick")&&S&&(O=!0),u==="mousemove"&&(g||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(O=!0),this.isVisible()&&O}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return g.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMulPass",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,p.render();case 2:case"end":return y.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderModels",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(p){p.draw({uniforms:u.layerModel.getUninforms(),blend:u.layerModel.getBlend(),stencil:u.layerModel.getStencil(c),textures:u.layerModel.textures},(c==null?void 0:c.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(u,c,p,g){var y=this.configService.getAttributeConfig(this.id)||{};return bb(y[u],{field:c,values:p})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(u)!==-1&&this.configService.setAttributeConfig(this.id,(0,He.Z)({},u,{field:c,values:p})),this.startInit?this.styleAttributeService.updateStyleAttribute(u,{scale:(0,ne.Z)({field:c},this.splitValuesAndCallbackInAttribute(p,this.getLayerConfig()[c]))},g):this.pendingStyleAttributes.push({attributeName:u,attributeField:c,attributeValues:p,updateOptions:g}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(u){console.warn("empty fn")}},{key:"processData",value:function(u){return u}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.models.forEach(function(O){return O.destroy()}),this.models=[],this.uniformBuffers.forEach(function(O){O.destroy()}),this.uniformBuffers=[],p=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(p),g=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(g),S.next=10,this.layerModel.initModels();case 10:this.models=S.sent;case 11:case"end":return S.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getLayerUniformBuffer",value:function(){return this.uniformBuffers[0]}},{key:"getPickingUniformBuffer",value:function(){return this.uniformBuffers[1]}},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(u){return{values:Sb(u)?void 0:u,callback:Sb(u)?u:void 0}}}]),r}(Ys.EventEmitter),aC=Fa(xb.prototype,"configService",[iC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xb);function DP(e,a){return{enable:e,mask:255,func:{cmp:Rt.EQUAL,ref:a?1:0,mask:1}}}function lC(e){return e.maskOperation===bo.OR?{enable:!0,mask:255,func:{cmp:Rt.ALWAYS,ref:1,mask:255},opFront:{fail:Rt.KEEP,zfail:Rt.REPLACE,zpass:Rt.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===Io.SINGLE||e.stencilIndex===0?Rt.ALWAYS:Rt.LESS,ref:e.stencilType===Io.SINGLE?1:e.stencilIndex===0?2:1,mask:255},opFront:{fail:Rt.KEEP,zfail:Rt.REPLACE,zpass:Rt.REPLACE}}}var LP={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},F_={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function LB(e){var a="";return Object.keys(e).forEach(function(r){var o=e[r];Array.isArray(o)?a+="vec".concat(o.length," ").concat(r,`;
`):a+="flot ".concat(r,`;
`)}),a}function cC(e){return Math.max(Math.ceil(e/4)*4,4)}var Wa=function(e){return e[e.POSITION=0]="POSITION",e[e.COLOR=1]="COLOR",e[e.VERTEX_ID=2]="VERTEX_ID",e[e.PICKING_COLOR=3]="PICKING_COLOR",e[e.STROKE=4]="STROKE",e[e.OPACITY=5]="OPACITY",e[e.OFFSETS=6]="OFFSETS",e[e.ROTATION=7]="ROTATION",e[e.EXTRUSION_BASE=8]="EXTRUSION_BASE",e[e.SIZE=9]="SIZE",e[e.SHAPE=10]="SHAPE",e[e.EXTRUDE=11]="EXTRUDE",e[e.MAX=12]="MAX",e[e.NORMAL=13]="NORMAL",e[e.UV=14]="UV",e[e.LINEAR=15]="LINEAR",e}({});function FP(e){switch(e){case"rotation":return{name:"Rotation",type:wa.Attribute,descriptor:{name:"a_Rotation",shaderLocation:Wa.ROTATION,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(r){var o=r.rotation,u=o===void 0?0:o;return Array.isArray(u)?[u[0]]:[u]}}};case"stroke":return{name:"stroke",type:wa.Attribute,descriptor:{name:"a_Stroke",shaderLocation:Wa.STROKE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(r){var o=r.stroke,u=o===void 0?[1,1,1,1]:o;return u}}};case"opacity":return{name:"opacity",type:wa.Attribute,descriptor:{name:"a_Opacity",shaderLocation:Wa.OPACITY,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(r){var o=r.opacity,u=o===void 0?1:o;return[u]}}};case"extrusionBase":return{name:"extrusionBase",type:wa.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:Wa.EXTRUSION_BASE,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(r){var o=r.extrusionBase,u=o===void 0?0:o;return[u]}}};case"offsets":return{name:"offsets",type:wa.Attribute,descriptor:{name:"a_Offsets",shaderLocation:Wa.OFFSETS,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(r){var o=r.offsets;return o}}};case"thetaOffset":return{name:"thetaOffset",type:wa.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(r){var o=r.thetaOffset,u=o===void 0?1:o;return[u]}}};default:return}}var Id,B_,wf,Rh={opacity:Wa.OPACITY,stroke:Wa.STROKE,offsets:Wa.OFFSETS,rotation:Wa.ROTATION,extrusionBase:Wa.EXTRUSION_BASE,thetaOffset:15},lu=(Id=ab(Ct.IGlobalConfigService),B_=function(){function e(a){(0,Ot.Z)(this,e),(0,He.Z)(this,"uniformBuffers",[]),(0,He.Z)(this,"textures",[]),(0,He.Z)(this,"preStyleAttribute",{}),(0,He.Z)(this,"encodeStyleAttribute",{}),na(this,"configService",wf,this),this.layer=a,this.rendererService=a.getContainer().get(Ct.IRendererService),this.pickingService=a.getContainer().get(Ct.IPickingService),this.shaderModuleService=a.getContainer().get(Ct.IShaderModuleService),this.styleAttributeService=a.getContainer().get(Ct.IStyleAttributeService),this.mapService=a.getContainer().get(Ct.IMapService),this.iconService=a.getContainer().get(Ct.IIconService),this.fontService=a.getContainer().get(Ct.IFontService),this.cameraService=a.getContainer().get(Ct.ICameraService),this.layerService=a.getContainer().get(Ct.ILayerService),this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var r=this.rendererService.createTexture2D;this.createTexture2D=r}return(0,ot.Z)(e,[{key:"getBlend",value:function(){var r=this.layer.getLayerConfig(),o=r.blend,u=o===void 0?"normal":o;return tC[Ro[u]]}},{key:"getStencil",value:function(r){var o=this.layer.getLayerConfig(),u=o.mask,c=u===void 0?!1:u,p=o.maskInside,g=p===void 0?!0:p,y=o.enableMask,S=o.maskOperation,O=S===void 0?bo.AND:S;if(this.layer.type==="MaskLayer")return lC({isStencil:!0,stencilType:Io.SINGLE});if(r.isStencil)return lC((0,ne.Z)((0,ne.Z)({},r),{},{maskOperation:O}));var L=c||y&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return DP(L,g)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){var r=this.getCommonUniformsInfo(),o=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();var u=(0,ne.Z)((0,ne.Z)({},o.uniformsOption),r.uniformsOption);return!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(u.u_texture=this.textures[0]),u}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var a=(0,Sn.Z)(er().mark(function o(){return er().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",!1);case 1:case"end":return c.stop()}},o)}));function r(){return a.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var a=(0,Sn.Z)(er().mark(function o(){return er().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return a.apply(this,arguments)}return r}()},{key:"initModels",value:function(){var a=(0,Sn.Z)(er().mark(function o(){return er().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return a.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(r){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.duration||4,r.interval||.2,r.trailLength||.1]}},{key:"startModelAnimate",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;o.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var r=this.layer.encodeStyleAttribute,o="",u=[];this.layer.enableShaderEncodeStyles.forEach(function(g){r[g]?o+="#define USE_ATTRIBUTE_".concat(g.toUpperCase(),` 0.0; 

`):u.push("  ".concat(F_[g]," u_").concat(g,";"));var y=Rh[g];!y&&g==="THETA_OFFSET"&&(y=15),o+=`
          #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
          layout(location = `).concat(Rh[g],") in ").concat(F_[g]," a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
        #endif

        `)});var c=u.length?`
layout(std140) uniform AttributeUniforms {
`.concat(u.join(`
`),`
};
    `):"";o+=c;var p="";return this.layer.enableShaderEncodeStyles.forEach(function(g){p+=`

    #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
      `).concat(F_[g]," ").concat(g,"  = a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
    #else
      `).concat(F_[g]," ").concat(g," = u_").concat(g,`;
    #endif

    `)}),{"vs:#decl":o,"fs:#decl":c,"vs:#main-start":p}}},{key:"getStyleAttribute",value:function(){var r=this,o={};return this.layer.enableShaderEncodeStyles.forEach(function(u){if(!r.layer.encodeStyleAttribute[u]){var c=r.layer.getLayerConfig()[u],p=typeof c=="undefined"?LP[u]:c;u==="stroke"&&(p=ho(p)),o["u_"+u]=p}}),o}},{key:"registerStyleAttribute",value:function(){var r=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(o){var u=FP(o);u&&(r.styleAttributeService.registerStyleAttribute(u),u.descriptor&&(u.descriptor.shaderLocation=Rh[o]))})}},{key:"updateEncodeAttribute",value:function(r,o){this.encodeStyleAttribute[r]=o}},{key:"initUniformsBuffer",value:function(){var r=this.getUniformsBufferInfo(this.getStyleAttribute()),o=this.getCommonUniformsInfo();r.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(cC(r.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),o.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(cC(o.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}},{key:"getUniformsBufferInfo",value:function(r){var o=0,u=[];return Object.values(r).forEach(function(c){Array.isArray(c)?(u.push.apply(u,(0,Rn.Z)(c)),o+=c.length):typeof c=="number"?(u.push(c),o+=1):typeof c=="boolean"&&(u.push(Number(c)),o+=1)}),{uniformsOption:r,uniformsLength:o,uniformsArray:u}}},{key:"getCommonUniformsInfo",value:function(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}},{key:"updateStyleUnifoms",value:function(){var r,o,u=this.getUniformsBufferInfo(this.getStyleAttribute()),c=u.uniformsArray,p=this.getCommonUniformsInfo(),g=p.uniformsArray;(r=this.attributeUnifoms)===null||r===void 0||r.subData({offset:0,data:new Uint8Array(new Float32Array(c).buffer)}),(o=this.commonUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(g).buffer)})}}]),e}(),wf=Fa(B_.prototype,"configService",[Id],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B_),wb=100,a8=36,Jv=40;function ls(e){return e/180*Math.acos(-1)}function N_(e){var a=ls(e[0])+Math.PI/2,r=ls(e[1]),o=wb+Math.random()*.4,u=o*Math.cos(r)*Math.cos(a),c=o*Math.cos(r)*Math.sin(a),p=o*Math.sin(r);return[c,p,u]}function BP(e,a){var r=mat4.create(),o=mat4.create(),u=vec3.fromValues(0,1,0),c=vec3.fromValues(0,0,0);a=a||{},e=typeof e!="undefined"?e:1;for(var p=typeof a.segments!="undefined"?a.segments:32,g=2+p,y=2*g,S=[],O=[],L=[],V=[],G=[],he=[],ve=0;ve<=g;ve++){for(var Pe=ve/g,Xe=Pe*Math.PI,gt=0;gt<=y;gt++){var _t=gt/y,zt=_t*Math.PI*2;mat4.identity(o),mat4.rotateZ(o,o,-Xe),mat4.identity(r),mat4.rotateY(r,r,zt),vec3.transformMat4(c,u,o),vec3.transformMat4(c,c,r),vec3.scale(c,c,-e),L.push(c.slice()),V.push.apply(V,_toConsumableArray(c.slice())),vec3.normalize(c,c),G.push.apply(G,_toConsumableArray(c.slice())),he.push([_t,1-Pe]),V.push(_t,1-Pe)}if(ve>0)for(var Xt=L.length,nr=Xt-2*(y+1);nr+y+2<Xt;nr++)S.push([nr,nr+1,nr+y+1]),O.push(nr,nr+1,nr+y+1),S.push([nr+y+1,nr+1,nr+y+2]),O.push(nr+y+1,nr+1,nr+y+2)}return{cells:S,positions:L,uvs:he,positionsArr:V,indicesArr:O,normalArr:G}}var fv=ei.Ue(),FB=ei.Ue(),Wl=ei.Ue(),hv=ei.Ue(),Km=ei.Ue();function Cb(e,a,r,o,u){ei.IH(e,r,o),ei.Fv(e,e),a=ei.al(-e[1],e[0]);var c=ei.al(-r[1],r[0]);return[u/ei.AK(a,c),a]}function pv(e,a){return ei.t8(e,-a[1],a[0])}function Ug(e,a,r){return ei.lu(e,a,r),ei.Fv(e,e),e}function mn(e,a){return e[0]===a[0]&&e[1]===a[1]}function fC(e){for(var a=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();a.get(o)?(e.splice(r,1),r++):a.set(o,o)}return e}var Ua=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Ot.Z)(this,e),(0,He.Z)(this,"lastFlip",-1),(0,He.Z)(this,"miter",ei.al(0,0)),(0,He.Z)(this,"started",!1),(0,He.Z)(this,"dash",!1),(0,He.Z)(this,"totalDistance",0),(0,He.Z)(this,"currentIndex",0),this.join=a.join||"miter",this.cap=a.cap||"butt",this.miterLimit=a.miterLimit||10,this.thickness=a.thickness||1,this.dash=a.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,ot.Z)(e,[{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.simpleSegment(o,c,g,y,S);c+=O}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],G=r[g];G.push((S=o[g][2])!==null&&S!==void 0?S:0);var he=o[g],ve=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,Pe=g<o.length-1?o[g+1]:null,Xe=this.simpleSegment(u,p,L,G,ve,V,he,Pe);p+=Xe}if(this.dash)for(var gt=0;gt<u.positions.length/6;gt++)u.positions[gt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,S,O,L=r[g-1];L.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],G=r[g];G.push((S=o[g][2])!==null&&S!==void 0?S:0);var he=o[g],ve=g<r.length-1?[].concat((0,Rn.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,Pe=g<o.length-1?o[g+1]:null,Xe=this.segment_gaode2(u,p,L,G,ve,V,he,Pe);p+=Xe}if(this.dash)for(var gt=0;gt<u.positions.length/6;gt++)u.positions[gt*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],S=p<r.length-1?r[p+1]:null,O=this.segment(o,c,g,y,S);c+=O}if(this.dash)for(var L=0;L<o.positions.length/6;L++)o.positions[L*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,L=Ds([c[0],c[1]]),V=Ds([u[0],u[1]]);Ug(Wl,L,V);var G=0;if(this.dash&&(G=this.lineSegmentDistance(L,V),this.totalDistance+=G),this.normal||(this.normal=ei.Ue(),pv(this.normal,Wl)),this.started||(this.started=!0,this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-G)),y.push(o+0,o+1,o+2),!p)pv(this.normal,Wl),this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var he=Ds([p[0],p[1]]);mn(L,he)&&ei.IH(he,L,ei.Fv(he,ei.$X(he,L,V))),Ug(hv,he,L);var ve=Cb(Km,ei.Ue(),Wl,hv,this.thickness),Pe=(0,ji.Z)(ve,2),Xe=Pe[0],gt=Pe[1],_t=ei.AK(Km,this.normal)<0?-1:1;this.extrusions(S,O,c,gt,Xe,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),_t=-1,ei.JG(this.normal,gt),g+=2,this.lastFlip=_t}return g}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,S){var O=0,L=r.indices,V=r.positions,G=r.normals,he=this.cap==="square",ve=this.join==="bevel",Pe=Ds([y[0],y[1]]),Xe=Ds([g[0],g[1]]);Ug(Wl,c,u);var gt=0;if(this.dash&&(gt=this.lineSegmentDistance(Pe,Xe),this.totalDistance+=gt),this.normal||(this.normal=ei.Ue(),pv(this.normal,Wl)),!this.started)if(this.started=!0,he){var _t=ei.Ue(),zt=ei.Ue();ei.IH(_t,this.normal,Wl),ei.IH(zt,this.normal,Wl),G.push(zt[0],zt[1],0),G.push(_t[0],_t[1],0),V.push(u[0],u[1],u[2]|0,this.totalDistance-gt,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),V.push(u[0],u[1],u[2]|0,this.totalDistance-gt,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,G,u,this.normal,this.thickness,this.totalDistance-gt);if(L.push(o+0,o+1,o+2),p){mn(c,p)&&ei.IH(p,c,ei.Fv(p,ei.$X(p,c,u))),Ug(hv,p,c);var ar=Cb(Km,ei.Ue(),Wl,hv,this.thickness),Tr=(0,ji.Z)(ar,2),Zr=Tr[0],rn=Tr[1],ln=ei.AK(Km,this.normal)<0?-1:1,Gn=ve;if(!Gn&&this.join==="miter"){var fi=Zr;fi>this.miterLimit&&(Gn=!0)}Gn?(G.push(this.normal[0],this.normal[1],0),G.push(rn[0],rn[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,L.push.apply(L,(0,Rn.Z)(this.lastFlip!==-ln?[o,o+2,o+3]:[o+2,o+1,o+3])),L.push(o+2,o+3,o+4),pv(fv,hv),ei.JG(this.normal,fv),G.push(this.normal[0],this.normal[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O+=3):(this.extrusions(V,G,c,rn,Zr,this.totalDistance),L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),ln=-1,ei.JG(this.normal,rn),O+=2),this.lastFlip=ln}else{if(pv(this.normal,Wl),he){var Xt=ei.Ue(),nr=ei.Ue();ei.lu(nr,Wl,this.normal),ei.IH(Xt,Wl,this.normal),G.push(nr[0],nr[1],0),G.push(Xt[0],Xt[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,G,c,this.normal,this.thickness,this.totalDistance);L.push.apply(L,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),O+=2}return O}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,S=r.positions,O=r.normals,L=this.cap==="square",V=this.join==="bevel",G=Ds([c[0],c[1]]),he=Ds([u[0],u[1]]);Ug(Wl,G,he);var ve=0;if(this.dash&&(ve=this.lineSegmentDistance(G,he),this.totalDistance+=ve),this.normal||(this.normal=ei.Ue(),pv(this.normal,Wl)),!this.started)if(this.started=!0,L){var Pe=ei.Ue(),Xe=ei.Ue();ei.IH(Pe,this.normal,Wl),ei.IH(Xe,this.normal,Wl),O.push(Xe[0],Xe[1],0),O.push(Pe[0],Pe[1],0),S.push(u[0],u[1],u[2]|0,this.totalDistance-ve,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),S.push(u[0],u[1],u[2]|0,this.totalDistance-ve,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,u,this.normal,this.thickness,this.totalDistance-ve);if(y.push(o+0,o+1,o+2),p){var zt=Ds([p[0],p[1]]);mn(G,zt)&&ei.IH(zt,G,ei.Fv(zt,ei.$X(zt,G,he))),Ug(hv,zt,G);var Xt=Cb(Km,ei.Ue(),Wl,hv,this.thickness),nr=(0,ji.Z)(Xt,2),ar=nr[0],Tr=nr[1],Zr=ei.AK(Km,this.normal)<0?-1:1,rn=V;if(!rn&&this.join==="miter"){var ln=ar;ln>this.miterLimit&&(rn=!0)}rn?(O.push(this.normal[0],this.normal[1],0),O.push(Tr[0],Tr[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Zr,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Zr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,Rn.Z)(this.lastFlip!==-Zr?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),pv(fv,hv),ei.JG(this.normal,fv),O.push(this.normal[0],this.normal[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Zr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(S,O,c,Tr,ar,this.totalDistance),y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Zr=-1,ei.JG(this.normal,Tr),g+=2),this.lastFlip=Zr}else{if(pv(this.normal,Wl),L){var gt=ei.Ue(),_t=ei.Ue();ei.lu(_t,Wl,this.normal),ei.IH(gt,Wl,this.normal),O.push(_t[0],_t[1],0),O.push(gt[0],gt[1],0),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),S.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(S,O,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,Rn.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}(),_a=k(77160);function Tb(e){var a=e[0][0],r=e[0][e[0].length-1];a[0]===r[0]&&a[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var o=e[0].length,u=earcut.flatten(e),c=u.vertices,p=u.dimensions,g=[],y=[],S=0;S<c.length/p;S++)p===2?g.push(c[S*2],c[S*2+1],1):g.push(c[S*3],c[S*3+1],1);var O=earcut(u.vertices,u.holes,u.dimensions);y.push.apply(y,_toConsumableArray(O));for(var L=function(){var he=u.vertices.slice(V*p,(V+1)*p),ve=u.vertices.slice((V+1)*p,(V+2)*p);ve.length===0&&(ve=u.vertices.slice(0,p));var Pe=g.length/3;g.push(he[0],he[1],1,ve[0],ve[1],1,he[0],he[1],0,ve[0],ve[1],0),y.push.apply(y,_toConsumableArray([0,2,1,2,3,1].map(function(Xe){return Xe+Pe})))},V=0;V<o;V++)L();return{positions:g,index:y}}function z_(e){var a=earcut.flatten(e),r=earcut(a.vertices,a.holes,a.dimensions);return{positions:a.vertices,index:r}}function hC(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e[0][0],o=e[0][e[0].length-1];r[0]===o[0]&&r[1]===o[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var u=e[0].length,c=Rc().flatten(e),p=c.vertices,g=c.dimensions,y=[],S=[],O=[],L=0;L<p.length/g;L++)y.push(p[L*g],p[L*g+1],1,-1,-1),O.push(0,0,1);var V=Rc()(c.vertices,c.holes,c.dimensions);S.push.apply(S,(0,Rn.Z)(V));for(var G=function(){var Pe=c.vertices.slice(he*g,(he+1)*g),Xe=c.vertices.slice((he+1)*g,(he+2)*g);Xe.length===0&&(Xe=c.vertices.slice(0,g));var gt=y.length/5;y.push(Pe[0],Pe[1],1,0,0,Xe[0],Xe[1],1,.1,0,Pe[0],Pe[1],0,0,.8,Xe[0],Xe[1],0,.1,.8);var _t=Jl([Xe[0],Xe[1],1],[Pe[0],Pe[1],0],[Pe[0],Pe[1],1],a);O.push.apply(O,(0,Rn.Z)(_t).concat((0,Rn.Z)(_t),(0,Rn.Z)(_t),(0,Rn.Z)(_t))),S.push.apply(S,(0,Rn.Z)([1,2,0,3,2,1].map(function(zt){return zt+gt})))},he=0;he<u;he++)G();return{positions:y,index:S,normals:O}}function Jl(e,a,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=_a.create(),c=_a.create(),p=_a.create();o&&(e=ju(e),a=ju(a),r=ju(r));var g=_a.fromValues.apply(_a,(0,Rn.Z)(e)),y=_a.fromValues.apply(_a,(0,Rn.Z)(a)),S=_a.fromValues.apply(_a,(0,Rn.Z)(r));_a.sub(u,S,y),_a.sub(c,g,y),_a.cross(p,u,c);var O=_a.create();return _a.normalize(O,p),O}var Kf,uy=function(e){return e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn",e}({}),U_=function(e){return e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon",e}({});function Gp(e){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=Math.PI*2/e,o=[],u=0;u<e;u++)o.push(r*u+a*Math.PI/12);var c=o.map(function(p){var g=Math.sin(p+Math.PI/4),y=Math.cos(p+Math.PI/4);return[g,y,0]});return c}function Ab(){return Gp(30)}function dv(){return Gp(4)}function ly(){return Gp(3)}function Z_(){return Gp(6,1)}function pC(){return Gp(5)}var Mb=(Kf={},(0,He.Z)(Kf,U_.CIRCLE,Ab),(0,He.Z)(Kf,U_.HEXAGON,Z_),(0,He.Z)(Kf,U_.TRIANGLE,ly),(0,He.Z)(Kf,U_.SQUARE,dv),(0,He.Z)(Kf,U_.PENTAGON,pC),(0,He.Z)(Kf,uy.CYLINDER,Ab),(0,He.Z)(Kf,uy.HEXAGONCOLUMN,Z_),(0,He.Z)(Kf,uy.TRIANGLECOLUMN,ly),(0,He.Z)(Kf,uy.SQUARECOLUMN,dv),(0,He.Z)(Kf,uy.PENTAGONCOLUMN,pC),Kf),V_={};function H_(e){var a=au(e.coordinates);return{vertices:[].concat((0,Rn.Z)(a),(0,Rn.Z)(a),(0,Rn.Z)(a),(0,Rn.Z)(a)),indices:[0,1,2,2,3,0],size:a.length}}function Rb(e){var a=au(e.coordinates),r=N_(a);return{vertices:[].concat((0,Rn.Z)(r),(0,Rn.Z)(r),(0,Rn.Z)(r),(0,Rn.Z)(r)),indices:[0,1,2,2,3,0],size:r.length}}function Ib(e){var a=e.shape,r=NP(a,!1),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function dC(e){var a=au(e.coordinates);return{vertices:(0,Rn.Z)(a),indices:[0],size:a.length}}function j_(e){var a=e.coordinates,r=e.originCoordinates,o=e.version,u=new Ua({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=a;Array.isArray(c[0][0])||(c=[a]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],S=p[g];u.extrude_gaode2(y,S)}}else{var O=a;O[0]&&!Array.isArray(O[0][0])&&(O=[a]),O.forEach(function(V){u.extrude(V)})}var L=u.complex;return{vertices:L.positions,indices:L.indices,normals:L.normals,indexes:L.indexes,size:6}}function BB(e){var a=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat(_toConsumableArray(a),[1,2,-3],_toConsumableArray(a),[1,1,-3],_toConsumableArray(a),[0,1,0],_toConsumableArray(a),[0,0,0],_toConsumableArray(a),[1,0,0],_toConsumableArray(a),[1,2,-3],_toConsumableArray(a),[1,1,-3],_toConsumableArray(a),[0,1,0],_toConsumableArray(a),[0,0,0],_toConsumableArray(a)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function vC(e){var a=e.coordinates,r=e.originCoordinates,o=[];if(!Array.isArray(a[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var u=cy(a,r),c=u.results,p=u.totalDistance;return c.map(function(g){o.push(g[0],g[1],g[2],g[3],0,p)}),{vertices:o,indices:[],normals:[],size:6,count:c.length}}function So(e){var a=e.coordinates,r=[];if(!Array.isArray(a[0]))return{vertices:[],indices:[],size:4,count:0};var o=W_(a),u=o.results;return u.map(function(c){r.push(c[0],c[1],c[2],c[3])}),{vertices:r,indices:[],size:4,count:u.length}}function qm(e,a){var r=a[0]-e[0],o=a[1]-e[1];return Math.sqrt(r*r+o*o)}function Zg(e,a){return e.length<3&&e.push(0),a!==void 0&&e.push(a),e}function cy(e,a){var r=e,o=a||e;Array.isArray(r)&&Array.isArray(r[0])&&Array.isArray(r[0][0])&&(r=a.flat(),o=a.flat());var u=0;if(r.length<2)return{results:r,totalDistance:0};var c=[],p=Zg(r[0],u);c.push(p);for(var g=1;g<r.length-1;g++){var y=qm(Ds(o[g-1]),Ds(o[g]));u+=y;var S=Zg(r[g],u);c.push(S),c.push(S)}var O=qm(Ds(o[o.length-2]),Ds(o[o.length-1]));return u+=O,c.push(Zg(r[r.length-1],u)),{results:c,totalDistance:u}}function W_(e){if(e.length<2)return{results:e};var a=[],r=Zg(e[0]);a.push(r);for(var o=1;o<e.length-1;o++){var u=Zg(e[o]);a.push(u),a.push(u)}return a.push(Zg(e[e.length-1])),{results:a}}function fy(e){var a=e.coordinates,r=Rc().flatten(a),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Rc()(o,c,u),vertices:o,size:u}}function Pb(e){var a=e.coordinates,r=Rc().flatten(a),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Rc()(o,c,u),vertices:gC(o),size:u+4}}function gC(e){for(var a=[],r=ja(e),o=r.center,u=r.radius,c=0;c<e.length;c+=2){var p=e[c],g=e[c+1];a.push.apply(a,[p,g,0].concat((0,Rn.Z)(o),[u]))}return a}function Ob(e){var a=e.coordinates,r=hC(a,!0),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function mC(e){var a=e.shape,r=UP(a),o=r.positions,u=r.index;return{vertices:o,indices:u,size:3}}function G_(e){var a=e.coordinates,r=[].concat((0,Rn.Z)(a[0]),[0,0,1,a[1][0],a[0][1],0,1,1],(0,Rn.Z)(a[1]),[0,1,0],(0,Rn.Z)(a[0]),[0,0,1],(0,Rn.Z)(a[1]),[0,1,0,a[0][0],a[1][1],0,0,0]),o=[0,1,2,3,4,5];return{vertices:r,indices:o,size:5}}function kb(e,a){for(var r=a.segmentNumber,o=r===void 0?30:r,u=e.coordinates,c=[],p=[],g=function(O){c.push(O,1,O,u[0][0],u[0][1],u[1][0],u[1][1],O,-1,O,u[0][0],u[0][1],u[1][0],u[1][1]),O!==o-1&&p.push.apply(p,(0,Rn.Z)([0,1,2,1,3,2].map(function(L){return O*2+L})))},y=0;y<o;y++)g(y);return{vertices:c,indices:p,size:7}}function NB(e){var a=e.coordinates;a.length===2&&a.push(0);var r=$_(-1,1),o=$_(1,1),u=$_(-1,-1),c=$_(1,-1),p=[].concat(_toConsumableArray(a),_toConsumableArray(r),_toConsumableArray(a),_toConsumableArray(u),_toConsumableArray(a),_toConsumableArray(c),_toConsumableArray(a),_toConsumableArray(o)),g=[0,1,2,3,0,2];return{vertices:p,indices:g,size:5}}function NP(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(V_&&V_[e])return V_[e];var r=Mb[e]?Mb[e]():Mb.cylinder(),o=hC([r],a);return V_[e]=o,o}function zB(e,a){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=new Float32Array(e.length/r*3),c,p,g,y=vec3.create(),S=vec3.create(),O=vec3.create(),L=0,V=a.length;L<V;L+=3){c=a[L+0]*3,p=a[L+1]*3,g=a[L+2]*3;var G=[e[c],e[c+1]],he=[e[p],e[p+1]],ve=[e[g],e[g+1]];o&&(G=lngLatToMeters(G),he=lngLatToMeters(he),ve=lngLatToMeters(ve));var Pe=G,Xe=_slicedToArray(Pe,2),gt=Xe[0],_t=Xe[1],zt=vec3.fromValues(gt,_t,e[c+2]),Xt=he,nr=_slicedToArray(Xt,2),ar=nr[0],Tr=nr[1],Zr=vec3.fromValues(ar,Tr,e[p+2]),rn=ve,ln=_slicedToArray(rn,2),Gn=ln[0],fi=ln[1],Fi=vec3.fromValues(Gn,fi,e[g+2]);vec3.sub(y,Fi,Zr),vec3.sub(S,zt,Zr),vec3.cross(O,y,S),u[c]+=y[0],u[c+1]+=y[1],u[c+2]+=y[2],u[p]+=y[0],u[p+1]+=y[1],u[p+2]+=y[2],u[g]+=y[0],u[g+1]+=y[1],u[g+2]+=y[2]}return zP(u),u}function zP(e){for(var a=0,r=e.length;a<r;a+=3){var o=vec3.fromValues(e[a],e[a+1],e[a+2]),u=vec3.create();vec3.normalize(u,o),e.set(u,a)}}function UB(e){var a=e[0][0],r=e[0][e[0].length-1];return a[0]===r[0]&&a[1]===r[1]}function UP(e){var a=["cylinder","triangleColumn","hexagonColumn","squareColumn"],r=geometryShape[e]?geometryShape[e]():geometryShape.circle(),o=a.indexOf(e)===-1?fillPolygon([r]):extrudePolygon([r]);return o}function $_(e,a){var r=(e+1)/2,o=(a+1)/2;return[r,o]}function ZB(){var e=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),a=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:a,indices:r,size:5,normals:o}}function ap(){var e=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),a=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:a,indices:r,size:5,normals:o}}function Vg(e){var a=Dl();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Dl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var cu=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
in vec2 v_iconMapUV;
in vec4 v_lineData;
in vec4 v_color;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,ps=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Go={solid:0,dash:1},Hg=Ca.isNumber,hy=function(e){(0,yr.Z)(r,e);var a=Vg(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.NEAREST,min:Rt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,L=u.dashArray,V=L===void 0?[10,5]:L,G=u.forward,he=G===void 0?!0:G,ve=u.lineTexture,Pe=ve===void 0?!1:ve,Xe=u.iconStep,gt=Xe===void 0?100:Xe,_t=u.segmentNumber,zt=_t===void 0?30:_t,Xt=this.layer.getLayerConfig(),nr=Xt.animateOption,ar=V;O!=="dash"&&(ar=[0,0]),ar.length===2&&ar.push(0,0);var Tr=0,Zr=[0,0,0,0],rn=[0,0,0,0];c&&p&&(Zr=ho(c),rn=ho(p),Tr=1),this.rendererService.getDirty()&&this.texture.bind();var ln={u_animate:this.animateOption2Array(nr),u_dash_array:ar,u_sourceColor:Zr,u_targetColor:rn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:zt,u_lineDir:he?1:-1,u_icon_step:gt,u_line_texture:Pe?1:0,u_textureBlend:y==="normal"?0:1,u_blur:.9,u_line_type:Go[O||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Tr},Gn=this.getUniformsBufferInfo(ln);return Gn}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:cu,vert:ps,type:""}}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return this.initUniformsBuffer(),p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),O=S.frag,L=S.vert,V=S.type,ve.next=5,this.layer.buildLayerModel({moduleName:"lineArc2d"+V,vertexShader:L,fragmentShader:O,inject:this.getInject(),triangulation:kb,depth:{enable:!1},styleOption:{segmentNumber:y}});case 5:return G=ve.sent,ve.abrupt("return",[G]);case 7:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:wa.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,L=S.y;return[O,L]}}})}}]),r}(lu);function Db(e){var a=Vu();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Vu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Eu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,jg=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,yC={solid:0,dash:1},Lb=function(e){(0,yr.Z)(r,e);var a=Db(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.NEAREST,min:Rt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,L=u.dashArray,V=L===void 0?[10,5]:L,G=u.lineTexture,he=G===void 0?!1:G,ve=u.iconStep,Pe=ve===void 0?100:ve,Xe=u.segmentNumber,gt=Xe===void 0?30:Xe,_t=u.globalArcHeight,zt=_t===void 0?10:_t,Xt=this.layer.getLayerConfig(),nr=Xt.animateOption;V.length===2&&V.push(0,0);var ar=0,Tr=[0,0,0,0],Zr=[0,0,0,0];c&&p&&(Tr=ho(c),Zr=ho(p),ar=1),this.rendererService.getDirty()&&this.texture.bind();var rn={u_animate:this.animateOption2Array(nr),u_dash_array:V,u_sourceColor:Tr,u_targetColor:Zr,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:wb,u_global_height:zt,segmentNumber:gt,u_line_type:yC[O]||0,u_icon_step:Pe,u_line_texture:he?1:0,u_textureBlend:y==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:ar},ln=this.getUniformsBufferInfo(rn);return ln}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:Eu,vert:jg,type:""}}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,S=this.getShaders(),O=S.frag,L=S.vert,V=S.type,ve.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+V,vertexShader:L,fragmentShader:O,inject:this.getInject(),triangulation:kb,styleOption:{segmentNumber:y}});case 4:return G=ve.sent,ve.abrupt("return",[G]);case 6:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:wa.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,L=S.y;return[O,L]}}})}}]),r}(lu),ZP={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},zc=1/2;function _C(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?1:u;return{vertices:[0,zc*e,1*e*o,-(c+zc)*e,1*e*o,(c-zc)*e,0,zc*e,1*e*o,-(c+zc)*e,1*e*o,(c-zc)*e],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*e,-2*e,1,-2*e,1.5*e,1,1*e,1.5*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function X_(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?3:u;return{vertices:[0,0,1*e*o,1*c,1*e*o,-1*c,0,0,1*e*o,1*c,1*e*o,-1*c],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*e,1,2,1*e,1,-2,1*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function VP(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?2:u;return{vertices:[0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2,0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function HP(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?3:u;return{vertices:[0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c,0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function op(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?3:u;return{vertices:[0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c,0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Y_(e,a){var r=a.width,o=r===void 0?2:r,u=a.height,c=u===void 0?2:u,p=Ab(),g=Rc().flatten([p]),y=Rc()(g.vertices,g.holes,g.dimensions),S=p.map(function(O){return[O[0]*o*e,O[1]*c]}).flat();return{vertices:[].concat((0,Rn.Z)(S),(0,Rn.Z)(S)),dimensions:2,indices:y.map(function(O){return O+p.length}),outLineIndices:y,normals:[].concat((0,Rn.Z)(p.map(function(O){return[O[1]*c,O[0]*o*e,1]}).flat()),(0,Rn.Z)(new Array(p.length*3).fill(0)))}}function Qm(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=(0,tf.Z)(r.source)==="object"?r.source.type:r.source,u=(0,tf.Z)(r.target)==="object"?r.target.type:r.target,c=(0,tf.Z)(r.source)==="object"?r.source:{},p=c.width,g=p===void 0?o?ZP[o]:0:p,y=c.height,S=y===void 0?2:y,O=(0,tf.Z)(r.target)==="object"?r.target:{},L=O.width,V=L===void 0?u?ZP[u]:0:L,G=O.height,he=G===void 0?2:G;return{vertices:[0,zc,1*g].concat((0,Rn.Z)(e),[1,zc,-1*V],(0,Rn.Z)(e),[1,-zc,-1*V],(0,Rn.Z)(e),[0,-zc,1*g],(0,Rn.Z)(e),[0,zc,1*g],(0,Rn.Z)(e),[1,zc,-1*V],(0,Rn.Z)(e),[1,-zc,-1*V],(0,Rn.Z)(e),[0,-zc,1*g],(0,Rn.Z)(e)),outLineIndices:[0,1,2,0,2,3].map(function(ve){return ve+a}),indices:[4,5,6,4,6,7].map(function(ve){return ve+a}),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function Cf(e,a){var r=(0,tf.Z)(e)==="object"?e.type:e,o=a==="source"?1:-1,u=(0,tf.Z)(e)==="object"?e:{};switch(r){case"circle":return Y_(o,u);case"triangle":return X_(o,u);case"diamond":return HP(o,u);case"rect":return VP(o,u);case"classic":return op(o,u);case"halfTriangle":return _C(o,u);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function K_(e){var a=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat((0,Rn.Z)(a),[1,2,-3],(0,Rn.Z)(a),[1,1,-3],(0,Rn.Z)(a),[0,1,0],(0,Rn.Z)(a),[0,0,0],(0,Rn.Z)(a),[1,0,0],(0,Rn.Z)(a),[1,2,-3],(0,Rn.Z)(a),[1,1,-3],(0,Rn.Z)(a),[0,1,0],(0,Rn.Z)(a),[0,0,0],(0,Rn.Z)(a)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function xC(e,a){return a?jP(e,a):K_(e)}function jP(e,a){var r=e.coordinates.flat(),o=a,u=o.target,c=u===void 0?"classic":u,p=o.source,g=p===void 0?"circle":p,y=mc(Cf(g,"source"),r,0,0),S=Qm(r,y.vertices.length/7,a),O=mc(Cf(c,"target"),r,1,y.vertices.length/7+S.vertices.length/7),L={vertices:[].concat((0,Rn.Z)(y.vertices),(0,Rn.Z)(S.vertices),(0,Rn.Z)(O.vertices)),indices:[].concat((0,Rn.Z)(y.outLineIndices),(0,Rn.Z)(S.outLineIndices),(0,Rn.Z)(O.outLineIndices),(0,Rn.Z)(y.indices),(0,Rn.Z)(S.indices),(0,Rn.Z)(O.indices)),normals:[].concat((0,Rn.Z)(y.normals),(0,Rn.Z)(S.normals),(0,Rn.Z)(O.normals)),size:7};return L}function mc(e,a){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=[],c=e.vertices,p=e.indices,g=e.dimensions,y=e.outLineIndices,S=0;S<c.length;S+=g)u.push.apply(u,[r,c[S+1],c[S]].concat((0,Rn.Z)(a)));return(0,ne.Z)((0,ne.Z)({},e),{},{vertices:u,indices:p.map(function(O){return O+o}),outLineIndices:y.map(function(O){return O+o})})}function Jm(e){var a=Ih();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Ih(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var q_=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Fb=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`,WP=function(e){(0,yr.Z)(r,e);var a=Jm(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.gapWidth,p=c===void 0?2:c,g=u.strokeWidth,y=g===void 0?1:g,S=u.strokeOpacity,O=S===void 0?1:S,L={u_gap_width:p,u_stroke_width:y,u_stroke_opacity:O},V=this.getUniformsBufferInfo(L);return V}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"flow_line",vertexShader:Fb,fragmentShader:q_,inject:this.getInject(),triangulation:xC,styleOption:this.layer.getLayerConfig().symbol,primitive:Rt.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:wa.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(c,p,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:wa.Attribute,descriptor:{name:"a_Normal",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}})}}]),r}(lu);function GP(e){var a=bC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function bC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var SC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,ro=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,EC={solid:0,dash:1},$P=function(e){(0,yr.Z)(r,e);var a=GP(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.NEAREST,min:Rt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,L=u.dashArray,V=L===void 0?[10,5]:L,G=u.lineTexture,he=G===void 0?!1:G,ve=u.iconStep,Pe=ve===void 0?100:ve,Xe=u.segmentNumber,gt=Xe===void 0?30:Xe,_t=this.layer.getLayerConfig(),zt=_t.animateOption;V.length===2&&V.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var Xt=0,nr=[0,0,0,0],ar=[0,0,0,0];c&&p&&(nr=ho(c),ar=ho(p),Xt=1);var Tr=this.layer.getLayerAnimateTime();isNaN(Tr)&&(Tr=0);var Zr={u_animate:this.animateOption2Array(zt),u_dash_array:V,u_sourceColor:nr,u_targetColor:ar,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:gt,u_line_type:EC[O]||0,u_icon_step:Pe,u_line_texture:he?1:0,u_textureBlend:y==="normal"?0:1,u_time:Tr,u_linearColor:Xt},rn=this.getUniformsBufferInfo(Zr);return rn}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,L.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:ro,fragmentShader:SC,triangulation:kb,styleOption:{segmentNumber:y},inject:this.getInject(),depth:{enable:!1}});case 3:return S=L.sent,L.abrupt("return",[S]);case 5:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:wa.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,L=S.y;return[O,L]}}})}}]),r}(lu),Q_=function(e){return e[e.solid=0]="solid",e[e.dash=1]="dash",e}({}),wC=function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),J_=function(e){return e.NORMAL="normal",e.REPLACE="replace",e}({}),Bb=function(e){return e[e.pixel=0]="pixel",e[e.meter=1]="meter",e}({}),XP=function(e){return e.ALWAYS="always",e.DRAGEND="dragend",e}({});function CC(e){var a=YP();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function YP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var KP=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
in vec2 v_iconMapUV;
in vec4 v_texture_data;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,TC=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;
layout(location = 13) in vec4 a_NormalAndMiter;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};
#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;
  v_d_distance_ratio = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_NormalAndMiter.w * setPickingSize(a_SizeDistanceAndTotalDistance.x) * reverse_offset_normal(a_NormalAndMiter.xyz);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_SizeDistanceAndTotalDistance.b;
  float currentLinePointRatio = lineDistance / a_SizeDistanceAndTotalDistance.a;
 

  float lineOffsetWidth = length(offset + offset * sign(a_NormalAndMiter.w)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_SizeDistanceAndTotalDistance.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_SizeDistanceAndTotalDistance.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_SizeDistanceAndTotalDistance.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,VB={solid:0,dash:1},AC=function(e){(0,yr.Z)(r,e);var a=CC(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"textureEventFlag",!1),(0,He.Z)((0,wr.Z)(o),"texture",o.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.textures.length===0&&(o.textures=[o.texture]),o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.NEAREST,min:Rt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.lineType,O=S===void 0?"solid":S,L=u.dashArray,V=L===void 0?[10,5,0,0]:L,G=u.lineTexture,he=G===void 0?!1:G,ve=u.iconStep,Pe=ve===void 0?100:ve,Xe=u.vertexHeightScale,gt=Xe===void 0?20:Xe,_t=u.strokeWidth,zt=_t===void 0?0:_t,Xt=u.raisingHeight,nr=Xt===void 0?0:Xt,ar=u.heightfixed,Tr=ar===void 0?!1:ar,Zr=u.linearDir,rn=Zr===void 0?wC.VERTICAL:Zr,ln=u.blur,Gn=ln===void 0?[1,1,1,0]:ln,fi=V;O!=="dash"&&(fi=[0,0,0,0]),fi.length===2&&fi.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var Fi=this.layer.getLayerConfig(),uo=Fi.animateOption,is=0,as=[0,0,0,0],tu=[0,0,0,0];c&&p&&(as=ho(c),tu=ho(p),is=1);var hu={u_animate:this.animateOption2Array(uo),u_dash_array:fi,u_blur:Gn,u_sourceColor:as,u_targetColor:tu,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:Pe,u_heightfixed:Number(Tr),u_vertexScale:gt,u_raisingHeight:Number(nr),u_strokeWidth:zt,u_textureBlend:y===J_.NORMAL?0:1,u_line_texture:he?1:0,u_linearDir:rn===wC.VERTICAL?1:0,u_linearColor:is,u_time:this.layer.getLayerAnimateTime()||0},lf=this.getUniformsBufferInfo(hu);return lf}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!1:g,S=this.getShaders(),O=S.frag,L=S.vert,V=S.type,this.layer.triangulation=$d,ve.next=5,this.layer.buildLayerModel({moduleName:"line"+V,vertexShader:L,fragmentShader:O,triangulation:$d,inject:this.getInject(),depth:{enable:y}});case 5:return G=ve.sent,ve.abrupt("return",[G]);case 7:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:KP,vert:TC,type:""}}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:wa.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:Wa.SIZE,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(p,g,y){var S=p.size,O=S===void 0?1:S,L=Array.isArray(O)?[O[0],O[1]]:[O,0];return[L[0],L[1],y[3],y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normalAndMiter",type:wa.Attribute,descriptor:{name:"a_NormalAndMiter",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(p,g,y,S,O){return[].concat((0,Rn.Z)(O),[y[4]])}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:Wa.UV,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,L=S.y;return[O,L]}}})}}]),r}(lu);function qP(e){var a=MC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function MC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QP=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,JP=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,HB=Ca.isNumber,eO=function(e){(0,yr.Z)(r,e);var a=qP(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.lineType,y=g===void 0?"solid":g,S=u.dashArray,O=S===void 0?[10,5,0,0]:S,L=u.vertexHeightScale,V=L===void 0?20:L,G=O;y!=="dash"&&(G=[0,0,0,0]),G.length===2&&G.push(0,0);var he=0,ve=[0,0,0,0],Pe=[0,0,0,0];c&&p&&(ve=ho(c),Pe=ho(p),he=1);var Xe={u_sourceColor:ve,u_targetColor:Pe,u_dash_array:G,u_vertexScale:V,u_linearColor:he},gt=this.getUniformsBufferInfo(Xe);return gt}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:QP,vert:JP,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return this.initUniformsBuffer(),p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,V.next=4,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,triangulation:vC,inject:this.getInject(),primitive:Rt.LINES,depth:{enable:!1},pick:!1});case 4:return O=V.sent,V.abrupt("return",[O]);case 6:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:wa.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:Wa.SIZE,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(c,p,g){var y=c.size,S=y===void 0?1:y,O=Array.isArray(S)?[S[0],S[1]]:[S,0];return[O[0],O[1],g[3],g[5]]}}})}}]),r}(lu);function tO(e){var a=rO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function rO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vv=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,Wg=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,RC=function(e){(0,yr.Z)(r,e);var a=tO(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.NEAREST,min:Rt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,S=u.heightfixed,O=S===void 0?!1:S,L=u.lineTexture,V=L===void 0?!1:L,G=u.iconStep,he=G===void 0?100:G,ve=u.iconStepCount,Pe=ve===void 0?1:ve,Xe=this.layer.getLayerConfig(),gt=Xe.animateOption;this.rendererService.getDirty()&&this.texture.bind();var _t=0,zt=[0,0,0,0],Xt=[0,0,0,0];c&&p&&(zt=ho(c),Xt=ho(p),_t=1);var nr={u_animate:this.animateOption2Array(gt),u_sourceColor:zt,u_targetColor:Xt,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:he,u_heightfixed:Number(O),u_linearColor:_t,u_line_texture:V?1:0,u_textureBlend:y==="normal"?0:1,u_iconStepCount:Pe,u_time:this.layer.getLayerAnimateTime()||0},ar=this.getUniformsBufferInfo(nr);return ar}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Wg,fragmentShader:vv,triangulation:j_,inject:this.getInject(),depth:{enable:!1},blend:this.getBlend()});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:wa.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p,g,y){return[y[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:wa.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p,g,y){return[y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:wa.Attribute,descriptor:{name:"a_Normal",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(p,g,y,S,O){return O}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:wa.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p,g,y){return[y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,S=g[y]||{x:0,y:0},O=S.x,L=S.y;return[O,L]}}})}}]),r}(lu),IC={arc:hy,arc3d:Lb,greatcircle:$P,wall:RC,line:AC,simple:eO,flowline:WP,earthArc3d:Lb},Gg=IC;function Nb(e){var a=nO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function nO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var e0=function(e){(0,yr.Z)(r,e);var a=Nb(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","LineLayer"),(0,He.Z)((0,wr.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,He.Z)((0,wr.Z)(o),"arrowInsertCount",0),(0,He.Z)((0,wr.Z)(o),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),o}return(0,ot.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new Gg[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}};return c[u]}},{key:"getModelType",value:function(){var u;if(this.layerType)return this.layerType;var c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p||"line"}},{key:"processData",value:function(u){if(this.getModelType()!=="simple")return u;var c=[];return u.map(function(p){if(Array.isArray(p.coordinates)&&Array.isArray(p.coordinates[0])&&Array.isArray(p.coordinates[0][0])){var g=(0,ne.Z)({},p);p.coordinates.map(function(y){c.push((0,ne.Z)((0,ne.Z)({},g),{},{coordinates:y}))})}else c.push(p)}),c}}]),r}(Ym);function iO(e){var a=e1();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function e1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var aO=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,oO=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function PC(e){var a=e.coordinates;return{vertices:(0,Rn.Z)(a),indices:[0],size:a.length}}var sO=function(e){(0,yr.Z)(r,e);var a=iO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.blend,p=u.strokeOpacity,g=p===void 0?1:p,y=u.strokeWidth,S=y===void 0?0:y,O=u.stroke,L=O===void 0?"#fff":O,V={u_stroke_color:ho(L),u_additive:c==="additive"?1:0,u_stroke_opacity:g,u_stroke_width:S},G=this.getUniformsBufferInfo(V);return G}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=PC,this.initUniformsBuffer(),y.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:oO,fragmentShader:aO,inject:this.getInject(),triangulation:PC,depth:{enable:!1},primitive:Rt.POINTS});case 4:return p=y.sent,y.abrupt("return",[p]);case 6:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(lu);function uO(e){var a=lO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function lO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var zb=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,cO=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,fO=Ca.isNumber,hO=function(e){(0,yr.Z)(r,e);var a=uO(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"raiseCount",0),(0,He.Z)((0,wr.Z)(o),"raiseRepeat",0),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.opacity,y=g===void 0?1:g,S=u.sourceColor,O=u.targetColor,L=u.pickLight,V=L===void 0?!1:L,G=u.heightfixed,he=G===void 0?!0:G,ve=u.opacityLinear,Pe=ve===void 0?{enable:!1,dir:"up"}:ve,Xe=u.lightEnable,gt=Xe===void 0?!0:Xe,_t=0,zt=[0,0,0,0],Xt=[0,0,0,0];if(S&&O&&(zt=ho(S),Xt=ho(O),_t=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var nr=p.speed,ar=nr===void 0?.01:nr;this.raiseCount+=ar,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var Tr={u_sourceColor:zt,u_targetColor:Xt,u_linearColor:_t,u_pickLight:Number(V),u_heightfixed:Number(he),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:fO(y)?y:1,u_opacitylinear:Number(Pe.enable),u_opacitylinear_dir:Pe.dir==="up"?1:0,u_lightEnable:Number(gt)},Zr=this.getUniformsBufferInfo(Tr);return Zr}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption.repeat,y=g===void 0?1:g,this.raiseRepeat=y,L.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:cO,fragmentShader:zb,triangulation:Ib,depth:{enable:!0},inject:this.getInject(),cull:{enable:!0,face:Sc(this.mapService.version)},blend:this.getBlend()});case 4:return S=L.sent,L.abrupt("return",[S]);case 6:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:wa.Attribute,descriptor:{name:"a_Normal",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:wa.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c){var p=au(c.coordinates);return N_([p[0],p[1]])}}})}}]),r}(lu);function pO(e){var a=t1();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function t1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dO=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,vO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`,gO=function(e){(0,yr.Z)(r,e);var a=pO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,S=u.blend,O=u.blur,L=O===void 0?0:O;this.layer.getLayerConfig();var V={u_additive:S==="additive"?1:0,u_stroke_opacity:p,u_stroke_width:y,u_blur:L},G=this.getUniformsBufferInfo(V);return G}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=Rb,y.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:vO,fragmentShader:dO,triangulation:Rb,inject:this.getInject(),depth:{enable:!0},blend:this.getBlend()});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:wa.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Wa.EXTRUDE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(p,g,y,S){var O=(0,ji.Z)(y,3),L=O[0],V=O[1],G=O[2],he=_a.fromValues(0,0,1),ve=_a.fromValues(L,0,G),Pe=L>=0?_a.angle(he,ve):Math.PI*2-_a.angle(he,ve),Xe=Math.PI*2-Math.asin(V/100),gt=Js();Ya(gt,gt,Pe),Np(gt,gt,Xe);var _t=_a.fromValues(1,1,0);_a.transformMat4(_t,_t,gt),_a.normalize(_t,_t);var zt=_a.fromValues(-1,1,0);_a.transformMat4(zt,zt,gt),_a.normalize(zt,zt);var Xt=_a.fromValues(-1,-1,0);_a.transformMat4(Xt,Xt,gt),_a.normalize(Xt,Xt);var nr=_a.fromValues(1,-1,0);_a.transformMat4(nr,nr,gt),_a.normalize(nr,nr);var ar=[].concat((0,Rn.Z)(_t),(0,Rn.Z)(zt),(0,Rn.Z)(Xt),(0,Rn.Z)(nr)),Tr=S%4*3;return[ar[Tr],ar[Tr+1],ar[Tr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:wa.Attribute,descriptor:{name:"a_Shape",shaderLocation:Wa.SHAPE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,S=u.layer.getLayerConfig().shape2d,O=S.indexOf(y);return[O]}}})}}]),r}(lu);function mO(e){var a=yO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function yO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var OC=`in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;


layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,_O=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`,Ub=function(e){(0,yr.Z)(r,e);var a=mO(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"raiseCount",0),(0,He.Z)((0,wr.Z)(o),"raiseRepeat",0),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.sourceColor,y=u.targetColor,S=u.pickLight,O=S===void 0?!1:S,L=u.heightfixed,V=L===void 0?!1:L,G=u.opacityLinear,he=G===void 0?{enable:!1,dir:"up"}:G,ve=u.lightEnable,Pe=ve===void 0?!0:ve,Xe=0,gt=[0,0,0,0],_t=[0,0,0,0];if(g&&y&&(gt=ho(g),_t=ho(y),Xe=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var zt=p.speed,Xt=zt===void 0?.01:zt;this.raiseCount+=Xt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var nr={u_pickLight:Number(O),u_heightfixed:Number(V),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:Xe,u_sourceColor:gt,u_targetColor:_t,u_opacitylinear:Number(he.enable),u_opacitylinear_dir:he.dir==="up"?1:0,u_lightEnable:Number(Pe)},ar=this.getUniformsBufferInfo(nr);return ar}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L;return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!0:g,S=p.animateOption.repeat,O=S===void 0?1:S,this.raiseRepeat=O,this.initUniformsBuffer(),G.next=5,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:_O,fragmentShader:OC,triangulation:Ib,inject:this.getInject(),cull:{enable:!0,face:Sc(this.mapService.version)},depth:{enable:y}});case 5:return L=G.sent,G.abrupt("return",[L]);case 7:case"end":return G.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:wa.Attribute,descriptor:{name:"a_Normal",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:wa.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Wa.EXTRUDE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c){var p=au(c.coordinates);return[p[0],p[1],0]}}})}}]),r}(lu);function xO(e){var a=kC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function kC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Zb=`layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};


in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,eg=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_SizeAndShape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_SizeAndShape.y;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_SizeAndShape.x);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,gv=function(e){(0,yr.Z)(r,e);var a=xO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,S=u.blend,O=u.blur,L=O===void 0?0:O,V=u.raisingHeight,G=V===void 0?0:V,he=u.heightfixed,ve=he===void 0?!1:he,Pe=u.unit,Xe=Pe===void 0?"pixel":Pe,gt=this.getAnimateUniforms().u_time;isNaN(gt)&&(gt=-1);var _t={u_blur_height_fixed:[L,Number(G),Number(ve)],u_stroke_width:y,u_additive:S==="additive"?1:0,u_stroke_opacity:p,u_size_unit:Bb[Xe],u_time:gt,u_animate:this.getAnimateUniforms().u_animate},zt=this.getUniformsBufferInfo(_t);return zt}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1}:c;return{u_animate:this.animateOption2Array(p),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),pd)}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption,y=g===void 0?{enable:!1}:g,S=this.getShaders(y),O=S.frag,L=S.vert,V=S.type,this.layer.triangulation=pd,this.initUniformsBuffer(),ve.next=6,this.layer.buildLayerModel({moduleName:V,vertexShader:L,fragmentShader:O,inject:this.getInject(),triangulation:pd,depth:{enable:!1}});case 6:return G=ve.sent,ve.abrupt("return",[G]);case 8:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(u){return{frag:Zb,vert:eg,type:"pointFill"}}},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:wa.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Wa.EXTRUDE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(p,g,y,S){var O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=S%4*3;return[O[L],O[L+1],O[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"sizeAndShape",type:wa.Attribute,descriptor:{name:"a_SizeAndShape",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?5:g,S=p.shape,O=S===void 0?2:S,L=u.indexOf(O),V=Array.isArray(y)?y[0]:y;return[V,L]}}})}}]),r}(lu);function mv(e){var a=Vb();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Vb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var py=`in vec4 v_color;
in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,dy=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,bO=function(e){(0,yr.Z)(r,e);var a=mv(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"meter2coord",1),(0,He.Z)((0,wr.Z)(o),"isMeter",!1),(0,He.Z)((0,wr.Z)(o),"radian",0),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),o.layerService.throttleRenderLayers();return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.LINEAR,min:Rt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0}),o.textures=[o.texture]}),o}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,S=u.unit,O=S===void 0?"pixel":S;this.rendererService.getDirty()&&this.texture.bind();var L={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(y),u_raisingHeight:Number(p),u_size_unit:Bb[O],u_texture:this.texture};this.textures=[this.texture];var V=this.getUniformsBufferInfo(L);return V}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),H_)}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:dy,fragmentShader:py,triangulation:H_,depth:{enable:!1},inject:this.getInject(),cull:{enable:!0,face:Sc(this.mapService.version)}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;this.iconService.off("imageUpdate",this.updateTexture),(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_Uv",shaderLocation:Wa.UV,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,S=g[y]||{x:-64,y:-64},O=S.x,L=S.y;return[O,L]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:wa.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Wa.EXTRUDE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(p,g,y,S){var O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],L=S%4*3;return[O[L],O[L+1],O[L+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}})}}]),r}(lu);function DC(e){var a=Hb();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Hb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var jb=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,SO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,LC=function(e){(0,yr.Z)(r,e);var a=DC(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){o.layerService.throttleRenderLayers()});return}o.texture=g({data:o.iconService.getCanvas(),mag:Rt.LINEAR,min:Rt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0})}),o}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){this.rendererService.getDirty()&&this.texture.bind();var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,S={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(p),u_heightfixed:Number(y),u_texture:this.texture};this.textures=[this.texture];var O=this.getUniformsBufferInfo(S);return O}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:SO,fragmentShader:jb,triangulation:dC,inject:this.getInject(),depth:{enable:!1},primitive:Rt.POINTS});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_Uv",shaderLocation:Wa.UV,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,S=g[y]||{x:-64,y:-64},O=S.x,L=S.y;return[O,L]}}})}}]),r}(lu);function EO(e){var a=FC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function FC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var BC=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,wO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function NC(e){var a=e.coordinates;return{vertices:(0,Rn.Z)(a),indices:[0],size:a.length}}var Wb=function(e){(0,yr.Z)(r,e);var a=EO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var u={u_size_scale:.5},c=this.getUniformsBufferInfo(u);return c}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=NC,this.initUniformsBuffer(),y.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:wO,fragmentShader:BC,triangulation:NC,inject:this.getInject(),depth:{enable:!1},primitive:Rt.POINTS,pick:!1});case 4:return p=y.sent,y.abrupt("return",[p]);case 6:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(lu);function CO(e){var a=TO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function TO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var AO=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,MO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 11) in vec4 a_ExtrudeAndSize;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_ExtrudeAndSize.xyz;
  float newSize = setPickingSize(a_ExtrudeAndSize.w);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_ExtrudeAndSize.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_ExtrudeAndSize.w, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`,RO=function(e){(0,yr.Z)(r,e);var a=CO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.blend,p=u.speed,g=p===void 0?1:p,y=u.unit,S=y===void 0?"pixel":y,O={u_additive:c==="additive"?1:0,u_size_unit:Bb[S],u_speed:g,u_time:this.layer.getLayerAnimateTime()},L=this.getUniformsBufferInfo(O);return L}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),H_)}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:MO,fragmentShader:AO,triangulation:H_,inject:this.getInject(),depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrudeAndSize",type:wa.Attribute,descriptor:{name:"a_ExtrudeAndSize",shaderLocation:Wa.EXTRUDE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(c,p,g,y){var S=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],O=y%4*3,L=c.size,V=L===void 0?5:L,G=Array.isArray(V)?V[0]:V;return[S[O],S[O+1],S[O+2],G]}}})}}]),r}(lu);function IO(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=PO(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function PO(e,a){if(e){if(typeof e=="string")return zC(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zC(e,a)}}function zC(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var OO=function(){function e(a,r,o){(0,Ot.Z)(this,e),(0,He.Z)(this,"boxCells",[]);var u=this.boxCells;this.xCellCount=Math.ceil(a/o),this.yCellCount=Math.ceil(r/o);for(var c=0;c<this.xCellCount*this.yCellCount;c++)u.push([]);this.boxKeys=[],this.bboxes=[],this.width=a,this.height=r,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/r,this.boxUid=0}return(0,ot.Z)(e,[{key:"insert",value:function(r,o,u,c,p){this.forEachCell(o,u,c,p,this.insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(c),this.bboxes.push(p)}},{key:"query",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!1,p)}},{key:"hitTest",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!0,p)}},{key:"insertBoxCell",value:function(r,o,u,c,p,g){this.boxCells[p].push(g)}},{key:"queryHitTest",value:function(r,o,u,c,p,g){if(u<0||r>this.width||c<0||o>this.height)return p?!1:[];var y=[];if(r<=0&&o<=0&&this.width<=u&&this.height<=c){if(p)return!0;for(var S=0;S<this.boxKeys.length;S++)y.push({key:this.boxKeys[S],x1:this.bboxes[S*4],y1:this.bboxes[S*4+1],x2:this.bboxes[S*4+2],y2:this.bboxes[S*4+3]});return g?y.filter(g):y}var O={hitTest:p,seenUids:{box:{},circle:{}}};return this.forEachCell(r,o,u,c,this.queryCell,y,O,g),p?y.length>0:y}},{key:"queryCell",value:function(r,o,u,c,p,g,y,S){var O=y.seenUids,L=this.boxCells[p];if(L!==null){var V=this.bboxes,G=IO(L),he;try{for(G.s();!(he=G.n()).done;){var ve=he.value;if(!O.box[ve]){O.box[ve]=!0;var Pe=ve*4;if(r<=V[Pe+2]&&o<=V[Pe+3]&&u>=V[Pe+0]&&c>=V[Pe+1]&&(!S||S(this.boxKeys[ve]))){if(y.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[ve],x1:V[Pe],y1:V[Pe+1],x2:V[Pe+2],y2:V[Pe+3]})}}}}catch(Xe){G.e(Xe)}finally{G.f()}}return!1}},{key:"forEachCell",value:function(r,o,u,c,p,g,y,S){for(var O=this.convertToXCellCoord(r),L=this.convertToYCellCoord(o),V=this.convertToXCellCoord(u),G=this.convertToYCellCoord(c),he=O;he<=V;he++)for(var ve=L;ve<=G;ve++){var Pe=this.xCellCount*ve+he;if(p.call(this,r,o,u,c,Pe,g,y,S))return}}},{key:"convertToXCellCoord",value:function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}},{key:"convertToYCellCoord",value:function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}}]),e}(),kO=OO,DO=function(){function e(a,r){(0,Ot.Z)(this,e),(0,He.Z)(this,"viewportPadding",100),this.width=a,this.height=r,this.viewportPadding=Math.max(a,r),this.grid=new kO(a+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=a+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=a+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding}return(0,ot.Z)(e,[{key:"placeCollisionBox",value:function(r){var o=r.x1+r.anchorPointX+this.viewportPadding,u=r.y1+r.anchorPointY+this.viewportPadding,c=r.x2+r.anchorPointX+this.viewportPadding,p=r.y2+r.anchorPointY+this.viewportPadding;return!this.isInsideGrid(o,u,c,p)||this.grid.hitTest(o,u,c,p)?{box:[]}:{box:[o,u,c,p]}}},{key:"insertCollisionBox",value:function(r,o){var u={featureIndex:o};this.grid.insert(u,r[0],r[1],r[2],r[3])}},{key:"project",value:function(r,o,u){var c=zp(o,u,0,1),p=nf(),g=Cg.apply($,(0,Rn.Z)(r));return Wf(p,c,g),{x:(p[0]/p[3]+1)/2*this.width+this.viewportPadding,y:(-p[1]/p[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(r,o,u,c){return u>=0&&r<this.gridRightBoundary&&c>=0&&o<this.gridBottomBoundary}}]),e}();function Gb(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$b(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function $b(e,a){if(e){if(typeof e=="string")return Xb(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xb(e,a)}}function Xb(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function UC(e){var a=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0;break;default:a=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:a,verticalAlign:r}}function ZC(e,a,r,o,u){if(u){var c=e[o],p=c.glyph;if(p)for(var g=a[p].advance*c.scale,y=(e[o].x+g)*u,S=r;S<=o;S++)e[S].x-=y}}function VC(e,a,r,o,u,c,p){var g=(a-r)*u,y=(-o*p+.5)*c,S=Gb(e),O;try{for(S.s();!(O=S.n()).done;){var L=O.value;L.x+=g,L.y+=y}}catch(V){S.e(V)}finally{S.f()}}function LO(e,a,r,o,u,c,p){var g=-8,y=0,S=g,O=0,L=e.positionedGlyphs,V=c==="right"?1:c==="left"?0:.5,G=L.length;r.forEach(function(gt){if(gt.split("").forEach(function(zt){var Xt=a[zt],nr=0;Xt&&(L.push({glyph:zt,x:y,y:S+nr,vertical:!1,scale:1,metrics:Xt}),y+=Xt.advance+p)}),L.length!==G){var _t=y-p;O=Math.max(_t,O),ZC(L,a,G,L.length-1,V)}y=0,S-=o+5});var he=UC(u),ve=he.horizontalAlign,Pe=he.verticalAlign;VC(L,V,ve,Pe,O,o,r.length);var Xe=S-g;e.top+=-Pe*Xe,e.bottom=e.top-Xe,e.left+=-ve*O,e.right=e.left+O}function FO(e,a,r,o,u,c,p){var g=-8,y=0,S=g,O=0,L=e.positionedGlyphs,V=c==="right"?1:c==="left"?0:.5,G=L.length;r.forEach(function(gt){var _t=a[gt],zt=0;if(_t&&(L.push({glyph:gt,x:_t.advance/2,y:S+zt,vertical:!1,scale:1,metrics:_t}),y+=_t.advance+p),L.length!==G){var Xt=y-p;O=Math.max(Xt,O),ZC(L,a,G,L.length-1,V)}y=0,S-=o+5});var he=UC(u),ve=he.horizontalAlign,Pe=he.verticalAlign;VC(L,V,ve,Pe,O,o,r.length);var Xe=S-g;e.top+=-Pe*Xe,e.bottom=e.top-Xe,e.left+=-ve*O,e.right=e.left+O}function BO(e,a,r,o,u,c){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],g=arguments.length>7?arguments[7]:void 0,y=e.split(`
`),S=[],O={positionedGlyphs:S,top:p[1],bottom:p[1],left:p[0],right:p[0],lineCount:y.length,text:e};return g?FO(O,a,y,r,o,u,c):LO(O,a,y,r,o,u,c),S.length?O:!1}function HC(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,o=e.positionedGlyphs,u=o===void 0?[]:o,c=[],p=Gb(u),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,S=y.metrics,O=4,L=S.advance*y.scale/2,V=r?[y.x+L,y.y]:[0,0],G=r?[0,0]:[y.x+L+a[0],y.y+a[1]],he=(0-O)*y.scale-L+G[0],ve=(0-O)*y.scale+G[1],Pe=he+S.width*y.scale,Xe=ve+S.height*y.scale,gt={x:he,y:ve},_t={x:Pe,y:ve},zt={x:he,y:Xe},Xt={x:Pe,y:Xe};c.push({tl:gt,tr:_t,bl:zt,br:Xt,tex:S,glyphOffset:V})}}catch(nr){p.e(nr)}finally{p.f()}return c}function NO(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=r1(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function r1(e,a){if(e){if(typeof e=="string")return n1(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n1(e,a)}}function n1(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function jC(e){var a=yv();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function yv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var WC=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec4 v_color;
in vec4 v_stroke_color;
in vec2 v_uv;
in float v_gamma_scale;
in float v_fontScale;
out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,Yb=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec4 a_textUvAndOffsets;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;



#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_textUvAndOffsets.xy / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textUvAndOffsets.zw,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,t0=Ca.isEqual;function GC(e){var a=this,r=e.id,o=[],u=[];if(!a.glyphInfoMap||!a.glyphInfoMap[r])return{vertices:[],indices:[],size:7};var c=a.glyphInfoMap[r].centroid,p=c.length===2?[c[0],c[1],0]:c;return a.glyphInfoMap[r].glyphQuads.forEach(function(g,y){o.push.apply(o,(0,Rn.Z)(p).concat([g.tex.x,g.tex.y+g.tex.height,g.tl.x,g.tl.y],(0,Rn.Z)(p),[g.tex.x+g.tex.width,g.tex.y+g.tex.height,g.tr.x,g.tr.y],(0,Rn.Z)(p),[g.tex.x+g.tex.width,g.tex.y,g.br.x,g.br.y],(0,Rn.Z)(p),[g.tex.x,g.tex.y,g.bl.x,g.bl.y])),u.push(0+y*4,1+y*4,2+y*4,2+y*4,3+y*4,0+y*4)}),{vertices:o,indices:u,size:7}}var $C=function(e){(0,yr.Z)(r,e);var a=jC(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"glyphInfoMap",{}),(0,He.Z)((0,wr.Z)(o),"currentZoom",-1),(0,He.Z)((0,wr.Z)(o),"textureHeight",0),(0,He.Z)((0,wr.Z)(o),"textCount",0),(0,He.Z)((0,wr.Z)(o),"preTextStyle",{}),(0,He.Z)((0,wr.Z)(o),"mapping",(0,Sn.Z)(er().mark(function g(){return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o.initGlyph(),o.updateTexture(),S.next=4,o.reBuildModel();case 4:case"end":return S.stop()}},g)}))),o}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption),{u_sdf_map:this.textures[0]})}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.stroke,p=c===void 0?"#fff":c,g=u.strokeWidth,y=g===void 0?0:g,S=u.halo,O=S===void 0?.5:S,L=u.gamma,V=L===void 0?2:L,G=u.raisingHeight,he=G===void 0?0:G,ve=this.getFontServiceMapping(),Pe=this.getFontServiceCanvas();ve&&Object.keys(ve).length!==this.textCount&&Pe&&(this.updateTexture(),this.textCount=Object.keys(ve).length),this.preTextStyle=this.getTextStyle();var Xe={u_stroke_color:ho(p),u_sdf_map_size:[(Pe==null?void 0:Pe.width)||1,(Pe==null?void 0:Pe.height)||1],u_raisingHeight:Number(he),u_stroke_width:y,u_gamma_scale:V,u_halo_blur:O},gt=this.getUniformsBufferInfo(Xe);return gt}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.rawEncodeData=this.layer.getEncodedData(),this.preTextStyle=this.getTextStyle(),this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 6:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getLayerConfig(),g=p.textAllowOverlap,y=g===void 0?!1:g,this.initGlyph(),this.updateTexture(),y||this.filterGlyphs(),L.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Yb,fragmentShader:WC,inject:this.getInject(),triangulation:GC.bind(this),depth:{enable:!1}});case 6:return S=L.sent,L.abrupt("return",[S]);case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"needUpdate",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G,he,ve,Pe,Xe;return er().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(p=this.getTextStyle(),g=p.textAllowOverlap,y=g===void 0?!1:g,S=p.textAnchor,O=S===void 0?"center":S,L=p.textOffset,V=p.padding,G=p.fontFamily,he=p.fontWeight,!(!t0(V,this.preTextStyle.padding)||!t0(L,this.preTextStyle.textOffset)||!t0(O,this.preTextStyle.textAnchor)||!t0(G,this.preTextStyle.fontFamily)||!t0(he,this.preTextStyle.fontWeight))){_t.next=5;break}return _t.next=4,this.mapping();case 4:return _t.abrupt("return",!0);case 5:if(!y){_t.next=7;break}return _t.abrupt("return",!1);case 7:if(ve=this.mapService.getZoom(),Pe=this.mapService.getBounds(),Xe=Tp(this.extent,Pe),!(Math.abs(this.currentZoom-ve)>.5||!Xe||y!==this.preTextStyle.textAllowOverlap)){_t.next=14;break}return _t.next=13,this.reBuildModel();case 13:return _t.abrupt("return",!0);case 14:return _t.abrupt("return",!1);case 15:case"end":return _t.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textUvAndOffsets",type:wa.Attribute,descriptor:{name:"a_textUvAndOffsets",shaderLocation:Wa.UV,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(c,p,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?12:p;return Array.isArray(g)?[g[0]]:[g]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var u=this.mapService.getBounds();return Cu(u,.5)}},{key:"initTextFont",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(S){var O=S.shape,L=O===void 0?"":O;L=L.toString();var V=NO(L),G;try{for(V.s();!(G=V.n()).done;){var he=G.value;y.indexOf(he)===-1&&y.push(he)}}catch(ve){V.e(ve)}finally{V.f()}}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!1})}},{key:"initIconFontTex",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(S){var O=S.shape,L=O===void 0?"":O;L="".concat(L),y.indexOf(L)===-1&&y.push(L)}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!0})}},{key:"getTextStyle",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g,S=u.textAllowOverlap,O=S===void 0?!1:S,L=u.padding,V=L===void 0?[0,0]:L,G=u.textAnchor,he=G===void 0?"center":G,ve=u.textOffset,Pe=ve===void 0?[0,0]:ve,Xe=u.opacity,gt=Xe===void 0?1:Xe,_t=u.strokeOpacity,zt=_t===void 0?1:_t,Xt=u.strokeWidth,nr=Xt===void 0?0:Xt,ar=u.stroke,Tr=ar===void 0?"#000":ar;return{fontWeight:p,fontFamily:y,textAllowOverlap:O,padding:V,textAnchor:he,textOffset:Pe,opacity:gt,strokeOpacity:zt,strokeWidth:nr,stroke:Tr}}},{key:"generateGlyphLayout",value:function(u){var c=this,p=this.getFontServiceMapping(),g=this.layer.getLayerConfig(),y=g.spacing,S=y===void 0?2:y,O=g.textAnchor,L=O===void 0?"center":O,V=g.textOffset,G=this.rawEncodeData;this.glyphInfo=G.map(function(he){var ve=he.shape,Pe=ve===void 0?"":ve,Xe=he.id,gt=he.size,_t=gt===void 0?1:gt,zt=he.textOffset?he.textOffset:V||[0,0],Xt=he.textAnchor?he.textAnchor:L||"center",nr=BO(Pe.toString(),p,_t,Xt,"left",S,zt,u),ar=HC(nr,zt,!1);return he.shaping=nr,he.glyphQuads=ar,he.centroid=au(he.coordinates),he.originCentroid=he.version==="GAODE2.x"?au(he.originCoordinates):he.originCentroid=he.centroid,c.glyphInfoMap[Xe]={shaping:nr,glyphQuads:ar,centroid:au(he.coordinates)},he})}},{key:"getFontServiceMapping",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getMappingByKey("".concat(y,"_").concat(p))}},{key:"getFontServiceCanvas",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getCanvasByKey("".concat(y,"_").concat(p))}},{key:"filterGlyphs",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.padding,g=p===void 0?[0,0]:p,y=c.textAllowOverlap,S=y===void 0?!1:y;if(!S){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var O=this.rendererService.getViewportSize(),L=O.width,V=O.height,G=new DO(L,V),he=this.glyphInfo.filter(function(ve){var Pe=ve.shaping,Xe=ve.id,gt=Xe===void 0?0:Xe,_t=ve.version==="GAODE2.x"?ve.originCentroid:ve.centroid,zt=ve.size,Xt=zt/16,nr=u.mapService.lngLatToContainer(_t),ar=G.placeCollisionBox({x1:Pe.left*Xt-g[0],x2:Pe.right*Xt+g[0],y1:Pe.top*Xt-g[1],y2:Pe.bottom*Xt+g[1],anchorPointX:nr.x,anchorPointY:nr.y}),Tr=ar.box;return Tr&&Tr.length?(G.insertCollisionBox(Tr,gt),!0):!1});he.forEach(function(ve){u.glyphInfoMap[ve.id]=ve})}}},{key:"initGlyph",value:function(){var u=this.layer.getLayerConfig(),c=u.iconfont,p=c===void 0?!1:c;p?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(p)}},{key:"updateTexture",value:function(){var u=this.rendererService.createTexture2D,c=this.getFontServiceCanvas();this.textureHeight=c.height,this.texture&&this.texture.destroy(),this.texture=u({data:c,mag:Rt.LINEAR,min:Rt.LINEAR,width:c.width,height:c.height}),this.textures=[this.texture]}},{key:"reBuildModel",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.filterGlyphs(),y.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Yb,fragmentShader:WC,triangulation:GC.bind(this),inject:this.getInject(),depth:{enable:!1}});case 3:p=y.sent,this.layer.models=[p];case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(lu),XC={fillImage:bO,fill:gv,radar:RO,image:LC,normal:Wb,simplePoint:sO,extrude:Ub,text:$C,earthFill:gO,earthExtrude:hO},YC=XC;function zO(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=UO(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function UO(e,a){if(e){if(typeof e=="string")return Kb(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kb(e,a)}}function Kb(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function ZO(e){var a=VO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function VO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vy=function(e){(0,yr.Z)(r,e);var a=ZO(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","PointLayer"),(0,He.Z)((0,wr.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,He.Z)((0,wr.Z)(o),"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,He.Z)((0,wr.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),o}return(0,ot.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new YC[p](this),y.next=5,this.initLayerModels();case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var u=this.shapeOption,c=u.field,p=u.values,g=this.getLayerConfig(),y=g.shape2d,S=this.iconService.getIconMap();if(c&&(y==null?void 0:y.indexOf(c))!==-1)return"fill";if(p==="text")return"text";if(p&&p instanceof Array){var O=zO(p),L;try{for(O.s();!(L=O.n()).done;){var V=L.value;if(typeof V=="string"&&S.hasOwnProperty(V))return"image"}}catch(G){O.e(G)}finally{O.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=c.billboard,S=y===void 0?!0:y,O=this.iconService.getIconMap(),L=u.find(function(G){return G.hasOwnProperty("shape")});if(L){var V=L.shape;return V==="dot"?"normal":V==="simple"?"simplePoint":V==="radar"?"radar":this.layerType==="fillImage"||S===!1?"fillImage":(p==null?void 0:p.indexOf(V))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(g==null?void 0:g.indexOf(V))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":O.hasOwnProperty(V)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),r}(Ym);function HO(e){var a=KC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function KC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var jO=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,qC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,i1=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;


#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  }
  

  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,gy=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

out vec2 v_texture_data;
out vec3 v_uvs;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,WO=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,GO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec2 v_texture_data;
out vec3 v_uvs;
out vec4 v_Color;


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,$O=function(e){(0,yr.Z)(r,e);var a=HO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.heightfixed,p=c===void 0?!1:c,g=u.raisingHeight,y=g===void 0?0:g,S=u.topsurface,O=S===void 0?!0:S,L=u.sidesurface,V=L===void 0?!0:L,G=u.sourceColor,he=u.targetColor,ve=0,Pe=[1,1,1,1],Xe=[1,1,1,1];G&&he&&(Pe=ho(G),Xe=ho(he),ve=1);var gt={u_sourceColor:Pe,u_targetColor:Xe,u_linearColor:ve,u_topsurface:Number(O),u_sidesurface:Number(V),u_heightfixed:Number(p),u_raisingHeight:Number(y),u_texture:this.texture};this.texture&&(this.textures=[this.texture]);var _t=this.getUniformsBufferInfo(gt);return _t}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,this.initUniformsBuffer(),V.next=4,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,depth:{enable:!0},inject:this.getInject(),triangulation:Ob});case 4:return O=V.sent,V.abrupt("return",[O]);case 6:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.pickLight,p=u.mapTexture;return p?{frag:i1,vert:gy,type:"polygonExtrudeTexture"}:c?{frag:WO,vert:GO,type:"polygonExtrudePickLight"}:{frag:jO,vert:qC,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.textures=[]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=u,p=this.layer.coordCenter||this.layer.getSource().center,g=c[2]-c[0],y=c[3]-c[1];if(this.mapService.version==="GAODE2.x"){var S=this.mapService.coordToAMap2RelativeCoordinates([u[0],u[1]],p),O=(0,ji.Z)(S,2),L=O[0],V=O[1],G=this.mapService.coordToAMap2RelativeCoordinates([u[2],u[3]],p),he=(0,ji.Z)(G,2),ve=he[0],Pe=he[1];g=ve-L,y=Pe-V,c=[L,V,ve,Pe]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:wa.Attribute,descriptor:{name:"a_uvs",shaderLocation:Wa.UV,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(gt,_t,zt){var Xt=zt[0],nr=zt[1];return[(Xt-c[0])/g,(nr-c[1])/y,zt[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:wa.Attribute,descriptor:{name:"a_Normal",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(gt,_t,zt,Xt,nr){return nr}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(gt){var _t=gt.size,zt=_t===void 0?10:_t;return Array.isArray(zt)?[zt[0]]:[zt]}}})}},{key:"loadTexture",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(g=this.layer.getLayerConfig(),y=g.mapTexture,S=this.rendererService.createTexture2D,this.texture=S({height:0,width:0}),!y){L.next=5;break}return L.abrupt("return",new Promise(function(V,G){var he=new Image;he.crossOrigin="anonymous",he.src=y,he.onload=function(){return p.texture=S({data:he,width:he.width,height:he.height,wrapS:Rt.CLAMP_TO_EDGE,wrapT:Rt.CLAMP_TO_EDGE,min:Rt.LINEAR,mag:Rt.LINEAR}),V(null)},he.onerror=function(){G(new Error("image load error"))}}));case 5:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(lu);function XO(e){var a=YO();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function YO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QC=`
in vec4 v_Color;
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,KO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,qO=function(e){(0,yr.Z)(r,e);var a=XO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u={},c=this.getUniformsBufferInfo(u);return c}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,S=p.type,this.initUniformsBuffer(),V.next=4,this.layer.buildLayerModel({moduleName:S,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:Ob,depth:{enable:!0}});case 4:return O=V.sent,V.abrupt("return",[O]);case 6:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:QC,vert:KO,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:wa.Attribute,descriptor:{name:"a_Normal",shaderLocation:Wa.NORMAL,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(c,p,g,y,S){return S}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:wa.Attribute,descriptor:{name:"a_Size",shaderLocation:Wa.SIZE,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?10:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(lu);function QO(e){var a=JC();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function JC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var eT=`in vec4 v_color;
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,JO=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec3 v_linear;
in vec2 v_pos;
in vec4 v_color;
out vec4 outputColor;
#pragma include "picking"

void main() {
   outputColor = v_color;
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,qb=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;


layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};


out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

out vec3 v_linear;
out vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,ek=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,tk=function(e){(0,yr.Z)(r,e);var a=QO(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.opacityLinear,y=g===void 0?{enable:!1,dir:"in"}:g,S={u_raisingHeight:Number(p),u_opacitylinear:Number(y.enable),u_dir:y.dir==="in"?1:0},O=this.getUniformsBufferInfo(S);return O}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L;return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return p=this.getModelParams(),g=p.frag,y=p.vert,S=p.triangulation,O=p.type,this.initUniformsBuffer(),this.layer.triangulation=S,G.next=5,this.layer.buildLayerModel({moduleName:O,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:S,primitive:Rt.TRIANGLES,depth:{enable:!1}});case 5:return L=G.sent,G.abrupt("return",[L]);case 7:case"end":return G.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1,dir:"in"}:c;p.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:wa.Attribute,descriptor:{name:"a_linear",shaderLocation:Wa.LINEAR,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:3,update:function(y,S,O){return[O[3],O[4],O[5]]}}})}},{key:"getModelParams",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1}:c;return p.enable?{frag:JO,vert:qb,type:"polygonLinear",triangulation:Pb}:{frag:eT,vert:ek,type:"polygonFill",triangulation:Zv}}}]),r}(lu);function rk(e){var a=tT();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function tT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nk=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,ik=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,Qb=Ca.isNumber,ak=function(e){(0,yr.Z)(r,e);var a=rk(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.watercolor,p=c===void 0?"#6D99A8":c,g=u.watercolor2,y=g===void 0?"#0F121C":g,S={u_watercolor:ho(p),u_watercolor2:ho(y),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};this.textures=[this.texture1,this.texture2,this.texture3];var O=this.getUniformsBufferInfo(S);return O}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:ik,fragmentShader:nk,inject:this.getInject(),triangulation:fy,primitive:Rt.TRIANGLES,depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c,p;(u=this.texture1)===null||u===void 0||u.destroy(),(c=this.texture2)===null||c===void 0||c.destroy(),(p=this.texture3)===null||p===void 0||p.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,ji.Z)(u,4),p=c[0],g=c[1],y=c[2],S=c[3],O=y-p,L=S-g;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:wa.Attribute,descriptor:{name:"a_uv",shaderLocation:Wa.UV,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(G,he,ve,Pe){var Xe=G.version==="GAODE2.x"?G.originCoordinates[0][Pe]:ve,gt=(0,ji.Z)(Xe,2),_t=gt[0],zt=gt[1];return[(_t-p)/O,(zt-g)/L]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.rendererService.createTexture2D,p={height:0,width:0};this.texture1=c(p),this.texture2=c(p),this.texture3=c(p),g(function(S){u.texture1=y(S[0]),u.texture2=y(S[1]),u.texture3=y(S[2]),u.layerService.reRender()});function g(S){var O=0,L=[],V=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];V.map(function(G){var he=new Image;he.crossOrigin="",he.src=G,L.push(he),he.onload=function(){O++,O===3&&S(L)}})}function y(S){return c({data:S,width:S.width,height:S.height,wrapS:Rt.MIRRORED_REPEAT,wrapT:Rt.MIRRORED_REPEAT,min:Rt.LINEAR,mag:Rt.LINEAR})}}}]),r}(lu);function ok(e){var a=sk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function sk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var uk=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,rT=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,lk=Ca.isNumber,ck=function(e){(0,yr.Z)(r,e);var a=ok(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.speed,p=c===void 0?.5:c,g={u_speed:p,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};this.textures=[this.texture];var y=this.getUniformsBufferInfo(g);return y}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:rT,fragmentShader:uk,triangulation:fy,inject:this.getInject(),primitive:Rt.TRIANGLES,depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,ji.Z)(u,4),p=c[0],g=c[1],y=c[2],S=c[3],O=y-p,L=S-g;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:wa.Attribute,descriptor:{name:"a_uv",shaderLocation:Wa.UV,buffer:{usage:Rt.STATIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(G,he,ve,Pe){var Xe=G.version==="GAODE2.x"?G.originCoordinates[0][Pe]:ve,gt=(0,ji.Z)(Xe,2),_t=gt[0],zt=gt[1];return[(_t-p)/O,(zt-g)/L]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.waterTexture,g=this.rendererService.createTexture2D;this.texture=g({height:0,width:0});var y=new Image;y.crossOrigin="",p?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),y.src=p):y.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",y.onload=function(){u.texture=g({data:y,width:y.width,height:y.height,wrapS:Rt.MIRRORED_REPEAT,wrapT:Rt.MIRRORED_REPEAT,min:Rt.LINEAR,mag:Rt.LINEAR}),u.layerService.reRender()}}}]),r}(lu),fk={fill:tk,line:AC,extrude:$O,text:$C,point_fill:gv,point_image:LC,point_normal:Wb,point_extrude:Ub,water:ck,ocean:ak,extrusion:qO},nT=fk;function iT(e){var a=aT();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function aT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var a1=function(e){(0,yr.Z)(r,e);var a=iT(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","PolygonLayer"),(0,He.Z)((0,wr.Z)(o),"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]),o}return(0,ot.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new nT[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){var u,c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p==="fill"||!p?"fill":p==="extrude"?"extrude":p==="extrusion"?"extrusion":p==="water"?"water":p==="ocean"?"ocean":p==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=this.iconService.getIconMap(),S=u.find(function(L){return L.hasOwnProperty("shape")});if(S){var O=S.shape;return O==="dot"?"point_normal":(p==null?void 0:p.indexOf(O))!==-1?"point_fill":(g==null?void 0:g.indexOf(O))!==-1?"point_extrude":y.hasOwnProperty(O)?"point_image":"text"}else return"fill"}}]),r}(Ym);function Jb(e){var a=oT();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function oT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hk=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,sT=`attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;


#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,pk=Ca.isNumber,dk=function(e){(0,yr.Z)(r,e);var a=Jb(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.color,y=g===void 0?"#000":g;return{u_opacity:pk(p)?p:0,u_color:ho(y)}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:sT,fragmentShader:hk,triangulation:fy,depth:{enable:!1},pick:!1});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;u&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),r}(lu),uT={fill:dk},lT=uT;function vk(e){var a=gk();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function gk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var tg=function(e){(0,yr.Z)(r,e);var a=vk(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","MaskLayer"),o}return(0,ot.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new lT[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){return"fill"}}]),r}(Ym),jB=k(28660),cT,fT,hT,pT,o1,eS,dT,s1=Ca.cloneDeep,mk=(cT=(0,mt.b2)(),fT=(0,mt.f3)(Ct.IMapService),hT=(0,mt.f3)(Ct.IFontService),cT(pT=(o1=function(){function e(){(0,Ot.Z)(this,e),na(this,"mapService",eS,this),na(this,"fontService",dT,this)}return(0,ot.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("DataMappingPlugin",(0,Sn.Z)(er().mark(function p(){return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:r.log(kl.MappingStart,Ko.INIT),u.generateMaping(r,{styleAttributeService:c}),r.log(kl.MappingEnd,Ko.INIT);case 3:case"end":return y.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var p=(0,Sn.Z)(er().mark(function g(y){var S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(y){L.next=2;break}return L.abrupt("return",y);case 2:return r.dataState.dataMappingNeedUpdate=!1,r.log(kl.MappingStart,Ko.UPDATE),S=u.generateMaping(r,{styleAttributeService:c}),r.log(kl.MappingEnd,Ko.UPDATE),L.abrupt("return",S);case 7:case"end":return L.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("DataMappingPlugin",function(){var p=r.getSource();if(!(r.layerModelNeedUpdate||!p||!p.inited)){var g=c.getLayerStyleAttributes()||[],y=c.getLayerStyleAttribute("filter"),S=p.data.dataArray;if(!(Array.isArray(S)&&S.length===0)){var O=g.filter(function(G){return G.needRemapping}),L=S;if(y!=null&&y.needRemapping&&y!==null&&y!==void 0&&y.scale&&(L=S.filter(function(G){return u.applyAttributeMapping(y,G)[0]})),O.length){var V=u.mapping(r,O,L,r.getEncodedData());r.setEncodedData(V)}}}})}},{key:"generateMaping",value:function(r,o){var u=this,c=o.styleAttributeService,p=c.getLayerStyleAttributes()||[],g=c.getLayerStyleAttribute("filter"),y=r.getSource().data.dataArray,S=y;g!=null&&g.scale&&(S=y.filter(function(L){return u.applyAttributeMapping(g,L)[0]})),S=r.processData(S);var O=this.mapping(r,p,S,void 0);return r.setEncodedData(O),r.emit("dataUpdate",null),!0}},{key:"mapping",value:function(r,o,u,c){var p=this,g=o.filter(function(S){return S.scale!==void 0}).filter(function(S){return S.name!=="filter"}),y=u.map(function(S,O){var L=c?c[O]:{},V=(0,ne.Z)({id:S._id,coordinates:S.coordinates},L);return g.forEach(function(G){var he=p.applyAttributeMapping(G,S);(G.name==="color"||G.name==="stroke")&&(he=he.map(function(ve){return ho(ve)})),V[G.name]=Array.isArray(he)&&he.length===1?he[0]:he,G.name==="shape"&&(V.shape=p.fontService.getIconFontKey(V[G.name]))}),V});return o.forEach(function(S){S.needRemapping=!1}),this.adjustData2Amap2Coordinates(y,r),this.adjustData2SimpleCoordinates(y),y}},{key:"adjustData2Amap2Coordinates",value:function(r,o){var u=this;if(r.length>0&&this.mapService.version==="GAODE2.x"){var c=o.coordCenter||o.getSource().center;r.filter(function(p){return!p.originCoordinates}).map(function(p){p.version="GAODE2.x",p.originCoordinates=s1(p.coordinates),p.coordinates=u.mapService.coordToAMap2RelativeCoordinates(p.coordinates,c)})}}},{key:"adjustData2SimpleCoordinates",value:function(r){var o=this;r.length>0&&this.mapService.version==="SIMPLE"&&r.map(function(u){u.simpleCoordinate||(u.coordinates=o.unProjectCoordinates(u.coordinates),u.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(r){var o=this;if(typeof r[0]=="number")return this.mapService.simpleMapCoord.unproject(r);if(r[0]&&r[0][0]instanceof Array){var u=[];return r.map(function(p){var g=[];p.map(function(y){g.push(o.mapService.simpleMapCoord.unproject(y))}),u.push(g)}),u}else{var c=[];return r.map(function(p){c.push(o.mapService.simpleMapCoord.unproject(p))}),c}}},{key:"applyAttributeMapping",value:function(r,o){var u;if(!r.scale)return[];var c=(r==null||(u=r.scale)===null||u===void 0?void 0:u.scalers)||[],p=[];c.forEach(function(y){var S,O=y.field;(o.hasOwnProperty(O)||((S=r.scale)===null||S===void 0?void 0:S.type)==="variable")&&p.push(o[O])});var g=r.mapping?r.mapping(p):[];return g}},{key:"getArrowPoints",value:function(r,o){var u=[o[0]-r[0],o[1]-r[1]],c=iu(u),p=[r[0]+c[0]*1e-4,r[1]+c[1]*1e-4];return p}}]),e}(),eS=Fa(o1.prototype,"mapService",[fT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dT=Fa(o1.prototype,"fontService",[hT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o1))||pT),vT,gT,yk=(vT=(0,mt.b2)(),vT(gT=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r){var o=this;this.mapService=r.getContainer().get(Ct.IMapService),r.hooks.init.tapPromise("DataSourcePlugin",(0,Sn.Z)(er().mark(function u(){var c,p,g,y;return er().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(r.log(kl.SourceInitStart,Ko.INIT),c=r.getSource(),c||(p=r.sourceOption||r.defaultSourceConfig,g=p.data,y=p.options,c=new sy(g,y),r.setSource(c)),!c.inited){O.next=8;break}o.updateClusterData(r),r.log(kl.SourceInitEnd,Ko.INIT),O.next=10;break;case 8:return O.next=10,new Promise(function(L){c.on("update",function(V){V.type==="inited"&&(o.updateClusterData(r),r.log(kl.SourceInitEnd,Ko.INIT)),L(null)})});case 10:case"end":return O.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Sn.Z)(er().mark(function u(){var c,p,g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=o.updateClusterData(r),p=r.dataState.dataSourceNeedUpdate,r.dataState.dataSourceNeedUpdate=!1,g=c||p,S.abrupt("return",g);case 5:case"end":return S.stop()}},u)})))}},{key:"updateClusterData",value:function(r){if(r.isTileLayer||r.tileLayer||!r.getSource())return!1;var o=r.getSource(),u=o.cluster,c=o.clusterOptions.zoom,p=c===void 0?0:c,g=this.mapService.getZoom()-1,y=r.dataState.dataSourceNeedUpdate;return u&&y&&o.updateClusterData(Math.floor(g)),u&&Math.abs(r.clusterZoom-g)>=1?(p!==Math.floor(g)&&o.updateClusterData(Math.floor(g)),r.clusterZoom=g,!0):!1}}]),e}())||gT);function tS(e,a){return e<a?-1:e>a?1:e>=a?0:NaN}function mT(e){return e.length===1&&(e=yT(e)),{left:function(a,r,o,u){for(o==null&&(o=0),u==null&&(u=a.length);o<u;){var c=o+u>>>1;e(a[c],r)<0?o=c+1:u=c}return o},right:function(a,r,o,u){for(o==null&&(o=0),u==null&&(u=a.length);o<u;){var c=o+u>>>1;e(a[c],r)>0?u=c:o=c+1}return o}}}function yT(e){return function(a,r){return tS(e(a),r)}}var _T=mT(tS),_k=_T.right,u1=_T.left,$g=_k;function rS(e,a){var r=e.length,o=-1,u,c,p;if(a==null){for(;++o<r;)if((u=e[o])!=null&&u>=u)for(c=p=u;++o<r;)(u=e[o])!=null&&(c>u&&(c=u),p<u&&(p=u))}else for(;++o<r;)if((u=a(e[o],o,e))!=null&&u>=u)for(c=p=u;++o<r;)(u=a(e[o],o,e))!=null&&(c>u&&(c=u),p<u&&(p=u));return[c,p]}var nS=Array.prototype,WB=nS.slice,GB=nS.map,l1=Math.sqrt(50),iS=Math.sqrt(10),aS=Math.sqrt(2);function xT(e,a,r){var o,u=-1,c,p,g;if(a=+a,e=+e,r=+r,e===a&&r>0)return[e];if((o=a<e)&&(c=e,e=a,a=c),(g=c1(e,a,r))===0||!isFinite(g))return[];if(g>0)for(e=Math.ceil(e/g),a=Math.floor(a/g),p=new Array(c=Math.ceil(a-e+1));++u<c;)p[u]=(e+u)*g;else for(e=Math.floor(e*g),a=Math.ceil(a*g),p=new Array(c=Math.ceil(e-a+1));++u<c;)p[u]=(e-u)/g;return o&&p.reverse(),p}function c1(e,a,r){var o=(a-e)/Math.max(0,r),u=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,u);return u>=0?(c>=l1?10:c>=iS?5:c>=aS?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=l1?10:c>=iS?5:c>=aS?2:1)}function oS(e,a,r){var o=Math.abs(a-e)/Math.max(0,r),u=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/u;return c>=l1?u*=10:c>=iS?u*=5:c>=aS&&(u*=2),a<e?-u:u}function xk(){var e=identity,a=extent,r=sturges;function o(u){var c,p=u.length,g,y=new Array(p);for(c=0;c<p;++c)y[c]=e(u[c],c,u);var S=a(y),O=S[0],L=S[1],V=r(y,O,L);Array.isArray(V)||(V=tickStep(O,L,V),V=range(Math.ceil(O/V)*V,L,V));for(var G=V.length;V[0]<=O;)V.shift(),--G;for(;V[G-1]>L;)V.pop(),--G;var he=new Array(G+1),ve;for(c=0;c<=G;++c)ve=he[c]=[],ve.x0=c>0?V[c-1]:O,ve.x1=c<G?V[c]:L;for(c=0;c<p;++c)g=y[c],O<=g&&g<=L&&he[bisect(V,g,0,G)].push(u[c]);return he}return o.value=function(u){return arguments.length?(e=typeof u=="function"?u:constant(u),o):e},o.domain=function(u){return arguments.length?(a=typeof u=="function"?u:constant([u[0],u[1]]),o):a},o.thresholds=function(u){return arguments.length?(r=typeof u=="function"?u:Array.isArray(u)?constant(slice.call(u)):constant(u),o):r},o}function $B(e,a,r){return e=map.call(e,number).sort(ascending),Math.ceil((r-a)/(2*(quantile(e,.75)-quantile(e,.25))*Math.pow(e.length,-1/3)))}function Xg(e){return e===null?NaN:+e}function yy(e,a,r){if(r==null&&(r=Xg),!!(o=e.length)){if((a=+a)<=0||o<2)return+r(e[0],0,e);if(a>=1)return+r(e[o-1],o-1,e);var o,u=(o-1)*a,c=Math.floor(u),p=+r(e[c],c,e),g=+r(e[c+1],c+1,e);return p+(g-p)*(u-c)}}function Yg(e,a,r,o,u){var c=e*e,p=c*e;return((1-3*e+3*c-p)*a+(4-6*c+3*p)*r+(1+3*e+3*c-3*p)*o+p*u)/6}function bT(e){var a=e.length-1;return function(r){var o=r<=0?r=0:r>=1?(r=1,a-1):Math.floor(r*a),u=e[o],c=e[o+1],p=o>0?e[o-1]:2*u-c,g=o<a-1?e[o+2]:2*c-u;return Yg((r-o/a)*a,p,u,c,g)}}function bk(e){var a=e.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*a),u=e[(o+a-1)%a],c=e[o%a],p=e[(o+1)%a],g=e[(o+2)%a];return Yg((r-o/a)*a,u,c,p,g)}}function sS(e){return function(){return e}}function Kg(e,a){return function(r){return e+r*a}}function ST(e,a,r){return e=Math.pow(e,r),a=Math.pow(a,r)-e,r=1/r,function(o){return Math.pow(e+o*a,r)}}function XB(e,a){var r=a-e;return r?Kg(e,r>180||r<-180?r-360*Math.round(r/360):r):constant(isNaN(e)?a:e)}function Sk(e){return(e=+e)==1?ET:function(a,r){return r-a?ST(a,r,e):sS(isNaN(a)?r:a)}}function ET(e,a){var r=a-e;return r?Kg(e,r):sS(isNaN(e)?a:e)}var uS=function e(a){var r=Sk(a);function o(u,c){var p=r((u=wo(u)).r,(c=wo(c)).r),g=r(u.g,c.g),y=r(u.b,c.b),S=ET(u.opacity,c.opacity);return function(O){return u.r=p(O),u.g=g(O),u.b=y(O),u.opacity=S(O),u+""}}return o.gamma=e,o}(1);function wT(e){return function(a){var r=a.length,o=new Array(r),u=new Array(r),c=new Array(r),p,g;for(p=0;p<r;++p)g=wo(a[p]),o[p]=g.r||0,u[p]=g.g||0,c[p]=g.b||0;return o=e(o),u=e(u),c=e(c),g.opacity=1,function(y){return g.r=o(y),g.g=u(y),g.b=c(y),g+""}}}var Ek=wT(bT),YB=wT(bk),sp="$";function _y(){}_y.prototype=CT.prototype={constructor:_y,has:function(e){return sp+e in this},get:function(e){return this[sp+e]},set:function(e,a){return this[sp+e]=a,this},remove:function(e){var a=sp+e;return a in this&&delete this[a]},clear:function(){for(var e in this)e[0]===sp&&delete this[e]},keys:function(){var e=[];for(var a in this)a[0]===sp&&e.push(a.slice(1));return e},values:function(){var e=[];for(var a in this)a[0]===sp&&e.push(this[a]);return e},entries:function(){var e=[];for(var a in this)a[0]===sp&&e.push({key:a.slice(1),value:this[a]});return e},size:function(){var e=0;for(var a in this)a[0]===sp&&++e;return e},empty:function(){for(var e in this)if(e[0]===sp)return!1;return!0},each:function(e){for(var a in this)a[0]===sp&&e(this[a],a.slice(1),this)}};function CT(e,a){var r=new _y;if(e instanceof _y)e.each(function(g,y){r.set(y,g)});else if(Array.isArray(e)){var o=-1,u=e.length,c;if(a==null)for(;++o<u;)r.set(o,e[o]);else for(;++o<u;)r.set(a(c=e[o],o,e),c)}else if(e)for(var p in e)r.set(p,e[p]);return r}var lS=CT;function KB(){var e=[],a=[],r,o,u;function c(g,y,S,O){if(y>=e.length)return r!=null&&g.sort(r),o!=null?o(g):g;for(var L=-1,V=g.length,G=e[y++],he,ve,Pe=map(),Xe,gt=S();++L<V;)(Xe=Pe.get(he=G(ve=g[L])+""))?Xe.push(ve):Pe.set(he,[ve]);return Pe.each(function(_t,zt){O(gt,zt,c(_t,y,S,O))}),gt}function p(g,y){if(++y>e.length)return g;var S,O=a[y-1];return o!=null&&y>=e.length?S=g.entries():(S=[],g.each(function(L,V){S.push({key:V,values:p(L,y)})})),O!=null?S.sort(function(L,V){return O(L.key,V.key)}):S}return u={object:function(g){return c(g,0,wk,cS)},map:function(g){return c(g,0,TT,AT)},entries:function(g){return p(c(g,0,TT,AT),0)},key:function(g){return e.push(g),u},sortKeys:function(g){return a[e.length-1]=g,u},sortValues:function(g){return r=g,u},rollup:function(g){return o=g,u}}}function wk(){return{}}function cS(e,a,r){e[a]=r}function TT(){return map()}function AT(e,a,r){e.set(a,r)}function f1(){}var qg=lS.prototype;f1.prototype=Ck.prototype={constructor:f1,has:qg.has,add:function(e){return e+="",this[sp+e]=e,this},remove:qg.remove,clear:qg.clear,values:qg.keys,size:qg.size,empty:qg.empty,each:qg.each};function Ck(e,a){var r=new f1;if(e instanceof f1)e.each(function(c){r.add(c)});else if(e){var o=-1,u=e.length;if(a==null)for(;++o<u;)r.add(e[o]);else for(;++o<u;)r.add(a(e[o],o,e))}return r}var qB=null,MT=Array.prototype,RT=MT.map,up=MT.slice;function rg(e,a){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(a).domain(e);break}return this}function Tk(e,a){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(a).domain(e);break}return this}var $p={name:"implicit"};function Ph(){var e=lS(),a=[],r=[],o=$p;function u(c){var p=c+"",g=e.get(p);if(!g){if(o!==$p)return o;e.set(p,g=a.push(c))}return r[(g-1)%r.length]}return u.domain=function(c){if(!arguments.length)return a.slice();a=[],e=lS();for(var p=-1,g=c.length,y,S;++p<g;)e.has(S=(y=c[p])+"")||e.set(S,a.push(y));return u},u.range=function(c){return arguments.length?(r=up.call(c),u):r.slice()},u.unknown=function(c){return arguments.length?(o=c,u):o},u.copy=function(){return Ph(a,r).unknown(o)},rg.apply(u,arguments),u}function ng(){var e=ordinal().unknown(void 0),a=e.domain,r=e.range,o=[0,1],u,c,p=!1,g=0,y=0,S=.5;delete e.unknown;function O(){var L=a().length,V=o[1]<o[0],G=o[V-0],he=o[1-V];u=(he-G)/Math.max(1,L-g+y*2),p&&(u=Math.floor(u)),G+=(he-G-u*(L-g))*S,c=u*(1-g),p&&(G=Math.round(G),c=Math.round(c));var ve=sequence(L).map(function(Pe){return G+u*Pe});return r(V?ve.reverse():ve)}return e.domain=function(L){return arguments.length?(a(L),O()):a()},e.range=function(L){return arguments.length?(o=[+L[0],+L[1]],O()):o.slice()},e.rangeRound=function(L){return o=[+L[0],+L[1]],p=!0,O()},e.bandwidth=function(){return c},e.step=function(){return u},e.round=function(L){return arguments.length?(p=!!L,O()):p},e.padding=function(L){return arguments.length?(g=Math.min(1,y=+L),O()):g},e.paddingInner=function(L){return arguments.length?(g=Math.min(1,L),O()):g},e.paddingOuter=function(L){return arguments.length?(y=+L,O()):y},e.align=function(L){return arguments.length?(S=Math.max(0,Math.min(1,L)),O()):S},e.copy=function(){return ng(a(),o).round(p).paddingInner(g).paddingOuter(y).align(S)},initRange.apply(O(),arguments)}function fS(e){var a=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fS(a())},e}function ig(){return fS(ng.apply(null,arguments).paddingInner(1))}function QB(e,a){return(isNumberArray(a)?numberArray:IT)(e,a)}function IT(e,a){var r=a?a.length:0,o=e?Math.min(r,e.length):0,u=new Array(o),c=new Array(r),p;for(p=0;p<o;++p)u[p]=ag(e[p],a[p]);for(;p<r;++p)c[p]=a[p];return function(g){for(p=0;p<o;++p)c[p]=u[p](g);return c}}function Ak(e,a){var r=new Date;return e=+e,a=+a,function(o){return r.setTime(e*(1-o)+a*o),r}}function h1(e,a){return e=+e,a=+a,function(r){return e*(1-r)+a*r}}function Mk(e,a){var r={},o={},u;(e===null||typeof e!="object")&&(e={}),(a===null||typeof a!="object")&&(a={});for(u in a)u in e?r[u]=ag(e[u],a[u]):o[u]=a[u];return function(c){for(u in r)o[u]=r[u](c);return o}}var hS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pS=new RegExp(hS.source,"g");function Rk(e){return function(){return e}}function Ik(e){return function(a){return e(a)+""}}function Pk(e,a){var r=hS.lastIndex=pS.lastIndex=0,o,u,c,p=-1,g=[],y=[];for(e=e+"",a=a+"";(o=hS.exec(e))&&(u=pS.exec(a));)(c=u.index)>r&&(c=a.slice(r,c),g[p]?g[p]+=c:g[++p]=c),(o=o[0])===(u=u[0])?g[p]?g[p]+=u:g[++p]=u:(g[++p]=null,y.push({i:p,x:h1(o,u)})),r=pS.lastIndex;return r<a.length&&(c=a.slice(r),g[p]?g[p]+=c:g[++p]=c),g.length<2?y[0]?Ik(y[0].x):Rk(a):(a=y.length,function(S){for(var O=0,L;O<a;++O)g[(L=y[O]).i]=L.x(S);return g.join("")})}function JB(e,a){a||(a=[]);var r=e?Math.min(a.length,e.length):0,o=a.slice(),u;return function(c){for(u=0;u<r;++u)o[u]=e[u]*(1-c)+a[u]*c;return o}}function dS(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ag(e,a){var r=typeof a,o;return a==null||r==="boolean"?sS(a):(r==="number"?h1:r==="string"?(o=si(a))?(a=o,uS):Pk:a instanceof si?uS:a instanceof Date?Ak:dS(a)?JB:Array.isArray(a)?IT:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?Mk:h1)(e,a)}function Ok(e,a){return e=+e,a=+a,function(r){return Math.round(e*(1-r)+a*r)}}function kk(e){return function(){return e}}function PT(e){return+e}var OT=[0,1];function Uc(e){return e}function vS(e,a){return(a-=e=+e)?function(r){return(r-e)/a}:kk(isNaN(a)?NaN:.5)}function kT(e){var a=e[0],r=e[e.length-1],o;return a>r&&(o=a,a=r,r=o),function(u){return Math.max(a,Math.min(r,u))}}function Dk(e,a,r){var o=e[0],u=e[1],c=a[0],p=a[1];return u<o?(o=vS(u,o),c=r(p,c)):(o=vS(o,u),c=r(c,p)),function(g){return c(o(g))}}function Lk(e,a,r){var o=Math.min(e.length,a.length)-1,u=new Array(o),c=new Array(o),p=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),a=a.slice().reverse());++p<o;)u[p]=vS(e[p],e[p+1]),c[p]=r(a[p],a[p+1]);return function(g){var y=$g(e,g,1,o)-1;return c[y](u[y](g))}}function p1(e,a){return a.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gS(){var e=OT,a=OT,r=ag,o,u,c,p=Uc,g,y,S;function O(){return g=Math.min(e.length,a.length)>2?Lk:Dk,y=S=null,L}function L(V){return isNaN(V=+V)?c:(y||(y=g(e.map(o),a,r)))(o(p(V)))}return L.invert=function(V){return p(u((S||(S=g(a,e.map(o),h1)))(V)))},L.domain=function(V){return arguments.length?(e=RT.call(V,PT),p===Uc||(p=kT(e)),O()):e.slice()},L.range=function(V){return arguments.length?(a=up.call(V),O()):a.slice()},L.rangeRound=function(V){return a=up.call(V),r=Ok,O()},L.clamp=function(V){return arguments.length?(p=V?kT(e):Uc,L):p!==Uc},L.interpolate=function(V){return arguments.length?(r=V,O()):r},L.unknown=function(V){return arguments.length?(c=V,L):c},function(V,G){return o=V,u=G,O()}}function Fk(e,a){return gS()(e,a)}var DT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xy(e){if(!(a=DT.exec(e)))throw new Error("invalid format: "+e);var a;return new mS({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}xy.prototype=mS.prototype;function mS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function d1(e,a){if((r=(e=a?e.toExponential(a-1):e.toExponential()).indexOf("e"))<0)return null;var r,o=e.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+e.slice(r+1)]}function r0(e){return e=d1(Math.abs(e)),e?e[1]:NaN}function Bk(e,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(r0(a)/3)))*3-r0(Math.abs(e)))}function Nk(e,a){return function(r,o){for(var u=r.length,c=[],p=0,g=e[0],y=0;u>0&&g>0&&(y+g+1>o&&(g=Math.max(1,o-y)),c.push(r.substring(u-=g,u+g)),!((y+=g+1)>o));)g=e[p=(p+1)%e.length];return c.reverse().join(a)}}function zk(e){return function(a){return a.replace(/[0-9]/g,function(r){return e[+r]})}}function e4(e){e:for(var a=e.length,r=1,o=-1,u;r<a;++r)switch(e[r]){case".":o=u=r;break;case"0":o===0&&(o=r),u=r;break;default:if(!+e[r])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(u+1):e}var FT;function Uk(e,a){var r=d1(e,a);if(!r)return e+"";var o=r[0],u=r[1],c=u-(FT=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=o.length;return c===p?o:c>p?o+new Array(c-p+1).join("0"):c>0?o.slice(0,c)+"."+o.slice(c):"0."+new Array(1-c).join("0")+d1(e,Math.max(0,a+c-1))[0]}function BT(e,a){var r=d1(e,a);if(!r)return e+"";var o=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}var NT={"%":function(e,a){return(e*100).toFixed(a)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:LT,e:function(e,a){return e.toExponential(a)},f:function(e,a){return e.toFixed(a)},g:function(e,a){return e.toPrecision(a)},o:function(e){return Math.round(e).toString(8)},p:function(e,a){return BT(e*100,a)},r:BT,s:Uk,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function zT(e){return e}var UT=Array.prototype.map,ZT=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function VT(e){var a=e.grouping===void 0||e.thousands===void 0?zT:Nk(UT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?zT:zk(UT.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"-":e.minus+"",y=e.nan===void 0?"NaN":e.nan+"";function S(L){L=xy(L);var V=L.fill,G=L.align,he=L.sign,ve=L.symbol,Pe=L.zero,Xe=L.width,gt=L.comma,_t=L.precision,zt=L.trim,Xt=L.type;Xt==="n"?(gt=!0,Xt="g"):NT[Xt]||(_t===void 0&&(_t=12),zt=!0,Xt="g"),(Pe||V==="0"&&G==="=")&&(Pe=!0,V="0",G="=");var nr=ve==="$"?r:ve==="#"&&/[boxX]/.test(Xt)?"0"+Xt.toLowerCase():"",ar=ve==="$"?o:/[%p]/.test(Xt)?p:"",Tr=NT[Xt],Zr=/[defgprs%]/.test(Xt);_t=_t===void 0?6:/[gprs]/.test(Xt)?Math.max(1,Math.min(21,_t)):Math.max(0,Math.min(20,_t));function rn(ln){var Gn=nr,fi=ar,Fi,uo,is;if(Xt==="c")fi=Tr(ln)+fi,ln="";else{ln=+ln;var as=ln<0||1/ln<0;if(ln=isNaN(ln)?y:Tr(Math.abs(ln),_t),zt&&(ln=e4(ln)),as&&+ln==0&&he!=="+"&&(as=!1),Gn=(as?he==="("?he:g:he==="-"||he==="("?"":he)+Gn,fi=(Xt==="s"?ZT[8+FT/3]:"")+fi+(as&&he==="("?")":""),Zr){for(Fi=-1,uo=ln.length;++Fi<uo;)if(is=ln.charCodeAt(Fi),48>is||is>57){fi=(is===46?u+ln.slice(Fi+1):ln.slice(Fi))+fi,ln=ln.slice(0,Fi);break}}}gt&&!Pe&&(ln=a(ln,1/0));var tu=Gn.length+ln.length+fi.length,hu=tu<Xe?new Array(Xe-tu+1).join(V):"";switch(gt&&Pe&&(ln=a(hu+ln,hu.length?Xe-fi.length:1/0),hu=""),G){case"<":ln=Gn+ln+fi+hu;break;case"=":ln=Gn+hu+ln+fi;break;case"^":ln=hu.slice(0,tu=hu.length>>1)+Gn+ln+fi+hu.slice(tu);break;default:ln=hu+Gn+ln+fi;break}return c(ln)}return rn.toString=function(){return L+""},rn}function O(L,V){var G=S((L=xy(L),L.type="f",L)),he=Math.max(-8,Math.min(8,Math.floor(r0(V)/3)))*3,ve=Math.pow(10,-he),Pe=ZT[8+he/3];return function(Xe){return G(ve*Xe)+Pe}}return{format:S,formatPrefix:O}}var by,v1,yS;Zk({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Zk(e){return by=VT(e),v1=by.format,yS=by.formatPrefix,by}function Vk(e,a){return e=Math.abs(e),a=Math.abs(a)-e,Math.max(0,r0(a)-r0(e))+1}function Hk(e){return Math.max(0,-r0(Math.abs(e)))}function jk(e,a,r,o){var u=oS(e,a,r),c;switch(o=xy(o==null?",f":o),o.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(a));return o.precision==null&&!isNaN(c=Bk(u,p))&&(o.precision=c),yS(o,p)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(c=Vk(u,Math.max(Math.abs(e),Math.abs(a))))&&(o.precision=c-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(c=Hk(u))&&(o.precision=c-(o.type==="%")*2);break}}return v1(o)}function Sy(e){var a=e.domain;return e.ticks=function(r){var o=a();return xT(o[0],o[o.length-1],r==null?10:r)},e.tickFormat=function(r,o){var u=a();return jk(u[0],u[u.length-1],r==null?10:r,o)},e.nice=function(r){r==null&&(r=10);var o=a(),u=0,c=o.length-1,p=o[u],g=o[c],y;return g<p&&(y=p,p=g,g=y,y=u,u=c,c=y),y=c1(p,g,r),y>0?(p=Math.floor(p/y)*y,g=Math.ceil(g/y)*y,y=c1(p,g,r)):y<0&&(p=Math.ceil(p*y)/y,g=Math.floor(g*y)/y,y=c1(p,g,r)),y>0?(o[u]=Math.floor(p/y)*y,o[c]=Math.ceil(g/y)*y,a(o)):y<0&&(o[u]=Math.ceil(p*y)/y,o[c]=Math.floor(g*y)/y,a(o)),e},e}function HT(){var e=Fk(Uc,Uc);return e.copy=function(){return p1(e,HT())},rg.apply(e,arguments),Sy(e)}function Wk(e){var a;function r(o){return isNaN(o=+o)?a:o}return r.invert=r,r.domain=r.range=function(o){return arguments.length?(e=map.call(o,number),r):e.slice()},r.unknown=function(o){return arguments.length?(a=o,r):a},r.copy=function(){return Wk(e).unknown(a)},e=arguments.length?map.call(e,number):[0,1],linearish(r)}function jT(e,a){e=e.slice();var r=0,o=e.length-1,u=e[r],c=e[o],p;return c<u&&(p=r,r=o,o=p,p=u,u=c,c=p),e[r]=a.floor(u),e[o]=a.ceil(c),e}function WT(e){return Math.log(e)}function GT(e){return Math.exp(e)}function Gk(e){return-Math.log(-e)}function t4(e){return-Math.exp(-e)}function $k(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Xk(e){return e===10?$k:e===Math.E?Math.exp:function(a){return Math.pow(e,a)}}function $T(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(a){return Math.log(a)/e})}function XT(e){return function(a){return-e(-a)}}function YT(e){var a=e(WT,GT),r=a.domain,o=10,u,c;function p(){return u=$T(o),c=Xk(o),r()[0]<0?(u=XT(u),c=XT(c),e(Gk,t4)):e(WT,GT),a}return a.base=function(g){return arguments.length?(o=+g,p()):o},a.domain=function(g){return arguments.length?(r(g),p()):r()},a.ticks=function(g){var y=r(),S=y[0],O=y[y.length-1],L;(L=O<S)&&(V=S,S=O,O=V);var V=u(S),G=u(O),he,ve,Pe,Xe=g==null?10:+g,gt=[];if(!(o%1)&&G-V<Xe){if(V=Math.round(V)-1,G=Math.round(G)+1,S>0){for(;V<G;++V)for(ve=1,he=c(V);ve<o;++ve)if(Pe=he*ve,!(Pe<S)){if(Pe>O)break;gt.push(Pe)}}else for(;V<G;++V)for(ve=o-1,he=c(V);ve>=1;--ve)if(Pe=he*ve,!(Pe<S)){if(Pe>O)break;gt.push(Pe)}}else gt=xT(V,G,Math.min(G-V,Xe)).map(c);return L?gt.reverse():gt},a.tickFormat=function(g,y){if(y==null&&(y=o===10?".0e":","),typeof y!="function"&&(y=v1(y)),g===1/0)return y;g==null&&(g=10);var S=Math.max(1,o*g/a.ticks().length);return function(O){var L=O/c(Math.round(u(O)));return L*o<o-.5&&(L*=o),L<=S?y(O):""}},a.nice=function(){return r(jT(r(),{floor:function(g){return c(Math.floor(u(g)))},ceil:function(g){return c(Math.ceil(u(g)))}}))},a}function _S(){var e=YT(gS()).domain([1,10]);return e.copy=function(){return p1(e,_S()).base(e.base())},rg.apply(e,arguments),e}function KT(e){return function(a){return Math.sign(a)*Math.log1p(Math.abs(a/e))}}function n0(e){return function(a){return Math.sign(a)*Math.expm1(Math.abs(a))*e}}function Yk(e){var a=1,r=e(KT(a),n0(a));return r.constant=function(o){return arguments.length?e(KT(a=+o),n0(a)):a},linearish(r)}function Kk(){var e=Yk(transformer());return e.copy=function(){return copy(e,Kk()).constant(e.constant())},initRange.apply(e,arguments)}function qT(e){return function(a){return a<0?-Math.pow(-a,e):Math.pow(a,e)}}function QT(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function qk(e){return e<0?-e*e:e*e}function g1(e){var a=e(Uc,Uc),r=1;function o(){return r===1?e(Uc,Uc):r===.5?e(QT,qk):e(qT(r),qT(1/r))}return a.exponent=function(u){return arguments.length?(r=+u,o()):r},Sy(a)}function m1(){var e=g1(gS());return e.copy=function(){return p1(e,m1()).exponent(e.exponent())},rg.apply(e,arguments),e}function JT(){return m1.apply(null,arguments).exponent(.5)}function eA(){var e=[],a=[],r=[],o;function u(){var p=0,g=Math.max(1,a.length);for(r=new Array(g-1);++p<g;)r[p-1]=yy(e,p/g);return c}function c(p){return isNaN(p=+p)?o:a[$g(r,p)]}return c.invertExtent=function(p){var g=a.indexOf(p);return g<0?[NaN,NaN]:[g>0?r[g-1]:e[0],g<r.length?r[g]:e[e.length-1]]},c.domain=function(p){if(!arguments.length)return e.slice();e=[];for(var g=0,y=p.length,S;g<y;++g)S=p[g],S!=null&&!isNaN(S=+S)&&e.push(S);return e.sort(tS),u()},c.range=function(p){return arguments.length?(a=up.call(p),u()):a.slice()},c.unknown=function(p){return arguments.length?(o=p,c):o},c.quantiles=function(){return r.slice()},c.copy=function(){return eA().domain(e).range(a).unknown(o)},rg.apply(c,arguments)}function tA(){var e=0,a=1,r=1,o=[.5],u=[0,1],c;function p(y){return y<=y?u[$g(o,y,0,r)]:c}function g(){var y=-1;for(o=new Array(r);++y<r;)o[y]=((y+1)*a-(y-r)*e)/(r+1);return p}return p.domain=function(y){return arguments.length?(e=+y[0],a=+y[1],g()):[e,a]},p.range=function(y){return arguments.length?(r=(u=up.call(y)).length-1,g()):u.slice()},p.invertExtent=function(y){var S=u.indexOf(y);return S<0?[NaN,NaN]:S<1?[e,o[0]]:S>=r?[o[r-1],a]:[o[S-1],o[S]]},p.unknown=function(y){return arguments.length&&(c=y),p},p.thresholds=function(){return o.slice()},p.copy=function(){return tA().domain([e,a]).range(u).unknown(c)},rg.apply(Sy(p),arguments)}function i0(){var e=[.5],a=[0,1],r,o=1;function u(c){return c<=c?a[$g(e,c,0,o)]:r}return u.domain=function(c){return arguments.length?(e=up.call(c),o=Math.min(e.length,a.length-1),u):e.slice()},u.range=function(c){return arguments.length?(a=up.call(c),o=Math.min(e.length,a.length-1),u):a.slice()},u.invertExtent=function(c){var p=a.indexOf(c);return[e[p-1],e[p]]},u.unknown=function(c){return arguments.length?(r=c,u):r},u.copy=function(){return i0().domain(e).range(a).unknown(r)},rg.apply(u,arguments)}var y1=new Date,_1=new Date;function of(e,a,r,o){function u(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return u.floor=function(c){return e(c=new Date(+c)),c},u.ceil=function(c){return e(c=new Date(c-1)),a(c,1),e(c),c},u.round=function(c){var p=u(c),g=u.ceil(c);return c-p<g-c?p:g},u.offset=function(c,p){return a(c=new Date(+c),p==null?1:Math.floor(p)),c},u.range=function(c,p,g){var y=[],S;if(c=u.ceil(c),g=g==null?1:Math.floor(g),!(c<p)||!(g>0))return y;do y.push(S=new Date(+c)),a(c,g),e(c);while(S<c&&c<p);return y},u.filter=function(c){return of(function(p){if(p>=p)for(;e(p),!c(p);)p.setTime(p-1)},function(p,g){if(p>=p)if(g<0)for(;++g<=0;)for(;a(p,-1),!c(p););else for(;--g>=0;)for(;a(p,1),!c(p););})},r&&(u.count=function(c,p){return y1.setTime(+c),_1.setTime(+p),e(y1),e(_1),Math.floor(r(y1,_1))},u.every=function(c){return c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?u.filter(o?function(p){return o(p)%c===0}:function(p){return u.count(0,p)%c===0}):u}),u}var x1=of(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,a){e.setFullYear(e.getFullYear()+a)},function(e,a){return a.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});x1.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:of(function(a){a.setFullYear(Math.floor(a.getFullYear()/e)*e),a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,r){a.setFullYear(a.getFullYear()+r*e)})};var _v=x1,Qk=x1.range,rA=of(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,a){e.setMonth(e.getMonth()+a)},function(e,a){return a.getMonth()-e.getMonth()+(a.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),Jk=rA,xS=rA.range,Pd=1e3,Od=6e4,nA=36e5,bS=864e5,SS=6048e5;function xv(e){return of(function(a){a.setDate(a.getDate()-(a.getDay()+7-e)%7),a.setHours(0,0,0,0)},function(a,r){a.setDate(a.getDate()+r*7)},function(a,r){return(r-a-(r.getTimezoneOffset()-a.getTimezoneOffset())*Od)/SS})}var b1=xv(0),S1=xv(1),eD=xv(2),tD=xv(3),a0=xv(4),rD=xv(5),iA=xv(6),r4=b1.range,n4=S1.range,i4=eD.range,a4=tD.range,o4=a0.range,s4=rD.range,u4=iA.range,aA=of(function(e){e.setHours(0,0,0,0)},function(e,a){e.setDate(e.getDate()+a)},function(e,a){return(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*Od)/bS},function(e){return e.getDate()-1}),ES=aA,l4=aA.range,oA=of(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Pd-e.getMinutes()*Od)},function(e,a){e.setTime(+e+a*nA)},function(e,a){return(a-e)/nA},function(e){return e.getHours()}),nD=oA,c4=oA.range,wS=of(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Pd)},function(e,a){e.setTime(+e+a*Od)},function(e,a){return(a-e)/Od},function(e){return e.getMinutes()}),iD=wS,aD=wS.range,Qg=of(function(e){e.setTime(e-e.getMilliseconds())},function(e,a){e.setTime(+e+a*Pd)},function(e,a){return(a-e)/Pd},function(e){return e.getUTCSeconds()}),oD=Qg,f4=Qg.range,E1=of(function(){},function(e,a){e.setTime(+e+a)},function(e,a){return a-e});E1.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?of(function(a){a.setTime(Math.floor(a/e)*e)},function(a,r){a.setTime(+a+r*e)},function(a,r){return(r-a)/e}):E1};var sD=E1,uD=E1.range;function lp(e){return of(function(a){a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-e)%7),a.setUTCHours(0,0,0,0)},function(a,r){a.setUTCDate(a.getUTCDate()+r*7)},function(a,r){return(r-a)/SS})}var CS=lp(0),Ey=lp(1),TS=lp(2),AS=lp(3),og=lp(4),MS=lp(5),lD=lp(6),h4=CS.range,cD=Ey.range,fD=TS.range,p4=AS.range,d4=og.range,v4=MS.range,g4=lD.range,sA=of(function(e){e.setUTCHours(0,0,0,0)},function(e,a){e.setUTCDate(e.getUTCDate()+a)},function(e,a){return(a-e)/bS},function(e){return e.getUTCDate()-1}),uA=sA,m4=sA.range,RS=of(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,a){e.setUTCFullYear(e.getUTCFullYear()+a)},function(e,a){return a.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});RS.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:of(function(a){a.setUTCFullYear(Math.floor(a.getUTCFullYear()/e)*e),a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,r){a.setUTCFullYear(a.getUTCFullYear()+r*e)})};var wy=RS,hD=RS.range;function w1(e){if(0<=e.y&&e.y<100){var a=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return a.setFullYear(e.y),a}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lA(e){if(0<=e.y&&e.y<100){var a=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return a.setUTCFullYear(e.y),a}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zc(e,a,r){return{y:e,m:a,d:r,H:0,M:0,S:0,L:0}}function Oh(e){var a=e.dateTime,r=e.date,o=e.time,u=e.periods,c=e.days,p=e.shortDays,g=e.months,y=e.shortMonths,S=Jg(u),O=s0(u),L=Jg(c),V=s0(c),G=Jg(p),he=s0(p),ve=Jg(g),Pe=s0(g),Xe=Jg(y),gt=s0(y),_t={a:as,A:tu,b:hu,B:lf,c:null,d:TD,e:TD,f:ID,g:ND,G:zD,H:AD,I:MD,j:RD,L:yA,m:y4,M:PD,p:jR,q:_x,Q:RA,s:IA,S:OD,u:kD,U:DD,V:LD,w:FD,W:BD,x:null,X:null,y:_4,Y:xA,Z:bA,"%":MA},zt={a:rB,A:nB,b:bl,B:pp,c:null,d:SA,e:SA,f:ZD,g:YD,G:qD,H:UD,I:EA,j:wA,L:CA,m:VD,M:HD,p:WR,q:GR,Q:RA,s:IA,S:jD,u:WD,U:GD,V:$D,w:XD,W:AA,x:null,X:null,y:x4,Y:KD,Z:QD,"%":MA},Xt={a:rn,A:ln,b:Gn,B:fi,c:Fi,d:gA,e:gA,f:SD,g:vA,G:dA,H:mA,I:mA,j:yD,L:bD,m:mD,M:_D,p:Zr,q:gD,Q:wD,s:CD,S:xD,u:fA,U:dD,V:hA,w:cA,W:pA,x:uo,X:is,y:vA,Y:dA,Z:vD,"%":ED};_t.x=nr(r,_t),_t.X=nr(o,_t),_t.c=nr(a,_t),zt.x=nr(r,zt),zt.X=nr(o,zt),zt.c=nr(a,zt);function nr(Ba,vs){return function(Ws){var Ui=[],dp=-1,Qu=0,qp=Ba.length,Qp,e_,n8;for(Ws instanceof Date||(Ws=new Date(+Ws));++dp<qp;)Ba.charCodeAt(dp)===37&&(Ui.push(Ba.slice(Qu,dp)),(e_=IS[Qp=Ba.charAt(++dp)])!=null?Qp=Ba.charAt(++dp):e_=Qp==="e"?" ":"0",(n8=vs[Qp])&&(Qp=n8(Ws,e_)),Ui.push(Qp),Qu=dp+1);return Ui.push(Ba.slice(Qu,dp)),Ui.join("")}}function ar(Ba,vs){return function(Ws){var Ui=Zc(1900,void 0,1),dp=Tr(Ui,Ba,Ws+="",0),Qu,qp;if(dp!=Ws.length)return null;if("Q"in Ui)return new Date(Ui.Q);if("s"in Ui)return new Date(Ui.s*1e3+("L"in Ui?Ui.L:0));if(vs&&!("Z"in Ui)&&(Ui.Z=0),"p"in Ui&&(Ui.H=Ui.H%12+Ui.p*12),Ui.m===void 0&&(Ui.m="q"in Ui?Ui.q:0),"V"in Ui){if(Ui.V<1||Ui.V>53)return null;"w"in Ui||(Ui.w=1),"Z"in Ui?(Qu=lA(Zc(Ui.y,0,1)),qp=Qu.getUTCDay(),Qu=qp>4||qp===0?Ey.ceil(Qu):Ey(Qu),Qu=uA.offset(Qu,(Ui.V-1)*7),Ui.y=Qu.getUTCFullYear(),Ui.m=Qu.getUTCMonth(),Ui.d=Qu.getUTCDate()+(Ui.w+6)%7):(Qu=w1(Zc(Ui.y,0,1)),qp=Qu.getDay(),Qu=qp>4||qp===0?S1.ceil(Qu):S1(Qu),Qu=ES.offset(Qu,(Ui.V-1)*7),Ui.y=Qu.getFullYear(),Ui.m=Qu.getMonth(),Ui.d=Qu.getDate()+(Ui.w+6)%7)}else("W"in Ui||"U"in Ui)&&("w"in Ui||(Ui.w="u"in Ui?Ui.u%7:"W"in Ui?1:0),qp="Z"in Ui?lA(Zc(Ui.y,0,1)).getUTCDay():w1(Zc(Ui.y,0,1)).getDay(),Ui.m=0,Ui.d="W"in Ui?(Ui.w+6)%7+Ui.W*7-(qp+5)%7:Ui.w+Ui.U*7-(qp+6)%7);return"Z"in Ui?(Ui.H+=Ui.Z/100|0,Ui.M+=Ui.Z%100,lA(Ui)):w1(Ui)}}function Tr(Ba,vs,Ws,Ui){for(var dp=0,Qu=vs.length,qp=Ws.length,Qp,e_;dp<Qu;){if(Ui>=qp)return-1;if(Qp=vs.charCodeAt(dp++),Qp===37){if(Qp=vs.charAt(dp++),e_=Xt[Qp in IS?vs.charAt(dp++):Qp],!e_||(Ui=e_(Ba,Ws,Ui))<0)return-1}else if(Qp!=Ws.charCodeAt(Ui++))return-1}return Ui}function Zr(Ba,vs,Ws){var Ui=S.exec(vs.slice(Ws));return Ui?(Ba.p=O[Ui[0].toLowerCase()],Ws+Ui[0].length):-1}function rn(Ba,vs,Ws){var Ui=G.exec(vs.slice(Ws));return Ui?(Ba.w=he[Ui[0].toLowerCase()],Ws+Ui[0].length):-1}function ln(Ba,vs,Ws){var Ui=L.exec(vs.slice(Ws));return Ui?(Ba.w=V[Ui[0].toLowerCase()],Ws+Ui[0].length):-1}function Gn(Ba,vs,Ws){var Ui=Xe.exec(vs.slice(Ws));return Ui?(Ba.m=gt[Ui[0].toLowerCase()],Ws+Ui[0].length):-1}function fi(Ba,vs,Ws){var Ui=ve.exec(vs.slice(Ws));return Ui?(Ba.m=Pe[Ui[0].toLowerCase()],Ws+Ui[0].length):-1}function Fi(Ba,vs,Ws){return Tr(Ba,a,vs,Ws)}function uo(Ba,vs,Ws){return Tr(Ba,r,vs,Ws)}function is(Ba,vs,Ws){return Tr(Ba,o,vs,Ws)}function as(Ba){return p[Ba.getDay()]}function tu(Ba){return c[Ba.getDay()]}function hu(Ba){return y[Ba.getMonth()]}function lf(Ba){return g[Ba.getMonth()]}function jR(Ba){return u[+(Ba.getHours()>=12)]}function _x(Ba){return 1+~~(Ba.getMonth()/3)}function rB(Ba){return p[Ba.getUTCDay()]}function nB(Ba){return c[Ba.getUTCDay()]}function bl(Ba){return y[Ba.getUTCMonth()]}function pp(Ba){return g[Ba.getUTCMonth()]}function WR(Ba){return u[+(Ba.getUTCHours()>=12)]}function GR(Ba){return 1+~~(Ba.getUTCMonth()/3)}return{format:function(Ba){var vs=nr(Ba+="",_t);return vs.toString=function(){return Ba},vs},parse:function(Ba){var vs=ar(Ba+="",!1);return vs.toString=function(){return Ba},vs},utcFormat:function(Ba){var vs=nr(Ba+="",zt);return vs.toString=function(){return Ba},vs},utcParse:function(Ba){var vs=ar(Ba+="",!0);return vs.toString=function(){return Ba},vs}}}var IS={"-":"",_:" ",0:"0"},yc=/^\s*\d+/,pD=/^%/,o0=/[\\^$*+?|[\]().{}]/g;function qo(e,a,r){var o=e<0?"-":"",u=(o?-e:e)+"",c=u.length;return o+(c<r?new Array(r-c+1).join(a)+u:u)}function PS(e){return e.replace(o0,"\\$&")}function Jg(e){return new RegExp("^(?:"+e.map(PS).join("|")+")","i")}function s0(e){for(var a={},r=-1,o=e.length;++r<o;)a[e[r].toLowerCase()]=r;return a}function cA(e,a,r){var o=yc.exec(a.slice(r,r+1));return o?(e.w=+o[0],r+o[0].length):-1}function fA(e,a,r){var o=yc.exec(a.slice(r,r+1));return o?(e.u=+o[0],r+o[0].length):-1}function dD(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.U=+o[0],r+o[0].length):-1}function hA(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.V=+o[0],r+o[0].length):-1}function pA(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.W=+o[0],r+o[0].length):-1}function dA(e,a,r){var o=yc.exec(a.slice(r,r+4));return o?(e.y=+o[0],r+o[0].length):-1}function vA(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),r+o[0].length):-1}function vD(e,a,r){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(a.slice(r,r+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),r+o[0].length):-1}function gD(e,a,r){var o=yc.exec(a.slice(r,r+1));return o?(e.q=o[0]*3-3,r+o[0].length):-1}function mD(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.m=o[0]-1,r+o[0].length):-1}function gA(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.d=+o[0],r+o[0].length):-1}function yD(e,a,r){var o=yc.exec(a.slice(r,r+3));return o?(e.m=0,e.d=+o[0],r+o[0].length):-1}function mA(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.H=+o[0],r+o[0].length):-1}function _D(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.M=+o[0],r+o[0].length):-1}function xD(e,a,r){var o=yc.exec(a.slice(r,r+2));return o?(e.S=+o[0],r+o[0].length):-1}function bD(e,a,r){var o=yc.exec(a.slice(r,r+3));return o?(e.L=+o[0],r+o[0].length):-1}function SD(e,a,r){var o=yc.exec(a.slice(r,r+6));return o?(e.L=Math.floor(o[0]/1e3),r+o[0].length):-1}function ED(e,a,r){var o=pD.exec(a.slice(r,r+1));return o?r+o[0].length:-1}function wD(e,a,r){var o=yc.exec(a.slice(r));return o?(e.Q=+o[0],r+o[0].length):-1}function CD(e,a,r){var o=yc.exec(a.slice(r));return o?(e.s=+o[0],r+o[0].length):-1}function TD(e,a){return qo(e.getDate(),a,2)}function AD(e,a){return qo(e.getHours(),a,2)}function MD(e,a){return qo(e.getHours()%12||12,a,2)}function RD(e,a){return qo(1+ES.count(_v(e),e),a,3)}function yA(e,a){return qo(e.getMilliseconds(),a,3)}function ID(e,a){return yA(e,a)+"000"}function y4(e,a){return qo(e.getMonth()+1,a,2)}function PD(e,a){return qo(e.getMinutes(),a,2)}function OD(e,a){return qo(e.getSeconds(),a,2)}function kD(e){var a=e.getDay();return a===0?7:a}function DD(e,a){return qo(b1.count(_v(e)-1,e),a,2)}function _A(e){var a=e.getDay();return a>=4||a===0?a0(e):a0.ceil(e)}function LD(e,a){return e=_A(e),qo(a0.count(_v(e),e)+(_v(e).getDay()===4),a,2)}function FD(e){return e.getDay()}function BD(e,a){return qo(S1.count(_v(e)-1,e),a,2)}function _4(e,a){return qo(e.getFullYear()%100,a,2)}function ND(e,a){return e=_A(e),qo(e.getFullYear()%100,a,2)}function xA(e,a){return qo(e.getFullYear()%1e4,a,4)}function zD(e,a){var r=e.getDay();return e=r>=4||r===0?a0(e):a0.ceil(e),qo(e.getFullYear()%1e4,a,4)}function bA(e){var a=e.getTimezoneOffset();return(a>0?"-":(a*=-1,"+"))+qo(a/60|0,"0",2)+qo(a%60,"0",2)}function SA(e,a){return qo(e.getUTCDate(),a,2)}function UD(e,a){return qo(e.getUTCHours(),a,2)}function EA(e,a){return qo(e.getUTCHours()%12||12,a,2)}function wA(e,a){return qo(1+uA.count(wy(e),e),a,3)}function CA(e,a){return qo(e.getUTCMilliseconds(),a,3)}function ZD(e,a){return CA(e,a)+"000"}function VD(e,a){return qo(e.getUTCMonth()+1,a,2)}function HD(e,a){return qo(e.getUTCMinutes(),a,2)}function jD(e,a){return qo(e.getUTCSeconds(),a,2)}function WD(e){var a=e.getUTCDay();return a===0?7:a}function GD(e,a){return qo(CS.count(wy(e)-1,e),a,2)}function TA(e){var a=e.getUTCDay();return a>=4||a===0?og(e):og.ceil(e)}function $D(e,a){return e=TA(e),qo(og.count(wy(e),e)+(wy(e).getUTCDay()===4),a,2)}function XD(e){return e.getUTCDay()}function AA(e,a){return qo(Ey.count(wy(e)-1,e),a,2)}function x4(e,a){return qo(e.getUTCFullYear()%100,a,2)}function YD(e,a){return e=TA(e),qo(e.getUTCFullYear()%100,a,2)}function KD(e,a){return qo(e.getUTCFullYear()%1e4,a,4)}function qD(e,a){var r=e.getUTCDay();return e=r>=4||r===0?og(e):og.ceil(e),qo(e.getUTCFullYear()%1e4,a,4)}function QD(){return"+0000"}function MA(){return"%"}function RA(e){return+e}function IA(e){return Math.floor(+e/1e3)}var u0,JD,eL,tL,rL;PA({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PA(e){return u0=Oh(e),JD=u0.format,eL=u0.parse,tL=u0.utcFormat,rL=u0.utcParse,u0}var Cy=1e3,Ty=Cy*60,Ay=Ty*60,My=Ay*24,nL=My*7,iL=My*30,OS=My*365;function aL(e){return new Date(e)}function oL(e){return e instanceof Date?+e:+new Date(+e)}function OA(e,a,r,o,u,c,p,g,y){var S=Fk(Uc,Uc),O=S.invert,L=S.domain,V=y(".%L"),G=y(":%S"),he=y("%I:%M"),ve=y("%I %p"),Pe=y("%a %d"),Xe=y("%b %d"),gt=y("%B"),_t=y("%Y"),zt=[[p,1,Cy],[p,5,5*Cy],[p,15,15*Cy],[p,30,30*Cy],[c,1,Ty],[c,5,5*Ty],[c,15,15*Ty],[c,30,30*Ty],[u,1,Ay],[u,3,3*Ay],[u,6,6*Ay],[u,12,12*Ay],[o,1,My],[o,2,2*My],[r,1,nL],[a,1,iL],[a,3,3*iL],[e,1,OS]];function Xt(ar){return(p(ar)<ar?V:c(ar)<ar?G:u(ar)<ar?he:o(ar)<ar?ve:a(ar)<ar?r(ar)<ar?Pe:Xe:e(ar)<ar?gt:_t)(ar)}function nr(ar,Tr,Zr,rn){if(ar==null&&(ar=10),typeof ar=="number"){var ln=Math.abs(Zr-Tr)/ar,Gn=mT(function(fi){return fi[2]}).right(zt,ln);Gn===zt.length?(rn=oS(Tr/OS,Zr/OS,ar),ar=e):Gn?(Gn=zt[ln/zt[Gn-1][2]<zt[Gn][2]/ln?Gn-1:Gn],rn=Gn[1],ar=Gn[0]):(rn=Math.max(oS(Tr,Zr,ar),1),ar=g)}return rn==null?ar:ar.every(rn)}return S.invert=function(ar){return new Date(O(ar))},S.domain=function(ar){return arguments.length?L(RT.call(ar,oL)):L().map(aL)},S.ticks=function(ar,Tr){var Zr=L(),rn=Zr[0],ln=Zr[Zr.length-1],Gn=ln<rn,fi;return Gn&&(fi=rn,rn=ln,ln=fi),fi=nr(ar,rn,ln,Tr),fi=fi?fi.range(rn,ln+1):[],Gn?fi.reverse():fi},S.tickFormat=function(ar,Tr){return Tr==null?Xt:y(Tr)},S.nice=function(ar,Tr){var Zr=L();return(ar=nr(ar,Zr[0],Zr[Zr.length-1],Tr))?L(jT(Zr,ar)):S},S.copy=function(){return p1(S,OA(e,a,r,o,u,c,p,g,y))},S}function sL(){return rg.apply(OA(_v,Jk,b1,ES,nD,iD,oD,sD,JD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b4(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function C1(){var e=0,a=1,r,o,u,c,p=Uc,g=!1,y;function S(O){return isNaN(O=+O)?y:p(u===0?.5:(O=(c(O)-r)*u,g?Math.max(0,Math.min(1,O)):O))}return S.domain=function(O){return arguments.length?(r=c(e=+O[0]),o=c(a=+O[1]),u=r===o?0:1/(o-r),S):[e,a]},S.clamp=function(O){return arguments.length?(g=!!O,S):g},S.interpolator=function(O){return arguments.length?(p=O,S):p},S.unknown=function(O){return arguments.length?(y=O,S):y},function(O){return c=O,r=O(e),o=O(a),u=r===o?0:1/(o-r),S}}function Ry(e,a){return a.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uL(){var e=Sy(C1()(Uc));return e.copy=function(){return Ry(e,uL())},Tk.apply(e,arguments)}function kA(){var e=loggish(C1()).domain([1,10]);return e.copy=function(){return Ry(e,kA()).base(e.base())},initInterpolator.apply(e,arguments)}function DA(){var e=symlogish(C1());return e.copy=function(){return Ry(e,DA()).constant(e.constant())},initInterpolator.apply(e,arguments)}function kS(){var e=powish(C1());return e.copy=function(){return Ry(e,kS()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function DS(){return kS.apply(null,arguments).exponent(.5)}function T1(){var e=[],a=identity;function r(o){if(!isNaN(o=+o))return a((bisect(e,o)-1)/(e.length-1))}return r.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var u=0,c=o.length,p;u<c;++u)p=o[u],p!=null&&!isNaN(p=+p)&&e.push(p);return e.sort(ascending),r},r.interpolator=function(o){return arguments.length?(a=o,r):a},r.copy=function(){return T1(a).domain(e)},initInterpolator.apply(r,arguments)}function A1(){var e=0,a=.5,r=1,o,u,c,p,g,y=Uc,S,O=!1,L;function V(G){return isNaN(G=+G)?L:(G=.5+((G=+S(G))-u)*(G<u?p:g),y(O?Math.max(0,Math.min(1,G)):G))}return V.domain=function(G){return arguments.length?(o=S(e=+G[0]),u=S(a=+G[1]),c=S(r=+G[2]),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),V):[e,a,r]},V.clamp=function(G){return arguments.length?(O=!!G,V):O},V.interpolator=function(G){return arguments.length?(y=G,V):y},V.unknown=function(G){return arguments.length?(L=G,V):L},function(G){return S=G,o=G(e),u=G(a),c=G(r),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),V}}function LA(){var e=Sy(A1()(Uc));return e.copy=function(){return Ry(e,LA())},Tk.apply(e,arguments)}function lL(){var e=loggish(A1()).domain([.1,1,10]);return e.copy=function(){return copy(e,lL()).base(e.base())},initInterpolator.apply(e,arguments)}function cL(){var e=symlogish(A1());return e.copy=function(){return copy(e,cL()).constant(e.constant())},initInterpolator.apply(e,arguments)}function FA(){var e=powish(A1());return e.copy=function(){return copy(e,FA()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function S4(){return FA.apply(null,arguments).exponent(.5)}function M1(e){var a,r=[];function o(u){return u==null?a:u}return o.invert=o,o.domain=o.range=function(u){return u?(r=u,u):r},o.unknown=function(u){return u?(a=u,u):a},o.copy=function(){return M1(e).unknown(a)},o}var kh,Iy,R1,Py=Ca.isNil,fL=Ca.isString,BA=Ca.uniq,NA=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,I1=(kh={},(0,He.Z)(kh,zs.LINEAR,HT),(0,He.Z)(kh,zs.POWER,m1),(0,He.Z)(kh,zs.LOG,_S),(0,He.Z)(kh,zs.IDENTITY,M1),(0,He.Z)(kh,zs.SEQUENTIAL,uL),(0,He.Z)(kh,zs.TIME,sL),(0,He.Z)(kh,zs.QUANTILE,eA),(0,He.Z)(kh,zs.QUANTIZE,tA),(0,He.Z)(kh,zs.THRESHOLD,i0),(0,He.Z)(kh,zs.CAT,Ph),(0,He.Z)(kh,zs.DIVERGING,LA),kh),LS=(Iy=(0,mt.b2)(),Iy(R1=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"scaleOptions",{})}return(0,ot.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("FeatureScalePlugin",(0,Sn.Z)(er().mark(function p(){var g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(r.log(kl.ScaleInitStart,Ko.INIT),u.scaleOptions=r.getScaleOptions(),y=c.getLayerStyleAttributes(),S=(g=r.getSource())===null||g===void 0?void 0:g.data.dataArray,!(Array.isArray(S)&&S.length===0)){L.next=8;break}return L.abrupt("return");case 8:u.caculateScalesForAttributes(y||[],S);case 9:r.log(kl.ScaleInitEnd,Ko.INIT);case 10:case"end":return L.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var p=(0,Sn.Z)(er().mark(function g(y){var S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(y){V.next=2;break}return V.abrupt("return",y);case 2:if(r.log(kl.ScaleInitStart,Ko.UPDATE),u.scaleOptions=r.getScaleOptions(),S=c.getLayerStyleAttributes(),O=r.getSource().data.dataArray,!(Array.isArray(O)&&O.length===0)){V.next=8;break}return V.abrupt("return",!0);case 8:return u.caculateScalesForAttributes(S||[],O),r.log(kl.ScaleInitEnd,Ko.UPDATE),r.layerModelNeedUpdate=!0,V.abrupt("return",!0);case 12:case"end":return V.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!r.layerModelNeedUpdate){u.scaleOptions=r.getScaleOptions();var p=c.getLayerStyleAttributes(),g=r.getSource().data.dataArray;if(!(Array.isArray(g)&&g.length===0)&&p){var y=p.filter(function(S){return S.needRescale});y.length&&u.caculateScalesForAttributes(y,g)}}})}},{key:"isNumber",value:function(r){return!isNaN(parseFloat(r))&&isFinite(r)}},{key:"caculateScalesForAttributes",value:function(r,o){var u=this;r.forEach(function(c){if(c.scale){var p=c.scale,g=c.scale.field;p.names=u.parseFields(Py(g)?[]:g);var y=[];p.names.forEach(function(S){var O;y.push(u.createScale(S,c.name,(O=c.scale)===null||O===void 0?void 0:O.values,o))}),y.some(function(S){return S.type===Hm.VARIABLE})?(p.type=Hm.VARIABLE,y.forEach(function(S){if(!p.callback&&p.values!=="text"){var O;switch((O=S.option)===null||O===void 0?void 0:O.type){case zs.LOG:case zs.LINEAR:case zs.POWER:if(p.values&&p.values.length>2){var L=S.scale.ticks(p.values.length);S.scale.domain(L)}p.values?S.scale.range(p.values):S.scale.range(S.option.domain);break;case zs.QUANTILE:case zs.QUANTIZE:case zs.THRESHOLD:S.scale.range(p.values);break;case zs.IDENTITY:break;case zs.CAT:p.values?S.scale.range(p.values):S.scale.range(S.option.domain);break;case zs.DIVERGING:case zs.SEQUENTIAL:S.scale.interpolator(Ek(p.values));break}}if(p.values==="text"){var V;S.scale.range((V=S.option)===null||V===void 0?void 0:V.domain)}})):(p.type=Hm.CONSTANT,p.defaultValues=y.map(function(S,O){return S.scale(p.names[O])})),p.scalers=y.map(function(S){return{field:S.field,func:S.scale,option:S.option}}),c.needRescale=!1}})}},{key:"parseFields",value:function(r){return Array.isArray(r)?r:fL(r)?r.split("*"):[r]}},{key:"createScale",value:function(r,o,u,c){var p,g,y=this.scaleOptions[o]&&((p=this.scaleOptions[o])===null||p===void 0?void 0:p.field)===r?this.scaleOptions[o]:this.scaleOptions[r],S={field:r,scale:void 0,type:Hm.VARIABLE,option:y};if(!c||!c.length)return y&&y.type?S.scale=this.createDefaultScale(y):(S.scale=Ph([r]),S.type=Hm.CONSTANT),S;var O=(g=c.find(function(G){return!Py(G[r])}))===null||g===void 0?void 0:g[r];if(this.isNumber(r)||Py(O)&&!y)S.scale=Ph([r]),S.type=Hm.CONSTANT;else{var L=y&&y.type||this.getDefaultType(O);u==="text"&&(L=zs.CAT),u===void 0&&(L=zs.IDENTITY);var V=this.createScaleConfig(L,r,y,c);S.scale=this.createDefaultScale(V),S.option=V}return S}},{key:"getDefaultType",value:function(r){var o=zs.LINEAR;return typeof r=="string"&&(o=NA.test(r)?zs.TIME:zs.CAT),o}},{key:"createScaleConfig",value:function(r,o,u,c){var p={type:r},g=[];if(r===zs.QUANTILE){var y=new Map;c==null||c.forEach(function(L){y.set(L._id,L[o])}),g=Array.from(y.values())}else g=(c==null?void 0:c.map(function(L){return L[o]}))||[];if(u!=null&&u.domain)p.domain=u==null?void 0:u.domain;else if(r===zs.CAT||r===zs.IDENTITY)p.domain=BA(g);else if(r===zs.QUANTILE)p.domain=g;else if(r===zs.DIVERGING){var S=rS(g),O=(u==null?void 0:u.neutral)!==void 0?u==null?void 0:u.neutral:(S[0]+S[1])/2;p.domain=[S[0],O,S[1]]}else p.domain=rS(g);return(0,ne.Z)((0,ne.Z)({},p),u)}},{key:"createDefaultScale",value:function(r){var o=r.type,u=r.domain,c=r.unknown,p=r.clamp,g=r.nice,y=I1[o]();return u&&y.domain&&y.domain(u),c&&y.unknown(c),p!==void 0&&y.clamp&&y.clamp(p),g!==void 0&&y.nice&&y.nice(g),y}}]),e}())||R1),zA,UA,hL=(zA=(0,mt.b2)(),zA(UA=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var o=r.animateStatus;o&&r.models.forEach(function(u){u.addUniforms((0,ne.Z)({},r.layerModel.getAnimateUniforms()))})})}}]),e}())||UA),FS,BS,pL=(FS=(0,mt.b2)(),FS(BS=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerMaskPlugin",function(){var o=r.getLayerConfig(),u=o.maskLayers,c=o.enableMask;if(!r.tileLayer&&u&&u.length>0){var p;(p=r.masks).push.apply(p,(0,Rn.Z)(u)),r.updateLayerConfig({mask:c})}})}}]),e}())||BS),dL=function(){function e(a){var r=a.rendererService,o=a.layerService,u=a.parent;(0,Ot.Z)(this,e),(0,He.Z)(this,"tileResource",new Map),(0,He.Z)(this,"layerTiles",[]),this.rendererService=r,this.layerService=o,this.parent=u}return(0,ot.Z)(e,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(r){return this.layerTiles.some(function(o){return o.key===r})}},{key:"addTile",value:function(r){this.layerTiles.push(r)}},{key:"getTile",value:function(r){return this.layerTiles.find(function(o){return o.key===r})}},{key:"getVisibleTileBylngLat",value:function(r){return this.layerTiles.find(function(o){return o.isLoaded&&o.visible&&o.lnglatInBounds(r)})}},{key:"removeTile",value:function(r){var o=this.layerTiles.findIndex(function(c){return c.key===r}),u=this.layerTiles.splice(o,1);u[0]&&u[0].destroy()}},{key:"updateTileVisible",value:function(r){var o=this.getTile(r.key);if(r.isVisible)if(r.parent){var u=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(u)}else o==null||o.updateVisible(!0);else if(r.parent){var c=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(!c)}else o==null||o.updateVisible(!1)}},{key:"isParentLoaded",value:function(r){var o=r.parent;if(!o)return!0;var u=this.getTile(o==null?void 0:o.key);return!!(u!=null&&u.isLoaded)}},{key:"isChildrenLoaded",value:function(r){var o=this,u=r==null?void 0:r.children;return u.length===0?!0:u.every(function(c){var p=o.getTile(c==null?void 0:c.key);return p?(p==null?void 0:p.isLoaded)===!0:!0})}},{key:"render",value:function(){var a=(0,Sn.Z)(er().mark(function o(){var u=this,c,p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c=this.getRenderLayers(),p=c.map(function(){var S=(0,Sn.Z)(er().mark(function O(L){return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,u.layerService.renderTileLayer(L);case 2:case"end":return G.stop()}},O)}));return function(O){return S.apply(this,arguments)}}()),y.next=4,Promise.all(p);case 4:case"end":return y.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"getRenderLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.visible&&u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,Rn.Z)(u.getLayers()))}),o}},{key:"getLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,Rn.Z)(u.getLayers()))}),o}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(r){return r.destroy()}),this.tileResource.clear()}}]),e}(),vL=k(32676);function gL(e,a,r){r===void 0&&(r={});var o=zr(e),u=zr(a),c=vL.union(o.coordinates,u.coordinates);return c.length===0?null:c.length===1?me(c[0],r.properties):Te(c,r.properties)}var mL=gL,yL=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"getCombineFeature",value:function(r){var o=null,u=r[0];return r.map(function(c){var p=me(c.coordinates);o===null?o=p:o=mL(o,p)}),u&&(o.properties=(0,ne.Z)({},u)),o}}]),e}(),Oy="select",ky="active",_L=function(){function e(a){var r=a.layerService,o=a.tileLayerService,u=a.parent;(0,Ot.Z)(this,e),(0,He.Z)(this,"tilePickID",new Map),this.layerService=r,this.tileLayerService=o,this.parent=u,this.tileSourceService=new yL}return(0,ot.Z)(e,[{key:"pickRender",value:function(r){var o=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(o){var u=o.getMainLayer();u==null||u.layerPickService.pickRender(r)}}},{key:"pick",value:function(r,o){var u=this.parent.getContainer(),c=u.get(Ct.IPickingService);if(r.type==="RasterLayer"){var p=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(p&&p.getMainLayer()!==void 0){var g=p.getMainLayer();return g.layerPickService.pickRasterLayer(g,o,this.parent)}return!1}return this.pickRender(o),c.pickFromPickingFBO(r,o)}},{key:"selectFeature",value:function(r){var o=(0,ji.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(Oy,g),this.updateHighLight(u,c,p,Oy)}},{key:"highlightPickedFeature",value:function(r){var o=(0,ji.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(ky,g),this.updateHighLight(u,c,p,ky)}},{key:"updateHighLight",value:function(r,o,u,c){this.tileLayerService.tiles.map(function(p){var g=p.getMainLayer();switch(c){case Oy:g==null||g.hooks.beforeSelect.call([r,o,u]);break;case ky:g==null||g.hooks.beforeHighlight.call([r,o,u]);break}})}},{key:"setPickState",value:function(){var r=this.tilePickID.get(Oy),o=this.tilePickID.get(ky);if(r){var u=this.pickId2Color(r),c=(0,ji.Z)(u,3),p=c[0],g=c[1],y=c[2];this.updateHighLight(p,g,y,Oy);return}if(o){var S=this.pickId2Color(o),O=(0,ji.Z)(S,3),L=O[0],V=O[1],G=O[2];this.updateHighLight(L,V,G,ky);return}}},{key:"color2PickId",value:function(r,o,u){return Xl(new Uint8Array([r,o,u]))}},{key:"pickId2Color",value:function(r){return bs(r)}},{key:"getFeatureById",value:function(r){var o=this.tileLayerService.getTiles().filter(function(c){return c.visible}),u=[];return o.forEach(function(c){u.push.apply(u,(0,Rn.Z)(c.getFeatureById(r)))}),u}},{key:"pickRasterLayer",value:function(r,o,u){return!1}}]),e}();function ZA(e){return e==="PolygonLayer"?a1:e==="LineLayer"?e0:vy}function xL(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}function bL(e){var a=SL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function SL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var em=function(e){(0,yr.Z)(r,e);var a=bL(r);function r(o,u){var c;return(0,Ot.Z)(this,r),c=a.call(this),(0,He.Z)((0,wr.Z)(c),"visible",!0),(0,He.Z)((0,wr.Z)(c),"layers",[]),(0,He.Z)((0,wr.Z)(c),"isLoaded",!1),(0,He.Z)((0,wr.Z)(c),"tileMaskLayers",[]),c.parent=u,c.sourceTile=o,c.x=o.x,c.y=o.y,c.z=o.z,c.key="".concat(c.x,"_").concat(c.y,"_").concat(c.z),c}return(0,ot.Z)(r,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(u){var c=(0,ji.Z)(this.sourceTile.bounds,4),p=c[0],g=c[1],y=c[2],S=c[3],O=u.lng,L=u.lat;return O>=p&&O<=y&&L>=g&&L<=S}},{key:"getLayerOptions",value:function(){var u,c=this.parent.getLayerConfig();return(0,ne.Z)((0,ne.Z)({},c),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:xL(this.parent.type),mask:c.mask||((u=c.maskLayers)===null||u===void 0?void 0:u.length)!==0&&c.enableMask})}},{key:"getMaskLayer",value:function(){var u=this,c=this.parent.getLayerConfig(),p=c.maskLayers,g=[];return p==null||p.forEach(function(y){if(!y.tileLayer)return g.push(y),y;var S=y.tileLayer,O=S.getTile(u.sourceTile.key),L=O==null?void 0:O.getLayers()[0];L&&g.push(L)}),g}},{key:"addTileMask",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y;return er().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return p=new a1({visible:!1,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").style({opacity:.5}),g=ny(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),O.next=5,p.init();case 5:return this.tileMask=p,y=this.getMainLayer(),y!==void 0&&(y.tileMask=p),O.abrupt("return",p);case 9:case"end":return O.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addMask",value:function(){var o=(0,Sn.Z)(er().mark(function c(p,g){var y;return er().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return y=ny(this.parent.sceneContainer),g.setContainer(y,this.parent.sceneContainer),O.next=4,g.init();case 4:p.addMask(g),this.tileMaskLayers.push(g);case 6:case"end":return O.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p.isTileLayer=!0,g=ny(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),this.layers.push(p),S.next=6,p.init();case 6:case"end":return S.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateVisible",value:function(u){this.visible=u,this.updateOptions("visible",u)}},{key:"updateOptions",value:function(u,c){this.layers.forEach(function(p){p.updateLayerConfig((0,He.Z)({},u,c))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(u){return[]}},{key:"getFeatureById",value:function(u){return[]}},{key:"destroy",value:function(){var u;(u=this.tileMask)===null||u===void 0||u.destroy(),this.layers.forEach(function(c){return c.destroy()})}}]),r}(Ys.EventEmitter);function EL(e){var a=wL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function wL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CL=function(e){(0,yr.Z)(r,e);var a=EL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.getSourceOption(),g=p.data.features[0].properties,y=new e0().source(p.data,p.options).size(1).shape("line").color("red"),S=new vy({minZoom:this.z-1,maxZoom:this.z+1,textAllowOverlap:!0}).source([g],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),L.next=6,this.addLayer(y);case 6:return L.next=8,this.addLayer(S);case 8:this.isLoaded=!0;case 9:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:c},options:{parser:{type:"geojson"},transforms:u.transforms}}}}]),r}(em);function E4(e){var a=NS();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function NS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var VA=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,Dy=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`,TL=function(e){(0,yr.Z)(r,e);var a=E4(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.color,p=c===void 0?"rgb(255,255,255)":c,g=u.opacity,y=u.brightness,S=u.contrast,O=u.saturation,L=u.gamma,V=ho(p),G={u_opacity:Fu(g,1),u_brightness:Fu(y,1),u_contrast:Fu(S,1),u_saturation:Fu(O,1),u_gamma:Fu(L,1)};this.textures=[this.texture];var he=this.getUniformsBufferInfo(G);return he}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"loadTexture",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y;return er().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return p=this.rendererService.createTexture2D,this.texture=p({height:0,width:0}),g=this.layer.getSource(),O.next=5,g.data.images;case 5:y=O.sent,this.texture=p({data:y[0],width:y[0].width,height:y[0].height,mag:Rt.LINEAR,min:Rt.LINEAR});case 7:case"end":return O.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Dy,fragmentShader:VA,triangulation:G_,primitive:Rt.TRIANGLES,blend:{enable:!0},depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_Uv",shaderLocation:Wa.UV,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(lu),AL={image:TL},HA=AL;function Ly(e){var a=jA();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function jA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ML=function(e){(0,yr.Z)(r,e);var a=Ly(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","ImageLayer"),o}return(0,ot.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new HA[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={image:{}};return c[u]}},{key:"getModelType",value:function(){return"image"}}]),r}(Ym);function RL(e){var a=IL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function IL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var PL=function(e){(0,yr.Z)(r,e);var a=RL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new ML((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var G,he,ve=V;S[ve]((G=p[ve])===null||G===void 0?void 0:G.field,(he=p[ve])===null||he===void 0?void 0:he.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(em);function OL(e){var a=kL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function kL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var DL=function(e){(0,yr.Z)(r,e);var a=OL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new tg((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var G,he,ve=V;S[ve]((G=p[ve])===null||G===void 0?void 0:G.field,(he=p[ve])===null||he===void 0?void 0:he.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getFeatures",value:function(u){if(!u)return[];var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=c.featureId,y=this.getFeatures(p);return{data:{type:"FeatureCollection",features:y},options:{parser:{type:"geojson",featureId:g},transforms:u.transforms}}}}]),r}(em);function LL(e){var a=FL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function FL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var BL=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  bool u_clampLow;
  bool u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r * 255.0;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,NL=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  bool u_clampLow;
  bool u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,zS=function(e){(0,yr.Z)(r,e);var a=LL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.clampLow,y=g===void 0?!0:g,S=u.clampHigh,O=S===void 0?!0:S,L=u.noDataValue,V=L===void 0?-9999999:L,G=u.domain,he=u.rampColors,ve=G||Yl(he);this.colorTexture=this.layer.textureService.getColorTexture(he,ve);var Pe={u_domain:ve,u_opacity:p||1,u_noDataValue:V,u_clampLow:y,u_clampHigh:typeof O!="undefined"?O:y,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};this.textures=[this.texture,this.colorTexture];var Xe=this.getUniformsBufferInfo(Pe);return Xe}},{key:"getRasterData",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!Array.isArray(p.data)){V.next=4;break}return V.abrupt("return",{data:p.data,width:p.width,height:p.height});case 4:return V.next=6,p.data;case 6:return g=V.sent,y=g.rasterData,S=g.width,O=g.height,V.abrupt("return",{data:Array.from(y),width:S,height:O});case 11:case"end":return V.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService.createTexture2D,y=p.data.dataArray[0],ve.next=6,this.getRasterData(y);case 6:return S=ve.sent,O=S.data,L=S.width,V=S.height,this.texture=g({data:new Uint8Array(O),width:L,height:V,format:Rt.LUMINANCE,type:Rt.UNSIGNED_BYTE,alignment:1}),ve.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:NL,fragmentShader:BL,triangulation:G_,primitive:Rt.TRIANGLES,depth:{enable:!1}});case 13:return G=ve.sent,ve.abrupt("return",[G]);case 15:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c;(u=this.texture)===null||u===void 0||u.destroy(),(c=this.colorTexture)===null||c===void 0||c.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{shaderLocation:Wa.UV,name:"a_Uv",buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(lu),zL=["data"],UL=["rasterData"];function ZL(e){var a=VL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function VL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var US=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
  if(outputColor.a < 0.01)
    discard;
 
}`,ZS=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,HL=function(e){(0,yr.Z)(r,e);var a=ZL(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"dataOption",{}),o}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.noDataValue,y=g===void 0?0:g,S=this.dataOption,O=S.rMinMax,L=O===void 0?[0,255]:O,V=S.gMinMax,G=V===void 0?[0,255]:V,he=S.bMinMax,ve=he===void 0?[0,255]:he,Pe={u_rminmax:L,u_gminmax:G,u_bminmax:ve,u_opacity:p||1,u_noDataValue:y,u_texture:this.texture};this.textures=[this.texture];var Xe=this.getUniformsBufferInfo(Pe);return Xe}},{key:"getRasterData",value:function(){var o=(0,Sn.Z)(er().mark(function c(p){var g,y,S,O,L;return er().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!Array.isArray(p.data)){G.next=4;break}return g=p.data,y=(0,Sf.Z)(p,zL),this.dataOption=y,G.abrupt("return",(0,ne.Z)({data:g},y));case 4:return G.next=6,p.data;case 6:if(S=G.sent,O=S.rasterData,L=(0,Sf.Z)(S,UL),this.dataOption=L,!Array.isArray(O)){G.next=14;break}return G.abrupt("return",(0,ne.Z)({data:O},L));case 14:return G.abrupt("return",(0,ne.Z)({data:Array.from(O)},L));case 15:case"end":return G.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService.createTexture2D,y=p.data.dataArray[0],ve.next=6,this.getRasterData(y);case 6:return S=ve.sent,O=S.data,L=S.width,V=S.height,this.texture=g({data:new Float32Array(O),width:L,height:V,format:Rt.RGB,type:Rt.FLOAT}),ve.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:ZS,fragmentShader:US,triangulation:G_,primitive:Rt.TRIANGLES,depth:{enable:!1}});case 13:return G=ve.sent,ve.abrupt("return",[G]);case 15:case"end":return ve.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_Uv",shaderLocation:Wa.UV,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(lu);function jL(e){var a=WL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function WL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var P1=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
uniform vec4 u_unpack;

float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data = texture2D(u_texture, coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return texture2D(u_colorTexture, coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    gl_FragColor = getColor(value);
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
      if(gl_FragColor.a < 0.01)
      discard;
  }
}
`,GL=`precision highp float;
uniform mat4 u_ModelMatrix;

attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,$L=function(e){(0,yr.Z)(r,e);var a=jL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=u.clampLow,g=p===void 0?!0:p,y=u.clampHigh,S=y===void 0?!0:y,O=u.noDataValue,L=O===void 0?-9999999:O,V=u.domain,G=u.rampColors,he=u.colorTexture,ve=u.rScaler,Pe=ve===void 0?6553.6:ve,Xe=u.gScaler,gt=Xe===void 0?25.6:Xe,_t=u.bScaler,zt=_t===void 0?.1:_t,Xt=u.offset,nr=Xt===void 0?1e4:Xt,ar=V||Yl(G),Tr=he;return he?this.layer.textureService.setColorTexture(he,G,ar):Tr=this.layer.textureService.getColorTexture(G,ar),{u_opacity:c||1,u_texture:this.texture,u_domain:ar,u_clampLow:g,u_clampHigh:typeof S!="undefined"?S:g,u_noDataValue:L,u_unpack:[Pe,gt,zt,nr],u_colorTexture:Tr}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.layer.getSource(),g=this.rendererService.createTexture2D,L.next=4,p.data.images;case 4:return y=L.sent,this.texture=g({data:y[0],width:y[0].width,height:y[0].height,min:Rt.LINEAR,mag:Rt.LINEAR}),L.next=8,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:GL,fragmentShader:P1,triangulation:G_,primitive:Rt.TRIANGLES,depth:{enable:!1}});case 8:return S=L.sent,L.abrupt("return",[S]);case 10:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:wa.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(lu),O1={raster:zS,rasterRgb:HL,raster3d:zS,rasterTerrainRgb:$L},WA=O1;function GA(e){var a=$A();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function $A(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var k1=function(e){(0,yr.Z)(r,e);var a=GA(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","RasterLayer"),o}return(0,ot.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new WA[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.layerSource.getParserType();switch(u){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),r}(Ym),XL=["rasterData"];function YL(e){var a=KL();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function KL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qL=function(e){(0,yr.Z)(r,e);var a=YL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new k1((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var G,he,ve=V;S[ve]((G=p[ve])===null||G===void 0?void 0:G.field,(he=p[ve])===null||he===void 0?void 0:he.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Sf.Z)(c,XL);return{data:p,options:{parser:(0,ne.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}}]),r}(em);function QL(e){var a=XA();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function XA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YA=function(e){(0,yr.Z)(r,e);var a=QL(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S;return er().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=new k1((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var G,he,ve=V;S[ve]((G=p[ve])===null||G===void 0?void 0:G.field,(he=p[ve])===null||he===void 0?void 0:he.values)}),L.next=7,this.addLayer(S);case 7:this.isLoaded=!0;case 8:case"end":return L.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(em),JL=["rasterData"];function eF(e){var a=tF();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function tF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rF={positions:[0,1],colors:["#000","#fff"]},nF=function(e){(0,yr.Z)(r,e);var a=eF(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V;return er().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),S=this.getLayerOptions(),O=S.rampColors,L=S.domain,this.colorTexture=this.parent.textureService.getColorTexture(O,L),V=new k1((0,ne.Z)((0,ne.Z)({},g),{},{colorTexture:this.colorTexture})).source(y.data,y.options),p&&Object.keys(p).forEach(function(ve){var Pe,Xe,gt=ve;V[gt]((Pe=p[gt])===null||Pe===void 0?void 0:Pe.field,(Xe=p[gt])===null||Xe===void 0?void 0:Xe.values)}),he.next=9,this.addLayer(V);case 9:this.isLoaded=!0;case 10:case"end":return he.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Sf.Z)(c,JL);return{data:p,options:{parser:(0,ne.Z)({type:"raster",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}},{key:"styleUpdate",value:function(){for(var u=this,c=arguments.length,p=new Array(c),g=0;g<c;g++)p[g]=arguments[g];var y=p,S=y.rampColors,O=S===void 0?rF:S,L=y.domain;this.colorTexture=this.parent.textureService.getColorTexture(O,L||Yl(O)),this.layers.forEach(function(V){return V.style({colorTexture:u.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(u){return u.destroy()})}}]),r}(em);function iF(e){var a=aF();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function aF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var D1=function(e){(0,yr.Z)(r,e);var a=iF(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=ZA(this.parent.type),S=this.getSourceOption(),S){V.next=8;break}return this.isLoaded=!0,this.emit("loaded"),V.abrupt("return");case 8:return O=new y((0,ne.Z)({},g)).source(S.data,S.options),Object.keys(p).forEach(function(G){var he,ve,Pe=G;O[Pe]((he=p[Pe])===null||he===void 0?void 0:he.field,(ve=p[Pe])===null||ve===void 0?void 0:ve.values)}),V.next=12,this.addLayer(O);case 12:if(!g.tileMask){V.next=15;break}return V.next=15,this.addTileMask();case 15:this.setLayerMinMaxZoom(O),this.isLoaded=!0,this.emit("loaded");case 18:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=p===void 0?"defaultLayer":p,y=c.featureId,S=y===void 0?"id":y,O=this.getFeatures(g);return{data:{type:"FeatureCollection",features:O},options:{parser:{type:"geojson",featureId:S},transforms:u.transforms}}}},{key:"setLayerMinMaxZoom",value:function(u){u.getModelType()==="text"&&u.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(u){var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getFeatureById",value:function(u){var c=this.getMainLayer();if(!c)return[];var p=c.getSource().data.dataArray.filter(function(g){return g._id===u});return p}}]),r}(em);function oF(e){var a=e.type;switch(a){case"PolygonLayer":return D1;case"LineLayer":return D1;case"PointLayer":return D1;case"TileDebugLayer":return CL;case"MaskLayer":return DL;case"RasterLayer":var r=e.getSource().parser.dataType;switch(r){case Bc.RGB:case Bc.CUSTOMRGB:return qL;case Bc.ARRAYBUFFER:case Bc.CUSTOMARRAYBUFFER:return nF;case Bc.TERRAINRGB:case Bc.CUSTOMTERRAINRGB:return YA;default:return PL}default:return D1}}var w4=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],KA=Ca.debounce,VS=function(){function e(a){var r=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"initedTileset",!1),(0,He.Z)(this,"mapchange",function(){var u;if(r.parent.isVisible()!==!1){var c=r.getCurrentView(),p=c.latLonBounds,g=c.zoom;if(r.mapService.version==="GAODE1.x"){var y=r.parent.getLayerConfig(),S=y.visible;g<2&&S?(r.parent.updateLayerConfig({visible:!1}),r.layerService.reRender()):g>=2&&!S&&(r.parent.updateLayerConfig({visible:!0}),r.layerService.reRender())}r.lastViewStates&&r.lastViewStates.zoom===g&&r.lastViewStates.latLonBounds.toString()===p.toString()||(r.lastViewStates={zoom:g,latLonBounds:p},(u=r.tilesetManager)===null||u===void 0||u.throttleUpdate(g,p))}}),(0,He.Z)(this,"viewchange",KA(this.mapchange,24)),this.parent=a;var o=this.parent.getContainer();this.rendererService=o.get(Ct.IRendererService),this.layerService=o.get(Ct.ILayerService),this.mapService=o.get(Ct.IMapService),this.pickingService=o.get(Ct.IPickingService),this.tileLayerService=new dL({rendererService:this.rendererService,layerService:this.layerService,parent:a}),this.tilePickService=new _L({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:a}),this.parent.setLayerPickService(this.tilePickService),this.proxy(a),this.initTileSetManager()}return(0,ot.Z)(e,[{key:"initTileSetManager",value:function(){var r,o=this.parent.getSource();if(this.tilesetManager=o.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()!==!1){var u=this.getCurrentView(),c=u.latLonBounds,p=u.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(p,c)}}},{key:"getCurrentView",value:function(){var r=this.mapService.getBounds(),o=[r[0][0],r[0][1],r[1][0],r[1][1]],u=this.mapService.getZoom();return{latLonBounds:o,zoom:u}}},{key:"bindTilesetEvent",value:function(){var r=this;this.tilesetManager.on("tile-loaded",function(o){}),this.tilesetManager.on("tile-unload",function(o){r.tileUnLoad(o)}),this.tilesetManager.on("tile-error",function(o,u){r.tileError(o)}),this.tilesetManager.on("tile-update",function(){r.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(r){return this.tileLayerService.getTile(r)}},{key:"tileLoaded",value:function(r){}},{key:"tileError",value:function(r){console.warn("error:",r)}},{key:"destroy",value:function(){var r;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(r=this.tilesetManager)===null||r===void 0||r.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var r;this.tilesetManager.clear();var o=this.getCurrentView(),u=o.latLonBounds,c=o.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(c,u)}},{key:"tileUnLoad",value:function(r){this.tileLayerService.removeTile(r.key)}},{key:"tileUpdate",value:function(){var a=(0,Sn.Z)(er().mark(function o(){var u=this,c,p;return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.tilesetManager){y.next=2;break}return y.abrupt("return");case 2:return c=this.parent.getMinZoom(),p=this.parent.getMaxZoom(),y.next=6,Promise.all(this.tilesetManager.tiles.filter(function(S){return S.isLoaded}).filter(function(S){return S.isVisibleChange}).filter(function(S){return S.data}).filter(function(S){return S.z>=c&&S.z<p}).map(function(){var S=(0,Sn.Z)(er().mark(function O(L){var V,G;return er().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(u.tileLayerService.hasTile(L.key)){ve.next=9;break}return V=oF(u.parent),G=new V(L,u.parent),ve.next=5,G.initTileLayer();case 5:u.tilePickService.setPickState(),G.getLayers().length!==0&&(u.tileLayerService.addTile(G),u.tileLayerService.updateTileVisible(L),u.layerService.reRender()),ve.next=12;break;case 9:u.tileLayerService.updateTileVisible(L),u.tilePickService.setPickState(),u.layerService.reRender();case 12:case"end":return ve.stop()}},O)}));return function(O){return S.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return y.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"setPickState",value:function(r){}},{key:"pickRender",value:function(r){this.tilePickService.pickRender(r)}},{key:"selectFeature",value:function(r){this.tilePickService.selectFeature(r)}},{key:"highlightPickedFeature",value:function(r){this.tilePickService.highlightPickedFeature(r)}},{key:"proxy",value:function(r){var o=this;w4.forEach(function(u){var c=r[u].bind(r);r[u]=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return c.apply(void 0,g),o.getLayers().map(function(S){S[u].apply(S,g)}),u==="style"&&o.getTiles().forEach(function(S){return S.styleUpdate.apply(S,g)}),r}})}}]),e}(),L1,qA,HS=(L1=(0,mt.b2)(),L1(qA=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"build",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u.prepareBuildModel(),p.next=3,u.buildModels();case 3:case"end":return p.stop()}},o)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"initLayerModel",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"prepareLayerModel",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"apply",value:function(r){var o=this;r.hooks.init.tapPromise("LayerModelPlugin",(0,Sn.Z)(er().mark(function u(){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!r.getSource().isTile){p.next=4;break}return r.prepareBuildModel(),r.tileLayer=new VS(r),p.abrupt("return");case 4:return r.log(kl.BuildModelStart,Ko.INIT),p.next=7,o.initLayerModel(r);case 7:r.log(kl.BuildModelEnd,Ko.INIT);case 8:case"end":return p.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var u=(0,Sn.Z)(er().mark(function c(p){return er().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(p){y.next=2;break}return y.abrupt("return",!1);case 2:if(!r.getSource().isTile){y.next=5;break}return r.tileLayer=new VS(r),y.abrupt("return",!1);case 5:return r.log(kl.BuildModelStart,Ko.UPDATE),y.next=8,o.prepareLayerModel(r);case 8:return r.log(kl.BuildModelEnd,Ko.UPDATE),y.abrupt("return",!0);case 10:case"end":return y.stop()}},c)}));return function(c){return u.apply(this,arguments)}}())}}]),e}())||qA),QA,JA,sF=(QA=(0,mt.b2)(),QA(JA=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerStylePlugin",function(){var o=r.getLayerConfig(),u=o.autoFit,c=o.fitBoundsOptions;u&&r.fitBounds(c),r.styleNeedUpdate=!1})}}]),e}())||JA),eM,tM,uF=["type"],rM={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},C4={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},bv={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},jS={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function lF(e){var a={u_DirectionalLights:new Array(3).fill((0,ne.Z)({},bv)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,ne.Z)({},jS)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[C4]),e.forEach(function(r){var o=r.type,u=o===void 0?"directional":o,c=(0,Sf.Z)(r,uF),p=rM[u].lights,g=rM[u].num,y=a[g];a[p][y]=(0,ne.Z)((0,ne.Z)({},a[p][y]),c),a[g]++}),a}var F1=(eM=(0,mt.b2)(),eM(tM=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LightingPlugin",function(){var o=r.getLayerConfig(),u=o.enableLighting;u&&r.models.forEach(function(c){return c.addUniforms((0,ne.Z)({},lF()))})})}}]),e}())||tM),nM,iM,cF=(nM=(0,mt.b2)(),nM(iM=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.postProcessingPassFactory,g=o.normalPassFactory;r.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var y=r.getLayerConfig(),S=y.enableMultiPassRenderer,O=y.passes,L=O===void 0?[]:O;u.enabled=!!S&&r.getLayerConfig().enableMultiPassRenderer!==!1,u.enabled&&(r.multiPassRenderer=rC(r,L,p,g),r.multiPassRenderer.setRenderFlag(!0))}),r.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(u.enabled){var y=c.getViewportSize(),S=y.width,O=y.height;r.multiPassRenderer.resize(S,O)}})}}]),e}())||iM),aM,oM,fF=Ca.isNumber,l0={NONE:0,ENCODE:1,HIGHLIGHT:2},hF=(aM=(0,mt.b2)(),aM(oM=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"pickOption2Array",value:function(){var r=[];return this.pickingUniformMap.forEach(function(o,u){fF(o)?r.push(o):r.push.apply(r,(0,Rn.Z)(o))}),r}},{key:"updatePickOption",value:function(r,o){var u=this;Object.keys(r).forEach(function(y){u.pickingUniformMap.set(y,r[y])});var c=o.getLayerConfig().pickingBuffer||0,p=Number(o.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",c),this.pickingUniformMap.set("u_shaderPick",p);var g=o.getPickingUniformBuffer();g.subData({offset:0,data:this.pickOption2Array()})}},{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.styleAttributeService,g;this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_EnableSelect",0],["u_activeMix",0]]),r.hooks.init.tapPromise("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;p.registerStyleAttribute({name:"pickingColor",type:wa.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:Wa.PICKING_COLOR,buffer:{data:[],type:Rt.FLOAT},size:3,update:function(L){var V=L.id;return S?bs(V):[0,0,0]}}})}),r.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;S&&r.isVisible()&&(u.updatePickOption({u_PickingStage:l0.ENCODE},r),r.models.forEach(function(O){return O.addUniforms({u_PickingStage:l0.ENCODE})}))}),r.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),S=y.enablePicking;S&&r.isVisible()&&(u.updatePickOption({u_PickingStage:l0.HIGHLIGHT},r),r.models.forEach(function(O){return O.addUniforms({u_PickingStage:l0.HIGHLIGHT})}))}),r.hooks.beforeHighlight.tap("PixelPickingPlugin",function(y){var S=r.getLayerConfig(),O=S.highlightColor,L=S.activeMix,V=L===void 0?0:L,G=typeof O=="string"?ho(O):O||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:Xl(new Uint8Array(y))});var he={u_PickingStage:l0.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:G.map(function(ve){return ve*255}),u_activeMix:V};u.updatePickOption(he,r),r.models.forEach(function(ve){return ve.addUniforms(he)})}),r.hooks.beforeSelect.tap("PixelPickingPlugin",function(y){var S=r.getLayerConfig(),O=S.selectColor,L=S.selectMix,V=L===void 0?0:L,G=typeof O=="string"?ho(O):O||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:Xl(new Uint8Array(y))});var he={u_PickingStage:l0.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:G.map(function(ve){return ve*255}),u_activeMix:V,u_CurrentSelectedId:y,u_SelectColor:G.map(function(ve){return ve*255}),u_EnableSelect:1};u.updatePickOption(he,r),r.models.forEach(function(ve){return ve.addUniforms(he)})})}}]),e}())||oM),pF=["mvt","geojsonvt","testTile"];function dF(e){var a=e.getSource();return pF.includes(a.parser.type)}function B1(e){return e.getContext?{width:e.width/DOM.DPR,height:e.height/DOM.DPR}:e.getBoundingClientRect()}var sM,uM,vF=(sM=(0,mt.b2)(),sM(uM=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){dF(r)||u.registerBuiltinAttributes(c,r)})}},{key:"registerBuiltinAttributes",value:function(r,o){if(o.type==="MaskLayer"){this.registerPositionAttribute(r);return}this.registerPositionAttribute(r),this.registerColorAttribute(r),this.registerVertexIdAttribute(r)}},{key:"registerPositionAttribute",value:function(r){r.registerStyleAttribute({name:"position",type:wa.Attribute,descriptor:{name:"a_Position",shaderLocation:Wa.POSITION,buffer:{data:[],type:Rt.FLOAT},size:3,update:function(u,c,p){return p.length===2?[p[0],p[1],0]:[p[0],p[1],p[2]]}}})}},{key:"registerColorAttribute",value:function(r){r.registerStyleAttribute({name:"color",type:wa.Attribute,descriptor:{name:"a_Color",shaderLocation:Wa.COLOR,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:4,update:function(u){var c=u.color;return!c||!c.length?[1,1,1,1]:c}}})}},{key:"registerVertexIdAttribute",value:function(r){r.registerStyleAttribute({name:"vertexId",type:wa.Attribute,descriptor:{name:"a_vertexId",shaderLocation:Wa.VERTEX_ID,buffer:{usage:Rt.DYNAMIC_DRAW,data:[],type:Rt.FLOAT},size:1,update:function(u,c){return[c]}}})}}]),e}())||uM),lM,WS,gF,c0,N1,cM,GS,tm,fM,mF,yF,_F,hM,pM=(lM=(0,mt.b2)(),WS=(0,mt.f3)(Ct.ICameraService),gF=(0,mt.f3)(Ct.ICoordinateSystemService),c0=(0,mt.f3)(Ct.IRendererService),N1=(0,mt.f3)(Ct.IMapService),cM=(0,mt.f3)(Ct.ILayerService),lM(GS=(tm=function(){function e(){(0,Ot.Z)(this,e),na(this,"cameraService",fM,this),na(this,"coordinateSystemService",mF,this),na(this,"rendererService",yF,this),na(this,"mapService",_F,this),na(this,"layerService",hM,this)}return(0,ot.Z)(e,[{key:"apply",value:function(r){var o=this,u=this.mapService.version,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[0,0],g;this.rendererService.uniformBuffers[0]||(g=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=g),r.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var y=r.getLayerConfig().tileOrigin;if(o.coordinateSystemService.refresh(y),u==="GAODE2.x"){o.setLayerCenter(r),c=o.mapService.map.customCoords.getMVPMatrix(),p=o.mapService.getCustomCoordCenter();var S=r.getLayerUniformBuffer();S.subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,Rn.Z)(c),(0,Rn.Z)(p))).buffer)})}var O=o.rendererService.getViewportSize(),L=O.width,V=O.height,G=o.generateUBO(c,p,L,V),he=G.data,ve=G.uniforms;o.layerService.alreadyInRendering&&g&&g.subData({offset:0,data:he}),r.models.forEach(function(Pe){Pe.addUniforms((0,ne.Z)((0,ne.Z)({},ve),{},{u_PickingBuffer:r.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(r.getShaderPickStat())}))})})}},{key:"setLayerCenter",value:function(r){r.coordCenter===void 0&&(r.coordCenter=r.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(r.coordCenter)}},{key:"generateUBO",value:function(r,o,u,c){var p,g=this.cameraService.getProjectionMatrix(),y=this.cameraService.getViewMatrix(),S=this.cameraService.getViewProjectionMatrix(),O=this.cameraService.getModelMatrix(),L=this.coordinateSystemService.getViewportCenterProjection(),V=this.coordinateSystemService.getPixelsPerDegree(),G=this.cameraService.getZoom(),he=this.coordinateSystemService.getPixelsPerDegree2(),ve=this.cameraService.getZoomScale(),Pe=this.coordinateSystemService.getPixelsPerMeter(),Xe=this.coordinateSystemService.getCoordinateSystem(),gt=this.cameraService.getCameraPosition(),_t=window.devicePixelRatio,zt=this.coordinateSystemService.getViewportCenter(),Xt=[u,c],nr=this.cameraService.getFocalDistance(),ar=[].concat((0,Rn.Z)(y),(0,Rn.Z)(g),(0,Rn.Z)(S),(0,Rn.Z)(O),(0,Rn.Z)(L),(0,Rn.Z)(V),[G],(0,Rn.Z)(he),[ve],(0,Rn.Z)(Pe),[Xe],(0,Rn.Z)(gt),[_t],(0,Rn.Z)(zt),Xt,[nr,0,0,0]);return{data:ar,uniforms:(p={},(0,He.Z)(p,Td.ProjectionMatrix,g),(0,He.Z)(p,Td.ViewMatrix,y),(0,He.Z)(p,Td.ViewProjectionMatrix,S),(0,He.Z)(p,Td.Zoom,G),(0,He.Z)(p,Td.ZoomScale,ve),(0,He.Z)(p,Td.FocalDistance,nr),(0,He.Z)(p,Td.CameraPosition,gt),(0,He.Z)(p,Pl.CoordinateSystem,Xe),(0,He.Z)(p,Pl.ViewportCenter,zt),(0,He.Z)(p,Pl.ViewportCenterProjection,L),(0,He.Z)(p,Pl.PixelsPerDegree,V),(0,He.Z)(p,Pl.PixelsPerDegree2,he),(0,He.Z)(p,Pl.PixelsPerMeter,Pe),(0,He.Z)(p,Pl.Mvp,r),(0,He.Z)(p,"u_sceneCenterMercator",o),(0,He.Z)(p,"u_ViewportSize",Xt),(0,He.Z)(p,"u_ModelMatrix",O),(0,He.Z)(p,"u_DevicePixelRatio",_t),p)}}}]),e}(),fM=Fa(tm.prototype,"cameraService",[WS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mF=Fa(tm.prototype,"coordinateSystemService",[gF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yF=Fa(tm.prototype,"rendererService",[c0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_F=Fa(tm.prototype,"mapService",[N1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hM=Fa(tm.prototype,"layerService",[cM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tm))||GS),$S,dM,xF=($S=(0,mt.b2)(),$S(dM=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("UpdateModelPlugin",function(){r.layerModel&&r.layerModel.needUpdate().then(function(o){o&&r.renderLayers()})}),r.hooks.afterRender.tap("UpdateModelPlugin",function(){r.layerModelNeedUpdate=!1})}}]),e}())||dM),Sv,z1,bF=(Sv=(0,mt.b2)(),Sv(z1=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){u.initStyleAttribute(r,{styleAttributeService:c})}),r.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){r.layerModelNeedUpdate||r.inited&&u.updateStyleAttribute(r,{styleAttributeService:c})})}},{key:"updateStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[],p=u.getLayerStyleAttribute("filter");if(p&&p.needRegenerateVertices){r.layerModelNeedUpdate=!0,c.forEach(function(g){return g.needRegenerateVertices=!1});return}c.filter(function(g){return g.needRegenerateVertices}).forEach(function(g){u.updateAttributeByFeatureRange(g.name,r.getEncodedData(),g.featureRange.startIndex,g.featureRange.endIndex,r),g.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[];c.filter(function(p){return p.needRegenerateVertices}).forEach(function(p){u.updateAttributeByFeatureRange(p.name,r.getEncodedData(),p.featureRange.startIndex,p.featureRange.endIndex),p.needRegenerateVertices=!1})}}]),e}())||z1);Xf.bind(Ct.ILayerPlugin).to(yk).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(vF).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(LS).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(mk).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(sF).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(pL).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(bF).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(xF).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(cF).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(pM).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(hL).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(F1).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(hF).inRequestScope(),Xf.bind(Ct.ILayerPlugin).to(HS).inRequestScope();function SF(e){var a=vM();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function vM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var T4=null;function EF(e){var a=A4();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function A4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var wF=function(e){(0,yr.Z)(r,e);var a=EF(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"zoomIn",function(){!o.disabled&&o.mapsService.getZoom()<o.mapsService.getMaxZoom()&&o.mapsService.zoomIn()}),(0,He.Z)((0,wr.Z)(o),"zoomOut",function(){!o.disabled&&o.mapsService.getZoom()>o.mapsService.getMinZoom()&&o.mapsService.zoomOut()}),(0,He.Z)((0,wr.Z)(o),"updateDisabled",function(){var g=o.mapsService;o.zoomInButton.removeAttribute("disabled"),o.zoomOutButton.removeAttribute("disabled"),(o.disabled||g.getZoom()<=g.getMinZoom())&&o.zoomOutButton.setAttribute("disabled","true"),o.controlOption.showZoom&&o.zoomNumDiv&&(o.zoomNumDiv.innerText=String(Math.floor(g.getZoom()))),(o.disabled||g.getZoom()>=g.getMaxZoom())&&o.zoomInButton.setAttribute("disabled","true")}),o}return(0,ot.Z)(r,[{key:"getDefault",value:function(u){return(0,ne.Z)((0,ne.Z)({},Ef((0,Ft.Z)(r.prototype),"getDefault",this).call(this,u)),{},{position:mo.BOTTOMRIGHT,name:"zoom",zoomInText:$w("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:$w("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}},{key:"setOptions",value:function(u){Ef((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var u=Zs("div","l7-control-zoom");return this.resetButtonGroup(u),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),u}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(u){$c(u),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",u,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",u)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",u,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(u,c,p,g,y){var S=Zs("button",p,g);return typeof u=="string"?S.innerHTML=u:S.append(u),S.title=c,y&&S.addEventListener("click",y),S}}]),r}(Md);function M4(e){var a=gM();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function gM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var R4=null;function I4(e){var a=U1();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function U1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ev=Ca.get,CF=null;function XS(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}XS(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 0;
      -ms-flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
          flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -ms-touch-action: none;
      touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var mM,YS,Z1,qf=(mM=ab(Ct.IGlobalConfigService),YS=function(){function e(a){(0,Ot.Z)(this,e),na(this,"configService",Z1,this),this.config=a}return(0,ot.Z)(e,[{key:"setContainer",value:function(r,o,u){r.bind(Ct.MapConfig).toConstantValue((0,ne.Z)((0,ne.Z)({},this.config),{},{id:o,canvas:u})),r.bind(Ct.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),Z1=Fa(YS.prototype,"configService",[mM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YS),TF=k(59858),yM=k(81618),KS=k.n(yM);function rm(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Fy(e,a){var r=Wf([],a,e);return Vp(r,r,1/r[3]),r}function P4(e,a){var r=e%a;return r<0?a+r:r}function O4(e,a,r){return r*a+(1-r)*e}function nm(e,a){if(!e)throw new Error(a||"viewport-mercator-project: assertion failed.")}var kd=Math.PI,_M=kd/4,wv=kd/180,qS=180/kd,By=512,QS=4003e4,AF=1.5;function xM(e){return Math.pow(2,e)}function MF(e){return Math.log2(e)}function V1(e,a){var r=(0,ji.Z)(e,2),o=r[0],u=r[1];nm(Number.isFinite(o)&&Number.isFinite(a)),nm(Number.isFinite(u)&&u>=-90&&u<=90,"invalid latitude"),a*=By;var c=o*wv,p=u*wv,g=a*(c+kd)/(2*kd),y=a*(kd-Math.log(Math.tan(_M+p*.5)))/(2*kd);return[g,y]}function JS(e,a){var r=(0,ji.Z)(e,2),o=r[0],u=r[1];a*=By;var c=o/a*(2*kd)-kd,p=2*(Math.atan(Math.exp(kd-u/a*(2*kd)))-_M);return[c*qS,p*qS]}function bM(e){var a=e.latitude;assert(Number.isFinite(a));var r=Math.cos(a*wv);return MF(QS*r)-9}function SM(e){var a=e.latitude,r=e.longitude,o=e.zoom,u=e.scale,c=e.highPrecision,p=c===void 0?!1:c;u=u!==void 0?u:xM(o),nm(Number.isFinite(a)&&Number.isFinite(r)&&Number.isFinite(u));var g={},y=By*u,S=Math.cos(a*wv),O=y/360,L=O/S,V=y/QS/S;if(g.pixelsPerMeter=[V,-V,V],g.metersPerPixel=[1/V,-1/V,1/V],g.pixelsPerDegree=[O,-L,V],g.degreesPerPixel=[1/O,-1/L,1/V],p){var G=wv*Math.tan(a*wv)/S,he=O*G/2,ve=y/QS*G,Pe=ve/L*V;g.pixelsPerDegree2=[0,-he,ve],g.pixelsPerMeter2=[Pe,0,Pe]}return g}function k4(e,a){var r=_slicedToArray(e,3),o=r[0],u=r[1],c=r[2],p=_slicedToArray(a,3),g=p[0],y=p[1],S=p[2],O=1,L=SM({longitude:o,latitude:u,scale:O,highPrecision:!0}),V=L.pixelsPerMeter,G=L.pixelsPerMeter2,he=V1(e,O);he[0]+=g*(V[0]+G[0]*y),he[1]+=y*(V[1]+G[1]*y);var ve=JS(he,O),Pe=(c||0)+(S||0);return Number.isFinite(c)||Number.isFinite(S)?[ve[0],ve[1],Pe]:ve}function eE(e){var a=e.height,r=e.pitch,o=e.bearing,u=e.altitude,c=e.center,p=c===void 0?null:c,g=e.flipY,y=g===void 0?!1:g,S=rm();return Pu(S,S,[0,0,-u]),dc(S,S,[1,1,1/a]),Np(S,S,-r*wv),kc(S,S,o*wv),y&&dc(S,S,[1,-1,1]),p&&Pu(S,S,_a.negate([],p)),S}function D4(e){var a=e.width,r=e.height,o=e.altitude,u=o===void 0?AF:o,c=e.pitch,p=c===void 0?0:c,g=e.nearZMultiplier,y=g===void 0?1:g,S=e.farZMultiplier,O=S===void 0?1:S,L=p*wv,V=Math.atan(.5/u),G=Math.sin(V)*u/Math.sin(Math.PI/2-L-V),he=Math.cos(Math.PI/2-L)*G+u;return{fov:2*Math.atan(r/2/u),aspect:a/r,focalDistance:u,near:y,far:he*O}}function RF(e){var a=e.width,r=e.height,o=e.pitch,u=e.altitude,c=e.nearZMultiplier,p=e.farZMultiplier,g=D4({width:a,height:r,altitude:u,pitch:o,nearZMultiplier:c,farZMultiplier:p}),y=g.fov,S=g.aspect,O=g.near,L=g.far,V=fr([],y,S,O,L);return V}function IF(e,a){var r=(0,ji.Z)(e,3),o=r[0],u=r[1],c=r[2],p=c===void 0?0:c;return nm(Number.isFinite(o)&&Number.isFinite(u)&&Number.isFinite(p)),Fy(a,[o,u,p,1])}function EM(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=(0,ji.Z)(e,3),u=o[0],c=o[1],p=o[2];if(nm(Number.isFinite(u)&&Number.isFinite(c),"invalid pixel coordinate"),Number.isFinite(p)){var g=Fy(a,[u,c,p,1]);return g}var y=Fy(a,[u,c,0,1]),S=Fy(a,[u,c,1,1]),O=y[2],L=S[2],V=O===L?0:((r||0)-O)/(L-O);return ei.t7([],y,S,V)}var wM=rm(),PF=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.width,o=a.height,u=a.viewMatrix,c=u===void 0?wM:u,p=a.projectionMatrix,g=p===void 0?wM:p;(0,Ot.Z)(this,e),this.width=r||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=c,this.projectionMatrix=g;var y=rm();vl(y,y,this.projectionMatrix),vl(y,y,this.viewMatrix),this.viewProjectionMatrix=y;var S=rm();dc(S,S,[this.width/2,-this.height/2,1]),Pu(S,S,[1,-1,0]),vl(S,S,this.viewProjectionMatrix);var O=Sh(rm(),S);if(!O)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=S,this.pixelUnprojectionMatrix=O,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,ot.Z)(e,[{key:"equals",value:function(r){return r instanceof e?r.width===this.width&&r.height===this.height&&qi(r.projectionMatrix,this.projectionMatrix)&&qi(r.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=this.projectPosition(r),g=IF(p,this.pixelProjectionMatrix),y=(0,ji.Z)(g,2),S=y[0],O=y[1],L=c?O:this.height-O;return r.length===2?[S,L]:[S,L,g[2]]}},{key:"unproject",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=o.targetZ,g=(0,ji.Z)(r,3),y=g[0],S=g[1],O=g[2],L=c?S:this.height-S,V=p&&p*this.pixelsPerMeter,G=EM([y,L,O],this.pixelUnprojectionMatrix,V),he=this.unprojectPosition(G),ve=(0,ji.Z)(he,3),Pe=ve[0],Xe=ve[1],gt=ve[2];return Number.isFinite(O)?[Pe,Xe,gt]:Number.isFinite(p)?[Pe,Xe,p]:[Pe,Xe]}},{key:"projectPosition",value:function(r){var o=this.projectFlat(r),u=(0,ji.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)*this.pixelsPerMeter;return[c,p,g]}},{key:"unprojectPosition",value:function(r){var o=this.unprojectFlat(r),u=(0,ji.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)/this.pixelsPerMeter;return[c,p,g]}},{key:"projectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}},{key:"unprojectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}}]),e}();function CM(e){var a=e.width,r=e.height,o=e.bounds,u=e.minExtent,c=u===void 0?0:u,p=e.maxZoom,g=p===void 0?24:p,y=e.padding,S=y===void 0?0:y,O=e.offset,L=O===void 0?[0,0]:O,V=(0,ji.Z)(o,2),G=(0,ji.Z)(V[0],2),he=G[0],ve=G[1],Pe=(0,ji.Z)(V[1],2),Xe=Pe[0],gt=Pe[1];if(Number.isFinite(S)){var _t=S;S={top:_t,bottom:_t,left:_t,right:_t}}else nm(Number.isFinite(S.top)&&Number.isFinite(S.bottom)&&Number.isFinite(S.left)&&Number.isFinite(S.right));var zt=new tE({width:a,height:r,longitude:0,latitude:0,zoom:0}),Xt=zt.project([he,gt]),nr=zt.project([Xe,ve]),ar=[Math.max(Math.abs(nr[0]-Xt[0]),c),Math.max(Math.abs(nr[1]-Xt[1]),c)],Tr=[a-S.left-S.right-Math.abs(L[0])*2,r-S.top-S.bottom-Math.abs(L[1])*2];nm(Tr[0]>0&&Tr[1]>0);var Zr=Tr[0]/ar[0],rn=Tr[1]/ar[1],ln=(S.right-S.left)/2/Zr,Gn=(S.bottom-S.top)/2/rn,fi=[(nr[0]+Xt[0])/2+ln,(nr[1]+Xt[1])/2+Gn],Fi=zt.unproject(fi),uo=zt.zoom+Math.log2(Math.abs(Math.min(Zr,rn)));return{longitude:Fi[0],latitude:Fi[1],zoom:Math.min(uo,g)}}var tE=function(e){(0,yr.Z)(a,e);function a(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.width,c=o.height,p=o.latitude,g=p===void 0?0:p,y=o.longitude,S=y===void 0?0:y,O=o.zoom,L=O===void 0?0:O,V=o.pitch,G=V===void 0?0:V,he=o.bearing,ve=he===void 0?0:he,Pe=o.altitude,Xe=Pe===void 0?1.5:Pe,gt=o.nearZMultiplier,_t=o.farZMultiplier;(0,Ot.Z)(this,a),u=u||1,c=c||1;var zt=xM(L);Xe=Math.max(.75,Xe);var Xt=V1([S,g],zt);Xt[2]=0;var nr=RF({width:u,height:c,pitch:G,bearing:ve,altitude:Xe,nearZMultiplier:gt||1/c,farZMultiplier:_t||1.01}),ar=eE({height:c,center:Xt,pitch:G,bearing:ve,altitude:Xe,flipY:!0});return r=(0,kr.Z)(this,(0,Ft.Z)(a).call(this,{width:u,height:c,viewMatrix:ar,projectionMatrix:nr})),r.latitude=g,r.longitude=S,r.zoom=L,r.pitch=G,r.bearing=ve,r.altitude=Xe,r.scale=zt,r.center=Xt,r.pixelsPerMeter=SM((0,wr.Z)((0,wr.Z)(r))).pixelsPerMeter[2],Object.freeze((0,wr.Z)((0,wr.Z)(r))),r}return(0,ot.Z)(a,[{key:"projectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return V1(o,u)}},{key:"unprojectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return JS(o,u)}},{key:"getMapCenterByLngLatPosition",value:function(o){var u=o.lngLat,c=o.pos,p=EM(c,this.pixelUnprojectionMatrix),g=V1(u,this.scale),y=ei.IH([],g,ei.tk([],p)),S=ei.IH([],this.center,y);return JS(S,this.scale)}},{key:"getLocationAtPoint",value:function(o){var u=o.lngLat,c=o.pos;return this.getMapCenterByLngLatPosition({lngLat:u,pos:c})}},{key:"fitBounds",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.width,p=this.height,g=CM(Object.assign({width:c,height:p,bounds:o},u)),y=g.longitude,S=g.latitude,O=g.zoom;return new a({width:c,height:p,longitude:y,latitude:S,zoom:O})}}]),a}(PF),TM=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth,S=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new tE((0,ne.Z)((0,ne.Z)({},S),{},{width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),AM=function(){function e(a){(0,Ot.Z)(this,e),(0,He.Z)(this,"size",1e4),this.size=a||1e4}return(0,ot.Z)(e,[{key:"setSize",value:function(r){this.size=r}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(r){return(180+r)/360*this.size}},{key:"mercatorYfromLat",value:function(r){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(r){return r/this.size*360-180}},{key:"latFromMercatorY",value:function(r){var o=180-(1-r/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}},{key:"project",value:function(r){var o=this.mercatorXfromLng(r[0]),u=this.mercatorYfromLat(r[1]);return[o,u]}},{key:"unproject",value:function(r){var o=this.lngFromMercatorX(r[0]),u=this.latFromMercatorY(r[1]);return[o,u]}}]),e}();function MM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return(0,ne.Z)((0,ne.Z)({},a),e)}var OF={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},kF=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],RM,IM,PM,DF,Dh,sg,f0,rE,nE,iE,H1;function LF(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}LF(`.amap-logo{
 display: none !important;
}
.amap-copyright {
  display: none !important;
}
`);var FF={contextmenu:"rightclick"},BF={contextmenu:"rightclick",camerachange:"viewchange"},OM={"GAODE1.x":FF,"GAODE2.x":BF},NF=0;window.forceWebGL=!0;var kM="15cd8a57710d40c9b7c0e3cc120f1200",DM="1.4.15",Ny="amap-script",h0=!1,ug=[],LM=12,FM=(RM=(0,mt.b2)(),IM=(0,mt.f3)(Ct.IGlobalConfigService),PM=(0,mt.f3)(Ct.MapConfig),DF=(0,mt.f3)(Ct.ICoordinateSystemService),Dh=(0,mt.f3)(Ct.IEventEmitter),RM(sg=(f0=function(){function e(){var a=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"version",Mc["GAODE1.x"]),(0,He.Z)(this,"simpleMapCoord",new AM),(0,He.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),na(this,"configService",rE,this),na(this,"config",nE,this),na(this,"coordinateSystemService",iE,this),na(this,"eventEmitter",H1,this),(0,He.Z)(this,"handleCameraChanged",function(r){var o=r.camera,u=o.fov,c=o.near,p=o.far,g=o.height,y=o.pitch,S=o.rotation,O=o.aspect,L=o.position,V=a.getCenter(),G=V.lng,he=V.lat;if(a.emit("mapchange"),a.cameraChangedCallback){a.viewport.syncWithMapCamera({aspect:O,bearing:360-S,far:p,fov:u,cameraHeight:g,near:c,pitch:y,zoom:a.map.getZoom()-1,center:[G,he],offsetOrigin:[L.x,L.y]});var ve=a.config.offsetZoom,Pe=ve===void 0?LM:ve;a.viewport.getZoom()>Pe?a.coordinateSystemService.setCoordinateSystem(Lc.P20_OFFSET):a.coordinateSystemService.setCoordinateSystem(Lc.P20),a.cameraChangedCallback(a.viewport)}})}return(0,ot.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getContainer();if(r!==null){var o=r.getElementsByClassName("amap-maps")[0];this.markerContainer=Zs("div","l7-marker-container",o)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(r,o){jm.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(OM[this.version][r]||r,o)}},{key:"off",value:function(r,o){jm.indexOf(r)!==-1?this.eventEmitter.off(r,o):this.map.off(OM[this.version][r]||r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var r;return(r=this.map.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var r=this.map.getSize();return[r.getWidth(),r.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(r){return this.map.setZoom(r+1)}},{key:"getCenter",value:function(r){if(r!=null&&r.padding){var o=this.getCenter(),u=MM(r.padding),c=this.lngLatToPixel([o.lng,o.lat]),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x-p[0],c.y-p[1]]);return g}var y=this.map.getCenter();return{lng:y.getLng(),lat:y.getLat()}}},{key:"setCenter",value:function(r,o){if(o!=null&&o.padding){var u=MM(o.padding),c=this.lngLatToPixel(r),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x+p[0],c.y+p[1]]);this.map.setCenter([g.lng,g.lat])}else this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var r=this.map.getBounds().toBounds(),o=r.getNorthEast(),u=r.getSouthWest(),c=this.getCenter(),p=c.lng>o.getLng()||c.lng<u.getLng()?180-o.getLng():o.getLng(),g=c.lng<u.getLng()?u.getLng()-180:u.getLng();return[[g,u.getLat()],[p,o.getLat()]]}},{key:"getMinZoom",value:function(){var r=this.map.get("zooms");return r[0]-1}},{key:"getMaxZoom",value:function(){var r=this.map.get("zooms");return r[1]-1}},{key:"setRotation",value:function(r){return this.map.setRotation(r)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(r,o)}},{key:"fitBounds",value:function(r){this.map.setBounds(new AMap.Bounds([r[0][0],r[0][1],r[1][0],r[1][1]]))}},{key:"setZoomAndCenter",value:function(r,o){this.map.setZoomAndCenter(r+1,o)}},{key:"setMapStyle",value:function(r){this.map.setMapStyle(this.getMapStyleValue(r))}},{key:"setMapStatus",value:function(r){this.map.setStatus(r)}},{key:"getMapStyleConfig",value:function(){return OF}},{key:"getMapStyleValue",value:function(r){return this.getMapStyleConfig()[r]||r}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(r){var o=this.map.pixelToLngLat(new AMap.Pixel(r[0],r[1]));return{lng:o.getLng(),lat:o.getLat()}}},{key:"lngLatToPixel",value:function(r){var o=this.map.lnglatToPixel(new AMap.LngLat(r[0],r[1]));return{x:o.getX(),y:o.getY()}}},{key:"containerToLngLat",value:function(r){var o=new AMap.Pixel(r[0],r[1]),u=this.map.containerToLngLat(o);return{lng:u==null?void 0:u.getLng(),lat:u==null?void 0:u.getLat()}}},{key:"lngLatToContainer",value:function(r){var o=new AMap.LngLat(r[0],r[1]),u=this.map.lngLatToContainer(o);return{x:u.getX(),y:u.getY()}}},{key:"lngLatToCoord",value:function(r){var o=this.map.lngLatToGeodeticCoord(r),u=o.x,c=o.y;return[u,-c]}},{key:"lngLatToMercator",value:function(r,o){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(r,o,u){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],p=this.viewport.projectFlat(r),g=Js();return Pu(g,g,_a.fromValues(p[0],p[1],o)),dc(g,g,_a.fromValues(c[0],c[1],c[2])),Np(g,g,u[0]),Ya(g,g,u[1]),kc(g,g,u[2]),g}},{key:"init",value:function(){var a=(0,Sn.Z)(er().mark(function o(){var u=this,c,p,g,y,S,O,L,V,G,he,ve,Pe,Xe,gt;return er().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return c=this.config,p=c.id,g=c.style,y=g===void 0?"light":g,S=c.minZoom,O=S===void 0?0:S,L=c.maxZoom,V=L===void 0?18:L,G=c.token,he=G===void 0?kM:G,ve=c.mapInstance,Pe=c.plugin,Xe=Pe===void 0?[]:Pe,gt=(0,Sf.Z)(c,kF),zt.next=3,new Promise(function(Xt){var nr=function(){if(ve)u.map=ve,u.$mapContainer=u.map.getContainer(),setTimeout(function(){u.map.on("camerachange",u.handleCameraChanged),Xt()},30);else{u.$mapContainer=u.creatMapContainer(p);var Tr=(0,ne.Z)({mapStyle:u.getMapStyleValue(y),zooms:[O,V],viewMode:"3D"},gt);Tr.zoom&&(Tr.zoom+=1);var Zr=new AMap.Map(u.$mapContainer,Tr);Zr.on("camerachange",u.handleCameraChanged),Zr.on("camerachange",function(){setTimeout(function(){return u.handleAfterMapChange()})}),u.map=Zr,setTimeout(function(){Xt()},10)}};!h0&&!ve?(he===kM&&console.warn("%c".concat(u.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),h0=!0,Xe.push("Map3D"),KS().load({key:he,version:DM,plugins:Xe}).then(function(){nr(),ug.length&&(ug.forEach(function(ar){return ar()}),ug=[])}).catch(function(ar){throw new Error(ar)})):h0&&window.AMap||ve?nr():ug.push(nr)});case 3:this.viewport=new TM;case 4:case"end":return zt.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"meterToCoord",value:function(r,o){var u=AMap.GeometryUtil.distance(un(AMap.LngLat,(0,Rn.Z)(r)),un(AMap.LngLat,(0,Rn.Z)(o))),c=this.lngLatToCoord(r),p=(0,ji.Z)(c,2),g=p[0],y=p[1],S=this.lngLatToCoord(o),O=(0,ji.Z)(S,2),L=O[0],V=O[1],G=Math.sqrt(Math.pow(g-L,2)+Math.pow(y-V,2));return G/u}},{key:"updateView",value:function(r){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(r){var o,u=(o=this.getContainer())===null||o===void 0?void 0:o.getElementsByClassName("amap-layer")[0],c=r==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return c}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"destroy",value:function(){var r;(r=this.$mapContainer)===null||r===void 0||(r=r.parentNode)===null||r===void 0||r.removeChild(this.$mapContainer),delete window.initAMap;var o=document.getElementById(Ny);o&&document.head.removeChild(o),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(r){var o=r;typeof r=="string"&&(o=document.getElementById(r));var u=document.createElement("div");return u.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,u.id="l7_amap_div"+NF++,o.appendChild(u),u}}]),e}(),rE=Fa(f0.prototype,"configService",[IM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nE=Fa(f0.prototype,"config",[PM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iE=Fa(f0.prototype,"coordinateSystemService",[DF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H1=Fa(f0.prototype,"eventEmitter",[Dh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f0))||sg);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var Xp=function(e){return e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed",e}(Xp||{}),Tf={key:"",AMap:{version:"2.0",plugins:[]}},Dd={AMap:Xp.notload},BM=[],NM=function(a){if(typeof a=="function"){if(Dd.AMap===Xp.loaded){a(window.AMap);return}BM.push(a)}},j1=function(){var e=(0,Sn.Z)(er().mark(function a(r){return er().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c,p){if(Dd.AMap===Xp.failed)p("");else if(Dd.AMap===Xp.notload){var g=r.key,y=r.version,S=r.plugins;if(!g){p("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&p("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),Tf.key=g,Tf.AMap.version=y||Tf.AMap.version,Tf.AMap.plugins=S||Tf.AMap.plugins,Dd.AMap=Xp.loading;var O=document.body||document.head;window._onAPILoaded=function(he){he?(Dd.AMap=Xp.failed,p(he)):(Dd.AMap=Xp.loaded,c(null))};var L=document.createElement("script");L.type="text/javascript",L.async=!1,L.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+Tf.AMap.version+"&key="+g+"&plugin="+Tf.AMap.plugins.join(","),L.onerror=function(he){Dd.AMap=Xp.failed,p(he)},O.appendChild(L)}else if(Dd.AMap===Xp.loaded){if(r.key&&r.key!==Tf.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Tf.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var V=[];r.plugins&&r.plugins.forEach(function(he){Tf.AMap.plugins.indexOf(he)===-1&&V.push(he)}),V.length&&window.AMap.plugin(V,function(){c(window.AMap)})}else{if(r.key&&r.key!==Tf.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Tf.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var G=[];r.plugins&&r.plugins.forEach(function(he){Tf.AMap.plugins.indexOf(he)===-1&&G.push(he)}),NM(function(){G.length&&window.AMap.plugin(G,function(){c(window.AMap)})})}}));case 1:case"end":return u.stop()}},a)}));return function(r){return e.apply(this,arguments)}}();function W1(){delete window.AMap,Tf={key:"",AMap:{version:"1.4.15",plugins:[]}},Dd={AMap:Xp.notload}}var zF={load:j1,reset:W1},zM=Math.PI/180,UF=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"projectionMatrix",Js()),(0,He.Z)(this,"viewMatrix",Js()),(0,He.Z)(this,"viewProjectionMatrix",Js()),(0,He.Z)(this,"ViewProjectionMatrixUncentered",Js()),(0,He.Z)(this,"viewUncenteredMatrix",Js())}return(0,ot.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.pitch,p=c===void 0?0:c,g=r.bearing,y=g===void 0?0:g,S=r.center,O=S===void 0?[0,0]:S,L=r.offsetOrigin,V=L===void 0?[0,0]:L,G=r.cameraHeight,he=G===void 0?1:G,ve=r.aspect,Pe=ve===void 0?1:ve,Xe=r.near,gt=Xe===void 0?.1:Xe,_t=r.far,zt=_t===void 0?1e3:_t,Xt=r.fov,nr=Xt===void 0?0:Xt;this.zoom=u,this.center=O;var ar=p*zM,Tr=(360-y)*zM;fr(this.projectionMatrix,nr,Pe,gt,zt);var Zr=_a.fromValues(he*Math.sin(ar)*Math.sin(Tr),-he*Math.sin(ar)*Math.cos(Tr),he*Math.cos(ar)),rn=_a.fromValues(-Math.cos(ar)*Math.sin(Tr),Math.cos(ar)*Math.cos(Tr),Math.sin(ar));wn(this.viewMatrix,Zr,_a.fromValues(0,0,0),rn),this.viewUncenteredMatrix=Jh(this.viewMatrix),Pu(this.viewMatrix,this.viewMatrix,_a.fromValues(-V[0],V[1],0)),vl(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),vl(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var r=(0,ji.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var S=.5/Math.PI,O=.5,L=-.5/Math.PI;return p=.5,g=c*(S*g+O)-215440491,y=-(c*(L*y+p)-106744817),[g,y]}}]),e}(),ZF=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],UM,ZM;function VF(e){var a=HF();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function HF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}window.forceWebGL=!0;var VM="15cd8a57710d40c9b7c0e3cc120f1200",L4="1.4.15",Qf=!1,im=[],aE=12,oE=(UM=(0,mt.b2)(),UM(ZM=function(e){(0,yr.Z)(r,e);var a=VF(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"version","GAODE1.x"),(0,He.Z)((0,wr.Z)(o),"handleCameraChanged",function(g){var y=g.camera,S=y.fov,O=y.near,L=y.far,V=y.height,G=y.pitch,he=y.rotation,ve=y.aspect,Pe=y.position,Xe=o.getCenter(),gt=Xe.lng,_t=Xe.lat;if(o.emit("mapchange"),o.cameraChangedCallback){o.viewport.syncWithMapCamera({aspect:ve,bearing:360-he,far:L,fov:S,cameraHeight:V,near:O,pitch:G,zoom:o.map.getZoom()-1,center:[gt,_t],offsetOrigin:[Pe.x,Pe.y]});var zt=o.config.offsetZoom,Xt=zt===void 0?aE:zt;o.viewport.getZoom()>Xt?o.coordinateSystemService.setCoordinateSystem(Lc.P20_OFFSET):o.coordinateSystemService.setCoordinateSystem(Lc.P20),o.cameraChangedCallback(o.viewport)}}),o}return(0,ot.Z)(r,[{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.viewport.projectFlat(u),S=Js();return Pu(S,S,_a.fromValues(y[0],y[1],c)),dc(S,S,_a.fromValues(g[0],g[1],g[2])),Np(S,S,p[0]),Ya(S,S,p[1]),kc(S,S,p[2]),S}},{key:"init",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this,g,y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t,zt;return er().wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return g=this.config,y=g.id,S=g.style,O=S===void 0?"light":S,L=g.minZoom,V=L===void 0?0:L,G=g.maxZoom,he=G===void 0?18:G,ve=g.token,Pe=ve===void 0?VM:ve,Xe=g.mapInstance,gt=g.plugin,_t=gt===void 0?[]:gt,zt=(0,Sf.Z)(g,ZF),nr.next=3,new Promise(function(ar){var Tr=function(){if(Xe)p.map=Xe,p.$mapContainer=p.map.getContainer(),setTimeout(function(){p.map.on("camerachange",p.handleCameraChanged),ar()},30);else{p.$mapContainer=p.creatMapContainer(y);var rn=(0,ne.Z)({mapStyle:p.getMapStyleValue(O),zooms:[V,he],viewMode:"3D"},zt);rn.zoom&&(rn.zoom+=1);var ln=new AMap.Map(p.$mapContainer,rn);ln.on("camerachange",p.handleCameraChanged),ln.on("camerachange",function(){setTimeout(function(){return p.handleAfterMapChange()})}),p.map=ln,setTimeout(function(){ar()},10)}};!Qf&&!Xe?(Pe===VM&&console.warn(p.configService.getSceneWarninfo("MapToken")),Qf=!0,_t.push("Map3D"),zF.load({key:Pe,version:L4,plugins:_t}).then(function(Zr){Tr(),im.length&&(im.forEach(function(rn){return rn()}),im=[])}).catch(function(Zr){throw new Error(Zr)})):Qf&&window.AMap||Xe?Tr():im.push(Tr)});case 3:this.viewport=new UF;case 4:case"end":return nr.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"meterToCoord",value:function(u,c){var p=AMap.GeometryUtil.distance(un(AMap.LngLat,(0,Rn.Z)(u)),un(AMap.LngLat,(0,Rn.Z)(c))),g=this.lngLatToCoord(u),y=(0,ji.Z)(g,2),S=y[0],O=y[1],L=this.lngLatToCoord(c),V=(0,ji.Z)(L,2),G=V[0],he=V[1],ve=Math.sqrt(Math.pow(S-G,2)+Math.pow(O-he,2));return ve/p}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(u){var c,p=(c=this.getContainer())===null||c===void 0?void 0:c.getElementsByClassName("amap-layer")[0],g=u==="jpg"?p==null?void 0:p.toDataURL("image/jpeg"):p==null?void 0:p.toDataURL("image/png");return g}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}}]),r}(FM))||ZM);function jF(e){var a=WF();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function WF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var GF=function(e){(0,yr.Z)(r,e);var a=jF(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getServiceConstructor",value:function(){return oE}}]),r}(qf),$F=function(){function e(){(0,Ot.Z)(this,e),(0,He.Z)(this,"projectionMatrix",Js()),(0,He.Z)(this,"viewMatrix",Js()),(0,He.Z)(this,"viewProjectionMatrix",Js()),(0,He.Z)(this,"ViewProjectionMatrixUncentered",Js()),(0,He.Z)(this,"viewUncenteredMatrix",Js())}return(0,ot.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.center,p=c===void 0?[0,0]:c,g=r.offsetOrigin,y=g===void 0?[0,0]:g,S=r.cameraPosition,O=S===void 0?[0,0,0]:S,L=r.up,V=L===void 0?[0,1,0]:L,G=r.lookAt,he=G===void 0?[0,0,0]:G,ve=r.aspect,Pe=ve===void 0?1:ve,Xe=r.near,gt=Xe===void 0?.1:Xe,_t=r.far,zt=_t===void 0?1e3:_t,Xt=r.fov,nr=Xt===void 0?45:Xt;this.zoom=u,this.center=p,fr(this.projectionMatrix,nr/180*Math.PI,Pe,gt,zt);var ar=_a.fromValues.apply(_a,(0,Rn.Z)(O)),Tr=_a.fromValues.apply(_a,(0,Rn.Z)(he)),Zr=_a.fromValues.apply(_a,(0,Rn.Z)(V));wn(this.viewMatrix,ar,Tr,Zr),this.viewUncenteredMatrix=Jh(this.viewMatrix),Pu(this.viewMatrix,this.viewMatrix,_a.fromValues(-y[0],y[1],0)),vl(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),vl(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var r=(0,ji.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var S=.5/Math.PI,O=.5,L=-.5/Math.PI;return p=.5,g=c*(S*g+O)-215440491,y=-(c*(L*y+p)-106744817),[g,y]}}]),e}(),HM=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],jM,WM;function XF(e){var a=YF();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function YF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function KF(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}KF(`.amap-logo{
 display: none !important;
}
.amap-copyright {
  display: none !important;
}
`);var GM=[108.92361,34.54083];window.forceWebGL=!0;var $M="f59bcf249433f8b05caaee19f349b3d7",XM="2.0",o8=!1,YM=null,qF=(jM=(0,mt.b2)(),jM(WM=function(e){(0,yr.Z)(r,e);var a=XF(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"version","GAODE2.x"),(0,He.Z)((0,wr.Z)(o),"handleViewChanged",function(g){var y=o.map.customCoords.getCameraParams(),S=y.fov,O=y.near,L=y.far,V=y.aspect,G=y.position,he=y.lookAt,ve=y.up;o.emit("mapchange");var Pe=o.map.customCoords.getCenter();o.cameraChangedCallback&&(o.viewport.syncWithMapCamera({aspect:V,far:L,fov:S,cameraPosition:G,lookAt:he,up:ve,near:O,zoom:o.map.getZoom()-1,center:Pe,offsetOrigin:[G[0],G[1]]}),o.coordinateSystemService.setCoordinateSystem(Lc.P20_2),o.cameraChangedCallback(o.viewport))}),o}return(0,ot.Z)(r,[{key:"setCustomCoordCenter",value:function(u){this.sceneCenter=u,this.sceneCenterMercator=zl.apply(void 0,(0,Rn.Z)(u))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMercator}},{key:"lngLatToCoordByLayer",value:function(u,c){var p=c||this.sceneCenterMercator,g=this._sub(zl(u[0],u[1]),p);return u[2]&&g.push(u[2]),g}},{key:"coordToAMap2RelativeCoordinates",value:function(u,c){var p=this,g=zl(c[0],c[1]);return typeof u[0]=="number"?this.lngLatToCoordByLayer(u,g):u.map(function(y){return Array.isArray(y)&&typeof y[0]=="number"?p.lngLatToCoordByLayer(y,g):y.map(function(S){return p.lngLatToCoordByLayer(S,g)})})}},{key:"setCoordCenter",value:function(u){this.map.customCoords.setCenter(u||GM),this.setCustomCoordCenter(u||GM)}},{key:"lngLatToCoord",value:function(u){return this.sceneCenter||(this.map.customCoords.setCenter(u),this.setCustomCoordCenter(u)),this._sub(zl(u[0],u[1]),this.sceneCenterMercator)}},{key:"lngLatToCoords",value:function(u){var c=this;return u.map(function(p){return typeof p[0]=="number"?c.lngLatToCoord(p):p.map(function(g){return c.lngLatToCoord(g)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var u=this.map.getContainer();if(u!==null){var c=u.getElementsByClassName("amap-maps")[0];c.style.zIndex="auto",this.markerContainer=Zs("div","l7-marker-container2",c)}}}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var u=this.map.getBounds(),c=u.getNorthEast(),p=u.getSouthWest(),g=this.getCenter(),y=g.lng>c.getLng()||g.lng<p.getLng()?180-c.getLng():c.getLng(),S=g.lng<p.getLng()?p.getLng()-180:p.getLng();return[[S,p.getLat()],[y,c.getLat()]]}},{key:"getMinZoom",value:function(){var u=this.map.getZooms();return u[0]-1}},{key:"getMaxZoom",value:function(){var u=this.map.getZooms();return u[1]-1}},{key:"lngLatToContainer",value:function(u){var c=this.map.lngLatToContainer(u);return{x:c.getX(),y:c.getY()}}},{key:"lngLatToPixel",value:function(u){var c=this.map.lngLatToPixel(new AMap.LngLat(u[0],u[1]));return{x:c.getX(),y:c.getY()}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.map.customCoords.lngLatToCoord(u),S=Js();return Pu(S,S,_a.fromValues(y[0],y[1],c)),dc(S,S,_a.fromValues(g[0],g[1],g[2])),Np(S,S,p[0]),Ya(S,S,p[1]),kc(S,S,p[2]),S}},{key:"init",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p,g,y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t,zt,Xt,nr,ar,Tr,Zr,rn,ln;return er().wrap(function(fi){for(;;)switch(fi.prev=fi.next){case 0:if(p=this.config,g=p.id,y=p.style,S=y===void 0?"light":y,O=p.minZoom,L=O===void 0?0:O,V=p.maxZoom,G=V===void 0?18:V,he=p.token,ve=he===void 0?$M:he,Pe=p.mapInstance,Xe=p.plugin,gt=Xe===void 0?[]:Xe,_t=p.version,zt=_t===void 0?XM:_t,Xt=(0,Sf.Z)(p,HM),this.viewport=new $F,window.AMap||Pe){fi.next=6;break}return gt.push("Map3D"),fi.next=6,KS().load({key:ve,version:XM,plugins:gt});case 6:Pe?(this.map=Pe,this.$mapContainer=this.map.getContainer(),ar=this.map.getCenter(),(nr=this.map.customCoords)===null||nr===void 0||nr.setCenter([ar.lng,ar.lat]),this.setCustomCoordCenter([ar.lng,ar.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(g),Zr=(0,ne.Z)({mapStyle:this.getMapStyleValue(S),zooms:[L,G],viewMode:"3D"},Xt),Zr.zoom&&(Zr.zoom+=1),ve===$M&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;")),rn=new AMap.Map(this.$mapContainer,Zr),this.map=rn,ln=rn.getCenter(),(Tr=this.map.customCoords)===null||Tr===void 0||Tr.setCenter([ln.lng,ln.lat]),this.setCustomCoordCenter([ln.lng,ln.lat]),rn.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return fi.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}},{key:"initViewPort",value:function(){var u,c=((u=this.map.customCoords)===null||u===void 0?void 0:u.getCameraParams())||{},p=c.fov,g=c.near,y=c.far,S=c.aspect,O=c.position,L=c.lookAt,V=c.up;this.emit("mapchange");var G=this.map.customCoords.getCenter(),he=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:S,far:y,fov:p,cameraPosition:O,lookAt:L,near:g,up:V,zoom:he-1,center:G,offsetOrigin:[O[0],O[1]]}),this.coordinateSystemService.setCoordinateSystem(Lc.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(u,c){var p=[0,0];return p[0]=u[0]-c[0],p[1]=u[1]-c[1],p}}]),r}(FM))||WM);function QF(e){var a=JF();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function JF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var KM=function(e){(0,yr.Z)(r,e);var a=QF(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getServiceConstructor",value:function(){return qF}}]),r}(qf),sE=k(99874),zy=k.n(sE);function G1(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=e5(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function e5(e,a){if(e){if(typeof e=="string")return qM(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qM(e,a)}}function qM(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var $1;function uE(e,a,r){var o=r-a,u=((e-a)%o+o)%o+a;return u===a?r:u}function Cv(e,a,r){return Math.min(r,Math.max(a,e))}function cp(e,a,r){return e*(1-r)+a*r}function lE(e,a,r,o){var u=new(zy())(e,a,r,o);return function(c){return u.solve(c)}}var cE=lE(.25,.1,.25,1);function QM(){return $1==null&&($1=window.matchMedia("(prefers-reduced-motion: reduce)")),$1.matches}function t5(e,a){var r={},o=G1(a),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;c in e&&(r[c]=e[c])}}catch(p){o.e(p)}finally{o.f()}return r}var Tv=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),r5=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,JM=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function eR(e){var a=r5(e);return{cancel:function(){return JM(a)}}}function Ld(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];for(var u=0,c=r;u<c.length;u++){var p=c[u];for(var g in p)p[g]!==void 0&&(e[g]=p[g])}return e}var tR=63710088e-1,Ou=function(){function e(a,r){if((0,Ot.Z)(this,e),isNaN(a)||isNaN(r))throw new Error("Invalid LngLat object: (".concat(a,", ").concat(r,")"));if(this.lng=+a,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,ot.Z)(e,[{key:"wrap",value:function(){return new e(uE(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(r){var o=Math.PI/180,u=this.lat*o,c=r.lat*o,p=Math.sin(u)*Math.sin(c)+Math.cos(u)*Math.cos(c)*Math.cos((r.lng-this.lng)*o),g=tR*Math.acos(Math.min(p,1));return g}}],[{key:"convert",value:function(r){if(r instanceof e)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new e(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&(0,tf.Z)(r)==="object"&&r!==null){var o="lng"in r?r.lng:r.lon;return new e(Number(o),Number(r.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),Uy=function(){function e(a,r){(0,Ot.Z)(this,e),a&&(r?this.setSouthWest(a).setNorthEast(r):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}return(0,ot.Z)(e,[{key:"setNorthEast",value:function(r){return this.ne=r instanceof Ou?new Ou(r.lng,r.lat):Ou.convert(r),this}},{key:"setSouthWest",value:function(r){return this.sw=r instanceof Ou?new Ou(r.lng,r.lat):Ou.convert(r),this}},{key:"extend",value:function(r){var o=this.sw,u=this.ne,c,p;if(r instanceof Ou)c=r,p=r;else if(r instanceof e){if(c=r.sw,p=r.ne,!c||!p)return this}else{if(Array.isArray(r))if(r.length===4||r.every(Array.isArray)){var g=r;return this.extend(e.convert(g))}else{var y=r;return this.extend(Ou.convert(y))}return this}return!o&&!u?(this.sw=new Ou(c.lng,c.lat),this.ne=new Ou(p.lng,p.lat)):(o.lng=Math.min(c.lng,o.lng),o.lat=Math.min(c.lat,o.lat),u.lng=Math.max(p.lng,u.lng),u.lat=Math.max(p.lat,u.lat)),this}},{key:"getCenter",value:function(){return new Ou((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Ou(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Ou(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(r){var o=Ou.convert(r),u=o.lng,c=o.lat,p=this.sw.lat<=c&&c<=this.ne.lat,g=this.sw.lng<=u&&u<=this.ne.lng;return this.sw.lng>this.ne.lng&&(g=this.sw.lng>=u&&u>=this.ne.lng),p&&g}}],[{key:"convert",value:function(r){return r instanceof e?r:new e(r)}}]),e}(),ns=function(){function e(a,r){(0,Ot.Z)(this,e),this.x=a,this.y=r}return(0,ot.Z)(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"_add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"add",value:function(r){return this.clone()._add(r)}},{key:"_sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"sub",value:function(r){return this.clone()._sub(r)}},{key:"_multByPoint",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multByPoint",value:function(r){return this.clone()._multByPoint(r)}},{key:"_divByPoint",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divByPoint",value:function(r){return this.clone()._divByPoint(r)}},{key:"_mult",value:function(r){return this.x*=r,this.y*=r,this}},{key:"mult",value:function(r){return this.clone()._mult(r)}},{key:"_div",value:function(r){return this.x/=r,this.y/=r,this}},{key:"div",value:function(r){return this.clone()._div(r)}},{key:"_rotate",value:function(r){var o=Math.cos(r),u=Math.sin(r),c=o*this.x-u*this.y,p=u*this.x+o*this.y;return this.x=c,this.y=p,this}},{key:"rotate",value:function(r){return this.clone()._rotate(r)}},{key:"_rotateAround",value:function(r,o){var u=Math.cos(r),c=Math.sin(r),p=o.x+u*(this.x-o.x)-c*(this.y-o.y),g=o.y+c*(this.x-o.x)+u*(this.y-o.y);return this.x=p,this.y=g,this}},{key:"roateAround",value:function(r,o){return this.clone()._rotateAround(r,o)}},{key:"_matMult",value:function(r){var o=r[0]*this.x+r[1]*this.y,u=r[2]*this.x+r[3]*this.y;return this.x=o,this.y=u,this}},{key:"matMult",value:function(r){return this.clone()._matMult(r)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var r=this.y;return this.y=this.x,this.x=-r,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(r){return this.x===r.x&&this.y===r.y}},{key:"dist",value:function(r){return Math.sqrt(this.distSqr(r))}},{key:"distSqr",value:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(r){return Math.atan2(this.y-r.y,this.x-r.x)}},{key:"angleWith",value:function(r){return this.angleWithSep(r.x,r.y)}},{key:"angleWithSep",value:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)}}],[{key:"convert",value:function(r){return r instanceof e?r:Array.isArray(r)?new e(r[0],r[1]):r}}]),e}();function n5(){var e=new ts.WT(4);return ts.WT!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function F4(e){var a=new glMatrix.ARRAY_TYPE(4);return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a}function B4(e,a){return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e}function N4(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function z4(e,a,r,o){var u=new glMatrix.ARRAY_TYPE(4);return u[0]=e,u[1]=a,u[2]=r,u[3]=o,u}function U4(e,a,r,o,u){return e[0]=a,e[1]=r,e[2]=o,e[3]=u,e}function Z4(e,a){if(e===a){var r=a[1];e[1]=a[2],e[2]=r}else e[0]=a[0],e[1]=a[2],e[2]=a[1],e[3]=a[3];return e}function V4(e,a){var r=a[0],o=a[1],u=a[2],c=a[3],p=r*c-u*o;return p?(p=1/p,e[0]=c*p,e[1]=-o*p,e[2]=-u*p,e[3]=r*p,e):null}function H4(e,a){var r=a[0];return e[0]=a[3],e[1]=-a[1],e[2]=-a[2],e[3]=r,e}function j4(e){return e[0]*e[3]-e[2]*e[1]}function W4(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=r[0],y=r[1],S=r[2],O=r[3];return e[0]=o*g+c*y,e[1]=u*g+p*y,e[2]=o*S+c*O,e[3]=u*S+p*O,e}function i5(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=Math.sin(r),y=Math.cos(r);return e[0]=o*y+c*g,e[1]=u*y+p*g,e[2]=o*-g+c*y,e[3]=u*-g+p*y,e}function G4(e,a,r){var o=a[0],u=a[1],c=a[2],p=a[3],g=r[0],y=r[1];return e[0]=o*g,e[1]=u*g,e[2]=c*y,e[3]=p*y,e}function s8(e,a){var r=Math.sin(a),o=Math.cos(a);return e[0]=o,e[1]=r,e[2]=-r,e[3]=o,e}function u8(e,a){return e[0]=a[0],e[1]=0,e[2]=0,e[3]=a[1],e}function l8(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function c8(e){return Math.hypot(e[0],e[1],e[2],e[3])}function i(e,a,r,o){return e[2]=o[2]/o[0],r[0]=o[0],r[1]=o[1],r[3]=o[3]-e[2]*r[1],[e,a,r]}function n(e,a,r){return e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e[3]=a[3]+r[3],e}function t(e,a,r){return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],e[3]=a[3]-r[3],e}function s(e,a){return e[0]===a[0]&&e[1]===a[1]&&e[2]===a[2]&&e[3]===a[3]}function l(e,a){var r=e[0],o=e[1],u=e[2],c=e[3],p=a[0],g=a[1],y=a[2],S=a[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))}function f(e,a,r){return e[0]=a[0]*r,e[1]=a[1]*r,e[2]=a[2]*r,e[3]=a[3]*r,e}function d(e,a,r,o){return e[0]=a[0]+r[0]*o,e[1]=a[1]+r[1]*o,e[2]=a[2]+r[2]*o,e[3]=a[3]+r[3]*o,e}var m=null,x=null,T=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,Ot.Z)(this,e),isNaN(a)||a<0||isNaN(r)||r<0||isNaN(o)||o<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=r,this.left=o,this.right=u}return(0,ot.Z)(e,[{key:"interpolate",value:function(r,o,u){return o.top!=null&&r.top!=null&&(this.top=cp(r.top,o.top,u)),o.bottom!=null&&r.bottom!=null&&(this.bottom=cp(r.bottom,o.bottom,u)),o.left!=null&&r.left!=null&&(this.left=cp(r.left,o.left,u)),o.right!=null&&r.right!=null&&(this.right=cp(r.right,o.right,u)),this}},{key:"getCenter",value:function(r,o){var u=Cv((this.left+r-this.right)/2,0,r),c=Cv((this.top+o-this.bottom)/2,0,o);return new ns(u,c)}},{key:"equals",value:function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}(),P=2*Math.PI*tR;function D(e){return P*Math.cos(e*Math.PI/180)}function B(e){return(180+e)/360}function U(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Y(e,a){return e/D(a)}function se(e){return e*360-180}function xe(e){var a=180-e*360;return 360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90}function Ee(e,a){return e*D(xe(a))}function rt(e){return 1/Math.cos(e*Math.PI/180)}var vt=function(){function e(a,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,Ot.Z)(this,e),this.x=+a,this.y=+r,this.z=+o}return(0,ot.Z)(e,[{key:"toLngLat",value:function(){return new Ou(se(this.x),xe(this.y))}},{key:"toAltitude",value:function(){return Ee(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/P*rt(xe(this.y))}}],[{key:"fromLngLat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=Ou.convert(r);return new e(B(u.lng),U(u.lat),Y(o,u.lat))}}]),e}();function xt(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Bt(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Bt(e,a){if(e){if(typeof e=="string")return _r(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _r(e,a)}}function _r(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var Or=8192,Wr=function(){function e(a,r,o,u,c){(0,Ot.Z)(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=c===void 0?!0:c,this._minZoom=a||0,this._maxZoom=r||22,this._minPitch=o==null?0:o,this._maxPitch=u==null?60:u,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ou(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new T,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,ot.Z)(e,[{key:"minZoom",get:function(){return this._minZoom},set:function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}},{key:"minPitch",get:function(){return this._minPitch},set:function(r){this._minPitch!==r&&(this._minPitch=r,this._pitch=Math.max(this._pitch,r))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(r){this._maxPitch!==r&&(this._maxPitch=r,this._pitch=Math.min(this._pitch,r))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new ns(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(r){var o=-uE(r,-180,180)*Math.PI/180;this.angle!==o&&(this.unmodified=!1,this.angle=o,this.calcMatrices(),this.rotationMatrix=n5(),i5(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(r){var o=Cv(r,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==o&&(this.unmodified=!1,this._pitch=o,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this.unmodified=!1,this._fov=r/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(r){var o=Math.min(Math.max(r,this._minZoom),this._maxZoom);this._zoom!==o&&(this.unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this.unmodified=!1,this._center=r,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(r){this.edgeInsets.equals(r)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,r,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var r=new e(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r.center=this._center,r.zoom=this.zoom,r.angle=this.angle,r.fov=this._fov,r.pitch=this._pitch,r.unmodified=this.unmodified,r.edgeInsets=this.edgeInsets.clone(),r.calcMatrices(),r}},{key:"isPaddingEqual",value:function(r){return this.edgeInsets.equals(r)}},{key:"interpolatePadding",value:function(r,o,u){this.unmodified=!1,this.edgeInsets.interpolate(r,o,u),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(r){var o=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,o)}},{key:"resize",value:function(r,o){this.width=r,this.height=o,this.pixelsToGLUnits=[2/r,-2/o],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(r){return Math.pow(2,r)}},{key:"scaleZoom",value:function(r){return Math.log(r)/Math.LN2}},{key:"project",value:function(r){var o=Cv(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new ns(B(r.lng)*this.worldSize,U(o)*this.worldSize)}},{key:"unproject",value:function(r){return new vt(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(r,o){var u=this.pointCoordinate(o),c=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(r),g=new vt(p.x-(u.x-c.x),p.y-(u.y-c.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(r){var o=0,u=new Float64Array([r.x,r.y,0,1]),c=new Float64Array([r.x,r.y,1,1]);Wf(u,u,this.pixelMatrixInverse),Wf(c,c,this.pixelMatrixInverse);var p=u[3],g=c[3],y=u[0]/p,S=c[0]/g,O=u[1]/p,L=c[1]/g,V=u[2]/p,G=c[2]/g,he=V===G?0:(o-V)/(G-V);return new vt(cp(y,S,he)/this.worldSize,cp(O,L,he)/this.worldSize)}},{key:"getBounds",value:function(){return new Uy().extend(this.pointLocation(new ns(0,0))).extend(this.pointLocation(new ns(this.width,0))).extend(this.pointLocation(new ns(this.width,this.height))).extend(this.pointLocation(new ns(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new Uy([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new ns(0,0)),o=new Float32Array([r.x*this.worldSize,r.y*this.worldSize,0,1]),u=Wf(o,o,this.pixelMatrix);return u[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var r=this._pitch,o=Math.tan(r)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new ns(0,o))}},{key:"getCameraQueryGeometry",value:function(r){var o=this.getCameraPoint();if(r.length===1)return[r[0],o];var u=o.x,c=o.y,p=o.x,g=o.y,y=xt(r),S;try{for(y.s();!(S=y.n()).done;){var O=S.value;u=Math.min(u,O.x),c=Math.min(c,O.y),p=Math.max(p,O.x),g=Math.max(g,O.y)}}catch(L){y.e(L)}finally{y.f()}return[new ns(u,c),new ns(p,c),new ns(p,g),new ns(u,g),new ns(u,c)]}},{key:"coordinatePoint",value:function(r){var o=zp(r.x*this.worldSize,r.y*this.worldSize,0,1);return Wf(o,o,this.pixelMatrix),new ns(o[0]/o[3],o[1]/o[3])}},{key:"locationPoint",value:function(r){return this.coordinatePoint(this.locationCoordinate(r))}},{key:"pointLocation",value:function(r){return this.coordinateLocation(this.pointCoordinate(r))}},{key:"locationCoordinate",value:function(r){return vt.fromLngLat(r)}},{key:"coordinateLocation",value:function(r){return r.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var r=-90,o=90,u=-180,c=180,p,g,y,S,O=this.size,L=this.unmodified;if(this.latRange){var V=this.latRange;r=U(V[1])*this.worldSize,o=U(V[0])*this.worldSize,p=o-r<O.y?O.y/(o-r):0}if(this.lngRange){var G=this.lngRange;u=B(G[0])*this.worldSize,c=B(G[1])*this.worldSize,g=c-u<O.x?O.x/(c-u):0}var he=this.point,ve=Math.max(g||0,p||0);if(ve){this.center=this.unproject(new ns(g?(c+u)/2:he.x,p?(o+r)/2:he.y)),this.zoom+=this.scaleZoom(ve),this.unmodified=L,this.constraining=!1;return}if(this.latRange){var Pe=he.y,Xe=O.y/2;Pe-Xe<r&&(S=r+Xe),Pe+Xe>o&&(S=o-Xe)}if(this.lngRange){var gt=he.x,_t=O.x/2;gt-_t<u&&(y=u+_t),gt+_t>c&&(y=c-_t)}(y!==void 0||S!==void 0)&&(this.center=this.unproject(new ns(y!==void 0?y:he.x,S!==void 0?S:he.y))),this.unmodified=L,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var r=this._fov/2,o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(r)*this.height;var u=Math.PI/2+this._pitch,c=this._fov*(.5+o.y/this.height),p=Math.sin(c)*this.cameraToCenterDistance/Math.sin(Cv(Math.PI-u-c,.01,Math.PI-.01)),g=this.point,y=g.x,S=g.y,O=Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance,L=O*1.01,V=this.height/50,G=new Float64Array(16);fr(G,this._fov,this.width/this.height,V,L),G[8]=-o.x*2/this.width,G[9]=o.y*2/this.height,dc(G,G,[1,-1,1]),Pu(G,G,[0,0,-this.cameraToCenterDistance]),Np(G,G,this._pitch),kc(G,G,this.angle),Pu(G,G,[-y,-S,0]),this.mercatorMatrix=dc([],G,[this.worldSize,this.worldSize,this.worldSize]),dc(G,G,[1,1,Y(1,this.center.lat)*this.worldSize,1]),this.projMatrix=G,this.invProjMatrix=Sh([],this.projMatrix);var he=this.width%2/2,ve=this.height%2/2,Pe=Math.cos(this.angle),Xe=Math.sin(this.angle),gt=y-Math.round(y)+Pe*he+Xe*ve,_t=S-Math.round(S)+Pe*ve+Xe*he,zt=new Float64Array(G);if(Pu(zt,zt,[gt>.5?gt-1:gt,_t>.5?_t-1:_t,0]),this.alignedProjMatrix=zt,G=Js(),dc(G,G,[this.width/2,-this.height/2,1]),Pu(G,G,[1,-1,0]),this.labelPlaneMatrix=G,G=Js(),dc(G,G,[1,-1,1]),Pu(G,G,[-1,-1,0]),dc(G,G,[2/this.width,2/this.height,1]),this.glCoordMatrix=G,this.pixelMatrix=vl(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),G=Sh(new Float64Array(16),this.pixelMatrix),!G)throw new Error("failed to invert matrix");this.pixelMatrixInverse=G,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),e}(),gn=Ca.merge,$r=(0,ot.Z)(function e(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,Ot.Z)(this,e),gn(this,r),this.type=a});function zn(e){var a=li();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function li(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var zi=Ca.merge,ia=function(e){(0,yr.Z)(r,e);var a=zn(r);function r(o){var u;(0,Ot.Z)(this,r),u=a.call(this),(0,He.Z)((0,wr.Z)(u),"renderFrameCallback",function(){var O=Math.min((Tv()-u.easeStart)/u.easeOptions.duration,1);u.onEaseFrame(u.easeOptions.easing(O)),O<1?u.easeFrameId=u.requestRenderFrame(u.renderFrameCallback):u.stop()}),u.options=o;var c=o.minZoom,p=o.maxZoom,g=o.minPitch,y=o.maxPitch,S=o.renderWorldCopies;return u.moving=!1,u.zooming=!1,u.bearingSnap=o.bearingSnap,u.pitchEnabled=o.pitchEnabled,u.rotateEnabled=o.rotateEnabled,u.transform=new Wr(c,p,g,y,S),u}return(0,ot.Z)(r,[{key:"requestRenderFrame",value:function(u){return 0}},{key:"cancelRenderFrame",value:function(u){}},{key:"getCenter",value:function(){var u=this.transform.center,c=u.lng,p=u.lat;return new Ou(c,p)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(u,c){return this.jumpTo({center:u},c)}},{key:"setPitch",value:function(u,c){return this.jumpTo({pitch:u},c),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(u,c,p){return this.easeTo(zi({center:u},c),p)}},{key:"panBy",value:function(u,c,p){return u=ns.convert(u).mult(-1),this.panTo(this.transform.center,Ld({offset:u},c||{}),p)}},{key:"zoomOut",value:function(u,c){return this.zoomTo(this.getZoom()-1,u,c),this}},{key:"setBearing",value:function(u,c){return this.jumpTo({bearing:u},c),this}},{key:"setZoom",value:function(u,c){return this.jumpTo({zoom:u},c),this}},{key:"zoomIn",value:function(u,c){return this.zoomTo(this.getZoom()+1,u,c),this}},{key:"zoomTo",value:function(u,c,p){return this.easeTo(zi({zoom:u},c),p)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(u,c){return this.jumpTo({padding:u},c),this}},{key:"rotateTo",value:function(u,c,p){return this.easeTo(zi({bearing:u},c),p)}},{key:"resetNorth",value:function(u,c){return this.rotateTo(0,zi({duration:1e3},u),c),this}},{key:"resetNorthPitch",value:function(u,c){return this.easeTo(zi({bearing:0,pitch:0,duration:1e3},u),c),this}},{key:"fitBounds",value:function(u,c,p){return this.fitInternal(this.cameraForBounds(u,c),c,p)}},{key:"cameraForBounds",value:function(u,c){return u=Uy.convert(u),this.cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),0,c)}},{key:"snapToNorth",value:function(u,c){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(u,c):this}},{key:"jumpTo",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;this.stop();var p=this.transform,g=!1,y=!1,S=!1;return u.zoom!==void 0&&p.zoom!==+u.zoom&&(g=!0,p.zoom=+u.zoom),u.center!==void 0&&(p.center=Ou.convert(u.center)),u.bearing!==void 0&&p.bearing!==+u.bearing&&(y=!0,p.bearing=+u.bearing),u.pitch!==void 0&&p.pitch!==+u.pitch&&(S=!0,p.pitch=+u.pitch),u.padding!==void 0&&!p.isPaddingEqual(u.padding)&&(p.padding=u.padding),this.emit("movestart",new $r("movestart",c)),this.emit("move",new $r("move",c)),g&&(this.emit("zoomstart",new $r("zoomstart",c)),this.emit("zoom",new $r("zoom",c)),this.emit("zoomend",new $r("zoomend",c))),y&&(this.emit("rotatestart",new $r("rotatestart",c)),this.emit("rotate",new $r("rotate",c)),this.emit("rotateend",new $r("rotateend",c))),S&&(this.emit("pitchstart",new $r("pitchstart",c)),this.emit("pitch",new $r("pitch",c)),this.emit("pitchend",new $r("pitchend",c))),this.emit("moveend",new $r("moveend",c))}},{key:"easeTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;c=zi({offset:[0,0],duration:500,easing:cE},c),(c.animate===!1||!c.essential&&QM())&&(c.duration=0);var g=this.transform,y=this.getZoom(),S=this.getBearing(),O=this.getPitch(),L=this.getPadding(),V=c.zoom?+c.zoom:y,G=c.bearing?this.normalizeBearing(c.bearing,S):S,he=c.pitch?+c.pitch:O,ve=c.padding?c.padding:g.padding,Pe=ns.convert(c.offset),Xe=g.centerPoint.add(Pe),gt=g.pointLocation(Xe),_t=Ou.convert(c.center||gt);this.normalizeCenter(_t);var zt=g.project(gt),Xt=g.project(_t).sub(zt),nr=g.zoomScale(V-y),ar,Tr;c.around&&(ar=Ou.convert(c.around),Tr=g.locationPoint(ar));var Zr={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||V!==y,this.rotating=this.rotating||S!==G,this.pitching=this.pitching||he!==O,this.padding=!g.isPaddingEqual(ve),this.easeId=c.easeId,this.prepareEase(p,c.noMoveStart,Zr),clearTimeout(this.easeEndTimeoutID),this.ease(function(rn){if(u.zooming&&(g.zoom=cp(y,V,rn)),u.rotating&&u.rotateEnabled&&(g.bearing=cp(S,G,rn)),u.pitching&&u.pitchEnabled&&(g.pitch=cp(O,he,rn)),u.padding&&(g.interpolatePadding(L,ve,rn),Xe=g.centerPoint.add(Pe)),ar)g.setLocationAtPoint(ar,Tr);else{var ln=g.zoomScale(g.zoom-y),Gn=V>y?Math.min(2,nr):Math.max(.5,nr),fi=Math.pow(Gn,1-rn),Fi=g.unproject(zt.add(Xt.mult(rn*fi)).mult(ln));g.setLocationAtPoint(g.renderWorldCopies?Fi.wrap():Fi,Xe)}u.fireMoveEvents(p)},function(rn){u.afterEase(p,rn)},c),this}},{key:"flyTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;if(!c.essential&&QM()){var g=t5(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),c=zi({offset:[0,0],speed:1.2,curve:1.42,easing:cE},c);var y=this.transform,S=this.getZoom(),O=this.getBearing(),L=this.getPitch(),V=this.getPadding(),G=c.zoom?Cv(+c.zoom,y.minZoom,y.maxZoom):S,he=c.bearing?this.normalizeBearing(c.bearing,O):O,ve=c.pitch?+c.pitch:L,Pe="padding"in c?c.padding:y.padding,Xe=y.zoomScale(G-S),gt=ns.convert(c.offset),_t=y.centerPoint.add(gt),zt=y.pointLocation(_t),Xt=Ou.convert(c.center||zt);this.normalizeCenter(Xt);var nr=y.project(zt),ar=y.project(Xt).sub(nr),Tr=c.curve,Zr=Math.max(y.width,y.height),rn=Zr/Xe,ln=ar.mag();if("minZoom"in c){var Gn=Cv(Math.min(c.minZoom,S,G),y.minZoom,y.maxZoom),fi=Zr/y.zoomScale(Gn-S);Tr=Math.sqrt(fi/ln*2)}var Fi=Tr*Tr;function uo(bl){var pp=(rn*rn-Zr*Zr+(bl?-1:1)*Fi*Fi*ln*ln)/(2*(bl?rn:Zr)*Fi*ln);return Math.log(Math.sqrt(pp*pp+1)-pp)}function is(bl){return(Math.exp(bl)-Math.exp(-bl))/2}function as(bl){return(Math.exp(bl)+Math.exp(-bl))/2}function tu(bl){return is(bl)/as(bl)}var hu=uo(0),lf=function(pp){return as(hu)/as(hu+Tr*pp)},jR=function(pp){return Zr*((as(hu)*tu(hu+Tr*pp)-is(hu))/Fi)/ln},_x=(uo(1)-hu)/Tr;if(Math.abs(ln)<1e-6||!isFinite(_x)){if(Math.abs(Zr-rn)<1e-6)return this.easeTo(c,p);var rB=rn<Zr?-1:1;_x=Math.abs(Math.log(rn/Zr))/Tr,jR=function(){return 0},lf=function(pp){return Math.exp(rB*Tr*pp)}}if("duration"in c)c.duration=+c.duration;else{var nB="screenSpeed"in c?+c.screenSpeed/Tr:+c.speed;c.duration=1e3*_x/nB}return c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this.zooming=!0,this.rotating=O!==he,this.pitching=ve!==L,this.padding=!y.isPaddingEqual(Pe),this.prepareEase(p,!1),this.ease(function(bl){var pp=bl*_x,WR=1/lf(pp);y.zoom=bl===1?G:S+y.scaleZoom(WR),u.rotating&&(y.bearing=cp(O,he,bl)),u.pitching&&(y.pitch=cp(L,ve,bl)),u.padding&&(y.interpolatePadding(V,Pe,bl),_t=y.centerPoint.add(gt));var GR=bl===1?Xt:y.unproject(nr.add(ar.mult(jR(pp))).mult(WR));y.setLocationAtPoint(y.renderWorldCopies?GR.wrap():GR,_t),u.fireMoveEvents(p)},function(){return u.afterEase(p)},c),this}},{key:"fitScreenCoordinates",value:function(u,c,p,g,y){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(ns.convert(u)),this.transform.pointLocation(ns.convert(c)),p,g),g,y)}},{key:"stop",value:function(u,c){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var p=this.onEaseEnd;delete this.onEaseEnd,p.call(this,c)}return this}},{key:"normalizeBearing",value:function(u,c){u=uE(u,-180,180);var p=Math.abs(u-c);return Math.abs(u-360-c)<p&&(u-=360),Math.abs(u+360-c)<p&&(u+=360),u}},{key:"normalizeCenter",value:function(u){var c=this.transform;if(!(!c.renderWorldCopies||c.lngRange)){var p=u.lng-c.center.lng;u.lng+=p>180?-360:p<-180?360:0}}},{key:"fireMoveEvents",value:function(u){this.emit("move",new $r("move",u)),this.zooming&&this.emit("zoom",new $r("zoom",u)),this.rotating&&this.emit("rotate",new $r("rotate",u)),this.pitching&&this.emit("rotate",new $r("pitch",u))}},{key:"prepareEase",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!c&&!p.moving&&this.emit("movestart",new $r("movestart",u)),this.zooming&&!p.zooming&&this.emit("zoomstart",new $r("zoomstart",u)),this.rotating&&!p.rotating&&this.emit("rotatestart",new $r("rotatestart",u)),this.pitching&&!p.pitching&&this.emit("pitchstart",new $r("pitchstart",u))}},{key:"afterEase",value:function(u,c){if(!(this.easeId&&c&&this.easeId===c)){delete this.easeId;var p=this.zooming,g=this.rotating,y=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,p&&this.emit("zoomend",new $r("zoomend",u)),g&&this.emit("rotateend",new $r("rotateend",u)),y&&this.emit("pitchend",new $r("pitchend",u)),this.emit("moveend",new $r("moveend",u))}}},{key:"ease",value:function(u,c,p){p.animate===!1||p.duration===0?(u(1),c()):(this.easeStart=Tv(),this.easeOptions=p,this.onEaseFrame=u,this.onEaseEnd=c,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(u,c,p,g){var y={top:0,bottom:0,right:0,left:0};if(g=zi({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},g),typeof g.padding=="number"){var S=g.padding;g.padding={top:S,bottom:S,right:S,left:S}}g.padding=zi(y,g.padding);var O=this.transform,L=O.padding,V=O.project(Ou.convert(u)),G=O.project(Ou.convert(c)),he=V.rotate(-p*Math.PI/180),ve=G.rotate(-p*Math.PI/180),Pe=new ns(Math.max(he.x,ve.x),Math.max(he.y,ve.y)),Xe=new ns(Math.min(he.x,ve.x),Math.min(he.y,ve.y)),gt=Pe.sub(Xe),_t=(O.width-(L.left+L.right+g.padding.left+g.padding.right))/gt.x,zt=(O.height-(L.top+L.bottom+g.padding.top+g.padding.bottom))/gt.y;if(!(zt<0||_t<0)){var Xt=Math.min(O.scaleZoom(O.scale*Math.min(_t,zt)),g.maxZoom),nr=ns.convert(g.offset),ar=(g.padding.left-g.padding.right)/2,Tr=(g.padding.top-g.padding.bottom)/2,Zr=new ns(nr.x+ar,nr.y+Tr),rn=Zr.mult(O.scale/O.zoomScale(Xt)),ln=O.unproject(V.add(G).div(2).sub(rn));return{center:ln,zoom:Xt,bearing:p}}}},{key:"fitInternal",value:function(u,c,p){return u?(c=zi(u,c),delete c.padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}}]),r}(Ys.EventEmitter);function qa(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Hn(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Hn(e,a){if(e){if(typeof e=="string")return Di(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Di(e,a)}}function Di(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var Zi={},yi=Zi;Zi.create=function(e,a,r){var o=window.document.createElement(e);return a!==void 0&&(o.className=a),r&&r.appendChild(o),o},Zi.createNS=function(e,a){var r=window.document.createElementNS(e,a);return r};var Vi=window.document&&window.document.documentElement.style;function Pa(e){if(!Vi)return e[0];var a=qa(e),r;try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o in Vi)return o}}catch(u){a.e(u)}finally{a.f()}return e[0]}var so=Pa(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Mo;Zi.disableDrag=function(){Vi&&so&&(Mo=Vi[so],Vi[so]="none")},Zi.enableDrag=function(){Vi&&so&&(Vi[so]=Mo)};var no=Pa(["transform","WebkitTransform"]);Zi.setTransform=function(e,a){e.style[no]=a};var Eo=!1;try{var Qo=Object.defineProperty({},"passive",{get:function(){Eo=!0}});window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch(e){Eo=!1}Zi.addEventListener=function(e,a,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&Eo?e.addEventListener(a,r,o):e.addEventListener(a,r,o.capture)},Zi.removeEventListener=function(e,a,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&Eo?e.removeEventListener(a,r,o):e.removeEventListener(a,r,o.capture)};var al=function e(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",e,!0)};Zi.suppressClick=function(){window.addEventListener("click",al,!0),setTimeout(function(){window.removeEventListener("click",al,!0)},0)},Zi.mousePos=function(e,a){var r=e.getBoundingClientRect();return new ns(a.clientX-r.left-e.clientLeft,a.clientY-r.top-e.clientTop)},Zi.touchPos=function(e,a){var r=e.getBoundingClientRect(),o=[],u=qa(a),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;o.push(new ns(p.clientX-r.left-e.clientLeft,p.clientY-r.top-e.clientTop))}}catch(g){u.e(g)}finally{u.f()}return o},Zi.mouseButton=function(e){return e.button},Zi.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};function _l(e){var a=Fd();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Fd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var am=Ca.merge,Vc=function(e){(0,yr.Z)(r,e);var a=_l(r);function r(o,u,c){var p,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,Ot.Z)(this,r);var y=yi.mousePos(u.getCanvasContainer(),c),S=u.unproject(y);return p=a.call(this,o,am({point:y,lngLat:S,originalEvent:c},g)),p.defaultPrevented=!1,p.target=u,p}return(0,ot.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}($r);function p0(e){var a=d0();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function d0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Zy=function(e){(0,yr.Z)(r,e);var a=p0(r);function r(o,u,c){var p;(0,Ot.Z)(this,r);var g=o==="touchend"?c.changedTouches:c.touches,y=yi.touchPos(u.getCanvasContainer(),g),S=y.map(function(V){return u.unproject(V)}),O=y.reduce(function(V,G,he,ve){return V.add(G.div(ve.length))},new ns(0,0)),L=u.unproject(O);return p=a.call(this,o,{points:y,point:O,lngLats:S,lngLat:L,originalEvent:c}),p.defaultPrevented=!1,p}return(0,ot.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}($r);function a5(e){var a=o5();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function o5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rR=function(e){(0,yr.Z)(r,e);var a=a5(r);function r(o,u,c){var p;return(0,Ot.Z)(this,r),p=a.call(this,o,{originalEvent:c}),p.defaultPrevented=!1,p}return(0,ot.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}($r),fE=function(){function e(a){(0,Ot.Z)(this,e),this.map=a}return(0,ot.Z)(e,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(r){this.map.emit(r.type,new Vc(r.type,this.map,r))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Vc("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(r){this.delayContextMenu?this.contextMenuEvent=r:this.map.emit(r.type,new Vc(r.type,this.map,r)),this.map.listeners("contextmenu")&&r.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),e}(),nR=function(){function e(a,r){(0,Ot.Z)(this,e),this.map=a,this.el=a.getCanvasContainer(),this.container=a.getContainer(),this.clickTolerance=r.clickTolerance||1}return(0,ot.Z)(e,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(yi.disableDrag(),this.startPos=this.lastPos=o,this.active=!0)}},{key:"mousemoveWindow",value:function(r,o){if(this.active){var u=o;if(!(this.lastPos.equals(u)||!this.box&&u.dist(this.startPos)<this.clickTolerance)){var c=this.startPos;this.lastPos=u,this.box||(this.box=yi.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",r));var p=Math.min(c.x,u.x),g=Math.max(c.x,u.x),y=Math.min(c.y,u.y),S=Math.max(c.y,u.y);yi.setTransform(this.box,"translate(".concat(p,"px,").concat(y,"px)")),this.box&&(this.box.style.width="".concat(g-p,"px"),this.box.style.height="".concat(S-y,"px"))}}}},{key:"mouseupWindow",value:function(r,o){var u=this;if(this.active&&r.button===0){var c=this.startPos,p=o;if(this.reset(),yi.suppressClick(),c.x===p.x&&c.y===p.y)this.fireEvent("boxzoomcancel",r);else return this.map.emit("boxzoomend",new $r("boxzoomend",{originalEvent:r})),{cameraAnimation:function(y){return y.fitScreenCoordinates(c,p,u.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(r){this.active&&r.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",r))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(yi.remove(this.box),this.box=null),yi.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(r,o){return this.map.emit(r,new $r(r,{originalEvent:o}))}}]),e}(),s5=nR,hE=function(){function e(){(0,Ot.Z)(this,e),this.reset()}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(r,o){return r.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(r.shiftKey?-1:1),around:c.unproject(o)},{originalEvent:r})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function u5(e){var a=pE();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function pE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dE=function(e){(0,yr.Z)(r,e);var a=u5(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"type","renderFrame"),o}return(0,ot.Z)(r)}($r);function $4(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l5(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function l5(e,a){if(e){if(typeof e=="string")return Av(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Av(e,a)}}function Av(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var v0=Ca.merge,Lh={linearity:.3,easing:lE(0,0,.3,1)},Vy=v0({deceleration:2500,maxSpeed:1400},Lh),f8=v0({deceleration:20,maxSpeed:1400},Lh),h8=v0({deceleration:1e3,maxSpeed:360},Lh),p8=v0({deceleration:1e3,maxSpeed:90},Lh),d8=function(){function e(a){(0,Ot.Z)(this,e),this.map=a,this.clear()}return(0,ot.Z)(e,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(r){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Tv(),settings:r})}},{key:"drainInertiaBuffer",value:function(){for(var r=this.inertiaBuffer,o=Tv(),u=160;r.length>0&&o-r[0].time>u;)r.shift()}},{key:"onMoveEnd",value:function(r){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var o={zoom:0,bearing:0,pitch:0,pan:new ns(0,0),pinchAround:void 0,around:void 0},u=$4(this.inertiaBuffer),c;try{for(u.s();!(c=u.n()).done;){var p=c.value.settings;o.zoom+=p.zoomDelta||0,o.bearing+=p.bearingDelta||0,o.pitch+=p.pitchDelta||0,p.panDelta&&o.pan._add(p.panDelta),p.around&&(o.around=p.around),p.pinchAround&&(o.pinchAround=p.pinchAround)}}catch(ve){u.e(ve)}finally{u.f()}var g=this.inertiaBuffer[this.inertiaBuffer.length-1],y=g.time-this.inertiaBuffer[0].time,S={};if(o.pan.mag()){var O=aR(o.pan.mag(),y,v0({},Vy,r||{}));S.offset=o.pan.mult(O.amount/o.pan.mag()),S.center=this.map.transform.center,iR(S,O)}if(o.zoom){var L=aR(o.zoom,y,f8);S.zoom=this.map.transform.zoom+L.amount,iR(S,L)}if(o.bearing){var V=aR(o.bearing,y,h8);S.bearing=this.map.transform.bearing+Cv(V.amount,-179,179),iR(S,V)}if(o.pitch){var G=aR(o.pitch,y,p8);S.pitch=this.map.transform.pitch+G.amount,iR(S,G)}if(S.zoom||S.bearing){var he=o.pinchAround===void 0?o.around:o.pinchAround;S.around=he?this.map.unproject(he):this.map.getCenter()}return this.clear(),v0(S,{noMoveStart:!0})}}}]),e}();function iR(e,a){(!e.duration||e.duration<a.duration)&&(e.duration=a.duration,e.easing=a.easing)}function aR(e,a,r){var o=r.maxSpeed,u=r.linearity,c=r.deceleration,p=Cv(e*u/(a/1e3),-o,o),g=Math.abs(p)/(c*u);return{easing:r.easing,duration:g*1e3,amount:p*(g/2)}}var v8={panStep:100,bearingStep:15,pitchStep:10},g8=function(){function e(){(0,Ot.Z)(this,e);var a=v8;this.panStep=a.panStep,this.bearingStep=a.bearingStep,this.pitchStep=a.pitchStep}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(r){var o=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var u=0,c=0,p=0,g=0,y=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?c=-1:(r.preventDefault(),g=-1);break;case 39:r.shiftKey?c=1:(r.preventDefault(),g=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),y=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),y=1);break;default:return}return{cameraAnimation:function(O){var L=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:m8,zoom:u?Math.round(L)+u*(r.shiftKey?2:1):L,bearing:O.getBearing()+c*o.bearingStep,pitch:O.getPitch()+p*o.pitchStep,offset:[-g*o.panStep,-y*o.panStep],center:O.getCenter()},{originalEvent:r})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function m8(e){return e*(2-e)}var y8=g8,_8=function(){function e(a,r){(0,Ot.Z)(this,e),this.map=a,this.clickTolerance=r.clickTolerance}return(0,ot.Z)(e,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(r){return this.firePreventable(new rR(r.type,this.map,r))}},{key:"mousedown",value:function(r,o){return this.mousedownPos=o,this.firePreventable(new Vc(r.type,this.map,r))}},{key:"mouseup",value:function(r){this.map.emit(r.type,new Vc(r.type,this.map,r))}},{key:"click",value:function(r,o){this.mousedownPos&&this.mousedownPos.dist(o)>=this.clickTolerance||this.map.emit(r.type,new Vc(r.type,this.map,r))}},{key:"dblclick",value:function(r){return this.firePreventable(new Vc(r.type,this.map,r))}},{key:"mouseover",value:function(r){this.map.emit(r.type,new Vc(r.type,this.map,r))}},{key:"mouseout",value:function(r){this.map.emit(r.type,new Vc(r.type,this.map,r))}},{key:"touchstart",value:function(r){return this.firePreventable(new Zy(r.type,this.map,r))}},{key:"touchmove",value:function(r){this.map.emit(r.type,new Zy(r.type,this.map,r))}},{key:"touchend",value:function(r){this.map.emit(r.type,new Zy(r.type,this.map,r))}},{key:"touchcancel",value:function(r){this.map.emit(r.type,new Zy(r.type,this.map,r))}},{key:"firePreventable",value:function(r){if(this.map.emit(r.type,r),r.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),e}(),oR,sR=0,c5=2,x8=(oR={},(0,He.Z)(oR,sR,1),(0,He.Z)(oR,c5,2),oR);function b8(e,a){var r=x8[a];return e.buttons===void 0||(e.buttons&r)!==r}var f5=function(){function e(a){(0,Ot.Z)(this,e),this.reset(),this.clickTolerance=a.clickTolerance||1}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(r,o){if(!this.lastPoint){var u=yi.mouseButton(r);this.correctButton(r,u)&&(this.lastPoint=o,this.eventButton=u)}}},{key:"mousemoveWindow",value:function(r,o){var u=this.lastPoint;if(u){if(r.preventDefault(),b8(r,this.eventButton)){this.reset();return}if(!(!this.moved&&o.dist(u)<this.clickTolerance))return this.moved=!0,this.lastPoint=o,this.move(u,o)}}},{key:"mouseupWindow",value:function(r){if(this.lastPoint){var o=yi.mouseButton(r);o===this.eventButton&&(this.moved&&yi.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(r,o){return!1}},{key:"move",value:function(r,o){}}]),e}();function S8(e){var a=E8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function E8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var w8=function(e){(0,yr.Z)(r,e);var a=S8(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"mousedown",value:function(u,c){Ef((0,Ft.Z)(r.prototype),"mousedown",this).call(this,u,c),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(u,c){return{around:c,panDelta:c.sub(u)}}},{key:"correctButton",value:function(u,c){return c===sR&&!u.ctrlKey}}]),r}(f5);function C8(e){var a=T8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function T8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var A8=function(e){(0,yr.Z)(r,e);var a=C8(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"correctButton",value:function(u,c){return c===sR&&u.ctrlKey||c===c5}},{key:"move",value:function(u,c){var p=-.5,g=(c.y-u.y)*p;if(g)return this.active=!0,{pitchDelta:g}}},{key:"contextmenu",value:function(u){u.preventDefault()}}]),r}(f5);function M8(e){var a=R8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function R8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var I8=function(e){(0,yr.Z)(r,e);var a=M8(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"contextmenu",value:function(u){u.preventDefault()}},{key:"correctButton",value:function(u,c){return c===sR&&u.ctrlKey||c===c5}},{key:"move",value:function(u,c){var p=.8,g=(c.x-u.x)*p;if(g)return this.active=!0,{bearingDelta:g}}}]),r}(f5),X4=4.000244140625,P8=1/100,O8=1/450,k8=2,D8=function(){function e(a,r){var o=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"onScrollFrame",function(){if(o.frameId&&(o.frameId=null,!!o.isActive())){var u=o.map.transform;if(o.delta!==0){var c=o.type==="wheel"&&Math.abs(o.delta)>X4?o.wheelZoomRate:o.defaultZoomRate,p=k8/(1+Math.exp(-Math.abs(o.delta*c)));o.delta<0&&p!==0&&(p=1/p);var g=typeof o.targetZoom=="number"?u.zoomScale(o.targetZoom):u.scale;o.targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(g*p))),o.type==="wheel"&&(o.startZoom=u.zoom,o.easing=o.smoothOutEasing(200)),o.delta=0}var y=typeof o.targetZoom=="number"?o.targetZoom:u.zoom,S=o.startZoom,O=o.easing,L=!1,V;if(o.type==="wheel"&&S&&O){var G=Math.min((Tv()-o.lastWheelEventTime)/200,1),he=O(G);V=cp(S,y,he),G<1?o.frameId||(o.frameId=!0):L=!0}else V=y,L=!0;return o.active=!0,L&&(o.active=!1,o.finishTimeout=setTimeout(function(){o.zooming=!1,o.handler.triggerRenderFrame(),delete o.targetZoom,delete o.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:V-u.zoom,around:o.aroundPoint,originalEvent:o.lastWheelEvent}}}),this.map=a,this.el=a.getCanvasContainer(),this.handler=r,this.delta=0,this.defaultZoomRate=P8,this.wheelZoomRate=O8}return(0,ot.Z)(e,[{key:"setZoomRate",value:function(r){this.defaultZoomRate=r}},{key:"setWheelZoomRate",value:function(r){this.wheelZoomRate=r}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(r){this.isEnabled()||(this.enabled=!0,this.aroundCenter=r&&r.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(r){if(this.isEnabled()){var o=r.deltaMode===window.WheelEvent.DOM_DELTA_LINE?r.deltaY*40:r.deltaY,u=Tv(),c=u-(this.lastWheelEventTime||0);this.lastWheelEventTime=u,o!==0&&o%X4===0?this.type="wheel":o!==0&&Math.abs(o)<4?this.type="trackpad":c>400?(this.type=null,this.lastValue=o,this.timeout=setTimeout(this.onTimeout,40,r)):this.type||(this.type=Math.abs(c*o)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,o+=this.lastValue)),r.shiftKey&&o&&(o=o/4),this.type&&(this.lastWheelEvent=r,this.delta-=o,this.active||this.start(r)),r.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(r){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(r)}},{key:"start",value:function(r){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var o=yi.mousePos(this.el,r);this.around=Ou.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(o)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(r){var o=cE;if(this.prevEase){var u=this.prevEase,c=(Tv()-u.start)/u.duration,p=u.easing(c+.01)-u.easing(c),g=.27/Math.sqrt(p*p+1e-4)*.01,y=Math.sqrt(.27*.27-g*g);o=lE(g,y,.25,1)}return this.prevEase={start:Tv(),duration:r,easing:o},o}}]),e}(),L8=D8,F8=function(){function e(a,r){(0,Ot.Z)(this,e),this.clickZoom=a,this.tapZoom=r}return(0,ot.Z)(e,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),e}(),B8=function(){function e(a,r,o){(0,Ot.Z)(this,e),this.el=a,this.mousePan=r,this.touchPan=o}return(0,ot.Z)(e,[{key:"enable",value:function(r){this.inertiaOptions=r||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),e}(),N8=function(){function e(a,r,o){(0,Ot.Z)(this,e),this.pitchWithRotate=a.pitchWithRotate,this.mouseRotate=r,this.mousePitch=o}return(0,ot.Z)(e,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),e}(),z8=function(){function e(a,r,o,u){(0,Ot.Z)(this,e),this.el=a,this.touchZoom=r,this.touchRotate=o,this.tapDragZoom=u,this.rotationDisabled=!1,this.enabled=!0}return(0,ot.Z)(e,[{key:"enable",value:function(r){this.touchZoom.enable(r),this.rotationDisabled||this.touchRotate.enable(r),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),e}();function h5(e,a){for(var r={},o=0;o<e.length;o++)r[e[o].identifier]=a[o];return r}function U8(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Z8(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Z8(e,a){if(e){if(typeof e=="string")return Y4(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y4(e,a)}}function Y4(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}function V8(e){var a=new ns(0,0),r=U8(e),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;a._add(u)}}catch(c){r.e(c)}finally{r.f()}return a.div(e.length)}var K4=500,H8=500,q4=30,j8=function(){function e(a){(0,Ot.Z)(this,e),this.reset(),this.numTouches=a.numTouches}return(0,ot.Z)(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(r,o,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=r.timeStamp),u.length===this.numTouches&&(this.centroid=V8(o),this.touches=h5(u,o)))}},{key:"touchmove",value:function(r,o,u){if(!(this.aborted||!this.centroid)){var c=h5(u,o);for(var p in this.touches)if(this.touches[p]){var g=this.touches[p],y=c[p];(!y||y.dist(g)>q4)&&(this.aborted=!0)}}}},{key:"touchend",value:function(r,o,u){if((!this.centroid||r.timeStamp-this.startTime>H8)&&(this.aborted=!0),u.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}}}]),e}(),p5=function(){function e(a){(0,Ot.Z)(this,e),this.singleTap=new j8(a),this.numTaps=a.numTaps,this.reset()}return(0,ot.Z)(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(r,o,u){this.singleTap.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.singleTap.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this.singleTap.touchend(r,o,u);if(c){var p=r.timeStamp-this.lastTime<K4,g=!this.lastTap||this.lastTap.dist(c)<q4;if((!p||!g)&&this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}}}]),e}(),W8=function(){function e(){(0,Ot.Z)(this,e),this.tap=new p5({numTouches:1,numTaps:1}),this.reset()}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(r,o,u){this.swipePoint||(this.tapTime&&r.timeStamp-this.tapTime>K4&&this.reset(),this.tapTime?u.length>0&&(this.swipePoint=o[0],this.swipeTouch=u[0].identifier):this.tap.touchstart(r,o,u))}},{key:"touchmove",value:function(r,o,u){if(!this.tapTime)this.tap.touchmove(r,o,u);else if(this.swipePoint){if(u[0].identifier!==this.swipeTouch)return;var c=o[0],p=c.y-this.swipePoint.y;return this.swipePoint=c,r.preventDefault(),this.active=!0,{zoomDelta:p/128}}}},{key:"touchend",value:function(r,o,u){if(this.tapTime)this.swipePoint&&u.length===0&&this.reset();else{var c=this.tap.touchend(r,o,u);c&&(this.tapTime=r.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),G8=function(){function e(){(0,Ot.Z)(this,e),this.zoomIn=new p5({numTouches:1,numTaps:2}),this.zoomOut=new p5({numTouches:2,numTaps:1}),this.reset()}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(r,o,u){this.zoomIn.touchstart(r,o,u),this.zoomOut.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.zoomIn.touchmove(r,o,u),this.zoomOut.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this,p=this.zoomIn.touchend(r,o,u),g=this.zoomOut.touchend(r,o,u);if(p)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(p)},{originalEvent:r})}};if(g)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(g)},{originalEvent:r})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),$8=function(){function e(a){(0,Ot.Z)(this,e),this.minTouches=1,this.clickTolerance=a.clickTolerance||1,this.reset()}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new ns(0,0)}},{key:"touchstart",value:function(r,o,u){return this.calculateTransform(r,o,u)}},{key:"touchmove",value:function(r,o,u){if(this.active)return r.preventDefault(),this.calculateTransform(r,o,u)}},{key:"touchend",value:function(r,o,u){this.calculateTransform(r,o,u),this.active&&u.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(r,o,u){u.length>0&&(this.active=!0);var c=h5(u,o),p=new ns(0,0),g=new ns(0,0),y=0;for(var S in c)if(c[S]){var O=c[S],L=this.touches[S];L&&(p._add(O),g._add(O.sub(L)),y++,c[S]=O)}if(this.touches=c,!(y<this.minTouches||!g.mag())){var V=g.div(y);if(this.sum._add(V),!(this.sum.mag()<this.clickTolerance)){var G=p.div(y);return{around:G,panDelta:V}}}}}]),e}(),d5=function(){function e(){(0,Ot.Z)(this,e),this.reset()}return(0,ot.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(r){}},{key:"move",value:function(r,o,u){}},{key:"touchstart",value:function(r,o,u){this.firstTwoTouches||u.length<2||(this.firstTwoTouches=[u[0].identifier,u[1].identifier],this.start([o[0],o[1]]))}},{key:"touchmove",value:function(r,o,u){if(this.firstTwoTouches){r.preventDefault();var c=(0,ji.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=uR(u,o,p),S=uR(u,o,g);if(!(!y||!S)){var O=this.aroundCenter?null:y.add(S).div(2);return this.move([y,S],O,r)}}}},{key:"touchend",value:function(r,o,u){if(this.firstTwoTouches){var c=(0,ji.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=uR(u,o,p),S=uR(u,o,g);y&&S||(this.active&&yi.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(r){this.enabled=!0,this.aroundCenter=!!r&&r.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function uR(e,a,r){for(var o=0;o<e.length;o++)if(e[o].identifier===r)return a[o]}function X8(e){var a=Y8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function Y8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v5(e){return Math.abs(e.y)>Math.abs(e.x)}var K8=100,q8=function(e){(0,yr.Z)(r,e);var a=X8(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"reset",value:function(){Ef((0,Ft.Z)(r.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(u){this.lastPoints=u,v5(u[0].sub(u[1]))&&(this.valid=!1)}},{key:"move",value:function(u,c,p){var g=u[0].sub(this.lastPoints[0]),y=u[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(g,y,p.timeStamp),!!this.valid){this.lastPoints=u,this.active=!0;var S=(g.y+y.y)/2,O=-.5;return{pitchDelta:S*O}}}},{key:"gestureBeginsVertically",value:function(u,c,p){if(this.valid!==void 0)return this.valid;var g=2,y=u.mag()>=g,S=c.mag()>=g;if(!(!y&&!S)){if(!y||!S)return this.firstMove===void 0&&(this.firstMove=p),p-this.firstMove<K8?void 0:!1;var O=u.y>0==c.y>0;return v5(u)&&v5(c)&&O}}}]),r}(d5);function Q8(e){var a=J8();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function J8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var e7=25;function Q4(e,a){return e.angleWith(a)*180/Math.PI}var t7=function(e){(0,yr.Z)(r,e);var a=Q8(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"reset",value:function(){Ef((0,Ft.Z)(r.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(u){this.startVector=this.vector=u[0].sub(u[1]),this.minDiameter=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.vector;if(this.vector=u[0].sub(u[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Q4(this.vector,p),pinchAround:c}}},{key:"isBelowThreshold",value:function(u){this.minDiameter=Math.min(this.minDiameter,u.mag());var c=Math.PI*this.minDiameter,p=e7/c*360,g=Q4(u,this.startVector);return Math.abs(g)<p}}]),r}(d5);function r7(e){var a=n7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function n7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var i7=.1;function J4(e,a){return Math.log(e/a)/Math.LN2}var a7=function(e){(0,yr.Z)(r,e);var a=r7(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"reset",value:function(){Ef((0,Ft.Z)(r.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(u){this.startDistance=this.distance=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.distance;if(this.distance=u[0].dist(u[1]),!(!this.active&&Math.abs(J4(this.distance,this.startDistance))<i7))return this.active=!0,{zoomDelta:J4(this.distance,p),pinchAround:c}}}]),r}(d5);function Hy(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o7(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function o7(e,a){if(e){if(typeof e=="string")return e6(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e6(e,a)}}function e6(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var g5=Ca.merge,lR=function(a){return a.zoom||a.drag||a.pitch||a.rotate};function m5(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var s7=function(){function e(a,r){var o=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"handleWindowEvent",function(L){o.handleEvent(L,"".concat(L.type,"Window"))}),(0,He.Z)(this,"handleEvent",function(L,V){if(L.type==="blur"){o.stop();return}o.updatingCamera=!0;var G=L.type==="renderFrame"?void 0:L,he={needsRenderFrame:!1},ve={},Pe={},Xe=L.touches?o.getMapTouches(L.touches):void 0,gt=Xe?yi.touchPos(o.el,Xe):yi.mousePos(o.el,L),_t=Hy(o.handlers),zt;try{for(_t.s();!(zt=_t.n()).done;){var Xt=zt.value,nr=Xt.handlerName,ar=Xt.handler,Tr=Xt.allowed;if(ar.isEnabled()){var Zr=void 0;if(o.blockedByActive(Pe,Tr,nr))ar.reset();else{var rn=V||L.type;ar&&ar[rn]&&(Zr=ar[rn](L,gt,Xe),o.mergeIHandlerResult(he,ve,Zr,nr,G),Zr&&Zr.needsRenderFrame&&o.triggerRenderFrame())}(Zr||ar.isActive())&&(Pe[nr]=ar)}}}catch(Fi){_t.e(Fi)}finally{_t.f()}var ln={};for(var Gn in o.previousActiveHandlers)Pe[Gn]||(ln[Gn]=G);o.previousActiveHandlers=Pe,(Object.keys(ln).length||m5(he))&&(o.changes.push([he,ve,ln]),o.triggerRenderFrame()),(Object.keys(Pe).length||m5(he))&&o.map.stop(!0),o.updatingCamera=!1;var fi=he.cameraAnimation;fi&&(o.inertia.clear(),o.fireEvents({},{}),o.changes=[],fi(o.map))}),this.map=a,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new d8(a),this.bearingSnap=r.bearingSnap,this.rotateEnabled=r.rotateEnabled,this.pitchEnabled=r.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(r);var u=this.el;this.listeners=[],this.listeners=[[u,"touchstart",{passive:!1}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];var c=Hy(this.listeners),p;try{for(c.s();!(p=c.n()).done;){var g=(0,ji.Z)(p.value,3),y=g[0],S=g[1],O=g[2];yi.addEventListener(y,S,y===window.document?this.handleWindowEvent:this.handleEvent,O)}}catch(L){c.e(L)}finally{c.f()}}return(0,ot.Z)(e,[{key:"destroy",value:function(){var r=Hy(this.listeners),o;try{for(r.s();!(o=r.n()).done;){var u=(0,ji.Z)(o.value,3),c=u[0],p=u[1],g=u[2];yi.removeEventListener(c,p,c===window.document?this.handleWindowEvent:this.handleEvent,g)}}catch(y){r.e(y)}finally{r.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var r=Hy(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;u.reset()}}catch(c){r.e(c)}finally{r.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var r=Hy(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;if(u.isActive())return!0}}catch(c){r.e(c)}finally{r.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!lR(this.eventsInProgress)||this.isZooming()}},{key:"mergeIHandlerResult",value:function(r,o,u,c,p){if(u){g5(r,u);var g={handlerName:c,originalEvent:u.originalEvent||p};u.zoomDelta!==void 0&&(o.zoom=g),u.panDelta!==void 0&&(o.drag=g),u.pitchDelta!==void 0&&(o.pitch=g),u.bearingDelta!==void 0&&(o.rotate=g)}}},{key:"triggerRenderFrame",value:function(){var r=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(o){delete r.frameId,r.handleEvent(new dE("renderFrame",{timeStamp:o})),r.applyChanges()}))}},{key:"addDefaultHandlers",value:function(r){var o=this.map,u=o.getCanvasContainer();this.add("mapEvent",new _8(o,r));var c=o.boxZoom=new s5(o,r);this.add("boxZoom",c);var p=new G8,g=new hE;o.doubleClickZoom=new F8(g,p),this.add("tapZoom",p),this.add("clickZoom",g);var y=new W8;this.add("tapDragZoom",y);var S=o.touchPitch=new q8;this.add("touchPitch",S);var O=new A8(r),L=new I8(r);o.dragRotate=new N8(r,O,L),this.add("mouseRotate",O,["mousePitch"]),this.add("mousePitch",L,["mouseRotate"]);var V=new w8(r),G=new $8(r);o.dragPan=new B8(u,V,G),this.add("mousePan",V),this.add("touchPan",G,["touchZoom","touchRotate"]);var he=new t7,ve=new a7;o.touchZoomRotate=new z8(u,ve,he,y),this.add("touchRotate",he,["touchPan","touchZoom"]),this.add("touchZoom",ve,["touchPan","touchRotate"]);var Pe=o.scrollZoom=new L8(o,this);this.add("scrollZoom",Pe,["mousePan"]);var Xe=o.keyboard=new y8;this.add("keyboard",Xe),this.add("blockableMapEvent",new fE(o));for(var gt=0,_t=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];gt<_t.length;gt++){var zt=_t[gt];r.interactive&&r[zt]&&o[zt].enable(r[zt])}}},{key:"add",value:function(r,o,u){this.handlers.push({handlerName:r,handler:o,allowed:u}),this.handlersById[r]=o}},{key:"blockedByActive",value:function(r,o,u){for(var c in r)if(c!==u&&(!o||o.indexOf(c)<0))return!0;return!1}},{key:"getMapTouches",value:function(r){var o=[],u=Hy(r),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,g=p.target;this.el.contains(g)&&o.push(p)}}catch(y){u.e(y)}finally{u.f()}return o}},{key:"applyChanges",value:function(){var r={},o={},u={},c=Hy(this.changes),p;try{for(c.s();!(p=c.n()).done;){var g=(0,ji.Z)(p.value,3),y=g[0],S=g[1],O=g[2];y.panDelta&&(r.panDelta=(r.panDelta||new ns(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),g5(o,S),g5(u,O)}}catch(L){c.e(L)}finally{c.f()}this.updateMapTransform(r,o,u),this.changes=[]}},{key:"updateMapTransform",value:function(r,o,u){var c=this.map,p=c.transform;if(!m5(r))return this.fireEvents(o,u);var g=r.panDelta,y=r.zoomDelta,S=r.bearingDelta,O=r.pitchDelta,L=r.pinchAround,V=r.around;L!==void 0&&(V=L),c.stop(!0),V=V||c.transform.centerPoint;var G=p.pointLocation(g?V.sub(g):V);S&&this.rotateEnabled&&(p.bearing+=S),O&&this.pitchEnabled&&(p.pitch+=O),y&&(p.zoom+=y),p.setLocationAtPoint(G,V),this.map.update(),r.noInertia||this.inertia.record(r),this.fireEvents(o,u)}},{key:"fireEvents",value:function(r,o){var u=this,c=lR(this.eventsInProgress),p=lR(r),g={};for(var y in r)if(r[y]){var S=r[y].originalEvent;this.eventsInProgress[y]||(g["".concat(y,"start")]=S),this.eventsInProgress[y]=r[y]}!c&&p&&this.fireEvent("movestart",p.originalEvent);for(var O in g)g[O]&&this.fireEvent(O,g[O]);r.rotate&&(this.bearingChanged=!0),p&&this.fireEvent("move",p.originalEvent);for(var L in r)if(r[L]){var V=r[L].originalEvent;this.fireEvent(L,V)}var G={},he;for(var ve in this.eventsInProgress)if(this.eventsInProgress[ve]){var Pe=this.eventsInProgress[ve],Xe=Pe.handlerName,gt=Pe.originalEvent;this.handlersById[Xe].isActive()||(delete this.eventsInProgress[ve],he=o[Xe]||gt,G["".concat(ve,"end")]=he)}for(var _t in G)G[_t]&&this.fireEvent(_t,G[_t]);var zt=lR(this.eventsInProgress);if((c||p)&&!zt){this.updatingCamera=!0;var Xt=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),nr=function(Tr){return Tr!==0&&-u.bearingSnap<Tr&&Tr<u.bearingSnap};Xt?(nr(Xt.bearing||this.map.getBearing())&&(Xt.bearing=0),this.map.easeTo(Xt,{originalEvent:he})):(this.map.emit("moveend",new $r("moveend",{originalEvent:he})),nr(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(r,o){this.map.emit(r,new $r(r,o?{originalEvent:o}:{}))}}]),e}(),u7=s7,cR=null,vE=[],l7=30,y5=1e3/l7,X1=window.performance,Y1={create:"create",load:"load",fullLoad:"fullLoad"},t6={mark:function(a){X1.mark(a)},frame:function(a){var r=a;if(cR!=null){var o=r-cR;vE.push(o)}cR=r},clearMetrics:function(){cR=null,vE=[],X1.clearMeasures("loadTime"),X1.clearMeasures("fullLoadTime");for(var a in Y1)X1.clearMarks(Y1[a])},getPerformanceMetrics:function(){var a=X1.measure("loadTime",Y1.create,Y1.load).duration,r=X1.measure("fullLoadTime",Y1.create,Y1.fullLoad).duration,o=vE.length,u=vE.reduce(function(y,S){return y+S},0)/o/1e3,c=1/u,p=vE.filter(function(y){return y>y5}).reduce(function(y,S){return y+(S-y5)/y5},0),g=p/(o+p)*100;return{loadTime:a,fullLoadTime:r,fps:c,percentDroppedFrames:g}}};function r6(e,a){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c7(e))||a&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(S){throw S},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return c=S.done,S},e:function(S){p=!0,g=S},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function c7(e,a){if(e){if(typeof e=="string")return n6(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n6(e,a)}}function n6(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,o=new Array(a);r<a;r++)o[r]=e[r];return o}var f7=function(){function e(){(0,Ot.Z)(this,e),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,ot.Z)(e,[{key:"add",value:function(r){var o=++this.id,u=this.queue;return u.push({callback:r,id:o,cancelled:!1}),o}},{key:"remove",value:function(r){var o=this.currentlyRunning,u=o?this.queue.concat(o):this.queue,c=r6(u),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;if(g.id===r){g.cancelled=!0;return}}}catch(y){c.e(y)}finally{c.f()}}},{key:"run",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=this.currentlyRunning=this.queue;this.queue=[];var u=r6(o),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;if(!p.cancelled&&(p.callback(r),this.cleared))break}}catch(g){u.e(g)}finally{u.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),e}(),h7=f7;function aj(e){var a=p7();return function(){var o=_getPrototypeOf(e),u;if(a){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function p7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d7(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}d7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var v7=-2,g7=22,oj=Ca.merge,m7=0,y7=60,sj={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:v7,maxZoom:g7,minPitch:m7,maxPitch:y7,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},uj=null,_7=Ca.throttle,x7=function(){function e(a){var r=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"onHashChange",function(){var o=r.getCurrentHash();if(o.length>=3&&!o.some(function(c){return isNaN(+c)})){var u=r.map.dragRotate.isEnabled()&&r.map.touchZoomRotate.isEnabled()?+(o[3]||0):r.map.getBearing();return r.map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1}),(0,He.Z)(this,"getCurrentHash",function(){var o=window.location.hash.replace("#","");if(r.hashName){var u;return o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===r.hashName&&(u=c)}),(u&&u[1]||"").split("/")}return o.split("/")}),(0,He.Z)(this,"updateHashUnthrottled",function(){var o=r.getHashString();try{window.history.replaceState(window.history.state,"",o)}catch(u){}}),this.hashName=a&&encodeURIComponent(a),this.updateHash=_7(this.updateHashUnthrottled,30*1e3/100)}return(0,ot.Z)(e,[{key:"addTo",value:function(r){return this.map=r,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(r){var o=this.map.getCenter(),u=Math.round(this.map.getZoom()*100)/100,c=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,c),g=Math.round(o.lng*p)/p,y=Math.round(o.lat*p)/p,S=this.map.getBearing(),O=this.map.getPitch(),L="";if(r?L+="/".concat(g,"/").concat(y,"/").concat(u):L+="".concat(u,"/").concat(y,"/").concat(g),(S||O)&&(L+="/".concat(Math.round(S*10)/10)),O&&(L+="/".concat(Math.round(O))),this.hashName){var V=this.hashName,G=!1,he=window.location.hash.slice(1).split("&").map(function(ve){var Pe=ve.split("=")[0];return Pe===V?(G=!0,"".concat(Pe,"=").concat(L)):ve}).filter(function(ve){return ve});return G||he.push("".concat(V,"=").concat(L)),"#".concat(he.join("&"))}return"#".concat(L)}}]),e}(),b7=x7;function S7(e){var a=E7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function E7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w7(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}w7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`),function(){if(typeof window.CustomEvent=="function")return!1;function e(a,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(a,r.bubbles,r.cancelable,r.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}();var fR=-2,i6=22,a6=Ca.merge,K1=0,hR=60,C7={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:fR,maxZoom:i6,minPitch:K1,maxPitch:hR,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},T7=function(e){(0,yr.Z)(r,e);var a=S7(r);function r(o){var u;(0,Ot.Z)(this,r),u=a.call(this,a6({},C7,o)),(0,He.Z)((0,wr.Z)(u),"renderTaskQueue",new h7),(0,He.Z)((0,wr.Z)(u),"trackResize",!0),(0,He.Z)((0,wr.Z)(u),"onWindowOnline",function(){u.update()}),(0,He.Z)((0,wr.Z)(u),"onWindowResize",function(p){u.trackResize&&u.resize({originalEvent:p}).update()}),u.initContainer(),u.resize(),u.handlers=new u7((0,wr.Z)(u),u.options),typeof window!="undefined"&&(window.addEventListener("online",u.onWindowOnline,!1),window.addEventListener("resize",u.onWindowResize,!1),window.addEventListener("orientationchange",u.onWindowResize,!1));var c=typeof o.hash=="string"&&o.hash||void 0;return o.hash&&(u.hash=new b7(c).addTo((0,wr.Z)(u))),(!u.hash||!u.hash.onHashChange())&&(u.jumpTo({center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),o.bounds&&(u.resize(),u.fitBounds(o.bounds,a6({},o.fitBoundsOptions,{duration:0})))),u}return(0,ot.Z)(r,[{key:"resize",value:function(u){var c=this.containerDimensions(),p=(0,ji.Z)(c,2),g=p[0],y=p[1];this.transform.resize(g,y);var S=!this.moving;return S&&(this.stop(),this.emit("movestart",new window.CustomEvent("movestart",u)),this.emit("move",new window.CustomEvent("move",u))),this.emit("resize",new window.CustomEvent("resize",u)),S&&this.emit("moveend",new window.CustomEvent("moveend",u)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(u){return this.transform.locationPoint(Ou.convert(u))}},{key:"unproject",value:function(u){return this.transform.pointLocation(ns.convert(u))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(u){this.transform.setMaxBounds(Uy.convert(u))}},{key:"setStyle",value:function(u){}},{key:"setMinZoom",value:function(u){if(u=u==null?fR:u,u>=fR&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between ".concat(fR," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(u){if(u=u==null?i6:u,u>=this.transform.minZoom)return this.transform.maxZoom=u,this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(u){if(u=u==null?K1:u,u<K1)throw new Error("minPitch must be greater than or equal to ".concat(K1));if(u>=K1&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between ".concat(K1," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(u){if(u=u==null?hR:u,u>hR)throw new Error("maxPitch must be less than or equal to ".concat(hR));if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(u){this.transform.renderWorldCopies=!!u}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(u){return this.update(),this.renderTaskQueue.add(u)}},{key:"cancelRenderFrame",value:function(u){return this.renderTaskQueue.remove(u)}},{key:"triggerRepaint",value:function(){var u=this;this.frame||(this.frame=eR(function(c){t6.frame(c),u.frame=null,u.update(c)}))}},{key:"update",value:function(u){var c=this;this.frame||(this.frame=eR(function(p){t6.frame(p),c.frame=null,c.renderTaskQueue.run(u)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var u=this.container;u.classList.add("l7-map");var c=this.canvasContainer=Zs("div","l7-canvas-container",u);this.options.interactive&&c.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var u=0,c=0;return this.container&&(u=this.container.clientWidth,c=this.container.clientHeight,u=u===0?400:u,c=c===0?300:c),[u,c]}}]),r}(ia),A7={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},o6,s6,u6,l6,c6,f6,q1,h6,p6,d6,v6,g6={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},M7=12,m6=(o6=(0,mt.b2)(),s6=(0,mt.f3)(Ct.MapConfig),u6=(0,mt.f3)(Ct.IGlobalConfigService),l6=(0,mt.f3)(Ct.ICoordinateSystemService),c6=(0,mt.f3)(Ct.IEventEmitter),o6(f6=(q1=function(){function e(){var a=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"version","DEFAUlTMAP"),(0,He.Z)(this,"simpleMapCoord",new AM),(0,He.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),na(this,"config",h6,this),na(this,"configService",p6,this),na(this,"coordinateSystemService",d6,this),na(this,"eventEmitter",v6,this),(0,He.Z)(this,"handleCameraChanged",function(r){var o=a.map.getCenter(),u=o.lat,c=o.lng;a.emit("mapchange"),a.viewport.syncWithMapCamera({bearing:a.map.getBearing(),center:[c,u],viewportHeight:a.map.transform.height,pitch:a.map.getPitch(),viewportWidth:a.map.transform.width,zoom:a.map.getZoom(),cameraHeight:0}),a.updateCoordinateSystemService(),a.cameraChangedCallback(a.viewport)})}return(0,ot.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getCanvasContainer();this.markerContainer=Zs("div","l7-marker-container",r),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(r,o){jm.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(g6[r]||r,o)}},{key:"off",value:function(r,o){this.map.off(g6[r]||r,o),this.eventEmitter.off(r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();var r=this.map.transform;return[r.width,r.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(r){return this.map.setZoom(r)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(r){this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(r){this.map.setBearing(r)}},{key:"zoomIn",value:function(r,o){this.map.zoomIn(r,o)}},{key:"zoomOut",value:function(r,o){this.map.zoomOut(r,o)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy([r,o])}},{key:"fitBounds",value:function(r,o){this.map.fitBounds(r,o)}},{key:"setMaxZoom",value:function(r){this.map.setMaxZoom(r)}},{key:"setMinZoom",value:function(r){this.map.setMinZoom(r)}},{key:"setMapStatus",value:function(r){r.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),r.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),r.dragEnable===!1&&this.map.dragPan.disable(),r.dragEnable===!0&&this.map.dragPan.enable(),r.rotateEnable===!1&&this.map.dragRotate.disable(),r.dragEnable===!0&&this.map.dragRotate.enable(),r.keyboardEnable===!1&&this.map.keyboard.disable(),r.keyboardEnable===!0&&this.map.keyboard.enable(),r.zoomEnable===!1&&this.map.scrollZoom.disable(),r.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(r,o){this.map.flyTo({zoom:r,center:o})}},{key:"setMapStyle",value:function(r){this.map.setStyle(this.getMapStyleValue(r))}},{key:"meterToCoord",value:function(r,o){return 1}},{key:"pixelToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToPixel",value:function(r){return this.map.project(r)}},{key:"containerToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToContainer",value:function(r){return this.map.project(r)}},{key:"getMapStyle",value:function(){try{var r,o=(r=this.map.getStyle().sprite)!==null&&r!==void 0?r:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(o)?o==null?void 0:o.replace(/\/\w+$/,"").replace(/sprites/,"styles"):o}catch(u){return""}}},{key:"getMapStyleConfig",value:function(){return A7}},{key:"getMapStyleValue",value:function(r){var o;return(o=this.getMapStyleConfig()[r])!==null&&o!==void 0?o:r}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(r){var o=this.map.getCanvas(),u=r==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"creatMapContainer",value:function(r){var o=r;return typeof r=="string"&&(o=document.getElementById(r)),o}},{key:"updateView",value:function(r){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:r.bearing,center:r.center,viewportHeight:r.viewportHeight,pitch:r.pitch,viewportWidth:r.viewportWidth,zoom:r.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var r=this.config.offsetCoordinate,o=r===void 0?!0:r;this.viewport.getZoom()>M7&&o?this.coordinateSystemService.setCoordinateSystem(Lc.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Lc.LNGLAT)}}]),e}(),h6=Fa(q1.prototype,"config",[s6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p6=Fa(q1.prototype,"configService",[u6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d6=Fa(q1.prototype,"coordinateSystemService",[l6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v6=Fa(q1.prototype,"eventEmitter",[c6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q1))||f6),R7=["id","style","rotation","mapInstance","version","mapSize","interactive"],y6,_6;function I7(e){var a=P7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function P7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var O7=(y6=(0,mt.b2)(),y6(_6=function(e){(0,yr.Z)(r,e);var a=I7(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"version",Mc.DEFAULT),o}return(0,ot.Z)(r,[{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=vt.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,S=p.y,O=S===void 0?0:S,L=p.z,V=L===void 0?0:L;return{x:y,y:O,z:V}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},S=vt.fromLngLat(u,c),O=S.meterInMercatorCoordinateUnits(),L=Js();return Pu(L,L,_a.fromValues(S.x-y.x,S.y-y.y,S.z||0-y.z)),dc(L,L,_a.fromValues(O*g[0],-O*g[1],O*g[2])),Np(L,L,p[0]),Ya(L,L,p[1]),kc(L,L,p[2]),L}},{key:"init",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this,g,y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t,zt,Xt;return er().wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,O=g.style,L=O===void 0?"light":O,V=g.rotation,G=V===void 0?0:V,he=g.mapInstance,ve=g.version,Pe=ve===void 0?"DEFAULTMAP":ve,Xe=g.mapSize,gt=Xe===void 0?1e4:Xe,_t=g.interactive,zt=_t===void 0?!0:_t,Xt=(0,Sf.Z)(g,R7),this.viewport=new TM,this.version=Pe,this.simpleMapCoord.setSize(gt),Pe==="SIMPLE"&&Xt.center&&(Xt.center=this.simpleMapCoord.unproject(Xt.center)),he?(this.map=he,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(S),this.map=new T7((0,ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(L),bearing:G},Xt))),this.map.on("load",function(){p.handleCameraChanged()}),zt&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){p.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return ar.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}}]),r}(m6))||_6);function k7(e){var a=D7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function D7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L7=function(e){(0,yr.Z)(r,e);var a=k7(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getServiceConstructor",value:function(){return O7}}]),r}(qf),F7=k(6158),gE=k.n(F7),B7=function(){function e(){(0,Ot.Z)(this,e)}return(0,ot.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth;this.viewport=new tE({width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),N7=["id","attributionControl","style","token","rotation","mapInstance"],x6,b6;function z7(e){var a=U7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function U7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Z7(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}Z7(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=gE();var V7=0,S6="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",H7=(x6=(0,mt.b2)(),x6(b6=function(e){(0,yr.Z)(r,e);var a=z7(r);function r(){var o;(0,Ot.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=a.call.apply(a,[this].concat(c)),(0,He.Z)((0,wr.Z)(o),"version","MAPBOX"),o}return(0,ot.Z)(r,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,S=p.y,O=S===void 0?0:S,L=p.z,V=L===void 0?0:L;return{x:y,y:O,z:V}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},S=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),O=S.meterInMercatorCoordinateUnits(),L=Js();return Pu(L,L,_a.fromValues(S.x-y.x,S.y-y.y,S.z||0-y.z)),dc(L,L,_a.fromValues(O*g[0],-O*g[1],O*g[2])),Np(L,L,p[0]),Ya(L,L,p[1]),kc(L,L,p[2]),L}},{key:"init",value:function(){var o=(0,Sn.Z)(er().mark(function c(){var p=this,g,y,S,O,L,V,G,he,ve,Pe,Xe,gt,_t;return er().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:g=this.config,y=g.id,S=y===void 0?"map":y,O=g.attributionControl,L=O===void 0?!1:O,V=g.style,G=V===void 0?"light":V,he=g.token,ve=he===void 0?S6:he,Pe=g.rotation,Xe=Pe===void 0?0:Pe,gt=g.mapInstance,_t=(0,Sf.Z)(g,N7),this.viewport=new B7,!gt&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),ve===S6&&G!=="blank"&&!window.mapboxgl.accessToken&&!gt&&console.warn(this.configService.getSceneWarninfo("MapToken")),!gt&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=ve),gt?(this.map=gt,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(S),this.map=new window.mapboxgl.Map((0,ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(G),attributionControl:L,bearing:Xe},_t))),this.map.on("load",function(){p.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Xt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"destroy",value:function(){var u;(u=this.$mapContainer)===null||u===void 0||(u=u.parentNode)===null||u===void 0||u.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).emit.apply(c,[u].concat(g))}},{key:"once",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).once.apply(c,[u].concat(g))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(u,c){var p=new(gE()).LngLat(u[0],u[1]),g=new(gE()).LngLat(c[0],c[1]),y=p.distanceTo(g),S=gE().MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]}),O=gE().MercatorCoordinate.fromLngLat({lng:c[0],lat:c[1]}),L=S.x,V=S.y,G=O.x,he=O.y,ve=Math.sqrt(Math.pow(L-G,2)+Math.pow(V-he,2))*4194304*2;return ve/y}},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}},{key:"creatMapContainer",value:function(u){var c=u;typeof u=="string"&&(c=document.getElementById(u));var p=document.createElement("div");return p.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,p.id="l7_mapbox_div"+V7++,c.appendChild(p),p}}]),r}(m6))||b6);function j7(e){var a=W7();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function W7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function G7(e,a){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(a||(a=document),!!a)){var u=a.head||a.getElementsByTagName("head")[0];if(!u){u=a.createElement("head");var c=a.body||a.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):a.documentElement.appendChild(u)}var p=a.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(a.createTextNode(e)),u.appendChild(p),p}}G7(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var $7=function(e){(0,yr.Z)(r,e);var a=j7(r);function r(){return(0,Ot.Z)(this,r),a.apply(this,arguments)}return(0,ot.Z)(r,[{key:"getServiceConstructor",value:function(){return H7}}]),r}(qf),lj=k(31857),X7=k(36556),Y7=k.n(X7),K7=function(){function e(a,r){(0,Ot.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor;this.buffer=o,this.attribute={buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,ot.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),om,mE,g0,Bd,yE,m0,_E,pR,lg,jy,Af,cg,fg,dR,q7=(om={},(0,He.Z)(om,Rt.POINTS,"points"),(0,He.Z)(om,Rt.LINES,"lines"),(0,He.Z)(om,Rt.LINE_LOOP,"line loop"),(0,He.Z)(om,Rt.LINE_STRIP,"line strip"),(0,He.Z)(om,Rt.TRIANGLES,"triangles"),(0,He.Z)(om,Rt.TRIANGLE_FAN,"triangle fan"),(0,He.Z)(om,Rt.TRIANGLE_STRIP,"triangle strip"),om),E6=(mE={},(0,He.Z)(mE,Rt.STATIC_DRAW,"static"),(0,He.Z)(mE,Rt.DYNAMIC_DRAW,"dynamic"),(0,He.Z)(mE,Rt.STREAM_DRAW,"stream"),mE),_5=(g0={},(0,He.Z)(g0,Rt.BYTE,"int8"),(0,He.Z)(g0,Rt.INT,"int32"),(0,He.Z)(g0,Rt.UNSIGNED_BYTE,"uint8"),(0,He.Z)(g0,Rt.UNSIGNED_SHORT,"uint16"),(0,He.Z)(g0,Rt.UNSIGNED_INT,"uint32"),(0,He.Z)(g0,Rt.FLOAT,"float"),g0),Q7=(Bd={},(0,He.Z)(Bd,Rt.ALPHA,"alpha"),(0,He.Z)(Bd,Rt.LUMINANCE,"luminance"),(0,He.Z)(Bd,Rt.LUMINANCE_ALPHA,"luminance alpha"),(0,He.Z)(Bd,Rt.RGB,"rgb"),(0,He.Z)(Bd,Rt.RGBA,"rgba"),(0,He.Z)(Bd,Rt.RGBA4,"rgba4"),(0,He.Z)(Bd,Rt.RGB5_A1,"rgb5 a1"),(0,He.Z)(Bd,Rt.RGB565,"rgb565"),(0,He.Z)(Bd,Rt.DEPTH_COMPONENT,"depth"),(0,He.Z)(Bd,Rt.DEPTH_STENCIL,"depth stencil"),Bd),J7=(yE={},(0,He.Z)(yE,Rt.DONT_CARE,"dont care"),(0,He.Z)(yE,Rt.NICEST,"nice"),(0,He.Z)(yE,Rt.FASTEST,"fast"),yE),w6=(m0={},(0,He.Z)(m0,Rt.NEAREST,"nearest"),(0,He.Z)(m0,Rt.LINEAR,"linear"),(0,He.Z)(m0,Rt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,He.Z)(m0,Rt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,He.Z)(m0,Rt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,He.Z)(m0,Rt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),m0),C6=(_E={},(0,He.Z)(_E,Rt.REPEAT,"repeat"),(0,He.Z)(_E,Rt.CLAMP_TO_EDGE,"clamp"),(0,He.Z)(_E,Rt.MIRRORED_REPEAT,"mirror"),_E),ez=(pR={},(0,He.Z)(pR,Rt.NONE,"none"),(0,He.Z)(pR,Rt.BROWSER_DEFAULT_WEBGL,"browser"),pR),tz=(lg={},(0,He.Z)(lg,Rt.NEVER,"never"),(0,He.Z)(lg,Rt.ALWAYS,"always"),(0,He.Z)(lg,Rt.LESS,"less"),(0,He.Z)(lg,Rt.LEQUAL,"lequal"),(0,He.Z)(lg,Rt.GREATER,"greater"),(0,He.Z)(lg,Rt.GEQUAL,"gequal"),(0,He.Z)(lg,Rt.EQUAL,"equal"),(0,He.Z)(lg,Rt.NOTEQUAL,"notequal"),lg),T6=(jy={},(0,He.Z)(jy,Rt.FUNC_ADD,"add"),(0,He.Z)(jy,Rt.MIN_EXT,"min"),(0,He.Z)(jy,Rt.MAX_EXT,"max"),(0,He.Z)(jy,Rt.FUNC_SUBTRACT,"subtract"),(0,He.Z)(jy,Rt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),jy),vR=(Af={},(0,He.Z)(Af,Rt.ZERO,"zero"),(0,He.Z)(Af,Rt.ONE,"one"),(0,He.Z)(Af,Rt.SRC_COLOR,"src color"),(0,He.Z)(Af,Rt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,He.Z)(Af,Rt.SRC_ALPHA,"src alpha"),(0,He.Z)(Af,Rt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,He.Z)(Af,Rt.DST_COLOR,"dst color"),(0,He.Z)(Af,Rt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,He.Z)(Af,Rt.DST_ALPHA,"dst alpha"),(0,He.Z)(Af,Rt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,He.Z)(Af,Rt.CONSTANT_COLOR,"constant color"),(0,He.Z)(Af,Rt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,He.Z)(Af,Rt.CONSTANT_ALPHA,"constant alpha"),(0,He.Z)(Af,Rt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,He.Z)(Af,Rt.SRC_ALPHA_SATURATE,"src alpha saturate"),Af),rz=(cg={},(0,He.Z)(cg,Rt.NEVER,"never"),(0,He.Z)(cg,Rt.ALWAYS,"always"),(0,He.Z)(cg,Rt.LESS,"less"),(0,He.Z)(cg,Rt.LEQUAL,"lequal"),(0,He.Z)(cg,Rt.GREATER,"greater"),(0,He.Z)(cg,Rt.GEQUAL,"gequal"),(0,He.Z)(cg,Rt.EQUAL,"equal"),(0,He.Z)(cg,Rt.NOTEQUAL,"notequal"),cg),Q1=(fg={},(0,He.Z)(fg,Rt.ZERO,"zero"),(0,He.Z)(fg,Rt.KEEP,"keep"),(0,He.Z)(fg,Rt.REPLACE,"replace"),(0,He.Z)(fg,Rt.INVERT,"invert"),(0,He.Z)(fg,Rt.INCR,"increment"),(0,He.Z)(fg,Rt.DECR,"decrement"),(0,He.Z)(fg,Rt.INCR_WRAP,"increment wrap"),(0,He.Z)(fg,Rt.DECR_WRAP,"decrement wrap"),fg),nz=(dR={},(0,He.Z)(dR,Rt.FRONT,"front"),(0,He.Z)(dR,Rt.BACK,"back"),dR),iz=function(){function e(a,r){(0,Ot.Z)(this,e),(0,He.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type;this.buffer=a.buffer({data:o,usage:E6[u||Rt.STATIC_DRAW],type:_5[c||Rt.UNSIGNED_BYTE]})}return(0,ot.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset;this.buffer.subdata(o,u)}}]),e}(),az=function(){function e(a,r){(0,Ot.Z)(this,e);var o=r.data,u=r.usage,c=r.type,p=r.count;this.elements=a.elements({data:o,usage:E6[u||Rt.STATIC_DRAW],type:_5[c||Rt.UNSIGNED_BYTE],count:p})}return(0,ot.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var o=r.data;this.elements.subdata(o)}},{key:"destroy",value:function(){}}]),e}(),oz=function(){function e(a,r){(0,Ot.Z)(this,e);var o=r.width,u=r.height,c=r.color,p=r.colors,g={width:o,height:u};Array.isArray(p)&&(g.colors=p.map(function(y){return y.get()})),c&&typeof c!="boolean"&&(g.color=c.get()),this.framebuffer=a.framebuffer(g)}return(0,ot.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.framebuffer.resize(o,u)}}]),e}(),sz={}.toString,uz=function(e,a){return sz.call(e)==="[object "+a+"]"},lz=uz,cz=function(e){return lz(e,"Number")},J1=cz,fz=function(e){return e==null},y0=fz,hz=function(e,a,r){return e<a?a:e>r?r:e},pz=hz,dz=k(90857),A6=dz,Cr;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Cr||(Cr={}));var ds;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool"})(ds||(ds={}));var cs;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(cs||(cs={}));var xE;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(xE||(xE={}));var fp;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(fp||(fp={}));var No;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(No||(No={}));var Hc;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})(Hc||(Hc={}));var Fh;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Fh||(Fh={}));var xl;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})(xl||(xl={}));var _c;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(_c||(_c={}));var Gl;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})(Gl||(Gl={}));var fu;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(fu||(fu={}));var Mv;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(Mv||(Mv={}));var Wy;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(Wy||(Wy={}));var M6;(function(e){e.LOADED="loaded"})(M6||(M6={}));var Po;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Po||(Po={}));var Jf;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET"})(Jf||(Jf={}));var sf;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(sf||(sf={}));var eh;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(eh||(eh={}));function cj(e,a,r,o){var u=Po.TEXTURE_2D,c=1,p=Jf.SAMPLED;return{dimension:u,format:e,width:a,height:r,depthOrArrayLayers:c,mipLevelCount:o,usage:p}}var ol;(function(e){e[e.Float=0]="Float",e[e.Uint=1]="Uint",e[e.Sint=2]="Sint",e[e.Depth=3]="Depth"})(ol||(ol={}));var ex;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(ex||(ex={}));var tx;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})(tx||(tx={}));var gR;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(gR||(gR={}));var Xn;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(Xn||(Xn={}));var pa;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(pa||(pa={}));function fj(e){return e}var $i;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"})($i||($i={}));function Za(e,a,r){return e<<16|a<<8|r}var Jr;(function(e){e[e.ALPHA=Za(Xn.U8,pa.A,$i.None)]="ALPHA",e[e.U8_LUMINANCE=Za(Xn.U8,pa.A,$i.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=Za(Xn.F16,pa.A,$i.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=Za(Xn.F32,pa.A,$i.Luminance)]="F32_LUMINANCE",e[e.F16_R=Za(Xn.F16,pa.R,$i.None)]="F16_R",e[e.F16_RG=Za(Xn.F16,pa.RG,$i.None)]="F16_RG",e[e.F16_RGB=Za(Xn.F16,pa.RGB,$i.None)]="F16_RGB",e[e.F16_RGBA=Za(Xn.F16,pa.RGBA,$i.None)]="F16_RGBA",e[e.F32_R=Za(Xn.F32,pa.R,$i.None)]="F32_R",e[e.F32_RG=Za(Xn.F32,pa.RG,$i.None)]="F32_RG",e[e.F32_RGB=Za(Xn.F32,pa.RGB,$i.None)]="F32_RGB",e[e.F32_RGBA=Za(Xn.F32,pa.RGBA,$i.None)]="F32_RGBA",e[e.U8_R=Za(Xn.U8,pa.R,$i.None)]="U8_R",e[e.U8_R_NORM=Za(Xn.U8,pa.R,$i.Normalized)]="U8_R_NORM",e[e.U8_RG=Za(Xn.U8,pa.RG,$i.None)]="U8_RG",e[e.U8_RG_NORM=Za(Xn.U8,pa.RG,$i.Normalized)]="U8_RG_NORM",e[e.U8_RGB=Za(Xn.U8,pa.RGB,$i.None)]="U8_RGB",e[e.U8_RGB_NORM=Za(Xn.U8,pa.RGB,$i.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=Za(Xn.U8,pa.RGB,$i.sRGB|$i.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=Za(Xn.U8,pa.RGBA,$i.None)]="U8_RGBA",e[e.U8_RGBA_NORM=Za(Xn.U8,pa.RGBA,$i.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=Za(Xn.U8,pa.RGBA,$i.sRGB|$i.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=Za(Xn.U16,pa.R,$i.None)]="U16_R",e[e.U16_R_NORM=Za(Xn.U16,pa.R,$i.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=Za(Xn.U16,pa.RG,$i.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=Za(Xn.U16,pa.RGBA,$i.Normalized)]="U16_RGBA_NORM",e[e.U16_RGB=Za(Xn.U16,pa.RGB,$i.None)]="U16_RGB",e[e.U32_R=Za(Xn.U32,pa.R,$i.None)]="U32_R",e[e.U32_RG=Za(Xn.U32,pa.RG,$i.None)]="U32_RG",e[e.S8_R=Za(Xn.S8,pa.R,$i.None)]="S8_R",e[e.S8_R_NORM=Za(Xn.S8,pa.R,$i.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=Za(Xn.S8,pa.RG,$i.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=Za(Xn.S8,pa.RGB,$i.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=Za(Xn.S8,pa.RGBA,$i.Normalized)]="S8_RGBA_NORM",e[e.S16_R=Za(Xn.S16,pa.R,$i.None)]="S16_R",e[e.S16_RG=Za(Xn.S16,pa.RG,$i.None)]="S16_RG",e[e.S16_RG_NORM=Za(Xn.S16,pa.RG,$i.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=Za(Xn.S16,pa.RGB,$i.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=Za(Xn.S16,pa.RGBA,$i.None)]="S16_RGBA",e[e.S16_RGBA_NORM=Za(Xn.S16,pa.RGBA,$i.Normalized)]="S16_RGBA_NORM",e[e.S32_R=Za(Xn.S32,pa.R,$i.None)]="S32_R",e[e.U16_RGBA_5551=Za(Xn.U16_PACKED_5551,pa.RGBA,$i.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=Za(Xn.U16_PACKED_565,pa.RGB,$i.Normalized)]="U16_RGB_565",e[e.BC1=Za(Xn.BC1,pa.RGBA,$i.Normalized)]="BC1",e[e.BC1_SRGB=Za(Xn.BC1,pa.RGBA,$i.Normalized|$i.sRGB)]="BC1_SRGB",e[e.BC2=Za(Xn.BC2,pa.RGBA,$i.Normalized)]="BC2",e[e.BC2_SRGB=Za(Xn.BC2,pa.RGBA,$i.Normalized|$i.sRGB)]="BC2_SRGB",e[e.BC3=Za(Xn.BC3,pa.RGBA,$i.Normalized)]="BC3",e[e.BC3_SRGB=Za(Xn.BC3,pa.RGBA,$i.Normalized|$i.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=Za(Xn.BC4_UNORM,pa.R,$i.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=Za(Xn.BC4_SNORM,pa.R,$i.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=Za(Xn.BC5_UNORM,pa.RG,$i.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=Za(Xn.BC5_SNORM,pa.RG,$i.Normalized)]="BC5_SNORM",e[e.D24=Za(Xn.D24,pa.R,$i.Depth)]="D24",e[e.D24_S8=Za(Xn.D24S8,pa.RG,$i.Depth|$i.Stencil)]="D24_S8",e[e.D32F=Za(Xn.D32F,pa.R,$i.Depth)]="D32F",e[e.D32F_S8=Za(Xn.D32FS8,pa.RG,$i.Depth|$i.Stencil)]="D32F_S8",e[e.U8_RGB_RT=Za(Xn.U8,pa.RGB,$i.RenderTarget|$i.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=Za(Xn.U8,pa.RGBA,$i.RenderTarget|$i.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=Za(Xn.U8,pa.RGBA,$i.RenderTarget|$i.Normalized|$i.sRGB)]="U8_RGBA_RT_SRGB"})(Jr||(Jr={}));function mR(e){return e>>>8&255}function hg(e){return e>>>16&255}function rx(e){return e&255}function R6(e){switch(e){case Xn.F32:case Xn.U32:case Xn.S32:return 4;case Xn.U16:case Xn.S16:case Xn.F16:return 2;case Xn.U8:case Xn.S8:return 1;default:throw new Error("whoops")}}function I6(e){return R6(hg(e))}function hj(e){return mR(e)}function vz(e){var a=R6(hg(e)),r=mR(e);return a*r}function pj(e,a){return e&4294967040|a}function dj(e,a){return e&4294902015|a<<8}function P6(e){var a=rx(e);if(a&$i.Depth)return ol.Depth;if(a&$i.Normalized)return ol.Float;var r=hg(e);if(r===Xn.F16||r===Xn.F32)return ol.Float;if(r===Xn.U8||r===Xn.U16||r===Xn.U32)return ol.Uint;if(r===Xn.S8||r===Xn.S16||r===Xn.S32)return ol.Sint;throw new Error("whoops")}function yo(e,a){if(a===void 0&&(a=""),!e)throw new Error("Assert fail: ".concat(a))}function Gy(e){if(e!=null)return e;throw new Error("Missing object")}function O6(e,a){return e.r===a.r&&e.g===a.g&&e.b===a.b&&e.a===a.a}function k6(e,a){e.r=a.r,e.g=a.g,e.b=a.b,e.a=a.a}function D6(e){var a=e.r,r=e.g,o=e.b,u=e.a;return{r:a,g:r,b:o,a:u}}function bE(e,a,r,o){return o===void 0&&(o=1),{r:e,g:a,b:r,a:o}}var x5=bE(0,0,0,0),vj=bE(0,0,0,1),gz=bE(1,1,1,0),gj=bE(1,1,1,1),nx=!0;function mj(e,a){a===void 0&&(a=nx),a&&(e[10]=-e[10],e[14]=-e[14])}function yj(e,a){a===void 0&&(a=nx),a&&(e[10]=-e[10],e[14]=-e[14]+1)}function mz(e,a){if(a===void 0&&(a=nx),a)switch(e){case cs.LESS:return cs.GREATER;case cs.LEQUAL:return cs.GEQUAL;case cs.GEQUAL:return cs.LEQUAL;case cs.GREATER:return cs.LESS;default:return e}else return e}function _j(e,a){return a===void 0&&(a=nx),a?1-e:e}function xj(e,a){return a===void 0&&(a=nx),a?-e:e}function bj(e,a,r,o){if(o===void 0&&(o=nx),r=mz(r,o),r===cs.LESS)return e<a;if(r===cs.LEQUAL)return e<=a;if(r===cs.GREATER)return e>a;if(r===cs.GEQUAL)return e>=a;throw new Error("whoops")}function yR(e){return!!(e&&!(e&e-1))}function ix(e,a){return e!=null?e:a}function yz(e){return e===void 0?null:e}function Sj(e,a,r){e.length=a,e.fill(r)}function _R(e,a){var r=a-1;return e+r&~r}function Ej(e,a){return((e+a-1)/a|0)*a}function _z(e,a,r){for(var o=0,u=e.length;o<u;){var c=o+(u-o>>>1),p=r(a,e[c]);p<0?u=c:o=c+1}return o}function wj(e,a,r){var o=_z(e,a,r);e.splice(o,0,a)}function Cj(e,a,r){return r?e|=a:e&=~a,e}function xz(e,a){for(var r=new Array(e),o=0;o<e;o++)r[o]=a();return r}function bz(e,a){a===void 0&&(a=1);var r=e.split(`
`);return r.map(function(o,u){return"".concat(Sz(""+(a+u),4," "),"  ").concat(o)}).join(`
`)}function Sz(e,a,r){for(r===void 0&&(r="0");e.length<a;)e="".concat(r).concat(e);return e}function Tj(e,a){for(var r=[],o=e;o<e+a;o++)r.push(o);return r}function L6(e,a){e.blendDstFactor=a.blendDstFactor,e.blendSrcFactor=a.blendSrcFactor,e.blendMode=a.blendMode}function xR(e,a){return e===void 0&&(e={}),e.compare=a.compare,e.depthFailOp=a.depthFailOp,e.passOp=a.passOp,e.failOp=a.failOp,e}function F6(e,a){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),L6(e.rgbBlendState,a.rgbBlendState),L6(e.alphaBlendState,a.alphaBlendState),e.channelWriteMask=a.channelWriteMask,e}function b5(e,a){e.length!==a.length&&(e.length=a.length);for(var r=0;r<a.length;r++)e[r]=F6(e[r],a[r])}function Ez(e,a){a.attachmentsState!==void 0&&b5(e.attachmentsState,a.attachmentsState),e.blendConstant&&a.blendConstant&&k6(e.blendConstant,a.blendConstant),e.depthCompare=ix(a.depthCompare,e.depthCompare),e.depthWrite=ix(a.depthWrite,e.depthWrite),e.stencilWrite=ix(a.stencilWrite,e.stencilWrite),e.stencilFront&&a.stencilFront&&xR(e.stencilFront,a.stencilFront),e.stencilBack&&a.stencilBack&&xR(e.stencilBack,a.stencilBack),e.cullMode=ix(a.cullMode,e.cullMode),e.frontFace=ix(a.frontFace,e.frontFace),e.polygonOffset=ix(a.polygonOffset,e.polygonOffset)}function ax(e){var a=Object.assign({},e);return a.attachmentsState=[],b5(a.attachmentsState,e.attachmentsState),a.blendConstant=a.blendConstant&&D6(a.blendConstant),a.stencilFront=xR(void 0,e.stencilFront),a.stencilBack=xR(void 0,e.stencilBack),a}function wz(e,a){a.channelWriteMask!==void 0&&(e.channelWriteMask=a.channelWriteMask),a.rgbBlendMode!==void 0&&(e.rgbBlendState.blendMode=a.rgbBlendMode),a.alphaBlendMode!==void 0&&(e.alphaBlendState.blendMode=a.alphaBlendMode),a.rgbBlendSrcFactor!==void 0&&(e.rgbBlendState.blendSrcFactor=a.rgbBlendSrcFactor),a.alphaBlendSrcFactor!==void 0&&(e.alphaBlendState.blendSrcFactor=a.alphaBlendSrcFactor),a.rgbBlendDstFactor!==void 0&&(e.rgbBlendState.blendDstFactor=a.rgbBlendDstFactor),a.alphaBlendDstFactor!==void 0&&(e.alphaBlendState.blendDstFactor=a.alphaBlendDstFactor)}var B6={blendMode:Hc.ADD,blendSrcFactor:No.ONE,blendDstFactor:No.ZERO},$y={attachmentsState:[{channelWriteMask:sf.ALL,rgbBlendState:B6,alphaBlendState:B6}],blendConstant:D6(x5),depthWrite:!0,depthCompare:cs.LEQUAL,stencilWrite:!1,stencilFront:{compare:cs.ALWAYS,passOp:eh.KEEP,depthFailOp:eh.KEEP,failOp:eh.KEEP},stencilBack:{compare:cs.ALWAYS,passOp:eh.KEEP,depthFailOp:eh.KEEP,failOp:eh.KEEP},cullMode:fp.NONE,frontFace:xE.CCW,polygonOffset:!1};function Cz(e,a){e===void 0&&(e=null),a===void 0&&(a=$y);var r=ax(a);return e!==null&&Ez(r,e),r}var Aj=Cz({depthCompare:cs.ALWAYS,depthWrite:!1},$y);function Mj(e,a){return e.attachmentsState===void 0&&(e.attachmentsState=[],b5(e.attachmentsState,$y.attachmentsState)),wz(e.attachmentsState[0],a),e}var N6={texture:null,sampler:null,formatKind:ol.Float,dimension:Po.TEXTURE_2D};function ox(e,a,r){if(e.length!==a.length)return!1;for(var o=0;o<e.length;o++)if(!r(e[o],a[o]))return!1;return!0}function SE(e,a){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=a(e[o]);return r}function Tz(e,a){return e.buffer===a.buffer&&e.size===a.size&&e.binding===a.binding&&e.offset===a.offset}function Az(e,a){return e===null?a===null:a===null?!1:e.sampler===a.sampler&&e.texture===a.texture&&e.dimension===a.dimension&&e.formatKind===a.formatKind&&e.comparison===a.comparison}function Rj(e,a){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],!(e.samplerBindings.length!==a.samplerBindings.length||!ox(e.samplerBindings,a.samplerBindings,Az)||!ox(e.uniformBufferBindings,a.uniformBufferBindings,Tz))}function z6(e,a){return e.blendMode==a.blendMode&&e.blendSrcFactor===a.blendSrcFactor&&e.blendDstFactor===a.blendDstFactor}function Mz(e,a){return!(!z6(e.rgbBlendState,a.rgbBlendState)||!z6(e.alphaBlendState,a.alphaBlendState)||e.channelWriteMask!==a.channelWriteMask)}function bR(e,a){return e.compare==a.compare&&e.depthFailOp===a.depthFailOp&&e.failOp===a.failOp&&e.passOp===a.passOp}function Rz(e,a){return!ox(e.attachmentsState,a.attachmentsState,Mz)||e.blendConstant&&a.blendConstant&&!O6(e.blendConstant,a.blendConstant)||e.stencilFront&&a.stencilFront&&!bR(e.stencilFront,a.stencilFront)||e.stencilBack&&a.stencilBack&&!bR(e.stencilBack,a.stencilBack)?!1:e.depthCompare===a.depthCompare&&e.depthWrite===a.depthWrite&&e.stencilWrite===a.stencilWrite&&e.cullMode===a.cullMode&&e.frontFace===a.frontFace&&e.polygonOffset===a.polygonOffset}function U6(e,a){return e.id===a.id}function Iz(e,a){return e===a}function Ij(e,a){return!(e.topology!==a.topology||e.inputLayout!==a.inputLayout||e.sampleCount!==a.sampleCount||e.megaStateDescriptor&&a.megaStateDescriptor&&!Rz(e.megaStateDescriptor,a.megaStateDescriptor)||!U6(e.program,a.program)||!ox(e.colorAttachmentFormats,a.colorAttachmentFormats,Iz)||e.depthStencilAttachmentFormat!==a.depthStencilAttachmentFormat)}function Pz(e,a){return e.offset===a.offset&&e.shaderLocation===a.shaderLocation&&e.format===a.format&&e.divisor===a.divisor}function Oz(e,a){return isNil(e)?isNil(a):isNil(a)?!1:e.arrayStride===a.arrayStride&&e.stepMode===a.stepMode&&ox(e.attributes,a.attributes,Pz)}function Pj(e,a){return!(e.indexBufferFormat!==a.indexBufferFormat||!ox(e.vertexBufferDescriptors,a.vertexBufferDescriptors,Oz)||!U6(e.program,a.program))}function Oj(e,a){return e.addressModeU===a.addressModeU&&e.addressModeV===a.addressModeV&&e.minFilter===a.minFilter&&e.magFilter===a.magFilter&&e.mipmapFilter===a.mipmapFilter&&e.lodMinClamp===a.lodMinClamp&&e.lodMaxClamp===a.lodMaxClamp&&e.maxAnisotropy===a.maxAnisotropy&&e.compareFunction===a.compareFunction}function kz(e){var a=e.sampler,r=e.texture,o=e.dimension,u=e.formatKind,c=e.comparison;return{sampler:a,texture:r,dimension:o,formatKind:u,comparison:c}}function Z6(e){var a=e.buffer,r=e.size,o=e.binding,u=e.offset;return{binding:o,buffer:a,offset:u,size:r}}function kj(e){var a=e.samplerBindings&&SE(e.samplerBindings,kz),r=e.uniformBufferBindings&&SE(e.uniformBufferBindings,Z6),o=e.storageBufferBindings&&SE(e.storageBufferBindings,Z6);return{samplerBindings:a,uniformBufferBindings:r,storageBufferBindings:o,pipeline:e.pipeline}}function Dj(e){var a=e.inputLayout,r=e.program,o=e.topology,u=e.megaStateDescriptor&&ax(e.megaStateDescriptor),c=e.colorAttachmentFormats.slice(),p=e.depthStencilAttachmentFormat,g=e.sampleCount;return{inputLayout:a,megaStateDescriptor:u,program:r,topology:o,colorAttachmentFormats:c,depthStencilAttachmentFormat:p,sampleCount:g}}function Dz(e){var a=e.shaderLocation,r=e.format,o=e.offset,u=e.divisor;return{shaderLocation:a,format:r,offset:o,divisor:u}}function Lz(e){if(isNil(e))return e;var a=e.arrayStride,r=e.stepMode,o=SE(e.attributes,Dz);return{arrayStride:a,stepMode:r,attributes:o}}function Lj(e){var a=SE(e.vertexBufferDescriptors,Lz),r=e.indexBufferFormat,o=e.program;return{vertexBufferDescriptors:a,indexBufferFormat:r,program:o}}var jo,Fz=/([^[]*)(\[[0-9]+\])?/;function Bz(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var a=e.match(Fz);if(!a||a.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:a[1],length:Number(a[2])||1,isArray:!!a[2]}}function Bh(){var e=null;return function(a,r,o){var u=e!==o;return u&&(a.uniform1i(r,o),e=o),u}}function sl(e,a,r,o){var u=null,c=null;return function(p,g,y){var S=a(y,r),O=S.length,L=!1;if(u===null)u=new Float32Array(O),c=O,L=!0;else{yo(c===O,"Uniform length cannot change.");for(var V=0;V<O;++V)if(S[V]!==u[V]){L=!0;break}}return L&&(o(p,e,g,S),u.set(S)),L}}function th(e,a,r,o){e[a](r,o)}function sm(e,a,r,o){e[a](r,!1,o)}var Nz={},zz={},Uz={},V6=[0];function S5(e,a,r,o){a===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(V6[0]=e,e=V6);var u=e.length;if(e instanceof r)return e;var c=o[u];c||(c=new r(u),o[u]=c);for(var p=0;p<u;p++)c[p]=e[p];return c}function Yp(e,a){return S5(e,a,Float32Array,Nz)}function _0(e,a){return S5(e,a,Int32Array,zz)}function SR(e,a){return S5(e,a,Uint32Array,Uz)}var Zz=(jo={},jo[Cr.FLOAT]=sl.bind(null,"uniform1fv",Yp,1,th),jo[Cr.FLOAT_VEC2]=sl.bind(null,"uniform2fv",Yp,2,th),jo[Cr.FLOAT_VEC3]=sl.bind(null,"uniform3fv",Yp,3,th),jo[Cr.FLOAT_VEC4]=sl.bind(null,"uniform4fv",Yp,4,th),jo[Cr.INT]=sl.bind(null,"uniform1iv",_0,1,th),jo[Cr.INT_VEC2]=sl.bind(null,"uniform2iv",_0,2,th),jo[Cr.INT_VEC3]=sl.bind(null,"uniform3iv",_0,3,th),jo[Cr.INT_VEC4]=sl.bind(null,"uniform4iv",_0,4,th),jo[Cr.BOOL]=sl.bind(null,"uniform1iv",_0,1,th),jo[Cr.BOOL_VEC2]=sl.bind(null,"uniform2iv",_0,2,th),jo[Cr.BOOL_VEC3]=sl.bind(null,"uniform3iv",_0,3,th),jo[Cr.BOOL_VEC4]=sl.bind(null,"uniform4iv",_0,4,th),jo[Cr.FLOAT_MAT2]=sl.bind(null,"uniformMatrix2fv",Yp,4,sm),jo[Cr.FLOAT_MAT3]=sl.bind(null,"uniformMatrix3fv",Yp,9,sm),jo[Cr.FLOAT_MAT4]=sl.bind(null,"uniformMatrix4fv",Yp,16,sm),jo[Cr.UNSIGNED_INT]=sl.bind(null,"uniform1uiv",SR,1,th),jo[Cr.UNSIGNED_INT_VEC2]=sl.bind(null,"uniform2uiv",SR,2,th),jo[Cr.UNSIGNED_INT_VEC3]=sl.bind(null,"uniform3uiv",SR,3,th),jo[Cr.UNSIGNED_INT_VEC4]=sl.bind(null,"uniform4uiv",SR,4,th),jo[Cr.FLOAT_MAT2x3]=sl.bind(null,"uniformMatrix2x3fv",Yp,6,sm),jo[Cr.FLOAT_MAT2x4]=sl.bind(null,"uniformMatrix2x4fv",Yp,8,sm),jo[Cr.FLOAT_MAT3x2]=sl.bind(null,"uniformMatrix3x2fv",Yp,6,sm),jo[Cr.FLOAT_MAT3x4]=sl.bind(null,"uniformMatrix3x4fv",Yp,12,sm),jo[Cr.FLOAT_MAT4x2]=sl.bind(null,"uniformMatrix4x2fv",Yp,8,sm),jo[Cr.FLOAT_MAT4x3]=sl.bind(null,"uniformMatrix4x3fv",Yp,12,sm),jo[Cr.SAMPLER_2D]=Bh,jo[Cr.SAMPLER_CUBE]=Bh,jo[Cr.SAMPLER_3D]=Bh,jo[Cr.SAMPLER_2D_SHADOW]=Bh,jo[Cr.SAMPLER_2D_ARRAY]=Bh,jo[Cr.SAMPLER_2D_ARRAY_SHADOW]=Bh,jo[Cr.SAMPLER_CUBE_SHADOW]=Bh,jo[Cr.INT_SAMPLER_2D]=Bh,jo[Cr.INT_SAMPLER_3D]=Bh,jo[Cr.INT_SAMPLER_CUBE]=Bh,jo[Cr.INT_SAMPLER_2D_ARRAY]=Bh,jo[Cr.UNSIGNED_INT_SAMPLER_2D]=Bh,jo[Cr.UNSIGNED_INT_SAMPLER_3D]=Bh,jo[Cr.UNSIGNED_INT_SAMPLER_CUBE]=Bh,jo[Cr.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Bh,jo);function H6(e,a,r){var o=Zz[r.type];if(!o)throw new Error("Unknown GLSL uniform type ".concat(r.type));return o().bind(null,e,a)}var Vz={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Hz(e){return Object.prototype.toString.call(e)in Vz}function EE(e,a){return"#define ".concat(e," ").concat(a)}function jz(e){var a={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,o,u){var c=Number(u);return a[o]=isNaN(c)?u:c,""}),a}function Wz(e,a){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(o,u,c){var p=Number(u);return r.push({location:isNaN(p)?a[u]:p,name:c}),""}),r}function Fj(e){var a=[],r=[];return e.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(o,u,c){var p=[];return c.trim().replace(`\r
`,`
`).split(`
`).forEach(function(g){var y=__read(g.trim().split(/\s+/),2),S=y[0],O=y[1];p.push({type:S.trim(),name:O.replace(";","").trim()})}),r.push({type:u.trim(),uniforms:p}),""}),e.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(o,u){return u.trim().replace(`\r
`,`
`).split(`
`).forEach(function(c){var p=c.trim().split(" "),g=p[0]||"",y=p[1]||"",S=y.indexOf("[")>-1;if(y=y.replace(";","").replace("[","").trim(),!g.startsWith("#")){if(g){var O=r.find(function(G){return g===G.type});if(O)if(S)for(var L=function(G){O.uniforms.forEach(function(he){a.push("".concat(y,"[").concat(G,"].").concat(he.name))})},V=0;V<5;V++)L(V);else O.uniforms.forEach(function(G){a.push("".concat(y,".").concat(G.name))})}y&&a.push(y)}}),""}),a}function j6(e){if(e===void 0)return null;var a=/binding\s*=\s*(\d+)/.exec(e);if(a!==null){var r=parseInt(a[1],10);if(!Number.isNaN(r))return r}return null}function Gz(e){var a="",r=e;return[r,a]}function x0(e,a,r,o,u){var c;o===void 0&&(o=null),u===void 0&&(u=!0);var p=e.glslVersion==="#version 100",g=a==="frag"&&((c=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||c===void 0?void 0:c.length)>1,y=r.replace(`\r
`,`
`).split(`
`).map(function(nr){return nr.replace(/[/][/].*$/,"")}).filter(function(nr){var ar=!nr||/^\s+$/.test(nr);return!ar}),S="";o!==null&&(S=Object.keys(o).map(function(nr){return EE(nr,o[nr])}).join(`
`));var O=y.find(function(nr){return nr.startsWith("precision")})||"precision mediump float;",L=u?y.filter(function(nr){return!nr.startsWith("precision")}).join(`
`):y.join(`
`),V="";if(e.viewportOrigin===ex.UPPER_LEFT&&(V+="".concat(EE("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===tx.ZERO&&(V+="".concat(EE("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var G=0,he=0,ve=0;L=L.replace(/^(layout\((.*)\))?\s*uniform(.+{)$/gm,function(nr,ar,Tr,Zr){var rn=Tr?"".concat(Tr,", "):"";return"layout(".concat(rn,"set = ").concat(G,", binding = ").concat(he++,") uniform ").concat(Zr)}),G++,he=0,yo(e.separateSamplerTextures),L=L.replace(/^(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(nr,ar,Tr,Zr,rn){var ln=j6(Tr);ln===null&&(ln=he++);var Gn=(0,w.CR)(Gz(Zr),2),fi=Gn[0],Fi=Gn[1];return a==="frag"?`
layout(set = `.concat(G,", binding = ").concat(ln*2+0,") uniform texture").concat(fi," T_").concat(rn,`;
layout(set = `).concat(G,", binding = ").concat(ln*2+1,") uniform sampler").concat(Fi," S_").concat(rn,";").trim():""}),L=L.replace(a==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(nr,ar){return"layout(location = ".concat(ve++,") ").concat(ar)}),V+="".concat(EE("gl_VertexID","gl_VertexIndex"),`
`),V+="".concat(EE("gl_InstanceID","gl_InstanceIndex"),`
`),O=O.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var Pe=0;L=L.replace(/^(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(nr,ar,Tr,Zr,rn){var ln=j6(Tr);return ln===null&&(ln=Pe++),"uniform sampler".concat(Zr," ").concat(rn,"; // BINDING=").concat(ln)})}if(e.separateSamplerTextures)L=L.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(nr,ar,Tr){return"sampler".concat(ar,"(T_").concat(Tr,", S_").concat(Tr,")")}),L=L.replace(/\bTEXTURE\((.*?)\)/g,function(nr,ar){return"T_".concat(ar)});else{var Xe=[];L=L.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(nr,ar,Tr){return Xe.push([Tr,ar]),Tr}),p&&Xe.forEach(function(nr){var ar=(0,w.CR)(nr,2),Tr=ar[0],Zr=ar[1];L=L.replace(new RegExp("texture\\(".concat(Tr),"g"),function(){return"texture".concat(Zr,"(").concat(Tr)})}),L=L.replace(/\bTEXTURE\((.*?)\)/g,function(nr,ar){return ar})}var gt="".concat(p?"":e.glslVersion,`
`).concat(p&&g?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(p&&a==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(u?O:"",`
`).concat(V||"").concat(S?S+`
`:"",`
`).concat(L,`
`).trim();if(e.explicitBindingLocations&&a==="frag"&&(gt=gt.replace(/^\b(out)\b/g,function(nr,ar){return"layout(location = 0) ".concat(ar)})),p){if(a==="frag"&&(gt=gt.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(nr,ar,Tr){return"varying ".concat(ar," ").concat(Tr,`;
`)})),a==="vert"&&(gt=gt.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(nr,ar,Tr){return"varying ".concat(ar," ").concat(Tr,`;
`)}),gt=gt.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(nr,ar,Tr){return"attribute ".concat(ar," ").concat(Tr,`;
`)})),gt=gt.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(nr,ar){return ar.trim().replace(/^.*$/gm,function(Tr){var Zr=Tr.trim();return Zr.startsWith("#")?Zr:Tr?"uniform ".concat(Zr):""})}),a==="frag")if(g){var _t=[];gt=gt.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(nr,ar){return _t.push(ar),"vec4 ".concat(ar,`;
`)});var zt=gt.lastIndexOf("}");gt=gt.substring(0,zt)+`
    `.concat(_t.map(function(nr,ar){return"gl_FragData[".concat(ar,"] = ").concat(nr,`;
    `)}).join(`
`))+gt.substring(zt)}else{var Xt;if(gt=gt.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(nr,ar,Tr){return Xt=Tr,"".concat(ar," ").concat(Tr,`;
`)}),Xt){var zt=gt.lastIndexOf("}");gt=gt.substring(0,zt)+`
  gl_FragColor = vec4(`.concat(Xt,`);
`)+gt.substring(zt)}}gt=gt.replace(/^\s*layout\((.*)\)/gm,"")}return gt}function Bj(e,a,r,o){o===void 0&&(o=null);var u=x0(e,"vert",a,o),c=x0(e,"frag",r,o);return{vert:a,frag:r,preprocessedVert:u,preprocessedFrag:c}}var Rv=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c.device.resourceCreationTracker!==null&&c.device.resourceCreationTracker.trackResourceCreated(c),c}return a.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},a}(A6),$z=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Bindings;var g=c.uniformBufferBindings,y=c.samplerBindings;return p.uniformBufferBindings=g||[],p.samplerBindings=y||[],p.bindingLayouts=p.createBindingLayouts(),p}return a.prototype.createBindingLayouts=function(){var r=0,o=0,u=[],c=this.uniformBufferBindings.length,p=this.samplerBindings.length;return u.push({firstUniformBuffer:r,numUniformBuffers:c,firstSampler:o,numSamplers:p}),r+=c,o+=p,{numUniformBuffers:r,numSamplers:o,bindingLayoutTables:u}},a}(Rv);function ca(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}function W6(e){var a=hg(e);switch(a){case Xn.BC1:case Xn.BC2:case Xn.BC3:case Xn.BC4_UNORM:case Xn.BC4_SNORM:case Xn.BC5_UNORM:case Xn.BC5_SNORM:return!0;default:return!1}}function G6(e){var a=rx(e);if(a&$i.Normalized)return!1;var r=hg(e);return r===Xn.S8||r===Xn.S16||r===Xn.S32||r===Xn.U8||r===Xn.U16||r===Xn.U32}function Xz(e){switch(e){case Mv.STATIC:return Cr.STATIC_DRAW;case Mv.DYNAMIC:return Cr.DYNAMIC_DRAW}}function $6(e){if(e&fu.INDEX)return Cr.ELEMENT_ARRAY_BUFFER;if(e&fu.VERTEX)return Cr.ARRAY_BUFFER;if(e&fu.UNIFORM)return Cr.UNIFORM_BUFFER}function Yz(e){switch(e){case Gl.TRIANGLES:return Cr.TRIANGLES;case Gl.POINTS:return Cr.POINTS;case Gl.TRIANGLE_STRIP:return Cr.TRIANGLE_STRIP;case Gl.LINES:return Cr.LINES;case Gl.LINE_STRIP:return Cr.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function Kz(e){switch(e){case Xn.U8:return Cr.UNSIGNED_BYTE;case Xn.U16:return Cr.UNSIGNED_SHORT;case Xn.U32:return Cr.UNSIGNED_INT;case Xn.S8:return Cr.BYTE;case Xn.S16:return Cr.SHORT;case Xn.S32:return Cr.INT;case Xn.F16:return Cr.HALF_FLOAT;case Xn.F32:return Cr.FLOAT;default:throw new Error("whoops")}}function qz(e){switch(e){case pa.R:return 1;case pa.RG:return 2;case pa.RGB:return 3;case pa.RGBA:return 4;default:return 1}}function Qz(e){var a=hg(e),r=mR(e),o=rx(e),u=Kz(a),c=qz(r),p=!!(o&$i.Normalized);return{size:c,type:u,normalized:p}}function Jz(e){switch(e){case Jr.U8_R:return Cr.UNSIGNED_BYTE;case Jr.U16_R:return Cr.UNSIGNED_SHORT;case Jr.U32_R:return Cr.UNSIGNED_INT;default:throw new Error("whoops")}}function wE(e){switch(e){case Fh.CLAMP_TO_EDGE:return Cr.CLAMP_TO_EDGE;case Fh.REPEAT:return Cr.REPEAT;case Fh.MIRRORED_REPEAT:return Cr.MIRRORED_REPEAT;default:throw new Error("whoops")}}function ER(e,a){if(a===_c.LINEAR&&e===xl.BILINEAR)return Cr.LINEAR_MIPMAP_LINEAR;if(a===_c.LINEAR&&e===xl.POINT)return Cr.NEAREST_MIPMAP_LINEAR;if(a===_c.NEAREST&&e===xl.BILINEAR)return Cr.LINEAR_MIPMAP_NEAREST;if(a===_c.NEAREST&&e===xl.POINT)return Cr.NEAREST_MIPMAP_NEAREST;if(a===_c.NO_MIP&&e===xl.BILINEAR)return Cr.LINEAR;if(a===_c.NO_MIP&&e===xl.POINT)return Cr.NEAREST;throw new Error("Unknown texture filter mode")}function sx(e,a){a===void 0&&(a=0);var r=e;return r.gl_buffer_pages[a/r.pageByteSize|0]}function ux(e){var a=e;return a.gl_texture}function E5(e){var a=e;return a.gl_sampler}function CE(e,a){e.name=a,e.__SPECTOR_Metadata={name:a}}function X6(e,a){for(var r=[];;){var o=a.exec(e);if(!o)break;r.push(o)}return r}function b0(e){return e.blendMode==Hc.ADD&&e.blendSrcFactor==No.ONE&&e.blendDstFactor===No.ZERO}function eU(e){switch(e){case gR.OcclusionConservative:return Cr.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function tU(e){if(e===Po.TEXTURE_2D)return Cr.TEXTURE_2D;if(e===Po.TEXTURE_2D_ARRAY)return Cr.TEXTURE_2D_ARRAY;if(e===Po.TEXTURE_CUBE_MAP)return Cr.TEXTURE_CUBE_MAP;if(e===Po.TEXTURE_3D)return Cr.TEXTURE_3D;throw new Error("whoops")}function w5(e,a,r,o){return!(e%r!==0||a%o!==0)}var rU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Buffer;var g=c.viewOrSize,y=c.usage,S=c.hint,O=S===void 0?Mv.STATIC:S,L=u.uniformBufferMaxPageByteSize,V=u.gl,G=y&fu.UNIFORM;G||(ca(V)?V.bindVertexArray(null):u.OES_vertex_array_object.bindVertexArrayOES(null));var he=J1(g)?_R(g,4):_R(g.byteLength,4);p.gl_buffer_pages=[];var ve;if(G){for(var Pe=he;Pe>0;)p.gl_buffer_pages.push(p.createBufferPage(Math.min(Pe,L),y,O)),Pe-=L;ve=L}else p.gl_buffer_pages.push(p.createBufferPage(he,y,O)),ve=he;return p.pageByteSize=ve,p.byteSize=he,p.usage=y,p.gl_target=$6(y),J1(g)||p.setSubData(0,new Uint8Array(g.buffer)),G||(ca(V)?V.bindVertexArray(p.device.currentBoundVAO):u.OES_vertex_array_object.bindVertexArrayOES(p.device.currentBoundVAO)),p}return a.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=o.byteLength-u);for(var p=this.device.gl,g=this.pageByteSize,y=r+c,S=r,O=r%g;S<y;){var L=ca(p)?p.COPY_WRITE_BUFFER:this.gl_target,V=sx(this,S);if(V.ubo)return;p.bindBuffer(L,V),ca(p)?p.bufferSubData(L,O,o,u,Math.min(y-S,g)):p.bufferSubData(L,O,o),S+=g,O=0,u+=g,this.device.debugGroupStatisticsBufferUpload()}},a.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},a.prototype.createBufferPage=function(r,o,u){var c=this.device.gl,p=o&fu.UNIFORM;if(!ca(c)&&p)return{ubo:!0};var g=this.device.ensureResourceExists(c.createBuffer()),y=$6(o),S=Xz(u);return c.bindBuffer(y,g),c.bufferData(y,r,S),g},a}(Rv),nU=function(e){(0,w.ZT)(a,e);function a(r){var o,u,c,p,g=r.id,y=r.device,S=r.descriptor,O,L=e.call(this,{id:g,device:y})||this;L.type=ds.InputLayout;var V=S.vertexBufferDescriptors,G=S.indexBufferFormat,he=S.program;yo(G===Jr.U16_R||G===Jr.U32_R||G===null);var ve=G!==null?Jz(G):null,Pe=G!==null?I6(G):null,Xe=L.device.gl,gt=L.device.ensureResourceExists(ca(Xe)?Xe.createVertexArray():y.OES_vertex_array_object.createVertexArrayOES());ca(Xe)?Xe.bindVertexArray(gt):y.OES_vertex_array_object.bindVertexArrayOES(gt),Xe.bindBuffer(Xe.ARRAY_BUFFER,sx(L.device.fallbackVertexBuffer));try{for(var _t=(0,w.XA)(S.vertexBufferDescriptors),zt=_t.next();!zt.done;zt=_t.next()){var Xt=zt.value,nr=Xt.stepMode,ar=Xt.attributes;try{for(var Tr=(c=void 0,(0,w.XA)(ar)),Zr=Tr.next();!Zr.done;Zr=Tr.next()){var rn=Zr.value,ln=rn.shaderLocation,Gn=rn.format,fi=rn.divisor,Fi=fi===void 0?1:fi,uo=ca(Xe)?ln:(O=he.attributes[ln])===null||O===void 0?void 0:O.location,is=Qz(Gn);if(rn.vertexFormat=is,!y0(uo)){G6(Gn);var as=is.size,tu=is.type,hu=is.normalized;Xe.vertexAttribPointer(uo,as,tu,hu,0,0),nr===Wy.INSTANCE&&(ca(Xe)?Xe.vertexAttribDivisor(uo,Fi):y.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(uo,Fi)),Xe.enableVertexAttribArray(uo)}}}catch(lf){c={error:lf}}finally{try{Zr&&!Zr.done&&(p=Tr.return)&&p.call(Tr)}finally{if(c)throw c.error}}}}catch(lf){o={error:lf}}finally{try{zt&&!zt.done&&(u=_t.return)&&u.call(_t)}finally{if(o)throw o.error}}return ca(Xe)?Xe.bindVertexArray(null):y.OES_vertex_array_object.bindVertexArrayOES(null),L.vertexBufferDescriptors=V,L.vao=gt,L.indexBufferFormat=G,L.indexBufferType=ve,L.indexBufferCompByteSize=Pe,L.program=he,L}return a.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(ca(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},a}(Rv),C5=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=r.fake,g=e.call(this,{id:o,device:u})||this;g.type=ds.Texture,c=(0,w.pi)({dimension:Po.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},c);var y=g.device.gl,S,O,L=g.clampmipLevelCount(c);if(g.immutable=c.usage===Jf.RENDER_TARGET,g.pixelStore=c.pixelStore,g.format=c.format,g.dimension=c.dimension,g.formatKind=P6(c.format),g.width=c.width,g.height=c.height,g.depthOrArrayLayers=c.depthOrArrayLayers,g.mipmaps=L>=1,!p){O=g.device.ensureResourceExists(y.createTexture());var V=g.device.translateTextureType(c.format),G=g.device.translateTextureInternalFormat(c.format);if(g.device.setActiveTexture(y.TEXTURE0),g.device.currentTextures[0]=null,g.preprocessImage(),c.dimension===Po.TEXTURE_2D){if(S=Cr.TEXTURE_2D,y.bindTexture(S,O),g.immutable)if(ca(y))y.texStorage2D(S,L,G,c.width,c.height);else{var he=(G===Cr.DEPTH_COMPONENT||g.isNPOT(),0);(g.format===Jr.D32F||g.format===Jr.D24_S8)&&!ca(y)&&!u.WEBGL_depth_texture||(y.texImage2D(S,he,G,c.width,c.height,0,G,V,null),g.mipmaps&&(g.mipmaps=!1,y.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_MIN_FILTER,Cr.LINEAR),y.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_S,Cr.CLAMP_TO_EDGE),y.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_T,Cr.CLAMP_TO_EDGE)))}yo(c.depthOrArrayLayers===1)}else if(c.dimension===Po.TEXTURE_2D_ARRAY)S=Cr.TEXTURE_2D_ARRAY,y.bindTexture(S,O),g.immutable&&ca(y)&&y.texStorage3D(S,L,G,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Po.TEXTURE_3D)S=Cr.TEXTURE_3D,y.bindTexture(S,O),g.immutable&&ca(y)&&y.texStorage3D(S,L,G,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Po.TEXTURE_CUBE_MAP)S=Cr.TEXTURE_CUBE_MAP,y.bindTexture(S,O),g.immutable&&ca(y)&&y.texStorage2D(S,L,G,c.width,c.height),yo(c.depthOrArrayLayers===6);else throw new Error("whoops")}return g.gl_texture=O,g.gl_target=S,g.mipLevelCount=L,g}return a.prototype.setImageData=function(r,o){o===void 0&&(o=0);var u=this.device.gl;W6(this.format);var c=this.gl_target===Cr.TEXTURE_3D||this.gl_target===Cr.TEXTURE_2D_ARRAY,p=this.gl_target===Cr.TEXTURE_CUBE_MAP,g=Hz(r[0]);this.device.setActiveTexture(u.TEXTURE0),this.device.currentTextures[0]=null;var y=r[0],S,O;g?(S=this.width,O=this.height):(S=y.width,O=y.height,this.width=S,this.height=O),u.bindTexture(this.gl_target,this.gl_texture);var L=this.device.translateTextureFormat(this.format),V=ca(u)?this.device.translateInternalTextureFormat(this.format):L,G=this.device.translateTextureType(this.format);this.preprocessImage();for(var he=0;he<this.depthOrArrayLayers;he++){var ve=r[he],Pe=this.gl_target;p&&(Pe=Cr.TEXTURE_CUBE_MAP_POSITIVE_X+he%6),this.immutable?u.texSubImage2D(Pe,o,0,0,S,O,L,G,ve):ca(u)?c?u.texImage3D(Pe,o,V,S,O,this.depthOrArrayLayers,0,L,G,ve):u.texImage2D(Pe,o,V,S,O,0,L,G,ve):g?u.texImage2D(Pe,o,L,S,O,0,L,G,ve):u.texImage2D(Pe,o,L,L,G,ve)}this.mipmaps&&this.generateMipmap(c)},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(ux(this))},a.prototype.clampmipLevelCount=function(r){if(r.dimension===Po.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var o=hg(r.format);if(o===Xn.BC1)for(var u=r.width,c=r.height,p=0;p<r.mipLevelCount;p++){if(u<=2||c<=2)return p-1;u=Math.max(u/2|0,1),c=Math.max(c/2|0,1)}}return r.mipLevelCount},a.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(Cr.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(Cr.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(Cr.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},a.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var o=this.device.gl;return!ca(o)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(o.bindTexture(this.gl_target,this.gl_texture),r?(o.texParameteri(this.gl_target,Cr.TEXTURE_BASE_LEVEL,0),o.texParameteri(this.gl_target,Cr.TEXTURE_MAX_LEVEL,Math.log2(this.width)),o.texParameteri(this.gl_target,Cr.TEXTURE_MIN_FILTER,Cr.LINEAR_MIPMAP_LINEAR),o.texParameteri(this.gl_target,Cr.TEXTURE_MAG_FILTER,Cr.LINEAR)):o.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_MIN_FILTER,Cr.NEAREST_MIPMAP_LINEAR),o.generateMipmap(this.gl_target),o.bindTexture(this.gl_target,null)),this)},a.prototype.isNPOT=function(){var r=this.device.gl;return ca(r)?!1:!yR(this.width)||!yR(this.height)},a}(Rv),iU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.RenderTarget,p.gl_renderbuffer=null,p.texture=null;var g=p.device.gl,y=c.format,S=c.width,O=c.height,L=c.sampleCount,V=L===void 0?1:L,G=c.texture,he=!1;if((y===Jr.D32F||y===Jr.D24_S8)&&G&&!ca(g)&&!u.WEBGL_depth_texture&&(G.destroy(),p.texture=null,he=!0),!he&&G)p.texture=G;else{p.gl_renderbuffer=p.device.ensureResourceExists(g.createRenderbuffer()),g.bindRenderbuffer(g.RENDERBUFFER,p.gl_renderbuffer);var ve=p.device.translateTextureInternalFormat(y,!0);ca(g)&&V>1?g.renderbufferStorageMultisample(Cr.RENDERBUFFER,V,ve,S,O):g.renderbufferStorage(Cr.RENDERBUFFER,ve,S,O)}return p.format=y,p.width=S,p.height=O,p.sampleCount=V,p}return a.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},a}(Rv),hp;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(hp||(hp={}));var aU=function(e){(0,w.ZT)(a,e);function a(r,o){var u=r.id,c=r.device,p=r.descriptor,g=e.call(this,{id:u,device:c})||this;g.rawVertexGLSL=o,g.type=ds.Program,g.uniformSetters={},g.attributes=[];var y=g.device.gl;return g.descriptor=p,g.gl_program=g.device.ensureResourceExists(y.createProgram()),g.gl_shader_vert=null,g.gl_shader_frag=null,g.compileState=hp.NeedsCompile,g.tryCompileProgram(),g}return a.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},a.prototype.tryCompileProgram=function(){var r,o;yo(this.compileState===hp.NeedsCompile);var u=this.descriptor,c=this.device.gl;!((r=u.vertex)===null||r===void 0)&&r.glsl&&(!((o=u.fragment)===null||o===void 0)&&o.glsl)&&(this.gl_shader_vert=this.compileShader(u.vertex.glsl,c.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(u.fragment.glsl,c.FRAGMENT_SHADER),c.attachShader(this.gl_program,this.gl_shader_vert),c.attachShader(this.gl_program,this.gl_shader_frag),c.linkProgram(this.gl_program),this.compileState=hp.Compiling,ca(c)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},a.prototype.readAttributesFromLinkedProgram=function(){for(var r,o=this.device.gl,u=o.getProgramParameter(this.gl_program,o.ACTIVE_ATTRIBUTES),c=jz(this.descriptor.vertex.glsl),p=Wz(this.rawVertexGLSL,c),g=function(O){var L=o.getActiveAttrib(y.gl_program,O),V=L.name,G=L.type,he=L.size,ve=o.getAttribLocation(y.gl_program,V),Pe=(r=p.find(function(Xe){return Xe.name===V}))===null||r===void 0?void 0:r.location;ve>=0&&!y0(Pe)&&(y.attributes[Pe]={name:V,location:ve,type:G,size:he})},y=this,S=0;S<u;S++)g(S)},a.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,o=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),u=0;u<o;u++){var c=r.getActiveUniform(this.gl_program,u),p=Bz(c.name).name,g=r.getUniformLocation(this.gl_program,p);if(this.uniformSetters[p]=H6(r,g,c),c&&c.size>1)for(var y=0;y<c.size;y++)g=r.getUniformLocation(this.gl_program,"".concat(p,"[").concat(y,"]")),this.uniformSetters["".concat(p,"[").concat(y,"]")]=H6(r,g,c)}},a.prototype.compileShader=function(r,o){var u=this.device.gl,c=this.device.ensureResourceExists(u.createShader(o));return u.shaderSource(c,r),u.compileShader(c),c},a.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var o=this.device.gl;if(!ca(o)){var u=!1;for(var c in r){u||(o.useProgram(this.gl_program),u=!0);var p=r[c],g=this.uniformSetters[c];if(g){var y=p;y instanceof C5&&(y=y.textureIndex),g(y)}}}return this},a}(Rv),oU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.QueryPool;var g=p.device.gl;if(ca(g)){var y=c.elemCount,S=c.type;p.gl_query=xz(y,function(){return p.device.ensureResourceExists(g.createQuery())}),p.gl_query_type=eU(S)}return p}return a.prototype.queryResultOcclusion=function(r){var o=this.device.gl;if(ca(o)){var u=this.gl_query[r];return o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)?!!o.getQueryParameter(u,o.QUERY_RESULT):null}return null},a.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(ca(r))for(var o=0;o<this.gl_query.length;o++)r.deleteQuery(this.gl_query[o])},a}(Rv),sU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=ds.Readback,c.gl_pbo=null,c.gl_sync=null,c}return a.prototype.clientWaitAsync=function(r,o,u){o===void 0&&(o=0),u===void 0&&(u=10);var c=this.device.gl;return new Promise(function(p,g){function y(){var S=c.clientWaitSync(r,o,0);if(S==c.WAIT_FAILED){g();return}if(S==c.TIMEOUT_EXPIRED){setTimeout(y,pz(u,0,c.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}p()}y()})},a.prototype.getBufferSubDataAsync=function(r,o,u,c,p,g){return(0,w.mG)(this,void 0,void 0,function(){var y;return(0,w.Jh)(this,function(S){switch(S.label){case 0:return y=this.device.gl,ca(y)?(this.gl_sync=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0),y.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return S.sent(),y.bindBuffer(r,o),y.getBufferSubData(r,u,c,p,g),y.bindBuffer(r,null),[2,c];case 2:return[2]}})})},a.prototype.readTexture=function(r,o,u,c,p,g,y,S){return y===void 0&&(y=0),S===void 0&&(S=g.byteLength||0),(0,w.mG)(this,void 0,void 0,function(){var O,L,V,G,he;return(0,w.Jh)(this,function(ve){return O=this.device.gl,L=r,V=this.device.translateTextureFormat(L.format),G=this.device.translateTextureType(L.format),he=vz(L.format),ca(O)?(this.gl_pbo=this.device.ensureResourceExists(O.createBuffer()),O.bindBuffer(O.PIXEL_PACK_BUFFER,this.gl_pbo),O.bufferData(O.PIXEL_PACK_BUFFER,S,O.STREAM_READ),O.bindBuffer(O.PIXEL_PACK_BUFFER,null),O.bindFramebuffer(Cr.READ_FRAMEBUFFER,this.device.readbackFramebuffer),O.framebufferTexture2D(Cr.READ_FRAMEBUFFER,Cr.COLOR_ATTACHMENT0,Cr.TEXTURE_2D,L.gl_texture,0),O.bindBuffer(O.PIXEL_PACK_BUFFER,this.gl_pbo),O.readPixels(o,u,c,p,V,G,y*he),O.bindBuffer(O.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(O.PIXEL_PACK_BUFFER,this.gl_pbo,0,g,y,0)]):[2,this.readTextureSync(r,o,u,c,p,g,y,S)]})})},a.prototype.readTextureSync=function(r,o,u,c,p,g,y,S){S===void 0&&(S=g.byteLength||0);var O=this.device.gl,L=r,V=this.device.translateTextureType(L.format);return O.bindFramebuffer(Cr.FRAMEBUFFER,this.device.readbackFramebuffer),O.framebufferTexture2D(Cr.FRAMEBUFFER,Cr.COLOR_ATTACHMENT0,Cr.TEXTURE_2D,L.gl_texture,0),O.pixelStorei(O.PACK_ALIGNMENT,4),O.readPixels(o,u,c,p,O.RGBA,V,g),g},a.prototype.readBuffer=function(r,o,u,c,p){return(0,w.mG)(this,void 0,void 0,function(){var g;return(0,w.Jh)(this,function(y){return g=this.device.gl,ca(g)?[2,this.getBufferSubDataAsync(g.ARRAY_BUFFER,sx(r,o),o,u,c,p)]:[2,Promise.reject()]})})},a.prototype.destroy=function(){e.prototype.destroy.call(this),ca(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},a}(Rv),uU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;return y.type=ds.RenderPipeline,y.drawMode=Yz((p=c.topology)!==null&&p!==void 0?p:Gl.TRIANGLES),y.program=c.program,y.inputLayout=c.inputLayout,y.megaState=(0,w.pi)((0,w.pi)({},ax($y)),c.megaStateDescriptor),y.colorAttachmentFormats=c.colorAttachmentFormats.slice(),y.depthStencilAttachmentFormat=c.depthStencilAttachmentFormat,y.sampleCount=(g=c.sampleCount)!==null&&g!==void 0?g:1,y}return a}(Rv),lU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=ds.ComputePipeline,p.descriptor=c,p}return a}(Rv),cU=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(a){this.creationStacks.set(a,new Error().stack),this.liveObjects.add(a)},e.prototype.trackResourceDestroyed=function(a){this.deletionStacks.has(a)&&console.warn("Object double freed:",a,`

Creation stack: `,this.creationStacks.get(a),`

Deletion stack: `,this.deletionStacks.get(a),`

This stack: `,new Error().stack),this.deletionStacks.set(a,new Error().stack),this.liveObjects.delete(a)},e.prototype.checkForLeaks=function(){var a,r;try{for(var o=(0,w.XA)(this.liveObjects.values()),u=o.next();!u.done;u=o.next()){var c=u.value;console.warn("Object leaked:",c,"Creation stack:",this.creationStacks.get(c))}}catch(p){a={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}},e.prototype.setResourceLeakCheck=function(a,r){r?this.liveObjects.add(a):this.liveObjects.delete(a)},e}(),fU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=ds.Sampler;var S=y.device.gl;if(ca(S)){var O=y.device.ensureResourceExists(S.createSampler());S.samplerParameteri(O,Cr.TEXTURE_WRAP_S,wE(c.addressModeU)),S.samplerParameteri(O,Cr.TEXTURE_WRAP_T,wE(c.addressModeV)),S.samplerParameteri(O,Cr.TEXTURE_WRAP_R,wE((p=c.addressModeW)!==null&&p!==void 0?p:c.addressModeU)),S.samplerParameteri(O,Cr.TEXTURE_MIN_FILTER,ER(c.minFilter,c.mipmapFilter)),S.samplerParameteri(O,Cr.TEXTURE_MAG_FILTER,ER(c.magFilter,_c.NO_MIP)),c.lodMinClamp!==void 0&&S.samplerParameterf(O,Cr.TEXTURE_MIN_LOD,c.lodMinClamp),c.lodMaxClamp!==void 0&&S.samplerParameterf(O,Cr.TEXTURE_MAX_LOD,c.lodMaxClamp),c.compareFunction!==void 0&&(S.samplerParameteri(O,S.TEXTURE_COMPARE_MODE,S.COMPARE_REF_TO_TEXTURE),S.samplerParameteri(O,S.TEXTURE_COMPARE_FUNC,c.compareFunction));var L=(g=c.maxAnisotropy)!==null&&g!==void 0?g:1;L>1&&y.device.EXT_texture_filter_anisotropic!==null&&(yo(c.minFilter===xl.BILINEAR&&c.magFilter===xl.BILINEAR&&c.mipmapFilter===_c.LINEAR),S.samplerParameterf(O,y.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L)),y.gl_sampler=O}else y.descriptor=c;return y}return a.prototype.setTextureParameters=function(r,o,u){var c,p=this.device.gl,g=this.descriptor;this.isNPOT(o,u)?p.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_MIN_FILTER,Cr.LINEAR):p.texParameteri(r,Cr.TEXTURE_MIN_FILTER,ER(g.minFilter,g.mipmapFilter)),p.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_S,wE(g.addressModeU)),p.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_T,wE(g.addressModeV)),p.texParameteri(r,Cr.TEXTURE_MAG_FILTER,ER(g.magFilter,_c.NO_MIP));var y=(c=g.maxAnisotropy)!==null&&c!==void 0?c:1;y>1&&this.device.EXT_texture_filter_anisotropic!==null&&(yo(g.minFilter===xl.BILINEAR&&g.magFilter===xl.BILINEAR&&g.mipmapFilter===_c.LINEAR),p.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,y))},a.prototype.destroy=function(){e.prototype.destroy.call(this),ca(this.device.gl)&&this.device.gl.deleteSampler(E5(this))},a.prototype.isNPOT=function(r,o){return!yR(r)||!yR(o)},a}(Rv),hU=function(){function e(){}return e.prototype.dispatchWorkgroups=function(a,r,o){},e.prototype.dispatchWorkgroupsIndirect=function(a,r){},e.prototype.setPipeline=function(a){},e.prototype.setBindings=function(a){},e.prototype.pushDebugGroup=function(a){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(a){},e}(),Y6=65536,pU=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,dU=function(){function e(a,r){this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=ax($y),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=ex.LOWER_LEFT,this.clipSpaceNearZ=tx.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=a,this.contextAttributes=Gy(a.getContextAttributes()),ca(a)?(this.EXT_texture_norm16=a.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=a.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=a.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=a.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=a.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=a.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=a.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=a.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=a.getExtension("EXT_color_buffer_half_float"),a.getExtension("EXT_frag_depth"),a.getExtension("OES_element_index_uint"),a.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=a.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=a.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=a.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=a.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=a.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=a.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=a.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=a.getExtension("KHR_parallel_shader_compile"),ca(a)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new C5({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Po.TEXTURE_2D,mipLevelCount:1,usage:Jf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?Jr.U8_RGB_RT:Jr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=ol.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(a.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Po.TEXTURE_2D,ol.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Po.TEXTURE_2D,ol.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:fu.VERTEX,hint:Mv.STATIC}),ca(a)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Po.TEXTURE_2D_ARRAY,ol.Float),this.fallbackTexture3D=this.createFallbackTexture(Po.TEXTURE_3D,ol.Float),this.fallbackTextureCube=this.createFallbackTexture(Po.TEXTURE_CUBE_MAP,ol.Float)),this.currentMegaState.depthCompare=cs.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=sf.ALL,a.enable(a.DEPTH_TEST),a.enable(a.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new cU)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(a,r){var o=a===Po.TEXTURE_CUBE_MAP?6:1,u=r===ol.Depth?Jr.D32F:Jr.U8_RGBA_NORM,c=this.createTexture({dimension:a,format:u,usage:Jf.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1});return r===ol.Float&&c.setImageData([new Uint8Array(4*o)]),ux(c)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var a=this.gl;if(this.maxVertexAttribs=a.getParameter(Cr.MAX_VERTEX_ATTRIBS),ca(a)){this.uniformBufferMaxPageByteSize=Math.min(a.getParameter(Cr.MAX_UNIFORM_BLOCK_SIZE),Y6),this.uniformBufferWordAlignment=a.getParameter(a.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=a.getInternalformatParameter(a.RENDERBUFFER,a.DEPTH32F_STENCIL8,a.SAMPLES);this.supportedSampleCounts=r?(0,w.ev)([],(0,w.CR)(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=Y6;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(o,u){return o-u})},e.prototype.configureSwapChain=function(a,r,o){var u=this.scTexture;u.width=a,u.height=r,this.scPlatformFramebuffer=yz(o)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(a,r){switch(r===void 0&&(r=!1),a){case Jr.ALPHA:return Cr.ALPHA;case Jr.U8_LUMINANCE:case Jr.F16_LUMINANCE:case Jr.F32_LUMINANCE:return Cr.LUMINANCE;case Jr.F16_R:return Cr.R16F;case Jr.F16_RG:return Cr.RG16F;case Jr.F16_RGB:return Cr.RGB16F;case Jr.F16_RGBA:return Cr.RGBA16F;case Jr.F32_R:return Cr.R32F;case Jr.F32_RG:return Cr.RG32F;case Jr.F32_RGB:return Cr.RGB32F;case Jr.F32_RGBA:return ca(this.gl)?Cr.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:Cr.RGBA;case Jr.U8_R_NORM:return Cr.R8;case Jr.U8_RG_NORM:return Cr.RG8;case Jr.U8_RGB_NORM:case Jr.U8_RGB_RT:return Cr.RGB8;case Jr.U8_RGB_SRGB:return Cr.SRGB8;case Jr.U8_RGBA_NORM:case Jr.U8_RGBA_RT:return ca(this.gl)?Cr.RGBA8:r?Cr.RGBA4:Cr.RGBA;case Jr.U8_RGBA:return Cr.RGBA;case Jr.U8_RGBA_SRGB:case Jr.U8_RGBA_RT_SRGB:return Cr.SRGB8_ALPHA8;case Jr.U16_R:return Cr.R16UI;case Jr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case Jr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case Jr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case Jr.U16_RGBA_5551:return Cr.RGB5_A1;case Jr.U16_RGB_565:return Cr.RGB565;case Jr.U32_R:return Cr.R32UI;case Jr.S8_RGBA_NORM:return Cr.RGBA8_SNORM;case Jr.S8_RG_NORM:return Cr.RG8_SNORM;case Jr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case Jr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case Jr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case Jr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case Jr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case Jr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case Jr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case Jr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case Jr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case Jr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case Jr.D32F_S8:return ca(this.gl)?Cr.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Cr.DEPTH_STENCIL:Cr.DEPTH_COMPONENT16;case Jr.D24_S8:return ca(this.gl)?Cr.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Cr.DEPTH_STENCIL:Cr.DEPTH_COMPONENT16;case Jr.D32F:return ca(this.gl)?Cr.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Cr.DEPTH_COMPONENT:Cr.DEPTH_COMPONENT16;case Jr.D24:return ca(this.gl)?Cr.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Cr.DEPTH_COMPONENT:Cr.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(a){var r=hg(a);switch(r){case Xn.U8:return Cr.UNSIGNED_BYTE;case Xn.U16:return Cr.UNSIGNED_SHORT;case Xn.U32:return Cr.UNSIGNED_INT;case Xn.S8:return Cr.BYTE;case Xn.F16:return Cr.HALF_FLOAT;case Xn.F32:return Cr.FLOAT;case Xn.U16_PACKED_5551:return Cr.UNSIGNED_SHORT_5_5_5_1;case Xn.D32F:return ca(this.gl)?Cr.FLOAT:this.WEBGL_depth_texture?Cr.UNSIGNED_INT:Cr.UNSIGNED_BYTE;case Xn.D24:return ca(this.gl)?Cr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Cr.UNSIGNED_SHORT:Cr.UNSIGNED_BYTE;case Xn.D24S8:return ca(this.gl)?Cr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Cr.UNSIGNED_INT_24_8_WEBGL:Cr.UNSIGNED_BYTE;case Xn.D32FS8:return Cr.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateInternalTextureFormat=function(a){switch(a){case Jr.F32_R:return Cr.R32F;case Jr.F32_RG:return Cr.RG32F;case Jr.F32_RGB:return Cr.RGB32F;case Jr.F32_RGBA:return Cr.RGBA32F;case Jr.F16_R:return Cr.R16F;case Jr.F16_RG:return Cr.RG16F;case Jr.F16_RGB:return Cr.RGB16F;case Jr.F16_RGBA:return Cr.RGBA16F}return this.translateTextureFormat(a)},e.prototype.translateTextureFormat=function(a){if(W6(a)||a===Jr.F32_LUMINANCE||a===Jr.U8_LUMINANCE)return this.translateTextureInternalFormat(a);var r=ca(this.gl)||!ca(this.gl)&&!!this.WEBGL_depth_texture;switch(a){case Jr.D24_S8:case Jr.D32F_S8:return r?Cr.DEPTH_STENCIL:Cr.RGBA;case Jr.D24:case Jr.D32F:return r?Cr.DEPTH_COMPONENT:Cr.RGBA}var o=G6(a),u=mR(a);switch(u){case pa.A:return Cr.ALPHA;case pa.R:return o?Cr.RED_INTEGER:Cr.RED;case pa.RG:return o?Cr.RG_INTEGER:Cr.RG;case pa.RGB:return o?Cr.RGB_INTEGER:Cr.RGB;case pa.RGBA:return Cr.RGBA}},e.prototype.setActiveTexture=function(a){this.currentActiveTexture!==a&&(this.gl.activeTexture(a),this.currentActiveTexture=a)},e.prototype.bindVAO=function(a){this.currentBoundVAO!==a&&(ca(this.gl)?this.gl.bindVertexArray(a):this.OES_vertex_array_object.bindVertexArrayOES(a),this.currentBoundVAO=a)},e.prototype.programCompiled=function(a){yo(a.compileState!==hp.NeedsCompile),a.compileState===hp.Compiling&&(a.compileState=hp.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(a))},e.prototype.useProgram=function(a){this.currentProgram!==a&&(this.programCompiled(a),this.gl.useProgram(a.gl_program),this.currentProgram=a)},e.prototype.ensureResourceExists=function(a){if(a===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return a},e.prototype.createBuffer=function(a){return new rU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createTexture=function(a){return new C5({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createSampler=function(a){return new fU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderTarget=function(a){return new iU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderTargetFromTexture=function(a){var r=a,o=r.format,u=r.width,c=r.height,p=r.mipLevelCount;return yo(p===1),this.createRenderTarget({format:o,width:u,height:c,sampleCount:1,texture:a})},e.prototype.createProgram=function(a){var r,o,u,c=(r=a.vertex)===null||r===void 0?void 0:r.glsl;return!((o=a.vertex)===null||o===void 0)&&o.glsl&&(a.vertex.glsl=x0(this.queryVendorInfo(),"vert",a.vertex.glsl)),!((u=a.fragment)===null||u===void 0)&&u.glsl&&(a.fragment.glsl=x0(this.queryVendorInfo(),"frag",a.fragment.glsl)),this.createProgramSimple(a,c)},e.prototype.createProgramSimple=function(a,r){var o=new aU({id:this.getNextUniqueId(),device:this,descriptor:a},r);return o},e.prototype.createBindings=function(a){return new $z({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createInputLayout=function(a){return new nU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderPipeline=function(a){return new uU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createComputePass=function(){return new hU},e.prototype.createComputePipeline=function(a){return new lU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createReadback=function(){return new sU({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(a,r){return new oU({id:this.getNextUniqueId(),device:this,descriptor:{type:a,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(a){var r,o,u,c,p,g,y=a.colorAttachment;a.depthClearValue=(r=a.depthClearValue)!==null&&r!==void 0?r:"load",a.stencilClearValue=(o=a.stencilClearValue)!==null&&o!==void 0?o:"load";for(var S=0;S<y.length;S++)a.colorAttachmentLevel||(a.colorAttachmentLevel=[]),a.colorAttachmentLevel[S]=(u=a.colorAttachmentLevel[S])!==null&&u!==void 0?u:0,a.colorResolveToLevel||(a.colorResolveToLevel=[]),a.colorResolveToLevel[S]=(c=a.colorResolveToLevel[S])!==null&&c!==void 0?c:0,a.colorClearColor||(a.colorClearColor=[]),a.colorClearColor[S]=(p=a.colorClearColor[S])!==null&&p!==void 0?p:"load",a.colorStore||(a.colorStore=[]),a.colorStore[S]=(g=a.colorStore[S])!==null&&g!==void 0?g:!1},e.prototype.createRenderPass=function(a){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=a,this.formatRenderPassDescriptor(a);var r=a.colorAttachment,o=a.colorAttachmentLevel,u=a.colorClearColor,c=a.colorResolveTo,p=a.colorResolveToLevel,g=a.depthStencilAttachment,y=a.depthClearValue,S=a.stencilClearValue,O=a.depthStencilResolveTo;this.setRenderPassParametersBegin(r.length);for(var L=0;L<r.length;L++)this.setRenderPassParametersColor(L,r[L],o[L],c[L],p[L]);this.setRenderPassParametersDepthStencil(g,O),this.validateCurrentAttachments();for(var L=0;L<r.length;L++){var V=u[L];V!=="load"&&this.setRenderPassParametersClearColor(L,V.r,V.g,V.b,V.a)}return this.setRenderPassParametersClearDepthStencil(y,S),this},e.prototype.submitPass=function(a){yo(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(a,r,o,u,c,p){var g=this.gl,y=a,S=u;if(yo(S.mipLevelCount===1),yo(y.mipLevelCount===1),ca(g))y===this.scTexture?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,y,0)),g.bindFramebuffer(g.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(g.READ_FRAMEBUFFER,g.COLOR_ATTACHMENT0,S,0),g.blitFramebuffer(c,p,c+S.width,p+S.height,r,o,r+S.width,o+S.height,g.COLOR_BUFFER_BIT,g.LINEAR),g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null);else if(y===this.scTexture){var O=this.createRenderTargetFromTexture(u);this.submitBlitRenderPass(O,y)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(a,r,o){switch(a){case Jr.BC1_SRGB:case Jr.BC2_SRGB:case Jr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?w5(r,o,4,4):!1;case Jr.BC1:case Jr.BC2:case Jr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?w5(r,o,4,4):!1;case Jr.BC4_UNORM:case Jr.BC4_SNORM:case Jr.BC5_UNORM:case Jr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?w5(r,o,4,4):!1;case Jr.U16_R_NORM:case Jr.U16_RG_NORM:case Jr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case Jr.F32_R:case Jr.F32_RG:case Jr.F32_RGB:case Jr.F32_RGBA:return this.OES_texture_float_linear!==null;case Jr.F16_R:case Jr.F16_RG:case Jr.F16_RGB:case Jr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(a){var r=this.gl;if(a.compileState===hp.NeedsCompile)throw new Error("whoops");if(a.compileState===hp.Compiling){var o=void 0;return this.KHR_parallel_shader_compile!==null?o=r.getProgramParameter(a.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):o=!0,o&&this.programCompiled(a),o}return a.compileState===hp.NeedsBind||a.compileState===hp.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(a){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(a){var r=a;return r},e.prototype.setResourceName=function(a,r){if(a.name=r,a.type===ds.Buffer)for(var o=a.gl_buffer_pages,u=0;u<o.length;u++)CE(o[u],"".concat(r," Page ").concat(u));else if(a.type===ds.Texture)CE(ux(a),r);else if(a.type===ds.Sampler)CE(E5(a),r);else if(a.type===ds.RenderTarget){var c=a.gl_renderbuffer;c!==null&&CE(c,r)}else a.type===ds.InputLayout&&CE(a.vao,r)},e.prototype.setResourceLeakCheck=function(a,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(a,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(a){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(a){},e.prototype.programPatched=function(a,r){yo(this.shaderDebug)},e.prototype.getBufferData=function(a,r,o){o===void 0&&(o=0);var u=this.gl;ca(u)&&(u.bindBuffer(u.COPY_READ_BUFFER,sx(a,o*4)),u.getBufferSubData(u.COPY_READ_BUFFER,o*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(a){a===void 0&&(a=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=a},e.prototype.debugGroupStatisticsBufferUpload=function(a){a===void 0&&(a=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=a},e.prototype.debugGroupStatisticsTextureBind=function(a){a===void 0&&(a=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=a},e.prototype.debugGroupStatisticsTriangles=function(a){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=a},e.prototype.reportShaderError=function(a,r){var o=this.gl,u=o.getShaderParameter(a,o.COMPILE_STATUS);if(!u){console.error(bz(r));var c=o.getExtension("WEBGL_debug_shaders");c&&console.error(c.getTranslatedShaderSource(a)),console.error(o.getShaderInfoLog(a))}return u},e.prototype.checkProgramCompilationForErrors=function(a){var r=this.gl,o=a.gl_program;if(!r.getProgramParameter(o,r.LINK_STATUS)){var u=a.descriptor;if(!this.reportShaderError(a.gl_shader_vert,u.vertex.glsl)||!this.reportShaderError(a.gl_shader_frag,u.fragment.glsl))return;console.error(r.getProgramInfoLog(a.gl_program))}},e.prototype.bindFramebufferAttachment=function(a,r,o,u){var c=this.gl;if(y0(o))c.framebufferRenderbuffer(a,r,c.RENDERBUFFER,null);else if(o.type===ds.RenderTarget)o.gl_renderbuffer!==null?c.framebufferRenderbuffer(a,r,c.RENDERBUFFER,o.gl_renderbuffer):o.texture!==null&&c.framebufferTexture2D(a,r,Cr.TEXTURE_2D,ux(o.texture),u);else if(o.type===ds.Texture){var p=ux(o);o.dimension===Po.TEXTURE_2D?c.framebufferTexture2D(a,r,Cr.TEXTURE_2D,p,u):ca(c)&&(o.dimension,Po.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(a,r){var o=this.gl,u=y0(r)?$i.Depth|$i.Stencil:rx(r.format),c=!!(u&$i.Depth),p=!!(u&$i.Stencil);if(c&&p){var g=ca(this.gl)||!ca(this.gl)&&!!this.WEBGL_depth_texture;g?this.bindFramebufferAttachment(a,o.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(a,o.DEPTH_ATTACHMENT,r,0)}else c?(this.bindFramebufferAttachment(a,o.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(a,o.STENCIL_ATTACHMENT,null,0)):p&&(this.bindFramebufferAttachment(a,o.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(a,o.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var a=-1,r=-1,o=-1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];c!==null&&(a===-1?(a=c.sampleCount,r=c.width,o=c.height):(yo(a===c.sampleCount),yo(r===c.width),yo(o===c.height)))}this.currentDepthStencilAttachment&&(a===-1?a=this.currentDepthStencilAttachment.sampleCount:(yo(a===this.currentDepthStencilAttachment.sampleCount),yo(r===this.currentDepthStencilAttachment.width),yo(o===this.currentDepthStencilAttachment.height))),this.currentSampleCount=a},e.prototype.setRenderPassParametersBegin=function(a){var r=this.gl;if(ca(r)?r.bindFramebuffer(Cr.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(Cr.FRAMEBUFFER,this.renderPassDrawFramebuffer),ca(r)?r.drawBuffers([Cr.COLOR_ATTACHMENT0,Cr.COLOR_ATTACHMENT1,Cr.COLOR_ATTACHMENT2,Cr.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Cr.COLOR_ATTACHMENT0_WEBGL,Cr.COLOR_ATTACHMENT1_WEBGL,Cr.COLOR_ATTACHMENT2_WEBGL,Cr.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var o=a;o<this.currentColorAttachments.length;o++){var u=ca(r)?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,c=ca(r)?Cr.COLOR_ATTACHMENT0:Cr.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(u,c+o,Cr.RENDERBUFFER,null),r.framebufferTexture2D(u,c+o,Cr.TEXTURE_2D,null,0)}this.currentColorAttachments.length=a},e.prototype.setRenderPassParametersColor=function(a,r,o,u,c){var p=this.gl,g=ca(p);(this.currentColorAttachments[a]!==r||this.currentColorAttachmentLevels[a]!==o)&&(this.currentColorAttachments[a]=r,this.currentColorAttachmentLevels[a]=o,(g||!g&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(g?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,(g?Cr.COLOR_ATTACHMENT0:Cr.COLOR_ATTACHMENT0_WEBGL)+a,r,o),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[a]!==u||this.currentColorResolveToLevels[a]!==c)&&(this.currentColorResolveTos[a]=u,this.currentColorResolveToLevels[a]=c,u!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(a,r){var o=this.gl;this.currentDepthStencilAttachment!==a&&(this.currentDepthStencilAttachment=a,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(ca(o)?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(a,r,o,u,c){var p=this.gl;if(this.OES_draw_buffers_indexed!==null){var g=this.currentMegaState.attachmentsState[a];g&&g.channelWriteMask!==sf.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(a,!0,!0,!0,!0),g.channelWriteMask=sf.ALL)}else{var g=this.currentMegaState.attachmentsState[0];g&&g.channelWriteMask!==sf.ALL&&(p.colorMask(!0,!0,!0,!0),g.channelWriteMask=sf.ALL)}this.setScissorRectEnabled(!1),ca(p)?p.clearBufferfv(p.COLOR,a,[r,o,u,c]):(p.clearColor(r,o,u,c),p.clear(p.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(a,r){a===void 0&&(a="load"),r===void 0&&(r="load");var o=this.gl;a!=="load"&&(yo(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(o.depthMask(!0),this.currentMegaState.depthWrite=!0),ca(o)?o.clearBufferfv(o.DEPTH,0,[a]):(o.clearDepth(a),o.clear(o.DEPTH_BUFFER_BIT))),r!=="load"&&(yo(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(o.enable(o.STENCIL_TEST),o.stencilMask(255),this.currentMegaState.stencilWrite=!0),ca(o)?o.clearBufferiv(o.STENCIL,0,[r]):(o.clearStencil(r),o.clear(o.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(a){var r,o=this.gl,u=a,c=u.uniformBufferBindings,p=u.samplerBindings,g=u.bindingLayouts;yo(0<g.bindingLayoutTables.length);var y=g.bindingLayoutTables[0];yo(c.length>=y.numUniformBuffers),yo(p.length>=y.numSamplers);for(var S=0;S<c.length;S++){var O=c[S];if(O.size!==0){var L=y.firstUniformBuffer+S,V=O.buffer,G=O.offset||0,he=O.size||V.byteSize;if(V!==this.currentUniformBuffers[L]||G!==this.currentUniformBufferByteOffsets[L]||he!==this.currentUniformBufferByteSizes[L]){var ve=G%V.pageByteSize,Pe=V.gl_buffer_pages[G/V.pageByteSize|0];yo(ve+he<=V.pageByteSize),ca(o)&&o.bindBufferRange(o.UNIFORM_BUFFER,L,Pe,ve,he),this.currentUniformBuffers[L]=V,this.currentUniformBufferByteOffsets[L]=G,this.currentUniformBufferByteSizes[L]=he}}}for(var S=0;S<y.numSamplers;S++){var O=p[S],Xe=y.firstSampler+S,gt=O!==null&&O.sampler!==null?E5(O.sampler):null,_t=O!==null&&O.texture!==null?ux(O.texture):null;if(this.currentSamplers[Xe]!==gt&&(ca(o)&&o.bindSampler(Xe,gt),this.currentSamplers[Xe]=gt),this.currentTextures[Xe]!==_t){if(this.setActiveTexture(o.TEXTURE0+Xe),_t!==null){var zt=Gy(O).texture,Xt=zt.gl_target,nr=zt.width,ar=zt.height;O.texture.textureIndex=Xe,o.bindTexture(Xt,_t),ca(o)||(r=O.sampler)===null||r===void 0||r.setTextureParameters(Xt,nr,ar),this.debugGroupStatisticsTextureBind()}else{var Tr=(0,w.pi)((0,w.pi)({},O),N6),Zr=Tr.dimension,rn=Tr.formatKind,Xt=tU(Zr);o.bindTexture(Xt,this.getFallbackTexture((0,w.pi)({gl_target:Xt,formatKind:rn},Tr)))}this.currentTextures[Xe]=_t}}},e.prototype.setViewport=function(a,r,o,u){var c=this.gl;c.viewport(a,r,o,u)},e.prototype.setScissorRect=function(a,r,o,u){var c=this.gl;this.setScissorRectEnabled(!0),c.scissor(a,r,o,u)},e.prototype.applyAttachmentStateIndexed=function(a,r,o){var u=this.gl,c=this.OES_draw_buffers_indexed;r.channelWriteMask!==o.channelWriteMask&&(c.colorMaskiOES(a,!!(o.channelWriteMask&sf.RED),!!(o.channelWriteMask&sf.GREEN),!!(o.channelWriteMask&sf.BLUE),!!(o.channelWriteMask&sf.ALPHA)),r.channelWriteMask=o.channelWriteMask);var p=r.rgbBlendState.blendMode!==o.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==o.alphaBlendState.blendMode,g=r.rgbBlendState.blendSrcFactor!==o.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==o.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==o.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==o.alphaBlendState.blendDstFactor;(g||p)&&(b0(r.rgbBlendState)&&b0(r.alphaBlendState)?c.enableiOES(a,u.BLEND):b0(o.rgbBlendState)&&b0(o.alphaBlendState)&&c.disableiOES(a,u.BLEND)),p&&(c.blendEquationSeparateiOES(a,o.rgbBlendState.blendMode,o.alphaBlendState.blendMode),r.rgbBlendState.blendMode=o.rgbBlendState.blendMode,r.alphaBlendState.blendMode=o.alphaBlendState.blendMode),g&&(c.blendFuncSeparateiOES(a,o.rgbBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor,o.alphaBlendState.blendSrcFactor,o.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=o.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=o.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=o.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=o.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(a,r){var o=this.gl;a.channelWriteMask!==r.channelWriteMask&&(o.colorMask(!!(r.channelWriteMask&sf.RED),!!(r.channelWriteMask&sf.GREEN),!!(r.channelWriteMask&sf.BLUE),!!(r.channelWriteMask&sf.ALPHA)),a.channelWriteMask=r.channelWriteMask);var u=a.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||a.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,c=a.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||a.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||a.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||a.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(c||u)&&(b0(a.rgbBlendState)&&b0(a.alphaBlendState)?o.enable(o.BLEND):b0(r.rgbBlendState)&&b0(r.alphaBlendState)&&o.disable(o.BLEND)),u&&(o.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),a.rgbBlendState.blendMode=r.rgbBlendState.blendMode,a.alphaBlendState.blendMode=r.alphaBlendState.blendMode),c&&(o.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),a.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,a.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,a.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,a.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(a){var r=this.gl,o=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var u=0;u<a.attachmentsState.length;u++)this.applyAttachmentStateIndexed(u,o.attachmentsState[0],a.attachmentsState[0]);else yo(a.attachmentsState.length===1),this.applyAttachmentState(o.attachmentsState[0],a.attachmentsState[0]);if(O6(o.blendConstant,a.blendConstant)||(r.blendColor(a.blendConstant.r,a.blendConstant.g,a.blendConstant.b,a.blendConstant.a),k6(o.blendConstant,a.blendConstant)),o.depthCompare!==a.depthCompare&&(r.depthFunc(a.depthCompare),o.depthCompare=a.depthCompare),!!o.depthWrite!=!!a.depthWrite&&(r.depthMask(a.depthWrite),o.depthWrite=a.depthWrite),!!o.stencilWrite!=!!a.stencilWrite&&(r.stencilMask(a.stencilWrite?255:0),o.stencilWrite=a.stencilWrite),!bR(o.stencilFront,a.stencilFront)){var c=a.stencilFront,p=c.passOp,g=c.failOp,y=c.depthFailOp,S=c.compare;(o.stencilFront.passOp!==p||o.stencilFront.failOp!==g||o.stencilFront.depthFailOp!==y)&&(r.stencilOpSeparate(r.FRONT,g,y,p),o.stencilFront.passOp=p,o.stencilFront.failOp=g,o.stencilFront.depthFailOp=y),o.stencilFront.compare!==S&&(this.setStencilReference(0),o.stencilFront.compare=S)}if(!bR(o.stencilBack,a.stencilBack)){var O=a.stencilBack,p=O.passOp,g=O.failOp,y=O.depthFailOp,S=O.compare;(o.stencilBack.passOp!==p||o.stencilBack.failOp!==g||o.stencilBack.depthFailOp!==y)&&(r.stencilOpSeparate(r.BACK,g,y,p),o.stencilBack.passOp=p,o.stencilBack.failOp=g,o.stencilBack.depthFailOp=y),o.stencilBack.compare!==S&&(this.setStencilReference(0),o.stencilBack.compare=S)}o.cullMode!==a.cullMode&&(o.cullMode===fp.NONE?r.enable(r.CULL_FACE):a.cullMode===fp.NONE&&r.disable(r.CULL_FACE),a.cullMode===fp.BACK?r.cullFace(r.BACK):a.cullMode===fp.FRONT?r.cullFace(r.FRONT):a.cullMode===fp.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),o.cullMode=a.cullMode),o.frontFace!==a.frontFace&&(r.frontFace(a.frontFace),o.frontFace=a.frontFace),o.polygonOffset!==a.polygonOffset&&(a.polygonOffset?(r.polygonOffset(1,1),r.enable(r.POLYGON_OFFSET_FILL)):r.disable(r.POLYGON_OFFSET_FILL),o.polygonOffset=a.polygonOffset)},e.prototype.validatePipelineFormats=function(a){for(var r=0;r<this.currentColorAttachments.length;r++)var o=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&yo(this.currentDepthStencilAttachment.format===a.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&yo(this.currentSampleCount===a.sampleCount)},e.prototype.setPipeline=function(a){this.currentPipeline=a,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===hp.NeedsBind){var o=this.gl,u=r.gl_program,c=r.descriptor,p=X6(c.vertex.glsl,pU);if(ca(o))for(var g=0;g<p.length;g++){var y=(0,w.CR)(p[g],2),S=y[1],O=o.getUniformBlockIndex(u,S);O!==-1&&O!==4294967295&&o.uniformBlockBinding(u,O,g)}for(var L=X6(c.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),g=0;g<L.length;g++){var V=(0,w.CR)(L[g],3),G=V[1],he=V[2],ve=o.getUniformLocation(u,G);o.uniform1i(ve,parseInt(he))}r.compileState=hp.ReadyToUse}},e.prototype.setVertexInput=function(a,r,o){var u,c,p;if(a!==null){yo(this.currentPipeline.inputLayout===a);var g=a;this.bindVAO(g.vao);for(var y=this.gl,S=0;S<g.vertexBufferDescriptors.length;S++){var O=g.vertexBufferDescriptors[S],L=O.arrayStride,V=O.attributes;try{for(var G=(u=void 0,(0,w.XA)(V)),he=G.next();!he.done;he=G.next()){var ve=he.value,Pe=ve.shaderLocation,Xe=ve.offset,gt=ca(y)?Pe:(p=g.program.attributes[Pe])===null||p===void 0?void 0:p.location;if(!y0(gt)){var _t=r[S];if(_t===null)continue;var zt=ve.vertexFormat;y.bindBuffer(y.ARRAY_BUFFER,sx(_t.buffer));var Xt=(_t.offset||0)+Xe;y.vertexAttribPointer(gt,zt.size,zt.type,zt.normalized,L,Xt)}}}catch(ar){u={error:ar}}finally{try{he&&!he.done&&(c=G.return)&&c.call(G)}finally{if(u)throw u.error}}}if(yo(o!==null==(g.indexBufferFormat!==null)),o!==null){var nr=o.buffer;yo(nr.usage===fu.INDEX),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,sx(nr)),this.currentIndexBufferByteOffset=o.offset||0}else this.currentIndexBufferByteOffset=null}else yo(this.currentPipeline.inputLayout===null),yo(o===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(a){this.currentStencilRef!==a&&(this.currentStencilRef=a,this.applyStencil())},e.prototype.draw=function(a,r,o,u){var c,p=this.gl,g=this.currentPipeline;if(r){var y=[g.drawMode,o||0,a,r];ca(p)?p.drawArraysInstanced.apply(p,(0,w.ev)([],(0,w.CR)(y),!1)):(c=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(c,(0,w.ev)([],(0,w.CR)(y),!1))}else p.drawArrays(g.drawMode,o,a);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(a/3*Math.max(r,1))},e.prototype.drawIndexed=function(a,r,o,u,c){var p,g=this.gl,y=this.currentPipeline,S=Gy(y.inputLayout),O=Gy(this.currentIndexBufferByteOffset)+o*S.indexBufferCompByteSize;if(r){var L=[y.drawMode,a,S.indexBufferType,O,r];ca(g)?g.drawElementsInstanced.apply(g,(0,w.ev)([],(0,w.CR)(L),!1)):(p=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(p,(0,w.ev)([],(0,w.CR)(L),!1))}else g.drawElements(y.drawMode,a,S.indexBufferType,O);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(a/3*Math.max(r,1))},e.prototype.drawIndirect=function(a,r){},e.prototype.drawIndexedIndirect=function(a,r){},e.prototype.beginOcclusionQuery=function(a){var r=this.gl;if(ca(r)){var o=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(o.gl_query_type,o.gl_query[a])}},e.prototype.endOcclusionQuery=function(){var a=this.gl;if(ca(a)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;a.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(a){var r=a;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(a){},e.prototype.endPass=function(){for(var a=this.gl,r=ca(a),o=!1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];if(c!==null){var p=this.currentColorResolveTos[u],g=!1;p!==null&&(yo(c.width===p.width&&c.height===p.height),this.setScissorRectEnabled(!1),r&&a.bindFramebuffer(a.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u]),g=!0,p===this.scTexture?a.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.scPlatformFramebuffer):(a.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&a.framebufferTexture2D(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,p.gl_texture,this.currentColorResolveToLevels[u])),r?(a.blitFramebuffer(0,0,c.width,c.height,0,0,p.width,p.height,a.COLOR_BUFFER_BIT,a.LINEAR),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(c,p),o=!0),this.currentRenderPassDescriptor.colorStore[u]||g||(a.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,a.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u])),a.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var y=this.currentDepthStencilAttachment;if(y){var S=this.currentDepthStencilResolveTo,g=!1;S&&(yo(y.width===S.width&&y.height===S.height),this.setScissorRectEnabled(!1),a.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),a.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,y),this.bindFramebufferDepthStencilAttachment(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,S)),g=!0,r&&a.blitFramebuffer(0,0,y.width,y.height,0,0,S.width,S.height,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,null),o=!0),this.currentRenderPassDescriptor.depthStencilStore||(g||(a.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,y),g=!0),r&&a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[a.DEPTH_STENCIL_ATTACHMENT])),g&&a.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}o||a.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(a){if(this.currentScissorEnabled!==a){var r=this.gl;a?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=a}},e.prototype.applyStencil=function(){y0(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Cr.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,255),this.gl.stencilFuncSeparate(Cr.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,255))},e.prototype.getFallbackTexture=function(a){var r=a.gl_target,o=a.formatKind;if(r===Cr.TEXTURE_2D)return o===ol.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Cr.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Cr.TEXTURE_3D)return this.fallbackTexture3D;if(r===Cr.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(a,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:fu.VERTEX|fu.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Wy.VERTEX,attributes:[{format:Jr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Gl.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[Jr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:ax($y)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:a.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:a}));var o=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var u=this.createRenderPass({colorAttachment:[a],colorResolveTo:[r],colorClearColor:[gz]}),c=this.getCanvas(),p=c.width,g=c.height;u.setPipeline(this.blitRenderPipeline),u.setBindings(this.blitBindings),u.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),u.setViewport(0,0,p,g),this.gl.disable(this.gl.BLEND),u.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=o,this.inBlitRenderPass=!1},e}(),vU=function(){function e(a){this.pluginOptions=a}return e.prototype.createSwapChain=function(a){return(0,w.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,S,O,L,V;return(0,w.Jh)(this,function(G){return r=this.pluginOptions,o=r.targets,u=r.xrCompatible,c=r.antialias,p=c===void 0?!1:c,g=r.preserveDrawingBuffer,y=g===void 0?!1:g,S=r.premultipliedAlpha,O=S===void 0?!0:S,L={antialias:p,preserveDrawingBuffer:y,stencil:!0,premultipliedAlpha:O,xrCompatible:u},this.handleContextEvents(a),o.includes("webgl2")&&(V=a.getContext("webgl2",L)||a.getContext("experimental-webgl2",L)),!V&&o.includes("webgl1")&&(V=a.getContext("webgl",L)||a.getContext("experimental-webgl",L)),[2,new dU(V,{shaderDebug:!0,trackResources:!0})]})})},e.prototype.handleContextEvents=function(a){var r=this.pluginOptions,o=r.onContextLost,u=r.onContextRestored,c=r.onContextCreationError;c&&a.addEventListener("webglcontextcreationerror",c,!1),o&&a.addEventListener("webglcontextlost",o,!1),u&&a.addEventListener("webglcontextrestored",u,!1)},e}();let $l;const K6=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&K6.decode();let TE=null;function wR(){return(TE===null||TE.byteLength===0)&&(TE=new Uint8Array($l.memory.buffer)),TE}function CR(e,a){return e=e>>>0,K6.decode(wR().subarray(e,e+a))}const um=new Array(128).fill(void 0);um.push(void 0,null,!0,!1);let AE=um.length;function gU(e){AE===um.length&&um.push(um.length+1);const a=AE;return AE=um[a],um[a]=e,a}function TR(e){return um[e]}function mU(e){e<132||(um[e]=AE,AE=e)}function yU(e){const a=TR(e);return mU(e),a}let ME=0;const AR=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},_U=typeof AR.encodeInto=="function"?function(e,a){return AR.encodeInto(e,a)}:function(e,a){const r=AR.encode(e);return a.set(r),{read:e.length,written:r.length}};function T5(e,a,r){if(r===void 0){const g=AR.encode(e),y=a(g.length,1)>>>0;return wR().subarray(y,y+g.length).set(g),ME=g.length,y}let o=e.length,u=a(o,1)>>>0;const c=wR();let p=0;for(;p<o;p++){const g=e.charCodeAt(p);if(g>127)break;c[u+p]=g}if(p!==o){p!==0&&(e=e.slice(p)),u=r(u,o,o=p+e.length*3,1)>>>0;const g=wR().subarray(u+p,u+o),y=_U(e,g);p+=y.written}return ME=p,u}let RE=null;function MR(){return(RE===null||RE.byteLength===0)&&(RE=new Int32Array($l.memory.buffer)),RE}function xU(e,a,r){let o,u;try{const g=$l.__wbindgen_add_to_stack_pointer(-16),y=T5(e,$l.__wbindgen_malloc,$l.__wbindgen_realloc),S=ME,O=T5(a,$l.__wbindgen_malloc,$l.__wbindgen_realloc),L=ME;$l.glsl_compile(g,y,S,O,L,r);var c=MR()[g/4+0],p=MR()[g/4+1];return o=c,u=p,CR(c,p)}finally{$l.__wbindgen_add_to_stack_pointer(16),$l.__wbindgen_free(o,u,1)}}class IE{static __wrap(a){a=a>>>0;const r=Object.create(IE.prototype);return r.__wbg_ptr=a,r}__destroy_into_raw(){const a=this.__wbg_ptr;return this.__wbg_ptr=0,a}free(){const a=this.__destroy_into_raw();$l.__wbg_wgslcomposer_free(a)}constructor(){const a=$l.wgslcomposer_new();return IE.__wrap(a)}wgsl_compile(a){let r,o;try{const p=$l.__wbindgen_add_to_stack_pointer(-16),g=T5(a,$l.__wbindgen_malloc,$l.__wbindgen_realloc),y=ME;$l.wgslcomposer_wgsl_compile(p,this.__wbg_ptr,g,y);var u=MR()[p/4+0],c=MR()[p/4+1];return r=u,o=c,CR(u,c)}finally{$l.__wbindgen_add_to_stack_pointer(16),$l.__wbindgen_free(r,o,1)}}}function bU(e,a){return iB(this,null,function*(){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(e,a)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const r=yield e.arrayBuffer();return yield WebAssembly.instantiate(r,a)}else{const r=yield WebAssembly.instantiate(e,a);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}})}function SU(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(a,r){const o=CR(a,r);return gU(o)},e.wbg.__wbindgen_object_drop_ref=function(a){yU(a)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(a){console.log(TR(a))},e.wbg.__wbg_log_576ca876af0d4a77=function(a,r){console.log(TR(a),TR(r))},e.wbg.__wbindgen_throw=function(a,r){throw new Error(CR(a,r))},e}function EU(e,a){return $l=e.exports,q6.__wbindgen_wasm_module=a,RE=null,TE=null,$l}function q6(e){return iB(this,null,function*(){if($l!==void 0)return $l;const a=SU();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=yield bU(yield e,a);return EU(r,o)})}var Nh;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Nh||(Nh={}));var A5;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(A5||(A5={}));function wU(e){var a=0;return e&Jf.SAMPLED&&(a|=Nh.TEXTURE_BINDING|Nh.COPY_DST),e&Jf.RENDER_TARGET&&(a|=Nh.RENDER_ATTACHMENT|Nh.TEXTURE_BINDING|Nh.COPY_SRC|Nh.COPY_DST),a}function M5(e){if(e===Jr.U8_R_NORM)return"r8unorm";if(e===Jr.U8_RG_NORM)return"rg8unorm";if(e===Jr.U8_RGBA_RT)return"bgra8unorm";if(e===Jr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===Jr.U8_RGBA_NORM)return"rgba8unorm";if(e===Jr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===Jr.S8_R_NORM)return"r8snorm";if(e===Jr.S8_RG_NORM)return"rg8snorm";if(e===Jr.S8_RGBA_NORM)return"rgba8snorm";if(e===Jr.U32_R)return"r32uint";if(e===Jr.F16_RGBA)return"rgba16float";if(e===Jr.F32_RGBA)return"rgba32float";if(e===Jr.D24)return"depth24plus";if(e===Jr.D24_S8)return"depth24plus-stencil8";if(e===Jr.D32F)return"depth32float";if(e===Jr.D32F_S8)return"depth32float-stencil8";if(e===Jr.BC1)return"bc1-rgba-unorm";if(e===Jr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===Jr.BC2)return"bc2-rgba-unorm";if(e===Jr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===Jr.BC3)return"bc3-rgba-unorm";if(e===Jr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===Jr.BC4_SNORM)return"bc4-r-snorm";if(e===Jr.BC4_UNORM)return"bc4-r-unorm";if(e===Jr.BC5_SNORM)return"bc5-rg-snorm";if(e===Jr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function CU(e){if(e===Po.TEXTURE_2D)return"2d";if(e===Po.TEXTURE_CUBE_MAP)return"2d";if(e===Po.TEXTURE_2D_ARRAY)return"2d";if(e===Po.TEXTURE_3D)return"3d";throw new Error("whoops")}function TU(e){if(e===Po.TEXTURE_2D)return"2d";if(e===Po.TEXTURE_CUBE_MAP)return"cube";if(e===Po.TEXTURE_2D_ARRAY)return"2d-array";if(e===Po.TEXTURE_3D)return"3d";throw new Error("whoops")}function AU(e){var a=0;return e&fu.INDEX&&(a|=GPUBufferUsage.INDEX),e&fu.VERTEX&&(a|=GPUBufferUsage.VERTEX),e&fu.UNIFORM&&(a|=GPUBufferUsage.UNIFORM),e&fu.STORAGE&&(a|=GPUBufferUsage.STORAGE),e&fu.COPY_SRC&&(a|=GPUBufferUsage.COPY_SRC),a|=GPUBufferUsage.COPY_DST,a}function R5(e){if(e===Fh.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===Fh.REPEAT)return"repeat";if(e===Fh.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function Q6(e){if(e===xl.BILINEAR)return"linear";if(e===xl.POINT)return"nearest";throw new Error("whoops")}function MU(e){if(e===_c.LINEAR)return"linear";if(e===_c.NEAREST)return"nearest";if(e===_c.NO_MIP)return"nearest";throw new Error("whoops")}function lx(e){var a=e;return a.gpuBuffer}function RU(e){var a=e;return a.gpuSampler}function IU(e){var a=e;return a.querySet}function PU(e){if(e===gR.OcclusionConservative)return"occlusion";throw new Error("whoops")}function OU(e){switch(e){case Gl.TRIANGLES:return"triangle-list";case Gl.POINTS:return"point-list";case Gl.TRIANGLE_STRIP:return"triangle-strip";case Gl.LINES:return"line-list";case Gl.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function kU(e){if(e===fp.NONE)return"none";if(e===fp.FRONT)return"front";if(e===fp.BACK)return"back";throw new Error("whoops")}function DU(e){if(e===xE.CCW)return"ccw";if(e===xE.CW)return"cw";throw new Error("whoops")}function LU(e,a){return{topology:OU(e),cullMode:kU(a.cullMode),frontFace:DU(a.frontFace)}}function J6(e){if(e===No.ZERO)return"zero";if(e===No.ONE)return"one";if(e===No.SRC)return"src";if(e===No.ONE_MINUS_SRC)return"one-minus-src";if(e===No.DST)return"dst";if(e===No.ONE_MINUS_DST)return"one-minus-dst";if(e===No.SRC_ALPHA)return"src-alpha";if(e===No.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===No.DST_ALPHA)return"dst-alpha";if(e===No.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===No.CONST)return"constant";if(e===No.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===No.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function FU(e){if(e===Hc.ADD)return"add";if(e===Hc.SUBSTRACT)return"subtract";if(e===Hc.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===Hc.MIN)return"min";if(e===Hc.MAX)return"max";throw new Error("whoops")}function eN(e){return{operation:FU(e.blendMode),srcFactor:J6(e.blendSrcFactor),dstFactor:J6(e.blendDstFactor)}}function tN(e){return e.blendMode===Hc.ADD&&e.blendSrcFactor===No.ONE&&e.blendDstFactor===No.ZERO}function BU(e){if(!(tN(e.rgbBlendState)&&tN(e.alphaBlendState)))return{color:eN(e.rgbBlendState),alpha:eN(e.alphaBlendState)}}function NU(e,a){return{format:M5(a),blend:BU(e),writeMask:e.channelWriteMask}}function zU(e,a){return a.attachmentsState.map(function(r,o){return NU(r,e[o])})}function RR(e){if(e===cs.NEVER)return"never";if(e===cs.LESS)return"less";if(e===cs.EQUAL)return"equal";if(e===cs.LEQUAL)return"less-equal";if(e===cs.GREATER)return"greater";if(e===cs.NOTEQUAL)return"not-equal";if(e===cs.GEQUAL)return"greater-equal";if(e===cs.ALWAYS)return"always";throw new Error("whoops")}function cx(e){if(e===eh.KEEP)return"keep";if(e===eh.REPLACE)return"replace";if(e===eh.ZERO)return"zero";if(e===eh.DECREMENT_CLAMP)return"decrement-clamp";if(e===eh.DECREMENT_WRAP)return"decrement-wrap";if(e===eh.INCREMENT_CLAMP)return"increment-clamp";if(e===eh.INCREMENT_WRAP)return"increment-wrap";if(e===eh.INVERT)return"invert";throw new Error("whoops")}function UU(e,a){if(!y0(e))return{format:M5(e),depthWriteEnabled:!!a.depthWrite,depthCompare:RR(a.depthCompare),depthBias:a.polygonOffset?1:0,depthBiasSlopeScale:a.polygonOffset?1:0,stencilFront:{compare:RR(a.stencilFront.compare),passOp:cx(a.stencilFront.passOp),failOp:cx(a.stencilFront.failOp),depthFailOp:cx(a.stencilFront.depthFailOp)},stencilBack:{compare:RR(a.stencilBack.compare),passOp:cx(a.stencilBack.passOp),failOp:cx(a.stencilBack.failOp),depthFailOp:cx(a.stencilBack.depthFailOp)},stencilReadMask:1,stencilWriteMask:1}}function ZU(e){if(e!==null){if(e===Jr.U16_R)return"uint16";if(e===Jr.U32_R)return"uint32";throw new Error("whoops")}}function VU(e){if(e===Wy.VERTEX)return"vertex";if(e===Wy.INSTANCE)return"instance";throw new Error("whoops")}function HU(e){if(e===Jr.U8_R)return"uint8x2";if(e===Jr.U8_RG)return"uint8x2";if(e===Jr.U8_RGB)return"uint8x4";if(e===Jr.U8_RGBA)return"uint8x4";if(e===Jr.U8_RG_NORM)return"unorm8x2";if(e===Jr.U8_RGBA_NORM)return"unorm8x4";if(e===Jr.S8_RGB_NORM)return"snorm8x4";if(e===Jr.S8_RGBA_NORM)return"snorm8x4";if(e===Jr.U16_RG_NORM)return"unorm16x2";if(e===Jr.U16_RGBA_NORM)return"unorm16x4";if(e===Jr.S16_RG_NORM)return"snorm16x2";if(e===Jr.S16_RGBA_NORM)return"snorm16x4";if(e===Jr.S16_RG)return"uint16x2";if(e===Jr.F16_RG)return"float16x2";if(e===Jr.F16_RGBA)return"float16x4";if(e===Jr.F32_R)return"float32";if(e===Jr.F32_RG)return"float32x2";if(e===Jr.F32_RGB)return"float32x3";if(e===Jr.F32_RGBA)return"float32x4";throw"whoops"}function jU(e){var a=hg(e);switch(a){case Xn.BC1:case Xn.BC2:case Xn.BC3:case Xn.BC4_SNORM:case Xn.BC4_UNORM:case Xn.BC5_SNORM:case Xn.BC5_UNORM:return!0;default:return!1}}function WU(e){var a=hg(e);switch(a){case Xn.BC1:case Xn.BC2:case Xn.BC3:case Xn.BC4_SNORM:case Xn.BC4_UNORM:case Xn.BC5_SNORM:case Xn.BC5_UNORM:return 4;default:return 1}}function rN(e,a,r,o){switch(r===void 0&&(r=!1),e){case Jr.S8_R:case Jr.S8_R_NORM:case Jr.S8_RG_NORM:case Jr.S8_RGB_NORM:case Jr.S8_RGBA_NORM:{var u=a instanceof ArrayBuffer?new Int8Array(a):new Int8Array(a);return o&&u.set(new Int8Array(o)),u}case Jr.U8_R:case Jr.U8_R_NORM:case Jr.U8_RG:case Jr.U8_RG_NORM:case Jr.U8_RGB:case Jr.U8_RGB_NORM:case Jr.U8_RGB_SRGB:case Jr.U8_RGBA:case Jr.U8_RGBA_NORM:case Jr.U8_RGBA_SRGB:{var c=a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a);return o&&c.set(new Uint8Array(o)),c}case Jr.S16_R:case Jr.S16_RG:case Jr.S16_RG_NORM:case Jr.S16_RGB_NORM:case Jr.S16_RGBA:case Jr.S16_RGBA_NORM:{var p=a instanceof ArrayBuffer?new Int16Array(a):new Int16Array(r?a/2:a);return o&&p.set(new Int16Array(o)),p}case Jr.U16_R:case Jr.U16_RGB:case Jr.U16_RGBA_5551:case Jr.U16_RGBA_NORM:case Jr.U16_RG_NORM:case Jr.U16_R_NORM:{var g=a instanceof ArrayBuffer?new Uint16Array(a):new Uint16Array(r?a/2:a);return o&&g.set(new Uint16Array(o)),g}case Jr.S32_R:{var y=a instanceof ArrayBuffer?new Int32Array(a):new Int32Array(r?a/4:a);return o&&y.set(new Int32Array(o)),y}case Jr.U32_R:case Jr.U32_RG:{var S=a instanceof ArrayBuffer?new Uint32Array(a):new Uint32Array(r?a/4:a);return o&&S.set(new Uint32Array(o)),S}case Jr.F32_R:case Jr.F32_RG:case Jr.F32_RGB:case Jr.F32_RGBA:{var O=a instanceof ArrayBuffer?new Float32Array(a):new Float32Array(r?a/4:a);return o&&O.set(new Float32Array(o)),O}}var L=a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a);return o&&L.set(new Uint8Array(o)),L}function GU(e){var a=(e&32768)>>15,r=(e&31744)>>10,o=e&1023;return r===0?(a?-1:1)*Math.pow(2,-14)*(o/Math.pow(2,10)):r==31?o?NaN:(a?-1:1)*(1/0):(a?-1:1)*Math.pow(2,r-15)*(1+o/Math.pow(2,10))}var pg=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c}return a.prototype.destroy=function(){},a}(A6),$U=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Bindings;var g=c.pipeline;yo(!!g);var y=c.uniformBufferBindings,S=c.storageBufferBindings,O=c.samplerBindings;p.numUniformBuffers=(y==null?void 0:y.length)||0;var L=[[],[]],V=0;if(S&&S.length)for(var G=0;G<S.length;G++){var he=c.storageBufferBindings[G],ve=he.binding,Pe=he.size,Xe=he.offset,gt=he.buffer,_t={buffer:lx(gt),offset:Xe!=null?Xe:0,size:Pe};L[0].push({binding:ve!=null?ve:V++,resource:_t})}if(y&&y.length)for(var G=0;G<y.length;G++){var zt=c.uniformBufferBindings[G],ve=zt.binding,Pe=zt.size,Xe=zt.offset,gt=zt.buffer,_t={buffer:lx(gt),offset:Xe!=null?Xe:0,size:Pe};L[0].push({binding:ve!=null?ve:V++,resource:_t})}if(O&&O.length){V=0;for(var G=0;G<O.length;G++){var Xt=(0,w.pi)((0,w.pi)({},O[G]),N6),ve=c.samplerBindings[G],nr=ve.texture!==null?ve.texture:p.device.getFallbackTexture(Xt);Xt.dimension=nr.dimension,Xt.formatKind=P6(nr.format);var ar=nr.gpuTextureView;L[1].push({binding:V++,resource:ar});var Tr=ve.sampler!==null?ve.sampler:p.device.getFallbackSampler(Xt),Zr=RU(Tr);L[1].push({binding:V++,resource:Zr})}}return p.gpuBindGroup=L.filter(function(rn){return rn.length>0}).map(function(rn,ln){return p.device.device.createBindGroup({layout:g.getBindGroupLayout(ln),entries:rn})}),p}return a}(pg),XU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Buffer;var g=c.usage,y=c.viewOrSize,S=!!(g&fu.MAP_READ);p.usage=AU(g),S&&(p.usage=fu.MAP_READ|fu.COPY_DST);var O=!J1(y);if(p.view=J1(y)?null:y,p.size=J1(y)?_R(y,4):_R(y.byteLength,4),J1(y))p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:S?O:!1});else{p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:!0});var L=y&&y.constructor||Float32Array;new L(p.gpuBuffer.getMappedRange()).set(y),p.gpuBuffer.unmap()}return p}return a.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var p=this.gpuBuffer;c=c||o.byteLength,c=Math.min(c,this.size-r);var g=o.byteOffset+u,y=g+c,S=c+3&-4;if(S!==c){var O=new Uint8Array(o.buffer.slice(g,y));o=new Uint8Array(S),o.set(O),u=0,g=0,y=S,c=S}for(var L=1024*1024*15,V=0;y-(g+V)>L;)this.device.device.queue.writeBuffer(p,r+V,o.buffer,g+V,L),V+=L;this.device.device.queue.writeBuffer(p,r+V,o.buffer,g+V,c-V)},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},a}(pg),YU=function(){function e(){this.commandEncoder=null,this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(a,r,o){this.gpuComputePassEncoder.dispatchWorkgroups(a,r,o)},e.prototype.dispatchWorkgroupsIndirect=function(a,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(a.gpuBuffer,r)},e.prototype.finish=function(){return this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.commandEncoder.finish()},e.prototype.beginComputePass=function(){yo(this.gpuComputePassEncoder===null),this.gpuComputePassEncoder=this.commandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(a){var r=a,o=Gy(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(o)},e.prototype.setBindings=function(a){var r=a;this.gpuComputePassEncoder.setBindGroup(0,r.gpuBindGroup[0])},e.prototype.pushDebugGroup=function(a){this.gpuComputePassEncoder.pushDebugGroup(a)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(a){this.gpuComputePassEncoder.insertDebugMarker(a)},e}(),KU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.ComputePipeline,p.gpuComputePipeline=null,p.descriptor=c;var g=c.program,y=g.computeStage;if(y===null)return p;var S={layout:"auto",compute:(0,w.pi)({},y)};return p.gpuComputePipeline=p.device.device.createComputePipeline(S),p.name!==void 0&&(p.gpuComputePipeline.label=p.name),p}return a.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},a}(pg),qU=function(e){(0,w.ZT)(a,e);function a(r){var o,u,c,p,g=r.id,y=r.device,S=r.descriptor,O=e.call(this,{id:g,device:y})||this;O.type=ds.InputLayout;var L=[];try{for(var V=(0,w.XA)(S.vertexBufferDescriptors),G=V.next();!G.done;G=V.next()){var he=G.value,ve=he.arrayStride,Pe=he.stepMode,Xe=he.attributes;L.push({arrayStride:ve,stepMode:VU(Pe),attributes:[]});try{for(var gt=(c=void 0,(0,w.XA)(Xe)),_t=gt.next();!_t.done;_t=gt.next()){var zt=_t.value,Xt=zt.shaderLocation,nr=zt.format,ar=zt.offset;L[L.length-1].attributes.push({shaderLocation:Xt,format:HU(nr),offset:ar})}}catch(Tr){c={error:Tr}}finally{try{_t&&!_t.done&&(p=gt.return)&&p.call(gt)}finally{if(c)throw c.error}}}}catch(Tr){o={error:Tr}}finally{try{G&&!G.done&&(u=V.return)&&u.call(V)}finally{if(o)throw o.error}}return O.indexFormat=ZU(S.indexBufferFormat),O.buffers=L,O}return a}(pg),nN=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=ds.Program,p.vertexStage=null,p.fragmentStage=null,p.computeStage=null,p.descriptor=c,c.vertex&&(p.vertexStage=p.createShaderStage(c.vertex,"vertex")),c.fragment&&(p.fragmentStage=p.createShaderStage(c.fragment,"fragment")),c.compute&&(p.computeStage=p.createShaderStage(c.compute,"compute")),p}return a.prototype.setUniformsLegacy=function(r){},a.prototype.createShaderStage=function(r,o){var u,c,p=r.glsl,g=r.wgsl,y=r.entryPoint,S=!1,O=g;if(!O)try{O=this.device.glsl_compile(p,o,S)}catch(Pe){throw console.error(Pe,p),new Error("whoops")}var L=function(Pe){if(!O.includes(Pe))return"continue";O=O.replace("var T_".concat(Pe,": texture_2d<f32>;"),"var T_".concat(Pe,": texture_depth_2d;")),O=O.replace(new RegExp("textureSample\\(T_".concat(Pe,"(.*)\\);$"),"gm"),function(Xe,gt){return"vec4<f32>(textureSample(T_".concat(Pe).concat(gt,"), 0.0, 0.0, 0.0);")})};try{for(var V=(0,w.XA)(["u_TextureFramebufferDepth"]),G=V.next();!G.done;G=V.next()){var he=G.value;L(he)}}catch(Pe){u={error:Pe}}finally{try{G&&!G.done&&(c=V.return)&&c.call(V)}finally{if(u)throw u.error}}var ve=this.device.device.createShaderModule({code:O});return{module:ve,entryPoint:y||"main"}},a}(pg),QU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.QueryPool;var g=c.elemCount,y=c.type;return p.querySet=p.device.device.createQuerySet({type:PU(y),count:g}),p.resolveBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),p.cpuBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p.results=null,p}return a.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},a}(pg),JU=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=ds.Readback,c}return a.prototype.readTexture=function(r,o,u,c,p,g,y,S){return y===void 0&&(y=0),(0,w.mG)(this,void 0,void 0,function(){var O,L,V,G,he,ve,Pe,Xe;return(0,w.Jh)(this,function(gt){return O=r,L=0,V=this.getBlockInformationFromFormat(O.gpuTextureformat),G=Math.ceil(c/V.width)*V.length,he=Math.ceil(G/256)*256,ve=he*p,Pe=this.device.createBuffer({usage:fu.STORAGE|fu.MAP_READ|fu.COPY_DST,hint:Mv.STATIC,viewOrSize:ve}),Xe=this.device.device.createCommandEncoder(),Xe.copyTextureToBuffer({texture:O.gpuTexture,mipLevel:0,origin:{x:o,y:u,z:Math.max(L,0)}},{buffer:Pe.gpuBuffer,offset:0,bytesPerRow:he},{width:c,height:p,depthOrArrayLayers:1}),this.device.device.queue.submit([Xe.finish()]),[2,this.readBuffer(Pe,0,g.byteLength===ve?g:null,y,ve,O.format)]})})},a.prototype.readTextureSync=function(r,o,u,c,p,g,y,S){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},a.prototype.readBuffer=function(r,o,u,c,p,g,y,S){var O=this;o===void 0&&(o=0),u===void 0&&(u=null),p===void 0&&(p=0),g===void 0&&(g=Jr.U8_RGB),y===void 0&&(y=!1);var L=r,V=p||L.size,G=u||L.view,he=G&&G.constructor&&G.constructor.BYTES_PER_ELEMENT||I6(g),ve=L;if(!(L.usage&fu.MAP_READ&&L.usage&fu.COPY_DST)){var Pe=this.device.device.createCommandEncoder();ve=this.device.createBuffer({usage:fu.STORAGE|fu.MAP_READ|fu.COPY_DST,hint:Mv.STATIC,viewOrSize:V}),Pe.copyBufferToBuffer(L.gpuBuffer,o,ve.gpuBuffer,0,V),this.device.device.queue.submit([Pe.finish()])}return new Promise(function(Xe,gt){ve.gpuBuffer.mapAsync(A5.READ,o,V).then(function(){var _t=ve.gpuBuffer.getMappedRange(o,V),zt=G;if(y)zt===null?zt=rN(g,V,!0,_t):zt=rN(g,zt.buffer,void 0,_t);else if(zt===null)switch(he){case 1:zt=new Uint8Array(V),zt.set(new Uint8Array(_t));break;case 2:zt=O.getHalfFloatAsFloatRGBAArrayBuffer(V/2,_t);break;case 4:zt=new Float32Array(V/4),zt.set(new Float32Array(_t));break}else switch(he){case 1:zt=new Uint8Array(zt.buffer),zt.set(new Uint8Array(_t));break;case 2:zt=O.getHalfFloatAsFloatRGBAArrayBuffer(V/2,_t,G);break;case 4:var Xt=G&&G.constructor||Float32Array;zt=new Xt(zt.buffer),zt.set(new Xt(_t));break}ve.gpuBuffer.unmap(),Xe(zt)},function(_t){return gt(_t)})})},a.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,o,u){u||(u=new Float32Array(r));for(var c=new Uint16Array(o);r--;)u[r]=GU(c[r]);return u},a.prototype.getBlockInformationFromFormat=function(r){switch(r){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}},a}(pg),eZ=function(){function e(a){this.device=a,this.commandEncoder=null,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getTextureView=function(a,r){return yo(r<a.mipLevelCount),a.mipLevelCount===1?a.gpuTextureView:a.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(a){var r,o,u,c,p,g;this.descriptor=a,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var y=a.colorAttachment.length;this.gfxColorAttachment.length=y,this.gfxColorResolveTo.length=y;for(var S=0;S<a.colorAttachment.length;S++){var O=a.colorAttachment[S],L=a.colorResolveTo[S];if(O===null&&L!==null&&(O=L,L=null),this.gfxColorAttachment[S]=O,this.gfxColorResolveTo[S]=L,this.gfxColorAttachmentLevel[S]=((r=a.colorAttachmentLevel)===null||r===void 0?void 0:r[S])||0,this.gfxColorResolveToLevel[S]=((o=a.colorResolveToLevel)===null||o===void 0?void 0:o[S])||0,O!==null){this.gpuColorAttachments[S]===void 0&&(this.gpuColorAttachments[S]={});var V=this.gpuColorAttachments[S];V.view=this.getTextureView(O,((u=this.gfxColorAttachmentLevel)===null||u===void 0?void 0:u[S])||0);var G=(p=(c=a.colorClearColor)===null||c===void 0?void 0:c[S])!==null&&p!==void 0?p:"load";G==="load"?V.loadOp="load":(V.loadOp="clear",V.clearValue=G),V.storeOp=!((g=a.colorStore)===null||g===void 0)&&g[S]?"store":"discard",V.resolveTarget=void 0,L!==null&&(O.sampleCount>1?V.resolveTarget=this.getTextureView(L,this.gfxColorResolveToLevel[S]):V.storeOp="store")}else{this.gpuColorAttachments.length=S,this.gfxColorAttachment.length=S,this.gfxColorResolveTo.length=S;break}}if(this.gfxDepthStencilAttachment=a.depthStencilAttachment,this.gfxDepthStencilResolveTo=a.depthStencilResolveTo,a.depthStencilAttachment){var he=a.depthStencilAttachment,V=this.gpuDepthStencilAttachment;V.view=he.gpuTextureView;var ve=!!(rx(he.format)&$i.Depth);ve?(a.depthClearValue==="load"?V.depthLoadOp="load":(V.depthLoadOp="clear",V.depthClearValue=a.depthClearValue),a.depthStencilStore||this.gfxDepthStencilResolveTo!==null?V.depthStoreOp="store":V.depthStoreOp="discard"):(V.depthLoadOp=void 0,V.depthStoreOp=void 0);var Pe=!!(rx(he.format)&$i.Stencil);Pe?(a.stencilClearValue==="load"?V.stencilLoadOp="load":(V.stencilLoadOp="clear",V.stencilClearValue=a.stencilClearValue),a.depthStencilStore||this.gfxDepthStencilResolveTo!==null?V.stencilStoreOp="store":V.stencilStoreOp="discard"):(V.stencilLoadOp=void 0,V.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=y0(a.occlusionQueryPool)?void 0:IU(a.occlusionQueryPool)},e.prototype.beginRenderPass=function(a){yo(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(a),this.gpuRenderPassEncoder=this.commandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(a,r){var o=this.device.swapChainHeight;return o-a-r},e.prototype.setViewport=function(a,r,o,u,c,p){c===void 0&&(c=0),p===void 0&&(p=1),this.gpuRenderPassEncoder.setViewport(a,this.flipY(r,u),o,u,c,p)},e.prototype.setScissorRect=function(a,r,o,u){this.gpuRenderPassEncoder.setScissorRect(a,this.flipY(r,u),o,u)},e.prototype.setPipeline=function(a){var r=a,o=Gy(r.gpuRenderPipeline);this.gpuRenderPassEncoder.setPipeline(o)},e.prototype.setVertexInput=function(a,r,o){if(a!==null){var u=a;o!==null&&this.gpuRenderPassEncoder.setIndexBuffer(lx(o.buffer),Gy(u.indexFormat),o.offset);for(var c=0;c<r.length;c++){var p=r[c];p!==null&&this.gpuRenderPassEncoder.setVertexBuffer(c,lx(p.buffer),p.offset)}}},e.prototype.setBindings=function(a){var r=a;this.gpuRenderPassEncoder.setBindGroup(0,r.gpuBindGroup[0]),r.gpuBindGroup[1]&&this.gpuRenderPassEncoder.setBindGroup(1,r.gpuBindGroup[1])},e.prototype.setStencilReference=function(a){this.gpuRenderPassEncoder.setStencilReference(a)},e.prototype.draw=function(a,r,o,u){this.gpuRenderPassEncoder.draw(a,r,o,u)},e.prototype.drawIndexed=function(a,r,o,u,c){this.gpuRenderPassEncoder.drawIndexed(a,r,o,u,c)},e.prototype.drawIndirect=function(a,r){this.gpuRenderPassEncoder.drawIndirect(lx(a),r)},e.prototype.drawIndexedIndirect=function(a,r){this.gpuRenderPassEncoder.drawIndexedIndirect(lx(a),r)},e.prototype.beginOcclusionQuery=function(a){this.gpuRenderPassEncoder.beginOcclusionQuery(a)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(a){this.gpuRenderPassEncoder.pushDebugGroup(a)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(a){this.gpuRenderPassEncoder.insertDebugMarker(a)},e.prototype.finish=function(){this.gpuRenderPassEncoder.end(),this.gpuRenderPassEncoder=null;for(var a=0;a<this.gfxColorAttachment.length;a++){var r=this.gfxColorAttachment[a],o=this.gfxColorResolveTo[a];r!==null&&o!==null&&r.sampleCount===1&&this.copyAttachment(o,this.gfxColorAttachmentLevel[a],r,this.gfxColorResolveToLevel[a])}return this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.commandEncoder.finish()},e.prototype.copyAttachment=function(a,r,o,u){yo(o.sampleCount===1);var c={texture:o.gpuTexture,mipLevel:u},p={texture:a.gpuTexture,mipLevel:r};yo(o.width>>>u===a.width>>>r),yo(o.height>>>u===a.height>>>r),yo(!!(o.usage&Nh.COPY_SRC)),yo(!!(a.usage&Nh.COPY_DST)),this.commandEncoder.copyTextureToTexture(c,p,[a.width,a.height,1])},e}(),tZ=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=ds.RenderPipeline,p.isCreatingAsync=!1,p.gpuRenderPipeline=null,p.descriptor=c,p.device.createRenderPipelineInternal(p,!1),p}return a.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},a}(pg),rZ=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=ds.Sampler;var S=c.lodMinClamp,O=c.mipmapFilter===_c.NO_MIP?c.lodMinClamp:c.lodMaxClamp,L=(p=c.maxAnisotropy)!==null&&p!==void 0?p:1;return L>1&&yo(c.minFilter===xl.BILINEAR&&c.magFilter===xl.BILINEAR&&c.mipmapFilter===_c.LINEAR),y.gpuSampler=y.device.device.createSampler({addressModeU:R5(c.addressModeU),addressModeV:R5(c.addressModeV),addressModeW:R5((g=c.addressModeW)!==null&&g!==void 0?g:c.addressModeU),lodMinClamp:S,lodMaxClamp:O,minFilter:Q6(c.minFilter),magFilter:Q6(c.magFilter),mipmapFilter:MU(c.mipmapFilter),compare:c.compareFunction!==void 0?RR(c.compareFunction):void 0,maxAnisotropy:L}),y}return a}(pg),IR=function(e){(0,w.ZT)(a,e);function a(r){var o=r.id,u=r.device,c=r.descriptor,p=r.skipCreate,g=r.sampleCount,y=e.call(this,{id:o,device:u})||this;y.type=ds.Texture,y.flipY=!1;var S=c.format,O=c.dimension,L=c.width,V=c.height,G=c.depthOrArrayLayers,he=c.mipLevelCount,ve=c.usage,Pe=c.pixelStore;return y.flipY=!!(Pe!=null&&Pe.unpackFlipY),y.device.createTextureShared({format:S,dimension:O!=null?O:Po.TEXTURE_2D,width:L,height:V,depthOrArrayLayers:G!=null?G:1,mipLevelCount:he!=null?he:1,usage:ve,sampleCount:g!=null?g:1},y,p),y}return a.prototype.textureFromImageBitmapOrCanvas=function(r,o,u){for(var c=o[0].width,p=o[0].height,g={size:{width:c,height:p,depthOrArrayLayers:u},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},y=r.createTexture(g),S=0;S<o.length;S++)r.queue.copyExternalImageToTexture({source:o[S],flipY:this.flipY},{texture:y,origin:[0,0,S]},[c,p]);return[y,c,p]},a.prototype.isImageBitmapOrCanvases=function(r){var o=r[0];return o instanceof ImageBitmap||o instanceof HTMLCanvasElement||o instanceof OffscreenCanvas},a.prototype.isVideo=function(r){var o=r[0];return o instanceof HTMLVideoElement},a.prototype.setImageData=function(r,o){var u,c=this,p=this.device.device,g,y,S;this.isImageBitmapOrCanvases(r)?(u=(0,w.CR)(this.textureFromImageBitmapOrCanvas(p,r,this.depthOrArrayLayers),3),g=u[0],y=u[1],S=u[2]):this.isVideo(r)?g=p.importExternalTexture({source:r[0]}):r.forEach(function(O){p.queue.writeTexture({texture:c.gpuTexture},O,{},{width:c.width,height:c.height})}),this.width=y,this.height=S,this.gpuTexture=g,this.gpuTextureView=g.createView({dimension:TU(this.dimension)})},a.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},a}(pg),nZ=function(){function e(a,r,o,u,c,p){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Nh.RENDER_ATTACHMENT|Nh.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=ex.UPPER_LEFT,this.clipSpaceNearZ=tx.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=o,this.canvasContext=u,this.glsl_compile=c,this.WGSLComposer=p,this.fallbackTexture2D=this.createFallbackTexture(Po.TEXTURE_2D,ol.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Po.TEXTURE_2D,ol.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Po.TEXTURE_2D_ARRAY,ol.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Po.TEXTURE_3D,ol.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Po.TEXTURE_CUBE_MAP,ol.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Fh.REPEAT,addressModeV:Fh.REPEAT,minFilter:xl.POINT,magFilter:xl.POINT,mipmapFilter:_c.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Fh.REPEAT,addressModeV:Fh.REPEAT,minFilter:xl.POINT,magFilter:xl.POINT,mipmapFilter:_c.NEAREST,compareFunction:cs.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(g){console.error(g.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(a,r){this.swapChainWidth===a&&this.swapChainHeight===r||(this.swapChainWidth=a,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var a=this.canvasContext.getCurrentTexture(),r=a.createView(),o=new IR({id:0,device:this,descriptor:{format:Jr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Po.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return o.depthOrArrayLayers=1,o.sampleCount=1,o.gpuTexture=a,o.gpuTextureView=r,o.name="Onscreen",this.setResourceName(o,"Onscreen Texture"),o},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(a){return new XU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createTexture=function(a){return new IR({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createSampler=function(a){return new rZ({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderTarget=function(a){var r=new IR({id:this.getNextUniqueId(),device:this,descriptor:(0,w.pi)((0,w.pi)({},a),{dimension:Po.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Jf.RENDER_TARGET}),sampleCount:a.sampleCount});return r.depthOrArrayLayers=1,r.type=ds.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(a){var r=a,o=r.format,u=r.width,c=r.height,p=r.depthOrArrayLayers,g=r.sampleCount,y=r.mipLevelCount,S=r.gpuTexture,O=r.gpuTextureView,L=r.usage;yo(!!(L&Nh.RENDER_ATTACHMENT));var V=new IR({id:this.getNextUniqueId(),device:this,descriptor:{format:o,width:u,height:c,depthOrArrayLayers:p,dimension:Po.TEXTURE_2D,mipLevelCount:y,usage:L},skipCreate:!0});return V.depthOrArrayLayers=p,V.sampleCount=g,V.gpuTexture=S,V.gpuTextureView=O,V},e.prototype.createProgram=function(a){var r,o;return!((r=a.vertex)===null||r===void 0)&&r.glsl&&(a.vertex.glsl=x0(this.queryVendorInfo(),"vert",a.vertex.glsl)),!((o=a.fragment)===null||o===void 0)&&o.glsl&&(a.fragment.glsl=x0(this.queryVendorInfo(),"frag",a.fragment.glsl)),new nN({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createProgramSimple=function(a){return new nN({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createTextureShared=function(a,r,o){var u={width:a.width,height:a.height,depthOrArrayLayers:a.depthOrArrayLayers},c=a.mipLevelCount,p=M5(a.format),g=CU(a.dimension),y=wU(a.usage);if(r.gpuTextureformat=p,r.dimension=a.dimension,r.format=a.format,r.width=a.width,r.height=a.height,r.depthOrArrayLayers=a.depthOrArrayLayers,r.mipLevelCount=c,r.usage=y,r.sampleCount=a.sampleCount,!o){var S=this.device.createTexture({size:u,mipLevelCount:c,format:p,dimension:g,sampleCount:a.sampleCount,usage:y}),O=S.createView();r.gpuTexture=S,r.gpuTextureView=O}},e.prototype.getFallbackSampler=function(a){var r=a.formatKind;return r===ol.Depth&&a.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(a){var r=a.dimension,o=a.formatKind;if(r===Po.TEXTURE_2D)return o===ol.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Po.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Po.TEXTURE_3D)return this.fallbackTexture3D;if(r===Po.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(a,r){var o=a===Po.TEXTURE_CUBE_MAP?6:1,u=r===ol.Float?Jr.U8_RGBA_NORM:Jr.D24;return this.createTexture({dimension:a,format:u,usage:Jf.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1})},e.prototype.createBindings=function(a){return new $U({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createInputLayout=function(a){return new qU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createComputePipeline=function(a){return new KU({id:this.getNextUniqueId(),device:this,descriptor:a})},e.prototype.createRenderPipeline=function(a){return new tZ({id:this.getNextUniqueId(),device:this,descriptor:(0,w.pi)({},a)})},e.prototype.createQueryPool=function(a,r){return new QU({id:this.getNextUniqueId(),device:this,descriptor:{type:a,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(a,r){var o;if(a.gpuRenderPipeline===null){var u=a.descriptor,c=u.program,p=c.vertexStage,g=c.fragmentStage;if(!(p===null||g===null)){var y=u.megaStateDescriptor||{},S=y.stencilBack,O=y.stencilFront,L=(0,w._T)(y,["stencilBack","stencilFront"]),V=ax($y);u.megaStateDescriptor=(0,w.pi)((0,w.pi)((0,w.pi)({},V),{stencilBack:(0,w.pi)((0,w.pi)({},V.stencilBack),S),stencilFront:(0,w.pi)((0,w.pi)({},V.stencilFront),O)}),L);var G=u.megaStateDescriptor.attachmentsState[0];u.colorAttachmentFormats.forEach(function(zt,Xt){u.megaStateDescriptor.attachmentsState[Xt]||(u.megaStateDescriptor.attachmentsState[Xt]=F6(void 0,G))});var he=LU((o=u.topology)!==null&&o!==void 0?o:Gl.TRIANGLES,u.megaStateDescriptor),ve=zU(u.colorAttachmentFormats,u.megaStateDescriptor),Pe=UU(u.depthStencilAttachmentFormat,u.megaStateDescriptor),Xe=void 0;u.inputLayout!==null&&(Xe=u.inputLayout.buffers);var gt=u.sampleCount,_t={layout:"auto",vertex:(0,w.pi)((0,w.pi)({},p),{buffers:Xe}),primitive:he,depthStencil:Pe,multisample:{count:gt},fragment:(0,w.pi)((0,w.pi)({},g),{targets:ve})};a.gpuRenderPipeline=this.device.createRenderPipeline(_t)}}},e.prototype.createReadback=function(){return new JU({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(a){var r=this.renderPassPool.pop();return r===void 0&&(r=new eZ(this)),r.commandEncoder=this.device.createCommandEncoder(),r.beginRenderPass(a),r},e.prototype.createComputePass=function(){var a=this.computePassPool.pop();return a===void 0&&(a=new YU),a.commandEncoder=this.device.createCommandEncoder(),a.beginComputePass(),a},e.prototype.submitPass=function(a){var r=this.device.queue,o=a,u=o.finish();r.submit([u]),o.commandEncoder=null},e.prototype.copySubTexture2D=function(a,r,o,u,c,p){var g=this.device.createCommandEncoder(),y=a,S=u,O={texture:S.gpuTexture,origin:[c,p,0]},L={texture:y.gpuTexture,origin:[r,o,0]};yo(!!(S.usage&Nh.COPY_SRC)),yo(!!(y.usage&Nh.COPY_DST)),g.copyTextureToTexture(O,L,[S.width,S.height,1]),this.device.queue.submit([g.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(a,r,o){if(jU(a)){if(!this.featureTextureCompressionBC)return!1;var u=WU(a);return r%u!==0||o%u!==0?!1:this.featureTextureCompressionBC}switch(a){case Jr.U16_RGBA_NORM:return!1;case Jr.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(a){var r=a;return r.descriptor},e.prototype.queryRenderTarget=function(a){var r=a;return r},e.prototype.setResourceName=function(a,r){if(a.name=r,a.type===ds.Buffer){var o=a;o.gpuBuffer.label=r}else if(a.type===ds.Texture){var o=a;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(a.type===ds.RenderTarget){var o=a;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(a.type===ds.Sampler){var o=a;o.gpuSampler.label=r}else if(a.type===ds.RenderPipeline){var o=a;o.gpuRenderPipeline!==null&&(o.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(a,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(a){},e.prototype.pipelineQueryReady=function(a){var r=a;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(a){var r=a;this.createRenderPipelineInternal(r,!1)},e}(),iZ=function(){function e(a){this.pluginOptions=a}return e.prototype.createSwapChain=function(a){return(0,w.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,S;return(0,w.Jh)(this,function(O){switch(O.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,O.label=1;case 1:return O.trys.push([1,3,,4]),o=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:o})];case 2:return r=O.sent(),[3,4];case 3:return u=O.sent(),console.log(u),[3,4];case 4:return r===null?[2,null]:(c=["depth32float-stencil8","texture-compression-bc"],p=c.filter(function(L){return r.features.has(L)}),[4,r.requestDevice({requiredFeatures:p})]);case 5:if(g=O.sent(),g&&(y=this.pluginOptions.onContextLost,g.lost.then(function(){y&&y()})),g===null)return[2,null];if(S=a.getContext("webgpu"),!S)return[2,null];O.label=6;case 6:return O.trys.push([6,8,,9]),[4,q6(this.pluginOptions.shaderCompilerPath)];case 7:return O.sent(),[3,9];case 8:return O.sent(),[3,9];case 9:return[2,new nZ(r,g,a,S,xU,IE&&new IE)]}})})},e}(),aZ=Ca.isPlainObject,oZ=Ca.isTypedArray,sZ=function(){function e(a,r){(0,Ot.Z)(this,e),(0,He.Z)(this,"destroyed",!1),(0,He.Z)(this,"uniforms",{}),this.reGl=a;var o=r.vs,u=r.fs,c=r.attributes,p=r.uniforms,g=r.primitive,y=r.count,S=r.elements,O=r.depth,L=r.cull,V=r.instances,G={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:ex.LOWER_LEFT,clipSpaceNearZ:tx.NEGATIVE_ONE,supportMRT:!1},he={};this.options=r,p&&(this.uniforms=this.extractUniforms(p),Object.keys(p).forEach(function(_t){he[_t]=a.prop(_t)}));var ve={};Object.keys(c).forEach(function(_t){ve[_t]=c[_t].get()});var Pe=Ux(x0(G,"frag",u,null,!1)),Xe=Ux(x0(G,"vert",o,null,!1)),gt={attributes:ve,frag:Pe,uniforms:he,vert:Xe,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:q7[g===void 0?Rt.TRIANGLES:g]};V&&(gt.instances=V),y?gt.count=y:S&&(gt.elements=S.get()),this.initDepthDrawParams({depth:O},gt),this.initCullDrawParams({cull:L},gt),this.drawCommand=a(gt),this.drawParams=gt}return(0,ot.Z)(e,[{key:"updateAttributesAndElements",value:function(r,o){var u={};Object.keys(r).forEach(function(c){u[c]=r[c].get()}),this.drawParams.attributes=u,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(r){var o={};Object.keys(r).forEach(function(u){o[u]=r[u].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(r){this.uniforms=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var u=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(r.uniforms||{})),c={};Object.keys(u).forEach(function(p){var g=(0,tf.Z)(u[p]);g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT?c[p]=u[p]:c[p]=u[p].get()}),c.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(r),c.stencil=this.getStencilDrawParams(r),c.colorMask=this.getColorMaskDrawParams(r,o),this.drawCommand(c)}}},{key:"destroy",value:function(){var r;(r=this.drawParams)===null||r===void 0||(r=r.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(o){o==null||o.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r,o){var u=r.depth;u&&(o.depth={enable:u.enable===void 0?!0:!!u.enable,mask:u.mask===void 0?!0:!!u.mask,func:tz[u.func||Rt.LESS],range:u.range||[0,1]})}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,S=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:vR[p&&p.srcRGB||Rt.SRC_ALPHA],srcAlpha:vR[p&&p.srcAlpha||Rt.SRC_ALPHA],dstRGB:vR[p&&p.dstRGB||Rt.ONE_MINUS_SRC_ALPHA],dstAlpha:vR[p&&p.dstAlpha||Rt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:T6[g&&g.rgb||Rt.FUNC_ADD],alpha:T6[g&&g.alpha||Rt.FUNC_ADD]},color:S}}},{key:"getStencilDrawParams",value:function(r){var o=r.stencil,u=o||{},c=u.enable,p=u.mask,g=p===void 0?-1:p,y=u.func,S=y===void 0?{cmp:Rt.ALWAYS,ref:0,mask:-1}:y,O=u.opFront,L=O===void 0?{fail:Rt.KEEP,zfail:Rt.KEEP,zpass:Rt.KEEP}:O,V=u.opBack,G=V===void 0?{fail:Rt.KEEP,zfail:Rt.KEEP,zpass:Rt.KEEP}:V;return{enable:!!c,mask:g,func:(0,ne.Z)((0,ne.Z)({},S),{},{cmp:rz[S.cmp]}),opFront:{fail:Q1[L.fail],zfail:Q1[L.zfail],zpass:Q1[L.zpass]},opBack:{fail:Q1[G.fail],zfail:Q1[G.zfail],zpass:Q1[G.zpass]}}}},{key:"getColorMaskDrawParams",value:function(r,o){var u=r.stencil,c=u!=null&&u.enable&&u.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0];return c}},{key:"initCullDrawParams",value:function(r,o){var u=r.cull;if(u){var c=u.enable,p=u.face,g=p===void 0?Rt.BACK:p;o.cull={enable:!!c,face:nz[g]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||oZ(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}aZ(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(S){p.extractUniformsRecursively(S,g[S],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}(),uZ=function(){function e(a,r){(0,Ot.Z)(this,e),(0,He.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?Rt.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,S=y===void 0?!1:y,O=r.format,L=O===void 0?Rt.RGBA:O,V=r.mipmap,G=V===void 0?!1:V,he=r.wrapS,ve=he===void 0?Rt.CLAMP_TO_EDGE:he,Pe=r.wrapT,Xe=Pe===void 0?Rt.CLAMP_TO_EDGE:Pe,gt=r.aniso,_t=gt===void 0?0:gt,zt=r.alignment,Xt=zt===void 0?1:zt,nr=r.premultiplyAlpha,ar=nr===void 0?!1:nr,Tr=r.mag,Zr=Tr===void 0?Rt.NEAREST:Tr,rn=r.min,ln=rn===void 0?Rt.NEAREST:rn,Gn=r.colorSpace,fi=Gn===void 0?Rt.BROWSER_DEFAULT_WEBGL:Gn,Fi=r.x,uo=Fi===void 0?0:Fi,is=r.y,as=is===void 0?0:is,tu=r.copy,hu=tu===void 0?!1:tu;this.width=p,this.height=g;var lf={width:p,height:g,type:_5[c],format:Q7[L],wrapS:C6[ve],wrapT:C6[Xe],mag:w6[Zr],min:w6[ln],alignment:Xt,flipY:S,colorSpace:ez[fi],premultiplyAlpha:ar,aniso:_t,x:uo,y:as,copy:hu};o&&(lf.data=o),typeof G=="number"?lf.mipmap=J7[G]:typeof G=="boolean"&&(lf.mipmap=G),this.texture=a.texture(lf)}return(0,ot.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(r)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.texture.resize(o,u),this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),iN,aN,lZ=(iN=(0,mt.b2)(),iN(aN=function(){function e(){var a=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"uniformBuffers",[]),(0,He.Z)(this,"createModel",function(r){return new sZ(a.gl,r)}),(0,He.Z)(this,"createAttribute",function(r){return new K7(a.gl,r)}),(0,He.Z)(this,"createBuffer",function(r){return new iz(a.gl,r)}),(0,He.Z)(this,"createElements",function(r){return new az(a.gl,r)}),(0,He.Z)(this,"createTexture2D",function(r){return new uZ(a.gl,r)}),(0,He.Z)(this,"createFramebuffer",function(r){return new oz(a.gl,r)}),(0,He.Z)(this,"useFramebuffer",function(r,o){a.gl({framebuffer:r?r.get():null})(o)}),(0,He.Z)(this,"clear",function(r){var o,u=r.color,c=r.depth,p=r.stencil,g=r.framebuffer,y=g===void 0?null:g,S={color:u,depth:c,stencil:p};S.framebuffer=y===null?y:y.get(),(o=a.gl)===null||o===void 0||o.clear(S)}),(0,He.Z)(this,"viewport",function(r){var o=r.x,u=r.y,c=r.width,p=r.height;a.gl._gl.viewport(o,u,c,p),a.width=c,a.height=p,a.gl._refresh()}),(0,He.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y={x:u,y:c,width:p,height:g};return o&&(y.framebuffer=o.get()),a.gl.read(y)}),(0,He.Z)(this,"getViewportSize",function(){return{width:a.gl._gl.drawingBufferWidth,height:a.gl._gl.drawingBufferHeight}}),(0,He.Z)(this,"getContainer",function(){var r;return(r=a.canvas)===null||r===void 0?void 0:r.parentElement}),(0,He.Z)(this,"getCanvas",function(){return a.canvas}),(0,He.Z)(this,"getGLContext",function(){return a.gl._gl}),(0,He.Z)(this,"destroy",function(){var r;a.canvas=null,(r=a.gl)===null||r===void 0||(r=r._gl)===null||r===void 0||(r=r.getExtension("WEBGL_lose_context"))===null||r===void 0||r.loseContext(),a.gl.destroy(),a.gl=null})}return(0,ot.Z)(e,[{key:"init",value:function(){var a=(0,Sn.Z)(er().mark(function o(u,c,p){var g=this;return er().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.canvas=u,!p){S.next=5;break}this.gl=p,S.next=8;break;case 5:return S.next=7,new Promise(function(O,L){Y7()({canvas:g.canvas,attributes:{alpha:!0,antialias:c.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:c.preserveDrawingBuffer,stencil:c.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(G,he){(G||!he)&&L(G),O(he)}})});case 7:this.gl=S.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return S.stop()}},o,this)}));function r(o,u,c){return a.apply(this,arguments)}return r}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var r=this.getGLContext();r.disable(r.CULL_FACE)}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}())||aN),cZ=function(){function e(a,r){(0,Ot.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor,S=r.shaderLocation;this.buffer=o,this.attribute={shaderLocation:S,buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,ot.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),S0,lm,fx,PE,OE,dg,PR,Xy,Mf,OR=(S0={},(0,He.Z)(S0,Rt.FLOAT,Float32Array),(0,He.Z)(S0,Rt.UNSIGNED_BYTE,Uint8Array),(0,He.Z)(S0,Rt.SHORT,Int16Array),(0,He.Z)(S0,Rt.UNSIGNED_SHORT,Uint16Array),(0,He.Z)(S0,Rt.INT,Int32Array),(0,He.Z)(S0,Rt.UNSIGNED_INT,Uint32Array),S0),fZ=(lm={},(0,He.Z)(lm,Rt.POINTS,Gl.POINTS),(0,He.Z)(lm,Rt.LINES,Gl.LINES),(0,He.Z)(lm,Rt.LINE_LOOP,Gl.LINES),(0,He.Z)(lm,Rt.LINE_STRIP,Gl.LINE_STRIP),(0,He.Z)(lm,Rt.TRIANGLES,Gl.TRIANGLES),(0,He.Z)(lm,Rt.TRIANGLE_FAN,Gl.TRIANGLES),(0,He.Z)(lm,Rt.TRIANGLE_STRIP,Gl.TRIANGLE_STRIP),lm),hZ=(fx={},(0,He.Z)(fx,1,Jr.F32_R),(0,He.Z)(fx,2,Jr.F32_RG),(0,He.Z)(fx,3,Jr.F32_RGB),(0,He.Z)(fx,4,Jr.F32_RGBA),fx),pZ=(PE={},(0,He.Z)(PE,Rt.STATIC_DRAW,Mv.STATIC),(0,He.Z)(PE,Rt.DYNAMIC_DRAW,Mv.DYNAMIC),(0,He.Z)(PE,Rt.STREAM_DRAW,Mv.DYNAMIC),PE),oN=(OE={},(0,He.Z)(OE,Rt.REPEAT,Fh.REPEAT),(0,He.Z)(OE,Rt.CLAMP_TO_EDGE,Fh.CLAMP_TO_EDGE),(0,He.Z)(OE,Rt.MIRRORED_REPEAT,Fh.MIRRORED_REPEAT),OE),dZ=(dg={},(0,He.Z)(dg,Rt.NEVER,cs.NEVER),(0,He.Z)(dg,Rt.ALWAYS,cs.ALWAYS),(0,He.Z)(dg,Rt.LESS,cs.LESS),(0,He.Z)(dg,Rt.LEQUAL,cs.LEQUAL),(0,He.Z)(dg,Rt.GREATER,cs.GREATER),(0,He.Z)(dg,Rt.GEQUAL,cs.GEQUAL),(0,He.Z)(dg,Rt.EQUAL,cs.EQUAL),(0,He.Z)(dg,Rt.NOTEQUAL,cs.NOTEQUAL),dg),vZ=(PR={},(0,He.Z)(PR,Rt.FRONT,fp.FRONT),(0,He.Z)(PR,Rt.BACK,fp.BACK),PR),sN=(Xy={},(0,He.Z)(Xy,Rt.FUNC_ADD,Hc.ADD),(0,He.Z)(Xy,Rt.MIN_EXT,Hc.MIN),(0,He.Z)(Xy,Rt.MAX_EXT,Hc.MAX),(0,He.Z)(Xy,Rt.FUNC_SUBTRACT,Hc.SUBSTRACT),(0,He.Z)(Xy,Rt.FUNC_REVERSE_SUBTRACT,Hc.REVERSE_SUBSTRACT),Xy),kR=(Mf={},(0,He.Z)(Mf,Rt.ZERO,No.ZERO),(0,He.Z)(Mf,Rt.ONE,No.ONE),(0,He.Z)(Mf,Rt.SRC_COLOR,No.SRC),(0,He.Z)(Mf,Rt.ONE_MINUS_SRC_COLOR,No.ONE_MINUS_SRC),(0,He.Z)(Mf,Rt.SRC_ALPHA,No.SRC_ALPHA),(0,He.Z)(Mf,Rt.ONE_MINUS_SRC_ALPHA,No.ONE_MINUS_SRC_ALPHA),(0,He.Z)(Mf,Rt.DST_COLOR,No.DST),(0,He.Z)(Mf,Rt.ONE_MINUS_DST_COLOR,No.ONE_MINUS_DST),(0,He.Z)(Mf,Rt.DST_ALPHA,No.DST_ALPHA),(0,He.Z)(Mf,Rt.ONE_MINUS_DST_ALPHA,No.ONE_MINUS_DST_ALPHA),(0,He.Z)(Mf,Rt.CONSTANT_COLOR,No.CONST),(0,He.Z)(Mf,Rt.ONE_MINUS_CONSTANT_COLOR,No.ONE_MINUS_CONSTANT),(0,He.Z)(Mf,Rt.CONSTANT_ALPHA,No.CONST),(0,He.Z)(Mf,Rt.ONE_MINUS_CONSTANT_ALPHA,No.ONE_MINUS_CONSTANT),(0,He.Z)(Mf,Rt.SRC_ALPHA_SATURATE,No.SRC_ALPHA_SATURATE),Mf),gZ={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function DR(e){return Object.prototype.toString.call(e)in gZ}var mZ=function(){function e(a,r){(0,Ot.Z)(this,e),(0,He.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type,p=r.isUBO,g=r.label,y;DR(o)?y=o:y=new OR[this.type||Rt.FLOAT](o),this.type=c,this.size=y.byteLength,this.buffer=a.createBuffer({viewOrSize:y,usage:p?fu.UNIFORM:fu.VERTEX,hint:pZ[u||Rt.STATIC_DRAW]}),g&&a.setResourceName(this.buffer,g)}return(0,ot.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset,c;DR(o)?c=o:c=new OR[this.type||Rt.FLOAT](o),this.buffer.setSubData(u,new Uint8Array(c.buffer))}}]),e}(),yZ=function(){function e(a,r){(0,Ot.Z)(this,e);var o=r.data,u=r.type,c=r.count,p=c===void 0?0:c,g;DR(o)?g=o:g=new OR[this.type||Rt.UNSIGNED_INT](o),this.type=u,this.count=p,this.indexBuffer=a.createBuffer({viewOrSize:g,usage:fu.INDEX})}return(0,ot.Z)(e,[{key:"get",value:function(){return this.indexBuffer}},{key:"subData",value:function(r){var o=r.data,u;DR(o)?u=o:u=new OR[this.type||Rt.UNSIGNED_INT](o),this.indexBuffer.setSubData(0,new Uint8Array(u.buffer))}},{key:"destroy",value:function(){this.indexBuffer.destroy()}}]),e}();function uN(e){return!!(e&&e.texture)}var lN=function(){function e(a,r){(0,Ot.Z)(this,e),(0,He.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?Rt.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,S=y===void 0?!1:y,O=r.format,L=O===void 0?Rt.RGBA:O,V=r.wrapS,G=V===void 0?Rt.CLAMP_TO_EDGE:V,he=r.wrapT,ve=he===void 0?Rt.CLAMP_TO_EDGE:he,Pe=r.aniso,Xe=Pe===void 0?0:Pe,gt=r.alignment,_t=gt===void 0?1:gt,zt=r.usage,Xt=zt===void 0?vc.SAMPLED:zt,nr=r.mipmap,ar=nr===void 0?!1:nr,Tr=r.mag,Zr=Tr===void 0?Rt.NEAREST:Tr,rn=r.min,ln=rn===void 0?Rt.NEAREST:rn;this.width=p,this.height=g;var Gn=Jr.U8_RGBA_RT;if(c===Rt.UNSIGNED_BYTE&&L===Rt.RGBA)Gn=Jr.U8_RGBA_RT;else if(c===Rt.UNSIGNED_BYTE&&L===Rt.LUMINANCE)Gn=Jr.U8_LUMINANCE;else if(c===Rt.FLOAT&&L===Rt.RGB)Gn=Jr.F32_RGB;else throw new Error("create texture error, type: ".concat(c,", format: ").concat(L));this.texture=a.createTexture({format:Gn,width:p,height:g,usage:Xt===vc.SAMPLED?Jf.SAMPLED:Jf.RENDER_TARGET,pixelStore:{unpackFlipY:S,packAlignment:_t},mipLevelCount:Xt===vc.RENDER_TARGET||ar?1:0}),o&&this.texture.setImageData([o]),this.sampler=a.createSampler({addressModeU:oN[G],addressModeV:oN[ve],minFilter:ln===Rt.NEAREST?xl.POINT:xl.BILINEAR,magFilter:Zr===Rt.NEAREST?xl.POINT:xl.BILINEAR,mipmapFilter:_c.NO_MIP,maxAnisotropy:Xe})}return(0,ot.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(r){var o=r.data;this.texture.setImageData([o])}},{key:"bind",value:function(){}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),cN=function(){function e(a,r){(0,Ot.Z)(this,e),this.device=a,this.options=r,this.createColorRenderTarget(),this.createDepthRenderTarget()}return(0,ot.Z)(e,[{key:"createColorRenderTarget",value:function(){var r=this.options,o=r.width,u=r.height,c=r.color;c&&(uN(c)?(this.colorTexture=c.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=c.width,this.height=c.height):o&&u&&(this.colorTexture=this.device.createTexture({format:Jr.U8_RGBA_RT,usage:Jf.RENDER_TARGET,width:o,height:u}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=u))}},{key:"createDepthRenderTarget",value:function(){var r=this.options,o=r.width,u=r.height,c=r.depth;c&&(uN(c)?(this.depthTexture=c.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=c.width,this.height=c.height):o&&u&&(this.depthTexture=this.device.createTexture({format:Jr.D24_S8,usage:Jf.RENDER_TARGET,width:o,height:u}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=u))}},{key:"get",value:function(){return this.colorRenderTarget}},{key:"destroy",value:function(){var r,o;(r=this.colorRenderTarget)===null||r===void 0||r.destroy(),(o=this.depthRenderTarget)===null||o===void 0||o.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;(this.width!==o||this.height!==u)&&(this.destroy(),this.options.width=o,this.options.height=u,this.createColorRenderTarget(),this.createDepthRenderTarget())}}]),e}(),_Z=Ca.isPlainObject,xZ=Ca.isTypedArray,bZ=function(){function e(a,r,o){var u=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"destroyed",!1),(0,He.Z)(this,"uniforms",{}),(0,He.Z)(this,"vertexBuffers",[]),this.device=a,this.options=r,this.service=o;var c=r.vs,p=r.fs,g=r.attributes,y=r.uniforms,S=r.count,O=r.elements;this.options=r;var L=a.createProgram({vertex:{glsl:c},fragment:{glsl:p}});this.program=L,y&&(this.uniforms=this.extractUniforms(y));var V=[],G=0;Object.keys(g).forEach(function(ve){var Pe=g[ve],Xe=Pe.get();u.vertexBuffers.push(Xe.get());var gt=Pe.attribute,_t=gt.offset,zt=_t===void 0?0:_t,Xt=gt.stride,nr=Xt===void 0?0:Xt,ar=gt.size,Tr=ar===void 0?1:ar,Zr=gt.divisor,rn=Zr===void 0?0:Zr,ln=gt.shaderLocation,Gn=ln===void 0?0:ln;V.push({arrayStride:nr||Tr*4,stepMode:Wy.VERTEX,attributes:[{format:hZ[Tr],shaderLocation:Gn,offset:zt,divisor:rn}]}),G=Xe.size/Tr}),S||(this.options.count=G),O&&(this.indexBuffer=O.get());var he=a.createInputLayout({vertexBufferDescriptors:V,indexBufferFormat:O?Jr.U32_R:null,program:L});this.inputLayout=he,this.pipeline=this.createPipeline(r)}return(0,ot.Z)(e,[{key:"createPipeline",value:function(r,o){var u=r.primitive,c=u===void 0?Rt.TRIANGLES:u,p=r.depth,g=r.cull,y=r.blend,S=this.initDepthDrawParams({depth:p}),O=!!(S&&S.enable),L=this.initCullDrawParams({cull:g}),V=!!(L&&L.enable),G=this.getBlendDrawParams({blend:y}),he=!!(G&&G.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:fZ[c],colorAttachmentFormats:[Jr.U8_RGBA_RT],depthStencilAttachmentFormat:Jr.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:sf.ALL,rgbBlendState:{blendMode:Hc.ADD,blendSrcFactor:No.ONE,blendDstFactor:No.ZERO},alphaBlendState:{blendMode:Hc.ADD,blendSrcFactor:No.ONE,blendDstFactor:No.ZERO}}:{channelWriteMask:sf.ALL,rgbBlendState:{blendMode:he&&G.equation.rgb||Hc.ADD,blendSrcFactor:he&&G.func.srcRGB||No.SRC_ALPHA,blendDstFactor:he&&G.func.dstRGB||No.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:he&&G.equation.alpha||Hc.ADD,blendSrcFactor:he&&G.func.srcAlpha||No.ONE,blendDstFactor:he&&G.func.dstAlpha||No.ONE}}],blendConstant:he?x5:void 0,depthWrite:O,depthCompare:O&&S.func||cs.LESS,cullMode:V&&L.face||fp.NONE,stencilWrite:!1}})}},{key:"updateAttributesAndElements",value:function(){}},{key:"updateAttributes",value:function(){}},{key:"addUniforms",value:function(r){this.uniforms=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){var u=this,c=(0,ne.Z)((0,ne.Z)({},this.options),r),p=c.depth,g=p===void 0?{}:p,y=g.enable,S=c.count,O=S===void 0?0:S,L=c.instances,V=c.elements,G=c.uniforms,he=G===void 0?{}:G,ve=c.uniformBuffers,Pe=c.textures;this.uniforms=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(he));var Xe=this.service,gt=Xe.renderPass,_t=Xe.currentFramebuffer,zt=Xe.width,Xt=Xe.height;if(this.pipeline=this.createPipeline(c,o),gt.setViewport(0,0,(_t==null?void 0:_t.width)||zt,(_t==null?void 0:_t.height)||Xt),gt.setPipeline(this.pipeline),gt.setVertexInput(this.inputLayout,this.vertexBuffers.map(function(ar){return{buffer:ar}}),V?{buffer:this.indexBuffer,offset:0}:null),ve&&(this.bindings=this.device.createBindings({pipeline:this.pipeline,uniformBufferBindings:ve.map(function(ar,Tr){var Zr=ar;return{binding:Tr,buffer:Zr.get(),size:Zr.size}}),samplerBindings:Pe==null?void 0:Pe.map(function(ar){return{texture:ar.texture,sampler:ar.sampler}})})),this.bindings&&(gt.setBindings(this.bindings),Object.keys(this.uniforms).forEach(function(ar){var Tr=u.uniforms[ar];Tr instanceof lN?u.uniforms[ar]=Tr.get():Tr instanceof cN&&(u.uniforms[ar]=Tr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),V){var nr=V.count;nr===0?gt.draw(O,L):gt.drawIndexed(nr,L)}else gt.draw(O,L)}},{key:"destroy",value:function(){var r,o,u;this.program.destroy(),(r=this.vertexBuffers)===null||r===void 0||r.forEach(function(c){return c.destroy()}),(o=this.indexBuffer)===null||o===void 0||o.destroy(),(u=this.bindings)===null||u===void 0||u.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r){var o=r.depth;if(o)return{enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:dZ[o.func||Rt.LESS],range:o.range||[0,1]}}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,S=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:kR[p&&p.srcRGB||Rt.SRC_ALPHA],srcAlpha:kR[p&&p.srcAlpha||Rt.SRC_ALPHA],dstRGB:kR[p&&p.dstRGB||Rt.ONE_MINUS_SRC_ALPHA],dstAlpha:kR[p&&p.dstAlpha||Rt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:sN[g&&g.rgb||Rt.FUNC_ADD],alpha:sN[g&&g.alpha||Rt.FUNC_ADD]},color:S}}},{key:"initCullDrawParams",value:function(r){var o=r.cull;if(o){var u=o.enable,c=o.face,p=c===void 0?Rt.BACK:c;return{enable:!!u,face:vZ[p]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||xZ(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}_Z(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(S){p.extractUniformsRecursively(S,g[S],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}();function SZ(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}var fN,hN,EZ=(fN=(0,mt.b2)(),fN(hN=function(){function e(){var a=this;(0,Ot.Z)(this,e),(0,He.Z)(this,"uniformBuffers",[]),(0,He.Z)(this,"createModel",function(r){return new bZ(a.device,r,a)}),(0,He.Z)(this,"createAttribute",function(r){return new cZ(a.device,r)}),(0,He.Z)(this,"createBuffer",function(r){return new mZ(a.device,r)}),(0,He.Z)(this,"createElements",function(r){return new yZ(a.device,r)}),(0,He.Z)(this,"createTexture2D",function(r){return new lN(a.device,r)}),(0,He.Z)(this,"createFramebuffer",function(r){return new cN(a.device,r)}),(0,He.Z)(this,"useFramebuffer",function(r,o){a.currentFramebuffer=r,a.beginFrame(),o(),a.endFrame(),a.currentFramebuffer=null}),(0,He.Z)(this,"clear",function(r){var o=r.color,u=r.depth,c=r.stencil,p=r.framebuffer,g=p===void 0?null:p;g&&(g.clearOptions={color:o,depth:u,stencil:c})}),(0,He.Z)(this,"viewport",function(r){var o=r.width,u=r.height;a.width=o,a.height=u}),(0,He.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y=a.device.createReadback(),S=o.colorTexture;return y.readTextureSync(S,u,c,p,g,new Uint8Array(p*g*4))}),(0,He.Z)(this,"getViewportSize",function(){return{width:a.width,height:a.height}}),(0,He.Z)(this,"getContainer",function(){var r;return(r=a.canvas)===null||r===void 0?void 0:r.parentElement}),(0,He.Z)(this,"getCanvas",function(){return a.canvas}),(0,He.Z)(this,"getGLContext",function(){return a.device.gl}),(0,He.Z)(this,"destroy",function(){var r;a.canvas=null,(r=a.uniformBuffers)===null||r===void 0||r.forEach(function(o){o.destroy()}),a.device.destroy()})}return(0,ot.Z)(e,[{key:"init",value:function(){var a=(0,Sn.Z)(er().mark(function o(u,c){var p,g,y,S,O;return er().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=c.enableWebGPU,g=c.shaderCompilerPath,this.canvas=u,y=p?new iZ({shaderCompilerPath:g}):new vU({targets:["webgl2","webgl1"],onContextLost:function(he){console.warn("context lost",he)},onContextCreationError:function(he){console.warn("context creation error",he)},onContextRestored:function(he){console.warn("context restored",he)}}),V.next=5,y.createSwapChain(u);case 5:S=V.sent,S.configureSwapChain(u.width,u.height),this.device=S.getDevice(),this.swapChain=S,this.currentFramebuffer=null,O=this.device.gl,this.extensionObject={OES_texture_float:!SZ(O)&&this.device.OES_texture_float},this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Jr.U8_RGBA_RT,width:u.width,height:u.height,usage:Jf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Jr.D24_S8,width:u.width,height:u.height,usage:Jf.RENDER_TARGET}));case 14:case"end":return V.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"beginFrame",value:function(){var r=this.currentFramebuffer,o=this.swapChain,u=this.mainColorRT,c=this.mainDepthRT,p=o.getOnscreenTexture(),g=r?r.colorRenderTarget:u,y=r?null:p,S=r?r.depthRenderTarget:c,O=(r==null?void 0:r.clearOptions)||{},L=O.color,V=L===void 0?[0,0,0,0]:L,G=O.depth,he=G===void 0?1:G,ve=O.stencil,Pe=ve===void 0?0:ve,Xe=g?bE(V[0]*255,V[1]*255,V[2]*255,V[3]):x5,gt=S?he:void 0,_t=S?Pe:void 0,zt=this.device.createRenderPass({colorAttachment:[g],colorResolveTo:[y],colorClearColor:[Xe],depthStencilAttachment:S,depthClearValue:gt,stencilClearValue:_t});this.renderPass=zt}},{key:"endFrame",value:function(){this.device.submitPass(this.renderPass)}},{key:"getPointSizeRange",value:function(){var r=this.device.gl;return r.getParameter(r.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){}},{key:"setBaseState",value:function(){}},{key:"setCustomLayerDefaults",value:function(){}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||hN);function wZ(e){var a=CZ();return function(){var o=(0,Ft.Z)(e),u;if(a){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,kr.Z)(this,u)}}function CZ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var I5=["selectstart","selecting","selectend"],TZ=function(e){(0,yr.Z)(r,e);var a=wZ(r);function r(o){var u,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Ot.Z)(this,r),u=a.call(this),(0,He.Z)((0,wr.Z)(u),"isEnable",!1),(0,He.Z)((0,wr.Z)(u),"onDragStart",function(p){u.box.style.display="block",u.startEvent=u.endEvent=p,u.syncBoxBound(),u.emit("selectstart",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,He.Z)((0,wr.Z)(u),"onDragging",function(p){u.endEvent=p,u.syncBoxBound(),u.emit("selecting",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,He.Z)((0,wr.Z)(u),"onDragEnd",function(p){u.endEvent=p,u.box.style.display="none",u.emit("selectend",u.getLngLatBox(),u.startEvent,u.endEvent)}),u.scene=o,u.options=c,u}return(0,ot.Z)(r,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var u=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var c=Zs("div",void 0,this.container);c.classList.add("l7-select-box"),u&&c.classList.add(u),c.style.display="none",this.box=c}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var u=this.startEvent,c=u.x,p=u.y,g=this.endEvent,y=g.x,S=g.y,O=Math.min(c,y),L=Math.min(p,S),V=Math.abs(c-y),G=Math.abs(p-S);this.box.style.top="".concat(L,"px"),this.box.style.left="".concat(O,"px"),this.box.style.width="".concat(V,"px"),this.box.style.height="".concat(G,"px")}},{key:"getLngLatBox",value:function(){var u=this.startEvent.lngLat,c=u.lng,p=u.lat,g=this.endEvent.lngLat,y=g.lng,S=g.lat;return ws([[c,p],[y,S]])}}]),r}(Ys.EventEmitter),AZ=function(){function e(a){(0,Ot.Z)(this,e);var r=a.id,o=a.map,u=a.canvas,c=a.renderer,p=c===void 0?"regl":c,g=bI();this.container=g,o.setContainer(g,r,u),g.bind(Ct.IRendererService).to(p==="regl"?lZ:EZ).inSingletonScope(),this.sceneService=g.get(Ct.ISceneService),this.mapService=g.get(Ct.IMapService),this.iconService=g.get(Ct.IIconService),this.fontService=g.get(Ct.IFontService),this.controlService=g.get(Ct.IControlService),this.layerService=g.get(Ct.ILayerService),this.debugService=g.get(Ct.IDebugService),this.debugService.setEnable(a.debug),this.markerService=g.get(Ct.IMarkerService),this.interactionService=g.get(Ct.IInteractionService),this.popupService=g.get(Ct.IPopupService),this.boxSelect=new TZ(this,{}),this.initComponent(r),this.sceneService.init(a),this.initControl()}return(0,ot.Z)(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"exportMap",value:function(){var a=(0,Sn.Z)(er().mark(function o(u){return er().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return a.apply(this,arguments)}return r}()},{key:"registerRenderService",value:function(r){var o=this;if(this.sceneService.loaded){var u=new r(this);u.init()}else this.on("loaded",function(){var c=new r(o);c.init()})}},{key:"setBgColor",value:function(r){this.mapService.setBgColor(r)}},{key:"addLayer",value:function(r){var o=this,u=ny(this.container);if(r.setContainer(u,this.container),this.sceneService.addLayer(r),r.inited){var c=this.initMask(r);this.addMask(c,r.id)}else r.on("inited",function(){var p=o.initMask(r);o.addMask(p,r.id)})}},{key:"initMask",value:function(r){var o=r.getLayerConfig(),u=o.mask,c=o.maskfence,p=o.maskColor,g=p===void 0?"#000":p,y=o.maskOpacity,S=y===void 0?0:y;if(!(!u||!c)){var O=new tg().source(c).shape("fill").style({color:g,opacity:S});return O}}},{key:"addMask",value:function(r,o){if(r){var u=this.getLayer(o);if(u){var c=ny(this.container);r.setContainer(c,this.container),u.addMaskLayer(r),this.sceneService.addMask(r)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(r){return this.layerService.getLayer(r)}},{key:"getLayerByName",value:function(r){return this.layerService.getLayerByName(r)}},{key:"removeLayer",value:function(){var a=(0,Sn.Z)(er().mark(function o(u,c){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layerService.remove(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"removeAllLayer",value:function(){var a=(0,Sn.Z)(er().mark(function o(){return er().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.layerService.removeAllLayers();case 2:case"end":return c.stop()}},o,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(r){this.layerService.setEnableRender(r)}},{key:"addIconFont",value:function(r,o){this.fontService.addIconFont(r,o)}},{key:"addIconFonts",value:function(r){var o=this;r.forEach(function(u){var c=(0,ji.Z)(u,2),p=c[0],g=c[1];o.fontService.addIconFont(p,g)})}},{key:"addFontFace",value:function(r,o){var u=this;this.fontService.once("fontloaded",function(c){u.emit("fontloaded",c)}),this.fontService.addFontFace(r,o)}},{key:"addImage",value:function(){var a=(0,Sn.Z)(er().mark(function o(u,c){return er().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.iconService.addImage(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return a.apply(this,arguments)}return r}()},{key:"hasImage",value:function(r){return this.iconService.hasImage(r)}},{key:"removeImage",value:function(r){this.iconService.removeImage(r)}},{key:"addIconFontGlyphs",value:function(r,o){this.fontService.addIconGlyphs(o)}},{key:"addControl",value:function(r){this.controlService.addControl(r,this.container)}},{key:"removeControl",value:function(r){this.controlService.removeControl(r)}},{key:"getControlByName",value:function(r){return this.controlService.getControlByName(r)}},{key:"addMarker",value:function(r){this.markerService.addMarker(r)}},{key:"addMarkerLayer",value:function(r){this.markerService.addMarkerLayer(r)}},{key:"removeMarkerLayer",value:function(r){this.markerService.removeMarkerLayer(r)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(r){this.popupService.addPopup(r)}},{key:"removePopup",value:function(r){this.popupService.removePopup(r)}},{key:"on",value:function(r,o){if(I5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.on(r,o)}else iy.includes(r)?this.sceneService.on(r,o):this.mapService.on(r,o)}},{key:"once",value:function(r,o){if(I5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.once(r,o)}else iy.includes(r)?this.sceneService.once(r,o):this.mapService.once(r,o)}},{key:"emit",value:function(r,o){iy.indexOf(r)===-1?this.mapService.on(r,o):this.sceneService.emit(r,o)}},{key:"off",value:function(r,o){if(I5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.off(r,o)}else iy.includes(r)?this.sceneService.off(r,o):this.mapService.off(r,o)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(r){return this.mapService.getCenter(r)}},{key:"setCenter",value:function(r,o){return this.mapService.setCenter(r,o)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(r){return this.mapService.setPitch(r)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(r){this.mapService.setRotation(r)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(r){this.mapService.panTo(r)}},{key:"panBy",value:function(r,o){this.mapService.panBy(r,o)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(r){this.mapService.setZoom(r)}},{key:"fitBounds",value:function(r,o){var u=this.sceneService.getSceneConfig(),c=u.fitBoundsOptions,p=u.animate;this.mapService.fitBounds(r,o||(0,ne.Z)((0,ne.Z)({},c),{},{animate:p}))}},{key:"setZoomAndCenter",value:function(r,o){this.mapService.setZoomAndCenter(r,o)}},{key:"setMapStyle",value:function(r){this.mapService.setMapStyle(r)}},{key:"setMapStatus",value:function(r){this.mapService.setMapStatus(r)}},{key:"pixelToLngLat",value:function(r){return this.mapService.pixelToLngLat(r)}},{key:"lngLatToPixel",value:function(r){return this.mapService.lngLatToPixel(r)}},{key:"containerToLngLat",value:function(r){return this.mapService.containerToLngLat(r)}},{key:"lngLatToContainer",value:function(r){return this.mapService.lngLatToContainer(r)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(r,o){this.container.bind(Ct.IPostProcessingPass).to(r).whenTargetNamed(o)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),o&&this.boxSelect.once("selectend",function(){r.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getProtocol",value:function(r){return jn.REGISTERED_PROTOCOLS[r]}},{key:"startAnimate",value:function(){this.layerService.startAnimate()}},{key:"stopAnimate",value:function(){this.layerService.stopAnimate()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(r){this.controlService.init({container:oh(r)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var r=this.sceneService.getSceneConfig(),o=r.logoVisible,u=r.logoPosition;o&&this.addControl(new bP({position:u}))}}],[{key:"addProtocol",value:function(r,o){jn.REGISTERED_PROTOCOLS[r]=o}},{key:"removeProtocol",value:function(r){delete jn.REGISTERED_PROTOCOLS[r]}}]),e}(),Nj="2.20.8",LR=k(90494),zh=k(45442),P5={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`},O5="l7plot-legend l7plot-legend__category",k5="l7plot-legend__title",D5="l7plot-legend__category-list",pN="l7plot-legend__list-item",dN="l7plot-legend__category-marker",vN="l7plot-legend__category-value",MZ='<div class="'.concat(O5,`">
  <div class="`).concat(k5,`"></div>
  <ul class="`).concat(D5,`"></ul>
</div>`),gN='<li class="'.concat(pN,`" data-index={index}>
  <span class="`).concat(dN,`" style="background:{color}"></span>
  <span class="`).concat(vN,`">{value}</span>
</li>`),E0,RZ=(E0={},E0[O5]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:P5.fontFamily,padding:"10px 10px 6px 10px",lineHeight:1,fontSize:"12px"},E0[k5]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},E0[D5]={margin:"0px",listStyleType:"none",padding:"0px"},E0[pN]={listStyleType:"none",display:"flex",alignItems:"center",marginBottom:"2px"},E0[dN]={width:"10px",height:"10px"},E0[vN]={paddingLeft:"8px"},E0),IZ=k(6056);function PZ(e,a){return!!e.className.match(new RegExp("(\\s|^)".concat(a,"(\\s|$)")))}function L5(e){for(var a=e.childNodes,r=a.length,o=r-1;o>=0;o--)e.removeChild(a[o])}var F5=function(){function e(a){this.destroyed=!1,this.options=(0,W.b$)({},this.getDefaultOptions(),a),this.container=this.initContainer(),this.initDom(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible(),this.render()}return e.prototype.getDefaultOptions=function(){return{name:"",containerTpl:"<div></div>",visible:!0,capture:!0,domStyles:{}}},e.prototype.getContainer=function(){return this.container},e.prototype.getParentContainer=function(){var a=this.options.parent,r;if(!a)return r;if((0,W.HD)(a)){var o=document.getElementById(a);if(o)r=o;else throw new Error("No parent id ".concat(a))}else r=a;return r},e.prototype.initContainer=function(){var a=this.createDom(this.options.containerTpl),r=this.getParentContainer();return r&&r.appendChild(a),a},e.prototype.initVisible=function(){this.options.visible?this.show():this.hide()},e.prototype.initCapture=function(){this.setCapture(this.options.capture)},e.prototype.update=function(a){this.options=(0,W.b$)({},this.options,a),this.updateInner(a),this.afterUpdate(a)},e.prototype.updateInner=function(a){a.domStyles&&this.applyStyles()},e.prototype.afterUpdate=function(a){a.capture&&this.setCapture(a.capture)},e.prototype.setCapture=function(a){var r=this.container,o=a?"auto":"none";r.style.pointerEvents=o},e.prototype.applyStyles=function(){var a=this.options.domStyles;if(a){var r=this.container;this.applyChildrenStyles(r,a);var o=this.options.className;if(o&&PZ(r,o)){var u=a[o];(0,zh.Z)(r,u)}}},e.prototype.applyChildrenStyles=function(a,r){(0,W.S6)(r,function(o,u){var c=a.getElementsByClassName(u);(0,W.S6)(c,function(p){(0,zh.Z)(p,o)})})},e.prototype.applyStyle=function(a,r){var o=this.options.domStyles;o&&(0,zh.Z)(r,o[a])},e.prototype.createDom=function(a){return a===void 0&&(a="<div></div>"),(0,IZ.Z)(a)},e.prototype.removeDom=function(){var a=this.container;a&&a.parentNode&&a.parentNode.removeChild(a)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),this.destroyed=!0},e}(),OZ=function(e){(0,w.ZT)(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getDefaultOptions=function(){return(0,W.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-category-legend",name:"l7plot-category-legend",title:"",items:[],containerTpl:MZ,itemTpl:gN,domStyles:RZ,className:O5})},a.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},a.prototype.initDom=function(){this.cacheDoms()},a.prototype.initEvent=function(){},a.prototype.removeEvent=function(){},a.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(k5)[0],u=r.getElementsByClassName(D5)[0];this.titleDom=o,this.listDom=u},a.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},a.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,zh.Z)(r,{visibility:"visible"})},a.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,zh.Z)(r,{visibility:"hidden"})},a.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},a.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},a.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,W.HD)(u)?o=this.createDom(u):o=u,o},a.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},a.prototype.showTitle=function(){var r=this.titleDom;r&&(0,zh.Z)(r,{display:"block"})},a.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,zh.Z)(r,{display:"none"})},a.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},a.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items.length>30?this.options.items.slice(0,30):this.options.items,u=this.options.itemTpl||gN,c=this.listDom;c&&(o.forEach(function(p){var g=p.value==="",y=g?"\u2014":Array.isArray(p.value)?p.value.join(" - "):p.value,S=(0,w.pi)((0,w.pi)({},p),{value:y}),O=(0,W.ng)(u,S),L=r.createDom(O);c.appendChild(L)}),this.applyChildrenStyles(c,this.options.domStyles))},a.prototype.clearItemDoms=function(){this.listDom&&L5(this.listDom)},a.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},a}(F5),B5="l7plot-legend l7plot-legend__continue",N5="l7plot-legend__title",mN="l7plot-legend__ribbon-container",yN="l7plot-legend__ribbon",_N="l7plot-legend__gradient-bar",z5="l7plot-legend__value-range",kZ='<div class="'.concat(B5,`">
  <div class="`).concat(N5,`"></div>
  <div class="`).concat(mN,`"></div>
</div>`),xN='<div class="'.concat(yN,`">
  <span class="`).concat(z5,`">{min}</span>
  <div class="`).concat(_N,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(z5,`">{max}</span>
</div>`),Yy,DZ=(Yy={},Yy[B5]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:P5.fontFamily,padding:"10px",lineHeight:1,fontSize:"12px"},Yy[N5]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},Yy[yN]={display:"flex",alignItems:"center"},Yy[_N]={width:"140px",height:"14px",margin:"0px 5px"},Yy[z5]={padding:"0px"},Yy),LZ=function(e){(0,w.ZT)(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getDefaultOptions=function(){return(0,W.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-continue-legend",name:"l7plot-continue-legend",title:"",containerTpl:kZ,ribbonTpl:xN,domStyles:DZ,className:B5})},a.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},a.prototype.initDom=function(){this.cacheDoms()},a.prototype.initEvent=function(){},a.prototype.removeEvent=function(){},a.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(N5)[0],u=r.getElementsByClassName(mN)[0];this.titleDom=o,this.ribbonContainerDom=u},a.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderRibbon())},a.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,zh.Z)(r,{visibility:"visible"})},a.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,zh.Z)(r,{visibility:"hidden"})},a.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.colors&&this.renderRibbon()),e.prototype.updateInner.call(this,r)},a.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},a.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.min,this.options.max,this.options.colors);return(0,W.HD)(u)?o=this.createDom(u):o=u,o},a.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},a.prototype.showTitle=function(){var r=this.titleDom;r&&(0,zh.Z)(r,{display:"block"})},a.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,zh.Z)(r,{display:"none"})},a.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},a.prototype.renderRibbon=function(){this.clearRibbonContainerDoms();var r=this.options,o=r.min,u=r.max,c=r.colors,p=r.ribbonTpl,g=p===void 0?xN:p,y=this.ribbonContainerDom;if(y){var S="linear-gradient(to right, ".concat(c.join(", "),")"),O={min:o,max:u,backgroundImage:S},L=(0,W.ng)(g,O),V=this.createDom(L);y.appendChild(V),this.applyChildrenStyles(y,this.options.domStyles)}},a.prototype.clearRibbonContainerDoms=function(){this.ribbonContainerDom&&L5(this.ribbonContainerDom)},a.prototype.clear=function(){this.setTitle(""),this.clearRibbonContainerDoms()},a}(F5),FZ=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this,r)||this;return o.legendComponents=[],o.options=r,o.legendComponents=o.initLegendComponents(r.items),o}return a.prototype.initLegendComponents=function(r){for(var o=[],u=0;u<r.length;u++){var c=r[u];if(c.type==="category"){var p=new OZ({title:c.options.title,items:c.options.items,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}else if(c.type==="continue"){var p=new LZ({title:c.options.title,min:c.options.min,max:c.options.max,colors:c.options.colors,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}}return o},a.prototype.getDefaultOptions=function(){return{position:"bottomleft"}},a.prototype.onAdd=function(){var r=window.document.createElement("div");return r.className="l7plot-legend-container",this.legendComponents.forEach(function(o){var u=o.getContainer();r.appendChild(u)}),r},a.prototype.onRemove=function(){this.legendComponents.forEach(function(r){r.destroy()})},a}(Md),U5="l7plot-tooltip",Z5="l7plot-tooltip__title",V5="l7plot-tooltip__list",bN="l7plot-tooltip__list-item",SN="l7plot-tooltip__name",EN="l7plot-tooltip__value",BZ='<div class="'.concat(U5,`">
  <div class="`).concat(Z5,`"></div>
  <ul class="`).concat(V5,`"></ul>
</div>`),wN='<li class="'.concat(bN,`" data-index={index}>
  <span class="`).concat(SN,`">{name}</span>
  <span class="`).concat(EN,`">{value}</span>
</li>`),w0,NZ=(w0={},w0[U5]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:P5.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},w0[Z5]={marginBottom:"4px"},w0[V5]={margin:"0px",listStyleType:"none",padding:"0px"},w0[bN]={listStyleType:"none",marginBottom:"4px",whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"},w0[SN]={},w0[EN]={marginLeft:"30px"},w0),zZ=function(e){(0,w.ZT)(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getDefaultOptions=function(){return(0,W.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-tooltip",name:"l7plot-tooltip",title:"",showTitle:!0,items:[],containerTpl:BZ,itemTpl:wN,domStyles:NZ,className:U5})},a.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},a.prototype.initDom=function(){this.cacheDoms()},a.prototype.initEvent=function(){},a.prototype.removeEvent=function(){},a.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(Z5)[0],u=r.getElementsByClassName(V5)[0];this.titleDom=o,this.listDom=u},a.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},a.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,zh.Z)(r,{visibility:"visible"})},a.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,zh.Z)(r,{visibility:"hidden"})},a.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},a.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},a.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,W.HD)(u)?o=this.createDom(u):o=u,o},a.prototype.resetTitle=function(){var r=this.options.title,o=this.options.showTitle;o&&r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},a.prototype.showTitle=function(){var r=this.titleDom;r&&(0,zh.Z)(r,{display:"block"})},a.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,zh.Z)(r,{display:"none"})},a.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},a.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items,u=this.options.itemTpl||wN,c=this.listDom;c&&(o.forEach(function(p){var g=(0,w.pi)({},p),y=(0,W.ng)(u,g),S=r.createDom(y);c.appendChild(S)}),this.applyChildrenStyles(c,this.options.domStyles))},a.prototype.clearItemDoms=function(){this.listDom&&L5(this.listDom)},a.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},a}(F5),H5=k(27771),UZ=typeof global=="object"&&global&&global.Object===Object&&global,ZZ=UZ,VZ=typeof self=="object"&&self&&self.Object===Object&&self,HZ=ZZ||VZ||Function("return this")(),FR=HZ,jZ=FR.Symbol,hx=jZ,CN=Object.prototype,WZ=CN.hasOwnProperty,GZ=CN.toString,kE=hx?hx.toStringTag:void 0;function $Z(e){var a=WZ.call(e,kE),r=e[kE];try{e[kE]=void 0;var o=!0}catch(c){}var u=GZ.call(e);return o&&(a?e[kE]=r:delete e[kE]),u}var XZ=$Z,YZ=Object.prototype,KZ=YZ.toString;function qZ(e){return KZ.call(e)}var QZ=qZ,JZ="[object Null]",e9="[object Undefined]",TN=hx?hx.toStringTag:void 0;function t9(e){return e==null?e===void 0?e9:JZ:TN&&TN in Object(e)?XZ(e):QZ(e)}var AN=t9;function r9(e){return e!=null&&typeof e=="object"}var n9=r9,i9="[object Symbol]";function a9(e){return typeof e=="symbol"||n9(e)&&AN(e)==i9}var BR=a9,o9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s9=/^\w*$/;function u9(e,a){if((0,H5.Z)(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||BR(e)?!0:s9.test(e)||!o9.test(e)||a!=null&&e in Object(a)}var l9=u9;function c9(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}var NR=c9,f9="[object AsyncFunction]",h9="[object Function]",p9="[object GeneratorFunction]",d9="[object Proxy]";function v9(e){if(!NR(e))return!1;var a=AN(e);return a==h9||a==p9||a==f9||a==d9}var g9=v9,m9=FR["__core-js_shared__"],j5=m9,MN=function(){var e=/[^.]+$/.exec(j5&&j5.keys&&j5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function y9(e){return!!MN&&MN in e}var _9=y9,x9=Function.prototype,b9=x9.toString;function S9(e){if(e!=null){try{return b9.call(e)}catch(a){}try{return e+""}catch(a){}}return""}var E9=S9,w9=/[\\^$.*+?()[\]{}|]/g,C9=/^\[object .+?Constructor\]$/,T9=Function.prototype,A9=Object.prototype,M9=T9.toString,R9=A9.hasOwnProperty,I9=RegExp("^"+M9.call(R9).replace(w9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function P9(e){if(!NR(e)||_9(e))return!1;var a=g9(e)?I9:C9;return a.test(E9(e))}var O9=P9;function k9(e,a){return e==null?void 0:e[a]}var D9=k9;function L9(e,a){var r=D9(e,a);return O9(r)?r:void 0}var RN=L9,F9=RN(Object,"create"),DE=F9;function B9(){this.__data__=DE?DE(null):{},this.size=0}var N9=B9;function z9(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}var U9=z9,Z9="__lodash_hash_undefined__",V9=Object.prototype,H9=V9.hasOwnProperty;function j9(e){var a=this.__data__;if(DE){var r=a[e];return r===Z9?void 0:r}return H9.call(a,e)?a[e]:void 0}var W9=j9,G9=Object.prototype,$9=G9.hasOwnProperty;function X9(e){var a=this.__data__;return DE?a[e]!==void 0:$9.call(a,e)}var Y9=X9,K9="__lodash_hash_undefined__";function q9(e,a){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=DE&&a===void 0?K9:a,this}var Q9=q9;function px(e){var a=-1,r=e==null?0:e.length;for(this.clear();++a<r;){var o=e[a];this.set(o[0],o[1])}}px.prototype.clear=N9,px.prototype.delete=U9,px.prototype.get=W9,px.prototype.has=Y9,px.prototype.set=Q9;var IN=px;function J9(){this.__data__=[],this.size=0}var eV=J9;function tV(e,a){return e===a||e!==e&&a!==a}var rV=tV;function nV(e,a){for(var r=e.length;r--;)if(rV(e[r][0],a))return r;return-1}var zR=nV,iV=Array.prototype,aV=iV.splice;function oV(e){var a=this.__data__,r=zR(a,e);if(r<0)return!1;var o=a.length-1;return r==o?a.pop():aV.call(a,r,1),--this.size,!0}var sV=oV;function uV(e){var a=this.__data__,r=zR(a,e);return r<0?void 0:a[r][1]}var lV=uV;function cV(e){return zR(this.__data__,e)>-1}var fV=cV;function hV(e,a){var r=this.__data__,o=zR(r,e);return o<0?(++this.size,r.push([e,a])):r[o][1]=a,this}var pV=hV;function dx(e){var a=-1,r=e==null?0:e.length;for(this.clear();++a<r;){var o=e[a];this.set(o[0],o[1])}}dx.prototype.clear=eV,dx.prototype.delete=sV,dx.prototype.get=lV,dx.prototype.has=fV,dx.prototype.set=pV;var dV=dx,vV=RN(FR,"Map"),gV=vV;function mV(){this.size=0,this.__data__={hash:new IN,map:new(gV||dV),string:new IN}}var yV=mV;function _V(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}var xV=_V;function bV(e,a){var r=e.__data__;return xV(a)?r[typeof a=="string"?"string":"hash"]:r.map}var UR=bV;function SV(e){var a=UR(this,e).delete(e);return this.size-=a?1:0,a}var EV=SV;function wV(e){return UR(this,e).get(e)}var CV=wV;function TV(e){return UR(this,e).has(e)}var AV=TV;function MV(e,a){var r=UR(this,e),o=r.size;return r.set(e,a),this.size+=r.size==o?0:1,this}var RV=MV;function vx(e){var a=-1,r=e==null?0:e.length;for(this.clear();++a<r;){var o=e[a];this.set(o[0],o[1])}}vx.prototype.clear=yV,vx.prototype.delete=EV,vx.prototype.get=CV,vx.prototype.has=AV,vx.prototype.set=RV;var PN=vx,IV="Expected a function";function W5(e,a){if(typeof e!="function"||a!=null&&typeof a!="function")throw new TypeError(IV);var r=function(){var o=arguments,u=a?a.apply(this,o):o[0],c=r.cache;if(c.has(u))return c.get(u);var p=e.apply(this,o);return r.cache=c.set(u,p)||c,p};return r.cache=new(W5.Cache||PN),r}W5.Cache=PN;var PV=W5,OV=500;function kV(e){var a=PV(e,function(o){return r.size===OV&&r.clear(),o}),r=a.cache;return a}var DV=kV,LV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,FV=/\\(\\)?/g,BV=DV(function(e){var a=[];return e.charCodeAt(0)===46&&a.push(""),e.replace(LV,function(r,o,u,c){a.push(u?c.replace(FV,"$1"):o||r)}),a}),NV=BV;function zV(e,a){for(var r=-1,o=e==null?0:e.length,u=Array(o);++r<o;)u[r]=a(e[r],r,e);return u}var UV=zV,ZV=1/0,ON=hx?hx.prototype:void 0,kN=ON?ON.toString:void 0;function DN(e){if(typeof e=="string")return e;if((0,H5.Z)(e))return UV(e,DN)+"";if(BR(e))return kN?kN.call(e):"";var a=e+"";return a=="0"&&1/e==-ZV?"-0":a}var VV=DN;function HV(e){return e==null?"":VV(e)}var G5=HV;function jV(e,a){return(0,H5.Z)(e)?e:l9(e,a)?[e]:NV(G5(e))}var WV=jV,GV=1/0;function $V(e){if(typeof e=="string"||BR(e))return e;var a=e+"";return a=="0"&&1/e==-GV?"-0":a}var XV=$V;function YV(e,a){a=WV(a,e);for(var r=0,o=a.length;e!=null&&r<o;)e=e[XV(a[r++])];return r&&r==o?e:void 0}var KV=YV;function qV(e,a,r){var o=e==null?void 0:KV(e,a);return o===void 0?r:o}var LN=qV,QV=5,JV=new Object().toString,FN=function(e,a){return JV.call(e)==="[object "+a+"]"},eH=function(e){return FN(e,"Array")},tH=function(e){return typeof e=="object"&&e!==null},BN=function(e){if(!tH(e)||!FN(e,"Object"))return!1;for(var a=e;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(e)===a},NN=function(e,a,r,o){r=r||0,o=o||QV;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];c?BN(c)?(BN(e[u])||(e[u]={}),r<o?NN(e[u],c,r+1,o):e[u]=a[u]):eH(c)?(e[u]=[],e[u]=e[u].concat(c)):e[u]=c:e[u]=c}},Kp=function(e){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];for(var o=0;o<a.length;o+=1)NN(e,a[o]);return e},rH=["mousemove","click"],nH=function(e){(0,w.ZT)(a,e);function a(r,o,u){var c=e.call(this)||this;c.currentVisible=!1,c.interactionTriggerHander=function(he){var ve=he.feature,Pe=he.featureId,Xe=c.options,gt=Xe.title,_t=Xe.customTitle,zt=Xe.items,Xt=Xe.customItems,nr=ve.type==="Feature"&&ve.geometry&&ve.properties,ar=nr?ve.properties:ve,Tr=[];if(Xt){var Zr=Xt(ve);if(Array.isArray(Zr))Tr=Zr;else throw new Error("customItems return array")}else zt&&zt.forEach(function(ln){if((0,W.HD)(ln)){var Gn=ln.split(".").pop()||ln,fi=LN(ar,ln);fi!==void 0&&Tr.push({name:Gn,value:fi})}else{var Fi=ln.field,uo=ln.alias,is=ln.customValue,as=uo||Fi.split(".").pop()||Fi,fi=LN(ar,Fi);fi!==void 0&&Tr.push({name:as,value:is?is(fi,ar,Pe):fi})}});var rn={title:_t?_t(ar):gt,items:Tr};c.updateTooltip(he,rn)},c.interactionUntriggerHander=function(){c.hideTooltip()},c.scene=r,c.interactionLayers=o,c.options=Kp({},c.getDefaultOptions(),u);var p=c.options,g=p.offsets,y=p.title,S=p.showTitle,O=p.customContent,L=p.domStyles,V=p.anchor,G=p.className;return c.marker=new Gm({offsets:g,anchor:V,draggable:!1}),c.tooltipComponent=new zZ({title:y,showTitle:S,items:[],customContent:O,domStyles:L,className:G}),c.setComponent(),c.initInteractionEvent(),c}return a.prototype.getDefaultOptions=function(){return{showTitle:!0,showComponent:!0,items:[],offsets:[15,0],trigger:"mousemove",anchor:ko["TOP-LEFT"]}},a.prototype.update=function(r){this.marker.remove(),this.currentVisible=!1,this.options=Kp({},this.options,r);var o=this.options,u=o.offsets,c=o.showTitle,p=o.customContent,g=o.domStyles,y=o.anchor,S=o.className;this.marker=new Gm({offsets:u,anchor:y,draggable:!1}),this.tooltipComponent.update({showTitle:c,customContent:p,domStyles:g,className:S}),this.setComponent()},a.prototype.initInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";if(!rH.includes(o))throw new Error("trigger is mousemove or click");this.interactionLayers.forEach(function(u){var c=u.layer;c.on(o,r.interactionTriggerHander),c.on("un".concat(o),r.interactionUntriggerHander)})},a.prototype.unBindInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";this.interactionLayers.forEach(function(u){var c=u.layer;c.off(o,r.interactionTriggerHander),c.off("un".concat(o),r.interactionUntriggerHander)})},a.prototype.updateTooltip=function(r,o){var u=r.lngLat,c=r.x,p=r.y;if(this.options.showComponent&&(this.updateComponent(o),this.setPostion(u)),this.currentVisible){var g={type:"tooltip:change",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:change",g)}else{this.showTooltip();var y={type:"tooltip:show",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:show",y)}},a.prototype.showTooltip=function(){this.currentVisible||(this.options.showComponent&&this.scene.addMarker(this.marker),this.currentVisible=!0)},a.prototype.hideTooltip=function(){if(this.currentVisible){this.options.showComponent&&this.marker.remove(),this.currentVisible=!1;var r={type:"tooltip:hide"};this.emit("tooltip:hide",r)}},a.prototype.updateComponent=function(r){(0,W.Xy)(this.lastComponentOptions,r)||(this.tooltipComponent.update(r),this.lastComponentOptions=r)},a.prototype.setComponent=function(){var r=this.tooltipComponent.getContainer(),o=window.document.createElement("div");o.style.cursor="auto",o.style.userSelect="text",o.className="l7plot-tooltip-container",["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(u){o.addEventListener(u,function(c){return c.stopPropagation()})}),o.appendChild(r),this.marker.setElement(o)},a.prototype.setPostion=function(r){this.marker.setLnglat(r)},a.prototype.destroy=function(){this.unBindInteractionEvent(),this.off(),this.marker.remove(),this.tooltipComponent.destroy()},a}(LR.Z),gx=k(77972),mx=k(3876),LE=k(56992);function zN(e){var a,r,o,u={point:{default:{fill:e.pointFillColor,size:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{fill:e.pointActiveFillColor},selected:{fill:e.pointSelectedFillColor}}};return{mapStyle:e.mapStyle,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,fontFamily:e.fontFamily,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["circle","square"],line:["line"]},sizes:[1,10],geometries:{point:{circle:{default:{style:u.point.default},active:{style:u.point.active},selected:{style:u.point.selected}}},line:{},polygon:{}},components:{legend:{category:{domStyles:(a={},a[mx.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:"1",fontSize:"".concat(e.legendTextFontSize,"px")},a[mx.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},a[mx.fL]={margin:"0px",padding:"0px"},a[mx.jp]={marginBottom:"2px"},a[mx.Bc]={width:"10px",height:"10px"},a[mx.Tf]={paddingLeft:"8px"},a)},continue:{domStyles:(r={},r[LE.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:1,fontSize:"".concat(e.legendTextFontSize,"px")},r[LE.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},r[LE.el]={display:"flex",alignItems:"center"},r[LE.bl]={width:"140px",height:"14px",margin:"0px 5px"},r[LE.VI]={padding:"0px"},r)}},tooltip:{domStyles:(o={},o[gx.rC]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:e.tooltipContainerFillColor,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:e.tooltipTextLineHeight},o[gx.O6]={marginBottom:"4px"},o[gx.fL]={margin:"0px",padding:"0px"},o[gx.jp]={marginBottom:"4px"},o[gx.bX]={color:e.tooltipItemNameFillColor},o[gx.Tf]={color:e.tooltipItemValueFillColor,marginLeft:"30px"},o)},label:{style:{textAnchor:"center",textOffset:[0,0],fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight}}}}}var Ky={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},iH={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},aH=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],oH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],sH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],UN=function(e){e===void 0&&(e={});var a=e.mapStyle,r=a===void 0?"light":a,o=e.subColor,u=o===void 0?"rgba(0,0,0,0.05)":o,c=e.paletteQualitative10,p=c===void 0?aH:c,g=e.paletteQualitative20,y=g===void 0?oH:g,S=e.paletteSemanticRed,O=S===void 0?"#F4664A":S,L=e.paletteSemanticGreen,V=L===void 0?"#30BF78":L,G=e.paletteSemanticYellow,he=G===void 0?"#FAAD14":G,ve=e.paletteSequence,Pe=ve===void 0?sH:ve,Xe=e.fontFamily,gt=Xe===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:Xe,_t=e.brandColor,zt=_t===void 0?p[0]:_t;return{mapStyle:r,brandColor:zt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:O,paletteSemanticGreen:V,paletteSemanticYellow:he,paletteSequence:Pe,fontFamily:gt,legendContainerFillColor:"rgba(255, 255, 255, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:Ky[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(255, 255, 255, 0.9)",tooltipContainerShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",tooltipContainerBorderRadius:2,tooltipTextFillColor:Ky[65],tooltipItemNameFillColor:Ky[65],tooltipItemValueFillColor:Ky[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:Ky[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:zt,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:iH[100],pointActiveBorderColor:Ky[100],pointSelectedBorderColor:Ky[100]}},zj=UN(),uH={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},qy={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},ZN=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],lH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],cH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],VN=function(e){e===void 0&&(e={});var a=e.mapStyle,r=a===void 0?"dark":a,o=e.subColor,u=o===void 0?"rgba(255,255,255,0.05)":o,c=e.paletteQualitative10,p=c===void 0?ZN:c,g=e.paletteQualitative20,y=g===void 0?lH:g,S=e.paletteSemanticRed,O=S===void 0?"#F4664A":S,L=e.paletteSemanticGreen,V=L===void 0?"#30BF78":L,G=e.paletteSemanticYellow,he=G===void 0?"#FAAD14":G,ve=e.paletteSequence,Pe=ve===void 0?cH:ve,Xe=e.fontFamily,gt=Xe===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:Xe,_t=e.brandColor,zt=_t===void 0?p[0]:_t;return{mapStyle:r,brandColor:zt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:O,paletteSemanticGreen:V,paletteSemanticYellow:he,paletteSequence:Pe,fontFamily:gt,legendContainerFillColor:"rgba(31, 31, 31, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:qy[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(31, 31, 31, 0.9)",tooltipContainerShadow:"0px 2px 4px rgba(0, 0, 0, 0.5)",tooltipContainerBorderRadius:2,tooltipTextFillColor:qy[65],tooltipItemNameFillColor:qy[65],tooltipItemValueFillColor:qy[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:qy[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:ZN[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:uH[100],pointActiveBorderColor:qy[100],pointSelectedBorderColor:qy[100]}},Uj=VN();function HN(e){var a=e.styleSheet,r=a===void 0?{}:a,o=(0,w._T)(e,["styleSheet"]),u=UN(r);return(0,W.b$)({},zN(u),o)}function fH(e){var a=e.styleSheet,r=a===void 0?{}:a,o=(0,w._T)(e,["styleSheet"]),u=VN(r);return(0,W.b$)({},zN(u),o)}var jN=HN({}),hH=fH({}),$5={default:jN,light:jN,dark:hH};function X5(e){return e===void 0&&(e="default"),(0,W.U2)($5,(0,W.vl)(e),$5.default)}function Zj(e,a,r){r===void 0&&(r="light"),$5[lowerCase(e)]=r==="light"?createTheme(a):createDarkTheme(a)}var Iv;(function(e){e.Map="map",e.Amap="amap",e.AmapV1="amapv1",e.AmapV2="amapv2",e.Mapbox="mapbox"})(Iv||(Iv={}));var WN=function(e){(0,w.ZT)(a,e);function a(r,o){r===void 0&&(r=[]),o===void 0&&(o={});var u=e.call(this)||this;return u.name=o.name?o.name:(0,W.EL)("layerGroup"),u.layers=r,u}return a.prototype.addTo=function(r){var o=this;this.scene=r;var u=0,c=this.layers.length;this.layers.forEach(function(p){p.once("inited",function(g){u++,o.emit("inited",g),u===c&&o.emit("inited-all")}),p.addTo(r)})},a.prototype.hasLayer=function(r){return this.layers.some(function(o){return o===r})},a.prototype.addLayer=function(r){var o=this;this.layers.push(r),this.scene&&(r.once("inited",function(u){return o.emit("inited",u)}),r.addTo(this.scene))},a.prototype.removeLayer=function(r){var o=this.layers.findIndex(function(u){return u===r});return o===-1?!1:(this.layers.splice(o,1),this.scene&&r.remove(this.scene),!0)},a.prototype.getLayers=function(){return this.layers},a.prototype.getInteractionLayers=function(){return this.layers.filter(function(r){var o=r.interaction;return o})},a.prototype.getLayer=function(r){return this.layers.find(function(o){var u=o.layer;return u.id===r})},a.prototype.getLayerByName=function(r){return this.layers.find(function(o){return o.name===r})},a.prototype.removeAllLayer=function(){var r=this;this.layers.forEach(function(o){r.scene&&o.remove(r.scene)}),this.layers=[]},a.prototype.isEmpty=function(){return this.layers.length===0},a}(LR.Z),pH=[{original:"loaded",adaptation:"scene-loaded"},{original:"resize",adaptation:"resize"},{original:"destroy",adaptation:"destroy"},{original:"resize",adaptation:"resize"}],dH=["mapmove","movestart","moveend","zoomchange","zoomstart","zoomend","click","dblclick","contextmenu","mousemove","mousewheel","mouseover","mouseout","mouseup","mousedown","dragstart","dragging","dragend"],ZR=["inited","add","remove","dataUpdate","click","unclick","dblclick","undblclick","contextmenu","uncontextmenu","mouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","uncontextmenu","unpick"],Qy=new Map;function Vj(e,a){Qy.set(e,a)}function Hj(e){e.forEach(function(a){Qy.set(a.id,a.image)})}function jj(e){return Qy.get(e)}function Wj(e){return Qy.has(e)}function Gj(e){return Qy.delete(e)}var VR=new Map;function $j(e,a){VR.set(e,a)}function Xj(e){return VR.delete(e)}var FE=new Map;function Yj(e,a){FE.set(e,a)}function Kj(e){e.forEach(function(a){FE.set(a.name,a.fontUnicode)})}function qj(e){return FE.delete(e)}var GN={map:{type:Iv.Amap},logo:!0},vH=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this)||this;return o.inited=!1,o.sceneLoaded=!1,o.layersLoaded=!1,o.loaded=!1,o.layerGroup=new WN,o.options=Kp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return a.prototype.getDefaultOptions=function(){return a.DefaultOptions},a.prototype.createContainer=function(r){var o=this.options,u=o.width,c=o.height,p=typeof r=="string"?document.getElementById(r):r;return p.style.position||(p.style.position="relative"),u&&(p.style.width||(p.style.width="".concat(u,"px"))),c&&(p.style.height||(p.style.height="".concat(c,"px"))),p},a.prototype.createTheme=function(){var r=(0,W.Kn)(this.options.theme)?Kp({},X5("default"),HN(this.options.theme)):X5(this.options.theme);return r},a.prototype.createMap=function(){var r=this.options.map?this.options.map:GN.map,o=r.type,u=(0,w._T)(r,["type"]),c=Object.assign({style:this.theme.mapStyle},u);return o===Iv.Amap?new KM(c):o===Iv.AmapV1?new GF(c):o===Iv.AmapV2?new KM(c):o===Iv.Mapbox?new $7(c):new L7(c)},a.prototype.createScene=function(){var r=this.options,o=r.logo,u=r.antialias,c=r.preserveDrawingBuffer,p=(0,W.jn)(o)?{logoVisible:o}:{logoVisible:o==null?void 0:o.visible,logoPosition:o==null?void 0:o.position},g=Object.assign({antialias:u,preserveDrawingBuffer:c},p),y=this.createMap(),S=new AZ((0,w.pi)({id:this.container,map:y},g));return S},a.prototype.registerResources=function(){var r=this;Qy.size&&Qy.forEach(function(o,u){!r.scene.hasImage(u)&&r.scene.addImage(u,o)}),VR.size&&VR.forEach(function(o,u){r.scene.addFontFace(u,o)}),FE.size&&FE.forEach(function(o,u){r.scene.addIconFont(u,o)})},a.prototype.update=function(r){this.updateOption(r),r.map&&!(0,W.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.render(),this.emit("update")},a.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=Kp({},this.options,r)},a.prototype.updateMap=function(r){var o;if(this.scene){var u=r.style,c=r.center,p=r.zoom,g=r.rotation,y=r.pitch;(0,W.o8)(y)||this.scene.setPitch(y),(0,W.o8)(g)||this.scene.setRotation(g),u&&u!==((o=this.lastOptions.map)===null||o===void 0?void 0:o.style)&&this.scene.setMapStyle(u),p&&c&&this.scene.setZoomAndCenter(p,c)}},a.prototype.changeSize=function(r,o){this.options.width===r&&this.options.height===o||(this.container.style.width="".concat(r,"px"),this.container.style.height="".concat(o,"px"),this.options=Object.assign(this.options,{width:r,height:o}))},a.prototype.on=function(r,o,u){return this.proxyEventHander("on",r,o,u),this},a.prototype.once=function(r,o){return this.proxyEventHander("once",r,o),this},a.prototype.off=function(r,o){return this.proxyEventHander("off",r,o),this},a.prototype.proxyEventHander=function(r,o,u,c){var p=pH.find(function(L){return L.adaptation===o});if(p)this.scene[r](p.original,u);else if(dH.indexOf(o)!==-1)this.scene[r](o,u);else if(o.includes("Layer:")){var g=(0,w.CR)(o.split(":"),2),y=g[0],S=g[1],O=this[y]&&this[y][r];if(O&&ZR.indexOf(S)!==-1)this[y][r](S,u);else throw new Error('No event name "'.concat(o,'"'))}else e.prototype[r].call(this,o,u,c)},a.prototype.getScene=function(){return this.scene},a.prototype.getMap=function(){var r,o,u,c;return((r=this.options.map)===null||r===void 0?void 0:r.type)===Iv.Amap?this.scene.map:((o=this.options.map)===null||o===void 0?void 0:o.type)===Iv.AmapV2?this.scene.map:((u=this.options.map)===null||u===void 0?void 0:u.type)===Iv.Mapbox?this.scene.map:((c=this.options.map)===null||c===void 0?void 0:c.type)===Iv.Map?this.scene.map:this.scene.map},a.prototype.addLayer=function(r){this.layerGroup.addLayer(r)},a.prototype.getLayes=function(){return console.warn("Replace to use getLayers()"),this.getLayers()},a.prototype.getLayers=function(){return this.layerGroup.getLayers()},a.prototype.getLayerByName=function(r){return this.layerGroup.getLayerByName(r)},a.prototype.removeLayer=function(r){return this.layerGroup.removeLayer(r)},a.prototype.removeAllLayer=function(){this.layerGroup.removeAllLayer()},a.prototype.zoomIn=function(){this.scene.zoomIn()},a.prototype.zoomOut=function(){this.scene.zoomOut()},a.prototype.setPitch=function(r){this.scene.setPitch(r)},a.prototype.fitBounds=function(r){this.scene.fitBounds(r)},a.prototype.setMapStatus=function(r){this.scene.setMapStatus(r)},a.prototype.setBgColor=function(r){this.scene.setBgColor(r)},a.prototype.initComponents=function(){this.initControls(),this.initTooltip()},a.prototype.updateComponents=function(){this.updateControls(),this.initTooltip()},a.prototype.initControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;u&&this.addScaleControl(u),o&&this.addZoomControl(o),c&&this.addLayerMenuControl(c),p&&(this.addLegendControl(p),this.emit("add-legend"))},a.prototype.updateControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;(0,W.Xy)(this.lastOptions.zoom,o)||(o?this.updateZoomControl(o):this.removeZoomControl()),(0,W.Xy)(this.lastOptions.scale,u)||(u?this.updateScaleControl(u):this.removeScaleControl()),(0,W.Xy)(this.lastOptions.layerMenu,c)||(c?this.updateLayerMenuControl(c):this.removeLayerMenuControl()),(0,W.Xy)(this.lastOptions.legend,p)||(p?this.updateLegendControl(p):this.removeLegendControl())},a.prototype.addZoomControl=function(r){this.zoomControl||(this.zoomControl=new wF(r),this.scene.addControl(this.zoomControl))},a.prototype.updateZoomControl=function(r){if(!this.zoomControl){this.addZoomControl(r);return}this.removeZoomControl(),this.addZoomControl(r)},a.prototype.removeZoomControl=function(){this.zoomControl&&(this.zoomControl.remove(),this.zoomControl=void 0)},a.prototype.addScaleControl=function(r){this.scaleControl||(this.scaleControl=new CP(r),this.scene.addControl(this.scaleControl))},a.prototype.updateScaleControl=function(r){if(!this.scaleControl){this.addScaleControl(r);return}this.removeScaleControl(),this.addScaleControl(r)},a.prototype.removeScaleControl=function(){this.scaleControl&&(this.scaleControl.remove(),this.scaleControl=void 0)},a.prototype.addLayerMenuControl=function(r){var o={},u={};this.layerGroup.getLayers().forEach(function(c){var p=c.name,g=c.layer;u[p]=g})},a.prototype.updateLayerMenuControl=function(r){this.removeLayerMenuControl(),this.addLayerMenuControl(r)},a.prototype.removeLayerMenuControl=function(){},a.prototype.getLegendOptions=function(){return{}},a.prototype.addLegendControl=function(r){if(!this.legendControl){var o=this.theme.components.legend,u=Kp({},this.getLegendOptions(),r),c=u.type,p=u.position,g=(0,w._T)(u,["type","position"]),y=[];if(c==="category"){var S=Kp({},{domStyles:o.category.domStyles},g);y.push({type:c,options:S})}else if(c==="continue"){var O=Kp({},{domStyles:o.continue.domStyles},g);y.push({type:c,options:O})}y.length&&(this.legendControl=new FZ({position:p,items:y}),this.scene.addControl(this.legendControl))}},a.prototype.updateLegendControl=function(r){if(!this.legendControl){this.addLegendControl(r);return}this.removeLegendControl(),this.addLegendControl(r)},a.prototype.removeLegendControl=function(){this.legendControl&&(this.legendControl.remove(),this.legendControl=void 0)},a.prototype.initTooltip=function(){var r=this;this.tooltip&&this.tooltip.destroy();var o=this.options.tooltip;if(o){var u=Kp({},{domStyles:this.theme.components.tooltip.domStyles},o),c=this.layerGroup.getInteractionLayers();this.tooltip=new nH(this.scene,c,u),this.tooltip.on("*",function(p){return r.emit(p.type,p)})}},a.prototype.exportPng=function(r){return this.scene.exportPng(r)},a.prototype.destroy=function(){var r;e.prototype.off.call(this,"*"),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy(),this.scene.destroy()},a.DefaultOptions=GN,a}(LR.Z),$N;(function(e){e[e.solid=0]="solid",e[e.dash=1]="dash"})($N||($N={}));var Y5;(function(e){e.TextLayer="textLayer",e.DotLayer="dotLayer",e.IconLayer="iconLayer",e.DotDensity="dotDensityLayer",e.ColumnLayer="columnLayer",e.HeatmapLayer="heatmapLayer",e.GridLayer="gridLayer",e.HexbinLayer="hexbinLayer",e.LinesLayer="linesLayer",e.PathLayer="pathLayer",e.ArcLayer="arcLayer",e.AreaLayer="areaLayer",e.PrismLayer="prismLayer"})(Y5||(Y5={}));var K5=function(){function e(){}return e.aggregation=function(a,r){var o=r.type,u=o===void 0?"grid":o,c=r.radius,p=r.method,g=r.field,y={type:u,size:c,method:p,field:g};a.transforms?(a.transforms=a.transforms.filter(function(S){return S.type!==y.type}),a.transforms.push(y)):a.transforms=[y]},e}(),XN=["name","zIndex","visible","minZoom","maxZoom","pickingBuffer","autoFit","blend"],yx=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this)||this;return o.options=Kp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return a.prototype.getDefaultOptions=function(){return{}},a.prototype.pickLayerConfig=function(r){var o=(0,W.ei)(r,XN);return o},a.prototype.addTo=function(r){r.addLayer(this.layer)},a.prototype.remove=function(r){r.removeLayer(this.layer)},a.prototype.update=function(r){this.updateOption(r),this.updateConfig(r)},a.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=Kp({},this.options,r)},a.prototype.updateConfig=function(r){!(0,W.o8)(r.zIndex)&&!(0,W.Xy)(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(r.zIndex),!(0,W.o8)(r.blend)&&!(0,W.Xy)(this.lastOptions.blend,this.options.blend)&&this.setBlend(r.blend),!(0,W.o8)(r.minZoom)&&!(0,W.Xy)(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(r.minZoom),!(0,W.o8)(r.maxZoom)&&!(0,W.Xy)(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMinZoom(r.maxZoom),!(0,W.o8)(r.visible)&&!(0,W.Xy)(this.lastOptions.visible,this.options.visible)&&(r.visible?this.show():this.hide())},a.prototype.render=function(){this.layer.renderLayers()},a.prototype.setSource=function(r){if(r instanceof sy)this.layer.setSource(r);else{var o=r.data,u=r.aggregation,c=(0,w._T)(r,["data","aggregation"]);u&&K5.aggregation(c,u);var p=this.layer.getSource();p?this.layer.setData(o,c):this.layer.source(o,c)}},a.prototype.changeData=function(r){this.setSource(r)},a.prototype.setIndex=function(r){this.layer.setIndex(r)},a.prototype.setBlend=function(r){this.layer.setBlend(r)},a.prototype.setMinZoom=function(r){this.layer.setMinZoom(r)},a.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r)},a.prototype.show=function(){this.layer.inited&&this.layer.show()},a.prototype.hide=function(){this.layer.inited&&this.layer.hide()},a.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},a.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():this.options.visible},a.prototype.fitBounds=function(r){this.layer.fitBounds(r)},a.prototype.on=function(r,o){return ZR.indexOf(r)!==-1?this.layer.on(r,o):e.prototype.on.call(this,r,o),this},a.prototype.once=function(r,o){return ZR.indexOf(r)!==-1?this.layer.once(r,o):e.prototype.once.call(this,r,o),this},a.prototype.off=function(r,o){return ZR.indexOf(r)!==-1?this.layer.off(r,o):e.prototype.off.call(this,r,o),this},a.LayerType=Y5,a.LayerConfigkeys=XN,a}(LR.Z);function Jy(e,a){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var u={};return e.forEach(function(c,p){u[c]=r[p]}),delete u.undefined,a(u)}}var ul=function(){function e(){}return e.shape=function(a,r){if((0,W.HD)(r))a.shape(r);else if((0,W.mf)(r)){var o=[];a.shape(o.join("*"),Jy(o,r))}else if((0,W.Kn)(r)){var u=r.field?r.field:"";if((0,W.mf)(r.value)){var o=(0,W.kJ)(u)?u:u.split("*");a.shape(u,Jy(o,r.value))}else a.shape(u,r.value);(0,W.HD)(u)&&r.scale&&e.scale(a,u,r.scale)}},e.size=function(a,r){if((0,W.hj)(r))a.size(r);else if((0,W.kJ)(r))a.size(r);else if((0,W.mf)(r)){var o=[];a.size(o.join("*"),Jy(o,r))}else if((0,W.Kn)(r)){var u=r.field?r.field:"";if((0,W.mf)(r.value)){var o=(0,W.kJ)(u)?u:u.split("*");a.size(u,Jy(o,r.value))}else a.size(u,r.value);(0,W.HD)(u)&&r.scale&&e.scale(a,u,r.scale)}},e.color=function(a,r){if((0,W.HD)(r))a.color(r);else if((0,W.mf)(r)){var o=[];a.color(o.join("*"),Jy(o,r))}else if((0,W.Kn)(r)){var u=r.field?r.field:"";if((0,W.mf)(r.value)){var o=(0,W.kJ)(u)?u:u.split("*");a.color(u,Jy(o,r.value))}else a.color(u,r.value);(0,W.HD)(u)&&r.scale&&e.scale(a,u,r.scale)}},e.style=function(a,r){r&&a.style(r)},e.state=function(a,r){var o=r.active,u=r.select;o&&a.active(o),u&&a.select(u)},e.rotate=function(a,r){(0,W.HD)(r)||(0,W.mf)(r)||(0,W.Kn)(r)},e.texture=function(a,r){(0,W.HD)(r)&&a.texture(r)},e.animate=function(a,r){((0,W.jn)(r)||(0,W.Kn)(r))&&a.animate(r)},e.scale=function(a,r,o){a.scale(r,o)},e.filter=function(a,r){var o=r.field?r.field:"",u=(0,W.kJ)(o)?o:o.split("*");a.filter(u.join("*"),Jy(u,r.value))},e}();function gH(e,a){var r=a.field,o=a.content,u=a.style,c=u===void 0?{}:u,p=a.state,g=c.fontSize,y=c.fill,S=r||o||"",O={field:S,value:"text"};ul.shape(e,O),g&&ul.size(e,g),y&&ul.color(e,y),c&&ul.style(e,c),p&&ul.state(e,p)}var YN={style:{fontSize:12}},mH=[],yH=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this,r)||this;o.type=yx.LayerType.TextLayer,o.interaction=!1;var u=o.options,c=u.name,p=u.source,g=o.pickLayerConfig(o.options);return o.name=c||(0,W.EL)(o.type),o.layer=new vy((0,w.pi)((0,w.pi)({},g),{name:o.name})),o.mappingLayer(o.layer,o.options),o.setSource(p),o}return a.prototype.getDefaultOptions=function(){return YN},a.prototype.mappingLayer=function(r,o){gH(r,o)},a.prototype.update=function(r){e.prototype.update.call(this,r),this.mappingLayer(this.layer,this.options)},a.DefaultOptions=YN,a.LayerOptionsKeys=yx.LayerConfigkeys.concat(mH),a}(yx),q5;(function(e){e.Dot="dot",e.DotDensity="dotDensity",e.Heatmap="heatmap",e.Grid="grid",e.Hexbin="hexbin",e.Path="path",e.Flow="flow",e.Area="area",e.Choropleth="choropleth"})(q5||(q5={}));var _H={autoFit:!1},Q5=function(e){(0,w.ZT)(a,e);function a(r,o){var u=this;if(typeof r=="string"||r instanceof Element){if(o===void 0)throw new Error("options is undefined");u=e.call(this,o)||this,u.container=u.createContainer(r),u.theme=u.createTheme(),u.scene=u.createScene(),u.registerResources(),u.initSource()}else u=e.call(this,r)||this;return u}return a.prototype.initSource=function(){this.source=this.createSource(),this.render(),this.inited=!0},a.prototype.initLayersEvent=function(){},a.prototype.getDefaultOptions=function(){return a.DefaultOptions},a.prototype.createSource=function(){var r=this.options.source,o=r.data,u=r.aggregation,c=(0,w._T)(r,["data","aggregation"]);u&&K5.aggregation(c,u);var p=new sy(o,c);return p},a.prototype.createLabelLayer=function(r,o,u){var c=u||{},p=c.visible,g=c.minZoom,y=c.maxZoom,S=c.zIndex,O=S===void 0?0:S,L=new yH((0,w.pi)({name:"labelLayer",visible:p,minZoom:g,maxZoom:y,zIndex:O+.1,source:r},o));return L},a.prototype.updateLabelLayer=function(r,o,u,c){o?c?c.update((0,w.pi)({},o)):(c=this.createLabelLayer(r,o,u),this.layerGroup.addLayer(c)):o===!1&&c&&this.layerGroup.removeLayer(c)},a.prototype.render=function(){var r=this,o=this.createLayers(this.source);this.inited?(this.layerGroup.removeAllLayer(),o.addTo(this.scene),this.layerGroup=o):(this.layerGroup=o,this.scene.sceneService.loaded?this.onSceneLoaded():this.scene.once("loaded",function(){r.onSceneLoaded()})),this.initLayersEvent()},a.prototype.onSceneLoaded=function(){var r=this;this.sceneLoaded=!0,this.layerGroup.isEmpty()?this.onLayersLoaded():this.layerGroup.once("inited-all",function(){r.onLayersLoaded()}),this.layerGroup.addTo(this.scene)},a.prototype.onLayersLoaded=function(){this.layersLoaded=!0,this.initComponents(),this.loaded=!0,this.emit("loaded")},a.prototype.attachToScene=function(r,o){this.scene=r,this.theme=o||X5("default"),this.registerResources(),this.initSource()},a.prototype.unattachFromScene=function(){var r;this.removeAllLayer(),(r=this.tooltip)===null||r===void 0||r.destroy()},a.prototype.addToScene=function(r){this.attachToScene(r)},a.prototype.removeFromScene=function(){var r;this.removeAllLayer(),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy()},a.prototype.update=function(r){if(this.updateOption(r),r.map&&!(0,W.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.scene.setEnableRender(!1),r.source&&!(0,W.Xy)(this.lastOptions.source,this.options.source)){var o=r.source,u=o.data,c=(0,w._T)(o,["data"]);this.changeData(u,c)}this.scene.setEnableRender(!0),this.render(),this.updateComponents(),this.emit("update")},a.prototype.changeData=function(r,o){var u=this;this.options.source=Kp({},this.options.source,(0,w.pi)({data:r},o));var c=this.options.source,p=c.aggregation,g=(0,w._T)(c,["aggregation"]);p&&K5.aggregation(g,p),this.source.setData(this.options.source.data,g);var y=this.options.legend;y&&setTimeout(function(){u.updateLegendControl(y)}),this.emit("change-data")},a.DefaultOptions=_H,a.PlotType=q5,a}(vH),xH=Kp({},Q5.DefaultOptions,{source:{data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}}}),KN="#2f54eb",uf={active:{fill:!1,stroke:KN,lineWidth:1.5,lineOpacity:.8},select:{fill:!1,stroke:KN,lineWidth:1.5,lineOpacity:.8}},BE=function(e){return(0,W.o8)(e)||(e.active===!1?uf.active=Object.assign(uf.active,{fill:!1,stroke:!1}):typeof e.active=="object"&&(e.active.fill===!1?uf.active.fill=!1:typeof e.active.fill=="string"&&(uf.active.fill=e.active.fill),e.active.stroke===!1?uf.active.stroke=!1:typeof e.active.stroke=="string"&&(uf.active.stroke=e.active.stroke),typeof e.active.lineWidth=="number"&&(uf.active.lineWidth=e.active.lineWidth),typeof e.active.lineOpacity=="number"&&(uf.active.lineOpacity=e.active.lineOpacity)),e.select===!1?uf.select=Object.assign(uf.select,{fill:!1,stroke:!1}):typeof e.select=="object"&&(e.select.fill===!1?uf.select.fill=!1:typeof e.select.fill=="string"&&(uf.select.fill=e.select.fill),e.select.stroke===!1?uf.select.stroke=!1:typeof e.select.stroke=="string"&&(uf.select.stroke=e.select.stroke),typeof e.select.lineWidth=="number"&&(uf.select.lineWidth=e.select.lineWidth),typeof e.select.lineOpacity=="number"&&(uf.select.lineOpacity=e.select.lineOpacity))),uf};function bH(e,a,r,o,u,c){var p=c.color,g=c.style,y=c.state,S=BE(y),O={active:S.active.fill===!1?!1:{color:S.active.fill},select:!1},L={opacity:g==null?void 0:g.opacity},V=g==null?void 0:g.lineWidth,G=g==null?void 0:g.stroke,he={opacity:g==null?void 0:g.lineOpacity,dashArray:g==null?void 0:g.lineDash,lineType:g==null?void 0:g.lineType};if(ul.shape(e,"fill"),p&&ul.color(e,p),L&&ul.style(e,L),O&&ul.state(e,O),ul.shape(a,"line"),V&&ul.size(a,V),G&&ul.color(a,G),he&&ul.style(a,he),S.active.stroke){var ve=S.active.stroke,Pe=S.active.lineWidth||V,Xe={opacity:S.active.lineOpacity};ul.shape(r,"line"),Pe&&ul.size(r,Pe),ve&&ul.color(r,ve),Xe&&ul.style(r,Xe)}if(S.select.fill){var gt=S.select.fill;ul.shape(o,"fill"),gt&&ul.color(o,gt),L&&ul.style(o,L),ul.state(o,{select:!1,active:!1})}if(S.select.stroke){var _t=S.select.stroke,Pe=S.select.lineWidth||V,zt={opacity:S.select.lineOpacity};ul.shape(u,"line"),Pe&&ul.size(u,Pe),_t&&ul.color(u,_t),zt&&ul.style(u,zt)}}var SH=/\s/;function EH(e){for(var a=e.length;a--&&SH.test(e.charAt(a)););return a}var wH=EH,CH=/^\s+/;function TH(e){return e&&e.slice(0,wH(e)+1).replace(CH,"")}var AH=TH,qN=0/0,MH=/^[-+]0x[0-9a-f]+$/i,RH=/^0b[01]+$/i,IH=/^0o[0-7]+$/i,PH=parseInt;function OH(e){if(typeof e=="number")return e;if(BR(e))return qN;if(NR(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=NR(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=AH(e);var r=RH.test(e);return r||IH.test(e)?PH(e.slice(2),r?2:8):MH.test(e)?qN:+e}var QN=OH,JN=1/0,kH=17976931348623157e292;function DH(e){if(!e)return e===0?e:0;if(e=QN(e),e===JN||e===-JN){var a=e<0?-1:1;return a*kH}return e===e?e:0}var LH=DH;function FH(e){var a=LH(e),r=a%1;return a===a?r?a-r:a:0}var BH=FH,NH=FR.isFinite,zH=Math.min;function UH(e){var a=Math[e];return function(r,o){if(r=QN(r),o=o==null?0:zH(BH(o),292),o&&NH(r)){var u=(G5(r)+"e").split("e"),c=a(u[0]+"e"+(+u[1]+o));return u=(G5(c)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return a(r)}}var ZH=UH,VH=ZH("round"),e8=VH,HH=function(e){return!Array.isArray(e[0].value)},jH=function(e){if(HH(e))return e;var a=e.map(function(r){return(0,w.pi)((0,w.pi)({},r),{value:[e8(r.value[0],2),e8(r.value[1],2)]})});return a},t8={visible:!0,state:{active:!1,select:!1},enabledMultiSelect:!1},WH=["color","style","state","enabledMultiSelect"],J5=function(e){(0,w.ZT)(a,e);function a(r){var o=e.call(this,r)||this;o.selectData=[],o.type=yx.LayerType.AreaLayer,o.interaction=!0,o.onHighlighHandle=function(he){var ve=he.feature,Pe=he.featureId;o.setHighlightLayerSource(ve,Pe)},o.onUnhighlighHandle=function(){o.setHighlightLayerSource()},o.onSelectHandle=function(he){var ve=o.options.enabledMultiSelect,Pe=he.feature,Xe=he.featureId,gt=(0,W.d9)(o.selectData),_t=gt.findIndex(function(Xt){return Xt.featureId===Xe});if(_t===-1)ve?gt.push({feature:Pe,featureId:Xe}):gt=[{feature:Pe,featureId:Xe}],o.emit("select",Pe,(0,W.d9)(gt));else{var zt=gt[_t];ve?gt.splice(_t,1):gt=[],o.emit("unselect",zt,(0,W.d9)(gt))}o.setSelectLayerSource(gt)};var u=o.options,c=u.name,p=u.source,g=u.visible,y=u.minZoom,S=u.maxZoom,O=u.zIndex,L=O===void 0?0:O,V=o.pickLayerConfig(o.options),G=BE(o.options.state);return o.name=c||(0,W.EL)(o.type),o.layer=new a1((0,w.pi)((0,w.pi)({},V),{name:o.name})),o.strokeLayer=new e0({name:"strokeLayer",visible:g,zIndex:L,minZoom:y,maxZoom:S}),o.highlightLayer=new e0({name:"highlightLayer",visible:g&&!!G.active.stroke,zIndex:L+.1,minZoom:y,maxZoom:S}),o.selectFillLayer=new a1({name:"selectFillLayer",visible:g&&!!G.select.fill,zIndex:L+.1,minZoom:y,maxZoom:S}),o.selectStrokeLayer=new e0({name:"selectStrokeLayer",visible:g&&!!G.select.stroke,zIndex:L+.1,minZoom:y,maxZoom:S}),o.mappingLayer(o.options),o.setSource(p),o.initEvent(),o}return a.prototype.getDefaultOptions=function(){return t8},a.prototype.mappingLayer=function(r){bH(this.layer,this.strokeLayer,this.highlightLayer,this.selectFillLayer,this.selectStrokeLayer,r)},a.prototype.setSource=function(r){e.prototype.setSource.call(this,r),this.setStrokeLayerSource(),this.setHighlightLayerSource(),this.selectFillLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}}),this.selectStrokeLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}})},a.prototype.setStrokeLayerSource=function(){var r=this.layer.getSource();if(r)this.strokeLayer.setSource(r);else{var o=this.layer.sourceOption,u=o.data,c=o.options;this.strokeLayer.source(u,c)}},a.prototype.setHighlightLayerSource=function(r,o){if(o===void 0&&(o=-999),this.highlightLayerData!==o){var u=r?[r]:[];this.highlightLayer.setData({type:"FeatureCollection",features:u},{parser:{type:"geojson"}}),this.highlightLayerData=o}},a.prototype.setSelectLayerSource=function(r){if(r===void 0&&(r=[]),!(this.selectData.length===r.length&&(0,W.Xy)(this.selectData.map(function(u){var c=u.featureId;return c}),r.map(function(u){var c=u.featureId;return c})))){var o=r.map(function(u){var c=u.feature;return c});this.selectFillLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectStrokeLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectData=r}},a.prototype.initEvent=function(){this.layer.off("mousemove",this.onHighlighHandle),this.layer.off("unmousemove",this.onHighlighHandle),this.layer.off("click",this.onSelectHandle),this.selectData=[],this.highlightLayerData=null,this.options.state&&(this.options.state.active&&(this.layer.on("mousemove",this.onHighlighHandle),this.layer.on("unmousemove",this.onUnhighlighHandle)),this.options.state.select&&this.layer.on("click",this.onSelectHandle))},a.prototype.addTo=function(r){r.addLayer(this.layer),r.addLayer(this.strokeLayer),r.addLayer(this.highlightLayer),r.addLayer(this.selectFillLayer),r.addLayer(this.selectStrokeLayer)},a.prototype.remove=function(r){r.removeLayer(this.layer),r.removeLayer(this.strokeLayer),r.removeLayer(this.highlightLayer),r.removeLayer(this.selectFillLayer),r.removeLayer(this.selectStrokeLayer)},a.prototype.update=function(r){if(e.prototype.update.call(this,r),this.mappingLayer(this.options),this.options.visible){!(0,W.o8)(r.state)&&!(0,W.Xy)(this.lastOptions.state,this.options.state)&&this.updateHighlightLayer();var o=BE(this.options.state);o.active.stroke&&this.setHighlightLayerSource(),(o.select.fill||o.select.stroke)&&this.setSelectLayerSource()}this.initEvent()},a.prototype.updateHighlightLayer=function(){var r=BE(this.options.state),o=BE(this.lastOptions.state);o.active.stroke!==r.active.stroke&&(r.active.stroke?this.highlightLayer.show():this.highlightLayer.hide()),o.select.fill!==r.select.fill&&(r.select.fill?this.selectFillLayer.show():this.selectFillLayer.hide()),o.select.stroke!==r.select.stroke&&(r.select.stroke?this.selectStrokeLayer.show():this.selectStrokeLayer.hide())},a.prototype.setIndex=function(r){this.layer.setIndex(r),this.strokeLayer.setIndex(r),this.highlightLayer.setIndex(r+.1),this.selectFillLayer.setIndex(r+.1),this.selectStrokeLayer.setIndex(r+.1)},a.prototype.setMinZoom=function(r){this.layer.setMinZoom(r),this.strokeLayer.setMinZoom(r),this.highlightLayer.setMinZoom(r),this.selectFillLayer.setMinZoom(r),this.selectStrokeLayer.setMinZoom(r)},a.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r),this.strokeLayer.setMaxZoom(r),this.highlightLayer.setMaxZoom(r),this.selectFillLayer.setMaxZoom(r),this.selectStrokeLayer.setMaxZoom(r)},a.prototype.show=function(){this.layer.inited&&(this.layer.show(),this.strokeLayer.show(),this.selectFillLayer.show(),this.selectStrokeLayer.show())},a.prototype.hide=function(){this.layer.inited&&(this.layer.hide(),this.strokeLayer.hide(),this.selectFillLayer.hide(),this.selectStrokeLayer.hide())},a.prototype.getColorLegendItems=function(){var r=this.layer.getLegendItems("color");if(Array.isArray(r)&&r.length!==0){var o=jH(r);return o}return[]},a.prototype.setActive=function(r){},a.prototype.setSelect=function(r){},a.DefaultOptions=t8,a.LayerOptionsKeys=yx.LayerConfigkeys.concat(WH),a}(yx),GH=function(e){(0,w.ZT)(a,e);function a(){var r=e.apply(this,(0,w.ev)([],(0,w.CR)(arguments),!1))||this;return r.type=Q5.PlotType.Area,r}return a.prototype.getDefaultOptions=function(){return a.DefaultOptions},a.prototype.createLayers=function(r){this.areaLayer=new J5((0,w.pi)({source:r},(0,W.ei)(this.options,J5.LayerOptionsKeys)));var o=new WN([this.areaLayer]);return this.options.label&&(this.labelLayer=this.createLabelLayer(r,this.options.label,this.options),o.addLayer(this.labelLayer)),o},a.prototype.updateLayers=function(r){var o=(0,W.ei)(r,J5.LayerOptionsKeys);this.areaLayer.update(o),this.updateLabelLayer(this.source,r.label,this.options,this.labelLayer)},a.prototype.initLayersEvent=function(){},a.prototype.getLegendOptions=function(){var r=this.areaLayer.getColorLegendItems();return r.length!==0?{type:"category",items:r}:{}},a.DefaultOptions=xH,a}(Q5),Qj=function(e,a){var r={}.toString;return r.call(e)==="[object ".concat(a,"]")},Jj=function(e){return Object.prototype.toString.call(e).slice(8,-1)},eB=function(e){if(!e||typeof e!="object")return e;var a;return Array.isArray(e)?a=e.map(function(r){return eB(r)}):(a={},Object.keys(e).forEach(function(r){return a[r]=eB(e[r])})),a},eW=function(e){if(!e)return e;var a={};for(var r in e)a[r]=e[r];return a},NE=function(){return NE=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},NE.apply(this,arguments)},$H=function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},r8=function(e){var a=e.source,r=$H(e,["source"]),o=NE(NE({},eB(r)),{source:NE({},a)});return o},tB=function(){return tB=Object.assign||function(e){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},tB.apply(this,arguments)},HR=function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r};function XH(e,a){var r=(0,K.useRef)(),o=(0,K.useRef)(),u=(0,K.useRef)(null),c=a.onReady;return(0,K.useEffect)(function(){if(!(!r.current||!o.current||(0,W.Xy)(o.current,a))){var p=!1,g=!1,y=!1,S=o.current,O=S.onReady,L=S.map,V=S.source,G=V.data,he=HR(V,["data"]),ve=HR(S,["onReady","map","source"]),Pe=a.onReady,Xe=a.map,gt=a.source,_t=gt.data,zt=HR(gt,["data"]),Xt=HR(a,["onReady","map","source"]);if(g=!(0,W.Xy)(L,Xe),p=!(0,W.Xy)(he,zt)||G!==_t,y=!(0,W.Xy)(ve,Xt),o.current=r8(a),g){var nr=(0,W.ei)(Xe,["center","pitch","rotation","zoom","style"]);r.current.updateMap(nr)}p&&(r.current.loaded?r.current.changeData(_t,zt):r.current.once("loaded",function(){var ar;(ar=r.current)===null||ar===void 0||ar.changeData(_t,zt)})),y&&(r.current.loaded?r.current.update(Xt):r.current.once("loaded",function(){var ar;(ar=r.current)===null||ar===void 0||ar.update(Xt)}))}},[a]),(0,K.useEffect)(function(){return u.current?(o.current||(o.current=r8(a)),r.current=new e(u.current,tB({},a)),c&&r.current.once("loaded",function(){c(r.current)}),function(){r.current&&(r.current.destroy(),r.current=void 0)}):function(){return null}},[]),{plotRef:r,containerRef:u}}var YH=function(e,a){e&&((0,W.mf)(e)?e(a):e.current=a)},KH=function(){var e=function(a,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},e(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(a,r);function o(){this.constructor=a}a.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),qH=function(e){KH(a,e);function a(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={hasError:!1},r.renderError=function(o){var u=r.props.errorTemplate;switch(o){default:return typeof u=="function"?u(o):u||K.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",o.message)}},r}return a.getDerivedStateFromError=function(r){return{hasError:!0,error:r}},a.getDerivedStateFromProps=function(r,o){return o.children!==r.children?{children:r.children,hasError:!1,error:void 0}:null},a.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):K.createElement(K.Fragment,null,this.props.children)},a}(K.Component),QH=qH,JH=k(24561),ej=function(e){var a=e.loadingTemplate,r=function(){return a||K.createElement(JH.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1},K.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),K.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),K.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),K.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),K.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),K.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),K.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),K.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),K.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),K.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return K.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},r())},tj=ej,rj=function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},nj=(0,K.forwardRef)(function(e,a){var r=e.chartRef,o=e.containerStyle,u=o===void 0?{height:"inherit"}:o,c=e.className,p=e.loading,g=e.loadingTemplate,y=e.errorTemplate,S=rj(e,["chartRef","containerStyle","className","loading","loadingTemplate","errorTemplate"]),O=XH(GH,S),L=O.plotRef,V=O.containerRef;return(0,K.useEffect)(function(){YH(r,L.current)},[L.current]),(0,K.useImperativeHandle)(a,function(){return{getChart:function(){return L.current}}}),K.createElement(QH,{errorTemplate:y},p&&K.createElement(tj,{loadingTemplate:g}),K.createElement("div",{className:c,style:u,ref:V}))}),ij=nj},79611:function(ct,N,k){"use strict";var $=k(67294),K=k(19372),w=k(11924),W=k(79360),j=k(24770),q=k(80803),Q=function(te,we){var fe={};for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&we.indexOf(ce)<0&&(fe[ce]=te[ce]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,ce=Object.getOwnPropertySymbols(te);J<ce.length;J++)we.indexOf(ce[J])<0&&Object.prototype.propertyIsEnumerable.call(te,ce[J])&&(fe[ce[J]]=te[ce[J]]);return fe},ie=(0,$.forwardRef)(function(te,we){var fe=te.chartRef,ce=te.style,J=ce===void 0?{height:"inherit"}:ce,M=te.className,E=te.loading,ge=te.loadingTemplate,be=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Be=(0,w.Z)(K.$Q,ze),Ue=Be.chart,it=Be.container;return(0,$.useEffect)(function(){(0,W.J)(fe,Ue.current)},[Ue.current]),(0,$.useImperativeHandle)(we,function(){return{getChart:function(){return Ue.current}}}),$.createElement(j.Z,{errorTemplate:be},E&&$.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),$.createElement("div",{className:M,style:J,ref:it}))});N.Z=ie},78677:function(ct,N,k){"use strict";var $=k(67294),K=k(19372),w=k(11924),W=k(79360),j=k(24770),q=k(80803),Q=function(te,we){var fe={};for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&we.indexOf(ce)<0&&(fe[ce]=te[ce]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,ce=Object.getOwnPropertySymbols(te);J<ce.length;J++)we.indexOf(ce[J])<0&&Object.prototype.propertyIsEnumerable.call(te,ce[J])&&(fe[ce[J]]=te[ce[J]]);return fe},ie=(0,$.forwardRef)(function(te,we){var fe=te.chartRef,ce=te.style,J=ce===void 0?{height:"inherit"}:ce,M=te.className,E=te.loading,ge=te.loadingTemplate,be=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Be=(0,w.Z)(K.sg,ze),Ue=Be.chart,it=Be.container;return(0,$.useEffect)(function(){(0,W.J)(fe,Ue.current)},[Ue.current]),(0,$.useImperativeHandle)(we,function(){return{getChart:function(){return Ue.current}}}),$.createElement(j.Z,{errorTemplate:be},E&&$.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),$.createElement("div",{className:M,style:J,ref:it}))});N.Z=ie},80652:function(ct,N,k){"use strict";var $=k(67294),K=k(19372),w=k(11924),W=k(79360),j=k(24770),q=k(80803),Q=function(te,we){var fe={};for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&we.indexOf(ce)<0&&(fe[ce]=te[ce]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,ce=Object.getOwnPropertySymbols(te);J<ce.length;J++)we.indexOf(ce[J])<0&&Object.prototype.propertyIsEnumerable.call(te,ce[J])&&(fe[ce[J]]=te[ce[J]]);return fe},ie=(0,$.forwardRef)(function(te,we){var fe=te.chartRef,ce=te.style,J=ce===void 0?{height:"inherit"}:ce,M=te.className,E=te.loading,ge=te.loadingTemplate,be=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Be=(0,w.Z)(K.x1,ze),Ue=Be.chart,it=Be.container;return(0,$.useEffect)(function(){(0,W.J)(fe,Ue.current)},[Ue.current]),(0,$.useImperativeHandle)(we,function(){return{getChart:function(){return Ue.current}}}),$.createElement(j.Z,{errorTemplate:be},E&&$.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),$.createElement("div",{className:M,style:J,ref:it}))});N.Z=ie},63430:function(ct,N,k){"use strict";var $=k(67294),K=k(19372),w=k(11924),W=k(79360),j=k(24770),q=k(80803),Q=function(te,we){var fe={};for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&we.indexOf(ce)<0&&(fe[ce]=te[ce]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,ce=Object.getOwnPropertySymbols(te);J<ce.length;J++)we.indexOf(ce[J])<0&&Object.prototype.propertyIsEnumerable.call(te,ce[J])&&(fe[ce[J]]=te[ce[J]]);return fe},ie=(0,$.forwardRef)(function(te,we){var fe=te.chartRef,ce=te.style,J=ce===void 0?{height:"inherit"}:ce,M=te.className,E=te.loading,ge=te.loadingTemplate,be=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Be=(0,w.Z)(K.by,ze),Ue=Be.chart,it=Be.container;return(0,$.useEffect)(function(){(0,W.J)(fe,Ue.current)},[Ue.current]),(0,$.useImperativeHandle)(we,function(){return{getChart:function(){return Ue.current}}}),$.createElement(j.Z,{errorTemplate:be},E&&$.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),$.createElement("div",{className:M,style:J,ref:it}))});N.Z=ie},24770:function(ct,N,k){"use strict";var $=k(67294),K=function(){var W=function(j,q){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ie){Q.__proto__=ie}||function(Q,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(Q[te]=ie[te])},W(j,q)};return function(j,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");W(j,q);function Q(){this.constructor=j}j.prototype=q===null?Object.create(q):(Q.prototype=q.prototype,new Q)}}(),w=function(W){K(j,W);function j(){var q=W!==null&&W.apply(this,arguments)||this;return q.state={hasError:!1},q.renderError=function(Q){var ie=q.props.errorTemplate;switch(Q){default:return typeof ie=="function"?ie(Q):ie||$.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Q.message)}},q}return j.getDerivedStateFromError=function(q){return{hasError:!0,error:q}},j.getDerivedStateFromProps=function(q,Q){return Q.children!==q.children?{children:q.children,hasError:!1,error:void 0}:null},j.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):$.createElement($.Fragment,null,this.props.children)},j}($.Component);N.Z=w},11924:function(ct,N,k){"use strict";k.d(N,{Z:function(){return Ce}});var $=k(67294),K=k(21030),w=k(73935),W=k.t(w,2),j=function(){return j=Object.assign||function(De){for(var tt,_e=1,me=arguments.length;_e<me;_e++){tt=arguments[_e];for(var Ge in tt)Object.prototype.hasOwnProperty.call(tt,Ge)&&(De[Ge]=tt[Ge])}return De},j.apply(this,arguments)},q=function(De,tt,_e,me){function Ge(Ze){return Ze instanceof _e?Ze:new _e(function(pt){pt(Ze)})}return new(_e||(_e=Promise))(function(Ze,pt){function Ht(Te){try{$e(me.next(Te))}catch(Ye){pt(Ye)}}function Je(Te){try{$e(me.throw(Te))}catch(Ye){pt(Ye)}}function $e(Te){Te.done?Ze(Te.value):Ge(Te.value).then(Ht,Je)}$e((me=me.apply(De,tt||[])).next())})},Q=function(De,tt){var _e={label:0,sent:function(){if(Ze[0]&1)throw Ze[1];return Ze[1]},trys:[],ops:[]},me,Ge,Ze,pt;return pt={next:Ht(0),throw:Ht(1),return:Ht(2)},typeof Symbol=="function"&&(pt[Symbol.iterator]=function(){return this}),pt;function Ht($e){return function(Te){return Je([$e,Te])}}function Je($e){if(me)throw new TypeError("Generator is already executing.");for(;pt&&(pt=0,$e[0]&&(_e=0)),_e;)try{if(me=1,Ge&&(Ze=$e[0]&2?Ge.return:$e[0]?Ge.throw||((Ze=Ge.return)&&Ze.call(Ge),0):Ge.next)&&!(Ze=Ze.call(Ge,$e[1])).done)return Ze;switch(Ge=0,Ze&&($e=[$e[0]&2,Ze.value]),$e[0]){case 0:case 1:Ze=$e;break;case 4:return _e.label++,{value:$e[1],done:!1};case 5:_e.label++,Ge=$e[1],$e=[0];continue;case 7:$e=_e.ops.pop(),_e.trys.pop();continue;default:if(Ze=_e.trys,!(Ze=Ze.length>0&&Ze[Ze.length-1])&&($e[0]===6||$e[0]===2)){_e=0;continue}if($e[0]===3&&(!Ze||$e[1]>Ze[0]&&$e[1]<Ze[3])){_e.label=$e[1];break}if($e[0]===6&&_e.label<Ze[1]){_e.label=Ze[1],Ze=$e;break}if(Ze&&_e.label<Ze[2]){_e.label=Ze[2],_e.ops.push($e);break}Ze[2]&&_e.ops.pop(),_e.trys.pop();continue}$e=tt.call(De,_e)}catch(Te){$e=[6,Te],Ge=0}finally{me=Ze=0}if($e[0]&5)throw $e[1];return{value:$e[0]?$e[1]:void 0,done:!0}}},ie=j({},W),te=ie.version,we=ie.render,fe=ie.unmountComponentAtNode,ce;try{var J=Number((te||"").split(".")[0]);J>=18&&(ce=ie.createRoot)}catch(De){}function M(De){var tt=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;tt&&typeof tt=="object"&&(tt.usingClientEntryPoint=De)}var E="__rc_react_root__";function ge(De,tt){M(!0);var _e=tt[E]||ce(tt);M(!1),_e.render(De),tt[E]=_e}function be(De,tt){we(De,tt)}function ze(De,tt){}function Be(De,tt){if(ce){ge(De,tt);return}be(De,tt)}function Ue(De){return q(this,void 0,void 0,function(){return Q(this,function(tt){return[2,Promise.resolve().then(function(){var _e;(_e=De[E])===null||_e===void 0||_e.unmount(),delete De[E]})]})})}function it(De){fe(De)}function ht(De){}function Le(De){return q(this,void 0,void 0,function(){return Q(this,function(tt){return ce!==void 0?[2,Ue(De)]:(it(De),[2])})})}var Se=new Map,ye=function(De,tt,_e){var me=document.createElement("div");return tt==="tooltip"&&(me.setAttribute("data-uuid",_e),Se.has(_e)?me=Se.get(_e):Se.set(_e,me),me.className="g2-tooltip"),Be(De,me),me},Ve=ye,je=function(De,tt){var _e={}.toString;return _e.call(De)==="[object ".concat(tt,"]")},Et=function(De){if(!De)return De;var tt={};for(var _e in De)tt[_e]=De[_e];return tt},Oe=function(De){return Object.prototype.toString.call(De).slice(8,-1)},Qe=function(De){if(!De||typeof De!="object")return De;var tt;return Array.isArray(De)?tt=De.map(function(_e){return Qe(_e)}):(tt={},Object.keys(De).forEach(function(_e){return tt[_e]=Qe(De[_e])})),tt},ne=function(De,tt){for(var _e=De,me=0;me<tt.length;me+=1)if(_e!=null&&_e[tt[me]])_e=_e[tt[me]];else{_e=void 0;break}return _e},We=function(De,tt,_e){if(!De)return De;var me=De;return tt.forEach(function(Ge,Ze){Ze<tt.length-1?me=me[Ge]:me[Ge]=_e}),De},oe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(De){var tt=Math.random()*16|0,_e=De=="x"?tt:tt&3|8;return _e.toString(16)})},Fe=function(){return Fe=Object.assign||function(De){for(var tt,_e=1,me=arguments.length;_e<me;_e++){tt=arguments[_e];for(var Ge in tt)Object.prototype.hasOwnProperty.call(tt,Ge)&&(De[Ge]=tt[Ge])}return De},Fe.apply(this,arguments)},st=function(De,tt){var _e={};for(var me in De)Object.prototype.hasOwnProperty.call(De,me)&&tt.indexOf(me)<0&&(_e[me]=De[me]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ge=0,me=Object.getOwnPropertySymbols(De);Ge<me.length;Ge++)tt.indexOf(me[Ge])<0&&Object.prototype.propertyIsEnumerable.call(De,me[Ge])&&(_e[me[Ge]]=De[me[Ge]]);return _e};function Ce(De,tt){var _e=(0,$.useRef)(),me=(0,$.useRef)(),Ge=(0,$.useRef)(null),Ze=tt.onReady,pt=tt.onEvent,Ht=function(Ye,ft){var ke;return Ye===void 0&&(Ye="image/png"),(ke=_e.current)===null||ke===void 0?void 0:ke.chart.canvas.cfg.el.toDataURL(Ye,ft)},Je=function(Ye,ft,ke){var Ne;Ye===void 0&&(Ye="download"),ft===void 0&&(ft="image/png");var dt=Ye;Ye.indexOf(".")===-1&&(dt="".concat(Ye,".").concat(ft.split("/")[1]));var Pt=(Ne=_e.current)===null||Ne===void 0?void 0:Ne.chart.canvas.cfg.el.toDataURL(ft,ke),rr=document.createElement("a");return rr.href=Pt,rr.download=dt,document.body.appendChild(rr),rr.click(),document.body.removeChild(rr),rr=null,dt},$e=function(Ye,ft,ke,Ne){var dt=ne(Ye,ft);We(Ye,ft,function(){for(var Pt=[],rr=0;rr<arguments.length;rr++)Pt[rr]=arguments[rr];var xr=je(dt,"Function")?dt.apply(void 0,Pt):dt;return je(xr,"String")||je(xr,"Number")||je(xr,"HTMLDivElement")?xr:Ve(xr,ke,Ne)})},Te=function(){var Ye=oe();ne(tt,["statistic","content","customHtml"])&&$e(tt,["statistic","content","customHtml"]),ne(tt,["statistic","title","customHtml"])&&$e(tt,["statistic","title","customHtml"]),typeof tt.tooltip=="object"&&(ne(tt,["tooltip","container"])&&$e(tt,["tooltip","container"],"tooltip",Ye),ne(tt,["tooltip","customContent"])&&$e(tt,["tooltip","customContent"],"tooltip",Ye))};return(0,$.useEffect)(function(){if(_e.current&&!(0,K.Xy)(me.current,tt)){var Ye=!1;if(me.current){var ft=me.current,ke=ft.data,Ne=ft.value,dt=ft.percent,Pt=st(ft,["data","value","percent"]),rr=tt.data,xr=tt.value,ut=tt.percent,nn=st(tt,["data","value","percent"]);Ye=(0,K.Xy)(Pt,nn)}if(me.current=Qe(tt),Ye&&(0,K.U2)(tt,"chartType")!=="Mix"){var Gr="data",Xr=["percent"],Nt=Object.keys(tt);Xr.forEach(function(Yt){Nt.includes(Yt)&&(Gr=Yt)}),_e.current.changeData((tt==null?void 0:tt[Gr])||[]),_e.current.render()}else Te(),_e.current.update(tt)}},[tt]),(0,$.useEffect)(function(){if(!Ge.current)return function(){return null};me.current||(me.current=Qe(tt)),Te();var Ye=new De(Ge.current,Fe({},tt));Ye.toDataURL=function(ke,Ne){return Ht(ke,Ne)},Ye.downloadImage=function(ke,Ne,dt){return Je(ke,Ne,dt)},Ye.render(),_e.current=Et(Ye),Ze&&Ze(Ye);var ft=function(ke){pt&&pt(Ye,ke)};return Ye.on("*",ft),function(){_e.current&&(_e.current.destroy(),_e.current.off("*",ft),_e.current=void 0)}},[]),{chart:_e,container:Ge}}},80803:function(ct,N,k){"use strict";var $=k(67294),K=k(24561),w=function(W){var j=W.loadingTemplate,q=W.theme,Q=q===void 0?"light":q,ie=function(){return j||$.createElement(K.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:Q==="dark"?"#262626":"#D9D9D9"},$.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),$.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),$.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),$.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),$.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),$.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),$.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),$.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),$.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),$.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return $.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:Q==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},ie())};N.Z=w},79360:function(ct,N,k){"use strict";k.d(N,{J:function(){return K}});var $=k(21030),K=function(w,W){w&&((0,$.mf)(w)?w(W):w.current=W)}},13943:function(ct,N,k){"use strict";k.d(N,{Z:function(){return Fe}});var $=k(4942),K=k(1413),w=k(91),W=k(28459),j=k(94184),q=k.n(j),Q=k(67294),ie=k(72120),te=k(44962),we=k(98082),fe=function(Ce){return(0,$.Z)({},Ce.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ce.marginLG,marginInline:0,color:Ce.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function ce(st){return(0,we.Xj)("ProCardOperation",function(Ce){var De=(0,K.Z)((0,K.Z)({},Ce),{},{componentCls:".".concat(st)});return[fe(De)]})}var J=k(85893),M=function(Ce){var De=Ce.className,tt=Ce.style,_e=tt===void 0?{}:tt,me=Ce.children,Ge=(0,Q.useContext)(W.ZP.ConfigContext),Ze=Ge.getPrefixCls,pt=Ze("pro-card-operation"),Ht=ce(pt),Je=Ht.wrapSSR,$e=Ht.hashId,Te=q()(pt,De,$e);return Je((0,J.jsx)("div",{className:Te,style:_e,children:me}))},E=M,ge=k(87462),be=k(36688),ze=k(5627),Be=function(Ce,De){return Q.createElement(ze.Z,(0,ge.Z)({},Ce,{ref:De,icon:be.Z}))},Ue=Q.forwardRef(Be),it=k(83062),ht=k(40411),Le=k(55054),Se=function(Ce){var De,tt,_e;return(0,$.Z)({},Ce.componentCls,(_e={display:"flex",fontSize:Ce.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,$.Z)({display:"flex",width:"100%"},"".concat(Ce.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,$.Z)({width:"100%"},"".concat(Ce.antCls,"-statistic-content"),{"&-value-int":{fontSize:Ce.fontSizeHeading3}}),"&-description":{width:"100%"}},(0,$.Z)(_e,"".concat(Ce.antCls,"-statistic-title"),{color:Ce.colorText}),(0,$.Z)(_e,"&-trend-up",(0,$.Z)({},"".concat(Ce.antCls,"-statistic-content"),(0,$.Z)({color:"#f5222d"},"".concat(Ce.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),(0,$.Z)(_e,"&-trend-down",(0,$.Z)({},"".concat(Ce.antCls,"-statistic-content"),(0,$.Z)({color:"#389e0d"},"".concat(Ce.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),(0,$.Z)(_e,"& &-layout-horizontal",(De={display:"flex",justifyContent:"space-between"},(0,$.Z)(De,"".concat(Ce.antCls,"-statistic-title"),{marginBlockEnd:0}),(0,$.Z)(De,"".concat(Ce.antCls,"-statistic-content-value"),{fontWeight:500}),(0,$.Z)(De,"".concat(Ce.antCls,"-statistic-title,").concat(Ce.antCls,"-statistic-content,").concat(Ce.antCls,"-statistic-content-suffix,").concat(Ce.antCls,"-statistic-content-prefix,").concat(Ce.antCls,"-statistic-content-value-decimal"),{fontSize:Ce.fontSize}),De)),(0,$.Z)(_e,"& &-layout-inline",(tt={display:"inline-flex",color:Ce.colorTextSecondary},(0,$.Z)(tt,"".concat(Ce.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),(0,$.Z)(tt,"".concat(Ce.antCls,"-statistic-content"),{color:Ce.colorTextSecondary}),(0,$.Z)(tt,"".concat(Ce.antCls,"-statistic-title,").concat(Ce.antCls,"-statistic-content,").concat(Ce.antCls,"-statistic-content-suffix,").concat(Ce.antCls,"-statistic-content-prefix,").concat(Ce.antCls,"-statistic-content-value-decimal"),{fontSize:Ce.fontSizeSM}),tt)),_e))};function ye(st){return(0,we.Xj)("Statistic",function(Ce){var De=(0,K.Z)((0,K.Z)({},Ce),{},{componentCls:".".concat(st)});return[Se(De)]})}var Ve=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],je=function(Ce){var De,tt=Ce.className,_e=Ce.layout,me=_e===void 0?"inline":_e,Ge=Ce.style,Ze=Ce.description,pt=Ce.children,Ht=Ce.title,Je=Ce.tip,$e=Ce.status,Te=Ce.trend,Ye=Ce.prefix,ft=Ce.icon,ke=(0,w.Z)(Ce,Ve),Ne=(0,Q.useContext)(W.ZP.ConfigContext),dt=Ne.getPrefixCls,Pt=dt("pro-card-statistic"),rr=ye(Pt),xr=rr.wrapSSR,ut=rr.hashId,nn=q()(Pt,tt,ut),Gr=q()("".concat(Pt,"-status"),ut),Xr=q()("".concat(Pt,"-icon"),ut),Nt=q()("".concat(Pt,"-wrapper"),ut),Yt=q()("".concat(Pt,"-content"),ut),sr=q()(ut,(De={},(0,$.Z)(De,"".concat(Pt,"-layout-").concat(me),me),(0,$.Z)(De,"".concat(Pt,"-trend-").concat(Te),Te),De)),Dt=Je&&(0,J.jsx)(it.Z,{title:Je,children:(0,J.jsx)(Ue,{className:"".concat(Pt,"-tip ").concat(ut).trim()})}),Qt=q()("".concat(Pt,"-trend-icon"),ut,(0,$.Z)({},"".concat(Pt,"-trend-icon-").concat(Te),Te)),Sr=Te&&(0,J.jsx)("div",{className:Qt}),Er=$e&&(0,J.jsx)("div",{className:Gr,children:(0,J.jsx)(ht.Z,{status:$e,text:null})}),Fr=ft&&(0,J.jsx)("div",{className:Xr,children:ft});return xr((0,J.jsxs)("div",{className:nn,style:Ge,children:[Fr,(0,J.jsxs)("div",{className:Nt,children:[Er,(0,J.jsxs)("div",{className:Yt,children:[(0,J.jsx)(Le.Z,(0,K.Z)({title:(Ht||Dt)&&(0,J.jsxs)(J.Fragment,{children:[Ht,Dt]}),prefix:(Sr||Ye)&&(0,J.jsxs)(J.Fragment,{children:[Sr,Ye]}),className:sr},ke)),Ze&&(0,J.jsx)("div",{className:"".concat(Pt,"-description ").concat(ut).trim(),children:Ze})]})]})]}))},Et=je,Oe=function(Ce){return(0,$.Z)({},Ce.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,$.Z)({flexDirection:"row"},"".concat(Ce.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ce.colorBorder)}})};function Qe(st){return(0,we.Xj)("StatisticCard",function(Ce){var De=(0,K.Z)((0,K.Z)({},Ce),{},{componentCls:".".concat(st)});return[Oe(De)]})}var ne=["children","statistic","className","chart","chartPlacement","footer"],We=function(Ce){var De,tt=Ce.children,_e=Ce.statistic,me=Ce.className,Ge=Ce.chart,Ze=Ce.chartPlacement,pt=Ce.footer,Ht=(0,w.Z)(Ce,ne),Je=(0,Q.useContext)(W.ZP.ConfigContext),$e=Je.getPrefixCls,Te=$e("pro-statistic-card"),Ye=Qe(Te),ft=Ye.wrapSSR,ke=Ye.hashId,Ne=q()(Te,me,ke),dt=_e&&(0,J.jsx)(Et,(0,K.Z)({layout:"vertical"},_e)),Pt=q()("".concat(Te,"-chart"),ke,(De={},(0,$.Z)(De,"".concat(Te,"-chart-left"),Ze==="left"&&Ge&&_e),(0,$.Z)(De,"".concat(Te,"-chart-right"),Ze==="right"&&Ge&&_e),De)),rr=Ge&&(0,J.jsx)("div",{className:Pt,children:Ge}),xr=q()("".concat(Te,"-content "),ke,(0,$.Z)({},"".concat(Te,"-content-horizontal"),Ze==="left"||Ze==="right")),ut=(rr||dt)&&(Ze==="left"?(0,J.jsxs)("div",{className:xr,children:[rr,dt]}):(0,J.jsxs)("div",{className:xr,children:[dt,rr]})),nn=pt&&(0,J.jsx)("div",{className:"".concat(Te,"-footer ").concat(ke).trim(),children:pt});return ft((0,J.jsxs)(ie.Z,(0,K.Z)((0,K.Z)({className:Ne},Ht),{},{children:[ut,tt,nn]})))},oe=function(Ce){return(0,J.jsx)(We,(0,K.Z)({bodyStyle:{padding:0}},Ce))};We.Statistic=Et,We.Divider=te.Z,We.Operation=E,We.isProCard=!0,We.Group=oe;var Fe=We},6056:function(ct,N,k){"use strict";k.d(N,{Z:function(){return q}});var $,K,w,W;function j(){$=document.createElement("table"),K=document.createElement("tr"),w=/^\s*<(\w+|!)[^>]*>/,W={tr:document.createElement("tbody"),tbody:$,thead:$,tfoot:$,td:K,th:K,"*":document.createElement("div")}}function q(Q){$||j();var ie=w.test(Q)&&RegExp.$1;(!ie||!(ie in W))&&(ie="*");var te=W[ie];Q=typeof Q=="string"?Q.replace(/(^\s*)|(\s*$)/g,""):Q,te.innerHTML=""+Q;var we=te.childNodes[0];return we&&te.contains(we)&&te.removeChild(we),we}},45442:function(ct,N,k){"use strict";k.d(N,{Z:function(){return $}});function $(K,w){if(K)for(var W in w)w.hasOwnProperty(W)&&(K.style[W]=w[W]);return K}},90494:function(ct,N){"use strict";var k="*",$=function(){function K(){this._events={}}return K.prototype.on=function(w,W,j){return this._events[w]||(this._events[w]=[]),this._events[w].push({callback:W,once:!!j}),this},K.prototype.once=function(w,W){return this.on(w,W,!0)},K.prototype.emit=function(w){for(var W=this,j=[],q=1;q<arguments.length;q++)j[q-1]=arguments[q];var Q=this._events[w]||[],ie=this._events[k]||[],te=function(we){for(var fe=we.length,ce=0;ce<fe;ce++)if(we[ce]){var J=we[ce],M=J.callback,E=J.once;E&&(we.splice(ce,1),we.length===0&&delete W._events[w],fe--,ce--),M.apply(W,j)}};te(Q),te(ie)},K.prototype.off=function(w,W){if(!w)this._events={};else if(!W)delete this._events[w];else{for(var j=this._events[w]||[],q=j.length,Q=0;Q<q;Q++)j[Q].callback===W&&(j.splice(Q,1),q--,Q--);j.length===0&&delete this._events[w]}return this},K.prototype.getEvents=function(){return this._events},K}();N.Z=$},2667:function(ct,N,k){"use strict";var $=k(97582),K=k(90494),w=k(77341),W=function(j){(0,$.ZT)(q,j);function q(Q){var ie=j.call(this)||this;ie.destroyed=!1;var te=ie.getDefaultCfg();return ie.cfg=(0,w.CD)(te,Q),ie}return q.prototype.getDefaultCfg=function(){return{}},q.prototype.get=function(Q){return this.cfg[Q]},q.prototype.set=function(Q,ie){this.cfg[Q]=ie},q.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},q}(K.Z);N.Z=W},58906:function(ct,N,k){"use strict";k.d(N,{Z:function(){return ko}});var $=k(97582),K=k(43631),w=k(37153),W=k(77341),j=k(21030),q=0,Q=0,ie=0,te=1e3,we,fe,ce=0,J=0,M=0,E=typeof performance=="object"&&performance.now?performance:Date,ge=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(cr){setTimeout(cr,17)};function be(){return J||(ge(ze),J=E.now()+M)}function ze(){J=0}function Be(){this._call=this._time=this._next=null}Be.prototype=Ue.prototype={constructor:Be,restart:function(cr,kt,qt){if(typeof cr!="function")throw new TypeError("callback is not a function");qt=(qt==null?be():+qt)+(kt==null?0:+kt),!this._next&&fe!==this&&(fe?fe._next=this:we=this,fe=this),this._call=cr,this._time=qt,ye()},stop:function(){this._call&&(this._call=null,this._time=1/0,ye())}};function Ue(cr,kt,qt){var Ar=new Be;return Ar.restart(cr,kt,qt),Ar}function it(){be(),++q;for(var cr=we,kt;cr;)(kt=J-cr._time)>=0&&cr._call.call(null,kt),cr=cr._next;--q}function ht(){J=(ce=E.now())+M,q=Q=0;try{it()}finally{q=0,Se(),J=0}}function Le(){var cr=E.now(),kt=cr-ce;kt>te&&(M-=kt,ce=cr)}function Se(){for(var cr,kt=we,qt,Ar=1/0;kt;)kt._call?(Ar>kt._time&&(Ar=kt._time),cr=kt,kt=kt._next):(qt=kt._next,kt._next=null,kt=cr?cr._next=qt:we=qt);fe=cr,ye(Ar)}function ye(cr){if(!q){Q&&(Q=clearTimeout(Q));var kt=cr-J;kt>24?(cr<1/0&&(Q=setTimeout(ht,cr-E.now()-M)),ie&&(ie=clearInterval(ie))):(ie||(ce=E.now(),ie=setInterval(Le,te)),q=1,ge(ht))}}var Ve=k(52677);function je(cr,kt,qt){cr.prototype=kt.prototype=qt,qt.constructor=cr}function Et(cr,kt){var qt=Object.create(cr.prototype);for(var Ar in kt)qt[Ar]=kt[Ar];return qt}function Oe(){}var Qe=.7,ne=1/Qe,We="\\s*([+-]?\\d+)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",st=/^#([0-9a-f]{3,8})$/,Ce=new RegExp("^rgb\\(".concat(We,",").concat(We,",").concat(We,"\\)$")),De=new RegExp("^rgb\\(".concat(Fe,",").concat(Fe,",").concat(Fe,"\\)$")),tt=new RegExp("^rgba\\(".concat(We,",").concat(We,",").concat(We,",").concat(oe,"\\)$")),_e=new RegExp("^rgba\\(".concat(Fe,",").concat(Fe,",").concat(Fe,",").concat(oe,"\\)$")),me=new RegExp("^hsl\\(".concat(oe,",").concat(Fe,",").concat(Fe,"\\)$")),Ge=new RegExp("^hsla\\(".concat(oe,",").concat(Fe,",").concat(Fe,",").concat(oe,"\\)$")),Ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};je(Oe,Te,{copy:function(kt){return Object.assign(new this.constructor,this,kt)},displayable:function(){return this.rgb().displayable()},hex:pt,formatHex:pt,formatHex8:Ht,formatHsl:Je,formatRgb:$e,toString:$e});function pt(){return this.rgb().formatHex()}function Ht(){return this.rgb().formatHex8()}function Je(){return Nt(this).formatHsl()}function $e(){return this.rgb().formatRgb()}function Te(cr){var kt,qt;return cr=(cr+"").trim().toLowerCase(),(kt=st.exec(cr))?(qt=kt[1].length,kt=parseInt(kt[1],16),qt===6?Ye(kt):qt===3?new dt(kt>>8&15|kt>>4&240,kt>>4&15|kt&240,(kt&15)<<4|kt&15,1):qt===8?ft(kt>>24&255,kt>>16&255,kt>>8&255,(kt&255)/255):qt===4?ft(kt>>12&15|kt>>8&240,kt>>8&15|kt>>4&240,kt>>4&15|kt&240,((kt&15)<<4|kt&15)/255):null):(kt=Ce.exec(cr))?new dt(kt[1],kt[2],kt[3],1):(kt=De.exec(cr))?new dt(kt[1]*255/100,kt[2]*255/100,kt[3]*255/100,1):(kt=tt.exec(cr))?ft(kt[1],kt[2],kt[3],kt[4]):(kt=_e.exec(cr))?ft(kt[1]*255/100,kt[2]*255/100,kt[3]*255/100,kt[4]):(kt=me.exec(cr))?Xr(kt[1],kt[2]/100,kt[3]/100,1):(kt=Ge.exec(cr))?Xr(kt[1],kt[2]/100,kt[3]/100,kt[4]):Ze.hasOwnProperty(cr)?Ye(Ze[cr]):cr==="transparent"?new dt(NaN,NaN,NaN,0):null}function Ye(cr){return new dt(cr>>16&255,cr>>8&255,cr&255,1)}function ft(cr,kt,qt,Ar){return Ar<=0&&(cr=kt=qt=NaN),new dt(cr,kt,qt,Ar)}function ke(cr){return cr instanceof Oe||(cr=Te(cr)),cr?(cr=cr.rgb(),new dt(cr.r,cr.g,cr.b,cr.opacity)):new dt}function Ne(cr,kt,qt,Ar){return arguments.length===1?ke(cr):new dt(cr,kt,qt,Ar==null?1:Ar)}function dt(cr,kt,qt,Ar){this.r=+cr,this.g=+kt,this.b=+qt,this.opacity=+Ar}je(dt,Ne,Et(Oe,{brighter:function(kt){return kt=kt==null?ne:Math.pow(ne,kt),new dt(this.r*kt,this.g*kt,this.b*kt,this.opacity)},darker:function(kt){return kt=kt==null?Qe:Math.pow(Qe,kt),new dt(this.r*kt,this.g*kt,this.b*kt,this.opacity)},rgb:function(){return this},clamp:function(){return new dt(nn(this.r),nn(this.g),nn(this.b),ut(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pt,formatHex:Pt,formatHex8:rr,formatRgb:xr,toString:xr}));function Pt(){return"#".concat(Gr(this.r)).concat(Gr(this.g)).concat(Gr(this.b))}function rr(){return"#".concat(Gr(this.r)).concat(Gr(this.g)).concat(Gr(this.b)).concat(Gr((isNaN(this.opacity)?1:this.opacity)*255))}function xr(){var cr=ut(this.opacity);return"".concat(cr===1?"rgb(":"rgba(").concat(nn(this.r),", ").concat(nn(this.g),", ").concat(nn(this.b)).concat(cr===1?")":", ".concat(cr,")"))}function ut(cr){return isNaN(cr)?1:Math.max(0,Math.min(1,cr))}function nn(cr){return Math.max(0,Math.min(255,Math.round(cr)||0))}function Gr(cr){return cr=nn(cr),(cr<16?"0":"")+cr.toString(16)}function Xr(cr,kt,qt,Ar){return Ar<=0?cr=kt=qt=NaN:qt<=0||qt>=1?cr=kt=NaN:kt<=0&&(cr=NaN),new sr(cr,kt,qt,Ar)}function Nt(cr){if(cr instanceof sr)return new sr(cr.h,cr.s,cr.l,cr.opacity);if(cr instanceof Oe||(cr=Te(cr)),!cr)return new sr;if(cr instanceof sr)return cr;cr=cr.rgb();var kt=cr.r/255,qt=cr.g/255,Ar=cr.b/255,tn=Math.min(kt,qt,Ar),Pn=Math.max(kt,qt,Ar),Bn=NaN,Cn=Pn-tn,Ai=(Pn+tn)/2;return Cn?(kt===Pn?Bn=(qt-Ar)/Cn+(qt<Ar)*6:qt===Pn?Bn=(Ar-kt)/Cn+2:Bn=(kt-qt)/Cn+4,Cn/=Ai<.5?Pn+tn:2-Pn-tn,Bn*=60):Cn=Ai>0&&Ai<1?0:Bn,new sr(Bn,Cn,Ai,cr.opacity)}function Yt(cr,kt,qt,Ar){return arguments.length===1?Nt(cr):new sr(cr,kt,qt,Ar==null?1:Ar)}function sr(cr,kt,qt,Ar){this.h=+cr,this.s=+kt,this.l=+qt,this.opacity=+Ar}je(sr,Yt,Et(Oe,{brighter:function(kt){return kt=kt==null?ne:Math.pow(ne,kt),new sr(this.h,this.s,this.l*kt,this.opacity)},darker:function(kt){return kt=kt==null?Qe:Math.pow(Qe,kt),new sr(this.h,this.s,this.l*kt,this.opacity)},rgb:function(){var kt=this.h%360+(this.h<0)*360,qt=isNaN(kt)||isNaN(this.s)?0:this.s,Ar=this.l,tn=Ar+(Ar<.5?Ar:1-Ar)*qt,Pn=2*Ar-tn;return new dt(Sr(kt>=240?kt-240:kt+120,Pn,tn),Sr(kt,Pn,tn),Sr(kt<120?kt+240:kt-120,Pn,tn),this.opacity)},clamp:function(){return new sr(Dt(this.h),Qt(this.s),Qt(this.l),ut(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var kt=ut(this.opacity);return"".concat(kt===1?"hsl(":"hsla(").concat(Dt(this.h),", ").concat(Qt(this.s)*100,"%, ").concat(Qt(this.l)*100,"%").concat(kt===1?")":", ".concat(kt,")"))}}));function Dt(cr){return cr=(cr||0)%360,cr<0?cr+360:cr}function Qt(cr){return Math.max(0,Math.min(1,cr||0))}function Sr(cr,kt,qt){return(cr<60?kt+(qt-kt)*cr/60:cr<180?qt:cr<240?kt+(qt-kt)*(240-cr)/60:kt)*255}function Er(cr,kt,qt,Ar,tn){var Pn=cr*cr,Bn=Pn*cr;return((1-3*cr+3*Pn-Bn)*kt+(4-6*Pn+3*Bn)*qt+(1+3*cr+3*Pn-3*Bn)*Ar+Bn*tn)/6}function Fr(cr){var kt=cr.length-1;return function(qt){var Ar=qt<=0?qt=0:qt>=1?(qt=1,kt-1):Math.floor(qt*kt),tn=cr[Ar],Pn=cr[Ar+1],Bn=Ar>0?cr[Ar-1]:2*tn-Pn,Cn=Ar<kt-1?cr[Ar+2]:2*Pn-tn;return Er((qt-Ar/kt)*kt,Bn,tn,Pn,Cn)}}function zr(cr){var kt=cr.length;return function(qt){var Ar=Math.floor(((qt%=1)<0?++qt:qt)*kt),tn=cr[(Ar+kt-1)%kt],Pn=cr[Ar%kt],Bn=cr[(Ar+1)%kt],Cn=cr[(Ar+2)%kt];return Er((qt-Ar/kt)*kt,tn,Pn,Bn,Cn)}}var le=function(cr){return function(){return cr}};function H(cr,kt){return function(qt){return cr+qt*kt}}function re(cr,kt,qt){return cr=Math.pow(cr,qt),kt=Math.pow(kt,qt)-cr,qt=1/qt,function(Ar){return Math.pow(cr+Ar*kt,qt)}}function Re(cr,kt){var qt=kt-cr;return qt?H(cr,qt>180||qt<-180?qt-360*Math.round(qt/360):qt):constant(isNaN(cr)?kt:cr)}function Ke(cr){return(cr=+cr)==1?Tt:function(kt,qt){return qt-kt?re(kt,qt,cr):le(isNaN(kt)?qt:kt)}}function Tt(cr,kt){var qt=kt-cr;return qt?H(cr,qt):le(isNaN(cr)?kt:cr)}var or=function cr(kt){var qt=Ke(kt);function Ar(tn,Pn){var Bn=qt((tn=Ne(tn)).r,(Pn=Ne(Pn)).r),Cn=qt(tn.g,Pn.g),Ai=qt(tn.b,Pn.b),Yi=Tt(tn.opacity,Pn.opacity);return function(Wo){return tn.r=Bn(Wo),tn.g=Cn(Wo),tn.b=Ai(Wo),tn.opacity=Yi(Wo),tn+""}}return Ar.gamma=cr,Ar}(1);function jt(cr){return function(kt){var qt=kt.length,Ar=new Array(qt),tn=new Array(qt),Pn=new Array(qt),Bn,Cn;for(Bn=0;Bn<qt;++Bn)Cn=Ne(kt[Bn]),Ar[Bn]=Cn.r||0,tn[Bn]=Cn.g||0,Pn[Bn]=Cn.b||0;return Ar=cr(Ar),tn=cr(tn),Pn=cr(Pn),Cn.opacity=1,function(Ai){return Cn.r=Ar(Ai),Cn.g=tn(Ai),Cn.b=Pn(Ai),Cn+""}}}var wt=jt(Fr),It=jt(zr);function de(cr,kt){kt||(kt=[]);var qt=cr?Math.min(kt.length,cr.length):0,Ar=kt.slice(),tn;return function(Pn){for(tn=0;tn<qt;++tn)Ar[tn]=cr[tn]*(1-Pn)+kt[tn]*Pn;return Ar}}function pe(cr){return ArrayBuffer.isView(cr)&&!(cr instanceof DataView)}function Me(cr,kt){return(pe(kt)?de:et)(cr,kt)}function et(cr,kt){var qt=kt?kt.length:0,Ar=cr?Math.min(qt,cr.length):0,tn=new Array(Ar),Pn=new Array(qt),Bn;for(Bn=0;Bn<Ar;++Bn)tn[Bn]=Ft(cr[Bn],kt[Bn]);for(;Bn<qt;++Bn)Pn[Bn]=kt[Bn];return function(Cn){for(Bn=0;Bn<Ar;++Bn)Pn[Bn]=tn[Bn](Cn);return Pn}}function St(cr,kt){var qt=new Date;return cr=+cr,kt=+kt,function(Ar){return qt.setTime(cr*(1-Ar)+kt*Ar),qt}}function Gt(cr,kt){return cr=+cr,kt=+kt,function(qt){return cr*(1-qt)+kt*qt}}function gr(cr,kt){var qt={},Ar={},tn;(cr===null||Ve(cr)!=="object")&&(cr={}),(kt===null||Ve(kt)!=="object")&&(kt={});for(tn in kt)tn in cr?qt[tn]=Ft(cr[tn],kt[tn]):Ar[tn]=kt[tn];return function(Pn){for(tn in qt)Ar[tn]=qt[tn](Pn);return Ar}}var At=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ot=new RegExp(At.source,"g");function Ot(cr){return function(){return cr}}function yr(cr){return function(kt){return cr(kt)+""}}function kr(cr,kt){var qt=At.lastIndex=ot.lastIndex=0,Ar,tn,Pn,Bn=-1,Cn=[],Ai=[];for(cr=cr+"",kt=kt+"";(Ar=At.exec(cr))&&(tn=ot.exec(kt));)(Pn=tn.index)>qt&&(Pn=kt.slice(qt,Pn),Cn[Bn]?Cn[Bn]+=Pn:Cn[++Bn]=Pn),(Ar=Ar[0])===(tn=tn[0])?Cn[Bn]?Cn[Bn]+=tn:Cn[++Bn]=tn:(Cn[++Bn]=null,Ai.push({i:Bn,x:Gt(Ar,tn)})),qt=ot.lastIndex;return qt<kt.length&&(Pn=kt.slice(qt),Cn[Bn]?Cn[Bn]+=Pn:Cn[++Bn]=Pn),Cn.length<2?Ai[0]?yr(Ai[0].x):Ot(kt):(kt=Ai.length,function(Yi){for(var Wo=0,os;Wo<kt;++Wo)Cn[(os=Ai[Wo]).i]=os.x(Yi);return Cn.join("")})}function Ft(cr,kt){var qt=Ve(kt),Ar;return kt==null||qt==="boolean"?le(kt):(qt==="number"?Gt:qt==="string"?(Ar=Te(kt))?(kt=Ar,or):kr:kt instanceof Te?or:kt instanceof Date?St:pe(kt)?de:Array.isArray(kt)?et:typeof kt.valueOf!="function"&&typeof kt.toString!="function"||isNaN(kt)?gr:Gt)(cr,kt)}var Mn=k(93924),qn=k(47575),ri=function(cr){return["fill","stroke","fillStyle","strokeStyle"].includes(cr)},un=function(cr){return/^[r,R,L,l]{1}[\s]*\(/.test(cr)},Yn=[1,0,0,0,1,0,0,0,1];function jn(cr,kt,qt){var Ar={},tn=kt.fromAttrs,Pn=kt.toAttrs;if(!cr.destroyed){var Bn;for(var Cn in Pn)if(!(0,j.Xy)(tn[Cn],Pn[Cn]))if(Cn==="path"){var Ai=Pn[Cn],Yi=tn[Cn];Ai.length>Yi.length?(Ai=qn.parsePathString(Pn[Cn]),Yi=qn.parsePathString(tn[Cn]),Yi=qn.fillPathByDiff(Yi,Ai),Yi=qn.formatPath(Yi,Ai),kt.fromAttrs.path=Yi,kt.toAttrs.path=Ai):kt.pathFormatted||(Ai=qn.parsePathString(Pn[Cn]),Yi=qn.parsePathString(tn[Cn]),Yi=qn.formatPath(Yi,Ai),kt.fromAttrs.path=Yi,kt.toAttrs.path=Ai,kt.pathFormatted=!0),Ar[Cn]=[];for(var Wo=0;Wo<Ai.length;Wo++){for(var os=Ai[Wo],wu=Yi[Wo],Do=[],Qa=0;Qa<os.length;Qa++)(0,j.hj)(os[Qa])&&wu&&(0,j.hj)(wu[Qa])?(Bn=Ft(wu[Qa],os[Qa]),Do.push(Bn(qt))):Do.push(os[Qa]);Ar[Cn].push(Do)}}else if(Cn==="matrix"){var pu=Me(tn[Cn]||Yn,Pn[Cn]||Yn),Jo=pu(qt);Ar[Cn]=Jo}else ri(Cn)&&un(Pn[Cn])?Ar[Cn]=Pn[Cn]:(0,j.mf)(Pn[Cn])||(Bn=Ft(tn[Cn],Pn[Cn]),Ar[Cn]=Bn(qt));cr.attr(Ar)}}function Kn(cr,kt,qt){var Ar=kt.startTime,tn=kt.delay;if(qt<Ar+tn||kt._paused)return!1;var Pn,Bn=kt.duration,Cn=kt.easing,Ai=(0,Mn._)(Cn);if(qt=qt-Ar-kt.delay,kt.repeat)Pn=qt%Bn/Bn,Pn=Ai(Pn);else if(Pn=qt/Bn,Pn<1)Pn=Ai(Pn);else return kt.onFrame?cr.attr(kt.onFrame(1)):cr.attr(kt.toAttrs),!0;if(kt.onFrame){var Yi=kt.onFrame(Pn);cr.attr(Yi)}else jn(cr,kt,Pn);return!1}var aa=function(){function cr(kt){this.animators=[],this.current=0,this.timer=null,this.canvas=kt}return cr.prototype.initTimer=function(){var kt=this,qt=!1,Ar,tn,Pn;this.timer=Ue(function(Bn){if(kt.current=Bn,kt.animators.length>0){for(var Cn=kt.animators.length-1;Cn>=0;Cn--){if(Ar=kt.animators[Cn],Ar.destroyed){kt.removeAnimator(Cn);continue}if(!Ar.isAnimatePaused()){tn=Ar.get("animations");for(var Ai=tn.length-1;Ai>=0;Ai--)Pn=tn[Ai],qt=Kn(Ar,Pn,Bn),qt&&(tn.splice(Ai,1),qt=!1,Pn.callback&&Pn.callback())}tn.length===0&&kt.removeAnimator(Cn)}var Yi=kt.canvas.get("autoDraw");Yi||kt.canvas.draw()}})},cr.prototype.addAnimator=function(kt){this.animators.push(kt)},cr.prototype.removeAnimator=function(kt){this.animators.splice(kt,1)},cr.prototype.isAnimating=function(){return!!this.animators.length},cr.prototype.stop=function(){this.timer&&this.timer.stop()},cr.prototype.stopAllAnimations=function(kt){kt===void 0&&(kt=!0),this.animators.forEach(function(qt){qt.stopAnimate(kt)}),this.animators=[],this.canvas.draw()},cr.prototype.getTime=function(){return this.current},cr}(),vi=aa,da=k(89473),Oa=40,xa=0,Va=":",Sa=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function gs(cr,kt){for(var qt in cr)if(cr.hasOwnProperty(qt)&&qt.indexOf(Va+kt)>=0)return!0;return!1}function io(cr,kt,qt){qt.name=kt,qt.target=cr,qt.currentTarget=cr,qt.delegateTarget=cr,cr.emit(kt,qt)}function Oo(cr,kt,qt){if(qt.bubbles){var Ar=void 0,tn=!1;if(kt==="mouseenter"?(Ar=qt.fromShape,tn=!0):kt==="mouseleave"&&(tn=!0,Ar=qt.toShape),cr.isCanvas()&&tn)return;if(Ar&&(0,W.UY)(cr,Ar)){qt.bubbles=!1;return}qt.name=kt,qt.currentTarget=cr,qt.delegateTarget=cr,cr.emit(kt,qt)}}var ai=function(){function cr(kt){var qt=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Ar){var tn=Ar.type;qt._triggerEvent(tn,Ar)},this._onDocumentMove=function(Ar){var tn=qt.canvas,Pn=tn.get("el");if(Pn!==Ar.target&&(qt.dragging||qt.currentShape)){var Bn=qt._getPointInfo(Ar);qt.dragging&&qt._emitEvent("drag",Ar,Bn,qt.draggingShape)}},this._onDocumentMouseUp=function(Ar){var tn=qt.canvas,Pn=tn.get("el");if(Pn!==Ar.target&&qt.dragging){var Bn=qt._getPointInfo(Ar);qt.draggingShape&&qt._emitEvent("drop",Ar,Bn,null),qt._emitEvent("dragend",Ar,Bn,qt.draggingShape),qt._afterDrag(qt.draggingShape,Bn,Ar)}},this.canvas=kt.canvas}return cr.prototype.init=function(){this._bindEvents()},cr.prototype._bindEvents=function(){var kt=this,qt=this.canvas.get("el");(0,W.S6)(Sa,function(Ar){qt.addEventListener(Ar,kt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},cr.prototype._clearEvents=function(){var kt=this,qt=this.canvas.get("el");(0,W.S6)(Sa,function(Ar){qt.removeEventListener(Ar,kt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},cr.prototype._getEventObj=function(kt,qt,Ar,tn,Pn,Bn){var Cn=new da.Z(kt,qt);return Cn.fromShape=Pn,Cn.toShape=Bn,Cn.x=Ar.x,Cn.y=Ar.y,Cn.clientX=Ar.clientX,Cn.clientY=Ar.clientY,Cn.propagationPath.push(tn),Cn},cr.prototype._getShape=function(kt,qt){return this.canvas.getShape(kt.x,kt.y,qt)},cr.prototype._getPointInfo=function(kt){var qt=this.canvas,Ar=qt.getClientByEvent(kt),tn=qt.getPointByEvent(kt);return{x:tn.x,y:tn.y,clientX:Ar.x,clientY:Ar.y}},cr.prototype._triggerEvent=function(kt,qt){var Ar=this._getPointInfo(qt),tn=this._getShape(Ar,qt),Pn=this["_on"+kt],Bn=!1;if(Pn)Pn.call(this,Ar,tn,qt);else{var Cn=this.currentShape;kt==="mouseenter"||kt==="dragenter"||kt==="mouseover"?(this._emitEvent(kt,qt,Ar,null,null,tn),tn&&this._emitEvent(kt,qt,Ar,tn,null,tn),kt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",qt,Ar,null)):kt==="mouseleave"||kt==="dragleave"||kt==="mouseout"?(Bn=!0,Cn&&this._emitEvent(kt,qt,Ar,Cn,Cn,null),this._emitEvent(kt,qt,Ar,null,Cn,null),kt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",qt,Ar,null)):this._emitEvent(kt,qt,Ar,tn,null,null)}if(Bn||(this.currentShape=tn),tn&&!tn.get("destroyed")){var Ai=this.canvas,Yi=Ai.get("el");Yi.style.cursor=tn.attr("cursor")||Ai.get("cursor")}},cr.prototype._onmousedown=function(kt,qt,Ar){Ar.button===xa&&(this.mousedownShape=qt,this.mousedownPoint=kt,this.mousedownTimeStamp=Ar.timeStamp),this._emitEvent("mousedown",Ar,kt,qt,null,null)},cr.prototype._emitMouseoverEvents=function(kt,qt,Ar,tn){var Pn=this.canvas.get("el");Ar!==tn&&(Ar&&(this._emitEvent("mouseout",kt,qt,Ar,Ar,tn),this._emitEvent("mouseleave",kt,qt,Ar,Ar,tn),(!tn||tn.get("destroyed"))&&(Pn.style.cursor=this.canvas.get("cursor"))),tn&&(this._emitEvent("mouseover",kt,qt,tn,Ar,tn),this._emitEvent("mouseenter",kt,qt,tn,Ar,tn)))},cr.prototype._emitDragoverEvents=function(kt,qt,Ar,tn,Pn){tn?(tn!==Ar&&(Ar&&this._emitEvent("dragleave",kt,qt,Ar,Ar,tn),this._emitEvent("dragenter",kt,qt,tn,Ar,tn)),Pn||this._emitEvent("dragover",kt,qt,tn)):Ar&&this._emitEvent("dragleave",kt,qt,Ar,Ar,tn),Pn&&this._emitEvent("dragover",kt,qt,tn)},cr.prototype._afterDrag=function(kt,qt,Ar){kt&&(kt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var tn=this._getShape(qt,Ar);tn!==kt&&this._emitMouseoverEvents(Ar,qt,kt,tn),this.currentShape=tn},cr.prototype._onmouseup=function(kt,qt,Ar){if(Ar.button===xa){var tn=this.draggingShape;this.dragging?(tn&&this._emitEvent("drop",Ar,kt,qt),this._emitEvent("dragend",Ar,kt,tn),this._afterDrag(tn,kt,Ar)):(this._emitEvent("mouseup",Ar,kt,qt),qt===this.mousedownShape&&this._emitEvent("click",Ar,kt,qt),this.mousedownShape=null,this.mousedownPoint=null)}},cr.prototype._ondragover=function(kt,qt,Ar){Ar.preventDefault();var tn=this.currentShape;this._emitDragoverEvents(Ar,kt,tn,qt,!0)},cr.prototype._onmousemove=function(kt,qt,Ar){var tn=this.canvas,Pn=this.currentShape,Bn=this.draggingShape;if(this.dragging)Bn&&this._emitDragoverEvents(Ar,kt,Pn,qt,!1),this._emitEvent("drag",Ar,kt,Bn);else{var Cn=this.mousedownPoint;if(Cn){var Ai=this.mousedownShape,Yi=Ar.timeStamp,Wo=Yi-this.mousedownTimeStamp,os=Cn.clientX-kt.clientX,wu=Cn.clientY-kt.clientY,Do=os*os+wu*wu;Wo>120||Do>Oa?Ai&&Ai.get("draggable")?(Bn=this.mousedownShape,Bn.set("capture",!1),this.draggingShape=Bn,this.dragging=!0,this._emitEvent("dragstart",Ar,kt,Bn),this.mousedownShape=null,this.mousedownPoint=null):!Ai&&tn.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Ar,kt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Ar,kt,Pn,qt),this._emitEvent("mousemove",Ar,kt,qt)):(this._emitMouseoverEvents(Ar,kt,Pn,qt),this._emitEvent("mousemove",Ar,kt,qt))}else this._emitMouseoverEvents(Ar,kt,Pn,qt),this._emitEvent("mousemove",Ar,kt,qt)}},cr.prototype._emitEvent=function(kt,qt,Ar,tn,Pn,Bn){var Cn=this._getEventObj(kt,qt,Ar,tn,Pn,Bn);if(tn){Cn.shape=tn,io(tn,kt,Cn);for(var Ai=tn.getParent();Ai;)Ai.emitDelegation(kt,Cn),Cn.propagationStopped||Oo(Ai,kt,Cn),Cn.propagationPath.push(Ai),Ai=Ai.getParent()}else{var Yi=this.canvas;io(Yi,kt,Cn)}},cr.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},cr}(),_i=ai,ea="px",Ha=(0,K.qY)(),ms=Ha&&Ha.name==="firefox",lo=function(cr){(0,$.ZT)(kt,cr);function kt(qt){var Ar=cr.call(this,qt)||this;return Ar.initContainer(),Ar.initDom(),Ar.initEvents(),Ar.initTimeline(),Ar}return kt.prototype.getDefaultCfg=function(){var qt=cr.prototype.getDefaultCfg.call(this);return qt.cursor="default",qt.supportCSSTransform=!1,qt},kt.prototype.initContainer=function(){var qt=this.get("container");(0,W.HD)(qt)&&(qt=document.getElementById(qt),this.set("container",qt))},kt.prototype.initDom=function(){var qt=this.createDom();this.set("el",qt);var Ar=this.get("container");Ar.appendChild(qt),this.setDOMSize(this.get("width"),this.get("height"))},kt.prototype.initEvents=function(){var qt=new _i({canvas:this});qt.init(),this.set("eventController",qt)},kt.prototype.initTimeline=function(){var qt=new vi(this);this.set("timeline",qt)},kt.prototype.setDOMSize=function(qt,Ar){var tn=this.get("el");W.jU&&(tn.style.width=qt+ea,tn.style.height=Ar+ea)},kt.prototype.changeSize=function(qt,Ar){this.setDOMSize(qt,Ar),this.set("width",qt),this.set("height",Ar),this.onCanvasChange("changeSize")},kt.prototype.getRenderer=function(){return this.get("renderer")},kt.prototype.getCursor=function(){return this.get("cursor")},kt.prototype.setCursor=function(qt){this.set("cursor",qt);var Ar=this.get("el");W.jU&&Ar&&(Ar.style.cursor=qt)},kt.prototype.getPointByEvent=function(qt){var Ar=this.get("supportCSSTransform");if(Ar){if(ms&&!(0,W.kK)(qt.layerX)&&qt.layerX!==qt.offsetX)return{x:qt.layerX,y:qt.layerY};if(!(0,W.kK)(qt.offsetX))return{x:qt.offsetX,y:qt.offsetY}}var tn=this.getClientByEvent(qt),Pn=tn.x,Bn=tn.y;return this.getPointByClient(Pn,Bn)},kt.prototype.getClientByEvent=function(qt){var Ar=qt;return qt.touches&&(qt.type==="touchend"?Ar=qt.changedTouches[0]:Ar=qt.touches[0]),{x:Ar.clientX,y:Ar.clientY}},kt.prototype.getPointByClient=function(qt,Ar){var tn=this.get("el"),Pn=tn.getBoundingClientRect();return{x:qt-Pn.left,y:Ar-Pn.top}},kt.prototype.getClientByPoint=function(qt,Ar){var tn=this.get("el"),Pn=tn.getBoundingClientRect();return{x:qt+Pn.left,y:Ar+Pn.top}},kt.prototype.draw=function(){},kt.prototype.removeDom=function(){var qt=this.get("el");qt.parentNode.removeChild(qt)},kt.prototype.clearEvents=function(){var qt=this.get("eventController");qt.destroy()},kt.prototype.isCanvas=function(){return!0},kt.prototype.getParent=function(){return null},kt.prototype.destroy=function(){var qt=this.get("timeline");this.get("destroyed")||(this.clear(),qt&&qt.stop(),this.clearEvents(),this.removeDom(),cr.prototype.destroy.call(this))},kt}(w.Z),ko=lo},37153:function(ct,N,k){"use strict";var $=k(97582),K=k(29881),w=k(77341),W={},j="_INDEX";function q(ce,J){if(ce.set("canvas",J),ce.isGroup()){var M=ce.get("children");M.length&&M.forEach(function(E){q(E,J)})}}function Q(ce,J){if(ce.set("timeline",J),ce.isGroup()){var M=ce.get("children");M.length&&M.forEach(function(E){Q(E,J)})}}function ie(ce,J){var M=ce.getChildren();return M.indexOf(J)>=0}function te(ce,J,M){M===void 0&&(M=!0),M?J.destroy():(J.set("parent",null),J.set("canvas",null)),(0,w.As)(ce.getChildren(),J)}function we(ce){return function(J,M){var E=ce(J,M);return E===0?J[j]-M[j]:E}}var fe=function(ce){(0,$.ZT)(J,ce);function J(){return ce!==null&&ce.apply(this,arguments)||this}return J.prototype.isCanvas=function(){return!1},J.prototype.getBBox=function(){var M=1/0,E=-1/0,ge=1/0,be=-1/0,ze=this.getChildren().filter(function(Ue){return Ue.get("visible")&&(!Ue.isGroup()||Ue.isGroup()&&Ue.getChildren().length>0)});ze.length>0?(0,w.S6)(ze,function(Ue){var it=Ue.getBBox(),ht=it.minX,Le=it.maxX,Se=it.minY,ye=it.maxY;ht<M&&(M=ht),Le>E&&(E=Le),Se<ge&&(ge=Se),ye>be&&(be=ye)}):(M=0,E=0,ge=0,be=0);var Be={x:M,y:ge,minX:M,minY:ge,maxX:E,maxY:be,width:E-M,height:be-ge};return Be},J.prototype.getCanvasBBox=function(){var M=1/0,E=-1/0,ge=1/0,be=-1/0,ze=this.getChildren().filter(function(Ue){return Ue.get("visible")&&(!Ue.isGroup()||Ue.isGroup()&&Ue.getChildren().length>0)});ze.length>0?(0,w.S6)(ze,function(Ue){var it=Ue.getCanvasBBox(),ht=it.minX,Le=it.maxX,Se=it.minY,ye=it.maxY;ht<M&&(M=ht),Le>E&&(E=Le),Se<ge&&(ge=Se),ye>be&&(be=ye)}):(M=0,E=0,ge=0,be=0);var Be={x:M,y:ge,minX:M,minY:ge,maxX:E,maxY:be,width:E-M,height:be-ge};return Be},J.prototype.getDefaultCfg=function(){var M=ce.prototype.getDefaultCfg.call(this);return M.children=[],M},J.prototype.onAttrChange=function(M,E,ge){if(ce.prototype.onAttrChange.call(this,M,E,ge),M==="matrix"){var be=this.getTotalMatrix();this._applyChildrenMarix(be)}},J.prototype.applyMatrix=function(M){var E=this.getTotalMatrix();ce.prototype.applyMatrix.call(this,M);var ge=this.getTotalMatrix();ge!==E&&this._applyChildrenMarix(ge)},J.prototype._applyChildrenMarix=function(M){var E=this.getChildren();(0,w.S6)(E,function(ge){ge.applyMatrix(M)})},J.prototype.addShape=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];var ge=M[0],be=M[1];(0,w.Kn)(ge)?be=ge:be.type=ge;var ze=W[be.type];ze||(ze=(0,w.jC)(be.type),W[be.type]=ze);var Be=this.getShapeBase(),Ue=new Be[ze](be);return this.add(Ue),Ue},J.prototype.addGroup=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];var ge=M[0],be=M[1],ze;if((0,w.mf)(ge))be?ze=new ge(be):ze=new ge({parent:this});else{var Be=ge||{},Ue=this.getGroupBase();ze=new Ue(Be)}return this.add(ze),ze},J.prototype.getCanvas=function(){var M;return this.isCanvas()?M=this:M=this.get("canvas"),M},J.prototype.getShape=function(M,E,ge){if(!(0,w.pP)(this))return null;var be=this.getChildren(),ze;if(this.isCanvas())ze=this._findShape(be,M,E,ge);else{var Be=[M,E,1];Be=this.invertFromMatrix(Be),this.isClipped(Be[0],Be[1])||(ze=this._findShape(be,Be[0],Be[1],ge))}return ze},J.prototype._findShape=function(M,E,ge,be){for(var ze=null,Be=M.length-1;Be>=0;Be--){var Ue=M[Be];if((0,w.pP)(Ue)&&(Ue.isGroup()?ze=Ue.getShape(E,ge,be):Ue.isHit(E,ge)&&(ze=Ue)),ze)break}return ze},J.prototype.add=function(M){var E=this.getCanvas(),ge=this.getChildren(),be=this.get("timeline"),ze=M.getParent();ze&&te(ze,M,!1),M.set("parent",this),E&&q(M,E),be&&Q(M,be),ge.push(M),M.onCanvasChange("add"),this._applyElementMatrix(M)},J.prototype._applyElementMatrix=function(M){var E=this.getTotalMatrix();E&&M.applyMatrix(E)},J.prototype.getChildren=function(){return this.get("children")},J.prototype.sort=function(){var M=this.getChildren();(0,w.S6)(M,function(E,ge){return E[j]=ge,E}),M.sort(we(function(E,ge){return E.get("zIndex")-ge.get("zIndex")})),this.onCanvasChange("sort")},J.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var M=this.getChildren(),E=M.length-1;E>=0;E--)M[E].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},J.prototype.destroy=function(){this.get("destroyed")||(this.clear(),ce.prototype.destroy.call(this))},J.prototype.getFirst=function(){return this.getChildByIndex(0)},J.prototype.getLast=function(){var M=this.getChildren();return this.getChildByIndex(M.length-1)},J.prototype.getChildByIndex=function(M){var E=this.getChildren();return E[M]},J.prototype.getCount=function(){var M=this.getChildren();return M.length},J.prototype.contain=function(M){var E=this.getChildren();return E.indexOf(M)>-1},J.prototype.removeChild=function(M,E){E===void 0&&(E=!0),this.contain(M)&&M.remove(E)},J.prototype.findAll=function(M){var E=[],ge=this.getChildren();return(0,w.S6)(ge,function(be){M(be)&&E.push(be),be.isGroup()&&(E=E.concat(be.findAll(M)))}),E},J.prototype.find=function(M){var E=null,ge=this.getChildren();return(0,w.S6)(ge,function(be){if(M(be)?E=be:be.isGroup()&&(E=be.find(M)),E)return!1}),E},J.prototype.findById=function(M){return this.find(function(E){return E.get("id")===M})},J.prototype.findByClassName=function(M){return this.find(function(E){return E.get("className")===M})},J.prototype.findAllByName=function(M){return this.findAll(function(E){return E.get("name")===M})},J}(K.Z);N.Z=fe},29881:function(ct,N,k){"use strict";var $=k(97582),K=k(21030),w=k(31506),W=k(77341),j=k(41482),q=k(2667),Q=w.vs,ie="matrix",te=["zIndex","capture","visible","type"],we=["repeat"],fe=":",ce="*";function J(ze){for(var Be=[],Ue=0;Ue<ze.length;Ue++)(0,K.kJ)(ze[Ue])?Be.push([].concat(ze[Ue])):Be.push(ze[Ue]);return Be}function M(ze,Be){var Ue={},it=Be.attrs;for(var ht in ze)Ue[ht]=it[ht];return Ue}function E(ze,Be){var Ue={},it=Be.attr();return(0,K.S6)(ze,function(ht,Le){we.indexOf(Le)===-1&&!(0,K.Xy)(it[Le],ht)&&(Ue[Le]=ht)}),Ue}function ge(ze,Be){if(Be.onFrame)return ze;var Ue=Be.startTime,it=Be.delay,ht=Be.duration,Le=Object.prototype.hasOwnProperty;return(0,K.S6)(ze,function(Se){Ue+it<Se.startTime+Se.delay+Se.duration&&ht>Se.delay&&(0,K.S6)(Be.toAttrs,function(ye,Ve){Le.call(Se.toAttrs,Ve)&&(delete Se.toAttrs[Ve],delete Se.fromAttrs[Ve])})}),ze}var be=function(ze){(0,$.ZT)(Be,ze);function Be(Ue){var it=ze.call(this,Ue)||this;it.attrs={};var ht=it.getDefaultAttrs();return(0,K.CD)(ht,Ue.attrs),it.attrs=ht,it.initAttrs(ht),it.initAnimate(),it}return Be.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},Be.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},Be.prototype.onCanvasChange=function(Ue){},Be.prototype.initAttrs=function(Ue){},Be.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},Be.prototype.isGroup=function(){return!1},Be.prototype.getParent=function(){return this.get("parent")},Be.prototype.getCanvas=function(){return this.get("canvas")},Be.prototype.attr=function(){for(var Ue,it=[],ht=0;ht<arguments.length;ht++)it[ht]=arguments[ht];var Le=it[0],Se=it[1];if(!Le)return this.attrs;if((0,K.Kn)(Le)){for(var ye in Le)this.setAttr(ye,Le[ye]);return this.afterAttrsChange(Le),this}return it.length===2?(this.setAttr(Le,Se),this.afterAttrsChange((Ue={},Ue[Le]=Se,Ue)),this):this.attrs[Le]},Be.prototype.isClipped=function(Ue,it){var ht=this.getClip();return ht&&!ht.isHit(Ue,it)},Be.prototype.setAttr=function(Ue,it){var ht=this.attrs[Ue];ht!==it&&(this.attrs[Ue]=it,this.onAttrChange(Ue,it,ht))},Be.prototype.onAttrChange=function(Ue,it,ht){Ue==="matrix"&&this.set("totalMatrix",null)},Be.prototype.afterAttrsChange=function(Ue){if(this.cfg.isClipShape){var it=this.cfg.applyTo;it&&it.onCanvasChange("clip")}else this.onCanvasChange("attr")},Be.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},Be.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},Be.prototype.setZIndex=function(Ue){this.set("zIndex",Ue);var it=this.getParent();return it&&it.sort(),this},Be.prototype.toFront=function(){var Ue=this.getParent();if(Ue){var it=Ue.getChildren(),ht=this.get("el"),Le=it.indexOf(this);it.splice(Le,1),it.push(this),this.onCanvasChange("zIndex")}},Be.prototype.toBack=function(){var Ue=this.getParent();if(Ue){var it=Ue.getChildren(),ht=this.get("el"),Le=it.indexOf(this);it.splice(Le,1),it.unshift(this),this.onCanvasChange("zIndex")}},Be.prototype.remove=function(Ue){Ue===void 0&&(Ue=!0);var it=this.getParent();it?((0,W.As)(it.getChildren(),this),it.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),Ue&&this.destroy()},Be.prototype.resetMatrix=function(){this.attr(ie,this.getDefaultMatrix()),this.onCanvasChange("matrix")},Be.prototype.getMatrix=function(){return this.attr(ie)},Be.prototype.setMatrix=function(Ue){this.attr(ie,Ue),this.onCanvasChange("matrix")},Be.prototype.getTotalMatrix=function(){var Ue=this.cfg.totalMatrix;if(!Ue){var it=this.attr("matrix"),ht=this.cfg.parentMatrix;ht&&it?Ue=(0,j.xq)(ht,it):Ue=it||ht,this.set("totalMatrix",Ue)}return Ue},Be.prototype.applyMatrix=function(Ue){var it=this.attr("matrix"),ht=null;Ue&&it?ht=(0,j.xq)(Ue,it):ht=it||Ue,this.set("totalMatrix",ht),this.set("parentMatrix",Ue)},Be.prototype.getDefaultMatrix=function(){return null},Be.prototype.applyToMatrix=function(Ue){var it=this.attr("matrix");return it?(0,j.rG)(it,Ue):Ue},Be.prototype.invertFromMatrix=function(Ue){var it=this.attr("matrix");if(it){var ht=(0,j.U_)(it);if(ht)return(0,j.rG)(ht,Ue)}return Ue},Be.prototype.setClip=function(Ue){var it=this.getCanvas(),ht=null;if(Ue){var Le=this.getShapeBase(),Se=(0,K.jC)(Ue.type),ye=Le[Se];ye&&(ht=new ye({type:Ue.type,isClipShape:!0,applyTo:this,attrs:Ue.attrs,canvas:it}))}return this.set("clipShape",ht),this.onCanvasChange("clip"),ht},Be.prototype.getClip=function(){var Ue=this.cfg.clipShape;return Ue||null},Be.prototype.clone=function(){var Ue=this,it=this.attrs,ht={};(0,K.S6)(it,function(ye,Ve){(0,K.kJ)(it[Ve])?ht[Ve]=J(it[Ve]):ht[Ve]=it[Ve]});var Le=this.constructor,Se=new Le({attrs:ht});return(0,K.S6)(te,function(ye){Se.set(ye,Ue.get(ye))}),Se},Be.prototype.destroy=function(){var Ue=this.destroyed;Ue||(this.attrs={},ze.prototype.destroy.call(this))},Be.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},Be.prototype.animate=function(){for(var Ue=[],it=0;it<arguments.length;it++)Ue[it]=arguments[it];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var ht=this.get("timeline");ht||(ht=this.get("canvas").get("timeline"),this.set("timeline",ht));var Le=this.get("animations")||[];ht.timer||ht.initTimer();var Se=Ue[0],ye=Ue[1],Ve=Ue[2],je=Ve===void 0?"easeLinear":Ve,Et=Ue[3],Oe=Et===void 0?K.ZT:Et,Qe=Ue[4],ne=Qe===void 0?0:Qe,We,oe,Fe,st,Ce;(0,K.mf)(Se)?(We=Se,Se={}):(0,K.Kn)(Se)&&Se.onFrame&&(We=Se.onFrame,oe=Se.repeat),(0,K.Kn)(ye)?(Ce=ye,ye=Ce.duration,je=Ce.easing||"easeLinear",ne=Ce.delay||0,oe=Ce.repeat||oe||!1,Oe=Ce.callback||K.ZT,Fe=Ce.pauseCallback||K.ZT,st=Ce.resumeCallback||K.ZT):((0,K.hj)(Oe)&&(ne=Oe,Oe=null),(0,K.mf)(je)?(Oe=je,je="easeLinear"):je=je||"easeLinear");var De=E(Se,this),tt={fromAttrs:M(De,this),toAttrs:De,duration:ye,easing:je,repeat:oe,callback:Oe,pauseCallback:Fe,resumeCallback:st,delay:ne,startTime:ht.getTime(),id:(0,K.EL)(),onFrame:We,pathFormatted:!1};Le.length>0?Le=ge(Le,tt):ht.addAnimator(this),Le.push(tt),this.set("animations",Le),this.set("_pause",{isPaused:!1})}},Be.prototype.stopAnimate=function(Ue){var it=this;Ue===void 0&&(Ue=!0);var ht=this.get("animations");(0,K.S6)(ht,function(Le){Ue&&(Le.onFrame?it.attr(Le.onFrame(1)):it.attr(Le.toAttrs)),Le.callback&&Le.callback()}),this.set("animating",!1),this.set("animations",[])},Be.prototype.pauseAnimate=function(){var Ue=this.get("timeline"),it=this.get("animations"),ht=Ue.getTime();return(0,K.S6)(it,function(Le){Le._paused=!0,Le._pauseTime=ht,Le.pauseCallback&&Le.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:ht}),this},Be.prototype.resumeAnimate=function(){var Ue=this.get("timeline"),it=Ue.getTime(),ht=this.get("animations"),Le=this.get("_pause").pauseTime;return(0,K.S6)(ht,function(Se){Se.startTime=Se.startTime+(it-Le),Se._paused=!1,Se._pauseTime=null,Se.resumeCallback&&Se.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",ht),this},Be.prototype.emitDelegation=function(Ue,it){var ht=this,Le=it.propagationPath,Se=this.getEvents(),ye;Ue==="mouseenter"?ye=it.fromShape:Ue==="mouseleave"&&(ye=it.toShape);for(var Ve=function(Qe){var ne=Le[Qe],We=ne.get("name");if(We){if((ne.isGroup()||ne.isCanvas&&ne.isCanvas())&&ye&&(0,W.UY)(ne,ye))return"break";(0,K.kJ)(We)?(0,K.S6)(We,function(oe){ht.emitDelegateEvent(ne,oe,it)}):je.emitDelegateEvent(ne,We,it)}},je=this,Et=0;Et<Le.length;Et++){var Oe=Ve(Et);if(Oe==="break")break}},Be.prototype.emitDelegateEvent=function(Ue,it,ht){var Le=this.getEvents(),Se=it+fe+ht.type;(Le[Se]||Le[ce])&&(ht.name=Se,ht.currentTarget=Ue,ht.delegateTarget=this,ht.delegateObject=Ue.get("delegateObject"),this.emit(Se,ht))},Be.prototype.translate=function(Ue,it){Ue===void 0&&(Ue=0),it===void 0&&(it=0);var ht=this.getMatrix(),Le=Q(ht,[["t",Ue,it]]);return this.setMatrix(Le),this},Be.prototype.move=function(Ue,it){var ht=this.attr("x")||0,Le=this.attr("y")||0;return this.translate(Ue-ht,it-Le),this},Be.prototype.moveTo=function(Ue,it){return this.move(Ue,it)},Be.prototype.scale=function(Ue,it){var ht=this.getMatrix(),Le=Q(ht,[["s",Ue,it||Ue]]);return this.setMatrix(Le),this},Be.prototype.rotate=function(Ue){var it=this.getMatrix(),ht=Q(it,[["r",Ue]]);return this.setMatrix(ht),this},Be.prototype.rotateAtStart=function(Ue){var it=this.attr(),ht=it.x,Le=it.y,Se=this.getMatrix(),ye=Q(Se,[["t",-ht,-Le],["r",Ue],["t",ht,Le]]);return this.setMatrix(ye),this},Be.prototype.rotateAtPoint=function(Ue,it,ht){var Le=this.getMatrix(),Se=Q(Le,[["t",-Ue,-it],["r",ht],["t",Ue,it]]);return this.setMatrix(Se),this},Be}(q.Z);N.Z=be},31841:function(ct,N,k){"use strict";var $=k(97582),K=k(37153),w=function(W){(0,$.ZT)(j,W);function j(){return W!==null&&W.apply(this,arguments)||this}return j.prototype.isGroup=function(){return!0},j.prototype.isEntityGroup=function(){return!1},j.prototype.clone=function(){for(var q=W.prototype.clone.call(this),Q=this.getChildren(),ie=0;ie<Q.length;ie++){var te=Q[ie];q.add(te.clone())}return q},j}(K.Z);N.Z=w},15032:function(ct,N,k){"use strict";var $=k(97582),K=k(29881),w=k(41482),W=function(j){(0,$.ZT)(q,j);function q(Q){return j.call(this,Q)||this}return q.prototype._isInBBox=function(Q,ie){var te=this.getBBox();return te.minX<=Q&&te.maxX>=Q&&te.minY<=ie&&te.maxY>=ie},q.prototype.afterAttrsChange=function(Q){j.prototype.afterAttrsChange.call(this,Q),this.clearCacheBBox()},q.prototype.getBBox=function(){var Q=this.cfg.bbox;return Q||(Q=this.calculateBBox(),this.set("bbox",Q)),Q},q.prototype.getCanvasBBox=function(){var Q=this.cfg.canvasBBox;return Q||(Q=this.calculateCanvasBBox(),this.set("canvasBBox",Q)),Q},q.prototype.applyMatrix=function(Q){j.prototype.applyMatrix.call(this,Q),this.set("canvasBBox",null)},q.prototype.calculateCanvasBBox=function(){var Q=this.getBBox(),ie=this.getTotalMatrix(),te=Q.minX,we=Q.minY,fe=Q.maxX,ce=Q.maxY;if(ie){var J=(0,w.rG)(ie,[Q.minX,Q.minY]),M=(0,w.rG)(ie,[Q.maxX,Q.minY]),E=(0,w.rG)(ie,[Q.minX,Q.maxY]),ge=(0,w.rG)(ie,[Q.maxX,Q.maxY]);te=Math.min(J[0],M[0],E[0],ge[0]),fe=Math.max(J[0],M[0],E[0],ge[0]),we=Math.min(J[1],M[1],E[1],ge[1]),ce=Math.max(J[1],M[1],E[1],ge[1])}var be=this.attrs;if(be.shadowColor){var ze=be.shadowBlur,Be=ze===void 0?0:ze,Ue=be.shadowOffsetX,it=Ue===void 0?0:Ue,ht=be.shadowOffsetY,Le=ht===void 0?0:ht,Se=te-Be+it,ye=fe+Be+it,Ve=we-Be+Le,je=ce+Be+Le;te=Math.min(te,Se),fe=Math.max(fe,ye),we=Math.min(we,Ve),ce=Math.max(ce,je)}return{x:te,y:we,minX:te,minY:we,maxX:fe,maxY:ce,width:fe-te,height:ce-we}},q.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},q.prototype.isClipShape=function(){return this.get("isClipShape")},q.prototype.isInShape=function(Q,ie){return!1},q.prototype.isOnlyHitBox=function(){return!1},q.prototype.isHit=function(Q,ie){var te=this.get("startArrowShape"),we=this.get("endArrowShape"),fe=[Q,ie,1];fe=this.invertFromMatrix(fe);var ce=fe[0],J=fe[1],M=this._isInBBox(ce,J);return this.isOnlyHitBox()?M:!!(M&&!this.isClipped(ce,J)&&(this.isInShape(ce,J)||te&&te.isHit(ce,J)||we&&we.isHit(ce,J)))},q}(K.Z);N.Z=W},93924:function(ct,N,k){"use strict";k.d(N,{_:function(){return ft},C:function(){return ke}});var $={};k.r($),k.d($,{easeBack:function(){return Ge},easeBackIn:function(){return _e},easeBackInOut:function(){return Ge},easeBackOut:function(){return me},easeBounce:function(){return Ce},easeBounceIn:function(){return st},easeBounceInOut:function(){return De},easeBounceOut:function(){return Ce},easeCircle:function(){return Se},easeCircleIn:function(){return ht},easeCircleInOut:function(){return Se},easeCircleOut:function(){return Le},easeCubic:function(){return ie},easeCubicIn:function(){return q},easeCubicInOut:function(){return ie},easeCubicOut:function(){return Q},easeElastic:function(){return $e},easeElasticIn:function(){return Je},easeElasticInOut:function(){return Te},easeElasticOut:function(){return $e},easeExp:function(){return it},easeExpIn:function(){return Be},easeExpInOut:function(){return it},easeExpOut:function(){return Ue},easeLinear:function(){return K},easePoly:function(){return ce},easePolyIn:function(){return we},easePolyInOut:function(){return ce},easePolyOut:function(){return fe},easeQuad:function(){return j},easeQuadIn:function(){return w},easeQuadInOut:function(){return j},easeQuadOut:function(){return W},easeSin:function(){return be},easeSinIn:function(){return E},easeSinInOut:function(){return be},easeSinOut:function(){return ge}});function K(Ne){return+Ne}function w(Ne){return Ne*Ne}function W(Ne){return Ne*(2-Ne)}function j(Ne){return((Ne*=2)<=1?Ne*Ne:--Ne*(2-Ne)+1)/2}function q(Ne){return Ne*Ne*Ne}function Q(Ne){return--Ne*Ne*Ne+1}function ie(Ne){return((Ne*=2)<=1?Ne*Ne*Ne:(Ne-=2)*Ne*Ne+2)/2}var te=3,we=function Ne(dt){dt=+dt;function Pt(rr){return Math.pow(rr,dt)}return Pt.exponent=Ne,Pt}(te),fe=function Ne(dt){dt=+dt;function Pt(rr){return 1-Math.pow(1-rr,dt)}return Pt.exponent=Ne,Pt}(te),ce=function Ne(dt){dt=+dt;function Pt(rr){return((rr*=2)<=1?Math.pow(rr,dt):2-Math.pow(2-rr,dt))/2}return Pt.exponent=Ne,Pt}(te),J=Math.PI,M=J/2;function E(Ne){return+Ne==1?1:1-Math.cos(Ne*M)}function ge(Ne){return Math.sin(Ne*M)}function be(Ne){return(1-Math.cos(J*Ne))/2}function ze(Ne){return(Math.pow(2,-10*Ne)-.0009765625)*1.0009775171065494}function Be(Ne){return ze(1-+Ne)}function Ue(Ne){return 1-ze(Ne)}function it(Ne){return((Ne*=2)<=1?ze(1-Ne):2-ze(Ne-1))/2}function ht(Ne){return 1-Math.sqrt(1-Ne*Ne)}function Le(Ne){return Math.sqrt(1- --Ne*Ne)}function Se(Ne){return((Ne*=2)<=1?1-Math.sqrt(1-Ne*Ne):Math.sqrt(1-(Ne-=2)*Ne)+1)/2}var ye=4/11,Ve=6/11,je=8/11,Et=3/4,Oe=9/11,Qe=10/11,ne=15/16,We=21/22,oe=63/64,Fe=1/ye/ye;function st(Ne){return 1-Ce(1-Ne)}function Ce(Ne){return(Ne=+Ne)<ye?Fe*Ne*Ne:Ne<je?Fe*(Ne-=Ve)*Ne+Et:Ne<Qe?Fe*(Ne-=Oe)*Ne+ne:Fe*(Ne-=We)*Ne+oe}function De(Ne){return((Ne*=2)<=1?1-Ce(1-Ne):Ce(Ne-1)+1)/2}var tt=1.70158,_e=function Ne(dt){dt=+dt;function Pt(rr){return(rr=+rr)*rr*(dt*(rr-1)+rr)}return Pt.overshoot=Ne,Pt}(tt),me=function Ne(dt){dt=+dt;function Pt(rr){return--rr*rr*((rr+1)*dt+rr)+1}return Pt.overshoot=Ne,Pt}(tt),Ge=function Ne(dt){dt=+dt;function Pt(rr){return((rr*=2)<1?rr*rr*((dt+1)*rr-dt):(rr-=2)*rr*((dt+1)*rr+dt)+2)/2}return Pt.overshoot=Ne,Pt}(tt),Ze=2*Math.PI,pt=1,Ht=.3,Je=function Ne(dt,Pt){var rr=Math.asin(1/(dt=Math.max(1,dt)))*(Pt/=Ze);function xr(ut){return dt*ze(- --ut)*Math.sin((rr-ut)/Pt)}return xr.amplitude=function(ut){return Ne(ut,Pt*Ze)},xr.period=function(ut){return Ne(dt,ut)},xr}(pt,Ht),$e=function Ne(dt,Pt){var rr=Math.asin(1/(dt=Math.max(1,dt)))*(Pt/=Ze);function xr(ut){return 1-dt*ze(ut=+ut)*Math.sin((ut+rr)/Pt)}return xr.amplitude=function(ut){return Ne(ut,Pt*Ze)},xr.period=function(ut){return Ne(dt,ut)},xr}(pt,Ht),Te=function Ne(dt,Pt){var rr=Math.asin(1/(dt=Math.max(1,dt)))*(Pt/=Ze);function xr(ut){return((ut=ut*2-1)<0?dt*ze(-ut)*Math.sin((rr-ut)/Pt):2-dt*ze(ut)*Math.sin((rr+ut)/Pt))/2}return xr.amplitude=function(ut){return Ne(ut,Pt*Ze)},xr.period=function(ut){return Ne(dt,ut)},xr}(pt,Ht),Ye={};function ft(Ne){return Ye[Ne.toLowerCase()]||$[Ne]}function ke(Ne,dt){Ye[Ne.toLowerCase()]=dt}},46556:function(ct,N,k){"use strict";k.d(N,{b:function(){return w},W:function(){return K}});var $=new Map;function K(Ue,it){$.set(Ue,it)}function w(Ue){return $.get(Ue)}function W(Ue){var it=Ue.attr(),ht=it.x,Le=it.y,Se=it.width,ye=it.height;return{x:ht,y:Le,width:Se,height:ye}}function j(Ue){var it=Ue.attr(),ht=it.x,Le=it.y,Se=it.r;return{x:ht-Se,y:Le-Se,width:Se*2,height:Se*2}}var q=k(32793);function Q(Ue,it){return!Ue||!it?Ue||it:{minX:Math.min(Ue.minX,it.minX),minY:Math.min(Ue.minY,it.minY),maxX:Math.max(Ue.maxX,it.maxX),maxY:Math.max(Ue.maxY,it.maxY)}}function ie(Ue,it){var ht=Ue.get("startArrowShape"),Le=Ue.get("endArrowShape"),Se=null,ye=null;return ht&&(Se=ht.getCanvasBBox(),it=Q(it,Se)),Le&&(ye=Le.getCanvasBBox(),it=Q(it,ye)),it}function te(Ue){for(var it=Ue.attr(),ht=it.points,Le=[],Se=[],ye=0;ye<ht.length;ye++){var Ve=ht[ye];Le.push(Ve[0]),Se.push(Ve[1])}var je=q.Zr.getBBoxByArray(Le,Se),Et=je.x,Oe=je.y,Qe=je.width,ne=je.height,We={minX:Et,minY:Oe,maxX:Et+Qe,maxY:Oe+ne};return We=ie(Ue,We),{x:We.minX,y:We.minY,width:We.maxX-We.minX,height:We.maxY-We.minY}}function we(Ue){for(var it=Ue.attr(),ht=it.points,Le=[],Se=[],ye=0;ye<ht.length;ye++){var Ve=ht[ye];Le.push(Ve[0]),Se.push(Ve[1])}return q.Zr.getBBoxByArray(Le,Se)}var fe=k(8723);function ce(Ue){var it=Ue.attr(),ht=it.x,Le=it.y,Se=it.text,ye=it.fontSize,Ve=it.lineHeight,je=it.font;je||(je=(0,fe.$O)(it));var Et=(0,fe.mY)(Se,je),Oe;if(!Et)Oe={x:ht,y:Le,width:0,height:0};else{var Qe=it.textAlign,ne=it.textBaseline,We=(0,fe.FE)(Se,ye,Ve),oe={x:ht,y:Le-We};Qe&&(Qe==="end"||Qe==="right"?oe.x-=Et:Qe==="center"&&(oe.x-=Et/2)),ne&&(ne==="top"?oe.y+=We:ne==="middle"&&(oe.y+=We/2)),Oe={x:oe.x,y:oe.y,width:Et,height:We}}return Oe}var J=k(39499),M=k(21030);function E(Ue,it){for(var ht=[],Le=[],Se=[],ye=0;ye<Ue.length;ye++){var Ve=Ue[ye],je=Ve.currentPoint,Et=Ve.params,Oe=Ve.prePoint,Qe=void 0;switch(Ve.command){case"Q":Qe=q.lD.box(Oe[0],Oe[1],Et[1],Et[2],Et[3],Et[4]);break;case"C":Qe=q.Ll.box(Oe[0],Oe[1],Et[1],Et[2],Et[3],Et[4],Et[5],Et[6]);break;case"A":var ne=Ve.arcParams;Qe=q.wN.box(ne.cx,ne.cy,ne.rx,ne.ry,ne.xRotation,ne.startAngle,ne.endAngle);break;default:ht.push(je[0]),Le.push(je[1]);break}Qe&&(Ve.box=Qe,ht.push(Qe.x,Qe.x+Qe.width),Le.push(Qe.y,Qe.y+Qe.height)),it&&(Ve.command==="L"||Ve.command==="M")&&Ve.prePoint&&Ve.nextPoint&&Se.push(Ve)}ht=ht.filter(function(De){return!Number.isNaN(De)&&De!==1/0&&De!==-1/0}),Le=Le.filter(function(De){return!Number.isNaN(De)&&De!==1/0&&De!==-1/0});var We=(0,M.VV)(ht),oe=(0,M.VV)(Le),Fe=(0,M.Fp)(ht),st=(0,M.Fp)(Le);if(Se.length===0)return{x:We,y:oe,width:Fe-We,height:st-oe};for(var ye=0;ye<Se.length;ye++){var Ve=Se[ye],je=Ve.currentPoint,Ce=void 0;je[0]===We?(Ce=ge(Ve,it),We=We-Ce.xExtra):je[0]===Fe&&(Ce=ge(Ve,it),Fe=Fe+Ce.xExtra),je[1]===oe?(Ce=ge(Ve,it),oe=oe-Ce.yExtra):je[1]===st&&(Ce=ge(Ve,it),st=st+Ce.yExtra)}return{x:We,y:oe,width:Fe-We,height:st-oe}}function ge(Ue,it){var ht=Ue.prePoint,Le=Ue.currentPoint,Se=Ue.nextPoint,ye=Math.pow(Le[0]-ht[0],2)+Math.pow(Le[1]-ht[1],2),Ve=Math.pow(Le[0]-Se[0],2)+Math.pow(Le[1]-Se[1],2),je=Math.pow(ht[0]-Se[0],2)+Math.pow(ht[1]-Se[1],2),Et=Math.acos((ye+Ve-je)/(2*Math.sqrt(ye)*Math.sqrt(Ve)));if(!Et||Math.sin(Et)===0||(0,M.vQ)(Et,0))return{xExtra:0,yExtra:0};var Oe=Math.abs(Math.atan2(Se[1]-Le[1],Se[0]-Le[0])),Qe=Math.abs(Math.atan2(Se[0]-Le[0],Se[1]-Le[1]));Oe=Oe>Math.PI/2?Math.PI-Oe:Oe,Qe=Qe>Math.PI/2?Math.PI-Qe:Qe;var ne={xExtra:Math.cos(Et/2-Oe)*(it/2*(1/Math.sin(Et/2)))-it/2||0,yExtra:Math.cos(Qe-Et/2)*(it/2*(1/Math.sin(Et/2)))-it/2||0};return ne}function be(Ue){var it=Ue.attr(),ht=it.path,Le=it.stroke,Se=Le?it.lineWidth:0,ye=Ue.get("segments")||(0,J.zx)(ht),Ve=E(ye,Se),je=Ve.x,Et=Ve.y,Oe=Ve.width,Qe=Ve.height,ne={minX:je,minY:Et,maxX:je+Oe,maxY:Et+Qe};return ne=ie(Ue,ne),{x:ne.minX,y:ne.minY,width:ne.maxX-ne.minX,height:ne.maxY-ne.minY}}function ze(Ue){var it=Ue.attr(),ht=it.x1,Le=it.y1,Se=it.x2,ye=it.y2,Ve=Math.min(ht,Se),je=Math.max(ht,Se),Et=Math.min(Le,ye),Oe=Math.max(Le,ye),Qe={minX:Ve,maxX:je,minY:Et,maxY:Oe};return Qe=ie(Ue,Qe),{x:Qe.minX,y:Qe.minY,width:Qe.maxX-Qe.minX,height:Qe.maxY-Qe.minY}}function Be(Ue){var it=Ue.attr(),ht=it.x,Le=it.y,Se=it.rx,ye=it.ry;return{x:ht-Se,y:Le-ye,width:Se*2,height:ye*2}}K("rect",W),K("image",W),K("circle",j),K("marker",j),K("polyline",te),K("polygon",we),K("text",ce),K("path",be),K("line",ze),K("ellipse",Be)},89473:function(ct,N){"use strict";var k=function(){function $(K,w){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=K,this.name=K,this.originalEvent=w,this.timeStamp=w.timeStamp}return $.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},$.prototype.stopPropagation=function(){this.propagationStopped=!0},$.prototype.toString=function(){var K=this.type;return"[Event (type="+K+")]"},$.prototype.save=function(){},$.prototype.restore=function(){},$}();N.Z=k},98190:function(ct,N,k){"use strict";k.r(N),k.d(N,{AbstractCanvas:function(){return we.Z},AbstractGroup:function(){return fe.Z},AbstractShape:function(){return ce.Z},Base:function(){return te.Z},Event:function(){return ie.Z},PathUtil:function(){return $},assembleFont:function(){return M.$O},getBBoxMethod:function(){return J.b},getOffScreenContext:function(){return be.L},getTextHeight:function(){return M.FE},invert:function(){return ge.U_},isAllowCapture:function(){return E.pP},multiplyVec2:function(){return ge.rG},registerBBox:function(){return J.W},registerEasing:function(){return ze.C},version:function(){return Be}});var $=k(47575),K=k(52),w=k.n(K),Q={};for(var W in K)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(W)<0&&(Q[W]=function(Ue){return K[Ue]}.bind(0,W));k.d(N,Q);var j=k(19641),q=k.n(j),Q={};for(var W in j)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(W)<0&&(Q[W]=function(it){return j[it]}.bind(0,W));k.d(N,Q);var ie=k(89473),te=k(2667),we=k(58906),fe=k(31841),ce=k(15032),J=k(46556),M=k(8723),E=k(77341),ge=k(41482),be=k(67052),ze=k(93924),Be="0.5.11"},19641:function(){},52:function(){},41482:function(ct,N,k){"use strict";k.d(N,{U_:function(){return w},rG:function(){return K},xq:function(){return $}});function $(W,j){var q=[],Q=W[0],ie=W[1],te=W[2],we=W[3],fe=W[4],ce=W[5],J=W[6],M=W[7],E=W[8],ge=j[0],be=j[1],ze=j[2],Be=j[3],Ue=j[4],it=j[5],ht=j[6],Le=j[7],Se=j[8];return q[0]=ge*Q+be*we+ze*J,q[1]=ge*ie+be*fe+ze*M,q[2]=ge*te+be*ce+ze*E,q[3]=Be*Q+Ue*we+it*J,q[4]=Be*ie+Ue*fe+it*M,q[5]=Be*te+Ue*ce+it*E,q[6]=ht*Q+Le*we+Se*J,q[7]=ht*ie+Le*fe+Se*M,q[8]=ht*te+Le*ce+Se*E,q}function K(W,j){var q=[],Q=j[0],ie=j[1];return q[0]=W[0]*Q+W[3]*ie+W[6],q[1]=W[1]*Q+W[4]*ie+W[7],q}function w(W){var j=[],q=W[0],Q=W[1],ie=W[2],te=W[3],we=W[4],fe=W[5],ce=W[6],J=W[7],M=W[8],E=M*we-fe*J,ge=-M*te+fe*ce,be=J*te-we*ce,ze=q*E+Q*ge+ie*be;return ze?(ze=1/ze,j[0]=E*ze,j[1]=(-M*Q+ie*J)*ze,j[2]=(fe*Q-ie*we)*ze,j[3]=ge*ze,j[4]=(M*q-ie*ce)*ze,j[5]=(-fe*q+ie*te)*ze,j[6]=be*ze,j[7]=(-J*q+Q*ce)*ze,j[8]=(we*q-Q*te)*ze,j):null}},67052:function(ct,N,k){"use strict";k.d(N,{L:function(){return K}});var $=null;function K(){if(!$){var w=document.createElement("canvas");w.width=1,w.height=1,$=w.getContext("2d")}return $}},47575:function(ct,N,k){"use strict";k.r(N),k.d(N,{catmullRomToBezier:function(){return q},fillPath:function(){return ne},fillPathByDiff:function(){return st},formatPath:function(){return tt},intersection:function(){return je},parsePathArray:function(){return M},parsePathString:function(){return j},pathToAbsolute:function(){return ie},pathToCurve:function(){return ce},rectPath:function(){return Ue}});var $=k(21030),K=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,w=new RegExp("([a-z])["+K+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+K+"]*,?["+K+"]*)+)","ig"),W=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+K+"]*,?["+K+"]*","ig"),j=function(_e){if(!_e)return null;if((0,$.kJ)(_e))return _e;var me={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ge=[];return String(_e).replace(w,function(Ze,pt,Ht){var Je=[],$e=pt.toLowerCase();if(Ht.replace(W,function(Te,Ye){Ye&&Je.push(+Ye)}),$e==="m"&&Je.length>2&&(Ge.push([pt].concat(Je.splice(0,2))),$e="l",pt=pt==="m"?"l":"L"),$e==="o"&&Je.length===1&&Ge.push([pt,Je[0]]),$e==="r")Ge.push([pt].concat(Je));else for(;Je.length>=me[$e]&&(Ge.push([pt].concat(Je.splice(0,me[$e]))),!!me[$e]););return _e}),Ge},q=function(_e,me){for(var Ge=[],Ze=0,pt=_e.length;pt-2*!me>Ze;Ze+=2){var Ht=[{x:+_e[Ze-2],y:+_e[Ze-1]},{x:+_e[Ze],y:+_e[Ze+1]},{x:+_e[Ze+2],y:+_e[Ze+3]},{x:+_e[Ze+4],y:+_e[Ze+5]}];me?Ze?pt-4===Ze?Ht[3]={x:+_e[0],y:+_e[1]}:pt-2===Ze&&(Ht[2]={x:+_e[0],y:+_e[1]},Ht[3]={x:+_e[2],y:+_e[3]}):Ht[0]={x:+_e[pt-2],y:+_e[pt-1]}:pt-4===Ze?Ht[3]=Ht[2]:Ze||(Ht[0]={x:+_e[Ze],y:+_e[Ze+1]}),Ge.push(["C",(-Ht[0].x+6*Ht[1].x+Ht[2].x)/6,(-Ht[0].y+6*Ht[1].y+Ht[2].y)/6,(Ht[1].x+6*Ht[2].x-Ht[3].x)/6,(Ht[1].y+6*Ht[2].y-Ht[3].y)/6,Ht[2].x,Ht[2].y])}return Ge},Q=function(_e,me,Ge,Ze,pt){var Ht=[];if(pt===null&&Ze===null&&(Ze=Ge),_e=+_e,me=+me,Ge=+Ge,Ze=+Ze,pt!==null){var Je=Math.PI/180,$e=_e+Ge*Math.cos(-Ze*Je),Te=_e+Ge*Math.cos(-pt*Je),Ye=me+Ge*Math.sin(-Ze*Je),ft=me+Ge*Math.sin(-pt*Je);Ht=[["M",$e,Ye],["A",Ge,Ge,0,+(pt-Ze>180),0,Te,ft]]}else Ht=[["M",_e,me],["m",0,-Ze],["a",Ge,Ze,0,1,1,0,2*Ze],["a",Ge,Ze,0,1,1,0,-2*Ze],["z"]];return Ht},ie=function(_e){if(_e=j(_e),!_e||!_e.length)return[["M",0,0]];var me=[],Ge=0,Ze=0,pt=0,Ht=0,Je=0,$e,Te;_e[0][0]==="M"&&(Ge=+_e[0][1],Ze=+_e[0][2],pt=Ge,Ht=Ze,Je++,me[0]=["M",Ge,Ze]);for(var Ye=_e.length===3&&_e[0][0]==="M"&&_e[1][0].toUpperCase()==="R"&&_e[2][0].toUpperCase()==="Z",ft=void 0,ke=void 0,Ne=Je,dt=_e.length;Ne<dt;Ne++){if(me.push(ft=[]),ke=_e[Ne],$e=ke[0],$e!==$e.toUpperCase())switch(ft[0]=$e.toUpperCase(),ft[0]){case"A":ft[1]=ke[1],ft[2]=ke[2],ft[3]=ke[3],ft[4]=ke[4],ft[5]=ke[5],ft[6]=+ke[6]+Ge,ft[7]=+ke[7]+Ze;break;case"V":ft[1]=+ke[1]+Ze;break;case"H":ft[1]=+ke[1]+Ge;break;case"R":Te=[Ge,Ze].concat(ke.slice(1));for(var Pt=2,rr=Te.length;Pt<rr;Pt++)Te[Pt]=+Te[Pt]+Ge,Te[++Pt]=+Te[Pt]+Ze;me.pop(),me=me.concat(q(Te,Ye));break;case"O":me.pop(),Te=Q(Ge,Ze,ke[1],ke[2]),Te.push(Te[0]),me=me.concat(Te);break;case"U":me.pop(),me=me.concat(Q(Ge,Ze,ke[1],ke[2],ke[3])),ft=["U"].concat(me[me.length-1].slice(-2));break;case"M":pt=+ke[1]+Ge,Ht=+ke[2]+Ze;break;default:for(var Pt=1,rr=ke.length;Pt<rr;Pt++)ft[Pt]=+ke[Pt]+(Pt%2?Ge:Ze)}else if($e==="R")Te=[Ge,Ze].concat(ke.slice(1)),me.pop(),me=me.concat(q(Te,Ye)),ft=["R"].concat(ke.slice(-2));else if($e==="O")me.pop(),Te=Q(Ge,Ze,ke[1],ke[2]),Te.push(Te[0]),me=me.concat(Te);else if($e==="U")me.pop(),me=me.concat(Q(Ge,Ze,ke[1],ke[2],ke[3])),ft=["U"].concat(me[me.length-1].slice(-2));else for(var xr=0,ut=ke.length;xr<ut;xr++)ft[xr]=ke[xr];if($e=$e.toUpperCase(),$e!=="O")switch(ft[0]){case"Z":Ge=+pt,Ze=+Ht;break;case"H":Ge=ft[1];break;case"V":Ze=ft[1];break;case"M":pt=ft[ft.length-2],Ht=ft[ft.length-1];break;default:Ge=ft[ft.length-2],Ze=ft[ft.length-1]}}return me},te=function(_e,me,Ge,Ze){return[_e,me,Ge,Ze,Ge,Ze]},we=function(_e,me,Ge,Ze,pt,Ht){var Je=.3333333333333333,$e=2/3;return[Je*_e+$e*Ge,Je*me+$e*Ze,Je*pt+$e*Ge,Je*Ht+$e*Ze,pt,Ht]},fe=function(_e,me,Ge,Ze,pt,Ht,Je,$e,Te,Ye){Ge===Ze&&(Ge+=1);var ft=Math.PI*120/180,ke=Math.PI/180*(+pt||0),Ne=[],dt,Pt,rr,xr,ut,nn=function(et,St,Gt){var gr=et*Math.cos(Gt)-St*Math.sin(Gt),At=et*Math.sin(Gt)+St*Math.cos(Gt);return{x:gr,y:At}};if(Ye)Pt=Ye[0],rr=Ye[1],xr=Ye[2],ut=Ye[3];else{dt=nn(_e,me,-ke),_e=dt.x,me=dt.y,dt=nn($e,Te,-ke),$e=dt.x,Te=dt.y,_e===$e&&me===Te&&($e+=1,Te+=1);var Gr=(_e-$e)/2,Xr=(me-Te)/2,Nt=Gr*Gr/(Ge*Ge)+Xr*Xr/(Ze*Ze);Nt>1&&(Nt=Math.sqrt(Nt),Ge=Nt*Ge,Ze=Nt*Ze);var Yt=Ge*Ge,sr=Ze*Ze,Dt=(Ht===Je?-1:1)*Math.sqrt(Math.abs((Yt*sr-Yt*Xr*Xr-sr*Gr*Gr)/(Yt*Xr*Xr+sr*Gr*Gr)));xr=Dt*Ge*Xr/Ze+(_e+$e)/2,ut=Dt*-Ze*Gr/Ge+(me+Te)/2,Pt=Math.asin(((me-ut)/Ze).toFixed(9)),rr=Math.asin(((Te-ut)/Ze).toFixed(9)),Pt=_e<xr?Math.PI-Pt:Pt,rr=$e<xr?Math.PI-rr:rr,Pt<0&&(Pt=Math.PI*2+Pt),rr<0&&(rr=Math.PI*2+rr),Je&&Pt>rr&&(Pt=Pt-Math.PI*2),!Je&&rr>Pt&&(rr=rr-Math.PI*2)}var Qt=rr-Pt;if(Math.abs(Qt)>ft){var Sr=rr,Er=$e,Fr=Te;rr=Pt+ft*(Je&&rr>Pt?1:-1),$e=xr+Ge*Math.cos(rr),Te=ut+Ze*Math.sin(rr),Ne=fe($e,Te,Ge,Ze,pt,0,Je,Er,Fr,[rr,Sr,xr,ut])}Qt=rr-Pt;var zr=Math.cos(Pt),le=Math.sin(Pt),H=Math.cos(rr),re=Math.sin(rr),Re=Math.tan(Qt/4),Ke=4/3*Ge*Re,Tt=4/3*Ze*Re,or=[_e,me],jt=[_e+Ke*le,me-Tt*zr],wt=[$e+Ke*re,Te-Tt*H],It=[$e,Te];if(jt[0]=2*or[0]-jt[0],jt[1]=2*or[1]-jt[1],Ye)return[jt,wt,It].concat(Ne);Ne=[jt,wt,It].concat(Ne).join().split(",");for(var de=[],pe=0,Me=Ne.length;pe<Me;pe++)de[pe]=pe%2?nn(Ne[pe-1],Ne[pe],ke).y:nn(Ne[pe],Ne[pe+1],ke).x;return de},ce=function(_e,me){var Ge=ie(_e),Ze=me&&ie(me),pt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ht={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Je=[],$e=[],Te="",Ye="",ft,ke=function(Gr,Xr,Nt){var Yt,sr;if(!Gr)return["C",Xr.x,Xr.y,Xr.x,Xr.y,Xr.x,Xr.y];switch(!(Gr[0]in{T:1,Q:1})&&(Xr.qx=Xr.qy=null),Gr[0]){case"M":Xr.X=Gr[1],Xr.Y=Gr[2];break;case"A":Gr=["C"].concat(fe.apply(0,[Xr.x,Xr.y].concat(Gr.slice(1))));break;case"S":Nt==="C"||Nt==="S"?(Yt=Xr.x*2-Xr.bx,sr=Xr.y*2-Xr.by):(Yt=Xr.x,sr=Xr.y),Gr=["C",Yt,sr].concat(Gr.slice(1));break;case"T":Nt==="Q"||Nt==="T"?(Xr.qx=Xr.x*2-Xr.qx,Xr.qy=Xr.y*2-Xr.qy):(Xr.qx=Xr.x,Xr.qy=Xr.y),Gr=["C"].concat(we(Xr.x,Xr.y,Xr.qx,Xr.qy,Gr[1],Gr[2]));break;case"Q":Xr.qx=Gr[1],Xr.qy=Gr[2],Gr=["C"].concat(we(Xr.x,Xr.y,Gr[1],Gr[2],Gr[3],Gr[4]));break;case"L":Gr=["C"].concat(te(Xr.x,Xr.y,Gr[1],Gr[2]));break;case"H":Gr=["C"].concat(te(Xr.x,Xr.y,Gr[1],Xr.y));break;case"V":Gr=["C"].concat(te(Xr.x,Xr.y,Xr.x,Gr[1]));break;case"Z":Gr=["C"].concat(te(Xr.x,Xr.y,Xr.X,Xr.Y));break;default:break}return Gr},Ne=function(Gr,Xr){if(Gr[Xr].length>7){Gr[Xr].shift();for(var Nt=Gr[Xr];Nt.length;)Je[Xr]="A",Ze&&($e[Xr]="A"),Gr.splice(Xr++,0,["C"].concat(Nt.splice(0,6)));Gr.splice(Xr,1),ft=Math.max(Ge.length,Ze&&Ze.length||0)}},dt=function(Gr,Xr,Nt,Yt,sr){Gr&&Xr&&Gr[sr][0]==="M"&&Xr[sr][0]!=="M"&&(Xr.splice(sr,0,["M",Yt.x,Yt.y]),Nt.bx=0,Nt.by=0,Nt.x=Gr[sr][1],Nt.y=Gr[sr][2],ft=Math.max(Ge.length,Ze&&Ze.length||0))};ft=Math.max(Ge.length,Ze&&Ze.length||0);for(var Pt=0;Pt<ft;Pt++){Ge[Pt]&&(Te=Ge[Pt][0]),Te!=="C"&&(Je[Pt]=Te,Pt&&(Ye=Je[Pt-1])),Ge[Pt]=ke(Ge[Pt],pt,Ye),Je[Pt]!=="A"&&Te==="C"&&(Je[Pt]="C"),Ne(Ge,Pt),Ze&&(Ze[Pt]&&(Te=Ze[Pt][0]),Te!=="C"&&($e[Pt]=Te,Pt&&(Ye=$e[Pt-1])),Ze[Pt]=ke(Ze[Pt],Ht,Ye),$e[Pt]!=="A"&&Te==="C"&&($e[Pt]="C"),Ne(Ze,Pt)),dt(Ge,Ze,pt,Ht,Pt),dt(Ze,Ge,Ht,pt,Pt);var rr=Ge[Pt],xr=Ze&&Ze[Pt],ut=rr.length,nn=Ze&&xr.length;pt.x=rr[ut-2],pt.y=rr[ut-1],pt.bx=parseFloat(rr[ut-4])||pt.x,pt.by=parseFloat(rr[ut-3])||pt.y,Ht.bx=Ze&&(parseFloat(xr[nn-4])||Ht.x),Ht.by=Ze&&(parseFloat(xr[nn-3])||Ht.y),Ht.x=Ze&&xr[nn-2],Ht.y=Ze&&xr[nn-1]}return Ze?[Ge,Ze]:Ge},J=/,?([a-z]),?/gi,M=function(_e){return _e.join(",").replace(J,"$1")},E=function(_e,me,Ge,Ze,pt){var Ht=-3*me+9*Ge-9*Ze+3*pt,Je=_e*Ht+6*me-12*Ge+6*Ze;return _e*Je-3*me+3*Ge},ge=function(_e,me,Ge,Ze,pt,Ht,Je,$e,Te){Te===null&&(Te=1),Te=Te>1?1:Te<0?0:Te;for(var Ye=Te/2,ft=12,ke=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ne=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],dt=0,Pt=0;Pt<ft;Pt++){var rr=Ye*ke[Pt]+Ye,xr=E(rr,_e,Ge,pt,Je),ut=E(rr,me,Ze,Ht,$e),nn=xr*xr+ut*ut;dt+=Ne[Pt]*Math.sqrt(nn)}return Ye*dt},be=function(_e,me,Ge,Ze,pt,Ht,Je,$e){for(var Te=[],Ye=[[],[]],ft,ke,Ne,dt,Pt=0;Pt<2;++Pt){if(Pt===0?(ke=6*_e-12*Ge+6*pt,ft=-3*_e+9*Ge-9*pt+3*Je,Ne=3*Ge-3*_e):(ke=6*me-12*Ze+6*Ht,ft=-3*me+9*Ze-9*Ht+3*$e,Ne=3*Ze-3*me),Math.abs(ft)<1e-12){if(Math.abs(ke)<1e-12)continue;dt=-Ne/ke,dt>0&&dt<1&&Te.push(dt);continue}var rr=ke*ke-4*Ne*ft,xr=Math.sqrt(rr);if(!(rr<0)){var ut=(-ke+xr)/(2*ft);ut>0&&ut<1&&Te.push(ut);var nn=(-ke-xr)/(2*ft);nn>0&&nn<1&&Te.push(nn)}}for(var Gr=Te.length,Xr=Gr,Nt;Gr--;)dt=Te[Gr],Nt=1-dt,Ye[0][Gr]=Nt*Nt*Nt*_e+3*Nt*Nt*dt*Ge+3*Nt*dt*dt*pt+dt*dt*dt*Je,Ye[1][Gr]=Nt*Nt*Nt*me+3*Nt*Nt*dt*Ze+3*Nt*dt*dt*Ht+dt*dt*dt*$e;return Ye[0][Xr]=_e,Ye[1][Xr]=me,Ye[0][Xr+1]=Je,Ye[1][Xr+1]=$e,Ye[0].length=Ye[1].length=Xr+2,{min:{x:Math.min.apply(0,Ye[0]),y:Math.min.apply(0,Ye[1])},max:{x:Math.max.apply(0,Ye[0]),y:Math.max.apply(0,Ye[1])}}},ze=function(_e,me,Ge,Ze,pt,Ht,Je,$e){if(!(Math.max(_e,Ge)<Math.min(pt,Je)||Math.min(_e,Ge)>Math.max(pt,Je)||Math.max(me,Ze)<Math.min(Ht,$e)||Math.min(me,Ze)>Math.max(Ht,$e))){var Te=(_e*Ze-me*Ge)*(pt-Je)-(_e-Ge)*(pt*$e-Ht*Je),Ye=(_e*Ze-me*Ge)*(Ht-$e)-(me-Ze)*(pt*$e-Ht*Je),ft=(_e-Ge)*(Ht-$e)-(me-Ze)*(pt-Je);if(ft){var ke=Te/ft,Ne=Ye/ft,dt=+ke.toFixed(2),Pt=+Ne.toFixed(2);if(!(dt<+Math.min(_e,Ge).toFixed(2)||dt>+Math.max(_e,Ge).toFixed(2)||dt<+Math.min(pt,Je).toFixed(2)||dt>+Math.max(pt,Je).toFixed(2)||Pt<+Math.min(me,Ze).toFixed(2)||Pt>+Math.max(me,Ze).toFixed(2)||Pt<+Math.min(Ht,$e).toFixed(2)||Pt>+Math.max(Ht,$e).toFixed(2)))return{x:ke,y:Ne}}}},Be=function(_e,me,Ge){return me>=_e.x&&me<=_e.x+_e.width&&Ge>=_e.y&&Ge<=_e.y+_e.height},Ue=function(_e,me,Ge,Ze,pt){if(pt)return[["M",+_e+ +pt,me],["l",Ge-pt*2,0],["a",pt,pt,0,0,1,pt,pt],["l",0,Ze-pt*2],["a",pt,pt,0,0,1,-pt,pt],["l",pt*2-Ge,0],["a",pt,pt,0,0,1,-pt,-pt],["l",0,pt*2-Ze],["a",pt,pt,0,0,1,pt,-pt],["z"]];var Ht=[["M",_e,me],["l",Ge,0],["l",0,Ze],["l",-Ge,0],["z"]];return Ht.parsePathArray=M,Ht},it=function(_e,me,Ge,Ze){return _e===null&&(_e=me=Ge=Ze=0),me===null&&(me=_e.y,Ge=_e.width,Ze=_e.height,_e=_e.x),{x:_e,y:me,width:Ge,w:Ge,height:Ze,h:Ze,x2:_e+Ge,y2:me+Ze,cx:_e+Ge/2,cy:me+Ze/2,r1:Math.min(Ge,Ze)/2,r2:Math.max(Ge,Ze)/2,r0:Math.sqrt(Ge*Ge+Ze*Ze)/2,path:Ue(_e,me,Ge,Ze),vb:[_e,me,Ge,Ze].join(" ")}},ht=function(_e,me){return _e=it(_e),me=it(me),Be(me,_e.x,_e.y)||Be(me,_e.x2,_e.y)||Be(me,_e.x,_e.y2)||Be(me,_e.x2,_e.y2)||Be(_e,me.x,me.y)||Be(_e,me.x2,me.y)||Be(_e,me.x,me.y2)||Be(_e,me.x2,me.y2)||(_e.x<me.x2&&_e.x>me.x||me.x<_e.x2&&me.x>_e.x)&&(_e.y<me.y2&&_e.y>me.y||me.y<_e.y2&&me.y>_e.y)},Le=function(_e,me,Ge,Ze,pt,Ht,Je,$e){(0,$.kJ)(_e)||(_e=[_e,me,Ge,Ze,pt,Ht,Je,$e]);var Te=be.apply(null,_e);return it(Te.min.x,Te.min.y,Te.max.x-Te.min.x,Te.max.y-Te.min.y)},Se=function(_e,me,Ge,Ze,pt,Ht,Je,$e,Te){var Ye=1-Te,ft=Math.pow(Ye,3),ke=Math.pow(Ye,2),Ne=Te*Te,dt=Ne*Te,Pt=ft*_e+ke*3*Te*Ge+Ye*3*Te*Te*pt+dt*Je,rr=ft*me+ke*3*Te*Ze+Ye*3*Te*Te*Ht+dt*$e,xr=_e+2*Te*(Ge-_e)+Ne*(pt-2*Ge+_e),ut=me+2*Te*(Ze-me)+Ne*(Ht-2*Ze+me),nn=Ge+2*Te*(pt-Ge)+Ne*(Je-2*pt+Ge),Gr=Ze+2*Te*(Ht-Ze)+Ne*($e-2*Ht+Ze),Xr=Ye*_e+Te*Ge,Nt=Ye*me+Te*Ze,Yt=Ye*pt+Te*Je,sr=Ye*Ht+Te*$e,Dt=90-Math.atan2(xr-nn,ut-Gr)*180/Math.PI;return{x:Pt,y:rr,m:{x:xr,y:ut},n:{x:nn,y:Gr},start:{x:Xr,y:Nt},end:{x:Yt,y:sr},alpha:Dt}},ye=function(_e,me,Ge){var Ze=Le(_e),pt=Le(me);if(!ht(Ze,pt))return Ge?0:[];for(var Ht=ge.apply(0,_e),Je=ge.apply(0,me),$e=~~(Ht/8),Te=~~(Je/8),Ye=[],ft=[],ke={},Ne=Ge?0:[],dt=0;dt<$e+1;dt++){var Pt=Se.apply(0,_e.concat(dt/$e));Ye.push({x:Pt.x,y:Pt.y,t:dt/$e})}for(var dt=0;dt<Te+1;dt++){var Pt=Se.apply(0,me.concat(dt/Te));ft.push({x:Pt.x,y:Pt.y,t:dt/Te})}for(var dt=0;dt<$e;dt++)for(var rr=0;rr<Te;rr++){var xr=Ye[dt],ut=Ye[dt+1],nn=ft[rr],Gr=ft[rr+1],Xr=Math.abs(ut.x-xr.x)<.001?"y":"x",Nt=Math.abs(Gr.x-nn.x)<.001?"y":"x",Yt=ze(xr.x,xr.y,ut.x,ut.y,nn.x,nn.y,Gr.x,Gr.y);if(Yt){if(ke[Yt.x.toFixed(4)]===Yt.y.toFixed(4))continue;ke[Yt.x.toFixed(4)]=Yt.y.toFixed(4);var sr=xr.t+Math.abs((Yt[Xr]-xr[Xr])/(ut[Xr]-xr[Xr]))*(ut.t-xr.t),Dt=nn.t+Math.abs((Yt[Nt]-nn[Nt])/(Gr[Nt]-nn[Nt]))*(Gr.t-nn.t);sr>=0&&sr<=1&&Dt>=0&&Dt<=1&&(Ge?Ne+=1:Ne.push({x:Yt.x,y:Yt.y,t1:sr,t2:Dt}))}}return Ne},Ve=function(_e,me,Ge){_e=ce(_e),me=ce(me);for(var Ze,pt,Ht,Je,$e,Te,Ye,ft,ke,Ne,dt=Ge?0:[],Pt=0,rr=_e.length;Pt<rr;Pt++){var xr=_e[Pt];if(xr[0]==="M")Ze=$e=xr[1],pt=Te=xr[2];else{xr[0]==="C"?(ke=[Ze,pt].concat(xr.slice(1)),Ze=ke[6],pt=ke[7]):(ke=[Ze,pt,Ze,pt,$e,Te,$e,Te],Ze=$e,pt=Te);for(var ut=0,nn=me.length;ut<nn;ut++){var Gr=me[ut];if(Gr[0]==="M")Ht=Ye=Gr[1],Je=ft=Gr[2];else{Gr[0]==="C"?(Ne=[Ht,Je].concat(Gr.slice(1)),Ht=Ne[6],Je=Ne[7]):(Ne=[Ht,Je,Ht,Je,Ye,ft,Ye,ft],Ht=Ye,Je=ft);var Xr=ye(ke,Ne,Ge);if(Ge)dt+=Xr;else{for(var Nt=0,Yt=Xr.length;Nt<Yt;Nt++)Xr[Nt].segment1=Pt,Xr[Nt].segment2=ut,Xr[Nt].bez1=ke,Xr[Nt].bez2=Ne;dt=dt.concat(Xr)}}}}}return dt},je=function(_e,me){return Ve(_e,me)};function Et(_e,me){var Ge=[],Ze=[];function pt(Ht,Je){if(Ht.length===1)Ge.push(Ht[0]),Ze.push(Ht[0]);else{for(var $e=[],Te=0;Te<Ht.length-1;Te++)Te===0&&Ge.push(Ht[0]),Te===Ht.length-2&&Ze.push(Ht[Te+1]),$e[Te]=[(1-Je)*Ht[Te][0]+Je*Ht[Te+1][0],(1-Je)*Ht[Te][1]+Je*Ht[Te+1][1]];pt($e,Je)}}return _e.length&&pt(_e,me),{left:Ge,right:Ze.reverse()}}function Oe(_e,me,Ge){var Ze=[[_e[1],_e[2]]];Ge=Ge||2;var pt=[];me[0]==="A"?(Ze.push(me[6]),Ze.push(me[7])):me[0]==="C"?(Ze.push([me[1],me[2]]),Ze.push([me[3],me[4]]),Ze.push([me[5],me[6]])):me[0]==="S"||me[0]==="Q"?(Ze.push([me[1],me[2]]),Ze.push([me[3],me[4]])):Ze.push([me[1],me[2]]);for(var Ht=Ze,Je=1/Ge,$e=0;$e<Ge-1;$e++){var Te=Je/(1-Je*$e),Ye=Et(Ht,Te);pt.push(Ye.left),Ht=Ye.right}pt.push(Ht);var ft=pt.map(function(ke){var Ne=[];return ke.length===4&&(Ne.push("C"),Ne=Ne.concat(ke[2])),ke.length>=3&&(ke.length===3&&Ne.push("Q"),Ne=Ne.concat(ke[1])),ke.length===2&&Ne.push("L"),Ne=Ne.concat(ke[ke.length-1]),Ne});return ft}var Qe=function(_e,me,Ge){if(Ge===1)return[[].concat(_e)];var Ze=[];if(me[0]==="L"||me[0]==="C"||me[0]==="Q")Ze=Ze.concat(Oe(_e,me,Ge));else{var pt=[].concat(_e);pt[0]==="M"&&(pt[0]="L");for(var Ht=0;Ht<=Ge-1;Ht++)Ze.push(pt)}return Ze},ne=function(_e,me){if(_e.length===1)return _e;var Ge=_e.length-1,Ze=me.length-1,pt=Ge/Ze,Ht=[];if(_e.length===1&&_e[0][0]==="M"){for(var Je=0;Je<Ze-Ge;Je++)_e.push(_e[0]);return _e}for(var Je=0;Je<Ze;Je++){var $e=Math.floor(pt*Je);Ht[$e]=(Ht[$e]||0)+1}var Te=Ht.reduce(function(Ye,ft,ke){return ke===Ge?Ye.concat(_e[Ge]):Ye.concat(Qe(_e[ke],_e[ke+1],ft))},[]);return Te.unshift(_e[0]),(me[Ze]==="Z"||me[Ze]==="z")&&Te.push("Z"),Te},We=function(_e,me){if(_e.length!==me.length)return!1;var Ge=!0;return(0,$.S6)(_e,function(Ze,pt){if(Ze!==me[pt])return Ge=!1,!1}),Ge};function oe(_e,me,Ge){var Ze=null,pt=Ge;return me<pt&&(pt=me,Ze="add"),_e<pt&&(pt=_e,Ze="del"),{type:Ze,min:pt}}var Fe=function(_e,me){var Ge=_e.length,Ze=me.length,pt,Ht,Je=0;if(Ge===0||Ze===0)return null;for(var $e=[],Te=0;Te<=Ge;Te++)$e[Te]=[],$e[Te][0]={min:Te};for(var Ye=0;Ye<=Ze;Ye++)$e[0][Ye]={min:Ye};for(var Te=1;Te<=Ge;Te++){pt=_e[Te-1];for(var Ye=1;Ye<=Ze;Ye++){Ht=me[Ye-1],We(pt,Ht)?Je=0:Je=1;var ft=$e[Te-1][Ye].min+1,ke=$e[Te][Ye-1].min+1,Ne=$e[Te-1][Ye-1].min+Je;$e[Te][Ye]=oe(ft,ke,Ne)}}return $e},st=function(_e,me){var Ge=Fe(_e,me),Ze=_e.length,pt=me.length,Ht=[],Je=1,$e=1;if(Ge[Ze][pt].min!==Ze){for(var Te=1;Te<=Ze;Te++){var Ye=Ge[Te][Te].min;$e=Te;for(var ft=Je;ft<=pt;ft++)Ge[Te][ft].min<Ye&&(Ye=Ge[Te][ft].min,$e=ft);Je=$e,Ge[Te][Je].type&&Ht.push({index:Te-1,type:Ge[Te][Je].type})}for(var Te=Ht.length-1;Te>=0;Te--)Je=Ht[Te].index,Ht[Te].type==="add"?_e.splice(Je,0,[].concat(_e[Je])):_e.splice(Je,1)}Ze=_e.length;var ke=pt-Ze;if(Ze<pt)for(var Te=0;Te<ke;Te++)_e[Ze-1][0]==="z"||_e[Ze-1][0]==="Z"?_e.splice(Ze-2,0,_e[Ze-2]):_e.push(_e[Ze-1]),Ze+=1;return _e};function Ce(_e,me,Ge){for(var Ze=[].concat(_e),pt,Ht=1/(Ge+1),Je=De(me)[0],$e=1;$e<=Ge;$e++)Ht*=$e,pt=Math.floor(_e.length*Ht),pt===0?Ze.unshift([Je[0]*Ht+_e[pt][0]*(1-Ht),Je[1]*Ht+_e[pt][1]*(1-Ht)]):Ze.splice(pt,0,[Je[0]*Ht+_e[pt][0]*(1-Ht),Je[1]*Ht+_e[pt][1]*(1-Ht)]);return Ze}function De(_e){var me=[];switch(_e[0]){case"M":me.push([_e[1],_e[2]]);break;case"L":me.push([_e[1],_e[2]]);break;case"A":me.push([_e[6],_e[7]]);break;case"Q":me.push([_e[3],_e[4]]),me.push([_e[1],_e[2]]);break;case"T":me.push([_e[1],_e[2]]);break;case"C":me.push([_e[5],_e[6]]),me.push([_e[1],_e[2]]),me.push([_e[3],_e[4]]);break;case"S":me.push([_e[3],_e[4]]),me.push([_e[1],_e[2]]);break;case"H":me.push([_e[1],_e[1]]);break;case"V":me.push([_e[1],_e[1]]);break;default:}return me}var tt=function(_e,me){if(_e.length<=1)return _e;for(var Ge,Ze=0;Ze<me.length;Ze++)if(_e[Ze][0]!==me[Ze][0])switch(Ge=De(_e[Ze]),me[Ze][0]){case"M":_e[Ze]=["M"].concat(Ge[0]);break;case"L":_e[Ze]=["L"].concat(Ge[0]);break;case"A":_e[Ze]=[].concat(me[Ze]),_e[Ze][6]=Ge[0][0],_e[Ze][7]=Ge[0][1];break;case"Q":if(Ge.length<2)if(Ze>0)Ge=Ce(Ge,_e[Ze-1],1);else{_e[Ze]=me[Ze];break}_e[Ze]=["Q"].concat(Ge.reduce(function(pt,Ht){return pt.concat(Ht)},[]));break;case"T":_e[Ze]=["T"].concat(Ge[0]);break;case"C":if(Ge.length<3)if(Ze>0)Ge=Ce(Ge,_e[Ze-1],2);else{_e[Ze]=me[Ze];break}_e[Ze]=["C"].concat(Ge.reduce(function(pt,Ht){return pt.concat(Ht)},[]));break;case"S":if(Ge.length<2)if(Ze>0)Ge=Ce(Ge,_e[Ze-1],1);else{_e[Ze]=me[Ze];break}_e[Ze]=["S"].concat(Ge.reduce(function(pt,Ht){return pt.concat(Ht)},[]));break;default:_e[Ze]=me[Ze]}return _e}},8723:function(ct,N,k){"use strict";k.d(N,{$O:function(){return q},FE:function(){return w},mY:function(){return j}});var $=k(77341),K=k(67052);function w(Q,ie,te){var we=1;if((0,$.HD)(Q)&&(we=Q.split(`
`).length),we>1){var fe=W(ie,te);return ie*we+fe*(we-1)}return ie}function W(Q,ie){return ie?ie-Q:Q*.14}function j(Q,ie){var te=(0,K.L)(),we=0;if((0,$.kK)(Q)||Q==="")return we;if(te.save(),te.font=ie,(0,$.HD)(Q)&&Q.includes(`
`)){var fe=Q.split(`
`);(0,$.S6)(fe,function(ce){var J=te.measureText(ce).width;we<J&&(we=J)})}else we=te.measureText(Q).width;return te.restore(),we}function q(Q){var ie=Q.fontSize,te=Q.fontFamily,we=Q.fontWeight,fe=Q.fontStyle,ce=Q.fontVariant;return[fe,ce,we,ie+"px",te].join(" ").trim()}},77341:function(ct,N,k){"use strict";k.d(N,{As:function(){return K},CD:function(){return $.CD},HD:function(){return $.HD},Kn:function(){return $.Kn},S6:function(){return $.S6},UY:function(){return W},jC:function(){return $.jC},jU:function(){return w},kK:function(){return $.UM},mf:function(){return $.mf},pP:function(){return j}});var $=k(21030);function K(q,Q){var ie=q.indexOf(Q);ie!==-1&&q.splice(ie,1)}var w=typeof window!="undefined"&&typeof window.document!="undefined";function W(q,Q){if(q.isCanvas())return!0;for(var ie=Q.getParent(),te=!1;ie;){if(ie===q){te=!0;break}ie=ie.getParent()}return te}function j(q){return q.cfg.visible&&q.cfg.capture}},90857:function(ct){"use strict";var N=Object.prototype.hasOwnProperty,k="~";function $(){}Object.create&&($.prototype=Object.create(null),new $().__proto__||(k=!1));function K(q,Q,ie){this.fn=q,this.context=Q,this.once=ie||!1}function w(q,Q,ie,te,we){if(typeof ie!="function")throw new TypeError("The listener must be a function");var fe=new K(ie,te||q,we),ce=k?k+Q:Q;return q._events[ce]?q._events[ce].fn?q._events[ce]=[q._events[ce],fe]:q._events[ce].push(fe):(q._events[ce]=fe,q._eventsCount++),q}function W(q,Q){--q._eventsCount===0?q._events=new $:delete q._events[Q]}function j(){this._events=new $,this._eventsCount=0}j.prototype.eventNames=function(){var Q=[],ie,te;if(this._eventsCount===0)return Q;for(te in ie=this._events)N.call(ie,te)&&Q.push(k?te.slice(1):te);return Object.getOwnPropertySymbols?Q.concat(Object.getOwnPropertySymbols(ie)):Q},j.prototype.listeners=function(Q){var ie=k?k+Q:Q,te=this._events[ie];if(!te)return[];if(te.fn)return[te.fn];for(var we=0,fe=te.length,ce=new Array(fe);we<fe;we++)ce[we]=te[we].fn;return ce},j.prototype.listenerCount=function(Q){var ie=k?k+Q:Q,te=this._events[ie];return te?te.fn?1:te.length:0},j.prototype.emit=function(Q,ie,te,we,fe,ce){var J=k?k+Q:Q;if(!this._events[J])return!1;var M=this._events[J],E=arguments.length,ge,be;if(M.fn){switch(M.once&&this.removeListener(Q,M.fn,void 0,!0),E){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,ie),!0;case 3:return M.fn.call(M.context,ie,te),!0;case 4:return M.fn.call(M.context,ie,te,we),!0;case 5:return M.fn.call(M.context,ie,te,we,fe),!0;case 6:return M.fn.call(M.context,ie,te,we,fe,ce),!0}for(be=1,ge=new Array(E-1);be<E;be++)ge[be-1]=arguments[be];M.fn.apply(M.context,ge)}else{var ze=M.length,Be;for(be=0;be<ze;be++)switch(M[be].once&&this.removeListener(Q,M[be].fn,void 0,!0),E){case 1:M[be].fn.call(M[be].context);break;case 2:M[be].fn.call(M[be].context,ie);break;case 3:M[be].fn.call(M[be].context,ie,te);break;case 4:M[be].fn.call(M[be].context,ie,te,we);break;default:if(!ge)for(Be=1,ge=new Array(E-1);Be<E;Be++)ge[Be-1]=arguments[Be];M[be].fn.apply(M[be].context,ge)}}return!0},j.prototype.on=function(Q,ie,te){return w(this,Q,ie,te,!1)},j.prototype.once=function(Q,ie,te){return w(this,Q,ie,te,!0)},j.prototype.removeListener=function(Q,ie,te,we){var fe=k?k+Q:Q;if(!this._events[fe])return this;if(!ie)return W(this,fe),this;var ce=this._events[fe];if(ce.fn)ce.fn===ie&&(!we||ce.once)&&(!te||ce.context===te)&&W(this,fe);else{for(var J=0,M=[],E=ce.length;J<E;J++)(ce[J].fn!==ie||we&&!ce[J].once||te&&ce[J].context!==te)&&M.push(ce[J]);M.length?this._events[fe]=M.length===1?M[0]:M:W(this,fe)}return this},j.prototype.removeAllListeners=function(Q){var ie;return Q?(ie=k?k+Q:Q,this._events[ie]&&W(this,ie)):(this._events=new $,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=k,j.EventEmitter=j,ct.exports=j},32793:function(ct,N,k){"use strict";k.d(N,{wN:function(){return Ce},Ll:function(){return Se},x1:function(){return te},aH:function(){return Ze},lD:function(){return ze},Zr:function(){return $}});var $={};k.r($),k.d($,{distance:function(){return w},getBBoxByArray:function(){return j},getBBoxRange:function(){return q},isNumberEqual:function(){return W},piMod:function(){return Q}});var K=k(21030);function w(Je,$e,Te,Ye){var ft=Je-Te,ke=$e-Ye;return Math.sqrt(ft*ft+ke*ke)}function W(Je,$e){return Math.abs(Je-$e)<.001}function j(Je,$e){var Te=(0,K.VV)(Je),Ye=(0,K.VV)($e),ft=(0,K.Fp)(Je),ke=(0,K.Fp)($e);return{x:Te,y:Ye,width:ft-Te,height:ke-Ye}}function q(Je,$e,Te,Ye){return{minX:(0,K.VV)([Je,Te]),maxX:(0,K.Fp)([Je,Te]),minY:(0,K.VV)([$e,Ye]),maxY:(0,K.Fp)([$e,Ye])}}function Q(Je){return(Je+Math.PI*2)%(Math.PI*2)}var ie=k(31437),te={box:function(Je,$e,Te,Ye){return j([Je,Te],[$e,Ye])},length:function(Je,$e,Te,Ye){return w(Je,$e,Te,Ye)},pointAt:function(Je,$e,Te,Ye,ft){return{x:(1-ft)*Je+ft*Te,y:(1-ft)*$e+ft*Ye}},pointDistance:function(Je,$e,Te,Ye,ft,ke){var Ne=(Te-Je)*(ft-Je)+(Ye-$e)*(ke-$e);if(Ne<0)return w(Je,$e,ft,ke);var dt=(Te-Je)*(Te-Je)+(Ye-$e)*(Ye-$e);return Ne>dt?w(Te,Ye,ft,ke):this.pointToLine(Je,$e,Te,Ye,ft,ke)},pointToLine:function(Je,$e,Te,Ye,ft,ke){var Ne=[Te-Je,Ye-$e];if(ie.I6(Ne,[0,0]))return Math.sqrt((ft-Je)*(ft-Je)+(ke-$e)*(ke-$e));var dt=[-Ne[1],Ne[0]];ie.Fv(dt,dt);var Pt=[ft-Je,ke-$e];return Math.abs(ie.AK(Pt,dt))},tangentAngle:function(Je,$e,Te,Ye){return Math.atan2(Ye-$e,Te-Je)}},we=1e-4;function fe(Je,$e,Te,Ye,ft,ke){var Ne,dt=1/0,Pt=[Te,Ye],rr=20;ke&&ke>200&&(rr=ke/10);for(var xr=1/rr,ut=xr/10,nn=0;nn<=rr;nn++){var Gr=nn*xr,Xr=[ft.apply(null,Je.concat([Gr])),ft.apply(null,$e.concat([Gr]))],Nt=w(Pt[0],Pt[1],Xr[0],Xr[1]);Nt<dt&&(Ne=Gr,dt=Nt)}if(Ne===0)return{x:Je[0],y:$e[0]};if(Ne===1){var Yt=Je.length;return{x:Je[Yt-1],y:$e[Yt-1]}}dt=1/0;for(var nn=0;nn<32&&!(ut<we);nn++){var sr=Ne-ut,Dt=Ne+ut,Xr=[ft.apply(null,Je.concat([sr])),ft.apply(null,$e.concat([sr]))],Nt=w(Pt[0],Pt[1],Xr[0],Xr[1]);if(sr>=0&&Nt<dt)Ne=sr,dt=Nt;else{var Qt=[ft.apply(null,Je.concat([Dt])),ft.apply(null,$e.concat([Dt]))],Sr=w(Pt[0],Pt[1],Qt[0],Qt[1]);Dt<=1&&Sr<dt?(Ne=Dt,dt=Sr):ut*=.5}}return{x:ft.apply(null,Je.concat([Ne])),y:ft.apply(null,$e.concat([Ne]))}}function ce(Je,$e){for(var Te=0,Ye=Je.length,ft=0;ft<Ye;ft++){var ke=Je[ft],Ne=$e[ft],dt=Je[(ft+1)%Ye],Pt=$e[(ft+1)%Ye];Te+=w(ke,Ne,dt,Pt)}return Te/2}function J(Je,$e,Te,Ye){var ft=1-Ye;return ft*ft*Je+2*Ye*ft*$e+Ye*Ye*Te}function M(Je,$e,Te){var Ye=Je+Te-2*$e;if(W(Ye,0))return[.5];var ft=(Je-$e)/Ye;return ft<=1&&ft>=0?[ft]:[]}function E(Je,$e,Te,Ye){return 2*(1-Ye)*($e-Je)+2*Ye*(Te-$e)}function ge(Je,$e,Te,Ye,ft,ke,Ne){var dt=J(Je,Te,ft,Ne),Pt=J($e,Ye,ke,Ne),rr=te.pointAt(Je,$e,Te,Ye,Ne),xr=te.pointAt(Te,Ye,ft,ke,Ne);return[[Je,$e,rr.x,rr.y,dt,Pt],[dt,Pt,xr.x,xr.y,ft,ke]]}function be(Je,$e,Te,Ye,ft,ke,Ne){if(Ne===0)return(w(Je,$e,Te,Ye)+w(Te,Ye,ft,ke)+w(Je,$e,ft,ke))/2;var dt=ge(Je,$e,Te,Ye,ft,ke,.5),Pt=dt[0],rr=dt[1];return Pt.push(Ne-1),rr.push(Ne-1),be.apply(null,Pt)+be.apply(null,rr)}var ze={box:function(Je,$e,Te,Ye,ft,ke){var Ne=M(Je,Te,ft)[0],dt=M($e,Ye,ke)[0],Pt=[Je,ft],rr=[$e,ke];return Ne!==void 0&&Pt.push(J(Je,Te,ft,Ne)),dt!==void 0&&rr.push(J($e,Ye,ke,dt)),j(Pt,rr)},length:function(Je,$e,Te,Ye,ft,ke){return be(Je,$e,Te,Ye,ft,ke,3)},nearestPoint:function(Je,$e,Te,Ye,ft,ke,Ne,dt){return fe([Je,Te,ft],[$e,Ye,ke],Ne,dt,J)},pointDistance:function(Je,$e,Te,Ye,ft,ke,Ne,dt){var Pt=this.nearestPoint(Je,$e,Te,Ye,ft,ke,Ne,dt);return w(Pt.x,Pt.y,Ne,dt)},interpolationAt:J,pointAt:function(Je,$e,Te,Ye,ft,ke,Ne){return{x:J(Je,Te,ft,Ne),y:J($e,Ye,ke,Ne)}},divide:function(Je,$e,Te,Ye,ft,ke,Ne){return ge(Je,$e,Te,Ye,ft,ke,Ne)},tangentAngle:function(Je,$e,Te,Ye,ft,ke,Ne){var dt=E(Je,Te,ft,Ne),Pt=E($e,Ye,ke,Ne),rr=Math.atan2(Pt,dt);return Q(rr)}};function Be(Je,$e,Te,Ye,ft){var ke=1-ft;return ke*ke*ke*Je+3*$e*ft*ke*ke+3*Te*ft*ft*ke+Ye*ft*ft*ft}function Ue(Je,$e,Te,Ye,ft){var ke=1-ft;return 3*(ke*ke*($e-Je)+2*ke*ft*(Te-$e)+ft*ft*(Ye-Te))}function it(Je,$e,Te,Ye){var ft=-3*Je+9*$e-9*Te+3*Ye,ke=6*Je-12*$e+6*Te,Ne=3*$e-3*Je,dt=[],Pt,rr,xr;if(W(ft,0))W(ke,0)||(Pt=-Ne/ke,Pt>=0&&Pt<=1&&dt.push(Pt));else{var ut=ke*ke-4*ft*Ne;W(ut,0)?dt.push(-ke/(2*ft)):ut>0&&(xr=Math.sqrt(ut),Pt=(-ke+xr)/(2*ft),rr=(-ke-xr)/(2*ft),Pt>=0&&Pt<=1&&dt.push(Pt),rr>=0&&rr<=1&&dt.push(rr))}return dt}function ht(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){var rr=Be(Je,Te,ft,Ne,Pt),xr=Be($e,Ye,ke,dt,Pt),ut=te.pointAt(Je,$e,Te,Ye,Pt),nn=te.pointAt(Te,Ye,ft,ke,Pt),Gr=te.pointAt(ft,ke,Ne,dt,Pt),Xr=te.pointAt(ut.x,ut.y,nn.x,nn.y,Pt),Nt=te.pointAt(nn.x,nn.y,Gr.x,Gr.y,Pt);return[[Je,$e,ut.x,ut.y,Xr.x,Xr.y,rr,xr],[rr,xr,Nt.x,Nt.y,Gr.x,Gr.y,Ne,dt]]}function Le(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){if(Pt===0)return ce([Je,Te,ft,Ne],[$e,Ye,ke,dt]);var rr=ht(Je,$e,Te,Ye,ft,ke,Ne,dt,.5),xr=rr[0],ut=rr[1];return xr.push(Pt-1),ut.push(Pt-1),Le.apply(null,xr)+Le.apply(null,ut)}var Se={extrema:it,box:function(Je,$e,Te,Ye,ft,ke,Ne,dt){for(var Pt=[Je,Ne],rr=[$e,dt],xr=it(Je,Te,ft,Ne),ut=it($e,Ye,ke,dt),nn=0;nn<xr.length;nn++)Pt.push(Be(Je,Te,ft,Ne,xr[nn]));for(var nn=0;nn<ut.length;nn++)rr.push(Be($e,Ye,ke,dt,ut[nn]));return j(Pt,rr)},length:function(Je,$e,Te,Ye,ft,ke,Ne,dt){return Le(Je,$e,Te,Ye,ft,ke,Ne,dt,3)},nearestPoint:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt,rr,xr){return fe([Je,Te,ft,Ne],[$e,Ye,ke,dt],Pt,rr,Be,xr)},pointDistance:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt,rr,xr){var ut=this.nearestPoint(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt,rr,xr);return w(ut.x,ut.y,Pt,rr)},interpolationAt:Be,pointAt:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){return{x:Be(Je,Te,ft,Ne,Pt),y:Be($e,Ye,ke,dt,Pt)}},divide:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){return ht(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt)},tangentAngle:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){var rr=Ue(Je,Te,ft,Ne,Pt),xr=Ue($e,Ye,ke,dt,Pt);return Q(Math.atan2(xr,rr))}};function ye(Je,$e){var Te=Math.abs(Je);return $e>0?Te:Te*-1}var Ve={box:function(Je,$e,Te,Ye){return{x:Je-Te,y:$e-Ye,width:Te*2,height:Ye*2}},length:function(Je,$e,Te,Ye){return Math.PI*(3*(Te+Ye)-Math.sqrt((3*Te+Ye)*(Te+3*Ye)))},nearestPoint:function(Je,$e,Te,Ye,ft,ke){var Ne=Te,dt=Ye;if(Ne===0||dt===0)return{x:Je,y:$e};for(var Pt=ft-Je,rr=ke-$e,xr=Math.abs(Pt),ut=Math.abs(rr),nn=Ne*Ne,Gr=dt*dt,Xr=Math.PI/4,Nt,Yt,sr=0;sr<4;sr++){Nt=Ne*Math.cos(Xr),Yt=dt*Math.sin(Xr);var Dt=(nn-Gr)*Math.pow(Math.cos(Xr),3)/Ne,Qt=(Gr-nn)*Math.pow(Math.sin(Xr),3)/dt,Sr=Nt-Dt,Er=Yt-Qt,Fr=xr-Dt,zr=ut-Qt,le=Math.hypot(Er,Sr),H=Math.hypot(zr,Fr),re=le*Math.asin((Sr*zr-Er*Fr)/(le*H)),Re=re/Math.sqrt(nn+Gr-Nt*Nt-Yt*Yt);Xr+=Re,Xr=Math.min(Math.PI/2,Math.max(0,Xr))}return{x:Je+ye(Nt,Pt),y:$e+ye(Yt,rr)}},pointDistance:function(Je,$e,Te,Ye,ft,ke){var Ne=this.nearestPoint(Je,$e,Te,Ye,ft,ke);return w(Ne.x,Ne.y,ft,ke)},pointAt:function(Je,$e,Te,Ye,ft){var ke=2*Math.PI*ft;return{x:Je+Te*Math.cos(ke),y:$e+Ye*Math.sin(ke)}},tangentAngle:function(Je,$e,Te,Ye,ft){var ke=2*Math.PI*ft,Ne=Math.atan2(Ye*Math.cos(ke),-Te*Math.sin(ke));return Q(Ne)}};function je(Je,$e,Te,Ye,ft,ke,Ne,dt){return-1*Te*Math.cos(ft)*Math.sin(dt)-Ye*Math.sin(ft)*Math.cos(dt)}function Et(Je,$e,Te,Ye,ft,ke,Ne,dt){return-1*Te*Math.sin(ft)*Math.sin(dt)+Ye*Math.cos(ft)*Math.cos(dt)}function Oe(Je,$e,Te){return Math.atan(-$e/Je*Math.tan(Te))}function Qe(Je,$e,Te){return Math.atan($e/(Je*Math.tan(Te)))}function ne(Je,$e,Te,Ye,ft,ke){return Te*Math.cos(ft)*Math.cos(ke)-Ye*Math.sin(ft)*Math.sin(ke)+Je}function We(Je,$e,Te,Ye,ft,ke){return Te*Math.sin(ft)*Math.cos(ke)+Ye*Math.cos(ft)*Math.sin(ke)+$e}function oe(Je,$e,Te,Ye){var ft=Math.atan2(Ye*Je,Te*$e);return(ft+Math.PI*2)%(Math.PI*2)}function Fe(Je,$e,Te){return{x:Je*Math.cos(Te),y:$e*Math.sin(Te)}}function st(Je,$e,Te){var Ye=Math.cos(Te),ft=Math.sin(Te);return[Je*Ye-$e*ft,Je*ft+$e*Ye]}var Ce={box:function(Je,$e,Te,Ye,ft,ke,Ne){for(var dt=Oe(Te,Ye,ft),Pt=1/0,rr=-1/0,xr=[ke,Ne],ut=-Math.PI*2;ut<=Math.PI*2;ut+=Math.PI){var nn=dt+ut;ke<Ne?ke<nn&&nn<Ne&&xr.push(nn):Ne<nn&&nn<ke&&xr.push(nn)}for(var ut=0;ut<xr.length;ut++){var Gr=ne(Je,$e,Te,Ye,ft,xr[ut]);Gr<Pt&&(Pt=Gr),Gr>rr&&(rr=Gr)}for(var Xr=Qe(Te,Ye,ft),Nt=1/0,Yt=-1/0,sr=[ke,Ne],ut=-Math.PI*2;ut<=Math.PI*2;ut+=Math.PI){var Dt=Xr+ut;ke<Ne?ke<Dt&&Dt<Ne&&sr.push(Dt):Ne<Dt&&Dt<ke&&sr.push(Dt)}for(var ut=0;ut<sr.length;ut++){var Qt=We(Je,$e,Te,Ye,ft,sr[ut]);Qt<Nt&&(Nt=Qt),Qt>Yt&&(Yt=Qt)}return{x:Pt,y:Nt,width:rr-Pt,height:Yt-Nt}},length:function(Je,$e,Te,Ye,ft,ke,Ne){},nearestPoint:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){var rr=st(dt-Je,Pt-$e,-ft),xr=rr[0],ut=rr[1],nn=Ve.nearestPoint(0,0,Te,Ye,xr,ut),Gr=oe(Te,Ye,nn.x,nn.y);Gr<ke?nn=Fe(Te,Ye,ke):Gr>Ne&&(nn=Fe(Te,Ye,Ne));var Xr=st(nn.x,nn.y,ft);return{x:Xr[0]+Je,y:Xr[1]+$e}},pointDistance:function(Je,$e,Te,Ye,ft,ke,Ne,dt,Pt){var rr=this.nearestPoint(Je,$e,Te,Ye,dt,Pt);return w(rr.x,rr.y,dt,Pt)},pointAt:function(Je,$e,Te,Ye,ft,ke,Ne,dt){var Pt=(Ne-ke)*dt+ke;return{x:ne(Je,$e,Te,Ye,ft,Pt),y:We(Je,$e,Te,Ye,ft,Pt)}},tangentAngle:function(Je,$e,Te,Ye,ft,ke,Ne,dt){var Pt=(Ne-ke)*dt+ke,rr=je(Je,$e,Te,Ye,ft,ke,Ne,Pt),xr=Et(Je,$e,Te,Ye,ft,ke,Ne,Pt);return Q(Math.atan2(xr,rr))}};function De(Je){for(var $e=0,Te=[],Ye=0;Ye<Je.length-1;Ye++){var ft=Je[Ye],ke=Je[Ye+1],Ne=w(ft[0],ft[1],ke[0],ke[1]),dt={from:ft,to:ke,length:Ne};Te.push(dt),$e+=Ne}return{segments:Te,totalLength:$e}}function tt(Je){if(Je.length<2)return 0;for(var $e=0,Te=0;Te<Je.length-1;Te++){var Ye=Je[Te],ft=Je[Te+1];$e+=w(Ye[0],Ye[1],ft[0],ft[1])}return $e}function _e(Je,$e){if($e>1||$e<0||Je.length<2)return null;var Te=De(Je),Ye=Te.segments,ft=Te.totalLength;if(ft===0)return{x:Je[0][0],y:Je[0][1]};for(var ke=0,Ne=null,dt=0;dt<Ye.length;dt++){var Pt=Ye[dt],rr=Pt.from,xr=Pt.to,ut=Pt.length/ft;if($e>=ke&&$e<=ke+ut){var nn=($e-ke)/ut;Ne=te.pointAt(rr[0],rr[1],xr[0],xr[1],nn);break}ke+=ut}return Ne}function me(Je,$e){if($e>1||$e<0||Je.length<2)return 0;for(var Te=De(Je),Ye=Te.segments,ft=Te.totalLength,ke=0,Ne=0,dt=0;dt<Ye.length;dt++){var Pt=Ye[dt],rr=Pt.from,xr=Pt.to,ut=Pt.length/ft;if($e>=ke&&$e<=ke+ut){Ne=Math.atan2(xr[1]-rr[1],xr[0]-rr[0]);break}ke+=ut}return Ne}function Ge(Je,$e,Te){for(var Ye=1/0,ft=0;ft<Je.length-1;ft++){var ke=Je[ft],Ne=Je[ft+1],dt=te.pointDistance(ke[0],ke[1],Ne[0],Ne[1],$e,Te);dt<Ye&&(Ye=dt)}return Ye}var Ze={box:function(Je){for(var $e=[],Te=[],Ye=0;Ye<Je.length;Ye++){var ft=Je[Ye];$e.push(ft[0]),Te.push(ft[1])}return j($e,Te)},length:function(Je){return tt(Je)},pointAt:function(Je,$e){return _e(Je,$e)},pointDistance:function(Je,$e,Te){return Ge(Je,$e,Te)},tangentAngle:function(Je,$e){return me(Je,$e)}};function pt(Je){var $e=Je.slice(0);return Je.length&&$e.push(Je[0]),$e}var Ht={box:function(Je){return Ze.box(Je)},length:function(Je){return tt(pt(Je))},pointAt:function(Je,$e){return _e(pt(Je),$e)},pointDistance:function(Je,$e,Te){return Ge(pt(Je),$e,Te)},tangentAngle:function(Je,$e){return me(pt(Je),$e)}}},19372:function(ct,N,k){"use strict";k.d(N,{$Q:function(){return Ub},sg:function(){return kC},x1:function(){return JC},by:function(){return iT}});var $={};k.r($),k.d($,{assign:function(){return Jo},default:function(){return bs},defaultI18n:function(){return si},format:function(){return tc},parse:function(){return ho},setGlobalDateI18n:function(){return ao},setGlobalDateMasks:function(){return Sl}});var K={};k.r(K),k.d(K,{Arc:function(){return jd},DataMarker:function(){return sd},DataRegion:function(){return Ul},Html:function(){return at},Image:function(){return qc},Line:function(){return Kc},Region:function(){return wr},RegionFilter:function(){return Cl},Shape:function(){return Mp},Text:function(){return Bf}});var w={};k.r(w),k.d(w,{ellipsisHead:function(){return hr},ellipsisMiddle:function(){return lr},ellipsisTail:function(){return Rr},getDefault:function(){return dr}});var W={};k.r(W),k.d(W,{equidistance:function(){return Pi},equidistanceWithReverseBoth:function(){return ta},getDefault:function(){return An},reserveBoth:function(){return oi},reserveFirst:function(){return Ln},reserveLast:function(){return pi}});var j={};k.r(j),k.d(j,{fixedAngle:function(){return Bi},getDefault:function(){return _o},unfixedAngle:function(){return Ia}});var q={};k.r(q),k.d(q,{autoEllipsis:function(){return w},autoHide:function(){return W},autoRotate:function(){return j}});var Q={};k.r(Q),k.d(Q,{Base:function(){return ha},Circle:function(){return Mu},Html:function(){return lc},Line:function(){return Ls}});var ie={};k.r(ie),k.d(ie,{CONTAINER_CLASS:function(){return Al},CROSSHAIR_X:function(){return Bv},CROSSHAIR_Y:function(){return vg},LIST_CLASS:function(){return Vl},LIST_ITEM_CLASS:function(){return zf},MARKER_CLASS:function(){return Rp},NAME_CLASS:function(){return Ml},TITLE_CLASS:function(){return Zl},VALUE_CLASS:function(){return Uf}});var te={};k.r(te),k.d(te,{Base:function(){return vc},Circle:function(){return Z0},Ellipse:function(){return V0},Image:function(){return Ed},Line:function(){return j0},Marker:function(){return p_},Path:function(){return Sx},Polygon:function(){return Sf},Polyline:function(){return YR},Rect:function(){return UE},Text:function(){return VE}});var we={};k.r(we),k.d(we,{Canvas:function(){return Mx},Group:function(){return Dm},Shape:function(){return te},getArcParams:function(){return xd},version:function(){return Rx}});var fe={};k.r(fe),k.d(fe,{Base:function(){return af},Circle:function(){return e3},Dom:function(){return YE},Ellipse:function(){return n3},Image:function(){return Bg},Line:function(){return x_},Marker:function(){return kx},Path:function(){return Dx},Polygon:function(){return b_},Polyline:function(){return Lx},Rect:function(){return oB},Text:function(){return t2}});var ce={};k.r(ce),k.d(ce,{Canvas:function(){return b2},Group:function(){return __},Shape:function(){return fe},version:function(){return S2}});var J={};k.r(J),k.d(J,{cluster:function(){return BL},hierarchy:function(){return Qg},pack:function(){return bS},packEnclose:function(){return QT},packSiblings:function(){return rA},partition:function(){return jA},stratify:function(){return ZL},tree:function(){return $L},treemap:function(){return k1},treemapBinary:function(){return XL},treemapDice:function(){return Ly},treemapResquarify:function(){return KL},treemapSlice:function(){return O1},treemapSliceDice:function(){return YL},treemapSquarify:function(){return $A}});var M=k(97582),E=k(21030),ge;(function(i){i.FORE="fore",i.MID="mid",i.BG="bg"})(ge||(ge={}));var be;(function(i){i.TOP="top",i.TOP_LEFT="top-left",i.TOP_RIGHT="top-right",i.RIGHT="right",i.RIGHT_TOP="right-top",i.RIGHT_BOTTOM="right-bottom",i.LEFT="left",i.LEFT_TOP="left-top",i.LEFT_BOTTOM="left-bottom",i.BOTTOM="bottom",i.BOTTOM_LEFT="bottom-left",i.BOTTOM_RIGHT="bottom-right",i.RADIUS="radius",i.CIRCLE="circle",i.NONE="none"})(be||(be={}));var ze;(function(i){i.AXIS="axis",i.GRID="grid",i.LEGEND="legend",i.TOOLTIP="tooltip",i.ANNOTATION="annotation",i.SLIDER="slider",i.SCROLLBAR="scrollbar",i.OTHER="other"})(ze||(ze={}));var Be={FORE:3,MID:2,BG:1},Ue;(function(i){i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_PAINT="beforepaint",i.AFTER_PAINT="afterpaint",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata",i.BEFORE_CLEAR="beforeclear",i.AFTER_CLEAR="afterclear",i.BEFORE_DESTROY="beforedestroy",i.BEFORE_CHANGE_SIZE="beforechangesize",i.AFTER_CHANGE_SIZE="afterchangesize"})(Ue||(Ue={}));var it;(function(i){i.BEFORE_DRAW_ANIMATE="beforeanimate",i.AFTER_DRAW_ANIMATE="afteranimate",i.BEFORE_RENDER_LABEL="beforerenderlabel",i.AFTER_RENDER_LABEL="afterrenderlabel"})(it||(it={}));var ht;(function(i){i.MOUSE_ENTER="plot:mouseenter",i.MOUSE_DOWN="plot:mousedown",i.MOUSE_MOVE="plot:mousemove",i.MOUSE_UP="plot:mouseup",i.MOUSE_LEAVE="plot:mouseleave",i.TOUCH_START="plot:touchstart",i.TOUCH_MOVE="plot:touchmove",i.TOUCH_END="plot:touchend",i.TOUCH_CANCEL="plot:touchcancel",i.CLICK="plot:click",i.DBLCLICK="plot:dblclick",i.CONTEXTMENU="plot:contextmenu",i.LEAVE="plot:leave",i.ENTER="plot:enter"})(ht||(ht={}));var Le;(function(i){i.ACTIVE="active",i.INACTIVE="inactive",i.SELECTED="selected",i.DEFAULT="default"})(Le||(Le={}));var Se=["color","shape","size"],ye="_origin",Ve=1,je=1,Et=.25,Oe={};function Qe(i){var n=Oe[i];if(!n)throw new Error("G engine '".concat(i,"' is not exist, please register it at first."));return n}function ne(i,n){Oe[i]=n}var We=k(6056),oe=k(45442);function Fe(i){var n=getComputedStyle(i);return{width:(i.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(i.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function st(i){return typeof i=="number"&&!isNaN(i)}function Ce(i,n,t,s){var l=t,f=s;if(n){var d=Fe(i);l=d.width?d.width:l,f=d.height?d.height:f}return{width:Math.max(st(l)?l:Ve,Ve),height:Math.max(st(f)?f:je,je)}}function De(i){var n=i.parentNode;n&&n.removeChild(i)}var tt=k(90494),_e=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this)||this;s.destroyed=!1;var l=t.visible,f=l===void 0?!0:l;return s.visible=f,s}return n.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},n.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},n.prototype.destroy=function(){this.off(),this.destroyed=!0},n.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},n}(tt.Z),me=_e,Ge=k(98190),Ze=0,pt=1/2,Ht=1/2,Je=.05,$e=function(){function i(n){var t=n.xField,s=n.yField,l=n.adjustNames,f=l===void 0?["x","y"]:l,d=n.dimValuesMap;this.adjustNames=f,this.xField=t,this.yField=s,this.dimValuesMap=d}return i.prototype.isAdjust=function(n){return this.adjustNames.indexOf(n)>=0},i.prototype.getAdjustRange=function(n,t,s){var l=this.yField,f=s.indexOf(t),d=s.length,m,x;return!l&&this.isAdjust("y")?(m=0,x=1):d>1?(m=s[f===0?0:f-1],x=s[f===d-1?d-1:f+1],f!==0?m+=(t-m)/2:m-=(x-t)/2,f!==d-1?x-=(x-t)/2:x+=(t-s[d-2])/2):(m=t===0?0:t-.5,x=t===0?1:t+.5),{pre:m,next:x}},i.prototype.adjustData=function(n,t){var s=this,l=this.getDimValues(t);E.S6(n,function(f,d){E.S6(l,function(m,x){s.adjustDim(x,m,f,d)})})},i.prototype.groupData=function(n,t){return E.S6(n,function(s){s[t]===void 0&&(s[t]=Ze)}),E.vM(n,t)},i.prototype.adjustDim=function(n,t,s,l){},i.prototype.getDimValues=function(n){var t=this,s=t.xField,l=t.yField,f=E.f0({},this.dimValuesMap),d=[];if(s&&this.isAdjust("x")&&d.push(s),l&&this.isAdjust("y")&&d.push(l),d.forEach(function(x){f&&f[x]||(f[x]=E.I(n,x).sort(function(T,P){return T-P}))}),!l&&this.isAdjust("y")){var m="y";f[m]=[Ze,1]}return f},i}(),Te=$e,Ye={},ft=function(i){return Ye[i.toLowerCase()]},ke=function(i,n){if(ft(i))throw new Error("Adjust type '"+i+"' existed.");Ye[i.toLowerCase()]=n},Ne=k(52677),dt=k.n(Ne);var Pt=function(n,t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])},Pt(n,t)};function rr(i,n){Pt(i,n);function t(){this.constructor=i}i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var xr=function(){return xr=Object.assign||function(t){for(var s,l=1,f=arguments.length;l<f;l++){s=arguments[l];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(t[d]=s[d])}return t},xr.apply(this,arguments)};function ut(i,n){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(i);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(i,s[l])&&(t[s[l]]=i[s[l]]);return t}function nn(i,n,t,s){var l=arguments.length,f=l<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,t):s,d;if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,n,t,s);else for(var m=i.length-1;m>=0;m--)(d=i[m])&&(f=(l<3?d(f):l>3?d(n,t,f):d(n,t))||f);return l>3&&f&&Object.defineProperty(n,t,f),f}function Gr(i,n){return function(t,s){n(t,s,i)}}function Xr(i,n){if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,n)}function Nt(i,n,t,s){function l(f){return f instanceof t?f:new t(function(d){d(f)})}return new(t||(t=Promise))(function(f,d){function m(P){try{T(s.next(P))}catch(D){d(D)}}function x(P){try{T(s.throw(P))}catch(D){d(D)}}function T(P){P.done?f(P.value):l(P.value).then(m,x)}T((s=s.apply(i,n||[])).next())})}function Yt(i,n){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,l,f,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(T){return function(P){return x([T,P])}}function x(T){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(f=T[0]&2?l.return:T[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,T[1])).done)return f;switch(l=0,f&&(T=[T[0]&2,f.value]),T[0]){case 0:case 1:f=T;break;case 4:return t.label++,{value:T[1],done:!1};case 5:t.label++,l=T[1],T=[0];continue;case 7:T=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(T[0]===6||T[0]===2)){t=0;continue}if(T[0]===3&&(!f||T[1]>f[0]&&T[1]<f[3])){t.label=T[1];break}if(T[0]===6&&t.label<f[1]){t.label=f[1],f=T;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(T);break}f[2]&&t.ops.pop(),t.trys.pop();continue}T=n.call(i,t)}catch(P){T=[6,P],l=0}finally{s=f=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function sr(i,n,t,s){s===void 0&&(s=t),i[s]=n[t]}function Dt(i,n){for(var t in i)t!=="default"&&!n.hasOwnProperty(t)&&(n[t]=i[t])}function Qt(i){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&i[n],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(i,n){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),l,f=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)f.push(l.value)}catch(m){d={error:m}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(d)throw d.error}}return f}function Er(){for(var i=[],n=0;n<arguments.length;n++)i=i.concat(Sr(arguments[n]));return i}function Fr(){for(var i=0,n=0,t=arguments.length;n<t;n++)i+=arguments[n].length;for(var s=Array(i),l=0,n=0;n<t;n++)for(var f=arguments[n],d=0,m=f.length;d<m;d++,l++)s[l]=f[d];return s}function zr(i){return this instanceof zr?(this.v=i,this):new zr(i)}function le(i,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,n||[]),l,f=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(B){s[B]&&(l[B]=function(U){return new Promise(function(Y,se){f.push([B,U,Y,se])>1||m(B,U)})})}function m(B,U){try{x(s[B](U))}catch(Y){D(f[0][3],Y)}}function x(B){B.value instanceof zr?Promise.resolve(B.value.v).then(T,P):D(f[0][2],B)}function T(B){m("next",B)}function P(B){m("throw",B)}function D(B,U){B(U),f.shift(),f.length&&m(f[0][0],f[0][1])}}function H(i){var n,t;return n={},s("next"),s("throw",function(l){throw l}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(l,f){n[l]=i[l]?function(d){return(t=!t)?{value:zr(i[l](d)),done:l==="return"}:f?f(d):d}:f}}function re(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],t;return n?n.call(i):(i=typeof Qt=="function"?Qt(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(f){t[f]=i[f]&&function(d){return new Promise(function(m,x){d=i[f](d),l(m,x,d.done,d.value)})}}function l(f,d,m,x){Promise.resolve(x).then(function(T){f({value:T,done:m})},d)}}function Re(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i}function Ke(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(n[t]=i[t]);return n.default=i,n}function Tt(i){return i&&i.__esModule?i:{default:i}}function or(i,n){if(!n.has(i))throw new TypeError("attempted to get private field on non-instance");return n.get(i)}function jt(i,n,t){if(!n.has(i))throw new TypeError("attempted to set private field on non-instance");return n.set(i,t),t}var wt=function(i){rr(n,i);function n(t){var s=i.call(this,t)||this;s.cacheMap={},s.adjustDataArray=[],s.mergeData=[];var l=t.marginRatio,f=l===void 0?pt:l,d=t.dodgeRatio,m=d===void 0?Ht:d,x=t.dodgeBy,T=t.intervalPadding,P=t.dodgePadding,D=t.xDimensionLength,B=t.groupNum,U=t.defaultSize,Y=t.maxColumnWidth,se=t.minColumnWidth,xe=t.columnWidthRatio,Ee=t.customOffset;return s.marginRatio=f,s.dodgeRatio=m,s.dodgeBy=x,s.intervalPadding=T,s.dodgePadding=P,s.xDimensionLegenth=D,s.groupNum=B,s.defaultSize=U,s.maxColumnWidth=Y,s.minColumnWidth=se,s.columnWidthRatio=xe,s.customOffset=Ee,s}return n.prototype.process=function(t){var s=E.d9(t),l=E.xH(s),f=this.dodgeBy,d=f?E.ru(l,f):s;return this.cacheMap={},this.adjustDataArray=d,this.mergeData=l,this.adjustData(d,l),this.adjustDataArray=[],this.mergeData=[],s},n.prototype.adjustDim=function(t,s,l,f){var d=this,m=this.customOffset,x=this.getDistribution(t),T=this.groupData(l,t);return E.S6(T,function(P,D){var B;s.length===1?B={pre:s[0]-1,next:s[0]+1}:B=d.getAdjustRange(t,parseFloat(D),s),E.S6(P,function(U){var Y=U[t],se=x[Y],xe=se.indexOf(f);if(E.UM(m))U[t]=d.getDodgeOffset(B,xe,se.length);else{var Ee=B.pre,rt=B.next;U[t]=E.mf(m)?m(U,B):(Ee+rt)/2+m}})}),[]},n.prototype.getDodgeOffset=function(t,s,l){var f=this,d=f.dodgeRatio,m=f.marginRatio,x=f.intervalPadding,T=f.dodgePadding,P=t.pre,D=t.next,B=D-P,U;if(!E.UM(x)&&E.UM(T)&&x>=0){var Y=this.getIntervalOnlyOffset(l,s);U=P+Y}else if(!E.UM(T)&&E.UM(x)&&T>=0){var Y=this.getDodgeOnlyOffset(l,s);U=P+Y}else if(!E.UM(x)&&!E.UM(T)&&x>=0&&T>=0){var Y=this.getIntervalAndDodgeOffset(l,s);U=P+Y}else{var se=B*d/l,xe=m*se,Y=1/2*(B-l*se-(l-1)*xe)+((s+1)*se+s*xe)-1/2*se-1/2*B;U=(P+D)/2+Y}return U},n.prototype.getIntervalOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.intervalPadding,m=l.xDimensionLegenth,x=l.groupNum,T=l.dodgeRatio,P=l.maxColumnWidth,D=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,Y=(1-(x-1)*U)/x*T/(t-1),se=((1-U*(x-1))/x-Y*(t-1))/t;if(se=E.UM(B)?se:1/x/t*B,!E.UM(P)){var xe=P/m;se=Math.min(se,xe)}if(!E.UM(D)){var Ee=D/m;se=Math.max(se,Ee)}se=f?f/m:se,Y=((1-(x-1)*U)/x-t*se)/(t-1);var rt=((1/2+s)*se+s*Y+1/2*U)*x-U/2;return rt},n.prototype.getDodgeOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,T=l.marginRatio,P=l.maxColumnWidth,D=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,Y=1*T/(x-1),se=((1-Y*(x-1))/x-U*(t-1))/t;if(se=B?1/x/t*B:se,!E.UM(P)){var xe=P/m;se=Math.min(se,xe)}if(!E.UM(D)){var Ee=D/m;se=Math.max(se,Ee)}se=f?f/m:se,Y=(1-(se*t+U*(t-1))*x)/(x-1);var rt=((1/2+s)*se+s*U+1/2*Y)*x-Y/2;return rt},n.prototype.getIntervalAndDodgeOffset=function(t,s){var l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,T=f/m,P=d/m,D=((1-T*(x-1))/x-P*(t-1))/t,B=((1/2+s)*D+s*P+1/2*T)*x-T/2;return B},n.prototype.getDistribution=function(t){var s=this.adjustDataArray,l=this.cacheMap,f=l[t];return f||(f={},E.S6(s,function(d,m){var x=E.I(d,t);x.length||x.push(0),E.S6(x,function(T){f[T]||(f[T]=[]),f[T].push(m)})}),l[t]=f),f},n}(Te),It=wt;function de(i,n){return(n-i)*Math.random()+i}var pe=function(i){rr(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.process=function(t){var s=E.d9(t),l=E.xH(s);return this.adjustData(s,l),s},n.prototype.adjustDim=function(t,s,l){var f=this,d=this.groupData(l,t);return E.S6(d,function(m,x){return f.adjustGroup(m,t,parseFloat(x),s)})},n.prototype.getAdjustOffset=function(t){var s=t.pre,l=t.next,f=(l-s)*Je;return de(s+f,l-f)},n.prototype.adjustGroup=function(t,s,l,f){var d=this,m=this.getAdjustRange(s,l,f);return E.S6(t,function(x){x[s]=d.getAdjustOffset(m)}),t},n}(Te),Me=pe,et=E.Ct,St=function(i){rr(n,i);function n(t){var s=i.call(this,t)||this,l=t.adjustNames,f=l===void 0?["y"]:l,d=t.height,m=d===void 0?NaN:d,x=t.size,T=x===void 0?10:x,P=t.reverseOrder,D=P===void 0?!1:P;return s.adjustNames=f,s.height=m,s.size=T,s.reverseOrder=D,s}return n.prototype.process=function(t){var s=this,l=s.yField,f=s.reverseOrder,d=l?this.processStack(t):this.processOneDimStack(t);return f?this.reverse(d):d},n.prototype.reverse=function(t){return t.slice(0).reverse()},n.prototype.processStack=function(t){var s=this,l=s.xField,f=s.yField,d=s.reverseOrder,m=d?this.reverse(t):t,x=new et,T=new et;return m.map(function(P){return P.map(function(D){var B,U=E.U2(D,l,0),Y=E.U2(D,[f]),se=U.toString();if(Y=E.kJ(Y)?Y[1]:Y,!E.UM(Y)){var xe=Y>=0?x:T;xe.has(se)||xe.set(se,0);var Ee=xe.get(se),rt=Y+Ee;return xe.set(se,rt),xr(xr({},D),(B={},B[f]=[Ee,rt],B))}return D})})},n.prototype.processOneDimStack=function(t){var s=this,l=this,f=l.xField,d=l.height,m=l.reverseOrder,x="y",T=m?this.reverse(t):t,P=new et;return T.map(function(D){return D.map(function(B){var U,Y=s.size,se=B[f],xe=Y*2/d;P.has(se)||P.set(se,xe/2);var Ee=P.get(se);return P.set(se,Ee+xe),xr(xr({},B),(U={},U[x]=Ee,U))})})},n}(Te),Gt=St,gr=function(i){rr(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.process=function(t){var s=E.xH(t),l=this,f=l.xField,d=l.yField,m=this.getXValuesMaxMap(s),x=Math.max.apply(Math,Object.keys(m).map(function(T){return m[T]}));return E.UI(t,function(T){return E.UI(T,function(P){var D,B,U=P[d],Y=P[f];if(E.kJ(U)){var se=(x-m[Y])/2;return xr(xr({},P),(D={},D[d]=E.UI(U,function(Ee){return se+Ee}),D))}var xe=(x-U)/2;return xr(xr({},P),(B={},B[d]=[xe,U+xe],B))})})},n.prototype.getXValuesMaxMap=function(t){var s=this,l=this,f=l.xField,d=l.yField,m=E.vM(t,function(x){return x[f]});return E.Q8(m,function(x){return s.getDimMaxValue(x,d)})},n.prototype.getDimMaxValue=function(t,s){var l=E.UI(t,function(d){return E.U2(d,s,[])}),f=E.xH(l);return Math.max.apply(Math,f)},n}(Te),At=gr;ke("Dodge",It),ke("Jitter",Me),ke("Stack",Gt),ke("Symmetric",At);var ot=function(i,n){return(0,E.HD)(n)?n:i.invert(i.scale(n))},Ot=function(){function i(n){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(n)}return i.prototype.mapping=function(){for(var n=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=t.map(function(f,d){return n._toOriginParam(f,n.scales[d])});return this.callback.apply(this,l)},i.prototype.getLinearValue=function(n){var t=this.values.length-1,s=Math.floor(t*n),l=t*n-s,f=this.values[s],d=s===t?f:this.values[s+1];return f+(d-f)*l},i.prototype.getNames=function(){for(var n=this.scales,t=this.names,s=Math.min(n.length,t.length),l=[],f=0;f<s;f+=1)l.push(t[f]);return l},i.prototype.getFields=function(){return this.scales.map(function(n){return n.field})},i.prototype.getScale=function(n){return this.scales[this.names.indexOf(n)]},i.prototype.defaultCallback=function(){for(var n=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length===0?this.values:t.map(function(l,f){var d=n.scales[f];return d.type==="identity"?d.values[0]:n._getAttributeValue(d,l)})},i.prototype._parseCfg=function(n){var t=this,s=n.type,l=s===void 0?"base":s,f=n.names,d=f===void 0?[]:f,m=n.scales,x=m===void 0?[]:m,T=n.values,P=T===void 0?[]:T,D=n.callback;this.type=l,this.scales=x,this.values=P,this.names=d,this.callback=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];if(D){var Y=D.apply(void 0,B);if(!(0,E.UM)(Y))return[Y]}return t.defaultCallback.apply(t,B)}},i.prototype._getAttributeValue=function(n,t){if(n.isCategory&&!this.linear){var s=n.translate(t);return this.values[s%this.values.length]}var l=n.scale(t);return this.getLinearValue(l)},i.prototype._toOriginParam=function(n,t){return t.isLinear?n:(0,E.kJ)(n)?n.map(function(s){return ot(t,s)}):ot(t,n)},i}(),yr=Ot,kr=/rgba?\(([\s.,0-9]+)\)/,Ft=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Mn=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,qn=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,ri=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},un=function(){var i=document.createElement("i");return i.title="Web Colour Picker",i.style.display="none",document.body.appendChild(i),i},Yn=function(i,n,t,s){return i[s]+(n[s]-i[s])*t};function jn(i){return"#"+aa(i[0])+aa(i[1])+aa(i[2])}var Kn=function(i){return[parseInt(i.substr(1,2),16),parseInt(i.substr(3,2),16),parseInt(i.substr(5,2),16)]},aa=function(i){var n=Math.round(i).toString(16);return n.length===1?"0"+n:n},vi=function(i,n){var t=isNaN(Number(n))||n<0?0:n>1?1:Number(n),s=i.length-1,l=Math.floor(s*t),f=s*t-l,d=i[l],m=l===s?d:i[l+1];return jn([Yn(d,m,f,0),Yn(d,m,f,1),Yn(d,m,f,2)])},da,Oa=function(i){if(i[0]==="#"&&i.length===7)return i;da||(da=un()),da.style.color=i;var n=document.defaultView.getComputedStyle(da,"").getPropertyValue("color"),t=kr.exec(n),s=t[1].split(/\s*,\s*/).map(function(l){return Number(l)});return n=jn(s),n},xa=function(i){var n=(0,E.HD)(i)?i.split("-"):i,t=(0,E.UI)(n,function(s){return Kn(s.indexOf("#")===-1?Oa(s):s)});return function(s){return vi(t,s)}},Va=function(i){if(ri(i)){var n,t=void 0;if(i[0]==="l"){var s=Ft.exec(i),l=+s[1]+90;t=s[2],n="linear-gradient("+l+"deg, "}else if(i[0]==="r"){n="radial-gradient(";var s=Mn.exec(i);t=s[4]}var f=t.match(qn);return(0,E.S6)(f,function(d,m){var x=d.split(":");n+=x[1]+" "+x[0]*100+"%",m!==f.length-1&&(n+=", ")}),n+=")",n}return i},Sa={rgb2arr:Kn,gradient:xa,toRGB:(0,E.HP)(Oa),toCSSGradient:Va},gs=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="color",s.names=["color"],(0,E.HD)(s.values)&&(s.linear=!0),s.gradient=Sa.gradient(s.values),s}return n.prototype.getLinearValue=function(t){return this.gradient(t)},n}(yr),io=gs,Oo=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="opacity",s.names=["opacity"],s}return n}(yr),ai=Oo,_i=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.names=["x","y"],s.type="position",s}return n.prototype.mapping=function(t,s){var l=this.scales,f=l[0],d=l[1];return(0,E.UM)(t)||(0,E.UM)(s)?[]:[(0,E.kJ)(t)?t.map(function(m){return f.scale(m)}):f.scale(t),(0,E.kJ)(s)?s.map(function(m){return d.scale(m)}):d.scale(s)]},n}(yr),ea=_i,Ha=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="shape",s.names=["shape"],s}return n.prototype.getLinearValue=function(t){var s=Math.round((this.values.length-1)*t);return this.values[s]},n}(yr),ms=Ha,lo=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.type="size",s.names=["size"],s}return n}(yr),ko=lo,cr={};function kt(i){return cr[i]}function qt(i,n){cr[i]=n}var Ar=function(){function i(n){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=n,this.initCfg(),this.init()}return i.prototype.translate=function(n){return n},i.prototype.change=function(n){(0,E.f0)(this.__cfg__,n),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var n=this;return(0,E.UI)(this.ticks,function(t,s){return(0,E.Kn)(t)?t:{text:n.getText(t,s),tickValue:t,value:n.scale(t)}})},i.prototype.getText=function(n,t){var s=this.formatter,l=s?s(n,t):n;return(0,E.UM)(l)||!(0,E.mf)(l.toString)?"":l.toString()},i.prototype.getConfig=function(n){return this.__cfg__[n]},i.prototype.init=function(){(0,E.f0)(this,this.__cfg__),this.setDomain(),(0,E.xb)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var n=this.tickMethod,t=[];if((0,E.HD)(n)){var s=kt(n);if(!s)throw new Error("There is no method to to calculate ticks!");t=s(this)}else(0,E.mf)(n)&&(t=n(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(n,t,s){return(0,E.hj)(n)?(n-t)/(s-t):NaN},i.prototype.calcValue=function(n,t,s){return t+n*(s-t)},i}(),tn=Ar,Pn=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return n.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},n.prototype.translate=function(t){this.buildIndexMap();var s=this.translateIndexMap.get(t);return s===void 0&&(s=(0,E.hj)(t)?t:NaN),s},n.prototype.scale=function(t){var s=this.translate(t),l=this.calcPercent(s,this.min,this.max);return this.calcValue(l,this.rangeMin(),this.rangeMax())},n.prototype.invert=function(t){var s=this.max-this.min,l=this.calcPercent(t,this.rangeMin(),this.rangeMax()),f=Math.round(s*l)+this.min;return f<this.min||f>this.max?NaN:this.values[f]},n.prototype.getText=function(t){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var f=t;return(0,E.hj)(t)&&!this.values.includes(t)&&(f=this.values[f]),i.prototype.getText.apply(this,(0,M.pr)([f],s))},n.prototype.initCfg=function(){this.tickMethod="cat"},n.prototype.setDomain=function(){if((0,E.UM)(this.getConfig("min"))&&(this.min=0),(0,E.UM)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},n}(tn),Bn=Pn,Cn=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ai="\\d\\d?",Yi="\\d\\d",Wo="\\d{3}",os="\\d{4}",wu="[^\\s]+",Do=/\[([^]*?)\]/gm;function Qa(i,n){for(var t=[],s=0,l=i.length;s<l;s++)t.push(i[s].substr(0,n));return t}var pu=function(i){return function(n,t){var s=t[i].map(function(f){return f.toLowerCase()}),l=s.indexOf(n.toLowerCase());return l>-1?l:null}};function Jo(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var s=0,l=n;s<l.length;s++){var f=l[s];for(var d in f)i[d]=f[d]}return i}var Zt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Jt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ur=Qa(Jt,3),Tn=Qa(Zt,3),si={dayNamesShort:Tn,dayNames:Zt,monthNamesShort:Ur,monthNames:Jt,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},Hi=Jo({},si),ao=function(i){return Hi=Jo(Hi,i)},Us=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},wo=function(i,n){for(n===void 0&&(n=2),i=String(i);i.length<n;)i="0"+i;return i},Lo={D:function(i){return String(i.getDate())},DD:function(i){return wo(i.getDate())},Do:function(i,n){return n.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return wo(i.getDay())},ddd:function(i,n){return n.dayNamesShort[i.getDay()]},dddd:function(i,n){return n.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return wo(i.getMonth()+1)},MMM:function(i,n){return n.monthNamesShort[i.getMonth()]},MMMM:function(i,n){return n.monthNames[i.getMonth()]},YY:function(i){return wo(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return wo(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return wo(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return wo(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return wo(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return wo(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return wo(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return wo(i.getMilliseconds(),3)},a:function(i,n){return i.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(i,n){return i.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(i){var n=i.getTimezoneOffset();return(n>0?"-":"+")+wo(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4)},Z:function(i){var n=i.getTimezoneOffset();return(n>0?"-":"+")+wo(Math.floor(Math.abs(n)/60),2)+":"+wo(Math.abs(n)%60,2)}},Hu=function(i){return+i-1},cf=[null,Ai],rh=[null,wu],nh=["isPm",wu,function(i,n){var t=i.toLowerCase();return t===n.amPm[0]?0:t===n.amPm[1]?1:null}],du=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var n=(i+"").match(/([+-]|\d\d)/gi);if(n){var t=+n[1]*60+parseInt(n[2],10);return n[0]==="+"?t:-t}return 0}],ec={D:["day",Ai],DD:["day",Yi],Do:["day",Ai+wu,function(i){return parseInt(i,10)}],M:["month",Ai,Hu],MM:["month",Yi,Hu],YY:["year",Yi,function(i){var n=new Date,t=+(""+n.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Ai,void 0,"isPm"],hh:["hour",Yi,void 0,"isPm"],H:["hour",Ai],HH:["hour",Yi],m:["minute",Ai],mm:["minute",Yi],s:["second",Ai],ss:["second",Yi],YYYY:["year",os],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",Yi,function(i){return+i*10}],SSS:["millisecond",Wo],d:cf,dd:cf,ddd:rh,dddd:rh,MMM:["month",wu,pu("monthNamesShort")],MMMM:["month",wu,pu("monthNames")],a:nh,A:nh,ZZ:du,Z:du},ru={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Sl=function(i){return Jo(ru,i)},tc=function(i,n,t){if(n===void 0&&(n=ru.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");n=ru[n]||n;var s=[];n=n.replace(Do,function(f,d){return s.push(d),"@@@"});var l=Jo(Jo({},Hi),t);return n=n.replace(Cn,function(f){return Lo[f](i,l)}),n.replace(/@@@/g,function(){return s.shift()})};function ho(i,n,t){if(t===void 0&&(t={}),typeof n!="string")throw new Error("Invalid format in fecha parse");if(n=ru[n]||n,i.length>1e3)return null;var s=new Date,l={year:s.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},f=[],d=[],m=n.replace(Do,function(xt,Bt){return d.push(Us(Bt)),"@@@"}),x={},T={};m=Us(m).replace(Cn,function(xt){var Bt=ec[xt],_r=Bt[0],Or=Bt[1],Wr=Bt[3];if(x[_r])throw new Error("Invalid format. "+_r+" specified twice in format");return x[_r]=!0,Wr&&(T[Wr]=!0),f.push(Bt),"("+Or+")"}),Object.keys(T).forEach(function(xt){if(!x[xt])throw new Error("Invalid format. "+xt+" is required in specified format")}),m=m.replace(/@@@/g,function(){return d.shift()});var P=i.match(new RegExp(m,"i"));if(!P)return null;for(var D=Jo(Jo({},Hi),t),B=1;B<P.length;B++){var U=f[B-1],Y=U[0],se=U[2],xe=se?se(P[B],D):+P[B];if(xe==null)return null;l[Y]=xe}l.isPm===1&&l.hour!=null&&+l.hour!=12?l.hour=+l.hour+12:l.isPm===0&&+l.hour==12&&(l.hour=0);var Ee;if(l.timezoneOffset==null){Ee=new Date(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond);for(var rt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],B=0,vt=rt.length;B<vt;B++)if(x[rt[B][0]]&&l[rt[B][0]]!==Ee[rt[B][1]]())return null}else if(Ee=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute-l.timezoneOffset,l.second,l.millisecond)),l.month>11||l.month<0||l.day>31||l.day<1||l.hour>23||l.hour<0||l.minute>59||l.minute<0||l.second>59||l.second<0)return null;return Ee}var Xl={format:tc,parse:ho,defaultI18n:si,setGlobalDateI18n:ao,setGlobalDateMasks:Sl},bs=Xl;function Ss(i){return function(n,t,s,l){for(var f=(0,E.UM)(s)?0:s,d=(0,E.UM)(l)?n.length:l;f<d;){var m=f+d>>>1;i(n[m])>t?d=m:f=m+1}return f}}var xc="format";function bc(i,n){var t=$[xc]||bs[xc];return t(i,n)}function Rf(i){return(0,E.HD)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,E.J_)(i)&&(i=i.getTime()),i}var Ll=1e3,Fl=60*Ll,Yl=60*Fl,ku=24*Yl,Sc=ku*31,Rn=ku*365,ji=[["HH:mm:ss",Ll],["HH:mm:ss",Ll*10],["HH:mm:ss",Ll*30],["HH:mm",Fl],["HH:mm",Fl*10],["HH:mm",Fl*30],["HH",Yl],["HH",Yl*6],["HH",Yl*12],["YYYY-MM-DD",ku],["YYYY-MM-DD",ku*4],["YYYY-WW",ku*7],["YYYY-MM",Sc],["YYYY-MM",Sc*4],["YYYY-MM",Sc*6],["YYYY",ku*380]];function Pv(i,n,t){var s=(n-i)/t,l=Ss(function(d){return d[1]})(ji,s)-1,f=ji[l];return l<0?f=ji[0]:l>=ji.length&&(f=(0,E.Z$)(ji)),f}var ih=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return n.prototype.translate=function(t){t=Rf(t);var s=this.values.indexOf(t);return s===-1&&((0,E.hj)(t)&&t<this.values.length?s=t:s=NaN),s},n.prototype.getText=function(t,s){var l=this.translate(t);if(l>-1){var f=this.values[l],d=this.formatter;return f=d?d(f,s):bc(f,this.mask),f}return t},n.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},n.prototype.setDomain=function(){var t=this.values;(0,E.S6)(t,function(s,l){t[l]=Rf(s)}),t.sort(function(s,l){return s-l}),i.prototype.setDomain.call(this)},n}(Bn),rc=ih,Jp=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return n.prototype.scale=function(t){if((0,E.UM)(t))return NaN;var s=this.rangeMin(),l=this.rangeMax(),f=this.max,d=this.min;if(f===d)return s;var m=this.getScalePercent(t);return s+m*(l-s)},n.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,s=(0,E.YM)(t),l=(0,E.Z$)(t);s<this.min&&(this.min=s),l>this.max&&(this.max=l),(0,E.UM)(this.minLimit)||(this.min=s),(0,E.UM)(this.maxLimit)||(this.max=l)},n.prototype.setDomain=function(){var t=(0,E.rx)(this.values),s=t.min,l=t.max;(0,E.UM)(this.min)&&(this.min=s),(0,E.UM)(this.max)&&(this.max=l),this.min>this.max&&(this.min=s,this.max=l)},n.prototype.calculateTicks=function(){var t=this,s=i.prototype.calculateTicks.call(this);return this.nice||(s=(0,E.hX)(s,function(l){return l>=t.min&&l<=t.max})),s},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;return(t-l)/(s-l)},n.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},n}(tn),Gs=Jp,Ec=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return n.prototype.invert=function(t){var s=this.getInvertPercent(t);return this.min+s*(this.max-this.min)},n.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},n}(Gs),Bl=Ec;function nu(i,n){var t=Math.E,s;return n>=0?s=Math.pow(t,Math.log(n)/i):s=Math.pow(t,Math.log(-n)/i)*-1,s}function vu(i,n){return i===1?1:Math.log(n)/Math.log(i)}function El(i,n,t){(0,E.UM)(t)&&(t=Math.max.apply(null,i));var s=t;return(0,E.S6)(i,function(l){l>0&&l<s&&(s=l)}),s===t&&(s=t/n),s>1&&(s=1),s}function nc(i){var n=i.toString().split(/[eE]/),t=(n[0].split(".")[1]||"").length-+(n[1]||0);return t>0?t:0}function Nl(i,n){var t=nc(i),s=nc(n),l=Math.pow(10,Math.max(t,s));return(i*l+n*l)/l}var wc=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return n.prototype.invert=function(t){var s=this.base,l=vu(s,this.max),f=this.rangeMin(),d=this.rangeMax()-f,m,x=this.positiveMin;if(x){if(t===0)return 0;m=vu(s,x/s);var T=1/(l-m)*d;if(t<T)return t/T*x}else m=vu(s,this.min);var P=(t-f)/d,D=P*(l-m)+m;return Math.pow(s,D)},n.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},n.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=El(this.values,this.base,this.max))},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l||t<=0)return 0;var f=this.base,d=this.positiveMin;d&&(l=d*1/f);var m;return t<d?m=t/d/(vu(f,s)-vu(f,l)):m=(vu(f,t)-vu(f,l))/(vu(f,s)-vu(f,l)),m},n}(Gs),jc=wc,ah=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return n.prototype.invert=function(t){var s=this.getInvertPercent(t),l=this.exponent,f=nu(l,this.max),d=nu(l,this.min),m=s*(f-d)+d,x=m>=0?1:-1;return Math.pow(m,l)*x},n.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l)return 0;var f=this.exponent,d=(nu(f,t)-nu(f,l))/(nu(f,s)-nu(f,l));return d},n}(Gs),ed=ah,Uo=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return n.prototype.getText=function(t,s){var l=this.translate(t),f=this.formatter;return f?f(l,s):bc(l,this.mask)},n.prototype.scale=function(t){var s=t;return((0,E.HD)(s)||(0,E.J_)(s))&&(s=this.translate(s)),i.prototype.scale.call(this,s)},n.prototype.translate=function(t){return Rf(t)},n.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},n.prototype.setDomain=function(){var t=this.values,s=this.getConfig("min"),l=this.getConfig("max");if((!(0,E.UM)(s)||!(0,E.hj)(s))&&(this.min=this.translate(this.min)),(!(0,E.UM)(l)||!(0,E.hj)(l))&&(this.max=this.translate(this.max)),t&&t.length){var f=[],d=1/0,m=d,x=0;(0,E.S6)(t,function(T){var P=Rf(T);if(isNaN(P))throw new TypeError("Invalid Time: "+T+" in time scale!");d>P?(m=d,d=P):m>P&&(m=P),x<P&&(x=P),f.push(P)}),t.length>1&&(this.minTickInterval=m-d),(0,E.UM)(s)&&(this.min=d),(0,E.UM)(l)&&(this.max=x)}},n}(Bl),Nd=Uo,Uh=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return n.prototype.invert=function(t){var s=this.ticks,l=s.length,f=this.getInvertPercent(t),d=Math.floor(f*(l-1));if(d>=l-1)return(0,E.Z$)(s);if(d<0)return(0,E.YM)(s);var m=s[d],x=s[d+1],T=d/(l-1),P=(d+1)/(l-1);return m+(f-T)/(P-T)*(x-m)},n.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},n.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,E.Z$)(t)!==this.max&&t.push(this.max),(0,E.YM)(t)!==this.min&&t.unshift(this.min)),t},n.prototype.getScalePercent=function(t){var s=this.ticks;if(t<(0,E.YM)(s))return 0;if(t>(0,E.Z$)(s))return 1;var l=0;return(0,E.S6)(s,function(f,d){if(t>=f)l=d;else return!1}),l/(s.length-1)},n}(Gs),ff=Uh,ss=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return n.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},n}(ff),vp=ss,gp={};function Du(i){return gp[i]}function Mt(i,n){if(Du(i))throw new Error("type '"+i+"' existed.");gp[i]=n}var mr=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return n.prototype.calculateTicks=function(){return this.values},n.prototype.scale=function(t){return this.values[0]!==t&&(0,E.hj)(t)?t:this.range[0]},n.prototype.invert=function(t){var s=this.range;return t<s[0]||t>s[1]?NaN:this.values[0]},n}(tn),Vr=mr;function Qr(i){var n=i.values,t=i.tickInterval,s=i.tickCount,l=i.showLast;if((0,E.hj)(t)){var f=(0,E.hX)(n,function(Y,se){return se%t===0}),d=(0,E.Z$)(n);return l&&(0,E.Z$)(f)!==d&&f.push(d),f}var m=n.length,x=i.min,T=i.max;if((0,E.UM)(x)&&(x=0),(0,E.UM)(T)&&(T=n.length-1),!(0,E.hj)(s)||s>=m)return n.slice(x,T+1);if(s<=0||T<=0)return[];for(var P=s===1?m:Math.floor(m/(s-1)),D=[],B=x,U=0;U<s&&!(B>=T);U++)B=Math.min(x+U*P,T),U===s-1&&l?D.push(n[T]):D.push(n[B]);return D}function On(i){var n=i.min,t=i.max,s=i.nice,l=i.tickCount,f=new ll;return f.domain([n,t]),s&&f.nice(l),f.ticks(l)}var gi=5,oa=Math.sqrt(50),po=Math.sqrt(10),Ps=Math.sqrt(2),ll=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(n){return n?(this._domain=Array.from(n,Number),this):this._domain.slice()},i.prototype.nice=function(n){var t,s;n===void 0&&(n=gi);var l=this._domain.slice(),f=0,d=this._domain.length-1,m=this._domain[f],x=this._domain[d],T;return x<m&&(t=[x,m],m=t[0],x=t[1],s=[d,f],f=s[0],d=s[1]),T=Fo(m,x,n),T>0?(m=Math.floor(m/T)*T,x=Math.ceil(x/T)*T,T=Fo(m,x,n)):T<0&&(m=Math.ceil(m*T)/T,x=Math.floor(x*T)/T,T=Fo(m,x,n)),T>0?(l[f]=Math.floor(m/T)*T,l[d]=Math.ceil(x/T)*T,this.domain(l)):T<0&&(l[f]=Math.ceil(m*T)/T,l[d]=Math.floor(x*T)/T,this.domain(l)),this},i.prototype.ticks=function(n){return n===void 0&&(n=gi),Ju(this._domain[0],this._domain[this._domain.length-1],n||gi)},i}();function Ju(i,n,t){var s,l=-1,f,d,m;if(n=+n,i=+i,t=+t,i===n&&t>0)return[i];if((s=n<i)&&(f=i,i=n,n=f),(m=Fo(i,n,t))===0||!isFinite(m))return[];if(m>0)for(i=Math.ceil(i/m),n=Math.floor(n/m),d=new Array(f=Math.ceil(n-i+1));++l<f;)d[l]=(i+l)*m;else for(i=Math.floor(i*m),n=Math.ceil(n*m),d=new Array(f=Math.ceil(i-n+1));++l<f;)d[l]=(i-l)/m;return s&&d.reverse(),d}function Fo(i,n,t){var s=(n-i)/Math.max(0,t),l=Math.floor(Math.log(s)/Math.LN10),f=s/Math.pow(10,l);return l>=0?(f>=oa?10:f>=po?5:f>=Ps?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(f>=oa?10:f>=po?5:f>=Ps?2:1)}function mp(i,n,t){var s;return t==="ceil"?s=Math.ceil(i/n):t==="floor"?s=Math.floor(i/n):s=Math.round(i/n),s*n}function zd(i,n,t){var s=mp(i,t,"floor"),l=mp(n,t,"ceil");s=(0,E.ri)(s,t),l=(0,E.ri)(l,t);for(var f=[],d=Math.max((l-s)/(Math.pow(2,12)-1),t),m=s;m<=l;m=m+d){var x=(0,E.ri)(m,d);f.push(x)}return{min:s,max:l,ticks:f}}function Wc(i,n,t){var s,l=i.minLimit,f=i.maxLimit,d=i.min,m=i.max,x=i.tickCount,T=x===void 0?5:x,P=(0,E.UM)(l)?(0,E.UM)(n)?d:n:l,D=(0,E.UM)(f)?(0,E.UM)(t)?m:t:f;if(P>D&&(s=[P,D],D=s[0],P=s[1]),T<=2)return[P,D];for(var B=(D-P)/(T-1),U=[],Y=0;Y<T;Y++)U.push(P+B*Y);return U}function yp(i){var n=i.min,t=i.max,s=i.tickInterval,l=i.minLimit,f=i.maxLimit,d=On(i);return!(0,E.UM)(l)||!(0,E.UM)(f)?Wc(i,(0,E.YM)(d),(0,E.Z$)(d)):s?zd(n,t,s).ticks:d}function hf(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var td=[1,5,2,2.5,4,3],Ca=null,pf=Number.EPSILON*100;function oh(i,n){return(i%n+n)%n}function sh(i){return Math.round(i*1e12)/1e12}function If(i,n,t,s,l,f){var d=(0,E.dp)(n),m=(0,E.cq)(n,i),x=0,T=oh(s,f);return(T<pf||f-T<pf)&&s<=0&&l>=0&&(x=1),1-m/(d-1)-t+x}function uh(i,n,t){var s=(0,E.dp)(n),l=(0,E.cq)(n,i),f=1;return 1-l/(s-1)-t+f}function Zs(i,n,t,s,l,f){var d=(i-1)/(f-l),m=(n-1)/(Math.max(f,s)-Math.min(t,l));return 2-Math.max(d/m,m/d)}function ic(i,n){return i>=n?2-(i-1)/(n-1):1}function el(i,n,t,s){var l=n-i;return 1-.5*(Math.pow(n-s,2)+Math.pow(i-t,2))/Math.pow(.1*l,2)}function _p(i,n,t){var s=n-i;if(t>s){var l=(t-s)/2;return 1-Math.pow(l,2)/Math.pow(.1*s,2)}return 1}function Ud(){return 1}function rd(i,n,t,s,l,f){t===void 0&&(t=5),s===void 0&&(s=!0),l===void 0&&(l=td),f===void 0&&(f=[.25,.2,.5,.05]);var d=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(n)||typeof i!="number"||typeof n!="number"||!d)return{min:0,max:0,ticks:[]};if(n-i<1e-15||d===1)return{min:i,max:n,ticks:[i]};if(n-i>1e148){var m=t||5,x=(n-i)/m;return{min:i,max:n,ticks:Array(m).fill(null).map(function(Pa,so){return hf(i+x*so)})}}for(var T={score:-2,lmin:0,lmax:0,lstep:0},P=1;P<1/0;){for(var D=0;D<l.length;D+=1){var B=l[D],U=uh(B,l,P);if(f[0]*U+f[1]+f[2]+f[3]<T.score){P=1/0;break}for(var Y=2;Y<1/0;){var se=ic(Y,d);if(f[0]*U+f[1]+f[2]*se+f[3]<T.score)break;for(var xe=(n-i)/(Y+1)/P/B,Ee=Math.ceil(Math.log10(xe));Ee<1/0;){var rt=P*B*Math.pow(10,Ee),vt=_p(i,n,rt*(Y-1));if(f[0]*U+f[1]*vt+f[2]*se+f[3]<T.score)break;var xt=Math.floor(n/rt)*P-(Y-1)*P,Bt=Math.ceil(i/rt)*P;if(xt<=Bt)for(var m=Bt-xt,_r=0;_r<=m;_r+=1){var Or=xt+_r,Wr=Or*(rt/P),gn=Wr+rt*(Y-1),$r=rt,zn=If(B,l,P,Wr,gn,$r),li=el(i,n,Wr,gn),zi=Zs(Y,d,i,n,Wr,gn),ia=Ud(),qa=f[0]*zn+f[1]*li+f[2]*zi+f[3]*ia;qa>T.score&&(!s||Wr<=i&&gn>=n)&&(T.lmin=Wr,T.lmax=gn,T.lstep=$r,T.score=qa)}Ee+=1}Y+=1}}P+=1}var Hn=hf(T.lmax),Di=hf(T.lmin),Zi=hf(T.lstep),yi=Math.floor(sh((Hn-Di)/Zi))+1,Vi=new Array(yi);Vi[0]=hf(Di);for(var D=1;D<yi;D++)Vi[D]=hf(Vi[D-1]+Zi);return{min:Math.min(i,(0,E.YM)(Vi)),max:Math.max(n,(0,E.Z$)(Vi)),ticks:Vi}}function Gc(i){var n=i.min,t=i.max,s=i.tickCount,l=i.nice,f=i.tickInterval,d=i.minLimit,m=i.maxLimit,x=rd(n,t,s,l).ticks;return!(0,E.UM)(d)||!(0,E.UM)(m)?Wc(i,(0,E.YM)(x),(0,E.Z$)(x)):f?zd(n,t,f).ticks:x}function df(i){var n=i.base,t=i.tickCount,s=i.min,l=i.max,f=i.values,d,m=vu(n,l);if(s>0)d=Math.floor(vu(n,s));else{var x=El(f,n,l);d=Math.floor(vu(n,x))}for(var T=m-d,P=Math.ceil(T/t),D=[],B=d;B<m+P;B=B+P)D.push(Math.pow(n,B));return s<=0&&D.unshift(0),D}function lh(i,n,t){if(t===void 0&&(t=5),i===n)return{max:n,min:i,ticks:[i]};var s=t<0?0:Math.round(t);if(s===0)return{max:n,min:i,ticks:[]};var l=1.5,f=.5+1.5*l,d=n-i,m=d/s,x=Math.pow(10,Math.floor(Math.log10(m))),T=x;2*x-m<l*(m-T)&&(T=2*x,5*x-m<f*(m-T)&&(T=5*x,10*x-m<l*(m-T)&&(T=10*x)));for(var P=Math.ceil(n/T),D=Math.floor(i/T),B=Math.max(P*T,n),U=Math.min(D*T,i),Y=Math.floor((B-U)/T)+1,se=new Array(Y),xe=0;xe<Y;xe++)se[xe]=hf(U+xe*T);return{min:U,max:B,ticks:se}}function xp(i){var n=i.exponent,t=i.tickCount,s=Math.ceil(nu(n,i.max)),l=Math.floor(nu(n,i.min)),f=lh(l,s,t).ticks;return f.map(function(d){var m=d>=0?1:-1;return Math.pow(d,n)*m})}function Pf(i,n){var t=i.length*n;return n===1?i[i.length-1]:n===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function cm(i){var n=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var s=t.slice().sort(function(m,x){return m-x}),l=[],f=0;f<n;f++){var d=f/(n-1);l.push(Pf(s,d))}return l}function nd(i){var n=i.min,t=i.max,s=i.tickCount,l=i.tickInterval,f=i.minLimit,d=i.maxLimit,m=lh(n,t,s).ticks;return!(0,E.UM)(f)||!(0,E.UM)(d)?Wc(i,(0,E.YM)(m),(0,E.Z$)(m)):l?zd(n,t,l).ticks:m}function Os(i){var n=i.min,t=i.max,s=i.minTickInterval,l=i.tickInterval,f=i.tickCount;if(l)f=Math.ceil((t-n)/l);else{l=Pv(n,t,f)[1];var d=(t-n)/l,m=d/f;m>1&&(l=l*Math.ceil(m)),s&&l<s&&(l=s)}l=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),l);for(var x=[],T=n;T<t+l;T+=l)x.push(T);return x}function bp(i){var n=Qr((0,M.pi)({showLast:!0},i));return n}function Zh(i){return new Date(i).getFullYear()}function Zd(i){return new Date(i,0,1).getTime()}function Sp(i){return new Date(i).getMonth()}function Ep(i,n){var t=Zh(i),s=Zh(n),l=Sp(i),f=Sp(n);return(s-t)*12+(f-l)%12}function Ov(i,n){return new Date(i,n,1).getTime()}function $c(i,n){return Math.ceil((n-i)/ku)}function Vd(i,n){return Math.ceil((n-i)/Yl)}function ch(i,n){return Math.ceil((n-i)/(60*1e3))}function us(i){var n=i.min,t=i.max,s=i.minTickInterval,l=i.tickCount,f=i.tickInterval,d=[];f||(f=(t-n)/l,s&&f<s&&(f=s)),f=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),f);var m=Zh(n);if(f>Rn)for(var x=Zh(t),T=Math.ceil(f/Rn),P=m;P<=x+T;P=P+T)d.push(Zd(P));else if(f>Sc)for(var D=Math.ceil(f/Sc),B=Sp(n),U=Ep(n,t),P=0;P<=U+D;P=P+D)d.push(Ov(m,P+B));else if(f>ku)for(var Y=new Date(n),se=Y.getFullYear(),xe=Y.getMonth(),Ee=Y.getDate(),rt=Math.ceil(f/ku),vt=$c(n,t),P=0;P<vt+rt;P=P+rt)d.push(new Date(se,xe,Ee+P).getTime());else if(f>Yl)for(var Y=new Date(n),se=Y.getFullYear(),xe=Y.getMonth(),rt=Y.getDate(),xt=Y.getHours(),Bt=Math.ceil(f/Yl),_r=Vd(n,t),P=0;P<=_r+Bt;P=P+Bt)d.push(new Date(se,xe,rt,xt+P).getTime());else if(f>Fl)for(var Or=ch(n,t),Wr=Math.ceil(f/Fl),P=0;P<=Or+Wr;P=P+Wr)d.push(n+P*Fl);else{var gn=f;gn<Ll&&(gn=Ll);for(var $r=Math.floor(n/Ll)*Ll,zn=Math.ceil((t-n)/Ll),li=Math.ceil(gn/Ll),P=0;P<zn+li;P=P+li)d.push($r+P*Ll)}return d.length>=512&&console.warn("Notice: current ticks length("+d.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+f+") is too small, increase the value to solve the problem!"),d}qt("cat",Qr),qt("time-cat",bp),qt("wilkinson-extended",Gc),qt("r-pretty",nd),qt("time",Os),qt("time-pretty",us),qt("log",df),qt("pow",xp),qt("quantile",cm),qt("d3-linear",yp),Mt("cat",Bn),Mt("category",Bn),Mt("identity",Vr),Mt("linear",Bl),Mt("log",jc),Mt("pow",ed),Mt("time",Nd),Mt("timeCat",rc),Mt("quantize",ff),Mt("quantile",vp);var fh={},Cc=function(i){return fh[i.toLowerCase()]},ac=function(i,n){if(Cc(i))throw new Error("Attribute type '".concat(i,"' existed."));fh[i.toLowerCase()]=n};ac("Color",io),ac("Opacity",ai),ac("Position",ea),ac("Shape",ms),ac("Size",ko);var oo=k(77160),$o=k(35600),vo=k(31506),id=function(){function i(n){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=n.start,s=n.end,l=n.matrix,f=l===void 0?[1,0,0,0,1,0,0,0,1]:l,d=n.isTransposed,m=d===void 0?!1:d;this.start=t,this.end=s,this.matrix=f,this.originalMatrix=(0,M.ev)([],f),this.isTransposed=m}return i.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},i.prototype.update=function(n){(0,E.f0)(this,n),this.initial()},i.prototype.convertDim=function(n,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),f+n*(d-f)},i.prototype.invertDim=function(n,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),(n-f)/(d-f)},i.prototype.applyMatrix=function(n,t,s){s===void 0&&(s=0);var l=this.matrix,f=[n,t,s];return oo.transformMat3(f,f,l),f},i.prototype.invertMatrix=function(n,t,s){s===void 0&&(s=0);var l=this.matrix,f=$o.U_([0,0,0,0,0,0,0,0,0],l),d=[n,t,s];return f&&oo.transformMat3(d,d,f),d},i.prototype.convert=function(n){var t=this.convertPoint(n),s=t.x,l=t.y,f=this.applyMatrix(s,l,1);return{x:f[0],y:f[1]}},i.prototype.invert=function(n){var t=this.invertMatrix(n.x,n.y,1);return this.invertPoint({x:t[0],y:t[1]})},i.prototype.rotate=function(n){var t=this.matrix,s=this.center;return vo.m$(t,t,[-s.x,-s.y]),vo.zu(t,t,n),vo.m$(t,t,[s.x,s.y]),this},i.prototype.reflect=function(n){return n==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},i.prototype.scale=function(n,t){var s=this.matrix,l=this.center;return vo.m$(s,s,[-l.x,-l.y]),vo.lh(s,s,[n,t]),vo.m$(s,s,[l.x,l.y]),this},i.prototype.translate=function(n,t){var s=this.matrix;return vo.m$(s,s,[n,t]),this},i.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},i.prototype.getCenter=function(){return this.center},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.getRadius=function(){return this.radius},i.prototype.isReflect=function(n){return n==="x"?this.isReflectX:this.isReflectY},i.prototype.resetMatrix=function(n){this.matrix=n||(0,M.ev)([],this.originalMatrix)},i}(),Of=id,wp=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.isRect=!0,s.type="cartesian",s.initial(),s}return n.prototype.initial=function(){i.prototype.initial.call(this);var t=this.start,s=this.end;this.x={start:t.x,end:s.x},this.y={start:t.y,end:s.y}},n.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:this.convertDim(l,"x"),y:this.convertDim(f,"y")}},n.prototype.invertPoint=function(t){var s,l=this.invertDim(t.x,"x"),f=this.invertDim(t.y,"y");return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:l,y:f}},n}(Of),kv=wp,va=k(31437),Cp=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.isHelix=!0,s.type="helix";var l=t.startAngle,f=l===void 0?1.25*Math.PI:l,d=t.endAngle,m=d===void 0?7.25*Math.PI:d,x=t.innerRadius,T=x===void 0?0:x,P=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=T,s.radius=P,s.initial(),s}return n.prototype.initial=function(){i.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,s=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(s=s*this.radius),this.d=Math.floor(s*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*s,end:this.innerRadius*s+this.d*.99}},n.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;this.isTransposed&&(s=[f,l],l=s[0],f=s[1]);var d=this.convertDim(l,"x"),m=this.a*d,x=this.convertDim(f,"y");return{x:this.center.x+Math.cos(d)*(m+x),y:this.center.y+Math.sin(d)*(m+x)}},n.prototype.invertPoint=function(t){var s,l=this.d+this.y.start,f=va.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),d=vo.Dg(f,[1,0],!0),m=d*this.a;va.kE(f)<m&&(m=va.kE(f));var x=Math.floor((va.kE(f)-m)/l);d=2*x*Math.PI+d;var T=this.a*d,P=va.kE(f)-T;P=(0,E.vQ)(P,0)?0:P;var D=this.invertDim(d,"x"),B=this.invertDim(P,"y");return D=(0,E.vQ)(D,0)?0:D,B=(0,E.vQ)(B,0)?0:B,this.isTransposed&&(s=[B,D],D=s[0],B=s[1]),{x:D,y:B}},n}(Of),Xc=Cp,$s=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.isPolar=!0,s.type="polar";var l=t.startAngle,f=l===void 0?-Math.PI/2:l,d=t.endAngle,m=d===void 0?Math.PI*3/2:d,x=t.innerRadius,T=x===void 0?0:x,P=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=T,s.radius=P,s.initial(),s}return n.prototype.initial=function(){for(i.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),s=t.maxX-t.minX,l=t.maxY-t.minY,f=Math.abs(t.minX)/s,d=Math.abs(t.minY)/l,m;this.height/l>this.width/s?(m=this.width/s,this.circleCenter={x:this.center.x-(.5-f)*this.width,y:this.center.y-(.5-d)*m*l}):(m=this.height/l,this.circleCenter={x:this.center.x-(.5-f)*m*s,y:this.center.y-(.5-d)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=m*this.radius:(this.radius<=0||this.radius>m)&&(this.polarRadius=m):this.polarRadius=m,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},n.prototype.getRadius=function(){return this.polarRadius},n.prototype.convertPoint=function(t){var s,l=this.getCenter(),f=t.x,d=t.y;return this.isTransposed&&(s=[d,f],f=s[0],d=s[1]),f=this.convertDim(f,"x"),d=this.convertDim(d,"y"),{x:l.x+Math.cos(f)*d,y:l.y+Math.sin(f)*d}},n.prototype.invertPoint=function(t){var s,l=this.getCenter(),f=[t.x-l.x,t.y-l.y],d=this,m=d.startAngle,x=d.endAngle;this.isReflect("x")&&(s=[x,m],m=s[0],x=s[1]);var T=[1,0,0,0,1,0,0,0,1];vo.zu(T,T,m);var P=[1,0,0];oo.transformMat3(P,P,T);var D=[P[0],P[1]],B=vo.Dg(D,f,x<m);(0,E.vQ)(B,Math.PI*2)&&(B=0);var U=va.kE(f),Y=B/(x-m);Y=x-m>0?Y:-Y;var se=this.invertDim(U,"y"),xe={x:0,y:0};return xe.x=this.isTransposed?se:Y,xe.y=this.isTransposed?Y:se,xe},n.prototype.getCenter=function(){return this.circleCenter},n.prototype.getOneBox=function(){var t=this.startAngle,s=this.endAngle;if(Math.abs(s-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var l=[0,Math.cos(t),Math.cos(s)],f=[0,Math.sin(t),Math.sin(s)],d=Math.min(t,s);d<Math.max(t,s);d+=Math.PI/18)l.push(Math.cos(d)),f.push(Math.sin(d));return{minX:Math.min.apply(Math,l),maxX:Math.max.apply(Math,l),minY:Math.min.apply(Math,f),maxY:Math.max.apply(Math,f)}},n}(Of),Es=$s,hh={},ad=function(i){return hh[i.toLowerCase()]},ks=function(i,n){hh[i.toLowerCase()]=n};ks("rect",kv),ks("cartesian",kv),ks("polar",Es),ks("helix",Xc);function Ni(i,n,t){var s=new Ge.Event(n,t);s.target=i,s.propagationPath.push(i),i.emitDelegation(n,s);for(var l=i.getParent();l;)l.emitDelegation(n,s),s.propagationPath.push(l),l=l.getParent()}var ju=[1,0,0,0,1,0,0,0,1];function Yc(i,n,t){if(t===void 0&&(t=ju),!n)return null;var s=vo.vs(t,[["t",-i.x,-i.y],["r",n],["t",i.x,i.y]]);return s}function kf(i,n){return!i.x&&!i.y?null:vo.vs(n||ju,[["t",i.x,i.y]])}function cl(i){var n=[1,0,0],t=[0,0,0];return oo.transformMat3(t,n,i),Math.atan2(t[1],t[0])}function Zo(i,n){var t=[0,0];return va.kK(t,n,i),t}function Ds(i,n){var t=Zo(i,[n.minX,n.minY]),s=Zo(i,[n.maxX,n.minY]),l=Zo(i,[n.minX,n.maxY]),f=Zo(i,[n.maxX,n.maxY]),d=Math.min(t[0],s[0],l[0],f[0]),m=Math.max(t[0],s[0],l[0],f[0]),x=Math.min(t[1],s[1],l[1],f[1]),T=Math.max(t[1],s[1],l[1],f[1]);return{x:d,y:x,minX:d,minY:x,maxX:m,maxY:T,width:m-d,height:T-x}}function Ei(i,n,t,s){if(n){var l=Yc({x:t,y:s},n,i.getMatrix());i.setMatrix(l)}}function zl(i,n,t){var s=kf({x:n,y:t});i.attr("matrix",s)}function ph(i){var n=0,t=0,s=0,l=0;return(0,E.hj)(i)?n=t=s=l=i:(0,E.kJ)(i)&&(n=i[0],s=(0,E.UM)(i[1])?i[0]:i[1],l=(0,E.UM)(i[2])?i[0]:i[2],t=(0,E.UM)(i[3])?s:i[3]),[n,s,l,t]}function Vh(i){for(var n=i.childNodes,t=n.length,s=t-1;s>=0;s--)i.removeChild(n[s])}function Tc(i,n){return!!i.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function Cu(i){var n=i.start,t=i.end,s=Math.min(n.x,t.x),l=Math.min(n.y,t.y),f=Math.max(n.x,t.x),d=Math.max(n.y,t.y);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function Tp(i){var n=i.map(function(m){return m.x}),t=i.map(function(m){return m.y}),s=Math.min.apply(Math,n),l=Math.min.apply(Math,t),f=Math.max.apply(Math,n),d=Math.max.apply(Math,t);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function Ac(i,n,t,s){var l=i+t,f=n+s;return{x:i,y:n,width:t,height:s,minX:i,minY:n,maxX:isNaN(l)?0:l,maxY:isNaN(f)?0:f}}function iu(i,n,t){return(1-t)*i+n*t}function fl(i,n,t){return{x:i.x+Math.cos(t)*n,y:i.y+Math.sin(t)*n}}function Dv(i,n){var t=n.x-i.x,s=n.y-i.y;return Math.sqrt(t*t+s*s)}var Hh=function(i){return new Promise(function(n){setTimeout(n,i)})},jh=function(i,n,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[i,n].includes(1/0)?Math.abs(i)===Math.abs(n):Math.abs(i-n)<t};function Hd(i,n){var t=Math.max(i.minX,n.minX),s=Math.max(i.minY,n.minY),l=Math.min(i.maxX,n.maxX),f=Math.min(i.maxY,n.maxY);return Ac(t,s,l-t,f-s)}function oc(i,n){var t=Math.min(i.minX,n.minX),s=Math.min(i.minY,n.minY),l=Math.max(i.maxX,n.maxX),f=Math.max(i.maxY,n.maxY);return Ac(t,s,l-t,f-s)}function au(i){var n=i.getClip(),t=n&&n.getBBox(),s;if(!i.isGroup())s=i.getBBox();else{var l=1/0,f=-1/0,d=1/0,m=-1/0,x=i.getChildren();x.length>0?(0,E.S6)(x,function(T){if(T.get("visible")){if(T.isGroup()&&T.get("children").length===0)return!0;var P=au(T),D=T.applyToMatrix([P.minX,P.minY,1]),B=T.applyToMatrix([P.minX,P.maxY,1]),U=T.applyToMatrix([P.maxX,P.minY,1]),Y=T.applyToMatrix([P.maxX,P.maxY,1]),se=Math.min(D[0],B[0],U[0],Y[0]),xe=Math.max(D[0],B[0],U[0],Y[0]),Ee=Math.min(D[1],B[1],U[1],Y[1]),rt=Math.max(D[1],B[1],U[1],Y[1]);se<l&&(l=se),xe>f&&(f=xe),Ee<d&&(d=Ee),rt>m&&(m=rt)}}):(l=0,f=0,d=0,m=0),s=Ac(l,d,f-l,m-d)}return t?Hd(s,t):s}function ja(i,n){if(!(!i.getClip()&&!n.getClip())){var t=n.getClip();if(!t){i.setClip(null);return}var s={type:t.get("type"),attrs:t.attr()};i.setClip(s)}}function ws(i){return i+"px"}function Kl(i,n,t,s){var l=Dv(i,n),f=s/l,d=0;return t==="start"?d=0-f:t==="end"&&(d=1+f),{x:iu(i.x,n.x,d),y:iu(i.y,n.y,d)}}var Wu={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Df=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.initCfg(),s}return n.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},n.prototype.clear=function(){},n.prototype.update=function(t){var s=this,l=this.get("defaultCfg")||{};(0,E.S6)(t,function(f,d){var m=s.get(d),x=f;m!==f&&((0,E.Kn)(f)&&l[d]&&(x=(0,E.b$)({},l[d],f)),s.set(d,x))}),this.updateInner(t),this.afterUpdate(t)},n.prototype.updateInner=function(t){},n.prototype.afterUpdate=function(t){(0,E.wH)(t,"visible")&&(t.visible?this.show():this.hide()),(0,E.wH)(t,"capture")&&this.setCapture(t.capture)},n.prototype.getLayoutBBox=function(){return this.getBBox()},n.prototype.getLocationType=function(){return this.get("locationType")},n.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},n.prototype.setOffset=function(t,s){this.update({offsetX:t,offsetY:s})},n.prototype.setLocation=function(t){var s=(0,M.pi)({},t);this.update(s)},n.prototype.getLocation=function(){var t=this,s={},l=this.get("locationType"),f=Wu[l];return(0,E.S6)(f,function(d){s[d]=t.get(d)}),s},n.prototype.isList=function(){return!1},n.prototype.isSlider=function(){return!1},n.prototype.init=function(){},n.prototype.initCfg=function(){var t=this,s=this.get("defaultCfg");(0,E.S6)(s,function(l,f){var d=t.get(f);if((0,E.Kn)(d)){var m=(0,E.b$)({},l,d);t.set(f,m)}})},n}(Ge.Base),Mc=Df,tl="update_status",Tu=["visible","tip","delegateObject"],Wh=["container","group","shapesMap","isRegister","isUpdating","destroyed"],Qi=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},n.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},n.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},n.prototype.getChildComponentById=function(t){var s=this.getElementById(t),l=s&&s.get("component");return l},n.prototype.getElementById=function(t){return this.get("shapesMap")[t]},n.prototype.getElementByLocalId=function(t){var s=this.getElementId(t);return this.getElementById(s)},n.prototype.getElementsByName=function(t){var s=[];return(0,E.S6)(this.get("shapesMap"),function(l){l.get("name")===t&&s.push(l)}),s},n.prototype.getContainer=function(){return this.get("container")},n.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},n.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var s=this.get("group");this.updateElements(t,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},n.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},n.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},n.prototype.setCapture=function(t){var s=this.get("group");s.set("capture",t),this.set("capture",t)},n.prototype.destroy=function(){this.removeEvent(),this.remove(),i.prototype.destroy.call(this)},n.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},n.prototype.getLayoutBBox=function(){var t=this.get("group"),s=this.getInnerLayoutBBox(),l=t.getTotalMatrix();return l&&(s=Ds(l,s)),s},n.prototype.on=function(t,s,l){var f=this.get("group");return f.on(t,s,l),this},n.prototype.off=function(t,s){var l=this.get("group");return l&&l.off(t,s),this},n.prototype.emit=function(t,s){var l=this.get("group");l.emit(t,s)},n.prototype.init=function(){i.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},n.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},n.prototype.delegateEmit=function(t,s){var l=this.get("group");s.target=l,l.emit(t,s),Ni(l,t,s)},n.prototype.createOffScreenGroup=function(){var t=this.get("group"),s=t.getGroupBase(),l=new s({delegateObject:this.getDelegateObject()});return l},n.prototype.applyOffset=function(){var t=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:s})},n.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},n.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",au(t)),t},n.prototype.addGroup=function(t,s){this.appendDelegateObject(t,s);var l=t.addGroup(s);return this.get("isRegister")&&this.registerElement(l),l},n.prototype.addShape=function(t,s){this.appendDelegateObject(t,s);var l=t.addShape(s);return this.get("isRegister")&&this.registerElement(l),l},n.prototype.addComponent=function(t,s){var l=s.id,f=s.component,d=(0,M._T)(s,["id","component"]),m=new f((0,M.pi)((0,M.pi)({},d),{id:l,container:t,updateAutoRender:this.get("updateAutoRender")}));return m.init(),m.render(),this.get("isRegister")&&this.registerElement(m.get("group")),m},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){var t=this.get("group");t.off()},n.prototype.getElementId=function(t){var s=this.get("id"),l=this.get("name");return s+"-"+l+"-"+t},n.prototype.registerElement=function(t){var s=t.get("id");this.get("shapesMap")[s]=t},n.prototype.unregisterElement=function(t){var s=t.get("id");delete this.get("shapesMap")[s]},n.prototype.moveElementTo=function(t,s){var l=kf(s);t.attr("matrix",l)},n.prototype.addAnimation=function(t,s,l){var f=s.attr("opacity");(0,E.UM)(f)&&(f=1),s.attr("opacity",0),s.animate({opacity:f},l)},n.prototype.removeAnimation=function(t,s,l){s.animate({opacity:0},l)},n.prototype.updateAnimation=function(t,s,l,f){s.animate(l,f)},n.prototype.updateElements=function(t,s){var l=this,f=this.get("animate"),d=this.get("animateOption"),m=t.getChildren().slice(0),x;(0,E.S6)(m,function(T){var P=T.get("id"),D=l.getElementById(P),B=T.get("name");if(D)if(T.get("isComponent")){var U=T.get("component"),Y=D.get("component"),se=(0,E.ei)(U.cfg,(0,E.e5)((0,E.XP)(U.cfg),Wh));Y.update(se),D.set(tl,"update")}else{var xe=l.getReplaceAttrs(D,T);f&&d.update?l.updateAnimation(B,D,xe,d.update):D.attr(xe),T.isGroup()&&l.updateElements(T,D),(0,E.S6)(Tu,function(xt){D.set(xt,T.get(xt))}),ja(D,T),x=D,D.set(tl,"update")}else{s.add(T);var Ee=s.getChildren();if(Ee.splice(Ee.length-1,1),x){var rt=Ee.indexOf(x);Ee.splice(rt+1,0,T)}else Ee.unshift(T);if(l.registerElement(T),T.set(tl,"add"),T.get("isComponent")){var U=T.get("component");U.set("container",s)}else T.isGroup()&&l.registerNewGroup(T);if(x=T,f){var vt=l.get("isInit")?d.appear:d.enter;vt&&l.addAnimation(B,T,vt)}}})},n.prototype.clearUpdateStatus=function(t){var s=t.getChildren();(0,E.S6)(s,function(l){l.set(tl,null)})},n.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},n.prototype.getDelegateObject=function(){var t,s=this.get("name"),l=(t={},t[s]=this,t.component=this,t);return l},n.prototype.appendDelegateObject=function(t,s){var l=t.get("delegateObject");s.delegateObject||(s.delegateObject={}),(0,E.CD)(s.delegateObject,l)},n.prototype.getReplaceAttrs=function(t,s){var l=t.attr(),f=s.attr();return(0,E.S6)(l,function(d,m){f[m]===void 0&&(f[m]=void 0)}),f},n.prototype.registerNewGroup=function(t){var s=this,l=t.getChildren();(0,E.S6)(l,function(f){s.registerElement(f),f.set(tl,"add"),f.isGroup()&&s.registerNewGroup(f)})},n.prototype.deleteElements=function(){var t=this,s=this.get("shapesMap"),l=[];(0,E.S6)(s,function(m,x){!m.get(tl)||m.destroyed?l.push([x,m]):m.set(tl,null)});var f=this.get("animate"),d=this.get("animateOption");(0,E.S6)(l,function(m){var x=m[0],T=m[1];if(!T.destroyed){var P=T.get("name");if(f&&d.leave){var D=(0,E.CD)({callback:function(){t.removeElement(T)}},d.leave);t.removeAnimation(P,T,D)}else t.removeElement(T)}delete s[x]})},n.prototype.removeElement=function(t){if(t.get("isGroup")){var s=t.get("component");s&&s.destroy()}t.remove()},n}(Mc),wi=Qi,wl="\u2026";function rl(i){for(var n=0,t=0;t<i.length;t++)n+=Gu(i,t);return n}function Gu(i,n){return i.charCodeAt(n)>0&&i.charCodeAt(n)<128?1:2}function Cs(i,n,t){t===void 0&&(t="tail");var s=i.length,l="";if(t==="tail"){for(var f=0,d=0;f<n;){var m=Gu(i,d);if(f+m<=n)l+=i[d],f+=Gu(i,d),d++;else break}l+=wl}else if(t==="head"){for(var f=0,d=s-1;f<n;){var m=Gu(i,d);if(f+m<=n)l+=i[d],f+=Gu(i,d),d--;else break}l=wl+l}else{for(var x="",T="",f=0,P=0,D=s-1;f<n;){var B=Gu(i,P),U=!1;B+f<=n&&(x+=i[P],P++,f+=B,U=!0);var Y=Gu(i,D);if(Y+f<=n&&(T=i[D]+T,f+=Y,D--,U=!0),!U)break}l=x+wl+T}return l}var sc="\u2026",Lf=2,dh=400;function zo(i){for(var n=i.map(function(x){var T=x.attr("text");return(0,E.UM)(T)?"":""+T}),t=0,s=0,l=0;l<n.length;l+=1){for(var f=0,d=0;d<=n[l].length;d+=1){var m=n[l].charCodeAt(d);m>=19968&&m<=40869?f+=2:f+=1}f>t&&(t=f,s=l)}return i[s].getBBox().width}function Xs(i){if(i.length>dh)return zo(i);var n=0;return(0,E.S6)(i,function(t){var s=t.getBBox(),l=s.width;n<l&&(n=l)}),n}function Lv(i,n){var t=n.getCanvasBBox();return i?t.width:t.height}function vh(i,n){return i.getBBox().width<n}function Ff(i,n,t,s){var l;s===void 0&&(s="tail");var f=(l=n.attr("text"))!==null&&l!==void 0?l:"";if(s==="tail"){var d=(0,E.ei)(n.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),m=(0,E.Lo)(f,t,d,"\u2026");return f!==m?(n.attr("text",m),n.set("tip",f),!0):(n.set("tip",null),!1)}var x=Lv(i,n),T=rl(f),P=!1;if(t<x){var D=Math.floor(t/x*T)-Lf,B=void 0;D>=0?B=Cs(f,D,s):B=sc,B&&(n.attr("text",B),P=!0)}return P?n.set("tip",f):n.set("tip",null),P}function uc(i,n){var t=n.x,s=n.y,l=n.content,f=n.style,d=n.id,m=n.name,x=n.rotate,T=n.maxLength,P=n.autoEllipsis,D=n.isVertical,B=n.ellipsisPosition,U=n.background,Y=i.addGroup({id:d+"-group",name:m+"-group",attrs:{x:t,y:s}}),se=Y.addShape({type:"text",id:d,name:m,attrs:(0,M.pi)({x:0,y:0,text:l},f)}),xe=ph((0,E.U2)(U,"padding",0));if(T&&P){var Ee=T-(xe[1]+xe[3]);Ff(!D,se,Ee,B)}if(U){var rt=(0,E.U2)(U,"style",{}),vt=se.getCanvasBBox(),xt=vt.minX,Bt=vt.minY,_r=vt.width,Or=vt.height,Wr=Y.addShape("rect",{id:d+"-bg",name:d+"-bg",attrs:(0,M.pi)({x:xt-xe[3],y:Bt-xe[0],width:_r+xe[1]+xe[3],height:Or+xe[0]+xe[2]},rt)});Wr.toBack()}zl(Y,t,s),Ei(Y,x,t,s)}var Ta={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"},gh=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Ta.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Ta.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Ta.lineColor,lineWidth:1}}}})},n.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},n.prototype.renderLine=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,M.pi)({x1:s.x,y1:s.y,x2:l.x,y2:l.y},f)})},n.prototype.getLabelPoint=function(t,s,l){var f;return l==="start"?f=0:l==="center"?f=.5:(0,E.HD)(l)&&l.indexOf("%")!==-1?f=parseInt(l,10)/100:(0,E.hj)(l)?f=l:f=1,(f>1||f<0)&&(f=1),{x:iu(t.x,s.x,f),y:iu(t.y,s.y,f)}},n.prototype.renderLabel=function(t){var s=this.get("text"),l=this.get("start"),f=this.get("end"),d=s.position,m=s.content,x=s.style,T=s.offsetX,P=s.offsetY,D=s.autoRotate,B=s.maxLength,U=s.autoEllipsis,Y=s.ellipsisPosition,se=s.background,xe=s.isVertical,Ee=xe===void 0?!1:xe,rt=this.getLabelPoint(l,f,d),vt=rt.x+T,xt=rt.y+P,Bt={id:this.getElementId("line-text"),name:"annotation-line-text",x:vt,y:xt,content:m,style:x,maxLength:B,autoEllipsis:U,ellipsisPosition:Y,background:se,isVertical:Ee};if(D){var _r=[f.x-l.x,f.y-l.y];Bt.rotate=Math.atan2(_r[1],_r[0])}uc(t,Bt)},n}(wi),Kc=gh,od=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Ta.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Ta.fontFamily}}})},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},n.prototype.renderInner=function(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("content"),m=this.get("style"),x=this.getElementId("text"),T=this.get("name")+"-text",P=this.get("maxLength"),D=this.get("autoEllipsis"),B=this.get("isVertical"),U=this.get("ellipsisPosition"),Y=this.get("background"),se=this.get("rotate"),xe={id:x,name:T,x:l,y:f,content:d,style:m,maxLength:P,autoEllipsis:D,isVertical:B,ellipsisPosition:U,background:Y,rotate:se};uc(t,xe)},n.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("rotate");zl(t,l,f),Ei(t,d,l,f)}},n}(wi),Bf=od,Gh=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},n.prototype.renderInner=function(t){this.renderArc(t)},n.prototype.getArcPath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=fl(s,l,f),x=fl(s,l,d),T=d-f>Math.PI?1:0,P=[["M",m.x,m.y]];if(d-f===Math.PI*2){var D=fl(s,l,f+Math.PI);P.push(["A",l,l,0,T,1,D.x,D.y]),P.push(["A",l,l,0,T,1,x.x,x.y])}else P.push(["A",l,l,0,T,1,x.x,x.y]);return P},n.prototype.renderArc=function(t){var s=this.getArcPath(),l=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,M.pi)({path:s},l)})},n}(wi),jd=Gh,Sn=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Ta.regionColor,opacity:.4}}})},n.prototype.renderInner=function(t){this.renderRegion(t)},n.prototype.renderRegion=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style"),d=Cu({start:s,end:l});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.pi)({x:d.x,y:d.y,width:d.width,height:d.height},f)})},n}(wi),wr=Sn,He=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},n.prototype.renderInner=function(t){this.renderImage(t)},n.prototype.getImageAttrs=function(){var t=this.get("start"),s=this.get("end"),l=this.get("style"),f=Cu({start:t,end:s}),d=this.get("src");return(0,M.pi)({x:f.x,y:f.y,img:d,width:f.width,height:f.height},l)},n.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},n}(wi),qc=He,er=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Ta.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Ta.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Ta.fontFamily}}}})},n.prototype.renderInner=function(t){(0,E.U2)(this.get("line"),"display")&&this.renderLine(t),(0,E.U2)(this.get("text"),"display")&&this.renderText(t),(0,E.U2)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},n.prototype.renderPoint=function(t){var s=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:s})},n.prototype.renderLine=function(t){var s=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:s})},n.prototype.renderText=function(t){var s=this.getShapeAttrs().text,l=s.x,f=s.y,d=s.text,m=(0,M._T)(s,["x","y","text"]),x=this.get("text"),T=x.background,P=x.maxLength,D=x.autoEllipsis,B=x.isVertival,U=x.ellipsisPosition,Y={x:l,y:f,id:this.getElementId("text"),name:"annotation-text",content:d,style:m,background:T,maxLength:P,autoEllipsis:D,isVertival:B,ellipsisPosition:U};uc(t,Y)},n.prototype.autoAdjust=function(t){var s=this.get("direction"),l=this.get("x"),f=this.get("y"),d=(0,E.U2)(this.get("line"),"length",0),m=this.get("coordinateBBox"),x=t.getBBox(),T=x.minX,P=x.maxX,D=x.minY,B=x.maxY,U=t.findById(this.getElementId("text-group")),Y=t.findById(this.getElementId("text")),se=t.findById(this.getElementId("line"));if(m&&U){var xe=U.attr("x"),Ee=U.attr("y"),rt=Y.getCanvasBBox(),vt=rt.width,xt=rt.height,Bt=0,_r=0;if(l+T<=m.minX)if(s==="leftward")Bt=1;else{var Or=m.minX-(l+T);xe=U.attr("x")+Or}else if(l+P>=m.maxX)if(s==="rightward")Bt=-1;else{var Or=l+P-m.maxX;xe=U.attr("x")-Or}if(Bt&&(se&&se.attr("path",[["M",0,0],["L",d*Bt,0]]),xe=(d+2+vt)*Bt),f+D<=m.minY)if(s==="upward")_r=1;else{var Or=m.minY-(f+D);Ee=U.attr("y")+Or}else if(f+B>=m.maxY)if(s==="downward")_r=-1;else{var Or=f+B-m.maxY;Ee=U.attr("y")-Or}_r&&(se&&se.attr("path",[["M",0,0],["L",0,d*_r]]),Ee=(d+2+xt)*_r),(xe!==U.attr("x")||Ee!==U.attr("y"))&&zl(U,xe,Ee)}},n.prototype.getShapeAttrs=function(){var t=(0,E.U2)(this.get("line"),"display"),s=(0,E.U2)(this.get("point"),"style",{}),l=(0,E.U2)(this.get("line"),"style",{}),f=(0,E.U2)(this.get("text"),"style",{}),d=this.get("direction"),m=t?(0,E.U2)(this.get("line"),"length",0):0,x=0,T=0,P="top",D="start";switch(d){case"upward":T=-1,P="bottom";break;case"downward":T=1,P="top";break;case"leftward":x=-1,D="end";break;case"rightward":x=1,D="start";break}return{point:(0,M.pi)({x:0,y:0},s),line:(0,M.pi)({path:[["M",0,0],["L",m*x,m*T]]},l),text:(0,M.pi)({x:(m+2)*x,y:(m+2)*T,text:(0,E.U2)(this.get("text"),"content",""),textBaseline:P,textAlign:D},f)}},n}(wi),sd=er,Ys=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Ta.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Ta.textColor,fontFamily:Ta.fontFamily}}}})},n.prototype.renderInner=function(t){var s=(0,E.U2)(this.get("region"),"style",{}),l=(0,E.U2)(this.get("text"),"style",{}),f=this.get("lineLength")||0,d=this.get("points");if(d.length){var m=Tp(d),x=[];x.push(["M",d[0].x,m.minY-f]),d.forEach(function(P){x.push(["L",P.x,P.y])}),x.push(["L",d[d.length-1].x,d[d.length-1].y-f]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.pi)({path:x},s)});var T=(0,M.pi)({id:this.getElementId("text"),name:"annotation-text",x:(m.minX+m.maxX)/2,y:m.minY-f},this.get("text"));uc(t,T)}},n}(wi),Ul=Ys,$h=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},n.prototype.renderInner=function(t){var s=this,l=this.get("start"),f=this.get("end"),d=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,E.S6)(this.get("shapes"),function(x,T){var P=x.get("type"),D=(0,E.d9)(x.attr());s.adjustShapeAttrs(D),s.addShape(d,{id:s.getElementId("shape-"+P+"-"+T),capture:!1,type:P,attrs:D})});var m=Cu({start:l,end:f});d.setClip({type:"rect",attrs:{x:m.minX,y:m.minY,width:m.width,height:m.height}})},n.prototype.adjustShapeAttrs=function(t){var s=this.get("color");t.fill&&(t.fill=t.fillStyle=s),t.stroke=t.strokeStyle=s},n}(wi),Cl=$h,Ap=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"shape",draw:E.ZT})},n.prototype.renderInner=function(t){var s=this.get("render");(0,E.mf)(s)&&s(t)},n}(wi),Mp=Ap;function b(i,n,t){var s;try{s=window.getComputedStyle?window.getComputedStyle(i,null)[n]:i.style[n]}catch(l){}finally{s=s===void 0?t:s}return s}function A(i,n){var t=b(i,"width",n);return t==="auto"&&(t=i.offsetWidth),parseFloat(t)}function C(i,n){var t=A(i,n),s=parseFloat(b(i,"borderLeftWidth"))||0,l=parseFloat(b(i,"paddingLeft"))||0,f=parseFloat(b(i,"paddingRight"))||0,d=parseFloat(b(i,"borderRightWidth"))||0,m=parseFloat(b(i,"marginRight"))||0,x=parseFloat(b(i,"marginLeft"))||0;return t+s+d+l+f+x+m}function I(i,n){var t=b(i,"height",n);return t==="auto"&&(t=i.offsetHeight),parseFloat(t)}function Z(i,n){var t=I(i,n),s=parseFloat(b(i,"borderTopWidth"))||0,l=parseFloat(b(i,"paddingTop"))||0,f=parseFloat(b(i,"paddingBottom"))||0,d=parseFloat(b(i,"borderBottomWidth"))||0,m=parseFloat(b(i,"marginTop"))||0,x=parseFloat(b(i,"marginBottom"))||0;return t+s+d+l+f+m+x}var ee=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},n.prototype.getContainer=function(){return this.get("container")},n.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},n.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},n.prototype.setCapture=function(t){var s=this.getContainer(),l=t?"auto":"none";s.style.pointerEvents=l,this.set("capture",t)},n.prototype.getBBox=function(){var t=this.getContainer(),s=parseFloat(t.style.left)||0,l=parseFloat(t.style.top)||0;return Ac(s,l,t.clientWidth,t.clientHeight)},n.prototype.clear=function(){var t=this.get("container");Vh(t)},n.prototype.destroy=function(){this.removeEvent(),this.removeDom(),i.prototype.destroy.call(this)},n.prototype.init=function(){i.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},n.prototype.initCapture=function(){this.setCapture(this.get("capture"))},n.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},n.prototype.initDom=function(){},n.prototype.initContainer=function(){var t=this.get("container");if((0,E.UM)(t)){t=this.createDom();var s=this.get("parent");(0,E.HD)(s)&&(s=document.getElementById(s),this.set("parent",s)),s.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else(0,E.HD)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},n.prototype.resetStyles=function(){var t=this.get("domStyles"),s=this.get("defaultStyles");t?t=(0,E.b$)({},s,t):t=s,this.set("domStyles",t)},n.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var s=this.getContainer();this.applyChildrenStyles(s,t);var l=this.get("containerClassName");if(l&&Tc(s,l)){var f=t[l];(0,oe.Z)(s,f)}}},n.prototype.applyChildrenStyles=function(t,s){(0,E.S6)(s,function(l,f){var d=t.getElementsByClassName(f);(0,E.S6)(d,function(m){(0,oe.Z)(m,l)})})},n.prototype.applyStyle=function(t,s){var l=this.get("domStyles");(0,oe.Z)(s,l[t])},n.prototype.createDom=function(){var t=this.get("containerTpl");return(0,We.Z)(t)},n.prototype.initEvent=function(){},n.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},n.prototype.removeEvent=function(){},n.prototype.updateInner=function(t){(0,E.wH)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},n.prototype.resetPosition=function(){},n}(Mc),ae=ee,Ae=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},n.prototype.render=function(){var t=this.getContainer(),s=this.get("html");Vh(t);var l=(0,E.mf)(s)?s(t):s;if((0,E.kK)(l))t.appendChild(l);else if((0,E.HD)(l)||(0,E.hj)(l)){var f=(0,We.Z)(""+l);f&&t.appendChild(f)}this.resetPosition()},n.prototype.resetPosition=function(){var t=this.getContainer(),s=this.getLocation(),l=s.x,f=s.y,d=this.get("alignX"),m=this.get("alignY"),x=this.get("offsetX"),T=this.get("offsetY"),P=C(t),D=Z(t),B={x:l,y:f};d==="middle"?B.x-=Math.round(P/2):d==="right"&&(B.x-=Math.round(P)),m==="middle"?B.y-=Math.round(D/2):m==="bottom"&&(B.y-=Math.round(D)),x&&(B.x+=x),T&&(B.y+=T),(0,oe.Z)(t,{position:"absolute",left:B.x+"px",top:B.y+"px",zIndex:this.get("zIndex")})},n}(ae),at=Ae;function bt(i,n,t){var s=n+"Style",l=null;return(0,E.S6)(t,function(f,d){i[d]&&f[s]&&(l||(l={}),(0,E.CD)(l,f[s]))}),l}var Vt=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Ta.lineColor}},tickLine:{style:{lineWidth:1,stroke:Ta.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Ta.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Ta.textColor,fontFamily:Ta.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Ta.textColor,textBaseline:"middle",fontFamily:Ta.fontFamily,textAlign:"center"},iconStyle:{fill:Ta.descriptionIconFill,stroke:Ta.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Ta.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},n.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("ticks")},n.prototype.setItems=function(t){this.update({ticks:t})},n.prototype.updateItem=function(t,s){(0,E.CD)(t,s),this.clear(),this.render()},n.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},n.prototype.setItemState=function(t,s,l){t[s]=l,this.updateTickStates(t)},n.prototype.hasState=function(t,s){return!!t[s]},n.prototype.getItemStates=function(t){var s=this.get("tickStates"),l=[];return(0,E.S6)(s,function(f,d){t[d]&&l.push(d)}),l},n.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,E.S6)(l,function(f){s.setItemState(f,t,!1)})},n.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,E.hX)(l,function(f){return s.hasState(f,t)})},n.prototype.getSidePoint=function(t,s){var l=this,f=l.getSideVector(s,t);return{x:t.x+f[0],y:t.y+f[1]}},n.prototype.getTextAnchor=function(t){var s;return(0,E.vQ)(t[0],0)?s="center":t[0]>0?s="start":t[0]<0&&(s="end"),s},n.prototype.getTextBaseline=function(t){var s;return(0,E.vQ)(t[1],0)?s="middle":t[1]>0?s="top":t[1]<0&&(s="bottom"),s},n.prototype.processOverlap=function(t){},n.prototype.drawLine=function(t){var s=this.getLinePath(),l=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,E.CD)({path:s},l.style)})},n.prototype.getTickLineItems=function(t){var s=this,l=[],f=this.get("tickLine"),d=f.alignTick,m=f.length,x=1,T=t.length;return T>=2&&(x=t[1].value-t[0].value),(0,E.S6)(t,function(P){var D=P.point;d||(D=s.getTickPoint(P.value-x/2));var B=s.getSidePoint(D,m);l.push({startPoint:D,tickValue:P.value,endPoint:B,tickId:P.id,id:"tickline-"+P.id})}),l},n.prototype.getSubTickLineItems=function(t){var s=[],l=this.get("subTickLine"),f=l.count,d=t.length;if(d>=2)for(var m=0;m<d-1;m++)for(var x=t[m],T=t[m+1],P=0;P<f;P++){var D=(P+1)/(f+1),B=(1-D)*x.tickValue+D*T.tickValue,U=this.getTickPoint(B),Y=this.getSidePoint(U,l.length);s.push({startPoint:U,endPoint:Y,tickValue:B,id:"sub-"+x.id+"-"+P})}return s},n.prototype.getTickLineAttrs=function(t,s,l,f){var d=this.get(s).style,m={points:[t.startPoint,t.endPoint]},x=(0,E.U2)(this.get("theme"),["tickLine","style"],{});d=(0,E.mf)(d)?(0,E.CD)({},x,d(m,l,f)):d;var T=t.startPoint,P=t.endPoint;return(0,M.pi)({x1:T.x,y1:T.y,x2:P.x,y2:P.y},d)},n.prototype.drawTick=function(t,s,l,f,d){this.addShape(s,{type:"line",id:this.getElementId(t.id),name:"axis-"+l,attrs:this.getTickLineAttrs(t,l,f,d)})},n.prototype.drawTickLines=function(t){var s=this,l=this.get("ticks"),f=this.get("subTickLine"),d=this.getTickLineItems(l),m=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),x=this.get("tickLine");if((0,E.S6)(d,function(P,D){if(x.displayWithLabel){var B=s.getElementId("label-"+P.tickId);t.findById(B)&&s.drawTick(P,m,"tickLine",D,d)}else s.drawTick(P,m,"tickLine",D,d)}),f){var T=this.getSubTickLineItems(d);(0,E.S6)(T,function(P,D){s.drawTick(P,m,"subTickLine",D,T)})}},n.prototype.processTicks=function(){var t=this,s=this.get("ticks");(0,E.S6)(s,function(l){l.point=t.getTickPoint(l.value),(0,E.UM)(l.id)&&(l.id=l.name)})},n.prototype.drawTicks=function(t){var s=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var l=this.get("ticks");(0,E.S6)(l,function(f){s.applyTickStates(f,t)})},n.prototype.optimizeTicks=function(){var t=this.get("optimize"),s=this.get("ticks");if(t&&t.enable&&t.threshold>0){var l=(0,E.dp)(s);if(l>t.threshold){var f=Math.ceil(l/t.threshold),d=s.filter(function(m,x){return x%f===0});this.set("ticks",d),this.set("originalTicks",s)}}},n.prototype.getLabelAttrs=function(t,s,l){var f=this.get("label"),d=f.offset,m=f.offsetX,x=f.offsetY,T=f.rotate,P=f.formatter,D=this.getSidePoint(t.point,d),B=this.getSideVector(d,D),U=P?P(t.name,t,s):t.name,Y=f.style;Y=(0,E.mf)(Y)?(0,E.U2)(this.get("theme"),["label","style"],{}):Y;var se=(0,E.CD)({x:D.x+m,y:D.y+x,text:U,textAlign:this.getTextAnchor(B),textBaseline:this.getTextBaseline(B)},Y);return T&&(se.matrix=Yc(D,T)),se},n.prototype.drawLabels=function(t){var s=this,l=this.get("ticks"),f=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,E.S6)(l,function(B,U){s.addShape(f,{type:"text",name:"axis-label",id:s.getElementId("label-"+B.id),attrs:s.getLabelAttrs(B,U,l),delegateObject:{tick:B,item:B,index:U}})}),this.processOverlap(f);var d=f.getChildren(),m=(0,E.U2)(this.get("theme"),["label","style"],{}),x=this.get("label"),T=x.style,P=x.formatter;if((0,E.mf)(T)){var D=d.map(function(B){return(0,E.U2)(B.get("delegateObject"),"tick")});(0,E.S6)(d,function(B,U){var Y=B.get("delegateObject").tick,se=P?P(Y.name,Y,U):Y.name,xe=(0,E.CD)({},m,T(se,U,D));B.attr(xe)})}},n.prototype.getTitleAttrs=function(){var t=this.get("title"),s=t.style,l=t.position,f=t.offset,d=t.spacing,m=d===void 0?0:d,x=t.autoRotate,T=s.fontSize,P=.5;l==="start"?P=0:l==="end"&&(P=1);var D=this.getTickPoint(P),B=this.getSidePoint(D,f||m+T/2),U=(0,E.CD)({x:B.x,y:B.y,text:t.text},s),Y=t.rotate,se=Y;if((0,E.UM)(Y)&&x){var xe=this.getAxisVector(D),Ee=[1,0];se=vo.Dg(xe,Ee,!0)}if(se){var rt=Yc(B,se);U.matrix=rt}return U},n.prototype.drawTitle=function(t){var s,l=this.getTitleAttrs(),f=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:l});!((s=this.get("title"))===null||s===void 0)&&s.description&&this.drawDescriptionIcon(t,f,l.matrix)},n.prototype.drawDescriptionIcon=function(t,s,l){var f=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),d=s.getBBox(),m=d.maxX,x=d.maxY,T=d.height,P=this.get("title").iconStyle,D=4,B=T/2,U=B/6,Y=m+D,se=x-T/2,xe=[Y+B,se-B],Ee=xe[0],rt=xe[1],vt=[Ee+B,rt+B],xt=vt[0],Bt=vt[1],_r=[Ee,Bt+B],Or=_r[0],Wr=_r[1],gn=[Y,rt+B],$r=gn[0],zn=gn[1],li=[Y+B,se-T/4],zi=li[0],ia=li[1],qa=[zi,ia+U],Hn=qa[0],Di=qa[1],Zi=[Hn,Di+U],yi=Zi[0],Vi=Zi[1],Pa=[yi,Vi+B*3/4],so=Pa[0],Mo=Pa[1];this.addShape(f,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:(0,M.pi)({path:[["M",Ee,rt],["A",B,B,0,0,1,xt,Bt],["A",B,B,0,0,1,Or,Wr],["A",B,B,0,0,1,$r,zn],["A",B,B,0,0,1,Ee,rt],["M",zi,ia],["L",Hn,Di],["M",yi,Vi],["L",so,Mo]],lineWidth:U,matrix:l},P)}),this.addShape(f,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:Y,y:se-T/2,width:T,height:T,stroke:"#000",fill:"#000",opacity:0,matrix:l,cursor:"pointer"}})},n.prototype.applyTickStates=function(t,s){var l=this.getItemStates(t);if(l.length){var f=this.get("tickStates"),d=this.getElementId("label-"+t.id),m=s.findById(d);if(m){var x=bt(t,"label",f);x&&m.attr(x)}var T=this.getElementId("tickline-"+t.id),P=s.findById(T);if(P){var D=bt(t,"tickLine",f);D&&P.attr(D)}}},n.prototype.updateTickStates=function(t){var s=this.getItemStates(t),l=this.get("tickStates"),f=this.get("label"),d=this.getElementByLocalId("label-"+t.id),m=this.get("tickLine"),x=this.getElementByLocalId("tickline-"+t.id);if(s.length){if(d){var T=bt(t,"label",l);T&&d.attr(T)}if(x){var P=bt(t,"tickLine",l);P&&x.attr(P)}}else d&&d.attr(f.style),x&&x.attr(m.style)},n}(wi),Wt=Vt;function $t(i,n,t,s){var l=n.getChildren(),f=!1;return(0,E.S6)(l,function(d){var m=Ff(i,d,t,s);f=f||m}),f}function dr(){return Rr}function hr(i,n,t){return $t(i,n,t,"head")}function Rr(i,n,t){return $t(i,n,t,"tail")}function lr(i,n,t){return $t(i,n,t,"middle")}function Ir(i){var n=i.attr("matrix");return n&&n[0]!==1}function Hr(i){var n=Ir(i)?cl(i.attr("matrix")):0;return n%360}function en(i,n,t,s){var l=!1,f=Hr(n),d=Math.abs(i?t.attr("y")-n.attr("y"):t.attr("x")-n.attr("x")),m=(i?t.attr("y")>n.attr("y"):t.attr("x")>n.attr("x"))?n.getBBox():t.getBBox();if(i){var x=Math.abs(Math.cos(f));jh(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}else{var x=Math.abs(Math.sin(f));jh(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}return l}function _n(i,n,t,s){var l=(s==null?void 0:s.minGap)||0,f=n.getChildren().slice().filter(function(Y){return Y.get("visible")});if(!f.length)return!1;var d=!1;t&&f.reverse();for(var m=f.length,x=f[0],T=x,P=1;P<m;P++){var D=f[P],B=D.getBBox(),U=en(i,T,D,l);U?(D.hide(),d=!0):T=D}return d}function pn(i,n,t){var s=(t==null?void 0:t.minGap)||0,l=n.getChildren().slice();if(l.length<2)return!1;var f=!1,d=l[0],m=d.getBBox(),x=l[1],T=l.length,P=Hr(d),D=Math.abs(i?x.attr("y")-d.attr("y"):x.attr("x")-d.attr("x")),B=0;if(i){var U=Math.abs(Math.cos(P));if(jh(U,0,Math.PI/180)){var Y=Xs(l);B=(Y+s)/D}else B=(m.height/U+s)/D}else{var U=Math.abs(Math.sin(P));if(jh(U,0,Math.PI/180)){var Y=Xs(l);B=(Y+s)/D}else B=(m.height/U+s)/D}if(B>1){B=Math.ceil(B);for(var se=0;se<T;se++)se%B!==0&&(l[se].hide(),f=!0)}return f}function An(){return Pi}function Ln(i,n,t,s){return _n(i,n,!1,s)}function pi(i,n,t,s){return _n(i,n,!0,s)}function oi(i,n,t,s){var l=(s==null?void 0:s.minGap)||0,f=n.getChildren().slice();if(f.length<=2)return!1;for(var d=!1,m=f.length,x=f[0],T=f[m-1],P=x,D=1;D<m-1;D++){var B=f[D],U=B.getBBox(),Y=en(i,P,B,l);Y?(B.hide(),d=!0):P=B}var se=en(i,P,T,l);return se&&(P.hide(),d=!0),d}function Pi(i,n,t,s){var l=pn(i,n,s);return _n(i,n,!1)&&(l=!0),l}function ta(i,n,t,s){var l=n.getChildren().slice(),f=pn(i,n,s);if(l.length>2){var d=l[0],m=l[l.length-1];d.get("visible")||(d.show(),_n(i,n,!1,s)&&(f=!0)),m.get("visible")||(m.show(),_n(i,n,!0,s)&&(f=!0))}return f}function sa(i,n){(0,E.S6)(i,function(t){var s=t.attr("x"),l=t.attr("y"),f=Yc({x:s,y:l},n);t.attr("matrix",f)})}function Ki(i,n,t,s){var l=n.getChildren();if(!l.length||!i&&l.length<2)return!1;var f=Xs(l),d=!1;if(i)d=!!t&&f>t;else{var m=Math.abs(l[1].attr("x")-l[0].attr("x"));d=f>m}if(d){var x=s(t,f);sa(l,x)}return d}function _o(){return Bi}function Bi(i,n,t,s){return Ki(i,n,t,function(){return(0,E.hj)(s)?s:i?Ta.verticalAxisRotate:Ta.horizontalAxisRotate})}function Ia(i,n,t){return Ki(i,n,t,function(s,l){if(!s)return i?Ta.verticalAxisRotate:Ta.horizontalAxisRotate;if(i)return-Math.acos(s/l);var f=0;return s>l?f=Math.PI/4:(f=Math.asin(s/l),f>Math.PI/4&&(f=Math.PI/4)),f})}var La=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getLinePath=function(){var t=this.get("start"),s=this.get("end"),l=[];return l.push(["M",t.x,t.y]),l.push(["L",s.x,s.y]),l},n.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),s=this.get("end"),l=i.prototype.getInnerLayoutBBox.call(this),f=Math.min(t.x,s.x,l.x),d=Math.min(t.y,s.y,l.y),m=Math.max(t.x,s.x,l.maxX),x=Math.max(t.y,s.y,l.maxY);return{x:f,y:d,minX:f,minY:d,maxX:m,maxY:x,width:m-f,height:x-d}},n.prototype.isVertical=function(){var t=this.get("start"),s=this.get("end");return(0,E.vQ)(t.x,s.x)},n.prototype.isHorizontal=function(){var t=this.get("start"),s=this.get("end");return(0,E.vQ)(t.y,s.y)},n.prototype.getTickPoint=function(t){var s=this,l=s.get("start"),f=s.get("end"),d=f.x-l.x,m=f.y-l.y;return{x:l.x+d*t,y:l.y+m*t}},n.prototype.getSideVector=function(t){var s=this.getAxisVector(),l=va.Fv([0,0],s),f=this.get("verticalFactor"),d=[l[1],l[0]*-1];return va.bA([0,0],d,t*f)},n.prototype.getAxisVector=function(){var t=this.get("start"),s=this.get("end");return[s.x-t.x,s.y-t.y]},n.prototype.processOverlap=function(t){var s=this,l=this.isVertical(),f=this.isHorizontal();if(!(!l&&!f)){var d=this.get("label"),m=this.get("title"),x=this.get("verticalLimitLength"),T=d.offset,P=x,D=0,B=0;m&&(D=m.style.fontSize,B=m.spacing),P&&(P=P-T-B-D);var U=this.get("overlapOrder");if((0,E.S6)(U,function(xe){d[xe]&&s.canProcessOverlap(xe)&&s.autoProcessOverlap(xe,d[xe],t,P)}),m&&(0,E.UM)(m.offset)){var Y=t.getCanvasBBox(),se=l?Y.width:Y.height;m.offset=T+se+B+D/2}}},n.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,E.UM)(s.rotate):!0},n.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=this.isVertical(),x=!1,T=q[t];if(s===!0){var P=this.get("label");x=T.getDefault()(m,l,f)}else if((0,E.mf)(s))x=s(m,l,f);else if((0,E.Kn)(s)){var D=s;T[D.type]&&(x=T[D.type](m,l,f,D.cfg))}else T[s]&&(x=T[s](m,l,f));if(t==="autoRotate"){if(x){var B=l.getChildren(),U=this.get("verticalFactor");(0,E.S6)(B,function(se){var xe=se.attr("textAlign");if(xe==="center"){var Ee=U>0?"end":"start";se.attr("textAlign",Ee)}})}}else if(t==="autoHide"){var Y=l.getChildren().slice(0);(0,E.S6)(Y,function(se){se.get("visible")||(d.get("isRegister")&&d.unregisterElement(se),se.remove())})}},n}(Wt),Aa=La,fa=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getLinePath=function(){var t=this.get("center"),s=t.x,l=t.y,f=this.get("radius"),d=f,m=this.get("startAngle"),x=this.get("endAngle"),T=[];if(Math.abs(x-m)===Math.PI*2)T=[["M",s,l-d],["A",f,d,0,1,1,s,l+d],["A",f,d,0,1,1,s,l-d],["Z"]];else{var P=this.getCirclePoint(m),D=this.getCirclePoint(x),B=Math.abs(x-m)>Math.PI?1:0,U=m>x?0:1;T=[["M",s,l],["L",P.x,P.y],["A",f,d,0,B,U,D.x,D.y],["L",s,l]]}return T},n.prototype.getTickPoint=function(t){var s=this.get("startAngle"),l=this.get("endAngle"),f=s+(l-s)*t;return this.getCirclePoint(f)},n.prototype.getSideVector=function(t,s){var l=this.get("center"),f=[s.x-l.x,s.y-l.y],d=this.get("verticalFactor"),m=va.kE(f);return va.bA(f,f,d*t/m),f},n.prototype.getAxisVector=function(t){var s=this.get("center"),l=[t.x-s.x,t.y-s.y];return[l[1],-1*l[0]]},n.prototype.getCirclePoint=function(t,s){var l=this.get("center");return s=s||this.get("radius"),{x:l.x+Math.cos(t)*s,y:l.y+Math.sin(t)*s}},n.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,E.UM)(s.rotate):!0},n.prototype.processOverlap=function(t){var s=this,l=this.get("label"),f=this.get("title"),d=this.get("verticalLimitLength"),m=l.offset,x=d,T=0,P=0;f&&(T=f.style.fontSize,P=f.spacing),x&&(x=x-m-P-T);var D=this.get("overlapOrder");if((0,E.S6)(D,function(U){l[U]&&s.canProcessOverlap(U)&&s.autoProcessOverlap(U,l[U],t,x)}),f&&(0,E.UM)(f.offset)){var B=t.getCanvasBBox().height;f.offset=m+B+P+T/2}},n.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=!1,x=q[t];if(f>0)if(s===!0)m=x.getDefault()(!1,l,f);else if((0,E.mf)(s))m=s(!1,l,f);else if((0,E.Kn)(s)){var T=s;x[T.type]&&(m=x[T.type](!1,l,f,T.cfg))}else x[s]&&(m=x[s](!1,l,f));if(t==="autoRotate"){if(m){var P=l.getChildren(),D=this.get("verticalFactor");(0,E.S6)(P,function(U){var Y=U.attr("textAlign");if(Y==="center"){var se=D>0?"end":"start";U.attr("textAlign",se)}})}}else if(t==="autoHide"){var B=l.getChildren().slice(0);(0,E.S6)(B,function(U){U.get("visible")||(d.get("isRegister")&&d.unregisterElement(U),U.remove())})}},n}(Wt),Ma=fa,Ea=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Ta.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Ta.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Ta.fontFamily}},textBackground:{padding:5,style:{stroke:Ta.lineColor}}}})},n.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},n.prototype.renderText=function(t){var s=this.get("text"),l=s.style,f=s.autoRotate,d=s.content;if(!(0,E.UM)(d)){var m=this.getTextPoint(),x=null;if(f){var T=this.getRotateAngle();x=Yc(m,T)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{text:d,matrix:x}),l)})}},n.prototype.renderLine=function(t){var s=this.getLinePath(),l=this.get("line"),f=l.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,M.pi)({path:s},f)})},n.prototype.renderBackground=function(t){var s=this.getElementId("text"),l=t.findById(s),f=this.get("textBackground");if(f&&l){var d=l.getBBox(),m=ph(f.padding),x=f.style,T=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,M.pi)({x:d.x-m[3],y:d.y-m[0],width:d.width+m[1]+m[3],height:d.height+m[0]+m[2],matrix:l.attr("matrix")},x)});T.toBack()}},n}(wi),ha=Ea,Au=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text").position,d=Math.atan2(l.y-s.y,l.x-s.x),m=f==="start"?d-Math.PI/2:d+Math.PI/2;return m},n.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return Kl(s,l,d,m)},n.prototype.getLinePath=function(){var t=this.getLocation(),s=t.start,l=t.end;return[["M",s.x,s.y],["L",l.x,l.y]]},n}(ha),Ls=Au,$u=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.startAngle,l=t.endAngle,f=this.get("text").position,d=f==="start"?s+Math.PI/2:l-Math.PI/2;return d},n.prototype.getTextPoint=function(){var t=this.get("text"),s=t.position,l=t.offset,f=this.getLocation(),d=f.center,m=f.radius,x=f.startAngle,T=f.endAngle,P=s==="start"?x:T,D=this.getRotateAngle()-Math.PI,B=fl(d,m,P),U=Math.cos(D)*l,Y=Math.sin(D)*l;return{x:B.x+U,y:B.y+Y}},n.prototype.getLinePath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=null;if(d-f===Math.PI*2){var x=s.x,T=s.y;m=[["M",x,T-l],["A",l,l,0,1,1,x,T+l],["A",l,l,0,1,1,x,T-l],["Z"]]}else{var P=fl(s,l,f),D=fl(s,l,d),B=Math.abs(d-f)>Math.PI?1:0,U=f>d?0:1;m=[["M",P.x,P.y],["A",l,l,0,B,U,D.x,D.y]]}return m},n}(ha),Mu=$u,es="g2-crosshair",ys=es+"-line",Ru=es+"-text",gu,Qc=(gu={},gu[""+es]={position:"relative"},gu[""+ys]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},gu[""+Ru]={position:"absolute",color:Ta.textColor,fontFamily:Ta.fontFamily},gu),nl=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+es+'"></div>',crosshairTpl:'<div class="'+ys+'"></div>',textTpl:'<span class="'+Ru+'">{content}</span>',domStyles:null,containerClassName:es,defaultStyles:Qc,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},n.prototype.render=function(){this.resetText(),this.resetPosition()},n.prototype.initCrossHair=function(){var t=this.getContainer(),s=this.get("crosshairTpl"),l=(0,We.Z)(s);t.appendChild(l),this.applyStyle(ys,l),this.set("crosshairEl",l)},n.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return Kl(s,l,d,m)},n.prototype.resetText=function(){var t=this.get("text"),s=this.get("textEl");if(t){var l=t.content;if(!s){var f=this.getContainer(),d=(0,E.ng)(this.get("textTpl"),t);s=(0,We.Z)(d),f.appendChild(s),this.applyStyle(Ru,s),this.set("textEl",s)}s.innerHTML=l}else s&&s.remove()},n.prototype.isVertical=function(t,s){return t.x===s.x},n.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var s=this.get("start"),l=this.get("end"),f=Math.min(s.x,l.x),d=Math.min(s.y,l.y);this.isVertical(s,l)?(0,oe.Z)(t,{width:"1px",height:ws(Math.abs(l.y-s.y))}):(0,oe.Z)(t,{height:"1px",width:ws(Math.abs(l.x-s.x))}),(0,oe.Z)(t,{top:ws(d),left:ws(f)}),this.alignText()},n.prototype.alignText=function(){var t=this.get("textEl");if(t){var s=this.get("text").align,l=t.clientWidth,f=this.getTextPoint();switch(s){case"center":f.x=f.x-l/2;break;case"right":f.x=f.x-l;case"left":break}(0,oe.Z)(t,{top:ws(f.y),left:ws(f.x)})}},n.prototype.updateInner=function(t){(0,E.wH)(t,"text")&&this.resetText(),i.prototype.updateInner.call(this,t)},n}(ae),lc=nl,hl=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Ta.lineColor}}}})},n.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},n.prototype.renderInner=function(t){this.drawGrid(t)},n.prototype.getAlternatePath=function(t,s){var l=this.getGridPath(t),f=s.slice(0).reverse(),d=this.getGridPath(f,!0),m=this.get("closed");return m?l=l.concat(d):(d[0][0]="L",l=l.concat(d),l.push(["Z"])),l},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(t){var s=this,l=this.get("line"),f=this.get("items"),d=this.get("alternateColor"),m=null;(0,E.S6)(f,function(x,T){var P=x.id||T;if(l){var D=s.getPathStyle();D=(0,E.mf)(D)?D(x,T,f):D;var B=s.getElementId("line-"+P),U=s.getGridPath(x.points);s.addShape(t,{type:"path",name:"grid-line",id:B,attrs:(0,E.CD)({path:U},D)})}if(d&&T>0){var Y=s.getElementId("region-"+P),se=T%2===0;if((0,E.HD)(d))se&&s.drawAlternateRegion(Y,t,m.points,x.points,d);else{var xe=se?d[1]:d[0];s.drawAlternateRegion(Y,t,m.points,x.points,xe)}}m=x})},n.prototype.drawAlternateRegion=function(t,s,l,f,d){var m=this.getAlternatePath(l,f);this.addShape(s,{type:"path",id:t,name:"grid-region",attrs:{path:m,fill:d}})},n}(wi),Nf=hl;function vf(i,n,t,s){var l=t-i,f=s-n;return Math.sqrt(l*l+f*f)}var Jc=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(t,s){var l=this.getLineType(),f=this.get("closed"),d=[];if(t.length)if(l==="circle"){var m=this.get("center"),x=t[0],T=vf(m.x,m.y,x.x,x.y),P=s?0:1;f?(d.push(["M",m.x,m.y-T]),d.push(["A",T,T,0,0,P,m.x,m.y+T]),d.push(["A",T,T,0,0,P,m.x,m.y-T]),d.push(["Z"])):(0,E.S6)(t,function(D,B){B===0?d.push(["M",D.x,D.y]):d.push(["A",T,T,0,0,P,D.x,D.y])})}else(0,E.S6)(t,function(D,B){B===0?d.push(["M",D.x,D.y]):d.push(["L",D.x,D.y])}),f&&d.push(["Z"]);return d},n}(Nf),gf=Jc,cc=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line"})},n.prototype.getGridPath=function(t){var s=[];return(0,E.S6)(t,function(l,f){f===0?s.push(["M",l.x,l.y]):s.push(["L",l.x,l.y])}),s},n}(Nf),fc=cc,mf=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},n.prototype.getLayoutBBox=function(){var t=i.prototype.getLayoutBBox.call(this),s=this.get("maxWidth"),l=this.get("maxHeight"),f=t.width,d=t.height;return s&&(f=Math.min(f,s)),l&&(d=Math.min(d,l)),Ac(t.minX,t.minY,f,d)},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},n.prototype.resetLocation=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offsetX"),f=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+l,y:s+f})},n.prototype.applyOffset=function(){this.resetLocation()},n.prototype.getDrawPoint=function(){return this.get("currentPoint")},n.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},n.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},n.prototype.drawBackground=function(t){var s=this.get("background"),l=t.getBBox(),f=ph(s.padding),d=(0,M.pi)({x:0,y:0,width:l.width+f[1]+f[3],height:l.height+f[0]+f[2]},s.style),m=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:d});m.toBack()},n.prototype.drawTitle=function(t){var s=this.get("currentPoint"),l=this.get("title"),f=l.spacing,d=l.style,m=l.text,x=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,M.pi)({text:m,x:s.x,y:s.y},d)}),T=x.getBBox();this.set("currentPoint",{x:s.x,y:T.maxY+f})},n.prototype.resetDraw=function(){var t=this.get("background"),s={x:0,y:0};if(t){var l=ph(t.padding);s.x=l[3],s.y=l[0]}this.set("currentPoint",s)},n}(wi),Lu=mf,Ts={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},ou={fill:Ta.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Ta.fontFamily,fontWeight:"normal",lineHeight:12},Tl="navigation-arrow-right",ql="navigation-arrow-left",go={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Xu=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t.onNavigationAfter=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Ta.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Ta.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:Ts,itemName:{spacing:16,style:ou},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:ou,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Ta.uncheckedColor},markerStyle:{fill:Ta.uncheckedColor,stroke:Ta.uncheckedColor}},inactive:{nameStyle:{fill:Ta.uncheckedColor},markerStyle:{opacity:.2}}}}})},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("items")},n.prototype.setItems=function(t){this.update({items:t})},n.prototype.updateItem=function(t,s){(0,E.CD)(t,s),this.clear(),this.render()},n.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},n.prototype.setItemState=function(t,s,l){t[s]=l;var f=this.getElementByLocalId("item-"+t.id);if(f){var d=this.getItems(),m=d.indexOf(t),x=this.createOffScreenGroup(),T=this.drawItem(t,m,this.getItemHeight(),x);this.updateElements(T,f),this.clearUpdateStatus(f)}},n.prototype.hasState=function(t,s){return!!t[s]},n.prototype.getItemStates=function(t){var s=this.get("itemStates"),l=[];return(0,E.S6)(s,function(f,d){t[d]&&l.push(d)}),l},n.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,E.S6)(l,function(f){s.setItemState(f,t,!1)})},n.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,E.hX)(l,function(f){return s.hasState(f,t)})},n.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},n.prototype.processItems=function(){var t=this.get("items");(0,E.S6)(t,function(s){s.id||(s.id=s.name)})},n.prototype.drawItems=function(t){var s=this,l=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),f=this.addGroup(l,{id:this.getElementId("item-group"),name:"legend-item-group"}),d=this.getItemHeight(),m=this.get("itemWidth"),x=this.get("itemSpacing"),T=this.get("itemMarginBottom"),P=this.get("currentPoint"),D=P.x,B=P.y,U=this.get("layout"),Y=this.get("items"),se=!1,xe=0,Ee=this.get("maxWidth"),rt=this.get("maxHeight");(0,E.S6)(Y,function(vt,xt){var Bt=s.drawItem(vt,xt,d,f),_r=Bt.getBBox(),Or=m||_r.width;Or>xe&&(xe=Or),U==="horizontal"?(Ee&&Ee<P.x+Or-D&&(se=!0,P.x=D,P.y+=d+T),s.moveElementTo(Bt,P),P.x+=Or+x):(rt&&rt<P.y+d+T-B&&(se=!0,P.x+=xe+x,P.y=B,xe=0),s.moveElementTo(Bt,P),P.y+=d+T)}),se&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=D,this.startY=B,this.adjustNavigation(t,f))},n.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var s=(this.get("itemName")||{}).style;if((0,E.mf)(s)){var l=this.getItems();l.forEach(function(f,d){var m=(0,M.pi)((0,M.pi)({},ou),s(f,d,l)).fontSize;t<m&&(t=m)})}else s&&(t=s.fontSize)}return t},n.prototype.drawMarker=function(t,s,l,f){var d=(0,M.pi)((0,M.pi)((0,M.pi)({x:0,y:f/2},s.style),{symbol:(0,E.U2)(l.marker,"symbol","circle")}),(0,E.U2)(l.marker,"style",{})),m=this.addShape(t,{type:"marker",id:this.getElementId("item-"+l.id+"-marker"),name:"legend-item-marker",attrs:d}),x=m.getBBox();m.attr("x",x.width/2);var T=m.attr(),P=T.stroke,D=T.fill;return P&&m.set("isStroke",!0),D&&m.set("isFill",!0),m},n.prototype.drawItemText=function(t,s,l,f,d,m,x){var T=l.formatter,P=l.style,D=(0,M.pi)((0,M.pi)({x:m,y:d/2,text:T?T(f[s],f,x):f[s]},ou),(0,E.mf)(P)?P(f,x,this.getItems()):P);return this.addShape(t,{type:"text",id:this.getElementId("item-"+f.id+"-"+s),name:"legend-item-"+s,attrs:D})},n.prototype.drawRadio=function(t,s,l,f,d){var m,x,T=s.style||{},P=(m=T.r)!==null&&m!==void 0?m:f/2,D=P*3.6/8,B=[d+P,f/2-P],U=B[0],Y=B[1],se=[U+P,Y+P],xe=se[0],Ee=se[1],rt=[U,Ee+P],vt=rt[0],xt=rt[1],Bt=[d,Y+P],_r=Bt[0],Or=Bt[1],Wr=l.showRadio,gn=(0,M.pi)((0,M.pi)({path:[["M",U,Y],["A",P,P,0,0,1,xe,Ee],["L",xe-D,Ee],["L",xe,Ee],["A",P,P,0,0,1,vt,xt],["L",vt,xt-D],["L",vt,xt],["A",P,P,0,0,1,_r,Or],["L",_r+D,Or],["L",_r,Or],["A",P,P,0,0,1,U,Y],["L",U,Y+D]],stroke:"#000000",fill:"#ffffff"},T),{opacity:Wr?(x=T==null?void 0:T.opacity)!==null&&x!==void 0?x:.45:0}),$r=this.addShape(t,{type:"path",id:this.getElementId("item-"+l.id+"-radio"),name:"legend-item-radio",attrs:gn});return $r.set("tip",s.tip),$r},n.prototype.drawItem=function(t,s,l,f){var d="item-"+t.id,m=this.addGroup(f,{name:"legend-item-container",id:this.getElementId("item-container-"+d),delegateObject:{item:t,index:s}}),x=this.addGroup(m,{name:"legend-item",id:this.getElementId(d),delegateObject:{item:t,index:s}}),T=this.get("marker"),P=this.get("itemName"),D=this.get("itemValue"),B=this.get("itemBackground"),U=this.get("radio"),Y=this.getLimitItemWidth(),se=0;if(T){var xe=this.drawMarker(x,T,t,l),Ee=T.spacing,rt=(0,E.U2)(t,["marker","spacing"]);(0,E.hj)(rt)&&(Ee=rt),se=xe.getBBox().maxX+Ee}if(P){var vt=this.drawItemText(x,"name",P,t,l,se,s);Y&&Ff(!0,vt,(0,E.uZ)(Y-se,0,Y)),se=vt.getBBox().maxX+P.spacing}if(D){var xt=this.drawItemText(x,"value",D,t,l,se,s);Y&&(D.alignRight?(xt.attr({textAlign:"right",x:Y}),Ff(!0,xt,(0,E.uZ)(Y-se,0,Y),"head")):Ff(!0,xt,(0,E.uZ)(Y-se,0,Y))),se=xt.getBBox().maxX+D.spacing}if(U&&this.drawRadio(x,U,t,l,se),B){var Bt=x.getBBox(),_r=this.addShape(x,{type:"rect",name:"legend-item-background",id:this.getElementId(d+"-background"),attrs:(0,M.pi)({x:0,y:0,width:Bt.width,height:l},B.style)});_r.toBack()}return this.applyItemStates(t,x),x},n.prototype.adjustNavigation=function(t,s){var l=this,f=this.startX,d=this.startY,m=this.get("layout"),x=s.findAll(function(li){return li.get("name")==="legend-item"}),T=this.get("maxWidth"),P=this.get("maxHeight"),D=this.get("itemWidth"),B=this.get("itemSpacing"),U=this.getItemHeight(),Y=(0,E.b$)({},Ts,this.get("pageNavigator")),se=this.drawNavigation(t,m,"00/00",Y),xe=se.getBBox(),Ee={x:f,y:d},rt=1,vt=0,xt=0,Bt=0,_r=this.get("itemMarginBottom");function Or(li,zi){var ia=li.getBBox(),qa=D||ia.width,Hn=zi.x+qa+B+xe.width;return Hn>T}if(m==="horizontal"){var Wr=this.get("maxRow")||1,gn=U+(Wr===1?0:_r),$r=T-B-xe.width-xe.minX;this.pageHeight=gn*Wr,this.pageWidth=$r,(0,E.S6)(x,function(li){var zi=li.getBBox(),ia=D||zi.width;(vt&&vt<Ee.x+ia+B||Or(li,Ee))&&(rt===1&&(vt=Ee.x+B,l.moveElementTo(se,{x:$r,y:Ee.y+U/2-xe.height/2-xe.minY})),rt+=1,Ee.x=f,Ee.y+=gn),l.moveElementTo(li,Ee),li.getParent().setClip({type:"rect",attrs:{x:Ee.x,y:Ee.y,width:ia+B,height:U}}),Ee.x+=ia+B})}else{(0,E.S6)(x,function(li){var zi=li.getBBox();zi.width>xt&&(xt=zi.width)}),Bt=xt,xt+=B,T&&(xt=Math.min(T,xt),Bt=Math.min(T,Bt)),this.pageWidth=xt,this.pageHeight=P-Math.max(xe.height,U+_r);var zn=Math.floor(this.pageHeight/(U+_r));(0,E.S6)(x,function(li,zi){zi!==0&&zi%zn===0&&(rt+=1,Ee.x+=xt,Ee.y=d),l.moveElementTo(li,Ee),li.getParent().setClip({type:"rect",attrs:{x:Ee.x,y:Ee.y,width:xt,height:U}}),Ee.y+=U+_r}),this.totalPagesCnt=rt,this.moveElementTo(se,{x:f+Bt/2-xe.width/2-xe.minX,y:P-xe.height-xe.minY})}this.pageHeight&&this.pageWidth&&s.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),m==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(rt/this.get("maxRow")):this.totalPagesCnt=rt,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(se),s.attr("matrix",this.getCurrentNavigationMatrix())},n.prototype.drawNavigation=function(t,s,l,f){var d={x:0,y:0},m=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),x=(0,E.U2)(f.marker,"style",{}),T=x.size,P=T===void 0?12:T,D=(0,M._T)(x,["size"]),B=this.drawArrow(m,d,ql,s==="horizontal"?"up":"left",P,D);B.on("click",this.onNavigationBack);var U=B.getBBox();d.x+=U.width+2;var Y=this.addShape(m,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,M.pi)({x:d.x,y:d.y+P/2,text:l,textBaseline:"middle"},(0,E.U2)(f.text,"style"))}),se=Y.getBBox();d.x+=se.width+2;var xe=this.drawArrow(m,d,Tl,s==="horizontal"?"down":"right",P,D);return xe.on("click",this.onNavigationAfter),m},n.prototype.updateNavigation=function(t){var s=(0,E.b$)({},Ts,this.get("pageNavigator")),l=s.marker.style,f=l.fill,d=l.opacity,m=l.inactiveFill,x=l.inactiveOpacity,T=this.currentPageIndex+"/"+this.totalPagesCnt,P=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),D=t?t.findById(this.getElementId(ql)):this.getElementByLocalId(ql),B=t?t.findById(this.getElementId(Tl)):this.getElementByLocalId(Tl);P.attr("text",T),D.attr("opacity",this.currentPageIndex===1?x:d),D.attr("fill",this.currentPageIndex===1?m:f),D.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),B.attr("opacity",this.currentPageIndex===this.totalPagesCnt?x:d),B.attr("fill",this.currentPageIndex===this.totalPagesCnt?m:f),B.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var U=D.getBBox().maxX+2;P.attr("x",U),U+=P.getBBox().width+2,this.updateArrowPath(B,{x:U,y:0})},n.prototype.drawArrow=function(t,s,l,f,d,m){var x=s.x,T=s.y,P=this.addShape(t,{type:"path",id:this.getElementId(l),name:l,attrs:(0,M.pi)({size:d,direction:f,path:[["M",x+d/2,T],["L",x,T+d],["L",x+d,T+d],["Z"]],cursor:"pointer"},m)});return P.attr("matrix",Yc({x:x+d/2,y:T+d/2},go[f])),P},n.prototype.updateArrowPath=function(t,s){var l=s.x,f=s.y,d=t.attr(),m=d.size,x=d.direction,T=Yc({x:l+m/2,y:f+m/2},go[x]);t.attr("path",[["M",l+m/2,f],["L",l,f+m],["L",l+m,f+m],["Z"]]),t.attr("matrix",T)},n.prototype.getCurrentNavigationMatrix=function(){var t=this,s=t.currentPageIndex,l=t.pageWidth,f=t.pageHeight,d=this.get("layout"),m=d==="horizontal"?{x:0,y:f*(1-s)}:{x:l*(1-s),y:0};return kf(m)},n.prototype.applyItemStates=function(t,s){var l=this.getItemStates(t),f=l.length>0;if(f){var d=s.getChildren(),m=this.get("itemStates");(0,E.S6)(d,function(x){var T=x.get("name"),P=T.split("-")[2],D=bt(t,P,m);D&&(x.attr(D),P==="marker"&&!(x.get("isStroke")&&x.get("isFill"))&&(x.get("isStroke")&&x.attr("fill",null),x.get("isFill")&&x.attr("stroke",null)))})}},n.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),s=this.get("maxItemWidth");return s?t&&(s=t<=s?t:s):t&&(s=t),s},n}(Lu),Ks=Xu,yf=1.4,ud=.4,_f=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Ta.textColor,textBaseline:"middle",fontFamily:Ta.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Ta.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},n.prototype.isSlider=function(){return!0},n.prototype.getValue=function(){return this.getCurrentValue()},n.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},n.prototype.setRange=function(t,s){this.update({min:t,max:s})},n.prototype.setValue=function(t){var s=this.getValue();this.set("value",t);var l=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(l),this.delegateEmit("valuechanged",{originValue:s,value:t})},n.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},n.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},n.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},n.prototype.bindHandlersEvent=function(t){var s=this;t.on("legend-handler-min:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[1];m<f&&(m=f),s.setValue([f,m])}),t.on("legend-handler-max:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[0];m>f&&(m=f),s.setValue([m,f])})},n.prototype.bindRailEvent=function(t){},n.prototype.bindTrackEvent=function(t){var s=this,l=null;t.on("legend-track:dragstart",function(f){l={x:f.x,y:f.y}}),t.on("legend-track:drag",function(f){if(l){var d=s.getValueByCanvasPoint(l.x,l.y),m=s.getValueByCanvasPoint(f.x,f.y),x=s.getCurrentValue(),T=x[1]-x[0],P=s.getRange(),D=m-d;D<0?x[0]+D>P.min?s.setValue([x[0]+D,x[1]+D]):s.setValue([P.min,P.min+T]):D>0&&(D>0&&x[1]+D<P.max?s.setValue([x[0]+D,x[1]+D]):s.setValue([P.max-T,P.max])),l={x:f.x,y:f.y}}}),t.on("legend-track:dragend",function(f){l=null})},n.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},n.prototype.drawLabel=function(t,s){var l=this.get("label"),f=l.style,d=l.align,m=l.formatter,x=this.get(t),T=this.getLabelAlignAttrs(t,d),P="label-"+t;this.addShape(s,{type:"text",id:this.getElementId(P),name:"legend-label-"+t,attrs:(0,M.pi)((0,M.pi)({x:0,y:0,text:(0,E.mf)(m)?m(x):x},f),T)})},n.prototype.getLabelAlignAttrs=function(t,s){var l=this.isVertical(),f="center",d="middle";return l?(f="start",s!=="rail"?t==="min"?d="top":d="bottom":d="top"):s!=="rail"?(d="top",t==="min"?f="start":f="end"):(f="start",d="middle"),{textAlign:f,textBaseline:d}},n.prototype.getRailPath=function(t,s,l,f){var d=this.get("rail"),m=d.size,x=d.defaultLength,T=d.type,P=this.isVertical(),D=x,B=l,U=f;B||(B=P?m:D),U||(U=P?D:m);var Y=[];return T==="color"?(Y.push(["M",t,s]),Y.push(["L",t+B,s]),Y.push(["L",t+B,s+U]),Y.push(["L",t,s+U]),Y.push(["Z"])):(Y.push(["M",t+B,s]),Y.push(["L",t+B,s+U]),Y.push(["L",t,s+U]),Y.push(["Z"])),Y},n.prototype.drawRail=function(t){var s=this.get("rail"),l=s.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,M.pi)({path:this.getRailPath(0,0)},l)})},n.prototype.getTrackColor=function(t){var s=t.length;if(!s)return null;if(s===1)return t[0];var l;this.isVertical()?l="l(90)":l="l(0)";for(var f=0;f<s;f++){var d=f/(s-1);l+=" "+d+":"+t[f]}return l},n.prototype.getTrackPath=function(t){var s=this.getRailShape(t),l=s.attr("path");return(0,E.d9)(l)},n.prototype.getClipTrackAttrs=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1],d=this.getRailBBox(t),m=this.getPointByValue(l,t),x=this.getPointByValue(f,t),T=this.isVertical(),P,D,B,U;return T?(P=d.minX,D=m.y,B=d.width,U=x.y-m.y):(P=m.x,D=d.minY,B=x.x-m.x,U=d.height),{x:P,y:D,width:B,height:U}},n.prototype.getTrackAttrs=function(t){var s=this.get("track"),l=this.get("colors"),f=this.getTrackPath(t);return(0,E.CD)({path:f,fill:this.getTrackColor(l)},s.style)},n.prototype.resetTrackClip=function(t){var s=t||this.get("group"),l=this.getElementId("track"),f=s.findById(l),d=f.getClip(),m=this.getClipTrackAttrs(t);d?d.attr(m):f.setClip({type:"rect",attrs:m})},n.prototype.resetTrack=function(t){var s=this.getElementId("track"),l=t.findById(s),f=this.getTrackAttrs(t);l?l.attr(f):this.addShape(t,{type:"path",id:s,draggable:this.get("slidable"),name:"legend-track",attrs:f})},n.prototype.getPointByValue=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=(t-f)/(d-f),x=this.getRailBBox(s),T=this.isVertical(),P={x:0,y:0};return T?(P.x=x.minX+x.width/2,P.y=iu(x.minY,x.maxY,m)):(P.x=iu(x.minX,x.maxX,m),P.y=x.minY+x.height/2),P},n.prototype.getRailShape=function(t){var s=t||this.get("group");return s.findById(this.getElementId("rail"))},n.prototype.getRailBBox=function(t){var s=this.getRailShape(t),l=s.getBBox();return l},n.prototype.getRailCanvasBBox=function(){var t=this.get("group"),s=t.findById(this.getElementId("rail")),l=s.getCanvasBBox();return l},n.prototype.isVertical=function(){return this.get("layout")==="vertical"},n.prototype.getValueByCanvasPoint=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=this.getRailCanvasBBox(),x=this.isVertical(),T=this.get("step"),P;x?P=(s-m.minY)/m.height:P=(t-m.minX)/m.width;var D=iu(f,d,P);if(T){var B=Math.round((D-f)/T);D=f+B*T}return D>d&&(D=d),D<f&&(D=f),D},n.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var s=this.get("values");return s?[Math.max(Math.min.apply(Math,(0,M.pr)(s,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,(0,M.pr)(s,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},n.prototype.resetHandlers=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1];this.resetHandler(t,"min",l),this.resetHandler(t,"max",f)},n.prototype.getHandlerPath=function(t,s){var l=this.isVertical(),f=[],d=t.size,m=s.x,x=s.y,T=d*yf,P=d/2,D=d/6;if(l){var B=m+T*ud;f.push(["M",m,x]),f.push(["L",B,x+P]),f.push(["L",m+T,x+P]),f.push(["L",m+T,x-P]),f.push(["L",B,x-P]),f.push(["Z"]),f.push(["M",B,x+D]),f.push(["L",m+T-2,x+D]),f.push(["M",B,x-D]),f.push(["L",m+T-2,x-D])}else{var U=x+T*ud;f.push(["M",m,x]),f.push(["L",m-P,U]),f.push(["L",m-P,x+T]),f.push(["L",m+P,x+T]),f.push(["L",m+P,U]),f.push(["Z"]),f.push(["M",m-D,U]),f.push(["L",m-D,x+T-2]),f.push(["M",m+D,U]),f.push(["L",m+D,x+T-2])}return f},n.prototype.resetHandler=function(t,s,l){var f=this.getPointByValue(l,t),d=this.get("handler"),m=this.getHandlerPath(d,f),x=this.getElementId("handler-"+s),T=t.findById(x),P=this.isVertical();T?T.attr("path",m):this.addShape(t,{type:"path",name:"legend-handler-"+s,draggable:!0,id:x,attrs:(0,M.pi)((0,M.pi)({path:m},d.style),{cursor:P?"ns-resize":"ew-resize"})})},n.prototype.fixedElements=function(t){var s=t.findById(this.getElementId("rail")),l=t.findById(this.getElementId("label-min")),f=t.findById(this.getElementId("label-max")),d=this.getDrawPoint();this.isVertical()?this.fixedVertail(l,f,s,d):this.fixedHorizontal(l,f,s,d)},n.prototype.fitRailLength=function(t,s,l,f){var d=this.isVertical(),m=d?"height":"width",x=this.get("label"),T=x.align,P=x.spacing,D=this.get("max"+(0,E.jC)(m));if(D){var B=T==="rail"?l[m]+t[m]+s[m]+P*2:l[m],U=B-D;U>0&&this.changeRailLength(f,m,l[m]-U)}},n.prototype.changeRailLength=function(t,s,l){var f=t.getBBox(),d;s==="height"?d=this.getRailPath(f.x,f.y,f.width,l):d=this.getRailPath(f.x,f.y,l,f.height),t.attr("path",d)},n.prototype.changeRailPosition=function(t,s,l){var f=t.getBBox(),d=this.getRailPath(s,l,f.width,f.height);t.attr("path",d)},n.prototype.fixedHorizontal=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,T=l.getBBox(),P=t.getBBox(),D=s.getBBox(),B=T.height;this.fitRailLength(P,D,T,l),T=l.getBBox(),m==="rail"?(t.attr({x:f.x,y:f.y+B/2}),this.changeRailPosition(l,f.x+P.width+x,f.y),s.attr({x:f.x+P.width+T.width+x*2,y:f.y+B/2})):m==="top"?(t.attr({x:f.x,y:f.y}),s.attr({x:f.x+T.width,y:f.y}),this.changeRailPosition(l,f.x,f.y+P.height+x)):(this.changeRailPosition(l,f.x,f.y),t.attr({x:f.x,y:f.y+T.height+x}),s.attr({x:f.x+T.width,y:f.y+T.height+x}))},n.prototype.fixedVertail=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,T=l.getBBox(),P=t.getBBox(),D=s.getBBox();if(this.fitRailLength(P,D,T,l),T=l.getBBox(),m==="rail")t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x,f.y+P.height+x),s.attr({x:f.x,y:f.y+P.height+T.height+x*2});else if(m==="right")t.attr({x:f.x+T.width+x,y:f.y}),this.changeRailPosition(l,f.x,f.y),s.attr({x:f.x+T.width+x,y:f.y+T.height});else{var B=Math.max(P.width,D.width);t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x+B+x,f.y),s.attr({x:f.x,y:f.y+T.height})}},n}(Lu),Fv=_f,Al="g2-tooltip",Zl="g2-tooltip-title",Vl="g2-tooltip-list",zf="g2-tooltip-list-item",Rp="g2-tooltip-marker",Uf="g2-tooltip-value",Ml="g2-tooltip-name",Bv="g2-tooltip-crosshair-x",vg="g2-tooltip-crosshair-y",hc,C0=(hc={},hc[""+Al]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Ta.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},hc[""+Zl]={marginBottom:"4px"},hc[""+Vl]={margin:"0px",listStyleType:"none",padding:"0px"},hc[""+zf]={listStyleType:"none",marginBottom:"4px"},hc[""+Rp]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},hc[""+Uf]={display:"inline-block",float:"right",marginLeft:"30px"},hc[""+Bv]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},hc[""+vg]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},hc);function T0(i,n,t,s,l){var f={left:i<l.x,right:i+t>l.x+l.width,top:n<l.y,bottom:n+s>l.y+l.height};return f}function A0(i,n,t,s,l,f){var d=i,m=n;switch(f){case"left":d=i-s-t,m=n-l/2;break;case"right":d=i+t,m=n-l/2;break;case"top":d=i-s/2,m=n-l-t;break;case"bottom":d=i-s/2,m=n+t;break;default:d=i+t,m=n-l-t;break}return{x:d,y:m}}function Nv(i,n,t,s,l,f,d){var m=A0(i,n,t,s,l,f);if(d){var x=T0(m.x,m.y,s,l,d);f==="auto"?(x.right&&(m.x=Math.max(0,i-s-t)),x.top&&(m.y=Math.max(0,n-l-t))):f==="top"||f==="bottom"?(x.left&&(m.x=d.x),x.right&&(m.x=d.x+d.width-s),f==="top"&&x.top&&(m.y=n+t),f==="bottom"&&x.bottom&&(m.y=n-l-t)):(x.top&&(m.y=d.y),x.bottom&&(m.y=d.y+d.height-l),f==="left"&&x.left&&(m.x=i+t),f==="right"&&x.right&&(m.x=i-s-t))}return m}function zv(i,n){var t=!1;return(0,E.S6)(n,function(s){if((0,E.wH)(i,s))return t=!0,!1}),t}var Wd=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Al+'"><div class="'+Zl+'"></div><ul class="'+Vl+'"></ul></div>',itemTpl:'<li class="'+zf+`" data-index={index}>
          <span class="`+Rp+`" style="background:{color}"></span>
          <span class="`+Ml+`">{name}</span>:
          <span class="`+Uf+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+Bv+'"></div>',yCrosshairTpl:'<div class="'+vg+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Al,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:C0})},n.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},n.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},n.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),(0,oe.Z)(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},n.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),(0,oe.Z)(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},n.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},n.prototype.setCrossHairsVisible=function(t){var s=t?"":"none",l=this.get("xCrosshairDom"),f=this.get("yCrosshairDom");l&&(0,oe.Z)(l,{display:s}),f&&(0,oe.Z)(f,{display:s})},n.prototype.initContainer=function(){if(i.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},n.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(zv(t,["title","showTitle"])&&this.resetTitle(),(0,E.wH)(t,"items")&&this.renderItems()),i.prototype.updateInner.call(this,t)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.removeDom=function(){i.prototype.removeDom.call(this),this.clearCrosshairs()},n.prototype.resetPosition=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offset"),f=this.getOffset(),d=f.offsetX,m=f.offsetY,x=this.get("position"),T=this.get("region"),P=this.getContainer(),D=this.getBBox(),B=D.width,U=D.height,Y;T&&(Y=Cu(T));var se=Nv(t,s,l,B,U,x,Y);(0,oe.Z)(P,{left:ws(se.x+d),top:ws(se.y+m)}),this.resetCrosshairs()},n.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),s=this.get("parent"),l=this.get("container");l&&l.parentNode===s?s.replaceChild(t,l):s.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},n.prototype.getHtmlContentNode=function(){var t,s=this.get("customContent");if(s){var l=s(this.get("title"),this.get("items"));(0,E.kK)(l)?t=l:t=(0,We.Z)(l)}return t},n.prototype.cacheDoms=function(){var t=this.getContainer(),s=t.getElementsByClassName(Zl)[0],l=t.getElementsByClassName(Vl)[0];this.set("titleDom",s),this.set("listDom",l)},n.prototype.resetTitle=function(){var t=this.get("title"),s=this.get("showTitle");s&&t?this.setTitle(t):this.setTitle("")},n.prototype.setTitle=function(t){var s=this.get("titleDom");s&&(s.innerText=t)},n.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),s=this.get("crosshairs");if(!t||!s)this.clearCrosshairs();else{var l=Cu(t),f=this.get("xCrosshairDom"),d=this.get("yCrosshairDom");s==="x"?(this.resetCrosshair("x",l),d&&(d.remove(),this.set("yCrosshairDom",null))):s==="y"?(this.resetCrosshair("y",l),f&&(f.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",l),this.resetCrosshair("y",l)),this.setCrossHairsVisible(this.get("visible"))}},n.prototype.resetCrosshair=function(t,s){var l=this.checkCrosshair(t),f=this.get(t);t==="x"?(0,oe.Z)(l,{left:ws(f),top:ws(s.y),height:ws(s.height)}):(0,oe.Z)(l,{top:ws(f),left:ws(s.x),width:ws(s.width)})},n.prototype.checkCrosshair=function(t){var s=t+"CrosshairDom",l=t+"CrosshairTpl",f="CROSSHAIR_"+t.toUpperCase(),d=ie[f],m=this.get(s),x=this.get("parent");return m||(m=(0,We.Z)(this.get(l)),this.applyStyle(d,m),x.appendChild(m),this.set(s,m)),m},n.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),s=this.get("itemTpl"),l=this.get("listDom");l&&((0,E.S6)(t,function(f){var d=Sa.toCSSGradient(f.color),m=(0,M.pi)((0,M.pi)({},f),{color:d}),x=(0,E.ng)(s,m),T=(0,We.Z)(x);l.appendChild(T)}),this.applyChildrenStyles(l,this.get("domStyles")))},n.prototype.clearItemDoms=function(){this.get("listDom")&&Vh(this.get("listDom"))},n.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),s=this.get("yCrosshairDom");t&&t.remove(),s&&s.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},n}(ae),M0=Wd,Xh={opacity:0},ld={stroke:"#C5C5C5",strokeOpacity:.85},fm={fill:"#CACED4",opacity:.85},Yh=k(39499);function t_(i){return(0,E.UI)(i,function(n,t){var s=t===0?"M":"L",l=n[0],f=n[1];return[s,l,f]})}function hm(i){return t_(i)}function R0(i){if(i.length<=2)return hm(i);var n=[];(0,E.S6)(i,function(d){(0,E.Xy)(d,n.slice(n.length-2))||n.push(d[0],d[1])});var t=(0,Yh.e9)(n,!1),s=(0,E.YM)(i),l=s[0],f=s[1];return t.unshift(["M",l,f]),t}function gg(i,n,t,s){s===void 0&&(s=!0);var l=new Bl({values:i}),f=new Bn({values:(0,E.UI)(i,function(m,x){return x})}),d=(0,E.UI)(i,function(m,x){return[f.scale(x)*n,t-l.scale(m)*t]});return s?R0(d):hm(d)}function mg(i,n){var t=new Bl({values:i}),s=t.max<0?t.max:Math.max(0,t.min);return n-t.scale(s)*n}function Gd(i,n,t,s){var l=(0,M.pr)(i),f=mg(s,t);return l.push(["L",n,f]),l.push(["L",0,f]),l.push(["Z"]),l}var cd=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Xh,lineStyle:ld,areaStyle:fm})},n.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.data,m=s.smooth,x=s.isArea,T=s.backgroundStyle,P=s.lineStyle,D=s.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,M.pi)({x:0,y:0,width:l,height:f},T)});var B=gg(d,l,f,m);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,M.pi)({path:B},P)}),x){var U=Gd(B,l,f,d);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,M.pi)({path:U},D)})}},n.prototype.applyOffset=function(){var t=this.cfg,s=t.x,l=t.y;this.moveElementTo(this.get("group"),{x:s,y:l})},n}(wi),mh=null,Ip={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},_s=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Ip})},n.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.style,m=d.fill,x=d.stroke,T=d.radius,P=d.opacity,D=d.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:l,height:f,fill:m,stroke:x,radius:T,opacity:P,cursor:D}});var B=1/3*l,U=2/3*l,Y=1/4*f,se=3/4*f;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:B,y1:Y,x2:B,y2:se,stroke:x,cursor:D}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:U,y1:Y,x2:U,y2:se,stroke:x,cursor:D}})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var s=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",s),t.draw()}),this.get("group").on("mouseleave",function(){var s=t.get("style").fill;t.getElementByLocalId("background").attr("fill",s),t.draw()})},n.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},n}(wi),fd=null,Rc={fill:"#416180",opacity:.05},ei={fill:"#5B8FF9",opacity:.15,cursor:"move"},Ic=10,Pp={width:Ic,height:24},qs={textBaseline:"middle",fill:"#000",opacity:.45},Pc="sliderchange",pc=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.onMouseDown=function(s){return function(l){t.currentTarget=s;var f=l.originalEvent;f.stopPropagation(),f.preventDefault(),t.prevX=(0,E.U2)(f,"touches.0.pageX",f.pageX),t.prevY=(0,E.U2)(f,"touches.0.pageY",f.pageY);var d=t.getContainerDOM();d.addEventListener("mousemove",t.onMouseMove),d.addEventListener("mouseup",t.onMouseUp),d.addEventListener("mouseleave",t.onMouseUp),d.addEventListener("touchmove",t.onMouseMove),d.addEventListener("touchend",t.onMouseUp),d.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(s){var l=t.cfg.width,f=[t.get("start"),t.get("end")];s.stopPropagation(),s.preventDefault();var d=(0,E.U2)(s,"touches.0.pageX",s.pageX),m=(0,E.U2)(s,"touches.0.pageY",s.pageY),x=d-t.prevX,T=t.adjustOffsetRange(x/l);t.updateStartEnd(T),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=d,t.prevY=m,t.draw(),t.emit(Pc,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:f,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var s=t.getContainerDOM();s&&(s.removeEventListener("mousemove",t.onMouseMove),s.removeEventListener("mouseup",t.onMouseUp),s.removeEventListener("mouseleave",t.onMouseUp),s.removeEventListener("touchmove",t.onMouseMove),s.removeEventListener("touchend",t.onMouseUp),s.removeEventListener("touchcancel",t.onMouseUp))},t}return n.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.get("start"),f=this.get("end"),d=(0,E.uZ)(l,t,s),m=(0,E.uZ)(f,t,s);!this.get("isInit")&&(l!==d||f!==m)&&this.setValue([d,m])},n.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},n.prototype.setValue=function(t){var s=this.getRange();if((0,E.kJ)(t)&&t.length===2){var l=[this.get("start"),this.get("end")];this.update({start:(0,E.uZ)(t[0],s.min,s.max),end:(0,E.uZ)(t[1],s.min,s.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:l,value:t})}},n.prototype.getValue=function(){return[this.get("start"),this.get("end")]},n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Rc,foregroundStyle:ei,handlerStyle:Pp,textStyle:qs}})},n.prototype.update=function(t){var s=t.start,l=t.end,f=(0,M.pi)({},t);(0,E.UM)(s)||(f.start=(0,E.uZ)(s,0,1)),(0,E.UM)(l)||(f.end=(0,E.uZ)(l,0,1)),i.prototype.update.call(this,f),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},n.prototype.init=function(){this.set("start",(0,E.uZ)(this.get("start"),0,1)),this.set("end",(0,E.uZ)(this.get("end"),0,1)),i.prototype.init.call(this)},n.prototype.render=function(){i.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},n.prototype.renderInner=function(t){var s=this.cfg,l=s.start,f=s.end,d=s.width,m=s.height,x=s.trendCfg,T=x===void 0?{}:x,P=s.minText,D=s.maxText,B=s.backgroundStyle,U=B===void 0?{}:B,Y=s.foregroundStyle,se=Y===void 0?{}:Y,xe=s.textStyle,Ee=xe===void 0?{}:xe,rt=(0,E.b$)({},Ip,this.cfg.handlerStyle),vt=l*d,xt=f*d;(0,E.dp)((0,E.U2)(T,"data"))&&(this.trend=this.addComponent(t,(0,M.pi)({component:cd,id:this.getElementId("trend"),x:0,y:0,width:d,height:m},T))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,M.pi)({x:0,y:0,width:d,height:m},U)});var Bt=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,M.pi)({y:m/2,textAlign:"right",text:P,silent:!1},Ee)}),_r=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,M.pi)({y:m/2,textAlign:"left",text:D,silent:!1},Ee)}),Or=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,M.pi)({y:0,height:m},se)}),Wr=(0,E.U2)(rt,"width",Ic),gn=(0,E.U2)(rt,"height",24);this.minHandler=this.addComponent(t,{component:_s,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(m-gn)/2,width:Wr,height:gn,cursor:"ew-resize",style:rt}),this.maxHandler=this.addComponent(t,{component:_s,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(m-gn)/2,width:Wr,height:gn,cursor:"ew-resize",style:rt})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.updateUI=function(t,s,l){var f=this.cfg,d=f.start,m=f.end,x=f.width,T=f.minText,P=f.maxText,D=f.handlerStyle,B=f.height,U=d*x,Y=m*x;this.trend&&(this.trend.update({width:x,height:B}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",U),t.attr("width",Y-U);var se=(0,E.U2)(D,"width",Ic);s.attr("text",T),l.attr("text",P);var xe=this._dodgeText([U,Y],s,l),Ee=xe[0],rt=xe[1];this.minHandler&&(this.minHandler.update({x:U-se/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,E.S6)(Ee,function(vt,xt){return s.attr(xt,vt)}),this.maxHandler&&(this.maxHandler.update({x:Y-se/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,E.S6)(rt,function(vt,xt){return l.attr(xt,vt)})},n.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var s=t.findById(this.getElementId("foreground"));s.on("mousedown",this.onMouseDown("foreground")),s.on("touchstart",this.onMouseDown("foreground"))},n.prototype.adjustOffsetRange=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":{var d=0-l,m=1-l;return Math.min(m,Math.max(d,t))}case"maxHandler":{var d=0-f,m=1-f;return Math.min(m,Math.max(d,t))}case"foreground":{var d=0-l,m=1-f;return Math.min(m,Math.max(d,t))}}},n.prototype.updateStartEnd=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":l+=t;break;case"maxHandler":f+=t;break;case"foreground":l+=t,f+=t;break}this.set("start",l),this.set("end",f)},n.prototype._dodgeText=function(t,s,l){var f,d,m=this.cfg,x=m.handlerStyle,T=m.width,P=2,D=(0,E.U2)(x,"width",Ic),B=t[0],U=t[1],Y=!1;B>U&&(f=[U,B],B=f[0],U=f[1],d=[l,s],s=d[0],l=d[1],Y=!0);var se=s.getBBox(),xe=l.getBBox(),Ee=se.width>B-P?{x:B+D/2+P,textAlign:"left"}:{x:B-D/2-P,textAlign:"right"},rt=xe.width>T-U-P?{x:U-D/2-P,textAlign:"right"}:{x:U+D/2+P,textAlign:"left"};return Y?[rt,Ee]:[Ee,rt]},n.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},n.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},n}(wi),Kh=null;function il(i,n,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(n,t,!1),{remove:function(){i.removeEventListener(n,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+n,t),{remove:function(){i.detachEvent("on"+n,t)}}}}var Op={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Oc={default:Op,hover:{thumbColor:"rgba(0,0,0,0.2)"}},hd=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.clearEvents=E.ZT,t.onStartEvent=function(s){return function(l){t.isMobile=s,l.originalEvent.preventDefault();var f=s?(0,E.U2)(l.originalEvent,"touches.0.clientX"):l.clientX,d=s?(0,E.U2)(l.originalEvent,"touches.0.clientY"):l.clientY;t.startPos=t.cfg.isHorizontal?f:d,t.bindLaterEvent()}},t.bindLaterEvent=function(){var s=t.getContainerDOM(),l=[];t.isMobile?l=[il(s,"touchmove",t.onMouseMove),il(s,"touchend",t.onMouseUp),il(s,"touchcancel",t.onMouseUp)]:l=[il(s,"mousemove",t.onMouseMove),il(s,"mouseup",t.onMouseUp),il(s,"mouseleave",t.onMouseUp)],t.clearEvents=function(){l.forEach(function(f){f.remove()})}},t.onMouseMove=function(s){var l=t.cfg,f=l.isHorizontal,d=l.thumbOffset;s.preventDefault();var m=t.isMobile?(0,E.U2)(s,"touches.0.clientX"):s.clientX,x=t.isMobile?(0,E.U2)(s,"touches.0.clientY"):s.clientY,T=f?m:x,P=T-t.startPos;t.startPos=T,t.updateThumbOffset(d+P)},t.onMouseUp=function(s){s.preventDefault(),t.clearEvents()},t.onTrackClick=function(s){var l=t.cfg,f=l.isHorizontal,d=l.x,m=l.y,x=l.thumbLen,T=t.getContainerDOM(),P=T.getBoundingClientRect(),D=s.clientX,B=s.clientY,U=f?D-P.left-d-x/2:B-P.top-m-x/2,Y=t.validateRange(U);t.updateThumbOffset(Y)},t.onThumbMouseOver=function(){var s=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t.onThumbMouseOut=function(){var s=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t}return n.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.getValue(),f=(0,E.uZ)(l,t,s);l!==f&&!this.get("isInit")&&this.setValue(f)},n.prototype.getRange=function(){var t=this.get("minLimit")||0,s=this.get("maxLimit")||1;return{min:t,max:s}},n.prototype.setValue=function(t){var s=this.getRange(),l=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,E.uZ)(t,s.min,s.max)}),this.delegateEmit("valuechange",{originalValue:l,value:this.getValue()})},n.prototype.getValue=function(){return(0,E.uZ)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Oc})},n.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.renderTrackShape=function(t){var s=this.cfg,l=s.trackLen,f=s.theme,d=f===void 0?{default:{}}:f,m=(0,E.b$)({},Oc,d).default,x=m.lineCap,T=m.trackColor,P=m.size,D=(0,E.U2)(this.cfg,"size",P),B=this.get("isHorizontal")?{x1:0+D/2,y1:D/2,x2:l-D/2,y2:D/2,lineWidth:D,stroke:T,lineCap:x}:{x1:D/2,y1:0+D/2,x2:D/2,y2:l-D/2,lineWidth:D,stroke:T,lineCap:x};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:B})},n.prototype.renderThumbShape=function(t){var s=this.cfg,l=s.thumbOffset,f=s.thumbLen,d=s.theme,m=(0,E.b$)({},Oc,d).default,x=m.size,T=m.lineCap,P=m.thumbColor,D=(0,E.U2)(this.cfg,"size",x),B=this.get("isHorizontal")?{x1:l+D/2,y1:D/2,x2:l+f-D/2,y2:D/2,lineWidth:D,stroke:P,lineCap:T,cursor:"default"}:{x1:D/2,y1:l+D/2,x2:D/2,y2:l+f-D/2,lineWidth:D,stroke:P,lineCap:T,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:B})},n.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var s=t.findById(this.getElementId("track"));s.on("click",this.onTrackClick);var l=t.findById(this.getElementId("thumb"));l.on("mouseover",this.onThumbMouseOver),l.on("mouseout",this.onThumbMouseOut)},n.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},n.prototype.validateRange=function(t){var s=this.cfg,l=s.thumbLen,f=s.trackLen,d=t;return t+l>f?d=f-l:t+l<l&&(d=0),d},n.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},n.prototype.updateThumbOffset=function(t){var s=this.cfg,l=s.thumbOffset,f=s.isHorizontal,d=s.thumbLen,m=s.size,x=this.validateRange(t);if(x!==l){var T=this.getElementByLocalId("thumb");f?T.attr({x1:x+m/2,x2:x+d-m/2}):T.attr({y1:x+m/2,y2:x+d-m/2}),this.emitOffsetChange(x)}},n.prototype.emitOffsetChange=function(t){var s=this.cfg,l=s.thumbOffset,f=s.trackLen,d=s.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,E.uZ)(t/(f-d),0,1)}),this.delegateEmit("valuechange",{originalValue:l,value:t})},n}(wi),Uv=Aa,$d=Ma,pd=fc,Zv=gf,ef=Ks,qh=Fv,Xd=M0;function pm(i){if((0,E.xb)(i))return null;var n=i[0].x,t=i[0].x,s=i[0].y,l=i[0].y;return(0,E.S6)(i,function(f){n=n>f.x?f.x:n,t=t<f.x?f.x:t,s=s>f.y?f.y:s,l=l<f.y?f.y:l}),{minX:n,maxX:t,minY:s,maxY:l,centerX:(n+t)/2,centerY:(s+l)/2}}function Vv(i){return Array.from(new Set(i)).length===1}function dm(i){return((0,E.VV)(i)+(0,E.Fp)(i))/2}function fs(i,n,t,s){return{x:i+t*Math.cos(s),y:n+t*Math.sin(s)}}function yh(i,n,t,s,l,f){f===void 0&&(f=0);var d=fs(i,n,t,s),m=fs(i,n,t,l),x=fs(i,n,f,s),T=fs(i,n,f,l);if(l-s===Math.PI*2){var P=fs(i,n,t,s+Math.PI),D=fs(i,n,f,s+Math.PI),B=[["M",d.x,d.y],["A",t,t,0,1,1,P.x,P.y],["A",t,t,0,1,1,m.x,m.y],["M",x.x,x.y]];return f&&(B.push(["A",f,f,0,1,0,D.x,D.y]),B.push(["A",f,f,0,1,0,T.x,T.y])),B.push(["M",d.x,d.y]),B.push(["Z"]),B}var U=l-s<=Math.PI?0:1,Y=[["M",d.x,d.y],["A",t,t,0,U,1,m.x,m.y],["L",T.x,T.y]];return f&&Y.push(["A",f,f,0,U,0,x.x,x.y]),Y.push(["L",d.x,d.y]),Y.push(["Z"]),Y}function Zf(i,n,t,s,l){var f=fs(i,n,t,s),d=fs(i,n,t,l);if((0,E.vQ)(l-s,Math.PI*2)){var m=fs(i,n,t,s+Math.PI);return[["M",f.x,f.y],["A",t,t,0,1,1,m.x,m.y],["A",t,t,0,1,1,f.x,f.y],["A",t,t,0,1,0,m.x,m.y],["A",t,t,0,1,0,f.x,f.y],["Z"]]}var x=l-s<=Math.PI?0:1;return[["M",f.x,f.y],["A",t,t,0,x,1,d.x,d.y]]}function dd(i,n){var t=i.points,s=pm(t),l,f,d=n.startAngle,m=n.endAngle,x=m-d;return n.isTransposed?(l=s.maxY*x,f=s.minY*x):(l=s.maxX*x,f=s.minX*x),l+=d,f+=d,{startAngle:f,endAngle:l}}function xf(i,n){if((0,E.hj)(i)&&(0,E.hj)(n))return[i,n];if(i=i,n=n,Vv(i)||Vv(n))return[dm(i),dm(n)];for(var t=-1,s=0,l=0,f,d=i.length-1,m,x=0;++t<i.length;)f=d,d=t,x+=m=i[f]*n[d]-i[d]*n[f],s+=(i[f]+i[d])*m,l+=(n[f]+n[d])*m;return x*=3,[s/x,l/x]}function _h(i,n){var t=i.attr(),s=n.attr();return(0,E.S6)(t,function(l,f){s[f]===void 0&&(s[f]=void 0)}),s}function kp(i,n,t){var s=Math.min(n,t),l=Math.max(n,t);return i>=s&&i<=l}function Dp(i,n,t){if((0,E.HD)(i))return i.padEnd(n,t);if((0,E.kJ)(i)){var s=i.length;if(s<n)for(var l=n-s,f=0;f<l;f++)i.push(t)}return i}function Rl(i,n){return typeof i=="object"&&n.forEach(function(t){delete i[t]}),i}function Vf(i,n,t){var s,l;n===void 0&&(n=[]),t===void 0&&(t=new Map);try{for(var f=(0,M.XA)(i),d=f.next();!d.done;d=f.next()){var m=d.value;t.has(m)||(n.push(m),t.set(m,!0))}}catch(x){s={error:x}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return n}var Xo=function(){function i(n,t,s,l){n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.x=n,this.y=t,this.height=l,this.width=s}return i.fromRange=function(n,t,s,l){return new i(n,t,s-n,l-t)},i.fromObject=function(n){return new i(n.minX,n.minY,n.width,n.height)},Object.defineProperty(i.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(n){return this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height},i.prototype.contains=function(n){return n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.add=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var s=this.clone();return(0,E.S6)(n,function(l){s.x=Math.min(l.x,s.x),s.y=Math.min(l.y,s.y),s.width=Math.max(l.maxX,s.maxX)-s.x,s.height=Math.max(l.maxY,s.maxY)-s.y}),s},i.prototype.merge=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var s=this.clone();return(0,E.S6)(n,function(l){s.x=Math.max(l.x,s.x),s.y=Math.max(l.y,s.y),s.width=Math.min(l.maxX,s.maxX)-s.x,s.height=Math.min(l.maxY,s.maxY)-s.y}),s},i.prototype.cut=function(n,t){var s=n.width,l=n.height;switch(t){case be.TOP:case be.TOP_LEFT:case be.TOP_RIGHT:return i.fromRange(this.minX,this.minY+l,this.maxX,this.maxY);case be.RIGHT:case be.RIGHT_TOP:case be.RIGHT_BOTTOM:return i.fromRange(this.minX,this.minY,this.maxX-s,this.maxY);case be.BOTTOM:case be.BOTTOM_LEFT:case be.BOTTOM_RIGHT:return i.fromRange(this.minX,this.minY,this.maxX,this.maxY-l);case be.LEFT:case be.LEFT_TOP:case be.LEFT_BOTTOM:return i.fromRange(this.minX+s,this.minY,this.maxX,this.maxY);default:return this}},i.prototype.shrink=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return new i(this.x+d,this.y+s,this.width-d-l,this.height-s-f)},i.prototype.expand=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return new i(this.x-d,this.y-s,this.width+d+l,this.height+s+f)},i.prototype.exceed=function(n){return[Math.max(-this.minY+n.minY,0),Math.max(this.maxX-n.maxX,0),Math.max(this.maxY-n.maxY,0),Math.max(-this.minX+n.minX,0)]},i.prototype.collide=function(n){return this.minX<n.maxX&&this.maxX>n.minX&&this.minY<n.maxY&&this.maxY>n.minY},i.prototype.size=function(){return this.width*this.height},i.prototype.isPointIn=function(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY},i}(),Fu=function(i,n){var t=n.start,s=n.end;return new Xo(i.x+i.width*t.x,i.y+i.height*t.y,i.width*Math.abs(s.x-t.x),i.height*Math.abs(s.y-t.y))};function Iu(i){return[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}function pl(i){if(i.isPolar&&!i.isTransposed)return(i.endAngle-i.startAngle)*i.getRadius();var n=i.convert({x:0,y:0}),t=i.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function vm(i){if(i.isPolar){var n=i.startAngle,t=i.endAngle;return t-n===Math.PI*2}return!1}function Qh(i,n){var t=i.getCenter();return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function I0(i,n){var t=!1;if(i)if(i.type==="theta"){var s=i.start,l=i.end;t=kp(n.x,s.x,l.x)&&kp(n.y,s.y,l.y)}else{var f=i.invert(n);t=kp(f.x,0,1)&&kp(f.y,0,1)}return t}function Lp(i,n){var t=i.getCenter();return Math.atan2(n.y-t.y,n.x-t.x)}function Yd(i,n){n===void 0&&(n=0);var t=i.start,s=i.end,l=i.getWidth(),f=i.getHeight();if(i.isPolar){var d=i.startAngle,m=i.endAngle,x=i.getCenter(),T=i.getRadius();return{type:"path",startState:{path:yh(x.x,x.y,T+n,d,d)},endState:function(D){var B=(m-d)*D+d,U=yh(x.x,x.y,T+n,d,B);return{path:U}},attrs:{path:yh(x.x,x.y,T+n,d,m)}}}var P;return i.isTransposed?P={height:f+n*2}:P={width:l+n*2},{type:"rect",startState:{x:t.x-n,y:s.y-n,width:i.isTransposed?l+n*2:0,height:i.isTransposed?0:f+n*2},endState:P,attrs:{x:t.x-n,y:s.y-n,width:l+n*2,height:f+n*2}}}function yg(i,n){n===void 0&&(n=0);var t=i.start,s=i.end,l=i.getWidth(),f=i.getHeight(),d=Math.min(t.x,s.x),m=Math.min(t.y,s.y);return Xo.fromRange(d-n,m-n,d+l+n,m+f+n)}var P0=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function tf(i){var n="linear";return P0.test(i)?n="timeCat":(0,E.HD)(i)&&(n="cat"),n}function dl(i,n,t,s){return n===void 0&&(n={}),n.type?n.type:i.type!=="identity"&&Se.includes(t)&&["interval"].includes(s)||i.isCategory?"cat":i.type}function O0(i,n,t){var s=n||[];if((0,E.hj)(i)||(0,E.UM)((0,E.Wx)(s,i))&&(0,E.xb)(t)){var l=Du("identity");return new l({field:i.toString(),values:[i]})}var f=(0,E.I)(s,i),d=(0,E.U2)(t,"type",tf(f[0])),m=Du(d);return new m((0,M.pi)({field:i,values:f},t))}function gm(i,n){if(i.type!=="identity"&&n.type!=="identity"){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);i.change(t)}}function xh(i){return i.alias||i.field}function _g(i,n,t){var s=i.values,l=s.length,f;if(l===1)f=[.5,1];else{var d=1,m=0;vm(n)?n.isTransposed?(d=(0,E.U2)(t,"widthRatio.multiplePie",1/1.3),m=1/l*d,f=[m/2,1-m/2]):f=[0,1-1/l]:(m=1/l/2,f=[m,1-m])}return f}function Fp(i){var n=i.values.filter(function(t){return!(0,E.UM)(t)&&!isNaN(t)});return Math.max.apply(Math,(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),[(0,E.UM)(i.max)?-1/0:i.max],!1))}function k0(i){var n,t;switch(i){case be.TOP:n={x:0,y:1},t={x:1,y:1};break;case be.RIGHT:n={x:1,y:0},t={x:1,y:1};break;case be.BOTTOM:n={x:0,y:0},t={x:1,y:0};break;case be.LEFT:n={x:0,y:0},t={x:0,y:1};break;default:n=t={x:0,y:0}}return{start:n,end:t}}function xg(i){var n,t;return i.isTransposed?(n={x:0,y:0},t={x:1,y:0}):(n={x:0,y:0},t={x:0,y:1}),{start:n,end:t}}function Kd(i,n){var t={start:{x:0,y:0},end:{x:0,y:0}};i.isRect?t=k0(n):i.isPolar&&(t=xg(i));var s=t.start,l=t.end;return{start:i.convert(s),end:i.convert(l)}}function Hv(i,n){if(i.isRect)return i.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(n)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(n)?-1:1;if(i.isPolar){var t=i.x.start;return t<0?-1:1}return 1}function nt(i){var n=i.start,t=i.end;return n.x===t.x}function Kt(i,n){var t=i.start,s=i.end,l=nt(i);return l?(t.y-s.y)*(n.x-t.x)>0?1:-1:(s.x-t.x)*(t.y-n.y)>0?-1:1}function br(i,n){var t=(0,E.U2)(i,["components","axis"],{});return(0,E.b$)({},(0,E.U2)(t,["common"],{}),(0,E.b$)({},(0,E.U2)(t,[n],{})))}function dn(i,n,t){var s=(0,E.U2)(i,["components","axis"],{});return(0,E.b$)({},(0,E.U2)(s,["common","title"],{}),(0,E.b$)({},(0,E.U2)(s,[n,"title"],{})),t)}function kn(i){var n=i.x,t=i.y,s=i.circleCenter,l=t.start>t.end,f=i.isTransposed?i.convert({x:l?0:1,y:0}):i.convert({x:0,y:l?0:1}),d=[f.x-s.x,f.y-s.y],m=[1,0],x=f.y>s.y?va.EU(d,m):va.EU(d,m)*-1,T=x+(n.end-n.start),P=Math.sqrt(Math.pow(f.x-s.x,2)+Math.pow(f.y-s.y,2));return{center:s,radius:P,startAngle:x,endAngle:T}}function fn(i,n){return(0,E.jn)(i)?i===!1?!1:{}:(0,E.U2)(i,[n])}function sn(i,n){return(0,E.U2)(i,"position",n)}function ti(i,n){return(0,E.U2)(n,["title","text"],xh(i))}var Vn=function(){function i(n,t){this.destroyed=!1,this.facets=[],this.view=n,this.cfg=(0,E.b$)({},this.getDefaultCfg(),t)}return i.prototype.init=function(){this.container||(this.container=this.createContainer());var n=this.view.getData();this.facets=this.generateFacets(n)},i.prototype.render=function(){this.renderViews()},i.prototype.update=function(){},i.prototype.clear=function(){this.clearFacetViews()},i.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},i.prototype.facetToView=function(n){var t=n.region,s=n.data,l=n.padding,f=l===void 0?this.cfg.padding:l,d=this.view.createView({region:t,padding:f});d.data(s||[]),n.view=d,this.beforeEachView(d,n);var m=this.cfg.eachView;return m&&m(d,n),this.afterEachView(d,n),d},i.prototype.createContainer=function(){var n=this.view.getLayer(ge.FORE);return n.addGroup()},i.prototype.renderViews=function(){this.createFacetViews()},i.prototype.createFacetViews=function(){var n=this;return this.facets.map(function(t){return n.facetToView(t)})},i.prototype.clearFacetViews=function(){var n=this;(0,E.S6)(this.facets,function(t){t.view&&(n.view.removeView(t.view),t.view=void 0)})},i.prototype.parseSpacing=function(){var n=this.view.viewBBox,t=n.width,s=n.height,l=this.cfg.spacing;return l.map(function(f,d){return(0,E.hj)(f)?f/(d===0?t:s):parseFloat(f)/100})},i.prototype.getFieldValues=function(n,t){var s=[],l={};return(0,E.S6)(n,function(f){var d=f[t];!(0,E.UM)(d)&&!l[d]&&(s.push(d),l[d]=!0)}),s},i.prototype.getRegion=function(n,t,s,l){var f=(0,M.CR)(this.parseSpacing(),2),d=f[0],m=f[1],x=(1+d)/(t===0?1:t)-d,T=(1+m)/(n===0?1:n)-m,P={x:(x+d)*s,y:(T+m)*l},D={x:P.x+x,y:P.y+T};return{start:P,end:D}},i.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},i.prototype.getDefaultTitleCfg=function(){var n=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:n}}},i.prototype.processAxis=function(n,t){var s=n.getOptions(),l=s.coordinate,f=n.geometries,d=(0,E.U2)(l,"type","rect");if(d==="rect"&&f.length){(0,E.UM)(s.axes)&&(s.axes={});var m=s.axes,x=(0,M.CR)(f[0].getXYFields(),2),T=x[0],P=x[1],D=fn(m,T),B=fn(m,P);D!==!1&&(s.axes[T]=this.getXAxisOption(T,m,D,t)),B!==!1&&(s.axes[P]=this.getYAxisOption(P,m,B,t))}},i.prototype.getFacetDataFilter=function(n){return function(t){return(0,E.yW)(n,function(s){var l=s.field,f=s.value;return!(0,E.UM)(f)&&l?t[l]===f:!0})}},i}(),hi={},ni=function(i){return hi[(0,E.vl)(i)]},ui=function(i,n){hi[(0,E.vl)(i)]=n},xi=function(){function i(n,t){this.context=n,this.cfg=t,n.addAction(this)}return i.prototype.applyCfg=function(n){(0,E.f0)(this,n)},i.prototype.init=function(){this.applyCfg(this.cfg)},i.prototype.destroy=function(){this.context.removeAction(this),this.context=null},i}(),In=xi,di=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.execute=function(){this.callback&&this.callback(this.context)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.callback=null},n}(In),qr=di,En={};function ii(i,n){var t=En[i],s=null;if(t){var l=t.ActionClass,f=t.cfg;s=new l(n,f),s.name=i,s.init()}return s}function Ci(i){var n=En[i];return(0,E.U2)(n,"ActionClass")}function Kr(i,n,t){En[i]={ActionClass:n,cfg:t}}function Oi(i){delete En[i]}function Qn(i,n){var t=new qr(n);return t.callback=i,t.name="callback",t}function Mi(i,n){var t=[];if(i.length){t.push(["M",i[0].x,i[0].y]);for(var s=1,l=i.length;s<l;s+=1){var f=i[s];t.push(["L",f.x,f.y])}n&&t.push(["Z"])}return t}function Un(i,n){for(var t=[i[0]],s=1,l=i.length;s<l;s=s+2){var f=n.convert({x:i[s],y:i[s+1]});t.push(f.x,f.y)}return t}function bi(i,n){var t=n.isTransposed,s=i[1],l=i[6],f=i[7],d=n.convert({x:l,y:f}),m=t?0:1;return["A",s,s,0,0,m,d.x,d.y]}function ua(i,n,t){var s=t.isTransposed,l=t.startAngle,f=t.endAngle,d=i[0].toLowerCase()==="a"?{x:i[6],y:i[7]}:{x:i[1],y:i[2]},m={x:n[1],y:n[2]},x=[],T=s?"y":"x",P=Math.abs(m[T]-d[T])*(f-l),D=m[T]>=d[T]?1:0,B=P>Math.PI?1:0,U=t.convert(m),Y=Qh(t,U);if(Y>=.5)if(P===Math.PI*2){var se={x:(m.x+d.x)/2,y:(m.y+d.y)/2},xe=t.convert(se);x.push(["A",Y,Y,0,B,D,xe.x,xe.y]),x.push(["A",Y,Y,0,B,D,U.x,U.y])}else x.push(["A",Y,Y,0,B,D,U.x,U.y]);return x}function Ra(i){(0,E.S6)(i,function(n,t){var s=n;if(s[0].toLowerCase()==="a"){var l=i[t-1],f=i[t+1];f&&f[0].toLowerCase()==="a"?l&&l[0].toLowerCase()==="l"&&(l[0]="M"):l&&l[0].toLowerCase()==="a"&&f&&f[0].toLowerCase()==="l"&&(f[0]="M")}})}var Ti=function(i,n,t,s){var l,f=[],d=!!s,m,x,T,P,D,B,U;if(d){l=(0,M.CR)(s,2),T=l[0],P=l[1];for(var Y=0,se=i.length;Y<se;Y++){var xe=i[Y];T=va.VV([0,0],T,xe),P=va.Fp([0,0],P,xe)}}for(var Y=0,Ee=i.length;Y<Ee;Y++){var xe=i[Y];if(Y===0&&!t)U=xe;else if(Y===Ee-1&&!t)B=xe,f.push(U),f.push(B);else{m=i[t?Y?Y-1:Ee-1:Y-1],x=i[t?(Y+1)%Ee:Y+1];var rt=[0,0];rt=va.lu(rt,x,m),rt=va.bA(rt,rt,n);var vt=va.TE(xe,m),xt=va.TE(xe,x),Bt=vt+xt;Bt!==0&&(vt/=Bt,xt/=Bt);var _r=va.bA([0,0],rt,-vt),Or=va.bA([0,0],rt,xt);B=va.IH([0,0],xe,_r),D=va.IH([0,0],xe,Or),D=va.VV([0,0],D,va.Fp([0,0],x,xe)),D=va.Fp([0,0],D,va.VV([0,0],x,xe)),_r=va.lu([0,0],D,xe),_r=va.bA([0,0],_r,-vt/xt),B=va.IH([0,0],xe,_r),B=va.VV([0,0],B,va.Fp([0,0],m,xe)),B=va.Fp([0,0],B,va.VV([0,0],m,xe)),Or=va.lu([0,0],xe,B),Or=va.bA([0,0],Or,xt/vt),D=va.IH([0,0],xe,Or),d&&(B=va.Fp([0,0],B,T),B=va.VV([0,0],B,P),D=va.Fp([0,0],D,T),D=va.VV([0,0],D,P)),f.push(U),f.push(B),U=D}}return t&&f.push(f.shift()),f};function Jn(i,n,t){for(var s=!!n,l=[],f=0,d=i.length;f<d;f+=2)l.push([i[f],i[f+1]]);for(var m=Ti(l,.4,s,t),x=l.length,T=[],P,D,B,f=0;f<x-1;f++)P=m[f*2],D=m[f*2+1],B=l[f+1],T.push(["C",P[0],P[1],D[0],D[1],B[0],B[1]]);return s&&(P=m[x],D=m[x+1],B=l[0],T.push(["C",P[0],P[1],D[0],D[1],B[0],B[1]])),T}function Dn(i,n){return Mi(i,n)}function ra(i,n,t){var s=[],l=i[0],f=null;if(i.length<=2)return Dn(i,n);for(var d=0,m=i.length;d<m;d++){var x=i[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var T=t||[[0,0],[1,1]],P=Jn(s,n,T);return P.unshift(["M",l.x,l.y]),P}function Ja(i,n){var t=[];return(0,E.S6)(n,function(s){var l=s[0];switch(l.toLowerCase()){case"m":case"l":case"c":t.push(Un(s,i));break;case"a":t.push(bi(s,i));break;case"z":default:t.push(s);break}}),t}function Li(i,n){var t=[],s,l,f,d;return(0,E.S6)(n,function(m,x){var T=m[0];switch(T.toLowerCase()){case"m":case"c":case"q":t.push(Un(m,i));break;case"l":s=n[x-1],l=m,f=i.isTransposed,d=f?s[s.length-2]===l[1]:s[s.length-1]===l[2],d?t=t.concat(ua(s,l,i)):t.push(Un(m,i));break;case"a":t.push(bi(m,i));break;case"z":default:t.push(m);break}}),Ra(t),t}function $a(i,n){var t=i.event,s=t.target;return ga(s,n)}function ka(i,n){var t=i.getCanvasBBox(),s=t.width,l=t.height;return s>0&&l>0&&(s>=n||l>=n)}function ga(i,n){var t=i.getCanvasBBox();return ka(i,n)?t:null}function Co(i,n){var t=i.event.maskShapes;return t.map(function(s){return ga(s,n)}).filter(function(s){return!!s})}function mu(i,n){var t=i.event,s=t.target;return Bu(s,n)}function Bu(i,n){return ka(i,n)?i.attr("path"):null}function co(i,n){var t=i.event.maskShapes;return t.map(function(s){return Bu(s,n)})}function hs(i){var n=i.event,t,s=n.target;return s&&(t=s.get("element")),t}function Vo(i){var n=i.event,t=n.target,s;return t&&(s=t.get("delegateObject")),s}function su(i){var n=i.event.gEvent;return!(n&&n.fromShape&&n.toShape&&n.fromShape.get("element")===n.toShape.get("element"))}function Vs(i){return i&&i.component&&i.component.isList()}function Fs(i){return i&&i.component&&i.component.isSlider()}function Qs(i){var n=i.event,t=n.target;return t&&(t==null?void 0:t.get("name"))==="mask"||Nu(i)}function Nu(i){var n;return((n=i.event.target)===null||n===void 0?void 0:n.get("name"))==="multi-mask"}function As(i,n){var t=i.event.target;if(Nu(i))return Ga(i,n);if(t.get("type")==="path"){var s=mu(i,n);return s?Ri(i.view,s):void 0}var l=$a(i,n);return l?yn(i.view,l):null}function Ga(i,n){var t=i.event.target;if(t.get("type")==="path"){var s=co(i,n);return s.length>0?s.flatMap(function(f){return Ri(i.view,f)}):null}var l=Co(i,n);return l.length>0?l.flatMap(function(f){return yn(i.view,f)}):null}function Yu(i,n,t){if(Nu(i))return ma(i,n,t);var s=$a(i,t);return s?To(s,i,n):null}function To(i,n,t){var s=n.view,l=an(s,t,{x:i.x,y:i.y}),f=an(s,t,{x:i.maxX,y:i.maxY}),d={minX:l.x,minY:l.y,maxX:f.x,maxY:f.y};return yn(t,d)}function ma(i,n,t){var s=Co(i,t);return s.length>0?s.flatMap(function(l){return To(l,i,n)}):null}function ba(i){var n=i.geometries,t=[];return(0,E.S6)(n,function(s){var l=s.elements;t=t.concat(l)}),i.views&&i.views.length&&(0,E.S6)(i.views,function(s){t=t.concat(ba(s))}),t}function xo(i,n,t){var s=ba(i);return s.filter(function(l){return yu(l,n)===t})}function Hs(i,n){var t=i.geometries,s=[];return(0,E.S6)(t,function(l){var f=l.getElementsBy(function(d){return d.hasState(n)});s=s.concat(f)}),s}function yu(i,n){var t=i.getModel(),s=t.data,l;return(0,E.kJ)(s)?l=s[0][n]:l=s[n],l}function vr(i,n){return!(n.minX>i.maxX||n.maxX<i.minX||n.minY>i.maxY||n.maxY<i.minY)}function yn(i,n){var t=ba(i),s=[];return(0,E.S6)(t,function(l){var f=l.shape,d=f.getCanvasBBox();vr(n,d)&&s.push(l)}),s}function cn(i){var n=[];return(0,E.S6)(i,function(t){var s=t[0];if(s!=="A")for(var l=1;l<t.length;l=l+2)n.push([t[l],t[l+1]]);else{var f=t.length;n.push([t[f-2],t[f-1]])}}),n}function Ri(i,n){var t=ba(i),s=cn(n),l=t.filter(function(f){var d=f.shape,m;if(d.get("type")==="path")m=cn(d.attr("path"));else{var x=d.getCanvasBBox();m=Iu(x)}return(0,Yh.Wq)(s,m)});return l}function Xa(i){return i.getComponents().map(function(n){return n.component})}function Yo(i,n){var t=n.x-i.x,s=n.y-i.y;return Math.sqrt(t*t+s*s)}function mt(i,n){if(i.length<=2)return Dn(i,!1);var t=i[0],s=[];(0,E.S6)(i,function(f){s.push(f.x),s.push(f.y)});var l=Jn(s,n,null);return l.unshift(["M",t.x,t.y]),l}function ir(i,n){return i.x<=n.x&&i.maxX>=n.x&&i.y<=n.y&&i.maxY>n.y}function Ct(i){var n=i.parent,t=null;return n&&(t=n.views.filter(function(s){return s!==i})),t}function hn(i,n){var t=i.getCoordinate();return t.invert(n)}function an(i,n,t){var s=hn(i,t);return n.getCoordinate().convert(s)}function Pr(i,n,t,s){var l=!1;return(0,E.S6)(i,function(f){if(f[t]===n[t]&&f[s]===n[s])return l=!0,!1}),l}function Br(i,n){var t=i.getScaleByField(n);return!t&&i.views&&(0,E.S6)(i.views,function(s){if(t=Br(s,n),t)return!1}),t}var jr=function(){function i(n){this.actions=[],this.event=null,this.cacheMap={},this.view=n}return i.prototype.cache=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(n.length===1)return this.cacheMap[n[0]];n.length===2&&(this.cacheMap[n[0]]=n[1])},i.prototype.getAction=function(n){return this.actions.find(function(t){return t.name===n})},i.prototype.addAction=function(n){this.actions.push(n)},i.prototype.removeAction=function(n){var t=this.actions,s=this.actions.indexOf(n);s>=0&&t.splice(s,1)},i.prototype.getCurrentPoint=function(){var n=this.event;if(n)if(n.target instanceof HTMLElement){var t=this.view.getCanvas(),s=t.getPointByClient(n.clientX,n.clientY);return s}else return{x:n.x,y:n.y};return null},i.prototype.getCurrentShape=function(){return(0,E.U2)(this.event,["gEvent","shape"])},i.prototype.isInPlot=function(){var n=this.getCurrentPoint();return n?this.view.isPointInPlot(n):!1},i.prototype.isInShape=function(n){var t=this.getCurrentShape();return t?t.get("name")===n:!1},i.prototype.isInComponent=function(n){var t=Xa(this.view),s=this.getCurrentPoint();return s?!!t.find(function(l){var f=l.getBBox();return n?l.get("name")===n&&ir(f,s):ir(f,s)}):!1},i.prototype.destroy=function(){(0,E.S6)(this.actions.slice(),function(n){n.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},i}(),pr=jr,Lr=function(){function i(n,t){this.view=n,this.cfg=t}return i.prototype.init=function(){this.initEvents()},i.prototype.initEvents=function(){},i.prototype.clearEvents=function(){},i.prototype.destroy=function(){this.clearEvents()},i}(),tr=Lr;function Nr(i,n,t){var s=i.split(":"),l=s[0],f=n.getAction(l)||ii(l,n);if(!f)throw new Error("There is no action named ".concat(l));var d=s[1];return{action:f,methodName:d,arg:t}}function xn(i){var n=i.action,t=i.methodName,s=i.arg;if(n[t])n[t](s);else throw new Error("Action(".concat(n.name,") doesn't have a method called ").concat(t))}var bn={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Wn=function(i){(0,M.ZT)(n,i);function n(t,s){var l=i.call(this,t,s)||this;return l.callbackCaches={},l.emitCaches={},l.steps=s,l}return n.prototype.init=function(){this.initContext(),i.prototype.init.call(this)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},n.prototype.initEvents=function(){var t=this;(0,E.S6)(this.steps,function(s,l){(0,E.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.bindEvent(f.trigger,d)})})},n.prototype.clearEvents=function(){var t=this;(0,E.S6)(this.steps,function(s,l){(0,E.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.offEvent(f.trigger,d)})})},n.prototype.initContext=function(){var t=this.view,s=new pr(t);this.context=s;var l=this.steps;(0,E.S6)(l,function(f){(0,E.S6)(f,function(d){if((0,E.mf)(d.action))d.actionObject={action:Qn(d.action,s),methodName:"execute"};else if((0,E.HD)(d.action))d.actionObject=Nr(d.action,s,d.arg);else if((0,E.kJ)(d.action)){var m=d.action,x=(0,E.kJ)(d.arg)?d.arg:[d.arg];d.actionObject=[],(0,E.S6)(m,function(T,P){d.actionObject.push(Nr(T,s,x[P]))})}})})},n.prototype.isAllowStep=function(t){var s=this.currentStepName,l=this.steps;if(s===t||t===bn.SHOW_ENABLE)return!0;if(t===bn.PROCESSING)return s===bn.START;if(t===bn.START)return s!==bn.PROCESSING;if(t===bn.END)return s===bn.PROCESSING||s===bn.START;if(t===bn.ROLLBACK){if(l[bn.END])return s===bn.END;if(s===bn.START)return!0}return!1},n.prototype.isAllowExecute=function(t,s){if(this.isAllowStep(t)){var l=this.getKey(t,s);return s.once&&this.emitCaches[l]?!1:s.isEnable?s.isEnable(this.context):!0}return!1},n.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},n.prototype.afterExecute=function(t,s){t!==bn.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var l=this.getKey(t,s);this.emitCaches[l]=!0},n.prototype.getKey=function(t,s){return t+s.trigger+s.action},n.prototype.getActionCallback=function(t,s){var l=this,f=this.context,d=this.callbackCaches,m=s.actionObject;if(s.action&&m){var x=this.getKey(t,s);if(!d[x]){var T=function(P){f.event=P,l.isAllowExecute(t,s)?((0,E.kJ)(m)?(0,E.S6)(m,function(D){f.event=P,xn(D)}):(f.event=P,xn(m)),l.afterExecute(t,s),s.callback&&(f.event=P,s.callback(f))):f.event=null};s.debounce?d[x]=(0,E.Ds)(T,s.debounce.wait,s.debounce.immediate):s.throttle?d[x]=(0,E.P2)(T,s.throttle.wait,{leading:s.throttle.leading,trailing:s.throttle.trailing}):d[x]=T}return d[x]}return null},n.prototype.bindEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.addEventListener(l[1],s):l[0]==="document"?document.addEventListener(l[1],s):this.view.on(t,s)},n.prototype.offEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.removeEventListener(l[1],s):l[0]==="document"?document.removeEventListener(l[1],s):this.view.off(t,s)},n}(tr),Zn=Wn,$n={};function Xi(i){return $n[(0,E.vl)(i)]}function Nn(i,n){$n[(0,E.vl)(i)]=n}function Wi(i,n,t){var s=Xi(i);if(!s)return null;if((0,E.PO)(s)){var l=(0,E.CD)((0,E.d9)(s),t);return new Zn(n,l)}else{var f=s;return new f(n,t)}}function ya(i){return{title:{autoRotate:!0,position:"center",spacing:i.axisTitleSpacing,style:{fill:i.axisTitleTextFillColor,fontSize:i.axisTitleTextFontSize,lineHeight:i.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily},iconStyle:{fill:i.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:i.axisLabelOffset,style:{fill:i.axisLabelFillColor,fontSize:i.axisLabelFontSize,lineHeight:i.axisLabelLineHeight,fontFamily:i.fontFamily}},line:{style:{lineWidth:i.axisLineBorder,stroke:i.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:i.axisGridBorderColor,lineWidth:i.axisGridBorder,lineDash:i.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:i.axisTickLineBorder,stroke:i.axisTickLineBorderColor},alignTick:!0,length:i.axisTickLineLength},subTickLine:null,animate:!0}}function Da(i){return{title:null,marker:{symbol:"circle",spacing:i.legendMarkerSpacing,style:{r:i.legendCircleMarkerSize,fill:i.legendMarkerColor}},itemName:{spacing:5,style:{fill:i.legendItemNameFillColor,fontFamily:i.fontFamily,fontSize:i.legendItemNameFontSize,lineHeight:i.legendItemNameLineHeight,fontWeight:i.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:i.legendPageNavigatorMarkerSize,inactiveFill:i.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:i.legendPageNavigatorMarkerInactiveFillOpacity,fill:i.legendPageNavigatorMarkerFillColor,opacity:i.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:i.legendPageNavigatorTextFillColor,fontSize:i.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:i.legendItemSpacing,itemMarginBottom:i.legendItemMarginBottom,padding:i.legendPadding}}function Bo(i){var n,t={point:{default:{fill:i.pointFillColor,r:i.pointSize,stroke:i.pointBorderColor,lineWidth:i.pointBorder,fillOpacity:i.pointFillOpacity},active:{stroke:i.pointActiveBorderColor,lineWidth:i.pointActiveBorder},selected:{stroke:i.pointSelectedBorderColor,lineWidth:i.pointSelectedBorder},inactive:{fillOpacity:i.pointInactiveFillOpacity,strokeOpacity:i.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:i.hollowPointFillColor,lineWidth:i.hollowPointBorder,stroke:i.hollowPointBorderColor,strokeOpacity:i.hollowPointBorderOpacity,r:i.hollowPointSize},active:{stroke:i.hollowPointActiveBorderColor,strokeOpacity:i.hollowPointActiveBorderOpacity},selected:{lineWidth:i.hollowPointSelectedBorder,stroke:i.hollowPointSelectedBorderColor,strokeOpacity:i.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:i.hollowPointInactiveBorderOpacity}},area:{default:{fill:i.areaFillColor,fillOpacity:i.areaFillOpacity,stroke:null},active:{fillOpacity:i.areaActiveFillOpacity},selected:{fillOpacity:i.areaSelectedFillOpacity},inactive:{fillOpacity:i.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:i.hollowAreaBorderColor,lineWidth:i.hollowAreaBorder,strokeOpacity:i.hollowAreaBorderOpacity},active:{fill:null,lineWidth:i.hollowAreaActiveBorder},selected:{fill:null,lineWidth:i.hollowAreaSelectedBorder},inactive:{strokeOpacity:i.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:i.intervalFillColor,fillOpacity:i.intervalFillOpacity},active:{stroke:i.intervalActiveBorderColor,lineWidth:i.intervalActiveBorder},selected:{stroke:i.intervalSelectedBorderColor,lineWidth:i.intervalSelectedBorder},inactive:{fillOpacity:i.intervalInactiveFillOpacity,strokeOpacity:i.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:i.hollowIntervalFillColor,stroke:i.hollowIntervalBorderColor,lineWidth:i.hollowIntervalBorder,strokeOpacity:i.hollowIntervalBorderOpacity},active:{stroke:i.hollowIntervalActiveBorderColor,lineWidth:i.hollowIntervalActiveBorder,strokeOpacity:i.hollowIntervalActiveBorderOpacity},selected:{stroke:i.hollowIntervalSelectedBorderColor,lineWidth:i.hollowIntervalSelectedBorder,strokeOpacity:i.hollowIntervalSelectedBorderOpacity},inactive:{stroke:i.hollowIntervalInactiveBorderColor,lineWidth:i.hollowIntervalInactiveBorder,strokeOpacity:i.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:i.lineBorderColor,lineWidth:i.lineBorder,strokeOpacity:i.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:i.lineActiveBorder},selected:{lineWidth:i.lineSelectedBorder},inactive:{strokeOpacity:i.lineInactiveBorderOpacity}}},s=ya(i),l=Da(i);return{background:i.backgroundColor,defaultColor:i.brandColor,subColor:i.subColor,semanticRed:i.paletteSemanticRed,semanticGreen:i.paletteSemanticGreen,padding:"auto",fontFamily:i.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:i.paletteQualitative10,colors20:i.paletteQualitative20,sequenceColors:i.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(f){var d=f.geometry.coordinate;if(d.isPolar&&d.isTransposed){var m=dd(f.getModel(),d),x=m.startAngle,T=m.endAngle,P=(x+T)/2,D=7.5,B=D*Math.cos(P),U=D*Math.sin(P);return{matrix:vo.vs(null,[["t",B,U]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,M.pi)((0,M.pi)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,M.pi)((0,M.pi)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,M.pi)((0,M.pi)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,M.pi)((0,M.pi)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,M.pi)((0,M.pi)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,M.pi)((0,M.pi)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,M.pi)((0,M.pi)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,M.pi)((0,M.pi)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:s,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,E.b$)({},s.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,E.b$)({},s.grid,{line:{type:"circle"}})}},legend:{common:l,right:{layout:"vertical",padding:i.legendVerticalPadding},left:{layout:"vertical",padding:i.legendVerticalPadding},top:{layout:"horizontal",padding:i.legendHorizontalPadding},bottom:{layout:"horizontal",padding:i.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:i.sliderRailHeight,defaultLength:i.sliderRailWidth,style:{fill:i.sliderRailFillColor,stroke:i.sliderRailBorderColor,lineWidth:i.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:i.sliderLabelTextFillColor,fontSize:i.sliderLabelTextFontSize,lineHeight:i.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},handler:{size:i.sliderHandlerWidth,style:{fill:i.sliderHandlerFillColor,stroke:i.sliderHandlerBorderColor}},slidable:!0,padding:l.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:i.tooltipCrosshairsBorderColor,lineWidth:i.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(n={},n["".concat(Al)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:i.tooltipContainerFillColor,opacity:i.tooltipContainerFillOpacity,boxShadow:i.tooltipContainerShadow,borderRadius:"".concat(i.tooltipContainerBorderRadius,"px"),color:i.tooltipTextFillColor,fontSize:"".concat(i.tooltipTextFontSize,"px"),fontFamily:i.fontFamily,lineHeight:"".concat(i.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},n["".concat(Zl)]={marginBottom:"12px",marginTop:"12px"},n["".concat(Vl)]={margin:0,listStyleType:"none",padding:0},n["".concat(zf)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},n["".concat(Rp)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},n["".concat(Uf)]={display:"inline-block",float:"right",marginLeft:"30px"},n)},annotation:{arc:{style:{stroke:i.annotationArcBorderColor,lineWidth:i.annotationArcBorder},animate:!0},line:{style:{stroke:i.annotationLineBorderColor,lineDash:i.annotationLineDash,lineWidth:i.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textAlign:"start",fontFamily:i.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:i.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:i.annotationRegionBorder,stroke:i.annotationRegionBorderColor,fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:i.brandColor,lineWidth:2}},line:{style:{stroke:i.annotationLineBorderColor,lineWidth:i.annotationLineBorder},length:i.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:i.cSliderBackgroundFillColor,opacity:i.cSliderBackgroundFillOpacity},foregroundStyle:{fill:i.cSliderForegroundFillColor,opacity:i.cSliderForegroundFillOpacity},handlerStyle:{width:i.cSliderHandlerWidth,height:i.cSliderHandlerHeight,fill:i.cSliderHandlerFillColor,opacity:i.cSliderHandlerFillOpacity,stroke:i.cSliderHandlerBorderColor,lineWidth:i.cSliderHandlerBorder,radius:i.cSliderHandlerBorderRadius,highLightFill:i.cSliderHandlerHighlightFillColor},textStyle:{fill:i.cSliderTextFillColor,opacity:i.cSliderTextFillOpacity,fontSize:i.cSliderTextFontSize,lineHeight:i.cSliderTextLineHeight,fontWeight:i.cSliderTextFontWeight,stroke:i.cSliderTextBorderColor,lineWidth:i.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:i.scrollbarTrackFillColor,thumbColor:i.scrollbarThumbFillColor}},hover:{style:{thumbColor:i.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:i.labelFillColor,fontSize:i.labelFontSize,fontFamily:i.fontFamily,stroke:i.labelBorderColor,lineWidth:i.labelBorder},fillColorDark:i.labelFillColorDark,fillColorLight:i.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:i.innerLabelFillColor,fontSize:i.innerLabelFontSize,fontFamily:i.fontFamily,stroke:i.innerLabelBorderColor,lineWidth:i.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:i.overflowLabelFillColor,fontSize:i.overflowLabelFontSize,fontFamily:i.fontFamily,stroke:i.overflowLabelBorderColor,lineWidth:i.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:i.labelLineBorder}},autoRotate:!0}}}var Na={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Hl={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},bg=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],rf=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Sg=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Hf=function(i){i===void 0&&(i={});var n=i.paletteQualitative10,t=n===void 0?bg:n,s=i.paletteQualitative20,l=s===void 0?rf:s,f=i.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"transparent",brandColor:d,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:Sg,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:Na[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Na[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Hl[85],axisTickLineBorderColor:Na[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Na[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Na[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Na[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Na[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:d,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Na[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Na[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Na[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Na[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Na[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Na[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Na[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Na[25],annotationArcBorderColor:Na[15],annotationArcBorder:1,annotationLineBorderColor:Na[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Na[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Na[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Na[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Na[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Na[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Hl[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Na[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Hl[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Na[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:d,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Hl[100],pointBorderOpacity:1,pointActiveBorderColor:Na[100],pointSelectedBorder:2,pointSelectedBorderColor:Na[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:d,hollowPointBorderOpacity:.95,hollowPointFillColor:Hl[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Na[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Na[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:d,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:d,areaFillOpacity:.25,areaActiveFillColor:d,areaActiveFillOpacity:.5,areaSelectedFillColor:d,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:d,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Na[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Na[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:d,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Na[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Na[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:d,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Hl[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Na[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Na[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,M.pi)((0,M.pi)({},m),i)},Eg=Hf();function wg(i){var n=i.styleSheet,t=n===void 0?{}:n,s=(0,M._T)(i,["styleSheet"]),l=Hf(t);return(0,E.b$)({},Bo(l),s)}var xx=wg({}),mm={default:xx};function Bp(i){return(0,E.U2)(mm,(0,E.vl)(i),mm.default)}function vd(i,n){mm[(0,E.vl)(i)]=wg(n)}function ym(i,n,t){var s=t.translate(i),l=t.translate(n);return(0,E.vQ)(s,l)}function qd(i,n){var t=n.coordinate,s=n.getXScale(),l=s.range,f=l[l.length-1],d=l[0],m=t.invert(i),x=m.x;return t.isPolar&&x>(1+f)/2&&(x=d),s.translate(s.invert(x))}function _m(i,n,t){var s=t.coordinate,l=t.getYScale(),f=l.field,d=s.invert(n),m=l.invert(d.y),x=(0,E.sE)(i,function(T){var P=T[ye];return P[f][0]<=m&&P[f][1]>=m});return x||i[i.length-1]}var zu=(0,E.HP)(function(i){if(i.isCategory)return 1;for(var n=i.values,t=n.length,s=i.translate(n[0]),l=s,f=0;f<t;f++){var d=n[f],m=i.translate(d);m<s&&(s=m),m>l&&(l=m)}return(l-s)/(t-1)});function Bs(i,n,t){var s=n.getAttribute("position"),l=s.getFields(),f=n.scales,d=(0,E.mf)(t)||!t?l[0]:t,m=f[d],x=m?m.getText(i[d]):i[d]||d;return(0,E.mf)(t)?t(x,i):x}function r_(i){var n=(0,E.VO)(i.attributes);return(0,E.hX)(n,function(t){return(0,E.FX)(Se,t.type)})}function xm(i){var n,t,s=r_(i),l;try{for(var f=(0,M.XA)(s),d=f.next();!d.done;d=f.next()){var m=d.value,x=m.getScale(m.type);if(x&&x.isLinear){var T=(0,E.U2)(i.scaleDefs,x.field),P=dl(x,T,m.type,i.type);if(P!=="cat"){l=x;break}}}}catch(U){n={error:U}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(n)throw n.error}}var D=i.getXScale(),B=i.getYScale();return l||B||D}function jv(i,n){var t=n.field,s=i[t];if((0,E.kJ)(s)){var l=s.map(function(f){return n.getText(f)});return l.join("-")}return n.getText(s)}function n_(i,n){var t,s=n.getGroupScales();if(s.length&&(t=s[0]),t){var l=t.field;return t.getText(i[l])}var f=xm(n);return xh(f)}function ts(i,n,t){if(n.length===0)return null;var s=t.type,l=t.getXScale(),f=t.getYScale(),d=l.field,m=f.field,x=null;if(s==="heatmap"||s==="point"){for(var T=t.coordinate,P=T.invert(i),D=l.invert(P.x),B=f.invert(P.y),U=1/0,Y=0;Y<n.length;Y++){var se=n[Y],xe=se[ye],Ee=Math.pow(xe[d]-D,2)+Math.pow(xe[m]-B,2);Ee<U&&(U=Ee,x=se)}return x}var rt=n[0],vt=n[n.length-1],xt=qd(i,t),Bt=rt[ye][d],_r=rt[ye][m],Or=vt[ye][d],Wr=f.isLinear&&(0,E.kJ)(_r);if((0,E.kJ)(Bt)){for(var Y=0;Y<n.length;Y++){var gn=n[Y],xe=gn[ye];if(l.translate(xe[d][0])<=xt&&l.translate(xe[d][1])>=xt)if(Wr)(0,E.kJ)(x)||(x=[]),x.push(gn);else{x=gn;break}}(0,E.kJ)(x)&&(x=_m(x,i,t))}else{var $r=void 0;if(!l.isLinear&&l.type!=="timeCat"){for(var Y=0;Y<n.length;Y++){var gn=n[Y],xe=gn[ye];if(ym(xe[d],xt,l))if(Wr)(0,E.kJ)(x)||(x=[]),x.push(gn);else{x=gn;break}else l.translate(xe[d])<=xt&&(vt=gn,$r=n[Y+1])}(0,E.kJ)(x)&&(x=_m(x,i,t))}else{if((xt>l.translate(Or)||xt<l.translate(Bt))&&(xt>l.max||xt<l.min))return null;for(var zn=0,li=n.length-1,zi=void 0;zn<=li;){zi=Math.floor((zn+li)/2);var ia=n[zi][ye][d];if(ym(ia,xt,l))return n[zi];l.translate(ia)<=l.translate(xt)?(zn=zi+1,vt=n[zi],$r=n[zi+1]):(li===0&&(vt=n[0]),li=zi-1)}}vt&&$r&&Math.abs(l.translate(vt[ye][d])-xt)>Math.abs(l.translate($r[ye][d])-xt)&&(vt=$r)}var qa=zu(t.getXScale());return!x&&Math.abs(l.translate(vt[ye][d])-xt)<=qa/2&&(x=vt),x}function Js(i,n,t,s){var l,f;t===void 0&&(t=""),s===void 0&&(s=!1);var d=i[ye],m=Bs(d,n,t),x=n.tooltipOption,T=n.theme.defaultColor,P=[],D,B;function U(gn,$r){if(s||!(0,E.UM)($r)&&$r!==""){var zn={title:m,data:d,mappingData:i,name:gn,value:$r,color:i.color||T,marker:!0};P.push(zn)}}if((0,E.Kn)(x)){var Y=x.fields,se=x.callback;if(se){var xe=Y.map(function(gn){return i[ye][gn]}),Ee=se.apply(void 0,(0,M.ev)([],(0,M.CR)(xe),!1)),rt=(0,M.pi)({data:i[ye],mappingData:i,title:m,color:i.color||T,marker:!0},Ee);P.push(rt)}else{var vt=n.scales;try{for(var xt=(0,M.XA)(Y),Bt=xt.next();!Bt.done;Bt=xt.next()){var _r=Bt.value;if(!(0,E.UM)(d[_r])){var Or=vt[_r];D=xh(Or),B=Or.getText(d[_r]),U(D,B)}}}catch(gn){l={error:gn}}finally{try{Bt&&!Bt.done&&(f=xt.return)&&f.call(xt)}finally{if(l)throw l.error}}}}else{var Wr=xm(n);B=jv(d,Wr),D=n_(d,n),U(D,B)}return P}function Jh(i,n,t,s){var l,f,d=s.showNil,m=[],x=i.dataArray;if(!(0,E.xb)(x)){i.sort(x);try{for(var T=(0,M.XA)(x),P=T.next();!P.done;P=T.next()){var D=P.value,B=ts(n,D,i);if(B){var U=i.getElementId(B),Y=i.elementsMap[U];if(i.type==="heatmap"||Y.visible){var se=Js(B,i,t,d);se.length&&m.push(se)}}}}catch(xe){l={error:xe}}finally{try{P&&!P.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}}return m}function gd(i,n,t,s){var l=s.showNil,f=[],d=i.container,m=d.getShape(n.x,n.y);if(m&&m.get("visible")&&m.get("origin")){var x=m.get("origin").mappingData,T=Js(x,i,t,l);T.length&&f.push(T)}return f}function Cg(i,n,t){var s,l,f=[],d=i.geometries,m=t.shared,x=t.title,T=t.reversed;try{for(var P=(0,M.XA)(d),D=P.next();!D.done;D=P.next()){var B=D.value;if(B.visible&&B.tooltipOption!==!1){var U=B.type,Y=void 0;["point","edge","polygon"].includes(U)?Y=gd(B,n,x,t):["area","line","path","heatmap"].includes(U)||m!==!1?Y=Jh(B,n,x,t):Y=gd(B,n,x,t),Y.length&&(T&&Y.reverse(),f.push(Y))}}}catch(se){s={error:se}}finally{try{D&&!D.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}return f}function Uu(i,n,t){var s,l,f=Cg(i,n,t);try{for(var d=(0,M.XA)(i.views),m=d.next();!m.done;m=d.next()){var x=m.value;f=f.concat(Cg(x,n,t))}}catch(T){s={error:T}}finally{try{m&&!m.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return f}function Wv(i){return!(0,E.hj)(i)&&!(0,E.kJ)(i)}function bh(i){i===void 0&&(i=0);var n=(0,E.kJ)(i)?i:[i];switch(n.length){case 0:n=[0,0,0,0];break;case 1:n=new Array(4).fill(n[0]);break;case 2:n=(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),(0,M.CR)(n),!1);break;case 3:n=(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),[n[1]],!1);break;default:n=n.slice(0,4);break}return n}var Sh={};function ep(i,n){Sh[i]=n}function i_(i){delete Sh[i]}function vl(){return Object.keys(Sh)}function Pu(i){return Sh[i]}var dc=function(){function i(n){this.option=this.wrapperOption(n)}return i.prototype.update=function(n){return this.option=this.wrapperOption(n),this},i.prototype.hasAction=function(n){var t=this.option.actions;return(0,E.G)(t,function(s){return s[0]===n})},i.prototype.create=function(n,t){var s=this.option,l=s.type,f=s.cfg,d=l==="theta",m=(0,M.pi)({start:n,end:t},f),x=ad(d?"polar":l);return this.coordinate=new x(m),this.coordinate.type=l,d&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},i.prototype.adjust=function(n,t){return this.coordinate.update({start:n,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},i.prototype.rotate=function(n){return this.option.actions.push(["rotate",n]),this},i.prototype.reflect=function(n){return this.option.actions.push(["reflect",n]),this},i.prototype.scale=function(n,t){return this.option.actions.push(["scale",n,t]),this},i.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},i.prototype.getOption=function(){return this.option},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.wrapperOption=function(n){return(0,M.pi)({type:"rect",actions:[],cfg:{}},n)},i.prototype.execActions=function(n){var t=this,s=this.option.actions;(0,E.S6)(s,function(l){var f,d=(0,M.CR)(l),m=d[0],x=d.slice(1),T=(0,E.UM)(n)?!0:n.includes(m);T&&(f=t.coordinate)[m].apply(f,(0,M.ev)([],(0,M.CR)(x),!1))})},i}(),a_=dc,Np=function(){function i(n,t,s){this.view=n,this.gEvent=t,this.data=s,this.type=t.type}return i.fromData=function(n,t,s){return new i(n,new Ge.Event(t,{}),s)},Object.defineProperty(i.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},i.prototype.clone=function(){return new i(this.view,this.gEvent,this.data)},i}(),Ya=Np;function kc(i){var n=i.getController("axis"),t=i.getController("legend"),s=i.getController("annotation"),l=i.getController("slider"),f=i.getController("scrollbar");[n,l,f,t,s].forEach(function(d){d&&d.layout()})}var D0=function(){function i(){this.scales=new Map,this.syncScales=new Map}return i.prototype.createScale=function(n,t,s,l){var f=s,d=this.getScaleMeta(l);if(t.length===0&&d){var m=d.scale,x={type:m.type};m.isCategory&&(x.values=m.values),f=(0,E.b$)(x,d.scaleDef,s)}var T=O0(n,t,f);return this.cacheScale(T,s,l),T},i.prototype.sync=function(n,t){var s=this;this.syncScales.forEach(function(l,f){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,x=[];(0,E.S6)(l,function(T){var P=s.getScale(T);m=(0,E.hj)(P.max)?Math.max(m,P.max):m,d=(0,E.hj)(P.min)?Math.min(d,P.min):d,(0,E.S6)(P.values,function(D){x.includes(D)||x.push(D)})}),(0,E.S6)(l,function(T){var P=s.getScale(T);if(P.isContinuous)P.change({min:d,max:m,values:x});else if(P.isCategory){var D=P.range,B=s.getScaleMeta(T);x&&!(0,E.U2)(B,["scaleDef","range"])&&(D=_g((0,E.b$)({},P,{values:x}),n,t)),P.change({values:x,range:D})}})})},i.prototype.cacheScale=function(n,t,s){var l=this.getScaleMeta(s);l&&l.scale.type===n.type?(gm(l.scale,n),l.scaleDef=t):(l={key:s,scale:n,scaleDef:t},this.scales.set(s,l));var f=this.getSyncKey(l);if(l.syncKey=f,this.removeFromSyncScales(s),f){var d=this.syncScales.get(f);d||(d=[],this.syncScales.set(f,d)),d.push(s)}},i.prototype.getScale=function(n){var t=this.getScaleMeta(n);if(!t){var s=(0,E.Z$)(n.split("-")),l=this.syncScales.get(s);l&&l.length&&(t=this.getScaleMeta(l[0]))}return t&&t.scale},i.prototype.deleteScale=function(n){var t=this.getScaleMeta(n);if(t){var s=t.syncKey,l=this.syncScales.get(s);if(l&&l.length){var f=l.indexOf(n);f!==-1&&l.splice(f,1)}}this.scales.delete(n)},i.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},i.prototype.removeFromSyncScales=function(n){var t=this;this.syncScales.forEach(function(s,l){var f=s.indexOf(n);if(f!==-1)return s.splice(f,1),s.length===0&&t.syncScales.delete(l),!1})},i.prototype.getSyncKey=function(n){var t=n.scale,s=n.scaleDef,l=t.field,f=(0,E.U2)(s,["sync"]);return f===!0?l:f===!1?void 0:f},i.prototype.getScaleMeta=function(n){return this.scales.get(n)},i}(),h=function(){function i(n,t,s,l){n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.top=n,this.right=t,this.bottom=s,this.left=l}return i.instance=function(n,t,s,l){return n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),new i(n,t,s,l)},i.prototype.max=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top=Math.max(this.top,s),this.right=Math.max(this.right,l),this.bottom=Math.max(this.bottom,f),this.left=Math.max(this.left,d),this},i.prototype.shrink=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top+=s,this.right+=l,this.bottom+=f,this.left+=d,this},i.prototype.inc=function(n,t){var s=n.width,l=n.height;switch(t){case be.TOP:case be.TOP_LEFT:case be.TOP_RIGHT:this.top+=l;break;case be.RIGHT:case be.RIGHT_TOP:case be.RIGHT_BOTTOM:this.right+=s;break;case be.BOTTOM:case be.BOTTOM_LEFT:case be.BOTTOM_RIGHT:this.bottom+=l;break;case be.LEFT:case be.LEFT_TOP:case be.LEFT_BOTTOM:this.left+=s;break;default:break}return this},i.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},i.prototype.clone=function(){return new(i.bind.apply(i,(0,M.ev)([void 0],(0,M.CR)(this.getPadding()),!1)))},i}();function v(i){var n=i.padding;if(!Wv(n))return new(h.bind.apply(h,(0,M.ev)([void 0],(0,M.CR)(bh(n)),!1)));var t=i.viewBBox,s=new h,l=[],f=[],d=[];return(0,E.S6)(i.getComponents(),function(m){var x=m.type;x===ze.AXIS?l.push(m):[ze.LEGEND,ze.SLIDER,ze.SCROLLBAR].includes(x)?f.push(m):x!==ze.GRID&&x!==ze.TOOLTIP&&d.push(m)}),(0,E.S6)(l,function(m){var x=m.component,T=x.getLayoutBBox(),P=new Xo(T.x,T.y,T.width,T.height),D=P.exceed(t);s.max(D)}),(0,E.S6)(f,function(m){var x=m.component,T=m.direction,P=x.getLayoutBBox(),D=x.get("padding"),B=new Xo(P.x,P.y,P.width,P.height).expand(D);s.inc(B,T)}),(0,E.S6)(d,function(m){var x=m.component,T=m.direction,P=x.getLayoutBBox(),D=new Xo(P.x,P.y,P.width,P.height);s.inc(D,T)}),s}function _(i,n,t){var s=t.instance();n.forEach(function(l){l.autoPadding=s.max(l.autoPadding.getPadding())})}var R=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,{visible:t.visible})||this;s.views=[],s.geometries=[],s.controllers=[],s.interactions={},s.limitInPlot=!1,s.options={data:[],animate:!0},s.usedControllers=vl(),s.scalePool=new D0,s.layoutFunc=kc,s.isPreMouseInPlot=!1,s.isDataChanged=!1,s.isCoordinateChanged=!1,s.createdScaleKeys=new Map,s.onCanvasEvent=function(vt){var xt=vt.name;if(!xt.includes(":")){var Bt=s.createViewEvent(vt);s.doPlotEvent(Bt),s.emit(xt,Bt)}},s.onDelegateEvents=function(vt){var xt=vt.name;if(xt.includes(":")){var Bt=s.createViewEvent(vt);s.emit(xt,Bt)}};var l=t.id,f=l===void 0?(0,E.EL)("view"):l,d=t.parent,m=t.canvas,x=t.backgroundGroup,T=t.middleGroup,P=t.foregroundGroup,D=t.region,B=D===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:D,U=t.padding,Y=t.appendPadding,se=t.theme,xe=t.options,Ee=t.limitInPlot,rt=t.syncViewPadding;return s.parent=d,s.canvas=m,s.backgroundGroup=x,s.middleGroup=T,s.foregroundGroup=P,s.region=B,s.padding=U,s.appendPadding=Y,s.options=(0,M.pi)((0,M.pi)({},s.options),xe),s.limitInPlot=Ee,s.id=f,s.syncViewPadding=rt,s.themeObject=(0,E.Kn)(se)?(0,E.b$)({},Bp("default"),wg(se)):Bp(se),s.init(),s}return n.prototype.setLayout=function(t){this.layoutFunc=t},n.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},n.prototype.render=function(t,s){t===void 0&&(t=!1),this.emit(Ue.BEFORE_RENDER,Ya.fromData(this,Ue.BEFORE_RENDER,s)),this.paint(t),this.emit(Ue.AFTER_RENDER,Ya.fromData(this,Ue.AFTER_RENDER,s)),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var t=this;this.emit(Ue.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var s=this.geometries,l=0;l<s.length;l++)s[l].clear(),s[l].container.remove(!0),s[l].labelsContainer.remove(!0);this.geometries=[];for(var f=this.controllers,l=0;l<f.length;l++)f[l].name==="annotation"?f[l].clear(!0):f[l].clear();this.createdScaleKeys.forEach(function(m,x){t.getRootView().scalePool.deleteScale(x)}),this.createdScaleKeys.clear();for(var d=this.views,l=0;l<d.length;l++)d[l].clear();this.emit(Ue.AFTER_CLEAR)},n.prototype.destroy=function(){this.emit(Ue.BEFORE_DESTROY);var t=this.interactions;(0,E.S6)(t,function(m){m&&m.destroy()}),this.clear();for(var s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];d.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),i.prototype.destroy.call(this)},n.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var s=this.geometries,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}for(var m=this.controllers,l=0,f=m.length;l<f;l++){var x=m[l];x.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},n.prototype.data=function(t){return(0,E.t8)(this.options,"data",t),this.isDataChanged=!0,this},n.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},n.prototype.filter=function(t,s){return(0,E.mf)(s)?((0,E.t8)(this.options,["filters",t],s),this):(!s&&(0,E.U2)(this.options,["filters",t])&&delete this.options.filters[t],this)},n.prototype.axis=function(t,s){return(0,E.jn)(t)?(0,E.t8)(this.options,["axes"],t):(0,E.t8)(this.options,["axes",t],s),this},n.prototype.legend=function(t,s){return(0,E.jn)(t)?(0,E.t8)(this.options,["legends"],t):(0,E.HD)(t)?((0,E.t8)(this.options,["legends",t],s),(0,E.PO)(s)&&(s!=null&&s.selected)&&(0,E.t8)(this.options,["filters",t],function(l){var f;return(f=s==null?void 0:s.selected[l])!==null&&f!==void 0?f:!0})):(0,E.t8)(this.options,["legends"],t),this},n.prototype.scale=function(t,s){var l=this;return(0,E.HD)(t)?(0,E.t8)(this.options,["scales",t],s):(0,E.Kn)(t)&&(0,E.S6)(t,function(f,d){(0,E.t8)(l.options,["scales",d],f)}),this},n.prototype.tooltip=function(t){return(0,E.t8)(this.options,"tooltip",t),this},n.prototype.annotation=function(){return this.getController("annotation")},n.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},n.prototype.coordinate=function(t,s){return(0,E.HD)(t)?(0,E.t8)(this.options,"coordinate",{type:t,cfg:s}):(0,E.t8)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},n.prototype.coord=function(t,s){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,s)},n.prototype.facet=function(t,s){this.facetInstance&&this.facetInstance.destroy();var l=ni(t);if(!l)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new l(this,(0,M.pi)((0,M.pi)({},s),{type:t})),this},n.prototype.animate=function(t){return(0,E.t8)(this.options,"animate",t),this},n.prototype.updateOptions=function(t){return this.clear(),(0,E.CD)(this.options,t),this.views.forEach(function(s){return s.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},n.prototype.option=function(t,s){if(n.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return(0,E.t8)(this.options,t,s),this},n.prototype.theme=function(t){return this.themeObject=(0,E.Kn)(t)?(0,E.b$)({},this.themeObject,wg(t)):Bp(t),this},n.prototype.interaction=function(t,s){var l=this.interactions[t];l&&l.destroy();var f=Wi(t,this,s);return f&&(f.init(),this.interactions[t]=f),this},n.prototype.removeInteraction=function(t){var s=this.interactions[t];s&&(s.destroy(),this.interactions[t]=void 0)},n.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Ue.BEFORE_CHANGE_DATA,Ya.fromData(this,Ue.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.changeData(t)}this.emit(Ue.AFTER_CHANGE_DATA,Ya.fromData(this,Ue.AFTER_CHANGE_DATA,null))},n.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var s={data:this.options.data,scales:(0,E.d9)(this.options.scales),axes:(0,E.d9)(this.options.axes),coordinate:(0,E.d9)(this.coordinateController.getOption()),tooltip:(0,E.d9)(this.options.tooltip),legends:(0,E.d9)(this.options.legends),animate:this.options.animate,visible:this.visible},l=new n((0,M.pi)((0,M.pi)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Be.BG}),middleGroup:this.middleGroup.addGroup({zIndex:Be.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Be.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,M.pi)((0,M.pi)({},s),(0,E.U2)(t,"options",{}))}));return this.views.push(l),l},n.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},n.prototype.removeView=function(t){var s=(0,E.Od)(this.views,function(l){return l===t})[0];return s&&s.destroy(),s},n.prototype.getCoordinate=function(){return this.coordinateInstance},n.prototype.getTheme=function(){return this.themeObject},n.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},n.prototype.getYScales=function(){var t={},s=[];return this.geometries.forEach(function(l){var f=l.getYScale(),d=f.field;t[d]||(t[d]=!0,s.push(f))}),s},n.prototype.getScalesByDim=function(t){for(var s=this.geometries,l={},f=0,d=s.length;f<d;f++){var m=s[f],x=t==="x"?m.getXScale():m.getYScale();x&&!l[x.field]&&(l[x.field]=x)}return l},n.prototype.getScale=function(t,s){var l=s||this.getScaleKey(t);return this.getRootView().scalePool.getScale(l)},n.prototype.getScaleByField=function(t,s){return this.getScale(t,s)},n.prototype.getOptions=function(){return this.options},n.prototype.getData=function(){return this.filteredData},n.prototype.getOriginalData=function(){return this.options.data},n.prototype.getPadding=function(){return this.autoPadding.getPadding()},n.prototype.getGeometries=function(){return this.geometries},n.prototype.getElements=function(){return(0,E.u4)(this.geometries,function(t,s){return t.concat(s.getElements())},[])},n.prototype.getElementsBy=function(t){return this.getElements().filter(function(s){return t(s)})},n.prototype.getLayer=function(t){return t===ge.BG?this.backgroundGroup:t===ge.MID?this.middleGroup:t===ge.FORE?this.foregroundGroup:this.foregroundGroup},n.prototype.isPointInPlot=function(t){return I0(this.getCoordinate(),t)},n.prototype.getLegendAttributes=function(){return(0,E.xH)(this.geometries.map(function(t){return t.getGroupAttributes()}))},n.prototype.getGroupScales=function(){var t=this.geometries.map(function(s){return s.getGroupScales()});return Vf((0,E.xH)(t))},n.prototype.getCanvas=function(){return this.getRootView().canvas},n.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},n.prototype.getXY=function(t){var s=this.getCoordinate(),l=this.getScalesByDim("x"),f=this.getScalesByDim("y"),d,m;if((0,E.S6)(t,function(x,T){l[T]&&(d=l[T].scale(x)),f[T]&&(m=f[T].scale(x))}),!(0,E.UM)(d)&&!(0,E.UM)(m))return s.convert({x:d,y:m})},n.prototype.getController=function(t){return(0,E.sE)(this.controllers,function(s){return s.name===t})},n.prototype.showTooltip=function(t){var s=this.getController("tooltip");return s&&s.showTooltip(t),this},n.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},n.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},n.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},n.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},n.prototype.getTooltipItems=function(t){var s=this.getController("tooltip");return s?s.getTooltipItems(t):[]},n.prototype.getSnapRecords=function(t){for(var s=this.geometries,l=[],f=0,d=s.length;f<d;f++){var m=s[f],x=m.dataArray;m.sort(x);for(var T=void 0,P=0,D=x.length;P<D;P++){var B=x[P];T=ts(t,B,m),T&&l.push(T)}}for(var U=this.views,f=0,d=U.length;f<d;f++){var Y=U[f],se=Y.getSnapRecords(t);l=l.concat(se)}return l},n.prototype.getComponents=function(){for(var t=[],s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];t=t.concat(d.getComponents())}return t},n.prototype.filterData=function(t){var s=this.options.filters;return(0,E.dp)(s)===0?t:(0,E.hX)(t,function(l,f){var d=Object.keys(s);return d.every(function(m){var x=s[m];return x(l[m],l,f)})})},n.prototype.filterFieldData=function(t,s){var l=this.options.filters,f=(0,E.U2)(l,t);return(0,E.o8)(f)?s:s.filter(function(d,m){return f(d[t],d,m)})},n.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),s=t.start,l=t.end,f=this.coordinateBBox.bl,d=this.coordinateBBox.tr;if((0,E.Xy)(s,f)&&(0,E.Xy)(l,d)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(f,d)},n.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Ue.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(Ue.AFTER_PAINT),this.isDataChanged=!1},n.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,E.U2)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var s=this.viewBBox,l=s.x,f=s.y,d=s.width,m=s.height;this.backgroundStyleRectShape.attr({fill:t,x:l,y:f,width:d,height:m})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},n.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=v(this).shrink(bh(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var s=this.controllers.find(function(x){return x.name==="tooltip"});s.update();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderPaddingRecursive(t)}},n.prototype.renderLayoutRecursive=function(t){var s=this.syncViewPadding===!0?_:(0,E.mf)(this.syncViewPadding)?this.syncViewPadding:void 0;s&&(s(this,this.views,h),this.views.forEach(function(x){x.coordinateBBox=x.viewBBox.shrink(x.autoPadding.getPadding()),x.adjustCoordinate()})),this.doLayout();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderLayoutRecursive(t)}},n.prototype.renderPaintRecursive=function(t){var s=this.middleGroup;if(this.limitInPlot){var l=Yd(this.coordinateInstance),f=l.type,d=l.attrs;s.setClip({type:f,attrs:d})}else s.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var m=this.views,x=0,T=m.length;x<T;x++){var P=m[x];P.renderPaintRecursive(t)}},n.prototype.createScale=function(t,s,l,f){var d=(0,E.U2)(this.options.scales,[t]),m=(0,M.pi)((0,M.pi)({},d),l);return this.parent?this.parent.createScale(t,s,m,f):this.scalePool.createScale(t,s,m,f)},n.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.renderDataRecursive(t)}},n.prototype.calculateViewBBox=function(){var t,s,l,f;if(this.parent){var d=this.parent.coordinateBBox;t=d.x,s=d.y,l=d.width,f=d.height}else t=0,s=0,l=this.canvas.get("width"),f=this.canvas.get("height");var m=this.region,x=m.start,T=m.end,P=new Xo(t+l*x.x,s+f*x.y,l*(T.x-x.x),f*(T.y-x.y));(!this.viewBBox||!this.viewBBox.isEqual(P))&&(this.viewBBox=new Xo(t+l*x.x,s+f*x.y,l*(T.x-x.x),f*(T.y-x.y))),this.coordinateBBox=this.viewBBox},n.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},n.prototype.initComponentController=function(){for(var t=this.usedControllers,s=0,l=t.length;s<l;s++){var f=t[s],d=Pu(f);d&&this.controllers.push(new d(this))}},n.prototype.createViewEvent=function(t){var s=t.shape,l=t.name,f=s?s.get("origin"):null,d=new Ya(this,t,f);return d.type=l,d},n.prototype.doPlotEvent=function(t){var s=t.type,l=t.x,f=t.y,d={x:l,y:f},m=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(m.includes(s)){var x=this.isPointInPlot(d),T=t.clone();if(x){var P="plot:".concat(s);T.type=P,this.emit(P,T),(s==="mouseleave"||s==="touchend")&&(this.isPreMouseInPlot=!1)}s==="mousemove"||s==="touchmove"?(this.isPreMouseInPlot&&!x?(s==="mousemove"&&(T.type=ht.MOUSE_LEAVE,this.emit(ht.MOUSE_LEAVE,T)),T.type=ht.LEAVE,this.emit(ht.LEAVE,T)):!this.isPreMouseInPlot&&x&&(s==="mousemove"&&(T.type=ht.MOUSE_ENTER,this.emit(ht.MOUSE_ENTER,T)),T.type=ht.ENTER,this.emit(ht.ENTER,T)),this.isPreMouseInPlot=x):(s==="mouseleave"||s==="touchend")&&this.isPreMouseInPlot&&(s==="mouseleave"&&(T.type=ht.MOUSE_LEAVE,this.emit(ht.MOUSE_LEAVE,T)),T.type=ht.LEAVE,this.emit(ht.LEAVE,T),this.isPreMouseInPlot=!1)}},n.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},n.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var s=this.getCoordinate(),l=(0,E.U2)(this.options,"scales",{}),f=this.geometries,d=0,m=f.length;d<m;d++){var x=f[d];x.scales=this.getGeometryScales();var T={coordinate:s,scaleDefs:l,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?x.update(T):x.init(T)}this.adjustScales()},n.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),s=this.getGroupedFields(),l=this.getOptions(),f=l.data,d=l.scales,m=d===void 0?{}:d,x=this.filteredData,T=0,P=t.length;T<P;T++){var D=t[T],B=m[D],U=this.getScaleKey(D);this.createScale(D,s.includes(D)?f:x,B,U),this.createdScaleKeys.set(U,!0)}},n.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},n.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),s={},l=0;l<t.length;l++){var f=t[l];s[f]=this.getScaleByField(f)}return s},n.prototype.getScaleFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getScaleFields();Vf(m,t,s)}return t},n.prototype.getGroupedFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getGroupFields();Vf(m,t,s)}return t},n.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},n.prototype.adjustCategoryScaleRange=function(){var t=this,s=(0,M.ev)([this.getXScale()],(0,M.CR)(this.getYScales()),!1).filter(function(d){return!!d}),l=this.getCoordinate(),f=this.options.scales;(0,E.S6)(s,function(d){var m=d.field,x=d.values,T=d.isCategory,P=d.isIdentity;(T||P)&&x&&!(0,E.U2)(f,[m,"range"])&&(d.range=_g(d,l,t.theme))})},n.prototype.initComponents=function(t){for(var s=this.controllers,l=0;l<s.length;l++){var f=s[l];t?f.update():(f.clear(),f.render())}},n.prototype.doLayout=function(){this.layoutFunc(this)},n.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,s=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,s)},n.prototype.paintGeometries=function(t){for(var s=this.options.animate,l=this.getCoordinate(),f={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},d=this.geometries,m=0;m<d.length;m++){var x=d[m];x.coordinate=l,x.canvasRegion=f,s||x.animate(!1),x.paint(t)}},n.prototype.renderComponents=function(t){for(var s=this.getComponents(),l=0;l<s.length;l++){var f=s[l];f.component.render()}},n.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},n.prototype.initOptions=function(){var t=this,s=this.options,l=s.geometries,f=l===void 0?[]:l,d=s.interactions,m=d===void 0?[]:d,x=s.views,T=x===void 0?[]:x,P=s.annotations,D=P===void 0?[]:P,B=s.coordinate,U=s.events,Y=s.facets;this.coordinateController?B&&this.coordinateController.update(B):this.coordinateController=new a_(B);for(var se=0;se<f.length;se++){var xe=f[se];this.createGeometry(xe)}for(var Ee=0;Ee<m.length;Ee++){var rt=m[Ee],vt=rt.type,xt=rt.cfg;this.interaction(vt,xt)}for(var Bt=0;Bt<T.length;Bt++){var _r=T[Bt];this.createView(_r)}for(var Or=this.getController("annotation"),Wr=0;Wr<D.length;Wr++){var gn=D[Wr];Or.annotation(gn)}U&&(0,E.S6)(U,function($r,zn){t.on(zn,$r)}),Y&&(0,E.S6)(Y,function($r){var zn=$r.type,li=(0,M._T)($r,["type"]);t.facet(zn,li)})},n.prototype.createGeometry=function(t){var s=t.type,l=t.cfg,f=l===void 0?{}:l;if(this[s]){var d=this[s](f);(0,E.S6)(t,function(m,x){(0,E.mf)(d[x])&&d[x](m)})}},n.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},n}(me);function F(i,n){R.prototype[i.toLowerCase()]=function(t){t===void 0&&(t={});var s=(0,M.pi)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),l=new n(s);return this.geometries.push(l),l}}var z=R,X=function(i){(0,M.ZT)(n,i);function n(t){var s=this,l=t.container,f=t.width,d=t.height,m=t.autoFit,x=m===void 0?!1:m,T=t.padding,P=t.appendPadding,D=t.renderer,B=D===void 0?"canvas":D,U=t.pixelRatio,Y=t.localRefresh,se=Y===void 0?!0:Y,xe=t.visible,Ee=xe===void 0?!0:xe,rt=t.supportCSSTransform,vt=rt===void 0?!1:rt,xt=t.defaultInteractions,Bt=xt===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:xt,_r=t.options,Or=t.limitInPlot,Wr=t.theme,gn=t.syncViewPadding,$r=(0,E.HD)(l)?document.getElementById(l):l,zn=(0,We.Z)('<div style="position:relative;"></div>');$r.appendChild(zn);var li=Ce($r,x,f,d),zi=Qe(B),ia=new zi.Canvas((0,M.pi)({container:zn,pixelRatio:U,localRefresh:se,supportCSSTransform:vt},li));return s=i.call(this,{parent:null,canvas:ia,backgroundGroup:ia.addGroup({zIndex:Be.BG}),middleGroup:ia.addGroup({zIndex:Be.MID}),foregroundGroup:ia.addGroup({zIndex:Be.FORE}),padding:T,appendPadding:P,visible:Ee,options:_r,limitInPlot:Or,theme:Wr,syncViewPadding:gn})||this,s.onResize=(0,E.Ds)(function(){s.forceFit()},300),s.ele=$r,s.canvas=ia,s.width=li.width,s.height=li.height,s.autoFit=x,s.localRefresh=se,s.renderer=B,s.wrapperElement=zn,s.updateCanvasStyle(),s.bindAutoFit(),s.initDefaultInteractions(Bt),s}return n.prototype.initDefaultInteractions=function(t){var s=this;(0,E.S6)(t,function(l){s.interaction(l)})},n.prototype.aria=function(t){var s="aria-label";t===!1?this.ele.removeAttribute(s):this.ele.setAttribute(s,t.label)},n.prototype.changeSize=function(t,s){return this.width===t&&this.height===s?this:(this.emit(Ue.BEFORE_CHANGE_SIZE),this.width=t,this.height=s,this.canvas.changeSize(t,s),this.render(!0),this.emit(Ue.AFTER_CHANGE_SIZE),this)},n.prototype.clear=function(){i.prototype.clear.call(this),this.aria(!1)},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),De(this.wrapperElement),this.wrapperElement=null},n.prototype.changeVisible=function(t){return i.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},n.prototype.forceFit=function(){if(!this.destroyed){var t=Ce(this.ele,!0,this.width,this.height),s=t.width,l=t.height;this.changeSize(s,l)}},n.prototype.updateCanvasStyle=function(){(0,oe.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},n.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},n.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},n}(z),ue=X,Ie=function(){function i(n){this.visible=!0,this.components=[],this.view=n}return i.prototype.clear=function(n){(0,E.S6)(this.components,function(t){t.component.destroy()}),this.components=[]},i.prototype.destroy=function(){this.clear()},i.prototype.getComponents=function(){return this.components},i.prototype.changeVisible=function(n){this.visible!==n&&(this.components.forEach(function(t){n?t.component.show():t.component.hide()}),this.visible=n)},i}();function qe(i){for(var n=[],t=function(l){var f=i[l],d=(0,E.sE)(n,function(m){return m.color===f.color&&m.name===f.name&&m.value===f.value&&m.title===f.title});d||n.push(f)},s=0;s<i.length;s++)t(s);return n}var lt=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(n.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},n.prototype.render=function(){},n.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var s=this.view,l=this.getTooltipItems(t);if(!l.length){this.hideTooltip();return}var f=this.getTitle(l),d={x:l[0].x,y:l[0].y};s.emit("tooltip:show",Ya.fromData(s,"tooltip:show",(0,M.pi)({items:l,title:f},t)));var m=this.getTooltipCfg(),x=m.follow,T=m.showMarkers,P=m.showCrosshairs,D=m.showContent,B=m.marker,U=this.items,Y=this.title;if(!(0,E.Xy)(Y,f)||!(0,E.Xy)(U,l)?(s.emit("tooltip:change",Ya.fromData(s,"tooltip:change",(0,M.pi)({items:l,title:f},t))),((0,E.mf)(D)?D(l):D)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,E.CD)({},m,{items:this.getItemsAfterProcess(l),title:f},x?t:{})),this.tooltip.show()),T&&this.renderTooltipMarkers(l,B)):(this.tooltip&&x&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=l,this.title=f,P){var se=(0,E.U2)(m,["crosshairs","follow"],!1);this.renderCrosshairs(se?t:d,m)}}},n.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var s=this.tooltipMarkersGroup;s&&s.hide();var l=this.xCrosshair,f=this.yCrosshair;l&&l.hide(),f&&f.hide();var d=this.tooltip;d&&d.hide(),this.view.emit("tooltip:hide",Ya.fromData(this.view,"tooltip:hide",{})),this.point=null},n.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},n.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},n.prototype.isTooltipLocked=function(){return this.isLocked},n.prototype.clear=function(){var t=this,s=t.tooltip,l=t.xCrosshair,f=t.yCrosshair,d=t.tooltipMarkersGroup;s&&(s.hide(),s.clear()),l&&l.clear(),f&&f.clear(),d&&d.clear(),s!=null&&s.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},n.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},n.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},n.prototype.changeVisible=function(t){if(this.visible!==t){var s=this,l=s.tooltip,f=s.tooltipMarkersGroup,d=s.xCrosshair,m=s.yCrosshair;t?(l&&l.show(),f&&f.show(),d&&d.show(),m&&m.show()):(l&&l.hide(),f&&f.hide(),d&&d.hide(),m&&m.hide()),this.visible=t}},n.prototype.getTooltipItems=function(t){var s,l,f,d,m,x,T=this.findItemsFromView(this.view,t);if(T.length){T=(0,E.xH)(T);try{for(var P=(0,M.XA)(T),D=P.next();!D.done;D=P.next()){var B=D.value;try{for(var U=(f=void 0,(0,M.XA)(B)),Y=U.next();!Y.done;Y=U.next()){var se=Y.value,xe=se.mappingData,Ee=xe.x,rt=xe.y;se.x=(0,E.kJ)(Ee)?Ee[Ee.length-1]:Ee,se.y=(0,E.kJ)(rt)?rt[rt.length-1]:rt}}catch($r){f={error:$r}}finally{try{Y&&!Y.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch($r){s={error:$r}}finally{try{D&&!D.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}var vt=this.getTooltipCfg().shared;if(vt===!1&&T.length>1){var xt=T[0],Bt=Math.abs(t.y-xt[0].y);try{for(var _r=(0,M.XA)(T),Or=_r.next();!Or.done;Or=_r.next()){var Wr=Or.value,gn=Math.abs(t.y-Wr[0].y);gn<=Bt&&(xt=Wr,Bt=gn)}}catch($r){m={error:$r}}finally{try{Or&&!Or.done&&(x=_r.return)&&x.call(_r)}finally{if(m)throw m.error}}T=[xt]}return qe((0,E.xH)(T))}return[]},n.prototype.layout=function(){},n.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},n.prototype.isCursorEntered=function(t){if(this.tooltip){var s=this.tooltip.getContainer(),l=this.tooltip.get("capture");if(s&&l){var f=s.getBoundingClientRect(),d=f.x,m=f.y,x=f.width,T=f.height;return new Xo(d,m,x,T).isPointIn(t)}}return!1},n.prototype.getTooltipCfg=function(){var t=this.view,s=t.getOptions().tooltip,l=this.processCustomContent(s),f=t.getTheme(),d=(0,E.U2)(f,["components","tooltip"],{}),m=(0,E.U2)(l,"enterable",d.enterable);return(0,E.b$)({},d,l,{capture:!!(m||this.isLocked)})},n.prototype.processCustomContent=function(t){if((0,E.jn)(t)||!(0,E.U2)(t,"customContent"))return t;var s=t.customContent,l=function(f,d){var m=s(f,d)||"";return(0,E.HD)(m)?'<div class="g2-tooltip">'+m+"</div>":m};return(0,M.pi)((0,M.pi)({},t),{customContent:l})},n.prototype.getTitle=function(t){var s=t[0].title||t[0].name;return this.title=s,s},n.prototype.renderTooltip=function(){var t=this.view.getCanvas(),s={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},l=this.getTooltipCfg(),f=new Xd((0,M.pi)((0,M.pi)({parent:t.get("el").parentNode,region:s},l),{visible:!1,crosshairs:null}));f.init(),this.tooltip=f},n.prototype.renderTooltipMarkers=function(t,s){var l,f,d=this.getTooltipMarkersGroup(),m=this.view.getRootView(),x=m.limitInPlot;try{for(var T=(0,M.XA)(t),P=T.next();!P.done;P=T.next()){var D=P.value,B=D.x,U=D.y;if(x||d!=null&&d.getClip()){var Y=Yd(m.getCoordinate()),se=Y.type,xe=Y.attrs;d==null||d.setClip({type:se,attrs:xe})}else d==null||d.setClip(void 0);var Ee=this.view.getTheme(),rt=(0,E.U2)(Ee,["components","tooltip","marker"],{}),vt=(0,M.pi)((0,M.pi)({fill:D.color,symbol:"circle",shadowColor:D.color},(0,E.mf)(s)?(0,M.pi)((0,M.pi)({},rt),s(D)):s),{x:B,y:U});d.addShape("marker",{attrs:vt})}}catch(xt){l={error:xt}}finally{try{P&&!P.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}},n.prototype.renderCrosshairs=function(t,s){var l=(0,E.U2)(s,["crosshairs","type"],"x");l==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,s)):l==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,s)):l==="xy"&&(this.renderXCrosshairs(t,s),this.renderYCrosshairs(t,s))},n.prototype.renderXCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect)l.isTransposed?(f={x:l.start.x,y:t.y},d={x:l.end.x,y:t.y}):(f={x:t.x,y:l.end.y},d={x:t.x,y:l.start.y});else{var m=Lp(l,t),x=l.getCenter(),T=l.getRadius();d=fs(x.x,x.y,T,m),f=x}var P=(0,E.b$)({start:f,end:d,container:this.getTooltipCrosshairsGroup()},(0,E.U2)(s,"crosshairs",{}),this.getCrosshairsText("x",t,s));delete P.type;var D=this.xCrosshair;D?D.update(P):(D=new Ls(P),D.init()),D.render(),D.show(),this.xCrosshair=D},n.prototype.renderYCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect){var m=void 0,x=void 0;l.isTransposed?(m={x:t.x,y:l.end.y},x={x:t.x,y:l.start.y}):(m={x:l.start.x,y:t.y},x={x:l.end.x,y:t.y}),f={start:m,end:x},d="Line"}else f={center:l.getCenter(),radius:Qh(l,t),startAngle:l.startAngle,endAngle:l.endAngle},d="Circle";f=(0,E.b$)({container:this.getTooltipCrosshairsGroup()},f,(0,E.U2)(s,"crosshairs",{}),this.getCrosshairsText("y",t,s)),delete f.type;var T=this.yCrosshair;T?l.isRect&&T.get("type")==="circle"||!l.isRect&&T.get("type")==="line"?(T=new Q[d](f),T.init()):T.update(f):(T=new Q[d](f),T.init()),T.render(),T.show(),this.yCrosshair=T},n.prototype.getCrosshairsText=function(t,s,l){var f=(0,E.U2)(l,["crosshairs","text"]),d=(0,E.U2)(l,["crosshairs","follow"]),m=this.items;if(f){var x=this.getViewWithGeometry(this.view),T=m[0],P=x.getXScale(),D=x.getYScales()[0],B=void 0,U=void 0;if(d){var Y=this.view.getCoordinate().invert(s);B=P.invert(Y.x),U=D.invert(Y.y)}else B=T.data[P.field],U=T.data[D.field];var se=t==="x"?B:U;return(0,E.mf)(f)?f=f(t,se,m,s):f.content=se,{text:f}}},n.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},n.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},n.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},n.prototype.findItemsFromView=function(t,s){var l,f;if(t.getOptions().tooltip===!1)return[];var d=this.getTooltipCfg(),m=Cg(t,s,d);try{for(var x=(0,M.XA)(t.views),T=x.next();!T.done;T=x.next()){var P=T.value;m=m.concat(this.findItemsFromView(P,s))}}catch(D){l={error:D}}finally{try{T&&!T.done&&(f=x.return)&&f.call(x)}finally{if(l)throw l.error}}return m},n.prototype.getViewWithGeometry=function(t){var s=this;return t.geometries.length?t:(0,E.sE)(t.views,function(l){return s.getViewWithGeometry(l)})},n.prototype.getItemsAfterProcess=function(t){var s=this.getTooltipCfg().customItems,l=s||function(f){return f};return l(t)},n}(Ie),yt=lt,Lt={};function Ut(i){return Lt[i.toLowerCase()]}function ur(i,n){Lt[i.toLowerCase()]=n}var fr={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Dr={interval:function(i){return{enter:{animation:i.isRect?i.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:i.isPolar&&i.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Mr={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(i){var n;return i.isRect?n=i.isTransposed?"grow-in-x":"grow-in-y":(n="grow-in-xy",i.isPolar&&i.isTransposed&&(n="wave-in")),{animation:n}},schema:function(i){var n;return i.isRect?n=i.isTransposed?"grow-in-x":"grow-in-y":n="grow-in-xy",{animation:n}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Yr(i,n){return{delay:(0,E.mf)(i.delay)?i.delay(n):i.delay,easing:(0,E.mf)(i.easing)?i.easing(n):i.easing,duration:(0,E.mf)(i.duration)?i.duration(n):i.duration,callback:i.callback,repeat:i.repeat}}function on(i,n,t){var s=Dr[i];return s&&((0,E.mf)(s)&&(s=s(n)),s=(0,E.b$)({},fr,s),t)?s[t]:s}function vn(i,n,t){var s=(0,E.U2)(i.get("origin"),"data",ye),l=n.animation,f=Yr(n,s);if(l){var d=Ut(l);d&&d(i,f,t)}else i.animate(t.toAttrs,f)}function wn(i,n,t,s,l){if(Mr[t]){var f=Mr[t](s),d=Ut((0,E.U2)(f,"animation",""));if(d){var m=(0,M.pi)((0,M.pi)((0,M.pi)({},fr.appear),f),n);i.stopAnimate(),d(i,m,{coordinate:s,minYPoint:l,toAttrs:null})}}}var Fn="element-background",ci=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.labelShape=[],s.states=[];var l=t.shapeFactory,f=t.container,d=t.offscreenGroup,m=t.elementIndex,x=t.visible,T=x===void 0?!0:x;return s.shapeFactory=l,s.container=f,s.offscreenGroup=d,s.visible=T,s.elementIndex=m,s}return n.prototype.draw=function(t,s){s===void 0&&(s=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,s),this.visible===!1&&this.changeVisible(!1)},n.prototype.update=function(t){var s=this,l=s.shapeFactory,f=s.shape;if(f){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(f,t);var d=this.getOffscreenGroup(),m=l.drawShape(this.shapeType,t,d);m.cfg.data=this.data,m.cfg.origin=t,m.cfg.element=this,this.syncShapeStyle(f,m,this.getStates(),this.getAnimateCfg("update"))}},n.prototype.destroy=function(){var t=this,s=t.shapeFactory,l=t.shape;if(l){var f=this.getAnimateCfg("leave");f?vn(l,f,{coordinate:s.coordinate,toAttrs:(0,M.pi)({},l.attr())}):l.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,i.prototype.destroy.call(this)},n.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(s){s.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(s){s.hide()}))},n.prototype.setState=function(t,s){var l=this,f=l.states,d=l.shapeFactory,m=l.model,x=l.shape,T=l.shapeType,P=f.indexOf(t);if(s){if(P>-1)return;f.push(t),(t==="active"||t==="selected")&&(x==null||x.toFront())}else{if(P===-1)return;if(f.splice(P,1),t==="active"||t==="selected"){var D=this.geometry,B=D.sortZIndex,U=D.zIndexReversed,Y=U?this.geometry.elements.length-this.elementIndex:this.elementIndex;B?x.setZIndex(Y):x.set("zIndex",Y)}}var se=d.drawShape(T,m,this.getOffscreenGroup());f.length?this.syncShapeStyle(x,se,f,null):this.syncShapeStyle(x,se,["reset"],null),se.remove(!0);var xe={state:t,stateStatus:s,element:this,target:this.container};this.container.emit("statechange",xe),Ni(this.shape,"statechange",xe)},n.prototype.clearStates=function(){var t=this,s=this.states;(0,E.S6)(s,function(l){t.setState(l,!1)}),this.states=[]},n.prototype.hasState=function(t){return this.states.includes(t)},n.prototype.getStates=function(){return this.states},n.prototype.getData=function(){return this.data},n.prototype.getModel=function(){return this.model},n.prototype.getBBox=function(){var t=this,s=t.shape,l=t.labelShape,f={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return s&&(f=s.getCanvasBBox()),l&&l.forEach(function(d){var m=d.getCanvasBBox();f.x=Math.min(m.x,f.x),f.y=Math.min(m.y,f.y),f.minX=Math.min(m.minX,f.minX),f.minY=Math.min(m.minY,f.minY),f.maxX=Math.max(m.maxX,f.maxX),f.maxY=Math.max(m.maxY,f.maxY)}),f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,f},n.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,s=t.shapeType,l=t.geometry,f=t.shapeFactory,d=l.stateOption,m=f.defaultShapeType,x=f.theme[s]||f.theme[m];this.statesStyle=(0,E.b$)({},x,d)}return this.statesStyle},n.prototype.getStateStyle=function(t,s){var l=this.getStatesStyle(),f=(0,E.U2)(l,[t,"style"],{}),d=f[s]||f;return(0,E.mf)(d)?d(this):d},n.prototype.getAnimateCfg=function(t){var s=this,l=this.animate;if(l){var f=l[t];return f&&(0,M.pi)((0,M.pi)({},f),{callback:function(){var d;(0,E.mf)(f.callback)&&f.callback(),(d=s.geometry)===null||d===void 0||d.emit(it.AFTER_DRAW_ANIMATE)}})}return null},n.prototype.drawShape=function(t,s){var l;s===void 0&&(s=!1);var f=this,d=f.shapeFactory,m=f.container,x=f.shapeType;if(this.shape=d.drawShape(x,t,m),this.shape){this.setShapeInfo(this.shape,t);var T=this.shape.cfg.name;T?(0,E.HD)(T)&&(this.shape.cfg.name=["element",T]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var P=s?"enter":"appear",D=this.getAnimateCfg(P);D&&((l=this.geometry)===null||l===void 0||l.emit(it.BEFORE_DRAW_ANIMATE),vn(this.shape,D,{coordinate:d.coordinate,toAttrs:(0,M.pi)({},this.shape.attr())}))}},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},n.prototype.setShapeInfo=function(t,s){var l=this;if(t.cfg.origin=s,t.cfg.element=this,t.isGroup()){var f=t.get("children");f.forEach(function(d){l.setShapeInfo(d,s)})}},n.prototype.syncShapeStyle=function(t,s,l,f,d){var m=this,x;if(l===void 0&&(l=[]),d===void 0&&(d=0),!(!t||!s)){var T=t.get("clipShape"),P=s.get("clipShape");if(this.syncShapeStyle(T,P,l,f),t.isGroup())for(var D=t.get("children"),B=s.get("children"),U=0;U<D.length;U++)this.syncShapeStyle(D[U],B[U],l,f,d+U);else{if(!(0,E.xb)(l)&&!(0,E.Xy)(l,["reset"])){var Y=t.get("name");(0,E.kJ)(Y)&&(Y=Y[1]),(0,E.S6)(l,function(xe){if(s.get("name")!==Fn){var Ee=m.getStateStyle(xe,Y||d);s.attr(Ee)}})}var se=_h(t,s);this.animate?f?((x=this.geometry)===null||x===void 0||x.emit(it.BEFORE_DRAW_ANIMATE),vn(t,f,{coordinate:this.shapeFactory.coordinate,toAttrs:se,shapeModel:this.model})):(0,E.xb)(l)?t.attr(se):(t.stopAnimate(),t.animate(se,{duration:300})):t.attr(se)}}},n.prototype.getShapeType=function(t){var s=(0,E.U2)(t,"shape");return(0,E.kJ)(s)?s[0]:s},n}(me),Si=ci,Ji={},ki={};function la(i){return Ji[i.toLowerCase()]}function Ii(i,n){Ji[i.toLowerCase()]=n}function eo(i){return ki[i.toLowerCase()]}function qi(i,n){ki[i.toLowerCase()]=n}var Gi={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(i,n){var t=this.getShape(i);return t.getPoints?t.getPoints(n):this.getDefaultPoints(n)},getShape:function(i){var n=this[i]||this[this.defaultShapeType];return n.coordinate=this.coordinate,n},getDefaultPoints:function(){return[]},getDefaultStyle:function(i){return(0,E.U2)(i,[this.defaultShapeType,"default","style"],{})},getMarker:function(i,n){var t=this.getShape(i);if(!t.getMarker){var s=this.defaultShapeType;t=this.getShape(s)}var l=this.theme,f=(0,E.U2)(l,[i,"default"],{}),d=t.getMarker(n);return(0,E.b$)({},f,d)},drawShape:function(i,n,t){var s=this.getShape(i);return s.draw(n,t)}},fo={coordinate:null,parsePath:function(i){var n=this.coordinate,t=(0,Yh.tr)(i);return n.isPolar?t=Li(n,t):t=Ja(n,t),t},parsePoint:function(i){var n=this.coordinate;return n.convert(i)},parsePoints:function(i){var n=this.coordinate;return i.map(function(t){return n.convert(t)})},draw:function(i,n){}},za={};function to(i,n){var t=(0,E.jC)(i),s=(0,M.pi)((0,M.pi)((0,M.pi)({},Gi),n),{geometryType:i});return za[t]=s,s}function mi(i,n,t){var s=(0,E.jC)(i),l=za[s],f=(0,M.pi)((0,M.pi)({},fo),t);return l[n]=f,f}function mo(i){var n=(0,E.jC)(i);return za[n]}function Ms(i,n,t){var s,l;if(t===void 0&&(t={}),!n)return[i];var f=(0,E.Ms)(i,n),d=[];if(n.length===1&&t[n[0]]){var m=t[n[0]];try{for(var x=(0,M.XA)(m),T=x.next();!T.done;T=x.next()){var P=T.value,D=f["_".concat(P)];D&&d.push(D)}}catch(Y){s={error:Y}}finally{try{T&&!T.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}else for(var B in f)if(f.hasOwnProperty(B)){var U=f[B];d.push(U)}return d}function js(i,n){return(0,E.G)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,E.Xy)(i[t],n[t])})}function xs(i){return(0,E.kJ)(i)?i:i.split("*")}function Rs(i,n){for(var t=[],s=[],l=[],f=new Map,d=0;d<n.length;d++){var m=n[d];i[m]?s.push(m):t.push(m),f.set(m,!0)}return Object.keys(i).forEach(function(x){f.has(x)||l.push(x)}),{added:t,updated:s,removed:l}}var eu=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="base",s.attributes={},s.elements=[],s.elementsMap={},s.animateOption=!0,s.attributeOption={},s.lastElementsMap={},s.generatePoints=!1,s.beforeMappingData=null,s.adjusts={},s.idFields=[],s.hasSorted=!1,s.isCoordinateChanged=!1;var l=t.container,f=t.labelsContainer,d=t.coordinate,m=t.data,x=t.sortable,T=x===void 0?!1:x,P=t.visible,D=P===void 0?!0:P,B=t.theme,U=t.scales,Y=U===void 0?{}:U,se=t.scaleDefs,xe=se===void 0?{}:se,Ee=t.intervalPadding,rt=t.dodgePadding,vt=t.maxColumnWidth,xt=t.minColumnWidth,Bt=t.columnWidthRatio,_r=t.roseWidthRatio,Or=t.multiplePieWidthRatio,Wr=t.zIndexReversed,gn=t.sortZIndex,$r=t.useDeferredLabel;return s.container=l,s.labelsContainer=f,s.coordinate=d,s.data=m,s.sortable=T,s.visible=D,s.userTheme=B,s.scales=Y,s.scaleDefs=xe,s.intervalPadding=Ee,s.dodgePadding=rt,s.maxColumnWidth=vt,s.minColumnWidth=xt,s.columnWidthRatio=Bt,s.roseWidthRatio=_r,s.multiplePieWidthRatio=Or,s.zIndexReversed=Wr,s.sortZIndex=gn,s.useDeferredLabel=$r?typeof $r=="number"?$r:1/0:null,s}return n.prototype.position=function(t){var s=t;(0,E.PO)(t)||(s={fields:xs(t)});var l=(0,E.U2)(s,"fields");return l.length===1&&(l.unshift("1"),(0,E.t8)(s,"fields",l)),(0,E.t8)(this.attributeOption,"position",s),this},n.prototype.color=function(t,s){return this.createAttrOption("color",t,s),this},n.prototype.shape=function(t,s){return this.createAttrOption("shape",t,s),this},n.prototype.size=function(t,s){return this.createAttrOption("size",t,s),this},n.prototype.adjust=function(t){var s=t;return((0,E.HD)(t)||(0,E.PO)(t))&&(s=[t]),(0,E.S6)(s,function(l,f){(0,E.Kn)(l)||(s[f]={type:l})}),this.adjustOption=s,this},n.prototype.style=function(t,s){if((0,E.HD)(t)){var l=xs(t);this.styleOption={fields:l,callback:s}}else{var f=t,l=f.fields,d=f.callback,m=f.cfg;l||d||m?this.styleOption=t:this.styleOption={cfg:t}}return this},n.prototype.tooltip=function(t,s){if((0,E.HD)(t)){var l=xs(t);this.tooltipOption={fields:l,callback:s}}else this.tooltipOption=t;return this},n.prototype.animate=function(t){return this.animateOption=t,this},n.prototype.label=function(t,s,l){if((0,E.HD)(t)){var f={},d=xs(t);f.fields=d,(0,E.mf)(s)?f.callback=s:(0,E.PO)(s)&&(f.cfg=s),l&&(f.cfg=l),this.labelOption=f}else this.labelOption=t;return this},n.prototype.state=function(t){return this.stateOption=t,this},n.prototype.customInfo=function(t){return this.customOption=t,this},n.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},n.prototype.update=function(t){t===void 0&&(t={});var s=t.data,l=t.isDataChanged,f=t.isCoordinateChanged,d=this,m=d.attributeOption,x=d.lastAttributeOption;(0,E.Xy)(m,x)?s&&(l||!(0,E.Xy)(s,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(s)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=f},n.prototype.paint=function(t){var s=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,E.b$)({},on(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var l=this.getOffscreenGroup();l.clear();var f=this.beforeMappingData,d=this.beforeMapping(f);this.dataArray=new Array(d.length);for(var m=0;m<d.length;m++){var x=d[m];this.dataArray[m]=this.mapping(x)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var T=this.container,P=this.type,D=this.coordinate,B=(0,E.U2)(this.animateOption,"appear"),U=this.getYScale(),Y=D.convert({x:0,y:U.scale(this.getYMinValue())});wn(T,B,P,D,Y)}if(this.labelOption){var se=this.useDeferredLabel,xe=function(){return s.renderLabels((0,E.xH)(s.dataArray),t)}.bind(this);if(typeof se=="number"){var Ee=typeof se=="number"&&se!==1/0?se:0;if(!window.requestIdleCallback)setTimeout(xe,Ee);else{var rt=Ee&&Ee!==1/0?{timeout:Ee}:void 0;window.requestIdleCallback(xe,rt)}}else xe()}this.lastAttributeOption=(0,M.pi)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var t=this,s=t.container,l=t.geometryLabel,f=t.offscreenGroup;s&&s.clear(),l&&l.clear(),f&&f.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},n.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,i.prototype.destroy.call(this)},n.prototype.getGroupScales=function(){return this.groupScales},n.prototype.getAttribute=function(t){return this.attributes[t]},n.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},n.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},n.prototype.getGroupAttributes=function(){var t=[];return(0,E.S6)(this.attributes,function(s){Se.includes(s.type)&&t.push(s)}),t},n.prototype.getDefaultValue=function(t){var s,l=this.getAttribute(t);return l&&(0,E.xb)(l.scales)&&(s=l.values[0]),s},n.prototype.getAttributeValues=function(t,s){for(var l=[],f=t.scales,d=0,m=f.length;d<m;d++){var x=f[d],T=x.field;x.isIdentity?l.push(x.values):l.push(s[T])}return t.mapping.apply(t,(0,M.ev)([],(0,M.CR)(l),!1))},n.prototype.getAdjust=function(t){return this.adjusts[t]},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.getData=function(){return this.data},n.prototype.getShapeMarker=function(t,s){var l=this.getShapeFactory();return l.getMarker(t,s)},n.prototype.getElementsBy=function(t){return this.elements.filter(function(s){return t(s)})},n.prototype.getElements=function(){return this.elements},n.prototype.getElementId=function(t){t=(0,E.kJ)(t)?t[0]:t;var s=t[ye];if(this.idFields.length){for(var l=s[this.idFields[0]],f=1;f<this.idFields.length;f++)l+="-"+s[this.idFields[f]];return l}var d=this.type,m=this.getXScale(),x=this.getYScale(),T=m.field||"x",P=x.field||"y",D=s[P],B;m.type==="identity"?B=m.values[0]:B=s[T];var U;d==="interval"||d==="schema"?U="".concat(B):d==="line"||d==="area"||d==="path"?U=d:U="".concat(B,"-").concat(D);for(var Y=this.groupScales,f=0,se=Y.length;f<se;f++){var xe=Y[f],Ee=xe.field;U="".concat(U,"-").concat(s[Ee])}var rt=this.getAdjust("dodge");if(rt){var vt=rt.dodgeBy;vt&&(U="".concat(U,"-").concat(s[vt]))}return this.getAdjust("jitter")&&(U="".concat(U,"-").concat(t.x,"-").concat(t.y)),U},n.prototype.getScaleFields=function(){var t=[],s=new Map,l=this,f=l.attributeOption,d=l.labelOption,m=l.tooltipOption;for(var x in f)if(f.hasOwnProperty(x)){var T=f[x];T.fields?Vf(T.fields,t,s):T.values&&Vf(T.values,t,s)}return d&&d.fields&&Vf(d.fields,t,s),(0,E.Kn)(m)&&m.fields&&Vf(m.fields,t,s),t},n.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var s=this.elements,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},n.prototype.getFields=function(){var t=new Map,s=[];return Object.values(this.attributeOption).forEach(function(l){var f=(l==null?void 0:l.fields)||[];f.forEach(function(d){t.has(d)||s.push(d),t.set(d,!0)})},[]),s},n.prototype.getGroupFields=function(){for(var t=[],s=new Map,l=0,f=Se.length;l<f;l++){var d=Se[l],m=this.attributeOption[d];m&&m.fields&&Vf(m.fields,t,s)}return t},n.prototype.getXYFields=function(){var t=(0,M.CR)(this.attributeOption.position.fields,2),s=t[0],l=t[1];return[s,l]},n.prototype.getXField=function(){return(0,E.U2)(this.getXYFields(),[0])},n.prototype.getYField=function(){return(0,E.U2)(this.getXYFields(),[1])},n.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},n.prototype.sort=function(t){if(!this.hasSorted)for(var s=this.getXScale(),l=s.field,f=0;f<t.length;f++){var d=t[f];d.sort(function(m,x){return s.translate(m[ye][l])-s.translate(x[ye][l])})}this.hasSorted=!0},n.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},n.prototype.getShapeFactory=function(){var t=this.shapeType;if(mo(t))return this.shapeFactory||(this.shapeFactory=(0,E.d9)(mo(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},n.prototype.createShapePointsCfg=function(t){var s=this.getXScale(),l=this.getYScale(),f=this.normalizeValues(t[s.field],s),d;return l?d=this.normalizeValues(t[l.field],l):d=t.y?t.y:.1,{x:f,y:d,y0:l?l.scale(this.getYMinValue()):void 0}},n.prototype.createElement=function(t,s,l){l===void 0&&(l=!1);var f=this.container,d=this.getDrawCfg(t),m=this.getShapeFactory(),x=new Si({shapeFactory:m,container:f,offscreenGroup:this.getOffscreenGroup(),elementIndex:s});return x.animate=this.animateOption,x.geometry=this,x.draw(d,l),x},n.prototype.getDrawCfg=function(t){var s=t[ye],l={mappingData:t,data:s,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},f=t.shape;!f&&this.getShapeFactory()&&(f=this.getShapeFactory().defaultShapeType),l.shape=f;var d=this.theme.geometries[this.shapeType];l.defaultStyle=(0,E.U2)(d,[f,"default"],{}).style,!l.defaultStyle&&this.getShapeFactory()&&(l.defaultStyle=this.getShapeFactory().getDefaultStyle(d));var m=this.styleOption;return m&&(l.style=this.getStyleCfg(m,s)),this.generatePoints&&(l.points=t.points,l.nextPoints=t.nextPoints),l},n.prototype.updateElements=function(t,s){var l,f,d,m,x,T;s===void 0&&(s=!1);for(var P=new Map,D=[],B=new Map,U=0,Y=0;Y<t.length;Y++)for(var se=t[Y],xe=0;xe<se.length;xe++){var Ee=se[xe],rt=this.getElementId(Ee),vt=P.has(rt)?"".concat(rt,"-").concat(Y,"-").concat(xe):rt;D.push(vt),P.set(vt,Ee),B.set(vt,U),U++}this.elements=new Array(U);var xt=Rs(this.lastElementsMap,D),Bt=xt.added,_r=xt.updated,Or=xt.removed;try{for(var Wr=(0,M.XA)(Bt),gn=Wr.next();!gn.done;gn=Wr.next()){var rt=gn.value,Ee=P.get(rt),Y=B.get(rt),$r=this.createElement(Ee,Y,s);this.elements[Y]=$r,this.elementsMap[rt]=$r,$r.shape&&$r.shape.set("zIndex",this.zIndexReversed?this.elements.length-Y:Y)}}catch(Di){l={error:Di}}finally{try{gn&&!gn.done&&(f=Wr.return)&&f.call(Wr)}finally{if(l)throw l.error}}try{for(var zn=(0,M.XA)(_r),li=zn.next();!li.done;li=zn.next()){var rt=li.value,$r=this.lastElementsMap[rt],Ee=P.get(rt),zi=this.getDrawCfg(Ee),ia=$r.getModel(),Y=B.get(rt);(this.isCoordinateChanged||js(zi,ia))&&($r.animate=this.animateOption,$r.update(zi)),this.elements[Y]=$r,this.elementsMap[rt]=$r,$r.shape&&$r.shape.set("zIndex",this.zIndexReversed?this.elements.length-Y:Y)}}catch(Di){d={error:Di}}finally{try{li&&!li.done&&(m=zn.return)&&m.call(zn)}finally{if(d)throw d.error}}this.container&&this.container.sort();try{for(var qa=(0,M.XA)(Or),Hn=qa.next();!Hn.done;Hn=qa.next()){var rt=Hn.value,$r=this.lastElementsMap[rt];$r.animate=this.animateOption,$r.destroy()}}catch(Di){x={error:Di}}finally{try{Hn&&!Hn.done&&(T=qa.return)&&T.call(qa)}finally{if(x)throw x.error}}},n.prototype.getLabelType=function(){var t=this,s=t.labelOption,l=t.coordinate,f=t.type,d=l.type,m=l.isTransposed,x=(0,E.U2)(s,["cfg","type"]);return x||(d==="polar"?x=m?"pie":"polar":d==="theta"?x="pie":f==="interval"||f==="polygon"?x="interval":x="base"),x},n.prototype.getYMinValue=function(){var t=this.getYScale(),s=t.min,l=t.max,f;return s>=0?f=s:l<=0?f=l:f=0,f},n.prototype.createAttrOption=function(t,s,l){if((0,E.UM)(s)||(0,E.Kn)(s))(0,E.Kn)(s)&&(0,E.Xy)(Object.keys(s),["values"])?(0,E.t8)(this.attributeOption,t,{fields:s.values}):(0,E.t8)(this.attributeOption,t,s);else{var f={};(0,E.hj)(s)?f.values=[s]:f.fields=xs(s),l&&((0,E.mf)(l)?f.callback=l:f.values=l),(0,E.t8)(this.attributeOption,t,f)}},n.prototype.initAttributes=function(){var t=this,s=this,l=s.attributes,f=s.attributeOption,d=s.theme,m=s.shapeType;this.groupScales=[];var x={},T=function(B){if(f.hasOwnProperty(B)){var U=f[B];if(!U)return{value:void 0};var Y=(0,M.pi)({},U),se=Y.callback,xe=Y.values,Ee=Y.fields,rt=Ee===void 0?[]:Ee,vt=rt.map(function(Bt){var _r=t.scales[Bt];if(!x[Bt]&&Se.includes(B)){var Or=dl(_r,(0,E.U2)(t.scaleDefs,Bt),B,t.type);Or==="cat"&&(t.groupScales.push(_r),x[Bt]=!0)}return _r});Y.scales=vt,B!=="position"&&vt.length===1&&vt[0].type==="identity"?Y.values=vt[0].values:!se&&!xe&&(B==="size"?Y.values=d.sizes:B==="shape"?Y.values=d.shapes[m]||[]:B==="color"&&(vt.length?Y.values=vt[0].values.length<=10?d.colors10:d.colors20:Y.values=d.colors10));var xt=Cc(B);l[B]=new xt(Y)}};for(var P in f){var D=T(P);if(typeof D=="object")return D.value}},n.prototype.processData=function(t){var s,l;this.hasSorted=!1;for(var f=this.getAttribute("position").scales,d=f.filter(function(Or){return Or.isCategory}),m=this.groupData(t),x=[],T=0,P=m.length;T<P;T++){for(var D=m[T],B=[],U=0,Y=D.length;U<Y;U++){var se=D[U],xe={};for(var Ee in se)xe[Ee]=se[Ee];xe[ye]=se;try{for(var rt=(s=void 0,(0,M.XA)(d)),vt=rt.next();!vt.done;vt=rt.next()){var xt=vt.value,Bt=xt.field;xe[Bt]=xt.translate(xe[Bt])}}catch(Or){s={error:Or}}finally{try{vt&&!vt.done&&(l=rt.return)&&l.call(rt)}finally{if(s)throw s.error}}B.push(xe)}x.push(B)}var _r=this.adjustData(x);return this.beforeMappingData=_r,_r},n.prototype.adjustData=function(t){var s=this.adjustOption,l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.theme,x=this.maxColumnWidth||m.maxColumnWidth,T=this.minColumnWidth||m.minColumnWidth,P=this.columnWidthRatio||m.columnWidthRatio,D=t;if(s){var B=this.getXScale(),U=this.getYScale(),Y=B.field,se=U?U.field:null,xe=pl(this.coordinate),Ee=B.values.length,rt=this.getAttribute("size"),vt=void 0;rt&&(vt=rt.values[0]);for(var xt=0,Bt=s.length;xt<Bt;xt++){var _r=s[xt],Or=(0,M.pi)({xField:Y,yField:se,intervalPadding:f,dodgePadding:d,xDimensionLength:xe,groupNum:Ee,defaultSize:vt,maxColumnWidth:x,minColumnWidth:T,columnWidthRatio:P},_r),Wr=_r.type;if(Wr==="dodge"){var gn=[];if(B.isCategory||B.type==="identity")gn.push("x");else if(!U)gn.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Or.adjustNames=gn,Or.dodgeRatio=P}else if(Wr==="stack"){var $r=this.coordinate;if(!U){Or.height=$r.getHeight();var zn=this.getDefaultValue("size")||3;Or.size=zn}!$r.isTransposed&&(0,E.UM)(Or.reverseOrder)&&(Or.reverseOrder=!0)}var li=ft(Wr);Or.dimValuesMap={},B&&B.values&&(Or.dimValuesMap[B.field]=B.values.map(function(ia){return B.translate(ia)}));var zi=new li(Or);D=zi.process(D),this.adjusts[Wr]=zi}}return D},n.prototype.groupData=function(t){for(var s=this.getGroupScales(),l=this.scaleDefs,f={},d=[],m=0;m<s.length;m++){var x=s[m],T=x.field;d.push(T),(0,E.U2)(l,[T,"values"])&&(f[T]=l[T].values)}return Ms(t,d,f)},n.prototype.updateStackRange=function(t,s){for(var l=(0,E.xH)(s),f=t.field,d=t.min,m=t.max,x=0;x<l.length;x++){var T=l[x],P=Math.min.apply(null,T[f]),D=Math.max.apply(null,T[f]);P<d&&(d=P),D>m&&(m=D)}var B=this.scaleDefs,U={};d<t.min&&!(0,E.U2)(B,[f,"min"])&&(U.min=d),m>t.max&&!(0,E.U2)(B,[f,"max"])&&(U.max=m),t.change(U)},n.prototype.beforeMapping=function(t){var s=t;if(this.sortable&&this.sort(s),this.generatePoints)for(var l=0,f=s.length;l<f;l++){var d=s[l];this.generateShapePoints(d);var m=s[l+1];m&&(this.generateShapePoints(m),d[0].nextPoints=m[0].points)}return s},n.prototype.generateShapePoints=function(t){for(var s=this.getShapeFactory(),l=this.getAttribute("shape"),f=0;f<t.length;f++){var d=t[f],m=this.createShapePointsCfg(d),x=l?this.getAttributeValues(l,d):null,T=s.getShapePoints(x,m);d.points=T}},n.prototype.normalizeValues=function(t,s){var l=[];if((0,E.kJ)(t))for(var f=0;f<t.length;f++){var d=t[f];l.push(s.scale(d))}else l=s.scale(t);return l},n.prototype.mapping=function(t){for(var s=this.attributes,l=[],f=0;f<t.length;f++){var d=t[f],m={_origin:d[ye],points:d.points,nextPoints:d.nextPoints};for(var x in s)if(s.hasOwnProperty(x)){var T=s[x],P=T.names,D=this.getAttributeValues(T,d);if(P.length>1)for(var B=0;B<D.length;B+=1){var U=D[B],Y=P[B];m[Y]=(0,E.kJ)(U)&&U.length===1?U[0]:U}else m[P[0]]=D.length===1?D[0]:D}this.convertPoint(m),l.push(m)}return l},n.prototype.convertPoint=function(t){var s=t.x,l=t.y,f,d,m,x=this.coordinate;if((0,E.kJ)(s)&&(0,E.kJ)(l)){f=[],d=[];for(var T=0,P=0,D=s.length,B=l.length;T<D&&P<B;T+=1,P+=1)m=x.convert({x:s[T],y:l[P]}),f.push(m.x),d.push(m.y)}else if((0,E.kJ)(l)){d=[];for(var U=0;U<l.length;U++){var Y=l[U];m=x.convert({x:s,y:Y}),f&&f!==m.x?((0,E.kJ)(f)||(f=[f]),f.push(m.x)):f=m.x,d.push(m.y)}}else if((0,E.kJ)(s)){f=[];for(var U=0;U<s.length;U++){var se=s[U];m=x.convert({x:se,y:l}),d&&d!==m.y?((0,E.kJ)(d)||(d=[d]),d.push(m.y)):d=m.y,f.push(m.x)}}else{var xe=x.convert({x:s,y:l});f=xe.x,d=xe.y}t.x=f,t.y=d},n.prototype.getStyleCfg=function(t,s){var l=t.fields,f=l===void 0?[]:l,d=t.callback,m=t.cfg;if(m)return m;var x=f.map(function(T){return s[T]});return d.apply(void 0,(0,M.ev)([],(0,M.CR)(x),!1))},n.prototype.setCfg=function(t){var s=this,l=t.coordinate,f=t.data,d=t.theme,m=t.scaleDefs;l&&(this.coordinate=l),f&&(this.data=f),m&&(this.scaleDefs=m,this.idFields=[],(0,E.S6)(m,function(x,T){x&&x.key&&s.idFields.push(T)})),d&&(this.theme=this.userTheme?(0,E.b$)({},d,this.userTheme):d)},n.prototype.renderLabels=function(t,s){return s===void 0&&(s=!1),(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,T,P,D,B,U,Y,se,xe=this;return(0,M.Jh)(this,function(Ee){switch(Ee.label){case 0:return l=this.geometryLabel,this.emit(it.BEFORE_RENDER_LABEL),l||(f=this.getLabelType(),d=la(f),l=new d(this),this.geometryLabel=l),[4,l.render(t,s)];case 1:Ee.sent(),m=l.labelsRenderer.shapesMap,x=new Map,(0,E.S6)(m,function(rt,vt){for(var xt=rt.getChildren()||[],Bt=0;Bt<xt.length;Bt++){var _r=xt[Bt],Or=xe.elementsMap[_r.get("elementId")||vt.split(" ")[0]];if(Or){_r.cfg.name=["element","label"],_r.cfg.element=Or;var Wr=x.get(Or)||new Set;Wr.add(rt),x.set(Or,Wr)}}});try{for(T=(0,M.XA)(x.entries()),P=T.next();!P.done;P=T.next())D=(0,M.CR)(P.value,2),B=D[0],U=D[1],B.labelShape=(0,M.ev)([],(0,M.CR)(U),!1)}catch(rt){Y={error:rt}}finally{try{P&&!P.done&&(se=T.return)&&se.call(T)}finally{if(Y)throw Y.error}}return this.emit(it.AFTER_RENDER_LABEL),[2]}})})},n.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,E.U2)(this.animateOption,"appear")===void 0||(0,E.U2)(this.animateOption,"appear")&&(0,E.U2)(this.animateOption,["appear","animation"])===void 0)},n}(me),Ns=eu,_u=vo.vs;function Zu(i,n,t){var s=_u(i.getMatrix(),[["t",n,t]]);i.setMatrix(s)}function Ku(i,n){var t=i.attr(),s=t.x,l=t.y,f=_u(i.getMatrix(),[["t",-s,-l],["r",n],["t",s,l]]);return f}function gl(i,n){var t=Ku(i,n);i.setMatrix(t)}function xu(){return[1,0,0,0,1,0,0,0,1]}function qu(i,n){var t=i.getBBox(),s=(t.minX+t.maxX)/2,l=(t.minY+t.maxY)/2;i.applyToMatrix([s,l,1]);var f=_u(i.getMatrix(),[["t",-s,-l],["s",n,n],["t",s,l]]);i.setMatrix(f)}function Ka(i){return i.find(function(n){return n.get("type")==="text"})}function Ro(i,n,t){t===void 0&&(t=[0,0,0,0]);var s=i&&i.getChildren()[0];if(s){var l=s.clone();n!=null&&n.rotate&&gl(l,-n.rotate);var f=l.getCanvasBBox(),d=f.x,m=f.y,x=f.width,T=f.height;l.destroy();var P=t;return(0,E.UM)(P)?P=[2,2,2,2]:(0,E.hj)(P)&&(P=new Array(4).fill(P)),{x:d-P[3],y:m-P[0],width:x+P[1]+P[3],height:T+P[0]+P[2],rotation:(n==null?void 0:n.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function Io(i,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(i.x+i.width+t,n.x+n.width+t)-Math.max(i.x-t,n.x-t)),l=Math.max(0,Math.min(i.y+i.height+t,n.y+n.height+t)-Math.max(i.y-t,n.y-t));return s*l}function bo(i,n){var t=i.getBBox();return(0,E.G)(n,function(s){var l=s.getBBox();return Io(t,l,2)>0})}function Ko(i,n,t){var s=t.data,l=t.origin,f=t.animateCfg,d=t.coordinate,m=(0,E.U2)(f,"update");i.set("data",s),i.set("origin",l),i.set("animateCfg",f),i.set("coordinate",d),i.set("visible",n.get("visible")),(i.getChildren()||[]).forEach(function(x,T){var P=n.getChildByIndex(T);if(!P)i.removeChild(x),x.remove(!0);else{x.set("data",s),x.set("origin",l),x.set("animateCfg",f),x.set("coordinate",d);var D=_h(x,P);m?vn(x,m,{toAttrs:D,coordinate:d}):x.attr(D),P.isGroup()&&Ko(x,P,t)}}),(0,E.S6)(n.getChildren(),function(x,T){T>=i.getCount()&&(x.destroyed||i.add(x))})}var Il=function(){function i(n){this.shapesMap={};var t=n.layout,s=n.container;this.layout=t,this.container=s}return i.prototype.render=function(n,t,s){return s===void 0&&(s=!1),(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,T,P,D,B=this;return(0,M.Jh)(this,function(U){switch(U.label){case 0:if(l={},f=this.createOffscreenGroup(),!n.length)return[3,2];try{for(d=(0,M.XA)(n),m=d.next();!m.done;m=d.next())x=m.value,x&&(l[x.id]=this.renderLabel(x,f))}catch(Y){P={error:Y}}finally{try{m&&!m.done&&(D=d.return)&&D.call(d)}finally{if(P)throw P.error}}return[4,this.doLayout(n,t,l)];case 1:U.sent(),this.renderLabelLine(n,l),this.renderLabelBackground(n,l),this.adjustLabel(n,l),U.label=2;case 2:return T=this.shapesMap,(0,E.S6)(l,function(Y,se){if(Y.destroyed)delete l[se];else{if(T[se]){var xe=Y.get("data"),Ee=Y.get("origin"),rt=Y.get("coordinate"),vt=Y.get("animateCfg"),xt=T[se];Ko(xt,l[se],{data:xe,origin:Ee,animateCfg:vt,coordinate:rt}),l[se]=xt}else{if(B.container.destroyed)return;B.container.add(Y);var Bt=(0,E.U2)(Y.get("animateCfg"),s?"enter":"appear");Bt&&vn(Y,Bt,{toAttrs:(0,M.pi)({},Y.attr()),coordinate:Y.get("coordinate")})}delete T[se]}}),(0,E.S6)(T,function(Y){var se=(0,E.U2)(Y.get("animateCfg"),"leave");se?vn(Y,se,{toAttrs:null,coordinate:Y.get("coordinate")}):Y.remove(!0)}),this.shapesMap=l,f.destroy(),[2]}})})},i.prototype.clear=function(){this.container.clear(),this.shapesMap={}},i.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},i.prototype.renderLabel=function(n,t){var s=n.id,l=n.elementId,f=n.data,d=n.mappingData,m=n.coordinate,x=n.animate,T=n.content,P=n.capture,D={id:s,elementId:l,capture:P,data:f,origin:(0,M.pi)((0,M.pi)({},d),{data:d[ye]}),coordinate:m},B=t.addGroup((0,M.pi)({name:"label",animateCfg:this.animate===!1||x===null||x===!1?!1:(0,E.b$)({},this.animate,x)},D)),U;if(T.isGroup&&T.isGroup()||T.isShape&&T.isShape()){var Y=T.getCanvasBBox(),se=Y.width,xe=Y.height,Ee=(0,E.U2)(n,"textAlign","left"),rt=n.x,vt=n.y-xe/2;Ee==="center"?rt=rt-se/2:(Ee==="right"||Ee==="end")&&(rt=rt-se),Zu(T,rt,vt),U=T,B.add(T)}else{var xt=(0,E.U2)(n,["style","fill"]);U=B.addShape("text",(0,M.pi)({attrs:(0,M.pi)((0,M.pi)({x:n.x,y:n.y,textAlign:n.textAlign,textBaseline:(0,E.U2)(n,"textBaseline","middle"),text:n.content},n.style),{fill:(0,E.Ft)(xt)?n.color:xt})},D))}return n.rotate&&gl(U,n.rotate),B},i.prototype.doLayout=function(n,t,s){return(0,M.mG)(this,void 0,void 0,function(){var l,f=this;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return this.layout?(l=(0,E.kJ)(this.layout)?this.layout:[this.layout],[4,Promise.all(l.map(function(m){var x=eo((0,E.U2)(m,"type",""));if(x){var T=[],P=[];return(0,E.S6)(s,function(D,B){T.push(D),P.push(t[D.get("elementId")])}),x(n,T,P,f.region,m.cfg)}}))]):[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})},i.prototype.renderLabelLine=function(n,t){(0,E.S6)(n,function(s){var l=(0,E.U2)(s,"coordinate");if(!(!s||!l)){var f=l.getCenter(),d=l.getRadius();if(s.labelLine){var m=(0,E.U2)(s,"labelLine",{}),x=s.id,T=m.path;if(!T){var P=fs(f.x,f.y,d,s.angle);T=[["M",P.x,P.y],["L",s.x,s.y]]}var D=t[x];D.destroyed||D.addShape("path",{capture:!1,attrs:(0,M.pi)({path:T,stroke:s.color?s.color:(0,E.U2)(s,["style","fill"],"#000"),fill:null},m.style),id:x,origin:s.mappingData,data:s.data,coordinate:s.coordinate})}}})},i.prototype.renderLabelBackground=function(n,t){(0,E.S6)(n,function(s){var l=(0,E.U2)(s,"coordinate"),f=(0,E.U2)(s,"background");if(!(!f||!l)){var d=s.id,m=t[d];if(!m.destroyed){var x=m.getChildren()[0];if(x){var T=Ro(m,s,f.padding),P=T.rotation,D=(0,M._T)(T,["rotation"]),B=m.addShape("rect",{attrs:(0,M.pi)((0,M.pi)({},D),f.style||{}),id:d,origin:s.mappingData,data:s.data,coordinate:s.coordinate});if(B.setZIndex(-1),P){var U=x.getMatrix();B.setMatrix(U)}}}}})},i.prototype.createOffscreenGroup=function(){var n=this.container,t=n.getGroupBase(),s=new t({});return s},i.prototype.adjustLabel=function(n,t){(0,E.S6)(n,function(s){if(s){var l=s.id,f=t[l];if(!f.destroyed){var d=f.findAll(function(m){return m.get("type")!=="path"});(0,E.S6)(d,function(m){m&&(s.offsetX&&m.attr("x",m.attr("x")+s.offsetX),s.offsetY&&m.attr("y",m.attr("y")+s.offsetY))})}}})},i}(),Is=Il;function uu(i){var n=0;return(0,E.S6)(i,function(t){n+=t}),n/i.length}var ml=function(){function i(n){this.geometry=n}return i.prototype.getLabelItems=function(n){var t=this,s=[],l=this.getLabelCfgs(n);return(0,E.S6)(n,function(f,d){var m=l[d];if(!m||(0,E.UM)(f.x)||(0,E.UM)(f.y)){s.push(null);return}var x=(0,E.kJ)(m.content)?m.content:[m.content];m.content=x;var T=x.length;(0,E.S6)(x,function(P,D){if((0,E.UM)(P)||P===""){s.push(null);return}var B=(0,M.pi)((0,M.pi)({},m),t.getLabelPoint(m,f,D));B.textAlign||(B.textAlign=t.getLabelAlign(B,D,T)),B.offset<=0&&(B.labelLine=null),s.push(B)})}),s},i.prototype.render=function(n,t){return t===void 0&&(t=!1),(0,M.mG)(this,void 0,void 0,function(){var s,l,f;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return s=this.getLabelItems(n),l=this.getLabelsRenderer(),f=this.getGeometryShapes(),[4,l.render(s,f,t)];case 1:return d.sent(),[2]}})})},i.prototype.clear=function(){var n=this.labelsRenderer;n&&n.clear()},i.prototype.destroy=function(){var n=this.labelsRenderer;n&&n.destroy(),this.labelsRenderer=null},i.prototype.getCoordinate=function(){return this.geometry.coordinate},i.prototype.getDefaultLabelCfg=function(n,t){var s=this.geometry,l=s.type,f=s.theme;return l==="polygon"||l==="interval"&&t==="middle"||n<0&&!["line","point","path"].includes(l)?(0,E.U2)(f,"innerLabels",{}):(0,E.U2)(f,"labels",{})},i.prototype.getThemedLabelCfg=function(n){var t=this.geometry,s=this.getDefaultLabelCfg(),l=t.type,f=t.theme,d;return l==="polygon"||n.offset<0&&!["line","point","path"].includes(l)?d=(0,E.b$)({},s,f.innerLabels,n):d=(0,E.b$)({},s,f.labels,n),d},i.prototype.setLabelPosition=function(n,t,s,l){},i.prototype.getLabelOffset=function(n){var t=this.getCoordinate(),s=this.getOffsetVector(n);return t.isTransposed?s[0]:s[1]},i.prototype.getLabelOffsetPoint=function(n,t,s){var l=n.offset,f=this.getCoordinate(),d=f.isTransposed,m=d?"x":"y",x=d?1:-1,T={x:0,y:0};return t>0||s===1?T[m]=l*x:T[m]=l*x*-1,T},i.prototype.getLabelPoint=function(n,t,s){var l=this.getCoordinate(),f=n.content.length;function d(xe,Ee,rt){rt===void 0&&(rt=!1);var vt=xe;return(0,E.kJ)(vt)&&(n.content.length===1?rt?vt=uu(vt):vt.length<=2?vt=vt[xe.length-1]:vt=uu(vt):vt=vt[Ee]),vt}var m={content:n.content[s],x:0,y:0,start:{x:0,y:0},color:"#fff"},x=(0,E.kJ)(t.shape)?t.shape[0]:t.shape,T=x==="funnel"||x==="pyramid";if(this.geometry.type==="polygon"){var P=xf(t.x,t.y);m.x=P[0],m.y=P[1]}else this.geometry.type==="interval"&&!T?(m.x=d(t.x,s,!0),m.y=d(t.y,s)):(m.x=d(t.x,s),m.y=d(t.y,s));if(T){var D=(0,E.U2)(t,"nextPoints"),B=(0,E.U2)(t,"points");if(D){var U=l.convert(B[1]),Y=l.convert(D[1]);m.x=(U.x+Y.x)/2,m.y=(U.y+Y.y)/2}else if(x==="pyramid"){var U=l.convert(B[1]),Y=l.convert(B[2]);m.x=(U.x+Y.x)/2,m.y=(U.y+Y.y)/2}}n.position&&this.setLabelPosition(m,t,s,n.position);var se=this.getLabelOffsetPoint(n,s,f);return m.start={x:m.x,y:m.y},m.x+=se.x,m.y+=se.y,m.color=t.color,m},i.prototype.getLabelAlign=function(n,t,s){var l="center",f=this.getCoordinate();if(f.isTransposed){var d=n.offset;d<0?l="right":d===0?l="center":l="left",s>1&&t===0&&(l==="right"?l="left":l==="left"&&(l="right"))}return l},i.prototype.getLabelId=function(n){var t=this.geometry,s=t.type,l=t.getXScale(),f=t.getYScale(),d=n[ye],m=t.getElementId(n);return s==="line"||s==="area"?m+=" ".concat(d[l.field]):s==="path"&&(m+=" ".concat(d[l.field],"-").concat(d[f.field])),m},i.prototype.getLabelsRenderer=function(){var n=this.geometry,t=n.labelsContainer,s=n.labelOption,l=n.canvasRegion,f=n.animateOption,d=this.geometry.coordinate,m=this.labelsRenderer;return m||(m=new Is({container:t,layout:(0,E.U2)(s,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=m),m.region=l,m.animate=f?on("label",d):!1,m},i.prototype.getLabelCfgs=function(n){var t=this,s=this.geometry,l=s.labelOption,f=s.scales,d=s.coordinate,m=l,x=m.fields,T=m.callback,P=m.cfg,D=x.map(function(U){return f[U]}),B=[];return(0,E.S6)(n,function(U,Y){var se=U[ye],xe=t.getLabelText(se,D),Ee;if(T){var rt=x.map(function(Or){return se[Or]});if(Ee=T.apply(void 0,(0,M.ev)([],(0,M.CR)(rt),!1)),(0,E.UM)(Ee)){B.push(null);return}}var vt=(0,M.pi)((0,M.pi)({id:t.getLabelId(U),elementId:t.geometry.getElementId(U),data:se,mappingData:U,coordinate:d},P),Ee);(0,E.mf)(vt.position)&&(vt.position=vt.position(se,U,Y));var xt=t.getLabelOffset(vt.offset||0),Bt=t.getDefaultLabelCfg(xt,vt.position);vt=(0,E.b$)({},Bt,vt),vt.offset=t.getLabelOffset(vt.offset||0);var _r=vt.content;(0,E.mf)(_r)?vt.content=_r(se,U,Y):(0,E.o8)(_r)&&(vt.content=xe[0]),B.push(vt)}),B},i.prototype.getLabelText=function(n,t){var s=[];return(0,E.S6)(t,function(l){var f=n[l.field];(0,E.kJ)(f)?f=f.map(function(d){return l.getText(d)}):f=l.getText(f),(0,E.UM)(f)||f===""?s.push(null):s.push(f)}),s},i.prototype.getOffsetVector=function(n){n===void 0&&(n=0);var t=this.getCoordinate(),s=0;return(0,E.hj)(n)&&(s=n),t.isTransposed?t.applyMatrix(s,0):t.applyMatrix(0,s)},i.prototype.getGeometryShapes=function(){var n=this.geometry,t={};return(0,E.S6)(n.elementsMap,function(s,l){t[l]=s.shape}),(0,E.S6)(n.getOffscreenGroup().getChildren(),function(s){var l=n.getElementId(s.get("origin").mappingData);t[l]=s}),t},i}(),Ao=ml;function jf(i,n,t){if(!i)return t;var s;if(i.callback&&i.callback.length>1){var l=Array(i.callback.length-1).fill("");s=i.mapping.apply(i,(0,M.ev)([n],(0,M.CR)(l),!1)).join("")}else s=i.mapping(n).join("");return s||t}var yl={hexagon:function(i,n,t){var s=t/2*Math.sqrt(3);return[["M",i,n-t],["L",i+s,n-t/2],["L",i+s,n+t/2],["L",i,n+t],["L",i-s,n+t/2],["L",i-s,n-t/2],["Z"]]},bowtie:function(i,n,t){var s=t-1.5;return[["M",i-t,n-s],["L",i+t,n+s],["L",i+t,n-s],["L",i-t,n+s],["Z"]]},cross:function(i,n,t){return[["M",i-t,n-t],["L",i+t,n+t],["M",i+t,n-t],["L",i-t,n+t]]},tick:function(i,n,t){return[["M",i-t/2,n-t],["L",i+t/2,n-t],["M",i,n-t],["L",i,n+t],["M",i-t/2,n+t],["L",i+t/2,n+t]]},plus:function(i,n,t){return[["M",i-t,n],["L",i+t,n],["M",i,n-t],["L",i,n+t]]},hyphen:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},line:function(i,n,t){return[["M",i,n-t],["L",i,n+t]]}},tp=["line","cross","tick","plus","hyphen"];function na(i,n){return(0,E.mf)(n)?n(i):(0,E.b$)({},i,n)}function Fa(i,n){var t=i.symbol;if((0,E.HD)(t)&&tp.indexOf(t)!==-1){var s=(0,E.U2)(i,"style",{}),l=(0,E.U2)(s,"lineWidth",1),f=s.stroke||s.fill||n;i.style=(0,E.b$)({},i.style,{lineWidth:l,stroke:f,fill:null})}}function nf(i){var n=i.symbol;(0,E.HD)(n)&&yl[n]&&(i.symbol=yl[n])}function Qd(i){return i.startsWith(be.LEFT)||i.startsWith(be.RIGHT)?"vertical":"horizontal"}function zp(i,n,t,s,l){var f=t.getScale(t.type);if(f.isCategory){var d=f.field,m=n.getAttribute("color"),x=n.getAttribute("shape"),T=i.getTheme().defaultColor,P=n.coordinate.isPolar;return f.getTicks().map(function(D,B){var U,Y=D.text,se=D.value,xe=Y,Ee=f.invert(se),rt=i.filterFieldData(d,[(U={},U[d]=Ee,U)]).length===0;(0,E.S6)(i.views,function(Or){var Wr;Or.filterFieldData(d,[(Wr={},Wr[d]=Ee,Wr)]).length||(rt=!0)});var vt=jf(m,Ee,T),xt=jf(x,Ee,"point"),Bt=n.getShapeMarker(xt,{color:vt,isInPolar:P}),_r=l;return(0,E.mf)(_r)&&(_r=_r(xe,B,(0,M.pi)({name:xe,value:Ee},(0,E.b$)({},s,Bt)))),Bt=(0,E.b$)({},s,Bt,Rl((0,M.pi)({},_r),["style"])),Fa(Bt,vt),_r&&_r.style&&(Bt.style=na(Bt.style,_r.style)),nf(Bt),{id:Ee,name:xe,value:Ee,marker:Bt,unchecked:rt}})}return[]}function Tg(i,n,t){return t.map(function(s,l){var f=n;(0,E.mf)(f)&&(f=f(s.name,l,(0,E.b$)({},i,s)));var d=(0,E.mf)(s.marker)?s.marker(s.name,l,(0,E.b$)({},i,s)):s.marker,m=(0,E.b$)({},i,f,d);return nf(m),s.marker=m,s})}function Up(i,n){var t=(0,E.U2)(i,["components","legend"],{});return(0,E.b$)({},(0,E.U2)(t,["common"],{}),(0,E.b$)({},(0,E.U2)(t,[n],{})))}function Jd(i){return i?!1:i==null||isNaN(i)}function bm(i){if((0,E.kJ)(i))return Jd(i[1].y);var n=i.y;return(0,E.kJ)(n)?Jd(n[0]):Jd(n)}function md(i,n,t){if(n===void 0&&(n=!1),t===void 0&&(t=!0),!i.length||i.length===1&&!t)return[];if(n){for(var s=[],l=0,f=i.length;l<f;l++){var d=i[l];bm(d)||s.push(d)}return[s]}for(var m=[],x=[],l=0,f=i.length;l<f;l++){var d=i[l];bm(d)?x.length&&(x.length===1&&!t||m.push(x),x=[]):x.push(d)}return x.length&&m.push(x),m}function Ag(i){for(var n=[],t=0;t<i.length;t++){var s=i[t];if(s){var l=t===0?"M":"L";n.push([l,s.x,s.y])}}var f=i[0];return f&&(n.push(["L",f.x,f.y]),n.push(["z"])),n}function Sm(i){for(var n=i.length/2,t=[],s=[],l=0;l<i.length;l++)l<n?t.push(i[l]):s.push(i[l]);var f=ra(t,!1),d=ra(s,!1);s.length&&f.push(["L",s[0].x,s[0].y]),d.shift();var m=f.concat(d);return t.length&&m.push(["L",t[0].x,t[0].y]),m.push(["z"]),m}function bu(i,n,t,s){s===void 0&&(s="");var l=i.style,f=l===void 0?{}:l,d=i.defaultStyle,m=i.color,x=i.size,T=(0,M.pi)((0,M.pi)({},d),f);return m&&(n&&(f.stroke||(T.stroke=m)),t&&(f.fill||(T.fill=m))),s&&(0,E.UM)(f[s])&&!(0,E.UM)(x)&&(T[s]=x),T}function Zp(i){return(0,E.b$)({},{fill:"#CCD6EC",fillOpacity:.3},(0,E.U2)(i,["background","style"]))}function Gv(i){var n=i.x,t=(0,E.kJ)(i.y)?i.y:[i.y];return t.map(function(s,l){return{x:(0,E.kJ)(n)?n[l]:n,y:s}})}var Mg={line:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},dot:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},dash:function(i,n,t){return[["M",i-t,n],["L",i+t,n]]},smooth:function(i,n,t){return[["M",i-t,n],["A",t/2,t/2,0,1,1,i,n],["A",t/2,t/2,0,1,0,i+t,n]]},hv:function(i,n,t){return[["M",i-t-1,n-2.5],["L",i,n-2.5],["L",i,n+2.5],["L",i+t+1,n+2.5]]},vh:function(i,n,t){return[["M",i-t-1,n+2.5],["L",i,n+2.5],["L",i,n-2.5],["L",i+t+1,n-2.5]]},hvh:function(i,n,t){return[["M",i-(t+1),n+2.5],["L",i-t/2,n+2.5],["L",i-t/2,n-2.5],["L",i+t/2,n-2.5],["L",i+t/2,n+2.5],["L",i+t+1,n+2.5]]},vhv:function(i,n){return[["M",i-5,n+2.5],["L",i-5,n],["L",i,n],["L",i,n-3],["L",i,n+3],["L",i+6.5,n+3]]}};function Vp(i,n){var t=i.color;return{symbol:Mg[n],style:{lineWidth:2,r:6,stroke:t}}}function Rg(i,n,t){for(var s=i.isStack,l=i.connectNulls,f=i.isInCircle,d=i.showSinglePoint,m=bu(i,!0,!1,"lineWidth"),x=md(i.points,l,d),T=[],P=0,D=x.length;P<D;P++){var B=x[P];T=T.concat(Pg(B,f,s,n,t,m))}return m.path=T,m}function Ig(i,n,t,s,l){if(i.length===1)return[["M",i[0].x,i[0].y-l.lineWidth/2],["L",i[0].x,i[0].y],["L",i[0].x,i[0].y+l.lineWidth/2]];var f;return t?(n&&i.length&&i.push({x:i[0].x,y:i[0].y}),f=ra(i,!1,s)):(f=Dn(i,!1),n&&f.push(["Z"])),f}function L0(i,n,t,s,l,f){var d=[],m=[];(0,E.S6)(i,function(P){var D=Gv(P);d.push(D[1]),m.push(D[0])});var x=Ig(d,n,s,l,f),T=Ig(m,n,s,l,f);return t?x:x.concat(T)}function Pg(i,n,t,s,l,f){if(i.length){var d=i[0];return(0,E.kJ)(d.y)?L0(i,n,t,s,l,f):Ig(i,n,s,l,f)}return[]}var F0=to("line",{defaultShapeType:"line"});(0,E.S6)(["line","dot","dash","smooth"],function(i){mi("line",i,{draw:function(n,t){var s=i==="smooth",l;if(s){var f=this.coordinate,d=f.start,m=f.end;l=[[d.x,m.y],[m.x,d.y]]}var x=Rg(n,s,l),T=t.addShape({type:"path",attrs:x,name:"line",capture:!s});return T},getMarker:function(n){return Vp(n,i)}})});var o_=null,B0="4.2.10",Ql={getLegendItems:zp,translate:Zu,rotate:gl,zoom:qu,transform:_u,getAngle:dd,getSectorPath:yh,polarToCartesian:fs,getDelegationObject:Vo,getTooltipItems:Js,getMappingValue:jf,getPath:Pg,getPathPoints:md},Eh={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},rs={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Dc=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],N0=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Wf=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Em=function(i){i===void 0&&(i={});var n=i.paletteQualitative10,t=n===void 0?Dc:n,s=i.paletteQualitative20,l=s===void 0?N0:s,f=i.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"#141414",brandColor:d,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:Wf,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:rs[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:rs[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Eh[85],axisTickLineBorderColor:rs[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:rs[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:rs[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:rs[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:rs[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Dc[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:rs[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:rs[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:rs[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:rs[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:rs[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:rs[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Eh[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Eh[25],annotationArcBorderColor:rs[15],annotationArcBorder:1,annotationLineBorderColor:rs[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:rs[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:rs[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:rs[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:rs[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:rs[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Eh[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:rs[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Eh[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:rs[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Dc[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Eh[100],pointBorderOpacity:1,pointActiveBorderColor:rs[100],pointSelectedBorder:2,pointSelectedBorderColor:rs[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Dc[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Eh[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:rs[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:rs[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Dc[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Dc[0],areaFillOpacity:.25,areaActiveFillColor:Dc[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Dc[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Dc[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:rs[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:rs[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Dc[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:rs[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:rs[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Dc[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Eh[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:rs[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:rs[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,M.pi)((0,M.pi)({},m),i)},$v=Em();function wm(){return window?window.devicePixelRatio:1}function Xv(i,n,t,s){var l=i-t,f=n-s;return Math.sqrt(l*l+f*f)}function yd(i,n,t,s,l,f){return l>=i&&l<=i+t&&f>=n&&f<=n+s}function Og(i,n){return!(n.minX>i.maxX||n.maxX<i.minX||n.minY>i.maxY||n.maxY<i.minY)}function s_(i,n){return!i||!n?i||n:{minX:Math.min(i.minX,n.minX),minY:Math.min(i.minY,n.minY),maxX:Math.max(i.maxX,n.maxX),maxY:Math.max(i.maxY,n.maxY)}}function u_(i,n){return i[0]===n[0]&&i[1]===n[1]}var l_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zE=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Cm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Su=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function wh(i,n){var t=i.match(Su);(0,E.S6)(t,function(s){var l=s.split(":");n.addColorStop(l[0],l[1])})}function z0(i,n,t){var s=l_.exec(t),l=parseFloat(s[1])%360*(Math.PI/180),f=s[2],d=n.getBBox(),m,x;l>=0&&l<1/2*Math.PI?(m={x:d.minX,y:d.minY},x={x:d.maxX,y:d.maxY}):1/2*Math.PI<=l&&l<Math.PI?(m={x:d.maxX,y:d.minY},x={x:d.minX,y:d.maxY}):Math.PI<=l&&l<3/2*Math.PI?(m={x:d.maxX,y:d.maxY},x={x:d.minX,y:d.minY}):(m={x:d.minX,y:d.maxY},x={x:d.maxX,y:d.minY});var T=Math.tan(l),P=T*T,D=(x.x-m.x+T*(x.y-m.y))/(P+1)+m.x,B=T*(x.x-m.x+T*(x.y-m.y))/(P+1)+m.y,U=i.createLinearGradient(m.x,m.y,D,B);return wh(f,U),U}function _d(i,n,t){var s=zE.exec(t),l=parseFloat(s[1]),f=parseFloat(s[2]),d=parseFloat(s[3]),m=s[4];if(d===0){var x=m.match(Su);return x[x.length-1].split(":")[1]}var T=n.getBBox(),P=T.maxX-T.minX,D=T.maxY-T.minY,B=Math.sqrt(P*P+D*D)/2,U=i.createRadialGradient(T.minX+P*l,T.minY+D*f,0,T.minX+P/2,T.minY+D/2,d*B);return wh(m,U),U}function Tm(i,n,t){if(n.get("patternSource")&&n.get("patternSource")===t)return n.get("pattern");var s,l,f=Cm.exec(t),d=f[1],m=f[2];function x(){s=i.createPattern(l,d),n.set("pattern",s),n.set("patternSource",t)}switch(d){case"a":d="repeat";break;case"x":d="repeat-x";break;case"y":d="repeat-y";break;case"n":d="no-repeat";break;default:d="no-repeat"}return l=new Image,m.match(/^data:/i)||(l.crossOrigin="Anonymous"),l.src=m,l.complete?x():(l.onload=x,l.src=l.src),s}function U0(i,n,t){var s=n.getBBox();if(isNaN(s.x)||isNaN(s.y)||isNaN(s.width)||isNaN(s.height))return t;if((0,E.HD)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return z0(i,n,t);if(t[0]==="r")return _d(i,n,t);if(t[0]==="p")return Tm(i,n,t)}return t}if(t instanceof CanvasPattern)return t}function Lc(i){var n=0,t=0,s=0,l=0;return(0,E.kJ)(i)?i.length===1?n=t=s=l=i[0]:i.length===2?(n=s=i[0],t=l=i[1]):i.length===3?(n=i[0],t=l=i[1],s=i[2]):(n=i[0],t=i[1],s=i[2],l=i[3]):n=t=s=l=i,[n,t,s,l]}function Pl(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function ev(i,n){return Pl(i)*Pl(n)?(i[0]*n[0]+i[1]*n[1])/(Pl(i)*Pl(n)):1}function tv(i,n){return(i[0]*n[1]<i[1]*n[0]?-1:1)*Math.acos(ev(i,n))}function xd(i,n){var t=n[1],s=n[2],l=(0,E.wQ)((0,E.c$)(n[3]),Math.PI*2),f=n[4],d=n[5],m=i[0],x=i[1],T=n[6],P=n[7],D=Math.cos(l)*(m-T)/2+Math.sin(l)*(x-P)/2,B=-1*Math.sin(l)*(m-T)/2+Math.cos(l)*(x-P)/2,U=D*D/(t*t)+B*B/(s*s);U>1&&(t*=Math.sqrt(U),s*=Math.sqrt(U));var Y=t*t*(B*B)+s*s*(D*D),se=Y?Math.sqrt((t*t*(s*s)-Y)/Y):1;f===d&&(se*=-1),isNaN(se)&&(se=0);var xe=s?se*t*B/s:0,Ee=t?se*-s*D/t:0,rt=(m+T)/2+Math.cos(l)*xe-Math.sin(l)*Ee,vt=(x+P)/2+Math.sin(l)*xe+Math.cos(l)*Ee,xt=[(D-xe)/t,(B-Ee)/s],Bt=[(-1*D-xe)/t,(-1*B-Ee)/s],_r=tv([1,0],xt),Or=tv(xt,Bt);return ev(xt,Bt)<=-1&&(Or=Math.PI),ev(xt,Bt)>=1&&(Or=0),d===0&&Or>0&&(Or=Or-2*Math.PI),d===1&&Or<0&&(Or=Or+2*Math.PI),{cx:rt,cy:vt,rx:u_(i,[T,P])?0:t,ry:u_(i,[T,P])?0:s,startAngle:_r,endAngle:_r+Or,xRotation:l,arcFlag:f,sweepFlag:d}}var Hp=Math.sin,rv=Math.cos,Am=Math.atan2,bd=Math.PI;function Mm(i,n,t,s,l,f,d){var m=n.stroke,x=n.lineWidth,T=t-l,P=s-f,D=Am(P,T),B=new Sx({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*rv(bd/6)+","+10*Hp(bd/6)+" L0,0 L"+10*rv(bd/6)+",-"+10*Hp(bd/6),stroke:m,lineWidth:x}});B.translate(l,f),B.rotateAtPoint(l,f,D),i.set(d?"startArrowShape":"endArrowShape",B)}function Rm(i,n,t,s,l,f,d){var m=n.startArrow,x=n.endArrow,T=n.stroke,P=n.lineWidth,D=d?m:x,B=D.d,U=D.fill,Y=D.stroke,se=D.lineWidth,xe=(0,M._T)(D,["d","fill","stroke","lineWidth"]),Ee=t-l,rt=s-f,vt=Am(rt,Ee);B&&(l=l-rv(vt)*B,f=f-Hp(vt)*B);var xt=new Sx({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,M.pi)((0,M.pi)({},xe),{stroke:Y||T,lineWidth:se||P,fill:U})});xt.translate(l,f),xt.rotateAtPoint(l,f,vt),i.set(d?"startArrowShape":"endArrowShape",xt)}function Sd(i,n,t,s,l){var f=Am(s-n,t-i);return{dx:rv(f)*l,dy:Hp(f)*l}}function Im(i,n,t,s,l,f){typeof n.startArrow=="object"?Rm(i,n,t,s,l,f,!0):n.startArrow?Mm(i,n,t,s,l,f,!0):i.set("startArrowShape",null)}function Pm(i,n,t,s,l,f){typeof n.endArrow=="object"?Rm(i,n,t,s,l,f,!1):n.endArrow?Mm(i,n,t,s,l,f,!1):i.set("startArrowShape",null)}var Fc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function bf(i,n){var t=n.attr();for(var s in t){var l=t[s],f=Fc[s]?Fc[s]:s;f==="matrix"&&l?i.transform(l[0],l[1],l[3],l[4],l[6],l[7]):f==="lineDash"&&i.setLineDash?(0,E.kJ)(l)&&i.setLineDash(l):(f==="strokeStyle"||f==="fillStyle"?l=U0(i,n,l):f==="globalAlpha"&&(l=l*i.globalAlpha),i[f]=l)}}function jl(i,n,t){for(var s=0;s<n.length;s++){var l=n[s];l.cfg.visible?l.draw(i,t):l.skipDraw()}}function Ch(i,n,t){var s=i.get("refreshElements");(0,E.S6)(s,function(l){if(l!==i)for(var f=l.cfg.parent;f&&f!==i&&!f.cfg.refresh;)f.cfg.refresh=!0,f=f.cfg.parent}),s[0]===i?Th(n,t):Om(n,t)}function Om(i,n){for(var t=0;t<i.length;t++){var s=i[t];if(s.cfg.visible)if(s.cfg.hasChanged)s.cfg.refresh=!0,s.isGroup()&&Th(s.cfg.children,n);else if(s.cfg.refresh)s.isGroup()&&Om(s.cfg.children,n);else{var l=nv(s,n);s.cfg.refresh=l,l&&s.isGroup()&&Om(s.cfg.children,n)}}}function km(i){for(var n=0;n<i.length;n++){var t=i[n];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&km(t.cfg.children)}}function Th(i,n){for(var t=0;t<i.length;t++){var s=i[t];s.cfg.visible&&(s.cfg.refresh=!0,s.isGroup()&&Th(s.get("children"),n))}}function nv(i,n){var t=i.cfg.cacheCanvasBBox,s=i.cfg.isInView&&t&&Og(t,n);return s}function iv(i,n,t,s){var l=t.path,f=t.startArrow,d=t.endArrow;if(l){var m=[0,0],x=[0,0],T={dx:0,dy:0};n.beginPath();for(var P=0;P<l.length;P++){var D=l[P],B=D[0];if(P===0&&f&&f.d){var U=i.getStartTangent();T=Sd(U[0][0],U[0][1],U[1][0],U[1][1],f.d)}else if(P===l.length-2&&l[P+1][0]==="Z"&&d&&d.d){var Y=l[P+1];if(Y[0]==="Z"){var U=i.getEndTangent();T=Sd(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}}else if(P===l.length-1&&d&&d.d&&l[0]!=="Z"){var U=i.getEndTangent();T=Sd(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}var se=T.dx,xe=T.dy;switch(B){case"M":n.moveTo(D[1]-se,D[2]-xe),x=[D[1],D[2]];break;case"L":n.lineTo(D[1]-se,D[2]-xe);break;case"Q":n.quadraticCurveTo(D[1],D[2],D[3]-se,D[4]-xe);break;case"C":n.bezierCurveTo(D[1],D[2],D[3],D[4],D[5]-se,D[6]-xe);break;case"A":{var Ee=void 0;s?(Ee=s[P],Ee||(Ee=xd(m,D),s[P]=Ee)):Ee=xd(m,D);var rt=Ee.cx,vt=Ee.cy,xt=Ee.rx,Bt=Ee.ry,_r=Ee.startAngle,Or=Ee.endAngle,Wr=Ee.xRotation,gn=Ee.sweepFlag;if(n.ellipse)n.ellipse(rt,vt,xt,Bt,Wr,_r,Or,1-gn);else{var $r=xt>Bt?xt:Bt,zn=xt>Bt?1:xt/Bt,li=xt>Bt?Bt/xt:1;n.translate(rt,vt),n.rotate(Wr),n.scale(zn,li),n.arc(0,0,$r,_r,Or,1-gn),n.scale(1/zn,1/li),n.rotate(-Wr),n.translate(-rt,-vt)}break}case"Z":n.closePath();break;default:break}if(B==="Z")m=x;else{var zi=D.length;m=[D[zi-2],D[zi-1]]}}}}function av(i,n){var t=i.get("canvas");t&&(n==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,n,t),t.get("autoDraw")&&t.draw())))}function Yv(i){var n;if(i.destroyed)n=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),s=t&&!!(t.width&&t.height),l=i.getCanvasBBox(),f=l&&!!(l.width&&l.height);s&&f?n=s_(t,l):s?n=t:f&&(n=l)}return n}function c_(i){if(!i.length)return null;var n=[],t=[],s=[],l=[];return(0,E.S6)(i,function(f){var d=Yv(f);d&&(n.push(d.minX),t.push(d.minY),s.push(d.maxX),l.push(d.maxY))}),{minX:(0,E.VV)(n),minY:(0,E.VV)(t),maxX:(0,E.Fp)(s),maxY:(0,E.Fp)(l)}}function f_(i,n){return!i||!n||!Og(i,n)?null:{minX:Math.max(i.minX,n.minX),minY:Math.max(i.minY,n.minY),maxX:Math.min(i.maxX,n.maxX),maxY:Math.min(i.maxY,n.maxY)}}var h_=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.onCanvasChange=function(t){av(this,t)},n.prototype.getShapeBase=function(){return te},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(t,s){s&&(t.save(),bf(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},n.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,s=[],l=[];(0,E.S6)(t,function(B){var U=B.cfg.cacheCanvasBBox;U&&B.cfg.isInView&&(s.push(U.minX,U.maxX),l.push(U.minY,U.maxY))});var f=null;if(s.length){var d=(0,E.VV)(s),m=(0,E.Fp)(s),x=(0,E.VV)(l),T=(0,E.Fp)(l);f={minX:d,minY:x,x:d,y:x,maxX:m,maxY:T,width:m-d,height:T-x};var P=this.cfg.canvas;if(P){var D=P.getViewRange();this.set("isInView",Og(f,D))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",f)},n.prototype.draw=function(t,s){var l=this.cfg.children,f=s?this.cfg.refresh:!0;l.length&&f&&(t.save(),bf(t,this),this._applyClip(t,this.getClip()),jl(t,l,s),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(Ge.AbstractGroup),Dm=h_,Rt=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.getShapeBase=function(){return te},n.prototype.getGroupBase=function(){return Dm},n.prototype.onCanvasChange=function(t){av(this,t)},n.prototype.calculateBBox=function(){var t=this.get("type"),s=this.getHitLineWidth(),l=(0,Ge.getBBoxMethod)(t),f=l(this),d=s/2,m=f.x-d,x=f.y-d,T=f.x+f.width+d,P=f.y+f.height+d;return{x:m,minX:m,y:x,minY:x,width:f.width+s,height:f.height+s,maxX:T,maxY:P}},n.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},n.prototype.isStroke=function(){return!!this.attrs.stroke},n.prototype._applyClip=function(t,s){s&&(t.save(),bf(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},n.prototype.draw=function(t,s){var l=this.cfg.clipShape;if(s){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var f=this.getCanvasBBox();if(!Og(s,f)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),bf(t,this),this._applyClip(t,l),this.drawPath(t),t.restore(),this._afterDraw()},n.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},n.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var s=this.getCanvasBBox(),l=Og(s,t);this.set("isInView",l),l?this.set("cacheCanvasBBox",s):this.set("cacheCanvasBBox",null)}},n.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},n.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},n.prototype.fill=function(t){t.fill()},n.prototype.stroke=function(t){t.stroke()},n.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isFill()&&(!(0,E.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.isStroke()&&l>0&&(!(0,E.UM)(d)&&d!==1&&(t.globalAlpha=d),this.stroke(t)),this.afterDrawPath(t)},n.prototype.createPath=function(t){},n.prototype.afterDrawPath=function(t){},n.prototype.isInShape=function(t,s){var l=this.isStroke(),f=this.isFill(),d=this.getHitLineWidth();return this.isInStrokeOrPath(t,s,l,f,d)},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){return!1},n.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},n}(Ge.AbstractShape),vc=Rt,rp=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,r:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,T=m.y,P=m.r,D=d/2,B=Xv(x,T,t,s);return f&&l?B<=P+D:f?B<=P:l?B>=P-D&&B<=P+D:!1},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.r;t.beginPath(),t.arc(l,f,d,0,Math.PI*2,!1),t.closePath()},n}(vc),Z0=rp;function ov(i,n,t,s){return i/(t*t)+n/(s*s)}var Lm=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=d/2,T=m.x,P=m.y,D=m.rx,B=m.ry,U=(t-T)*(t-T),Y=(s-P)*(s-P);return f&&l?ov(U,Y,D+x,B+x)<=1:f?ov(U,Y,D,B)<=1:l?ov(U,Y,D-x,B-x)>=1&&ov(U,Y,D+x,B+x)<=1:!1},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.rx,m=s.ry;if(t.beginPath(),t.ellipse)t.ellipse(l,f,d,m,0,0,Math.PI*2,!1);else{var x=d>m?d:m,T=d>m?1:d/m,P=d>m?m/d:1;t.save(),t.translate(l,f),t.scale(T,P),t.arc(0,0,x,0,Math.PI*2),t.restore(),t.closePath()}},n}(vc),V0=Lm;function kg(i){return i instanceof HTMLElement&&(0,E.HD)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var H0=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0})},n.prototype.initAttrs=function(t){this._setImage(t.img)},n.prototype.isStroke=function(){return!1},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},n.prototype._setImage=function(t){var s=this,l=this.attrs;if((0,E.HD)(t)){var f=new Image;f.onload=function(){if(s.destroyed)return!1;s.attr("img",f),s.set("loading",!1),s._afterLoading();var d=s.get("callback");d&&d.call(s)},f.crossOrigin="Anonymous",f.src=t,this.set("loading",!0)}else t instanceof Image?(l.width||(l.width=t.width),l.height||(l.height=t.height)):kg(t)&&(l.width||(l.width=Number(t.getAttribute("width"))),l.height||(l.height,Number(t.getAttribute("height"))))},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),t==="img"&&this._setImage(s)},n.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.sx,T=s.sy,P=s.swidth,D=s.sheight,B=s.img;(B instanceof Image||kg(B))&&(!(0,E.UM)(x)&&!(0,E.UM)(T)&&!(0,E.UM)(P)&&!(0,E.UM)(D)?t.drawImage(B,x,T,P,D,l,f,d,m):t.drawImage(B,l,f,d,m))},n}(vc),Ed=H0,Ol=k(32793);function np(i,n,t,s,l,f,d){var m=Math.min(i,t),x=Math.max(i,t),T=Math.min(n,s),P=Math.max(n,s),D=l/2;return f>=m-D&&f<=x+D&&d>=T-D&&d<=P+D?Ol.x1.pointToLine(i,n,t,s,f,d)<=l/2:!1}var Kv=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),this.setArrow()},n.prototype.setArrow=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2,m=t.startArrow,x=t.endArrow;m&&Im(this,t,f,d,s,l),x&&Pm(this,t,s,l,f,d)},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr(),x=m.x1,T=m.y1,P=m.x2,D=m.y2;return np(x,T,P,D,d,t,s)},n.prototype.createPath=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2,x=s.startArrow,T=s.endArrow,P={dx:0,dy:0},D={dx:0,dy:0};x&&x.d&&(P=Sd(l,f,d,m,s.startArrow.d)),T&&T.d&&(D=Sd(l,f,d,m,s.endArrow.d)),t.beginPath(),t.moveTo(l+P.dx,f+P.dy),t.lineTo(d-D.dx,m-D.dy)},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Ol.x1.length(s,l,f,d)},n.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Ol.x1.pointAt(l,f,d,m,t)},n}(vc),j0=Kv,Dg={circle:function(i,n,t){return[["M",i-t,n],["A",t,t,0,1,0,i+t,n],["A",t,t,0,1,0,i-t,n]]},square:function(i,n,t){return[["M",i-t,n-t],["L",i+t,n-t],["L",i+t,n+t],["L",i-t,n+t],["Z"]]},diamond:function(i,n,t){return[["M",i-t,n],["L",i,n-t],["L",i+t,n],["L",i,n+t],["Z"]]},triangle:function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n+s],["L",i,n-s],["L",i+t,n+s],["Z"]]},"triangle-down":function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n-s],["L",i+t,n-s],["L",i,n+s],["Z"]]}},bx=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.initAttrs=function(t){this._resetParamsCache()},n.prototype._resetParamsCache=function(){this.set("paramsCache",{})},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._getR=function(t){return(0,E.UM)(t.r)?t.radius:t.r},n.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.symbol||"circle",d=this._getR(t),m,x;if((0,E.mf)(f))m=f,x=m(s,l,d),x=(0,Yh.wb)(x);else{if(m=n.Symbols[f],!m)return console.warn(f+" marker is not supported."),null;x=m(s,l,d)}return x},n.prototype.createPath=function(t){var s=this._getPath(),l=this.get("paramsCache");iv(this,t,{path:s},l)},n.Symbols=Dg,n}(vc),p_=bx;function W0(i,n,t){var s=(0,Ge.getOffScreenContext)();return i.createPath(s),s.isPointInPath(n,t)}var d_=1e-6;function Fm(i){return Math.abs(i)<d_?0:i<0?-1:1}function v_(i,n,t){return(t[0]-i[0])*(n[1]-i[1])===(n[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],n[0])<=t[0]&&t[0]<=Math.max(i[0],n[0])&&Math.min(i[1],n[1])<=t[1]&&t[1]<=Math.max(i[1],n[1])}function G0(i,n,t){var s=!1,l=i.length;if(l<=2)return!1;for(var f=0;f<l;f++){var d=i[f],m=i[(f+1)%l];if(v_(d,m,[n,t]))return!0;Fm(d[1]-t)>0!=Fm(m[1]-t)>0&&Fm(n-(t-d[1])*(d[0]-m[0])/(d[1]-m[1])-d[0])<0&&(s=!s)}return s}function jp(i,n,t,s,l,f,d,m){var x=(Math.atan2(m-n,d-i)+Math.PI*2)%(Math.PI*2);if(x<s||x>l)return!1;var T={x:i+t*Math.cos(x),y:n+t*Math.sin(x)};return Xv(T.x,T.y,d,m)<=f/2}var g_=vo.vs;function m_(i){for(var n=!1,t=i.length,s=0;s<t;s++){var l=i[s],f=l[0];if(f==="C"||f==="A"||f==="Q"){n=!0;break}}return n}function Ah(i,n,t,s,l){for(var f=!1,d=n/2,m=0;m<i.length;m++){var x=i[m],T=x.currentPoint,P=x.params,D=x.prePoint,B=x.box;if(!(B&&!yd(B.x-d,B.y-d,B.width+n,B.height+n,t,s))){switch(x.command){case"L":case"Z":f=np(D[0],D[1],T[0],T[1],n,t,s);break;case"Q":var U=Ol.lD.pointDistance(D[0],D[1],P[1],P[2],P[3],P[4],t,s);f=U<=n/2;break;case"C":var Y=Ol.Ll.pointDistance(D[0],D[1],P[1],P[2],P[3],P[4],P[5],P[6],t,s,l);f=Y<=n/2;break;case"A":var se=x.arcParams,xe=se.cx,Ee=se.cy,rt=se.rx,vt=se.ry,xt=se.startAngle,Bt=se.endAngle,_r=se.xRotation,Or=[t,s,1],Wr=rt>vt?rt:vt,gn=rt>vt?1:rt/vt,$r=rt>vt?vt/rt:1,zn=g_(null,[["t",-xe,-Ee],["r",-_r],["s",1/gn,1/$r]]);oo.transformMat3(Or,Or,zn),f=jp(0,0,Wr,xt,Bt,n,Or[0],Or[1]);break;default:break}if(f)break}}return f}function qv(i){for(var n=i.length,t=[],s=[],l=[],f=0;f<n;f++){var d=i[f],m=d[0];m==="M"?(l.length&&(s.push(l),l=[]),l.push([d[1],d[2]])):m==="Z"?l.length&&(t.push(l),l=[]):l.push([d[1],d[2]])}return l.length>0&&s.push(l),{polygons:t,polylines:s}}var Lg=(0,M.pi)({hasArc:m_,extractPolygons:qv,isPointInStroke:Ah},Ge.PathUtil);function sv(i,n,t){for(var s=!1,l=0;l<i.length;l++){var f=i[l];if(s=G0(f,n,t),s)break}return s}var y_=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),t==="path"&&this._setPathArr(s),this.setArrow()},n.prototype._setPathArr=function(t){this.attrs.path=(0,Yh.wb)(t);var s=Lg.hasArc(t);this.set("hasArc",s),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},n.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,Yh.zx)(this.attr("path")),this.set("segments",t)),t},n.prototype.setArrow=function(){var t=this.attr(),s=t.startArrow,l=t.endArrow;if(s){var f=this.getStartTangent();Im(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}if(l){var f=this.getEndTangent();Pm(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.getSegments(),x=this.get("hasArc"),T=!1;if(l){var P=this.getTotalLength();T=Lg.isPointInStroke(m,d,t,s,P)}if(!T&&f)if(x)T=W0(this,t,s);else{var D=this.attr("path"),B=Lg.extractPolygons(D);T=sv(B.polygons,t,s)||sv(B.polylines,t,s)}return T},n.prototype.createPath=function(t){var s=this.attr(),l=this.get("paramsCache");iv(this,t,s,l)},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,E.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},n.prototype.getPoint=function(t){var s=this.get("tCache");s||(this._calculateCurve(),this._setTcache(),s=this.get("tCache"));var l,f,d=this.get("curve");if(!s||s.length===0)return d?{x:d[0][1],y:d[0][2]}:null;(0,E.S6)(s,function(P,D){t>=P[0]&&t<=P[1]&&(l=(t-P[0])/(P[1]-P[0]),f=D)});var m=d[f];if((0,E.UM)(m)||(0,E.UM)(f))return null;var x=m.length,T=d[f+1];return Ol.Ll.pointAt(m[x-2],m[x-1],T[1],T[2],T[3],T[4],T[5],T[6],l)},n.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Lg.pathToCurve(t))},n.prototype._setTcache=function(){var t=0,s=0,l=[],f,d,m,x,T=this.get("curve");if(T){if((0,E.S6)(T,function(P,D){m=T[D+1],x=P.length,m&&(t+=Ol.Ll.length(P[x-2],P[x-1],m[1],m[2],m[3],m[4],m[5],m[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,E.S6)(T,function(P,D){m=T[D+1],x=P.length,m&&(f=[],f[0]=s/t,d=Ol.Ll.length(P[x-2],P[x-1],m[1],m[2],m[3],m[4],m[5],m[6]),s+=d||0,f[1]=s/t,l.push(f))}),this.set("tCache",l)}},n.prototype.getStartTangent=function(){var t=this.getSegments(),s;if(t.length>1){var l=t[0].currentPoint,f=t[1].currentPoint,d=t[1].startTangent;s=[],d?(s.push([l[0]-d[0],l[1]-d[1]]),s.push([l[0],l[1]])):(s.push([f[0],f[1]]),s.push([l[0],l[1]]))}return s},n.prototype.getEndTangent=function(){var t=this.getSegments(),s=t.length,l;if(s>1){var f=t[s-2].currentPoint,d=t[s-1].currentPoint,m=t[s-1].endTangent;l=[],m?(l.push([d[0]-m[0],d[1]-m[1]]),l.push([d[0],d[1]])):(l.push([f[0],f[1]]),l.push([d[0],d[1]]))}return l},n}(vc),Sx=y_;function Ex(i,n,t,s,l){var f=i.length;if(f<2)return!1;for(var d=0;d<f-1;d++){var m=i[d][0],x=i[d][1],T=i[d+1][0],P=i[d+1][1];if(np(m,x,T,P,n,t,s))return!0}if(l){var D=i[0],B=i[f-1];if(np(D[0],D[1],B[0],B[1],n,t,s))return!0}return!1}var $R=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr().points,x=!1;return l&&(x=Ex(m,d,t,s,!0)),!x&&f&&(x=G0(m,t,s)),x},n.prototype.createPath=function(t){var s=this.attr(),l=s.points;if(!(l.length<2)){t.beginPath();for(var f=0;f<l.length;f++){var d=l[f];f===0?t.moveTo(d[0],d[1]):t.lineTo(d[0],d[1])}t.closePath()}},n}(vc),Sf=$R,XR=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.setArrow=function(){var t=this.attr(),s=this.attrs,l=s.points,f=s.startArrow,d=s.endArrow,m=l.length,x=l[0][0],T=l[0][1],P=l[m-1][0],D=l[m-1][1];f&&Im(this,t,l[1][0],l[1][1],x,T),d&&Pm(this,t,l[m-2][0],l[m-2][1],P,D)},n.prototype.isFill=function(){return!1},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr().points;return Ex(m,d,t,s,!1)},n.prototype.isStroke=function(){return!0},n.prototype.createPath=function(t){var s=this.attr(),l=s.points,f=s.startArrow,d=s.endArrow,m=l.length;if(!(l.length<2)){var x=l[0][0],T=l[0][1],P=l[m-1][0],D=l[m-1][1];if(f&&f.d){var B=Sd(x,T,l[1][0],l[1][1],f.d);x+=B.dx,T+=B.dy}if(d&&d.d){var B=Sd(l[m-2][0],l[m-2][1],P,D,d.d);P-=B.dx,D-=B.dy}t.beginPath(),t.moveTo(x,T);for(var U=0;U<m-1;U++){var Y=l[U];t.lineTo(Y[0],Y[1])}t.lineTo(P,D)}},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,E.UM)(s)?(this.set("totalLength",Ol.aH.length(t)),this.get("totalLength")):s},n.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,E.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Ol.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},n.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,E.S6)(t,function(x,T){t[T+1]&&(d=[],d[0]=l/s,m=Ol.x1.length(x[0],x[1],t[T+1][0],t[T+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},n.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},n}(vc),YR=XR;function KR(i,n,t,s,l,f,d){var m=l/2;return yd(i-m,n-m,t,l,f,d)||yd(i+t-m,n-m,l,s,f,d)||yd(i+m,n+s-m,t,l,f,d)||yd(i-m,n+m,l,s,f,d)}function qR(i,n,t,s,l,f,d,m){var x=f/2;return np(i+l,n,i+t-l,n,f,d,m)||np(i+t,n+l,i+t,n+s-l,f,d,m)||np(i+t-l,n+s,i+l,n+s,f,d,m)||np(i,n+s-l,i,n+l,f,d,m)||jp(i+t-l,n+l,l,1.5*Math.PI,2*Math.PI,f,d,m)||jp(i+t-l,n+s-l,l,0,.5*Math.PI,f,d,m)||jp(i+l,n+s-l,l,.5*Math.PI,Math.PI,f,d,m)||jp(i+l,n+l,l,Math.PI,1.5*Math.PI,f,d,m)}var $0=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,T=m.y,P=m.width,D=m.height,B=m.radius;if(B){var Y=!1;return l&&(Y=qR(x,T,P,D,B,d,t,s)),!Y&&f&&(Y=W0(this,t,s)),Y}else{var U=d/2;if(f&&l)return yd(x-U,T-U,P+U,D+U,t,s);if(f)return yd(x,T,P,D,t,s);if(l)return KR(x,T,P,D,d,t,s)}},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.radius;if(t.beginPath(),x===0)t.rect(l,f,d,m);else{var T=Lc(x),P=T[0],D=T[1],B=T[2],U=T[3];t.moveTo(l+P,f),t.lineTo(l+d-D,f),D!==0&&t.arc(l+d-D,f+D,D,-Math.PI/2,0),t.lineTo(l+d,f+m-B),B!==0&&t.arc(l+d-B,f+m-B,B,0,Math.PI/2),t.lineTo(l+U,f+m),U!==0&&t.arc(l+U,f+m-U,U,Math.PI/2,Math.PI),t.lineTo(l,f+P),P!==0&&t.arc(l+P,f+P,P,Math.PI,Math.PI*1.5),t.closePath()}},n}(vc),UE=$0,ZE=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.isOnlyHitBox=function(){return!0},n.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},n.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,Ge.assembleFont)(t)},n.prototype._setText=function(t){var s=null;(0,E.HD)(t)&&t.indexOf(`
`)!==-1&&(s=t.split(`
`)),this.set("textArr",s)},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(s)},n.prototype._getSpaceingY=function(){var t=this.attrs,s=t.lineHeight,l=t.fontSize*1;return s?s-l:l*.14},n.prototype._drawTextArr=function(t,s,l){var f=this.attrs,d=f.textBaseline,m=f.x,x=f.y,T=f.fontSize*1,P=this._getSpaceingY(),D=(0,Ge.getTextHeight)(f.text,f.fontSize,f.lineHeight),B;(0,E.S6)(s,function(U,Y){B=x+Y*(P+T)-D+T,d==="middle"&&(B+=D-T-(D-T)/2),d==="top"&&(B+=D-T),(0,E.UM)(U)||(l?t.fillText(U,m,B):t.strokeText(U,m,B))})},n.prototype._drawText=function(t,s){var l=this.attr(),f=l.x,d=l.y,m=this.get("textArr");if(m)this._drawTextArr(t,m,s);else{var x=l.text;(0,E.UM)(x)||(s?t.fillText(x,f,d):t.strokeText(x,f,d))}},n.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isStroke()&&l>0&&(!(0,E.UM)(d)&&d!==1&&(t.globalAlpha=f),this.stroke(t)),this.isFill()&&(!(0,E.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.afterDrawPath(t)},n.prototype.fill=function(t){this._drawText(t,!0)},n.prototype.stroke=function(t){this._drawText(t,!1)},n}(vc),VE=ZE;function Cx(i,n){if(n){var t=(0,Ge.invert)(n);return(0,Ge.multiplyVec2)(t,i)}return i}function Tx(i,n,t){var s=i.getTotalMatrix();if(s){var l=Cx([n,t,1],s),f=l[0],d=l[1];return[f,d]}return[n,t]}function HE(i,n,t){if(i.isCanvas&&i.isCanvas())return!0;if(!(0,Ge.isAllowCapture)(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var s=Tx(i,n,t),l=s[0],f=s[1];if(i.isClipped(l,f))return!1}var d=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return n>=d.minX&&n<=d.maxX&&t>=d.minY&&t<=d.maxY}function jE(i,n,t){if(!HE(i,n,t))return null;for(var s=null,l=i.getChildren(),f=l.length,d=f-1;d>=0;d--){var m=l[d];if(m.isGroup())s=jE(m,n,t);else if(HE(m,n,t)){var x=m,T=Tx(m,n,t),P=T[0],D=T[1];x.isInShape(P,D)&&(s=m)}if(s)break}return s}var Ax=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},n.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},n.prototype.getShapeBase=function(){return te},n.prototype.getGroupBase=function(){return Dm},n.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||wm();return t>=1?Math.ceil(t):1},n.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},n.prototype.createDom=function(){var t=document.createElement("canvas"),s=t.getContext("2d");return this.set("context",s),t},n.prototype.setDOMSize=function(t,s){i.prototype.setDOMSize.call(this,t,s);var l=this.get("context"),f=this.get("el"),d=this.getPixelRatio();f.width=d*t,f.height=d*s,d>1&&l.scale(d,d)},n.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),s=this.get("el");t.clearRect(0,0,s.width,s.height)},n.prototype.getShape=function(t,s){var l;return this.get("quickHit")?l=jE(this,t,s):l=i.prototype.getShape.call(this,t,s,null),l},n.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),s=this.getViewRange(),l;if(t.length&&t[0]===this)l=s;else if(l=c_(t),l){l.minX=Math.floor(l.minX),l.minY=Math.floor(l.minY),l.maxX=Math.ceil(l.maxX),l.maxY=Math.ceil(l.maxY),l.maxY+=1;var f=this.get("clipView");f&&(l=f_(l,s))}return l},n.prototype.refreshElement=function(t){var s=this.get("refreshElements");s.push(t)},n.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,E.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},n.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},n.prototype._drawAll=function(){var t=this.get("context"),s=this.get("el"),l=this.getChildren();t.clearRect(0,0,s.width,s.height),bf(t,this),jl(t,l),this.set("refreshElements",[])},n.prototype._drawRegion=function(){var t=this.get("context"),s=this.get("refreshElements"),l=this.getChildren(),f=this._getRefreshRegion();f?(t.clearRect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.save(),t.beginPath(),t.rect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.clip(),bf(t,this),Ch(this,l,f),jl(t,l,f),t.restore()):s.length&&km(s),(0,E.S6)(s,function(d){d.get("hasChanged")&&d.set("hasChanged",!1)}),this.set("refreshElements",[])},n.prototype._startDraw=function(){var t=this,s=this.get("drawFrame");s||(s=(0,E.U7)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",s))},n.prototype.skipDraw=function(){},n.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},n}(Ge.AbstractCanvas),Mx=Ax,Rx="0.5.12",Bm={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Ho={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},WE=null;function Gf(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function X0(i){var n=Bm[i.type],t=i.getParent();if(!n)throw new Error("the type "+i.type+" is not supported by svg");var s=Gf(n);if(i.get("id")&&(s.id=i.get("id")),i.set("el",s),i.set("attrs",{}),t){var l=t.get("el");l||(l=t.createDom(),t.set("el",l)),l.appendChild(s)}return s}function Nm(i,n){var t=i.get("el"),s=(0,E.qo)(t.children).sort(n),l=document.createDocumentFragment();s.forEach(function(f){l.appendChild(f)}),t.appendChild(l)}function $f(i,n){var t=i.parentNode,s=Array.from(t.childNodes).filter(function(m){return m.nodeType===1&&m.nodeName.toLowerCase()!=="defs"}),l=s[n],f=s.indexOf(i);if(l){if(f>n)t.insertBefore(i,l);else if(f<n){var d=s[n+1];d?t.insertBefore(i,d):t.appendChild(i)}}else t.appendChild(i)}function Ix(i,n){var t=i.cfg.el,s=i.attr(),l={dx:s.shadowOffsetX,dy:s.shadowOffsetY,blur:s.shadowBlur,color:s.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)t.removeAttribute("filter");else{var f=n.find("filter",l);f||(f=n.addShadow(l)),t.setAttribute("filter","url(#"+f+")")}}function Fg(i){var n=i.attr().matrix;if(n){for(var t=i.cfg.el,s=[],l=0;l<9;l+=3)s.push(n[l]+","+n[l+1]);s=s.join(","),s.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+s+")"):console.warn("invalid matrix:",n)}}function ip(i,n){var t=i.getClip(),s=i.get("el");if(!t)s.removeAttribute("clip-path");else if(t&&!s.hasAttribute("clip-path")){X0(t),t.createPath(n);var l=n.addClip(t);s.setAttribute("clip-path","url(#"+l+")")}}function GE(i,n){n.forEach(function(t){t.draw(i)})}function $E(i,n){var t=i.get("canvas");if(t&&t.get("autoDraw")){var s=t.get("context"),l=i.getParent(),f=l?l.getChildren():[t],d=i.get("el");if(n==="remove"){var m=i.get("isClipShape");if(m){var x=d&&d.parentNode,T=x&&x.parentNode;x&&T&&T.removeChild(x)}else d&&d.parentNode&&d.parentNode.removeChild(d)}else if(n==="show")d.setAttribute("visibility","visible");else if(n==="hide")d.setAttribute("visibility","hidden");else if(n==="zIndex")$f(d,f.indexOf(i));else if(n==="sort"){var P=i.get("children");P&&P.length&&Nm(i,function(D,B){return P.indexOf(D)-P.indexOf(B)?1:0})}else n==="clear"?d&&(d.innerHTML=""):n==="matrix"?Fg(i):n==="clip"?ip(i,s):n==="attr"||n==="add"&&i.draw(s)}}var QR=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.isEntityGroup=function(){return!0},n.prototype.createDom=function(){var t=Gf("g");this.set("el",t);var s=this.getParent();if(s){var l=s.get("el");l||(l=s.createDom(),s.set("el",l)),l.appendChild(t)}return t},n.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.createPath(l,t)}},n.prototype.onCanvasChange=function(t){$E(this,t)},n.prototype.getShapeBase=function(){return fe},n.prototype.getGroupBase=function(){return n},n.prototype.draw=function(t){var s=this.getChildren(),l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||this.createDom(),ip(this,t),this.createPath(t),s.length&&GE(t,s))},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){Ho[m]&&f.setAttribute(Ho[m],d)}),Fg(this)},n}(Ge.AbstractGroup),__=QR,XE=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.draw(l,t)}},n.prototype.getShapeBase=function(){return fe},n.prototype.getGroupBase=function(){return __},n.prototype.onCanvasChange=function(t){$E(this,t)},n.prototype.calculateBBox=function(){var t=this.get("el"),s=null;if(t)s=t.getBBox();else{var l=(0,Ge.getBBoxMethod)(this.get("type"));l&&(s=l(this))}if(s){var f=s.x,d=s.y,m=s.width,x=s.height,T=this.getHitLineWidth(),P=T/2,D=f-P,B=d-P,U=f+m+P,Y=d+x+P;return{x:D,y:B,minX:D,minY:B,maxX:U,maxY:Y,width:m+T,height:x+T}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},n.prototype.isFill=function(){var t=this.attr(),s=t.fill,l=t.fillStyle;return(s||l||this.isClipShape())&&this.canFill},n.prototype.isStroke=function(){var t=this.attr(),s=t.stroke,l=t.strokeStyle;return(s||l)&&this.canStroke},n.prototype.draw=function(t,s){var l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||X0(this),ip(this,t),this.createPath(t,s),this.shadow(t,s),this.strokeAndFill(t,s),this.transform(s))},n.prototype.createPath=function(t,s){},n.prototype.strokeAndFill=function(t,s){var l=s||this.attr(),f=l.fill,d=l.fillStyle,m=l.stroke,x=l.strokeStyle,T=l.fillOpacity,P=l.strokeOpacity,D=l.lineWidth,B=this.get("el");this.canFill&&(s?"fill"in l?this._setColor(t,"fill",f):"fillStyle"in l&&this._setColor(t,"fill",d):this._setColor(t,"fill",f||d),T&&B.setAttribute(Ho.fillOpacity,T)),this.canStroke&&D>0&&(s?"stroke"in l?this._setColor(t,"stroke",m):"strokeStyle"in l&&this._setColor(t,"stroke",x):this._setColor(t,"stroke",m||x),P&&B.setAttribute(Ho.strokeOpacity,P),D&&B.setAttribute(Ho.lineWidth,D))},n.prototype._setColor=function(t,s,l){var f=this.get("el");if(!l){f.setAttribute(Ho[s],"none");return}if(l=l.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(l)){var d=t.find("gradient",l);d||(d=t.addGradient(l)),f.setAttribute(Ho[s],"url(#"+d+")")}else if(/^[p,P]{1}[\s]*\(/.test(l)){var d=t.find("pattern",l);d||(d=t.addPattern(l)),f.setAttribute(Ho[s],"url(#"+d+")")}else f.setAttribute(Ho[s],l)},n.prototype.shadow=function(t,s){var l=this.attr(),f=s||l,d=f.shadowOffsetX,m=f.shadowOffsetY,x=f.shadowBlur,T=f.shadowColor;(d||m||x||T)&&Ix(this,t)},n.prototype.transform=function(t){var s=this.attr(),l=(t||s).matrix;l&&Fg(this)},n.prototype.isInShape=function(t,s){return this.isPointInPath(t,s)},n.prototype.isPointInPath=function(t,s){var l=this.get("el"),f=this.get("canvas"),d=f.get("el").getBoundingClientRect(),m=t+d.left,x=s+d.top,T=document.elementFromPoint(m,x);return!!(T&&T.isEqualNode(l))},n.prototype.getHitLineWidth=function(){var t=this.attrs,s=t.lineWidth,l=t.lineAppendWidth;return this.isStroke()?s+l:0},n}(Ge.AbstractShape),af=XE,JR=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,r:0})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Ho[m]&&f.setAttribute(Ho[m],d)})},n}(af),e3=JR,t3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");if((0,E.S6)(s||l,function(T,P){Ho[P]&&f.setAttribute(Ho[P],T)}),typeof l.html=="function"){var d=l.html.call(this,l);if(d instanceof Element||d instanceof HTMLDocument){for(var m=f.childNodes,x=m.length-1;x>=0;x--)f.removeChild(m[x]);f.appendChild(d)}else f.innerHTML=d}else f.innerHTML=l.html},n}(af),YE=t3,r3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Ho[m]&&f.setAttribute(Ho[m],d)})},n}(af),n3=r3,i3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,E.S6)(s||f,function(m,x){x==="img"?l._setImage(f.img):Ho[x]&&d.setAttribute(Ho[x],m)})},n.prototype.setAttr=function(t,s){this.attrs[t]=s,t==="img"&&this._setImage(s)},n.prototype._setImage=function(t){var s=this.attr(),l=this.get("el");if((0,E.HD)(t))l.setAttribute("href",t);else if(t instanceof window.Image)s.width||(l.setAttribute("width",t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",t.height),this.attr("height",t.height)),l.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,E.HD)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")l.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var f=document.createElement("canvas");f.setAttribute("width",""+t.width),f.setAttribute("height",""+t.height),f.getContext("2d").putImageData(t,0,0),s.width||(l.setAttribute("width",""+t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",""+t.height),this.attr("height",t.height)),l.setAttribute("href",f.toDataURL())}},n}(af),Bg=i3,Px=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){if(m==="startArrow"||m==="endArrow")if(d){var x=(0,E.Kn)(d)?t.addArrow(l,Ho[m]):t.getDefaultArrow(l,Ho[m]);f.setAttribute(Ho[m],"url(#"+x+")")}else f.removeAttribute(Ho[m]);else Ho[m]&&f.setAttribute(Ho[m],d)})},n.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Ol.x1.length(s,l,f,d)},n.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Ol.x1.pointAt(l,f,d,m,t)},n}(af),x_=Px,zm={circle:function(i,n,t){return[["M",i,n],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,n,t){return[["M",i-t,n-t],["L",i+t,n-t],["L",i+t,n+t],["L",i-t,n+t],["Z"]]},diamond:function(i,n,t){return[["M",i-t,n],["L",i,n-t],["L",i+t,n],["L",i,n+t],["Z"]]},triangle:function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n+s],["L",i,n-s],["L",i+t,n+s],["z"]]},triangleDown:function(i,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,n-s],["L",i+t,n-s],["L",i,n+s],["Z"]]}},Um={get:function(i){return zm[i]},register:function(i,n){zm[i]=n},remove:function(i){delete zm[i]},getAll:function(){return zm}},Ox=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return n.prototype.createPath=function(t){var s=this.get("el");s.setAttribute("d",this._assembleMarker())},n.prototype._assembleMarker=function(){var t=this._getPath();return(0,E.kJ)(t)?t.map(function(s){return s.join(" ")}).join(""):t},n.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.r||t.radius,d=t.symbol||"circle",m;return(0,E.mf)(d)?m=d:m=Um.get(d),m?m(s,l,f):(console.warn(m+" symbol is not exist."),null)},n.symbolsFactory=Um,n}(af),kx=Ox,Y0=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,E.S6)(s||f,function(m,x){if(x==="path"&&(0,E.kJ)(m))d.setAttribute("d",l._formatPath(m));else if(x==="startArrow"||x==="endArrow")if(m){var T=(0,E.Kn)(m)?t.addArrow(f,Ho[x]):t.getDefaultArrow(f,Ho[x]);d.setAttribute(Ho[x],"url(#"+T+")")}else d.removeAttribute(Ho[x]);else Ho[x]&&d.setAttribute(Ho[x],m)})},n.prototype._formatPath=function(t){var s=t.map(function(l){return l.join(" ")}).join("");return~s.indexOf("NaN")?"":s},n.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},n.prototype.getPoint=function(t){var s=this.get("el"),l=this.getTotalLength();if(l===0)return null;var f=s?s.getPointAtLength(t*l):null;return f?{x:f.x,y:f.y}:null},n}(af),Dx=Y0,K0=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="points"&&(0,E.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Ho[m]&&f.setAttribute(Ho[m],d)})},n}(af),b_=K0,wd=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.onAttrChange=function(t,s,l){i.prototype.onAttrChange.call(this,t,s,l),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="points"&&(0,E.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Ho[m]&&f.setAttribute(Ho[m],d)})},n.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,E.UM)(s)?(this.set("totalLength",Ol.aH.length(t)),this.get("totalLength")):s},n.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,E.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Ol.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},n.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,E.S6)(t,function(x,T){t[T+1]&&(d=[],d[0]=l/s,m=Ol.x1.length(x[0],x[1],t[T+1][0],t[T+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},n.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},n}(af),Lx=wd,Fx=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a3=/[^\s,]+/gi;function aB(i){var n=0,t=0,s=0,l=0;return(0,E.kJ)(i)?i.length===1?n=t=s=l=i[0]:i.length===2?(n=s=i[0],t=l=i[1]):i.length===3?(n=i[0],t=l=i[1],s=i[2]):(n=i[0],t=i[1],s=i[2],l=i[3]):n=t=s=l=i,{r1:n,r2:t,r3:s,r4:l}}function KE(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(Fx),each(i,function(n,t){if(n=n.match(a3),n[0].length>1){var s=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=s}each(n,function(l,f){isNaN(l)||(n[f]=+l)}),i[t]=n}),i}var qE=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el"),m=!1,x=["x","y","width","height","radius"];(0,E.S6)(s||f,function(T,P){x.indexOf(P)!==-1&&!m?(d.setAttribute("d",l._assembleRect(f)),m=!0):x.indexOf(P)===-1&&Ho[P]&&d.setAttribute(Ho[P],T)})},n.prototype._assembleRect=function(t){var s=t.x,l=t.y,f=t.width,d=t.height,m=t.radius;if(!m)return"M "+s+","+l+" l "+f+",0 l 0,"+d+" l"+-f+" 0 z";var x=aB(m);(0,E.kJ)(m)?m.length===1?x.r1=x.r2=x.r3=x.r4=m[0]:m.length===2?(x.r1=x.r3=m[0],x.r2=x.r4=m[1]):m.length===3?(x.r1=m[0],x.r2=x.r4=m[1],x.r3=m[2]):(x.r1=m[0],x.r2=m[1],x.r3=m[2],x.r4=m[3]):x.r1=x.r2=x.r3=x.r4=m;var T=[["M "+(s+x.r1)+","+l],["l "+(f-x.r1-x.r2)+",0"],["a "+x.r2+","+x.r2+",0,0,1,"+x.r2+","+x.r2],["l 0,"+(d-x.r2-x.r3)],["a "+x.r3+","+x.r3+",0,0,1,"+-x.r3+","+x.r3],["l "+(x.r3+x.r4-f)+",0"],["a "+x.r4+","+x.r4+",0,0,1,"+-x.r4+","+-x.r4],["l 0,"+(x.r4+x.r1-d)],["a "+x.r1+","+x.r1+",0,0,1,"+x.r1+","+-x.r1],["z"]];return T.join(" ")},n}(af),oB=qE,QE=k(43631),JE=.3,o3={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},s3={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},e2={left:"left",start:"left",center:"middle",right:"end",end:"end"},u3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");this._setFont(),(0,E.S6)(s||f,function(m,x){x==="text"?l._setText(""+m):x==="matrix"&&m?Fg(l):Ho[x]&&d.setAttribute(Ho[x],m)}),d.setAttribute("paint-order","stroke"),d.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},n.prototype._setFont=function(){var t=this.get("el"),s=this.attr(),l=s.textBaseline,f=s.textAlign,d=(0,QE.qY)();d&&d.name==="firefox"?t.setAttribute("dominant-baseline",s3[l]||"alphabetic"):t.setAttribute("alignment-baseline",o3[l]||"baseline"),t.setAttribute("text-anchor",e2[f]||"left")},n.prototype._setText=function(t){var s=this.get("el"),l=this.attr(),f=l.x,d=l.textBaseline,m=d===void 0?"bottom":d;if(!t)s.innerHTML="";else if(~t.indexOf(`
`)){var x=t.split(`
`),T=x.length-1,P="";(0,E.S6)(x,function(D,B){B===0?m==="alphabetic"?P+='<tspan x="'+f+'" dy="'+-T+'em">'+D+"</tspan>":m==="top"?P+='<tspan x="'+f+'" dy="0.9em">'+D+"</tspan>":m==="middle"?P+='<tspan x="'+f+'" dy="'+-(T-1)/2+'em">'+D+"</tspan>":m==="bottom"?P+='<tspan x="'+f+'" dy="-'+(T+JE)+'em">'+D+"</tspan>":m==="hanging"&&(P+='<tspan x="'+f+'" dy="'+(-(T-1)-JE)+'em">'+D+"</tspan>"):P+='<tspan x="'+f+'" dy="1em">'+D+"</tspan>"}),s.innerHTML=P}else s.innerHTML=t},n}(af),t2=u3,r2=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,n2=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i2=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Bx(i){var n=i.match(i2);if(!n)return"";var t="";return n.sort(function(s,l){return s=s.split(":"),l=l.split(":"),Number(s[0])-Number(l[0])}),(0,E.S6)(n,function(s){s=s.split(":"),t+='<stop offset="'+s[0]+'" stop-color="'+s[1]+'"></stop>'}),t}function a2(i,n){var t=r2.exec(i),s=(0,E.wQ)((0,E.c$)(parseFloat(t[1])),Math.PI*2),l=t[2],f,d;s>=0&&s<.5*Math.PI?(f={x:0,y:0},d={x:1,y:1}):.5*Math.PI<=s&&s<Math.PI?(f={x:1,y:0},d={x:0,y:1}):Math.PI<=s&&s<1.5*Math.PI?(f={x:1,y:1},d={x:0,y:0}):(f={x:0,y:1},d={x:1,y:0});var m=Math.tan(s),x=m*m,T=(d.x-f.x+m*(d.y-f.y))/(x+1)+f.x,P=m*(d.x-f.x+m*(d.y-f.y))/(x+1)+f.y;n.setAttribute("x1",f.x),n.setAttribute("y1",f.y),n.setAttribute("x2",T),n.setAttribute("y2",P),n.innerHTML=Bx(l)}function o2(i,n){var t=n2.exec(i),s=parseFloat(t[1]),l=parseFloat(t[2]),f=parseFloat(t[3]),d=t[4];n.setAttribute("cx",s),n.setAttribute("cy",l),n.setAttribute("r",f),n.innerHTML=Bx(d)}var s2=function(){function i(n){this.cfg={};var t=null,s=(0,E.EL)("gradient_");return n.toLowerCase()[0]==="l"?(t=Gf("linearGradient"),a2(n,t)):(t=Gf("radialGradient"),o2(n,t)),t.setAttribute("id",s),this.el=t,this.id=s,this.cfg=n,this}return i.prototype.match=function(n,t){return this.cfg===t},i}(),u2=s2,l2={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},c2={x:"-40%",y:"-40%",width:"200%",height:"200%"},f2=function(){function i(n){this.type="filter",this.cfg={},this.type="filter";var t=Gf("filter");return(0,E.S6)(c2,function(s,l){t.setAttribute(l,s)}),this.el=t,this.id=(0,E.EL)("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,t),this}return i.prototype.match=function(n,t){if(this.type!==n)return!1;var s=!0,l=this.cfg;return(0,E.S6)(Object.keys(l),function(f){if(l[f]!==t[f])return s=!1,!1}),s},i.prototype.update=function(n,t){var s=this.cfg;return s[l2[n]]=t,this._parseShadow(s,this.el),this},i.prototype._parseShadow=function(n,t){var s=`<feDropShadow
      dx="`+(n.dx||0)+`"
      dy="`+(n.dy||0)+`"
      stdDeviation="`+(n.blur?n.blur/10:0)+`"
      flood-color="`+(n.color?n.color:"#000")+`"
      flood-opacity="`+(n.opacity?n.opacity:1)+`"
      />`;t.innerHTML=s},i}(),h2=f2,p2=function(){function i(n,t){this.cfg={};var s=Gf("marker"),l=(0,E.EL)("marker_");s.setAttribute("id",l);var f=Gf("path");f.setAttribute("stroke",n.stroke||"none"),f.setAttribute("fill",n.fill||"none"),s.appendChild(f),s.setAttribute("overflow","visible"),s.setAttribute("orient","auto-start-reverse"),this.el=s,this.child=f,this.id=l;var d=n[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=n.stroke||"#000",d===!0?this._setDefaultPath(t,f):(this.cfg=d,this._setMarker(n.lineWidth,f)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(n,t){var s=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),s.setAttribute("refX",""+10*Math.cos(Math.PI/6)),s.setAttribute("refY","5")},i.prototype._setMarker=function(n,t){var s=this.el,l=this.cfg.path,f=this.cfg.d;(0,E.kJ)(l)&&(l=l.map(function(d){return d.join(" ")}).join("")),t.setAttribute("d",l),s.appendChild(t),f&&s.setAttribute("refX",""+f/n)},i.prototype.update=function(n){var t=this.child;t.attr?t.attr("fill",n):t.setAttribute("fill",n)},i}(),Nx=p2,d2=function(){function i(n){this.type="clip",this.cfg={};var t=Gf("clipPath");this.el=t,this.id=(0,E.EL)("clip_"),t.id=this.id;var s=n.cfg.el;return t.appendChild(s),this.cfg=n,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var n=this.el;n.parentNode.removeChild(n)},i}(),v2=d2,g2=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,gc=function(){function i(n){this.cfg={};var t=Gf("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var s=Gf("image");t.appendChild(s);var l=(0,E.EL)("pattern_");t.id=l,this.el=t,this.id=l,this.cfg=n;var f=g2.exec(n),d=f[2];s.setAttribute("href",d);var m=new Image;d.match(/^data:/i)||(m.crossOrigin="Anonymous"),m.src=d;function x(){t.setAttribute("width",""+m.width),t.setAttribute("height",""+m.height)}return m.complete?x():(m.onload=x,m.src=m.src),this}return i.prototype.match=function(n,t){return this.cfg===t},i}(),m2=gc,y2=function(){function i(n){var t=Gf("defs"),s=(0,E.EL)("defs_");t.id=s,n.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=n}return i.prototype.find=function(n,t){for(var s=this.children,l=null,f=0;f<s.length;f++)if(s[f].match(n,t)){l=s[f].id;break}return l},i.prototype.findById=function(n){for(var t=this.children,s=null,l=0;l<t.length;l++)if(t[l].id===n){s=t[l];break}return s},i.prototype.add=function(n){this.children.push(n),n.canvas=this.canvas,n.parent=this},i.prototype.getDefaultArrow=function(n,t){var s=n.stroke||n.strokeStyle;if(this.defaultArrow[s])return this.defaultArrow[s].id;var l=new Nx(n,t);return this.defaultArrow[s]=l,this.el.appendChild(l.el),this.add(l),l.id},i.prototype.addGradient=function(n){var t=new u2(n);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(n,t){var s=new Nx(n,t);return this.el.appendChild(s.el),this.add(s),s.id},i.prototype.addShadow=function(n){var t=new h2(n);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(n){var t=new m2(n);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(n){var t=new v2(n);return this.el.appendChild(t.el),this.add(t),t.id},i}(),_2=y2,x2=function(i){(0,M.ZT)(n,i);function n(t){return i.call(this,(0,M.pi)((0,M.pi)({},t),{autoDraw:!0,renderer:"svg"}))||this}return n.prototype.getShapeBase=function(){return fe},n.prototype.getGroupBase=function(){return __},n.prototype.getShape=function(t,s,l){var f=l.target||l.srcElement;if(!Bm[f.tagName]){for(var d=f.parentNode;d&&!Bm[d.tagName];)d=d.parentNode;f=d}return this.find(function(m){return m.get("el")===f})},n.prototype.createDom=function(){var t=Gf("svg"),s=new _2(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",s),t},n.prototype.onCanvasChange=function(t){var s=this.get("context"),l=this.get("el");if(t==="sort"){var f=this.get("children");f&&f.length&&Nm(this,function(m,x){return f.indexOf(m)-f.indexOf(x)?1:0})}else if(t==="clear"){if(l){l.innerHTML="";var d=s.el;d.innerHTML="",l.appendChild(d)}}else t==="matrix"?Fg(this):t==="clip"?ip(this,s):t==="changeSize"&&(l.setAttribute("width",""+this.get("width")),l.setAttribute("height",""+this.get("height")))},n.prototype.draw=function(){var t=this.get("context"),s=this.getChildren();ip(this,t),s.length&&GE(t,s)},n}(Ge.AbstractCanvas),b2=x2,S2="0.5.6",E2=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="path",s.shapeType="line";var l=t.connectNulls,f=l===void 0?!1:l,d=t.showSinglePoint,m=d===void 0?!0:d;return s.connectNulls=f,s.showSinglePoint=m,s}return n.prototype.updateElements=function(t,s){var l,f,d,m,x,T;s===void 0&&(s=!1);for(var P=new Map,D=new Map,B=[],U=0,Y=0;Y<t.length;Y++){var se=t[Y],xe=this.getElementId(se);B.push(xe),P.set(xe,se),D.set(xe,U),U++}this.elements=new Array(U);var Ee=Rs(this.lastElementsMap,B),rt=Ee.added,vt=Ee.updated,xt=Ee.removed;try{for(var Bt=(0,M.XA)(rt),_r=Bt.next();!_r.done;_r=Bt.next()){var xe=_r.value,se=P.get(xe),Or=this.getShapeFactory(),Wr=this.getShapeInfo(se),Y=D.get(xe),gn=new Si({shapeFactory:Or,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:Y});gn.geometry=this,gn.animate=this.animateOption,gn.draw(Wr,s),this.elementsMap[xe]=gn,this.elements[Y]=gn}}catch(qa){l={error:qa}}finally{try{_r&&!_r.done&&(f=Bt.return)&&f.call(Bt)}finally{if(l)throw l.error}}try{for(var $r=(0,M.XA)(vt),zn=$r.next();!zn.done;zn=$r.next()){var xe=zn.value,se=P.get(xe),gn=this.lastElementsMap[xe],Y=D.get(xe),Wr=this.getShapeInfo(se),li=gn.getModel();(this.isCoordinateChanged||js(li,Wr))&&(gn.animate=this.animateOption,gn.update(Wr)),this.elementsMap[xe]=gn,this.elements[Y]=gn}}catch(qa){d={error:qa}}finally{try{zn&&!zn.done&&(m=$r.return)&&m.call($r)}finally{if(d)throw d.error}}try{for(var zi=(0,M.XA)(xt),ia=zi.next();!ia.done;ia=zi.next()){var xe=ia.value,gn=this.lastElementsMap[xe];gn.animate=this.animateOption,gn.destroy()}}catch(qa){x={error:qa}}finally{try{ia&&!ia.done&&(T=zi.return)&&T.call(zi)}finally{if(x)throw x.error}}},n.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push({x:m.x,y:m.y}),l.push(m[ye])}return{points:s,data:l}},n.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=this.getPointsAndData(t),f=l.points,d=l.data;return s.mappingData=t,s.data=d,s.isStack=!!this.getAdjust("stack"),s.points=f,s.connectNulls=this.connectNulls,s.showSinglePoint=this.showSinglePoint,s},n}(Ns),S_=E2;function w2(i,n,t,s,l){var f=[];if(i.length){for(var d=[],m=[],x=0,T=i.length;x<T;x++){var P=i[x];d.push(P[1]),m.push(P[0])}m=m.reverse(),(0,E.S6)([d,m],function(D,B){var U=[],Y=s.parsePoints(D),se=Y[0];d.length===1&&m.length===1?U=B===0?[["M",se.x-.5,se.y],["L",se.x+.5,se.y]]:[["L",se.x+.5,se.y],["L",se.x-.5,se.y]]:(n&&Y.push({x:se.x,y:se.y}),t?U=ra(Y,!1,l):U=Dn(Y,!1),B>0&&(U[0][0]="L")),f=f.concat(U)}),f.push(["Z"])}return f}function q0(i,n,t,s,l){for(var f=bu(i,n,!n,"lineWidth"),d=i.connectNulls,m=i.isInCircle,x=i.points,T=i.showSinglePoint,P=md(x,d,T),D=[],B=0,U=P.length;B<U;B++){var Y=P[B];D=D.concat(w2(Y,m,t,s,l))}return f.path=D,f}function zx(i){var n=i.start,t=i.end;return[[n.x,t.y],[t.x,n.y]]}var l3=to("area",{defaultShapeType:"area",getDefaultPoints:function(i){var n=i.x,t=i.y0,s=(0,E.kJ)(i.y)?i.y:[t,i.y];return s.map(function(l){return{x:n,y:l}})}});mi("area","area",{draw:function(i,n){var t=q0(i,!1,!1,this),s=n.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}});var c3=null,C2=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="area",s.shapeType="area",s.generatePoints=!0,s.startOnZero=!0;var l=t.startOnZero,f=l===void 0?!0:l,d=t.sortable,m=d===void 0?!1:d,x=t.showSinglePoint,T=x===void 0?!1:x;return s.startOnZero=f,s.sortable=m,s.showSinglePoint=T,s}return n.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push(m.points),l.push(m[ye])}return{points:s,data:l}},n.prototype.getYMinValue=function(){if(this.startOnZero)return i.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},n}(S_),T2=C2,f3=to("edge",{defaultShapeType:"line",getDefaultPoints:function(i){return Gv(i)}});mi("edge","line",{draw:function(i,n){var t=bu(i,!0,!1,"lineWidth"),s=Dn(this.parsePoints(i.points),this.coordinate.isPolar);return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var sB=null,h3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return n}(Ns),p3=h3,v3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return n.prototype.updateElements=function(t,s){s===void 0&&(s=!1);for(var l=0;l<t.length;l++){var f=t[l],d=this.prepareRange(f),m=this.prepareSize(),x=(0,E.U2)(this.styleOption,["cfg","shadowBlur"]);(0,E.hj)(x)||(x=m/2),this.prepareGreyScaleBlurredCircle(m,x),this.drawWithRange(f,d,m,x)}},n.prototype.color=function(t,s){return this.createAttrOption("color",t,typeof s!="function"?s:""),this},n.prototype.clear=function(){i.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},n.prototype.prepareRange=function(t){var s=this.getAttribute("color"),l=s.getFields()[0],f=1/0,d=-1/0;return t.forEach(function(m){var x=m[ye][l];x>d&&(d=x),x<f&&(f=x)}),f===d&&(f=d-1),[f,d]},n.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,E.hj)(t)||(t=this.getDefaultSize()),t},n.prototype.prepareGreyScaleBlurredCircle=function(t,s){var l=this.getGrayScaleBlurredCanvas(),f=t+s,d=l.getContext("2d");l.width=l.height=f*2,d.clearRect(0,0,l.width,l.height),d.shadowOffsetX=d.shadowOffsetY=f*2,d.shadowBlur=s,d.shadowColor="black",d.beginPath(),d.arc(-f,-f,t,0,Math.PI*2,!0),d.closePath(),d.fill()},n.prototype.drawWithRange=function(t,s,l,f){var d,m,x=this.coordinate,T=x.start,P=x.end,D=this.coordinate.getWidth(),B=this.coordinate.getHeight(),U=this.getAttribute("color"),Y=U.getFields()[0];this.clearShadowCanvasCtx();var se=this.getShadowCanvasCtx();s&&(t=t.filter(function($r){return $r[ye][Y]<=s[1]&&$r[ye][Y]>=s[0]}));var xe=this.scales[Y];try{for(var Ee=(0,M.XA)(t),rt=Ee.next();!rt.done;rt=Ee.next()){var vt=rt.value,xt=this.getDrawCfg(vt),Bt=xt.x,_r=xt.y,Or=xe.scale(vt[ye][Y]);this.drawGrayScaleBlurredCircle(Bt-T.x,_r-P.y,l+f,Or,se)}}catch($r){d={error:$r}}finally{try{rt&&!rt.done&&(m=Ee.return)&&m.call(Ee)}finally{if(d)throw d.error}}var Wr=se.getImageData(0,0,D,B);this.clearShadowCanvasCtx(),this.colorize(Wr),se.putImageData(Wr,0,0);var gn=this.getImageShape();gn.attr("x",T.x),gn.attr("y",P.y),gn.attr("width",D),gn.attr("height",B),gn.attr("img",se.canvas),gn.set("origin",this.getShapeInfo(t))},n.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),s=this.coordinate;return Math.min(s.getWidth()/(t.scales[0].ticks.length*4),s.getHeight()/(t.scales[1].ticks.length*4))},n.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},n.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},n.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},n.prototype.drawGrayScaleBlurredCircle=function(t,s,l,f,d){var m=this.getGrayScaleBlurredCanvas();d.globalAlpha=f,d.drawImage(m,t-l,s-l)},n.prototype.colorize=function(t){for(var s=this.getAttribute("color"),l=t.data,f=this.paletteCache,d=3;d<l.length;d+=4){var m=l[d];if((0,E.hj)(m)){var x=f[m]?f[m]:Sa.rgb2arr(s.gradient(m/256));l[d-3]=x[0],l[d-2]=x[1],l[d-1]=x[2],l[d]=m}}},n.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var s=this.container;return t=s.addShape({type:"image",attrs:{}}),this.imageShape=t,t},n.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=t.map(function(f){return f[ye]});return(0,M.pi)((0,M.pi)({},s),{mappingData:t,data:l})},n}(Ns),A2=v3;function E_(i){var n,t,s=i.x,l=i.y,f=i.y0,d=i.size,m,x;(0,E.kJ)(l)?(n=(0,M.CR)(l,2),m=n[0],x=n[1]):(m=f,x=l);var T,P;(0,E.kJ)(s)?(t=(0,M.CR)(s,2),T=t[0],P=t[1]):(T=s-d/2,P=s+d/2);var D=[{x:T,y:m},{x:T,y:x}];return D.push({x:P,y:x},{x:P,y:m}),D}function Q0(i,n){n===void 0&&(n=!0);var t=[],s=i[0];t.push(["M",s.x,s.y]);for(var l=1,f=i.length;l<f;l++)t.push(["L",i[l].x,i[l].y]);return n&&(t.push(["L",s.x,s.y]),t.push(["z"])),t}function Ux(i,n){var t=0,s=0,l=0,f=0;return(0,E.kJ)(i)?i.length===1?t=s=l=f=i[0]:i.length===2?(t=l=i[0],s=f=i[1]):i.length===3?(t=i[0],s=f=i[1],l=i[2]):(t=i[0],s=i[1],l=i[2],f=i[3]):t=s=l=f=i,t+s>n&&(t=t?n/(1+s/t):0,s=n-t),l+f>n&&(l=l?n/(1+f/l):0,f=n-l),[t||0,s||0,l||0,f||0]}function Zx(i,n,t){var s=[];if(t.isRect){var l=t.isTransposed?{x:t.start.x,y:n[0].y}:{x:n[0].x,y:t.start.y},f=t.isTransposed?{x:t.end.x,y:n[2].y}:{x:n[3].x,y:t.end.y},d=(0,E.U2)(i,["background","style","radius"]);if(d){var m=t.isTransposed?Math.abs(n[0].y-n[2].y):n[2].x-n[1].x,x=t.isTransposed?t.getWidth():t.getHeight(),T=(0,M.CR)(Ux(d,Math.min(m,x)),4),P=T[0],D=T[1],B=T[2],U=T[3],Y=t.isTransposed&&t.isReflect("y"),se=Y?0:1,xe=function(_r){return Y?-_r:_r};s.push(["M",l.x,f.y+xe(P)]),P!==0&&s.push(["A",P,P,0,0,se,l.x+P,f.y]),s.push(["L",f.x-D,f.y]),D!==0&&s.push(["A",D,D,0,0,se,f.x,f.y+xe(D)]),s.push(["L",f.x,l.y-xe(B)]),B!==0&&s.push(["A",B,B,0,0,se,f.x-B,l.y]),s.push(["L",l.x+U,l.y]),U!==0&&s.push(["A",U,U,0,0,se,l.x,l.y-xe(U)])}else s.push(["M",l.x,l.y]),s.push(["L",f.x,l.y]),s.push(["L",f.x,f.y]),s.push(["L",l.x,f.y]),s.push(["L",l.x,l.y]);s.push(["z"])}if(t.isPolar){var Ee=t.getCenter(),rt=dd(i,t),vt=rt.startAngle,xt=rt.endAngle;if(t.type!=="theta"&&!t.isTransposed)s=yh(Ee.x,Ee.y,t.getRadius(),vt,xt);else{var Bt=function(Wr){return Math.pow(Wr,2)},P=Math.sqrt(Bt(Ee.x-n[0].x)+Bt(Ee.y-n[0].y)),D=Math.sqrt(Bt(Ee.x-n[2].x)+Bt(Ee.y-n[2].y));s=yh(Ee.x,Ee.y,P,t.startAngle,t.endAngle,D)}}return s}function M2(i,n,t){var s=t.getWidth(),l=t.getHeight(),f=t.type==="rect",d=[],m=(i[2].x-i[1].x)/2,x=t.isTransposed?m*l/s:m*s/l;return n==="round"?(f?(d.push(["M",i[0].x,i[0].y+x]),d.push(["L",i[1].x,i[1].y-x]),d.push(["A",m,m,0,0,1,i[2].x,i[2].y-x]),d.push(["L",i[3].x,i[3].y+x]),d.push(["A",m,m,0,0,1,i[0].x,i[0].y+x])):(d.push(["M",i[0].x,i[0].y]),d.push(["L",i[1].x,i[1].y]),d.push(["A",m,m,0,0,1,i[2].x,i[2].y]),d.push(["L",i[3].x,i[3].y]),d.push(["A",m,m,0,0,1,i[0].x,i[0].y])),d.push(["z"])):d=Q0(i),d}function R2(i,n,t){var s=[];return(0,E.UM)(n)?t?s.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",(i[2].x+i[3].x)/2,(i[2].y+i[3].y)/2],["Z"]):s.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",i[2].x,i[2].y],["L",i[3].x,i[3].y],["Z"]):s.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]),s}function Zm(i,n){return[n,i]}function g3(i,n,t){var s,l,f,d,m,x,T,P=(0,M.CR)((0,M.ev)([],(0,M.CR)(i),!1),4),D=P[0],B=P[1],U=P[2],Y=P[3],se=(0,M.CR)(typeof t=="number"?Array(4).fill(t):t,4),xe=se[0],Ee=se[1],rt=se[2],vt=se[3];n.isTransposed&&(s=(0,M.CR)(Zm(B,Y),2),B=s[0],Y=s[1]),n.isReflect("y")&&(l=(0,M.CR)(Zm(D,B),2),D=l[0],B=l[1],f=(0,M.CR)(Zm(U,Y),2),U=f[0],Y=f[1]),n.isReflect("x")&&(d=(0,M.CR)(Zm(D,Y),2),D=d[0],Y=d[1],m=(0,M.CR)(Zm(B,U),2),B=m[0],U=m[1]);var xt=[],Bt=function(_r){return Math.abs(_r)};return x=(0,M.CR)(Ux([xe,Ee,rt,vt],Math.min(Bt(Y.x-D.x),Bt(B.y-D.y))).map(function(_r){return Bt(_r)}),4),xe=x[0],Ee=x[1],rt=x[2],vt=x[3],n.isTransposed&&(T=(0,M.CR)([vt,xe,Ee,rt],4),xe=T[0],Ee=T[1],rt=T[2],vt=T[3]),D.y<B.y?(xt.push(["M",Y.x,Y.y+rt]),rt!==0&&xt.push(["A",rt,rt,0,0,0,Y.x-rt,Y.y]),xt.push(["L",D.x+vt,D.y]),vt!==0&&xt.push(["A",vt,vt,0,0,0,D.x,D.y+vt]),xt.push(["L",B.x,B.y-xe]),xe!==0&&xt.push(["A",xe,xe,0,0,0,B.x+xe,B.y]),xt.push(["L",U.x-Ee,U.y]),Ee!==0&&xt.push(["A",Ee,Ee,0,0,0,U.x,U.y-Ee]),xt.push(["L",Y.x,Y.y+rt]),xt.push(["z"])):Y.x<D.x?(xt.push(["M",U.x+Ee,U.y]),Ee!==0&&xt.push(["A",Ee,Ee,0,0,0,U.x,U.y+Ee]),xt.push(["L",Y.x,Y.y-rt]),rt!==0&&xt.push(["A",rt,rt,0,0,0,Y.x+rt,Y.y]),xt.push(["L",D.x-vt,D.y]),vt!==0&&xt.push(["A",vt,vt,0,0,0,D.x,D.y-vt]),xt.push(["L",B.x,B.y+xe]),xe!==0&&xt.push(["A",xe,xe,0,0,0,B.x-xe,B.y]),xt.push(["L",U.x+Ee,U.y]),xt.push(["z"])):(xt.push(["M",B.x,B.y+xe]),xe!==0&&xt.push(["A",xe,xe,0,0,1,B.x+xe,B.y]),xt.push(["L",U.x-Ee,U.y]),Ee!==0&&xt.push(["A",Ee,Ee,0,0,1,U.x,U.y+Ee]),xt.push(["L",Y.x,Y.y-rt]),rt!==0&&xt.push(["A",rt,rt,0,0,1,Y.x-rt,Y.y]),xt.push(["L",D.x+vt,D.y]),vt!==0&&xt.push(["A",vt,vt,0,0,1,D.x,D.y-vt]),xt.push(["L",B.x,B.y+xe]),xt.push(["z"])),xt}var m3=to("interval",{defaultShapeType:"rect",getDefaultPoints:function(i){return E_(i)}});mi("interval","rect",{draw:function(i,n){var t=bu(i,!1,!0),s=n,l=i==null?void 0:i.background;if(l){s=n.addGroup({name:"interval-group"});var f=Zp(i),d=Zx(i,this.parsePoints(i.points),this.coordinate);s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Fn})}var m;t.radius&&this.coordinate.isRect?m=g3(this.parsePoints(i.points),this.coordinate,t.radius):m=this.parsePath(M2(i.points,t.lineCap,this.coordinate));var x=s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(i){var n=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:n}}:{symbol:"square",style:{r:4,fill:n}}}});var y3=null;function _3(i,n){var t=i.length,s=i;(0,E.HD)(s[0])&&(s=i.map(function(m){return n.translate(m)}));for(var l=s[1]-s[0],f=2;f<t;f++){var d=s[f]-s[f-1];l>d&&(l=d)}return l}function x3(i,n){if(n){var t=(0,E.xH)(i),s=(0,E.I)(t,n);return s.length}return i.length}function Vx(i){var n=i.theme,t=i.coordinate,s=i.getXScale(),l=s.values,f=i.beforeMappingData,d=l.length,m=pl(i.coordinate),x=i.intervalPadding,T=i.dodgePadding,P=i.maxColumnWidth||n.maxColumnWidth,D=i.minColumnWidth||n.minColumnWidth,B=i.columnWidthRatio||n.columnWidthRatio,U=i.multiplePieWidthRatio||n.multiplePieWidthRatio,Y=i.roseWidthRatio||n.roseWidthRatio;if(s.isLinear&&l.length>1){l.sort();var se=_3(l,s);d=(s.max-s.min)/se,l.length>d&&(d=l.length)}var xe=s.range,Ee=1/d,rt=1;if(t.isPolar?t.isTransposed&&d>1?rt=U:rt=Y:(s.isLinear&&(Ee*=xe[1]-xe[0]),rt=B),!(0,E.UM)(x)&&x>=0){var vt=x/m;Ee=(1-(d-1)*vt)/d}else Ee*=rt;if(i.getAdjust("dodge")){var xt=i.getAdjust("dodge"),Bt=xt.dodgeBy,_r=x3(f,Bt);if(!(0,E.UM)(T)&&T>=0){var Or=T/m;Ee=(Ee-Or*(_r-1))/_r}else!(0,E.UM)(x)&&x>=0&&(Ee*=rt),Ee=Ee/_r;Ee=Ee>=0?Ee:0}if(!(0,E.UM)(P)&&P>=0){var Wr=P/m;Ee>Wr&&(Ee=Wr)}if(!(0,E.UM)(D)&&D>=0){var gn=D/m;Ee<gn&&(Ee=gn)}return Ee}var b3=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="interval",s.shapeType="interval",s.generatePoints=!0;var l=t.background;return s.background=l,s}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=pl(d);l=l/m}else this.defaultSize||(this.defaultSize=Vx(this)),l=this.defaultSize;return s.size=l,s},n.prototype.adjustScale=function(){i.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Fp(t)});else{var s=this.scaleDefs,l=t.field,f=t.min,d=t.max,m=t.type;m!=="time"&&(f>0&&!(0,E.U2)(s,[l,"min"])&&t.change({min:0}),d<=0&&!(0,E.U2)(s,[l,"max"])&&t.change({max:0}))}},n.prototype.getDrawCfg=function(t){var s=i.prototype.getDrawCfg.call(this,t);return s.background=this.background,s},n}(Ns),S3=b3,I2=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;s.type="line";var l=t.sortable,f=l===void 0?!1:l;return s.sortable=f,s}return n}(S_),E3=I2,P2=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],O2=["cross","tick","plus","hyphen","line"];function w_(i,n,t,s,l){var f,d,m=bu(n,l,!l,"r"),x=i.parsePoints(n.points),T=x[0];if(n.isStack)T=x[1];else if(x.length>1){var P=t.addGroup();try{for(var D=(0,M.XA)(x),B=D.next();!B.done;B=D.next()){var U=B.value;P.addShape({type:"marker",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{symbol:yl[s]||s}),U)})}}catch(Y){f={error:Y}}finally{try{B&&!B.done&&(d=D.return)&&d.call(D)}finally{if(f)throw f.error}}return P}return t.addShape({type:"marker",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{symbol:yl[s]||s}),T)})}var uB=to("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(i){return Gv(i)}});(0,E.S6)(P2,function(i){mi("point","hollow-".concat(i),{draw:function(n,t){return w_(this,n,t,i,!0)},getMarker:function(n){var t=n.color;return{symbol:yl[i]||i,style:{r:4.5,stroke:t,fill:null}}}})});var lB=null,cB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return n.prototype.getDrawCfg=function(t){var s=i.prototype.getDrawCfg.call(this,t);return(0,M.pi)((0,M.pi)({},s),{isStack:!!this.getAdjust("stack")})},n}(Ns),w3=cB;function C3(i){for(var n=i[0],t=1,s=[["M",n.x,n.y]];t<i.length;){var l=i[t];(l.x!==i[t-1].x||l.y!==i[t-1].y)&&(s.push(["L",l.x,l.y]),l.x===n.x&&l.y===n.y&&t<i.length-1&&(n=i[t+1],s.push(["Z"]),s.push(["M",n.x,n.y]),t++)),t++}return(0,E.Xy)((0,E.Z$)(s),n)||s.push(["L",n.x,n.y]),s.push(["Z"]),s}var Ef=to("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(i){var n=[];return(0,E.S6)(i.x,function(t,s){var l=i.y[s];n.push({x:t,y:l})}),n}});mi("polygon","polygon",{draw:function(i,n){if(!(0,E.xb)(i.points)){var t=bu(i,!0,!0),s=this.parsePath(C3(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"polygon"})}},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}});var J0=null,k2=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l=s.x,f=s.y,d;if(!((0,E.kJ)(l)&&(0,E.kJ)(f))){var m=this.getXScale(),x=this.getYScale(),T=m.values.length,P=x.values.length,D=.5*1/T,B=.5*1/P;m.isCategory&&x.isCategory?(l=[l-D,l-D,l+D,l+D],f=[f-B,f+B,f+B,f-B]):(0,E.kJ)(l)?(d=l,l=[d[0],d[0],d[1],d[1]],f=[f-B/2,f+B/2,f+B/2,f-B/2]):(0,E.kJ)(f)&&(d=f,f=[d[0],d[1],d[1],d[0]],l=[l-D/2,l-D/2,l+D/2,l+D/2]),s.x=l,s.y=f}return s},n}(Ns),D2=k2,Hx=to("schema",{defaultShapeType:""}),T3=null,L2=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=pl(d);l=l/m}else this.defaultSize||(this.defaultSize=Vx(this)),l=this.defaultSize;return s.size=l,s},n}(Ns),A3=L2;function M3(i){if(!(0,E.kJ)(i))return[];var n=(0,E.Fp)(i);return(0,E.UI)(i,function(t){return t/n})}var fB=to("violin",{defaultShapeType:"violin",getDefaultPoints:function(i){var n=i.size/2,t=[],s=M3(i._size);return(0,E.S6)(i.y,function(l,f){var d=s[f]*n,m=f===0,x=f===i.y.length-1;t.push({isMin:m,isMax:x,x:i.x-d,y:l}),t.unshift({isMin:m,isMax:x,x:i.x+d,y:l})}),t}});mi("violin","violin",{draw:function(i,n){var t=bu(i,!0,!0),s=this.parsePath(Ag(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"violin"})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4,fill:n}}}});var R3=null,F2=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=i.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=pl(d);l=l/m}else this.defaultSize||(this.defaultSize=Vx(this)),l=this.defaultSize;return s.size=l,s._size=(0,E.U2)(t[ye],[this._sizeField]),s},n.prototype.initAttributes=function(){var t=this.attributeOption,s=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=s,delete t.size,i.prototype.initAttributes.call(this)},n}(Ns),B2=F2;mi("area","line",{draw:function(i,n){var t=q0(i,!0,!1,this),s=n.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}}),mi("area","smooth",{draw:function(i,n){var t=this.coordinate,s=q0(i,!1,!0,this,zx(t)),l=n.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}}),mi("area","smooth-line",{draw:function(i,n){var t=this.coordinate,s=q0(i,!0,!0,this,zx(t)),l=n.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}});function ey(i,n){return["C",i.x*1/2+n.x*1/2,i.y,i.x*1/2+n.x*1/2,n.y,n.x,n.y]}function C_(i,n){var t=[];t.push({x:n.x,y:n.y}),t.push(i);var s=["Q"];return(0,E.S6)(t,function(l){s.push(l.x,l.y)}),s}function I3(i,n,t){var s=C_(n,t),l=[["M",i.x,i.y]];return l.push(s),l}function P3(i,n){var t=C_(i[1],n),s=C_(i[3],n),l=[["M",i[0].x,i[0].y]];return l.push(s),l.push(["L",i[3].x,i[3].y]),l.push(["L",i[2].x,i[2].y]),l.push(t),l.push(["L",i[1].x,i[1].y]),l.push(["L",i[0].x,i[0].y]),l.push(["Z"]),l}mi("edge","arc",{draw:function(i,n){var t=bu(i,!0,!1,"lineWidth"),s=i.points,l=s.length>2?"weight":"normal",f;if(i.isInCircle){var d={x:0,y:1};return l==="normal"?f=I3(s[0],s[1],d):(t.fill=t.stroke,f=P3(s,d)),f=this.parsePath(f),n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})})}else{if(l==="normal")return s=this.parsePoints(s),f=Zf((s[1].x+s[0].x)/2,s[0].y,Math.abs(s[1].x-s[0].x)/2,Math.PI,Math.PI*2),n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})});var m=ey(s[1],s[3]),x=ey(s[2],s[0]);return f=[["M",s[0].x,s[0].y],["L",s[1].x,s[1].y],m,["L",s[3].x,s[3].y],["L",s[2].x,s[2].y],x,["Z"]],f=this.parsePath(f),t.fill=t.stroke,n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})})}},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});function N2(i,n){var t=ey(i,n),s=[["M",i.x,i.y]];return s.push(t),s}mi("edge","smooth",{draw:function(i,n){var t=bu(i,!0,!1,"lineWidth"),s=i.points,l=this.parsePath(N2(s[0],s[1]));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:l})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var T_=1/3;function z2(i,n){var t=[];t.push({x:i.x,y:i.y*(1-T_)+n.y*T_}),t.push({x:n.x,y:i.y*(1-T_)+n.y*T_}),t.push(n);var s=[["M",i.x,i.y]];return(0,E.S6)(t,function(l){s.push(["L",l.x,l.y])}),s}mi("edge","vhv",{draw:function(i,n){var t=bu(i,!0,!1,"lineWidth"),s=i.points,l=this.parsePath(z2(s[0],s[1]));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:l})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}}),mi("interval","funnel",{getPoints:function(i){return i.size=i.size*2,E_(i)},draw:function(i,n){var t=bu(i,!1,!0),s=this.parsePath(R2(i.points,i.nextPoints,!1)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}}),mi("interval","hollow-rect",{draw:function(i,n){var t=bu(i,!0,!1),s=n,l=i==null?void 0:i.background;if(l){s=n.addGroup();var f=Zp(i),d=Zx(i,this.parsePoints(i.points),this.coordinate);s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Fn})}var m=this.parsePath(Q0(i.points)),x=s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(i){var n=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:n,fill:null}}:{symbol:"square",style:{r:4,stroke:n,fill:null}}}});function U2(i){var n=i.x,t=i.y,s=i.y0;return(0,E.kJ)(t)?t.map(function(l,f){return{x:(0,E.kJ)(n)?n[f]:n,y:l}}):[{x:n,y:s},{x:n,y:t}]}mi("interval","line",{getPoints:function(i){return U2(i)},draw:function(i,n){var t=bu(i,!0,!1,"lineWidth"),s=Rl((0,M.pi)({},t),["fill"]),l=this.parsePath(Q0(i.points,!1)),f=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},s),{path:l}),name:"interval"});return f},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return[["M",t,s-l],["L",t,s+l]]},style:{r:5,stroke:n}}}}),mi("interval","pyramid",{getPoints:function(i){return i.size=i.size*2,E_(i)},draw:function(i,n){var t=bu(i,!1,!0),s=this.parsePath(R2(i.points,i.nextPoints,!0)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}});function O3(i){var n,t=i.x,s=i.y,l=i.y0,f=i.size,d,m;(0,E.kJ)(s)?(n=(0,M.CR)(s,2),d=n[0],m=n[1]):(d=l,m=s);var x=t+f/2,T=t-f/2;return[{x:t,y:d},{x:t,y:m},{x:T,y:d},{x,y:d},{x:T,y:m},{x,y:m}]}function k3(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y]]}mi("interval","tick",{getPoints:function(i){return O3(i)},draw:function(i,n){var t=bu(i,!0,!1),s=this.parsePath(k3(i.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){return[["M",t-l/2,s-l],["L",t+l/2,s-l],["M",t,s-l],["L",t,s+l],["M",t-l/2,s+l],["L",t+l/2,s+l]]},style:{r:5,stroke:n}}}});var D3=function(i,n,t){var s=i.x,l=i.y,f=n.x,d=n.y,m;switch(t){case"hv":m=[{x:f,y:l}];break;case"vh":m=[{x:s,y:d}];break;case"hvh":var x=(f+s)/2;m=[{x,y:l},{x,y:d}];break;case"vhv":var T=(l+d)/2;m=[{x:s,y:T},{x:f,y:T}];break;default:break}return m};function Z2(i,n){var t=[];return(0,E.S6)(i,function(s,l){var f=i[l+1];if(t.push(s),f){var d=D3(s,f,n);t=t.concat(d)}}),t}function V2(i){return i.map(function(n,t){return t===0?["M",n.x,n.y]:["L",n.x,n.y]})}function H2(i,n){var t=md(i.points,i.connectNulls,i.showSinglePoint),s=[];return(0,E.S6)(t,function(l){var f=Z2(l,n);s=s.concat(V2(f))}),(0,M.pi)((0,M.pi)({},bu(i,!0,!1,"lineWidth")),{path:s})}(0,E.S6)(["hv","vh","hvh","vhv"],function(i){mi("line",i,{draw:function(n,t){var s=H2(n,i),l=t.addShape({type:"path",attrs:s,name:"line"});return l},getMarker:function(n){return Vp(n,i)}})}),(0,E.S6)(O2,function(i){mi("point",i,{draw:function(n,t){return w_(this,n,t,i,!0)},getMarker:function(n){var t=n.color;return{symbol:yl[i],style:{r:4.5,stroke:t,fill:null}}}})}),mi("point","image",{draw:function(i,n){var t,s,l=bu(i,!1,!1,"r").r,f=this.parsePoints(i.points),d=f[0];if(i.isStack)d=f[1];else if(f.length>1){var m=n.addGroup();try{for(var x=(0,M.XA)(f),T=x.next();!T.done;T=x.next()){var P=T.value;m.addShape("image",{attrs:{x:P.x-l/2,y:P.y-l,width:l,height:l,img:i.shape[1]}})}}catch(D){t={error:D}}finally{try{T&&!T.done&&(s=x.return)&&s.call(x)}finally{if(t)throw t.error}}return m}return n.addShape("image",{attrs:{x:d.x-l/2,y:d.y-l,width:l,height:l,img:i.shape[1]}})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4.5,fill:n}}}}),(0,E.S6)(P2,function(i){mi("point",i,{draw:function(n,t){return w_(this,n,t,i,!1)},getMarker:function(n){var t=n.color;return{symbol:yl[i]||i,style:{r:4.5,fill:t}}}})});function A_(i){var n=(0,E.kJ)(i)?i:[i],t=n[0],s=n[n.length-1],l=n.length>1?n[1]:t,f=n.length>3?n[3]:s,d=n.length>2?n[2]:l;return{min:t,max:s,min1:l,max1:f,median:d}}function jx(i,n,t){var s=t/2,l;if((0,E.kJ)(n)){var f=A_(n),d=f.min,m=f.max,x=f.median,T=f.min1,P=f.max1,D=i-s,B=i+s;l=[[D,m],[B,m],[i,m],[i,P],[D,T],[D,P],[B,P],[B,T],[i,T],[i,d],[D,d],[B,d],[D,x],[B,x]]}else{n=(0,E.UM)(n)?.5:n;var U=A_(i),d=U.min,m=U.max,x=U.median,T=U.min1,P=U.max1,Y=n-s,se=n+s;l=[[d,Y],[d,se],[d,n],[T,n],[T,Y],[T,se],[P,se],[P,Y],[P,n],[m,n],[m,Y],[m,se],[x,Y],[x,se]]}return l.map(function(xe){return{x:xe[0],y:xe[1]}})}function L3(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y],["L",i[6].x,i[6].y],["L",i[7].x,i[7].y],["L",i[4].x,i[4].y],["Z"],["M",i[8].x,i[8].y],["L",i[9].x,i[9].y],["M",i[10].x,i[10].y],["L",i[11].x,i[11].y],["M",i[12].x,i[12].y],["L",i[13].x,i[13].y]]}mi("schema","box",{getPoints:function(i){var n=i.x,t=i.y,s=i.size;return jx(n,t,s)},draw:function(i,n){var t=bu(i,!0,!1),s=this.parsePath(L3(i.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){var f=[s-6,s-3,s,s+3,s+6],d=jx(t,f,l);return[["M",d[0].x+1,d[0].y],["L",d[1].x-1,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["M",d[4].x,d[4].y],["L",d[5].x,d[5].y],["L",d[6].x,d[6].y],["L",d[7].x,d[7].y],["L",d[4].x,d[4].y],["Z"],["M",d[8].x,d[8].y],["L",d[9].x,d[9].y],["M",d[10].x+1,d[10].y],["L",d[11].x-1,d[11].y],["M",d[12].x,d[12].y],["L",d[13].x,d[13].y]]},style:{r:6,lineWidth:1,stroke:n}}}});function F3(i){var n=(0,E.kJ)(i)?i:[i],t=n.sort(function(s,l){return l-s});return Dp(t,4,t[t.length-1])}function j2(i,n,t){var s=F3(n);return[{x:i,y:s[0]},{x:i,y:s[1]},{x:i-t/2,y:s[2]},{x:i-t/2,y:s[1]},{x:i+t/2,y:s[1]},{x:i+t/2,y:s[2]},{x:i,y:s[2]},{x:i,y:s[3]}]}function B3(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["L",i[4].x,i[4].y],["L",i[5].x,i[5].y],["Z"],["M",i[6].x,i[6].y],["L",i[7].x,i[7].y]]}mi("schema","candle",{getPoints:function(i){var n=i.x,t=i.y,s=i.size;return j2(n,t,s)},draw:function(i,n){var t=bu(i,!0,!0),s=this.parsePath(B3(i.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(i){var n=i.color;return{symbol:function(t,s,l){var f=[s+7.5,s+3,s-3,s-7.5],d=j2(t,f,l);return[["M",d[0].x,d[0].y],["L",d[1].x,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["L",d[4].x,d[4].y],["L",d[5].x,d[5].y],["Z"],["M",d[6].x,d[6].y],["L",d[7].x,d[7].y]]},style:{lineWidth:1,stroke:n,fill:n,r:6}}}});function uv(i,n){var t=Math.abs(i[0].x-i[2].x),s=Math.abs(i[0].y-i[2].y),l=Math.min(t,s);n&&(l=(0,E.uZ)(n,0,Math.min(t,s))),l=l/2;var f=(i[0].x+i[2].x)/2,d=(i[0].y+i[2].y)/2;return{x:f-l,y:d-l,width:l*2,height:l*2}}mi("polygon","square",{draw:function(i,n){if(!(0,E.xb)(i.points)){var t=bu(i,!0,!0),s=this.parsePoints(i.points);return n.addShape("rect",{attrs:(0,M.pi)((0,M.pi)({},t),uv(s,i.size)),name:"polygon"})}},getMarker:function(i){var n=i.color;return{symbol:"square",style:{r:4,fill:n}}}}),mi("violin","smooth",{draw:function(i,n){var t=bu(i,!0,!0),s=this.parsePath(Sm(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{stroke:null,r:4,fill:n}}}}),mi("violin","hollow",{draw:function(i,n){var t=bu(i,!0,!1),s=this.parsePath(Ag(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}}),mi("violin","hollow-smooth",{draw:function(i,n){var t=bu(i,!0,!1),s=this.parsePath(Sm(i.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}});var W2=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getLabelValueDir=function(t){var s="y",l=t.points;return l[0][s]<=l[2][s]?1:-1},n.prototype.getLabelOffsetPoint=function(t,s,l,f){var d,m=i.prototype.getLabelOffsetPoint.call(this,t,s,l),x=this.getCoordinate(),T=x.isTransposed,P=T?"x":"y",D=this.getLabelValueDir(t.mappingData);return m=(0,M.pi)((0,M.pi)({},m),(d={},d[P]=m[P]*D,d)),x.isReflect("x")&&(m=(0,M.pi)((0,M.pi)({},m),{x:m.x*-1})),x.isReflect("y")&&(m=(0,M.pi)((0,M.pi)({},m),{y:m.y*-1})),m},n.prototype.getThemedLabelCfg=function(t){var s=this.geometry,l=this.getDefaultLabelCfg(),f=s.theme;return(0,E.b$)({},l,f.labels,t.position==="middle"?{offset:0}:{},t)},n.prototype.setLabelPosition=function(t,s,l,f){var d=this.getCoordinate(),m=d.isTransposed,x=s.points,T=d.convert(x[0]),P=d.convert(x[2]),D=this.getLabelValueDir(s),B,U,Y,se,xe=(0,E.kJ)(s.shape)?s.shape[0]:s.shape;if(xe==="funnel"||xe==="pyramid"){var Ee=(0,E.U2)(s,"nextPoints"),rt=(0,E.U2)(s,"points");if(Ee){var vt=d.convert(rt[0]),xt=d.convert(rt[1]),Bt=d.convert(Ee[0]),_r=d.convert(Ee[1]);m?(B=Math.min(Bt.y,vt.y),Y=Math.max(Bt.y,vt.y),U=(xt.x+_r.x)/2,se=(vt.x+Bt.x)/2):(B=Math.min((xt.y+_r.y)/2,(vt.y+Bt.y)/2),Y=Math.max((xt.y+_r.y)/2,(vt.y+Bt.y)/2),U=_r.x,se=vt.x)}else B=Math.min(P.y,T.y),Y=Math.max(P.y,T.y),U=P.x,se=T.x}else B=Math.min(P.y,T.y),Y=Math.max(P.y,T.y),U=P.x,se=T.x;switch(f){case"right":t.x=U,t.y=(B+Y)/2,t.textAlign=(0,E.U2)(t,"textAlign",D>0?"left":"right");break;case"left":t.x=se,t.y=(B+Y)/2,t.textAlign=(0,E.U2)(t,"textAlign",D>0?"left":"right");break;case"bottom":m&&(t.x=(U+se)/2),t.y=Y,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline",D>0?"bottom":"top");break;case"middle":m&&(t.x=(U+se)/2),t.y=(B+Y)/2,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline","middle");break;case"top":m&&(t.x=(U+se)/2),t.y=B,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline",D>0?"bottom":"top");break;default:break}},n}(Ao),G2=W2,M_=Math.PI/2,N3=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getLabelOffset=function(t){var s=this.getCoordinate(),l=0;if((0,E.hj)(t))l=t;else if((0,E.HD)(t)&&t.indexOf("%")!==-1){var f=s.getRadius();s.innerRadius>0&&(f=f*(1-s.innerRadius)),l=parseFloat(t)*.01*f}return l},n.prototype.getLabelItems=function(t){var s=i.prototype.getLabelItems.call(this,t),l=this.geometry.getYScale();return(0,E.UI)(s,function(f){if(f&&l){var d=l.scale((0,E.U2)(f.data,l.field));return(0,M.pi)((0,M.pi)({},f),{percent:d})}return f})},n.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l;if(t.labelEmit)l=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!s.isTransposed)l="center";else{var f=s.getCenter(),d=t.offset;Math.abs(t.x-f.x)<1?l="center":t.angle>Math.PI||t.angle<=0?l=d>0?"left":"right":l=d>0?"right":"left"}return l},n.prototype.getLabelPoint=function(t,s,l){var f=1,d,m=t.content[l];this.isToMiddle(s)?d=this.getMiddlePoint(s.points):(t.content.length===1&&l===0?l=1:l===0&&(f=-1),d=this.getArcPoint(s,l));var x=t.offset*f,T=this.getPointAngle(d),P=t.labelEmit,D=this.getCirclePoint(T,x,d,P);return D.r===0?D.content="":(D.content=m,D.angle=T,D.color=s.color),D.rotate=t.autoRotate?this.getLabelRotate(T,x,P):t.rotate,D.start={x:d.x,y:d.y},D},n.prototype.getArcPoint=function(t,s){return s===void 0&&(s=0),!(0,E.kJ)(t.x)&&!(0,E.kJ)(t.y)?{x:t.x,y:t.y}:{x:(0,E.kJ)(t.x)?t.x[s]:t.x,y:(0,E.kJ)(t.y)?t.y[s]:t.y}},n.prototype.getPointAngle=function(t){return Lp(this.getCoordinate(),t)},n.prototype.getCirclePoint=function(t,s,l,f){var d=this.getCoordinate(),m=d.getCenter(),x=Qh(d,l);if(x===0)return(0,M.pi)((0,M.pi)({},m),{r:x});var T=t;if(d.isTransposed&&x>s&&!f){var P=Math.asin(s/(2*x));T=t+P*2}else x=x+s;return{x:m.x+x*Math.cos(T),y:m.y+x*Math.sin(T),r:x}},n.prototype.getLabelRotate=function(t,s,l){var f=t+M_;return l&&(f-=M_),f&&(f>M_?f=f-Math.PI:f<-M_&&(f=f+Math.PI)),f},n.prototype.getMiddlePoint=function(t){var s=this.getCoordinate(),l=t.length,f={x:0,y:0};return(0,E.S6)(t,function(d){f.x+=d.x,f.y+=d.y}),f.x/=l,f.y/=l,f=s.convert(f),f},n.prototype.isToMiddle=function(t){return t.x.length>2},n}(Ao),$2=N3,z3=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return n.prototype.getDefaultLabelCfg=function(t,s){var l=i.prototype.getDefaultLabelCfg.call(this,t,s);return(0,E.b$)({},l,(0,E.U2)(this.geometry.theme,"pieLabels",{}))},n.prototype.getLabelOffset=function(t){return i.prototype.getLabelOffset.call(this,t)||0},n.prototype.getLabelRotate=function(t,s,l){var f;return s<0&&(f=t,f>Math.PI/2&&(f=f-Math.PI),f<-Math.PI/2&&(f=f+Math.PI)),f},n.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l=s.getCenter(),f;return t.angle<=Math.PI/2&&t.x>=l.x?f="left":f="right",t.offset<=0&&(f==="right"?f="left":f="right"),f},n.prototype.getArcPoint=function(t){return t},n.prototype.getPointAngle=function(t){var s=this.getCoordinate(),l={x:(0,E.kJ)(t.x)?t.x[0]:t.x,y:t.y[0]},f={x:(0,E.kJ)(t.x)?t.x[1]:t.x,y:t.y[1]},d,m=Lp(s,l);if(t.points&&t.points[0].y===t.points[1].y)d=m;else{var x=Lp(s,f);m>=x&&(x=x+Math.PI*2),d=m+(x-m)/2}return d},n.prototype.getCirclePoint=function(t,s){var l=this.getCoordinate(),f=l.getCenter(),d=l.getRadius()+s;return(0,M.pi)((0,M.pi)({},fs(f.x,f.y,d,t)),{angle:t,r:d})},n}($2),Wx=z3,X2=4;function Y2(i,n,t,s,l,f){var d,m,x=!0,T=s.start,P=s.end,D=Math.min(T.y,P.y),B=Math.abs(T.y-P.y),U,Y=0,se=Number.MIN_VALUE,xe=n.map(function(Or){return Or.y>Y&&(Y=Or.y),Or.y<se&&(se=Or.y),{size:t,targets:[Or.y-D]}});for(se-=D,Y-D>B&&(B=Y-D);x;)for(xe.forEach(function(Or){var Wr=(Math.min.apply(se,Or.targets)+Math.max.apply(se,Or.targets))/2;Or.pos=Math.min(Math.max(se,Wr-Or.size/2),B-Or.size)}),x=!1,U=xe.length;U--;)if(U>0){var Ee=xe[U-1],rt=xe[U];Ee.pos+Ee.size>rt.pos&&(Ee.size+=rt.size,Ee.targets=Ee.targets.concat(rt.targets),Ee.pos+Ee.size>B&&(Ee.pos=B-Ee.size),xe.splice(U,1),x=!0)}U=0,xe.forEach(function(Or){var Wr=D+t/2;Or.targets.forEach(function(){n[U].y=Or.pos+Wr,Wr+=t,U++})});var vt={};try{for(var xt=(0,M.XA)(i),Bt=xt.next();!Bt.done;Bt=xt.next()){var _r=Bt.value;vt[_r.get("id")]=_r}}catch(Or){d={error:Or}}finally{try{Bt&&!Bt.done&&(m=xt.return)&&m.call(xt)}finally{if(d)throw d.error}}n.forEach(function(Or){var Wr=Or.r*Or.r,gn=Math.pow(Math.abs(Or.y-l.y),2);if(Wr<gn)Or.x=l.x;else{var $r=Math.sqrt(Wr-gn);f?Or.x=l.x+$r:Or.x=l.x-$r}var zn=vt[Or.id];zn.attr("x",Or.x),zn.attr("y",Or.y);var li=(0,E.sE)(zn.getChildren(),function(zi){return zi.get("type")==="text"});li&&(li.attr("y",Or.y),li.attr("x",Or.x))})}function K2(i,n,t,s){if(!(!i.length||!n.length)){var l=i[0]?i[0].offset:0,f=n[0].get("coordinate"),d=f.getRadius(),m=f.getCenter();if(l>0){var x=14,T=d+l,P=T*2+x*2,D={start:f.start,end:f.end},B=[[],[]];i.forEach(function(U){U&&(U.textAlign==="right"?B[0].push(U):B[1].push(U))}),B.forEach(function(U,Y){var se=P/x;U.length>se&&(U.sort(function(xe,Ee){return Ee["..percent"]-xe["..percent"]}),U.splice(se,U.length-se)),U.sort(function(xe,Ee){return xe.y-Ee.y}),Y2(n,U,x,D,m,Y)})}(0,E.S6)(i,function(U){if(U&&U.labelLine){var Y=U.offset,se=U.angle,xe=fs(m.x,m.y,d,se),Ee=fs(m.x,m.y,d+Y/2,se),rt=U.x+(0,E.U2)(U,"offsetX",0),vt=U.y+(0,E.U2)(U,"offsetY",0),xt={x:rt-Math.cos(se)*X2,y:vt-Math.sin(se)*X2};(0,E.Kn)(U.labelLine)||(U.labelLine={}),U.labelLine.path=["M ".concat(xe.x),"".concat(xe.y," Q").concat(Ee.x),"".concat(Ee.y," ").concat(xt.x),xt.y].join(",")}})}}function q2(i,n,t){var s=i.filter(function(Y){return!Y.invisible});s.sort(function(Y,se){return Y.y-se.y});var l=!0,f=t.minY,d=t.maxY,m=Math.abs(f-d),x,T=0,P=Number.MIN_VALUE,D=s.map(function(Y){return Y.y>T&&(T=Y.y),Y.y<P&&(P=Y.y),{content:Y.content,size:n,targets:[Y.y-f],pos:null}});for(P-=f,T-f>m&&(m=T-f);l;)for(D.forEach(function(Y){var se=(Math.min.apply(P,Y.targets)+Math.max.apply(P,Y.targets))/2;Y.pos=Math.min(Math.max(P,se-Y.size/2),m-Y.size),Y.pos=Math.max(0,Y.pos)}),l=!1,x=D.length;x--;)if(x>0){var B=D[x-1],U=D[x];B.pos+B.size>U.pos&&(B.size+=U.size,B.targets=B.targets.concat(U.targets),B.pos+B.size>m&&(B.pos=m-B.size),D.splice(x,1),l=!0)}x=0,D.forEach(function(Y){var se=f+n/2;Y.targets.forEach(function(){s[x].y=Y.pos+se,se+=n,x++})})}var Q2=4;function U3(i,n){var t=n.getCenter(),s=n.getRadius();if(i&&i.labelLine){var l=i.angle,f=i.offset,d=fs(t.x,t.y,s,l),m=i.x+(0,E.U2)(i,"offsetX",0)*(Math.cos(l)>0?1:-1),x=i.y+(0,E.U2)(i,"offsetY",0)*(Math.sin(l)>0?1:-1),T={x:m-Math.cos(l)*Q2,y:x-Math.sin(l)*Q2},P=i.labelLine.smooth,D=[],B=T.x-t.x,U=T.y-t.y,Y=Math.atan(U/B);if(B<0&&(Y+=Math.PI),P===!1){(0,E.Kn)(i.labelLine)||(i.labelLine={});var se=0;(l<0&&l>-Math.PI/2||l>Math.PI*1.5)&&T.y>d.y&&(se=1),l>=0&&l<Math.PI/2&&T.y>d.y&&(se=1),l>=Math.PI/2&&l<Math.PI&&d.y>T.y&&(se=1),(l<-Math.PI/2||l>=Math.PI&&l<Math.PI*1.5)&&d.y>T.y&&(se=1);var xe=f/2>4?4:Math.max(f/2-1,0),Ee=fs(t.x,t.y,s+xe,l),rt=fs(t.x,t.y,s+f/2,Y),vt=0;D.push("M ".concat(d.x," ").concat(d.y)),D.push("L ".concat(Ee.x," ").concat(Ee.y)),D.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(vt," ").concat(se," ").concat(rt.x," ").concat(rt.y)),D.push("L ".concat(T.x," ").concat(T.y))}else{var Ee=fs(t.x,t.y,s+(f/2>4?4:Math.max(f/2-1,0)),l),xt=d.x<t.x?1:-1;D.push("M ".concat(T.x," ").concat(T.y));var Bt=(d.y-t.y)/(d.x-t.x),_r=(T.y-t.y)/(T.x-t.x);Math.abs(Bt-_r)>Math.pow(Math.E,-16)&&D.push.apply(D,["C",T.x+xt*4,T.y,2*Ee.x-d.x,2*Ee.y-d.y,d.x,d.y]),D.push("L ".concat(d.x," ").concat(d.y))}i.labelLine.path=D.join(" ")}}function Z3(i,n,t,s){var l,f,d=(0,E.hX)(i,function(Wr){return!(0,E.UM)(Wr)}),m=n[0]&&n[0].get("coordinate");if(m){var x=m.getCenter(),T=m.getRadius(),P={};try{for(var D=(0,M.XA)(n),B=D.next();!B.done;B=D.next()){var U=B.value;P[U.get("id")]=U}}catch(Wr){l={error:Wr}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(l)throw l.error}}var Y=(0,E.U2)(d[0],"labelHeight",14),se=(0,E.U2)(d[0],"offset",0);if(!(se<=0)){var xe="left",Ee="right",rt=(0,E.vM)(d,function(Wr){return Wr.x<x.x?xe:Ee}),vt=m.start,xt=m.end,Bt=Math.min((T+se+Y)*2,m.getHeight()),_r=Bt/2,Or={minX:vt.x,maxX:xt.x,minY:x.y-_r,maxY:x.y+_r};(0,E.S6)(rt,function(Wr,gn){var $r=Math.floor(Bt/Y);Wr.length>$r&&(Wr.sort(function(zn,li){return li.percent-zn.percent}),(0,E.S6)(Wr,function(zn,li){li+1>$r&&(P[zn.id].set("visible",!1),zn.invisible=!0)})),q2(Wr,Y,Or)}),(0,E.S6)(rt,function(Wr,gn){(0,E.S6)(Wr,function($r){var zn=gn===Ee,li=P[$r.id],zi=li.getChildByIndex(0);if(zi){var ia=T+se,qa=$r.y-x.y,Hn=Math.pow(ia,2),Di=Math.pow(qa,2),Zi=Hn-Di>0?Hn-Di:0,yi=Math.sqrt(Zi),Vi=Math.abs(Math.cos($r.angle)*ia);zn?$r.x=x.x+Math.max(yi,Vi):$r.x=x.x-Math.max(yi,Vi)}zi&&(zi.attr("y",$r.y),zi.attr("x",$r.x)),U3($r,m)})})}}}var Gx=4,V3=4,$x=4;function J2(i,n,t){var s=n.getCenter(),l=n.getRadius(),f={x:i.x-(t?$x:-$x),y:i.y},d=fs(s.x,s.y,l+Gx,i.angle),m={x:f.x,y:f.y},x={x:d.x,y:d.y},T=fs(s.x,s.y,l,i.angle),P="";if(f.y!==d.y){var D=t?4:-4;m.y=f.y,i.angle<0&&i.angle>=-Math.PI/2&&(m.x=Math.max(d.x,f.x-D),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-D))),i.angle>0&&i.angle<Math.PI/2&&(m.x=Math.max(d.x,f.x-D),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-D))),i.angle>Math.PI/2&&(m.x=Math.min(d.x,f.x-D),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-D))),i.angle<-Math.PI/2&&(m.x=Math.min(d.x,f.x-D),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-D)))}P=["M ".concat(f.x,",").concat(f.y),"L ".concat(m.x,",").concat(m.y),"L ".concat(x.x,",").concat(x.y),"L ".concat(d.x,",").concat(d.y),"L ".concat(T.x,",").concat(T.y)].join(" "),i.labelLine=(0,E.b$)({},i.labelLine,{path:P})}function H3(i,n,t,s){var l,f,d=n[0]&&n[0].get("coordinate");if(d){var m=d.getCenter(),x=d.getRadius(),T={};try{for(var P=(0,M.XA)(n),D=P.next();!D.done;D=P.next()){var B=D.value;T[B.get("id")]=B}}catch(Wr){l={error:Wr}}finally{try{D&&!D.done&&(f=P.return)&&f.call(P)}finally{if(l)throw l.error}}var U=(0,E.U2)(i[0],"labelHeight",14),Y=Math.max((0,E.U2)(i[0],"offset",0),Gx);(0,E.S6)(i,function(Wr){if(Wr){var gn=(0,E.U2)(T,[Wr.id]);if(gn){var $r=Wr.x>m.x||Wr.x===m.x&&Wr.y>m.y,zn=(0,E.UM)(Wr.offsetX)?V3:Wr.offsetX,li=fs(m.x,m.y,x+Gx,Wr.angle),zi=Y+zn;Wr.x=m.x+($r?1:-1)*(x+zi),Wr.y=li.y}}});var se=d.start,xe=d.end,Ee="left",rt="right",vt=(0,E.vM)(i,function(Wr){return Wr.x<m.x?Ee:rt}),xt=(x+Y)*2+U;(0,E.S6)(vt,function(Wr){var gn=Wr.length*U;gn>xt&&(xt=Math.min(gn,Math.abs(se.y-xe.y)))});var Bt={minX:se.x,maxX:xe.x,minY:m.y-xt/2,maxY:m.y+xt/2};(0,E.S6)(vt,function(Wr,gn){var $r=xt/U;Wr.length>$r&&(Wr.sort(function(zn,li){return li.percent-zn.percent}),(0,E.S6)(Wr,function(zn,li){li>$r&&(T[zn.id].set("visible",!1),zn.invisible=!0)})),q2(Wr,U,Bt)});var _r=Bt.minY,Or=Bt.maxY;(0,E.S6)(vt,function(Wr,gn){var $r=gn===rt;(0,E.S6)(Wr,function(zn){var li=(0,E.U2)(T,zn&&[zn.id]);if(li){if(zn.y<_r||zn.y>Or){li.set("visible",!1);return}var zi=li.getChildByIndex(0),ia=zi.getCanvasBBox(),qa={x:$r?ia.x:ia.maxX,y:ia.y+ia.height/2};Zu(zi,zn.x-qa.x,zn.y-qa.y),zn.labelLine&&J2(zn,d,$r)}})})}}function j3(i,n,t,s){(0,E.S6)(n,function(l){var f=s.minX,d=s.minY,m=s.maxX,x=s.maxY,T=l.getCanvasBBox(),P=T.minX,D=T.minY,B=T.maxX,U=T.maxY,Y=T.x,se=T.y,xe=T.width,Ee=T.height,rt=Y,vt=se;(P<f||B<f)&&(rt=f),(D<d||U<d)&&(vt=d),P>m?rt=m-xe:B>m&&(rt=rt-(B-m)),D>x?vt=x-Ee:U>x&&(vt=vt-(U-x)),(rt!==Y||vt!==se)&&Zu(l,rt-Y,vt-se)})}function W3(i,n,t,s){(0,E.S6)(n,function(l,f){var d=l.getCanvasBBox(),m=t[f].getBBox();(d.minX<m.minX||d.minY<m.minY||d.maxX>m.maxX||d.maxY>m.maxY)&&l.remove(!0)})}var G3=100,ew=function(){function i(n){n===void 0&&(n={}),this.bitmap={};var t=n.xGap,s=t===void 0?1:t,l=n.yGap,f=l===void 0?8:l;this.xGap=s,this.yGap=f}return i.prototype.hasGap=function(n){for(var t=!0,s=this.bitmap,l=Math.round(n.minX),f=Math.round(n.maxX),d=Math.round(n.minY),m=Math.round(n.maxY),x=l;x<=f;x+=1){if(!s[x]){s[x]={};continue}if(x===l||x===f){for(var T=d;T<=m;T++)if(s[x][T]){t=!1;break}}else if(s[x][d]||s[x][m]){t=!1;break}}return t},i.prototype.fillGap=function(n){for(var t=this.bitmap,s=Math.round(n.minX),l=Math.round(n.maxX),f=Math.round(n.minY),d=Math.round(n.maxY),m=s;m<=l;m+=1)t[m]||(t[m]={});for(var m=s;m<=l;m+=this.xGap){for(var x=f;x<=d;x+=this.yGap)t[m][x]=!0;t[m][d]=!0}if(this.yGap!==1)for(var m=f;m<=d;m+=1)t[s][m]=!0,t[l][m]=!0;if(this.xGap!==1)for(var m=s;m<=l;m+=1)t[m][f]=!0,t[m][d]=!0},i.prototype.destroy=function(){this.bitmap={}},i}();function $3(i,n,t){t===void 0&&(t=G3);var s=-1,l=i.attr(),f=l.x,d=l.y,m=i.getCanvasBBox(),x=Math.sqrt(m.width*m.width+m.height*m.height),T,P=-s,D=0,B=0,U=function(Ee){var rt=Ee*.1;return[rt*Math.cos(rt),rt*Math.sin(rt)]};if(n.hasGap(m))return n.fillGap(m),!0;for(var Y=!1,se=0,xe={};Math.min(Math.abs(D),Math.abs(B))<x&&se<t;)if(T=U(P+=s),D=~~T[0],B=~~T[1],!(!D&&!B||xe["".concat(D,"-").concat(B)])&&(i.attr({x:f+D,y:d+B}),D+B<0&&i.attr("textAlign","right"),se++,n.hasGap(i.getCanvasBBox()))){n.fillGap(i.getCanvasBBox()),Y=!0,xe["".concat(D,"-").concat(B)]=!0;break}return Y}function tw(i,n,t,s){var l=i.getCanvasBBox(),f=l.width,d=l.height,m={x:n,y:t,textAlign:"center"};switch(s){case 0:m.y-=d+1,m.x+=1,m.textAlign="left";break;case 1:m.y-=d+1,m.x-=1,m.textAlign="right";break;case 2:m.y+=d+1,m.x-=1,m.textAlign="right";break;case 3:m.y+=d+1,m.x+=1,m.textAlign="left";break;case 5:m.y-=d*2+2;break;case 6:m.y+=d*2+2;break;case 7:m.x+=f+1,m.textAlign="left";break;case 8:m.x-=f+1,m.textAlign="right";break;default:break}return i.attr(m),i.getCanvasBBox()}function rw(i,n,t,s){var l=new ew;(0,E.S6)(n,function(f){var d=f.find(function(m){return m.get("type")==="text"});$3(d,l)||f.remove(!0)}),l.destroy()}function X3(i,n,t,s){var l=new ew;(0,E.S6)(n,function(f){for(var d=f.find(function(U){return U.get("type")==="text"}),m=d.attr(),x=m.x,T=m.y,P=!1,D=0;D<=8;D++){var B=tw(d,x,T,D);if(l.hasGap(B)){l.fillGap(B),P=!0;break}}P||f.remove(!0)}),l.destroy()}function Y3(i,n){return(i[0]||0)*(n[0]||0)+(i[1]||0)*(n[1]||0)+(i[2]||0)*(n[2]||0)}function nw(i){if(i.length>4)return[];var n=function(l,f){return[f.x-l.x,f.y-l.y]},t=n(i[0],i[1]),s=n(i[1],i[2]);return[t,s]}function R_(i,n,t){n===void 0&&(n=0),t===void 0&&(t={x:0,y:0});var s=i.x,l=i.y;return{x:(s-t.x)*Math.cos(-n)+(l-t.y)*Math.sin(-n)+t.x,y:(t.x-s)*Math.sin(-n)+(l-t.y)*Math.cos(-n)+t.y}}function iw(i){var n=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],t=i.rotation;return t?[R_(n[0],t,n[0]),R_(n[1],t,n[0]),R_(n[2],t,n[0]),R_(n[3],t,n[0])]:n}function Xx(i,n){if(i.length>4)return{min:0,max:0};var t=[];return i.forEach(function(s){t.push(Y3([s.x,s.y],n))}),{min:Math.min.apply(Math,(0,M.ev)([],(0,M.CR)(t),!1)),max:Math.max.apply(Math,(0,M.ev)([],(0,M.CR)(t),!1))}}function aw(i,n){return i.max>n.min&&i.min<n.max}function K3(i){return typeof i=="number"&&!Number.isNaN(i)&&i!==1/0&&i!==-1/0}function ow(i){return["x","y","width","height"].every(function(n){return K3(i[n])})}function q3(i,n,t){return t===void 0&&(t=0),!(n.x>i.x+i.width+t||n.x+n.width<i.x-t||n.y>i.y+i.height+t||n.y+n.height<i.y-t)}function Q3(i,n,t){if(t===void 0&&(t=0),!ow(i)||!ow(n))return!1;if(!i.rotation&&!n.rotation)return q3(i,n,t);for(var s=iw(i),l=iw(n),f=nw(s).concat(nw(l)),d=0;d<f.length;d++){var m=f[d],x=Xx(s,m),T=Xx(l,m);if(!aw(x,T))return!1}return!0}var J3=function(){function i(n){var t=this;this.queue=[],this.worker=new Worker(n),this.worker.onmessage=function(s){var l;(l=t.queue.shift())===null||l===void 0||l.resolve(s)},this.worker.onmessageerror=function(s){var l;console.warn("[AntV G2] Web worker is not available"),(l=t.queue.shift())===null||l===void 0||l.reject(s)}}return i.prototype.post=function(n,t){var s=this;return new Promise(function(l,f){s.queue.push({resolve:l,reject:f});try{s.worker.postMessage(n)}catch(d){console.warn("[AntV G2] Web worker is not available"),(0,E.mf)(t)&&t()}})},i.prototype.destroy=function(){this.worker.terminate()},i}();function sw(i){if(typeof window!="undefined"){var n;try{n=new Blob([i.toString()],{type:"application/javascript"})}catch(t){n=new window.BlobBuilder,n.append(i.toString()),n=n.getBlob()}return new J3(URL.createObjectURL(n))}}var uw=function(i){function n(){function T(vt,xt){return(vt[0]||0)*(xt[0]||0)+(vt[1]||0)*(xt[1]||0)+(vt[2]||0)*(xt[2]||0)}function P(vt){if(vt.length>4)return[];var xt=function(Or,Wr){return[Wr.x-Or.x,Wr.y-Or.y]},Bt=xt(vt[0],vt[1]),_r=xt(vt[1],vt[2]);return[Bt,_r]}function D(vt,xt,Bt){xt===void 0&&(xt=0),Bt===void 0&&(Bt={x:0,y:0});var _r=vt.x,Or=vt.y;return{x:(_r-Bt.x)*Math.cos(-xt)+(Or-Bt.y)*Math.sin(-xt)+Bt.x,y:(Bt.x-_r)*Math.sin(-xt)+(Or-Bt.y)*Math.cos(-xt)+Bt.y}}function B(vt){var xt=[{x:vt.x,y:vt.y},{x:vt.x+vt.width,y:vt.y},{x:vt.x+vt.width,y:vt.y+vt.height},{x:vt.x,y:vt.y+vt.height}],Bt=vt.rotation;return Bt?[D(xt[0],Bt,xt[0]),D(xt[1],Bt,xt[0]),D(xt[2],Bt,xt[0]),D(xt[3],Bt,xt[0])]:xt}function U(vt,xt){if(vt.length>4)return{min:0,max:0};var Bt=[];return vt.forEach(function(_r){Bt.push(T([_r.x,_r.y],xt))}),{min:Math.min.apply(null,Bt),max:Math.max.apply(null,Bt)}}function Y(vt,xt){return vt.max>xt.min&&vt.min<xt.max}function se(vt){return typeof vt=="number"&&!Number.isNaN(vt)&&vt!==1/0&&vt!==-1/0}function xe(vt){return["x","y","width","height"].every(function(xt){return se(vt[xt])})}function Ee(vt,xt,Bt){return Bt===void 0&&(Bt=0),!(xt.x>vt.x+vt.width+Bt||xt.x+xt.width<vt.x-Bt||xt.y>vt.y+vt.height+Bt||xt.y+xt.height<vt.y-Bt)}function rt(vt,xt,Bt){if(Bt===void 0&&(Bt=0),!xe(vt)||!xe(xt))return!1;if(!vt.rotation&&!xt.rotation)return Ee(vt,xt,Bt);for(var _r=B(vt),Or=B(xt),Wr=P(_r).concat(P(Or)),gn=0;gn<Wr.length;gn++){var $r=Wr[gn],zn=U(_r,$r),li=U(Or,$r);if(!Y(zn,li))return!1}return!0}return{intersect:rt}}var t=n().intersect;function s(T){for(var P=T.slice(),D=0;D<P.length;D++){var B=P[D];if(B.visible)for(var U=D+1;U<P.length;U++){var Y=P[U];B!==Y&&Y.visible&&t(B,Y)&&(Y.visible=!1)}}return P}var l={"hide-overlap":s};try{var f=JSON.parse(i.data);if(!f||!f.type||!l[f.type])return;var d=f.type,m=f.items,x=l[d](m);self.postMessage(x)}catch(T){throw T}},eI=`
   self.onmessage = `.concat(uw.toString(),`
`),Yx=function(i){for(var n=i.slice(),t=0;t<n.length;t++){var s=n[t];if(s.visible)for(var l=t+1;l<n.length;l++){var f=n[l];s!==f&&f.visible&&Q3(s,f)&&(f.visible=!1)}}return n},Kx=new Map,lw=sw(eI);function tI(i,n,t,s){return(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,T;return(0,M.Jh)(this,function(P){switch(P.label){case 0:return l=n.map(function(D,B){return(0,M.pi)((0,M.pi)({},Ro(D,i[B],(0,E.U2)(i[B],"background.padding"))),{visible:!0})}),f=JSON.stringify(l),d=function(D){return Kx.set(f,D),(0,E.S6)(D,function(B,U){var Y=B.visible,se=n[U];Y?se==null||se.show():se==null||se.hide()}),D},Kx.get(f)?(d(Kx.get(f)),[3,7]):[3,1];case 1:if(!lw)return[3,6];P.label=2;case 2:return P.trys.push([2,4,,5]),m=JSON.stringify({type:"hide-overlap",items:l}),[4,lw.post(m,function(){return d(Yx(l))})];case 3:return x=P.sent(),d(Array.isArray(x.data)?x.data:[]),[3,5];case 4:return T=P.sent(),console.error(T),d(Yx(l)),[3,5];case 5:return[3,7];case 6:d(Yx(l)),P.label=7;case 7:return[2]}})})}var qx={"#5B8FF9":!0},cw=function(i){var n=Sa.toRGB(i).toUpperCase();if(qx[n])return qx[n];var t=(0,M.CR)(Sa.rgb2arr(n),3),s=t[0],l=t[1],f=t[2],d=(s*299+l*587+f*114)/1e3<128;return d};function rI(i,n,t){if(t.length!==0){var s=t[0].get("element"),l=s.geometry.theme,f=l.labels||{},d=f.fillColorLight,m=f.fillColorDark;t.forEach(function(x,T){var P=n[T],D=P.find(function(Ee){return Ee.get("type")==="text"}),B=Xo.fromObject(x.getBBox()),U=Xo.fromObject(D.getCanvasBBox()),Y=!B.contains(U),se=x.attr("fill"),xe=cw(se);Y?D.attr(l.overflowLabels.style):xe?d&&D.attr("fill",d):m&&D.attr("fill",m)})}}function nI(i,n,t){var s=i.coordinate,l=Ka(n),f=Xo.fromObject(l.getCanvasBBox()),d=Xo.fromObject(t.getBBox());return s.isTransposed?d.height>=f.height:d.width>=f.width}function iI(i,n,t){var s=!!i.getAdjust("stack");return s||n.every(function(l,f){var d=t[f];return nI(i,l,d)})}function aI(i,n,t){var s=i.coordinate,l=Xo.fromObject(t.getBBox()),f=Ka(n);s.isTransposed?f.attr({x:l.minX+l.width/2,textAlign:"center"}):f.attr({y:l.minY+l.height/2,textBaseline:"middle"})}function oI(i,n,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=iI(f,n,t);d&&t.forEach(function(m,x){var T=n[x];aI(f,T,m)})}}}function fw(i){var n=500,t=[],s=Math.max(Math.floor(i.length/n),1);return(0,E.S6)(i,function(l,f){f%s===0?t.push(l):l.set("visible",!1)}),t}function hw(i,n,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=fw(n),m=(0,M.CR)(f.getXYFields(),1),x=m[0],T=[],P=[],D=(0,E.vM)(d,function(xe){return xe.get("data")[x]}),B=(0,E.jj)((0,E.UI)(d,function(xe){return xe.get("data")[x]})),U;d.forEach(function(xe){xe.set("visible",!0)});var Y=function(xe){xe&&(xe.length&&P.push(xe.pop()),P.push.apply(P,(0,M.ev)([],(0,M.CR)(xe),!1)))};for((0,E.dp)(B)>0&&(U=B.shift(),Y(D[U])),(0,E.dp)(B)>0&&(U=B.pop(),Y(D[U])),(0,E.S6)(B.reverse(),function(xe){Y(D[xe])});P.length>0;){var se=P.shift();se.get("visible")&&(bo(se,T)?se.set("visible",!1):T.push(se))}}}}function sI(i,n){var t=i.getXYFields()[1],s=[],l=n.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,M.ev)([],(0,M.CR)(l),!1)),s}function pw(i,n,t){return i.some(function(s){return t(s,n)})}function uI(i,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(i.x+i.width+t,n.x+n.width+t)-Math.max(i.x-t,n.x-t)),l=Math.max(0,Math.min(i.y+i.height+t,n.y+n.height+t)-Math.max(i.y-t,n.y-t));return s*l}function dw(i,n){return pw(i,n,function(t,s){var l=Ka(t),f=Ka(s);return uI(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function lI(i,n,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||x.type!=="point")){var T=(0,M.CR)(x.getXYFields(),2),P=T[0],D=T[1],B=(0,E.vM)(n,function(se){return se.get("data")[P]}),U=[],Y=l&&l.offset||((d=i[0])===null||d===void 0?void 0:d.offset)||12;(0,E.UI)((0,E.XP)(B).reverse(),function(se){for(var xe=sI(x,B[se]);xe.length;){var Ee=xe.shift(),rt=Ka(Ee);if(pw(U,Ee,function(Bt,_r){return Bt.get("data")[P]===_r.get("data")[P]&&Bt.get("data")[D]===_r.get("data")[D]})){rt.set("visible",!1);continue}var vt=dw(U,Ee),xt=!1;if(vt&&(rt.attr("y",rt.attr("y")+2*Y),xt=dw(U,Ee)),xt){rt.set("visible",!1);continue}U.push(Ee)}})}}}function vw(i,n){var t=i.getXYFields()[1],s=[],l=n.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,M.ev)([],(0,M.CR)(l),!1)),s}function Qx(i,n,t){return i.some(function(s){return t(s,n)})}function cI(i,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(i.x+i.width+t,n.x+n.width+t)-Math.max(i.x-t,n.x-t)),l=Math.max(0,Math.min(i.y+i.height+t,n.y+n.height+t)-Math.max(i.y-t,n.y-t));return s*l}function gw(i,n){return Qx(i,n,function(t,s){var l=Ka(t),f=Ka(s);return cI(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function fI(i,n,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||["path","line","area"].indexOf(x.type)<0)){var T=(0,M.CR)(x.getXYFields(),2),P=T[0],D=T[1],B=(0,E.vM)(n,function(se){return se.get("data")[P]}),U=[],Y=l&&l.offset||((d=i[0])===null||d===void 0?void 0:d.offset)||12;(0,E.UI)((0,E.XP)(B).reverse(),function(se){for(var xe=vw(x,B[se]);xe.length;){var Ee=xe.shift(),rt=Ka(Ee);if(Qx(U,Ee,function(Bt,_r){return Bt.get("data")[P]===_r.get("data")[P]&&Bt.get("data")[D]===_r.get("data")[D]})){rt.set("visible",!1);continue}var vt=gw(U,Ee),xt=!1;if(vt&&(rt.attr("y",rt.attr("y")+2*Y),xt=gw(U,Ee)),xt){rt.set("visible",!1);continue}U.push(Ee)}})}}}var Jx;function hI(){return Jx||(Jx=document.createElement("canvas").getContext("2d")),Jx}var ty=(0,E.HP)(function(i,n){n===void 0&&(n={});var t=n.fontSize,s=n.fontFamily,l=n.fontWeight,f=n.fontStyle,d=n.fontVariant,m=hI();return m.font=[f,d,l,"".concat(t,"px"),s].join(" "),m.measureText((0,E.HD)(i)?i:"").width},function(i,n){return n===void 0&&(n={}),(0,M.ev)([i],(0,M.CR)((0,E.VO)(n)),!1).join("")}),mw=function(i,n,t){var s=16,l=ty("...",t),f;(0,E.HD)(i)?f=i:f=(0,E.BB)(i);var d=n,m=[],x,T;if(ty(i,t)<=n)return i;for(;x=f.substr(0,s),T=ty(x,t),!(T+l>d&&T>d);)if(m.push(x),d-=T,f=f.substr(s),!f)return m.join("");for(;x=f.substr(0,1),T=ty(x,t),!(T+l>d);)if(m.push(x),d-=T,f=f.substr(1),!f)return m.join("");return"".concat(m.join(""),"...")};function yw(i,n,t,s,l){if(!(n.length<=0)){var f=(l==null?void 0:l.direction)||["top","right","bottom","left"],d=(l==null?void 0:l.action)||"translate",m=(l==null?void 0:l.margin)||0,x=n[0].get("coordinate");if(x){var T=yg(x,m),P=T.minX,D=T.minY,B=T.maxX,U=T.maxY;(0,E.S6)(n,function(Y){var se=Y.getCanvasBBox(),xe=se.minX,Ee=se.minY,rt=se.maxX,vt=se.maxY,xt=se.x,Bt=se.y,_r=se.width,Or=se.height,Wr=xt,gn=Bt;if(f.indexOf("left")>=0&&(xe<P||rt<P)&&(Wr=P),f.indexOf("top")>=0&&(Ee<D||vt<D)&&(gn=D),f.indexOf("right")>=0&&(xe>B?Wr=B-_r:rt>B&&(Wr=Wr-(rt-B))),f.indexOf("bottom")>=0&&(Ee>U?gn=U-Or:vt>U&&(gn=gn-(vt-U))),Wr!==xt||gn!==Bt){var $r=Wr-xt;if(d==="translate")Zu(Y,$r,gn-Bt);else if(d==="ellipsis"){var zn=Y.findAll(function(li){return li.get("type")==="text"});zn.forEach(function(li){var zi=(0,E.ei)(li.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),ia=li.getCanvasBBox(),qa=mw(li.attr("text"),ia.width-Math.abs($r),zi);li.attr("text",qa)})}else Y.hide()}})}}}function _w(i,n,t){var s={fillOpacity:(0,E.UM)(i.attr("fillOpacity"))?1:i.attr("fillOpacity"),strokeOpacity:(0,E.UM)(i.attr("strokeOpacity"))?1:i.attr("strokeOpacity"),opacity:(0,E.UM)(i.attr("opacity"))?1:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),i.animate(s,n)}function Vm(i,n,t){var s={fillOpacity:0,strokeOpacity:0,opacity:0},l=n.easing,f=n.duration,d=n.delay;i.animate(s,f,l,function(){i.remove(!0)},d)}function xw(i,n,t){var s,l=(0,M.CR)(n,2),f=l[0],d=l[1];return i.applyToMatrix([f,d,1]),t==="x"?(i.setMatrix(vo.vs(i.getMatrix(),[["t",-f,-d],["s",.01,1],["t",f,d]])),s=vo.vs(i.getMatrix(),[["t",-f,-d],["s",100,1],["t",f,d]])):t==="y"?(i.setMatrix(vo.vs(i.getMatrix(),[["t",-f,-d],["s",1,.01],["t",f,d]])),s=vo.vs(i.getMatrix(),[["t",-f,-d],["s",1,100],["t",f,d]])):t==="xy"&&(i.setMatrix(vo.vs(i.getMatrix(),[["t",-f,-d],["s",.01,.01],["t",f,d]])),s=vo.vs(i.getMatrix(),[["t",-f,-d],["s",100,100],["t",f,d]])),s}function eb(i,n,t,s,l){var f=t.start,d=t.end,m=t.getWidth(),x=t.getHeight(),T,P;l==="y"?(T=f.x+m/2,P=s.y<f.y?s.y:f.y):l==="x"?(T=s.x>f.x?s.x:f.x,P=f.y+x/2):l==="xy"&&(t.isPolar?(T=t.getCenter().x,P=t.getCenter().y):(T=(f.x+d.x)/2,P=(f.y+d.y)/2));var D=xw(i,[T,P],l);i.animate({matrix:D},n)}function bw(i,n,t){var s=t.coordinate,l=t.minYPoint;eb(i,n,s,l,"x")}function Sw(i,n,t){var s=t.coordinate,l=t.minYPoint;eb(i,n,s,l,"y")}function pI(i,n,t){var s=t.coordinate,l=t.minYPoint;eb(i,n,s,l,"xy")}function dI(i,n,t){var s=i.getTotalLength();i.attr("lineDash",[s]),i.animate(function(l){return{lineDashOffset:(1-l)*s}},n)}function vI(i,n,t){var s=t.toAttrs,l=s.x,f=s.y;delete s.x,delete s.y,i.attr(s),i.animate({x:l,y:f},n)}function Ew(i,n,t){var s=i.getBBox(),l=i.get("origin").mappingData,f=l.points,d=f[0].y-f[1].y>0?s.maxX:s.minX,m=(s.minY+s.maxY)/2;i.applyToMatrix([d,m,1]);var x=vo.vs(i.getMatrix(),[["t",-d,-m],["s",.01,1],["t",d,m]]);i.setMatrix(x),i.animate({matrix:vo.vs(i.getMatrix(),[["t",-d,-m],["s",100,1],["t",d,m]])},n)}function ww(i,n,t){var s=i.getBBox(),l=i.get("origin").mappingData,f=(s.minX+s.maxX)/2,d=l.points,m=d[0].y-d[1].y<=0?s.maxY:s.minY;i.applyToMatrix([f,m,1]);var x=vo.vs(i.getMatrix(),[["t",-f,-m],["s",1,.01],["t",f,m]]);i.setMatrix(x),i.animate({matrix:vo.vs(i.getMatrix(),[["t",-f,-m],["s",1,100],["t",f,m]])},n)}function tb(i,n){var t,s=xd(i,n),l=s.startAngle,f=s.endAngle;return!(0,E.vQ)(l,-Math.PI*.5)&&l<-Math.PI*.5&&(l+=Math.PI*2),!(0,E.vQ)(f,-Math.PI*.5)&&f<-Math.PI*.5&&(f+=Math.PI*2),n[5]===0&&(t=(0,M.CR)([f,l],2),l=t[0],f=t[1]),(0,E.vQ)(l,Math.PI*1.5)&&(l=Math.PI*-.5),(0,E.vQ)(f,Math.PI*-.5)&&!(0,E.vQ)(l,f)&&(f=Math.PI*1.5),{startAngle:l,endAngle:f}}function I_(i){var n;return i[0]==="M"||i[0]==="L"?n=[i[1],i[2]]:(i[0]==="a"||i[0]==="A"||i[0]==="C")&&(n=[i[i.length-2],i[i.length-1]]),n}function rb(i){var n,t,s,l=i.filter(function(vt){return vt[0]==="A"||vt[0]==="a"});if(l.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var f=l[0],d=l.length>1?l[1]:l[0],m=i.indexOf(f),x=i.indexOf(d),T=I_(i[m-1]),P=I_(i[x-1]),D=tb(T,f),B=D.startAngle,U=D.endAngle,Y=tb(P,d),se=Y.startAngle,xe=Y.endAngle;(0,E.vQ)(B,se)&&(0,E.vQ)(U,xe)?(t=B,s=U):(t=Math.min(B,se),s=Math.max(U,xe));var Ee=f[1],rt=l[l.length-1][1];return Ee<rt?(n=(0,M.CR)([rt,Ee],2),Ee=n[0],rt=n[1]):Ee===rt&&(rt=0),{startAngle:t,endAngle:s,radius:Ee,innerRadius:rt}}function gI(i,n,t){var s=t.toAttrs,l=t.coordinate,f=s.path||[],d=f.map(function(rt){return rt[0]});if(!(f.length<1)){var m=rb(f),x=m.startAngle,T=m.endAngle,P=m.radius,D=m.innerRadius,B=rb(i.attr("path")),U=B.startAngle,Y=B.endAngle,se=l.getCenter(),xe=x-U,Ee=T-Y;if(xe===0&&Ee===0){i.attr("path",f);return}i.animate(function(rt){var vt=U+rt*xe,xt=Y+rt*Ee;return(0,M.pi)((0,M.pi)({},s),{path:(0,E.Xy)(d,["M","A","A","Z"])?Zf(se.x,se.y,P,vt,xt):yh(se.x,se.y,P,vt,xt,D)})},(0,M.pi)((0,M.pi)({},n),{callback:function(){i.attr("path",f),(0,E.mf)(n.callback)&&n.callback()}}))}}function mI(i,n,t){var s=Yd(t.coordinate,20),l=s.type,f=s.startState,d=s.endState,m=i.setClip({type:l,attrs:f});t.toAttrs&&i.attr(t.toAttrs),m.animate(d,(0,M.pi)((0,M.pi)({},n),{callback:function(){i&&!i.get("destroyed")&&i.set("clipShape",null),m.remove(!0),(0,E.mf)(n.callback)&&n.callback()}}))}function nb(i,n,t){if(i.isGroup())(0,E.S6)(i.getChildren(),function(m){nb(m,n,t)});else{var s=i.getBBox(),l=(s.minX+s.maxX)/2,f=(s.minY+s.maxY)/2;if(i.applyToMatrix([l,f,1]),t==="zoomIn"){var d=vo.vs(i.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]]);i.setMatrix(d),i.animate({matrix:vo.vs(i.getMatrix(),[["t",-l,-f],["s",100,100],["t",l,f]])},n)}else i.animate({matrix:vo.vs(i.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]])},(0,M.pi)((0,M.pi)({},n),{callback:function(){i.remove(!0),(0,E.mf)(n.callback)&&n.callback()}}))}}function Cw(i,n,t){nb(i,n,"zoomIn")}function yI(i,n,t){nb(i,n,"zoomOut")}function Cd(i){return[be.TOP,be.BOTTOM].includes(i)?{offsetX:0,offsetY:i===be.TOP?-8:8,style:{textAlign:"center",textBaseline:i===be.TOP?"bottom":"top"}}:[be.LEFT,be.RIGHT].includes(i)?{offsetX:i===be.LEFT?-8:8,offsetY:0,style:{textAlign:i===be.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function ib(i,n,t){return{x:i.x+n*Math.cos(t),y:i.y+n*Math.sin(t)}}var _I=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.getRegion=function(t,s){var l=.5,f={x:.5,y:.5},d=Math.PI*2/t,m=-1*Math.PI/2+d*s,x=l/(1+1/Math.sin(d/2)),T=ib(f,l-x,m),P=Math.PI*5/4,D=Math.PI*1/4;return{start:ib(T,x,P),end:ib(T,x,D)}},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){var s=this,l=this.cfg,f=l.fields,d=l.type,m=(0,M.CR)(f,1),x=m[0];if(!x)throw new Error("No `fields` specified!");var T=this.getFieldValues(t,x),P=T.length,D=[];return T.forEach(function(B,U){var Y=[{field:x,value:B,values:T}],se=(0,E.hX)(t,s.getFacetDataFilter(Y)),xe={type:d,data:se,region:s.getRegion(P,U),columnValue:B,columnField:x,columnIndex:U,columnValuesLength:P,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};D.push(xe)}),D},n.prototype.getXAxisOption=function(t,s,l,f){return l},n.prototype.getYAxisOption=function(t,s,l,f){return l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},Cd(be.TOP),t.cfg.title);f.annotation().text(m)})},n}(Vn),ry=_I,Tw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){var s=this,l=this.cfg.fields,f=this.cfg.cols,d=(0,M.CR)(l,1),m=d[0];if(!m)throw new Error("No `fields` specified!");var x=this.getFieldValues(t,m),T=x.length;f=f||T;var P=this.getPageCount(T,f),D=[];return x.forEach(function(B,U){var Y=s.getRowCol(U,f),se=Y.row,xe=Y.col,Ee=[{field:m,value:B,values:x}],rt=(0,E.hX)(t,s.getFacetDataFilter(Ee)),vt={type:s.cfg.type,data:rt,region:s.getRegion(P,f,xe,se),columnValue:B,rowValue:B,columnField:m,rowField:null,columnIndex:xe,rowIndex:se,columnValuesLength:f,rowValuesLength:P,total:T};D.push(vt)}),D},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1&&f.columnValuesLength*f.rowIndex+f.columnIndex+1+f.columnValuesLength<=f.total?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},Cd(be.TOP),t.cfg.title);f.annotation().text(m)})},n.prototype.getPageCount=function(t,s){return Math.floor((t+s-1)/s)},n.prototype.getRowCol=function(t,s){var l=Math.floor(t/s),f=t%s;return{row:l,col:f}},n}(Vn),ab=Tw,hB=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){for(var s=this.cfg,l=s.fields,f=s.type,d=l.length,m=d,x=[],T=0;T<m;T++)for(var P=l[T],D=0;D<d;D++){var B=l[D],U={type:f,data:t,region:this.getRegion(d,m,T,D),columnValue:P,rowValue:B,columnField:P,rowField:B,columnIndex:T,rowIndex:D,columnValuesLength:m,rowValuesLength:d};x.push(U)}return x},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.rowValuesLength,T=s.columnValue,P=s.rowValue,D=s.view;if(d===0){var B=(0,E.U2)(t.cfg.columnTitle,"formatter"),U=(0,E.b$)({position:["50%","0%"],content:B?B(T):T},Cd(be.TOP),t.cfg.columnTitle);D.annotation().text(U)}if(f===m-1){var B=(0,E.U2)(t.cfg.rowTitle,"formatter"),U=(0,E.b$)({position:["100%","50%"],content:B?B(P):P},Cd(be.RIGHT),t.cfg.rowTitle);D.annotation().text(U)}})},n}(Vn),Xf=hB,xI=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this),transpose:!1})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.beforeEachView=function(t,s){this.cfg.transpose?s.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():s.rowIndex%2!==0&&t.coordinate().reflect("y")},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.generateFacets=function(t){var s=this,l=(0,M.CR)(this.cfg.fields,1),f=l[0],d=[],m=1,x=1,T=[""],P=[""],D,B;return this.cfg.transpose?(D=f,T=this.getFieldValues(t,D).slice(0,2),m=T.length):(B=f,P=this.getFieldValues(t,B).slice(0,2),x=P.length),T.forEach(function(U,Y){P.forEach(function(se,xe){var Ee=[{field:D,value:U,values:T},{field:B,value:se,values:P}],rt=(0,E.hX)(t,s.getFacetDataFilter(Ee)),vt={type:s.cfg.type,data:rt,region:s.getRegion(x,m,Y,xe),columnValue:U,rowValue:se,columnField:D,rowField:B,columnIndex:Y,rowIndex:xe,columnValuesLength:m,rowValuesLength:x};d.push(vt)})}),d},n.prototype.getXAxisOption=function(t,s,l,f){return f.columnIndex===1||f.rowIndex===1?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnValue,d=s.rowValue,m=s.view,x=(0,E.U2)(t.cfg.title,"formatter");if(t.cfg.transpose){var T=(0,E.b$)({position:["50%","0%"],content:x?x(f):f},Cd(be.TOP),t.cfg.title);m.annotation().text(T)}else{var T=(0,E.b$)({position:["100%","50%"],content:x?x(d):d},Cd(be.RIGHT),t.cfg.title);m.annotation().text(T)}})},n}(Vn),bI=xI,ny=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,M.pi)({},i.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.generateFacets=function(t){var s=this,l=(0,M.CR)(this.cfg.fields,2),f=l[0],d=l[1],m=[],x=1,T=1,P=[""],D=[""];return f&&(P=this.getFieldValues(t,f),x=P.length),d&&(D=this.getFieldValues(t,d),T=D.length),P.forEach(function(B,U){D.forEach(function(Y,se){var xe=[{field:f,value:B,values:P},{field:d,value:Y,values:D}],Ee=(0,E.hX)(t,s.getFacetDataFilter(xe)),rt={type:s.cfg.type,data:Ee,region:s.getRegion(T,x,U,se),columnValue:B,rowValue:Y,columnField:f,rowField:d,columnIndex:U,rowIndex:se,columnValuesLength:x,rowValuesLength:T};m.push(rt)})}),m},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.columnValue,T=s.rowValue,P=s.view;if(d===0){var D=(0,E.U2)(t.cfg.columnTitle,"formatter"),B=(0,E.b$)({position:["50%","0%"],content:D?D(x):x},Cd(be.TOP),t.cfg.columnTitle);P.annotation().text(B)}if(f===m-1){var D=(0,E.U2)(t.cfg.rowTitle,"formatter"),B=(0,E.b$)({position:["100%","50%"],content:D?D(T):T},Cd(be.RIGHT),t.cfg.rowTitle);P.annotation().text(B)}})},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):f.columnIndex!==Math.floor((f.columnValuesLength-1)/2)?(0,M.pi)((0,M.pi)({},l),{title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):f.rowIndex!==Math.floor((f.rowValuesLength-1)/2)?(0,M.pi)((0,M.pi)({},l),{title:null}):l},n}(Vn),SI=ny,pB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.init=function(){i.prototype.init.call(this),this.view.on(Ue.AFTER_RENDER,this.afterChartRender)},n.prototype.getDefaultCfg=function(){return(0,E.b$)({},i.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},n.prototype.generateFacets=function(t){var s=this.cfg.fields;if(!s.length)throw new Error("Please specify for the fields for rootFacet!");var l=[],f={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return l.push(f),f.children=this.getChildFacets(t,1,l),this.setRegion(l),l},n.prototype.setRegion=function(t){var s=this;this.forceColIndex(t),t.forEach(function(l){l.region=s.getRegion(l.rowValuesLength,l.columnValuesLength,l.columnIndex,l.rowIndex)})},n.prototype.getRegion=function(t,s,l,f){var d=1/s,m=1/t,x={x:d*l,y:m*f},T={x:x.x+d,y:x.y+m*2/3};return{start:x,end:T}},n.prototype.forceColIndex=function(t){var s,l,f=this,d=[],m=0;t.forEach(function(Y){f.isLeaf(Y)&&(d.push(Y),Y.columnIndex=m,m++)}),d.forEach(function(Y){Y.columnValuesLength=d.length});for(var x=this.cfg.fields.length,T=x-1;T>=0;T--){var P=this.getFacetsByLevel(t,T);try{for(var D=(s=void 0,(0,M.XA)(P)),B=D.next();!B.done;B=D.next()){var U=B.value;this.isLeaf(U)||(U.originColIndex=U.columnIndex,U.columnIndex=this.getRegionIndex(U.children),U.columnValuesLength=d.length)}}catch(Y){s={error:Y}}finally{try{B&&!B.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}}},n.prototype.getFacetsByLevel=function(t,s){var l=[];return t.forEach(function(f){f.rowIndex===s&&l.push(f)}),l},n.prototype.getRegionIndex=function(t){var s=t[0],l=t[t.length-1];return(l.columnIndex-s.columnIndex)/2+s.columnIndex},n.prototype.isLeaf=function(t){return!t.children||!t.children.length},n.prototype.getRows=function(){return this.cfg.fields.length+1},n.prototype.getChildFacets=function(t,s,l){var f=this,d=this.cfg.fields,m=d.length;if(!(m<s)){var x=[],T=d[s-1],P=this.getFieldValues(t,T);return P.forEach(function(D,B){var U=[{field:T,value:D,values:P}],Y=t.filter(f.getFacetDataFilter(U));if(Y.length){var se={type:f.cfg.type,data:Y,region:null,columnValue:D,rowValue:"",columnField:T,rowField:"",columnIndex:B,rowValuesLength:f.getRows(),columnValuesLength:1,rowIndex:s,children:f.getChildFacets(Y,s+1,l)};x.push(se),l.push(se)}}),x}},n.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},Cd(be.TOP),t.cfg.title);f.annotation().text(m)})},n.prototype.drawLines=function(t){var s=this;t.forEach(function(l){if(!s.isLeaf(l)){var f=l.children;s.addFacetLines(l,f)}})},n.prototype.addFacetLines=function(t,s){var l=this,f=t.view,d=f.coordinateBBox,m={x:d.x+d.width/2,y:d.y+d.height};s.forEach(function(x){var T=x.view.coordinateBBox,P={x:T.bl.x+(T.tr.x-T.bl.x)/2,y:T.tr.y},D={x:m.x,y:m.y+(P.y-m.y)/2},B={x:P.x,y:D.y};l.drawLine([m,D,B,P])})},n.prototype.getPath=function(t){var s=[],l=this.cfg.line.smooth;return l?(s.push(["M",t[0].x,t[0].y]),s.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(f,d){d===0?s.push(["M",f.x,f.y]):s.push(["L",f.x,f.y])}),s},n.prototype.drawLine=function(t){var s=this.getPath(t),l=this.cfg.line.style;this.container.addShape("path",{attrs:(0,E.f0)({path:s},l)})},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.originColIndex!==0&&f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n}(Vn),Aw=pB;function Mw(i){var n=(0,M.ev)([],(0,M.CR)(i),!1);n.sort(function(s,l){return s-l});var t=n.length;return t===0?0:t%2===1?n[(t-1)/2]:(n[t/2]+n[t/2-1])/2}function dB(i){var n=(0,E.u4)(i,function(t,s){return t+=isNaN(s)||!(0,E.hj)(s)?0:s},0);return i.length===0?0:n/i.length}function P_(i,n){if(!n)return null;var t;switch(i){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=n.isCategory?Mw(n.values.map(function(s,l){return l})):Mw(n.values);break}case"mean":{t=n.isCategory?(n.values.length-1)/2:dB(n.values);break}case"min":t=n.isCategory?0:n[i];break;case"max":t=n.isCategory?n.values.length-1:n[i];break;default:t=i;break}return n.scale(t)}var ob=["regionFilter","shape"],EI=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.cache=new Map,s.foregroundContainer=s.view.getLayer(ge.FORE).addGroup(),s.backgroundContainer=s.view.getLayer(ge.BG).addGroup(),s.option=[],s}return Object.defineProperty(n.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.layout=function(){this.update()},n.prototype.render=function(){},n.prototype.update=function(){var t=this;this.onAfterRender(function(){var l=new Map;(0,E.S6)(t.option,function(f){if((0,E.q9)(ob,f.type)){var d=t.updateOrCreate(f);d&&l.set(t.getCacheKey(f),d)}}),t.cache=t.syncCache(l)});var s=new Map;(0,E.S6)(this.option,function(l){if(!(0,E.q9)(ob,l.type)){var f=t.updateOrCreate(l);f&&s.set(t.getCacheKey(l),f)}}),this.cache=this.syncCache(s)},n.prototype.clear=function(t){t===void 0&&(t=!1),i.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},n.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},n.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},n.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},n.prototype.onAfterRender=function(t){var s=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(l){l.animateOption&&(l.once(it.AFTER_DRAW_ANIMATE,function(){t()}),s=!0)}),s||this.view.getRootView().once(Ue.AFTER_RENDER,function(){t()})},n.prototype.createAnnotation=function(t){var s=t.type,l=K[(0,E.jC)(s)];if(l){var f=this.getAnnotationTheme(s),d=this.getAnnotationCfg(s,t,f);if(!d)return null;var m=new l(d);return{component:m,layer:this.isTop(d)?ge.FORE:ge.BG,direction:be.NONE,type:ze.ANNOTATION,extra:t}}},n.prototype.annotation=function(t){this.option.push(t)},n.prototype.arc=function(t){return this.annotation((0,M.pi)({type:"arc"},t)),this},n.prototype.image=function(t){return this.annotation((0,M.pi)({type:"image"},t)),this},n.prototype.line=function(t){return this.annotation((0,M.pi)({type:"line"},t)),this},n.prototype.region=function(t){return this.annotation((0,M.pi)({type:"region"},t)),this},n.prototype.text=function(t){return this.annotation((0,M.pi)({type:"text"},t)),this},n.prototype.dataMarker=function(t){return this.annotation((0,M.pi)({type:"dataMarker"},t)),this},n.prototype.dataRegion=function(t){this.annotation((0,M.pi)({type:"dataRegion"},t))},n.prototype.regionFilter=function(t){this.annotation((0,M.pi)({type:"regionFilter"},t))},n.prototype.shape=function(t){this.annotation((0,M.pi)({type:"shape"},t))},n.prototype.html=function(t){this.annotation((0,M.pi)({type:"html"},t))},n.prototype.parsePosition=function(t){var s,l,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=(0,E.mf)(t)?t.call(null,f,d):t,x=0,T=0;if((0,E.kJ)(m)){var P=(0,M.CR)(m,2),D=P[0],B=P[1];if((0,E.HD)(D)&&D.indexOf("%")!==-1&&!isNaN(D.slice(0,-1)))return this.parsePercentPosition(m);x=P_(D,f),T=P_(B,Object.values(d)[0])}else if(!(0,E.UM)(m))try{for(var U=(0,M.XA)((0,E.XP)(m)),Y=U.next();!Y.done;Y=U.next()){var se=Y.value,xe=m[se];se===f.field&&(x=P_(xe,f)),d[se]&&(T=P_(xe,d[se]))}}catch(Ee){s={error:Ee}}finally{try{Y&&!Y.done&&(l=U.return)&&l.call(U)}finally{if(s)throw s.error}}return isNaN(x)||isNaN(T)?null:this.view.getCoordinate().convert({x,y:T})},n.prototype.getRegionPoints=function(t,s){var l=this,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=Object.values(d)[0],x=f.field,T=this.view.getData(),P=(0,E.kJ)(t)?t[0]:t[x],D=(0,E.kJ)(s)?s[0]:s[x],B=[],U;return(0,E.S6)(T,function(Y,se){if(Y[x]===P&&(U=se),se>=U){var xe=l.parsePosition([Y[x],Y[m.field]]);xe&&B.push(xe)}if(Y[x]===D)return!1}),B},n.prototype.parsePercentPosition=function(t){var s=parseFloat(t[0])/100,l=parseFloat(t[1])/100,f=this.view.getCoordinate(),d=f.start,m=f.end,x={x:Math.min(d.x,m.x),y:Math.min(d.y,m.y)},T=f.getWidth()*s+x.x,P=f.getHeight()*l+x.y;return{x:T,y:P}},n.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),s=t.start,l=t.end,f=t.getWidth(),d=t.getHeight(),m={x:Math.min(s.x,l.x),y:Math.min(s.y,l.y)};return{x:m.x,y:m.y,minX:m.x,minY:m.y,maxX:m.x+f,maxY:m.y+d,width:f,height:d}},n.prototype.getAnnotationCfg=function(t,s,l){var f=this,d=this.view.getCoordinate(),m=this.view.getCanvas(),x={};if((0,E.UM)(s))return null;var T=s.start,P=s.end,D=s.position,B=this.parsePosition(T),U=this.parsePosition(P),Y=this.parsePosition(D);if(["arc","image","line","region","regionFilter"].includes(t)&&(!B||!U))return null;if(["text","dataMarker","html"].includes(t)&&!Y)return null;if(t==="arc"){var se=s,xe=se.start,Ee=se.end,rt=(0,M._T)(se,["start","end"]),vt=Lp(d,B),xt=Lp(d,U);vt>xt&&(xt=Math.PI*2+xt),x=(0,M.pi)((0,M.pi)({},rt),{center:d.getCenter(),radius:Qh(d,B),startAngle:vt,endAngle:xt})}else if(t==="image"){var Bt=s,_r=Bt.start,Or=Bt.end,rt=(0,M._T)(Bt,["start","end"]);x=(0,M.pi)((0,M.pi)({},rt),{start:B,end:U,src:s.src})}else if(t==="line"){var Wr=s,gn=Wr.start,$r=Wr.end,rt=(0,M._T)(Wr,["start","end"]);x=(0,M.pi)((0,M.pi)({},rt),{start:B,end:U,text:(0,E.U2)(s,"text",null)})}else if(t==="region"){var zn=s,li=zn.start,zi=zn.end,rt=(0,M._T)(zn,["start","end"]);x=(0,M.pi)((0,M.pi)({},rt),{start:B,end:U})}else if(t==="text"){var ia=this.view.getData(),qa=s,Hn=qa.position,Di=qa.content,rt=(0,M._T)(qa,["position","content"]),Zi=Di;(0,E.mf)(Di)&&(Zi=Di(ia)),x=(0,M.pi)((0,M.pi)((0,M.pi)({},Y),rt),{content:Zi})}else if(t==="dataMarker"){var yi=s,Vi=yi.position,Pa=yi.point,so=yi.line,Mo=yi.text,no=yi.autoAdjust,Eo=yi.direction,rt=(0,M._T)(yi,["position","point","line","text","autoAdjust","direction"]);x=(0,M.pi)((0,M.pi)((0,M.pi)({},rt),Y),{coordinateBBox:this.getCoordinateBBox(),point:Pa,line:so,text:Mo,autoAdjust:no,direction:Eo})}else if(t==="dataRegion"){var Qo=s,al=Qo.start,_l=Qo.end,Fd=Qo.region,Mo=Qo.text,am=Qo.lineLength,rt=(0,M._T)(Qo,["start","end","region","text","lineLength"]);x=(0,M.pi)((0,M.pi)({},rt),{points:this.getRegionPoints(al,_l),region:Fd,text:Mo,lineLength:am})}else if(t==="regionFilter"){var Vc=s,p0=Vc.start,d0=Vc.end,Zy=Vc.apply,a5=Vc.color,rt=(0,M._T)(Vc,["start","end","apply","color"]),o5=this.view.geometries,rR=[],fE=function(Lh){Lh&&(Lh.isGroup()?Lh.getChildren().forEach(function(Vy){return fE(Vy)}):rR.push(Lh))};(0,E.S6)(o5,function(Lh){Zy?(0,E.FX)(Zy,Lh.type)&&(0,E.S6)(Lh.elements,function(Vy){fE(Vy.shape)}):(0,E.S6)(Lh.elements,function(Vy){fE(Vy.shape)})}),x=(0,M.pi)((0,M.pi)({},rt),{color:a5,shapes:rR,start:B,end:U})}else if(t==="shape"){var nR=s,s5=nR.render,hE=(0,M._T)(nR,["render"]),u5=function(v0){if((0,E.mf)(s.render))return s5(v0,f.view,{parsePosition:f.parsePosition.bind(f)})};x=(0,M.pi)((0,M.pi)({},hE),{render:u5})}else if(t==="html"){var pE=s,dE=pE.html,$4=pE.position,hE=(0,M._T)(pE,["html","position"]),l5=function(Lh){return(0,E.mf)(dE)?dE(Lh,f.view):dE};x=(0,M.pi)((0,M.pi)((0,M.pi)({},hE),Y),{parent:m.get("el").parentNode,html:l5})}var Av=(0,E.b$)({},l,(0,M.pi)((0,M.pi)({},x),{top:s.top,style:s.style,offsetX:s.offsetX,offsetY:s.offsetY}));return t!=="html"&&(Av.container=this.getComponentContainer(Av)),Av.animate=this.view.getOptions().animate&&Av.animate&&(0,E.U2)(s,"animate",Av.animate),Av.animateOption=(0,E.b$)({},fr,Av.animateOption,s.animateOption),Av},n.prototype.isTop=function(t){return(0,E.U2)(t,"top",!0)},n.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},n.prototype.getAnnotationTheme=function(t){return(0,E.U2)(this.view.getTheme(),["components","annotation",t],{})},n.prototype.updateOrCreate=function(t){var s=this.cache.get(this.getCacheKey(t));if(s){var l=t.type,f=this.getAnnotationTheme(l),d=this.getAnnotationCfg(l,t,f);d&&Rl(d,["container"]),s.component.update((0,M.pi)((0,M.pi)({},d||{}),{visible:!!d})),(0,E.q9)(ob,t.type)&&s.component.render()}else s=this.createAnnotation(t),s&&(s.component.init(),(0,E.q9)(ob,t.type)&&s.component.render());return s},n.prototype.syncCache=function(t){var s=this,l=new Map(this.cache);return t.forEach(function(f,d){l.set(d,f)}),l.forEach(function(f,d){(0,E.sE)(s.option,function(m){return d===s.getCacheKey(m)})||(f.component.destroy(),l.delete(d))}),l},n.prototype.getCacheKey=function(t){return t},n}(Ie),wI=EI;function CI(i,n){var t=(0,E.b$)({},(0,E.U2)(i,["components","axis","common"]),(0,E.U2)(i,["components","axis",n]));return(0,E.U2)(t,["grid"],{})}function sb(i,n,t,s){var l=[],f=n.getTicks();return i.isPolar&&f.push({value:1,text:"",tickValue:""}),f.reduce(function(d,m,x){var T=m.value;if(s)l.push({points:[i.convert(t==="y"?{x:0,y:T}:{x:T,y:0}),i.convert(t==="y"?{x:1,y:T}:{x:T,y:1})]});else if(x){var P=d.value,D=(P+T)/2;l.push({points:[i.convert(t==="y"?{x:0,y:D}:{x:D,y:0}),i.convert(t==="y"?{x:1,y:D}:{x:D,y:1})]})}return m},f[0]),l}function Rw(i,n,t,s,l){var f=n.values.length,d=[],m=t.getTicks();return m.reduce(function(x,T){var P=x?x.value:T.value,D=T.value,B=(P+D)/2;return l==="x"?d.push({points:[i.convert({x:s?D:B,y:0}),i.convert({x:s?D:B,y:1})]}):d.push({points:(0,E.UI)(Array(f+1),function(U,Y){return i.convert({x:Y/f,y:s?D:B})})}),T},m[0]),d}function Iw(i,n){var t=(0,E.U2)(n,"grid");if(t===null)return!1;var s=(0,E.U2)(i,"grid");return!(t===void 0&&s===null)}var lv=["container"],TI=(0,M.pi)((0,M.pi)({},fr),{appear:null}),AI=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.cache=new Map,s.gridContainer=s.view.getLayer(ge.BG).addGroup(),s.gridForeContainer=s.view.getLayer(ge.FORE).addGroup(),s.axisContainer=s.view.getLayer(ge.BG).addGroup(),s.axisForeContainer=s.view.getLayer(ge.FORE).addGroup(),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var t=this,s=this.view.getCoordinate();(0,E.S6)(this.getComponents(),function(l){var f=l.component,d=l.direction,m=l.type,x=l.extra,T=x.dim,P=x.scale,D=x.alignTick,B;if(m===ze.AXIS)s.isPolar?T==="x"?B=s.isTransposed?Kd(s,d):kn(s):T==="y"&&(B=s.isTransposed?kn(s):Kd(s,d)):B=Kd(s,d);else if(m===ze.GRID)if(s.isPolar){var U=void 0;s.isTransposed?U=T==="x"?Rw(s,t.view.getYScales()[0],P,D,T):sb(s,P,T,D):U=T==="x"?sb(s,P,T,D):Rw(s,t.view.getXScale(),P,D,T),B={items:U,center:t.view.getCoordinate().getCenter()}}else B={items:sb(s,P,T,D)};f.update(B)})},n.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var s=new Map;this.cache.forEach(function(l,f){t.has(f)?s.set(f,l):l.component.destroy()}),this.cache=s},n.prototype.clear=function(){i.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},n.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},n.prototype.updateXAxes=function(t){var s=this.view.getXScale();if(!(!s||s.isIdentity)){var l=fn(this.option,s.field);if(l!==!1){var f=sn(l,be.BOTTOM),d=ge.BG,m="x",x=this.view.getCoordinate(),T=this.getId("axis",s.field),P=this.getId("grid",s.field);if(x.isRect){var D=this.cache.get(T);if(D){var B=this.getLineAxisCfg(s,l,f);Rl(B,lv),D.component.update(B),t.set(T,D)}else D=this.createLineAxis(s,l,d,f,m),this.cache.set(T,D),t.set(T,D);var U=this.cache.get(P);if(U){var B=this.getLineGridCfg(s,l,f,m);Rl(B,lv),U.component.update(B),t.set(P,U)}else U=this.createLineGrid(s,l,d,f,m),U&&(this.cache.set(P,U),t.set(P,U))}else if(x.isPolar){var D=this.cache.get(T);if(D){var B=x.isTransposed?this.getLineAxisCfg(s,l,be.RADIUS):this.getCircleAxisCfg(s,l,f);Rl(B,lv),D.component.update(B),t.set(T,D)}else{if(x.isTransposed){if((0,E.o8)(l))return;D=this.createLineAxis(s,l,d,be.RADIUS,m)}else D=this.createCircleAxis(s,l,d,f,m);this.cache.set(T,D),t.set(T,D)}var U=this.cache.get(P);if(U){var B=x.isTransposed?this.getCircleGridCfg(s,l,be.RADIUS,m):this.getLineGridCfg(s,l,be.CIRCLE,m);Rl(B,lv),U.component.update(B),t.set(P,U)}else{if(x.isTransposed){if((0,E.o8)(l))return;U=this.createCircleGrid(s,l,d,be.RADIUS,m)}else U=this.createLineGrid(s,l,d,be.CIRCLE,m);U&&(this.cache.set(P,U),t.set(P,U))}}}}},n.prototype.updateYAxes=function(t){var s=this,l=this.view.getYScales();(0,E.S6)(l,function(f,d){if(!(!f||f.isIdentity)){var m=f.field,x=fn(s.option,m);if(x!==!1){var T=ge.BG,P="y",D=s.getId("axis",m),B=s.getId("grid",m),U=s.view.getCoordinate();if(U.isRect){var Y=sn(x,d===0?be.LEFT:be.RIGHT),se=s.cache.get(D);if(se){var xe=s.getLineAxisCfg(f,x,Y);Rl(xe,lv),se.component.update(xe),t.set(D,se)}else se=s.createLineAxis(f,x,T,Y,P),s.cache.set(D,se),t.set(D,se);var Ee=s.cache.get(B);if(Ee){var xe=s.getLineGridCfg(f,x,Y,P);Rl(xe,lv),Ee.component.update(xe),t.set(B,Ee)}else Ee=s.createLineGrid(f,x,T,Y,P),Ee&&(s.cache.set(B,Ee),t.set(B,Ee))}else if(U.isPolar){var se=s.cache.get(D);if(se){var xe=U.isTransposed?s.getCircleAxisCfg(f,x,be.CIRCLE):s.getLineAxisCfg(f,x,be.RADIUS);Rl(xe,lv),se.component.update(xe),t.set(D,se)}else{if(U.isTransposed){if((0,E.o8)(x))return;se=s.createCircleAxis(f,x,T,be.CIRCLE,P)}else se=s.createLineAxis(f,x,T,be.RADIUS,P);s.cache.set(D,se),t.set(D,se)}var Ee=s.cache.get(B);if(Ee){var xe=U.isTransposed?s.getLineGridCfg(f,x,be.CIRCLE,P):s.getCircleGridCfg(f,x,be.RADIUS,P);Rl(xe,lv),Ee.component.update(xe),t.set(B,Ee)}else{if(U.isTransposed){if((0,E.o8)(x))return;Ee=s.createLineGrid(f,x,T,be.CIRCLE,P)}else Ee=s.createCircleGrid(f,x,T,be.RADIUS,P);Ee&&(s.cache.set(B,Ee),t.set(B,Ee))}}}}})},n.prototype.createLineAxis=function(t,s,l,f,d){var m={component:new Uv(this.getLineAxisCfg(t,s,f)),layer:l,direction:f===be.RADIUS?be.NONE:f,type:ze.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},n.prototype.createLineGrid=function(t,s,l,f,d){var m=this.getLineGridCfg(t,s,f,d);if(m){var x={component:new pd(m),layer:l,direction:be.NONE,type:ze.GRID,extra:{dim:d,scale:t,alignTick:(0,E.U2)(m,"alignTick",!0)}};return x.component.init(),x}},n.prototype.createCircleAxis=function(t,s,l,f,d){var m={component:new $d(this.getCircleAxisCfg(t,s,f)),layer:l,direction:f,type:ze.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},n.prototype.createCircleGrid=function(t,s,l,f,d){var m=this.getCircleGridCfg(t,s,f,d);if(m){var x={component:new Zv(m),layer:l,direction:be.NONE,type:ze.GRID,extra:{dim:d,scale:t,alignTick:(0,E.U2)(m,"alignTick",!0)}};return x.component.init(),x}},n.prototype.getLineAxisCfg=function(t,s,l){var f=(0,E.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=Kd(d,l),x=ti(t,s),T=br(this.view.getTheme(),l),P=(0,E.U2)(s,["title"])?(0,E.b$)({title:{style:{text:x}}},{title:dn(this.view.getTheme(),l,s.title)},s):s,D=(0,E.b$)((0,M.pi)((0,M.pi)({container:f},m),{ticks:t.getTicks().map(function(vt){return{id:"".concat(vt.tickValue),name:vt.text,value:vt.value}}),verticalFactor:d.isPolar?Kt(m,d.getCenter())*-1:Kt(m,d.getCenter()),theme:T}),T,P),B=this.getAnimateCfg(D),U=B.animate,Y=B.animateOption;D.animateOption=Y,D.animate=U;var se=nt(m),xe=(0,E.U2)(D,"verticalLimitLength",se?1/3:1/2);if(xe<=1){var Ee=this.view.getCanvas().get("width"),rt=this.view.getCanvas().get("height");D.verticalLimitLength=xe*(se?Ee:rt)}return D},n.prototype.getLineGridCfg=function(t,s,l,f){if(Iw(br(this.view.getTheme(),l),s)){var d=CI(this.view.getTheme(),l),m=(0,E.b$)({container:(0,E.U2)(s,["top"])?this.gridForeContainer:this.gridContainer},d,(0,E.U2)(s,"grid"),this.getAnimateCfg(s));return m.items=sb(this.view.getCoordinate(),t,f,(0,E.U2)(m,"alignTick",!0)),m}},n.prototype.getCircleAxisCfg=function(t,s,l){var f=(0,E.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=t.getTicks().map(function(se){return{id:"".concat(se.tickValue),name:se.text,value:se.value}});!t.isCategory&&Math.abs(d.endAngle-d.startAngle)===Math.PI*2&&m.length&&(m[m.length-1].name="");var x=ti(t,s),T=br(this.view.getTheme(),be.CIRCLE),P=(0,E.U2)(s,["title"])?(0,E.b$)({title:{style:{text:x}}},{title:dn(this.view.getTheme(),l,s.title)},s):s,D=(0,E.b$)((0,M.pi)((0,M.pi)({container:f},kn(this.view.getCoordinate())),{ticks:m,verticalFactor:1,theme:T}),T,P),B=this.getAnimateCfg(D),U=B.animate,Y=B.animateOption;return D.animate=U,D.animateOption=Y,D},n.prototype.getCircleGridCfg=function(t,s,l,f){if(Iw(br(this.view.getTheme(),l),s)){var d=CI(this.view.getTheme(),be.RADIUS),m=(0,E.b$)({container:(0,E.U2)(s,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},d,(0,E.U2)(s,"grid"),this.getAnimateCfg(s)),x=(0,E.U2)(m,"alignTick",!0),T=f==="x"?this.view.getYScales()[0]:this.view.getXScale();return m.items=Rw(this.view.getCoordinate(),T,t,x,f),m}},n.prototype.getId=function(t,s){var l=this.view.getCoordinate();return"".concat(t,"-").concat(s,"-").concat(l.type)},n.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,E.U2)(t,"animate"),animateOption:t&&t.animateOption?(0,E.b$)({},TI,t.animateOption):TI}},n}(Ie),vB=AI;function Qv(i,n,t){return t===be.TOP?[i.minX+i.width/2-n.width/2,i.minY]:t===be.BOTTOM?[i.minX+i.width/2-n.width/2,i.maxY-n.height]:t===be.LEFT?[i.minX,i.minY+i.height/2-n.height/2]:t===be.RIGHT?[i.maxX-n.width,i.minY+i.height/2-n.height/2]:t===be.TOP_LEFT||t===be.LEFT_TOP?[i.tl.x,i.tl.y]:t===be.TOP_RIGHT||t===be.RIGHT_TOP?[i.tr.x-n.width,i.tr.y]:t===be.BOTTOM_LEFT||t===be.LEFT_BOTTOM?[i.bl.x,i.bl.y-n.height]:t===be.BOTTOM_RIGHT||t===be.RIGHT_BOTTOM?[i.br.x-n.width,i.br.y-n.height]:[0,0]}function gB(i,n){if(n.isTransposed)switch(i){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return i}function Pw(i){return i===DIRECTION.LEFT?DIRECTION.RIGHT:i===DIRECTION.RIGHT?DIRECTION.LEFT:i}function Ow(i){return i===DIRECTION.TOP?DIRECTION.BOTTOM:i===DIRECTION.BOTTOM?DIRECTION.TOP:i}function MI(i,n){var t=n.matrix[0],s=n.matrix[4],l=i;return t<0&&(l=Pw(l)),s<0&&(l=Ow(l)),l}function O_(i,n){var t=i;return n.isReflect("x")&&(t=Pw(t)),n.isReflect("y")&&(t=Ow(t)),t}function i8(i,n){var t=i;return t=gB(t,n),t=MI(t,n),t=O_(t,n),t}function RI(i,n){return(0,E.jn)(i)?i===!1?!1:{}:(0,E.U2)(i,[n],i)}function Td(i){return(0,E.U2)(i,"position",be.BOTTOM)}var kl=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.container=s.view.getLayer(ge.FORE).addGroup(),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,E.S6)(this.components,function(s){var l=s.component,f=s.direction,d=Qd(f),m=l.get("maxWidthRatio"),x=l.get("maxHeightRatio"),T=t.getCategoryLegendSizeCfg(d,m,x),P=l.get("maxWidth"),D=l.get("maxHeight");l.update({maxWidth:Math.min(T.maxWidth,P||0),maxHeight:Math.min(T.maxHeight,D||0)});var B=l.get("padding"),U=l.getLayoutBBox(),Y=new Xo(U.x,U.y,U.width,U.height).expand(B),se=(0,M.CR)(Qv(t.view.viewBBox,Y,f),2),xe=se[0],Ee=se[1],rt=(0,M.CR)(Qv(t.layoutBBox,Y,f),2),vt=rt[0],xt=rt[1],Bt=0,_r=0;f.startsWith("top")||f.startsWith("bottom")?(Bt=xe,_r=xt):(Bt=vt,_r=Ee),l.setLocation({x:Bt+B[3],y:_r+B[0]}),t.layoutBBox=t.layoutBBox.cut(Y,f)})},n.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var s={},l=function(B,U,Y){var se=t.getId(Y.field),xe=t.getComponentById(se);if(xe){var Ee=void 0,rt=RI(t.option,Y.field);rt!==!1&&((0,E.U2)(rt,"custom")?Ee=t.getCategoryCfg(B,U,Y,rt,!0):Y.isLinear?Ee=t.getContinuousCfg(B,U,Y,rt):Y.isCategory&&(Ee=t.getCategoryCfg(B,U,Y,rt))),Ee&&(Rl(Ee,["container"]),xe.direction=Td(rt),xe.component.update(Ee),s[se]=!0)}else{var vt=t.createFieldLegend(B,U,Y);vt&&(vt.component.init(),t.components.push(vt),s[se]=!0)}};if((0,E.U2)(this.option,"custom")){var f="global-custom",d=this.getComponentById(f);if(d){var m=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Rl(m,["container"]),d.component.update(m),s[f]=!0}else{var x=this.createCustomLegend(void 0,void 0,void 0,this.option);if(x){x.init();var T=ge.FORE,P=Td(this.option);this.components.push({id:f,component:x,layer:T,direction:P,type:ze.LEGEND,extra:void 0}),s[f]=!0}}}else this.loopLegends(l);var D=[];(0,E.S6)(this.getComponents(),function(B){s[B.id]?D.push(B):B.component.destroy()}),this.components=D},n.prototype.clear=function(){i.prototype.clear.call(this),this.container.clear()},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.container.remove(!0)},n.prototype.getGeometries=function(t){var s=this,l=t.geometries;return(0,E.S6)(t.views,function(f){l=l.concat(s.getGeometries(f))}),l},n.prototype.loopLegends=function(t){var s=this.view.getRootView()===this.view;if(s){var l=this.getGeometries(this.view),f={};(0,E.S6)(l,function(d){var m=d.getGroupAttributes();(0,E.S6)(m,function(x){var T=x.getScale(x.type);!T||T.type==="identity"||f[T.field]||(t(d,x,T),f[T.field]=!0)})})}},n.prototype.createFieldLegend=function(t,s,l){var f,d=RI(this.option,l.field),m=ge.FORE,x=Td(d);if(d!==!1&&((0,E.U2)(d,"custom")?f=this.createCustomLegend(t,s,l,d):l.isLinear?f=this.createContinuousLegend(t,s,l,d):l.isCategory&&(f=this.createCategoryLegend(t,s,l,d))),f)return f.set("field",l.field),{id:this.getId(l.field),component:f,layer:m,direction:x,type:ze.LEGEND,extra:{scale:l}}},n.prototype.createCustomLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f,!0);return new ef(d)},n.prototype.createContinuousLegend=function(t,s,l,f){var d=this.getContinuousCfg(t,s,l,Rl(f,["value"]));return new qh(d)},n.prototype.createCategoryLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f);return new ef(d)},n.prototype.getContinuousCfg=function(t,s,l,f){var d=l.getTicks(),m=(0,E.sE)(d,function(se){return se.value===0}),x=(0,E.sE)(d,function(se){return se.value===1}),T=d.map(function(se){var xe=se.value,Ee=se.tickValue,rt=s.mapping(l.invert(xe)).join("");return{value:Ee,attrValue:rt,color:rt,scaleValue:xe}});m||T.push({value:l.min,attrValue:s.mapping(l.invert(0)).join(""),color:s.mapping(l.invert(0)).join(""),scaleValue:0}),x||T.push({value:l.max,attrValue:s.mapping(l.invert(1)).join(""),color:s.mapping(l.invert(1)).join(""),scaleValue:1}),T.sort(function(se,xe){return se.value-xe.value});var P={min:(0,E.YM)(T).value,max:(0,E.Z$)(T).value,colors:[],rail:{type:s.type},track:{}};s.type==="size"&&(P.track={style:{fill:s.type==="size"?this.view.getTheme().defaultColor:void 0}}),s.type==="color"&&(P.colors=T.map(function(se){return se.attrValue}));var D=this.container,B=Td(f),U=Qd(B),Y=(0,E.U2)(f,"title");return Y&&(Y=(0,E.b$)({text:xh(l)},Y)),P.container=D,P.layout=U,P.title=Y,P.animateOption=fr,this.mergeLegendCfg(P,f,"continuous")},n.prototype.getCategoryCfg=function(t,s,l,f,d){var m=this.container,x=(0,E.U2)(f,"position",be.BOTTOM),T=Up(this.view.getTheme(),x),P=(0,E.U2)(T,["marker"]),D=(0,E.U2)(f,"marker"),B=Qd(x),U=(0,E.U2)(T,["pageNavigator"]),Y=(0,E.U2)(f,"pageNavigator"),se=d?Tg(P,D,f.items):zp(this.view,t,s,P,D),xe=(0,E.U2)(f,"title");xe&&(xe=(0,E.b$)({text:l?xh(l):""},xe));var Ee=(0,E.U2)(f,"maxWidthRatio"),rt=(0,E.U2)(f,"maxHeightRatio"),vt=this.getCategoryLegendSizeCfg(B,Ee,rt);vt.container=m,vt.layout=B,vt.items=se,vt.title=xe,vt.animateOption=fr,vt.pageNavigator=(0,E.b$)({},U,Y);var xt=this.mergeLegendCfg(vt,f,x);xt.reversed&&xt.items.reverse();var Bt=(0,E.U2)(xt,"maxItemWidth");return Bt&&Bt<=1&&(xt.maxItemWidth=this.view.viewBBox.width*Bt),xt},n.prototype.mergeLegendCfg=function(t,s,l){var f=l.split("-")[0],d=Up(this.view.getTheme(),f);return(0,E.b$)({},d,t,s)},n.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},n.prototype.getComponentById=function(t){return(0,E.sE)(this.components,function(s){return s.id===t})},n.prototype.getCategoryLegendSizeCfg=function(t,s,l){s===void 0&&(s=Et),l===void 0&&(l=Et);var f=this.view.viewBBox,d=f.width,m=f.height;return t==="vertical"?{maxWidth:d*s,maxHeight:m}:{maxWidth:d,maxHeight:m*l}},n}(Ie),zs=kl,Hm=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.onChangeFn=E.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=(0,M.CR)(l,2),d=f[0],m=f[1];s.start=d,s.end=m,s.changeViewData(d,m)},s.container=s.view.getLayer(ge.FORE).addGroup(),s.onChangeFn=(0,E.P2)(s.onValueChange,20,{leading:!0}),s.width=0,s.view.on(Ue.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Ue.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){i.prototype.destroy.call(this),this.view.off(Ue.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ue.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),s=t.start,l=t.end;(0,E.UM)(this.start)&&(this.start=s,this.end=l);var f=this.view.getOptions().data;this.option&&!(0,E.xb)(f)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},n.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var s=this.view.coordinateBBox.width,l=this.slider.component.get("padding"),f=(0,M.CR)(l,4),d=f[0],m=f[1],x=f[2],T=f[3],P=this.slider.component.getLayoutBBox(),D=new Xo(P.x,P.y,Math.min(P.width,s),P.height).expand(l),B=this.getMinMaxText(this.start,this.end),U=B.minText,Y=B.maxText,se=(0,M.CR)(Qv(this.view.viewBBox,D,be.BOTTOM),2),xe=se[0],Ee=se[1],rt=(0,M.CR)(Qv(this.view.coordinateBBox,D,be.BOTTOM),2),vt=rt[0],xt=rt[1];this.slider.component.update((0,M.pi)((0,M.pi)({},this.getSliderCfg()),{x:vt+T,y:Ee+d,width:this.width,start:this.start,end:this.end,minText:U,maxText:Y})),this.view.viewBBox=this.view.viewBBox.cut(D,be.BOTTOM)}},n.prototype.update=function(){this.render()},n.prototype.createSlider=function(){var t=this.getSliderCfg(),s=new pc((0,M.pi)({container:this.container},t));return s.init(),{component:s,layer:ge.FORE,direction:be.BOTTOM,type:ze.SLIDER}},n.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var s=this.getMinMaxText(this.start,this.end),l=s.minText,f=s.maxText;t=(0,M.pi)((0,M.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:l,maxText:f})}return this.slider.component.update(t),this.slider},n.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},n.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,E.Kn)(this.option)){var s=(0,M.pi)({data:this.getData()},(0,E.U2)(this.option,"trendCfg",{}));t=(0,E.b$)({},t,this.getThemeOptions(),this.option),t=(0,M.pi)((0,M.pi)({},t),{trendCfg:s})}return t.start=(0,E.uZ)(Math.min((0,E.UM)(t.start)?0:t.start,(0,E.UM)(t.end)?1:t.end),0,1),t.end=(0,E.uZ)(Math.max((0,E.UM)(t.start)?0:t.start,(0,E.UM)(t.end)?1:t.end),0,1),t},n.prototype.getData=function(){var t=this.view.getOptions().data,s=(0,M.CR)(this.view.getYScales(),1),l=s[0],f=this.view.getGroupScales();if(f.length){var d=f[0],m=d.field,x=d.ticks;return t.reduce(function(T,P){return P[m]===x[0]&&T.push(P[l.field]),T},[])}return t.map(function(T){return T[l.field]||0})},n.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,E.U2)(t,["components","slider","common"],{})},n.prototype.getMinMaxText=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=!0,m=(0,E.I)(l,f.field);f.isLinear&&(m=m.sort());var x=d?m:m.reverse(),T=(0,E.dp)(l);if(!f||!T)return{};var P=(0,E.dp)(x),D=Math.round(t*(P-1)),B=Math.round(s*(P-1)),U=(0,E.U2)(x,[D]),Y=(0,E.U2)(x,[B]),se=this.getSliderCfg().formatter;return se&&(U=se(U,l[D],D),Y=se(Y,l[B],B)),{minText:U,maxText:Y}},n.prototype.changeViewData=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=(0,E.dp)(l);if(!(!f||!d)){var m=!0,x=(0,E.I)(l,f.field),T=this.view.getXScale().isLinear?x.sort(function(Y,se){return Number(Y)-Number(se)}):x,P=m?T:T.reverse(),D=(0,E.dp)(P),B=Math.round(t*(D-1)),U=Math.round(s*(D-1));this.view.filter(f.field,function(Y,se){var xe=P.indexOf(Y);return xe>-1?kp(xe,B,U):!0}),this.view.render(!0)}},n.prototype.getComponents=function(){return this.slider?[this.slider]:[]},n.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},n}(Ie),wa=Hm,jm=0,iy=8,Bc=32,II=20,PI=function(i){(0,M.ZT)(n,i);function n(t){var s=i.call(this,t)||this;return s.onChangeFn=E.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=l.ratio,d=s.getValidScrollbarCfg().animate;s.ratio=(0,E.uZ)(f,0,1);var m=s.view.getOptions().animate;d||s.view.animate(!1),s.changeViewData(s.getScrollRange(),!0),s.view.animate(m)},s.container=s.view.getLayer(ge.FORE).addGroup(),s.onChangeFn=(0,E.P2)(s.onValueChange,20,{leading:!0}),s.trackLen=0,s.thumbLen=0,s.ratio=0,s.view.on(Ue.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Ue.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){i.prototype.destroy.call(this),this.view.off(Ue.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ue.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},n.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var s=this.view.coordinateBBox.width,l=this.scrollbar.component.get("padding"),f=this.scrollbar.component.getLayoutBBox(),d=new Xo(f.x,f.y,Math.min(f.width,s),f.height).expand(l),m=this.getScrollbarComponentCfg(),x=void 0,T=void 0;if(m.isHorizontal){var P=(0,M.CR)(Qv(this.view.viewBBox,d,be.BOTTOM),2),D=P[0],B=P[1],U=(0,M.CR)(Qv(this.view.coordinateBBox,d,be.BOTTOM),2),Y=U[0],se=U[1];x=Y,T=B}else{var xe=(0,M.CR)(Qv(this.view.viewBBox,d,be.RIGHT),2),D=xe[0],B=xe[1],Ee=(0,M.CR)(Qv(this.view.viewBBox,d,be.RIGHT),2),Y=Ee[0],se=Ee[1];x=Y,T=B}x+=l[3],T+=l[0],this.trackLen?this.scrollbar.component.update((0,M.pi)((0,M.pi)({},m),{x,y:T,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,M.pi)((0,M.pi)({},m),{x,y:T})),this.view.viewBBox=this.view.viewBBox.cut(d,m.isHorizontal?be.BOTTOM:be.RIGHT)}},n.prototype.update=function(){this.render()},n.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},n.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},n.prototype.setValue=function(t){this.onValueChange({ratio:t})},n.prototype.getValue=function(){return this.ratio},n.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,E.U2)(t,["components","scrollbar","common"],{})},n.prototype.getScrollbarTheme=function(t){var s=(0,E.U2)(this.view.getTheme(),["components","scrollbar"]),l=t||{},f=l.thumbHighlightColor,d=(0,M._T)(l,["thumbHighlightColor"]);return{default:(0,E.b$)({},(0,E.U2)(s,["default","style"],{}),d),hover:(0,E.b$)({},(0,E.U2)(s,["hover","style"],{}),{thumbColor:f})}},n.prototype.measureScrollbar=function(){var t=this.view.getXScale(),s=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var l=this.getScrollbarComponentCfg(),f=l.trackLen,d=l.thumbLen;this.trackLen=f,this.thumbLen=d,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=s},n.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,E.uZ)(this.ratio,0,1)),s=Math.min(t+this.step-1,this.cnt-1);return[t,s]},n.prototype.changeViewData=function(t,s){var l=this,f=(0,M.CR)(t,2),d=f[0],m=f[1],x=this.getValidScrollbarCfg().type,T=x!=="vertical",P=(0,E.I)(this.data,this.xScaleCfg.field),D=this.view.getXScale().isLinear?P.sort(function(U,Y){return Number(U)-Number(Y)}):P,B=T?D:D.reverse();this.yScalesCfg.forEach(function(U){l.view.scale(U.field,{formatter:U.formatter,type:U.type,min:U.min,max:U.max,tickMethod:U.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(U){var Y=B.indexOf(U);return Y>-1?kp(Y,d,m):!0}),this.view.render(!0)},n.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,s=t!=="vertical",l=new hd((0,M.pi)((0,M.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return l.init(),{component:l,layer:ge.FORE,direction:s?be.BOTTOM:be.RIGHT,type:ze.SCROLLBAR}},n.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),s=this.trackLen?(0,M.pi)((0,M.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,M.pi)({},t);return this.scrollbar.component.update(s),this.scrollbar},n.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,s=this.getValidScrollbarCfg(),l=s.type,f=s.categorySize,d=l!=="vertical";return Math.floor((d?t.width:t.height)/f)},n.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),s=this.getScrollbarData(),l=(0,E.I)(s,t.field);return(0,E.dp)(l)},n.prototype.getScrollbarComponentCfg=function(){var t=this.view,s=t.coordinateBBox,l=t.viewBBox,f=this.getValidScrollbarCfg(),d=f.type,m=f.padding,x=f.width,T=f.height,P=f.style,D=d!=="vertical",B=(0,M.CR)(m,4),U=B[0],Y=B[1],se=B[2],xe=B[3],Ee=D?{x:s.minX+xe,y:l.maxY-T-se}:{x:l.maxX-x-Y,y:s.minY+U},rt=this.getStep(),vt=this.getCnt(),xt=D?s.width-xe-Y:s.height-U-se,Bt=Math.max(xt*(0,E.uZ)(rt/vt,0,1),II);return(0,M.pi)((0,M.pi)({},this.getThemeOptions()),{x:Ee.x,y:Ee.y,size:D?T:x,isHorizontal:D,trackLen:xt,thumbLen:Bt,thumbOffset:0,theme:this.getScrollbarTheme(P)})},n.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:Bc,width:iy,height:iy,padding:[0,0,0,0],animate:!0,style:{}};return(0,E.Kn)(this.option)&&(t=(0,M.pi)((0,M.pi)({},t),this.option)),(!(0,E.Kn)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[jm,0,jm,0]:[0,jm,0,jm]),t},n.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),s=this.getValidScrollbarCfg(),l=this.view.getOptions().data||[];return t.isReflect("y")&&s.type==="vertical"&&(l=(0,M.ev)([],(0,M.CR)(l),!1).reverse()),l},n}(Ie),OI=PI,kI={fill:"#CCD6EC",opacity:.3};function kw(i,n,t){var s,l,f,d,m,x,T=Uu(i,n,t);if(T.length){T=(0,E.xH)(T);try{for(var P=(0,M.XA)(T),D=P.next();!D.done;D=P.next()){var B=D.value;try{for(var U=(f=void 0,(0,M.XA)(B)),Y=U.next();!Y.done;Y=U.next()){var se=Y.value,xe=se.mappingData,Ee=xe.x,rt=xe.y;se.x=(0,E.kJ)(Ee)?Ee[Ee.length-1]:Ee,se.y=(0,E.kJ)(rt)?rt[rt.length-1]:rt}}catch($r){f={error:$r}}finally{try{Y&&!Y.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch($r){s={error:$r}}finally{try{D&&!D.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}var vt=t.shared;if(vt===!1&&T.length>1){var xt=T[0],Bt=Math.abs(n.y-xt[0].y);try{for(var _r=(0,M.XA)(T),Or=_r.next();!Or.done;Or=_r.next()){var Wr=Or.value,gn=Math.abs(n.y-Wr[0].y);gn<=Bt&&(xt=Wr,Bt=gn)}}catch($r){m={error:$r}}finally{try{Or&&!Or.done&&(x=_r.return)&&x.call(_r)}finally{if(m)throw m.error}}T=[xt]}return(0,E.jj)((0,E.xH)(T))}return[]}var DI=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.show=function(t){var s=this.context.view,l=this.context.event,f=s.getController("tooltip").getTooltipCfg(),d=kw(s,{x:l.x,y:l.y},f);if(!(0,E.Xy)(d,this.items)&&(this.items=d,d.length)){var m=s.getXScale().field,x=d[0].data[m],T=[],P=s.geometries;if((0,E.S6)(P,function(Zi){if(Zi.type==="interval"||Zi.type==="schema"){var yi=Zi.getElementsBy(function(Vi){var Pa=Vi.getData();return Pa[m]===x});T=T.concat(yi)}}),T.length){var D=s.getCoordinate(),B=T[0].shape.getCanvasBBox(),U=T[0].shape.getCanvasBBox(),Y=B;(0,E.S6)(T,function(Zi){var yi=Zi.shape.getCanvasBBox();D.isTransposed?(yi.minY<B.minY&&(B=yi),yi.maxY>U.maxY&&(U=yi)):(yi.minX<B.minX&&(B=yi),yi.maxX>U.maxX&&(U=yi)),Y.x=Math.min(yi.minX,Y.minX),Y.y=Math.min(yi.minY,Y.minY),Y.width=Math.max(yi.maxX,Y.maxX)-Y.x,Y.height=Math.max(yi.maxY,Y.maxY)-Y.y});var se=s.backgroundGroup,xe=s.coordinateBBox,Ee=void 0;if(D.isRect){var rt=s.getXScale(),vt=t||{},xt=vt.appendRatio,Bt=vt.appendWidth;(0,E.UM)(Bt)&&(xt=(0,E.UM)(xt)?rt.isLinear?0:.25:xt,Bt=D.isTransposed?xt*U.height:xt*B.width);var _r=void 0,Or=void 0,Wr=void 0,gn=void 0;D.isTransposed?(_r=xe.minX,Or=Math.min(U.minY,B.minY)-Bt,Wr=xe.width,gn=Y.height+Bt*2):(_r=Math.min(B.minX,U.minX)-Bt,Or=xe.minY,Wr=Y.width+Bt*2,gn=xe.height),Ee=[["M",_r,Or],["L",_r+Wr,Or],["L",_r+Wr,Or+gn],["L",_r,Or+gn],["Z"]]}else{var $r=(0,E.YM)(T),zn=(0,E.Z$)(T),li=dd($r.getModel(),D).startAngle,zi=dd(zn.getModel(),D).endAngle,ia=D.getCenter(),qa=D.getRadius(),Hn=D.innerRadius*qa;Ee=yh(ia.x,ia.y,qa,li,zi,Hn)}if(this.regionPath)this.regionPath.attr("path",Ee),this.regionPath.show();else{var Di=(0,E.U2)(t,"style",kI);this.regionPath=se.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,M.pi)((0,M.pi)({},Di),{path:Ee})})}}}},n.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},n.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),i.prototype.destroy.call(this)},n}(In),LI=DI,ub=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.show=function(){var t=this.context,s=t.event,l=t.view,f=l.isTooltipLocked();if(!f){var d=this.timeStamp,m=+new Date,x=(0,E.U2)(t.view.getOptions(),"tooltip.showDelay",16);if(m-d>x){var T=this.location,P={x:s.x,y:s.y};(!T||!(0,E.Xy)(T,P))&&this.showTooltip(l,P),this.timeStamp=m,this.location=P}}},n.prototype.hide=function(){var t=this.context.view,s=t.getController("tooltip"),l=this.context.event,f=l.clientX,d=l.clientY;s.isCursorEntered({x:f,y:d})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},n.prototype.showTooltip=function(t,s){t.showTooltip(s)},n.prototype.hideTooltip=function(t){t.hideTooltip()},n}(In),Dw=ub,Lw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.showTooltip=function(t,s){var l=Ct(t);(0,E.S6)(l,function(f){var d=an(t,f,s);f.showTooltip(d)})},n.prototype.hideTooltip=function(t){var s=Ct(t);(0,E.S6)(s,function(l){l.hideTooltip()})},n}(Dw),Fw=Lw,FI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.show=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date;if(f-l>16){var d=this.location,m={x:s.x,y:s.y};(!d||!(0,E.Xy)(d,m))&&this.showTooltip(m),this.timeStamp=f,this.location=m}},n.prototype.hide=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=f.get("tip");this.tooltip.update((0,M.pi)({title:d},t)),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=s.getTheme(),m=(0,E.U2)(d,["components","tooltip","domStyles"],{}),x=new Xd({parent:l.get("el").parentNode,region:f,visible:!1,crosshairs:null,domStyles:(0,M.pi)({},(0,E.b$)({},m,(t={},t[Al]={"max-width":"50%"},t[Zl]={"word-break":"break-all"},t)))});x.init(),x.setCapture(!1),this.tooltip=x},n}(In),mB=FI,BI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t}return n.prototype.hasState=function(t){return t.hasState(this.stateName)},n.prototype.setElementState=function(t,s){t.setState(this.stateName,s)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},n.prototype.clearViewState=function(t){var s=this,l=Hs(t,this.stateName);(0,E.S6)(l,function(f){s.setElementState(f,!1)})},n}(In),lb=BI;function Bw(i){return(0,E.U2)(i.get("delegateObject"),"item")}var NI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return n.prototype.isItemIgnore=function(t,s){var l=this.ignoreListItemStates,f=l.filter(function(d){return s.hasState(t,d)});return!!f.length},n.prototype.setStateByComponent=function(t,s,l){var f=this.context.view,d=t.get("field"),m=ba(f);this.setElementsStateByItem(m,d,s,l)},n.prototype.setStateByElement=function(t,s){this.setElementState(t,s)},n.prototype.isMathItem=function(t,s,l){var f=this.context.view,d=Br(f,s),m=yu(t,s);return!(0,E.UM)(m)&&l.name===d.getText(m)},n.prototype.setElementsStateByItem=function(t,s,l,f){var d=this;(0,E.S6)(t,function(m){d.isMathItem(m,s,l)&&m.setState(d.stateName,f)})},n.prototype.setStateEnable=function(t){var s=hs(this.context);if(s)su(this.context)&&this.setStateByElement(s,t);else{var l=Vo(this.context);if(Vs(l)){var f=l.item,d=l.component;if(f&&d&&!this.isItemIgnore(f,d)){var m=this.context.event.gEvent;if(m&&m.fromShape&&m.toShape&&Bw(m.fromShape)===Bw(m.toShape))return;this.setStateByComponent(d,f,t)}}}},n.prototype.toggle=function(){var t=hs(this.context);if(t){var s=t.hasState(this.stateName);this.setElementState(t,!s)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(lb),cb=NI,zI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(cb),UI=zI,ZI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.cache={},t}return n.prototype.getColorScale=function(t,s){var l=s.geometry.getAttribute("color");if(!l)return null;var f=t.getScaleByField(l.getFields()[0]);return f},n.prototype.getLinkPath=function(t,s){var l=this.context.view,f=l.getCoordinate().isTransposed,d=t.shape.getCanvasBBox(),m=s.shape.getCanvasBBox(),x=f?[["M",d.minX,d.minY],["L",m.minX,m.maxY],["L",m.maxX,m.maxY],["L",d.maxX,d.minY],["Z"]]:[["M",d.maxX,d.minY],["L",m.minX,m.minY],["L",m.minX,m.maxY],["L",d.maxX,d.maxY],["Z"]];return x},n.prototype.addLinkShape=function(t,s,l,f){var d={opacity:.4,fill:s.shape.attr("fill")};t.addShape({type:"path",attrs:(0,M.pi)((0,M.pi)({},(0,E.b$)({},d,(0,E.mf)(f)?f(d,s):f)),{path:this.getLinkPath(s,l)})})},n.prototype.linkByElement=function(t,s){var l=this,f=this.context.view,d=this.getColorScale(f,t);if(d){var m=yu(t,d.field);if(!this.cache[m]){var x=xo(f,d.field,m),T=this.linkGroup,P=T.addGroup();this.cache[m]=P;var D=x.length;(0,E.S6)(x,function(B,U){if(U<D-1){var Y=x[U+1];l.addLinkShape(P,B,Y,s)}})}}},n.prototype.removeLink=function(t){var s=this.getColorScale(this.context.view,t);if(s){var l=yu(t,s.field);this.cache[l]&&(this.cache[l].remove(),this.cache[l]=null)}},n.prototype.link=function(t){var s=this.context;this.linkGroup||(this.linkGroup=s.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var l=hs(s);l&&this.linkByElement(l,t==null?void 0:t.style)},n.prototype.unlink=function(){var t=hs(this.context);t&&this.removeLink(t)},n.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},n}(In),VI=ZI,Nw=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},n.prototype.getIntersectElements=function(){var t=null;if(Qs(this.context))t=As(this.context,10);else{var s=this.startPoint,l=this.isStarted?this.getCurrentPoint():this.endPoint;if(!s||!l)return;var f={minX:Math.min(s.x,l.x),minY:Math.min(s.y,l.y),maxX:Math.max(s.x,l.x),maxY:Math.max(s.y,l.y)},d=this.context.view;t=yn(d,f)}return t},n.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var s=ba(this.context.view),l=this.getIntersectElements();l&&l.length?this.effectByRecord?this.setSiblingsStateByRecord(l,t):this.setElementsState(l,t,s):this.clear()}},n.prototype.setSiblingsStateByRecord=function(t,s){var l=this,f=this.context.view,d=Ct(f),m=t.map(function(P){return P.getModel().data}),x=f.getXScale().field,T=f.getYScales()[0].field;(0,E.S6)(d,function(P){var D=ba(P),B=D.filter(function(U){var Y=U.getModel().data;return Pr(m,Y,x,T)});l.setElementsState(B,s,D)})},n.prototype.setSiblingsState=function(t){var s=this,l=this.context.view,f=Ct(l);Qs(this.context)&&(0,E.S6)(f,function(d){var m=ba(d),x=Yu(s.context,d,10);x&&x.length?s.setElementsState(x,t,m):s.clearViewState(d)})},n.prototype.setElementsState=function(t,s,l){var f=this;(0,E.S6)(l,function(d){t.includes(d)?f.setElementState(d,s):f.setElementState(d,!1)})},n.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},n.prototype.clear=function(){var t=this,s=this.context.view;if(this.effectSiblings){var l=Ct(s);(0,E.S6)(l,function(f){t.clearViewState(f)})}else this.clearViewState(s)},n}(lb),fb=Nw,HI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(fb),jI=HI,zw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setStateEnable=function(t){var s=hs(this.context);if(s){if(!su(this.context))return;t?(this.clear(),this.setElementState(s,!0)):this.hasState(s)&&this.setElementState(s,!1)}},n.prototype.toggle=function(){var t=hs(this.context);if(t){var s=this.hasState(t);s||this.clear(),this.setElementState(t,!s)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(lb),hb=zw,WI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(hb),GI=WI,ay="inactive",oy="active";function k_(i){var n=ba(i);(0,E.S6)(n,function(t){t.hasState(oy)&&t.setState(oy,!1),t.hasState(ay)&&t.setState(ay,!1)})}function Uw(i,n,t){(0,E.S6)(i,function(s){n(s)?(s.hasState(ay)&&s.setState(ay,!1),s.setState(oy,t)):(s.hasState(oy)&&s.setState(oy,!1),s.setState(ay,t))})}var Ng=Le.INACTIVE,cv=Le.ACTIVE,$I=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=cv,t}return n.prototype.setElementsStateByItem=function(t,s,l,f){var d=this,m=function(x){return d.isMathItem(x,s,l)};this.setHighlightBy(t,m,f)},n.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Ng)&&t.setState(Ng,!1),t.setState(cv,!0)):t.hasState(cv)||t.setState(Ng,!0)},n.prototype.setHighlightBy=function(t,s,l){var f=this;if(l)(0,E.S6)(t,function(x){f.setElementHighlight(x,s)});else{var d=Hs(this.context.view,cv),m=!0;(0,E.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,E.S6)(t,function(x){s(x)&&(x.hasState(cv)&&x.setState(cv,!1),x.setState(Ng,!0))})}},n.prototype.setElementState=function(t,s){var l=this.context.view,f=ba(l);this.setHighlightBy(f,function(d){return t===d},s)},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var t=this.context.view;k_(t)},n}(cb),pb=$I,Zw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setStateByElement=function(t,s){var l=this.context.view,f=t.geometry.getAttribute("color");if(f){var d=l.getScaleByField(f.getFields()[0]),m=yu(t,d.field),x=ba(l),T=x.filter(function(P){return yu(P,d.field)===m});this.setHighlightBy(x,function(P){return T.includes(P)},s)}},n}(pb),XI=Zw,Vw=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Ng)&&t.setState(Ng,!1),t.setState(cv,!0)):(t.setState(Ng,!0),t.hasState(cv)&&t.setState(cv,!1))},n.prototype.setStateByElement=function(t,s){var l=this.context.view,f=l.getXScale(),d=yu(t,f.field),m=ba(l),x=m.filter(function(T){return yu(T,f.field)===d});this.setHighlightBy(m,function(T){return x.includes(T)},s)},n.prototype.toggle=function(){var t=hs(this.context);if(t){var s=t.hasState(this.stateName);this.setStateByElement(t,!s)}},n}(pb),db=Vw,Ad;(function(i){i.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",i.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",i.BEFORE_CLEAR="element-range-highlight:beforeclear",i.AFTER_CLEAR="element-range-highlight:afterclear"})(Ad||(Ad={}));var YI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.clearViewState=function(t){k_(t)},n.prototype.highlight=function(){var t=this.context,s=t.view,l=t.event,f=this.getIntersectElements(),d={view:s,event:l,highlightElements:f};s.emit(Ad.BEFORE_HIGHLIGHT,Ya.fromData(s,Ad.BEFORE_HIGHLIGHT,d)),this.setState(),s.emit(Ad.AFTER_HIGHLIGHT,Ya.fromData(s,Ad.AFTER_HIGHLIGHT,d))},n.prototype.clear=function(){var t=this.context.view;t.emit(Ad.BEFORE_CLEAR,Ya.fromData(t,Ad.BEFORE_CLEAR,{})),i.prototype.clear.call(this),t.emit(Ad.AFTER_CLEAR,Ya.fromData(t,Ad.AFTER_CLEAR,{}))},n.prototype.setElementsState=function(t,s,l){Uw(l,function(f){return t.indexOf(f)>=0},s)},n}(fb),Hw=YI,KI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.highlight=function(){this.setState()},n.prototype.setElementState=function(t,s){var l=this.context.view,f=ba(l);Uw(f,function(d){return t===d},s)},n.prototype.clear=function(){var t=this.context.view;k_(t)},n}(hb),qI=KI,QI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(fb),Wm=QI,JI=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(cb),eP=JI,tP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(hb),rP=tP,nP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return n.prototype.getTriggerListInfo=function(){var t=Vo(this.context),s=null;return Vs(t)&&(s={item:t.item,list:t.component}),s},n.prototype.getAllowComponents=function(){var t=this,s=this.context.view,l=Xa(s),f=[];return(0,E.S6)(l,function(d){d.isList()&&t.allowSetStateByElement(d)&&f.push(d)}),f},n.prototype.hasState=function(t,s){return t.hasState(s,this.stateName)},n.prototype.clearAllComponentsState=function(){var t=this,s=this.getAllowComponents();(0,E.S6)(s,function(l){l.clearItemsState(t.stateName)})},n.prototype.allowSetStateByElement=function(t){var s=t.get("field");if(!s)return!1;if(this.cfg&&this.cfg.componentNames){var l=t.get("name");if(this.cfg.componentNames.indexOf(l)===-1)return!1}var f=this.context.view,d=Br(f,s);return d&&d.isCategory},n.prototype.allowSetStateByItem=function(t,s){var l=this.ignoreItemStates;if(l.length){var f=l.filter(function(d){return s.hasState(t,d)});return f.length===0}return!0},n.prototype.setStateByElement=function(t,s,l){var f=t.get("field"),d=this.context.view,m=Br(d,f),x=yu(s,f),T=m.getText(x);this.setItemsState(t,T,l)},n.prototype.setStateEnable=function(t){var s=this,l=hs(this.context);if(l){var f=this.getAllowComponents();(0,E.S6)(f,function(T){s.setStateByElement(T,l,t)})}else{var d=Vo(this.context);if(Vs(d)){var m=d.item,x=d.component;this.allowSetStateByElement(x)&&this.allowSetStateByItem(m,x)&&this.setItemState(x,m,t)}}},n.prototype.setItemsState=function(t,s,l){var f=this,d=t.getItems();(0,E.S6)(d,function(m){m.name===s&&f.setItemState(t,m,l)})},n.prototype.setItemState=function(t,s,l){t.setItemState(s,this.stateName,l)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.reset=function(){this.setStateEnable(!1)},n.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=this.hasState(s,l);this.setItemState(s,l,!f)}},n.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},n}(In),zg=nP,iP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(zg),aP=iP,sy="inactive",jw="active";function oP(i){var n=i.getItems();(0,E.S6)(n,function(t){i.hasState(t,jw)&&i.setItemState(t,jw,!1),i.hasState(t,sy)&&i.setItemState(t,sy,!1)})}var Gm="inactive",$m="active",sP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=$m,t.ignoreItemStates=["unchecked"],t}return n.prototype.setItemsState=function(t,s,l){this.setHighlightBy(t,function(f){return f.name===s},l)},n.prototype.setItemState=function(t,s,l){var f=t.getItems();this.setHighlightBy(t,function(d){return d===s},l)},n.prototype.setHighlightBy=function(t,s,l){var f=t.getItems();if(l)(0,E.S6)(f,function(x){s(x)?(t.hasState(x,Gm)&&t.setItemState(x,Gm,!1),t.setItemState(x,$m,!0)):t.hasState(x,$m)||t.setItemState(x,Gm,!0)});else{var d=t.getItemsByState($m),m=!0;(0,E.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,E.S6)(f,function(x){s(x)&&(t.hasState(x,$m)&&t.setItemState(x,$m,!1),t.setItemState(x,Gm,!0))})}},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)oP(t.list);else{var s=this.getAllowComponents();(0,E.S6)(s,function(l){l.clearItemsState($m),l.clearItemsState(Gm)})}},n}(zg),Ww=sP,yB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(zg),_B=yB,uP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="unchecked",t}return n.prototype.unchecked=function(){this.setState()},n}(zg),lP=uP,Md="unchecked",vb="checked",cP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=vb,t}return n.prototype.setItemState=function(t,s,l){this.setCheckedBy(t,function(f){return f===s},l)},n.prototype.setCheckedBy=function(t,s,l){var f=t.getItems();l&&(0,E.S6)(f,function(d){s(d)?(t.hasState(d,Md)&&t.setItemState(d,Md,!1),t.setItemState(d,vb,!0)):t.hasState(d,vb)||t.setItemState(d,Md,!0)})},n.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=!(0,E.G)(s.getItems(),function(d){return s.hasState(d,Md)});f||s.hasState(l,Md)?this.setItemState(s,l,!0):this.reset()}},n.prototype.checked=function(){this.setState()},n.prototype.reset=function(){var t=this.getAllowComponents();(0,E.S6)(t,function(s){s.clearItemsState(vb),s.clearItemsState(Md)})},n}(zg),xB=cP,Xm="unchecked",fP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.toggle=function(){var t,s,l,f,d,m,x,T,P=this.getTriggerListInfo();if(P!=null&&P.item){var D=P.list,B=P.item,U=D.getItems(),Y=U.filter(function($r){return!D.hasState($r,Xm)}),se=U.filter(function($r){return D.hasState($r,Xm)}),xe=Y[0];if(U.length===Y.length)try{for(var Ee=(0,M.XA)(U),rt=Ee.next();!rt.done;rt=Ee.next()){var vt=rt.value;D.setItemState(vt,Xm,vt.id!==B.id)}}catch($r){t={error:$r}}finally{try{rt&&!rt.done&&(s=Ee.return)&&s.call(Ee)}finally{if(t)throw t.error}}else if(U.length-se.length===1)if(xe.id===B.id)try{for(var xt=(0,M.XA)(U),Bt=xt.next();!Bt.done;Bt=xt.next()){var vt=Bt.value;D.setItemState(vt,Xm,!1)}}catch($r){l={error:$r}}finally{try{Bt&&!Bt.done&&(f=xt.return)&&f.call(xt)}finally{if(l)throw l.error}}else try{for(var _r=(0,M.XA)(U),Or=_r.next();!Or.done;Or=_r.next()){var vt=Or.value;D.setItemState(vt,Xm,vt.id!==B.id)}}catch($r){d={error:$r}}finally{try{Or&&!Or.done&&(m=_r.return)&&m.call(_r)}finally{if(d)throw d.error}}else try{for(var Wr=(0,M.XA)(U),gn=Wr.next();!gn.done;gn=Wr.next()){var vt=gn.value;D.setItemState(vt,Xm,vt.id!==B.id)}}catch($r){x={error:$r}}finally{try{gn&&!gn.done&&(T=Wr.return)&&T.call(Wr)}finally{if(x)throw x.error}}}},n}(zg),hP=fP,pP="showRadio",gb="legend-radio-tip",bB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.show=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,pP,!0)}},n.prototype.hide=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,pP,!1)}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.showTip=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date,d=this.context.event.target;if(f-l>16&&d.get("name")==="legend-item-radio"){var m=this.location,x={x:s.x,y:s.y};this.timeStamp=f,this.location=x,(!m||!(0,E.Xy)(m,x))&&this.showTooltip(x)}},n.prototype.hideTip=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=s.view.getCanvas().get("el").getBoundingClientRect(),m=d.x,x=d.y;this.tooltip.update((0,M.pi)((0,M.pi)({title:f.get("tip")},t),{x:t.x+m,y:t.y+x})),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=(t={},t[Al]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Zl]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(gb)&&document.body.removeChild(document.getElementById(gb));var l=new Xd({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:s,containerId:gb});l.init(),l.setCapture(!1),this.tooltip=l},n}(zg),SB=bB,EB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var s="mask:".concat(t),l=this.context.view,f=this.context.event;l.emit(s,{target:this.maskShape,shape:this.maskShape,points:this.points,x:f.x,y:f.y})},n.prototype.createMask=function(){var t=this.context.view,s=this.getMaskAttrs(),l=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,M.pi)({fill:"#C5D4EB",opacity:.3},s)});return l},n.prototype.getMaskPath=function(){return[]},n.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},n.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},n.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.points;(0,E.S6)(d,function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},n.prototype.updateMask=function(t){var s=(0,E.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(s)},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},n.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},n.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},n.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,i.prototype.destroy.call(this)},n}(In),mb=EB;function Gw(i){var n=(0,E.Z$)(i),t=0,s=0,l=0;if(i.length){var f=i[0];t=Yo(f,n)/2,s=(n.x+f.x)/2,l=(n.y+f.y)/2}return{x:s,y:l,r:t}}var wB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="circle",t}return n.prototype.getMaskAttrs=function(){return Gw(this.points)},n}(mb),$w=wB;function dP(i){return{start:(0,E.YM)(i),end:(0,E.Z$)(i)}}function Xw(i,n){var t=Math.min(i.x,n.x),s=Math.min(i.y,n.y),l=Math.abs(n.x-i.x),f=Math.abs(n.y-i.y);return{x:t,y:s,width:l,height:f}}var CB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="rect",t}return n.prototype.getRegion=function(){return dP(this.points)},n.prototype.getMaskAttrs=function(){var t=this.getRegion(),s=t.start,l=t.end;return Xw(s,l)},n}(mb),Yw=CB;function Kw(i){i.x=(0,E.uZ)(i.x,0,1),i.y=(0,E.uZ)(i.y,0,1)}function yb(i,n,t,s){var l=null,f=null,d=s.invert((0,E.YM)(i)),m=s.invert((0,E.Z$)(i));return t&&(Kw(d),Kw(m)),n==="x"?(l=s.convert({x:d.x,y:0}),f=s.convert({x:m.x,y:1})):(l=s.convert({x:0,y:d.y}),f=s.convert({x:1,y:m.y})),{start:l,end:f}}var qw=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return n.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return yb(this.points,this.dim,this.inPlot,t)},n}(Yw),Rd=qw;function D_(i){var n=[];return i.length&&((0,E.S6)(i,function(t,s){s===0?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])}),n.push(["L",i[0].x,i[0].y])),n}function Mh(i){return{path:D_(i)}}var TB=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return D_(this.points)},n.prototype.getMaskAttrs=function(){return Mh(this.points)},n.prototype.addPoint=function(){this.resize()},n}(mb),vP=TB;function _b(i){return mt(i,!0)}function gP(i){return{path:_b(i)}}var AB=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return _b(this.points)},n.prototype.getMaskAttrs=function(){return gP(this.points)},n}(vP),mP=AB,MB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var s="".concat(this.maskType,":").concat(t),l=this.context.view,f=this.context.event,d={type:this.shapeType,name:this.maskType,get:function(m){return d.hasOwnProperty(m)?d[m]:void 0}};l.emit(s,{target:d,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:f.x,y:f.y})},n.prototype.createMask=function(t){var s=this.context.view,l=this.recordPoints[t],f=this.getMaskAttrs(l),d=s.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,M.pi)({fill:"#C5D4EB",opacity:.3},f)});this.maskShapes.push(d)},n.prototype.getMaskPath=function(t){return[]},n.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.show()}),this.emitEvent("show"))},n.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var s=this.recordPoints.length-1;this.createMask(s),this.updateShapesCapture(!1),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},n.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.getCurMaskShapeIndex();d>-1&&(this.recordPoints[d].forEach(function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},n.prototype.updateMask=function(t){var s=this;this.recordPoints.forEach(function(l,f){var d=(0,E.b$)({},s.getMaskAttrs(l),t);s.maskShapes[f].attr(d)})},n.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},n.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.hide()}),this.emitEvent("hide"))},n.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},n.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(t){return t.remove()}),this.maskShapes=[],this.preMovePoint=null},n.prototype.clear=function(){var t=this.getCurMaskShapeIndex();t===-1?(this.recordPointClear(),this.maskShapes.forEach(function(s){return s.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},n.prototype.destroy=function(){this.clear(),i.prototype.destroy.call(this)},n.prototype.getRecordPoints=function(){var t;return(0,M.ev)([],(0,M.CR)((t=this.recordPoints)!==null&&t!==void 0?t:[]),!1)},n.prototype.recordPointStart=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint();this.recordPoints=(0,M.ev)((0,M.ev)([],(0,M.CR)(t),!1),[[s]],!1)},n.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint(),l=t.splice(-1,1)[0]||[];l.push(s),this.recordPoints=(0,M.ev)((0,M.ev)([],(0,M.CR)(t),!1),[l],!1)},n.prototype.recordPointClear=function(){this.recordPoints=[]},n.prototype.updateShapesCapture=function(t){this.maskShapes.forEach(function(s){return s.set("capture",t)})},n.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex(function(s){var l=s.attrs,f=l.width,d=l.height,m=l.r,x=f===0||d===0||m===0;return!x&&s.isHit(t.x,t.y)})},n}(In),Qw=MB,yP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="rect",t}return n.prototype.getRegion=function(t){return dP(t)},n.prototype.getMaskAttrs=function(t){var s=this.getRegion(t),l=s.start,f=s.end;return Xw(l,f)},n}(Qw),_P=yP,RB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return n.prototype.getRegion=function(t){var s=this.context.view.getCoordinate();return yb(t,this.dim,this.inPlot,s)},n}(_P),Jw=RB,xP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=Gw,t}return n}(Qw),bP=xP,IB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.getMaskPath=D_,t.getMaskAttrs=Mh,t}return n.prototype.addPoint=function(){this.resize()},n}(Qw),SP=IB,PB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.getMaskPath=_b,t.getMaskAttrs=gP,t}return n}(SP),EP=PB,OB=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.setCursor=function(t){var s=this.context.view;s.getCanvas().setCursor(t)},n.prototype.default=function(){this.setCursor("default")},n.prototype.pointer=function(){this.setCursor("pointer")},n.prototype.move=function(){this.setCursor("move")},n.prototype.crosshair=function(){this.setCursor("crosshair")},n.prototype.wait=function(){this.setCursor("wait")},n.prototype.help=function(){this.setCursor("help")},n.prototype.text=function(){this.setCursor("text")},n.prototype.eResize=function(){this.setCursor("e-resize")},n.prototype.wResize=function(){this.setCursor("w-resize")},n.prototype.nResize=function(){this.setCursor("n-resize")},n.prototype.sResize=function(){this.setCursor("s-resize")},n.prototype.neResize=function(){this.setCursor("ne-resize")},n.prototype.nwResize=function(){this.setCursor("nw-resize")},n.prototype.seResize=function(){this.setCursor("se-resize")},n.prototype.swResize=function(){this.setCursor("sw-resize")},n.prototype.nsResize=function(){this.setCursor("ns-resize")},n.prototype.ewResize=function(){this.setCursor("ew-resize")},n.prototype.zoomIn=function(){this.setCursor("zoom-in")},n.prototype.zoomOut=function(){this.setCursor("zoom-out")},n}(In),kB=OB,wP=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.filterView=function(t,s,l){var f=this;t.getScaleByField(s)&&t.filter(s,l),t.views&&t.views.length&&(0,E.S6)(t.views,function(d){f.filterView(d,s,l)})},n.prototype.filter=function(){var t=Vo(this.context);if(t){var s=this.context.view,l=t.component,f=l.get("field");if(Vs(t)){if(f){var d=l.getItemsByState("unchecked"),m=Br(s,f),x=d.map(function(U){return U.name});x.length?this.filterView(s,f,function(U){var Y=m.getText(U);return!x.includes(Y)}):this.filterView(s,f,null),s.render(!0)}}else if(Fs(t)){var T=l.getValue(),P=(0,M.CR)(T,2),D=P[0],B=P[1];this.filterView(s,f,function(U){return U>=D&&U<=B}),s.render(!0)}}},n}(In),DB=wP;function eC(i,n,t,s){var l=Math.min(t[n],s[n]),f=Math.max(t[n],s[n]),d=(0,M.CR)(i.range,2),m=d[0],x=d[1];if(l<m&&(l=m),f>x&&(f=x),l===x&&f===x)return null;var T=i.invert(l),P=i.invert(f);if(i.isCategory){var D=i.values.indexOf(T),B=i.values.indexOf(P),U=i.values.slice(D,B+1);return function(Y){return U.includes(Y)}}else return function(Y){return Y>=T&&Y<=P}}var Yf;(function(i){i.FILTER="brush-filter-processing",i.RESET="brush-filter-reset",i.BEFORE_FILTER="brush-filter:beforefilter",i.AFTER_FILTER="brush-filter:afterfilter",i.BEFORE_RESET="brush-filter:beforereset",i.AFTER_RESET="brush-filter:afterreset"})(Yf||(Yf={}));var CP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},n.prototype.filter=function(){var t,s;if(Qs(this.context)){var l=this.context.event.target,f=l.getCanvasBBox();t={x:f.x,y:f.y},s={x:f.maxX,y:f.maxY}}else{if(!this.isStarted)return;t=this.startPoint,s=this.context.getCurrentPoint()}if(!(Math.abs(t.x-s.x)<5||Math.abs(t.x-s.y)<5)){var d=this.context,m=d.view,x=d.event,T={view:m,event:x,dims:this.dims};m.emit(Yf.BEFORE_FILTER,Ya.fromData(m,Yf.BEFORE_FILTER,T));var P=m.getCoordinate(),D=P.invert(s),B=P.invert(t);if(this.hasDim("x")){var U=m.getXScale(),Y=eC(U,"x",D,B);this.filterView(m,U.field,Y)}if(this.hasDim("y")){var se=m.getYScales()[0],Y=eC(se,"y",D,B);this.filterView(m,se.field,Y)}this.reRender(m,{source:Yf.FILTER}),m.emit(Yf.AFTER_FILTER,Ya.fromData(m,Yf.AFTER_FILTER,T))}},n.prototype.end=function(){this.isStarted=!1},n.prototype.reset=function(){var t=this.context.view;if(t.emit(Yf.BEFORE_RESET,Ya.fromData(t,Yf.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var s=t.getXScale();this.filterView(t,s.field,null)}if(this.hasDim("y")){var l=t.getYScales()[0];this.filterView(t,l.field,null)}this.reRender(t,{source:Yf.RESET}),t.emit(Yf.AFTER_RESET,Ya.fromData(t,Yf.AFTER_RESET,{}))},n.prototype.filterView=function(t,s,l){t.filter(s,l)},n.prototype.reRender=function(t,s){t.render(!0,s)},n}(In),Wp=CP,tC=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.filterView=function(t,s,l){var f=Ct(t);(0,E.S6)(f,function(d){d.filter(s,l)})},n.prototype.reRender=function(t){var s=Ct(t);(0,E.S6)(s,function(l){l.render(!0)})},n}(Wp),L_=tC,rC=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.filter=function(){var t=Vo(this.context),s=this.context.view,l=ba(s);if(Qs(this.context)){var f=As(this.context,10);f&&(0,E.S6)(l,function(se){f.includes(se)?se.show():se.hide()})}else if(t){var d=t.component,m=d.get("field");if(Vs(t)){if(m){var x=d.getItemsByState("unchecked"),T=Br(s,m),P=x.map(function(se){return se.name});(0,E.S6)(l,function(se){var xe=yu(se,m),Ee=T.getText(xe);P.indexOf(Ee)>=0?se.hide():se.show()})}}else if(Fs(t)){var D=d.getValue(),B=(0,M.CR)(D,2),U=B[0],Y=B[1];(0,E.S6)(l,function(se){var xe=yu(se,m);xe>=U&&xe<=Y?se.show():se.hide()})}}},n.prototype.clear=function(){var t=ba(this.context.view);(0,E.S6)(t,function(s){s.show()})},n.prototype.reset=function(){this.clear()},n}(In),TP=rC,AP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.byRecord=!1,t}return n.prototype.filter=function(){Qs(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},n.prototype.filterByRecord=function(){var t=this.context.view,s=As(this.context,10);if(s){var l=t.getXScale().field,f=t.getYScales()[0].field,d=s.map(function(x){return x.getModel().data}),m=Ct(t);(0,E.S6)(m,function(x){var T=ba(x);(0,E.S6)(T,function(P){var D=P.getModel().data;Pr(d,D,l,f)?P.show():P.hide()})})}},n.prototype.filterByBBox=function(){var t=this,s=this.context.view,l=Ct(s);(0,E.S6)(l,function(f){var d=Yu(t.context,f,10),m=ba(f);d&&(0,E.S6)(m,function(x){d.includes(x)?x.show():x.hide()})})},n.prototype.reset=function(){var t=Ct(this.context.view);(0,E.S6)(t,function(s){var l=ba(s);(0,E.S6)(l,function(f){f.show()})})},n}(In),nC=AP,MP=10,iC=5,xb=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return n.prototype.getButtonCfg=function(){return(0,E.b$)(this.buttonCfg,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=s.addShape({type:"text",name:"button-text",attrs:(0,M.pi)({text:t.text},t.textStyle)}),f=l.getBBox(),d=bh(t.padding),m=s.addShape({type:"rect",name:"button-rect",attrs:(0,M.pi)({x:f.x-d[3],y:f.y-d[0],width:f.width+d[1]+d[3],height:f.height+d[0]+d[2]},t.style)});m.toBack(),s.on("mouseenter",function(){m.attr(t.activeStyle)}),s.on("mouseleave",function(){m.attr(t.style)}),this.buttonGroup=s},n.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=vo.vs(null,[["t",l.x-d.width-MP,l.y+d.height+iC]]);f.setMatrix(m)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),i.prototype.destroy.call(this)},n}(In),aC=xb,RP=4,IP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},n.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),s=this.context.view,l=this.context.event;this.dragStart?s.emit("drag",{target:l.target,x:l.x,y:l.y}):Yo(t,this.startPoint)>RP&&(s.emit("dragstart",{target:l.target,x:l.x,y:l.y}),this.dragStart=!0)}},n.prototype.end=function(){if(this.dragStart){var t=this.context.view,s=this.context.event;t.emit("dragend",{target:s.target,x:s.x,y:s.y})}this.starting=!1,this.dragStart=!1},n}(In),oC=IP,PP=5,OP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},n.prototype.move=function(){if(this.starting){var t=this.startPoint,s=this.context.getCurrentPoint(),l=Yo(t,s);if(l>PP&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var f=this.context.view,d=vo.vs(this.startMatrix,[["t",s.x-t.x,s.y-t.y]]);f.backgroundGroup.setMatrix(d),f.foregroundGroup.setMatrix(d),f.middleGroup.setMatrix(d)}}},n.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},n.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},n}(In),bb=OP,Sb="x",Eb="y",Nc=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=[Sb,Eb],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.getScale=function(t){var s=this.context.view;return t==="x"?s.getXScale():s.getYScales()[0]},n.prototype.resetDim=function(t){var s=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var l=this.getScale(t);s.scale(l.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},n.prototype.reset=function(){this.resetDim(Sb),this.resetDim(Eb);var t=this.context.view;t.render(!0)},n}(In),sC=Nc,kP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return n.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var s=this.dims;(0,E.S6)(s,function(l){var f=t.getScale(l),d=f.min,m=f.max,x=f.values;t.startCache[l]={min:d,max:m,values:x}})},n.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},n.prototype.translate=function(){var t=this;if(this.starting){var s=this.startPoint,l=this.context.view.getCoordinate(),f=this.context.getCurrentPoint(),d=l.invert(s),m=l.invert(f),x=m.x-d.x,T=m.y-d.y,P=this.context.view,D=this.dims;(0,E.S6)(D,function(B){t.translateDim(B,{x:x*-1,y:T*-1})}),P.render(!0)}},n.prototype.translateDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.translateLinear(t,l,s)}},n.prototype.translateLinear=function(t,s,l){var f=this.context.view,d=this.startCache[t],m=d.min,x=d.max,T=x-m,P=l[t]*T;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:m,max:x}),f.scale(s.field,{nice:!1,min:m+P,max:x+P})},n.prototype.reset=function(){i.prototype.reset.call(this),this.startPoint=null,this.starting=!1},n}(sC),uC=kP,Ym=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.zoomRatio=.05,t}return n.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},n.prototype.zoom=function(t){var s=this,l=this.dims;(0,E.S6)(l,function(f){s.zoomDim(f,t)}),this.context.view.render(!0)},n.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},n.prototype.zoomDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.zoomLinear(t,l,s)}},n.prototype.zoomLinear=function(t,s,l){var f=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:s.min,max:s.max});var d=this.cacheScaleDefs[t],m=d.max-d.min,x=s.min,T=s.max,P=l*m,D=x-P,B=T+P,U=B-D,Y=U/m;B>D&&Y<100&&Y>.01&&f.scale(s.field,{nice:!1,min:x-P,max:T+P})},n}(sC),DP=Ym;function lC(i){var n=i.gEvent.originalEvent;return n.deltaY>0}var LP=1,F_=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.scroll=function(t){var s=this.context,l=s.view,f=s.event;if(l.getOptions().scrollbar){var d=(t==null?void 0:t.wheelDelta)||LP,m=l.getController("scrollbar"),x=l.getXScale(),T=l.getOptions().data,P=(0,E.dp)((0,E.I)(T,x.field)),D=(0,E.dp)(x.values),B=m.getValue(),U=Math.floor((P-D)*B),Y=U+(lC(f)?d:-d),se=d/(P-D)/1e4,xe=(0,E.uZ)(Y/(P-D)+se,0,1);m.setValue(xe)}},n}(In),LB=F_,cC="aixs-description-tooltip",Wa=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.show=function(){var t=this.context,s=Vo(t).axis,l=s.cfg.title,f=l.description,d=l.text,m=l.descriptionTooltipStyle,x=t.event,T=x.x,P=x.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:d||"",customContent:function(){return`
          <div class="`.concat(Al,'" style={').concat(m,`}>
            <div class="`).concat(Zl,`">
              \u5B57\u6BB5\u8BF4\u660E\uFF1A`).concat(f,`
            </div>
          </div>
        `)},x:T,y:P}),this.tooltip.show()},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=new Xd({parent:l.get("el").parentNode,region:f,visible:!1,containerId:cC,domStyles:(0,M.pi)({},(0,E.b$)({},(t={},t[Al]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Zl]={"word-break":"break-all","margin-bottom":"3px"},t)))});d.init(),d.setCapture(!1),this.tooltip=d},n}(In),FP=Wa;vd("dark",Bo($v)),ne("canvas",we),ne("svg",ce),F("Polygon",D2),F("Interval",S3),F("Schema",A3),F("Path",S_),F("Point",w3),F("Line",E3),F("Area",T2),F("Edge",p3),F("Heatmap",A2),F("Violin",B2),Ii("base",Ao),Ii("interval",G2),Ii("pie",Wx),Ii("polar",$2),qi("overlap",X3),qi("distribute",K2),qi("fixed-overlap",rw),qi("hide-overlap",tI),qi("limit-in-shape",W3),qi("limit-in-canvas",j3),qi("limit-in-plot",yw),qi("pie-outer",Z3),qi("adjust-color",rI),qi("interval-adjust-position",oI),qi("interval-hide-overlap",hw),qi("point-adjust-position",lI),qi("pie-spider",H3),qi("path-adjust-position",fI),ur("fade-in",_w),ur("fade-out",Vm),ur("grow-in-x",bw),ur("grow-in-xy",pI),ur("grow-in-y",Sw),ur("scale-in-x",Ew),ur("scale-in-y",ww),ur("wave-in",mI),ur("zoom-in",Cw),ur("zoom-out",yI),ur("position-update",vI),ur("sector-path-update",gI),ur("path-in",dI),ui("rect",SI),ui("mirror",bI),ui("list",ab),ui("matrix",Xf),ui("circle",ry),ui("tree",Aw),ep("axis",vB),ep("legend",zs),ep("tooltip",yt),ep("annotation",wI),ep("slider",wa),ep("scrollbar",OI),Kr("tooltip",Dw),Kr("sibling-tooltip",Fw),Kr("ellipsis-text",mB),Kr("element-active",UI),Kr("element-single-active",GI),Kr("element-range-active",jI),Kr("element-highlight",pb),Kr("element-highlight-by-x",db),Kr("element-highlight-by-color",XI),Kr("element-single-highlight",qI),Kr("element-range-highlight",Hw),Kr("element-sibling-highlight",Hw,{effectSiblings:!0,effectByRecord:!0}),Kr("element-selected",eP),Kr("element-single-selected",rP),Kr("element-range-selected",Wm),Kr("element-link-by-color",VI),Kr("active-region",LI),Kr("list-active",aP),Kr("list-selected",_B),Kr("list-highlight",Ww),Kr("list-unchecked",lP),Kr("list-checked",xB),Kr("list-focus",hP),Kr("list-radio",SB),Kr("legend-item-highlight",Ww,{componentNames:["legend"]}),Kr("axis-label-highlight",Ww,{componentNames:["axis"]}),Kr("axis-description",FP),Kr("rect-mask",Yw),Kr("x-rect-mask",Rd,{dim:"x"}),Kr("y-rect-mask",Rd,{dim:"y"}),Kr("circle-mask",$w),Kr("path-mask",vP),Kr("smooth-path-mask",mP),Kr("rect-multi-mask",_P),Kr("x-rect-multi-mask",Jw,{dim:"x"}),Kr("y-rect-multi-mask",Jw,{dim:"y"}),Kr("circle-multi-mask",bP),Kr("path-multi-mask",SP),Kr("smooth-path-multi-mask",EP),Kr("cursor",kB),Kr("data-filter",DB),Kr("brush",Wp),Kr("brush-x",Wp,{dims:["x"]}),Kr("brush-y",Wp,{dims:["y"]}),Kr("sibling-filter",L_),Kr("sibling-x-filter",L_,{dims:"x"}),Kr("sibling-y-filter",L_,{dims:"y"}),Kr("element-filter",TP),Kr("element-sibling-filter",nC),Kr("element-sibling-filter-record",nC,{byRecord:!0}),Kr("view-drag",oC),Kr("view-move",bb),Kr("scale-translate",uC),Kr("scale-zoom",DP),Kr("reset-button",aC,{name:"reset-button",text:"reset"}),Kr("mousewheel-scroll",LB);function Id(i){return i.isInPlot()}Nn("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Nn("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Nn("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Nn("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Nn("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Nn("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Nn("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Nn("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Nn("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Nn("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Nn("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Nn("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Nn("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Id,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Id,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Id,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Nn("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Nn("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Id,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Id,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Id,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Nn("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Id,action:"path-mask:start"},{trigger:"mousedown",isEnable:Id,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Nn("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:Id,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(i){return!Nu(i)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]}),Nn("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Nn("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(i){return!i.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),Nn("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Nn("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Nn("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),Nn("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),Nn("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function B_(i){return i.gEvent.preventDefault(),i.gEvent.originalEvent.deltaY>0}Nn("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(i){return B_(i.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(i){return!B_(i.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Nn("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),Nn("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var wf=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],Rh;(function(i){i.ERROR="error",i.WARN="warn",i.INFO="log"})(Rh||(Rh={}));var lu="AntV/G2Plot";function wb(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var s=0;return"".concat(lu,": ").concat(i.replace(/%s/g,function(){return"".concat(n[s++])}))}function a8(i,n){for(var t=[],s=2;s<arguments.length;s++)t[s-2]=arguments[s];if(!i){var l=new Error(wb.apply(void 0,__spreadArray([n],t,!1)));throw l.name=lu,l}}function Jv(i,n,t){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];n||console[i](wb.apply(void 0,(0,M.ev)([t],s,!1)))}function ls(i,n){var t={};return i!==null&&typeof i=="object"&&n.forEach(function(s){var l=i[s];l!==void 0&&(t[s]=l)}),t}function N_(i,n){if(!i)return{};var t=i.filter(function(f){var d=(0,E.U2)(f,[n]);return(0,E.hj)(d)&&!isNaN(d)}),s=t.every(function(f){return(0,E.U2)(f,[n])>=0}),l=t.every(function(f){return(0,E.U2)(f,[n])<=0});return s?{min:0}:l?{max:0}:{}}function BP(i,n,t,s,l){if(l===void 0&&(l=[]),!Array.isArray(i))return{nodes:[],links:[]};var f=[],d={},m=-1;return i.forEach(function(x){var T=x[n],P=x[t],D=x[s],B=ls(x,l);d[T]||(d[T]=(0,M.pi)({id:++m,name:T},B)),d[P]||(d[P]=(0,M.pi)({id:++m,name:P},B)),f.push((0,M.pi)({source:d[T].id,target:d[P].id,value:D},B))}),{nodes:Object.values(d).sort(function(x,T){return x.id-T.id}),links:f}}function fv(i,n){var t=(0,E.hX)(i,function(s){var l=s[n];return l===null||typeof l=="number"&&!isNaN(l)});return Jv(Rh.WARN,t.length===i.length,"illegal data existed in chart data."),t}var FB=5,Wl={}.toString,hv=function(i,n){return Wl.call(i)==="[object "+n+"]"},Km=function(i){return hv(i,"Array")},Cb=function(i){return typeof i=="object"&&i!==null},pv=function(i){if(!Cb(i)||!hv(i,"Object"))return!1;for(var n=i;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(i)===n},Ug=function(i,n,t,s){t=t||0,s=s||FB;for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)){var f=n[l];f?pv(f)?(pv(i[l])||(i[l]={}),t<s?Ug(i[l],f,t+1,s):i[l]=n[l]):Km(f)?(i[l]=[],i[l]=i[l].concat(f)):i[l]=f:i[l]=f}},mn=function(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var s=0;s<n.length;s+=1)Ug(i,n[s]);return i};function fC(i){if(!i)return{width:0,height:0};var n=getComputedStyle(i);return{width:(i.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(i.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function Ua(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return function(t){return i.reduce(function(s,l){return l(s)},t)}}function _a(i,n){return i.geometries.find(function(t){return t.type===n})}function Tb(i){return(0,E.u4)(i.geometries,function(n,t){return n.concat(t.elements)},[])}function z_(i){return(0,E.U2)(i,["views","length"],0)<=0?Tb(i):(0,E.u4)(i.views,function(n,t){return n.concat(z_(t))},Tb(i))}function hC(i){return(0,E.U2)(i,["views","length"],0)<=0?i.geometries:(0,E.u4)(i.views,function(n,t){return n.concat(t.geometries)},i.geometries)}function Jl(i){if(!(0,E.P9)(i,"Object"))return i;var n=(0,M.pi)({},i);return n.formatter&&!n.content&&(n.content=n.formatter),n}var Kf;function uy(){return Kf||(Kf=document.createElement("canvas").getContext("2d")),Kf}var U_=(0,E.HP)(function(i,n){n===void 0&&(n={});var t=n.fontSize,s=n.fontFamily,l=s===void 0?"sans-serif":s,f=n.fontWeight,d=n.fontStyle,m=n.fontVariant,x=uy();x.font=[d,f,m,"".concat(t,"px"),l].join(" ");var T=x.measureText((0,E.HD)(i)?i:"");return T.width},function(i,n){return n===void 0&&(n={}),(0,M.ev)([i],(0,E.VO)(n),!0).join("")});function Gp(i){return typeof i=="number"&&!isNaN(i)}function Ab(i,n,t){var s=Math.min(n,t),l=Math.max(n,t);return i>=s&&i<=l}function dv(i){if((0,E.hj)(i))return[i,i,i,i];if((0,E.kJ)(i)){var n=i.length;if(n===1)return[i[0],i[0],i[0],i[0]];if(n===2)return[i[0],i[1],i[0],i[1]];if(n===3)return[i[0],i[1],i[2],i[1]];if(n===4)return i}return[0,0,0,0]}function ly(i,n,t){n===void 0&&(n="bottom"),t===void 0&&(t=25);var s=dv(i),l=[n.startsWith("top")?t:0,n.startsWith("right")?t:0,n.startsWith("bottom")?t:0,n.startsWith("left")?t:0];return[s[0]+l[0],s[1]+l[1],s[2]+l[2],s[3]+l[3]]}function Z_(i){var n=i.map(function(s){return dv(s)}),t=[0,0,0,0];return n.length>0&&(t=t.map(function(s,l){return n.forEach(function(f,d){s+=n[d][l]}),s})),t}function pC(i,n){var t=[];if(i.length){t.push(["M",i[0].x,i[0].y]);for(var s=1,l=i.length;s<l;s+=1){var f=i[s];t.push(["L",f.x,f.y])}n&&t.push(["Z"])}return t}var Mb=function(i,n,t,s){var l=[],f,d,m=!!s,x,T;if(m){x=[1/0,1/0],T=[-1/0,-1/0];for(var P=0,D=i.length;P<D;P++){var B=i[P];x=va.VV([0,0],x,B),T=va.Fp([0,0],T,B)}x=va.VV([0,0],x,s[0]),T=va.Fp([0,0],T,s[1])}for(var P=0,U=i.length;P<U;P++){var B=i[P];if(t)f=i[P?P-1:U-1],d=i[(P+1)%U];else if(P===0||P===U-1){l.push(B);continue}else f=i[P-1],d=i[P+1];var Y=[0,0];Y=va.lu(Y,d,f),Y=va.bA(Y,Y,n);var se=va.TE(B,f),xe=va.TE(B,d),Ee=se+xe;Ee!==0&&(se/=Ee,xe/=Ee);var rt=va.bA([0,0],Y,-se),vt=va.bA([0,0],Y,xe),xt=va.IH([0,0],B,rt),Bt=va.IH([0,0],B,vt);m&&(xt=va.Fp([0,0],xt,x),xt=va.VV([0,0],xt,T),Bt=va.Fp([0,0],Bt,x),Bt=va.VV([0,0],Bt,T)),l.push(xt),l.push(Bt)}return t&&l.push(l.shift()),l};function V_(i,n,t){for(var s=!!n,l=[],f=0,d=i.length;f<d;f+=2)l.push([i[f],i[f+1]]);for(var m=Mb(l,.4,s,t),x=l.length,T=[],P,D,B,f=0;f<x-1;f++)P=m[f*2],D=m[f*2+1],B=l[f+1],T.push(["C",P[0],P[1],D[0],D[1],B[0],B[1]]);return s&&(P=m[x],D=m[x+1],B=l[0],T.push(["C",P[0],P[1],D[0],D[1],B[0],B[1]])),T}function H_(i,n,t){var s=[],l=i[0],f=null;if(i.length<=2)return pC(i,n);for(var d=0,m=i.length;d<m;d++){var x=i[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var T=t||[[0,0],[1,1]],P=V_(s,n,T);return P.unshift(["M",l.x,l.y]),P}function Rb(i){if(!i)return i;var n=i.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return n.map(function(t){return t.toLowerCase()}).join("-")}function Ib(i){var n={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},t=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,E.U2)(i,"fill")&&(n.color=i.fill);var s=ls(i,t),l=s.shadowColor,f=s.shadowBlur,d=f===void 0?0:f,m=s.shadowOffsetX,x=m===void 0?0:m,T=s.shadowOffsetY,P=T===void 0?0:T;n["text-shadow"]="".concat([l,"".concat(x,"px"),"".concat(P,"px"),"".concat(d,"px")].join(" "));var D=ls(i,t),B=D.stroke,U=D.lineWidth,Y=U===void 0?0:U;return n["-webkit-text-stroke"]="".concat(["".concat(Y,"px"),B].join(" ")),(0,E.S6)(i,function(se,xe){["fontSize"].includes(xe)&&(0,E.hj)(se)?n[Rb(xe)]="".concat(se,"px"):xe&&!t.includes(xe)&&(n[Rb(xe)]="".concat(se))}),n}function dC(i,n){i.style["pointer-events"]="none",(0,E.S6)(n,function(t,s){s&&t&&(i.style[s]=t)})}var j_=function(i,n,t){var s=n.statistic,l=n.plotType,f=s.title,d=s.content;[f,d].forEach(function(m,x){if(m){var T="";x===0?T=d?"translate(-50%, -100%)":"translate(-50%, -50%)":T=f?"translate(-50%, 0)":"translate(-50%, -50%)";var P=(0,E.mf)(m.style)?m.style(t):m.style;i.annotation().html((0,M.pi)({position:["50%","50%"],html:function(D,B){var U=B.getCoordinate(),Y=0;if(l==="pie"||l==="ring-progress")Y=U.getRadius()*U.innerRadius*2;else if(l==="liquid"){var se=(0,E.U2)(B.geometries,[0,"elements",0,"shape"]);if(se){var xe=se.find(function(xt){return xt.get("name")==="wrap"}),Ee=xe.getCanvasBBox().width;Y=Ee}}else Y||(Y=U.getWidth());dC(D,(0,M.pi)({width:"".concat(Y,"px"),transform:T},Ib(P)));var rt=B.getData();if(m.customHtml)return m.customHtml(D,B,t,rt);var vt=m.content;return m.formatter&&(vt=m.formatter(t,rt)),vt?(0,E.HD)(vt)?vt:"".concat(vt):"<div></div>"},key:"".concat(x===0?"top":"bottom","-statistic")},ls(m,["offsetX","offsetY","rotate","style","formatter"])))}})},BB=function(i,n,t){var s=n.statistic,l=s.title,f=s.content;[l,f].forEach(function(d){if(d){var m=(0,E.mf)(d.style)?d.style(t):d.style;i.annotation().html((0,M.pi)({position:["50%","100%"],html:function(x,T){var P=T.getCoordinate(),D=T.views[0].getCoordinate(),B=D.getCenter(),U=D.getRadius(),Y=Math.max(Math.sin(D.startAngle),Math.sin(D.endAngle))*U,se=B.y+Y-P.y.start-parseFloat((0,E.U2)(m,"fontSize",0)),xe=P.getRadius()*P.innerRadius*2;dC(x,(0,M.pi)({width:"".concat(xe,"px"),transform:"translate(-50%, ".concat(se,"px)")},Ib(m)));var Ee=T.getData();if(d.customHtml)return d.customHtml(x,T,t,Ee);var rt=d.content;return d.formatter&&(rt=d.formatter(t,Ee)),rt?(0,E.HD)(rt)?rt:"".concat(rt):"<div></div>"}},ls(d,["offsetX","offsetY","rotate","style","formatter"])))}})};function vC(i,n){return n?(0,E.u4)(n,function(t,s,l){return t.replace(new RegExp("{\\s*".concat(l,"\\s*}"),"g"),s)},i):i}function So(i,n){return i.views.find(function(t){return t.id===n})}function qm(i){var n=i.parent;return n?n.views:[]}function Zg(i){return qm(i).filter(function(n){return n!==i})}function cy(i,n,t){t===void 0&&(t=i.geometries),typeof n=="boolean"?i.animate(n):i.animate(!0),(0,E.S6)(t,function(s){var l;(0,E.mf)(n)?l=n(s.type||s.shapeType,s)||!0:l=n,s.animate(l)})}function W_(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function fy(i,n){n===void 0&&(n=i);var t=document.createElement("canvas"),s=W_();t.width=i*s,t.height=n*s,t.style.width="".concat(i,"px"),t.style.height="".concat(n,"px");var l=t.getContext("2d");return l.scale(s,s),t}function Pb(i,n,t,s){s===void 0&&(s=t);var l=n.backgroundColor,f=n.opacity;i.globalAlpha=f,i.fillStyle=l,i.beginPath(),i.fillRect(0,0,t,s),i.closePath()}function gC(i,n,t){var s=i+n;return t?s*2:s}function Ob(i,n){var t=n?[[i*.25,i*.25],[i*.75,i*.75]]:[[i*.5,i*.5]];return t}function mC(i,n){var t=n*Math.PI/180,s={a:Math.cos(t)*(1/i),b:Math.sin(t)*(1/i),c:-Math.sin(t)*(1/i),d:Math.cos(t)*(1/i),e:0,f:0};return s}var G_={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function kb(i,n,t,s){var l=n.size,f=n.fill,d=n.lineWidth,m=n.stroke,x=n.fillOpacity;i.beginPath(),i.globalAlpha=x,i.fillStyle=f,i.strokeStyle=m,i.lineWidth=d,i.arc(t,s,l/2,0,2*Math.PI,!1),i.fill(),d&&i.stroke(),i.closePath()}function NB(i){var n=mn({},G_,i),t=n.size,s=n.padding,l=n.isStagger,f=n.rotation,d=gC(t,s,l),m=Ob(d,l),x=fy(d,d),T=x.getContext("2d");Pb(T,n,d);for(var P=0,D=m;P<D.length;P++){var B=D[P],U=B[0],Y=B[1];kb(T,n,U,Y)}var se=T.createPattern(x,"repeat");if(se){var xe=W_(),Ee=mC(xe,f);se.setTransform(Ee)}return se}var NP={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function zB(i,n,t){var s=n.stroke,l=n.lineWidth,f=n.strokeOpacity,d=new Path2D(t);i.globalAlpha=f,i.lineCap="square",i.strokeStyle=l?s:"transparent",i.lineWidth=l,i.stroke(d)}function zP(i){var n=mn({},NP,i),t=n.spacing,s=n.rotation,l=n.lineWidth,f=t+l||1,d=t+l||1,m=`
            M 0 0 L `.concat(f,` 0
            M 0 `).concat(d," L ").concat(f," ").concat(d,`
            `),x=fy(f,d),T=x.getContext("2d");Pb(T,n,f,d),zB(T,n,m);var P=T.createPattern(x,"repeat");if(P){var D=W_(),B=mC(D,s);P.setTransform(B)}return P}var UB={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function UP(i,n,t,s){var l=n.stroke,f=n.size,d=n.fill,m=n.lineWidth,x=n.fillOpacity;i.globalAlpha=x,i.strokeStyle=l,i.lineWidth=m,i.fillStyle=d,i.strokeRect(t-f/2,s-f/2,f,f),i.fillRect(t-f/2,s-f/2,f,f)}function $_(i){var n=mn({},UB,i),t=n.size,s=n.padding,l=n.isStagger,f=n.rotation,d=gC(t,s,l),m=Ob(d,l),x=fy(d,d),T=x.getContext("2d");Pb(T,n,d);for(var P=0,D=m;P<D.length;P++){var B=D[P],U=B[0],Y=B[1];UP(T,n,U,Y)}var se=T.createPattern(x,"repeat");if(se){var xe=W_(),Ee=mC(xe,f);se.setTransform(Ee)}return se}function ZB(i){var n=i.type,t=i.cfg,s;switch(n){case"dot":s=NB(t);break;case"line":s=zP(t);break;case"square":s=$_(t);break;default:break}return s}function ap(i){var n=this;return function(t){var s,l=t.options,f=t.chart,d=l.pattern;if(!d)return t;var m=function(x){for(var T,P,D,B=[],U=1;U<arguments.length;U++)B[U-1]=arguments[U];var Y=f.getTheme().defaultColor,se=Y,xe=(P=(T=f.geometries)===null||T===void 0?void 0:T[0])===null||P===void 0?void 0:P.getAttribute("color");if(xe){var Ee=xe.getFields()[0],rt=(0,E.U2)(x,Ee);se=Ql.getMappingValue(xe,rt,((D=xe.values)===null||D===void 0?void 0:D[0])||Y)}var vt=d;typeof d=="function"&&(vt=d.call(n,x,se)),vt instanceof CanvasPattern||(vt=ZB(mn({},{cfg:{backgroundColor:se}},vt)));var xt=l[i];return(0,M.pi)((0,M.pi)({},typeof xt=="function"?xt.call.apply(xt,(0,M.ev)([n,x],B,!1)):xt||{}),{fill:vt||se})};return mn({},t,{options:(s={},s[i]=m,s)})}}function Vg(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField,f=t.seriesField;return s===!1?n.legend(!1):(l||f)&&n.legend(l||f,s),i}function Dl(i){var n=i.chart,t=i.options,s=t.tooltip;return s!==void 0&&n.tooltip(s),i}function cu(i){var n=i.chart,t=i.options,s=t.interactions;return(0,E.S6)(s,function(l){l.enable===!1?n.removeInteraction(l.type):n.interaction(l.type,l.cfg||{})}),i}function ps(i){var n=i.chart,t=i.options,s=t.animation;return cy(n,s),i}function Go(i){var n=i.chart,t=i.options,s=t.theme;return s&&n.theme(s),i}function Hg(i){var n=i.chart,t=i.options,s=t.state;return s&&(0,E.S6)(n.geometries,function(l){l.state(s)}),i}function hy(i){var n=i.chart,t=i.options,s=t.slider;return n.option("slider",s),i}function Db(i){var n=i.chart,t=i.options,s=t.scrollbar;return n.option("scrollbar",s),i}function Vu(i,n){return function(t){var s=t.chart,l=t.options,f={};return(0,E.S6)(i,function(d,m){f[m]=ls(d,wf)}),f=mn({},n,l.meta,f),s.scale(f),t}}function Eu(i){return function(n){var t=n.chart,s=n.options,l=t.getController("annotation");return(0,E.S6)((0,M.ev)((0,M.ev)([],s.annotations||[],!0),i||[],!0),function(f){l.annotation(f)}),n}}function jg(i){var n=i.chart,t=i.options,s=t.yAxis,l=t.limitInPlot,f=l;return(0,E.Kn)(s)&&(0,E.UM)(l)&&(Object.values(ls(s,["min","max","minLimit","maxLimit"])).some(function(d){return!(0,E.UM)(d)})?f=!0:f=!1),n.limitInPlot=f,i}function yC(i){return i===void 0&&(i="rect"),function(n){var t=n.chart,s=n.options,l=s.coordinate,f=Array.from(l||[]).map(function(d){return d.type==="reflectX"?["reflect","x"]:d.type==="reflectY"?["reflect","y"]:d.type==="transpose"?["transpose"]:null}).filter(function(d){return!!d});return f.length!==0&&t.coordinate({type:i,actions:f}),n}}var Lb={locale:"en-US"};function ZP(i){each(i,function(n,t){return Lb[t]=n})}var zc={};function _C(i,n){zc[i]=n}function X_(i){return{get:function(n,t){return vC((0,E.U2)(zc[i],n)||(0,E.U2)(zc[Lb.locale],n)||(0,E.U2)(zc["en-US"],n)||n,t)}}}var VP={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},HP={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}};function op(i,n){if(i===!1)return{fields:!1};var t=(0,E.U2)(i,"fields"),s=(0,E.U2)(i,"formatter");return s&&!t&&(t=n),{fields:t,formatter:s}}function Y_(i,n){var t=i.type,s=i.xField,l=i.yField,f=i.colorField,d=i.shapeField,m=i.sizeField,x=i.styleField,T=i.rawFields,P=[];if(T=((0,E.mf)(T)?T(t,n):T)||[],n==="color")P=(0,M.ev)([f||s],T,!0);else if(n==="shape")P=(0,M.ev)([d||s],T,!0);else if(n==="size")P=(0,M.ev)([m||s],T,!0);else{P=(0,M.ev)([s,l,f,d,m,x],T,!0);var D=["x","y","color","shape","size","style"].indexOf(n),B=P[D];P.splice(D,1),P.unshift(B)}var U=(0,E.jj)(P.filter(function(se){return!!se})),Y=t==="line"&&[s,l].includes(U.join("*"))?"":U.join("*");return{mappingFields:U,tileMappingField:Y}}function Qm(i,n){if(n)return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l={};return i.forEach(function(f,d){l[f]=t[d]}),delete l.undefined,n(l)}}function Cf(i){var n=i.chart,t=i.options,s=t.type,l=t.args,f=t.mapping,d=t.xField,m=t.yField,x=t.colorField,T=t.shapeField,P=t.sizeField,D=t.tooltipFields,B=t.label,U=t.state,Y=t.customInfo;if(!f)return i;var se=f.color,xe=f.shape,Ee=f.size,rt=f.style,vt=f.tooltip,xt=n[s](l).position("".concat(d,"*").concat(m));if((0,E.HD)(se))x?xt.color(x,se):xt.color(se);else if((0,E.mf)(se)){var Bt=Y_(t,"color"),_r=Bt.mappingFields,Or=Bt.tileMappingField;xt.color(Or,Qm(_r,se))}else x&&xt.color(x,se);if((0,E.HD)(xe))T?xt.shape(T,[xe]):xt.shape(xe);else if((0,E.mf)(xe)){var Wr=Y_(t,"shape"),_r=Wr.mappingFields,Or=Wr.tileMappingField;xt.shape(Or,Qm(_r,xe))}else T&&xt.shape(T,xe);if((0,E.hj)(Ee))P?xt.size(P,Ee):xt.size(Ee);else if((0,E.mf)(Ee)){var gn=Y_(t,"size"),_r=gn.mappingFields,Or=gn.tileMappingField;xt.size(Or,Qm(_r,Ee))}else P&&xt.size(P,Ee);if((0,E.mf)(rt)){var $r=Y_(t,"style"),_r=$r.mappingFields,Or=$r.tileMappingField;xt.style(Or,Qm(_r,rt))}else(0,E.Kn)(rt)&&xt.style(rt);if(D===!1?xt.tooltip(!1):(0,E.xb)(D)||xt.tooltip(D.join("*"),Qm(D,vt)),B===!1)xt.label(!1);else if(B){var zn=B.callback,li=B.fields,zi=(0,M._T)(B,["callback","fields"]);xt.label({fields:li||[m],callback:zn,cfg:Jl(zi)})}return U&&xt.state(U),Y&&xt.customInfo(Y),[d,m].filter(function(ia){return ia!==x}).forEach(function(ia){n.legend(ia,!1)}),(0,M.pi)((0,M.pi)({},i),{ext:{geometry:xt}})}function K_(i){var n=i.options,t=n.area,s=n.xField,l=n.yField,f=n.seriesField,d=n.smooth,m=n.tooltip,x=n.useDeferredLabel,T=op(m,[s,l,f]),P=T.fields,D=T.formatter;return t?Cf(mn({},i,{options:{type:"area",colorField:f,tooltipFields:P,mapping:(0,E.b$)({shape:d?"smooth":"area",tooltip:D},t),args:{useDeferredLabel:x}}})):i}function xC(i){var n=i.options,t=n.edge,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=op(d,[s,l,f]),T=x.fields,P=x.formatter;return t?Cf(mn({},i,{options:{type:"edge",colorField:f,tooltipFields:T,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):i}function jP(i){var n=i.chart,t=i.options,s=i.ext,l=t.seriesField,f=t.isGroup,d=t.isStack,m=t.marginRatio,x=t.widthRatio,T=t.groupField,P=t.theme,D=[];if(l&&(f&&D.push({type:"dodge",dodgeBy:T||l,marginRatio:m}),d&&D.push({type:"stack",marginRatio:m})),D.length&&(s!=null&&s.geometry)){var B=s==null?void 0:s.geometry;B.adjust(D)}return(0,E.UM)(x)||n.theme(mn({},(0,E.Kn)(P)?P:Bp(P),{columnWidthRatio:x})),i}function mc(i){var n=i.options,t=n.xField,s=n.yField,l=n.interval,f=n.seriesField,d=n.tooltip,m=n.minColumnWidth,x=n.maxColumnWidth,T=n.columnBackground,P=n.dodgePadding,D=n.intervalPadding,B=n.useDeferredLabel,U=op(d,[t,s,f]),Y=U.fields,se=U.formatter,xe=(l?Cf(mn({},i,{options:{type:"interval",colorField:f,tooltipFields:Y,mapping:(0,M.pi)({tooltip:se},l),args:{dodgePadding:P,intervalPadding:D,minColumnWidth:m,maxColumnWidth:x,background:T,useDeferredLabel:B}}})):i).ext;return jP((0,M.pi)((0,M.pi)({},i),{ext:xe}))}function Jm(i){var n=i.options,t=n.line,s=n.stepType,l=n.xField,f=n.yField,d=n.seriesField,m=n.smooth,x=n.connectNulls,T=n.tooltip,P=n.useDeferredLabel,D=op(T,[l,f,d]),B=D.fields,U=D.formatter;return t?Cf(mn({},i,{options:{type:"line",colorField:d,tooltipFields:B,mapping:(0,E.b$)({shape:s||(m?"smooth":"line"),tooltip:U},t),args:{connectNulls:x,useDeferredLabel:P}}})):i}function Ih(i){var n=i.options,t=n.point,s=n.xField,l=n.yField,f=n.seriesField,d=n.sizeField,m=n.shapeField,x=n.tooltip,T=n.useDeferredLabel,P=op(x,[s,l,f,d,m]),D=P.fields,B=P.formatter;return t?Cf(mn({},i,{options:{type:"point",colorField:f,shapeField:m,tooltipFields:D,mapping:(0,M.pi)({tooltip:B},t),args:{useDeferredLabel:T}}})):i}function q_(i){var n=i.options,t=n.polygon,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=op(d,[s,l,f]),T=x.fields,P=x.formatter;return t?Cf(mn({},i,{options:{type:"polygon",colorField:f,tooltipFields:T,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):i}function Fb(i){var n=i.options,t=n.schema,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=op(d,[s,l,f]),T=x.fields,P=x.formatter;return t?Cf(mn({},i,{options:{type:"schema",colorField:f,tooltipFields:T,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):i}function WP(i){var n=i.options,t=n.violin,s=n.xField,l=n.yField,f=n.seriesField,d=n.sizeField,m=n.tooltip,x=op(m,[s,l,f,d]),T=x.fields,P=x.formatter;return t?Cf(mn({},i,{options:{type:"violin",colorField:f,tooltipFields:T,mapping:(0,M.pi)({tooltip:P},t)}})):i}var GP=k(18587),bC="data-chart-source-type",SC=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],ro=function(i){(0,M.ZT)(n,i);function n(t,s){var l=i.call(this)||this;return l.container=typeof t=="string"?document.getElementById(t):t,l.options=mn({},l.getDefaultOptions(),s),l.createG2(),l.bindEvents(),l}return n.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},n.prototype.createG2=function(){var t=this.options,s=t.width,l=t.height,f=t.defaultInteractions;this.chart=new ue((0,M.pi)((0,M.pi)((0,M.pi)((0,M.pi)({container:this.container,autoFit:!1},this.getChartSize(s,l)),{localRefresh:!1}),ls(this.options,SC)),{defaultInteractions:f})),this.container.setAttribute(bC,"G2Plot")},n.prototype.getChartSize=function(t,s){var l=fC(this.container);return{width:t||l.width||400,height:s||l.height||400}},n.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",function(s){s!=null&&s.type&&t.emit(s.type,s)})},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},n.prototype.update=function(t){this.updateOption(t),this.render()},n.prototype.updateOption=function(t){this.options=mn({},this.options,t)},n.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=z_(this.chart);(0,E.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},n.prototype.getStates=function(){var t=z_(this.chart),s=[];return(0,E.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,E.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},n.prototype.changeData=function(t){this.update({data:t})},n.prototype.changeSize=function(t,s){this.chart.changeSize(t,s)},n.prototype.addAnnotations=function(t,s){s=s||this.chart;var l=(0,M.ev)([],t,!0),f=s.getController("annotation"),d=f.getComponents().map(function(T){return T.extra});f.clear(!0);for(var m=function(T){var P=d[T],D=l.findIndex(function(B){return B.id&&B.id===P.id});D!==-1&&(P=mn({},P,l[D]),l.splice(D,1)),f.annotation(P)},x=0;x<d.length;x++)m(x);l.forEach(function(T){return f.annotation(T)}),s.render(!0)},n.prototype.removeAnnotations=function(t){var s=this.chart.getController("annotation"),l=s.getComponents().map(function(m){return m.extra});s.clear(!0);for(var f=function(m){var x=l[m];t.find(function(T){return T.id&&T.id===x.id})||s.annotation(x)},d=0;d<l.length;d++)f(d);this.chart.render(!0)},n.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(bC)},n.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),s=this.options,l=s.padding,f=s.appendPadding;this.chart.padding=l,this.chart.appendPadding=f,t({chart:this.chart,options:this.options})},n.prototype.triggerResize=function(){this.chart.forceFit()},n.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var s=this.options.autoFit,l=s===void 0?!0:s;l&&(this.unbind=(0,GP.ak)(this.container,function(){var f=fC(t.container),d=f.width,m=f.height;(d!==t.chart.width||m!==t.chart.height)&&t.triggerResize()}))}},n.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},n}(tt.Z);function EC(i,n,t,s){var l=(0,E.u4)(i,function(f,d){var m=d[t],x=f.has(m)?f.get(m):0,T=d[n];return x=Gp(T)?x+T:x,f.set(m,x),f},new Map);return(0,E.UI)(i,function(f){var d,m=f[n],x=f[t],T=Gp(m)&&l.get(x)!==0?m/l.get(x):0;return(0,M.pi)((0,M.pi)({},f),(d={},d[s]=T,d))})}function $P(i,n,t,s){var l=(0,E.u4)(i,function(f,d){var m=(0,E.u4)(t,function(P,D){return"".concat(P).concat(d[D])},""),x=f.has(m)?f.get(m):0,T=d[n];return x=Gp(T)?x+T:x,f.set(m,x),f},new Map);return(0,E.UI)(i,function(f){var d,m=f[n],x=(0,E.u4)(t,function(P,D){return"".concat(P).concat(f[D])},""),T=Gp(m)&&l.get(x)!==0?m/l.get(x):0;return(0,M.pi)((0,M.pi)({},f),(d={},d[s]=T,d))})}function Q_(i,n,t,s,l){return l?EC(i,n,t,s):i}function wC(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.lineStyle,d=t.lineShape,m=t.point,x=t.area,T=t.seriesField,P=m==null?void 0:m.state,D=x==null?void 0:x.state;n.data(s);var B=mn({},i,{options:{shapeField:T,line:{color:l,style:f,shape:d},point:m&&(0,M.pi)({color:l,shape:"circle"},m),area:x&&(0,M.pi)({color:l},x),label:void 0}}),U=mn({},B,{options:{tooltip:!1,state:P}}),Y=mn({},B,{options:{tooltip:!1,state:D}});return Jm(B),Ih(U),K_(Y),i}function J_(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data;return Ua(Vu((n={},n[d]=l,n[m]=f,n),(t={},t[d]={type:"cat"},t[m]=N_(x,m),t)))(i)}function Bb(i){var n=i.chart,t=i.options,s=t.reflect;if(s){var l=s;(0,E.kJ)(l)||(l=[l]);var f=l.map(function(d){return["reflect",d]});n.coordinate({type:"rect",actions:f})}return i}function XP(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),i}function CC(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField;return s&&l?n.legend(l,s):s===!1&&n.legend(!1),i}function YP(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=_a(n,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Jl(m))})}return i}function KP(i){var n=i.chart,t=i.options,s=t.isStack;return s&&(0,E.S6)(n.geometries,function(l){l.adjust("stack")}),i}function TC(i){return Ua(wC,J_,KP,Go,Bb,XP,CC,Dl,YP,hy,Db,cu,ps,Eu(),jg)(i)}function VB(i){var n=i.chart,t=i.options,s=t.data,l=t.areaStyle,f=t.areaShape,d=t.color,m=t.point,x=t.line,T=t.isPercent,P=t.xField,D=t.yField,B=t.tooltip,U=t.seriesField,Y=t.startOnZero,se=m==null?void 0:m.state,xe=Q_(s,D,P,D,T);n.data(xe);var Ee=T?(0,M.pi)({formatter:function(Bt){return{name:Bt[U]||Bt[P],value:(Number(Bt[D])*100).toFixed(2)+"%"}}},B):B,rt=mn({},i,{options:{area:{color:d,style:l,shape:f},point:m&&(0,M.pi)({color:d},m),tooltip:Ee,label:void 0,args:{startOnZero:Y}}}),vt={chart:n,options:mn({line:{size:2}},(0,E.CE)(t,["state"]),{line:x&&(0,M.pi)({color:d},x),sizeField:U,state:x==null?void 0:x.state,tooltip:!1,label:void 0,args:{startOnZero:Y}})},xt=mn({},rt,{options:{tooltip:!1,state:se}});return K_(rt),Jm(vt),Ih(xt),i}function AC(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=_a(n,"area");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Jl(m))})}return i}function qP(i){var n=i.chart,t=i.options,s=t.isStack,l=t.isPercent,f=t.seriesField;return(l||s)&&f&&(0,E.S6)(n.geometries,function(d){d.adjust("stack")}),i}function MC(i){return Ua(Go,ap("areaStyle"),yC("rect"),VB,J_,qP,XP,CC,Dl,AC,hy,Eu(),cu,ps,jg)(i)}var QP=mn({},ro.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),JP=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return n.getDefaultOptions=function(){return QP},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.isPercent,f=s.xField,d=s.yField,m=this,x=m.chart,T=m.options;J_({chart:x,options:T}),this.chart.changeData(Q_(t,d,f,d,l))},n.prototype.getSchemaAdaptor=function(){return MC},n}(ro),HB=10,eO=5,tO={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},rO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=(0,M.pi)({name:"button"},tO),t}return n.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,E.U2)(t,["interactions","filter-action","cfg","buttonConfig"]);return mn(this.buttonCfg,s,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=this.drawText(s);this.drawBackground(s,l.getBBox()),this.buttonGroup=s},n.prototype.drawText=function(t){var s,l=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:(0,M.pi)({text:l.text},(s=l.textStyle)===null||s===void 0?void 0:s.default)})},n.prototype.drawBackground=function(t,s){var l,f=this.getButtonCfg(),d=dv(f.padding),m=t.addShape({type:"rect",name:"button-rect",attrs:(0,M.pi)({x:s.x-d[3],y:s.y-d[0],width:s.width+d[1]+d[3],height:s.height+d[0]+d[2]},(l=f.buttonStyle)===null||l===void 0?void 0:l.default)});return m.toBack(),t.on("mouseenter",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.active)}),t.on("mouseleave",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.default)}),m},n.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=Ql.transform(null,[["t",l.x-d.width-HB,l.y+d.height+eO]]);f.setMatrix(m)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),i.prototype.destroy.call(this)},n}(In);Kr("brush-reset-button",rO,{name:"brush-reset-button"}),Nn("filter-action",{});function vv(i){return i.isInPlot()}function Wg(i,n,t){var s=t||{},l=s.mask,f=s.isStartEnable,d=n||"rect";switch(i){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||vv,action:["brush:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:vv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:vv,action:["brush:filter","brush:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(m){return f?!f(m):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||vv,action:["brush-x:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:vv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:vv,action:["brush-x:filter","brush-x:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||vv,action:["brush-y:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:vv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:vv,action:["brush-y:filter","brush-y:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};default:return{}}}Nn("brush",Wg("brush")),Nn("brush-highlight",Wg("brush-highlight")),Nn("brush-x",Wg("brush-x","x-rect")),Nn("brush-y",Wg("brush-y","y-rect")),Nn("brush-x-highlight",Wg("brush-x-highlight","x-rect")),Nn("brush-y-highlight",Wg("brush-y-highlight","y-rect"));var RC=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function IC(i){var n=i.options,t=n.brush,s=(0,E.hX)(n.interactions||[],function(l){return RC.indexOf(l.type)===-1});return t!=null&&t.enabled&&(RC.forEach(function(l){var f=!1;switch(t.type){case"x-rect":f=l===(t.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":f=l===(t.action==="highlight"?"brush-y-highlight":"brush-y");break;default:f=l===(t.action==="highlight"?"brush-highlight":"brush");break}var d={type:l,enable:f};t&&(d.cfg=Wg(l,t.type,t)),s.push(d)}),(t==null?void 0:t.action)!=="highlight"&&s.push({type:"filter-action",cfg:{buttonConfig:t.button}})),mn({},i,{options:{interactions:s}})}var Gg={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},Nb=function(i,n){return i==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:n}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:n}]}]};Nn(Gg.hover,{start:Nb(Gg.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Nn(Gg.click,{start:Nb(Gg.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function nO(i){return i===void 0&&(i=!1),function(n){var t=n.chart,s=n.options,l=s.connectedArea,f=function(){t.removeInteraction(Gg.hover),t.removeInteraction(Gg.click)};if(!i&&l){var d=l.trigger||"hover";f(),t.interaction(Gg[d],{start:Nb(d,l.style)})}else f();return n}}function e0(i,n){return!(0,E.hj)(i)||!(0,E.hj)(n)||i===0&&n===0?"-":i===n?"100%":i===0?"\u221E":"".concat((100*n/i).toFixed(2),"%")}function iO(i,n){return mn({size:n?32:80,spacing:n?8:12,offset:n?32:0,arrow:i.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:i.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:e0}},i)}function e1(i,n){return(0,E.UI)(n.getModel().points,function(t){return i.convertPoint(t)})}function aO(i,n,t){var s=i.view,l=i.geometry,f=i.group,d=i.options,m=i.horizontal,x=d.offset,T=d.size,P=d.arrow,D=s.getCoordinate(),B=e1(D,n)[3],U=e1(D,t)[0],Y=U.y-B.y,se=U.x-B.x;if(typeof P!="boolean"){var xe=P.headSize,Ee=d.spacing,rt;m?(se-xe)/2<Ee?(Ee=Math.max(1,(se-xe)/2),rt=[[B.x+Ee,B.y-x],[B.x+Ee,B.y-x-T],[U.x-Ee,U.y-x-T/2]]):rt=[[B.x+Ee,B.y-x],[B.x+Ee,B.y-x-T],[U.x-Ee-xe,U.y-x-T],[U.x-Ee,U.y-x-T/2],[U.x-Ee-xe,U.y-x]]:(Y-xe)/2<Ee?(Ee=Math.max(1,(Y-xe)/2),rt=[[B.x+x,B.y+Ee],[B.x+x+T,B.y+Ee],[U.x+x+T/2,U.y-Ee]]):rt=[[B.x+x,B.y+Ee],[B.x+x+T,B.y+Ee],[U.x+x+T,U.y-Ee-xe],[U.x+x+T/2,U.y-Ee],[U.x+x,U.y-Ee-xe]],f.addShape("polygon",{id:"".concat(s.id,"-conversion-tag-arrow-").concat(l.getElementId(n.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:n,nextElement:t},attrs:(0,M.pi)((0,M.pi)({},P.style||{}),{points:rt})})}}function oO(i,n,t){var s,l,f,d=i.view,m=i.geometry,x=i.group,T=i.options,P=i.field,D=i.horizontal,B=T.offset,U=T.size;if(typeof T.text!="boolean"){var Y=d.getCoordinate(),se=((s=T.text)===null||s===void 0?void 0:s.formatter)&&((l=T.text)===null||l===void 0?void 0:l.formatter(n.getData()[P],t.getData()[P])),xe=e1(Y,n)[D?3:0],Ee=e1(Y,t)[D?0:3],rt=x.addShape("text",{id:"".concat(d.id,"-conversion-tag-text-").concat(m.getElementId(n.getModel().mappingData)),name:"conversion-tag-text",origin:{element:n,nextElement:t},attrs:(0,M.pi)((0,M.pi)({},((f=T.text)===null||f===void 0?void 0:f.style)||{}),{text:se,x:D?(xe.x+Ee.x)/2:xe.x+B+U/2,y:D?xe.y-B-U/2:(xe.y+Ee.y)/2})});if(D){var vt=Ee.x-xe.x,xt=rt.getBBox().width;if(xt>vt){var Bt=xt/se.length,_r=Math.max(1,Math.ceil(vt/Bt)-1),Or="".concat(se.slice(0,_r),"...");rt.attr("text",Or)}}}}function PC(i,n,t){aO(i,n,t),oO(i,n,t)}function sO(i,n,t){return n===void 0&&(n=!0),t===void 0&&(t=!1),function(s){var l=s.options,f=s.chart,d=l.conversionTag,m=l.theme;return d&&!t&&(f.theme(mn({},(0,E.Kn)(m)?m:Bp(m),{columnWidthRatio:1/3})),f.annotation().shape({render:function(x,T){var P=x.addGroup({id:"".concat(f.id,"-conversion-tag-group"),name:"conversion-tag-group"}),D=(0,E.sE)(f.geometries,function(Y){return Y.type==="interval"}),B={view:T,geometry:D,group:P,field:i,horizontal:n,options:iO(d,n)},U=D.elements;(0,E.S6)(U,function(Y,se){se>0&&PC(B,U[se-1],Y)})}})),s}}function uO(i){var n=i.options,t=n.legend,s=n.seriesField,l=n.isStack;return s?t!==!1&&(t=(0,M.pi)({position:l?"right-top":"top-left"},t)):t=!1,i.options.legend=t,i}function lO(i){var n=i.chart,t=i.options,s=t.data,l=t.columnStyle,f=t.color,d=t.columnWidthRatio,m=t.isPercent,x=t.isGroup,T=t.isStack,P=t.xField,D=t.yField,B=t.seriesField,U=t.groupField,Y=t.tooltip,se=t.shape,xe=m&&x&&T?$P(s,D,[P,U],D):Q_(s,D,P,D,m),Ee=[];T&&B&&!x?xe.forEach(function(xt){var Bt=Ee.find(function(_r){return _r[P]===xt[P]&&_r[B]===xt[B]});Bt?Bt[D]+=xt[D]||0:Ee.push((0,M.pi)({},xt))}):Ee=xe,n.data(Ee);var rt=m?(0,M.pi)({formatter:function(xt){var Bt;return{name:x&&T?"".concat(xt[B]," - ").concat(xt[U]):(Bt=xt[B])!==null&&Bt!==void 0?Bt:xt[P],value:(Number(xt[D])*100).toFixed(2)+"%"}}},Y):Y,vt=mn({},i,{options:{data:Ee,widthRatio:d,tooltip:rt,interval:{shape:se,style:l,color:f}}});return mc(vt),vt}function zb(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data,T=s.isPercent,P=T?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Ua(Vu((n={},n[d]=l,n[m]=f,n),(t={},t[d]={type:"cat"},t[m]=(0,M.pi)((0,M.pi)({},N_(x,m)),P),t)))(i)}function cO(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),i}function fO(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField;return s&&l?n.legend(l,s):s===!1&&n.legend(!1),i}function hO(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=t.isRange,d=_a(n,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:(0,M.pi)({layout:x!=null&&x.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Jl(f?(0,M.pi)({content:function(T){var P;return(P=T[l])===null||P===void 0?void 0:P.join("-")}},x):x))})}return i}function pO(i){var n=i.chart,t=i.options,s=t.tooltip,l=t.isGroup,f=t.isStack,d=t.groupField,m=t.data,x=t.xField,T=t.yField,P=t.seriesField;if(s===!1)n.tooltip(!1);else{var D=s;if(l&&f){var B=D.customItems,U=(D==null?void 0:D.formatter)||function(Y){return{name:"".concat(Y[P]," - ").concat(Y[d]),value:Y[T]}};D=(0,M.pi)((0,M.pi)({},D),{customItems:function(Y){var se=[];return(0,E.S6)(Y,function(xe){var Ee=(0,E.hX)(m,function(rt){return(0,E.BD)(rt,ls(xe.data,[x,P]))});Ee.forEach(function(rt){se.push((0,M.pi)((0,M.pi)((0,M.pi)({},xe),{value:rt[T],data:rt,mappingData:{_origin:rt}}),U(rt)))})}),B?B(se):se}})}n.tooltip(D)}return i}function t1(i,n){n===void 0&&(n=!1);var t=i.options,s=t.seriesField;return Ua(uO,Go,ap("columnStyle"),Hg,yC("rect"),lO,zb,cO,fO,pO,hy,Db,hO,IC,cu,ps,Eu(),sO(t.yField,!n,!!s),nO(!t.isStack),jg)(i)}function dO(i){var n=i.options,t=n.xField,s=n.yField,l=n.xAxis,f=n.yAxis,d={left:"bottom",right:"top",top:"left",bottom:"right"},m=f!==!1?(0,M.pi)({position:d[(f==null?void 0:f.position)||"left"]},f):!1,x=l!==!1?(0,M.pi)({position:d[(l==null?void 0:l.position)||"bottom"]},l):!1;return(0,M.pi)((0,M.pi)({},i),{options:(0,M.pi)((0,M.pi)({},n),{xField:s,yField:t,xAxis:m,yAxis:x})})}function vO(i){var n=i.options,t=n.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),mn({},i,{options:{label:t}})}function gO(i){var n=i.options,t=n.seriesField,s=n.isStack,l=n.legend;return t?l!==!1&&(l=(0,M.pi)({position:s?"top-left":"right-top"},l||{})):l=!1,mn({},i,{options:{legend:l}})}function mO(i){var n=i.options,t=[{type:"transpose"},{type:"reflectY"}].concat(n.coordinate||[]);return mn({},i,{options:{coordinate:t}})}function yO(i){var n=i.chart,t=i.options,s=t.barStyle,l=t.barWidthRatio,f=t.minBarWidth,d=t.maxBarWidth,m=t.barBackground;return t1({chart:n,options:(0,M.pi)((0,M.pi)({},t),{columnStyle:s,columnWidthRatio:l,minColumnWidth:f,maxColumnWidth:d,columnBackground:m})},!0)}function OC(i){return Ua(dO,vO,gO,Dl,mO,yO)(i)}var _O=mn({},ro.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Ub=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bar",t}return n.getDefaultOptions=function(){return _O},n.prototype.changeData=function(t){var s,l;this.updateOption({data:t});var f=this,d=f.chart,m=f.options,x=m.isPercent,T=m.xField,P=m.yField,D=m.xAxis,B=m.yAxis;s=[P,T],T=s[0],P=s[1],l=[B,D],D=l[0],B=l[1];var U=(0,M.pi)((0,M.pi)({},m),{xField:T,yField:P,yAxis:B,xAxis:D});zb({chart:d,options:U}),d.changeData(Q_(t,T,P,T,x))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return OC},n}(ro),xO=mn({},ro.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),kC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="column",t}return n.getDefaultOptions=function(){return xO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.yField,f=s.xField,d=s.isPercent,m=this,x=m.chart,T=m.options;zb({chart:x,options:T}),this.chart.changeData(Q_(t,l,f,l,d))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return t1},n}(ro),Zb,eg="$$percentage$$",gv="$$mappingValue$$",mv="$$conversion$$",Vb="$$totalPercentage$$",py="$$x$$",dy="$$y$$",bO={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Zb={},Zb[gv]={min:0,max:1,nice:!1},Zb),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},DC="CONVERSION_TAG_NAME";function Hb(i,n,t){var s=[],l=t.yField,f=t.maxSize,d=t.minSize,m=(0,E.U2)((0,E.UT)(n,l),[l]),x=(0,E.hj)(f)?f:1,T=(0,E.hj)(d)?d:0;return s=(0,E.UI)(i,function(P,D){var B=(P[l]||0)/m;return P[eg]=B,P[gv]=(x-T)*B+T,P[mv]=[(0,E.U2)(i,[D-1,l]),P[l]],P}),s}function jb(i){return function(n){var t=n.chart,s=n.options,l=s.conversionTag,f=s.filteredData,d=f||t.getOptions().data;if(l){var m=l.formatter;d.forEach(function(x,T){if(!(T<=0||Number.isNaN(x[gv]))){var P=i(x,T,d,{top:!0,name:DC,text:{content:(0,E.mf)(m)?m(x,d):m,offsetX:l.offsetX,offsetY:l.offsetY,position:"end",autoRotate:!1,style:(0,M.pi)({textAlign:"start",textBaseline:"middle"},l.style)}});t.annotation().line(P)}})}return n}}function SO(i){var n=i.chart,t=i.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=t.maxSize,m=t.minSize,x=Hb(l,l,{yField:f,maxSize:d,minSize:m});return n.data(x),i}function LC(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.shape,T=x===void 0?"funnel":x,P=t.funnelStyle,D=t.state,B=op(d,[s,l]),U=B.fields,Y=B.formatter;Cf({chart:n,options:{type:"interval",xField:s,yField:gv,colorField:s,tooltipFields:(0,E.kJ)(U)&&U.concat([eg,mv]),mapping:{shape:T,tooltip:Y,color:f,style:P},label:m,state:D}});var se=_a(i.chart,"interval");return se.adjust("symmetric"),i}function EO(i){var n=i.chart,t=i.options,s=t.isTransposed;return n.coordinate({type:"rect",actions:s?[]:[["transpose"],["scale",1,-1]]}),i}function FC(i){var n=i.options,t=i.chart,s=n.maxSize,l=(0,E.U2)(t,["geometries","0","dataArray"],[]),f=(0,E.U2)(t,["options","data","length"]),d=(0,E.UI)(l,function(x){return(0,E.U2)(x,["0","nextPoints","0","x"])*f-.5}),m=function(x,T,P,D){var B=s-(s-x[gv])/2;return(0,M.pi)((0,M.pi)({},D),{start:[d[T-1]||T-.5,B],end:[d[T-1]||T-.5,B+.05]})};return jb(m)(i),i}function BC(i){return Ua(SO,LC,EO,FC)(i)}function wO(i){var n,t=i.chart,s=i.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((n={},n[d]={sync:!0},n)),i}function NC(i){var n=i.chart,t=i.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.compareField,x=t.isTransposed,T=t.tooltip,P=t.maxSize,D=t.minSize,B=t.label,U=t.funnelStyle,Y=t.state,se=t.showFacetTitle;return n.facet("mirror",{fields:[m],transpose:!x,padding:x?0:[32,0,0,0],showTitle:se,eachView:function(xe,Ee){var rt=x?Ee.rowIndex:Ee.columnIndex;x||xe.coordinate({type:"rect",actions:[["transpose"],["scale",rt===0?-1:1,-1]]});var vt=Hb(Ee.data,s,{yField:f,maxSize:P,minSize:D});xe.data(vt);var xt=op(T,[l,f,m]),Bt=xt.fields,_r=xt.formatter,Or=x?{offset:rt===0?10:-23,position:rt===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:rt===0?"end":"start"}};Cf({chart:xe,options:{type:"interval",xField:l,yField:gv,colorField:l,tooltipFields:(0,E.kJ)(Bt)&&Bt.concat([eg,mv]),mapping:{shape:"funnel",tooltip:_r,color:d,style:U},label:B===!1?!1:mn({},Or,B),state:Y}})}}),i}function Wb(i){var n=i.chart,t=i.index,s=i.options,l=s.conversionTag,f=s.isTransposed;((0,E.hj)(t)?[n]:n.views).forEach(function(d,m){var x=(0,E.U2)(d,["geometries","0","dataArray"],[]),T=(0,E.U2)(d,["options","data","length"]),P=(0,E.UI)(x,function(B){return(0,E.U2)(B,["0","nextPoints","0","x"])*T-.5}),D=function(B,U,Y,se){var xe=(t||m)===0?-1:1;return mn({},se,{start:[P[U-1]||U-.5,B[gv]],end:[P[U-1]||U-.5,B[gv]+.05],text:f?{style:{textAlign:"start"}}:{offsetX:l!==!1?xe*l.offsetX:0,style:{textAlign:(t||m)===0?"end":"start"}}})};jb(D)(mn({},{chart:d,options:s}))})}function CO(i){var n=i.chart;return n.once("beforepaint",function(){return Wb(i)}),i}function TO(i){return Ua(wO,NC,CO)(i)}function AO(i){var n=i.chart,t=i.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=(0,E.u4)(l,function(T,P){return T+(P[f]||0)},0),m=(0,E.UT)(l,f)[f],x=(0,E.UI)(l,function(T,P){var D=[],B=[];if(T[Vb]=(T[f]||0)/d,P){var U=l[P-1][py],Y=l[P-1][dy];D[0]=U[3],B[0]=Y[3],D[1]=U[2],B[1]=Y[2]}else D[0]=-.5,B[0]=1,D[1]=.5,B[1]=1;return B[2]=B[1]-T[Vb],D[2]=(B[2]+1)/4,B[3]=B[2],D[3]=-D[2],T[py]=D,T[dy]=B,T[eg]=(T[f]||0)/m,T[mv]=[(0,E.U2)(l,[P-1,f]),T[f]],T});return n.data(x),i}function MO(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.funnelStyle,T=t.state,P=op(d,[s,l]),D=P.fields,B=P.formatter;return Cf({chart:n,options:{type:"polygon",xField:py,yField:dy,colorField:s,tooltipFields:(0,E.kJ)(D)&&D.concat([eg,mv]),label:m,state:T,mapping:{tooltip:B,color:f,style:x}}}),i}function RO(i){var n=i.chart,t=i.options,s=t.isTransposed;return n.coordinate({type:"rect",actions:s?[["transpose"],["reflect","x"]]:[]}),i}function IO(i){var n=function(t,s,l,f){return(0,M.pi)((0,M.pi)({},f),{start:[t[py][1],t[dy][1]],end:[t[py][1]+.05,t[dy][1]]})};return jb(n)(i),i}function PO(i){return Ua(AO,MO,RO,IO)(i)}function zC(i){var n,t=i.chart,s=i.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((n={},n[d]={sync:!0},n)),i}function OO(i){var n=i.chart,t=i.options,s=t.seriesField,l=t.isTransposed,f=t.showFacetTitle;return n.facet("rect",{fields:[s],padding:[l?0:32,10,0,10],showTitle:f,eachView:function(d,m){BC(mn({},i,{chart:d,options:{data:m.data}}))}}),i}function kO(i){return Ua(zC,OO)(i)}var DO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.rendering=!1,t}return n.prototype.change=function(t){var s=this;if(!this.rendering){var l=t.seriesField,f=t.compareField,d=f?Wb:FC,m=this.context.view,x=l||f?m.views:[m];(0,E.UI)(x,function(T,P){var D=T.getController("annotation"),B=(0,E.hX)((0,E.U2)(D,["option"],[]),function(Y){var se=Y.name;return se!==DC});D.clear(!0),(0,E.S6)(B,function(Y){typeof Y=="object"&&T.annotation()[Y.type](Y)});var U=(0,E.U2)(T,["filteredData"],T.getOptions().data);d({chart:T,index:P,options:(0,M.pi)((0,M.pi)({},t),{filteredData:Hb(U,U,t)})}),T.filterData(U),s.rendering=!0,T.render(!0)})}this.rendering=!1},n}(In),Gb="funnel-conversion-tag",$b="funnel-afterrender",Xb={trigger:"afterrender",action:"".concat(Gb,":change")};Kr(Gb,DO),Nn($b,{start:[Xb]});function UC(i){var n=i.options,t=n.compareField,s=n.xField,l=n.yField,f=n.locale,d=n.funnelStyle,m=n.data,x=X_(f),T={label:t?{fields:[s,l,t,eg,mv],formatter:function(D){return"".concat(D[l])}}:{fields:[s,l,eg,mv],offset:0,position:"middle",formatter:function(D){return"".concat(D[s]," ").concat(D[l])}},tooltip:{title:s,formatter:function(D){return{name:D[s],value:D[l]}}},conversionTag:{formatter:function(D){return"".concat(x.get(["conversionTag","label"]),": ").concat(e0.apply(void 0,D[mv]))}}},P;return(t||d)&&(P=function(D){return mn({},t&&{lineWidth:1,stroke:"#fff"},(0,E.mf)(d)?d(D):d)}),mn({options:T},i,{options:{funnelStyle:P,data:(0,E.d9)(m)}})}function ZC(i){var n=i.options,t=n.compareField,s=n.dynamicHeight,l=n.seriesField;return l?kO(i):t?TO(i):s?PO(i):BC(i)}function VC(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Ua(Vu((n={},n[f]=s,n[d]=l,n)))(i)}function LO(i){var n=i.chart;return n.axis(!1),i}function FO(i){var n=i.chart,t=i.options,s=t.legend;return s===!1?n.legend(!1):n.legend(s),i}function BO(i){var n=i.chart,t=i.options,s=t.interactions,l=t.dynamicHeight;return(0,E.S6)(s,function(f){f.enable===!1?n.removeInteraction(f.type):n.interaction(f.type,f.cfg||{})}),l?n.removeInteraction($b):n.interaction($b,{start:[(0,M.pi)((0,M.pi)({},Xb),{arg:t})]}),i}function HC(i){return Ua(UC,ZC,VC,LO,Dl,BO,FO,ps,Go,Eu())(i)}var NO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="funnel",t}return n.getDefaultOptions=function(){return bO},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return HC},n.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=z_(this.chart);(0,E.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},n.prototype.getStates=function(){var t=z_(this.chart),s=[];return(0,E.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,E.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},n.CONVERSATION_FIELD=mv,n.PERCENT_FIELD=eg,n.TOTAL_PERCENT_FIELD=Vb,n}(ro),r1,n1="range",jC="type",yv="percent",WC="#f0f0f0",Yb="indicator-view",t0="range-view",GC={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(r1={},r1[n1]={sync:"v"},r1[yv]={sync:"v",tickCount:5,tickInterval:.2},r1),animation:!1};function $C(i,n){return i.map(function(t,s){var l;return l={},l[n1]=t-(i[s-1]||0),l[jC]="".concat(s),l[yv]=n,l})}function XC(i){var n;return[(n={},n[yv]=(0,E.uZ)(i,0,1),n)]}function YC(i,n){var t=(0,E.U2)(n,["ticks"],[]),s=(0,E.dp)(t)?(0,E.jj)(t):[0,(0,E.uZ)(i,0,1),1];return s[0]||s.shift(),$C(s,i)}function zO(i){var n=i.chart,t=i.options,s=t.percent,l=t.range,f=t.radius,d=t.innerRadius,m=t.startAngle,x=t.endAngle,T=t.axis,P=t.indicator,D=t.gaugeStyle,B=t.type,U=t.meter,Y=l.color,se=l.width;if(P){var xe=XC(s),Ee=n.createView({id:Yb});Ee.data(xe),Ee.point().position("".concat(yv,"*1")).shape(P.shape||"gauge-indicator").customInfo({defaultColor:n.getTheme().defaultColor,indicator:P}),Ee.coordinate("polar",{startAngle:m,endAngle:x,radius:d*f}),Ee.axis(yv,T),Ee.scale(yv,ls(T,wf))}var rt=YC(s,t.range),vt=n.createView({id:t0});vt.data(rt);var xt=(0,E.HD)(Y)?[Y,WC]:Y,Bt=mc({chart:vt,options:{xField:"1",yField:n1,seriesField:jC,rawFields:[yv],isStack:!0,interval:{color:xt,style:D,shape:B==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:se,maxColumnWidth:se}}).ext,_r=Bt.geometry;return _r.customInfo({meter:U}),vt.coordinate("polar",{innerRadius:d,radius:f,startAngle:m,endAngle:x}).transpose(),i}function UO(i){var n;return Ua(Vu((n={range:{min:0,max:1,maxLimit:1,minLimit:0}},n[yv]={},n)))(i)}function Kb(i,n){var t=i.chart,s=i.options,l=s.statistic,f=s.percent;if(t.getController("annotation").clear(!0),l){var d=l.content,m=void 0;d&&(m=mn({},{content:"".concat((f*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},d)),BB(t,{statistic:(0,M.pi)((0,M.pi)({},l),{content:m})},{percent:f})}return n&&t.render(!0),i}function ZO(i){var n=i.chart,t=i.options,s=t.tooltip;return s?n.tooltip(mn({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(l,f){var d=(0,E.U2)(f,[0,"data",yv],0);return"".concat((d*100).toFixed(2),"%")}},s)):n.tooltip(!1),i}function VO(i){var n=i.chart;return n.legend(!1),i}function vy(i){return Ua(Go,ps,zO,UO,ZO,Kb,cu,Eu(),VO)(i)}mi("point","gauge-indicator",{draw:function(i,n){var t=i.customInfo,s=t.indicator,l=t.defaultColor,f=s,d=f.pointer,m=f.pin,x=n.addGroup(),T=this.parsePoint({x:0,y:0});return d&&x.addShape("line",{name:"pointer",attrs:(0,M.pi)({x1:T.x,y1:T.y,x2:i.x,y2:i.y,stroke:l},d.style)}),m&&x.addShape("circle",{name:"pin",attrs:(0,M.pi)({x:T.x,y:T.y,stroke:l},m.style)}),x}}),mi("interval","meter-gauge",{draw:function(i,n){var t=i.customInfo.meter,s=t===void 0?{}:t,l=s.steps,f=l===void 0?50:l,d=s.stepRatio,m=d===void 0?.5:d;f=f<1?1:f,m=(0,E.uZ)(m,0,1);var x=this.coordinate,T=x.startAngle,P=x.endAngle,D=0;if(m>0&&m<1){var B=P-T;D=B/f/(m/(1-m)+1-1/f)}for(var U=D/(1-m)*m,Y=n.addGroup(),se=this.coordinate.getCenter(),xe=this.coordinate.getRadius(),Ee=Ql.getAngle(i,this.coordinate),rt=Ee.startAngle,vt=Ee.endAngle,xt=rt;xt<vt;){var Bt=void 0,_r=(xt-T)%(U+D);_r<U?Bt=xt+(U-_r):(xt+=U+D-_r,Bt=xt+U);var Or=Ql.getSectorPath(se.x,se.y,xe,xt,Math.min(Bt,vt),xe*this.coordinate.innerRadius);Y.addShape("path",{name:"meter-gauge",attrs:{path:Or,fill:i.color,stroke:i.color,lineWidth:.5}}),xt=Bt+D}return Y}});var HO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="gauge",t}return n.getDefaultOptions=function(){return GC},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var s=this.chart.views.find(function(f){return f.id===Yb});s&&s.data(XC(t));var l=this.chart.views.find(function(f){return f.id===t0});l&&l.data(YC(t,this.options.range)),Kb({chart:this.chart,options:this.options},!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return vy},n}(ro);function KC(i,n,t){if(t===1)return[0,n];var s=Math.floor(i/n);return[n*s,n*(s+1)]}function jO(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1}function qC(i,n,t,s,l){var f=(0,E.d9)(i);(0,E.MR)(f,n);var d=(0,E.I)(f,n),m=(0,E.rx)(d),x=m.max-m.min,T=t;if(!t&&s&&(T=s>1?x/(s-1):m.max),!t&&!s){var P=jO(d);T=x/P}var D={},B=(0,E.vM)(f,l);(0,E.xb)(B)?(0,E.S6)(f,function(Y){var se=Y[n],xe=KC(se,T,s),Ee="".concat(xe[0],"-").concat(xe[1]);(0,E.wH)(D,Ee)||(D[Ee]={range:xe,count:0}),D[Ee].count+=1}):Object.keys(B).forEach(function(Y){(0,E.S6)(B[Y],function(se){var xe=se[n],Ee=KC(xe,T,s),rt="".concat(Ee[0],"-").concat(Ee[1]),vt="".concat(rt,"-").concat(Y);(0,E.wH)(D,vt)||(D[vt]={range:Ee,count:0},D[vt][l]=Y),D[vt].count+=1})});var U=[];return(0,E.S6)(D,function(Y){U.push(Y)}),U}var i1="range",gy="count",WO=mn({},ro.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function GO(i){var n=i.chart,t=i.options,s=t.data,l=t.binField,f=t.binNumber,d=t.binWidth,m=t.color,x=t.stackField,T=t.legend,P=t.columnStyle,D=qC(s,l,d,f,x);n.data(D);var B=mn({},i,{options:{xField:i1,yField:gy,seriesField:x,isStack:!0,interval:{color:m,style:P}}});return mc(B),T&&x?n.legend(x,T):n.legend(!1),i}function $O(i){var n,t=i.options,s=t.xAxis,l=t.yAxis;return Ua(Vu((n={},n[i1]=s,n[gy]=l,n)))(i)}function XO(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis;return s===!1?n.axis(i1,!1):n.axis(i1,s),l===!1?n.axis(gy,!1):n.axis(gy,l),i}function YO(i){var n=i.chart,t=i.options,s=t.label,l=_a(n,"interval");if(!s)l.label(!1);else{var f=s.callback,d=(0,M._T)(s,["callback"]);l.label({fields:[gy],callback:f,cfg:Jl(d)})}return i}function QC(i){return Ua(Go,ap("columnStyle"),GO,$O,XO,Hg,YO,Dl,cu,ps)(i)}var KO=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="histogram",t}return n.getDefaultOptions=function(){return WO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.binField,f=s.binNumber,d=s.binWidth,m=s.stackField;this.chart.changeData(qC(t,l,d,f,m))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return QC},n}(ro),qO=mn({},ro.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),QO=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.active=function(){var t=this.getView(),s=this.context.event;if(s.data){var l=s.data.items,f=t.geometries.filter(function(d){return d.type==="point"});(0,E.S6)(f,function(d){(0,E.S6)(d.elements,function(m){var x=(0,E.cx)(l,function(T){return T.data===m.data})!==-1;m.setState("active",x)})})}},n.prototype.reset=function(){var t=this.getView(),s=t.geometries.filter(function(l){return l.type==="point"});(0,E.S6)(s,function(l){(0,E.S6)(l.elements,function(f){f.setState("active",!1)})})},n.prototype.getView=function(){return this.context.view},n}(In);Kr("marker-active",QO),Nn("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var JC=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t}return n.getDefaultOptions=function(){return qO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;J_({chart:l,options:f}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return TC},n}(ro),eT=mn({},ro.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),JO=[1,0,0,0,1,0,0,0,1];function qb(i,n){var t=n?(0,M.ev)([],n,!0):(0,M.ev)([],JO,!0);return Ql.transform(t,i)}var ek=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getActiveElements=function(){var t=Ql.getDelegationObject(this.context);if(t){var s=this.context.view,l=t.component,f=t.item,d=l.get("field");if(d){var m=s.geometries[0].elements;return m.filter(function(x){return x.getModel().data[d]===f.value})}}return[]},n.prototype.getActiveElementLabels=function(){var t=this.context.view,s=this.getActiveElements(),l=t.geometries[0].labelsContainer.getChildren();return l.filter(function(f){return s.find(function(d){return(0,E.Xy)(d.getData(),f.get("data"))})})},n.prototype.transfrom=function(t){t===void 0&&(t=7.5);var s=this.getActiveElements(),l=this.getActiveElementLabels();s.forEach(function(f,d){var m=l[d],x=f.geometry.coordinate;if(x.isPolar&&x.isTransposed){var T=Ql.getAngle(f.getModel(),x),P=T.startAngle,D=T.endAngle,B=(P+D)/2,U=t,Y=U*Math.cos(B),se=U*Math.sin(B);f.shape.setMatrix(qb([["t",Y,se]])),m.setMatrix(qb([["t",Y,se]]))}})},n.prototype.active=function(){this.transfrom()},n.prototype.reset=function(){this.transfrom(0)},n}(In);function tk(i){var n=i.event,t,s=n.target;return s&&(t=s.get("element")),t}var rk=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getAnnotations=function(t){var s=t||this.context.view;return s.getController("annotation").option},n.prototype.getInitialAnnotation=function(){return this.initialAnnotation},n.prototype.init=function(){var t=this,s=this.context.view;s.removeInteraction("tooltip"),s.on("afterchangesize",function(){var l=t.getAnnotations(s);t.initialAnnotation=l})},n.prototype.change=function(t){var s=this.context,l=s.view,f=s.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var d=(0,E.U2)(f,["data","data"]);if(f.type.match("legend-item")){var m=Ql.getDelegationObject(this.context),x=l.getGroupedFields()[0];if(m&&x){var T=m.item;d=l.getData().find(function(U){return U[x]===T.value})}}if(d){var P=(0,E.U2)(t,"annotations",[]),D=(0,E.U2)(t,"statistic",{});l.getController("annotation").clear(!0),(0,E.S6)(P,function(U){typeof U=="object"&&l.annotation()[U.type](U)}),j_(l,{statistic:D,plotType:"pie"},d),l.render(!0)}var B=tk(this.context);B&&B.shape.toFront()},n.prototype.reset=function(){var t=this.context.view,s=t.getController("annotation");s.clear(!0);var l=this.getInitialAnnotation();(0,E.S6)(l,function(f){t.annotation()[f.type](f)}),t.render(!0)},n}(In),tT="pie-statistic";Kr(tT,rk),Nn("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Kr("pie-legend",ek),Nn("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function nk(i,n){var t=null;return(0,E.S6)(i,function(s){typeof s[n]=="number"&&(t+=s[n])}),t}function ik(i,n){var t;switch(i){case"inner":return t="-30%",(0,E.HD)(n)&&n.endsWith("%")?parseFloat(n)*.01>0?t:n:n<0?n:t;case"outer":return t=12,(0,E.HD)(n)&&n.endsWith("%")?parseFloat(n)*.01<0?t:n:n>0?n:t;default:return n}}function Qb(i,n){return(0,E.yW)(fv(i,n),function(t){return t[n]===0})}function ak(i){var n=i.chart,t=i.options,s=t.data,l=t.angleField,f=t.colorField,d=t.color,m=t.pieStyle,x=t.shape,T=fv(s,l);if(Qb(T,l)){var P="$$percentage$$";T=T.map(function(B){var U;return(0,M.pi)((0,M.pi)({},B),(U={},U[P]=1/T.length,U))}),n.data(T);var D=mn({},i,{options:{xField:"1",yField:P,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});mc(D)}else{n.data(T);var D=mn({},i,{options:{xField:"1",yField:l,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});mc(D)}return i}function ok(i){var n,t=i.chart,s=i.options,l=s.meta,f=s.colorField,d=mn({},l);return t.scale(d,(n={},n[f]={type:"cat"},n)),i}function sk(i){var n=i.chart,t=i.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"theta",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),i}function uk(i){var n=i.chart,t=i.options,s=t.label,l=t.colorField,f=t.angleField,d=n.geometries[0];if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]),T=Jl(x);if(T.content){var P=T.content;T.content=function(Y,se,xe){var Ee=Y[l],rt=Y[f],vt=n.getScaleByField(f),xt=vt==null?void 0:vt.scale(rt);return(0,E.mf)(P)?P((0,M.pi)((0,M.pi)({},Y),{percent:xt}),se,xe):(0,E.HD)(P)?vC(P,{value:rt,name:Ee,percentage:(0,E.hj)(xt)&&!(0,E.UM)(rt)?"".concat((xt*100).toFixed(2),"%"):null}):P}}var D={inner:"",outer:"pie-outer",spider:"pie-spider"},B=T.type?D[T.type]:"pie-outer",U=T.layout?(0,E.kJ)(T.layout)?T.layout:[T.layout]:[];T.layout=(B?[{type:B}]:[]).concat(U),d.label({fields:l?[f,l]:[f],callback:m,cfg:(0,M.pi)((0,M.pi)({},T),{offset:ik(T.type,T.offset),type:"pie"})})}return i}function rT(i){var n=i.innerRadius,t=i.statistic,s=i.angleField,l=i.colorField,f=i.meta,d=i.locale,m=X_(d);if(n&&t){var x=mn({},eT.statistic,t),T=x.title,P=x.content;return T!==!1&&(T=mn({},{formatter:function(D){var B=D?D[l]:(0,E.UM)(T.content)?m.get(["statistic","total"]):T.content,U=(0,E.U2)(f,[l,"formatter"])||function(Y){return Y};return U(B)}},T)),P!==!1&&(P=mn({},{formatter:function(D,B){var U=D?D[s]:nk(B,s),Y=(0,E.U2)(f,[s,"formatter"])||function(se){return se};return D||(0,E.UM)(P.content)?Y(U):P.content}},P)),mn({},{statistic:{title:T,content:P}},i)}return i}function lk(i){var n=i.chart,t=i.options,s=rT(t),l=s.innerRadius,f=s.statistic;return n.getController("annotation").clear(!0),Ua(Eu())(i),l&&f&&j_(n,{statistic:f,plotType:"pie"}),i}function ck(i){var n=i.chart,t=i.options,s=t.tooltip,l=t.colorField,f=t.angleField,d=t.data;if(s===!1)n.tooltip(s);else if(n.tooltip(mn({},s,{shared:!1})),Qb(d,f)){var m=(0,E.U2)(s,"fields"),x=(0,E.U2)(s,"formatter");(0,E.xb)((0,E.U2)(s,"fields"))&&(m=[l,f],x=x||function(T){return{name:T[l],value:(0,E.BB)(T[f])}}),n.geometries[0].tooltip(m.join("*"),Qm(m,x))}return i}function fk(i){var n=i.chart,t=i.options,s=rT(t),l=s.interactions,f=s.statistic,d=s.annotations;return(0,E.S6)(l,function(m){var x,T;if(m.enable===!1)n.removeInteraction(m.type);else if(m.type==="pie-statistic-active"){var P=[];!((x=m.cfg)===null||x===void 0)&&x.start||(P=[{trigger:"element:mouseenter",action:"".concat(tT,":change"),arg:{statistic:f,annotations:d}}]),(0,E.S6)((T=m.cfg)===null||T===void 0?void 0:T.start,function(D){P.push((0,M.pi)((0,M.pi)({},D),{arg:{statistic:f,annotations:d}}))}),n.interaction(m.type,mn({},m.cfg,{start:P}))}else n.interaction(m.type,m.cfg||{})}),i}function nT(i){return Ua(ap("pieStyle"),ak,ok,Go,sk,Vg,ck,uk,Hg,lk,fk,ps)(i)}var iT=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pie",t}return n.getDefaultOptions=function(){return eT},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null));var s=this.options,l=this.options.angleField,f=fv(s.data,l),d=fv(t,l);Qb(f,l)||Qb(d,l)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(d),lk({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return nT},n}(ro),aT=["#FAAD14","#E8EDF3"],a1={percent:.2,color:aT,animation:{}};function Jb(i){var n=(0,E.uZ)(Gp(i)?i:0,0,1);return[{current:"".concat(n),type:"current",percent:n},{current:"".concat(n),type:"target",percent:1}]}function oT(i){var n=i.chart,t=i.options,s=t.percent,l=t.progressStyle,f=t.color,d=t.barWidthRatio;n.data(Jb(s));var m=mn({},i,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:d,interval:{style:l,color:(0,E.HD)(f)?[f,aT[1]]:f},args:{zIndexReversed:!0,sortZIndex:!0}}});return mc(m),n.tooltip(!1),n.axis(!1),n.legend(!1),i}function hk(i){var n=i.chart;return n.coordinate("rect").transpose(),i}function sT(i){return Ua(oT,Vu({}),hk,ps,Go,Eu())(i)}var pk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="process",t}return n.getDefaultOptions=function(){return a1},n.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(Jb(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return sT},n}(ro);function dk(i){var n=i.chart,t=i.options,s=t.innerRadius,l=t.radius;return n.coordinate("theta",{innerRadius:s,radius:l}),i}function uT(i,n){var t=i.chart,s=i.options,l=s.innerRadius,f=s.statistic,d=s.percent,m=s.meta;if(t.getController("annotation").clear(!0),l&&f){var x=(0,E.U2)(m,["percent","formatter"])||function(P){return"".concat((P*100).toFixed(2),"%")},T=f.content;T&&(T=mn({},T,{content:(0,E.UM)(T.content)?x(d):T.content})),j_(t,{statistic:(0,M.pi)((0,M.pi)({},f),{content:T}),plotType:"ring-progress"},{percent:d})}return n&&t.render(!0),i}function lT(i){return Ua(oT,Vu({}),dk,uT,ps,Go,Eu())(i)}var vk={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},gk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ring-process",t}return n.getDefaultOptions=function(){return vk},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(Jb(t)),uT({chart:this.chart,options:this.options},!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return lT},n}(ro),tg=k(56645),jB={exp:tg.regressionExp,linear:tg.regressionLinear,loess:tg.regressionLoess,log:tg.regressionLog,poly:tg.regressionPoly,pow:tg.regressionPow,quad:tg.regressionQuad};function cT(i,n){var t=10,s={regionStyle:[{position:{start:[i,"max"],end:["max",n]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[i,n]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",n],end:[i,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[i,n],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",n],offsetX:-t,offsetY:-t,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:t,offsetY:-t,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:t,offsetY:t,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",n],offsetX:-t,offsetY:t,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return s}var fT=function(i,n){var t=n.view,s=n.options,l=s.xField,f=s.yField,d=t.getScaleByField(l),m=t.getScaleByField(f),x=i.map(function(T){return t.getCoordinate().convert({x:d.scale(T[0]),y:m.scale(T[1])})});return H_(x,!1)},hT=function(i){var n=i.options,t=n.xField,s=n.yField,l=n.data,f=n.regressionLine,d=f.type,m=d===void 0?"linear":d,x=f.algorithm,T=f.equation,P,D=null;if(x)P=(0,E.kJ)(x)?x:x(l),D=T;else{var B=jB[m]().x(function(U){return U[t]}).y(function(U){return U[s]});P=B(l),D=o1(m,P)}return[fT(P,i),D]},pT=function(i){var n,t=i.meta,s=t===void 0?{}:t,l=i.xField,f=i.yField,d=i.data,m=d[0][l],x=d[0][f],T=m>0,P=x>0;function D(B,U){var Y=(0,E.U2)(s,[B]);function se(Ee){return(0,E.U2)(Y,Ee)}var xe={};return U==="x"?((0,E.hj)(m)&&((0,E.hj)(se("min"))||(xe.min=T?0:m*2),(0,E.hj)(se("max"))||(xe.max=T?m*2:0)),xe):((0,E.hj)(x)&&((0,E.hj)(se("min"))||(xe.min=P?0:x*2),(0,E.hj)(se("max"))||(xe.max=P?x*2:0)),xe)}return(0,M.pi)((0,M.pi)({},s),(n={},n[l]=(0,M.pi)((0,M.pi)({},s[l]),D(l,"x")),n[f]=(0,M.pi)((0,M.pi)({},s[f]),D(f,"y")),n))};function o1(i,n){var t,s,l,f=function(T,P){return P===void 0&&(P=4),Math.round(T*Math.pow(10,P))/Math.pow(10,P)},d=function(T){return Number.isFinite(T)?f(T):"?"};switch(i){case"linear":return"y = ".concat(d(n.a),"x + ").concat(d(n.b),", R^2 = ").concat(d(n.rSquared));case"exp":return"y = ".concat(d(n.a),"e^(").concat(d(n.b),"x), R^2 = ").concat(d(n.rSquared));case"log":return"y = ".concat(d(n.a),"ln(x) + ").concat(d(n.b),", R^2 = ").concat(d(n.rSquared));case"quad":return"y = ".concat(d(n.a),"x^2 + ").concat(d(n.b),"x + ").concat(d(n.c),", R^2 = ").concat(d(n.rSquared));case"poly":for(var m="y = ".concat(d((t=n.coefficients)===null||t===void 0?void 0:t[0])," + ").concat(d((s=n.coefficients)===null||s===void 0?void 0:s[1]),"x + ").concat(d((l=n.coefficients)===null||l===void 0?void 0:l[2]),"x^2"),x=3;x<n.coefficients.length;++x)m+=" + ".concat(d(n.coefficients[x]),"x^").concat(x);return"".concat(m,", R^2 = ").concat(d(n.rSquared));case"pow":return"y = ".concat(d(n.a),"x^").concat(d(n.b),", R^2 = ").concat(d(n.rSquared))}return null}function eS(i){var n=i.data,t=n===void 0?[]:n,s=i.xField,l=i.yField;if(t.length){for(var f=!0,d=!0,m=t[0],x=void 0,T=1;T<t.length&&(x=t[T],m[s]!==x[s]&&(f=!1),m[l]!==x[l]&&(d=!1),!(!f&&!d));T++)m=x;var P=[];f&&P.push(s),d&&P.push(l);var D=ls(pT(i),P);return mn({},i,{meta:D})}return i}function dT(i){var n=i.chart,t=i.options,s=t.data,l=t.type,f=t.color,d=t.shape,m=t.pointStyle,x=t.shapeField,T=t.colorField,P=t.xField,D=t.yField,B=t.sizeField,U=t.size,Y=t.tooltip;B&&(U||(U=[2,8]),(0,E.hj)(U)&&(U=[U,U])),Y&&!Y.fields&&(Y=(0,M.pi)((0,M.pi)({},Y),{fields:[P,D,T,B,x]})),n.data(s),Ih(mn({},i,{options:{seriesField:T,point:{color:f,shape:d,size:U,style:m},tooltip:Y}}));var se=_a(n,"point");return l&&se.adjust(l),i}function s1(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=eS(t);return Ua(Vu((n={},n[f]=s,n[d]=l,n)))(mn({},i,{options:m}))}function mk(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return n.axis(f,s),n.axis(d,l),i}function vT(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField,f=t.shapeField,d=t.sizeField,m=t.shapeLegend,x=t.sizeLegend,T=s!==!1;return l&&n.legend(l,T?s:!1),f&&(m?n.legend(f,m):n.legend(f,m===!1?!1:s)),d&&n.legend(d,x||!1),!T&&!m&&!x&&n.legend(!1),i}function gT(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=_a(n,"point");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:Jl(m)})}return i}function yk(i){var n=i.options,t=n.quadrant,s=[];if(t){var l=t.xBaseline,f=l===void 0?0:l,d=t.yBaseline,m=d===void 0?0:d,x=t.labels,T=t.regionStyle,P=t.lineStyle,D=cT(f,m),B=new Array(4).join(",").split(",");B.forEach(function(U,Y){s.push((0,M.pi)((0,M.pi)({type:"region",top:!1},D.regionStyle[Y].position),{style:mn({},D.regionStyle[Y].style,T==null?void 0:T[Y])}),(0,M.pi)({type:"text",top:!0},mn({},D.labelStyle[Y],x==null?void 0:x[Y])))}),s.push({type:"line",top:!1,start:["min",m],end:["max",m],style:mn({},D.lineStyle,P)},{type:"line",top:!1,start:[f,"min"],end:[f,"max"],style:mn({},D.lineStyle,P)})}return Ua(Eu(s))(i)}function tS(i){var n=i.options,t=i.chart,s=n.regressionLine;if(s){var l=s.style,f=s.equationStyle,d=f===void 0?{}:f,m=s.top,x=m===void 0?!1:m,T=s.showEquation,P=T===void 0?!1:T,D={stroke:"#9ba29a",lineWidth:2,opacity:.5},B={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};t.annotation().shape({top:x,render:function(U,Y){var se=U.addGroup({id:"".concat(t.id,"-regression-line"),name:"regression-line-group"}),xe=hT({view:Y,options:n}),Ee=xe[0],rt=xe[1];se.addShape("path",{name:"regression-line",attrs:(0,M.pi)((0,M.pi)({path:Ee},D),l)}),P&&se.addShape("text",{name:"regression-equation",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},B),d),{text:rt})})}})}return i}function mT(i){var n=i.chart,t=i.options,s=t.tooltip;return s?n.tooltip(s):s===!1&&n.tooltip(!1),i}function yT(i){return Ua(dT,s1,mk,vT,mT,gT,IC,hy,Db,cu,yk,ps,Go,tS)(i)}var _T=mn({},ro.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Nn("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var _k=function(i){(0,M.ZT)(n,i);function n(t,s){var l=i.call(this,t,s)||this;return l.type="scatter",l.on(Ue.BEFORE_RENDER,function(f){var d,m,x=l,T=x.options,P=x.chart;if(((d=f.data)===null||d===void 0?void 0:d.source)===Yf.FILTER){var D=l.chart.filterData(l.chart.getData());s1({chart:P,options:(0,M.pi)((0,M.pi)({},T),{data:D})})}((m=f.data)===null||m===void 0?void 0:m.source)===Yf.RESET&&s1({chart:P,options:T})}),l}return n.getDefaultOptions=function(){return _T},n.prototype.changeData=function(t){this.updateOption(eS(mn({},this.options,{data:t})));var s=this,l=s.options,f=s.chart;s1({chart:f,options:l}),this.chart.changeData(t)},n.prototype.getSchemaAdaptor=function(){return yT},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(ro),u1="$$stock-range$$",$g="trend",rS="up",nS="down",WB={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(i,n,t){var s;if(i==="x"){var l=t[0];s=l?l.title:n}else s=n;return{position:i==="y"?"start":"end",content:s,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},GB=mn({},ro.getDefaultOptions(),{tooltip:WB,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function l1(i,n){return(0,E.UI)(i,function(t){var s=t&&(0,M.pi)({},t);if((0,E.kJ)(n)&&s){var l=n[0],f=n[1],d=n[2],m=n[3];s[$g]=s[l]<=s[f]?rS:nS,s[u1]=[s[l],s[f],s[d],s[m]]}return s})}function iS(i){var n=i.chart,t=i.options,s=t.yField,l=t.data,f=t.risingFill,d=t.fallingFill,m=t.tooltip,x=t.stockStyle;n.data(l1(l,s));var T=m;return T!==!1&&(T=mn({},{fields:s},T)),Fb(mn({},i,{options:{schema:{shape:"candle",color:[f,d],style:x},yField:u1,seriesField:$g,rawFields:s,tooltip:T}})),i}function aS(i){var n,t,s=i.chart,l=i.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,T=(n={},n[x]={type:"timeCat",tickCount:6},n[$g]={values:[rS,nS]},n),P=mn(T,f,(t={},t[x]=ls(d,wf),t[u1]=ls(m,wf),t));return s.scale(P),i}function xT(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(u1,!1):n.axis(u1,l),i}function c1(i){var n=i.chart,t=i.options,s=t.tooltip;return s!==!1?n.tooltip(s):n.tooltip(!1),i}function oS(i){var n=i.chart,t=i.options,s=t.legend;return s?n.legend($g,s):s===!1&&n.legend(!1),i}function xk(i){Ua(Go,iS,aS,xT,c1,oS,cu,ps,Eu(),hy)(i)}var $B=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stock",t}return n.getDefaultOptions=function(){return GB},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return xk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField;this.chart.changeData(l1(t,s))},n}(ro);function Xg(i){return(0,E.UI)(i||[],function(n,t){return{x:"".concat(t),y:n}})}var yy="x",Yg="y",bT={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(i,n){return"".concat((0,E.U2)(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},bk={appendPadding:2,tooltip:(0,M.pi)({},bT),animation:{}};function sS(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.areaStyle,d=t.point,m=t.line,x=d==null?void 0:d.state,T=Xg(s);n.data(T);var P=mn({},i,{options:{xField:yy,yField:Yg,area:{color:l,style:f},line:m,point:d}}),D=mn({},P,{options:{tooltip:!1}}),B=mn({},P,{options:{tooltip:!1,state:x}});return K_(P),Jm(D),Ih(B),n.axis(!1),n.legend(!1),i}function Kg(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.data,m=Xg(d);return Ua(Vu((n={},n[yy]=l,n[Yg]=f,n),(t={},t[yy]={type:"cat"},t[Yg]=N_(m,Yg),t)))(i)}function ST(i){return Ua(ap("areaStyle"),sS,Kg,Dl,Go,ps,Eu())(i)}var XB={appendPadding:2,tooltip:(0,M.pi)({},bT),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Sk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tiny-area",t}return n.getDefaultOptions=function(){return XB},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;Kg({chart:l,options:f}),l.changeData(Xg(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return ST},n}(ro);function ET(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.columnStyle,d=t.columnWidthRatio,m=Xg(s);n.data(m);var x=mn({},i,{options:{xField:yy,yField:Yg,widthRatio:d,interval:{style:f,color:l}}});return mc(x),n.axis(!1),n.legend(!1),n.interaction("element-active"),i}function uS(i){return Ua(Go,ap("columnStyle"),ET,Kg,Dl,ps,Eu())(i)}var wT={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(i,n){return"".concat((0,E.U2)(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},Ek={appendPadding:2,tooltip:(0,M.pi)({},wT),animation:{}},YB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tiny-column",t}return n.getDefaultOptions=function(){return Ek},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;Kg({chart:l,options:f}),l.changeData(Xg(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return uS},n}(ro);function sp(i){var n=i.chart,t=i.options,s=t.data,l=t.color,f=t.lineStyle,d=t.point,m=d==null?void 0:d.state,x=Xg(s);n.data(x);var T=mn({},i,{options:{xField:yy,yField:Yg,line:{color:l,style:f},point:d}}),P=mn({},T,{options:{tooltip:!1,state:m}});return Jm(T),Ih(P),n.axis(!1),n.legend(!1),i}function _y(i){return Ua(sp,Kg,Go,Dl,ps,Eu())(i)}var CT=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tiny-line",t}return n.getDefaultOptions=function(){return bk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;Kg({chart:l,options:f}),l.changeData(Xg(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return _y},n}(ro),lS={line:TC,pie:nT,column:t1,bar:OC,area:MC,gauge:vy,"tiny-line":_y,"tiny-column":uS,"tiny-area":ST,"ring-progress":lT,progress:sT,scatter:yT,histogram:QC,funnel:HC,stock:xk},KB={line:JC,pie:iT,column:kC,bar:Ub,area:JP,gauge:HO,"tiny-line":CT,"tiny-column":YB,"tiny-area":Sk,"ring-progress":gk,progress:pk,scatter:_k,histogram:KO,funnel:NO,stock:$B},wk={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function cS(i,n,t){var s=KB[i];if(!s){console.error("could not find ".concat(i," plot"));return}var l=lS[i];l({chart:n,options:mn({},s.getDefaultOptions(),(0,E.U2)(wk,i,{}),t)})}function TT(i){var n=i.chart,t=i.options,s=t.views,l=t.legend;return(0,E.S6)(s,function(f){var d=f.region,m=f.data,x=f.meta,T=f.axes,P=f.coordinate,D=f.interactions,B=f.annotations,U=f.tooltip,Y=f.geometries,se=n.createView({region:d});se.data(m);var xe={};T&&(0,E.S6)(T,function(Ee,rt){xe[rt]=ls(Ee,wf)}),xe=mn({},x,xe),se.scale(xe),T?(0,E.S6)(T,function(Ee,rt){se.axis(rt,Ee)}):se.axis(!1),se.coordinate(P),(0,E.S6)(Y,function(Ee){var rt=Cf({chart:se,options:Ee}).ext,vt=Ee.adjust;vt&&rt.geometry.adjust(vt)}),(0,E.S6)(D,function(Ee){Ee.enable===!1?se.removeInteraction(Ee.type):se.interaction(Ee.type,Ee.cfg)}),(0,E.S6)(B,function(Ee){se.annotation()[Ee.type]((0,M.pi)({},Ee))}),typeof f.animation=="boolean"?se.animate(!1):(se.animate(!0),(0,E.S6)(se.geometries,function(Ee){Ee.animate(f.animation)})),U&&(se.interaction("tooltip"),se.tooltip(U))}),l?(0,E.S6)(l,function(f,d){n.legend(d,f)}):n.legend(!1),n.tooltip(t.tooltip),i}function AT(i){var n=i.chart,t=i.options,s=t.plots,l=t.data,f=l===void 0?[]:l;return(0,E.S6)(s,function(d){var m=d.type,x=d.region,T=d.options,P=T===void 0?{}:T,D=d.top,B=P.tooltip;if(D){cS(m,n,(0,M.pi)((0,M.pi)({},P),{data:f}));return}var U=n.createView((0,M.pi)({region:x},ls(P,SC)));B&&U.interaction("tooltip"),cS(m,U,(0,M.pi)({data:f},P))}),i}function f1(i){var n=i.chart,t=i.options;return n.option("slider",t.slider),i}function qg(i){return Ua(ps,TT,AT,cu,ps,Go,Dl,f1,Eu())(i)}function Ck(i,n){var t=i.getModel(),s=t.data,l;return(0,E.kJ)(s)?l=s[0][n]:l=s[n],l}function qB(i){var n=Tb(i);(0,E.S6)(n,function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)})}var MT=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getAssociationItems=function(t,s){var l,f=this.context.event,d=s||{},m=d.linkField,x=d.dim,T=[];if(!((l=f.data)===null||l===void 0)&&l.data){var P=f.data.data;(0,E.S6)(t,function(D){var B,U,Y=m;if(x==="x"?Y=D.getXScale().field:x==="y"?Y=(B=D.getYScales().find(function(xe){return xe.field===Y}))===null||B===void 0?void 0:B.field:Y||(Y=(U=D.getGroupScales()[0])===null||U===void 0?void 0:U.field),!!Y){var se=(0,E.UI)(Tb(D),function(xe){var Ee=!1,rt=!1,vt=(0,E.kJ)(P)?(0,E.U2)(P[0],Y):(0,E.U2)(P,Y);return Ck(xe,Y)===vt?Ee=!0:rt=!0,{element:xe,view:D,active:Ee,inactive:rt}});T.push.apply(T,se)}})}return T},n.prototype.showTooltip=function(t){var s=Zg(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){if(f.active){var d=f.element.shape.getCanvasBBox();f.view.showTooltip({x:d.minX+d.width/2,y:d.minY+d.height/2})}})},n.prototype.hideTooltip=function(){var t=Zg(this.context.view);(0,E.S6)(t,function(s){s.hideTooltip()})},n.prototype.active=function(t){var s=qm(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("active",!0)})},n.prototype.selected=function(t){var s=qm(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("selected",!0)})},n.prototype.highlight=function(t){var s=qm(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.inactive,m=f.element;d&&m.setState("inactive",!0)})},n.prototype.reset=function(){var t=qm(this.context.view);(0,E.S6)(t,function(s){qB(s)})},n}(In);Kr("association",MT),Nn("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Nn("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Nn("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Nn("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var RT=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="mix",t}return n.prototype.getSchemaAdaptor=function(){return qg},n}(ro),up;(function(i){i.DEV="DEV",i.BETA="BETA",i.STABLE="STABLE"})(up||(up={}));function rg(i,n){console.warn(i===up.DEV?"Plot '".concat(n,"' is in DEV stage, just give us issues."):i===up.BETA?"Plot '".concat(n,"' is in BETA stage, DO NOT use it in production env."):i===up.STABLE?"Plot '".concat(n,`' is in STABLE stage, import it by "import { `).concat(n,` } from '@antv/g2plot'".`):"invalid Stage type.")}var Tk=function(){function i(){}return Object.defineProperty(i,"MultiView",{get:function(){return rg(up.STABLE,"MultiView"),RT},enumerable:!1,configurable:!0}),i}(),$p="first-axes-view",Ph="second-axes-view",ng="series-field-key";function fS(i,n,t,s,l){var f=[];n.forEach(function(D){s.forEach(function(B){var U,Y=(U={},U[i]=B[i],U[t]=D,U[D]=B[D],U);f.push(Y)})});var d=Object.values((0,E.vM)(f,t)),m=d[0],x=m===void 0?[]:m,T=d[1],P=T===void 0?[]:T;return l?[x.reverse(),P.reverse()]:[x,P]}function ig(i){return i!=="vertical"}function QB(i,n,t){var s=n[0],l=n[1],f=s.autoPadding,d=l.autoPadding,m=i.__axisPosition,x=m.layout,T=m.position;if(ig(x)&&T==="top"&&(s.autoPadding=t.instance(f.top,0,f.bottom,f.left),l.autoPadding=t.instance(d.top,f.left,d.bottom,0)),ig(x)&&T==="bottom"&&(s.autoPadding=t.instance(f.top,f.right/2+5,f.bottom,f.left),l.autoPadding=t.instance(d.top,d.right,d.bottom,f.right/2+5)),!ig(x)&&T==="bottom"){var P=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,f.bottom/2+5,P),l.autoPadding=t.instance(f.bottom/2+5,d.right,d.bottom,P)}if(!ig(x)&&T==="top"){var P=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,0,P),l.autoPadding=t.instance(0,d.right,f.top,P)}}function IT(i){var n=i.chart,t=i.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.barStyle,x=t.widthRatio,T=t.legend,P=t.layout,D=fS(l,f,ng,s,ig(P));T?n.legend(ng,T):T===!1&&n.legend(!1);var B,U,Y=D[0],se=D[1];ig(P)?(B=n.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:$p}),B.coordinate().transpose().reflect("x"),U=n.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Ph}),U.coordinate().transpose(),B.data(Y),U.data(se)):(B=n.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:$p}),U=n.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Ph}),U.coordinate().reflect("y"),B.data(Y),U.data(se));var xe=mn({},i,{chart:B,options:{widthRatio:x,xField:l,yField:f[0],seriesField:ng,interval:{color:d,style:m}}});mc(xe);var Ee=mn({},i,{chart:U,options:{xField:l,yField:f[1],seriesField:ng,widthRatio:x,interval:{color:d,style:m}}});return mc(Ee),i}function Ak(i){var n,t,s,l=i.options,f=i.chart,d=l.xAxis,m=l.yAxis,x=l.xField,T=l.yField,P=So(f,$p),D=So(f,Ph),B={};return(0,E.XP)((l==null?void 0:l.meta)||{}).map(function(U){(0,E.U2)(l==null?void 0:l.meta,[U,"alias"])&&(B[U]=l.meta[U].alias)}),f.scale((n={},n[ng]={sync:!0,formatter:function(U){return(0,E.U2)(B,U,U)}},n)),Vu((t={},t[x]=d,t[T[0]]=m[T[0]],t))(mn({},i,{chart:P})),Vu((s={},s[x]=d,s[T[1]]=m[T[1]],s))(mn({},i,{chart:D})),i}function h1(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=t.layout,x=So(n,$p),T=So(n,Ph);return(s==null?void 0:s.position)==="bottom"?T.axis(f,(0,M.pi)((0,M.pi)({},s),{label:{formatter:function(){return""}}})):T.axis(f,!1),s===!1?x.axis(f,!1):x.axis(f,(0,M.pi)({position:ig(m)?"top":"bottom"},s)),l===!1?(x.axis(d[0],!1),T.axis(d[1],!1)):(x.axis(d[0],l[d[0]]),T.axis(d[1],l[d[1]])),n.__axisPosition={position:x.getOptions().axes[f].position,layout:m},i}function Mk(i){var n=i.chart;return cu(mn({},i,{chart:So(n,$p)})),cu(mn({},i,{chart:So(n,Ph)})),i}function hS(i){var n=i.chart,t=i.options,s=t.yField,l=t.yAxis;return jg(mn({},i,{chart:So(n,$p),options:{yAxis:l[s[0]]}})),jg(mn({},i,{chart:So(n,Ph),options:{yAxis:l[s[1]]}})),i}function pS(i){var n=i.chart;return Go(mn({},i,{chart:So(n,$p)})),Go(mn({},i,{chart:So(n,Ph)})),Go(i),i}function Rk(i){var n=i.chart;return ps(mn({},i,{chart:So(n,$p)})),ps(mn({},i,{chart:So(n,Ph)})),i}function Ik(i){var n=this,t,s,l=i.chart,f=i.options,d=f.label,m=f.yField,x=f.layout,T=So(l,$p),P=So(l,Ph),D=_a(T,"interval"),B=_a(P,"interval");if(!d)D.label(!1),B.label(!1);else{var U=d.callback,Y=(0,M._T)(d,["callback"]);Y.position||(Y.position="middle"),Y.offset===void 0&&(Y.offset=2);var se=(0,M.pi)({},Y);if(ig(x)){var xe=((t=se.style)===null||t===void 0?void 0:t.textAlign)||(Y.position==="middle"?"center":"left");Y.style=mn({},Y.style,{textAlign:xe});var Ee={left:"right",right:"left",center:"center"};se.style=mn({},se.style,{textAlign:Ee[xe]})}else{var rt={top:"bottom",bottom:"top",middle:"middle"};typeof Y.position=="string"?Y.position=rt[Y.position]:typeof Y.position=="function"&&(Y.position=function(){for(var Bt=[],_r=0;_r<arguments.length;_r++)Bt[_r]=arguments[_r];return rt[Y.position.apply(n,Bt)]});var vt=((s=se.style)===null||s===void 0?void 0:s.textBaseline)||"bottom";se.style=mn({},se.style,{textBaseline:vt});var xt={top:"bottom",bottom:"top",middle:"middle"};Y.style=mn({},Y.style,{textBaseline:xt[vt]})}D.label({fields:[m[0]],callback:U,cfg:Jl(se)}),B.label({fields:[m[1]],callback:U,cfg:Jl(Y)})}return i}function Pk(i){return Ua(IT,Ak,h1,hS,pS,Ik,Dl,Mk,Rk)(i)}var JB=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bidirectional-bar",t}return n.getDefaultOptions=function(){return mn({},i.getDefaultOptions.call(this),{syncViewPadding:QB})},n.prototype.changeData=function(t){t===void 0&&(t=[]),this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var s=this.options,l=s.xField,f=s.yField,d=s.layout,m=fS(l,f,ng,t,ig(d)),x=m[0],T=m[1],P=So(this.chart,$p),D=So(this.chart,Ph);P.data(x),D.data(T),this.chart.render(!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Pk},n.SERIES_FIELD_KEY=ng,n}(ro),dS,ag="$$range$$",Ok="low-q1-median-q3-high",kk="$$y_outliers$$",PT="outliers_view",OT=mn({},ro.getDefaultOptions(),{meta:(dS={},dS[ag]={min:0,alias:Ok},dS),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),Uc=function(i,n){var t=i;if(Array.isArray(n)){var s=n[0],l=n[1],f=n[2],d=n[3],m=n[4];t=(0,E.UI)(i,function(x){return x[ag]=[x[s],x[l],x[f],x[d],x[m]],x})}return t};function vS(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.groupField,d=t.color,m=t.tooltip,x=t.boxStyle;n.data(Uc(t.data,l));var T=(0,E.kJ)(l)?ag:l,P=l?(0,E.kJ)(l)?l:[l]:[],D=m;D!==!1&&(D=mn({},{fields:(0,E.kJ)(l)?l:[]},D));var B=Fb(mn({},i,{options:{xField:s,yField:T,seriesField:f,tooltip:D,rawFields:P,label:!1,schema:{shape:"box",color:d,style:x}}})).ext;return f&&B.geometry.adjust("dodge"),i}function kT(i){var n=i.chart,t=i.options,s=t.xField,l=t.data,f=t.outliersField,d=t.outliersStyle,m=t.padding,x=t.label;if(!f)return i;var T=n.createView({padding:m,id:PT}),P=l.reduce(function(D,B){var U=B[f];return U.forEach(function(Y){var se;return D.push((0,M.pi)((0,M.pi)({},B),(se={},se[f]=Y,se)))}),D},[]);return T.data(P),Ih({chart:T,options:{xField:s,yField:f,point:{shape:"circle",style:d},label:x}}),T.axis(!1),i}function Dk(i){var n,t,s=i.chart,l=i.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,T=l.yField,P=l.outliersField,D=Array.isArray(T)?ag:T,B={};if(P){var U=kk;B=(n={},n[P]={sync:U,nice:!0},n[D]={sync:U,nice:!0},n)}var Y=mn(B,f,(t={},t[x]=ls(d,wf),t[D]=ls(m,wf),t));return s.scale(Y),i}function Lk(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=Array.isArray(d)?ag:d;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(ag,!1):n.axis(m,l),i}function p1(i){var n=i.chart,t=i.options,s=t.legend,l=t.groupField;return l?s?n.legend(l,s):n.legend(l,{position:"bottom"}):n.legend(!1),i}function gS(i){return Ua(vS,kT,Dk,Lk,p1,Dl,Eu(),cu,ps,Go)(i)}var Fk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="box",t}return n.getDefaultOptions=function(){return OT},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField,l=this.chart.views.find(function(f){return f.id===PT});l&&l.data(t),this.chart.changeData(Uc(t,s))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return gS},n}(ro);function DT(i,n,t){return i.length>1?"".concat(n,"_").concat(t):"".concat(n)}function xy(i){var n=i.data,t=i.xField,s=i.measureField,l=i.rangeField,f=i.targetField,d=i.layout,m=[],x=[];n.forEach(function(D,B){var U=[D[l]].flat();U.sort(function(xe,Ee){return xe-Ee}),U.forEach(function(xe,Ee){var rt,vt=Ee===0?xe:U[Ee]-U[Ee-1];m.push((rt={rKey:"".concat(l,"_").concat(Ee)},rt[t]=t?D[t]:String(B),rt[l]=vt,rt))});var Y=[D[s]].flat();Y.forEach(function(xe,Ee){var rt;m.push((rt={mKey:DT(Y,s,Ee)},rt[t]=t?D[t]:String(B),rt[s]=xe,rt))});var se=[D[f]].flat();se.forEach(function(xe,Ee){var rt;m.push((rt={tKey:DT(se,f,Ee)},rt[t]=t?D[t]:String(B),rt[f]=xe,rt))}),x.push(D[l],D[s],D[f])});var T=Math.min.apply(Math,x.flat(1/0)),P=Math.max.apply(Math,x.flat(1/0));return T=T>0?0:T,d==="vertical"&&m.reverse(),{min:T,max:P,ds:m}}function mS(i){var n=i.chart,t=i.options,s=t.bulletStyle,l=t.targetField,f=t.rangeField,d=t.measureField,m=t.xField,x=t.color,T=t.layout,P=t.size,D=t.label,B=xy(t),U=B.min,Y=B.max,se=B.ds;n.data(se);var xe=mn({},i,{options:{xField:m,yField:f,seriesField:"rKey",isStack:!0,label:(0,E.U2)(D,"range"),interval:{color:(0,E.U2)(x,"range"),style:(0,E.U2)(s,"range"),size:(0,E.U2)(P,"range")}}});mc(xe),n.geometries[0].tooltip(!1);var Ee=mn({},i,{options:{xField:m,yField:d,seriesField:"mKey",isStack:!0,label:(0,E.U2)(D,"measure"),interval:{color:(0,E.U2)(x,"measure"),style:(0,E.U2)(s,"measure"),size:(0,E.U2)(P,"measure")}}});mc(Ee);var rt=mn({},i,{options:{xField:m,yField:l,seriesField:"tKey",label:(0,E.U2)(D,"target"),point:{color:(0,E.U2)(x,"target"),style:(0,E.U2)(s,"target"),size:(0,E.mf)((0,E.U2)(P,"target"))?function(vt){return(0,E.U2)(P,"target")(vt)/2}:(0,E.U2)(P,"target")/2,shape:T==="horizontal"?"line":"hyphen"}}});return Ih(rt),T==="horizontal"&&n.coordinate().transpose(),(0,M.pi)((0,M.pi)({},i),{ext:{data:{min:U,max:Y}}})}function LT(i){var n,t,s=i.options,l=i.ext,f=s.xAxis,d=s.yAxis,m=s.targetField,x=s.rangeField,T=s.measureField,P=s.xField,D=l.data;return Ua(Vu((n={},n[P]=f,n[T]=d,n),(t={},t[T]={min:D==null?void 0:D.min,max:D==null?void 0:D.max,sync:!0},t[m]={sync:"".concat(T)},t[x]={sync:"".concat(T)},t)))(i)}function d1(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.measureField,m=t.rangeField,x=t.targetField;return n.axis("".concat(m),!1),n.axis("".concat(x),!1),s===!1?n.axis("".concat(f),!1):n.axis("".concat(f),s),l===!1?n.axis("".concat(d),!1):n.axis("".concat(d),l),i}function r0(i){var n=i.chart,t=i.options,s=t.legend;return n.removeInteraction("legend-filter"),n.legend(s),n.legend("rKey",!1),n.legend("mKey",!1),n.legend("tKey",!1),i}function Bk(i){var n=i.chart,t=i.options,s=t.label,l=t.measureField,f=t.targetField,d=t.rangeField,m=n.geometries,x=m[0],T=m[1],P=m[2];return(0,E.U2)(s,"range")?x.label("".concat(d),(0,M.pi)({layout:[{type:"limit-in-plot"}]},Jl(s.range))):x.label(!1),(0,E.U2)(s,"measure")?T.label("".concat(l),(0,M.pi)({layout:[{type:"limit-in-plot"}]},Jl(s.measure))):T.label(!1),(0,E.U2)(s,"target")?P.label("".concat(f),(0,M.pi)({layout:[{type:"limit-in-plot"}]},Jl(s.target))):P.label(!1),i}function Nk(i){Ua(mS,LT,d1,r0,Go,Bk,Dl,cu,ps)(i)}var zk=mn({},ro.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),e4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bullet",t}return n.getDefaultOptions=function(){return zk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=xy(this.options),l=s.min,f=s.max,d=s.ds;LT({options:this.options,ext:{data:{min:l,max:f}},chart:this.chart}),this.chart.changeData(d)},n.prototype.getSchemaAdaptor=function(){return Nk},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(ro),FT={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(i){return i.id},source:function(i){return i.source},target:function(i){return i.target},sourceWeight:function(i){return i.value||1},targetWeight:function(i){return i.value||1},sortBy:null};function Uk(i,n,t){(0,E.U5)(i,function(s,l){s.inEdges=n.filter(function(f){return"".concat(t.target(f))==="".concat(l)}),s.outEdges=n.filter(function(f){return"".concat(t.source(f))==="".concat(l)}),s.edges=s.outEdges.concat(s.inEdges),s.frequency=s.edges.length,s.value=0,s.inEdges.forEach(function(f){s.value+=t.targetWeight(f)}),s.outEdges.forEach(function(f){s.value+=t.sourceWeight(f)})})}function BT(i,n){var t={weight:function(l,f){return f.value-l.value},frequency:function(l,f){return f.frequency-l.frequency},id:function(l,f){return"".concat(n.id(l)).localeCompare("".concat(n.id(f)))}},s=t[n.sortBy];!s&&(0,E.mf)(n.sortBy)&&(s=n.sortBy),s&&i.sort(s)}function NT(i,n){var t=i.length;if(!t)throw new TypeError("Invalid nodes: it's empty!");if(n.weight){var s=n.nodePaddingRatio;if(s<0||s>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var l=s/(2*t),f=n.nodeWidthRatio;if(f<=0||f>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var d=0;i.forEach(function(x){d+=x.value}),i.forEach(function(x){x.weight=x.value/d,x.width=x.weight*(1-s),x.height=f}),i.forEach(function(x,T){for(var P=0,D=T-1;D>=0;D--)P+=i[D].width+2*l;var B=x.minX=l+P,U=x.maxX=x.minX+x.width,Y=x.minY=n.y-f/2,se=x.maxY=Y+f;x.x=[B,U,U,B],x.y=[Y,Y,se,se]})}else{var m=1/t;i.forEach(function(x,T){x.x=(T+.5)*m,x.y=n.y})}return i}function zT(i,n,t){if(t.weight){var s={};(0,E.U5)(i,function(l,f){s[f]=l.value}),n.forEach(function(l){var f=t.source(l),d=t.target(l),m=i[f],x=i[d];if(m&&x){var T=s[f],P=t.sourceWeight(l),D=m.minX+(m.value-T)/m.value*m.width,B=D+P/m.value*m.width;s[f]-=P;var U=s[d],Y=t.targetWeight(l),se=x.minX+(x.value-U)/x.value*x.width,xe=se+Y/x.value*x.width;s[d]-=Y;var Ee=t.y;l.x=[D,B,se,xe],l.y=[Ee,Ee,Ee,Ee],l.source=m,l.target=x}})}else n.forEach(function(l){var f=i[t.source(l)],d=i[t.target(l)];f&&d&&(l.x=[f.x,d.x],l.y=[f.y,d.y],l.source=f,l.target=d)});return n}function UT(i){return(0,E.f0)({},FT,i)}function ZT(i,n){var t=UT(i),s={},l=n.nodes,f=n.links;l.forEach(function(x){var T=t.id(x);s[T]=x}),Uk(s,f,t),BT(l,t);var d=NT(l,t),m=zT(s,f,t);return{nodes:d,links:m}}var VT="x",by="y",v1="name",yS="source",Zk={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(i,n){var t=(i[0]+i[1])/2,s=t>.5?-4:4;return{offsetX:s,content:n}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(i){return!(0,E.U2)(i,[0,"data","isNode"])},formatter:function(i){var n=i.source,t=i.target,s=i.value;return{name:"".concat(n," -> ").concat(t),value:s}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Vk(i){var n=i.options,t=n.data,s=n.sourceField,l=n.targetField,f=n.weightField,d=n.nodePaddingRatio,m=n.nodeWidthRatio,x=n.rawFields,T=x===void 0?[]:x,P=BP(t,s,l,f),D=ZT({weight:!0,nodePaddingRatio:d,nodeWidthRatio:m},P),B=D.nodes,U=D.links,Y=B.map(function(xe){return(0,M.pi)((0,M.pi)({},ls(xe,(0,M.ev)(["id","x","y","name"],T,!0))),{isNode:!0})}),se=U.map(function(xe){return(0,M.pi)((0,M.pi)({source:xe.source.name,target:xe.target.name,name:xe.source.name||xe.target.name},ls(xe,(0,M.ev)(["x","y","value"],T,!0))),{isNode:!1})});return(0,M.pi)((0,M.pi)({},i),{ext:(0,M.pi)((0,M.pi)({},i.ext),{chordData:{nodesData:Y,edgesData:se}})})}function Hk(i){var n,t=i.chart;return t.scale((n={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},n[v1]={sync:"color"},n[yS]={sync:"color"},n)),i}function jk(i){var n=i.chart;return n.axis(!1),i}function Sy(i){var n=i.chart;return n.legend(!1),i}function HT(i){var n=i.chart,t=i.options,s=t.tooltip;return n.tooltip(s),i}function Wk(i){var n=i.chart;return n.coordinate("polar").reflect("y"),i}function jT(i){var n=i.chart,t=i.options,s=i.ext.chordData.nodesData,l=t.nodeStyle,f=t.label,d=t.tooltip,m=n.createView();return m.data(s),q_({chart:m,options:{xField:VT,yField:by,seriesField:v1,polygon:{style:l},label:f,tooltip:d}}),i}function WT(i){var n=i.chart,t=i.options,s=i.ext.chordData.edgesData,l=t.edgeStyle,f=t.tooltip,d=n.createView();d.data(s);var m={xField:VT,yField:by,seriesField:yS,edge:{style:l,shape:"arc"},tooltip:f};return xC({chart:d,options:m}),i}function GT(i){var n=i.chart,t=i.options,s=t.animation;return cy(n,s,hC(n)),i}function Gk(i){return Ua(Go,Vk,Wk,Hk,jk,Sy,HT,WT,jT,cu,Hg,GT)(i)}var t4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="chord",t}return n.getDefaultOptions=function(){return Zk},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Gk},n}(ro),$k=["x","y","r","name","value","path","depth"],Xk={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},$T=4,XT=0,YT=5,_S="drilldown-bread-crumb",KT={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},n0="hierarchy-data-transform-params",Yk=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=KT,t}return n.prototype.click=function(){var t=(0,E.U2)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},n.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),s=this.breadCrumbGroup,l=s.getBBox(),f=this.getButtonCfg().position,d={x:t.start.x,y:t.end.y-(l.height+YT*2)};t.isPolar&&(d={x:0,y:0}),f==="bottom-left"&&(d={x:t.start.x,y:t.start.y});var m=Ql.transform(null,[["t",d.x+XT,d.y+l.height+YT]]);s.setMatrix(m)}},n.prototype.back=function(){(0,E.dp)(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},n.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},n.prototype.drill=function(t){var s=this.context.view,l=(0,E.U2)(s,["interactions","drill-down","cfg","transformData"],function(T){return T}),f=l((0,M.pi)({data:t.data},t[n0]));s.changeData(f);for(var d=[],m=t;m;){var x=m.data;d.unshift({id:"".concat(x.name,"_").concat(m.height,"_").concat(m.depth),name:x.name,children:l((0,M.pi)({data:x},t[n0]))}),m=m.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(d)},n.prototype.backTo=function(t){if(!(!t||t.length<=0)){var s=this.context.view,l=(0,E.Z$)(t).children;s.changeData(l),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},n.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,E.U2)(t,["interactions","drill-down","cfg","drillDownConfig"]);return mn(this.breadCrumbCfg,s==null?void 0:s.breadCrumb,this.cfg)},n.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},n.prototype.drawBreadCrumbGroup=function(){var t=this,s=this.getButtonCfg(),l=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:_S});var f=0;l.forEach(function(d,m){var x=t.breadCrumbGroup.addShape({type:"text",id:d.id,name:"".concat(_S,"_").concat(d.name,"_text"),attrs:(0,M.pi)((0,M.pi)({text:m===0&&!(0,E.UM)(s.rootText)?s.rootText:d.name},s.textStyle),{x:f,y:0})}),T=x.getBBox();if(f+=T.width+$T,x.on("click",function(B){var U,Y=B.target.get("id");if(Y!==((U=(0,E.Z$)(l))===null||U===void 0?void 0:U.id)){var se=l.slice(0,l.findIndex(function(xe){return xe.id===Y})+1);t.backTo(se)}}),x.on("mouseenter",function(B){var U,Y=B.target.get("id");Y!==((U=(0,E.Z$)(l))===null||U===void 0?void 0:U.id)?x.attr(s.activeTextStyle):x.attr({cursor:"default"})}),x.on("mouseleave",function(){x.attr(s.textStyle)}),m<l.length-1){var P=t.breadCrumbGroup.addShape({type:"text",name:"".concat(s.name,"_").concat(d.name,"_divider"),attrs:(0,M.pi)((0,M.pi)({text:s.dividerText},s.textStyle),{x:f,y:0})}),D=P.getBBox();f+=D.width+$T}})},n.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},n.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),i.prototype.destroy.call(this)},n}(In);function Kk(i){return dt()(i)==="object"&&"length"in i?i:Array.from(i)}function qT(i){for(var n=i.length,t,s;n;)s=Math.random()*n--|0,t=i[n],i[n]=i[s],i[s]=t;return i}function QT(i){for(var n=0,t=(i=qT(Array.from(i))).length,s=[],l,f;n<t;)l=i[n],f&&m1(f,l)?++n:(f=eA(s=qk(s,l)),n=0);return f}function qk(i,n){var t,s;if(JT(n,i))return[n];for(t=0;t<i.length;++t)if(g1(n,i[t])&&JT(i0(i[t],n),i))return[i[t],n];for(t=0;t<i.length-1;++t)for(s=t+1;s<i.length;++s)if(g1(i0(i[t],i[s]),n)&&g1(i0(i[t],n),i[s])&&g1(i0(i[s],n),i[t])&&JT(y1(i[t],i[s],n),i))return[i[t],i[s],n];throw new Error}function g1(i,n){var t=i.r-n.r,s=n.x-i.x,l=n.y-i.y;return t<0||t*t<s*s+l*l}function m1(i,n){var t=i.r-n.r+Math.max(i.r,n.r,1)*1e-9,s=n.x-i.x,l=n.y-i.y;return t>0&&t*t>s*s+l*l}function JT(i,n){for(var t=0;t<n.length;++t)if(!m1(i,n[t]))return!1;return!0}function eA(i){switch(i.length){case 1:return tA(i[0]);case 2:return i0(i[0],i[1]);case 3:return y1(i[0],i[1],i[2])}}function tA(i){return{x:i.x,y:i.y,r:i.r}}function i0(i,n){var t=i.x,s=i.y,l=i.r,f=n.x,d=n.y,m=n.r,x=f-t,T=d-s,P=m-l,D=Math.sqrt(x*x+T*T);return{x:(t+f+x/D*P)/2,y:(s+d+T/D*P)/2,r:(D+l+m)/2}}function y1(i,n,t){var s=i.x,l=i.y,f=i.r,d=n.x,m=n.y,x=n.r,T=t.x,P=t.y,D=t.r,B=s-d,U=s-T,Y=l-m,se=l-P,xe=x-f,Ee=D-f,rt=s*s+l*l-f*f,vt=rt-d*d-m*m+x*x,xt=rt-T*T-P*P+D*D,Bt=U*Y-B*se,_r=(Y*xt-se*vt)/(Bt*2)-s,Or=(se*xe-Y*Ee)/Bt,Wr=(U*vt-B*xt)/(Bt*2)-l,gn=(B*Ee-U*xe)/Bt,$r=Or*Or+gn*gn-1,zn=2*(f+_r*Or+Wr*gn),li=_r*_r+Wr*Wr-f*f,zi=-($r?(zn+Math.sqrt(zn*zn-4*$r*li))/(2*$r):li/zn);return{x:s+_r+Or*zi,y:l+Wr+gn*zi,r:zi}}function _1(i,n,t){var s=i.x-n.x,l,f,d=i.y-n.y,m,x,T=s*s+d*d;T?(f=n.r+t.r,f*=f,x=i.r+t.r,x*=x,f>x?(l=(T+x-f)/(2*T),m=Math.sqrt(Math.max(0,x/T-l*l)),t.x=i.x-l*s-m*d,t.y=i.y-l*d+m*s):(l=(T+f-x)/(2*T),m=Math.sqrt(Math.max(0,f/T-l*l)),t.x=n.x+l*s-m*d,t.y=n.y+l*d+m*s)):(t.x=n.x+t.r,t.y=n.y)}function of(i,n){var t=i.r+n.r-1e-6,s=n.x-i.x,l=n.y-i.y;return t>0&&t*t>s*s+l*l}function x1(i){var n=i._,t=i.next._,s=n.r+t.r,l=(n.x*t.r+t.x*n.r)/s,f=(n.y*t.r+t.y*n.r)/s;return l*l+f*f}function _v(i){this._=i,this.next=null,this.previous=null}function Qk(i){if(!(l=(i=Kk(i)).length))return 0;var n,t,s,l,f,d,m,x,T,P,D;if(n=i[0],n.x=0,n.y=0,!(l>1))return n.r;if(t=i[1],n.x=-t.r,t.x=n.r,t.y=0,!(l>2))return n.r+t.r;_1(t,n,s=i[2]),n=new _v(n),t=new _v(t),s=new _v(s),n.next=s.previous=t,t.next=n.previous=s,s.next=t.previous=n;e:for(m=3;m<l;++m){_1(n._,t._,s=i[m]),s=new _v(s),x=t.next,T=n.previous,P=t._.r,D=n._.r;do if(P<=D){if(of(x._,s._)){t=x,n.next=t,t.previous=n,--m;continue e}P+=x._.r,x=x.next}else{if(of(T._,s._)){n=T,n.next=t,t.previous=n,--m;continue e}D+=T._.r,T=T.previous}while(x!==T.next);for(s.previous=n,s.next=t,n.next=t.previous=t=s,f=x1(n);(s=s.next)!==t;)(d=x1(s))<f&&(n=s,f=d);t=n.next}for(n=[t._],s=t;(s=s.next)!==t;)n.push(s._);for(s=QT(n),m=0;m<l;++m)n=i[m],n.x-=s.x,n.y-=s.y;return s.r}function rA(i){return Qk(i),i}function Jk(i){return i==null?null:xS(i)}function xS(i){if(typeof i!="function")throw new Error;return i}function Pd(){return 0}function Od(i){return function(){return i}}function nA(i){return Math.sqrt(i.value)}function bS(){var i=null,n=1,t=1,s=Pd;function l(f){return f.x=n/2,f.y=t/2,i?f.eachBefore(SS(i)).eachAfter(xv(s,.5)).eachBefore(b1(1)):f.eachBefore(SS(nA)).eachAfter(xv(Pd,1)).eachAfter(xv(s,f.r/Math.min(n,t))).eachBefore(b1(Math.min(n,t)/(2*f.r))),f}return l.radius=function(f){return arguments.length?(i=Jk(f),l):i},l.size=function(f){return arguments.length?(n=+f[0],t=+f[1],l):[n,t]},l.padding=function(f){return arguments.length?(s=typeof f=="function"?f:Od(+f),l):s},l}function SS(i){return function(n){n.children||(n.r=Math.max(0,+i(n)||0))}}function xv(i,n){return function(t){if(s=t.children){var s,l,f=s.length,d=i(t)*n||0,m;if(d)for(l=0;l<f;++l)s[l].r+=d;if(m=Qk(s),d)for(l=0;l<f;++l)s[l].r-=d;t.r=m+d}}}function b1(i){return function(n){var t=n.parent;n.r*=i,t&&(n.x=t.x+i*n.x,n.y=t.y+i*n.y)}}var S1=k(9783),eD=k.n(S1);function tD(i){var n=0,t=i.children,s=t&&t.length;if(!s)n=1;else for(;--s>=0;)n+=t[s].value;i.value=n}function a0(){return this.eachAfter(tD)}var rD=k(96695),iA=k.n(rD);function r4(i,n){var t=-1,s=iA()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;i.call(n,f,++t,this)}}catch(d){s.e(d)}finally{s.f()}return this}function n4(i,n){for(var t=this,s=[t],l,f,d=-1;t=s.pop();)if(i.call(n,t,++d,this),l=t.children)for(f=l.length-1;f>=0;--f)s.push(l[f]);return this}function i4(i,n){for(var t=this,s=[t],l=[],f,d,m,x=-1;t=s.pop();)if(l.push(t),f=t.children)for(d=0,m=f.length;d<m;++d)s.push(f[d]);for(;t=l.pop();)i.call(n,t,++x,this);return this}function a4(i,n){var t=-1,s=iA()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;if(i.call(n,f,++t,this))return f}}catch(d){s.e(d)}finally{s.f()}}function o4(i){return this.eachAfter(function(n){for(var t=+i(n.data)||0,s=n.children,l=s&&s.length;--l>=0;)t+=s[l].value;n.value=t})}function s4(i){return this.eachBefore(function(n){n.children&&n.children.sort(i)})}function u4(i){for(var n=this,t=aA(n,i),s=[n];n!==t;)n=n.parent,s.push(n);for(var l=s.length;i!==t;)s.splice(l,0,i),i=i.parent;return s}function aA(i,n){if(i===n)return i;var t=i.ancestors(),s=n.ancestors(),l=null;for(i=t.pop(),n=s.pop();i===n;)l=i,i=t.pop(),n=s.pop();return l}function ES(){for(var i=this,n=[i];i=i.parent;)n.push(i);return n}function l4(){return Array.from(this)}function oA(){var i=[];return this.eachBefore(function(n){n.children||i.push(n)}),i}function nD(){var i=this,n=[];return i.each(function(t){t!==i&&n.push({source:t.parent,target:t})}),n}var c4=k(15009),wS=k.n(c4),iD=wS()().mark(aD);function aD(){var i,n,t,s,l,f;return wS()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:i=this,t=[i];case 1:n=t.reverse(),t=[];case 2:if(!(i=n.pop())){m.next=8;break}return m.next=5,i;case 5:if(s=i.children)for(l=0,f=s.length;l<f;++l)t.push(s[l]);m.next=2;break;case 8:if(t.length){m.next=1;break}case 9:case"end":return m.stop()}},iD,this)}function Qg(i,n){i instanceof Map?(i=[void 0,i],n===void 0&&(n=E1)):n===void 0&&(n=f4);for(var t=new lp(i),s,l=[t],f,d,m,x;s=l.pop();)if((d=n(s.data))&&(x=(d=Array.from(d)).length))for(s.children=d,m=x-1;m>=0;--m)l.push(f=d[m]=new lp(d[m])),f.parent=s,f.depth=s.depth+1;return t.eachBefore(uD)}function oD(){return Qg(this).eachBefore(sD)}function f4(i){return i.children}function E1(i){return Array.isArray(i)?i[1]:null}function sD(i){i.data.value!==void 0&&(i.value=i.data.value),i.data=i.data.data}function uD(i){var n=0;do i.height=n;while((i=i.parent)&&i.height<++n)}function lp(i){this.data=i,this.depth=this.height=0,this.parent=null}lp.prototype=Qg.prototype=eD()({constructor:lp,count:a0,each:r4,eachAfter:i4,eachBefore:n4,find:a4,sum:o4,sort:s4,path:u4,ancestors:ES,descendants:l4,leaves:oA,links:nD,copy:oD},Symbol.iterator,aD);var CS="nodeIndex",Ey="childNodeCount",TS="nodeAncestor",AS="Invalid field: it must be a string!";function og(i,n){var t=i.field,s=i.fields;if((0,E.HD)(t))return t;if((0,E.kJ)(t))return console.warn(AS),t[0];if(console.warn("".concat(AS," will try to get fields instead.")),(0,E.HD)(s))return s;if((0,E.kJ)(s)&&s.length)return s[0];if(n)return n;throw new TypeError(AS)}function MS(i){var n=[];if(i&&i.each){var t,s;i.each(function(l){var f,d;l.parent!==t?(t=l.parent,s=0):s+=1;var m=(0,E.hX)((((f=l.ancestors)===null||f===void 0?void 0:f.call(l))||[]).map(function(x){return n.find(function(T){return T.name===x.name})||x}),function(x){var T=x.depth;return T>0&&T<l.depth});l[TS]=m,l[Ey]=((d=l.children)===null||d===void 0?void 0:d.length)||0,l[CS]=s,n.push(l)})}else i&&i.eachNode&&i.eachNode(function(l){n.push(l)});return n}var lD={field:"value",as:["x","y","r"],sort:function(i,n){return n.value-i.value}};function h4(i,n){n=(0,E.f0)({},lD,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var s;try{s=og(n)}catch(T){console.warn(T)}var l=function(T){return bS().size(n.size).padding(n.padding)(Qg(T).sum(function(P){return P[s]}).sort(n.sort))},f=l(i),d=t[0],m=t[1],x=t[2];return f.each(function(T){T[d]=T.x,T[m]=T.y,T[x]=T.r}),MS(f)}function cD(i){var n=i.data,t=i.hierarchyConfig,s=i.rawFields,l=s===void 0?[]:s,f=i.enableDrillDown,d=h4(n,(0,M.pi)((0,M.pi)({},t),{field:"value",as:["x","y","r"]})),m=[];return d.forEach(function(x){for(var T,P=x.data.name,D=(0,M.pi)({},x);D.depth>1;)P="".concat((T=D.parent.data)===null||T===void 0?void 0:T.name," / ").concat(P),D=D.parent;if(f&&x.depth>2)return null;var B=mn({},x.data,(0,M.pi)((0,M.pi)((0,M.pi)({},ls(x.data,l)),{path:P}),x));B.ext=t,B[n0]={hierarchyConfig:t,rawFields:l,enableDrillDown:f},m.push(B)}),m}function fD(i,n,t){var s=Z_([i,n]),l=s[0],f=s[1],d=s[2],m=s[3],x=t.width,T=t.height,P=x-(m+f),D=T-(l+d),B=Math.min(P,D),U=(P-B)/2,Y=(D-B)/2,se=l+Y,xe=f+U,Ee=d+Y,rt=m+U,vt=[se,xe,Ee,rt],xt=B<0?0:B;return{finalPadding:vt,finalSize:xt}}function p4(i){var n=i.chart,t=Math.min(n.viewBBox.width,n.viewBBox.height);return mn({options:{size:function(s){var l=s.r;return l*t}}},i)}function d4(i){var n=i.options,t=i.chart,s=t.viewBBox,l=n.padding,f=n.appendPadding,d=n.drilldown,m=f;if(d!=null&&d.enabled){var x=ly(t.appendPadding,(0,E.U2)(d,["breadCrumb","position"]));m=Z_([x,f])}var T=fD(l,m,s).finalPadding;return t.padding=T,t.appendPadding=0,i}function v4(i){var n=i.chart,t=i.options,s=n.padding,l=n.appendPadding,f=t.color,d=t.colorField,m=t.pointStyle,x=t.hierarchyConfig,T=t.sizeField,P=t.rawFields,D=P===void 0?[]:P,B=t.drilldown,U=cD({data:t.data,hierarchyConfig:x,enableDrillDown:B==null?void 0:B.enabled,rawFields:D});n.data(U);var Y=n.viewBBox,se=fD(s,l,Y).finalSize,xe=function(Ee){var rt=Ee.r;return rt*se};return T&&(xe=function(Ee){return Ee[T]*se}),Ih(mn({},i,{options:{xField:"x",yField:"y",seriesField:d,sizeField:T,rawFields:(0,M.ev)((0,M.ev)([],$k,!0),D,!0),point:{color:f,style:m,shape:"circle",size:xe}}})),i}function g4(i){return Ua(Vu({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(i)}function sA(i){var n=i.chart,t=i.options,s=t.tooltip;if(s===!1)n.tooltip(!1);else{var l=s;(0,E.U2)(s,"fields")||(l=mn({},{customItems:function(f){return f.map(function(d){var m=(0,E.U2)(n.getOptions(),"scales"),x=(0,E.U2)(m,["name","formatter"],function(P){return P}),T=(0,E.U2)(m,["value","formatter"],function(P){return P});return(0,M.pi)((0,M.pi)({},d),{name:x(d.data.name),value:T(d.data.value)})})}},l)),n.tooltip(l)}return i}function uA(i){var n=i.chart;return n.axis(!1),i}function m4(i){var n=i.drilldown,t=i.interactions,s=t===void 0?[]:t;return n!=null&&n.enabled?mn({},i,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:cD,enableDrillDown:!0}}],!1)}):i}function RS(i){var n=i.chart,t=i.options;return cu({chart:n,options:m4(t)}),i}function wy(i){return Ua(ap("pointStyle"),p4,d4,Go,g4,v4,uA,Vg,sA,RS,ps,Eu())(i)}function hD(i){var n=(0,E.U2)(i,["event","data","data"],{});return(0,E.kJ)(n.children)&&n.children.length>0}function w1(i){var n=i.view.getCoordinate(),t=n.innerRadius;if(t){var s=i.event,l=s.x,f=s.y,d=n.center,m=d.x,x=d.y,T=n.getRadius()*t,P=Math.sqrt(Math.pow(m-l,2)+Math.pow(x-f,2));return P<T}return!1}Kr("drill-down-action",Yk),Nn("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:hD},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:w1}],start:[{trigger:"element:click",isEnable:hD,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:w1,action:["drill-down-action:back"]}]});var lA=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle-packing",t}return n.getDefaultOptions=function(){return Xk},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return wy},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n}(ro),Zc="left-axes-view",Oh="right-axes-view",IS={nice:!0,label:{autoHide:!0,autoRotate:!1}},yc=(0,M.pi)((0,M.pi)({},IS),{position:"left"}),pD=(0,M.pi)((0,M.pi)({},IS),{position:"right",grid:null}),o0;(function(i){i.Left="Left",i.Right="Right"})(o0||(o0={}));var qo;(function(i){i.Line="line",i.Column="column"})(qo||(qo={}));function PS(i){return(0,E.U2)(i,"geometry")===qo.Line}function Jg(i){return(0,E.U2)(i,"geometry")===qo.Column}function s0(i,n,t){return Jg(t)?mn({},{geometry:qo.Column,label:t.label&&t.isRange?{content:function(s){var l;return(l=s[n])===null||l===void 0?void 0:l.join("-")}}:void 0},t):(0,M.pi)({geometry:qo.Line},t)}function cA(i,n){var t=i[0],s=i[1];if((0,E.kJ)(n)){var l=n[0],f=n[1];return[l,f]}var d=(0,E.U2)(n,t),m=(0,E.U2)(n,s);return[d,m]}function fA(i,n){return n===o0.Left?i===!1?!1:mn({},yc,i):n===o0.Right?i===!1?!1:mn({},pD,i):i}function dD(i){var n=i.options,t=i.chart,s=n.geometryOption,l=s.isStack,f=s.color,d=s.seriesField,m=s.groupField,x=s.isGroup,T=["xField","yField"];if(PS(s)){Jm(mn({},i,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},ls(n,T)),s),{line:{color:s.color,style:s.lineStyle}})})),Ih(mn({},i,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},ls(n,T)),s),{point:s.point&&(0,M.pi)({color:f,shape:"circle"},s.point)})}));var P=[];x&&P.push({type:"dodge",dodgeBy:m||d,customOffset:0}),l&&P.push({type:"stack"}),P.length&&(0,E.S6)(t.geometries,function(D){D.adjust(P)})}return Jg(s)&&t1(mn({},i,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},ls(n,T)),s),{widthRatio:s.columnWidthRatio,interval:(0,M.pi)((0,M.pi)({},ls(s,["color"])),{style:s.columnStyle})})})),i}function hA(i){var n=i.view,t=i.geometryOption,s=i.yField,l=i.legend,f=(0,E.U2)(l,"marker"),d=_a(n,PS(t)?"line":"interval");if(!t.seriesField){var m=(0,E.U2)(n,"options.scales.".concat(s,".alias"))||s,x=d.getAttribute("color"),T=n.getTheme().defaultColor;x&&(T=Ql.getMappingValue(x,m,(0,E.U2)(x,["values",0],T)));var P=((0,E.mf)(f)?f:!(0,E.xb)(f)&&mn({},{style:{stroke:T,fill:T}},f))||(PS(t)?{symbol:function(B,U,Y){return[["M",B-Y,U],["L",B+Y,U]]},style:{lineWidth:2,r:6,stroke:T}}:{symbol:"square",style:{fill:T}});return[{value:s,name:m,marker:P,isGeometry:!0,viewId:n.id}]}var D=d.getGroupAttributes();return(0,E.u4)(D,function(B,U){var Y=Ql.getLegendItems(n,d,U,n.getTheme(),f);return B.concat(Y)},[])}var pA=function(i,n){var t=n[0],s=n[1],l=i.getOptions().data,f=i.getXScale(),d=(0,E.dp)(l);if(!(!f||!d)){var m=!0,x=(0,E.I)(l,f.field),T=m?x:x.reverse(),P=(0,E.dp)(T),D=Math.floor(t*(P-1)),B=Math.floor(s*(P-1));i.filter(f.field,function(U){var Y=T.indexOf(U);return Y>-1?Ab(Y,D,B):!0}),i.getRootView().render(!0)}};function dA(i){var n,t=i.options,s=t.geometryOptions,l=s===void 0?[]:s,f=t.xField,d=t.yField,m=(0,E.yW)(l,function(x){var T=x.geometry;return T===qo.Line||T===void 0});return mn({},{options:{geometryOptions:[],meta:(n={},n[f]={type:"cat",sync:!0,range:m?[0,1]:void 0},n),tooltip:{showMarkers:m,showCrosshairs:m,shared:!0,crosshairs:{type:"x"}},interactions:m?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},i,{options:{yAxis:cA(d,t.yAxis),geometryOptions:[s0(f,d[0],l[0]),s0(f,d[1],l[1])],annotations:cA(d,t.annotations)}})}function vA(i){var n,t,s=i.chart,l=i.options,f=l.geometryOptions,d={line:0,column:1},m=[{type:(n=f[0])===null||n===void 0?void 0:n.geometry,id:Zc},{type:(t=f[1])===null||t===void 0?void 0:t.geometry,id:Oh}];return m.sort(function(x,T){return-d[x.type]+d[T.type]}).forEach(function(x){return s.createView({id:x.id})}),i}function vD(i){var n=i.chart,t=i.options,s=t.xField,l=t.yField,f=t.geometryOptions,d=t.data,m=t.tooltip,x=[(0,M.pi)((0,M.pi)({},f[0]),{id:Zc,data:d[0],yField:l[0]}),(0,M.pi)((0,M.pi)({},f[1]),{id:Oh,data:d[1],yField:l[1]})];return x.forEach(function(T){var P=T.id,D=T.data,B=T.yField,U=Jg(T)&&T.isPercent,Y=U?EC(D,B,s,B):D,se=So(n,P).data(Y),xe=U?(0,M.pi)({formatter:function(Ee){return{name:Ee[T.seriesField]||B,value:(Number(Ee[B])*100).toFixed(2)+"%"}}},m):m;dD({chart:se,options:{xField:s,yField:B,tooltip:xe,geometryOption:T}})}),i}function gD(i){var n,t=i.chart,s=i.options,l=s.geometryOptions,f=((n=t.getTheme())===null||n===void 0?void 0:n.colors10)||[],d=0;return t.once("beforepaint",function(){(0,E.S6)(l,function(m,x){var T=So(t,x===0?Zc:Oh);if(!m.color){var P=T.getGroupScales(),D=(0,E.U2)(P,[0,"values","length"],1),B=f.slice(d,d+D).concat(x===0?[]:f);T.geometries.forEach(function(U){m.seriesField?U.color(m.seriesField,B):U.color(B[0])}),d+=D}}),t.render(!0)}),i}function mD(i){var n,t,s=i.chart,l=i.options,f=l.xAxis,d=l.yAxis,m=l.xField,x=l.yField;return Vu((n={},n[m]=f,n[x[0]]=d[0],n))(mn({},i,{chart:So(s,Zc)})),Vu((t={},t[m]=f,t[x[1]]=d[1],t))(mn({},i,{chart:So(s,Oh)})),i}function gA(i){var n=i.chart,t=i.options,s=So(n,Zc),l=So(n,Oh),f=t.xField,d=t.yField,m=t.xAxis,x=t.yAxis;return n.axis(f,!1),n.axis(d[0],!1),n.axis(d[1],!1),s.axis(f,m),s.axis(d[0],fA(x[0],o0.Left)),l.axis(f,!1),l.axis(d[1],fA(x[1],o0.Right)),i}function yD(i){var n=i.chart,t=i.options,s=t.tooltip,l=So(n,Zc),f=So(n,Oh);return n.tooltip(s),l.tooltip({shared:!0}),f.tooltip({shared:!0}),i}function mA(i){var n=i.chart;return cu(mn({},i,{chart:So(n,Zc)})),cu(mn({},i,{chart:So(n,Oh)})),i}function _D(i){var n=i.chart,t=i.options,s=t.annotations,l=(0,E.U2)(s,[0]),f=(0,E.U2)(s,[1]);return Eu(l)(mn({},i,{chart:So(n,Zc),options:{annotations:l}})),Eu(f)(mn({},i,{chart:So(n,Oh),options:{annotations:f}})),i}function xD(i){var n=i.chart;return Go(mn({},i,{chart:So(n,Zc)})),Go(mn({},i,{chart:So(n,Oh)})),Go(i),i}function bD(i){var n=i.chart;return ps(mn({},i,{chart:So(n,Zc)})),ps(mn({},i,{chart:So(n,Oh)})),i}function SD(i){var n=i.chart,t=i.options,s=t.yAxis;return jg(mn({},i,{chart:So(n,Zc),options:{yAxis:s[0]}})),jg(mn({},i,{chart:So(n,Oh),options:{yAxis:s[1]}})),i}function ED(i){var n=i.chart,t=i.options,s=t.legend,l=t.geometryOptions,f=t.yField,d=t.data,m=So(n,Zc),x=So(n,Oh);if(s===!1)n.legend(!1);else if((0,E.Kn)(s)&&s.custom===!0)n.legend(s);else{var T=(0,E.U2)(l,[0,"legend"],s),P=(0,E.U2)(l,[1,"legend"],s);n.once("beforepaint",function(){var D=d[0].length?hA({view:m,geometryOption:l[0],yField:f[0],legend:T}):[],B=d[1].length?hA({view:x,geometryOption:l[1],yField:f[1],legend:P}):[];n.legend(mn({},s,{custom:!0,items:D.concat(B)}))}),l[0].seriesField&&m.legend(l[0].seriesField,T),l[1].seriesField&&x.legend(l[1].seriesField,P),n.on("legend-item:click",function(D){var B=(0,E.U2)(D,"gEvent.delegateObject",{});if(B&&B.item){var U=B.item,Y=U.value,se=U.isGeometry,xe=U.viewId;if(se){var Ee=(0,E.cx)(f,function(xt){return xt===Y});if(Ee>-1){var rt=(0,E.U2)(So(n,xe),"geometries");(0,E.S6)(rt,function(xt){xt.changeVisible(!B.item.unchecked)})}}else{var vt=(0,E.U2)(n.getController("legend"),"option.items",[]);(0,E.S6)(n.views,function(xt){var Bt=xt.getGroupScales();(0,E.S6)(Bt,function(_r){_r.values&&_r.values.indexOf(Y)>-1&&xt.filter(_r.field,function(Or){var Wr=(0,E.sE)(vt,function(gn){return gn.value===Or});return!Wr.unchecked})}),n.render(!0)})}}})}return i}function wD(i){var n=i.chart,t=i.options,s=t.slider,l=So(n,Zc),f=So(n,Oh);return s&&(l.option("slider",s),l.on("slider:valuechanged",function(d){var m=d.event,x=m.value,T=m.originValue;(0,E.Xy)(x,T)||pA(f,x)}),n.once("afterpaint",function(){if(!(0,E.jn)(s)){var d=s.start,m=s.end;(d||m)&&pA(f,[d,m])}})),i}function CD(i){return Ua(dA,vA,xD,vD,mD,gA,SD,yD,mA,_D,bD,gD,ED,wD)(i)}var TD=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dual-axes",t}return n.prototype.getDefaultOptions=function(){return mn({},i.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},n.prototype.getSchemaAdaptor=function(){return CD},n}(ro);function AD(i,n){var t=n.data,s=n.coordinate,l=n.interactions,f=n.annotations,d=n.animation,m=n.tooltip,x=n.axes,T=n.meta,P=n.geometries;t&&i.data(t);var D={};x&&(0,E.S6)(x,function(B,U){D[U]=ls(B,wf)}),D=mn({},T,D),i.scale(D),s&&i.coordinate(s),x===!1?i.axis(!1):(0,E.S6)(x,function(B,U){i.axis(U,B)}),(0,E.S6)(P,function(B){var U=Cf({chart:i,options:B}).ext,Y=B.adjust;Y&&U.geometry.adjust(Y)}),(0,E.S6)(l,function(B){B.enable===!1?i.removeInteraction(B.type):i.interaction(B.type,B.cfg)}),(0,E.S6)(f,function(B){i.annotation()[B.type]((0,M.pi)({},B))}),cy(i,d),m?(i.interaction("tooltip"),i.tooltip(m)):m===!1&&i.removeInteraction("tooltip")}function MD(i){var n=i.chart,t=i.options,s=t.type,l=t.data,f=t.fields,d=t.eachView,m=(0,E.CE)(t,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return n.data(l),n.facet(s,(0,M.pi)((0,M.pi)({},m),{fields:f,eachView:function(x,T){var P=d(x,T);if(P.geometries)AD(x,P);else{var D=P,B=D.options;B.tooltip&&x.interaction("tooltip"),cS(D.type,x,B)}}})),i}function RD(i){var n=i.chart,t=i.options,s=t.axes,l=t.meta,f=t.tooltip,d=t.coordinate,m=t.theme,x=t.legend,T=t.interactions,P=t.annotations,D={};return s&&(0,E.S6)(s,function(B,U){D[U]=ls(B,wf)}),D=mn({},l,D),n.scale(D),n.coordinate(d),s?(0,E.S6)(s,function(B,U){n.axis(U,B)}):n.axis(!1),f?(n.interaction("tooltip"),n.tooltip(f)):f===!1&&n.removeInteraction("tooltip"),n.legend(x),m&&n.theme(m),(0,E.S6)(T,function(B){B.enable===!1?n.removeInteraction(B.type):n.interaction(B.type,B.cfg)}),(0,E.S6)(P,function(B){n.annotation()[B.type]((0,M.pi)({},B))}),i}function yA(i){return Ua(Go,MD,RD)(i)}var ID={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}},y4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return n.getDefaultOptions=function(){return ID},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return yA},n}(ro);function PD(i){var n=i.chart,t=i.options,s=t.data,l=t.type,f=t.xField,d=t.yField,m=t.colorField,x=t.sizeField,T=t.sizeRatio,P=t.shape,D=t.color,B=t.tooltip,U=t.heatmapStyle,Y=t.meta;n.data(s);var se="polygon";l==="density"&&(se="heatmap");var xe=op(B,[f,d,m]),Ee=xe.fields,rt=xe.formatter,vt=1;return(T||T===0)&&(!P&&!x?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):T<0||T>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):vt=T),Cf(mn({},i,{options:{type:se,colorField:m,tooltipFields:Ee,shapeField:x||"",label:void 0,mapping:{tooltip:rt,shape:P&&(x?function(xt){var Bt=s.map(function(gn){return gn[x]}),_r=(Y==null?void 0:Y[x])||{},Or=_r.min,Wr=_r.max;return Or=(0,E.hj)(Or)?Or:Math.min.apply(Math,Bt),Wr=(0,E.hj)(Wr)?Wr:Math.max.apply(Math,Bt),[P,((0,E.U2)(xt,x)-Or)/(Wr-Or),vt]}:function(){return[P,1,vt]}),color:D||m&&n.getTheme().sequenceColors.join("-"),style:U}}})),i}function OD(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Ua(Vu((n={},n[f]=s,n[d]=l,n)))(i)}function kD(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),i}function DD(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField,f=t.sizeField,d=t.sizeLegend,m=s!==!1;return l&&n.legend(l,m?s:!1),f&&n.legend(f,d===void 0?s:d),!m&&!d&&n.legend(!1),i}function _A(i){var n=i.chart,t=i.options,s=t.label,l=t.colorField,f=t.type,d=_a(n,f==="density"?"heatmap":"polygon");if(!s)d.label(!1);else if(l){var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:Jl(x)})}return i}function LD(i){var n,t,s=i.chart,l=i.options,f=l.coordinate,d=l.reflect,m=mn({actions:[]},f!=null?f:{type:"rect"});return d&&((t=(n=m.actions)===null||n===void 0?void 0:n.push)===null||t===void 0||t.call(n,["reflect",d])),s.coordinate(m),i}function FD(i){return Ua(Go,ap("heatmapStyle"),OD,LD,PD,kD,DD,Dl,_A,Eu(),cu,ps,Hg)(i)}var BD=mn({},ro.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});mi("polygon","circle",{draw:function(i,n){var t,s,l=i.x,f=i.y,d=this.parsePoints(i.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),T=Math.min(m,x)/2,P=Number(i.shape[1]),D=Number(i.shape[2]),B=Math.sqrt(D),U=T*B*Math.sqrt(P),Y=((t=i.style)===null||t===void 0?void 0:t.fill)||i.color||((s=i.defaultStyle)===null||s===void 0?void 0:s.fill),se=n.addShape("circle",{attrs:(0,M.pi)((0,M.pi)((0,M.pi)({x:l,y:f,r:U},i.defaultStyle),i.style),{fill:Y})});return se}}),mi("polygon","square",{draw:function(i,n){var t,s,l=i.x,f=i.y,d=this.parsePoints(i.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),T=Math.min(m,x),P=Number(i.shape[1]),D=Number(i.shape[2]),B=Math.sqrt(D),U=T*B*Math.sqrt(P),Y=((t=i.style)===null||t===void 0?void 0:t.fill)||i.color||((s=i.defaultStyle)===null||s===void 0?void 0:s.fill),se=n.addShape("rect",{attrs:(0,M.pi)((0,M.pi)((0,M.pi)({x:l-U/2,y:f-U/2,width:U,height:U},i.defaultStyle),i.style),{fill:Y})});return se}});var _4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t}return n.getDefaultOptions=function(){return BD},n.prototype.getSchemaAdaptor=function(){return FD},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(ro),ND="liquid";function xA(i){return[{percent:i,type:ND}]}function zD(i){var n=i.chart,t=i.options,s=t.percent,l=t.liquidStyle,f=t.radius,d=t.outline,m=t.wave,x=t.shape,T=t.shapeStyle,P=t.animation;n.scale({percent:{min:0,max:1}}),n.data(xA(s));var D=t.color||n.getTheme().defaultColor,B=mn({},i,{options:{xField:"type",yField:"percent",widthRatio:f,interval:{color:D,style:l,shape:"liquid-fill-gauge"}}}),U=mc(B).ext,Y=U.geometry,se=n.getTheme().background,xe={percent:s,radius:f,outline:d,wave:m,shape:x,shapeStyle:T,background:se,animation:P};return Y.customInfo(xe),n.legend(!1),n.axis(!1),n.tooltip(!1),i}function bA(i,n){var t=i.chart,s=i.options,l=s.statistic,f=s.percent,d=s.meta;t.getController("annotation").clear(!0);var m=(0,E.U2)(d,["percent","formatter"])||function(T){return"".concat((T*100).toFixed(2),"%")},x=l.content;return x&&(x=mn({},x,{content:(0,E.UM)(x.content)?m(f):x.content})),j_(t,{statistic:(0,M.pi)((0,M.pi)({},l),{content:x}),plotType:"liquid"},{percent:f}),n&&t.render(!0),i}function SA(i){return Ua(Go,ap("liquidStyle"),zD,bA,Vu({}),ps,cu)(i)}var UD={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},EA=5e3;function wA(i,n,t){return i+(n-i)*t}function CA(i){var n=(0,M.pi)({opacity:1},i.style);return i.color&&!n.fill&&(n.fill=i.color),n}function ZD(i){var n={fill:"#fff",fillOpacity:0,lineWidth:4},t=(0,E.CD)({},n,i.style);return i.color&&!t.stroke&&(t.stroke=i.color),(0,E.hj)(i.opacity)&&(t.opacity=t.strokeOpacity=i.opacity),t}function VD(i,n,t,s){return n===0?[[i+1/2*t/Math.PI/2,s/2],[i+1/2*t/Math.PI,s],[i+t/4,s]]:n===1?[[i+1/2*t/Math.PI/2*(Math.PI-2),s],[i+1/2*t/Math.PI/2*(Math.PI-1),s/2],[i+t/4,0]]:n===2?[[i+1/2*t/Math.PI/2,-s/2],[i+1/2*t/Math.PI,-s],[i+t/4,-s]]:[[i+1/2*t/Math.PI/2*(Math.PI-2),-s],[i+1/2*t/Math.PI/2*(Math.PI-1),-s/2],[i+t/4,0]]}function HD(i,n,t,s,l,f,d){for(var m=Math.ceil(2*i/t*4)*4,x=[],T=s;T<-Math.PI*2;)T+=Math.PI*2;for(;T>0;)T-=Math.PI*2;T=T/Math.PI/2*t;var P=f-i+T-i*2;x.push(["M",P,n]);for(var D=0,B=0;B<m;++B){var U=B%4,Y=VD(B*t/4,U,t,l);x.push(["C",Y[0][0]+P,-Y[0][1]+n,Y[1][0]+P,-Y[1][1]+n,Y[2][0]+P,-Y[2][1]+n]),B===m-1&&(D=Y[2][0])}return x.push(["L",D+P,d+i]),x.push(["L",P,d+i]),x.push(["Z"]),x}function jD(i,n,t,s,l,f,d,m,x,T){for(var P=l.fill,D=l.opacity,B=d.getBBox(),U=B.maxX-B.minX,Y=B.maxY-B.minY,se=0;se<s;se++){var xe=s<=1?1:se/(s-1),Ee=f.addShape("path",{name:"waterwave-path",attrs:{path:HD(m,B.minY+Y*t,x,0,U/32,i,n),fill:P,opacity:wA(.2,.9,xe)*D}});try{if(T===!1)return;var rt=qb([["t",x,0]]);Ee.stopAnimate(),Ee.animate({matrix:rt},{duration:wA(.5*EA,EA,xe),repeat:!0})}catch(vt){console.warn("off-screen group animate error!")}}}function WD(i,n,t,s){var l=t*2/3,f=Math.max(l,s),d=l/2,m=i,x=d+n-f/2,T=Math.asin(d/((f-d)*.85)),P=Math.sin(T)*d,D=Math.cos(T)*d,B=m-D,U=x+P,Y=i,se=x+d/Math.sin(T);return`
      M `.concat(B," ").concat(U,`
      A `).concat(d," ").concat(d," 0 1 1 ").concat(B+D*2," ").concat(U,`
      Q `).concat(Y," ").concat(se," ").concat(i," ").concat(n+f/2,`
      Q `).concat(Y," ").concat(se," ").concat(B," ").concat(U,`
      Z 
    `)}function GD(i,n,t,s){var l=t/2,f=s/2;return`
      M `.concat(i," ").concat(n-f,` 
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(f*2,`
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(-f*2,`
      Z
    `)}function TA(i,n,t,s){var l=s/2,f=t/2;return`
      M `.concat(i," ").concat(n-l,`
      L `).concat(i+f," ").concat(n,`
      L `).concat(i," ").concat(n+l,`
      L `).concat(i-f," ").concat(n,`
      Z
    `)}function $D(i,n,t,s){var l=s/2,f=t/2;return`
      M `.concat(i," ").concat(n-l,`
      L `).concat(i+f," ").concat(n+l,`
      L `).concat(i-f," ").concat(n+l,`
      Z
    `)}function XD(i,n,t,s){var l=.618,f=s/2,d=t/2*l;return`
      M `.concat(i-d," ").concat(n-f,`
      L `).concat(i+d," ").concat(n-f,`
      L `).concat(i+d," ").concat(n+f,`
      L `).concat(i-d," ").concat(n+f,`
      Z
    `)}var AA={pin:WD,circle:GD,diamond:TA,triangle:$D,rect:XD};mi("interval","liquid-fill-gauge",{draw:function(i,n){var t=.5,s=.5,l=i.customInfo,f=l,d=f.percent,m=f.radius,x=f.shape,T=f.shapeStyle,P=f.background,D=f.animation,B=l.outline,U=l.wave,Y=B.border,se=B.distance,xe=U.count,Ee=U.length,rt=(0,E.u4)(i.points,function(ia,qa){return Math.min(ia,qa.x)},1/0),vt=this.parsePoint({x:t,y:s}),xt=this.parsePoint({x:rt,y:s}),Bt=vt.x-xt.x,_r=Math.min(Bt,xt.y*m),Or=CA(i),Wr=ZD((0,E.CD)({},i,B)),gn=_r-Y/2,$r=typeof x=="function"?x:AA[x]||AA.circle,zn=$r(vt.x,vt.y,gn*2,gn*2);if(T&&n.addShape("path",{name:"shape",attrs:(0,M.pi)({path:zn},T)}),d>0){var li=n.addGroup({name:"waves"}),zi=li.setClip({type:"path",attrs:{path:zn}});jD(vt.x,vt.y,1-i.points[1].y,xe,Or,li,zi,_r*2,Ee,D)}return n.addShape("path",{name:"distance",attrs:{path:zn,fill:"transparent",lineWidth:Y+se*2,stroke:P==="transparent"?"#fff":P}}),n.addShape("path",{name:"wrap",attrs:(0,E.CD)(Wr,{path:zn,fill:"transparent",lineWidth:Y})}),n}});var x4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="liquid",t}return n.getDefaultOptions=function(){return UD},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ya.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(xA(t)),bA({chart:this.chart,options:this.options},!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ya.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getSchemaAdaptor=function(){return SA},n}(ro);function YD(i){var n=i.chart,t=i.options,s=t.data,l=t.lineStyle,f=t.color,d=t.point,m=t.area;n.data(s);var x=mn({},i,{options:{line:{style:l,color:f},point:d&&(0,M.pi)({color:f},d),area:m&&(0,M.pi)({color:f},m),label:void 0}}),T=mn({},x,{options:{tooltip:!1}}),P=(d==null?void 0:d.state)||t.state,D=mn({},x,{options:{tooltip:!1,state:P}});return Jm(x),Ih(D),K_(T),i}function KD(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Ua(Vu((n={},n[f]=s,n[d]=l,n)))(i)}function qD(i){var n=i.chart,t=i.options,s=t.radius,l=t.startAngle,f=t.endAngle;return n.coordinate("polar",{radius:s,startAngle:l,endAngle:f}),i}function QD(i){var n=i.chart,t=i.options,s=t.xField,l=t.xAxis,f=t.yField,d=t.yAxis;return n.axis(s,l),n.axis(f,d),i}function MA(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=_a(n,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:Jl(m)})}return i}function RA(i){return Ua(YD,KD,Go,qD,QD,Vg,Dl,MA,cu,ps,Eu())(i)}var IA=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),n.prototype.getTooltipItems=function(t){var s=this.getTooltipCfg(),l=s.shared,f=s.title,d=i.prototype.getTooltipItems.call(this,t);if(d.length>0){var m=this.view.geometries[0],x=m.dataArray,T=d[0].name,P=[];return x.forEach(function(D){D.forEach(function(B){var U=Ql.getTooltipItems(B,m),Y=U[0];if(!l&&Y&&Y.name===T){var se=(0,E.UM)(f)?T:f;P.push((0,M.pi)((0,M.pi)({},Y),{name:Y.title,title:se}))}else if(l&&Y){var se=(0,E.UM)(f)?Y.name||T:f;P.push((0,M.pi)((0,M.pi)({},Y),{name:Y.title,title:se}))}})}),P}return[]},n}(yt);ep("radar-tooltip",IA);var u0=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.init=function(){var t=this.context.view;t.removeInteraction("tooltip")},n.prototype.show=function(){var t=this.context.event,s=this.getTooltipController();s.showTooltip({x:t.x,y:t.y})},n.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},n.prototype.getTooltipController=function(){var t=this.context.view;return t.getController("radar-tooltip")},n}(In);Kr("radar-tooltip",u0),Nn("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var JD=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radar",t}return n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return mn({},i.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},n.prototype.getSchemaAdaptor=function(){return RA},n}(ro);function eL(i,n,t){var s=t.map(function(d){return d[n]}).filter(function(d){return d!==void 0}),l=s.length>0?Math.max.apply(Math,s):0,f=Math.abs(i)%360;return f?l*360/f:l}function tL(i,n,t){var s=[];return i.forEach(function(l){var f=s.find(function(d){return d[n]===l[n]});f?f[t]+=l[t]||null:s.push((0,M.pi)({},l))}),s}function rL(i){var n=i.chart,t=i.options,s=t.barStyle,l=t.color,f=t.tooltip,d=t.colorField,m=t.type,x=t.xField,T=t.yField,P=t.data,D=t.shape,B=fv(P,T);n.data(B);var U=mn({},i,{options:{tooltip:f,seriesField:d,interval:{style:s,color:l,shape:D||(m==="line"?"line":"intervel")},minColumnWidth:t.minBarWidth,maxColumnWidth:t.maxBarWidth,columnBackground:t.barBackground}});return mc(U),m==="line"&&Ih({chart:n,options:{xField:x,yField:T,seriesField:d,point:{shape:"circle",color:l}}}),i}function PA(i){var n,t=i.options,s=t.yField,l=t.xField,f=t.data,d=t.isStack,m=t.isGroup,x=t.colorField,T=t.maxAngle,P=d&&!m&&x?tL(f,l,s):f,D=fv(P,s);return Ua(Vu((n={},n[s]={min:0,max:eL(T,s,D)},n)))(i)}function Cy(i){var n=i.chart,t=i.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}).transpose(),i}function Ty(i){var n=i.chart,t=i.options,s=t.xField,l=t.xAxis;return n.axis(s,l),i}function Ay(i){var n=i.chart,t=i.options,s=t.label,l=t.yField,f=_a(n,"interval");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)((0,M.pi)({},Jl(m)),{type:"polar"})})}return i}function My(i){return Ua(ap("barStyle"),rL,PA,Ty,Cy,cu,ps,Go,Dl,Vg,Eu(),Ay)(i)}var nL=mn({},ro.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240}),iL=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radial-bar",t}return n.getDefaultOptions=function(){return nL},n.prototype.changeData=function(t){this.updateOption({data:t}),PA({chart:this.chart,options:this.options}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return My},n}(ro);function OS(i){var n=i.chart,t=i.options,s=t.data,l=t.sectorStyle,f=t.shape,d=t.color;return n.data(s),Ua(mc)(mn({},i,{options:{marginRatio:1,interval:{style:l,color:d,shape:f}}})),i}function aL(i){var n=i.chart,t=i.options,s=t.label,l=t.xField,f=_a(n,"interval");if(s===!1)f.label(!1);else if((0,E.Kn)(s)){var d=s.callback,m=s.fields,x=(0,M._T)(s,["callback","fields"]),T=x.offset,P=x.layout;(T===void 0||T>=0)&&(P=P?(0,E.kJ)(P)?P:[P]:[],x.layout=(0,E.hX)(P,function(D){return D.type!=="limit-in-shape"}),x.layout.length||delete x.layout),f.label({fields:m||[l],callback:d,cfg:Jl(x)})}else Jv(Rh.WARN,s===null,"the label option must be an Object."),f.label({fields:[l]});return i}function oL(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField;return s===!1?n.legend(!1):l&&n.legend(l,s),i}function OA(i){var n=i.chart,t=i.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),i}function sL(i){var n,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Ua(Vu((n={},n[f]=s,n[d]=l,n)))(i)}function b4(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s?n.axis(f,s):n.axis(f,!1),l?n.axis(d,l):n.axis(d,!1),i}function C1(i){Ua(ap("sectorStyle"),OS,sL,aL,OA,b4,oL,Dl,cu,ps,Go,Eu(),Hg)(i)}var Ry=mn({},ro.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),uL=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rose",t}return n.getDefaultOptions=function(){return Ry},n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return C1},n}(ro),kA="x",DA="y",kS="name",DS="nodes",T1="edges";function A1(i,n,t){var s=[];return i.forEach(function(l){var f=l[n],d=l[t];s.includes(f)||s.push(f),s.includes(d)||s.push(d)}),s}function LA(i,n,t,s){var l={};return n.forEach(function(f){l[f]={},n.forEach(function(d){l[f][d]=0})}),i.forEach(function(f){l[f[t]][f[s]]=1}),l}function lL(i,n,t){if(!(0,E.kJ)(i))return[];var s=[],l=A1(i,n,t),f=LA(i,l,n,t),d={};l.forEach(function(x){d[x]=0});function m(x){d[x]=1,l.forEach(function(T){if(f[x][T]!=0)if(d[T]==1)s.push("".concat(x,"_").concat(T));else{if(d[T]==-1)return;m(T)}}),d[x]=-1}return l.forEach(function(x){d[x]!=-1&&m(x)}),s.length!==0&&console.warn("sankey data contains circle, ".concat(s.length," records removed."),s),i.filter(function(x){return s.findIndex(function(T){return T==="".concat(x[n],"_").concat(x[t])})<0})}function cL(i){return i.target.depth}function FA(i){return i.depth}function S4(i,n){return n-1-i.height}function M1(i,n){return i.sourceLinks.length?i.depth:n-1}function kh(i){return i.targetLinks.length?i.depth:i.sourceLinks.length?(0,E.F)(i.sourceLinks,cL)-1:0}function Iy(i){return function(){return i}}function R1(i,n){for(var t=0,s=0;s<i.length;s++)t+=n(i[s]);return t}function Py(i,n){for(var t=-1/0,s=0;s<i.length;s++)t=Math.max(n(i[s]),t);return t}function fL(i,n){for(var t=1/0,s=0;s<i.length;s++)t=Math.min(n(i[s]),t);return t}function BA(i,n){return I1(i.source,n.source)||i.index-n.index}function NA(i,n){return I1(i.target,n.target)||i.index-n.index}function I1(i,n){return i.y0-n.y0}function LS(i){return i.value}function zA(i){return i.index}function UA(i){return i.nodes}function hL(i){return i.links}function FS(i,n){var t=i.get(n);if(!t)throw new Error("missing: "+n);return t}function BS(i){for(var n=i.nodes,t=0,s=n;t<s.length;t++){for(var l=s[t],f=l.y0,d=f,m=0,x=l.sourceLinks;m<x.length;m++){var T=x[m];T.y0=f+T.width/2,f+=T.width}for(var P=0,D=l.targetLinks;P<D.length;P++){var T=D[P];T.y1=d+T.width/2,d+=T.width}}}function pL(){var i=0,n=0,t=1,s=1,l=24,f=8,d,m=zA,x=M1,T,P,D,B=UA,U=hL,Y=6;function se(Hn){var Di={nodes:B(Hn),links:U(Hn)};return xe(Di),Ee(Di),rt(Di),vt(Di),_r(Di),BS(Di),Di}se.update=function(Hn){return BS(Hn),Hn},se.nodeId=function(Hn){return arguments.length?(m=typeof Hn=="function"?Hn:Iy(Hn),se):m},se.nodeAlign=function(Hn){return arguments.length?(x=typeof Hn=="function"?Hn:Iy(Hn),se):x},se.nodeDepth=function(Hn){return arguments.length?(T=Hn,se):T},se.nodeSort=function(Hn){return arguments.length?(P=Hn,se):P},se.nodeWidth=function(Hn){return arguments.length?(l=+Hn,se):l},se.nodePadding=function(Hn){return arguments.length?(f=d=+Hn,se):f},se.nodes=function(Hn){return arguments.length?(B=typeof Hn=="function"?Hn:Iy(Hn),se):B},se.links=function(Hn){return arguments.length?(U=typeof Hn=="function"?Hn:Iy(Hn),se):U},se.linkSort=function(Hn){return arguments.length?(D=Hn,se):D},se.size=function(Hn){return arguments.length?(i=n=0,t=+Hn[0],s=+Hn[1],se):[t-i,s-n]},se.extent=function(Hn){return arguments.length?(i=+Hn[0][0],t=+Hn[1][0],n=+Hn[0][1],s=+Hn[1][1],se):[[i,n],[t,s]]},se.iterations=function(Hn){return arguments.length?(Y=+Hn,se):Y};function xe(Hn){var Di=Hn.nodes,Zi=Hn.links;Di.forEach(function(Eo,Qo){Eo.index=Qo,Eo.sourceLinks=[],Eo.targetLinks=[]});var yi=new Map(Di.map(function(Eo){return[m(Eo),Eo]}));if(Zi.forEach(function(Eo,Qo){Eo.index=Qo;var al=Eo.source,_l=Eo.target;typeof al!="object"&&(al=Eo.source=FS(yi,al)),typeof _l!="object"&&(_l=Eo.target=FS(yi,_l)),al.sourceLinks.push(Eo),_l.targetLinks.push(Eo)}),D!=null)for(var Vi=0,Pa=Di;Vi<Pa.length;Vi++){var so=Pa[Vi],Mo=so.sourceLinks,no=so.targetLinks;Mo.sort(D),no.sort(D)}}function Ee(Hn){for(var Di=Hn.nodes,Zi=0,yi=Di;Zi<yi.length;Zi++){var Vi=yi[Zi];Vi.value=Vi.fixedValue===void 0?Math.max(R1(Vi.sourceLinks,LS),R1(Vi.targetLinks,LS)):Vi.fixedValue}}function rt(Hn){for(var Di=Hn.nodes,Zi=Di.length,yi=new Set(Di),Vi=new Set,Pa=0;yi.size;){if(yi.forEach(function(Eo){Eo.depth=Pa;for(var Qo=0,al=Eo.sourceLinks;Qo<al.length;Qo++){var _l=al[Qo].target;Vi.add(_l)}}),++Pa>Zi)throw new Error("circular link");yi=Vi,Vi=new Set}if(T)for(var so=Math.max(Py(Di,function(Eo){return Eo.depth})+1,0),Mo=void 0,no=0;no<Di.length;no++)Mo=Di[no],Mo.depth=T.call(null,Mo,so)}function vt(Hn){for(var Di=Hn.nodes,Zi=Di.length,yi=new Set(Di),Vi=new Set,Pa=0;yi.size;){if(yi.forEach(function(so){so.height=Pa;for(var Mo=0,no=so.targetLinks;Mo<no.length;Mo++){var Eo=no[Mo].source;Vi.add(Eo)}}),++Pa>Zi)throw new Error("circular link");yi=Vi,Vi=new Set}}function xt(Hn){for(var Di=Hn.nodes,Zi=Math.max(Py(Di,function(_l){return _l.depth})+1,0),yi=(t-i-l)/(Zi-1),Vi=new Array(Zi).fill(0).map(function(){return[]}),Pa=0,so=Di;Pa<so.length;Pa++){var Mo=so[Pa],no=Math.max(0,Math.min(Zi-1,Math.floor(x.call(null,Mo,Zi))));Mo.layer=no,Mo.x0=i+no*yi,Mo.x1=Mo.x0+l,Vi[no]?Vi[no].push(Mo):Vi[no]=[Mo]}if(P)for(var Eo=0,Qo=Vi;Eo<Qo.length;Eo++){var al=Qo[Eo];al.sort(P)}return Vi}function Bt(Hn){for(var Di=fL(Hn,function(Fd){return(s-n-(Fd.length-1)*d)/R1(Fd,LS)}),Zi=0,yi=Hn;Zi<yi.length;Zi++){for(var Vi=yi[Zi],Pa=n,so=0,Mo=Vi;so<Mo.length;so++){var no=Mo[so];no.y0=Pa,no.y1=Pa+no.value*Di,Pa=no.y1+d;for(var Eo=0,Qo=no.sourceLinks;Eo<Qo.length;Eo++){var al=Qo[Eo];al.width=al.value*Di}}Pa=(s-Pa+d)/(Vi.length+1);for(var _l=0;_l<Vi.length;++_l){var no=Vi[_l];no.y0+=Pa*(_l+1),no.y1+=Pa*(_l+1)}zi(Vi)}}function _r(Hn){var Di=xt(Hn);d=Math.min(f,(s-n)/(Py(Di,function(Pa){return Pa.length})-1)),Bt(Di);for(var Zi=0;Zi<Y;++Zi){var yi=Math.pow(.99,Zi),Vi=Math.max(1-yi,(Zi+1)/Y);Wr(Di,yi,Vi),Or(Di,yi,Vi)}}function Or(Hn,Di,Zi){for(var yi=1,Vi=Hn.length;yi<Vi;++yi){for(var Pa=Hn[yi],so=0,Mo=Pa;so<Mo.length;so++){for(var no=Mo[so],Eo=0,Qo=0,al=0,_l=no.targetLinks;al<_l.length;al++){var Fd=_l[al],am=Fd.source,Vc=Fd.value,p0=Vc*(no.layer-am.layer);Eo+=ia(am,no)*p0,Qo+=p0}if(Qo>0){var d0=(Eo/Qo-no.y0)*Di;no.y0+=d0,no.y1+=d0,li(no)}}P===void 0&&Pa.sort(I1),Pa.length&&gn(Pa,Zi)}}function Wr(Hn,Di,Zi){for(var yi=Hn.length,Vi=yi-2;Vi>=0;--Vi){for(var Pa=Hn[Vi],so=0,Mo=Pa;so<Mo.length;so++){for(var no=Mo[so],Eo=0,Qo=0,al=0,_l=no.sourceLinks;al<_l.length;al++){var Fd=_l[al],am=Fd.target,Vc=Fd.value,p0=Vc*(am.layer-no.layer);Eo+=qa(no,am)*p0,Qo+=p0}if(Qo>0){var d0=(Eo/Qo-no.y0)*Di;no.y0+=d0,no.y1+=d0,li(no)}}P===void 0&&Pa.sort(I1),Pa.length&&gn(Pa,Zi)}}function gn(Hn,Di){var Zi=Hn.length>>1,yi=Hn[Zi];zn(Hn,yi.y0-d,Zi-1,Di),$r(Hn,yi.y1+d,Zi+1,Di),zn(Hn,s,Hn.length-1,Di),$r(Hn,n,0,Di)}function $r(Hn,Di,Zi,yi){for(;Zi<Hn.length;++Zi){var Vi=Hn[Zi],Pa=(Di-Vi.y0)*yi;Pa>1e-6&&(Vi.y0+=Pa,Vi.y1+=Pa),Di=Vi.y1+d}}function zn(Hn,Di,Zi,yi){for(;Zi>=0;--Zi){var Vi=Hn[Zi],Pa=(Vi.y1-Di)*yi;Pa>1e-6&&(Vi.y0-=Pa,Vi.y1-=Pa),Di=Vi.y0-d}}function li(Hn){var Di=Hn.sourceLinks,Zi=Hn.targetLinks;if(D===void 0){for(var yi=0,Vi=Zi;yi<Vi.length;yi++){var Pa=Vi[yi].source.sourceLinks;Pa.sort(NA)}for(var so=0,Mo=Di;so<Mo.length;so++){var no=Mo[so].target.targetLinks;no.sort(BA)}}}function zi(Hn){if(D===void 0)for(var Di=0,Zi=Hn;Di<Zi.length;Di++){var yi=Zi[Di],Vi=yi.sourceLinks,Pa=yi.targetLinks;Vi.sort(NA),Pa.sort(BA)}}function ia(Hn,Di){for(var Zi=Hn.y0-(Hn.sourceLinks.length-1)*d/2,yi=0,Vi=Hn.sourceLinks;yi<Vi.length;yi++){var Pa=Vi[yi],so=Pa.target,Mo=Pa.width;if(so===Di)break;Zi+=Mo+d}for(var no=0,Eo=Di.targetLinks;no<Eo.length;no++){var Qo=Eo[no],so=Qo.source,Mo=Qo.width;if(so===Hn)break;Zi-=Mo}return Zi}function qa(Hn,Di){for(var Zi=Di.y0-(Di.targetLinks.length-1)*d/2,yi=0,Vi=Di.targetLinks;yi<Vi.length;yi++){var Pa=Vi[yi],so=Pa.source,Mo=Pa.width;if(so===Hn)break;Zi+=Mo+d}for(var no=0,Eo=Hn.sourceLinks;no<Eo.length;no++){var Qo=Eo[no],so=Qo.target,Mo=Qo.width;if(so===Di)break;Zi-=Mo}return Zi}return se}var dL={left:FA,right:S4,center:kh,justify:M1},vL={nodeId:function(i){return i.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function gL(i){var n=(0,E.HD)(i)?dL[i]:(0,E.mf)(i)?i:null;return n||M1}function mL(i){return(0,E.f0)({},vL,i)}function yL(i,n){var t=mL(i),s=t.nodeId,l=t.nodeSort,f=t.nodeAlign,d=t.nodeWidth,m=t.nodePadding,x=t.nodeDepth,T=pL().nodeSort(l).nodeWidth(d).nodePadding(m).nodeDepth(x).nodeAlign(gL(f)).extent([[0,0],[1,1]]).nodeId(s),P=T(n),D=P.nodes.map(function(U){var Y=U.x0,se=U.x1,xe=U.y0,Ee=U.y1;return U.x=[Y,se,se,Y],U.y=[xe,xe,Ee,Ee],U}).filter(function(U){return U.name!==null}),B=P.links.map(function(U){var Y=U.source,se=U.target,xe=Y.x1,Ee=se.x0;U.x=[xe,xe,Ee,Ee];var rt=U.width/2;return U.y=[U.y0+rt,U.y0-rt,U.y1+rt,U.y1-rt],U}).filter(function(U){var Y=U.source,se=U.target;return Y.name!==null&&se.name!==null});return{nodes:D,links:B}}function Oy(i){return i==="node-link"}function ky(i,n,t){return Gp(i)?i/t:n}function _L(i,n,t){return Gp(i)?i/t:n}function ZA(i,n,t){var s=i.dataType,l=i.data,f=i.sourceField,d=i.targetField,m=i.weightField,x=i.nodeAlign,T=i.nodeSort,P=i.nodePadding,D=i.nodePaddingRatio,B=i.nodeWidth,U=i.nodeWidthRatio,Y=i.nodeDepth,se=i.rawFields,xe=se===void 0?[]:se,Ee;Oy(s)?Ee=l:Ee=BP(lL(l,f,d),f,d,m,xe);var rt=yL({nodeAlign:x,nodePadding:_L(P,D,t),nodeWidth:ky(B,U,n),nodeSort:T,nodeDepth:Y},Ee),vt=rt.nodes,xt=rt.links;return{nodes:vt.map(function(Bt){return(0,M.pi)((0,M.pi)({},ls(Bt,(0,M.ev)(["x","y","name"],xe,!0))),{isNode:!0})}),edges:xt.map(function(Bt){return(0,M.pi)((0,M.pi)({source:Bt.source.name,target:Bt.target.name,name:Bt.source.name||Bt.target.name},ls(Bt,(0,M.ev)(["x","y","value"],xe,!0))),{isNode:!1})})}}function xL(i){var n=i.options,t=n.rawFields,s=t===void 0?[]:t;return mn({},{options:{tooltip:{fields:(0,E.jj)((0,M.ev)(["name","source","target","value","isNode"],s,!0))},label:{fields:(0,E.jj)((0,M.ev)(["x","name"],s,!0))}}},i)}function bL(i){var n=i.chart,t=i.options,s=t.color,l=t.nodeStyle,f=t.edgeStyle,d=t.label,m=t.tooltip,x=t.nodeState,T=t.edgeState,P=t.rawFields,D=P===void 0?[]:P;n.legend(!1),n.tooltip(m),n.axis(!1),n.coordinate().reflect("y");var B=ZA(t,n.width,n.height),U=B.nodes,Y=B.edges,se=n.createView({id:T1});se.data(Y),xC({chart:se,options:{xField:kA,yField:DA,seriesField:kS,rawFields:(0,M.ev)(["source","target"],D,!0),edge:{color:s,style:f,shape:"arc"},tooltip:m,state:T}});var xe=n.createView({id:DS});return xe.data(U),q_({chart:xe,options:{xField:kA,yField:DA,seriesField:kS,polygon:{color:s,style:l},label:d,tooltip:m,state:x}}),n.interaction("element-active"),n.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),i}function SL(i){var n=i.chart,t=i.options,s=t.animation,l=(0,M.ev)((0,M.ev)([],n.views[0].geometries,!0),n.views[1].geometries,!0);return cy(n,s,l),i}function em(i){var n=i.chart,t=i.options,s=t.nodeDraggable,l="sankey-node-draggable";return s?n.interaction(l):n.removeInteraction(l),i}function EL(i){var n=i.chart,t=i.options,s=t.interactions,l=s===void 0?[]:s,f=[].concat(l,t.nodeInteractions||[]),d=[].concat(l,t.edgeInteractions||[]),m=So(n,DS),x=So(n,T1);return f.forEach(function(T){(T==null?void 0:T.enable)===!1?m.removeInteraction(T.type):m.interaction(T.type,T.cfg||{})}),d.forEach(function(T){(T==null?void 0:T.enable)===!1?x.removeInteraction(T.type):x.interaction(T.type,T.cfg||{})}),i}function wL(i){return Ua(xL,bL,EL,em,SL,Go)(i)}var CL=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.isDragging=!1,t}return n.prototype.isNodeElement=function(){var t=(0,E.U2)(this.context,"event.target");if(t){var s=t.get("element");return s&&s.getModel().data.isNode}return!1},n.prototype.getNodeView=function(){return So(this.context.view,DS)},n.prototype.getEdgeView=function(){return So(this.context.view,T1)},n.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},n.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,E.U2)(this.context,"event.x"),y:(0,E.U2)(this.context,"event.y")};var t=this.context.event.target.get("element"),s=this.getCurrentDatumIdx(t);if(s===-1)return;this.currentElementIdx=s,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},n.prototype.translate=function(){if(this.isDragging){var t=this.context.view,s={x:(0,E.U2)(this.context,"event.x"),y:(0,E.U2)(this.context,"event.y")},l=s.x-this.prevPoint.x,f=s.y-this.prevPoint.y,d=this.getNodeView(),m=d.geometries[0].elements[this.currentElementIdx];if(m&&m.getModel()){var x=m.getModel().data,T=d.getOptions().data,P=d.getCoordinate(),D={x:l/P.getWidth(),y:f/P.getHeight()},B=(0,M.pi)((0,M.pi)({},x),{x:x.x.map(function(Ee){return Ee+=D.x}),y:x.y.map(function(Ee){return Ee+=D.y})}),U=(0,M.ev)([],T,!0);U[this.currentElementIdx]=B,d.data(U);var Y=x.name,se=this.getEdgeView(),xe=se.getOptions().data;xe.forEach(function(Ee){Ee.source===Y&&(Ee.x[0]+=D.x,Ee.x[1]+=D.x,Ee.y[0]+=D.y,Ee.y[1]+=D.y),Ee.target===Y&&(Ee.x[2]+=D.x,Ee.x[3]+=D.x,Ee.y[2]+=D.y,Ee.y[3]+=D.y)}),se.data(xe),this.prevPoint=s,t.render(!0)}}},n.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},n}(In);Kr("sankey-node-drag",CL),Nn("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(i){return i.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});var E4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="sankey",t}return n.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){var s=t.name;return s},callback:function(t){var s=t[1]===1;return{style:{fill:"#545454",textAlign:s?"end":"start"},offsetX:s?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!(0,E.U2)(t,[0,"data","isNode"])},formatter:function(t){var s=t.source,l=t.target,f=t.value;return{name:s+" -> "+l,value:f}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},n.prototype.changeData=function(t){this.updateOption({data:t});var s=ZA(this.options,this.chart.width,this.chart.height),l=s.nodes,f=s.edges,d=So(this.chart,DS),m=So(this.chart,T1);d.changeData(l),m.changeData(f)},n.prototype.getSchemaAdaptor=function(){return wL},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(ro),NS="ancestor-node",VA="value",Dy="path",TL=[Dy,CS,TS,Ey,"name","depth","height"],AL=mn({},ro.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}});function HA(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function Ly(i,n,t,s,l){for(var f=i.children,d,m=-1,x=f.length,T=i.value&&(s-n)/i.value;++m<x;)d=f[m],d.y0=t,d.y1=l,d.x0=n,d.x1=n+=d.value*T}function jA(){var i=1,n=1,t=0,s=!1;function l(d){var m=d.height+1;return d.x0=d.y0=t,d.x1=i,d.y1=n/m,d.eachBefore(f(n,m)),s&&d.eachBefore(HA),d}function f(d,m){return function(x){x.children&&Ly(x,x.x0,d*(x.depth+1)/m,x.x1,d*(x.depth+2)/m);var T=x.x0,P=x.y0,D=x.x1-t,B=x.y1-t;D<T&&(T=D=(T+D)/2),B<P&&(P=B=(P+B)/2),x.x0=T,x.y0=P,x.x1=D,x.y1=B}}return l.round=function(d){return arguments.length?(s=!!d,l):s},l.size=function(d){return arguments.length?(i=+d[0],n=+d[1],l):[i,n]},l.padding=function(d){return arguments.length?(t=+d,l):t},l}var ML={field:"value",size:[1,1],round:!1,padding:0,sort:function(i,n){return n.value-i.value},as:["x","y"],ignoreParentValue:!0};function RL(i,n){n=(0,E.f0)({},ML,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=og(n)}catch(x){console.warn(x)}var l=function(x){return jA().size(n.size).round(n.round).padding(n.padding)(Qg(x).sum(function(T){return(0,E.dp)(T.children)?n.ignoreParentValue?0:T[s]-(0,E.u4)(T.children,function(P,D){return P+D[s]},0):T[s]}).sort(n.sort))},f=l(i),d=t[0],m=t[1];return f.each(function(x){var T,P;x[d]=[x.x0,x.x1,x.x1,x.x0],x[m]=[x.y1,x.y1,x.y0,x.y0],x.name=x.name||((T=x.data)===null||T===void 0?void 0:T.name)||((P=x.data)===null||P===void 0?void 0:P.label),x.data.name=x.name,["x0","x1","y0","y1"].forEach(function(D){t.indexOf(D)===-1&&delete x[D]})}),MS(f)}function IL(i,n){return i.parent===n.parent?1:2}function PL(i){return i.reduce(OL,0)/i.length}function OL(i,n){return i+n.x}function kL(i){return 1+i.reduce(DL,0)}function DL(i,n){return Math.max(i,n.y)}function LL(i){for(var n;n=i.children;)i=n[0];return i}function FL(i){for(var n;n=i.children;)i=n[n.length-1];return i}function BL(){var i=IL,n=1,t=1,s=!1;function l(f){var d,m=0;f.eachAfter(function(B){var U=B.children;U?(B.x=PL(U),B.y=kL(U)):(B.x=d?m+=i(B,d):0,B.y=0,d=B)});var x=LL(f),T=FL(f),P=x.x-i(x,T)/2,D=T.x+i(T,x)/2;return f.eachAfter(s?function(B){B.x=(B.x-f.x)*n,B.y=(f.y-B.y)*t}:function(B){B.x=(B.x-P)/(D-P)*n,B.y=(1-(f.y?B.y/f.y:1))*t})}return l.separation=function(f){return arguments.length?(i=f,l):i},l.size=function(f){return arguments.length?(s=!1,n=+f[0],t=+f[1],l):s?null:[n,t]},l.nodeSize=function(f){return arguments.length?(s=!0,n=+f[0],t=+f[1],l):s?[n,t]:null},l}var NL={depth:-1},zS={};function zL(i){return i.id}function UL(i){return i.parentId}function ZL(){var i=zL,n=UL;function t(s){var l=Array.from(s),f=l.length,d,m,x,T,P,D,B,U=new Map;for(m=0;m<f;++m)d=l[m],P=l[m]=new lp(d),(D=i(d,m,s))!=null&&(D+="")&&(B=P.id=D,U.set(B,U.has(B)?zS:P)),(D=n(d,m,s))!=null&&(D+="")&&(P.parent=D);for(m=0;m<f;++m)if(P=l[m],D=P.parent){if(T=U.get(D),!T)throw new Error("missing: "+D);if(T===zS)throw new Error("ambiguous: "+D);T.children?T.children.push(P):T.children=[P],P.parent=T}else{if(x)throw new Error("multiple roots");x=P}if(!x)throw new Error("no root");if(x.parent=NL,x.eachBefore(function(Y){Y.depth=Y.parent.depth+1,--f}).eachBefore(uD),x.parent=null,f>0)throw new Error("cycle");return x}return t.id=function(s){return arguments.length?(i=xS(s),t):i},t.parentId=function(s){return arguments.length?(n=xS(s),t):n},t}function VL(i,n){return i.parent===n.parent?1:2}function US(i){var n=i.children;return n?n[0]:i.t}function ZS(i){var n=i.children;return n?n[n.length-1]:i.t}function HL(i,n,t){var s=t/(n.i-i.i);n.c-=s,n.s+=t,i.c+=s,n.z+=t,n.m+=t}function jL(i){for(var n=0,t=0,s=i.children,l=s.length,f;--l>=0;)f=s[l],f.z+=n,f.m+=n,n+=f.s+(t+=f.c)}function WL(i,n,t){return i.a.parent===n.parent?i.a:t}function P1(i,n){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}P1.prototype=Object.create(lp.prototype);function GL(i){for(var n=new P1(i,0),t,s=[n],l,f,d,m;t=s.pop();)if(f=t._.children)for(t.children=new Array(m=f.length),d=m-1;d>=0;--d)s.push(l=t.children[d]=new P1(f[d],d)),l.parent=t;return(n.parent=new P1(null,0)).children=[n],n}function $L(){var i=VL,n=1,t=1,s=null;function l(T){var P=GL(T);if(P.eachAfter(f),P.parent.m=-P.z,P.eachBefore(d),s)T.eachBefore(x);else{var D=T,B=T,U=T;T.eachBefore(function(rt){rt.x<D.x&&(D=rt),rt.x>B.x&&(B=rt),rt.depth>U.depth&&(U=rt)});var Y=D===B?1:i(D,B)/2,se=Y-D.x,xe=n/(B.x+Y+se),Ee=t/(U.depth||1);T.eachBefore(function(rt){rt.x=(rt.x+se)*xe,rt.y=rt.depth*Ee})}return T}function f(T){var P=T.children,D=T.parent.children,B=T.i?D[T.i-1]:null;if(P){jL(T);var U=(P[0].z+P[P.length-1].z)/2;B?(T.z=B.z+i(T._,B._),T.m=T.z-U):T.z=U}else B&&(T.z=B.z+i(T._,B._));T.parent.A=m(T,B,T.parent.A||D[0])}function d(T){T._.x=T.z+T.parent.m,T.m+=T.parent.m}function m(T,P,D){if(P){for(var B=T,U=T,Y=P,se=B.parent.children[0],xe=B.m,Ee=U.m,rt=Y.m,vt=se.m,xt;Y=ZS(Y),B=US(B),Y&&B;)se=US(se),U=ZS(U),U.a=T,xt=Y.z+rt-B.z-xe+i(Y._,B._),xt>0&&(HL(WL(Y,T,D),T,xt),xe+=xt,Ee+=xt),rt+=Y.m,xe+=B.m,vt+=se.m,Ee+=U.m;Y&&!ZS(U)&&(U.t=Y,U.m+=rt-Ee),B&&!US(se)&&(se.t=B,se.m+=xe-vt,D=T)}return D}function x(T){T.x*=n,T.y=T.depth*t}return l.separation=function(T){return arguments.length?(i=T,l):i},l.size=function(T){return arguments.length?(s=!1,n=+T[0],t=+T[1],l):s?null:[n,t]},l.nodeSize=function(T){return arguments.length?(s=!0,n=+T[0],t=+T[1],l):s?[n,t]:null},l}function O1(i,n,t,s,l){for(var f=i.children,d,m=-1,x=f.length,T=i.value&&(l-t)/i.value;++m<x;)d=f[m],d.x0=n,d.x1=s,d.y0=t,d.y1=t+=d.value*T}var WA=(1+Math.sqrt(5))/2;function GA(i,n,t,s,l,f){for(var d=[],m=n.children,x,T,P=0,D=0,B=m.length,U,Y,se=n.value,xe,Ee,rt,vt,xt,Bt,_r;P<B;){U=l-t,Y=f-s;do xe=m[D++].value;while(!xe&&D<B);for(Ee=rt=xe,Bt=Math.max(Y/U,U/Y)/(se*i),_r=xe*xe*Bt,xt=Math.max(rt/_r,_r/Ee);D<B;++D){if(xe+=T=m[D].value,T<Ee&&(Ee=T),T>rt&&(rt=T),_r=xe*xe*Bt,vt=Math.max(rt/_r,_r/Ee),vt>xt){xe-=T;break}xt=vt}d.push(x={value:xe,dice:U<Y,children:m.slice(P,D)}),x.dice?Ly(x,t,s,l,se?s+=Y*xe/se:f):O1(x,t,s,se?t+=U*xe/se:l,f),se-=xe,P=D}return d}var $A=function i(n){function t(s,l,f,d,m){GA(n,s,l,f,d,m)}return t.ratio=function(s){return i((s=+s)>1?s:1)},t}(WA);function k1(){var i=$A,n=!1,t=1,s=1,l=[0],f=Pd,d=Pd,m=Pd,x=Pd,T=Pd;function P(B){return B.x0=B.y0=0,B.x1=t,B.y1=s,B.eachBefore(D),l=[0],n&&B.eachBefore(HA),B}function D(B){var U=l[B.depth],Y=B.x0+U,se=B.y0+U,xe=B.x1-U,Ee=B.y1-U;xe<Y&&(Y=xe=(Y+xe)/2),Ee<se&&(se=Ee=(se+Ee)/2),B.x0=Y,B.y0=se,B.x1=xe,B.y1=Ee,B.children&&(U=l[B.depth+1]=f(B)/2,Y+=T(B)-U,se+=d(B)-U,xe-=m(B)-U,Ee-=x(B)-U,xe<Y&&(Y=xe=(Y+xe)/2),Ee<se&&(se=Ee=(se+Ee)/2),i(B,Y,se,xe,Ee))}return P.round=function(B){return arguments.length?(n=!!B,P):n},P.size=function(B){return arguments.length?(t=+B[0],s=+B[1],P):[t,s]},P.tile=function(B){return arguments.length?(i=xS(B),P):i},P.padding=function(B){return arguments.length?P.paddingInner(B).paddingOuter(B):P.paddingInner()},P.paddingInner=function(B){return arguments.length?(f=typeof B=="function"?B:Od(+B),P):f},P.paddingOuter=function(B){return arguments.length?P.paddingTop(B).paddingRight(B).paddingBottom(B).paddingLeft(B):P.paddingTop()},P.paddingTop=function(B){return arguments.length?(d=typeof B=="function"?B:Od(+B),P):d},P.paddingRight=function(B){return arguments.length?(m=typeof B=="function"?B:Od(+B),P):m},P.paddingBottom=function(B){return arguments.length?(x=typeof B=="function"?B:Od(+B),P):x},P.paddingLeft=function(B){return arguments.length?(T=typeof B=="function"?B:Od(+B),P):T},P}function XL(i,n,t,s,l){var f=i.children,d,m=f.length,x,T=new Array(m+1);for(T[0]=x=d=0;d<m;++d)T[d+1]=x+=f[d].value;P(0,m,i.value,n,t,s,l);function P(D,B,U,Y,se,xe,Ee){if(D>=B-1){var rt=f[D];rt.x0=Y,rt.y0=se,rt.x1=xe,rt.y1=Ee;return}for(var vt=T[D],xt=U/2+vt,Bt=D+1,_r=B-1;Bt<_r;){var Or=Bt+_r>>>1;T[Or]<xt?Bt=Or+1:_r=Or}xt-T[Bt-1]<T[Bt]-xt&&D+1<Bt&&--Bt;var Wr=T[Bt]-vt,gn=U-Wr;if(xe-Y>Ee-se){var $r=U?(Y*gn+xe*Wr)/U:xe;P(D,Bt,Wr,Y,se,$r,Ee),P(Bt,B,gn,$r,se,xe,Ee)}else{var zn=U?(se*gn+Ee*Wr)/U:Ee;P(D,Bt,Wr,Y,se,xe,zn),P(Bt,B,gn,Y,zn,xe,Ee)}}}function YL(i,n,t,s,l){(i.depth&1?O1:Ly)(i,n,t,s,l)}var KL=function i(n){function t(s,l,f,d,m){if((x=s._squarify)&&x.ratio===n)for(var x,T,P,D,B=-1,U,Y=x.length,se=s.value;++B<Y;){for(T=x[B],P=T.children,D=T.value=0,U=P.length;D<U;++D)T.value+=P[D].value;T.dice?Ly(T,l,f,d,se?f+=(m-f)*T.value/se:m):O1(T,l,f,se?l+=(d-l)*T.value/se:d,m),se-=T.value}else s._squarify=x=GA(n,s,l,f,d,m),x.ratio=n}return t.ratio=function(s){return i((s=+s)>1?s:1)},t}(WA),qL={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(i,n){return n.value-i.value},ratio:.5*(1+Math.sqrt(5))};function QL(i,n){return i==="treemapSquarify"?J[i].ratio(n):J[i]}function XA(i,n){n=(0,E.f0)({},qL,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=og(n)}catch(T){console.warn(T)}var l=QL(n.tile,n.ratio),f=function(T){return k1().tile(l).size(n.size).round(n.round).padding(n.padding).paddingInner(n.paddingInner).paddingOuter(n.paddingOuter).paddingTop(n.paddingTop).paddingRight(n.paddingRight).paddingBottom(n.paddingBottom).paddingLeft(n.paddingLeft)(Qg(T).sum(function(P){return n.ignoreParentValue&&P.children?0:P[s]}).sort(n.sort))},d=f(i),m=t[0],x=t[1];return d.each(function(T){T[m]=[T.x0,T.x1,T.x1,T.x0],T[x]=[T.y1,T.y1,T.y0,T.y0],["x0","x1","y0","y1"].forEach(function(P){t.indexOf(P)===-1&&delete T[P]})}),MS(d)}function YA(i){var n=i.data,t=i.colorField,s=i.rawFields,l=i.hierarchyConfig,f=l===void 0?{}:l,d=f.activeDepth,m={partition:RL,treemap:XA},x=i.seriesField,T=i.type||"partition",P=m[T](n,(0,M.pi)((0,M.pi)({field:x||"value"},(0,E.CE)(f,["activeDepth"])),{type:"hierarchy.".concat(T),as:["x","y"]})),D=[];return P.forEach(function(B){var U,Y,se,xe,Ee,rt;if(B.depth===0||d>0&&B.depth>d)return null;for(var vt=B.data.name,xt=(0,M.pi)({},B);xt.depth>1;)vt="".concat((Y=xt.parent.data)===null||Y===void 0?void 0:Y.name," / ").concat(vt),xt=xt.parent;var Bt=(0,M.pi)((0,M.pi)((0,M.pi)({},ls(B.data,(0,M.ev)((0,M.ev)([],s||[],!0),[f.field],!1))),(U={},U[Dy]=vt,U[NS]=xt.data.name,U)),B);x&&(Bt[x]=B.data[x]||((xe=(se=B.parent)===null||se===void 0?void 0:se.data)===null||xe===void 0?void 0:xe[x])),t&&(Bt[t]=B.data[t]||((rt=(Ee=B.parent)===null||Ee===void 0?void 0:Ee.data)===null||rt===void 0?void 0:rt[t])),Bt.ext=f,Bt[n0]={hierarchyConfig:f,colorField:t,rawFields:s},D.push(Bt)}),D}function JL(i){var n=i.chart,t=i.options,s=t.color,l=t.colorField,f=l===void 0?NS:l,d=t.sunburstStyle,m=t.rawFields,x=m===void 0?[]:m,T=t.shape,P=YA(t);n.data(P);var D;return d&&(D=function(B){return mn({},{fillOpacity:Math.pow(.85,B.depth)},(0,E.mf)(d)?d(B):d)}),q_(mn({},i,{options:{xField:"x",yField:"y",seriesField:f,rawFields:(0,E.jj)((0,M.ev)((0,M.ev)([],TL,!0),x,!0)),polygon:{color:s,style:D,shape:T}}})),i}function eF(i){var n=i.chart;return n.axis(!1),i}function tF(i){var n=i.chart,t=i.options,s=t.label,l=_a(n,"polygon");if(!s)l.label(!1);else{var f=s.fields,d=f===void 0?["name"]:f,m=s.callback,x=(0,M._T)(s,["fields","callback"]);l.label({fields:d,callback:m,cfg:Jl(x)})}return i}function rF(i){var n=i.chart,t=i.options,s=t.innerRadius,l=t.radius,f=t.reflect,d=n.coordinate({type:"polar",cfg:{innerRadius:s,radius:l}});return f&&d.reflect(f),i}function nF(i){var n,t=i.options,s=t.hierarchyConfig,l=t.meta;return Ua(Vu({},(n={},n[VA]=(0,E.U2)(l,(0,E.U2)(s,["field"],"value")),n)))(i)}function iF(i){var n=i.chart,t=i.options,s=t.tooltip;if(s===!1)n.tooltip(!1);else{var l=s;(0,E.U2)(s,"fields")||(l=mn({},{customItems:function(f){return f.map(function(d){var m=(0,E.U2)(n.getOptions(),"scales"),x=(0,E.U2)(m,[Dy,"formatter"],function(P){return P}),T=(0,E.U2)(m,[VA,"formatter"],function(P){return P});return(0,M.pi)((0,M.pi)({},d),{name:x(d.data[Dy]),value:T(d.data.value)})})}},l)),n.tooltip(l)}return i}function aF(i){var n=i.drilldown,t=i.interactions,s=t===void 0?[]:t;return n!=null&&n.enabled?mn({},i,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:YA}}],!1)}):i}function D1(i){var n=i.chart,t=i.options,s=t.drilldown;return cu({chart:n,options:aF(t)}),s!=null&&s.enabled&&(n.appendPadding=ly(n.appendPadding,(0,E.U2)(s,["breadCrumb","position"]))),i}function oF(i){return Ua(Go,ap("sunburstStyle"),JL,eF,nF,Vg,rF,iF,tF,D1,ps,Eu())(i)}var w4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="sunburst",t}return n.getDefaultOptions=function(){return AL},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return oF},n.SUNBURST_ANCESTOR_FIELD=NS,n.SUNBURST_PATH_FIELD=Dy,n.NODE_ANCESTORS_FIELD=TS,n}(ro);function KA(i,n){if((0,E.kJ)(i))return i.find(function(t){return t.type===n})}function VS(i,n){var t=KA(i,n);return t&&t.enable!==!1}function L1(i){var n=i.interactions,t=i.drilldown;return(0,E.U2)(t,"enabled")||VS(n,"treemap-drill-down")}function qA(i){var n=i.interactions["drill-down"];if(n){var t=n.context.actions.find(function(s){return s.name==="drill-down-action"});t.reset()}}function HS(i){var n=i.data,t=i.colorField,s=i.enableDrillDown,l=i.hierarchyConfig,f=XA(n,(0,M.pi)((0,M.pi)({},l),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),d=[];return f.forEach(function(m){if(m.depth===0||s&&m.depth!==1||!s&&m.children)return null;var x=m.ancestors().map(function(B){return{data:B.data,height:B.height,value:B.value}}),T=s&&(0,E.kJ)(n.path)?x.concat(n.path.slice(1)):x,P=Object.assign({},m.data,(0,M.pi)({x:m.x,y:m.y,depth:m.depth,value:m.value,path:T},m));if(!m.data[t]&&m.parent){var D=m.ancestors().find(function(B){return B.data[t]});P[t]=D==null?void 0:D.data[t]}else P[t]=m.data[t];P[n0]={hierarchyConfig:l,colorField:t,enableDrillDown:s},d.push(P)}),d}function QA(i){var n=i.options,t=n.colorField;return mn({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(s){return{name:s.name,value:s.value}}}}},i)}function JA(i){var n=i.chart,t=i.options,s=t.color,l=t.colorField,f=t.rectStyle,d=t.hierarchyConfig,m=t.rawFields,x=HS({data:t.data,colorField:t.colorField,enableDrillDown:L1(t),hierarchyConfig:d});return n.data(x),q_(mn({},i,{options:{xField:"x",yField:"y",seriesField:l,rawFields:m,polygon:{color:s,style:f}}})),n.coordinate().reflect("y"),i}function sF(i){var n=i.chart;return n.axis(!1),i}function eM(i){var n=i.drilldown,t=i.interactions,s=t===void 0?[]:t,l=L1(i);return l?mn({},i,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:HS}}],!1)}):i}function tM(i){var n=i.chart,t=i.options,s=t.interactions,l=t.drilldown;cu({chart:n,options:eM(t)});var f=KA(s,"view-zoom");f&&(f.enable!==!1?n.getCanvas().on("mousewheel",function(m){m.preventDefault()}):n.getCanvas().off("mousewheel"));var d=L1(t);return d&&(n.appendPadding=ly(n.appendPadding,(0,E.U2)(l,["breadCrumb","position"]))),i}function uF(i){return Ua(QA,Go,ap("rectStyle"),JA,sF,Vg,Dl,tM,ps,Eu())(i)}var rM={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},C4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="treemap",t}return n.getDefaultOptions=function(){return rM},n.prototype.changeData=function(t){var s=this.options,l=s.colorField,f=s.interactions,d=s.hierarchyConfig;this.updateOption({data:t});var m=HS({data:t,colorField:l,enableDrillDown:VS(f,"treemap-drill-down"),hierarchyConfig:d});this.chart.changeData(m),qA(this.chart)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return uF},n}(ro),bv="id",jS="path",lF={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(i){return{name:i.id,value:i.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function F1(i){if(i){var n=i.geometries[0].elements;n.forEach(function(t){t.shape.toFront()})}}var nM=Ci("element-active"),iM=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){F1(this.context.view)},n.prototype.active=function(){i.prototype.active.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(nM),cF=Ci("element-highlight"),aM=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){F1(this.context.view)},n.prototype.highlight=function(){i.prototype.highlight.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.clear=function(){i.prototype.clear.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(cF),oM=Ci("element-selected"),fF=Ci("element-single-selected"),l0=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){F1(this.context.view)},n.prototype.selected=function(){i.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(oM),hF=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){F1(this.context.view)},n.prototype.selected=function(){i.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){i.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){i.prototype.reset.call(this),this.syncElementsPos()},n}(fF);Kr("venn-element-active",iM),Kr("venn-element-highlight",aM),Kr("venn-element-selected",l0),Kr("venn-element-single-selected",hF),Nn("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),Nn("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),Nn("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),Nn("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),Nn("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),Nn("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var pF=function(i){(0,M.ZT)(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.getLabelPoint=function(t,s,l){var f=t.data,d=f.x,m=f.y,x=t.customLabelInfo,T=x.offsetX,P=x.offsetY;return{content:t.content[l],x:d+T,y:m+P}},n}(Ao);Ii("venn",pF);var dF=k(27771),B1=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,sM=new RegExp("([a-z])["+B1+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+B1+"]*,?["+B1+"]*)+)","ig"),uM=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+B1+"]*,?["+B1+"]*","ig");function vF(i){if(!i)return null;if((0,dF.Z)(i))return i;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(sM,function(s,l,f){var d=[],m=l.toLowerCase();if(f.replace(uM,function(x,T){T&&d.push(+T)}),m==="m"&&d.length>2&&(t.push([l].concat(d.splice(0,2))),m="l",l=l==="m"?"l":"L"),m==="o"&&d.length===1&&t.push([l,d[0]]),m==="r")t.push([l].concat(d));else for(;d.length>=n[m]&&(t.push([l].concat(d.splice(0,n[m]))),!!n[m]););return""}),t}var lM=/[a-z]/;function WS(i,n){return[n[0]+(n[0]-i[0]),n[1]+(n[1]-i[1])]}function gF(i){var n=parsePathString(i);if(!n||!n.length)return[["M",0,0]];for(var t=!1,s=0;s<n.length;s++){var l=n[s][0];if(lM.test(l)||["V","H","T","S"].indexOf(l)>=0){t=!0;break}}if(!t)return n;var f=[],d=0,m=0,x=0,T=0,P=0,D,B,U=n[0];(U[0]==="M"||U[0]==="m")&&(d=+U[1],m=+U[2],x=d,T=m,P++,f[0]=["M",d,m]);for(var s=P,Y=n.length;s<Y;s++){var se=n[s],xe=f[s-1],Ee=[],l=se[0],rt=l.toUpperCase();if(l!==rt)switch(Ee[0]=rt,rt){case"A":Ee[1]=se[1],Ee[2]=se[2],Ee[3]=se[3],Ee[4]=se[4],Ee[5]=se[5],Ee[6]=+se[6]+d,Ee[7]=+se[7]+m;break;case"V":Ee[1]=+se[1]+m;break;case"H":Ee[1]=+se[1]+d;break;case"M":x=+se[1]+d,T=+se[2]+m,Ee[1]=x,Ee[2]=T;break;default:for(var vt=1,xt=se.length;vt<xt;vt++)Ee[vt]=+se[vt]+(vt%2?d:m)}else Ee=n[s];switch(rt){case"Z":d=+x,m=+T;break;case"H":d=Ee[1],Ee=["L",d,m];break;case"V":m=Ee[1],Ee=["L",d,m];break;case"T":d=Ee[1],m=Ee[2];var Bt=WS([xe[1],xe[2]],[xe[3],xe[4]]);Ee=["Q",Bt[0],Bt[1],d,m];break;case"S":d=Ee[Ee.length-2],m=Ee[Ee.length-1];var _r=xe.length,Or=WS([xe[_r-4],xe[_r-3]],[xe[_r-2],xe[_r-1]]);Ee=["C",Or[0],Or[1],Ee[1],Ee[2],d,m];break;case"M":x=Ee[Ee.length-2],T=Ee[Ee.length-1];break;default:d=Ee[Ee.length-2],m=Ee[Ee.length-1]}f.push(Ee)}return f}var c0=Math.PI*2,N1=function(i,n,t,s,l,f,d){var m=i.x,x=i.y;m*=n,x*=t;var T=s*m-l*x,P=l*m+s*x;return{x:T+f,y:P+d}},cM=function(i,n){var t=n===1.5707963267948966?.551915024494:n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),s=Math.cos(i),l=Math.sin(i),f=Math.cos(i+n),d=Math.sin(i+n);return[{x:s-l*t,y:l+s*t},{x:f+d*t,y:d-f*t},{x:f,y:d}]},GS=function(i,n,t,s){var l=i*s-n*t<0?-1:1,f=i*t+n*s;return f>1&&(f=1),f<-1&&(f=-1),l*Math.acos(f)},tm=function(i,n,t,s,l,f,d,m,x,T,P,D){var B=Math.pow(l,2),U=Math.pow(f,2),Y=Math.pow(P,2),se=Math.pow(D,2),xe=B*U-B*se-U*Y;xe<0&&(xe=0),xe/=B*se+U*Y,xe=Math.sqrt(xe)*(d===m?-1:1);var Ee=xe*l/f*D,rt=xe*-f/l*P,vt=T*Ee-x*rt+(i+t)/2,xt=x*Ee+T*rt+(n+s)/2,Bt=(P-Ee)/l,_r=(D-rt)/f,Or=(-P-Ee)/l,Wr=(-D-rt)/f,gn=GS(1,0,Bt,_r),$r=GS(Bt,_r,Or,Wr);return m===0&&$r>0&&($r-=c0),m===1&&$r<0&&($r+=c0),[vt,xt,gn,$r]},fM=function(i){var n=i.px,t=i.py,s=i.cx,l=i.cy,f=i.rx,d=i.ry,m=i.xAxisRotation,x=m===void 0?0:m,T=i.largeArcFlag,P=T===void 0?0:T,D=i.sweepFlag,B=D===void 0?0:D,U=[];if(f===0||d===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];var Y=Math.sin(x*c0/360),se=Math.cos(x*c0/360),xe=se*(n-s)/2+Y*(t-l)/2,Ee=-Y*(n-s)/2+se*(t-l)/2;if(xe===0&&Ee===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];f=Math.abs(f),d=Math.abs(d);var rt=Math.pow(xe,2)/Math.pow(f,2)+Math.pow(Ee,2)/Math.pow(d,2);rt>1&&(f*=Math.sqrt(rt),d*=Math.sqrt(rt));var vt=tm(n,t,s,l,f,d,P,B,Y,se,xe,Ee),xt=vt[0],Bt=vt[1],_r=vt[2],Or=vt[3],Wr=Math.abs(Or)/(c0/4);Math.abs(1-Wr)<1e-7&&(Wr=1);var gn=Math.max(Math.ceil(Wr),1);Or/=gn;for(var $r=0;$r<gn;$r++)U.push(cM(_r,Or)),_r+=Or;return U.map(function(zn){var li=N1(zn[0],f,d,se,Y,xt,Bt),zi=li.x,ia=li.y,qa=N1(zn[1],f,d,se,Y,xt,Bt),Hn=qa.x,Di=qa.y,Zi=N1(zn[2],f,d,se,Y,xt,Bt),yi=Zi.x,Vi=Zi.y;return{x1:zi,y1:ia,x2:Hn,y2:Di,x:yi,y:Vi}})};function mF(i,n,t,s,l,f,d,m,x){var T=fM({px:i,py:n,cx:m,cy:x,rx:t,ry:s,xAxisRotation:l,largeArcFlag:f,sweepFlag:d});return T.reduce(function(P,D){var B=D.x1,U=D.y1,Y=D.x2,se=D.y2,xe=D.x,Ee=D.y;return P.push(B,U,Y,se,xe,Ee),P},[])}function yF(i,n){"TQ".indexOf(i[0])<0&&(n.qx=null,n.qy=null);var t=i.slice(1),s=t[0],l=t[1];switch(i[0]){case"M":return n.x=s,n.y=l,i;case"A":return["C"].concat(arcToCubic.apply(0,[n.x1,n.y1].concat(i.slice(1))));case"Q":return n.qx=s,n.qy=l,["C"].concat(quadToCubic.apply(0,[n.x1,n.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(n.x1,n.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(n.x1,n.y1,i[1],n.y1));case"V":return["C"].concat(lineToCubic(n.x1,n.y1,n.x1,i[1]));case"Z":return["C"].concat(lineToCubic(n.x1,n.y1,n.x,n.y));default:}return i}function _F(i,n){n===void 0&&(n=!1);for(var t=path2Absolute(i),s={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},l=[],f="",d=t.length,m,x,T=[],P=0;P<d;P+=1)t[P]&&(f=t[P][0]),l[P]=f,t[P]=segmentToCubic(t[P],s),hM(t,l,P),d=t.length,f==="Z"&&T.push(P),m=t[P],x=m.length,s.x1=+m[x-2],s.y1=+m[x-1],s.x2=+m[x-4]||s.x1,s.y2=+m[x-3]||s.y1;return n?[t,T]:t}function hM(i,n,t){if(i[t].length>7){i[t].shift();for(var s=i[t],l=t;s.length;)n[t]="A",i.splice(l+=1,0,["C"].concat(s.splice(0,6)));i.splice(t,1)}}var pM=function(i,n,t,s,l){var f=-3*n+9*t-9*s+3*l,d=i*f+6*n-12*t+6*s;return i*d-3*n+3*t},$S=function(i,n,t,s,l,f,d,m,x){x===null&&(x=1),x=x>1?1:x<0?0:x;for(var T=x/2,P=12,D=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],B=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],U=0,Y=0;Y<P;Y++){var se=T*D[Y]+T,xe=pM(se,i,t,l,d),Ee=pM(se,n,s,f,m),rt=xe*xe+Ee*Ee;U+=B[Y]*Math.sqrt(rt)}return T*U},dM=function(i,n,t,s,l,f,d,m){for(var x=[],T=[[],[]],P,D,B,U,Y=0;Y<2;++Y){if(Y===0?(D=6*i-12*t+6*l,P=-3*i+9*t-9*l+3*d,B=3*t-3*i):(D=6*n-12*s+6*f,P=-3*n+9*s-9*f+3*m,B=3*s-3*n),Math.abs(P)<1e-12){if(Math.abs(D)<1e-12)continue;U=-B/D,U>0&&U<1&&x.push(U);continue}var se=D*D-4*B*P,xe=Math.sqrt(se);if(!(se<0)){var Ee=(-D+xe)/(2*P);Ee>0&&Ee<1&&x.push(Ee);var rt=(-D-xe)/(2*P);rt>0&&rt<1&&x.push(rt)}}for(var vt=x.length,xt=vt,Bt;vt--;)U=x[vt],Bt=1-U,T[0][vt]=Bt*Bt*Bt*i+3*Bt*Bt*U*t+3*Bt*U*U*l+U*U*U*d,T[1][vt]=Bt*Bt*Bt*n+3*Bt*Bt*U*s+3*Bt*U*U*f+U*U*U*m;return T[0][xt]=i,T[1][xt]=n,T[0][xt+1]=d,T[1][xt+1]=m,T[0].length=T[1].length=xt+2,{min:{x:Math.min.apply(0,T[0]),y:Math.min.apply(0,T[1])},max:{x:Math.max.apply(0,T[0]),y:Math.max.apply(0,T[1])}}},xF=function(i,n,t,s,l,f,d,m){if(!(Math.max(i,t)<Math.min(l,d)||Math.min(i,t)>Math.max(l,d)||Math.max(n,s)<Math.min(f,m)||Math.min(n,s)>Math.max(f,m))){var x=(i*s-n*t)*(l-d)-(i-t)*(l*m-f*d),T=(i*s-n*t)*(f-m)-(n-s)*(l*m-f*d),P=(i-t)*(f-m)-(n-s)*(l-d);if(P){var D=x/P,B=T/P,U=+D.toFixed(2),Y=+B.toFixed(2);if(!(U<+Math.min(i,t).toFixed(2)||U>+Math.max(i,t).toFixed(2)||U<+Math.min(l,d).toFixed(2)||U>+Math.max(l,d).toFixed(2)||Y<+Math.min(n,s).toFixed(2)||Y>+Math.max(n,s).toFixed(2)||Y<+Math.min(f,m).toFixed(2)||Y>+Math.max(f,m).toFixed(2)))return{x:D,y:B}}}},Sv=function(i,n,t){return n>=i.x&&n<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},z1=function(i,n,t,s){return i===null&&(i=n=t=s=0),n===null&&(n=i.y,t=i.width,s=i.height,i=i.x),{x:i,y:n,width:t,w:t,height:s,h:s,x2:i+t,y2:n+s,cx:i+t/2,cy:n+s/2,r1:Math.min(t,s)/2,r2:Math.max(t,s)/2,r0:Math.sqrt(t*t+s*s)/2,path:rectPath(i,n,t,s),vb:[i,n,t,s].join(" ")}},bF=function(i,n){return i=z1(i),n=z1(n),Sv(n,i.x,i.y)||Sv(n,i.x2,i.y)||Sv(n,i.x,i.y2)||Sv(n,i.x2,i.y2)||Sv(i,n.x,n.y)||Sv(i,n.x2,n.y)||Sv(i,n.x,n.y2)||Sv(i,n.x2,n.y2)||(i.x<n.x2&&i.x>n.x||n.x<i.x2&&n.x>i.x)&&(i.y<n.y2&&i.y>n.y||n.y<i.y2&&n.y>i.y)},SF=function(i,n,t,s,l,f,d,m){isArray(i)||(i=[i,n,t,s,l,f,d,m]);var x=dM.apply(null,i);return z1(x.min.x,x.min.y,x.max.x-x.min.x,x.max.y-x.min.y)},vM=function(i,n,t,s,l,f,d,m,x){var T=1-x,P=Math.pow(T,3),D=Math.pow(T,2),B=x*x,U=B*x,Y=P*i+D*3*x*t+T*3*x*x*l+U*d,se=P*n+D*3*x*s+T*3*x*x*f+U*m,xe=i+2*x*(t-i)+B*(l-2*t+i),Ee=n+2*x*(s-n)+B*(f-2*s+n),rt=t+2*x*(l-t)+B*(d-2*l+t),vt=s+2*x*(f-s)+B*(m-2*f+s),xt=T*i+x*t,Bt=T*n+x*s,_r=T*l+x*d,Or=T*f+x*m,Wr=90-Math.atan2(xe-rt,Ee-vt)*180/Math.PI;return{x:Y,y:se,m:{x:xe,y:Ee},n:{x:rt,y:vt},start:{x:xt,y:Bt},end:{x:_r,y:Or},alpha:Wr}},T4=function(i,n,t){var s=SF(i),l=SF(n);if(!bF(s,l))return t?0:[];for(var f=$S.apply(0,i),d=$S.apply(0,n),m=~~(f/8),x=~~(d/8),T=[],P=[],D={},B=t?0:[],U=0;U<m+1;U++){var Y=vM.apply(0,i.concat(U/m));T.push({x:Y.x,y:Y.y,t:U/m})}for(var U=0;U<x+1;U++){var Y=vM.apply(0,n.concat(U/x));P.push({x:Y.x,y:Y.y,t:U/x})}for(var U=0;U<m;U++)for(var se=0;se<x;se++){var xe=T[U],Ee=T[U+1],rt=P[se],vt=P[se+1],xt=Math.abs(Ee.x-xe.x)<.001?"y":"x",Bt=Math.abs(vt.x-rt.x)<.001?"y":"x",_r=xF(xe.x,xe.y,Ee.x,Ee.y,rt.x,rt.y,vt.x,vt.y);if(_r){if(D[_r.x.toFixed(4)]===_r.y.toFixed(4))continue;D[_r.x.toFixed(4)]=_r.y.toFixed(4);var Or=xe.t+Math.abs((_r[xt]-xe[xt])/(Ee[xt]-xe[xt]))*(Ee.t-xe.t),Wr=rt.t+Math.abs((_r[Bt]-rt[Bt])/(vt[Bt]-rt[Bt]))*(vt.t-rt.t);Or>=0&&Or<=1&&Wr>=0&&Wr<=1&&(t?B++:B.push({x:_r.x,y:_r.y,t1:Or,t2:Wr}))}}return B},EF=function(i,n,t){i=path2Curve(i),n=path2Curve(n);for(var s,l,f,d,m,x,T,P,D,B,U=t?0:[],Y=0,se=i.length;Y<se;Y++){var xe=i[Y];if(xe[0]==="M")s=m=xe[1],l=x=xe[2];else{xe[0]==="C"?(D=[s,l].concat(xe.slice(1)),s=D[6],l=D[7]):(D=[s,l,s,l,m,x,m,x],s=m,l=x);for(var Ee=0,rt=n.length;Ee<rt;Ee++){var vt=n[Ee];if(vt[0]==="M")f=T=vt[1],d=P=vt[2];else{vt[0]==="C"?(B=[f,d].concat(vt.slice(1)),f=B[6],d=B[7]):(B=[f,d,f,d,T,P,T,P],f=T,d=P);var xt=T4(D,B,t);if(t)U+=xt;else{for(var Bt=0,_r=xt.length;Bt<_r;Bt++)xt[Bt].segment1=Y,xt[Bt].segment2=Ee,xt[Bt].bez1=D,xt[Bt].bez2=B;U=U.concat(xt)}}}}}return U};function A4(i,n){return EF(i,n)}function wF(i){return mn({},i.defaultStyle,{fill:i.color},i.style)}mi("schema","venn",{draw:function(i,n){var t=i.data,s=vF(t[jS]),l=wF(i),f=n.addGroup({name:"venn-shape"});f.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},l),{path:s}),name:"venn-path"});var d=i.customInfo,m=d.offsetX,x=d.offsetY,T=Ql.transform(null,[["t",m,x]]);return f.setMatrix(T),f},getMarker:function(i){var n=i.color;return{symbol:"circle",style:{lineWidth:0,stroke:n,fill:n,r:4}}}});var M4=function(i){return function(n,t){var s=[];return s[0]=i(n[0],t[0]),s[1]=i(n[1],t[1]),s[2]=i(n[2],t[2]),s}},gM={normal:function(i){return i},multiply:function(i,n){return i*n/255},screen:function(i,n){return 255*(1-(1-i/255)*(1-n/255))},overlay:function(i,n){return n<128?2*i*n/255:255*(1-2*(1-i/255)*(1-n/255))},darken:function(i,n){return i>n?n:i},lighten:function(i,n){return i>n?i:n},dodge:function(i,n){return i===255?255:(i=255*(n/255)/(1-i/255),i>255?255:i)},burn:function(i,n){return n===255?255:i===0?0:255*(1-Math.min(1,(1-n/255)/(i/255)))}},R4=function(i){if(!gM[i])throw new Error("unknown blend mode "+i);return gM[i]};function I4(i,n,t){t===void 0&&(t="normal");var s=M4(R4(t))(U1(i),U1(n)),l=U1(i),f=l[0],d=l[1],m=l[2],x=l[3],T=U1(n),P=T[0],D=T[1],B=T[2],U=T[3],Y=Number((x+U*(1-x)).toFixed(2)),se=Math.round((x*(1-U)*(f/255)+x*U*(s[0]/255)+(1-x)*U*(P/255))/Y*255),xe=Math.round((x*(1-U)*(d/255)+x*U*(s[1]/255)+(1-x)*U*(D/255))/Y*255),Ee=Math.round((x*(1-U)*(m/255)+x*U*(s[2]/255)+(1-x)*U*(B/255))/Y*255);return"rgba(".concat(se,", ").concat(xe,", ").concat(Ee,", ").concat(Y,")")}function U1(i){var n=i.replace("/s+/g",""),t;return typeof n=="string"&&!n.startsWith("rgba")&&!n.startsWith("#")?t=Sa.rgb2arr(Sa.toRGB(n)).concat([1]):(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=Sa.rgb2arr(n).concat([1])),t.map(function(s,l){return l===3?Number(s):s|0}))}var Ev=k(87026),CF=1e-10;function XS(i,n){var t=YS(i),s=t.filter(function(Or){return mM(Or,i)}),l=0,f=0,d,m=[];if(s.length>1){var x=KS(s);for(d=0;d<s.length;++d){var T=s[d];T.angle=Math.atan2(T.x-x.x,T.y-x.y)}s.sort(function(Or,Wr){return Wr.angle-Or.angle});var P=s[s.length-1];for(d=0;d<s.length;++d){var D=s[d];f+=(P.x+D.x)*(D.y-P.y);for(var B={x:(D.x+P.x)/2,y:(D.y+P.y)/2},U=null,Y=0;Y<D.parentIndex.length;++Y)if(P.parentIndex.indexOf(D.parentIndex[Y])>-1){var se=i[D.parentIndex[Y]],xe=Math.atan2(D.x-se.x,D.y-se.y),Ee=Math.atan2(P.x-se.x,P.y-se.y),rt=Ee-xe;rt<0&&(rt+=2*Math.PI);var vt=Ee-rt/2,xt=qf(B,{x:se.x+se.radius*Math.sin(vt),y:se.y+se.radius*Math.cos(vt)});xt>se.radius*2&&(xt=se.radius*2),(U===null||U.width>xt)&&(U={circle:se,width:xt,p1:D,p2:P})}U!==null&&(m.push(U),l+=Z1(U.circle.radius,U.width),P=D)}}else{var Bt=i[0];for(d=1;d<i.length;++d)i[d].radius<Bt.radius&&(Bt=i[d]);var _r=!1;for(d=0;d<i.length;++d)if(qf(i[d],Bt)>Math.abs(Bt.radius-i[d].radius)){_r=!0;break}_r?l=f=0:(l=Bt.radius*Bt.radius*Math.PI,m.push({circle:Bt,p1:{x:Bt.x,y:Bt.y+Bt.radius},p2:{x:Bt.x-CF,y:Bt.y+Bt.radius},width:Bt.radius*2}))}return f/=2,n&&(n.area=l+f,n.arcArea=l,n.polygonArea=f,n.arcs=m,n.innerPoints=s,n.intersectionPoints=t),l+f}function mM(i,n){for(var t=0;t<n.length;++t)if(qf(i,n[t])>n[t].radius+CF)return!1;return!0}function YS(i){for(var n=[],t=0;t<i.length;++t)for(var s=t+1;s<i.length;++s)for(var l=yM(i[t],i[s]),f=0;f<l.length;++f){var d=l[f];d.parentIndex=[t,s],n.push(d)}return n}function Z1(i,n){return i*i*Math.acos(1-n/i)-(i-n)*Math.sqrt(n*(2*i-n))}function qf(i,n){return Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y))}function TF(i,n,t){if(t>=i+n)return 0;if(t<=Math.abs(i-n))return Math.PI*Math.min(i,n)*Math.min(i,n);var s=i-(t*t-n*n+i*i)/(2*t),l=n-(t*t-i*i+n*n)/(2*t);return Z1(i,s)+Z1(n,l)}function yM(i,n){var t=qf(i,n),s=i.radius,l=n.radius;if(t>=s+l||t<=Math.abs(s-l))return[];var f=(s*s-l*l+t*t)/(2*t),d=Math.sqrt(s*s-f*f),m=i.x+f*(n.x-i.x)/t,x=i.y+f*(n.y-i.y)/t,T=-(n.y-i.y)*(d/t),P=-(n.x-i.x)*(d/t);return[{x:m+T,y:x-P},{x:m-T,y:x+P}]}function KS(i){for(var n={x:0,y:0},t=0;t<i.length;++t)n.x+=i[t].x,n.y+=i[t].y;return n.x/=i.length,n.y/=i.length,n}function rm(i,n,t){var s=n[0].radius-qf(n[0],i),l,f;for(l=1;l<n.length;++l)f=n[l].radius-qf(n[l],i),f<=s&&(s=f);for(l=0;l<t.length;++l)f=qf(t[l],i)-t[l].radius,f<=s&&(s=f);return s}function Fy(i,n){var t=[],s;for(s=0;s<i.length;++s){var l=i[s];t.push({x:l.x,y:l.y}),t.push({x:l.x+l.radius/2,y:l.y}),t.push({x:l.x-l.radius/2,y:l.y}),t.push({x:l.x,y:l.y+l.radius/2}),t.push({x:l.x,y:l.y-l.radius/2})}var f=t[0],d=rm(t[0],i,n);for(s=1;s<t.length;++s){var m=rm(t[s],i,n);m>=d&&(f=t[s],d=m)}var x=(0,Ev.nelderMead)(function(B){return-1*rm({x:B[0],y:B[1]},i,n)},[f.x,f.y],{maxIterations:500,minErrorDelta:1e-10}).x,T={x:x[0],y:x[1]},P=!0;for(s=0;s<i.length;++s)if(qf(T,i[s])>i[s].radius){P=!1;break}for(s=0;s<n.length;++s)if(qf(T,n[s])<n[s].radius){P=!1;break}if(!P)if(i.length==1)T={x:i[0].x,y:i[0].y};else{var D={};XS(i,D),D.arcs.length===0?T={x:0,y:-1e3,disjoint:!0}:D.arcs.length==1?T={x:D.arcs[0].circle.x,y:D.arcs[0].circle.y}:n.length?T=Fy(i,[]):T=KS(D.arcs.map(function(B){return B.p1}))}return T}function P4(i){var n={},t=[];for(var s in i)t.push(s),n[s]=[];for(var l=0;l<t.length;l++)for(var f=i[t[l]],d=l+1;d<t.length;++d){var m=i[t[d]],x=qf(f,m);x+m.radius<=f.radius+1e-10?n[t[d]].push(t[l]):x+f.radius<=m.radius+1e-10&&n[t[l]].push(t[d])}return n}function O4(i,n){for(var t={},s=P4(i),l=0;l<n.length;++l){for(var f=n[l].sets,d={},m={},x=0;x<f.length;++x){d[f[x]]=!0;for(var T=s[f[x]],P=0;P<T.length;++P)m[T[P]]=!0}var D=[],B=[];for(var U in i)U in d?D.push(i[U]):U in m||B.push(i[U]);var Y=Fy(D,B);t[f]=Y,Y.disjoint&&n[l].size>0&&console.log("WARNING: area "+f+" not represented on screen")}return t}function nm(i,n,t){var s=[],l=i-t,f=n;return s.push("M",l,f),s.push("A",t,t,0,1,0,l+2*t,f),s.push("A",t,t,0,1,0,l,f),s.join(" ")}function kd(i){var n=i.split(" ");return{x:parseFloat(n[1]),y:parseFloat(n[2]),radius:-parseFloat(n[4])}}function _M(i){var n={};XS(i,n);var t=n.arcs;if(t.length===0)return"M 0 0";if(t.length==1){var s=t[0].circle;return nm(s.x,s.y,s.radius)}else{for(var l=[`
M`,t[0].p2.x,t[0].p2.y],f=0;f<t.length;++f){var d=t[f],m=d.circle.radius,x=d.width>m;l.push(`
A`,m,m,0,x?1:0,1,d.p1.x,d.p1.y)}return l.join(" ")}}function wv(i,n){n=n||{},n.maxIterations=n.maxIterations||500;var t=n.initialLayout||MF,s=n.lossFunction||bM;i=QS(i);var l=t(i,n),f=[],d=[],m;for(m in l)l.hasOwnProperty(m)&&(f.push(l[m].x),f.push(l[m].y),d.push(m));for(var x=(0,Ev.nelderMead)(function(D){for(var B={},U=0;U<d.length;++U){var Y=d[U];B[Y]={x:D[2*U],y:D[2*U+1],radius:l[Y].radius}}return s(B,i)},f,n),T=x.x,P=0;P<d.length;++P)m=d[P],l[m].x=T[2*P],l[m].y=T[2*P+1];return l}var qS=1e-10;function By(i,n,t){return Math.min(i,n)*Math.min(i,n)*Math.PI<=t+qS?Math.abs(i-n):(0,Ev.bisect)(function(s){return TF(i,n,s)-t},0,i+n)}function QS(i){i=i.slice();var n=[],t={},s,l,f,d;for(s=0;s<i.length;++s){var m=i[s];m.sets.length==1?n.push(m.sets[0]):m.sets.length==2&&(f=m.sets[0],d=m.sets[1],t[[f,d]]=!0,t[[d,f]]=!0)}for(n.sort(function(x,T){return x>T?1:-1}),s=0;s<n.length;++s)for(f=n[s],l=s+1;l<n.length;++l)d=n[l],[f,d]in t||i.push({sets:[f,d],size:0});return i}function AF(i,n,t){var s=(0,Ev.zerosM)(n.length,n.length),l=(0,Ev.zerosM)(n.length,n.length);return i.filter(function(f){return f.sets.length==2}).map(function(f){var d=t[f.sets[0]],m=t[f.sets[1]],x=Math.sqrt(n[d].size/Math.PI),T=Math.sqrt(n[m].size/Math.PI),P=By(x,T,f.size);s[d][m]=s[m][d]=P;var D=0;f.size+1e-10>=Math.min(n[d].size,n[m].size)?D=1:f.size<=1e-10&&(D=-1),l[d][m]=l[m][d]=D}),{distances:s,constraints:l}}function xM(i,n,t,s){var l=0,f;for(f=0;f<n.length;++f)n[f]=0;for(f=0;f<t.length;++f)for(var d=i[2*f],m=i[2*f+1],x=f+1;x<t.length;++x){var T=i[2*x],P=i[2*x+1],D=t[f][x],B=s[f][x],U=(T-d)*(T-d)+(P-m)*(P-m),Y=Math.sqrt(U),se=U-D*D;B>0&&Y<=D||B<0&&Y>=D||(l+=2*se*se,n[2*f]+=4*se*(d-T),n[2*f+1]+=4*se*(m-P),n[2*x]+=4*se*(T-d),n[2*x+1]+=4*se*(P-m))}return l}function MF(i,n){var t=JS(i,n),s=n.lossFunction||bM;if(i.length>=8){var l=V1(i,n),f=s(l,i),d=s(t,i);f+1e-8<d&&(t=l)}return t}function V1(i,n){n=n||{};var t=n.restarts||10,s=[],l={},f;for(f=0;f<i.length;++f){var d=i[f];d.sets.length==1&&(l[d.sets[0]]=s.length,s.push(d))}var m=AF(i,s,l),x=m.distances,T=m.constraints,P=(0,Ev.norm2)(x.map(Ev.norm2))/x.length;x=x.map(function(rt){return rt.map(function(vt){return vt/P})});var D=function(rt,vt){return xM(rt,vt,x,T)},B,U;for(f=0;f<t;++f){var Y=(0,Ev.zeros)(x.length*2).map(Math.random);U=(0,Ev.conjugateGradient)(D,Y,n),(!B||U.fx<B.fx)&&(B=U)}var se=B.x,xe={};for(f=0;f<s.length;++f){var Ee=s[f];xe[Ee.sets[0]]={x:se[2*f]*P,y:se[2*f+1]*P,radius:Math.sqrt(Ee.size/Math.PI)}}if(n.history)for(f=0;f<n.history.length;++f)(0,Ev.scale)(n.history[f].x,P);return xe}function JS(i,n){for(var t=n&&n.lossFunction?n.lossFunction:bM,s={},l={},f,d=0;d<i.length;++d){var m=i[d];m.sets.length==1&&(f=m.sets[0],s[f]={x:1e10,y:1e10,rowid:Object.keys(s).length,size:m.size,radius:Math.sqrt(m.size/Math.PI)},l[f]=[])}i=i.filter(function(Hn){return Hn.sets.length==2});for(var d=0;d<i.length;++d){var x=i[d],T=x.hasOwnProperty("weight")?x.weight:1,P=x.sets[0],D=x.sets[1];x.size+qS>=Math.min(s[P].size,s[D].size)&&(T=0),l[P].push({set:D,size:x.size,weight:T}),l[D].push({set:P,size:x.size,weight:T})}var B=[];for(f in l)if(l.hasOwnProperty(f)){for(var U=0,d=0;d<l[f].length;++d)U+=l[f][d].size*l[f][d].weight;B.push({set:f,size:U})}function Y(Hn,Di){return Di.size-Hn.size}B.sort(Y);var se={};function xe(Hn){return Hn.set in se}function Ee(Hn,Di){s[Di].x=Hn.x,s[Di].y=Hn.y,se[Di]=!0}Ee({x:0,y:0},B[0].set);for(var d=1;d<B.length;++d){var rt=B[d].set,vt=l[rt].filter(xe);if(f=s[rt],vt.sort(Y),vt.length===0)throw"ERROR: missing pairwise overlap information";for(var xt=[],Bt=0;Bt<vt.length;++Bt){var _r=s[vt[Bt].set],Or=By(f.radius,_r.radius,vt[Bt].size);xt.push({x:_r.x+Or,y:_r.y}),xt.push({x:_r.x-Or,y:_r.y}),xt.push({y:_r.y+Or,x:_r.x}),xt.push({y:_r.y-Or,x:_r.x});for(var Wr=Bt+1;Wr<vt.length;++Wr)for(var gn=s[vt[Wr].set],$r=By(f.radius,gn.radius,vt[Wr].size),zn=yM({x:_r.x,y:_r.y,radius:Or},{x:gn.x,y:gn.y,radius:$r}),li=0;li<zn.length;++li)xt.push(zn[li])}for(var zi=1e50,ia=xt[0],Bt=0;Bt<xt.length;++Bt){s[rt].x=xt[Bt].x,s[rt].y=xt[Bt].y;var qa=t(s,i);qa<zi&&(zi=qa,ia=xt[Bt])}Ee(ia,rt)}return s}function bM(i,n){var t=0;function s(P){return P.map(function(D){return i[D]})}for(var l=0;l<n.length;++l){var f=n[l],d=void 0;if(f.sets.length!=1){if(f.sets.length==2){var m=i[f.sets[0]],x=i[f.sets[1]];d=TF(m.radius,x.radius,qf(m,x))}else d=XS(s(f.sets));var T=f.hasOwnProperty("weight")?f.weight:1;t+=T*(d-f.size)*(d-f.size)}}return t}function SM(i,n,t){t===null?i.sort(function(se,xe){return xe.radius-se.radius}):i.sort(t);var s;if(i.length>0){var l=i[0].x,f=i[0].y;for(s=0;s<i.length;++s)i[s].x-=l,i[s].y-=f}if(i.length==2){var d=distance(i[0],i[1]);d<Math.abs(i[1].radius-i[0].radius)&&(i[1].x=i[0].x+i[0].radius-i[1].radius-1e-10,i[1].y=i[0].y)}if(i.length>1){var m=Math.atan2(i[1].x,i[1].y)-n,x=void 0,T=void 0,P=Math.cos(m),D=Math.sin(m);for(s=0;s<i.length;++s)x=i[s].x,T=i[s].y,i[s].x=P*x-D*T,i[s].y=D*x+P*T}if(i.length>2){for(var B=Math.atan2(i[2].x,i[2].y)-n;B<0;)B+=2*Math.PI;for(;B>2*Math.PI;)B-=2*Math.PI;if(B>Math.PI){var U=i[1].y/(1e-10+i[1].x);for(s=0;s<i.length;++s){var Y=(i[s].x+U*i[s].y)/(1+U*U);i[s].x=2*Y-i[s].x,i[s].y=2*Y*U-i[s].y}}}}function k4(i){i.map(function(T){T.parent=T});function n(T){return T.parent!==T&&(T.parent=n(T.parent)),T.parent}function t(T,P){var D=n(T),B=n(P);D.parent=B}for(var s=0;s<i.length;++s)for(var l=s+1;l<i.length;++l){var f=i[s].radius+i[l].radius;distance(i[s],i[l])+1e-10<f&&t(i[l],i[s])}for(var d={},m,s=0;s<i.length;++s)m=n(i[s]).parent.setid,m in d||(d[m]=[]),d[m].push(i[s]);i.map(function(T){delete T.parent});var x=[];for(m in d)d.hasOwnProperty(m)&&x.push(d[m]);return x}function eE(i){var n=function(t){var s=Math.max.apply(null,i.map(function(f){return f[t]+f.radius})),l=Math.min.apply(null,i.map(function(f){return f[t]-f.radius}));return{max:s,min:l}};return{xRange:n("x"),yRange:n("y")}}function D4(i,n,t){n===null&&(n=Math.PI/2);var s=[],l,f;for(f in i)if(i.hasOwnProperty(f)){var d=i[f];s.push({x:d.x,y:d.y,radius:d.radius,setid:f})}var m=k4(s);for(l=0;l<m.length;++l){SM(m[l],n,t);var x=eE(m[l]);m[l].size=(x.xRange.max-x.xRange.min)*(x.yRange.max-x.yRange.min),m[l].bounds=x}m.sort(function(Y,se){return se.size-Y.size}),s=m[0];var T=s.bounds,P=(T.xRange.max-T.xRange.min)/50;function D(Y,se,xe){if(Y){var Ee=Y.bounds,rt,vt,xt;se?rt=T.xRange.max-Ee.xRange.min+P:(rt=T.xRange.max-Ee.xRange.max,xt=(Ee.xRange.max-Ee.xRange.min)/2-(T.xRange.max-T.xRange.min)/2,xt<0&&(rt+=xt)),xe?vt=T.yRange.max-Ee.yRange.min+P:(vt=T.yRange.max-Ee.yRange.max,xt=(Ee.yRange.max-Ee.yRange.min)/2-(T.yRange.max-T.yRange.min)/2,xt<0&&(vt+=xt));for(var Bt=0;Bt<Y.length;++Bt)Y[Bt].x+=rt,Y[Bt].y+=vt,s.push(Y[Bt])}}for(var B=1;B<m.length;)D(m[B],!0,!1),D(m[B+1],!1,!0),D(m[B+2],!0,!0),B+=3,T=eE(s);var U={};for(l=0;l<s.length;++l)U[s[l].setid]=s[l];return U}function RF(i,n,t,s){var l=[],f=[];for(var d in i)i.hasOwnProperty(d)&&(f.push(d),l.push(i[d]));n-=2*s,t-=2*s;var m=eE(l),x=m.xRange,T=m.yRange;if(x.max==x.min||T.max==T.min)return console.log("not scaling solution: zero size detected"),i;for(var P=n/(x.max-x.min),D=t/(T.max-T.min),B=Math.min(D,P),U=(n-(x.max-x.min)*B)/2,Y=(t-(T.max-T.min)*B)/2,se={},xe=0;xe<l.length;++xe){var Ee=l[xe];se[f[xe]]={radius:B*Ee.radius,x:s+U+(Ee.x-x.min)*B,y:s+Y+(Ee.y-T.min)*B}}return se}var IF=(0,E.HP)(function(i,n,t,s){var l=new Map,f=i.length;return n.forEach(function(d,m){if(d[s].length===1)l.set(d[bv],i[(m+f)%f]);else{var x=d[s].map(function(T){return l.get(T)});l.set(d[bv],x.slice(1).reduce(function(T,P){return I4(T,P,t)},x[0]))}}),l},function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return JSON.stringify(i)});function EM(i,n,t,s){s===void 0&&(s=0);var l=i.data,f=i.setsField,d=i.sizeField;if(l.length===0)return Jv(Rh.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),[];var m=l.map(function(D){var B;return(0,M.pi)((0,M.pi)({},D),(B={sets:D[f]||[],size:D[d]},B[jS]="",B[bv]="",B))});m.sort(function(D,B){return D.sets.length-B.sets.length});var x=wv(m),T=RF(x,n,t,s),P=O4(T,m);return m.forEach(function(D){var B=D.sets,U=B.join(",");D[bv]=U;var Y=B.map(function(Ee){return T[Ee]}),se=_M(Y);/[zZ]$/.test(se)||(se+=" Z"),D[jS]=se;var xe=P[U]||{x:0,y:0};(0,E.f0)(D,xe)}),m}function wM(i,n){for(var t=0;t<n.length;t++)if(!i.includes(n[t]))return!1;return!0}var PF=40;function CM(i,n,t){var s=i.chart,l=i.options,f=l.blendMode,d=l.setsField,m=s.getTheme(),x=m.colors10,T=m.colors20,P=t;(0,E.kJ)(P)||(P=n.filter(function(B){return B[d].length===1}).length<=10?x:T);var D=IF(P,n,f,d);return function(B){return D.get(B)||P[0]}}function tE(i,n){var t=i.options,s=t.color;if(typeof s!="function"){var l=typeof s=="string"?[s]:s,f=CM(i,n,l);return function(d){return f(d[bv])}}return s}function TM(i){var n=i.chart,t=i.options,s=t.legend,l=t.appendPadding,f=t.padding,d=dv(l);return s!==!1&&(d=ly(l,(0,E.U2)(s,"position"),PF)),n.appendPadding=Z_([d,f]),i}function AM(i){var n=i.options,t=n.data;t||(Jv(Rh.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),t=[]);var s=t.filter(function(f){return f.sets.length===1}).map(function(f){return f.sets[0]}),l=t.filter(function(f){var d=f.sets;return wM(s,d)});return(0,E.Xy)(l,t)||Jv(Rh.WARN,!1,"warn: %s","\u4EA4\u96C6\u4E2D\u4E0D\u80FD\u51FA\u73B0\u4E0D\u5B58\u5728\u7684\u96C6\u5408, \u8BF7\u8F93\u5165\u5408\u6CD5\u6570\u636E"),(0,E.b$)({},i,{options:{data:l}})}function MM(i){var n=i.chart,t=i.options,s=t.pointStyle,l=t.setsField,f=t.sizeField,d=dv(n.appendPadding),m=d[0],x=d[1],T=d[2],P=d[3],D={offsetX:P,offsetY:m},B=n.viewBBox,U=B.width,Y=B.height,se=EM(t,Math.max(U-(x+P),0),Math.max(Y-(m+T),0),0);n.data(se);var xe=Fb(mn({},i,{options:{xField:"x",yField:"y",sizeField:f,seriesField:bv,rawFields:[l,f],schema:{shape:"venn",style:s}}})).ext,Ee=xe.geometry;Ee.customInfo(D);var rt=tE(i,se);return typeof rt=="function"&&Ee.color(bv,function(vt){var xt=se.find(function(_r){return _r[bv]===vt}),Bt=CM(i,se)(vt);return rt(xt,Bt)}),i}function OF(i){var n=i.chart,t=i.options,s=t.label,l=dv(n.appendPadding),f=l[0],d=l[3],m={offsetX:d,offsetY:f},x=_a(n,"schema");if(!s)x.label(!1);else{var T=s.callback,P=(0,M._T)(s,["callback"]);x.label({fields:["id"],callback:T,cfg:(0,E.b$)({},Jl(P),{type:"venn",customLabelInfo:m})})}return i}function kF(i){var n=i.chart,t=i.options,s=t.legend,l=t.sizeField;return n.legend(bv,s),n.legend(l,!1),i}function RM(i){var n=i.chart;return n.axis(!1),i}function IM(i){var n=i.options,t=i.chart,s=n.interactions;if(s){var l={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};cu(mn({},i,{options:{interactions:s.map(function(f){return(0,M.pi)((0,M.pi)({},f),{type:l[f.type]||f.type})})}}))}return t.removeInteraction("legend-active"),t.removeInteraction("legend-highlight"),i}function PM(i){return Ua(TM,Go,AM,MM,OF,Vu({}),kF,RM,Dl,IM,ps)(i)}var DF=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="venn",t}return n.getDefaultOptions=function(){return lF},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return PM},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n}(ro),Dh="x",sg="violinY",f0="violinSize",rE="minMax",nE="quantile",iE="median",H1="violin_view",LF="min_max_view",FF="quantile_view",BF="median_view",OM=mn({},ro.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),NF=k(53843),kM=k.n(NF);function DM(i,n){var t=i.length*n;if(i.length===0)throw new Error("quantile requires at least one data point.");if(n<0||n>1)throw new Error("quantiles must be between 0 and 1");return n===1?i[i.length-1]:n===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function Ny(i,n,t){var s=i[n];i[n]=i[t],i[t]=s}function h0(i,n,t,s){for(t=t||0,s=s||i.length-1;s>t;){if(s-t>600){var l=s-t+1,f=n-t+1,d=Math.log(l),m=.5*Math.exp(2*d/3),x=.5*Math.sqrt(d*m*(l-m)/l);f-l/2<0&&(x*=-1);var T=Math.max(t,Math.floor(n-f*m/l+x)),P=Math.min(s,Math.floor(n+(l-f)*m/l+x));h0(i,n,T,P)}var D=i[n],B=t,U=s;for(Ny(i,t,n),i[s]>D&&Ny(i,t,s);B<U;){for(Ny(i,B,U),B++,U--;i[B]<D;)B++;for(;i[U]>D;)U--}i[t]===D?Ny(i,t,U):(U++,Ny(i,U,s)),U<=n&&(t=U+1),n<=U&&(s=U-1)}}function ug(i,n){var t=i.slice();if(Array.isArray(n)){FM(t,n);for(var s=[],l=0;l<n.length;l++)s[l]=DM(t,n[l]);return s}else{var f=Tf(t.length,n);return LM(t,f,0,t.length-1),DM(t,n)}}function LM(i,n,t,s){n%1===0?h0(i,n,t,s):(n=Math.floor(n),h0(i,n,t,s),h0(i,n+1,n+1,s))}function FM(i,n){for(var t=[0],s=0;s<n.length;s++)t.push(Tf(i.length,n[s]));t.push(i.length-1),t.sort(Xp);for(var l=[0,t.length-1];l.length;){var f=Math.ceil(l.pop()),d=Math.floor(l.pop());if(!(f-d<=1)){var m=Math.floor((d+f)/2);LM(i,t[m],Math.floor(t[d]),Math.ceil(t[f])),l.push(d,m,m,f)}}}function Xp(i,n){return i-n}function Tf(i,n){var t=i*n;return n===1?i-1:n===0?0:t%1!==0?Math.ceil(t)-1:i%2===0?t-.5:t}var Dd=function(i){return{low:(0,E.VV)(i),high:(0,E.Fp)(i),q1:ug(i,.25),q3:ug(i,.75),median:ug(i,[.5]),minMax:[(0,E.VV)(i),(0,E.Fp)(i)],quantile:[ug(i,.25),ug(i,.75)]}},BM=function(i,n){var t=kM().create(i,n);return{violinSize:t.map(function(s){return s.y}),violinY:t.map(function(s){return s.x})}},NM=function(i){var n=i.xField,t=i.yField,s=i.seriesField,l=i.data,f=i.kde,d={min:f.min,max:f.max,size:f.sampleSize,width:f.width};if(!s){var m=(0,E.vM)(l,n);return Object.keys(m).map(function(P){var D=m[P],B=D.map(function(U){return U[t]});return(0,M.pi)((0,M.pi)({x:P},BM(B,d)),Dd(B))})}var x=[],T=(0,E.vM)(l,s);return Object.keys(T).forEach(function(P){var D=(0,E.vM)(T[P],n);return Object.keys(D).forEach(function(B){var U,Y=D[B],se=Y.map(function(xe){return xe[t]});x.push((0,M.pi)((0,M.pi)((U={x:B},U[s]=P,U),BM(se,d)),Dd(se)))})}),x},j1=["low","high","q1","q3","median"],W1=[{type:"dodge",marginRatio:1/32}];function zF(i){var n=i.chart,t=i.options;return n.data(NM(t)),i}function zM(i){var n=i.chart,t=i.options,s=t.seriesField,l=t.color,f=t.shape,d=f===void 0?"violin":f,m=t.violinStyle,x=t.tooltip,T=t.state,P=n.createView({id:H1});return WP({chart:P,options:{xField:Dh,yField:sg,seriesField:s||Dh,sizeField:f0,tooltip:(0,M.pi)({fields:j1},x),violin:{style:m,color:l,shape:d},state:T}}),P.geometries[0].adjust(W1),i}function UF(i){var n=i.chart,t=i.options,s=t.seriesField,l=t.color,f=t.tooltip,d=t.box;if(d===!1)return i;var m=n.createView({id:LF});mc({chart:m,options:{xField:Dh,yField:rE,seriesField:s||Dh,tooltip:(0,M.pi)({fields:j1},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:1,style:{lineWidth:0}}}}),m.geometries[0].adjust(W1);var x=n.createView({id:FF});mc({chart:x,options:{xField:Dh,yField:nE,seriesField:s||Dh,tooltip:(0,M.pi)({fields:j1},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:8,style:{fillOpacity:1}}}}),x.geometries[0].adjust(W1);var T=n.createView({id:BF});return Ih({chart:T,options:{xField:Dh,yField:iE,seriesField:s||Dh,tooltip:(0,M.pi)({fields:j1},f),state:typeof d=="object"?d.state:{},point:{color:l,size:1,style:{fill:"white",lineWidth:0}}}}),T.geometries[0].adjust(W1),x.axis(!1),m.axis(!1),T.axis(!1),T.legend(!1),m.legend(!1),x.legend(!1),i}function ZF(i){var n,t=i.chart,s=i.options,l=s.meta,f=s.xAxis,d=s.yAxis,m={},x=mn(m,l,(n={},n[Dh]=(0,M.pi)((0,M.pi)({sync:!0},ls(f,wf)),{type:"cat"}),n[sg]=(0,M.pi)({sync:!0},ls(d,wf)),n[rE]=(0,M.pi)({sync:sg},ls(d,wf)),n[nE]=(0,M.pi)({sync:sg},ls(d,wf)),n[iE]=(0,M.pi)({sync:sg},ls(d,wf)),n));return t.scale(x),i}function UM(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=So(n,H1);return s===!1?f.axis(Dh,!1):f.axis(Dh,s),l===!1?f.axis(sg,!1):f.axis(sg,l),n.axis(!1),i}function ZM(i){var n=i.chart,t=i.options,s=t.legend,l=t.seriesField,f=t.shape;if(s===!1)n.legend(!1);else{var d=l||Dh,m=(0,E.CE)(s,["selected"]);(!f||!f.startsWith("hollow"))&&((0,E.U2)(m,["marker","style","lineWidth"])||(0,E.t8)(m,["marker","style","lineWidth"],0)),n.legend(d,m),(0,E.U2)(s,"selected")&&(0,E.S6)(n.views,function(x){return x.legend(d,s)})}return i}function VF(i){var n=i.chart,t=So(n,H1);return Eu()((0,M.pi)((0,M.pi)({},i),{chart:t})),i}function HF(i){var n=i.chart,t=i.options,s=t.animation;return(0,E.S6)(n.views,function(l){cy(l,s)}),i}function VM(i){return Ua(Go,zF,zM,UF,ZF,Dl,UM,ZM,cu,VF,HF)(i)}var L4=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="violin",t}return n.getDefaultOptions=function(){return OM},n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(NM(this.options))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return VM},n}(ro),Qf="$$yField$$",im="$$diffField$$",aE="$$absoluteField$$",oE="$$isTotal$$",jF={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function WF(i){for(var n=[],t=0;t<i.length;t++){var s=i[t];if(s){var l=t===0?"M":"L";n.push([l,s.x,s.y])}}var f=i[0];return n.push(["L",f.x,f.y]),n.push(["z"]),n}function GF(i){return mn({},i.defaultStyle,i.style,{fill:i.color})}mi("interval","waterfall",{draw:function(i,n){var t=i.customInfo,s=i.points,l=i.nextPoints,f=n.addGroup(),d=this.parsePath(WF(s)),m=GF(i);f.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},m),{path:d})});var x=(0,E.U2)(t,"leaderLine");if(x&&l){var T=[["M",s[2].x,s[2].y],["L",l[0].x,l[0].y]];s[2].y===l[1].y&&(T[1]=["L",l[1].x,l[1].y]),T=this.parsePath(T),f.addShape("path",{attrs:(0,M.pi)({path:T},x.style||{})})}return f}});function $F(i,n,t,s,l){var f,d=[];if((0,E.u4)(i,function(x,T){var P;Jv(Rh.WARN,(0,E.hj)(T[t]),"".concat(T[t]," is not a valid number"));var D=(0,E.o8)(T[t])?null:T[t];return d.push((0,M.pi)((0,M.pi)({},T),(P={},P[s]=[x,x+D],P))),x+D},0),d.length&&l){var m=(0,E.U2)(d,[[i.length-1],s,[1]]);d.push((f={},f[n]=l.label,f[t]=m,f[s]=[0,m],f))}return d}function HM(i,n,t,s){var l=$F(i,n,t,Qf,s);return l.map(function(f,d){var m;return(0,E.Kn)(f)?(0,M.pi)((0,M.pi)({},f),(m={},m[aE]=f[Qf][1],m[im]=f[Qf][1]-f[Qf][0],m[oE]=d===i.length,m)):f})}function jM(i){var n=i.options,t=n.locale,s=n.total,l=X_(t).get(["waterfall","total"]);return s&&typeof s.label!="string"&&l&&(i.options.total.label=l),i}function WM(i){var n=i.chart,t=i.options,s=t.data,l=t.xField,f=t.yField,d=t.total,m=t.leaderLine,x=t.columnWidthRatio,T=t.waterfallStyle,P=t.risingFill,D=t.fallingFill,B=t.color,U=t.shape,Y=t.customInfo;n.data(HM(s,l,f,d));var se=B||function(vt){return(0,E.U2)(vt,[oE])?(0,E.U2)(d,["style","fill"],""):(0,E.U2)(vt,[Qf,1])-(0,E.U2)(vt,[Qf,0])>0?P:D},xe=mn({},i,{options:{xField:l,yField:Qf,seriesField:l,rawFields:[f,im,oE,Qf],widthRatio:x,interval:{style:T,shape:U||"waterfall",color:se}}}),Ee=mc(xe).ext,rt=Ee.geometry;return rt.customInfo((0,M.pi)((0,M.pi)({},Y),{leaderLine:m})),i}function XF(i){var n,t,s=i.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.meta,T=mn({},{alias:m},(0,E.U2)(x,m));return Ua(Vu((n={},n[d]=l,n[m]=f,n[Qf]=f,n),mn({},x,(t={},t[Qf]=T,t[im]=T,t[aE]=T,t))))(i)}function YF(i){var n=i.chart,t=i.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?(n.axis(d,!1),n.axis(Qf,!1)):(n.axis(d,l),n.axis(Qf,l)),i}function KF(i){var n=i.chart,t=i.options,s=t.legend,l=t.total,f=t.risingFill,d=t.fallingFill,m=t.locale,x=X_(m);if(s===!1)n.legend(!1);else{var T=[{name:x.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:f}}},{name:x.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:d}}}];l&&T.push({name:l.label||"",value:"total",marker:{symbol:"square",style:mn({},{r:5},(0,E.U2)(l,"style"))}}),n.legend(mn({},{custom:!0,position:"top",items:T},s)),n.removeInteraction("legend-filter")}return i}function GM(i){var n=i.chart,t=i.options,s=t.label,l=t.labelMode,f=t.xField,d=_a(n,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:l==="absolute"?[aE,f]:[im,f],callback:m,cfg:Jl(x)})}return i}function $M(i){var n=i.chart,t=i.options,s=t.tooltip,l=t.xField,f=t.yField;if(s!==!1){n.tooltip((0,M.pi)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[f]},s));var d=n.geometries[0];s!=null&&s.formatter?d.tooltip("".concat(l,"*").concat(f),s.formatter):d.tooltip(f)}else n.tooltip(!1);return i}function XM(i){return Ua(jM,Go,WM,XF,YF,KF,$M,GM,Hg,cu,ps,Eu())(i)}var o8=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="waterfall",t}return n.getDefaultOptions=function(){return jF},n.prototype.changeData=function(t){var s=this.options,l=s.xField,f=s.yField,d=s.total;this.updateOption({data:t}),this.chart.changeData(HM(t,l,f,d))},n.prototype.getSchemaAdaptor=function(){return XM},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(ro),YM="color",qF=mn({},ro.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",YM],formatter:function(i){return{name:i.text,value:i.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),QF={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function JF(i,n){return n=(0,E.f0)({},QF,n),KM(i,n)}function KM(i,n){var t=Ou();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(x){(0,E.UM)(n[x])||t[x](n[x])}),t.words(i),n.imageMask&&t.createMask(n.imageMask);var s=t.start(),l=s._tags;l.forEach(function(x){x.x+=n.size[0]/2,x.y+=n.size[1]/2});var f=n.size,d=f[0],m=f[1];return l.push({text:"",value:0,x:0,y:0,opacity:0}),l.push({text:"",value:0,x:d,y:m,opacity:0}),l}var sE=Math.PI/180,zy=64,G1=2048;function e5(i){return i.text}function qM(){return"serif"}function $1(){return"normal"}function uE(i){return i.value}function Cv(){return~~(Math.random()*2)*90}function cp(){return 1}function lE(i,n,t,s){if(!n.sprite){var l=i.context,f=i.ratio;l.clearRect(0,0,(zy<<5)/f,G1/f);var d=0,m=0,x=0,T=t.length;for(--s;++s<T;){n=t[s],l.save(),l.font=n.style+" "+n.weight+" "+~~((n.size+1)/f)+"px "+n.font;var P=l.measureText(n.text+"m").width*f,D=n.size<<1;if(n.rotate){var B=Math.sin(n.rotate*sE),U=Math.cos(n.rotate*sE),Y=P*U,se=P*B,xe=D*U,Ee=D*B;P=Math.max(Math.abs(Y+Ee),Math.abs(Y-Ee))+31>>5<<5,D=~~Math.max(Math.abs(se+xe),Math.abs(se-xe))}else P=P+31>>5<<5;if(D>x&&(x=D),d+P>=zy<<5&&(d=0,m+=x,x=0),m+D>=G1)break;l.translate((d+(P>>1))/f,(m+(D>>1))/f),n.rotate&&l.rotate(n.rotate*sE),l.fillText(n.text,0,0),n.padding&&(l.lineWidth=2*n.padding,l.strokeText(n.text,0,0)),l.restore(),n.width=P,n.height=D,n.xoff=d,n.yoff=m,n.x1=P>>1,n.y1=D>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,d+=P}for(var rt=l.getImageData(0,0,(zy<<5)/f,G1/f).data,vt=[];--s>=0;)if(n=t[s],!!n.hasText){for(var P=n.width,xt=P>>5,D=n.y1-n.y0,Bt=0;Bt<D*xt;Bt++)vt[Bt]=0;if(d=n.xoff,d==null)return;m=n.yoff;for(var _r=0,Or=-1,Wr=0;Wr<D;Wr++){for(var Bt=0;Bt<P;Bt++){var gn=xt*Wr+(Bt>>5),$r=rt[(m+Wr)*(zy<<5)+(d+Bt)<<2]?1<<31-Bt%32:0;vt[gn]|=$r,_r|=$r}_r?Or=Wr:(n.y0++,D--,Wr--,m++)}n.y1=n.y0+Or,n.sprite=vt.slice(0,(n.y1-n.y0)*xt)}}}function cE(i,n,t){t>>=5;for(var s=i.sprite,l=i.width>>5,f=i.x-(l<<4),d=f&127,m=32-d,x=i.y1-i.y0,T=(i.y+i.y0)*t+(f>>5),P,D=0;D<x;D++){P=0;for(var B=0;B<=l;B++)if((P<<m|(B<l?(P=s[D*l+B])>>>d:0))&n[T+B])return!0;T+=t}return!1}function QM(i,n){var t=i[0],s=i[1];n.x+n.x0<t.x&&(t.x=n.x+n.x0),n.y+n.y0<t.y&&(t.y=n.y+n.y0),n.x+n.x1>s.x&&(s.x=n.x+n.x1),n.y+n.y1>s.y&&(s.y=n.y+n.y1)}function t5(i,n){return i.x+i.x1>n[0].x&&i.x+i.x0<n[1].x&&i.y+i.y1>n[0].y&&i.y+i.y0<n[1].y}function Tv(i){var n=i[0]/i[1];return function(t){return[n*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function r5(i){var n=4,t=n*i[0]/i[1],s=0,l=0;return function(f){var d=f<0?-1:1;switch(Math.sqrt(1+4*d*f)-d&3){case 0:s+=t;break;case 1:l+=n;break;case 2:s-=t;break;default:l-=n;break}return[s,l]}}function JM(i){for(var n=[],t=-1;++t<i;)n[t]=0;return n}function eR(){return document.createElement("canvas")}function Ld(i){return(0,E.mf)(i)?i:function(){return i}}var tR={archimedean:Tv,rectangular:r5};function Ou(){var i=[256,256],n=qM,t=uE,s=$1,l=Cv,f=cp,d=Tv,m=Math.random,x=[],T=1/0,P=e5,D=$1,B=eR,U={};U.start=function(){var xe=i[0],Ee=i[1],rt=Y(B()),vt=U.board?U.board:JM((i[0]>>5)*i[1]),xt=x.length,Bt=[],_r=x.map(function($r,zn,li){return $r.text=P.call(this,$r,zn,li),$r.font=n.call(this,$r,zn,li),$r.style=D.call(this,$r,zn,li),$r.weight=s.call(this,$r,zn,li),$r.rotate=l.call(this,$r,zn,li),$r.size=~~t.call(this,$r,zn,li),$r.padding=f.call(this,$r,zn,li),$r}).sort(function($r,zn){return zn.size-$r.size}),Or=-1,Wr=U.board?[{x:0,y:0},{x:xe,y:Ee}]:null;gn();function gn(){for(var $r=Date.now();Date.now()-$r<T&&++Or<xt;){var zn=_r[Or];zn.x=xe*(m()+.5)>>1,zn.y=Ee*(m()+.5)>>1,lE(rt,zn,_r,Or),zn.hasText&&se(vt,zn,Wr)&&(Bt.push(zn),Wr?U.hasImage||QM(Wr,zn):Wr=[{x:zn.x+zn.x0,y:zn.y+zn.y0},{x:zn.x+zn.x1,y:zn.y+zn.y1}],zn.x-=i[0]>>1,zn.y-=i[1]>>1)}U._tags=Bt,U._bounds=Wr}return U};function Y(xe){xe.width=xe.height=1;var Ee=Math.sqrt(xe.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);xe.width=(zy<<5)/Ee,xe.height=G1/Ee;var rt=xe.getContext("2d",{willReadFrequently:!0});return rt.fillStyle=rt.strokeStyle="red",rt.textAlign="center",{context:rt,ratio:Ee}}function se(xe,Ee,rt){for(var vt=Ee.x,xt=Ee.y,Bt=Math.sqrt(i[0]*i[0]+i[1]*i[1]),_r=d(i),Or=m()<.5?1:-1,Wr,gn=-Or,$r,zn;(Wr=_r(gn+=Or))&&($r=~~Wr[0],zn=~~Wr[1],!(Math.min(Math.abs($r),Math.abs(zn))>=Bt));)if(Ee.x=vt+$r,Ee.y=xt+zn,!(Ee.x+Ee.x0<0||Ee.y+Ee.y0<0||Ee.x+Ee.x1>i[0]||Ee.y+Ee.y1>i[1])&&(!rt||!cE(Ee,xe,i[0]))&&(!rt||t5(Ee,rt))){for(var li=Ee.sprite,zi=Ee.width>>5,ia=i[0]>>5,qa=Ee.x-(zi<<4),Hn=qa&127,Di=32-Hn,Zi=Ee.y1-Ee.y0,yi=void 0,Vi=(Ee.y+Ee.y0)*ia+(qa>>5),Pa=0;Pa<Zi;Pa++){yi=0;for(var so=0;so<=zi;so++)xe[Vi+so]|=yi<<Di|(so<zi?(yi=li[Pa*zi+so])>>>Hn:0);Vi+=ia}return delete Ee.sprite,!0}return!1}return U.createMask=function(xe){var Ee=document.createElement("canvas"),rt=i[0],vt=i[1];if(!(!rt||!vt)){var xt=rt>>5,Bt=JM((rt>>5)*vt);Ee.width=rt,Ee.height=vt;var _r=Ee.getContext("2d");_r.drawImage(xe,0,0,xe.width,xe.height,0,0,rt,vt);for(var Or=_r.getImageData(0,0,rt,vt).data,Wr=0;Wr<vt;Wr++)for(var gn=0;gn<rt;gn++){var $r=xt*Wr+(gn>>5),zn=Wr*rt+gn<<2,li=Or[zn]>=250&&Or[zn+1]>=250&&Or[zn+2]>=250,zi=li?1<<31-gn%32:0;Bt[$r]|=zi}U.board=Bt,U.hasImage=!0}},U.timeInterval=function(xe){T=xe==null?1/0:xe},U.words=function(xe){x=xe},U.size=function(xe){i=[+xe[0],+xe[1]]},U.font=function(xe){n=Ld(xe)},U.fontWeight=function(xe){s=Ld(xe)},U.rotate=function(xe){l=Ld(xe)},U.spiral=function(xe){d=tR[xe]||xe},U.fontSize=function(xe){t=Ld(xe)},U.padding=function(xe){f=Ld(xe)},U.random=function(xe){m=Ld(xe)},U}function Uy(i){var n=i.options,t=i.chart,s=t,l=s.width,f=s.height,d=s.padding,m=s.appendPadding,x=s.ele,T=n.data,P=n.imageMask,D=n.wordField,B=n.weightField,U=n.colorField,Y=n.wordStyle,se=n.timeInterval,xe=n.random,Ee=n.spiral,rt=n.autoFit,vt=rt===void 0?!0:rt,xt=n.placementStrategy;if(!T||!T.length)return[];var Bt=Y.fontFamily,_r=Y.fontWeight,Or=Y.padding,Wr=Y.fontSize,gn=N4(T,B),$r=[Z4(gn),V4(gn)],zn=T.map(function(ia){return{text:ia[D],value:ia[B],color:ia[U],datum:ia}}),li={imageMask:P,font:Bt,fontSize:B4(Wr,$r),fontWeight:_r,size:ns({width:l,height:f,padding:d,appendPadding:m,autoFit:vt,container:x}),padding:Or,timeInterval:se,random:xe,spiral:Ee,rotate:z4(n)};if((0,E.mf)(xt)){var zi=zn.map(function(ia,qa,Hn){return(0,M.pi)((0,M.pi)((0,M.pi)({},ia),{hasText:!!ia.text,font:Ld(li.font)(ia,qa,Hn),weight:Ld(li.fontWeight)(ia,qa,Hn),rotate:Ld(li.rotate)(ia,qa,Hn),size:Ld(li.fontSize)(ia,qa,Hn),style:"normal"}),xt.call(t,ia,qa,Hn))});return zi.push({text:"",value:0,x:0,y:0,opacity:0}),zi.push({text:"",value:0,x:li.size[0],y:li.size[1],opacity:0}),zi}return JF(zn,li)}function ns(i){var n=i.width,t=i.height,s=i.container,l=i.autoFit,f=i.padding,d=i.appendPadding;if(l){var m=fC(s);n=m.width,t=m.height}n=n||400,t=t||400;var x=n5({padding:f,appendPadding:d}),T=x[0],P=x[1],D=x[2],B=x[3],U=[n-(B+P),t-(T+D)];return U}function n5(i){var n=dv(i.padding),t=dv(i.appendPadding),s=n[0]+t[0],l=n[1]+t[1],f=n[2]+t[2],d=n[3]+t[3];return[s,l,f,d]}function F4(i){return new Promise(function(n,t){if(i instanceof HTMLImageElement){n(i);return}if((0,E.HD)(i)){var s=new Image;s.crossOrigin="anonymous",s.src=i,s.onload=function(){n(s)},s.onerror=function(){Jv(Rh.ERROR,!1,"image %s load failed !!!",i),t()};return}Jv(Rh.WARN,i===void 0,"The type of imageMask option must be String or HTMLImageElement."),t()})}function B4(i,n){if((0,E.mf)(i))return i;if((0,E.kJ)(i)){var t=i[0],s=i[1];if(!n)return function(){return(s+t)/2};var l=n[0],f=n[1];return f===l?function(){return(s+t)/2}:function(m){var x=m.value;return(s-t)/(f-l)*(x-l)+t}}return function(){return i}}function N4(i,n){return i.map(function(t){return t[n]}).filter(function(t){return typeof t=="number"&&!isNaN(t)})}function z4(i){var n=U4(i),t=n.rotation,s=n.rotationSteps;if(!(0,E.kJ)(t))return t;var l=t[0],f=t[1],d=s===1?0:(f-l)/(s-1);return function(){return f===l?f:Math.floor(Math.random()*s)*d}}function U4(i){var n=i.wordStyle.rotationSteps;return n<1&&(Jv(Rh.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),n=1),{rotation:i.wordStyle.rotation,rotationSteps:n}}function Z4(i){return Math.min.apply(Math,i)}function V4(i){return Math.max.apply(Math,i)}function H4(i){var n=i.chart,t=i.options,s=t.colorField,l=t.color,f=Uy(i);n.data(f);var d=mn({},i,{options:{xField:"x",yField:"y",seriesField:s&&YM,rawFields:(0,E.mf)(l)&&(0,M.ev)((0,M.ev)([],(0,E.U2)(t,"rawFields",[]),!0),["datum"],!1),point:{color:l,shape:"word-cloud"}}}),m=Ih(d).ext;return m.geometry.label(!1),n.coordinate().reflect("y"),n.axis(!1),i}function j4(i){return Ua(Vu({x:{nice:!1},y:{nice:!1}}))(i)}function W4(i){var n=i.chart,t=i.options,s=t.legend,l=t.colorField;return s===!1?n.legend(!1):l&&n.legend(YM,s),i}function i5(i){Ua(H4,j4,Dl,W4,cu,ps,Go,Hg)(i)}mi("point","word-cloud",{draw:function(i,n){var t=i.x,s=i.y,l=n.addShape("text",{attrs:(0,M.pi)((0,M.pi)({},G4(i)),{x:t,y:s})}),f=i.data.rotate;return typeof f=="number"&&Ql.rotate(l,f*Math.PI/180),l}});function G4(i){return{fontSize:i.data.size,text:i.data.text,textAlign:"center",fontFamily:i.data.font,fontWeight:i.data.weight,fill:i.color||i.defaultStyle.stroke,textBaseline:"alphabetic"}}var s8=function(i){(0,M.ZT)(n,i);function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="word-cloud",t}return n.getDefaultOptions=function(){return qF},n.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(Uy({chart:this.chart,options:this.options}))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){var t=this;return new Promise(function(s){var l=t.options.imageMask;if(!l){i.prototype.render.call(t),s();return}var f=function(d){t.options=(0,M.pi)((0,M.pi)({},t.options),{imageMask:d||null}),i.prototype.render.call(t),s()};F4(l).then(f).catch(f)})},n.prototype.getSchemaAdaptor=function(){return i5},n.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){i.prototype.triggerResize.call(t)}))},n}(ro),u8=function(i){(0,M.ZT)(n,i);function n(t,s,l,f){var d=i.call(this,t,mn({},f,s))||this;return d.type="g2-plot",d.defaultOptions=f,d.adaptor=l,d}return n.prototype.getDefaultOptions=function(){return this.defaultOptions},n.prototype.getSchemaAdaptor=function(){return this.adaptor},n}(ro),l8="2.4.31";_C("en-US",VP),_C("zh-CN",HP);var c8={scale:Vu,legend:Vg,tooltip:Dl,annotation:Eu,interaction:cu,theme:Go,animation:ps}},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(ct){try{let te=function(){j||(j=!0,w())},we=function(){try{W.documentElement.doScroll("left")}catch(fe){return void setTimeout(we,50)}te()};var Q=te,ie=we,k=(k=document.getElementsByTagName("script"))[k.length-1],N=k.getAttribute("data-injectcss"),k=k.getAttribute("data-disable-injectsvg");if(!k){var $,K,w,W,j,q=function(ce,J){J.parentNode.insertBefore(ce,J)};if(N&&!ct.__iconfont__svg__cssinject__){ct.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(fe){console&&console.log(fe)}}$=function(){var ce,J=document.createElement("div");J.innerHTML=ct._iconfont_svg_string_3580659,(J=J.getElementsByTagName("svg")[0])&&(J.setAttribute("aria-hidden","true"),J.style.position="absolute",J.style.width=0,J.style.height=0,J.style.overflow="hidden",J=J,(ce=document.body).firstChild?q(J,ce.firstChild):ce.appendChild(J))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout($,0):(K=function(){document.removeEventListener("DOMContentLoaded",K,!1),$()},document.addEventListener("DOMContentLoaded",K,!1)):document.attachEvent&&(w=$,W=ct.document,j=!1,we(),W.onreadystatechange=function(){W.readyState=="complete"&&(W.onreadystatechange=null,te())})}}catch(te){}}(window)},36556:function(ct){(function(N,k){ct.exports=k()})(this,function(){"use strict";var N=function(nt){return nt instanceof Uint8Array||nt instanceof Uint16Array||nt instanceof Uint32Array||nt instanceof Int8Array||nt instanceof Int16Array||nt instanceof Int32Array||nt instanceof Float32Array||nt instanceof Float64Array||nt instanceof Uint8ClampedArray},k=function(nt,Kt){for(var br=Object.keys(Kt),dn=0;dn<br.length;++dn)nt[br[dn]]=Kt[br[dn]];return nt},$=`
`;function K(nt){return typeof atob!="undefined"?atob(nt):"base64:"+nt}function w(nt){var Kt=new Error("(regl) "+nt);throw console.error(Kt),Kt}function W(nt,Kt){nt||w(Kt)}function j(nt){return nt?": "+nt:""}function q(nt,Kt,br){nt in Kt||w("unknown parameter ("+nt+")"+j(br)+". possible values: "+Object.keys(Kt).join())}function Q(nt,Kt){N(nt)||w("invalid parameter type"+j(Kt)+". must be a typed array")}function ie(nt,Kt){switch(Kt){case"number":return typeof nt=="number";case"object":return typeof nt=="object";case"string":return typeof nt=="string";case"boolean":return typeof nt=="boolean";case"function":return typeof nt=="function";case"undefined":return typeof nt=="undefined";case"symbol":return typeof nt=="symbol"}}function te(nt,Kt,br){ie(nt,Kt)||w("invalid parameter type"+j(br)+". expected "+Kt+", got "+typeof nt)}function we(nt,Kt){nt>=0&&(nt|0)===nt||w("invalid parameter type, ("+nt+")"+j(Kt)+". must be a nonnegative integer")}function fe(nt,Kt,br){Kt.indexOf(nt)<0&&w("invalid value"+j(br)+". must be one of: "+Kt)}var ce=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function J(nt){Object.keys(nt).forEach(function(Kt){ce.indexOf(Kt)<0&&w('invalid regl constructor argument "'+Kt+'". must be one of '+ce)})}function M(nt,Kt){for(nt=nt+"";nt.length<Kt;)nt=" "+nt;return nt}function E(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ge(nt,Kt){this.number=nt,this.line=Kt,this.errors=[]}function be(nt,Kt,br){this.file=nt,this.line=Kt,this.message=br}function ze(){var nt=new Error,Kt=(nt.stack||nt).toString(),br=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Kt);if(br)return br[1];var dn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Kt);return dn?dn[1]:"unknown"}function Be(){var nt=new Error,Kt=(nt.stack||nt).toString(),br=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Kt);if(br)return br[1];var dn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Kt);return dn?dn[1]:"unknown"}function Ue(nt,Kt){var br=nt.split(`
`),dn=1,kn=0,fn={unknown:new E,0:new E};fn.unknown.name=fn[0].name=Kt||ze(),fn.unknown.lines.push(new ge(0,""));for(var sn=0;sn<br.length;++sn){var ti=br[sn],Vn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ti);if(Vn)switch(Vn[1]){case"line":var hi=/(\d+)(\s+\d+)?/.exec(Vn[2]);hi&&(dn=hi[1]|0,hi[2]&&(kn=hi[2]|0,kn in fn||(fn[kn]=new E)));break;case"define":var ni=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Vn[2]);ni&&(fn[kn].name=ni[1]?K(ni[2]):ni[2]);break}fn[kn].lines.push(new ge(dn++,ti))}return Object.keys(fn).forEach(function(ui){var xi=fn[ui];xi.lines.forEach(function(In){xi.index[In.number]=In})}),fn}function it(nt){var Kt=[];return nt.split(`
`).forEach(function(br){if(!(br.length<5)){var dn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(br);dn?Kt.push(new be(dn[1]|0,dn[2]|0,dn[3].trim())):br.length>0&&Kt.push(new be("unknown",0,br))}}),Kt}function ht(nt,Kt){Kt.forEach(function(br){var dn=nt[br.file];if(dn){var kn=dn.index[br.line];if(kn){kn.errors.push(br),dn.hasErrors=!0;return}}nt.unknown.hasErrors=!0,nt.unknown.lines[0].errors.push(br)})}function Le(nt,Kt,br,dn,kn){if(!nt.getShaderParameter(Kt,nt.COMPILE_STATUS)){var fn=nt.getShaderInfoLog(Kt),sn=dn===nt.FRAGMENT_SHADER?"fragment":"vertex";Qe(br,"string",sn+" shader source must be a string",kn);var ti=Ue(br,kn),Vn=it(fn);ht(ti,Vn),Object.keys(ti).forEach(function(hi){var ni=ti[hi];if(!ni.hasErrors)return;var ui=[""],xi=[""];function In(di,qr){ui.push(di),xi.push(qr||"")}In("file number "+hi+": "+ni.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ni.lines.forEach(function(di){if(di.errors.length>0){In(M(di.number,4)+"|  ","background-color:yellow; font-weight:bold"),In(di.line+$,"color:red; background-color:yellow; font-weight:bold");var qr=0;di.errors.forEach(function(En){var ii=En.message,Ci=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ii);if(Ci){var Kr=Ci[1];switch(ii=Ci[2],Kr){case"assign":Kr="=";break}qr=Math.max(di.line.indexOf(Kr,qr),0)}else qr=0;In(M("| ",6)),In(M("^^^",qr+3)+$,"font-weight:bold"),In(M("| ",6)),In(ii+$,"font-weight:bold")}),In(M("| ",6)+$)}else In(M(di.number,4)+"|  "),In(di.line+$,"color:red")}),typeof document!="undefined"&&!window.chrome?(xi[0]=ui.join("%c"),console.log.apply(console,xi)):console.log(ui.join(""))}),W.raise("Error compiling "+sn+" shader, "+ti[0].name)}}function Se(nt,Kt,br,dn,kn){if(!nt.getProgramParameter(Kt,nt.LINK_STATUS)){var fn=nt.getProgramInfoLog(Kt),sn=Ue(br,kn),ti=Ue(dn,kn),Vn='Error linking program with vertex shader, "'+ti[0].name+'", and fragment shader "'+sn[0].name+'"';typeof document!="undefined"?console.log("%c"+Vn+$+"%c"+fn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Vn+$+fn),W.raise(Vn)}}function ye(nt){nt._commandRef=ze()}function Ve(nt,Kt,br,dn){ye(nt);function kn(Vn){return Vn?dn.id(Vn):0}nt._fragId=kn(nt.static.frag),nt._vertId=kn(nt.static.vert);function fn(Vn,hi){Object.keys(hi).forEach(function(ni){Vn[dn.id(ni)]=!0})}var sn=nt._uniformSet={};fn(sn,Kt.static),fn(sn,Kt.dynamic);var ti=nt._attributeSet={};fn(ti,br.static),fn(ti,br.dynamic),nt._hasCount="count"in nt.static||"count"in nt.dynamic||"elements"in nt.static||"elements"in nt.dynamic}function je(nt,Kt){var br=Be();w(nt+" in command "+(Kt||ze())+(br==="unknown"?"":" called from "+br))}function Et(nt,Kt,br){nt||je(Kt,br||ze())}function Oe(nt,Kt,br,dn){nt in Kt||je("unknown parameter ("+nt+")"+j(br)+". possible values: "+Object.keys(Kt).join(),dn||ze())}function Qe(nt,Kt,br,dn){ie(nt,Kt)||je("invalid parameter type"+j(br)+". expected "+Kt+", got "+typeof nt,dn||ze())}function ne(nt){nt()}function We(nt,Kt,br){nt.texture?fe(nt.texture._texture.internalformat,Kt,"unsupported texture format for attachment"):fe(nt.renderbuffer._renderbuffer.format,br,"unsupported renderbuffer format for attachment")}var oe=33071,Fe=9728,st=9984,Ce=9985,De=9986,tt=9987,_e=5120,me=5121,Ge=5122,Ze=5123,pt=5124,Ht=5125,Je=5126,$e=32819,Te=32820,Ye=33635,ft=34042,ke=36193,Ne={};Ne[_e]=Ne[me]=1,Ne[Ge]=Ne[Ze]=Ne[ke]=Ne[Ye]=Ne[$e]=Ne[Te]=2,Ne[pt]=Ne[Ht]=Ne[Je]=Ne[ft]=4;function dt(nt,Kt){return nt===Te||nt===$e||nt===Ye?2:nt===ft?4:Ne[nt]*Kt}function Pt(nt){return!(nt&nt-1)&&!!nt}function rr(nt,Kt,br){var dn,kn=Kt.width,fn=Kt.height,sn=Kt.channels;W(kn>0&&kn<=br.maxTextureSize&&fn>0&&fn<=br.maxTextureSize,"invalid texture shape"),(nt.wrapS!==oe||nt.wrapT!==oe)&&W(Pt(kn)&&Pt(fn),"incompatible wrap mode for texture, both width and height must be power of 2"),Kt.mipmask===1?kn!==1&&fn!==1&&W(nt.minFilter!==st&&nt.minFilter!==De&&nt.minFilter!==Ce&&nt.minFilter!==tt,"min filter requires mipmap"):(W(Pt(kn)&&Pt(fn),"texture must be a square power of 2 to support mipmapping"),W(Kt.mipmask===(kn<<1)-1,"missing or incomplete mipmap data")),Kt.type===Je&&(br.extensions.indexOf("oes_texture_float_linear")<0&&W(nt.minFilter===Fe&&nt.magFilter===Fe,"filter not supported, must enable oes_texture_float_linear"),W(!nt.genMipmaps,"mipmap generation not supported with float textures"));var ti=Kt.images;for(dn=0;dn<16;++dn)if(ti[dn]){var Vn=kn>>dn,hi=fn>>dn;W(Kt.mipmask&1<<dn,"missing mipmap data");var ni=ti[dn];if(W(ni.width===Vn&&ni.height===hi,"invalid shape for mip images"),W(ni.format===Kt.format&&ni.internalformat===Kt.internalformat&&ni.type===Kt.type,"incompatible type for mip image"),!ni.compressed)if(ni.data){var ui=Math.ceil(dt(ni.type,sn)*Vn/ni.unpackAlignment)*ni.unpackAlignment;W(ni.data.byteLength===ui*hi,"invalid data for image, buffer size is inconsistent with image format")}else ni.element||ni.copy}else nt.genMipmaps||W((Kt.mipmask&1<<dn)===0,"extra mipmap data");Kt.compressed&&W(!nt.genMipmaps,"mipmap generation for compressed images not supported")}function xr(nt,Kt,br,dn){var kn=nt.width,fn=nt.height,sn=nt.channels;W(kn>0&&kn<=dn.maxTextureSize&&fn>0&&fn<=dn.maxTextureSize,"invalid texture shape"),W(kn===fn,"cube map must be square"),W(Kt.wrapS===oe&&Kt.wrapT===oe,"wrap mode not supported by cube map");for(var ti=0;ti<br.length;++ti){var Vn=br[ti];W(Vn.width===kn&&Vn.height===fn,"inconsistent cube map face shape"),Kt.genMipmaps&&(W(!Vn.compressed,"can not generate mipmap for compressed textures"),W(Vn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var hi=Vn.images,ni=0;ni<16;++ni){var ui=hi[ni];if(ui){var xi=kn>>ni,In=fn>>ni;W(Vn.mipmask&1<<ni,"missing mipmap data"),W(ui.width===xi&&ui.height===In,"invalid shape for mip images"),W(ui.format===nt.format&&ui.internalformat===nt.internalformat&&ui.type===nt.type,"incompatible type for mip image"),ui.compressed||(ui.data?W(ui.data.byteLength===xi*In*Math.max(dt(ui.type,sn),ui.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ui.element||ui.copy)}}}}var ut=k(W,{optional:ne,raise:w,commandRaise:je,command:Et,parameter:q,commandParameter:Oe,constructor:J,type:te,commandType:Qe,isTypedArray:Q,nni:we,oneOf:fe,shaderError:Le,linkError:Se,callSite:Be,saveCommandRef:ye,saveDrawInfo:Ve,framebufferFormat:We,guessCommand:ze,texture2D:rr,textureCube:xr}),nn=0,Gr=0;function Xr(nt,Kt){this.id=nn++,this.type=nt,this.data=Kt}function Nt(nt){return nt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Yt(nt){if(nt.length===0)return[];var Kt=nt.charAt(0),br=nt.charAt(nt.length-1);if(nt.length>1&&Kt===br&&(Kt==='"'||Kt==="'"))return['"'+Nt(nt.substr(1,nt.length-2))+'"'];var dn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(nt);if(dn)return Yt(nt.substr(0,dn.index)).concat(Yt(dn[1])).concat(Yt(nt.substr(dn.index+dn[0].length)));var kn=nt.split(".");if(kn.length===1)return['"'+Nt(nt)+'"'];for(var fn=[],sn=0;sn<kn.length;++sn)fn=fn.concat(Yt(kn[sn]));return fn}function sr(nt){return"["+Yt(nt).join("][")+"]"}function Dt(nt,Kt){return new Xr(nt,sr(Kt+""))}function Qt(nt){return typeof nt=="function"&&!nt._reglType||nt instanceof Xr}function Sr(nt,Kt){return typeof nt=="function"?new Xr(Gr,nt):nt}var Er={DynamicVariable:Xr,define:Dt,isDynamic:Qt,unbox:Sr,accessor:sr},Fr={next:typeof requestAnimationFrame=="function"?function(nt){return requestAnimationFrame(nt)}:function(nt){return setTimeout(nt,16)},cancel:typeof cancelAnimationFrame=="function"?function(nt){return cancelAnimationFrame(nt)}:clearTimeout},zr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function le(){var nt={"":0},Kt=[""];return{id:function(br){var dn=nt[br];return dn||(dn=nt[br]=Kt.length,Kt.push(br),dn)},str:function(br){return Kt[br]}}}function H(nt,Kt,br){var dn=document.createElement("canvas");k(dn.style,{border:0,margin:0,padding:0,top:0,left:0}),nt.appendChild(dn),nt===document.body&&(dn.style.position="absolute",k(nt.style,{margin:0,padding:0}));function kn(){var ti=window.innerWidth,Vn=window.innerHeight;if(nt!==document.body){var hi=nt.getBoundingClientRect();ti=hi.right-hi.left,Vn=hi.bottom-hi.top}dn.width=br*ti,dn.height=br*Vn,k(dn.style,{width:ti+"px",height:Vn+"px"})}var fn;nt!==document.body&&typeof ResizeObserver=="function"?(fn=new ResizeObserver(function(){setTimeout(kn)}),fn.observe(nt)):window.addEventListener("resize",kn,!1);function sn(){fn?fn.disconnect():window.removeEventListener("resize",kn),nt.removeChild(dn)}return kn(),{canvas:dn,onDestroy:sn}}function re(nt,Kt){function br(dn){try{return nt.getContext(dn,Kt)}catch(kn){return null}}return br("webgl")||br("experimental-webgl")||br("webgl-experimental")}function Re(nt){return typeof nt.nodeName=="string"&&typeof nt.appendChild=="function"&&typeof nt.getBoundingClientRect=="function"}function Ke(nt){return typeof nt.drawArrays=="function"||typeof nt.drawElements=="function"}function Tt(nt){return typeof nt=="string"?nt.split():(ut(Array.isArray(nt),"invalid extension array"),nt)}function or(nt){return typeof nt=="string"?(ut(typeof document!="undefined","not supported outside of DOM"),document.querySelector(nt)):nt}function jt(nt){var Kt=nt||{},br,dn,kn,fn,sn={},ti=[],Vn=[],hi=typeof window=="undefined"?1:window.devicePixelRatio,ni=!1,ui=function(di){di&&ut.raise(di)},xi=function(){};if(typeof Kt=="string"?(ut(typeof document!="undefined","selector queries only supported in DOM enviroments"),br=document.querySelector(Kt),ut(br,"invalid query string for element")):typeof Kt=="object"?Re(Kt)?br=Kt:Ke(Kt)?(fn=Kt,kn=fn.canvas):(ut.constructor(Kt),"gl"in Kt?fn=Kt.gl:"canvas"in Kt?kn=or(Kt.canvas):"container"in Kt&&(dn=or(Kt.container)),"attributes"in Kt&&(sn=Kt.attributes,ut.type(sn,"object","invalid context attributes")),"extensions"in Kt&&(ti=Tt(Kt.extensions)),"optionalExtensions"in Kt&&(Vn=Tt(Kt.optionalExtensions)),"onDone"in Kt&&(ut.type(Kt.onDone,"function","invalid or missing onDone callback"),ui=Kt.onDone),"profile"in Kt&&(ni=!!Kt.profile),"pixelRatio"in Kt&&(hi=+Kt.pixelRatio,ut(hi>0,"invalid pixel ratio"))):ut.raise("invalid arguments to regl"),br&&(br.nodeName.toLowerCase()==="canvas"?kn=br:dn=br),!fn){if(!kn){ut(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var In=H(dn||document.body,ui,hi);if(!In)return null;kn=In.canvas,xi=In.onDestroy}sn.premultipliedAlpha===void 0&&(sn.premultipliedAlpha=!0),fn=re(kn,sn)}return fn?{gl:fn,canvas:kn,container:dn,extensions:ti,optionalExtensions:Vn,pixelRatio:hi,profile:ni,onDone:ui,onDestroy:xi}:(xi(),ui("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function wt(nt,Kt){var br={};function dn(sn){ut.type(sn,"string","extension name must be string");var ti=sn.toLowerCase(),Vn;try{Vn=br[ti]=nt.getExtension(ti)}catch(hi){}return!!Vn}for(var kn=0;kn<Kt.extensions.length;++kn){var fn=Kt.extensions[kn];if(!dn(fn))return Kt.onDestroy(),Kt.onDone('"'+fn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Kt.optionalExtensions.forEach(dn),{extensions:br,restore:function(){Object.keys(br).forEach(function(sn){if(br[sn]&&!dn(sn))throw new Error("(regl): error restoring extension "+sn)})}}}function It(nt,Kt){for(var br=Array(nt),dn=0;dn<nt;++dn)br[dn]=Kt(dn);return br}var de=5120,pe=5121,Me=5122,et=5123,St=5124,Gt=5125,gr=5126;function At(nt){for(var Kt=16;Kt<=1<<28;Kt*=16)if(nt<=Kt)return Kt;return 0}function ot(nt){var Kt,br;return Kt=(nt>65535)<<4,nt>>>=Kt,br=(nt>255)<<3,nt>>>=br,Kt|=br,br=(nt>15)<<2,nt>>>=br,Kt|=br,br=(nt>3)<<1,nt>>>=br,Kt|=br,Kt|nt>>1}function Ot(){var nt=It(8,function(){return[]});function Kt(fn){var sn=At(fn),ti=nt[ot(sn)>>2];return ti.length>0?ti.pop():new ArrayBuffer(sn)}function br(fn){nt[ot(fn.byteLength)>>2].push(fn)}function dn(fn,sn){var ti=null;switch(fn){case de:ti=new Int8Array(Kt(sn),0,sn);break;case pe:ti=new Uint8Array(Kt(sn),0,sn);break;case Me:ti=new Int16Array(Kt(2*sn),0,sn);break;case et:ti=new Uint16Array(Kt(2*sn),0,sn);break;case St:ti=new Int32Array(Kt(4*sn),0,sn);break;case Gt:ti=new Uint32Array(Kt(4*sn),0,sn);break;case gr:ti=new Float32Array(Kt(4*sn),0,sn);break;default:return null}return ti.length!==sn?ti.subarray(0,sn):ti}function kn(fn){br(fn.buffer)}return{alloc:Kt,free:br,allocType:dn,freeType:kn}}var yr=Ot();yr.zero=Ot();var kr=3408,Ft=3410,Mn=3411,qn=3412,ri=3413,un=3414,Yn=3415,jn=33901,Kn=33902,aa=3379,vi=3386,da=34921,Oa=36347,xa=36348,Va=35661,Sa=35660,gs=34930,io=36349,Oo=34076,ai=34024,_i=7936,ea=7937,Ha=7938,ms=35724,lo=34047,ko=36063,cr=34852,kt=3553,qt=34067,Ar=34069,tn=33984,Pn=6408,Bn=5126,Cn=5121,Ai=36160,Yi=36053,Wo=36064,os=16384,wu=function(nt,Kt){var br=1;Kt.ext_texture_filter_anisotropic&&(br=nt.getParameter(lo));var dn=1,kn=1;Kt.webgl_draw_buffers&&(dn=nt.getParameter(cr),kn=nt.getParameter(ko));var fn=!!Kt.oes_texture_float;if(fn){var sn=nt.createTexture();nt.bindTexture(kt,sn),nt.texImage2D(kt,0,Pn,1,1,0,Pn,Bn,null);var ti=nt.createFramebuffer();if(nt.bindFramebuffer(Ai,ti),nt.framebufferTexture2D(Ai,Wo,kt,sn,0),nt.bindTexture(kt,null),nt.checkFramebufferStatus(Ai)!==Yi)fn=!1;else{nt.viewport(0,0,1,1),nt.clearColor(1,0,0,1),nt.clear(os);var Vn=yr.allocType(Bn,4);nt.readPixels(0,0,1,1,Pn,Bn,Vn),nt.getError()?fn=!1:(nt.deleteFramebuffer(ti),nt.deleteTexture(sn),fn=Vn[0]===1),yr.freeType(Vn)}}var hi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ni=!0;if(!hi){var ui=nt.createTexture(),xi=yr.allocType(Cn,36);nt.activeTexture(tn),nt.bindTexture(qt,ui),nt.texImage2D(Ar,0,Pn,3,3,0,Pn,Cn,xi),yr.freeType(xi),nt.bindTexture(qt,null),nt.deleteTexture(ui),ni=!nt.getError()}return{colorBits:[nt.getParameter(Ft),nt.getParameter(Mn),nt.getParameter(qn),nt.getParameter(ri)],depthBits:nt.getParameter(un),stencilBits:nt.getParameter(Yn),subpixelBits:nt.getParameter(kr),extensions:Object.keys(Kt).filter(function(In){return!!Kt[In]}),maxAnisotropic:br,maxDrawbuffers:dn,maxColorAttachments:kn,pointSizeDims:nt.getParameter(jn),lineWidthDims:nt.getParameter(Kn),maxViewportDims:nt.getParameter(vi),maxCombinedTextureUnits:nt.getParameter(Va),maxCubeMapSize:nt.getParameter(Oo),maxRenderbufferSize:nt.getParameter(ai),maxTextureUnits:nt.getParameter(gs),maxTextureSize:nt.getParameter(aa),maxAttributes:nt.getParameter(da),maxVertexUniforms:nt.getParameter(Oa),maxVertexTextureUnits:nt.getParameter(Sa),maxVaryingVectors:nt.getParameter(xa),maxFragmentUniforms:nt.getParameter(io),glsl:nt.getParameter(ms),renderer:nt.getParameter(ea),vendor:nt.getParameter(_i),version:nt.getParameter(Ha),readFloat:fn,npotTextureCube:ni}};function Do(nt){return!!nt&&typeof nt=="object"&&Array.isArray(nt.shape)&&Array.isArray(nt.stride)&&typeof nt.offset=="number"&&nt.shape.length===nt.stride.length&&(Array.isArray(nt.data)||N(nt.data))}var Qa=function(nt){return Object.keys(nt).map(function(Kt){return nt[Kt]})},pu={shape:si,flatten:Tn};function Jo(nt,Kt,br){for(var dn=0;dn<Kt;++dn)br[dn]=nt[dn]}function Zt(nt,Kt,br,dn){for(var kn=0,fn=0;fn<Kt;++fn)for(var sn=nt[fn],ti=0;ti<br;++ti)dn[kn++]=sn[ti]}function Jt(nt,Kt,br,dn,kn,fn){for(var sn=fn,ti=0;ti<Kt;++ti)for(var Vn=nt[ti],hi=0;hi<br;++hi)for(var ni=Vn[hi],ui=0;ui<dn;++ui)kn[sn++]=ni[ui]}function Ur(nt,Kt,br,dn,kn){for(var fn=1,sn=br+1;sn<Kt.length;++sn)fn*=Kt[sn];var ti=Kt[br];if(Kt.length-br===4){var Vn=Kt[br+1],hi=Kt[br+2],ni=Kt[br+3];for(sn=0;sn<ti;++sn)Jt(nt[sn],Vn,hi,ni,dn,kn),kn+=fn}else for(sn=0;sn<ti;++sn)Ur(nt[sn],Kt,br+1,dn,kn),kn+=fn}function Tn(nt,Kt,br,dn){var kn=1;if(Kt.length)for(var fn=0;fn<Kt.length;++fn)kn*=Kt[fn];else kn=0;var sn=dn||yr.allocType(br,kn);switch(Kt.length){case 0:break;case 1:Jo(nt,Kt[0],sn);break;case 2:Zt(nt,Kt[0],Kt[1],sn);break;case 3:Jt(nt,Kt[0],Kt[1],Kt[2],sn,0);break;default:Ur(nt,Kt,0,sn,0)}return sn}function si(nt){for(var Kt=[],br=nt;br.length;br=br[0])Kt.push(br.length);return Kt}var Hi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ao=5120,Us=5122,wo=5124,Lo=5121,Hu=5123,cf=5125,rh=5126,nh=5126,du={int8:ao,int16:Us,int32:wo,uint8:Lo,uint16:Hu,uint32:cf,float:rh,float32:nh},ec=35048,ru=35040,Sl={dynamic:ec,stream:ru,static:35044},tc=pu.flatten,ho=pu.shape,Xl=35044,bs=35040,Ss=5121,xc=5126,bc=[];bc[5120]=1,bc[5122]=2,bc[5124]=4,bc[5121]=1,bc[5123]=2,bc[5125]=4,bc[5126]=4;function Rf(nt){return Hi[Object.prototype.toString.call(nt)]|0}function Ll(nt,Kt){for(var br=0;br<Kt.length;++br)nt[br]=Kt[br]}function Fl(nt,Kt,br,dn,kn,fn,sn){for(var ti=0,Vn=0;Vn<br;++Vn)for(var hi=0;hi<dn;++hi)nt[ti++]=Kt[kn*Vn+fn*hi+sn]}function Yl(nt,Kt,br,dn){var kn=0,fn={};function sn(qr){this.id=kn++,this.buffer=nt.createBuffer(),this.type=qr,this.usage=Xl,this.byteLength=0,this.dimension=1,this.dtype=Ss,this.persistentData=null,br.profile&&(this.stats={size:0})}sn.prototype.bind=function(){nt.bindBuffer(this.type,this.buffer)},sn.prototype.destroy=function(){xi(this)};var ti=[];function Vn(qr,En){var ii=ti.pop();return ii||(ii=new sn(qr)),ii.bind(),ui(ii,En,bs,0,1,!1),ii}function hi(qr){ti.push(qr)}function ni(qr,En,ii){qr.byteLength=En.byteLength,nt.bufferData(qr.type,En,ii)}function ui(qr,En,ii,Ci,Kr,Oi){var Qn;if(qr.usage=ii,Array.isArray(En)){if(qr.dtype=Ci||xc,En.length>0){var Mi;if(Array.isArray(En[0])){Qn=ho(En);for(var Un=1,bi=1;bi<Qn.length;++bi)Un*=Qn[bi];qr.dimension=Un,Mi=tc(En,Qn,qr.dtype),ni(qr,Mi,ii),Oi?qr.persistentData=Mi:yr.freeType(Mi)}else if(typeof En[0]=="number"){qr.dimension=Kr;var ua=yr.allocType(qr.dtype,En.length);Ll(ua,En),ni(qr,ua,ii),Oi?qr.persistentData=ua:yr.freeType(ua)}else N(En[0])?(qr.dimension=En[0].length,qr.dtype=Ci||Rf(En[0])||xc,Mi=tc(En,[En.length,En[0].length],qr.dtype),ni(qr,Mi,ii),Oi?qr.persistentData=Mi:yr.freeType(Mi)):ut.raise("invalid buffer data")}}else if(N(En))qr.dtype=Ci||Rf(En),qr.dimension=Kr,ni(qr,En,ii),Oi&&(qr.persistentData=new Uint8Array(new Uint8Array(En.buffer)));else if(Do(En)){Qn=En.shape;var Ra=En.stride,Ti=En.offset,Jn=0,Dn=0,ra=0,Ja=0;Qn.length===1?(Jn=Qn[0],Dn=1,ra=Ra[0],Ja=0):Qn.length===2?(Jn=Qn[0],Dn=Qn[1],ra=Ra[0],Ja=Ra[1]):ut.raise("invalid shape"),qr.dtype=Ci||Rf(En.data)||xc,qr.dimension=Dn;var Li=yr.allocType(qr.dtype,Jn*Dn);Fl(Li,En.data,Jn,Dn,ra,Ja,Ti),ni(qr,Li,ii),Oi?qr.persistentData=Li:yr.freeType(Li)}else En instanceof ArrayBuffer?(qr.dtype=Ss,qr.dimension=Kr,ni(qr,En,ii),Oi&&(qr.persistentData=new Uint8Array(new Uint8Array(En)))):ut.raise("invalid buffer data")}function xi(qr){Kt.bufferCount--,dn(qr);var En=qr.buffer;ut(En,"buffer must not be deleted already"),nt.deleteBuffer(En),qr.buffer=null,delete fn[qr.id]}function In(qr,En,ii,Ci){Kt.bufferCount++;var Kr=new sn(En);fn[Kr.id]=Kr;function Oi(Un){var bi=Xl,ua=null,Ra=0,Ti=0,Jn=1;return Array.isArray(Un)||N(Un)||Do(Un)||Un instanceof ArrayBuffer?ua=Un:typeof Un=="number"?Ra=Un|0:Un&&(ut.type(Un,"object","buffer arguments must be an object, a number or an array"),"data"in Un&&(ut(ua===null||Array.isArray(ua)||N(ua)||Do(ua),"invalid data for buffer"),ua=Un.data),"usage"in Un&&(ut.parameter(Un.usage,Sl,"invalid buffer usage"),bi=Sl[Un.usage]),"type"in Un&&(ut.parameter(Un.type,du,"invalid buffer type"),Ti=du[Un.type]),"dimension"in Un&&(ut.type(Un.dimension,"number","invalid dimension"),Jn=Un.dimension|0),"length"in Un&&(ut.nni(Ra,"buffer length must be a nonnegative integer"),Ra=Un.length|0)),Kr.bind(),ua?ui(Kr,ua,bi,Ti,Jn,Ci):(Ra&&nt.bufferData(Kr.type,Ra,bi),Kr.dtype=Ti||Ss,Kr.usage=bi,Kr.dimension=Jn,Kr.byteLength=Ra),br.profile&&(Kr.stats.size=Kr.byteLength*bc[Kr.dtype]),Oi}function Qn(Un,bi){ut(bi+Un.byteLength<=Kr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Un.byteLength+" starting from offset "+bi+" to a buffer of size "+Kr.byteLength),nt.bufferSubData(Kr.type,bi,Un)}function Mi(Un,bi){var ua=(bi||0)|0,Ra;if(Kr.bind(),N(Un)||Un instanceof ArrayBuffer)Qn(Un,ua);else if(Array.isArray(Un)){if(Un.length>0)if(typeof Un[0]=="number"){var Ti=yr.allocType(Kr.dtype,Un.length);Ll(Ti,Un),Qn(Ti,ua),yr.freeType(Ti)}else if(Array.isArray(Un[0])||N(Un[0])){Ra=ho(Un);var Jn=tc(Un,Ra,Kr.dtype);Qn(Jn,ua),yr.freeType(Jn)}else ut.raise("invalid buffer data")}else if(Do(Un)){Ra=Un.shape;var Dn=Un.stride,ra=0,Ja=0,Li=0,$a=0;Ra.length===1?(ra=Ra[0],Ja=1,Li=Dn[0],$a=0):Ra.length===2?(ra=Ra[0],Ja=Ra[1],Li=Dn[0],$a=Dn[1]):ut.raise("invalid shape");var ka=Array.isArray(Un.data)?Kr.dtype:Rf(Un.data),ga=yr.allocType(ka,ra*Ja);Fl(ga,Un.data,ra,Ja,Li,$a,Un.offset),Qn(ga,ua),yr.freeType(ga)}else ut.raise("invalid data for buffer subdata");return Oi}return ii||Oi(qr),Oi._reglType="buffer",Oi._buffer=Kr,Oi.subdata=Mi,br.profile&&(Oi.stats=Kr.stats),Oi.destroy=function(){xi(Kr)},Oi}function di(){Qa(fn).forEach(function(qr){qr.buffer=nt.createBuffer(),nt.bindBuffer(qr.type,qr.buffer),nt.bufferData(qr.type,qr.persistentData||qr.byteLength,qr.usage)})}return br.profile&&(Kt.getTotalBufferSize=function(){var qr=0;return Object.keys(fn).forEach(function(En){qr+=fn[En].stats.size}),qr}),{create:In,createStream:Vn,destroyStream:hi,clear:function(){Qa(fn).forEach(xi),ti.forEach(xi)},getBuffer:function(qr){return qr&&qr._buffer instanceof sn?qr._buffer:null},restore:di,_initBuffer:ui}}var ku=0,Sc=0,Rn=1,ji=1,Pv=4,ih=4,rc={points:ku,point:Sc,lines:Rn,line:ji,triangles:Pv,triangle:ih,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Jp=0,Gs=1,Ec=4,Bl=5120,nu=5121,vu=5122,El=5123,nc=5124,Nl=5125,wc=34963,jc=35040,ah=35044;function ed(nt,Kt,br,dn){var kn={},fn=0,sn={uint8:nu,uint16:El};Kt.oes_element_index_uint&&(sn.uint32=Nl);function ti(di){this.id=fn++,kn[this.id]=this,this.buffer=di,this.primType=Ec,this.vertCount=0,this.type=0}ti.prototype.bind=function(){this.buffer.bind()};var Vn=[];function hi(di){var qr=Vn.pop();return qr||(qr=new ti(br.create(null,wc,!0,!1)._buffer)),ui(qr,di,jc,-1,-1,0,0),qr}function ni(di){Vn.push(di)}function ui(di,qr,En,ii,Ci,Kr,Oi){di.buffer.bind();var Qn;if(qr){var Mi=Oi;!Oi&&(!N(qr)||Do(qr)&&!N(qr.data))&&(Mi=Kt.oes_element_index_uint?Nl:El),br._initBuffer(di.buffer,qr,En,Mi,3)}else nt.bufferData(wc,Kr,En),di.buffer.dtype=Qn||nu,di.buffer.usage=En,di.buffer.dimension=3,di.buffer.byteLength=Kr;if(Qn=Oi,!Oi){switch(di.buffer.dtype){case nu:case Bl:Qn=nu;break;case El:case vu:Qn=El;break;case Nl:case nc:Qn=Nl;break;default:ut.raise("unsupported type for element array")}di.buffer.dtype=Qn}di.type=Qn,ut(Qn!==Nl||!!Kt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Un=Ci;Un<0&&(Un=di.buffer.byteLength,Qn===El?Un>>=1:Qn===Nl&&(Un>>=2)),di.vertCount=Un;var bi=ii;if(ii<0){bi=Ec;var ua=di.buffer.dimension;ua===1&&(bi=Jp),ua===2&&(bi=Gs),ua===3&&(bi=Ec)}di.primType=bi}function xi(di){dn.elementsCount--,ut(di.buffer!==null,"must not double destroy elements"),delete kn[di.id],di.buffer.destroy(),di.buffer=null}function In(di,qr){var En=br.create(null,wc,!0),ii=new ti(En._buffer);dn.elementsCount++;function Ci(Kr){if(!Kr)En(),ii.primType=Ec,ii.vertCount=0,ii.type=nu;else if(typeof Kr=="number")En(Kr),ii.primType=Ec,ii.vertCount=Kr|0,ii.type=nu;else{var Oi=null,Qn=ah,Mi=-1,Un=-1,bi=0,ua=0;Array.isArray(Kr)||N(Kr)||Do(Kr)?Oi=Kr:(ut.type(Kr,"object","invalid arguments for elements"),"data"in Kr&&(Oi=Kr.data,ut(Array.isArray(Oi)||N(Oi)||Do(Oi),"invalid data for element buffer")),"usage"in Kr&&(ut.parameter(Kr.usage,Sl,"invalid element buffer usage"),Qn=Sl[Kr.usage]),"primitive"in Kr&&(ut.parameter(Kr.primitive,rc,"invalid element buffer primitive"),Mi=rc[Kr.primitive]),"count"in Kr&&(ut(typeof Kr.count=="number"&&Kr.count>=0,"invalid vertex count for elements"),Un=Kr.count|0),"type"in Kr&&(ut.parameter(Kr.type,sn,"invalid buffer type"),ua=sn[Kr.type]),"length"in Kr?bi=Kr.length|0:(bi=Un,ua===El||ua===vu?bi*=2:(ua===Nl||ua===nc)&&(bi*=4))),ui(ii,Oi,Qn,Mi,Un,bi,ua)}return Ci}return Ci(di),Ci._reglType="elements",Ci._elements=ii,Ci.subdata=function(Kr,Oi){return En.subdata(Kr,Oi),Ci},Ci.destroy=function(){xi(ii)},Ci}return{create:In,createStream:hi,destroyStream:ni,getElements:function(di){return typeof di=="function"&&di._elements instanceof ti?di._elements:null},clear:function(){Qa(kn).forEach(xi)}}}var Uo=new Float32Array(1),Nd=new Uint32Array(Uo.buffer),Uh=5123;function ff(nt){for(var Kt=yr.allocType(Uh,nt.length),br=0;br<nt.length;++br)if(isNaN(nt[br]))Kt[br]=65535;else if(nt[br]===1/0)Kt[br]=31744;else if(nt[br]===-1/0)Kt[br]=64512;else{Uo[0]=nt[br];var dn=Nd[0],kn=dn>>>31<<15,fn=(dn<<1>>>24)-127,sn=dn>>13&1024-1;if(fn<-24)Kt[br]=kn;else if(fn<-14){var ti=-14-fn;Kt[br]=kn+(sn+1024>>ti)}else fn>15?Kt[br]=kn+31744:Kt[br]=kn+(fn+15<<10)+sn}return Kt}function ss(nt){return Array.isArray(nt)||N(nt)}var vp=function(nt){return!(nt&nt-1)&&!!nt},gp=34467,Du=3553,Mt=34067,mr=34069,Vr=6408,Qr=6406,On=6407,gi=6409,oa=6410,po=32854,Ps=32855,ll=36194,Ju=32819,Fo=32820,mp=33635,zd=34042,Wc=6402,yp=34041,hf=35904,td=35906,Ca=36193,pf=33776,oh=33777,sh=33778,If=33779,uh=35986,Zs=35987,ic=34798,el=35840,_p=35841,Ud=35842,rd=35843,Gc=36196,df=5121,lh=5123,xp=5125,Pf=5126,cm=10242,nd=10243,Os=10497,bp=33071,Zh=33648,Zd=10240,Sp=10241,Ep=9728,Ov=9729,$c=9984,Vd=9985,ch=9986,us=9987,fh=33170,Cc=4352,ac=4353,oo=4354,$o=34046,vo=3317,id=37440,Of=37441,wp=37443,kv=37444,va=33984,Cp=[$c,ch,Vd,us],Xc=[0,gi,oa,On,Vr],$s={};$s[gi]=$s[Qr]=$s[Wc]=1,$s[yp]=$s[oa]=2,$s[On]=$s[hf]=3,$s[Vr]=$s[td]=4;function Es(nt){return"[object "+nt+"]"}var hh=Es("HTMLCanvasElement"),ad=Es("OffscreenCanvas"),ks=Es("CanvasRenderingContext2D"),Ni=Es("ImageBitmap"),ju=Es("HTMLImageElement"),Yc=Es("HTMLVideoElement"),kf=Object.keys(Hi).concat([hh,ad,ks,Ni,ju,Yc]),cl=[];cl[df]=1,cl[Pf]=4,cl[Ca]=2,cl[lh]=2,cl[xp]=4;var Zo=[];Zo[po]=2,Zo[Ps]=2,Zo[ll]=2,Zo[yp]=4,Zo[pf]=.5,Zo[oh]=.5,Zo[sh]=1,Zo[If]=1,Zo[uh]=.5,Zo[Zs]=1,Zo[ic]=1,Zo[el]=.5,Zo[_p]=.25,Zo[Ud]=.5,Zo[rd]=.25,Zo[Gc]=.5;function Ds(nt){return Array.isArray(nt)&&(nt.length===0||typeof nt[0]=="number")}function Ei(nt){if(!Array.isArray(nt))return!1;var Kt=nt.length;return!(Kt===0||!ss(nt[0]))}function zl(nt){return Object.prototype.toString.call(nt)}function ph(nt){return zl(nt)===hh}function Vh(nt){return zl(nt)===ad}function Tc(nt){return zl(nt)===ks}function Cu(nt){return zl(nt)===Ni}function Tp(nt){return zl(nt)===ju}function Ac(nt){return zl(nt)===Yc}function iu(nt){if(!nt)return!1;var Kt=zl(nt);return kf.indexOf(Kt)>=0?!0:Ds(nt)||Ei(nt)||Do(nt)}function fl(nt){return Hi[Object.prototype.toString.call(nt)]|0}function Dv(nt,Kt){var br=Kt.length;switch(nt.type){case df:case lh:case xp:case Pf:var dn=yr.allocType(nt.type,br);dn.set(Kt),nt.data=dn;break;case Ca:nt.data=ff(Kt);break;default:ut.raise("unsupported texture type, must specify a typed array")}}function Hh(nt,Kt){return yr.allocType(nt.type===Ca?Pf:nt.type,Kt)}function jh(nt,Kt){nt.type===Ca?(nt.data=ff(Kt),yr.freeType(Kt)):nt.data=Kt}function Hd(nt,Kt,br,dn,kn,fn){for(var sn=nt.width,ti=nt.height,Vn=nt.channels,hi=sn*ti*Vn,ni=Hh(nt,hi),ui=0,xi=0;xi<ti;++xi)for(var In=0;In<sn;++In)for(var di=0;di<Vn;++di)ni[ui++]=Kt[br*In+dn*xi+kn*di+fn];jh(nt,ni)}function oc(nt,Kt,br,dn,kn,fn){var sn;if(typeof Zo[nt]!="undefined"?sn=Zo[nt]:sn=$s[nt]*cl[Kt],fn&&(sn*=6),kn){for(var ti=0,Vn=br;Vn>=1;)ti+=sn*Vn*Vn,Vn/=2;return ti}else return sn*br*dn}function au(nt,Kt,br,dn,kn,fn,sn){var ti={"don't care":Cc,"dont care":Cc,nice:oo,fast:ac},Vn={repeat:Os,clamp:bp,mirror:Zh},hi={nearest:Ep,linear:Ov},ni=k({mipmap:us,"nearest mipmap nearest":$c,"linear mipmap nearest":Vd,"nearest mipmap linear":ch,"linear mipmap linear":us},hi),ui={none:0,browser:kv},xi={uint8:df,rgba4:Ju,rgb565:mp,"rgb5 a1":Fo},In={alpha:Qr,luminance:gi,"luminance alpha":oa,rgb:On,rgba:Vr,rgba4:po,"rgb5 a1":Ps,rgb565:ll},di={};Kt.ext_srgb&&(In.srgb=hf,In.srgba=td),Kt.oes_texture_float&&(xi.float32=xi.float=Pf),Kt.oes_texture_half_float&&(xi.float16=xi["half float"]=Ca),Kt.webgl_depth_texture&&(k(In,{depth:Wc,"depth stencil":yp}),k(xi,{uint16:lh,uint32:xp,"depth stencil":zd})),Kt.webgl_compressed_texture_s3tc&&k(di,{"rgb s3tc dxt1":pf,"rgba s3tc dxt1":oh,"rgba s3tc dxt3":sh,"rgba s3tc dxt5":If}),Kt.webgl_compressed_texture_atc&&k(di,{"rgb atc":uh,"rgba atc explicit alpha":Zs,"rgba atc interpolated alpha":ic}),Kt.webgl_compressed_texture_pvrtc&&k(di,{"rgb pvrtc 4bppv1":el,"rgb pvrtc 2bppv1":_p,"rgba pvrtc 4bppv1":Ud,"rgba pvrtc 2bppv1":rd}),Kt.webgl_compressed_texture_etc1&&(di["rgb etc1"]=Gc);var qr=Array.prototype.slice.call(nt.getParameter(gp));Object.keys(di).forEach(function(vr){var yn=di[vr];qr.indexOf(yn)>=0&&(In[vr]=yn)});var En=Object.keys(In);br.textureFormats=En;var ii=[];Object.keys(In).forEach(function(vr){var yn=In[vr];ii[yn]=vr});var Ci=[];Object.keys(xi).forEach(function(vr){var yn=xi[vr];Ci[yn]=vr});var Kr=[];Object.keys(hi).forEach(function(vr){var yn=hi[vr];Kr[yn]=vr});var Oi=[];Object.keys(ni).forEach(function(vr){var yn=ni[vr];Oi[yn]=vr});var Qn=[];Object.keys(Vn).forEach(function(vr){var yn=Vn[vr];Qn[yn]=vr});var Mi=En.reduce(function(vr,yn){var cn=In[yn];return cn===gi||cn===Qr||cn===gi||cn===oa||cn===Wc||cn===yp||Kt.ext_srgb&&(cn===hf||cn===td)?vr[cn]=cn:cn===Ps||yn.indexOf("rgba")>=0?vr[cn]=Vr:vr[cn]=On,vr},{});function Un(){this.internalformat=Vr,this.format=Vr,this.type=df,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=kv,this.width=0,this.height=0,this.channels=0}function bi(vr,yn){vr.internalformat=yn.internalformat,vr.format=yn.format,vr.type=yn.type,vr.compressed=yn.compressed,vr.premultiplyAlpha=yn.premultiplyAlpha,vr.flipY=yn.flipY,vr.unpackAlignment=yn.unpackAlignment,vr.colorSpace=yn.colorSpace,vr.width=yn.width,vr.height=yn.height,vr.channels=yn.channels}function ua(vr,yn){if(!(typeof yn!="object"||!yn)){if("premultiplyAlpha"in yn&&(ut.type(yn.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),vr.premultiplyAlpha=yn.premultiplyAlpha),"flipY"in yn&&(ut.type(yn.flipY,"boolean","invalid texture flip"),vr.flipY=yn.flipY),"alignment"in yn&&(ut.oneOf(yn.alignment,[1,2,4,8],"invalid texture unpack alignment"),vr.unpackAlignment=yn.alignment),"colorSpace"in yn&&(ut.parameter(yn.colorSpace,ui,"invalid colorSpace"),vr.colorSpace=ui[yn.colorSpace]),"type"in yn){var cn=yn.type;ut(Kt.oes_texture_float||!(cn==="float"||cn==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ut(Kt.oes_texture_half_float||!(cn==="half float"||cn==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ut(Kt.webgl_depth_texture||!(cn==="uint16"||cn==="uint32"||cn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ut.parameter(cn,xi,"invalid texture type"),vr.type=xi[cn]}var Ri=vr.width,Xa=vr.height,Yo=vr.channels,mt=!1;"shape"in yn?(ut(Array.isArray(yn.shape)&&yn.shape.length>=2,"shape must be an array"),Ri=yn.shape[0],Xa=yn.shape[1],yn.shape.length===3&&(Yo=yn.shape[2],ut(Yo>0&&Yo<=4,"invalid number of channels"),mt=!0),ut(Ri>=0&&Ri<=br.maxTextureSize,"invalid width"),ut(Xa>=0&&Xa<=br.maxTextureSize,"invalid height")):("radius"in yn&&(Ri=Xa=yn.radius,ut(Ri>=0&&Ri<=br.maxTextureSize,"invalid radius")),"width"in yn&&(Ri=yn.width,ut(Ri>=0&&Ri<=br.maxTextureSize,"invalid width")),"height"in yn&&(Xa=yn.height,ut(Xa>=0&&Xa<=br.maxTextureSize,"invalid height")),"channels"in yn&&(Yo=yn.channels,ut(Yo>0&&Yo<=4,"invalid number of channels"),mt=!0)),vr.width=Ri|0,vr.height=Xa|0,vr.channels=Yo|0;var ir=!1;if("format"in yn){var Ct=yn.format;ut(Kt.webgl_depth_texture||!(Ct==="depth"||Ct==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ut.parameter(Ct,In,"invalid texture format");var hn=vr.internalformat=In[Ct];vr.format=Mi[hn],Ct in xi&&("type"in yn||(vr.type=xi[Ct])),Ct in di&&(vr.compressed=!0),ir=!0}!mt&&ir?vr.channels=$s[vr.format]:mt&&!ir?vr.channels!==Xc[vr.format]&&(vr.format=vr.internalformat=Xc[vr.channels]):ir&&mt&&ut(vr.channels===$s[vr.format],"number of channels inconsistent with specified format")}}function Ra(vr){nt.pixelStorei(id,vr.flipY),nt.pixelStorei(Of,vr.premultiplyAlpha),nt.pixelStorei(wp,vr.colorSpace),nt.pixelStorei(vo,vr.unpackAlignment)}function Ti(){Un.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Jn(vr,yn){var cn=null;if(iu(yn)?cn=yn:yn&&(ut.type(yn,"object","invalid pixel data type"),ua(vr,yn),"x"in yn&&(vr.xOffset=yn.x|0),"y"in yn&&(vr.yOffset=yn.y|0),iu(yn.data)&&(cn=yn.data)),ut(!vr.compressed||cn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),yn.copy){ut(!cn,"can not specify copy and data field for the same texture");var Ri=kn.viewportWidth,Xa=kn.viewportHeight;vr.width=vr.width||Ri-vr.xOffset,vr.height=vr.height||Xa-vr.yOffset,vr.needsCopy=!0,ut(vr.xOffset>=0&&vr.xOffset<Ri&&vr.yOffset>=0&&vr.yOffset<Xa&&vr.width>0&&vr.width<=Ri&&vr.height>0&&vr.height<=Xa,"copy texture read out of bounds")}else if(!cn)vr.width=vr.width||1,vr.height=vr.height||1,vr.channels=vr.channels||4;else if(N(cn))vr.channels=vr.channels||4,vr.data=cn,!("type"in yn)&&vr.type===df&&(vr.type=fl(cn));else if(Ds(cn))vr.channels=vr.channels||4,Dv(vr,cn),vr.alignment=1,vr.needsFree=!0;else if(Do(cn)){var Yo=cn.data;!Array.isArray(Yo)&&vr.type===df&&(vr.type=fl(Yo));var mt=cn.shape,ir=cn.stride,Ct,hn,an,Pr,Br,jr;mt.length===3?(an=mt[2],jr=ir[2]):(ut(mt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),an=1,jr=1),Ct=mt[0],hn=mt[1],Pr=ir[0],Br=ir[1],vr.alignment=1,vr.width=Ct,vr.height=hn,vr.channels=an,vr.format=vr.internalformat=Xc[an],vr.needsFree=!0,Hd(vr,Yo,Pr,Br,jr,cn.offset)}else if(ph(cn)||Vh(cn)||Tc(cn))ph(cn)||Vh(cn)?vr.element=cn:vr.element=cn.canvas,vr.width=vr.element.width,vr.height=vr.element.height,vr.channels=4;else if(Cu(cn))vr.element=cn,vr.width=cn.width,vr.height=cn.height,vr.channels=4;else if(Tp(cn))vr.element=cn,vr.width=cn.naturalWidth,vr.height=cn.naturalHeight,vr.channels=4;else if(Ac(cn))vr.element=cn,vr.width=cn.videoWidth,vr.height=cn.videoHeight,vr.channels=4;else if(Ei(cn)){var pr=vr.width||cn[0].length,Lr=vr.height||cn.length,tr=vr.channels;ss(cn[0][0])?tr=tr||cn[0][0].length:tr=tr||1;for(var Nr=pu.shape(cn),xn=1,bn=0;bn<Nr.length;++bn)xn*=Nr[bn];var Wn=Hh(vr,xn);pu.flatten(cn,Nr,"",Wn),jh(vr,Wn),vr.alignment=1,vr.width=pr,vr.height=Lr,vr.channels=tr,vr.format=vr.internalformat=Xc[tr],vr.needsFree=!0}vr.type===Pf?ut(br.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):vr.type===Ca&&ut(br.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Dn(vr,yn,cn){var Ri=vr.element,Xa=vr.data,Yo=vr.internalformat,mt=vr.format,ir=vr.type,Ct=vr.width,hn=vr.height;Ra(vr),Ri?nt.texImage2D(yn,cn,mt,mt,ir,Ri):vr.compressed?nt.compressedTexImage2D(yn,cn,Yo,Ct,hn,0,Xa):vr.needsCopy?(dn(),nt.copyTexImage2D(yn,cn,mt,vr.xOffset,vr.yOffset,Ct,hn,0)):nt.texImage2D(yn,cn,mt,Ct,hn,0,mt,ir,Xa||null)}function ra(vr,yn,cn,Ri,Xa){var Yo=vr.element,mt=vr.data,ir=vr.internalformat,Ct=vr.format,hn=vr.type,an=vr.width,Pr=vr.height;Ra(vr),Yo?nt.texSubImage2D(yn,Xa,cn,Ri,Ct,hn,Yo):vr.compressed?nt.compressedTexSubImage2D(yn,Xa,cn,Ri,ir,an,Pr,mt):vr.needsCopy?(dn(),nt.copyTexSubImage2D(yn,Xa,cn,Ri,vr.xOffset,vr.yOffset,an,Pr)):nt.texSubImage2D(yn,Xa,cn,Ri,an,Pr,Ct,hn,mt)}var Ja=[];function Li(){return Ja.pop()||new Ti}function $a(vr){vr.needsFree&&yr.freeType(vr.data),Ti.call(vr),Ja.push(vr)}function ka(){Un.call(this),this.genMipmaps=!1,this.mipmapHint=Cc,this.mipmask=0,this.images=Array(16)}function ga(vr,yn,cn){var Ri=vr.images[0]=Li();vr.mipmask=1,Ri.width=vr.width=yn,Ri.height=vr.height=cn,Ri.channels=vr.channels=4}function Co(vr,yn){var cn=null;if(iu(yn))cn=vr.images[0]=Li(),bi(cn,vr),Jn(cn,yn),vr.mipmask=1;else if(ua(vr,yn),Array.isArray(yn.mipmap))for(var Ri=yn.mipmap,Xa=0;Xa<Ri.length;++Xa)cn=vr.images[Xa]=Li(),bi(cn,vr),cn.width>>=Xa,cn.height>>=Xa,Jn(cn,Ri[Xa]),vr.mipmask|=1<<Xa;else cn=vr.images[0]=Li(),bi(cn,vr),Jn(cn,yn),vr.mipmask=1;bi(vr,vr.images[0]),vr.compressed&&(vr.internalformat===pf||vr.internalformat===oh||vr.internalformat===sh||vr.internalformat===If)&&ut(vr.width%4===0&&vr.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function mu(vr,yn){for(var cn=vr.images,Ri=0;Ri<cn.length;++Ri){if(!cn[Ri])return;Dn(cn[Ri],yn,Ri)}}var Bu=[];function co(){var vr=Bu.pop()||new ka;Un.call(vr),vr.mipmask=0;for(var yn=0;yn<16;++yn)vr.images[yn]=null;return vr}function hs(vr){for(var yn=vr.images,cn=0;cn<yn.length;++cn)yn[cn]&&$a(yn[cn]),yn[cn]=null;Bu.push(vr)}function Vo(){this.minFilter=Ep,this.magFilter=Ep,this.wrapS=bp,this.wrapT=bp,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Cc}function su(vr,yn){if("min"in yn){var cn=yn.min;ut.parameter(cn,ni),vr.minFilter=ni[cn],Cp.indexOf(vr.minFilter)>=0&&!("faces"in yn)&&(vr.genMipmaps=!0)}if("mag"in yn){var Ri=yn.mag;ut.parameter(Ri,hi),vr.magFilter=hi[Ri]}var Xa=vr.wrapS,Yo=vr.wrapT;if("wrap"in yn){var mt=yn.wrap;typeof mt=="string"?(ut.parameter(mt,Vn),Xa=Yo=Vn[mt]):Array.isArray(mt)&&(ut.parameter(mt[0],Vn),ut.parameter(mt[1],Vn),Xa=Vn[mt[0]],Yo=Vn[mt[1]])}else{if("wrapS"in yn){var ir=yn.wrapS;ut.parameter(ir,Vn),Xa=Vn[ir]}if("wrapT"in yn){var Ct=yn.wrapT;ut.parameter(Ct,Vn),Yo=Vn[Ct]}}if(vr.wrapS=Xa,vr.wrapT=Yo,"anisotropic"in yn){var hn=yn.anisotropic;ut(typeof hn=="number"&&hn>=1&&hn<=br.maxAnisotropic,"aniso samples must be between 1 and "),vr.anisotropic=yn.anisotropic}if("mipmap"in yn){var an=!1;switch(typeof yn.mipmap){case"string":ut.parameter(yn.mipmap,ti,"invalid mipmap hint"),vr.mipmapHint=ti[yn.mipmap],vr.genMipmaps=!0,an=!0;break;case"boolean":an=vr.genMipmaps=yn.mipmap;break;case"object":ut(Array.isArray(yn.mipmap),"invalid mipmap type"),vr.genMipmaps=!1,an=!0;break;default:ut.raise("invalid mipmap type")}an&&!("min"in yn)&&(vr.minFilter=$c)}}function Vs(vr,yn){nt.texParameteri(yn,Sp,vr.minFilter),nt.texParameteri(yn,Zd,vr.magFilter),nt.texParameteri(yn,cm,vr.wrapS),nt.texParameteri(yn,nd,vr.wrapT),Kt.ext_texture_filter_anisotropic&&nt.texParameteri(yn,$o,vr.anisotropic),vr.genMipmaps&&(nt.hint(fh,vr.mipmapHint),nt.generateMipmap(yn))}var Fs=0,Qs={},Nu=br.maxTextureUnits,As=Array(Nu).map(function(){return null});function Ga(vr){Un.call(this),this.mipmask=0,this.internalformat=Vr,this.id=Fs++,this.refCount=1,this.target=vr,this.texture=nt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Vo,sn.profile&&(this.stats={size:0})}function Yu(vr){nt.activeTexture(va),nt.bindTexture(vr.target,vr.texture)}function To(){var vr=As[0];vr?nt.bindTexture(vr.target,vr.texture):nt.bindTexture(Du,null)}function ma(vr){var yn=vr.texture;ut(yn,"must not double destroy texture");var cn=vr.unit,Ri=vr.target;cn>=0&&(nt.activeTexture(va+cn),nt.bindTexture(Ri,null),As[cn]=null),nt.deleteTexture(yn),vr.texture=null,vr.params=null,vr.pixels=null,vr.refCount=0,delete Qs[vr.id],fn.textureCount--}k(Ga.prototype,{bind:function(){var vr=this;vr.bindCount+=1;var yn=vr.unit;if(yn<0){for(var cn=0;cn<Nu;++cn){var Ri=As[cn];if(Ri){if(Ri.bindCount>0)continue;Ri.unit=-1}As[cn]=vr,yn=cn;break}yn>=Nu&&ut.raise("insufficient number of texture units"),sn.profile&&fn.maxTextureUnits<yn+1&&(fn.maxTextureUnits=yn+1),vr.unit=yn,nt.activeTexture(va+yn),nt.bindTexture(vr.target,vr.texture)}return yn},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ma(this)}});function ba(vr,yn){var cn=new Ga(Du);Qs[cn.id]=cn,fn.textureCount++;function Ri(mt,ir){var Ct=cn.texInfo;Vo.call(Ct);var hn=co();return typeof mt=="number"?typeof ir=="number"?ga(hn,mt|0,ir|0):ga(hn,mt|0,mt|0):mt?(ut.type(mt,"object","invalid arguments to regl.texture"),su(Ct,mt),Co(hn,mt)):ga(hn,1,1),Ct.genMipmaps&&(hn.mipmask=(hn.width<<1)-1),cn.mipmask=hn.mipmask,bi(cn,hn),ut.texture2D(Ct,hn,br),cn.internalformat=hn.internalformat,Ri.width=hn.width,Ri.height=hn.height,Yu(cn),mu(hn,Du),Vs(Ct,Du),To(),hs(hn),sn.profile&&(cn.stats.size=oc(cn.internalformat,cn.type,hn.width,hn.height,Ct.genMipmaps,!1)),Ri.format=ii[cn.internalformat],Ri.type=Ci[cn.type],Ri.mag=Kr[Ct.magFilter],Ri.min=Oi[Ct.minFilter],Ri.wrapS=Qn[Ct.wrapS],Ri.wrapT=Qn[Ct.wrapT],Ri}function Xa(mt,ir,Ct,hn){ut(!!mt,"must specify image data");var an=ir|0,Pr=Ct|0,Br=hn|0,jr=Li();return bi(jr,cn),jr.width=0,jr.height=0,Jn(jr,mt),jr.width=jr.width||(cn.width>>Br)-an,jr.height=jr.height||(cn.height>>Br)-Pr,ut(cn.type===jr.type&&cn.format===jr.format&&cn.internalformat===jr.internalformat,"incompatible format for texture.subimage"),ut(an>=0&&Pr>=0&&an+jr.width<=cn.width&&Pr+jr.height<=cn.height,"texture.subimage write out of bounds"),ut(cn.mipmask&1<<Br,"missing mipmap data"),ut(jr.data||jr.element||jr.needsCopy,"missing image data"),Yu(cn),ra(jr,Du,an,Pr,Br),To(),$a(jr),Ri}function Yo(mt,ir){var Ct=mt|0,hn=ir|0||Ct;if(Ct===cn.width&&hn===cn.height)return Ri;Ri.width=cn.width=Ct,Ri.height=cn.height=hn,Yu(cn);for(var an=0;cn.mipmask>>an;++an){var Pr=Ct>>an,Br=hn>>an;if(!Pr||!Br)break;nt.texImage2D(Du,an,cn.format,Pr,Br,0,cn.format,cn.type,null)}return To(),sn.profile&&(cn.stats.size=oc(cn.internalformat,cn.type,Ct,hn,!1,!1)),Ri}return Ri(vr,yn),Ri.subimage=Xa,Ri.resize=Yo,Ri._reglType="texture2d",Ri._texture=cn,sn.profile&&(Ri.stats=cn.stats),Ri.destroy=function(){cn.decRef()},Ri}function xo(vr,yn,cn,Ri,Xa,Yo){var mt=new Ga(Mt);Qs[mt.id]=mt,fn.cubeCount++;var ir=new Array(6);function Ct(Pr,Br,jr,pr,Lr,tr){var Nr,xn=mt.texInfo;for(Vo.call(xn),Nr=0;Nr<6;++Nr)ir[Nr]=co();if(typeof Pr=="number"||!Pr){var bn=Pr|0||1;for(Nr=0;Nr<6;++Nr)ga(ir[Nr],bn,bn)}else if(typeof Pr=="object")if(Br)Co(ir[0],Pr),Co(ir[1],Br),Co(ir[2],jr),Co(ir[3],pr),Co(ir[4],Lr),Co(ir[5],tr);else if(su(xn,Pr),ua(mt,Pr),"faces"in Pr){var Wn=Pr.faces;for(ut(Array.isArray(Wn)&&Wn.length===6,"cube faces must be a length 6 array"),Nr=0;Nr<6;++Nr)ut(typeof Wn[Nr]=="object"&&!!Wn[Nr],"invalid input for cube map face"),bi(ir[Nr],mt),Co(ir[Nr],Wn[Nr])}else for(Nr=0;Nr<6;++Nr)Co(ir[Nr],Pr);else ut.raise("invalid arguments to cube map");for(bi(mt,ir[0]),br.npotTextureCube||ut(vp(mt.width)&&vp(mt.height),"your browser does not support non power or two texture dimensions"),xn.genMipmaps?mt.mipmask=(ir[0].width<<1)-1:mt.mipmask=ir[0].mipmask,ut.textureCube(mt,xn,ir,br),mt.internalformat=ir[0].internalformat,Ct.width=ir[0].width,Ct.height=ir[0].height,Yu(mt),Nr=0;Nr<6;++Nr)mu(ir[Nr],mr+Nr);for(Vs(xn,Mt),To(),sn.profile&&(mt.stats.size=oc(mt.internalformat,mt.type,Ct.width,Ct.height,xn.genMipmaps,!0)),Ct.format=ii[mt.internalformat],Ct.type=Ci[mt.type],Ct.mag=Kr[xn.magFilter],Ct.min=Oi[xn.minFilter],Ct.wrapS=Qn[xn.wrapS],Ct.wrapT=Qn[xn.wrapT],Nr=0;Nr<6;++Nr)hs(ir[Nr]);return Ct}function hn(Pr,Br,jr,pr,Lr){ut(!!Br,"must specify image data"),ut(typeof Pr=="number"&&Pr===(Pr|0)&&Pr>=0&&Pr<6,"invalid face");var tr=jr|0,Nr=pr|0,xn=Lr|0,bn=Li();return bi(bn,mt),bn.width=0,bn.height=0,Jn(bn,Br),bn.width=bn.width||(mt.width>>xn)-tr,bn.height=bn.height||(mt.height>>xn)-Nr,ut(mt.type===bn.type&&mt.format===bn.format&&mt.internalformat===bn.internalformat,"incompatible format for texture.subimage"),ut(tr>=0&&Nr>=0&&tr+bn.width<=mt.width&&Nr+bn.height<=mt.height,"texture.subimage write out of bounds"),ut(mt.mipmask&1<<xn,"missing mipmap data"),ut(bn.data||bn.element||bn.needsCopy,"missing image data"),Yu(mt),ra(bn,mr+Pr,tr,Nr,xn),To(),$a(bn),Ct}function an(Pr){var Br=Pr|0;if(Br!==mt.width){Ct.width=mt.width=Br,Ct.height=mt.height=Br,Yu(mt);for(var jr=0;jr<6;++jr)for(var pr=0;mt.mipmask>>pr;++pr)nt.texImage2D(mr+jr,pr,mt.format,Br>>pr,Br>>pr,0,mt.format,mt.type,null);return To(),sn.profile&&(mt.stats.size=oc(mt.internalformat,mt.type,Ct.width,Ct.height,!1,!0)),Ct}}return Ct(vr,yn,cn,Ri,Xa,Yo),Ct.subimage=hn,Ct.resize=an,Ct._reglType="textureCube",Ct._texture=mt,sn.profile&&(Ct.stats=mt.stats),Ct.destroy=function(){mt.decRef()},Ct}function Hs(){for(var vr=0;vr<Nu;++vr)nt.activeTexture(va+vr),nt.bindTexture(Du,null),As[vr]=null;Qa(Qs).forEach(ma),fn.cubeCount=0,fn.textureCount=0}sn.profile&&(fn.getTotalTextureSize=function(){var vr=0;return Object.keys(Qs).forEach(function(yn){vr+=Qs[yn].stats.size}),vr});function yu(){for(var vr=0;vr<Nu;++vr){var yn=As[vr];yn&&(yn.bindCount=0,yn.unit=-1,As[vr]=null)}Qa(Qs).forEach(function(cn){cn.texture=nt.createTexture(),nt.bindTexture(cn.target,cn.texture);for(var Ri=0;Ri<32;++Ri)if(cn.mipmask&1<<Ri)if(cn.target===Du)nt.texImage2D(Du,Ri,cn.internalformat,cn.width>>Ri,cn.height>>Ri,0,cn.internalformat,cn.type,null);else for(var Xa=0;Xa<6;++Xa)nt.texImage2D(mr+Xa,Ri,cn.internalformat,cn.width>>Ri,cn.height>>Ri,0,cn.internalformat,cn.type,null);Vs(cn.texInfo,cn.target)})}return{create2D:ba,createCube:xo,clear:Hs,getTexture:function(vr){return null},restore:yu}}var ja=36161,ws=32854,Kl=32855,Wu=36194,Df=33189,Mc=36168,tl=34041,Tu=35907,Wh=34836,Qi=34842,wi=34843,wl=[];wl[ws]=2,wl[Kl]=2,wl[Wu]=2,wl[Df]=2,wl[Mc]=1,wl[tl]=4,wl[Tu]=4,wl[Wh]=16,wl[Qi]=8,wl[wi]=6;function rl(nt,Kt,br){return wl[nt]*Kt*br}var Gu=function(nt,Kt,br,dn,kn){var fn={rgba4:ws,rgb565:Wu,"rgb5 a1":Kl,depth:Df,stencil:Mc,"depth stencil":tl};Kt.ext_srgb&&(fn.srgba=Tu),Kt.ext_color_buffer_half_float&&(fn.rgba16f=Qi,fn.rgb16f=wi),Kt.webgl_color_buffer_float&&(fn.rgba32f=Wh);var sn=[];Object.keys(fn).forEach(function(In){var di=fn[In];sn[di]=In});var ti=0,Vn={};function hi(In){this.id=ti++,this.refCount=1,this.renderbuffer=In,this.format=ws,this.width=0,this.height=0,kn.profile&&(this.stats={size:0})}hi.prototype.decRef=function(){--this.refCount<=0&&ni(this)};function ni(In){var di=In.renderbuffer;ut(di,"must not double destroy renderbuffer"),nt.bindRenderbuffer(ja,null),nt.deleteRenderbuffer(di),In.renderbuffer=null,In.refCount=0,delete Vn[In.id],dn.renderbufferCount--}function ui(In,di){var qr=new hi(nt.createRenderbuffer());Vn[qr.id]=qr,dn.renderbufferCount++;function En(Ci,Kr){var Oi=0,Qn=0,Mi=ws;if(typeof Ci=="object"&&Ci){var Un=Ci;if("shape"in Un){var bi=Un.shape;ut(Array.isArray(bi)&&bi.length>=2,"invalid renderbuffer shape"),Oi=bi[0]|0,Qn=bi[1]|0}else"radius"in Un&&(Oi=Qn=Un.radius|0),"width"in Un&&(Oi=Un.width|0),"height"in Un&&(Qn=Un.height|0);"format"in Un&&(ut.parameter(Un.format,fn,"invalid renderbuffer format"),Mi=fn[Un.format])}else typeof Ci=="number"?(Oi=Ci|0,typeof Kr=="number"?Qn=Kr|0:Qn=Oi):Ci?ut.raise("invalid arguments to renderbuffer constructor"):Oi=Qn=1;if(ut(Oi>0&&Qn>0&&Oi<=br.maxRenderbufferSize&&Qn<=br.maxRenderbufferSize,"invalid renderbuffer size"),!(Oi===qr.width&&Qn===qr.height&&Mi===qr.format))return En.width=qr.width=Oi,En.height=qr.height=Qn,qr.format=Mi,nt.bindRenderbuffer(ja,qr.renderbuffer),nt.renderbufferStorage(ja,Mi,Oi,Qn),ut(nt.getError()===0,"invalid render buffer format"),kn.profile&&(qr.stats.size=rl(qr.format,qr.width,qr.height)),En.format=sn[qr.format],En}function ii(Ci,Kr){var Oi=Ci|0,Qn=Kr|0||Oi;return Oi===qr.width&&Qn===qr.height||(ut(Oi>0&&Qn>0&&Oi<=br.maxRenderbufferSize&&Qn<=br.maxRenderbufferSize,"invalid renderbuffer size"),En.width=qr.width=Oi,En.height=qr.height=Qn,nt.bindRenderbuffer(ja,qr.renderbuffer),nt.renderbufferStorage(ja,qr.format,Oi,Qn),ut(nt.getError()===0,"invalid render buffer format"),kn.profile&&(qr.stats.size=rl(qr.format,qr.width,qr.height))),En}return En(In,di),En.resize=ii,En._reglType="renderbuffer",En._renderbuffer=qr,kn.profile&&(En.stats=qr.stats),En.destroy=function(){qr.decRef()},En}kn.profile&&(dn.getTotalRenderbufferSize=function(){var In=0;return Object.keys(Vn).forEach(function(di){In+=Vn[di].stats.size}),In});function xi(){Qa(Vn).forEach(function(In){In.renderbuffer=nt.createRenderbuffer(),nt.bindRenderbuffer(ja,In.renderbuffer),nt.renderbufferStorage(ja,In.format,In.width,In.height)}),nt.bindRenderbuffer(ja,null)}return{create:ui,clear:function(){Qa(Vn).forEach(ni)},restore:xi}},Cs=36160,sc=36161,Lf=3553,dh=34069,zo=36064,Xs=36096,Lv=36128,vh=33306,Ff=36053,uc=36054,Ta=36055,gh=36057,Kc=36061,od=36193,Bf=5121,Gh=5126,jd=6407,Sn=6408,wr=6402,He=[jd,Sn],qc=[];qc[Sn]=4,qc[jd]=3;var er=[];er[Bf]=1,er[Gh]=4,er[od]=2;var sd=32854,Ys=32855,Ul=36194,$h=33189,Cl=36168,Ap=34041,Mp=35907,b=34836,A=34842,C=34843,I=[sd,Ys,Ul,Mp,A,C,b],Z={};Z[Ff]="complete",Z[uc]="incomplete attachment",Z[gh]="incomplete dimensions",Z[Ta]="incomplete, missing attachment",Z[Kc]="unsupported";function ee(nt,Kt,br,dn,kn,fn){var sn={cur:null,next:null,dirty:!1,setFBO:null},ti=["rgba"],Vn=["rgba4","rgb565","rgb5 a1"];Kt.ext_srgb&&Vn.push("srgba"),Kt.ext_color_buffer_half_float&&Vn.push("rgba16f","rgb16f"),Kt.webgl_color_buffer_float&&Vn.push("rgba32f");var hi=["uint8"];Kt.oes_texture_half_float&&hi.push("half float","float16"),Kt.oes_texture_float&&hi.push("float","float32");function ni(Ti,Jn,Dn){this.target=Ti,this.texture=Jn,this.renderbuffer=Dn;var ra=0,Ja=0;Jn?(ra=Jn.width,Ja=Jn.height):Dn&&(ra=Dn.width,Ja=Dn.height),this.width=ra,this.height=Ja}function ui(Ti){Ti&&(Ti.texture&&Ti.texture._texture.decRef(),Ti.renderbuffer&&Ti.renderbuffer._renderbuffer.decRef())}function xi(Ti,Jn,Dn){if(Ti)if(Ti.texture){var ra=Ti.texture._texture,Ja=Math.max(1,ra.width),Li=Math.max(1,ra.height);ut(Ja===Jn&&Li===Dn,"inconsistent width/height for supplied texture"),ra.refCount+=1}else{var $a=Ti.renderbuffer._renderbuffer;ut($a.width===Jn&&$a.height===Dn,"inconsistent width/height for renderbuffer"),$a.refCount+=1}}function In(Ti,Jn){Jn&&(Jn.texture?nt.framebufferTexture2D(Cs,Ti,Jn.target,Jn.texture._texture.texture,0):nt.framebufferRenderbuffer(Cs,Ti,sc,Jn.renderbuffer._renderbuffer.renderbuffer))}function di(Ti){var Jn=Lf,Dn=null,ra=null,Ja=Ti;typeof Ti=="object"&&(Ja=Ti.data,"target"in Ti&&(Jn=Ti.target|0)),ut.type(Ja,"function","invalid attachment data");var Li=Ja._reglType;return Li==="texture2d"?(Dn=Ja,ut(Jn===Lf)):Li==="textureCube"?(Dn=Ja,ut(Jn>=dh&&Jn<dh+6,"invalid cube map target")):Li==="renderbuffer"?(ra=Ja,Jn=sc):ut.raise("invalid regl object for attachment"),new ni(Jn,Dn,ra)}function qr(Ti,Jn,Dn,ra,Ja){if(Dn){var Li=dn.create2D({width:Ti,height:Jn,format:ra,type:Ja});return Li._texture.refCount=0,new ni(Lf,Li,null)}else{var $a=kn.create({width:Ti,height:Jn,format:ra});return $a._renderbuffer.refCount=0,new ni(sc,null,$a)}}function En(Ti){return Ti&&(Ti.texture||Ti.renderbuffer)}function ii(Ti,Jn,Dn){Ti&&(Ti.texture?Ti.texture.resize(Jn,Dn):Ti.renderbuffer&&Ti.renderbuffer.resize(Jn,Dn),Ti.width=Jn,Ti.height=Dn)}var Ci=0,Kr={};function Oi(){this.id=Ci++,Kr[this.id]=this,this.framebuffer=nt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Qn(Ti){Ti.colorAttachments.forEach(ui),ui(Ti.depthAttachment),ui(Ti.stencilAttachment),ui(Ti.depthStencilAttachment)}function Mi(Ti){var Jn=Ti.framebuffer;ut(Jn,"must not double destroy framebuffer"),nt.deleteFramebuffer(Jn),Ti.framebuffer=null,fn.framebufferCount--,delete Kr[Ti.id]}function Un(Ti){var Jn;nt.bindFramebuffer(Cs,Ti.framebuffer);var Dn=Ti.colorAttachments;for(Jn=0;Jn<Dn.length;++Jn)In(zo+Jn,Dn[Jn]);for(Jn=Dn.length;Jn<br.maxColorAttachments;++Jn)nt.framebufferTexture2D(Cs,zo+Jn,Lf,null,0);nt.framebufferTexture2D(Cs,vh,Lf,null,0),nt.framebufferTexture2D(Cs,Xs,Lf,null,0),nt.framebufferTexture2D(Cs,Lv,Lf,null,0),In(Xs,Ti.depthAttachment),In(Lv,Ti.stencilAttachment),In(vh,Ti.depthStencilAttachment);var ra=nt.checkFramebufferStatus(Cs);!nt.isContextLost()&&ra!==Ff&&ut.raise("framebuffer configuration not supported, status = "+Z[ra]),nt.bindFramebuffer(Cs,sn.next?sn.next.framebuffer:null),sn.cur=sn.next,nt.getError()}function bi(Ti,Jn){var Dn=new Oi;fn.framebufferCount++;function ra(Li,$a){var ka;ut(sn.next!==Dn,"can not update framebuffer which is currently in use");var ga=0,Co=0,mu=!0,Bu=!0,co=null,hs=!0,Vo="rgba",su="uint8",Vs=1,Fs=null,Qs=null,Nu=null,As=!1;if(typeof Li=="number")ga=Li|0,Co=$a|0||ga;else if(!Li)ga=Co=1;else{ut.type(Li,"object","invalid arguments for framebuffer");var Ga=Li;if("shape"in Ga){var Yu=Ga.shape;ut(Array.isArray(Yu)&&Yu.length>=2,"invalid shape for framebuffer"),ga=Yu[0],Co=Yu[1]}else"radius"in Ga&&(ga=Co=Ga.radius),"width"in Ga&&(ga=Ga.width),"height"in Ga&&(Co=Ga.height);("color"in Ga||"colors"in Ga)&&(co=Ga.color||Ga.colors,Array.isArray(co)&&ut(co.length===1||Kt.webgl_draw_buffers,"multiple render targets not supported")),co||("colorCount"in Ga&&(Vs=Ga.colorCount|0,ut(Vs>0,"invalid color buffer count")),"colorTexture"in Ga&&(hs=!!Ga.colorTexture,Vo="rgba4"),"colorType"in Ga&&(su=Ga.colorType,hs?(ut(Kt.oes_texture_float||!(su==="float"||su==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ut(Kt.oes_texture_half_float||!(su==="half float"||su==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):su==="half float"||su==="float16"?(ut(Kt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Vo="rgba16f"):(su==="float"||su==="float32")&&(ut(Kt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Vo="rgba32f"),ut.oneOf(su,hi,"invalid color type")),"colorFormat"in Ga&&(Vo=Ga.colorFormat,ti.indexOf(Vo)>=0?hs=!0:Vn.indexOf(Vo)>=0?hs=!1:hs?ut.oneOf(Ga.colorFormat,ti,"invalid color format for texture"):ut.oneOf(Ga.colorFormat,Vn,"invalid color format for renderbuffer"))),("depthTexture"in Ga||"depthStencilTexture"in Ga)&&(As=!!(Ga.depthTexture||Ga.depthStencilTexture),ut(!As||Kt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ga&&(typeof Ga.depth=="boolean"?mu=Ga.depth:(Fs=Ga.depth,Bu=!1)),"stencil"in Ga&&(typeof Ga.stencil=="boolean"?Bu=Ga.stencil:(Qs=Ga.stencil,mu=!1)),"depthStencil"in Ga&&(typeof Ga.depthStencil=="boolean"?mu=Bu=Ga.depthStencil:(Nu=Ga.depthStencil,mu=!1,Bu=!1))}var To=null,ma=null,ba=null,xo=null;if(Array.isArray(co))To=co.map(di);else if(co)To=[di(co)];else for(To=new Array(Vs),ka=0;ka<Vs;++ka)To[ka]=qr(ga,Co,hs,Vo,su);ut(Kt.webgl_draw_buffers||To.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ut(To.length<=br.maxColorAttachments,"too many color attachments, not supported"),ga=ga||To[0].width,Co=Co||To[0].height,Fs?ma=di(Fs):mu&&!Bu&&(ma=qr(ga,Co,As,"depth","uint32")),Qs?ba=di(Qs):Bu&&!mu&&(ba=qr(ga,Co,!1,"stencil","uint8")),Nu?xo=di(Nu):!Fs&&!Qs&&Bu&&mu&&(xo=qr(ga,Co,As,"depth stencil","depth stencil")),ut(!!Fs+!!Qs+!!Nu<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Hs=null;for(ka=0;ka<To.length;++ka)if(xi(To[ka],ga,Co),ut(!To[ka]||To[ka].texture&&He.indexOf(To[ka].texture._texture.format)>=0||To[ka].renderbuffer&&I.indexOf(To[ka].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ka+" is invalid"),To[ka]&&To[ka].texture){var yu=qc[To[ka].texture._texture.format]*er[To[ka].texture._texture.type];Hs===null?Hs=yu:ut(Hs===yu,"all color attachments much have the same number of bits per pixel.")}return xi(ma,ga,Co),ut(!ma||ma.texture&&ma.texture._texture.format===wr||ma.renderbuffer&&ma.renderbuffer._renderbuffer.format===$h,"invalid depth attachment for framebuffer object"),xi(ba,ga,Co),ut(!ba||ba.renderbuffer&&ba.renderbuffer._renderbuffer.format===Cl,"invalid stencil attachment for framebuffer object"),xi(xo,ga,Co),ut(!xo||xo.texture&&xo.texture._texture.format===Ap||xo.renderbuffer&&xo.renderbuffer._renderbuffer.format===Ap,"invalid depth-stencil attachment for framebuffer object"),Qn(Dn),Dn.width=ga,Dn.height=Co,Dn.colorAttachments=To,Dn.depthAttachment=ma,Dn.stencilAttachment=ba,Dn.depthStencilAttachment=xo,ra.color=To.map(En),ra.depth=En(ma),ra.stencil=En(ba),ra.depthStencil=En(xo),ra.width=Dn.width,ra.height=Dn.height,Un(Dn),ra}function Ja(Li,$a){ut(sn.next!==Dn,"can not resize a framebuffer which is currently in use");var ka=Math.max(Li|0,1),ga=Math.max($a|0||ka,1);if(ka===Dn.width&&ga===Dn.height)return ra;for(var Co=Dn.colorAttachments,mu=0;mu<Co.length;++mu)ii(Co[mu],ka,ga);return ii(Dn.depthAttachment,ka,ga),ii(Dn.stencilAttachment,ka,ga),ii(Dn.depthStencilAttachment,ka,ga),Dn.width=ra.width=ka,Dn.height=ra.height=ga,Un(Dn),ra}return ra(Ti,Jn),k(ra,{resize:Ja,_reglType:"framebuffer",_framebuffer:Dn,destroy:function(){Mi(Dn),Qn(Dn)},use:function(Li){sn.setFBO({framebuffer:ra},Li)}})}function ua(Ti){var Jn=Array(6);function Dn(Ja){var Li;ut(Jn.indexOf(sn.next)<0,"can not update framebuffer which is currently in use");var $a={color:null},ka=0,ga=null,Co="rgba",mu="uint8",Bu=1;if(typeof Ja=="number")ka=Ja|0;else if(!Ja)ka=1;else{ut.type(Ja,"object","invalid arguments for framebuffer");var co=Ja;if("shape"in co){var hs=co.shape;ut(Array.isArray(hs)&&hs.length>=2,"invalid shape for framebuffer"),ut(hs[0]===hs[1],"cube framebuffer must be square"),ka=hs[0]}else"radius"in co&&(ka=co.radius|0),"width"in co?(ka=co.width|0,"height"in co&&ut(co.height===ka,"must be square")):"height"in co&&(ka=co.height|0);("color"in co||"colors"in co)&&(ga=co.color||co.colors,Array.isArray(ga)&&ut(ga.length===1||Kt.webgl_draw_buffers,"multiple render targets not supported")),ga||("colorCount"in co&&(Bu=co.colorCount|0,ut(Bu>0,"invalid color buffer count")),"colorType"in co&&(ut.oneOf(co.colorType,hi,"invalid color type"),mu=co.colorType),"colorFormat"in co&&(Co=co.colorFormat,ut.oneOf(co.colorFormat,ti,"invalid color format for texture"))),"depth"in co&&($a.depth=co.depth),"stencil"in co&&($a.stencil=co.stencil),"depthStencil"in co&&($a.depthStencil=co.depthStencil)}var Vo;if(ga)if(Array.isArray(ga))for(Vo=[],Li=0;Li<ga.length;++Li)Vo[Li]=ga[Li];else Vo=[ga];else{Vo=Array(Bu);var su={radius:ka,format:Co,type:mu};for(Li=0;Li<Bu;++Li)Vo[Li]=dn.createCube(su)}for($a.color=Array(Vo.length),Li=0;Li<Vo.length;++Li){var Vs=Vo[Li];ut(typeof Vs=="function"&&Vs._reglType==="textureCube","invalid cube map"),ka=ka||Vs.width,ut(Vs.width===ka&&Vs.height===ka,"invalid cube map shape"),$a.color[Li]={target:dh,data:Vo[Li]}}for(Li=0;Li<6;++Li){for(var Fs=0;Fs<Vo.length;++Fs)$a.color[Fs].target=dh+Li;Li>0&&($a.depth=Jn[0].depth,$a.stencil=Jn[0].stencil,$a.depthStencil=Jn[0].depthStencil),Jn[Li]?Jn[Li]($a):Jn[Li]=bi($a)}return k(Dn,{width:ka,height:ka,color:Vo})}function ra(Ja){var Li,$a=Ja|0;if(ut($a>0&&$a<=br.maxCubeMapSize,"invalid radius for cube fbo"),$a===Dn.width)return Dn;var ka=Dn.color;for(Li=0;Li<ka.length;++Li)ka[Li].resize($a);for(Li=0;Li<6;++Li)Jn[Li].resize($a);return Dn.width=Dn.height=$a,Dn}return Dn(Ti),k(Dn,{faces:Jn,resize:ra,_reglType:"framebufferCube",destroy:function(){Jn.forEach(function(Ja){Ja.destroy()})}})}function Ra(){sn.cur=null,sn.next=null,sn.dirty=!0,Qa(Kr).forEach(function(Ti){Ti.framebuffer=nt.createFramebuffer(),Un(Ti)})}return k(sn,{getFramebuffer:function(Ti){if(typeof Ti=="function"&&Ti._reglType==="framebuffer"){var Jn=Ti._framebuffer;if(Jn instanceof Oi)return Jn}return null},create:bi,createCube:ua,clear:function(){Qa(Kr).forEach(Mi)},restore:Ra})}var ae=5126,Ae=34962;function at(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ae,this.offset=0,this.stride=0,this.divisor=0}function bt(nt,Kt,br,dn,kn){for(var fn=br.maxAttributes,sn=new Array(fn),ti=0;ti<fn;++ti)sn[ti]=new at;var Vn=0,hi={},ni={Record:at,scope:{},state:sn,currentVAO:null,targetVAO:null,restore:xi()?Kr:function(){},createVAO:Oi,getVAO:di,destroyBuffer:ui,setVAO:xi()?qr:En,clear:xi()?ii:function(){}};function ui(Qn){for(var Mi=0;Mi<sn.length;++Mi){var Un=sn[Mi];Un.buffer===Qn&&(nt.disableVertexAttribArray(Mi),Un.buffer=null)}}function xi(){return Kt.oes_vertex_array_object}function In(){return Kt.angle_instanced_arrays}function di(Qn){return typeof Qn=="function"&&Qn._vao?Qn._vao:null}function qr(Qn){if(Qn!==ni.currentVAO){var Mi=xi();Qn?Mi.bindVertexArrayOES(Qn.vao):Mi.bindVertexArrayOES(null),ni.currentVAO=Qn}}function En(Qn){if(Qn!==ni.currentVAO){if(Qn)Qn.bindAttrs();else for(var Mi=In(),Un=0;Un<sn.length;++Un){var bi=sn[Un];bi.buffer?(nt.enableVertexAttribArray(Un),nt.vertexAttribPointer(Un,bi.size,bi.type,bi.normalized,bi.stride,bi.offfset),Mi&&Mi.vertexAttribDivisorANGLE(Un,bi.divisor)):(nt.disableVertexAttribArray(Un),nt.vertexAttrib4f(Un,bi.x,bi.y,bi.z,bi.w))}ni.currentVAO=Qn}}function ii(){Qa(hi).forEach(function(Qn){Qn.destroy()})}function Ci(){this.id=++Vn,this.attributes=[];var Qn=xi();Qn?this.vao=Qn.createVertexArrayOES():this.vao=null,hi[this.id]=this,this.buffers=[]}Ci.prototype.bindAttrs=function(){for(var Qn=In(),Mi=this.attributes,Un=0;Un<Mi.length;++Un){var bi=Mi[Un];bi.buffer?(nt.enableVertexAttribArray(Un),nt.bindBuffer(Ae,bi.buffer.buffer),nt.vertexAttribPointer(Un,bi.size,bi.type,bi.normalized,bi.stride,bi.offset),Qn&&Qn.vertexAttribDivisorANGLE(Un,bi.divisor)):(nt.disableVertexAttribArray(Un),nt.vertexAttrib4f(Un,bi.x,bi.y,bi.z,bi.w))}for(var ua=Mi.length;ua<fn;++ua)nt.disableVertexAttribArray(ua)},Ci.prototype.refresh=function(){var Qn=xi();Qn&&(Qn.bindVertexArrayOES(this.vao),this.bindAttrs(),ni.currentVAO=this)},Ci.prototype.destroy=function(){if(this.vao){var Qn=xi();this===ni.currentVAO&&(ni.currentVAO=null,Qn.bindVertexArrayOES(null)),Qn.deleteVertexArrayOES(this.vao),this.vao=null}hi[this.id]&&(delete hi[this.id],dn.vaoCount-=1)};function Kr(){var Qn=xi();Qn&&Qa(hi).forEach(function(Mi){Mi.refresh()})}function Oi(Qn){var Mi=new Ci;dn.vaoCount+=1;function Un(bi){ut(Array.isArray(bi),"arguments to vertex array constructor must be an array"),ut(bi.length<fn,"too many attributes"),ut(bi.length>0,"must specify at least one attribute");for(var ua=0;ua<Mi.buffers.length;++ua)Mi.buffers[ua].destroy();Mi.buffers.length=0;var Ra=Mi.attributes;Ra.length=bi.length;for(var Ti=0;Ti<bi.length;++Ti){var Jn=bi[Ti],Dn=Ra[Ti]=new at;if(Array.isArray(Jn)||N(Jn)||Do(Jn)){var ra=kn.create(Jn,Ae,!1,!0);Dn.buffer=kn.getBuffer(ra),Dn.size=Dn.buffer.dimension|0,Dn.normalized=!1,Dn.type=Dn.buffer.dtype,Dn.offset=0,Dn.stride=0,Dn.divisor=0,Dn.state=1,Mi.buffers.push(ra)}else kn.getBuffer(Jn)?(Dn.buffer=kn.getBuffer(Jn),Dn.size=Dn.buffer.dimension|0,Dn.normalized=!1,Dn.type=Dn.buffer.dtype,Dn.offset=0,Dn.stride=0,Dn.divisor=0,Dn.state=1):kn.getBuffer(Jn.buffer)?(Dn.buffer=kn.getBuffer(Jn.buffer),Dn.size=(+Jn.size||Dn.buffer.dimension)|0,Dn.normalized=!!Jn.normalized||!1,"type"in Jn?(ut.parameter(Jn.type,du,"invalid buffer type"),Dn.type=du[Jn.type]):Dn.type=Dn.buffer.dtype,Dn.offset=(Jn.offset||0)|0,Dn.stride=(Jn.stride||0)|0,Dn.divisor=(Jn.divisor||0)|0,Dn.state=1,ut(Dn.size>=1&&Dn.size<=4,"size must be between 1 and 4"),ut(Dn.offset>=0,"invalid offset"),ut(Dn.stride>=0&&Dn.stride<=255,"stride must be between 0 and 255"),ut(Dn.divisor>=0,"divisor must be positive"),ut(!Dn.divisor||!!Kt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Jn?(ut(Ti>0,"first attribute must not be a constant"),Dn.x=+Jn.x||0,Dn.y=+Jn.y||0,Dn.z=+Jn.z||0,Dn.w=+Jn.w||0,Dn.state=2):ut(!1,"invalid attribute spec for location "+Ti)}return Mi.refresh(),Un}return Un.destroy=function(){Mi.destroy()},Un._vao=Mi,Un._reglType="vao",Un(Qn)}return ni}var Vt=35632,Wt=35633,$t=35718,dr=35721;function hr(nt,Kt,br,dn){var kn={},fn={};function sn(qr,En,ii,Ci){this.name=qr,this.id=En,this.location=ii,this.info=Ci}function ti(qr,En){for(var ii=0;ii<qr.length;++ii)if(qr[ii].id===En.id){qr[ii].location=En.location;return}qr.push(En)}function Vn(qr,En,ii){var Ci=qr===Vt?kn:fn,Kr=Ci[En];if(!Kr){var Oi=Kt.str(En);Kr=nt.createShader(qr),nt.shaderSource(Kr,Oi),nt.compileShader(Kr),ut.shaderError(nt,Kr,Oi,qr,ii),Ci[En]=Kr}return Kr}var hi={},ni=[],ui=0;function xi(qr,En){this.id=ui++,this.fragId=qr,this.vertId=En,this.program=null,this.uniforms=[],this.attributes=[],dn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function In(qr,En,ii){var Ci,Kr,Oi=Vn(Vt,qr.fragId),Qn=Vn(Wt,qr.vertId),Mi=qr.program=nt.createProgram();if(nt.attachShader(Mi,Oi),nt.attachShader(Mi,Qn),ii)for(Ci=0;Ci<ii.length;++Ci){var Un=ii[Ci];nt.bindAttribLocation(Mi,Un[0],Un[1])}nt.linkProgram(Mi),ut.linkError(nt,Mi,Kt.str(qr.fragId),Kt.str(qr.vertId),En);var bi=nt.getProgramParameter(Mi,$t);dn.profile&&(qr.stats.uniformsCount=bi);var ua=qr.uniforms;for(Ci=0;Ci<bi;++Ci)if(Kr=nt.getActiveUniform(Mi,Ci),Kr)if(Kr.size>1)for(var Ra=0;Ra<Kr.size;++Ra){var Ti=Kr.name.replace("[0]","["+Ra+"]");ti(ua,new sn(Ti,Kt.id(Ti),nt.getUniformLocation(Mi,Ti),Kr))}else ti(ua,new sn(Kr.name,Kt.id(Kr.name),nt.getUniformLocation(Mi,Kr.name),Kr));var Jn=nt.getProgramParameter(Mi,dr);dn.profile&&(qr.stats.attributesCount=Jn);var Dn=qr.attributes;for(Ci=0;Ci<Jn;++Ci)Kr=nt.getActiveAttrib(Mi,Ci),Kr&&ti(Dn,new sn(Kr.name,Kt.id(Kr.name),nt.getAttribLocation(Mi,Kr.name),Kr))}dn.profile&&(br.getMaxUniformsCount=function(){var qr=0;return ni.forEach(function(En){En.stats.uniformsCount>qr&&(qr=En.stats.uniformsCount)}),qr},br.getMaxAttributesCount=function(){var qr=0;return ni.forEach(function(En){En.stats.attributesCount>qr&&(qr=En.stats.attributesCount)}),qr});function di(){kn={},fn={};for(var qr=0;qr<ni.length;++qr)In(ni[qr],null,ni[qr].attributes.map(function(En){return[En.location,En.name]}))}return{clear:function(){var qr=nt.deleteShader.bind(nt);Qa(kn).forEach(qr),kn={},Qa(fn).forEach(qr),fn={},ni.forEach(function(En){nt.deleteProgram(En.program)}),ni.length=0,hi={},br.shaderCount=0},program:function(qr,En,ii,Ci){ut.command(qr>=0,"missing vertex shader",ii),ut.command(En>=0,"missing fragment shader",ii);var Kr=hi[En];Kr||(Kr=hi[En]={});var Oi=Kr[qr];if(Oi&&!Ci)return Oi;var Qn=new xi(En,qr);return br.shaderCount++,In(Qn,ii,Ci),Oi||(Kr[qr]=Qn),ni.push(Qn),Qn},restore:di,shader:Vn,frag:-1,vert:-1}}var Rr=6408,lr=5121,Ir=3333,Hr=5126;function en(nt,Kt,br,dn,kn,fn,sn){function ti(ni){var ui;Kt.next===null?(ut(kn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ui=lr):(ut(Kt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ui=Kt.next.colorAttachments[0].texture._texture.type,fn.oes_texture_float?(ut(ui===lr||ui===Hr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ui===Hr&&ut(sn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ut(ui===lr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var xi=0,In=0,di=dn.framebufferWidth,qr=dn.framebufferHeight,En=null;N(ni)?En=ni:ni&&(ut.type(ni,"object","invalid arguments to regl.read()"),xi=ni.x|0,In=ni.y|0,ut(xi>=0&&xi<dn.framebufferWidth,"invalid x offset for regl.read"),ut(In>=0&&In<dn.framebufferHeight,"invalid y offset for regl.read"),di=(ni.width||dn.framebufferWidth-xi)|0,qr=(ni.height||dn.framebufferHeight-In)|0,En=ni.data||null),En&&(ui===lr?ut(En instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ui===Hr&&ut(En instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ut(di>0&&di+xi<=dn.framebufferWidth,"invalid width for read pixels"),ut(qr>0&&qr+In<=dn.framebufferHeight,"invalid height for read pixels"),br();var ii=di*qr*4;return En||(ui===lr?En=new Uint8Array(ii):ui===Hr&&(En=En||new Float32Array(ii))),ut.isTypedArray(En,"data buffer for regl.read() must be a typedarray"),ut(En.byteLength>=ii,"data buffer for regl.read() too small"),nt.pixelStorei(Ir,4),nt.readPixels(xi,In,di,qr,Rr,ui,En),En}function Vn(ni){var ui;return Kt.setFBO({framebuffer:ni.framebuffer},function(){ui=ti(ni)}),ui}function hi(ni){return!ni||!("framebuffer"in ni)?ti(ni):Vn(ni)}return hi}function _n(nt){return Array.prototype.slice.call(nt)}function pn(nt){return _n(nt).join("")}function An(){var nt=0,Kt=[],br=[];function dn(ui){for(var xi=0;xi<br.length;++xi)if(br[xi]===ui)return Kt[xi];var In="g"+nt++;return Kt.push(In),br.push(ui),In}function kn(){var ui=[];function xi(){ui.push.apply(ui,_n(arguments))}var In=[];function di(){var qr="v"+nt++;return In.push(qr),arguments.length>0&&(ui.push(qr,"="),ui.push.apply(ui,_n(arguments)),ui.push(";")),qr}return k(xi,{def:di,toString:function(){return pn([In.length>0?"var "+In.join(",")+";":"",pn(ui)])}})}function fn(){var ui=kn(),xi=kn(),In=ui.toString,di=xi.toString;function qr(En,ii){xi(En,ii,"=",ui.def(En,ii),";")}return k(function(){ui.apply(ui,_n(arguments))},{def:ui.def,entry:ui,exit:xi,save:qr,set:function(En,ii,Ci){qr(En,ii),ui(En,ii,"=",Ci,";")},toString:function(){return In()+di()}})}function sn(){var ui=pn(arguments),xi=fn(),In=fn(),di=xi.toString,qr=In.toString;return k(xi,{then:function(){return xi.apply(xi,_n(arguments)),this},else:function(){return In.apply(In,_n(arguments)),this},toString:function(){var En=qr();return En&&(En="else{"+En+"}"),pn(["if(",ui,"){",di(),"}",En])}})}var ti=kn(),Vn={};function hi(ui,xi){var In=[];function di(){var Kr="a"+In.length;return In.push(Kr),Kr}xi=xi||0;for(var qr=0;qr<xi;++qr)di();var En=fn(),ii=En.toString,Ci=Vn[ui]=k(En,{arg:di,toString:function(){return pn(["function(",In.join(),"){",ii(),"}"])}});return Ci}function ni(){var ui=['"use strict";',ti,"return {"];Object.keys(Vn).forEach(function(di){ui.push('"',di,'":',Vn[di].toString(),",")}),ui.push("}");var xi=pn(ui).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),In=Function.apply(null,Kt.concat(xi));return In.apply(null,br)}return{global:ti,link:dn,block:kn,proc:hi,scope:fn,cond:sn,compile:ni}}var Ln="xyzw".split(""),pi=5121,oi=1,Pi=2,ta=0,sa=1,Ki=2,_o=3,Bi=4,Ia="dither",La="blend.enable",Aa="blend.color",fa="blend.equation",Ma="blend.func",Ea="depth.enable",ha="depth.func",Au="depth.range",Ls="depth.mask",$u="colorMask",Mu="cull.enable",es="cull.face",ys="frontFace",Ru="lineWidth",gu="polygonOffset.enable",Qc="polygonOffset.offset",nl="sample.alpha",lc="sample.enable",hl="sample.coverage",Nf="stencil.enable",vf="stencil.mask",Jc="stencil.func",gf="stencil.opFront",cc="stencil.opBack",fc="scissor.enable",mf="scissor.box",Lu="viewport",Ts="profile",ou="framebuffer",Tl="vert",ql="frag",go="elements",Xu="primitive",Ks="count",yf="offset",ud="instances",_f="vao",Fv="Width",Al="Height",Zl=ou+Fv,Vl=ou+Al,zf=Lu+Fv,Rp=Lu+Al,Uf="drawingBuffer",Ml=Uf+Fv,Bv=Uf+Al,vg=[Ma,fa,Jc,gf,cc,hl,Lu,mf,Qc],hc=34962,C0=34963,T0=35632,A0=35633,Nv=3553,zv=34067,Wd=2884,M0=3042,Xh=3024,ld=2960,fm=2929,Yh=3089,t_=32823,hm=32926,R0=32928,gg=5126,mg=35664,Gd=35665,cd=35666,mh=5124,Ip=35667,_s=35668,fd=35669,Rc=35670,ei=35671,Ic=35672,Pp=35673,qs=35674,Pc=35675,pc=35676,Kh=35678,il=35680,Op=4,Oc=1028,hd=1029,Uv=2304,$d=2305,pd=32775,Zv=32776,ef=519,qh=7680,Xd=0,pm=1,Vv=32774,dm=513,fs=36160,yh=36064,Zf={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},dd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},_h={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},kp={frag:T0,vert:A0},Dp={cw:Uv,ccw:$d};function Rl(nt){return Array.isArray(nt)||N(nt)||Do(nt)}function Vf(nt){return nt.sort(function(Kt,br){return Kt===Lu?-1:br===Lu?1:Kt<br?-1:1})}function Xo(nt,Kt,br,dn){this.thisDep=nt,this.contextDep=Kt,this.propDep=br,this.append=dn}function Fu(nt){return nt&&!(nt.thisDep||nt.contextDep||nt.propDep)}function Iu(nt){return new Xo(!1,!1,!1,nt)}function pl(nt,Kt){var br=nt.type;if(br===ta){var dn=nt.data.length;return new Xo(!0,dn>=1,dn>=2,Kt)}else if(br===Bi){var kn=nt.data;return new Xo(kn.thisDep,kn.contextDep,kn.propDep,Kt)}else return new Xo(br===_o,br===Ki,br===sa,Kt)}var vm=new Xo(!1,!1,!1,function(){});function Qh(nt,Kt,br,dn,kn,fn,sn,ti,Vn,hi,ni,ui,xi,In,di){var qr=hi.Record,En={add:32774,subtract:32778,"reverse subtract":32779};br.ext_blend_minmax&&(En.min=pd,En.max=Zv);var ii=br.angle_instanced_arrays,Ci=br.webgl_draw_buffers,Kr={dirty:!0,profile:di.profile},Oi={},Qn=[],Mi={},Un={};function bi(mt){return mt.replace(".","_")}function ua(mt,ir,Ct){var hn=bi(mt);Qn.push(mt),Oi[hn]=Kr[hn]=!!Ct,Mi[hn]=ir}function Ra(mt,ir,Ct){var hn=bi(mt);Qn.push(mt),Array.isArray(Ct)?(Kr[hn]=Ct.slice(),Oi[hn]=Ct.slice()):Kr[hn]=Oi[hn]=Ct,Un[hn]=ir}ua(Ia,Xh),ua(La,M0),Ra(Aa,"blendColor",[0,0,0,0]),Ra(fa,"blendEquationSeparate",[Vv,Vv]),Ra(Ma,"blendFuncSeparate",[pm,Xd,pm,Xd]),ua(Ea,fm,!0),Ra(ha,"depthFunc",dm),Ra(Au,"depthRange",[0,1]),Ra(Ls,"depthMask",!0),Ra($u,$u,[!0,!0,!0,!0]),ua(Mu,Wd),Ra(es,"cullFace",hd),Ra(ys,ys,$d),Ra(Ru,Ru,1),ua(gu,t_),Ra(Qc,"polygonOffset",[0,0]),ua(nl,hm),ua(lc,R0),Ra(hl,"sampleCoverage",[1,!1]),ua(Nf,ld),Ra(vf,"stencilMask",-1),Ra(Jc,"stencilFunc",[ef,0,-1]),Ra(gf,"stencilOpSeparate",[Oc,qh,qh,qh]),Ra(cc,"stencilOpSeparate",[hd,qh,qh,qh]),ua(fc,Yh),Ra(mf,"scissor",[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]),Ra(Lu,Lu,[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]);var Ti={gl:nt,context:xi,strings:Kt,next:Oi,current:Kr,draw:ui,elements:fn,buffer:kn,shader:ni,attributes:hi.state,vao:hi,uniforms:Vn,framebuffer:ti,extensions:br,timer:In,isBufferArgs:Rl},Jn={primTypes:rc,compareFuncs:xf,blendFuncs:Zf,blendEquations:En,stencilOps:_h,glTypes:du,orientationType:Dp};ut.optional(function(){Ti.isArrayLike=ss}),Ci&&(Jn.backBuffer=[hd],Jn.drawBuffer=It(dn.maxDrawbuffers,function(mt){return mt===0?[0]:It(mt,function(ir){return yh+ir})}));var Dn=0;function ra(){var mt=An(),ir=mt.link,Ct=mt.global;mt.id=Dn++,mt.batchId="0";var hn=ir(Ti),an=mt.shared={props:"a0"};Object.keys(Ti).forEach(function(Lr){an[Lr]=Ct.def(hn,".",Lr)}),ut.optional(function(){mt.CHECK=ir(ut),mt.commandStr=ut.guessCommand(),mt.command=ir(mt.commandStr),mt.assert=function(Lr,tr,Nr){Lr("if(!(",tr,"))",this.CHECK,".commandRaise(",ir(Nr),",",this.command,");")},Jn.invalidBlendCombinations=dd});var Pr=mt.next={},Br=mt.current={};Object.keys(Un).forEach(function(Lr){Array.isArray(Kr[Lr])&&(Pr[Lr]=Ct.def(an.next,".",Lr),Br[Lr]=Ct.def(an.current,".",Lr))});var jr=mt.constants={};Object.keys(Jn).forEach(function(Lr){jr[Lr]=Ct.def(JSON.stringify(Jn[Lr]))}),mt.invoke=function(Lr,tr){switch(tr.type){case ta:var Nr=["this",an.context,an.props,mt.batchId];return Lr.def(ir(tr.data),".call(",Nr.slice(0,Math.max(tr.data.length+1,4)),")");case sa:return Lr.def(an.props,tr.data);case Ki:return Lr.def(an.context,tr.data);case _o:return Lr.def("this",tr.data);case Bi:return tr.data.append(mt,Lr),tr.data.ref}},mt.attribCache={};var pr={};return mt.scopeAttrib=function(Lr){var tr=Kt.id(Lr);if(tr in pr)return pr[tr];var Nr=hi.scope[tr];Nr||(Nr=hi.scope[tr]=new qr);var xn=pr[tr]=ir(Nr);return xn},mt}function Ja(mt){var ir=mt.static,Ct=mt.dynamic,hn;if(Ts in ir){var an=!!ir[Ts];hn=Iu(function(Br,jr){return an}),hn.enable=an}else if(Ts in Ct){var Pr=Ct[Ts];hn=pl(Pr,function(Br,jr){return Br.invoke(jr,Pr)})}return hn}function Li(mt,ir){var Ct=mt.static,hn=mt.dynamic;if(ou in Ct){var an=Ct[ou];return an?(an=ti.getFramebuffer(an),ut.command(an,"invalid framebuffer object"),Iu(function(Br,jr){var pr=Br.link(an),Lr=Br.shared;jr.set(Lr.framebuffer,".next",pr);var tr=Lr.context;return jr.set(tr,"."+Zl,pr+".width"),jr.set(tr,"."+Vl,pr+".height"),pr})):Iu(function(Br,jr){var pr=Br.shared;jr.set(pr.framebuffer,".next","null");var Lr=pr.context;return jr.set(Lr,"."+Zl,Lr+"."+Ml),jr.set(Lr,"."+Vl,Lr+"."+Bv),"null"})}else if(ou in hn){var Pr=hn[ou];return pl(Pr,function(Br,jr){var pr=Br.invoke(jr,Pr),Lr=Br.shared,tr=Lr.framebuffer,Nr=jr.def(tr,".getFramebuffer(",pr,")");ut.optional(function(){Br.assert(jr,"!"+pr+"||"+Nr,"invalid framebuffer object")}),jr.set(tr,".next",Nr);var xn=Lr.context;return jr.set(xn,"."+Zl,Nr+"?"+Nr+".width:"+xn+"."+Ml),jr.set(xn,"."+Vl,Nr+"?"+Nr+".height:"+xn+"."+Bv),Nr})}else return null}function $a(mt,ir,Ct){var hn=mt.static,an=mt.dynamic;function Pr(pr){if(pr in hn){var Lr=hn[pr];ut.commandType(Lr,"object","invalid "+pr,Ct.commandStr);var tr=!0,Nr=Lr.x|0,xn=Lr.y|0,bn,Wn;return"width"in Lr?(bn=Lr.width|0,ut.command(bn>=0,"invalid "+pr,Ct.commandStr)):tr=!1,"height"in Lr?(Wn=Lr.height|0,ut.command(Wn>=0,"invalid "+pr,Ct.commandStr)):tr=!1,new Xo(!tr&&ir&&ir.thisDep,!tr&&ir&&ir.contextDep,!tr&&ir&&ir.propDep,function(Xi,Nn){var Wi=Xi.shared.context,ya=bn;"width"in Lr||(ya=Nn.def(Wi,".",Zl,"-",Nr));var Da=Wn;return"height"in Lr||(Da=Nn.def(Wi,".",Vl,"-",xn)),[Nr,xn,ya,Da]})}else if(pr in an){var Zn=an[pr],$n=pl(Zn,function(Xi,Nn){var Wi=Xi.invoke(Nn,Zn);ut.optional(function(){Xi.assert(Nn,Wi+"&&typeof "+Wi+'==="object"',"invalid "+pr)});var ya=Xi.shared.context,Da=Nn.def(Wi,".x|0"),Bo=Nn.def(Wi,".y|0"),Na=Nn.def('"width" in ',Wi,"?",Wi,".width|0:","(",ya,".",Zl,"-",Da,")"),Hl=Nn.def('"height" in ',Wi,"?",Wi,".height|0:","(",ya,".",Vl,"-",Bo,")");return ut.optional(function(){Xi.assert(Nn,Na+">=0&&"+Hl+">=0","invalid "+pr)}),[Da,Bo,Na,Hl]});return ir&&($n.thisDep=$n.thisDep||ir.thisDep,$n.contextDep=$n.contextDep||ir.contextDep,$n.propDep=$n.propDep||ir.propDep),$n}else return ir?new Xo(ir.thisDep,ir.contextDep,ir.propDep,function(Xi,Nn){var Wi=Xi.shared.context;return[0,0,Nn.def(Wi,".",Zl),Nn.def(Wi,".",Vl)]}):null}var Br=Pr(Lu);if(Br){var jr=Br;Br=new Xo(Br.thisDep,Br.contextDep,Br.propDep,function(pr,Lr){var tr=jr.append(pr,Lr),Nr=pr.shared.context;return Lr.set(Nr,"."+zf,tr[2]),Lr.set(Nr,"."+Rp,tr[3]),tr})}return{viewport:Br,scissor_box:Pr(mf)}}function ka(mt,ir){var Ct=mt.static,hn=typeof Ct[ql]=="string"&&typeof Ct[Tl]=="string";if(hn){if(Object.keys(ir.dynamic).length>0)return null;var an=ir.static,Pr=Object.keys(an);if(Pr.length>0&&typeof an[Pr[0]]=="number"){for(var Br=[],jr=0;jr<Pr.length;++jr)ut(typeof an[Pr[jr]]=="number","must specify all vertex attribute locations when using vaos"),Br.push([an[Pr[jr]]|0,Pr[jr]]);return Br}}return null}function ga(mt,ir,Ct){var hn=mt.static,an=mt.dynamic;function Pr(tr){if(tr in hn){var Nr=Kt.id(hn[tr]);ut.optional(function(){ni.shader(kp[tr],Nr,ut.guessCommand())});var xn=Iu(function(){return Nr});return xn.id=Nr,xn}else if(tr in an){var bn=an[tr];return pl(bn,function(Wn,Zn){var $n=Wn.invoke(Zn,bn),Xi=Zn.def(Wn.shared.strings,".id(",$n,")");return ut.optional(function(){Zn(Wn.shared.shader,".shader(",kp[tr],",",Xi,",",Wn.command,");")}),Xi})}return null}var Br=Pr(ql),jr=Pr(Tl),pr=null,Lr;return Fu(Br)&&Fu(jr)?(pr=ni.program(jr.id,Br.id,null,Ct),Lr=Iu(function(tr,Nr){return tr.link(pr)})):Lr=new Xo(Br&&Br.thisDep||jr&&jr.thisDep,Br&&Br.contextDep||jr&&jr.contextDep,Br&&Br.propDep||jr&&jr.propDep,function(tr,Nr){var xn=tr.shared.shader,bn;Br?bn=Br.append(tr,Nr):bn=Nr.def(xn,".",ql);var Wn;jr?Wn=jr.append(tr,Nr):Wn=Nr.def(xn,".",Tl);var Zn=xn+".program("+Wn+","+bn;return ut.optional(function(){Zn+=","+tr.command}),Nr.def(Zn+")")}),{frag:Br,vert:jr,progVar:Lr,program:pr}}function Co(mt,ir){var Ct=mt.static,hn=mt.dynamic;function an(){if(go in Ct){var tr=Ct[go];Rl(tr)?tr=fn.getElements(fn.create(tr,!0)):tr&&(tr=fn.getElements(tr),ut.command(tr,"invalid elements",ir.commandStr));var Nr=Iu(function(bn,Wn){if(tr){var Zn=bn.link(tr);return bn.ELEMENTS=Zn,Zn}return bn.ELEMENTS=null,null});return Nr.value=tr,Nr}else if(go in hn){var xn=hn[go];return pl(xn,function(bn,Wn){var Zn=bn.shared,$n=Zn.isBufferArgs,Xi=Zn.elements,Nn=bn.invoke(Wn,xn),Wi=Wn.def("null"),ya=Wn.def($n,"(",Nn,")"),Da=bn.cond(ya).then(Wi,"=",Xi,".createStream(",Nn,");").else(Wi,"=",Xi,".getElements(",Nn,");");return ut.optional(function(){bn.assert(Da.else,"!"+Nn+"||"+Wi,"invalid elements")}),Wn.entry(Da),Wn.exit(bn.cond(ya).then(Xi,".destroyStream(",Wi,");")),bn.ELEMENTS=Wi,Wi})}return null}var Pr=an();function Br(){if(Xu in Ct){var tr=Ct[Xu];return ut.commandParameter(tr,rc,"invalid primitve",ir.commandStr),Iu(function(xn,bn){return rc[tr]})}else if(Xu in hn){var Nr=hn[Xu];return pl(Nr,function(xn,bn){var Wn=xn.constants.primTypes,Zn=xn.invoke(bn,Nr);return ut.optional(function(){xn.assert(bn,Zn+" in "+Wn,"invalid primitive, must be one of "+Object.keys(rc))}),bn.def(Wn,"[",Zn,"]")})}else if(Pr)return Fu(Pr)?Pr.value?Iu(function(xn,bn){return bn.def(xn.ELEMENTS,".primType")}):Iu(function(){return Op}):new Xo(Pr.thisDep,Pr.contextDep,Pr.propDep,function(xn,bn){var Wn=xn.ELEMENTS;return bn.def(Wn,"?",Wn,".primType:",Op)});return null}function jr(tr,Nr){if(tr in Ct){var xn=Ct[tr]|0;return ut.command(!Nr||xn>=0,"invalid "+tr,ir.commandStr),Iu(function(Wn,Zn){return Nr&&(Wn.OFFSET=xn),xn})}else if(tr in hn){var bn=hn[tr];return pl(bn,function(Wn,Zn){var $n=Wn.invoke(Zn,bn);return Nr&&(Wn.OFFSET=$n,ut.optional(function(){Wn.assert(Zn,$n+">=0","invalid "+tr)})),$n})}else if(Nr&&Pr)return Iu(function(Wn,Zn){return Wn.OFFSET="0",0});return null}var pr=jr(yf,!0);function Lr(){if(Ks in Ct){var tr=Ct[Ks]|0;return ut.command(typeof tr=="number"&&tr>=0,"invalid vertex count",ir.commandStr),Iu(function(){return tr})}else if(Ks in hn){var Nr=hn[Ks];return pl(Nr,function(Wn,Zn){var $n=Wn.invoke(Zn,Nr);return ut.optional(function(){Wn.assert(Zn,"typeof "+$n+'==="number"&&'+$n+">=0&&"+$n+"===("+$n+"|0)","invalid vertex count")}),$n})}else if(Pr)if(Fu(Pr)){if(Pr)return pr?new Xo(pr.thisDep,pr.contextDep,pr.propDep,function(Wn,Zn){var $n=Zn.def(Wn.ELEMENTS,".vertCount-",Wn.OFFSET);return ut.optional(function(){Wn.assert(Zn,$n+">=0","invalid vertex offset/element buffer too small")}),$n}):Iu(function(Wn,Zn){return Zn.def(Wn.ELEMENTS,".vertCount")});var xn=Iu(function(){return-1});return ut.optional(function(){xn.MISSING=!0}),xn}else{var bn=new Xo(Pr.thisDep||pr.thisDep,Pr.contextDep||pr.contextDep,Pr.propDep||pr.propDep,function(Wn,Zn){var $n=Wn.ELEMENTS;return Wn.OFFSET?Zn.def($n,"?",$n,".vertCount-",Wn.OFFSET,":-1"):Zn.def($n,"?",$n,".vertCount:-1")});return ut.optional(function(){bn.DYNAMIC=!0}),bn}return null}return{elements:Pr,primitive:Br(),count:Lr(),instances:jr(ud,!1),offset:pr}}function mu(mt,ir){var Ct=mt.static,hn=mt.dynamic,an={};return Qn.forEach(function(Pr){var Br=bi(Pr);function jr(pr,Lr){if(Pr in Ct){var tr=pr(Ct[Pr]);an[Br]=Iu(function(){return tr})}else if(Pr in hn){var Nr=hn[Pr];an[Br]=pl(Nr,function(xn,bn){return Lr(xn,bn,xn.invoke(bn,Nr))})}}switch(Pr){case Mu:case La:case Ia:case Nf:case Ea:case fc:case gu:case nl:case lc:case Ls:return jr(function(pr){return ut.commandType(pr,"boolean",Pr,ir.commandStr),pr},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,"typeof "+tr+'==="boolean"',"invalid flag "+Pr,pr.commandStr)}),tr});case ha:return jr(function(pr){return ut.commandParameter(pr,xf,"invalid "+Pr,ir.commandStr),xf[pr]},function(pr,Lr,tr){var Nr=pr.constants.compareFuncs;return ut.optional(function(){pr.assert(Lr,tr+" in "+Nr,"invalid "+Pr+", must be one of "+Object.keys(xf))}),Lr.def(Nr,"[",tr,"]")});case Au:return jr(function(pr){return ut.command(ss(pr)&&pr.length===2&&typeof pr[0]=="number"&&typeof pr[1]=="number"&&pr[0]<=pr[1],"depth range is 2d array",ir.commandStr),pr},function(pr,Lr,tr){ut.optional(function(){pr.assert(Lr,pr.shared.isArrayLike+"("+tr+")&&"+tr+".length===2&&typeof "+tr+'[0]==="number"&&typeof '+tr+'[1]==="number"&&'+tr+"[0]<="+tr+"[1]","depth range must be a 2d array")});var Nr=Lr.def("+",tr,"[0]"),xn=Lr.def("+",tr,"[1]");return[Nr,xn]});case Ma:return jr(function(pr){ut.commandType(pr,"object","blend.func",ir.commandStr);var Lr="srcRGB"in pr?pr.srcRGB:pr.src,tr="srcAlpha"in pr?pr.srcAlpha:pr.src,Nr="dstRGB"in pr?pr.dstRGB:pr.dst,xn="dstAlpha"in pr?pr.dstAlpha:pr.dst;return ut.commandParameter(Lr,Zf,Br+".srcRGB",ir.commandStr),ut.commandParameter(tr,Zf,Br+".srcAlpha",ir.commandStr),ut.commandParameter(Nr,Zf,Br+".dstRGB",ir.commandStr),ut.commandParameter(xn,Zf,Br+".dstAlpha",ir.commandStr),ut.command(dd.indexOf(Lr+", "+Nr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Lr+", "+Nr+")",ir.commandStr),[Zf[Lr],Zf[Nr],Zf[tr],Zf[xn]]},function(pr,Lr,tr){var Nr=pr.constants.blendFuncs;ut.optional(function(){pr.assert(Lr,tr+"&&typeof "+tr+'==="object"',"invalid blend func, must be an object")});function xn(Wi,ya){var Da=Lr.def('"',Wi,ya,'" in ',tr,"?",tr,".",Wi,ya,":",tr,".",Wi);return ut.optional(function(){pr.assert(Lr,Da+" in "+Nr,"invalid "+Pr+"."+Wi+ya+", must be one of "+Object.keys(Zf))}),Da}var bn=xn("src","RGB"),Wn=xn("dst","RGB");ut.optional(function(){var Wi=pr.constants.invalidBlendCombinations;pr.assert(Lr,Wi+".indexOf("+bn+'+", "+'+Wn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Zn=Lr.def(Nr,"[",bn,"]"),$n=Lr.def(Nr,"[",xn("src","Alpha"),"]"),Xi=Lr.def(Nr,"[",Wn,"]"),Nn=Lr.def(Nr,"[",xn("dst","Alpha"),"]");return[Zn,Xi,$n,Nn]});case fa:return jr(function(pr){if(typeof pr=="string")return ut.commandParameter(pr,En,"invalid "+Pr,ir.commandStr),[En[pr],En[pr]];if(typeof pr=="object")return ut.commandParameter(pr.rgb,En,Pr+".rgb",ir.commandStr),ut.commandParameter(pr.alpha,En,Pr+".alpha",ir.commandStr),[En[pr.rgb],En[pr.alpha]];ut.commandRaise("invalid blend.equation",ir.commandStr)},function(pr,Lr,tr){var Nr=pr.constants.blendEquations,xn=Lr.def(),bn=Lr.def(),Wn=pr.cond("typeof ",tr,'==="string"');return ut.optional(function(){function Zn($n,Xi,Nn){pr.assert($n,Nn+" in "+Nr,"invalid "+Xi+", must be one of "+Object.keys(En))}Zn(Wn.then,Pr,tr),pr.assert(Wn.else,tr+"&&typeof "+tr+'==="object"',"invalid "+Pr),Zn(Wn.else,Pr+".rgb",tr+".rgb"),Zn(Wn.else,Pr+".alpha",tr+".alpha")}),Wn.then(xn,"=",bn,"=",Nr,"[",tr,"];"),Wn.else(xn,"=",Nr,"[",tr,".rgb];",bn,"=",Nr,"[",tr,".alpha];"),Lr(Wn),[xn,bn]});case Aa:return jr(function(pr){return ut.command(ss(pr)&&pr.length===4,"blend.color must be a 4d array",ir.commandStr),It(4,function(Lr){return+pr[Lr]})},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,pr.shared.isArrayLike+"("+tr+")&&"+tr+".length===4","blend.color must be a 4d array")}),It(4,function(Nr){return Lr.def("+",tr,"[",Nr,"]")})});case vf:return jr(function(pr){return ut.commandType(pr,"number",Br,ir.commandStr),pr|0},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,"typeof "+tr+'==="number"',"invalid stencil.mask")}),Lr.def(tr,"|0")});case Jc:return jr(function(pr){ut.commandType(pr,"object",Br,ir.commandStr);var Lr=pr.cmp||"keep",tr=pr.ref||0,Nr="mask"in pr?pr.mask:-1;return ut.commandParameter(Lr,xf,Pr+".cmp",ir.commandStr),ut.commandType(tr,"number",Pr+".ref",ir.commandStr),ut.commandType(Nr,"number",Pr+".mask",ir.commandStr),[xf[Lr],tr,Nr]},function(pr,Lr,tr){var Nr=pr.constants.compareFuncs;ut.optional(function(){function Zn(){pr.assert(Lr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Zn(tr+"&&typeof ",tr,'==="object"'),Zn('!("cmp" in ',tr,")||(",tr,".cmp in ",Nr,")")});var xn=Lr.def('"cmp" in ',tr,"?",Nr,"[",tr,".cmp]",":",qh),bn=Lr.def(tr,".ref|0"),Wn=Lr.def('"mask" in ',tr,"?",tr,".mask|0:-1");return[xn,bn,Wn]});case gf:case cc:return jr(function(pr){ut.commandType(pr,"object",Br,ir.commandStr);var Lr=pr.fail||"keep",tr=pr.zfail||"keep",Nr=pr.zpass||"keep";return ut.commandParameter(Lr,_h,Pr+".fail",ir.commandStr),ut.commandParameter(tr,_h,Pr+".zfail",ir.commandStr),ut.commandParameter(Nr,_h,Pr+".zpass",ir.commandStr),[Pr===cc?hd:Oc,_h[Lr],_h[tr],_h[Nr]]},function(pr,Lr,tr){var Nr=pr.constants.stencilOps;ut.optional(function(){pr.assert(Lr,tr+"&&typeof "+tr+'==="object"',"invalid "+Pr)});function xn(bn){return ut.optional(function(){pr.assert(Lr,'!("'+bn+'" in '+tr+")||("+tr+"."+bn+" in "+Nr+")","invalid "+Pr+"."+bn+", must be one of "+Object.keys(_h))}),Lr.def('"',bn,'" in ',tr,"?",Nr,"[",tr,".",bn,"]:",qh)}return[Pr===cc?hd:Oc,xn("fail"),xn("zfail"),xn("zpass")]});case Qc:return jr(function(pr){ut.commandType(pr,"object",Br,ir.commandStr);var Lr=pr.factor|0,tr=pr.units|0;return ut.commandType(Lr,"number",Br+".factor",ir.commandStr),ut.commandType(tr,"number",Br+".units",ir.commandStr),[Lr,tr]},function(pr,Lr,tr){ut.optional(function(){pr.assert(Lr,tr+"&&typeof "+tr+'==="object"',"invalid "+Pr)});var Nr=Lr.def(tr,".factor|0"),xn=Lr.def(tr,".units|0");return[Nr,xn]});case es:return jr(function(pr){var Lr=0;return pr==="front"?Lr=Oc:pr==="back"&&(Lr=hd),ut.command(!!Lr,Br,ir.commandStr),Lr},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,tr+'==="front"||'+tr+'==="back"',"invalid cull.face")}),Lr.def(tr,'==="front"?',Oc,":",hd)});case Ru:return jr(function(pr){return ut.command(typeof pr=="number"&&pr>=dn.lineWidthDims[0]&&pr<=dn.lineWidthDims[1],"invalid line width, must be a positive number between "+dn.lineWidthDims[0]+" and "+dn.lineWidthDims[1],ir.commandStr),pr},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,"typeof "+tr+'==="number"&&'+tr+">="+dn.lineWidthDims[0]+"&&"+tr+"<="+dn.lineWidthDims[1],"invalid line width")}),tr});case ys:return jr(function(pr){return ut.commandParameter(pr,Dp,Br,ir.commandStr),Dp[pr]},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,tr+'==="cw"||'+tr+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Lr.def(tr+'==="cw"?'+Uv+":"+$d)});case $u:return jr(function(pr){return ut.command(ss(pr)&&pr.length===4,"color.mask must be length 4 array",ir.commandStr),pr.map(function(Lr){return!!Lr})},function(pr,Lr,tr){return ut.optional(function(){pr.assert(Lr,pr.shared.isArrayLike+"("+tr+")&&"+tr+".length===4","invalid color.mask")}),It(4,function(Nr){return"!!"+tr+"["+Nr+"]"})});case hl:return jr(function(pr){ut.command(typeof pr=="object"&&pr,Br,ir.commandStr);var Lr="value"in pr?pr.value:1,tr=!!pr.invert;return ut.command(typeof Lr=="number"&&Lr>=0&&Lr<=1,"sample.coverage.value must be a number between 0 and 1",ir.commandStr),[Lr,tr]},function(pr,Lr,tr){ut.optional(function(){pr.assert(Lr,tr+"&&typeof "+tr+'==="object"',"invalid sample.coverage")});var Nr=Lr.def('"value" in ',tr,"?+",tr,".value:1"),xn=Lr.def("!!",tr,".invert");return[Nr,xn]})}}),an}function Bu(mt,ir){var Ct=mt.static,hn=mt.dynamic,an={};return Object.keys(Ct).forEach(function(Pr){var Br=Ct[Pr],jr;if(typeof Br=="number"||typeof Br=="boolean")jr=Iu(function(){return Br});else if(typeof Br=="function"){var pr=Br._reglType;pr==="texture2d"||pr==="textureCube"?jr=Iu(function(Lr){return Lr.link(Br)}):pr==="framebuffer"||pr==="framebufferCube"?(ut.command(Br.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Pr+'"',ir.commandStr),jr=Iu(function(Lr){return Lr.link(Br.color[0])})):ut.commandRaise('invalid data for uniform "'+Pr+'"',ir.commandStr)}else ss(Br)?jr=Iu(function(Lr){var tr=Lr.global.def("[",It(Br.length,function(Nr){return ut.command(typeof Br[Nr]=="number"||typeof Br[Nr]=="boolean","invalid uniform "+Pr,Lr.commandStr),Br[Nr]}),"]");return tr}):ut.commandRaise('invalid or missing data for uniform "'+Pr+'"',ir.commandStr);jr.value=Br,an[Pr]=jr}),Object.keys(hn).forEach(function(Pr){var Br=hn[Pr];an[Pr]=pl(Br,function(jr,pr){return jr.invoke(pr,Br)})}),an}function co(mt,ir){var Ct=mt.static,hn=mt.dynamic,an={};return Object.keys(Ct).forEach(function(Pr){var Br=Ct[Pr],jr=Kt.id(Pr),pr=new qr;if(Rl(Br))pr.state=oi,pr.buffer=kn.getBuffer(kn.create(Br,hc,!1,!0)),pr.type=0;else{var Lr=kn.getBuffer(Br);if(Lr)pr.state=oi,pr.buffer=Lr,pr.type=0;else if(ut.command(typeof Br=="object"&&Br,"invalid data for attribute "+Pr,ir.commandStr),"constant"in Br){var tr=Br.constant;pr.buffer="null",pr.state=Pi,typeof tr=="number"?pr.x=tr:(ut.command(ss(tr)&&tr.length>0&&tr.length<=4,"invalid constant for attribute "+Pr,ir.commandStr),Ln.forEach(function(Xi,Nn){Nn<tr.length&&(pr[Xi]=tr[Nn])}))}else{Rl(Br.buffer)?Lr=kn.getBuffer(kn.create(Br.buffer,hc,!1,!0)):Lr=kn.getBuffer(Br.buffer),ut.command(!!Lr,'missing buffer for attribute "'+Pr+'"',ir.commandStr);var Nr=Br.offset|0;ut.command(Nr>=0,'invalid offset for attribute "'+Pr+'"',ir.commandStr);var xn=Br.stride|0;ut.command(xn>=0&&xn<256,'invalid stride for attribute "'+Pr+'", must be integer betweeen [0, 255]',ir.commandStr);var bn=Br.size|0;ut.command(!("size"in Br)||bn>0&&bn<=4,'invalid size for attribute "'+Pr+'", must be 1,2,3,4',ir.commandStr);var Wn=!!Br.normalized,Zn=0;"type"in Br&&(ut.commandParameter(Br.type,du,"invalid type for attribute "+Pr,ir.commandStr),Zn=du[Br.type]);var $n=Br.divisor|0;"divisor"in Br&&(ut.command($n===0||ii,'cannot specify divisor for attribute "'+Pr+'", instancing not supported',ir.commandStr),ut.command($n>=0,'invalid divisor for attribute "'+Pr+'"',ir.commandStr)),ut.optional(function(){var Xi=ir.commandStr,Nn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Br).forEach(function(Wi){ut.command(Nn.indexOf(Wi)>=0,'unknown parameter "'+Wi+'" for attribute pointer "'+Pr+'" (valid parameters are '+Nn+")",Xi)})}),pr.buffer=Lr,pr.state=oi,pr.size=bn,pr.normalized=Wn,pr.type=Zn||Lr.dtype,pr.offset=Nr,pr.stride=xn,pr.divisor=$n}}an[Pr]=Iu(function(Xi,Nn){var Wi=Xi.attribCache;if(jr in Wi)return Wi[jr];var ya={isStream:!1};return Object.keys(pr).forEach(function(Da){ya[Da]=pr[Da]}),pr.buffer&&(ya.buffer=Xi.link(pr.buffer),ya.type=ya.type||ya.buffer+".dtype"),Wi[jr]=ya,ya})}),Object.keys(hn).forEach(function(Pr){var Br=hn[Pr];function jr(pr,Lr){var tr=pr.invoke(Lr,Br),Nr=pr.shared,xn=pr.constants,bn=Nr.isBufferArgs,Wn=Nr.buffer;ut.optional(function(){pr.assert(Lr,tr+"&&(typeof "+tr+'==="object"||typeof '+tr+'==="function")&&('+bn+"("+tr+")||"+Wn+".getBuffer("+tr+")||"+Wn+".getBuffer("+tr+".buffer)||"+bn+"("+tr+'.buffer)||("constant" in '+tr+"&&(typeof "+tr+'.constant==="number"||'+Nr.isArrayLike+"("+tr+".constant))))",'invalid dynamic attribute "'+Pr+'"')});var Zn={isStream:Lr.def(!1)},$n=new qr;$n.state=oi,Object.keys($n).forEach(function(ya){Zn[ya]=Lr.def(""+$n[ya])});var Xi=Zn.buffer,Nn=Zn.type;Lr("if(",bn,"(",tr,")){",Zn.isStream,"=true;",Xi,"=",Wn,".createStream(",hc,",",tr,");",Nn,"=",Xi,".dtype;","}else{",Xi,"=",Wn,".getBuffer(",tr,");","if(",Xi,"){",Nn,"=",Xi,".dtype;",'}else if("constant" in ',tr,"){",Zn.state,"=",Pi,";","if(typeof "+tr+'.constant === "number"){',Zn[Ln[0]],"=",tr,".constant;",Ln.slice(1).map(function(ya){return Zn[ya]}).join("="),"=0;","}else{",Ln.map(function(ya,Da){return Zn[ya]+"="+tr+".constant.length>"+Da+"?"+tr+".constant["+Da+"]:0;"}).join(""),"}}else{","if(",bn,"(",tr,".buffer)){",Xi,"=",Wn,".createStream(",hc,",",tr,".buffer);","}else{",Xi,"=",Wn,".getBuffer(",tr,".buffer);","}",Nn,'="type" in ',tr,"?",xn.glTypes,"[",tr,".type]:",Xi,".dtype;",Zn.normalized,"=!!",tr,".normalized;");function Wi(ya){Lr(Zn[ya],"=",tr,".",ya,"|0;")}return Wi("size"),Wi("offset"),Wi("stride"),Wi("divisor"),Lr("}}"),Lr.exit("if(",Zn.isStream,"){",Wn,".destroyStream(",Xi,");","}"),Zn}an[Pr]=pl(Br,jr)}),an}function hs(mt,ir){var Ct=mt.static,hn=mt.dynamic;if(_f in Ct){var an=Ct[_f];return an!==null&&hi.getVAO(an)===null&&(an=hi.createVAO(an)),Iu(function(Br){return Br.link(hi.getVAO(an))})}else if(_f in hn){var Pr=hn[_f];return pl(Pr,function(Br,jr){var pr=Br.invoke(jr,Pr);return jr.def(Br.shared.vao+".getVAO("+pr+")")})}return null}function Vo(mt){var ir=mt.static,Ct=mt.dynamic,hn={};return Object.keys(ir).forEach(function(an){var Pr=ir[an];hn[an]=Iu(function(Br,jr){return typeof Pr=="number"||typeof Pr=="boolean"?""+Pr:Br.link(Pr)})}),Object.keys(Ct).forEach(function(an){var Pr=Ct[an];hn[an]=pl(Pr,function(Br,jr){return Br.invoke(jr,Pr)})}),hn}function su(mt,ir,Ct,hn,an){var Pr=mt.static,Br=mt.dynamic;ut.optional(function(){var Wi=[ou,Tl,ql,go,Xu,yf,Ks,ud,Ts,_f].concat(Qn);function ya(Da){Object.keys(Da).forEach(function(Bo){ut.command(Wi.indexOf(Bo)>=0,'unknown parameter "'+Bo+'"',an.commandStr)})}ya(Pr),ya(Br)});var jr=ka(mt,ir),pr=Li(mt,an),Lr=$a(mt,pr,an),tr=Co(mt,an),Nr=mu(mt,an),xn=ga(mt,an,jr);function bn(Wi){var ya=Lr[Wi];ya&&(Nr[Wi]=ya)}bn(Lu),bn(bi(mf));var Wn=Object.keys(Nr).length>0,Zn={framebuffer:pr,draw:tr,shader:xn,state:Nr,dirty:Wn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Zn.profile=Ja(mt,an),Zn.uniforms=Bu(Ct,an),Zn.drawVAO=Zn.scopeVAO=hs(mt,an),!Zn.drawVAO&&xn.program&&!jr&&br.angle_instanced_arrays){var $n=!0,Xi=xn.program.attributes.map(function(Wi){var ya=ir.static[Wi];return $n=$n&&!!ya,ya});if($n&&Xi.length>0){var Nn=hi.getVAO(hi.createVAO(Xi));Zn.drawVAO=new Xo(null,null,null,function(Wi,ya){return Wi.link(Nn)}),Zn.useVAO=!0}}return jr?Zn.useVAO=!0:Zn.attributes=co(ir,an),Zn.context=Vo(hn,an),Zn}function Vs(mt,ir,Ct){var hn=mt.shared,an=hn.context,Pr=mt.scope();Object.keys(Ct).forEach(function(Br){ir.save(an,"."+Br);var jr=Ct[Br];Pr(an,".",Br,"=",jr.append(mt,ir),";")}),ir(Pr)}function Fs(mt,ir,Ct,hn){var an=mt.shared,Pr=an.gl,Br=an.framebuffer,jr;Ci&&(jr=ir.def(an.extensions,".webgl_draw_buffers"));var pr=mt.constants,Lr=pr.drawBuffer,tr=pr.backBuffer,Nr;Ct?Nr=Ct.append(mt,ir):Nr=ir.def(Br,".next"),hn||ir("if(",Nr,"!==",Br,".cur){"),ir("if(",Nr,"){",Pr,".bindFramebuffer(",fs,",",Nr,".framebuffer);"),Ci&&ir(jr,".drawBuffersWEBGL(",Lr,"[",Nr,".colorAttachments.length]);"),ir("}else{",Pr,".bindFramebuffer(",fs,",null);"),Ci&&ir(jr,".drawBuffersWEBGL(",tr,");"),ir("}",Br,".cur=",Nr,";"),hn||ir("}")}function Qs(mt,ir,Ct){var hn=mt.shared,an=hn.gl,Pr=mt.current,Br=mt.next,jr=hn.current,pr=hn.next,Lr=mt.cond(jr,".dirty");Qn.forEach(function(tr){var Nr=bi(tr);if(!(Nr in Ct.state)){var xn,bn;if(Nr in Br){xn=Br[Nr],bn=Pr[Nr];var Wn=It(Kr[Nr].length,function($n){return Lr.def(xn,"[",$n,"]")});Lr(mt.cond(Wn.map(function($n,Xi){return $n+"!=="+bn+"["+Xi+"]"}).join("||")).then(an,".",Un[Nr],"(",Wn,");",Wn.map(function($n,Xi){return bn+"["+Xi+"]="+$n}).join(";"),";"))}else{xn=Lr.def(pr,".",Nr);var Zn=mt.cond(xn,"!==",jr,".",Nr);Lr(Zn),Nr in Mi?Zn(mt.cond(xn).then(an,".enable(",Mi[Nr],");").else(an,".disable(",Mi[Nr],");"),jr,".",Nr,"=",xn,";"):Zn(an,".",Un[Nr],"(",xn,");",jr,".",Nr,"=",xn,";")}}}),Object.keys(Ct.state).length===0&&Lr(jr,".dirty=false;"),ir(Lr)}function Nu(mt,ir,Ct,hn){var an=mt.shared,Pr=mt.current,Br=an.current,jr=an.gl;Vf(Object.keys(Ct)).forEach(function(pr){var Lr=Ct[pr];if(!(hn&&!hn(Lr))){var tr=Lr.append(mt,ir);if(Mi[pr]){var Nr=Mi[pr];Fu(Lr)?tr?ir(jr,".enable(",Nr,");"):ir(jr,".disable(",Nr,");"):ir(mt.cond(tr).then(jr,".enable(",Nr,");").else(jr,".disable(",Nr,");")),ir(Br,".",pr,"=",tr,";")}else if(ss(tr)){var xn=Pr[pr];ir(jr,".",Un[pr],"(",tr,");",tr.map(function(bn,Wn){return xn+"["+Wn+"]="+bn}).join(";"),";")}else ir(jr,".",Un[pr],"(",tr,");",Br,".",pr,"=",tr,";")}})}function As(mt,ir){ii&&(mt.instancing=ir.def(mt.shared.extensions,".angle_instanced_arrays"))}function Ga(mt,ir,Ct,hn,an){var Pr=mt.shared,Br=mt.stats,jr=Pr.current,pr=Pr.timer,Lr=Ct.profile;function tr(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Nr,xn;function bn(Wi){Nr=ir.def(),Wi(Nr,"=",tr(),";"),typeof an=="string"?Wi(Br,".count+=",an,";"):Wi(Br,".count++;"),In&&(hn?(xn=ir.def(),Wi(xn,"=",pr,".getNumPendingQueries();")):Wi(pr,".beginQuery(",Br,");"))}function Wn(Wi){Wi(Br,".cpuTime+=",tr(),"-",Nr,";"),In&&(hn?Wi(pr,".pushScopeStats(",xn,",",pr,".getNumPendingQueries(),",Br,");"):Wi(pr,".endQuery();"))}function Zn(Wi){var ya=ir.def(jr,".profile");ir(jr,".profile=",Wi,";"),ir.exit(jr,".profile=",ya,";")}var $n;if(Lr){if(Fu(Lr)){Lr.enable?(bn(ir),Wn(ir.exit),Zn("true")):Zn("false");return}$n=Lr.append(mt,ir),Zn($n)}else $n=ir.def(jr,".profile");var Xi=mt.block();bn(Xi),ir("if(",$n,"){",Xi,"}");var Nn=mt.block();Wn(Nn),ir.exit("if(",$n,"){",Nn,"}")}function Yu(mt,ir,Ct,hn,an){var Pr=mt.shared;function Br(pr){switch(pr){case mg:case Ip:case ei:return 2;case Gd:case _s:case Ic:return 3;case cd:case fd:case Pp:return 4;default:return 1}}function jr(pr,Lr,tr){var Nr=Pr.gl,xn=ir.def(pr,".location"),bn=ir.def(Pr.attributes,"[",xn,"]"),Wn=tr.state,Zn=tr.buffer,$n=[tr.x,tr.y,tr.z,tr.w],Xi=["buffer","normalized","offset","stride"];function Nn(){ir("if(!",bn,".buffer){",Nr,".enableVertexAttribArray(",xn,");}");var ya=tr.type,Da;if(tr.size?Da=ir.def(tr.size,"||",Lr):Da=Lr,ir("if(",bn,".type!==",ya,"||",bn,".size!==",Da,"||",Xi.map(function(Na){return bn+"."+Na+"!=="+tr[Na]}).join("||"),"){",Nr,".bindBuffer(",hc,",",Zn,".buffer);",Nr,".vertexAttribPointer(",[xn,Da,ya,tr.normalized,tr.stride,tr.offset],");",bn,".type=",ya,";",bn,".size=",Da,";",Xi.map(function(Na){return bn+"."+Na+"="+tr[Na]+";"}).join(""),"}"),ii){var Bo=tr.divisor;ir("if(",bn,".divisor!==",Bo,"){",mt.instancing,".vertexAttribDivisorANGLE(",[xn,Bo],");",bn,".divisor=",Bo,";}")}}function Wi(){ir("if(",bn,".buffer){",Nr,".disableVertexAttribArray(",xn,");",bn,".buffer=null;","}if(",Ln.map(function(ya,Da){return bn+"."+ya+"!=="+$n[Da]}).join("||"),"){",Nr,".vertexAttrib4f(",xn,",",$n,");",Ln.map(function(ya,Da){return bn+"."+ya+"="+$n[Da]+";"}).join(""),"}")}Wn===oi?Nn():Wn===Pi?Wi():(ir("if(",Wn,"===",oi,"){"),Nn(),ir("}else{"),Wi(),ir("}"))}hn.forEach(function(pr){var Lr=pr.name,tr=Ct.attributes[Lr],Nr;if(tr){if(!an(tr))return;Nr=tr.append(mt,ir)}else{if(!an(vm))return;var xn=mt.scopeAttrib(Lr);ut.optional(function(){mt.assert(ir,xn+".state","missing attribute "+Lr)}),Nr={},Object.keys(new qr).forEach(function(bn){Nr[bn]=ir.def(xn,".",bn)})}jr(mt.link(pr),Br(pr.info.type),Nr)})}function To(mt,ir,Ct,hn,an){for(var Pr=mt.shared,Br=Pr.gl,jr,pr=0;pr<hn.length;++pr){var Lr=hn[pr],tr=Lr.name,Nr=Lr.info.type,xn=Ct.uniforms[tr],bn=mt.link(Lr),Wn=bn+".location",Zn;if(xn){if(!an(xn))continue;if(Fu(xn)){var $n=xn.value;if(ut.command($n!==null&&typeof $n!="undefined",'missing uniform "'+tr+'"',mt.commandStr),Nr===Kh||Nr===il){ut.command(typeof $n=="function"&&(Nr===Kh&&($n._reglType==="texture2d"||$n._reglType==="framebuffer")||Nr===il&&($n._reglType==="textureCube"||$n._reglType==="framebufferCube")),"invalid texture for uniform "+tr,mt.commandStr);var Xi=mt.link($n._texture||$n.color[0]._texture);ir(Br,".uniform1i(",Wn,",",Xi+".bind());"),ir.exit(Xi,".unbind();")}else if(Nr===qs||Nr===Pc||Nr===pc){ut.optional(function(){ut.command(ss($n),"invalid matrix for uniform "+tr,mt.commandStr),ut.command(Nr===qs&&$n.length===4||Nr===Pc&&$n.length===9||Nr===pc&&$n.length===16,"invalid length for matrix uniform "+tr,mt.commandStr)});var Nn=mt.global.def("new Float32Array(["+Array.prototype.slice.call($n)+"])"),Wi=2;Nr===Pc?Wi=3:Nr===pc&&(Wi=4),ir(Br,".uniformMatrix",Wi,"fv(",Wn,",false,",Nn,");")}else{switch(Nr){case gg:ut.commandType($n,"number","uniform "+tr,mt.commandStr),jr="1f";break;case mg:ut.command(ss($n)&&$n.length===2,"uniform "+tr,mt.commandStr),jr="2f";break;case Gd:ut.command(ss($n)&&$n.length===3,"uniform "+tr,mt.commandStr),jr="3f";break;case cd:ut.command(ss($n)&&$n.length===4,"uniform "+tr,mt.commandStr),jr="4f";break;case Rc:ut.commandType($n,"boolean","uniform "+tr,mt.commandStr),jr="1i";break;case mh:ut.commandType($n,"number","uniform "+tr,mt.commandStr),jr="1i";break;case ei:ut.command(ss($n)&&$n.length===2,"uniform "+tr,mt.commandStr),jr="2i";break;case Ip:ut.command(ss($n)&&$n.length===2,"uniform "+tr,mt.commandStr),jr="2i";break;case Ic:ut.command(ss($n)&&$n.length===3,"uniform "+tr,mt.commandStr),jr="3i";break;case _s:ut.command(ss($n)&&$n.length===3,"uniform "+tr,mt.commandStr),jr="3i";break;case Pp:ut.command(ss($n)&&$n.length===4,"uniform "+tr,mt.commandStr),jr="4i";break;case fd:ut.command(ss($n)&&$n.length===4,"uniform "+tr,mt.commandStr),jr="4i";break}ir(Br,".uniform",jr,"(",Wn,",",ss($n)?Array.prototype.slice.call($n):$n,");")}continue}else Zn=xn.append(mt,ir)}else{if(!an(vm))continue;Zn=ir.def(Pr.uniforms,"[",Kt.id(tr),"]")}Nr===Kh?ir("if(",Zn,"&&",Zn,'._reglType==="framebuffer"){',Zn,"=",Zn,".color[0];","}"):Nr===il&&ir("if(",Zn,"&&",Zn,'._reglType==="framebufferCube"){',Zn,"=",Zn,".color[0];","}"),ut.optional(function(){function Hl(Hf,Eg){mt.assert(ir,Hf,'bad data or missing for uniform "'+tr+'".  '+Eg)}function bg(Hf){Hl("typeof "+Zn+'==="'+Hf+'"',"invalid type, expected "+Hf)}function rf(Hf,Eg){Hl(Pr.isArrayLike+"("+Zn+")&&"+Zn+".length==="+Hf,"invalid vector, should have length "+Hf,mt.commandStr)}function Sg(Hf){Hl("typeof "+Zn+'==="function"&&'+Zn+'._reglType==="texture'+(Hf===Nv?"2d":"Cube")+'"',"invalid texture type",mt.commandStr)}switch(Nr){case mh:bg("number");break;case Ip:rf(2,"number");break;case _s:rf(3,"number");break;case fd:rf(4,"number");break;case gg:bg("number");break;case mg:rf(2,"number");break;case Gd:rf(3,"number");break;case cd:rf(4,"number");break;case Rc:bg("boolean");break;case ei:rf(2,"boolean");break;case Ic:rf(3,"boolean");break;case Pp:rf(4,"boolean");break;case qs:rf(4,"number");break;case Pc:rf(9,"number");break;case pc:rf(16,"number");break;case Kh:Sg(Nv);break;case il:Sg(zv);break}});var ya=1;switch(Nr){case Kh:case il:var Da=ir.def(Zn,"._texture");ir(Br,".uniform1i(",Wn,",",Da,".bind());"),ir.exit(Da,".unbind();");continue;case mh:case Rc:jr="1i";break;case Ip:case ei:jr="2i",ya=2;break;case _s:case Ic:jr="3i",ya=3;break;case fd:case Pp:jr="4i",ya=4;break;case gg:jr="1f";break;case mg:jr="2f",ya=2;break;case Gd:jr="3f",ya=3;break;case cd:jr="4f",ya=4;break;case qs:jr="Matrix2fv";break;case Pc:jr="Matrix3fv";break;case pc:jr="Matrix4fv";break}if(ir(Br,".uniform",jr,"(",Wn,","),jr.charAt(0)==="M"){var Bo=Math.pow(Nr-qs+2,2),Na=mt.global.def("new Float32Array(",Bo,")");ir("false,(Array.isArray(",Zn,")||",Zn," instanceof Float32Array)?",Zn,":(",It(Bo,function(Hl){return Na+"["+Hl+"]="+Zn+"["+Hl+"]"}),",",Na,")")}else ya>1?ir(It(ya,function(Hl){return Zn+"["+Hl+"]"})):ir(Zn);ir(");")}}function ma(mt,ir,Ct,hn){var an=mt.shared,Pr=an.gl,Br=an.draw,jr=hn.draw;function pr(){var Da=jr.elements,Bo,Na=ir;return Da?((Da.contextDep&&hn.contextDynamic||Da.propDep)&&(Na=Ct),Bo=Da.append(mt,Na)):Bo=Na.def(Br,".",go),Bo&&Na("if("+Bo+")"+Pr+".bindBuffer("+C0+","+Bo+".buffer.buffer);"),Bo}function Lr(){var Da=jr.count,Bo,Na=ir;return Da?((Da.contextDep&&hn.contextDynamic||Da.propDep)&&(Na=Ct),Bo=Da.append(mt,Na),ut.optional(function(){Da.MISSING&&mt.assert(ir,"false","missing vertex count"),Da.DYNAMIC&&mt.assert(Na,Bo+">=0","missing vertex count")})):(Bo=Na.def(Br,".",Ks),ut.optional(function(){mt.assert(Na,Bo+">=0","missing vertex count")})),Bo}var tr=pr();function Nr(Da){var Bo=jr[Da];return Bo?Bo.contextDep&&hn.contextDynamic||Bo.propDep?Bo.append(mt,Ct):Bo.append(mt,ir):ir.def(Br,".",Da)}var xn=Nr(Xu),bn=Nr(yf),Wn=Lr();if(typeof Wn=="number"){if(Wn===0)return}else Ct("if(",Wn,"){"),Ct.exit("}");var Zn,$n;ii&&(Zn=Nr(ud),$n=mt.instancing);var Xi=tr+".type",Nn=jr.elements&&Fu(jr.elements);function Wi(){function Da(){Ct($n,".drawElementsInstancedANGLE(",[xn,Wn,Xi,bn+"<<(("+Xi+"-"+pi+")>>1)",Zn],");")}function Bo(){Ct($n,".drawArraysInstancedANGLE(",[xn,bn,Wn,Zn],");")}tr?Nn?Da():(Ct("if(",tr,"){"),Da(),Ct("}else{"),Bo(),Ct("}")):Bo()}function ya(){function Da(){Ct(Pr+".drawElements("+[xn,Wn,Xi,bn+"<<(("+Xi+"-"+pi+")>>1)"]+");")}function Bo(){Ct(Pr+".drawArrays("+[xn,bn,Wn]+");")}tr?Nn?Da():(Ct("if(",tr,"){"),Da(),Ct("}else{"),Bo(),Ct("}")):Bo()}ii&&(typeof Zn!="number"||Zn>=0)?typeof Zn=="string"?(Ct("if(",Zn,">0){"),Wi(),Ct("}else if(",Zn,"<0){"),ya(),Ct("}")):Wi():ya()}function ba(mt,ir,Ct,hn,an){var Pr=ra(),Br=Pr.proc("body",an);return ut.optional(function(){Pr.commandStr=ir.commandStr,Pr.command=Pr.link(ir.commandStr)}),ii&&(Pr.instancing=Br.def(Pr.shared.extensions,".angle_instanced_arrays")),mt(Pr,Br,Ct,hn),Pr.compile().body}function xo(mt,ir,Ct,hn){As(mt,ir),Ct.useVAO?Ct.drawVAO?ir(mt.shared.vao,".setVAO(",Ct.drawVAO.append(mt,ir),");"):ir(mt.shared.vao,".setVAO(",mt.shared.vao,".targetVAO);"):(ir(mt.shared.vao,".setVAO(null);"),Yu(mt,ir,Ct,hn.attributes,function(){return!0})),To(mt,ir,Ct,hn.uniforms,function(){return!0}),ma(mt,ir,ir,Ct)}function Hs(mt,ir){var Ct=mt.proc("draw",1);As(mt,Ct),Vs(mt,Ct,ir.context),Fs(mt,Ct,ir.framebuffer),Qs(mt,Ct,ir),Nu(mt,Ct,ir.state),Ga(mt,Ct,ir,!1,!0);var hn=ir.shader.progVar.append(mt,Ct);if(Ct(mt.shared.gl,".useProgram(",hn,".program);"),ir.shader.program)xo(mt,Ct,ir,ir.shader.program);else{Ct(mt.shared.vao,".setVAO(null);");var an=mt.global.def("{}"),Pr=Ct.def(hn,".id"),Br=Ct.def(an,"[",Pr,"]");Ct(mt.cond(Br).then(Br,".call(this,a0);").else(Br,"=",an,"[",Pr,"]=",mt.link(function(jr){return ba(xo,mt,ir,jr,1)}),"(",hn,");",Br,".call(this,a0);"))}Object.keys(ir.state).length>0&&Ct(mt.shared.current,".dirty=true;")}function yu(mt,ir,Ct,hn){mt.batchId="a1",As(mt,ir);function an(){return!0}Yu(mt,ir,Ct,hn.attributes,an),To(mt,ir,Ct,hn.uniforms,an),ma(mt,ir,ir,Ct)}function vr(mt,ir,Ct,hn){As(mt,ir);var an=Ct.contextDep,Pr=ir.def(),Br="a0",jr="a1",pr=ir.def();mt.shared.props=pr,mt.batchId=Pr;var Lr=mt.scope(),tr=mt.scope();ir(Lr.entry,"for(",Pr,"=0;",Pr,"<",jr,";++",Pr,"){",pr,"=",Br,"[",Pr,"];",tr,"}",Lr.exit);function Nr(Xi){return Xi.contextDep&&an||Xi.propDep}function xn(Xi){return!Nr(Xi)}if(Ct.needsContext&&Vs(mt,tr,Ct.context),Ct.needsFramebuffer&&Fs(mt,tr,Ct.framebuffer),Nu(mt,tr,Ct.state,Nr),Ct.profile&&Nr(Ct.profile)&&Ga(mt,tr,Ct,!1,!0),hn)Ct.useVAO?Ct.drawVAO?Nr(Ct.drawVAO)?tr(mt.shared.vao,".setVAO(",Ct.drawVAO.append(mt,tr),");"):Lr(mt.shared.vao,".setVAO(",Ct.drawVAO.append(mt,Lr),");"):Lr(mt.shared.vao,".setVAO(",mt.shared.vao,".targetVAO);"):(Lr(mt.shared.vao,".setVAO(null);"),Yu(mt,Lr,Ct,hn.attributes,xn),Yu(mt,tr,Ct,hn.attributes,Nr)),To(mt,Lr,Ct,hn.uniforms,xn),To(mt,tr,Ct,hn.uniforms,Nr),ma(mt,Lr,tr,Ct);else{var bn=mt.global.def("{}"),Wn=Ct.shader.progVar.append(mt,tr),Zn=tr.def(Wn,".id"),$n=tr.def(bn,"[",Zn,"]");tr(mt.shared.gl,".useProgram(",Wn,".program);","if(!",$n,"){",$n,"=",bn,"[",Zn,"]=",mt.link(function(Xi){return ba(yu,mt,Ct,Xi,2)}),"(",Wn,");}",$n,".call(this,a0[",Pr,"],",Pr,");")}}function yn(mt,ir){var Ct=mt.proc("batch",2);mt.batchId="0",As(mt,Ct);var hn=!1,an=!0;Object.keys(ir.context).forEach(function(bn){hn=hn||ir.context[bn].propDep}),hn||(Vs(mt,Ct,ir.context),an=!1);var Pr=ir.framebuffer,Br=!1;Pr?(Pr.propDep?hn=Br=!0:Pr.contextDep&&hn&&(Br=!0),Br||Fs(mt,Ct,Pr)):Fs(mt,Ct,null),ir.state.viewport&&ir.state.viewport.propDep&&(hn=!0);function jr(bn){return bn.contextDep&&hn||bn.propDep}Qs(mt,Ct,ir),Nu(mt,Ct,ir.state,function(bn){return!jr(bn)}),(!ir.profile||!jr(ir.profile))&&Ga(mt,Ct,ir,!1,"a1"),ir.contextDep=hn,ir.needsContext=an,ir.needsFramebuffer=Br;var pr=ir.shader.progVar;if(pr.contextDep&&hn||pr.propDep)vr(mt,Ct,ir,null);else{var Lr=pr.append(mt,Ct);if(Ct(mt.shared.gl,".useProgram(",Lr,".program);"),ir.shader.program)vr(mt,Ct,ir,ir.shader.program);else{Ct(mt.shared.vao,".setVAO(null);");var tr=mt.global.def("{}"),Nr=Ct.def(Lr,".id"),xn=Ct.def(tr,"[",Nr,"]");Ct(mt.cond(xn).then(xn,".call(this,a0,a1);").else(xn,"=",tr,"[",Nr,"]=",mt.link(function(bn){return ba(vr,mt,ir,bn,2)}),"(",Lr,");",xn,".call(this,a0,a1);"))}}Object.keys(ir.state).length>0&&Ct(mt.shared.current,".dirty=true;")}function cn(mt,ir){var Ct=mt.proc("scope",3);mt.batchId="a2";var hn=mt.shared,an=hn.current;Vs(mt,Ct,ir.context),ir.framebuffer&&ir.framebuffer.append(mt,Ct),Vf(Object.keys(ir.state)).forEach(function(Br){var jr=ir.state[Br],pr=jr.append(mt,Ct);ss(pr)?pr.forEach(function(Lr,tr){Ct.set(mt.next[Br],"["+tr+"]",Lr)}):Ct.set(hn.next,"."+Br,pr)}),Ga(mt,Ct,ir,!0,!0),[go,yf,Ks,ud,Xu].forEach(function(Br){var jr=ir.draw[Br];jr&&Ct.set(hn.draw,"."+Br,""+jr.append(mt,Ct))}),Object.keys(ir.uniforms).forEach(function(Br){Ct.set(hn.uniforms,"["+Kt.id(Br)+"]",ir.uniforms[Br].append(mt,Ct))}),Object.keys(ir.attributes).forEach(function(Br){var jr=ir.attributes[Br].append(mt,Ct),pr=mt.scopeAttrib(Br);Object.keys(new qr).forEach(function(Lr){Ct.set(pr,"."+Lr,jr[Lr])})}),ir.scopeVAO&&Ct.set(hn.vao,".targetVAO",ir.scopeVAO.append(mt,Ct));function Pr(Br){var jr=ir.shader[Br];jr&&Ct.set(hn.shader,"."+Br,jr.append(mt,Ct))}Pr(Tl),Pr(ql),Object.keys(ir.state).length>0&&(Ct(an,".dirty=true;"),Ct.exit(an,".dirty=true;")),Ct("a1(",mt.shared.context,",a0,",mt.batchId,");")}function Ri(mt){if(!(typeof mt!="object"||ss(mt))){for(var ir=Object.keys(mt),Ct=0;Ct<ir.length;++Ct)if(Er.isDynamic(mt[ir[Ct]]))return!0;return!1}}function Xa(mt,ir,Ct){var hn=ir.static[Ct];if(!hn||!Ri(hn))return;var an=mt.global,Pr=Object.keys(hn),Br=!1,jr=!1,pr=!1,Lr=mt.global.def("{}");Pr.forEach(function(Nr){var xn=hn[Nr];if(Er.isDynamic(xn)){typeof xn=="function"&&(xn=hn[Nr]=Er.unbox(xn));var bn=pl(xn,null);Br=Br||bn.thisDep,pr=pr||bn.propDep,jr=jr||bn.contextDep}else{switch(an(Lr,".",Nr,"="),typeof xn){case"number":an(xn);break;case"string":an('"',xn,'"');break;case"object":Array.isArray(xn)&&an("[",xn.join(),"]");break;default:an(mt.link(xn));break}an(";")}});function tr(Nr,xn){Pr.forEach(function(bn){var Wn=hn[bn];if(Er.isDynamic(Wn)){var Zn=Nr.invoke(xn,Wn);xn(Lr,".",bn,"=",Zn,";")}})}ir.dynamic[Ct]=new Er.DynamicVariable(Bi,{thisDep:Br,contextDep:jr,propDep:pr,ref:Lr,append:tr}),delete ir.static[Ct]}function Yo(mt,ir,Ct,hn,an){var Pr=ra();Pr.stats=Pr.link(an),Object.keys(ir.static).forEach(function(jr){Xa(Pr,ir,jr)}),vg.forEach(function(jr){Xa(Pr,mt,jr)});var Br=su(mt,ir,Ct,hn,Pr);return Hs(Pr,Br),cn(Pr,Br),yn(Pr,Br),Pr.compile()}return{next:Oi,current:Kr,procs:function(){var mt=ra(),ir=mt.proc("poll"),Ct=mt.proc("refresh"),hn=mt.block();ir(hn),Ct(hn);var an=mt.shared,Pr=an.gl,Br=an.next,jr=an.current;hn(jr,".dirty=false;"),Fs(mt,ir),Fs(mt,Ct,null,!0);var pr;ii&&(pr=mt.link(ii)),br.oes_vertex_array_object&&Ct(mt.link(br.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Lr=0;Lr<dn.maxAttributes;++Lr){var tr=Ct.def(an.attributes,"[",Lr,"]"),Nr=mt.cond(tr,".buffer");Nr.then(Pr,".enableVertexAttribArray(",Lr,");",Pr,".bindBuffer(",hc,",",tr,".buffer.buffer);",Pr,".vertexAttribPointer(",Lr,",",tr,".size,",tr,".type,",tr,".normalized,",tr,".stride,",tr,".offset);").else(Pr,".disableVertexAttribArray(",Lr,");",Pr,".vertexAttrib4f(",Lr,",",tr,".x,",tr,".y,",tr,".z,",tr,".w);",tr,".buffer=null;"),Ct(Nr),ii&&Ct(pr,".vertexAttribDivisorANGLE(",Lr,",",tr,".divisor);")}return Ct(mt.shared.vao,".currentVAO=null;",mt.shared.vao,".setVAO(",mt.shared.vao,".targetVAO);"),Object.keys(Mi).forEach(function(xn){var bn=Mi[xn],Wn=hn.def(Br,".",xn),Zn=mt.block();Zn("if(",Wn,"){",Pr,".enable(",bn,")}else{",Pr,".disable(",bn,")}",jr,".",xn,"=",Wn,";"),Ct(Zn),ir("if(",Wn,"!==",jr,".",xn,"){",Zn,"}")}),Object.keys(Un).forEach(function(xn){var bn=Un[xn],Wn=Kr[xn],Zn,$n,Xi=mt.block();if(Xi(Pr,".",bn,"("),ss(Wn)){var Nn=Wn.length;Zn=mt.global.def(Br,".",xn),$n=mt.global.def(jr,".",xn),Xi(It(Nn,function(Wi){return Zn+"["+Wi+"]"}),");",It(Nn,function(Wi){return $n+"["+Wi+"]="+Zn+"["+Wi+"];"}).join("")),ir("if(",It(Nn,function(Wi){return Zn+"["+Wi+"]!=="+$n+"["+Wi+"]"}).join("||"),"){",Xi,"}")}else Zn=hn.def(Br,".",xn),$n=hn.def(jr,".",xn),Xi(Zn,");",jr,".",xn,"=",Zn,";"),ir("if(",Zn,"!==",$n,"){",Xi,"}");Ct(Xi)}),mt.compile()}(),compile:Yo}}function I0(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Lp=34918,Yd=34919,yg=35007,P0=function(nt,Kt){if(!Kt.ext_disjoint_timer_query)return null;var br=[];function dn(){return br.pop()||Kt.ext_disjoint_timer_query.createQueryEXT()}function kn(ii){br.push(ii)}var fn=[];function sn(ii){var Ci=dn();Kt.ext_disjoint_timer_query.beginQueryEXT(yg,Ci),fn.push(Ci),In(fn.length-1,fn.length,ii)}function ti(){Kt.ext_disjoint_timer_query.endQueryEXT(yg)}function Vn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var hi=[];function ni(){return hi.pop()||new Vn}function ui(ii){hi.push(ii)}var xi=[];function In(ii,Ci,Kr){var Oi=ni();Oi.startQueryIndex=ii,Oi.endQueryIndex=Ci,Oi.sum=0,Oi.stats=Kr,xi.push(Oi)}var di=[],qr=[];function En(){var ii,Ci,Kr=fn.length;if(Kr!==0){qr.length=Math.max(qr.length,Kr+1),di.length=Math.max(di.length,Kr+1),di[0]=0,qr[0]=0;var Oi=0;for(ii=0,Ci=0;Ci<fn.length;++Ci){var Qn=fn[Ci];Kt.ext_disjoint_timer_query.getQueryObjectEXT(Qn,Yd)?(Oi+=Kt.ext_disjoint_timer_query.getQueryObjectEXT(Qn,Lp),kn(Qn)):fn[ii++]=Qn,di[Ci+1]=Oi,qr[Ci+1]=ii}for(fn.length=ii,ii=0,Ci=0;Ci<xi.length;++Ci){var Mi=xi[Ci],Un=Mi.startQueryIndex,bi=Mi.endQueryIndex;Mi.sum+=di[bi]-di[Un];var ua=qr[Un],Ra=qr[bi];Ra===ua?(Mi.stats.gpuTime+=Mi.sum/1e6,ui(Mi)):(Mi.startQueryIndex=ua,Mi.endQueryIndex=Ra,xi[ii++]=Mi)}xi.length=ii}}return{beginQuery:sn,endQuery:ti,pushScopeStats:In,update:En,getNumPendingQueries:function(){return fn.length},clear:function(){br.push.apply(br,fn);for(var ii=0;ii<br.length;ii++)Kt.ext_disjoint_timer_query.deleteQueryEXT(br[ii]);fn.length=0,br.length=0},restore:function(){fn.length=0,br.length=0}}},tf=16384,dl=256,O0=1024,gm=34962,xh="webglcontextlost",_g="webglcontextrestored",Fp=1,k0=2,xg=3;function Kd(nt,Kt){for(var br=0;br<nt.length;++br)if(nt[br]===Kt)return br;return-1}function Hv(nt){var Kt=jt(nt);if(!Kt)return null;var br=Kt.gl,dn=br.getContextAttributes(),kn=br.isContextLost(),fn=wt(br,Kt);if(!fn)return null;var sn=le(),ti=I0(),Vn=fn.extensions,hi=P0(br,Vn),ni=zr(),ui=br.drawingBufferWidth,xi=br.drawingBufferHeight,In={tick:0,time:0,viewportWidth:ui,viewportHeight:xi,framebufferWidth:ui,framebufferHeight:xi,drawingBufferWidth:ui,drawingBufferHeight:xi,pixelRatio:Kt.pixelRatio},di={},qr={elements:null,primitive:4,count:-1,offset:0,instances:-1},En=wu(br,Vn),ii=Yl(br,ti,Kt,Kr),Ci=bt(br,Vn,En,ti,ii);function Kr(ma){return Ci.destroyBuffer(ma)}var Oi=ed(br,Vn,ii,ti),Qn=hr(br,sn,ti,Kt),Mi=au(br,Vn,En,function(){ua.procs.poll()},In,ti,Kt),Un=Gu(br,Vn,En,ti,Kt),bi=ee(br,Vn,En,Mi,Un,ti),ua=Qh(br,sn,Vn,En,ii,Oi,Mi,bi,di,Ci,Qn,qr,In,hi,Kt),Ra=en(br,bi,ua.procs.poll,In,dn,Vn,En),Ti=ua.next,Jn=br.canvas,Dn=[],ra=[],Ja=[],Li=[Kt.onDestroy],$a=null;function ka(){if(Dn.length===0){hi&&hi.update(),$a=null;return}$a=Fr.next(ka),Nu();for(var ma=Dn.length-1;ma>=0;--ma){var ba=Dn[ma];ba&&ba(In,null,0)}br.flush(),hi&&hi.update()}function ga(){!$a&&Dn.length>0&&($a=Fr.next(ka))}function Co(){$a&&(Fr.cancel(ka),$a=null)}function mu(ma){ma.preventDefault(),kn=!0,Co(),ra.forEach(function(ba){ba()})}function Bu(ma){br.getError(),kn=!1,fn.restore(),Qn.restore(),ii.restore(),Mi.restore(),Un.restore(),bi.restore(),Ci.restore(),hi&&hi.restore(),ua.procs.refresh(),ga(),Ja.forEach(function(ba){ba()})}Jn&&(Jn.addEventListener(xh,mu,!1),Jn.addEventListener(_g,Bu,!1));function co(){Dn.length=0,Co(),Jn&&(Jn.removeEventListener(xh,mu),Jn.removeEventListener(_g,Bu)),Qn.clear(),bi.clear(),Un.clear(),Mi.clear(),Oi.clear(),ii.clear(),Ci.clear(),hi&&hi.clear(),Li.forEach(function(ma){ma()})}function hs(ma){ut(!!ma,"invalid args to regl({...})"),ut.type(ma,"object","invalid args to regl({...})");function ba(an){var Pr=k({},an);delete Pr.uniforms,delete Pr.attributes,delete Pr.context,delete Pr.vao,"stencil"in Pr&&Pr.stencil.op&&(Pr.stencil.opBack=Pr.stencil.opFront=Pr.stencil.op,delete Pr.stencil.op);function Br(jr){if(jr in Pr){var pr=Pr[jr];delete Pr[jr],Object.keys(pr).forEach(function(Lr){Pr[jr+"."+Lr]=pr[Lr]})}}return Br("blend"),Br("depth"),Br("cull"),Br("stencil"),Br("polygonOffset"),Br("scissor"),Br("sample"),"vao"in an&&(Pr.vao=an.vao),Pr}function xo(an){var Pr={},Br={};return Object.keys(an).forEach(function(jr){var pr=an[jr];Er.isDynamic(pr)?Br[jr]=Er.unbox(pr,jr):Pr[jr]=pr}),{dynamic:Br,static:Pr}}var Hs=xo(ma.context||{}),yu=xo(ma.uniforms||{}),vr=xo(ma.attributes||{}),yn=xo(ba(ma)),cn={gpuTime:0,cpuTime:0,count:0},Ri=ua.compile(yn,vr,yu,Hs,cn),Xa=Ri.draw,Yo=Ri.batch,mt=Ri.scope,ir=[];function Ct(an){for(;ir.length<an;)ir.push(null);return ir}function hn(an,Pr){var Br;if(kn&&ut.raise("context lost"),typeof an=="function")return mt.call(this,null,an,0);if(typeof Pr=="function")if(typeof an=="number")for(Br=0;Br<an;++Br)mt.call(this,null,Pr,Br);else if(Array.isArray(an))for(Br=0;Br<an.length;++Br)mt.call(this,an[Br],Pr,Br);else return mt.call(this,an,Pr,0);else if(typeof an=="number"){if(an>0)return Yo.call(this,Ct(an|0),an|0)}else if(Array.isArray(an)){if(an.length)return Yo.call(this,an,an.length)}else return Xa.call(this,an)}return k(hn,{stats:cn})}var Vo=bi.setFBO=hs({framebuffer:Er.define.call(null,Fp,"framebuffer")});function su(ma,ba){var xo=0;ua.procs.poll();var Hs=ba.color;Hs&&(br.clearColor(+Hs[0]||0,+Hs[1]||0,+Hs[2]||0,+Hs[3]||0),xo|=tf),"depth"in ba&&(br.clearDepth(+ba.depth),xo|=dl),"stencil"in ba&&(br.clearStencil(ba.stencil|0),xo|=O0),ut(!!xo,"called regl.clear with no buffer specified"),br.clear(xo)}function Vs(ma){if(ut(typeof ma=="object"&&ma,"regl.clear() takes an object as input"),"framebuffer"in ma)if(ma.framebuffer&&ma.framebuffer_reglType==="framebufferCube")for(var ba=0;ba<6;++ba)Vo(k({framebuffer:ma.framebuffer.faces[ba]},ma),su);else Vo(ma,su);else su(null,ma)}function Fs(ma){ut.type(ma,"function","regl.frame() callback must be a function"),Dn.push(ma);function ba(){var xo=Kd(Dn,ma);ut(xo>=0,"cannot cancel a frame twice");function Hs(){var yu=Kd(Dn,Hs);Dn[yu]=Dn[Dn.length-1],Dn.length-=1,Dn.length<=0&&Co()}Dn[xo]=Hs}return ga(),{cancel:ba}}function Qs(){var ma=Ti.viewport,ba=Ti.scissor_box;ma[0]=ma[1]=ba[0]=ba[1]=0,In.viewportWidth=In.framebufferWidth=In.drawingBufferWidth=ma[2]=ba[2]=br.drawingBufferWidth,In.viewportHeight=In.framebufferHeight=In.drawingBufferHeight=ma[3]=ba[3]=br.drawingBufferHeight}function Nu(){In.tick+=1,In.time=Ga(),Qs(),ua.procs.poll()}function As(){Qs(),ua.procs.refresh(),hi&&hi.update()}function Ga(){return(zr()-ni)/1e3}As();function Yu(ma,ba){ut.type(ba,"function","listener callback must be a function");var xo;switch(ma){case"frame":return Fs(ba);case"lost":xo=ra;break;case"restore":xo=Ja;break;case"destroy":xo=Li;break;default:ut.raise("invalid event, must be one of frame,lost,restore,destroy")}return xo.push(ba),{cancel:function(){for(var Hs=0;Hs<xo.length;++Hs)if(xo[Hs]===ba){xo[Hs]=xo[xo.length-1],xo.pop();return}}}}var To=k(hs,{clear:Vs,prop:Er.define.bind(null,Fp),context:Er.define.bind(null,k0),this:Er.define.bind(null,xg),draw:hs({}),buffer:function(ma){return ii.create(ma,gm,!1,!1)},elements:function(ma){return Oi.create(ma,!1)},texture:Mi.create2D,cube:Mi.createCube,renderbuffer:Un.create,framebuffer:bi.create,framebufferCube:bi.createCube,vao:Ci.createVAO,attributes:dn,frame:Fs,on:Yu,limits:En,hasExtension:function(ma){return En.extensions.indexOf(ma.toLowerCase())>=0},read:Ra,destroy:co,_gl:br,_refresh:As,poll:function(){Nu(),hi&&hi.update()},now:Ga,stats:ti});return Kt.onDone(null,To),To}return Hv})},3876:function(ct,N){"use strict";var k;k={value:!0},k=k=N.Tf=N.Bc=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__category",N.O6="l7plot-legend__title",N.fL="l7plot-legend__category-list",N.jp="l7plot-legend__list-item",N.Bc="l7plot-legend__category-marker",N.Tf="l7plot-legend__category-value",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),k='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.Bc,`" style="background:{color}"></span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},56992:function(ct,N){"use strict";var k;k={value:!0},k=k=N.VI=N.bl=N.el=N.I8=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__continue",N.O6="l7plot-legend__title",N.I8="l7plot-legend__ribbon-container",N.el="l7plot-legend__ribbon",N.bl="l7plot-legend__gradient-bar",N.VI="l7plot-legend__value-range",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <div class="`).concat(N.I8,`"></div>
</div>`),k='<div class="'.concat(N.el,`">
  <span class="`).concat(N.VI,`">{min}</span>
  <div class="`).concat(N.bl,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(N.VI,`">{max}</span>
</div>`)},77972:function(ct,N){"use strict";var k;k={value:!0},k=k=N.Tf=N.bX=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-tooltip",N.O6="l7plot-tooltip__title",N.fL="l7plot-tooltip__list",N.jp="l7plot-tooltip__list-item",N.bX="l7plot-tooltip__name",N.Tf="l7plot-tooltip__value",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),k='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.bX,`">{name}</span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},31506:function(ct,N,k){"use strict";k.d(N,{Dg:function(){return te},lh:function(){return j},m$:function(){return w},vs:function(){return Q},zu:function(){return W}});var $=k(35600),K=k(31437);function w(fe,ce,J){var M=[0,0,0,0,0,0,0,0,0];return $.vc(M,J),$.Jp(fe,M,ce)}function W(fe,ce,J){var M=[0,0,0,0,0,0,0,0,0];return $.Us(M,J),$.Jp(fe,M,ce)}function j(fe,ce,J){var M=[0,0,0,0,0,0,0,0,0];return $.xJ(M,J),$.Jp(fe,M,ce)}function q(fe,ce,J){return $.Jp(fe,J,ce)}function Q(fe,ce){for(var J=fe?[].concat(fe):[1,0,0,0,1,0,0,0,1],M=0,E=ce.length;M<E;M++){var ge=ce[M];switch(ge[0]){case"t":w(J,J,[ge[1],ge[2]]);break;case"s":j(J,J,[ge[1],ge[2]]);break;case"r":W(J,J,ge[1]);break;case"m":q(J,J,ge[1]);break;default:break}}return J}function ie(fe,ce){return fe[0]*ce[1]-ce[0]*fe[1]}function te(fe,ce,J){var M=K.EU(fe,ce),E=ie(fe,ce)>=0;return J?E?Math.PI*2-M:M:E?M:Math.PI*2-M}function we(fe,ce,J){return J?(fe[0]=ce[1],fe[1]=-1*ce[0]):(fe[0]=-1*ce[1],fe[1]=ce[0]),fe}},39499:function(ct,N,k){"use strict";k.d(N,{e9:function(){return te},Wq:function(){return Xr},tr:function(){return ge},wb:function(){return Be},zx:function(){return Ye}});var $=k(21030),K=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,w=/[^\s\,]+/ig;function W(Nt){var Yt=Nt||[];if((0,$.kJ)(Yt))return Yt;if((0,$.HD)(Yt))return Yt=Yt.match(K),(0,$.S6)(Yt,function(sr,Dt){if(sr=sr.match(w),sr[0].length>1){var Qt=sr[0].charAt(0);sr.splice(1,0,sr[0].substr(1)),sr[0]=Qt}(0,$.S6)(sr,function(Sr,Er){isNaN(Sr)||(sr[Er]=+Sr)}),Yt[Dt]=sr}),Yt}var j=W,q=k(31437);function Q(Nt,Yt,sr,Dt){var Qt=[],Sr=!!Dt,Er,Fr,zr,le,H,re,Re;if(Sr){zr=Dt[0],le=Dt[1];for(var Ke=0,Tt=Nt.length;Ke<Tt;Ke+=1){var or=Nt[Ke];zr=q.VV([0,0],zr,or),le=q.Fp([0,0],le,or)}}for(var Ke=0,jt=Nt.length;Ke<jt;Ke+=1){var or=Nt[Ke];if(Ke===0&&!sr)Re=or;else if(Ke===jt-1&&!sr)re=or,Qt.push(Re),Qt.push(re);else{var wt=[Ke?Ke-1:jt-1,Ke-1][sr?0:1];Er=Nt[wt],Fr=Nt[sr?(Ke+1)%jt:Ke+1];var It=[0,0];It=q.lu(It,Fr,Er),It=q.bA(It,It,Yt);var de=q.TE(or,Er),pe=q.TE(or,Fr),Me=de+pe;Me!==0&&(de/=Me,pe/=Me);var et=q.bA([0,0],It,-de),St=q.bA([0,0],It,pe);re=q.IH([0,0],or,et),H=q.IH([0,0],or,St),H=q.VV([0,0],H,q.Fp([0,0],Fr,or)),H=q.Fp([0,0],H,q.VV([0,0],Fr,or)),et=q.lu([0,0],H,or),et=q.bA([0,0],et,-de/pe),re=q.IH([0,0],or,et),re=q.VV([0,0],re,q.Fp([0,0],Er,or)),re=q.Fp([0,0],re,q.VV([0,0],Er,or)),St=q.lu([0,0],or,re),St=q.bA([0,0],St,pe/de),H=q.IH([0,0],or,St),Sr&&(re=q.Fp([0,0],re,zr),re=q.VV([0,0],re,le),H=q.Fp([0,0],H,zr),H=q.VV([0,0],H,le)),Qt.push(Re),Qt.push(re),Re=H}}return sr&&Qt.push(Qt.shift()),Qt}function ie(Nt,Yt,sr){Yt===void 0&&(Yt=!1),sr===void 0&&(sr=[[0,0],[1,1]]);for(var Dt=!!Yt,Qt=[],Sr=0,Er=Nt.length;Sr<Er;Sr+=2)Qt.push([Nt[Sr],Nt[Sr+1]]);for(var Fr=Q(Qt,.4,Dt,sr),zr=Qt.length,le=[],H,re,Re,Sr=0;Sr<zr-1;Sr+=1)H=Fr[Sr*2],re=Fr[Sr*2+1],Re=Qt[Sr+1],le.push(["C",H[0],H[1],re[0],re[1],Re[0],Re[1]]);return Dt&&(H=Fr[zr],re=Fr[zr+1],Re=Qt[0],le.push(["C",H[0],H[1],re[0],re[1],Re[0],Re[1]])),le}var te=ie;function we(Nt,Yt,sr){var Dt=null,Qt=sr;return Yt<Qt&&(Qt=Yt,Dt="add"),Nt<Qt&&(Qt=Nt,Dt="del"),{type:Dt,min:Qt}}var fe=function(Nt,Yt){var sr=Nt.length,Dt=Yt.length,Qt,Sr,Er=0;if(sr===0||Dt===0)return null;for(var Fr=[],zr=0;zr<=sr;zr++)Fr[zr]=[],Fr[zr][0]={min:zr};for(var le=0;le<=Dt;le++)Fr[0][le]={min:le};for(var zr=1;zr<=sr;zr++){Qt=Nt[zr-1];for(var le=1;le<=Dt;le++){Sr=Yt[le-1],isEqual(Qt,Sr)?Er=0:Er=1;var H=Fr[zr-1][le].min+1,re=Fr[zr][le-1].min+1,Re=Fr[zr-1][le-1].min+Er;Fr[zr][le]=we(H,re,Re)}}return Fr};function ce(Nt,Yt){var sr=fe(Nt,Yt),Dt=Nt.length,Qt=Yt.length,Sr=[],Er=1,Fr=1;if(sr[Dt][Qt]!==Dt){for(var zr=1;zr<=Dt;zr++){var le=sr[zr][zr].min;Fr=zr;for(var H=Er;H<=Qt;H++)sr[zr][H].min<le&&(le=sr[zr][H].min,Fr=H);Er=Fr,sr[zr][Er].type&&Sr.push({index:zr-1,type:sr[zr][Er].type})}for(var zr=Sr.length-1;zr>=0;zr--)Er=Sr[zr].index,Sr[zr].type==="add"?Nt.splice(Er,0,[].concat(Nt[Er])):Nt.splice(Er,1)}if(Dt=Nt.length,Dt<Qt)for(var zr=0;zr<Qt-Dt;zr++)Nt[Dt-1][0]==="z"||Nt[Dt-1][0]==="Z"?Nt.splice(Dt-2,0,Nt[Dt-2]):Nt.push(Nt[Dt-1]);return Nt}var J=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,M=new RegExp("([a-z])["+J+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+J+"]*,?["+J+"]*)+)","ig"),E=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+J+"]*,?["+J+"]*","ig");function ge(Nt){if(!Nt)return null;if((0,$.kJ)(Nt))return Nt;var Yt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},sr=[];return String(Nt).replace(M,function(Dt,Qt,Sr){var Er=[],Fr=Qt.toLowerCase();if(Sr.replace(E,function(zr,le){le&&Er.push(+le)}),Fr==="m"&&Er.length>2&&(sr.push([Qt].concat(Er.splice(0,2))),Fr="l",Qt=Qt==="m"?"l":"L"),Fr==="o"&&Er.length===1&&sr.push([Qt,Er[0]]),Fr==="r")sr.push([Qt].concat(Er));else for(;Er.length>=Yt[Fr]&&(sr.push([Qt].concat(Er.splice(0,Yt[Fr]))),!!Yt[Fr]););return""}),sr}var be=/[a-z]/;function ze(Nt,Yt){return[Yt[0]+(Yt[0]-Nt[0]),Yt[1]+(Yt[1]-Nt[1])]}function Be(Nt){var Yt=ge(Nt);if(!Yt||!Yt.length)return[["M",0,0]];for(var sr=!1,Dt=0;Dt<Yt.length;Dt++){var Qt=Yt[Dt][0];if(be.test(Qt)||["V","H","T","S"].indexOf(Qt)>=0){sr=!0;break}}if(!sr)return Yt;var Sr=[],Er=0,Fr=0,zr=0,le=0,H=0,re,Re,Ke=Yt[0];(Ke[0]==="M"||Ke[0]==="m")&&(Er=+Ke[1],Fr=+Ke[2],zr=Er,le=Fr,H++,Sr[0]=["M",Er,Fr]);for(var Dt=H,Tt=Yt.length;Dt<Tt;Dt++){var or=Yt[Dt],jt=Sr[Dt-1],wt=[],Qt=or[0],It=Qt.toUpperCase();if(Qt!==It)switch(wt[0]=It,It){case"A":wt[1]=or[1],wt[2]=or[2],wt[3]=or[3],wt[4]=or[4],wt[5]=or[5],wt[6]=+or[6]+Er,wt[7]=+or[7]+Fr;break;case"V":wt[1]=+or[1]+Fr;break;case"H":wt[1]=+or[1]+Er;break;case"M":zr=+or[1]+Er,le=+or[2]+Fr,wt[1]=zr,wt[2]=le;break;default:for(var de=1,pe=or.length;de<pe;de++)wt[de]=+or[de]+(de%2?Er:Fr)}else wt=Yt[Dt];switch(It){case"Z":Er=+zr,Fr=+le;break;case"H":Er=wt[1],wt=["L",Er,Fr];break;case"V":Fr=wt[1],wt=["L",Er,Fr];break;case"T":Er=wt[1],Fr=wt[2];var Me=ze([jt[1],jt[2]],[jt[3],jt[4]]);wt=["Q",Me[0],Me[1],Er,Fr];break;case"S":Er=wt[wt.length-2],Fr=wt[wt.length-1];var et=jt.length,St=ze([jt[et-4],jt[et-3]],[jt[et-2],jt[et-1]]);wt=["C",St[0],St[1],wt[1],wt[2],Er,Fr];break;case"M":zr=wt[wt.length-2],le=wt[wt.length-1];break;default:Er=wt[wt.length-2],Fr=wt[wt.length-1]}Sr.push(wt)}return Sr}var Ue=Math.PI*2,it=function(Nt,Yt,sr,Dt,Qt,Sr,Er){var Fr=Nt.x,zr=Nt.y;Fr*=Yt,zr*=sr;var le=Dt*Fr-Qt*zr,H=Qt*Fr+Dt*zr;return{x:le+Sr,y:H+Er}},ht=function(Nt,Yt){var sr=Yt===1.5707963267948966?.551915024494:Yt===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Yt/4),Dt=Math.cos(Nt),Qt=Math.sin(Nt),Sr=Math.cos(Nt+Yt),Er=Math.sin(Nt+Yt);return[{x:Dt-Qt*sr,y:Qt+Dt*sr},{x:Sr+Er*sr,y:Er-Sr*sr},{x:Sr,y:Er}]},Le=function(Nt,Yt,sr,Dt){var Qt=Nt*Dt-Yt*sr<0?-1:1,Sr=Nt*sr+Yt*Dt;return Sr>1&&(Sr=1),Sr<-1&&(Sr=-1),Qt*Math.acos(Sr)},Se=function(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr,zr,le,H,re){var Re=Math.pow(Qt,2),Ke=Math.pow(Sr,2),Tt=Math.pow(H,2),or=Math.pow(re,2),jt=Re*Ke-Re*or-Ke*Tt;jt<0&&(jt=0),jt/=Re*or+Ke*Tt,jt=Math.sqrt(jt)*(Er===Fr?-1:1);var wt=jt*Qt/Sr*re,It=jt*-Sr/Qt*H,de=le*wt-zr*It+(Nt+sr)/2,pe=zr*wt+le*It+(Yt+Dt)/2,Me=(H-wt)/Qt,et=(re-It)/Sr,St=(-H-wt)/Qt,Gt=(-re-It)/Sr,gr=Le(1,0,Me,et),At=Le(Me,et,St,Gt);return Fr===0&&At>0&&(At-=Ue),Fr===1&&At<0&&(At+=Ue),[de,pe,gr,At]},ye=function(Nt){var Yt=Nt.px,sr=Nt.py,Dt=Nt.cx,Qt=Nt.cy,Sr=Nt.rx,Er=Nt.ry,Fr=Nt.xAxisRotation,zr=Fr===void 0?0:Fr,le=Nt.largeArcFlag,H=le===void 0?0:le,re=Nt.sweepFlag,Re=re===void 0?0:re,Ke=[];if(Sr===0||Er===0)return[{x1:0,y1:0,x2:0,y2:0,x:Dt,y:Qt}];var Tt=Math.sin(zr*Ue/360),or=Math.cos(zr*Ue/360),jt=or*(Yt-Dt)/2+Tt*(sr-Qt)/2,wt=-Tt*(Yt-Dt)/2+or*(sr-Qt)/2;if(jt===0&&wt===0)return[{x1:0,y1:0,x2:0,y2:0,x:Dt,y:Qt}];Sr=Math.abs(Sr),Er=Math.abs(Er);var It=Math.pow(jt,2)/Math.pow(Sr,2)+Math.pow(wt,2)/Math.pow(Er,2);It>1&&(Sr*=Math.sqrt(It),Er*=Math.sqrt(It));var de=Se(Yt,sr,Dt,Qt,Sr,Er,H,Re,Tt,or,jt,wt),pe=de[0],Me=de[1],et=de[2],St=de[3],Gt=Math.abs(St)/(Ue/4);Math.abs(1-Gt)<1e-7&&(Gt=1);var gr=Math.max(Math.ceil(Gt),1);St/=gr;for(var At=0;At<gr;At++)Ke.push(ht(et,St)),et+=St;return Ke.map(function(ot){var Ot=it(ot[0],Sr,Er,or,Tt,pe,Me),yr=Ot.x,kr=Ot.y,Ft=it(ot[1],Sr,Er,or,Tt,pe,Me),Mn=Ft.x,qn=Ft.y,ri=it(ot[2],Sr,Er,or,Tt,pe,Me),un=ri.x,Yn=ri.y;return{x1:yr,y1:kr,x2:Mn,y2:qn,x:un,y:Yn}})};function Ve(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr,zr){var le=ye({px:Nt,py:Yt,cx:Fr,cy:zr,rx:sr,ry:Dt,xAxisRotation:Qt,largeArcFlag:Sr,sweepFlag:Er});return le.reduce(function(H,re){var Re=re.x1,Ke=re.y1,Tt=re.x2,or=re.y2,jt=re.x,wt=re.y;return H.push(Re,Ke,Tt,or,jt,wt),H},[])}function je(Nt,Yt){"TQ".indexOf(Nt[0])<0&&(Yt.qx=null,Yt.qy=null);var sr=Nt.slice(1),Dt=sr[0],Qt=sr[1];switch(Nt[0]){case"M":return Yt.x=Dt,Yt.y=Qt,Nt;case"A":return["C"].concat(arcToCubic.apply(0,[Yt.x1,Yt.y1].concat(Nt.slice(1))));case"Q":return Yt.qx=Dt,Yt.qy=Qt,["C"].concat(quadToCubic.apply(0,[Yt.x1,Yt.y1].concat(Nt.slice(1))));case"L":return["C"].concat(lineToCubic(Yt.x1,Yt.y1,Nt[1],Nt[2]));case"H":return["C"].concat(lineToCubic(Yt.x1,Yt.y1,Nt[1],Yt.y1));case"V":return["C"].concat(lineToCubic(Yt.x1,Yt.y1,Yt.x1,Nt[1]));case"Z":return["C"].concat(lineToCubic(Yt.x1,Yt.y1,Yt.x,Yt.y));default:}return Nt}function Et(Nt,Yt){Yt===void 0&&(Yt=!1);for(var sr=path2Absolute(Nt),Dt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},Qt=[],Sr="",Er=sr.length,Fr,zr,le=[],H=0;H<Er;H+=1)sr[H]&&(Sr=sr[H][0]),Qt[H]=Sr,sr[H]=segmentToCubic(sr[H],Dt),Oe(sr,Qt,H),Er=sr.length,Sr==="Z"&&le.push(H),Fr=sr[H],zr=Fr.length,Dt.x1=+Fr[zr-2],Dt.y1=+Fr[zr-1],Dt.x2=+Fr[zr-4]||Dt.x1,Dt.y2=+Fr[zr-3]||Dt.y1;return Yt?[sr,le]:sr}function Oe(Nt,Yt,sr){if(Nt[sr].length>7){Nt[sr].shift();for(var Dt=Nt[sr],Qt=sr;Dt.length;)Yt[sr]="A",Nt.splice(Qt+=1,0,["C"].concat(Dt.splice(0,6)));Nt.splice(sr,1)}}var Qe=function(Nt,Yt,sr,Dt,Qt){var Sr=-3*Yt+9*sr-9*Dt+3*Qt,Er=Nt*Sr+6*Yt-12*sr+6*Dt;return Nt*Er-3*Yt+3*sr},ne=function(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr,zr){zr===null&&(zr=1),zr=zr>1?1:zr<0?0:zr;for(var le=zr/2,H=12,re=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Re=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Ke=0,Tt=0;Tt<H;Tt++){var or=le*re[Tt]+le,jt=Qe(or,Nt,sr,Qt,Er),wt=Qe(or,Yt,Dt,Sr,Fr),It=jt*jt+wt*wt;Ke+=Re[Tt]*Math.sqrt(It)}return le*Ke},We=function(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr){for(var zr=[],le=[[],[]],H,re,Re,Ke,Tt=0;Tt<2;++Tt){if(Tt===0?(re=6*Nt-12*sr+6*Qt,H=-3*Nt+9*sr-9*Qt+3*Er,Re=3*sr-3*Nt):(re=6*Yt-12*Dt+6*Sr,H=-3*Yt+9*Dt-9*Sr+3*Fr,Re=3*Dt-3*Yt),Math.abs(H)<1e-12){if(Math.abs(re)<1e-12)continue;Ke=-Re/re,Ke>0&&Ke<1&&zr.push(Ke);continue}var or=re*re-4*Re*H,jt=Math.sqrt(or);if(!(or<0)){var wt=(-re+jt)/(2*H);wt>0&&wt<1&&zr.push(wt);var It=(-re-jt)/(2*H);It>0&&It<1&&zr.push(It)}}for(var de=zr.length,pe=de,Me;de--;)Ke=zr[de],Me=1-Ke,le[0][de]=Me*Me*Me*Nt+3*Me*Me*Ke*sr+3*Me*Ke*Ke*Qt+Ke*Ke*Ke*Er,le[1][de]=Me*Me*Me*Yt+3*Me*Me*Ke*Dt+3*Me*Ke*Ke*Sr+Ke*Ke*Ke*Fr;return le[0][pe]=Nt,le[1][pe]=Yt,le[0][pe+1]=Er,le[1][pe+1]=Fr,le[0].length=le[1].length=pe+2,{min:{x:Math.min.apply(0,le[0]),y:Math.min.apply(0,le[1])},max:{x:Math.max.apply(0,le[0]),y:Math.max.apply(0,le[1])}}},oe=function(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr){if(!(Math.max(Nt,sr)<Math.min(Qt,Er)||Math.min(Nt,sr)>Math.max(Qt,Er)||Math.max(Yt,Dt)<Math.min(Sr,Fr)||Math.min(Yt,Dt)>Math.max(Sr,Fr))){var zr=(Nt*Dt-Yt*sr)*(Qt-Er)-(Nt-sr)*(Qt*Fr-Sr*Er),le=(Nt*Dt-Yt*sr)*(Sr-Fr)-(Yt-Dt)*(Qt*Fr-Sr*Er),H=(Nt-sr)*(Sr-Fr)-(Yt-Dt)*(Qt-Er);if(H){var re=zr/H,Re=le/H,Ke=+re.toFixed(2),Tt=+Re.toFixed(2);if(!(Ke<+Math.min(Nt,sr).toFixed(2)||Ke>+Math.max(Nt,sr).toFixed(2)||Ke<+Math.min(Qt,Er).toFixed(2)||Ke>+Math.max(Qt,Er).toFixed(2)||Tt<+Math.min(Yt,Dt).toFixed(2)||Tt>+Math.max(Yt,Dt).toFixed(2)||Tt<+Math.min(Sr,Fr).toFixed(2)||Tt>+Math.max(Sr,Fr).toFixed(2)))return{x:re,y:Re}}}},Fe=function(Nt,Yt,sr){return Yt>=Nt.x&&Yt<=Nt.x+Nt.width&&sr>=Nt.y&&sr<=Nt.y+Nt.height},st=function(Nt,Yt,sr,Dt){return Nt===null&&(Nt=Yt=sr=Dt=0),Yt===null&&(Yt=Nt.y,sr=Nt.width,Dt=Nt.height,Nt=Nt.x),{x:Nt,y:Yt,width:sr,w:sr,height:Dt,h:Dt,x2:Nt+sr,y2:Yt+Dt,cx:Nt+sr/2,cy:Yt+Dt/2,r1:Math.min(sr,Dt)/2,r2:Math.max(sr,Dt)/2,r0:Math.sqrt(sr*sr+Dt*Dt)/2,path:rectPath(Nt,Yt,sr,Dt),vb:[Nt,Yt,sr,Dt].join(" ")}},Ce=function(Nt,Yt){return Nt=st(Nt),Yt=st(Yt),Fe(Yt,Nt.x,Nt.y)||Fe(Yt,Nt.x2,Nt.y)||Fe(Yt,Nt.x,Nt.y2)||Fe(Yt,Nt.x2,Nt.y2)||Fe(Nt,Yt.x,Yt.y)||Fe(Nt,Yt.x2,Yt.y)||Fe(Nt,Yt.x,Yt.y2)||Fe(Nt,Yt.x2,Yt.y2)||(Nt.x<Yt.x2&&Nt.x>Yt.x||Yt.x<Nt.x2&&Yt.x>Nt.x)&&(Nt.y<Yt.y2&&Nt.y>Yt.y||Yt.y<Nt.y2&&Yt.y>Nt.y)},De=function(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr){isArray(Nt)||(Nt=[Nt,Yt,sr,Dt,Qt,Sr,Er,Fr]);var zr=We.apply(null,Nt);return st(zr.min.x,zr.min.y,zr.max.x-zr.min.x,zr.max.y-zr.min.y)},tt=function(Nt,Yt,sr,Dt,Qt,Sr,Er,Fr,zr){var le=1-zr,H=Math.pow(le,3),re=Math.pow(le,2),Re=zr*zr,Ke=Re*zr,Tt=H*Nt+re*3*zr*sr+le*3*zr*zr*Qt+Ke*Er,or=H*Yt+re*3*zr*Dt+le*3*zr*zr*Sr+Ke*Fr,jt=Nt+2*zr*(sr-Nt)+Re*(Qt-2*sr+Nt),wt=Yt+2*zr*(Dt-Yt)+Re*(Sr-2*Dt+Yt),It=sr+2*zr*(Qt-sr)+Re*(Er-2*Qt+sr),de=Dt+2*zr*(Sr-Dt)+Re*(Fr-2*Sr+Dt),pe=le*Nt+zr*sr,Me=le*Yt+zr*Dt,et=le*Qt+zr*Er,St=le*Sr+zr*Fr,Gt=90-Math.atan2(jt-It,wt-de)*180/Math.PI;return{x:Tt,y:or,m:{x:jt,y:wt},n:{x:It,y:de},start:{x:pe,y:Me},end:{x:et,y:St},alpha:Gt}},_e=function(Nt,Yt,sr){var Dt=De(Nt),Qt=De(Yt);if(!Ce(Dt,Qt))return sr?0:[];for(var Sr=ne.apply(0,Nt),Er=ne.apply(0,Yt),Fr=~~(Sr/8),zr=~~(Er/8),le=[],H=[],re={},Re=sr?0:[],Ke=0;Ke<Fr+1;Ke++){var Tt=tt.apply(0,Nt.concat(Ke/Fr));le.push({x:Tt.x,y:Tt.y,t:Ke/Fr})}for(var Ke=0;Ke<zr+1;Ke++){var Tt=tt.apply(0,Yt.concat(Ke/zr));H.push({x:Tt.x,y:Tt.y,t:Ke/zr})}for(var Ke=0;Ke<Fr;Ke++)for(var or=0;or<zr;or++){var jt=le[Ke],wt=le[Ke+1],It=H[or],de=H[or+1],pe=Math.abs(wt.x-jt.x)<.001?"y":"x",Me=Math.abs(de.x-It.x)<.001?"y":"x",et=oe(jt.x,jt.y,wt.x,wt.y,It.x,It.y,de.x,de.y);if(et){if(re[et.x.toFixed(4)]===et.y.toFixed(4))continue;re[et.x.toFixed(4)]=et.y.toFixed(4);var St=jt.t+Math.abs((et[pe]-jt[pe])/(wt[pe]-jt[pe]))*(wt.t-jt.t),Gt=It.t+Math.abs((et[Me]-It[Me])/(de[Me]-It[Me]))*(de.t-It.t);St>=0&&St<=1&&Gt>=0&&Gt<=1&&(sr?Re++:Re.push({x:et.x,y:et.y,t1:St,t2:Gt}))}}return Re},me=function(Nt,Yt,sr){Nt=path2Curve(Nt),Yt=path2Curve(Yt);for(var Dt,Qt,Sr,Er,Fr,zr,le,H,re,Re,Ke=sr?0:[],Tt=0,or=Nt.length;Tt<or;Tt++){var jt=Nt[Tt];if(jt[0]==="M")Dt=Fr=jt[1],Qt=zr=jt[2];else{jt[0]==="C"?(re=[Dt,Qt].concat(jt.slice(1)),Dt=re[6],Qt=re[7]):(re=[Dt,Qt,Dt,Qt,Fr,zr,Fr,zr],Dt=Fr,Qt=zr);for(var wt=0,It=Yt.length;wt<It;wt++){var de=Yt[wt];if(de[0]==="M")Sr=le=de[1],Er=H=de[2];else{de[0]==="C"?(Re=[Sr,Er].concat(de.slice(1)),Sr=Re[6],Er=Re[7]):(Re=[Sr,Er,Sr,Er,le,H,le,H],Sr=le,Er=H);var pe=_e(re,Re,sr);if(sr)Ke+=pe;else{for(var Me=0,et=pe.length;Me<et;Me++)pe[Me].segment1=Tt,pe[Me].segment2=wt,pe[Me].bez1=re,pe[Me].bez2=Re;Ke=Ke.concat(pe)}}}}}return Ke};function Ge(Nt,Yt){return me(Nt,Yt)}function Ze(Nt){return Math.sqrt(Nt[0]*Nt[0]+Nt[1]*Nt[1])}function pt(Nt,Yt){return Ze(Nt)*Ze(Yt)?(Nt[0]*Yt[0]+Nt[1]*Yt[1])/(Ze(Nt)*Ze(Yt)):1}function Ht(Nt,Yt){return(Nt[0]*Yt[1]<Nt[1]*Yt[0]?-1:1)*Math.acos(pt(Nt,Yt))}function Je(Nt,Yt){return Nt[0]===Yt[0]&&Nt[1]===Yt[1]}function $e(Nt,Yt){var sr=Yt[1],Dt=Yt[2],Qt=(0,$.wQ)((0,$.c$)(Yt[3]),Math.PI*2),Sr=Yt[4],Er=Yt[5],Fr=Nt[0],zr=Nt[1],le=Yt[6],H=Yt[7],re=Math.cos(Qt)*(Fr-le)/2+Math.sin(Qt)*(zr-H)/2,Re=-1*Math.sin(Qt)*(Fr-le)/2+Math.cos(Qt)*(zr-H)/2,Ke=re*re/(sr*sr)+Re*Re/(Dt*Dt);Ke>1&&(sr*=Math.sqrt(Ke),Dt*=Math.sqrt(Ke));var Tt=sr*sr*(Re*Re)+Dt*Dt*(re*re),or=Tt?Math.sqrt((sr*sr*(Dt*Dt)-Tt)/Tt):1;Sr===Er&&(or*=-1),isNaN(or)&&(or=0);var jt=Dt?or*sr*Re/Dt:0,wt=sr?or*-Dt*re/sr:0,It=(Fr+le)/2+Math.cos(Qt)*jt-Math.sin(Qt)*wt,de=(zr+H)/2+Math.sin(Qt)*jt+Math.cos(Qt)*wt,pe=[(re-jt)/sr,(Re-wt)/Dt],Me=[(-1*re-jt)/sr,(-1*Re-wt)/Dt],et=Ht([1,0],pe),St=Ht(pe,Me);return pt(pe,Me)<=-1&&(St=Math.PI),pt(pe,Me)>=1&&(St=0),Er===0&&St>0&&(St=St-2*Math.PI),Er===1&&St<0&&(St=St+2*Math.PI),{cx:It,cy:de,rx:Je(Nt,[le,H])?0:sr,ry:Je(Nt,[le,H])?0:Dt,startAngle:et,endAngle:et+St,xRotation:Qt,arcFlag:Sr,sweepFlag:Er}}function Te(Nt,Yt){return[Yt[0]+(Yt[0]-Nt[0]),Yt[1]+(Yt[1]-Nt[1])]}function Ye(Nt){Nt=j(Nt);for(var Yt=[],sr=null,Dt=null,Qt=null,Sr=0,Er=Nt.length,Fr=0;Fr<Er;Fr++){var zr=Nt[Fr];Dt=Nt[Fr+1];var le=zr[0],H={command:le,prePoint:sr,params:zr,startTangent:null,endTangent:null};switch(le){case"M":Qt=[zr[1],zr[2]],Sr=Fr;break;case"A":var re=$e(sr,zr);H.arcParams=re;break;default:break}if(le==="Z")sr=Qt,Dt=Nt[Sr+1];else{var Re=zr.length;sr=[zr[Re-2],zr[Re-1]]}Dt&&Dt[0]==="Z"&&(Dt=Nt[Sr],Yt[Sr]&&(Yt[Sr].prePoint=sr)),H.currentPoint=sr,Yt[Sr]&&Je(sr,Yt[Sr].currentPoint)&&(Yt[Sr].prePoint=H.prePoint);var Ke=Dt?[Dt[Dt.length-2],Dt[Dt.length-1]]:null;H.nextPoint=Ke;var Tt=H.prePoint;if(["L","H","V"].includes(le))H.startTangent=[Tt[0]-sr[0],Tt[1]-sr[1]],H.endTangent=[sr[0]-Tt[0],sr[1]-Tt[1]];else if(le==="Q"){var or=[zr[1],zr[2]];H.startTangent=[Tt[0]-or[0],Tt[1]-or[1]],H.endTangent=[sr[0]-or[0],sr[1]-or[1]]}else if(le==="T"){var jt=Yt[Fr-1],or=Te(jt.currentPoint,Tt);jt.command==="Q"?(H.command="Q",H.startTangent=[Tt[0]-or[0],Tt[1]-or[1]],H.endTangent=[sr[0]-or[0],sr[1]-or[1]]):(H.command="TL",H.startTangent=[Tt[0]-sr[0],Tt[1]-sr[1]],H.endTangent=[sr[0]-Tt[0],sr[1]-Tt[1]])}else if(le==="C"){var wt=[zr[1],zr[2]],It=[zr[3],zr[4]];H.startTangent=[Tt[0]-wt[0],Tt[1]-wt[1]],H.endTangent=[sr[0]-It[0],sr[1]-It[1]],H.startTangent[0]===0&&H.startTangent[1]===0&&(H.startTangent=[wt[0]-It[0],wt[1]-It[1]]),H.endTangent[0]===0&&H.endTangent[1]===0&&(H.endTangent=[It[0]-wt[0],It[1]-wt[1]])}else if(le==="S"){var jt=Yt[Fr-1],wt=Te(jt.currentPoint,Tt),It=[zr[1],zr[2]];jt.command==="C"?(H.command="C",H.startTangent=[Tt[0]-wt[0],Tt[1]-wt[1]],H.endTangent=[sr[0]-It[0],sr[1]-It[1]]):(H.command="SQ",H.startTangent=[Tt[0]-It[0],Tt[1]-It[1]],H.endTangent=[sr[0]-It[0],sr[1]-It[1]])}else if(le==="A"){var de=.001,pe=H.arcParams||{},Me=pe.cx,et=Me===void 0?0:Me,St=pe.cy,Gt=St===void 0?0:St,gr=pe.rx,At=gr===void 0?0:gr,ot=pe.ry,Ot=ot===void 0?0:ot,yr=pe.sweepFlag,kr=yr===void 0?0:yr,Ft=pe.startAngle,Mn=Ft===void 0?0:Ft,qn=pe.endAngle,ri=qn===void 0?0:qn;kr===0&&(de*=-1);var un=At*Math.cos(Mn-de)+et,Yn=Ot*Math.sin(Mn-de)+Gt;H.startTangent=[un-Qt[0],Yn-Qt[1]];var jn=At*Math.cos(Mn+ri+de)+et,Kn=Ot*Math.sin(Mn+ri-de)+Gt;H.endTangent=[Tt[0]-jn,Tt[1]-Kn]}Yt.push(H)}return Yt}var ft=1e-6;function ke(Nt){return Math.abs(Nt)<ft?0:Nt<0?-1:1}function Ne(Nt,Yt,sr){return(sr[0]-Nt[0])*(Yt[1]-Nt[1])===(Yt[0]-Nt[0])*(sr[1]-Nt[1])&&Math.min(Nt[0],Yt[0])<=sr[0]&&sr[0]<=Math.max(Nt[0],Yt[0])&&Math.min(Nt[1],Yt[1])<=sr[1]&&sr[1]<=Math.max(Nt[1],Yt[1])}function dt(Nt,Yt,sr){var Dt=!1,Qt=Nt.length;if(Qt<=2)return!1;for(var Sr=0;Sr<Qt;Sr++){var Er=Nt[Sr],Fr=Nt[(Sr+1)%Qt];if(Ne(Er,Fr,[Yt,sr]))return!0;ke(Er[1]-sr)>0!=ke(Fr[1]-sr)>0&&ke(Yt-(sr-Er[1])*(Er[0]-Fr[0])/(Er[1]-Fr[1])-Er[0])<0&&(Dt=!Dt)}return Dt}var Pt=function(Nt,Yt,sr){return Nt>=Yt&&Nt<=sr};function rr(Nt,Yt,sr,Dt){var Qt=.001,Sr={x:sr.x-Nt.x,y:sr.y-Nt.y},Er={x:Yt.x-Nt.x,y:Yt.y-Nt.y},Fr={x:Dt.x-sr.x,y:Dt.y-sr.y},zr=Er.x*Fr.y-Er.y*Fr.x,le=zr*zr,H=Er.x*Er.x+Er.y*Er.y,re=Fr.x*Fr.x+Fr.y*Fr.y,Re=null;if(le>Qt*H*re){var Ke=(Sr.x*Fr.y-Sr.y*Fr.x)/zr,Tt=(Sr.x*Er.y-Sr.y*Er.x)/zr;Pt(Ke,0,1)&&Pt(Tt,0,1)&&(Re={x:Nt.x+Ke*Er.x,y:Nt.y+Ke*Er.y})}return Re}function xr(Nt){for(var Yt=[],sr=Nt.length,Dt=0;Dt<sr-1;Dt++){var Qt=Nt[Dt],Sr=Nt[Dt+1];Yt.push({from:{x:Qt[0],y:Qt[1]},to:{x:Sr[0],y:Sr[1]}})}if(Yt.length>1){var Er=Nt[0],Fr=Nt[sr-1];Yt.push({from:{x:Fr[0],y:Fr[1]},to:{x:Er[0],y:Er[1]}})}return Yt}function ut(Nt,Yt){var sr=!1;return(0,$.S6)(Nt,function(Dt){if(rr(Dt.from,Dt.to,Yt.from,Yt.to))return sr=!0,!1}),sr}function nn(Nt){var Yt=Nt.map(function(Dt){return Dt[0]}),sr=Nt.map(function(Dt){return Dt[1]});return{minX:Math.min.apply(null,Yt),maxX:Math.max.apply(null,Yt),minY:Math.min.apply(null,sr),maxY:Math.max.apply(null,sr)}}function Gr(Nt,Yt){return!(Yt.minX>Nt.maxX||Yt.maxX<Nt.minX||Yt.minY>Nt.maxY||Yt.maxY<Nt.minY)}function Xr(Nt,Yt){if(Nt.length<2||Yt.length<2)return!1;var sr=nn(Nt),Dt=nn(Yt);if(!Gr(sr,Dt))return!1;var Qt=!1;if((0,$.S6)(Yt,function(zr){if(dt(Nt,zr[0],zr[1]))return Qt=!0,!1}),Qt||((0,$.S6)(Nt,function(zr){if(dt(Yt,zr[0],zr[1]))return Qt=!0,!1}),Qt))return!0;var Sr=xr(Nt),Er=xr(Yt),Fr=!1;return(0,$.S6)(Er,function(zr){if(ut(Sr,zr))return Fr=!0,!1}),Fr}},21030:function(ct,N,k){"use strict";k.d(N,{Ct:function(){return Du},f0:function(){return Bl},uZ:function(){return de},VS:function(){return rh},d9:function(){return ru},FX:function(){return W},Ds:function(){return tc},b$:function(){return xc},e5:function(){return ie},S6:function(){return ze},yW:function(){return Sr},hX:function(){return q},sE:function(){return Et},cx:function(){return Qe},Wx:function(){return We},ri:function(){return Me},xH:function(){return Fe},U5:function(){return Oo},U2:function(){return nu},Lo:function(){return vp},rx:function(){return me},ru:function(){return Re},vM:function(){return H},Ms:function(){return re},wH:function(){return _i},YM:function(){return Gr},q9:function(){return W},cq:function(){return Fl},kJ:function(){return E},jn:function(){return os},J_:function(){return Do},kK:function(){return Hu},xb:function(){return Sc},Xy:function(){return ji},mf:function(){return ce},BD:function(){return ht},UM:function(){return M},Ft:function(){return Jt},hj:function(){return St},vQ:function(){return qn},Kn:function(){return ge},PO:function(){return Ve},HD:function(){return Pt},P9:function(){return fe},o8:function(){return wo},XP:function(){return Ue},Z$:function(){return Xr},vl:function(){return cr},UI:function(){return rc},Q8:function(){return Gs},Fp:function(){return De},UT:function(){return Kn},HP:function(){return ho},VV:function(){return tt},F:function(){return aa},CD:function(){return Bl},wQ:function(){return da},ZT:function(){return Uo},CE:function(){return Nl},ei:function(){return nc},u4:function(){return ke},Od:function(){return dt},U7:function(){return cf},t8:function(){return vu},dp:function(){return Nd},G:function(){return Fr},MR:function(){return xr},ng:function(){return qt},P2:function(){return wc},qo:function(){return jc},c$:function(){return io},BB:function(){return lo},jj:function(){return ut},EL:function(){return ed},jC:function(){return tn},VO:function(){return Ha},I:function(){return nn}});var $=function(Mt){return Mt!==null&&typeof Mt!="function"&&isFinite(Mt.length)},K=$,w=function(Mt,mr){return K(Mt)?Mt.indexOf(mr)>-1:!1},W=w,j=function(Mt,mr){if(!K(Mt))return Mt;for(var Vr=[],Qr=0;Qr<Mt.length;Qr++){var On=Mt[Qr];mr(On,Qr)&&Vr.push(On)}return Vr},q=j,Q=function(Mt,mr){return mr===void 0&&(mr=[]),q(Mt,function(Vr){return!W(mr,Vr)})},ie=Q,te={}.toString,we=function(Mt,mr){return te.call(Mt)==="[object "+mr+"]"},fe=we,ce=function(Mt){return fe(Mt,"Function")},J=function(Mt){return Mt==null},M=J,E=function(Mt){return Array.isArray?Array.isArray(Mt):fe(Mt,"Array")},ge=function(Mt){var mr=typeof Mt;return Mt!==null&&mr==="object"||mr==="function"};function be(Mt,mr){if(Mt){var Vr;if(E(Mt))for(var Qr=0,On=Mt.length;Qr<On&&(Vr=mr(Mt[Qr],Qr),Vr!==!1);Qr++);else if(ge(Mt)){for(var gi in Mt)if(Mt.hasOwnProperty(gi)&&(Vr=mr(Mt[gi],gi),Vr===!1))break}}}var ze=be,Be=Object.keys?function(Mt){return Object.keys(Mt)}:function(Mt){var mr=[];return ze(Mt,function(Vr,Qr){ce(Mt)&&Qr==="prototype"||mr.push(Qr)}),mr},Ue=Be;function it(Mt,mr){var Vr=Ue(mr),Qr=Vr.length;if(M(Mt))return!Qr;for(var On=0;On<Qr;On+=1){var gi=Vr[On];if(mr[gi]!==Mt[gi]||!(gi in Mt))return!1}return!0}var ht=it,Le=function(Mt){return typeof Mt=="object"&&Mt!==null},Se=Le,ye=function(Mt){if(!Se(Mt)||!fe(Mt,"Object"))return!1;if(Object.getPrototypeOf(Mt)===null)return!0;for(var mr=Mt;Object.getPrototypeOf(mr)!==null;)mr=Object.getPrototypeOf(mr);return Object.getPrototypeOf(Mt)===mr},Ve=ye;function je(Mt,mr){if(!E(Mt))return null;var Vr;if(ce(mr)&&(Vr=mr),Ve(mr)&&(Vr=function(On){return ht(On,mr)}),Vr){for(var Qr=0;Qr<Mt.length;Qr+=1)if(Vr(Mt[Qr]))return Mt[Qr]}return null}var Et=je;function Oe(Mt,mr,Vr){Vr===void 0&&(Vr=0);for(var Qr=Vr;Qr<Mt.length;Qr++)if(mr(Mt[Qr],Qr))return Qr;return-1}var Qe=Oe,ne=function(Mt,mr){for(var Vr=null,Qr=0;Qr<Mt.length;Qr++){var On=Mt[Qr],gi=On[mr];if(!M(gi)){E(gi)?Vr=gi[0]:Vr=gi;break}}return Vr},We=ne,oe=function(Mt){if(!E(Mt))return[];for(var mr=[],Vr=0;Vr<Mt.length;Vr++)mr=mr.concat(Mt[Vr]);return mr},Fe=oe,st=function(Mt,mr){if(mr===void 0&&(mr=[]),!isArray(Mt))mr.push(Mt);else for(var Vr=0;Vr<Mt.length;Vr+=1)st(Mt[Vr],mr);return mr},Ce=null,De=function(Mt){if(E(Mt))return Mt.reduce(function(mr,Vr){return Math.max(mr,Vr)},Mt[0])},tt=function(Mt){if(E(Mt))return Mt.reduce(function(mr,Vr){return Math.min(mr,Vr)},Mt[0])},_e=function(Mt){var mr=Mt.filter(function(oa){return!isNaN(oa)});if(!mr.length)return{min:0,max:0};if(E(Mt[0])){for(var Vr=[],Qr=0;Qr<Mt.length;Qr++)Vr=Vr.concat(Mt[Qr]);mr=Vr}var On=De(mr),gi=tt(mr);return{min:gi,max:On}},me=_e,Ge=Array.prototype,Ze=Ge.splice,pt=Ge.indexOf,Ht=function(Mt){for(var mr=[],Vr=1;Vr<arguments.length;Vr++)mr[Vr-1]=arguments[Vr];for(var Qr=0;Qr<mr.length;Qr++)for(var On=mr[Qr],gi=-1;(gi=pt.call(Mt,On))>-1;)Ze.call(Mt,gi,1);return Mt},Je=null,$e=Array.prototype.splice,Te=function(mr,Vr){if(!K(mr))return[];for(var Qr=mr?Vr.length:0,On=Qr-1;Qr--;){var gi=void 0,oa=Vr[Qr];(Qr===On||oa!==gi)&&(gi=oa,$e.call(mr,oa,1))}return mr},Ye=Te,ft=function(Mt,mr,Vr){if(!E(Mt)&&!Ve(Mt))return Mt;var Qr=Vr;return ze(Mt,function(On,gi){Qr=mr(Qr,On,gi)}),Qr},ke=ft,Ne=function(Mt,mr){var Vr=[];if(!K(Mt))return Vr;for(var Qr=-1,On=[],gi=Mt.length;++Qr<gi;){var oa=Mt[Qr];mr(oa,Qr,Mt)&&(Vr.push(oa),On.push(Qr))}return Ye(Mt,On),Vr},dt=Ne,Pt=function(Mt){return fe(Mt,"String")};function rr(Mt,mr){var Vr;if(ce(mr))Vr=function(On,gi){return mr(On)-mr(gi)};else{var Qr=[];Pt(mr)?Qr.push(mr):E(mr)&&(Qr=mr),Vr=function(On,gi){for(var oa=0;oa<Qr.length;oa+=1){var po=Qr[oa];if(On[po]>gi[po])return 1;if(On[po]<gi[po])return-1}return 0}}return Mt.sort(Vr),Mt}var xr=rr;function ut(Mt,mr){mr===void 0&&(mr=new Map);var Vr=[];if(Array.isArray(Mt))for(var Qr=0,On=Mt.length;Qr<On;Qr++){var gi=Mt[Qr];mr.has(gi)||(Vr.push(gi),mr.set(gi,!0))}return Vr}var nn=function(Mt,mr){for(var Vr=[],Qr={},On=0;On<Mt.length;On++){var gi=Mt[On],oa=gi[mr];if(!M(oa)){E(oa)||(oa=[oa]);for(var po=0;po<oa.length;po++){var Ps=oa[po];Qr[Ps]||(Vr.push(Ps),Qr[Ps]=!0)}}}return Vr};function Gr(Mt){if(K(Mt))return Mt[0]}function Xr(Mt){if(K(Mt)){var mr=Mt;return mr[mr.length-1]}}function Nt(Mt,mr){return isArray(Mt)||isString(Mt)?Mt[0]===mr:!1}var Yt=null;function sr(Mt,mr){return isArray(Mt)||isString(Mt)?Mt[Mt.length-1]===mr:!1}var Dt=null,Qt=function(Mt,mr){for(var Vr=0;Vr<Mt.length;Vr++)if(!mr(Mt[Vr],Vr))return!1;return!0},Sr=Qt,Er=function(Mt,mr){for(var Vr=0;Vr<Mt.length;Vr++)if(mr(Mt[Vr],Vr))return!0;return!1},Fr=Er,zr=Object.prototype.hasOwnProperty;function le(Mt,mr){if(!mr||!E(Mt))return{};for(var Vr={},Qr=ce(mr)?mr:function(po){return po[mr]},On,gi=0;gi<Mt.length;gi++){var oa=Mt[gi];On=Qr(oa),zr.call(Vr,On)?Vr[On].push(oa):Vr[On]=[oa]}return Vr}var H=le;function re(Mt,mr){if(!mr)return{0:Mt};if(!ce(mr)){var Vr=E(mr)?mr:mr.replace(/\s+/g,"").split("*");mr=function(Qr){for(var On="_",gi=0,oa=Vr.length;gi<oa;gi++)On+=Qr[Vr[gi]]&&Qr[Vr[gi]].toString();return On}}return H(Mt,mr)}var Re=function(Mt,mr){if(!mr)return[Mt];var Vr=re(Mt,mr),Qr=[];for(var On in Vr)Qr.push(Vr[On]);return Qr},Ke={};function Tt(Mt){var mr=Ke[Mt];if(!mr){for(var Vr=Mt.toString(16),Qr=Vr.length;Qr<6;Qr++)Vr="0"+Vr;mr="#"+Vr,Ke[Mt]=mr}return mr}var or=null;function jt(Mt){var mr=0,Vr=0,Qr=0,On=0;return isArray(Mt)?Mt.length===1?mr=Vr=Qr=On=Mt[0]:Mt.length===2?(mr=Qr=Mt[0],Vr=On=Mt[1]):Mt.length===3?(mr=Mt[0],Vr=On=Mt[1],Qr=Mt[2]):(mr=Mt[0],Vr=Mt[1],Qr=Mt[2],On=Mt[3]):mr=Vr=Qr=On=Mt,{r1:mr,r2:Vr,r3:Qr,r4:On}}var wt=null,It=function(Mt,mr,Vr){return Mt<mr?mr:Mt>Vr?Vr:Mt},de=It,pe=function(Mt,mr){var Vr=mr.toString(),Qr=Vr.indexOf(".");if(Qr===-1)return Math.round(Mt);var On=Vr.substr(Qr+1).length;return On>20&&(On=20),parseFloat(Mt.toFixed(On))},Me=pe,et=function(Mt){return fe(Mt,"Number")},St=et,Gt=function(Mt){return isNumber(Mt)&&Mt%1!==0},gr=null,At=function(Mt){return isNumber(Mt)&&Mt%2===0},ot=null,Ot=Number.isInteger?Number.isInteger:function(Mt){return St(Mt)&&Mt%1===0},yr=null,kr=function(Mt){return isNumber(Mt)&&Mt<0},Ft=null,Mn=1e-5;function qn(Mt,mr,Vr){return Vr===void 0&&(Vr=Mn),Math.abs(Mt-mr)<Vr}var ri=function(Mt){return isNumber(Mt)&&Mt%2!==0},un=null,Yn=function(Mt){return isNumber(Mt)&&Mt>0},jn=null,Kn=function(Mt,mr){if(E(Mt)){for(var Vr,Qr=-1/0,On=0;On<Mt.length;On++){var gi=Mt[On],oa=ce(mr)?mr(gi):gi[mr];oa>Qr&&(Vr=gi,Qr=oa)}return Vr}},aa=function(Mt,mr){if(E(Mt)){for(var Vr,Qr=1/0,On=0;On<Mt.length;On++){var gi=Mt[On],oa=ce(mr)?mr(gi):gi[mr];oa<Qr&&(Vr=gi,Qr=oa)}return Vr}},vi=function(Mt,mr){return(Mt%mr+mr)%mr},da=vi,Oa=180/Math.PI,xa=function(Mt){return Oa*Mt},Va=null,Sa=Math.PI/180,gs=function(Mt){return Sa*Mt},io=gs,Oo=ze,ai=function(Mt,mr){return Mt.hasOwnProperty(mr)},_i=ai,ea=Object.values?function(Mt){return Object.values(Mt)}:function(Mt){var mr=[];return ze(Mt,function(Vr,Qr){ce(Mt)&&Qr==="prototype"||mr.push(Vr)}),mr},Ha=ea,ms=function(Mt,mr){return contains(values(Mt),mr)},lo=function(Mt){return M(Mt)?"":Mt.toString()},ko=function(Mt){return lo(Mt).toLowerCase()},cr=ko;function kt(Mt,mr){return!Mt||!mr?Mt:Mt.replace(/\\?\{([^{}]+)\}/g,function(Vr,Qr){return Vr.charAt(0)==="\\"?Vr.slice(1):mr[Qr]===void 0?"":mr[Qr]})}var qt=kt,Ar=function(Mt){var mr=lo(Mt);return mr.charAt(0).toUpperCase()+mr.substring(1)},tn=Ar,Pn={}.toString,Bn=function(Mt){return Pn.call(Mt).replace(/^\[object /,"").replace(/]$/,"")},Cn=Bn,Ai=function(Mt){return isType(Mt,"Arguments")},Yi=null,Wo=function(Mt){return fe(Mt,"Boolean")},os=Wo,wu=function(Mt){return fe(Mt,"Date")},Do=wu,Qa=function(Mt){return isType(Mt,"Error")},pu=null;function Jo(Mt){return isNumber(Mt)&&isFinite(Mt)}var Zt=function(Mt){return Mt===null},Jt=Zt,Ur=Object.prototype,Tn=function(Mt){var mr=Mt&&Mt.constructor,Vr=typeof mr=="function"&&mr.prototype||Ur;return Mt===Vr},si=Tn,Hi=function(Mt){return isType(Mt,"RegExp")},ao=null,Us=function(Mt){return Mt===void 0},wo=Us,Lo=function(Mt){return Mt instanceof Element||Mt instanceof HTMLDocument},Hu=Lo;function cf(Mt){var mr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Vr){return setTimeout(Vr,16)};return mr(Mt)}function rh(Mt){var mr=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;mr(Mt)}var nh=function(){for(var Mt=[],mr=0;mr<arguments.length;mr++)Mt[mr]=arguments[mr];for(var Vr=Mt[0],Qr=1;Qr<Mt.length;Qr++){var On=Mt[Qr];isFunction(On)&&(On=On.prototype),mix(Vr.prototype,On)}},du=null,ec=function(Mt){if(typeof Mt!="object"||Mt===null)return Mt;var mr;if(E(Mt)){mr=[];for(var Vr=0,Qr=Mt.length;Vr<Qr;Vr++)typeof Mt[Vr]=="object"&&Mt[Vr]!=null?mr[Vr]=ec(Mt[Vr]):mr[Vr]=Mt[Vr]}else{mr={};for(var On in Mt)typeof Mt[On]=="object"&&Mt[On]!=null?mr[On]=ec(Mt[On]):mr[On]=Mt[On]}return mr},ru=ec;function Sl(Mt,mr,Vr){var Qr;return function(){var On=this,gi=arguments,oa=function(){Qr=null,Vr||Mt.apply(On,gi)},po=Vr&&!Qr;clearTimeout(Qr),Qr=setTimeout(oa,mr),po&&Mt.apply(On,gi)}}var tc=Sl,ho=function(Mt,mr){if(!ce(Mt))throw new TypeError("Expected a function");var Vr=function(){for(var Qr=[],On=0;On<arguments.length;On++)Qr[On]=arguments[On];var gi=mr?mr.apply(this,Qr):Qr[0],oa=Vr.cache;if(oa.has(gi))return oa.get(gi);var po=Mt.apply(this,Qr);return oa.set(gi,po),po};return Vr.cache=new Map,Vr},Xl=5;function bs(Mt,mr,Vr,Qr){Vr=Vr||0,Qr=Qr||Xl;for(var On in mr)if(mr.hasOwnProperty(On)){var gi=mr[On];gi!==null&&Ve(gi)?(Ve(Mt[On])||(Mt[On]={}),Vr<Qr?bs(Mt[On],gi,Vr+1,Qr):Mt[On]=mr[On]):E(gi)?(Mt[On]=[],Mt[On]=Mt[On].concat(gi)):gi!==void 0&&(Mt[On]=gi)}}var Ss=function(Mt){for(var mr=[],Vr=1;Vr<arguments.length;Vr++)mr[Vr-1]=arguments[Vr];for(var Qr=0;Qr<mr.length;Qr+=1)bs(Mt,mr[Qr]);return Mt},xc=Ss,bc=function(Mt,mr,Vr,Qr){isFunction(mr)||(Vr=mr,mr=Mt,Mt=function(){});var On=Object.create?function(oa,po){return Object.create(oa,{constructor:{value:po}})}:function(oa,po){function Ps(){}Ps.prototype=oa;var ll=new Ps;return ll.constructor=po,ll},gi=On(mr.prototype,Mt);return Mt.prototype=mix(gi,Mt.prototype),Mt.superclass=On(mr.prototype,mr),mix(gi,Vr),mix(Mt,Qr),Mt},Rf=null,Ll=function(Mt,mr){if(!K(Mt))return-1;var Vr=Array.prototype.indexOf;if(Vr)return Vr.call(Mt,mr);for(var Qr=-1,On=0;On<Mt.length;On++)if(Mt[On]===mr){Qr=On;break}return Qr},Fl=Ll,Yl=Object.prototype.hasOwnProperty;function ku(Mt){if(M(Mt))return!0;if(K(Mt))return!Mt.length;var mr=Cn(Mt);if(mr==="Map"||mr==="Set")return!Mt.size;if(si(Mt))return!Object.keys(Mt).length;for(var Vr in Mt)if(Yl.call(Mt,Vr))return!1;return!0}var Sc=ku,Rn=function(Mt,mr){if(Mt===mr)return!0;if(!Mt||!mr||Pt(Mt)||Pt(mr))return!1;if(K(Mt)||K(mr)){if(Mt.length!==mr.length)return!1;for(var Vr=!0,Qr=0;Qr<Mt.length&&(Vr=Rn(Mt[Qr],mr[Qr]),!!Vr);Qr++);return Vr}if(Se(Mt)||Se(mr)){var On=Object.keys(Mt),gi=Object.keys(mr);if(On.length!==gi.length)return!1;for(var Vr=!0,Qr=0;Qr<On.length&&(Vr=Rn(Mt[On[Qr]],mr[On[Qr]]),!!Vr);Qr++);return Vr}return!1},ji=Rn,Pv=function(Mt,mr,Vr){return isFunction(Vr)?!!Vr(Mt,mr):isEqual(Mt,mr)},ih=function(Mt,mr){if(!K(Mt))return Mt;for(var Vr=[],Qr=0;Qr<Mt.length;Qr++){var On=Mt[Qr];Vr.push(mr(On,Qr))}return Vr},rc=ih,Jp=function(Mt){return Mt},Gs=function(Mt,mr){mr===void 0&&(mr=Jp);var Vr={};return ge(Mt)&&!M(Mt)&&Object.keys(Mt).forEach(function(Qr){Vr[Qr]=mr(Mt[Qr],Qr)}),Vr};function Ec(Mt,mr){for(var Vr in mr)mr.hasOwnProperty(Vr)&&Vr!=="constructor"&&mr[Vr]!==void 0&&(Mt[Vr]=mr[Vr])}function Bl(Mt,mr,Vr,Qr){return mr&&Ec(Mt,mr),Vr&&Ec(Mt,Vr),Qr&&Ec(Mt,Qr),Mt}var nu=function(Mt,mr,Vr){for(var Qr=0,On=Pt(mr)?mr.split("."):mr;Mt&&Qr<On.length;)Mt=Mt[On[Qr++]];return Mt===void 0||Qr<On.length?Vr:Mt},vu=function(Mt,mr,Vr){var Qr=Mt,On=Pt(mr)?mr.split("."):mr;return On.forEach(function(gi,oa){oa<On.length-1?(ge(Qr[gi])||(Qr[gi]=St(On[oa+1])?[]:{}),Qr=Qr[gi]):Qr[gi]=Vr}),Mt},El=Object.prototype.hasOwnProperty,nc=function(Mt,mr){if(Mt===null||!Ve(Mt))return{};var Vr={};return ze(mr,function(Qr){El.call(Mt,Qr)&&(Vr[Qr]=Mt[Qr])}),Vr},Nl=function(Mt,mr){return ke(Mt,function(Vr,Qr,On){return mr.includes(On)||(Vr[On]=Qr),Vr},{})},wc=function(Mt,mr,Vr){var Qr,On,gi,oa,po=0;Vr||(Vr={});var Ps=function(){po=Vr.leading===!1?0:Date.now(),Qr=null,oa=Mt.apply(On,gi),Qr||(On=gi=null)},ll=function(){var Ju=Date.now();!po&&Vr.leading===!1&&(po=Ju);var Fo=mr-(Ju-po);return On=this,gi=arguments,Fo<=0||Fo>mr?(Qr&&(clearTimeout(Qr),Qr=null),po=Ju,oa=Mt.apply(On,gi),Qr||(On=gi=null)):!Qr&&Vr.trailing!==!1&&(Qr=setTimeout(Ps,Fo)),oa};return ll.cancel=function(){clearTimeout(Qr),po=0,Qr=On=gi=null},ll},jc=function(Mt){return K(Mt)?Array.prototype.slice.call(Mt):[]},ah={},ed=function(Mt){return Mt=Mt||"g",ah[Mt]?ah[Mt]+=1:ah[Mt]=1,Mt+ah[Mt]},Uo=function(){};function Nd(Mt){return M(Mt)?0:K(Mt)?Mt.length:Object.keys(Mt).length}var Uh=k(97582),ff,ss=ho(function(Mt,mr){mr===void 0&&(mr={});var Vr=mr.fontSize,Qr=mr.fontFamily,On=mr.fontWeight,gi=mr.fontStyle,oa=mr.fontVariant;return ff||(ff=document.createElement("canvas").getContext("2d")),ff.font=[gi,oa,On,Vr+"px",Qr].join(" "),ff.measureText(Pt(Mt)?Mt:"").width},function(Mt,mr){return mr===void 0&&(mr={}),(0,Uh.pr)([Mt],Ha(mr)).join("")}),vp=function(Mt,mr,Vr,Qr){Qr===void 0&&(Qr="...");var On=16,gi=ss(Qr,Vr),oa=Pt(Mt)?Mt:lo(Mt),po=mr,Ps=[],ll,Ju;if(ss(Mt,Vr)<=mr)return Mt;for(;ll=oa.substr(0,On),Ju=ss(ll,Vr),!(Ju+gi>po&&Ju>po);)if(Ps.push(ll),po-=Ju,oa=oa.substr(On),!oa)return Ps.join("");for(;ll=oa.substr(0,1),Ju=ss(ll,Vr),!(Ju+gi>po);)if(Ps.push(ll),po-=Ju,oa=oa.substr(1),!oa)return Ps.join("");return""+Ps.join("")+Qr},gp=function(){function Mt(){this.map={}}return Mt.prototype.has=function(mr){return this.map[mr]!==void 0},Mt.prototype.get=function(mr,Vr){var Qr=this.map[mr];return Qr===void 0?Vr:Qr},Mt.prototype.set=function(mr,Vr){this.map[mr]=Vr},Mt.prototype.clear=function(){this.map={}},Mt.prototype.delete=function(mr){delete this.map[mr]},Mt.prototype.size=function(){return Object.keys(this.map).length},Mt}(),Du=gp},131:function(ct,N,k){"use strict";k.r(N),k.d(N,{TinyColor:function(){return $.C},bounds:function(){return it},convertDecimalToHex:function(){return q.Wl},convertHexToDecimal:function(){return q.T6},default:function(){return ht},fromRatio:function(){return te},hslToRgb:function(){return q.ve},hsvToRgb:function(){return q.WE},inputToRGB:function(){return fe.uA},isReadable:function(){return W},isValidCSSUnit:function(){return fe.ky},legacyRandom:function(){return we},mostReadable:function(){return j},names:function(){return K.R},numberInputToObject:function(){return q.Yt},parseIntFromHex:function(){return q.VD},random:function(){return ce},readability:function(){return w},rgbToHex:function(){return q.vq},rgbToHsl:function(){return q.lC},rgbToHsv:function(){return q.py},rgbToRgb:function(){return q.rW},rgbaToArgbHex:function(){return q.GC},rgbaToHex:function(){return q.s},stringInputToObject:function(){return fe.uz},tinycolor:function(){return $.H},toMsFilter:function(){return Q}});var $=k(10274),K=k(48701);function w(Le,Se){var ye=new $.C(Le),Ve=new $.C(Se);return(Math.max(ye.getLuminance(),Ve.getLuminance())+.05)/(Math.min(ye.getLuminance(),Ve.getLuminance())+.05)}function W(Le,Se,ye){var Ve,je;ye===void 0&&(ye={level:"AA",size:"small"});var Et=w(Le,Se);switch(((Ve=ye.level)!==null&&Ve!==void 0?Ve:"AA")+((je=ye.size)!==null&&je!==void 0?je:"small")){case"AAsmall":case"AAAlarge":return Et>=4.5;case"AAlarge":return Et>=3;case"AAAsmall":return Et>=7;default:return!1}}function j(Le,Se,ye){ye===void 0&&(ye={includeFallbackColors:!1,level:"AA",size:"small"});for(var Ve=null,je=0,Et=ye.includeFallbackColors,Oe=ye.level,Qe=ye.size,ne=0,We=Se;ne<We.length;ne++){var oe=We[ne],Fe=w(Le,oe);Fe>je&&(je=Fe,Ve=new $.C(oe))}return W(Le,Ve,{level:Oe,size:Qe})||!Et?Ve:(ye.includeFallbackColors=!1,j(Le,["#fff","#000"],ye))}var q=k(86500);function Q(Le,Se){var ye=new $.C(Le),Ve="#"+(0,q.GC)(ye.r,ye.g,ye.b,ye.a),je=Ve,Et=ye.gradientType?"GradientType = 1, ":"";if(Se){var Oe=new $.C(Se);je="#"+(0,q.GC)(Oe.r,Oe.g,Oe.b,Oe.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(Et,"startColorstr=").concat(Ve,",endColorstr=").concat(je,")")}var ie=k(90279);function te(Le,Se){var ye={r:(0,ie.JX)(Le.r),g:(0,ie.JX)(Le.g),b:(0,ie.JX)(Le.b)};return Le.a!==void 0&&(ye.a=Number(Le.a)),new $.C(ye,Se)}function we(){return new $.C({r:Math.random(),g:Math.random(),b:Math.random()})}var fe=k(1350);function ce(Le){if(Le===void 0&&(Le={}),Le.count!==void 0&&Le.count!==null){var Se=Le.count,ye=[];for(Le.count=void 0;Se>ye.length;)Le.count=null,Le.seed&&(Le.seed+=1),ye.push(ce(Le));return Le.count=Se,ye}var Ve=J(Le.hue,Le.seed),je=M(Ve,Le),Et=E(Ve,je,Le),Oe={h:Ve,s:je,v:Et};return Le.alpha!==void 0&&(Oe.a=Le.alpha),new $.C(Oe)}function J(Le,Se){var ye=be(Le),Ve=Be(ye,Se);return Ve<0&&(Ve=360+Ve),Ve}function M(Le,Se){if(Se.hue==="monochrome")return 0;if(Se.luminosity==="random")return Be([0,100],Se.seed);var ye=ze(Le).saturationRange,Ve=ye[0],je=ye[1];switch(Se.luminosity){case"bright":Ve=55;break;case"dark":Ve=je-10;break;case"light":je=55;break;default:break}return Be([Ve,je],Se.seed)}function E(Le,Se,ye){var Ve=ge(Le,Se),je=100;switch(ye.luminosity){case"dark":je=Ve+20;break;case"light":Ve=(je+Ve)/2;break;case"random":Ve=0,je=100;break;default:break}return Be([Ve,je],ye.seed)}function ge(Le,Se){for(var ye=ze(Le).lowerBounds,Ve=0;Ve<ye.length-1;Ve++){var je=ye[Ve][0],Et=ye[Ve][1],Oe=ye[Ve+1][0],Qe=ye[Ve+1][1];if(Se>=je&&Se<=Oe){var ne=(Qe-Et)/(Oe-je),We=Et-ne*je;return ne*Se+We}}return 0}function be(Le){var Se=parseInt(Le,10);if(!Number.isNaN(Se)&&Se<360&&Se>0)return[Se,Se];if(typeof Le=="string"){var ye=it.find(function(Oe){return Oe.name===Le});if(ye){var Ve=Ue(ye);if(Ve.hueRange)return Ve.hueRange}var je=new $.C(Le);if(je.isValid){var Et=je.toHsv().h;return[Et,Et]}}return[0,360]}function ze(Le){Le>=334&&Le<=360&&(Le-=360);for(var Se=0,ye=it;Se<ye.length;Se++){var Ve=ye[Se],je=Ue(Ve);if(je.hueRange&&Le>=je.hueRange[0]&&Le<=je.hueRange[1])return je}throw Error("Color not found")}function Be(Le,Se){if(Se===void 0)return Math.floor(Le[0]+Math.random()*(Le[1]+1-Le[0]));var ye=Le[1]||1,Ve=Le[0]||0;Se=(Se*9301+49297)%233280;var je=Se/233280;return Math.floor(Ve+je*(ye-Ve))}function Ue(Le){var Se=Le.lowerBounds[0][0],ye=Le.lowerBounds[Le.lowerBounds.length-1][0],Ve=Le.lowerBounds[Le.lowerBounds.length-1][1],je=Le.lowerBounds[0][1];return{name:Le.name,hueRange:Le.hueRange,lowerBounds:Le.lowerBounds,saturationRange:[Se,ye],brightnessRange:[Ve,je]}}var it=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],ht=$.H},38163:function(ct){ct.exports=N;function N(K,w){var W=K&&K.type,j;if(W==="FeatureCollection")for(j=0;j<K.features.length;j++)N(K.features[j],w);else if(W==="GeometryCollection")for(j=0;j<K.geometries.length;j++)N(K.geometries[j],w);else if(W==="Feature")N(K.geometry,w);else if(W==="Polygon")k(K.coordinates,w);else if(W==="MultiPolygon")for(j=0;j<K.coordinates.length;j++)k(K.coordinates[j],w);return K}function k(K,w){if(K.length!==0){$(K[0],w);for(var W=1;W<K.length;W++)$(K[W],!w)}}function $(K,w){for(var W=0,j=0,q=0,Q=K.length,ie=Q-1;q<Q;ie=q++){var te=(K[q][0]-K[ie][0])*(K[ie][1]+K[q][1]),we=W+te;j+=Math.abs(W)>=Math.abs(te)?W-we+te:te-we+W,W=we}W+j>=0!=!!w&&K.reverse()}},75550:function(ct){"use strict";ct.exports=N;function N(k,$){this.x=k,this.y=$}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,$){return this.clone()._rotateAround(k,$)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var $=k.x-this.x,K=k.y-this.y;return $*$+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,$){return Math.atan2(this.x*$-this.y*k,this.x*k+this.y*$)},_matMult:function(k){var $=k[0]*this.x+k[1]*this.y,K=k[2]*this.x+k[3]*this.y;return this.x=$,this.y=K,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var $=Math.cos(k),K=Math.sin(k),w=$*this.x-K*this.y,W=K*this.x+$*this.y;return this.x=w,this.y=W,this},_rotateAround:function(k,$){var K=Math.cos(k),w=Math.sin(k),W=$.x+K*(this.x-$.x)-w*(this.y-$.y),j=$.y+w*(this.x-$.x)+K*(this.y-$.y);return this.x=W,this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},N.convert=function(k){return k instanceof N?k:Array.isArray(k)?new N(k[0],k[1]):k}},49296:function(ct){"use strict";ct.exports=k,ct.exports.default=k;var N=1e20;function k(j,q,Q,ie,te,we){this.fontSize=j||24,this.buffer=q===void 0?3:q,this.cutoff=ie||.25,this.fontFamily=te||"sans-serif",this.fontWeight=we||"normal",this.radius=Q||8;var fe=this.size=this.fontSize+this.buffer*2,ce=fe+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ce*ce),this.gridInner=new Float64Array(ce*ce),this.f=new Float64Array(ce),this.z=new Float64Array(ce+1),this.v=new Uint16Array(ce),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function $(j,q,Q,ie,te,we,fe){we.fill(N,0,q*Q),fe.fill(0,0,q*Q);for(var ce=(q-ie)/2,J=0;J<te;J++)for(var M=0;M<ie;M++){var E=(J+ce)*q+M+ce,ge=j.data[4*(J*ie+M)+3]/255;if(ge===1)we[E]=0,fe[E]=N;else if(ge===0)we[E]=N,fe[E]=0;else{var be=Math.max(0,.5-ge),ze=Math.max(0,ge-.5);we[E]=be*be,fe[E]=ze*ze}}}function K(j,q,Q,ie,te,we,fe){for(var ce=0;ce<q*Q;ce++){var J=Math.sqrt(ie[ce])-Math.sqrt(te[ce]);j[ce]=Math.round(255-255*(J/we+fe))}}k.prototype._draw=function(j,q){var Q=this.ctx.measureText(j),ie=Q.width,te=2*this.buffer,we,fe,ce,J,M,E,ge,be;q&&this.useMetrics?(M=Math.floor(Q.actualBoundingBoxAscent),be=this.buffer+Math.ceil(Q.actualBoundingBoxAscent),E=this.buffer,ge=this.buffer,fe=Math.min(this.size,Math.ceil(Q.actualBoundingBoxRight-Q.actualBoundingBoxLeft)),J=Math.min(this.size-E,Math.ceil(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent)),we=fe+te,ce=J+te,this.ctx.textBaseline="alphabetic"):(we=fe=this.size,ce=J=this.size,M=19*this.fontSize/24,E=ge=0,be=this.middle,this.ctx.textBaseline="middle");var ze;fe&&J&&(this.ctx.clearRect(ge,E,fe,J),this.ctx.fillText(j,this.buffer,be),ze=this.ctx.getImageData(ge,E,fe,J));var Be=new Uint8ClampedArray(we*ce);return $(ze,we,ce,fe,J,this.gridOuter,this.gridInner),w(this.gridOuter,we,ce,this.f,this.v,this.z),w(this.gridInner,we,ce,this.f,this.v,this.z),K(Be,we,ce,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Be,metrics:{width:fe,height:J,sdfWidth:we,sdfHeight:ce,top:M,left:0,advance:ie}}},k.prototype.draw=function(j){return this._draw(j,!1).data},k.prototype.drawWithMetrics=function(j){return this._draw(j,!0)};function w(j,q,Q,ie,te,we){for(var fe=0;fe<q;fe++)W(j,fe,q,Q,ie,te,we);for(var ce=0;ce<Q;ce++)W(j,ce*q,1,q,ie,te,we)}function W(j,q,Q,ie,te,we,fe){var ce,J,M,E;for(we[0]=0,fe[0]=-N,fe[1]=N,ce=0;ce<ie;ce++)te[ce]=j[q+ce*Q];for(ce=1,J=0,M=0;ce<ie;ce++){do E=we[J],M=(te[ce]-te[E]+ce*ce-E*E)/(ce-E)/2;while(M<=fe[J]&&--J>-1);J++,we[J]=ce,fe[J]=M,fe[J+1]=N}for(ce=0,J=0;ce<ie;ce++){for(;fe[J+1]<ce;)J++;E=we[J],j[q+ce*Q]=te[E]+(ce-E)*(ce-E)}}},99874:function(ct){ct.exports=N;function N(k,$,K,w){this.cx=3*k,this.bx=3*(K-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*$,this.by=3*(w-$)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=w,this.p2x=K,this.p2y=w}N.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},N.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},N.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},N.prototype.solveCurveX=function(k,$){typeof $=="undefined"&&($=1e-6);var K,w,W,j,q;for(W=k,q=0;q<8;q++){if(j=this.sampleCurveX(W)-k,Math.abs(j)<$)return W;var Q=this.sampleCurveDerivativeX(W);if(Math.abs(Q)<1e-6)break;W=W-j/Q}if(K=0,w=1,W=k,W<K)return K;if(W>w)return w;for(;K<w;){if(j=this.sampleCurveX(W),Math.abs(j-k)<$)return W;k>j?K=W:w=W,W=(w-K)*.5+K}return W},N.prototype.solve=function(k,$){return this.sampleCurveY(this.solveCurveX(k,$))}},38929:function(ct,N,k){ct.exports.VectorTile=k(22779),k(66024),k(59701)},22779:function(ct,N,k){"use strict";var $=k(59701);ct.exports=K;function K(W,j){this.layers=W.readFields(w,{},j)}function w(W,j,q){if(W===3){var Q=new $(q,q.readVarint()+q.pos);Q.length&&(j[Q.name]=Q)}}},66024:function(ct,N,k){"use strict";var $=k(75550);ct.exports=K;function K(Q,ie,te,we,fe){this.properties={},this.extent=te,this.type=0,this._pbf=Q,this._geometry=-1,this._keys=we,this._values=fe,Q.readFields(w,this,ie)}function w(Q,ie,te){Q==1?ie.id=te.readVarint():Q==2?W(te,ie):Q==3?ie.type=te.readVarint():Q==4&&(ie._geometry=te.pos)}function W(Q,ie){for(var te=Q.readVarint()+Q.pos;Q.pos<te;){var we=ie._keys[Q.readVarint()],fe=ie._values[Q.readVarint()];ie.properties[we]=fe}}K.types=["Unknown","Point","LineString","Polygon"],K.prototype.loadGeometry=function(){var Q=this._pbf;Q.pos=this._geometry;for(var ie=Q.readVarint()+Q.pos,te=1,we=0,fe=0,ce=0,J=[],M;Q.pos<ie;){if(we<=0){var E=Q.readVarint();te=E&7,we=E>>3}if(we--,te===1||te===2)fe+=Q.readSVarint(),ce+=Q.readSVarint(),te===1&&(M&&J.push(M),M=[]),M.push(new $(fe,ce));else if(te===7)M&&M.push(M[0].clone());else throw new Error("unknown command "+te)}return M&&J.push(M),J},K.prototype.bbox=function(){var Q=this._pbf;Q.pos=this._geometry;for(var ie=Q.readVarint()+Q.pos,te=1,we=0,fe=0,ce=0,J=1/0,M=-1/0,E=1/0,ge=-1/0;Q.pos<ie;){if(we<=0){var be=Q.readVarint();te=be&7,we=be>>3}if(we--,te===1||te===2)fe+=Q.readSVarint(),ce+=Q.readSVarint(),fe<J&&(J=fe),fe>M&&(M=fe),ce<E&&(E=ce),ce>ge&&(ge=ce);else if(te!==7)throw new Error("unknown command "+te)}return[J,E,M,ge]},K.prototype.toGeoJSON=function(Q,ie,te){var we=this.extent*Math.pow(2,te),fe=this.extent*Q,ce=this.extent*ie,J=this.loadGeometry(),M=K.types[this.type],E,ge;function be(Ue){for(var it=0;it<Ue.length;it++){var ht=Ue[it],Le=180-(ht.y+ce)*360/we;Ue[it]=[(ht.x+fe)*360/we-180,360/Math.PI*Math.atan(Math.exp(Le*Math.PI/180))-90]}}switch(this.type){case 1:var ze=[];for(E=0;E<J.length;E++)ze[E]=J[E][0];J=ze,be(J);break;case 2:for(E=0;E<J.length;E++)be(J[E]);break;case 3:for(J=j(J),E=0;E<J.length;E++)for(ge=0;ge<J[E].length;ge++)be(J[E][ge]);break}J.length===1?J=J[0]:M="Multi"+M;var Be={type:"Feature",geometry:{type:M,coordinates:J},properties:this.properties};return"id"in this&&(Be.id=this.id),Be};function j(Q){var ie=Q.length;if(ie<=1)return[Q];for(var te=[],we,fe,ce=0;ce<ie;ce++){var J=q(Q[ce]);J!==0&&(fe===void 0&&(fe=J<0),fe===J<0?(we&&te.push(we),we=[Q[ce]]):we.push(Q[ce]))}return we&&te.push(we),te}function q(Q){for(var ie=0,te=0,we=Q.length,fe=we-1,ce,J;te<we;fe=te++)ce=Q[te],J=Q[fe],ie+=(J.x-ce.x)*(ce.y+J.y);return ie}},59701:function(ct,N,k){"use strict";var $=k(66024);ct.exports=K;function K(j,q){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=j,this._keys=[],this._values=[],this._features=[],j.readFields(w,this,q),this.length=this._features.length}function w(j,q,Q){j===15?q.version=Q.readVarint():j===1?q.name=Q.readString():j===5?q.extent=Q.readVarint():j===2?q._features.push(Q.pos):j===3?q._keys.push(Q.readString()):j===4&&q._values.push(W(Q))}function W(j){for(var q=null,Q=j.readVarint()+j.pos;j.pos<Q;){var ie=j.readVarint()>>3;q=ie===1?j.readString():ie===2?j.readFloat():ie===3?j.readDouble():ie===4?j.readVarint64():ie===5?j.readVarint():ie===6?j.readSVarint():ie===7?j.readBoolean():null}return q}K.prototype.feature=function(j){if(j<0||j>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[j];var q=this._pbf.readVarint()+this._pbf.pos;return new $(this._pbf,q,this.extent,this._keys,this._values)}},45471:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.PresetStatusColorTypes=void 0,N.isPresetColor=q,N.isPresetStatusColor=Q;var K=$(k(861)),w=k(36496);const W=w.PresetColors.map(ie=>`${ie}-inverse`),j=N.PresetStatusColorTypes=["success","processing","error","default","warning"];function q(ie){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,K.default)(W),(0,K.default)(w.PresetColors)).includes(ie):w.PresetColors.includes(ie)}function Q(ie){return j.includes(ie)}},56333:function(ct,N,k){"use strict";"use client";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.containerBaseZIndexOffset=N.consumerBaseZIndexOffset=N.CONTAINER_MAX_OFFSET=void 0,N.useZIndex=fe;var K=$(k(67294)),w=$(k(41401)),W=$(k(96877));const j=100,q=10,Q=N.CONTAINER_MAX_OFFSET=j*q,ie=N.containerBaseZIndexOffset={Modal:j,Drawer:j,Popover:j,Popconfirm:j,Tooltip:j,Tour:j},te=N.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function we(ce){return ce in ie}function fe(ce,J){const[,M]=(0,w.default)(),E=K.default.useContext(W.default),ge=we(ce);if(J!==void 0)return[J,J];let be=E!=null?E:0;return ge?(be+=(E?0:M.zIndexPopupBase)+ie[ce],be=Math.min(be,M.zIndexPopupBase+Q)):be+=te[ce],[E===void 0?J:be,be]}},53683:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTransitionName=N.default=void 0;const k=()=>({height:0,opacity:0}),$=ie=>{const{scrollHeight:te}=ie;return{height:te,opacity:1}},K=ie=>({height:ie?ie.offsetHeight:0}),w=(ie,te)=>(te==null?void 0:te.deadline)===!0||te.propertyName==="height",W=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:k,onEnterStart:k,onAppearActive:$,onEnterActive:$,onLeaveStart:K,onLeaveActive:k,onAppearEnd:w,onEnterEnd:w,onLeaveEnd:w,motionDeadline:500}},j=null,q=(ie,te,we)=>we!==void 0?we:`${ie}-${te}`;N.getTransitionName=q;var Q=N.default=W},74132:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=q,N.getOverflowOptions=K;var $=k(9064);function K(Q,ie,te,we){if(we===!1)return{adjustX:!1,adjustY:!1};const fe=we&&typeof we=="object"?we:{},ce={};switch(Q){case"top":case"bottom":ce.shiftX=ie.arrowOffsetHorizontal*2+te,ce.shiftY=!0,ce.adjustY=!0;break;case"left":case"right":ce.shiftY=ie.arrowOffsetVertical*2+te,ce.shiftX=!0,ce.adjustX=!0;break}const J=Object.assign(Object.assign({},ce),fe);return J.shiftX||(J.adjustX=!0),J.shiftY||(J.adjustY=!0),J}const w={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},W={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},j=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function q(Q){const{arrowWidth:ie,autoAdjustOverflow:te,arrowPointAtCenter:we,offset:fe,borderRadius:ce,visibleFirst:J}=Q,M=ie/2,E={};return Object.keys(w).forEach(ge=>{const be=we&&W[ge]||w[ge],ze=Object.assign(Object.assign({},be),{offset:[0,0],dynamicInset:!0});switch(E[ge]=ze,j.has(ge)&&(ze.autoArrow=!1),ge){case"top":case"topLeft":case"topRight":ze.offset[1]=-M-fe;break;case"bottom":case"bottomLeft":case"bottomRight":ze.offset[1]=M+fe;break;case"left":case"leftTop":case"leftBottom":ze.offset[0]=-M-fe;break;case"right":case"rightTop":case"rightBottom":ze.offset[0]=M+fe;break}const Be=(0,$.getArrowOffsetToken)({contentRadius:ce,limitVerticalRadius:!0});if(we)switch(ge){case"topLeft":case"bottomLeft":ze.offset[0]=-Be.arrowOffsetHorizontal-M;break;case"topRight":case"bottomRight":ze.offset[0]=Be.arrowOffsetHorizontal+M;break;case"leftTop":case"rightTop":ze.offset[1]=-Be.arrowOffsetHorizontal-M;break;case"leftBottom":case"rightBottom":ze.offset[1]=Be.arrowOffsetHorizontal+M;break}ze.overflow=K(ge,Be,ie,te),J&&(ze.htmlRegion="visibleFirst")}),E}},47419:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.cloneElement=q,N.isFragment=W,N.isValidElement=void 0,N.replaceElement=j;var K=$(k(67294));const{isValidElement:w}=K;N.isValidElement=w;function W(Q){return Q&&w(Q)&&Q.type===K.Fragment}function j(Q,ie,te){return w(Q)?K.cloneElement(Q,typeof te=="function"?te(Q.props||{}):te):ie}function q(Q,ie){return j(Q,Q,ie)}},71434:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.getMergedStatus=void 0,N.getStatusClassNames=W;var K=$(k(94184));const w=null;function W(q,Q,ie){return(0,K.default)({[`${q}-status-success`]:Q==="success",[`${q}-status-warning`]:Q==="warning",[`${q}-status-error`]:Q==="error",[`${q}-status-validating`]:Q==="validating",[`${q}-has-feedback`]:ie})}const j=(q,Q)=>Q||q;N.getMergedStatus=j},38882:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.canUseDocElement=void 0,Object.defineProperty(N,"isStyleSupport",{enumerable:!0,get:function(){return w.isStyleSupport}});var K=$(k(19158)),w=k(3481);const W=()=>(0,K.default)()&&window.document.documentElement;N.canUseDocElement=W},60938:function(ct,N,k){"use strict";"use client";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(27712)),W=$(k(67294)),j=function(te,we){var fe={};for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&we.indexOf(ce)<0&&(fe[ce]=te[ce]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,ce=Object.getOwnPropertySymbols(te);J<ce.length;J++)we.indexOf(ce[J])<0&&Object.prototype.propertyIsEnumerable.call(te,ce[J])&&(fe[ce[J]]=te[ce[J]]);return fe};const q={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},Q=W.forwardRef((te,we)=>{const fe=ze=>{const{keyCode:Be}=ze;Be===w.default.ENTER&&ze.preventDefault()},ce=ze=>{const{keyCode:Be}=ze,{onClick:Ue}=te;Be===w.default.ENTER&&Ue&&Ue()},{style:J,noStyle:M,disabled:E}=te,ge=j(te,["style","noStyle","disabled"]);let be={};return M||(be=Object.assign({},q)),E&&(be.pointerEvents="none"),be=Object.assign(Object.assign({},be),J),W.createElement("div",Object.assign({role:"button",tabIndex:0,ref:we},ge,{onKeyDown:fe,onKeyUp:ce,style:be}))});var ie=N.default=Q},13594:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.devUseWarning=N.default=N.WarningContext=void 0,N.noop=W,N.resetWarned=q;var K=$(k(67294)),w=$(k(45520));function W(){}let j=null;function q(){j=null,(0,w.resetWarned)()}let Q=W;const ie=N.WarningContext=K.createContext({}),te=N.devUseWarning=()=>{const fe=()=>{};return fe.deprecated=W,fe};var we=N.default=Q},96877:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(67294));const w=K.default.createContext(void 0);var W=N.default=w},1028:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(25633)),w=N.default=K.default},93319:function(ct,N,k){"use strict";"use client";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.DisabledContextProvider=void 0;var K=$(k(67294));const w=K.createContext(!1),W=q=>{let{children:Q,disabled:ie}=q;const te=K.useContext(w);return K.createElement(w.Provider,{value:ie!=null?ie:te},Q)};N.DisabledContextProvider=W;var j=N.default=w},16722:function(ct,N,k){"use strict";"use client";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=j;var K=k(82225),w=$(k(67294)),W=k(3184);function j(q){const{children:Q}=q,[,ie]=(0,W.useToken)(),{motion:te}=ie,we=w.useRef(!1);return we.current=we.current||te===!1,we.current?w.createElement(K.Provider,{motion:te},Q):Q}},11380:function(ct,N,k){"use strict";"use client";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(67294)),w=k(13594);const W=null;var j=N.default=()=>null},3236:function(ct,N,k){"use strict";"use client";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.SizeContextProvider=void 0;var K=$(k(67294));const w=K.createContext(void 0),W=q=>{let{children:Q,size:ie}=q;const te=K.useContext(w);return K.createElement(w.Provider,{value:ie||te},Q)};N.SizeContextProvider=W;var j=N.default=w},7177:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.defaultIconPrefixCls=N.ConfigContext=N.ConfigConsumer=void 0;var K=$(k(67294));const w=N.defaultIconPrefixCls="anticon",W=(Q,ie)=>ie||(Q?`ant-${Q}`:"ant"),j=N.ConfigContext=K.createContext({getPrefixCls:W,iconPrefixCls:w}),{Consumer:q}=j;N.ConfigConsumer=q},56301:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.getStyle=ie,N.registerTheme=te;var K=k(78589),w=k(131),W=$(k(19158)),j=k(93399),q=$(k(13594));const Q=`-ant-${Date.now()}-${Math.random()}`;function ie(we,fe){const ce={},J=(ge,be)=>{let ze=ge.clone();return ze=(be==null?void 0:be(ze))||ze,ze.toRgbString()},M=(ge,be)=>{const ze=new w.TinyColor(ge),Be=(0,K.generate)(ze.toRgbString());ce[`${be}-color`]=J(ze),ce[`${be}-color-disabled`]=Be[1],ce[`${be}-color-hover`]=Be[4],ce[`${be}-color-active`]=Be[6],ce[`${be}-color-outline`]=ze.clone().setAlpha(.2).toRgbString(),ce[`${be}-color-deprecated-bg`]=Be[0],ce[`${be}-color-deprecated-border`]=Be[2]};if(fe.primaryColor){M(fe.primaryColor,"primary");const ge=new w.TinyColor(fe.primaryColor),be=(0,K.generate)(ge.toRgbString());be.forEach((Be,Ue)=>{ce[`primary-${Ue+1}`]=Be}),ce["primary-color-deprecated-l-35"]=J(ge,Be=>Be.lighten(35)),ce["primary-color-deprecated-l-20"]=J(ge,Be=>Be.lighten(20)),ce["primary-color-deprecated-t-20"]=J(ge,Be=>Be.tint(20)),ce["primary-color-deprecated-t-50"]=J(ge,Be=>Be.tint(50)),ce["primary-color-deprecated-f-12"]=J(ge,Be=>Be.setAlpha(Be.getAlpha()*.12));const ze=new w.TinyColor(be[0]);ce["primary-color-active-deprecated-f-30"]=J(ze,Be=>Be.setAlpha(Be.getAlpha()*.3)),ce["primary-color-active-deprecated-d-02"]=J(ze,Be=>Be.darken(2))}return fe.successColor&&M(fe.successColor,"success"),fe.warningColor&&M(fe.warningColor,"warning"),fe.errorColor&&M(fe.errorColor,"error"),fe.infoColor&&M(fe.infoColor,"info"),`
  :root {
    ${Object.keys(ce).map(ge=>`--${we}-${ge}: ${ce[ge]};`).join(`
`)}
  }
  `.trim()}function te(we,fe){const ce=ie(we,fe);(0,W.default)()&&(0,j.updateCSS)(ce,`${Q}-dynamic-theme`)}},14893:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=k(3184);const K=W=>{const[,,,,j]=(0,$.useToken)();return j?`${W}-css-var`:""};var w=N.default=K},5819:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=k(67294),w=$(k(93319)),W=$(k(3236));function j(){const Q=(0,K.useContext)(w.default),ie=(0,K.useContext)(W.default);return{componentDisabled:Q,componentSize:ie}}var q=N.default=j},65693:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(67294)),w=$(k(3236));const W=q=>{const Q=K.default.useContext(w.default);return K.default.useMemo(()=>q?typeof q=="string"?q!=null?q:Q:q instanceof Function?q(Q):Q:Q,[q,Q])};var j=N.default=W},25494:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Q;var K=$(k(67265)),w=$(k(11102)),W=k(3184),j=$(k(78459)),q=k(13594);function Q(ie,te){var we;const fe=(0,q.devUseWarning)("ConfigProvider"),ce=ie||{},J=ce.inherit===!1||!te?W.defaultConfig:te,M=(0,j.default)();return(0,K.default)(()=>{var E,ge;if(!ie)return te;const be=Object.assign({},J.components);Object.keys(ie.components||{}).forEach(Ue=>{be[Ue]=Object.assign(Object.assign({},be[Ue]),ie.components[Ue])});const ze=`css-var-${M.replace(/:/g,"")}`,Be=((E=ce.cssVar)!==null&&E!==void 0?E:J.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:"ant"},typeof J.cssVar=="object"?J.cssVar:{}),typeof ce.cssVar=="object"?ce.cssVar:{}),{key:typeof ce.cssVar=="object"&&((ge=ce.cssVar)===null||ge===void 0?void 0:ge.key)||ze});return Object.assign(Object.assign(Object.assign({},J),ce),{token:Object.assign(Object.assign({},J.token),ce.token),components:be,cssVar:Be})},[ce,J],(E,ge)=>E.some((be,ze)=>{const Be=ge[ze];return!(0,w.default)(be,Be,!0)}))}},78459:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(67294));const w=Object.assign({},K),{useId:W}=w,q=typeof W=="undefined"?()=>"":W;var Q=N.default=q},31929:function(ct,N,k){"use strict";"use client";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"ConfigConsumer",{enumerable:!0,get:function(){return E.ConfigConsumer}}),Object.defineProperty(N,"ConfigContext",{enumerable:!0,get:function(){return E.ConfigContext}}),N.default=N.configConsumerProps=void 0,Object.defineProperty(N,"defaultIconPrefixCls",{enumerable:!0,get:function(){return E.defaultIconPrefixCls}}),N.warnContext=N.globalConfig=N.defaultPrefixCls=void 0;var w=K(k(67294)),W=k(36939),j=$(k(13357)),q=$(k(67265)),Q=k(20059),ie=K(k(13594)),te=$(k(2197)),we=K(k(24522)),fe=$(k(44805)),ce=$(k(18253)),J=k(89329),M=$(k(98411)),E=k(7177),ge=k(56301),be=k(93319),ze=$(k(5819)),Be=$(k(25494)),Ue=$(k(16722)),it=$(k(11380)),ht=K(k(3236)),Le=$(k(82932)),Se=function(Ge,Ze){var pt={};for(var Ht in Ge)Object.prototype.hasOwnProperty.call(Ge,Ht)&&Ze.indexOf(Ht)<0&&(pt[Ht]=Ge[Ht]);if(Ge!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Je=0,Ht=Object.getOwnPropertySymbols(Ge);Je<Ht.length;Je++)Ze.indexOf(Ht[Je])<0&&Object.prototype.propertyIsEnumerable.call(Ge,Ht[Je])&&(pt[Ht[Je]]=Ge[Ht[Je]]);return pt};let ye=!1;const Ve=N.warnContext=null,je=N.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale","pageHeader"],Et=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],Oe=N.defaultPrefixCls="ant";let Qe,ne,We;function oe(){return Qe||Oe}function Fe(){return ne||E.defaultIconPrefixCls}function st(Ge){return Object.keys(Ge).some(Ze=>Ze.endsWith("Color"))}const Ce=Ge=>{let{prefixCls:Ze,iconPrefixCls:pt,theme:Ht}=Ge;Ze!==void 0&&(Qe=Ze),pt!==void 0&&(ne=pt),Ht&&(st(Ht)?(0,ge.registerTheme)(oe(),Ht):We=Ht)},De=()=>({getPrefixCls:(Ge,Ze)=>Ze||(Ge?`${oe()}-${Ge}`:oe()),getIconPrefixCls:Fe,getRootPrefixCls:()=>Qe||oe(),getTheme:()=>We});N.globalConfig=De;const tt=Ge=>{const{children:Ze,csp:pt,autoInsertSpaceInButton:Ht,alert:Je,anchor:$e,form:Te,locale:Ye,componentSize:ft,direction:ke,space:Ne,virtual:dt,dropdownMatchSelectWidth:Pt,popupMatchSelectWidth:rr,popupOverflow:xr,legacyLocale:ut,parentContext:nn,iconPrefixCls:Gr,theme:Xr,componentDisabled:Nt,segmented:Yt,statistic:sr,spin:Dt,calendar:Qt,carousel:Sr,cascader:Er,collapse:Fr,typography:zr,checkbox:le,descriptions:H,divider:re,drawer:Re,skeleton:Ke,steps:Tt,image:or,layout:jt,list:wt,mentions:It,modal:de,progress:pe,result:Me,slider:et,breadcrumb:St,menu:Gt,pagination:gr,input:At,empty:ot,badge:Ot,radio:yr,rate:kr,switch:Ft,transfer:Mn,avatar:qn,message:ri,tag:un,table:Yn,card:jn,tabs:Kn,timeline:aa,timePicker:vi,upload:da,notification:Oa,tree:xa,colorPicker:Va,datePicker:Sa,rangePicker:gs,flex:io,wave:Oo,dropdown:ai,warning:_i}=Ge,ea=w.useCallback((Bn,Cn)=>{const{prefixCls:Ai}=Ge;if(Cn)return Cn;const Yi=Ai||nn.getPrefixCls("");return Bn?`${Yi}-${Bn}`:Yi},[nn.getPrefixCls,Ge.prefixCls]),Ha=Gr||nn.iconPrefixCls||E.defaultIconPrefixCls,ms=pt||nn.csp;(0,Le.default)(Ha,ms);const lo=(0,Be.default)(Xr,nn.theme),ko={csp:ms,autoInsertSpaceInButton:Ht,alert:Je,anchor:$e,locale:Ye||ut,direction:ke,space:Ne,virtual:dt,popupMatchSelectWidth:rr!=null?rr:Pt,popupOverflow:xr,getPrefixCls:ea,iconPrefixCls:Ha,theme:lo,segmented:Yt,statistic:sr,spin:Dt,calendar:Qt,carousel:Sr,cascader:Er,collapse:Fr,typography:zr,checkbox:le,descriptions:H,divider:re,drawer:Re,skeleton:Ke,steps:Tt,image:or,input:At,layout:jt,list:wt,mentions:It,modal:de,progress:pe,result:Me,slider:et,breadcrumb:St,menu:Gt,pagination:gr,empty:ot,badge:Ot,radio:yr,rate:kr,switch:Ft,transfer:Mn,avatar:qn,message:ri,tag:un,table:Yn,card:jn,tabs:Kn,timeline:aa,timePicker:vi,upload:da,notification:Oa,tree:xa,colorPicker:Va,datePicker:Sa,rangePicker:gs,flex:io,wave:Oo,dropdown:ai,warning:_i},cr=Object.assign({},nn);Object.keys(ko).forEach(Bn=>{ko[Bn]!==void 0&&(cr[Bn]=ko[Bn])}),Et.forEach(Bn=>{const Cn=Ge[Bn];Cn&&(cr[Bn]=Cn)});const kt=(0,q.default)(()=>cr,cr,(Bn,Cn)=>{const Ai=Object.keys(Bn),Yi=Object.keys(Cn);return Ai.length!==Yi.length||Ai.some(Wo=>Bn[Wo]!==Cn[Wo])}),qt=w.useMemo(()=>({prefixCls:Ha,csp:ms}),[Ha,ms]);let Ar=w.createElement(w.Fragment,null,w.createElement(it.default,{dropdownMatchSelectWidth:Pt}),Ze);const tn=w.useMemo(()=>{var Bn,Cn,Ai,Yi;return(0,Q.merge)(((Bn=ce.default.Form)===null||Bn===void 0?void 0:Bn.defaultValidateMessages)||{},((Ai=(Cn=kt.locale)===null||Cn===void 0?void 0:Cn.Form)===null||Ai===void 0?void 0:Ai.defaultValidateMessages)||{},((Yi=kt.form)===null||Yi===void 0?void 0:Yi.validateMessages)||{},(Te==null?void 0:Te.validateMessages)||{})},[kt,Te==null?void 0:Te.validateMessages]);Object.keys(tn).length>0&&(Ar=w.createElement(te.default.Provider,{value:tn},Ar)),Ye&&(Ar=w.createElement(we.default,{locale:Ye,_ANT_MARK__:we.ANT_MARK},Ar)),(Ha||ms)&&(Ar=w.createElement(j.default.Provider,{value:qt},Ar)),ft&&(Ar=w.createElement(ht.SizeContextProvider,{size:ft},Ar)),Ar=w.createElement(Ue.default,null,Ar);const Pn=w.useMemo(()=>{const Bn=lo||{},{algorithm:Cn,token:Ai,components:Yi,cssVar:Wo}=Bn,os=Se(Bn,["algorithm","token","components","cssVar"]),wu=Cn&&(!Array.isArray(Cn)||Cn.length>0)?(0,W.createTheme)(Cn):J.defaultTheme,Do={};Object.entries(Yi||{}).forEach(pu=>{let[Jo,Zt]=pu;const Jt=Object.assign({},Zt);"algorithm"in Jt&&(Jt.algorithm===!0?Jt.theme=wu:(Array.isArray(Jt.algorithm)||typeof Jt.algorithm=="function")&&(Jt.theme=(0,W.createTheme)(Jt.algorithm)),delete Jt.algorithm),Do[Jo]=Jt});const Qa=Object.assign(Object.assign({},M.default),Ai);return Object.assign(Object.assign({},os),{theme:wu,token:Qa,components:Do,override:Object.assign({override:Qa},Do),cssVar:Wo})},[lo]);return Xr&&(Ar=w.createElement(J.DesignTokenContext.Provider,{value:Pn},Ar)),kt.warning&&(Ar=w.createElement(ie.WarningContext.Provider,{value:kt.warning},Ar)),Nt!==void 0&&(Ar=w.createElement(be.DisabledContextProvider,{disabled:Nt},Ar)),w.createElement(E.ConfigContext.Provider,{value:kt},Ar)},_e=Ge=>{const Ze=w.useContext(E.ConfigContext),pt=w.useContext(fe.default);return w.createElement(tt,Object.assign({parentContext:Ze,legacyLocale:pt},Ge))};_e.ConfigContext=E.ConfigContext,_e.SizeContext=ht.default,_e.config=Ce,_e.useConfig=ze.default,Object.defineProperty(_e,"SizeContext",{get:()=>ht.default});var me=N.default=_e},82932:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return $.useResetIconStyle}});var $=k(3184)},25633:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(27590)),w=$(k(52040));const W={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},K.default),timePickerLocale:Object.assign({},w.default)};var j=N.default=W},51130:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.NoStyleItemContext=N.NoFormStyle=N.FormProvider=N.FormItemPrefixContext=N.FormItemInputContext=N.FormContext=void 0;var w=K(k(67294)),W=w,j=k(43589),q=$(k(18475));const Q=N.FormContext=W.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),ie=N.NoStyleItemContext=W.createContext(null),te=J=>{const M=(0,q.default)(J,["prefixCls"]);return W.createElement(j.FormProvider,Object.assign({},M))};N.FormProvider=te;const we=N.FormItemPrefixContext=W.createContext({prefixCls:""}),fe=N.FormItemInputContext=W.createContext({}),ce=J=>{let{children:M,status:E,override:ge}=J;const be=(0,w.useContext)(fe),ze=(0,w.useMemo)(()=>{const Be=Object.assign({},be);return ge&&delete Be.isFormItemInput,E&&(delete Be.status,delete Be.hasFeedback,delete Be.feedbackIcon),Be},[E,ge,be]);return W.createElement(fe.Provider,{value:ze},M)};N.NoFormStyle=ce},2197:function(ct,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=k(67294),K=N.default=(0,$.createContext)(void 0)},10815:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.triggerFocus=Ue;var w=K(k(67294)),W=$(k(43273)),j=$(k(94184)),q=$(k(67656)),Q=k(75531),ie=k(71434),te=k(13594),we=k(31929),fe=$(k(93319)),ce=$(k(65693)),J=k(51130),M=k(46549),E=$(k(81722)),ge=$(k(89858)),be=k(36714),ze=$(k(14893)),Be=function(Le,Se){var ye={};for(var Ve in Le)Object.prototype.hasOwnProperty.call(Le,Ve)&&Se.indexOf(Ve)<0&&(ye[Ve]=Le[Ve]);if(Le!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,Ve=Object.getOwnPropertySymbols(Le);je<Ve.length;je++)Se.indexOf(Ve[je])<0&&Object.prototype.propertyIsEnumerable.call(Le,Ve[je])&&(ye[Ve[je]]=Le[Ve[je]]);return ye};function Ue(Le,Se){if(!Le)return;Le.focus(Se);const{cursor:ye}=Se||{};if(ye){const Ve=Le.value.length;switch(ye){case"start":Le.setSelectionRange(0,0);break;case"end":Le.setSelectionRange(Ve,Ve);break;default:Le.setSelectionRange(0,Ve);break}}}const it=(0,w.forwardRef)((Le,Se)=>{var ye;const{prefixCls:Ve,bordered:je=!0,status:Et,size:Oe,disabled:Qe,onBlur:ne,onFocus:We,suffix:oe,allowClear:Fe,addonAfter:st,addonBefore:Ce,className:De,style:tt,styles:_e,rootClassName:me,onChange:Ge,classNames:Ze}=Le,pt=Be(Le,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:Ht,direction:Je,input:$e}=w.default.useContext(we.ConfigContext),Te=Ht("input",Ve),Ye=(0,w.useRef)(null),ft=(0,ze.default)(Te),[ke,Ne,dt]=(0,ge.default)(Te,ft),{compactSize:Pt,compactItemClassnames:rr}=(0,M.useCompactItemContext)(Te,Je),xr=(0,ce.default)(H=>{var re;return(re=Oe!=null?Oe:Pt)!==null&&re!==void 0?re:H}),ut=w.default.useContext(fe.default),nn=Qe!=null?Qe:ut,{status:Gr,hasFeedback:Xr,feedbackIcon:Nt}=(0,w.useContext)(J.FormItemInputContext),Yt=(0,ie.getMergedStatus)(Gr,Et),sr=(0,be.hasPrefixSuffix)(Le)||!!Xr,Dt=(0,w.useRef)(sr),Qt=(0,E.default)(Ye,!0),Sr=H=>{Qt(),ne==null||ne(H)},Er=H=>{Qt(),We==null||We(H)},Fr=H=>{Qt(),Ge==null||Ge(H)},zr=(Xr||oe)&&w.default.createElement(w.default.Fragment,null,oe,Xr&&Nt);let le;return typeof Fe=="object"&&(Fe!=null&&Fe.clearIcon)?le=Fe:Fe&&(le={clearIcon:w.default.createElement(W.default,null)}),ke(w.default.createElement(q.default,Object.assign({ref:(0,Q.composeRef)(Se,Ye),prefixCls:Te,autoComplete:$e==null?void 0:$e.autoComplete},pt,{disabled:nn,onBlur:Sr,onFocus:Er,style:Object.assign(Object.assign({},$e==null?void 0:$e.style),tt),styles:Object.assign(Object.assign({},$e==null?void 0:$e.styles),_e),suffix:zr,allowClear:le,className:(0,j.default)(De,me,dt,ft,Ne,rr,$e==null?void 0:$e.className),onChange:Fr,addonAfter:st&&w.default.createElement(M.NoCompactStyle,null,w.default.createElement(J.NoFormStyle,{override:!0,status:!0},st)),addonBefore:Ce&&w.default.createElement(M.NoCompactStyle,null,w.default.createElement(J.NoFormStyle,{override:!0,status:!0},Ce)),classNames:Object.assign(Object.assign(Object.assign({},Ze),$e==null?void 0:$e.classNames),{input:(0,j.default)({[`${Te}-sm`]:xr==="small",[`${Te}-lg`]:xr==="large",[`${Te}-rtl`]:Je==="rtl",[`${Te}-borderless`]:!je},!sr&&(0,ie.getStatusClassNames)(Te,Yt),Ze==null?void 0:Ze.input,(ye=$e==null?void 0:$e.classNames)===null||ye===void 0?void 0:ye.input,Ne)}),classes:{affixWrapper:(0,j.default)({[`${Te}-affix-wrapper-sm`]:xr==="small",[`${Te}-affix-wrapper-lg`]:xr==="large",[`${Te}-affix-wrapper-rtl`]:Je==="rtl",[`${Te}-affix-wrapper-borderless`]:!je},(0,ie.getStatusClassNames)(`${Te}-affix-wrapper`,Yt,Xr),Ne),wrapper:(0,j.default)({[`${Te}-group-rtl`]:Je==="rtl"},Ne),group:(0,j.default)({[`${Te}-group-wrapper-sm`]:xr==="small",[`${Te}-group-wrapper-lg`]:xr==="large",[`${Te}-group-wrapper-rtl`]:Je==="rtl",[`${Te}-group-wrapper-disabled`]:nn},(0,ie.getStatusClassNames)(`${Te}-group-wrapper`,Yt,Xr),Ne)}})))});var ht=N.default=it},14104:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(67294)),W=w,j=$(k(43273)),q=$(k(94184)),Q=$(k(43961)),ie=k(71434),te=k(31929),we=$(k(93319)),fe=$(k(65693)),ce=k(51130),J=k(10815),M=$(k(89858)),E=$(k(14893)),ge=function(Be,Ue){var it={};for(var ht in Be)Object.prototype.hasOwnProperty.call(Be,ht)&&Ue.indexOf(ht)<0&&(it[ht]=Be[ht]);if(Be!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Le=0,ht=Object.getOwnPropertySymbols(Be);Le<ht.length;Le++)Ue.indexOf(ht[Le])<0&&Object.prototype.propertyIsEnumerable.call(Be,ht[Le])&&(it[ht[Le]]=Be[ht[Le]]);return it};const be=(0,w.forwardRef)((Be,Ue)=>{var it;const{prefixCls:ht,bordered:Le=!0,size:Se,disabled:ye,status:Ve,allowClear:je,classNames:Et,rootClassName:Oe,className:Qe}=Be,ne=ge(Be,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:We,direction:oe}=W.useContext(te.ConfigContext),Fe=(0,fe.default)(Se),st=W.useContext(we.default),Ce=ye!=null?ye:st,{status:De,hasFeedback:tt,feedbackIcon:_e}=W.useContext(ce.FormItemInputContext),me=(0,ie.getMergedStatus)(De,Ve),Ge=W.useRef(null);W.useImperativeHandle(Ue,()=>{var Ye;return{resizableTextArea:(Ye=Ge.current)===null||Ye===void 0?void 0:Ye.resizableTextArea,focus:ft=>{var ke,Ne;(0,J.triggerFocus)((Ne=(ke=Ge.current)===null||ke===void 0?void 0:ke.resizableTextArea)===null||Ne===void 0?void 0:Ne.textArea,ft)},blur:()=>{var ft;return(ft=Ge.current)===null||ft===void 0?void 0:ft.blur()}}});const Ze=We("input",ht);let pt;typeof je=="object"&&(je!=null&&je.clearIcon)?pt=je:je&&(pt={clearIcon:W.createElement(j.default,null)});const Ht=(0,E.default)(Ze),[Je,$e,Te]=(0,M.default)(Ze,Ht);return Je(W.createElement(Q.default,Object.assign({},ne,{disabled:Ce,allowClear:pt,className:(0,q.default)(Te,Ht,Qe,Oe),classes:{affixWrapper:(0,q.default)(`${Ze}-textarea-affix-wrapper`,{[`${Ze}-affix-wrapper-rtl`]:oe==="rtl",[`${Ze}-affix-wrapper-borderless`]:!Le,[`${Ze}-affix-wrapper-sm`]:Fe==="small",[`${Ze}-affix-wrapper-lg`]:Fe==="large",[`${Ze}-textarea-show-count`]:Be.showCount||((it=Be.count)===null||it===void 0?void 0:it.show)},(0,ie.getStatusClassNames)(`${Ze}-affix-wrapper`,me),$e)},classNames:Object.assign(Object.assign({},Et),{textarea:(0,q.default)({[`${Ze}-borderless`]:!Le,[`${Ze}-sm`]:Fe==="small",[`${Ze}-lg`]:Fe==="large"},(0,ie.getStatusClassNames)(Ze,me),$e,Et==null?void 0:Et.textarea)}),prefixCls:Ze,suffix:tt&&W.createElement("span",{className:`${Ze}-textarea-suffix`},_e),ref:Ge})))});var ze=N.default=be},81722:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var $=k(67294);function K(w,W){const j=(0,$.useRef)([]),q=()=>{j.current.push(setTimeout(()=>{var Q,ie,te,we;!((Q=w.current)===null||Q===void 0)&&Q.input&&((ie=w.current)===null||ie===void 0?void 0:ie.input.getAttribute("type"))==="password"&&(!((te=w.current)===null||te===void 0)&&te.input.hasAttribute("value"))&&((we=w.current)===null||we===void 0||we.input.removeAttribute("value"))}))};return(0,$.useEffect)(()=>(W&&q(),()=>j.current.forEach(Q=>{Q&&clearTimeout(Q)})),[]),q}},89858:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initComponentToken=N.genStatusStyle=N.genPlaceholderStyle=N.genInputSmallStyle=N.genInputGroupStyle=N.genHoverStyle=N.genDisabledStyle=N.genBasicInputStyle=N.genActiveStyle=N.default=void 0,N.initInputToken=it;var $=k(36939),K=k(98078),w=k(78793),W=k(3184);const j=Se=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:Se,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});N.genPlaceholderStyle=j;const q=Se=>({borderColor:Se.hoverBorderColor,backgroundColor:Se.hoverBg});N.genHoverStyle=q;const Q=Se=>({borderColor:Se.activeBorderColor,boxShadow:Se.activeShadow,outline:0,backgroundColor:Se.activeBg});N.genActiveStyle=Q;const ie=Se=>({color:Se.colorTextDisabled,backgroundColor:Se.colorBgContainerDisabled,borderColor:Se.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover:not([disabled])":Object.assign({},q((0,W.mergeToken)(Se,{hoverBorderColor:Se.colorBorder,hoverBg:Se.colorBgContainerDisabled})))});N.genDisabledStyle=ie;const te=Se=>{const{paddingBlockLG:ye,fontSizeLG:Ve,lineHeightLG:je,borderRadiusLG:Et,paddingInlineLG:Oe}=Se;return{padding:`${(0,$.unit)(ye)} ${(0,$.unit)(Oe)}`,fontSize:Ve,lineHeight:je,borderRadius:Et}},we=Se=>({padding:`${(0,$.unit)(Se.paddingBlockSM)} ${(0,$.unit)(Se.paddingInlineSM)}`,borderRadius:Se.borderRadiusSM});N.genInputSmallStyle=we;const fe=(Se,ye)=>{const{componentCls:Ve,colorError:je,colorWarning:Et,errorActiveShadow:Oe,warningActiveShadow:Qe,colorErrorBorderHover:ne,colorWarningBorderHover:We}=Se;return{[`&-status-error:not(${ye}-disabled):not(${ye}-borderless)${ye}`]:{borderColor:je,"&:hover":{borderColor:ne},"&:focus, &:focus-within":Object.assign({},Q((0,W.mergeToken)(Se,{activeBorderColor:je,activeShadow:Oe}))),[`${Ve}-prefix, ${Ve}-suffix`]:{color:je}},[`&-status-warning:not(${ye}-disabled):not(${ye}-borderless)${ye}`]:{borderColor:Et,"&:hover":{borderColor:We},"&:focus, &:focus-within":Object.assign({},Q((0,W.mergeToken)(Se,{activeBorderColor:Et,activeShadow:Qe}))),[`${Ve}-prefix, ${Ve}-suffix`]:{color:Et}}}};N.genStatusStyle=fe;const ce=Se=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,$.unit)(Se.paddingBlock)} ${(0,$.unit)(Se.paddingInline)}`,color:Se.colorText,fontSize:Se.fontSize,lineHeight:Se.lineHeight,backgroundColor:Se.colorBgContainer,backgroundImage:"none",borderWidth:Se.lineWidth,borderStyle:Se.lineType,borderColor:Se.colorBorder,borderRadius:Se.borderRadius,transition:`all ${Se.motionDurationMid}`},j(Se.colorTextPlaceholder)),{"&:hover":Object.assign({},q(Se)),"&:focus, &:focus-within":Object.assign({},Q(Se)),"&-disabled, &[disabled]":Object.assign({},ie(Se)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:Se.controlHeight,lineHeight:Se.lineHeight,verticalAlign:"bottom",transition:`all ${Se.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},te(Se)),"&-sm":Object.assign({},we(Se)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});N.genBasicInputStyle=ce;const J=Se=>{const{componentCls:ye,antCls:Ve}=Se;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:Se.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${ye}, &-lg > ${ye}-group-addon`]:Object.assign({},te(Se)),[`&-sm ${ye}, &-sm > ${ye}-group-addon`]:Object.assign({},we(Se)),[`&-lg ${Ve}-select-single ${Ve}-select-selector`]:{height:Se.controlHeightLG},[`&-sm ${Ve}-select-single ${Ve}-select-selector`]:{height:Se.controlHeightSM},[`> ${ye}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${ye}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,$.unit)(Se.paddingInline)}`,color:Se.colorText,fontWeight:"normal",fontSize:Se.fontSize,textAlign:"center",backgroundColor:Se.addonBg,border:`${(0,$.unit)(Se.lineWidth)} ${Se.lineType} ${Se.colorBorder}`,borderRadius:Se.borderRadius,transition:`all ${Se.motionDurationSlow}`,lineHeight:1,[`${Ve}-select`]:{margin:`${(0,$.unit)(Se.calc(Se.paddingBlock).add(1).mul(-1).equal())} ${(0,$.unit)(Se.calc(Se.paddingInline).mul(-1).equal())}`,[`&${Ve}-select-single:not(${Ve}-select-customize-input):not(${Ve}-pagination-size-changer)`]:{[`${Ve}-select-selector`]:{backgroundColor:"inherit",border:`${(0,$.unit)(Se.lineWidth)} ${Se.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Ve}-select-selector`]:{color:Se.colorPrimary}}},[`${Ve}-cascader-picker`]:{margin:`-9px ${(0,$.unit)(Se.calc(Se.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Ve}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${ye}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${ye}-search-with-button &`]:{zIndex:0}}},[`> ${ye}:first-child, ${ye}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Ve}-select ${Ve}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${ye}-affix-wrapper`]:{[`&:not(:first-child) ${ye}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${ye}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${ye}:last-child, ${ye}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Ve}-select ${Ve}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${ye}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${ye}-search &`]:{borderStartStartRadius:Se.borderRadius,borderEndStartRadius:Se.borderRadius}},[`&:not(:first-child), ${ye}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${ye}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,K.clearFix)()),{[`${ye}-group-addon, ${ye}-group-wrap, > ${ye}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:Se.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${ye}-affix-wrapper,
        & > ${ye}-number-affix-wrapper,
        & > ${Ve}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:Se.calc(Se.lineWidth).mul(-1).equal(),borderInlineEndWidth:Se.lineWidth},[`${ye}`]:{float:"none"},[`& > ${Ve}-select > ${Ve}-select-selector,
      & > ${Ve}-select-auto-complete ${ye},
      & > ${Ve}-cascader-picker ${ye},
      & > ${ye}-group-wrapper ${ye}`]:{borderInlineEndWidth:Se.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Ve}-select-focused`]:{zIndex:1},[`& > ${Ve}-select > ${Ve}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Ve}-select:first-child > ${Ve}-select-selector,
      & > ${Ve}-select-auto-complete:first-child ${ye},
      & > ${Ve}-cascader-picker:first-child ${ye}`]:{borderStartStartRadius:Se.borderRadius,borderEndStartRadius:Se.borderRadius},[`& > *:last-child,
      & > ${Ve}-select:last-child > ${Ve}-select-selector,
      & > ${Ve}-cascader-picker:last-child ${ye},
      & > ${Ve}-cascader-picker-focused:last-child ${ye}`]:{borderInlineEndWidth:Se.lineWidth,borderStartEndRadius:Se.borderRadius,borderEndEndRadius:Se.borderRadius},[`& > ${Ve}-select-auto-complete ${ye}`]:{verticalAlign:"top"},[`${ye}-group-wrapper + ${ye}-group-wrapper`]:{marginInlineStart:Se.calc(Se.lineWidth).mul(-1).equal(),[`${ye}-affix-wrapper`]:{borderRadius:0}},[`${ye}-group-wrapper:not(:last-child)`]:{[`&${ye}-search > ${ye}-group`]:{[`& > ${ye}-group-addon > ${ye}-search-button`]:{borderRadius:0},[`& > ${ye}`]:{borderStartStartRadius:Se.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:Se.borderRadius}}}})}};N.genInputGroupStyle=J;const M=Se=>{const{componentCls:ye,controlHeightSM:Ve,lineWidth:je,calc:Et}=Se,Oe=16,Qe=Et(Ve).sub(Et(je).mul(2)).sub(Oe).div(2).equal();return{[ye]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,K.resetComponent)(Se)),ce(Se)),fe(Se,ye)),{'&[type="color"]':{height:Se.controlHeight,[`&${ye}-lg`]:{height:Se.controlHeightLG},[`&${ye}-sm`]:{height:Ve,paddingTop:Qe,paddingBottom:Qe}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},E=Se=>{const{componentCls:ye}=Se;return{[`${ye}-clear-icon`]:{margin:0,color:Se.colorTextQuaternary,fontSize:Se.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${Se.motionDurationSlow}`,"&:hover":{color:Se.colorTextTertiary},"&:active":{color:Se.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,$.unit)(Se.inputAffixPadding)}`}}}},ge=Se=>{const{componentCls:ye,inputAffixPadding:Ve,colorTextDescription:je,motionDurationSlow:Et,colorIcon:Oe,colorIconHover:Qe,iconCls:ne}=Se;return{[`${ye}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ce(Se)),{display:"inline-flex",[`&:not(${ye}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${ye}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${ye}[disabled]`]:{background:"transparent"}},[`> input${ye}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${ye}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:Se.paddingXS}},"&-show-count-suffix":{color:je},"&-show-count-has-suffix":{marginInlineEnd:Se.paddingXXS},"&-prefix":{marginInlineEnd:Ve},"&-suffix":{marginInlineStart:Ve}}}),E(Se)),{[`${ne}${ye}-password-icon`]:{color:Oe,cursor:"pointer",transition:`all ${Et}`,"&:hover":{color:Qe}}}),fe(Se,`${ye}-affix-wrapper`))}},be=Se=>{const{componentCls:ye,colorError:Ve,colorWarning:je,borderRadiusLG:Et,borderRadiusSM:Oe}=Se;return{[`${ye}-group`]:Object.assign(Object.assign(Object.assign({},(0,K.resetComponent)(Se)),J(Se)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${ye}-group-addon`]:{borderRadius:Et,fontSize:Se.fontSizeLG}},"&-sm":{[`${ye}-group-addon`]:{borderRadius:Oe}},"&-status-error":{[`${ye}-group-addon`]:{color:Ve,borderColor:Ve}},"&-status-warning":{[`${ye}-group-addon`]:{color:je,borderColor:je}},"&-disabled":{[`${ye}-group-addon`]:Object.assign({},ie(Se))},[`&:not(${ye}-compact-first-item):not(${ye}-compact-last-item)${ye}-compact-item`]:{[`${ye}, ${ye}-group-addon`]:{borderRadius:0}},[`&:not(${ye}-compact-last-item)${ye}-compact-first-item`]:{[`${ye}, ${ye}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${ye}-compact-first-item)${ye}-compact-last-item`]:{[`${ye}, ${ye}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},ze=Se=>{const{componentCls:ye,antCls:Ve}=Se,je=`${ye}-search`;return{[je]:{[`${ye}`]:{"&:hover, &:focus":{borderColor:Se.colorPrimaryHover,[`+ ${ye}-group-addon ${je}-button:not(${Ve}-btn-primary)`]:{borderInlineStartColor:Se.colorPrimaryHover}}},[`${ye}-affix-wrapper`]:{borderRadius:0},[`${ye}-lg`]:{lineHeight:Se.calc(Se.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${ye}-group`]:{[`> ${ye}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${je}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:Se.borderRadius,borderEndEndRadius:Se.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${je}-button:not(${Ve}-btn-primary)`]:{color:Se.colorTextDescription,"&:hover":{color:Se.colorPrimaryHover},"&:active":{color:Se.colorPrimaryActive},[`&${Ve}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${je}-button`]:{height:Se.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${je}-button`]:{height:Se.controlHeightLG},[`&-small ${je}-button`]:{height:Se.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${ye}-compact-item`]:{[`&:not(${ye}-compact-last-item)`]:{[`${ye}-group-addon`]:{[`${ye}-search-button`]:{marginInlineEnd:Se.calc(Se.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${ye}-compact-first-item)`]:{[`${ye},${ye}-affix-wrapper`]:{borderRadius:0}},[`> ${ye}-group-addon ${ye}-search-button,
        > ${ye},
        ${ye}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${ye}-affix-wrapper-focused`]:{zIndex:2}}}}},Be=Se=>{const{componentCls:ye,paddingLG:Ve}=Se,je=`${ye}-textarea`;return{[je]:{position:"relative","&-show-count":{[`> ${ye}`]:{height:"100%"},[`${ye}-data-count`]:{position:"absolute",bottom:Se.calc(Se.fontSize).mul(Se.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:Se.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${ye}`]:{paddingInlineEnd:Ve}},[`&-affix-wrapper${je}-has-feedback`]:{[`${ye}`]:{paddingInlineEnd:Ve}},[`&-affix-wrapper${ye}-affix-wrapper`]:{padding:0,[`> textarea${ye}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${ye}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${ye}-clear-icon`]:{position:"absolute",insetInlineEnd:Se.paddingXS,insetBlockStart:Se.paddingXS},[`${je}-suffix`]:{position:"absolute",top:0,insetInlineEnd:Se.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Ue=Se=>{const{componentCls:ye}=Se;return{[`${ye}-out-of-range`]:{[`&, & input, & textarea, ${ye}-show-count-suffix, ${ye}-data-count`]:{color:Se.colorError}}}};function it(Se){return(0,W.mergeToken)(Se,{inputAffixPadding:Se.paddingXXS})}const ht=Se=>{const{controlHeight:ye,fontSize:Ve,lineHeight:je,lineWidth:Et,controlHeightSM:Oe,controlHeightLG:Qe,fontSizeLG:ne,lineHeightLG:We,paddingSM:oe,controlPaddingHorizontalSM:Fe,controlPaddingHorizontal:st,colorFillAlter:Ce,colorPrimaryHover:De,colorPrimary:tt,controlOutlineWidth:_e,controlOutline:me,colorErrorOutline:Ge,colorWarningOutline:Ze}=Se;return{paddingBlock:Math.max(Math.round((ye-Ve*je)/2*10)/10-Et,0),paddingBlockSM:Math.max(Math.round((Oe-Ve*je)/2*10)/10-Et,0),paddingBlockLG:Math.ceil((Qe-ne*We)/2*10)/10-Et,paddingInline:oe-Et,paddingInlineSM:Fe-Et,paddingInlineLG:st-Et,addonBg:Ce,activeBorderColor:tt,hoverBorderColor:De,activeShadow:`0 0 0 ${_e}px ${me}`,errorActiveShadow:`0 0 0 ${_e}px ${Ge}`,warningActiveShadow:`0 0 0 ${_e}px ${Ze}`,hoverBg:"",activeBg:""}};N.initComponentToken=ht;var Le=N.default=(0,W.genStyleHooks)("Input",Se=>{const ye=(0,W.mergeToken)(Se,it(Se));return[M(ye),Be(ye),ge(ye),be(ye),ze(ye),Ue(ye),(0,w.genCompactItemStyle)(ye)]},ht)},36714:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.hasPrefixSuffix=k;function k($){return!!($.prefix||$.suffix||$.allowClear)}},44805:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=k(67294);const K=(0,$.createContext)(void 0);var w=N.default=K},18253:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(62273)),w=$(k(1028)),W=$(k(25633)),j=$(k(52040));const q="${label} is not a valid ${type}",Q={locale:"en",Pagination:K.default,DatePicker:W.default,TimePicker:j.default,Calendar:w.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:q,method:q,array:q,object:q,number:q,date:q,boolean:q,integer:q,float:q,regexp:q,email:q,url:q,hex:q},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};var ie=N.default=Q},24522:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.ANT_MARK=void 0,Object.defineProperty(N,"useLocale",{enumerable:!0,get:function(){return Q.default}});var w=K(k(67294)),W=k(13594),j=k(10625),q=$(k(44805)),Q=$(k(76647));const ie=N.ANT_MARK="internalMark",te=fe=>{const{locale:ce={},children:J,_ANT_MARK__:M}=fe;w.useEffect(()=>(0,j.changeConfirmLocale)(ce&&ce.Modal),[ce]);const E=w.useMemo(()=>Object.assign(Object.assign({},ce),{exist:!0}),[ce]);return w.createElement(q.default.Provider,{value:E},J)};var we=N.default=te},76647:function(ct,N,k){"use strict";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(67294)),W=$(k(44805)),j=$(k(18253));const q=(ie,te)=>{const we=w.useContext(W.default),fe=w.useMemo(()=>{var J;const M=te||j.default[ie],E=(J=we==null?void 0:we[ie])!==null&&J!==void 0?J:{};return Object.assign(Object.assign({},typeof M=="function"?M():M),E||{})},[ie,te,we]),ce=w.useMemo(()=>{const J=we==null?void 0:we.locale;return we!=null&&we.exist&&!J?j.default.locale:J},[we]);return[fe,ce]};var Q=N.default=q},10625:function(ct,N,k){"use strict";"use client";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.changeConfirmLocale=q,N.getConfirmLocale=Q;var K=$(k(18253));let w=Object.assign({},K.default.Modal),W=[];const j=()=>W.reduce((ie,te)=>Object.assign(Object.assign({},ie),te),K.default.Modal);function q(ie){if(ie){const te=Object.assign({},ie);return W.push(te),w=j(),()=>{W=W.filter(we=>we!==te),w=j()}}w=Object.assign({},K.default.Modal)}function Q(){return w}},46549:function(ct,N,k){"use strict";"use client";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useCompactItemContext=N.default=N.SpaceCompactItemContext=N.NoCompactStyle=void 0;var w=K(k(94184)),W=K(k(45598)),j=$(k(67294)),q=k(31929),Q=K(k(65693)),ie=K(k(54277)),te=function(ge,be){var ze={};for(var Be in ge)Object.prototype.hasOwnProperty.call(ge,Be)&&be.indexOf(Be)<0&&(ze[Be]=ge[Be]);if(ge!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ue=0,Be=Object.getOwnPropertySymbols(ge);Ue<Be.length;Ue++)be.indexOf(Be[Ue])<0&&Object.prototype.propertyIsEnumerable.call(ge,Be[Ue])&&(ze[Be[Ue]]=ge[Be[Ue]]);return ze};const we=N.SpaceCompactItemContext=j.createContext(null),fe=(ge,be)=>{const ze=j.useContext(we),Be=j.useMemo(()=>{if(!ze)return"";const{compactDirection:Ue,isFirstItem:it,isLastItem:ht}=ze,Le=Ue==="vertical"?"-vertical-":"-";return(0,w.default)(`${ge}-compact${Le}item`,{[`${ge}-compact${Le}first-item`]:it,[`${ge}-compact${Le}last-item`]:ht,[`${ge}-compact${Le}item-rtl`]:be==="rtl"})},[ge,be,ze]);return{compactSize:ze==null?void 0:ze.compactSize,compactDirection:ze==null?void 0:ze.compactDirection,compactItemClassnames:Be}};N.useCompactItemContext=fe;const ce=ge=>{let{children:be}=ge;return j.createElement(we.Provider,{value:null},be)};N.NoCompactStyle=ce;const J=ge=>{var{children:be}=ge,ze=te(ge,["children"]);return j.createElement(we.Provider,{value:ze},be)},M=ge=>{const{getPrefixCls:be,direction:ze}=j.useContext(q.ConfigContext),{size:Be,direction:Ue,block:it,prefixCls:ht,className:Le,rootClassName:Se,children:ye}=ge,Ve=te(ge,["size","direction","block","prefixCls","className","rootClassName","children"]),je=(0,Q.default)(st=>Be!=null?Be:st),Et=be("space-compact",ht),[Oe,Qe]=(0,ie.default)(Et),ne=(0,w.default)(Et,Qe,{[`${Et}-rtl`]:ze==="rtl",[`${Et}-block`]:it,[`${Et}-vertical`]:Ue==="vertical"},Le,Se),We=j.useContext(we),oe=(0,W.default)(ye),Fe=j.useMemo(()=>oe.map((st,Ce)=>{const De=st&&st.key||`${Et}-item-${Ce}`;return j.createElement(J,{key:De,compactSize:je,compactDirection:Ue,isFirstItem:Ce===0&&(!We||(We==null?void 0:We.isFirstItem)),isLastItem:Ce===oe.length-1&&(!We||(We==null?void 0:We.isLastItem))},st)}),[Be,oe,We]);return oe.length===0?null:Oe(j.createElement("div",Object.assign({className:ne},Ve),Fe))};var E=N.default=M},35969:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>{const{componentCls:w}=K;return{[w]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var $=N.default=k},54277:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var K=k(3184),w=$(k(35969));const W=ie=>{const{componentCls:te}=ie;return{[te]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${te}-item:empty`]:{display:"none"}}}},j=ie=>{const{componentCls:te}=ie;return{[te]:{"&-gap-row-small":{rowGap:ie.spaceGapSmallSize},"&-gap-row-middle":{rowGap:ie.spaceGapMiddleSize},"&-gap-row-large":{rowGap:ie.spaceGapLargeSize},"&-gap-col-small":{columnGap:ie.spaceGapSmallSize},"&-gap-col-middle":{columnGap:ie.spaceGapMiddleSize},"&-gap-col-large":{columnGap:ie.spaceGapLargeSize}}}},q=()=>({});N.prepareComponentToken=q;var Q=N.default=(0,K.genStyleHooks)("Space",ie=>{const te=(0,K.mergeToken)(ie,{spaceGapSmallSize:ie.paddingXS,spaceGapMiddleSize:ie.padding,spaceGapLargeSize:ie.paddingLG});return[W(te),j(te),(0,w.default)(te)]},()=>({}),{resetStyle:!1})},78793:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genCompactItemStyle=K;function k(w,W,j){const{focusElCls:q,focus:Q,borderElCls:ie}=j,te=ie?"> *":"",we=["hover",Q?"focus":null,"active"].filter(Boolean).map(fe=>`&:${fe} ${te}`).join(",");return{[`&-item:not(${W}-last-item)`]:{marginInlineEnd:w.calc(w.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[we]:{zIndex:2}},q?{[`&${q}`]:{zIndex:2}}:{}),{[`&[disabled] ${te}`]:{zIndex:0}})}}function $(w,W,j){const{borderElCls:q}=j,Q=q?`> ${q}`:"";return{[`&-item:not(${W}-first-item):not(${W}-last-item) ${Q}`]:{borderRadius:0},[`&-item:not(${W}-last-item)${W}-first-item`]:{[`& ${Q}, &${w}-sm ${Q}, &${w}-lg ${Q}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${W}-first-item)${W}-last-item`]:{[`& ${Q}, &${w}-sm ${Q}, &${w}-lg ${Q}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function K(w){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:j}=w,q=`${j}-compact`;return{[q]:Object.assign(Object.assign({},k(w,q,W)),$(j,q,W))}}},98078:function(ct,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.genLinkStyle=N.genFocusStyle=N.genFocusOutline=N.genCommonStyle=N.clearFix=void 0,Object.defineProperty(N,"operationUnit",{enumerable:!0,get:function(){return K.operationUnit}}),N.textEllipsis=N.resetIcon=N.resetComponent=void 0;var $=k(36939),K=k(22548);const w=N.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},W=function(fe){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:fe.colorText,fontSize:fe.fontSize,lineHeight:fe.lineHeight,listStyle:"none",fontFamily:ce?"inherit":fe.fontFamily}};N.resetComponent=W;const j=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});N.resetIcon=j;const q=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});N.clearFix=q;const Q=fe=>({a:{color:fe.colorLink,textDecoration:fe.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${fe.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:fe.colorLinkHover},"&:active":{color:fe.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:fe.linkHoverDecoration,outline:0},"&:focus":{textDecoration:fe.linkFocusDecoration,outline:0},"&[disabled]":{color:fe.colorTextDisabled,cursor:"not-allowed"}}});N.genLinkStyle=Q;const ie=(fe,ce)=>{const{fontFamily:J,fontSize:M}=fe,E=`[class^="${ce}"], [class*=" ${ce}"]`;return{[E]:{fontFamily:J,fontSize:M,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[E]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}};N.genCommonStyle=ie;const te=fe=>({outline:`${(0,$.unit)(fe.lineWidthFocus)} solid ${fe.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});N.genFocusOutline=te;const we=fe=>({"&:focus-visible":Object.assign({},te(fe))});N.genFocusStyle=we},57253:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>({[K.componentCls]:{[`${K.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${K.motionDurationMid} ${K.motionEaseInOut},
        opacity ${K.motionDurationMid} ${K.motionEaseInOut} !important`}},[`${K.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${K.motionDurationMid} ${K.motionEaseInOut},
        opacity ${K.motionDurationMid} ${K.motionEaseInOut} !important`}}});var $=N.default=k},84460:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initFadeMotion=N.fadeOut=N.fadeIn=void 0;var $=k(36939),K=k(94631);const w=N.fadeIn=new $.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),W=N.fadeOut=new $.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),j=function(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:ie}=q,te=`${ie}-fade`,we=Q?"&":"";return[(0,K.initMotion)(te,w,W,q.motionDurationMid,Q),{[`
        ${we}${te}-enter,
        ${we}${te}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${we}${te}-leave`]:{animationTimingFunction:"linear"}}]};N.initFadeMotion=j},42836:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"fadeIn",{enumerable:!0,get:function(){return K.fadeIn}}),Object.defineProperty(N,"fadeOut",{enumerable:!0,get:function(){return K.fadeOut}}),Object.defineProperty(N,"genCollapseMotion",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(N,"initFadeMotion",{enumerable:!0,get:function(){return K.initFadeMotion}}),Object.defineProperty(N,"initMoveMotion",{enumerable:!0,get:function(){return w.initMoveMotion}}),Object.defineProperty(N,"initSlideMotion",{enumerable:!0,get:function(){return W.initSlideMotion}}),Object.defineProperty(N,"initZoomMotion",{enumerable:!0,get:function(){return j.initZoomMotion}}),Object.defineProperty(N,"moveDownIn",{enumerable:!0,get:function(){return w.moveDownIn}}),Object.defineProperty(N,"moveDownOut",{enumerable:!0,get:function(){return w.moveDownOut}}),Object.defineProperty(N,"moveLeftIn",{enumerable:!0,get:function(){return w.moveLeftIn}}),Object.defineProperty(N,"moveLeftOut",{enumerable:!0,get:function(){return w.moveLeftOut}}),Object.defineProperty(N,"moveRightIn",{enumerable:!0,get:function(){return w.moveRightIn}}),Object.defineProperty(N,"moveRightOut",{enumerable:!0,get:function(){return w.moveRightOut}}),Object.defineProperty(N,"moveUpIn",{enumerable:!0,get:function(){return w.moveUpIn}}),Object.defineProperty(N,"moveUpOut",{enumerable:!0,get:function(){return w.moveUpOut}}),Object.defineProperty(N,"slideDownIn",{enumerable:!0,get:function(){return W.slideDownIn}}),Object.defineProperty(N,"slideDownOut",{enumerable:!0,get:function(){return W.slideDownOut}}),Object.defineProperty(N,"slideLeftIn",{enumerable:!0,get:function(){return W.slideLeftIn}}),Object.defineProperty(N,"slideLeftOut",{enumerable:!0,get:function(){return W.slideLeftOut}}),Object.defineProperty(N,"slideRightIn",{enumerable:!0,get:function(){return W.slideRightIn}}),Object.defineProperty(N,"slideRightOut",{enumerable:!0,get:function(){return W.slideRightOut}}),Object.defineProperty(N,"slideUpIn",{enumerable:!0,get:function(){return W.slideUpIn}}),Object.defineProperty(N,"slideUpOut",{enumerable:!0,get:function(){return W.slideUpOut}}),Object.defineProperty(N,"zoomBigIn",{enumerable:!0,get:function(){return j.zoomBigIn}}),Object.defineProperty(N,"zoomBigOut",{enumerable:!0,get:function(){return j.zoomBigOut}}),Object.defineProperty(N,"zoomDownIn",{enumerable:!0,get:function(){return j.zoomDownIn}}),Object.defineProperty(N,"zoomDownOut",{enumerable:!0,get:function(){return j.zoomDownOut}}),Object.defineProperty(N,"zoomIn",{enumerable:!0,get:function(){return j.zoomIn}}),Object.defineProperty(N,"zoomLeftIn",{enumerable:!0,get:function(){return j.zoomLeftIn}}),Object.defineProperty(N,"zoomLeftOut",{enumerable:!0,get:function(){return j.zoomLeftOut}}),Object.defineProperty(N,"zoomOut",{enumerable:!0,get:function(){return j.zoomOut}}),Object.defineProperty(N,"zoomRightIn",{enumerable:!0,get:function(){return j.zoomRightIn}}),Object.defineProperty(N,"zoomRightOut",{enumerable:!0,get:function(){return j.zoomRightOut}}),Object.defineProperty(N,"zoomUpIn",{enumerable:!0,get:function(){return j.zoomUpIn}}),Object.defineProperty(N,"zoomUpOut",{enumerable:!0,get:function(){return j.zoomUpOut}});var K=k(84460),w=k(17060),W=k(17581),j=k(99269),q=$(k(57253))},94631:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initMotion=void 0;const k=w=>({animationDuration:w,animationFillMode:"both"}),$=w=>({animationDuration:w,animationFillMode:"both"}),K=function(w,W,j,q){const ie=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${ie}${w}-enter,
      ${ie}${w}-appear
    `]:Object.assign(Object.assign({},k(q)),{animationPlayState:"paused"}),[`${ie}${w}-leave`]:Object.assign(Object.assign({},$(q)),{animationPlayState:"paused"}),[`
      ${ie}${w}-enter${w}-enter-active,
      ${ie}${w}-appear${w}-appear-active
    `]:{animationName:W,animationPlayState:"running"},[`${ie}${w}-leave${w}-leave-active`]:{animationName:j,animationPlayState:"running",pointerEvents:"none"}}};N.initMotion=K},17060:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.moveUpOut=N.moveUpIn=N.moveRightOut=N.moveRightIn=N.moveLeftOut=N.moveLeftIn=N.moveDownOut=N.moveDownIn=N.initMoveMotion=void 0;var $=k(36939),K=k(94631);const w=N.moveDownIn=new $.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),W=N.moveDownOut=new $.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),j=N.moveLeftIn=new $.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),q=N.moveLeftOut=new $.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Q=N.moveRightIn=new $.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ie=N.moveRightOut=new $.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),te=N.moveUpIn=new $.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),we=N.moveUpOut=new $.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),fe={"move-up":{inKeyframes:te,outKeyframes:we},"move-down":{inKeyframes:w,outKeyframes:W},"move-left":{inKeyframes:j,outKeyframes:q},"move-right":{inKeyframes:Q,outKeyframes:ie}},ce=(J,M)=>{const{antCls:E}=J,ge=`${E}-${M}`,{inKeyframes:be,outKeyframes:ze}=fe[M];return[(0,K.initMotion)(ge,be,ze,J.motionDurationMid),{[`
        ${ge}-enter,
        ${ge}-appear
      `]:{opacity:0,animationTimingFunction:J.motionEaseOutCirc},[`${ge}-leave`]:{animationTimingFunction:J.motionEaseInOutCirc}}]};N.initMoveMotion=ce},17581:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.slideUpOut=N.slideUpIn=N.slideRightOut=N.slideRightIn=N.slideLeftOut=N.slideLeftIn=N.slideDownOut=N.slideDownIn=N.initSlideMotion=void 0;var $=k(36939),K=k(94631);const w=N.slideUpIn=new $.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),W=N.slideUpOut=new $.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),j=N.slideDownIn=new $.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),q=N.slideDownOut=new $.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Q=N.slideLeftIn=new $.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),ie=N.slideLeftOut=new $.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),te=N.slideRightIn=new $.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),we=N.slideRightOut=new $.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),fe={"slide-up":{inKeyframes:w,outKeyframes:W},"slide-down":{inKeyframes:j,outKeyframes:q},"slide-left":{inKeyframes:Q,outKeyframes:ie},"slide-right":{inKeyframes:te,outKeyframes:we}},ce=(J,M)=>{const{antCls:E}=J,ge=`${E}-${M}`,{inKeyframes:be,outKeyframes:ze}=fe[M];return[(0,K.initMotion)(ge,be,ze,J.motionDurationMid),{[`
      ${ge}-enter,
      ${ge}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:J.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${ge}-leave`]:{animationTimingFunction:J.motionEaseInQuint}}]};N.initSlideMotion=ce},99269:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.zoomUpOut=N.zoomUpIn=N.zoomRightOut=N.zoomRightIn=N.zoomOut=N.zoomLeftOut=N.zoomLeftIn=N.zoomIn=N.zoomDownOut=N.zoomDownIn=N.zoomBigOut=N.zoomBigIn=N.initZoomMotion=void 0;var $=k(36939),K=k(94631);const w=N.zoomIn=new $.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),W=N.zoomOut=new $.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),j=N.zoomBigIn=new $.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),q=N.zoomBigOut=new $.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Q=N.zoomUpIn=new $.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),ie=N.zoomUpOut=new $.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),te=N.zoomLeftIn=new $.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),we=N.zoomLeftOut=new $.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),fe=N.zoomRightIn=new $.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),ce=N.zoomRightOut=new $.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),J=N.zoomDownIn=new $.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),M=N.zoomDownOut=new $.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),E={zoom:{inKeyframes:w,outKeyframes:W},"zoom-big":{inKeyframes:j,outKeyframes:q},"zoom-big-fast":{inKeyframes:j,outKeyframes:q},"zoom-left":{inKeyframes:te,outKeyframes:we},"zoom-right":{inKeyframes:fe,outKeyframes:ce},"zoom-up":{inKeyframes:Q,outKeyframes:ie},"zoom-down":{inKeyframes:J,outKeyframes:M}},ge=(be,ze)=>{const{antCls:Be}=be,Ue=`${Be}-${ze}`,{inKeyframes:it,outKeyframes:ht}=E[ze];return[(0,K.initMotion)(Ue,it,ht,ze==="zoom-big-fast"?be.motionDurationFast:be.motionDurationMid),{[`
        ${Ue}-enter,
        ${Ue}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:be.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Ue}-leave`]:{animationTimingFunction:be.motionEaseInOutCirc}}]};N.initZoomMotion=ge},22548:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.operationUnit=void 0;const k=$=>({color:$.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${$.motionDurationSlow}`,"&:focus, &:hover":{color:$.colorLinkHover},"&:active":{color:$.colorLinkActive}});N.operationUnit=k},9064:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_VERTICAL_CONTENT_RADIUS=void 0,N.default=j,N.getArrowOffsetToken=w;var $=k(51337);const K=N.MAX_VERTICAL_CONTENT_RADIUS=8;function w(q){const{contentRadius:Q,limitVerticalRadius:ie}=q,te=Q>12?Q+2:12;return{arrowOffsetHorizontal:te,arrowOffsetVertical:ie?K:te}}function W(q,Q){return q?Q:{}}function j(q,Q,ie){const{componentCls:te,boxShadowPopoverArrow:we,arrowOffsetVertical:fe,arrowOffsetHorizontal:ce}=q,{arrowDistance:J=0,arrowPlacement:M={left:!0,right:!0,top:!0,bottom:!0}}=ie||{};return{[te]:Object.assign(Object.assign(Object.assign(Object.assign({[`${te}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,$.genRoundedArrow)(q,Q,we)),{"&:before":{background:Q}})]},W(!!M.top,{[[`&-placement-top ${te}-arrow`,`&-placement-topLeft ${te}-arrow`,`&-placement-topRight ${te}-arrow`].join(",")]:{bottom:J,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${te}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${te}-arrow`]:{left:{_skip_check_:!0,value:ce}},[`&-placement-topRight ${te}-arrow`]:{right:{_skip_check_:!0,value:ce}}})),W(!!M.bottom,{[[`&-placement-bottom ${te}-arrow`,`&-placement-bottomLeft ${te}-arrow`,`&-placement-bottomRight ${te}-arrow`].join(",")]:{top:J,transform:"translateY(-100%)"},[`&-placement-bottom ${te}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${te}-arrow`]:{left:{_skip_check_:!0,value:ce}},[`&-placement-bottomRight ${te}-arrow`]:{right:{_skip_check_:!0,value:ce}}})),W(!!M.left,{[[`&-placement-left ${te}-arrow`,`&-placement-leftTop ${te}-arrow`,`&-placement-leftBottom ${te}-arrow`].join(",")]:{right:{_skip_check_:!0,value:J},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${te}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${te}-arrow`]:{top:fe},[`&-placement-leftBottom ${te}-arrow`]:{bottom:fe}})),W(!!M.right,{[[`&-placement-right ${te}-arrow`,`&-placement-rightTop ${te}-arrow`,`&-placement-rightBottom ${te}-arrow`].join(",")]:{left:{_skip_check_:!0,value:J},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${te}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${te}-arrow`]:{top:fe},[`&-placement-rightBottom ${te}-arrow`]:{bottom:fe}}))}}},51337:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genRoundedArrow=void 0,N.getArrowToken=K;var $=k(36939);function K(W){const{sizePopupArrow:j,borderRadiusXS:q,borderRadiusOuter:Q}=W,ie=j/2,te=0,we=ie,fe=Q*1/Math.sqrt(2),ce=ie-Q*(1-1/Math.sqrt(2)),J=ie-q*(1/Math.sqrt(2)),M=Q*(Math.sqrt(2)-1)+q*(1/Math.sqrt(2)),E=2*ie-J,ge=M,be=2*ie-fe,ze=ce,Be=2*ie-te,Ue=we,it=ie*Math.sqrt(2)+Q*(Math.sqrt(2)-2),ht=Q*(Math.sqrt(2)-1),Le=`polygon(${ht}px 100%, 50% ${ht}px, ${2*ie-ht}px 100%, ${ht}px 100%)`,Se=`path('M ${te} ${we} A ${Q} ${Q} 0 0 0 ${fe} ${ce} L ${J} ${M} A ${q} ${q} 0 0 1 ${E} ${ge} L ${be} ${ze} A ${Q} ${Q} 0 0 0 ${Be} ${Ue} Z')`;return{arrowShadowWidth:it,arrowPath:Se,arrowPolygon:Le}}const w=(W,j,q)=>{const{sizePopupArrow:Q,arrowPolygon:ie,arrowPath:te,arrowShadowWidth:we,borderRadiusXS:fe,calc:ce}=W;return{pointerEvents:"none",width:Q,height:Q,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:Q,height:ce(Q).div(2).equal(),background:j,clipPath:{_multi_value_:!0,value:[ie,te]},content:'""'},"&::after":{content:'""',position:"absolute",width:we,height:we,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,$.unit)(fe)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:q,zIndex:0,background:"transparent"}}};N.genRoundedArrow=w},89329:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.defaultTheme=N.defaultConfig=N.DesignTokenContext=void 0;var K=$(k(67294)),w=k(36939),W=$(k(91085)),j=$(k(98411));const q=N.defaultTheme=(0,w.createTheme)(W.default),Q=N.defaultConfig={token:j.default,override:{override:j.default},hashed:!0},ie=N.DesignTokenContext=K.default.createContext(Q)},36496:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return $.PresetColors}});var $=k(81342)},81342:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.PresetColors=void 0;const k=N.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(ct,N,k){"use strict";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"DesignTokenContext",{enumerable:!0,get:function(){return fe.DesignTokenContext}}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return W.PresetColors}}),Object.defineProperty(N,"calc",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(N,"defaultConfig",{enumerable:!0,get:function(){return fe.defaultConfig}}),Object.defineProperty(N,"genComponentStyleHook",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(N,"genPresetColor",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(N,"genStyleHooks",{enumerable:!0,get:function(){return q.genStyleHooks}}),Object.defineProperty(N,"genSubStyleComponent",{enumerable:!0,get:function(){return q.genSubStyleComponent}}),Object.defineProperty(N,"mergeToken",{enumerable:!0,get:function(){return ie.merge}}),Object.defineProperty(N,"statisticToken",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(N,"useResetIconStyle",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(N,"useStyleRegister",{enumerable:!0,get:function(){return w.useStyleRegister}}),Object.defineProperty(N,"useToken",{enumerable:!0,get:function(){return j.default}});var w=k(36939),W=k(36496),j=K(k(41401)),q=$(k(3737)),Q=K(k(36219)),ie=$(k(99636)),te=K(k(54894)),we=K(k(22996)),fe=k(89329)},26162:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getSolidColor=N.getAlphaColor=void 0;var $=k(131);const K=(W,j)=>new $.TinyColor(W).setAlpha(j).toRgbString();N.getAlphaColor=K;const w=(W,j)=>new $.TinyColor(W).darken(j).toHexString();N.getSolidColor=w},80373:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.generateNeutralColorPalettes=N.generateColorPalettes=void 0;var $=k(78589),K=k(26162);const w=j=>{const q=(0,$.generate)(j);return{1:q[0],2:q[1],3:q[2],4:q[3],5:q[4],6:q[5],7:q[6],8:q[4],9:q[5],10:q[6]}};N.generateColorPalettes=w;const W=(j,q)=>{const Q=j||"#fff",ie=q||"#000";return{colorBgBase:Q,colorTextBase:ie,colorText:(0,K.getAlphaColor)(ie,.88),colorTextSecondary:(0,K.getAlphaColor)(ie,.65),colorTextTertiary:(0,K.getAlphaColor)(ie,.45),colorTextQuaternary:(0,K.getAlphaColor)(ie,.25),colorFill:(0,K.getAlphaColor)(ie,.15),colorFillSecondary:(0,K.getAlphaColor)(ie,.06),colorFillTertiary:(0,K.getAlphaColor)(ie,.04),colorFillQuaternary:(0,K.getAlphaColor)(ie,.02),colorBgLayout:(0,K.getSolidColor)(Q,4),colorBgContainer:(0,K.getSolidColor)(Q,0),colorBgElevated:(0,K.getSolidColor)(Q,0),colorBgSpotlight:(0,K.getAlphaColor)(ie,.85),colorBgBlur:"transparent",colorBorder:(0,K.getSolidColor)(Q,15),colorBorderSecondary:(0,K.getSolidColor)(Q,6)}};N.generateNeutralColorPalettes=W},91085:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=we;var K=k(78589),w=$(k(54730)),W=$(k(19216)),j=k(98411),q=$(k(10805)),Q=$(k(81594)),ie=k(80373),te=$(k(69853));function we(fe){const ce=Object.keys(j.defaultPresetColors).map(J=>{const M=(0,K.generate)(fe[J]);return new Array(10).fill(1).reduce((E,ge,be)=>(E[`${J}-${be+1}`]=M[be],E[`${J}${be+1}`]=M[be],E),{})}).reduce((J,M)=>(J=Object.assign(Object.assign({},J),M),J),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fe),ce),(0,q.default)(fe,{generateColorPalettes:ie.generateColorPalettes,generateNeutralColorPalettes:ie.generateNeutralColorPalettes})),(0,te.default)(fe.fontSize)),(0,W.default)(fe)),(0,w.default)(fe)),(0,Q.default)(fe))}},98411:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.defaultPresetColors=N.default=void 0;const k=N.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},$=Object.assign(Object.assign({},k),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var K=N.default=$},10805:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var $=k(131);function K(w,W){let{generateColorPalettes:j,generateNeutralColorPalettes:q}=W;const{colorSuccess:Q,colorWarning:ie,colorError:te,colorInfo:we,colorPrimary:fe,colorBgBase:ce,colorTextBase:J}=w,M=j(fe),E=j(Q),ge=j(ie),be=j(te),ze=j(we),Be=q(ce,J),Ue=w.colorLink||w.colorInfo,it=j(Ue);return Object.assign(Object.assign({},Be),{colorPrimaryBg:M[1],colorPrimaryBgHover:M[2],colorPrimaryBorder:M[3],colorPrimaryBorderHover:M[4],colorPrimaryHover:M[5],colorPrimary:M[6],colorPrimaryActive:M[7],colorPrimaryTextHover:M[8],colorPrimaryText:M[9],colorPrimaryTextActive:M[10],colorSuccessBg:E[1],colorSuccessBgHover:E[2],colorSuccessBorder:E[3],colorSuccessBorderHover:E[4],colorSuccessHover:E[4],colorSuccess:E[6],colorSuccessActive:E[7],colorSuccessTextHover:E[8],colorSuccessText:E[9],colorSuccessTextActive:E[10],colorErrorBg:be[1],colorErrorBgHover:be[2],colorErrorBorder:be[3],colorErrorBorderHover:be[4],colorErrorHover:be[5],colorError:be[6],colorErrorActive:be[7],colorErrorTextHover:be[8],colorErrorText:be[9],colorErrorTextActive:be[10],colorWarningBg:ge[1],colorWarningBgHover:ge[2],colorWarningBorder:ge[3],colorWarningBorderHover:ge[4],colorWarningHover:ge[4],colorWarning:ge[6],colorWarningActive:ge[7],colorWarningTextHover:ge[8],colorWarningText:ge[9],colorWarningTextActive:ge[10],colorInfoBg:ze[1],colorInfoBgHover:ze[2],colorInfoBorder:ze[3],colorInfoBorderHover:ze[4],colorInfoHover:ze[4],colorInfo:ze[6],colorInfoActive:ze[7],colorInfoTextHover:ze[8],colorInfoText:ze[9],colorInfoTextActive:ze[10],colorLinkHover:it[4],colorLink:it[6],colorLinkActive:it[7],colorBgMask:new $.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var K=$(k(78117));function w(W){const{motionUnit:j,motionBase:q,borderRadius:Q,lineWidth:ie}=W;return Object.assign({motionDurationFast:`${(q+j).toFixed(1)}s`,motionDurationMid:`${(q+j*2).toFixed(1)}s`,motionDurationSlow:`${(q+j*3).toFixed(1)}s`,lineWidthBold:ie+1},(0,K.default)(Q))}},54730:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>{const{controlHeight:w}=K;return{controlHeightSM:w*.75,controlHeightXS:w*.5,controlHeightLG:w*1.25}};var $=N.default=k},69853:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(62231));const w=j=>{const q=(0,K.default)(j),Q=q.map(E=>E.size),ie=q.map(E=>E.lineHeight),te=Q[1],we=Q[0],fe=Q[2],ce=ie[1],J=ie[0],M=ie[2];return{fontSizeSM:we,fontSize:te,fontSizeLG:fe,fontSizeXL:Q[3],fontSizeHeading1:Q[6],fontSizeHeading2:Q[5],fontSizeHeading3:Q[4],fontSizeHeading4:Q[3],fontSizeHeading5:Q[2],lineHeight:ce,lineHeightLG:M,lineHeightSM:J,fontHeight:Math.round(ce*te),fontHeightLG:Math.round(M*fe),fontHeightSM:Math.round(J*we),lineHeightHeading1:ie[6],lineHeightHeading2:ie[5],lineHeightHeading3:ie[4],lineHeightHeading4:ie[3],lineHeightHeading5:ie[2]}};var W=N.default=w},62231:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k($){const K=new Array(10).fill(null).map((w,W)=>{const j=W-1,q=$*Math.pow(2.71828,j/5),Q=W>1?Math.floor(q):Math.ceil(q);return Math.floor(Q/2)*2});return K[1]=$,K.map(w=>{const W=w+8;return{size:w,lineHeight:W/w}})}},78117:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>{let w=K,W=K,j=K,q=K;return K<6&&K>=5?w=K+1:K<16&&K>=6?w=K+2:K>=16&&(w=16),K<7&&K>=5?W=4:K<8&&K>=7?W=5:K<14&&K>=8?W=6:K<16&&K>=14?W=7:K>=16&&(W=8),K<6&&K>=2?j=1:K>=6&&(j=2),K>4&&K<8?q=4:K>=8&&(q=6),{borderRadius:K,borderRadiusXS:j,borderRadiusSM:W,borderRadiusLG:w,borderRadiusOuter:q}};var $=N.default=k},19216:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k($){const{sizeUnit:K,sizeStep:w}=$;return{sizeXXL:K*(w+8),sizeXL:K*(w+4),sizeLG:K*(w+2),sizeMD:K*(w+1),sizeMS:K*w,size:K*w,sizeSM:K*(w-1),sizeXS:K*(w-2),sizeXXS:K*(w-3)}}},41401:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=J,N.unitless=N.ignore=N.getComputedToken=void 0;var K=$(k(67294)),w=k(36939),W=$(k(87629)),j=k(89329),q=$(k(98411)),Q=$(k(27722)),ie=function(M,E){var ge={};for(var be in M)Object.prototype.hasOwnProperty.call(M,be)&&E.indexOf(be)<0&&(ge[be]=M[be]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,be=Object.getOwnPropertySymbols(M);ze<be.length;ze++)E.indexOf(be[ze])<0&&Object.prototype.propertyIsEnumerable.call(M,be[ze])&&(ge[be[ze]]=M[be[ze]]);return ge};const te=N.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},we=N.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},fe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},ce=(M,E,ge)=>{const be=ge.getDerivativeToken(M),{override:ze}=E,Be=ie(E,["override"]);let Ue=Object.assign(Object.assign({},be),{override:ze});return Ue=(0,Q.default)(Ue),Be&&Object.entries(Be).forEach(it=>{let[ht,Le]=it;const{theme:Se}=Le,ye=ie(Le,["theme"]);let Ve=ye;Se&&(Ve=ce(Object.assign(Object.assign({},Ue),ye),{override:ye},Se)),Ue[ht]=Ve}),Ue};N.getComputedToken=ce;function J(){const{token:M,hashed:E,theme:ge,override:be,cssVar:ze}=K.default.useContext(j.DesignTokenContext),Be=`${W.default}-${E||""}`,Ue=ge||j.defaultTheme,[it,ht,Le]=(0,w.useCacheToken)(Ue,[q.default,M],{salt:Be,override:be,getComputedToken:ce,formatToken:Q.default,cssVar:ze&&{prefix:ze.prefix,key:ze.key,unitless:te,ignore:we,preserve:fe}});return[Ue,Le,E?ht:"",it,ze]}},27722:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=q;var K=k(131),w=$(k(98411)),W=$(k(83609)),j=function(Q,ie){var te={};for(var we in Q)Object.prototype.hasOwnProperty.call(Q,we)&&ie.indexOf(we)<0&&(te[we]=Q[we]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,we=Object.getOwnPropertySymbols(Q);fe<we.length;fe++)ie.indexOf(we[fe])<0&&Object.prototype.propertyIsEnumerable.call(Q,we[fe])&&(te[we[fe]]=Q[we[fe]]);return te};function q(Q){const{override:ie}=Q,te=j(Q,["override"]),we=Object.assign({},ie);Object.keys(w.default).forEach(Be=>{delete we[Be]});const fe=Object.assign(Object.assign({},te),we),ce=480,J=576,M=768,E=992,ge=1200,be=1600;if(fe.motion===!1){const Be="0s";fe.motionDurationFast=Be,fe.motionDurationMid=Be,fe.motionDurationSlow=Be}return Object.assign(Object.assign(Object.assign({},fe),{colorFillContent:fe.colorFillSecondary,colorFillContentHover:fe.colorFill,colorFillAlter:fe.colorFillQuaternary,colorBgContainerDisabled:fe.colorFillTertiary,colorBorderBg:fe.colorBgContainer,colorSplit:(0,W.default)(fe.colorBorderSecondary,fe.colorBgContainer),colorTextPlaceholder:fe.colorTextQuaternary,colorTextDisabled:fe.colorTextQuaternary,colorTextHeading:fe.colorText,colorTextLabel:fe.colorTextSecondary,colorTextDescription:fe.colorTextTertiary,colorTextLightSolid:fe.colorWhite,colorHighlight:fe.colorError,colorBgTextHover:fe.colorFillSecondary,colorBgTextActive:fe.colorFill,colorIcon:fe.colorTextTertiary,colorIconHover:fe.colorText,colorErrorOutline:(0,W.default)(fe.colorErrorBg,fe.colorBgContainer),colorWarningOutline:(0,W.default)(fe.colorWarningBg,fe.colorBgContainer),fontSizeIcon:fe.fontSizeSM,lineWidthFocus:fe.lineWidth*4,lineWidth:fe.lineWidth,controlOutlineWidth:fe.lineWidth*2,controlInteractiveSize:fe.controlHeight/2,controlItemBgHover:fe.colorFillTertiary,controlItemBgActive:fe.colorPrimaryBg,controlItemBgActiveHover:fe.colorPrimaryBgHover,controlItemBgActiveDisabled:fe.colorFill,controlTmpOutline:fe.colorFillQuaternary,controlOutline:(0,W.default)(fe.colorPrimaryBg,fe.colorBgContainer),lineType:fe.lineType,borderRadius:fe.borderRadius,borderRadiusXS:fe.borderRadiusXS,borderRadiusSM:fe.borderRadiusSM,borderRadiusLG:fe.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:fe.sizeXXS,paddingXS:fe.sizeXS,paddingSM:fe.sizeSM,padding:fe.size,paddingMD:fe.sizeMD,paddingLG:fe.sizeLG,paddingXL:fe.sizeXL,paddingContentHorizontalLG:fe.sizeLG,paddingContentVerticalLG:fe.sizeMS,paddingContentHorizontal:fe.sizeMS,paddingContentVertical:fe.sizeSM,paddingContentHorizontalSM:fe.size,paddingContentVerticalSM:fe.sizeXS,marginXXS:fe.sizeXXS,marginXS:fe.sizeXS,marginSM:fe.sizeSM,margin:fe.size,marginMD:fe.sizeMD,marginLG:fe.sizeLG,marginXL:fe.sizeXL,marginXXL:fe.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:ce,screenXSMin:ce,screenXSMax:J-1,screenSM:J,screenSMMin:J,screenSMMax:M-1,screenMD:M,screenMDMin:M,screenMDMax:E-1,screenLG:E,screenLGMin:E,screenLGMax:ge-1,screenXL:ge,screenXLMin:ge,screenXLMax:be-1,screenXXL:be,screenXXLMin:be,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new K.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new K.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new K.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),we)}},24312:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(56690)),w=$(k(89728)),W=$(k(61655)),j=$(k(26389)),q=$(k(38194));const Q="CALC_UNIT";function ie(we){return typeof we=="number"?`${we}${Q}`:we}let te=N.default=function(we){(0,W.default)(ce,we);var fe=(0,j.default)(ce);function ce(J){var M;return(0,K.default)(this,ce),M=fe.call(this),M.result="",J instanceof ce?M.result=`(${J.result})`:typeof J=="number"?M.result=ie(J):typeof J=="string"&&(M.result=J),M}return(0,w.default)(ce,[{key:"add",value:function(M){return M instanceof ce?this.result=`${this.result} + ${M.getResult()}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} + ${ie(M)}`),this.lowPriority=!0,this}},{key:"sub",value:function(M){return M instanceof ce?this.result=`${this.result} - ${M.getResult()}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} - ${ie(M)}`),this.lowPriority=!0,this}},{key:"mul",value:function(M){return this.lowPriority&&(this.result=`(${this.result})`),M instanceof ce?this.result=`${this.result} * ${M.getResult(!0)}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} * ${M}`),this.lowPriority=!1,this}},{key:"div",value:function(M){return this.lowPriority&&(this.result=`(${this.result})`),M instanceof ce?this.result=`${this.result} / ${M.getResult(!0)}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} / ${M}`),this.lowPriority=!1,this}},{key:"getResult",value:function(M){return this.lowPriority||M?`(${this.result})`:this.result}},{key:"equal",value:function(M){const{unit:E=!0}=M||{},ge=new RegExp(`${Q}`,"g");return this.result=this.result.replace(ge,E?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}]),ce}(q.default)},14774:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(56690)),w=$(k(89728)),W=$(k(61655)),j=$(k(26389)),q=$(k(38194));let Q=N.default=function(ie){(0,W.default)(we,ie);var te=(0,j.default)(we);function we(fe){var ce;return(0,K.default)(this,we),ce=te.call(this),ce.result=0,fe instanceof we?ce.result=fe.result:typeof fe=="number"&&(ce.result=fe),ce}return(0,w.default)(we,[{key:"add",value:function(ce){return ce instanceof we?this.result+=ce.result:typeof ce=="number"&&(this.result+=ce),this}},{key:"sub",value:function(ce){return ce instanceof we?this.result-=ce.result:typeof ce=="number"&&(this.result-=ce),this}},{key:"mul",value:function(ce){return ce instanceof we?this.result*=ce.result:typeof ce=="number"&&(this.result*=ce),this}},{key:"div",value:function(ce){return ce instanceof we?this.result/=ce.result:typeof ce=="number"&&(this.result/=ce),this}},{key:"equal",value:function(){return this.result}}]),we}(q.default)},38194:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(89728)),w=$(k(56690));let W=(0,K.default)(function q(){(0,w.default)(this,q)});var j=N.default=W},22996:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(14774)),w=$(k(24312));const W=q=>{const Q=q==="css"?w.default:K.default;return ie=>new Q(ie)};var j=N.default=W},3737:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=ge,N.genSubStyleComponent=N.genStyleHooks=void 0;var w=K(k(67294)),W=k(36939),j=k(56790),q=k(7177),Q=k(98078),ie=K(k(41401)),te=$(k(22996)),we=$(k(1657)),fe=K(k(99636)),ce=$(k(54894));const J=(Ue,it,ht)=>{var Le;return typeof ht=="function"?ht((0,fe.merge)(it,(Le=it[Ue])!==null&&Le!==void 0?Le:{})):ht!=null?ht:{}},M=(Ue,it,ht,Le)=>{const Se=Object.assign({},it[Ue]);if(Le!=null&&Le.deprecatedTokens){const{deprecatedTokens:Ve}=Le;Ve.forEach(je=>{let[Et,Oe]=je;var Qe;(Se!=null&&Se[Et]||Se!=null&&Se[Oe])&&((Qe=Se[Oe])!==null&&Qe!==void 0||(Se[Oe]=Se==null?void 0:Se[Et]))})}let ye=Object.assign(Object.assign({},ht),Se);return Le!=null&&Le.format&&(ye=Le.format(ye)),Object.keys(ye).forEach(Ve=>{ye[Ve]===it[Ve]&&delete ye[Ve]}),ye},E=(Ue,it)=>`${[it,Ue.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function ge(Ue,it,ht){let Le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Se=Array.isArray(Ue)?Ue:[Ue,Ue],[ye]=Se,Ve=Se.join("-");return je=>{const[Et,Oe,Qe,ne,We]=(0,ie.default)(),{getPrefixCls:oe,iconPrefixCls:Fe,csp:st}=(0,w.useContext)(q.ConfigContext),Ce=oe(),De=We?"css":"js",tt=(0,te.default)(De),{max:_e,min:me}=(0,we.default)(De),Ge={theme:Et,token:ne,hashId:Qe,nonce:()=>st==null?void 0:st.nonce,clientOnly:Le.clientOnly,order:Le.order||-999};return(0,W.useStyleRegister)(Object.assign(Object.assign({},Ge),{clientOnly:!1,path:["Shared",Ce]}),()=>[{"&":(0,Q.genLinkStyle)(ne)}]),(0,ce.default)(Fe,st),[(0,W.useStyleRegister)(Object.assign(Object.assign({},Ge),{path:[Ve,je,Fe]}),()=>{if(Le.injectStyle===!1)return[];const{token:pt,flush:Ht}=(0,fe.default)(ne),Je=J(ye,Oe,ht),$e=`.${je}`,Te=M(ye,Oe,Je,{deprecatedTokens:Le.deprecatedTokens,format:Le.format});We&&Object.keys(Je).forEach(ke=>{Je[ke]=`var(${(0,W.token2CSSVar)(ke,E(ye,We.prefix))})`});const Ye=(0,fe.merge)(pt,{componentCls:$e,prefixCls:je,iconCls:`.${Fe}`,antCls:`.${Ce}`,calc:tt,max:_e,min:me},We?Je:Te),ft=it(Ye,{hashId:Qe,prefixCls:je,rootPrefixCls:Ce,iconPrefixCls:Fe});return Ht(ye,Te),[Le.resetStyle===!1?null:(0,Q.genCommonStyle)(Ye,je),ft]}),Qe]}}const be=(Ue,it,ht,Le)=>{const Se=ge(Ue,it,ht,Object.assign({resetStyle:!1,order:-998},Le));return Ve=>{let{prefixCls:je}=Ve;return Se(je),null}};N.genSubStyleComponent=be;const ze=(Ue,it,ht)=>{function Le(Oe){return`${Ue}${Oe.slice(0,1).toUpperCase()}${Oe.slice(1)}`}const{unitless:Se={},injectStyle:ye=!0}=ht!=null?ht:{},Ve={[Le("zIndexPopup")]:!0};Object.keys(Se).forEach(Oe=>{Ve[Le(Oe)]=Se[Oe]});const je=Oe=>{let{rootCls:Qe,cssVar:ne}=Oe;const[,We]=(0,ie.default)();return(0,W.useCSSVarRegister)({path:[Ue],prefix:ne.prefix,key:ne==null?void 0:ne.key,unitless:Object.assign(Object.assign({},ie.unitless),Ve),ignore:ie.ignore,token:We,scope:Qe},()=>{const oe=J(Ue,We,it),Fe=M(Ue,We,oe,{format:ht==null?void 0:ht.format,deprecatedTokens:ht==null?void 0:ht.deprecatedTokens});return Object.keys(oe).forEach(st=>{Fe[Le(st)]=Fe[st],delete Fe[st]}),Fe}),null};return Oe=>{const[,,,,Qe]=(0,ie.default)();return[ne=>ye&&Qe?w.default.createElement(w.default.Fragment,null,w.default.createElement(je,{rootCls:Oe,cssVar:Qe,component:Ue}),ne):ne,Qe==null?void 0:Qe.key]}},Be=(Ue,it,ht,Le)=>{const Se=ge(Ue,it,ht,Le),ye=ze(Array.isArray(Ue)?Ue[0]:Ue,ht,Le);return function(Ve){let je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve;const[,Et]=Se(Ve),[Oe,Qe]=ye(je);return[Oe,Et,Qe]}};N.genStyleHooks=Be},36219:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var $=k(36496);function K(w,W){return $.PresetColors.reduce((j,q)=>{const Q=w[`${q}1`],ie=w[`${q}3`],te=w[`${q}6`],we=w[`${q}7`];return Object.assign(Object.assign({},j),W(q,{lightColor:Q,lightBorderColor:ie,darkColor:te,textColor:we}))},{})}},83609:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var $=k(131);function K(j){return j>=0&&j<=255}function w(j,q){const{r:Q,g:ie,b:te,a:we}=new $.TinyColor(j).toRgb();if(we<1)return j;const{r:fe,g:ce,b:J}=new $.TinyColor(q).toRgb();for(let M=.01;M<=1;M+=.01){const E=Math.round((Q-fe*(1-M))/M),ge=Math.round((ie-ce*(1-M))/M),be=Math.round((te-J*(1-M))/M);if(K(E)&&K(ge)&&K(be))return new $.TinyColor({r:E,g:ge,b:be,a:Math.round(M*100)/100}).toRgbString()}return new $.TinyColor({r:Q,g:ie,b:te,a:1}).toRgbString()}var W=N.default=w},1657:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var $=k(36939);function K(w){return w==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var W=arguments.length,j=new Array(W),q=0;q<W;q++)j[q]=arguments[q];return`max(${j.map(Q=>(0,$.unit)(Q)).join(",")})`},min:function(){for(var W=arguments.length,j=new Array(W),q=0;q<W;q++)j[q]=arguments[q];return`min(${j.map(Q=>(0,$.unit)(Q)).join(",")})`}}}},99636:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N._statistic_build_=void 0,N.default=q,N.merge=K,N.statistic=void 0;const k=typeof CSSINJS_STATISTIC!="undefined";let $=!0;function K(){for(var Q=arguments.length,ie=new Array(Q),te=0;te<Q;te++)ie[te]=arguments[te];if(!k)return Object.assign.apply(Object,[{}].concat(ie));$=!1;const we={};return ie.forEach(fe=>{Object.keys(fe).forEach(J=>{Object.defineProperty(we,J,{configurable:!0,enumerable:!0,get:()=>fe[J]})})}),$=!0,we}const w=N.statistic={},W=N._statistic_build_={};function j(){}function q(Q){let ie,te=Q,we=j;return k&&typeof Proxy!="undefined"&&(ie=new Set,te=new Proxy(Q,{get(fe,ce){return $&&ie.add(ce),fe[ce]}}),we=(fe,ce)=>{var J;w[fe]={global:Array.from(ie),component:Object.assign(Object.assign({},(J=w[fe])===null||J===void 0?void 0:J.component),ce)}}),{token:te,keys:ie,flush:we}}},54894:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=k(36939),w=k(98078),W=$(k(41401));const j=(Q,ie)=>{const[te,we]=(0,W.default)();return(0,K.useStyleRegister)({theme:te,token:we,hashId:"",path:["ant-design-icons",Q],nonce:()=>ie==null?void 0:ie.nonce},()=>[{[`.${Q}`]:Object.assign(Object.assign({},(0,w.resetIcon)()),{[`.${Q} .${Q}-icon`]:{display:"block"}})}])};var q=N.default=j},52040:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var $=N.default=k},92125:function(ct,N,k){"use strict";"use client";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(94184)),W=k(92419),j=$(k(67294)),q=k(31929),Q=K(k(15086)),ie=k(48125);const te=fe=>{const{prefixCls:ce,className:J,placement:M="top",title:E,color:ge,overlayInnerStyle:be}=fe,{getPrefixCls:ze}=j.useContext(q.ConfigContext),Be=ze("tooltip",ce),[Ue,it,ht]=(0,Q.default)(Be),Le=(0,ie.parseColor)(Be,ge),Se=Le.arrowStyle,ye=Object.assign(Object.assign({},be),Le.overlayStyle),Ve=(0,w.default)(it,ht,Be,`${Be}-pure`,`${Be}-placement-${M}`,J,Le.className);return Ue(j.createElement("div",{className:Ve,style:Se},j.createElement("div",{className:`${Be}-arrow`}),j.createElement(W.Popup,Object.assign({},fe,{className:it,prefixCls:Be,overlayInnerStyle:ye}),E)))};var we=N.default=te},94055:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(67294)),W=$(k(94184)),j=$(k(92419)),q=$(k(60869)),Q=k(56333),ie=k(53683),te=$(k(74132)),we=k(47419),fe=k(13594),ce=$(k(96877)),J=k(31929),M=k(46549),E=k(3184),ge=$(k(92125)),be=$(k(15086)),ze=k(48125),Be=function(ht,Le){var Se={};for(var ye in ht)Object.prototype.hasOwnProperty.call(ht,ye)&&Le.indexOf(ye)<0&&(Se[ye]=ht[ye]);if(ht!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ve=0,ye=Object.getOwnPropertySymbols(ht);Ve<ye.length;Ve++)Le.indexOf(ye[Ve])<0&&Object.prototype.propertyIsEnumerable.call(ht,ye[Ve])&&(Se[ye[Ve]]=ht[ye[Ve]]);return Se};const Ue=w.forwardRef((ht,Le)=>{var Se,ye;const{prefixCls:Ve,openClassName:je,getTooltipContainer:Et,overlayClassName:Oe,color:Qe,overlayInnerStyle:ne,children:We,afterOpenChange:oe,afterVisibleChange:Fe,destroyTooltipOnHide:st,arrow:Ce=!0,title:De,overlay:tt,builtinPlacements:_e,arrowPointAtCenter:me=!1,autoAdjustOverflow:Ge=!0}=ht,Ze=!!Ce,[,pt]=(0,E.useToken)(),{getPopupContainer:Ht,getPrefixCls:Je,direction:$e}=w.useContext(J.ConfigContext),Te=(0,fe.devUseWarning)("Tooltip"),Ye=w.useRef(null),ft=()=>{var Me;(Me=Ye.current)===null||Me===void 0||Me.forceAlign()};w.useImperativeHandle(Le,()=>({forceAlign:ft,forcePopupAlign:()=>{Te.deprecated(!1,"forcePopupAlign","forceAlign"),ft()}}));const[ke,Ne]=(0,q.default)(!1,{value:(Se=ht.open)!==null&&Se!==void 0?Se:ht.visible,defaultValue:(ye=ht.defaultOpen)!==null&&ye!==void 0?ye:ht.defaultVisible}),dt=!De&&!tt&&De!==0,Pt=Me=>{var et,St;Ne(dt?!1:Me),dt||((et=ht.onOpenChange)===null||et===void 0||et.call(ht,Me),(St=ht.onVisibleChange)===null||St===void 0||St.call(ht,Me))},rr=w.useMemo(()=>{var Me,et;let St=me;return typeof Ce=="object"&&(St=(et=(Me=Ce.pointAtCenter)!==null&&Me!==void 0?Me:Ce.arrowPointAtCenter)!==null&&et!==void 0?et:me),_e||(0,te.default)({arrowPointAtCenter:St,autoAdjustOverflow:Ge,arrowWidth:Ze?pt.sizePopupArrow:0,borderRadius:pt.borderRadius,offset:pt.marginXXS,visibleFirst:!0})},[me,Ce,_e,pt]),xr=w.useMemo(()=>De===0?De:tt||De||"",[tt,De]),ut=w.createElement(M.NoCompactStyle,null,typeof xr=="function"?xr():xr),{getPopupContainer:nn,placement:Gr="top",mouseEnterDelay:Xr=.1,mouseLeaveDelay:Nt=.1,overlayStyle:Yt,rootClassName:sr}=ht,Dt=Be(ht,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Qt=Je("tooltip",Ve),Sr=Je(),Er=ht["data-popover-inject"];let Fr=ke;!("open"in ht)&&!("visible"in ht)&&dt&&(Fr=!1);const zr=(0,we.isValidElement)(We)&&!(0,we.isFragment)(We)?We:w.createElement("span",null,We),le=zr.props,H=!le.className||typeof le.className=="string"?(0,W.default)(le.className,je||`${Qt}-open`):le.className,[re,Re,Ke]=(0,be.default)(Qt,!Er),Tt=(0,ze.parseColor)(Qt,Qe),or=Tt.arrowStyle,jt=Object.assign(Object.assign({},ne),Tt.overlayStyle),wt=(0,W.default)(Oe,{[`${Qt}-rtl`]:$e==="rtl"},Tt.className,sr,Re,Ke),[It,de]=(0,Q.useZIndex)("Tooltip",Dt.zIndex),pe=w.createElement(j.default,Object.assign({},Dt,{zIndex:It,showArrow:Ze,placement:Gr,mouseEnterDelay:Xr,mouseLeaveDelay:Nt,prefixCls:Qt,overlayClassName:wt,overlayStyle:Object.assign(Object.assign({},or),Yt),getTooltipContainer:nn||Et||Ht,ref:Ye,builtinPlacements:rr,overlay:ut,visible:Fr,onVisibleChange:Pt,afterVisibleChange:oe!=null?oe:Fe,overlayInnerStyle:jt,arrowContent:w.createElement("span",{className:`${Qt}-arrow-content`}),motion:{motionName:(0,ie.getTransitionName)(Sr,"zoom-big-fast",ht.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!st}),Fr?(0,we.cloneElement)(zr,{className:H}):zr);return re(w.createElement(ce.default.Provider,{value:de},pe))});Ue._InternalPanelDoNotUseOrYouWillBeFired=ge.default;var it=N.default=Ue},15086:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var K=k(98078),w=k(42836),W=$(k(9064)),j=k(3184),q=k(36939),Q=k(51337);const ie=fe=>{const{componentCls:ce,tooltipMaxWidth:J,tooltipColor:M,tooltipBg:E,tooltipBorderRadius:ge,zIndexPopup:be,controlHeight:ze,boxShadowSecondary:Be,paddingSM:Ue,paddingXS:it}=fe;return[{[ce]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,K.resetComponent)(fe)),{position:"absolute",zIndex:be,display:"block",width:"max-content",maxWidth:J,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":E,[`${ce}-inner`]:{minWidth:ze,minHeight:ze,padding:`${(0,q.unit)(fe.calc(Ue).div(2).equal())} ${(0,q.unit)(it)}`,color:M,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:E,borderRadius:ge,boxShadow:Be,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${ce}-inner`]:{borderRadius:fe.min(ge,W.MAX_VERTICAL_CONTENT_RADIUS)}},[`${ce}-content`]:{position:"relative"}}),(0,j.genPresetColor)(fe,(ht,Le)=>{let{darkColor:Se}=Le;return{[`&${ce}-${ht}`]:{[`${ce}-inner`]:{backgroundColor:Se},[`${ce}-arrow`]:{"--antd-arrow-background-color":Se}}}})),{"&-rtl":{direction:"rtl"}})},(0,W.default)(fe,"var(--antd-arrow-background-color)"),{[`${ce}-pure`]:{position:"relative",maxWidth:"none",margin:fe.sizePopupArrow}}]},te=fe=>Object.assign(Object.assign({zIndexPopup:fe.zIndexPopupBase+70},(0,W.getArrowOffsetToken)({contentRadius:fe.borderRadius,limitVerticalRadius:!0})),(0,Q.getArrowToken)((0,j.mergeToken)(fe,{borderRadiusOuter:Math.min(fe.borderRadiusOuter,4)})));N.prepareComponentToken=te;var we=N.default=function(ce){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,j.genStyleHooks)("Tooltip",E=>{const{borderRadius:ge,colorTextLightSolid:be,colorBgSpotlight:ze}=E,Be=(0,j.mergeToken)(E,{tooltipMaxWidth:250,tooltipColor:be,tooltipBorderRadius:ge,tooltipBg:ze});return[ie(Be),(0,w.initZoomMotion)(E,"zoom-big-fast")]},te,{resetStyle:!1,injectStyle:J})(ce)}},48125:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.parseColor=W;var K=$(k(94184)),w=k(45471);function W(j,q){const Q=(0,w.isPresetColor)(q),ie=(0,K.default)({[`${j}-${q}`]:q&&Q}),te={},we={};return q&&!Q&&(te.background=q,we["--antd-arrow-background-color"]=q),{className:ie,overlayStyle:te,arrowStyle:we}}},12385:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(67294)),W=$(k(45598)),j=$(k(82546));function q(ge){const be=typeof ge;return be==="string"||be==="number"}function Q(ge){let be=0;return ge.forEach(ze=>{q(ze)?be+=String(ze).length:be+=1}),be}function ie(ge,be){let ze=0;const Be=[];for(let Ue=0;Ue<ge.length;Ue+=1){if(ze===be)return Be;const it=ge[Ue],Le=q(it)?String(it).length:1,Se=ze+Le;if(Se>be){const ye=be-ze;return Be.push(String(it).slice(0,ye)),Be}Be.push(it),ze=Se}return ge}const te=0,we=1,fe=2,ce=3,J=4,M=ge=>{let{enabledMeasure:be,children:ze,text:Be,width:Ue,fontSize:it,rows:ht,onEllipsis:Le}=ge;const[[Se,ye,Ve],je]=w.useState([0,0,0]),[Et,Oe]=w.useState(0),[Qe,ne]=w.useState(te),[We,oe]=w.useState(0),Fe=w.useRef(null),st=w.useRef(null),Ce=w.useMemo(()=>(0,W.default)(Be),[Be]),De=w.useMemo(()=>Q(Ce),[Ce]),tt=w.useMemo(()=>!be||Qe!==ce?Et&&Qe!==J&&be?ze(ie(Ce,Et),Et<De):ze(Ce,!1):ze(ie(Ce,ye),ye<De),[be,Qe,ze,Ce,ye,De]);(0,j.default)(()=>{be&&Ue&&it&&De&&(ne(we),je([0,Math.ceil(De/2),De]))},[be,Ue,it,Be,De,ht]),(0,j.default)(()=>{var Ze;Qe===we&&oe(((Ze=Fe.current)===null||Ze===void 0?void 0:Ze.offsetHeight)||0)},[Qe]),(0,j.default)(()=>{var Ze,pt;if(We){if(Qe===we){const Ht=((Ze=st.current)===null||Ze===void 0?void 0:Ze.offsetHeight)||0,Je=ht*We;Ht<=Je?(ne(J),Le(!1)):ne(fe)}else if(Qe===fe)if(Se!==Ve){const Ht=((pt=st.current)===null||pt===void 0?void 0:pt.offsetHeight)||0,Je=ht*We;let $e=Se,Te=Ve;Se===Ve-1?Te=Se:Ht<=Je?$e=ye:Te=ye;const Ye=Math.ceil(($e+Te)/2);je([$e,Ye,Te])}else ne(ce),Oe(ye),Le(!0)}},[Qe,Se,Ve,ht,We]);const _e={width:Ue,whiteSpace:"normal",margin:0,padding:0},me=(Ze,pt,Ht)=>w.createElement("span",{"aria-hidden":!0,ref:pt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(it/2)*2},Ht)},Ze),Ge=(Ze,pt)=>{const Ht=ie(Ce,Ze);return me(ze(Ht,!0),pt,_e)};return w.createElement(w.Fragment,null,tt,be&&Qe!==ce&&Qe!==J&&w.createElement(w.Fragment,null,me("lg",Fe,{wordBreak:"keep-all",whiteSpace:"nowrap"}),Qe===we?me(ze(Ce,!1),st,_e):Ge(ye,st)))};var E=N.default=M},69274:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(67294)),W=$(k(94055));const j=Q=>{let{enabledEllipsis:ie,isEllipsis:te,children:we,tooltipProps:fe}=Q;return!(fe!=null&&fe.title)||!ie?we:w.createElement(W.default,Object.assign({open:te?void 0:!1},fe),we)};var q=N.default=j},28460:function(ct,N,k){"use strict";"use client";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(83874)),W=K(k(90091)),j=K(k(10875)),q=K(k(94184)),Q=K(k(20640)),ie=K(k(48555)),te=K(k(45598)),we=K(k(82546)),fe=K(k(60869)),ce=K(k(18475)),J=k(75531),M=$(k(67294)),E=k(38882),ge=K(k(60938)),be=k(31929),ze=K(k(76647)),Be=K(k(94055)),Ue=K(k(69425)),it=K(k(89652)),ht=K(k(92759)),Le=K(k(67312)),Se=K(k(12385)),ye=K(k(69274)),Ve=function(oe,Fe){var st={};for(var Ce in oe)Object.prototype.hasOwnProperty.call(oe,Ce)&&Fe.indexOf(Ce)<0&&(st[Ce]=oe[Ce]);if(oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var De=0,Ce=Object.getOwnPropertySymbols(oe);De<Ce.length;De++)Fe.indexOf(Ce[De])<0&&Object.prototype.propertyIsEnumerable.call(oe,Ce[De])&&(st[Ce[De]]=oe[Ce[De]]);return st};function je(oe,Fe){let{mark:st,code:Ce,underline:De,delete:tt,strong:_e,keyboard:me,italic:Ge}=oe,Ze=Fe;function pt(Ht,Je){Je&&(Ze=M.createElement(Ht,{},Ze))}return pt("strong",_e),pt("u",De),pt("del",tt),pt("code",Ce),pt("mark",st),pt("kbd",me),pt("i",Ge),Ze}function Et(oe,Fe,st){return oe===!0||oe===void 0?Fe:oe||st&&Fe}function Oe(oe){return oe===!1?[!1,!1]:Array.isArray(oe)?oe:[oe]}const Qe="...",ne=M.forwardRef((oe,Fe)=>{var st,Ce,De;const{prefixCls:tt,className:_e,style:me,type:Ge,disabled:Ze,children:pt,ellipsis:Ht,editable:Je,copyable:$e,component:Te,title:Ye}=oe,ft=Ve(oe,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:ke,direction:Ne}=M.useContext(be.ConfigContext),[dt]=(0,ze.default)("Text"),Pt=M.useRef(null),rr=M.useRef(null),xr=ke("typography",tt),ut=(0,ce.default)(ft,["mark","code","delete","underline","strong","keyboard","italic"]),[nn,Gr]=(0,ht.default)(Je),[Xr,Nt]=(0,fe.default)(!1,{value:Gr.editing}),{triggerType:Yt=["icon"]}=Gr,sr=ai=>{var _i;ai&&((_i=Gr.onStart)===null||_i===void 0||_i.call(Gr)),Nt(ai)};(0,Le.default)(()=>{var ai;Xr||(ai=rr.current)===null||ai===void 0||ai.focus()},[Xr]);const Dt=ai=>{ai==null||ai.preventDefault(),sr(!0)},Qt=ai=>{var _i;(_i=Gr.onChange)===null||_i===void 0||_i.call(Gr,ai),sr(!1)},Sr=()=>{var ai;(ai=Gr.onCancel)===null||ai===void 0||ai.call(Gr),sr(!1)},[Er,Fr]=(0,ht.default)($e),[zr,le]=M.useState(!1),H=M.useRef(null),re={};Fr.format&&(re.format=Fr.format);const Re=()=>{H.current&&clearTimeout(H.current)},Ke=ai=>{var _i;ai==null||ai.preventDefault(),ai==null||ai.stopPropagation(),(0,Q.default)(Fr.text||String(pt)||"",re),le(!0),Re(),H.current=setTimeout(()=>{le(!1)},3e3),(_i=Fr.onCopy)===null||_i===void 0||_i.call(Fr,ai)};M.useEffect(()=>Re,[]);const[Tt,or]=M.useState(!1),[jt,wt]=M.useState(!1),[It,de]=M.useState(!1),[pe,Me]=M.useState(!1),[et,St]=M.useState(!1),[Gt,gr]=M.useState(!0),[At,ot]=(0,ht.default)(Ht,{expandable:!1}),Ot=At&&!It,{rows:yr=1}=ot,kr=M.useMemo(()=>!Ot||ot.suffix!==void 0||ot.onEllipsis||ot.expandable||nn||Er,[Ot,ot,nn,Er]);(0,we.default)(()=>{At&&!kr&&(or((0,E.isStyleSupport)("webkitLineClamp")),wt((0,E.isStyleSupport)("textOverflow")))},[kr,At]);const Ft=M.useMemo(()=>kr?!1:yr===1?jt:Tt,[kr,jt,Tt]),Mn=Ot&&(Ft?et:pe),qn=Ot&&yr===1&&Ft,ri=Ot&&yr>1&&Ft,un=ai=>{var _i;de(!0),(_i=ot.onExpand)===null||_i===void 0||_i.call(ot,ai)},[Yn,jn]=M.useState(0),[Kn,aa]=M.useState(0),vi=(ai,_i)=>{let{offsetWidth:ea}=ai;var Ha;jn(ea),aa(parseInt((Ha=window.getComputedStyle)===null||Ha===void 0?void 0:Ha.call(window,_i).fontSize,10)||0)},da=ai=>{var _i;Me(ai),pe!==ai&&((_i=ot.onEllipsis)===null||_i===void 0||_i.call(ot,ai))};M.useEffect(()=>{const ai=Pt.current;if(At&&Ft&&ai){const _i=ri?ai.offsetHeight<ai.scrollHeight:ai.offsetWidth<ai.scrollWidth;et!==_i&&St(_i)}},[At,Ft,pt,ri,Gt]),M.useEffect(()=>{const ai=Pt.current;if(typeof IntersectionObserver=="undefined"||!ai||!Ft||!Ot)return;const _i=new IntersectionObserver(()=>{gr(!!ai.offsetParent)});return _i.observe(ai),()=>{_i.disconnect()}},[Ft,Ot]);let Oa={};ot.tooltip===!0?Oa={title:(st=Gr.text)!==null&&st!==void 0?st:pt}:M.isValidElement(ot.tooltip)?Oa={title:ot.tooltip}:typeof ot.tooltip=="object"?Oa=Object.assign({title:(Ce=Gr.text)!==null&&Ce!==void 0?Ce:pt},ot.tooltip):Oa={title:ot.tooltip};const xa=M.useMemo(()=>{const ai=_i=>["string","number"].includes(typeof _i);if(!(!At||Ft)){if(ai(Gr.text))return Gr.text;if(ai(pt))return pt;if(ai(Ye))return Ye;if(ai(Oa.title))return Oa.title}},[At,Ft,Ye,Oa.title,Mn]);if(Xr)return M.createElement(Ue.default,{value:(De=Gr.text)!==null&&De!==void 0?De:typeof pt=="string"?pt:"",onSave:Qt,onCancel:Sr,onEnd:Gr.onEnd,prefixCls:xr,className:_e,style:me,direction:Ne,component:Te,maxLength:Gr.maxLength,autoSize:Gr.autoSize,enterIcon:Gr.enterIcon});const Va=()=>{const{expandable:ai,symbol:_i}=ot;if(!ai)return null;let ea;return _i?ea=_i:ea=dt==null?void 0:dt.expand,M.createElement("a",{key:"expand",className:`${xr}-expand`,onClick:un,"aria-label":dt==null?void 0:dt.expand},ea)},Sa=()=>{if(!nn)return;const{icon:ai,tooltip:_i}=Gr,ea=(0,te.default)(_i)[0]||(dt==null?void 0:dt.edit),Ha=typeof ea=="string"?ea:"";return Yt.includes("icon")?M.createElement(Be.default,{key:"edit",title:_i===!1?"":ea},M.createElement(ge.default,{ref:rr,className:`${xr}-edit`,onClick:Dt,"aria-label":Ha},ai||M.createElement(j.default,{role:"button"}))):null},gs=()=>{if(!Er)return;const{tooltips:ai,icon:_i}=Fr,ea=Oe(ai),Ha=Oe(_i),ms=zr?Et(ea[1],dt==null?void 0:dt.copied):Et(ea[0],dt==null?void 0:dt.copy),lo=zr?dt==null?void 0:dt.copied:dt==null?void 0:dt.copy,ko=typeof ms=="string"?ms:lo;return M.createElement(Be.default,{key:"copy",title:ms},M.createElement(ge.default,{className:(0,q.default)(`${xr}-copy`,zr&&`${xr}-copy-success`),onClick:Ke,"aria-label":ko},zr?Et(Ha[1],M.createElement(w.default,null),!0):Et(Ha[0],M.createElement(W.default,null),!0)))},io=ai=>[ai&&Va(),Sa(),gs()],Oo=ai=>[ai&&M.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Qe),ot.suffix,io(ai)];return M.createElement(ie.default,{onResize:vi,disabled:!Ot||Ft},ai=>M.createElement(ye.default,{tooltipProps:Oa,enabledEllipsis:Ot,isEllipsis:Mn},M.createElement(it.default,Object.assign({className:(0,q.default)({[`${xr}-${Ge}`]:Ge,[`${xr}-disabled`]:Ze,[`${xr}-ellipsis`]:At,[`${xr}-single-line`]:Ot&&yr===1,[`${xr}-ellipsis-single-line`]:qn,[`${xr}-ellipsis-multiple-line`]:ri},_e),prefixCls:tt,style:Object.assign(Object.assign({},me),{WebkitLineClamp:ri?yr:void 0}),component:Te,ref:(0,J.composeRef)(ai,Pt,Fe),direction:Ne,onClick:Yt.includes("text")?Dt:void 0,"aria-label":xa==null?void 0:xa.toString(),title:Ye},ut),M.createElement(Se.default,{enabledMeasure:Ot&&!Ft,text:pt,rows:yr,width:Yn,fontSize:Kn,onEllipsis:da},(_i,ea)=>{let Ha=_i;return _i.length&&ea&&xa&&(Ha=M.createElement("span",{key:"show-content","aria-hidden":!0},Ha)),je(oe,M.createElement(M.Fragment,null,Ha,Oo(ea)))}))))});var We=N.default=ne},69425:function(ct,N,k){"use strict";"use client";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(7224)),W=K(k(94184)),j=K(k(27712)),q=$(k(67294)),Q=k(47419),ie=K(k(14104)),te=K(k(23461));const we=ce=>{const{prefixCls:J,"aria-label":M,className:E,style:ge,direction:be,maxLength:ze,autoSize:Be=!0,value:Ue,onSave:it,onCancel:ht,onEnd:Le,component:Se,enterIcon:ye=q.createElement(w.default,null)}=ce,Ve=q.useRef(null),je=q.useRef(!1),Et=q.useRef(),[Oe,Qe]=q.useState(Ue);q.useEffect(()=>{Qe(Ue)},[Ue]),q.useEffect(()=>{if(Ve.current&&Ve.current.resizableTextArea){const{textArea:pt}=Ve.current.resizableTextArea;pt.focus();const{length:Ht}=pt.value;pt.setSelectionRange(Ht,Ht)}},[]);const ne=pt=>{let{target:Ht}=pt;Qe(Ht.value.replace(/[\n\r]/g,""))},We=()=>{je.current=!0},oe=()=>{je.current=!1},Fe=pt=>{let{keyCode:Ht}=pt;je.current||(Et.current=Ht)},st=()=>{it(Oe.trim())},Ce=pt=>{let{keyCode:Ht,ctrlKey:Je,altKey:$e,metaKey:Te,shiftKey:Ye}=pt;Et.current===Ht&&!je.current&&!Je&&!$e&&!Te&&!Ye&&(Ht===j.default.ENTER?(st(),Le==null||Le()):Ht===j.default.ESC&&ht())},De=()=>{st()},tt=Se?`${J}-${Se}`:"",[_e,me,Ge]=(0,te.default)(J),Ze=(0,W.default)(J,`${J}-edit-content`,{[`${J}-rtl`]:be==="rtl"},E,tt,me,Ge);return _e(q.createElement("div",{className:Ze,style:ge},q.createElement(ie.default,{ref:Ve,maxLength:ze,value:Oe,onChange:ne,onKeyDown:Fe,onKeyUp:Ce,onCompositionStart:We,onCompositionEnd:oe,onBlur:De,"aria-label":M,rows:1,autoSize:Be}),ye!==null?(0,Q.cloneElement)(ye,{className:`${J}-edit-content-confirm`}):null))};var fe=N.default=we},34528:function(ct,N,k){"use strict";var $,K=k(64836).default,w=k(75263).default;$={value:!0},N.Z=void 0;var W=w(k(67294)),j=k(13594),q=K(k(28460)),Q=function(fe,ce){var J={};for(var M in fe)Object.prototype.hasOwnProperty.call(fe,M)&&ce.indexOf(M)<0&&(J[M]=fe[M]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,M=Object.getOwnPropertySymbols(fe);E<M.length;E++)ce.indexOf(M[E])<0&&Object.prototype.propertyIsEnumerable.call(fe,M[E])&&(J[M[E]]=fe[M[E]]);return J};const ie=[1,2,3,4,5],te=W.forwardRef((fe,ce)=>{const{level:J=1}=fe,M=Q(fe,["level"]);let E;return ie.includes(J)?E=`h${J}`:E="h1",W.createElement(q.default,Object.assign({ref:ce},M,{component:E}))});var we=N.Z=te},89652:function(ct,N,k){"use strict";"use client";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var w=K(k(67294)),W=$(k(94184)),j=k(75531),q=k(13594),Q=k(31929),ie=$(k(23461)),te=function(ce,J){var M={};for(var E in ce)Object.prototype.hasOwnProperty.call(ce,E)&&J.indexOf(E)<0&&(M[E]=ce[E]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,E=Object.getOwnPropertySymbols(ce);ge<E.length;ge++)J.indexOf(E[ge])<0&&Object.prototype.propertyIsEnumerable.call(ce,E[ge])&&(M[E[ge]]=ce[E[ge]]);return M};const we=w.forwardRef((ce,J)=>{const{prefixCls:M,component:E="article",className:ge,rootClassName:be,setContentRef:ze,children:Be,direction:Ue,style:it}=ce,ht=te(ce,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Le,direction:Se,typography:ye}=w.useContext(Q.ConfigContext),Ve=Ue!=null?Ue:Se;let je=J;ze&&(je=(0,j.composeRef)(J,ze));const Et=Le("typography",M),[Oe,Qe,ne]=(0,ie.default)(Et),We=(0,W.default)(Et,ye==null?void 0:ye.className,{[`${Et}-rtl`]:Ve==="rtl"},ge,be,Qe,ne),oe=Object.assign(Object.assign({},ye==null?void 0:ye.style),it);return Oe(w.createElement(E,Object.assign({className:We,style:oe,ref:je},ht),Be))});var fe=N.default=we},92759:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var K=$(k(67294));function w(W,j){return K.useMemo(()=>{const q=!!W;return[q,Object.assign(Object.assign({},j),q&&typeof W=="object"?W:null)]},[W])}},67312:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(67294));const w=(j,q)=>{const Q=K.useRef(!1);K.useEffect(()=>{Q.current?j():Q.current=!0},q)};var W=N.default=w},23461:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var $=k(98078),K=k(3184),w=k(48385);const W=Q=>{const{componentCls:ie,titleMarginTop:te}=Q;return{[ie]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:Q.colorText,wordBreak:"break-word",lineHeight:Q.lineHeight,[`&${ie}-secondary`]:{color:Q.colorTextDescription},[`&${ie}-success`]:{color:Q.colorSuccess},[`&${ie}-warning`]:{color:Q.colorWarning},[`&${ie}-danger`]:{color:Q.colorError,"a&:active, a&:focus":{color:Q.colorErrorActive},"a&:hover":{color:Q.colorErrorHover}},[`&${ie}-disabled`]:{color:Q.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,w.getTitleStyles)(Q)),{[`
      & + h1${ie},
      & + h2${ie},
      & + h3${ie},
      & + h4${ie},
      & + h5${ie}
      `]:{marginTop:te},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:te}}}),(0,w.getResetStyles)(Q)),(0,w.getLinkStyles)(Q)),{[`
        ${ie}-expand,
        ${ie}-edit,
        ${ie}-copy
      `]:Object.assign(Object.assign({},(0,$.operationUnit)(Q)),{marginInlineStart:Q.marginXXS})}),(0,w.getEditableStyles)(Q)),(0,w.getCopyableStyles)(Q)),(0,w.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},j=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});N.prepareComponentToken=j;var q=N.default=(0,K.genStyleHooks)("Typography",Q=>[W(Q)],j)},48385:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTitleStyles=N.getResetStyles=N.getLinkStyles=N.getEllipsisStyles=N.getEditableStyles=N.getCopyableStyles=void 0;var $=k(78589),K=k(36939),w=k(98078);const W=(fe,ce,J,M)=>{const{titleMarginBottom:E,fontWeightStrong:ge}=M;return{marginBottom:E,color:J,fontWeight:ge,fontSize:fe,lineHeight:ce}},j=fe=>{const ce=[1,2,3,4,5],J={};return ce.forEach(M=>{J[`
      h${M}&,
      div&-h${M},
      div&-h${M} > textarea,
      h${M}
    `]=W(fe[`fontSizeHeading${M}`],fe[`lineHeightHeading${M}`],fe.colorTextHeading,fe)}),J};N.getTitleStyles=j;const q=fe=>{const{componentCls:ce}=fe;return{"a&, a":Object.assign(Object.assign({},(0,w.operationUnit)(fe)),{textDecoration:fe.linkDecoration,"&:active, &:hover":{textDecoration:fe.linkHoverDecoration},[`&[disabled], &${ce}-disabled`]:{color:fe.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:fe.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};N.getLinkStyles=q;const Q=fe=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:fe.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:fe.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:$.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:fe.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});N.getResetStyles=Q;const ie=fe=>{const{componentCls:ce,paddingSM:J}=fe,M=J;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:fe.calc(fe.paddingSM).mul(-1).equal(),marginTop:fe.calc(M).mul(-1).equal(),marginBottom:`calc(1em - ${(0,K.unit)(M)})`},[`${ce}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:fe.calc(fe.marginXS).add(2).equal(),insetBlockEnd:fe.marginXS,color:fe.colorTextDescription,fontWeight:"normal",fontSize:fe.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};N.getEditableStyles=ie;const te=fe=>({"&-copy-success":{[`
    &,
    &:hover,
    &:focus`]:{color:fe.colorSuccess}}});N.getCopyableStyles=te;const we=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});N.getEllipsisStyles=we},87629:function(ct,N,k){"use strict";"use client";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(36245)),w=N.default=K.default},36245:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=N.default="5.12.4"},83874:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=K(k(71079));function K(W){return W&&W.__esModule?W:{default:W}}const w=$;N.default=w,ct.exports=w},43273:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=K(k(72225));function K(W){return W&&W.__esModule?W:{default:W}}const w=$;N.default=w,ct.exports=w},90091:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=K(k(29539));function K(W){return W&&W.__esModule?W:{default:W}}const w=$;N.default=w,ct.exports=w},10875:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=K(k(54825));function K(W){return W&&W.__esModule?W:{default:W}}const w=$;N.default=w,ct.exports=w},7224:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const $=K(k(43552));function K(W){return W&&W.__esModule?W:{default:W}}const w=$;N.default=w,ct.exports=w},26545:function(ct,N,k){"use client";"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return Se}});var $=J(k(67294)),K=fe(k(94184)),w=k(78589),W=fe(k(13357)),j=fe(k(46648)),q=k(46338),Q=k(49458);function ie(ye,Ve){(Ve==null||Ve>ye.length)&&(Ve=ye.length);for(var je=0,Et=new Array(Ve);je<Ve;je++)Et[je]=ye[je];return Et}function te(ye){if(Array.isArray(ye))return ye}function we(ye,Ve,je){return Ve in ye?Object.defineProperty(ye,Ve,{value:je,enumerable:!0,configurable:!0,writable:!0}):ye[Ve]=je,ye}function fe(ye){return ye&&ye.__esModule?ye:{default:ye}}function ce(ye){if(typeof WeakMap!="function")return null;var Ve=new WeakMap,je=new WeakMap;return(ce=function(Et){return Et?je:Ve})(ye)}function J(ye,Ve){if(!Ve&&ye&&ye.__esModule)return ye;if(ye===null||typeof ye!="object"&&typeof ye!="function")return{default:ye};var je=ce(Ve);if(je&&je.has(ye))return je.get(ye);var Et={},Oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Qe in ye)if(Qe!=="default"&&Object.prototype.hasOwnProperty.call(ye,Qe)){var ne=Oe?Object.getOwnPropertyDescriptor(ye,Qe):null;ne&&(ne.get||ne.set)?Object.defineProperty(Et,Qe,ne):Et[Qe]=ye[Qe]}return Et.default=ye,je&&je.set(ye,Et),Et}function M(ye,Ve){var je=ye==null?null:typeof Symbol!="undefined"&&ye[Symbol.iterator]||ye["@@iterator"];if(je!=null){var Et=[],Oe=!0,Qe=!1,ne,We;try{for(je=je.call(ye);!(Oe=(ne=je.next()).done)&&(Et.push(ne.value),!(Ve&&Et.length===Ve));Oe=!0);}catch(oe){Qe=!0,We=oe}finally{try{!Oe&&je.return!=null&&je.return()}finally{if(Qe)throw We}}return Et}}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ge(ye){for(var Ve=1;Ve<arguments.length;Ve++){var je=arguments[Ve]!=null?arguments[Ve]:{},Et=Object.keys(je);typeof Object.getOwnPropertySymbols=="function"&&(Et=Et.concat(Object.getOwnPropertySymbols(je).filter(function(Oe){return Object.getOwnPropertyDescriptor(je,Oe).enumerable}))),Et.forEach(function(Oe){we(ye,Oe,je[Oe])})}return ye}function be(ye,Ve){var je=Object.keys(ye);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ye);Ve&&(Et=Et.filter(function(Oe){return Object.getOwnPropertyDescriptor(ye,Oe).enumerable})),je.push.apply(je,Et)}return je}function ze(ye,Ve){return Ve=Ve!=null?Ve:{},Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(Ve)):be(Object(Ve)).forEach(function(je){Object.defineProperty(ye,je,Object.getOwnPropertyDescriptor(Ve,je))}),ye}function Be(ye,Ve){if(ye==null)return{};var je=Ue(ye,Ve),Et,Oe;if(Object.getOwnPropertySymbols){var Qe=Object.getOwnPropertySymbols(ye);for(Oe=0;Oe<Qe.length;Oe++)Et=Qe[Oe],!(Ve.indexOf(Et)>=0)&&Object.prototype.propertyIsEnumerable.call(ye,Et)&&(je[Et]=ye[Et])}return je}function Ue(ye,Ve){if(ye==null)return{};var je={},Et=Object.keys(ye),Oe,Qe;for(Qe=0;Qe<Et.length;Qe++)Oe=Et[Qe],!(Ve.indexOf(Oe)>=0)&&(je[Oe]=ye[Oe]);return je}function it(ye,Ve){return te(ye)||M(ye,Ve)||ht(ye,Ve)||E()}function ht(ye,Ve){if(ye){if(typeof ye=="string")return ie(ye,Ve);var je=Object.prototype.toString.call(ye).slice(8,-1);if(je==="Object"&&ye.constructor&&(je=ye.constructor.name),je==="Map"||je==="Set")return Array.from(je);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return ie(ye,Ve)}}(0,q.setTwoToneColor)(w.blue.primary);var Le=$.forwardRef(function(ye,Ve){var je=ye.className,Et=ye.icon,Oe=ye.spin,Qe=ye.rotate,ne=ye.tabIndex,We=ye.onClick,oe=ye.twoToneColor,Fe=Be(ye,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),st=$.useContext(W.default),Ce=st.prefixCls,De=Ce===void 0?"anticon":Ce,tt=st.rootClassName,_e,me=(0,K.default)(tt,De,(_e={},we(_e,"".concat(De,"-").concat(Et.name),!!Et.name),we(_e,"".concat(De,"-spin"),!!Oe||Et.name==="loading"),_e),je),Ge=ne;Ge===void 0&&We&&(Ge=-1);var Ze=Qe?{msTransform:"rotate(".concat(Qe,"deg)"),transform:"rotate(".concat(Qe,"deg)")}:void 0,pt=it((0,Q.normalizeTwoToneColors)(oe),2),Ht=pt[0],Je=pt[1];return $.createElement("span",ze(ge({role:"img","aria-label":Et.name},Fe),{ref:Ve,tabIndex:Ge,onClick:We,className:me}),$.createElement(j.default,{icon:Et,primaryColor:Ht,secondaryColor:Je,style:Ze}))});Le.displayName="AntdIcon",Le.getTwoToneColor=q.getTwoToneColor,Le.setTwoToneColor=q.setTwoToneColor;var Se=Le},13357:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return w}});var $=k(67294),K=(0,$.createContext)({}),w=K},46648:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return E}});var $=j(k(67294)),K=k(49458);function w(ge,be,ze){return be in ge?Object.defineProperty(ge,be,{value:ze,enumerable:!0,configurable:!0,writable:!0}):ge[be]=ze,ge}function W(ge){if(typeof WeakMap!="function")return null;var be=new WeakMap,ze=new WeakMap;return(W=function(Be){return Be?ze:be})(ge)}function j(ge,be){if(!be&&ge&&ge.__esModule)return ge;if(ge===null||typeof ge!="object"&&typeof ge!="function")return{default:ge};var ze=W(be);if(ze&&ze.has(ge))return ze.get(ge);var Be={},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var it in ge)if(it!=="default"&&Object.prototype.hasOwnProperty.call(ge,it)){var ht=Ue?Object.getOwnPropertyDescriptor(ge,it):null;ht&&(ht.get||ht.set)?Object.defineProperty(Be,it,ht):Be[it]=ge[it]}return Be.default=ge,ze&&ze.set(ge,Be),Be}function q(ge){for(var be=1;be<arguments.length;be++){var ze=arguments[be]!=null?arguments[be]:{},Be=Object.keys(ze);typeof Object.getOwnPropertySymbols=="function"&&(Be=Be.concat(Object.getOwnPropertySymbols(ze).filter(function(Ue){return Object.getOwnPropertyDescriptor(ze,Ue).enumerable}))),Be.forEach(function(Ue){w(ge,Ue,ze[Ue])})}return ge}function Q(ge,be){var ze=Object.keys(ge);if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(ge);be&&(Be=Be.filter(function(Ue){return Object.getOwnPropertyDescriptor(ge,Ue).enumerable})),ze.push.apply(ze,Be)}return ze}function ie(ge,be){return be=be!=null?be:{},Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(be)):Q(Object(be)).forEach(function(ze){Object.defineProperty(ge,ze,Object.getOwnPropertyDescriptor(be,ze))}),ge}function te(ge,be){if(ge==null)return{};var ze=we(ge,be),Be,Ue;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(ge);for(Ue=0;Ue<it.length;Ue++)Be=it[Ue],!(be.indexOf(Be)>=0)&&Object.prototype.propertyIsEnumerable.call(ge,Be)&&(ze[Be]=ge[Be])}return ze}function we(ge,be){if(ge==null)return{};var ze={},Be=Object.keys(ge),Ue,it;for(it=0;it<Be.length;it++)Ue=Be[it],!(be.indexOf(Ue)>=0)&&(ze[Ue]=ge[Ue]);return ze}var fe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function ce(ge){var be=ge.primaryColor,ze=ge.secondaryColor;fe.primaryColor=be,fe.secondaryColor=ze||(0,K.getSecondaryColor)(be),fe.calculated=!!ze}function J(){return q({},fe)}var M=function(ge){var be=ge.icon,ze=ge.className,Be=ge.onClick,Ue=ge.style,it=ge.primaryColor,ht=ge.secondaryColor,Le=te(ge,["icon","className","onClick","style","primaryColor","secondaryColor"]),Se=$.useRef(),ye=fe;if(it&&(ye={primaryColor:it,secondaryColor:ht||(0,K.getSecondaryColor)(it)}),(0,K.useInsertStyles)(Se),(0,K.warning)((0,K.isIconDefinition)(be),"icon should be icon definiton, but got ".concat(be)),!(0,K.isIconDefinition)(be))return null;var Ve=be;return Ve&&typeof Ve.icon=="function"&&(Ve=ie(q({},Ve),{icon:Ve.icon(ye.primaryColor,ye.secondaryColor)})),(0,K.generate)(Ve.icon,"svg-".concat(Ve.name),ie(q({className:ze,onClick:Be,style:Ue,"data-icon":Ve.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Le),{ref:Se}))};M.displayName="IconReact",M.getTwoToneColors=J,M.setTwoToneColors=ce;var E=M},46338:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function $(J,M){for(var E in M)Object.defineProperty(J,E,{enumerable:!0,get:M[E]})}$(N,{setTwoToneColor:function(){return fe},getTwoToneColor:function(){return ce}});var K=q(k(46648)),w=k(49458);function W(J,M){(M==null||M>J.length)&&(M=J.length);for(var E=0,ge=new Array(M);E<M;E++)ge[E]=J[E];return ge}function j(J){if(Array.isArray(J))return J}function q(J){return J&&J.__esModule?J:{default:J}}function Q(J,M){var E=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(E!=null){var ge=[],be=!0,ze=!1,Be,Ue;try{for(E=E.call(J);!(be=(Be=E.next()).done)&&(ge.push(Be.value),!(M&&ge.length===M));be=!0);}catch(it){ze=!0,Ue=it}finally{try{!be&&E.return!=null&&E.return()}finally{if(ze)throw Ue}}return ge}}function ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function te(J,M){return j(J)||Q(J,M)||we(J,M)||ie()}function we(J,M){if(J){if(typeof J=="string")return W(J,M);var E=Object.prototype.toString.call(J).slice(8,-1);if(E==="Object"&&J.constructor&&(E=J.constructor.name),E==="Map"||E==="Set")return Array.from(E);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return W(J,M)}}function fe(J){var M=te((0,w.normalizeTwoToneColors)(J),2),E=M[0],ge=M[1];return K.default.setTwoToneColors({primaryColor:E,secondaryColor:ge})}function ce(){var J=K.default.getTwoToneColors();return J.calculated?[J.primaryColor,J.secondaryColor]:J.primaryColor}},71079:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ce}});var $=Q(k(67294)),K=j(k(25330)),w=j(k(26545));function W(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var Be=be?Object.getOwnPropertyDescriptor(J,ze):null;Be&&(Be.get||Be.set)?Object.defineProperty(ge,ze,Be):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(be){return Object.getOwnPropertyDescriptor(E,be).enumerable}))),ge.forEach(function(be){W(J,be,E[be])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(be){return Object.getOwnPropertyDescriptor(J,be).enumerable})),E.push.apply(E,ge)}return E}function we(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var fe=function(J,M){return $.createElement(w.default,we(ie({},J),{ref:M,icon:K.default}))},ce=$.forwardRef(fe)},72225:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ce}});var $=Q(k(67294)),K=j(k(67303)),w=j(k(26545));function W(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var Be=be?Object.getOwnPropertyDescriptor(J,ze):null;Be&&(Be.get||Be.set)?Object.defineProperty(ge,ze,Be):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(be){return Object.getOwnPropertyDescriptor(E,be).enumerable}))),ge.forEach(function(be){W(J,be,E[be])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(be){return Object.getOwnPropertyDescriptor(J,be).enumerable})),E.push.apply(E,ge)}return E}function we(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var fe=function(J,M){return $.createElement(w.default,we(ie({},J),{ref:M,icon:K.default}))},ce=$.forwardRef(fe)},29539:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ce}});var $=Q(k(67294)),K=j(k(83647)),w=j(k(26545));function W(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var Be=be?Object.getOwnPropertyDescriptor(J,ze):null;Be&&(Be.get||Be.set)?Object.defineProperty(ge,ze,Be):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(be){return Object.getOwnPropertyDescriptor(E,be).enumerable}))),ge.forEach(function(be){W(J,be,E[be])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(be){return Object.getOwnPropertyDescriptor(J,be).enumerable})),E.push.apply(E,ge)}return E}function we(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var fe=function(J,M){return $.createElement(w.default,we(ie({},J),{ref:M,icon:K.default}))},ce=$.forwardRef(fe)},54825:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ce}});var $=Q(k(67294)),K=j(k(57583)),w=j(k(26545));function W(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var Be=be?Object.getOwnPropertyDescriptor(J,ze):null;Be&&(Be.get||Be.set)?Object.defineProperty(ge,ze,Be):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(be){return Object.getOwnPropertyDescriptor(E,be).enumerable}))),ge.forEach(function(be){W(J,be,E[be])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(be){return Object.getOwnPropertyDescriptor(J,be).enumerable})),E.push.apply(E,ge)}return E}function we(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var fe=function(J,M){return $.createElement(w.default,we(ie({},J),{ref:M,icon:K.default}))},ce=$.forwardRef(fe)},43552:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return ce}});var $=Q(k(67294)),K=j(k(29260)),w=j(k(26545));function W(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var Be=be?Object.getOwnPropertyDescriptor(J,ze):null;Be&&(Be.get||Be.set)?Object.defineProperty(ge,ze,Be):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(be){return Object.getOwnPropertyDescriptor(E,be).enumerable}))),ge.forEach(function(be){W(J,be,E[be])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(be){return Object.getOwnPropertyDescriptor(J,be).enumerable})),E.push.apply(E,ge)}return E}function we(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var fe=function(J,M){return $.createElement(w.default,we(ie({},J),{ref:M,icon:K.default}))},ce=$.forwardRef(fe)},49458:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function $(Le,Se){for(var ye in Se)Object.defineProperty(Le,ye,{enumerable:!0,get:Se[ye]})}$(N,{warning:function(){return M},isIconDefinition:function(){return E},normalizeAttrs:function(){return ge},generate:function(){return be},getSecondaryColor:function(){return ze},normalizeTwoToneColors:function(){return Be},svgBaseProps:function(){return Ue},iconStyles:function(){return it},useInsertStyles:function(){return ht}});var K=k(78589),w=k(93399),W=k(63298),j=te(k(45520)),q=fe(k(67294)),Q=te(k(13357));function ie(Le,Se,ye){return Se in Le?Object.defineProperty(Le,Se,{value:ye,enumerable:!0,configurable:!0,writable:!0}):Le[Se]=ye,Le}function te(Le){return Le&&Le.__esModule?Le:{default:Le}}function we(Le){if(typeof WeakMap!="function")return null;var Se=new WeakMap,ye=new WeakMap;return(we=function(Ve){return Ve?ye:Se})(Le)}function fe(Le,Se){if(!Se&&Le&&Le.__esModule)return Le;if(Le===null||typeof Le!="object"&&typeof Le!="function")return{default:Le};var ye=we(Se);if(ye&&ye.has(Le))return ye.get(Le);var Ve={},je=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in Le)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(Le,Et)){var Oe=je?Object.getOwnPropertyDescriptor(Le,Et):null;Oe&&(Oe.get||Oe.set)?Object.defineProperty(Ve,Et,Oe):Ve[Et]=Le[Et]}return Ve.default=Le,ye&&ye.set(Le,Ve),Ve}function ce(Le){for(var Se=1;Se<arguments.length;Se++){var ye=arguments[Se]!=null?arguments[Se]:{},Ve=Object.keys(ye);typeof Object.getOwnPropertySymbols=="function"&&(Ve=Ve.concat(Object.getOwnPropertySymbols(ye).filter(function(je){return Object.getOwnPropertyDescriptor(ye,je).enumerable}))),Ve.forEach(function(je){ie(Le,je,ye[je])})}return Le}function J(Le){return Le.replace(/-(.)/g,function(Se,ye){return ye.toUpperCase()})}function M(Le,Se){(0,j.default)(Le,"[@ant-design/icons] ".concat(Se))}function E(Le){return typeof Le=="object"&&typeof Le.name=="string"&&typeof Le.theme=="string"&&(typeof Le.icon=="object"||typeof Le.icon=="function")}function ge(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Le).reduce(function(Se,ye){var Ve=Le[ye];switch(ye){case"class":Se.className=Ve,delete Se.class;break;default:delete Se[ye],Se[J(ye)]=Ve}return Se},{})}function be(Le,Se,ye){return ye?q.default.createElement(Le.tag,ce({key:Se},ge(Le.attrs),ye),(Le.children||[]).map(function(Ve,je){return be(Ve,"".concat(Se,"-").concat(Le.tag,"-").concat(je))})):q.default.createElement(Le.tag,ce({key:Se},ge(Le.attrs)),(Le.children||[]).map(function(Ve,je){return be(Ve,"".concat(Se,"-").concat(Le.tag,"-").concat(je))}))}function ze(Le){return(0,K.generate)(Le)[0]}function Be(Le){return Le?Array.isArray(Le)?Le:[Le]:[]}var Ue={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},it=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ht=function(Le){var Se=(0,q.useContext)(Q.default),ye=Se.csp,Ve=Se.prefixCls,je=it;Ve&&(je=je.replace(/anticon/g,Ve)),(0,q.useEffect)(function(){var Et=Le.current,Oe=(0,W.getShadowRoot)(Et);(0,w.updateCSS)(je,"@ant-design-icons",{prepend:!0,csp:ye,attachTo:Oe})},[])}},56645:function(ct,N){(function(k,$){$(N)})(this,function(k){"use strict";function $(je,Et){return K(je)||w(je,Et)||W()}function K(je){if(Array.isArray(je))return je}function w(je,Et){var Oe=[],Qe=!0,ne=!1,We=void 0;try{for(var oe=je[Symbol.iterator](),Fe;!(Qe=(Fe=oe.next()).done)&&(Oe.push(Fe.value),!(Et&&Oe.length===Et));Qe=!0);}catch(st){ne=!0,We=st}finally{try{!Qe&&oe.return!=null&&oe.return()}finally{if(ne)throw We}}return Oe}function W(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function j(je,Et,Oe,Qe){je=je.filter(function(Ge,Ze){var pt=Et(Ge,Ze),Ht=Oe(Ge,Ze);return pt!=null&&isFinite(pt)&&Ht!=null&&isFinite(Ht)}),Qe&&je.sort(function(Ge,Ze){return Et(Ge)-Et(Ze)});for(var ne=je.length,We=new Float64Array(ne),oe=new Float64Array(ne),Fe=0,st=0,Ce,De,tt,_e=0;_e<ne;)tt=je[_e],We[_e]=Ce=+Et(tt,_e,je),oe[_e]=De=+Oe(tt,_e,je),++_e,Fe+=(Ce-Fe)/_e,st+=(De-st)/_e;for(var me=0;me<ne;++me)We[me]-=Fe,oe[me]-=st;return[We,oe,Fe,st]}function q(je,Et,Oe,Qe){for(var ne=0,We=0,oe=je.length;We<oe;We++){var Fe=je[We],st=+Et(Fe,We,je),Ce=+Oe(Fe,We,je);st!=null&&isFinite(st)&&Ce!=null&&isFinite(Ce)&&Qe(st,Ce,ne++)}}function Q(je,Et,Oe,Qe,ne){var We=0,oe=0;return q(je,Et,Oe,function(Fe,st){var Ce=st-ne(Fe),De=st-Qe;We+=Ce*Ce,oe+=De*De}),1-We/oe}function ie(je){return Math.atan2(je[1][1]-je[0][1],je[1][0]-je[0][0])*180/Math.PI}function te(je){return[(je[0][0]+je[1][0])/2,(je[0][1]+je[1][1])/2]}function we(je,Et,Oe){for(var Qe=Math.log(Et-je)*Math.LOG10E+1|0,ne=1*Math.pow(10,-Qe/2-1),We=1e4,oe=[st(je),st(Et)],Fe=0;Ce(oe)&&Fe<We;);return oe;function st(De){return[De,Oe(De)]}function Ce(De){Fe++;for(var tt=De.length,_e=!1,me=0;me<tt-1;me++){var Ge=De[me],Ze=De[me+1],pt=te([Ge,Ze]),Ht=st(pt[0]),Je=ie([Ge,pt]),$e=ie([Ge,Ht]),Te=Math.abs(Je-$e);Te>ne&&(De.splice(me+1,0,Ht),_e=!0)}return _e}}function fe(je,Et,Oe,Qe){var ne=Qe-je*je,We=Math.abs(ne)<1e-24?0:(Oe-je*Et)/ne,oe=Et-We*je;return[oe,We]}function ce(){var je=function(We){return We[0]},Et=function(We){return We[1]},Oe;function Qe(ne){var We=0,oe=0,Fe=0,st=0,Ce=0,De=0,tt=Oe?+Oe[0]:1/0,_e=Oe?+Oe[1]:-1/0;q(ne,je,Et,function($e,Te){var Ye=Math.log(Te),ft=$e*Te;++We,oe+=(Te-oe)/We,st+=(ft-st)/We,De+=($e*ft-De)/We,Fe+=(Te*Ye-Fe)/We,Ce+=(ft*Ye-Ce)/We,Oe||($e<tt&&(tt=$e),$e>_e&&(_e=$e))});var me=fe(st/oe,Fe/oe,Ce/oe,De/oe),Ge=$(me,2),Ze=Ge[0],pt=Ge[1];Ze=Math.exp(Ze);var Ht=function(Te){return Ze*Math.exp(pt*Te)},Je=we(tt,_e,Ht);return Je.a=Ze,Je.b=pt,Je.predict=Ht,Je.rSquared=Q(ne,je,Et,oe,Ht),Je}return Qe.domain=function(ne){return arguments.length?(Oe=ne,Qe):Oe},Qe.x=function(ne){return arguments.length?(je=ne,Qe):je},Qe.y=function(ne){return arguments.length?(Et=ne,Qe):Et},Qe}function J(){var je=function(We){return We[0]},Et=function(We){return We[1]},Oe;function Qe(ne){var We=0,oe=0,Fe=0,st=0,Ce=0,De=Oe?+Oe[0]:1/0,tt=Oe?+Oe[1]:-1/0;q(ne,je,Et,function(Je,$e){++We,oe+=(Je-oe)/We,Fe+=($e-Fe)/We,st+=(Je*$e-st)/We,Ce+=(Je*Je-Ce)/We,Oe||(Je<De&&(De=Je),Je>tt&&(tt=Je))});var _e=fe(oe,Fe,st,Ce),me=$(_e,2),Ge=me[0],Ze=me[1],pt=function($e){return Ze*$e+Ge},Ht=[[De,pt(De)],[tt,pt(tt)]];return Ht.a=Ze,Ht.b=Ge,Ht.predict=pt,Ht.rSquared=Q(ne,je,Et,Fe,pt),Ht}return Qe.domain=function(ne){return arguments.length?(Oe=ne,Qe):Oe},Qe.x=function(ne){return arguments.length?(je=ne,Qe):je},Qe.y=function(ne){return arguments.length?(Et=ne,Qe):Et},Qe}function M(je){je.sort(function(Oe,Qe){return Oe-Qe});var Et=je.length/2;return Et%1===0?(je[Et-1]+je[Et])/2:je[Math.floor(Et)]}var E=2,ge=1e-12;function be(){var je=function(We){return We[0]},Et=function(We){return We[1]},Oe=.3;function Qe(ne){for(var We=j(ne,je,Et,!0),oe=$(We,4),Fe=oe[0],st=oe[1],Ce=oe[2],De=oe[3],tt=Fe.length,_e=Math.max(2,~~(Oe*tt)),me=new Float64Array(tt),Ge=new Float64Array(tt),Ze=new Float64Array(tt).fill(1),pt=-1;++pt<=E;){for(var Ht=[0,_e-1],Je=0;Je<tt;++Je){for(var $e=Fe[Je],Te=Ht[0],Ye=Ht[1],ft=$e-Fe[Te]>Fe[Ye]-$e?Te:Ye,ke=0,Ne=0,dt=0,Pt=0,rr=0,xr=1/Math.abs(Fe[ft]-$e||1),ut=Te;ut<=Ye;++ut){var nn=Fe[ut],Gr=st[ut],Xr=ze(Math.abs($e-nn)*xr)*Ze[ut],Nt=nn*Xr;ke+=Xr,Ne+=Nt,dt+=Gr*Xr,Pt+=Gr*Nt,rr+=nn*Nt}var Yt=fe(Ne/ke,dt/ke,Pt/ke,rr/ke),sr=$(Yt,2),Dt=sr[0],Qt=sr[1];me[Je]=Dt+Qt*$e,Ge[Je]=Math.abs(st[Je]-me[Je]),Be(Fe,Je+1,Ht)}if(pt===E)break;var Sr=M(Ge);if(Math.abs(Sr)<ge)break;for(var Er=0,Fr,zr;Er<tt;++Er)Fr=Ge[Er]/(6*Sr),Ze[Er]=Fr>=1?ge:(zr=1-Fr*Fr)*zr}return Ue(Fe,me,Ce,De)}return Qe.bandwidth=function(ne){return arguments.length?(Oe=ne,Qe):Oe},Qe.x=function(ne){return arguments.length?(je=ne,Qe):je},Qe.y=function(ne){return arguments.length?(Et=ne,Qe):Et},Qe}function ze(je){return(je=1-je*je*je)*je*je}function Be(je,Et,Oe){var Qe=je[Et],ne=Oe[0],We=Oe[1]+1;if(!(We>=je.length))for(;Et>ne&&je[We]-Qe<=Qe-je[ne];)Oe[0]=++ne,Oe[1]=We,++We}function Ue(je,Et,Oe,Qe){for(var ne=je.length,We=[],oe=0,Fe=0,st=[],Ce;oe<ne;++oe)Ce=je[oe]+Oe,st[0]===Ce?st[1]+=(Et[oe]-st[1])/++Fe:(Fe=0,st[1]+=Qe,st=[Ce,Et[oe]],We.push(st));return st[1]+=Qe,We}function it(){var je=function(oe){return oe[0]},Et=function(oe){return oe[1]},Oe=Math.E,Qe;function ne(We){var oe=0,Fe=0,st=0,Ce=0,De=0,tt=Qe?+Qe[0]:1/0,_e=Qe?+Qe[1]:-1/0,me=Math.log(Oe);q(We,je,Et,function(Te,Ye){var ft=Math.log(Te)/me;++oe,Fe+=(ft-Fe)/oe,st+=(Ye-st)/oe,Ce+=(ft*Ye-Ce)/oe,De+=(ft*ft-De)/oe,Qe||(Te<tt&&(tt=Te),Te>_e&&(_e=Te))});var Ge=fe(Fe,st,Ce,De),Ze=$(Ge,2),pt=Ze[0],Ht=Ze[1],Je=function(Ye){return Ht*Math.log(Ye)/me+pt},$e=we(tt,_e,Je);return $e.a=Ht,$e.b=pt,$e.predict=Je,$e.rSquared=Q(We,je,Et,st,Je),$e}return ne.domain=function(We){return arguments.length?(Qe=We,ne):Qe},ne.x=function(We){return arguments.length?(je=We,ne):je},ne.y=function(We){return arguments.length?(Et=We,ne):Et},ne.base=function(We){return arguments.length?(Oe=We,ne):Oe},ne}function ht(){var je=function(We){return We[0]},Et=function(We){return We[1]},Oe;function Qe(ne){var We=j(ne,je,Et),oe=$(We,4),Fe=oe[0],st=oe[1],Ce=oe[2],De=oe[3],tt=Fe.length,_e=0,me=0,Ge=0,Ze=0,pt=0,Ht,Je,$e,Te;for(Ht=0;Ht<tt;)Je=Fe[Ht],$e=st[Ht++],Te=Je*Je,_e+=(Te-_e)/Ht,me+=(Te*Je-me)/Ht,Ge+=(Te*Te-Ge)/Ht,Ze+=(Je*$e-Ze)/Ht,pt+=(Te*$e-pt)/Ht;var Ye=0,ft=0,ke=Oe?+Oe[0]:1/0,Ne=Oe?+Oe[1]:-1/0;q(ne,je,Et,function(Xr,Nt){ft++,Ye+=(Nt-Ye)/ft,Oe||(Xr<ke&&(ke=Xr),Xr>Ne&&(Ne=Xr))});var dt=Ge-_e*_e,Pt=_e*dt-me*me,rr=(pt*_e-Ze*me)/Pt,xr=(Ze*dt-pt*me)/Pt,ut=-rr*_e,nn=function(Nt){return Nt=Nt-Ce,rr*Nt*Nt+xr*Nt+ut+De},Gr=we(ke,Ne,nn);return Gr.a=rr,Gr.b=xr-2*rr*Ce,Gr.c=ut-xr*Ce+rr*Ce*Ce+De,Gr.predict=nn,Gr.rSquared=Q(ne,je,Et,Ye,nn),Gr}return Qe.domain=function(ne){return arguments.length?(Oe=ne,Qe):Oe},Qe.x=function(ne){return arguments.length?(je=ne,Qe):je},Qe.y=function(ne){return arguments.length?(Et=ne,Qe):Et},Qe}function Le(){var je=function(oe){return oe[0]},Et=function(oe){return oe[1]},Oe=3,Qe;function ne(We){if(Oe===1){var oe=J().x(je).y(Et).domain(Qe)(We);return oe.coefficients=[oe.b,oe.a],delete oe.a,delete oe.b,oe}if(Oe===2){var Fe=ht().x(je).y(Et).domain(Qe)(We);return Fe.coefficients=[Fe.c,Fe.b,Fe.a],delete Fe.a,delete Fe.b,delete Fe.c,Fe}var st=j(We,je,Et),Ce=$(st,4),De=Ce[0],tt=Ce[1],_e=Ce[2],me=Ce[3],Ge=De.length,Ze=[],pt=[],Ht=Oe+1,Je=0,$e=0,Te=Qe?+Qe[0]:1/0,Ye=Qe?+Qe[1]:-1/0;q(We,je,Et,function(nn,Gr){++$e,Je+=(Gr-Je)/$e,Qe||(nn<Te&&(Te=nn),nn>Ye&&(Ye=nn))});var ft,ke,Ne,dt,Pt;for(ft=0;ft<Ht;++ft){for(Ne=0,dt=0;Ne<Ge;++Ne)dt+=Math.pow(De[Ne],ft)*tt[Ne];for(Ze.push(dt),Pt=new Float64Array(Ht),ke=0;ke<Ht;++ke){for(Ne=0,dt=0;Ne<Ge;++Ne)dt+=Math.pow(De[Ne],ft+ke);Pt[ke]=dt}pt.push(Pt)}pt.push(Ze);var rr=ye(pt),xr=function(Gr){Gr-=_e;var Xr=me+rr[0]+rr[1]*Gr+rr[2]*Gr*Gr;for(ft=3;ft<Ht;++ft)Xr+=rr[ft]*Math.pow(Gr,ft);return Xr},ut=we(Te,Ye,xr);return ut.coefficients=Se(Ht,rr,-_e,me),ut.predict=xr,ut.rSquared=Q(We,je,Et,Je,xr),ut}return ne.domain=function(We){return arguments.length?(Qe=We,ne):Qe},ne.x=function(We){return arguments.length?(je=We,ne):je},ne.y=function(We){return arguments.length?(Et=We,ne):Et},ne.order=function(We){return arguments.length?(Oe=We,ne):Oe},ne}function Se(je,Et,Oe,Qe){var ne=Array(je),We,oe,Fe,st;for(We=0;We<je;++We)ne[We]=0;for(We=je-1;We>=0;--We)for(Fe=Et[We],st=1,ne[We]+=Fe,oe=1;oe<=We;++oe)st*=(We+1-oe)/oe,ne[We-oe]+=Fe*Math.pow(Oe,oe)*st;return ne[0]+=Qe,ne}function ye(je){var Et=je.length-1,Oe=[],Qe,ne,We,oe,Fe;for(Qe=0;Qe<Et;++Qe){for(oe=Qe,ne=Qe+1;ne<Et;++ne)Math.abs(je[Qe][ne])>Math.abs(je[Qe][oe])&&(oe=ne);for(We=Qe;We<Et+1;++We)Fe=je[We][Qe],je[We][Qe]=je[We][oe],je[We][oe]=Fe;for(ne=Qe+1;ne<Et;++ne)for(We=Et;We>=Qe;We--)je[We][ne]-=je[We][Qe]*je[Qe][ne]/je[Qe][Qe]}for(ne=Et-1;ne>=0;--ne){for(Fe=0,We=ne+1;We<Et;++We)Fe+=je[We][ne]*Oe[We];Oe[ne]=(je[Et][ne]-Fe)/je[ne][ne]}return Oe}function Ve(){var je=function(We){return We[0]},Et=function(We){return We[1]},Oe;function Qe(ne){var We=0,oe=0,Fe=0,st=0,Ce=0,De=0,tt=Oe?+Oe[0]:1/0,_e=Oe?+Oe[1]:-1/0;q(ne,je,Et,function($e,Te){var Ye=Math.log($e),ft=Math.log(Te);++We,oe+=(Ye-oe)/We,Fe+=(ft-Fe)/We,st+=(Ye*ft-st)/We,Ce+=(Ye*Ye-Ce)/We,De+=(Te-De)/We,Oe||($e<tt&&(tt=$e),$e>_e&&(_e=$e))});var me=fe(oe,Fe,st,Ce),Ge=$(me,2),Ze=Ge[0],pt=Ge[1];Ze=Math.exp(Ze);var Ht=function(Te){return Ze*Math.pow(Te,pt)},Je=we(tt,_e,Ht);return Je.a=Ze,Je.b=pt,Je.predict=Ht,Je.rSquared=Q(ne,je,Et,De,Ht),Je}return Qe.domain=function(ne){return arguments.length?(Oe=ne,Qe):Oe},Qe.x=function(ne){return arguments.length?(je=ne,Qe):je},Qe.y=function(ne){return arguments.length?(Et=ne,Qe):Et},Qe}k.regressionExp=ce,k.regressionLinear=J,k.regressionLoess=be,k.regressionLog=it,k.regressionPoly=Le,k.regressionPow=Ve,k.regressionQuad=ht,Object.defineProperty(k,"__esModule",{value:!0})})},43631:function(ct,N,k){"use strict";k.d(N,{qY:function(){return J}});var $=k(34155),K=function(Ue,it,ht){if(ht||arguments.length===2)for(var Le=0,Se=it.length,ye;Le<Se;Le++)(ye||!(Le in it))&&(ye||(ye=Array.prototype.slice.call(it,0,Le)),ye[Le]=it[Le]);return Ue.concat(ye||Array.prototype.slice.call(it))},w=function(){function Ue(it,ht,Le){this.name=it,this.version=ht,this.os=Le,this.type="browser"}return Ue}(),W=function(){function Ue(it){this.version=it,this.type="node",this.name="node",this.os=$.platform}return Ue}(),j=function(){function Ue(it,ht,Le,Se){this.name=it,this.version=ht,this.os=Le,this.bot=Se,this.type="bot-device"}return Ue}(),q=function(){function Ue(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return Ue}(),Q=function(){function Ue(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return Ue}(),ie=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,te=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,we=3,fe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ie]],ce=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function J(Ue){return Ue?ge(Ue):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Q:typeof navigator!="undefined"?ge(navigator.userAgent):ze()}function M(Ue){return Ue!==""&&fe.reduce(function(it,ht){var Le=ht[0],Se=ht[1];if(it)return it;var ye=Se.exec(Ue);return!!ye&&[Le,ye]},!1)}function E(Ue){var it=M(Ue);return it?it[0]:null}function ge(Ue){var it=M(Ue);if(!it)return null;var ht=it[0],Le=it[1];if(ht==="searchbot")return new q;var Se=Le[1]&&Le[1].split(".").join("_").split("_").slice(0,3);Se?Se.length<we&&(Se=K(K([],Se,!0),Be(we-Se.length),!0)):Se=[];var ye=Se.join("."),Ve=be(Ue),je=te.exec(Ue);return je&&je[1]?new j(ht,ye,Ve,je[1]):new w(ht,ye,Ve)}function be(Ue){for(var it=0,ht=ce.length;it<ht;it++){var Le=ce[it],Se=Le[0],ye=Le[1],Ve=ye.exec(Ue);if(Ve)return Se}return null}function ze(){var Ue=typeof $!="undefined"&&$.version;return Ue?new W($.version.slice(1)):null}function Be(Ue){for(var it=[],ht=0;ht<Ue;ht++)it.push("0");return it}},9187:function(ct){"use strict";ct.exports=N,ct.exports.default=N;function N(ne,We,oe){oe=oe||2;var Fe=We&&We.length,st=Fe?We[0]*oe:ne.length,Ce=k(ne,0,st,oe,!0),De=[];if(!Ce||Ce.next===Ce.prev)return De;var tt,_e,me,Ge,Ze,pt,Ht;if(Fe&&(Ce=Q(ne,We,Ce,oe)),ne.length>80*oe){tt=me=ne[0],_e=Ge=ne[1];for(var Je=oe;Je<st;Je+=oe)Ze=ne[Je],pt=ne[Je+1],Ze<tt&&(tt=Ze),pt<_e&&(_e=pt),Ze>me&&(me=Ze),pt>Ge&&(Ge=pt);Ht=Math.max(me-tt,Ge-_e),Ht=Ht!==0?32767/Ht:0}return K(Ce,De,oe,tt,_e,Ht,0),De}function k(ne,We,oe,Fe,st){var Ce,De;if(st===Qe(ne,We,oe,Fe)>0)for(Ce=We;Ce<oe;Ce+=Fe)De=je(Ce,ne[Ce],ne[Ce+1],De);else for(Ce=oe-Fe;Ce>=We;Ce-=Fe)De=je(Ce,ne[Ce],ne[Ce+1],De);return De&&Be(De,De.next)&&(Et(De),De=De.next),De}function $(ne,We){if(!ne)return ne;We||(We=ne);var oe=ne,Fe;do if(Fe=!1,!oe.steiner&&(Be(oe,oe.next)||ze(oe.prev,oe,oe.next)===0)){if(Et(oe),oe=We=oe.prev,oe===oe.next)break;Fe=!0}else oe=oe.next;while(Fe||oe!==We);return We}function K(ne,We,oe,Fe,st,Ce,De){if(ne){!De&&Ce&&ce(ne,Fe,st,Ce);for(var tt=ne,_e,me;ne.prev!==ne.next;){if(_e=ne.prev,me=ne.next,Ce?W(ne,Fe,st,Ce):w(ne)){We.push(_e.i/oe|0),We.push(ne.i/oe|0),We.push(me.i/oe|0),Et(ne),ne=me.next,tt=me.next;continue}if(ne=me,ne===tt){De?De===1?(ne=j($(ne),We,oe),K(ne,We,oe,Fe,st,Ce,2)):De===2&&q(ne,We,oe,Fe,st,Ce):K($(ne),We,oe,Fe,st,Ce,1);break}}}}function w(ne){var We=ne.prev,oe=ne,Fe=ne.next;if(ze(We,oe,Fe)>=0)return!1;for(var st=We.x,Ce=oe.x,De=Fe.x,tt=We.y,_e=oe.y,me=Fe.y,Ge=st<Ce?st<De?st:De:Ce<De?Ce:De,Ze=tt<_e?tt<me?tt:me:_e<me?_e:me,pt=st>Ce?st>De?st:De:Ce>De?Ce:De,Ht=tt>_e?tt>me?tt:me:_e>me?_e:me,Je=Fe.next;Je!==We;){if(Je.x>=Ge&&Je.x<=pt&&Je.y>=Ze&&Je.y<=Ht&&ge(st,tt,Ce,_e,De,me,Je.x,Je.y)&&ze(Je.prev,Je,Je.next)>=0)return!1;Je=Je.next}return!0}function W(ne,We,oe,Fe){var st=ne.prev,Ce=ne,De=ne.next;if(ze(st,Ce,De)>=0)return!1;for(var tt=st.x,_e=Ce.x,me=De.x,Ge=st.y,Ze=Ce.y,pt=De.y,Ht=tt<_e?tt<me?tt:me:_e<me?_e:me,Je=Ge<Ze?Ge<pt?Ge:pt:Ze<pt?Ze:pt,$e=tt>_e?tt>me?tt:me:_e>me?_e:me,Te=Ge>Ze?Ge>pt?Ge:pt:Ze>pt?Ze:pt,Ye=M(Ht,Je,We,oe,Fe),ft=M($e,Te,We,oe,Fe),ke=ne.prevZ,Ne=ne.nextZ;ke&&ke.z>=Ye&&Ne&&Ne.z<=ft;){if(ke.x>=Ht&&ke.x<=$e&&ke.y>=Je&&ke.y<=Te&&ke!==st&&ke!==De&&ge(tt,Ge,_e,Ze,me,pt,ke.x,ke.y)&&ze(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,Ne.x>=Ht&&Ne.x<=$e&&Ne.y>=Je&&Ne.y<=Te&&Ne!==st&&Ne!==De&&ge(tt,Ge,_e,Ze,me,pt,Ne.x,Ne.y)&&ze(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;ke&&ke.z>=Ye;){if(ke.x>=Ht&&ke.x<=$e&&ke.y>=Je&&ke.y<=Te&&ke!==st&&ke!==De&&ge(tt,Ge,_e,Ze,me,pt,ke.x,ke.y)&&ze(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;Ne&&Ne.z<=ft;){if(Ne.x>=Ht&&Ne.x<=$e&&Ne.y>=Je&&Ne.y<=Te&&Ne!==st&&Ne!==De&&ge(tt,Ge,_e,Ze,me,pt,Ne.x,Ne.y)&&ze(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function j(ne,We,oe){var Fe=ne;do{var st=Fe.prev,Ce=Fe.next.next;!Be(st,Ce)&&Ue(st,Fe,Fe.next,Ce)&&Se(st,Ce)&&Se(Ce,st)&&(We.push(st.i/oe|0),We.push(Fe.i/oe|0),We.push(Ce.i/oe|0),Et(Fe),Et(Fe.next),Fe=ne=Ce),Fe=Fe.next}while(Fe!==ne);return $(Fe)}function q(ne,We,oe,Fe,st,Ce){var De=ne;do{for(var tt=De.next.next;tt!==De.prev;){if(De.i!==tt.i&&be(De,tt)){var _e=Ve(De,tt);De=$(De,De.next),_e=$(_e,_e.next),K(De,We,oe,Fe,st,Ce,0),K(_e,We,oe,Fe,st,Ce,0);return}tt=tt.next}De=De.next}while(De!==ne)}function Q(ne,We,oe,Fe){var st=[],Ce,De,tt,_e,me;for(Ce=0,De=We.length;Ce<De;Ce++)tt=We[Ce]*Fe,_e=Ce<De-1?We[Ce+1]*Fe:ne.length,me=k(ne,tt,_e,Fe,!1),me===me.next&&(me.steiner=!0),st.push(E(me));for(st.sort(ie),Ce=0;Ce<st.length;Ce++)oe=te(st[Ce],oe);return oe}function ie(ne,We){return ne.x-We.x}function te(ne,We){var oe=we(ne,We);if(!oe)return We;var Fe=Ve(oe,ne);return $(Fe,Fe.next),$(oe,oe.next)}function we(ne,We){var oe=We,Fe=ne.x,st=ne.y,Ce=-1/0,De;do{if(st<=oe.y&&st>=oe.next.y&&oe.next.y!==oe.y){var tt=oe.x+(st-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(tt<=Fe&&tt>Ce&&(Ce=tt,De=oe.x<oe.next.x?oe:oe.next,tt===Fe))return De}oe=oe.next}while(oe!==We);if(!De)return null;var _e=De,me=De.x,Ge=De.y,Ze=1/0,pt;oe=De;do Fe>=oe.x&&oe.x>=me&&Fe!==oe.x&&ge(st<Ge?Fe:Ce,st,me,Ge,st<Ge?Ce:Fe,st,oe.x,oe.y)&&(pt=Math.abs(st-oe.y)/(Fe-oe.x),Se(oe,ne)&&(pt<Ze||pt===Ze&&(oe.x>De.x||oe.x===De.x&&fe(De,oe)))&&(De=oe,Ze=pt)),oe=oe.next;while(oe!==_e);return De}function fe(ne,We){return ze(ne.prev,ne,We.prev)<0&&ze(We.next,ne,ne.next)<0}function ce(ne,We,oe,Fe){var st=ne;do st.z===0&&(st.z=M(st.x,st.y,We,oe,Fe)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next;while(st!==ne);st.prevZ.nextZ=null,st.prevZ=null,J(st)}function J(ne){var We,oe,Fe,st,Ce,De,tt,_e,me=1;do{for(oe=ne,ne=null,Ce=null,De=0;oe;){for(De++,Fe=oe,tt=0,We=0;We<me&&(tt++,Fe=Fe.nextZ,!!Fe);We++);for(_e=me;tt>0||_e>0&&Fe;)tt!==0&&(_e===0||!Fe||oe.z<=Fe.z)?(st=oe,oe=oe.nextZ,tt--):(st=Fe,Fe=Fe.nextZ,_e--),Ce?Ce.nextZ=st:ne=st,st.prevZ=Ce,Ce=st;oe=Fe}Ce.nextZ=null,me*=2}while(De>1);return ne}function M(ne,We,oe,Fe,st){return ne=(ne-oe)*st|0,We=(We-Fe)*st|0,ne=(ne|ne<<8)&16711935,ne=(ne|ne<<4)&252645135,ne=(ne|ne<<2)&858993459,ne=(ne|ne<<1)&1431655765,We=(We|We<<8)&16711935,We=(We|We<<4)&252645135,We=(We|We<<2)&858993459,We=(We|We<<1)&1431655765,ne|We<<1}function E(ne){var We=ne,oe=ne;do(We.x<oe.x||We.x===oe.x&&We.y<oe.y)&&(oe=We),We=We.next;while(We!==ne);return oe}function ge(ne,We,oe,Fe,st,Ce,De,tt){return(st-De)*(We-tt)>=(ne-De)*(Ce-tt)&&(ne-De)*(Fe-tt)>=(oe-De)*(We-tt)&&(oe-De)*(Ce-tt)>=(st-De)*(Fe-tt)}function be(ne,We){return ne.next.i!==We.i&&ne.prev.i!==We.i&&!Le(ne,We)&&(Se(ne,We)&&Se(We,ne)&&ye(ne,We)&&(ze(ne.prev,ne,We.prev)||ze(ne,We.prev,We))||Be(ne,We)&&ze(ne.prev,ne,ne.next)>0&&ze(We.prev,We,We.next)>0)}function ze(ne,We,oe){return(We.y-ne.y)*(oe.x-We.x)-(We.x-ne.x)*(oe.y-We.y)}function Be(ne,We){return ne.x===We.x&&ne.y===We.y}function Ue(ne,We,oe,Fe){var st=ht(ze(ne,We,oe)),Ce=ht(ze(ne,We,Fe)),De=ht(ze(oe,Fe,ne)),tt=ht(ze(oe,Fe,We));return!!(st!==Ce&&De!==tt||st===0&&it(ne,oe,We)||Ce===0&&it(ne,Fe,We)||De===0&&it(oe,ne,Fe)||tt===0&&it(oe,We,Fe))}function it(ne,We,oe){return We.x<=Math.max(ne.x,oe.x)&&We.x>=Math.min(ne.x,oe.x)&&We.y<=Math.max(ne.y,oe.y)&&We.y>=Math.min(ne.y,oe.y)}function ht(ne){return ne>0?1:ne<0?-1:0}function Le(ne,We){var oe=ne;do{if(oe.i!==ne.i&&oe.next.i!==ne.i&&oe.i!==We.i&&oe.next.i!==We.i&&Ue(oe,oe.next,ne,We))return!0;oe=oe.next}while(oe!==ne);return!1}function Se(ne,We){return ze(ne.prev,ne,ne.next)<0?ze(ne,We,ne.next)>=0&&ze(ne,ne.prev,We)>=0:ze(ne,We,ne.prev)<0||ze(ne,ne.next,We)<0}function ye(ne,We){var oe=ne,Fe=!1,st=(ne.x+We.x)/2,Ce=(ne.y+We.y)/2;do oe.y>Ce!=oe.next.y>Ce&&oe.next.y!==oe.y&&st<(oe.next.x-oe.x)*(Ce-oe.y)/(oe.next.y-oe.y)+oe.x&&(Fe=!Fe),oe=oe.next;while(oe!==ne);return Fe}function Ve(ne,We){var oe=new Oe(ne.i,ne.x,ne.y),Fe=new Oe(We.i,We.x,We.y),st=ne.next,Ce=We.prev;return ne.next=We,We.prev=ne,oe.next=st,st.prev=oe,Fe.next=oe,oe.prev=Fe,Ce.next=Fe,Fe.prev=Ce,Fe}function je(ne,We,oe,Fe){var st=new Oe(ne,We,oe);return Fe?(st.next=Fe.next,st.prev=Fe,Fe.next.prev=st,Fe.next=st):(st.prev=st,st.next=st),st}function Et(ne){ne.next.prev=ne.prev,ne.prev.next=ne.next,ne.prevZ&&(ne.prevZ.nextZ=ne.nextZ),ne.nextZ&&(ne.nextZ.prevZ=ne.prevZ)}function Oe(ne,We,oe){this.i=ne,this.x=We,this.y=oe,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}N.deviation=function(ne,We,oe,Fe){var st=We&&We.length,Ce=st?We[0]*oe:ne.length,De=Math.abs(Qe(ne,0,Ce,oe));if(st)for(var tt=0,_e=We.length;tt<_e;tt++){var me=We[tt]*oe,Ge=tt<_e-1?We[tt+1]*oe:ne.length;De-=Math.abs(Qe(ne,me,Ge,oe))}var Ze=0;for(tt=0;tt<Fe.length;tt+=3){var pt=Fe[tt]*oe,Ht=Fe[tt+1]*oe,Je=Fe[tt+2]*oe;Ze+=Math.abs((ne[pt]-ne[Je])*(ne[Ht+1]-ne[pt+1])-(ne[pt]-ne[Ht])*(ne[Je+1]-ne[pt+1]))}return De===0&&Ze===0?0:Math.abs((Ze-De)/De)};function Qe(ne,We,oe,Fe){for(var st=0,Ce=We,De=oe-Fe;Ce<oe;Ce+=Fe)st+=(ne[De]-ne[Ce])*(ne[Ce+1]+ne[De+1]),De=Ce;return st}N.flatten=function(ne){for(var We=ne[0][0].length,oe={vertices:[],holes:[],dimensions:We},Fe=0,st=0;st<ne.length;st++){for(var Ce=0;Ce<ne[st].length;Ce++)for(var De=0;De<We;De++)oe.vertices.push(ne[st][Ce][De]);st>0&&(Fe+=ne[st-1].length,oe.holes.push(Fe))}return oe}},67709:function(ct){function N($){var K=$.target||$.srcElement;K.__resizeRAF__&&cancelAnimationFrame(K.__resizeRAF__),K.__resizeRAF__=requestAnimationFrame(function(){var w=K.__resizeTrigger__,W=w&&w.__resizeListeners__;W&&W.forEach(function(j){j.call(w,$)})})}var k=function(K,w){var W=this,j=W.document,q,Q=j.attachEvent;typeof navigator!="undefined"&&(q=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function ie(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",N)}if(!K.__resizeListeners__)if(K.__resizeListeners__=[],Q)K.__resizeTrigger__=K,K.attachEvent("onresize",N);else{getComputedStyle(K).position==="static"&&(K.style.position="relative");var te=K.__resizeTrigger__=j.createElement("object");te.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),te.setAttribute("class","resize-sensor"),te.setAttribute("tabindex","-1"),te.setAttribute("title",""),te.__resizeElement__=K,te.onload=ie,te.type="text/html",q&&K.appendChild(te),te.data="about:blank",q||K.appendChild(te)}K.__resizeListeners__.push(w)};ct.exports=typeof window=="undefined"?k:k.bind(window),ct.exports.unbind=function($,K){var w=document.attachEvent,W=$.__resizeListeners__||[];if(K){var j=W.indexOf(K);j!==-1&&W.splice(j,1)}else W=$.__resizeListeners__=[];if(!W.length){if(w)$.detachEvent("onresize",N);else if($.__resizeTrigger__){var q=$.__resizeTrigger__.contentDocument,Q=q&&q.defaultView;Q&&(Q.removeEventListener("resize",N),delete Q.__resizeTrigger__),$.__resizeTrigger__=!$.removeChild($.__resizeTrigger__)}delete $.__resizeListeners__}}},26729:function(ct){"use strict";var N=Object.prototype.hasOwnProperty,k="~";function $(){}Object.create&&($.prototype=Object.create(null),new $().__proto__||(k=!1));function K(q,Q,ie){this.fn=q,this.context=Q,this.once=ie||!1}function w(q,Q,ie,te,we){if(typeof ie!="function")throw new TypeError("The listener must be a function");var fe=new K(ie,te||q,we),ce=k?k+Q:Q;return q._events[ce]?q._events[ce].fn?q._events[ce]=[q._events[ce],fe]:q._events[ce].push(fe):(q._events[ce]=fe,q._eventsCount++),q}function W(q,Q){--q._eventsCount===0?q._events=new $:delete q._events[Q]}function j(){this._events=new $,this._eventsCount=0}j.prototype.eventNames=function(){var Q=[],ie,te;if(this._eventsCount===0)return Q;for(te in ie=this._events)N.call(ie,te)&&Q.push(k?te.slice(1):te);return Object.getOwnPropertySymbols?Q.concat(Object.getOwnPropertySymbols(ie)):Q},j.prototype.listeners=function(Q){var ie=k?k+Q:Q,te=this._events[ie];if(!te)return[];if(te.fn)return[te.fn];for(var we=0,fe=te.length,ce=new Array(fe);we<fe;we++)ce[we]=te[we].fn;return ce},j.prototype.listenerCount=function(Q){var ie=k?k+Q:Q,te=this._events[ie];return te?te.fn?1:te.length:0},j.prototype.emit=function(Q,ie,te,we,fe,ce){var J=k?k+Q:Q;if(!this._events[J])return!1;var M=this._events[J],E=arguments.length,ge,be;if(M.fn){switch(M.once&&this.removeListener(Q,M.fn,void 0,!0),E){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,ie),!0;case 3:return M.fn.call(M.context,ie,te),!0;case 4:return M.fn.call(M.context,ie,te,we),!0;case 5:return M.fn.call(M.context,ie,te,we,fe),!0;case 6:return M.fn.call(M.context,ie,te,we,fe,ce),!0}for(be=1,ge=new Array(E-1);be<E;be++)ge[be-1]=arguments[be];M.fn.apply(M.context,ge)}else{var ze=M.length,Be;for(be=0;be<ze;be++)switch(M[be].once&&this.removeListener(Q,M[be].fn,void 0,!0),E){case 1:M[be].fn.call(M[be].context);break;case 2:M[be].fn.call(M[be].context,ie);break;case 3:M[be].fn.call(M[be].context,ie,te);break;case 4:M[be].fn.call(M[be].context,ie,te,we);break;default:if(!ge)for(Be=1,ge=new Array(E-1);Be<E;Be++)ge[Be-1]=arguments[Be];M[be].fn.apply(M[be].context,ge)}}return!0},j.prototype.on=function(Q,ie,te){return w(this,Q,ie,te,!1)},j.prototype.once=function(Q,ie,te){return w(this,Q,ie,te,!0)},j.prototype.removeListener=function(Q,ie,te,we){var fe=k?k+Q:Q;if(!this._events[fe])return this;if(!ie)return W(this,fe),this;var ce=this._events[fe];if(ce.fn)ce.fn===ie&&(!we||ce.once)&&(!te||ce.context===te)&&W(this,fe);else{for(var J=0,M=[],E=ce.length;J<E;J++)(ce[J].fn!==ie||we&&!ce[J].once||te&&ce[J].context!==te)&&M.push(ce[J]);M.length?this._events[fe]=M.length===1?M[0]:M:W(this,fe)}return this},j.prototype.removeAllListeners=function(Q){var ie;return Q?(ie=k?k+Q:Q,this._events[ie]&&W(this,ie)):(this._events=new $,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=k,j.EventEmitter=j,ct.exports=j},87026:function(ct,N){(function(k,$){$(N)})(this,function(k){"use strict";function $(J,M,E,ge){ge=ge||{};var be=ge.maxIterations||100,ze=ge.tolerance||1e-10,Be=J(M),Ue=J(E),it=E-M;if(Be*Ue>0)throw"Initial bisect points must have opposite signs";if(Be===0)return M;if(Ue===0)return E;for(var ht=0;ht<be;++ht){it/=2;var Le=M+it,Se=J(Le);if(Se*Be>=0&&(M=Le),Math.abs(it)<ze||Se===0)return Le}return M+it}function K(J){for(var M=new Array(J),E=0;E<J;++E)M[E]=0;return M}function w(J,M){return K(J).map(function(){return K(M)})}function W(J,M){for(var E=0,ge=0;ge<J.length;++ge)E+=J[ge]*M[ge];return E}function j(J){return Math.sqrt(W(J,J))}function q(J,M,E){for(var ge=0;ge<M.length;++ge)J[ge]=M[ge]*E}function Q(J,M,E,ge,be){for(var ze=0;ze<J.length;++ze)J[ze]=M*E[ze]+ge*be[ze]}function ie(J,M,E){E=E||{};var ge=E.maxIterations||M.length*200,be=E.nonZeroDelta||1.05,ze=E.zeroDelta||.001,Be=E.minErrorDelta||1e-6,Ue=E.minErrorDelta||1e-5,it=E.rho!==void 0?E.rho:1,ht=E.chi!==void 0?E.chi:2,Le=E.psi!==void 0?E.psi:-.5,Se=E.sigma!==void 0?E.sigma:.5,ye,Ve=M.length,je=new Array(Ve+1);je[0]=M,je[0].fx=J(M),je[0].id=0;for(var Et=0;Et<Ve;++Et){var Oe=M.slice();Oe[Et]=Oe[Et]?Oe[Et]*be:ze,je[Et+1]=Oe,je[Et+1].fx=J(Oe),je[Et+1].id=Et+1}function Qe(Ge){for(var Ze=0;Ze<Ge.length;Ze++)je[Ve][Ze]=Ge[Ze];je[Ve].fx=Ge.fx}for(var ne=function(Ge,Ze){return Ge.fx-Ze.fx},We=M.slice(),oe=M.slice(),Fe=M.slice(),st=M.slice(),Ce=0;Ce<ge;++Ce){if(je.sort(ne),E.history){var De=je.map(function(Ge){var Ze=Ge.slice();return Ze.fx=Ge.fx,Ze.id=Ge.id,Ze});De.sort(function(Ge,Ze){return Ge.id-Ze.id}),E.history.push({x:je[0].slice(),fx:je[0].fx,simplex:De})}for(ye=0,Et=0;Et<Ve;++Et)ye=Math.max(ye,Math.abs(je[0][Et]-je[1][Et]));if(Math.abs(je[0].fx-je[Ve].fx)<Be&&ye<Ue)break;for(Et=0;Et<Ve;++Et){We[Et]=0;for(var tt=0;tt<Ve;++tt)We[Et]+=je[tt][Et];We[Et]/=Ve}var _e=je[Ve];if(Q(oe,1+it,We,-it,_e),oe.fx=J(oe),oe.fx<je[0].fx)Q(st,1+ht,We,-ht,_e),st.fx=J(st),st.fx<oe.fx?Qe(st):Qe(oe);else if(oe.fx>=je[Ve-1].fx){var me=!1;if(oe.fx>_e.fx?(Q(Fe,1+Le,We,-Le,_e),Fe.fx=J(Fe),Fe.fx<_e.fx?Qe(Fe):me=!0):(Q(Fe,1-Le*it,We,Le*it,_e),Fe.fx=J(Fe),Fe.fx<oe.fx?Qe(Fe):me=!0),me){if(Se>=1)break;for(Et=1;Et<je.length;++Et)Q(je[Et],1-Se,je[0],Se,je[Et]),je[Et].fx=J(je[Et])}}else Qe(oe)}return je.sort(ne),{fx:je[0].fx,x:je[0]}}function te(J,M,E,ge,be,ze,Be){var Ue=E.fx,it=W(E.fxprime,M),ht=Ue,Le=Ue,Se=it,ye=0;be=be||1,ze=ze||1e-6,Be=Be||.1;function Ve(Et,Oe,Qe){for(var ne=0;ne<16;++ne)if(be=(Et+Oe)/2,Q(ge.x,1,E.x,be,M),ht=ge.fx=J(ge.x,ge.fxprime),Se=W(ge.fxprime,M),ht>Ue+ze*be*it||ht>=Qe)Oe=be;else{if(Math.abs(Se)<=-Be*it)return be;Se*(Oe-Et)>=0&&(Oe=Et),Et=be,Qe=ht}return 0}for(var je=0;je<10;++je){if(Q(ge.x,1,E.x,be,M),ht=ge.fx=J(ge.x,ge.fxprime),Se=W(ge.fxprime,M),ht>Ue+ze*be*it||je&&ht>=Le)return Ve(ye,be,Le);if(Math.abs(Se)<=-Be*it)return be;if(Se>=0)return Ve(be,ye,ht);Le=ht,ye=be,be*=2}return be}function we(J,M,E){var ge={x:M.slice(),fx:0,fxprime:M.slice()},be={x:M.slice(),fx:0,fxprime:M.slice()},ze=M.slice(),Be,Ue,it=1,ht;E=E||{},ht=E.maxIterations||M.length*20,ge.fx=J(ge.x,ge.fxprime),Be=ge.fxprime.slice(),q(Be,ge.fxprime,-1);for(var Le=0;Le<ht;++Le){if(it=te(J,Be,ge,be,it),E.history&&E.history.push({x:ge.x.slice(),fx:ge.fx,fxprime:ge.fxprime.slice(),alpha:it}),!it)q(Be,ge.fxprime,-1);else{Q(ze,1,be.fxprime,-1,ge.fxprime);var Se=W(ge.fxprime,ge.fxprime),ye=Math.max(0,W(ze,be.fxprime)/Se);Q(Be,ye,Be,-1,be.fxprime),Ue=ge,ge=be,be=Ue}if(j(ge.fxprime)<=1e-5)break}return E.history&&E.history.push({x:ge.x.slice(),fx:ge.fx,fxprime:ge.fxprime.slice(),alpha:it}),ge}function fe(J,M,E){E=E||{};for(var ge=E.maxIterations||M.length*100,be=E.learnRate||.001,ze={x:M.slice(),fx:0,fxprime:M.slice()},Be=0;Be<ge&&(ze.fx=J(ze.x,ze.fxprime),E.history&&E.history.push({x:ze.x.slice(),fx:ze.fx,fxprime:ze.fxprime.slice()}),Q(ze.x,1,ze.x,-be,ze.fxprime),!(j(ze.fxprime)<=1e-5));++Be);return ze}function ce(J,M,E){E=E||{};var ge={x:M.slice(),fx:0,fxprime:M.slice()},be={x:M.slice(),fx:0,fxprime:M.slice()},ze=E.maxIterations||M.length*100,Be=E.learnRate||1,Ue=M.slice(),it=E.c1||.001,ht=E.c2||.1,Le,Se=[];if(E.history){var ye=J;J=function(je,Et){return Se.push(je.slice()),ye(je,Et)}}ge.fx=J(ge.x,ge.fxprime);for(var Ve=0;Ve<ze&&(q(Ue,ge.fxprime,-1),Be=te(J,Ue,ge,be,Be,it,ht),E.history&&(E.history.push({x:ge.x.slice(),fx:ge.fx,fxprime:ge.fxprime.slice(),functionCalls:Se,learnRate:Be,alpha:Be}),Se=[]),Le=ge,ge=be,be=Le,!(Be===0||j(ge.fxprime)<1e-5));++Ve);return ge}k.bisect=$,k.nelderMead=ie,k.conjugateGradient=we,k.gradientDescent=fe,k.gradientDescentLineSearch=ce,k.zeros=K,k.zerosM=w,k.norm2=j,k.weightedSum=Q,k.scale=q})},49685:function(ct,N,k){"use strict";k.d(N,{FD:function(){return w},Ib:function(){return $},WT:function(){return K}});var $=1e-6,K=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function W(ie){K=ie}var j=Math.PI/180;function q(ie){return ie*j}function Q(ie,te){return Math.abs(ie-te)<=$*Math.max(1,Math.abs(ie),Math.abs(te))}Math.hypot||(Math.hypot=function(){for(var ie=0,te=arguments.length;te--;)ie+=arguments[te]*arguments[te];return Math.sqrt(ie)})},35600:function(ct,N,k){"use strict";k.d(N,{Jp:function(){return ce},U_:function(){return te},Us:function(){return be},vc:function(){return ge},xJ:function(){return ze}});function $(){var oe=new glMatrix.ARRAY_TYPE(9);return glMatrix.ARRAY_TYPE!=Float32Array&&(oe[1]=0,oe[2]=0,oe[3]=0,oe[5]=0,oe[6]=0,oe[7]=0),oe[0]=1,oe[4]=1,oe[8]=1,oe}function K(oe,Fe){return oe[0]=Fe[0],oe[1]=Fe[1],oe[2]=Fe[2],oe[3]=Fe[4],oe[4]=Fe[5],oe[5]=Fe[6],oe[6]=Fe[8],oe[7]=Fe[9],oe[8]=Fe[10],oe}function w(oe){var Fe=new glMatrix.ARRAY_TYPE(9);return Fe[0]=oe[0],Fe[1]=oe[1],Fe[2]=oe[2],Fe[3]=oe[3],Fe[4]=oe[4],Fe[5]=oe[5],Fe[6]=oe[6],Fe[7]=oe[7],Fe[8]=oe[8],Fe}function W(oe,Fe){return oe[0]=Fe[0],oe[1]=Fe[1],oe[2]=Fe[2],oe[3]=Fe[3],oe[4]=Fe[4],oe[5]=Fe[5],oe[6]=Fe[6],oe[7]=Fe[7],oe[8]=Fe[8],oe}function j(oe,Fe,st,Ce,De,tt,_e,me,Ge){var Ze=new glMatrix.ARRAY_TYPE(9);return Ze[0]=oe,Ze[1]=Fe,Ze[2]=st,Ze[3]=Ce,Ze[4]=De,Ze[5]=tt,Ze[6]=_e,Ze[7]=me,Ze[8]=Ge,Ze}function q(oe,Fe,st,Ce,De,tt,_e,me,Ge,Ze){return oe[0]=Fe,oe[1]=st,oe[2]=Ce,oe[3]=De,oe[4]=tt,oe[5]=_e,oe[6]=me,oe[7]=Ge,oe[8]=Ze,oe}function Q(oe){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=1,oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1,oe}function ie(oe,Fe){if(oe===Fe){var st=Fe[1],Ce=Fe[2],De=Fe[5];oe[1]=Fe[3],oe[2]=Fe[6],oe[3]=st,oe[5]=Fe[7],oe[6]=Ce,oe[7]=De}else oe[0]=Fe[0],oe[1]=Fe[3],oe[2]=Fe[6],oe[3]=Fe[1],oe[4]=Fe[4],oe[5]=Fe[7],oe[6]=Fe[2],oe[7]=Fe[5],oe[8]=Fe[8];return oe}function te(oe,Fe){var st=Fe[0],Ce=Fe[1],De=Fe[2],tt=Fe[3],_e=Fe[4],me=Fe[5],Ge=Fe[6],Ze=Fe[7],pt=Fe[8],Ht=pt*_e-me*Ze,Je=-pt*tt+me*Ge,$e=Ze*tt-_e*Ge,Te=st*Ht+Ce*Je+De*$e;return Te?(Te=1/Te,oe[0]=Ht*Te,oe[1]=(-pt*Ce+De*Ze)*Te,oe[2]=(me*Ce-De*_e)*Te,oe[3]=Je*Te,oe[4]=(pt*st-De*Ge)*Te,oe[5]=(-me*st+De*tt)*Te,oe[6]=$e*Te,oe[7]=(-Ze*st+Ce*Ge)*Te,oe[8]=(_e*st-Ce*tt)*Te,oe):null}function we(oe,Fe){var st=Fe[0],Ce=Fe[1],De=Fe[2],tt=Fe[3],_e=Fe[4],me=Fe[5],Ge=Fe[6],Ze=Fe[7],pt=Fe[8];return oe[0]=_e*pt-me*Ze,oe[1]=De*Ze-Ce*pt,oe[2]=Ce*me-De*_e,oe[3]=me*Ge-tt*pt,oe[4]=st*pt-De*Ge,oe[5]=De*tt-st*me,oe[6]=tt*Ze-_e*Ge,oe[7]=Ce*Ge-st*Ze,oe[8]=st*_e-Ce*tt,oe}function fe(oe){var Fe=oe[0],st=oe[1],Ce=oe[2],De=oe[3],tt=oe[4],_e=oe[5],me=oe[6],Ge=oe[7],Ze=oe[8];return Fe*(Ze*tt-_e*Ge)+st*(-Ze*De+_e*me)+Ce*(Ge*De-tt*me)}function ce(oe,Fe,st){var Ce=Fe[0],De=Fe[1],tt=Fe[2],_e=Fe[3],me=Fe[4],Ge=Fe[5],Ze=Fe[6],pt=Fe[7],Ht=Fe[8],Je=st[0],$e=st[1],Te=st[2],Ye=st[3],ft=st[4],ke=st[5],Ne=st[6],dt=st[7],Pt=st[8];return oe[0]=Je*Ce+$e*_e+Te*Ze,oe[1]=Je*De+$e*me+Te*pt,oe[2]=Je*tt+$e*Ge+Te*Ht,oe[3]=Ye*Ce+ft*_e+ke*Ze,oe[4]=Ye*De+ft*me+ke*pt,oe[5]=Ye*tt+ft*Ge+ke*Ht,oe[6]=Ne*Ce+dt*_e+Pt*Ze,oe[7]=Ne*De+dt*me+Pt*pt,oe[8]=Ne*tt+dt*Ge+Pt*Ht,oe}function J(oe,Fe,st){var Ce=Fe[0],De=Fe[1],tt=Fe[2],_e=Fe[3],me=Fe[4],Ge=Fe[5],Ze=Fe[6],pt=Fe[7],Ht=Fe[8],Je=st[0],$e=st[1];return oe[0]=Ce,oe[1]=De,oe[2]=tt,oe[3]=_e,oe[4]=me,oe[5]=Ge,oe[6]=Je*Ce+$e*_e+Ze,oe[7]=Je*De+$e*me+pt,oe[8]=Je*tt+$e*Ge+Ht,oe}function M(oe,Fe,st){var Ce=Fe[0],De=Fe[1],tt=Fe[2],_e=Fe[3],me=Fe[4],Ge=Fe[5],Ze=Fe[6],pt=Fe[7],Ht=Fe[8],Je=Math.sin(st),$e=Math.cos(st);return oe[0]=$e*Ce+Je*_e,oe[1]=$e*De+Je*me,oe[2]=$e*tt+Je*Ge,oe[3]=$e*_e-Je*Ce,oe[4]=$e*me-Je*De,oe[5]=$e*Ge-Je*tt,oe[6]=Ze,oe[7]=pt,oe[8]=Ht,oe}function E(oe,Fe,st){var Ce=st[0],De=st[1];return oe[0]=Ce*Fe[0],oe[1]=Ce*Fe[1],oe[2]=Ce*Fe[2],oe[3]=De*Fe[3],oe[4]=De*Fe[4],oe[5]=De*Fe[5],oe[6]=Fe[6],oe[7]=Fe[7],oe[8]=Fe[8],oe}function ge(oe,Fe){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=1,oe[5]=0,oe[6]=Fe[0],oe[7]=Fe[1],oe[8]=1,oe}function be(oe,Fe){var st=Math.sin(Fe),Ce=Math.cos(Fe);return oe[0]=Ce,oe[1]=st,oe[2]=0,oe[3]=-st,oe[4]=Ce,oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1,oe}function ze(oe,Fe){return oe[0]=Fe[0],oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=Fe[1],oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1,oe}function Be(oe,Fe){return oe[0]=Fe[0],oe[1]=Fe[1],oe[2]=0,oe[3]=Fe[2],oe[4]=Fe[3],oe[5]=0,oe[6]=Fe[4],oe[7]=Fe[5],oe[8]=1,oe}function Ue(oe,Fe){var st=Fe[0],Ce=Fe[1],De=Fe[2],tt=Fe[3],_e=st+st,me=Ce+Ce,Ge=De+De,Ze=st*_e,pt=Ce*_e,Ht=Ce*me,Je=De*_e,$e=De*me,Te=De*Ge,Ye=tt*_e,ft=tt*me,ke=tt*Ge;return oe[0]=1-Ht-Te,oe[3]=pt-ke,oe[6]=Je+ft,oe[1]=pt+ke,oe[4]=1-Ze-Te,oe[7]=$e-Ye,oe[2]=Je-ft,oe[5]=$e+Ye,oe[8]=1-Ze-Ht,oe}function it(oe,Fe){var st=Fe[0],Ce=Fe[1],De=Fe[2],tt=Fe[3],_e=Fe[4],me=Fe[5],Ge=Fe[6],Ze=Fe[7],pt=Fe[8],Ht=Fe[9],Je=Fe[10],$e=Fe[11],Te=Fe[12],Ye=Fe[13],ft=Fe[14],ke=Fe[15],Ne=st*me-Ce*_e,dt=st*Ge-De*_e,Pt=st*Ze-tt*_e,rr=Ce*Ge-De*me,xr=Ce*Ze-tt*me,ut=De*Ze-tt*Ge,nn=pt*Ye-Ht*Te,Gr=pt*ft-Je*Te,Xr=pt*ke-$e*Te,Nt=Ht*ft-Je*Ye,Yt=Ht*ke-$e*Ye,sr=Je*ke-$e*ft,Dt=Ne*sr-dt*Yt+Pt*Nt+rr*Xr-xr*Gr+ut*nn;return Dt?(Dt=1/Dt,oe[0]=(me*sr-Ge*Yt+Ze*Nt)*Dt,oe[1]=(Ge*Xr-_e*sr-Ze*Gr)*Dt,oe[2]=(_e*Yt-me*Xr+Ze*nn)*Dt,oe[3]=(De*Yt-Ce*sr-tt*Nt)*Dt,oe[4]=(st*sr-De*Xr+tt*Gr)*Dt,oe[5]=(Ce*Xr-st*Yt-tt*nn)*Dt,oe[6]=(Ye*ut-ft*xr+ke*rr)*Dt,oe[7]=(ft*Pt-Te*ut-ke*dt)*Dt,oe[8]=(Te*xr-Ye*Pt+ke*Ne)*Dt,oe):null}function ht(oe,Fe,st){return oe[0]=2/Fe,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=-2/st,oe[5]=0,oe[6]=-1,oe[7]=1,oe[8]=1,oe}function Le(oe){return"mat3("+oe[0]+", "+oe[1]+", "+oe[2]+", "+oe[3]+", "+oe[4]+", "+oe[5]+", "+oe[6]+", "+oe[7]+", "+oe[8]+")"}function Se(oe){return Math.hypot(oe[0],oe[1],oe[2],oe[3],oe[4],oe[5],oe[6],oe[7],oe[8])}function ye(oe,Fe,st){return oe[0]=Fe[0]+st[0],oe[1]=Fe[1]+st[1],oe[2]=Fe[2]+st[2],oe[3]=Fe[3]+st[3],oe[4]=Fe[4]+st[4],oe[5]=Fe[5]+st[5],oe[6]=Fe[6]+st[6],oe[7]=Fe[7]+st[7],oe[8]=Fe[8]+st[8],oe}function Ve(oe,Fe,st){return oe[0]=Fe[0]-st[0],oe[1]=Fe[1]-st[1],oe[2]=Fe[2]-st[2],oe[3]=Fe[3]-st[3],oe[4]=Fe[4]-st[4],oe[5]=Fe[5]-st[5],oe[6]=Fe[6]-st[6],oe[7]=Fe[7]-st[7],oe[8]=Fe[8]-st[8],oe}function je(oe,Fe,st){return oe[0]=Fe[0]*st,oe[1]=Fe[1]*st,oe[2]=Fe[2]*st,oe[3]=Fe[3]*st,oe[4]=Fe[4]*st,oe[5]=Fe[5]*st,oe[6]=Fe[6]*st,oe[7]=Fe[7]*st,oe[8]=Fe[8]*st,oe}function Et(oe,Fe,st,Ce){return oe[0]=Fe[0]+st[0]*Ce,oe[1]=Fe[1]+st[1]*Ce,oe[2]=Fe[2]+st[2]*Ce,oe[3]=Fe[3]+st[3]*Ce,oe[4]=Fe[4]+st[4]*Ce,oe[5]=Fe[5]+st[5]*Ce,oe[6]=Fe[6]+st[6]*Ce,oe[7]=Fe[7]+st[7]*Ce,oe[8]=Fe[8]+st[8]*Ce,oe}function Oe(oe,Fe){return oe[0]===Fe[0]&&oe[1]===Fe[1]&&oe[2]===Fe[2]&&oe[3]===Fe[3]&&oe[4]===Fe[4]&&oe[5]===Fe[5]&&oe[6]===Fe[6]&&oe[7]===Fe[7]&&oe[8]===Fe[8]}function Qe(oe,Fe){var st=oe[0],Ce=oe[1],De=oe[2],tt=oe[3],_e=oe[4],me=oe[5],Ge=oe[6],Ze=oe[7],pt=oe[8],Ht=Fe[0],Je=Fe[1],$e=Fe[2],Te=Fe[3],Ye=Fe[4],ft=Fe[5],ke=Fe[6],Ne=Fe[7],dt=Fe[8];return Math.abs(st-Ht)<=glMatrix.EPSILON*Math.max(1,Math.abs(st),Math.abs(Ht))&&Math.abs(Ce-Je)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(Je))&&Math.abs(De-$e)<=glMatrix.EPSILON*Math.max(1,Math.abs(De),Math.abs($e))&&Math.abs(tt-Te)<=glMatrix.EPSILON*Math.max(1,Math.abs(tt),Math.abs(Te))&&Math.abs(_e-Ye)<=glMatrix.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Ye))&&Math.abs(me-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(me),Math.abs(ft))&&Math.abs(Ge-ke)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ge),Math.abs(ke))&&Math.abs(Ze-Ne)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ze),Math.abs(Ne))&&Math.abs(pt-dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(pt),Math.abs(dt))}var ne=null,We=null},31437:function(ct,N,k){"use strict";k.d(N,{$X:function(){return ie},AK:function(){return ye},EU:function(){return Fe},Fp:function(){return M},Fv:function(){return Se},I6:function(){return De},IH:function(){return Q},JG:function(){return j},TE:function(){return ze},Ue:function(){return K},VV:function(){return J},al:function(){return W},bA:function(){return ge},kE:function(){return Ue},kK:function(){return ne},lu:function(){return me},t7:function(){return je},t8:function(){return q},tk:function(){return ht}});var $=k(49685);function K(){var Te=new $.WT(2);return $.WT!=Float32Array&&(Te[0]=0,Te[1]=0),Te}function w(Te){var Ye=new glMatrix.ARRAY_TYPE(2);return Ye[0]=Te[0],Ye[1]=Te[1],Ye}function W(Te,Ye){var ft=new $.WT(2);return ft[0]=Te,ft[1]=Ye,ft}function j(Te,Ye){return Te[0]=Ye[0],Te[1]=Ye[1],Te}function q(Te,Ye,ft){return Te[0]=Ye,Te[1]=ft,Te}function Q(Te,Ye,ft){return Te[0]=Ye[0]+ft[0],Te[1]=Ye[1]+ft[1],Te}function ie(Te,Ye,ft){return Te[0]=Ye[0]-ft[0],Te[1]=Ye[1]-ft[1],Te}function te(Te,Ye,ft){return Te[0]=Ye[0]*ft[0],Te[1]=Ye[1]*ft[1],Te}function we(Te,Ye,ft){return Te[0]=Ye[0]/ft[0],Te[1]=Ye[1]/ft[1],Te}function fe(Te,Ye){return Te[0]=Math.ceil(Ye[0]),Te[1]=Math.ceil(Ye[1]),Te}function ce(Te,Ye){return Te[0]=Math.floor(Ye[0]),Te[1]=Math.floor(Ye[1]),Te}function J(Te,Ye,ft){return Te[0]=Math.min(Ye[0],ft[0]),Te[1]=Math.min(Ye[1],ft[1]),Te}function M(Te,Ye,ft){return Te[0]=Math.max(Ye[0],ft[0]),Te[1]=Math.max(Ye[1],ft[1]),Te}function E(Te,Ye){return Te[0]=Math.round(Ye[0]),Te[1]=Math.round(Ye[1]),Te}function ge(Te,Ye,ft){return Te[0]=Ye[0]*ft,Te[1]=Ye[1]*ft,Te}function be(Te,Ye,ft,ke){return Te[0]=Ye[0]+ft[0]*ke,Te[1]=Ye[1]+ft[1]*ke,Te}function ze(Te,Ye){var ft=Ye[0]-Te[0],ke=Ye[1]-Te[1];return Math.hypot(ft,ke)}function Be(Te,Ye){var ft=Ye[0]-Te[0],ke=Ye[1]-Te[1];return ft*ft+ke*ke}function Ue(Te){var Ye=Te[0],ft=Te[1];return Math.hypot(Ye,ft)}function it(Te){var Ye=Te[0],ft=Te[1];return Ye*Ye+ft*ft}function ht(Te,Ye){return Te[0]=-Ye[0],Te[1]=-Ye[1],Te}function Le(Te,Ye){return Te[0]=1/Ye[0],Te[1]=1/Ye[1],Te}function Se(Te,Ye){var ft=Ye[0],ke=Ye[1],Ne=ft*ft+ke*ke;return Ne>0&&(Ne=1/Math.sqrt(Ne)),Te[0]=Ye[0]*Ne,Te[1]=Ye[1]*Ne,Te}function ye(Te,Ye){return Te[0]*Ye[0]+Te[1]*Ye[1]}function Ve(Te,Ye,ft){var ke=Ye[0]*ft[1]-Ye[1]*ft[0];return Te[0]=Te[1]=0,Te[2]=ke,Te}function je(Te,Ye,ft,ke){var Ne=Ye[0],dt=Ye[1];return Te[0]=Ne+ke*(ft[0]-Ne),Te[1]=dt+ke*(ft[1]-dt),Te}function Et(Te,Ye){Ye=Ye||1;var ft=glMatrix.RANDOM()*2*Math.PI;return Te[0]=Math.cos(ft)*Ye,Te[1]=Math.sin(ft)*Ye,Te}function Oe(Te,Ye,ft){var ke=Ye[0],Ne=Ye[1];return Te[0]=ft[0]*ke+ft[2]*Ne,Te[1]=ft[1]*ke+ft[3]*Ne,Te}function Qe(Te,Ye,ft){var ke=Ye[0],Ne=Ye[1];return Te[0]=ft[0]*ke+ft[2]*Ne+ft[4],Te[1]=ft[1]*ke+ft[3]*Ne+ft[5],Te}function ne(Te,Ye,ft){var ke=Ye[0],Ne=Ye[1];return Te[0]=ft[0]*ke+ft[3]*Ne+ft[6],Te[1]=ft[1]*ke+ft[4]*Ne+ft[7],Te}function We(Te,Ye,ft){var ke=Ye[0],Ne=Ye[1];return Te[0]=ft[0]*ke+ft[4]*Ne+ft[12],Te[1]=ft[1]*ke+ft[5]*Ne+ft[13],Te}function oe(Te,Ye,ft,ke){var Ne=Ye[0]-ft[0],dt=Ye[1]-ft[1],Pt=Math.sin(ke),rr=Math.cos(ke);return Te[0]=Ne*rr-dt*Pt+ft[0],Te[1]=Ne*Pt+dt*rr+ft[1],Te}function Fe(Te,Ye){var ft=Te[0],ke=Te[1],Ne=Ye[0],dt=Ye[1],Pt=Math.sqrt(ft*ft+ke*ke)*Math.sqrt(Ne*Ne+dt*dt),rr=Pt&&(ft*Ne+ke*dt)/Pt;return Math.acos(Math.min(Math.max(rr,-1),1))}function st(Te){return Te[0]=0,Te[1]=0,Te}function Ce(Te){return"vec2("+Te[0]+", "+Te[1]+")"}function De(Te,Ye){return Te[0]===Ye[0]&&Te[1]===Ye[1]}function tt(Te,Ye){var ft=Te[0],ke=Te[1],Ne=Ye[0],dt=Ye[1];return Math.abs(ft-Ne)<=glMatrix.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Ne))&&Math.abs(ke-dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ke),Math.abs(dt))}var _e=null,me=ie,Ge=null,Ze=null,pt=null,Ht=null,Je=null,$e=function(){var Te=K();return function(Ye,ft,ke,Ne,dt,Pt){var rr,xr;for(ft||(ft=2),ke||(ke=0),Ne?xr=Math.min(Ne*ft+ke,Ye.length):xr=Ye.length,rr=ke;rr<xr;rr+=ft)Te[0]=Ye[rr],Te[1]=Ye[rr+1],dt(Te,Te,Pt),Ye[rr]=Te[0],Ye[rr+1]=Te[1];return Ye}}()},77160:function(ct,N,k){"use strict";k.r(N),k.d(N,{add:function(){return ie},angle:function(){return De},bezier:function(){return Oe},ceil:function(){return ce},clone:function(){return w},copy:function(){return q},create:function(){return K},cross:function(){return Ve},dist:function(){return Je},distance:function(){return Be},div:function(){return Ht},divide:function(){return fe},dot:function(){return ye},equals:function(){return Ge},exactEquals:function(){return me},floor:function(){return J},forEach:function(){return ft},fromValues:function(){return j},hermite:function(){return Et},inverse:function(){return Le},len:function(){return Te},length:function(){return W},lerp:function(){return je},max:function(){return E},min:function(){return M},mul:function(){return pt},multiply:function(){return we},negate:function(){return ht},normalize:function(){return Se},random:function(){return Qe},rotateX:function(){return Fe},rotateY:function(){return st},rotateZ:function(){return Ce},round:function(){return ge},scale:function(){return be},scaleAndAdd:function(){return ze},set:function(){return Q},sqrDist:function(){return $e},sqrLen:function(){return Ye},squaredDistance:function(){return Ue},squaredLength:function(){return it},str:function(){return _e},sub:function(){return Ze},subtract:function(){return te},transformMat3:function(){return We},transformMat4:function(){return ne},transformQuat:function(){return oe},zero:function(){return tt}});var $=k(49685);function K(){var ke=new $.WT(3);return $.WT!=Float32Array&&(ke[0]=0,ke[1]=0,ke[2]=0),ke}function w(ke){var Ne=new $.WT(3);return Ne[0]=ke[0],Ne[1]=ke[1],Ne[2]=ke[2],Ne}function W(ke){var Ne=ke[0],dt=ke[1],Pt=ke[2];return Math.hypot(Ne,dt,Pt)}function j(ke,Ne,dt){var Pt=new $.WT(3);return Pt[0]=ke,Pt[1]=Ne,Pt[2]=dt,Pt}function q(ke,Ne){return ke[0]=Ne[0],ke[1]=Ne[1],ke[2]=Ne[2],ke}function Q(ke,Ne,dt,Pt){return ke[0]=Ne,ke[1]=dt,ke[2]=Pt,ke}function ie(ke,Ne,dt){return ke[0]=Ne[0]+dt[0],ke[1]=Ne[1]+dt[1],ke[2]=Ne[2]+dt[2],ke}function te(ke,Ne,dt){return ke[0]=Ne[0]-dt[0],ke[1]=Ne[1]-dt[1],ke[2]=Ne[2]-dt[2],ke}function we(ke,Ne,dt){return ke[0]=Ne[0]*dt[0],ke[1]=Ne[1]*dt[1],ke[2]=Ne[2]*dt[2],ke}function fe(ke,Ne,dt){return ke[0]=Ne[0]/dt[0],ke[1]=Ne[1]/dt[1],ke[2]=Ne[2]/dt[2],ke}function ce(ke,Ne){return ke[0]=Math.ceil(Ne[0]),ke[1]=Math.ceil(Ne[1]),ke[2]=Math.ceil(Ne[2]),ke}function J(ke,Ne){return ke[0]=Math.floor(Ne[0]),ke[1]=Math.floor(Ne[1]),ke[2]=Math.floor(Ne[2]),ke}function M(ke,Ne,dt){return ke[0]=Math.min(Ne[0],dt[0]),ke[1]=Math.min(Ne[1],dt[1]),ke[2]=Math.min(Ne[2],dt[2]),ke}function E(ke,Ne,dt){return ke[0]=Math.max(Ne[0],dt[0]),ke[1]=Math.max(Ne[1],dt[1]),ke[2]=Math.max(Ne[2],dt[2]),ke}function ge(ke,Ne){return ke[0]=Math.round(Ne[0]),ke[1]=Math.round(Ne[1]),ke[2]=Math.round(Ne[2]),ke}function be(ke,Ne,dt){return ke[0]=Ne[0]*dt,ke[1]=Ne[1]*dt,ke[2]=Ne[2]*dt,ke}function ze(ke,Ne,dt,Pt){return ke[0]=Ne[0]+dt[0]*Pt,ke[1]=Ne[1]+dt[1]*Pt,ke[2]=Ne[2]+dt[2]*Pt,ke}function Be(ke,Ne){var dt=Ne[0]-ke[0],Pt=Ne[1]-ke[1],rr=Ne[2]-ke[2];return Math.hypot(dt,Pt,rr)}function Ue(ke,Ne){var dt=Ne[0]-ke[0],Pt=Ne[1]-ke[1],rr=Ne[2]-ke[2];return dt*dt+Pt*Pt+rr*rr}function it(ke){var Ne=ke[0],dt=ke[1],Pt=ke[2];return Ne*Ne+dt*dt+Pt*Pt}function ht(ke,Ne){return ke[0]=-Ne[0],ke[1]=-Ne[1],ke[2]=-Ne[2],ke}function Le(ke,Ne){return ke[0]=1/Ne[0],ke[1]=1/Ne[1],ke[2]=1/Ne[2],ke}function Se(ke,Ne){var dt=Ne[0],Pt=Ne[1],rr=Ne[2],xr=dt*dt+Pt*Pt+rr*rr;return xr>0&&(xr=1/Math.sqrt(xr)),ke[0]=Ne[0]*xr,ke[1]=Ne[1]*xr,ke[2]=Ne[2]*xr,ke}function ye(ke,Ne){return ke[0]*Ne[0]+ke[1]*Ne[1]+ke[2]*Ne[2]}function Ve(ke,Ne,dt){var Pt=Ne[0],rr=Ne[1],xr=Ne[2],ut=dt[0],nn=dt[1],Gr=dt[2];return ke[0]=rr*Gr-xr*nn,ke[1]=xr*ut-Pt*Gr,ke[2]=Pt*nn-rr*ut,ke}function je(ke,Ne,dt,Pt){var rr=Ne[0],xr=Ne[1],ut=Ne[2];return ke[0]=rr+Pt*(dt[0]-rr),ke[1]=xr+Pt*(dt[1]-xr),ke[2]=ut+Pt*(dt[2]-ut),ke}function Et(ke,Ne,dt,Pt,rr,xr){var ut=xr*xr,nn=ut*(2*xr-3)+1,Gr=ut*(xr-2)+xr,Xr=ut*(xr-1),Nt=ut*(3-2*xr);return ke[0]=Ne[0]*nn+dt[0]*Gr+Pt[0]*Xr+rr[0]*Nt,ke[1]=Ne[1]*nn+dt[1]*Gr+Pt[1]*Xr+rr[1]*Nt,ke[2]=Ne[2]*nn+dt[2]*Gr+Pt[2]*Xr+rr[2]*Nt,ke}function Oe(ke,Ne,dt,Pt,rr,xr){var ut=1-xr,nn=ut*ut,Gr=xr*xr,Xr=nn*ut,Nt=3*xr*nn,Yt=3*Gr*ut,sr=Gr*xr;return ke[0]=Ne[0]*Xr+dt[0]*Nt+Pt[0]*Yt+rr[0]*sr,ke[1]=Ne[1]*Xr+dt[1]*Nt+Pt[1]*Yt+rr[1]*sr,ke[2]=Ne[2]*Xr+dt[2]*Nt+Pt[2]*Yt+rr[2]*sr,ke}function Qe(ke,Ne){Ne=Ne||1;var dt=$.FD()*2*Math.PI,Pt=$.FD()*2-1,rr=Math.sqrt(1-Pt*Pt)*Ne;return ke[0]=Math.cos(dt)*rr,ke[1]=Math.sin(dt)*rr,ke[2]=Pt*Ne,ke}function ne(ke,Ne,dt){var Pt=Ne[0],rr=Ne[1],xr=Ne[2],ut=dt[3]*Pt+dt[7]*rr+dt[11]*xr+dt[15];return ut=ut||1,ke[0]=(dt[0]*Pt+dt[4]*rr+dt[8]*xr+dt[12])/ut,ke[1]=(dt[1]*Pt+dt[5]*rr+dt[9]*xr+dt[13])/ut,ke[2]=(dt[2]*Pt+dt[6]*rr+dt[10]*xr+dt[14])/ut,ke}function We(ke,Ne,dt){var Pt=Ne[0],rr=Ne[1],xr=Ne[2];return ke[0]=Pt*dt[0]+rr*dt[3]+xr*dt[6],ke[1]=Pt*dt[1]+rr*dt[4]+xr*dt[7],ke[2]=Pt*dt[2]+rr*dt[5]+xr*dt[8],ke}function oe(ke,Ne,dt){var Pt=dt[0],rr=dt[1],xr=dt[2],ut=dt[3],nn=Ne[0],Gr=Ne[1],Xr=Ne[2],Nt=rr*Xr-xr*Gr,Yt=xr*nn-Pt*Xr,sr=Pt*Gr-rr*nn,Dt=rr*sr-xr*Yt,Qt=xr*Nt-Pt*sr,Sr=Pt*Yt-rr*Nt,Er=ut*2;return Nt*=Er,Yt*=Er,sr*=Er,Dt*=2,Qt*=2,Sr*=2,ke[0]=nn+Nt+Dt,ke[1]=Gr+Yt+Qt,ke[2]=Xr+sr+Sr,ke}function Fe(ke,Ne,dt,Pt){var rr=[],xr=[];return rr[0]=Ne[0]-dt[0],rr[1]=Ne[1]-dt[1],rr[2]=Ne[2]-dt[2],xr[0]=rr[0],xr[1]=rr[1]*Math.cos(Pt)-rr[2]*Math.sin(Pt),xr[2]=rr[1]*Math.sin(Pt)+rr[2]*Math.cos(Pt),ke[0]=xr[0]+dt[0],ke[1]=xr[1]+dt[1],ke[2]=xr[2]+dt[2],ke}function st(ke,Ne,dt,Pt){var rr=[],xr=[];return rr[0]=Ne[0]-dt[0],rr[1]=Ne[1]-dt[1],rr[2]=Ne[2]-dt[2],xr[0]=rr[2]*Math.sin(Pt)+rr[0]*Math.cos(Pt),xr[1]=rr[1],xr[2]=rr[2]*Math.cos(Pt)-rr[0]*Math.sin(Pt),ke[0]=xr[0]+dt[0],ke[1]=xr[1]+dt[1],ke[2]=xr[2]+dt[2],ke}function Ce(ke,Ne,dt,Pt){var rr=[],xr=[];return rr[0]=Ne[0]-dt[0],rr[1]=Ne[1]-dt[1],rr[2]=Ne[2]-dt[2],xr[0]=rr[0]*Math.cos(Pt)-rr[1]*Math.sin(Pt),xr[1]=rr[0]*Math.sin(Pt)+rr[1]*Math.cos(Pt),xr[2]=rr[2],ke[0]=xr[0]+dt[0],ke[1]=xr[1]+dt[1],ke[2]=xr[2]+dt[2],ke}function De(ke,Ne){var dt=ke[0],Pt=ke[1],rr=ke[2],xr=Ne[0],ut=Ne[1],nn=Ne[2],Gr=Math.sqrt(dt*dt+Pt*Pt+rr*rr),Xr=Math.sqrt(xr*xr+ut*ut+nn*nn),Nt=Gr*Xr,Yt=Nt&&ye(ke,Ne)/Nt;return Math.acos(Math.min(Math.max(Yt,-1),1))}function tt(ke){return ke[0]=0,ke[1]=0,ke[2]=0,ke}function _e(ke){return"vec3("+ke[0]+", "+ke[1]+", "+ke[2]+")"}function me(ke,Ne){return ke[0]===Ne[0]&&ke[1]===Ne[1]&&ke[2]===Ne[2]}function Ge(ke,Ne){var dt=ke[0],Pt=ke[1],rr=ke[2],xr=Ne[0],ut=Ne[1],nn=Ne[2];return Math.abs(dt-xr)<=$.Ib*Math.max(1,Math.abs(dt),Math.abs(xr))&&Math.abs(Pt-ut)<=$.Ib*Math.max(1,Math.abs(Pt),Math.abs(ut))&&Math.abs(rr-nn)<=$.Ib*Math.max(1,Math.abs(rr),Math.abs(nn))}var Ze=te,pt=we,Ht=fe,Je=Be,$e=Ue,Te=W,Ye=it,ft=function(){var ke=K();return function(Ne,dt,Pt,rr,xr,ut){var nn,Gr;for(dt||(dt=3),Pt||(Pt=0),rr?Gr=Math.min(rr*dt+Pt,Ne.length):Gr=Ne.length,nn=Pt;nn<Gr;nn+=dt)ke[0]=Ne[nn],ke[1]=Ne[nn+1],ke[2]=Ne[nn+2],xr(ke,ke,ut),Ne[nn]=ke[0],Ne[nn+1]=ke[1],Ne[nn+2]=ke[2];return Ne}}()},50840:function(ct,N,k){var $;(function(K,w,W,j){"use strict";var q=["","webkit","Moz","MS","ms","o"],Q=w.createElement("div"),ie="function",te=Math.round,we=Math.abs,fe=Date.now;function ce(Zt,Jt,Ur){return setTimeout(Ue(Zt,Ur),Jt)}function J(Zt,Jt,Ur){return Array.isArray(Zt)?(M(Zt,Ur[Jt],Ur),!0):!1}function M(Zt,Jt,Ur){var Tn;if(Zt)if(Zt.forEach)Zt.forEach(Jt,Ur);else if(Zt.length!==j)for(Tn=0;Tn<Zt.length;)Jt.call(Ur,Zt[Tn],Tn,Zt),Tn++;else for(Tn in Zt)Zt.hasOwnProperty(Tn)&&Jt.call(Ur,Zt[Tn],Tn,Zt)}function E(Zt,Jt,Ur){var Tn="DEPRECATED METHOD: "+Jt+`
`+Ur+` AT 
`;return function(){var si=new Error("get-stack-trace"),Hi=si&&si.stack?si.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ao=K.console&&(K.console.warn||K.console.log);return ao&&ao.call(K.console,Tn,Hi),Zt.apply(this,arguments)}}var ge;typeof Object.assign!="function"?ge=function(Jt){if(Jt===j||Jt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ur=Object(Jt),Tn=1;Tn<arguments.length;Tn++){var si=arguments[Tn];if(si!==j&&si!==null)for(var Hi in si)si.hasOwnProperty(Hi)&&(Ur[Hi]=si[Hi])}return Ur}:ge=Object.assign;var be=E(function(Jt,Ur,Tn){for(var si=Object.keys(Ur),Hi=0;Hi<si.length;)(!Tn||Tn&&Jt[si[Hi]]===j)&&(Jt[si[Hi]]=Ur[si[Hi]]),Hi++;return Jt},"extend","Use `assign`."),ze=E(function(Jt,Ur){return be(Jt,Ur,!0)},"merge","Use `assign`.");function Be(Zt,Jt,Ur){var Tn=Jt.prototype,si;si=Zt.prototype=Object.create(Tn),si.constructor=Zt,si._super=Tn,Ur&&ge(si,Ur)}function Ue(Zt,Jt){return function(){return Zt.apply(Jt,arguments)}}function it(Zt,Jt){return typeof Zt==ie?Zt.apply(Jt&&Jt[0]||j,Jt):Zt}function ht(Zt,Jt){return Zt===j?Jt:Zt}function Le(Zt,Jt,Ur){M(je(Jt),function(Tn){Zt.addEventListener(Tn,Ur,!1)})}function Se(Zt,Jt,Ur){M(je(Jt),function(Tn){Zt.removeEventListener(Tn,Ur,!1)})}function ye(Zt,Jt){for(;Zt;){if(Zt==Jt)return!0;Zt=Zt.parentNode}return!1}function Ve(Zt,Jt){return Zt.indexOf(Jt)>-1}function je(Zt){return Zt.trim().split(/\s+/g)}function Et(Zt,Jt,Ur){if(Zt.indexOf&&!Ur)return Zt.indexOf(Jt);for(var Tn=0;Tn<Zt.length;){if(Ur&&Zt[Tn][Ur]==Jt||!Ur&&Zt[Tn]===Jt)return Tn;Tn++}return-1}function Oe(Zt){return Array.prototype.slice.call(Zt,0)}function Qe(Zt,Jt,Ur){for(var Tn=[],si=[],Hi=0;Hi<Zt.length;){var ao=Jt?Zt[Hi][Jt]:Zt[Hi];Et(si,ao)<0&&Tn.push(Zt[Hi]),si[Hi]=ao,Hi++}return Ur&&(Jt?Tn=Tn.sort(function(wo,Lo){return wo[Jt]>Lo[Jt]}):Tn=Tn.sort()),Tn}function ne(Zt,Jt){for(var Ur,Tn,si=Jt[0].toUpperCase()+Jt.slice(1),Hi=0;Hi<q.length;){if(Ur=q[Hi],Tn=Ur?Ur+si:Jt,Tn in Zt)return Tn;Hi++}return j}var We=1;function oe(){return We++}function Fe(Zt){var Jt=Zt.ownerDocument||Zt;return Jt.defaultView||Jt.parentWindow||K}var st=/mobile|tablet|ip(ad|hone|od)|android/i,Ce="ontouchstart"in K,De=ne(K,"PointerEvent")!==j,tt=Ce&&st.test(navigator.userAgent),_e="touch",me="pen",Ge="mouse",Ze="kinect",pt=25,Ht=1,Je=2,$e=4,Te=8,Ye=1,ft=2,ke=4,Ne=8,dt=16,Pt=ft|ke,rr=Ne|dt,xr=Pt|rr,ut=["x","y"],nn=["clientX","clientY"];function Gr(Zt,Jt){var Ur=this;this.manager=Zt,this.callback=Jt,this.element=Zt.element,this.target=Zt.options.inputTarget,this.domHandler=function(Tn){it(Zt.options.enable,[Zt])&&Ur.handler(Tn)},this.init()}Gr.prototype={handler:function(){},init:function(){this.evEl&&Le(this.element,this.evEl,this.domHandler),this.evTarget&&Le(this.target,this.evTarget,this.domHandler),this.evWin&&Le(Fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Se(this.element,this.evEl,this.domHandler),this.evTarget&&Se(this.target,this.evTarget,this.domHandler),this.evWin&&Se(Fe(this.element),this.evWin,this.domHandler)}};function Xr(Zt){var Jt,Ur=Zt.options.inputClass;return Ur?Jt=Ur:De?Jt=pe:tt?Jt=Ot:Ce?Jt=Mn:Jt=or,new Jt(Zt,Nt)}function Nt(Zt,Jt,Ur){var Tn=Ur.pointers.length,si=Ur.changedPointers.length,Hi=Jt&Ht&&Tn-si===0,ao=Jt&($e|Te)&&Tn-si===0;Ur.isFirst=!!Hi,Ur.isFinal=!!ao,Hi&&(Zt.session={}),Ur.eventType=Jt,Yt(Zt,Ur),Zt.emit("hammer.input",Ur),Zt.recognize(Ur),Zt.session.prevInput=Ur}function Yt(Zt,Jt){var Ur=Zt.session,Tn=Jt.pointers,si=Tn.length;Ur.firstInput||(Ur.firstInput=Qt(Jt)),si>1&&!Ur.firstMultiple?Ur.firstMultiple=Qt(Jt):si===1&&(Ur.firstMultiple=!1);var Hi=Ur.firstInput,ao=Ur.firstMultiple,Us=ao?ao.center:Hi.center,wo=Jt.center=Sr(Tn);Jt.timeStamp=fe(),Jt.deltaTime=Jt.timeStamp-Hi.timeStamp,Jt.angle=le(Us,wo),Jt.distance=zr(Us,wo),sr(Ur,Jt),Jt.offsetDirection=Fr(Jt.deltaX,Jt.deltaY);var Lo=Er(Jt.deltaTime,Jt.deltaX,Jt.deltaY);Jt.overallVelocityX=Lo.x,Jt.overallVelocityY=Lo.y,Jt.overallVelocity=we(Lo.x)>we(Lo.y)?Lo.x:Lo.y,Jt.scale=ao?re(ao.pointers,Tn):1,Jt.rotation=ao?H(ao.pointers,Tn):0,Jt.maxPointers=Ur.prevInput?Jt.pointers.length>Ur.prevInput.maxPointers?Jt.pointers.length:Ur.prevInput.maxPointers:Jt.pointers.length,Dt(Ur,Jt);var Hu=Zt.element;ye(Jt.srcEvent.target,Hu)&&(Hu=Jt.srcEvent.target),Jt.target=Hu}function sr(Zt,Jt){var Ur=Jt.center,Tn=Zt.offsetDelta||{},si=Zt.prevDelta||{},Hi=Zt.prevInput||{};(Jt.eventType===Ht||Hi.eventType===$e)&&(si=Zt.prevDelta={x:Hi.deltaX||0,y:Hi.deltaY||0},Tn=Zt.offsetDelta={x:Ur.x,y:Ur.y}),Jt.deltaX=si.x+(Ur.x-Tn.x),Jt.deltaY=si.y+(Ur.y-Tn.y)}function Dt(Zt,Jt){var Ur=Zt.lastInterval||Jt,Tn=Jt.timeStamp-Ur.timeStamp,si,Hi,ao,Us;if(Jt.eventType!=Te&&(Tn>pt||Ur.velocity===j)){var wo=Jt.deltaX-Ur.deltaX,Lo=Jt.deltaY-Ur.deltaY,Hu=Er(Tn,wo,Lo);Hi=Hu.x,ao=Hu.y,si=we(Hu.x)>we(Hu.y)?Hu.x:Hu.y,Us=Fr(wo,Lo),Zt.lastInterval=Jt}else si=Ur.velocity,Hi=Ur.velocityX,ao=Ur.velocityY,Us=Ur.direction;Jt.velocity=si,Jt.velocityX=Hi,Jt.velocityY=ao,Jt.direction=Us}function Qt(Zt){for(var Jt=[],Ur=0;Ur<Zt.pointers.length;)Jt[Ur]={clientX:te(Zt.pointers[Ur].clientX),clientY:te(Zt.pointers[Ur].clientY)},Ur++;return{timeStamp:fe(),pointers:Jt,center:Sr(Jt),deltaX:Zt.deltaX,deltaY:Zt.deltaY}}function Sr(Zt){var Jt=Zt.length;if(Jt===1)return{x:te(Zt[0].clientX),y:te(Zt[0].clientY)};for(var Ur=0,Tn=0,si=0;si<Jt;)Ur+=Zt[si].clientX,Tn+=Zt[si].clientY,si++;return{x:te(Ur/Jt),y:te(Tn/Jt)}}function Er(Zt,Jt,Ur){return{x:Jt/Zt||0,y:Ur/Zt||0}}function Fr(Zt,Jt){return Zt===Jt?Ye:we(Zt)>=we(Jt)?Zt<0?ft:ke:Jt<0?Ne:dt}function zr(Zt,Jt,Ur){Ur||(Ur=ut);var Tn=Jt[Ur[0]]-Zt[Ur[0]],si=Jt[Ur[1]]-Zt[Ur[1]];return Math.sqrt(Tn*Tn+si*si)}function le(Zt,Jt,Ur){Ur||(Ur=ut);var Tn=Jt[Ur[0]]-Zt[Ur[0]],si=Jt[Ur[1]]-Zt[Ur[1]];return Math.atan2(si,Tn)*180/Math.PI}function H(Zt,Jt){return le(Jt[1],Jt[0],nn)+le(Zt[1],Zt[0],nn)}function re(Zt,Jt){return zr(Jt[0],Jt[1],nn)/zr(Zt[0],Zt[1],nn)}var Re={mousedown:Ht,mousemove:Je,mouseup:$e},Ke="mousedown",Tt="mousemove mouseup";function or(){this.evEl=Ke,this.evWin=Tt,this.pressed=!1,Gr.apply(this,arguments)}Be(or,Gr,{handler:function(Jt){var Ur=Re[Jt.type];Ur&Ht&&Jt.button===0&&(this.pressed=!0),Ur&Je&&Jt.which!==1&&(Ur=$e),this.pressed&&(Ur&$e&&(this.pressed=!1),this.callback(this.manager,Ur,{pointers:[Jt],changedPointers:[Jt],pointerType:Ge,srcEvent:Jt}))}});var jt={pointerdown:Ht,pointermove:Je,pointerup:$e,pointercancel:Te,pointerout:Te},wt={2:_e,3:me,4:Ge,5:Ze},It="pointerdown",de="pointermove pointerup pointercancel";K.MSPointerEvent&&!K.PointerEvent&&(It="MSPointerDown",de="MSPointerMove MSPointerUp MSPointerCancel");function pe(){this.evEl=It,this.evWin=de,Gr.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Be(pe,Gr,{handler:function(Jt){var Ur=this.store,Tn=!1,si=Jt.type.toLowerCase().replace("ms",""),Hi=jt[si],ao=wt[Jt.pointerType]||Jt.pointerType,Us=ao==_e,wo=Et(Ur,Jt.pointerId,"pointerId");Hi&Ht&&(Jt.button===0||Us)?wo<0&&(Ur.push(Jt),wo=Ur.length-1):Hi&($e|Te)&&(Tn=!0),!(wo<0)&&(Ur[wo]=Jt,this.callback(this.manager,Hi,{pointers:Ur,changedPointers:[Jt],pointerType:ao,srcEvent:Jt}),Tn&&Ur.splice(wo,1))}});var Me={touchstart:Ht,touchmove:Je,touchend:$e,touchcancel:Te},et="touchstart",St="touchstart touchmove touchend touchcancel";function Gt(){this.evTarget=et,this.evWin=St,this.started=!1,Gr.apply(this,arguments)}Be(Gt,Gr,{handler:function(Jt){var Ur=Me[Jt.type];if(Ur===Ht&&(this.started=!0),!!this.started){var Tn=gr.call(this,Jt,Ur);Ur&($e|Te)&&Tn[0].length-Tn[1].length===0&&(this.started=!1),this.callback(this.manager,Ur,{pointers:Tn[0],changedPointers:Tn[1],pointerType:_e,srcEvent:Jt})}}});function gr(Zt,Jt){var Ur=Oe(Zt.touches),Tn=Oe(Zt.changedTouches);return Jt&($e|Te)&&(Ur=Qe(Ur.concat(Tn),"identifier",!0)),[Ur,Tn]}var At={touchstart:Ht,touchmove:Je,touchend:$e,touchcancel:Te},ot="touchstart touchmove touchend touchcancel";function Ot(){this.evTarget=ot,this.targetIds={},Gr.apply(this,arguments)}Be(Ot,Gr,{handler:function(Jt){var Ur=At[Jt.type],Tn=yr.call(this,Jt,Ur);Tn&&this.callback(this.manager,Ur,{pointers:Tn[0],changedPointers:Tn[1],pointerType:_e,srcEvent:Jt})}});function yr(Zt,Jt){var Ur=Oe(Zt.touches),Tn=this.targetIds;if(Jt&(Ht|Je)&&Ur.length===1)return Tn[Ur[0].identifier]=!0,[Ur,Ur];var si,Hi,ao=Oe(Zt.changedTouches),Us=[],wo=this.target;if(Hi=Ur.filter(function(Lo){return ye(Lo.target,wo)}),Jt===Ht)for(si=0;si<Hi.length;)Tn[Hi[si].identifier]=!0,si++;for(si=0;si<ao.length;)Tn[ao[si].identifier]&&Us.push(ao[si]),Jt&($e|Te)&&delete Tn[ao[si].identifier],si++;if(Us.length)return[Qe(Hi.concat(Us),"identifier",!0),Us]}var kr=2500,Ft=25;function Mn(){Gr.apply(this,arguments);var Zt=Ue(this.handler,this);this.touch=new Ot(this.manager,Zt),this.mouse=new or(this.manager,Zt),this.primaryTouch=null,this.lastTouches=[]}Be(Mn,Gr,{handler:function(Jt,Ur,Tn){var si=Tn.pointerType==_e,Hi=Tn.pointerType==Ge;if(!(Hi&&Tn.sourceCapabilities&&Tn.sourceCapabilities.firesTouchEvents)){if(si)qn.call(this,Ur,Tn);else if(Hi&&un.call(this,Tn))return;this.callback(Jt,Ur,Tn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function qn(Zt,Jt){Zt&Ht?(this.primaryTouch=Jt.changedPointers[0].identifier,ri.call(this,Jt)):Zt&($e|Te)&&ri.call(this,Jt)}function ri(Zt){var Jt=Zt.changedPointers[0];if(Jt.identifier===this.primaryTouch){var Ur={x:Jt.clientX,y:Jt.clientY};this.lastTouches.push(Ur);var Tn=this.lastTouches,si=function(){var Hi=Tn.indexOf(Ur);Hi>-1&&Tn.splice(Hi,1)};setTimeout(si,kr)}}function un(Zt){for(var Jt=Zt.srcEvent.clientX,Ur=Zt.srcEvent.clientY,Tn=0;Tn<this.lastTouches.length;Tn++){var si=this.lastTouches[Tn],Hi=Math.abs(Jt-si.x),ao=Math.abs(Ur-si.y);if(Hi<=Ft&&ao<=Ft)return!0}return!1}var Yn=ne(Q.style,"touchAction"),jn=Yn!==j,Kn="compute",aa="auto",vi="manipulation",da="none",Oa="pan-x",xa="pan-y",Va=io();function Sa(Zt,Jt){this.manager=Zt,this.set(Jt)}Sa.prototype={set:function(Zt){Zt==Kn&&(Zt=this.compute()),jn&&this.manager.element.style&&Va[Zt]&&(this.manager.element.style[Yn]=Zt),this.actions=Zt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Zt=[];return M(this.manager.recognizers,function(Jt){it(Jt.options.enable,[Jt])&&(Zt=Zt.concat(Jt.getTouchAction()))}),gs(Zt.join(" "))},preventDefaults:function(Zt){var Jt=Zt.srcEvent,Ur=Zt.offsetDirection;if(this.manager.session.prevented){Jt.preventDefault();return}var Tn=this.actions,si=Ve(Tn,da)&&!Va[da],Hi=Ve(Tn,xa)&&!Va[xa],ao=Ve(Tn,Oa)&&!Va[Oa];if(si){var Us=Zt.pointers.length===1,wo=Zt.distance<2,Lo=Zt.deltaTime<250;if(Us&&wo&&Lo)return}if(!(ao&&Hi)&&(si||Hi&&Ur&Pt||ao&&Ur&rr))return this.preventSrc(Jt)},preventSrc:function(Zt){this.manager.session.prevented=!0,Zt.preventDefault()}};function gs(Zt){if(Ve(Zt,da))return da;var Jt=Ve(Zt,Oa),Ur=Ve(Zt,xa);return Jt&&Ur?da:Jt||Ur?Jt?Oa:xa:Ve(Zt,vi)?vi:aa}function io(){if(!jn)return!1;var Zt={},Jt=K.CSS&&K.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ur){Zt[Ur]=Jt?K.CSS.supports("touch-action",Ur):!0}),Zt}var Oo=1,ai=2,_i=4,ea=8,Ha=ea,ms=16,lo=32;function ko(Zt){this.options=ge({},this.defaults,Zt||{}),this.id=oe(),this.manager=null,this.options.enable=ht(this.options.enable,!0),this.state=Oo,this.simultaneous={},this.requireFail=[]}ko.prototype={defaults:{},set:function(Zt){return ge(this.options,Zt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Zt){if(J(Zt,"recognizeWith",this))return this;var Jt=this.simultaneous;return Zt=qt(Zt,this),Jt[Zt.id]||(Jt[Zt.id]=Zt,Zt.recognizeWith(this)),this},dropRecognizeWith:function(Zt){return J(Zt,"dropRecognizeWith",this)?this:(Zt=qt(Zt,this),delete this.simultaneous[Zt.id],this)},requireFailure:function(Zt){if(J(Zt,"requireFailure",this))return this;var Jt=this.requireFail;return Zt=qt(Zt,this),Et(Jt,Zt)===-1&&(Jt.push(Zt),Zt.requireFailure(this)),this},dropRequireFailure:function(Zt){if(J(Zt,"dropRequireFailure",this))return this;Zt=qt(Zt,this);var Jt=Et(this.requireFail,Zt);return Jt>-1&&this.requireFail.splice(Jt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Zt){return!!this.simultaneous[Zt.id]},emit:function(Zt){var Jt=this,Ur=this.state;function Tn(si){Jt.manager.emit(si,Zt)}Ur<ea&&Tn(Jt.options.event+cr(Ur)),Tn(Jt.options.event),Zt.additionalEvent&&Tn(Zt.additionalEvent),Ur>=ea&&Tn(Jt.options.event+cr(Ur))},tryEmit:function(Zt){if(this.canEmit())return this.emit(Zt);this.state=lo},canEmit:function(){for(var Zt=0;Zt<this.requireFail.length;){if(!(this.requireFail[Zt].state&(lo|Oo)))return!1;Zt++}return!0},recognize:function(Zt){var Jt=ge({},Zt);if(!it(this.options.enable,[this,Jt])){this.reset(),this.state=lo;return}this.state&(Ha|ms|lo)&&(this.state=Oo),this.state=this.process(Jt),this.state&(ai|_i|ea|ms)&&this.tryEmit(Jt)},process:function(Zt){},getTouchAction:function(){},reset:function(){}};function cr(Zt){return Zt&ms?"cancel":Zt&ea?"end":Zt&_i?"move":Zt&ai?"start":""}function kt(Zt){return Zt==dt?"down":Zt==Ne?"up":Zt==ft?"left":Zt==ke?"right":""}function qt(Zt,Jt){var Ur=Jt.manager;return Ur?Ur.get(Zt):Zt}function Ar(){ko.apply(this,arguments)}Be(Ar,ko,{defaults:{pointers:1},attrTest:function(Zt){var Jt=this.options.pointers;return Jt===0||Zt.pointers.length===Jt},process:function(Zt){var Jt=this.state,Ur=Zt.eventType,Tn=Jt&(ai|_i),si=this.attrTest(Zt);return Tn&&(Ur&Te||!si)?Jt|ms:Tn||si?Ur&$e?Jt|ea:Jt&ai?Jt|_i:ai:lo}});function tn(){Ar.apply(this,arguments),this.pX=null,this.pY=null}Be(tn,Ar,{defaults:{event:"pan",threshold:10,pointers:1,direction:xr},getTouchAction:function(){var Zt=this.options.direction,Jt=[];return Zt&Pt&&Jt.push(xa),Zt&rr&&Jt.push(Oa),Jt},directionTest:function(Zt){var Jt=this.options,Ur=!0,Tn=Zt.distance,si=Zt.direction,Hi=Zt.deltaX,ao=Zt.deltaY;return si&Jt.direction||(Jt.direction&Pt?(si=Hi===0?Ye:Hi<0?ft:ke,Ur=Hi!=this.pX,Tn=Math.abs(Zt.deltaX)):(si=ao===0?Ye:ao<0?Ne:dt,Ur=ao!=this.pY,Tn=Math.abs(Zt.deltaY))),Zt.direction=si,Ur&&Tn>Jt.threshold&&si&Jt.direction},attrTest:function(Zt){return Ar.prototype.attrTest.call(this,Zt)&&(this.state&ai||!(this.state&ai)&&this.directionTest(Zt))},emit:function(Zt){this.pX=Zt.deltaX,this.pY=Zt.deltaY;var Jt=kt(Zt.direction);Jt&&(Zt.additionalEvent=this.options.event+Jt),this._super.emit.call(this,Zt)}});function Pn(){Ar.apply(this,arguments)}Be(Pn,Ar,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[da]},attrTest:function(Zt){return this._super.attrTest.call(this,Zt)&&(Math.abs(Zt.scale-1)>this.options.threshold||this.state&ai)},emit:function(Zt){if(Zt.scale!==1){var Jt=Zt.scale<1?"in":"out";Zt.additionalEvent=this.options.event+Jt}this._super.emit.call(this,Zt)}});function Bn(){ko.apply(this,arguments),this._timer=null,this._input=null}Be(Bn,ko,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[aa]},process:function(Zt){var Jt=this.options,Ur=Zt.pointers.length===Jt.pointers,Tn=Zt.distance<Jt.threshold,si=Zt.deltaTime>Jt.time;if(this._input=Zt,!Tn||!Ur||Zt.eventType&($e|Te)&&!si)this.reset();else if(Zt.eventType&Ht)this.reset(),this._timer=ce(function(){this.state=Ha,this.tryEmit()},Jt.time,this);else if(Zt.eventType&$e)return Ha;return lo},reset:function(){clearTimeout(this._timer)},emit:function(Zt){this.state===Ha&&(Zt&&Zt.eventType&$e?this.manager.emit(this.options.event+"up",Zt):(this._input.timeStamp=fe(),this.manager.emit(this.options.event,this._input)))}});function Cn(){Ar.apply(this,arguments)}Be(Cn,Ar,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[da]},attrTest:function(Zt){return this._super.attrTest.call(this,Zt)&&(Math.abs(Zt.rotation)>this.options.threshold||this.state&ai)}});function Ai(){Ar.apply(this,arguments)}Be(Ai,Ar,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Pt|rr,pointers:1},getTouchAction:function(){return tn.prototype.getTouchAction.call(this)},attrTest:function(Zt){var Jt=this.options.direction,Ur;return Jt&(Pt|rr)?Ur=Zt.overallVelocity:Jt&Pt?Ur=Zt.overallVelocityX:Jt&rr&&(Ur=Zt.overallVelocityY),this._super.attrTest.call(this,Zt)&&Jt&Zt.offsetDirection&&Zt.distance>this.options.threshold&&Zt.maxPointers==this.options.pointers&&we(Ur)>this.options.velocity&&Zt.eventType&$e},emit:function(Zt){var Jt=kt(Zt.offsetDirection);Jt&&this.manager.emit(this.options.event+Jt,Zt),this.manager.emit(this.options.event,Zt)}});function Yi(){ko.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Be(Yi,ko,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vi]},process:function(Zt){var Jt=this.options,Ur=Zt.pointers.length===Jt.pointers,Tn=Zt.distance<Jt.threshold,si=Zt.deltaTime<Jt.time;if(this.reset(),Zt.eventType&Ht&&this.count===0)return this.failTimeout();if(Tn&&si&&Ur){if(Zt.eventType!=$e)return this.failTimeout();var Hi=this.pTime?Zt.timeStamp-this.pTime<Jt.interval:!0,ao=!this.pCenter||zr(this.pCenter,Zt.center)<Jt.posThreshold;this.pTime=Zt.timeStamp,this.pCenter=Zt.center,!ao||!Hi?this.count=1:this.count+=1,this._input=Zt;var Us=this.count%Jt.taps;if(Us===0)return this.hasRequireFailures()?(this._timer=ce(function(){this.state=Ha,this.tryEmit()},Jt.interval,this),ai):Ha}return lo},failTimeout:function(){return this._timer=ce(function(){this.state=lo},this.options.interval,this),lo},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ha&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Wo(Zt,Jt){return Jt=Jt||{},Jt.recognizers=ht(Jt.recognizers,Wo.defaults.preset),new Do(Zt,Jt)}Wo.VERSION="2.0.7",Wo.defaults={domEvents:!1,touchAction:Kn,enable:!0,inputTarget:null,inputClass:null,preset:[[Cn,{enable:!1}],[Pn,{enable:!1},["rotate"]],[Ai,{direction:Pt}],[tn,{direction:Pt},["swipe"]],[Yi],[Yi,{event:"doubletap",taps:2},["tap"]],[Bn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var os=1,wu=2;function Do(Zt,Jt){this.options=ge({},Wo.defaults,Jt||{}),this.options.inputTarget=this.options.inputTarget||Zt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Zt,this.input=Xr(this),this.touchAction=new Sa(this,this.options.touchAction),Qa(this,!0),M(this.options.recognizers,function(Ur){var Tn=this.add(new Ur[0](Ur[1]));Ur[2]&&Tn.recognizeWith(Ur[2]),Ur[3]&&Tn.requireFailure(Ur[3])},this)}Do.prototype={set:function(Zt){return ge(this.options,Zt),Zt.touchAction&&this.touchAction.update(),Zt.inputTarget&&(this.input.destroy(),this.input.target=Zt.inputTarget,this.input.init()),this},stop:function(Zt){this.session.stopped=Zt?wu:os},recognize:function(Zt){var Jt=this.session;if(!Jt.stopped){this.touchAction.preventDefaults(Zt);var Ur,Tn=this.recognizers,si=Jt.curRecognizer;(!si||si&&si.state&Ha)&&(si=Jt.curRecognizer=null);for(var Hi=0;Hi<Tn.length;)Ur=Tn[Hi],Jt.stopped!==wu&&(!si||Ur==si||Ur.canRecognizeWith(si))?Ur.recognize(Zt):Ur.reset(),!si&&Ur.state&(ai|_i|ea)&&(si=Jt.curRecognizer=Ur),Hi++}},get:function(Zt){if(Zt instanceof ko)return Zt;for(var Jt=this.recognizers,Ur=0;Ur<Jt.length;Ur++)if(Jt[Ur].options.event==Zt)return Jt[Ur];return null},add:function(Zt){if(J(Zt,"add",this))return this;var Jt=this.get(Zt.options.event);return Jt&&this.remove(Jt),this.recognizers.push(Zt),Zt.manager=this,this.touchAction.update(),Zt},remove:function(Zt){if(J(Zt,"remove",this))return this;if(Zt=this.get(Zt),Zt){var Jt=this.recognizers,Ur=Et(Jt,Zt);Ur!==-1&&(Jt.splice(Ur,1),this.touchAction.update())}return this},on:function(Zt,Jt){if(Zt!==j&&Jt!==j){var Ur=this.handlers;return M(je(Zt),function(Tn){Ur[Tn]=Ur[Tn]||[],Ur[Tn].push(Jt)}),this}},off:function(Zt,Jt){if(Zt!==j){var Ur=this.handlers;return M(je(Zt),function(Tn){Jt?Ur[Tn]&&Ur[Tn].splice(Et(Ur[Tn],Jt),1):delete Ur[Tn]}),this}},emit:function(Zt,Jt){this.options.domEvents&&pu(Zt,Jt);var Ur=this.handlers[Zt]&&this.handlers[Zt].slice();if(!(!Ur||!Ur.length)){Jt.type=Zt,Jt.preventDefault=function(){Jt.srcEvent.preventDefault()};for(var Tn=0;Tn<Ur.length;)Ur[Tn](Jt),Tn++}},destroy:function(){this.element&&Qa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Qa(Zt,Jt){var Ur=Zt.element;if(Ur.style){var Tn;M(Zt.options.cssProps,function(si,Hi){Tn=ne(Ur.style,Hi),Jt?(Zt.oldCssProps[Tn]=Ur.style[Tn],Ur.style[Tn]=si):Ur.style[Tn]=Zt.oldCssProps[Tn]||""}),Jt||(Zt.oldCssProps={})}}function pu(Zt,Jt){var Ur=w.createEvent("Event");Ur.initEvent(Zt,!0,!0),Ur.gesture=Jt,Jt.target.dispatchEvent(Ur)}ge(Wo,{INPUT_START:Ht,INPUT_MOVE:Je,INPUT_END:$e,INPUT_CANCEL:Te,STATE_POSSIBLE:Oo,STATE_BEGAN:ai,STATE_CHANGED:_i,STATE_ENDED:ea,STATE_RECOGNIZED:Ha,STATE_CANCELLED:ms,STATE_FAILED:lo,DIRECTION_NONE:Ye,DIRECTION_LEFT:ft,DIRECTION_RIGHT:ke,DIRECTION_UP:Ne,DIRECTION_DOWN:dt,DIRECTION_HORIZONTAL:Pt,DIRECTION_VERTICAL:rr,DIRECTION_ALL:xr,Manager:Do,Input:Gr,TouchAction:Sa,TouchInput:Ot,MouseInput:or,PointerEventInput:pe,TouchMouseInput:Mn,SingleTouchInput:Gt,Recognizer:ko,AttrRecognizer:Ar,Tap:Yi,Pan:tn,Swipe:Ai,Pinch:Pn,Rotate:Cn,Press:Bn,on:Le,off:Se,each:M,merge:ze,extend:be,assign:ge,inherit:Be,bindFn:Ue,prefixed:ne});var Jo=typeof K!="undefined"?K:typeof self!="undefined"?self:{};Jo.Hammer=Wo,$=function(){return Wo}.call(N,k,N,ct),$!==j&&(ct.exports=$)})(window,document,"Hammer")},7375:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k=Symbol.for("INJECTION");function $(q,Q,ie,te){function we(){return te&&!Reflect.hasMetadata(k,this,Q)&&Reflect.defineMetadata(k,ie(),this,Q),Reflect.hasMetadata(k,this,Q)?Reflect.getMetadata(k,this,Q):ie()}function fe(ce){Reflect.defineMetadata(k,ce,this,Q)}Object.defineProperty(q,Q,{configurable:!0,enumerable:!0,get:we,set:fe})}function K(q,Q){return function(ie){return function(te,we){var fe=function(){return q.get(ie)};$(te,we,fe,Q)}}}N.makePropertyInjectDecorator=K;function w(q,Q){return function(ie,te){return function(we,fe){var ce=function(){return q.getNamed(ie,te)};$(we,fe,ce,Q)}}}N.makePropertyInjectNamedDecorator=w;function W(q,Q){return function(ie,te,we){return function(fe,ce){var J=function(){return q.getTagged(ie,te,we)};$(fe,ce,J,Q)}}}N.makePropertyInjectTaggedDecorator=W;function j(q,Q){return function(ie){return function(te,we){var fe=function(){return q.getAll(ie)};$(te,we,fe,Q)}}}N.makePropertyMultiInjectDecorator=j},84879:function(ct,N,k){"use strict";var $;$={value:!0};var K=k(7375);function w(W,j){j===void 0&&(j=!0);var q=K.makePropertyInjectDecorator(W,j),Q=K.makePropertyInjectNamedDecorator(W,j),ie=K.makePropertyInjectTaggedDecorator(W,j),te=K.makePropertyMultiInjectDecorator(W,j);return{lazyInject:q,lazyInjectNamed:Q,lazyInjectTagged:ie,lazyMultiInject:te}}N.Z=w},99934:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagProperty=N.tagParameter=N.decorate=void 0;var $=k(16674),K=k(6867);function w(te,we,fe,ce){var J=K.TAGGED;j(J,te,we,ce,fe)}N.tagParameter=w;function W(te,we,fe){var ce=K.TAGGED_PROP;j(ce,te.constructor,we,fe)}N.tagProperty=W;function j(te,we,fe,ce,J){var M={},E=typeof J=="number",ge=J!==void 0&&E?J.toString():fe;if(E&&fe!==void 0)throw new Error($.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(te,we)&&(M=Reflect.getMetadata(te,we));var be=M[ge];if(!Array.isArray(be))be=[];else for(var ze=0,Be=be;ze<Be.length;ze++){var Ue=Be[ze];if(Ue.key===ce.key)throw new Error($.DUPLICATED_METADATA+" "+Ue.key.toString())}be.push(ce),M[ge]=be,Reflect.defineMetadata(te,M,we)}function q(te,we){Reflect.decorate(te,we)}function Q(te,we){return function(fe,ce){we(fe,ce,te)}}function ie(te,we,fe){typeof fe=="number"?q([Q(fe,te)],we):typeof fe=="string"?Reflect.decorate([te],we,fe):q([te],we)}N.decorate=ie},5744:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.inject=N.LazyServiceIdentifer=void 0;var $=k(16674),K=k(6867),w=k(47738),W=k(99934),j=function(){function Q(ie){this._cb=ie}return Q.prototype.unwrap=function(){return this._cb()},Q}();N.LazyServiceIdentifer=j;function q(Q){return function(ie,te,we){if(Q===void 0)throw new Error($.UNDEFINED_INJECT_ANNOTATION(ie.name));var fe=new w.Metadata(K.INJECT_TAG,Q);typeof we=="number"?W.tagParameter(ie,te,we,fe):W.tagProperty(ie,te,fe)}}N.inject=q},64315:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.injectable=void 0;var $=k(16674),K=k(6867);function w(){return function(W){if(Reflect.hasOwnMetadata(K.PARAM_TYPES,W))throw new Error($.DUPLICATED_INJECTABLE_DECORATOR);var j=Reflect.getMetadata(K.DESIGN_PARAM_TYPES,W)||[];return Reflect.defineMetadata(K.PARAM_TYPES,j,W),W}}N.injectable=w},71693:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiInject=void 0;var $=k(6867),K=k(47738),w=k(99934);function W(j){return function(q,Q,ie){var te=new K.Metadata($.MULTI_INJECT_TAG,j);typeof ie=="number"?w.tagParameter(q,Q,ie,te):w.tagProperty(q,Q,te)}}N.multiInject=W},38085:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.named=void 0;var $=k(6867),K=k(47738),w=k(99934);function W(j){return function(q,Q,ie){var te=new K.Metadata($.NAMED_TAG,j);typeof ie=="number"?w.tagParameter(q,Q,ie,te):w.tagProperty(q,Q,te)}}N.named=W},6515:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.optional=void 0;var $=k(6867),K=k(47738),w=k(99934);function W(){return function(j,q,Q){var ie=new K.Metadata($.OPTIONAL_TAG,!0);typeof Q=="number"?w.tagParameter(j,q,Q,ie):w.tagProperty(j,q,ie)}}N.optional=W},7014:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.postConstruct=void 0;var $=k(16674),K=k(6867),w=k(47738);function W(){return function(j,q,Q){var ie=new w.Metadata(K.POST_CONSTRUCT,q);if(Reflect.hasOwnMetadata(K.POST_CONSTRUCT,j.constructor))throw new Error($.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(K.POST_CONSTRUCT,ie,j.constructor)}}N.postConstruct=W},32052:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagged=void 0;var $=k(47738),K=k(99934);function w(W,j){return function(q,Q,ie){var te=new $.Metadata(W,j);typeof ie=="number"?K.tagParameter(q,Q,ie,te):K.tagProperty(q,Q,te)}}N.tagged=w},55638:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.targetName=void 0;var $=k(6867),K=k(47738),w=k(99934);function W(j){return function(q,Q,ie){var te=new K.Metadata($.NAME_TAG,j);w.tagParameter(q,Q,ie,te)}}N.targetName=W},86757:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.unmanaged=void 0;var $=k(6867),K=k(47738),w=k(99934);function W(){return function(j,q,Q){var ie=new K.Metadata($.UNMANAGED_TAG,!0);w.tagParameter(j,q,Q,ie)}}N.unmanaged=W},44290:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Binding=void 0;var $=k(28421),K=k(37791),w=function(){function W(j,q){this.id=K.id(),this.activated=!1,this.serviceIdentifier=j,this.scope=q,this.type=$.BindingTypeEnum.Invalid,this.constraint=function(Q){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return W.prototype.clone=function(){var j=new W(this.serviceIdentifier,this.scope);return j.activated=j.scope===$.BindingScopeEnum.Singleton?this.activated:!1,j.implementationType=this.implementationType,j.dynamicValue=this.dynamicValue,j.scope=this.scope,j.type=this.type,j.factory=this.factory,j.provider=this.provider,j.constraint=this.constraint,j.onActivation=this.onActivation,j.cache=this.cache,j},W}();N.Binding=w},23184:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingCount=void 0;var k={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};N.BindingCount=k},16674:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.STACK_OVERFLOW=N.CIRCULAR_DEPENDENCY_IN_FACTORY=N.POST_CONSTRUCT_ERROR=N.MULTIPLE_POST_CONSTRUCT_METHODS=N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=N.ARGUMENTS_LENGTH_MISMATCH=N.INVALID_DECORATOR_OPERATION=N.INVALID_TO_SELF_VALUE=N.INVALID_FUNCTION_BINDING=N.INVALID_MIDDLEWARE_RETURN=N.NO_MORE_SNAPSHOTS_AVAILABLE=N.INVALID_BINDING_TYPE=N.NOT_IMPLEMENTED=N.CIRCULAR_DEPENDENCY=N.UNDEFINED_INJECT_ANNOTATION=N.MISSING_INJECT_ANNOTATION=N.MISSING_INJECTABLE_ANNOTATION=N.NOT_REGISTERED=N.CANNOT_UNBIND=N.AMBIGUOUS_MATCH=N.KEY_NOT_FOUND=N.NULL_ARGUMENT=N.DUPLICATED_METADATA=N.DUPLICATED_INJECTABLE_DECORATOR=void 0,N.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",N.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",N.NULL_ARGUMENT="NULL argument",N.KEY_NOT_FOUND="Key Not Found",N.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",N.CANNOT_UNBIND="Could not unbind serviceIdentifier:",N.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",N.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",N.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var k=function(W){return"@inject called with undefined this could mean that the class "+W+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};N.UNDEFINED_INJECT_ANNOTATION=k,N.CIRCULAR_DEPENDENCY="Circular dependency found:",N.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",N.INVALID_BINDING_TYPE="Invalid binding type:",N.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",N.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",N.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",N.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",N.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var $=function(){for(var W=[],j=0;j<arguments.length;j++)W[j]=arguments[j];return"The number of constructor arguments in the derived class "+(W[0]+" must be >= than the number of constructor arguments of its base class.")};N.ARGUMENTS_LENGTH_MISMATCH=$,N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",N.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var K=function(){for(var W=[],j=0;j<arguments.length;j++)W[j]=arguments[j];return"@postConstruct error in class "+W[0]+": "+W[1]};N.POST_CONSTRUCT_ERROR=K;var w=function(){for(var W=[],j=0;j<arguments.length;j++)W[j]=arguments[j];return"It looks like there is a circular dependency "+("in one of the '"+W[0]+"' bindings. Please investigate bindings with")+("service identifier '"+W[1]+"'.")};N.CIRCULAR_DEPENDENCY_IN_FACTORY=w,N.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.TargetTypeEnum=N.BindingTypeEnum=N.BindingScopeEnum=void 0;var k={Request:"Request",Singleton:"Singleton",Transient:"Transient"};N.BindingScopeEnum=k;var $={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};N.BindingTypeEnum=$;var K={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};N.TargetTypeEnum=K},6867:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.NON_CUSTOM_TAG_KEYS=N.POST_CONSTRUCT=N.DESIGN_PARAM_TYPES=N.PARAM_TYPES=N.TAGGED_PROP=N.TAGGED=N.MULTI_INJECT_TAG=N.INJECT_TAG=N.OPTIONAL_TAG=N.UNMANAGED_TAG=N.NAME_TAG=N.NAMED_TAG=void 0,N.NAMED_TAG="named",N.NAME_TAG="name",N.UNMANAGED_TAG="unmanaged",N.OPTIONAL_TAG="optional",N.INJECT_TAG="inject",N.MULTI_INJECT_TAG="multi_inject",N.TAGGED="inversify:tagged",N.TAGGED_PROP="inversify:tagged_props",N.PARAM_TYPES="inversify:paramtypes",N.DESIGN_PARAM_TYPES="design:paramtypes",N.POST_CONSTRUCT="post_construct";function k(){return[N.INJECT_TAG,N.MULTI_INJECT_TAG,N.NAME_TAG,N.UNMANAGED_TAG,N.NAMED_TAG,N.OPTIONAL_TAG]}N.NON_CUSTOM_TAG_KEYS=k()},51389:function(ct,N,k){"use strict";var $=this&&this.__awaiter||function(be,ze,Be,Ue){function it(ht){return ht instanceof Be?ht:new Be(function(Le){Le(ht)})}return new(Be||(Be=Promise))(function(ht,Le){function Se(je){try{Ve(Ue.next(je))}catch(Et){Le(Et)}}function ye(je){try{Ve(Ue.throw(je))}catch(Et){Le(Et)}}function Ve(je){je.done?ht(je.value):it(je.value).then(Se,ye)}Ve((Ue=Ue.apply(be,ze||[])).next())})},K=this&&this.__generator||function(be,ze){var Be={label:0,sent:function(){if(ht[0]&1)throw ht[1];return ht[1]},trys:[],ops:[]},Ue,it,ht,Le;return Le={next:Se(0),throw:Se(1),return:Se(2)},typeof Symbol=="function"&&(Le[Symbol.iterator]=function(){return this}),Le;function Se(Ve){return function(je){return ye([Ve,je])}}function ye(Ve){if(Ue)throw new TypeError("Generator is already executing.");for(;Be;)try{if(Ue=1,it&&(ht=Ve[0]&2?it.return:Ve[0]?it.throw||((ht=it.return)&&ht.call(it),0):it.next)&&!(ht=ht.call(it,Ve[1])).done)return ht;switch(it=0,ht&&(Ve=[Ve[0]&2,ht.value]),Ve[0]){case 0:case 1:ht=Ve;break;case 4:return Be.label++,{value:Ve[1],done:!1};case 5:Be.label++,it=Ve[1],Ve=[0];continue;case 7:Ve=Be.ops.pop(),Be.trys.pop();continue;default:if(ht=Be.trys,!(ht=ht.length>0&&ht[ht.length-1])&&(Ve[0]===6||Ve[0]===2)){Be=0;continue}if(Ve[0]===3&&(!ht||Ve[1]>ht[0]&&Ve[1]<ht[3])){Be.label=Ve[1];break}if(Ve[0]===6&&Be.label<ht[1]){Be.label=ht[1],ht=Ve;break}if(ht&&Be.label<ht[2]){Be.label=ht[2],Be.ops.push(Ve);break}ht[2]&&Be.ops.pop(),Be.trys.pop();continue}Ve=ze.call(be,Be)}catch(je){Ve=[6,je],it=0}finally{Ue=ht=0}if(Ve[0]&5)throw Ve[1];return{value:Ve[0]?Ve[1]:void 0,done:!0}}},w=this&&this.__spreadArray||function(be,ze){for(var Be=0,Ue=ze.length,it=be.length;Be<Ue;Be++,it++)be[it]=ze[Be];return be};Object.defineProperty(N,"__esModule",{value:!0}),N.Container=void 0;var W=k(44290),j=k(16674),q=k(28421),Q=k(6867),ie=k(51377),te=k(86311),we=k(31927),fe=k(51860),ce=k(37791),J=k(55800),M=k(85700),E=k(80175),ge=function(){function be(ze){this._appliedMiddleware=[];var Be=ze||{};if(typeof Be!="object")throw new Error(""+j.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Be.defaultScope===void 0)Be.defaultScope=q.BindingScopeEnum.Transient;else if(Be.defaultScope!==q.BindingScopeEnum.Singleton&&Be.defaultScope!==q.BindingScopeEnum.Transient&&Be.defaultScope!==q.BindingScopeEnum.Request)throw new Error(""+j.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Be.autoBindInjectable===void 0)Be.autoBindInjectable=!1;else if(typeof Be.autoBindInjectable!="boolean")throw new Error(""+j.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Be.skipBaseClassChecks===void 0)Be.skipBaseClassChecks=!1;else if(typeof Be.skipBaseClassChecks!="boolean")throw new Error(""+j.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Be.autoBindInjectable,defaultScope:Be.defaultScope,skipBaseClassChecks:Be.skipBaseClassChecks},this.id=ce.id(),this._bindingDictionary=new E.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new ie.MetadataReader}return be.merge=function(ze,Be){for(var Ue=[],it=2;it<arguments.length;it++)Ue[it-2]=arguments[it];var ht=new be,Le=w([ze,Be],Ue).map(function(Ve){return te.getBindingDictionary(Ve)}),Se=te.getBindingDictionary(ht);function ye(Ve,je){Ve.traverse(function(Et,Oe){Oe.forEach(function(Qe){je.add(Qe.serviceIdentifier,Qe.clone())})})}return Le.forEach(function(Ve){ye(Ve,Se)}),ht},be.prototype.load=function(){for(var ze=[],Be=0;Be<arguments.length;Be++)ze[Be]=arguments[Be];for(var Ue=this._getContainerModuleHelpersFactory(),it=0,ht=ze;it<ht.length;it++){var Le=ht[it],Se=Ue(Le.id);Le.registry(Se.bindFunction,Se.unbindFunction,Se.isboundFunction,Se.rebindFunction)}},be.prototype.loadAsync=function(){for(var ze=[],Be=0;Be<arguments.length;Be++)ze[Be]=arguments[Be];return $(this,void 0,void 0,function(){var Ue,it,ht,Le,Se;return K(this,function(ye){switch(ye.label){case 0:Ue=this._getContainerModuleHelpersFactory(),it=0,ht=ze,ye.label=1;case 1:return it<ht.length?(Le=ht[it],Se=Ue(Le.id),[4,Le.registry(Se.bindFunction,Se.unbindFunction,Se.isboundFunction,Se.rebindFunction)]):[3,4];case 2:ye.sent(),ye.label=3;case 3:return it++,[3,1];case 4:return[2]}})})},be.prototype.unload=function(){for(var ze=this,Be=[],Ue=0;Ue<arguments.length;Ue++)Be[Ue]=arguments[Ue];var it=function(ht){return function(Le){return Le.moduleId===ht}};Be.forEach(function(ht){var Le=it(ht.id);ze._bindingDictionary.removeByCondition(Le)})},be.prototype.bind=function(ze){var Be=this.options.defaultScope||q.BindingScopeEnum.Transient,Ue=new W.Binding(ze,Be);return this._bindingDictionary.add(ze,Ue),new fe.BindingToSyntax(Ue)},be.prototype.rebind=function(ze){return this.unbind(ze),this.bind(ze)},be.prototype.unbind=function(ze){try{this._bindingDictionary.remove(ze)}catch(Be){throw new Error(j.CANNOT_UNBIND+" "+J.getServiceIdentifierAsString(ze))}},be.prototype.unbindAll=function(){this._bindingDictionary=new E.Lookup},be.prototype.isBound=function(ze){var Be=this._bindingDictionary.hasKey(ze);return!Be&&this.parent&&(Be=this.parent.isBound(ze)),Be},be.prototype.isBoundNamed=function(ze,Be){return this.isBoundTagged(ze,Q.NAMED_TAG,Be)},be.prototype.isBoundTagged=function(ze,Be,Ue){var it=!1;if(this._bindingDictionary.hasKey(ze)){var ht=this._bindingDictionary.get(ze),Le=te.createMockRequest(this,ze,Be,Ue);it=ht.some(function(Se){return Se.constraint(Le)})}return!it&&this.parent&&(it=this.parent.isBoundTagged(ze,Be,Ue)),it},be.prototype.snapshot=function(){this._snapshots.push(M.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},be.prototype.restore=function(){var ze=this._snapshots.pop();if(ze===void 0)throw new Error(j.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=ze.bindings,this._middleware=ze.middleware},be.prototype.createChild=function(ze){var Be=new be(ze||this.options);return Be.parent=this,Be},be.prototype.applyMiddleware=function(){for(var ze=[],Be=0;Be<arguments.length;Be++)ze[Be]=arguments[Be];this._appliedMiddleware=this._appliedMiddleware.concat(ze);var Ue=this._middleware?this._middleware:this._planAndResolve();this._middleware=ze.reduce(function(it,ht){return ht(it)},Ue)},be.prototype.applyCustomMetadataReader=function(ze){this._metadataReader=ze},be.prototype.get=function(ze){return this._get(!1,!1,q.TargetTypeEnum.Variable,ze)},be.prototype.getTagged=function(ze,Be,Ue){return this._get(!1,!1,q.TargetTypeEnum.Variable,ze,Be,Ue)},be.prototype.getNamed=function(ze,Be){return this.getTagged(ze,Q.NAMED_TAG,Be)},be.prototype.getAll=function(ze){return this._get(!0,!0,q.TargetTypeEnum.Variable,ze)},be.prototype.getAllTagged=function(ze,Be,Ue){return this._get(!1,!0,q.TargetTypeEnum.Variable,ze,Be,Ue)},be.prototype.getAllNamed=function(ze,Be){return this.getAllTagged(ze,Q.NAMED_TAG,Be)},be.prototype.resolve=function(ze){var Be=this.createChild();return Be.bind(ze).toSelf(),this._appliedMiddleware.forEach(function(Ue){Be.applyMiddleware(Ue)}),Be.get(ze)},be.prototype._getContainerModuleHelpersFactory=function(){var ze=this,Be=function(Se,ye){Se._binding.moduleId=ye},Ue=function(Se){return function(ye){var Ve=ze.bind.bind(ze),je=Ve(ye);return Be(je,Se),je}},it=function(Se){return function(ye){var Ve=ze.unbind.bind(ze);Ve(ye)}},ht=function(Se){return function(ye){var Ve=ze.isBound.bind(ze);return Ve(ye)}},Le=function(Se){return function(ye){var Ve=ze.rebind.bind(ze),je=Ve(ye);return Be(je,Se),je}};return function(Se){return{bindFunction:Ue(Se),isboundFunction:ht(Se),rebindFunction:Le(Se),unbindFunction:it(Se)}}},be.prototype._get=function(ze,Be,Ue,it,ht,Le){var Se=null,ye={avoidConstraints:ze,contextInterceptor:function(Ve){return Ve},isMultiInject:Be,key:ht,serviceIdentifier:it,targetType:Ue,value:Le};if(this._middleware){if(Se=this._middleware(ye),Se==null)throw new Error(j.INVALID_MIDDLEWARE_RETURN)}else Se=this._planAndResolve()(ye);return Se},be.prototype._planAndResolve=function(){var ze=this;return function(Be){var Ue=te.plan(ze._metadataReader,ze,Be.isMultiInject,Be.targetType,Be.serviceIdentifier,Be.key,Be.value,Be.avoidConstraints);Ue=Be.contextInterceptor(Ue);var it=we.resolve(Ue);return it}},be}();N.Container=ge},33244:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.AsyncContainerModule=N.ContainerModule=void 0;var $=k(37791),K=function(){function W(j){this.id=$.id(),this.registry=j}return W}();N.ContainerModule=K;var w=function(){function W(j){this.id=$.id(),this.registry=j}return W}();N.AsyncContainerModule=w},85700:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.ContainerSnapshot=void 0;var k=function(){function $(){}return $.of=function(K,w){var W=new $;return W.bindings=K,W.middleware=w,W},$}();N.ContainerSnapshot=k},80175:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Lookup=void 0;var $=k(16674),K=function(){function w(){this._map=new Map}return w.prototype.getMap=function(){return this._map},w.prototype.add=function(W,j){if(W==null)throw new Error($.NULL_ARGUMENT);if(j==null)throw new Error($.NULL_ARGUMENT);var q=this._map.get(W);q!==void 0?(q.push(j),this._map.set(W,q)):this._map.set(W,[j])},w.prototype.get=function(W){if(W==null)throw new Error($.NULL_ARGUMENT);var j=this._map.get(W);if(j!==void 0)return j;throw new Error($.KEY_NOT_FOUND)},w.prototype.remove=function(W){if(W==null)throw new Error($.NULL_ARGUMENT);if(!this._map.delete(W))throw new Error($.KEY_NOT_FOUND)},w.prototype.removeByCondition=function(W){var j=this;this._map.forEach(function(q,Q){var ie=q.filter(function(te){return!W(te)});ie.length>0?j._map.set(Q,ie):j._map.delete(Q)})},w.prototype.hasKey=function(W){if(W==null)throw new Error($.NULL_ARGUMENT);return this._map.has(W)},w.prototype.clone=function(){var W=new w;return this._map.forEach(function(j,q){j.forEach(function(Q){return W.add(q,Q.clone())})}),W},w.prototype.traverse=function(W){this._map.forEach(function(j,q){W(q,j)})},w}();N.Lookup=K},86700:function(ct,N,k){"use strict";var $;$={value:!0},$=$=$=$=$=$=N.GW=$=$=N.zY=$=$=$=$=$=N.f3=$=$=N.b2=$=$=$=$=$=N.W2=$=void 0;var K=k(6867);$=K;var w=k(51389);Object.defineProperty(N,"W2",{enumerable:!0,get:function(){return w.Container}});var W=k(28421);$={enumerable:!0,get:function(){return W.BindingScopeEnum}},$={enumerable:!0,get:function(){return W.BindingTypeEnum}},$={enumerable:!0,get:function(){return W.TargetTypeEnum}};var j=k(33244);$={enumerable:!0,get:function(){return j.AsyncContainerModule}},$={enumerable:!0,get:function(){return j.ContainerModule}};var q=k(64315);Object.defineProperty(N,"b2",{enumerable:!0,get:function(){return q.injectable}});var Q=k(32052);$={enumerable:!0,get:function(){return Q.tagged}};var ie=k(38085);$={enumerable:!0,get:function(){return ie.named}};var te=k(5744);Object.defineProperty(N,"f3",{enumerable:!0,get:function(){return te.inject}}),$={enumerable:!0,get:function(){return te.LazyServiceIdentifer}};var we=k(6515);$={enumerable:!0,get:function(){return we.optional}};var fe=k(86757);$={enumerable:!0,get:function(){return fe.unmanaged}};var ce=k(71693);$={enumerable:!0,get:function(){return ce.multiInject}};var J=k(55638);$={enumerable:!0,get:function(){return J.targetName}};var M=k(7014);Object.defineProperty(N,"zY",{enumerable:!0,get:function(){return M.postConstruct}});var E=k(51377);$={enumerable:!0,get:function(){return E.MetadataReader}};var ge=k(37791);$={enumerable:!0,get:function(){return ge.id}};var be=k(99934);Object.defineProperty(N,"GW",{enumerable:!0,get:function(){return be.decorate}});var ze=k(80758);$={enumerable:!0,get:function(){return ze.traverseAncerstors}},$={enumerable:!0,get:function(){return ze.taggedConstraint}},$={enumerable:!0,get:function(){return ze.namedConstraint}},$={enumerable:!0,get:function(){return ze.typeConstraint}};var Be=k(55800);$={enumerable:!0,get:function(){return Be.getServiceIdentifierAsString}};var Ue=k(70600);$={enumerable:!0,get:function(){return Ue.multiBindToService}}},95228:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Context=void 0;var $=k(37791),K=function(){function w(W){this.id=$.id(),this.container=W}return w.prototype.addPlan=function(W){this.plan=W},w.prototype.setCurrentRequest=function(W){this.currentRequest=W},w}();N.Context=K},47738:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Metadata=void 0;var $=k(6867),K=function(){function w(W,j){this.key=W,this.value=j}return w.prototype.toString=function(){return this.key===$.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},w}();N.Metadata=K},51377:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MetadataReader=void 0;var $=k(6867),K=function(){function w(){}return w.prototype.getConstructorMetadata=function(W){var j=Reflect.getMetadata($.PARAM_TYPES,W),q=Reflect.getMetadata($.TAGGED,W);return{compilerGeneratedMetadata:j,userGeneratedMetadata:q||{}}},w.prototype.getPropertiesMetadata=function(W){var j=Reflect.getMetadata($.TAGGED_PROP,W)||[];return j},w}();N.MetadataReader=K},55314:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Plan=void 0;var k=function(){function $(K,w){this.parentContext=K,this.rootRequest=w}return $}();N.Plan=k},86311:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getBindingDictionary=N.createMockRequest=N.plan=void 0;var $=k(23184),K=k(16674),w=k(28421),W=k(6867),j=k(54623),q=k(55800),Q=k(95228),ie=k(47738),te=k(55314),we=k(6e3),fe=k(6748),ce=k(18924);function J(it){return it._bindingDictionary}N.getBindingDictionary=J;function M(it,ht,Le,Se,ye,Ve){var je=it?W.MULTI_INJECT_TAG:W.INJECT_TAG,Et=new ie.Metadata(je,Le),Oe=new ce.Target(ht,Se,Le,Et);if(ye!==void 0){var Qe=new ie.Metadata(ye,Ve);Oe.metadata.push(Qe)}return Oe}function E(it,ht,Le,Se,ye){var Ve=ze(Le.container,ye.serviceIdentifier),je=[];return Ve.length===$.BindingCount.NoBindingsAvailable&&Le.container.options.autoBindInjectable&&typeof ye.serviceIdentifier=="function"&&it.getConstructorMetadata(ye.serviceIdentifier).compilerGeneratedMetadata&&(Le.container.bind(ye.serviceIdentifier).toSelf(),Ve=ze(Le.container,ye.serviceIdentifier)),ht?je=Ve:je=Ve.filter(function(Et){var Oe=new fe.Request(Et.serviceIdentifier,Le,Se,Et,ye);return Et.constraint(Oe)}),ge(ye.serviceIdentifier,je,ye,Le.container),je}function ge(it,ht,Le,Se){switch(ht.length){case $.BindingCount.NoBindingsAvailable:if(Le.isOptional())return ht;var ye=q.getServiceIdentifierAsString(it),Ve=K.NOT_REGISTERED;throw Ve+=q.listMetadataForTarget(ye,Le),Ve+=q.listRegisteredBindingsForServiceIdentifier(Se,ye,ze),new Error(Ve);case $.BindingCount.OnlyOneBindingAvailable:if(!Le.isArray())return ht;case $.BindingCount.MultipleBindingsAvailable:default:if(Le.isArray())return ht;var ye=q.getServiceIdentifierAsString(it),Ve=K.AMBIGUOUS_MATCH+" "+ye;throw Ve+=q.listRegisteredBindingsForServiceIdentifier(Se,ye,ze),new Error(Ve)}}function be(it,ht,Le,Se,ye,Ve){var je,Et;if(ye===null){je=E(it,ht,Se,null,Ve),Et=new fe.Request(Le,Se,null,je,Ve);var Oe=new te.Plan(Se,Et);Se.addPlan(Oe)}else je=E(it,ht,Se,ye,Ve),Et=ye.addChildRequest(Ve.serviceIdentifier,je,Ve);je.forEach(function(Qe){var ne=null;if(Ve.isArray())ne=Et.addChildRequest(Qe.serviceIdentifier,Qe,Ve);else{if(Qe.cache)return;ne=Et}if(Qe.type===w.BindingTypeEnum.Instance&&Qe.implementationType!==null){var We=we.getDependencies(it,Qe.implementationType);if(!Se.container.options.skipBaseClassChecks){var oe=we.getBaseClassDependencyCount(it,Qe.implementationType);if(We.length<oe){var Fe=K.ARGUMENTS_LENGTH_MISMATCH(we.getFunctionName(Qe.implementationType));throw new Error(Fe)}}We.forEach(function(st){be(it,!1,st.serviceIdentifier,Se,ne,st)})}})}function ze(it,ht){var Le=[],Se=J(it);return Se.hasKey(ht)?Le=Se.get(ht):it.parent!==null&&(Le=ze(it.parent,ht)),Le}function Be(it,ht,Le,Se,ye,Ve,je,Et){Et===void 0&&(Et=!1);var Oe=new Q.Context(ht),Qe=M(Le,Se,ye,"",Ve,je);try{return be(it,Et,ye,Oe,null,Qe),Oe}catch(ne){throw j.isStackOverflowExeption(ne)&&Oe.plan&&q.circularDependencyToException(Oe.plan.rootRequest),ne}}N.plan=Be;function Ue(it,ht,Le,Se){var ye=new ce.Target(w.TargetTypeEnum.Variable,"",ht,new ie.Metadata(Le,Se)),Ve=new Q.Context(it),je=new fe.Request(ht,Ve,null,[],ye);return je}N.createMockRequest=Ue},88460:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.QueryableString=void 0;var k=function(){function $(K){this.str=K}return $.prototype.startsWith=function(K){return this.str.indexOf(K)===0},$.prototype.endsWith=function(K){var w="",W=K.split("").reverse().join("");return w=this.str.split("").reverse().join(""),this.startsWith.call({str:w},W)},$.prototype.contains=function(K){return this.str.indexOf(K)!==-1},$.prototype.equals=function(K){return this.str===K},$.prototype.value=function(){return this.str},$}();N.QueryableString=k},6e3:function(ct,N,k){"use strict";var $=this&&this.__spreadArray||function(E,ge){for(var be=0,ze=ge.length,Be=E.length;be<ze;be++,Be++)E[Be]=ge[be];return E};Object.defineProperty(N,"__esModule",{value:!0}),N.getFunctionName=N.getBaseClassDependencyCount=N.getDependencies=void 0;var K=k(5744),w=k(16674),W=k(28421),j=k(6867),q=k(55800);Object.defineProperty(N,"getFunctionName",{enumerable:!0,get:function(){return q.getFunctionName}});var Q=k(18924);function ie(E,ge){var be=q.getFunctionName(ge),ze=te(E,be,ge,!1);return ze}N.getDependencies=ie;function te(E,ge,be,ze){var Be=E.getConstructorMetadata(be),Ue=Be.compilerGeneratedMetadata;if(Ue===void 0){var it=w.MISSING_INJECTABLE_ANNOTATION+" "+ge+".";throw new Error(it)}var ht=Be.userGeneratedMetadata,Le=Object.keys(ht),Se=be.length===0&&Le.length>0,ye=Le.length>be.length,Ve=Se||ye?Le.length:be.length,je=fe(ze,ge,Ue,ht,Ve),Et=ce(E,be),Oe=$($([],je),Et);return Oe}function we(E,ge,be,ze,Be){var Ue=Be[E.toString()]||[],it=M(Ue),ht=it.unmanaged!==!0,Le=ze[E],Se=it.inject||it.multiInject;if(Le=Se||Le,Le instanceof K.LazyServiceIdentifer&&(Le=Le.unwrap()),ht){var ye=Le===Object,Ve=Le===Function,je=Le===void 0,Et=ye||Ve||je;if(!ge&&Et){var Oe=w.MISSING_INJECT_ANNOTATION+" argument "+E+" in class "+be+".";throw new Error(Oe)}var Qe=new Q.Target(W.TargetTypeEnum.ConstructorArgument,it.targetName,Le);return Qe.metadata=Ue,Qe}return null}function fe(E,ge,be,ze,Be){for(var Ue=[],it=0;it<Be;it++){var ht=it,Le=we(ht,E,ge,be,ze);Le!==null&&Ue.push(Le)}return Ue}function ce(E,ge){for(var be=E.getPropertiesMetadata(ge),ze=[],Be=Object.keys(be),Ue=0,it=Be;Ue<it.length;Ue++){var ht=it[Ue],Le=be[ht],Se=M(be[ht]),ye=Se.targetName||ht,Ve=Se.inject||Se.multiInject,je=new Q.Target(W.TargetTypeEnum.ClassProperty,ye,Ve);je.metadata=Le,ze.push(je)}var Et=Object.getPrototypeOf(ge.prototype).constructor;if(Et!==Object){var Oe=ce(E,Et);ze=$($([],ze),Oe)}return ze}function J(E,ge){var be=Object.getPrototypeOf(ge.prototype).constructor;if(be!==Object){var ze=q.getFunctionName(be),Be=te(E,ze,be,!0),Ue=Be.map(function(Le){return Le.metadata.filter(function(Se){return Se.key===j.UNMANAGED_TAG})}),it=[].concat.apply([],Ue).length,ht=Be.length-it;return ht>0?ht:J(E,be)}else return 0}N.getBaseClassDependencyCount=J;function M(E){var ge={};return E.forEach(function(be){ge[be.key.toString()]=be.value}),{inject:ge[j.INJECT_TAG],multiInject:ge[j.MULTI_INJECT_TAG],targetName:ge[j.NAME_TAG],unmanaged:ge[j.UNMANAGED_TAG]}}},6748:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Request=void 0;var $=k(37791),K=function(){function w(W,j,q,Q,ie){this.id=$.id(),this.serviceIdentifier=W,this.parentContext=j,this.parentRequest=q,this.target=ie,this.childRequests=[],this.bindings=Array.isArray(Q)?Q:[Q],this.requestScope=q===null?new Map:null}return w.prototype.addChildRequest=function(W,j,q){var Q=new w(W,this.parentContext,this,j,q);return this.childRequests.push(Q),Q},w}();N.Request=K},18924:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Target=void 0;var $=k(6867),K=k(37791),w=k(47738),W=k(88460),j=function(){function q(Q,ie,te,we){this.id=K.id(),this.type=Q,this.serviceIdentifier=te,this.name=new W.QueryableString(ie||""),this.metadata=new Array;var fe=null;typeof we=="string"?fe=new w.Metadata($.NAMED_TAG,we):we instanceof w.Metadata&&(fe=we),fe!==null&&this.metadata.push(fe)}return q.prototype.hasTag=function(Q){for(var ie=0,te=this.metadata;ie<te.length;ie++){var we=te[ie];if(we.key===Q)return!0}return!1},q.prototype.isArray=function(){return this.hasTag($.MULTI_INJECT_TAG)},q.prototype.matchesArray=function(Q){return this.matchesTag($.MULTI_INJECT_TAG)(Q)},q.prototype.isNamed=function(){return this.hasTag($.NAMED_TAG)},q.prototype.isTagged=function(){return this.metadata.some(function(Q){return $.NON_CUSTOM_TAG_KEYS.every(function(ie){return Q.key!==ie})})},q.prototype.isOptional=function(){return this.matchesTag($.OPTIONAL_TAG)(!0)},q.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Q){return Q.key===$.NAMED_TAG})[0]:null},q.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Q){return $.NON_CUSTOM_TAG_KEYS.every(function(ie){return Q.key!==ie})}):null},q.prototype.matchesNamedTag=function(Q){return this.matchesTag($.NAMED_TAG)(Q)},q.prototype.matchesTag=function(Q){var ie=this;return function(te){for(var we=0,fe=ie.metadata;we<fe.length;we++){var ce=fe[we];if(ce.key===Q&&ce.value===te)return!0}return!1}},q}();N.Target=j},52279:function(ct,N,k){"use strict";var $=this&&this.__spreadArray||function(te,we){for(var fe=0,ce=we.length,J=te.length;fe<ce;fe++,J++)te[J]=we[fe];return te};Object.defineProperty(N,"__esModule",{value:!0}),N.resolveInstance=void 0;var K=k(16674),w=k(28421),W=k(6867);function j(te,we,fe){var ce=we.filter(function(M){return M.target!==null&&M.target.type===w.TargetTypeEnum.ClassProperty}),J=ce.map(fe);return ce.forEach(function(M,E){var ge="";ge=M.target.name.value();var be=J[E];te[ge]=be}),te}function q(te,we){return new(te.bind.apply(te,$([void 0],we)))}function Q(te,we){if(Reflect.hasMetadata(W.POST_CONSTRUCT,te)){var fe=Reflect.getMetadata(W.POST_CONSTRUCT,te);try{we[fe.value]()}catch(ce){throw new Error(K.POST_CONSTRUCT_ERROR(te.name,ce.message))}}}function ie(te,we,fe){var ce=null;if(we.length>0){var J=we.filter(function(E){return E.target!==null&&E.target.type===w.TargetTypeEnum.ConstructorArgument}),M=J.map(fe);ce=q(te,M),ce=j(ce,we,fe)}else ce=new te;return Q(te,ce),ce}N.resolveInstance=ie},31927:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.resolve=void 0;var $=k(16674),K=k(28421),w=k(54623),W=k(55800),j=k(52279),q=function(te,we,fe){try{return fe()}catch(ce){throw w.isStackOverflowExeption(ce)?new Error($.CIRCULAR_DEPENDENCY_IN_FACTORY(te,we.toString())):ce}},Q=function(te){return function(we){we.parentContext.setCurrentRequest(we);var fe=we.bindings,ce=we.childRequests,J=we.target&&we.target.isArray(),M=!we.parentRequest||!we.parentRequest.target||!we.target||!we.parentRequest.target.matchesArray(we.target.serviceIdentifier);if(J&&M)return ce.map(function(Ue){var it=Q(te);return it(Ue)});var E=null;if(we.target.isOptional()&&fe.length===0)return;var ge=fe[0],be=ge.scope===K.BindingScopeEnum.Singleton,ze=ge.scope===K.BindingScopeEnum.Request;if(be&&ge.activated)return ge.cache;if(ze&&te!==null&&te.has(ge.id))return te.get(ge.id);if(ge.type===K.BindingTypeEnum.ConstantValue)E=ge.cache,ge.activated=!0;else if(ge.type===K.BindingTypeEnum.Function)E=ge.cache,ge.activated=!0;else if(ge.type===K.BindingTypeEnum.Constructor)E=ge.implementationType;else if(ge.type===K.BindingTypeEnum.DynamicValue&&ge.dynamicValue!==null)E=q("toDynamicValue",ge.serviceIdentifier,function(){return ge.dynamicValue(we.parentContext)});else if(ge.type===K.BindingTypeEnum.Factory&&ge.factory!==null)E=q("toFactory",ge.serviceIdentifier,function(){return ge.factory(we.parentContext)});else if(ge.type===K.BindingTypeEnum.Provider&&ge.provider!==null)E=q("toProvider",ge.serviceIdentifier,function(){return ge.provider(we.parentContext)});else if(ge.type===K.BindingTypeEnum.Instance&&ge.implementationType!==null)E=j.resolveInstance(ge.implementationType,ce,Q(te));else{var Be=W.getServiceIdentifierAsString(we.serviceIdentifier);throw new Error($.INVALID_BINDING_TYPE+" "+Be)}return typeof ge.onActivation=="function"&&(E=ge.onActivation(we.parentContext,E)),be&&(ge.cache=E,ge.activated=!0),ze&&te!==null&&!te.has(ge.id)&&te.set(ge.id,E),E}};function ie(te){var we=Q(te.plan.rootRequest.requestScope);return we(te.plan.rootRequest)}N.resolve=ie},83366:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInSyntax=void 0;var $=k(28421),K=k(71325),w=function(){function W(j){this._binding=j}return W.prototype.inRequestScope=function(){return this._binding.scope=$.BindingScopeEnum.Request,new K.BindingWhenOnSyntax(this._binding)},W.prototype.inSingletonScope=function(){return this._binding.scope=$.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},W.prototype.inTransientScope=function(){return this._binding.scope=$.BindingScopeEnum.Transient,new K.BindingWhenOnSyntax(this._binding)},W}();N.BindingInSyntax=w},99812:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInWhenOnSyntax=void 0;var $=k(83366),K=k(51811),w=k(98370),W=function(){function j(q){this._binding=q,this._bindingWhenSyntax=new w.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new K.BindingOnSyntax(this._binding),this._bindingInSyntax=new $.BindingInSyntax(q)}return j.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},j.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},j.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},j.prototype.when=function(q){return this._bindingWhenSyntax.when(q)},j.prototype.whenTargetNamed=function(q){return this._bindingWhenSyntax.whenTargetNamed(q)},j.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},j.prototype.whenTargetTagged=function(q,Q){return this._bindingWhenSyntax.whenTargetTagged(q,Q)},j.prototype.whenInjectedInto=function(q){return this._bindingWhenSyntax.whenInjectedInto(q)},j.prototype.whenParentNamed=function(q){return this._bindingWhenSyntax.whenParentNamed(q)},j.prototype.whenParentTagged=function(q,Q){return this._bindingWhenSyntax.whenParentTagged(q,Q)},j.prototype.whenAnyAncestorIs=function(q){return this._bindingWhenSyntax.whenAnyAncestorIs(q)},j.prototype.whenNoAncestorIs=function(q){return this._bindingWhenSyntax.whenNoAncestorIs(q)},j.prototype.whenAnyAncestorNamed=function(q){return this._bindingWhenSyntax.whenAnyAncestorNamed(q)},j.prototype.whenAnyAncestorTagged=function(q,Q){return this._bindingWhenSyntax.whenAnyAncestorTagged(q,Q)},j.prototype.whenNoAncestorNamed=function(q){return this._bindingWhenSyntax.whenNoAncestorNamed(q)},j.prototype.whenNoAncestorTagged=function(q,Q){return this._bindingWhenSyntax.whenNoAncestorTagged(q,Q)},j.prototype.whenAnyAncestorMatches=function(q){return this._bindingWhenSyntax.whenAnyAncestorMatches(q)},j.prototype.whenNoAncestorMatches=function(q){return this._bindingWhenSyntax.whenNoAncestorMatches(q)},j.prototype.onActivation=function(q){return this._bindingOnSyntax.onActivation(q)},j}();N.BindingInWhenOnSyntax=W},51811:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingOnSyntax=void 0;var $=k(98370),K=function(){function w(W){this._binding=W}return w.prototype.onActivation=function(W){return this._binding.onActivation=W,new $.BindingWhenSyntax(this._binding)},w}();N.BindingOnSyntax=K},51860:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingToSyntax=void 0;var $=k(16674),K=k(28421),w=k(99812),W=k(71325),j=function(){function q(Q){this._binding=Q}return q.prototype.to=function(Q){return this._binding.type=K.BindingTypeEnum.Instance,this._binding.implementationType=Q,new w.BindingInWhenOnSyntax(this._binding)},q.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+$.INVALID_TO_SELF_VALUE);var Q=this._binding.serviceIdentifier;return this.to(Q)},q.prototype.toConstantValue=function(Q){return this._binding.type=K.BindingTypeEnum.ConstantValue,this._binding.cache=Q,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=K.BindingScopeEnum.Singleton,new W.BindingWhenOnSyntax(this._binding)},q.prototype.toDynamicValue=function(Q){return this._binding.type=K.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Q,this._binding.implementationType=null,new w.BindingInWhenOnSyntax(this._binding)},q.prototype.toConstructor=function(Q){return this._binding.type=K.BindingTypeEnum.Constructor,this._binding.implementationType=Q,this._binding.scope=K.BindingScopeEnum.Singleton,new W.BindingWhenOnSyntax(this._binding)},q.prototype.toFactory=function(Q){return this._binding.type=K.BindingTypeEnum.Factory,this._binding.factory=Q,this._binding.scope=K.BindingScopeEnum.Singleton,new W.BindingWhenOnSyntax(this._binding)},q.prototype.toFunction=function(Q){if(typeof Q!="function")throw new Error($.INVALID_FUNCTION_BINDING);var ie=this.toConstantValue(Q);return this._binding.type=K.BindingTypeEnum.Function,this._binding.scope=K.BindingScopeEnum.Singleton,ie},q.prototype.toAutoFactory=function(Q){return this._binding.type=K.BindingTypeEnum.Factory,this._binding.factory=function(ie){var te=function(){return ie.container.get(Q)};return te},this._binding.scope=K.BindingScopeEnum.Singleton,new W.BindingWhenOnSyntax(this._binding)},q.prototype.toProvider=function(Q){return this._binding.type=K.BindingTypeEnum.Provider,this._binding.provider=Q,this._binding.scope=K.BindingScopeEnum.Singleton,new W.BindingWhenOnSyntax(this._binding)},q.prototype.toService=function(Q){this.toDynamicValue(function(ie){return ie.container.get(Q)})},q}();N.BindingToSyntax=j},71325:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenOnSyntax=void 0;var $=k(51811),K=k(98370),w=function(){function W(j){this._binding=j,this._bindingWhenSyntax=new K.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new $.BindingOnSyntax(this._binding)}return W.prototype.when=function(j){return this._bindingWhenSyntax.when(j)},W.prototype.whenTargetNamed=function(j){return this._bindingWhenSyntax.whenTargetNamed(j)},W.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},W.prototype.whenTargetTagged=function(j,q){return this._bindingWhenSyntax.whenTargetTagged(j,q)},W.prototype.whenInjectedInto=function(j){return this._bindingWhenSyntax.whenInjectedInto(j)},W.prototype.whenParentNamed=function(j){return this._bindingWhenSyntax.whenParentNamed(j)},W.prototype.whenParentTagged=function(j,q){return this._bindingWhenSyntax.whenParentTagged(j,q)},W.prototype.whenAnyAncestorIs=function(j){return this._bindingWhenSyntax.whenAnyAncestorIs(j)},W.prototype.whenNoAncestorIs=function(j){return this._bindingWhenSyntax.whenNoAncestorIs(j)},W.prototype.whenAnyAncestorNamed=function(j){return this._bindingWhenSyntax.whenAnyAncestorNamed(j)},W.prototype.whenAnyAncestorTagged=function(j,q){return this._bindingWhenSyntax.whenAnyAncestorTagged(j,q)},W.prototype.whenNoAncestorNamed=function(j){return this._bindingWhenSyntax.whenNoAncestorNamed(j)},W.prototype.whenNoAncestorTagged=function(j,q){return this._bindingWhenSyntax.whenNoAncestorTagged(j,q)},W.prototype.whenAnyAncestorMatches=function(j){return this._bindingWhenSyntax.whenAnyAncestorMatches(j)},W.prototype.whenNoAncestorMatches=function(j){return this._bindingWhenSyntax.whenNoAncestorMatches(j)},W.prototype.onActivation=function(j){return this._bindingOnSyntax.onActivation(j)},W}();N.BindingWhenOnSyntax=w},98370:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenSyntax=void 0;var $=k(51811),K=k(80758),w=function(){function W(j){this._binding=j}return W.prototype.when=function(j){return this._binding.constraint=j,new $.BindingOnSyntax(this._binding)},W.prototype.whenTargetNamed=function(j){return this._binding.constraint=K.namedConstraint(j),new $.BindingOnSyntax(this._binding)},W.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(j){var q=j.target!==null&&!j.target.isNamed()&&!j.target.isTagged();return q},new $.BindingOnSyntax(this._binding)},W.prototype.whenTargetTagged=function(j,q){return this._binding.constraint=K.taggedConstraint(j)(q),new $.BindingOnSyntax(this._binding)},W.prototype.whenInjectedInto=function(j){return this._binding.constraint=function(q){return K.typeConstraint(j)(q.parentRequest)},new $.BindingOnSyntax(this._binding)},W.prototype.whenParentNamed=function(j){return this._binding.constraint=function(q){return K.namedConstraint(j)(q.parentRequest)},new $.BindingOnSyntax(this._binding)},W.prototype.whenParentTagged=function(j,q){return this._binding.constraint=function(Q){return K.taggedConstraint(j)(q)(Q.parentRequest)},new $.BindingOnSyntax(this._binding)},W.prototype.whenAnyAncestorIs=function(j){return this._binding.constraint=function(q){return K.traverseAncerstors(q,K.typeConstraint(j))},new $.BindingOnSyntax(this._binding)},W.prototype.whenNoAncestorIs=function(j){return this._binding.constraint=function(q){return!K.traverseAncerstors(q,K.typeConstraint(j))},new $.BindingOnSyntax(this._binding)},W.prototype.whenAnyAncestorNamed=function(j){return this._binding.constraint=function(q){return K.traverseAncerstors(q,K.namedConstraint(j))},new $.BindingOnSyntax(this._binding)},W.prototype.whenNoAncestorNamed=function(j){return this._binding.constraint=function(q){return!K.traverseAncerstors(q,K.namedConstraint(j))},new $.BindingOnSyntax(this._binding)},W.prototype.whenAnyAncestorTagged=function(j,q){return this._binding.constraint=function(Q){return K.traverseAncerstors(Q,K.taggedConstraint(j)(q))},new $.BindingOnSyntax(this._binding)},W.prototype.whenNoAncestorTagged=function(j,q){return this._binding.constraint=function(Q){return!K.traverseAncerstors(Q,K.taggedConstraint(j)(q))},new $.BindingOnSyntax(this._binding)},W.prototype.whenAnyAncestorMatches=function(j){return this._binding.constraint=function(q){return K.traverseAncerstors(q,j)},new $.BindingOnSyntax(this._binding)},W.prototype.whenNoAncestorMatches=function(j){return this._binding.constraint=function(q){return!K.traverseAncerstors(q,j)},new $.BindingOnSyntax(this._binding)},W}();N.BindingWhenSyntax=w},80758:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.typeConstraint=N.namedConstraint=N.taggedConstraint=N.traverseAncerstors=void 0;var $=k(6867),K=k(47738),w=function(Q,ie){var te=Q.parentRequest;return te!==null?ie(te)?!0:w(te,ie):!1};N.traverseAncerstors=w;var W=function(Q){return function(ie){var te=function(we){return we!==null&&we.target!==null&&we.target.matchesTag(Q)(ie)};return te.metaData=new K.Metadata(Q,ie),te}};N.taggedConstraint=W;var j=W($.NAMED_TAG);N.namedConstraint=j;var q=function(Q){return function(ie){var te=null;if(ie!==null)if(te=ie.bindings[0],typeof Q=="string"){var we=te.serviceIdentifier;return we===Q}else{var fe=ie.bindings[0].implementationType;return Q===fe}return!1}};N.typeConstraint=q},70600:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiBindToService=void 0;var k=function($){return function(K){return function(){for(var w=[],W=0;W<arguments.length;W++)w[W]=arguments[W];return w.forEach(function(j){return $.bind(j).toService(K)})}}};N.multiBindToService=k},54623:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.isStackOverflowExeption=void 0;var $=k(16674);function K(w){return w instanceof RangeError||w.message===$.STACK_OVERFLOW}N.isStackOverflowExeption=K},37791:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.id=void 0;var k=0;function $(){return k++}N.id=$},55800:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.circularDependencyToException=N.listMetadataForTarget=N.listRegisteredBindingsForServiceIdentifier=N.getServiceIdentifierAsString=N.getFunctionName=void 0;var $=k(16674);function K(te){if(typeof te=="function"){var we=te;return we.name}else{if(typeof te=="symbol")return te.toString();var we=te;return we}}N.getServiceIdentifierAsString=K;function w(te,we,fe){var ce="",J=fe(te,we);return J.length!==0&&(ce=`
Registered bindings:`,J.forEach(function(M){var E="Object";M.implementationType!==null&&(E=ie(M.implementationType)),ce=ce+`
 `+E,M.constraint.metaData&&(ce=ce+" - "+M.constraint.metaData)})),ce}N.listRegisteredBindingsForServiceIdentifier=w;function W(te,we){return te.parentRequest===null?!1:te.parentRequest.serviceIdentifier===we?!0:W(te.parentRequest,we)}function j(te){function we(ce,J){J===void 0&&(J=[]);var M=K(ce.serviceIdentifier);return J.push(M),ce.parentRequest!==null?we(ce.parentRequest,J):J}var fe=we(te);return fe.reverse().join(" --> ")}function q(te){te.childRequests.forEach(function(we){if(W(we,we.serviceIdentifier)){var fe=j(we);throw new Error($.CIRCULAR_DEPENDENCY+" "+fe)}else q(we)})}N.circularDependencyToException=q;function Q(te,we){if(we.isTagged()||we.isNamed()){var fe="",ce=we.getNamedTag(),J=we.getCustomTags();return ce!==null&&(fe+=ce.toString()+`
`),J!==null&&J.forEach(function(M){fe+=M.toString()+`
`})," "+te+`
 `+te+" - "+fe}else return" "+te}N.listMetadataForTarget=Q;function ie(te){if(te.name)return te.name;var we=te.toString(),fe=we.match(/^function\s*([^\s(]+)/);return fe?fe[1]:"Anonymous function: "+we}N.getFunctionName=ie},47443:function(ct,N,k){var $=k(42118);function K(w,W){var j=w==null?0:w.length;return!!j&&$(w,W,0)>-1}ct.exports=K},1196:function(ct){function N(k,$,K){for(var w=-1,W=k==null?0:k.length;++w<W;)if(K($,k[w]))return!0;return!1}ct.exports=N},29750:function(ct){function N(k,$,K){return k===k&&(K!==void 0&&(k=k<=K?k:K),$!==void 0&&(k=k>=$?k:$)),k}ct.exports=N},41848:function(ct){function N(k,$,K,w){for(var W=k.length,j=K+(w?1:-1);w?j--:++j<W;)if($(k[j],j,k))return j;return-1}ct.exports=N},42118:function(ct,N,k){var $=k(41848),K=k(62722),w=k(42351);function W(j,q,Q){return q===q?w(j,q,Q):$(j,K,Q)}ct.exports=W},74221:function(ct){function N(k,$,K,w){for(var W=K-1,j=k.length;++W<j;)if(w(k[W],$))return W;return-1}ct.exports=N},62722:function(ct){function N(k){return k!==k}ct.exports=N},65464:function(ct,N,k){var $=k(29932),K=k(42118),w=k(74221),W=k(7518),j=k(278),q=Array.prototype,Q=q.splice;function ie(te,we,fe,ce){var J=ce?w:K,M=-1,E=we.length,ge=te;for(te===we&&(we=j(we)),fe&&(ge=$(te,W(fe)));++M<E;)for(var be=0,ze=we[M],Be=fe?fe(ze):ze;(be=J(ge,Be,be,ce))>-1;)ge!==te&&Q.call(ge,be,1),Q.call(te,be,1);return te}ct.exports=ie},45652:function(ct,N,k){var $=k(88668),K=k(47443),w=k(1196),W=k(74757),j=k(23593),q=k(21814),Q=200;function ie(te,we,fe){var ce=-1,J=K,M=te.length,E=!0,ge=[],be=ge;if(fe)E=!1,J=w;else if(M>=Q){var ze=we?null:j(te);if(ze)return q(ze);E=!1,J=W,be=new $}else be=we?[]:ge;e:for(;++ce<M;){var Be=te[ce],Ue=we?we(Be):Be;if(Be=fe||Be!==0?Be:0,E&&Ue===Ue){for(var it=be.length;it--;)if(be[it]===Ue)continue e;we&&be.push(Ue),ge.push(Be)}else J(be,Ue,fe)||(be!==ge&&be.push(Ue),ge.push(Be))}return ge}ct.exports=ie},23593:function(ct,N,k){var $=k(58525),K=k(50308),w=k(21814),W=1/0,j=$&&1/w(new $([,-0]))[1]==W?function(q){return new $(q)}:K;ct.exports=j},42351:function(ct){function N(k,$,K){for(var w=K-1,W=k.length;++w<W;)if(k[w]===$)return w;return-1}ct.exports=N},74691:function(ct,N,k){var $=k(29750),K=k(14841);function w(W,j,q){return q===void 0&&(q=j,j=void 0),q!==void 0&&(q=K(q),q=q===q?q:0),j!==void 0&&(j=K(j),j=j===j?j:0),$(K(W),j,q)}ct.exports=w},51584:function(ct,N,k){var $=k(44239),K=k(37005),w="[object Boolean]";function W(j){return j===!0||j===!1||K(j)&&$(j)==w}ct.exports=W},18446:function(ct,N,k){var $=k(90939);function K(w,W){return $(w,W)}ct.exports=K},14293:function(ct){function N(k){return k==null}ct.exports=N},81763:function(ct,N,k){var $=k(44239),K=k(37005),w="[object Number]";function W(j){return typeof j=="number"||K(j)&&$(j)==w}ct.exports=W},52353:function(ct){function N(k){return k===void 0}ct.exports=N},30236:function(ct,N,k){var $=k(42980),K=k(21463),w=K(function(W,j,q,Q){$(W,j,q,Q)});ct.exports=w},50308:function(ct){function N(){}ct.exports=N},97019:function(ct,N,k){var $=k(5976),K=k(45604),w=$(K);ct.exports=w},45604:function(ct,N,k){var $=k(65464);function K(w,W){return w&&w.length&&W&&W.length?$(w,W):w}ct.exports=K},44908:function(ct,N,k){var $=k(45652);function K(w){return w&&w.length?$(w):[]}ct.exports=K},6158:function(ct){(function(N,k){ct.exports=k()})(this,function(){"use strict";var N,k,$;function K(w,W){if(!N)N=W;else if(!k)k=W;else{var j="var sharedChunk = {}; ("+N+")(sharedChunk); ("+k+")(sharedChunk);",q={};N(q),$=W(q),typeof window!="undefined"&&($.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}return K(["exports"],function(w){"use strict";function W(h,v){return h(v={exports:{}},v.exports),v.exports}var j=q;function q(h,v,_,R){this.cx=3*h,this.bx=3*(_-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(R-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=R,this.p2x=_,this.p2y=R}q.prototype.sampleCurveX=function(h){return((this.ax*h+this.bx)*h+this.cx)*h},q.prototype.sampleCurveY=function(h){return((this.ay*h+this.by)*h+this.cy)*h},q.prototype.sampleCurveDerivativeX=function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},q.prototype.solveCurveX=function(h,v){var _,R,F,z,X;for(v===void 0&&(v=1e-6),F=h,X=0;X<8;X++){if(z=this.sampleCurveX(F)-h,Math.abs(z)<v)return F;var ue=this.sampleCurveDerivativeX(F);if(Math.abs(ue)<1e-6)break;F-=z/ue}if((F=h)<(_=0))return _;if(F>(R=1))return R;for(;_<R;){if(z=this.sampleCurveX(F),Math.abs(z-h)<v)return F;h>z?_=F:R=F,F=.5*(R-_)+_}return F},q.prototype.solve=function(h,v){return this.sampleCurveY(this.solveCurveX(h,v))};var Q=ie;function ie(h,v){this.x=h,this.y=v}ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,v){return this.clone()._rotateAround(h,v)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var v=h.x-this.x,_=h.y-this.y;return v*v+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,v){return Math.atan2(this.x*v-this.y*h,this.x*h+this.y*v)},_matMult:function(h){var v=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=v,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var v=Math.cos(h),_=Math.sin(h),R=_*this.x+v*this.y;return this.x=v*this.x-_*this.y,this.y=R,this},_rotateAround:function(h,v){var _=Math.cos(h),R=Math.sin(h),F=v.y+R*(this.x-v.x)+_*(this.y-v.y);return this.x=v.x+_*(this.x-v.x)-R*(this.y-v.y),this.y=F,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ie.convert=function(h){return h instanceof ie?h:Array.isArray(h)?new ie(h[0],h[1]):h};var te=typeof self!="undefined"?self:{},we=Math.pow(2,53)-1;function fe(h,v,_,R){var F=new j(h,v,_,R);return function(z){return F.solve(z)}}var ce=fe(.25,.1,.25,1);function J(h,v,_){return Math.min(_,Math.max(v,h))}function M(h,v,_){var R=_-v,F=((h-v)%R+R)%R+v;return F===v?_:F}function E(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,F=v;R<F.length;R+=1){var z=F[R];for(var X in z)h[X]=z[X]}return h}var ge=1;function be(){return ge++}function ze(){return function h(v){return v?(v^16*Math.random()>>v/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()}function Be(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)}function Ue(h,v){h.forEach(function(_){v[_]&&(v[_]=v[_].bind(v))})}function it(h,v){return h.indexOf(v,h.length-v.length)!==-1}function ht(h,v,_){var R={};for(var F in h)R[F]=v.call(_||this,h[F],F,h);return R}function Le(h,v,_){var R={};for(var F in h)v.call(_||this,h[F],F,h)&&(R[F]=h[F]);return R}function Se(h){return Array.isArray(h)?h.map(Se):typeof h=="object"&&h?ht(h,Se):h}var ye={};function Ve(h){ye[h]||(typeof console!="undefined"&&console.warn(h),ye[h]=!0)}function je(h,v,_){return(_.y-h.y)*(v.x-h.x)>(v.y-h.y)*(_.x-h.x)}function Et(h){for(var v=0,_=0,R=h.length,F=R-1,z=void 0,X=void 0;_<R;F=_++)v+=((X=h[F]).x-(z=h[_]).x)*(z.y+X.y);return v}function Oe(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Qe(h){var v={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(R,F,z,X){var ue=z||X;return v[F]=!ue||ue.toLowerCase(),""}),v["max-age"]){var _=parseInt(v["max-age"],10);isNaN(_)?delete v["max-age"]:v["max-age"]=_}return v}var ne=null;function We(h){if(ne==null){var v=h.navigator?h.navigator.userAgent:null;ne=!!h.safari||!(!v||!(/\b(iPad|iPhone|iPod)\b/.test(v)||v.match("Safari")&&!v.match("Chrome")))}return ne}function oe(h){try{var v=te[h];return v.setItem("_mapbox_test_",1),v.removeItem("_mapbox_test_"),!0}catch(_){return!1}}var Fe,st,Ce,De,tt=te.performance&&te.performance.now?te.performance.now.bind(te.performance):Date.now.bind(Date),_e=te.requestAnimationFrame||te.mozRequestAnimationFrame||te.webkitRequestAnimationFrame||te.msRequestAnimationFrame,me=te.cancelAnimationFrame||te.mozCancelAnimationFrame||te.webkitCancelAnimationFrame||te.msCancelAnimationFrame,Ge={now:tt,frame:function(h){var v=_e(h);return{cancel:function(){return me(v)}}},getImageData:function(h,v){v===void 0&&(v=0);var _=te.document.createElement("canvas"),R=_.getContext("2d");if(!R)throw new Error("failed to create canvas 2d context");return _.width=h.width,_.height=h.height,R.drawImage(h,0,0,h.width,h.height),R.getImageData(-v,-v,h.width+2*v,h.height+2*v)},resolveURL:function(h){return Fe||(Fe=te.document.createElement("a")),Fe.href=h,Fe.href},hardwareConcurrency:te.navigator&&te.navigator.hardwareConcurrency||4,get devicePixelRatio(){return te.devicePixelRatio},get prefersReducedMotion(){return!!te.matchMedia&&(st==null&&(st=te.matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}},Ze={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},pt={supported:!1,testSupport:function(h){!Ht&&De&&(Je?$e(h):Ce=h)}},Ht=!1,Je=!1;function $e(h){var v=h.createTexture();h.bindTexture(h.TEXTURE_2D,v);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,De),h.isContextLost())return;pt.supported=!0}catch(_){}h.deleteTexture(v),Ht=!0}te.document&&((De=te.document.createElement("img")).onload=function(){Ce&&$e(Ce),Ce=null,Je=!0},De.onerror=function(){Ht=!0,Ce=null},De.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Te="01",Ye=function(h,v){this._transformRequestFn=h,this._customAccessToken=v,this._createSkuToken()};function ft(h){return h.indexOf("mapbox:")===0}Ye.prototype._createSkuToken=function(){var h=function(){for(var v="",_=0;_<10;_++)v+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Te,v].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=h.token,this._skuTokenExpiresAt=h.tokenExpiresAt},Ye.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ye.prototype.transformRequest=function(h,v){return this._transformRequestFn&&this._transformRequestFn(h,v)||{url:h}},Ye.prototype.normalizeStyleURL=function(h,v){if(!ft(h))return h;var _=Pt(h);return _.path="/styles/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},Ye.prototype.normalizeGlyphsURL=function(h,v){if(!ft(h))return h;var _=Pt(h);return _.path="/fonts/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},Ye.prototype.normalizeSourceURL=function(h,v){if(!ft(h))return h;var _=Pt(h);return _.path="/v4/"+_.authority+".json",_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||v)},Ye.prototype.normalizeSpriteURL=function(h,v,_,R){var F=Pt(h);return ft(h)?(F.path="/styles/v1"+F.path+"/sprite"+v+_,this._makeAPIURL(F,this._customAccessToken||R)):(F.path+=""+v+_,rr(F))},Ye.prototype.normalizeTileURL=function(h,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),h&&!ft(h))return h;var _=Pt(h);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ge.devicePixelRatio>=2||v===512?"@2x":"")+(pt.supported?".webp":"$1")),_.path=_.path.replace(/^.+\/v4\//,"/"),_.path="/v4"+_.path;var R=this._customAccessToken||function(F){for(var z=0,X=F;z<X.length;z+=1){var ue=X[z].match(/^access_token=(.*)$/);if(ue)return ue[1]}return null}(_.params)||Ze.ACCESS_TOKEN;return Ze.REQUIRE_ACCESS_TOKEN&&R&&this._skuToken&&_.params.push("sku="+this._skuToken),this._makeAPIURL(_,R)},Ye.prototype.canonicalizeTileURL=function(h,v){var _=Pt(h);if(!_.path.match(/(^\/v4\/)/)||!_.path.match(/\.[\w]+$/))return h;var R="mapbox://tiles/";R+=_.path.replace("/v4/","");var F=_.params;return v&&(F=F.filter(function(z){return!z.match(/^access_token=/)})),F.length&&(R+="?"+F.join("&")),R},Ye.prototype.canonicalizeTileset=function(h,v){for(var _=!!v&&ft(v),R=[],F=0,z=h.tiles||[];F<z.length;F+=1){var X=z[F];Ne(X)?R.push(this.canonicalizeTileURL(X,_)):R.push(X)}return R},Ye.prototype._makeAPIURL=function(h,v){var _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",R=Pt(Ze.API_URL);if(h.protocol=R.protocol,h.authority=R.authority,h.protocol==="http"){var F=h.params.indexOf("secure");F>=0&&h.params.splice(F,1)}if(R.path!=="/"&&(h.path=""+R.path+h.path),!Ze.REQUIRE_ACCESS_TOKEN)return rr(h);if(!(v=v||Ze.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+_);if(v[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+_);return h.params=h.params.filter(function(z){return z.indexOf("access_token")===-1}),h.params.push("access_token="+v),rr(h)};var ke=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ne(h){return ke.test(h)}var dt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Pt(h){var v=h.match(dt);if(!v)throw new Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("&"):[]}}function rr(h){var v=h.params.length?"?"+h.params.join("&"):"";return h.protocol+"://"+h.authority+h.path+v}function xr(h){if(!h)return null;var v=h.split(".");if(!v||v.length!==3)return null;try{return JSON.parse(decodeURIComponent(te.atob(v[1]).split("").map(function(_){return"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(_){return null}}var ut=function(h){this.type=h,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ut.prototype.getStorageKey=function(h){var v,_=xr(Ze.ACCESS_TOKEN);return v=_&&_.u?te.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,function(R,F){return String.fromCharCode(+("0x"+F))})):Ze.ACCESS_TOKEN||"",h?"mapbox.eventData."+h+":"+v:"mapbox.eventData:"+v},ut.prototype.fetchEventData=function(){var h=oe("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{var R=te.localStorage.getItem(v);R&&(this.eventData=JSON.parse(R));var F=te.localStorage.getItem(_);F&&(this.anonId=F)}catch(z){Ve("Unable to read from LocalStorage")}},ut.prototype.saveEventData=function(){var h=oe("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{te.localStorage.setItem(_,this.anonId),Object.keys(this.eventData).length>=1&&te.localStorage.setItem(v,JSON.stringify(this.eventData))}catch(R){Ve("Unable to write to LocalStorage")}},ut.prototype.processRequests=function(h){},ut.prototype.postEvent=function(h,v,_,R){var F=this;if(Ze.EVENTS_URL){var z=Pt(Ze.EVENTS_URL);z.params.push("access_token="+(R||Ze.ACCESS_TOKEN||""));var X={event:this.type,created:new Date(h).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Te,userId:this.anonId},ue=v?E(X,v):X,Ie={url:rr(z),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ue])};this.pendingRequest=It(Ie,function(qe){F.pendingRequest=null,_(qe),F.saveEventData(),F.processRequests(R)})}},ut.prototype.queueRequest=function(h,v){this.queue.push(h),this.processRequests(v)};var nn,Gr,Xr=function(h){function v(){h.call(this,"map.load"),this.success={},this.skuToken=""}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postMapLoadEvent=function(_,R,F,z){this.skuToken=F;var X=!(!z&&!Ze.ACCESS_TOKEN),ue=Array.isArray(_)&&_.some(function(Ie){return ft(Ie)||Ne(Ie)});Ze.EVENTS_URL&&X&&ue&&this.queueRequest({id:R,timestamp:Date.now()},z)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){var F=this.queue.shift(),z=F.id,X=F.timestamp;z&&this.success[z]||(this.anonId||this.fetchEventData(),Be(this.anonId)||(this.anonId=ze()),this.postEvent(X,{skuToken:this.skuToken},function(ue){ue||z&&(R.success[z]=!0)},_))}},v}(ut),Nt=new(function(h){function v(_){h.call(this,"appUserTurnstile"),this._customAccessToken=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postTurnstileEvent=function(_,R){Ze.EVENTS_URL&&Ze.ACCESS_TOKEN&&Array.isArray(_)&&_.some(function(F){return ft(F)||Ne(F)})&&this.queueRequest(Date.now(),R)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var F=xr(Ze.ACCESS_TOKEN),z=F?F.u:Ze.ACCESS_TOKEN,X=z!==this.eventData.tokenU;Be(this.anonId)||(this.anonId=ze(),X=!0);var ue=this.queue.shift();if(this.eventData.lastSuccess){var Ie=new Date(this.eventData.lastSuccess),qe=new Date(ue),lt=(ue-this.eventData.lastSuccess)/864e5;X=X||lt>=1||lt<-1||Ie.getDate()!==qe.getDate()}else X=!0;if(!X)return this.processRequests();this.postEvent(ue,{"enabled.telemetry":!1},function(yt){yt||(R.eventData.lastSuccess=ue,R.eventData.tokenU=z)},_)}},v}(ut)),Yt=Nt.postTurnstileEvent.bind(Nt),sr=new Xr,Dt=sr.postMapLoadEvent.bind(sr),Qt=500,Sr=50;function Er(){te.caches&&!nn&&(nn=te.caches.open("mapbox-tiles"))}function Fr(h){var v=h.indexOf("?");return v<0?h:h.slice(0,v)}var zr,le=1/0;function H(){return zr==null&&(zr=te.OffscreenCanvas&&new te.OffscreenCanvas(1,1).getContext("2d")&&typeof te.createImageBitmap=="function"),zr}var re={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(re);var Re=function(h){function v(_,R,F){R===401&&Ne(F)&&(_+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),h.call(this,_),this.status=R,this.url=F,this.name=this.constructor.name,this.message=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},v}(Error),Ke=Oe()?function(){return self.worker&&self.worker.referrer}:function(){return(te.location.protocol==="blob:"?te.parent:te).location.href},Tt,or,jt=function(h,v){if(!(/^file:/.test(_=h.url)||/^file:/.test(Ke())&&!/^\w+:/.test(_))){if(te.fetch&&te.Request&&te.AbortController&&te.Request.prototype.hasOwnProperty("signal"))return function(R,F){var z,X=new te.AbortController,ue=new te.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:Ke(),signal:X.signal}),Ie=!1,qe=!1,lt=(z=ue.url).indexOf("sku=")>0&&Ne(z);R.type==="json"&&ue.headers.set("Accept","application/json");var yt=function(Ut,ur,fr){if(!qe){if(Ut&&Ut.message!=="SecurityError"&&Ve(Ut),ur&&fr)return Lt(ur);var Dr=Date.now();te.fetch(ue).then(function(Mr){if(Mr.ok){var Yr=lt?Mr.clone():null;return Lt(Mr,Yr,Dr)}return F(new Re(Mr.statusText,Mr.status,R.url))}).catch(function(Mr){Mr.code!==20&&F(new Error(Mr.message))})}},Lt=function(Ut,ur,fr){(R.type==="arrayBuffer"?Ut.arrayBuffer():R.type==="json"?Ut.json():Ut.text()).then(function(Dr){qe||(ur&&fr&&function(Mr,Yr,on){if(Er(),nn){var vn={status:Yr.status,statusText:Yr.statusText,headers:new te.Headers};Yr.headers.forEach(function(Fn,ci){return vn.headers.set(ci,Fn)});var wn=Qe(Yr.headers.get("Cache-Control")||"");wn["no-store"]||(wn["max-age"]&&vn.headers.set("Expires",new Date(on+1e3*wn["max-age"]).toUTCString()),new Date(vn.headers.get("Expires")).getTime()-on<42e4||function(Fn,ci){if(Gr===void 0)try{new Response(new ReadableStream),Gr=!0}catch(Si){Gr=!1}Gr?ci(Fn.body):Fn.blob().then(ci)}(Yr,function(Fn){var ci=new te.Response(Fn,vn);Er(),nn&&nn.then(function(Si){return Si.put(Fr(Mr.url),ci)}).catch(function(Si){return Ve(Si.message)})}))}}(ue,ur,fr),Ie=!0,F(null,Dr,Ut.headers.get("Cache-Control"),Ut.headers.get("Expires")))}).catch(function(Dr){qe||F(new Error(Dr.message))})};return lt?function(Ut,ur){if(Er(),!nn)return ur(null);var fr=Fr(Ut.url);nn.then(function(Dr){Dr.match(fr).then(function(Mr){var Yr=function(on){if(!on)return!1;var vn=new Date(on.headers.get("Expires")||0),wn=Qe(on.headers.get("Cache-Control")||"");return vn>Date.now()&&!wn["no-cache"]}(Mr);Dr.delete(fr),Yr&&Dr.put(fr,Mr.clone()),ur(null,Mr,Yr)}).catch(ur)}).catch(ur)}(ue,yt):yt(null,null),{cancel:function(){qe=!0,Ie||X.abort()}}}(h,v);if(Oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,v,void 0,!0)}var _;return function(R,F){var z=new te.XMLHttpRequest;for(var X in z.open(R.method||"GET",R.url,!0),R.type==="arrayBuffer"&&(z.responseType="arraybuffer"),R.headers)z.setRequestHeader(X,R.headers[X]);return R.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=R.credentials==="include",z.onerror=function(){F(new Error(z.statusText))},z.onload=function(){if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){var ue=z.response;if(R.type==="json")try{ue=JSON.parse(z.response)}catch(Ie){return F(Ie)}F(null,ue,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else F(new Re(z.statusText,z.status,R.url))},z.send(R.body),{cancel:function(){return z.abort()}}}(h,v)},wt=function(h,v){return jt(E(h,{type:"arrayBuffer"}),v)},It=function(h,v){return jt(E(h,{method:"POST"}),v)},de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Tt=[],or=0;var pe=function(h,v){if(pt.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),or>=Ze.MAX_PARALLEL_IMAGE_REQUESTS){var _={requestParameters:h,callback:v,cancelled:!1,cancel:function(){this.cancelled=!0}};return Tt.push(_),_}or++;var R=!1,F=function(){if(!R)for(R=!0,or--;Tt.length&&or<Ze.MAX_PARALLEL_IMAGE_REQUESTS;){var X=Tt.shift();X.cancelled||(X.cancel=pe(X.requestParameters,X.callback).cancel)}},z=wt(h,function(X,ue,Ie,qe){F(),X?v(X):ue&&(H()?function(lt,yt){var Lt=new te.Blob([new Uint8Array(lt)],{type:"image/png"});te.createImageBitmap(Lt).then(function(Ut){yt(null,Ut)}).catch(function(Ut){yt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ue,v):function(lt,yt,Lt,Ut){var ur=new te.Image,fr=te.URL;ur.onload=function(){yt(null,ur),fr.revokeObjectURL(ur.src),ur.onload=null,te.requestAnimationFrame(function(){ur.src=de})},ur.onerror=function(){return yt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Dr=new te.Blob([new Uint8Array(lt)],{type:"image/png"});ur.cacheControl=Lt,ur.expires=Ut,ur.src=lt.byteLength?fr.createObjectURL(Dr):de}(ue,v,Ie,qe))});return{cancel:function(){z.cancel(),F()}}};function Me(h,v,_){_[h]&&_[h].indexOf(v)!==-1||(_[h]=_[h]||[],_[h].push(v))}function et(h,v,_){if(_&&_[h]){var R=_[h].indexOf(v);R!==-1&&_[h].splice(R,1)}}var St=function(h,v){v===void 0&&(v={}),E(this,v),this.type=h},Gt=function(h){function v(_,R){R===void 0&&(R={}),h.call(this,"error",E({error:_},R))}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(St),gr=function(){};gr.prototype.on=function(h,v){return this._listeners=this._listeners||{},Me(h,v,this._listeners),this},gr.prototype.off=function(h,v){return et(h,v,this._listeners),et(h,v,this._oneTimeListeners),this},gr.prototype.once=function(h,v){return this._oneTimeListeners=this._oneTimeListeners||{},Me(h,v,this._oneTimeListeners),this},gr.prototype.fire=function(h,v){typeof h=="string"&&(h=new St(h,v||{}));var _=h.type;if(this.listens(_)){h.target=this;for(var R=0,F=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];R<F.length;R+=1)F[R].call(this,h);for(var z=0,X=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];z<X.length;z+=1){var ue=X[z];et(_,ue,this._oneTimeListeners),ue.call(this,h)}var Ie=this._eventedParent;Ie&&(E(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Ie.fire(h))}else h instanceof Gt&&console.error(h.error);return this},gr.prototype.listens=function(h){return this._listeners&&this._listeners[h]&&this._listeners[h].length>0||this._oneTimeListeners&&this._oneTimeListeners[h]&&this._oneTimeListeners[h].length>0||this._eventedParent&&this._eventedParent.listens(h)},gr.prototype.setEventedParent=function(h,v){return this._eventedParent=h,this._eventedParentData=v,this};var At={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ot=function(h,v,_,R){this.message=(h?h+": ":"")+_,R&&(this.identifier=R),v!=null&&v.__line__&&(this.line=v.__line__)};function Ot(h){var v=h.value;return v?[new ot(h.key,v,"constants have been deprecated as of v8")]:[]}function yr(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,F=v;R<F.length;R+=1){var z=F[R];for(var X in z)h[X]=z[X]}return h}function kr(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Ft(h){if(Array.isArray(h))return h.map(Ft);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){var v={};for(var _ in h)v[_]=Ft(h[_]);return v}return kr(h)}var Mn=function(h){function v(_,R){h.call(this,R),this.message=R,this.key=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(Error),qn=function(h,v){v===void 0&&(v=[]),this.parent=h,this.bindings={};for(var _=0,R=v;_<R.length;_+=1){var F=R[_];this.bindings[F[0]]=F[1]}};qn.prototype.concat=function(h){return new qn(this,h)},qn.prototype.get=function(h){if(this.bindings[h])return this.bindings[h];if(this.parent)return this.parent.get(h);throw new Error(h+" not found in scope.")},qn.prototype.has=function(h){return!!this.bindings[h]||!!this.parent&&this.parent.has(h)};var ri={kind:"null"},un={kind:"number"},Yn={kind:"string"},jn={kind:"boolean"},Kn={kind:"color"},aa={kind:"object"},vi={kind:"value"},da={kind:"collator"},Oa={kind:"formatted"},xa={kind:"resolvedImage"};function Va(h,v){return{kind:"array",itemType:h,N:v}}function Sa(h){if(h.kind==="array"){var v=Sa(h.itemType);return typeof h.N=="number"?"array<"+v+", "+h.N+">":h.itemType.kind==="value"?"array":"array<"+v+">"}return h.kind}var gs=[ri,un,Yn,jn,Kn,Oa,aa,Va(vi),xa];function io(h,v){if(v.kind==="error")return null;if(h.kind==="array"){if(v.kind==="array"&&(v.N===0&&v.itemType.kind==="value"||!io(h.itemType,v.itemType))&&(typeof h.N!="number"||h.N===v.N))return null}else{if(h.kind===v.kind)return null;if(h.kind==="value"){for(var _=0,R=gs;_<R.length;_+=1)if(!io(R[_],v))return null}}return"Expected "+Sa(h)+" but found "+Sa(v)+" instead."}function Oo(h,v){return v.some(function(_){return _.kind===h.kind})}function ai(h,v){return v.some(function(_){return _==="null"?h===null:_==="array"?Array.isArray(h):_==="object"?h&&!Array.isArray(h)&&typeof h=="object":_===typeof h})}var _i=W(function(h,v){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function R(ue){return(ue=Math.round(ue))<0?0:ue>255?255:ue}function F(ue){return R(ue[ue.length-1]==="%"?parseFloat(ue)/100*255:parseInt(ue))}function z(ue){return(Ie=ue[ue.length-1]==="%"?parseFloat(ue)/100:parseFloat(ue))<0?0:Ie>1?1:Ie;var Ie}function X(ue,Ie,qe){return qe<0?qe+=1:qe>1&&(qe-=1),6*qe<1?ue+(Ie-ue)*qe*6:2*qe<1?Ie:3*qe<2?ue+(Ie-ue)*(2/3-qe)*6:ue}try{v.parseCSSColor=function(ue){var Ie,qe=ue.replace(/ /g,"").toLowerCase();if(qe in _)return _[qe].slice();if(qe[0]==="#")return qe.length===4?(Ie=parseInt(qe.substr(1),16))>=0&&Ie<=4095?[(3840&Ie)>>4|(3840&Ie)>>8,240&Ie|(240&Ie)>>4,15&Ie|(15&Ie)<<4,1]:null:qe.length===7&&(Ie=parseInt(qe.substr(1),16))>=0&&Ie<=16777215?[(16711680&Ie)>>16,(65280&Ie)>>8,255&Ie,1]:null;var lt=qe.indexOf("("),yt=qe.indexOf(")");if(lt!==-1&&yt+1===qe.length){var Lt=qe.substr(0,lt),Ut=qe.substr(lt+1,yt-(lt+1)).split(","),ur=1;switch(Lt){case"rgba":if(Ut.length!==4)return null;ur=z(Ut.pop());case"rgb":return Ut.length!==3?null:[F(Ut[0]),F(Ut[1]),F(Ut[2]),ur];case"hsla":if(Ut.length!==4)return null;ur=z(Ut.pop());case"hsl":if(Ut.length!==3)return null;var fr=(parseFloat(Ut[0])%360+360)%360/360,Dr=z(Ut[1]),Mr=z(Ut[2]),Yr=Mr<=.5?Mr*(Dr+1):Mr+Dr-Mr*Dr,on=2*Mr-Yr;return[R(255*X(on,Yr,fr+1/3)),R(255*X(on,Yr,fr)),R(255*X(on,Yr,fr-1/3)),ur];default:return null}}return null}}catch(ue){}}).parseCSSColor,ea=function(h,v,_,R){R===void 0&&(R=1),this.r=h,this.g=v,this.b=_,this.a=R};ea.parse=function(h){if(h){if(h instanceof ea)return h;if(typeof h=="string"){var v=_i(h);if(v)return new ea(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}}},ea.prototype.toString=function(){var h=this.toArray(),v=h[1],_=h[2],R=h[3];return"rgba("+Math.round(h[0])+","+Math.round(v)+","+Math.round(_)+","+R+")"},ea.prototype.toArray=function(){var h=this.a;return h===0?[0,0,0,0]:[255*this.r/h,255*this.g/h,255*this.b/h,h]},ea.black=new ea(0,0,0,1),ea.white=new ea(1,1,1,1),ea.transparent=new ea(0,0,0,0),ea.red=new ea(1,0,0,1);var Ha=function(h,v,_){this.sensitivity=h?v?"variant":"case":v?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ha.prototype.compare=function(h,v){return this.collator.compare(h,v)},Ha.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ms=function(h,v,_,R,F){this.text=h,this.image=v,this.scale=_,this.fontStack=R,this.textColor=F},lo=function(h){this.sections=h};lo.fromString=function(h){return new lo([new ms(h,null,null,null,null)])},lo.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(h){return h.text.length!==0||h.image&&h.image.name.length!==0})},lo.factory=function(h){return h instanceof lo?h:lo.fromString(h)},lo.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(h){return h.text}).join("")},lo.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];if(R.image)h.push(["image",R.image.name]);else{h.push(R.text);var F={};R.fontStack&&(F["text-font"]=["literal",R.fontStack.split(",")]),R.scale&&(F["font-scale"]=R.scale),R.textColor&&(F["text-color"]=["rgba"].concat(R.textColor.toArray())),h.push(F)}}return h};var ko=function(h){this.name=h.name,this.available=h.available};function cr(h,v,_,R){return typeof h=="number"&&h>=0&&h<=255&&typeof v=="number"&&v>=0&&v<=255&&typeof _=="number"&&_>=0&&_<=255?R===void 0||typeof R=="number"&&R>=0&&R<=1?null:"Invalid rgba value ["+[h,v,_,R].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof R=="number"?[h,v,_,R]:[h,v,_]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function kt(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof ea||h instanceof Ha||h instanceof lo||h instanceof ko)return!0;if(Array.isArray(h)){for(var v=0,_=h;v<_.length;v+=1)if(!kt(_[v]))return!1;return!0}if(typeof h=="object"){for(var R in h)if(!kt(h[R]))return!1;return!0}return!1}function qt(h){if(h===null)return ri;if(typeof h=="string")return Yn;if(typeof h=="boolean")return jn;if(typeof h=="number")return un;if(h instanceof ea)return Kn;if(h instanceof Ha)return da;if(h instanceof lo)return Oa;if(h instanceof ko)return xa;if(Array.isArray(h)){for(var v,_=h.length,R=0,F=h;R<F.length;R+=1){var z=qt(F[R]);if(v){if(v===z)continue;v=vi;break}v=z}return Va(v||vi,_)}return aa}function Ar(h){var v=typeof h;return h===null?"":v==="string"||v==="number"||v==="boolean"?String(h):h instanceof ea||h instanceof lo||h instanceof ko?h.toString():JSON.stringify(h)}ko.prototype.toString=function(){return this.name},ko.fromString=function(h){return h?new ko({name:h,available:!1}):null},ko.prototype.serialize=function(){return["image",this.name]};var tn=function(h,v){this.type=h,this.value=v};tn.parse=function(h,v){if(h.length!==2)return v.error("'literal' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(!kt(h[1]))return v.error("invalid value");var _=h[1],R=qt(_),F=v.expectedType;return R.kind!=="array"||R.N!==0||!F||F.kind!=="array"||typeof F.N=="number"&&F.N!==0||(R=F),new tn(R,_)},tn.prototype.evaluate=function(){return this.value},tn.prototype.eachChild=function(){},tn.prototype.outputDefined=function(){return!0},tn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ea?["rgba"].concat(this.value.toArray()):this.value instanceof lo?this.value.serialize():this.value};var Pn=function(h){this.name="ExpressionEvaluationError",this.message=h};Pn.prototype.toJSON=function(){return this.message};var Bn={string:Yn,number:un,boolean:jn,object:aa},Cn=function(h,v){this.type=h,this.args=v};Cn.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _,R=1,F=h[0];if(F==="array"){var z,X;if(h.length>2){var ue=h[1];if(typeof ue!="string"||!(ue in Bn)||ue==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);z=Bn[ue],R++}else z=vi;if(h.length>3){if(h[2]!==null&&(typeof h[2]!="number"||h[2]<0||h[2]!==Math.floor(h[2])))return v.error('The length argument to "array" must be a positive integer literal',2);X=h[2],R++}_=Va(z,X)}else _=Bn[F];for(var Ie=[];R<h.length;R++){var qe=v.parse(h[R],R,vi);if(!qe)return null;Ie.push(qe)}return new Cn(_,Ie)},Cn.prototype.evaluate=function(h){for(var v=0;v<this.args.length;v++){var _=this.args[v].evaluate(h);if(!io(this.type,qt(_)))return _;if(v===this.args.length-1)throw new Pn("Expected value to be of type "+Sa(this.type)+", but found "+Sa(qt(_))+" instead.")}return null},Cn.prototype.eachChild=function(h){this.args.forEach(h)},Cn.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Cn.prototype.serialize=function(){var h=this.type,v=[h.kind];if(h.kind==="array"){var _=h.itemType;if(_.kind==="string"||_.kind==="number"||_.kind==="boolean"){v.push(_.kind);var R=h.N;(typeof R=="number"||this.args.length>1)&&v.push(R)}}return v.concat(this.args.map(function(F){return F.serialize()}))};var Ai=function(h){this.type=Oa,this.sections=h};Ai.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[1];if(!Array.isArray(_)&&typeof _=="object")return v.error("First argument must be an image or text section.");for(var R=[],F=!1,z=1;z<=h.length-1;++z){var X=h[z];if(F&&typeof X=="object"&&!Array.isArray(X)){F=!1;var ue=null;if(X["font-scale"]&&!(ue=v.parse(X["font-scale"],1,un)))return null;var Ie=null;if(X["text-font"]&&!(Ie=v.parse(X["text-font"],1,Va(Yn))))return null;var qe=null;if(X["text-color"]&&!(qe=v.parse(X["text-color"],1,Kn)))return null;var lt=R[R.length-1];lt.scale=ue,lt.font=Ie,lt.textColor=qe}else{var yt=v.parse(h[z],1,vi);if(!yt)return null;var Lt=yt.type.kind;if(Lt!=="string"&&Lt!=="value"&&Lt!=="null"&&Lt!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,R.push({content:yt,scale:null,font:null,textColor:null})}}return new Ai(R)},Ai.prototype.evaluate=function(h){return new lo(this.sections.map(function(v){var _=v.content.evaluate(h);return qt(_)===xa?new ms("",_,null,null,null):new ms(Ar(_),null,v.scale?v.scale.evaluate(h):null,v.font?v.font.evaluate(h).join(","):null,v.textColor?v.textColor.evaluate(h):null)}))},Ai.prototype.eachChild=function(h){for(var v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h(R.content),R.scale&&h(R.scale),R.font&&h(R.font),R.textColor&&h(R.textColor)}},Ai.prototype.outputDefined=function(){return!1},Ai.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h.push(R.content.serialize());var F={};R.scale&&(F["font-scale"]=R.scale.serialize()),R.font&&(F["text-font"]=R.font.serialize()),R.textColor&&(F["text-color"]=R.textColor.serialize()),h.push(F)}return h};var Yi=function(h){this.type=xa,this.input=h};Yi.parse=function(h,v){if(h.length!==2)return v.error("Expected two arguments.");var _=v.parse(h[1],1,Yn);return _?new Yi(_):v.error("No image name provided.")},Yi.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=ko.fromString(v);return _&&h.availableImages&&(_.available=h.availableImages.indexOf(v)>-1),_},Yi.prototype.eachChild=function(h){h(this.input)},Yi.prototype.outputDefined=function(){return!1},Yi.prototype.serialize=function(){return["image",this.input.serialize()]};var Wo={"to-boolean":jn,"to-color":Kn,"to-number":un,"to-string":Yn},os=function(h,v){this.type=h,this.args=v};os.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[0];if((_==="to-boolean"||_==="to-string")&&h.length!==2)return v.error("Expected one argument.");for(var R=Wo[_],F=[],z=1;z<h.length;z++){var X=v.parse(h[z],z,vi);if(!X)return null;F.push(X)}return new os(R,F)},os.prototype.evaluate=function(h){if(this.type.kind==="boolean")return!!this.args[0].evaluate(h);if(this.type.kind==="color"){for(var v,_,R=0,F=this.args;R<F.length;R+=1){if(_=null,(v=F[R].evaluate(h))instanceof ea)return v;if(typeof v=="string"){var z=h.parseColor(v);if(z)return z}else if(Array.isArray(v)&&!(_=v.length<3||v.length>4?"Invalid rbga value "+JSON.stringify(v)+": expected an array containing either three or four numeric values.":cr(v[0],v[1],v[2],v[3])))return new ea(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new Pn(_||"Could not parse color from value '"+(typeof v=="string"?v:String(JSON.stringify(v)))+"'")}if(this.type.kind==="number"){for(var X=null,ue=0,Ie=this.args;ue<Ie.length;ue+=1){if((X=Ie[ue].evaluate(h))===null)return 0;var qe=Number(X);if(!isNaN(qe))return qe}throw new Pn("Could not convert "+JSON.stringify(X)+" to number.")}return this.type.kind==="formatted"?lo.fromString(Ar(this.args[0].evaluate(h))):this.type.kind==="resolvedImage"?ko.fromString(Ar(this.args[0].evaluate(h))):Ar(this.args[0].evaluate(h))},os.prototype.eachChild=function(h){this.args.forEach(h)},os.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},os.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ai([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yi(this.args[0]).serialize();var h=["to-"+this.type.kind];return this.eachChild(function(v){h.push(v.serialize())}),h};var wu=["Unknown","Point","LineString","Polygon"],Do=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Do.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Do.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?wu[this.feature.type]:this.feature.type:null},Do.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Do.prototype.canonicalID=function(){return this.canonical},Do.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Do.prototype.parseColor=function(h){var v=this._parseColorCache[h];return v||(v=this._parseColorCache[h]=ea.parse(h)),v};var Qa=function(h,v,_,R){this.name=h,this.type=v,this._evaluate=_,this.args=R};Qa.prototype.evaluate=function(h){return this._evaluate(h,this.args)},Qa.prototype.eachChild=function(h){this.args.forEach(h)},Qa.prototype.outputDefined=function(){return!1},Qa.prototype.serialize=function(){return[this.name].concat(this.args.map(function(h){return h.serialize()}))},Qa.parse=function(h,v){var _,R=h[0],F=Qa.definitions[R];if(!F)return v.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0);for(var z=Array.isArray(F)?F[0]:F.type,X=Array.isArray(F)?[[F[1],F[2]]]:F.overloads,ue=X.filter(function(la){var Ii=la[0];return!Array.isArray(Ii)||Ii.length===h.length-1}),Ie=null,qe=0,lt=ue;qe<lt.length;qe+=1){var yt=lt[qe],Lt=yt[0],Ut=yt[1];Ie=new ho(v.registry,v.path,null,v.scope);for(var ur=[],fr=!1,Dr=1;Dr<h.length;Dr++){var Mr=h[Dr],Yr=Array.isArray(Lt)?Lt[Dr-1]:Lt.type,on=Ie.parse(Mr,1+ur.length,Yr);if(!on){fr=!0;break}ur.push(on)}if(!fr)if(Array.isArray(Lt)&&Lt.length!==ur.length)Ie.error("Expected "+Lt.length+" arguments, but found "+ur.length+" instead.");else{for(var vn=0;vn<ur.length;vn++){var wn=Array.isArray(Lt)?Lt[vn]:Lt.type,Fn=ur[vn];Ie.concat(vn+1).checkSubtype(wn,Fn.type)}if(Ie.errors.length===0)return new Qa(R,z,Ut,ur)}}if(ue.length===1)(_=v.errors).push.apply(_,Ie.errors);else{for(var ci=(ue.length?ue:X).map(function(la){var Ii;return Ii=la[0],Array.isArray(Ii)?"("+Ii.map(Sa).join(", ")+")":"("+Sa(Ii.type)+"...)"}).join(" | "),Si=[],Ji=1;Ji<h.length;Ji++){var ki=v.parse(h[Ji],1+Si.length);if(!ki)return null;Si.push(Sa(ki.type))}v.error("Expected arguments of type "+ci+", but found ("+Si.join(", ")+") instead.")}return null},Qa.register=function(h,v){for(var _ in Qa.definitions=v,v)h[_]=Qa};var pu=function(h,v,_){this.type=da,this.locale=_,this.caseSensitive=h,this.diacriticSensitive=v};function Jo(h,v){h[0]=Math.min(h[0],v[0]),h[1]=Math.min(h[1],v[1]),h[2]=Math.max(h[2],v[0]),h[3]=Math.max(h[3],v[1])}function Zt(h,v){return!(h[0]<=v[0]||h[2]>=v[2]||h[1]<=v[1]||h[3]>=v[3])}function Jt(h,v){var _=(180+h[0])/360,R=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,F=Math.pow(2,v.z);return[Math.round(_*F*8192),Math.round(R*F*8192)]}function Ur(h,v,_){return v[1]>h[1]!=_[1]>h[1]&&h[0]<(_[0]-v[0])*(h[1]-v[1])/(_[1]-v[1])+v[0]}function Tn(h,v){for(var _,R,F,z,X,ue,Ie,qe=!1,lt=0,yt=v.length;lt<yt;lt++)for(var Lt=v[lt],Ut=0,ur=Lt.length;Ut<ur-1;Ut++){if((z=(_=h)[0]-(R=Lt[Ut])[0])*(Ie=_[1]-(F=Lt[Ut+1])[1])-(ue=_[0]-F[0])*(X=_[1]-R[1])==0&&z*ue<=0&&X*Ie<=0)return!1;Ur(h,Lt[Ut],Lt[Ut+1])&&(qe=!qe)}return qe}function si(h,v){for(var _=0;_<v.length;_++)if(Tn(h,v[_]))return!0;return!1}function Hi(h,v,_,R){var F=R[0]-_[0],z=R[1]-_[1],X=(h[0]-_[0])*z-F*(h[1]-_[1]),ue=(v[0]-_[0])*z-F*(v[1]-_[1]);return X>0&&ue<0||X<0&&ue>0}function ao(h,v,_){for(var R=0,F=_;R<F.length;R+=1)for(var z=F[R],X=0;X<z.length-1;++X)if((yt=[(lt=z[X+1])[0]-(qe=z[X])[0],lt[1]-qe[1]])[0]*(Lt=[(Ie=v)[0]-(ue=h)[0],Ie[1]-ue[1]])[1]-yt[1]*Lt[0]!=0&&Hi(ue,Ie,qe,lt)&&Hi(qe,lt,ue,Ie))return!0;var ue,Ie,qe,lt,yt,Lt;return!1}function Us(h,v){for(var _=0;_<h.length;++_)if(!Tn(h[_],v))return!1;for(var R=0;R<h.length-1;++R)if(ao(h[R],h[R+1],v))return!1;return!0}function wo(h,v){for(var _=0;_<v.length;_++)if(Us(h,v[_]))return!0;return!1}function Lo(h,v,_){for(var R=[],F=0;F<h.length;F++){for(var z=[],X=0;X<h[F].length;X++){var ue=Jt(h[F][X],_);Jo(v,ue),z.push(ue)}R.push(z)}return R}function Hu(h,v,_){for(var R=[],F=0;F<h.length;F++){var z=Lo(h[F],v,_);R.push(z)}return R}function cf(h,v,_,R){if(h[0]<_[0]||h[0]>_[2]){var F=.5*R,z=h[0]-_[0]>F?-R:_[0]-h[0]>F?R:0;z===0&&(z=h[0]-_[2]>F?-R:_[2]-h[0]>F?R:0),h[0]+=z}Jo(v,h)}function rh(h,v,_,R){for(var F=8192*Math.pow(2,R.z),z=[8192*R.x,8192*R.y],X=[],ue=0,Ie=h;ue<Ie.length;ue+=1)for(var qe=0,lt=Ie[ue];qe<lt.length;qe+=1){var yt=lt[qe],Lt=[yt.x+z[0],yt.y+z[1]];cf(Lt,v,_,F),X.push(Lt)}return X}function nh(h,v,_,R){for(var F,z=8192*Math.pow(2,R.z),X=[8192*R.x,8192*R.y],ue=[],Ie=0,qe=h;Ie<qe.length;Ie+=1){for(var lt=[],yt=0,Lt=qe[Ie];yt<Lt.length;yt+=1){var Ut=Lt[yt],ur=[Ut.x+X[0],Ut.y+X[1]];Jo(v,ur),lt.push(ur)}ue.push(lt)}if(v[2]-v[0]<=z/2){(F=v)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(var fr=0,Dr=ue;fr<Dr.length;fr+=1)for(var Mr=0,Yr=Dr[fr];Mr<Yr.length;Mr+=1)cf(Yr[Mr],v,_,z)}return ue}pu.parse=function(h,v){if(h.length!==2)return v.error("Expected one argument.");var _=h[1];if(typeof _!="object"||Array.isArray(_))return v.error("Collator options argument must be an object.");var R=v.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,jn);if(!R)return null;var F=v.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,jn);if(!F)return null;var z=null;return _.locale&&!(z=v.parse(_.locale,1,Yn))?null:new pu(R,F,z)},pu.prototype.evaluate=function(h){return new Ha(this.caseSensitive.evaluate(h),this.diacriticSensitive.evaluate(h),this.locale?this.locale.evaluate(h):null)},pu.prototype.eachChild=function(h){h(this.caseSensitive),h(this.diacriticSensitive),this.locale&&h(this.locale)},pu.prototype.outputDefined=function(){return!1},pu.prototype.serialize=function(){var h={};return h["case-sensitive"]=this.caseSensitive.serialize(),h["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(h.locale=this.locale.serialize()),["collator",h]};var du=function(h,v){this.type=jn,this.geojson=h,this.geometries=v};function ec(h){if(h instanceof Qa&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof du)return!1;var v=!0;return h.eachChild(function(_){v&&!ec(_)&&(v=!1)}),v}function ru(h){if(h instanceof Qa&&h.name==="feature-state")return!1;var v=!0;return h.eachChild(function(_){v&&!ru(_)&&(v=!1)}),v}function Sl(h,v){if(h instanceof Qa&&v.indexOf(h.name)>=0)return!1;var _=!0;return h.eachChild(function(R){_&&!Sl(R,v)&&(_=!1)}),_}du.parse=function(h,v){if(h.length!==2)return v.error("'within' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(kt(h[1])){var _=h[1];if(_.type==="FeatureCollection")for(var R=0;R<_.features.length;++R){var F=_.features[R].geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new du(_,_.features[R].geometry)}else if(_.type==="Feature"){var z=_.geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new du(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new du(_,_)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")},du.prototype.evaluate=function(h){if(h.geometry()!=null&&h.canonicalID()!=null){if(h.geometryType()==="Point")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var X=Lo(_.coordinates,F,z),ue=rh(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Ie=0,qe=ue;Ie<qe.length;Ie+=1)if(!Tn(qe[Ie],X))return!1}if(_.type==="MultiPolygon"){var lt=Hu(_.coordinates,F,z),yt=rh(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Lt=0,Ut=yt;Lt<Ut.length;Lt+=1)if(!si(Ut[Lt],lt))return!1}return!0}(h,this.geometries);if(h.geometryType()==="LineString")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var X=Lo(_.coordinates,F,z),ue=nh(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Ie=0,qe=ue;Ie<qe.length;Ie+=1)if(!Us(qe[Ie],X))return!1}if(_.type==="MultiPolygon"){var lt=Hu(_.coordinates,F,z),yt=nh(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Lt=0,Ut=yt;Lt<Ut.length;Lt+=1)if(!wo(Ut[Lt],lt))return!1}return!0}(h,this.geometries)}return!1},du.prototype.eachChild=function(){},du.prototype.outputDefined=function(){return!0},du.prototype.serialize=function(){return["within",this.geojson]};var tc=function(h,v){this.type=v.type,this.name=h,this.boundExpression=v};tc.parse=function(h,v){if(h.length!==2||typeof h[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");var _=h[1];return v.scope.has(_)?new tc(_,v.scope.get(_)):v.error('Unknown variable "'+_+'". Make sure "'+_+'" has been bound in an enclosing "let" expression before using it.',1)},tc.prototype.evaluate=function(h){return this.boundExpression.evaluate(h)},tc.prototype.eachChild=function(){},tc.prototype.outputDefined=function(){return!1},tc.prototype.serialize=function(){return["var",this.name]};var ho=function(h,v,_,R,F){v===void 0&&(v=[]),R===void 0&&(R=new qn),F===void 0&&(F=[]),this.registry=h,this.path=v,this.key=v.map(function(z){return"["+z+"]"}).join(""),this.scope=R,this.errors=F,this.expectedType=_};function Xl(h,v){for(var _,R=h.length-1,F=0,z=R,X=0;F<=z;)if((_=h[X=Math.floor((F+z)/2)])<=v){if(X===R||v<h[X+1])return X;F=X+1}else{if(!(_>v))throw new Pn("Input is not a number.");z=X-1}return 0}ho.prototype.parse=function(h,v,_,R,F){return F===void 0&&(F={}),v?this.concat(v,_,R)._parse(h,F):this._parse(h,F)},ho.prototype._parse=function(h,v){function _(qe,lt,yt){return yt==="assert"?new Cn(lt,[qe]):yt==="coerce"?new os(lt,[qe]):qe}if(h!==null&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"||(h=["literal",h]),Array.isArray(h)){if(h.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var R=h[0];if(typeof R!="string")return this.error("Expression name must be a string, but found "+typeof R+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var F=this.registry[R];if(F){var z=F.parse(h,this);if(!z)return null;if(this.expectedType){var X=this.expectedType,ue=z.type;if(X.kind!=="string"&&X.kind!=="number"&&X.kind!=="boolean"&&X.kind!=="object"&&X.kind!=="array"||ue.kind!=="value")if(X.kind!=="color"&&X.kind!=="formatted"&&X.kind!=="resolvedImage"||ue.kind!=="value"&&ue.kind!=="string"){if(this.checkSubtype(X,ue))return null}else z=_(z,X,v.typeAnnotation||"coerce");else z=_(z,X,v.typeAnnotation||"assert")}if(!(z instanceof tn)&&z.type.kind!=="resolvedImage"&&function qe(lt){if(lt instanceof tc)return qe(lt.boundExpression);if(lt instanceof Qa&&lt.name==="error"||lt instanceof pu||lt instanceof du)return!1;var yt=lt instanceof os||lt instanceof Cn,Lt=!0;return lt.eachChild(function(Ut){Lt=yt?Lt&&qe(Ut):Lt&&Ut instanceof tn}),!!Lt&&ec(lt)&&Sl(lt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(z)){var Ie=new Do;try{z=new tn(z.type,z.evaluate(Ie))}catch(qe){return this.error(qe.message),null}}return z}return this.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(h===void 0?"'undefined' value invalid. Use null instead.":typeof h=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof h+" instead.")},ho.prototype.concat=function(h,v,_){var R=typeof h=="number"?this.path.concat(h):this.path,F=_?this.scope.concat(_):this.scope;return new ho(this.registry,R,v||null,F,this.errors)},ho.prototype.error=function(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];var R=""+this.key+v.map(function(F){return"["+F+"]"}).join("");this.errors.push(new Mn(R,h))},ho.prototype.checkSubtype=function(h,v){var _=io(h,v);return _&&this.error(_),_};var bs=function(h,v,_){this.type=h,this.input=v,this.labels=[],this.outputs=[];for(var R=0,F=_;R<F.length;R+=1){var z=F[R],X=z[1];this.labels.push(z[0]),this.outputs.push(X)}};function Ss(h,v,_){return h*(1-_)+v*_}bs.parse=function(h,v){if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");var _=v.parse(h[1],1,un);if(!_)return null;var R=[],F=null;v.expectedType&&v.expectedType.kind!=="value"&&(F=v.expectedType);for(var z=1;z<h.length;z+=2){var X=z===1?-1/0:h[z],ue=h[z+1],Ie=z,qe=z+1;if(typeof X!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ie);if(R.length&&R[R.length-1][0]>=X)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ie);var lt=v.parse(ue,qe,F);if(!lt)return null;F=F||lt.type,R.push([X,lt])}return new bs(F,_,R)},bs.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var F=v.length;return R>=v[F-1]?_[F-1].evaluate(h):_[Xl(v,R)].evaluate(h)},bs.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},bs.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},bs.prototype.serialize=function(){for(var h=["step",this.input.serialize()],v=0;v<this.labels.length;v++)v>0&&h.push(this.labels[v]),h.push(this.outputs[v].serialize());return h};var xc=Object.freeze({__proto__:null,number:Ss,color:function(h,v,_){return new ea(Ss(h.r,v.r,_),Ss(h.g,v.g,_),Ss(h.b,v.b,_),Ss(h.a,v.a,_))},array:function(h,v,_){return h.map(function(R,F){return Ss(R,v[F],_)})}}),bc=6/29*3*(6/29),Rf=Math.PI/180,Ll=180/Math.PI;function Fl(h){return h>.008856451679035631?Math.pow(h,1/3):h/bc+4/29}function Yl(h){return h>6/29?h*h*h:bc*(h-4/29)}function ku(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Sc(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Rn(h){var v=Sc(h.r),_=Sc(h.g),R=Sc(h.b),F=Fl((.4124564*v+.3575761*_+.1804375*R)/.95047),z=Fl((.2126729*v+.7151522*_+.072175*R)/1);return{l:116*z-16,a:500*(F-z),b:200*(z-Fl((.0193339*v+.119192*_+.9503041*R)/1.08883)),alpha:h.a}}function ji(h){var v=(h.l+16)/116,_=isNaN(h.a)?v:v+h.a/500,R=isNaN(h.b)?v:v-h.b/200;return v=1*Yl(v),_=.95047*Yl(_),R=1.08883*Yl(R),new ea(ku(3.2404542*_-1.5371385*v-.4985314*R),ku(-.969266*_+1.8760108*v+.041556*R),ku(.0556434*_-.2040259*v+1.0572252*R),h.alpha)}function Pv(h,v,_){var R=v-h;return h+_*(R>180||R<-180?R-360*Math.round(R/360):R)}var ih={forward:Rn,reverse:ji,interpolate:function(h,v,_){return{l:Ss(h.l,v.l,_),a:Ss(h.a,v.a,_),b:Ss(h.b,v.b,_),alpha:Ss(h.alpha,v.alpha,_)}}},rc={forward:function(h){var v=Rn(h),_=v.l,R=v.a,F=v.b,z=Math.atan2(F,R)*Ll;return{h:z<0?z+360:z,c:Math.sqrt(R*R+F*F),l:_,alpha:h.a}},reverse:function(h){var v=h.h*Rf,_=h.c;return ji({l:h.l,a:Math.cos(v)*_,b:Math.sin(v)*_,alpha:h.alpha})},interpolate:function(h,v,_){return{h:Pv(h.h,v.h,_),c:Ss(h.c,v.c,_),l:Ss(h.l,v.l,_),alpha:Ss(h.alpha,v.alpha,_)}}},Jp=Object.freeze({__proto__:null,lab:ih,hcl:rc}),Gs=function(h,v,_,R,F){this.type=h,this.operator=v,this.interpolation=_,this.input=R,this.labels=[],this.outputs=[];for(var z=0,X=F;z<X.length;z+=1){var ue=X[z],Ie=ue[1];this.labels.push(ue[0]),this.outputs.push(Ie)}};function Ec(h,v,_,R){var F=R-_,z=h-_;return F===0?0:v===1?z/F:(Math.pow(v,z)-1)/(Math.pow(v,F)-1)}Gs.interpolationFactor=function(h,v,_,R){var F=0;if(h.name==="exponential")F=Ec(v,h.base,_,R);else if(h.name==="linear")F=Ec(v,1,_,R);else if(h.name==="cubic-bezier"){var z=h.controlPoints;F=new j(z[0],z[1],z[2],z[3]).solve(Ec(v,1,_,R))}return F},Gs.parse=function(h,v){var _=h[0],R=h[1],F=h[2],z=h.slice(3);if(!Array.isArray(R)||R.length===0)return v.error("Expected an interpolation type expression.",1);if(R[0]==="linear")R={name:"linear"};else if(R[0]==="exponential"){var X=R[1];if(typeof X!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);R={name:"exponential",base:X}}else{if(R[0]!=="cubic-bezier")return v.error("Unknown interpolation type "+String(R[0]),1,0);var ue=R.slice(1);if(ue.length!==4||ue.some(function(Dr){return typeof Dr!="number"||Dr<0||Dr>1}))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);R={name:"cubic-bezier",controlPoints:ue}}if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(!(F=v.parse(F,2,un)))return null;var Ie=[],qe=null;_==="interpolate-hcl"||_==="interpolate-lab"?qe=Kn:v.expectedType&&v.expectedType.kind!=="value"&&(qe=v.expectedType);for(var lt=0;lt<z.length;lt+=2){var yt=z[lt],Lt=z[lt+1],Ut=lt+3,ur=lt+4;if(typeof yt!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(Ie.length&&Ie[Ie.length-1][0]>=yt)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var fr=v.parse(Lt,ur,qe);if(!fr)return null;qe=qe||fr.type,Ie.push([yt,fr])}return qe.kind==="number"||qe.kind==="color"||qe.kind==="array"&&qe.itemType.kind==="number"&&typeof qe.N=="number"?new Gs(qe,_,R,F,Ie):v.error("Type "+Sa(qe)+" is not interpolatable.")},Gs.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var F=v.length;if(R>=v[F-1])return _[F-1].evaluate(h);var z=Xl(v,R),X=Gs.interpolationFactor(this.interpolation,R,v[z],v[z+1]),ue=_[z].evaluate(h),Ie=_[z+1].evaluate(h);return this.operator==="interpolate"?xc[this.type.kind.toLowerCase()](ue,Ie,X):this.operator==="interpolate-hcl"?rc.reverse(rc.interpolate(rc.forward(ue),rc.forward(Ie),X)):ih.reverse(ih.interpolate(ih.forward(ue),ih.forward(Ie),X))},Gs.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},Gs.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},Gs.prototype.serialize=function(){var h;h=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var v=[this.operator,h,this.input.serialize()],_=0;_<this.labels.length;_++)v.push(this.labels[_],this.outputs[_].serialize());return v};var Bl=function(h,v){this.type=h,this.args=v};Bl.parse=function(h,v){if(h.length<2)return v.error("Expectected at least one argument.");var _=null,R=v.expectedType;R&&R.kind!=="value"&&(_=R);for(var F=[],z=0,X=h.slice(1);z<X.length;z+=1){var ue=v.parse(X[z],1+F.length,_,void 0,{typeAnnotation:"omit"});if(!ue)return null;_=_||ue.type,F.push(ue)}var Ie=R&&F.some(function(qe){return io(R,qe.type)});return new Bl(Ie?vi:_,F)},Bl.prototype.evaluate=function(h){for(var v,_=null,R=0,F=0,z=this.args;F<z.length&&(R++,(_=z[F].evaluate(h))&&_ instanceof ko&&!_.available&&(v||(v=_.name),_=null,R===this.args.length&&(_=v)),_===null);F+=1);return _},Bl.prototype.eachChild=function(h){this.args.forEach(h)},Bl.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Bl.prototype.serialize=function(){var h=["coalesce"];return this.eachChild(function(v){h.push(v.serialize())}),h};var nu=function(h,v){this.type=v.type,this.bindings=[].concat(h),this.result=v};nu.prototype.evaluate=function(h){return this.result.evaluate(h)},nu.prototype.eachChild=function(h){for(var v=0,_=this.bindings;v<_.length;v+=1)h(_[v][1]);h(this.result)},nu.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found "+(h.length-1)+" instead.");for(var _=[],R=1;R<h.length-1;R+=2){var F=h[R];if(typeof F!="string")return v.error("Expected string, but found "+typeof F+" instead.",R);if(/[^a-zA-Z0-9_]/.test(F))return v.error("Variable names must contain only alphanumeric characters or '_'.",R);var z=v.parse(h[R+1],R+1);if(!z)return null;_.push([F,z])}var X=v.parse(h[h.length-1],h.length-1,v.expectedType,_);return X?new nu(_,X):null},nu.prototype.outputDefined=function(){return this.result.outputDefined()},nu.prototype.serialize=function(){for(var h=["let"],v=0,_=this.bindings;v<_.length;v+=1){var R=_[v];h.push(R[0],R[1].serialize())}return h.push(this.result.serialize()),h};var vu=function(h,v,_){this.type=h,this.index=v,this.input=_};vu.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,un),R=v.parse(h[2],2,Va(v.expectedType||vi));return _&&R?new vu(R.type.itemType,_,R):null},vu.prototype.evaluate=function(h){var v=this.index.evaluate(h),_=this.input.evaluate(h);if(v<0)throw new Pn("Array index out of bounds: "+v+" < 0.");if(v>=_.length)throw new Pn("Array index out of bounds: "+v+" > "+(_.length-1)+".");if(v!==Math.floor(v))throw new Pn("Array index must be an integer, but found "+v+" instead.");return _[v]},vu.prototype.eachChild=function(h){h(this.index),h(this.input)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var El=function(h,v){this.type=jn,this.needle=h,this.haystack=v};El.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,vi);return _&&R?Oo(_.type,[jn,Yn,un,ri,vi])?new El(_,R):v.error("Expected first argument to be of type boolean, string, number or null, but found "+Sa(_.type)+" instead"):null},El.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!_)return!1;if(!ai(v,["boolean","string","number","null"]))throw new Pn("Expected first argument to be of type boolean, string, number or null, but found "+Sa(qt(v))+" instead.");if(!ai(_,["string","array"]))throw new Pn("Expected second argument to be of type array or string, but found "+Sa(qt(_))+" instead.");return _.indexOf(v)>=0},El.prototype.eachChild=function(h){h(this.needle),h(this.haystack)},El.prototype.outputDefined=function(){return!0},El.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var nc=function(h,v,_){this.type=un,this.needle=h,this.haystack=v,this.fromIndex=_};nc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,vi);if(!_||!R)return null;if(!Oo(_.type,[jn,Yn,un,ri,vi]))return v.error("Expected first argument to be of type boolean, string, number or null, but found "+Sa(_.type)+" instead");if(h.length===4){var F=v.parse(h[3],3,un);return F?new nc(_,R,F):null}return new nc(_,R)},nc.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!ai(v,["boolean","string","number","null"]))throw new Pn("Expected first argument to be of type boolean, string, number or null, but found "+Sa(qt(v))+" instead.");if(!ai(_,["string","array"]))throw new Pn("Expected second argument to be of type array or string, but found "+Sa(qt(_))+" instead.");if(this.fromIndex){var R=this.fromIndex.evaluate(h);return _.indexOf(v,R)}return _.indexOf(v)},nc.prototype.eachChild=function(h){h(this.needle),h(this.haystack),this.fromIndex&&h(this.fromIndex)},nc.prototype.outputDefined=function(){return!1},nc.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var h=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),h]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Nl=function(h,v,_,R,F,z){this.inputType=h,this.type=v,this.input=_,this.cases=R,this.outputs=F,this.otherwise=z};Nl.parse=function(h,v){if(h.length<5)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if(h.length%2!=1)return v.error("Expected an even number of arguments.");var _,R;v.expectedType&&v.expectedType.kind!=="value"&&(R=v.expectedType);for(var F={},z=[],X=2;X<h.length-1;X+=2){var ue=h[X],Ie=h[X+1];Array.isArray(ue)||(ue=[ue]);var qe=v.concat(X);if(ue.length===0)return qe.error("Expected at least one branch label.");for(var lt=0,yt=ue;lt<yt.length;lt+=1){var Lt=yt[lt];if(typeof Lt!="number"&&typeof Lt!="string")return qe.error("Branch labels must be numbers or strings.");if(typeof Lt=="number"&&Math.abs(Lt)>Number.MAX_SAFE_INTEGER)return qe.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Lt=="number"&&Math.floor(Lt)!==Lt)return qe.error("Numeric branch labels must be integer values.");if(_){if(qe.checkSubtype(_,qt(Lt)))return null}else _=qt(Lt);if(F[String(Lt)]!==void 0)return qe.error("Branch labels must be unique.");F[String(Lt)]=z.length}var Ut=v.parse(Ie,X,R);if(!Ut)return null;R=R||Ut.type,z.push(Ut)}var ur=v.parse(h[1],1,vi);if(!ur)return null;var fr=v.parse(h[h.length-1],h.length-1,R);return fr?ur.type.kind!=="value"&&v.concat(1).checkSubtype(_,ur.type)?null:new Nl(_,R,ur,F,z,fr):null},Nl.prototype.evaluate=function(h){var v=this.input.evaluate(h);return(qt(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(h)},Nl.prototype.eachChild=function(h){h(this.input),this.outputs.forEach(h),h(this.otherwise)},Nl.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})&&this.otherwise.outputDefined()},Nl.prototype.serialize=function(){for(var h=this,v=["match",this.input.serialize()],_=[],R={},F=0,z=Object.keys(this.cases).sort();F<z.length;F+=1){var X=z[F];(yt=R[this.cases[X]])===void 0?(R[this.cases[X]]=_.length,_.push([this.cases[X],[X]])):_[yt][1].push(X)}for(var ue=function(Ut){return h.inputType.kind==="number"?Number(Ut):Ut},Ie=0,qe=_;Ie<qe.length;Ie+=1){var lt=qe[Ie],yt=lt[0],Lt=lt[1];v.push(Lt.length===1?ue(Lt[0]):Lt.map(ue)),v.push(this.outputs[outputIndex$1].serialize())}return v.push(this.otherwise.serialize()),v};var wc=function(h,v,_){this.type=h,this.branches=v,this.otherwise=_};wc.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found only "+(h.length-1)+".");if(h.length%2!=0)return v.error("Expected an odd number of arguments.");var _;v.expectedType&&v.expectedType.kind!=="value"&&(_=v.expectedType);for(var R=[],F=1;F<h.length-1;F+=2){var z=v.parse(h[F],F,jn);if(!z)return null;var X=v.parse(h[F+1],F+1,_);if(!X)return null;R.push([z,X]),_=_||X.type}var ue=v.parse(h[h.length-1],h.length-1,_);return ue?new wc(_,R,ue):null},wc.prototype.evaluate=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],F=R[1];if(R[0].evaluate(h))return F.evaluate(h)}return this.otherwise.evaluate(h)},wc.prototype.eachChild=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],F=R[1];h(R[0]),h(F)}h(this.otherwise)},wc.prototype.outputDefined=function(){return this.branches.every(function(h){return h[1].outputDefined()})&&this.otherwise.outputDefined()},wc.prototype.serialize=function(){var h=["case"];return this.eachChild(function(v){h.push(v.serialize())}),h};var jc=function(h,v,_,R){this.type=h,this.input=v,this.beginIndex=_,this.endIndex=R};function ah(h,v){return h==="=="||h==="!="?v.kind==="boolean"||v.kind==="string"||v.kind==="number"||v.kind==="null"||v.kind==="value":v.kind==="string"||v.kind==="number"||v.kind==="value"}function ed(h,v,_,R){return R.compare(v,_)===0}function Uo(h,v,_){var R=h!=="=="&&h!=="!=";return function(){function F(z,X,ue){this.type=jn,this.lhs=z,this.rhs=X,this.collator=ue,this.hasUntypedArgument=z.type.kind==="value"||X.type.kind==="value"}return F.parse=function(z,X){if(z.length!==3&&z.length!==4)return X.error("Expected two or three arguments.");var ue=z[0],Ie=X.parse(z[1],1,vi);if(!Ie)return null;if(!ah(ue,Ie.type))return X.concat(1).error('"'+ue+`" comparisons are not supported for type '`+Sa(Ie.type)+"'.");var qe=X.parse(z[2],2,vi);if(!qe)return null;if(!ah(ue,qe.type))return X.concat(2).error('"'+ue+`" comparisons are not supported for type '`+Sa(qe.type)+"'.");if(Ie.type.kind!==qe.type.kind&&Ie.type.kind!=="value"&&qe.type.kind!=="value")return X.error("Cannot compare types '"+Sa(Ie.type)+"' and '"+Sa(qe.type)+"'.");R&&(Ie.type.kind==="value"&&qe.type.kind!=="value"?Ie=new Cn(qe.type,[Ie]):Ie.type.kind!=="value"&&qe.type.kind==="value"&&(qe=new Cn(Ie.type,[qe])));var lt=null;if(z.length===4){if(Ie.type.kind!=="string"&&qe.type.kind!=="string"&&Ie.type.kind!=="value"&&qe.type.kind!=="value")return X.error("Cannot use collator to compare non-string types.");if(!(lt=X.parse(z[3],3,da)))return null}return new F(Ie,qe,lt)},F.prototype.evaluate=function(z){var X=this.lhs.evaluate(z),ue=this.rhs.evaluate(z);if(R&&this.hasUntypedArgument){var Ie=qt(X),qe=qt(ue);if(Ie.kind!==qe.kind||Ie.kind!=="string"&&Ie.kind!=="number")throw new Pn('Expected arguments for "'+h+'" to be (string, string) or (number, number), but found ('+Ie.kind+", "+qe.kind+") instead.")}if(this.collator&&!R&&this.hasUntypedArgument){var lt=qt(X),yt=qt(ue);if(lt.kind!=="string"||yt.kind!=="string")return v(z,X,ue)}return this.collator?_(z,X,ue,this.collator.evaluate(z)):v(z,X,ue)},F.prototype.eachChild=function(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)},F.prototype.outputDefined=function(){return!0},F.prototype.serialize=function(){var z=[h];return this.eachChild(function(X){z.push(X.serialize())}),z},F}()}jc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,un);if(!_||!R)return null;if(!Oo(_.type,[Va(vi),Yn,vi]))return v.error("Expected first argument to be of type array or string, but found "+Sa(_.type)+" instead");if(h.length===4){var F=v.parse(h[3],3,un);return F?new jc(_.type,_,R,F):null}return new jc(_.type,_,R)},jc.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=this.beginIndex.evaluate(h);if(!ai(v,["string","array"]))throw new Pn("Expected first argument to be of type array or string, but found "+Sa(qt(v))+" instead.");if(this.endIndex){var R=this.endIndex.evaluate(h);return v.slice(_,R)}return v.slice(_)},jc.prototype.eachChild=function(h){h(this.input),h(this.beginIndex),this.endIndex&&h(this.endIndex)},jc.prototype.outputDefined=function(){return!1},jc.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var h=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),h]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Nd=Uo("==",function(h,v,_){return v===_},ed),Uh=Uo("!=",function(h,v,_){return v!==_},function(h,v,_,R){return!ed(0,v,_,R)}),ff=Uo("<",function(h,v,_){return v<_},function(h,v,_,R){return R.compare(v,_)<0}),ss=Uo(">",function(h,v,_){return v>_},function(h,v,_,R){return R.compare(v,_)>0}),vp=Uo("<=",function(h,v,_){return v<=_},function(h,v,_,R){return R.compare(v,_)<=0}),gp=Uo(">=",function(h,v,_){return v>=_},function(h,v,_,R){return R.compare(v,_)>=0}),Du=function(h,v,_,R,F){this.type=Yn,this.number=h,this.locale=v,this.currency=_,this.minFractionDigits=R,this.maxFractionDigits=F};Du.parse=function(h,v){if(h.length!==3)return v.error("Expected two arguments.");var _=v.parse(h[1],1,un);if(!_)return null;var R=h[2];if(typeof R!="object"||Array.isArray(R))return v.error("NumberFormat options argument must be an object.");var F=null;if(R.locale&&!(F=v.parse(R.locale,1,Yn)))return null;var z=null;if(R.currency&&!(z=v.parse(R.currency,1,Yn)))return null;var X=null;if(R["min-fraction-digits"]&&!(X=v.parse(R["min-fraction-digits"],1,un)))return null;var ue=null;return R["max-fraction-digits"]&&!(ue=v.parse(R["max-fraction-digits"],1,un))?null:new Du(_,F,z,X,ue)},Du.prototype.evaluate=function(h){return new Intl.NumberFormat(this.locale?this.locale.evaluate(h):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(h):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(h):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(h):void 0}).format(this.number.evaluate(h))},Du.prototype.eachChild=function(h){h(this.number),this.locale&&h(this.locale),this.currency&&h(this.currency),this.minFractionDigits&&h(this.minFractionDigits),this.maxFractionDigits&&h(this.maxFractionDigits)},Du.prototype.outputDefined=function(){return!1},Du.prototype.serialize=function(){var h={};return this.locale&&(h.locale=this.locale.serialize()),this.currency&&(h.currency=this.currency.serialize()),this.minFractionDigits&&(h["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(h["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),h]};var Mt=function(h){this.type=un,this.input=h};Mt.parse=function(h,v){if(h.length!==2)return v.error("Expected 1 argument, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?v.error("Expected argument of type string or array, but found "+Sa(_.type)+" instead."):new Mt(_):null},Mt.prototype.evaluate=function(h){var v=this.input.evaluate(h);if(typeof v=="string"||Array.isArray(v))return v.length;throw new Pn("Expected value to be of type string or array, but found "+Sa(qt(v))+" instead.")},Mt.prototype.eachChild=function(h){h(this.input)},Mt.prototype.outputDefined=function(){return!1},Mt.prototype.serialize=function(){var h=["length"];return this.eachChild(function(v){h.push(v.serialize())}),h};var mr={"==":Nd,"!=":Uh,">":ss,"<":ff,">=":gp,"<=":vp,array:Cn,at:vu,boolean:Cn,case:wc,coalesce:Bl,collator:pu,format:Ai,image:Yi,in:El,"index-of":nc,interpolate:Gs,"interpolate-hcl":Gs,"interpolate-lab":Gs,length:Mt,let:nu,literal:tn,match:Nl,number:Cn,"number-format":Du,object:Cn,slice:jc,step:bs,string:Cn,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,var:tc,within:du};function Vr(h,v){var _=v[0],R=v[1],F=v[2],z=v[3];_=_.evaluate(h),R=R.evaluate(h),F=F.evaluate(h);var X=z?z.evaluate(h):1,ue=cr(_,R,F,X);if(ue)throw new Pn(ue);return new ea(_/255*X,R/255*X,F/255*X,X)}function Qr(h,v){return h in v}function On(h,v){var _=v[h];return _===void 0?null:_}function gi(h){return{type:h}}function oa(h){return{result:"success",value:h}}function po(h){return{result:"error",value:h}}function Ps(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function ll(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Ju(h){return!!h.expression&&h.expression.interpolated}function Fo(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function mp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function zd(h){return h}function Wc(h,v,_){return h!==void 0?h:v!==void 0?v:_!==void 0?_:void 0}function yp(h,v,_,R,F){return Wc(typeof _===F?R[_]:void 0,h.default,v.default)}function hf(h,v,_){if(Fo(_)!=="number")return Wc(h.default,v.default);var R=h.stops.length;if(R===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[R-1][0])return h.stops[R-1][1];var F=Xl(h.stops.map(function(z){return z[0]}),_);return h.stops[F][1]}function td(h,v,_){var R=h.base!==void 0?h.base:1;if(Fo(_)!=="number")return Wc(h.default,v.default);var F=h.stops.length;if(F===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[F-1][0])return h.stops[F-1][1];var z=Xl(h.stops.map(function(yt){return yt[0]}),_),X=function(yt,Lt,Ut,ur){var fr=ur-Ut,Dr=yt-Ut;return fr===0?0:Lt===1?Dr/fr:(Math.pow(Lt,Dr)-1)/(Math.pow(Lt,fr)-1)}(_,R,h.stops[z][0],h.stops[z+1][0]),ue=h.stops[z][1],Ie=h.stops[z+1][1],qe=xc[v.type]||zd;if(h.colorSpace&&h.colorSpace!=="rgb"){var lt=Jp[h.colorSpace];qe=function(yt,Lt){return lt.reverse(lt.interpolate(lt.forward(yt),lt.forward(Lt),X))}}return typeof ue.evaluate=="function"?{evaluate:function(){for(var yt=[],Lt=arguments.length;Lt--;)yt[Lt]=arguments[Lt];var Ut=ue.evaluate.apply(void 0,yt),ur=Ie.evaluate.apply(void 0,yt);if(Ut!==void 0&&ur!==void 0)return qe(Ut,ur,X)}}:qe(ue,Ie,X)}function Ca(h,v,_){return v.type==="color"?_=ea.parse(_):v.type==="formatted"?_=lo.fromString(_.toString()):v.type==="resolvedImage"?_=ko.fromString(_.toString()):Fo(_)===v.type||v.type==="enum"&&v.values[_]||(_=void 0),Wc(_,h.default,v.default)}Qa.register(mr,{error:[{kind:"error"},[Yn],function(h,v){throw new Pn(v[0].evaluate(h))}],typeof:[Yn,[vi],function(h,v){return Sa(qt(v[0].evaluate(h)))}],"to-rgba":[Va(un,4),[Kn],function(h,v){return v[0].evaluate(h).toArray()}],rgb:[Kn,[un,un,un],Vr],rgba:[Kn,[un,un,un,un],Vr],has:{type:jn,overloads:[[[Yn],function(h,v){return Qr(v[0].evaluate(h),h.properties())}],[[Yn,aa],function(h,v){var _=v[1];return Qr(v[0].evaluate(h),_.evaluate(h))}]]},get:{type:vi,overloads:[[[Yn],function(h,v){return On(v[0].evaluate(h),h.properties())}],[[Yn,aa],function(h,v){var _=v[1];return On(v[0].evaluate(h),_.evaluate(h))}]]},"feature-state":[vi,[Yn],function(h,v){return On(v[0].evaluate(h),h.featureState||{})}],properties:[aa,[],function(h){return h.properties()}],"geometry-type":[Yn,[],function(h){return h.geometryType()}],id:[vi,[],function(h){return h.id()}],zoom:[un,[],function(h){return h.globals.zoom}],"heatmap-density":[un,[],function(h){return h.globals.heatmapDensity||0}],"line-progress":[un,[],function(h){return h.globals.lineProgress||0}],accumulated:[vi,[],function(h){return h.globals.accumulated===void 0?null:h.globals.accumulated}],"+":[un,gi(un),function(h,v){for(var _=0,R=0,F=v;R<F.length;R+=1)_+=F[R].evaluate(h);return _}],"*":[un,gi(un),function(h,v){for(var _=1,R=0,F=v;R<F.length;R+=1)_*=F[R].evaluate(h);return _}],"-":{type:un,overloads:[[[un,un],function(h,v){var _=v[1];return v[0].evaluate(h)-_.evaluate(h)}],[[un],function(h,v){return-v[0].evaluate(h)}]]},"/":[un,[un,un],function(h,v){var _=v[1];return v[0].evaluate(h)/_.evaluate(h)}],"%":[un,[un,un],function(h,v){var _=v[1];return v[0].evaluate(h)%_.evaluate(h)}],ln2:[un,[],function(){return Math.LN2}],pi:[un,[],function(){return Math.PI}],e:[un,[],function(){return Math.E}],"^":[un,[un,un],function(h,v){var _=v[1];return Math.pow(v[0].evaluate(h),_.evaluate(h))}],sqrt:[un,[un],function(h,v){return Math.sqrt(v[0].evaluate(h))}],log10:[un,[un],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN10}],ln:[un,[un],function(h,v){return Math.log(v[0].evaluate(h))}],log2:[un,[un],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN2}],sin:[un,[un],function(h,v){return Math.sin(v[0].evaluate(h))}],cos:[un,[un],function(h,v){return Math.cos(v[0].evaluate(h))}],tan:[un,[un],function(h,v){return Math.tan(v[0].evaluate(h))}],asin:[un,[un],function(h,v){return Math.asin(v[0].evaluate(h))}],acos:[un,[un],function(h,v){return Math.acos(v[0].evaluate(h))}],atan:[un,[un],function(h,v){return Math.atan(v[0].evaluate(h))}],min:[un,gi(un),function(h,v){return Math.min.apply(Math,v.map(function(_){return _.evaluate(h)}))}],max:[un,gi(un),function(h,v){return Math.max.apply(Math,v.map(function(_){return _.evaluate(h)}))}],abs:[un,[un],function(h,v){return Math.abs(v[0].evaluate(h))}],round:[un,[un],function(h,v){var _=v[0].evaluate(h);return _<0?-Math.round(-_):Math.round(_)}],floor:[un,[un],function(h,v){return Math.floor(v[0].evaluate(h))}],ceil:[un,[un],function(h,v){return Math.ceil(v[0].evaluate(h))}],"filter-==":[jn,[Yn,vi],function(h,v){var _=v[0],R=v[1];return h.properties()[_.value]===R.value}],"filter-id-==":[jn,[vi],function(h,v){var _=v[0];return h.id()===_.value}],"filter-type-==":[jn,[Yn],function(h,v){var _=v[0];return h.geometryType()===_.value}],"filter-<":[jn,[Yn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F<z}],"filter-id-<":[jn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R<F}],"filter->":[jn,[Yn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F>z}],"filter-id->":[jn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R>F}],"filter-<=":[jn,[Yn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F<=z}],"filter-id-<=":[jn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R<=F}],"filter->=":[jn,[Yn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F>=z}],"filter-id->=":[jn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R>=F}],"filter-has":[jn,[vi],function(h,v){return v[0].value in h.properties()}],"filter-has-id":[jn,[],function(h){return h.id()!==null&&h.id()!==void 0}],"filter-type-in":[jn,[Va(Yn)],function(h,v){return v[0].value.indexOf(h.geometryType())>=0}],"filter-id-in":[jn,[Va(vi)],function(h,v){return v[0].value.indexOf(h.id())>=0}],"filter-in-small":[jn,[Yn,Va(vi)],function(h,v){var _=v[0];return v[1].value.indexOf(h.properties()[_.value])>=0}],"filter-in-large":[jn,[Yn,Va(vi)],function(h,v){var _=v[0],R=v[1];return function(F,z,X,ue){for(;X<=ue;){var Ie=X+ue>>1;if(z[Ie]===F)return!0;z[Ie]>F?ue=Ie-1:X=Ie+1}return!1}(h.properties()[_.value],R.value,0,R.value.length-1)}],all:{type:jn,overloads:[[[jn,jn],function(h,v){var _=v[1];return v[0].evaluate(h)&&_.evaluate(h)}],[gi(jn),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(!R[_].evaluate(h))return!1;return!0}]]},any:{type:jn,overloads:[[[jn,jn],function(h,v){var _=v[1];return v[0].evaluate(h)||_.evaluate(h)}],[gi(jn),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(R[_].evaluate(h))return!0;return!1}]]},"!":[jn,[jn],function(h,v){return!v[0].evaluate(h)}],"is-supported-script":[jn,[Yn],function(h,v){var _=h.globals&&h.globals.isSupportedScript;return!_||_(v[0].evaluate(h))}],upcase:[Yn,[Yn],function(h,v){return v[0].evaluate(h).toUpperCase()}],downcase:[Yn,[Yn],function(h,v){return v[0].evaluate(h).toLowerCase()}],concat:[Yn,gi(vi),function(h,v){return v.map(function(_){return Ar(_.evaluate(h))}).join("")}],"resolved-locale":[Yn,[da],function(h,v){return v[0].evaluate(h).resolvedLocale()}]});var pf=function(h,v){this.expression=h,this._warningHistory={},this._evaluator=new Do,this._defaultValue=v?function(_){return _.type==="color"&&mp(_.default)?new ea(0,0,0,0):_.type==="color"?ea.parse(_.default)||null:_.default===void 0?null:_.default}(v):null,this._enumValues=v&&v.type==="enum"?v.values:null};function oh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in mr}function sh(h,v){var _=new ho(mr,[],v?function(F){var z={color:Kn,string:Yn,number:un,enum:Yn,boolean:jn,formatted:Oa,resolvedImage:xa};return F.type==="array"?Va(z[F.value]||vi,F.length):z[F.type]}(v):void 0),R=_.parse(h,void 0,void 0,void 0,v&&v.type==="string"?{typeAnnotation:"coerce"}:void 0);return R?oa(new pf(R,v)):po(_.errors)}pf.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._evaluator.globals=h,this._evaluator.feature=v,this._evaluator.featureState=_,this._evaluator.canonical=R,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)},pf.prototype.evaluate=function(h,v,_,R,F,z){this._evaluator.globals=h,this._evaluator.feature=v||null,this._evaluator.featureState=_||null,this._evaluator.canonical=R,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=z||null;try{var X=this.expression.evaluate(this._evaluator);if(X==null||typeof X=="number"&&X!=X)return this._defaultValue;if(this._enumValues&&!(X in this._enumValues))throw new Pn("Expected value to be one of "+Object.keys(this._enumValues).map(function(ue){return JSON.stringify(ue)}).join(", ")+", but found "+JSON.stringify(X)+" instead.");return X}catch(ue){return this._warningHistory[ue.message]||(this._warningHistory[ue.message]=!0,typeof console!="undefined"&&console.warn(ue.message)),this._defaultValue}};var If=function(h,v){this.kind=h,this._styleExpression=v,this.isStateDependent=h!=="constant"&&!ru(v.expression)};If.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,F,z)},If.prototype.evaluate=function(h,v,_,R,F,z){return this._styleExpression.evaluate(h,v,_,R,F,z)};var uh=function(h,v,_,R){this.kind=h,this.zoomStops=_,this._styleExpression=v,this.isStateDependent=h!=="camera"&&!ru(v.expression),this.interpolationType=R};function Zs(h,v){if((h=sh(h,v)).result==="error")return h;var _=h.value.expression,R=ec(_);if(!R&&!Ps(v))return po([new Mn("","data expressions not supported")]);var F=Sl(_,["zoom"]);if(!F&&!ll(v))return po([new Mn("","zoom expressions not supported")]);var z=function X(ue){var Ie=null;if(ue instanceof nu)Ie=X(ue.result);else if(ue instanceof Bl)for(var qe=0,lt=ue.args;qe<lt.length&&!(Ie=X(lt[qe]));qe+=1);else(ue instanceof bs||ue instanceof Gs)&&ue.input instanceof Qa&&ue.input.name==="zoom"&&(Ie=ue);return Ie instanceof Mn||ue.eachChild(function(yt){var Lt=X(yt);Lt instanceof Mn?Ie=Lt:!Ie&&Lt?Ie=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Ie&&Lt&&Ie!==Lt&&(Ie=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Ie}(_);return z||F?z instanceof Mn?po([z]):z instanceof Gs&&!Ju(v)?po([new Mn("",'"interpolate" expressions cannot be used with this property')]):oa(z?new uh(R?"camera":"composite",h.value,z.labels,z instanceof Gs?z.interpolation:void 0):new If(R?"constant":"source",h.value)):po([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}uh.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,F,z)},uh.prototype.evaluate=function(h,v,_,R,F,z){return this._styleExpression.evaluate(h,v,_,R,F,z)},uh.prototype.interpolationFactor=function(h,v,_){return this.interpolationType?Gs.interpolationFactor(this.interpolationType,h,v,_):0};var ic=function(h,v){this._parameters=h,this._specification=v,yr(this,function _(R,F){var z,X,ue,Ie=F.type==="color",qe=R.stops&&typeof R.stops[0][0]=="object",lt=qe||!(qe||R.property!==void 0),yt=R.type||(Ju(F)?"exponential":"interval");if(Ie&&((R=yr({},R)).stops&&(R.stops=R.stops.map(function(ki){return[ki[0],ea.parse(ki[1])]})),R.default=ea.parse(R.default?R.default:F.default)),R.colorSpace&&R.colorSpace!=="rgb"&&!Jp[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);if(yt==="exponential")z=td;else if(yt==="interval")z=hf;else if(yt==="categorical"){z=yp,X=Object.create(null);for(var Lt=0,Ut=R.stops;Lt<Ut.length;Lt+=1){var ur=Ut[Lt];X[ur[0]]=ur[1]}ue=typeof R.stops[0][0]}else{if(yt!=="identity")throw new Error('Unknown function type "'+yt+'"');z=Ca}if(qe){for(var fr={},Dr=[],Mr=0;Mr<R.stops.length;Mr++){var Yr=R.stops[Mr],on=Yr[0].zoom;fr[on]===void 0&&(fr[on]={zoom:on,type:R.type,property:R.property,default:R.default,stops:[]},Dr.push(on)),fr[on].stops.push([Yr[0].value,Yr[1]])}for(var vn=[],wn=0,Fn=Dr;wn<Fn.length;wn+=1){var ci=Fn[wn];vn.push([fr[ci].zoom,_(fr[ci],F)])}var Si={name:"linear"};return{kind:"composite",interpolationType:Si,interpolationFactor:Gs.interpolationFactor.bind(void 0,Si),zoomStops:vn.map(function(ki){return ki[0]}),evaluate:function(ki,la){var Ii=ki.zoom;return td({stops:vn,base:R.base},F,Ii).evaluate(Ii,la)}}}if(lt){var Ji=yt==="exponential"?{name:"exponential",base:R.base!==void 0?R.base:1}:null;return{kind:"camera",interpolationType:Ji,interpolationFactor:Gs.interpolationFactor.bind(void 0,Ji),zoomStops:R.stops.map(function(ki){return ki[0]}),evaluate:function(ki){return z(R,F,ki.zoom,X,ue)}}}return{kind:"source",evaluate:function(ki,la){var Ii=la&&la.properties?la.properties[R.property]:void 0;return Ii===void 0?Wc(R.default,F.default):z(R,F,Ii,X,ue)}}}(this._parameters,this._specification))};function el(h){var v=h.key,_=h.value,R=h.valueSpec||{},F=h.objectElementValidators||{},z=h.style,X=h.styleSpec,ue=[],Ie=Fo(_);if(Ie!=="object")return[new ot(v,_,"object expected, "+Ie+" found")];for(var qe in _){var lt=qe.split(".")[0],yt=R[lt]||R["*"],Lt=void 0;if(F[lt])Lt=F[lt];else if(R[lt])Lt=oo;else if(F["*"])Lt=F["*"];else{if(!R["*"]){ue.push(new ot(v,_[qe],'unknown property "'+qe+'"'));continue}Lt=oo}ue=ue.concat(Lt({key:(v&&v+".")+qe,value:_[qe],valueSpec:yt,style:z,styleSpec:X,object:_,objectKey:qe},_))}for(var Ut in R)F[Ut]||R[Ut].required&&R[Ut].default===void 0&&_[Ut]===void 0&&ue.push(new ot(v,_,'missing required property "'+Ut+'"'));return ue}function _p(h){var v=h.value,_=h.valueSpec,R=h.style,F=h.styleSpec,z=h.key,X=h.arrayElementValidator||oo;if(Fo(v)!=="array")return[new ot(z,v,"array expected, "+Fo(v)+" found")];if(_.length&&v.length!==_.length)return[new ot(z,v,"array length "+_.length+" expected, length "+v.length+" found")];if(_["min-length"]&&v.length<_["min-length"])return[new ot(z,v,"array length at least "+_["min-length"]+" expected, length "+v.length+" found")];var ue={type:_.value,values:_.values};F.$version<7&&(ue.function=_.function),Fo(_.value)==="object"&&(ue=_.value);for(var Ie=[],qe=0;qe<v.length;qe++)Ie=Ie.concat(X({array:v,arrayIndex:qe,value:v[qe],valueSpec:ue,style:R,styleSpec:F,key:z+"["+qe+"]"}));return Ie}function Ud(h){var v=h.key,_=h.value,R=h.valueSpec,F=Fo(_);return F==="number"&&_!=_&&(F="NaN"),F!=="number"?[new ot(v,_,"number expected, "+F+" found")]:"minimum"in R&&_<R.minimum?[new ot(v,_,_+" is less than the minimum value "+R.minimum)]:"maximum"in R&&_>R.maximum?[new ot(v,_,_+" is greater than the maximum value "+R.maximum)]:[]}function rd(h){var v,_,R,F=h.valueSpec,z=kr(h.value.type),X={},ue=z!=="categorical"&&h.value.property===void 0,Ie=!ue,qe=Fo(h.value.stops)==="array"&&Fo(h.value.stops[0])==="array"&&Fo(h.value.stops[0][0])==="object",lt=el({key:h.key,value:h.value,valueSpec:h.styleSpec.function,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(Ut){if(z==="identity")return[new ot(Ut.key,Ut.value,'identity function may not have a "stops" property')];var ur=[],fr=Ut.value;return ur=ur.concat(_p({key:Ut.key,value:fr,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:yt})),Fo(fr)==="array"&&fr.length===0&&ur.push(new ot(Ut.key,fr,"array must have at least one stop")),ur},default:function(Ut){return oo({key:Ut.key,value:Ut.value,valueSpec:F,style:Ut.style,styleSpec:Ut.styleSpec})}}});return z==="identity"&&ue&&lt.push(new ot(h.key,h.value,'missing required property "property"')),z==="identity"||h.value.stops||lt.push(new ot(h.key,h.value,'missing required property "stops"')),z==="exponential"&&h.valueSpec.expression&&!Ju(h.valueSpec)&&lt.push(new ot(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(Ie&&!Ps(h.valueSpec)?lt.push(new ot(h.key,h.value,"property functions not supported")):ue&&!ll(h.valueSpec)&&lt.push(new ot(h.key,h.value,"zoom functions not supported"))),z!=="categorical"&&!qe||h.value.property!==void 0||lt.push(new ot(h.key,h.value,'"property" property is required')),lt;function yt(Ut){var ur=[],fr=Ut.value,Dr=Ut.key;if(Fo(fr)!=="array")return[new ot(Dr,fr,"array expected, "+Fo(fr)+" found")];if(fr.length!==2)return[new ot(Dr,fr,"array length 2 expected, length "+fr.length+" found")];if(qe){if(Fo(fr[0])!=="object")return[new ot(Dr,fr,"object expected, "+Fo(fr[0])+" found")];if(fr[0].zoom===void 0)return[new ot(Dr,fr,"object stop key must have zoom")];if(fr[0].value===void 0)return[new ot(Dr,fr,"object stop key must have value")];if(R&&R>kr(fr[0].zoom))return[new ot(Dr,fr[0].zoom,"stop zoom values must appear in ascending order")];kr(fr[0].zoom)!==R&&(R=kr(fr[0].zoom),_=void 0,X={}),ur=ur.concat(el({key:Dr+"[0]",value:fr[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:Ud,value:Lt}}))}else ur=ur.concat(Lt({key:Dr+"[0]",value:fr[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},fr));return oh(Ft(fr[1]))?ur.concat([new ot(Dr+"[1]",fr[1],"expressions are not allowed in function stops.")]):ur.concat(oo({key:Dr+"[1]",value:fr[1],valueSpec:F,style:Ut.style,styleSpec:Ut.styleSpec}))}function Lt(Ut,ur){var fr=Fo(Ut.value),Dr=kr(Ut.value),Mr=Ut.value!==null?Ut.value:ur;if(v){if(fr!==v)return[new ot(Ut.key,Mr,fr+" stop domain type must match previous stop domain type "+v)]}else v=fr;if(fr!=="number"&&fr!=="string"&&fr!=="boolean")return[new ot(Ut.key,Mr,"stop domain value must be a number, string, or boolean")];if(fr!=="number"&&z!=="categorical"){var Yr="number expected, "+fr+" found";return Ps(F)&&z===void 0&&(Yr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ot(Ut.key,Mr,Yr)]}return z!=="categorical"||fr!=="number"||isFinite(Dr)&&Math.floor(Dr)===Dr?z!=="categorical"&&fr==="number"&&_!==void 0&&Dr<_?[new ot(Ut.key,Mr,"stop domain values must appear in ascending order")]:(_=Dr,z==="categorical"&&Dr in X?[new ot(Ut.key,Mr,"stop domain values must be unique")]:(X[Dr]=!0,[])):[new ot(Ut.key,Mr,"integer expected, found "+Dr)]}}function Gc(h){var v=(h.expressionContext==="property"?Zs:sh)(Ft(h.value),h.valueSpec);if(v.result==="error")return v.value.map(function(R){return new ot(""+h.key+R.key,h.value,R.message)});var _=v.value.expression||v.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!_.outputDefined())return[new ot(h.key,h.value,'Invalid data expression for "'+h.propertyKey+'". Output values must be contained as literals within the expression.')];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!ru(_))return[new ot(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!ru(_))return[new ot(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Sl(_,["zoom","feature-state"]))return[new ot(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!ec(_))return[new ot(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function df(h){var v=h.key,_=h.value,R=h.valueSpec,F=[];return Array.isArray(R.values)?R.values.indexOf(kr(_))===-1&&F.push(new ot(v,_,"expected one of ["+R.values.join(", ")+"], "+JSON.stringify(_)+" found")):Object.keys(R.values).indexOf(kr(_))===-1&&F.push(new ot(v,_,"expected one of ["+Object.keys(R.values).join(", ")+"], "+JSON.stringify(_)+" found")),F}function lh(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(var v=0,_=h.slice(1);v<_.length;v+=1){var R=_[v];if(!lh(R)&&typeof R!="boolean")return!1}return!0;default:return!0}}ic.deserialize=function(h){return new ic(h._parameters,h._specification)},ic.serialize=function(h){return{_parameters:h._parameters,_specification:h._specification}};var xp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pf(h){if(h==null)return{filter:function(){return!0},needGeometry:!1};lh(h)||(h=nd(h));var v=sh(h,xp);if(v.result==="error")throw new Error(v.value.map(function(_){return _.key+": "+_.message}).join(", "));return{filter:function(_,R,F){return v.value.evaluate(_,R,{},F)},needGeometry:function _(R){if(!Array.isArray(R))return!1;if(R[0]==="within")return!0;for(var F=1;F<R.length;F++)if(_(R[F]))return!0;return!1}(h)}}function cm(h,v){return h<v?-1:h>v?1:0}function nd(h){if(!h)return!0;var v,_=h[0];return h.length<=1?_!=="any":_==="=="?Os(h[1],h[2],"=="):_==="!="?Zd(Os(h[1],h[2],"==")):_==="<"||_===">"||_==="<="||_===">="?Os(h[1],h[2],_):_==="any"?(v=h.slice(1),["any"].concat(v.map(nd))):_==="all"?["all"].concat(h.slice(1).map(nd)):_==="none"?["all"].concat(h.slice(1).map(nd).map(Zd)):_==="in"?bp(h[1],h.slice(2)):_==="!in"?Zd(bp(h[1],h.slice(2))):_==="has"?Zh(h[1]):_==="!has"?Zd(Zh(h[1])):_!=="within"||h}function Os(h,v,_){switch(h){case"$type":return["filter-type-"+_,v];case"$id":return["filter-id-"+_,v];default:return["filter-"+_,h,v]}}function bp(h,v){if(v.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",v]];case"$id":return["filter-id-in",["literal",v]];default:return v.length>200&&!v.some(function(_){return typeof _!=typeof v[0]})?["filter-in-large",h,["literal",v.sort(cm)]]:["filter-in-small",h,["literal",v]]}}function Zh(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Zd(h){return["!",h]}function Sp(h){return lh(Ft(h.value))?Gc(yr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function v(_){var R=_.value,F=_.key;if(Fo(R)!=="array")return[new ot(F,R,"array expected, "+Fo(R)+" found")];var z,X=_.styleSpec,ue=[];if(R.length<1)return[new ot(F,R,"filter array must have at least 1 element")];switch(ue=ue.concat(df({key:F+"[0]",value:R[0],valueSpec:X.filter_operator,style:_.style,styleSpec:_.styleSpec})),kr(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&kr(R[1])==="$type"&&ue.push(new ot(F,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&ue.push(new ot(F,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(z=Fo(R[1]))!=="string"&&ue.push(new ot(F+"[1]",R[1],"string expected, "+z+" found"));for(var Ie=2;Ie<R.length;Ie++)z=Fo(R[Ie]),kr(R[1])==="$type"?ue=ue.concat(df({key:F+"["+Ie+"]",value:R[Ie],valueSpec:X.geometry_type,style:_.style,styleSpec:_.styleSpec})):z!=="string"&&z!=="number"&&z!=="boolean"&&ue.push(new ot(F+"["+Ie+"]",R[Ie],"string, number, or boolean expected, "+z+" found"));break;case"any":case"all":case"none":for(var qe=1;qe<R.length;qe++)ue=ue.concat(v({key:F+"["+qe+"]",value:R[qe],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":z=Fo(R[1]),R.length!==2?ue.push(new ot(F,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="string"&&ue.push(new ot(F+"[1]",R[1],"string expected, "+z+" found"));break;case"within":z=Fo(R[1]),R.length!==2?ue.push(new ot(F,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="object"&&ue.push(new ot(F+"[1]",R[1],"object expected, "+z+" found"))}return ue}(h)}function Ep(h,v){var _=h.key,R=h.style,F=h.styleSpec,z=h.value,X=h.objectKey,ue=F[v+"_"+h.layerType];if(!ue)return[];var Ie=X.match(/^(.*)-transition$/);if(v==="paint"&&Ie&&ue[Ie[1]]&&ue[Ie[1]].transition)return oo({key:_,value:z,valueSpec:F.transition,style:R,styleSpec:F});var qe,lt=h.valueSpec||ue[X];if(!lt)return[new ot(_,z,'unknown property "'+X+'"')];if(Fo(z)==="string"&&Ps(lt)&&!lt.tokens&&(qe=/^{([^}]+)}$/.exec(z)))return[new ot(_,z,'"'+X+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(qe[1])+" }`.")];var yt=[];return h.layerType==="symbol"&&(X==="text-field"&&R&&!R.glyphs&&yt.push(new ot(_,z,'use of "text-field" requires a style "glyphs" property')),X==="text-font"&&mp(Ft(z))&&kr(z.type)==="identity"&&yt.push(new ot(_,z,'"text-font" does not support identity functions'))),yt.concat(oo({key:h.key,value:z,valueSpec:lt,style:R,styleSpec:F,expressionContext:"property",propertyType:v,propertyKey:X}))}function Ov(h){return Ep(h,"paint")}function $c(h){return Ep(h,"layout")}function Vd(h){var v=[],_=h.value,R=h.key,F=h.style,z=h.styleSpec;_.type||_.ref||v.push(new ot(R,_,'either "type" or "ref" is required'));var X,ue=kr(_.type),Ie=kr(_.ref);if(_.id)for(var qe=kr(_.id),lt=0;lt<h.arrayIndex;lt++){var yt=F.layers[lt];kr(yt.id)===qe&&v.push(new ot(R,_.id,'duplicate layer id "'+_.id+'", previously used at line '+yt.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach(function(ur){ur in _&&v.push(new ot(R,_[ur],'"'+ur+'" is prohibited for ref layers'))}),F.layers.forEach(function(ur){kr(ur.id)===Ie&&(X=ur)}),X?X.ref?v.push(new ot(R,_.ref,"ref cannot reference another ref layer")):ue=kr(X.type):v.push(new ot(R,_.ref,'ref layer "'+Ie+'" not found'));else if(ue!=="background")if(_.source){var Lt=F.sources&&F.sources[_.source],Ut=Lt&&kr(Lt.type);Lt?Ut==="vector"&&ue==="raster"?v.push(new ot(R,_.source,'layer "'+_.id+'" requires a raster source')):Ut==="raster"&&ue!=="raster"?v.push(new ot(R,_.source,'layer "'+_.id+'" requires a vector source')):Ut!=="vector"||_["source-layer"]?Ut==="raster-dem"&&ue!=="hillshade"?v.push(new ot(R,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):ue!=="line"||!_.paint||!_.paint["line-gradient"]||Ut==="geojson"&&Lt.lineMetrics||v.push(new ot(R,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):v.push(new ot(R,_,'layer "'+_.id+'" must specify a "source-layer"')):v.push(new ot(R,_.source,'source "'+_.source+'" not found'))}else v.push(new ot(R,_,'missing required property "source"'));return v=v.concat(el({key:R,value:_,valueSpec:z.layer,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return oo({key:R+".type",value:_.type,valueSpec:z.layer.type,style:h.style,styleSpec:h.styleSpec,object:_,objectKey:"type"})},filter:Sp,layout:function(ur){return el({layer:_,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(fr){return $c(yr({layerType:ue},fr))}}})},paint:function(ur){return el({layer:_,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(fr){return Ov(yr({layerType:ue},fr))}}})}}}))}function ch(h){var v=h.value,_=h.key,R=Fo(v);return R!=="string"?[new ot(_,v,"string expected, "+R+" found")]:[]}var us={promoteId:function(h){var v=h.key,_=h.value;if(Fo(_)==="string")return ch({key:v,value:_});var R=[];for(var F in _)R.push.apply(R,ch({key:v+"."+F,value:_[F]}));return R}};function fh(h){var v=h.value,_=h.key,R=h.styleSpec,F=h.style;if(!v.type)return[new ot(_,v,'"type" is required')];var z,X=kr(v.type);switch(X){case"vector":case"raster":case"raster-dem":return el({key:_,value:v,valueSpec:R["source_"+X.replace("-","_")],style:h.style,styleSpec:R,objectElementValidators:us});case"geojson":if(z=el({key:_,value:v,valueSpec:R.source_geojson,style:F,styleSpec:R,objectElementValidators:us}),v.cluster)for(var ue in v.clusterProperties){var Ie=v.clusterProperties[ue],qe=Ie[0],lt=typeof qe=="string"?[qe,["accumulated"],["get",ue]]:qe;z.push.apply(z,Gc({key:_+"."+ue+".map",value:Ie[1],expressionContext:"cluster-map"})),z.push.apply(z,Gc({key:_+"."+ue+".reduce",value:lt,expressionContext:"cluster-reduce"}))}return z;case"video":return el({key:_,value:v,valueSpec:R.source_video,style:F,styleSpec:R});case"image":return el({key:_,value:v,valueSpec:R.source_image,style:F,styleSpec:R});case"canvas":return[new ot(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return df({key:_+".type",value:v.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:F,styleSpec:R})}}function Cc(h){var v=h.value,_=h.styleSpec,R=_.light,F=h.style,z=[],X=Fo(v);if(v===void 0)return z;if(X!=="object")return z.concat([new ot("light",v,"object expected, "+X+" found")]);for(var ue in v){var Ie=ue.match(/^(.*)-transition$/);z=z.concat(Ie&&R[Ie[1]]&&R[Ie[1]].transition?oo({key:ue,value:v[ue],valueSpec:_.transition,style:F,styleSpec:_}):R[ue]?oo({key:ue,value:v[ue],valueSpec:R[ue],style:F,styleSpec:_}):[new ot(ue,v[ue],'unknown property "'+ue+'"')])}return z}var ac={"*":function(){return[]},array:_p,boolean:function(h){var v=h.value,_=h.key,R=Fo(v);return R!=="boolean"?[new ot(_,v,"boolean expected, "+R+" found")]:[]},number:Ud,color:function(h){var v=h.key,_=h.value,R=Fo(_);return R!=="string"?[new ot(v,_,"color expected, "+R+" found")]:_i(_)===null?[new ot(v,_,'color expected, "'+_+'" found')]:[]},constants:Ot,enum:df,filter:Sp,function:rd,layer:Vd,object:el,source:fh,light:Cc,string:ch,formatted:function(h){return ch(h).length===0?[]:Gc(h)},resolvedImage:function(h){return ch(h).length===0?[]:Gc(h)}};function oo(h){var v=h.value,_=h.valueSpec,R=h.styleSpec;return _.expression&&mp(kr(v))?rd(h):_.expression&&oh(Ft(v))?Gc(h):_.type&&ac[_.type]?ac[_.type](h):el(yr({},h,{valueSpec:_.type?R[_.type]:_}))}function $o(h){var v=h.value,_=h.key,R=ch(h);return R.length||(v.indexOf("{fontstack}")===-1&&R.push(new ot(_,v,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&R.push(new ot(_,v,'"glyphs" url must include a "{range}" token'))),R}function vo(h,v){v===void 0&&(v=At);var _=[];return _=_.concat(oo({key:"",value:h,valueSpec:v.$root,styleSpec:v,style:h,objectElementValidators:{glyphs:$o,"*":function(){return[]}}})),h.constants&&(_=_.concat(Ot({key:"constants",value:h.constants,style:h,styleSpec:v}))),id(_)}function id(h){return[].concat(h).sort(function(v,_){return v.line-_.line})}function Of(h){return function(){for(var v=[],_=arguments.length;_--;)v[_]=arguments[_];return id(h.apply(this,v))}}vo.source=Of(fh),vo.light=Of(Cc),vo.layer=Of(Vd),vo.filter=Of(Sp),vo.paintProperty=Of(Ov),vo.layoutProperty=Of($c);var wp=vo,kv=wp.light,va=wp.paintProperty,Cp=wp.layoutProperty;function Xc(h,v){var _=!1;if(v&&v.length)for(var R=0,F=v;R<F.length;R+=1)h.fire(new Gt(new Error(F[R].message))),_=!0;return _}var $s=Es;function Es(h,v,_){var R=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;var F=new Int32Array(this.arrayBuffer);h=F[0],this.d=(v=F[1])+2*(_=F[2]);for(var z=0;z<this.d*this.d;z++){var X=F[3+z],ue=F[3+z+1];R.push(X===ue?null:F.subarray(X,ue))}var Ie=F[3+R.length+1];this.keys=F.subarray(F[3+R.length],Ie),this.bboxes=F.subarray(Ie),this.insert=this._insertReadonly}else{this.d=v+2*_;for(var qe=0;qe<this.d*this.d;qe++)R.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=h,this.padding=_,this.scale=v/h,this.uid=0;var lt=_/v*h;this.min=-lt,this.max=h+lt}Es.prototype.insert=function(h,v,_,R,F){this._forEachCell(v,_,R,F,this._insertCell,this.uid++),this.keys.push(h),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(R),this.bboxes.push(F)},Es.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Es.prototype._insertCell=function(h,v,_,R,F,z){this.cells[F].push(z)},Es.prototype.query=function(h,v,_,R,F){var z=this.min,X=this.max;if(h<=z&&v<=z&&X<=_&&X<=R&&!F)return Array.prototype.slice.call(this.keys);var ue=[];return this._forEachCell(h,v,_,R,this._queryCell,ue,{},F),ue},Es.prototype._queryCell=function(h,v,_,R,F,z,X,ue){var Ie=this.cells[F];if(Ie!==null)for(var qe=this.keys,lt=this.bboxes,yt=0;yt<Ie.length;yt++){var Lt=Ie[yt];if(X[Lt]===void 0){var Ut=4*Lt;(ue?ue(lt[Ut+0],lt[Ut+1],lt[Ut+2],lt[Ut+3]):h<=lt[Ut+2]&&v<=lt[Ut+3]&&_>=lt[Ut+0]&&R>=lt[Ut+1])?(X[Lt]=!0,z.push(qe[Lt])):X[Lt]=!1}}},Es.prototype._forEachCell=function(h,v,_,R,F,z,X,ue){for(var Ie=this._convertToCellCoord(h),qe=this._convertToCellCoord(v),lt=this._convertToCellCoord(_),yt=this._convertToCellCoord(R),Lt=Ie;Lt<=lt;Lt++)for(var Ut=qe;Ut<=yt;Ut++){var ur=this.d*Ut+Lt;if((!ue||ue(this._convertFromCellCoord(Lt),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Lt+1),this._convertFromCellCoord(Ut+1)))&&F.call(this,h,v,_,R,ur,z,X,ue))return}},Es.prototype._convertFromCellCoord=function(h){return(h-this.padding)/this.scale},Es.prototype._convertToCellCoord=function(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))},Es.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var h=this.cells,v=3+this.cells.length+1+1,_=0,R=0;R<this.cells.length;R++)_+=this.cells[R].length;var F=new Int32Array(v+_+this.keys.length+this.bboxes.length);F[0]=this.extent,F[1]=this.n,F[2]=this.padding;for(var z=v,X=0;X<h.length;X++){var ue=h[X];F[3+X]=z,F.set(ue,z),z+=ue.length}return F[3+h.length]=z,F.set(this.keys,z),F[3+h.length+1]=z+=this.keys.length,F.set(this.bboxes,z),z+=this.bboxes.length,F.buffer};var hh=te.ImageData,ad=te.ImageBitmap,ks={};function Ni(h,v,_){_===void 0&&(_={}),Object.defineProperty(v,"_classRegistryKey",{value:h,writeable:!1}),ks[h]={klass:v,omit:_.omit||[],shallow:_.shallow||[]}}for(var ju in Ni("Object",Object),$s.serialize=function(h,v){var _=h.toArrayBuffer();return v&&v.push(_),{buffer:_}},$s.deserialize=function(h){return new $s(h.buffer)},Ni("Grid",$s),Ni("Color",ea),Ni("Error",Error),Ni("ResolvedImage",ko),Ni("StylePropertyFunction",ic),Ni("StyleExpression",pf,{omit:["_evaluator"]}),Ni("ZoomDependentExpression",uh),Ni("ZoomConstantExpression",If),Ni("CompoundExpression",Qa,{omit:["_evaluate"]}),mr)mr[ju]._classRegistryKey||Ni("Expression_"+ju,mr[ju]);function Yc(h){return h&&typeof ArrayBuffer!="undefined"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function kf(h){return ad&&h instanceof ad}function cl(h,v){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(Yc(h)||kf(h))return v&&v.push(h),h;if(ArrayBuffer.isView(h)){var _=h;return v&&v.push(_.buffer),_}if(h instanceof hh)return v&&v.push(h.data.buffer),h;if(Array.isArray(h)){for(var R=[],F=0,z=h;F<z.length;F+=1)R.push(cl(z[F],v));return R}if(typeof h=="object"){var X=h.constructor,ue=X._classRegistryKey;if(!ue)throw new Error("can't serialize object of unregistered class");var Ie=X.serialize?X.serialize(h,v):{};if(!X.serialize){for(var qe in h)if(h.hasOwnProperty(qe)&&!(ks[ue].omit.indexOf(qe)>=0)){var lt=h[qe];Ie[qe]=ks[ue].shallow.indexOf(qe)>=0?lt:cl(lt,v)}h instanceof Error&&(Ie.message=h.message)}if(Ie.$name)throw new Error("$name property is reserved for worker serialization logic.");return ue!=="Object"&&(Ie.$name=ue),Ie}throw new Error("can't serialize object of type "+typeof h)}function Zo(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||Yc(h)||kf(h)||ArrayBuffer.isView(h)||h instanceof hh)return h;if(Array.isArray(h))return h.map(Zo);if(typeof h=="object"){var v=h.$name||"Object",_=ks[v].klass;if(!_)throw new Error("can't deserialize unregistered class "+v);if(_.deserialize)return _.deserialize(h);for(var R=Object.create(_.prototype),F=0,z=Object.keys(h);F<z.length;F+=1){var X=z[F];if(X!=="$name"){var ue=h[X];R[X]=ks[v].shallow.indexOf(X)>=0?ue:Zo(ue)}}return R}throw new Error("can't deserialize object of type "+typeof h)}var Ds=function(){this.first=!0};Ds.prototype.update=function(h,v){var _=Math.floor(h);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=h,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=v),h!==this.lastZoom&&(this.lastZoom=h,this.lastFloorZoom=_,!0))};var Ei={"Latin-1 Supplement":function(h){return h>=128&&h<=255},Arabic:function(h){return h>=1536&&h<=1791},"Arabic Supplement":function(h){return h>=1872&&h<=1919},"Arabic Extended-A":function(h){return h>=2208&&h<=2303},"Hangul Jamo":function(h){return h>=4352&&h<=4607},"Unified Canadian Aboriginal Syllabics":function(h){return h>=5120&&h<=5759},Khmer:function(h){return h>=6016&&h<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(h){return h>=6320&&h<=6399},"General Punctuation":function(h){return h>=8192&&h<=8303},"Letterlike Symbols":function(h){return h>=8448&&h<=8527},"Number Forms":function(h){return h>=8528&&h<=8591},"Miscellaneous Technical":function(h){return h>=8960&&h<=9215},"Control Pictures":function(h){return h>=9216&&h<=9279},"Optical Character Recognition":function(h){return h>=9280&&h<=9311},"Enclosed Alphanumerics":function(h){return h>=9312&&h<=9471},"Geometric Shapes":function(h){return h>=9632&&h<=9727},"Miscellaneous Symbols":function(h){return h>=9728&&h<=9983},"Miscellaneous Symbols and Arrows":function(h){return h>=11008&&h<=11263},"CJK Radicals Supplement":function(h){return h>=11904&&h<=12031},"Kangxi Radicals":function(h){return h>=12032&&h<=12255},"Ideographic Description Characters":function(h){return h>=12272&&h<=12287},"CJK Symbols and Punctuation":function(h){return h>=12288&&h<=12351},Hiragana:function(h){return h>=12352&&h<=12447},Katakana:function(h){return h>=12448&&h<=12543},Bopomofo:function(h){return h>=12544&&h<=12591},"Hangul Compatibility Jamo":function(h){return h>=12592&&h<=12687},Kanbun:function(h){return h>=12688&&h<=12703},"Bopomofo Extended":function(h){return h>=12704&&h<=12735},"CJK Strokes":function(h){return h>=12736&&h<=12783},"Katakana Phonetic Extensions":function(h){return h>=12784&&h<=12799},"Enclosed CJK Letters and Months":function(h){return h>=12800&&h<=13055},"CJK Compatibility":function(h){return h>=13056&&h<=13311},"CJK Unified Ideographs Extension A":function(h){return h>=13312&&h<=19903},"Yijing Hexagram Symbols":function(h){return h>=19904&&h<=19967},"CJK Unified Ideographs":function(h){return h>=19968&&h<=40959},"Yi Syllables":function(h){return h>=40960&&h<=42127},"Yi Radicals":function(h){return h>=42128&&h<=42191},"Hangul Jamo Extended-A":function(h){return h>=43360&&h<=43391},"Hangul Syllables":function(h){return h>=44032&&h<=55215},"Hangul Jamo Extended-B":function(h){return h>=55216&&h<=55295},"Private Use Area":function(h){return h>=57344&&h<=63743},"CJK Compatibility Ideographs":function(h){return h>=63744&&h<=64255},"Arabic Presentation Forms-A":function(h){return h>=64336&&h<=65023},"Vertical Forms":function(h){return h>=65040&&h<=65055},"CJK Compatibility Forms":function(h){return h>=65072&&h<=65103},"Small Form Variants":function(h){return h>=65104&&h<=65135},"Arabic Presentation Forms-B":function(h){return h>=65136&&h<=65279},"Halfwidth and Fullwidth Forms":function(h){return h>=65280&&h<=65519}};function zl(h){for(var v=0,_=h;v<_.length;v+=1)if(ph(_[v].charCodeAt(0)))return!0;return!1}function ph(h){return!(h!==746&&h!==747&&(h<4352||!(Ei["Bopomofo Extended"](h)||Ei.Bopomofo(h)||Ei["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Ei["CJK Compatibility Ideographs"](h)||Ei["CJK Compatibility"](h)||Ei["CJK Radicals Supplement"](h)||Ei["CJK Strokes"](h)||!(!Ei["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Ei["CJK Unified Ideographs Extension A"](h)||Ei["CJK Unified Ideographs"](h)||Ei["Enclosed CJK Letters and Months"](h)||Ei["Hangul Compatibility Jamo"](h)||Ei["Hangul Jamo Extended-A"](h)||Ei["Hangul Jamo Extended-B"](h)||Ei["Hangul Jamo"](h)||Ei["Hangul Syllables"](h)||Ei.Hiragana(h)||Ei["Ideographic Description Characters"](h)||Ei.Kanbun(h)||Ei["Kangxi Radicals"](h)||Ei["Katakana Phonetic Extensions"](h)||Ei.Katakana(h)&&h!==12540||!(!Ei["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Ei["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Ei["Unified Canadian Aboriginal Syllabics"](h)||Ei["Unified Canadian Aboriginal Syllabics Extended"](h)||Ei["Vertical Forms"](h)||Ei["Yijing Hexagram Symbols"](h)||Ei["Yi Syllables"](h)||Ei["Yi Radicals"](h))))}function Vh(h){return!(ph(h)||function(v){return!!(Ei["Latin-1 Supplement"](v)&&(v===167||v===169||v===174||v===177||v===188||v===189||v===190||v===215||v===247)||Ei["General Punctuation"](v)&&(v===8214||v===8224||v===8225||v===8240||v===8241||v===8251||v===8252||v===8258||v===8263||v===8264||v===8265||v===8273)||Ei["Letterlike Symbols"](v)||Ei["Number Forms"](v)||Ei["Miscellaneous Technical"](v)&&(v>=8960&&v<=8967||v>=8972&&v<=8991||v>=8996&&v<=9e3||v===9003||v>=9085&&v<=9114||v>=9150&&v<=9165||v===9167||v>=9169&&v<=9179||v>=9186&&v<=9215)||Ei["Control Pictures"](v)&&v!==9251||Ei["Optical Character Recognition"](v)||Ei["Enclosed Alphanumerics"](v)||Ei["Geometric Shapes"](v)||Ei["Miscellaneous Symbols"](v)&&!(v>=9754&&v<=9759)||Ei["Miscellaneous Symbols and Arrows"](v)&&(v>=11026&&v<=11055||v>=11088&&v<=11097||v>=11192&&v<=11243)||Ei["CJK Symbols and Punctuation"](v)||Ei.Katakana(v)||Ei["Private Use Area"](v)||Ei["CJK Compatibility Forms"](v)||Ei["Small Form Variants"](v)||Ei["Halfwidth and Fullwidth Forms"](v)||v===8734||v===8756||v===8757||v>=9984&&v<=10087||v>=10102&&v<=10131||v===65532||v===65533)}(h))}function Tc(h){return h>=1424&&h<=2303||Ei["Arabic Presentation Forms-A"](h)||Ei["Arabic Presentation Forms-B"](h)}function Cu(h,v){return!(!v&&Tc(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Ei.Khmer(h))}function Tp(h){for(var v=0,_=h;v<_.length;v+=1)if(Tc(_[v].charCodeAt(0)))return!0;return!1}var Ac=null,iu="unavailable",fl=null,Dv=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(iu="error"),Ac&&Ac(h)};function Hh(){jh.fire(new St("pluginStateChange",{pluginStatus:iu,pluginURL:fl}))}var jh=new gr,Hd=function(){return iu},oc=function(){if(iu!=="deferred"||!fl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");iu="loading",Hh(),fl&&wt({url:fl},function(h){h?Dv(h):(iu="loaded",Hh())})},au={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return iu==="loaded"||au.applyArabicShaping!=null},isLoading:function(){return iu==="loading"},setState:function(h){iu=h.pluginStatus,fl=h.pluginURL},isParsed:function(){return au.applyArabicShaping!=null&&au.processBidirectionalText!=null&&au.processStyledBidirectionalText!=null},getPluginURL:function(){return fl}},ja=function(h,v){this.zoom=h,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ds,this.transition={})};ja.prototype.isSupportedScript=function(h){return function(v,_){for(var R=0,F=v;R<F.length;R+=1)if(!Cu(F[R].charCodeAt(0),_))return!1;return!0}(h,au.isLoaded())},ja.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ja.prototype.getCrossfadeParameters=function(){var h=this.zoom,v=h-Math.floor(h),_=this.crossFadingFactor();return h>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*v}};var ws=function(h,v){this.property=h,this.value=v,this.expression=function(_,R){if(mp(_))return new ic(_,R);if(oh(_)){var F=Zs(_,R);if(F.result==="error")throw new Error(F.value.map(function(X){return X.key+": "+X.message}).join(", "));return F.value}var z=_;return typeof _=="string"&&R.type==="color"&&(z=ea.parse(_)),{kind:"constant",evaluate:function(){return z}}}(v===void 0?h.specification.default:v,h.specification)};ws.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ws.prototype.possiblyEvaluate=function(h,v,_){return this.property.possiblyEvaluate(this,h,v,_)};var Kl=function(h){this.property=h,this.value=new ws(h,void 0)};Kl.prototype.transitioned=function(h,v){return new Df(this.property,this.value,v,E({},h.transition,this.transition),h.now)},Kl.prototype.untransitioned=function(){return new Df(this.property,this.value,null,{},0)};var Wu=function(h){this._properties=h,this._values=Object.create(h.defaultTransitionablePropertyValues)};Wu.prototype.getValue=function(h){return Se(this._values[h].value.value)},Wu.prototype.setValue=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new Kl(this._values[h].property)),this._values[h].value=new ws(this._values[h].property,v===null?void 0:Se(v))},Wu.prototype.getTransition=function(h){return Se(this._values[h].transition)},Wu.prototype.setTransition=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new Kl(this._values[h].property)),this._values[h].transition=Se(v)||void 0},Wu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],F=this.getValue(R);F!==void 0&&(h[R]=F);var z=this.getTransition(R);z!==void 0&&(h[R+"-transition"]=z)}return h},Wu.prototype.transitioned=function(h,v){for(var _=new Mc(this._properties),R=0,F=Object.keys(this._values);R<F.length;R+=1){var z=F[R];_._values[z]=this._values[z].transitioned(h,v._values[z])}return _},Wu.prototype.untransitioned=function(){for(var h=new Mc(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v];h._values[R]=this._values[R].untransitioned()}return h};var Df=function(h,v,_,R,F){this.property=h,this.value=v,this.begin=F+R.delay||0,this.end=this.begin+R.duration||0,h.specification.transition&&(R.delay||R.duration)&&(this.prior=_)};Df.prototype.possiblyEvaluate=function(h,v,_){var R=h.now||0,F=this.value.possiblyEvaluate(h,v,_),z=this.prior;if(z){if(R>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(R<this.begin)return z.possiblyEvaluate(h,v,_);var X=(R-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(h,v,_),F,function(ue){if(ue<=0)return 0;if(ue>=1)return 1;var Ie=ue*ue,qe=Ie*ue;return 4*(ue<.5?qe:3*(ue-Ie)+qe-.75)}(X))}return F};var Mc=function(h){this._properties=h,this._values=Object.create(h.defaultTransitioningPropertyValues)};Mc.prototype.possiblyEvaluate=function(h,v,_){for(var R=new Wh(this._properties),F=0,z=Object.keys(this._values);F<z.length;F+=1){var X=z[F];R._values[X]=this._values[X].possiblyEvaluate(h,v,_)}return R},Mc.prototype.hasTransition=function(){for(var h=0,v=Object.keys(this._values);h<v.length;h+=1)if(this._values[v[h]].prior)return!0;return!1};var tl=function(h){this._properties=h,this._values=Object.create(h.defaultPropertyValues)};tl.prototype.getValue=function(h){return Se(this._values[h].value)},tl.prototype.setValue=function(h,v){this._values[h]=new ws(this._values[h].property,v===null?void 0:Se(v))},tl.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],F=this.getValue(R);F!==void 0&&(h[R]=F)}return h},tl.prototype.possiblyEvaluate=function(h,v,_){for(var R=new Wh(this._properties),F=0,z=Object.keys(this._values);F<z.length;F+=1){var X=z[F];R._values[X]=this._values[X].possiblyEvaluate(h,v,_)}return R};var Tu=function(h,v,_){this.property=h,this.value=v,this.parameters=_};Tu.prototype.isConstant=function(){return this.value.kind==="constant"},Tu.prototype.constantOr=function(h){return this.value.kind==="constant"?this.value.value:h},Tu.prototype.evaluate=function(h,v,_,R){return this.property.evaluate(this.value,this.parameters,h,v,_,R)};var Wh=function(h){this._properties=h,this._values=Object.create(h.defaultPossiblyEvaluatedValues)};Wh.prototype.get=function(h){return this._values[h]};var Qi=function(h){this.specification=h};Qi.prototype.possiblyEvaluate=function(h,v){return h.expression.evaluate(v)},Qi.prototype.interpolate=function(h,v,_){var R=xc[this.specification.type];return R?R(h,v,_):h};var wi=function(h,v){this.specification=h,this.overrides=v};wi.prototype.possiblyEvaluate=function(h,v,_,R){return new Tu(this,h.expression.kind==="constant"||h.expression.kind==="camera"?{kind:"constant",value:h.expression.evaluate(v,null,{},_,R)}:h.expression,v)},wi.prototype.interpolate=function(h,v,_){if(h.value.kind!=="constant"||v.value.kind!=="constant")return h;if(h.value.value===void 0||v.value.value===void 0)return new Tu(this,{kind:"constant",value:void 0},h.parameters);var R=xc[this.specification.type];return R?new Tu(this,{kind:"constant",value:R(h.value.value,v.value.value,_)},h.parameters):h},wi.prototype.evaluate=function(h,v,_,R,F,z){return h.kind==="constant"?h.value:h.evaluate(v,_,R,F,z)};var wl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R,F,z){if(_.value===void 0)return new Tu(this,{kind:"constant",value:void 0},R);if(_.expression.kind==="constant"){var X=_.expression.evaluate(R,null,{},F,z),ue=_.property.specification.type==="resolvedImage"&&typeof X!="string"?X.name:X,Ie=this._calculate(ue,ue,ue,R);return new Tu(this,{kind:"constant",value:Ie},R)}if(_.expression.kind==="camera"){var qe=this._calculate(_.expression.evaluate({zoom:R.zoom-1}),_.expression.evaluate({zoom:R.zoom}),_.expression.evaluate({zoom:R.zoom+1}),R);return new Tu(this,{kind:"constant",value:qe},R)}return new Tu(this,_.expression,R)},v.prototype.evaluate=function(_,R,F,z,X,ue){if(_.kind==="source"){var Ie=_.evaluate(R,F,z,X,ue);return this._calculate(Ie,Ie,Ie,R)}return _.kind==="composite"?this._calculate(_.evaluate({zoom:Math.floor(R.zoom)-1},F,z),_.evaluate({zoom:Math.floor(R.zoom)},F,z),_.evaluate({zoom:Math.floor(R.zoom)+1},F,z),R):_.value},v.prototype._calculate=function(_,R,F,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:_,to:R}:{from:F,to:R}},v.prototype.interpolate=function(_){return _},v}(wi),rl=function(h){this.specification=h};rl.prototype.possiblyEvaluate=function(h,v,_,R){if(h.value!==void 0){if(h.expression.kind==="constant"){var F=h.expression.evaluate(v,null,{},_,R);return this._calculate(F,F,F,v)}return this._calculate(h.expression.evaluate(new ja(Math.floor(v.zoom-1),v)),h.expression.evaluate(new ja(Math.floor(v.zoom),v)),h.expression.evaluate(new ja(Math.floor(v.zoom+1),v)),v)}},rl.prototype._calculate=function(h,v,_,R){return R.zoom>R.zoomHistory.lastIntegerZoom?{from:h,to:v}:{from:_,to:v}},rl.prototype.interpolate=function(h){return h};var Gu=function(h){this.specification=h};Gu.prototype.possiblyEvaluate=function(h,v,_,R){return!!h.expression.evaluate(v,null,{},_,R)},Gu.prototype.interpolate=function(){return!1};var Cs=function(h){for(var v in this.properties=h,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],h){var _=h[v];_.specification.overridable&&this.overridableProperties.push(v);var R=this.defaultPropertyValues[v]=new ws(_,void 0),F=this.defaultTransitionablePropertyValues[v]=new Kl(_);this.defaultTransitioningPropertyValues[v]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=R.possiblyEvaluate({})}};Ni("DataDrivenProperty",wi),Ni("DataConstantProperty",Qi),Ni("CrossFadedDataDrivenProperty",wl),Ni("CrossFadedProperty",rl),Ni("ColorRampProperty",Gu);var sc=function(h){function v(_,R){if(h.call(this),this.id=_.id,this.type=_.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},_.type!=="custom"&&(this.metadata=(_=_).metadata,this.minzoom=_.minzoom,this.maxzoom=_.maxzoom,_.type!=="background"&&(this.source=_.source,this.sourceLayer=_["source-layer"],this.filter=_.filter),R.layout&&(this._unevaluatedLayout=new tl(R.layout)),R.paint)){for(var F in this._transitionablePaint=new Wu(R.paint),_.paint)this.setPaintProperty(F,_.paint[F],{validate:!1});for(var z in _.layout)this.setLayoutProperty(z,_.layout[z],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wh(R.paint)}}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},v.prototype.getLayoutProperty=function(_){return _==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_)},v.prototype.setLayoutProperty=function(_,R,F){F===void 0&&(F={}),R!=null&&this._validate(Cp,"layers."+this.id+".layout."+_,_,R,F)||(_!=="visibility"?this._unevaluatedLayout.setValue(_,R):this.visibility=R)},v.prototype.getPaintProperty=function(_){return it(_,"-transition")?this._transitionablePaint.getTransition(_.slice(0,-11)):this._transitionablePaint.getValue(_)},v.prototype.setPaintProperty=function(_,R,F){if(F===void 0&&(F={}),R!=null&&this._validate(va,"layers."+this.id+".paint."+_,_,R,F))return!1;if(it(_,"-transition"))return this._transitionablePaint.setTransition(_.slice(0,-11),R||void 0),!1;var z=this._transitionablePaint._values[_],X=z.property.specification["property-type"]==="cross-faded-data-driven",ue=z.value.isDataDriven(),Ie=z.value;this._transitionablePaint.setValue(_,R),this._handleSpecialPaintPropertyUpdate(_);var qe=this._transitionablePaint._values[_].value;return qe.isDataDriven()||ue||X||this._handleOverridablePaintPropertyUpdate(_,Ie,qe)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,F){return!1},v.prototype.isHidden=function(_){return!!(this.minzoom&&_<this.minzoom)||!!(this.maxzoom&&_>=this.maxzoom)||this.visibility==="none"},v.prototype.updateTransitions=function(_){this._transitioningPaint=this._transitionablePaint.transitioned(_,this._transitioningPaint)},v.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},v.prototype.recalculate=function(_,R){_.getCrossfadeParameters&&(this._crossfadeParameters=_.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_,void 0,R)),this.paint=this._transitioningPaint.possiblyEvaluate(_,void 0,R)},v.prototype.serialize=function(){var _={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_.layout=_.layout||{},_.layout.visibility=this.visibility),Le(_,function(R,F){return!(R===void 0||F==="layout"&&!Object.keys(R).length||F==="paint"&&!Object.keys(R).length)})},v.prototype._validate=function(_,R,F,z,X){return X===void 0&&(X={}),(!X||X.validate!==!1)&&Xc(this,_.call(wp,{key:R,layerType:this.type,objectKey:F,value:z,styleSpec:At,style:{glyphs:!0,sprite:!0}}))},v.prototype.is3D=function(){return!1},v.prototype.isTileClipped=function(){return!1},v.prototype.hasOffscreenPass=function(){return!1},v.prototype.resize=function(){},v.prototype.isStateDependent=function(){for(var _ in this.paint._values){var R=this.paint.get(_);if(R instanceof Tu&&Ps(R.property.specification)&&(R.value.kind==="source"||R.value.kind==="composite")&&R.value.isStateDependent)return!0}return!1},v}(gr),Lf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},dh=function(h,v){this._structArray=h,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},zo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Xs(h,v){v===void 0&&(v=1);var _=0,R=0;return{members:h.map(function(F){var z=Lf[F.type].BYTES_PER_ELEMENT,X=_=Lv(_,Math.max(v,z)),ue=F.components||1;return R=Math.max(R,z),_+=z*ue,{name:F.name,type:F.type,components:ue,offset:X}}),size:Lv(_,Math.max(R,v)),alignment:v}}function Lv(h,v){return Math.ceil(h/v)*v}zo.serialize=function(h,v){return h._trim(),v&&(h.isTransferred=!0,v.push(h.arrayBuffer)),{length:h.length,arrayBuffer:h.arrayBuffer}},zo.deserialize=function(h){var v=Object.create(this.prototype);return v.arrayBuffer=h.arrayBuffer,v.length=h.length,v.capacity=h.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v},zo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},zo.prototype.clear=function(){this.length=0},zo.prototype.resize=function(h){this.reserve(h),this.length=h},zo.prototype.reserve=function(h){if(h>this.capacity){this.capacity=Math.max(h,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}},zo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var vh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.int16[z+0]=R,this.int16[z+1]=F,_},v}(zo);vh.prototype.bytesPerElement=4,Ni("StructArrayLayout2i4",vh);var Ff=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var X=this.length;return this.resize(X+1),this.emplace(X,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,X){var ue=4*_;return this.int16[ue+0]=R,this.int16[ue+1]=F,this.int16[ue+2]=z,this.int16[ue+3]=X,_},v}(zo);Ff.prototype.bytesPerElement=8,Ni("StructArrayLayout4i8",Ff);var uc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,_,R,F,z,X,ue)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie){var qe=6*_;return this.int16[qe+0]=R,this.int16[qe+1]=F,this.int16[qe+2]=z,this.int16[qe+3]=X,this.int16[qe+4]=ue,this.int16[qe+5]=Ie,_},v}(zo);uc.prototype.bytesPerElement=12,Ni("StructArrayLayout2i4i12",uc);var Ta=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,_,R,F,z,X,ue)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie){var qe=4*_,lt=8*_;return this.int16[qe+0]=R,this.int16[qe+1]=F,this.uint8[lt+4]=z,this.uint8[lt+5]=X,this.uint8[lt+6]=ue,this.uint8[lt+7]=Ie,_},v}(zo);Ta.prototype.bytesPerElement=8,Ni("StructArrayLayout2i4ub8",Ta);var gh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.float32[z+0]=R,this.float32[z+1]=F,_},v}(zo);gh.prototype.bytesPerElement=8,Ni("StructArrayLayout2f8",gh);var Kc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue,Ie,qe,lt,yt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,_,R,F,z,X,ue,Ie,qe,lt,yt)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt){var Ut=10*_;return this.uint16[Ut+0]=R,this.uint16[Ut+1]=F,this.uint16[Ut+2]=z,this.uint16[Ut+3]=X,this.uint16[Ut+4]=ue,this.uint16[Ut+5]=Ie,this.uint16[Ut+6]=qe,this.uint16[Ut+7]=lt,this.uint16[Ut+8]=yt,this.uint16[Ut+9]=Lt,_},v}(zo);Kc.prototype.bytesPerElement=20,Ni("StructArrayLayout10ui20",Kc);var od=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut){var ur=this.length;return this.resize(ur+1),this.emplace(ur,_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur){var fr=12*_;return this.int16[fr+0]=R,this.int16[fr+1]=F,this.int16[fr+2]=z,this.int16[fr+3]=X,this.uint16[fr+4]=ue,this.uint16[fr+5]=Ie,this.uint16[fr+6]=qe,this.uint16[fr+7]=lt,this.int16[fr+8]=yt,this.int16[fr+9]=Lt,this.int16[fr+10]=Ut,this.int16[fr+11]=ur,_},v}(zo);od.prototype.bytesPerElement=24,Ni("StructArrayLayout4i4ui4i24",od);var Bf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var X=3*_;return this.float32[X+0]=R,this.float32[X+1]=F,this.float32[X+2]=z,_},v}(zo);Bf.prototype.bytesPerElement=12,Ni("StructArrayLayout3f12",Bf);var Gh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint32[1*_+0]=R,_},v}(zo);Gh.prototype.bytesPerElement=4,Ni("StructArrayLayout1ul4",Gh);var jd=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue,Ie,qe,lt){var yt=this.length;return this.resize(yt+1),this.emplace(yt,_,R,F,z,X,ue,Ie,qe,lt)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie,qe,lt,yt){var Lt=10*_,Ut=5*_;return this.int16[Lt+0]=R,this.int16[Lt+1]=F,this.int16[Lt+2]=z,this.int16[Lt+3]=X,this.int16[Lt+4]=ue,this.int16[Lt+5]=Ie,this.uint32[Ut+3]=qe,this.uint16[Lt+8]=lt,this.uint16[Lt+9]=yt,_},v}(zo);jd.prototype.bytesPerElement=20,Ni("StructArrayLayout6i1ul2ui20",jd);var Sn=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,_,R,F,z,X,ue)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie){var qe=6*_;return this.int16[qe+0]=R,this.int16[qe+1]=F,this.int16[qe+2]=z,this.int16[qe+3]=X,this.int16[qe+4]=ue,this.int16[qe+5]=Ie,_},v}(zo);Sn.prototype.bytesPerElement=12,Ni("StructArrayLayout2i2i2i12",Sn);var wr=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X){var ue=this.length;return this.resize(ue+1),this.emplace(ue,_,R,F,z,X)},v.prototype.emplace=function(_,R,F,z,X,ue){var Ie=4*_,qe=8*_;return this.float32[Ie+0]=R,this.float32[Ie+1]=F,this.float32[Ie+2]=z,this.int16[qe+6]=X,this.int16[qe+7]=ue,_},v}(zo);wr.prototype.bytesPerElement=16,Ni("StructArrayLayout2f1f2i16",wr);var He=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var X=this.length;return this.resize(X+1),this.emplace(X,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,X){var ue=12*_,Ie=3*_;return this.uint8[ue+0]=R,this.uint8[ue+1]=F,this.float32[Ie+1]=z,this.float32[Ie+2]=X,_},v}(zo);He.prototype.bytesPerElement=12,Ni("StructArrayLayout2ub2f12",He);var qc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var X=3*_;return this.uint16[X+0]=R,this.uint16[X+1]=F,this.uint16[X+2]=z,_},v}(zo);qc.prototype.bytesPerElement=6,Ni("StructArrayLayout3ui6",qc);var er=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr,Dr,Mr,Yr){var on=this.length;return this.resize(on+1),this.emplace(on,_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr,Dr,Mr,Yr)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr,Dr,Mr,Yr,on){var vn=24*_,wn=12*_,Fn=48*_;return this.int16[vn+0]=R,this.int16[vn+1]=F,this.uint16[vn+2]=z,this.uint16[vn+3]=X,this.uint32[wn+2]=ue,this.uint32[wn+3]=Ie,this.uint32[wn+4]=qe,this.uint16[vn+10]=lt,this.uint16[vn+11]=yt,this.uint16[vn+12]=Lt,this.float32[wn+7]=Ut,this.float32[wn+8]=ur,this.uint8[Fn+36]=fr,this.uint8[Fn+37]=Dr,this.uint8[Fn+38]=Mr,this.uint32[wn+10]=Yr,this.int16[vn+22]=on,_},v}(zo);er.prototype.bytesPerElement=48,Ni("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",er);var sd=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr,Dr,Mr,Yr,on,vn,wn,Fn,ci,Si,Ji,ki,la,Ii,eo){var qi=this.length;return this.resize(qi+1),this.emplace(qi,_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr,Dr,Mr,Yr,on,vn,wn,Fn,ci,Si,Ji,ki,la,Ii,eo)},v.prototype.emplace=function(_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr,Dr,Mr,Yr,on,vn,wn,Fn,ci,Si,Ji,ki,la,Ii,eo,qi){var Gi=34*_,fo=17*_;return this.int16[Gi+0]=R,this.int16[Gi+1]=F,this.int16[Gi+2]=z,this.int16[Gi+3]=X,this.int16[Gi+4]=ue,this.int16[Gi+5]=Ie,this.int16[Gi+6]=qe,this.int16[Gi+7]=lt,this.uint16[Gi+8]=yt,this.uint16[Gi+9]=Lt,this.uint16[Gi+10]=Ut,this.uint16[Gi+11]=ur,this.uint16[Gi+12]=fr,this.uint16[Gi+13]=Dr,this.uint16[Gi+14]=Mr,this.uint16[Gi+15]=Yr,this.uint16[Gi+16]=on,this.uint16[Gi+17]=vn,this.uint16[Gi+18]=wn,this.uint16[Gi+19]=Fn,this.uint16[Gi+20]=ci,this.uint16[Gi+21]=Si,this.uint16[Gi+22]=Ji,this.uint32[fo+12]=ki,this.float32[fo+13]=la,this.float32[fo+14]=Ii,this.float32[fo+15]=eo,this.float32[fo+16]=qi,_},v}(zo);sd.prototype.bytesPerElement=68,Ni("StructArrayLayout8i15ui1ul4f68",sd);var Ys=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.float32[1*_+0]=R,_},v}(zo);Ys.prototype.bytesPerElement=4,Ni("StructArrayLayout1f4",Ys);var Ul=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var X=3*_;return this.int16[X+0]=R,this.int16[X+1]=F,this.int16[X+2]=z,_},v}(zo);Ul.prototype.bytesPerElement=6,Ni("StructArrayLayout3i6",Ul);var $h=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var X=4*_;return this.uint32[2*_+0]=R,this.uint16[X+2]=F,this.uint16[X+3]=z,_},v}(zo);$h.prototype.bytesPerElement=8,Ni("StructArrayLayout1ul2ui8",$h);var Cl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.uint16[z+0]=R,this.uint16[z+1]=F,_},v}(zo);Cl.prototype.bytesPerElement=4,Ni("StructArrayLayout2ui4",Cl);var Ap=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint16[1*_+0]=R,_},v}(zo);Ap.prototype.bytesPerElement=2,Ni("StructArrayLayout1ui2",Ap);var Mp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var X=this.length;return this.resize(X+1),this.emplace(X,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,X){var ue=4*_;return this.float32[ue+0]=R,this.float32[ue+1]=F,this.float32[ue+2]=z,this.float32[ue+3]=X,_},v}(zo);Mp.prototype.bytesPerElement=16,Ni("StructArrayLayout4f16",Mp);var b=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return _.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},_.x1.get=function(){return this._structArray.int16[this._pos2+2]},_.y1.get=function(){return this._structArray.int16[this._pos2+3]},_.x2.get=function(){return this._structArray.int16[this._pos2+4]},_.y2.get=function(){return this._structArray.int16[this._pos2+5]},_.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.anchorPoint.get=function(){return new Q(this.anchorPointX,this.anchorPointY)},Object.defineProperties(v.prototype,_),v}(dh);b.prototype.size=20;var A=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new b(this,_)},v}(jd);Ni("CollisionBoxArray",A);var C=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},_.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},_.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},_.segment.get=function(){return this._structArray.uint16[this._pos2+10]},_.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},_.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},_.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},_.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},_.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},_.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},_.placedOrientation.set=function(R){this._structArray.uint8[this._pos1+37]=R},_.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},_.hidden.set=function(R){this._structArray.uint8[this._pos1+38]=R},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+10]=R},_.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(v.prototype,_),v}(dh);C.prototype.size=48;var I=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new C(this,_)},v}(er);Ni("PlacedSymbolArray",I);var Z=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},_.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},_.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},_.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},_.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},_.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},_.key.get=function(){return this._structArray.uint16[this._pos2+8]},_.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},_.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},_.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},_.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},_.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},_.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},_.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},_.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},_.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},_.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},_.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},_.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},_.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+12]=R},_.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},_.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},_.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},_.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(v.prototype,_),v}(dh);Z.prototype.size=68;var ee=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new Z(this,_)},v}(sd);Ni("SymbolInstanceArray",ee);var ae=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getoffsetX=function(_){return this.float32[1*_+0]},v}(Ys);Ni("GlyphOffsetArray",ae);var Ae=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getx=function(_){return this.int16[3*_+0]},v.prototype.gety=function(_){return this.int16[3*_+1]},v.prototype.gettileUnitDistanceFromAnchor=function(_){return this.int16[3*_+2]},v}(Ul);Ni("SymbolLineVertexArray",Ae);var at=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return _.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(v.prototype,_),v}(dh);at.prototype.size=8;var bt=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new at(this,_)},v}($h);Ni("FeatureIndexArray",bt);var Vt=Xs([{name:"a_pos",components:2,type:"Int16"}],4).members,Wt=function(h){h===void 0&&(h=[]),this.segments=h};function $t(h,v){return 256*(h=J(Math.floor(h),0,255))+J(Math.floor(v),0,255)}Wt.prototype.prepareSegment=function(h,v,_,R){var F=this.segments[this.segments.length-1];return h>Wt.MAX_VERTEX_ARRAY_LENGTH&&Ve("Max vertices per segment is "+Wt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+h),(!F||F.vertexLength+h>Wt.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==R)&&(F={vertexOffset:v.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},R!==void 0&&(F.sortKey=R),this.segments.push(F)),F},Wt.prototype.get=function(){return this.segments},Wt.prototype.destroy=function(){for(var h=0,v=this.segments;h<v.length;h+=1){var _=v[h];for(var R in _.vaos)_.vaos[R].destroy()}},Wt.simpleSegment=function(h,v,_,R){return new Wt([{vertexOffset:h,primitiveOffset:v,vertexLength:_,primitiveLength:R,vaos:{},sortKey:0}])},Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ni("SegmentVector",Wt);var dr=Xs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),hr=W(function(h){h.exports=function(v,_){var R,F,z,X,ue,Ie,qe,lt;for(F=v.length-(R=3&v.length),z=_,ue=3432918353,Ie=461845907,lt=0;lt<F;)qe=255&v.charCodeAt(lt)|(255&v.charCodeAt(++lt))<<8|(255&v.charCodeAt(++lt))<<16|(255&v.charCodeAt(++lt))<<24,++lt,z=27492+(65535&(X=5*(65535&(z=(z^=qe=(65535&(qe=(qe=(65535&qe)*ue+(((qe>>>16)*ue&65535)<<16)&4294967295)<<15|qe>>>17))*Ie+(((qe>>>16)*Ie&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+(X>>>16)&65535)<<16);switch(qe=0,R){case 3:qe^=(255&v.charCodeAt(lt+2))<<16;case 2:qe^=(255&v.charCodeAt(lt+1))<<8;case 1:z^=qe=(65535&(qe=(qe=(65535&(qe^=255&v.charCodeAt(lt)))*ue+(((qe>>>16)*ue&65535)<<16)&4294967295)<<15|qe>>>17))*Ie+(((qe>>>16)*Ie&65535)<<16)&4294967295}return z^=v.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0}}),Rr=W(function(h){h.exports=function(v,_){for(var R,F=v.length,z=_^F,X=0;F>=4;)R=1540483477*(65535&(R=255&v.charCodeAt(X)|(255&v.charCodeAt(++X))<<8|(255&v.charCodeAt(++X))<<16|(255&v.charCodeAt(++X))<<24))+((1540483477*(R>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(R=1540483477*(65535&(R^=R>>>24))+((1540483477*(R>>>16)&65535)<<16)),F-=4,++X;switch(F){case 3:z^=(255&v.charCodeAt(X+2))<<16;case 2:z^=(255&v.charCodeAt(X+1))<<8;case 1:z=1540483477*(65535&(z^=255&v.charCodeAt(X)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0}}),lr=hr,Ir=Rr;lr.murmur3=hr,lr.murmur2=Ir;var Hr=function(){this.ids=[],this.positions=[],this.indexed=!1};Hr.prototype.add=function(h,v,_,R){this.ids.push(_n(h)),this.positions.push(v,_,R)},Hr.prototype.getPositions=function(h){for(var v=_n(h),_=0,R=this.ids.length-1;_<R;){var F=_+R>>1;this.ids[F]>=v?R=F:_=F+1}for(var z=[];this.ids[_]===v;)z.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return z},Hr.serialize=function(h,v){var _=new Float64Array(h.ids),R=new Uint32Array(h.positions);return function F(z,X,ue,Ie){for(;ue<Ie;){for(var qe=z[ue+Ie>>1],lt=ue-1,yt=Ie+1;;){do lt++;while(z[lt]<qe);do yt--;while(z[yt]>qe);if(lt>=yt)break;pn(z,lt,yt),pn(X,3*lt,3*yt),pn(X,3*lt+1,3*yt+1),pn(X,3*lt+2,3*yt+2)}yt-ue<Ie-yt?(F(z,X,ue,yt),ue=yt+1):(F(z,X,yt+1,Ie),Ie=yt)}}(_,R,0,_.length-1),v&&v.push(_.buffer,R.buffer),{ids:_,positions:R}},Hr.deserialize=function(h){var v=new Hr;return v.ids=h.ids,v.positions=h.positions,v.indexed=!0,v};var en=Math.pow(2,53)-1;function _n(h){var v=+h;return!isNaN(v)&&v<=en?v:lr(String(h))}function pn(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}Ni("FeaturePositionMap",Hr);var An=function(h,v){this.gl=h.gl,this.location=v},Ln=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))},v}(An),pi=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1f(this.location,_))},v}(An),oi=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))},v}(An),Pi=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))},v}(An),ta=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]&&_[3]===this.current[3]||(this.current=_,this.gl.uniform4f(this.location,_[0],_[1],_[2],_[3]))},v}(An),sa=function(h){function v(_,R){h.call(this,_,R),this.current=ea.transparent}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_.r===this.current.r&&_.g===this.current.g&&_.b===this.current.b&&_.a===this.current.a||(this.current=_,this.gl.uniform4f(this.location,_.r,_.g,_.b,_.a))},v}(An),Ki=new Float32Array(16),_o=function(h){function v(_,R){h.call(this,_,R),this.current=Ki}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(var R=1;R<16;R++)if(_[R]!==this.current[R]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}},v}(An);function Bi(h){return[$t(255*h.r,255*h.g),$t(255*h.b,255*h.a)]}var Ia=function(h,v,_){this.value=h,this.uniformNames=v.map(function(R){return"u_"+R}),this.type=_};Ia.prototype.setUniform=function(h,v,_){h.set(_.constantOr(this.value))},Ia.prototype.getBinding=function(h,v,_){return this.type==="color"?new sa(h,v):new pi(h,v)};var La=function(h,v){this.uniformNames=v.map(function(_){return"u_"+_}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};La.prototype.setConstantPatternPositions=function(h,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=h.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=h.tlbr},La.prototype.setUniform=function(h,v,_,R){var F=R==="u_pattern_to"?this.patternTo:R==="u_pattern_from"?this.patternFrom:R==="u_pixel_ratio_to"?this.pixelRatioTo:R==="u_pixel_ratio_from"?this.pixelRatioFrom:null;F&&h.set(F)},La.prototype.getBinding=function(h,v,_){return _.substr(0,9)==="u_pattern"?new ta(h,v):new pi(h,v)};var Aa=function(h,v,_,R){this.expression=h,this.type=_,this.maxValue=0,this.paintVertexAttributes=v.map(function(F){return{name:"a_"+F,type:"Float32",components:_==="color"?2:1,offset:0}}),this.paintVertexArray=new R};Aa.prototype.populatePaintArray=function(h,v,_,R,F){var z=this.paintVertexArray.length,X=this.expression.evaluate(new ja(0),v,{},R,[],F);this.paintVertexArray.resize(h),this._setPaintValue(z,h,X)},Aa.prototype.updatePaintArray=function(h,v,_,R){var F=this.expression.evaluate({zoom:0},_,R);this._setPaintValue(h,v,F)},Aa.prototype._setPaintValue=function(h,v,_){if(this.type==="color")for(var R=Bi(_),F=h;F<v;F++)this.paintVertexArray.emplace(F,R[0],R[1]);else{for(var z=h;z<v;z++)this.paintVertexArray.emplace(z,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}},Aa.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Aa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var fa=function(h,v,_,R,F,z){this.expression=h,this.uniformNames=v.map(function(X){return"u_"+X+"_t"}),this.type=_,this.useIntegerZoom=R,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=v.map(function(X){return{name:"a_"+X,type:"Float32",components:_==="color"?4:2,offset:0}}),this.paintVertexArray=new z};fa.prototype.populatePaintArray=function(h,v,_,R,F){var z=this.expression.evaluate(new ja(this.zoom),v,{},R,[],F),X=this.expression.evaluate(new ja(this.zoom+1),v,{},R,[],F),ue=this.paintVertexArray.length;this.paintVertexArray.resize(h),this._setPaintValue(ue,h,z,X)},fa.prototype.updatePaintArray=function(h,v,_,R){var F=this.expression.evaluate({zoom:this.zoom},_,R),z=this.expression.evaluate({zoom:this.zoom+1},_,R);this._setPaintValue(h,v,F,z)},fa.prototype._setPaintValue=function(h,v,_,R){if(this.type==="color")for(var F=Bi(_),z=Bi(R),X=h;X<v;X++)this.paintVertexArray.emplace(X,F[0],F[1],z[0],z[1]);else{for(var ue=h;ue<v;ue++)this.paintVertexArray.emplace(ue,_,R);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(R))}},fa.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},fa.prototype.setUniform=function(h,v){var _=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,R=J(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);h.set(R)},fa.prototype.getBinding=function(h,v,_){return new pi(h,v)};var Ma=function(h,v,_,R,F,z){this.expression=h,this.type=v,this.useIntegerZoom=_,this.zoom=R,this.layerId=z,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F};Ma.prototype.populatePaintArray=function(h,v,_){var R=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(h),this.zoomOutPaintVertexArray.resize(h),this._setPaintValues(R,h,v.patterns&&v.patterns[this.layerId],_)},Ma.prototype.updatePaintArray=function(h,v,_,R,F){this._setPaintValues(h,v,_.patterns&&_.patterns[this.layerId],F)},Ma.prototype._setPaintValues=function(h,v,_,R){if(R&&_){var F=R[_.min],z=R[_.mid],X=R[_.max];if(F&&z&&X)for(var ue=h;ue<v;ue++)this.zoomInPaintVertexArray.emplace(ue,z.tl[0],z.tl[1],z.br[0],z.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],z.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(ue,z.tl[0],z.tl[1],z.br[0],z.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],z.pixelRatio,X.pixelRatio)}},Ma.prototype.upload=function(h){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=h.createVertexBuffer(this.zoomInPaintVertexArray,dr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=h.createVertexBuffer(this.zoomOutPaintVertexArray,dr.members,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ea=function(h,v,_){this.binders={},this._buffers=[];var R=[];for(var F in h.paint._values)if(_(F)){var z=h.paint.get(F);if(z instanceof Tu&&Ps(z.property.specification)){var X=Au(F,h.type),ue=z.value,Ie=z.property.specification.type,qe=z.property.useIntegerZoom,lt=z.property.specification["property-type"],yt=lt==="cross-faded"||lt==="cross-faded-data-driven";if(ue.kind==="constant")this.binders[F]=yt?new La(ue.value,X):new Ia(ue.value,X,Ie),R.push("/u_"+F);else if(ue.kind==="source"||yt){var Lt=Ls(F,Ie,"source");this.binders[F]=yt?new Ma(ue,Ie,qe,v,Lt,h.id):new Aa(ue,X,Ie,Lt),R.push("/a_"+F)}else{var Ut=Ls(F,Ie,"composite");this.binders[F]=new fa(ue,X,Ie,qe,v,Ut),R.push("/z_"+F)}}}this.cacheKey=R.sort().join("")};Ea.prototype.getMaxValue=function(h){var v=this.binders[h];return v instanceof Aa||v instanceof fa?v.maxValue:0},Ea.prototype.populatePaintArrays=function(h,v,_,R,F){for(var z in this.binders){var X=this.binders[z];(X instanceof Aa||X instanceof fa||X instanceof Ma)&&X.populatePaintArray(h,v,_,R,F)}},Ea.prototype.setConstantPatternPositions=function(h,v){for(var _ in this.binders){var R=this.binders[_];R instanceof La&&R.setConstantPatternPositions(h,v)}},Ea.prototype.updatePaintArrays=function(h,v,_,R,F){var z=!1;for(var X in h)for(var ue=0,Ie=v.getPositions(X);ue<Ie.length;ue+=1){var qe=Ie[ue],lt=_.feature(qe.index);for(var yt in this.binders){var Lt=this.binders[yt];if((Lt instanceof Aa||Lt instanceof fa||Lt instanceof Ma)&&Lt.expression.isStateDependent===!0){var Ut=R.paint.get(yt);Lt.expression=Ut.value,Lt.updatePaintArray(qe.start,qe.end,lt,h[X],F),z=!0}}}return z},Ea.prototype.defines=function(){var h=[];for(var v in this.binders){var _=this.binders[v];(_ instanceof Ia||_ instanceof La)&&h.push.apply(h,_.uniformNames.map(function(R){return"#define HAS_UNIFORM_"+R}))}return h},Ea.prototype.getBinderAttributes=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Aa||_ instanceof fa)for(var R=0;R<_.paintVertexAttributes.length;R++)h.push(_.paintVertexAttributes[R].name);else if(_ instanceof Ma)for(var F=0;F<dr.members.length;F++)h.push(dr.members[F].name)}return h},Ea.prototype.getBinderUniforms=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Ia||_ instanceof La||_ instanceof fa)for(var R=0,F=_.uniformNames;R<F.length;R+=1)h.push(F[R])}return h},Ea.prototype.getPaintVertexBuffers=function(){return this._buffers},Ea.prototype.getUniforms=function(h,v){var _=[];for(var R in this.binders){var F=this.binders[R];if(F instanceof Ia||F instanceof La||F instanceof fa)for(var z=0,X=F.uniformNames;z<X.length;z+=1){var ue=X[z];if(v[ue]){var Ie=F.getBinding(h,v[ue],ue);_.push({name:ue,property:R,binding:Ie})}}}return _},Ea.prototype.setUniforms=function(h,v,_,R){for(var F=0,z=v;F<z.length;F+=1){var X=z[F],ue=X.name,Ie=X.property;this.binders[Ie].setUniform(X.binding,R,_.get(Ie),ue)}},Ea.prototype.updatePaintBuffers=function(h){for(var v in this._buffers=[],this.binders){var _=this.binders[v];if(h&&_ instanceof Ma){var R=h.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;R&&this._buffers.push(R)}else(_ instanceof Aa||_ instanceof fa)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}},Ea.prototype.upload=function(h){for(var v in this.binders){var _=this.binders[v];(_ instanceof Aa||_ instanceof fa||_ instanceof Ma)&&_.upload(h)}this.updatePaintBuffers()},Ea.prototype.destroy=function(){for(var h in this.binders){var v=this.binders[h];(v instanceof Aa||v instanceof fa||v instanceof Ma)&&v.destroy()}};var ha=function(h,v,_){_===void 0&&(_=function(){return!0}),this.programConfigurations={};for(var R=0,F=h;R<F.length;R+=1){var z=F[R];this.programConfigurations[z.id]=new Ea(z,v,_)}this.needsUpload=!1,this._featureMap=new Hr,this._bufferOffset=0};function Au(h,v){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(v+"-","").replace(/-/g,"_")]}function Ls(h,v,_){var R={color:{source:gh,composite:Mp},number:{source:Ys,composite:gh}},F=function(z){return{"line-pattern":{source:Kc,composite:Kc},"fill-pattern":{source:Kc,composite:Kc},"fill-extrusion-pattern":{source:Kc,composite:Kc}}[z]}(h);return F&&F[_]||R[v][_]}ha.prototype.populatePaintArrays=function(h,v,_,R,F,z){for(var X in this.programConfigurations)this.programConfigurations[X].populatePaintArrays(h,v,R,F,z);v.id!==void 0&&this._featureMap.add(v.id,_,this._bufferOffset,h),this._bufferOffset=h,this.needsUpload=!0},ha.prototype.updatePaintArrays=function(h,v,_,R){for(var F=0,z=_;F<z.length;F+=1){var X=z[F];this.needsUpload=this.programConfigurations[X.id].updatePaintArrays(h,this._featureMap,v,X,R)||this.needsUpload}},ha.prototype.get=function(h){return this.programConfigurations[h]},ha.prototype.upload=function(h){if(this.needsUpload){for(var v in this.programConfigurations)this.programConfigurations[v].upload(h);this.needsUpload=!1}},ha.prototype.destroy=function(){for(var h in this.programConfigurations)this.programConfigurations[h].destroy()},Ni("ConstantBinder",Ia),Ni("CrossFadedConstantBinder",La),Ni("SourceExpressionBinder",Aa),Ni("CrossFadedCompositeBinder",Ma),Ni("CompositeExpressionBinder",fa),Ni("ProgramConfiguration",Ea,{omit:["_buffers"]}),Ni("ProgramConfigurationSet",ha);var $u=Math.pow(2,14)-1,Mu=-$u-1;function es(h){for(var v=8192/h.extent,_=h.loadGeometry(),R=0;R<_.length;R++)for(var F=_[R],z=0;z<F.length;z++){var X=F[z],ue=Math.round(X.x*v),Ie=Math.round(X.y*v);X.x=J(ue,Mu,$u),X.y=J(Ie,Mu,$u),(ue<X.x||ue>X.x+1||Ie<X.y||Ie>X.y+1)&&Ve("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return _}function ys(h,v){return{type:h.type,id:h.id,properties:h.properties,geometry:v?es(h):[]}}function Ru(h,v,_,R,F){h.emplaceBack(2*v+(R+1)/2,2*_+(F+1)/2)}var gu=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new vh,this.indexArray=new qc,this.segments=new Wt,this.programConfigurations=new ha(h.layers,h.zoom),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Qc(h,v){for(var _=0;_<h.length;_++)if(fc(v,h[_]))return!0;for(var R=0;R<v.length;R++)if(fc(h,v[R]))return!0;return!!Nf(h,v)}function nl(h,v,_){return!!fc(h,v)||!!Jc(v,h,_)}function lc(h,v){if(h.length===1)return cc(v,h[0]);for(var _=0;_<v.length;_++)for(var R=v[_],F=0;F<R.length;F++)if(fc(h,R[F]))return!0;for(var z=0;z<h.length;z++)if(cc(v,h[z]))return!0;for(var X=0;X<v.length;X++)if(Nf(h,v[X]))return!0;return!1}function hl(h,v,_){if(h.length>1){if(Nf(h,v))return!0;for(var R=0;R<v.length;R++)if(Jc(v[R],h,_))return!0}for(var F=0;F<h.length;F++)if(Jc(h[F],v,_))return!0;return!1}function Nf(h,v){if(h.length===0||v.length===0)return!1;for(var _=0;_<h.length-1;_++)for(var R=h[_],F=h[_+1],z=0;z<v.length-1;z++)if(vf(R,F,v[z],v[z+1]))return!0;return!1}function vf(h,v,_,R){return je(h,_,R)!==je(v,_,R)&&je(h,v,_)!==je(h,v,R)}function Jc(h,v,_){var R=_*_;if(v.length===1)return h.distSqr(v[0])<R;for(var F=1;F<v.length;F++)if(gf(h,v[F-1],v[F])<R)return!0;return!1}function gf(h,v,_){var R=v.distSqr(_);if(R===0)return h.distSqr(v);var F=((h.x-v.x)*(_.x-v.x)+(h.y-v.y)*(_.y-v.y))/R;return h.distSqr(F<0?v:F>1?_:_.sub(v)._mult(F)._add(v))}function cc(h,v){for(var _,R,F,z=!1,X=0;X<h.length;X++)for(var ue=0,Ie=(_=h[X]).length-1;ue<_.length;Ie=ue++)(R=_[ue]).y>v.y!=(F=_[Ie]).y>v.y&&v.x<(F.x-R.x)*(v.y-R.y)/(F.y-R.y)+R.x&&(z=!z);return z}function fc(h,v){for(var _=!1,R=0,F=h.length-1;R<h.length;F=R++){var z=h[R],X=h[F];z.y>v.y!=X.y>v.y&&v.x<(X.x-z.x)*(v.y-z.y)/(X.y-z.y)+z.x&&(_=!_)}return _}function mf(h,v,_){var R=_[0],F=_[2];if(h.x<R.x&&v.x<R.x||h.x>F.x&&v.x>F.x||h.y<R.y&&v.y<R.y||h.y>F.y&&v.y>F.y)return!1;var z=je(h,v,_[0]);return z!==je(h,v,_[1])||z!==je(h,v,_[2])||z!==je(h,v,_[3])}function Lu(h,v,_){var R=v.paint.get(h).value;return R.kind==="constant"?R.value:_.programConfigurations.get(v.id).getMaxValue(h)}function Ts(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function ou(h,v,_,R,F){if(!v[0]&&!v[1])return h;var z=Q.convert(v)._mult(F);_==="viewport"&&z._rotate(-R);for(var X=[],ue=0;ue<h.length;ue++)X.push(h[ue].sub(z));return X}gu.prototype.populate=function(h,v,_){var R=this.layers[0],F=[],z=null;R.type==="circle"&&(z=R.layout.get("circle-sort-key"));for(var X=0,ue=h;X<ue.length;X+=1){var Ie=ue[X],qe=Ie.feature,lt=Ie.id,yt=Ie.index,Lt=Ie.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,ur=ys(qe,Ut);if(this.layers[0]._featureFilter.filter(new ja(this.zoom),ur,_)){var fr=z?z.evaluate(ur,{},_):void 0,Dr={id:lt,properties:qe.properties,type:qe.type,sourceLayerIndex:Lt,index:yt,geometry:Ut?ur.geometry:es(qe),patterns:{},sortKey:fr};F.push(Dr)}}z&&F.sort(function(Si,Ji){return Si.sortKey-Ji.sortKey});for(var Mr=0,Yr=F;Mr<Yr.length;Mr+=1){var on=Yr[Mr],vn=on.geometry,wn=on.index,Fn=on.sourceLayerIndex,ci=h[wn].feature;this.addFeature(on,vn,wn,_),v.featureIndex.insert(ci,vn,wn,Fn,this.index)}},gu.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},gu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},gu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gu.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Vt),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},gu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},gu.prototype.addFeature=function(h,v,_,R){for(var F=0,z=v;F<z.length;F+=1)for(var X=0,ue=z[F];X<ue.length;X+=1){var Ie=ue[X],qe=Ie.x,lt=Ie.y;if(!(qe<0||qe>=8192||lt<0||lt>=8192)){var yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,h.sortKey),Lt=yt.vertexLength;Ru(this.layoutVertexArray,qe,lt,-1,-1),Ru(this.layoutVertexArray,qe,lt,1,-1),Ru(this.layoutVertexArray,qe,lt,1,1),Ru(this.layoutVertexArray,qe,lt,-1,1),this.indexArray.emplaceBack(Lt,Lt+1,Lt+2),this.indexArray.emplaceBack(Lt,Lt+3,Lt+2),yt.vertexLength+=4,yt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,{},R)},Ni("CircleBucket",gu,{omit:["layers"]});var Tl=new Cs({"circle-sort-key":new wi(At.layout_circle["circle-sort-key"])}),ql={paint:new Cs({"circle-radius":new wi(At.paint_circle["circle-radius"]),"circle-color":new wi(At.paint_circle["circle-color"]),"circle-blur":new wi(At.paint_circle["circle-blur"]),"circle-opacity":new wi(At.paint_circle["circle-opacity"]),"circle-translate":new Qi(At.paint_circle["circle-translate"]),"circle-translate-anchor":new Qi(At.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qi(At.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qi(At.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wi(At.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wi(At.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wi(At.paint_circle["circle-stroke-opacity"])}),layout:Tl},go=typeof Float32Array!="undefined"?Float32Array:Array;function Xu(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Ks(h,v,_){var R=v[0],F=v[1],z=v[2],X=v[3],ue=v[4],Ie=v[5],qe=v[6],lt=v[7],yt=v[8],Lt=v[9],Ut=v[10],ur=v[11],fr=v[12],Dr=v[13],Mr=v[14],Yr=v[15],on=_[0],vn=_[1],wn=_[2],Fn=_[3];return h[0]=on*R+vn*ue+wn*yt+Fn*fr,h[1]=on*F+vn*Ie+wn*Lt+Fn*Dr,h[2]=on*z+vn*qe+wn*Ut+Fn*Mr,h[3]=on*X+vn*lt+wn*ur+Fn*Yr,h[4]=(on=_[4])*R+(vn=_[5])*ue+(wn=_[6])*yt+(Fn=_[7])*fr,h[5]=on*F+vn*Ie+wn*Lt+Fn*Dr,h[6]=on*z+vn*qe+wn*Ut+Fn*Mr,h[7]=on*X+vn*lt+wn*ur+Fn*Yr,h[8]=(on=_[8])*R+(vn=_[9])*ue+(wn=_[10])*yt+(Fn=_[11])*fr,h[9]=on*F+vn*Ie+wn*Lt+Fn*Dr,h[10]=on*z+vn*qe+wn*Ut+Fn*Mr,h[11]=on*X+vn*lt+wn*ur+Fn*Yr,h[12]=(on=_[12])*R+(vn=_[13])*ue+(wn=_[14])*yt+(Fn=_[15])*fr,h[13]=on*F+vn*Ie+wn*Lt+Fn*Dr,h[14]=on*z+vn*qe+wn*Ut+Fn*Mr,h[15]=on*X+vn*lt+wn*ur+Fn*Yr,h}Math.hypot||(Math.hypot=function(){for(var h=arguments,v=0,_=arguments.length;_--;)v+=h[_]*h[_];return Math.sqrt(v)});var yf,ud=Ks;function _f(h,v,_){var R=v[0],F=v[1],z=v[2],X=v[3];return h[0]=_[0]*R+_[4]*F+_[8]*z+_[12]*X,h[1]=_[1]*R+_[5]*F+_[9]*z+_[13]*X,h[2]=_[2]*R+_[6]*F+_[10]*z+_[14]*X,h[3]=_[3]*R+_[7]*F+_[11]*z+_[15]*X,h}yf=new go(3),go!=Float32Array&&(yf[0]=0,yf[1]=0,yf[2]=0),function(){var h=new go(4);go!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0)}();var Fv=(function(){var h=new go(2);go!=Float32Array&&(h[0]=0,h[1]=0)}(),function(h){function v(_){h.call(this,_,ql)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new gu(_)},v.prototype.queryRadius=function(_){var R=_;return Lu("circle-radius",this,R)+Lu("circle-stroke-width",this,R)+Ts(this.paint.get("circle-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,X,ue,Ie,qe){for(var lt=ou(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ue.angle,Ie),yt=this.paint.get("circle-radius").evaluate(R,F)+this.paint.get("circle-stroke-width").evaluate(R,F),Lt=this.paint.get("circle-pitch-alignment")==="map",Ut=Lt?lt:function(ci,Si){return ci.map(function(Ji){return Al(Ji,Si)})}(lt,qe),ur=Lt?yt*Ie:yt,fr=0,Dr=z;fr<Dr.length;fr+=1)for(var Mr=0,Yr=Dr[fr];Mr<Yr.length;Mr+=1){var on=Yr[Mr],vn=Lt?on:Al(on,qe),wn=ur,Fn=_f([],[on.x,on.y,0,1],qe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?wn*=Fn[3]/ue.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(wn*=ue.cameraToCenterDistance/Fn[3]),nl(Ut,vn,wn))return!0}return!1},v}(sc));function Al(h,v){var _=_f([],[h.x,h.y,0,1],v);return new Q(_[0]/_[3],_[1]/_[3])}var Zl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(gu);function Vl(h,v,_,R){var F=v.width,z=v.height;if(R){if(R instanceof Uint8ClampedArray)R=new Uint8Array(R.buffer);else if(R.length!==F*z*_)throw new RangeError("mismatched image size")}else R=new Uint8Array(F*z*_);return h.width=F,h.height=z,h.data=R,h}function zf(h,v,_){var R=v.width,F=v.height;if(R!==h.width||F!==h.height){var z=Vl({},{width:R,height:F},_);Rp(h,z,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,R),height:Math.min(h.height,F)},_),h.width=R,h.height=F,h.data=z.data}}function Rp(h,v,_,R,F,z){if(F.width===0||F.height===0)return v;if(F.width>h.width||F.height>h.height||_.x>h.width-F.width||_.y>h.height-F.height)throw new RangeError("out of range source coordinates for image copy");if(F.width>v.width||F.height>v.height||R.x>v.width-F.width||R.y>v.height-F.height)throw new RangeError("out of range destination coordinates for image copy");for(var X=h.data,ue=v.data,Ie=0;Ie<F.height;Ie++)for(var qe=((_.y+Ie)*h.width+_.x)*z,lt=((R.y+Ie)*v.width+R.x)*z,yt=0;yt<F.width*z;yt++)ue[lt+yt]=X[qe+yt];return v}Ni("HeatmapBucket",Zl,{omit:["layers"]});var Uf=function(h,v){Vl(this,h,1,v)};Uf.prototype.resize=function(h){zf(this,h,1)},Uf.prototype.clone=function(){return new Uf({width:this.width,height:this.height},new Uint8Array(this.data))},Uf.copy=function(h,v,_,R,F){Rp(h,v,_,R,F,1)};var Ml=function(h,v){Vl(this,h,4,v)};Ml.prototype.resize=function(h){zf(this,h,4)},Ml.prototype.replace=function(h,v){v?this.data.set(h):this.data=h instanceof Uint8ClampedArray?new Uint8Array(h.buffer):h},Ml.prototype.clone=function(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))},Ml.copy=function(h,v,_,R,F){Rp(h,v,_,R,F,4)},Ni("AlphaImage",Uf),Ni("RGBAImage",Ml);var Bv={paint:new Cs({"heatmap-radius":new wi(At.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wi(At.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qi(At.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gu(At.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qi(At.paint_heatmap["heatmap-opacity"])})};function vg(h){var v={},_=h.resolution||256,R=h.clips?h.clips.length:1,F=h.image||new Ml({width:_,height:R}),z=function(ur,fr,Dr){v[h.evaluationKey]=Dr;var Mr=h.expression.evaluate(v);F.data[ur+fr+0]=Math.floor(255*Mr.r/Mr.a),F.data[ur+fr+1]=Math.floor(255*Mr.g/Mr.a),F.data[ur+fr+2]=Math.floor(255*Mr.b/Mr.a),F.data[ur+fr+3]=Math.floor(255*Mr.a)};if(h.clips)for(var X=0,ue=0;X<R;++X,ue+=4*_)for(var Ie=0,qe=0;Ie<_;Ie++,qe+=4){var lt=Ie/(_-1),yt=h.clips[X];z(ue,qe,yt.start*(1-lt)+yt.end*lt)}else for(var Lt=0,Ut=0;Lt<_;Lt++,Ut+=4)z(0,Ut,Lt/(_-1));return F}var hc=function(h){function v(_){h.call(this,_,Bv),this._updateColorRamp()}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Zl(_)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="heatmap-color"&&this._updateColorRamp()},v.prototype._updateColorRamp=function(){this.colorRamp=vg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},v.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},v}(sc),C0={paint:new Cs({"hillshade-illumination-direction":new Qi(At.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qi(At.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qi(At.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qi(At.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qi(At.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qi(At.paint_hillshade["hillshade-accent-color"])})},T0=function(h){function v(_){h.call(this,_,C0)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},v}(sc),A0=Xs([{name:"a_pos",components:2,type:"Int16"}],4).members,Nv=Wd,zv=Wd;function Wd(h,v,_){_=_||2;var R,F,z,X,ue,Ie,qe,lt=v&&v.length,yt=lt?v[0]*_:h.length,Lt=M0(h,0,yt,_,!0),Ut=[];if(!Lt||Lt.next===Lt.prev)return Ut;if(lt&&(Lt=function(fr,Dr,Mr,Yr){var on,vn,wn,Fn=[];for(on=0,vn=Dr.length;on<vn;on++)(wn=M0(fr,Dr[on]*Yr,on<vn-1?Dr[on+1]*Yr:fr.length,Yr,!1))===wn.next&&(wn.steiner=!0),Fn.push(cd(wn));for(Fn.sort(R0),on=0;on<Fn.length;on++)gg(Fn[on],Mr),Mr=Xh(Mr,Mr.next);return Mr}(h,v,Lt,_)),h.length>80*_){R=z=h[0],F=X=h[1];for(var ur=_;ur<yt;ur+=_)(ue=h[ur])<R&&(R=ue),(Ie=h[ur+1])<F&&(F=Ie),ue>z&&(z=ue),Ie>X&&(X=Ie);qe=(qe=Math.max(z-R,X-F))!==0?1/qe:0}return ld(Lt,Ut,_,R,F,qe),Ut}function M0(h,v,_,R,F){var z,X;if(F===il(h,v,_,R)>0)for(z=v;z<_;z+=R)X=Pc(z,h[z],h[z+1],X);else for(z=_-R;z>=v;z-=R)X=Pc(z,h[z],h[z+1],X);return X&&fd(X,X.next)&&(pc(X),X=X.next),X}function Xh(h,v){if(!h)return h;v||(v=h);var _,R=h;do if(_=!1,R.steiner||!fd(R,R.next)&&_s(R.prev,R,R.next)!==0)R=R.next;else{if(pc(R),(R=v=R.prev)===R.next)break;_=!0}while(_||R!==v);return v}function ld(h,v,_,R,F,z,X){if(h){!X&&z&&function(lt,yt,Lt,Ut){var ur=lt;do ur.z===null&&(ur.z=Gd(ur.x,ur.y,yt,Lt,Ut)),ur.prevZ=ur.prev,ur.nextZ=ur.next,ur=ur.next;while(ur!==lt);ur.prevZ.nextZ=null,ur.prevZ=null,function(fr){var Dr,Mr,Yr,on,vn,wn,Fn,ci,Si=1;do{for(Mr=fr,fr=null,vn=null,wn=0;Mr;){for(wn++,Yr=Mr,Fn=0,Dr=0;Dr<Si&&(Fn++,Yr=Yr.nextZ);Dr++);for(ci=Si;Fn>0||ci>0&&Yr;)Fn!==0&&(ci===0||!Yr||Mr.z<=Yr.z)?(on=Mr,Mr=Mr.nextZ,Fn--):(on=Yr,Yr=Yr.nextZ,ci--),vn?vn.nextZ=on:fr=on,on.prevZ=vn,vn=on;Mr=Yr}vn.nextZ=null,Si*=2}while(wn>1)}(ur)}(h,R,F,z);for(var ue,Ie,qe=h;h.prev!==h.next;)if(ue=h.prev,Ie=h.next,z?Yh(h,R,F,z):fm(h))v.push(ue.i/_),v.push(h.i/_),v.push(Ie.i/_),pc(h),h=Ie.next,qe=Ie.next;else if((h=Ie)===qe){X?X===1?ld(h=t_(Xh(h),v,_),v,_,R,F,z,2):X===2&&hm(h,v,_,R,F,z):ld(Xh(h),v,_,R,F,z,1);break}}}function fm(h){var v=h.prev,_=h,R=h.next;if(_s(v,_,R)>=0)return!1;for(var F=h.next.next;F!==h.prev;){if(mh(v.x,v.y,_.x,_.y,R.x,R.y,F.x,F.y)&&_s(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function Yh(h,v,_,R){var F=h.prev,z=h,X=h.next;if(_s(F,z,X)>=0)return!1;for(var ue=F.x>z.x?F.x>X.x?F.x:X.x:z.x>X.x?z.x:X.x,Ie=F.y>z.y?F.y>X.y?F.y:X.y:z.y>X.y?z.y:X.y,qe=Gd(F.x<z.x?F.x<X.x?F.x:X.x:z.x<X.x?z.x:X.x,F.y<z.y?F.y<X.y?F.y:X.y:z.y<X.y?z.y:X.y,v,_,R),lt=Gd(ue,Ie,v,_,R),yt=h.prevZ,Lt=h.nextZ;yt&&yt.z>=qe&&Lt&&Lt.z<=lt;){if(yt!==h.prev&&yt!==h.next&&mh(F.x,F.y,z.x,z.y,X.x,X.y,yt.x,yt.y)&&_s(yt.prev,yt,yt.next)>=0||(yt=yt.prevZ,Lt!==h.prev&&Lt!==h.next&&mh(F.x,F.y,z.x,z.y,X.x,X.y,Lt.x,Lt.y)&&_s(Lt.prev,Lt,Lt.next)>=0))return!1;Lt=Lt.nextZ}for(;yt&&yt.z>=qe;){if(yt!==h.prev&&yt!==h.next&&mh(F.x,F.y,z.x,z.y,X.x,X.y,yt.x,yt.y)&&_s(yt.prev,yt,yt.next)>=0)return!1;yt=yt.prevZ}for(;Lt&&Lt.z<=lt;){if(Lt!==h.prev&&Lt!==h.next&&mh(F.x,F.y,z.x,z.y,X.x,X.y,Lt.x,Lt.y)&&_s(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.nextZ}return!0}function t_(h,v,_){var R=h;do{var F=R.prev,z=R.next.next;!fd(F,z)&&Rc(F,R,R.next,z)&&Pp(F,z)&&Pp(z,F)&&(v.push(F.i/_),v.push(R.i/_),v.push(z.i/_),pc(R),pc(R.next),R=h=z),R=R.next}while(R!==h);return Xh(R)}function hm(h,v,_,R,F,z){var X=h;do{for(var ue=X.next.next;ue!==X.prev;){if(X.i!==ue.i&&Ip(X,ue)){var Ie=qs(X,ue);return X=Xh(X,X.next),Ie=Xh(Ie,Ie.next),ld(X,v,_,R,F,z),void ld(Ie,v,_,R,F,z)}ue=ue.next}X=X.next}while(X!==h)}function R0(h,v){return h.x-v.x}function gg(h,v){if(v=function(R,F){var z,X=F,ue=R.x,Ie=R.y,qe=-1/0;do{if(Ie<=X.y&&Ie>=X.next.y&&X.next.y!==X.y){var lt=X.x+(Ie-X.y)*(X.next.x-X.x)/(X.next.y-X.y);if(lt<=ue&&lt>qe){if(qe=lt,lt===ue){if(Ie===X.y)return X;if(Ie===X.next.y)return X.next}z=X.x<X.next.x?X:X.next}}X=X.next}while(X!==F);if(!z)return null;if(ue===qe)return z;var yt,Lt=z,Ut=z.x,ur=z.y,fr=1/0;X=z;do ue>=X.x&&X.x>=Ut&&ue!==X.x&&mh(Ie<ur?ue:qe,Ie,Ut,ur,Ie<ur?qe:ue,Ie,X.x,X.y)&&(yt=Math.abs(Ie-X.y)/(ue-X.x),Pp(X,R)&&(yt<fr||yt===fr&&(X.x>z.x||X.x===z.x&&mg(z,X)))&&(z=X,fr=yt)),X=X.next;while(X!==Lt);return z}(h,v)){var _=qs(v,h);Xh(v,v.next),Xh(_,_.next)}}function mg(h,v){return _s(h.prev,h,v.prev)<0&&_s(v.next,h,h.next)<0}function Gd(h,v,_,R,F){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-_)*F)|h<<8))|h<<4))|h<<2))|h<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-R)*F)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function cd(h){var v=h,_=h;do(v.x<_.x||v.x===_.x&&v.y<_.y)&&(_=v),v=v.next;while(v!==h);return _}function mh(h,v,_,R,F,z,X,ue){return(F-X)*(v-ue)-(h-X)*(z-ue)>=0&&(h-X)*(R-ue)-(_-X)*(v-ue)>=0&&(_-X)*(z-ue)-(F-X)*(R-ue)>=0}function Ip(h,v){return h.next.i!==v.i&&h.prev.i!==v.i&&!function(_,R){var F=_;do{if(F.i!==_.i&&F.next.i!==_.i&&F.i!==R.i&&F.next.i!==R.i&&Rc(F,F.next,_,R))return!0;F=F.next}while(F!==_);return!1}(h,v)&&(Pp(h,v)&&Pp(v,h)&&function(_,R){var F=_,z=!1,X=(_.x+R.x)/2,ue=(_.y+R.y)/2;do F.y>ue!=F.next.y>ue&&F.next.y!==F.y&&X<(F.next.x-F.x)*(ue-F.y)/(F.next.y-F.y)+F.x&&(z=!z),F=F.next;while(F!==_);return z}(h,v)&&(_s(h.prev,h,v.prev)||_s(h,v.prev,v))||fd(h,v)&&_s(h.prev,h,h.next)>0&&_s(v.prev,v,v.next)>0)}function _s(h,v,_){return(v.y-h.y)*(_.x-v.x)-(v.x-h.x)*(_.y-v.y)}function fd(h,v){return h.x===v.x&&h.y===v.y}function Rc(h,v,_,R){var F=Ic(_s(h,v,_)),z=Ic(_s(h,v,R)),X=Ic(_s(_,R,h)),ue=Ic(_s(_,R,v));return F!==z&&X!==ue||!(F!==0||!ei(h,_,v))||!(z!==0||!ei(h,R,v))||!(X!==0||!ei(_,h,R))||!(ue!==0||!ei(_,v,R))}function ei(h,v,_){return v.x<=Math.max(h.x,_.x)&&v.x>=Math.min(h.x,_.x)&&v.y<=Math.max(h.y,_.y)&&v.y>=Math.min(h.y,_.y)}function Ic(h){return h>0?1:h<0?-1:0}function Pp(h,v){return _s(h.prev,h,h.next)<0?_s(h,v,h.next)>=0&&_s(h,h.prev,v)>=0:_s(h,v,h.prev)<0||_s(h,h.next,v)<0}function qs(h,v){var _=new Kh(h.i,h.x,h.y),R=new Kh(v.i,v.x,v.y),F=h.next,z=v.prev;return h.next=v,v.prev=h,_.next=F,F.prev=_,R.next=_,_.prev=R,z.next=R,R.prev=z,R}function Pc(h,v,_,R){var F=new Kh(h,v,_);return R?(F.next=R.next,F.prev=R,R.next.prev=F,R.next=F):(F.prev=F,F.next=F),F}function pc(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Kh(h,v,_){this.i=h,this.x=v,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function il(h,v,_,R){for(var F=0,z=v,X=_-R;z<_;z+=R)F+=(h[X]-h[z])*(h[z+1]+h[X+1]),X=z;return F}function Op(h,v,_,R,F){(function z(X,ue,Ie,qe,lt){for(;qe>Ie;){if(qe-Ie>600){var yt=qe-Ie+1,Lt=ue-Ie+1,Ut=Math.log(yt),ur=.5*Math.exp(2*Ut/3),fr=.5*Math.sqrt(Ut*ur*(yt-ur)/yt)*(Lt-yt/2<0?-1:1);z(X,ue,Math.max(Ie,Math.floor(ue-Lt*ur/yt+fr)),Math.min(qe,Math.floor(ue+(yt-Lt)*ur/yt+fr)),lt)}var Dr=X[ue],Mr=Ie,Yr=qe;for(Oc(X,Ie,ue),lt(X[qe],Dr)>0&&Oc(X,Ie,qe);Mr<Yr;){for(Oc(X,Mr,Yr),Mr++,Yr--;lt(X[Mr],Dr)<0;)Mr++;for(;lt(X[Yr],Dr)>0;)Yr--}lt(X[Ie],Dr)===0?Oc(X,Ie,Yr):Oc(X,++Yr,qe),Yr<=ue&&(Ie=Yr+1),ue<=Yr&&(qe=Yr-1)}})(h,v,_||0,R||h.length-1,F||hd)}function Oc(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}function hd(h,v){return h<v?-1:h>v?1:0}function Uv(h,v){var _=h.length;if(_<=1)return[h];for(var R,F,z=[],X=0;X<_;X++){var ue=Et(h[X]);ue!==0&&(h[X].area=Math.abs(ue),F===void 0&&(F=ue<0),F===ue<0?(R&&z.push(R),R=[h[X]]):R.push(h[X]))}if(R&&z.push(R),v>1)for(var Ie=0;Ie<z.length;Ie++)z[Ie].length<=v||(Op(z[Ie],v,1,z[Ie].length-1,$d),z[Ie]=z[Ie].slice(0,v));return z}function $d(h,v){return v.area-h.area}function pd(h,v,_){for(var R=_.patternDependencies,F=!1,z=0,X=v;z<X.length;z+=1){var ue=X[z].paint.get(h+"-pattern");ue.isConstant()||(F=!0);var Ie=ue.constantOr(null);Ie&&(F=!0,R[Ie.to]=!0,R[Ie.from]=!0)}return F}function Zv(h,v,_,R,F){for(var z=F.patternDependencies,X=0,ue=v;X<ue.length;X+=1){var Ie=ue[X],qe=Ie.paint.get(h+"-pattern").value;if(qe.kind!=="constant"){var lt=qe.evaluate({zoom:R-1},_,{},F.availableImages),yt=qe.evaluate({zoom:R},_,{},F.availableImages),Lt=qe.evaluate({zoom:R+1},_,{},F.availableImages);yt=yt&&yt.name?yt.name:yt,Lt=Lt&&Lt.name?Lt.name:Lt,z[lt=lt&&lt.name?lt.name:lt]=!0,z[yt]=!0,z[Lt]=!0,_.patterns[Ie.id]={min:lt,mid:yt,max:Lt}}}return _}Wd.deviation=function(h,v,_,R){var F=v&&v.length,z=Math.abs(il(h,0,F?v[0]*_:h.length,_));if(F)for(var X=0,ue=v.length;X<ue;X++)z-=Math.abs(il(h,v[X]*_,X<ue-1?v[X+1]*_:h.length,_));var Ie=0;for(X=0;X<R.length;X+=3){var qe=R[X]*_,lt=R[X+1]*_,yt=R[X+2]*_;Ie+=Math.abs((h[qe]-h[yt])*(h[lt+1]-h[qe+1])-(h[qe]-h[lt])*(h[yt+1]-h[qe+1]))}return z===0&&Ie===0?0:Math.abs((Ie-z)/z)},Wd.flatten=function(h){for(var v=h[0][0].length,_={vertices:[],holes:[],dimensions:v},R=0,F=0;F<h.length;F++){for(var z=0;z<h[F].length;z++)for(var X=0;X<v;X++)_.vertices.push(h[F][z][X]);F>0&&_.holes.push(R+=h[F-1].length)}return _},Nv.default=zv;var ef=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vh,this.indexArray=new qc,this.indexArray2=new Cl,this.programConfigurations=new ha(h.layers,h.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};ef.prototype.populate=function(h,v,_){this.hasPattern=pd("fill",this.layers,v);for(var R=this.layers[0].layout.get("fill-sort-key"),F=[],z=0,X=h;z<X.length;z+=1){var ue=X[z],Ie=ue.feature,qe=ue.id,lt=ue.index,yt=ue.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Ut=ys(Ie,Lt);if(this.layers[0]._featureFilter.filter(new ja(this.zoom),Ut,_)){var ur=R?R.evaluate(Ut,{},_,v.availableImages):void 0,fr={id:qe,properties:Ie.properties,type:Ie.type,sourceLayerIndex:yt,index:lt,geometry:Lt?Ut.geometry:es(Ie),patterns:{},sortKey:ur};F.push(fr)}}R&&F.sort(function(ci,Si){return ci.sortKey-Si.sortKey});for(var Dr=0,Mr=F;Dr<Mr.length;Dr+=1){var Yr=Mr[Dr],on=Yr.geometry,vn=Yr.index,wn=Yr.sourceLayerIndex;if(this.hasPattern){var Fn=Zv("fill",this.layers,Yr,this.zoom,v);this.patternFeatures.push(Fn)}else this.addFeature(Yr,on,vn,_,{});v.featureIndex.insert(h[vn].feature,on,vn,wn,this.index)}},ef.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},ef.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.patternFeatures;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},ef.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ef.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ef.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,A0),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.indexBuffer2=h.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(h),this.uploaded=!0},ef.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ef.prototype.addFeature=function(h,v,_,R,F){for(var z=0,X=Uv(v,500);z<X.length;z+=1){for(var ue=X[z],Ie=0,qe=0,lt=ue;qe<lt.length;qe+=1)Ie+=lt[qe].length;for(var yt=this.segments.prepareSegment(Ie,this.layoutVertexArray,this.indexArray),Lt=yt.vertexLength,Ut=[],ur=[],fr=0,Dr=ue;fr<Dr.length;fr+=1){var Mr=Dr[fr];if(Mr.length!==0){Mr!==ue[0]&&ur.push(Ut.length/2);var Yr=this.segments2.prepareSegment(Mr.length,this.layoutVertexArray,this.indexArray2),on=Yr.vertexLength;this.layoutVertexArray.emplaceBack(Mr[0].x,Mr[0].y),this.indexArray2.emplaceBack(on+Mr.length-1,on),Ut.push(Mr[0].x),Ut.push(Mr[0].y);for(var vn=1;vn<Mr.length;vn++)this.layoutVertexArray.emplaceBack(Mr[vn].x,Mr[vn].y),this.indexArray2.emplaceBack(on+vn-1,on+vn),Ut.push(Mr[vn].x),Ut.push(Mr[vn].y);Yr.vertexLength+=Mr.length,Yr.primitiveLength+=Mr.length}}for(var wn=Nv(Ut,ur),Fn=0;Fn<wn.length;Fn+=3)this.indexArray.emplaceBack(Lt+wn[Fn],Lt+wn[Fn+1],Lt+wn[Fn+2]);yt.vertexLength+=Ie,yt.primitiveLength+=wn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},Ni("FillBucket",ef,{omit:["layers","patternFeatures"]});var qh=new Cs({"fill-sort-key":new wi(At.layout_fill["fill-sort-key"])}),Xd={paint:new Cs({"fill-antialias":new Qi(At.paint_fill["fill-antialias"]),"fill-opacity":new wi(At.paint_fill["fill-opacity"]),"fill-color":new wi(At.paint_fill["fill-color"]),"fill-outline-color":new wi(At.paint_fill["fill-outline-color"]),"fill-translate":new Qi(At.paint_fill["fill-translate"]),"fill-translate-anchor":new Qi(At.paint_fill["fill-translate-anchor"]),"fill-pattern":new wl(At.paint_fill["fill-pattern"])}),layout:qh},pm=function(h){function v(_){h.call(this,_,Xd)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R);var F=this.paint._values["fill-outline-color"];F.value.kind==="constant"&&F.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},v.prototype.createBucket=function(_){return new ef(_)},v.prototype.queryRadius=function(){return Ts(this.paint.get("fill-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,X,ue,Ie){return lc(ou(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ue.angle,Ie),z)},v.prototype.isTileClipped=function(){return!0},v}(sc),Vv=Xs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dm=fs;function fs(h,v,_,R,F){this.properties={},this.extent=_,this.type=0,this._pbf=h,this._geometry=-1,this._keys=R,this._values=F,h.readFields(yh,this,v)}function yh(h,v,_){h==1?v.id=_.readVarint():h==2?function(R,F){for(var z=R.readVarint()+R.pos;R.pos<z;){var X=F._keys[R.readVarint()],ue=F._values[R.readVarint()];F.properties[X]=ue}}(_,v):h==3?v.type=_.readVarint():h==4&&(v._geometry=_.pos)}function Zf(h){for(var v,_,R=0,F=0,z=h.length,X=z-1;F<z;X=F++)R+=((_=h[X]).x-(v=h[F]).x)*(v.y+_.y);return R}fs.types=["Unknown","Point","LineString","Polygon"],fs.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var v,_=h.readVarint()+h.pos,R=1,F=0,z=0,X=0,ue=[];h.pos<_;){if(F<=0){var Ie=h.readVarint();R=7&Ie,F=Ie>>3}if(F--,R===1||R===2)z+=h.readSVarint(),X+=h.readSVarint(),R===1&&(v&&ue.push(v),v=[]),v.push(new Q(z,X));else{if(R!==7)throw new Error("unknown command "+R);v&&v.push(v[0].clone())}}return v&&ue.push(v),ue},fs.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var v=h.readVarint()+h.pos,_=1,R=0,F=0,z=0,X=1/0,ue=-1/0,Ie=1/0,qe=-1/0;h.pos<v;){if(R<=0){var lt=h.readVarint();_=7&lt,R=lt>>3}if(R--,_===1||_===2)(F+=h.readSVarint())<X&&(X=F),F>ue&&(ue=F),(z+=h.readSVarint())<Ie&&(Ie=z),z>qe&&(qe=z);else if(_!==7)throw new Error("unknown command "+_)}return[X,Ie,ue,qe]},fs.prototype.toGeoJSON=function(h,v,_){var R,F,z=this.extent*Math.pow(2,_),X=this.extent*h,ue=this.extent*v,Ie=this.loadGeometry(),qe=fs.types[this.type];function lt(Ut){for(var ur=0;ur<Ut.length;ur++){var fr=Ut[ur];Ut[ur]=[360*(fr.x+X)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(fr.y+ue)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var yt=[];for(R=0;R<Ie.length;R++)yt[R]=Ie[R][0];lt(Ie=yt);break;case 2:for(R=0;R<Ie.length;R++)lt(Ie[R]);break;case 3:for(Ie=function(Ut){var ur=Ut.length;if(ur<=1)return[Ut];for(var fr,Dr,Mr=[],Yr=0;Yr<ur;Yr++){var on=Zf(Ut[Yr]);on!==0&&(Dr===void 0&&(Dr=on<0),Dr===on<0?(fr&&Mr.push(fr),fr=[Ut[Yr]]):fr.push(Ut[Yr]))}return fr&&Mr.push(fr),Mr}(Ie),R=0;R<Ie.length;R++)for(F=0;F<Ie[R].length;F++)lt(Ie[R][F])}Ie.length===1?Ie=Ie[0]:qe="Multi"+qe;var Lt={type:"Feature",geometry:{type:qe,coordinates:Ie},properties:this.properties};return"id"in this&&(Lt.id=this.id),Lt};var dd=xf;function xf(h,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(_h,this,v),this.length=this._features.length}function _h(h,v,_){h===15?v.version=_.readVarint():h===1?v.name=_.readString():h===5?v.extent=_.readVarint():h===2?v._features.push(_.pos):h===3?v._keys.push(_.readString()):h===4&&v._values.push(function(R){for(var F=null,z=R.readVarint()+R.pos;R.pos<z;){var X=R.readVarint()>>3;F=X===1?R.readString():X===2?R.readFloat():X===3?R.readDouble():X===4?R.readVarint64():X===5?R.readVarint():X===6?R.readSVarint():X===7?R.readBoolean():null}return F}(_))}function kp(h,v,_){if(h===3){var R=new dd(_,_.readVarint()+_.pos);R.length&&(v[R.name]=R)}}xf.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var v=this._pbf.readVarint()+this._pbf.pos;return new dm(this._pbf,v,this.extent,this._keys,this._values)};var Dp={VectorTile:function(h,v){this.layers=h.readFields(kp,{},v)},VectorTileFeature:dm,VectorTileLayer:dd},Rl=Dp.VectorTileFeature.types,Vf=Math.pow(2,13);function Xo(h,v,_,R,F,z,X,ue){h.emplaceBack(v,_,2*Math.floor(R*Vf)+X,F*Vf*2,z*Vf*2,Math.round(ue))}var Fu=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new uc,this.indexArray=new qc,this.programConfigurations=new ha(h.layers,h.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function Iu(h,v){return h.x===v.x&&(h.x<0||h.x>8192)||h.y===v.y&&(h.y<0||h.y>8192)}Fu.prototype.populate=function(h,v,_){this.features=[],this.hasPattern=pd("fill-extrusion",this.layers,v);for(var R=0,F=h;R<F.length;R+=1){var z=F[R],X=z.feature,ue=z.id,Ie=z.index,qe=z.sourceLayerIndex,lt=this.layers[0]._featureFilter.needGeometry,yt=ys(X,lt);if(this.layers[0]._featureFilter.filter(new ja(this.zoom),yt,_)){var Lt={id:ue,sourceLayerIndex:qe,index:Ie,geometry:lt?yt.geometry:es(X),properties:X.properties,type:X.type,patterns:{}};this.hasPattern?this.features.push(Zv("fill-extrusion",this.layers,Lt,this.zoom,v)):this.addFeature(Lt,Lt.geometry,Ie,_,{}),v.featureIndex.insert(X,Lt.geometry,Ie,qe,this.index,!0)}}},Fu.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.features;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},Fu.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Fu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fu.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Vv),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},Fu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fu.prototype.addFeature=function(h,v,_,R,F){for(var z=0,X=Uv(v,500);z<X.length;z+=1){for(var ue=X[z],Ie=0,qe=0,lt=ue;qe<lt.length;qe+=1)Ie+=lt[qe].length;for(var yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Lt=0,Ut=ue;Lt<Ut.length;Lt+=1){var ur=Ut[Lt];if(ur.length!==0&&!((fo=ur).every(function(za){return za.x<0})||fo.every(function(za){return za.x>8192})||fo.every(function(za){return za.y<0})||fo.every(function(za){return za.y>8192})))for(var fr=0,Dr=0;Dr<ur.length;Dr++){var Mr=ur[Dr];if(Dr>=1){var Yr=ur[Dr-1];if(!Iu(Mr,Yr)){yt.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var on=Mr.sub(Yr)._perp()._unit(),vn=Yr.dist(Mr);fr+vn>32768&&(fr=0),Xo(this.layoutVertexArray,Mr.x,Mr.y,on.x,on.y,0,0,fr),Xo(this.layoutVertexArray,Mr.x,Mr.y,on.x,on.y,0,1,fr),Xo(this.layoutVertexArray,Yr.x,Yr.y,on.x,on.y,0,0,fr+=vn),Xo(this.layoutVertexArray,Yr.x,Yr.y,on.x,on.y,0,1,fr);var wn=yt.vertexLength;this.indexArray.emplaceBack(wn,wn+2,wn+1),this.indexArray.emplaceBack(wn+1,wn+2,wn+3),yt.vertexLength+=4,yt.primitiveLength+=2}}}}if(yt.vertexLength+Ie>Wt.MAX_VERTEX_ARRAY_LENGTH&&(yt=this.segments.prepareSegment(Ie,this.layoutVertexArray,this.indexArray)),Rl[h.type]==="Polygon"){for(var Fn=[],ci=[],Si=yt.vertexLength,Ji=0,ki=ue;Ji<ki.length;Ji+=1){var la=ki[Ji];if(la.length!==0){la!==ue[0]&&ci.push(Fn.length/2);for(var Ii=0;Ii<la.length;Ii++){var eo=la[Ii];Xo(this.layoutVertexArray,eo.x,eo.y,0,0,1,1,0),Fn.push(eo.x),Fn.push(eo.y)}}}for(var qi=Nv(Fn,ci),Gi=0;Gi<qi.length;Gi+=3)this.indexArray.emplaceBack(Si+qi[Gi],Si+qi[Gi+2],Si+qi[Gi+1]);yt.primitiveLength+=qi.length/3,yt.vertexLength+=Ie}}var fo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},Ni("FillExtrusionBucket",Fu,{omit:["layers","features"]});var pl={paint:new Cs({"fill-extrusion-opacity":new Qi(At["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wi(At["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qi(At["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qi(At["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wl(At["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wi(At["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wi(At["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qi(At["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},vm=function(h){function v(_){h.call(this,_,pl)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Fu(_)},v.prototype.queryRadius=function(){return Ts(this.paint.get("fill-extrusion-translate"))},v.prototype.is3D=function(){return!0},v.prototype.queryIntersectsFeature=function(_,R,F,z,X,ue,Ie,qe){var lt=ou(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ue.angle,Ie),yt=this.paint.get("fill-extrusion-height").evaluate(R,F),Lt=this.paint.get("fill-extrusion-base").evaluate(R,F),Ut=function(fr,Dr,Mr,Yr){for(var on=[],vn=0,wn=fr;vn<wn.length;vn+=1){var Fn=wn[vn],ci=[Fn.x,Fn.y,0,1];_f(ci,ci,Dr),on.push(new Q(ci[0]/ci[3],ci[1]/ci[3]))}return on}(lt,qe),ur=function(fr,Dr,Mr,Yr){for(var on=[],vn=[],wn=Yr[8]*Dr,Fn=Yr[9]*Dr,ci=Yr[10]*Dr,Si=Yr[11]*Dr,Ji=Yr[8]*Mr,ki=Yr[9]*Mr,la=Yr[10]*Mr,Ii=Yr[11]*Mr,eo=0,qi=fr;eo<qi.length;eo+=1){for(var Gi=[],fo=[],za=0,to=qi[eo];za<to.length;za+=1){var mi=to[za],mo=mi.x,Ms=mi.y,js=Yr[0]*mo+Yr[4]*Ms+Yr[12],xs=Yr[1]*mo+Yr[5]*Ms+Yr[13],Rs=Yr[2]*mo+Yr[6]*Ms+Yr[14],eu=Yr[3]*mo+Yr[7]*Ms+Yr[15],Ns=Rs+ci,_u=eu+Si,Zu=js+Ji,Ku=xs+ki,gl=Rs+la,xu=eu+Ii,qu=new Q((js+wn)/_u,(xs+Fn)/_u);qu.z=Ns/_u,Gi.push(qu);var Ka=new Q(Zu/xu,Ku/xu);Ka.z=gl/xu,fo.push(Ka)}on.push(Gi),vn.push(fo)}return[on,vn]}(z,Lt,yt,qe);return function(fr,Dr,Mr){var Yr=1/0;lc(Mr,Dr)&&(Yr=I0(Mr,Dr[0]));for(var on=0;on<Dr.length;on++)for(var vn=Dr[on],wn=fr[on],Fn=0;Fn<vn.length-1;Fn++){var ci=vn[Fn],Si=[ci,vn[Fn+1],wn[Fn+1],wn[Fn],ci];Qc(Mr,Si)&&(Yr=Math.min(Yr,I0(Mr,Si)))}return Yr!==1/0&&Yr}(ur[0],ur[1],Ut)},v}(sc);function Qh(h,v){return h.x*v.x+h.y*v.y}function I0(h,v){if(h.length===1){for(var _,R=0,F=v[R++];!_||F.equals(_);)if(!(_=v[R++]))return 1/0;for(;R<v.length;R++){var z=v[R],X=h[0],ue=_.sub(F),Ie=z.sub(F),qe=X.sub(F),lt=Qh(ue,ue),yt=Qh(ue,Ie),Lt=Qh(Ie,Ie),Ut=Qh(qe,ue),ur=Qh(qe,Ie),fr=lt*Lt-yt*yt,Dr=(Lt*Ut-yt*ur)/fr,Mr=(lt*ur-yt*Ut)/fr,Yr=F.z*(1-Dr-Mr)+_.z*Dr+z.z*Mr;if(isFinite(Yr))return Yr}return 1/0}for(var on=1/0,vn=0,wn=v;vn<wn.length;vn+=1)on=Math.min(on,wn[vn].z);return on}var Lp=Xs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Yd=Xs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,yg=Dp.VectorTileFeature.types,P0=Math.cos(Math.PI/180*37.5),tf=Math.pow(2,14)/.5,dl=function(h){var v=this;this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(_){return _.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(_){v.gradients[_.id]={}}),this.layoutVertexArray=new Ta,this.layoutVertexArray2=new gh,this.indexArray=new qc,this.programConfigurations=new ha(h.layers,h.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(_){return _.isStateDependent()}).map(function(_){return _.id})};dl.prototype.populate=function(h,v,_){this.hasPattern=pd("line",this.layers,v);for(var R=this.layers[0].layout.get("line-sort-key"),F=[],z=0,X=h;z<X.length;z+=1){var ue=X[z],Ie=ue.feature,qe=ue.id,lt=ue.index,yt=ue.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Ut=ys(Ie,Lt);if(this.layers[0]._featureFilter.filter(new ja(this.zoom),Ut,_)){var ur=R?R.evaluate(Ut,{},_):void 0,fr={id:qe,properties:Ie.properties,type:Ie.type,sourceLayerIndex:yt,index:lt,geometry:Lt?Ut.geometry:es(Ie),patterns:{},sortKey:ur};F.push(fr)}}R&&F.sort(function(ci,Si){return ci.sortKey-Si.sortKey});for(var Dr=0,Mr=F;Dr<Mr.length;Dr+=1){var Yr=Mr[Dr],on=Yr.geometry,vn=Yr.index,wn=Yr.sourceLayerIndex;if(this.hasPattern){var Fn=Zv("line",this.layers,Yr,this.zoom,v);this.patternFeatures.push(Fn)}else this.addFeature(Yr,on,vn,_,{});v.featureIndex.insert(h[vn].feature,on,vn,wn,this.index)}},dl.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},dl.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.patternFeatures;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},dl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},dl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},dl.prototype.upload=function(h){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=h.createVertexBuffer(this.layoutVertexArray2,Yd)),this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Lp),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},dl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},dl.prototype.lineFeatureClips=function(h){if(h.properties&&h.properties.hasOwnProperty("mapbox_clip_start")&&h.properties.hasOwnProperty("mapbox_clip_end"))return{start:+h.properties.mapbox_clip_start,end:+h.properties.mapbox_clip_end}},dl.prototype.addFeature=function(h,v,_,R,F){var z=this.layers[0].layout,X=z.get("line-join").evaluate(h,{}),ue=z.get("line-cap"),Ie=z.get("line-miter-limit"),qe=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(h);for(var lt=0,yt=v;lt<yt.length;lt+=1)this.addLine(yt[lt],h,X,ue,Ie,qe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},dl.prototype.addLine=function(h,v,_,R,F,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var X=0;X<h.length-1;X++)this.totalDistance+=h[X].dist(h[X+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ue=yg[v.type]==="Polygon",Ie=h.length;Ie>=2&&h[Ie-1].equals(h[Ie-2]);)Ie--;for(var qe=0;qe<Ie-1&&h[qe].equals(h[qe+1]);)qe++;if(!(Ie<(ue?3:2))){_==="bevel"&&(F=1.05);var lt,yt=this.overscaling<=16?122880/(512*this.overscaling):0,Lt=this.segments.prepareSegment(10*Ie,this.layoutVertexArray,this.indexArray),Ut=void 0,ur=void 0,fr=void 0,Dr=void 0;this.e1=this.e2=-1,ue&&(Dr=h[qe].sub(lt=h[Ie-2])._unit()._perp());for(var Mr=qe;Mr<Ie;Mr++)if(!(ur=Mr===Ie-1?ue?h[qe+1]:void 0:h[Mr+1])||!h[Mr].equals(ur)){Dr&&(fr=Dr),lt&&(Ut=lt),lt=h[Mr],Dr=ur?ur.sub(lt)._unit()._perp():fr;var Yr=(fr=fr||Dr).add(Dr);Yr.x===0&&Yr.y===0||Yr._unit();var on=fr.x*Dr.x+fr.y*Dr.y,vn=Yr.x*Dr.x+Yr.y*Dr.y,wn=vn!==0?1/vn:1/0,Fn=2*Math.sqrt(2-2*vn),ci=vn<P0&&Ut&&ur,Si=fr.x*Dr.y-fr.y*Dr.x>0;if(ci&&Mr>qe){var Ji=lt.dist(Ut);if(Ji>2*yt){var ki=lt.sub(lt.sub(Ut)._mult(yt/Ji)._round());this.updateDistance(Ut,ki),this.addCurrentVertex(ki,fr,0,0,Lt),Ut=ki}}var la=Ut&&ur,Ii=la?_:ue?"butt":R;if(la&&Ii==="round"&&(wn<z?Ii="miter":wn<=2&&(Ii="fakeround")),Ii==="miter"&&wn>F&&(Ii="bevel"),Ii==="bevel"&&(wn>2&&(Ii="flipbevel"),wn<F&&(Ii="miter")),Ut&&this.updateDistance(Ut,lt),Ii==="miter")Yr._mult(wn),this.addCurrentVertex(lt,Yr,0,0,Lt);else if(Ii==="flipbevel"){if(wn>100)Yr=Dr.mult(-1);else{var eo=wn*fr.add(Dr).mag()/fr.sub(Dr).mag();Yr._perp()._mult(eo*(Si?-1:1))}this.addCurrentVertex(lt,Yr,0,0,Lt),this.addCurrentVertex(lt,Yr.mult(-1),0,0,Lt)}else if(Ii==="bevel"||Ii==="fakeround"){var qi=-Math.sqrt(wn*wn-1),Gi=Si?qi:0,fo=Si?0:qi;if(Ut&&this.addCurrentVertex(lt,fr,Gi,fo,Lt),Ii==="fakeround")for(var za=Math.round(180*Fn/Math.PI/20),to=1;to<za;to++){var mi=to/za;if(mi!==.5){var mo=mi-.5;mi+=mi*mo*(mi-1)*((1.0904+on*(on*(3.55645-1.43519*on)-3.2452))*mo*mo+(.848013+on*(.215638*on-1.06021)))}var Ms=Dr.sub(fr)._mult(mi)._add(fr)._unit()._mult(Si?-1:1);this.addHalfVertex(lt,Ms.x,Ms.y,!1,Si,0,Lt)}ur&&this.addCurrentVertex(lt,Dr,-Gi,-fo,Lt)}else if(Ii==="butt")this.addCurrentVertex(lt,Yr,0,0,Lt);else if(Ii==="square"){var js=Ut?1:-1;this.addCurrentVertex(lt,Yr,js,js,Lt)}else Ii==="round"&&(Ut&&(this.addCurrentVertex(lt,fr,0,0,Lt),this.addCurrentVertex(lt,fr,1,1,Lt,!0)),ur&&(this.addCurrentVertex(lt,Dr,-1,-1,Lt,!0),this.addCurrentVertex(lt,Dr,0,0,Lt)));if(ci&&Mr<Ie-1){var xs=lt.dist(ur);if(xs>2*yt){var Rs=lt.add(ur.sub(lt)._mult(yt/xs)._round());this.updateDistance(lt,Rs),this.addCurrentVertex(Rs,Dr,0,0,Lt),lt=Rs}}}}},dl.prototype.addCurrentVertex=function(h,v,_,R,F,z){z===void 0&&(z=!1);var X=v.y*R-v.x,ue=-v.y-v.x*R;this.addHalfVertex(h,v.x+v.y*_,v.y-v.x*_,z,!1,_,F),this.addHalfVertex(h,X,ue,z,!0,-R,F),this.distance>tf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(h,v,_,R,F,z))},dl.prototype.addHalfVertex=function(h,v,_,R,F,z,X){var ue=.5*(this.lineClips?this.scaledDistance*(tf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((h.x<<1)+(R?1:0),(h.y<<1)+(F?1:0),Math.round(63*v)+128,Math.round(63*_)+128,1+(z===0?0:z<0?-1:1)|(63&ue)<<2,ue>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Ie=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ie),X.primitiveLength++),F?this.e2=Ie:this.e1=Ie},dl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},dl.prototype.updateDistance=function(h,v){this.distance+=h.dist(v),this.updateScaledDistance()},Ni("LineBucket",dl,{omit:["layers","patternFeatures"]});var O0=new Cs({"line-cap":new Qi(At.layout_line["line-cap"]),"line-join":new wi(At.layout_line["line-join"]),"line-miter-limit":new Qi(At.layout_line["line-miter-limit"]),"line-round-limit":new Qi(At.layout_line["line-round-limit"]),"line-sort-key":new wi(At.layout_line["line-sort-key"])}),gm={paint:new Cs({"line-opacity":new wi(At.paint_line["line-opacity"]),"line-color":new wi(At.paint_line["line-color"]),"line-translate":new Qi(At.paint_line["line-translate"]),"line-translate-anchor":new Qi(At.paint_line["line-translate-anchor"]),"line-width":new wi(At.paint_line["line-width"]),"line-gap-width":new wi(At.paint_line["line-gap-width"]),"line-offset":new wi(At.paint_line["line-offset"]),"line-blur":new wi(At.paint_line["line-blur"]),"line-dasharray":new rl(At.paint_line["line-dasharray"]),"line-pattern":new wl(At.paint_line["line-pattern"]),"line-gradient":new Gu(At.paint_line["line-gradient"])}),layout:O0},xh=new(function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R){return R=new ja(Math.floor(R.zoom),{now:R.now,fadeDuration:R.fadeDuration,zoomHistory:R.zoomHistory,transition:R.transition}),h.prototype.possiblyEvaluate.call(this,_,R)},v.prototype.evaluate=function(_,R,F,z){return R=E({},R,{zoom:Math.floor(R.zoom)}),h.prototype.evaluate.call(this,_,R,F,z)},v}(wi))(gm.paint.properties["line-width"].specification);xh.useIntegerZoom=!0;var _g=function(h){function v(_){h.call(this,_,gm),this.gradientVersion=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof bs,this.gradientVersion=(this.gradientVersion+1)%we)},v.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R),this.paint._values["line-floorwidth"]=xh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)},v.prototype.createBucket=function(_){return new dl(_)},v.prototype.queryRadius=function(_){var R=_,F=Fp(Lu("line-width",this,R),Lu("line-gap-width",this,R)),z=Lu("line-offset",this,R);return F/2+Math.abs(z)+Ts(this.paint.get("line-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,X,ue,Ie){var qe=ou(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ue.angle,Ie),lt=Ie/2*Fp(this.paint.get("line-width").evaluate(R,F),this.paint.get("line-gap-width").evaluate(R,F)),yt=this.paint.get("line-offset").evaluate(R,F);return yt&&(z=function(Lt,Ut){for(var ur=[],fr=new Q(0,0),Dr=0;Dr<Lt.length;Dr++){for(var Mr=Lt[Dr],Yr=[],on=0;on<Mr.length;on++){var vn=Mr[on],wn=Mr[on+1],Fn=on===0?fr:vn.sub(Mr[on-1])._unit()._perp(),ci=on===Mr.length-1?fr:wn.sub(vn)._unit()._perp(),Si=Fn._add(ci)._unit();Si._mult(1/(Si.x*ci.x+Si.y*ci.y)),Yr.push(Si._mult(Ut)._add(vn))}ur.push(Yr)}return ur}(z,yt*Ie)),function(Lt,Ut,ur){for(var fr=0;fr<Ut.length;fr++){var Dr=Ut[fr];if(Lt.length>=3){for(var Mr=0;Mr<Dr.length;Mr++)if(fc(Lt,Dr[Mr]))return!0}if(hl(Lt,Dr,ur))return!0}return!1}(qe,z,lt)},v.prototype.isTileClipped=function(){return!0},v}(sc);function Fp(h,v){return v>0?v+2*h:h}var k0=Xs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xg=Xs([{name:"a_projected_pos",components:3,type:"Float32"}],4),Kd=(Xs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Xs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Hv=(Xs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Xs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),nt=Xs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Kt(h,v,_){return h.sections.forEach(function(R){R.text=function(F,z,X){var ue=z.layout.get("text-transform").evaluate(X,{});return ue==="uppercase"?F=F.toLocaleUpperCase():ue==="lowercase"&&(F=F.toLocaleLowerCase()),au.applyArabicShaping&&(F=au.applyArabicShaping(F)),F}(R.text,v,_)}),h}Xs([{name:"triangle",components:3,type:"Uint16"}]),Xs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xs([{type:"Float32",name:"offsetX"}]),Xs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var br={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},dn=function(h,v,_,R,F){var z,X,ue=8*F-R-1,Ie=(1<<ue)-1,qe=Ie>>1,lt=-7,yt=_?F-1:0,Lt=_?-1:1,Ut=h[v+yt];for(yt+=Lt,z=Ut&(1<<-lt)-1,Ut>>=-lt,lt+=ue;lt>0;z=256*z+h[v+yt],yt+=Lt,lt-=8);for(X=z&(1<<-lt)-1,z>>=-lt,lt+=R;lt>0;X=256*X+h[v+yt],yt+=Lt,lt-=8);if(z===0)z=1-qe;else{if(z===Ie)return X?NaN:1/0*(Ut?-1:1);X+=Math.pow(2,R),z-=qe}return(Ut?-1:1)*X*Math.pow(2,z-R)},kn=function(h,v,_,R,F,z){var X,ue,Ie,qe=8*z-F-1,lt=(1<<qe)-1,yt=lt>>1,Lt=F===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=R?0:z-1,ur=R?1:-1,fr=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(ue=isNaN(v)?1:0,X=lt):(X=Math.floor(Math.log(v)/Math.LN2),v*(Ie=Math.pow(2,-X))<1&&(X--,Ie*=2),(v+=X+yt>=1?Lt/Ie:Lt*Math.pow(2,1-yt))*Ie>=2&&(X++,Ie/=2),X+yt>=lt?(ue=0,X=lt):X+yt>=1?(ue=(v*Ie-1)*Math.pow(2,F),X+=yt):(ue=v*Math.pow(2,yt-1)*Math.pow(2,F),X=0));F>=8;h[_+Ut]=255&ue,Ut+=ur,ue/=256,F-=8);for(X=X<<F|ue,qe+=F;qe>0;h[_+Ut]=255&X,Ut+=ur,X/=256,qe-=8);h[_+Ut-ur]|=128*fr},fn=sn;function sn(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}sn.Varint=0,sn.Fixed64=1,sn.Bytes=2,sn.Fixed32=5;var ti=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Vn(h){return h.type===sn.Bytes?h.readVarint()+h.pos:h.pos+1}function hi(h,v,_){return _?4294967296*v+(h>>>0):4294967296*(v>>>0)+(h>>>0)}function ni(h,v,_){var R=v<=16383?1:v<=2097151?2:v<=268435455?3:Math.floor(Math.log(v)/(7*Math.LN2));_.realloc(R);for(var F=_.pos-1;F>=h;F--)_.buf[F+R]=_.buf[F]}function ui(h,v){for(var _=0;_<h.length;_++)v.writeVarint(h[_])}function xi(h,v){for(var _=0;_<h.length;_++)v.writeSVarint(h[_])}function In(h,v){for(var _=0;_<h.length;_++)v.writeFloat(h[_])}function di(h,v){for(var _=0;_<h.length;_++)v.writeDouble(h[_])}function qr(h,v){for(var _=0;_<h.length;_++)v.writeBoolean(h[_])}function En(h,v){for(var _=0;_<h.length;_++)v.writeFixed32(h[_])}function ii(h,v){for(var _=0;_<h.length;_++)v.writeSFixed32(h[_])}function Ci(h,v){for(var _=0;_<h.length;_++)v.writeFixed64(h[_])}function Kr(h,v){for(var _=0;_<h.length;_++)v.writeSFixed64(h[_])}function Oi(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+16777216*h[v+3]}function Qn(h,v,_){h[_]=v,h[_+1]=v>>>8,h[_+2]=v>>>16,h[_+3]=v>>>24}function Mi(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+(h[v+3]<<24)}function Un(h,v,_){h===1&&_.readMessage(bi,v)}function bi(h,v,_){if(h===3){var R=_.readMessage(ua,{}),F=R.width,z=R.height,X=R.left,ue=R.top,Ie=R.advance;v.push({id:R.id,bitmap:new Uf({width:F+6,height:z+6},R.bitmap),metrics:{width:F,height:z,left:X,top:ue,advance:Ie}})}}function ua(h,v,_){h===1?v.id=_.readVarint():h===2?v.bitmap=_.readBytes():h===3?v.width=_.readVarint():h===4?v.height=_.readVarint():h===5?v.left=_.readSVarint():h===6?v.top=_.readSVarint():h===7&&(v.advance=_.readVarint())}function Ra(h){for(var v=0,_=0,R=0,F=h;R<F.length;R+=1){var z=F[R];v+=z.w*z.h,_=Math.max(_,z.w)}h.sort(function(fr,Dr){return Dr.h-fr.h});for(var X=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(v/.95)),_),h:1/0}],ue=0,Ie=0,qe=0,lt=h;qe<lt.length;qe+=1)for(var yt=lt[qe],Lt=X.length-1;Lt>=0;Lt--){var Ut=X[Lt];if(!(yt.w>Ut.w||yt.h>Ut.h)){if(yt.x=Ut.x,yt.y=Ut.y,Ie=Math.max(Ie,yt.y+yt.h),ue=Math.max(ue,yt.x+yt.w),yt.w===Ut.w&&yt.h===Ut.h){var ur=X.pop();Lt<X.length&&(X[Lt]=ur)}else yt.h===Ut.h?(Ut.x+=yt.w,Ut.w-=yt.w):yt.w===Ut.w?(Ut.y+=yt.h,Ut.h-=yt.h):(X.push({x:Ut.x+yt.w,y:Ut.y,w:Ut.w-yt.w,h:yt.h}),Ut.y+=yt.h,Ut.h-=yt.h);break}}return{w:ue,h:Ie,fill:v/(ue*Ie)||0}}sn.prototype={destroy:function(){this.buf=null},readFields:function(h,v,_){for(_=_||this.length;this.pos<_;){var R=this.readVarint(),F=R>>3,z=this.pos;this.type=7&R,h(F,v,this),this.pos===z&&this.skip(R)}return v},readMessage:function(h,v){return this.readFields(h,v,this.readVarint()+this.pos)},readFixed32:function(){var h=Oi(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=Mi(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Oi(this.buf,this.pos)+4294967296*Oi(this.buf,this.pos+4);return this.pos+=8,h},readSFixed64:function(){var h=Oi(this.buf,this.pos)+4294967296*Mi(this.buf,this.pos+4);return this.pos+=8,h},readFloat:function(){var h=dn(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=dn(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var v,_,R=this.buf;return v=127&(_=R[this.pos++]),_<128?v:(v|=(127&(_=R[this.pos++]))<<7,_<128?v:(v|=(127&(_=R[this.pos++]))<<14,_<128?v:(v|=(127&(_=R[this.pos++]))<<21,_<128?v:function(F,z,X){var ue,Ie,qe=X.buf;if(ue=(112&(Ie=qe[X.pos++]))>>4,Ie<128||(ue|=(127&(Ie=qe[X.pos++]))<<3,Ie<128)||(ue|=(127&(Ie=qe[X.pos++]))<<10,Ie<128)||(ue|=(127&(Ie=qe[X.pos++]))<<17,Ie<128)||(ue|=(127&(Ie=qe[X.pos++]))<<24,Ie<128)||(ue|=(1&(Ie=qe[X.pos++]))<<31,Ie<128))return hi(F,ue,z);throw new Error("Expected varint not more than 10 bytes")}(v|=(15&(_=R[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,v=this.pos;return this.pos=h,h-v>=12&&ti?function(_,R,F){return ti.decode(_.subarray(R,F))}(this.buf,v,h):function(_,R,F){for(var z="",X=R;X<F;){var ue,Ie,qe,lt=_[X],yt=null,Lt=lt>239?4:lt>223?3:lt>191?2:1;if(X+Lt>F)break;Lt===1?lt<128&&(yt=lt):Lt===2?(192&(ue=_[X+1]))==128&&(yt=(31&lt)<<6|63&ue)<=127&&(yt=null):Lt===3?(Ie=_[X+2],(192&(ue=_[X+1]))==128&&(192&Ie)==128&&((yt=(15&lt)<<12|(63&ue)<<6|63&Ie)<=2047||yt>=55296&&yt<=57343)&&(yt=null)):Lt===4&&(Ie=_[X+2],qe=_[X+3],(192&(ue=_[X+1]))==128&&(192&Ie)==128&&(192&qe)==128&&((yt=(15&lt)<<18|(63&ue)<<12|(63&Ie)<<6|63&qe)<=65535||yt>=1114112)&&(yt=null)),yt===null?(yt=65533,Lt=1):yt>65535&&(yt-=65536,z+=String.fromCharCode(yt>>>10&1023|55296),yt=56320|1023&yt),z+=String.fromCharCode(yt),X+=Lt}return z}(this.buf,v,h)},readBytes:function(){var h=this.readVarint()+this.pos,v=this.buf.subarray(this.pos,h);return this.pos=h,v},readPackedVarint:function(h,v){if(this.type!==sn.Bytes)return h.push(this.readVarint(v));var _=Vn(this);for(h=h||[];this.pos<_;)h.push(this.readVarint(v));return h},readPackedSVarint:function(h){if(this.type!==sn.Bytes)return h.push(this.readSVarint());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==sn.Bytes)return h.push(this.readBoolean());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==sn.Bytes)return h.push(this.readFloat());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==sn.Bytes)return h.push(this.readDouble());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==sn.Bytes)return h.push(this.readFixed32());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==sn.Bytes)return h.push(this.readSFixed32());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==sn.Bytes)return h.push(this.readFixed64());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==sn.Bytes)return h.push(this.readSFixed64());var v=Vn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed64());return h},skip:function(h){var v=7&h;if(v===sn.Varint)for(;this.buf[this.pos++]>127;);else if(v===sn.Bytes)this.pos=this.readVarint()+this.pos;else if(v===sn.Fixed32)this.pos+=4;else{if(v!==sn.Fixed64)throw new Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(h,v){this.writeVarint(h<<3|v)},realloc:function(h){for(var v=this.length||16;v<this.pos+h;)v*=2;if(v!==this.length){var _=new Uint8Array(v);_.set(this.buf),this.buf=_,this.length=v}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),Qn(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),Qn(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),Qn(this.buf,-1&h,this.pos),Qn(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),Qn(this.buf,-1&h,this.pos),Qn(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(v,_){var R,F;if(v>=0?(R=v%4294967296|0,F=v/4294967296|0):(F=~(-v/4294967296),4294967295^(R=~(-v%4294967296))?R=R+1|0:(R=0,F=F+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(z,X,ue){ue.buf[ue.pos++]=127&z|128,z>>>=7,ue.buf[ue.pos++]=127&z|128,z>>>=7,ue.buf[ue.pos++]=127&z|128,z>>>=7,ue.buf[ue.pos++]=127&z|128,ue.buf[ue.pos]=127&(z>>>=7)}(R,0,_),function(z,X){var ue=(7&z)<<4;X.buf[X.pos++]|=ue|((z>>>=3)?128:0),z&&(X.buf[X.pos++]=127&z|((z>>>=7)?128:0),z&&(X.buf[X.pos++]=127&z|((z>>>=7)?128:0),z&&(X.buf[X.pos++]=127&z|((z>>>=7)?128:0),z&&(X.buf[X.pos++]=127&z|((z>>>=7)?128:0),z&&(X.buf[X.pos++]=127&z)))))}(F,_)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var v=this.pos;this.pos=function(R,F,z){for(var X,ue,Ie=0;Ie<F.length;Ie++){if((X=F.charCodeAt(Ie))>55295&&X<57344){if(!ue){X>56319||Ie+1===F.length?(R[z++]=239,R[z++]=191,R[z++]=189):ue=X;continue}if(X<56320){R[z++]=239,R[z++]=191,R[z++]=189,ue=X;continue}X=ue-55296<<10|X-56320|65536,ue=null}else ue&&(R[z++]=239,R[z++]=191,R[z++]=189,ue=null);X<128?R[z++]=X:(X<2048?R[z++]=X>>6|192:(X<65536?R[z++]=X>>12|224:(R[z++]=X>>18|240,R[z++]=X>>12&63|128),R[z++]=X>>6&63|128),R[z++]=63&X|128)}return z}(this.buf,h,this.pos);var _=this.pos-v;_>=128&&ni(v,_,this),this.pos=v-1,this.writeVarint(_),this.pos+=_},writeFloat:function(h){this.realloc(4),kn(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),kn(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var v=h.length;this.writeVarint(v),this.realloc(v);for(var _=0;_<v;_++)this.buf[this.pos++]=h[_]},writeRawMessage:function(h,v){this.pos++;var _=this.pos;h(v,this);var R=this.pos-_;R>=128&&ni(_,R,this),this.pos=_-1,this.writeVarint(R),this.pos+=R},writeMessage:function(h,v,_){this.writeTag(h,sn.Bytes),this.writeRawMessage(v,_)},writePackedVarint:function(h,v){v.length&&this.writeMessage(h,ui,v)},writePackedSVarint:function(h,v){v.length&&this.writeMessage(h,xi,v)},writePackedBoolean:function(h,v){v.length&&this.writeMessage(h,qr,v)},writePackedFloat:function(h,v){v.length&&this.writeMessage(h,In,v)},writePackedDouble:function(h,v){v.length&&this.writeMessage(h,di,v)},writePackedFixed32:function(h,v){v.length&&this.writeMessage(h,En,v)},writePackedSFixed32:function(h,v){v.length&&this.writeMessage(h,ii,v)},writePackedFixed64:function(h,v){v.length&&this.writeMessage(h,Ci,v)},writePackedSFixed64:function(h,v){v.length&&this.writeMessage(h,Kr,v)},writeBytesField:function(h,v){this.writeTag(h,sn.Bytes),this.writeBytes(v)},writeFixed32Field:function(h,v){this.writeTag(h,sn.Fixed32),this.writeFixed32(v)},writeSFixed32Field:function(h,v){this.writeTag(h,sn.Fixed32),this.writeSFixed32(v)},writeFixed64Field:function(h,v){this.writeTag(h,sn.Fixed64),this.writeFixed64(v)},writeSFixed64Field:function(h,v){this.writeTag(h,sn.Fixed64),this.writeSFixed64(v)},writeVarintField:function(h,v){this.writeTag(h,sn.Varint),this.writeVarint(v)},writeSVarintField:function(h,v){this.writeTag(h,sn.Varint),this.writeSVarint(v)},writeStringField:function(h,v){this.writeTag(h,sn.Bytes),this.writeString(v)},writeFloatField:function(h,v){this.writeTag(h,sn.Fixed32),this.writeFloat(v)},writeDoubleField:function(h,v){this.writeTag(h,sn.Fixed64),this.writeDouble(v)},writeBooleanField:function(h,v){this.writeVarintField(h,!!v)}};var Ti=function(h,v){var _=v.pixelRatio,R=v.version,F=v.stretchX,z=v.stretchY,X=v.content;this.paddedRect=h,this.pixelRatio=_,this.stretchX=F,this.stretchY=z,this.content=X,this.version=R},Jn={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Jn.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Jn.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Jn.tlbr.get=function(){return this.tl.concat(this.br)},Jn.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ti.prototype,Jn);var Dn=function(h,v){var _={},R={};this.haveRenderCallbacks=[];var F=[];this.addImages(h,_,F),this.addImages(v,R,F);var z=Ra(F),X=new Ml({width:z.w||1,height:z.h||1});for(var ue in h){var Ie=h[ue],qe=_[ue].paddedRect;Ml.copy(Ie.data,X,{x:0,y:0},{x:qe.x+1,y:qe.y+1},Ie.data)}for(var lt in v){var yt=v[lt],Lt=R[lt].paddedRect,Ut=Lt.x+1,ur=Lt.y+1,fr=yt.data.width,Dr=yt.data.height;Ml.copy(yt.data,X,{x:0,y:0},{x:Ut,y:ur},yt.data),Ml.copy(yt.data,X,{x:0,y:Dr-1},{x:Ut,y:ur-1},{width:fr,height:1}),Ml.copy(yt.data,X,{x:0,y:0},{x:Ut,y:ur+Dr},{width:fr,height:1}),Ml.copy(yt.data,X,{x:fr-1,y:0},{x:Ut-1,y:ur},{width:1,height:Dr}),Ml.copy(yt.data,X,{x:0,y:0},{x:Ut+fr,y:ur},{width:1,height:Dr})}this.image=X,this.iconPositions=_,this.patternPositions=R};Dn.prototype.addImages=function(h,v,_){for(var R in h){var F=h[R],z={x:0,y:0,w:F.data.width+2,h:F.data.height+2};_.push(z),v[R]=new Ti(z,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(R)}},Dn.prototype.patchUpdatedImages=function(h,v){for(var _ in h.dispatchRenderCallbacks(this.haveRenderCallbacks),h.updatedImages)this.patchUpdatedImage(this.iconPositions[_],h.getImage(_),v),this.patchUpdatedImage(this.patternPositions[_],h.getImage(_),v)},Dn.prototype.patchUpdatedImage=function(h,v,_){if(h&&v&&h.version!==v.version){h.version=v.version;var R=h.tl;_.update(v.data,void 0,{x:R[0],y:R[1]})}},Ni("ImagePosition",Ti),Ni("ImageAtlas",Dn);var ra={horizontal:1,vertical:2,horizontalOnly:3},Ja=function(){this.scale=1,this.fontStack="",this.imageName=null};Ja.forText=function(h,v){var _=new Ja;return _.scale=h||1,_.fontStack=v,_},Ja.forImage=function(h){var v=new Ja;return v.imageName=h,v};var Li=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function $a(h,v,_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr){var Dr,Mr=Li.fromFeature(h,F);yt===ra.vertical&&Mr.verticalizePunctuation();var Yr=au.processBidirectionalText,on=au.processStyledBidirectionalText;if(Yr&&Mr.sections.length===1){Dr=[];for(var vn=0,wn=Yr(Mr.toString(),hs(Mr,qe,z,v,R,Ut,ur));vn<wn.length;vn+=1){var Fn=wn[vn],ci=new Li;ci.text=Fn,ci.sections=Mr.sections;for(var Si=0;Si<Fn.length;Si++)ci.sectionIndex.push(0);Dr.push(ci)}}else if(on){Dr=[];for(var Ji=0,ki=on(Mr.text,Mr.sectionIndex,hs(Mr,qe,z,v,R,Ut,ur));Ji<ki.length;Ji+=1){var la=ki[Ji],Ii=new Li;Ii.text=la[0],Ii.sectionIndex=la[1],Ii.sections=Mr.sections,Dr.push(Ii)}}else Dr=function(Gi,fo){for(var za=[],to=Gi.text,mi=0,mo=0,Ms=fo;mo<Ms.length;mo+=1){var js=Ms[mo];za.push(Gi.substring(mi,js)),mi=js}return mi<to.length&&za.push(Gi.substring(mi,to.length)),za}(Mr,hs(Mr,qe,z,v,R,Ut,ur));var eo=[],qi={positionedLines:eo,text:Mr.toString(),top:lt[1],bottom:lt[1],left:lt[0],right:lt[0],writingMode:yt,iconsInText:!1,verticalizable:!1};return function(Gi,fo,za,to,mi,mo,Ms,js,xs,Rs,eu,Ns){for(var _u=0,Zu=-17,Ku=0,gl=0,xu=js==="right"?1:js==="left"?0:.5,qu=0,Ka=0,Ro=mi;Ka<Ro.length;Ka+=1){var Io=Ro[Ka];Io.trim();var bo=Io.getMaxScale(),Ko=24*(bo-1),Il={positionedGlyphs:[],lineOffset:0};Gi.positionedLines[qu]=Il;var Is=Il.positionedGlyphs,uu=0;if(Io.length()){for(var ml=0;ml<Io.length();ml++){var Ao=Io.getSection(ml),jf=Io.getSectionIndex(ml),yl=Io.getCharCode(ml),tp=0,na=null,Fa=null,nf=null,Qd=24,zp=!(xs===ra.horizontal||!eu&&!ph(yl)||eu&&(ka[yl]||(Zp=yl,Ei.Arabic(Zp)||Ei["Arabic Supplement"](Zp)||Ei["Arabic Extended-A"](Zp)||Ei["Arabic Presentation Forms-A"](Zp)||Ei["Arabic Presentation Forms-B"](Zp))));if(Ao.imageName){var Tg=to[Ao.imageName];if(!Tg)continue;nf=Ao.imageName,Gi.iconsInText=Gi.iconsInText||!0,Fa=Tg.paddedRect;var Up=Tg.displaySize;Ao.scale=24*Ao.scale/Ns,tp=Ko+(24-Up[1]*Ao.scale),Qd=(na={width:Up[0],height:Up[1],left:1,top:-3,advance:zp?Up[1]:Up[0]}).advance;var Jd=zp?Up[0]*Ao.scale-24*bo:Up[1]*Ao.scale-24*bo;Jd>0&&Jd>uu&&(uu=Jd)}else{var bm=za[Ao.fontStack],md=bm&&bm[yl];if(md&&md.rect)Fa=md.rect,na=md.metrics;else{var Ag=fo[Ao.fontStack],Sm=Ag&&Ag[yl];if(!Sm)continue;na=Sm.metrics}tp=24*(bo-Ao.scale)}zp?(Gi.verticalizable=!0,Is.push({glyph:yl,imageName:nf,x:_u,y:Zu+tp,vertical:zp,scale:Ao.scale,fontStack:Ao.fontStack,sectionIndex:jf,metrics:na,rect:Fa}),_u+=Qd*Ao.scale+Rs):(Is.push({glyph:yl,imageName:nf,x:_u,y:Zu+tp,vertical:zp,scale:Ao.scale,fontStack:Ao.fontStack,sectionIndex:jf,metrics:na,rect:Fa}),_u+=na.advance*Ao.scale+Rs)}Is.length!==0&&(Ku=Math.max(_u-Rs,Ku),su(Is,0,Is.length-1,xu,uu)),_u=0;var bu=mo*bo+uu;Il.lineOffset=Math.max(uu,Ko),Zu+=bu,gl=Math.max(bu,gl),++qu}else Zu+=mo,++qu}var Zp,Gv=Zu- -17,Mg=Vo(Ms),Vp=Mg.horizontalAlign,Rg=Mg.verticalAlign;(function(Ig,L0,Pg,F0,o_,B0,Ql,Eh,rs){var Dc,N0=(L0-Pg)*o_;Dc=B0!==Ql?-Eh*F0- -17:(-F0*rs+.5)*Ql;for(var Wf=0,Em=Ig;Wf<Em.length;Wf+=1)for(var $v=0,wm=Em[Wf].positionedGlyphs;$v<wm.length;$v+=1){var Xv=wm[$v];Xv.x+=N0,Xv.y+=Dc}})(Gi.positionedLines,xu,Vp,Rg,Ku,gl,mo,Gv,mi.length),Gi.top+=-Rg*Gv,Gi.bottom=Gi.top+Gv,Gi.left+=-Vp*Ku,Gi.right=Gi.left+Ku}(qi,v,_,R,Dr,X,ue,Ie,yt,qe,Lt,fr),!function(Gi){for(var fo=0,za=Gi;fo<za.length;fo+=1)if(za[fo].positionedGlyphs.length!==0)return!1;return!0}(eo)&&qi}Li.fromFeature=function(h,v){for(var _=new Li,R=0;R<h.sections.length;R++){var F=h.sections[R];F.image?_.addImageSection(F):_.addTextSection(F,v)}return _},Li.prototype.length=function(){return this.text.length},Li.prototype.getSection=function(h){return this.sections[this.sectionIndex[h]]},Li.prototype.getSectionIndex=function(h){return this.sectionIndex[h]},Li.prototype.getCharCode=function(h){return this.text.charCodeAt(h)},Li.prototype.verticalizePunctuation=function(){this.text=function(h){for(var v="",_=0;_<h.length;_++){var R=h.charCodeAt(_+1)||null,F=h.charCodeAt(_-1)||null;v+=R&&Vh(R)&&!br[h[_+1]]||F&&Vh(F)&&!br[h[_-1]]||!br[h[_]]?h[_]:br[h[_]]}return v}(this.text)},Li.prototype.trim=function(){for(var h=0,v=0;v<this.text.length&&ka[this.text.charCodeAt(v)];v++)h++;for(var _=this.text.length,R=this.text.length-1;R>=0&&R>=h&&ka[this.text.charCodeAt(R)];R--)_--;this.text=this.text.substring(h,_),this.sectionIndex=this.sectionIndex.slice(h,_)},Li.prototype.substring=function(h,v){var _=new Li;return _.text=this.text.substring(h,v),_.sectionIndex=this.sectionIndex.slice(h,v),_.sections=this.sections,_},Li.prototype.toString=function(){return this.text},Li.prototype.getMaxScale=function(){var h=this;return this.sectionIndex.reduce(function(v,_){return Math.max(v,h.sections[_].scale)},0)},Li.prototype.addTextSection=function(h,v){this.text+=h.text,this.sections.push(Ja.forText(h.scale,h.fontStack||v));for(var _=this.sections.length-1,R=0;R<h.text.length;++R)this.sectionIndex.push(_)},Li.prototype.addImageSection=function(h){var v=h.image?h.image.name:"";if(v.length!==0){var _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(Ja.forImage(v)),this.sectionIndex.push(this.sections.length-1)):Ve("Reached maximum number of images 6401")}else Ve("Can't add FormattedSection with an empty image.")},Li.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ka={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ga={};function Co(h,v,_,R,F,z){if(v.imageName){var X=R[v.imageName];return X?X.displaySize[0]*v.scale*24/z+F:0}var ue=_[v.fontStack],Ie=ue&&ue[h];return Ie?Ie.metrics.advance*v.scale+F:0}function mu(h,v,_,R){var F=Math.pow(h-v,2);return R?h<v?F/2:2*F:F+Math.abs(_)*_}function Bu(h,v,_){var R=0;return h===10&&(R-=1e4),_&&(R+=150),h!==40&&h!==65288||(R+=50),v!==41&&v!==65289||(R+=50),R}function co(h,v,_,R,F,z){for(var X=null,ue=mu(v,_,F,z),Ie=0,qe=R;Ie<qe.length;Ie+=1){var lt=qe[Ie],yt=mu(v-lt.x,_,F,z)+lt.badness;yt<=ue&&(X=lt,ue=yt)}return{index:h,x:v,priorBreak:X,badness:ue}}function hs(h,v,_,R,F,z,X){if(z!=="point")return[];if(!h)return[];for(var ue,Ie=[],qe=function(Dr,Mr,Yr,on,vn,wn){for(var Fn=0,ci=0;ci<Dr.length();ci++){var Si=Dr.getSection(ci);Fn+=Co(Dr.getCharCode(ci),Si,on,vn,Mr,wn)}return Fn/Math.max(1,Math.ceil(Fn/Yr))}(h,v,_,R,F,X),lt=h.text.indexOf("\u200B")>=0,yt=0,Lt=0;Lt<h.length();Lt++){var Ut=h.getSection(Lt),ur=h.getCharCode(Lt);if(ka[ur]||(yt+=Co(ur,Ut,R,F,v,X)),Lt<h.length()-1){var fr=!((ue=ur)<11904||!(Ei["Bopomofo Extended"](ue)||Ei.Bopomofo(ue)||Ei["CJK Compatibility Forms"](ue)||Ei["CJK Compatibility Ideographs"](ue)||Ei["CJK Compatibility"](ue)||Ei["CJK Radicals Supplement"](ue)||Ei["CJK Strokes"](ue)||Ei["CJK Symbols and Punctuation"](ue)||Ei["CJK Unified Ideographs Extension A"](ue)||Ei["CJK Unified Ideographs"](ue)||Ei["Enclosed CJK Letters and Months"](ue)||Ei["Halfwidth and Fullwidth Forms"](ue)||Ei.Hiragana(ue)||Ei["Ideographic Description Characters"](ue)||Ei["Kangxi Radicals"](ue)||Ei["Katakana Phonetic Extensions"](ue)||Ei.Katakana(ue)||Ei["Vertical Forms"](ue)||Ei["Yi Radicals"](ue)||Ei["Yi Syllables"](ue)));(ga[ur]||fr||Ut.imageName)&&Ie.push(co(Lt+1,yt,qe,Ie,Bu(ur,h.getCharCode(Lt+1),fr&&lt),!1))}}return function Dr(Mr){return Mr?Dr(Mr.priorBreak).concat(Mr.index):[]}(co(h.length(),yt,qe,Ie,0,!0))}function Vo(h){var v=.5,_=.5;switch(h){case"right":case"top-right":case"bottom-right":v=1;break;case"left":case"top-left":case"bottom-left":v=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:v,verticalAlign:_}}function su(h,v,_,R,F){if(R||F)for(var z=h[_],X=(h[_].x+z.metrics.advance*z.scale)*R,ue=v;ue<=_;ue++)h[ue].x-=X,h[ue].y+=F}function Vs(h,v,_,R,F,z){var X,ue=h.image;if(ue.content){var Ie=ue.content,qe=ue.pixelRatio||1;X=[Ie[0]/qe,Ie[1]/qe,ue.displaySize[0]-Ie[2]/qe,ue.displaySize[1]-Ie[3]/qe]}var lt,yt,Lt,Ut,ur=v.left*z,fr=v.right*z;_==="width"||_==="both"?(Ut=F[0]+ur-R[3],yt=F[0]+fr+R[1]):yt=(Ut=F[0]+(ur+fr-ue.displaySize[0])/2)+ue.displaySize[0];var Dr=v.top*z,Mr=v.bottom*z;return _==="height"||_==="both"?(lt=F[1]+Dr-R[0],Lt=F[1]+Mr+R[2]):Lt=(lt=F[1]+(Dr+Mr-ue.displaySize[1])/2)+ue.displaySize[1],{image:ue,top:lt,right:yt,bottom:Lt,left:Ut,collisionPadding:X}}ga[10]=!0,ga[32]=!0,ga[38]=!0,ga[40]=!0,ga[41]=!0,ga[43]=!0,ga[45]=!0,ga[47]=!0,ga[173]=!0,ga[183]=!0,ga[8203]=!0,ga[8208]=!0,ga[8211]=!0,ga[8231]=!0;var Fs=function(h){function v(_,R,F,z){h.call(this,_,R),this.angle=F,z!==void 0&&(this.segment=z)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.clone=function(){return new v(this.x,this.y,this.angle,this.segment)},v}(Q);function Qs(h,v){var _=v.expression;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new ja(h+1))};if(_.kind==="source")return{kind:"source"};for(var R=_.zoomStops,F=_.interpolationType,z=0;z<R.length&&R[z]<=h;)z++;for(var X=z=Math.max(0,z-1);X<R.length&&R[X]<h+1;)X++;X=Math.min(R.length-1,X);var ue=R[z],Ie=R[X];return _.kind==="composite"?{kind:"composite",minZoom:ue,maxZoom:Ie,interpolationType:F}:{kind:"camera",minZoom:ue,maxZoom:Ie,minSize:_.evaluate(new ja(ue)),maxSize:_.evaluate(new ja(Ie)),interpolationType:F}}function Nu(h,v,_){var R=v.uSize,F=_.lowerSize;return h.kind==="source"?F/128:h.kind==="composite"?Ss(F/128,_.upperSize/128,v.uSizeT):R}function As(h,v){var _=0,R=0;if(h.kind==="constant")R=h.layoutSize;else if(h.kind!=="source"){var F=h.interpolationType,z=F?J(Gs.interpolationFactor(F,v,h.minZoom,h.maxZoom),0,1):0;h.kind==="camera"?R=Ss(h.minSize,h.maxSize,z):_=z}return{uSizeT:_,uSize:R}}Ni("Anchor",Fs);var Ga=Object.freeze({__proto__:null,getSizeData:Qs,evaluateSizeForFeature:Nu,evaluateSizeForZoom:As,SIZE_PACK_FACTOR:128});function Yu(h,v,_,R,F){if(v.segment===void 0)return!0;for(var z=v,X=v.segment+1,ue=0;ue>-_/2;){if(--X<0)return!1;ue-=h[X].dist(z),z=h[X]}ue+=h[X].dist(h[X+1]),X++;for(var Ie=[],qe=0;ue<_/2;){var lt=h[X],yt=h[X+1];if(!yt)return!1;var Lt=h[X-1].angleTo(lt)-lt.angleTo(yt);for(Lt=Math.abs((Lt+3*Math.PI)%(2*Math.PI)-Math.PI),Ie.push({distance:ue,angleDelta:Lt}),qe+=Lt;ue-Ie[0].distance>R;)qe-=Ie.shift().angleDelta;if(qe>F)return!1;X++,ue+=lt.dist(yt)}return!0}function To(h){for(var v=0,_=0;_<h.length-1;_++)v+=h[_].dist(h[_+1]);return v}function ma(h,v,_){return h?.6*v*_:0}function ba(h,v){return Math.max(h?h.right-h.left:0,v?v.right-v.left:0)}function xo(h,v,_,R,F,z){for(var X=ma(_,F,z),ue=ba(_,R)*z,Ie=0,qe=To(h)/2,lt=0;lt<h.length-1;lt++){var yt=h[lt],Lt=h[lt+1],Ut=yt.dist(Lt);if(Ie+Ut>qe){var ur=(qe-Ie)/Ut,fr=Ss(yt.x,Lt.x,ur),Dr=Ss(yt.y,Lt.y,ur),Mr=new Fs(fr,Dr,Lt.angleTo(yt),lt);return Mr._round(),!X||Yu(h,Mr,ue,X,v)?Mr:void 0}Ie+=Ut}}function Hs(h,v,_,R,F,z,X,ue,Ie){var qe=ma(R,z,X),lt=ba(R,F),yt=lt*X,Lt=h[0].x===0||h[0].x===Ie||h[0].y===0||h[0].y===Ie;return v-yt<v/4&&(v=yt+v/4),function Ut(ur,fr,Dr,Mr,Yr,on,vn,wn,Fn){for(var ci=on/2,Si=To(ur),Ji=0,ki=fr-Dr,la=[],Ii=0;Ii<ur.length-1;Ii++){for(var eo=ur[Ii],qi=ur[Ii+1],Gi=eo.dist(qi),fo=qi.angleTo(eo);ki+Dr<Ji+Gi;){var za=((ki+=Dr)-Ji)/Gi,to=Ss(eo.x,qi.x,za),mi=Ss(eo.y,qi.y,za);if(to>=0&&to<Fn&&mi>=0&&mi<Fn&&ki-ci>=0&&ki+ci<=Si){var mo=new Fs(to,mi,fo,Ii);mo._round(),Mr&&!Yu(ur,mo,on,Mr,Yr)||la.push(mo)}}Ji+=Gi}return wn||la.length||vn||(la=Ut(ur,Ji/2,Dr,Mr,Yr,on,vn,!0,Fn)),la}(h,Lt?v/2*ue%v:(lt/2+2*z)*X*ue%v,v,qe,_,yt,Lt,!1,Ie)}function yu(h,v,_,R,F){for(var z=[],X=0;X<h.length;X++)for(var ue=h[X],Ie=void 0,qe=0;qe<ue.length-1;qe++){var lt=ue[qe],yt=ue[qe+1];lt.x<v&&yt.x<v||(lt.x<v?lt=new Q(v,lt.y+(v-lt.x)/(yt.x-lt.x)*(yt.y-lt.y))._round():yt.x<v&&(yt=new Q(v,lt.y+(v-lt.x)/(yt.x-lt.x)*(yt.y-lt.y))._round()),lt.y<_&&yt.y<_||(lt.y<_?lt=new Q(lt.x+(_-lt.y)/(yt.y-lt.y)*(yt.x-lt.x),_)._round():yt.y<_&&(yt=new Q(lt.x+(_-lt.y)/(yt.y-lt.y)*(yt.x-lt.x),_)._round()),lt.x>=R&&yt.x>=R||(lt.x>=R?lt=new Q(R,lt.y+(R-lt.x)/(yt.x-lt.x)*(yt.y-lt.y))._round():yt.x>=R&&(yt=new Q(R,lt.y+(R-lt.x)/(yt.x-lt.x)*(yt.y-lt.y))._round()),lt.y>=F&&yt.y>=F||(lt.y>=F?lt=new Q(lt.x+(F-lt.y)/(yt.y-lt.y)*(yt.x-lt.x),F)._round():yt.y>=F&&(yt=new Q(lt.x+(F-lt.y)/(yt.y-lt.y)*(yt.x-lt.x),F)._round()),Ie&&lt.equals(Ie[Ie.length-1])||z.push(Ie=[lt]),Ie.push(yt)))))}return z}function vr(h,v,_,R){var F=[],z=h.image,X=z.pixelRatio,ue=z.paddedRect.w-2,Ie=z.paddedRect.h-2,qe=h.right-h.left,lt=h.bottom-h.top,yt=z.stretchX||[[0,ue]],Lt=z.stretchY||[[0,Ie]],Ut=function(to,mi){return to+mi[1]-mi[0]},ur=yt.reduce(Ut,0),fr=Lt.reduce(Ut,0),Dr=ue-ur,Mr=Ie-fr,Yr=0,on=ur,vn=0,wn=fr,Fn=0,ci=Dr,Si=0,Ji=Mr;if(z.content&&R){var ki=z.content;Yr=yn(yt,0,ki[0]),vn=yn(Lt,0,ki[1]),on=yn(yt,ki[0],ki[2]),wn=yn(Lt,ki[1],ki[3]),Fn=ki[0]-Yr,Si=ki[1]-vn,ci=ki[2]-ki[0]-on,Ji=ki[3]-ki[1]-wn}var la=function(to,mi,mo,Ms){var js=Ri(to.stretch-Yr,on,qe,h.left),xs=Xa(to.fixed-Fn,ci,to.stretch,ur),Rs=Ri(mi.stretch-vn,wn,lt,h.top),eu=Xa(mi.fixed-Si,Ji,mi.stretch,fr),Ns=Ri(mo.stretch-Yr,on,qe,h.left),_u=Xa(mo.fixed-Fn,ci,mo.stretch,ur),Zu=Ri(Ms.stretch-vn,wn,lt,h.top),Ku=Xa(Ms.fixed-Si,Ji,Ms.stretch,fr),gl=new Q(js,Rs),xu=new Q(Ns,Rs),qu=new Q(Ns,Zu),Ka=new Q(js,Zu),Ro=new Q(xs/X,eu/X),Io=new Q(_u/X,Ku/X),bo=v*Math.PI/180;if(bo){var Ko=Math.sin(bo),Il=Math.cos(bo),Is=[Il,-Ko,Ko,Il];gl._matMult(Is),xu._matMult(Is),Ka._matMult(Is),qu._matMult(Is)}var uu=to.stretch+to.fixed,ml=mi.stretch+mi.fixed;return{tl:gl,tr:xu,bl:Ka,br:qu,tex:{x:z.paddedRect.x+1+uu,y:z.paddedRect.y+1+ml,w:mo.stretch+mo.fixed-uu,h:Ms.stretch+Ms.fixed-ml},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ro,pixelOffsetBR:Io,minFontScaleX:ci/X/qe,minFontScaleY:Ji/X/lt,isSDF:_}};if(R&&(z.stretchX||z.stretchY))for(var Ii=cn(yt,Dr,ur),eo=cn(Lt,Mr,fr),qi=0;qi<Ii.length-1;qi++)for(var Gi=Ii[qi],fo=Ii[qi+1],za=0;za<eo.length-1;za++)F.push(la(Gi,eo[za],fo,eo[za+1]));else F.push(la({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ue+1},{fixed:0,stretch:Ie+1}));return F}function yn(h,v,_){for(var R=0,F=0,z=h;F<z.length;F+=1){var X=z[F];R+=Math.max(v,Math.min(_,X[1]))-Math.max(v,Math.min(_,X[0]))}return R}function cn(h,v,_){for(var R=[{fixed:-1,stretch:0}],F=0,z=h;F<z.length;F+=1){var X=z[F],ue=X[0],Ie=X[1],qe=R[R.length-1];R.push({fixed:ue-qe.stretch,stretch:qe.stretch}),R.push({fixed:ue-qe.stretch,stretch:qe.stretch+(Ie-ue)})}return R.push({fixed:v+1,stretch:_}),R}function Ri(h,v,_,R){return h/v*_+R}function Xa(h,v,_,R){return h-v*_/R}var Yo=function(h,v,_,R,F,z,X,ue,Ie,qe){if(this.boxStartIndex=h.length,Ie){var lt=z.top,yt=z.bottom,Lt=z.collisionPadding;Lt&&(lt-=Lt[1],yt+=Lt[3]);var Ut=yt-lt;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var ur=z.top*X-ue,fr=z.bottom*X+ue,Dr=z.left*X-ue,Mr=z.right*X+ue,Yr=z.collisionPadding;if(Yr&&(Dr-=Yr[0]*X,ur-=Yr[1]*X,Mr+=Yr[2]*X,fr+=Yr[3]*X),qe){var on=new Q(Dr,ur),vn=new Q(Mr,ur),wn=new Q(Dr,fr),Fn=new Q(Mr,fr),ci=qe*Math.PI/180;on._rotate(ci),vn._rotate(ci),wn._rotate(ci),Fn._rotate(ci),Dr=Math.min(on.x,vn.x,wn.x,Fn.x),Mr=Math.max(on.x,vn.x,wn.x,Fn.x),ur=Math.min(on.y,vn.y,wn.y,Fn.y),fr=Math.max(on.y,vn.y,wn.y,Fn.y)}h.emplaceBack(v.x,v.y,Dr,ur,Mr,fr,_,R,F)}this.boxEndIndex=h.length},mt=function(h,v){if(h===void 0&&(h=[]),v===void 0&&(v=ir),this.data=h,this.length=this.data.length,this.compare=v,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function ir(h,v){return h<v?-1:h>v?1:0}function Ct(h,v,_){v===void 0&&(v=1),_===void 0&&(_=!1);for(var R=1/0,F=1/0,z=-1/0,X=-1/0,ue=h[0],Ie=0;Ie<ue.length;Ie++){var qe=ue[Ie];(!Ie||qe.x<R)&&(R=qe.x),(!Ie||qe.y<F)&&(F=qe.y),(!Ie||qe.x>z)&&(z=qe.x),(!Ie||qe.y>X)&&(X=qe.y)}var lt=Math.min(z-R,X-F),yt=lt/2,Lt=new mt([],hn);if(lt===0)return new Q(R,F);for(var Ut=R;Ut<z;Ut+=lt)for(var ur=F;ur<X;ur+=lt)Lt.push(new an(Ut+yt,ur+yt,yt,h));for(var fr=function(Yr){for(var on=0,vn=0,wn=0,Fn=Yr[0],ci=0,Si=Fn.length,Ji=Si-1;ci<Si;Ji=ci++){var ki=Fn[ci],la=Fn[Ji],Ii=ki.x*la.y-la.x*ki.y;vn+=(ki.x+la.x)*Ii,wn+=(ki.y+la.y)*Ii,on+=3*Ii}return new an(vn/on,wn/on,0,Yr)}(h),Dr=Lt.length;Lt.length;){var Mr=Lt.pop();(Mr.d>fr.d||!fr.d)&&(fr=Mr,_&&console.log("found best %d after %d probes",Math.round(1e4*Mr.d)/1e4,Dr)),Mr.max-fr.d<=v||(Lt.push(new an(Mr.p.x-(yt=Mr.h/2),Mr.p.y-yt,yt,h)),Lt.push(new an(Mr.p.x+yt,Mr.p.y-yt,yt,h)),Lt.push(new an(Mr.p.x-yt,Mr.p.y+yt,yt,h)),Lt.push(new an(Mr.p.x+yt,Mr.p.y+yt,yt,h)),Dr+=4)}return _&&(console.log("num probes: "+Dr),console.log("best distance: "+fr.d)),fr.p}function hn(h,v){return v.max-h.max}function an(h,v,_,R){this.p=new Q(h,v),this.h=_,this.d=function(F,z){for(var X=!1,ue=1/0,Ie=0;Ie<z.length;Ie++)for(var qe=z[Ie],lt=0,yt=qe.length,Lt=yt-1;lt<yt;Lt=lt++){var Ut=qe[lt],ur=qe[Lt];Ut.y>F.y!=ur.y>F.y&&F.x<(ur.x-Ut.x)*(F.y-Ut.y)/(ur.y-Ut.y)+Ut.x&&(X=!X),ue=Math.min(ue,gf(F,Ut,ur))}return(X?1:-1)*Math.sqrt(ue)}(this.p,R),this.max=this.d+this.h*Math.SQRT2}mt.prototype.push=function(h){this.data.push(h),this.length++,this._up(this.length-1)},mt.prototype.pop=function(){if(this.length!==0){var h=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),h}},mt.prototype.peek=function(){return this.data[0]},mt.prototype._up=function(h){for(var v=this.data,_=this.compare,R=v[h];h>0;){var F=h-1>>1,z=v[F];if(_(R,z)>=0)break;v[h]=z,h=F}v[h]=R},mt.prototype._down=function(h){for(var v=this.data,_=this.compare,R=this.length>>1,F=v[h];h<R;){var z=1+(h<<1),X=v[z],ue=z+1;if(ue<this.length&&_(v[ue],X)<0&&(z=ue,X=v[ue]),_(X,F)>=0)break;v[h]=X,h=z}v[h]=F};var Pr=Number.POSITIVE_INFINITY;function Br(h,v){return v[1]!==Pr?function(_,R,F){var z=0,X=0;switch(R=Math.abs(R),F=Math.abs(F),_){case"top-right":case"top-left":case"top":X=F-7;break;case"bottom-right":case"bottom-left":case"bottom":X=7-F}switch(_){case"top-right":case"bottom-right":case"right":z=-R;break;case"top-left":case"bottom-left":case"left":z=R}return[z,X]}(h,v[0],v[1]):function(_,R){var F=0,z=0;R<0&&(R=0);var X=R/Math.sqrt(2);switch(_){case"top-right":case"top-left":z=X-7;break;case"bottom-right":case"bottom-left":z=7-X;break;case"bottom":z=7-R;break;case"top":z=R-7}switch(_){case"top-right":case"bottom-right":F=-X;break;case"top-left":case"bottom-left":F=X;break;case"left":F=R;break;case"right":F=-R}return[F,z]}(h,v[0])}function jr(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pr(h,v,_,R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur){var fr=function(vn,wn,Fn,ci,Si,Ji,ki,la){for(var Ii=ci.layout.get("text-rotate").evaluate(Ji,{})*Math.PI/180,eo=[],qi=0,Gi=wn.positionedLines;qi<Gi.length;qi+=1)for(var fo=Gi[qi],za=0,to=fo.positionedGlyphs;za<to.length;za+=1){var mi=to[za];if(mi.rect){var mo=mi.rect||{},Ms=4,js=!0,xs=1,Rs=0,eu=(Si||la)&&mi.vertical,Ns=mi.metrics.advance*mi.scale/2;if(la&&wn.verticalizable&&(Rs=fo.lineOffset/2-(mi.imageName?-(24-mi.metrics.width*mi.scale)/2:24*(mi.scale-1))),mi.imageName){var _u=ki[mi.imageName];js=_u.sdf,Ms=1/(xs=_u.pixelRatio)}var Zu=Si?[mi.x+Ns,mi.y]:[0,0],Ku=Si?[0,0]:[mi.x+Ns+Fn[0],mi.y+Fn[1]-Rs],gl=[0,0];eu&&(gl=Ku,Ku=[0,0]);var xu=(mi.metrics.left-Ms)*mi.scale-Ns+Ku[0],qu=(-mi.metrics.top-Ms)*mi.scale+Ku[1],Ka=xu+mo.w*mi.scale/xs,Ro=qu+mo.h*mi.scale/xs,Io=new Q(xu,qu),bo=new Q(Ka,qu),Ko=new Q(xu,Ro),Il=new Q(Ka,Ro);if(eu){var Is=new Q(-Ns,Ns- -17),uu=-Math.PI/2,ml=12-Ns,Ao=new Q(22-ml,-(mi.imageName?ml:0)),jf=new(Function.prototype.bind.apply(Q,[null].concat(gl)));Io._rotateAround(uu,Is)._add(Ao)._add(jf),bo._rotateAround(uu,Is)._add(Ao)._add(jf),Ko._rotateAround(uu,Is)._add(Ao)._add(jf),Il._rotateAround(uu,Is)._add(Ao)._add(jf)}if(Ii){var yl=Math.sin(Ii),tp=Math.cos(Ii),na=[tp,-yl,yl,tp];Io._matMult(na),bo._matMult(na),Ko._matMult(na),Il._matMult(na)}var Fa=new Q(0,0),nf=new Q(0,0);eo.push({tl:Io,tr:bo,bl:Ko,br:Il,tex:mo,writingMode:wn.writingMode,glyphOffset:Zu,sectionIndex:mi.sectionIndex,isSDF:js,pixelOffsetTL:Fa,pixelOffsetBR:nf,minFontScaleX:0,minFontScaleY:0})}}return eo}(0,_,ue,F,z,X,R,h.allowVerticalPlacement),Dr=h.textSizeData,Mr=null;Dr.kind==="source"?(Mr=[128*F.layout.get("text-size").evaluate(X,{})])[0]>32640&&Ve(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Dr.kind==="composite"&&((Mr=[128*Ut.compositeTextSizes[0].evaluate(X,{},ur),128*Ut.compositeTextSizes[1].evaluate(X,{},ur)])[0]>32640||Mr[1]>32640)&&Ve(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),h.addSymbols(h.text,fr,Mr,ue,z,X,qe,v,Ie.lineStartIndex,Ie.lineLength,Lt,ur);for(var Yr=0,on=lt;Yr<on.length;Yr+=1)yt[on[Yr]]=h.text.placedSymbolArray.length-1;return 4*fr.length}function Lr(h){for(var v in h)return h[v];return null}function tr(h,v,_,R){var F=h.compareText;if(v in F){for(var z=F[v],X=z.length-1;X>=0;X--)if(R.dist(z[X])<_)return!0}else F[v]=[];return F[v].push(R),!1}var Nr=Dp.VectorTileFeature.types,xn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bn(h,v,_,R,F,z,X,ue,Ie,qe,lt,yt,Lt){var Ut=ue?Math.min(32640,Math.round(ue[0])):0,ur=ue?Math.min(32640,Math.round(ue[1])):0;h.emplaceBack(v,_,Math.round(32*R),Math.round(32*F),z,X,(Ut<<1)+(Ie?1:0),ur,16*qe,16*lt,256*yt,256*Lt)}function Wn(h,v,_){h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_)}function Zn(h){for(var v=0,_=h.sections;v<_.length;v+=1)if(Tp(_[v].text))return!0;return!1}var $n=function(h){this.layoutVertexArray=new od,this.indexArray=new qc,this.programConfigurations=h,this.segments=new Wt,this.dynamicLayoutVertexArray=new Bf,this.opacityVertexArray=new Gh,this.placedSymbolArray=new I};$n.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},$n.prototype.upload=function(h,v,_,R){this.isEmpty()||(_&&(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,k0.members),this.indexBuffer=h.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=h.createVertexBuffer(this.dynamicLayoutVertexArray,xg.members,!0),this.opacityVertexBuffer=h.createVertexBuffer(this.opacityVertexArray,xn,!0),this.opacityVertexBuffer.itemSize=1),(_||R)&&this.programConfigurations.upload(h))},$n.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ni("SymbolBuffers",$n);var Xi=function(h,v,_){this.layoutVertexArray=new h,this.layoutAttributes=v,this.indexArray=new _,this.segments=new Wt,this.collisionVertexArray=new He};Xi.prototype.upload=function(h){this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=h.createVertexBuffer(this.collisionVertexArray,Kd.members,!0)},Xi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ni("CollisionBuffers",Xi);var Nn=function(h){this.collisionBoxArray=h.collisionBoxArray,this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=h.index,this.pixelRatio=h.pixelRatio,this.sourceLayerIndex=h.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xu([]),this.placementViewportMatrix=Xu([]);var v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qs(this.zoom,v["text-size"]),this.iconSizeData=Qs(this.zoom,v["icon-size"]);var _=this.layers[0].layout,R=_.get("symbol-sort-key"),F=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=F!=="viewport-y"&&R.constantOr(1)!==void 0,this.sortFeaturesByY=(F==="viewport-y"||F==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(function(z){return ra[z]})),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id}),this.sourceID=h.sourceID};Nn.prototype.createArrays=function(){this.text=new $n(new ha(this.layers,this.zoom,function(h){return/^text/.test(h)})),this.icon=new $n(new ha(this.layers,this.zoom,function(h){return/^icon/.test(h)})),this.glyphOffsetArray=new ae,this.lineVertexArray=new Ae,this.symbolInstances=new ee},Nn.prototype.calculateGlyphDependencies=function(h,v,_,R,F){for(var z=0;z<h.length;z++)if(v[h.charCodeAt(z)]=!0,(_||R)&&F){var X=br[h.charAt(z)];X&&(v[X.charCodeAt(0)]=!0)}},Nn.prototype.populate=function(h,v,_){var R=this.layers[0],F=R.layout,z=F.get("text-font"),X=F.get("text-field"),ue=F.get("icon-image"),Ie=(X.value.kind!=="constant"||X.value.value instanceof lo&&!X.value.value.isEmpty()||X.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),qe=ue.value.kind!=="constant"||!!ue.value.value||Object.keys(ue.parameters).length>0,lt=F.get("symbol-sort-key");if(this.features=[],Ie||qe){for(var yt=v.iconDependencies,Lt=v.glyphDependencies,Ut=v.availableImages,ur=new ja(this.zoom),fr=0,Dr=h;fr<Dr.length;fr+=1){var Mr=Dr[fr],Yr=Mr.feature,on=Mr.id,vn=Mr.index,wn=Mr.sourceLayerIndex,Fn=R._featureFilter.needGeometry,ci=ys(Yr,Fn);if(R._featureFilter.filter(ur,ci,_)){Fn||(ci.geometry=es(Yr));var Si=void 0;if(Ie){var Ji=R.getValueAndResolveTokens("text-field",ci,_,Ut),ki=lo.factory(Ji);Zn(ki)&&(this.hasRTLText=!0),(!this.hasRTLText||Hd()==="unavailable"||this.hasRTLText&&au.isParsed())&&(Si=Kt(ki,R,ci))}var la=void 0;if(qe){var Ii=R.getValueAndResolveTokens("icon-image",ci,_,Ut);la=Ii instanceof ko?Ii:ko.fromString(Ii)}if(Si||la){var eo=this.sortFeaturesByKey?lt.evaluate(ci,{},_):void 0;if(this.features.push({id:on,text:Si,icon:la,index:vn,sourceLayerIndex:wn,geometry:ci.geometry,properties:Yr.properties,type:Nr[Yr.type],sortKey:eo}),la&&(yt[la.name]=!0),Si){var qi=z.evaluate(ci,{},_).join(","),Gi=F.get("text-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ra.vertical)>=0;for(var fo=0,za=Si.sections;fo<za.length;fo+=1){var to=za[fo];if(to.image)yt[to.image.name]=!0;else{var mi=zl(Si.toString()),mo=to.fontStack||qi,Ms=Lt[mo]=Lt[mo]||{};this.calculateGlyphDependencies(to.text,Ms,Gi,this.allowVerticalPlacement,mi)}}}}}}F.get("symbol-placement")==="line"&&(this.features=function(js){var xs={},Rs={},eu=[],Ns=0;function _u(Is){eu.push(js[Is]),Ns++}function Zu(Is,uu,ml){var Ao=Rs[Is];return delete Rs[Is],Rs[uu]=Ao,eu[Ao].geometry[0].pop(),eu[Ao].geometry[0]=eu[Ao].geometry[0].concat(ml[0]),Ao}function Ku(Is,uu,ml){var Ao=xs[uu];return delete xs[uu],xs[Is]=Ao,eu[Ao].geometry[0].shift(),eu[Ao].geometry[0]=ml[0].concat(eu[Ao].geometry[0]),Ao}function gl(Is,uu,ml){var Ao=ml?uu[0][uu[0].length-1]:uu[0][0];return Is+":"+Ao.x+":"+Ao.y}for(var xu=0;xu<js.length;xu++){var qu=js[xu],Ka=qu.geometry,Ro=qu.text?qu.text.toString():null;if(Ro){var Io=gl(Ro,Ka),bo=gl(Ro,Ka,!0);if(Io in Rs&&bo in xs&&Rs[Io]!==xs[bo]){var Ko=Ku(Io,bo,Ka),Il=Zu(Io,bo,eu[Ko].geometry);delete xs[Io],delete Rs[bo],Rs[gl(Ro,eu[Il].geometry,!0)]=Il,eu[Ko].geometry=null}else Io in Rs?Zu(Io,bo,Ka):bo in xs?Ku(Io,bo,Ka):(_u(xu),xs[Io]=Ns-1,Rs[bo]=Ns-1)}else _u(xu)}return eu.filter(function(Is){return Is.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(js,xs){return js.sortKey-xs.sortKey})}},Nn.prototype.update=function(h,v,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(h,v,this.layers,_),this.icon.programConfigurations.updatePaintArrays(h,v,this.layers,_))},Nn.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Nn.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Nn.prototype.upload=function(h){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(h),this.iconCollisionBox.upload(h)),this.text.upload(h,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(h,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Nn.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Nn.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Nn.prototype.addToLineVertexArray=function(h,v){var _=this.lineVertexArray.length;if(h.segment!==void 0){for(var R=h.dist(v[h.segment+1]),F=h.dist(v[h.segment]),z={},X=h.segment+1;X<v.length;X++)z[X]={x:v[X].x,y:v[X].y,tileUnitDistanceFromAnchor:R},X<v.length-1&&(R+=v[X+1].dist(v[X]));for(var ue=h.segment||0;ue>=0;ue--)z[ue]={x:v[ue].x,y:v[ue].y,tileUnitDistanceFromAnchor:F},ue>0&&(F+=v[ue-1].dist(v[ue]));for(var Ie=0;Ie<v.length;Ie++){var qe=z[Ie];this.lineVertexArray.emplaceBack(qe.x,qe.y,qe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}},Nn.prototype.addSymbols=function(h,v,_,R,F,z,X,ue,Ie,qe,lt,yt){for(var Lt=h.indexArray,Ut=h.layoutVertexArray,ur=h.segments.prepareSegment(4*v.length,Ut,Lt,this.canOverlap?z.sortKey:void 0),fr=this.glyphOffsetArray.length,Dr=ur.vertexLength,Mr=this.allowVerticalPlacement&&X===ra.vertical?Math.PI/2:0,Yr=z.text&&z.text.sections,on=0;on<v.length;on++){var vn=v[on],wn=vn.tl,Fn=vn.tr,ci=vn.bl,Si=vn.br,Ji=vn.tex,ki=vn.pixelOffsetTL,la=vn.pixelOffsetBR,Ii=vn.minFontScaleX,eo=vn.minFontScaleY,qi=vn.glyphOffset,Gi=vn.isSDF,fo=vn.sectionIndex,za=ur.vertexLength,to=qi[1];bn(Ut,ue.x,ue.y,wn.x,to+wn.y,Ji.x,Ji.y,_,Gi,ki.x,ki.y,Ii,eo),bn(Ut,ue.x,ue.y,Fn.x,to+Fn.y,Ji.x+Ji.w,Ji.y,_,Gi,la.x,ki.y,Ii,eo),bn(Ut,ue.x,ue.y,ci.x,to+ci.y,Ji.x,Ji.y+Ji.h,_,Gi,ki.x,la.y,Ii,eo),bn(Ut,ue.x,ue.y,Si.x,to+Si.y,Ji.x+Ji.w,Ji.y+Ji.h,_,Gi,la.x,la.y,Ii,eo),Wn(h.dynamicLayoutVertexArray,ue,Mr),Lt.emplaceBack(za,za+1,za+2),Lt.emplaceBack(za+1,za+2,za+3),ur.vertexLength+=4,ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qi[0]),on!==v.length-1&&fo===v[on+1].sectionIndex||h.programConfigurations.populatePaintArrays(Ut.length,z,z.index,{},yt,Yr&&Yr[fo])}h.placedSymbolArray.emplaceBack(ue.x,ue.y,fr,this.glyphOffsetArray.length-fr,Dr,Ie,qe,ue.segment,_?_[0]:0,_?_[1]:0,R[0],R[1],X,0,!1,0,lt)},Nn.prototype._addCollisionDebugVertex=function(h,v,_,R,F,z){return v.emplaceBack(0,0),h.emplaceBack(_.x,_.y,R,F,Math.round(z.x),Math.round(z.y))},Nn.prototype.addCollisionDebugVertices=function(h,v,_,R,F,z,X){var ue=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),Ie=ue.vertexLength,qe=F.layoutVertexArray,lt=F.collisionVertexArray,yt=X.anchorX,Lt=X.anchorY;this._addCollisionDebugVertex(qe,lt,z,yt,Lt,new Q(h,v)),this._addCollisionDebugVertex(qe,lt,z,yt,Lt,new Q(_,v)),this._addCollisionDebugVertex(qe,lt,z,yt,Lt,new Q(_,R)),this._addCollisionDebugVertex(qe,lt,z,yt,Lt,new Q(h,R)),ue.vertexLength+=4;var Ut=F.indexArray;Ut.emplaceBack(Ie,Ie+1),Ut.emplaceBack(Ie+1,Ie+2),Ut.emplaceBack(Ie+2,Ie+3),Ut.emplaceBack(Ie+3,Ie),ue.primitiveLength+=4},Nn.prototype.addDebugCollisionBoxes=function(h,v,_,R){for(var F=h;F<v;F++){var z=this.collisionBoxArray.get(F);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,R?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,_)}},Nn.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xi(Sn,Hv.members,Cl),this.iconCollisionBox=new Xi(Sn,Hv.members,Cl);for(var h=0;h<this.symbolInstances.length;h++){var v=this.symbolInstances.get(h);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}},Nn.prototype._deserializeCollisionBoxesForSymbol=function(h,v,_,R,F,z,X,ue,Ie){for(var qe={},lt=v;lt<_;lt++){var yt=h.get(lt);qe.textBox={x1:yt.x1,y1:yt.y1,x2:yt.x2,y2:yt.y2,anchorPointX:yt.anchorPointX,anchorPointY:yt.anchorPointY},qe.textFeatureIndex=yt.featureIndex;break}for(var Lt=R;Lt<F;Lt++){var Ut=h.get(Lt);qe.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},qe.verticalTextFeatureIndex=Ut.featureIndex;break}for(var ur=z;ur<X;ur++){var fr=h.get(ur);qe.iconBox={x1:fr.x1,y1:fr.y1,x2:fr.x2,y2:fr.y2,anchorPointX:fr.anchorPointX,anchorPointY:fr.anchorPointY},qe.iconFeatureIndex=fr.featureIndex;break}for(var Dr=ue;Dr<Ie;Dr++){var Mr=h.get(Dr);qe.verticalIconBox={x1:Mr.x1,y1:Mr.y1,x2:Mr.x2,y2:Mr.y2,anchorPointX:Mr.anchorPointX,anchorPointY:Mr.anchorPointY},qe.verticalIconFeatureIndex=Mr.featureIndex;break}return qe},Nn.prototype.deserializeCollisionBoxes=function(h){this.collisionArrays=[];for(var v=0;v<this.symbolInstances.length;v++){var _=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(h,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}},Nn.prototype.hasTextData=function(){return this.text.segments.get().length>0},Nn.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Nn.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Nn.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Nn.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Nn.prototype.addIndicesForPlacedSymbol=function(h,v){for(var _=h.placedSymbolArray.get(v),R=_.vertexStartIndex+4*_.numGlyphs,F=_.vertexStartIndex;F<R;F+=4)h.indexArray.emplaceBack(F,F+1,F+2),h.indexArray.emplaceBack(F+1,F+2,F+3)},Nn.prototype.getSortedSymbolIndexes=function(h){if(this.sortedAngle===h&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var v=Math.sin(h),_=Math.cos(h),R=[],F=[],z=[],X=0;X<this.symbolInstances.length;++X){z.push(X);var ue=this.symbolInstances.get(X);R.push(0|Math.round(v*ue.anchorX+_*ue.anchorY)),F.push(ue.featureIndex)}return z.sort(function(Ie,qe){return R[Ie]-R[qe]||F[qe]-F[Ie]}),z},Nn.prototype.addToSortKeyRanges=function(h,v){var _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===v?_.symbolInstanceEnd=h+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:h,symbolInstanceEnd:h+1})},Nn.prototype.sortFeatures=function(h){var v=this;if(this.sortFeaturesByY&&this.sortedAngle!==h&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(h),this.sortedAngle=h,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var _=0,R=this.symbolInstanceIndexes;_<R.length;_+=1){var F=this.symbolInstances.get(R[_]);this.featureSortOrder.push(F.featureIndex),[F.rightJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.leftJustifiedTextSymbolIndex].forEach(function(z,X,ue){z>=0&&ue.indexOf(z)===X&&v.addIndicesForPlacedSymbol(v.text,z)}),F.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,F.verticalPlacedTextSymbolIndex),F.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.placedIconSymbolIndex),F.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ni("SymbolBucket",Nn,{omit:["layers","collisionBoxArray","features","compareText"]}),Nn.MAX_GLYPHS=65535,Nn.addDynamicAttributes=Wn;var Wi=new Cs({"symbol-placement":new Qi(At.layout_symbol["symbol-placement"]),"symbol-spacing":new Qi(At.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qi(At.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wi(At.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qi(At.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qi(At.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qi(At.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qi(At.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qi(At.layout_symbol["icon-rotation-alignment"]),"icon-size":new wi(At.layout_symbol["icon-size"]),"icon-text-fit":new Qi(At.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qi(At.layout_symbol["icon-text-fit-padding"]),"icon-image":new wi(At.layout_symbol["icon-image"]),"icon-rotate":new wi(At.layout_symbol["icon-rotate"]),"icon-padding":new Qi(At.layout_symbol["icon-padding"]),"icon-keep-upright":new Qi(At.layout_symbol["icon-keep-upright"]),"icon-offset":new wi(At.layout_symbol["icon-offset"]),"icon-anchor":new wi(At.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qi(At.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qi(At.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qi(At.layout_symbol["text-rotation-alignment"]),"text-field":new wi(At.layout_symbol["text-field"]),"text-font":new wi(At.layout_symbol["text-font"]),"text-size":new wi(At.layout_symbol["text-size"]),"text-max-width":new wi(At.layout_symbol["text-max-width"]),"text-line-height":new Qi(At.layout_symbol["text-line-height"]),"text-letter-spacing":new wi(At.layout_symbol["text-letter-spacing"]),"text-justify":new wi(At.layout_symbol["text-justify"]),"text-radial-offset":new wi(At.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qi(At.layout_symbol["text-variable-anchor"]),"text-anchor":new wi(At.layout_symbol["text-anchor"]),"text-max-angle":new Qi(At.layout_symbol["text-max-angle"]),"text-writing-mode":new Qi(At.layout_symbol["text-writing-mode"]),"text-rotate":new wi(At.layout_symbol["text-rotate"]),"text-padding":new Qi(At.layout_symbol["text-padding"]),"text-keep-upright":new Qi(At.layout_symbol["text-keep-upright"]),"text-transform":new wi(At.layout_symbol["text-transform"]),"text-offset":new wi(At.layout_symbol["text-offset"]),"text-allow-overlap":new Qi(At.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qi(At.layout_symbol["text-ignore-placement"]),"text-optional":new Qi(At.layout_symbol["text-optional"])}),ya={paint:new Cs({"icon-opacity":new wi(At.paint_symbol["icon-opacity"]),"icon-color":new wi(At.paint_symbol["icon-color"]),"icon-halo-color":new wi(At.paint_symbol["icon-halo-color"]),"icon-halo-width":new wi(At.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wi(At.paint_symbol["icon-halo-blur"]),"icon-translate":new Qi(At.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qi(At.paint_symbol["icon-translate-anchor"]),"text-opacity":new wi(At.paint_symbol["text-opacity"]),"text-color":new wi(At.paint_symbol["text-color"],{runtimeType:Kn,getOverride:function(h){return h.textColor},hasOverride:function(h){return!!h.textColor}}),"text-halo-color":new wi(At.paint_symbol["text-halo-color"]),"text-halo-width":new wi(At.paint_symbol["text-halo-width"]),"text-halo-blur":new wi(At.paint_symbol["text-halo-blur"]),"text-translate":new Qi(At.paint_symbol["text-translate"]),"text-translate-anchor":new Qi(At.paint_symbol["text-translate-anchor"])}),layout:Wi},Da=function(h){this.type=h.property.overrides?h.property.overrides.runtimeType:ri,this.defaultValue=h};Da.prototype.evaluate=function(h){if(h.formattedSection){var v=this.defaultValue.property.overrides;if(v&&v.hasOverride(h.formattedSection))return v.getOverride(h.formattedSection)}return h.feature&&h.featureState?this.defaultValue.evaluate(h.feature,h.featureState):this.defaultValue.property.specification.default},Da.prototype.eachChild=function(h){this.defaultValue.isConstant()||h(this.defaultValue.value._styleExpression.expression)},Da.prototype.outputDefined=function(){return!1},Da.prototype.serialize=function(){return null},Ni("FormatSectionOverride",Da,{omit:["defaultValue"]});var Bo=function(h){function v(_){h.call(this,_,ya)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){if(h.prototype.recalculate.call(this,_,R),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var F=this.layout.get("text-writing-mode");if(F){for(var z=[],X=0,ue=F;X<ue.length;X+=1){var Ie=ue[X];z.indexOf(Ie)<0&&z.push(Ie)}this.layout._values["text-writing-mode"]=z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},v.prototype.getValueAndResolveTokens=function(_,R,F,z){var X=this.layout.get(_).evaluate(R,{},F,z),ue=this._unevaluatedLayout._values[_];return ue.isDataDriven()||oh(ue.value)||!X?X:function(Ie,qe){return qe.replace(/{([^{}]+)}/g,function(lt,yt){return yt in Ie?String(Ie[yt]):""})}(R.properties,X)},v.prototype.createBucket=function(_){return new Nn(_)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype._setPaintOverrides=function(){for(var _=0,R=ya.paint.overridableProperties;_<R.length;_+=1){var F=R[_];if(v.hasPaintOverride(this.layout,F)){var z,X=this.paint.get(F),ue=new Da(X),Ie=new pf(ue,X.property.specification);z=X.value.kind==="constant"||X.value.kind==="source"?new If("source",Ie):new uh("composite",Ie,X.value.zoomStops,X.value._interpolationType),this.paint._values[F]=new Tu(X.property,z,X.parameters)}}},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,F){return!(!this.layout||R.isDataDriven()||F.isDataDriven())&&v.hasPaintOverride(this.layout,_)},v.hasPaintOverride=function(_,R){var F=_.get("text-field"),z=ya.paint.properties[R],X=!1,ue=function(lt){for(var yt=0,Lt=lt;yt<Lt.length;yt+=1)if(z.overrides&&z.overrides.hasOverride(Lt[yt]))return void(X=!0)};if(F.value.kind==="constant"&&F.value.value instanceof lo)ue(F.value.value.sections);else if(F.value.kind==="source"){var Ie=function(lt){X||(lt instanceof tn&&qt(lt.value)===Oa?ue(lt.value.sections):lt instanceof Ai?ue(lt.sections):lt.eachChild(Ie))},qe=F.value;qe._styleExpression&&Ie(qe._styleExpression.expression)}return X},v}(sc),Na={paint:new Cs({"background-color":new Qi(At.paint_background["background-color"]),"background-pattern":new rl(At.paint_background["background-pattern"]),"background-opacity":new Qi(At.paint_background["background-opacity"])})},Hl=function(h){function v(_){h.call(this,_,Na)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(sc),bg={paint:new Cs({"raster-opacity":new Qi(At.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qi(At.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qi(At.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qi(At.paint_raster["raster-brightness-max"]),"raster-saturation":new Qi(At.paint_raster["raster-saturation"]),"raster-contrast":new Qi(At.paint_raster["raster-contrast"]),"raster-resampling":new Qi(At.paint_raster["raster-resampling"]),"raster-fade-duration":new Qi(At.paint_raster["raster-fade-duration"])})},rf=function(h){function v(_){h.call(this,_,bg)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(sc),Sg=function(h){function v(_){h.call(this,_,{}),this.implementation=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},v.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},v.prototype.recalculate=function(){},v.prototype.updateTransitions=function(){},v.prototype.hasTransition=function(){},v.prototype.serialize=function(){},v.prototype.onAdd=function(_){this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},v.prototype.onRemove=function(_){this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},v}(sc),Hf={circle:Fv,heatmap:hc,hillshade:T0,fill:pm,"fill-extrusion":vm,line:_g,symbol:Bo,background:Hl,raster:rf},Eg=te.HTMLImageElement,wg=te.HTMLCanvasElement,xx=te.HTMLVideoElement,mm=te.ImageData,Bp=te.ImageBitmap,vd=function(h,v,_,R){this.context=h,this.format=_,this.texture=h.gl.createTexture(),this.update(v,R)};vd.prototype.update=function(h,v,_){var R=h.width,F=h.height,z=!(this.size&&this.size[0]===R&&this.size[1]===F||_),X=this.context,ue=X.gl;if(this.useMipmap=!!(v&&v.useMipmap),ue.bindTexture(ue.TEXTURE_2D,this.texture),X.pixelStoreUnpackFlipY.set(!1),X.pixelStoreUnpack.set(1),X.pixelStoreUnpackPremultiplyAlpha.set(this.format===ue.RGBA&&(!v||v.premultiply!==!1)),z)this.size=[R,F],h instanceof Eg||h instanceof wg||h instanceof xx||h instanceof mm||Bp&&h instanceof Bp?ue.texImage2D(ue.TEXTURE_2D,0,this.format,this.format,ue.UNSIGNED_BYTE,h):ue.texImage2D(ue.TEXTURE_2D,0,this.format,R,F,0,this.format,ue.UNSIGNED_BYTE,h.data);else{var Ie=_||{x:0,y:0},qe=Ie.x,lt=Ie.y;h instanceof Eg||h instanceof wg||h instanceof xx||h instanceof mm||Bp&&h instanceof Bp?ue.texSubImage2D(ue.TEXTURE_2D,0,qe,lt,ue.RGBA,ue.UNSIGNED_BYTE,h):ue.texSubImage2D(ue.TEXTURE_2D,0,qe,lt,R,F,ue.RGBA,ue.UNSIGNED_BYTE,h.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ue.generateMipmap(ue.TEXTURE_2D)},vd.prototype.bind=function(h,v,_){var R=this.context.gl;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),h!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,h),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||h),this.filter=h),v!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,v),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,v),this.wrap=v)},vd.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},vd.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ym=function(h){var v=this;this._callback=h,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){v._triggered=!1,v._callback()})};ym.prototype.trigger=function(){var h=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){h._triggered=!1,h._callback()},0))},ym.prototype.remove=function(){delete this._channel,this._callback=function(){}};var qd=function(h,v,_){this.target=h,this.parent=v,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ue(["receive","process"],this),this.invoker=new ym(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Oe()?h:te};function _m(h,v,_){var R=2*Math.PI*6378137/256/Math.pow(2,_);return[h*R-2*Math.PI*6378137/2,v*R-2*Math.PI*6378137/2]}qd.prototype.send=function(h,v,_,R,F){var z=this;F===void 0&&(F=!1);var X=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[X]=_);var ue=We(this.globalScope)?void 0:[];return this.target.postMessage({id:X,type:h,hasCallback:!!_,targetMapId:R,mustQueue:F,sourceMapId:this.mapId,data:cl(v,ue)},ue),{cancel:function(){_&&delete z.callbacks[X],z.target.postMessage({id:X,type:"<cancel>",targetMapId:R,sourceMapId:z.mapId})}}},qd.prototype.receive=function(h){var v=h.data,_=v.id;if(_&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[_];var R=this.cancelCallbacks[_];delete this.cancelCallbacks[_],R&&R()}else Oe()||v.mustQueue?(this.tasks[_]=v,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,v)},qd.prototype.process=function(){if(this.taskQueue.length){var h=this.taskQueue.shift(),v=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(h,v)}},qd.prototype.processTask=function(h,v){var _=this;if(v.type==="<response>"){var R=this.callbacks[h];delete this.callbacks[h],R&&(v.error?R(Zo(v.error)):R(null,Zo(v.data)))}else{var F=!1,z=We(this.globalScope)?void 0:[],X=v.hasCallback?function(lt,yt){F=!0,delete _.cancelCallbacks[h],_.target.postMessage({id:h,type:"<response>",sourceMapId:_.mapId,error:lt?cl(lt):null,data:cl(yt,z)},z)}:function(lt){F=!0},ue=null,Ie=Zo(v.data);if(this.parent[v.type])ue=this.parent[v.type](v.sourceMapId,Ie,X);else if(this.parent.getWorkerSource){var qe=v.type.split(".");ue=this.parent.getWorkerSource(v.sourceMapId,qe[0],Ie.source)[qe[1]](Ie,X)}else X(new Error("Could not find function "+v.type));!F&&ue&&ue.cancel&&(this.cancelCallbacks[h]=ue.cancel)}},qd.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var zu=function(h,v){h&&(v?this.setSouthWest(h).setNorthEast(v):h.length===4?this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]]):this.setSouthWest(h[0]).setNorthEast(h[1]))};zu.prototype.setNorthEast=function(h){return this._ne=h instanceof Bs?new Bs(h.lng,h.lat):Bs.convert(h),this},zu.prototype.setSouthWest=function(h){return this._sw=h instanceof Bs?new Bs(h.lng,h.lat):Bs.convert(h),this},zu.prototype.extend=function(h){var v,_,R=this._sw,F=this._ne;if(h instanceof Bs)v=h,_=h;else{if(!(h instanceof zu))return Array.isArray(h)?h.length===4||h.every(Array.isArray)?this.extend(zu.convert(h)):this.extend(Bs.convert(h)):this;if(_=h._ne,!(v=h._sw)||!_)return this}return R||F?(R.lng=Math.min(v.lng,R.lng),R.lat=Math.min(v.lat,R.lat),F.lng=Math.max(_.lng,F.lng),F.lat=Math.max(_.lat,F.lat)):(this._sw=new Bs(v.lng,v.lat),this._ne=new Bs(_.lng,_.lat)),this},zu.prototype.getCenter=function(){return new Bs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},zu.prototype.getSouthWest=function(){return this._sw},zu.prototype.getNorthEast=function(){return this._ne},zu.prototype.getNorthWest=function(){return new Bs(this.getWest(),this.getNorth())},zu.prototype.getSouthEast=function(){return new Bs(this.getEast(),this.getSouth())},zu.prototype.getWest=function(){return this._sw.lng},zu.prototype.getSouth=function(){return this._sw.lat},zu.prototype.getEast=function(){return this._ne.lng},zu.prototype.getNorth=function(){return this._ne.lat},zu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},zu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},zu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},zu.prototype.contains=function(h){var v=Bs.convert(h),_=v.lng,R=v.lat,F=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(F=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=R&&R<=this._ne.lat&&F},zu.convert=function(h){return!h||h instanceof zu?h:new zu(h)};var Bs=function(h,v){if(isNaN(h)||isNaN(v))throw new Error("Invalid LngLat object: ("+h+", "+v+")");if(this.lng=+h,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Bs.prototype.wrap=function(){return new Bs(M(this.lng,-180,180),this.lat)},Bs.prototype.toArray=function(){return[this.lng,this.lat]},Bs.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Bs.prototype.distanceTo=function(h){var v=Math.PI/180,_=this.lat*v,R=h.lat*v,F=Math.sin(_)*Math.sin(R)+Math.cos(_)*Math.cos(R)*Math.cos((h.lng-this.lng)*v);return 63710088e-1*Math.acos(Math.min(F,1))},Bs.prototype.toBounds=function(h){h===void 0&&(h=0);var v=360*h/40075017,_=v/Math.cos(Math.PI/180*this.lat);return new zu(new Bs(this.lng-_,this.lat-v),new Bs(this.lng+_,this.lat+v))},Bs.convert=function(h){if(h instanceof Bs)return h;if(Array.isArray(h)&&(h.length===2||h.length===3))return new Bs(Number(h[0]),Number(h[1]));if(!Array.isArray(h)&&typeof h=="object"&&h!==null)return new Bs(Number("lng"in h?h.lng:h.lon),Number(h.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var r_=2*Math.PI*63710088e-1;function xm(h){return r_*Math.cos(h*Math.PI/180)}function jv(h){return(180+h)/360}function n_(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function ts(h,v){return h/xm(v)}function Js(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}var Jh=function(h,v,_){_===void 0&&(_=0),this.x=+h,this.y=+v,this.z=+_};Jh.fromLngLat=function(h,v){v===void 0&&(v=0);var _=Bs.convert(h);return new Jh(jv(_.lng),n_(_.lat),ts(v,_.lat))},Jh.prototype.toLngLat=function(){return new Bs(360*this.x-180,Js(this.y))},Jh.prototype.toAltitude=function(){return this.z*xm(Js(this.y))},Jh.prototype.meterInMercatorCoordinateUnits=function(){return 1/r_*(h=Js(this.y),1/Math.cos(h*Math.PI/180));var h};var gd=function(h,v,_){this.z=h,this.x=v,this.y=_,this.key=Wv(0,h,h,v,_)};gd.prototype.equals=function(h){return this.z===h.z&&this.x===h.x&&this.y===h.y},gd.prototype.url=function(h,v){var _,R,F,z,X,ue=(R=this.y,F=this.z,z=_m(256*(_=this.x),256*(R=Math.pow(2,F)-R-1),F),X=_m(256*(_+1),256*(R+1),F),z[0]+","+z[1]+","+X[0]+","+X[1]),Ie=function(qe,lt,yt){for(var Lt,Ut="",ur=qe;ur>0;ur--)Ut+=(lt&(Lt=1<<ur-1)?1:0)+(yt&Lt?2:0);return Ut}(this.z,this.x,this.y);return h[(this.x+this.y)%h.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Ie).replace("{bbox-epsg-3857}",ue)},gd.prototype.getTilePoint=function(h){var v=Math.pow(2,this.z);return new Q(8192*(h.x*v-this.x),8192*(h.y*v-this.y))},gd.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Cg=function(h,v){this.wrap=h,this.canonical=v,this.key=Wv(h,v.z,v.z,v.x,v.y)},Uu=function(h,v,_,R,F){this.overscaledZ=h,this.wrap=v,this.canonical=new gd(_,+R,+F),this.key=Wv(v,h,_,R,F)};function Wv(h,v,_,R,F){(h*=2)<0&&(h=-1*h-1);var z=1<<_;return(z*z*h+z*F+R).toString(36)+_.toString(36)+v.toString(36)}Uu.prototype.equals=function(h){return this.overscaledZ===h.overscaledZ&&this.wrap===h.wrap&&this.canonical.equals(h.canonical)},Uu.prototype.scaledTo=function(h){var v=this.canonical.z-h;return h>this.canonical.z?new Uu(h,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uu(h,this.wrap,h,this.canonical.x>>v,this.canonical.y>>v)},Uu.prototype.calculateScaledKey=function(h,v){var _=this.canonical.z-h;return h>this.canonical.z?Wv(this.wrap*+v,h,this.canonical.z,this.canonical.x,this.canonical.y):Wv(this.wrap*+v,h,h,this.canonical.x>>_,this.canonical.y>>_)},Uu.prototype.isChildOf=function(h){if(h.wrap!==this.wrap)return!1;var v=this.canonical.z-h.canonical.z;return h.overscaledZ===0||h.overscaledZ<this.overscaledZ&&h.canonical.x===this.canonical.x>>v&&h.canonical.y===this.canonical.y>>v},Uu.prototype.children=function(h){if(this.overscaledZ>=h)return[new Uu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var v=this.canonical.z+1,_=2*this.canonical.x,R=2*this.canonical.y;return[new Uu(v,this.wrap,v,_,R),new Uu(v,this.wrap,v,_+1,R),new Uu(v,this.wrap,v,_,R+1),new Uu(v,this.wrap,v,_+1,R+1)]},Uu.prototype.isLessThan=function(h){return this.wrap<h.wrap||!(this.wrap>h.wrap)&&(this.overscaledZ<h.overscaledZ||!(this.overscaledZ>h.overscaledZ)&&(this.canonical.x<h.canonical.x||!(this.canonical.x>h.canonical.x)&&this.canonical.y<h.canonical.y))},Uu.prototype.wrapped=function(){return new Uu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Uu.prototype.unwrapTo=function(h){return new Uu(this.overscaledZ,h,this.canonical.z,this.canonical.x,this.canonical.y)},Uu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Uu.prototype.toUnwrapped=function(){return new Cg(this.wrap,this.canonical)},Uu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Uu.prototype.getTilePoint=function(h){return this.canonical.getTilePoint(new Jh(h.x-this.wrap,h.y))},Ni("CanonicalTileID",gd),Ni("OverscaledTileID",Uu,{omit:["posMatrix"]});var bh=function(h,v,_){if(this.uid=h,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(_&&_!=="mapbox"&&_!=="terrarium")return Ve('"'+_+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=v.height;var R=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=_||"mapbox";for(var F=0;F<R;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(R,F)]=this.data[this._idx(R-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,R)]=this.data[this._idx(F,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)]};bh.prototype.get=function(h,v){var _=new Uint8Array(this.data.buffer),R=4*this._idx(h,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(_[R],_[R+1],_[R+2])},bh.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},bh.prototype._idx=function(h,v){if(h<-1||h>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(h+1)},bh.prototype._unpackMapbox=function(h,v,_){return(256*h*256+256*v+_)/10-1e4},bh.prototype._unpackTerrarium=function(h,v,_){return 256*h+v+_/256-32768},bh.prototype.getPixels=function(){return new Ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},bh.prototype.backfillBorder=function(h,v,_){if(this.dim!==h.dim)throw new Error("dem dimension mismatch");var R=v*this.dim,F=v*this.dim+this.dim,z=_*this.dim,X=_*this.dim+this.dim;switch(v){case-1:R=F-1;break;case 1:F=R+1}switch(_){case-1:z=X-1;break;case 1:X=z+1}for(var ue=-v*this.dim,Ie=-_*this.dim,qe=z;qe<X;qe++)for(var lt=R;lt<F;lt++)this.data[this._idx(lt,qe)]=h.data[this._idx(lt+ue,qe+Ie)]},Ni("DEMData",bh);var Sh=function(h){this._stringToNumber={},this._numberToString=[];for(var v=0;v<h.length;v++){var _=h[v];this._stringToNumber[_]=v,this._numberToString[v]=_}};Sh.prototype.encode=function(h){return this._stringToNumber[h]},Sh.prototype.decode=function(h){return this._numberToString[h]};var ep=function(h,v,_,R,F){this.type="Feature",this._vectorTileFeature=h,h._z=v,h._x=_,h._y=R,this.properties=h.properties,this.id=F},i_={geometry:{configurable:!0}};i_.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i_.geometry.set=function(h){this._geometry=h},ep.prototype.toJSON=function(){var h={geometry:this.geometry};for(var v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(h[v]=this[v]);return h},Object.defineProperties(ep.prototype,i_);var vl=function(){this.state={},this.stateChanges={},this.deletedStates={}};vl.prototype.updateState=function(h,v,_){var R=String(v);if(this.stateChanges[h]=this.stateChanges[h]||{},this.stateChanges[h][R]=this.stateChanges[h][R]||{},E(this.stateChanges[h][R],_),this.deletedStates[h]===null)for(var F in this.deletedStates[h]={},this.state[h])F!==R&&(this.deletedStates[h][F]=null);else if(this.deletedStates[h]&&this.deletedStates[h][R]===null)for(var z in this.deletedStates[h][R]={},this.state[h][R])_[z]||(this.deletedStates[h][R][z]=null);else for(var X in _)this.deletedStates[h]&&this.deletedStates[h][R]&&this.deletedStates[h][R][X]===null&&delete this.deletedStates[h][R][X]},vl.prototype.removeFeatureState=function(h,v,_){if(this.deletedStates[h]!==null){var R=String(v);if(this.deletedStates[h]=this.deletedStates[h]||{},_&&v!==void 0)this.deletedStates[h][R]!==null&&(this.deletedStates[h][R]=this.deletedStates[h][R]||{},this.deletedStates[h][R][_]=null);else if(v!==void 0)if(this.stateChanges[h]&&this.stateChanges[h][R])for(_ in this.deletedStates[h][R]={},this.stateChanges[h][R])this.deletedStates[h][R][_]=null;else this.deletedStates[h][R]=null;else this.deletedStates[h]=null}},vl.prototype.getState=function(h,v){var _=String(v),R=E({},(this.state[h]||{})[_],(this.stateChanges[h]||{})[_]);if(this.deletedStates[h]===null)return{};if(this.deletedStates[h]){var F=this.deletedStates[h][v];if(F===null)return{};for(var z in F)delete R[z]}return R},vl.prototype.initializeTileState=function(h,v){h.setFeatureState(this.state,v)},vl.prototype.coalesceChanges=function(h,v){var _={};for(var R in this.stateChanges){this.state[R]=this.state[R]||{};var F={};for(var z in this.stateChanges[R])this.state[R][z]||(this.state[R][z]={}),E(this.state[R][z],this.stateChanges[R][z]),F[z]=this.state[R][z];_[R]=F}for(var X in this.deletedStates){this.state[X]=this.state[X]||{};var ue={};if(this.deletedStates[X]===null)for(var Ie in this.state[X])ue[Ie]={},this.state[X][Ie]={};else for(var qe in this.deletedStates[X]){if(this.deletedStates[X][qe]===null)this.state[X][qe]={};else for(var lt=0,yt=Object.keys(this.deletedStates[X][qe]);lt<yt.length;lt+=1)delete this.state[X][qe][yt[lt]];ue[qe]=this.state[X][qe]}_[X]=_[X]||{},E(_[X],ue)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(var Lt in h)h[Lt].setFeatureState(_,v)};var Pu=function(h,v){this.tileID=h,this.x=h.canonical.x,this.y=h.canonical.y,this.z=h.canonical.z,this.grid=new $s(8192,16,0),this.grid3D=new $s(8192,16,0),this.featureIndexArray=new bt,this.promoteId=v};function dc(h,v,_,R,F){return ht(h,function(z,X){var ue=v instanceof Wh?v.get(X):null;return ue&&ue.evaluate?ue.evaluate(_,R,F):ue})}function a_(h){for(var v=1/0,_=1/0,R=-1/0,F=-1/0,z=0,X=h;z<X.length;z+=1){var ue=X[z];v=Math.min(v,ue.x),_=Math.min(_,ue.y),R=Math.max(R,ue.x),F=Math.max(F,ue.y)}return{minX:v,minY:_,maxX:R,maxY:F}}function Np(h,v){return v-h}Pu.prototype.insert=function(h,v,_,R,F,z){var X=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,R,F);for(var ue=z?this.grid3D:this.grid,Ie=0;Ie<v.length;Ie++){for(var qe=v[Ie],lt=[1/0,1/0,-1/0,-1/0],yt=0;yt<qe.length;yt++){var Lt=qe[yt];lt[0]=Math.min(lt[0],Lt.x),lt[1]=Math.min(lt[1],Lt.y),lt[2]=Math.max(lt[2],Lt.x),lt[3]=Math.max(lt[3],Lt.y)}lt[0]<8192&&lt[1]<8192&&lt[2]>=0&&lt[3]>=0&&ue.insert(X,lt[0],lt[1],lt[2],lt[3])}},Pu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Dp.VectorTile(new fn(this.rawTileData)).layers,this.sourceLayerCoder=new Sh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Pu.prototype.query=function(h,v,_,R){var F=this;this.loadVTLayers();for(var z=h.params||{},X=8192/h.tileSize/h.scale,ue=Pf(z.filter),Ie=h.queryGeometry,qe=h.queryPadding*X,lt=a_(Ie),yt=this.grid.query(lt.minX-qe,lt.minY-qe,lt.maxX+qe,lt.maxY+qe),Lt=a_(h.cameraQueryGeometry),Ut=this.grid3D.query(Lt.minX-qe,Lt.minY-qe,Lt.maxX+qe,Lt.maxY+qe,function(vn,wn,Fn,ci){return function(Si,Ji,ki,la,Ii){for(var eo=0,qi=Si;eo<qi.length;eo+=1){var Gi=qi[eo];if(Ji<=Gi.x&&ki<=Gi.y&&la>=Gi.x&&Ii>=Gi.y)return!0}var fo=[new Q(Ji,ki),new Q(Ji,Ii),new Q(la,Ii),new Q(la,ki)];if(Si.length>2){for(var za=0,to=fo;za<to.length;za+=1)if(fc(Si,to[za]))return!0}for(var mi=0;mi<Si.length-1;mi++)if(mf(Si[mi],Si[mi+1],fo))return!0;return!1}(h.cameraQueryGeometry,vn-qe,wn-qe,Fn+qe,ci+qe)}),ur=0,fr=Ut;ur<fr.length;ur+=1)yt.push(fr[ur]);yt.sort(Np);for(var Dr,Mr={},Yr=function(vn){var wn=yt[vn];if(wn!==Dr){Dr=wn;var Fn=F.featureIndexArray.get(wn),ci=null;F.loadMatchingFeature(Mr,Fn.bucketIndex,Fn.sourceLayerIndex,Fn.featureIndex,ue,z.layers,z.availableImages,v,_,R,function(Si,Ji,ki){return ci||(ci=es(Si)),Ji.queryIntersectsFeature(Ie,Si,ki,ci,F.z,h.transform,X,h.pixelPosMatrix)})}},on=0;on<yt.length;on++)Yr(on);return Mr},Pu.prototype.loadMatchingFeature=function(h,v,_,R,F,z,X,ue,Ie,qe,lt){var yt=this.bucketLayerIDs[v];if(!z||function(Si,Ji){for(var ki=0;ki<Si.length;ki++)if(Ji.indexOf(Si[ki])>=0)return!0;return!1}(z,yt)){var Lt=this.sourceLayerCoder.decode(_),Ut=this.vtLayers[Lt].feature(R);if(F.needGeometry){var ur=ys(Ut,!0);if(!F.filter(new ja(this.tileID.overscaledZ),ur,this.tileID.canonical))return}else if(!F.filter(new ja(this.tileID.overscaledZ),Ut))return;for(var fr=this.getId(Ut,Lt),Dr=0;Dr<yt.length;Dr++){var Mr=yt[Dr];if(!(z&&z.indexOf(Mr)<0)){var Yr=ue[Mr];if(Yr){var on={};fr!==void 0&&qe&&(on=qe.getState(Yr.sourceLayer||"_geojsonTileLayer",fr));var vn=E({},Ie[Mr]);vn.paint=dc(vn.paint,Yr.paint,Ut,on,X),vn.layout=dc(vn.layout,Yr.layout,Ut,on,X);var wn=!lt||lt(Ut,Yr,on);if(wn){var Fn=new ep(Ut,this.z,this.x,this.y,fr);Fn.layer=vn;var ci=h[Mr];ci===void 0&&(ci=h[Mr]=[]),ci.push({featureIndex:R,feature:Fn,intersectionZ:wn})}}}}}},Pu.prototype.lookupSymbolFeatures=function(h,v,_,R,F,z,X,ue){var Ie={};this.loadVTLayers();for(var qe=Pf(F),lt=0,yt=h;lt<yt.length;lt+=1)this.loadMatchingFeature(Ie,_,R,yt[lt],qe,z,X,ue,v);return Ie},Pu.prototype.hasLayer=function(h){for(var v=0,_=this.bucketLayerIDs;v<_.length;v+=1)for(var R=0,F=_[v];R<F.length;R+=1)if(h===F[R])return!0;return!1},Pu.prototype.getId=function(h,v){var _=h.id;return this.promoteId&&typeof(_=h.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]])=="boolean"&&(_=Number(_)),_},Ni("FeatureIndex",Pu,{omit:["rawTileData","sourceLayerCoder"]});var Ya=function(h,v){this.tileID=h,this.uid=be(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ya.prototype.registerFadeDuration=function(h){var v=h+this.timeAdded;v<Ge.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)},Ya.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ya.prototype.loadVectorData=function(h,v,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",h){for(var R in h.featureIndex&&(this.latestFeatureIndex=h.featureIndex,h.rawTileData?(this.latestRawTileData=h.rawTileData,this.latestFeatureIndex.rawTileData=h.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=h.collisionBoxArray,this.buckets=function(qe,lt){var yt={};if(!lt)return yt;for(var Lt=function(){var fr=ur[Ut],Dr=fr.layerIds.map(function(on){return lt.getLayer(on)}).filter(Boolean);if(Dr.length!==0){fr.layers=Dr,fr.stateDependentLayerIds&&(fr.stateDependentLayers=fr.stateDependentLayerIds.map(function(on){return Dr.filter(function(vn){return vn.id===on})[0]}));for(var Mr=0,Yr=Dr;Mr<Yr.length;Mr+=1)yt[Yr[Mr].id]=fr}},Ut=0,ur=qe;Ut<ur.length;Ut+=1)Lt();return yt}(h.buckets,v.style),this.hasSymbolBuckets=!1,this.buckets){var F=this.buckets[R];if(F instanceof Nn){if(this.hasSymbolBuckets=!0,!_)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var z in this.buckets){var X=this.buckets[z];if(X instanceof Nn&&X.hasRTLText){this.hasRTLText=!0,au.isLoading()||au.isLoaded()||Hd()!=="deferred"||oc();break}}for(var ue in this.queryPadding=0,this.buckets){var Ie=this.buckets[ue];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(ue).queryRadius(Ie))}h.imageAtlas&&(this.imageAtlas=h.imageAtlas),h.glyphAtlasImage&&(this.glyphAtlasImage=h.glyphAtlasImage)}else this.collisionBoxArray=new A},Ya.prototype.unloadVectorData=function(){for(var h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ya.prototype.getBucket=function(h){return this.buckets[h.id]},Ya.prototype.upload=function(h){for(var v in this.buckets){var _=this.buckets[v];_.uploadPending()&&_.upload(h)}var R=h.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vd(h,this.imageAtlas.image,R.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vd(h,this.glyphAtlasImage,R.ALPHA),this.glyphAtlasImage=null)},Ya.prototype.prepare=function(h){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(h,this.imageAtlasTexture)},Ya.prototype.queryRenderedFeatures=function(h,v,_,R,F,z,X,ue,Ie,qe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:R,cameraQueryGeometry:F,scale:z,tileSize:this.tileSize,pixelPosMatrix:qe,transform:ue,params:X,queryPadding:this.queryPadding*Ie},h,v,_):{}},Ya.prototype.querySourceFeatures=function(h,v){var _=this.latestFeatureIndex;if(_&&_.rawTileData){var R=_.loadVTLayers(),F=v?v.sourceLayer:"",z=R._geojsonTileLayer||R[F];if(z)for(var X=Pf(v&&v.filter),ue=this.tileID.canonical,Ie=ue.z,qe=ue.x,lt=ue.y,yt={z:Ie,x:qe,y:lt},Lt=0;Lt<z.length;Lt++){var Ut=z.feature(Lt);if(X.needGeometry){var ur=ys(Ut,!0);if(!X.filter(new ja(this.tileID.overscaledZ),ur,this.tileID.canonical))continue}else if(!X.filter(new ja(this.tileID.overscaledZ),Ut))continue;var fr=_.getId(Ut,F),Dr=new ep(Ut,Ie,qe,lt,fr);Dr.tile=yt,h.push(Dr)}}},Ya.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ya.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ya.prototype.setExpiryData=function(h){var v=this.expirationTime;if(h.cacheControl){var _=Qe(h.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else h.expires&&(this.expirationTime=new Date(h.expires).getTime());if(this.expirationTime){var R=Date.now(),F=!1;if(this.expirationTime>R)F=!1;else if(v)if(this.expirationTime<v)F=!0;else{var z=this.expirationTime-v;z?this.expirationTime=R+Math.max(z,3e4):F=!0}else F=!0;F?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ya.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ya.prototype.setFeatureState=function(h,v){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(h).length!==0){var _=this.latestFeatureIndex.loadVTLayers();for(var R in this.buckets)if(v.style.hasLayer(R)){var F=this.buckets[R],z=F.layers[0].sourceLayer||"_geojsonTileLayer",X=_[z],ue=h[z];if(X&&ue&&Object.keys(ue).length!==0){F.update(ue,X,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Ie=v&&v.style&&v.style.getLayer(R);Ie&&(this.queryPadding=Math.max(this.queryPadding,Ie.queryRadius(F)))}}}},Ya.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ya.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ge.now()},Ya.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ya.prototype.setHoldDuration=function(h){this.symbolFadeHoldUntil=Ge.now()+h},Ya.prototype.setDependencies=function(h,v){for(var _={},R=0,F=v;R<F.length;R+=1)_[F[R]]=!0;this.dependencies[h]=_},Ya.prototype.hasDependency=function(h,v){for(var _=0,R=h;_<R.length;_+=1){var F=this.dependencies[R[_]];if(F){for(var z=0,X=v;z<X.length;z+=1)if(F[X[z]])return!0}}return!1};var kc=te.performance,D0=function(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},kc.mark(this._marks.start)};D0.prototype.finish=function(){kc.mark(this._marks.end);var h=kc.getEntriesByName(this._marks.measure);return h.length===0&&(kc.measure(this._marks.measure,this._marks.start,this._marks.end),h=kc.getEntriesByName(this._marks.measure),kc.clearMarks(this._marks.start),kc.clearMarks(this._marks.end),kc.clearMeasures(this._marks.measure)),h},w.Actor=qd,w.AlphaImage=Uf,w.CanonicalTileID=gd,w.CollisionBoxArray=A,w.Color=ea,w.DEMData=bh,w.DataConstantProperty=Qi,w.DictionaryCoder=Sh,w.EXTENT=8192,w.ErrorEvent=Gt,w.EvaluationParameters=ja,w.Event=St,w.Evented=gr,w.FeatureIndex=Pu,w.FillBucket=ef,w.FillExtrusionBucket=Fu,w.ImageAtlas=Dn,w.ImagePosition=Ti,w.LineBucket=dl,w.LngLat=Bs,w.LngLatBounds=zu,w.MercatorCoordinate=Jh,w.ONE_EM=24,w.OverscaledTileID=Uu,w.Point=Q,w.Point$1=Q,w.Properties=Cs,w.Protobuf=fn,w.RGBAImage=Ml,w.RequestManager=Ye,w.RequestPerformance=D0,w.ResourceType=re,w.SegmentVector=Wt,w.SourceFeatureState=vl,w.StructArrayLayout1ui2=Ap,w.StructArrayLayout2f1f2i16=wr,w.StructArrayLayout2i4=vh,w.StructArrayLayout3ui6=qc,w.StructArrayLayout4i8=Ff,w.SymbolBucket=Nn,w.Texture=vd,w.Tile=Ya,w.Transitionable=Wu,w.Uniform1f=pi,w.Uniform1i=Ln,w.Uniform2f=oi,w.Uniform3f=Pi,w.Uniform4f=ta,w.UniformColor=sa,w.UniformMatrix4f=_o,w.UnwrappedTileID=Cg,w.ValidationError=ot,w.WritingMode=ra,w.ZoomHistory=Ds,w.add=function(h,v,_){return h[0]=v[0]+_[0],h[1]=v[1]+_[1],h[2]=v[2]+_[2],h},w.addDynamicAttributes=Wn,w.asyncAll=function(h,v,_){if(!h.length)return _(null,[]);var R=h.length,F=new Array(h.length),z=null;h.forEach(function(X,ue){v(X,function(Ie,qe){Ie&&(z=Ie),F[ue]=qe,--R==0&&_(z,F)})})},w.bezier=fe,w.bindAll=Ue,w.browser=Ge,w.cacheEntryPossiblyAdded=function(h){++le>Sr&&(h.getActor().send("enforceCacheSizeLimit",Qt),le=0)},w.clamp=J,w.clearTileCache=function(h){var v=te.caches.delete("mapbox-tiles");h&&v.catch(h).then(function(){return h()})},w.clipLine=yu,w.clone=function(h){var v=new go(16);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v[3]=h[3],v[4]=h[4],v[5]=h[5],v[6]=h[6],v[7]=h[7],v[8]=h[8],v[9]=h[9],v[10]=h[10],v[11]=h[11],v[12]=h[12],v[13]=h[13],v[14]=h[14],v[15]=h[15],v},w.clone$1=Se,w.clone$2=function(h){var v=new go(3);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v},w.collisionCircleLayout=nt,w.config=Ze,w.create=function(){var h=new go(16);return go!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},w.create$1=function(){var h=new go(9);return go!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h},w.create$2=function(){var h=new go(4);return go!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h},w.createCommonjsModule=W,w.createExpression=sh,w.createLayout=Xs,w.createStyleLayer=function(h){return h.type==="custom"?new Sg(h):new Hf[h.type](h)},w.cross=function(h,v,_){var R=v[0],F=v[1],z=v[2],X=_[0],ue=_[1],Ie=_[2];return h[0]=F*Ie-z*ue,h[1]=z*X-R*Ie,h[2]=R*ue-F*X,h},w.deepEqual=function h(v,_){if(Array.isArray(v)){if(!Array.isArray(_)||v.length!==_.length)return!1;for(var R=0;R<v.length;R++)if(!h(v[R],_[R]))return!1;return!0}if(typeof v=="object"&&v!==null&&_!==null){if(typeof _!="object"||Object.keys(v).length!==Object.keys(_).length)return!1;for(var F in v)if(!h(v[F],_[F]))return!1;return!0}return v===_},w.dot=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]},w.dot$1=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]+h[3]*v[3]},w.ease=ce,w.emitValidationErrors=Xc,w.endsWith=it,w.enforceCacheSizeLimit=function(h){Er(),nn&&nn.then(function(v){v.keys().then(function(_){for(var R=0;R<_.length-h;R++)v.delete(_[R])})})},w.evaluateSizeForFeature=Nu,w.evaluateSizeForZoom=As,w.evaluateVariableOffset=Br,w.evented=jh,w.extend=E,w.featureFilter=Pf,w.filterObject=Le,w.fromRotation=function(h,v){var _=Math.sin(v),R=Math.cos(v);return h[0]=R,h[1]=_,h[2]=0,h[3]=-_,h[4]=R,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},w.getAnchorAlignment=Vo,w.getAnchorJustification=jr,w.getArrayBuffer=wt,w.getImage=pe,w.getJSON=function(h,v){return jt(E(h,{type:"json"}),v)},w.getRTLTextPluginStatus=Hd,w.getReferrer=Ke,w.getVideo=function(h,v){var _,R,F=te.document.createElement("video");F.muted=!0,F.onloadstart=function(){v(null,F)};for(var z=0;z<h.length;z++){var X=te.document.createElement("source");_=h[z],R=void 0,(R=te.document.createElement("a")).href=_,(R.protocol!==te.document.location.protocol||R.host!==te.document.location.host)&&(F.crossOrigin="Anonymous"),X.src=h[z],F.appendChild(X)}return{cancel:function(){}}},w.identity=Xu,w.invert=function(h,v){var _=v[0],R=v[1],F=v[2],z=v[3],X=v[4],ue=v[5],Ie=v[6],qe=v[7],lt=v[8],yt=v[9],Lt=v[10],Ut=v[11],ur=v[12],fr=v[13],Dr=v[14],Mr=v[15],Yr=_*ue-R*X,on=_*Ie-F*X,vn=_*qe-z*X,wn=R*Ie-F*ue,Fn=R*qe-z*ue,ci=F*qe-z*Ie,Si=lt*fr-yt*ur,Ji=lt*Dr-Lt*ur,ki=lt*Mr-Ut*ur,la=yt*Dr-Lt*fr,Ii=yt*Mr-Ut*fr,eo=Lt*Mr-Ut*Dr,qi=Yr*eo-on*Ii+vn*la+wn*ki-Fn*Ji+ci*Si;return qi?(h[0]=(ue*eo-Ie*Ii+qe*la)*(qi=1/qi),h[1]=(F*Ii-R*eo-z*la)*qi,h[2]=(fr*ci-Dr*Fn+Mr*wn)*qi,h[3]=(Lt*Fn-yt*ci-Ut*wn)*qi,h[4]=(Ie*ki-X*eo-qe*Ji)*qi,h[5]=(_*eo-F*ki+z*Ji)*qi,h[6]=(Dr*vn-ur*ci-Mr*on)*qi,h[7]=(lt*ci-Lt*vn+Ut*on)*qi,h[8]=(X*Ii-ue*ki+qe*Si)*qi,h[9]=(R*ki-_*Ii-z*Si)*qi,h[10]=(ur*Fn-fr*vn+Mr*Yr)*qi,h[11]=(yt*vn-lt*Fn-Ut*Yr)*qi,h[12]=(ue*Ji-X*la-Ie*Si)*qi,h[13]=(_*la-R*Ji+F*Si)*qi,h[14]=(fr*on-ur*wn-Dr*Yr)*qi,h[15]=(lt*wn-yt*on+Lt*Yr)*qi,h):null},w.isChar=Ei,w.isMapboxURL=ft,w.keysDifference=function(h,v){var _=[];for(var R in h)R in v||_.push(R);return _},w.makeRequest=jt,w.mapObject=ht,w.mercatorXfromLng=jv,w.mercatorYfromLat=n_,w.mercatorZfromAltitude=ts,w.mul=ud,w.multiply=Ks,w.mvt=Dp,w.nextPowerOfTwo=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},w.normalize=function(h,v){var _=v[0],R=v[1],F=v[2],z=_*_+R*R+F*F;return z>0&&(z=1/Math.sqrt(z)),h[0]=v[0]*z,h[1]=v[1]*z,h[2]=v[2]*z,h},w.number=Ss,w.offscreenCanvasSupported=H,w.ortho=function(h,v,_,R,F,z,X){var ue=1/(v-_),Ie=1/(R-F),qe=1/(z-X);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Ie,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*qe,h[11]=0,h[12]=(v+_)*ue,h[13]=(F+R)*Ie,h[14]=(X+z)*qe,h[15]=1,h},w.parseGlyphPBF=function(h){return new fn(h).readFields(Un,[])},w.pbf=fn,w.performSymbolLayout=function(h,v,_,R,F,z,X){h.createArrays(),h.tilePixelRatio=8192/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;var ue=h.layers[0].layout,Ie=h.layers[0]._unevaluatedLayout._values,qe={};if(h.textSizeData.kind==="composite"){var lt=h.textSizeData,yt=lt.maxZoom;qe.compositeTextSizes=[Ie["text-size"].possiblyEvaluate(new ja(lt.minZoom),X),Ie["text-size"].possiblyEvaluate(new ja(yt),X)]}if(h.iconSizeData.kind==="composite"){var Lt=h.iconSizeData,Ut=Lt.maxZoom;qe.compositeIconSizes=[Ie["icon-size"].possiblyEvaluate(new ja(Lt.minZoom),X),Ie["icon-size"].possiblyEvaluate(new ja(Ut),X)]}qe.layoutTextSize=Ie["text-size"].possiblyEvaluate(new ja(h.zoom+1),X),qe.layoutIconSize=Ie["icon-size"].possiblyEvaluate(new ja(h.zoom+1),X),qe.textMaxSize=Ie["text-size"].possiblyEvaluate(new ja(18));for(var ur=24*ue.get("text-line-height"),fr=ue.get("text-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Dr=ue.get("text-keep-upright"),Mr=ue.get("text-size"),Yr=function(){var wn=vn[on],Fn=ue.get("text-font").evaluate(wn,{},X).join(","),ci=Mr.evaluate(wn,{},X),Si=qe.layoutTextSize.evaluate(wn,{},X),Ji=qe.layoutIconSize.evaluate(wn,{},X),ki={horizontal:{},vertical:void 0},la=wn.text,Ii=[0,0];if(la){var eo=la.toString(),qi=24*ue.get("text-letter-spacing").evaluate(wn,{},X),Gi=function(Ka){for(var Ro=0,Io=Ka;Ro<Io.length;Ro+=1)if(bo=Io[Ro].charCodeAt(0),Ei.Arabic(bo)||Ei["Arabic Supplement"](bo)||Ei["Arabic Extended-A"](bo)||Ei["Arabic Presentation Forms-A"](bo)||Ei["Arabic Presentation Forms-B"](bo))return!1;var bo;return!0}(eo)?qi:0,fo=ue.get("text-anchor").evaluate(wn,{},X),za=ue.get("text-variable-anchor");if(!za){var to=ue.get("text-radial-offset").evaluate(wn,{},X);Ii=to?Br(fo,[24*to,Pr]):ue.get("text-offset").evaluate(wn,{},X).map(function(Ka){return 24*Ka})}var mi=fr?"center":ue.get("text-justify").evaluate(wn,{},X),mo=ue.get("symbol-placement"),Ms=mo==="point"?24*ue.get("text-max-width").evaluate(wn,{},X):0,js=function(){h.allowVerticalPlacement&&zl(eo)&&(ki.vertical=$a(la,v,_,F,Fn,Ms,ur,fo,"left",Gi,Ii,ra.vertical,!0,mo,Si,ci))};if(!fr&&za){for(var xs=mi==="auto"?za.map(function(Ka){return jr(Ka)}):[mi],Rs=!1,eu=0;eu<xs.length;eu++){var Ns=xs[eu];if(!ki.horizontal[Ns])if(Rs)ki.horizontal[Ns]=ki.horizontal[0];else{var _u=$a(la,v,_,F,Fn,Ms,ur,"center",Ns,Gi,Ii,ra.horizontal,!1,mo,Si,ci);_u&&(ki.horizontal[Ns]=_u,Rs=_u.positionedLines.length===1)}}js()}else{mi==="auto"&&(mi=jr(fo));var Zu=$a(la,v,_,F,Fn,Ms,ur,fo,mi,Gi,Ii,ra.horizontal,!1,mo,Si,ci);Zu&&(ki.horizontal[mi]=Zu),js(),zl(eo)&&fr&&Dr&&(ki.vertical=$a(la,v,_,F,Fn,Ms,ur,fo,mi,Gi,Ii,ra.vertical,!1,mo,Si,ci))}}var Ku=void 0,gl=!1;if(wn.icon&&wn.icon.name){var xu=R[wn.icon.name];xu&&(Ku=function(Ka,Ro,Io){var bo=Vo(Io),Ko=Ro[0]-Ka.displaySize[0]*bo.horizontalAlign,Il=Ro[1]-Ka.displaySize[1]*bo.verticalAlign;return{image:Ka,top:Il,bottom:Il+Ka.displaySize[1],left:Ko,right:Ko+Ka.displaySize[0]}}(F[wn.icon.name],ue.get("icon-offset").evaluate(wn,{},X),ue.get("icon-anchor").evaluate(wn,{},X)),gl=xu.sdf,h.sdfIcons===void 0?h.sdfIcons=xu.sdf:h.sdfIcons!==xu.sdf&&Ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xu.pixelRatio!==h.pixelRatio||ue.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}var qu=Lr(ki.horizontal)||ki.vertical;h.iconsInText=!!qu&&qu.iconsInText,(qu||Ku)&&function(Ka,Ro,Io,bo,Ko,Il,Is,uu,ml,Ao,jf){var yl=Il.textMaxSize.evaluate(Ro,{});yl===void 0&&(yl=Is);var tp,na=Ka.layers[0].layout,Fa=na.get("icon-offset").evaluate(Ro,{},jf),nf=Lr(Io.horizontal),Qd=Is/24,zp=Ka.tilePixelRatio*Qd,Tg=Ka.tilePixelRatio*yl/24,Up=Ka.tilePixelRatio*uu,Jd=Ka.tilePixelRatio*na.get("symbol-spacing"),bm=na.get("text-padding")*Ka.tilePixelRatio,md=na.get("icon-padding")*Ka.tilePixelRatio,Ag=na.get("text-max-angle")/180*Math.PI,Sm=na.get("text-rotation-alignment")==="map"&&na.get("symbol-placement")!=="point",bu=na.get("icon-rotation-alignment")==="map"&&na.get("symbol-placement")!=="point",Zp=na.get("symbol-placement"),Gv=Jd/2,Mg=na.get("icon-text-fit");bo&&Mg!=="none"&&(Ka.allowVerticalPlacement&&Io.vertical&&(tp=Vs(bo,Io.vertical,Mg,na.get("icon-text-fit-padding"),Fa,Qd)),nf&&(bo=Vs(bo,nf,Mg,na.get("icon-text-fit-padding"),Fa,Qd)));var Vp=function(zE,Cm){Cm.x<0||Cm.x>=8192||Cm.y<0||Cm.y>=8192||function(Su,wh,z0,_d,Tm,U0,Lc,Pl,ev,tv,xd,Hp,rv,Am,bd,Mm,Rm,Sd,Im,Pm,Fc,bf,jl,Ch,Om){var km,Th,nv,iv,av,Yv=Su.addToLineVertexArray(wh,z0),c_=0,f_=0,h_=0,Dm=0,Rt=-1,vc=-1,rp={},Z0=lr(""),ov=0,Lm=0;if(Pl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ov=(km=Pl.layout.get("text-offset").evaluate(Fc,{},Ch).map(function(sv){return 24*sv}))[0],Lm=km[1]):(ov=24*Pl.layout.get("text-radial-offset").evaluate(Fc,{},Ch),Lm=Pr),Su.allowVerticalPlacement&&_d.vertical){var V0=Pl.layout.get("text-rotate").evaluate(Fc,{},Ch)+90;iv=new Yo(ev,wh,tv,xd,Hp,_d.vertical,rv,Am,bd,V0),Lc&&(av=new Yo(ev,wh,tv,xd,Hp,Lc,Rm,Sd,bd,V0))}if(Tm){var kg=Pl.layout.get("icon-rotate").evaluate(Fc,{}),H0=Pl.layout.get("icon-text-fit")!=="none",Ed=vr(Tm,kg,jl,H0),Ol=Lc?vr(Lc,kg,jl,H0):void 0;nv=new Yo(ev,wh,tv,xd,Hp,Tm,Rm,Sd,!1,kg),c_=4*Ed.length;var np=Su.iconSizeData,Kv=null;np.kind==="source"?(Kv=[128*Pl.layout.get("icon-size").evaluate(Fc,{})])[0]>32640&&Ve(Su.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):np.kind==="composite"&&((Kv=[128*bf.compositeIconSizes[0].evaluate(Fc,{},Ch),128*bf.compositeIconSizes[1].evaluate(Fc,{},Ch)])[0]>32640||Kv[1]>32640)&&Ve(Su.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Su.addSymbols(Su.icon,Ed,Kv,Pm,Im,Fc,!1,wh,Yv.lineStartIndex,Yv.lineLength,-1,Ch),Rt=Su.icon.placedSymbolArray.length-1,Ol&&(f_=4*Ol.length,Su.addSymbols(Su.icon,Ol,Kv,Pm,Im,Fc,ra.vertical,wh,Yv.lineStartIndex,Yv.lineLength,-1,Ch),vc=Su.icon.placedSymbolArray.length-1)}for(var j0 in _d.horizontal){var Dg=_d.horizontal[j0];if(!Th){Z0=lr(Dg.text);var bx=Pl.layout.get("text-rotate").evaluate(Fc,{},Ch);Th=new Yo(ev,wh,tv,xd,Hp,Dg,rv,Am,bd,bx)}var p_=Dg.positionedLines.length===1;if(h_+=pr(Su,wh,Dg,U0,Pl,bd,Fc,Mm,Yv,_d.vertical?ra.horizontal:ra.horizontalOnly,p_?Object.keys(_d.horizontal):[j0],rp,Rt,bf,Ch),p_)break}_d.vertical&&(Dm+=pr(Su,wh,_d.vertical,U0,Pl,bd,Fc,Mm,Yv,ra.vertical,["vertical"],rp,vc,bf,Ch));var W0=Th?Th.boxStartIndex:Su.collisionBoxArray.length,d_=Th?Th.boxEndIndex:Su.collisionBoxArray.length,Fm=iv?iv.boxStartIndex:Su.collisionBoxArray.length,v_=iv?iv.boxEndIndex:Su.collisionBoxArray.length,G0=nv?nv.boxStartIndex:Su.collisionBoxArray.length,jp=nv?nv.boxEndIndex:Su.collisionBoxArray.length,g_=av?av.boxStartIndex:Su.collisionBoxArray.length,m_=av?av.boxEndIndex:Su.collisionBoxArray.length,Ah=-1,qv=function(sv,y_){return sv&&sv.circleDiameter?Math.max(sv.circleDiameter,y_):y_};Ah=qv(Th,Ah),Ah=qv(iv,Ah),Ah=qv(nv,Ah);var Lg=(Ah=qv(av,Ah))>-1?1:0;Lg&&(Ah*=Om/24),Su.glyphOffsetArray.length>=Nn.MAX_GLYPHS&&Ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fc.sortKey!==void 0&&Su.addToSortKeyRanges(Su.symbolInstances.length,Fc.sortKey),Su.symbolInstances.emplaceBack(wh.x,wh.y,rp.right>=0?rp.right:-1,rp.center>=0?rp.center:-1,rp.left>=0?rp.left:-1,rp.vertical||-1,Rt,vc,Z0,W0,d_,Fm,v_,G0,jp,g_,m_,tv,h_,Dm,c_,f_,Lg,0,rv,ov,Lm,Ah)}(Ka,Cm,zE,Io,bo,Ko,tp,Ka.layers[0],Ka.collisionBoxArray,Ro.index,Ro.sourceLayerIndex,Ka.index,zp,bm,Sm,ml,Up,md,bu,Fa,Ro,Il,Ao,jf,Is)};if(Zp==="line")for(var Rg=0,Ig=yu(Ro.geometry,0,0,8192,8192);Rg<Ig.length;Rg+=1)for(var L0=Ig[Rg],Pg=0,F0=Hs(L0,Jd,Ag,Io.vertical||nf,bo,24,Tg,Ka.overscaling,8192);Pg<F0.length;Pg+=1){var o_=F0[Pg];nf&&tr(Ka,nf.text,Gv,o_)||Vp(L0,o_)}else if(Zp==="line-center")for(var B0=0,Ql=Ro.geometry;B0<Ql.length;B0+=1){var Eh=Ql[B0];if(Eh.length>1){var rs=xo(Eh,Ag,Io.vertical||nf,bo,24,Tg);rs&&Vp(Eh,rs)}}else if(Ro.type==="Polygon")for(var Dc=0,N0=Uv(Ro.geometry,0);Dc<N0.length;Dc+=1){var Wf=N0[Dc],Em=Ct(Wf,16);Vp(Wf[0],new Fs(Em.x,Em.y,0))}else if(Ro.type==="LineString")for(var $v=0,wm=Ro.geometry;$v<wm.length;$v+=1){var Xv=wm[$v];Vp(Xv,new Fs(Xv[0].x,Xv[0].y,0))}else if(Ro.type==="Point")for(var yd=0,Og=Ro.geometry;yd<Og.length;yd+=1)for(var s_=0,u_=Og[yd];s_<u_.length;s_+=1){var l_=u_[s_];Vp([l_],new Fs(l_.x,l_.y,0))}}(h,wn,ki,Ku,R,qe,Si,Ji,Ii,gl,X)},on=0,vn=h.features;on<vn.length;on+=1)Yr();z&&h.generateCollisionDebugBuffers()},w.perspective=function(h,v,_,R,F){var z,X=1/Math.tan(v/2);return h[0]=X/_,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=X,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,F!=null&&F!==1/0?(h[10]=(F+R)*(z=1/(R-F)),h[14]=2*F*R*z):(h[10]=-1,h[14]=-2*R),h},w.pick=function(h,v){for(var _={},R=0;R<v.length;R++){var F=v[R];F in h&&(_[F]=h[F])}return _},w.plugin=au,w.polygonIntersectsPolygon=Qc,w.postMapLoadEvent=Dt,w.postTurnstileEvent=Yt,w.potpack=Ra,w.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],w.register=Ni,w.registerForPluginStateChange=function(h){return h({pluginStatus:iu,pluginURL:fl}),jh.on("pluginStateChange",h),h},w.renderColorRamp=vg,w.rotate=function(h,v,_){var R=v[0],F=v[1],z=v[2],X=v[3],ue=Math.sin(_),Ie=Math.cos(_);return h[0]=R*Ie+z*ue,h[1]=F*Ie+X*ue,h[2]=R*-ue+z*Ie,h[3]=F*-ue+X*Ie,h},w.rotateX=function(h,v,_){var R=Math.sin(_),F=Math.cos(_),z=v[4],X=v[5],ue=v[6],Ie=v[7],qe=v[8],lt=v[9],yt=v[10],Lt=v[11];return v!==h&&(h[0]=v[0],h[1]=v[1],h[2]=v[2],h[3]=v[3],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[4]=z*F+qe*R,h[5]=X*F+lt*R,h[6]=ue*F+yt*R,h[7]=Ie*F+Lt*R,h[8]=qe*F-z*R,h[9]=lt*F-X*R,h[10]=yt*F-ue*R,h[11]=Lt*F-Ie*R,h},w.rotateZ=function(h,v,_){var R=Math.sin(_),F=Math.cos(_),z=v[0],X=v[1],ue=v[2],Ie=v[3],qe=v[4],lt=v[5],yt=v[6],Lt=v[7];return v!==h&&(h[8]=v[8],h[9]=v[9],h[10]=v[10],h[11]=v[11],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[0]=z*F+qe*R,h[1]=X*F+lt*R,h[2]=ue*F+yt*R,h[3]=Ie*F+Lt*R,h[4]=qe*F-z*R,h[5]=lt*F-X*R,h[6]=yt*F-ue*R,h[7]=Lt*F-Ie*R,h},w.scale=function(h,v,_){var R=_[0],F=_[1],z=_[2];return h[0]=v[0]*R,h[1]=v[1]*R,h[2]=v[2]*R,h[3]=v[3]*R,h[4]=v[4]*F,h[5]=v[5]*F,h[6]=v[6]*F,h[7]=v[7]*F,h[8]=v[8]*z,h[9]=v[9]*z,h[10]=v[10]*z,h[11]=v[11]*z,h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15],h},w.scale$1=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h[3]=v[3]*_,h},w.scale$2=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h},w.setCacheLimits=function(h,v){Qt=h,Sr=v},w.setRTLTextPlugin=function(h,v,_){if(_===void 0&&(_=!1),iu==="deferred"||iu==="loading"||iu==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");fl=Ge.resolveURL(h),iu="deferred",Ac=v,Hh(),_||oc()},w.sphericalToCartesian=function(h){var v=h[0],_=h[1],R=h[2];return _+=90,_*=Math.PI/180,R*=Math.PI/180,{x:v*Math.cos(_)*Math.sin(R),y:v*Math.sin(_)*Math.sin(R),z:v*Math.cos(R)}},w.sqrLen=function(h){var v=h[0],_=h[1];return v*v+_*_},w.styleSpec=At,w.sub=function(h,v,_){return h[0]=v[0]-_[0],h[1]=v[1]-_[1],h[2]=v[2]-_[2],h},w.symbolSize=Ga,w.transformMat3=function(h,v,_){var R=v[0],F=v[1],z=v[2];return h[0]=R*_[0]+F*_[3]+z*_[6],h[1]=R*_[1]+F*_[4]+z*_[7],h[2]=R*_[2]+F*_[5]+z*_[8],h},w.transformMat4=_f,w.translate=function(h,v,_){var R,F,z,X,ue,Ie,qe,lt,yt,Lt,Ut,ur,fr=_[0],Dr=_[1],Mr=_[2];return v===h?(h[12]=v[0]*fr+v[4]*Dr+v[8]*Mr+v[12],h[13]=v[1]*fr+v[5]*Dr+v[9]*Mr+v[13],h[14]=v[2]*fr+v[6]*Dr+v[10]*Mr+v[14],h[15]=v[3]*fr+v[7]*Dr+v[11]*Mr+v[15]):(F=v[1],z=v[2],X=v[3],ue=v[4],Ie=v[5],qe=v[6],lt=v[7],yt=v[8],Lt=v[9],Ut=v[10],ur=v[11],h[0]=R=v[0],h[1]=F,h[2]=z,h[3]=X,h[4]=ue,h[5]=Ie,h[6]=qe,h[7]=lt,h[8]=yt,h[9]=Lt,h[10]=Ut,h[11]=ur,h[12]=R*fr+ue*Dr+yt*Mr+v[12],h[13]=F*fr+Ie*Dr+Lt*Mr+v[13],h[14]=z*fr+qe*Dr+Ut*Mr+v[14],h[15]=X*fr+lt*Dr+ur*Mr+v[15]),h},w.triggerPluginCompletionEvent=Dv,w.uniqueId=be,w.validateCustomStyleLayer=function(h){var v=[],_=h.id;return _===void 0&&v.push({message:"layers."+_+': missing required property "id"'}),h.render===void 0&&v.push({message:"layers."+_+': missing required method "render"'}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&v.push({message:"layers."+_+': property "renderingMode" must be either "2d" or "3d"'}),v},w.validateLight=kv,w.validateStyle=wp,w.values=function(h){var v=[];for(var _ in h)v.push(h[_]);return v},w.vectorTile=Dp,w.version="1.13.3",w.warnOnce=Ve,w.webpSupported=pt,w.window=te,w.wrap=M}),K(["./shared"],function(w){"use strict";function W(de){var pe=typeof de;if(pe==="number"||pe==="boolean"||pe==="string"||de==null)return JSON.stringify(de);if(Array.isArray(de)){for(var Me="[",et=0,St=de;et<St.length;et+=1)Me+=W(St[et])+",";return Me+"]"}for(var Gt=Object.keys(de).sort(),gr="{",At=0;At<Gt.length;At++)gr+=JSON.stringify(Gt[At])+":"+W(de[Gt[At]])+",";return gr+"}"}function j(de){for(var pe="",Me=0,et=w.refProperties;Me<et.length;Me+=1)pe+="/"+W(de[et[Me]]);return pe}var q=function(de){this.keyCache={},de&&this.replace(de)};q.prototype.replace=function(de){this._layerConfigs={},this._layers={},this.update(de,[])},q.prototype.update=function(de,pe){for(var Me=this,et=0,St=de;et<St.length;et+=1){var Gt=St[et];this._layerConfigs[Gt.id]=Gt;var gr=this._layers[Gt.id]=w.createStyleLayer(Gt);gr._featureFilter=w.featureFilter(gr.filter),this.keyCache[Gt.id]&&delete this.keyCache[Gt.id]}for(var At=0,ot=pe;At<ot.length;At+=1){var Ot=ot[At];delete this.keyCache[Ot],delete this._layerConfigs[Ot],delete this._layers[Ot]}this.familiesBySource={};for(var yr=0,kr=function(jn,Kn){for(var aa={},vi=0;vi<jn.length;vi++){var da=Kn&&Kn[jn[vi].id]||j(jn[vi]);Kn&&(Kn[jn[vi].id]=da);var Oa=aa[da];Oa||(Oa=aa[da]=[]),Oa.push(jn[vi])}var xa=[];for(var Va in aa)xa.push(aa[Va]);return xa}(w.values(this._layerConfigs),this.keyCache);yr<kr.length;yr+=1){var Ft=kr[yr].map(function(jn){return Me._layers[jn.id]}),Mn=Ft[0];if(Mn.visibility!=="none"){var qn=Mn.source||"",ri=this.familiesBySource[qn];ri||(ri=this.familiesBySource[qn]={});var un=Mn.sourceLayer||"_geojsonTileLayer",Yn=ri[un];Yn||(Yn=ri[un]=[]),Yn.push(Ft)}}};var Q=function(de){var pe={},Me=[];for(var et in de){var St=de[et],Gt=pe[et]={};for(var gr in St){var At=St[+gr];if(At&&At.bitmap.width!==0&&At.bitmap.height!==0){var ot={x:0,y:0,w:At.bitmap.width+2,h:At.bitmap.height+2};Me.push(ot),Gt[gr]={rect:ot,metrics:At.metrics}}}}var Ot=w.potpack(Me),yr=new w.AlphaImage({width:Ot.w||1,height:Ot.h||1});for(var kr in de){var Ft=de[kr];for(var Mn in Ft){var qn=Ft[+Mn];if(qn&&qn.bitmap.width!==0&&qn.bitmap.height!==0){var ri=pe[kr][Mn].rect;w.AlphaImage.copy(qn.bitmap,yr,{x:0,y:0},{x:ri.x+1,y:ri.y+1},qn.bitmap)}}}this.image=yr,this.positions=pe};w.register("GlyphAtlas",Q);var ie=function(de){this.tileID=new w.OverscaledTileID(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId};function te(de,pe,Me){for(var et=new w.EvaluationParameters(pe),St=0,Gt=de;St<Gt.length;St+=1)Gt[St].recalculate(et,Me)}function we(de,pe){var Me=w.getArrayBuffer(de.request,function(et,St,Gt,gr){et?pe(et):St&&pe(null,{vectorTile:new w.vectorTile.VectorTile(new w.pbf(St)),rawData:St,cacheControl:Gt,expires:gr})});return function(){Me.cancel(),pe()}}ie.prototype.parse=function(de,pe,Me,et,St){var Gt=this;this.status="parsing",this.data=de,this.collisionBoxArray=new w.CollisionBoxArray;var gr=new w.DictionaryCoder(Object.keys(de.layers).sort()),At=new w.FeatureIndex(this.tileID,this.promoteId);At.bucketLayerIDs=[];var ot,Ot,yr,kr,Ft={},Mn={featureIndex:At,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Me},qn=pe.familiesBySource[this.source];for(var ri in qn){var un=de.layers[ri];if(un){un.version===1&&w.warnOnce('Vector tile source "'+this.source+'" layer "'+ri+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Yn=gr.encode(ri),jn=[],Kn=0;Kn<un.length;Kn++){var aa=un.feature(Kn),vi=At.getId(aa,ri);jn.push({feature:aa,id:vi,index:Kn,sourceLayerIndex:Yn})}for(var da=0,Oa=qn[ri];da<Oa.length;da+=1){var xa=Oa[da],Va=xa[0];Va.minzoom&&this.zoom<Math.floor(Va.minzoom)||Va.maxzoom&&this.zoom>=Va.maxzoom||Va.visibility!=="none"&&(te(xa,this.zoom,Me),(Ft[Va.id]=Va.createBucket({index:At.bucketLayerIDs.length,layers:xa,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yn,sourceID:this.source})).populate(jn,Mn,this.tileID.canonical),At.bucketLayerIDs.push(xa.map(function(ai){return ai.id})))}}}var Sa=w.mapObject(Mn.glyphDependencies,function(ai){return Object.keys(ai).map(Number)});Object.keys(Sa).length?et.send("getGlyphs",{uid:this.uid,stacks:Sa},function(ai,_i){ot||(ot=ai,Ot=_i,Oo.call(Gt))}):Ot={};var gs=Object.keys(Mn.iconDependencies);gs.length?et.send("getImages",{icons:gs,source:this.source,tileID:this.tileID,type:"icons"},function(ai,_i){ot||(ot=ai,yr=_i,Oo.call(Gt))}):yr={};var io=Object.keys(Mn.patternDependencies);function Oo(){if(ot)return St(ot);if(Ot&&yr&&kr){var ai=new Q(Ot),_i=new w.ImageAtlas(yr,kr);for(var ea in Ft){var Ha=Ft[ea];Ha instanceof w.SymbolBucket?(te(Ha.layers,this.zoom,Me),w.performSymbolLayout(Ha,Ot,ai.positions,yr,_i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ha.hasPattern&&(Ha instanceof w.LineBucket||Ha instanceof w.FillBucket||Ha instanceof w.FillExtrusionBucket)&&(te(Ha.layers,this.zoom,Me),Ha.addFeatures(Mn,this.tileID.canonical,_i.patternPositions))}this.status="done",St(null,{buckets:w.values(Ft).filter(function(ms){return!ms.isEmpty()}),featureIndex:At,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ai.image,imageAtlas:_i,glyphMap:this.returnDependencies?Ot:null,iconMap:this.returnDependencies?yr:null,glyphPositions:this.returnDependencies?ai.positions:null})}}io.length?et.send("getImages",{icons:io,source:this.source,tileID:this.tileID,type:"patterns"},function(ai,_i){ot||(ot=ai,kr=_i,Oo.call(Gt))}):kr={},Oo.call(this)};var fe=function(de,pe,Me,et){this.actor=de,this.layerIndex=pe,this.availableImages=Me,this.loadVectorData=et||we,this.loading={},this.loaded={}};fe.prototype.loadTile=function(de,pe){var Me=this,et=de.uid;this.loading||(this.loading={});var St=!!(de&&de.request&&de.request.collectResourceTiming)&&new w.RequestPerformance(de.request),Gt=this.loading[et]=new ie(de);Gt.abort=this.loadVectorData(de,function(gr,At){if(delete Me.loading[et],gr||!At)return Gt.status="done",Me.loaded[et]=Gt,pe(gr);var ot=At.rawData,Ot={};At.expires&&(Ot.expires=At.expires),At.cacheControl&&(Ot.cacheControl=At.cacheControl);var yr={};if(St){var kr=St.finish();kr&&(yr.resourceTiming=JSON.parse(JSON.stringify(kr)))}Gt.vectorTile=At.vectorTile,Gt.parse(At.vectorTile,Me.layerIndex,Me.availableImages,Me.actor,function(Ft,Mn){if(Ft||!Mn)return pe(Ft);pe(null,w.extend({rawTileData:ot.slice(0)},Mn,Ot,yr))}),Me.loaded=Me.loaded||{},Me.loaded[et]=Gt})},fe.prototype.reloadTile=function(de,pe){var Me=this,et=this.loaded,St=de.uid,Gt=this;if(et&&et[St]){var gr=et[St];gr.showCollisionBoxes=de.showCollisionBoxes;var At=function(ot,Ot){var yr=gr.reloadCallback;yr&&(delete gr.reloadCallback,gr.parse(gr.vectorTile,Gt.layerIndex,Me.availableImages,Gt.actor,yr)),pe(ot,Ot)};gr.status==="parsing"?gr.reloadCallback=At:gr.status==="done"&&(gr.vectorTile?gr.parse(gr.vectorTile,this.layerIndex,this.availableImages,this.actor,At):At())}},fe.prototype.abortTile=function(de,pe){var Me=this.loading,et=de.uid;Me&&Me[et]&&Me[et].abort&&(Me[et].abort(),delete Me[et]),pe()},fe.prototype.removeTile=function(de,pe){var Me=this.loaded,et=de.uid;Me&&Me[et]&&delete Me[et],pe()};var ce=w.window.ImageBitmap,J=function(){this.loaded={}};function M(de,pe){if(de.length!==0){E(de[0],pe);for(var Me=1;Me<de.length;Me++)E(de[Me],!pe)}}function E(de,pe){for(var Me=0,et=0,St=0,Gt=de.length,gr=Gt-1;St<Gt;gr=St++){var At=(de[St][0]-de[gr][0])*(de[gr][1]+de[St][1]),ot=Me+At;et+=Math.abs(Me)>=Math.abs(At)?Me-ot+At:At-ot+Me,Me=ot}Me+et>=0!=!!pe&&de.reverse()}J.prototype.loadTile=function(de,pe){var Me=de.uid,et=de.encoding,St=de.rawImageData,Gt=ce&&St instanceof ce?this.getImageData(St):St,gr=new w.DEMData(Me,Gt,et);this.loaded=this.loaded||{},this.loaded[Me]=gr,pe(null,gr)},J.prototype.getImageData=function(de){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(de.width,de.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=de.width,this.offscreenCanvas.height=de.height,this.offscreenCanvasContext.drawImage(de,0,0,de.width,de.height);var pe=this.offscreenCanvasContext.getImageData(-1,-1,de.width+2,de.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new w.RGBAImage({width:pe.width,height:pe.height},pe.data)},J.prototype.removeTile=function(de){var pe=this.loaded,Me=de.uid;pe&&pe[Me]&&delete pe[Me]};var ge=w.vectorTile.VectorTileFeature.prototype.toGeoJSON,be=function(de){this._feature=de,this.extent=w.EXTENT,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))};be.prototype.loadGeometry=function(){if(this._feature.type===1){for(var de=[],pe=0,Me=this._feature.geometry;pe<Me.length;pe+=1){var et=Me[pe];de.push([new w.Point$1(et[0],et[1])])}return de}for(var St=[],Gt=0,gr=this._feature.geometry;Gt<gr.length;Gt+=1){for(var At=[],ot=0,Ot=gr[Gt];ot<Ot.length;ot+=1){var yr=Ot[ot];At.push(new w.Point$1(yr[0],yr[1]))}St.push(At)}return St},be.prototype.toGeoJSON=function(de,pe,Me){return ge.call(this,de,pe,Me)};var ze=function(de){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=w.EXTENT,this.length=de.length,this._features=de};ze.prototype.feature=function(de){return new be(this._features[de])};var Be=w.vectorTile.VectorTileFeature,Ue=it;function it(de,pe){this.options=pe||{},this.features=de,this.length=de.length}function ht(de,pe){this.id=typeof de.id=="number"?de.id:void 0,this.type=de.type,this.rawGeometry=de.type===1?[de.geometry]:de.geometry,this.properties=de.tags,this.extent=pe||4096}it.prototype.feature=function(de){return new ht(this.features[de],this.options.extent)},ht.prototype.loadGeometry=function(){var de=this.rawGeometry;this.geometry=[];for(var pe=0;pe<de.length;pe++){for(var Me=de[pe],et=[],St=0;St<Me.length;St++)et.push(new w.Point$1(Me[St][0],Me[St][1]));this.geometry.push(et)}return this.geometry},ht.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var de=this.geometry,pe=1/0,Me=-1/0,et=1/0,St=-1/0,Gt=0;Gt<de.length;Gt++)for(var gr=de[Gt],At=0;At<gr.length;At++){var ot=gr[At];pe=Math.min(pe,ot.x),Me=Math.max(Me,ot.x),et=Math.min(et,ot.y),St=Math.max(St,ot.y)}return[pe,et,Me,St]},ht.prototype.toGeoJSON=Be.prototype.toGeoJSON;var Le=ye,Se=Ue;function ye(de){var pe=new w.pbf;return function(Me,et){for(var St in Me.layers)et.writeMessage(3,Ve,Me.layers[St])}(de,pe),pe.finish()}function Ve(de,pe){var Me;pe.writeVarintField(15,de.version||1),pe.writeStringField(1,de.name||""),pe.writeVarintField(5,de.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(Me=0;Me<de.length;Me++)et.feature=de.feature(Me),pe.writeMessage(2,je,et);var St=et.keys;for(Me=0;Me<St.length;Me++)pe.writeStringField(3,St[Me]);var Gt=et.values;for(Me=0;Me<Gt.length;Me++)pe.writeMessage(4,We,Gt[Me])}function je(de,pe){var Me=de.feature;Me.id!==void 0&&pe.writeVarintField(1,Me.id),pe.writeMessage(2,Et,de),pe.writeVarintField(3,Me.type),pe.writeMessage(4,ne,Me)}function Et(de,pe){var Me=de.feature,et=de.keys,St=de.values,Gt=de.keycache,gr=de.valuecache;for(var At in Me.properties){var ot=Gt[At];ot===void 0&&(et.push(At),Gt[At]=ot=et.length-1),pe.writeVarint(ot);var Ot=Me.properties[At],yr=typeof Ot;yr!=="string"&&yr!=="boolean"&&yr!=="number"&&(Ot=JSON.stringify(Ot));var kr=yr+":"+Ot,Ft=gr[kr];Ft===void 0&&(St.push(Ot),gr[kr]=Ft=St.length-1),pe.writeVarint(Ft)}}function Oe(de,pe){return(pe<<3)+(7&de)}function Qe(de){return de<<1^de>>31}function ne(de,pe){for(var Me=de.loadGeometry(),et=de.type,St=0,Gt=0,gr=Me.length,At=0;At<gr;At++){var ot=Me[At],Ot=1;et===1&&(Ot=ot.length),pe.writeVarint(Oe(1,Ot));for(var yr=et===3?ot.length-1:ot.length,kr=0;kr<yr;kr++){kr===1&&et!==1&&pe.writeVarint(Oe(2,yr-1));var Ft=ot[kr].x-St,Mn=ot[kr].y-Gt;pe.writeVarint(Qe(Ft)),pe.writeVarint(Qe(Mn)),St+=Ft,Gt+=Mn}et===3&&pe.writeVarint(Oe(7,1))}}function We(de,pe){var Me=typeof de;Me==="string"?pe.writeStringField(1,de):Me==="boolean"?pe.writeBooleanField(7,de):Me==="number"&&(de%1!=0?pe.writeDoubleField(3,de):de<0?pe.writeSVarintField(6,de):pe.writeVarintField(5,de))}function oe(de,pe,Me,et){Fe(de,Me,et),Fe(pe,2*Me,2*et),Fe(pe,2*Me+1,2*et+1)}function Fe(de,pe,Me){var et=de[pe];de[pe]=de[Me],de[Me]=et}function st(de,pe,Me,et){var St=de-Me,Gt=pe-et;return St*St+Gt*Gt}Le.fromVectorTileJs=ye,Le.fromGeojsonVt=function(de,pe){pe=pe||{};var Me={};for(var et in de)Me[et]=new Ue(de[et].features,pe),Me[et].name=et,Me[et].version=pe.version,Me[et].extent=pe.extent;return ye({layers:Me})},Le.GeoJSONWrapper=Se;var Ce=function(de){return de[0]},De=function(de){return de[1]},tt=function(de,pe,Me,et,St){pe===void 0&&(pe=Ce),Me===void 0&&(Me=De),et===void 0&&(et=64),St===void 0&&(St=Float64Array),this.nodeSize=et,this.points=de;for(var Gt=de.length<65536?Uint16Array:Uint32Array,gr=this.ids=new Gt(de.length),At=this.coords=new St(2*de.length),ot=0;ot<de.length;ot++)gr[ot]=ot,At[2*ot]=pe(de[ot]),At[2*ot+1]=Me(de[ot]);(function Ot(yr,kr,Ft,Mn,qn,ri){if(!(qn-Mn<=Ft)){var un=Mn+qn>>1;(function Yn(jn,Kn,aa,vi,da,Oa){for(;da>vi;){if(da-vi>600){var xa=da-vi+1,Va=aa-vi+1,Sa=Math.log(xa),gs=.5*Math.exp(2*Sa/3),io=.5*Math.sqrt(Sa*gs*(xa-gs)/xa)*(Va-xa/2<0?-1:1);Yn(jn,Kn,aa,Math.max(vi,Math.floor(aa-Va*gs/xa+io)),Math.min(da,Math.floor(aa+(xa-Va)*gs/xa+io)),Oa)}var Oo=Kn[2*aa+Oa],ai=vi,_i=da;for(oe(jn,Kn,vi,aa),Kn[2*da+Oa]>Oo&&oe(jn,Kn,vi,da);ai<_i;){for(oe(jn,Kn,ai,_i),ai++,_i--;Kn[2*ai+Oa]<Oo;)ai++;for(;Kn[2*_i+Oa]>Oo;)_i--}Kn[2*vi+Oa]===Oo?oe(jn,Kn,vi,_i):oe(jn,Kn,++_i,da),_i<=aa&&(vi=_i+1),aa<=_i&&(da=_i-1)}})(yr,kr,un,Mn,qn,ri%2),Ot(yr,kr,Ft,Mn,un-1,ri+1),Ot(yr,kr,Ft,un+1,qn,ri+1)}})(gr,At,et,0,gr.length-1,0)};tt.prototype.range=function(de,pe,Me,et){return function(St,Gt,gr,At,ot,Ot,yr){for(var kr,Ft,Mn=[0,St.length-1,0],qn=[];Mn.length;){var ri=Mn.pop(),un=Mn.pop(),Yn=Mn.pop();if(un-Yn<=yr)for(var jn=Yn;jn<=un;jn++)Ft=Gt[2*jn+1],(kr=Gt[2*jn])>=gr&&kr<=ot&&Ft>=At&&Ft<=Ot&&qn.push(St[jn]);else{var Kn=Math.floor((Yn+un)/2);Ft=Gt[2*Kn+1],(kr=Gt[2*Kn])>=gr&&kr<=ot&&Ft>=At&&Ft<=Ot&&qn.push(St[Kn]);var aa=(ri+1)%2;(ri===0?gr<=kr:At<=Ft)&&(Mn.push(Yn),Mn.push(Kn-1),Mn.push(aa)),(ri===0?ot>=kr:Ot>=Ft)&&(Mn.push(Kn+1),Mn.push(un),Mn.push(aa))}}return qn}(this.ids,this.coords,de,pe,Me,et,this.nodeSize)},tt.prototype.within=function(de,pe,Me){return function(et,St,Gt,gr,At,ot){for(var Ot=[0,et.length-1,0],yr=[],kr=At*At;Ot.length;){var Ft=Ot.pop(),Mn=Ot.pop(),qn=Ot.pop();if(Mn-qn<=ot)for(var ri=qn;ri<=Mn;ri++)st(St[2*ri],St[2*ri+1],Gt,gr)<=kr&&yr.push(et[ri]);else{var un=Math.floor((qn+Mn)/2),Yn=St[2*un],jn=St[2*un+1];st(Yn,jn,Gt,gr)<=kr&&yr.push(et[un]);var Kn=(Ft+1)%2;(Ft===0?Gt-At<=Yn:gr-At<=jn)&&(Ot.push(qn),Ot.push(un-1),Ot.push(Kn)),(Ft===0?Gt+At>=Yn:gr+At>=jn)&&(Ot.push(un+1),Ot.push(Mn),Ot.push(Kn))}}return yr}(this.ids,this.coords,de,pe,Me,this.nodeSize)};var _e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(de){return de}},me=function(de){this.options=Te(Object.create(_e),de),this.trees=new Array(this.options.maxZoom+1)};function Ge(de,pe,Me,et,St){return{x:de,y:pe,zoom:1/0,id:Me,parentId:-1,numPoints:et,properties:St}}function Ze(de,pe){var Me=de.geometry.coordinates,et=Me[1];return{x:Je(Me[0]),y:$e(et),zoom:1/0,index:pe,parentId:-1}}function pt(de){return{type:"Feature",id:de.id,properties:Ht(de),geometry:{type:"Point",coordinates:[(et=de.x,360*(et-.5)),(pe=de.y,Me=(180-360*pe)*Math.PI/180,360*Math.atan(Math.exp(Me))/Math.PI-90)]}};var pe,Me,et}function Ht(de){var pe=de.numPoints,Me=pe>=1e4?Math.round(pe/1e3)+"k":pe>=1e3?Math.round(pe/100)/10+"k":pe;return Te(Te({},de.properties),{cluster:!0,cluster_id:de.id,point_count:pe,point_count_abbreviated:Me})}function Je(de){return de/360+.5}function $e(de){var pe=Math.sin(de*Math.PI/180),Me=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return Me<0?0:Me>1?1:Me}function Te(de,pe){for(var Me in pe)de[Me]=pe[Me];return de}function Ye(de){return de.x}function ft(de){return de.y}function ke(de,pe,Me,et,St,Gt){var gr=St-Me,At=Gt-et;if(gr!==0||At!==0){var ot=((de-Me)*gr+(pe-et)*At)/(gr*gr+At*At);ot>1?(Me=St,et=Gt):ot>0&&(Me+=gr*ot,et+=At*ot)}return(gr=de-Me)*gr+(At=pe-et)*At}function Ne(de,pe,Me,et){var St={id:de===void 0?null:de,type:pe,geometry:Me,tags:et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Gt){var gr=Gt.geometry,At=Gt.type;if(At==="Point"||At==="MultiPoint"||At==="LineString")dt(Gt,gr);else if(At==="Polygon"||At==="MultiLineString")for(var ot=0;ot<gr.length;ot++)dt(Gt,gr[ot]);else if(At==="MultiPolygon")for(ot=0;ot<gr.length;ot++)for(var Ot=0;Ot<gr[ot].length;Ot++)dt(Gt,gr[ot][Ot])}(St),St}function dt(de,pe){for(var Me=0;Me<pe.length;Me+=3)de.minX=Math.min(de.minX,pe[Me]),de.minY=Math.min(de.minY,pe[Me+1]),de.maxX=Math.max(de.maxX,pe[Me]),de.maxY=Math.max(de.maxY,pe[Me+1])}function Pt(de,pe,Me,et){if(pe.geometry){var St=pe.geometry.coordinates,Gt=pe.geometry.type,gr=Math.pow(Me.tolerance/((1<<Me.maxZoom)*Me.extent),2),At=[],ot=pe.id;if(Me.promoteId?ot=pe.properties[Me.promoteId]:Me.generateId&&(ot=et||0),Gt==="Point")rr(St,At);else if(Gt==="MultiPoint")for(var Ot=0;Ot<St.length;Ot++)rr(St[Ot],At);else if(Gt==="LineString")xr(St,At,gr,!1);else if(Gt==="MultiLineString"){if(Me.lineMetrics){for(Ot=0;Ot<St.length;Ot++)xr(St[Ot],At=[],gr,!1),de.push(Ne(ot,"LineString",At,pe.properties));return}ut(St,At,gr,!1)}else if(Gt==="Polygon")ut(St,At,gr,!0);else{if(Gt!=="MultiPolygon"){if(Gt==="GeometryCollection"){for(Ot=0;Ot<pe.geometry.geometries.length;Ot++)Pt(de,{id:ot,geometry:pe.geometry.geometries[Ot],properties:pe.properties},Me,et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ot=0;Ot<St.length;Ot++){var yr=[];ut(St[Ot],yr,gr,!0),At.push(yr)}}de.push(Ne(ot,Gt,At,pe.properties))}}function rr(de,pe){pe.push(nn(de[0])),pe.push(Gr(de[1])),pe.push(0)}function xr(de,pe,Me,et){for(var St,Gt,gr=0,At=0;At<de.length;At++){var ot=nn(de[At][0]),Ot=Gr(de[At][1]);pe.push(ot),pe.push(Ot),pe.push(0),At>0&&(gr+=et?(St*Ot-ot*Gt)/2:Math.sqrt(Math.pow(ot-St,2)+Math.pow(Ot-Gt,2))),St=ot,Gt=Ot}var yr=pe.length-3;pe[2]=1,function kr(Ft,Mn,qn,ri){for(var un,Yn=ri,jn=qn-Mn>>1,Kn=qn-Mn,aa=Ft[Mn],vi=Ft[Mn+1],da=Ft[qn],Oa=Ft[qn+1],xa=Mn+3;xa<qn;xa+=3){var Va=ke(Ft[xa],Ft[xa+1],aa,vi,da,Oa);if(Va>Yn)un=xa,Yn=Va;else if(Va===Yn){var Sa=Math.abs(xa-jn);Sa<Kn&&(un=xa,Kn=Sa)}}Yn>ri&&(un-Mn>3&&kr(Ft,Mn,un,ri),Ft[un+2]=Yn,qn-un>3&&kr(Ft,un,qn,ri))}(pe,0,yr,Me),pe[yr+2]=1,pe.size=Math.abs(gr),pe.start=0,pe.end=pe.size}function ut(de,pe,Me,et){for(var St=0;St<de.length;St++){var Gt=[];xr(de[St],Gt,Me,et),pe.push(Gt)}}function nn(de){return de/360+.5}function Gr(de){var pe=Math.sin(de*Math.PI/180),Me=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return Me<0?0:Me>1?1:Me}function Xr(de,pe,Me,et,St,Gt,gr,At){if(et/=pe,Gt>=(Me/=pe)&&gr<et)return de;if(gr<Me||Gt>=et)return null;for(var ot=[],Ot=0;Ot<de.length;Ot++){var yr=de[Ot],kr=yr.geometry,Ft=yr.type,Mn=St===0?yr.minX:yr.minY,qn=St===0?yr.maxX:yr.maxY;if(Mn>=Me&&qn<et)ot.push(yr);else if(!(qn<Me||Mn>=et)){var ri=[];if(Ft==="Point"||Ft==="MultiPoint")Nt(kr,ri,Me,et,St);else if(Ft==="LineString")Yt(kr,ri,Me,et,St,!1,At.lineMetrics);else if(Ft==="MultiLineString")Dt(kr,ri,Me,et,St,!1);else if(Ft==="Polygon")Dt(kr,ri,Me,et,St,!0);else if(Ft==="MultiPolygon")for(var un=0;un<kr.length;un++){var Yn=[];Dt(kr[un],Yn,Me,et,St,!0),Yn.length&&ri.push(Yn)}if(ri.length){if(At.lineMetrics&&Ft==="LineString"){for(un=0;un<ri.length;un++)ot.push(Ne(yr.id,Ft,ri[un],yr.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(ri.length===1?(Ft="LineString",ri=ri[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=ri.length===3?"Point":"MultiPoint"),ot.push(Ne(yr.id,Ft,ri,yr.tags))}}}return ot.length?ot:null}function Nt(de,pe,Me,et,St){for(var Gt=0;Gt<de.length;Gt+=3){var gr=de[Gt+St];gr>=Me&&gr<=et&&(pe.push(de[Gt]),pe.push(de[Gt+1]),pe.push(de[Gt+2]))}}function Yt(de,pe,Me,et,St,Gt,gr){for(var At,ot,Ot=sr(de),yr=St===0?Sr:Er,kr=de.start,Ft=0;Ft<de.length-3;Ft+=3){var Mn=de[Ft],qn=de[Ft+1],ri=de[Ft+2],un=de[Ft+3],Yn=de[Ft+4],jn=St===0?Mn:qn,Kn=St===0?un:Yn,aa=!1;gr&&(At=Math.sqrt(Math.pow(Mn-un,2)+Math.pow(qn-Yn,2))),jn<Me?Kn>Me&&(ot=yr(Ot,Mn,qn,un,Yn,Me),gr&&(Ot.start=kr+At*ot)):jn>et?Kn<et&&(ot=yr(Ot,Mn,qn,un,Yn,et),gr&&(Ot.start=kr+At*ot)):Qt(Ot,Mn,qn,ri),Kn<Me&&jn>=Me&&(ot=yr(Ot,Mn,qn,un,Yn,Me),aa=!0),Kn>et&&jn<=et&&(ot=yr(Ot,Mn,qn,un,Yn,et),aa=!0),!Gt&&aa&&(gr&&(Ot.end=kr+At*ot),pe.push(Ot),Ot=sr(de)),gr&&(kr+=At)}var vi=de.length-3;Mn=de[vi],qn=de[vi+1],ri=de[vi+2],(jn=St===0?Mn:qn)>=Me&&jn<=et&&Qt(Ot,Mn,qn,ri),vi=Ot.length-3,Gt&&vi>=3&&(Ot[vi]!==Ot[0]||Ot[vi+1]!==Ot[1])&&Qt(Ot,Ot[0],Ot[1],Ot[2]),Ot.length&&pe.push(Ot)}function sr(de){var pe=[];return pe.size=de.size,pe.start=de.start,pe.end=de.end,pe}function Dt(de,pe,Me,et,St,Gt){for(var gr=0;gr<de.length;gr++)Yt(de[gr],pe,Me,et,St,Gt,!1)}function Qt(de,pe,Me,et){de.push(pe),de.push(Me),de.push(et)}function Sr(de,pe,Me,et,St,Gt){var gr=(Gt-pe)/(et-pe);return de.push(Gt),de.push(Me+(St-Me)*gr),de.push(1),gr}function Er(de,pe,Me,et,St,Gt){var gr=(Gt-Me)/(St-Me);return de.push(pe+(et-pe)*gr),de.push(Gt),de.push(1),gr}function Fr(de,pe){for(var Me=[],et=0;et<de.length;et++){var St,Gt=de[et],gr=Gt.type;if(gr==="Point"||gr==="MultiPoint"||gr==="LineString")St=zr(Gt.geometry,pe);else if(gr==="MultiLineString"||gr==="Polygon"){St=[];for(var At=0;At<Gt.geometry.length;At++)St.push(zr(Gt.geometry[At],pe))}else if(gr==="MultiPolygon")for(St=[],At=0;At<Gt.geometry.length;At++){for(var ot=[],Ot=0;Ot<Gt.geometry[At].length;Ot++)ot.push(zr(Gt.geometry[At][Ot],pe));St.push(ot)}Me.push(Ne(Gt.id,gr,St,Gt.tags))}return Me}function zr(de,pe){var Me=[];Me.size=de.size,de.start!==void 0&&(Me.start=de.start,Me.end=de.end);for(var et=0;et<de.length;et+=3)Me.push(de[et]+pe,de[et+1],de[et+2]);return Me}function le(de,pe){if(de.transformed)return de;var Me,et,St,Gt=1<<de.z,gr=de.x,At=de.y;for(Me=0;Me<de.features.length;Me++){var ot=de.features[Me],Ot=ot.geometry,yr=ot.type;if(ot.geometry=[],yr===1)for(et=0;et<Ot.length;et+=2)ot.geometry.push(H(Ot[et],Ot[et+1],pe,Gt,gr,At));else for(et=0;et<Ot.length;et++){var kr=[];for(St=0;St<Ot[et].length;St+=2)kr.push(H(Ot[et][St],Ot[et][St+1],pe,Gt,gr,At));ot.geometry.push(kr)}}return de.transformed=!0,de}function H(de,pe,Me,et,St,Gt){return[Math.round(Me*(de*et-St)),Math.round(Me*(pe*et-Gt))]}function re(de,pe,Me,et,St){for(var Gt=pe===St.maxZoom?0:St.tolerance/((1<<pe)*St.extent),gr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Me,y:et,z:pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},At=0;At<de.length;At++){gr.numFeatures++,Re(gr,de[At],Gt,St);var ot=de[At].minX,Ot=de[At].minY,yr=de[At].maxX,kr=de[At].maxY;ot<gr.minX&&(gr.minX=ot),Ot<gr.minY&&(gr.minY=Ot),yr>gr.maxX&&(gr.maxX=yr),kr>gr.maxY&&(gr.maxY=kr)}return gr}function Re(de,pe,Me,et){var St=pe.geometry,Gt=pe.type,gr=[];if(Gt==="Point"||Gt==="MultiPoint")for(var At=0;At<St.length;At+=3)gr.push(St[At]),gr.push(St[At+1]),de.numPoints++,de.numSimplified++;else if(Gt==="LineString")Ke(gr,St,de,Me,!1,!1);else if(Gt==="MultiLineString"||Gt==="Polygon")for(At=0;At<St.length;At++)Ke(gr,St[At],de,Me,Gt==="Polygon",At===0);else if(Gt==="MultiPolygon")for(var ot=0;ot<St.length;ot++){var Ot=St[ot];for(At=0;At<Ot.length;At++)Ke(gr,Ot[At],de,Me,!0,At===0)}if(gr.length){var yr=pe.tags||null;if(Gt==="LineString"&&et.lineMetrics){for(var kr in yr={},pe.tags)yr[kr]=pe.tags[kr];yr.mapbox_clip_start=St.start/St.size,yr.mapbox_clip_end=St.end/St.size}var Ft={geometry:gr,type:Gt==="Polygon"||Gt==="MultiPolygon"?3:Gt==="LineString"||Gt==="MultiLineString"?2:1,tags:yr};pe.id!==null&&(Ft.id=pe.id),de.features.push(Ft)}}function Ke(de,pe,Me,et,St,Gt){var gr=et*et;if(et>0&&pe.size<(St?gr:et))Me.numPoints+=pe.length/3;else{for(var At=[],ot=0;ot<pe.length;ot+=3)(et===0||pe[ot+2]>gr)&&(Me.numSimplified++,At.push(pe[ot]),At.push(pe[ot+1])),Me.numPoints++;St&&function(Ot,yr){for(var kr=0,Ft=0,Mn=Ot.length,qn=Mn-2;Ft<Mn;qn=Ft,Ft+=2)kr+=(Ot[Ft]-Ot[qn])*(Ot[Ft+1]+Ot[qn+1]);if(kr>0===yr)for(Ft=0,Mn=Ot.length;Ft<Mn/2;Ft+=2){var ri=Ot[Ft],un=Ot[Ft+1];Ot[Ft]=Ot[Mn-2-Ft],Ot[Ft+1]=Ot[Mn-1-Ft],Ot[Mn-2-Ft]=ri,Ot[Mn-1-Ft]=un}}(At,Gt),de.push(At)}}function Tt(de,pe){var Me=(pe=this.options=function(St,Gt){for(var gr in Gt)St[gr]=Gt[gr];return St}(Object.create(this.options),pe)).debug;if(Me&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var et=function(St,Gt){var gr=[];if(St.type==="FeatureCollection")for(var At=0;At<St.features.length;At++)Pt(gr,St.features[At],Gt,At);else Pt(gr,St.type==="Feature"?St:{geometry:St},Gt);return gr}(de,pe);this.tiles={},this.tileCoords=[],Me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(et=function(St,Gt){var gr=Gt.buffer/Gt.extent,At=St,ot=Xr(St,1,-1-gr,gr,0,-1,2,Gt),Ot=Xr(St,1,1-gr,2+gr,0,-1,2,Gt);return(ot||Ot)&&(At=Xr(St,1,-gr,1+gr,0,-1,2,Gt)||[],ot&&(At=Fr(ot,1).concat(At)),Ot&&(At=At.concat(Fr(Ot,-1)))),At}(et,pe)).length&&this.splitTile(et,0,0,0),Me&&(et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function or(de,pe,Me){return 32*((1<<de)*Me+pe)+de}function jt(de,pe){var Me=de.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);var et=this._geoJSONIndex.getTile(Me.z,Me.x,Me.y);if(!et)return pe(null,null);var St=new ze(et.features),Gt=Le(St);Gt.byteOffset===0&&Gt.byteLength===Gt.buffer.byteLength||(Gt=new Uint8Array(Gt)),pe(null,{vectorTile:St,rawData:Gt.buffer})}me.prototype.load=function(de){var pe=this.options,Me=pe.log,et=pe.minZoom,St=pe.maxZoom,Gt=pe.nodeSize;Me&&console.time("total time");var gr="prepare "+de.length+" points";Me&&console.time(gr),this.points=de;for(var At=[],ot=0;ot<de.length;ot++)de[ot].geometry&&At.push(Ze(de[ot],ot));this.trees[St+1]=new tt(At,Ye,ft,Gt,Float32Array),Me&&console.timeEnd(gr);for(var Ot=St;Ot>=et;Ot--){var yr=+Date.now();At=this._cluster(At,Ot),this.trees[Ot]=new tt(At,Ye,ft,Gt,Float32Array),Me&&console.log("z%d: %d clusters in %dms",Ot,At.length,+Date.now()-yr)}return Me&&console.timeEnd("total time"),this},me.prototype.getClusters=function(de,pe){var Me=((de[0]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,de[1])),St=de[2]===180?180:((de[2]+180)%360+360)%360-180,Gt=Math.max(-90,Math.min(90,de[3]));if(de[2]-de[0]>=360)Me=-180,St=180;else if(Me>St){var gr=this.getClusters([Me,et,180,Gt],pe),At=this.getClusters([-180,et,St,Gt],pe);return gr.concat(At)}for(var ot=this.trees[this._limitZoom(pe)],Ot=[],yr=0,kr=ot.range(Je(Me),$e(Gt),Je(St),$e(et));yr<kr.length;yr+=1){var Ft=ot.points[kr[yr]];Ot.push(Ft.numPoints?pt(Ft):this.points[Ft.index])}return Ot},me.prototype.getChildren=function(de){var pe=this._getOriginId(de),Me=this._getOriginZoom(de),et="No cluster with the specified id.",St=this.trees[Me];if(!St)throw new Error(et);var Gt=St.points[pe];if(!Gt)throw new Error(et);for(var gr=this.options.radius/(this.options.extent*Math.pow(2,Me-1)),At=[],ot=0,Ot=St.within(Gt.x,Gt.y,gr);ot<Ot.length;ot+=1){var yr=St.points[Ot[ot]];yr.parentId===de&&At.push(yr.numPoints?pt(yr):this.points[yr.index])}if(At.length===0)throw new Error(et);return At},me.prototype.getLeaves=function(de,pe,Me){var et=[];return this._appendLeaves(et,de,pe=pe||10,Me=Me||0,0),et},me.prototype.getTile=function(de,pe,Me){var et=this.trees[this._limitZoom(de)],St=Math.pow(2,de),Gt=this.options,gr=Gt.radius/Gt.extent,At=(Me-gr)/St,ot=(Me+1+gr)/St,Ot={features:[]};return this._addTileFeatures(et.range((pe-gr)/St,At,(pe+1+gr)/St,ot),et.points,pe,Me,St,Ot),pe===0&&this._addTileFeatures(et.range(1-gr/St,At,1,ot),et.points,St,Me,St,Ot),pe===St-1&&this._addTileFeatures(et.range(0,At,gr/St,ot),et.points,-1,Me,St,Ot),Ot.features.length?Ot:null},me.prototype.getClusterExpansionZoom=function(de){for(var pe=this._getOriginZoom(de)-1;pe<=this.options.maxZoom;){var Me=this.getChildren(de);if(pe++,Me.length!==1)break;de=Me[0].properties.cluster_id}return pe},me.prototype._appendLeaves=function(de,pe,Me,et,St){for(var Gt=0,gr=this.getChildren(pe);Gt<gr.length;Gt+=1){var At=gr[Gt],ot=At.properties;if(ot&&ot.cluster?St+ot.point_count<=et?St+=ot.point_count:St=this._appendLeaves(de,ot.cluster_id,Me,et,St):St<et?St++:de.push(At),de.length===Me)break}return St},me.prototype._addTileFeatures=function(de,pe,Me,et,St,Gt){for(var gr=0,At=de;gr<At.length;gr+=1){var ot=pe[At[gr]],Ot=ot.numPoints,yr={type:1,geometry:[[Math.round(this.options.extent*(ot.x*St-Me)),Math.round(this.options.extent*(ot.y*St-et))]],tags:Ot?Ht(ot):this.points[ot.index].properties},kr=void 0;Ot?kr=ot.id:this.options.generateId?kr=ot.index:this.points[ot.index].id&&(kr=this.points[ot.index].id),kr!==void 0&&(yr.id=kr),Gt.features.push(yr)}},me.prototype._limitZoom=function(de){return Math.max(this.options.minZoom,Math.min(+de,this.options.maxZoom+1))},me.prototype._cluster=function(de,pe){for(var Me=[],et=this.options,St=et.reduce,Gt=et.minPoints,gr=et.radius/(et.extent*Math.pow(2,pe)),At=0;At<de.length;At++){var ot=de[At];if(!(ot.zoom<=pe)){ot.zoom=pe;for(var Ot=this.trees[pe+1],yr=Ot.within(ot.x,ot.y,gr),kr=ot.numPoints||1,Ft=kr,Mn=0,qn=yr;Mn<qn.length;Mn+=1){var ri=Ot.points[qn[Mn]];ri.zoom>pe&&(Ft+=ri.numPoints||1)}if(Ft>=Gt){for(var un=ot.x*kr,Yn=ot.y*kr,jn=St&&kr>1?this._map(ot,!0):null,Kn=(At<<5)+(pe+1)+this.points.length,aa=0,vi=yr;aa<vi.length;aa+=1){var da=Ot.points[vi[aa]];if(!(da.zoom<=pe)){da.zoom=pe;var Oa=da.numPoints||1;un+=da.x*Oa,Yn+=da.y*Oa,da.parentId=Kn,St&&(jn||(jn=this._map(ot,!0)),St(jn,this._map(da)))}}ot.parentId=Kn,Me.push(Ge(un/Ft,Yn/Ft,Kn,Ft,jn))}else if(Me.push(ot),Ft>1)for(var xa=0,Va=yr;xa<Va.length;xa+=1){var Sa=Ot.points[Va[xa]];Sa.zoom<=pe||(Sa.zoom=pe,Me.push(Sa))}}}return Me},me.prototype._getOriginId=function(de){return de-this.points.length>>5},me.prototype._getOriginZoom=function(de){return(de-this.points.length)%32},me.prototype._map=function(de,pe){if(de.numPoints)return pe?Te({},de.properties):de.properties;var Me=this.points[de.index].properties,et=this.options.map(Me);return pe&&et===Me?Te({},et):et},Tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tt.prototype.splitTile=function(de,pe,Me,et,St,Gt,gr){for(var At=[de,pe,Me,et],ot=this.options,Ot=ot.debug;At.length;){et=At.pop(),Me=At.pop(),pe=At.pop(),de=At.pop();var yr=1<<pe,kr=or(pe,Me,et),Ft=this.tiles[kr];if(!Ft&&(Ot>1&&console.time("creation"),Ft=this.tiles[kr]=re(de,pe,Me,et,ot),this.tileCoords.push({z:pe,x:Me,y:et}),Ot)){Ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,Me,et,Ft.numFeatures,Ft.numPoints,Ft.numSimplified),console.timeEnd("creation"));var Mn="z"+pe;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Ft.source=de,St){if(pe===ot.maxZoom||pe===St)continue;var qn=1<<St-pe;if(Me!==Math.floor(Gt/qn)||et!==Math.floor(gr/qn))continue}else if(pe===ot.indexMaxZoom||Ft.numPoints<=ot.indexMaxPoints)continue;if(Ft.source=null,de.length!==0){Ot>1&&console.time("clipping");var ri,un,Yn,jn,Kn,aa,vi=.5*ot.buffer/ot.extent,da=.5-vi,Oa=.5+vi,xa=1+vi;ri=un=Yn=jn=null,Kn=Xr(de,yr,Me-vi,Me+Oa,0,Ft.minX,Ft.maxX,ot),aa=Xr(de,yr,Me+da,Me+xa,0,Ft.minX,Ft.maxX,ot),de=null,Kn&&(ri=Xr(Kn,yr,et-vi,et+Oa,1,Ft.minY,Ft.maxY,ot),un=Xr(Kn,yr,et+da,et+xa,1,Ft.minY,Ft.maxY,ot),Kn=null),aa&&(Yn=Xr(aa,yr,et-vi,et+Oa,1,Ft.minY,Ft.maxY,ot),jn=Xr(aa,yr,et+da,et+xa,1,Ft.minY,Ft.maxY,ot),aa=null),Ot>1&&console.timeEnd("clipping"),At.push(ri||[],pe+1,2*Me,2*et),At.push(un||[],pe+1,2*Me,2*et+1),At.push(Yn||[],pe+1,2*Me+1,2*et),At.push(jn||[],pe+1,2*Me+1,2*et+1)}}},Tt.prototype.getTile=function(de,pe,Me){var et=this.options,St=et.extent,Gt=et.debug;if(de<0||de>24)return null;var gr=1<<de,At=or(de,pe=(pe%gr+gr)%gr,Me);if(this.tiles[At])return le(this.tiles[At],St);Gt>1&&console.log("drilling down to z%d-%d-%d",de,pe,Me);for(var ot,Ot=de,yr=pe,kr=Me;!ot&&Ot>0;)Ot--,yr=Math.floor(yr/2),kr=Math.floor(kr/2),ot=this.tiles[or(Ot,yr,kr)];return ot&&ot.source?(Gt>1&&console.log("found parent tile z%d-%d-%d",Ot,yr,kr),Gt>1&&console.time("drilling down"),this.splitTile(ot.source,Ot,yr,kr,de,pe,Me),Gt>1&&console.timeEnd("drilling down"),this.tiles[At]?le(this.tiles[At],St):null):null};var wt=function(de){function pe(Me,et,St,Gt){de.call(this,Me,et,St,jt),Gt&&(this.loadGeoJSON=Gt)}return de&&(pe.__proto__=de),(pe.prototype=Object.create(de&&de.prototype)).constructor=pe,pe.prototype.loadData=function(Me,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=Me,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},pe.prototype._loadData=function(){var Me=this;if(this._pendingCallback&&this._pendingLoadDataParams){var et=this._pendingCallback,St=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Gt=!!(St&&St.request&&St.request.collectResourceTiming)&&new w.RequestPerformance(St.request);this.loadGeoJSON(St,function(gr,At){if(gr||!At)return et(gr);if(typeof At!="object")return et(new Error("Input data given to '"+St.source+"' is not a valid GeoJSON object."));(function Ft(Mn,qn){var ri,un=Mn&&Mn.type;if(un==="FeatureCollection")for(ri=0;ri<Mn.features.length;ri++)Ft(Mn.features[ri],qn);else if(un==="GeometryCollection")for(ri=0;ri<Mn.geometries.length;ri++)Ft(Mn.geometries[ri],qn);else if(un==="Feature")Ft(Mn.geometry,qn);else if(un==="Polygon")M(Mn.coordinates,qn);else if(un==="MultiPolygon")for(ri=0;ri<Mn.coordinates.length;ri++)M(Mn.coordinates[ri],qn);return Mn})(At,!0);try{if(St.filter){var ot=w.createExpression(St.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ot.result==="error")throw new Error(ot.value.map(function(Ft){return Ft.key+": "+Ft.message}).join(", "));var Ot=At.features.filter(function(Ft){return ot.value.evaluate({zoom:0},Ft)});At={type:"FeatureCollection",features:Ot}}Me._geoJSONIndex=St.cluster?new me(function(Ft){var Mn=Ft.superclusterOptions,qn=Ft.clusterProperties;if(!qn||!Mn)return Mn;for(var ri={},un={},Yn={accumulated:null,zoom:0},jn={properties:null},Kn=Object.keys(qn),aa=0,vi=Kn;aa<vi.length;aa+=1){var da=vi[aa],Oa=qn[da],xa=Oa[0],Va=w.createExpression(Oa[1]),Sa=w.createExpression(typeof xa=="string"?[xa,["accumulated"],["get",da]]:xa);ri[da]=Va.value,un[da]=Sa.value}return Mn.map=function(gs){jn.properties=gs;for(var io={},Oo=0,ai=Kn;Oo<ai.length;Oo+=1){var _i=ai[Oo];io[_i]=ri[_i].evaluate(Yn,jn)}return io},Mn.reduce=function(gs,io){jn.properties=io;for(var Oo=0,ai=Kn;Oo<ai.length;Oo+=1){var _i=ai[Oo];Yn.accumulated=gs[_i],gs[_i]=un[_i].evaluate(Yn,jn)}},Mn}(St)).load(At.features):function(Ft,Mn){return new Tt(Ft,Mn)}(At,St.geojsonVtOptions)}catch(Ft){return et(Ft)}Me.loaded={};var yr={};if(Gt){var kr=Gt.finish();kr&&(yr.resourceTiming={},yr.resourceTiming[St.source]=JSON.parse(JSON.stringify(kr)))}et(null,yr)})}},pe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},pe.prototype.reloadTile=function(Me,et){var St=this.loaded;return St&&St[Me.uid]?de.prototype.reloadTile.call(this,Me,et):this.loadTile(Me,et)},pe.prototype.loadGeoJSON=function(Me,et){if(Me.request)w.getJSON(Me.request,et);else{if(typeof Me.data!="string")return et(new Error("Input data given to '"+Me.source+"' is not a valid GeoJSON object."));try{return et(null,JSON.parse(Me.data))}catch(St){return et(new Error("Input data given to '"+Me.source+"' is not a valid GeoJSON object."))}}},pe.prototype.removeSource=function(Me,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},pe.prototype.getClusterExpansionZoom=function(Me,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(Me.clusterId))}catch(St){et(St)}},pe.prototype.getClusterChildren=function(Me,et){try{et(null,this._geoJSONIndex.getChildren(Me.clusterId))}catch(St){et(St)}},pe.prototype.getClusterLeaves=function(Me,et){try{et(null,this._geoJSONIndex.getLeaves(Me.clusterId,Me.limit,Me.offset))}catch(St){et(St)}},pe}(fe),It=function(de){var pe=this;this.self=de,this.actor=new w.Actor(de,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:fe,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Me,et){if(pe.workerSourceTypes[Me])throw new Error('Worker source with name "'+Me+'" already registered.');pe.workerSourceTypes[Me]=et},this.self.registerRTLTextPlugin=function(Me){if(w.plugin.isParsed())throw new Error("RTL text plugin already registered.");w.plugin.applyArabicShaping=Me.applyArabicShaping,w.plugin.processBidirectionalText=Me.processBidirectionalText,w.plugin.processStyledBidirectionalText=Me.processStyledBidirectionalText}};return It.prototype.setReferrer=function(de,pe){this.referrer=pe},It.prototype.setImages=function(de,pe,Me){for(var et in this.availableImages[de]=pe,this.workerSources[de]){var St=this.workerSources[de][et];for(var Gt in St)St[Gt].availableImages=pe}Me()},It.prototype.setLayers=function(de,pe,Me){this.getLayerIndex(de).replace(pe),Me()},It.prototype.updateLayers=function(de,pe,Me){this.getLayerIndex(de).update(pe.layers,pe.removedIds),Me()},It.prototype.loadTile=function(de,pe,Me){this.getWorkerSource(de,pe.type,pe.source).loadTile(pe,Me)},It.prototype.loadDEMTile=function(de,pe,Me){this.getDEMWorkerSource(de,pe.source).loadTile(pe,Me)},It.prototype.reloadTile=function(de,pe,Me){this.getWorkerSource(de,pe.type,pe.source).reloadTile(pe,Me)},It.prototype.abortTile=function(de,pe,Me){this.getWorkerSource(de,pe.type,pe.source).abortTile(pe,Me)},It.prototype.removeTile=function(de,pe,Me){this.getWorkerSource(de,pe.type,pe.source).removeTile(pe,Me)},It.prototype.removeDEMTile=function(de,pe){this.getDEMWorkerSource(de,pe.source).removeTile(pe)},It.prototype.removeSource=function(de,pe,Me){if(this.workerSources[de]&&this.workerSources[de][pe.type]&&this.workerSources[de][pe.type][pe.source]){var et=this.workerSources[de][pe.type][pe.source];delete this.workerSources[de][pe.type][pe.source],et.removeSource!==void 0?et.removeSource(pe,Me):Me()}},It.prototype.loadWorkerSource=function(de,pe,Me){try{this.self.importScripts(pe.url),Me()}catch(et){Me(et.toString())}},It.prototype.syncRTLPluginState=function(de,pe,Me){try{w.plugin.setState(pe);var et=w.plugin.getPluginURL();if(w.plugin.isLoaded()&&!w.plugin.isParsed()&&et!=null){this.self.importScripts(et);var St=w.plugin.isParsed();Me(St?void 0:new Error("RTL Text Plugin failed to import scripts from "+et),St)}}catch(Gt){Me(Gt.toString())}},It.prototype.getAvailableImages=function(de){var pe=this.availableImages[de];return pe||(pe=[]),pe},It.prototype.getLayerIndex=function(de){var pe=this.layerIndexes[de];return pe||(pe=this.layerIndexes[de]=new q),pe},It.prototype.getWorkerSource=function(de,pe,Me){var et=this;return this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][pe]||(this.workerSources[de][pe]={}),this.workerSources[de][pe][Me]||(this.workerSources[de][pe][Me]=new this.workerSourceTypes[pe]({send:function(St,Gt,gr){et.actor.send(St,Gt,gr,de)}},this.getLayerIndex(de),this.getAvailableImages(de))),this.workerSources[de][pe][Me]},It.prototype.getDEMWorkerSource=function(de,pe){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][pe]||(this.demWorkerSources[de][pe]=new J),this.demWorkerSources[de][pe]},It.prototype.enforceCacheSizeLimit=function(de,pe){w.enforceCacheSizeLimit(pe)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new It(self)),It}),K(["./shared"],function(w){"use strict";var W=w.createCommonjsModule(function(b){function A(Z){return!C(Z)}function C(Z){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ae,Ae,at=new Blob([""],{type:"text/javascript"}),bt=URL.createObjectURL(at);try{Ae=new Worker(bt),ae=!0}catch(Vt){ae=!1}return Ae&&Ae.terminate(),URL.revokeObjectURL(bt),ae}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ae=document.createElement("canvas");ae.width=ae.height=1;var Ae=ae.getContext("2d");if(!Ae)return!1;var at=Ae.getImageData(0,0,1,1);return at&&at.width===ae.width}()?(I[ee=Z&&Z.failIfMajorPerformanceCaveat]===void 0&&(I[ee]=function(ae){var Ae=function(bt){var Vt=document.createElement("canvas"),Wt=Object.create(A.webGLContextAttributes);return Wt.failIfMajorPerformanceCaveat=bt,Vt.probablySupportsContext?Vt.probablySupportsContext("webgl",Wt)||Vt.probablySupportsContext("experimental-webgl",Wt):Vt.supportsContext?Vt.supportsContext("webgl",Wt)||Vt.supportsContext("experimental-webgl",Wt):Vt.getContext("webgl",Wt)||Vt.getContext("experimental-webgl",Wt)}(ae);if(!Ae)return!1;var at=Ae.createShader(Ae.VERTEX_SHADER);return!(!at||Ae.isContextLost())&&(Ae.shaderSource(at,"void main() {}"),Ae.compileShader(at),Ae.getShaderParameter(at,Ae.COMPILE_STATUS)===!0)}(ee)),I[ee]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ee}b.exports?b.exports=A:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=A,window.mapboxgl.notSupportedReason=C);var I={};A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),j={create:function(b,A,C){var I=w.window.document.createElement(b);return A!==void 0&&(I.className=A),C&&C.appendChild(I),I},createNS:function(b,A){return w.window.document.createElementNS(b,A)}},q=w.window.document&&w.window.document.documentElement.style;function Q(b){if(!q)return b[0];for(var A=0;A<b.length;A++)if(b[A]in q)return b[A];return b[0]}var ie,te=Q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){q&&te&&(ie=q[te],q[te]="none")},j.enableDrag=function(){q&&te&&(q[te]=ie)};var we=Q(["transform","WebkitTransform"]);j.setTransform=function(b,A){b.style[we]=A};var fe=!1;try{var ce=Object.defineProperty({},"passive",{get:function(){fe=!0}});w.window.addEventListener("test",ce,ce),w.window.removeEventListener("test",ce,ce)}catch(b){fe=!1}j.addEventListener=function(b,A,C,I){I===void 0&&(I={}),b.addEventListener(A,C,"passive"in I&&fe?I:I.capture)},j.removeEventListener=function(b,A,C,I){I===void 0&&(I={}),b.removeEventListener(A,C,"passive"in I&&fe?I:I.capture)};var J=function(b){b.preventDefault(),b.stopPropagation(),w.window.removeEventListener("click",J,!0)};function M(b){var A=b.userImage;return!!(A&&A.render&&A.render())&&(b.data.replace(new Uint8Array(A.data.buffer)),!0)}j.suppressClick=function(){w.window.addEventListener("click",J,!0),w.window.setTimeout(function(){w.window.removeEventListener("click",J,!0)},0)},j.mousePos=function(b,A){var C=b.getBoundingClientRect();return new w.Point(A.clientX-C.left-b.clientLeft,A.clientY-C.top-b.clientTop)},j.touchPos=function(b,A){for(var C=b.getBoundingClientRect(),I=[],Z=0;Z<A.length;Z++)I.push(new w.Point(A[Z].clientX-C.left-b.clientLeft,A[Z].clientY-C.top-b.clientTop));return I},j.mouseButton=function(b){return w.window.InstallTrigger!==void 0&&b.button===2&&b.ctrlKey&&w.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:b.button},j.remove=function(b){b.parentNode&&b.parentNode.removeChild(b)};var E=function(b){function A(){b.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new w.RGBAImage({width:1,height:1}),this.dirty=!0}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.isLoaded=function(){return this.loaded},A.prototype.setLoaded=function(C){if(this.loaded!==C&&(this.loaded=C,C)){for(var I=0,Z=this.requestors;I<Z.length;I+=1){var ee=Z[I];this._notify(ee.ids,ee.callback)}this.requestors=[]}},A.prototype.getImage=function(C){return this.images[C]},A.prototype.addImage=function(C,I){this._validate(C,I)&&(this.images[C]=I)},A.prototype._validate=function(C,I){var Z=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchX" value'))),Z=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchY" value'))),Z=!1),this._validateContent(I.content,I)||(this.fire(new w.ErrorEvent(new Error('Image "'+C+'" has invalid "content" value'))),Z=!1),Z},A.prototype._validateStretch=function(C,I){if(!C)return!0;for(var Z=0,ee=0,ae=C;ee<ae.length;ee+=1){var Ae=ae[ee];if(Ae[0]<Z||Ae[1]<Ae[0]||I<Ae[1])return!1;Z=Ae[1]}return!0},A.prototype._validateContent=function(C,I){return!(C&&(C.length!==4||C[0]<0||I.data.width<C[0]||C[1]<0||I.data.height<C[1]||C[2]<0||I.data.width<C[2]||C[3]<0||I.data.height<C[3]||C[2]<C[0]||C[3]<C[1]))},A.prototype.updateImage=function(C,I){I.version=this.images[C].version+1,this.images[C]=I,this.updatedImages[C]=!0},A.prototype.removeImage=function(C){var I=this.images[C];delete this.images[C],delete this.patterns[C],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()},A.prototype.listImages=function(){return Object.keys(this.images)},A.prototype.getImages=function(C,I){var Z=!0;if(!this.isLoaded())for(var ee=0,ae=C;ee<ae.length;ee+=1)this.images[ae[ee]]||(Z=!1);this.isLoaded()||Z?this._notify(C,I):this.requestors.push({ids:C,callback:I})},A.prototype._notify=function(C,I){for(var Z={},ee=0,ae=C;ee<ae.length;ee+=1){var Ae=ae[ee];this.images[Ae]||this.fire(new w.Event("styleimagemissing",{id:Ae}));var at=this.images[Ae];at?Z[Ae]={data:at.data.clone(),pixelRatio:at.pixelRatio,sdf:at.sdf,version:at.version,stretchX:at.stretchX,stretchY:at.stretchY,content:at.content,hasRenderCallback:!!(at.userImage&&at.userImage.render)}:w.warnOnce('Image "'+Ae+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}I(null,Z)},A.prototype.getPixelSize=function(){var C=this.atlasImage;return{width:C.width,height:C.height}},A.prototype.getPattern=function(C){var I=this.patterns[C],Z=this.getImage(C);if(!Z)return null;if(I&&I.position.version===Z.version)return I.position;if(I)I.position.version=Z.version;else{var ee={w:Z.data.width+2,h:Z.data.height+2,x:0,y:0},ae=new w.ImagePosition(ee,Z);this.patterns[C]={bin:ee,position:ae}}return this._updatePatternAtlas(),this.patterns[C].position},A.prototype.bind=function(C){var I=C.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new w.Texture(C,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)},A.prototype._updatePatternAtlas=function(){var C=[];for(var I in this.patterns)C.push(this.patterns[I].bin);var Z=w.potpack(C),ee=Z.w,ae=Z.h,Ae=this.atlasImage;for(var at in Ae.resize({width:ee||1,height:ae||1}),this.patterns){var bt=this.patterns[at].bin,Vt=bt.x+1,Wt=bt.y+1,$t=this.images[at].data,dr=$t.width,hr=$t.height;w.RGBAImage.copy($t,Ae,{x:0,y:0},{x:Vt,y:Wt},{width:dr,height:hr}),w.RGBAImage.copy($t,Ae,{x:0,y:hr-1},{x:Vt,y:Wt-1},{width:dr,height:1}),w.RGBAImage.copy($t,Ae,{x:0,y:0},{x:Vt,y:Wt+hr},{width:dr,height:1}),w.RGBAImage.copy($t,Ae,{x:dr-1,y:0},{x:Vt-1,y:Wt},{width:1,height:hr}),w.RGBAImage.copy($t,Ae,{x:0,y:0},{x:Vt+dr,y:Wt},{width:1,height:hr})}this.dirty=!0},A.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},A.prototype.dispatchRenderCallbacks=function(C){for(var I=0,Z=C;I<Z.length;I+=1){var ee=Z[I];if(!this.callbackDispatchedThisFrame[ee]){this.callbackDispatchedThisFrame[ee]=!0;var ae=this.images[ee];M(ae)&&this.updateImage(ee,ae)}}},A}(w.Evented),ge=Be,be=Be,ze=1e20;function Be(b,A,C,I,Z,ee){this.fontSize=b||24,this.buffer=A===void 0?3:A,this.cutoff=I||.25,this.fontFamily=Z||"sans-serif",this.fontWeight=ee||"normal",this.radius=C||8;var ae=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ae,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ae*ae),this.gridInner=new Float64Array(ae*ae),this.f=new Float64Array(ae),this.d=new Float64Array(ae),this.z=new Float64Array(ae+1),this.v=new Int16Array(ae),this.middle=Math.round(ae/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ue(b,A,C,I,Z,ee,ae){for(var Ae=0;Ae<A;Ae++){for(var at=0;at<C;at++)I[at]=b[at*A+Ae];for(it(I,Z,ee,ae,C),at=0;at<C;at++)b[at*A+Ae]=Z[at]}for(at=0;at<C;at++){for(Ae=0;Ae<A;Ae++)I[Ae]=b[at*A+Ae];for(it(I,Z,ee,ae,A),Ae=0;Ae<A;Ae++)b[at*A+Ae]=Math.sqrt(Z[Ae])}}function it(b,A,C,I,Z){C[0]=0,I[0]=-ze,I[1]=+ze;for(var ee=1,ae=0;ee<Z;ee++){for(var Ae=(b[ee]+ee*ee-(b[C[ae]]+C[ae]*C[ae]))/(2*ee-2*C[ae]);Ae<=I[ae];)ae--,Ae=(b[ee]+ee*ee-(b[C[ae]]+C[ae]*C[ae]))/(2*ee-2*C[ae]);C[++ae]=ee,I[ae]=Ae,I[ae+1]=+ze}for(ee=0,ae=0;ee<Z;ee++){for(;I[ae+1]<ee;)ae++;A[ee]=(ee-C[ae])*(ee-C[ae])+b[C[ae]]}}Be.prototype.draw=function(b){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(b,this.buffer,this.middle);for(var A=this.ctx.getImageData(0,0,this.size,this.size),C=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var Z=A.data[4*I+3]/255;this.gridOuter[I]=Z===1?0:Z===0?ze:Math.pow(Math.max(0,.5-Z),2),this.gridInner[I]=Z===1?ze:Z===0?0:Math.pow(Math.max(0,Z-.5),2)}for(Ue(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ue(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++)C[I]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[I]-this.gridInner[I])/this.radius+this.cutoff))));return C},ge.default=be;var ht=function(b,A){this.requestManager=b,this.localIdeographFontFamily=A,this.entries={}};ht.prototype.setURL=function(b){this.url=b},ht.prototype.getGlyphs=function(b,A){var C=this,I=[];for(var Z in b)for(var ee=0,ae=b[Z];ee<ae.length;ee+=1)I.push({stack:Z,id:ae[ee]});w.asyncAll(I,function(Ae,at){var bt=Ae.stack,Vt=Ae.id,Wt=C.entries[bt];Wt||(Wt=C.entries[bt]={glyphs:{},requests:{},ranges:{}});var $t=Wt.glyphs[Vt];if($t===void 0){if($t=C._tinySDF(Wt,bt,Vt))return Wt.glyphs[Vt]=$t,void at(null,{stack:bt,id:Vt,glyph:$t});var dr=Math.floor(Vt/256);if(256*dr>65535)at(new Error("glyphs > 65535 not supported"));else if(Wt.ranges[dr])at(null,{stack:bt,id:Vt,glyph:$t});else{var hr=Wt.requests[dr];hr||(hr=Wt.requests[dr]=[],ht.loadGlyphRange(bt,dr,C.url,C.requestManager,function(Rr,lr){if(lr){for(var Ir in lr)C._doesCharSupportLocalGlyph(+Ir)||(Wt.glyphs[+Ir]=lr[+Ir]);Wt.ranges[dr]=!0}for(var Hr=0,en=hr;Hr<en.length;Hr+=1)(0,en[Hr])(Rr,lr);delete Wt.requests[dr]})),hr.push(function(Rr,lr){Rr?at(Rr):lr&&at(null,{stack:bt,id:Vt,glyph:lr[Vt]||null})})}}else at(null,{stack:bt,id:Vt,glyph:$t})},function(Ae,at){if(Ae)A(Ae);else if(at){for(var bt={},Vt=0,Wt=at;Vt<Wt.length;Vt+=1){var $t=Wt[Vt],dr=$t.stack,hr=$t.id,Rr=$t.glyph;(bt[dr]||(bt[dr]={}))[hr]=Rr&&{id:Rr.id,bitmap:Rr.bitmap.clone(),metrics:Rr.metrics}}A(null,bt)}})},ht.prototype._doesCharSupportLocalGlyph=function(b){return!!this.localIdeographFontFamily&&(w.isChar["CJK Unified Ideographs"](b)||w.isChar["Hangul Syllables"](b)||w.isChar.Hiragana(b)||w.isChar.Katakana(b))},ht.prototype._tinySDF=function(b,A,C){var I=this.localIdeographFontFamily;if(I&&this._doesCharSupportLocalGlyph(C)){var Z=b.tinySDF;if(!Z){var ee="400";/bold/i.test(A)?ee="900":/medium/i.test(A)?ee="500":/light/i.test(A)&&(ee="200"),Z=b.tinySDF=new ht.TinySDF(24,3,8,.25,I,ee)}return{id:C,bitmap:new w.AlphaImage({width:30,height:30},Z.draw(String.fromCharCode(C))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ht.loadGlyphRange=function(b,A,C,I,Z){var ee=256*A,ae=ee+255,Ae=I.transformRequest(I.normalizeGlyphsURL(C).replace("{fontstack}",b).replace("{range}",ee+"-"+ae),w.ResourceType.Glyphs);w.getArrayBuffer(Ae,function(at,bt){if(at)Z(at);else if(bt){for(var Vt={},Wt=0,$t=w.parseGlyphPBF(bt);Wt<$t.length;Wt+=1){var dr=$t[Wt];Vt[dr.id]=dr}Z(null,Vt)}})},ht.TinySDF=ge;var Le=function(){this.specification=w.styleSpec.light.position};Le.prototype.possiblyEvaluate=function(b,A){return w.sphericalToCartesian(b.expression.evaluate(A))},Le.prototype.interpolate=function(b,A,C){return{x:w.number(b.x,A.x,C),y:w.number(b.y,A.y,C),z:w.number(b.z,A.z,C)}};var Se=new w.Properties({anchor:new w.DataConstantProperty(w.styleSpec.light.anchor),position:new Le,color:new w.DataConstantProperty(w.styleSpec.light.color),intensity:new w.DataConstantProperty(w.styleSpec.light.intensity)}),ye=function(b){function A(C){b.call(this),this._transitionable=new w.Transitionable(Se),this.setLight(C),this._transitioning=this._transitionable.untransitioned()}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getLight=function(){return this._transitionable.serialize()},A.prototype.setLight=function(C,I){if(I===void 0&&(I={}),!this._validate(w.validateLight,C,I))for(var Z in C){var ee=C[Z];w.endsWith(Z,"-transition")?this._transitionable.setTransition(Z.slice(0,-11),ee):this._transitionable.setValue(Z,ee)}},A.prototype.updateTransitions=function(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)},A.prototype.hasTransition=function(){return this._transitioning.hasTransition()},A.prototype.recalculate=function(C){this.properties=this._transitioning.possiblyEvaluate(C)},A.prototype._validate=function(C,I,Z){return(!Z||Z.validate!==!1)&&w.emitValidationErrors(this,C.call(w.validateStyle,w.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:w.styleSpec})))},A}(w.Evented),Ve=function(b,A){this.width=b,this.height=A,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ve.prototype.getDash=function(b,A){var C=b.join(",")+String(A);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(b,A)),this.dashEntry[C]},Ve.prototype.getDashRanges=function(b,A,C){var I=[],Z=b.length%2==1?-b[b.length-1]*C:0,ee=b[0]*C,ae=!0;I.push({left:Z,right:ee,isDash:ae,zeroLength:b[0]===0});for(var Ae=b[0],at=1;at<b.length;at++){var bt=b[at];I.push({left:Z=Ae*C,right:ee=(Ae+=bt)*C,isDash:ae=!ae,zeroLength:bt===0})}return I},Ve.prototype.addRoundDash=function(b,A,C){for(var I=A/2,Z=-C;Z<=C;Z++)for(var ee=this.width*(this.nextRow+C+Z),ae=0,Ae=b[ae],at=0;at<this.width;at++){at/Ae.right>1&&(Ae=b[++ae]);var bt=Math.abs(at-Ae.left),Vt=Math.abs(at-Ae.right),Wt=Math.min(bt,Vt),$t=void 0,dr=Z/C*(I+1);if(Ae.isDash){var hr=I-Math.abs(dr);$t=Math.sqrt(Wt*Wt+hr*hr)}else $t=I-Math.sqrt(Wt*Wt+dr*dr);this.data[ee+at]=Math.max(0,Math.min(255,$t+128))}},Ve.prototype.addRegularDash=function(b){for(var A=b.length-1;A>=0;--A){var C=b[A],I=b[A+1];C.zeroLength?b.splice(A,1):I&&I.isDash===C.isDash&&(I.left=C.left,b.splice(A,1))}var Z=b[0],ee=b[b.length-1];Z.isDash===ee.isDash&&(Z.left=ee.left-this.width,ee.right=Z.right+this.width);for(var ae=this.width*this.nextRow,Ae=0,at=b[Ae],bt=0;bt<this.width;bt++){bt/at.right>1&&(at=b[++Ae]);var Vt=Math.abs(bt-at.left),Wt=Math.abs(bt-at.right),$t=Math.min(Vt,Wt);this.data[ae+bt]=Math.max(0,Math.min(255,(at.isDash?$t:-$t)+128))}},Ve.prototype.addDash=function(b,A){var C=A?7:0,I=2*C+1;if(this.nextRow+I>this.height)return w.warnOnce("LineAtlas out of space"),null;for(var Z=0,ee=0;ee<b.length;ee++)Z+=b[ee];if(Z!==0){var ae=this.width/Z,Ae=this.getDashRanges(b,this.width,ae);A?this.addRoundDash(Ae,ae,C):this.addRegularDash(Ae)}var at={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:Z};return this.nextRow+=I,this.dirty=!0,at},Ve.prototype.bind=function(b){var A=b.gl;this.texture?(A.bindTexture(A.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,A.texSubImage2D(A.TEXTURE_2D,0,0,0,this.width,this.height,A.ALPHA,A.UNSIGNED_BYTE,this.data))):(this.texture=A.createTexture(),A.bindTexture(A.TEXTURE_2D,this.texture),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.REPEAT),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.REPEAT),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texImage2D(A.TEXTURE_2D,0,A.ALPHA,this.width,this.height,0,A.ALPHA,A.UNSIGNED_BYTE,this.data))};var je=function b(A,C){this.workerPool=A,this.actors=[],this.currentActor=0,this.id=w.uniqueId();for(var I=this.workerPool.acquire(this.id),Z=0;Z<I.length;Z++){var ee=new b.Actor(I[Z],C,this.id);ee.name="Worker "+Z,this.actors.push(ee)}};function Et(b,A,C){var I=function(Z,ee){if(Z)return C(Z);if(ee){var ae=w.pick(w.extend(ee,b),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ee.vector_layers&&(ae.vectorLayers=ee.vector_layers,ae.vectorLayerIds=ae.vectorLayers.map(function(Ae){return Ae.id})),ae.tiles=A.canonicalizeTileset(ae,b.url),C(null,ae)}};return b.url?w.getJSON(A.transformRequest(A.normalizeSourceURL(b.url),w.ResourceType.Source),I):w.browser.frame(function(){return I(null,b)})}je.prototype.broadcast=function(b,A,C){w.asyncAll(this.actors,function(I,Z){I.send(b,A,Z)},C=C||function(){})},je.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},je.prototype.remove=function(){this.actors.forEach(function(b){b.remove()}),this.actors=[],this.workerPool.release(this.id)},je.Actor=w.Actor;var Oe=function(b,A,C){this.bounds=w.LngLatBounds.convert(this.validateBounds(b)),this.minzoom=A||0,this.maxzoom=C||24};Oe.prototype.validateBounds=function(b){return Array.isArray(b)&&b.length===4?[Math.max(-180,b[0]),Math.max(-90,b[1]),Math.min(180,b[2]),Math.min(90,b[3])]:[-180,-90,180,90]},Oe.prototype.contains=function(b){var A=Math.pow(2,b.z),C=Math.floor(w.mercatorXfromLng(this.bounds.getWest())*A),I=Math.floor(w.mercatorYfromLat(this.bounds.getNorth())*A),Z=Math.ceil(w.mercatorXfromLng(this.bounds.getEast())*A),ee=Math.ceil(w.mercatorYfromLat(this.bounds.getSouth())*A);return b.x>=C&&b.x<Z&&b.y>=I&&b.y<ee};var Qe=function(b){function A(C,I,Z,ee){if(b.call(this),this.id=C,this.dispatcher=Z,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,w.extend(this,w.pick(I,["url","scheme","tileSize","promoteId"])),this._options=w.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ee)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,function(I,Z){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new w.ErrorEvent(I)):Z&&(w.extend(C,Z),Z.bounds&&(C.tileBounds=new Oe(Z.bounds,C.minzoom,C.maxzoom)),w.postTurnstileEvent(Z.tiles,C.map._requestManager._customAccessToken),w.postMapLoadEvent(Z.tiles,C.map._getMapId(),C.map._requestManager._skuToken,C.map._requestManager._customAccessToken),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})))})},A.prototype.loaded=function(){return this._loaded},A.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},A.prototype.onAdd=function(C){this.map=C,this.load()},A.prototype.setSourceProperty=function(C){this._tileJSONRequest&&this._tileJSONRequest.cancel(),C(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},A.prototype.setTiles=function(C){var I=this;return this.setSourceProperty(function(){I._options.tiles=C}),this},A.prototype.setUrl=function(C){var I=this;return this.setSourceProperty(function(){I.url=C,I._options.url=C}),this},A.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},A.prototype.serialize=function(){return w.extend({},this._options)},A.prototype.loadTile=function(C,I){var Z=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme)),ee={request:this.map._requestManager.transformRequest(Z,w.ResourceType.Tile),uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,tileSize:this.tileSize*C.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:w.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ae(Ae,at){return delete C.request,C.aborted?I(null):Ae&&Ae.status!==404?I(Ae):(at&&at.resourceTiming&&(C.resourceTiming=at.resourceTiming),this.map._refreshExpiredTiles&&at&&C.setExpiryData(at),C.loadVectorData(at,this.map.painter),w.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(C.reloadCallback&&(this.loadTile(C,C.reloadCallback),C.reloadCallback=null)))}ee.request.collectResourceTiming=this._collectResourceTiming,C.actor&&C.state!=="expired"?C.state==="loading"?C.reloadCallback=I:C.request=C.actor.send("reloadTile",ee,ae.bind(this)):(C.actor=this.dispatcher.getActor(),C.request=C.actor.send("loadTile",ee,ae.bind(this)))},A.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.actor&&C.actor.send("abortTile",{uid:C.uid,type:this.type,source:this.id},void 0)},A.prototype.unloadTile=function(C){C.unloadVectorData(),C.actor&&C.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id},void 0)},A.prototype.hasTransition=function(){return!1},A}(w.Evented),ne=function(b){function A(C,I,Z,ee){b.call(this),this.id=C,this.dispatcher=Z,this.setEventedParent(ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=w.extend({type:"raster"},I),w.extend(this,w.pick(I,["url","scheme","tileSize"]))}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,function(I,Z){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new w.ErrorEvent(I)):Z&&(w.extend(C,Z),Z.bounds&&(C.tileBounds=new Oe(Z.bounds,C.minzoom,C.maxzoom)),w.postTurnstileEvent(Z.tiles),w.postMapLoadEvent(Z.tiles,C.map._getMapId(),C.map._requestManager._skuToken),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})))})},A.prototype.loaded=function(){return this._loaded},A.prototype.onAdd=function(C){this.map=C,this.load()},A.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},A.prototype.serialize=function(){return w.extend({},this._options)},A.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},A.prototype.loadTile=function(C,I){var Z=this,ee=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);C.request=w.getImage(this.map._requestManager.transformRequest(ee,w.ResourceType.Tile),function(ae,Ae){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(ae)C.state="errored",I(ae);else if(Ae){Z.map._refreshExpiredTiles&&C.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var at=Z.map.painter.context,bt=at.gl;C.texture=Z.map.painter.getTileTexture(Ae.width),C.texture?C.texture.update(Ae,{useMipmap:!0}):(C.texture=new w.Texture(at,Ae,bt.RGBA,{useMipmap:!0}),C.texture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE,bt.LINEAR_MIPMAP_NEAREST),at.extTextureFilterAnisotropic&&bt.texParameterf(bt.TEXTURE_2D,at.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,at.extTextureFilterAnisotropicMax)),C.state="loaded",w.cacheEntryPossiblyAdded(Z.dispatcher),I(null)}})},A.prototype.abortTile=function(C,I){C.request&&(C.request.cancel(),delete C.request),I()},A.prototype.unloadTile=function(C,I){C.texture&&this.map.painter.saveTileTexture(C.texture),I()},A.prototype.hasTransition=function(){return!1},A}(w.Evented),We=function(b){function A(C,I,Z,ee){b.call(this,C,I,Z,ee),this.type="raster-dem",this.maxzoom=22,this._options=w.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},A.prototype.loadTile=function(C,I){var Z=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ee(ae,Ae){ae&&(C.state="errored",I(ae)),Ae&&(C.dem=Ae,C.needsHillshadePrepare=!0,C.state="loaded",I(null))}C.request=w.getImage(this.map._requestManager.transformRequest(Z,w.ResourceType.Tile),function(ae,Ae){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(ae)C.state="errored",I(ae);else if(Ae){this.map._refreshExpiredTiles&&C.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var at=w.window.ImageBitmap&&Ae instanceof w.window.ImageBitmap&&w.offscreenCanvasSupported()?Ae:w.browser.getImageData(Ae,1),bt={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:at,encoding:this.encoding};C.actor&&C.state!=="expired"||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",bt,ee.bind(this)))}}.bind(this)),C.neighboringTiles=this._getNeighboringTiles(C.tileID)},A.prototype._getNeighboringTiles=function(C){var I=C.canonical,Z=Math.pow(2,I.z),ee=(I.x-1+Z)%Z,ae=I.x===0?C.wrap-1:C.wrap,Ae=(I.x+1+Z)%Z,at=I.x+1===Z?C.wrap+1:C.wrap,bt={};return bt[new w.OverscaledTileID(C.overscaledZ,ae,I.z,ee,I.y).key]={backfilled:!1},bt[new w.OverscaledTileID(C.overscaledZ,at,I.z,Ae,I.y).key]={backfilled:!1},I.y>0&&(bt[new w.OverscaledTileID(C.overscaledZ,ae,I.z,ee,I.y-1).key]={backfilled:!1},bt[new w.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},bt[new w.OverscaledTileID(C.overscaledZ,at,I.z,Ae,I.y-1).key]={backfilled:!1}),I.y+1<Z&&(bt[new w.OverscaledTileID(C.overscaledZ,ae,I.z,ee,I.y+1).key]={backfilled:!1},bt[new w.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},bt[new w.OverscaledTileID(C.overscaledZ,at,I.z,Ae,I.y+1).key]={backfilled:!1}),bt},A.prototype.unloadTile=function(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded",C.actor&&C.actor.send("removeDEMTile",{uid:C.uid,source:this.id})},A}(ne),oe=function(b){function A(C,I,Z,ee){b.call(this),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Z.getActor(),this.setEventedParent(ee),this._data=I.data,this._options=w.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var ae=w.EXTENT/this.tileSize;this.workerOptions=w.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*ae,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*ae,extent:w.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:w.EXTENT,radius:(I.clusterRadius||50)*ae,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.load=function(){var C=this;this.fire(new w.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)C.fire(new w.ErrorEvent(I));else{var Z={dataType:"source",sourceDataType:"metadata"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Z.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new w.Event("data",Z))}})},A.prototype.onAdd=function(C){this.map=C,this.load()},A.prototype.setData=function(C){var I=this;return this._data=C,this.fire(new w.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Z){if(Z)I.fire(new w.ErrorEvent(Z));else{var ee={dataType:"source",sourceDataType:"content"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(ee.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new w.Event("data",ee))}}),this},A.prototype.getClusterExpansionZoom=function(C,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},I),this},A.prototype.getClusterChildren=function(C,I){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},I),this},A.prototype.getClusterLeaves=function(C,I,Z,ee){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:I,offset:Z},ee),this},A.prototype._updateWorkerData=function(C){var I=this;this._loaded=!1;var Z=w.extend({},this.workerOptions),ee=this._data;typeof ee=="string"?(Z.request=this.map._requestManager.transformRequest(w.browser.resolveURL(ee),w.ResourceType.Source),Z.request.collectResourceTiming=this._collectResourceTiming):Z.data=JSON.stringify(ee),this.actor.send(this.type+".loadData",Z,function(ae,Ae){I._removed||Ae&&Ae.abandoned||(I._loaded=!0,Ae&&Ae.resourceTiming&&Ae.resourceTiming[I.id]&&(I._resourceTiming=Ae.resourceTiming[I.id].slice(0)),I.actor.send(I.type+".coalesce",{source:Z.source},null),C(ae))})},A.prototype.loaded=function(){return this._loaded},A.prototype.loadTile=function(C,I){var Z=this,ee=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(ee,{type:this.type,uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:w.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ae,Ae){return delete C.request,C.unloadVectorData(),C.aborted?I(null):ae?I(ae):(C.loadVectorData(Ae,Z.map.painter,ee==="reloadTile"),I(null))})},A.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0},A.prototype.unloadTile=function(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})},A.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},A.prototype.serialize=function(){return w.extend({},this._options,{type:this.type,data:this._data})},A.prototype.hasTransition=function(){return!1},A}(w.Evented),Fe=w.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),st=function(b){function A(C,I,Z,ee){b.call(this),this.id=C,this.dispatcher=Z,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ee),this.options=I}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.load=function(C,I){var Z=this;this._loaded=!1,this.fire(new w.Event("dataloading",{dataType:"source"})),this.url=this.options.url,w.getImage(this.map._requestManager.transformRequest(this.url,w.ResourceType.Image),function(ee,ae){Z._loaded=!0,ee?Z.fire(new w.ErrorEvent(ee)):ae&&(Z.image=ae,C&&(Z.coordinates=C),I&&I(),Z._finishLoading())})},A.prototype.loaded=function(){return this._loaded},A.prototype.updateImage=function(C){var I=this;return this.image&&C.url?(this.options.url=C.url,this.load(C.coordinates,function(){I.texture=null}),this):this},A.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new w.Event("data",{dataType:"source",sourceDataType:"metadata"})))},A.prototype.onAdd=function(C){this.map=C,this.load()},A.prototype.setCoordinates=function(C){var I=this;this.coordinates=C;var Z=C.map(w.MercatorCoordinate.fromLngLat);this.tileID=function(ae){for(var Ae=1/0,at=1/0,bt=-1/0,Vt=-1/0,Wt=0,$t=ae;Wt<$t.length;Wt+=1){var dr=$t[Wt];Ae=Math.min(Ae,dr.x),at=Math.min(at,dr.y),bt=Math.max(bt,dr.x),Vt=Math.max(Vt,dr.y)}var hr=Math.max(bt-Ae,Vt-at),Rr=Math.max(0,Math.floor(-Math.log(hr)/Math.LN2)),lr=Math.pow(2,Rr);return new w.CanonicalTileID(Rr,Math.floor((Ae+bt)/2*lr),Math.floor((at+Vt)/2*lr))}(Z),this.minzoom=this.maxzoom=this.tileID.z;var ee=Z.map(function(ae){return I.tileID.getTilePoint(ae)._round()});return this._boundsArray=new w.StructArrayLayout4i8,this._boundsArray.emplaceBack(ee[0].x,ee[0].y,0,0),this._boundsArray.emplaceBack(ee[1].x,ee[1].y,w.EXTENT,0),this._boundsArray.emplaceBack(ee[3].x,ee[3].y,0,w.EXTENT),this._boundsArray.emplaceBack(ee[2].x,ee[2].y,w.EXTENT,w.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new w.Event("data",{dataType:"source",sourceDataType:"content"})),this},A.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var C=this.map.painter.context,I=C.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new w.Texture(C,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var ee=this.tiles[Z];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},A.prototype.loadTile=function(C,I){this.tileID&&this.tileID.equals(C.tileID.canonical)?(this.tiles[String(C.tileID.wrap)]=C,C.buckets={},I(null)):(C.state="errored",I(null))},A.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},A.prototype.hasTransition=function(){return!1},A}(w.Evented),Ce=function(b){function A(C,I,Z,ee){b.call(this,C,I,Z,ee),this.roundZoom=!0,this.type="video",this.options=I}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.load=function(){var C=this;this._loaded=!1;var I=this.options;this.urls=[];for(var Z=0,ee=I.urls;Z<ee.length;Z+=1)this.urls.push(this.map._requestManager.transformRequest(ee[Z],w.ResourceType.Source).url);w.getVideo(this.urls,function(ae,Ae){C._loaded=!0,ae?C.fire(new w.ErrorEvent(ae)):Ae&&(C.video=Ae,C.video.loop=!0,C.video.setAttribute("playsinline",""),C.video.addEventListener("playing",function(){C.map.triggerRepaint()}),C.map&&C.video.play(),C._finishLoading())})},A.prototype.pause=function(){this.video&&this.video.pause()},A.prototype.play=function(){this.video&&this.video.play()},A.prototype.seek=function(C){if(this.video){var I=this.video.seekable;C<I.start(0)||C>I.end(0)?this.fire(new w.ErrorEvent(new w.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+I.start(0)+" and "+I.end(0)+"-second mark."))):this.video.currentTime=C}},A.prototype.getVideo=function(){return this.video},A.prototype.onAdd=function(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},A.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var C=this.map.painter.context,I=C.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new w.Texture(C,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var ee=this.tiles[Z];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},A.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},A.prototype.hasTransition=function(){return this.video&&!this.video.paused},A}(st),De=function(b){function A(C,I,Z,ee){b.call(this,C,I,Z,ee),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(function(ae){return!Array.isArray(ae)||ae.length!==2||ae.some(function(Ae){return typeof Ae!="number"})})||this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof w.window.HTMLCanvasElement||this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new w.ErrorEvent(new w.ValidationError("sources."+C,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof w.window.HTMLCanvasElement?this.options.canvas:w.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new w.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},A.prototype.getCanvas=function(){return this.canvas},A.prototype.onAdd=function(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()},A.prototype.onRemove=function(){this.pause()},A.prototype.prepare=function(){var C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var I=this.map.painter.context,Z=I.gl;for(var ee in this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=w.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new w.Texture(I,this.canvas,Z.RGBA,{premultiply:!0}),this.tiles){var ae=this.tiles[ee];ae.state!=="loaded"&&(ae.state="loaded",ae.texture=this.texture)}}},A.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},A.prototype.hasTransition=function(){return this._playing},A.prototype._hasInvalidDimensions=function(){for(var C=0,I=[this.canvas.width,this.canvas.height];C<I.length;C+=1){var Z=I[C];if(isNaN(Z)||Z<=0)return!0}return!1},A}(st),tt={vector:Qe,raster:ne,"raster-dem":We,geojson:oe,video:Ce,image:st,canvas:De};function _e(b,A){var C=w.identity([]);return w.translate(C,C,[1,1,0]),w.scale(C,C,[.5*b.width,.5*b.height,1]),w.multiply(C,C,b.calculatePosMatrix(A.toUnwrapped()))}function me(b,A,C,I,Z,ee){var ae=function(Rr,lr,Ir){if(Rr)for(var Hr=0,en=Rr;Hr<en.length;Hr+=1){var _n=lr[en[Hr]];if(_n&&_n.source===Ir&&_n.type==="fill-extrusion")return!0}else for(var pn in lr){var An=lr[pn];if(An.source===Ir&&An.type==="fill-extrusion")return!0}return!1}(Z&&Z.layers,A,b.id),Ae=ee.maxPitchScaleFactor(),at=b.tilesIn(I,Ae,ae);at.sort(Ge);for(var bt=[],Vt=0,Wt=at;Vt<Wt.length;Vt+=1){var $t=Wt[Vt];bt.push({wrappedTileID:$t.tileID.wrapped().key,queryResults:$t.tile.queryRenderedFeatures(A,C,b._state,$t.queryGeometry,$t.cameraQueryGeometry,$t.scale,Z,ee,Ae,_e(b.transform,$t.tileID))})}var dr=function(Rr){for(var lr={},Ir={},Hr=0,en=Rr;Hr<en.length;Hr+=1){var _n=en[Hr],pn=_n.queryResults,An=_n.wrappedTileID,Ln=Ir[An]=Ir[An]||{};for(var pi in pn)for(var oi=pn[pi],Pi=Ln[pi]=Ln[pi]||{},ta=lr[pi]=lr[pi]||[],sa=0,Ki=oi;sa<Ki.length;sa+=1){var _o=Ki[sa];Pi[_o.featureIndex]||(Pi[_o.featureIndex]=!0,ta.push(_o))}}return lr}(bt);for(var hr in dr)dr[hr].forEach(function(Rr){var lr=Rr.feature,Ir=b.getFeatureState(lr.layer["source-layer"],lr.id);lr.source=lr.layer.source,lr.layer["source-layer"]&&(lr.sourceLayer=lr.layer["source-layer"]),lr.state=Ir});return dr}function Ge(b,A){var C=b.tileID,I=A.tileID;return C.overscaledZ-I.overscaledZ||C.canonical.y-I.canonical.y||C.wrap-I.wrap||C.canonical.x-I.canonical.x}var Ze=function(b,A){this.max=b,this.onRemove=A,this.reset()};Ze.prototype.reset=function(){for(var b in this.data)for(var A=0,C=this.data[b];A<C.length;A+=1){var I=C[A];I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value)}return this.data={},this.order=[],this},Ze.prototype.add=function(b,A,C){var I=this,Z=b.wrapped().key;this.data[Z]===void 0&&(this.data[Z]=[]);var ee={value:A,timeout:void 0};if(C!==void 0&&(ee.timeout=setTimeout(function(){I.remove(b,ee)},C)),this.data[Z].push(ee),this.order.push(Z),this.order.length>this.max){var ae=this._getAndRemoveByKey(this.order[0]);ae&&this.onRemove(ae)}return this},Ze.prototype.has=function(b){return b.wrapped().key in this.data},Ze.prototype.getAndRemove=function(b){return this.has(b)?this._getAndRemoveByKey(b.wrapped().key):null},Ze.prototype._getAndRemoveByKey=function(b){var A=this.data[b].shift();return A.timeout&&clearTimeout(A.timeout),this.data[b].length===0&&delete this.data[b],this.order.splice(this.order.indexOf(b),1),A.value},Ze.prototype.getByKey=function(b){var A=this.data[b];return A?A[0].value:null},Ze.prototype.get=function(b){return this.has(b)?this.data[b.wrapped().key][0].value:null},Ze.prototype.remove=function(b,A){if(!this.has(b))return this;var C=b.wrapped().key,I=A===void 0?0:this.data[C].indexOf(A),Z=this.data[C][I];return this.data[C].splice(I,1),Z.timeout&&clearTimeout(Z.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(Z.value),this.order.splice(this.order.indexOf(C),1),this},Ze.prototype.setMaxSize=function(b){for(this.max=b;this.order.length>this.max;){var A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this},Ze.prototype.filter=function(b){var A=[];for(var C in this.data)for(var I=0,Z=this.data[C];I<Z.length;I+=1){var ee=Z[I];b(ee.value)||A.push(ee)}for(var ae=0,Ae=A;ae<Ae.length;ae+=1){var at=Ae[ae];this.remove(at.value.tileID,at)}};var pt=function(b,A,C){this.context=b;var I=b.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),b.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete A.arrayBuffer};pt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},pt.prototype.updateData=function(b){var A=this.context.gl;this.context.unbindVAO(),this.bind(),A.bufferSubData(A.ELEMENT_ARRAY_BUFFER,0,b.arrayBuffer)},pt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ht={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Je=function(b,A,C,I){this.length=A.length,this.attributes=C,this.itemSize=A.bytesPerElement,this.dynamicDraw=I,this.context=b;var Z=b.gl;this.buffer=Z.createBuffer(),b.bindVertexBuffer.set(this.buffer),Z.bufferData(Z.ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),this.dynamicDraw||delete A.arrayBuffer};Je.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Je.prototype.updateData=function(b){var A=this.context.gl;this.bind(),A.bufferSubData(A.ARRAY_BUFFER,0,b.arrayBuffer)},Je.prototype.enableAttributes=function(b,A){for(var C=0;C<this.attributes.length;C++){var I=A.attributes[this.attributes[C].name];I!==void 0&&b.enableVertexAttribArray(I)}},Je.prototype.setVertexAttribPointers=function(b,A,C){for(var I=0;I<this.attributes.length;I++){var Z=this.attributes[I],ee=A.attributes[Z.name];ee!==void 0&&b.vertexAttribPointer(ee,Z.components,b[Ht[Z.type]],!1,this.itemSize,Z.offset+this.itemSize*(C||0))}},Je.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $e=function(b){this.gl=b.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};$e.prototype.get=function(){return this.current},$e.prototype.set=function(b){},$e.prototype.getDefault=function(){return this.default},$e.prototype.setDefault=function(){this.set(this.default)};var Te=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return w.Color.transparent},A.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.clearColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},A}($e),Ye=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return 1},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearDepth(C),this.current=C,this.dirty=!1)},A}($e),ft=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return 0},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearStencil(C),this.current=C,this.dirty=!1)},A}($e),ke=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return[!0,!0,!0,!0]},A.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.colorMask(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},A}($e),Ne=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!0},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthMask(C),this.current=C,this.dirty=!1)},A}($e),dt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return 255},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.stencilMask(C),this.current=C,this.dirty=!1)},A}($e),Pt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},A.prototype.set=function(C){var I=this.current;(C.func!==I.func||C.ref!==I.ref||C.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(C.func,C.ref,C.mask),this.current=C,this.dirty=!1)},A}($e),rr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){var C=this.gl;return[C.KEEP,C.KEEP,C.KEEP]},A.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(C[0],C[1],C[2]),this.current=C,this.dirty=!1)},A}($e),xr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=C,this.dirty=!1}},A}($e),ut=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return[0,1]},A.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.depthRange(C[0],C[1]),this.current=C,this.dirty=!1)},A}($e),nn=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=C,this.dirty=!1}},A}($e),Gr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.LESS},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthFunc(C),this.current=C,this.dirty=!1)},A}($e),Xr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.BLEND):I.disable(I.BLEND),this.current=C,this.dirty=!1}},A}($e),Nt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){var C=this.gl;return[C.ONE,C.ZERO]},A.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(C[0],C[1]),this.current=C,this.dirty=!1)},A}($e),Yt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return w.Color.transparent},A.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.blendColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},A}($e),sr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.FUNC_ADD},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.blendEquation(C),this.current=C,this.dirty=!1)},A}($e),Dt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=C,this.dirty=!1}},A}($e),Qt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.BACK},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.cullFace(C),this.current=C,this.dirty=!1)},A}($e),Sr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.CCW},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.frontFace(C),this.current=C,this.dirty=!1)},A}($e),Er=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)},A}($e),Fr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.TEXTURE0},A.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.activeTexture(C),this.current=C,this.dirty=!1)},A}($e),zr=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){var C=this.gl;return[0,0,C.drawingBufferWidth,C.drawingBufferHeight]},A.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.viewport(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},A}($e),le=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,C),this.current=C,this.dirty=!1}},A}($e),H=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},A}($e),re=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindTexture(I.TEXTURE_2D,C),this.current=C,this.dirty=!1}},A}($e),Re=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,C),this.current=C,this.dirty=!1}},A}($e),Ke=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){var I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,C),this.current=C,this.dirty=!1},A}($e),Tt=function(b){function A(C){b.call(this,C),this.vao=C.extVertexArrayObject}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(C){this.vao&&(C!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(C),this.current=C,this.dirty=!1)},A}($e),or=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return 4},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,C),this.current=C,this.dirty=!1}},A}($e),jt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),this.current=C,this.dirty=!1}},A}($e),wt=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,C),this.current=C,this.dirty=!1}},A}($e),It=function(b){function A(C,I){b.call(this,C),this.context=C,this.parent=I}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A}($e),de=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.setDirty=function(){this.dirty=!0},A.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,C,0),this.current=C,this.dirty=!1}},A}(It),pe=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},A}(It),Me=function(b,A,C,I){this.context=b,this.width=A,this.height=C;var Z=this.framebuffer=b.gl.createFramebuffer();this.colorAttachment=new de(b,Z),I&&(this.depthAttachment=new pe(b,Z))};Me.prototype.destroy=function(){var b=this.context.gl,A=this.colorAttachment.get();if(A&&b.deleteTexture(A),this.depthAttachment){var C=this.depthAttachment.get();C&&b.deleteRenderbuffer(C)}b.deleteFramebuffer(this.framebuffer)};var et=function(b,A,C){this.func=b,this.mask=A,this.range=C};et.ReadOnly=!1,et.ReadWrite=!0,et.disabled=new et(519,et.ReadOnly,[0,1]);var St=function(b,A,C,I,Z,ee){this.test=b,this.ref=A,this.mask=C,this.fail=I,this.depthFail=Z,this.pass=ee};St.disabled=new St({func:519,mask:0},0,0,7680,7680,7680);var Gt=function(b,A,C){this.blendFunction=b,this.blendColor=A,this.mask=C};Gt.disabled=new Gt(Gt.Replace=[1,0],w.Color.transparent,[!1,!1,!1,!1]),Gt.unblended=new Gt(Gt.Replace,w.Color.transparent,[!0,!0,!0,!0]),Gt.alphaBlended=new Gt([1,771],w.Color.transparent,[!0,!0,!0,!0]);var gr=function(b,A,C){this.enable=b,this.mode=A,this.frontFace=C};gr.disabled=new gr(!1,1029,2305),gr.backCCW=new gr(!0,1029,2305);var At=function(b){this.gl=b,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Te(this),this.clearDepth=new Ye(this),this.clearStencil=new ft(this),this.colorMask=new ke(this),this.depthMask=new Ne(this),this.stencilMask=new dt(this),this.stencilFunc=new Pt(this),this.stencilOp=new rr(this),this.stencilTest=new xr(this),this.depthRange=new ut(this),this.depthTest=new nn(this),this.depthFunc=new Gr(this),this.blend=new Xr(this),this.blendFunc=new Nt(this),this.blendColor=new Yt(this),this.blendEquation=new sr(this),this.cullFace=new Dt(this),this.cullFaceSide=new Qt(this),this.frontFace=new Sr(this),this.program=new Er(this),this.activeTexture=new Fr(this),this.viewport=new zr(this),this.bindFramebuffer=new le(this),this.bindRenderbuffer=new H(this),this.bindTexture=new re(this),this.bindVertexBuffer=new Re(this),this.bindElementBuffer=new Ke(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Tt(this),this.pixelStoreUnpack=new or(this),this.pixelStoreUnpackPremultiplyAlpha=new jt(this),this.pixelStoreUnpackFlipY=new wt(this),this.extTextureFilterAnisotropic=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=b.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=b.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(b.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=b.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=b.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE)};At.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},At.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},At.prototype.createIndexBuffer=function(b,A){return new pt(this,b,A)},At.prototype.createVertexBuffer=function(b,A,C){return new Je(this,b,A,C)},At.prototype.createRenderbuffer=function(b,A,C){var I=this.gl,Z=I.createRenderbuffer();return this.bindRenderbuffer.set(Z),I.renderbufferStorage(I.RENDERBUFFER,b,A,C),this.bindRenderbuffer.set(null),Z},At.prototype.createFramebuffer=function(b,A,C){return new Me(this,b,A,C)},At.prototype.clear=function(b){var A=b.color,C=b.depth,I=this.gl,Z=0;A&&(Z|=I.COLOR_BUFFER_BIT,this.clearColor.set(A),this.colorMask.set([!0,!0,!0,!0])),C!==void 0&&(Z|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(C),this.depthMask.set(!0)),I.clear(Z)},At.prototype.setCullFace=function(b){b.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(b.mode),this.frontFace.set(b.frontFace))},At.prototype.setDepthMode=function(b){b.func!==this.gl.ALWAYS||b.mask?(this.depthTest.set(!0),this.depthFunc.set(b.func),this.depthMask.set(b.mask),this.depthRange.set(b.range)):this.depthTest.set(!1)},At.prototype.setStencilMode=function(b){b.test.func!==this.gl.ALWAYS||b.mask?(this.stencilTest.set(!0),this.stencilMask.set(b.mask),this.stencilOp.set([b.fail,b.depthFail,b.pass]),this.stencilFunc.set({func:b.test.func,ref:b.ref,mask:b.test.mask})):this.stencilTest.set(!1)},At.prototype.setColorMode=function(b){w.deepEqual(b.blendFunction,Gt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(b.blendFunction),this.blendColor.set(b.blendColor)),this.colorMask.set(b.mask)},At.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(b){function A(C,I,Z){var ee=this;b.call(this),this.id=C,this.dispatcher=Z,this.on("data",function(ae){ae.dataType==="source"&&ae.sourceDataType==="metadata"&&(ee._sourceLoaded=!0),ee._sourceLoaded&&!ee._paused&&ae.dataType==="source"&&ae.sourceDataType==="content"&&(ee.reload(),ee.transform&&ee.update(ee.transform))}),this.on("error",function(){ee._sourceErrored=!0}),this._source=function(ae,Ae,at,bt){var Vt=new tt[Ae.type](ae,Ae,at,bt);if(Vt.id!==ae)throw new Error("Expected Source id to be "+ae+" instead of "+Vt.id);return w.bindAll(["load","abort","unload","serialize","prepare"],Vt),Vt}(C,I,Z,this),this._tiles={},this._cache=new Ze(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new w.SourceFeatureState}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.onAdd=function(C){this.map=C,this._maxTileCacheSize=C?C._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(C)},A.prototype.onRemove=function(C){this._source&&this._source.onRemove&&this._source.onRemove(C)},A.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var C in this._tiles){var I=this._tiles[C];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0},A.prototype.getSource=function(){return this._source},A.prototype.pause=function(){this._paused=!0},A.prototype.resume=function(){if(this._paused){var C=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,C&&this.reload(),this.transform&&this.update(this.transform)}},A.prototype._loadTile=function(C,I){return this._source.loadTile(C,I)},A.prototype._unloadTile=function(C){if(this._source.unloadTile)return this._source.unloadTile(C,function(){})},A.prototype._abortTile=function(C){if(this._source.abortTile)return this._source.abortTile(C,function(){})},A.prototype.serialize=function(){return this._source.serialize()},A.prototype.prepare=function(C){for(var I in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Z=this._tiles[I];Z.upload(C),Z.prepare(this.map.style.imageManager)}},A.prototype.getIds=function(){return w.values(this._tiles).map(function(C){return C.tileID}).sort(Ot).map(function(C){return C.key})},A.prototype.getRenderableIds=function(C){var I=this,Z=[];for(var ee in this._tiles)this._isIdRenderable(ee,C)&&Z.push(this._tiles[ee]);return C?Z.sort(function(ae,Ae){var at=ae.tileID,bt=Ae.tileID,Vt=new w.Point(at.canonical.x,at.canonical.y)._rotate(I.transform.angle),Wt=new w.Point(bt.canonical.x,bt.canonical.y)._rotate(I.transform.angle);return at.overscaledZ-bt.overscaledZ||Wt.y-Vt.y||Wt.x-Vt.x}).map(function(ae){return ae.tileID.key}):Z.map(function(ae){return ae.tileID}).sort(Ot).map(function(ae){return ae.key})},A.prototype.hasRenderableParent=function(C){var I=this.findLoadedParent(C,0);return!!I&&this._isIdRenderable(I.tileID.key)},A.prototype._isIdRenderable=function(C,I){return this._tiles[C]&&this._tiles[C].hasData()&&!this._coveredTiles[C]&&(I||!this._tiles[C].holdingForFade())},A.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var C in this._cache.reset(),this._tiles)this._tiles[C].state!=="errored"&&this._reloadTile(C,"reloading")},A.prototype._reloadTile=function(C,I){var Z=this._tiles[C];Z&&(Z.state!=="loading"&&(Z.state=I),this._loadTile(Z,this._tileLoaded.bind(this,Z,C,I)))},A.prototype._tileLoaded=function(C,I,Z,ee){if(ee)return C.state="errored",void(ee.status!==404?this._source.fire(new w.ErrorEvent(ee,{tile:C})):this.update(this.transform));C.timeAdded=w.browser.now(),Z==="expired"&&(C.refreshedUponExpiration=!0),this._setTileReloadTimer(I,C),this.getSource().type==="raster-dem"&&C.dem&&this._backfillDEM(C),this._state.initializeTileState(C,this.map?this.map.painter:null),this._source.fire(new w.Event("data",{dataType:"source",tile:C,coord:C.tileID}))},A.prototype._backfillDEM=function(C){for(var I=this.getRenderableIds(),Z=0;Z<I.length;Z++){var ee=I[Z];if(C.neighboringTiles&&C.neighboringTiles[ee]){var ae=this.getTileByID(ee);Ae(C,ae),Ae(ae,C)}}function Ae(at,bt){at.needsHillshadePrepare=!0;var Vt=bt.tileID.canonical.x-at.tileID.canonical.x,Wt=bt.tileID.canonical.y-at.tileID.canonical.y,$t=Math.pow(2,at.tileID.canonical.z),dr=bt.tileID.key;Vt===0&&Wt===0||Math.abs(Wt)>1||(Math.abs(Vt)>1&&(Math.abs(Vt+$t)===1?Vt+=$t:Math.abs(Vt-$t)===1&&(Vt-=$t)),bt.dem&&at.dem&&(at.dem.backfillBorder(bt.dem,Vt,Wt),at.neighboringTiles&&at.neighboringTiles[dr]&&(at.neighboringTiles[dr].backfilled=!0)))}},A.prototype.getTile=function(C){return this.getTileByID(C.key)},A.prototype.getTileByID=function(C){return this._tiles[C]},A.prototype._retainLoadedChildren=function(C,I,Z,ee){for(var ae in this._tiles){var Ae=this._tiles[ae];if(!(ee[ae]||!Ae.hasData()||Ae.tileID.overscaledZ<=I||Ae.tileID.overscaledZ>Z)){for(var at=Ae.tileID;Ae&&Ae.tileID.overscaledZ>I+1;){var bt=Ae.tileID.scaledTo(Ae.tileID.overscaledZ-1);(Ae=this._tiles[bt.key])&&Ae.hasData()&&(at=bt)}for(var Vt=at;Vt.overscaledZ>I;)if(C[(Vt=Vt.scaledTo(Vt.overscaledZ-1)).key]){ee[at.key]=at;break}}}},A.prototype.findLoadedParent=function(C,I){if(C.key in this._loadedParentTiles){var Z=this._loadedParentTiles[C.key];return Z&&Z.tileID.overscaledZ>=I?Z:null}for(var ee=C.overscaledZ-1;ee>=I;ee--){var ae=C.scaledTo(ee),Ae=this._getLoadedTile(ae);if(Ae)return Ae}},A.prototype._getLoadedTile=function(C){var I=this._tiles[C.key];return I&&I.hasData()?I:this._cache.getByKey(C.wrapped().key)},A.prototype.updateCacheSize=function(C){var I=Math.ceil(C.width/this._source.tileSize)+1,Z=Math.ceil(C.height/this._source.tileSize)+1,ee=Math.floor(I*Z*5),ae=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ee):ee;this._cache.setMaxSize(ae)},A.prototype.handleWrapJump=function(C){var I=Math.round((C-(this._prevLng===void 0?C:this._prevLng))/360);if(this._prevLng=C,I){var Z={};for(var ee in this._tiles){var ae=this._tiles[ee];ae.tileID=ae.tileID.unwrapTo(ae.tileID.wrap+I),Z[ae.tileID.key]=ae}for(var Ae in this._tiles=Z,this._timers)clearTimeout(this._timers[Ae]),delete this._timers[Ae];for(var at in this._tiles)this._setTileReloadTimer(at,this._tiles[at])}},A.prototype.update=function(C){var I=this;if(this.transform=C,this._sourceLoaded&&!this._paused){var Z;this.updateCacheSize(C),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Z=C.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ln){return new w.OverscaledTileID(Ln.canonical.z,Ln.wrap,Ln.canonical.z,Ln.canonical.x,Ln.canonical.y)}):(Z=C.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Z=Z.filter(function(Ln){return I._source.hasTile(Ln)}))):Z=[];var ee=C.coveringZoomLevel(this._source),ae=Math.max(ee-A.maxOverzooming,this._source.minzoom),Ae=Math.max(ee+A.maxUnderzooming,this._source.minzoom),at=this._updateRetainedTiles(Z,ee);if(yr(this._source.type)){for(var bt={},Vt={},Wt=0,$t=Object.keys(at);Wt<$t.length;Wt+=1){var dr=$t[Wt],hr=at[dr],Rr=this._tiles[dr];if(Rr&&!(Rr.fadeEndTime&&Rr.fadeEndTime<=w.browser.now())){var lr=this.findLoadedParent(hr,ae);lr&&(this._addTile(lr.tileID),bt[lr.tileID.key]=lr.tileID),Vt[dr]=hr}}for(var Ir in this._retainLoadedChildren(Vt,ee,Ae,at),bt)at[Ir]||(this._coveredTiles[Ir]=!0,at[Ir]=bt[Ir])}for(var Hr in at)this._tiles[Hr].clearFadeHold();for(var en=0,_n=w.keysDifference(this._tiles,at);en<_n.length;en+=1){var pn=_n[en],An=this._tiles[pn];An.hasSymbolBuckets&&!An.holdingForFade()?An.setHoldDuration(this.map._fadeDuration):An.hasSymbolBuckets&&!An.symbolFadeFinished()||this._removeTile(pn)}this._updateLoadedParentTileCache()}},A.prototype.releaseSymbolFadeTiles=function(){for(var C in this._tiles)this._tiles[C].holdingForFade()&&this._removeTile(C)},A.prototype._updateRetainedTiles=function(C,I){for(var Z={},ee={},ae=Math.max(I-A.maxOverzooming,this._source.minzoom),Ae=Math.max(I+A.maxUnderzooming,this._source.minzoom),at={},bt=0,Vt=C;bt<Vt.length;bt+=1){var Wt=Vt[bt],$t=this._addTile(Wt);Z[Wt.key]=Wt,$t.hasData()||I<this._source.maxzoom&&(at[Wt.key]=Wt)}this._retainLoadedChildren(at,I,Ae,Z);for(var dr=0,hr=C;dr<hr.length;dr+=1){var Rr=hr[dr],lr=this._tiles[Rr.key];if(!lr.hasData()){if(I+1>this._source.maxzoom){var Ir=Rr.children(this._source.maxzoom)[0],Hr=this.getTile(Ir);if(Hr&&Hr.hasData()){Z[Ir.key]=Ir;continue}}else{var en=Rr.children(this._source.maxzoom);if(Z[en[0].key]&&Z[en[1].key]&&Z[en[2].key]&&Z[en[3].key])continue}for(var _n=lr.wasRequested(),pn=Rr.overscaledZ-1;pn>=ae;--pn){var An=Rr.scaledTo(pn);if(ee[An.key]||(ee[An.key]=!0,!(lr=this.getTile(An))&&_n&&(lr=this._addTile(An)),lr&&(Z[An.key]=An,_n=lr.wasRequested(),lr.hasData())))break}}}return Z},A.prototype._updateLoadedParentTileCache=function(){for(var C in this._loadedParentTiles={},this._tiles){for(var I=[],Z=void 0,ee=this._tiles[C].tileID;ee.overscaledZ>0;){if(ee.key in this._loadedParentTiles){Z=this._loadedParentTiles[ee.key];break}I.push(ee.key);var ae=ee.scaledTo(ee.overscaledZ-1);if(Z=this._getLoadedTile(ae))break;ee=ae}for(var Ae=0,at=I;Ae<at.length;Ae+=1)this._loadedParentTiles[at[Ae]]=Z}},A.prototype._addTile=function(C){var I=this._tiles[C.key];if(I)return I;(I=this._cache.getAndRemove(C))&&(this._setTileReloadTimer(C.key,I),I.tileID=C,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[C.key]&&(clearTimeout(this._cacheTimers[C.key]),delete this._cacheTimers[C.key],this._setTileReloadTimer(C.key,I)));var Z=!!I;return Z||(I=new w.Tile(C,this._source.tileSize*C.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,C.key,I.state))),I?(I.uses++,this._tiles[C.key]=I,Z||this._source.fire(new w.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null},A.prototype._setTileReloadTimer=function(C,I){var Z=this;C in this._timers&&(clearTimeout(this._timers[C]),delete this._timers[C]);var ee=I.getExpiryTimeout();ee&&(this._timers[C]=setTimeout(function(){Z._reloadTile(C,"expired"),delete Z._timers[C]},ee))},A.prototype._removeTile=function(C){var I=this._tiles[C];I&&(I.uses--,delete this._tiles[C],this._timers[C]&&(clearTimeout(this._timers[C]),delete this._timers[C]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))},A.prototype.clearTiles=function(){for(var C in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(C);this._cache.reset()},A.prototype.tilesIn=function(C,I,Z){var ee=this,ae=[],Ae=this.transform;if(!Ae)return ae;for(var at=Z?Ae.getCameraQueryGeometry(C):C,bt=C.map(function(pn){return Ae.pointCoordinate(pn)}),Vt=at.map(function(pn){return Ae.pointCoordinate(pn)}),Wt=this.getIds(),$t=1/0,dr=1/0,hr=-1/0,Rr=-1/0,lr=0,Ir=Vt;lr<Ir.length;lr+=1){var Hr=Ir[lr];$t=Math.min($t,Hr.x),dr=Math.min(dr,Hr.y),hr=Math.max(hr,Hr.x),Rr=Math.max(Rr,Hr.y)}for(var en=function(pn){var An=ee._tiles[Wt[pn]];if(!An.holdingForFade()){var Ln=An.tileID,pi=Math.pow(2,Ae.zoom-An.tileID.overscaledZ),oi=I*An.queryPadding*w.EXTENT/An.tileSize/pi,Pi=[Ln.getTilePoint(new w.MercatorCoordinate($t,dr)),Ln.getTilePoint(new w.MercatorCoordinate(hr,Rr))];if(Pi[0].x-oi<w.EXTENT&&Pi[0].y-oi<w.EXTENT&&Pi[1].x+oi>=0&&Pi[1].y+oi>=0){var ta=bt.map(function(Ki){return Ln.getTilePoint(Ki)}),sa=Vt.map(function(Ki){return Ln.getTilePoint(Ki)});ae.push({tile:An,tileID:Ln,queryGeometry:ta,cameraQueryGeometry:sa,scale:pi})}}},_n=0;_n<Wt.length;_n++)en(_n);return ae},A.prototype.getVisibleCoordinates=function(C){for(var I=this,Z=this.getRenderableIds(C).map(function(at){return I._tiles[at].tileID}),ee=0,ae=Z;ee<ae.length;ee+=1){var Ae=ae[ee];Ae.posMatrix=this.transform.calculatePosMatrix(Ae.toUnwrapped())}return Z},A.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(yr(this._source.type))for(var C in this._tiles){var I=this._tiles[C];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=w.browser.now())return!0}return!1},A.prototype.setFeatureState=function(C,I,Z){this._state.updateState(C=C||"_geojsonTileLayer",I,Z)},A.prototype.removeFeatureState=function(C,I,Z){this._state.removeFeatureState(C=C||"_geojsonTileLayer",I,Z)},A.prototype.getFeatureState=function(C,I){return this._state.getState(C=C||"_geojsonTileLayer",I)},A.prototype.setDependencies=function(C,I,Z){var ee=this._tiles[C];ee&&ee.setDependencies(I,Z)},A.prototype.reloadTilesForDependencies=function(C,I){for(var Z in this._tiles)this._tiles[Z].hasDependency(C,I)&&this._reloadTile(Z,"reloading");this._cache.filter(function(ee){return!ee.hasDependency(C,I)})},A}(w.Evented);function Ot(b,A){var C=Math.abs(2*b.wrap)-+(b.wrap<0),I=Math.abs(2*A.wrap)-+(A.wrap<0);return b.overscaledZ-A.overscaledZ||I-C||A.canonical.y-b.canonical.y||A.canonical.x-b.canonical.x}function yr(b){return b==="raster"||b==="image"||b==="video"}function kr(){return new w.window.Worker(Mp.workerUrl)}ot.maxOverzooming=10,ot.maxUnderzooming=3;var Ft="mapboxgl_preloaded_worker_pool",Mn=function(){this.active={}};Mn.prototype.acquire=function(b){if(!this.workers)for(this.workers=[];this.workers.length<Mn.workerCount;)this.workers.push(new kr);return this.active[b]=!0,this.workers.slice()},Mn.prototype.release=function(b){delete this.active[b],this.numActive()===0&&(this.workers.forEach(function(A){A.terminate()}),this.workers=null)},Mn.prototype.isPreloaded=function(){return!!this.active[Ft]},Mn.prototype.numActive=function(){return Object.keys(this.active).length};var qn,ri=Math.floor(w.browser.hardwareConcurrency/2);function un(){return qn||(qn=new Mn),qn}function Yn(b,A){var C={};for(var I in b)I!=="ref"&&(C[I]=b[I]);return w.refProperties.forEach(function(Z){Z in A&&(C[Z]=A[Z])}),C}function jn(b){b=b.slice();for(var A=Object.create(null),C=0;C<b.length;C++)A[b[C].id]=b[C];for(var I=0;I<b.length;I++)"ref"in b[I]&&(b[I]=Yn(b[I],A[b[I].ref]));return b}Mn.workerCount=Math.max(Math.min(ri,6),1);var Kn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function aa(b,A,C){C.push({command:Kn.addSource,args:[b,A[b]]})}function vi(b,A,C){A.push({command:Kn.removeSource,args:[b]}),C[b]=!0}function da(b,A,C,I){vi(b,C,I),aa(b,A,C)}function Oa(b,A,C){var I;for(I in b[C])if(b[C].hasOwnProperty(I)&&I!=="data"&&!w.deepEqual(b[C][I],A[C][I]))return!1;for(I in A[C])if(A[C].hasOwnProperty(I)&&I!=="data"&&!w.deepEqual(b[C][I],A[C][I]))return!1;return!0}function xa(b,A,C,I,Z,ee){var ae;for(ae in A=A||{},b=b||{})b.hasOwnProperty(ae)&&(w.deepEqual(b[ae],A[ae])||C.push({command:ee,args:[I,ae,A[ae],Z]}));for(ae in A)A.hasOwnProperty(ae)&&!b.hasOwnProperty(ae)&&(w.deepEqual(b[ae],A[ae])||C.push({command:ee,args:[I,ae,A[ae],Z]}))}function Va(b){return b.id}function Sa(b,A){return b[A.id]=A,b}var gs=function(b,A){this.reset(b,A)};gs.prototype.reset=function(b,A){this.points=b||[],this._distances=[0];for(var C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(A||0,.5*this.length),this.paddedLength=this.length-2*this.padding},gs.prototype.lerp=function(b){if(this.points.length===1)return this.points[0];b=w.clamp(b,0,1);for(var A=1,C=this._distances[A],I=b*this.paddedLength+this.padding;C<I&&A<this._distances.length;)C=this._distances[++A];var Z=A-1,ee=this._distances[Z],ae=C-ee,Ae=ae>0?(I-ee)/ae:0;return this.points[Z].mult(1-Ae).add(this.points[A].mult(Ae))};var io=function(b,A,C){var I=this.boxCells=[],Z=this.circleCells=[];this.xCellCount=Math.ceil(b/C),this.yCellCount=Math.ceil(A/C);for(var ee=0;ee<this.xCellCount*this.yCellCount;ee++)I.push([]),Z.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=b,this.height=A,this.xScale=this.xCellCount/b,this.yScale=this.yCellCount/A,this.boxUid=0,this.circleUid=0};function Oo(b,A,C,I,Z){var ee=w.create();return A?(w.scale(ee,ee,[1/Z,1/Z,1]),C||w.rotateZ(ee,ee,I.angle)):w.multiply(ee,I.labelPlaneMatrix,b),ee}function ai(b,A,C,I,Z){if(A){var ee=w.clone(b);return w.scale(ee,ee,[Z,Z,1]),C||w.rotateZ(ee,ee,-I.angle),ee}return I.glCoordMatrix}function _i(b,A){var C=[b.x,b.y,0,1];Pn(C,C,A);var I=C[3];return{point:new w.Point(C[0]/I,C[1]/I),signedDistanceFromCamera:I}}function ea(b,A){return .5+b/A*.5}function Ha(b,A){var C=b[0]/b[3],I=b[1]/b[3];return C>=-A[0]&&C<=A[0]&&I>=-A[1]&&I<=A[1]}function ms(b,A,C,I,Z,ee,ae,Ae){var at=I?b.textSizeData:b.iconSizeData,bt=w.evaluateSizeForZoom(at,C.transform.zoom),Vt=[256/C.width*2+1,256/C.height*2+1],Wt=I?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Wt.clear();for(var $t=b.lineVertexArray,dr=I?b.text.placedSymbolArray:b.icon.placedSymbolArray,hr=C.transform.width/C.transform.height,Rr=!1,lr=0;lr<dr.length;lr++){var Ir=dr.get(lr);if(Ir.hidden||Ir.writingMode===w.WritingMode.vertical&&!Rr)tn(Ir.numGlyphs,Wt);else{Rr=!1;var Hr=[Ir.anchorX,Ir.anchorY,0,1];if(w.transformMat4(Hr,Hr,A),Ha(Hr,Vt)){var en=ea(C.transform.cameraToCenterDistance,Hr[3]),_n=w.evaluateSizeForFeature(at,bt,Ir),pn=ae?_n/en:_n*en,An=new w.Point(Ir.anchorX,Ir.anchorY),Ln=_i(An,Z).point,pi={},oi=cr(Ir,pn,!1,Ae,A,Z,ee,b.glyphOffsetArray,$t,Wt,Ln,An,pi,hr);Rr=oi.useVertical,(oi.notEnoughRoom||Rr||oi.needsFlipping&&cr(Ir,pn,!0,Ae,A,Z,ee,b.glyphOffsetArray,$t,Wt,Ln,An,pi,hr).notEnoughRoom)&&tn(Ir.numGlyphs,Wt)}else tn(Ir.numGlyphs,Wt)}}I?b.text.dynamicLayoutVertexBuffer.updateData(Wt):b.icon.dynamicLayoutVertexBuffer.updateData(Wt)}function lo(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt){var Wt=Ae.glyphStartIndex+Ae.numGlyphs,$t=Ae.lineStartIndex,dr=Ae.lineStartIndex+Ae.lineLength,hr=A.getoffsetX(Ae.glyphStartIndex),Rr=A.getoffsetX(Wt-1),lr=qt(b*hr,C,I,Z,ee,ae,Ae.segment,$t,dr,at,bt,Vt);if(!lr)return null;var Ir=qt(b*Rr,C,I,Z,ee,ae,Ae.segment,$t,dr,at,bt,Vt);return Ir?{first:lr,last:Ir}:null}function ko(b,A,C,I){return b===w.WritingMode.horizontal&&Math.abs(C.y-A.y)>Math.abs(C.x-A.x)*I?{useVertical:!0}:(b===w.WritingMode.vertical?A.y<C.y:A.x>C.x)?{needsFlipping:!0}:null}function cr(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt,Wt,$t,dr){var hr,Rr=A/24,lr=b.lineOffsetX*Rr,Ir=b.lineOffsetY*Rr;if(b.numGlyphs>1){var Hr=b.glyphStartIndex+b.numGlyphs,en=b.lineStartIndex,_n=b.lineStartIndex+b.lineLength,pn=lo(Rr,Ae,lr,Ir,C,Vt,Wt,b,at,ee,$t);if(!pn)return{notEnoughRoom:!0};var An=_i(pn.first.point,ae).point,Ln=_i(pn.last.point,ae).point;if(I&&!C){var pi=ko(b.writingMode,An,Ln,dr);if(pi)return pi}hr=[pn.first];for(var oi=b.glyphStartIndex+1;oi<Hr-1;oi++)hr.push(qt(Rr*Ae.getoffsetX(oi),lr,Ir,C,Vt,Wt,b.segment,en,_n,at,ee,$t));hr.push(pn.last)}else{if(I&&!C){var Pi=_i(Wt,Z).point,ta=b.lineStartIndex+b.segment+1,sa=new w.Point(at.getx(ta),at.gety(ta)),Ki=_i(sa,Z),_o=Ki.signedDistanceFromCamera>0?Ki.point:kt(Wt,sa,Pi,1,Z),Bi=ko(b.writingMode,Pi,_o,dr);if(Bi)return Bi}var Ia=qt(Rr*Ae.getoffsetX(b.glyphStartIndex),lr,Ir,C,Vt,Wt,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,at,ee,$t);if(!Ia)return{notEnoughRoom:!0};hr=[Ia]}for(var La=0,Aa=hr;La<Aa.length;La+=1){var fa=Aa[La];w.addDynamicAttributes(bt,fa.point,fa.angle)}return{}}function kt(b,A,C,I,Z){var ee=_i(b.add(b.sub(A)._unit()),Z).point,ae=C.sub(ee);return C.add(ae._mult(I/ae.mag()))}function qt(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt,Wt){var $t=I?b-A:b+A,dr=$t>0?1:-1,hr=0;I&&(dr*=-1,hr=Math.PI),dr<0&&(hr+=Math.PI);for(var Rr=dr>0?Ae+ae:Ae+ae+1,lr=Z,Ir=Z,Hr=0,en=0,_n=Math.abs($t),pn=[];Hr+en<=_n;){if((Rr+=dr)<Ae||Rr>=at)return null;if(Ir=lr,pn.push(lr),(lr=Wt[Rr])===void 0){var An=new w.Point(bt.getx(Rr),bt.gety(Rr)),Ln=_i(An,Vt);if(Ln.signedDistanceFromCamera>0)lr=Wt[Rr]=Ln.point;else{var pi=Rr-dr;lr=kt(Hr===0?ee:new w.Point(bt.getx(pi),bt.gety(pi)),An,Ir,_n-Hr+1,Vt)}}Hr+=en,en=Ir.dist(lr)}var oi=(_n-Hr)/en,Pi=lr.sub(Ir),ta=Pi.mult(oi)._add(Ir);ta._add(Pi._unit()._perp()._mult(C*dr));var sa=hr+Math.atan2(lr.y-Ir.y,lr.x-Ir.x);return pn.push(ta),{point:ta,angle:sa,path:pn}}io.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},io.prototype.insert=function(b,A,C,I,Z){this._forEachCell(A,C,I,Z,this._insertBoxCell,this.boxUid++),this.boxKeys.push(b),this.bboxes.push(A),this.bboxes.push(C),this.bboxes.push(I),this.bboxes.push(Z)},io.prototype.insertCircle=function(b,A,C,I){this._forEachCell(A-I,C-I,A+I,C+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(b),this.circles.push(A),this.circles.push(C),this.circles.push(I)},io.prototype._insertBoxCell=function(b,A,C,I,Z,ee){this.boxCells[Z].push(ee)},io.prototype._insertCircleCell=function(b,A,C,I,Z,ee){this.circleCells[Z].push(ee)},io.prototype._query=function(b,A,C,I,Z,ee){if(C<0||b>this.width||I<0||A>this.height)return!Z&&[];var ae=[];if(b<=0&&A<=0&&this.width<=C&&this.height<=I){if(Z)return!0;for(var Ae=0;Ae<this.boxKeys.length;Ae++)ae.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(var at=0;at<this.circleKeys.length;at++){var bt=this.circles[3*at],Vt=this.circles[3*at+1],Wt=this.circles[3*at+2];ae.push({key:this.circleKeys[at],x1:bt-Wt,y1:Vt-Wt,x2:bt+Wt,y2:Vt+Wt})}return ee?ae.filter(ee):ae}return this._forEachCell(b,A,C,I,this._queryCell,ae,{hitTest:Z,seenUids:{box:{},circle:{}}},ee),Z?ae.length>0:ae},io.prototype._queryCircle=function(b,A,C,I,Z){var ee=b-C,ae=b+C,Ae=A-C,at=A+C;if(ae<0||ee>this.width||at<0||Ae>this.height)return!I&&[];var bt=[];return this._forEachCell(ee,Ae,ae,at,this._queryCellCircle,bt,{hitTest:I,circle:{x:b,y:A,radius:C},seenUids:{box:{},circle:{}}},Z),I?bt.length>0:bt},io.prototype.query=function(b,A,C,I,Z){return this._query(b,A,C,I,!1,Z)},io.prototype.hitTest=function(b,A,C,I,Z){return this._query(b,A,C,I,!0,Z)},io.prototype.hitTestCircle=function(b,A,C,I){return this._queryCircle(b,A,C,!0,I)},io.prototype._queryCell=function(b,A,C,I,Z,ee,ae,Ae){var at=ae.seenUids,bt=this.boxCells[Z];if(bt!==null)for(var Vt=this.bboxes,Wt=0,$t=bt;Wt<$t.length;Wt+=1){var dr=$t[Wt];if(!at.box[dr]){at.box[dr]=!0;var hr=4*dr;if(b<=Vt[hr+2]&&A<=Vt[hr+3]&&C>=Vt[hr+0]&&I>=Vt[hr+1]&&(!Ae||Ae(this.boxKeys[dr]))){if(ae.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[dr],x1:Vt[hr],y1:Vt[hr+1],x2:Vt[hr+2],y2:Vt[hr+3]})}}}var Rr=this.circleCells[Z];if(Rr!==null)for(var lr=this.circles,Ir=0,Hr=Rr;Ir<Hr.length;Ir+=1){var en=Hr[Ir];if(!at.circle[en]){at.circle[en]=!0;var _n=3*en;if(this._circleAndRectCollide(lr[_n],lr[_n+1],lr[_n+2],b,A,C,I)&&(!Ae||Ae(this.circleKeys[en]))){if(ae.hitTest)return ee.push(!0),!0;var pn=lr[_n],An=lr[_n+1],Ln=lr[_n+2];ee.push({key:this.circleKeys[en],x1:pn-Ln,y1:An-Ln,x2:pn+Ln,y2:An+Ln})}}}},io.prototype._queryCellCircle=function(b,A,C,I,Z,ee,ae,Ae){var at=ae.circle,bt=ae.seenUids,Vt=this.boxCells[Z];if(Vt!==null)for(var Wt=this.bboxes,$t=0,dr=Vt;$t<dr.length;$t+=1){var hr=dr[$t];if(!bt.box[hr]){bt.box[hr]=!0;var Rr=4*hr;if(this._circleAndRectCollide(at.x,at.y,at.radius,Wt[Rr+0],Wt[Rr+1],Wt[Rr+2],Wt[Rr+3])&&(!Ae||Ae(this.boxKeys[hr])))return ee.push(!0),!0}}var lr=this.circleCells[Z];if(lr!==null)for(var Ir=this.circles,Hr=0,en=lr;Hr<en.length;Hr+=1){var _n=en[Hr];if(!bt.circle[_n]){bt.circle[_n]=!0;var pn=3*_n;if(this._circlesCollide(Ir[pn],Ir[pn+1],Ir[pn+2],at.x,at.y,at.radius)&&(!Ae||Ae(this.circleKeys[_n])))return ee.push(!0),!0}}},io.prototype._forEachCell=function(b,A,C,I,Z,ee,ae,Ae){for(var at=this._convertToXCellCoord(b),bt=this._convertToYCellCoord(A),Vt=this._convertToXCellCoord(C),Wt=this._convertToYCellCoord(I),$t=at;$t<=Vt;$t++)for(var dr=bt;dr<=Wt;dr++)if(Z.call(this,b,A,C,I,this.xCellCount*dr+$t,ee,ae,Ae))return},io.prototype._convertToXCellCoord=function(b){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(b*this.xScale)))},io.prototype._convertToYCellCoord=function(b){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(b*this.yScale)))},io.prototype._circlesCollide=function(b,A,C,I,Z,ee){var ae=I-b,Ae=Z-A,at=C+ee;return at*at>ae*ae+Ae*Ae},io.prototype._circleAndRectCollide=function(b,A,C,I,Z,ee,ae){var Ae=(ee-I)/2,at=Math.abs(b-(I+Ae));if(at>Ae+C)return!1;var bt=(ae-Z)/2,Vt=Math.abs(A-(Z+bt));if(Vt>bt+C)return!1;if(at<=Ae||Vt<=bt)return!0;var Wt=at-Ae,$t=Vt-bt;return Wt*Wt+$t*$t<=C*C};var Ar=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function tn(b,A){for(var C=0;C<b;C++){var I=A.length;A.resize(I+4),A.float32.set(Ar,3*I)}}function Pn(b,A,C){var I=A[0],Z=A[1];return b[0]=C[0]*I+C[4]*Z+C[12],b[1]=C[1]*I+C[5]*Z+C[13],b[3]=C[3]*I+C[7]*Z+C[15],b}var Bn=function(b,A,C){A===void 0&&(A=new io(b.width+200,b.height+200,25)),C===void 0&&(C=new io(b.width+200,b.height+200,25)),this.transform=b,this.grid=A,this.ignoredGrid=C,this.pitchfactor=Math.cos(b._pitch)*b.cameraToCenterDistance,this.screenRightBoundary=b.width+100,this.screenBottomBoundary=b.height+100,this.gridRightBoundary=b.width+200,this.gridBottomBoundary=b.height+200};function Cn(b,A,C){return A*(w.EXTENT/(b.tileSize*Math.pow(2,C-b.tileID.overscaledZ)))}Bn.prototype.placeCollisionBox=function(b,A,C,I,Z){var ee=this.projectAndGetPerspectiveRatio(I,b.anchorPointX,b.anchorPointY),ae=C*ee.perspectiveRatio,Ae=b.x1*ae+ee.point.x,at=b.y1*ae+ee.point.y,bt=b.x2*ae+ee.point.x,Vt=b.y2*ae+ee.point.y;return!this.isInsideGrid(Ae,at,bt,Vt)||!A&&this.grid.hitTest(Ae,at,bt,Vt,Z)?{box:[],offscreen:!1}:{box:[Ae,at,bt,Vt],offscreen:this.isOffscreen(Ae,at,bt,Vt)}},Bn.prototype.placeCollisionCircles=function(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt,Wt,$t){var dr=[],hr=new w.Point(A.anchorX,A.anchorY),Rr=_i(hr,ee),lr=ea(this.transform.cameraToCenterDistance,Rr.signedDistanceFromCamera),Ir=(bt?Z/lr:Z*lr)/w.ONE_EM,Hr=_i(hr,ae).point,en=lo(Ir,I,A.lineOffsetX*Ir,A.lineOffsetY*Ir,!1,Hr,hr,A,C,ae,{}),_n=!1,pn=!1,An=!0;if(en){for(var Ln=.5*Wt*lr+$t,pi=new w.Point(-100,-100),oi=new w.Point(this.screenRightBoundary,this.screenBottomBoundary),Pi=new gs,ta=en.first,sa=en.last,Ki=[],_o=ta.path.length-1;_o>=1;_o--)Ki.push(ta.path[_o]);for(var Bi=1;Bi<sa.path.length;Bi++)Ki.push(sa.path[Bi]);var Ia=2.5*Ln;if(Ae){var La=Ki.map(function(hl){return _i(hl,Ae)});Ki=La.some(function(hl){return hl.signedDistanceFromCamera<=0})?[]:La.map(function(hl){return hl.point})}var Aa=[];if(Ki.length>0){for(var fa=Ki[0].clone(),Ma=Ki[0].clone(),Ea=1;Ea<Ki.length;Ea++)fa.x=Math.min(fa.x,Ki[Ea].x),fa.y=Math.min(fa.y,Ki[Ea].y),Ma.x=Math.max(Ma.x,Ki[Ea].x),Ma.y=Math.max(Ma.y,Ki[Ea].y);Aa=fa.x>=pi.x&&Ma.x<=oi.x&&fa.y>=pi.y&&Ma.y<=oi.y?[Ki]:Ma.x<pi.x||fa.x>oi.x||Ma.y<pi.y||fa.y>oi.y?[]:w.clipLine([Ki],pi.x,pi.y,oi.x,oi.y)}for(var ha=0,Au=Aa;ha<Au.length;ha+=1){var Ls;Pi.reset(Au[ha],.25*Ln),Ls=Pi.length<=.5*Ln?1:Math.ceil(Pi.paddedLength/Ia)+1;for(var $u=0;$u<Ls;$u++){var Mu=$u/Math.max(Ls-1,1),es=Pi.lerp(Mu),ys=es.x+100,Ru=es.y+100;dr.push(ys,Ru,Ln,0);var gu=ys-Ln,Qc=Ru-Ln,nl=ys+Ln,lc=Ru+Ln;if(An=An&&this.isOffscreen(gu,Qc,nl,lc),pn=pn||this.isInsideGrid(gu,Qc,nl,lc),!b&&this.grid.hitTestCircle(ys,Ru,Ln,Vt)&&(_n=!0,!at))return{circles:[],offscreen:!1,collisionDetected:_n}}}}return{circles:!at&&_n||!pn?[]:dr,offscreen:An,collisionDetected:_n}},Bn.prototype.queryRenderedSymbols=function(b){if(b.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var A=[],C=1/0,I=1/0,Z=-1/0,ee=-1/0,ae=0,Ae=b;ae<Ae.length;ae+=1){var at=Ae[ae],bt=new w.Point(at.x+100,at.y+100);C=Math.min(C,bt.x),I=Math.min(I,bt.y),Z=Math.max(Z,bt.x),ee=Math.max(ee,bt.y),A.push(bt)}for(var Vt={},Wt={},$t=0,dr=this.grid.query(C,I,Z,ee).concat(this.ignoredGrid.query(C,I,Z,ee));$t<dr.length;$t+=1){var hr=dr[$t],Rr=hr.key;if(Vt[Rr.bucketInstanceId]===void 0&&(Vt[Rr.bucketInstanceId]={}),!Vt[Rr.bucketInstanceId][Rr.featureIndex]){var lr=[new w.Point(hr.x1,hr.y1),new w.Point(hr.x2,hr.y1),new w.Point(hr.x2,hr.y2),new w.Point(hr.x1,hr.y2)];w.polygonIntersectsPolygon(A,lr)&&(Vt[Rr.bucketInstanceId][Rr.featureIndex]=!0,Wt[Rr.bucketInstanceId]===void 0&&(Wt[Rr.bucketInstanceId]=[]),Wt[Rr.bucketInstanceId].push(Rr.featureIndex))}}return Wt},Bn.prototype.insertCollisionBox=function(b,A,C,I,Z){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:I,collisionGroupID:Z},b[0],b[1],b[2],b[3])},Bn.prototype.insertCollisionCircles=function(b,A,C,I,Z){for(var ee=A?this.ignoredGrid:this.grid,ae={bucketInstanceId:C,featureIndex:I,collisionGroupID:Z},Ae=0;Ae<b.length;Ae+=4)ee.insertCircle(ae,b[Ae],b[Ae+1],b[Ae+2])},Bn.prototype.projectAndGetPerspectiveRatio=function(b,A,C){var I=[A,C,0,1];return Pn(I,I,b),{point:new w.Point((I[0]/I[3]+1)/2*this.transform.width+100,(-I[1]/I[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I[3]*.5}},Bn.prototype.isOffscreen=function(b,A,C,I){return C<100||b>=this.screenRightBoundary||I<100||A>this.screenBottomBoundary},Bn.prototype.isInsideGrid=function(b,A,C,I){return C>=0&&b<this.gridRightBoundary&&I>=0&&A<this.gridBottomBoundary},Bn.prototype.getViewportMatrix=function(){var b=w.identity([]);return w.translate(b,b,[-100,-100,0]),b};var Ai=function(b,A,C,I){this.opacity=b?Math.max(0,Math.min(1,b.opacity+(b.placed?A:-A))):I&&C?1:0,this.placed=C};Ai.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Yi=function(b,A,C,I,Z){this.text=new Ai(b?b.text:null,A,C,Z),this.icon=new Ai(b?b.icon:null,A,I,Z)};Yi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Wo=function(b,A,C){this.text=b,this.icon=A,this.skipFade=C},os=function(){this.invProjMatrix=w.create(),this.viewportMatrix=w.create(),this.circles=[]},wu=function(b,A,C,I,Z){this.bucketInstanceId=b,this.featureIndex=A,this.sourceLayerIndex=C,this.bucketIndex=I,this.tileID=Z},Do=function(b){this.crossSourceCollisions=b,this.maxGroupID=0,this.collisionGroups={}};function Qa(b,A,C,I,Z){var ee=w.getAnchorAlignment(b),ae=-(ee.horizontalAlign-.5)*A,Ae=-(ee.verticalAlign-.5)*C,at=w.evaluateVariableOffset(b,I);return new w.Point(ae+at[0]*Z,Ae+at[1]*Z)}function pu(b,A,C,I,Z,ee){var ae=b.x1,Ae=b.x2,at=b.y1,bt=b.y2,Vt=b.anchorPointX,Wt=b.anchorPointY,$t=new w.Point(A,C);return I&&$t._rotate(Z?ee:-ee),{x1:ae+$t.x,y1:at+$t.y,x2:Ae+$t.x,y2:bt+$t.y,anchorPointX:Vt,anchorPointY:Wt}}Do.prototype.get=function(b){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[b]){var A=++this.maxGroupID;this.collisionGroups[b]={ID:A,predicate:function(C){return C.collisionGroupID===A}}}return this.collisionGroups[b]};var Jo=function(b,A,C,I){this.transform=b.clone(),this.collisionIndex=new Bn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=A,this.retainedQueryData={},this.collisionGroups=new Do(C),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}};function Zt(b,A,C,I,Z){b.emplaceBack(A?1:0,C?1:0,I||0,Z||0),b.emplaceBack(A?1:0,C?1:0,I||0,Z||0),b.emplaceBack(A?1:0,C?1:0,I||0,Z||0),b.emplaceBack(A?1:0,C?1:0,I||0,Z||0)}Jo.prototype.getBucketParts=function(b,A,C,I){var Z=C.getBucket(A),ee=C.latestFeatureIndex;if(Z&&ee&&A.id===Z.layerIds[0]){var ae=C.collisionBoxArray,Ae=Z.layers[0].layout,at=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),bt=C.tileSize/w.EXTENT,Vt=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),Wt=Ae.get("text-pitch-alignment")==="map",$t=Ae.get("text-rotation-alignment")==="map",dr=Cn(C,1,this.transform.zoom),hr=Oo(Vt,Wt,$t,this.transform,dr),Rr=null;if(Wt){var lr=ai(Vt,Wt,$t,this.transform,dr);Rr=w.multiply([],this.transform.labelPlaneMatrix,lr)}this.retainedQueryData[Z.bucketInstanceId]=new wu(Z.bucketInstanceId,ee,Z.sourceLayerIndex,Z.index,C.tileID);var Ir={bucket:Z,layout:Ae,posMatrix:Vt,textLabelPlaneMatrix:hr,labelToScreenMatrix:Rr,scale:at,textPixelRatio:bt,holdingForFade:C.holdingForFade(),collisionBoxArray:ae,partiallyEvaluatedTextSize:w.evaluateSizeForZoom(Z.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Z.sourceID)};if(I)for(var Hr=0,en=Z.sortKeyRanges;Hr<en.length;Hr+=1){var _n=en[Hr];b.push({sortKey:_n.sortKey,symbolInstanceStart:_n.symbolInstanceStart,symbolInstanceEnd:_n.symbolInstanceEnd,parameters:Ir})}else b.push({symbolInstanceStart:0,symbolInstanceEnd:Z.symbolInstances.length,parameters:Ir})}},Jo.prototype.attemptAnchorPlacement=function(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt,Wt,$t,dr,hr){var Rr,lr=[Wt.textOffset0,Wt.textOffset1],Ir=Qa(b,C,I,lr,Z),Hr=this.collisionIndex.placeCollisionBox(pu(A,Ir.x,Ir.y,ee,ae,this.transform.angle),Vt,Ae,at,bt.predicate);if(!hr||this.collisionIndex.placeCollisionBox(pu(hr,Ir.x,Ir.y,ee,ae,this.transform.angle),Vt,Ae,at,bt.predicate).box.length!==0)return Hr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Wt.crossTileID]&&this.prevPlacement.placements[Wt.crossTileID]&&this.prevPlacement.placements[Wt.crossTileID].text&&(Rr=this.prevPlacement.variableOffsets[Wt.crossTileID].anchor),this.variableOffsets[Wt.crossTileID]={textOffset:lr,width:C,height:I,anchor:b,textBoxScale:Z,prevAnchor:Rr},this.markUsedJustification($t,b,Wt,dr),$t.allowVerticalPlacement&&(this.markUsedOrientation($t,dr,Wt),this.placedOrientations[Wt.crossTileID]=dr),{shift:Ir,placedGlyphBoxes:Hr}):void 0},Jo.prototype.placeLayerBucketPart=function(b,A,C){var I=this,Z=b.parameters,ee=Z.bucket,ae=Z.layout,Ae=Z.posMatrix,at=Z.textLabelPlaneMatrix,bt=Z.labelToScreenMatrix,Vt=Z.textPixelRatio,Wt=Z.holdingForFade,$t=Z.collisionBoxArray,dr=Z.partiallyEvaluatedTextSize,hr=Z.collisionGroup,Rr=ae.get("text-optional"),lr=ae.get("icon-optional"),Ir=ae.get("text-allow-overlap"),Hr=ae.get("icon-allow-overlap"),en=ae.get("text-rotation-alignment")==="map",_n=ae.get("text-pitch-alignment")==="map",pn=ae.get("icon-text-fit")!=="none",An=ae.get("symbol-z-order")==="viewport-y",Ln=Ir&&(Hr||!ee.hasIconData()||lr),pi=Hr&&(Ir||!ee.hasTextData()||Rr);!ee.collisionArrays&&$t&&ee.deserializeCollisionBoxes($t);var oi=function(Bi,Ia){if(!A[Bi.crossTileID])if(Wt)I.placements[Bi.crossTileID]=new Wo(!1,!1,!1);else{var La,Aa=!1,fa=!1,Ma=!0,Ea=null,ha={box:null,offscreen:null},Au={box:null,offscreen:null},Ls=null,$u=null,Mu=0,es=0,ys=0;Ia.textFeatureIndex?Mu=Ia.textFeatureIndex:Bi.useRuntimeCollisionCircles&&(Mu=Bi.featureIndex),Ia.verticalTextFeatureIndex&&(es=Ia.verticalTextFeatureIndex);var Ru=Ia.textBox;if(Ru){var gu=function(go){var Xu=w.WritingMode.horizontal;if(ee.allowVerticalPlacement&&!go&&I.prevPlacement){var Ks=I.prevPlacement.placedOrientations[Bi.crossTileID];Ks&&(I.placedOrientations[Bi.crossTileID]=Ks,I.markUsedOrientation(ee,Xu=Ks,Bi))}return Xu},Qc=function(go,Xu){if(ee.allowVerticalPlacement&&Bi.numVerticalGlyphVertices>0&&Ia.verticalTextBox)for(var Ks=0,yf=ee.writingModes;Ks<yf.length&&(yf[Ks]===w.WritingMode.vertical?(ha=Xu(),Au=ha):ha=go(),!(ha&&ha.box&&ha.box.length));Ks+=1);else ha=go()};if(ae.get("text-variable-anchor")){var nl=ae.get("text-variable-anchor");if(I.prevPlacement&&I.prevPlacement.variableOffsets[Bi.crossTileID]){var lc=I.prevPlacement.variableOffsets[Bi.crossTileID];nl.indexOf(lc.anchor)>0&&(nl=nl.filter(function(go){return go!==lc.anchor})).unshift(lc.anchor)}var hl=function(go,Xu,Ks){for(var yf=go.x2-go.x1,ud=go.y2-go.y1,_f=Bi.textBoxScale,Fv=pn&&!Hr?Xu:null,Al={box:[],offscreen:!1},Zl=Ir?2*nl.length:nl.length,Vl=0;Vl<Zl;++Vl){var zf=I.attemptAnchorPlacement(nl[Vl%nl.length],go,yf,ud,_f,en,_n,Vt,Ae,hr,Vl>=nl.length,Bi,ee,Ks,Fv);if(zf&&(Al=zf.placedGlyphBoxes)&&Al.box&&Al.box.length){Aa=!0,Ea=zf.shift;break}}return Al};Qc(function(){return hl(Ru,Ia.iconBox,w.WritingMode.horizontal)},function(){var go=Ia.verticalTextBox;return ee.allowVerticalPlacement&&!(ha&&ha.box&&ha.box.length)&&Bi.numVerticalGlyphVertices>0&&go?hl(go,Ia.verticalIconBox,w.WritingMode.vertical):{box:null,offscreen:null}}),ha&&(Aa=ha.box,Ma=ha.offscreen);var Nf=gu(ha&&ha.box);if(!Aa&&I.prevPlacement){var vf=I.prevPlacement.variableOffsets[Bi.crossTileID];vf&&(I.variableOffsets[Bi.crossTileID]=vf,I.markUsedJustification(ee,vf.anchor,Bi,Nf))}}else{var Jc=function(go,Xu){var Ks=I.collisionIndex.placeCollisionBox(go,Ir,Vt,Ae,hr.predicate);return Ks&&Ks.box&&Ks.box.length&&(I.markUsedOrientation(ee,Xu,Bi),I.placedOrientations[Bi.crossTileID]=Xu),Ks};Qc(function(){return Jc(Ru,w.WritingMode.horizontal)},function(){var go=Ia.verticalTextBox;return ee.allowVerticalPlacement&&Bi.numVerticalGlyphVertices>0&&go?Jc(go,w.WritingMode.vertical):{box:null,offscreen:null}}),gu(ha&&ha.box&&ha.box.length)}}if(Aa=(La=ha)&&La.box&&La.box.length>0,Ma=La&&La.offscreen,Bi.useRuntimeCollisionCircles){var gf=ee.text.placedSymbolArray.get(Bi.centerJustifiedTextSymbolIndex),cc=w.evaluateSizeForFeature(ee.textSizeData,dr,gf),fc=ae.get("text-padding");Ls=I.collisionIndex.placeCollisionCircles(Ir,gf,ee.lineVertexArray,ee.glyphOffsetArray,cc,Ae,at,bt,C,_n,hr.predicate,Bi.collisionCircleDiameter,fc),Aa=Ir||Ls.circles.length>0&&!Ls.collisionDetected,Ma=Ma&&Ls.offscreen}if(Ia.iconFeatureIndex&&(ys=Ia.iconFeatureIndex),Ia.iconBox){var mf=function(go){var Xu=pn&&Ea?pu(go,Ea.x,Ea.y,en,_n,I.transform.angle):go;return I.collisionIndex.placeCollisionBox(Xu,Hr,Vt,Ae,hr.predicate)};fa=Au&&Au.box&&Au.box.length&&Ia.verticalIconBox?($u=mf(Ia.verticalIconBox)).box.length>0:($u=mf(Ia.iconBox)).box.length>0,Ma=Ma&&$u.offscreen}var Lu=Rr||Bi.numHorizontalGlyphVertices===0&&Bi.numVerticalGlyphVertices===0,Ts=lr||Bi.numIconVertices===0;if(Lu||Ts?Ts?Lu||(fa=fa&&Aa):Aa=fa&&Aa:fa=Aa=fa&&Aa,Aa&&La&&La.box&&I.collisionIndex.insertCollisionBox(La.box,ae.get("text-ignore-placement"),ee.bucketInstanceId,Au&&Au.box&&es?es:Mu,hr.ID),fa&&$u&&I.collisionIndex.insertCollisionBox($u.box,ae.get("icon-ignore-placement"),ee.bucketInstanceId,ys,hr.ID),Ls&&(Aa&&I.collisionIndex.insertCollisionCircles(Ls.circles,ae.get("text-ignore-placement"),ee.bucketInstanceId,Mu,hr.ID),C)){var ou=ee.bucketInstanceId,Tl=I.collisionCircleArrays[ou];Tl===void 0&&(Tl=I.collisionCircleArrays[ou]=new os);for(var ql=0;ql<Ls.circles.length;ql+=4)Tl.circles.push(Ls.circles[ql+0]),Tl.circles.push(Ls.circles[ql+1]),Tl.circles.push(Ls.circles[ql+2]),Tl.circles.push(Ls.collisionDetected?1:0)}I.placements[Bi.crossTileID]=new Wo(Aa||Ln,fa||pi,Ma||ee.justReloaded),A[Bi.crossTileID]=!0}};if(An)for(var Pi=ee.getSortedSymbolIndexes(this.transform.angle),ta=Pi.length-1;ta>=0;--ta){var sa=Pi[ta];oi(ee.symbolInstances.get(sa),ee.collisionArrays[sa])}else for(var Ki=b.symbolInstanceStart;Ki<b.symbolInstanceEnd;Ki++)oi(ee.symbolInstances.get(Ki),ee.collisionArrays[Ki]);if(C&&ee.bucketInstanceId in this.collisionCircleArrays){var _o=this.collisionCircleArrays[ee.bucketInstanceId];w.invert(_o.invProjMatrix,Ae),_o.viewportMatrix=this.collisionIndex.getViewportMatrix()}ee.justReloaded=!1},Jo.prototype.markUsedJustification=function(b,A,C,I){var Z;Z=I===w.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[w.getAnchorJustification(A)];for(var ee=0,ae=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];ee<ae.length;ee+=1){var Ae=ae[ee];Ae>=0&&(b.text.placedSymbolArray.get(Ae).crossTileID=Z>=0&&Ae!==Z?0:C.crossTileID)}},Jo.prototype.markUsedOrientation=function(b,A,C){for(var I=A===w.WritingMode.horizontal||A===w.WritingMode.horizontalOnly?A:0,Z=A===w.WritingMode.vertical?A:0,ee=0,ae=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];ee<ae.length;ee+=1)b.text.placedSymbolArray.get(ae[ee]).placedOrientation=I;C.verticalPlacedTextSymbolIndex&&(b.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=Z)},Jo.prototype.commit=function(b){this.commitTime=b,this.zoomAtLastRecencyCheck=this.transform.zoom;var A=this.prevPlacement,C=!1;this.prevZoomAdjustment=A?A.zoomAdjustment(this.transform.zoom):0;var I=A?A.symbolFadeChange(b):1,Z=A?A.opacities:{},ee=A?A.variableOffsets:{},ae=A?A.placedOrientations:{};for(var Ae in this.placements){var at=this.placements[Ae],bt=Z[Ae];bt?(this.opacities[Ae]=new Yi(bt,I,at.text,at.icon),C=C||at.text!==bt.text.placed||at.icon!==bt.icon.placed):(this.opacities[Ae]=new Yi(null,I,at.text,at.icon,at.skipFade),C=C||at.text||at.icon)}for(var Vt in Z){var Wt=Z[Vt];if(!this.opacities[Vt]){var $t=new Yi(Wt,I,!1,!1);$t.isHidden()||(this.opacities[Vt]=$t,C=C||Wt.text.placed||Wt.icon.placed)}}for(var dr in ee)this.variableOffsets[dr]||!this.opacities[dr]||this.opacities[dr].isHidden()||(this.variableOffsets[dr]=ee[dr]);for(var hr in ae)this.placedOrientations[hr]||!this.opacities[hr]||this.opacities[hr].isHidden()||(this.placedOrientations[hr]=ae[hr]);C?this.lastPlacementChangeTime=b:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=A?A.lastPlacementChangeTime:b)},Jo.prototype.updateLayerOpacities=function(b,A){for(var C={},I=0,Z=A;I<Z.length;I+=1){var ee=Z[I],ae=ee.getBucket(b);ae&&ee.latestFeatureIndex&&b.id===ae.layerIds[0]&&this.updateBucketOpacities(ae,C,ee.collisionBoxArray)}},Jo.prototype.updateBucketOpacities=function(b,A,C){var I=this;b.hasTextData()&&b.text.opacityVertexArray.clear(),b.hasIconData()&&b.icon.opacityVertexArray.clear(),b.hasIconCollisionBoxData()&&b.iconCollisionBox.collisionVertexArray.clear(),b.hasTextCollisionBoxData()&&b.textCollisionBox.collisionVertexArray.clear();var Z=b.layers[0].layout,ee=new Yi(null,0,!1,!1,!0),ae=Z.get("text-allow-overlap"),Ae=Z.get("icon-allow-overlap"),at=Z.get("text-variable-anchor"),bt=Z.get("text-rotation-alignment")==="map",Vt=Z.get("text-pitch-alignment")==="map",Wt=Z.get("icon-text-fit")!=="none",$t=new Yi(null,0,ae&&(Ae||!b.hasIconData()||Z.get("icon-optional")),Ae&&(ae||!b.hasTextData()||Z.get("text-optional")),!0);!b.collisionArrays&&C&&(b.hasIconCollisionBoxData()||b.hasTextCollisionBoxData())&&b.deserializeCollisionBoxes(C);for(var dr=function(Ir,Hr,en){for(var _n=0;_n<Hr/4;_n++)Ir.opacityVertexArray.emplaceBack(en)},hr=function(Ir){var Hr=b.symbolInstances.get(Ir),en=Hr.numHorizontalGlyphVertices,_n=Hr.numVerticalGlyphVertices,pn=Hr.crossTileID,An=I.opacities[pn];A[pn]?An=ee:An||(I.opacities[pn]=An=$t),A[pn]=!0;var Ln=Hr.numIconVertices>0,pi=I.placedOrientations[Hr.crossTileID],oi=pi===w.WritingMode.vertical,Pi=pi===w.WritingMode.horizontal||pi===w.WritingMode.horizontalOnly;if(en>0||_n>0){var ta=wo(An.text);dr(b.text,en,oi?Lo:ta),dr(b.text,_n,Pi?Lo:ta);var sa=An.text.isHidden();[Hr.rightJustifiedTextSymbolIndex,Hr.centerJustifiedTextSymbolIndex,Hr.leftJustifiedTextSymbolIndex].forEach(function(ha){ha>=0&&(b.text.placedSymbolArray.get(ha).hidden=sa||oi?1:0)}),Hr.verticalPlacedTextSymbolIndex>=0&&(b.text.placedSymbolArray.get(Hr.verticalPlacedTextSymbolIndex).hidden=sa||Pi?1:0);var Ki=I.variableOffsets[Hr.crossTileID];Ki&&I.markUsedJustification(b,Ki.anchor,Hr,pi);var _o=I.placedOrientations[Hr.crossTileID];_o&&(I.markUsedJustification(b,"left",Hr,_o),I.markUsedOrientation(b,_o,Hr))}if(Ln){var Bi=wo(An.icon),Ia=!(Wt&&Hr.verticalPlacedIconSymbolIndex&&oi);Hr.placedIconSymbolIndex>=0&&(dr(b.icon,Hr.numIconVertices,Ia?Bi:Lo),b.icon.placedSymbolArray.get(Hr.placedIconSymbolIndex).hidden=An.icon.isHidden()),Hr.verticalPlacedIconSymbolIndex>=0&&(dr(b.icon,Hr.numVerticalIconVertices,Ia?Lo:Bi),b.icon.placedSymbolArray.get(Hr.verticalPlacedIconSymbolIndex).hidden=An.icon.isHidden())}if(b.hasIconCollisionBoxData()||b.hasTextCollisionBoxData()){var La=b.collisionArrays[Ir];if(La){var Aa=new w.Point(0,0);if(La.textBox||La.verticalTextBox){var fa=!0;if(at){var Ma=I.variableOffsets[pn];Ma?(Aa=Qa(Ma.anchor,Ma.width,Ma.height,Ma.textOffset,Ma.textBoxScale),bt&&Aa._rotate(Vt?I.transform.angle:-I.transform.angle)):fa=!1}La.textBox&&Zt(b.textCollisionBox.collisionVertexArray,An.text.placed,!fa||oi,Aa.x,Aa.y),La.verticalTextBox&&Zt(b.textCollisionBox.collisionVertexArray,An.text.placed,!fa||Pi,Aa.x,Aa.y)}var Ea=!!(!Pi&&La.verticalIconBox);La.iconBox&&Zt(b.iconCollisionBox.collisionVertexArray,An.icon.placed,Ea,Wt?Aa.x:0,Wt?Aa.y:0),La.verticalIconBox&&Zt(b.iconCollisionBox.collisionVertexArray,An.icon.placed,!Ea,Wt?Aa.x:0,Wt?Aa.y:0)}}},Rr=0;Rr<b.symbolInstances.length;Rr++)hr(Rr);if(b.sortFeatures(this.transform.angle),this.retainedQueryData[b.bucketInstanceId]&&(this.retainedQueryData[b.bucketInstanceId].featureSortOrder=b.featureSortOrder),b.hasTextData()&&b.text.opacityVertexBuffer&&b.text.opacityVertexBuffer.updateData(b.text.opacityVertexArray),b.hasIconData()&&b.icon.opacityVertexBuffer&&b.icon.opacityVertexBuffer.updateData(b.icon.opacityVertexArray),b.hasIconCollisionBoxData()&&b.iconCollisionBox.collisionVertexBuffer&&b.iconCollisionBox.collisionVertexBuffer.updateData(b.iconCollisionBox.collisionVertexArray),b.hasTextCollisionBoxData()&&b.textCollisionBox.collisionVertexBuffer&&b.textCollisionBox.collisionVertexBuffer.updateData(b.textCollisionBox.collisionVertexArray),b.bucketInstanceId in this.collisionCircleArrays){var lr=this.collisionCircleArrays[b.bucketInstanceId];b.placementInvProjMatrix=lr.invProjMatrix,b.placementViewportMatrix=lr.viewportMatrix,b.collisionCircleArray=lr.circles,delete this.collisionCircleArrays[b.bucketInstanceId]}},Jo.prototype.symbolFadeChange=function(b){return this.fadeDuration===0?1:(b-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Jo.prototype.zoomAdjustment=function(b){return Math.max(0,(this.transform.zoom-b)/1.5)},Jo.prototype.hasTransitions=function(b){return this.stale||b-this.lastPlacementChangeTime<this.fadeDuration},Jo.prototype.stillRecent=function(b,A){var C=this.zoomAtLastRecencyCheck===A?1-this.zoomAdjustment(A):1;return this.zoomAtLastRecencyCheck=A,this.commitTime+this.fadeDuration*C>b},Jo.prototype.setStale=function(){this.stale=!0};var Jt=Math.pow(2,25),Ur=Math.pow(2,24),Tn=Math.pow(2,17),si=Math.pow(2,16),Hi=Math.pow(2,9),ao=Math.pow(2,8),Us=Math.pow(2,1);function wo(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;var A=b.placed?1:0,C=Math.floor(127*b.opacity);return C*Jt+A*Ur+C*Tn+A*si+C*Hi+A*ao+C*Us+A}var Lo=0,Hu=function(b){this._sortAcrossTiles=b.layout.get("symbol-z-order")!=="viewport-y"&&b.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Hu.prototype.continuePlacement=function(b,A,C,I,Z){for(var ee=this._bucketParts;this._currentTileIndex<b.length;)if(A.getBucketParts(ee,I,b[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Z())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort(function(ae,Ae){return ae.sortKey-Ae.sortKey}));this._currentPartIndex<ee.length;)if(A.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,Z())return!0;return!1};var cf=function(b,A,C,I,Z,ee,ae){this.placement=new Jo(b,Z,ee,ae),this._currentPlacementIndex=A.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=I,this._done=!1};cf.prototype.isDone=function(){return this._done},cf.prototype.continuePlacement=function(b,A,C){for(var I=this,Z=w.browser.now(),ee=function(){var at=w.browser.now()-Z;return!I._forceFullPlacement&&at>2};this._currentPlacementIndex>=0;){var ae=A[b[this._currentPlacementIndex]],Ae=this.placement.collisionIndex.transform.zoom;if(ae.type==="symbol"&&(!ae.minzoom||ae.minzoom<=Ae)&&(!ae.maxzoom||ae.maxzoom>Ae)){if(this._inProgressLayer||(this._inProgressLayer=new Hu(ae)),this._inProgressLayer.continuePlacement(C[ae.source],this.placement,this._showCollisionBoxes,ae,ee))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},cf.prototype.commit=function(b){return this.placement.commit(b),this.placement};var rh=512/w.EXTENT/2,nh=function(b,A,C){this.tileID=b,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(var I=0;I<A.length;I++){var Z=A.get(I),ee=Z.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:Z.crossTileID,coord:this.getScaledCoordinates(Z,b)})}};nh.prototype.getScaledCoordinates=function(b,A){var C=rh/Math.pow(2,A.canonical.z-this.tileID.canonical.z);return{x:Math.floor((A.canonical.x*w.EXTENT+b.anchorX)*C),y:Math.floor((A.canonical.y*w.EXTENT+b.anchorY)*C)}},nh.prototype.findMatches=function(b,A,C){for(var I=this.tileID.canonical.z<A.canonical.z?1:Math.pow(2,this.tileID.canonical.z-A.canonical.z),Z=0;Z<b.length;Z++){var ee=b.get(Z);if(!ee.crossTileID){var ae=this.indexedSymbolInstances[ee.key];if(ae)for(var Ae=this.getScaledCoordinates(ee,A),at=0,bt=ae;at<bt.length;at+=1){var Vt=bt[at];if(Math.abs(Vt.coord.x-Ae.x)<=I&&Math.abs(Vt.coord.y-Ae.y)<=I&&!C[Vt.crossTileID]){C[Vt.crossTileID]=!0,ee.crossTileID=Vt.crossTileID;break}}}}};var du=function(){this.maxCrossTileID=0};du.prototype.generate=function(){return++this.maxCrossTileID};var ec=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ec.prototype.handleWrapJump=function(b){var A=Math.round((b-this.lng)/360);if(A!==0)for(var C in this.indexes){var I=this.indexes[C],Z={};for(var ee in I){var ae=I[ee];ae.tileID=ae.tileID.unwrapTo(ae.tileID.wrap+A),Z[ae.tileID.key]=ae}this.indexes[C]=Z}this.lng=b},ec.prototype.addBucket=function(b,A,C){if(this.indexes[b.overscaledZ]&&this.indexes[b.overscaledZ][b.key]){if(this.indexes[b.overscaledZ][b.key].bucketInstanceId===A.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(b.overscaledZ,this.indexes[b.overscaledZ][b.key])}for(var I=0;I<A.symbolInstances.length;I++)A.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[b.overscaledZ]||(this.usedCrossTileIDs[b.overscaledZ]={});var Z=this.usedCrossTileIDs[b.overscaledZ];for(var ee in this.indexes){var ae=this.indexes[ee];if(Number(ee)>b.overscaledZ)for(var Ae in ae){var at=ae[Ae];at.tileID.isChildOf(b)&&at.findMatches(A.symbolInstances,b,Z)}else{var bt=ae[b.scaledTo(Number(ee)).key];bt&&bt.findMatches(A.symbolInstances,b,Z)}}for(var Vt=0;Vt<A.symbolInstances.length;Vt++){var Wt=A.symbolInstances.get(Vt);Wt.crossTileID||(Wt.crossTileID=C.generate(),Z[Wt.crossTileID]=!0)}return this.indexes[b.overscaledZ]===void 0&&(this.indexes[b.overscaledZ]={}),this.indexes[b.overscaledZ][b.key]=new nh(b,A.symbolInstances,A.bucketInstanceId),!0},ec.prototype.removeBucketCrossTileIDs=function(b,A){for(var C in A.indexedSymbolInstances)for(var I=0,Z=A.indexedSymbolInstances[C];I<Z.length;I+=1)delete this.usedCrossTileIDs[b][Z[I].crossTileID]},ec.prototype.removeStaleBuckets=function(b){var A=!1;for(var C in this.indexes){var I=this.indexes[C];for(var Z in I)b[I[Z].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,I[Z]),delete I[Z],A=!0)}return A};var ru=function(){this.layerIndexes={},this.crossTileIDs=new du,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ru.prototype.addLayer=function(b,A,C){var I=this.layerIndexes[b.id];I===void 0&&(I=this.layerIndexes[b.id]=new ec);var Z=!1,ee={};I.handleWrapJump(C);for(var ae=0,Ae=A;ae<Ae.length;ae+=1){var at=Ae[ae],bt=at.getBucket(b);bt&&b.id===bt.layerIds[0]&&(bt.bucketInstanceId||(bt.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(at.tileID,bt,this.crossTileIDs)&&(Z=!0),ee[bt.bucketInstanceId]=!0)}return I.removeStaleBuckets(ee)&&(Z=!0),Z},ru.prototype.pruneUnusedLayers=function(b){var A={};for(var C in b.forEach(function(I){A[I]=!0}),this.layerIndexes)A[C]||delete this.layerIndexes[C]};var Sl=function(b,A){return w.emitValidationErrors(b,A&&A.filter(function(C){return C.identifier!=="source.canvas"}))},tc=w.pick(Kn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ho=w.pick(Kn,["setCenter","setZoom","setBearing","setPitch"]),Xl=function(){var b={},A=w.styleSpec.$version;for(var C in w.styleSpec.$root){var I,Z=w.styleSpec.$root[C];Z.required&&(I=C==="version"?A:Z.type==="array"?[]:{})!=null&&(b[C]=I)}return b}(),bs=function(b){function A(C,I){var Z=this;I===void 0&&(I={}),b.call(this),this.map=C,this.dispatcher=new je(un(),this),this.imageManager=new E,this.imageManager.setEventedParent(this),this.glyphManager=new ht(C._requestManager,I.localIdeographFontFamily),this.lineAtlas=new Ve(256,512),this.crossTileSymbolIndex=new ru,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new w.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",w.getReferrer());var ee=this;this._rtlTextPluginCallback=A.registerForPluginStateChange(function(ae){ee.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ae.pluginStatus,pluginURL:ae.pluginURL},function(Ae,at){if(w.triggerPluginCompletionEvent(Ae),at&&at.every(function(Vt){return Vt}))for(var bt in ee.sourceCaches)ee.sourceCaches[bt].reload()})}),this.on("data",function(ae){if(ae.dataType==="source"&&ae.sourceDataType==="metadata"){var Ae=Z.sourceCaches[ae.sourceId];if(Ae){var at=Ae.getSource();if(at&&at.vectorLayerIds)for(var bt in Z._layers){var Vt=Z._layers[bt];Vt.source===at.id&&Z._validateLayer(Vt)}}}})}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.loadURL=function(C,I){var Z=this;I===void 0&&(I={}),this.fire(new w.Event("dataloading",{dataType:"style"}));var ee=typeof I.validate=="boolean"?I.validate:!w.isMapboxURL(C);C=this.map._requestManager.normalizeStyleURL(C,I.accessToken);var ae=this.map._requestManager.transformRequest(C,w.ResourceType.Style);this._request=w.getJSON(ae,function(Ae,at){Z._request=null,Ae?Z.fire(new w.ErrorEvent(Ae)):at&&Z._load(at,ee)})},A.prototype.loadJSON=function(C,I){var Z=this;I===void 0&&(I={}),this.fire(new w.Event("dataloading",{dataType:"style"})),this._request=w.browser.frame(function(){Z._request=null,Z._load(C,I.validate!==!1)})},A.prototype.loadEmpty=function(){this.fire(new w.Event("dataloading",{dataType:"style"})),this._load(Xl,!1)},A.prototype._load=function(C,I){if(!I||!Sl(this,w.validateStyle(C))){for(var Z in this._loaded=!0,this.stylesheet=C,C.sources)this.addSource(Z,C.sources[Z],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs);var ee=jn(this.stylesheet.layers);this._order=ee.map(function(bt){return bt.id}),this._layers={},this._serializedLayers={};for(var ae=0,Ae=ee;ae<Ae.length;ae+=1){var at=Ae[ae];(at=w.createStyleLayer(at)).setEventedParent(this,{layer:{id:at.id}}),this._layers[at.id]=at,this._serializedLayers[at.id]=at.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ye(this.stylesheet.light),this.fire(new w.Event("data",{dataType:"style"})),this.fire(new w.Event("style.load"))}},A.prototype._loadSprite=function(C){var I=this;this._spriteRequest=function(Z,ee,ae){var Ae,at,bt,Vt=w.browser.devicePixelRatio>1?"@2x":"",Wt=w.getJSON(ee.transformRequest(ee.normalizeSpriteURL(Z,Vt,".json"),w.ResourceType.SpriteJSON),function(hr,Rr){Wt=null,bt||(bt=hr,Ae=Rr,dr())}),$t=w.getImage(ee.transformRequest(ee.normalizeSpriteURL(Z,Vt,".png"),w.ResourceType.SpriteImage),function(hr,Rr){$t=null,bt||(bt=hr,at=Rr,dr())});function dr(){if(bt)ae(bt);else if(Ae&&at){var hr=w.browser.getImageData(at),Rr={};for(var lr in Ae){var Ir=Ae[lr],Hr=Ir.width,en=Ir.height,_n=Ir.x,pn=Ir.y,An=Ir.sdf,Ln=Ir.pixelRatio,pi=Ir.stretchX,oi=Ir.stretchY,Pi=Ir.content,ta=new w.RGBAImage({width:Hr,height:en});w.RGBAImage.copy(hr,ta,{x:_n,y:pn},{x:0,y:0},{width:Hr,height:en}),Rr[lr]={data:ta,pixelRatio:Ln,sdf:An,stretchX:pi,stretchY:oi,content:Pi}}ae(null,Rr)}}return{cancel:function(){Wt&&(Wt.cancel(),Wt=null),$t&&($t.cancel(),$t=null)}}}(C,this.map._requestManager,function(Z,ee){if(I._spriteRequest=null,Z)I.fire(new w.ErrorEvent(Z));else if(ee)for(var ae in ee)I.imageManager.addImage(ae,ee[ae]);I.imageManager.setLoaded(!0),I._availableImages=I.imageManager.listImages(),I.dispatcher.broadcast("setImages",I._availableImages),I.fire(new w.Event("data",{dataType:"style"}))})},A.prototype._validateLayer=function(C){var I=this.sourceCaches[C.source];if(I){var Z=C.sourceLayer;if(Z){var ee=I.getSource();(ee.type==="geojson"||ee.vectorLayerIds&&ee.vectorLayerIds.indexOf(Z)===-1)&&this.fire(new w.ErrorEvent(new Error('Source layer "'+Z+'" does not exist on source "'+ee.id+'" as specified by style layer "'+C.id+'"')))}}},A.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var C in this.sourceCaches)if(!this.sourceCaches[C].loaded())return!1;return!!this.imageManager.isLoaded()},A.prototype._serializeLayers=function(C){for(var I=[],Z=0,ee=C;Z<ee.length;Z+=1){var ae=this._layers[ee[Z]];ae.type!=="custom"&&I.push(ae.serialize())}return I},A.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(var I in this._layers)if(this._layers[I].hasTransition())return!0;return!1},A.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},A.prototype.update=function(C){if(this._loaded){var I=this._changed;if(this._changed){var Z=Object.keys(this._updatedLayers),ee=Object.keys(this._removedLayers);for(var ae in(Z.length||ee.length)&&this._updateWorkerLayers(Z,ee),this._updatedSources){var Ae=this._updatedSources[ae];Ae==="reload"?this._reloadSource(ae):Ae==="clear"&&this._clearSource(ae)}for(var at in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[at].updateTransitions(C);this.light.updateTransitions(C),this._resetUpdates()}var bt={};for(var Vt in this.sourceCaches){var Wt=this.sourceCaches[Vt];bt[Vt]=Wt.used,Wt.used=!1}for(var $t=0,dr=this._order;$t<dr.length;$t+=1){var hr=this._layers[dr[$t]];hr.recalculate(C,this._availableImages),!hr.isHidden(C.zoom)&&hr.source&&(this.sourceCaches[hr.source].used=!0)}for(var Rr in bt){var lr=this.sourceCaches[Rr];bt[Rr]!==lr.used&&lr.fire(new w.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Rr}))}this.light.recalculate(C),this.z=C.zoom,I&&this.fire(new w.Event("data",{dataType:"style"}))}},A.prototype._updateTilesForChangedImages=function(){var C=Object.keys(this._changedImages);if(C.length){for(var I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],C);this._changedImages={}}},A.prototype._updateWorkerLayers=function(C,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(C),removedIds:I})},A.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},A.prototype.setState=function(C){var I=this;if(this._checkLoaded(),Sl(this,w.validateStyle(C)))return!1;(C=w.clone$1(C)).layers=jn(C.layers);var Z=function(ae,Ae){if(!ae)return[{command:Kn.setStyle,args:[Ae]}];var at=[];try{if(!w.deepEqual(ae.version,Ae.version))return[{command:Kn.setStyle,args:[Ae]}];w.deepEqual(ae.center,Ae.center)||at.push({command:Kn.setCenter,args:[Ae.center]}),w.deepEqual(ae.zoom,Ae.zoom)||at.push({command:Kn.setZoom,args:[Ae.zoom]}),w.deepEqual(ae.bearing,Ae.bearing)||at.push({command:Kn.setBearing,args:[Ae.bearing]}),w.deepEqual(ae.pitch,Ae.pitch)||at.push({command:Kn.setPitch,args:[Ae.pitch]}),w.deepEqual(ae.sprite,Ae.sprite)||at.push({command:Kn.setSprite,args:[Ae.sprite]}),w.deepEqual(ae.glyphs,Ae.glyphs)||at.push({command:Kn.setGlyphs,args:[Ae.glyphs]}),w.deepEqual(ae.transition,Ae.transition)||at.push({command:Kn.setTransition,args:[Ae.transition]}),w.deepEqual(ae.light,Ae.light)||at.push({command:Kn.setLight,args:[Ae.light]});var bt={},Vt=[];(function($t,dr,hr,Rr){var lr;for(lr in dr=dr||{},$t=$t||{})$t.hasOwnProperty(lr)&&(dr.hasOwnProperty(lr)||vi(lr,hr,Rr));for(lr in dr)dr.hasOwnProperty(lr)&&($t.hasOwnProperty(lr)?w.deepEqual($t[lr],dr[lr])||($t[lr].type==="geojson"&&dr[lr].type==="geojson"&&Oa($t,dr,lr)?hr.push({command:Kn.setGeoJSONSourceData,args:[lr,dr[lr].data]}):da(lr,dr,hr,Rr)):aa(lr,dr,hr))})(ae.sources,Ae.sources,Vt,bt);var Wt=[];ae.layers&&ae.layers.forEach(function($t){bt[$t.source]?at.push({command:Kn.removeLayer,args:[$t.id]}):Wt.push($t)}),at=at.concat(Vt),function($t,dr,hr){dr=dr||[];var Rr,lr,Ir,Hr,en,_n,pn,An=($t=$t||[]).map(Va),Ln=dr.map(Va),pi=$t.reduce(Sa,{}),oi=dr.reduce(Sa,{}),Pi=An.slice(),ta=Object.create(null);for(Rr=0,lr=0;Rr<An.length;Rr++)oi.hasOwnProperty(Ir=An[Rr])?lr++:(hr.push({command:Kn.removeLayer,args:[Ir]}),Pi.splice(Pi.indexOf(Ir,lr),1));for(Rr=0,lr=0;Rr<Ln.length;Rr++)Pi[Pi.length-1-Rr]!==(Ir=Ln[Ln.length-1-Rr])&&(pi.hasOwnProperty(Ir)?(hr.push({command:Kn.removeLayer,args:[Ir]}),Pi.splice(Pi.lastIndexOf(Ir,Pi.length-lr),1)):lr++,hr.push({command:Kn.addLayer,args:[oi[Ir],_n=Pi[Pi.length-Rr]]}),Pi.splice(Pi.length-Rr,0,Ir),ta[Ir]=!0);for(Rr=0;Rr<Ln.length;Rr++)if(Hr=pi[Ir=Ln[Rr]],en=oi[Ir],!ta[Ir]&&!w.deepEqual(Hr,en))if(w.deepEqual(Hr.source,en.source)&&w.deepEqual(Hr["source-layer"],en["source-layer"])&&w.deepEqual(Hr.type,en.type)){for(pn in xa(Hr.layout,en.layout,hr,Ir,null,Kn.setLayoutProperty),xa(Hr.paint,en.paint,hr,Ir,null,Kn.setPaintProperty),w.deepEqual(Hr.filter,en.filter)||hr.push({command:Kn.setFilter,args:[Ir,en.filter]}),w.deepEqual(Hr.minzoom,en.minzoom)&&w.deepEqual(Hr.maxzoom,en.maxzoom)||hr.push({command:Kn.setLayerZoomRange,args:[Ir,en.minzoom,en.maxzoom]}),Hr)Hr.hasOwnProperty(pn)&&pn!=="layout"&&pn!=="paint"&&pn!=="filter"&&pn!=="metadata"&&pn!=="minzoom"&&pn!=="maxzoom"&&(pn.indexOf("paint.")===0?xa(Hr[pn],en[pn],hr,Ir,pn.slice(6),Kn.setPaintProperty):w.deepEqual(Hr[pn],en[pn])||hr.push({command:Kn.setLayerProperty,args:[Ir,pn,en[pn]]}));for(pn in en)en.hasOwnProperty(pn)&&!Hr.hasOwnProperty(pn)&&pn!=="layout"&&pn!=="paint"&&pn!=="filter"&&pn!=="metadata"&&pn!=="minzoom"&&pn!=="maxzoom"&&(pn.indexOf("paint.")===0?xa(Hr[pn],en[pn],hr,Ir,pn.slice(6),Kn.setPaintProperty):w.deepEqual(Hr[pn],en[pn])||hr.push({command:Kn.setLayerProperty,args:[Ir,pn,en[pn]]}))}else hr.push({command:Kn.removeLayer,args:[Ir]}),_n=Pi[Pi.lastIndexOf(Ir)+1],hr.push({command:Kn.addLayer,args:[en,_n]})}(Wt,Ae.layers,at)}catch($t){console.warn("Unable to compute style diff:",$t),at=[{command:Kn.setStyle,args:[Ae]}]}return at}(this.serialize(),C).filter(function(ae){return!(ae.command in ho)});if(Z.length===0)return!1;var ee=Z.filter(function(ae){return!(ae.command in tc)});if(ee.length>0)throw new Error("Unimplemented: "+ee.map(function(ae){return ae.command}).join(", ")+".");return Z.forEach(function(ae){ae.command!=="setTransition"&&I[ae.command].apply(I,ae.args)}),this.stylesheet=C,!0},A.prototype.addImage=function(C,I){if(this.getImage(C))return this.fire(new w.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(C,I),this._afterImageUpdated(C)},A.prototype.updateImage=function(C,I){this.imageManager.updateImage(C,I)},A.prototype.getImage=function(C){return this.imageManager.getImage(C)},A.prototype.removeImage=function(C){if(!this.getImage(C))return this.fire(new w.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(C),this._afterImageUpdated(C)},A.prototype._afterImageUpdated=function(C){this._availableImages=this.imageManager.listImages(),this._changedImages[C]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new w.Event("data",{dataType:"style"}))},A.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},A.prototype.addSource=function(C,I,Z){var ee=this;if(Z===void 0&&(Z={}),this._checkLoaded(),this.sourceCaches[C]!==void 0)throw new Error("There is already a source with this ID");if(!I.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(I).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(w.validateStyle.source,"sources."+C,I,null,Z))){this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);var ae=this.sourceCaches[C]=new ot(C,I,this.dispatcher);ae.style=this,ae.setEventedParent(this,function(){return{isSourceLoaded:ee.loaded(),source:ae.serialize(),sourceId:C}}),ae.onAdd(this.map),this._changed=!0}},A.prototype.removeSource=function(C){if(this._checkLoaded(),this.sourceCaches[C]===void 0)throw new Error("There is no source with this ID");for(var I in this._layers)if(this._layers[I].source===C)return this.fire(new w.ErrorEvent(new Error('Source "'+C+'" cannot be removed while layer "'+I+'" is using it.')));var Z=this.sourceCaches[C];delete this.sourceCaches[C],delete this._updatedSources[C],Z.fire(new w.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C})),Z.setEventedParent(null),Z.clearTiles(),Z.onRemove&&Z.onRemove(this.map),this._changed=!0},A.prototype.setGeoJSONSourceData=function(C,I){this._checkLoaded(),this.sourceCaches[C].getSource().setData(I),this._changed=!0},A.prototype.getSource=function(C){return this.sourceCaches[C]&&this.sourceCaches[C].getSource()},A.prototype.addLayer=function(C,I,Z){Z===void 0&&(Z={}),this._checkLoaded();var ee=C.id;if(this.getLayer(ee))this.fire(new w.ErrorEvent(new Error('Layer with id "'+ee+'" already exists on this map')));else{var ae;if(C.type==="custom"){if(Sl(this,w.validateCustomStyleLayer(C)))return;ae=w.createStyleLayer(C)}else{if(typeof C.source=="object"&&(this.addSource(ee,C.source),C=w.clone$1(C),C=w.extend(C,{source:ee})),this._validate(w.validateStyle.layer,"layers."+ee,C,{arrayIndex:-1},Z))return;ae=w.createStyleLayer(C),this._validateLayer(ae),ae.setEventedParent(this,{layer:{id:ee}}),this._serializedLayers[ae.id]=ae.serialize()}var Ae=I?this._order.indexOf(I):this._order.length;if(I&&Ae===-1)this.fire(new w.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.')));else{if(this._order.splice(Ae,0,ee),this._layerOrderChanged=!0,this._layers[ee]=ae,this._removedLayers[ee]&&ae.source&&ae.type!=="custom"){var at=this._removedLayers[ee];delete this._removedLayers[ee],at.type!==ae.type?this._updatedSources[ae.source]="clear":(this._updatedSources[ae.source]="reload",this.sourceCaches[ae.source].pause())}this._updateLayer(ae),ae.onAdd&&ae.onAdd(this.map)}}},A.prototype.moveLayer=function(C,I){if(this._checkLoaded(),this._changed=!0,this._layers[C]){if(C!==I){var Z=this._order.indexOf(C);this._order.splice(Z,1);var ee=I?this._order.indexOf(I):this._order.length;I&&ee===-1?this.fire(new w.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.'))):(this._order.splice(ee,0,C),this._layerOrderChanged=!0)}}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be moved.")))},A.prototype.removeLayer=function(C){this._checkLoaded();var I=this._layers[C];if(I){I.setEventedParent(null);var Z=this._order.indexOf(C);this._order.splice(Z,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[C]=I,delete this._layers[C],delete this._serializedLayers[C],delete this._updatedLayers[C],delete this._updatedPaintProps[C],I.onRemove&&I.onRemove(this.map)}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be removed.")))},A.prototype.getLayer=function(C){return this._layers[C]},A.prototype.hasLayer=function(C){return C in this._layers},A.prototype.setLayerZoomRange=function(C,I,Z){this._checkLoaded();var ee=this.getLayer(C);ee?ee.minzoom===I&&ee.maxzoom===Z||(I!=null&&(ee.minzoom=I),Z!=null&&(ee.maxzoom=Z),this._updateLayer(ee)):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot have zoom extent.")))},A.prototype.setFilter=function(C,I,Z){Z===void 0&&(Z={}),this._checkLoaded();var ee=this.getLayer(C);if(ee){if(!w.deepEqual(ee.filter,I))return I==null?(ee.filter=void 0,void this._updateLayer(ee)):void(this._validate(w.validateStyle.filter,"layers."+ee.id+".filter",I,null,Z)||(ee.filter=w.clone$1(I),this._updateLayer(ee)))}else this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be filtered.")))},A.prototype.getFilter=function(C){return w.clone$1(this.getLayer(C).filter)},A.prototype.setLayoutProperty=function(C,I,Z,ee){ee===void 0&&(ee={}),this._checkLoaded();var ae=this.getLayer(C);ae?w.deepEqual(ae.getLayoutProperty(I),Z)||(ae.setLayoutProperty(I,Z,ee),this._updateLayer(ae)):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},A.prototype.getLayoutProperty=function(C,I){var Z=this.getLayer(C);if(Z)return Z.getLayoutProperty(I);this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style.")))},A.prototype.setPaintProperty=function(C,I,Z,ee){ee===void 0&&(ee={}),this._checkLoaded();var ae=this.getLayer(C);ae?w.deepEqual(ae.getPaintProperty(I),Z)||(ae.setPaintProperty(I,Z,ee)&&this._updateLayer(ae),this._changed=!0,this._updatedPaintProps[C]=!0):this.fire(new w.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},A.prototype.getPaintProperty=function(C,I){return this.getLayer(C).getPaintProperty(I)},A.prototype.setFeatureState=function(C,I){this._checkLoaded();var Z=C.source,ee=C.sourceLayer,ae=this.sourceCaches[Z];if(ae!==void 0){var Ae=ae.getSource().type;Ae==="geojson"&&ee?this.fire(new w.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Ae!=="vector"||ee?(C.id===void 0&&this.fire(new w.ErrorEvent(new Error("The feature id parameter must be provided."))),ae.setFeatureState(ee,C.id,I)):this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},A.prototype.removeFeatureState=function(C,I){this._checkLoaded();var Z=C.source,ee=this.sourceCaches[Z];if(ee!==void 0){var ae=ee.getSource().type,Ae=ae==="vector"?C.sourceLayer:void 0;ae!=="vector"||Ae?I&&typeof C.id!="string"&&typeof C.id!="number"?this.fire(new w.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):ee.removeFeatureState(Ae,C.id,I):this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},A.prototype.getFeatureState=function(C){this._checkLoaded();var I=C.source,Z=C.sourceLayer,ee=this.sourceCaches[I];if(ee!==void 0){if(ee.getSource().type!=="vector"||Z)return C.id===void 0&&this.fire(new w.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.getFeatureState(Z,C.id);this.fire(new w.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new w.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},A.prototype.getTransition=function(){return w.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},A.prototype.serialize=function(){return w.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:w.mapObject(this.sourceCaches,function(C){return C.serialize()}),layers:this._serializeLayers(this._order)},function(C){return C!==void 0})},A.prototype._updateLayer=function(C){this._updatedLayers[C.id]=!0,C.source&&!this._updatedSources[C.source]&&this.sourceCaches[C.source].getSource().type!=="raster"&&(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause()),this._changed=!0},A.prototype._flattenAndSortRenderedFeatures=function(C){for(var I=this,Z=function(pi){return I._layers[pi].type==="fill-extrusion"},ee={},ae=[],Ae=this._order.length-1;Ae>=0;Ae--){var at=this._order[Ae];if(Z(at)){ee[at]=Ae;for(var bt=0,Vt=C;bt<Vt.length;bt+=1){var Wt=Vt[bt][at];if(Wt)for(var $t=0,dr=Wt;$t<dr.length;$t+=1)ae.push(dr[$t])}}}ae.sort(function(pi,oi){return oi.intersectionZ-pi.intersectionZ});for(var hr=[],Rr=this._order.length-1;Rr>=0;Rr--){var lr=this._order[Rr];if(Z(lr))for(var Ir=ae.length-1;Ir>=0;Ir--){var Hr=ae[Ir].feature;if(ee[Hr.layer.id]<Rr)break;hr.push(Hr),ae.pop()}else for(var en=0,_n=C;en<_n.length;en+=1){var pn=_n[en][lr];if(pn)for(var An=0,Ln=pn;An<Ln.length;An+=1)hr.push(Ln[An].feature)}}return hr},A.prototype.queryRenderedFeatures=function(C,I,Z){I&&I.filter&&this._validate(w.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);var ee={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new w.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ae=0,Ae=I.layers;ae<Ae.length;ae+=1){var at=Ae[ae],bt=this._layers[at];if(!bt)return this.fire(new w.ErrorEvent(new Error("The layer '"+at+"' does not exist in the map's style and cannot be queried for features."))),[];ee[bt.source]=!0}}var Vt=[];for(var Wt in I.availableImages=this._availableImages,this.sourceCaches)I.layers&&!ee[Wt]||Vt.push(me(this.sourceCaches[Wt],this._layers,this._serializedLayers,C,I,Z));return this.placement&&Vt.push(function($t,dr,hr,Rr,lr,Ir,Hr){for(var en={},_n=Ir.queryRenderedSymbols(Rr),pn=[],An=0,Ln=Object.keys(_n).map(Number);An<Ln.length;An+=1)pn.push(Hr[Ln[An]]);pn.sort(Ge);for(var pi=function(){var Ki=Pi[oi],_o=Ki.featureIndex.lookupSymbolFeatures(_n[Ki.bucketInstanceId],dr,Ki.bucketIndex,Ki.sourceLayerIndex,lr.filter,lr.layers,lr.availableImages,$t);for(var Bi in _o){var Ia=en[Bi]=en[Bi]||[],La=_o[Bi];La.sort(function(Ma,Ea){var ha=Ki.featureSortOrder;if(ha){var Au=ha.indexOf(Ma.featureIndex);return ha.indexOf(Ea.featureIndex)-Au}return Ea.featureIndex-Ma.featureIndex});for(var Aa=0,fa=La;Aa<fa.length;Aa+=1)Ia.push(fa[Aa])}},oi=0,Pi=pn;oi<Pi.length;oi+=1)pi();var ta=function(Ki){en[Ki].forEach(function(_o){var Bi=_o.feature,Ia=hr[$t[Ki].source].getFeatureState(Bi.layer["source-layer"],Bi.id);Bi.source=Bi.layer.source,Bi.layer["source-layer"]&&(Bi.sourceLayer=Bi.layer["source-layer"]),Bi.state=Ia})};for(var sa in en)ta(sa);return en}(this._layers,this._serializedLayers,this.sourceCaches,C,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Vt)},A.prototype.querySourceFeatures=function(C,I){I&&I.filter&&this._validate(w.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);var Z=this.sourceCaches[C];return Z?function(ee,ae){for(var Ae=ee.getRenderableIds().map(function(dr){return ee.getTileByID(dr)}),at=[],bt={},Vt=0;Vt<Ae.length;Vt++){var Wt=Ae[Vt],$t=Wt.tileID.canonical.key;bt[$t]||(bt[$t]=!0,Wt.querySourceFeatures(at,ae))}return at}(Z,I):[]},A.prototype.addSourceType=function(C,I,Z){return A.getSourceType(C)?Z(new Error('A source type called "'+C+'" already exists.')):(A.setSourceType(C,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:C,url:I.workerSourceURL},Z):Z(null,null))},A.prototype.getLight=function(){return this.light.getLight()},A.prototype.setLight=function(C,I){I===void 0&&(I={}),this._checkLoaded();var Z=this.light.getLight(),ee=!1;for(var ae in C)if(!w.deepEqual(C[ae],Z[ae])){ee=!0;break}if(ee){var Ae={now:w.browser.now(),transition:w.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(C,I),this.light.updateTransitions(Ae)}},A.prototype._validate=function(C,I,Z,ee,ae){return ae===void 0&&(ae={}),(!ae||ae.validate!==!1)&&Sl(this,C.call(w.validateStyle,w.extend({key:I,style:this.serialize(),value:Z,styleSpec:w.styleSpec},ee)))},A.prototype._remove=function(){for(var C in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),w.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[C].setEventedParent(null);for(var I in this.sourceCaches)this.sourceCaches[I].clearTiles(),this.sourceCaches[I].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},A.prototype._clearSource=function(C){this.sourceCaches[C].clearTiles()},A.prototype._reloadSource=function(C){this.sourceCaches[C].resume(),this.sourceCaches[C].reload()},A.prototype._updateSources=function(C){for(var I in this.sourceCaches)this.sourceCaches[I].update(C)},A.prototype._generateCollisionBoxes=function(){for(var C in this.sourceCaches)this._reloadSource(C)},A.prototype._updatePlacement=function(C,I,Z,ee,ae){ae===void 0&&(ae=!1);for(var Ae=!1,at=!1,bt={},Vt=0,Wt=this._order;Vt<Wt.length;Vt+=1){var $t=this._layers[Wt[Vt]];if($t.type==="symbol"){if(!bt[$t.source]){var dr=this.sourceCaches[$t.source];bt[$t.source]=dr.getRenderableIds(!0).map(function(Hr){return dr.getTileByID(Hr)}).sort(function(Hr,en){return en.tileID.overscaledZ-Hr.tileID.overscaledZ||(Hr.tileID.isLessThan(en.tileID)?-1:1)})}var hr=this.crossTileSymbolIndex.addLayer($t,bt[$t.source],C.center.lng);Ae=Ae||hr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ae=ae||this._layerOrderChanged||Z===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.browser.now(),C.zoom))&&(this.pauseablePlacement=new cf(C,this._order,ae,I,Z,ee,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,bt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.browser.now()),at=!0),Ae&&this.pauseablePlacement.placement.setStale()),at||Ae)for(var Rr=0,lr=this._order;Rr<lr.length;Rr+=1){var Ir=this._layers[lr[Rr]];Ir.type==="symbol"&&this.placement.updateLayerOpacities(Ir,bt[Ir.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.browser.now())},A.prototype._releaseSymbolFadeTiles=function(){for(var C in this.sourceCaches)this.sourceCaches[C].releaseSymbolFadeTiles()},A.prototype.getImages=function(C,I,Z){this.imageManager.getImages(I.icons,Z),this._updateTilesForChangedImages();var ee=this.sourceCaches[I.source];ee&&ee.setDependencies(I.tileID.key,I.type,I.icons)},A.prototype.getGlyphs=function(C,I,Z){this.glyphManager.getGlyphs(I.stacks,Z)},A.prototype.getResource=function(C,I,Z){return w.makeRequest(I,Z)},A}(w.Evented);bs.getSourceType=function(b){return tt[b]},bs.setSourceType=function(b,A){tt[b]=A},bs.registerForPluginStateChange=w.registerForPluginStateChange;var Ss=w.createLayout([{name:"a_pos",type:"Int16",components:2}]),xc=Uo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),bc=Uo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rf=Uo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ll=Uo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Fl=Uo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Yl=Uo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ku=Uo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Sc=Uo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Rn=Uo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ji=Uo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Pv=Uo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ih=Uo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),rc=Uo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Jp=Uo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Gs=Uo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ec=Uo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Bl=Uo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),nu=Uo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),vu=Uo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),El=Uo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),nc=Uo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Nl=Uo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),wc=Uo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),jc=Uo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ah=Uo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ed=Uo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Uo(b,A){var C=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=A.match(/attribute ([\w]+) ([\w]+)/g),Z=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ae=ee?ee.concat(Z):Z,Ae={};return{fragmentSource:b=b.replace(C,function(at,bt,Vt,Wt,$t){return Ae[$t]=!0,bt==="define"?`
#ifndef HAS_UNIFORM_u_`+$t+`
varying `+Vt+" "+Wt+" "+$t+`;
#else
uniform `+Vt+" "+Wt+" u_"+$t+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$t+`
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`}),vertexSource:A=A.replace(C,function(at,bt,Vt,Wt,$t){var dr=Wt==="float"?"vec2":"vec4",hr=$t.match(/color/)?"color":dr;return Ae[$t]?bt==="define"?`
#ifndef HAS_UNIFORM_u_`+$t+`
uniform lowp float u_`+$t+`_t;
attribute `+Vt+" "+dr+" a_"+$t+`;
varying `+Vt+" "+Wt+" "+$t+`;
#else
uniform `+Vt+" "+Wt+" u_"+$t+`;
#endif
`:hr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+$t+" = a_"+$t+`;
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+$t+" = unpack_mix_"+hr+"(a_"+$t+", u_"+$t+`_t);
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`:bt==="define"?`
#ifndef HAS_UNIFORM_u_`+$t+`
uniform lowp float u_`+$t+`_t;
attribute `+Vt+" "+dr+" a_"+$t+`;
#else
uniform `+Vt+" "+Wt+" u_"+$t+`;
#endif
`:hr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+Vt+" "+Wt+" "+$t+" = a_"+$t+`;
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+Vt+" "+Wt+" "+$t+" = unpack_mix_"+hr+"(a_"+$t+", u_"+$t+`_t);
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`}),staticAttributes:I,staticUniforms:ae}}var Nd=Object.freeze({__proto__:null,prelude:xc,background:bc,backgroundPattern:Rf,circle:Ll,clippingMask:Fl,heatmap:Yl,heatmapTexture:ku,collisionBox:Sc,collisionCircle:Rn,debug:ji,fill:Pv,fillOutline:ih,fillOutlinePattern:rc,fillPattern:Jp,fillExtrusion:Gs,fillExtrusionPattern:Ec,hillshadePrepare:Bl,hillshade:nu,line:vu,lineGradient:El,linePattern:nc,lineSDF:Nl,raster:wc,symbolIcon:jc,symbolSDF:ah,symbolTextAndIcon:ed}),Uh=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ff(b){for(var A=[],C=0;C<b.length;C++)if(b[C]!==null){var I=b[C].split(" ");A.push(I.pop())}return A}Uh.prototype.bind=function(b,A,C,I,Z,ee,ae,Ae){this.context=b;for(var at=this.boundPaintVertexBuffers.length!==I.length,bt=0;!at&&bt<I.length;bt++)this.boundPaintVertexBuffers[bt]!==I[bt]&&(at=!0);b.extVertexArrayObject&&this.vao&&this.boundProgram===A&&this.boundLayoutVertexBuffer===C&&!at&&this.boundIndexBuffer===Z&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===ae&&this.boundDynamicVertexBuffer2===Ae?(b.bindVertexArrayOES.set(this.vao),ae&&ae.bind(),Z&&Z.dynamicDraw&&Z.bind(),Ae&&Ae.bind()):this.freshBind(A,C,I,Z,ee,ae,Ae)},Uh.prototype.freshBind=function(b,A,C,I,Z,ee,ae){var Ae,at=b.numAttributes,bt=this.context,Vt=bt.gl;if(bt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=bt.extVertexArrayObject.createVertexArrayOES(),bt.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=b,this.boundLayoutVertexBuffer=A,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=I,this.boundVertexOffset=Z,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=ae;else{Ae=bt.currentNumAttributes||0;for(var Wt=at;Wt<Ae;Wt++)Vt.disableVertexAttribArray(Wt)}A.enableAttributes(Vt,b);for(var $t=0,dr=C;$t<dr.length;$t+=1)dr[$t].enableAttributes(Vt,b);ee&&ee.enableAttributes(Vt,b),ae&&ae.enableAttributes(Vt,b),A.bind(),A.setVertexAttribPointers(Vt,b,Z);for(var hr=0,Rr=C;hr<Rr.length;hr+=1){var lr=Rr[hr];lr.bind(),lr.setVertexAttribPointers(Vt,b,Z)}ee&&(ee.bind(),ee.setVertexAttribPointers(Vt,b,Z)),I&&I.bind(),ae&&(ae.bind(),ae.setVertexAttribPointers(Vt,b,Z)),bt.currentNumAttributes=at},Uh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ss=function(b,A,C,I,Z,ee){var ae=b.gl;this.program=ae.createProgram();for(var Ae=ff(C.staticAttributes),at=I?I.getBinderAttributes():[],bt=Ae.concat(at),Vt=C.staticUniforms?ff(C.staticUniforms):[],Wt=I?I.getBinderUniforms():[],$t=[],dr=0,hr=Vt.concat(Wt);dr<hr.length;dr+=1){var Rr=hr[dr];$t.indexOf(Rr)<0&&$t.push(Rr)}var lr=I?I.defines():[];ee&&lr.push("#define OVERDRAW_INSPECTOR;");var Ir=lr.concat(xc.fragmentSource,C.fragmentSource).join(`
`),Hr=lr.concat(xc.vertexSource,C.vertexSource).join(`
`),en=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())this.failedToCreate=!0;else{ae.shaderSource(en,Ir),ae.compileShader(en),ae.attachShader(this.program,en);var _n=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())this.failedToCreate=!0;else{ae.shaderSource(_n,Hr),ae.compileShader(_n),ae.attachShader(this.program,_n),this.attributes={};var pn={};this.numAttributes=bt.length;for(var An=0;An<this.numAttributes;An++)bt[An]&&(ae.bindAttribLocation(this.program,An,bt[An]),this.attributes[bt[An]]=An);ae.linkProgram(this.program),ae.deleteShader(_n),ae.deleteShader(en);for(var Ln=0;Ln<$t.length;Ln++){var pi=$t[Ln];if(pi&&!pn[pi]){var oi=ae.getUniformLocation(this.program,pi);oi&&(pn[pi]=oi)}}this.fixedUniforms=Z(b,pn),this.binderUniforms=I?I.getUniforms(b,pn):[]}}};function vp(b,A,C){var I=1/Cn(C,1,A.transform.tileZoom),Z=Math.pow(2,C.tileID.overscaledZ),ee=C.tileSize*Math.pow(2,A.transform.tileZoom)/Z,ae=ee*(C.tileID.canonical.x+C.tileID.wrap*Z),Ae=ee*C.tileID.canonical.y;return{u_image:0,u_texsize:C.imageAtlasTexture.size,u_scale:[I,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[ae>>16,Ae>>16],u_pixel_coord_lower:[65535&ae,65535&Ae]}}ss.prototype.draw=function(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt,Wt,$t,dr,hr,Rr){var lr,Ir=b.gl;if(!this.failedToCreate){for(var Hr in b.program.set(this.program),b.setDepthMode(C),b.setStencilMode(I),b.setColorMode(Z),b.setCullFace(ee),this.fixedUniforms)this.fixedUniforms[Hr].set(ae[Hr]);dr&&dr.setUniforms(b,this.binderUniforms,Wt,{zoom:$t});for(var en=(lr={},lr[Ir.LINES]=2,lr[Ir.TRIANGLES]=3,lr[Ir.LINE_STRIP]=1,lr)[A],_n=0,pn=Vt.get();_n<pn.length;_n+=1){var An=pn[_n],Ln=An.vaos||(An.vaos={});(Ln[Ae]||(Ln[Ae]=new Uh)).bind(b,this,at,dr?dr.getPaintVertexBuffers():[],bt,An.vertexOffset,hr,Rr),Ir.drawElements(A,An.primitiveLength*en,Ir.UNSIGNED_SHORT,An.primitiveOffset*en*2)}}};var gp=function(b,A,C,I){var Z=A.style.light,ee=Z.properties.get("position"),ae=[ee.x,ee.y,ee.z],Ae=w.create$1();Z.properties.get("anchor")==="viewport"&&w.fromRotation(Ae,-A.transform.angle),w.transformMat3(ae,ae,Ae);var at=Z.properties.get("color");return{u_matrix:b,u_lightpos:ae,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[at.r,at.g,at.b],u_vertical_gradient:+C,u_opacity:I}},Du=function(b,A,C,I,Z,ee,ae){return w.extend(gp(b,A,C,I),vp(ee,A,ae),{u_height_factor:-Math.pow(2,Z.overscaledZ)/ae.tileSize/8})},Mt=function(b){return{u_matrix:b}},mr=function(b,A,C,I){return w.extend(Mt(b),vp(C,A,I))},Vr=function(b,A){return{u_matrix:b,u_world:A}},Qr=function(b,A,C,I,Z){return w.extend(mr(b,A,C,I),{u_world:Z})},On=function(b,A,C,I){var Z,ee,ae=b.transform;if(I.paint.get("circle-pitch-alignment")==="map"){var Ae=Cn(C,1,ae.zoom);Z=!0,ee=[Ae,Ae]}else Z=!1,ee=ae.pixelsToGLUnits;return{u_camera_to_center_distance:ae.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(A.posMatrix,C,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+Z,u_device_pixel_ratio:w.browser.devicePixelRatio,u_extrude_scale:ee}},gi=function(b,A,C){var I=Cn(C,1,A.zoom),Z=Math.pow(2,A.zoom-C.tileID.overscaledZ),ee=C.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:A.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[A.pixelsToGLUnits[0]/(I*Z),A.pixelsToGLUnits[1]/(I*Z)],u_overscale_factor:ee}},oa=function(b,A,C){return{u_matrix:b,u_inv_matrix:A,u_camera_to_center_distance:C.cameraToCenterDistance,u_viewport_size:[C.width,C.height]}},po=function(b,A,C){return C===void 0&&(C=1),{u_matrix:b,u_color:A,u_overlay:0,u_overlay_scale:C}},Ps=function(b){return{u_matrix:b}},ll=function(b,A,C,I){return{u_matrix:b,u_extrude_scale:Cn(A,1,C),u_intensity:I}},Ju=function(b,A,C){var I=b.transform;return{u_matrix:yp(b,A,C),u_ratio:1/Cn(A,1,I.zoom),u_device_pixel_ratio:w.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Fo=function(b,A,C,I){return w.extend(Ju(b,A,C),{u_image:0,u_image_height:I})},mp=function(b,A,C,I){var Z=b.transform,ee=Wc(A,Z);return{u_matrix:yp(b,A,C),u_texsize:A.imageAtlasTexture.size,u_ratio:1/Cn(A,1,Z.zoom),u_device_pixel_ratio:w.browser.devicePixelRatio,u_image:0,u_scale:[ee,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},zd=function(b,A,C,I,Z){var ee=b.lineAtlas,ae=Wc(A,b.transform),Ae=C.layout.get("line-cap")==="round",at=ee.getDash(I.from,Ae),bt=ee.getDash(I.to,Ae),Vt=at.width*Z.fromScale,Wt=bt.width*Z.toScale;return w.extend(Ju(b,A,C),{u_patternscale_a:[ae/Vt,-at.height/2],u_patternscale_b:[ae/Wt,-bt.height/2],u_sdfgamma:ee.width/(256*Math.min(Vt,Wt)*w.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:at.y,u_tex_y_b:bt.y,u_mix:Z.t})};function Wc(b,A){return 1/Cn(b,1,A.tileZoom)}function yp(b,A,C){return b.translatePosMatrix(A.tileID.posMatrix,A,C.paint.get("line-translate"),C.paint.get("line-translate-anchor"))}var hf=function(b,A,C,I,Z){return{u_matrix:b,u_tl_parent:A,u_scale_parent:C,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*Z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Z.paint.get("raster-brightness-min"),u_brightness_high:Z.paint.get("raster-brightness-max"),u_saturation_factor:(ae=Z.paint.get("raster-saturation"),ae>0?1-1/(1.001-ae):-ae),u_contrast_factor:(ee=Z.paint.get("raster-contrast"),ee>0?1/(1-ee):1+ee),u_spin_weights:td(Z.paint.get("raster-hue-rotate"))};var ee,ae};function td(b){b*=Math.PI/180;var A=Math.sin(b),C=Math.cos(b);return[(2*C+1)/3,(-Math.sqrt(3)*A-C+1)/3,(Math.sqrt(3)*A-C+1)/3]}var Ca,pf=function(b,A,C,I,Z,ee,ae,Ae,at,bt){var Vt=Z.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:A?A.uSizeT:0,u_size:A?A.uSize:0,u_camera_to_center_distance:Vt.cameraToCenterDistance,u_pitch:Vt.pitch/360*2*Math.PI,u_rotate_symbol:+C,u_aspect_ratio:Vt.width/Vt.height,u_fade_change:Z.options.fadeDuration?Z.symbolFadeChange:1,u_matrix:ee,u_label_plane_matrix:ae,u_coord_matrix:Ae,u_is_text:+at,u_pitch_with_map:+I,u_texsize:bt,u_texture:0}},oh=function(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt){var Wt=Z.transform;return w.extend(pf(b,A,C,I,Z,ee,ae,Ae,at,bt),{u_gamma_scale:I?Math.cos(Wt._pitch)*Wt.cameraToCenterDistance:1,u_device_pixel_ratio:w.browser.devicePixelRatio,u_is_halo:+Vt})},sh=function(b,A,C,I,Z,ee,ae,Ae,at,bt){return w.extend(oh(b,A,C,I,Z,ee,ae,Ae,!0,at,!0),{u_texsize_icon:bt,u_texture_icon:1})},If=function(b,A,C){return{u_matrix:b,u_opacity:A,u_color:C}},uh=function(b,A,C,I,Z,ee){return w.extend(function(ae,Ae,at,bt){var Vt=at.imageManager.getPattern(ae.from.toString()),Wt=at.imageManager.getPattern(ae.to.toString()),$t=at.imageManager.getPixelSize(),dr=$t.width,hr=$t.height,Rr=Math.pow(2,bt.tileID.overscaledZ),lr=bt.tileSize*Math.pow(2,at.transform.tileZoom)/Rr,Ir=lr*(bt.tileID.canonical.x+bt.tileID.wrap*Rr),Hr=lr*bt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Vt.tl,u_pattern_br_a:Vt.br,u_pattern_tl_b:Wt.tl,u_pattern_br_b:Wt.br,u_texsize:[dr,hr],u_mix:Ae.t,u_pattern_size_a:Vt.displaySize,u_pattern_size_b:Wt.displaySize,u_scale_a:Ae.fromScale,u_scale_b:Ae.toScale,u_tile_units_to_pixels:1/Cn(bt,1,at.transform.tileZoom),u_pixel_coord_upper:[Ir>>16,Hr>>16],u_pixel_coord_lower:[65535&Ir,65535&Hr]}}(I,ee,C,Z),{u_matrix:b,u_opacity:A})},Zs={fillExtrusion:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_lightpos:new w.Uniform3f(b,A.u_lightpos),u_lightintensity:new w.Uniform1f(b,A.u_lightintensity),u_lightcolor:new w.Uniform3f(b,A.u_lightcolor),u_vertical_gradient:new w.Uniform1f(b,A.u_vertical_gradient),u_opacity:new w.Uniform1f(b,A.u_opacity)}},fillExtrusionPattern:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_lightpos:new w.Uniform3f(b,A.u_lightpos),u_lightintensity:new w.Uniform1f(b,A.u_lightintensity),u_lightcolor:new w.Uniform3f(b,A.u_lightcolor),u_vertical_gradient:new w.Uniform1f(b,A.u_vertical_gradient),u_height_factor:new w.Uniform1f(b,A.u_height_factor),u_image:new w.Uniform1i(b,A.u_image),u_texsize:new w.Uniform2f(b,A.u_texsize),u_pixel_coord_upper:new w.Uniform2f(b,A.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,A.u_pixel_coord_lower),u_scale:new w.Uniform3f(b,A.u_scale),u_fade:new w.Uniform1f(b,A.u_fade),u_opacity:new w.Uniform1f(b,A.u_opacity)}},fill:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix)}},fillPattern:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_image:new w.Uniform1i(b,A.u_image),u_texsize:new w.Uniform2f(b,A.u_texsize),u_pixel_coord_upper:new w.Uniform2f(b,A.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,A.u_pixel_coord_lower),u_scale:new w.Uniform3f(b,A.u_scale),u_fade:new w.Uniform1f(b,A.u_fade)}},fillOutline:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_world:new w.Uniform2f(b,A.u_world)}},fillOutlinePattern:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_world:new w.Uniform2f(b,A.u_world),u_image:new w.Uniform1i(b,A.u_image),u_texsize:new w.Uniform2f(b,A.u_texsize),u_pixel_coord_upper:new w.Uniform2f(b,A.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,A.u_pixel_coord_lower),u_scale:new w.Uniform3f(b,A.u_scale),u_fade:new w.Uniform1f(b,A.u_fade)}},circle:function(b,A){return{u_camera_to_center_distance:new w.Uniform1f(b,A.u_camera_to_center_distance),u_scale_with_map:new w.Uniform1i(b,A.u_scale_with_map),u_pitch_with_map:new w.Uniform1i(b,A.u_pitch_with_map),u_extrude_scale:new w.Uniform2f(b,A.u_extrude_scale),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_matrix:new w.UniformMatrix4f(b,A.u_matrix)}},collisionBox:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_camera_to_center_distance:new w.Uniform1f(b,A.u_camera_to_center_distance),u_pixels_to_tile_units:new w.Uniform1f(b,A.u_pixels_to_tile_units),u_extrude_scale:new w.Uniform2f(b,A.u_extrude_scale),u_overscale_factor:new w.Uniform1f(b,A.u_overscale_factor)}},collisionCircle:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_inv_matrix:new w.UniformMatrix4f(b,A.u_inv_matrix),u_camera_to_center_distance:new w.Uniform1f(b,A.u_camera_to_center_distance),u_viewport_size:new w.Uniform2f(b,A.u_viewport_size)}},debug:function(b,A){return{u_color:new w.UniformColor(b,A.u_color),u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_overlay:new w.Uniform1i(b,A.u_overlay),u_overlay_scale:new w.Uniform1f(b,A.u_overlay_scale)}},clippingMask:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix)}},heatmap:function(b,A){return{u_extrude_scale:new w.Uniform1f(b,A.u_extrude_scale),u_intensity:new w.Uniform1f(b,A.u_intensity),u_matrix:new w.UniformMatrix4f(b,A.u_matrix)}},heatmapTexture:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_world:new w.Uniform2f(b,A.u_world),u_image:new w.Uniform1i(b,A.u_image),u_color_ramp:new w.Uniform1i(b,A.u_color_ramp),u_opacity:new w.Uniform1f(b,A.u_opacity)}},hillshade:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_image:new w.Uniform1i(b,A.u_image),u_latrange:new w.Uniform2f(b,A.u_latrange),u_light:new w.Uniform2f(b,A.u_light),u_shadow:new w.UniformColor(b,A.u_shadow),u_highlight:new w.UniformColor(b,A.u_highlight),u_accent:new w.UniformColor(b,A.u_accent)}},hillshadePrepare:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_image:new w.Uniform1i(b,A.u_image),u_dimension:new w.Uniform2f(b,A.u_dimension),u_zoom:new w.Uniform1f(b,A.u_zoom),u_unpack:new w.Uniform4f(b,A.u_unpack)}},line:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_ratio:new w.Uniform1f(b,A.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(b,A.u_units_to_pixels)}},lineGradient:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_ratio:new w.Uniform1f(b,A.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(b,A.u_units_to_pixels),u_image:new w.Uniform1i(b,A.u_image),u_image_height:new w.Uniform1f(b,A.u_image_height)}},linePattern:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_texsize:new w.Uniform2f(b,A.u_texsize),u_ratio:new w.Uniform1f(b,A.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_image:new w.Uniform1i(b,A.u_image),u_units_to_pixels:new w.Uniform2f(b,A.u_units_to_pixels),u_scale:new w.Uniform3f(b,A.u_scale),u_fade:new w.Uniform1f(b,A.u_fade)}},lineSDF:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_ratio:new w.Uniform1f(b,A.u_ratio),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_units_to_pixels:new w.Uniform2f(b,A.u_units_to_pixels),u_patternscale_a:new w.Uniform2f(b,A.u_patternscale_a),u_patternscale_b:new w.Uniform2f(b,A.u_patternscale_b),u_sdfgamma:new w.Uniform1f(b,A.u_sdfgamma),u_image:new w.Uniform1i(b,A.u_image),u_tex_y_a:new w.Uniform1f(b,A.u_tex_y_a),u_tex_y_b:new w.Uniform1f(b,A.u_tex_y_b),u_mix:new w.Uniform1f(b,A.u_mix)}},raster:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_tl_parent:new w.Uniform2f(b,A.u_tl_parent),u_scale_parent:new w.Uniform1f(b,A.u_scale_parent),u_buffer_scale:new w.Uniform1f(b,A.u_buffer_scale),u_fade_t:new w.Uniform1f(b,A.u_fade_t),u_opacity:new w.Uniform1f(b,A.u_opacity),u_image0:new w.Uniform1i(b,A.u_image0),u_image1:new w.Uniform1i(b,A.u_image1),u_brightness_low:new w.Uniform1f(b,A.u_brightness_low),u_brightness_high:new w.Uniform1f(b,A.u_brightness_high),u_saturation_factor:new w.Uniform1f(b,A.u_saturation_factor),u_contrast_factor:new w.Uniform1f(b,A.u_contrast_factor),u_spin_weights:new w.Uniform3f(b,A.u_spin_weights)}},symbolIcon:function(b,A){return{u_is_size_zoom_constant:new w.Uniform1i(b,A.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(b,A.u_is_size_feature_constant),u_size_t:new w.Uniform1f(b,A.u_size_t),u_size:new w.Uniform1f(b,A.u_size),u_camera_to_center_distance:new w.Uniform1f(b,A.u_camera_to_center_distance),u_pitch:new w.Uniform1f(b,A.u_pitch),u_rotate_symbol:new w.Uniform1i(b,A.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(b,A.u_aspect_ratio),u_fade_change:new w.Uniform1f(b,A.u_fade_change),u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(b,A.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(b,A.u_coord_matrix),u_is_text:new w.Uniform1i(b,A.u_is_text),u_pitch_with_map:new w.Uniform1i(b,A.u_pitch_with_map),u_texsize:new w.Uniform2f(b,A.u_texsize),u_texture:new w.Uniform1i(b,A.u_texture)}},symbolSDF:function(b,A){return{u_is_size_zoom_constant:new w.Uniform1i(b,A.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(b,A.u_is_size_feature_constant),u_size_t:new w.Uniform1f(b,A.u_size_t),u_size:new w.Uniform1f(b,A.u_size),u_camera_to_center_distance:new w.Uniform1f(b,A.u_camera_to_center_distance),u_pitch:new w.Uniform1f(b,A.u_pitch),u_rotate_symbol:new w.Uniform1i(b,A.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(b,A.u_aspect_ratio),u_fade_change:new w.Uniform1f(b,A.u_fade_change),u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(b,A.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(b,A.u_coord_matrix),u_is_text:new w.Uniform1i(b,A.u_is_text),u_pitch_with_map:new w.Uniform1i(b,A.u_pitch_with_map),u_texsize:new w.Uniform2f(b,A.u_texsize),u_texture:new w.Uniform1i(b,A.u_texture),u_gamma_scale:new w.Uniform1f(b,A.u_gamma_scale),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_is_halo:new w.Uniform1i(b,A.u_is_halo)}},symbolTextAndIcon:function(b,A){return{u_is_size_zoom_constant:new w.Uniform1i(b,A.u_is_size_zoom_constant),u_is_size_feature_constant:new w.Uniform1i(b,A.u_is_size_feature_constant),u_size_t:new w.Uniform1f(b,A.u_size_t),u_size:new w.Uniform1f(b,A.u_size),u_camera_to_center_distance:new w.Uniform1f(b,A.u_camera_to_center_distance),u_pitch:new w.Uniform1f(b,A.u_pitch),u_rotate_symbol:new w.Uniform1i(b,A.u_rotate_symbol),u_aspect_ratio:new w.Uniform1f(b,A.u_aspect_ratio),u_fade_change:new w.Uniform1f(b,A.u_fade_change),u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_label_plane_matrix:new w.UniformMatrix4f(b,A.u_label_plane_matrix),u_coord_matrix:new w.UniformMatrix4f(b,A.u_coord_matrix),u_is_text:new w.Uniform1i(b,A.u_is_text),u_pitch_with_map:new w.Uniform1i(b,A.u_pitch_with_map),u_texsize:new w.Uniform2f(b,A.u_texsize),u_texsize_icon:new w.Uniform2f(b,A.u_texsize_icon),u_texture:new w.Uniform1i(b,A.u_texture),u_texture_icon:new w.Uniform1i(b,A.u_texture_icon),u_gamma_scale:new w.Uniform1f(b,A.u_gamma_scale),u_device_pixel_ratio:new w.Uniform1f(b,A.u_device_pixel_ratio),u_is_halo:new w.Uniform1i(b,A.u_is_halo)}},background:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_opacity:new w.Uniform1f(b,A.u_opacity),u_color:new w.UniformColor(b,A.u_color)}},backgroundPattern:function(b,A){return{u_matrix:new w.UniformMatrix4f(b,A.u_matrix),u_opacity:new w.Uniform1f(b,A.u_opacity),u_image:new w.Uniform1i(b,A.u_image),u_pattern_tl_a:new w.Uniform2f(b,A.u_pattern_tl_a),u_pattern_br_a:new w.Uniform2f(b,A.u_pattern_br_a),u_pattern_tl_b:new w.Uniform2f(b,A.u_pattern_tl_b),u_pattern_br_b:new w.Uniform2f(b,A.u_pattern_br_b),u_texsize:new w.Uniform2f(b,A.u_texsize),u_mix:new w.Uniform1f(b,A.u_mix),u_pattern_size_a:new w.Uniform2f(b,A.u_pattern_size_a),u_pattern_size_b:new w.Uniform2f(b,A.u_pattern_size_b),u_scale_a:new w.Uniform1f(b,A.u_scale_a),u_scale_b:new w.Uniform1f(b,A.u_scale_b),u_pixel_coord_upper:new w.Uniform2f(b,A.u_pixel_coord_upper),u_pixel_coord_lower:new w.Uniform2f(b,A.u_pixel_coord_lower),u_tile_units_to_pixels:new w.Uniform1f(b,A.u_tile_units_to_pixels)}}};function ic(b,A,C,I,Z,ee,ae){for(var Ae=b.context,at=Ae.gl,bt=b.useProgram("collisionBox"),Vt=[],Wt=0,$t=0,dr=0;dr<I.length;dr++){var hr=I[dr],Rr=A.getTile(hr),lr=Rr.getBucket(C);if(lr){var Ir=hr.posMatrix;Z[0]===0&&Z[1]===0||(Ir=b.translatePosMatrix(hr.posMatrix,Rr,Z,ee));var Hr=ae?lr.textCollisionBox:lr.iconCollisionBox,en=lr.collisionCircleArray;if(en.length>0){var _n=w.create(),pn=Ir;w.mul(_n,lr.placementInvProjMatrix,b.transform.glCoordMatrix),w.mul(_n,_n,lr.placementViewportMatrix),Vt.push({circleArray:en,circleOffset:$t,transform:pn,invTransform:_n}),$t=Wt+=en.length/4}Hr&&bt.draw(Ae,at.LINES,et.disabled,St.disabled,b.colorModeForRenderPass(),gr.disabled,gi(Ir,b.transform,Rr),C.id,Hr.layoutVertexBuffer,Hr.indexBuffer,Hr.segments,null,b.transform.zoom,null,null,Hr.collisionVertexBuffer)}}if(ae&&Vt.length){var An=b.useProgram("collisionCircle"),Ln=new w.StructArrayLayout2f1f2i16;Ln.resize(4*Wt),Ln._trim();for(var pi=0,oi=0,Pi=Vt;oi<Pi.length;oi+=1)for(var ta=Pi[oi],sa=0;sa<ta.circleArray.length/4;sa++){var Ki=4*sa,_o=ta.circleArray[Ki+0],Bi=ta.circleArray[Ki+1],Ia=ta.circleArray[Ki+2],La=ta.circleArray[Ki+3];Ln.emplace(pi++,_o,Bi,Ia,La,0),Ln.emplace(pi++,_o,Bi,Ia,La,1),Ln.emplace(pi++,_o,Bi,Ia,La,2),Ln.emplace(pi++,_o,Bi,Ia,La,3)}(!Ca||Ca.length<2*Wt)&&(Ca=function(Ls){var $u=2*Ls,Mu=new w.StructArrayLayout3ui6;Mu.resize($u),Mu._trim();for(var es=0;es<$u;es++){var ys=6*es;Mu.uint16[ys+0]=4*es+0,Mu.uint16[ys+1]=4*es+1,Mu.uint16[ys+2]=4*es+2,Mu.uint16[ys+3]=4*es+2,Mu.uint16[ys+4]=4*es+3,Mu.uint16[ys+5]=4*es+0}return Mu}(Wt));for(var Aa=Ae.createIndexBuffer(Ca,!0),fa=Ae.createVertexBuffer(Ln,w.collisionCircleLayout.members,!0),Ma=0,Ea=Vt;Ma<Ea.length;Ma+=1){var ha=Ea[Ma],Au=oa(ha.transform,ha.invTransform,b.transform);An.draw(Ae,at.TRIANGLES,et.disabled,St.disabled,b.colorModeForRenderPass(),gr.disabled,Au,C.id,fa,Aa,w.SegmentVector.simpleSegment(0,2*ha.circleOffset,ha.circleArray.length,ha.circleArray.length/2),null,b.transform.zoom,null,null,null)}fa.destroy(),Aa.destroy()}}var el=w.identity(new Float32Array(16));function _p(b,A,C,I,Z,ee){var ae=w.getAnchorAlignment(b),Ae=-(ae.horizontalAlign-.5)*A,at=-(ae.verticalAlign-.5)*C,bt=w.evaluateVariableOffset(b,I);return new w.Point((Ae/Z+bt[0])*ee,(at/Z+bt[1])*ee)}function Ud(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt){var Wt=b.text.placedSymbolArray,$t=b.text.dynamicLayoutVertexArray,dr=b.icon.dynamicLayoutVertexArray,hr={};$t.clear();for(var Rr=0;Rr<Wt.length;Rr++){var lr=Wt.get(Rr),Ir=lr.hidden||!lr.crossTileID||b.allowVerticalPlacement&&!lr.placedOrientation?null:I[lr.crossTileID];if(Ir){var Hr=new w.Point(lr.anchorX,lr.anchorY),en=_i(Hr,C?Ae:ae),_n=ea(ee.cameraToCenterDistance,en.signedDistanceFromCamera),pn=Z.evaluateSizeForFeature(b.textSizeData,bt,lr)*_n/w.ONE_EM;C&&(pn*=b.tilePixelRatio/at);for(var An=_p(Ir.anchor,Ir.width,Ir.height,Ir.textOffset,Ir.textBoxScale,pn),Ln=C?_i(Hr.add(An),ae).point:en.point.add(A?An.rotate(-ee.angle):An),pi=b.allowVerticalPlacement&&lr.placedOrientation===w.WritingMode.vertical?Math.PI/2:0,oi=0;oi<lr.numGlyphs;oi++)w.addDynamicAttributes($t,Ln,pi);Vt&&lr.associatedIconIndex>=0&&(hr[lr.associatedIconIndex]={shiftedAnchor:Ln,angle:pi})}else tn(lr.numGlyphs,$t)}if(Vt){dr.clear();for(var Pi=b.icon.placedSymbolArray,ta=0;ta<Pi.length;ta++){var sa=Pi.get(ta);if(sa.hidden)tn(sa.numGlyphs,dr);else{var Ki=hr[ta];if(Ki)for(var _o=0;_o<sa.numGlyphs;_o++)w.addDynamicAttributes(dr,Ki.shiftedAnchor,Ki.angle);else tn(sa.numGlyphs,dr)}}b.icon.dynamicLayoutVertexBuffer.updateData(dr)}b.text.dynamicLayoutVertexBuffer.updateData($t)}function rd(b,A,C){return C.iconsInText&&A?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Gc(b,A,C,I,Z,ee,ae,Ae,at,bt,Vt,Wt){for(var $t=b.context,dr=$t.gl,hr=b.transform,Rr=Ae==="map",lr=at==="map",Ir=Rr&&C.layout.get("symbol-placement")!=="point",Hr=Rr&&!lr&&!Ir,en=C.layout.get("symbol-sort-key").constantOr(1)!==void 0,_n=!1,pn=b.depthModeForSublayer(0,et.ReadOnly),An=C.layout.get("text-variable-anchor"),Ln=[],pi=0,oi=I;pi<oi.length;pi+=1){var Pi=oi[pi],ta=A.getTile(Pi),sa=ta.getBucket(C);if(sa){var Ki=Z?sa.text:sa.icon;if(Ki&&Ki.segments.get().length){var _o=Ki.programConfigurations.get(C.id),Bi=Z||sa.sdfIcons,Ia=Z?sa.textSizeData:sa.iconSizeData,La=lr||hr.pitch!==0,Aa=b.useProgram(rd(Bi,Z,sa),_o),fa=w.evaluateSizeForZoom(Ia,hr.zoom),Ma=void 0,Ea=[0,0],ha=void 0,Au=void 0,Ls=null,$u=void 0;if(Z)ha=ta.glyphAtlasTexture,Au=dr.LINEAR,Ma=ta.glyphAtlasTexture.size,sa.iconsInText&&(Ea=ta.imageAtlasTexture.size,Ls=ta.imageAtlasTexture,$u=La||b.options.rotating||b.options.zooming||Ia.kind==="composite"||Ia.kind==="camera"?dr.LINEAR:dr.NEAREST);else{var Mu=C.layout.get("icon-size").constantOr(0)!==1||sa.iconsNeedLinear;ha=ta.imageAtlasTexture,Au=Bi||b.options.rotating||b.options.zooming||Mu||La?dr.LINEAR:dr.NEAREST,Ma=ta.imageAtlasTexture.size}var es=Cn(ta,1,b.transform.zoom),ys=Oo(Pi.posMatrix,lr,Rr,b.transform,es),Ru=ai(Pi.posMatrix,lr,Rr,b.transform,es),gu=An&&sa.hasTextData(),Qc=C.layout.get("icon-text-fit")!=="none"&&gu&&sa.hasIconData();Ir&&ms(sa,Pi.posMatrix,b,Z,ys,Ru,lr,bt);var nl=b.translatePosMatrix(Pi.posMatrix,ta,ee,ae),lc=Ir||Z&&An||Qc?el:ys,hl=b.translatePosMatrix(Ru,ta,ee,ae,!0),Nf=Bi&&C.paint.get(Z?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vf={program:Aa,buffers:Ki,uniformValues:Bi?sa.iconsInText?sh(Ia.kind,fa,Hr,lr,b,nl,lc,hl,Ma,Ea):oh(Ia.kind,fa,Hr,lr,b,nl,lc,hl,Z,Ma,!0):pf(Ia.kind,fa,Hr,lr,b,nl,lc,hl,Z,Ma),atlasTexture:ha,atlasTextureIcon:Ls,atlasInterpolation:Au,atlasInterpolationIcon:$u,isSDF:Bi,hasHalo:Nf};if(en&&sa.canOverlap){_n=!0;for(var Jc=0,gf=Ki.segments.get();Jc<gf.length;Jc+=1){var cc=gf[Jc];Ln.push({segments:new w.SegmentVector([cc]),sortKey:cc.sortKey,state:vf})}}else Ln.push({segments:Ki.segments,sortKey:0,state:vf})}}}_n&&Ln.sort(function(Tl,ql){return Tl.sortKey-ql.sortKey});for(var fc=0,mf=Ln;fc<mf.length;fc+=1){var Lu=mf[fc],Ts=Lu.state;if($t.activeTexture.set(dr.TEXTURE0),Ts.atlasTexture.bind(Ts.atlasInterpolation,dr.CLAMP_TO_EDGE),Ts.atlasTextureIcon&&($t.activeTexture.set(dr.TEXTURE1),Ts.atlasTextureIcon&&Ts.atlasTextureIcon.bind(Ts.atlasInterpolationIcon,dr.CLAMP_TO_EDGE)),Ts.isSDF){var ou=Ts.uniformValues;Ts.hasHalo&&(ou.u_is_halo=1,df(Ts.buffers,Lu.segments,C,b,Ts.program,pn,Vt,Wt,ou)),ou.u_is_halo=0}df(Ts.buffers,Lu.segments,C,b,Ts.program,pn,Vt,Wt,Ts.uniformValues)}}function df(b,A,C,I,Z,ee,ae,Ae,at){var bt=I.context;Z.draw(bt,bt.gl.TRIANGLES,ee,ae,Ae,gr.disabled,at,C.id,b.layoutVertexBuffer,b.indexBuffer,A,C.paint,I.transform.zoom,b.programConfigurations.get(C.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function lh(b,A,C,I,Z,ee,ae){var Ae,at,bt,Vt,Wt,$t=b.context.gl,dr=C.paint.get("fill-pattern"),hr=dr&&dr.constantOr(1),Rr=C.getCrossfadeParameters();ae?(at=hr&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=$t.LINES):(at=hr?"fillPattern":"fill",Ae=$t.TRIANGLES);for(var lr=0,Ir=I;lr<Ir.length;lr+=1){var Hr=Ir[lr],en=A.getTile(Hr);if(!hr||en.patternsLoaded()){var _n=en.getBucket(C);if(_n){var pn=_n.programConfigurations.get(C.id),An=b.useProgram(at,pn);hr&&(b.context.activeTexture.set($t.TEXTURE0),en.imageAtlasTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE),pn.updatePaintBuffers(Rr));var Ln=dr.constantOr(null);if(Ln&&en.imageAtlas){var pi=en.imageAtlas,oi=pi.patternPositions[Ln.to.toString()],Pi=pi.patternPositions[Ln.from.toString()];oi&&Pi&&pn.setConstantPatternPositions(oi,Pi)}var ta=b.translatePosMatrix(Hr.posMatrix,en,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor"));if(ae){Vt=_n.indexBuffer2,Wt=_n.segments2;var sa=[$t.drawingBufferWidth,$t.drawingBufferHeight];bt=at==="fillOutlinePattern"&&hr?Qr(ta,b,Rr,en,sa):Vr(ta,sa)}else Vt=_n.indexBuffer,Wt=_n.segments,bt=hr?mr(ta,b,Rr,en):Mt(ta);An.draw(b.context,Ae,Z,b.stencilModeForClipping(Hr),ee,gr.disabled,bt,C.id,_n.layoutVertexBuffer,Vt,Wt,C.paint,b.transform.zoom,pn)}}}}function xp(b,A,C,I,Z,ee,ae){for(var Ae=b.context,at=Ae.gl,bt=C.paint.get("fill-extrusion-pattern"),Vt=bt.constantOr(1),Wt=C.getCrossfadeParameters(),$t=C.paint.get("fill-extrusion-opacity"),dr=0,hr=I;dr<hr.length;dr+=1){var Rr=hr[dr],lr=A.getTile(Rr),Ir=lr.getBucket(C);if(Ir){var Hr=Ir.programConfigurations.get(C.id),en=b.useProgram(Vt?"fillExtrusionPattern":"fillExtrusion",Hr);Vt&&(b.context.activeTexture.set(at.TEXTURE0),lr.imageAtlasTexture.bind(at.LINEAR,at.CLAMP_TO_EDGE),Hr.updatePaintBuffers(Wt));var _n=bt.constantOr(null);if(_n&&lr.imageAtlas){var pn=lr.imageAtlas,An=pn.patternPositions[_n.to.toString()],Ln=pn.patternPositions[_n.from.toString()];An&&Ln&&Hr.setConstantPatternPositions(An,Ln)}var pi=b.translatePosMatrix(Rr.posMatrix,lr,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),oi=C.paint.get("fill-extrusion-vertical-gradient"),Pi=Vt?Du(pi,b,oi,$t,Rr,Wt,lr):gp(pi,b,oi,$t);en.draw(Ae,Ae.gl.TRIANGLES,Z,ee,ae,gr.backCCW,Pi,C.id,Ir.layoutVertexBuffer,Ir.indexBuffer,Ir.segments,C.paint,b.transform.zoom,Hr)}}}function Pf(b,A,C,I,Z,ee){var ae=b.context,Ae=ae.gl,at=A.fbo;if(at){var bt=b.useProgram("hillshade");ae.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,at.colorAttachment.get());var Vt=function(Wt,$t,dr){var hr=dr.paint.get("hillshade-shadow-color"),Rr=dr.paint.get("hillshade-highlight-color"),lr=dr.paint.get("hillshade-accent-color"),Ir=dr.paint.get("hillshade-illumination-direction")*(Math.PI/180);dr.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ir-=Wt.transform.angle);var Hr,en,_n,pn=!Wt.options.moving;return{u_matrix:Wt.transform.calculatePosMatrix($t.tileID.toUnwrapped(),pn),u_image:0,u_latrange:(Hr=$t.tileID,en=Math.pow(2,Hr.canonical.z),_n=Hr.canonical.y,[new w.MercatorCoordinate(0,_n/en).toLngLat().lat,new w.MercatorCoordinate(0,(_n+1)/en).toLngLat().lat]),u_light:[dr.paint.get("hillshade-exaggeration"),Ir],u_shadow:hr,u_highlight:Rr,u_accent:lr}}(b,A,C);bt.draw(ae,Ae.TRIANGLES,I,Z,ee,gr.disabled,Vt,C.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}}function cm(b,A,C,I,Z,ee){var ae=b.context,Ae=ae.gl,at=A.dem;if(at&&at.data){var bt=at.dim,Vt=at.stride,Wt=at.getPixels();if(ae.activeTexture.set(Ae.TEXTURE1),ae.pixelStoreUnpackPremultiplyAlpha.set(!1),A.demTexture=A.demTexture||b.getTileTexture(Vt),A.demTexture){var $t=A.demTexture;$t.update(Wt,{premultiply:!1}),$t.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE)}else A.demTexture=new w.Texture(ae,Wt,Ae.RGBA,{premultiply:!1}),A.demTexture.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE);ae.activeTexture.set(Ae.TEXTURE0);var dr=A.fbo;if(!dr){var hr=new w.Texture(ae,{width:bt,height:bt,data:null},Ae.RGBA);hr.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),(dr=A.fbo=ae.createFramebuffer(bt,bt,!0)).colorAttachment.set(hr.texture)}ae.bindFramebuffer.set(dr.framebuffer),ae.viewport.set([0,0,bt,bt]),b.useProgram("hillshadePrepare").draw(ae,Ae.TRIANGLES,I,Z,ee,gr.disabled,function(Rr,lr){var Ir=lr.stride,Hr=w.create();return w.ortho(Hr,0,w.EXTENT,-w.EXTENT,0,0,1),w.translate(Hr,Hr,[0,-w.EXTENT,0]),{u_matrix:Hr,u_image:1,u_dimension:[Ir,Ir],u_zoom:Rr.overscaledZ,u_unpack:lr.getUnpackVector()}}(A.tileID,at),C.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),A.needsHillshadePrepare=!1}}function nd(b,A,C,I,Z){var ee=I.paint.get("raster-fade-duration");if(ee>0){var ae=w.browser.now(),Ae=(ae-b.timeAdded)/ee,at=A?(ae-A.timeAdded)/ee:-1,bt=C.getSource(),Vt=Z.coveringZoomLevel({tileSize:bt.tileSize,roundZoom:bt.roundZoom}),Wt=!A||Math.abs(A.tileID.overscaledZ-Vt)>Math.abs(b.tileID.overscaledZ-Vt),$t=Wt&&b.refreshedUponExpiration?1:w.clamp(Wt?Ae:1-at,0,1);return b.refreshedUponExpiration&&Ae>=1&&(b.refreshedUponExpiration=!1),A?{opacity:1,mix:1-$t}:{opacity:$t,mix:0}}return{opacity:1,mix:0}}var Os=new w.Color(1,0,0,1),bp=new w.Color(0,1,0,1),Zh=new w.Color(0,0,1,1),Zd=new w.Color(1,0,1,1),Sp=new w.Color(0,1,1,1);function Ep(b,A,C,I){$c(b,0,A+C/2,b.transform.width,C,I)}function Ov(b,A,C,I){$c(b,A-C/2,0,C,b.transform.height,I)}function $c(b,A,C,I,Z,ee){var ae=b.context,Ae=ae.gl;Ae.enable(Ae.SCISSOR_TEST),Ae.scissor(A*w.browser.devicePixelRatio,C*w.browser.devicePixelRatio,I*w.browser.devicePixelRatio,Z*w.browser.devicePixelRatio),ae.clear({color:ee}),Ae.disable(Ae.SCISSOR_TEST)}function Vd(b,A,C){var I=b.context,Z=I.gl,ee=C.posMatrix,ae=b.useProgram("debug"),Ae=et.disabled,at=St.disabled,bt=b.colorModeForRenderPass();I.activeTexture.set(Z.TEXTURE0),b.emptyTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),ae.draw(I,Z.LINE_STRIP,Ae,at,bt,gr.disabled,po(ee,w.Color.red),"$debug",b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments);var Vt=A.getTileByID(C.key).latestRawTileData,Wt=Math.floor((Vt&&Vt.byteLength||0)/1024),$t=A.getTile(C).tileSize,dr=512/Math.min($t,512)*(C.overscaledZ/b.transform.zoom)*.5,hr=C.canonical.toString();C.overscaledZ!==C.canonical.z&&(hr+=" => "+C.overscaledZ),function(Rr,lr){Rr.initDebugOverlayCanvas();var Ir=Rr.debugOverlayCanvas,Hr=Rr.context.gl,en=Rr.debugOverlayCanvas.getContext("2d");en.clearRect(0,0,Ir.width,Ir.height),en.shadowColor="white",en.shadowBlur=2,en.lineWidth=1.5,en.strokeStyle="white",en.textBaseline="top",en.font="bold 36px Open Sans, sans-serif",en.fillText(lr,5,5),en.strokeText(lr,5,5),Rr.debugOverlayTexture.update(Ir),Rr.debugOverlayTexture.bind(Hr.LINEAR,Hr.CLAMP_TO_EDGE)}(b,hr+" "+Wt+"kb"),ae.draw(I,Z.TRIANGLES,Ae,at,Gt.alphaBlended,gr.disabled,po(ee,w.Color.transparent,dr),"$debug",b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments)}var ch={symbol:function(b,A,C,I,Z){if(b.renderPass==="translucent"){var ee=St.disabled,ae=b.colorModeForRenderPass();C.layout.get("text-variable-anchor")&&function(Ae,at,bt,Vt,Wt,$t,dr){for(var hr=at.transform,Rr=Wt==="map",lr=$t==="map",Ir=0,Hr=Ae;Ir<Hr.length;Ir+=1){var en=Hr[Ir],_n=Vt.getTile(en),pn=_n.getBucket(bt);if(pn&&pn.text&&pn.text.segments.get().length){var An=w.evaluateSizeForZoom(pn.textSizeData,hr.zoom),Ln=Cn(_n,1,at.transform.zoom),pi=Oo(en.posMatrix,lr,Rr,at.transform,Ln),oi=bt.layout.get("icon-text-fit")!=="none"&&pn.hasIconData();if(An){var Pi=Math.pow(2,hr.zoom-_n.tileID.overscaledZ);Ud(pn,Rr,lr,dr,w.symbolSize,hr,pi,en.posMatrix,Pi,An,oi)}}}}(I,b,C,A,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),Z),C.paint.get("icon-opacity").constantOr(1)!==0&&Gc(b,A,C,I,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),ee,ae),C.paint.get("text-opacity").constantOr(1)!==0&&Gc(b,A,C,I,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),ee,ae),A.map.showCollisionBoxes&&(ic(b,A,C,I,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),ic(b,A,C,I,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))}},circle:function(b,A,C,I){if(b.renderPass==="translucent"){var Z=C.paint.get("circle-opacity"),ee=C.paint.get("circle-stroke-width"),ae=C.paint.get("circle-stroke-opacity"),Ae=C.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Z.constantOr(1)!==0||ee.constantOr(1)!==0&&ae.constantOr(1)!==0){for(var at=b.context,bt=at.gl,Vt=b.depthModeForSublayer(0,et.ReadOnly),Wt=St.disabled,$t=b.colorModeForRenderPass(),dr=[],hr=0;hr<I.length;hr++){var Rr=I[hr],lr=A.getTile(Rr),Ir=lr.getBucket(C);if(Ir){var Hr=Ir.programConfigurations.get(C.id),en={programConfiguration:Hr,program:b.useProgram("circle",Hr),layoutVertexBuffer:Ir.layoutVertexBuffer,indexBuffer:Ir.indexBuffer,uniformValues:On(b,Rr,lr,C)};if(Ae)for(var _n=0,pn=Ir.segments.get();_n<pn.length;_n+=1){var An=pn[_n];dr.push({segments:new w.SegmentVector([An]),sortKey:An.sortKey,state:en})}else dr.push({segments:Ir.segments,sortKey:0,state:en})}}Ae&&dr.sort(function(ta,sa){return ta.sortKey-sa.sortKey});for(var Ln=0,pi=dr;Ln<pi.length;Ln+=1){var oi=pi[Ln],Pi=oi.state;Pi.program.draw(at,bt.TRIANGLES,Vt,Wt,$t,gr.disabled,Pi.uniformValues,C.id,Pi.layoutVertexBuffer,Pi.indexBuffer,oi.segments,C.paint,b.transform.zoom,Pi.programConfiguration)}}}},heatmap:function(b,A,C,I){if(C.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){var Z=b.context,ee=Z.gl,ae=St.disabled,Ae=new Gt([ee.ONE,ee.ONE],w.Color.transparent,[!0,!0,!0,!0]);(function(dr,hr,Rr){var lr=dr.gl;dr.activeTexture.set(lr.TEXTURE1),dr.viewport.set([0,0,hr.width/4,hr.height/4]);var Ir=Rr.heatmapFbo;if(Ir)lr.bindTexture(lr.TEXTURE_2D,Ir.colorAttachment.get()),dr.bindFramebuffer.set(Ir.framebuffer);else{var Hr=lr.createTexture();lr.bindTexture(lr.TEXTURE_2D,Hr),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_WRAP_S,lr.CLAMP_TO_EDGE),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_WRAP_T,lr.CLAMP_TO_EDGE),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_MIN_FILTER,lr.LINEAR),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_MAG_FILTER,lr.LINEAR),Ir=Rr.heatmapFbo=dr.createFramebuffer(hr.width/4,hr.height/4,!1),function(en,_n,pn,An){var Ln=en.gl;Ln.texImage2D(Ln.TEXTURE_2D,0,Ln.RGBA,_n.width/4,_n.height/4,0,Ln.RGBA,en.extRenderToTextureHalfFloat?en.extTextureHalfFloat.HALF_FLOAT_OES:Ln.UNSIGNED_BYTE,null),An.colorAttachment.set(pn)}(dr,hr,Hr,Ir)}})(Z,b,C),Z.clear({color:w.Color.transparent});for(var at=0;at<I.length;at++){var bt=I[at];if(!A.hasRenderableParent(bt)){var Vt=A.getTile(bt),Wt=Vt.getBucket(C);if(Wt){var $t=Wt.programConfigurations.get(C.id);b.useProgram("heatmap",$t).draw(Z,ee.TRIANGLES,et.disabled,ae,Ae,gr.disabled,ll(bt.posMatrix,Vt,b.transform.zoom,C.paint.get("heatmap-intensity")),C.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,C.paint,b.transform.zoom,$t)}}}Z.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(dr,hr){var Rr=dr.context,lr=Rr.gl,Ir=hr.heatmapFbo;if(Ir){Rr.activeTexture.set(lr.TEXTURE0),lr.bindTexture(lr.TEXTURE_2D,Ir.colorAttachment.get()),Rr.activeTexture.set(lr.TEXTURE1);var Hr=hr.colorRampTexture;Hr||(Hr=hr.colorRampTexture=new w.Texture(Rr,hr.colorRamp,lr.RGBA)),Hr.bind(lr.LINEAR,lr.CLAMP_TO_EDGE),dr.useProgram("heatmapTexture").draw(Rr,lr.TRIANGLES,et.disabled,St.disabled,dr.colorModeForRenderPass(),gr.disabled,function(en,_n,pn,An){var Ln=w.create();w.ortho(Ln,0,en.width,en.height,0,0,1);var pi=en.context.gl;return{u_matrix:Ln,u_world:[pi.drawingBufferWidth,pi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:_n.paint.get("heatmap-opacity")}}(dr,hr),hr.id,dr.viewportBuffer,dr.quadTriangleIndexBuffer,dr.viewportSegments,hr.paint,dr.transform.zoom)}}(b,C))},line:function(b,A,C,I){if(b.renderPass==="translucent"){var Z=C.paint.get("line-opacity"),ee=C.paint.get("line-width");if(Z.constantOr(1)!==0&&ee.constantOr(1)!==0)for(var ae=b.depthModeForSublayer(0,et.ReadOnly),Ae=b.colorModeForRenderPass(),at=C.paint.get("line-dasharray"),bt=C.paint.get("line-pattern"),Vt=bt.constantOr(1),Wt=C.paint.get("line-gradient"),$t=C.getCrossfadeParameters(),dr=Vt?"linePattern":at?"lineSDF":Wt?"lineGradient":"line",hr=b.context,Rr=hr.gl,lr=!0,Ir=0,Hr=I;Ir<Hr.length;Ir+=1){var en=Hr[Ir],_n=A.getTile(en);if(!Vt||_n.patternsLoaded()){var pn=_n.getBucket(C);if(pn){var An=pn.programConfigurations.get(C.id),Ln=b.context.program.get(),pi=b.useProgram(dr,An),oi=lr||pi.program!==Ln,Pi=bt.constantOr(null);if(Pi&&_n.imageAtlas){var ta=_n.imageAtlas,sa=ta.patternPositions[Pi.to.toString()],Ki=ta.patternPositions[Pi.from.toString()];sa&&Ki&&An.setConstantPatternPositions(sa,Ki)}var _o=Vt?mp(b,_n,C,$t):at?zd(b,_n,C,at,$t):Wt?Fo(b,_n,C,pn.lineClipsArray.length):Ju(b,_n,C);if(Vt)hr.activeTexture.set(Rr.TEXTURE0),_n.imageAtlasTexture.bind(Rr.LINEAR,Rr.CLAMP_TO_EDGE),An.updatePaintBuffers($t);else if(at&&(oi||b.lineAtlas.dirty))hr.activeTexture.set(Rr.TEXTURE0),b.lineAtlas.bind(hr);else if(Wt){var Bi=pn.gradients[C.id],Ia=Bi.texture;if(C.gradientVersion!==Bi.version){var La=256;if(C.stepInterpolant){var Aa=A.getSource().maxzoom,fa=en.canonical.z===Aa?Math.ceil(1<<b.transform.maxZoom-en.canonical.z):1;La=w.clamp(w.nextPowerOfTwo(pn.maxLineLength/w.EXTENT*1024*fa),256,hr.maxTextureSize)}Bi.gradient=w.renderColorRamp({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:La,image:Bi.gradient||void 0,clips:pn.lineClipsArray}),Bi.texture?Bi.texture.update(Bi.gradient):Bi.texture=new w.Texture(hr,Bi.gradient,Rr.RGBA),Bi.version=C.gradientVersion,Ia=Bi.texture}hr.activeTexture.set(Rr.TEXTURE0),Ia.bind(C.stepInterpolant?Rr.NEAREST:Rr.LINEAR,Rr.CLAMP_TO_EDGE)}pi.draw(hr,Rr.TRIANGLES,ae,b.stencilModeForClipping(en),Ae,gr.disabled,_o,C.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,C.paint,b.transform.zoom,An,pn.layoutVertexBuffer2),lr=!1}}}}},fill:function(b,A,C,I){var Z=C.paint.get("fill-color"),ee=C.paint.get("fill-opacity");if(ee.constantOr(1)!==0){var ae=b.colorModeForRenderPass(),Ae=C.paint.get("fill-pattern"),at=b.opaquePassEnabledForLayer()&&!Ae.constantOr(1)&&Z.constantOr(w.Color.transparent).a===1&&ee.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===at){var bt=b.depthModeForSublayer(1,b.renderPass==="opaque"?et.ReadWrite:et.ReadOnly);lh(b,A,C,I,bt,ae,!1)}if(b.renderPass==="translucent"&&C.paint.get("fill-antialias")){var Vt=b.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,et.ReadOnly);lh(b,A,C,I,Vt,ae,!0)}}},"fill-extrusion":function(b,A,C,I){var Z=C.paint.get("fill-extrusion-opacity");if(Z!==0&&b.renderPass==="translucent"){var ee=new et(b.context.gl.LEQUAL,et.ReadWrite,b.depthRangeFor3D);if(Z!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))xp(b,A,C,I,ee,St.disabled,Gt.disabled),xp(b,A,C,I,ee,b.stencilModeFor3D(),b.colorModeForRenderPass());else{var ae=b.colorModeForRenderPass();xp(b,A,C,I,ee,St.disabled,ae)}}},hillshade:function(b,A,C,I){if(b.renderPass==="offscreen"||b.renderPass==="translucent"){for(var Z=b.context,ee=b.depthModeForSublayer(0,et.ReadOnly),ae=b.colorModeForRenderPass(),Ae=b.renderPass==="translucent"?b.stencilConfigForOverlap(I):[{},I],at=Ae[0],bt=0,Vt=Ae[1];bt<Vt.length;bt+=1){var Wt=Vt[bt],$t=A.getTile(Wt);$t.needsHillshadePrepare&&b.renderPass==="offscreen"?cm(b,$t,C,ee,St.disabled,ae):b.renderPass==="translucent"&&Pf(b,$t,C,ee,at[Wt.overscaledZ],ae)}Z.viewport.set([0,0,b.width,b.height])}},raster:function(b,A,C,I){if(b.renderPass==="translucent"&&C.paint.get("raster-opacity")!==0&&I.length)for(var Z=b.context,ee=Z.gl,ae=A.getSource(),Ae=b.useProgram("raster"),at=b.colorModeForRenderPass(),bt=ae instanceof st?[{},I]:b.stencilConfigForOverlap(I),Vt=bt[0],Wt=bt[1],$t=Wt[Wt.length-1].overscaledZ,dr=!b.options.moving,hr=0,Rr=Wt;hr<Rr.length;hr+=1){var lr=Rr[hr],Ir=b.depthModeForSublayer(lr.overscaledZ-$t,C.paint.get("raster-opacity")===1?et.ReadWrite:et.ReadOnly,ee.LESS),Hr=A.getTile(lr),en=b.transform.calculatePosMatrix(lr.toUnwrapped(),dr);Hr.registerFadeDuration(C.paint.get("raster-fade-duration"));var _n=A.findLoadedParent(lr,0),pn=nd(Hr,_n,A,C,b.transform),An=void 0,Ln=void 0,pi=C.paint.get("raster-resampling")==="nearest"?ee.NEAREST:ee.LINEAR;Z.activeTexture.set(ee.TEXTURE0),Hr.texture.bind(pi,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set(ee.TEXTURE1),_n?(_n.texture.bind(pi,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),An=Math.pow(2,_n.tileID.overscaledZ-Hr.tileID.overscaledZ),Ln=[Hr.tileID.canonical.x*An%1,Hr.tileID.canonical.y*An%1]):Hr.texture.bind(pi,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST);var oi=hf(en,Ln||[0,0],An||1,pn,C);ae instanceof st?Ae.draw(Z,ee.TRIANGLES,Ir,St.disabled,at,gr.disabled,oi,C.id,ae.boundsBuffer,b.quadTriangleIndexBuffer,ae.boundsSegments):Ae.draw(Z,ee.TRIANGLES,Ir,Vt[lr.overscaledZ],at,gr.disabled,oi,C.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}},background:function(b,A,C){var I=C.paint.get("background-color"),Z=C.paint.get("background-opacity");if(Z!==0){var ee=b.context,ae=ee.gl,Ae=b.transform,at=Ae.tileSize,bt=C.paint.get("background-pattern");if(!b.isPatternMissing(bt)){var Vt=!bt&&I.a===1&&Z===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass===Vt){var Wt=St.disabled,$t=b.depthModeForSublayer(0,Vt==="opaque"?et.ReadWrite:et.ReadOnly),dr=b.colorModeForRenderPass(),hr=b.useProgram(bt?"backgroundPattern":"background"),Rr=Ae.coveringTiles({tileSize:at});bt&&(ee.activeTexture.set(ae.TEXTURE0),b.imageManager.bind(b.context));for(var lr=C.getCrossfadeParameters(),Ir=0,Hr=Rr;Ir<Hr.length;Ir+=1){var en=Hr[Ir],_n=b.transform.calculatePosMatrix(en.toUnwrapped()),pn=bt?uh(_n,Z,b,bt,{tileID:en,tileSize:at},lr):If(_n,Z,I);hr.draw(ee,ae.TRIANGLES,$t,Wt,dr,gr.disabled,pn,C.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}}}},debug:function(b,A,C){for(var I=0;I<C.length;I++)Vd(b,A,C[I])},custom:function(b,A,C){var I=b.context,Z=C.implementation;if(b.renderPass==="offscreen"){var ee=Z.prerender;ee&&(b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),ee.call(Z,I.gl,b.transform.customLayerMatrix()),I.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),I.setStencilMode(St.disabled);var ae=Z.renderingMode==="3d"?new et(b.context.gl.LEQUAL,et.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,et.ReadOnly);I.setDepthMode(ae),Z.render(I.gl,b.transform.customLayerMatrix()),I.setDirty(),b.setBaseState(),I.bindFramebuffer.set(null)}}},us=function(b,A){this.context=new At(b),this.transform=A,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ru,this.gpuTimers={}};us.prototype.resize=function(b,A){if(this.width=b*w.browser.devicePixelRatio,this.height=A*w.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var C=0,I=this.style._order;C<I.length;C+=1)this.style._layers[I[C]].resize()},us.prototype.setup=function(){var b=this.context,A=new w.StructArrayLayout2i4;A.emplaceBack(0,0),A.emplaceBack(w.EXTENT,0),A.emplaceBack(0,w.EXTENT),A.emplaceBack(w.EXTENT,w.EXTENT),this.tileExtentBuffer=b.createVertexBuffer(A,Ss.members),this.tileExtentSegments=w.SegmentVector.simpleSegment(0,0,4,2);var C=new w.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(w.EXTENT,0),C.emplaceBack(0,w.EXTENT),C.emplaceBack(w.EXTENT,w.EXTENT),this.debugBuffer=b.createVertexBuffer(C,Ss.members),this.debugSegments=w.SegmentVector.simpleSegment(0,0,4,5);var I=new w.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(w.EXTENT,0,w.EXTENT,0),I.emplaceBack(0,w.EXTENT,0,w.EXTENT),I.emplaceBack(w.EXTENT,w.EXTENT,w.EXTENT,w.EXTENT),this.rasterBoundsBuffer=b.createVertexBuffer(I,Fe.members),this.rasterBoundsSegments=w.SegmentVector.simpleSegment(0,0,4,2);var Z=new w.StructArrayLayout2i4;Z.emplaceBack(0,0),Z.emplaceBack(1,0),Z.emplaceBack(0,1),Z.emplaceBack(1,1),this.viewportBuffer=b.createVertexBuffer(Z,Ss.members),this.viewportSegments=w.SegmentVector.simpleSegment(0,0,4,2);var ee=new w.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=b.createIndexBuffer(ee);var ae=new w.StructArrayLayout3ui6;ae.emplaceBack(0,1,2),ae.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=b.createIndexBuffer(ae),this.emptyTexture=new w.Texture(b,{width:1,height:1,data:new Uint8Array([0,0,0,0])},b.gl.RGBA);var Ae=this.context.gl;this.stencilClearMode=new St({func:Ae.ALWAYS,mask:0},0,255,Ae.ZERO,Ae.ZERO,Ae.ZERO)},us.prototype.clearStencil=function(){var b=this.context,A=b.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var C=w.create();w.ortho(C,0,this.width,this.height,0,0,1),w.scale(C,C,[A.drawingBufferWidth,A.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(b,A.TRIANGLES,et.disabled,this.stencilClearMode,Gt.disabled,gr.disabled,Ps(C),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},us.prototype._renderTileClippingMasks=function(b,A){if(this.currentStencilSource!==b.source&&b.isTileClipped()&&A&&A.length){this.currentStencilSource=b.source;var C=this.context,I=C.gl;this.nextStencilID+A.length>256&&this.clearStencil(),C.setColorMode(Gt.disabled),C.setDepthMode(et.disabled);var Z=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ee=0,ae=A;ee<ae.length;ee+=1){var Ae=ae[ee],at=this._tileClippingMaskIDs[Ae.key]=this.nextStencilID++;Z.draw(C,I.TRIANGLES,et.disabled,new St({func:I.ALWAYS,mask:0},at,255,I.KEEP,I.KEEP,I.REPLACE),Gt.disabled,gr.disabled,Ps(Ae.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},us.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var b=this.nextStencilID++,A=this.context.gl;return new St({func:A.NOTEQUAL,mask:255},b,255,A.KEEP,A.KEEP,A.REPLACE)},us.prototype.stencilModeForClipping=function(b){var A=this.context.gl;return new St({func:A.EQUAL,mask:255},this._tileClippingMaskIDs[b.key],0,A.KEEP,A.KEEP,A.REPLACE)},us.prototype.stencilConfigForOverlap=function(b){var A,C=this.context.gl,I=b.sort(function(at,bt){return bt.overscaledZ-at.overscaledZ}),Z=I[I.length-1].overscaledZ,ee=I[0].overscaledZ-Z+1;if(ee>1){this.currentStencilSource=void 0,this.nextStencilID+ee>256&&this.clearStencil();for(var ae={},Ae=0;Ae<ee;Ae++)ae[Ae+Z]=new St({func:C.GEQUAL,mask:255},Ae+this.nextStencilID,255,C.KEEP,C.KEEP,C.REPLACE);return this.nextStencilID+=ee,[ae,I]}return[(A={},A[Z]=St.disabled,A),I]},us.prototype.colorModeForRenderPass=function(){var b=this.context.gl;return this._showOverdrawInspector?new Gt([b.CONSTANT_COLOR,b.ONE],new w.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gt.unblended:Gt.alphaBlended},us.prototype.depthModeForSublayer=function(b,A,C){if(!this.opaquePassEnabledForLayer())return et.disabled;var I=1-((1+this.currentLayer)*this.numSublayers+b)*this.depthEpsilon;return new et(C||this.context.gl.LEQUAL,A,[I,I])},us.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},us.prototype.render=function(b,A){var C=this;this.style=b,this.options=A,this.lineAtlas=b.lineAtlas,this.imageManager=b.imageManager,this.glyphManager=b.glyphManager,this.symbolFadeChange=b.placement.symbolFadeChange(w.browser.now()),this.imageManager.beginFrame();var I=this.style._order,Z=this.style.sourceCaches;for(var ee in Z){var ae=Z[ee];ae.used&&ae.prepare(this.context)}var Ae,at,bt={},Vt={},Wt={};for(var $t in Z){var dr=Z[$t];bt[$t]=dr.getVisibleCoordinates(),Vt[$t]=bt[$t].slice().reverse(),Wt[$t]=dr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var hr=0;hr<I.length;hr++)if(this.style._layers[I[hr]].is3D()){this.opaquePassCutoff=hr;break}this.renderPass="offscreen";for(var Rr=0,lr=I;Rr<lr.length;Rr+=1){var Ir=this.style._layers[lr[Rr]];if(Ir.hasOffscreenPass()&&!Ir.isHidden(this.transform.zoom)){var Hr=Vt[Ir.source];(Ir.type==="custom"||Hr.length)&&this.renderLayer(this,Z[Ir.source],Ir,Hr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:A.showOverdrawInspector?w.Color.black:w.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=A.showOverdrawInspector,this.depthRangeFor3D=[0,1-(b._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){var en=this.style._layers[I[this.currentLayer]],_n=Z[en.source],pn=bt[en.source];this._renderTileClippingMasks(en,pn),this.renderLayer(this,_n,en,pn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){var An=this.style._layers[I[this.currentLayer]],Ln=Z[An.source],pi=(An.type==="symbol"?Wt:Vt)[An.source];this._renderTileClippingMasks(An,bt[An.source]),this.renderLayer(this,Ln,An,pi)}this.options.showTileBoundaries&&(w.values(this.style._layers).forEach(function(oi){oi.source&&!oi.isHidden(C.transform.zoom)&&(oi.source!==(at&&at.id)&&(at=C.style.sourceCaches[oi.source]),(!Ae||Ae.getSource().maxzoom<at.getSource().maxzoom)&&(Ae=at))}),Ae&&ch.debug(this,Ae,Ae.getVisibleCoordinates())),this.options.showPadding&&function(oi){var Pi=oi.transform.padding;Ep(oi,oi.transform.height-(Pi.top||0),3,Os),Ep(oi,Pi.bottom||0,3,bp),Ov(oi,Pi.left||0,3,Zh),Ov(oi,oi.transform.width-(Pi.right||0),3,Zd);var ta=oi.transform.centerPoint;(function(sa,Ki,_o,Bi){$c(sa,Ki-1,_o-10,2,20,Bi),$c(sa,Ki-10,_o-1,20,2,Bi)})(oi,ta.x,oi.transform.height-ta.y,Sp)}(this),this.context.setDefault()},us.prototype.renderLayer=function(b,A,C,I){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||I.length)&&(this.id=C.id,this.gpuTimingStart(C),ch[C.type](b,A,C,I,this.style.placement.variableOffsets),this.gpuTimingEnd())},us.prototype.gpuTimingStart=function(b){if(this.options.gpuTiming){var A=this.context.extTimerQuery,C=this.gpuTimers[b.id];C||(C=this.gpuTimers[b.id]={calls:0,cpuTime:0,query:A.createQueryEXT()}),C.calls++,A.beginQueryEXT(A.TIME_ELAPSED_EXT,C.query)}},us.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var b=this.context.extTimerQuery;b.endQueryEXT(b.TIME_ELAPSED_EXT)}},us.prototype.collectGpuTimers=function(){var b=this.gpuTimers;return this.gpuTimers={},b},us.prototype.queryGpuTimers=function(b){var A={};for(var C in b){var I=b[C],Z=this.context.extTimerQuery,ee=Z.getQueryObjectEXT(I.query,Z.QUERY_RESULT_EXT)/1e6;Z.deleteQueryEXT(I.query),A[C]=ee}return A},us.prototype.translatePosMatrix=function(b,A,C,I,Z){if(!C[0]&&!C[1])return b;var ee=Z?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(ee){var ae=Math.sin(ee),Ae=Math.cos(ee);C=[C[0]*Ae-C[1]*ae,C[0]*ae+C[1]*Ae]}var at=[Z?C[0]:Cn(A,C[0],this.transform.zoom),Z?C[1]:Cn(A,C[1],this.transform.zoom),0],bt=new Float32Array(16);return w.translate(bt,b,at),bt},us.prototype.saveTileTexture=function(b){var A=this._tileTextures[b.size[0]];A?A.push(b):this._tileTextures[b.size[0]]=[b]},us.prototype.getTileTexture=function(b){var A=this._tileTextures[b];return A&&A.length>0?A.pop():null},us.prototype.isPatternMissing=function(b){if(!b)return!1;if(!b.from||!b.to)return!0;var A=this.imageManager.getPattern(b.from.toString()),C=this.imageManager.getPattern(b.to.toString());return!A||!C},us.prototype.useProgram=function(b,A){this.cache=this.cache||{};var C=""+b+(A?A.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[C]||(this.cache[C]=new ss(this.context,b,Nd[b],A,Zs[b],this._showOverdrawInspector)),this.cache[C]},us.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},us.prototype.setBaseState=function(){var b=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(b.FUNC_ADD)},us.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=w.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new w.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},us.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fh=function(b,A){this.points=b,this.planes=A};fh.fromInvProjectionMatrix=function(b,A,C){var I=Math.pow(2,C),Z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ae){return w.transformMat4([],ae,b)}).map(function(ae){return w.scale$1([],ae,1/ae[3]/A*I)}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ae){var Ae=w.sub([],Z[ae[0]],Z[ae[1]]),at=w.sub([],Z[ae[2]],Z[ae[1]]),bt=w.normalize([],w.cross([],Ae,at)),Vt=-w.dot(bt,Z[ae[1]]);return bt.concat(Vt)});return new fh(Z,ee)};var Cc=function(b,A){this.min=b,this.max=A,this.center=w.scale$2([],w.add([],this.min,this.max),.5)};Cc.prototype.quadrant=function(b){for(var A=[b%2==0,b<2],C=w.clone$2(this.min),I=w.clone$2(this.max),Z=0;Z<A.length;Z++)C[Z]=A[Z]?this.min[Z]:this.center[Z],I[Z]=A[Z]?this.center[Z]:this.max[Z];return I[2]=this.max[2],new Cc(C,I)},Cc.prototype.distanceX=function(b){return Math.max(Math.min(this.max[0],b[0]),this.min[0])-b[0]},Cc.prototype.distanceY=function(b){return Math.max(Math.min(this.max[1],b[1]),this.min[1])-b[1]},Cc.prototype.intersects=function(b){for(var A=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],C=!0,I=0;I<b.planes.length;I++){for(var Z=b.planes[I],ee=0,ae=0;ae<A.length;ae++)ee+=w.dot$1(Z,A[ae])>=0;if(ee===0)return 0;ee!==A.length&&(C=!1)}if(C)return 2;for(var Ae=0;Ae<3;Ae++){for(var at=Number.MAX_VALUE,bt=-Number.MAX_VALUE,Vt=0;Vt<b.points.length;Vt++){var Wt=b.points[Vt][Ae]-this.min[Ae];at=Math.min(at,Wt),bt=Math.max(bt,Wt)}if(bt<0||at>this.max[Ae]-this.min[Ae])return 0}return 1};var ac=function(b,A,C,I){if(b===void 0&&(b=0),A===void 0&&(A=0),C===void 0&&(C=0),I===void 0&&(I=0),isNaN(b)||b<0||isNaN(A)||A<0||isNaN(C)||C<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=b,this.bottom=A,this.left=C,this.right=I};ac.prototype.interpolate=function(b,A,C){return A.top!=null&&b.top!=null&&(this.top=w.number(b.top,A.top,C)),A.bottom!=null&&b.bottom!=null&&(this.bottom=w.number(b.bottom,A.bottom,C)),A.left!=null&&b.left!=null&&(this.left=w.number(b.left,A.left,C)),A.right!=null&&b.right!=null&&(this.right=w.number(b.right,A.right,C)),this},ac.prototype.getCenter=function(b,A){var C=w.clamp((this.left+b-this.right)/2,0,b),I=w.clamp((this.top+A-this.bottom)/2,0,A);return new w.Point(C,I)},ac.prototype.equals=function(b){return this.top===b.top&&this.bottom===b.bottom&&this.left===b.left&&this.right===b.right},ac.prototype.clone=function(){return new ac(this.top,this.bottom,this.left,this.right)},ac.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var oo=function(b,A,C,I,Z){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Z===void 0||Z,this._minZoom=b||0,this._maxZoom=A||22,this._minPitch=C==null?0:C,this._maxPitch=I==null?60:I,this.setMaxBounds(),this.width=0,this.height=0,this._center=new w.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ac,this._posMatrixCache={},this._alignedPosMatrixCache={}},$o={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};oo.prototype.clone=function(){var b=new oo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return b.tileSize=this.tileSize,b.latRange=this.latRange,b.width=this.width,b.height=this.height,b._center=this._center,b.zoom=this.zoom,b.angle=this.angle,b._fov=this._fov,b._pitch=this._pitch,b._unmodified=this._unmodified,b._edgeInsets=this._edgeInsets.clone(),b._calcMatrices(),b},$o.minZoom.get=function(){return this._minZoom},$o.minZoom.set=function(b){this._minZoom!==b&&(this._minZoom=b,this.zoom=Math.max(this.zoom,b))},$o.maxZoom.get=function(){return this._maxZoom},$o.maxZoom.set=function(b){this._maxZoom!==b&&(this._maxZoom=b,this.zoom=Math.min(this.zoom,b))},$o.minPitch.get=function(){return this._minPitch},$o.minPitch.set=function(b){this._minPitch!==b&&(this._minPitch=b,this.pitch=Math.max(this.pitch,b))},$o.maxPitch.get=function(){return this._maxPitch},$o.maxPitch.set=function(b){this._maxPitch!==b&&(this._maxPitch=b,this.pitch=Math.min(this.pitch,b))},$o.renderWorldCopies.get=function(){return this._renderWorldCopies},$o.renderWorldCopies.set=function(b){b===void 0?b=!0:b===null&&(b=!1),this._renderWorldCopies=b},$o.worldSize.get=function(){return this.tileSize*this.scale},$o.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},$o.size.get=function(){return new w.Point(this.width,this.height)},$o.bearing.get=function(){return-this.angle/Math.PI*180},$o.bearing.set=function(b){var A=-w.wrap(b,-180,180)*Math.PI/180;this.angle!==A&&(this._unmodified=!1,this.angle=A,this._calcMatrices(),this.rotationMatrix=w.create$2(),w.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},$o.pitch.get=function(){return this._pitch/Math.PI*180},$o.pitch.set=function(b){var A=w.clamp(b,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==A&&(this._unmodified=!1,this._pitch=A,this._calcMatrices())},$o.fov.get=function(){return this._fov/Math.PI*180},$o.fov.set=function(b){b=Math.max(.01,Math.min(60,b)),this._fov!==b&&(this._unmodified=!1,this._fov=b/180*Math.PI,this._calcMatrices())},$o.zoom.get=function(){return this._zoom},$o.zoom.set=function(b){var A=Math.min(Math.max(b,this.minZoom),this.maxZoom);this._zoom!==A&&(this._unmodified=!1,this._zoom=A,this.scale=this.zoomScale(A),this.tileZoom=Math.floor(A),this.zoomFraction=A-this.tileZoom,this._constrain(),this._calcMatrices())},$o.center.get=function(){return this._center},$o.center.set=function(b){b.lat===this._center.lat&&b.lng===this._center.lng||(this._unmodified=!1,this._center=b,this._constrain(),this._calcMatrices())},$o.padding.get=function(){return this._edgeInsets.toJSON()},$o.padding.set=function(b){this._edgeInsets.equals(b)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,b,1),this._calcMatrices())},$o.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},oo.prototype.isPaddingEqual=function(b){return this._edgeInsets.equals(b)},oo.prototype.interpolatePadding=function(b,A,C){this._unmodified=!1,this._edgeInsets.interpolate(b,A,C),this._constrain(),this._calcMatrices()},oo.prototype.coveringZoomLevel=function(b){var A=(b.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/b.tileSize));return Math.max(0,A)},oo.prototype.getVisibleUnwrappedCoordinates=function(b){var A=[new w.UnwrappedTileID(0,b)];if(this._renderWorldCopies)for(var C=this.pointCoordinate(new w.Point(0,0)),I=this.pointCoordinate(new w.Point(this.width,0)),Z=this.pointCoordinate(new w.Point(this.width,this.height)),ee=this.pointCoordinate(new w.Point(0,this.height)),ae=Math.floor(Math.min(C.x,I.x,Z.x,ee.x)),Ae=Math.floor(Math.max(C.x,I.x,Z.x,ee.x)),at=ae-1;at<=Ae+1;at++)at!==0&&A.push(new w.UnwrappedTileID(at,b));return A},oo.prototype.coveringTiles=function(b){var A=this.coveringZoomLevel(b),C=A;if(b.minzoom!==void 0&&A<b.minzoom)return[];b.maxzoom!==void 0&&A>b.maxzoom&&(A=b.maxzoom);var I=w.MercatorCoordinate.fromLngLat(this.center),Z=Math.pow(2,A),ee=[Z*I.x,Z*I.y,0],ae=fh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,A),Ae=b.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ae=A);var at=function(oi){return{aabb:new Cc([oi*Z,0,0],[(oi+1)*Z,Z,0]),zoom:0,x:0,y:0,wrap:oi,fullyVisible:!1}},bt=[],Vt=[],Wt=A,$t=b.reparseOverscaled?C:A;if(this._renderWorldCopies)for(var dr=1;dr<=3;dr++)bt.push(at(-dr)),bt.push(at(dr));for(bt.push(at(0));bt.length>0;){var hr=bt.pop(),Rr=hr.x,lr=hr.y,Ir=hr.fullyVisible;if(!Ir){var Hr=hr.aabb.intersects(ae);if(Hr===0)continue;Ir=Hr===2}var en=hr.aabb.distanceX(ee),_n=hr.aabb.distanceY(ee),pn=Math.max(Math.abs(en),Math.abs(_n));if(hr.zoom===Wt||pn>3+(1<<Wt-hr.zoom)-2&&hr.zoom>=Ae)Vt.push({tileID:new w.OverscaledTileID(hr.zoom===Wt?$t:hr.zoom,hr.wrap,hr.zoom,Rr,lr),distanceSq:w.sqrLen([ee[0]-.5-Rr,ee[1]-.5-lr])});else for(var An=0;An<4;An++){var Ln=(Rr<<1)+An%2,pi=(lr<<1)+(An>>1);bt.push({aabb:hr.aabb.quadrant(An),zoom:hr.zoom+1,x:Ln,y:pi,wrap:hr.wrap,fullyVisible:Ir})}}return Vt.sort(function(oi,Pi){return oi.distanceSq-Pi.distanceSq}).map(function(oi){return oi.tileID})},oo.prototype.resize=function(b,A){this.width=b,this.height=A,this.pixelsToGLUnits=[2/b,-2/A],this._constrain(),this._calcMatrices()},$o.unmodified.get=function(){return this._unmodified},oo.prototype.zoomScale=function(b){return Math.pow(2,b)},oo.prototype.scaleZoom=function(b){return Math.log(b)/Math.LN2},oo.prototype.project=function(b){var A=w.clamp(b.lat,-this.maxValidLatitude,this.maxValidLatitude);return new w.Point(w.mercatorXfromLng(b.lng)*this.worldSize,w.mercatorYfromLat(A)*this.worldSize)},oo.prototype.unproject=function(b){return new w.MercatorCoordinate(b.x/this.worldSize,b.y/this.worldSize).toLngLat()},$o.point.get=function(){return this.project(this.center)},oo.prototype.setLocationAtPoint=function(b,A){var C=this.pointCoordinate(A),I=this.pointCoordinate(this.centerPoint),Z=this.locationCoordinate(b),ee=new w.MercatorCoordinate(Z.x-(C.x-I.x),Z.y-(C.y-I.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())},oo.prototype.locationPoint=function(b){return this.coordinatePoint(this.locationCoordinate(b))},oo.prototype.pointLocation=function(b){return this.coordinateLocation(this.pointCoordinate(b))},oo.prototype.locationCoordinate=function(b){return w.MercatorCoordinate.fromLngLat(b)},oo.prototype.coordinateLocation=function(b){return b.toLngLat()},oo.prototype.pointCoordinate=function(b){var A=[b.x,b.y,0,1],C=[b.x,b.y,1,1];w.transformMat4(A,A,this.pixelMatrixInverse),w.transformMat4(C,C,this.pixelMatrixInverse);var I=A[3],Z=C[3],ee=A[1]/I,ae=C[1]/Z,Ae=A[2]/I,at=C[2]/Z,bt=Ae===at?0:(0-Ae)/(at-Ae);return new w.MercatorCoordinate(w.number(A[0]/I,C[0]/Z,bt)/this.worldSize,w.number(ee,ae,bt)/this.worldSize)},oo.prototype.coordinatePoint=function(b){var A=[b.x*this.worldSize,b.y*this.worldSize,0,1];return w.transformMat4(A,A,this.pixelMatrix),new w.Point(A[0]/A[3],A[1]/A[3])},oo.prototype.getBounds=function(){return new w.LngLatBounds().extend(this.pointLocation(new w.Point(0,0))).extend(this.pointLocation(new w.Point(this.width,0))).extend(this.pointLocation(new w.Point(this.width,this.height))).extend(this.pointLocation(new w.Point(0,this.height)))},oo.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new w.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},oo.prototype.setMaxBounds=function(b){b?(this.lngRange=[b.getWest(),b.getEast()],this.latRange=[b.getSouth(),b.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},oo.prototype.calculatePosMatrix=function(b,A){A===void 0&&(A=!1);var C=b.key,I=A?this._alignedPosMatrixCache:this._posMatrixCache;if(I[C])return I[C];var Z=b.canonical,ee=this.worldSize/this.zoomScale(Z.z),ae=Z.x+Math.pow(2,Z.z)*b.wrap,Ae=w.identity(new Float64Array(16));return w.translate(Ae,Ae,[ae*ee,Z.y*ee,0]),w.scale(Ae,Ae,[ee/w.EXTENT,ee/w.EXTENT,1]),w.multiply(Ae,A?this.alignedProjMatrix:this.projMatrix,Ae),I[C]=new Float32Array(Ae),I[C]},oo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},oo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var b,A,C,I,Z=-90,ee=90,ae=-180,Ae=180,at=this.size,bt=this._unmodified;if(this.latRange){var Vt=this.latRange;Z=w.mercatorYfromLat(Vt[1])*this.worldSize,b=(ee=w.mercatorYfromLat(Vt[0])*this.worldSize)-Z<at.y?at.y/(ee-Z):0}if(this.lngRange){var Wt=this.lngRange;ae=w.mercatorXfromLng(Wt[0])*this.worldSize,A=(Ae=w.mercatorXfromLng(Wt[1])*this.worldSize)-ae<at.x?at.x/(Ae-ae):0}var $t=this.point,dr=Math.max(A||0,b||0);if(dr)return this.center=this.unproject(new w.Point(A?(Ae+ae)/2:$t.x,b?(ee+Z)/2:$t.y)),this.zoom+=this.scaleZoom(dr),this._unmodified=bt,void(this._constraining=!1);if(this.latRange){var hr=$t.y,Rr=at.y/2;hr-Rr<Z&&(I=Z+Rr),hr+Rr>ee&&(I=ee-Rr)}if(this.lngRange){var lr=$t.x,Ir=at.x/2;lr-Ir<ae&&(C=ae+Ir),lr+Ir>Ae&&(C=Ae-Ir)}C===void 0&&I===void 0||(this.center=this.unproject(new w.Point(C!==void 0?C:$t.x,I!==void 0?I:$t.y))),this._unmodified=bt,this._constraining=!1}},oo.prototype._calcMatrices=function(){if(this.height){var b=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var A=Math.PI/2+this._pitch,C=this._fov*(.5+b.y/this.height),I=Math.sin(C)*this.cameraToCenterDistance/Math.sin(w.clamp(Math.PI-A-C,.01,Math.PI-.01)),Z=this.point,ee=Z.x,ae=Z.y,Ae=1.01*(Math.cos(Math.PI/2-this._pitch)*I+this.cameraToCenterDistance),at=this.height/50,bt=new Float64Array(16);w.perspective(bt,this._fov,this.width/this.height,at,Ae),bt[8]=2*-b.x/this.width,bt[9]=2*b.y/this.height,w.scale(bt,bt,[1,-1,1]),w.translate(bt,bt,[0,0,-this.cameraToCenterDistance]),w.rotateX(bt,bt,this._pitch),w.rotateZ(bt,bt,this.angle),w.translate(bt,bt,[-ee,-ae,0]),this.mercatorMatrix=w.scale([],bt,[this.worldSize,this.worldSize,this.worldSize]),w.scale(bt,bt,[1,1,w.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=bt,this.invProjMatrix=w.invert([],this.projMatrix);var Vt=this.width%2/2,Wt=this.height%2/2,$t=Math.cos(this.angle),dr=Math.sin(this.angle),hr=ee-Math.round(ee)+$t*Vt+dr*Wt,Rr=ae-Math.round(ae)+$t*Wt+dr*Vt,lr=new Float64Array(bt);if(w.translate(lr,lr,[hr>.5?hr-1:hr,Rr>.5?Rr-1:Rr,0]),this.alignedProjMatrix=lr,bt=w.create(),w.scale(bt,bt,[this.width/2,-this.height/2,1]),w.translate(bt,bt,[1,-1,0]),this.labelPlaneMatrix=bt,bt=w.create(),w.scale(bt,bt,[1,-1,1]),w.translate(bt,bt,[-1,-1,0]),w.scale(bt,bt,[2/this.width,2/this.height,1]),this.glCoordMatrix=bt,this.pixelMatrix=w.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(bt=w.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=bt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},oo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var b=this.pointCoordinate(new w.Point(0,0)),A=[b.x*this.worldSize,b.y*this.worldSize,0,1];return w.transformMat4(A,A,this.pixelMatrix)[3]/this.cameraToCenterDistance},oo.prototype.getCameraPoint=function(){var b=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new w.Point(0,b))},oo.prototype.getCameraQueryGeometry=function(b){var A=this.getCameraPoint();if(b.length===1)return[b[0],A];for(var C=A.x,I=A.y,Z=A.x,ee=A.y,ae=0,Ae=b;ae<Ae.length;ae+=1){var at=Ae[ae];C=Math.min(C,at.x),I=Math.min(I,at.y),Z=Math.max(Z,at.x),ee=Math.max(ee,at.y)}return[new w.Point(C,I),new w.Point(Z,I),new w.Point(Z,ee),new w.Point(C,ee),new w.Point(C,I)]},Object.defineProperties(oo.prototype,$o);var vo=function(b){var A,C,I,Z;this._hashName=b&&encodeURIComponent(b),w.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(A=this._updateHashUnthrottled.bind(this),C=!1,I=null,Z=function(){I=null,C&&(A(),I=setTimeout(Z,300),C=!1)},function(){return C=!0,I||Z(),I})};vo.prototype.addTo=function(b){return this._map=b,w.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},vo.prototype.remove=function(){return w.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},vo.prototype.getHashString=function(b){var A=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,I=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),Z=Math.pow(10,I),ee=Math.round(A.lng*Z)/Z,ae=Math.round(A.lat*Z)/Z,Ae=this._map.getBearing(),at=this._map.getPitch(),bt="";if(bt+=b?"/"+ee+"/"+ae+"/"+C:C+"/"+ae+"/"+ee,(Ae||at)&&(bt+="/"+Math.round(10*Ae)/10),at&&(bt+="/"+Math.round(at)),this._hashName){var Vt=this._hashName,Wt=!1,$t=w.window.location.hash.slice(1).split("&").map(function(dr){var hr=dr.split("=")[0];return hr===Vt?(Wt=!0,hr+"="+bt):dr}).filter(function(dr){return dr});return Wt||$t.push(Vt+"="+bt),"#"+$t.join("&")}return"#"+bt},vo.prototype._getCurrentHash=function(){var b,A=this,C=w.window.location.hash.replace("#","");return this._hashName?(C.split("&").map(function(I){return I.split("=")}).forEach(function(I){I[0]===A._hashName&&(b=I)}),(b&&b[1]||"").split("/")):C.split("/")},vo.prototype._onHashChange=function(){var b=this._getCurrentHash();if(b.length>=3&&!b.some(function(C){return isNaN(C)})){var A=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(b[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+b[2],+b[1]],zoom:+b[0],bearing:A,pitch:+(b[4]||0)}),!0}return!1},vo.prototype._updateHashUnthrottled=function(){var b=w.window.location.href.replace(/(#.+)?$/,this.getHashString());try{w.window.history.replaceState(w.window.history.state,null,b)}catch(A){}};var id={linearity:.3,easing:w.bezier(0,0,.3,1)},Of=w.extend({deceleration:2500,maxSpeed:1400},id),wp=w.extend({deceleration:20,maxSpeed:1400},id),kv=w.extend({deceleration:1e3,maxSpeed:360},id),va=w.extend({deceleration:1e3,maxSpeed:90},id),Cp=function(b){this._map=b,this.clear()};function Xc(b,A){(!b.duration||b.duration<A.duration)&&(b.duration=A.duration,b.easing=A.easing)}function $s(b,A,C){var I=C.maxSpeed,Z=C.linearity,ee=C.deceleration,ae=w.clamp(b*Z/(A/1e3),-I,I),Ae=Math.abs(ae)/(ee*Z);return{easing:C.easing,duration:1e3*Ae,amount:ae*(Ae/2)}}Cp.prototype.clear=function(){this._inertiaBuffer=[]},Cp.prototype.record=function(b){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.browser.now(),settings:b})},Cp.prototype._drainInertiaBuffer=function(){for(var b=this._inertiaBuffer,A=w.browser.now();b.length>0&&A-b[0].time>160;)b.shift()},Cp.prototype._onMoveEnd=function(b){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var A={zoom:0,bearing:0,pitch:0,pan:new w.Point(0,0),pinchAround:void 0,around:void 0},C=0,I=this._inertiaBuffer;C<I.length;C+=1){var Z=I[C].settings;A.zoom+=Z.zoomDelta||0,A.bearing+=Z.bearingDelta||0,A.pitch+=Z.pitchDelta||0,Z.panDelta&&A.pan._add(Z.panDelta),Z.around&&(A.around=Z.around),Z.pinchAround&&(A.pinchAround=Z.pinchAround)}var ee=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ae={};if(A.pan.mag()){var Ae=$s(A.pan.mag(),ee,w.extend({},Of,b||{}));ae.offset=A.pan.mult(Ae.amount/A.pan.mag()),ae.center=this._map.transform.center,Xc(ae,Ae)}if(A.zoom){var at=$s(A.zoom,ee,wp);ae.zoom=this._map.transform.zoom+at.amount,Xc(ae,at)}if(A.bearing){var bt=$s(A.bearing,ee,kv);ae.bearing=this._map.transform.bearing+w.clamp(bt.amount,-179,179),Xc(ae,bt)}if(A.pitch){var Vt=$s(A.pitch,ee,va);ae.pitch=this._map.transform.pitch+Vt.amount,Xc(ae,Vt)}if(ae.zoom||ae.bearing){var Wt=A.pinchAround===void 0?A.around:A.pinchAround;ae.around=Wt?this._map.unproject(Wt):this._map.getCenter()}return this.clear(),w.extend(ae,{noMoveStart:!0})}};var Es=function(b){function A(I,Z,ee,ae){ae===void 0&&(ae={});var Ae=j.mousePos(Z.getCanvasContainer(),ee),at=Z.unproject(Ae);b.call(this,I,w.extend({point:Ae,lngLat:at,originalEvent:ee},ae)),this._defaultPrevented=!1,this.target=Z}b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A;var C={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,C),A}(w.Event),hh=function(b){function A(I,Z,ee){var ae=I==="touchend"?ee.changedTouches:ee.touches,Ae=j.touchPos(Z.getCanvasContainer(),ae),at=Ae.map(function(Wt){return Z.unproject(Wt)}),bt=Ae.reduce(function(Wt,$t,dr,hr){return Wt.add($t.div(hr.length))},new w.Point(0,0)),Vt=Z.unproject(bt);b.call(this,I,{points:Ae,point:bt,lngLats:at,lngLat:Vt,originalEvent:ee}),this._defaultPrevented=!1}b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A;var C={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,C),A}(w.Event),ad=function(b){function A(I,Z,ee){b.call(this,I,{originalEvent:ee}),this._defaultPrevented=!1}b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A;var C={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,C),A}(w.Event),ks=function(b,A){this._map=b,this._clickTolerance=A.clickTolerance};ks.prototype.reset=function(){delete this._mousedownPos},ks.prototype.wheel=function(b){return this._firePreventable(new ad(b.type,this._map,b))},ks.prototype.mousedown=function(b,A){return this._mousedownPos=A,this._firePreventable(new Es(b.type,this._map,b))},ks.prototype.mouseup=function(b){this._map.fire(new Es(b.type,this._map,b))},ks.prototype.click=function(b,A){this._mousedownPos&&this._mousedownPos.dist(A)>=this._clickTolerance||this._map.fire(new Es(b.type,this._map,b))},ks.prototype.dblclick=function(b){return this._firePreventable(new Es(b.type,this._map,b))},ks.prototype.mouseover=function(b){this._map.fire(new Es(b.type,this._map,b))},ks.prototype.mouseout=function(b){this._map.fire(new Es(b.type,this._map,b))},ks.prototype.touchstart=function(b){return this._firePreventable(new hh(b.type,this._map,b))},ks.prototype.touchmove=function(b){this._map.fire(new hh(b.type,this._map,b))},ks.prototype.touchend=function(b){this._map.fire(new hh(b.type,this._map,b))},ks.prototype.touchcancel=function(b){this._map.fire(new hh(b.type,this._map,b))},ks.prototype._firePreventable=function(b){if(this._map.fire(b),b.defaultPrevented)return{}},ks.prototype.isEnabled=function(){return!0},ks.prototype.isActive=function(){return!1},ks.prototype.enable=function(){},ks.prototype.disable=function(){};var Ni=function(b){this._map=b};Ni.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ni.prototype.mousemove=function(b){this._map.fire(new Es(b.type,this._map,b))},Ni.prototype.mousedown=function(){this._delayContextMenu=!0},Ni.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Es("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ni.prototype.contextmenu=function(b){this._delayContextMenu?this._contextMenuEvent=b:this._map.fire(new Es(b.type,this._map,b)),this._map.listens("contextmenu")&&b.preventDefault()},Ni.prototype.isEnabled=function(){return!0},Ni.prototype.isActive=function(){return!1},Ni.prototype.enable=function(){},Ni.prototype.disable=function(){};var ju=function(b,A){this._map=b,this._el=b.getCanvasContainer(),this._container=b.getContainer(),this._clickTolerance=A.clickTolerance||1};function Yc(b,A){for(var C={},I=0;I<b.length;I++)C[b[I].identifier]=A[I];return C}ju.prototype.isEnabled=function(){return!!this._enabled},ju.prototype.isActive=function(){return!!this._active},ju.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ju.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ju.prototype.mousedown=function(b,A){this.isEnabled()&&b.shiftKey&&b.button===0&&(j.disableDrag(),this._startPos=this._lastPos=A,this._active=!0)},ju.prototype.mousemoveWindow=function(b,A){if(this._active){var C=A;if(!(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)){var I=this._startPos;this._lastPos=C,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",b));var Z=Math.min(I.x,C.x),ee=Math.max(I.x,C.x),ae=Math.min(I.y,C.y),Ae=Math.max(I.y,C.y);j.setTransform(this._box,"translate("+Z+"px,"+ae+"px)"),this._box.style.width=ee-Z+"px",this._box.style.height=Ae-ae+"px"}}},ju.prototype.mouseupWindow=function(b,A){var C=this;if(this._active&&b.button===0){var I=this._startPos,Z=A;if(this.reset(),j.suppressClick(),I.x!==Z.x||I.y!==Z.y)return this._map.fire(new w.Event("boxzoomend",{originalEvent:b})),{cameraAnimation:function(ee){return ee.fitScreenCoordinates(I,Z,C._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",b)}},ju.prototype.keydown=function(b){this._active&&b.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",b))},ju.prototype.blur=function(){this.reset()},ju.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},ju.prototype._fireEvent=function(b,A){return this._map.fire(new w.Event(b,{originalEvent:A}))};var kf=function(b){this.reset(),this.numTouches=b.numTouches};kf.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},kf.prototype.touchstart=function(b,A,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=b.timeStamp),C.length===this.numTouches&&(this.centroid=function(I){for(var Z=new w.Point(0,0),ee=0,ae=I;ee<ae.length;ee+=1)Z._add(ae[ee]);return Z.div(I.length)}(A),this.touches=Yc(C,A)))},kf.prototype.touchmove=function(b,A,C){if(!this.aborted&&this.centroid){var I=Yc(C,A);for(var Z in this.touches){var ee=I[Z];(!ee||ee.dist(this.touches[Z])>30)&&(this.aborted=!0)}}},kf.prototype.touchend=function(b,A,C){if((!this.centroid||b.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){var I=!this.aborted&&this.centroid;if(this.reset(),I)return I}};var cl=function(b){this.singleTap=new kf(b),this.numTaps=b.numTaps,this.reset()};cl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},cl.prototype.touchstart=function(b,A,C){this.singleTap.touchstart(b,A,C)},cl.prototype.touchmove=function(b,A,C){this.singleTap.touchmove(b,A,C)},cl.prototype.touchend=function(b,A,C){var I=this.singleTap.touchend(b,A,C);if(I){var Z=b.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(I)<30;if(Z&&ee||this.reset(),this.count++,this.lastTime=b.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}};var Zo=function(){this._zoomIn=new cl({numTouches:1,numTaps:2}),this._zoomOut=new cl({numTouches:2,numTaps:1}),this.reset()};Zo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Zo.prototype.touchstart=function(b,A,C){this._zoomIn.touchstart(b,A,C),this._zoomOut.touchstart(b,A,C)},Zo.prototype.touchmove=function(b,A,C){this._zoomIn.touchmove(b,A,C),this._zoomOut.touchmove(b,A,C)},Zo.prototype.touchend=function(b,A,C){var I=this,Z=this._zoomIn.touchend(b,A,C),ee=this._zoomOut.touchend(b,A,C);return Z?(this._active=!0,b.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(ae){return ae.easeTo({duration:300,zoom:ae.getZoom()+1,around:ae.unproject(Z)},{originalEvent:b})}}):ee?(this._active=!0,b.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(ae){return ae.easeTo({duration:300,zoom:ae.getZoom()-1,around:ae.unproject(ee)},{originalEvent:b})}}):void 0},Zo.prototype.touchcancel=function(){this.reset()},Zo.prototype.enable=function(){this._enabled=!0},Zo.prototype.disable=function(){this._enabled=!1,this.reset()},Zo.prototype.isEnabled=function(){return this._enabled},Zo.prototype.isActive=function(){return this._active};var Ds={0:1,2:2},Ei=function(b){this.reset(),this._clickTolerance=b.clickTolerance||1};Ei.prototype.blur=function(){this.reset()},Ei.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ei.prototype._correctButton=function(b,A){return!1},Ei.prototype._move=function(b,A){return{}},Ei.prototype.mousedown=function(b,A){if(!this._lastPoint){var C=j.mouseButton(b);this._correctButton(b,C)&&(this._lastPoint=A,this._eventButton=C)}},Ei.prototype.mousemoveWindow=function(b,A){var C=this._lastPoint;if(C){if(b.preventDefault(),function(I,Z){var ee=Ds[Z];return I.buttons===void 0||(I.buttons&ee)!==ee}(b,this._eventButton))this.reset();else if(this._moved||!(A.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=A,this._move(C,A)}},Ei.prototype.mouseupWindow=function(b){this._lastPoint&&j.mouseButton(b)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},Ei.prototype.enable=function(){this._enabled=!0},Ei.prototype.disable=function(){this._enabled=!1,this.reset()},Ei.prototype.isEnabled=function(){return this._enabled},Ei.prototype.isActive=function(){return this._active};var zl=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.mousedown=function(C,I){b.prototype.mousedown.call(this,C,I),this._lastPoint&&(this._active=!0)},A.prototype._correctButton=function(C,I){return I===0&&!C.ctrlKey},A.prototype._move=function(C,I){return{around:I,panDelta:I.sub(C)}},A}(Ei),ph=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},A.prototype._move=function(C,I){var Z=.8*(I.x-C.x);if(Z)return this._active=!0,{bearingDelta:Z}},A.prototype.contextmenu=function(C){C.preventDefault()},A}(Ei),Vh=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},A.prototype._move=function(C,I){var Z=-.5*(I.y-C.y);if(Z)return this._active=!0,{pitchDelta:Z}},A.prototype.contextmenu=function(C){C.preventDefault()},A}(Ei),Tc=function(b){this._minTouches=1,this._clickTolerance=b.clickTolerance||1,this.reset()};Tc.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new w.Point(0,0)},Tc.prototype.touchstart=function(b,A,C){return this._calculateTransform(b,A,C)},Tc.prototype.touchmove=function(b,A,C){if(this._active&&!(C.length<this._minTouches))return b.preventDefault(),this._calculateTransform(b,A,C)},Tc.prototype.touchend=function(b,A,C){this._calculateTransform(b,A,C),this._active&&C.length<this._minTouches&&this.reset()},Tc.prototype.touchcancel=function(){this.reset()},Tc.prototype._calculateTransform=function(b,A,C){C.length>0&&(this._active=!0);var I=Yc(C,A),Z=new w.Point(0,0),ee=new w.Point(0,0),ae=0;for(var Ae in I){var at=I[Ae],bt=this._touches[Ae];bt&&(Z._add(at),ee._add(at.sub(bt)),ae++,I[Ae]=at)}if(this._touches=I,!(ae<this._minTouches)&&ee.mag()){var Vt=ee.div(ae);if(this._sum._add(Vt),!(this._sum.mag()<this._clickTolerance))return{around:Z.div(ae),panDelta:Vt}}},Tc.prototype.enable=function(){this._enabled=!0},Tc.prototype.disable=function(){this._enabled=!1,this.reset()},Tc.prototype.isEnabled=function(){return this._enabled},Tc.prototype.isActive=function(){return this._active};var Cu=function(){this.reset()};function Tp(b,A,C){for(var I=0;I<b.length;I++)if(b[I].identifier===C)return A[I]}function Ac(b,A){return Math.log(b/A)/Math.LN2}Cu.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Cu.prototype._start=function(b){},Cu.prototype._move=function(b,A,C){return{}},Cu.prototype.touchstart=function(b,A,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([A[0],A[1]]))},Cu.prototype.touchmove=function(b,A,C){if(this._firstTwoTouches){b.preventDefault();var I=this._firstTwoTouches,Z=I[1],ee=Tp(C,A,I[0]),ae=Tp(C,A,Z);if(ee&&ae){var Ae=this._aroundCenter?null:ee.add(ae).div(2);return this._move([ee,ae],Ae,b)}}},Cu.prototype.touchend=function(b,A,C){if(this._firstTwoTouches){var I=this._firstTwoTouches,Z=I[1],ee=Tp(C,A,I[0]),ae=Tp(C,A,Z);ee&&ae||(this._active&&j.suppressClick(),this.reset())}},Cu.prototype.touchcancel=function(){this.reset()},Cu.prototype.enable=function(b){this._enabled=!0,this._aroundCenter=!!b&&b.around==="center"},Cu.prototype.disable=function(){this._enabled=!1,this.reset()},Cu.prototype.isEnabled=function(){return this._enabled},Cu.prototype.isActive=function(){return this._active};var iu=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.reset=function(){b.prototype.reset.call(this),delete this._distance,delete this._startDistance},A.prototype._start=function(C){this._startDistance=this._distance=C[0].dist(C[1])},A.prototype._move=function(C,I){var Z=this._distance;if(this._distance=C[0].dist(C[1]),this._active||!(Math.abs(Ac(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ac(this._distance,Z),pinchAround:I}},A}(Cu);function fl(b,A){return 180*b.angleWith(A)/Math.PI}var Dv=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.reset=function(){b.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},A.prototype._start=function(C){this._startVector=this._vector=C[0].sub(C[1]),this._minDiameter=C[0].dist(C[1])},A.prototype._move=function(C,I){var Z=this._vector;if(this._vector=C[0].sub(C[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fl(this._vector,Z),pinchAround:I}},A.prototype._isBelowThreshold=function(C){this._minDiameter=Math.min(this._minDiameter,C.mag());var I=25/(Math.PI*this._minDiameter)*360,Z=fl(C,this._startVector);return Math.abs(Z)<I},A}(Cu);function Hh(b){return Math.abs(b.y)>Math.abs(b.x)}var jh=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.reset=function(){b.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},A.prototype._start=function(C){this._lastPoints=C,Hh(C[0].sub(C[1]))&&(this._valid=!1)},A.prototype._move=function(C,I,Z){var ee=C[0].sub(this._lastPoints[0]),ae=C[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ee,ae,Z.timeStamp),this._valid)return this._lastPoints=C,this._active=!0,{pitchDelta:(ee.y+ae.y)/2*-.5}},A.prototype.gestureBeginsVertically=function(C,I,Z){if(this._valid!==void 0)return this._valid;var ee=C.mag()>=2,ae=I.mag()>=2;if(ee||ae){if(!ee||!ae)return this._firstMove===void 0&&(this._firstMove=Z),Z-this._firstMove<100&&void 0;var Ae=C.y>0==I.y>0;return Hh(C)&&Hh(I)&&Ae}},A}(Cu),Hd={panStep:100,bearingStep:15,pitchStep:10},oc=function(){var b=Hd;this._panStep=b.panStep,this._bearingStep=b.bearingStep,this._pitchStep=b.pitchStep,this._rotationDisabled=!1};function au(b){return b*(2-b)}oc.prototype.blur=function(){this.reset()},oc.prototype.reset=function(){this._active=!1},oc.prototype.keydown=function(b){var A=this;if(!(b.altKey||b.ctrlKey||b.metaKey)){var C=0,I=0,Z=0,ee=0,ae=0;switch(b.keyCode){case 61:case 107:case 171:case 187:C=1;break;case 189:case 109:case 173:C=-1;break;case 37:b.shiftKey?I=-1:(b.preventDefault(),ee=-1);break;case 39:b.shiftKey?I=1:(b.preventDefault(),ee=1);break;case 38:b.shiftKey?Z=1:(b.preventDefault(),ae=-1);break;case 40:b.shiftKey?Z=-1:(b.preventDefault(),ae=1);break;default:return}return this._rotationDisabled&&(I=0,Z=0),{cameraAnimation:function(Ae){var at=Ae.getZoom();Ae.easeTo({duration:300,easeId:"keyboardHandler",easing:au,zoom:C?Math.round(at)+C*(b.shiftKey?2:1):at,bearing:Ae.getBearing()+I*A._bearingStep,pitch:Ae.getPitch()+Z*A._pitchStep,offset:[-ee*A._panStep,-ae*A._panStep],center:Ae.getCenter()},{originalEvent:b})}}}},oc.prototype.enable=function(){this._enabled=!0},oc.prototype.disable=function(){this._enabled=!1,this.reset()},oc.prototype.isEnabled=function(){return this._enabled},oc.prototype.isActive=function(){return this._active},oc.prototype.disableRotation=function(){this._rotationDisabled=!0},oc.prototype.enableRotation=function(){this._rotationDisabled=!1};var ja=function(b,A){this._map=b,this._el=b.getCanvasContainer(),this._handler=A,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,w.bindAll(["_onTimeout"],this)};ja.prototype.setZoomRate=function(b){this._defaultZoomRate=b},ja.prototype.setWheelZoomRate=function(b){this._wheelZoomRate=b},ja.prototype.isEnabled=function(){return!!this._enabled},ja.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ja.prototype.isZooming=function(){return!!this._zooming},ja.prototype.enable=function(b){this.isEnabled()||(this._enabled=!0,this._aroundCenter=b&&b.around==="center")},ja.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ja.prototype.wheel=function(b){if(this.isEnabled()){var A=b.deltaMode===w.window.WheelEvent.DOM_DELTA_LINE?40*b.deltaY:b.deltaY,C=w.browser.now(),I=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,A!==0&&A%4.000244140625==0?this._type="wheel":A!==0&&Math.abs(A)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=A,this._timeout=setTimeout(this._onTimeout,40,b)):this._type||(this._type=Math.abs(I*A)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,A+=this._lastValue)),b.shiftKey&&A&&(A/=4),this._type&&(this._lastWheelEvent=b,this._delta-=A,this._active||this._start(b)),b.preventDefault()}},ja.prototype._onTimeout=function(b){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},ja.prototype._start=function(b){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var A=j.mousePos(this._el,b);this._around=w.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(A)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ja.prototype.renderFrame=function(){var b=this;if(this._frameId&&(this._frameId=null,this.isActive())){var A=this._map.transform;if(this._delta!==0){var C=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);var Z=typeof this._targetZoom=="number"?A.zoomScale(this._targetZoom):A.scale;this._targetZoom=Math.min(A.maxZoom,Math.max(A.minZoom,A.scaleZoom(Z*I))),this._type==="wheel"&&(this._startZoom=A.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ee,ae=typeof this._targetZoom=="number"?this._targetZoom:A.zoom,Ae=this._startZoom,at=this._easing,bt=!1;if(this._type==="wheel"&&Ae&&at){var Vt=Math.min((w.browser.now()-this._lastWheelEventTime)/200,1),Wt=at(Vt);ee=w.number(Ae,ae,Wt),Vt<1?this._frameId||(this._frameId=!0):bt=!0}else ee=ae,bt=!0;return this._active=!0,bt&&(this._active=!1,this._finishTimeout=setTimeout(function(){b._zooming=!1,b._handler._triggerRenderFrame(),delete b._targetZoom,delete b._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!bt,zoomDelta:ee-A.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ja.prototype._smoothOutEasing=function(b){var A=w.ease;if(this._prevEase){var C=this._prevEase,I=(w.browser.now()-C.start)/C.duration,Z=C.easing(I+.01)-C.easing(I),ee=.27/Math.sqrt(Z*Z+1e-4)*.01,ae=Math.sqrt(.0729-ee*ee);A=w.bezier(ee,ae,.25,1)}return this._prevEase={start:w.browser.now(),duration:b,easing:A},A},ja.prototype.blur=function(){this.reset()},ja.prototype.reset=function(){this._active=!1};var ws=function(b,A){this._clickZoom=b,this._tapZoom=A};ws.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ws.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ws.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ws.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Kl=function(){this.reset()};Kl.prototype.reset=function(){this._active=!1},Kl.prototype.blur=function(){this.reset()},Kl.prototype.dblclick=function(b,A){return b.preventDefault(),{cameraAnimation:function(C){C.easeTo({duration:300,zoom:C.getZoom()+(b.shiftKey?-1:1),around:C.unproject(A)},{originalEvent:b})}}},Kl.prototype.enable=function(){this._enabled=!0},Kl.prototype.disable=function(){this._enabled=!1,this.reset()},Kl.prototype.isEnabled=function(){return this._enabled},Kl.prototype.isActive=function(){return this._active};var Wu=function(){this._tap=new cl({numTouches:1,numTaps:1}),this.reset()};Wu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Wu.prototype.touchstart=function(b,A,C){this._swipePoint||(this._tapTime&&b.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=A[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(b,A,C))},Wu.prototype.touchmove=function(b,A,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;var I=A[0],Z=I.y-this._swipePoint.y;return this._swipePoint=I,b.preventDefault(),this._active=!0,{zoomDelta:Z/128}}}else this._tap.touchmove(b,A,C)},Wu.prototype.touchend=function(b,A,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(b,A,C)&&(this._tapTime=b.timeStamp)},Wu.prototype.touchcancel=function(){this.reset()},Wu.prototype.enable=function(){this._enabled=!0},Wu.prototype.disable=function(){this._enabled=!1,this.reset()},Wu.prototype.isEnabled=function(){return this._enabled},Wu.prototype.isActive=function(){return this._active};var Df=function(b,A,C){this._el=b,this._mousePan=A,this._touchPan=C};Df.prototype.enable=function(b){this._inertiaOptions=b||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Df.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Df.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Df.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Mc=function(b,A,C){this._pitchWithRotate=b.pitchWithRotate,this._mouseRotate=A,this._mousePitch=C};Mc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Mc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Mc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Mc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var tl=function(b,A,C,I){this._el=b,this._touchZoom=A,this._touchRotate=C,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0};tl.prototype.enable=function(b){this._touchZoom.enable(b),this._rotationDisabled||this._touchRotate.enable(b),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},tl.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},tl.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},tl.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},tl.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},tl.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Tu=function(b){return b.zoom||b.drag||b.pitch||b.rotate},Wh=function(b){function A(){b.apply(this,arguments)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A}(w.Event);function Qi(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}var wi=function(b,A){this._map=b,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cp(b),this._bearingSnap=A.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(A),w.bindAll(["handleEvent","handleWindowEvent"],this);var C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[w.window.document,"mousemove",{capture:!0}],[w.window.document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[w.window,"blur",void 0]];for(var I=0,Z=this._listeners;I<Z.length;I+=1){var ee=Z[I],ae=ee[0];j.addEventListener(ae,ee[1],ae===w.window.document?this.handleWindowEvent:this.handleEvent,ee[2])}};wi.prototype.destroy=function(){for(var b=0,A=this._listeners;b<A.length;b+=1){var C=A[b],I=C[0];j.removeEventListener(I,C[1],I===w.window.document?this.handleWindowEvent:this.handleEvent,C[2])}},wi.prototype._addDefaultHandlers=function(b){var A=this._map,C=A.getCanvasContainer();this._add("mapEvent",new ks(A,b));var I=A.boxZoom=new ju(A,b);this._add("boxZoom",I);var Z=new Zo,ee=new Kl;A.doubleClickZoom=new ws(ee,Z),this._add("tapZoom",Z),this._add("clickZoom",ee);var ae=new Wu;this._add("tapDragZoom",ae);var Ae=A.touchPitch=new jh;this._add("touchPitch",Ae);var at=new ph(b),bt=new Vh(b);A.dragRotate=new Mc(b,at,bt),this._add("mouseRotate",at,["mousePitch"]),this._add("mousePitch",bt,["mouseRotate"]);var Vt=new zl(b),Wt=new Tc(b);A.dragPan=new Df(C,Vt,Wt),this._add("mousePan",Vt),this._add("touchPan",Wt,["touchZoom","touchRotate"]);var $t=new Dv,dr=new iu;A.touchZoomRotate=new tl(C,dr,$t,ae),this._add("touchRotate",$t,["touchPan","touchZoom"]),this._add("touchZoom",dr,["touchPan","touchRotate"]);var hr=A.scrollZoom=new ja(A,this);this._add("scrollZoom",hr,["mousePan"]);var Rr=A.keyboard=new oc;this._add("keyboard",Rr),this._add("blockableMapEvent",new Ni(A));for(var lr=0,Ir=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];lr<Ir.length;lr+=1){var Hr=Ir[lr];b.interactive&&b[Hr]&&A[Hr].enable(b[Hr])}},wi.prototype._add=function(b,A,C){this._handlers.push({handlerName:b,handler:A,allowed:C}),this._handlersById[b]=A},wi.prototype.stop=function(b){if(!this._updatingCamera){for(var A=0,C=this._handlers;A<C.length;A+=1)C[A].handler.reset();this._inertia.clear(),this._fireEvents({},{},b),this._changes=[]}},wi.prototype.isActive=function(){for(var b=0,A=this._handlers;b<A.length;b+=1)if(A[b].handler.isActive())return!0;return!1},wi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},wi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},wi.prototype.isMoving=function(){return!!Tu(this._eventsInProgress)||this.isZooming()},wi.prototype._blockedByActive=function(b,A,C){for(var I in b)if(I!==C&&(!A||A.indexOf(I)<0))return!0;return!1},wi.prototype.handleWindowEvent=function(b){this.handleEvent(b,b.type+"Window")},wi.prototype._getMapTouches=function(b){for(var A=[],C=0,I=b;C<I.length;C+=1){var Z=I[C];this._el.contains(Z.target)&&A.push(Z)}return A},wi.prototype.handleEvent=function(b,A){this._updatingCamera=!0;for(var C=b.type==="renderFrame"?void 0:b,I={needsRenderFrame:!1},Z={},ee={},ae=b.touches?this._getMapTouches(b.touches):void 0,Ae=ae?j.touchPos(this._el,ae):j.mousePos(this._el,b),at=0,bt=this._handlers;at<bt.length;at+=1){var Vt=bt[at],Wt=Vt.handlerName,$t=Vt.handler,dr=Vt.allowed;if($t.isEnabled()){var hr=void 0;this._blockedByActive(ee,dr,Wt)?$t.reset():$t[A||b.type]&&(hr=$t[A||b.type](b,Ae,ae),this.mergeHandlerResult(I,Z,hr,Wt,C),hr&&hr.needsRenderFrame&&this._triggerRenderFrame()),(hr||$t.isActive())&&(ee[Wt]=$t)}}var Rr={};for(var lr in this._previousActiveHandlers)ee[lr]||(Rr[lr]=C);this._previousActiveHandlers=ee,(Object.keys(Rr).length||Qi(I))&&(this._changes.push([I,Z,Rr]),this._triggerRenderFrame()),(Object.keys(ee).length||Qi(I))&&this._map._stop(!0),this._updatingCamera=!1;var Ir=I.cameraAnimation;Ir&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ir(this._map))},wi.prototype.mergeHandlerResult=function(b,A,C,I,Z){if(C){w.extend(b,C);var ee={handlerName:I,originalEvent:C.originalEvent||Z};C.zoomDelta!==void 0&&(A.zoom=ee),C.panDelta!==void 0&&(A.drag=ee),C.pitchDelta!==void 0&&(A.pitch=ee),C.bearingDelta!==void 0&&(A.rotate=ee)}},wi.prototype._applyChanges=function(){for(var b={},A={},C={},I=0,Z=this._changes;I<Z.length;I+=1){var ee=Z[I],ae=ee[0],Ae=ee[1],at=ee[2];ae.panDelta&&(b.panDelta=(b.panDelta||new w.Point(0,0))._add(ae.panDelta)),ae.zoomDelta&&(b.zoomDelta=(b.zoomDelta||0)+ae.zoomDelta),ae.bearingDelta&&(b.bearingDelta=(b.bearingDelta||0)+ae.bearingDelta),ae.pitchDelta&&(b.pitchDelta=(b.pitchDelta||0)+ae.pitchDelta),ae.around!==void 0&&(b.around=ae.around),ae.pinchAround!==void 0&&(b.pinchAround=ae.pinchAround),ae.noInertia&&(b.noInertia=ae.noInertia),w.extend(A,Ae),w.extend(C,at)}this._updateMapTransform(b,A,C),this._changes=[]},wi.prototype._updateMapTransform=function(b,A,C){var I=this._map,Z=I.transform;if(!Qi(b))return this._fireEvents(A,C,!0);var ee=b.panDelta,ae=b.zoomDelta,Ae=b.bearingDelta,at=b.pitchDelta,bt=b.around,Vt=b.pinchAround;Vt!==void 0&&(bt=Vt),I._stop(!0),bt=bt||I.transform.centerPoint;var Wt=Z.pointLocation(ee?bt.sub(ee):bt);Ae&&(Z.bearing+=Ae),at&&(Z.pitch+=at),ae&&(Z.zoom+=ae),Z.setLocationAtPoint(Wt,bt),this._map._update(),b.noInertia||this._inertia.record(b),this._fireEvents(A,C,!0)},wi.prototype._fireEvents=function(b,A,C){var I=this,Z=Tu(this._eventsInProgress),ee=Tu(b),ae={};for(var Ae in b)this._eventsInProgress[Ae]||(ae[Ae+"start"]=b[Ae].originalEvent),this._eventsInProgress[Ae]=b[Ae];for(var at in!Z&&ee&&this._fireEvent("movestart",ee.originalEvent),ae)this._fireEvent(at,ae[at]);for(var bt in ee&&this._fireEvent("move",ee.originalEvent),b)this._fireEvent(bt,b[bt].originalEvent);var Vt,Wt={};for(var $t in this._eventsInProgress){var dr=this._eventsInProgress[$t],hr=dr.handlerName,Rr=dr.originalEvent;this._handlersById[hr].isActive()||(delete this._eventsInProgress[$t],Wt[$t+"end"]=Vt=A[hr]||Rr)}for(var lr in Wt)this._fireEvent(lr,Wt[lr]);var Ir=Tu(this._eventsInProgress);if(C&&(Z||ee)&&!Ir){this._updatingCamera=!0;var Hr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),en=function(_n){return _n!==0&&-I._bearingSnap<_n&&_n<I._bearingSnap};Hr?(en(Hr.bearing||this._map.getBearing())&&(Hr.bearing=0),this._map.easeTo(Hr,{originalEvent:Vt})):(this._map.fire(new w.Event("moveend",{originalEvent:Vt})),en(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},wi.prototype._fireEvent=function(b,A){this._map.fire(new w.Event(b,A?{originalEvent:A}:{}))},wi.prototype._requestFrame=function(){var b=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(A){delete b._frameId,b.handleEvent(new Wh("renderFrame",{timeStamp:A})),b._applyChanges()})},wi.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var wl=function(b){function A(C,I){b.call(this),this._moving=!1,this._zooming=!1,this.transform=C,this._bearingSnap=I.bearingSnap,w.bindAll(["_renderFrameCallback"],this)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.getCenter=function(){return new w.LngLat(this.transform.center.lng,this.transform.center.lat)},A.prototype.setCenter=function(C,I){return this.jumpTo({center:C},I)},A.prototype.panBy=function(C,I,Z){return C=w.Point.convert(C).mult(-1),this.panTo(this.transform.center,w.extend({offset:C},I),Z)},A.prototype.panTo=function(C,I,Z){return this.easeTo(w.extend({center:C},I),Z)},A.prototype.getZoom=function(){return this.transform.zoom},A.prototype.setZoom=function(C,I){return this.jumpTo({zoom:C},I),this},A.prototype.zoomTo=function(C,I,Z){return this.easeTo(w.extend({zoom:C},I),Z)},A.prototype.zoomIn=function(C,I){return this.zoomTo(this.getZoom()+1,C,I),this},A.prototype.zoomOut=function(C,I){return this.zoomTo(this.getZoom()-1,C,I),this},A.prototype.getBearing=function(){return this.transform.bearing},A.prototype.setBearing=function(C,I){return this.jumpTo({bearing:C},I),this},A.prototype.getPadding=function(){return this.transform.padding},A.prototype.setPadding=function(C,I){return this.jumpTo({padding:C},I),this},A.prototype.rotateTo=function(C,I,Z){return this.easeTo(w.extend({bearing:C},I),Z)},A.prototype.resetNorth=function(C,I){return this.rotateTo(0,w.extend({duration:1e3},C),I),this},A.prototype.resetNorthPitch=function(C,I){return this.easeTo(w.extend({bearing:0,pitch:0,duration:1e3},C),I),this},A.prototype.snapToNorth=function(C,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(C,I):this},A.prototype.getPitch=function(){return this.transform.pitch},A.prototype.setPitch=function(C,I){return this.jumpTo({pitch:C},I),this},A.prototype.cameraForBounds=function(C,I){C=w.LngLatBounds.convert(C);var Z=I&&I.bearing||0;return this._cameraForBoxAndBearing(C.getNorthWest(),C.getSouthEast(),Z,I)},A.prototype._cameraForBoxAndBearing=function(C,I,Z,ee){var ae={top:0,bottom:0,right:0,left:0};if(typeof(ee=w.extend({padding:ae,offset:[0,0],maxZoom:this.transform.maxZoom},ee)).padding=="number"){var Ae=ee.padding;ee.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}ee.padding=w.extend(ae,ee.padding);var at=this.transform,bt=at.padding,Vt=at.project(w.LngLat.convert(C)),Wt=at.project(w.LngLat.convert(I)),$t=Vt.rotate(-Z*Math.PI/180),dr=Wt.rotate(-Z*Math.PI/180),hr=new w.Point(Math.max($t.x,dr.x),Math.max($t.y,dr.y)),Rr=new w.Point(Math.min($t.x,dr.x),Math.min($t.y,dr.y)),lr=hr.sub(Rr),Ir=(at.width-(bt.left+bt.right+ee.padding.left+ee.padding.right))/lr.x,Hr=(at.height-(bt.top+bt.bottom+ee.padding.top+ee.padding.bottom))/lr.y;if(!(Hr<0||Ir<0)){var en=Math.min(at.scaleZoom(at.scale*Math.min(Ir,Hr)),ee.maxZoom),_n=typeof ee.offset.x=="number"?new w.Point(ee.offset.x,ee.offset.y):w.Point.convert(ee.offset),pn=new w.Point((ee.padding.left-ee.padding.right)/2,(ee.padding.top-ee.padding.bottom)/2).rotate(Z*Math.PI/180),An=_n.add(pn).mult(at.scale/at.zoomScale(en));return{center:at.unproject(Vt.add(Wt).div(2).sub(An)),zoom:en,bearing:Z}}w.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},A.prototype.fitBounds=function(C,I,Z){return this._fitInternal(this.cameraForBounds(C,I),I,Z)},A.prototype.fitScreenCoordinates=function(C,I,Z,ee,ae){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(w.Point.convert(C)),this.transform.pointLocation(w.Point.convert(I)),Z,ee),ee,ae)},A.prototype._fitInternal=function(C,I,Z){return C?(delete(I=w.extend(C,I)).padding,I.linear?this.easeTo(I,Z):this.flyTo(I,Z)):this},A.prototype.jumpTo=function(C,I){this.stop();var Z=this.transform,ee=!1,ae=!1,Ae=!1;return"zoom"in C&&Z.zoom!==+C.zoom&&(ee=!0,Z.zoom=+C.zoom),C.center!==void 0&&(Z.center=w.LngLat.convert(C.center)),"bearing"in C&&Z.bearing!==+C.bearing&&(ae=!0,Z.bearing=+C.bearing),"pitch"in C&&Z.pitch!==+C.pitch&&(Ae=!0,Z.pitch=+C.pitch),C.padding==null||Z.isPaddingEqual(C.padding)||(Z.padding=C.padding),this.fire(new w.Event("movestart",I)).fire(new w.Event("move",I)),ee&&this.fire(new w.Event("zoomstart",I)).fire(new w.Event("zoom",I)).fire(new w.Event("zoomend",I)),ae&&this.fire(new w.Event("rotatestart",I)).fire(new w.Event("rotate",I)).fire(new w.Event("rotateend",I)),Ae&&this.fire(new w.Event("pitchstart",I)).fire(new w.Event("pitch",I)).fire(new w.Event("pitchend",I)),this.fire(new w.Event("moveend",I))},A.prototype.easeTo=function(C,I){var Z=this;this._stop(!1,C.easeId),((C=w.extend({offset:[0,0],duration:500,easing:w.ease},C)).animate===!1||!C.essential&&w.browser.prefersReducedMotion)&&(C.duration=0);var ee=this.transform,ae=this.getZoom(),Ae=this.getBearing(),at=this.getPitch(),bt=this.getPadding(),Vt="zoom"in C?+C.zoom:ae,Wt="bearing"in C?this._normalizeBearing(C.bearing,Ae):Ae,$t="pitch"in C?+C.pitch:at,dr="padding"in C?C.padding:ee.padding,hr=w.Point.convert(C.offset),Rr=ee.centerPoint.add(hr),lr=ee.pointLocation(Rr),Ir=w.LngLat.convert(C.center||lr);this._normalizeCenter(Ir);var Hr,en,_n=ee.project(lr),pn=ee.project(Ir).sub(_n),An=ee.zoomScale(Vt-ae);C.around&&(Hr=w.LngLat.convert(C.around),en=ee.locationPoint(Hr));var Ln={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Vt!==ae,this._rotating=this._rotating||Ae!==Wt,this._pitching=this._pitching||$t!==at,this._padding=!ee.isPaddingEqual(dr),this._easeId=C.easeId,this._prepareEase(I,C.noMoveStart,Ln),this._ease(function(pi){if(Z._zooming&&(ee.zoom=w.number(ae,Vt,pi)),Z._rotating&&(ee.bearing=w.number(Ae,Wt,pi)),Z._pitching&&(ee.pitch=w.number(at,$t,pi)),Z._padding&&(ee.interpolatePadding(bt,dr,pi),Rr=ee.centerPoint.add(hr)),Hr)ee.setLocationAtPoint(Hr,en);else{var oi=ee.zoomScale(ee.zoom-ae),Pi=Vt>ae?Math.min(2,An):Math.max(.5,An),ta=Math.pow(Pi,1-pi),sa=ee.unproject(_n.add(pn.mult(pi*ta)).mult(oi));ee.setLocationAtPoint(ee.renderWorldCopies?sa.wrap():sa,Rr)}Z._fireMoveEvents(I)},function(pi){Z._afterEase(I,pi)},C),this},A.prototype._prepareEase=function(C,I,Z){Z===void 0&&(Z={}),this._moving=!0,I||Z.moving||this.fire(new w.Event("movestart",C)),this._zooming&&!Z.zooming&&this.fire(new w.Event("zoomstart",C)),this._rotating&&!Z.rotating&&this.fire(new w.Event("rotatestart",C)),this._pitching&&!Z.pitching&&this.fire(new w.Event("pitchstart",C))},A.prototype._fireMoveEvents=function(C){this.fire(new w.Event("move",C)),this._zooming&&this.fire(new w.Event("zoom",C)),this._rotating&&this.fire(new w.Event("rotate",C)),this._pitching&&this.fire(new w.Event("pitch",C))},A.prototype._afterEase=function(C,I){if(!this._easeId||!I||this._easeId!==I){delete this._easeId;var Z=this._zooming,ee=this._rotating,ae=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Z&&this.fire(new w.Event("zoomend",C)),ee&&this.fire(new w.Event("rotateend",C)),ae&&this.fire(new w.Event("pitchend",C)),this.fire(new w.Event("moveend",C))}},A.prototype.flyTo=function(C,I){var Z=this;if(!C.essential&&w.browser.prefersReducedMotion){var ee=w.pick(C,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ee,I)}this.stop(),C=w.extend({offset:[0,0],speed:1.2,curve:1.42,easing:w.ease},C);var ae=this.transform,Ae=this.getZoom(),at=this.getBearing(),bt=this.getPitch(),Vt=this.getPadding(),Wt="zoom"in C?w.clamp(+C.zoom,ae.minZoom,ae.maxZoom):Ae,$t="bearing"in C?this._normalizeBearing(C.bearing,at):at,dr="pitch"in C?+C.pitch:bt,hr="padding"in C?C.padding:ae.padding,Rr=ae.zoomScale(Wt-Ae),lr=w.Point.convert(C.offset),Ir=ae.centerPoint.add(lr),Hr=ae.pointLocation(Ir),en=w.LngLat.convert(C.center||Hr);this._normalizeCenter(en);var _n=ae.project(Hr),pn=ae.project(en).sub(_n),An=C.curve,Ln=Math.max(ae.width,ae.height),pi=Ln/Rr,oi=pn.mag();if("minZoom"in C){var Pi=w.clamp(Math.min(C.minZoom,Ae,Wt),ae.minZoom,ae.maxZoom),ta=Ln/ae.zoomScale(Pi-Ae);An=Math.sqrt(ta/oi*2)}var sa=An*An;function Ki(Ea){var ha=(pi*pi-Ln*Ln+(Ea?-1:1)*sa*sa*oi*oi)/(2*(Ea?pi:Ln)*sa*oi);return Math.log(Math.sqrt(ha*ha+1)-ha)}function _o(Ea){return(Math.exp(Ea)-Math.exp(-Ea))/2}function Bi(Ea){return(Math.exp(Ea)+Math.exp(-Ea))/2}var Ia=Ki(0),La=function(Ea){return Bi(Ia)/Bi(Ia+An*Ea)},Aa=function(Ea){return Ln*((Bi(Ia)*(_o(ha=Ia+An*Ea)/Bi(ha))-_o(Ia))/sa)/oi;var ha},fa=(Ki(1)-Ia)/An;if(Math.abs(oi)<1e-6||!isFinite(fa)){if(Math.abs(Ln-pi)<1e-6)return this.easeTo(C,I);var Ma=pi<Ln?-1:1;fa=Math.abs(Math.log(pi/Ln))/An,Aa=function(){return 0},La=function(Ea){return Math.exp(Ma*An*Ea)}}return C.duration="duration"in C?+C.duration:1e3*fa/("screenSpeed"in C?+C.screenSpeed/An:+C.speed),C.maxDuration&&C.duration>C.maxDuration&&(C.duration=0),this._zooming=!0,this._rotating=at!==$t,this._pitching=dr!==bt,this._padding=!ae.isPaddingEqual(hr),this._prepareEase(I,!1),this._ease(function(Ea){var ha=Ea*fa,Au=1/La(ha);ae.zoom=Ea===1?Wt:Ae+ae.scaleZoom(Au),Z._rotating&&(ae.bearing=w.number(at,$t,Ea)),Z._pitching&&(ae.pitch=w.number(bt,dr,Ea)),Z._padding&&(ae.interpolatePadding(Vt,hr,Ea),Ir=ae.centerPoint.add(lr));var Ls=Ea===1?en:ae.unproject(_n.add(pn.mult(Aa(ha))).mult(Au));ae.setLocationAtPoint(ae.renderWorldCopies?Ls.wrap():Ls,Ir),Z._fireMoveEvents(I)},function(){return Z._afterEase(I)},C),this},A.prototype.isEasing=function(){return!!this._easeFrameId},A.prototype.stop=function(){return this._stop()},A.prototype._stop=function(C,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Z=this._onEaseEnd;delete this._onEaseEnd,Z.call(this,I)}if(!C){var ee=this.handlers;ee&&ee.stop(!1)}return this},A.prototype._ease=function(C,I,Z){Z.animate===!1||Z.duration===0?(C(1),I()):(this._easeStart=w.browser.now(),this._easeOptions=Z,this._onEaseFrame=C,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},A.prototype._renderFrameCallback=function(){var C=Math.min((w.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},A.prototype._normalizeBearing=function(C,I){C=w.wrap(C,-180,180);var Z=Math.abs(C-I);return Math.abs(C-360-I)<Z&&(C-=360),Math.abs(C+360-I)<Z&&(C+=360),C},A.prototype._normalizeCenter=function(C){var I=this.transform;if(I.renderWorldCopies&&!I.lngRange){var Z=C.lng-I.center.lng;C.lng+=Z>180?-360:Z<-180?360:0}},A}(w.Evented),rl=function(b){b===void 0&&(b={}),this.options=b,w.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};rl.prototype.getDefaultPosition=function(){return"bottom-right"},rl.prototype.onAdd=function(b){var A=this.options&&this.options.compact;return this._map=b,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),A&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),A===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},rl.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},rl.prototype._setElementTitle=function(b,A){var C=this._map._getUIString("AttributionControl."+A);b.title=C,b.setAttribute("aria-label",C)},rl.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},rl.prototype._updateEditLink=function(){var b=this._editLink;b||(b=this._editLink=this._container.querySelector(".mapbox-improve-map"));var A=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||w.config.ACCESS_TOKEN}];if(b){var C=A.reduce(function(I,Z,ee){return Z.value&&(I+=Z.key+"="+Z.value+(ee<A.length-1?"&":"")),I},"?");b.href=w.config.FEEDBACK_URL+"/"+C+(this._map._hash?this._map._hash.getHashString(!0):""),b.rel="noopener nofollow",this._setElementTitle(b,"MapFeedback")}},rl.prototype._updateData=function(b){!b||b.sourceDataType!=="metadata"&&b.sourceDataType!=="visibility"&&b.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},rl.prototype._updateAttributions=function(){if(this._map.style){var b=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?b=b.concat(this.options.customAttribution.map(function(Ae){return typeof Ae!="string"?"":Ae})):typeof this.options.customAttribution=="string"&&b.push(this.options.customAttribution)),this._map.style.stylesheet){var A=this._map.style.stylesheet;this.styleOwner=A.owner,this.styleId=A.id}var C=this._map.style.sourceCaches;for(var I in C){var Z=C[I];if(Z.used){var ee=Z.getSource();ee.attribution&&b.indexOf(ee.attribution)<0&&b.push(ee.attribution)}}b.sort(function(Ae,at){return Ae.length-at.length});var ae=(b=b.filter(function(Ae,at){for(var bt=at+1;bt<b.length;bt++)if(b[bt].indexOf(Ae)>=0)return!1;return!0})).join(" | ");ae!==this._attribHTML&&(this._attribHTML=ae,b.length?(this._innerContainer.innerHTML=ae,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},rl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Gu=function(){w.bindAll(["_updateLogo"],this),w.bindAll(["_updateCompact"],this)};Gu.prototype.onAdd=function(b){this._map=b,this._container=j.create("div","mapboxgl-ctrl");var A=j.create("a","mapboxgl-ctrl-logo");return A.target="_blank",A.rel="noopener nofollow",A.href="https://www.mapbox.com/",A.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),A.setAttribute("rel","noopener nofollow"),this._container.appendChild(A),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Gu.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Gu.prototype.getDefaultPosition=function(){return"bottom-left"},Gu.prototype._updateLogo=function(b){b&&b.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Gu.prototype._logoRequired=function(){if(this._map.style){var b=this._map.style.sourceCaches;for(var A in b)if(b[A].getSource().mapbox_logo)return!0;return!1}},Gu.prototype._updateCompact=function(){var b=this._container.children;if(b.length){var A=b[0];this._map.getCanvasContainer().offsetWidth<250?A.classList.add("mapboxgl-compact"):A.classList.remove("mapboxgl-compact")}};var Cs=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Cs.prototype.add=function(b){var A=++this._id;return this._queue.push({callback:b,id:A,cancelled:!1}),A},Cs.prototype.remove=function(b){for(var A=this._currentlyRunning,C=0,I=A?this._queue.concat(A):this._queue;C<I.length;C+=1){var Z=I[C];if(Z.id===b)return void(Z.cancelled=!0)}},Cs.prototype.run=function(b){b===void 0&&(b=0);var A=this._currentlyRunning=this._queue;this._queue=[];for(var C=0,I=A;C<I.length;C+=1){var Z=I[C];if(!Z.cancelled&&(Z.callback(b),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Cs.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var sc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Lf=w.window.HTMLImageElement,dh=w.window.HTMLElement,zo=w.window.ImageBitmap,Xs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Lv=function(b){function A(I){var Z=this;if((I=w.extend({},Xs,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ee=new oo(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(b.call(this,ee,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new Cs,this._controls=[],this._mapId=w.uniqueId(),this._locale=w.extend({},sc,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new w.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=w.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else{if(!(I.container instanceof dh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),w.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Z._update(!1)}),this.on("moveend",function(){return Z._update(!1)}),this.on("zoom",function(){return Z._update(!0)}),w.window!==void 0&&(w.window.addEventListener("online",this._onWindowOnline,!1),w.window.addEventListener("resize",this._onWindowResize,!1),w.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new wi(this,I),this._hash=I.hash&&new vo(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,w.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new rl({customAttribution:I.customAttribution})),this.addControl(new Gu,I.logoPosition),this.on("style.load",function(){Z.transform.unmodified&&Z.jumpTo(Z.style.stylesheet)}),this.on("data",function(ae){Z._update(ae.dataType==="style"),Z.fire(new w.Event(ae.dataType+"data",ae))}),this.on("dataloading",function(ae){Z.fire(new w.Event(ae.dataType+"dataloading",ae))})}b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A;var C={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return A.prototype._getMapId=function(){return this._mapId},A.prototype.addControl=function(I,Z){if(Z===void 0&&(Z=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new w.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ee=I.onAdd(this);this._controls.push(I);var ae=this._controlPositions[Z];return Z.indexOf("bottom")!==-1?ae.insertBefore(ee,ae.firstChild):ae.appendChild(ee),this},A.prototype.removeControl=function(I){if(!I||!I.onRemove)return this.fire(new w.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=this._controls.indexOf(I);return Z>-1&&this._controls.splice(Z,1),I.onRemove(this),this},A.prototype.hasControl=function(I){return this._controls.indexOf(I)>-1},A.prototype.resize=function(I){var Z=this._containerDimensions(),ee=Z[0],ae=Z[1];if(ee===this.transform.width&&ae===this.transform.height)return this;this._resizeCanvas(ee,ae),this.transform.resize(ee,ae),this.painter.resize(ee,ae);var Ae=!this._moving;return Ae&&this.fire(new w.Event("movestart",I)).fire(new w.Event("move",I)),this.fire(new w.Event("resize",I)),Ae&&this.fire(new w.Event("moveend",I)),this},A.prototype.getBounds=function(){return this.transform.getBounds()},A.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},A.prototype.setMaxBounds=function(I){return this.transform.setMaxBounds(w.LngLatBounds.convert(I)),this._update()},A.prototype.setMinZoom=function(I){if((I=I==null?-2:I)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},A.prototype.getMinZoom=function(){return this.transform.minZoom},A.prototype.setMaxZoom=function(I){if((I=I==null?22:I)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")},A.prototype.getMaxZoom=function(){return this.transform.maxZoom},A.prototype.setMinPitch=function(I){if((I=I==null?0:I)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},A.prototype.getMinPitch=function(){return this.transform.minPitch},A.prototype.setMaxPitch=function(I){if((I=I==null?60:I)>60)throw new Error("maxPitch must be less than or equal to 60");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")},A.prototype.getMaxPitch=function(){return this.transform.maxPitch},A.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},A.prototype.setRenderWorldCopies=function(I){return this.transform.renderWorldCopies=I,this._update()},A.prototype.project=function(I){return this.transform.locationPoint(w.LngLat.convert(I))},A.prototype.unproject=function(I){return this.transform.pointLocation(w.Point.convert(I))},A.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},A.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},A.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},A.prototype._createDelegatedListener=function(I,Z,ee){var ae,Ae=this;if(I==="mouseenter"||I==="mouseover"){var at=!1;return{layer:Z,listener:ee,delegates:{mousemove:function(Vt){var Wt=Ae.getLayer(Z)?Ae.queryRenderedFeatures(Vt.point,{layers:[Z]}):[];Wt.length?at||(at=!0,ee.call(Ae,new Es(I,Ae,Vt.originalEvent,{features:Wt}))):at=!1},mouseout:function(){at=!1}}}}if(I==="mouseleave"||I==="mouseout"){var bt=!1;return{layer:Z,listener:ee,delegates:{mousemove:function(Vt){(Ae.getLayer(Z)?Ae.queryRenderedFeatures(Vt.point,{layers:[Z]}):[]).length?bt=!0:bt&&(bt=!1,ee.call(Ae,new Es(I,Ae,Vt.originalEvent)))},mouseout:function(Vt){bt&&(bt=!1,ee.call(Ae,new Es(I,Ae,Vt.originalEvent)))}}}}return{layer:Z,listener:ee,delegates:(ae={},ae[I]=function(Vt){var Wt=Ae.getLayer(Z)?Ae.queryRenderedFeatures(Vt.point,{layers:[Z]}):[];Wt.length&&(Vt.features=Wt,ee.call(Ae,Vt),delete Vt.features)},ae)}},A.prototype.on=function(I,Z,ee){if(ee===void 0)return b.prototype.on.call(this,I,Z);var ae=this._createDelegatedListener(I,Z,ee);for(var Ae in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(ae),ae.delegates)this.on(Ae,ae.delegates[Ae]);return this},A.prototype.once=function(I,Z,ee){if(ee===void 0)return b.prototype.once.call(this,I,Z);var ae=this._createDelegatedListener(I,Z,ee);for(var Ae in ae.delegates)this.once(Ae,ae.delegates[Ae]);return this},A.prototype.off=function(I,Z,ee){var ae=this;return ee===void 0?b.prototype.off.call(this,I,Z):(this._delegatedListeners&&this._delegatedListeners[I]&&function(Ae){for(var at=Ae[I],bt=0;bt<at.length;bt++){var Vt=at[bt];if(Vt.layer===Z&&Vt.listener===ee){for(var Wt in Vt.delegates)ae.off(Wt,Vt.delegates[Wt]);return at.splice(bt,1),ae}}}(this._delegatedListeners),this)},A.prototype.queryRenderedFeatures=function(I,Z){if(!this.style)return[];var ee;if(Z!==void 0||I===void 0||I instanceof w.Point||Array.isArray(I)||(Z=I,I=void 0),Z=Z||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof w.Point||typeof I[0]=="number")ee=[w.Point.convert(I)];else{var ae=w.Point.convert(I[0]),Ae=w.Point.convert(I[1]);ee=[ae,new w.Point(Ae.x,ae.y),Ae,new w.Point(ae.x,Ae.y),ae]}return this.style.queryRenderedFeatures(ee,Z,this.transform)},A.prototype.querySourceFeatures=function(I,Z){return this.style.querySourceFeatures(I,Z)},A.prototype.setStyle=function(I,Z){return(Z=w.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Z)).diff!==!1&&Z.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,Z),this):(this._localIdeographFontFamily=Z.localIdeographFontFamily,this._updateStyle(I,Z))},A.prototype._getUIString=function(I){var Z=this._locale[I];if(Z==null)throw new Error("Missing UI string '"+I+"'");return Z},A.prototype._updateStyle=function(I,Z){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new bs(this,Z||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)},A.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},A.prototype._diffStyle=function(I,Z){var ee=this;if(typeof I=="string"){var ae=this._requestManager.normalizeStyleURL(I),Ae=this._requestManager.transformRequest(ae,w.ResourceType.Style);w.getJSON(Ae,function(at,bt){at?ee.fire(new w.ErrorEvent(at)):bt&&ee._updateDiff(bt,Z)})}else typeof I=="object"&&this._updateDiff(I,Z)},A.prototype._updateDiff=function(I,Z){try{this.style.setState(I)&&this._update(!0)}catch(ee){w.warnOnce("Unable to perform style diff: "+(ee.message||ee.error||ee)+".  Rebuilding the style from scratch."),this._updateStyle(I,Z)}},A.prototype.getStyle=function(){if(this.style)return this.style.serialize()},A.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():w.warnOnce("There is no style added to the map.")},A.prototype.addSource=function(I,Z){return this._lazyInitEmptyStyle(),this.style.addSource(I,Z),this._update(!0)},A.prototype.isSourceLoaded=function(I){var Z=this.style&&this.style.sourceCaches[I];if(Z!==void 0)return Z.loaded();this.fire(new w.ErrorEvent(new Error("There is no source with ID '"+I+"'")))},A.prototype.areTilesLoaded=function(){var I=this.style&&this.style.sourceCaches;for(var Z in I){var ee=I[Z]._tiles;for(var ae in ee){var Ae=ee[ae];if(Ae.state!=="loaded"&&Ae.state!=="errored")return!1}}return!0},A.prototype.addSourceType=function(I,Z,ee){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,Z,ee)},A.prototype.removeSource=function(I){return this.style.removeSource(I),this._update(!0)},A.prototype.getSource=function(I){return this.style.getSource(I)},A.prototype.addImage=function(I,Z,ee){ee===void 0&&(ee={});var ae=ee.pixelRatio;ae===void 0&&(ae=1);var Ae=ee.sdf;Ae===void 0&&(Ae=!1);var at=ee.stretchX,bt=ee.stretchY,Vt=ee.content;if(this._lazyInitEmptyStyle(),Z instanceof Lf||zo&&Z instanceof zo){var Wt=w.browser.getImageData(Z);this.style.addImage(I,{data:new w.RGBAImage({width:Wt.width,height:Wt.height},Wt.data),pixelRatio:ae,stretchX:at,stretchY:bt,content:Vt,sdf:Ae,version:0})}else{if(Z.width===void 0||Z.height===void 0)return this.fire(new w.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $t=Z;this.style.addImage(I,{data:new w.RGBAImage({width:Z.width,height:Z.height},new Uint8Array(Z.data)),pixelRatio:ae,stretchX:at,stretchY:bt,content:Vt,sdf:Ae,version:0,userImage:$t}),$t.onAdd&&$t.onAdd(this,I)}},A.prototype.updateImage=function(I,Z){var ee=this.style.getImage(I);if(!ee)return this.fire(new w.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ae=Z instanceof Lf||zo&&Z instanceof zo?w.browser.getImageData(Z):Z,Ae=ae.width,at=ae.height,bt=ae.data;return Ae===void 0||at===void 0?this.fire(new w.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ae!==ee.data.width||at!==ee.data.height?this.fire(new w.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ee.data.replace(bt,!(Z instanceof Lf||zo&&Z instanceof zo)),void this.style.updateImage(I,ee))},A.prototype.hasImage=function(I){return I?!!this.style.getImage(I):(this.fire(new w.ErrorEvent(new Error("Missing required image id"))),!1)},A.prototype.removeImage=function(I){this.style.removeImage(I)},A.prototype.loadImage=function(I,Z){w.getImage(this._requestManager.transformRequest(I,w.ResourceType.Image),Z)},A.prototype.listImages=function(){return this.style.listImages()},A.prototype.addLayer=function(I,Z){return this._lazyInitEmptyStyle(),this.style.addLayer(I,Z),this._update(!0)},A.prototype.moveLayer=function(I,Z){return this.style.moveLayer(I,Z),this._update(!0)},A.prototype.removeLayer=function(I){return this.style.removeLayer(I),this._update(!0)},A.prototype.getLayer=function(I){return this.style.getLayer(I)},A.prototype.setLayerZoomRange=function(I,Z,ee){return this.style.setLayerZoomRange(I,Z,ee),this._update(!0)},A.prototype.setFilter=function(I,Z,ee){return ee===void 0&&(ee={}),this.style.setFilter(I,Z,ee),this._update(!0)},A.prototype.getFilter=function(I){return this.style.getFilter(I)},A.prototype.setPaintProperty=function(I,Z,ee,ae){return ae===void 0&&(ae={}),this.style.setPaintProperty(I,Z,ee,ae),this._update(!0)},A.prototype.getPaintProperty=function(I,Z){return this.style.getPaintProperty(I,Z)},A.prototype.setLayoutProperty=function(I,Z,ee,ae){return ae===void 0&&(ae={}),this.style.setLayoutProperty(I,Z,ee,ae),this._update(!0)},A.prototype.getLayoutProperty=function(I,Z){return this.style.getLayoutProperty(I,Z)},A.prototype.setLight=function(I,Z){return Z===void 0&&(Z={}),this._lazyInitEmptyStyle(),this.style.setLight(I,Z),this._update(!0)},A.prototype.getLight=function(){return this.style.getLight()},A.prototype.setFeatureState=function(I,Z){return this.style.setFeatureState(I,Z),this._update()},A.prototype.removeFeatureState=function(I,Z){return this.style.removeFeatureState(I,Z),this._update()},A.prototype.getFeatureState=function(I){return this.style.getFeatureState(I)},A.prototype.getContainer=function(){return this._container},A.prototype.getCanvasContainer=function(){return this._canvasContainer},A.prototype.getCanvas=function(){return this._canvas},A.prototype._containerDimensions=function(){var I=0,Z=0;return this._container&&(I=this._container.clientWidth||400,Z=this._container.clientHeight||300),[I,Z]},A.prototype._detectMissingCSS=function(){w.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&w.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},A.prototype._setupContainer=function(){var I=this._container;I.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",I)).style.visibility="hidden",this._detectMissingCSS();var Z=this._canvasContainer=j.create("div","mapboxgl-canvas-container",I);this._interactive&&Z.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",Z),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ee=this._containerDimensions();this._resizeCanvas(ee[0],ee[1]);var ae=this._controlContainer=j.create("div","mapboxgl-control-container",I),Ae=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(at){Ae[at]=j.create("div","mapboxgl-ctrl-"+at,ae)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},A.prototype._resizeCanvas=function(I,Z){var ee=w.browser.devicePixelRatio||1;this._canvas.width=ee*I,this._canvas.height=ee*Z,this._canvas.style.width=I+"px",this._canvas.style.height=Z+"px"},A.prototype._setupPainter=function(){var I=w.extend({},W.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Z=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);Z?(this.painter=new us(Z,this.transform),w.webpSupported.testSupport(Z)):this.fire(new w.ErrorEvent(new Error("Failed to initialize WebGL")))},A.prototype._contextLost=function(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new w.Event("webglcontextlost",{originalEvent:I}))},A.prototype._contextRestored=function(I){this._setupPainter(),this.resize(),this._update(),this.fire(new w.Event("webglcontextrestored",{originalEvent:I}))},A.prototype._onMapScroll=function(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},A.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},A.prototype._update=function(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this},A.prototype._requestRenderFrame=function(I){return this._update(),this._renderTaskQueue.add(I)},A.prototype._cancelRenderFrame=function(I){this._renderTaskQueue.remove(I)},A.prototype._render=function(I){var Z,ee=this,ae=0,Ae=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Z=Ae.createQueryEXT(),Ae.beginQueryEXT(Ae.TIME_ELAPSED_EXT,Z),ae=w.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),!this._removed){var at=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var bt=this.transform.zoom,Vt=w.browser.now();this.style.zoomHistory.update(bt,Vt);var Wt=new w.EvaluationParameters(bt,{now:Vt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$t=Wt.crossFadingFactor();$t===1&&$t===this._crossFadingFactor||(at=!0,this._crossFadingFactor=$t),this.style.update(Wt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new w.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new w.Event("load"))),this.style&&(this.style.hasTransitions()||at)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var dr=w.browser.now()-ae;Ae.endQueryEXT(Ae.TIME_ELAPSED_EXT,Z),setTimeout(function(){var lr=Ae.getQueryObjectEXT(Z,Ae.QUERY_RESULT_EXT)/1e6;Ae.deleteQueryEXT(Z),ee.fire(new w.Event("gpu-timing-frame",{cpuTime:dr,gpuTime:lr}))},50)}if(this.listens("gpu-timing-layer")){var hr=this.painter.collectGpuTimers();setTimeout(function(){var lr=ee.painter.queryGpuTimers(hr);ee.fire(new w.Event("gpu-timing-layer",{layerTimes:lr}))},50)}var Rr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Rr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new w.Event("idle")),!this._loaded||this._fullyLoaded||Rr||(this._fullyLoaded=!0),this}},A.prototype.remove=function(){this._hash&&this._hash.remove();for(var I=0,Z=this._controls;I<Z.length;I+=1)Z[I].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),w.window!==void 0&&(w.window.removeEventListener("resize",this._onWindowResize,!1),w.window.removeEventListener("orientationchange",this._onWindowResize,!1),w.window.removeEventListener("online",this._onWindowOnline,!1));var ee=this.painter.context.gl.getExtension("WEBGL_lose_context");ee&&ee.loseContext(),vh(this._canvasContainer),vh(this._controlContainer),vh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new w.Event("remove"))},A.prototype.triggerRepaint=function(){var I=this;this.style&&!this._frame&&(this._frame=w.browser.frame(function(Z){I._frame=null,I._render(Z)}))},A.prototype._onWindowOnline=function(){this._update()},A.prototype._onWindowResize=function(I){this._trackResize&&this.resize({originalEvent:I})._update()},C.showTileBoundaries.get=function(){return!!this._showTileBoundaries},C.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},C.showPadding.get=function(){return!!this._showPadding},C.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},C.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},C.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},C.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},C.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},C.repaint.get=function(){return!!this._repaint},C.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},C.vertices.get=function(){return!!this._vertices},C.vertices.set=function(I){this._vertices=I,this._update()},A.prototype._setCacheLimits=function(I,Z){w.setCacheLimits(I,Z)},C.version.get=function(){return w.version},Object.defineProperties(A.prototype,C),A}(wl);function vh(b){b.parentNode&&b.parentNode.removeChild(b)}var Ff={showCompass:!0,showZoom:!0,visualizePitch:!1},uc=function(b){var A=this;this.options=w.extend({},Ff,b),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(C){return C.preventDefault()}),this.options.showZoom&&(w.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(C){return A._map.zoomIn({},{originalEvent:C})}),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(C){return A._map.zoomOut({},{originalEvent:C})}),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(w.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(C){A.options.visualizePitch?A._map.resetNorthPitch({},{originalEvent:C}):A._map.resetNorth({},{originalEvent:C})}),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};uc.prototype._updateZoomButtons=function(){var b=this._map.getZoom(),A=b===this._map.getMaxZoom(),C=b===this._map.getMinZoom();this._zoomInButton.disabled=A,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",A.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},uc.prototype._rotateCompassArrow=function(){var b=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=b},uc.prototype.onAdd=function(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ta(this._map,this._compass,this.options.visualizePitch)),this._container},uc.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},uc.prototype._createButton=function(b,A){var C=j.create("button",b,this._container);return C.type="button",C.addEventListener("click",A),C},uc.prototype._setButtonTitle=function(b,A){var C=this._map._getUIString("NavigationControl."+A);b.title=C,b.setAttribute("aria-label",C)};var Ta=function(b,A,C){C===void 0&&(C=!1),this._clickTolerance=10,this.element=A,this.mouseRotate=new ph({clickTolerance:b.dragRotate._mouseRotate._clickTolerance}),this.map=b,C&&(this.mousePitch=new Vh({clickTolerance:b.dragRotate._mousePitch._clickTolerance})),w.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(A,"mousedown",this.mousedown),j.addEventListener(A,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(A,"touchmove",this.touchmove),j.addEventListener(A,"touchend",this.touchend),j.addEventListener(A,"touchcancel",this.reset)};function gh(b,A,C){if(b=new w.LngLat(b.lng,b.lat),A){var I=new w.LngLat(b.lng-360,b.lat),Z=new w.LngLat(b.lng+360,b.lat),ee=C.locationPoint(b).distSqr(A);C.locationPoint(I).distSqr(A)<ee?b=I:C.locationPoint(Z).distSqr(A)<ee&&(b=Z)}for(;Math.abs(b.lng-C.center.lng)>180;){var ae=C.locationPoint(b);if(ae.x>=0&&ae.y>=0&&ae.x<=C.width&&ae.y<=C.height)break;b.lng>C.center.lng?b.lng-=360:b.lng+=360}return b}Ta.prototype.down=function(b,A){this.mouseRotate.mousedown(b,A),this.mousePitch&&this.mousePitch.mousedown(b,A),j.disableDrag()},Ta.prototype.move=function(b,A){var C=this.map,I=this.mouseRotate.mousemoveWindow(b,A);if(I&&I.bearingDelta&&C.setBearing(C.getBearing()+I.bearingDelta),this.mousePitch){var Z=this.mousePitch.mousemoveWindow(b,A);Z&&Z.pitchDelta&&C.setPitch(C.getPitch()+Z.pitchDelta)}},Ta.prototype.off=function(){var b=this.element;j.removeEventListener(b,"mousedown",this.mousedown),j.removeEventListener(b,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(b,"touchmove",this.touchmove),j.removeEventListener(b,"touchend",this.touchend),j.removeEventListener(b,"touchcancel",this.reset),this.offTemp()},Ta.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(w.window,"mousemove",this.mousemove),j.removeEventListener(w.window,"mouseup",this.mouseup)},Ta.prototype.mousedown=function(b){this.down(w.extend({},b,{ctrlKey:!0,preventDefault:function(){return b.preventDefault()}}),j.mousePos(this.element,b)),j.addEventListener(w.window,"mousemove",this.mousemove),j.addEventListener(w.window,"mouseup",this.mouseup)},Ta.prototype.mousemove=function(b){this.move(b,j.mousePos(this.element,b))},Ta.prototype.mouseup=function(b){this.mouseRotate.mouseupWindow(b),this.mousePitch&&this.mousePitch.mouseupWindow(b),this.offTemp()},Ta.prototype.touchstart=function(b){b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,b.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return b.preventDefault()}},this._startPos))},Ta.prototype.touchmove=function(b){b.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,b.targetTouches)[0],this.move({preventDefault:function(){return b.preventDefault()}},this._lastPos))},Ta.prototype.touchend=function(b){b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ta.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Kc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function od(b,A,C){var I=b.classList;for(var Z in Kc)I.remove("mapboxgl-"+C+"-anchor-"+Z);I.add("mapboxgl-"+C+"-anchor-"+A)}var Bf,Gh=function(b){function A(C,I){if(b.call(this),(C instanceof w.window.HTMLElement||I)&&(C=w.extend({element:C},I)),w.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=C&&C.anchor||"center",this._color=C&&C.color||"#3FB1CE",this._scale=C&&C.scale||1,this._draggable=C&&C.draggable||!1,this._clickTolerance=C&&C.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=C&&C.rotation||0,this._rotationAlignment=C&&C.rotationAlignment||"auto",this._pitchAlignment=C&&C.pitchAlignment&&C.pitchAlignment!=="auto"?C.pitchAlignment:this._rotationAlignment,C&&C.element)this._element=C.element,this._offset=w.Point.convert(C&&C.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var Z=j.createNS("http://www.w3.org/2000/svg","svg");Z.setAttributeNS(null,"display","block"),Z.setAttributeNS(null,"height","41px"),Z.setAttributeNS(null,"width","27px"),Z.setAttributeNS(null,"viewBox","0 0 27 41");var ee=j.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");var ae=j.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill-rule","nonzero");var Ae=j.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ae.setAttributeNS(null,"fill","#000000");for(var at=0,bt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];at<bt.length;at+=1){var Vt=bt[at],Wt=j.createNS("http://www.w3.org/2000/svg","ellipse");Wt.setAttributeNS(null,"opacity","0.04"),Wt.setAttributeNS(null,"cx","10.5"),Wt.setAttributeNS(null,"cy","5.80029008"),Wt.setAttributeNS(null,"rx",Vt.rx),Wt.setAttributeNS(null,"ry",Vt.ry),Ae.appendChild(Wt)}var $t=j.createNS("http://www.w3.org/2000/svg","g");$t.setAttributeNS(null,"fill",this._color);var dr=j.createNS("http://www.w3.org/2000/svg","path");dr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$t.appendChild(dr);var hr=j.createNS("http://www.w3.org/2000/svg","g");hr.setAttributeNS(null,"opacity","0.25"),hr.setAttributeNS(null,"fill","#000000");var Rr=j.createNS("http://www.w3.org/2000/svg","path");Rr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),hr.appendChild(Rr);var lr=j.createNS("http://www.w3.org/2000/svg","g");lr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),lr.setAttributeNS(null,"fill","#FFFFFF");var Ir=j.createNS("http://www.w3.org/2000/svg","g");Ir.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Hr=j.createNS("http://www.w3.org/2000/svg","circle");Hr.setAttributeNS(null,"fill","#000000"),Hr.setAttributeNS(null,"opacity","0.25"),Hr.setAttributeNS(null,"cx","5.5"),Hr.setAttributeNS(null,"cy","5.5"),Hr.setAttributeNS(null,"r","5.4999962");var en=j.createNS("http://www.w3.org/2000/svg","circle");en.setAttributeNS(null,"fill","#FFFFFF"),en.setAttributeNS(null,"cx","5.5"),en.setAttributeNS(null,"cy","5.5"),en.setAttributeNS(null,"r","5.4999962"),Ir.appendChild(Hr),Ir.appendChild(en),ae.appendChild(Ae),ae.appendChild($t),ae.appendChild(hr),ae.appendChild(lr),ae.appendChild(Ir),Z.appendChild(ae),Z.setAttributeNS(null,"height",41*this._scale+"px"),Z.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(Z),this._offset=w.Point.convert(C&&C.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(_n){_n.preventDefault()}),this._element.addEventListener("mousedown",function(_n){_n.preventDefault()}),od(this._element,this._anchor,"marker"),this._popup=null}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.addTo=function(C){return this.remove(),this._map=C,C.getCanvasContainer().appendChild(this._element),C.on("move",this._update),C.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},A.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},A.prototype.getLngLat=function(){return this._lngLat},A.prototype.setLngLat=function(C){return this._lngLat=w.LngLat.convert(C),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},A.prototype.getElement=function(){return this._element},A.prototype.setPopup=function(C){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),C){if(!("offset"in C.options)){var I=Math.sqrt(Math.pow(13.5,2)/2);C.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(24.6+I)],"bottom-right":[-I,-1*(24.6+I)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=C,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},A.prototype._onKeyPress=function(C){var I=C.code,Z=C.charCode||C.keyCode;I!=="Space"&&I!=="Enter"&&Z!==32&&Z!==13||this.togglePopup()},A.prototype._onMapClick=function(C){var I=C.originalEvent.target,Z=this._element;this._popup&&(I===Z||Z.contains(I))&&this.togglePopup()},A.prototype.getPopup=function(){return this._popup},A.prototype.togglePopup=function(){var C=this._popup;return C?(C.isOpen()?C.remove():C.addTo(this._map),this):this},A.prototype._update=function(C){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=gh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(I="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Z="rotateX(0deg)":this._pitchAlignment==="map"&&(Z="rotateX("+this._map.getPitch()+"deg)"),C&&C.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,Kc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Z+" "+I)}},A.prototype.getOffset=function(){return this._offset},A.prototype.setOffset=function(C){return this._offset=w.Point.convert(C),this._update(),this},A.prototype._onMove=function(C){if(!this._isDragging){var I=this._clickTolerance||this._map._clickTolerance;this._isDragging=C.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=C.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new w.Event("dragstart"))),this.fire(new w.Event("drag")))},A.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new w.Event("dragend")),this._state="inactive"},A.prototype._addDragHandler=function(C){this._element.contains(C.originalEvent.target)&&(C.preventDefault(),this._positionDelta=C.point.sub(this._pos).add(this._offset),this._pointerdownPos=C.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},A.prototype.setDraggable=function(C){return this._draggable=!!C,this._map&&(C?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},A.prototype.isDraggable=function(){return this._draggable},A.prototype.setRotation=function(C){return this._rotation=C||0,this._update(),this},A.prototype.getRotation=function(){return this._rotation},A.prototype.setRotationAlignment=function(C){return this._rotationAlignment=C||"auto",this._update(),this},A.prototype.getRotationAlignment=function(){return this._rotationAlignment},A.prototype.setPitchAlignment=function(C){return this._pitchAlignment=C&&C!=="auto"?C:this._rotationAlignment,this._update(),this},A.prototype.getPitchAlignment=function(){return this._pitchAlignment},A}(w.Evented),jd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Sn=0,wr=!1,He=function(b){function A(C){b.call(this),this.options=w.extend({},jd,C),w.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.onAdd=function(C){var I;return this._map=C,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),I=this._setupUI,Bf!==void 0?I(Bf):w.window.navigator.permissions!==void 0?w.window.navigator.permissions.query({name:"geolocation"}).then(function(Z){I(Bf=Z.state!=="denied")}):I(Bf=!!w.window.navigator.geolocation),this._container},A.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(w.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Sn=0,wr=!1},A.prototype._isOutOfMapMaxBounds=function(C){var I=this._map.getMaxBounds(),Z=C.coords;return I&&(Z.longitude<I.getWest()||Z.longitude>I.getEast()||Z.latitude<I.getSouth()||Z.latitude>I.getNorth())},A.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},A.prototype._onSuccess=function(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new w.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new w.Event("geolocate",C)),this._finish()}},A.prototype._updateCamera=function(C){var I=new w.LngLat(C.coords.longitude,C.coords.latitude),Z=C.coords.accuracy,ee=this._map.getBearing(),ae=w.extend({bearing:ee},this.options.fitBoundsOptions);this._map.fitBounds(I.toBounds(Z),ae,{geolocateSource:!0})},A.prototype._updateMarker=function(C){if(C){var I=new w.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(I).addTo(this._map),this._userLocationDotMarker.setLngLat(I).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},A.prototype._updateCircleRadius=function(){var C=this._map._container.clientHeight/2,I=this._map.unproject([0,C]),Z=this._map.unproject([1,C]),ee=I.distanceTo(Z),ae=Math.ceil(2*this._accuracy/ee);this._circleElement.style.width=ae+"px",this._circleElement.style.height=ae+"px"},A.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},A.prototype._onError=function(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&wr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new w.Event("error",C)),this._finish()}},A.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},A.prototype._setupUI=function(C){var I=this;if(this._container.addEventListener("contextmenu",function(ae){return ae.preventDefault()}),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",C===!1){w.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Z=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}else{var ee=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ee,this._geolocateButton.setAttribute("aria-label",ee)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Gh(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Gh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ae){ae.geolocateSource||I._watchState!=="ACTIVE_LOCK"||ae.originalEvent&&ae.originalEvent.type==="resize"||(I._watchState="BACKGROUND",I._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),I._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),I.fire(new w.Event("trackuserlocationend")))})},A.prototype.trigger=function(){if(!this._setup)return w.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new w.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Sn--,wr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new w.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new w.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Sn>1?(C={maximumAge:6e5,timeout:0},wr=!0):(C=this.options.positionOptions,wr=!1),this._geolocationWatchID=w.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else w.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},A.prototype._clearWatch=function(){w.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},A}(w.Evented),qc={maxWidth:100,unit:"metric"},er=function(b){this.options=w.extend({},qc,b),w.bindAll(["_onMove","setUnit"],this)};function sd(b,A,C){var I=C&&C.maxWidth||100,Z=b._container.clientHeight/2,ee=b.unproject([0,Z]),ae=b.unproject([I,Z]),Ae=ee.distanceTo(ae);if(C&&C.unit==="imperial"){var at=3.2808*Ae;at>5280?Ys(A,I,at/5280,b._getUIString("ScaleControl.Miles")):Ys(A,I,at,b._getUIString("ScaleControl.Feet"))}else C&&C.unit==="nautical"?Ys(A,I,Ae/1852,b._getUIString("ScaleControl.NauticalMiles")):Ae>=1e3?Ys(A,I,Ae/1e3,b._getUIString("ScaleControl.Kilometers")):Ys(A,I,Ae,b._getUIString("ScaleControl.Meters"))}function Ys(b,A,C,I){var Z,ee,ae,Ae=(Z=C,(ee=Math.pow(10,(""+Math.floor(Z)).length-1))*(ae=(ae=Z/ee)>=10?10:ae>=5?5:ae>=3?3:ae>=2?2:ae>=1?1:function(at){var bt=Math.pow(10,Math.ceil(-Math.log(at)/Math.LN10));return Math.round(at*bt)/bt}(ae)));b.style.width=A*(Ae/C)+"px",b.innerHTML=Ae+"&nbsp;"+I}er.prototype.getDefaultPosition=function(){return"bottom-left"},er.prototype._onMove=function(){sd(this._map,this._container,this.options)},er.prototype.onAdd=function(b){return this._map=b,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},er.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},er.prototype.setUnit=function(b){this.options.unit=b,sd(this._map,this._container,this.options)};var Ul=function(b){this._fullscreen=!1,b&&b.container&&(b.container instanceof w.window.HTMLElement?this._container=b.container:w.warnOnce("Full screen control 'container' must be a DOM element.")),w.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in w.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in w.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in w.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in w.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ul.prototype.onAdd=function(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",w.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ul.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,w.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ul.prototype._checkFullscreenSupport=function(){return!!(w.window.document.fullscreenEnabled||w.window.document.mozFullScreenEnabled||w.window.document.msFullscreenEnabled||w.window.document.webkitFullscreenEnabled)},Ul.prototype._setupUI=function(){var b=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",b).setAttribute("aria-hidden",!0),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),w.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ul.prototype._updateTitle=function(){var b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b},Ul.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ul.prototype._isFullscreen=function(){return this._fullscreen},Ul.prototype._changeIcon=function(){(w.window.document.fullscreenElement||w.window.document.mozFullScreenElement||w.window.document.webkitFullscreenElement||w.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ul.prototype._onClickFullscreen=function(){this._isFullscreen()?w.window.document.exitFullscreen?w.window.document.exitFullscreen():w.window.document.mozCancelFullScreen?w.window.document.mozCancelFullScreen():w.window.document.msExitFullscreen?w.window.document.msExitFullscreen():w.window.document.webkitCancelFullScreen&&w.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var $h={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Cl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ap=function(b){function A(C){b.call(this),this.options=w.extend(Object.create($h),C),w.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return b&&(A.__proto__=b),(A.prototype=Object.create(b&&b.prototype)).constructor=A,A.prototype.addTo=function(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new w.Event("open")),this},A.prototype.isOpen=function(){return!!this._map},A.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new w.Event("close")),this},A.prototype.getLngLat=function(){return this._lngLat},A.prototype.setLngLat=function(C){return this._lngLat=w.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},A.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},A.prototype.getElement=function(){return this._container},A.prototype.setText=function(C){return this.setDOMContent(w.window.document.createTextNode(C))},A.prototype.setHTML=function(C){var I,Z=w.window.document.createDocumentFragment(),ee=w.window.document.createElement("body");for(ee.innerHTML=C;I=ee.firstChild;)Z.appendChild(I);return this.setDOMContent(Z)},A.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},A.prototype.setMaxWidth=function(C){return this.options.maxWidth=C,this._update(),this},A.prototype.setDOMContent=function(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this},A.prototype.addClassName=function(C){this._container&&this._container.classList.add(C)},A.prototype.removeClassName=function(C){this._container&&this._container.classList.remove(C)},A.prototype.setOffset=function(C){return this.options.offset=C,this._update(),this},A.prototype.toggleClassName=function(C){if(this._container)return this._container.classList.toggle(C)},A.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},A.prototype._onMouseUp=function(C){this._update(C.point)},A.prototype._onMouseMove=function(C){this._update(C.point)},A.prototype._onDrag=function(C){this._update(C.point)},A.prototype._update=function(C){var I=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Wt){return I._container.classList.add(Wt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||C)){var Z=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat),ee=this.options.anchor,ae=function Wt($t){if($t){if(typeof $t=="number"){var dr=Math.round(Math.sqrt(.5*Math.pow($t,2)));return{center:new w.Point(0,0),top:new w.Point(0,$t),"top-left":new w.Point(dr,dr),"top-right":new w.Point(-dr,dr),bottom:new w.Point(0,-$t),"bottom-left":new w.Point(dr,-dr),"bottom-right":new w.Point(-dr,-dr),left:new w.Point($t,0),right:new w.Point(-$t,0)}}if($t instanceof w.Point||Array.isArray($t)){var hr=w.Point.convert($t);return{center:hr,top:hr,"top-left":hr,"top-right":hr,bottom:hr,"bottom-left":hr,"bottom-right":hr,left:hr,right:hr}}return{center:w.Point.convert($t.center||[0,0]),top:w.Point.convert($t.top||[0,0]),"top-left":w.Point.convert($t["top-left"]||[0,0]),"top-right":w.Point.convert($t["top-right"]||[0,0]),bottom:w.Point.convert($t.bottom||[0,0]),"bottom-left":w.Point.convert($t["bottom-left"]||[0,0]),"bottom-right":w.Point.convert($t["bottom-right"]||[0,0]),left:w.Point.convert($t.left||[0,0]),right:w.Point.convert($t.right||[0,0])}}return Wt(new w.Point(0,0))}(this.options.offset);if(!ee){var Ae,at=this._container.offsetWidth,bt=this._container.offsetHeight;Ae=Z.y+ae.bottom.y<bt?["top"]:Z.y>this._map.transform.height-bt?["bottom"]:[],Z.x<at/2?Ae.push("left"):Z.x>this._map.transform.width-at/2&&Ae.push("right"),ee=Ae.length===0?"bottom":Ae.join("-")}var Vt=Z.add(ae[ee]).round();j.setTransform(this._container,Kc[ee]+" translate("+Vt.x+"px,"+Vt.y+"px)"),od(this._container,ee,"popup")}},A.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var C=this._container.querySelector(Cl);C&&C.focus()}},A.prototype._onClose=function(){this.remove()},A}(w.Evented),Mp={version:w.version,supported:W,setRTLTextPlugin:w.setRTLTextPlugin,getRTLTextPluginStatus:w.getRTLTextPluginStatus,Map:Lv,NavigationControl:uc,GeolocateControl:He,AttributionControl:rl,ScaleControl:er,FullscreenControl:Ul,Popup:Ap,Marker:Gh,Style:bs,LngLat:w.LngLat,LngLatBounds:w.LngLatBounds,Point:w.Point,MercatorCoordinate:w.MercatorCoordinate,Evented:w.Evented,config:w.config,prewarm:function(){un().acquire(Ft)},clearPrewarmedResources:function(){var b=qn;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Ft),qn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return w.config.ACCESS_TOKEN},set accessToken(b){w.config.ACCESS_TOKEN=b},get baseApiUrl(){return w.config.API_URL},set baseApiUrl(b){w.config.API_URL=b},get workerCount(){return Mn.workerCount},set workerCount(b){Mn.workerCount=b},get maxParallelImageRequests(){return w.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(b){w.config.MAX_PARALLEL_IMAGE_REQUESTS=b},clearStorage:function(b){w.clearTileCache(b)},workerUrl:""};return Mp}),$})},3614:function(ct,N,k){"use strict";ct.exports=K;var $=k(80645);function K(Oe){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Oe)?Oe:new Uint8Array(Oe||0),this.pos=0,this.type=0,this.length=this.buf.length}K.Varint=0,K.Fixed64=1,K.Bytes=2,K.Fixed32=5;var w=65536*65536,W=1/w,j=12,q=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");K.prototype={destroy:function(){this.buf=null},readFields:function(Oe,Qe,ne){for(ne=ne||this.length;this.pos<ne;){var We=this.readVarint(),oe=We>>3,Fe=this.pos;this.type=We&7,Oe(oe,Qe,this),this.pos===Fe&&this.skip(We)}return Qe},readMessage:function(Oe,Qe){return this.readFields(Oe,Qe,this.readVarint()+this.pos)},readFixed32:function(){var Oe=Le(this.buf,this.pos);return this.pos+=4,Oe},readSFixed32:function(){var Oe=ye(this.buf,this.pos);return this.pos+=4,Oe},readFixed64:function(){var Oe=Le(this.buf,this.pos)+Le(this.buf,this.pos+4)*w;return this.pos+=8,Oe},readSFixed64:function(){var Oe=Le(this.buf,this.pos)+ye(this.buf,this.pos+4)*w;return this.pos+=8,Oe},readFloat:function(){var Oe=$.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Oe},readDouble:function(){var Oe=$.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Oe},readVarint:function(Oe){var Qe=this.buf,ne,We;return We=Qe[this.pos++],ne=We&127,We<128||(We=Qe[this.pos++],ne|=(We&127)<<7,We<128)||(We=Qe[this.pos++],ne|=(We&127)<<14,We<128)||(We=Qe[this.pos++],ne|=(We&127)<<21,We<128)?ne:(We=Qe[this.pos],ne|=(We&15)<<28,Q(ne,Oe,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Oe=this.readVarint();return Oe%2===1?(Oe+1)/-2:Oe/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Oe=this.readVarint()+this.pos,Qe=this.pos;return this.pos=Oe,Oe-Qe>=j&&q?je(this.buf,Qe,Oe):Ve(this.buf,Qe,Oe)},readBytes:function(){var Oe=this.readVarint()+this.pos,Qe=this.buf.subarray(this.pos,Oe);return this.pos=Oe,Qe},readPackedVarint:function(Oe,Qe){if(this.type!==K.Bytes)return Oe.push(this.readVarint(Qe));var ne=ie(this);for(Oe=Oe||[];this.pos<ne;)Oe.push(this.readVarint(Qe));return Oe},readPackedSVarint:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readSVarint());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readSVarint());return Oe},readPackedBoolean:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readBoolean());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readBoolean());return Oe},readPackedFloat:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readFloat());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readFloat());return Oe},readPackedDouble:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readDouble());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readDouble());return Oe},readPackedFixed32:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readFixed32());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readFixed32());return Oe},readPackedSFixed32:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readSFixed32());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readSFixed32());return Oe},readPackedFixed64:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readFixed64());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readFixed64());return Oe},readPackedSFixed64:function(Oe){if(this.type!==K.Bytes)return Oe.push(this.readSFixed64());var Qe=ie(this);for(Oe=Oe||[];this.pos<Qe;)Oe.push(this.readSFixed64());return Oe},skip:function(Oe){var Qe=Oe&7;if(Qe===K.Varint)for(;this.buf[this.pos++]>127;);else if(Qe===K.Bytes)this.pos=this.readVarint()+this.pos;else if(Qe===K.Fixed32)this.pos+=4;else if(Qe===K.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Qe)},writeTag:function(Oe,Qe){this.writeVarint(Oe<<3|Qe)},realloc:function(Oe){for(var Qe=this.length||16;Qe<this.pos+Oe;)Qe*=2;if(Qe!==this.length){var ne=new Uint8Array(Qe);ne.set(this.buf),this.buf=ne,this.length=Qe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Oe){this.realloc(4),Se(this.buf,Oe,this.pos),this.pos+=4},writeSFixed32:function(Oe){this.realloc(4),Se(this.buf,Oe,this.pos),this.pos+=4},writeFixed64:function(Oe){this.realloc(8),Se(this.buf,Oe&-1,this.pos),Se(this.buf,Math.floor(Oe*W),this.pos+4),this.pos+=8},writeSFixed64:function(Oe){this.realloc(8),Se(this.buf,Oe&-1,this.pos),Se(this.buf,Math.floor(Oe*W),this.pos+4),this.pos+=8},writeVarint:function(Oe){if(Oe=+Oe||0,Oe>268435455||Oe<0){we(Oe,this);return}this.realloc(4),this.buf[this.pos++]=Oe&127|(Oe>127?128:0),!(Oe<=127)&&(this.buf[this.pos++]=(Oe>>>=7)&127|(Oe>127?128:0),!(Oe<=127)&&(this.buf[this.pos++]=(Oe>>>=7)&127|(Oe>127?128:0),!(Oe<=127)&&(this.buf[this.pos++]=Oe>>>7&127)))},writeSVarint:function(Oe){this.writeVarint(Oe<0?-Oe*2-1:Oe*2)},writeBoolean:function(Oe){this.writeVarint(!!Oe)},writeString:function(Oe){Oe=String(Oe),this.realloc(Oe.length*4),this.pos++;var Qe=this.pos;this.pos=Et(this.buf,Oe,this.pos);var ne=this.pos-Qe;ne>=128&&J(Qe,ne,this),this.pos=Qe-1,this.writeVarint(ne),this.pos+=ne},writeFloat:function(Oe){this.realloc(4),$.write(this.buf,Oe,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Oe){this.realloc(8),$.write(this.buf,Oe,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Oe){var Qe=Oe.length;this.writeVarint(Qe),this.realloc(Qe);for(var ne=0;ne<Qe;ne++)this.buf[this.pos++]=Oe[ne]},writeRawMessage:function(Oe,Qe){this.pos++;var ne=this.pos;Oe(Qe,this);var We=this.pos-ne;We>=128&&J(ne,We,this),this.pos=ne-1,this.writeVarint(We),this.pos+=We},writeMessage:function(Oe,Qe,ne){this.writeTag(Oe,K.Bytes),this.writeRawMessage(Qe,ne)},writePackedVarint:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,M,Qe)},writePackedSVarint:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,E,Qe)},writePackedBoolean:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,ze,Qe)},writePackedFloat:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,ge,Qe)},writePackedDouble:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,be,Qe)},writePackedFixed32:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,Be,Qe)},writePackedSFixed32:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,Ue,Qe)},writePackedFixed64:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,it,Qe)},writePackedSFixed64:function(Oe,Qe){Qe.length&&this.writeMessage(Oe,ht,Qe)},writeBytesField:function(Oe,Qe){this.writeTag(Oe,K.Bytes),this.writeBytes(Qe)},writeFixed32Field:function(Oe,Qe){this.writeTag(Oe,K.Fixed32),this.writeFixed32(Qe)},writeSFixed32Field:function(Oe,Qe){this.writeTag(Oe,K.Fixed32),this.writeSFixed32(Qe)},writeFixed64Field:function(Oe,Qe){this.writeTag(Oe,K.Fixed64),this.writeFixed64(Qe)},writeSFixed64Field:function(Oe,Qe){this.writeTag(Oe,K.Fixed64),this.writeSFixed64(Qe)},writeVarintField:function(Oe,Qe){this.writeTag(Oe,K.Varint),this.writeVarint(Qe)},writeSVarintField:function(Oe,Qe){this.writeTag(Oe,K.Varint),this.writeSVarint(Qe)},writeStringField:function(Oe,Qe){this.writeTag(Oe,K.Bytes),this.writeString(Qe)},writeFloatField:function(Oe,Qe){this.writeTag(Oe,K.Fixed32),this.writeFloat(Qe)},writeDoubleField:function(Oe,Qe){this.writeTag(Oe,K.Fixed64),this.writeDouble(Qe)},writeBooleanField:function(Oe,Qe){this.writeVarintField(Oe,!!Qe)}};function Q(Oe,Qe,ne){var We=ne.buf,oe,Fe;if(Fe=We[ne.pos++],oe=(Fe&112)>>4,Fe<128||(Fe=We[ne.pos++],oe|=(Fe&127)<<3,Fe<128)||(Fe=We[ne.pos++],oe|=(Fe&127)<<10,Fe<128)||(Fe=We[ne.pos++],oe|=(Fe&127)<<17,Fe<128)||(Fe=We[ne.pos++],oe|=(Fe&127)<<24,Fe<128)||(Fe=We[ne.pos++],oe|=(Fe&1)<<31,Fe<128))return te(Oe,oe,Qe);throw new Error("Expected varint not more than 10 bytes")}function ie(Oe){return Oe.type===K.Bytes?Oe.readVarint()+Oe.pos:Oe.pos+1}function te(Oe,Qe,ne){return ne?Qe*4294967296+(Oe>>>0):(Qe>>>0)*4294967296+(Oe>>>0)}function we(Oe,Qe){var ne,We;if(Oe>=0?(ne=Oe%4294967296|0,We=Oe/4294967296|0):(ne=~(-Oe%4294967296),We=~(-Oe/4294967296),ne^4294967295?ne=ne+1|0:(ne=0,We=We+1|0)),Oe>=18446744073709552e3||Oe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Qe.realloc(10),fe(ne,We,Qe),ce(We,Qe)}function fe(Oe,Qe,ne){ne.buf[ne.pos++]=Oe&127|128,Oe>>>=7,ne.buf[ne.pos++]=Oe&127|128,Oe>>>=7,ne.buf[ne.pos++]=Oe&127|128,Oe>>>=7,ne.buf[ne.pos++]=Oe&127|128,Oe>>>=7,ne.buf[ne.pos]=Oe&127}function ce(Oe,Qe){var ne=(Oe&7)<<4;Qe.buf[Qe.pos++]|=ne|((Oe>>>=3)?128:0),Oe&&(Qe.buf[Qe.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(Qe.buf[Qe.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(Qe.buf[Qe.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(Qe.buf[Qe.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(Qe.buf[Qe.pos++]=Oe&127)))))}function J(Oe,Qe,ne){var We=Qe<=16383?1:Qe<=2097151?2:Qe<=268435455?3:Math.floor(Math.log(Qe)/(Math.LN2*7));ne.realloc(We);for(var oe=ne.pos-1;oe>=Oe;oe--)ne.buf[oe+We]=ne.buf[oe]}function M(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeVarint(Oe[ne])}function E(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeSVarint(Oe[ne])}function ge(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeFloat(Oe[ne])}function be(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeDouble(Oe[ne])}function ze(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeBoolean(Oe[ne])}function Be(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeFixed32(Oe[ne])}function Ue(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeSFixed32(Oe[ne])}function it(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeFixed64(Oe[ne])}function ht(Oe,Qe){for(var ne=0;ne<Oe.length;ne++)Qe.writeSFixed64(Oe[ne])}function Le(Oe,Qe){return(Oe[Qe]|Oe[Qe+1]<<8|Oe[Qe+2]<<16)+Oe[Qe+3]*16777216}function Se(Oe,Qe,ne){Oe[ne]=Qe,Oe[ne+1]=Qe>>>8,Oe[ne+2]=Qe>>>16,Oe[ne+3]=Qe>>>24}function ye(Oe,Qe){return(Oe[Qe]|Oe[Qe+1]<<8|Oe[Qe+2]<<16)+(Oe[Qe+3]<<24)}function Ve(Oe,Qe,ne){for(var We="",oe=Qe;oe<ne;){var Fe=Oe[oe],st=null,Ce=Fe>239?4:Fe>223?3:Fe>191?2:1;if(oe+Ce>ne)break;var De,tt,_e;Ce===1?Fe<128&&(st=Fe):Ce===2?(De=Oe[oe+1],(De&192)===128&&(st=(Fe&31)<<6|De&63,st<=127&&(st=null))):Ce===3?(De=Oe[oe+1],tt=Oe[oe+2],(De&192)===128&&(tt&192)===128&&(st=(Fe&15)<<12|(De&63)<<6|tt&63,(st<=2047||st>=55296&&st<=57343)&&(st=null))):Ce===4&&(De=Oe[oe+1],tt=Oe[oe+2],_e=Oe[oe+3],(De&192)===128&&(tt&192)===128&&(_e&192)===128&&(st=(Fe&15)<<18|(De&63)<<12|(tt&63)<<6|_e&63,(st<=65535||st>=1114112)&&(st=null))),st===null?(st=65533,Ce=1):st>65535&&(st-=65536,We+=String.fromCharCode(st>>>10&1023|55296),st=56320|st&1023),We+=String.fromCharCode(st),oe+=Ce}return We}function je(Oe,Qe,ne){return q.decode(Oe.subarray(Qe,ne))}function Et(Oe,Qe,ne){for(var We=0,oe,Fe;We<Qe.length;We++){if(oe=Qe.charCodeAt(We),oe>55295&&oe<57344)if(Fe)if(oe<56320){Oe[ne++]=239,Oe[ne++]=191,Oe[ne++]=189,Fe=oe;continue}else oe=Fe-55296<<10|oe-56320|65536,Fe=null;else{oe>56319||We+1===Qe.length?(Oe[ne++]=239,Oe[ne++]=191,Oe[ne++]=189):Fe=oe;continue}else Fe&&(Oe[ne++]=239,Oe[ne++]=191,Oe[ne++]=189,Fe=null);oe<128?Oe[ne++]=oe:(oe<2048?Oe[ne++]=oe>>6|192:(oe<65536?Oe[ne++]=oe>>12|224:(Oe[ne++]=oe>>18|240,Oe[ne++]=oe>>12&63|128),Oe[ne++]=oe>>6&63|128),Oe[ne++]=oe&63|128)}return ne}},73807:function(ct){"use strict";var N=ct.exports;ct.exports.isNumber=function(k){return typeof k=="number"},ct.exports.findMin=function(k){if(k.length===0)return 1/0;for(var $=k[0],K=1;K<k.length;K++)$=Math.min($,k[K]);return $},ct.exports.findMax=function(k){if(k.length===0)return-1/0;for(var $=k[0],K=1;K<k.length;K++)$=Math.max($,k[K]);return $},ct.exports.findMinMulti=function(k){for(var $=N.findMin(k[0]),K=1;K<k.length;K++)$=Math.min($,N.findMin(k[K]));return $},ct.exports.findMaxMulti=function(k){for(var $=N.findMax(k[0]),K=1;K<k.length;K++)$=Math.max($,N.findMax(k[K]));return $},ct.exports.inside=function(k,$,K){return k<=K&&K<=$}},53843:function(ct,N,k){"use strict";var $=50,K=2,w=Math.log(2),W=ct.exports,j=k(73807);function q(ie){return 1-Math.abs(ie)}ct.exports.getUnifiedMinMax=function(ie,te){return W.getUnifiedMinMaxMulti([ie],te)},ct.exports.getUnifiedMinMaxMulti=function(ie,te){te=te||{};var we=!1,fe=!1,ce=j.isNumber(te.width)?te.width:K,J=j.isNumber(te.size)?te.size:$,M=j.isNumber(te.min)?te.min:(we=!0,j.findMinMulti(ie)),E=j.isNumber(te.max)?te.max:(fe=!0,j.findMaxMulti(ie)),ge=E-M,be=ge/(J-1);return we&&(M=M-2*ce*be),fe&&(E=E+2*ce*be),{min:M,max:E}},ct.exports.create=function(ie,te){if(te=te||{},!ie||ie.length===0)return[];var we=j.isNumber(te.size)?te.size:$,fe=j.isNumber(te.width)?te.width:K,ce=W.getUnifiedMinMax(ie,{size:we,width:fe,min:te.min,max:te.max}),J=ce.min,M=ce.max,E=M-J,ge=E/(we-1);if(E===0)return[{x:J,y:1}];for(var be=[],ze=0;ze<we;ze++)be.push({x:J+ze*ge,y:0});var Be=function(je){return Math.floor((je-J)/ge)},Ue=Q(q,fe),it=Ue[fe],ht=Ue[fe-1]-Ue[fe-2],Le=0;ie.forEach(function(je){var Et=Be(je);if(!(Et+fe<0||Et-fe>=be.length)){var Oe=Math.max(Et-fe,0),Qe=Et,ne=Math.min(Et+fe,be.length-1),We=Oe-(Et-fe),oe=Et+fe-ne,Fe=Ue[-fe-1+We]||0,st=Ue[-fe-1+oe]||0,Ce=it/(it-Fe-st);We>0&&(Le+=Ce*(We-1)*ht);var De=Math.max(0,Et-fe+1);j.inside(0,be.length-1,De)&&(be[De].y+=Ce*1*ht),j.inside(0,be.length-1,Qe+1)&&(be[Qe+1].y-=Ce*2*ht),j.inside(0,be.length-1,ne+1)&&(be[ne+1].y+=Ce*1*ht)}});var Se=Le,ye=0,Ve=0;return be.forEach(function(je){ye+=je.y,Se+=ye,je.y=Se,Ve+=Se}),Ve>0&&be.forEach(function(je){je.y/=Ve}),be};function Q(ie,te){for(var we={},fe=0,ce=-te;ce<=te;ce++)fe+=ie(ce/te),we[ce]=fe;return we}ct.exports.getExpectedValueFromPdf=function(ie){if(!(!ie||ie.length===0)){var te=0;return ie.forEach(function(we){te+=we.x*we.y}),te}},ct.exports.getXWithLeftTailArea=function(ie,te){if(!(!ie||ie.length===0)){for(var we=0,fe=0,ce=0;ce<ie.length&&(fe=ce,we+=ie[ce].y,!(we>=te));ce++);return ie[fe].x}},ct.exports.getPerplexity=function(ie){if(!(!ie||ie.length===0)){var te=0;return ie.forEach(function(we){var fe=Math.log(we.y);isFinite(fe)&&(te+=we.y*fe)}),te=-te/w,Math.pow(2,te)}}},32676:function(ct,N,k){var $=k(34155);(function(K,w){ct.exports=w()})(this,function(){"use strict";function K(le,H){var re={label:0,sent:function(){if(Tt[0]&1)throw Tt[1];return Tt[1]},trys:[],ops:[]},Re,Ke,Tt,or;return or={next:jt(0),throw:jt(1),return:jt(2)},typeof Symbol=="function"&&(or[Symbol.iterator]=function(){return this}),or;function jt(It){return function(de){return wt([It,de])}}function wt(It){if(Re)throw new TypeError("Generator is already executing.");for(;re;)try{if(Re=1,Ke&&(Tt=It[0]&2?Ke.return:It[0]?Ke.throw||((Tt=Ke.return)&&Tt.call(Ke),0):Ke.next)&&!(Tt=Tt.call(Ke,It[1])).done)return Tt;switch(Ke=0,Tt&&(It=[It[0]&2,Tt.value]),It[0]){case 0:case 1:Tt=It;break;case 4:return re.label++,{value:It[1],done:!1};case 5:re.label++,Ke=It[1],It=[0];continue;case 7:It=re.ops.pop(),re.trys.pop();continue;default:if(Tt=re.trys,!(Tt=Tt.length>0&&Tt[Tt.length-1])&&(It[0]===6||It[0]===2)){re=0;continue}if(It[0]===3&&(!Tt||It[1]>Tt[0]&&It[1]<Tt[3])){re.label=It[1];break}if(It[0]===6&&re.label<Tt[1]){re.label=Tt[1],Tt=It;break}if(Tt&&re.label<Tt[2]){re.label=Tt[2],re.ops.push(It);break}Tt[2]&&re.ops.pop(),re.trys.pop();continue}It=H.call(le,re)}catch(de){It=[6,de],Ke=0}finally{Re=Tt=0}if(It[0]&5)throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}}var w=function(){function le(H,re){this.next=null,this.key=H,this.data=re,this.left=null,this.right=null}return le}();function W(le,H){return le>H?1:le<H?-1:0}function j(le,H,re){for(var Re=new w(null,null),Ke=Re,Tt=Re;;){var or=re(le,H.key);if(or<0){if(H.left===null)break;if(re(le,H.left.key)<0){var jt=H.left;if(H.left=jt.right,jt.right=H,H=jt,H.left===null)break}Tt.left=H,Tt=H,H=H.left}else if(or>0){if(H.right===null)break;if(re(le,H.right.key)>0){var jt=H.right;if(H.right=jt.left,jt.left=H,H=jt,H.right===null)break}Ke.right=H,Ke=H,H=H.right}else break}return Ke.right=H.left,Tt.left=H.right,H.left=Re.right,H.right=Re.left,H}function q(le,H,re,Re){var Ke=new w(le,H);if(re===null)return Ke.left=Ke.right=null,Ke;re=j(le,re,Re);var Tt=Re(le,re.key);return Tt<0?(Ke.left=re.left,Ke.right=re,re.left=null):Tt>=0&&(Ke.right=re.right,Ke.left=re,re.right=null),Ke}function Q(le,H,re){var Re=null,Ke=null;if(H){H=j(le,H,re);var Tt=re(H.key,le);Tt===0?(Re=H.left,Ke=H.right):Tt<0?(Ke=H.right,H.right=null,Re=H):(Re=H.left,H.left=null,Ke=H)}return{left:Re,right:Ke}}function ie(le,H,re){return H===null?le:(le===null||(H=j(le.key,H,re),H.left=le),H)}function te(le,H,re,Re,Ke){if(le){Re(""+H+(re?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Ke(le)+`
`);var Tt=H+(re?"    ":"\u2502   ");le.left&&te(le.left,Tt,!1,Re,Ke),le.right&&te(le.right,Tt,!0,Re,Ke)}}var we=function(){function le(H){H===void 0&&(H=W),this._root=null,this._size=0,this._comparator=H}return le.prototype.insert=function(H,re){return this._size++,this._root=q(H,re,this._root,this._comparator)},le.prototype.add=function(H,re){var Re=new w(H,re);this._root===null&&(Re.left=Re.right=null,this._size++,this._root=Re);var Ke=this._comparator,Tt=j(H,this._root,Ke),or=Ke(H,Tt.key);return or===0?this._root=Tt:(or<0?(Re.left=Tt.left,Re.right=Tt,Tt.left=null):or>0&&(Re.right=Tt.right,Re.left=Tt,Tt.right=null),this._size++,this._root=Re),this._root},le.prototype.remove=function(H){this._root=this._remove(H,this._root,this._comparator)},le.prototype._remove=function(H,re,Re){var Ke;if(re===null)return null;re=j(H,re,Re);var Tt=Re(H,re.key);return Tt===0?(re.left===null?Ke=re.right:(Ke=j(H,re.left,Re),Ke.right=re.right),this._size--,Ke):re},le.prototype.pop=function(){var H=this._root;if(H){for(;H.left;)H=H.left;return this._root=j(H.key,this._root,this._comparator),this._root=this._remove(H.key,this._root,this._comparator),{key:H.key,data:H.data}}return null},le.prototype.findStatic=function(H){for(var re=this._root,Re=this._comparator;re;){var Ke=Re(H,re.key);if(Ke===0)return re;Ke<0?re=re.left:re=re.right}return null},le.prototype.find=function(H){return this._root&&(this._root=j(H,this._root,this._comparator),this._comparator(H,this._root.key)!==0)?null:this._root},le.prototype.contains=function(H){for(var re=this._root,Re=this._comparator;re;){var Ke=Re(H,re.key);if(Ke===0)return!0;Ke<0?re=re.left:re=re.right}return!1},le.prototype.forEach=function(H,re){for(var Re=this._root,Ke=[],Tt=!1;!Tt;)Re!==null?(Ke.push(Re),Re=Re.left):Ke.length!==0?(Re=Ke.pop(),H.call(re,Re),Re=Re.right):Tt=!0;return this},le.prototype.range=function(H,re,Re,Ke){for(var Tt=[],or=this._comparator,jt=this._root,wt;Tt.length!==0||jt;)if(jt)Tt.push(jt),jt=jt.left;else{if(jt=Tt.pop(),wt=or(jt.key,re),wt>0)break;if(or(jt.key,H)>=0&&Re.call(Ke,jt))return this;jt=jt.right}return this},le.prototype.keys=function(){var H=[];return this.forEach(function(re){var Re=re.key;return H.push(Re)}),H},le.prototype.values=function(){var H=[];return this.forEach(function(re){var Re=re.data;return H.push(Re)}),H},le.prototype.min=function(){return this._root?this.minNode(this._root).key:null},le.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},le.prototype.minNode=function(H){if(H===void 0&&(H=this._root),H)for(;H.left;)H=H.left;return H},le.prototype.maxNode=function(H){if(H===void 0&&(H=this._root),H)for(;H.right;)H=H.right;return H},le.prototype.at=function(H){for(var re=this._root,Re=!1,Ke=0,Tt=[];!Re;)if(re)Tt.push(re),re=re.left;else if(Tt.length>0){if(re=Tt.pop(),Ke===H)return re;Ke++,re=re.right}else Re=!0;return null},le.prototype.next=function(H){var re=this._root,Re=null;if(H.right){for(Re=H.right;Re.left;)Re=Re.left;return Re}for(var Ke=this._comparator;re;){var Tt=Ke(H.key,re.key);if(Tt===0)break;Tt<0?(Re=re,re=re.left):re=re.right}return Re},le.prototype.prev=function(H){var re=this._root,Re=null;if(H.left!==null){for(Re=H.left;Re.right;)Re=Re.right;return Re}for(var Ke=this._comparator;re;){var Tt=Ke(H.key,re.key);if(Tt===0)break;Tt<0?re=re.left:(Re=re,re=re.right)}return Re},le.prototype.clear=function(){return this._root=null,this._size=0,this},le.prototype.toList=function(){return J(this._root)},le.prototype.load=function(H,re,Re){re===void 0&&(re=[]),Re===void 0&&(Re=!1);var Ke=H.length,Tt=this._comparator;if(Re&&ge(H,re,0,Ke-1,Tt),this._root===null)this._root=fe(H,re,0,Ke),this._size=Ke;else{var or=E(this.toList(),ce(H,re),Tt);Ke=this._size+Ke,this._root=M({head:or},0,Ke)}return this},le.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(le.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),le.prototype.toString=function(H){H===void 0&&(H=function(Re){return String(Re.key)});var re=[];return te(this._root,"",!0,function(Re){return re.push(Re)},H),re.join("")},le.prototype.update=function(H,re,Re){var Ke=this._comparator,Tt=Q(H,this._root,Ke),or=Tt.left,jt=Tt.right;Ke(H,re)<0?jt=q(re,Re,jt,Ke):or=q(re,Re,or,Ke),this._root=ie(or,jt,Ke)},le.prototype.split=function(H){return Q(H,this._root,this._comparator)},le.prototype[Symbol.iterator]=function(){var H,re,Re;return K(this,function(Ke){switch(Ke.label){case 0:H=this._root,re=[],Re=!1,Ke.label=1;case 1:return Re?[3,6]:H===null?[3,2]:(re.push(H),H=H.left,[3,5]);case 2:return re.length===0?[3,4]:(H=re.pop(),[4,H]);case 3:return Ke.sent(),H=H.right,[3,5];case 4:Re=!0,Ke.label=5;case 5:return[3,1];case 6:return[2]}})},le}();function fe(le,H,re,Re){var Ke=Re-re;if(Ke>0){var Tt=re+Math.floor(Ke/2),or=le[Tt],jt=H[Tt],wt=new w(or,jt);return wt.left=fe(le,H,re,Tt),wt.right=fe(le,H,Tt+1,Re),wt}return null}function ce(le,H){for(var re=new w(null,null),Re=re,Ke=0;Ke<le.length;Ke++)Re=Re.next=new w(le[Ke],H[Ke]);return Re.next=null,re.next}function J(le){for(var H=le,re=[],Re=!1,Ke=new w(null,null),Tt=Ke;!Re;)H?(re.push(H),H=H.left):re.length>0?(H=Tt=Tt.next=re.pop(),H=H.right):Re=!0;return Tt.next=null,Ke.next}function M(le,H,re){var Re=re-H;if(Re>0){var Ke=H+Math.floor(Re/2),Tt=M(le,H,Ke),or=le.head;return or.left=Tt,le.head=le.head.next,or.right=M(le,Ke+1,re),or}return null}function E(le,H,re){for(var Re=new w(null,null),Ke=Re,Tt=le,or=H;Tt!==null&&or!==null;)re(Tt.key,or.key)<0?(Ke.next=Tt,Tt=Tt.next):(Ke.next=or,or=or.next),Ke=Ke.next;return Tt!==null?Ke.next=Tt:or!==null&&(Ke.next=or),Re.next}function ge(le,H,re,Re,Ke){if(!(re>=Re)){for(var Tt=le[re+Re>>1],or=re-1,jt=Re+1;;){do or++;while(Ke(le[or],Tt)<0);do jt--;while(Ke(le[jt],Tt)>0);if(or>=jt)break;var wt=le[or];le[or]=le[jt],le[jt]=wt,wt=H[or],H[or]=H[jt],H[jt]=wt}ge(le,H,re,jt,Ke),ge(le,H,jt+1,Re,Ke)}}const be=(le,H)=>le.ll.x<=H.x&&H.x<=le.ur.x&&le.ll.y<=H.y&&H.y<=le.ur.y,ze=(le,H)=>{if(H.ur.x<le.ll.x||le.ur.x<H.ll.x||H.ur.y<le.ll.y||le.ur.y<H.ll.y)return null;const re=le.ll.x<H.ll.x?H.ll.x:le.ll.x,Re=le.ur.x<H.ur.x?le.ur.x:H.ur.x,Ke=le.ll.y<H.ll.y?H.ll.y:le.ll.y,Tt=le.ur.y<H.ur.y?le.ur.y:H.ur.y;return{ll:{x:re,y:Ke},ur:{x:Re,y:Tt}}};let Be=Number.EPSILON;Be===void 0&&(Be=Math.pow(2,-52));const Ue=Be*Be,it=(le,H)=>{if(-Be<le&&le<Be&&-Be<H&&H<Be)return 0;const re=le-H;return re*re<Ue*le*H?0:le<H?-1:1};class ht{constructor(){this.reset()}reset(){this.xRounder=new Le,this.yRounder=new Le}round(H,re){return{x:this.xRounder.round(H),y:this.yRounder.round(re)}}}class Le{constructor(){this.tree=new we,this.round(0)}round(H){const re=this.tree.add(H),Re=this.tree.prev(re);if(Re!==null&&it(re.key,Re.key)===0)return this.tree.remove(H),Re.key;const Ke=this.tree.next(re);return Ke!==null&&it(re.key,Ke.key)===0?(this.tree.remove(H),Ke.key):H}}const Se=new ht,ye=11102230246251565e-32,Ve=134217729,je=(3+8*ye)*ye;function Et(le,H,re,Re,Ke){let Tt,or,jt,wt,It=H[0],de=Re[0],pe=0,Me=0;de>It==de>-It?(Tt=It,It=H[++pe]):(Tt=de,de=Re[++Me]);let et=0;if(pe<le&&Me<re)for(de>It==de>-It?(or=It+Tt,jt=Tt-(or-It),It=H[++pe]):(or=de+Tt,jt=Tt-(or-de),de=Re[++Me]),Tt=or,jt!==0&&(Ke[et++]=jt);pe<le&&Me<re;)de>It==de>-It?(or=Tt+It,wt=or-Tt,jt=Tt-(or-wt)+(It-wt),It=H[++pe]):(or=Tt+de,wt=or-Tt,jt=Tt-(or-wt)+(de-wt),de=Re[++Me]),Tt=or,jt!==0&&(Ke[et++]=jt);for(;pe<le;)or=Tt+It,wt=or-Tt,jt=Tt-(or-wt)+(It-wt),It=H[++pe],Tt=or,jt!==0&&(Ke[et++]=jt);for(;Me<re;)or=Tt+de,wt=or-Tt,jt=Tt-(or-wt)+(de-wt),de=Re[++Me],Tt=or,jt!==0&&(Ke[et++]=jt);return(Tt!==0||et===0)&&(Ke[et++]=Tt),et}function Oe(le,H){let re=H[0];for(let Re=1;Re<le;Re++)re+=H[Re];return re}function Qe(le){return new Float64Array(le)}const ne=(3+16*ye)*ye,We=(2+12*ye)*ye,oe=(9+64*ye)*ye*ye,Fe=Qe(4),st=Qe(8),Ce=Qe(12),De=Qe(16),tt=Qe(4);function _e(le,H,re,Re,Ke,Tt,or){let jt,wt,It,de,pe,Me,et,St,Gt,gr,At,ot,Ot,yr,kr,Ft,Mn,qn;const ri=le-Ke,un=re-Ke,Yn=H-Tt,jn=Re-Tt;yr=ri*jn,Me=Ve*ri,et=Me-(Me-ri),St=ri-et,Me=Ve*jn,Gt=Me-(Me-jn),gr=jn-Gt,kr=St*gr-(yr-et*Gt-St*Gt-et*gr),Ft=Yn*un,Me=Ve*Yn,et=Me-(Me-Yn),St=Yn-et,Me=Ve*un,Gt=Me-(Me-un),gr=un-Gt,Mn=St*gr-(Ft-et*Gt-St*Gt-et*gr),At=kr-Mn,pe=kr-At,Fe[0]=kr-(At+pe)+(pe-Mn),ot=yr+At,pe=ot-yr,Ot=yr-(ot-pe)+(At-pe),At=Ot-Ft,pe=Ot-At,Fe[1]=Ot-(At+pe)+(pe-Ft),qn=ot+At,pe=qn-ot,Fe[2]=ot-(qn-pe)+(At-pe),Fe[3]=qn;let Kn=Oe(4,Fe),aa=We*or;if(Kn>=aa||-Kn>=aa||(pe=le-ri,jt=le-(ri+pe)+(pe-Ke),pe=re-un,It=re-(un+pe)+(pe-Ke),pe=H-Yn,wt=H-(Yn+pe)+(pe-Tt),pe=Re-jn,de=Re-(jn+pe)+(pe-Tt),jt===0&&wt===0&&It===0&&de===0)||(aa=oe*or+je*Math.abs(Kn),Kn+=ri*de+jn*jt-(Yn*It+un*wt),Kn>=aa||-Kn>=aa))return Kn;yr=jt*jn,Me=Ve*jt,et=Me-(Me-jt),St=jt-et,Me=Ve*jn,Gt=Me-(Me-jn),gr=jn-Gt,kr=St*gr-(yr-et*Gt-St*Gt-et*gr),Ft=wt*un,Me=Ve*wt,et=Me-(Me-wt),St=wt-et,Me=Ve*un,Gt=Me-(Me-un),gr=un-Gt,Mn=St*gr-(Ft-et*Gt-St*Gt-et*gr),At=kr-Mn,pe=kr-At,tt[0]=kr-(At+pe)+(pe-Mn),ot=yr+At,pe=ot-yr,Ot=yr-(ot-pe)+(At-pe),At=Ot-Ft,pe=Ot-At,tt[1]=Ot-(At+pe)+(pe-Ft),qn=ot+At,pe=qn-ot,tt[2]=ot-(qn-pe)+(At-pe),tt[3]=qn;const vi=Et(4,Fe,4,tt,st);yr=ri*de,Me=Ve*ri,et=Me-(Me-ri),St=ri-et,Me=Ve*de,Gt=Me-(Me-de),gr=de-Gt,kr=St*gr-(yr-et*Gt-St*Gt-et*gr),Ft=Yn*It,Me=Ve*Yn,et=Me-(Me-Yn),St=Yn-et,Me=Ve*It,Gt=Me-(Me-It),gr=It-Gt,Mn=St*gr-(Ft-et*Gt-St*Gt-et*gr),At=kr-Mn,pe=kr-At,tt[0]=kr-(At+pe)+(pe-Mn),ot=yr+At,pe=ot-yr,Ot=yr-(ot-pe)+(At-pe),At=Ot-Ft,pe=Ot-At,tt[1]=Ot-(At+pe)+(pe-Ft),qn=ot+At,pe=qn-ot,tt[2]=ot-(qn-pe)+(At-pe),tt[3]=qn;const da=Et(vi,st,4,tt,Ce);yr=jt*de,Me=Ve*jt,et=Me-(Me-jt),St=jt-et,Me=Ve*de,Gt=Me-(Me-de),gr=de-Gt,kr=St*gr-(yr-et*Gt-St*Gt-et*gr),Ft=wt*It,Me=Ve*wt,et=Me-(Me-wt),St=wt-et,Me=Ve*It,Gt=Me-(Me-It),gr=It-Gt,Mn=St*gr-(Ft-et*Gt-St*Gt-et*gr),At=kr-Mn,pe=kr-At,tt[0]=kr-(At+pe)+(pe-Mn),ot=yr+At,pe=ot-yr,Ot=yr-(ot-pe)+(At-pe),At=Ot-Ft,pe=Ot-At,tt[1]=Ot-(At+pe)+(pe-Ft),qn=ot+At,pe=qn-ot,tt[2]=ot-(qn-pe)+(At-pe),tt[3]=qn;const Oa=Et(da,Ce,4,tt,De);return De[Oa-1]}function me(le,H,re,Re,Ke,Tt){const or=(H-Tt)*(re-Ke),jt=(le-Ke)*(Re-Tt),wt=or-jt,It=Math.abs(or+jt);return Math.abs(wt)>=ne*It?wt:-_e(le,H,re,Re,Ke,Tt,It)}const Ge=(le,H)=>le.x*H.y-le.y*H.x,Ze=(le,H)=>le.x*H.x+le.y*H.y,pt=(le,H,re)=>{const Re=me(le.x,le.y,H.x,H.y,re.x,re.y);return Re>0?-1:Re<0?1:0},Ht=le=>Math.sqrt(Ze(le,le)),Je=(le,H,re)=>{const Re={x:H.x-le.x,y:H.y-le.y},Ke={x:re.x-le.x,y:re.y-le.y};return Ge(Ke,Re)/Ht(Ke)/Ht(Re)},$e=(le,H,re)=>{const Re={x:H.x-le.x,y:H.y-le.y},Ke={x:re.x-le.x,y:re.y-le.y};return Ze(Ke,Re)/Ht(Ke)/Ht(Re)},Te=(le,H,re)=>H.y===0?null:{x:le.x+H.x/H.y*(re-le.y),y:re},Ye=(le,H,re)=>H.x===0?null:{x:re,y:le.y+H.y/H.x*(re-le.x)},ft=(le,H,re,Re)=>{if(H.x===0)return Ye(re,Re,le.x);if(Re.x===0)return Ye(le,H,re.x);if(H.y===0)return Te(re,Re,le.y);if(Re.y===0)return Te(le,H,re.y);const Ke=Ge(H,Re);if(Ke==0)return null;const Tt={x:re.x-le.x,y:re.y-le.y},or=Ge(Tt,H)/Ke,jt=Ge(Tt,Re)/Ke,wt=le.x+jt*H.x,It=re.x+or*Re.x,de=le.y+jt*H.y,pe=re.y+or*Re.y,Me=(wt+It)/2,et=(de+pe)/2;return{x:Me,y:et}};class ke{static compare(H,re){const Re=ke.comparePoints(H.point,re.point);return Re!==0?Re:(H.point!==re.point&&H.link(re),H.isLeft!==re.isLeft?H.isLeft?1:-1:dt.compare(H.segment,re.segment))}static comparePoints(H,re){return H.x<re.x?-1:H.x>re.x?1:H.y<re.y?-1:H.y>re.y?1:0}constructor(H,re){H.events===void 0?H.events=[this]:H.events.push(this),this.point=H,this.isLeft=re}link(H){if(H.point===this.point)throw new Error("Tried to link already linked events");const re=H.point.events;for(let Re=0,Ke=re.length;Re<Ke;Re++){const Tt=re[Re];this.point.events.push(Tt),Tt.point=this.point}this.checkForConsuming()}checkForConsuming(){const H=this.point.events.length;for(let re=0;re<H;re++){const Re=this.point.events[re];if(Re.segment.consumedBy===void 0)for(let Ke=re+1;Ke<H;Ke++){const Tt=this.point.events[Ke];Tt.consumedBy===void 0&&Re.otherSE.point.events===Tt.otherSE.point.events&&Re.segment.consume(Tt.segment)}}}getAvailableLinkedEvents(){const H=[];for(let re=0,Re=this.point.events.length;re<Re;re++){const Ke=this.point.events[re];Ke!==this&&!Ke.segment.ringOut&&Ke.segment.isInResult()&&H.push(Ke)}return H}getLeftmostComparator(H){const re=new Map,Re=Ke=>{const Tt=Ke.otherSE;re.set(Ke,{sine:Je(this.point,H.point,Tt.point),cosine:$e(this.point,H.point,Tt.point)})};return(Ke,Tt)=>{re.has(Ke)||Re(Ke),re.has(Tt)||Re(Tt);const{sine:or,cosine:jt}=re.get(Ke),{sine:wt,cosine:It}=re.get(Tt);return or>=0&&wt>=0?jt<It?1:jt>It?-1:0:or<0&&wt<0?jt<It?-1:jt>It?1:0:wt<or?-1:wt>or?1:0}}}let Ne=0;class dt{static compare(H,re){const Re=H.leftSE.point.x,Ke=re.leftSE.point.x,Tt=H.rightSE.point.x,or=re.rightSE.point.x;if(or<Re)return 1;if(Tt<Ke)return-1;const jt=H.leftSE.point.y,wt=re.leftSE.point.y,It=H.rightSE.point.y,de=re.rightSE.point.y;if(Re<Ke){if(wt<jt&&wt<It)return 1;if(wt>jt&&wt>It)return-1;const pe=H.comparePoint(re.leftSE.point);if(pe<0)return 1;if(pe>0)return-1;const Me=re.comparePoint(H.rightSE.point);return Me!==0?Me:-1}if(Re>Ke){if(jt<wt&&jt<de)return-1;if(jt>wt&&jt>de)return 1;const pe=re.comparePoint(H.leftSE.point);if(pe!==0)return pe;const Me=H.comparePoint(re.rightSE.point);return Me<0?1:Me>0?-1:1}if(jt<wt)return-1;if(jt>wt)return 1;if(Tt<or){const pe=re.comparePoint(H.rightSE.point);if(pe!==0)return pe}if(Tt>or){const pe=H.comparePoint(re.rightSE.point);if(pe<0)return 1;if(pe>0)return-1}if(Tt!==or){const pe=It-jt,Me=Tt-Re,et=de-wt,St=or-Ke;if(pe>Me&&et<St)return 1;if(pe<Me&&et>St)return-1}return Tt>or?1:Tt<or||It<de?-1:It>de?1:H.id<re.id?-1:H.id>re.id?1:0}constructor(H,re,Re,Ke){this.id=++Ne,this.leftSE=H,H.segment=this,H.otherSE=re,this.rightSE=re,re.segment=this,re.otherSE=H,this.rings=Re,this.windings=Ke}static fromRing(H,re,Re){let Ke,Tt,or;const jt=ke.comparePoints(H,re);if(jt<0)Ke=H,Tt=re,or=1;else if(jt>0)Ke=re,Tt=H,or=-1;else throw new Error(`Tried to create degenerate segment at [${H.x}, ${H.y}]`);const wt=new ke(Ke,!0),It=new ke(Tt,!1);return new dt(wt,It,[Re],[or])}replaceRightSE(H){this.rightSE=H,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const H=this.leftSE.point.y,re=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:H<re?H:re},ur:{x:this.rightSE.point.x,y:H>re?H:re}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(H){return H.x===this.leftSE.point.x&&H.y===this.leftSE.point.y||H.x===this.rightSE.point.x&&H.y===this.rightSE.point.y}comparePoint(H){if(this.isAnEndpoint(H))return 0;const re=this.leftSE.point,Re=this.rightSE.point,Ke=this.vector();if(re.x===Re.x)return H.x===re.x?0:H.x<re.x?1:-1;const Tt=(H.y-re.y)/Ke.y,or=re.x+Tt*Ke.x;if(H.x===or)return 0;const jt=(H.x-re.x)/Ke.x,wt=re.y+jt*Ke.y;return H.y===wt?0:H.y<wt?-1:1}getIntersection(H){const re=this.bbox(),Re=H.bbox(),Ke=ze(re,Re);if(Ke===null)return null;const Tt=this.leftSE.point,or=this.rightSE.point,jt=H.leftSE.point,wt=H.rightSE.point,It=be(re,jt)&&this.comparePoint(jt)===0,de=be(Re,Tt)&&H.comparePoint(Tt)===0,pe=be(re,wt)&&this.comparePoint(wt)===0,Me=be(Re,or)&&H.comparePoint(or)===0;if(de&&It)return Me&&!pe?or:!Me&&pe?wt:null;if(de)return pe&&Tt.x===wt.x&&Tt.y===wt.y?null:Tt;if(It)return Me&&or.x===jt.x&&or.y===jt.y?null:jt;if(Me&&pe)return null;if(Me)return or;if(pe)return wt;const et=ft(Tt,this.vector(),jt,H.vector());return et===null||!be(Ke,et)?null:Se.round(et.x,et.y)}split(H){const re=[],Re=H.events!==void 0,Ke=new ke(H,!0),Tt=new ke(H,!1),or=this.rightSE;this.replaceRightSE(Tt),re.push(Tt),re.push(Ke);const jt=new dt(Ke,or,this.rings.slice(),this.windings.slice());return ke.comparePoints(jt.leftSE.point,jt.rightSE.point)>0&&jt.swapEvents(),ke.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Re&&(Ke.checkForConsuming(),Tt.checkForConsuming()),re}swapEvents(){const H=this.rightSE;this.rightSE=this.leftSE,this.leftSE=H,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let re=0,Re=this.windings.length;re<Re;re++)this.windings[re]*=-1}consume(H){let re=this,Re=H;for(;re.consumedBy;)re=re.consumedBy;for(;Re.consumedBy;)Re=Re.consumedBy;const Ke=dt.compare(re,Re);if(Ke!==0){if(Ke>0){const Tt=re;re=Re,Re=Tt}if(re.prev===Re){const Tt=re;re=Re,Re=Tt}for(let Tt=0,or=Re.rings.length;Tt<or;Tt++){const jt=Re.rings[Tt],wt=Re.windings[Tt],It=re.rings.indexOf(jt);It===-1?(re.rings.push(jt),re.windings.push(wt)):re.windings[It]+=wt}Re.rings=null,Re.windings=null,Re.consumedBy=re,Re.leftSE.consumedBy=re.leftSE,Re.rightSE.consumedBy=re.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const H=this.prev.consumedBy||this.prev;this._beforeState=H.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const H=this.beforeState();this._afterState={rings:H.rings.slice(0),windings:H.windings.slice(0),multiPolys:[]};const re=this._afterState.rings,Re=this._afterState.windings,Ke=this._afterState.multiPolys;for(let jt=0,wt=this.rings.length;jt<wt;jt++){const It=this.rings[jt],de=this.windings[jt],pe=re.indexOf(It);pe===-1?(re.push(It),Re.push(de)):Re[pe]+=de}const Tt=[],or=[];for(let jt=0,wt=re.length;jt<wt;jt++){if(Re[jt]===0)continue;const It=re[jt],de=It.poly;if(or.indexOf(de)===-1)if(It.isExterior)Tt.push(de);else{or.indexOf(de)===-1&&or.push(de);const pe=Tt.indexOf(It.poly);pe!==-1&&Tt.splice(pe,1)}}for(let jt=0,wt=Tt.length;jt<wt;jt++){const It=Tt[jt].multiPoly;Ke.indexOf(It)===-1&&Ke.push(It)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const H=this.beforeState().multiPolys,re=this.afterState().multiPolys;switch(Dt.type){case"union":{const Re=H.length===0,Ke=re.length===0;this._isInResult=Re!==Ke;break}case"intersection":{let Re,Ke;H.length<re.length?(Re=H.length,Ke=re.length):(Re=re.length,Ke=H.length),this._isInResult=Ke===Dt.numMultiPolys&&Re<Ke;break}case"xor":{const Re=Math.abs(H.length-re.length);this._isInResult=Re%2===1;break}case"difference":{const Re=Ke=>Ke.length===1&&Ke[0].isSubject;this._isInResult=Re(H)!==Re(re);break}default:throw new Error(`Unrecognized operation type found ${Dt.type}`)}return this._isInResult}}class Pt{constructor(H,re,Re){if(!Array.isArray(H)||H.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=re,this.isExterior=Re,this.segments=[],typeof H[0][0]!="number"||typeof H[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Ke=Se.round(H[0][0],H[0][1]);this.bbox={ll:{x:Ke.x,y:Ke.y},ur:{x:Ke.x,y:Ke.y}};let Tt=Ke;for(let or=1,jt=H.length;or<jt;or++){if(typeof H[or][0]!="number"||typeof H[or][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let wt=Se.round(H[or][0],H[or][1]);wt.x===Tt.x&&wt.y===Tt.y||(this.segments.push(dt.fromRing(Tt,wt,this)),wt.x<this.bbox.ll.x&&(this.bbox.ll.x=wt.x),wt.y<this.bbox.ll.y&&(this.bbox.ll.y=wt.y),wt.x>this.bbox.ur.x&&(this.bbox.ur.x=wt.x),wt.y>this.bbox.ur.y&&(this.bbox.ur.y=wt.y),Tt=wt)}(Ke.x!==Tt.x||Ke.y!==Tt.y)&&this.segments.push(dt.fromRing(Tt,Ke,this))}getSweepEvents(){const H=[];for(let re=0,Re=this.segments.length;re<Re;re++){const Ke=this.segments[re];H.push(Ke.leftSE),H.push(Ke.rightSE)}return H}}class rr{constructor(H,re){if(!Array.isArray(H))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Pt(H[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let Re=1,Ke=H.length;Re<Ke;Re++){const Tt=new Pt(H[Re],this,!1);Tt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Tt.bbox.ll.x),Tt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Tt.bbox.ll.y),Tt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Tt.bbox.ur.x),Tt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Tt.bbox.ur.y),this.interiorRings.push(Tt)}this.multiPoly=re}getSweepEvents(){const H=this.exteriorRing.getSweepEvents();for(let re=0,Re=this.interiorRings.length;re<Re;re++){const Ke=this.interiorRings[re].getSweepEvents();for(let Tt=0,or=Ke.length;Tt<or;Tt++)H.push(Ke[Tt])}return H}}class xr{constructor(H,re){if(!Array.isArray(H))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof H[0][0][0]=="number"&&(H=[H])}catch(Re){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let Re=0,Ke=H.length;Re<Ke;Re++){const Tt=new rr(H[Re],this);Tt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Tt.bbox.ll.x),Tt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Tt.bbox.ll.y),Tt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Tt.bbox.ur.x),Tt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Tt.bbox.ur.y),this.polys.push(Tt)}this.isSubject=re}getSweepEvents(){const H=[];for(let re=0,Re=this.polys.length;re<Re;re++){const Ke=this.polys[re].getSweepEvents();for(let Tt=0,or=Ke.length;Tt<or;Tt++)H.push(Ke[Tt])}return H}}class ut{static factory(H){const re=[];for(let Re=0,Ke=H.length;Re<Ke;Re++){const Tt=H[Re];if(!Tt.isInResult()||Tt.ringOut)continue;let or=null,jt=Tt.leftSE,wt=Tt.rightSE;const It=[jt],de=jt.point,pe=[];for(;or=jt,jt=wt,It.push(jt),jt.point!==de;)for(;;){const Me=jt.getAvailableLinkedEvents();if(Me.length===0){const Gt=It[0].point,gr=It[It.length-1].point;throw new Error(`Unable to complete output ring starting at [${Gt.x}, ${Gt.y}]. Last matching segment found ends at [${gr.x}, ${gr.y}].`)}if(Me.length===1){wt=Me[0].otherSE;break}let et=null;for(let Gt=0,gr=pe.length;Gt<gr;Gt++)if(pe[Gt].point===jt.point){et=Gt;break}if(et!==null){const Gt=pe.splice(et)[0],gr=It.splice(Gt.index);gr.unshift(gr[0].otherSE),re.push(new ut(gr.reverse()));continue}pe.push({index:It.length,point:jt.point});const St=jt.getLeftmostComparator(or);wt=Me.sort(St)[0].otherSE;break}re.push(new ut(It))}return re}constructor(H){this.events=H;for(let re=0,Re=H.length;re<Re;re++)H[re].segment.ringOut=this;this.poly=null}getGeom(){let H=this.events[0].point;const re=[H];for(let It=1,de=this.events.length-1;It<de;It++){const pe=this.events[It].point,Me=this.events[It+1].point;pt(pe,H,Me)!==0&&(re.push(pe),H=pe)}if(re.length===1)return null;const Re=re[0],Ke=re[1];pt(Re,H,Ke)===0&&re.shift(),re.push(re[0]);const Tt=this.isExteriorRing()?1:-1,or=this.isExteriorRing()?0:re.length-1,jt=this.isExteriorRing()?re.length:-1,wt=[];for(let It=or;It!=jt;It+=Tt)wt.push([re[It].x,re[It].y]);return wt}isExteriorRing(){if(this._isExteriorRing===void 0){const H=this.enclosingRing();this._isExteriorRing=H?!H.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let H=this.events[0];for(let Ke=1,Tt=this.events.length;Ke<Tt;Ke++){const or=this.events[Ke];ke.compare(H,or)>0&&(H=or)}let re=H.segment.prevInResult(),Re=re?re.prevInResult():null;for(;;){if(!re)return null;if(!Re)return re.ringOut;if(Re.ringOut!==re.ringOut)return Re.ringOut.enclosingRing()!==re.ringOut?re.ringOut:re.ringOut.enclosingRing();re=Re.prevInResult(),Re=re?re.prevInResult():null}}}class nn{constructor(H){this.exteriorRing=H,H.poly=this,this.interiorRings=[]}addInterior(H){this.interiorRings.push(H),H.poly=this}getGeom(){const H=[this.exteriorRing.getGeom()];if(H[0]===null)return null;for(let re=0,Re=this.interiorRings.length;re<Re;re++){const Ke=this.interiorRings[re].getGeom();Ke!==null&&H.push(Ke)}return H}}class Gr{constructor(H){this.rings=H,this.polys=this._composePolys(H)}getGeom(){const H=[];for(let re=0,Re=this.polys.length;re<Re;re++){const Ke=this.polys[re].getGeom();Ke!==null&&H.push(Ke)}return H}_composePolys(H){const re=[];for(let Re=0,Ke=H.length;Re<Ke;Re++){const Tt=H[Re];if(!Tt.poly)if(Tt.isExteriorRing())re.push(new nn(Tt));else{const or=Tt.enclosingRing();or.poly||re.push(new nn(or)),or.poly.addInterior(Tt)}}return re}}class Xr{constructor(H){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt.compare;this.queue=H,this.tree=new we(re),this.segments=[]}process(H){const re=H.segment,Re=[];if(H.consumedBy)return H.isLeft?this.queue.remove(H.otherSE):this.tree.remove(re),Re;const Ke=H.isLeft?this.tree.add(re):this.tree.find(re);if(!Ke)throw new Error(`Unable to find segment #${re.id} [${re.leftSE.point.x}, ${re.leftSE.point.y}] -> [${re.rightSE.point.x}, ${re.rightSE.point.y}] in SweepLine tree.`);let Tt=Ke,or=Ke,jt,wt;for(;jt===void 0;)Tt=this.tree.prev(Tt),Tt===null?jt=null:Tt.key.consumedBy===void 0&&(jt=Tt.key);for(;wt===void 0;)or=this.tree.next(or),or===null?wt=null:or.key.consumedBy===void 0&&(wt=or.key);if(H.isLeft){let It=null;if(jt){const pe=jt.getIntersection(re);if(pe!==null&&(re.isAnEndpoint(pe)||(It=pe),!jt.isAnEndpoint(pe))){const Me=this._splitSafely(jt,pe);for(let et=0,St=Me.length;et<St;et++)Re.push(Me[et])}}let de=null;if(wt){const pe=wt.getIntersection(re);if(pe!==null&&(re.isAnEndpoint(pe)||(de=pe),!wt.isAnEndpoint(pe))){const Me=this._splitSafely(wt,pe);for(let et=0,St=Me.length;et<St;et++)Re.push(Me[et])}}if(It!==null||de!==null){let pe=null;It===null?pe=de:de===null?pe=It:pe=ke.comparePoints(It,de)<=0?It:de,this.queue.remove(re.rightSE),Re.push(re.rightSE);const Me=re.split(pe);for(let et=0,St=Me.length;et<St;et++)Re.push(Me[et])}Re.length>0?(this.tree.remove(re),Re.push(H)):(this.segments.push(re),re.prev=jt)}else{if(jt&&wt){const It=jt.getIntersection(wt);if(It!==null){if(!jt.isAnEndpoint(It)){const de=this._splitSafely(jt,It);for(let pe=0,Me=de.length;pe<Me;pe++)Re.push(de[pe])}if(!wt.isAnEndpoint(It)){const de=this._splitSafely(wt,It);for(let pe=0,Me=de.length;pe<Me;pe++)Re.push(de[pe])}}}this.tree.remove(re)}return Re}_splitSafely(H,re){this.tree.remove(H);const Re=H.rightSE;this.queue.remove(Re);const Ke=H.split(re);return Ke.push(Re),H.consumedBy===void 0&&this.tree.add(H),Ke}}const Nt=typeof $!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Yt=typeof $!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class sr{run(H,re,Re){Dt.type=H,Se.reset();const Ke=[new xr(re,!0)];for(let pe=0,Me=Re.length;pe<Me;pe++)Ke.push(new xr(Re[pe],!1));if(Dt.numMultiPolys=Ke.length,Dt.type==="difference"){const pe=Ke[0];let Me=1;for(;Me<Ke.length;)ze(Ke[Me].bbox,pe.bbox)!==null?Me++:Ke.splice(Me,1)}if(Dt.type==="intersection")for(let pe=0,Me=Ke.length;pe<Me;pe++){const et=Ke[pe];for(let St=pe+1,Gt=Ke.length;St<Gt;St++)if(ze(et.bbox,Ke[St].bbox)===null)return[]}const Tt=new we(ke.compare);for(let pe=0,Me=Ke.length;pe<Me;pe++){const et=Ke[pe].getSweepEvents();for(let St=0,Gt=et.length;St<Gt;St++)if(Tt.insert(et[St]),Tt.size>Nt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const or=new Xr(Tt);let jt=Tt.size,wt=Tt.pop();for(;wt;){const pe=wt.key;if(Tt.size===jt){const et=pe.segment;throw new Error(`Unable to pop() ${pe.isLeft?"left":"right"} SweepEvent [${pe.point.x}, ${pe.point.y}] from segment #${et.id} [${et.leftSE.point.x}, ${et.leftSE.point.y}] -> [${et.rightSE.point.x}, ${et.rightSE.point.y}] from queue.`)}if(Tt.size>Nt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(or.segments.length>Yt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Me=or.process(pe);for(let et=0,St=Me.length;et<St;et++){const Gt=Me[et];Gt.consumedBy===void 0&&Tt.insert(Gt)}jt=Tt.size,wt=Tt.pop()}Se.reset();const It=ut.factory(or.segments);return new Gr(It).getGeom()}}const Dt=new sr;var zr={union:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Re=1;Re<H;Re++)re[Re-1]=arguments[Re];return Dt.run("union",le,re)},intersection:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Re=1;Re<H;Re++)re[Re-1]=arguments[Re];return Dt.run("intersection",le,re)},xor:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Re=1;Re<H;Re++)re[Re-1]=arguments[Re];return Dt.run("xor",le,re)},difference:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Re=1;Re<H;Re++)re[Re-1]=arguments[Re];return Dt.run("difference",le,re)}};return zr})},62273:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},$=N.default=k},27590:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},$=N.default=k},45598:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=W;var K=$(k(67294)),w=k(11805);function W(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=[];return K.default.Children.forEach(j,function(ie){ie==null&&!q.keepEmpty||(Array.isArray(ie)?Q=Q.concat(W(ie)):(0,w.isFragment)(ie)&&ie.props?Q=Q.concat(W(ie.props.children,q)):Q.push(ie))}),Q}},3481:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.isStyleSupport=j;var K=$(k(19158)),w=function(Q){if((0,K.default)()&&window.document.documentElement){var ie=Array.isArray(Q)?Q:[Q],te=window.document.documentElement;return ie.some(function(we){return we in te.style})}return!1},W=function(Q,ie){if(!w(Q))return!1;var te=document.createElement("div"),we=te.style[Q];return te.style[Q]=ie,te.style[Q]!==we};function j(q,Q){return!Array.isArray(q)&&Q!==void 0?W(q,Q):w(q)}},27712:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(w){var W=w.keyCode;if(w.altKey&&!w.ctrlKey||w.metaKey||W>=k.F1&&W<=k.F12)return!1;switch(W){case k.ALT:case k.CAPS_LOCK:case k.CONTEXT_MENU:case k.CTRL:case k.DOWN:case k.END:case k.ESC:case k.HOME:case k.INSERT:case k.LEFT:case k.MAC_FF_META:case k.META:case k.NUMLOCK:case k.NUM_CENTER:case k.PAGE_DOWN:case k.PAGE_UP:case k.PAUSE:case k.PRINT_SCREEN:case k.RIGHT:case k.SHIFT:case k.UP:case k.WIN_KEY:case k.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(w){if(w>=k.ZERO&&w<=k.NINE||w>=k.NUM_ZERO&&w<=k.NUM_MULTIPLY||w>=k.A&&w<=k.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&w===0)return!0;switch(w){case k.SPACE:case k.QUESTION_MARK:case k.NUM_PLUS:case k.NUM_MINUS:case k.NUM_PERIOD:case k.NUM_DIVISION:case k.SEMICOLON:case k.DASH:case k.EQUALS:case k.COMMA:case k.PERIOD:case k.SLASH:case k.APOSTROPHE:case k.SINGLE_QUOTE:case k.OPEN_SQUARE_BRACKET:case k.BACKSLASH:case k.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},$=N.default=k},18545:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var K=$(k(67294));function w(W){var j=K.useRef();j.current=W;var q=K.useCallback(function(){for(var Q,ie=arguments.length,te=new Array(ie),we=0;we<ie;we++)te[we]=arguments[we];return(Q=j.current)===null||Q===void 0?void 0:Q.call.apply(Q,[j].concat(te))},[]);return q}},82546:function(ct,N,k){"use strict";var $=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useLayoutUpdateEffect=N.default=void 0;var w=K(k(67294)),W=$(k(19158)),j=(0,W.default)()?w.useLayoutEffect:w.useEffect,q=function(we,fe){var ce=w.useRef(!0);j(function(){return we(ce.current)},fe),j(function(){return ce.current=!1,function(){ce.current=!0}},[])},Q=N.useLayoutUpdateEffect=function(we,fe){q(function(ce){if(!ce)return we()},fe)},ie=N.default=q},67265:function(ct,N,k){"use strict";var $=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var K=$(k(67294));function w(W,j,q){var Q=K.useRef({});return(!("value"in Q.current)||q(Q.current.condition,j))&&(Q.current.value=W(),Q.current.condition=j),Q.current.value}},60869:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Q;var K=$(k(27424)),w=$(k(18545)),W=k(82546),j=$(k(78423));function q(ie){return ie!==void 0}function Q(ie,te){var we=te||{},fe=we.defaultValue,ce=we.value,J=we.onChange,M=we.postState,E=(0,j.default)(function(){return q(ce)?ce:q(fe)?typeof fe=="function"?fe():fe:typeof ie=="function"?ie():ie}),ge=(0,K.default)(E,2),be=ge[0],ze=ge[1],Be=ce!==void 0?ce:be,Ue=M?M(Be):Be,it=(0,w.default)(J),ht=(0,j.default)([Be]),Le=(0,K.default)(ht,2),Se=Le[0],ye=Le[1];(0,W.useLayoutUpdateEffect)(function(){var je=Se[0];be!==je&&it(be,je)},[Se]),(0,W.useLayoutUpdateEffect)(function(){q(ce)||ze(ce)},[ce]);var Ve=(0,w.default)(function(je,Et){ze(je,Et),ye([Be],Et)});return[Ue,Ve]}},78423:function(ct,N,k){"use strict";var $=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=j;var w=K(k(27424)),W=$(k(67294));function j(q){var Q=W.useRef(!1),ie=W.useState(q),te=(0,w.default)(ie,2),we=te[0],fe=te[1];W.useEffect(function(){return Q.current=!1,function(){Q.current=!0}},[]);function ce(J,M){M&&Q.current||fe(J)}return[we,ce]}},11102:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=$(k(18698)),w=$(k(45520));function W(q,Q){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,te=new Set;function we(fe,ce){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=te.has(fe);if((0,w.default)(!M,"Warning: There may be circular references"),M)return!1;if(fe===ce)return!0;if(ie&&J>1)return!1;te.add(fe);var E=J+1;if(Array.isArray(fe)){if(!Array.isArray(ce)||fe.length!==ce.length)return!1;for(var ge=0;ge<fe.length;ge++)if(!we(fe[ge],ce[ge],E))return!1;return!0}if(fe&&ce&&(0,K.default)(fe)==="object"&&(0,K.default)(ce)==="object"){var be=Object.keys(fe);return be.length!==Object.keys(ce).length?!1:be.every(function(ze){return we(fe[ze],ce[ze],E)})}return!1}return we(q,Q)}var j=N.default=W},18475:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=w;var K=$(k(42122));function w(W,j){var q=(0,K.default)({},W);return Array.isArray(j)&&j.forEach(function(Q){delete q[Q]}),q}},75531:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.composeRef=Q,N.fillRef=q,N.supportNodeRef=we,N.supportRef=te,N.useComposeRef=ie;var K=$(k(18698)),w=k(67294),W=k(11805),j=$(k(67265));function q(fe,ce){typeof fe=="function"?fe(ce):(0,K.default)(fe)==="object"&&fe&&"current"in fe&&(fe.current=ce)}function Q(){for(var fe=arguments.length,ce=new Array(fe),J=0;J<fe;J++)ce[J]=arguments[J];var M=ce.filter(function(E){return E});return M.length<=1?M[0]:function(E){ce.forEach(function(ge){q(ge,E)})}}function ie(){for(var fe=arguments.length,ce=new Array(fe),J=0;J<fe;J++)ce[J]=arguments[J];return(0,j.default)(function(){return Q.apply(void 0,ce)},ce,function(M,E){return M.length!==E.length||M.every(function(ge,be){return ge!==E[be]})})}function te(fe){var ce,J,M=(0,W.isMemo)(fe)?fe.type.type:fe.type;return!(typeof M=="function"&&!((ce=M.prototype)!==null&&ce!==void 0&&ce.render)||typeof fe=="function"&&!((J=fe.prototype)!==null&&J!==void 0&&J.render))}function we(fe){return!(0,w.isValidElement)(fe)||(0,W.isFragment)(fe)?!1:te(fe)}},94787:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k($,K){for(var w=$,W=0;W<K.length;W+=1){if(w==null)return;w=w[K[W]]}return w}},20059:function(ct,N,k){"use strict";var $=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=ie,N.merge=ce;var K=$(k(18698)),w=$(k(42122)),W=$(k(861)),j=$(k(51589)),q=$(k(94787));function Q(J,M,E,ge){if(!M.length)return E;var be=(0,j.default)(M),ze=be[0],Be=be.slice(1),Ue;return!J&&typeof ze=="number"?Ue=[]:Array.isArray(J)?Ue=(0,W.default)(J):Ue=(0,w.default)({},J),ge&&E===void 0&&Be.length===1?delete Ue[ze][Be[0]]:Ue[ze]=Q(Ue[ze],Be,E,ge),Ue}function ie(J,M,E){var ge=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return M.length&&ge&&E===void 0&&!(0,q.default)(J,M.slice(0,-1))?J:Q(J,M,E,ge)}function te(J){return(0,K.default)(J)==="object"&&J!==null&&Object.getPrototypeOf(J)===Object.prototype}function we(J){return Array.isArray(J)?[]:{}}var fe=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function ce(){for(var J=arguments.length,M=new Array(J),E=0;E<J;E++)M[E]=arguments[E];var ge=we(M[0]);return M.forEach(function(be){function ze(Be,Ue){var it=new Set(Ue),ht=(0,q.default)(be,Be),Le=Array.isArray(ht);if(Le||te(ht)){if(!it.has(ht)){it.add(ht);var Se=(0,q.default)(ge,Be);Le?ge=ie(ge,Be,[]):(!Se||(0,K.default)(Se)!=="object")&&(ge=ie(ge,Be,we(ht))),fe(ht).forEach(function(ye){ze([].concat((0,W.default)(Be),[ye]),it)})}}else ge=ie(ge,Be,ht)}ze([])}),ge}},24561:function(ct,N,k){"use strict";var $=k(67294);var K=function(){return K=Object.assign||function(J){for(var M,E=1,ge=arguments.length;E<ge;E++){M=arguments[E];for(var be in M)Object.prototype.hasOwnProperty.call(M,be)&&(J[be]=M[be])}return J},K.apply(this,arguments)};function w(ce,J){var M={};for(var E in ce)Object.prototype.hasOwnProperty.call(ce,E)&&J.indexOf(E)<0&&(M[E]=ce[E]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,E=Object.getOwnPropertySymbols(ce);ge<E.length;ge++)J.indexOf(E[ge])<0&&Object.prototype.propertyIsEnumerable.call(ce,E[ge])&&(M[E[ge]]=ce[E[ge]]);return M}var W=function(){return Math.random().toString(36).substring(6)},j=function(ce){var J=ce.animate,M=ce.backgroundColor,E=ce.backgroundOpacity,ge=ce.baseUrl,be=ce.children,ze=ce.foregroundColor,Be=ce.foregroundOpacity,Ue=ce.gradientRatio,it=ce.uniqueKey,ht=ce.interval,Le=ce.rtl,Se=ce.speed,ye=ce.style,Ve=ce.title,je=w(ce,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),Et=it||W(),Oe=Et+"-diff",Qe=Et+"-animated-diff",ne=Et+"-aria",We=Le?{transform:"scaleX(-1)"}:null,oe="0; "+ht+"; 1",Fe=Se+"s";return(0,$.createElement)("svg",K({"aria-labelledby":ne,role:"img",style:K(K({},ye),We)},je),Ve?(0,$.createElement)("title",{id:ne},Ve):null,(0,$.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+ge+"#"+Oe+")",style:{fill:"url("+ge+"#"+Qe+")"}}),(0,$.createElement)("defs",{role:"presentation"},(0,$.createElement)("clipPath",{id:Oe},be),(0,$.createElement)("linearGradient",{id:Qe},(0,$.createElement)("stop",{offset:"0%",stopColor:M,stopOpacity:E},J&&(0,$.createElement)("animate",{attributeName:"offset",values:-Ue+"; "+-Ue+"; 1",keyTimes:oe,dur:Fe,repeatCount:"indefinite"})),(0,$.createElement)("stop",{offset:"50%",stopColor:ze,stopOpacity:Be},J&&(0,$.createElement)("animate",{attributeName:"offset",values:-Ue/2+"; "+-Ue/2+"; "+(1+Ue/2),keyTimes:oe,dur:Fe,repeatCount:"indefinite"})),(0,$.createElement)("stop",{offset:"100%",stopColor:M,stopOpacity:E},J&&(0,$.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ue),keyTimes:oe,dur:Fe,repeatCount:"indefinite"})))))};j.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var q=function(ce){return ce.children?(0,$.createElement)(j,K({},ce)):(0,$.createElement)(Q,K({},ce))},Q=function(ce){return(0,$.createElement)(q,K({viewBox:"0 0 476 124"},ce),(0,$.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,$.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,$.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},ie=function(ce){return createElement(q,K({viewBox:"0 0 400 460"},ce),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},te=function(ce){return createElement(q,K({viewBox:"0 0 340 84"},ce),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},we=function(ce){return createElement(q,K({viewBox:"0 0 400 110"},ce),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},fe=function(ce){return createElement(q,K({viewBox:"0 0 245 125"},ce),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))};N.ZP=q},28660:function(ct,N,k){var $=k(34155);var K;(function(w){(function(W){var j=typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),q=Q(w);typeof j.Reflect=="undefined"?j.Reflect=w:q=Q(j.Reflect,q),W(q);function Q(ie,te){return function(we,fe){typeof ie[we]!="function"&&Object.defineProperty(ie,we,{configurable:!0,writable:!0,value:fe}),te&&te(we,fe)}}})(function(W){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",we={__proto__:[]}instanceof Array,fe=!te&&!we,ce={create:te?function(){return sr(Object.create(null))}:we?function(){return sr({__proto__:null})}:function(){return sr({})},has:fe?function(Dt,Qt){return j.call(Dt,Qt)}:function(Dt,Qt){return Qt in Dt},get:fe?function(Dt,Qt){return j.call(Dt,Qt)?Dt[Qt]:void 0}:function(Dt,Qt){return Dt[Qt]}},J=Object.getPrototypeOf(Function),M=typeof $=="object"&&$["env"]&&$["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!M&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Xr(),ge=!M&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Nt(),be=!M&&typeof WeakMap=="function"?WeakMap:Yt(),ze=new be;function Be(Dt,Qt,Sr,Er){if(me(Sr)){if(!ft(Dt))throw new TypeError;if(!Ne(Qt))throw new TypeError;return Oe(Dt,Qt)}else{if(!ft(Dt))throw new TypeError;if(!pt(Qt))throw new TypeError;if(!pt(Er)&&!me(Er)&&!Ge(Er))throw new TypeError;return Ge(Er)&&(Er=void 0),Sr=Ye(Sr),Qe(Dt,Qt,Sr,Er)}}W("decorate",Be);function Ue(Dt,Qt){function Sr(Er,Fr){if(!pt(Er))throw new TypeError;if(!me(Fr)&&!dt(Fr))throw new TypeError;Ce(Dt,Qt,Er,Fr)}return Sr}W("metadata",Ue);function it(Dt,Qt,Sr,Er){if(!pt(Sr))throw new TypeError;return me(Er)||(Er=Ye(Er)),Ce(Dt,Qt,Sr,Er)}W("defineMetadata",it);function ht(Dt,Qt,Sr){if(!pt(Qt))throw new TypeError;return me(Sr)||(Sr=Ye(Sr)),We(Dt,Qt,Sr)}W("hasMetadata",ht);function Le(Dt,Qt,Sr){if(!pt(Qt))throw new TypeError;return me(Sr)||(Sr=Ye(Sr)),oe(Dt,Qt,Sr)}W("hasOwnMetadata",Le);function Se(Dt,Qt,Sr){if(!pt(Qt))throw new TypeError;return me(Sr)||(Sr=Ye(Sr)),Fe(Dt,Qt,Sr)}W("getMetadata",Se);function ye(Dt,Qt,Sr){if(!pt(Qt))throw new TypeError;return me(Sr)||(Sr=Ye(Sr)),st(Dt,Qt,Sr)}W("getOwnMetadata",ye);function Ve(Dt,Qt){if(!pt(Dt))throw new TypeError;return me(Qt)||(Qt=Ye(Qt)),De(Dt,Qt)}W("getMetadataKeys",Ve);function je(Dt,Qt){if(!pt(Dt))throw new TypeError;return me(Qt)||(Qt=Ye(Qt)),tt(Dt,Qt)}W("getOwnMetadataKeys",je);function Et(Dt,Qt,Sr){if(!pt(Qt))throw new TypeError;me(Sr)||(Sr=Ye(Sr));var Er=ne(Qt,Sr,!1);if(me(Er)||!Er.delete(Dt))return!1;if(Er.size>0)return!0;var Fr=ze.get(Qt);return Fr.delete(Sr),Fr.size>0||ze.delete(Qt),!0}W("deleteMetadata",Et);function Oe(Dt,Qt){for(var Sr=Dt.length-1;Sr>=0;--Sr){var Er=Dt[Sr],Fr=Er(Qt);if(!me(Fr)&&!Ge(Fr)){if(!Ne(Fr))throw new TypeError;Qt=Fr}}return Qt}function Qe(Dt,Qt,Sr,Er){for(var Fr=Dt.length-1;Fr>=0;--Fr){var zr=Dt[Fr],le=zr(Qt,Sr,Er);if(!me(le)&&!Ge(le)){if(!pt(le))throw new TypeError;Er=le}}return Er}function ne(Dt,Qt,Sr){var Er=ze.get(Dt);if(me(Er)){if(!Sr)return;Er=new E,ze.set(Dt,Er)}var Fr=Er.get(Qt);if(me(Fr)){if(!Sr)return;Fr=new E,Er.set(Qt,Fr)}return Fr}function We(Dt,Qt,Sr){var Er=oe(Dt,Qt,Sr);if(Er)return!0;var Fr=Gr(Qt);return Ge(Fr)?!1:We(Dt,Fr,Sr)}function oe(Dt,Qt,Sr){var Er=ne(Qt,Sr,!1);return me(Er)?!1:$e(Er.has(Dt))}function Fe(Dt,Qt,Sr){var Er=oe(Dt,Qt,Sr);if(Er)return st(Dt,Qt,Sr);var Fr=Gr(Qt);if(!Ge(Fr))return Fe(Dt,Fr,Sr)}function st(Dt,Qt,Sr){var Er=ne(Qt,Sr,!1);if(!me(Er))return Er.get(Dt)}function Ce(Dt,Qt,Sr,Er){var Fr=ne(Sr,Er,!0);Fr.set(Dt,Qt)}function De(Dt,Qt){var Sr=tt(Dt,Qt),Er=Gr(Dt);if(Er===null)return Sr;var Fr=De(Er,Qt);if(Fr.length<=0)return Sr;if(Sr.length<=0)return Fr;for(var zr=new ge,le=[],H=0,re=Sr;H<re.length;H++){var Re=re[H],Ke=zr.has(Re);Ke||(zr.add(Re),le.push(Re))}for(var Tt=0,or=Fr;Tt<or.length;Tt++){var Re=or[Tt],Ke=zr.has(Re);Ke||(zr.add(Re),le.push(Re))}return le}function tt(Dt,Qt){var Sr=[],Er=ne(Dt,Qt,!1);if(me(Er))return Sr;for(var Fr=Er.keys(),zr=rr(Fr),le=0;;){var H=ut(zr);if(!H)return Sr.length=le,Sr;var re=xr(H);try{Sr[le]=re}catch(Re){try{nn(zr)}finally{throw Re}}le++}}function _e(Dt){if(Dt===null)return 1;switch(typeof Dt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Dt===null?1:6;default:return 6}}function me(Dt){return Dt===void 0}function Ge(Dt){return Dt===null}function Ze(Dt){return typeof Dt=="symbol"}function pt(Dt){return typeof Dt=="object"?Dt!==null:typeof Dt=="function"}function Ht(Dt,Qt){switch(_e(Dt)){case 0:return Dt;case 1:return Dt;case 2:return Dt;case 3:return Dt;case 4:return Dt;case 5:return Dt}var Sr=Qt===3?"string":Qt===5?"number":"default",Er=Pt(Dt,Q);if(Er!==void 0){var Fr=Er.call(Dt,Sr);if(pt(Fr))throw new TypeError;return Fr}return Je(Dt,Sr==="default"?"number":Sr)}function Je(Dt,Qt){if(Qt==="string"){var Sr=Dt.toString;if(ke(Sr)){var Er=Sr.call(Dt);if(!pt(Er))return Er}var Fr=Dt.valueOf;if(ke(Fr)){var Er=Fr.call(Dt);if(!pt(Er))return Er}}else{var Fr=Dt.valueOf;if(ke(Fr)){var Er=Fr.call(Dt);if(!pt(Er))return Er}var zr=Dt.toString;if(ke(zr)){var Er=zr.call(Dt);if(!pt(Er))return Er}}throw new TypeError}function $e(Dt){return!!Dt}function Te(Dt){return""+Dt}function Ye(Dt){var Qt=Ht(Dt,3);return Ze(Qt)?Qt:Te(Qt)}function ft(Dt){return Array.isArray?Array.isArray(Dt):Dt instanceof Object?Dt instanceof Array:Object.prototype.toString.call(Dt)==="[object Array]"}function ke(Dt){return typeof Dt=="function"}function Ne(Dt){return typeof Dt=="function"}function dt(Dt){switch(_e(Dt)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(Dt,Qt){var Sr=Dt[Qt];if(Sr!=null){if(!ke(Sr))throw new TypeError;return Sr}}function rr(Dt){var Qt=Pt(Dt,ie);if(!ke(Qt))throw new TypeError;var Sr=Qt.call(Dt);if(!pt(Sr))throw new TypeError;return Sr}function xr(Dt){return Dt.value}function ut(Dt){var Qt=Dt.next();return Qt.done?!1:Qt}function nn(Dt){var Qt=Dt.return;Qt&&Qt.call(Dt)}function Gr(Dt){var Qt=Object.getPrototypeOf(Dt);if(typeof Dt!="function"||Dt===J||Qt!==J)return Qt;var Sr=Dt.prototype,Er=Sr&&Object.getPrototypeOf(Sr);if(Er==null||Er===Object.prototype)return Qt;var Fr=Er.constructor;return typeof Fr!="function"||Fr===Dt?Qt:Fr}function Xr(){var Dt={},Qt=[],Sr=function(){function le(H,re,Re){this._index=0,this._keys=H,this._values=re,this._selector=Re}return le.prototype["@@iterator"]=function(){return this},le.prototype[ie]=function(){return this},le.prototype.next=function(){var H=this._index;if(H>=0&&H<this._keys.length){var re=this._selector(this._keys[H],this._values[H]);return H+1>=this._keys.length?(this._index=-1,this._keys=Qt,this._values=Qt):this._index++,{value:re,done:!1}}return{value:void 0,done:!0}},le.prototype.throw=function(H){throw this._index>=0&&(this._index=-1,this._keys=Qt,this._values=Qt),H},le.prototype.return=function(H){return this._index>=0&&(this._index=-1,this._keys=Qt,this._values=Qt),{value:H,done:!0}},le}();return function(){function le(){this._keys=[],this._values=[],this._cacheKey=Dt,this._cacheIndex=-2}return Object.defineProperty(le.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),le.prototype.has=function(H){return this._find(H,!1)>=0},le.prototype.get=function(H){var re=this._find(H,!1);return re>=0?this._values[re]:void 0},le.prototype.set=function(H,re){var Re=this._find(H,!0);return this._values[Re]=re,this},le.prototype.delete=function(H){var re=this._find(H,!1);if(re>=0){for(var Re=this._keys.length,Ke=re+1;Ke<Re;Ke++)this._keys[Ke-1]=this._keys[Ke],this._values[Ke-1]=this._values[Ke];return this._keys.length--,this._values.length--,H===this._cacheKey&&(this._cacheKey=Dt,this._cacheIndex=-2),!0}return!1},le.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Dt,this._cacheIndex=-2},le.prototype.keys=function(){return new Sr(this._keys,this._values,Er)},le.prototype.values=function(){return new Sr(this._keys,this._values,Fr)},le.prototype.entries=function(){return new Sr(this._keys,this._values,zr)},le.prototype["@@iterator"]=function(){return this.entries()},le.prototype[ie]=function(){return this.entries()},le.prototype._find=function(H,re){return this._cacheKey!==H&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=H)),this._cacheIndex<0&&re&&(this._cacheIndex=this._keys.length,this._keys.push(H),this._values.push(void 0)),this._cacheIndex},le}();function Er(le,H){return le}function Fr(le,H){return H}function zr(le,H){return[le,H]}}function Nt(){return function(){function Dt(){this._map=new E}return Object.defineProperty(Dt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Dt.prototype.has=function(Qt){return this._map.has(Qt)},Dt.prototype.add=function(Qt){return this._map.set(Qt,Qt),this},Dt.prototype.delete=function(Qt){return this._map.delete(Qt)},Dt.prototype.clear=function(){this._map.clear()},Dt.prototype.keys=function(){return this._map.keys()},Dt.prototype.values=function(){return this._map.values()},Dt.prototype.entries=function(){return this._map.entries()},Dt.prototype["@@iterator"]=function(){return this.keys()},Dt.prototype[ie]=function(){return this.keys()},Dt}()}function Yt(){var Dt=16,Qt=ce.create(),Sr=Er();return function(){function re(){this._key=Er()}return re.prototype.has=function(Re){var Ke=Fr(Re,!1);return Ke!==void 0?ce.has(Ke,this._key):!1},re.prototype.get=function(Re){var Ke=Fr(Re,!1);return Ke!==void 0?ce.get(Ke,this._key):void 0},re.prototype.set=function(Re,Ke){var Tt=Fr(Re,!0);return Tt[this._key]=Ke,this},re.prototype.delete=function(Re){var Ke=Fr(Re,!1);return Ke!==void 0?delete Ke[this._key]:!1},re.prototype.clear=function(){this._key=Er()},re}();function Er(){var re;do re="@@WeakMap@@"+H();while(ce.has(Qt,re));return Qt[re]=!0,re}function Fr(re,Re){if(!j.call(re,Sr)){if(!Re)return;Object.defineProperty(re,Sr,{value:ce.create()})}return re[Sr]}function zr(re,Re){for(var Ke=0;Ke<Re;++Ke)re[Ke]=Math.random()*255|0;return re}function le(re){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(re)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(re)):zr(new Uint8Array(re),re):zr(new Array(re),re)}function H(){var re=le(Dt);re[6]=re[6]&79|64,re[8]=re[8]&191|128;for(var Re="",Ke=0;Ke<Dt;++Ke){var Tt=re[Ke];(Ke===4||Ke===6||Ke===8)&&(Re+="-"),Tt<16&&(Re+="0"),Re+=Tt.toString(16).toLowerCase()}return Re}}function sr(Dt){return Dt.__=void 0,delete Dt.__,Dt}})})(K||(K={}))},55168:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SizeSensorId=N.SensorTabIndex=N.SensorClassName=void 0;var k="size-sensor-id";N.SizeSensorId=k;var $="size-sensor-object";N.SensorClassName=$;var K="-1";N.SensorTabIndex=K},12177:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=function(K){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,W=null;return function(){for(var j=this,q=arguments.length,Q=new Array(q),ie=0;ie<q;ie++)Q[ie]=arguments[ie];clearTimeout(W),W=setTimeout(function(){K.apply(j,Q)},w)}};N.default=k},15378:function(ct,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=1,$=function(){return"".concat(k++)};N.default=$},18587:function(ct,N,k){"use strict";var $;$={value:!0},$=$=N.ak=void 0;var K=k(12955),w=function(Q,ie){var te=(0,K.getSensor)(Q);return te.bind(ie),function(){te.unbind(ie)}};N.ak=w;var W=function(Q){var ie=(0,K.getSensor)(Q);(0,K.removeSensor)(ie)};$=W;var j="1.0.2";$=j},12955:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.removeSensor=N.getSensor=N.Sensors=void 0;var $=W(k(15378)),K=k(82578),w=k(55168);function W(te){return te&&te.__esModule?te:{default:te}}var j={};N.Sensors=j;function q(te){te&&j[te]&&delete j[te]}var Q=function(we){var fe=we.getAttribute(w.SizeSensorId);if(fe&&j[fe])return j[fe];var ce=(0,$.default)();we.setAttribute(w.SizeSensorId,ce);var J=(0,K.createSensor)(we,function(){return q(ce)});return j[ce]=J,J};N.getSensor=Q;var ie=function(we){var fe=we.element.getAttribute(w.SizeSensorId);we.destroy(),q(fe)};N.removeSensor=ie},82578:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var $=k(27643),K=k(31743),w=typeof ResizeObserver!="undefined"?K.createSensor:$.createSensor;N.createSensor=w},27643:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var $=w(k(12177)),K=k(55168);function w(j){return j&&j.__esModule?j:{default:j}}var W=function(q,Q){var ie=void 0,te=[],we=function(){getComputedStyle(q).position==="static"&&(q.style.position="relative");var ge=document.createElement("object");return ge.onload=function(){ge.contentDocument.defaultView.addEventListener("resize",fe),fe()},ge.style.display="block",ge.style.position="absolute",ge.style.top="0",ge.style.left="0",ge.style.height="100%",ge.style.width="100%",ge.style.overflow="hidden",ge.style.pointerEvents="none",ge.style.zIndex="-1",ge.style.opacity="0",ge.setAttribute("class",K.SensorClassName),ge.setAttribute("tabindex",K.SensorTabIndex),ge.type="text/html",q.appendChild(ge),ge.data="about:blank",ge},fe=(0,$.default)(function(){te.forEach(function(E){E(q)})}),ce=function(ge){ie||(ie=we()),te.indexOf(ge)===-1&&te.push(ge)},J=function(){ie&&ie.parentNode&&(ie.contentDocument&&ie.contentDocument.defaultView.removeEventListener("resize",fe),ie.parentNode.removeChild(ie),q.removeAttribute(K.SizeSensorId),ie=void 0,te=[],Q&&Q())},M=function(ge){var be=te.indexOf(ge);be!==-1&&te.splice(be,1),te.length===0&&ie&&J()};return{element:q,bind:ce,destroy:J,unbind:M}};N.createSensor=W},31743:function(ct,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var $=k(55168),K=w(k(12177));function w(j){return j&&j.__esModule?j:{default:j}}var W=function(q,Q){var ie=void 0,te=[],we=(0,K.default)(function(){te.forEach(function(E){E(q)})}),fe=function(){var ge=new ResizeObserver(we);return ge.observe(q),we(),ge},ce=function(ge){ie||(ie=fe()),te.indexOf(ge)===-1&&te.push(ge)},J=function(){ie.disconnect(),te=[],ie=void 0,q.removeAttribute($.SizeSensorId),Q&&Q()},M=function(ge){var be=te.indexOf(ge);be!==-1&&te.splice(be,1),te.length===0&&ie&&J()};return{element:q,bind:ce,destroy:J,unbind:M}};N.createSensor=W},69848:function(ct){(function(N,k){ct.exports=k()})(this,function(){"use strict";function N(Le,Se,ye,Ve,je,Et){if(!(je-Ve<=ye)){var Oe=Ve+je>>1;k(Le,Se,Oe,Ve,je,Et%2),N(Le,Se,ye,Ve,Oe-1,Et+1),N(Le,Se,ye,Oe+1,je,Et+1)}}function k(Le,Se,ye,Ve,je,Et){for(;je>Ve;){if(je-Ve>600){var Oe=je-Ve+1,Qe=ye-Ve+1,ne=Math.log(Oe),We=.5*Math.exp(2*ne/3),oe=.5*Math.sqrt(ne*We*(Oe-We)/Oe)*(Qe-Oe/2<0?-1:1),Fe=Math.max(Ve,Math.floor(ye-Qe*We/Oe+oe)),st=Math.min(je,Math.floor(ye+(Oe-Qe)*We/Oe+oe));k(Le,Se,ye,Fe,st,Et)}var Ce=Se[2*ye+Et],De=Ve,tt=je;for($(Le,Se,Ve,ye),Se[2*je+Et]>Ce&&$(Le,Se,Ve,je);De<tt;){for($(Le,Se,De,tt),De++,tt--;Se[2*De+Et]<Ce;)De++;for(;Se[2*tt+Et]>Ce;)tt--}Se[2*Ve+Et]===Ce?$(Le,Se,Ve,tt):(tt++,$(Le,Se,tt,je)),tt<=ye&&(Ve=tt+1),ye<=tt&&(je=tt-1)}}function $(Le,Se,ye,Ve){K(Le,ye,Ve),K(Se,2*ye,2*Ve),K(Se,2*ye+1,2*Ve+1)}function K(Le,Se,ye){var Ve=Le[Se];Le[Se]=Le[ye],Le[ye]=Ve}function w(Le,Se,ye,Ve,je,Et,Oe){for(var Qe=[0,Le.length-1,0],ne=[],We,oe;Qe.length;){var Fe=Qe.pop(),st=Qe.pop(),Ce=Qe.pop();if(st-Ce<=Oe){for(var De=Ce;De<=st;De++)We=Se[2*De],oe=Se[2*De+1],We>=ye&&We<=je&&oe>=Ve&&oe<=Et&&ne.push(Le[De]);continue}var tt=Math.floor((Ce+st)/2);We=Se[2*tt],oe=Se[2*tt+1],We>=ye&&We<=je&&oe>=Ve&&oe<=Et&&ne.push(Le[tt]);var _e=(Fe+1)%2;(Fe===0?ye<=We:Ve<=oe)&&(Qe.push(Ce),Qe.push(tt-1),Qe.push(_e)),(Fe===0?je>=We:Et>=oe)&&(Qe.push(tt+1),Qe.push(st),Qe.push(_e))}return ne}function W(Le,Se,ye,Ve,je,Et){for(var Oe=[0,Le.length-1,0],Qe=[],ne=je*je;Oe.length;){var We=Oe.pop(),oe=Oe.pop(),Fe=Oe.pop();if(oe-Fe<=Et){for(var st=Fe;st<=oe;st++)j(Se[2*st],Se[2*st+1],ye,Ve)<=ne&&Qe.push(Le[st]);continue}var Ce=Math.floor((Fe+oe)/2),De=Se[2*Ce],tt=Se[2*Ce+1];j(De,tt,ye,Ve)<=ne&&Qe.push(Le[Ce]);var _e=(We+1)%2;(We===0?ye-je<=De:Ve-je<=tt)&&(Oe.push(Fe),Oe.push(Ce-1),Oe.push(_e)),(We===0?ye+je>=De:Ve+je>=tt)&&(Oe.push(Ce+1),Oe.push(oe),Oe.push(_e))}return Qe}function j(Le,Se,ye,Ve){var je=Le-ye,Et=Se-Ve;return je*je+Et*Et}var q=function(Le){return Le[0]},Q=function(Le){return Le[1]},ie=function(Se,ye,Ve,je,Et){ye===void 0&&(ye=q),Ve===void 0&&(Ve=Q),je===void 0&&(je=64),Et===void 0&&(Et=Float64Array),this.nodeSize=je,this.points=Se;for(var Oe=Se.length<65536?Uint16Array:Uint32Array,Qe=this.ids=new Oe(Se.length),ne=this.coords=new Et(Se.length*2),We=0;We<Se.length;We++)Qe[We]=We,ne[2*We]=ye(Se[We]),ne[2*We+1]=Ve(Se[We]);N(Qe,ne,je,0,Qe.length-1,0)};ie.prototype.range=function(Se,ye,Ve,je){return w(this.ids,this.coords,Se,ye,Ve,je,this.nodeSize)},ie.prototype.within=function(Se,ye,Ve){return W(this.ids,this.coords,Se,ye,Ve,this.nodeSize)};var te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Le){return Le}},we=Math.fround||function(Le){return function(Se){return Le[0]=+Se,Le[0]}}(new Float32Array(1)),fe=function(Se){this.options=Ue(Object.create(te),Se),this.trees=new Array(this.options.maxZoom+1)};fe.prototype.load=function(Se){var ye=this.options,Ve=ye.log,je=ye.minZoom,Et=ye.maxZoom,Oe=ye.nodeSize;Ve&&console.time("total time");var Qe="prepare "+Se.length+" points";Ve&&console.time(Qe),this.points=Se;for(var ne=[],We=0;We<Se.length;We++)Se[We].geometry&&ne.push(J(Se[We],We));this.trees[Et+1]=new ie(ne,it,ht,Oe,Float32Array),Ve&&console.timeEnd(Qe);for(var oe=Et;oe>=je;oe--){var Fe=+Date.now();ne=this._cluster(ne,oe),this.trees[oe]=new ie(ne,it,ht,Oe,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",oe,ne.length,+Date.now()-Fe)}return Ve&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(Se,ye){var Ve=((Se[0]+180)%360+360)%360-180,je=Math.max(-90,Math.min(90,Se[1])),Et=Se[2]===180?180:((Se[2]+180)%360+360)%360-180,Oe=Math.max(-90,Math.min(90,Se[3]));if(Se[2]-Se[0]>=360)Ve=-180,Et=180;else if(Ve>Et){var Qe=this.getClusters([Ve,je,180,Oe],ye),ne=this.getClusters([-180,je,Et,Oe],ye);return Qe.concat(ne)}for(var We=this.trees[this._limitZoom(ye)],oe=We.range(ge(Ve),be(Oe),ge(Et),be(je)),Fe=[],st=0,Ce=oe;st<Ce.length;st+=1){var De=Ce[st],tt=We.points[De];Fe.push(tt.numPoints?M(tt):this.points[tt.index])}return Fe},fe.prototype.getChildren=function(Se){var ye=this._getOriginId(Se),Ve=this._getOriginZoom(Se),je="No cluster with the specified id.",Et=this.trees[Ve];if(!Et)throw new Error(je);var Oe=Et.points[ye];if(!Oe)throw new Error(je);for(var Qe=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),ne=Et.within(Oe.x,Oe.y,Qe),We=[],oe=0,Fe=ne;oe<Fe.length;oe+=1){var st=Fe[oe],Ce=Et.points[st];Ce.parentId===Se&&We.push(Ce.numPoints?M(Ce):this.points[Ce.index])}if(We.length===0)throw new Error(je);return We},fe.prototype.getLeaves=function(Se,ye,Ve){ye=ye||10,Ve=Ve||0;var je=[];return this._appendLeaves(je,Se,ye,Ve,0),je},fe.prototype.getTile=function(Se,ye,Ve){var je=this.trees[this._limitZoom(Se)],Et=Math.pow(2,Se),Oe=this.options,Qe=Oe.extent,ne=Oe.radius,We=ne/Qe,oe=(Ve-We)/Et,Fe=(Ve+1+We)/Et,st={features:[]};return this._addTileFeatures(je.range((ye-We)/Et,oe,(ye+1+We)/Et,Fe),je.points,ye,Ve,Et,st),ye===0&&this._addTileFeatures(je.range(1-We/Et,oe,1,Fe),je.points,Et,Ve,Et,st),ye===Et-1&&this._addTileFeatures(je.range(0,oe,We/Et,Fe),je.points,-1,Ve,Et,st),st.features.length?st:null},fe.prototype.getClusterExpansionZoom=function(Se){for(var ye=this._getOriginZoom(Se)-1;ye<=this.options.maxZoom;){var Ve=this.getChildren(Se);if(ye++,Ve.length!==1)break;Se=Ve[0].properties.cluster_id}return ye},fe.prototype._appendLeaves=function(Se,ye,Ve,je,Et){for(var Oe=this.getChildren(ye),Qe=0,ne=Oe;Qe<ne.length;Qe+=1){var We=ne[Qe],oe=We.properties;if(oe&&oe.cluster?Et+oe.point_count<=je?Et+=oe.point_count:Et=this._appendLeaves(Se,oe.cluster_id,Ve,je,Et):Et<je?Et++:Se.push(We),Se.length===Ve)break}return Et},fe.prototype._addTileFeatures=function(Se,ye,Ve,je,Et,Oe){for(var Qe=0,ne=Se;Qe<ne.length;Qe+=1){var We=ne[Qe],oe=ye[We],Fe=oe.numPoints,st=void 0,Ce=void 0,De=void 0;if(Fe)st=E(oe),Ce=oe.x,De=oe.y;else{var tt=this.points[oe.index];st=tt.properties,Ce=ge(tt.geometry.coordinates[0]),De=be(tt.geometry.coordinates[1])}var _e={type:1,geometry:[[Math.round(this.options.extent*(Ce*Et-Ve)),Math.round(this.options.extent*(De*Et-je))]],tags:st},me=void 0;Fe?me=oe.id:this.options.generateId?me=oe.index:this.points[oe.index].id&&(me=this.points[oe.index].id),me!==void 0&&(_e.id=me),Oe.features.push(_e)}},fe.prototype._limitZoom=function(Se){return Math.max(this.options.minZoom,Math.min(Math.floor(+Se),this.options.maxZoom+1))},fe.prototype._cluster=function(Se,ye){for(var Ve=[],je=this.options,Et=je.radius,Oe=je.extent,Qe=je.reduce,ne=je.minPoints,We=Et/(Oe*Math.pow(2,ye)),oe=0;oe<Se.length;oe++){var Fe=Se[oe];if(!(Fe.zoom<=ye)){Fe.zoom=ye;for(var st=this.trees[ye+1],Ce=st.within(Fe.x,Fe.y,We),De=Fe.numPoints||1,tt=De,_e=0,me=Ce;_e<me.length;_e+=1){var Ge=me[_e],Ze=st.points[Ge];Ze.zoom>ye&&(tt+=Ze.numPoints||1)}if(tt>De&&tt>=ne){for(var pt=Fe.x*De,Ht=Fe.y*De,Je=Qe&&De>1?this._map(Fe,!0):null,$e=(oe<<5)+(ye+1)+this.points.length,Te=0,Ye=Ce;Te<Ye.length;Te+=1){var ft=Ye[Te],ke=st.points[ft];if(!(ke.zoom<=ye)){ke.zoom=ye;var Ne=ke.numPoints||1;pt+=ke.x*Ne,Ht+=ke.y*Ne,ke.parentId=$e,Qe&&(Je||(Je=this._map(Fe,!0)),Qe(Je,this._map(ke)))}}Fe.parentId=$e,Ve.push(ce(pt/tt,Ht/tt,$e,tt,Je))}else if(Ve.push(Fe),tt>1)for(var dt=0,Pt=Ce;dt<Pt.length;dt+=1){var rr=Pt[dt],xr=st.points[rr];xr.zoom<=ye||(xr.zoom=ye,Ve.push(xr))}}}return Ve},fe.prototype._getOriginId=function(Se){return Se-this.points.length>>5},fe.prototype._getOriginZoom=function(Se){return(Se-this.points.length)%32},fe.prototype._map=function(Se,ye){if(Se.numPoints)return ye?Ue({},Se.properties):Se.properties;var Ve=this.points[Se.index].properties,je=this.options.map(Ve);return ye&&je===Ve?Ue({},je):je};function ce(Le,Se,ye,Ve,je){return{x:we(Le),y:we(Se),zoom:1/0,id:ye,parentId:-1,numPoints:Ve,properties:je}}function J(Le,Se){var ye=Le.geometry.coordinates,Ve=ye[0],je=ye[1];return{x:we(ge(Ve)),y:we(be(je)),zoom:1/0,index:Se,parentId:-1}}function M(Le){return{type:"Feature",id:Le.id,properties:E(Le),geometry:{type:"Point",coordinates:[ze(Le.x),Be(Le.y)]}}}function E(Le){var Se=Le.numPoints,ye=Se>=1e4?Math.round(Se/1e3)+"k":Se>=1e3?Math.round(Se/100)/10+"k":Se;return Ue(Ue({},Le.properties),{cluster:!0,cluster_id:Le.id,point_count:Se,point_count_abbreviated:ye})}function ge(Le){return Le/360+.5}function be(Le){var Se=Math.sin(Le*Math.PI/180),ye=.5-.25*Math.log((1+Se)/(1-Se))/Math.PI;return ye<0?0:ye>1?1:ye}function ze(Le){return(Le-.5)*360}function Be(Le){var Se=(180-Le*360)*Math.PI/180;return 360*Math.atan(Math.exp(Se))/Math.PI-90}function Ue(Le,Se){for(var ye in Se)Le[ye]=Se[ye];return Le}function it(Le){return Le.x}function ht(Le){return Le.y}return fe})},27330:function(ct,N,k){var $;(function(K){(function(w){var W=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:te(),j=q(K);typeof W.Reflect!="undefined"&&(j=q(W.Reflect,j)),w(j,W),typeof W.Reflect=="undefined"&&(W.Reflect=K);function q(we,fe){return function(ce,J){Object.defineProperty(we,ce,{configurable:!0,writable:!0,value:J}),fe&&fe(ce,J)}}function Q(){try{return Function("return this;")()}catch(we){}}function ie(){try{return(0,eval)("(function() { return this; })()")}catch(we){}}function te(){return Q()||ie()}})(function(w,W){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",we={__proto__:[]}instanceof Array,fe=!te&&!we,ce={create:te?function(){return zr(Object.create(null))}:we?function(){return zr({__proto__:null})}:function(){return zr({})},has:fe?function(le,H){return j.call(le,H)}:function(le,H){return H in le},get:fe?function(le,H){return j.call(le,H)?le[H]:void 0}:function(le,H){return le[H]}},J=Object.getPrototypeOf(Function),M=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Sr(),E=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Er(),ge=typeof WeakMap=="function"?WeakMap:Fr(),be=q?Symbol.for("@reflect-metadata:registry"):void 0,ze=Yt(),Be=sr(ze);function Ue(le,H,re,Re){if(me(re)){if(!ft(le))throw new TypeError;if(!Ne(H))throw new TypeError;return Qe(le,H)}else{if(!ft(le))throw new TypeError;if(!pt(H))throw new TypeError;if(!pt(Re)&&!me(Re)&&!Ge(Re))throw new TypeError;return Ge(Re)&&(Re=void 0),re=Ye(re),ne(le,H,re,Re)}}w("decorate",Ue);function it(le,H){function re(Re,Ke){if(!pt(Re))throw new TypeError;if(!me(Ke)&&!dt(Ke))throw new TypeError;Ce(le,H,Re,Ke)}return re}w("metadata",it);function ht(le,H,re,Re){if(!pt(re))throw new TypeError;return me(Re)||(Re=Ye(Re)),Ce(le,H,re,Re)}w("defineMetadata",ht);function Le(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),We(le,H,re)}w("hasMetadata",Le);function Se(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),oe(le,H,re)}w("hasOwnMetadata",Se);function ye(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),Fe(le,H,re)}w("getMetadata",ye);function Ve(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),st(le,H,re)}w("getOwnMetadata",Ve);function je(le,H){if(!pt(le))throw new TypeError;return me(H)||(H=Ye(H)),De(le,H)}w("getMetadataKeys",je);function Et(le,H){if(!pt(le))throw new TypeError;return me(H)||(H=Ye(H)),tt(le,H)}w("getOwnMetadataKeys",Et);function Oe(le,H,re){if(!pt(H))throw new TypeError;if(me(re)||(re=Ye(re)),!pt(H))throw new TypeError;me(re)||(re=Ye(re));var Re=Qt(H,re,!1);return me(Re)?!1:Re.OrdinaryDeleteMetadata(le,H,re)}w("deleteMetadata",Oe);function Qe(le,H){for(var re=le.length-1;re>=0;--re){var Re=le[re],Ke=Re(H);if(!me(Ke)&&!Ge(Ke)){if(!Ne(Ke))throw new TypeError;H=Ke}}return H}function ne(le,H,re,Re){for(var Ke=le.length-1;Ke>=0;--Ke){var Tt=le[Ke],or=Tt(H,re,Re);if(!me(or)&&!Ge(or)){if(!pt(or))throw new TypeError;Re=or}}return Re}function We(le,H,re){var Re=oe(le,H,re);if(Re)return!0;var Ke=Xr(H);return Ge(Ke)?!1:We(le,Ke,re)}function oe(le,H,re){var Re=Qt(H,re,!1);return me(Re)?!1:$e(Re.OrdinaryHasOwnMetadata(le,H,re))}function Fe(le,H,re){var Re=oe(le,H,re);if(Re)return st(le,H,re);var Ke=Xr(H);if(!Ge(Ke))return Fe(le,Ke,re)}function st(le,H,re){var Re=Qt(H,re,!1);if(!me(Re))return Re.OrdinaryGetOwnMetadata(le,H,re)}function Ce(le,H,re,Re){var Ke=Qt(re,Re,!0);Ke.OrdinaryDefineOwnMetadata(le,H,re,Re)}function De(le,H){var re=tt(le,H),Re=Xr(le);if(Re===null)return re;var Ke=De(Re,H);if(Ke.length<=0)return re;if(re.length<=0)return Ke;for(var Tt=new E,or=[],jt=0,wt=re;jt<wt.length;jt++){var It=wt[jt],de=Tt.has(It);de||(Tt.add(It),or.push(It))}for(var pe=0,Me=Ke;pe<Me.length;pe++){var It=Me[pe],de=Tt.has(It);de||(Tt.add(It),or.push(It))}return or}function tt(le,H){var re=Qt(le,H,!1);return re?re.OrdinaryOwnMetadataKeys(le,H):[]}function _e(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function me(le){return le===void 0}function Ge(le){return le===null}function Ze(le){return typeof le=="symbol"}function pt(le){return typeof le=="object"?le!==null:typeof le=="function"}function Ht(le,H){switch(_e(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var re=H===3?"string":H===5?"number":"default",Re=rr(le,Q);if(Re!==void 0){var Ke=Re.call(le,re);if(pt(Ke))throw new TypeError;return Ke}return Je(le,re==="default"?"number":re)}function Je(le,H){if(H==="string"){var re=le.toString;if(ke(re)){var Re=re.call(le);if(!pt(Re))return Re}var Ke=le.valueOf;if(ke(Ke)){var Re=Ke.call(le);if(!pt(Re))return Re}}else{var Ke=le.valueOf;if(ke(Ke)){var Re=Ke.call(le);if(!pt(Re))return Re}var Tt=le.toString;if(ke(Tt)){var Re=Tt.call(le);if(!pt(Re))return Re}}throw new TypeError}function $e(le){return!!le}function Te(le){return""+le}function Ye(le){var H=Ht(le,3);return Ze(H)?H:Te(H)}function ft(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function ke(le){return typeof le=="function"}function Ne(le){return typeof le=="function"}function dt(le){switch(_e(le)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(le,H){return le===H||le!==le&&H!==H}function rr(le,H){var re=le[H];if(re!=null){if(!ke(re))throw new TypeError;return re}}function xr(le){var H=rr(le,ie);if(!ke(H))throw new TypeError;var re=H.call(le);if(!pt(re))throw new TypeError;return re}function ut(le){return le.value}function nn(le){var H=le.next();return H.done?!1:H}function Gr(le){var H=le.return;H&&H.call(le)}function Xr(le){var H=Object.getPrototypeOf(le);if(typeof le!="function"||le===J||H!==J)return H;var re=le.prototype,Re=re&&Object.getPrototypeOf(re);if(Re==null||Re===Object.prototype)return H;var Ke=Re.constructor;return typeof Ke!="function"||Ke===le?H:Ke}function Nt(){var le;!me(be)&&typeof W.Reflect!="undefined"&&!(be in W.Reflect)&&typeof W.Reflect.defineMetadata=="function"&&(le=Dt(W.Reflect));var H,re,Re,Ke=new ge,Tt={registerProvider:or,getProvider:wt,setProvider:de};return Tt;function or(pe){if(!Object.isExtensible(Tt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case le===pe:break;case me(H):H=pe;break;case H===pe:break;case me(re):re=pe;break;case re===pe:break;default:Re===void 0&&(Re=new E),Re.add(pe);break}}function jt(pe,Me){if(!me(H)){if(H.isProviderFor(pe,Me))return H;if(!me(re)){if(re.isProviderFor(pe,Me))return H;if(!me(Re))for(var et=xr(Re);;){var St=nn(et);if(!St)return;var Gt=ut(St);if(Gt.isProviderFor(pe,Me))return Gr(et),Gt}}}if(!me(le)&&le.isProviderFor(pe,Me))return le}function wt(pe,Me){var et=Ke.get(pe),St;return me(et)||(St=et.get(Me)),me(St)&&(St=jt(pe,Me),me(St)||(me(et)&&(et=new M,Ke.set(pe,et)),et.set(Me,St))),St}function It(pe){if(me(pe))throw new TypeError;return H===pe||re===pe||!me(Re)&&Re.has(pe)}function de(pe,Me,et){if(!It(et))throw new Error("Metadata provider not registered.");var St=wt(pe,Me);if(St!==et){if(!me(St))return!1;var Gt=Ke.get(pe);me(Gt)&&(Gt=new M,Ke.set(pe,Gt)),Gt.set(Me,et)}return!0}}function Yt(){var le;return!me(be)&&pt(W.Reflect)&&Object.isExtensible(W.Reflect)&&(le=W.Reflect[be]),me(le)&&(le=Nt()),!me(be)&&pt(W.Reflect)&&Object.isExtensible(W.Reflect)&&Object.defineProperty(W.Reflect,be,{enumerable:!1,configurable:!1,writable:!1,value:le}),le}function sr(le){var H=new ge,re={isProviderFor:function(It,de){var pe=H.get(It);return me(pe)?!1:pe.has(de)},OrdinaryDefineOwnMetadata:or,OrdinaryHasOwnMetadata:Ke,OrdinaryGetOwnMetadata:Tt,OrdinaryOwnMetadataKeys:jt,OrdinaryDeleteMetadata:wt};return ze.registerProvider(re),re;function Re(It,de,pe){var Me=H.get(It),et=!1;if(me(Me)){if(!pe)return;Me=new M,H.set(It,Me),et=!0}var St=Me.get(de);if(me(St)){if(!pe)return;if(St=new M,Me.set(de,St),!le.setProvider(It,de,re))throw Me.delete(de),et&&H.delete(It),new Error("Wrong provider for target.")}return St}function Ke(It,de,pe){var Me=Re(de,pe,!1);return me(Me)?!1:$e(Me.has(It))}function Tt(It,de,pe){var Me=Re(de,pe,!1);if(!me(Me))return Me.get(It)}function or(It,de,pe,Me){var et=Re(pe,Me,!0);et.set(It,de)}function jt(It,de){var pe=[],Me=Re(It,de,!1);if(me(Me))return pe;for(var et=Me.keys(),St=xr(et),Gt=0;;){var gr=nn(St);if(!gr)return pe.length=Gt,pe;var At=ut(gr);try{pe[Gt]=At}catch(ot){try{Gr(St)}finally{throw ot}}Gt++}}function wt(It,de,pe){var Me=Re(de,pe,!1);if(me(Me)||!Me.delete(It))return!1;if(Me.size===0){var et=H.get(de);me(et)||(et.delete(pe),et.size===0&&H.delete(et))}return!0}}function Dt(le){var H=le.defineMetadata,re=le.hasOwnMetadata,Re=le.getOwnMetadata,Ke=le.getOwnMetadataKeys,Tt=le.deleteMetadata,or=new ge,jt={isProviderFor:function(wt,It){var de=or.get(wt);return me(de)?Ke(wt,It).length?(me(de)&&(de=new E,or.set(wt,de)),de.add(It),!0):!1:de.has(It)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:re,OrdinaryGetOwnMetadata:Re,OrdinaryOwnMetadataKeys:Ke,OrdinaryDeleteMetadata:Tt};return jt}function Qt(le,H,re){var Re=ze.getProvider(le,H);if(!me(Re))return Re;if(re){if(ze.setProvider(le,H,Be))return Be;throw new Error("Illegal state.")}}function Sr(){var le={},H=[],re=function(){function jt(wt,It,de){this._index=0,this._keys=wt,this._values=It,this._selector=de}return jt.prototype["@@iterator"]=function(){return this},jt.prototype[ie]=function(){return this},jt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var It=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:It,done:!1}}return{value:void 0,done:!0}},jt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),wt},jt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:wt,done:!0}},jt}(),Re=function(){function jt(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(jt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),jt.prototype.has=function(wt){return this._find(wt,!1)>=0},jt.prototype.get=function(wt){var It=this._find(wt,!1);return It>=0?this._values[It]:void 0},jt.prototype.set=function(wt,It){var de=this._find(wt,!0);return this._values[de]=It,this},jt.prototype.delete=function(wt){var It=this._find(wt,!1);if(It>=0){for(var de=this._keys.length,pe=It+1;pe<de;pe++)this._keys[pe-1]=this._keys[pe],this._values[pe-1]=this._values[pe];return this._keys.length--,this._values.length--,Pt(wt,this._cacheKey)&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},jt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},jt.prototype.keys=function(){return new re(this._keys,this._values,Ke)},jt.prototype.values=function(){return new re(this._keys,this._values,Tt)},jt.prototype.entries=function(){return new re(this._keys,this._values,or)},jt.prototype["@@iterator"]=function(){return this.entries()},jt.prototype[ie]=function(){return this.entries()},jt.prototype._find=function(wt,It){if(!Pt(this._cacheKey,wt)){this._cacheIndex=-1;for(var de=0;de<this._keys.length;de++)if(Pt(this._keys[de],wt)){this._cacheIndex=de;break}}return this._cacheIndex<0&&It&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},jt}();return Re;function Ke(jt,wt){return jt}function Tt(jt,wt){return wt}function or(jt,wt){return[jt,wt]}}function Er(){var le=function(){function H(){this._map=new M}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(re){return this._map.has(re)},H.prototype.add=function(re){return this._map.set(re,re),this},H.prototype.delete=function(re){return this._map.delete(re)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[ie]=function(){return this.keys()},H}();return le}function Fr(){var le=16,H=ce.create(),re=Re();return function(){function wt(){this._key=Re()}return wt.prototype.has=function(It){var de=Ke(It,!1);return de!==void 0?ce.has(de,this._key):!1},wt.prototype.get=function(It){var de=Ke(It,!1);return de!==void 0?ce.get(de,this._key):void 0},wt.prototype.set=function(It,de){var pe=Ke(It,!0);return pe[this._key]=de,this},wt.prototype.delete=function(It){var de=Ke(It,!1);return de!==void 0?delete de[this._key]:!1},wt.prototype.clear=function(){this._key=Re()},wt}();function Re(){var wt;do wt="@@WeakMap@@"+jt();while(ce.has(H,wt));return H[wt]=!0,wt}function Ke(wt,It){if(!j.call(wt,re)){if(!It)return;Object.defineProperty(wt,re,{value:ce.create()})}return wt[re]}function Tt(wt,It){for(var de=0;de<It;++de)wt[de]=Math.random()*255|0;return wt}function or(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):Tt(new Uint8Array(wt),wt):Tt(new Array(wt),wt)}function jt(){var wt=or(le);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var It="",de=0;de<le;++de){var pe=wt[de];(de===4||de===6||de===8)&&(It+="-"),pe<16&&(It+="0"),It+=pe.toString(16).toLowerCase()}return It}}function zr(le){return le.__=void 0,delete le.__,le}})})($||($={}))},59858:function(ct,N,k){var $;(function(K){(function(w){var W=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:te(),j=q(K);typeof W.Reflect!="undefined"&&(j=q(W.Reflect,j)),w(j,W),typeof W.Reflect=="undefined"&&(W.Reflect=K);function q(we,fe){return function(ce,J){Object.defineProperty(we,ce,{configurable:!0,writable:!0,value:J}),fe&&fe(ce,J)}}function Q(){try{return Function("return this;")()}catch(we){}}function ie(){try{return(0,eval)("(function() { return this; })()")}catch(we){}}function te(){return Q()||ie()}})(function(w,W){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",we={__proto__:[]}instanceof Array,fe=!te&&!we,ce={create:te?function(){return zr(Object.create(null))}:we?function(){return zr({__proto__:null})}:function(){return zr({})},has:fe?function(le,H){return j.call(le,H)}:function(le,H){return H in le},get:fe?function(le,H){return j.call(le,H)?le[H]:void 0}:function(le,H){return le[H]}},J=Object.getPrototypeOf(Function),M=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Sr(),E=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Er(),ge=typeof WeakMap=="function"?WeakMap:Fr(),be=q?Symbol.for("@reflect-metadata:registry"):void 0,ze=Yt(),Be=sr(ze);function Ue(le,H,re,Re){if(me(re)){if(!ft(le))throw new TypeError;if(!Ne(H))throw new TypeError;return Qe(le,H)}else{if(!ft(le))throw new TypeError;if(!pt(H))throw new TypeError;if(!pt(Re)&&!me(Re)&&!Ge(Re))throw new TypeError;return Ge(Re)&&(Re=void 0),re=Ye(re),ne(le,H,re,Re)}}w("decorate",Ue);function it(le,H){function re(Re,Ke){if(!pt(Re))throw new TypeError;if(!me(Ke)&&!dt(Ke))throw new TypeError;Ce(le,H,Re,Ke)}return re}w("metadata",it);function ht(le,H,re,Re){if(!pt(re))throw new TypeError;return me(Re)||(Re=Ye(Re)),Ce(le,H,re,Re)}w("defineMetadata",ht);function Le(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),We(le,H,re)}w("hasMetadata",Le);function Se(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),oe(le,H,re)}w("hasOwnMetadata",Se);function ye(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),Fe(le,H,re)}w("getMetadata",ye);function Ve(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),st(le,H,re)}w("getOwnMetadata",Ve);function je(le,H){if(!pt(le))throw new TypeError;return me(H)||(H=Ye(H)),De(le,H)}w("getMetadataKeys",je);function Et(le,H){if(!pt(le))throw new TypeError;return me(H)||(H=Ye(H)),tt(le,H)}w("getOwnMetadataKeys",Et);function Oe(le,H,re){if(!pt(H))throw new TypeError;if(me(re)||(re=Ye(re)),!pt(H))throw new TypeError;me(re)||(re=Ye(re));var Re=Qt(H,re,!1);return me(Re)?!1:Re.OrdinaryDeleteMetadata(le,H,re)}w("deleteMetadata",Oe);function Qe(le,H){for(var re=le.length-1;re>=0;--re){var Re=le[re],Ke=Re(H);if(!me(Ke)&&!Ge(Ke)){if(!Ne(Ke))throw new TypeError;H=Ke}}return H}function ne(le,H,re,Re){for(var Ke=le.length-1;Ke>=0;--Ke){var Tt=le[Ke],or=Tt(H,re,Re);if(!me(or)&&!Ge(or)){if(!pt(or))throw new TypeError;Re=or}}return Re}function We(le,H,re){var Re=oe(le,H,re);if(Re)return!0;var Ke=Xr(H);return Ge(Ke)?!1:We(le,Ke,re)}function oe(le,H,re){var Re=Qt(H,re,!1);return me(Re)?!1:$e(Re.OrdinaryHasOwnMetadata(le,H,re))}function Fe(le,H,re){var Re=oe(le,H,re);if(Re)return st(le,H,re);var Ke=Xr(H);if(!Ge(Ke))return Fe(le,Ke,re)}function st(le,H,re){var Re=Qt(H,re,!1);if(!me(Re))return Re.OrdinaryGetOwnMetadata(le,H,re)}function Ce(le,H,re,Re){var Ke=Qt(re,Re,!0);Ke.OrdinaryDefineOwnMetadata(le,H,re,Re)}function De(le,H){var re=tt(le,H),Re=Xr(le);if(Re===null)return re;var Ke=De(Re,H);if(Ke.length<=0)return re;if(re.length<=0)return Ke;for(var Tt=new E,or=[],jt=0,wt=re;jt<wt.length;jt++){var It=wt[jt],de=Tt.has(It);de||(Tt.add(It),or.push(It))}for(var pe=0,Me=Ke;pe<Me.length;pe++){var It=Me[pe],de=Tt.has(It);de||(Tt.add(It),or.push(It))}return or}function tt(le,H){var re=Qt(le,H,!1);return re?re.OrdinaryOwnMetadataKeys(le,H):[]}function _e(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function me(le){return le===void 0}function Ge(le){return le===null}function Ze(le){return typeof le=="symbol"}function pt(le){return typeof le=="object"?le!==null:typeof le=="function"}function Ht(le,H){switch(_e(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var re=H===3?"string":H===5?"number":"default",Re=rr(le,Q);if(Re!==void 0){var Ke=Re.call(le,re);if(pt(Ke))throw new TypeError;return Ke}return Je(le,re==="default"?"number":re)}function Je(le,H){if(H==="string"){var re=le.toString;if(ke(re)){var Re=re.call(le);if(!pt(Re))return Re}var Ke=le.valueOf;if(ke(Ke)){var Re=Ke.call(le);if(!pt(Re))return Re}}else{var Ke=le.valueOf;if(ke(Ke)){var Re=Ke.call(le);if(!pt(Re))return Re}var Tt=le.toString;if(ke(Tt)){var Re=Tt.call(le);if(!pt(Re))return Re}}throw new TypeError}function $e(le){return!!le}function Te(le){return""+le}function Ye(le){var H=Ht(le,3);return Ze(H)?H:Te(H)}function ft(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function ke(le){return typeof le=="function"}function Ne(le){return typeof le=="function"}function dt(le){switch(_e(le)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(le,H){return le===H||le!==le&&H!==H}function rr(le,H){var re=le[H];if(re!=null){if(!ke(re))throw new TypeError;return re}}function xr(le){var H=rr(le,ie);if(!ke(H))throw new TypeError;var re=H.call(le);if(!pt(re))throw new TypeError;return re}function ut(le){return le.value}function nn(le){var H=le.next();return H.done?!1:H}function Gr(le){var H=le.return;H&&H.call(le)}function Xr(le){var H=Object.getPrototypeOf(le);if(typeof le!="function"||le===J||H!==J)return H;var re=le.prototype,Re=re&&Object.getPrototypeOf(re);if(Re==null||Re===Object.prototype)return H;var Ke=Re.constructor;return typeof Ke!="function"||Ke===le?H:Ke}function Nt(){var le;!me(be)&&typeof W.Reflect!="undefined"&&!(be in W.Reflect)&&typeof W.Reflect.defineMetadata=="function"&&(le=Dt(W.Reflect));var H,re,Re,Ke=new ge,Tt={registerProvider:or,getProvider:wt,setProvider:de};return Tt;function or(pe){if(!Object.isExtensible(Tt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case le===pe:break;case me(H):H=pe;break;case H===pe:break;case me(re):re=pe;break;case re===pe:break;default:Re===void 0&&(Re=new E),Re.add(pe);break}}function jt(pe,Me){if(!me(H)){if(H.isProviderFor(pe,Me))return H;if(!me(re)){if(re.isProviderFor(pe,Me))return H;if(!me(Re))for(var et=xr(Re);;){var St=nn(et);if(!St)return;var Gt=ut(St);if(Gt.isProviderFor(pe,Me))return Gr(et),Gt}}}if(!me(le)&&le.isProviderFor(pe,Me))return le}function wt(pe,Me){var et=Ke.get(pe),St;return me(et)||(St=et.get(Me)),me(St)&&(St=jt(pe,Me),me(St)||(me(et)&&(et=new M,Ke.set(pe,et)),et.set(Me,St))),St}function It(pe){if(me(pe))throw new TypeError;return H===pe||re===pe||!me(Re)&&Re.has(pe)}function de(pe,Me,et){if(!It(et))throw new Error("Metadata provider not registered.");var St=wt(pe,Me);if(St!==et){if(!me(St))return!1;var Gt=Ke.get(pe);me(Gt)&&(Gt=new M,Ke.set(pe,Gt)),Gt.set(Me,et)}return!0}}function Yt(){var le;return!me(be)&&pt(W.Reflect)&&Object.isExtensible(W.Reflect)&&(le=W.Reflect[be]),me(le)&&(le=Nt()),!me(be)&&pt(W.Reflect)&&Object.isExtensible(W.Reflect)&&Object.defineProperty(W.Reflect,be,{enumerable:!1,configurable:!1,writable:!1,value:le}),le}function sr(le){var H=new ge,re={isProviderFor:function(It,de){var pe=H.get(It);return me(pe)?!1:pe.has(de)},OrdinaryDefineOwnMetadata:or,OrdinaryHasOwnMetadata:Ke,OrdinaryGetOwnMetadata:Tt,OrdinaryOwnMetadataKeys:jt,OrdinaryDeleteMetadata:wt};return ze.registerProvider(re),re;function Re(It,de,pe){var Me=H.get(It),et=!1;if(me(Me)){if(!pe)return;Me=new M,H.set(It,Me),et=!0}var St=Me.get(de);if(me(St)){if(!pe)return;if(St=new M,Me.set(de,St),!le.setProvider(It,de,re))throw Me.delete(de),et&&H.delete(It),new Error("Wrong provider for target.")}return St}function Ke(It,de,pe){var Me=Re(de,pe,!1);return me(Me)?!1:$e(Me.has(It))}function Tt(It,de,pe){var Me=Re(de,pe,!1);if(!me(Me))return Me.get(It)}function or(It,de,pe,Me){var et=Re(pe,Me,!0);et.set(It,de)}function jt(It,de){var pe=[],Me=Re(It,de,!1);if(me(Me))return pe;for(var et=Me.keys(),St=xr(et),Gt=0;;){var gr=nn(St);if(!gr)return pe.length=Gt,pe;var At=ut(gr);try{pe[Gt]=At}catch(ot){try{Gr(St)}finally{throw ot}}Gt++}}function wt(It,de,pe){var Me=Re(de,pe,!1);if(me(Me)||!Me.delete(It))return!1;if(Me.size===0){var et=H.get(de);me(et)||(et.delete(pe),et.size===0&&H.delete(et))}return!0}}function Dt(le){var H=le.defineMetadata,re=le.hasOwnMetadata,Re=le.getOwnMetadata,Ke=le.getOwnMetadataKeys,Tt=le.deleteMetadata,or=new ge,jt={isProviderFor:function(wt,It){var de=or.get(wt);return me(de)?Ke(wt,It).length?(me(de)&&(de=new E,or.set(wt,de)),de.add(It),!0):!1:de.has(It)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:re,OrdinaryGetOwnMetadata:Re,OrdinaryOwnMetadataKeys:Ke,OrdinaryDeleteMetadata:Tt};return jt}function Qt(le,H,re){var Re=ze.getProvider(le,H);if(!me(Re))return Re;if(re){if(ze.setProvider(le,H,Be))return Be;throw new Error("Illegal state.")}}function Sr(){var le={},H=[],re=function(){function jt(wt,It,de){this._index=0,this._keys=wt,this._values=It,this._selector=de}return jt.prototype["@@iterator"]=function(){return this},jt.prototype[ie]=function(){return this},jt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var It=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:It,done:!1}}return{value:void 0,done:!0}},jt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),wt},jt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:wt,done:!0}},jt}(),Re=function(){function jt(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(jt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),jt.prototype.has=function(wt){return this._find(wt,!1)>=0},jt.prototype.get=function(wt){var It=this._find(wt,!1);return It>=0?this._values[It]:void 0},jt.prototype.set=function(wt,It){var de=this._find(wt,!0);return this._values[de]=It,this},jt.prototype.delete=function(wt){var It=this._find(wt,!1);if(It>=0){for(var de=this._keys.length,pe=It+1;pe<de;pe++)this._keys[pe-1]=this._keys[pe],this._values[pe-1]=this._values[pe];return this._keys.length--,this._values.length--,Pt(wt,this._cacheKey)&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},jt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},jt.prototype.keys=function(){return new re(this._keys,this._values,Ke)},jt.prototype.values=function(){return new re(this._keys,this._values,Tt)},jt.prototype.entries=function(){return new re(this._keys,this._values,or)},jt.prototype["@@iterator"]=function(){return this.entries()},jt.prototype[ie]=function(){return this.entries()},jt.prototype._find=function(wt,It){if(!Pt(this._cacheKey,wt)){this._cacheIndex=-1;for(var de=0;de<this._keys.length;de++)if(Pt(this._keys[de],wt)){this._cacheIndex=de;break}}return this._cacheIndex<0&&It&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},jt}();return Re;function Ke(jt,wt){return jt}function Tt(jt,wt){return wt}function or(jt,wt){return[jt,wt]}}function Er(){var le=function(){function H(){this._map=new M}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(re){return this._map.has(re)},H.prototype.add=function(re){return this._map.set(re,re),this},H.prototype.delete=function(re){return this._map.delete(re)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[ie]=function(){return this.keys()},H}();return le}function Fr(){var le=16,H=ce.create(),re=Re();return function(){function wt(){this._key=Re()}return wt.prototype.has=function(It){var de=Ke(It,!1);return de!==void 0?ce.has(de,this._key):!1},wt.prototype.get=function(It){var de=Ke(It,!1);return de!==void 0?ce.get(de,this._key):void 0},wt.prototype.set=function(It,de){var pe=Ke(It,!0);return pe[this._key]=de,this},wt.prototype.delete=function(It){var de=Ke(It,!1);return de!==void 0?delete de[this._key]:!1},wt.prototype.clear=function(){this._key=Re()},wt}();function Re(){var wt;do wt="@@WeakMap@@"+jt();while(ce.has(H,wt));return H[wt]=!0,wt}function Ke(wt,It){if(!j.call(wt,re)){if(!It)return;Object.defineProperty(wt,re,{value:ce.create()})}return wt[re]}function Tt(wt,It){for(var de=0;de<It;++de)wt[de]=Math.random()*255|0;return wt}function or(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):Tt(new Uint8Array(wt),wt):Tt(new Array(wt),wt)}function jt(){var wt=or(le);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var It="",de=0;de<le;++de){var pe=wt[de];(de===4||de===6||de===8)&&(It+="-"),pe<16&&(It+="0"),It+=pe.toString(16).toLowerCase()}return It}}function zr(le){return le.__=void 0,delete le.__,le}})})($||($={}))},31857:function(ct,N,k){var $;(function(K){(function(w){var W=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:te(),j=q(K);typeof W.Reflect!="undefined"&&(j=q(W.Reflect,j)),w(j,W),typeof W.Reflect=="undefined"&&(W.Reflect=K);function q(we,fe){return function(ce,J){Object.defineProperty(we,ce,{configurable:!0,writable:!0,value:J}),fe&&fe(ce,J)}}function Q(){try{return Function("return this;")()}catch(we){}}function ie(){try{return(0,eval)("(function() { return this; })()")}catch(we){}}function te(){return Q()||ie()}})(function(w,W){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",we={__proto__:[]}instanceof Array,fe=!te&&!we,ce={create:te?function(){return zr(Object.create(null))}:we?function(){return zr({__proto__:null})}:function(){return zr({})},has:fe?function(le,H){return j.call(le,H)}:function(le,H){return H in le},get:fe?function(le,H){return j.call(le,H)?le[H]:void 0}:function(le,H){return le[H]}},J=Object.getPrototypeOf(Function),M=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Sr(),E=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Er(),ge=typeof WeakMap=="function"?WeakMap:Fr(),be=q?Symbol.for("@reflect-metadata:registry"):void 0,ze=Yt(),Be=sr(ze);function Ue(le,H,re,Re){if(me(re)){if(!ft(le))throw new TypeError;if(!Ne(H))throw new TypeError;return Qe(le,H)}else{if(!ft(le))throw new TypeError;if(!pt(H))throw new TypeError;if(!pt(Re)&&!me(Re)&&!Ge(Re))throw new TypeError;return Ge(Re)&&(Re=void 0),re=Ye(re),ne(le,H,re,Re)}}w("decorate",Ue);function it(le,H){function re(Re,Ke){if(!pt(Re))throw new TypeError;if(!me(Ke)&&!dt(Ke))throw new TypeError;Ce(le,H,Re,Ke)}return re}w("metadata",it);function ht(le,H,re,Re){if(!pt(re))throw new TypeError;return me(Re)||(Re=Ye(Re)),Ce(le,H,re,Re)}w("defineMetadata",ht);function Le(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),We(le,H,re)}w("hasMetadata",Le);function Se(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),oe(le,H,re)}w("hasOwnMetadata",Se);function ye(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),Fe(le,H,re)}w("getMetadata",ye);function Ve(le,H,re){if(!pt(H))throw new TypeError;return me(re)||(re=Ye(re)),st(le,H,re)}w("getOwnMetadata",Ve);function je(le,H){if(!pt(le))throw new TypeError;return me(H)||(H=Ye(H)),De(le,H)}w("getMetadataKeys",je);function Et(le,H){if(!pt(le))throw new TypeError;return me(H)||(H=Ye(H)),tt(le,H)}w("getOwnMetadataKeys",Et);function Oe(le,H,re){if(!pt(H))throw new TypeError;if(me(re)||(re=Ye(re)),!pt(H))throw new TypeError;me(re)||(re=Ye(re));var Re=Qt(H,re,!1);return me(Re)?!1:Re.OrdinaryDeleteMetadata(le,H,re)}w("deleteMetadata",Oe);function Qe(le,H){for(var re=le.length-1;re>=0;--re){var Re=le[re],Ke=Re(H);if(!me(Ke)&&!Ge(Ke)){if(!Ne(Ke))throw new TypeError;H=Ke}}return H}function ne(le,H,re,Re){for(var Ke=le.length-1;Ke>=0;--Ke){var Tt=le[Ke],or=Tt(H,re,Re);if(!me(or)&&!Ge(or)){if(!pt(or))throw new TypeError;Re=or}}return Re}function We(le,H,re){var Re=oe(le,H,re);if(Re)return!0;var Ke=Xr(H);return Ge(Ke)?!1:We(le,Ke,re)}function oe(le,H,re){var Re=Qt(H,re,!1);return me(Re)?!1:$e(Re.OrdinaryHasOwnMetadata(le,H,re))}function Fe(le,H,re){var Re=oe(le,H,re);if(Re)return st(le,H,re);var Ke=Xr(H);if(!Ge(Ke))return Fe(le,Ke,re)}function st(le,H,re){var Re=Qt(H,re,!1);if(!me(Re))return Re.OrdinaryGetOwnMetadata(le,H,re)}function Ce(le,H,re,Re){var Ke=Qt(re,Re,!0);Ke.OrdinaryDefineOwnMetadata(le,H,re,Re)}function De(le,H){var re=tt(le,H),Re=Xr(le);if(Re===null)return re;var Ke=De(Re,H);if(Ke.length<=0)return re;if(re.length<=0)return Ke;for(var Tt=new E,or=[],jt=0,wt=re;jt<wt.length;jt++){var It=wt[jt],de=Tt.has(It);de||(Tt.add(It),or.push(It))}for(var pe=0,Me=Ke;pe<Me.length;pe++){var It=Me[pe],de=Tt.has(It);de||(Tt.add(It),or.push(It))}return or}function tt(le,H){var re=Qt(le,H,!1);return re?re.OrdinaryOwnMetadataKeys(le,H):[]}function _e(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function me(le){return le===void 0}function Ge(le){return le===null}function Ze(le){return typeof le=="symbol"}function pt(le){return typeof le=="object"?le!==null:typeof le=="function"}function Ht(le,H){switch(_e(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var re=H===3?"string":H===5?"number":"default",Re=rr(le,Q);if(Re!==void 0){var Ke=Re.call(le,re);if(pt(Ke))throw new TypeError;return Ke}return Je(le,re==="default"?"number":re)}function Je(le,H){if(H==="string"){var re=le.toString;if(ke(re)){var Re=re.call(le);if(!pt(Re))return Re}var Ke=le.valueOf;if(ke(Ke)){var Re=Ke.call(le);if(!pt(Re))return Re}}else{var Ke=le.valueOf;if(ke(Ke)){var Re=Ke.call(le);if(!pt(Re))return Re}var Tt=le.toString;if(ke(Tt)){var Re=Tt.call(le);if(!pt(Re))return Re}}throw new TypeError}function $e(le){return!!le}function Te(le){return""+le}function Ye(le){var H=Ht(le,3);return Ze(H)?H:Te(H)}function ft(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function ke(le){return typeof le=="function"}function Ne(le){return typeof le=="function"}function dt(le){switch(_e(le)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(le,H){return le===H||le!==le&&H!==H}function rr(le,H){var re=le[H];if(re!=null){if(!ke(re))throw new TypeError;return re}}function xr(le){var H=rr(le,ie);if(!ke(H))throw new TypeError;var re=H.call(le);if(!pt(re))throw new TypeError;return re}function ut(le){return le.value}function nn(le){var H=le.next();return H.done?!1:H}function Gr(le){var H=le.return;H&&H.call(le)}function Xr(le){var H=Object.getPrototypeOf(le);if(typeof le!="function"||le===J||H!==J)return H;var re=le.prototype,Re=re&&Object.getPrototypeOf(re);if(Re==null||Re===Object.prototype)return H;var Ke=Re.constructor;return typeof Ke!="function"||Ke===le?H:Ke}function Nt(){var le;!me(be)&&typeof W.Reflect!="undefined"&&!(be in W.Reflect)&&typeof W.Reflect.defineMetadata=="function"&&(le=Dt(W.Reflect));var H,re,Re,Ke=new ge,Tt={registerProvider:or,getProvider:wt,setProvider:de};return Tt;function or(pe){if(!Object.isExtensible(Tt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case le===pe:break;case me(H):H=pe;break;case H===pe:break;case me(re):re=pe;break;case re===pe:break;default:Re===void 0&&(Re=new E),Re.add(pe);break}}function jt(pe,Me){if(!me(H)){if(H.isProviderFor(pe,Me))return H;if(!me(re)){if(re.isProviderFor(pe,Me))return H;if(!me(Re))for(var et=xr(Re);;){var St=nn(et);if(!St)return;var Gt=ut(St);if(Gt.isProviderFor(pe,Me))return Gr(et),Gt}}}if(!me(le)&&le.isProviderFor(pe,Me))return le}function wt(pe,Me){var et=Ke.get(pe),St;return me(et)||(St=et.get(Me)),me(St)&&(St=jt(pe,Me),me(St)||(me(et)&&(et=new M,Ke.set(pe,et)),et.set(Me,St))),St}function It(pe){if(me(pe))throw new TypeError;return H===pe||re===pe||!me(Re)&&Re.has(pe)}function de(pe,Me,et){if(!It(et))throw new Error("Metadata provider not registered.");var St=wt(pe,Me);if(St!==et){if(!me(St))return!1;var Gt=Ke.get(pe);me(Gt)&&(Gt=new M,Ke.set(pe,Gt)),Gt.set(Me,et)}return!0}}function Yt(){var le;return!me(be)&&pt(W.Reflect)&&Object.isExtensible(W.Reflect)&&(le=W.Reflect[be]),me(le)&&(le=Nt()),!me(be)&&pt(W.Reflect)&&Object.isExtensible(W.Reflect)&&Object.defineProperty(W.Reflect,be,{enumerable:!1,configurable:!1,writable:!1,value:le}),le}function sr(le){var H=new ge,re={isProviderFor:function(It,de){var pe=H.get(It);return me(pe)?!1:pe.has(de)},OrdinaryDefineOwnMetadata:or,OrdinaryHasOwnMetadata:Ke,OrdinaryGetOwnMetadata:Tt,OrdinaryOwnMetadataKeys:jt,OrdinaryDeleteMetadata:wt};return ze.registerProvider(re),re;function Re(It,de,pe){var Me=H.get(It),et=!1;if(me(Me)){if(!pe)return;Me=new M,H.set(It,Me),et=!0}var St=Me.get(de);if(me(St)){if(!pe)return;if(St=new M,Me.set(de,St),!le.setProvider(It,de,re))throw Me.delete(de),et&&H.delete(It),new Error("Wrong provider for target.")}return St}function Ke(It,de,pe){var Me=Re(de,pe,!1);return me(Me)?!1:$e(Me.has(It))}function Tt(It,de,pe){var Me=Re(de,pe,!1);if(!me(Me))return Me.get(It)}function or(It,de,pe,Me){var et=Re(pe,Me,!0);et.set(It,de)}function jt(It,de){var pe=[],Me=Re(It,de,!1);if(me(Me))return pe;for(var et=Me.keys(),St=xr(et),Gt=0;;){var gr=nn(St);if(!gr)return pe.length=Gt,pe;var At=ut(gr);try{pe[Gt]=At}catch(ot){try{Gr(St)}finally{throw ot}}Gt++}}function wt(It,de,pe){var Me=Re(de,pe,!1);if(me(Me)||!Me.delete(It))return!1;if(Me.size===0){var et=H.get(de);me(et)||(et.delete(pe),et.size===0&&H.delete(et))}return!0}}function Dt(le){var H=le.defineMetadata,re=le.hasOwnMetadata,Re=le.getOwnMetadata,Ke=le.getOwnMetadataKeys,Tt=le.deleteMetadata,or=new ge,jt={isProviderFor:function(wt,It){var de=or.get(wt);return me(de)?Ke(wt,It).length?(me(de)&&(de=new E,or.set(wt,de)),de.add(It),!0):!1:de.has(It)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:re,OrdinaryGetOwnMetadata:Re,OrdinaryOwnMetadataKeys:Ke,OrdinaryDeleteMetadata:Tt};return jt}function Qt(le,H,re){var Re=ze.getProvider(le,H);if(!me(Re))return Re;if(re){if(ze.setProvider(le,H,Be))return Be;throw new Error("Illegal state.")}}function Sr(){var le={},H=[],re=function(){function jt(wt,It,de){this._index=0,this._keys=wt,this._values=It,this._selector=de}return jt.prototype["@@iterator"]=function(){return this},jt.prototype[ie]=function(){return this},jt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var It=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:It,done:!1}}return{value:void 0,done:!0}},jt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),wt},jt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:wt,done:!0}},jt}(),Re=function(){function jt(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(jt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),jt.prototype.has=function(wt){return this._find(wt,!1)>=0},jt.prototype.get=function(wt){var It=this._find(wt,!1);return It>=0?this._values[It]:void 0},jt.prototype.set=function(wt,It){var de=this._find(wt,!0);return this._values[de]=It,this},jt.prototype.delete=function(wt){var It=this._find(wt,!1);if(It>=0){for(var de=this._keys.length,pe=It+1;pe<de;pe++)this._keys[pe-1]=this._keys[pe],this._values[pe-1]=this._values[pe];return this._keys.length--,this._values.length--,Pt(wt,this._cacheKey)&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},jt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},jt.prototype.keys=function(){return new re(this._keys,this._values,Ke)},jt.prototype.values=function(){return new re(this._keys,this._values,Tt)},jt.prototype.entries=function(){return new re(this._keys,this._values,or)},jt.prototype["@@iterator"]=function(){return this.entries()},jt.prototype[ie]=function(){return this.entries()},jt.prototype._find=function(wt,It){if(!Pt(this._cacheKey,wt)){this._cacheIndex=-1;for(var de=0;de<this._keys.length;de++)if(Pt(this._keys[de],wt)){this._cacheIndex=de;break}}return this._cacheIndex<0&&It&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},jt}();return Re;function Ke(jt,wt){return jt}function Tt(jt,wt){return wt}function or(jt,wt){return[jt,wt]}}function Er(){var le=function(){function H(){this._map=new M}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(re){return this._map.has(re)},H.prototype.add=function(re){return this._map.set(re,re),this},H.prototype.delete=function(re){return this._map.delete(re)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[ie]=function(){return this.keys()},H}();return le}function Fr(){var le=16,H=ce.create(),re=Re();return function(){function wt(){this._key=Re()}return wt.prototype.has=function(It){var de=Ke(It,!1);return de!==void 0?ce.has(de,this._key):!1},wt.prototype.get=function(It){var de=Ke(It,!1);return de!==void 0?ce.get(de,this._key):void 0},wt.prototype.set=function(It,de){var pe=Ke(It,!0);return pe[this._key]=de,this},wt.prototype.delete=function(It){var de=Ke(It,!1);return de!==void 0?delete de[this._key]:!1},wt.prototype.clear=function(){this._key=Re()},wt}();function Re(){var wt;do wt="@@WeakMap@@"+jt();while(ce.has(H,wt));return H[wt]=!0,wt}function Ke(wt,It){if(!j.call(wt,re)){if(!It)return;Object.defineProperty(wt,re,{value:ce.create()})}return wt[re]}function Tt(wt,It){for(var de=0;de<It;++de)wt[de]=Math.random()*255|0;return wt}function or(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):Tt(new Uint8Array(wt),wt):Tt(new Array(wt),wt)}function jt(){var wt=or(le);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var It="",de=0;de<le;++de){var pe=wt[de];(de===4||de===6||de===8)&&(It+="-"),pe<16&&(It+="0"),It+=pe.toString(16).toLowerCase()}return It}}function zr(le){return le.__=void 0,delete le.__,le}})})($||($={}))},73897:function(ct){function N(k,$){($==null||$>k.length)&&($=k.length);for(var K=0,w=new Array($);K<$;K++)w[K]=k[K];return w}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},85372:function(ct){function N(k){if(Array.isArray(k))return k}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},63405:function(ct,N,k){var $=k(73897);function K(w){if(Array.isArray(w))return $(w)}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},66115:function(ct){function N(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},56690:function(ct){function N(k,$){if(!(k instanceof $))throw new TypeError("Cannot call a class as a function")}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},89728:function(ct,N,k){var $=k(64062);function K(W,j){for(var q=0;q<j.length;q++){var Q=j[q];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(W,$(Q.key),Q)}}function w(W,j,q){return j&&K(W.prototype,j),q&&K(W,q),Object.defineProperty(W,"prototype",{writable:!1}),W}ct.exports=w,ct.exports.__esModule=!0,ct.exports.default=ct.exports},26389:function(ct,N,k){var $=k(73808),K=k(69617),w=k(94993);function W(j){var q=K();return function(){var ie=$(j),te;if(q){var we=$(this).constructor;te=Reflect.construct(ie,arguments,we)}else te=ie.apply(this,arguments);return w(this,te)}}ct.exports=W,ct.exports.__esModule=!0,ct.exports.default=ct.exports},38416:function(ct,N,k){var $=k(64062);function K(w,W,j){return W=$(W),W in w?Object.defineProperty(w,W,{value:j,enumerable:!0,configurable:!0,writable:!0}):w[W]=j,w}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},73808:function(ct){function N(k){return ct.exports=N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)},ct.exports.__esModule=!0,ct.exports.default=ct.exports,N(k)}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},61655:function(ct,N,k){var $=k(6015);function K(w,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(W&&W.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),W&&$(w,W)}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},75263:function(ct,N,k){var $=k(18698).default;function K(W){if(typeof WeakMap!="function")return null;var j=new WeakMap,q=new WeakMap;return(K=function(ie){return ie?q:j})(W)}function w(W,j){if(!j&&W&&W.__esModule)return W;if(W===null||$(W)!="object"&&typeof W!="function")return{default:W};var q=K(j);if(q&&q.has(W))return q.get(W);var Q={__proto__:null},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in W)if(te!=="default"&&Object.prototype.hasOwnProperty.call(W,te)){var we=ie?Object.getOwnPropertyDescriptor(W,te):null;we&&(we.get||we.set)?Object.defineProperty(Q,te,we):Q[te]=W[te]}return Q.default=W,q&&q.set(W,Q),Q}ct.exports=w,ct.exports.__esModule=!0,ct.exports.default=ct.exports},69617:function(ct){function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},79498:function(ct){function N(k){if(typeof Symbol!="undefined"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},68872:function(ct){function N(k,$){var K=k==null?null:typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(K!=null){var w,W,j,q,Q=[],ie=!0,te=!1;try{if(j=(K=K.call(k)).next,$===0){if(Object(K)!==K)return;ie=!1}else for(;!(ie=(w=j.call(K)).done)&&(Q.push(w.value),Q.length!==$);ie=!0);}catch(we){te=!0,W=we}finally{try{if(!ie&&K.return!=null&&(q=K.return(),Object(q)!==q))return}finally{if(te)throw W}}return Q}}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},12218:function(ct){function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},42281:function(ct){function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},42122:function(ct,N,k){var $=k(38416);function K(W,j){var q=Object.keys(W);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(W);j&&(Q=Q.filter(function(ie){return Object.getOwnPropertyDescriptor(W,ie).enumerable})),q.push.apply(q,Q)}return q}function w(W){for(var j=1;j<arguments.length;j++){var q=arguments[j]!=null?arguments[j]:{};j%2?K(Object(q),!0).forEach(function(Q){$(W,Q,q[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(q)):K(Object(q)).forEach(function(Q){Object.defineProperty(W,Q,Object.getOwnPropertyDescriptor(q,Q))})}return W}ct.exports=w,ct.exports.__esModule=!0,ct.exports.default=ct.exports},94993:function(ct,N,k){var $=k(18698).default,K=k(66115);function w(W,j){if(j&&($(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(W)}ct.exports=w,ct.exports.__esModule=!0,ct.exports.default=ct.exports},17061:function(ct,N,k){var $=k(18698).default;function K(){"use strict";ct.exports=K=function(){return W},ct.exports.__esModule=!0,ct.exports.default=ct.exports;var w,W={},j=Object.prototype,q=j.hasOwnProperty,Q=Object.defineProperty||function(st,Ce,De){st[Ce]=De.value},ie=typeof Symbol=="function"?Symbol:{},te=ie.iterator||"@@iterator",we=ie.asyncIterator||"@@asyncIterator",fe=ie.toStringTag||"@@toStringTag";function ce(st,Ce,De){return Object.defineProperty(st,Ce,{value:De,enumerable:!0,configurable:!0,writable:!0}),st[Ce]}try{ce({},"")}catch(st){ce=function(De,tt,_e){return De[tt]=_e}}function J(st,Ce,De,tt){var _e=Ce&&Ce.prototype instanceof Ue?Ce:Ue,me=Object.create(_e.prototype),Ge=new oe(tt||[]);return Q(me,"_invoke",{value:Oe(st,De,Ge)}),me}function M(st,Ce,De){try{return{type:"normal",arg:st.call(Ce,De)}}catch(tt){return{type:"throw",arg:tt}}}W.wrap=J;var E="suspendedStart",ge="suspendedYield",be="executing",ze="completed",Be={};function Ue(){}function it(){}function ht(){}var Le={};ce(Le,te,function(){return this});var Se=Object.getPrototypeOf,ye=Se&&Se(Se(Fe([])));ye&&ye!==j&&q.call(ye,te)&&(Le=ye);var Ve=ht.prototype=Ue.prototype=Object.create(Le);function je(st){["next","throw","return"].forEach(function(Ce){ce(st,Ce,function(De){return this._invoke(Ce,De)})})}function Et(st,Ce){function De(_e,me,Ge,Ze){var pt=M(st[_e],st,me);if(pt.type!=="throw"){var Ht=pt.arg,Je=Ht.value;return Je&&$(Je)=="object"&&q.call(Je,"__await")?Ce.resolve(Je.__await).then(function($e){De("next",$e,Ge,Ze)},function($e){De("throw",$e,Ge,Ze)}):Ce.resolve(Je).then(function($e){Ht.value=$e,Ge(Ht)},function($e){return De("throw",$e,Ge,Ze)})}Ze(pt.arg)}var tt;Q(this,"_invoke",{value:function(me,Ge){function Ze(){return new Ce(function(pt,Ht){De(me,Ge,pt,Ht)})}return tt=tt?tt.then(Ze,Ze):Ze()}})}function Oe(st,Ce,De){var tt=E;return function(_e,me){if(tt===be)throw new Error("Generator is already running");if(tt===ze){if(_e==="throw")throw me;return{value:w,done:!0}}for(De.method=_e,De.arg=me;;){var Ge=De.delegate;if(Ge){var Ze=Qe(Ge,De);if(Ze){if(Ze===Be)continue;return Ze}}if(De.method==="next")De.sent=De._sent=De.arg;else if(De.method==="throw"){if(tt===E)throw tt=ze,De.arg;De.dispatchException(De.arg)}else De.method==="return"&&De.abrupt("return",De.arg);tt=be;var pt=M(st,Ce,De);if(pt.type==="normal"){if(tt=De.done?ze:ge,pt.arg===Be)continue;return{value:pt.arg,done:De.done}}pt.type==="throw"&&(tt=ze,De.method="throw",De.arg=pt.arg)}}}function Qe(st,Ce){var De=Ce.method,tt=st.iterator[De];if(tt===w)return Ce.delegate=null,De==="throw"&&st.iterator.return&&(Ce.method="return",Ce.arg=w,Qe(st,Ce),Ce.method==="throw")||De!=="return"&&(Ce.method="throw",Ce.arg=new TypeError("The iterator does not provide a '"+De+"' method")),Be;var _e=M(tt,st.iterator,Ce.arg);if(_e.type==="throw")return Ce.method="throw",Ce.arg=_e.arg,Ce.delegate=null,Be;var me=_e.arg;return me?me.done?(Ce[st.resultName]=me.value,Ce.next=st.nextLoc,Ce.method!=="return"&&(Ce.method="next",Ce.arg=w),Ce.delegate=null,Be):me:(Ce.method="throw",Ce.arg=new TypeError("iterator result is not an object"),Ce.delegate=null,Be)}function ne(st){var Ce={tryLoc:st[0]};1 in st&&(Ce.catchLoc=st[1]),2 in st&&(Ce.finallyLoc=st[2],Ce.afterLoc=st[3]),this.tryEntries.push(Ce)}function We(st){var Ce=st.completion||{};Ce.type="normal",delete Ce.arg,st.completion=Ce}function oe(st){this.tryEntries=[{tryLoc:"root"}],st.forEach(ne,this),this.reset(!0)}function Fe(st){if(st||st===""){var Ce=st[te];if(Ce)return Ce.call(st);if(typeof st.next=="function")return st;if(!isNaN(st.length)){var De=-1,tt=function _e(){for(;++De<st.length;)if(q.call(st,De))return _e.value=st[De],_e.done=!1,_e;return _e.value=w,_e.done=!0,_e};return tt.next=tt}}throw new TypeError($(st)+" is not iterable")}return it.prototype=ht,Q(Ve,"constructor",{value:ht,configurable:!0}),Q(ht,"constructor",{value:it,configurable:!0}),it.displayName=ce(ht,fe,"GeneratorFunction"),W.isGeneratorFunction=function(st){var Ce=typeof st=="function"&&st.constructor;return!!Ce&&(Ce===it||(Ce.displayName||Ce.name)==="GeneratorFunction")},W.mark=function(st){return Object.setPrototypeOf?Object.setPrototypeOf(st,ht):(st.__proto__=ht,ce(st,fe,"GeneratorFunction")),st.prototype=Object.create(Ve),st},W.awrap=function(st){return{__await:st}},je(Et.prototype),ce(Et.prototype,we,function(){return this}),W.AsyncIterator=Et,W.async=function(st,Ce,De,tt,_e){_e===void 0&&(_e=Promise);var me=new Et(J(st,Ce,De,tt),_e);return W.isGeneratorFunction(Ce)?me:me.next().then(function(Ge){return Ge.done?Ge.value:me.next()})},je(Ve),ce(Ve,fe,"Generator"),ce(Ve,te,function(){return this}),ce(Ve,"toString",function(){return"[object Generator]"}),W.keys=function(st){var Ce=Object(st),De=[];for(var tt in Ce)De.push(tt);return De.reverse(),function _e(){for(;De.length;){var me=De.pop();if(me in Ce)return _e.value=me,_e.done=!1,_e}return _e.done=!0,_e}},W.values=Fe,oe.prototype={constructor:oe,reset:function(Ce){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(We),!Ce)for(var De in this)De.charAt(0)==="t"&&q.call(this,De)&&!isNaN(+De.slice(1))&&(this[De]=w)},stop:function(){this.done=!0;var Ce=this.tryEntries[0].completion;if(Ce.type==="throw")throw Ce.arg;return this.rval},dispatchException:function(Ce){if(this.done)throw Ce;var De=this;function tt(Ht,Je){return Ge.type="throw",Ge.arg=Ce,De.next=Ht,Je&&(De.method="next",De.arg=w),!!Je}for(var _e=this.tryEntries.length-1;_e>=0;--_e){var me=this.tryEntries[_e],Ge=me.completion;if(me.tryLoc==="root")return tt("end");if(me.tryLoc<=this.prev){var Ze=q.call(me,"catchLoc"),pt=q.call(me,"finallyLoc");if(Ze&&pt){if(this.prev<me.catchLoc)return tt(me.catchLoc,!0);if(this.prev<me.finallyLoc)return tt(me.finallyLoc)}else if(Ze){if(this.prev<me.catchLoc)return tt(me.catchLoc,!0)}else{if(!pt)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return tt(me.finallyLoc)}}}},abrupt:function(Ce,De){for(var tt=this.tryEntries.length-1;tt>=0;--tt){var _e=this.tryEntries[tt];if(_e.tryLoc<=this.prev&&q.call(_e,"finallyLoc")&&this.prev<_e.finallyLoc){var me=_e;break}}me&&(Ce==="break"||Ce==="continue")&&me.tryLoc<=De&&De<=me.finallyLoc&&(me=null);var Ge=me?me.completion:{};return Ge.type=Ce,Ge.arg=De,me?(this.method="next",this.next=me.finallyLoc,Be):this.complete(Ge)},complete:function(Ce,De){if(Ce.type==="throw")throw Ce.arg;return Ce.type==="break"||Ce.type==="continue"?this.next=Ce.arg:Ce.type==="return"?(this.rval=this.arg=Ce.arg,this.method="return",this.next="end"):Ce.type==="normal"&&De&&(this.next=De),Be},finish:function(Ce){for(var De=this.tryEntries.length-1;De>=0;--De){var tt=this.tryEntries[De];if(tt.finallyLoc===Ce)return this.complete(tt.completion,tt.afterLoc),We(tt),Be}},catch:function(Ce){for(var De=this.tryEntries.length-1;De>=0;--De){var tt=this.tryEntries[De];if(tt.tryLoc===Ce){var _e=tt.completion;if(_e.type==="throw"){var me=_e.arg;We(tt)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(Ce,De,tt){return this.delegate={iterator:Fe(Ce),resultName:De,nextLoc:tt},this.method==="next"&&(this.arg=w),Be}},W}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},6015:function(ct){function N(k,$){return ct.exports=N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,W){return w.__proto__=W,w},ct.exports.__esModule=!0,ct.exports.default=ct.exports,N(k,$)}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},27424:function(ct,N,k){var $=k(85372),K=k(68872),w=k(86116),W=k(12218);function j(q,Q){return $(q)||K(q,Q)||w(q,Q)||W()}ct.exports=j,ct.exports.__esModule=!0,ct.exports.default=ct.exports},51589:function(ct,N,k){var $=k(85372),K=k(79498),w=k(86116),W=k(12218);function j(q){return $(q)||K(q)||w(q)||W()}ct.exports=j,ct.exports.__esModule=!0,ct.exports.default=ct.exports},861:function(ct,N,k){var $=k(63405),K=k(79498),w=k(86116),W=k(42281);function j(q){return $(q)||K(q)||w(q)||W()}ct.exports=j,ct.exports.__esModule=!0,ct.exports.default=ct.exports},95036:function(ct,N,k){var $=k(18698).default;function K(w,W){if($(w)!="object"||!w)return w;var j=w[Symbol.toPrimitive];if(j!==void 0){var q=j.call(w,W||"default");if($(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(w)}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},64062:function(ct,N,k){var $=k(18698).default,K=k(95036);function w(W){var j=K(W,"string");return $(j)=="symbol"?j:String(j)}ct.exports=w,ct.exports.__esModule=!0,ct.exports.default=ct.exports},18698:function(ct){function N(k){"@babel/helpers - typeof";return ct.exports=N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},ct.exports.__esModule=!0,ct.exports.default=ct.exports,N(k)}ct.exports=N,ct.exports.__esModule=!0,ct.exports.default=ct.exports},86116:function(ct,N,k){var $=k(73897);function K(w,W){if(w){if(typeof w=="string")return $(w,W);var j=Object.prototype.toString.call(w).slice(8,-1);if(j==="Object"&&w.constructor&&(j=w.constructor.name),j==="Map"||j==="Set")return Array.from(w);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return $(w,W)}}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},64687:function(ct,N,k){var $=k(17061)();ct.exports=$;try{regeneratorRuntime=$}catch(K){typeof globalThis=="object"?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}},96695:function(ct,N,k){var $=k(96263);function K(w,W){var j=typeof Symbol!="undefined"&&w[Symbol.iterator]||w["@@iterator"];if(!j){if(Array.isArray(w)||(j=$(w))||W&&w&&typeof w.length=="number"){j&&(w=j);var q=0,Q=function(){};return{s:Q,n:function(){return q>=w.length?{done:!0}:{done:!1,value:w[q++]}},e:function(ce){throw ce},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,te=!1,we;return{s:function(){j=j.call(w)},n:function(){var ce=j.next();return ie=ce.done,ce},e:function(ce){te=!0,we=ce},f:function(){try{!ie&&j.return!=null&&j.return()}finally{if(te)throw we}}}}ct.exports=K,ct.exports.__esModule=!0,ct.exports.default=ct.exports},27771:function(ct,N){"use strict";var k=Array.isArray;N.Z=k},97582:function(ct,N,k){"use strict";k.d(N,{CR:function(){return be},Jh:function(){return J},XA:function(){return ge},ZT:function(){return K},_T:function(){return W},ev:function(){return Ue},mG:function(){return ce},pi:function(){return w},pr:function(){return Be}});var $=function(Ce,De){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,_e){tt.__proto__=_e}||function(tt,_e){for(var me in _e)Object.prototype.hasOwnProperty.call(_e,me)&&(tt[me]=_e[me])},$(Ce,De)};function K(Ce,De){if(typeof De!="function"&&De!==null)throw new TypeError("Class extends value "+String(De)+" is not a constructor or null");$(Ce,De);function tt(){this.constructor=Ce}Ce.prototype=De===null?Object.create(De):(tt.prototype=De.prototype,new tt)}var w=function(){return w=Object.assign||function(De){for(var tt,_e=1,me=arguments.length;_e<me;_e++){tt=arguments[_e];for(var Ge in tt)Object.prototype.hasOwnProperty.call(tt,Ge)&&(De[Ge]=tt[Ge])}return De},w.apply(this,arguments)};function W(Ce,De){var tt={};for(var _e in Ce)Object.prototype.hasOwnProperty.call(Ce,_e)&&De.indexOf(_e)<0&&(tt[_e]=Ce[_e]);if(Ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var me=0,_e=Object.getOwnPropertySymbols(Ce);me<_e.length;me++)De.indexOf(_e[me])<0&&Object.prototype.propertyIsEnumerable.call(Ce,_e[me])&&(tt[_e[me]]=Ce[_e[me]]);return tt}function j(Ce,De,tt,_e){var me=arguments.length,Ge=me<3?De:_e===null?_e=Object.getOwnPropertyDescriptor(De,tt):_e,Ze;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ge=Reflect.decorate(Ce,De,tt,_e);else for(var pt=Ce.length-1;pt>=0;pt--)(Ze=Ce[pt])&&(Ge=(me<3?Ze(Ge):me>3?Ze(De,tt,Ge):Ze(De,tt))||Ge);return me>3&&Ge&&Object.defineProperty(De,tt,Ge),Ge}function q(Ce,De){return function(tt,_e){De(tt,_e,Ce)}}function Q(Ce,De,tt,_e,me,Ge){function Ze(Pt){if(Pt!==void 0&&typeof Pt!="function")throw new TypeError("Function expected");return Pt}for(var pt=_e.kind,Ht=pt==="getter"?"get":pt==="setter"?"set":"value",Je=!De&&Ce?_e.static?Ce:Ce.prototype:null,$e=De||(Je?Object.getOwnPropertyDescriptor(Je,_e.name):{}),Te,Ye=!1,ft=tt.length-1;ft>=0;ft--){var ke={};for(var Ne in _e)ke[Ne]=Ne==="access"?{}:_e[Ne];for(var Ne in _e.access)ke.access[Ne]=_e.access[Ne];ke.addInitializer=function(Pt){if(Ye)throw new TypeError("Cannot add initializers after decoration has completed");Ge.push(Ze(Pt||null))};var dt=(0,tt[ft])(pt==="accessor"?{get:$e.get,set:$e.set}:$e[Ht],ke);if(pt==="accessor"){if(dt===void 0)continue;if(dt===null||typeof dt!="object")throw new TypeError("Object expected");(Te=Ze(dt.get))&&($e.get=Te),(Te=Ze(dt.set))&&($e.set=Te),(Te=Ze(dt.init))&&me.unshift(Te)}else(Te=Ze(dt))&&(pt==="field"?me.unshift(Te):$e[Ht]=Te)}Je&&Object.defineProperty(Je,_e.name,$e),Ye=!0}function ie(Ce,De,tt){for(var _e=arguments.length>2,me=0;me<De.length;me++)tt=_e?De[me].call(Ce,tt):De[me].call(Ce);return _e?tt:void 0}function te(Ce){return typeof Ce=="symbol"?Ce:"".concat(Ce)}function we(Ce,De,tt){return typeof De=="symbol"&&(De=De.description?"[".concat(De.description,"]"):""),Object.defineProperty(Ce,"name",{configurable:!0,value:tt?"".concat(tt," ",De):De})}function fe(Ce,De){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ce,De)}function ce(Ce,De,tt,_e){function me(Ge){return Ge instanceof tt?Ge:new tt(function(Ze){Ze(Ge)})}return new(tt||(tt=Promise))(function(Ge,Ze){function pt($e){try{Je(_e.next($e))}catch(Te){Ze(Te)}}function Ht($e){try{Je(_e.throw($e))}catch(Te){Ze(Te)}}function Je($e){$e.done?Ge($e.value):me($e.value).then(pt,Ht)}Je((_e=_e.apply(Ce,De||[])).next())})}function J(Ce,De){var tt={label:0,sent:function(){if(Ge[0]&1)throw Ge[1];return Ge[1]},trys:[],ops:[]},_e,me,Ge,Ze;return Ze={next:pt(0),throw:pt(1),return:pt(2)},typeof Symbol=="function"&&(Ze[Symbol.iterator]=function(){return this}),Ze;function pt(Je){return function($e){return Ht([Je,$e])}}function Ht(Je){if(_e)throw new TypeError("Generator is already executing.");for(;Ze&&(Ze=0,Je[0]&&(tt=0)),tt;)try{if(_e=1,me&&(Ge=Je[0]&2?me.return:Je[0]?me.throw||((Ge=me.return)&&Ge.call(me),0):me.next)&&!(Ge=Ge.call(me,Je[1])).done)return Ge;switch(me=0,Ge&&(Je=[Je[0]&2,Ge.value]),Je[0]){case 0:case 1:Ge=Je;break;case 4:return tt.label++,{value:Je[1],done:!1};case 5:tt.label++,me=Je[1],Je=[0];continue;case 7:Je=tt.ops.pop(),tt.trys.pop();continue;default:if(Ge=tt.trys,!(Ge=Ge.length>0&&Ge[Ge.length-1])&&(Je[0]===6||Je[0]===2)){tt=0;continue}if(Je[0]===3&&(!Ge||Je[1]>Ge[0]&&Je[1]<Ge[3])){tt.label=Je[1];break}if(Je[0]===6&&tt.label<Ge[1]){tt.label=Ge[1],Ge=Je;break}if(Ge&&tt.label<Ge[2]){tt.label=Ge[2],tt.ops.push(Je);break}Ge[2]&&tt.ops.pop(),tt.trys.pop();continue}Je=De.call(Ce,tt)}catch($e){Je=[6,$e],me=0}finally{_e=Ge=0}if(Je[0]&5)throw Je[1];return{value:Je[0]?Je[1]:void 0,done:!0}}}var M=Object.create?function(Ce,De,tt,_e){_e===void 0&&(_e=tt);var me=Object.getOwnPropertyDescriptor(De,tt);(!me||("get"in me?!De.__esModule:me.writable||me.configurable))&&(me={enumerable:!0,get:function(){return De[tt]}}),Object.defineProperty(Ce,_e,me)}:function(Ce,De,tt,_e){_e===void 0&&(_e=tt),Ce[_e]=De[tt]};function E(Ce,De){for(var tt in Ce)tt!=="default"&&!Object.prototype.hasOwnProperty.call(De,tt)&&M(De,Ce,tt)}function ge(Ce){var De=typeof Symbol=="function"&&Symbol.iterator,tt=De&&Ce[De],_e=0;if(tt)return tt.call(Ce);if(Ce&&typeof Ce.length=="number")return{next:function(){return Ce&&_e>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[_e++],done:!Ce}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(Ce,De){var tt=typeof Symbol=="function"&&Ce[Symbol.iterator];if(!tt)return Ce;var _e=tt.call(Ce),me,Ge=[],Ze;try{for(;(De===void 0||De-- >0)&&!(me=_e.next()).done;)Ge.push(me.value)}catch(pt){Ze={error:pt}}finally{try{me&&!me.done&&(tt=_e.return)&&tt.call(_e)}finally{if(Ze)throw Ze.error}}return Ge}function ze(){for(var Ce=[],De=0;De<arguments.length;De++)Ce=Ce.concat(be(arguments[De]));return Ce}function Be(){for(var Ce=0,De=0,tt=arguments.length;De<tt;De++)Ce+=arguments[De].length;for(var _e=Array(Ce),me=0,De=0;De<tt;De++)for(var Ge=arguments[De],Ze=0,pt=Ge.length;Ze<pt;Ze++,me++)_e[me]=Ge[Ze];return _e}function Ue(Ce,De,tt){if(tt||arguments.length===2)for(var _e=0,me=De.length,Ge;_e<me;_e++)(Ge||!(_e in De))&&(Ge||(Ge=Array.prototype.slice.call(De,0,_e)),Ge[_e]=De[_e]);return Ce.concat(Ge||Array.prototype.slice.call(De))}function it(Ce){return this instanceof it?(this.v=Ce,this):new it(Ce)}function ht(Ce,De,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e=tt.apply(Ce,De||[]),me,Ge=[];return me={},Ze("next"),Ze("throw"),Ze("return"),me[Symbol.asyncIterator]=function(){return this},me;function Ze(Ye){_e[Ye]&&(me[Ye]=function(ft){return new Promise(function(ke,Ne){Ge.push([Ye,ft,ke,Ne])>1||pt(Ye,ft)})})}function pt(Ye,ft){try{Ht(_e[Ye](ft))}catch(ke){Te(Ge[0][3],ke)}}function Ht(Ye){Ye.value instanceof it?Promise.resolve(Ye.value.v).then(Je,$e):Te(Ge[0][2],Ye)}function Je(Ye){pt("next",Ye)}function $e(Ye){pt("throw",Ye)}function Te(Ye,ft){Ye(ft),Ge.shift(),Ge.length&&pt(Ge[0][0],Ge[0][1])}}function Le(Ce){var De,tt;return De={},_e("next"),_e("throw",function(me){throw me}),_e("return"),De[Symbol.iterator]=function(){return this},De;function _e(me,Ge){De[me]=Ce[me]?function(Ze){return(tt=!tt)?{value:it(Ce[me](Ze)),done:!1}:Ge?Ge(Ze):Ze}:Ge}}function Se(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De=Ce[Symbol.asyncIterator],tt;return De?De.call(Ce):(Ce=typeof ge=="function"?ge(Ce):Ce[Symbol.iterator](),tt={},_e("next"),_e("throw"),_e("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function _e(Ge){tt[Ge]=Ce[Ge]&&function(Ze){return new Promise(function(pt,Ht){Ze=Ce[Ge](Ze),me(pt,Ht,Ze.done,Ze.value)})}}function me(Ge,Ze,pt,Ht){Promise.resolve(Ht).then(function(Je){Ge({value:Je,done:pt})},Ze)}}function ye(Ce,De){return Object.defineProperty?Object.defineProperty(Ce,"raw",{value:De}):Ce.raw=De,Ce}var Ve=Object.create?function(Ce,De){Object.defineProperty(Ce,"default",{enumerable:!0,value:De})}:function(Ce,De){Ce.default=De};function je(Ce){if(Ce&&Ce.__esModule)return Ce;var De={};if(Ce!=null)for(var tt in Ce)tt!=="default"&&Object.prototype.hasOwnProperty.call(Ce,tt)&&M(De,Ce,tt);return Ve(De,Ce),De}function Et(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function Oe(Ce,De,tt,_e){if(tt==="a"&&!_e)throw new TypeError("Private accessor was defined without a getter");if(typeof De=="function"?Ce!==De||!_e:!De.has(Ce))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?_e:tt==="a"?_e.call(Ce):_e?_e.value:De.get(Ce)}function Qe(Ce,De,tt,_e,me){if(_e==="m")throw new TypeError("Private method is not writable");if(_e==="a"&&!me)throw new TypeError("Private accessor was defined without a setter");if(typeof De=="function"?Ce!==De||!me:!De.has(Ce))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _e==="a"?me.call(Ce,tt):me?me.value=tt:De.set(Ce,tt),tt}function ne(Ce,De){if(De===null||typeof De!="object"&&typeof De!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Ce=="function"?De===Ce:Ce.has(De)}function We(Ce,De,tt){if(De!=null){if(typeof De!="object"&&typeof De!="function")throw new TypeError("Object expected.");var _e;if(tt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");_e=De[Symbol.asyncDispose]}if(_e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");_e=De[Symbol.dispose]}if(typeof _e!="function")throw new TypeError("Object not disposable.");Ce.stack.push({value:De,dispose:_e,async:tt})}else tt&&Ce.stack.push({async:!0});return De}var oe=typeof SuppressedError=="function"?SuppressedError:function(Ce,De,tt){var _e=new Error(tt);return _e.name="SuppressedError",_e.error=Ce,_e.suppressed=De,_e};function Fe(Ce){function De(_e){Ce.error=Ce.hasError?new oe(_e,Ce.error,"An error was suppressed during disposal."):_e,Ce.hasError=!0}function tt(){for(;Ce.stack.length;){var _e=Ce.stack.pop();try{var me=_e.dispose&&_e.dispose.call(_e.value);if(_e.async)return Promise.resolve(me).then(tt,function(Ge){return De(Ge),tt()})}catch(Ge){De(Ge)}}if(Ce.hasError)throw Ce.error}return tt()}var st={__extends:K,__assign:w,__rest:W,__decorate:j,__param:q,__metadata:fe,__awaiter:ce,__generator:J,__createBinding:M,__exportStar:E,__values:ge,__read:be,__spread:ze,__spreadArrays:Be,__spreadArray:Ue,__await:it,__asyncGenerator:ht,__asyncDelegator:Le,__asyncValues:Se,__makeTemplateObject:ye,__importStar:je,__importDefault:Et,__classPrivateFieldGet:Oe,__classPrivateFieldSet:Qe,__classPrivateFieldIn:ne,__addDisposableResource:We,__disposeResources:Fe}}}]);
}());