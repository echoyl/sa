"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[571],{11106:function(ya,oe,n){n.r(oe),n.d(oe,{default:function(){return xa}});var Ve=n(97857),v=n.n(Ve),Ue=n(15009),X=n.n(Ue),Ye=n(99289),re=n.n(Ye),We=n(5574),z=n.n(We),Ke=n(13769),se=n.n(Ke),de=n(33067),H=n(38345),ue=n(1956),q=n(6110),B=n(7837),L=n(15746),ve=n(72058),ce=n(48096),Y=n(71230),fe=n(87564),_=n(14726),ee=n(86250),S=n(67294),te=n(27076),O=n(76398),pe=n(19179),ae=n(6466),Ge=n(98165),me=n(63430),ge=n(79611),xe=n(78677),ye=n(80652),Qe=n(7134),Je=n(31418),Xe=n(27484),he=n.n(Xe),Ce=n(61503),je=n(33237),Te=n(17003),w={pageHeaderContent:"pageHeaderContent___exWxI",avatar:"avatar___rptEO",content:"content___jBAzR",contentTitle:"contentTitle___TsVhT",extraContent:"extraContent___tNqx0",statItem:"statItem___jPU6u"},G=n(13690),we=n(83366),t=n(85893),ke=function(e){var r=e.data,a=e.config,i=a===void 0?{}:a,l=(0,O.hQ)();return(0,S.useEffect)(function(){var o=new G.xs({id:l,map:new we.Z({pitch:0,style:"blank",center:[116.368652,39.93866],zoom:10.07})}),d=["#0A3663","#3771D9","#4D89E5","#64A5D3","#72BED6","#83CED6","#A6E1E0","#B8EFE2","#D7F9F0"].reverse(),y=i.field,s=i.domain_min,m=s===void 0?0:s,P=i.domain_max,F=P===void 0?100:P,p=new G.dW({autoFit:!0}).source(r);p.color(y,d).scale(y,{type:"quantize",domain:[m,F]}).shape("fill").style({opacity:1}).active(!0);var j=new G.Ie({zIndex:2}).source(r).color("#eee").size(.8).active(!0).style({lineType:"solid",dashArray:[2,2],opacity:1});o.addLayer(p),o.addLayer(j);var g=new G.GI({offsets:[0,0],closeButton:!1});p.on("mousemove",function(x){g.setLnglat(x.lngLat).setHTML("<span>".concat(x.feature.properties.name,":").concat(x&&x.feature.properties[y]?x.feature.properties[y]:"-","</span>")),o.addPopup(g)}),p.on("mouseout",function(x){o.removePopup(g)});var f=new G.oT({position:"bottomright"});f.onAdd=function(){var x=document.createElement("div");x.className="infolegend legend";for(var E=Math.floor(F/d.length),c=0;c<d.length;c++)x.innerHTML+='<i style="width: 18px;height: 18px;float: left;margin-right: 8px;opacity: 0.7;background:'+d[c]+'"></i> '+(m+c*E)+(d[c+1]?"\u2013"+E*(c+1)+"<br>":"+");return x},o.addControl(f)},[]),(0,t.jsx)("div",{id:l,style:{width:"100%",minHeight:300,position:"relative",overflow:"hidden",height:i.height}})},Pe=ke,le=n(96486),qe=n(92077),be=n.n(qe),De=function(e){var r=(0,B.useModel)("@@initialState"),a=r.initialState,i=a.currentUser,l=i&&Object.keys(i).length;return l?(0,t.jsxs)("div",{className:w.pageHeaderContent,children:[(0,t.jsx)("div",{className:w.avatar,children:(0,t.jsx)(Qe.C,{size:"large",src:i.avatar?i.avatar:a==null?void 0:a.settings.logo})}),(0,t.jsx)("div",{className:w.content,children:(0,t.jsx)("div",{className:w.contentTitle,children:(0,t.jsxs)(Y.Z,{children:[(0,t.jsxs)(L.Z,{span:12,children:[(0,t.jsx)(Y.Z,{children:(0,t.jsxs)(L.Z,{children:["\u4F60\u597D\uFF0C",i.realname?i.realname:i.name]})}),(0,t.jsx)(Y.Z,{children:(0,t.jsxs)(L.Z,{children:[i.rolename," ",(0,t.jsx)(_.ZP,{shape:"circle",type:"text",onClick:function(){var d;(d=e.flash)===null||d===void 0||d.call(e)},icon:(0,t.jsx)(Ge.Z,{})})]})})]}),(0,t.jsx)(L.Z,{span:12,style:{textAlign:"right"},children:(0,t.jsx)(_e,{})})]})})})]}):(0,t.jsx)(fe.Z,{avatar:!0,paragraph:{rows:1},active:!0})},_e=function(){var e=(0,S.useState)(he()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),r=z()(e,2),a=r[0],i=r[1],l=function o(){i(he()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),setTimeout(function(){return o()},1e3)};return setTimeout(function(){return l()},1e3),(0,t.jsx)(t.Fragment,{children:a})},et=function(e){var r=e.url,a=r===void 0?"":r,i=(0,S.useState)(),l=z()(i,2),o=l[0],d=l[1],y=Je.Z.useApp(),s=y.message,m=(0,S.useState)(),P=z()(m,2),F=P[0],p=P[1],j=(0,B.useModel)("@@initialState"),g=j.initialState,f=function(){var c=re()(X()().mark(function u(){var h,Z,b,T=arguments;return X()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return h=T.length>0&&T[0]!==void 0?T[0]:{},s.loading("\u52A0\u8F7D\u4E2D..."),D.next=4,de.ZP.get(a,{params:v()(v()({},F),h),then:function(){}});case 4:Z=D.sent,b=Z.data,s.destroy(),d(b);case 8:case"end":return D.stop()}},u)}));return function(){return c.apply(this,arguments)}}();(0,S.useEffect)(function(){f()},[]);var x=function(u){var h=u.type;if(h=="pie"){var Z=u.config.colorField,b=u.config.angleField,T=(0,le.sum)(u.data.map(function(D){return D[b]}));return(0,t.jsx)(me.Z,v()({height:280,appendPadding:10,data:u.data,radius:.9,label:{position:"spider",text:function(M){return"".concat(M[Z],": ").concat(be()(M[b]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(T),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],legend:!1},u.config))}else{if(h=="bar")return(0,t.jsx)(ge.Z,v()({xField:"x",yField:"y",scale:{x:{paddingInner:.4}},data:u.data},u.config));if(h=="column")return(0,t.jsx)(xe.Z,v()({xField:"x",yField:"y",scale:{x:{paddingInner:.4}},data:u.data},u.config));if(h=="areaMap"){var A=v()({map:{type:"mapbox",style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:u.data,parser:{type:"geojson"}},autoFit:!0,color:{field:u.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},u.config);return(0,t.jsx)("div",{style:{width:"100%",height:500},children:(0,t.jsx)(Pe,{data:u.data,config:u})})}else return(0,t.jsx)(ye.Z,v()({smooth:!0,shapeField:"smooth",height:280,data:u.data,xField:"x",yField:"y",title:{visible:!0,text:u.title,style:{fontSize:14}},meta:{y:{alias:u.y}},label:{content:function(M){return M.y},position:"top",style:{fill:"#000000",opacity:.6}}},u.config))}},E=function c(u,h){var Z;return(0,t.jsx)(ee.Z,{vertical:!0,gap:"middle",children:u==null||(Z=u.row)===null||Z===void 0?void 0:Z.map(function(b,T){var A;return(0,t.jsxs)(Y.Z,{gutter:[16,16],children:[b.form?(0,t.jsx)(L.Z,{span:24,children:(0,t.jsx)(H.Z,{bodyStyle:{padding:0},children:(0,t.jsx)(ue.Z,{layoutType:"QueryFilter",columns:(0,je.ab)({initRequest:!0,columns:b.form.columns,devEnable:!1}),initialValues:F||b.form.value,onFinish:function(M){f(M),console.log("onFinish",M)}})})},T+"form"):null,b==null||(A=b.col)===null||A===void 0?void 0:A.map(function(D,M){if(D.row){var $;return(0,t.jsx)(L.Z,{span:D.span?D.span:24/(($=b.col)===null||$===void 0?void 0:$.length),children:c(D,h)},M)}else if(D.tab){var N;return(0,t.jsx)(L.Z,{span:D.span?D.span:24/((N=b.col)===null||N===void 0?void 0:N.length),children:(0,t.jsx)(H.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},children:(0,t.jsx)(ce.Z,{style:{background:"none"},tabBarStyle:{paddingLeft:0,marginBottom:0},items:D.tab.map(function(R,K){return{key:K,label:R.title,children:R.row?c(R,h):h(R,K,{notitle:!0})}})})},M)},M)}else{var I;return(0,t.jsx)(L.Z,{span:D.span?D.span:24/((I=b.col)===null||I===void 0?void 0:I.length),children:h(D,M)},M)}})]},T)})})};return(0,t.jsx)(q._z,{title:!1,className:"saContainer",fixedHeader:te.P.fixedHeader,header:{breadcrumbRender:function(u,h){return(0,t.jsx)(O.Lr,{})}},children:(0,t.jsxs)(ee.Z,{vertical:!0,gap:"middle",children:[(0,t.jsx)(H.Z,{children:(0,t.jsx)(De,{flash:f})},"headcard"),E(o,function(c,u,h){return c.type=="card"?(0,t.jsx)(ae.Z,{style:{height:"100%"},statistic:{title:c.title,value:c.value,prefix:c.prefix,suffix:c.suffix,description:c.href?(0,t.jsx)(B.Link,{to:c.href,style:{fontSize:12},children:"\u67E5\u770B\u66F4\u591A"}):""}},u+"card"):c.type=="table"?(0,t.jsx)(H.Z,{style:{height:"100%"},children:(0,t.jsx)(ve.Z,v()({columns:(0,Te.S)({initRequest:!0,columns:c.columns,initialState:g,devEnable:!1}),dataSource:c.data,title:function(){return c.title},rowKey:"id"},c.props))},u+"table"):c.type=="mapDots"?(0,t.jsx)(H.Z,{title:c.title,style:{height:"100%"},children:(0,t.jsx)(Ce.O1,v()(v()({},c.props),{},{dots:c.data}))},u+"mapDots"):(0,t.jsx)(ae.Z,{style:{height:"100%"},title:h!=null&&h.notitle?(0,t.jsx)("div",{style:{height:20}}):c.title,chart:x(c)},u+"chart")})]})})},tt=et,V=n(54532),at=n(55647),ne=n(47666),lt=n(96604),U=n(42075),nt=n(96074),it=n(38703),ot=n(65302),rt=n(64183),st=function(e){var r=e.type,a=e.data,i=e.config,l=(0,le.cloneDeep)(i);if(delete l.type,r=="pie"){var o=l.colorField,d=l.angleField,y=(0,le.sum)(a.map(function(m){return m[d]}));return(0,t.jsx)(me.Z,v()({appendPadding:10,data:a,label:{position:"spider",text:function(P){return"".concat(P[o],": ").concat(be()(P[d]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(y),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],radius:.9,innerRadius:.6},l))}else{if(r=="bar")return(0,t.jsx)(ge.Z,v()({data:a,scale:{x:{paddingInner:.4}}},l));if(r=="column")return(0,t.jsx)(xe.Z,v()({data:a,scale:{x:{paddingInner:.4}}},l));if(r=="area")return(0,t.jsx)(rt.Z,v()({data:a},l));if(r=="mapDots")return(0,t.jsx)(Ce.O1,v()(v()({},l),{},{dots:(0,ot.H1)(a)?a:[]}));if(r=="areaMap"){var s=v()({map:{style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:a,parser:{type:"geojson"}},autoFit:!0,color:{field:l.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},l);return(0,t.jsx)(Pe,{config:s,data:a})}else return(0,t.jsx)(ye.Z,v()({data:a},l))}},dt=st,ut=function(e){var r=e.title,a=e.data,i=e.config,l=i===void 0?{}:i,o=l.open,d=function(p){if(p.href){var j,g;return(0,t.jsx)(B.Link,{to:p==null?void 0:p.href,style:{fontSize:12},children:(j=p.statistic)!==null&&j!==void 0&&j.description?(g=p.statistic)===null||g===void 0?void 0:g.description:"\u67E5\u770B"})}else{var f;return(f=p.statistic)===null||f===void 0?void 0:f.description}},y=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"horizontal",g=p.map(function(f,x){return(0,t.jsx)(lt.Z,v()({},f),x)});return j=="vertical"?g:(0,t.jsx)(U.Z,{children:g})},s=function(p,j){var g;if(!((g=p.open)!==null&&g!==void 0&&g.footer)||!p.footer)return null;var f;if(p.footer.type=="trend"){var x;if(!j.trend)return null;f=y(j.trend,(x=p.footer)===null||x===void 0?void 0:x.layout)}else{var E=j.footer?j.footer:p.footer.text;if(!E)return null;f=E}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(nt.Z,{style:{marginTop:-16,marginBottom:10}}),f]})},m=o!=null&&o.statistic?v()(v()({},l==null?void 0:l.statistic),{},{value:a==null?void 0:a.value,description:d(l)}):!1,P=function(p,j){var g=p.chart,f=g===void 0?{}:g,x=p.open,E=f.type,c=E===void 0?"":E;if(!(x!=null&&x.chart)||!c)return null;var u=f!=null&&f.height?{height:f==null?void 0:f.height,lineHeight:(f==null?void 0:f.height)+"px"}:{};if(c=="trend"){var h;return(0,t.jsx)("div",{style:u,children:y(j.trend,(h=p.chart)===null||h===void 0||(h=h.trend)===null||h===void 0?void 0:h.layout)})}else if(c=="progress"){var Z;return(0,t.jsx)("div",{style:u,children:(Z=j.progress)===null||Z===void 0?void 0:Z.map(function(T,A){return(0,t.jsx)(it.Z,v()({},T),A)})})}else{var b;return(0,t.jsx)(dt,{data:j==null||(b=j.chart)===null||b===void 0?void 0:b.data,config:f,type:c})}return null};return(0,t.jsx)(ae.Z,{footer:s(l,a),style:{height:"100%"},title:r,statistic:m,chart:P(l,a)})},vt=ut,ct=n(68400),ft=n.n(ct),Ie=n(51042),Se=n(52108),Fe=n(47389),pt=n(26706),mt=n(94261),gt=n(53682),xt=n(70761),yt=n(93967),ht=n.n(yt),Ct=n(70145),jt=n(61723),Ze=n(75686),Ee=n(10399),Tt=n(19632),Q=n.n(Tt),Pt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},ze(6)]}]},bt=Pt,Dt=function(e){return[{valueType:"group",columns:[{title:"\u5B57\u6BB5",dataIndex:["defaultConfig","chart","field"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u533A\u95F4\u503Cmin",dataIndex:["defaultConfig","chart","domain_min"],colProps:{span:6},valueType:"digit",width:"100%"},{title:"\u533A\u95F4\u503Cmax",dataIndex:["defaultConfig","chart","domain_max"],colProps:{span:6},valueType:"digit",width:"100%"}]}]},It=Dt,St=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},Ft=St,Zt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},Et=Zt,Mt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","chart","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5206\u7EC4\u5B57\u6BB5",tooltip:"\u591A\u6761\u7EBF\u53EF\u4F7F\u7528\u8BE5\u53C2\u6570",dataIndex:["defaultConfig","chart","seriesField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},ze(6)]}]},Rt=Mt,Nt=function(e){return[{valueType:"group",columns:[{title:"\u7F29\u653E\u7EA7\u522B",dataIndex:["defaultConfig","chart","zoom"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u4E2D\u5FC3\u70B9lat",dataIndex:["defaultConfig","chart","lat"],colProps:{span:6},valueType:"digit",width:"100%"},{title:"\u4E2D\u5FC3\u70B9lng",dataIndex:["defaultConfig","chart","lng"],colProps:{span:6},valueType:"digit",width:"100%"}]}]},zt=Nt,Lt=function(e){return[{valueType:"group",columns:[{title:"\u89D2\u5EA6\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","chart","angleField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u989C\u8272\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","chart","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u997C\u56FE\u534A\u5F84",dataIndex:["defaultConfig","chart","radius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.9}},{title:"\u997C\u56FE\u5185\u534A\u5F84",dataIndex:["defaultConfig","chart","innerRadius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.6}}]}]},At=Lt,Bt=function(e){var r,a,i=e!=null&&(r=e.data)!==null&&r!==void 0&&r.chart?e==null||(a=e.data)===null||a===void 0?void 0:a.chart:e;return[{title:"\u56FE\u8868\u7C7B\u578B",dataIndex:["defaultConfig","chart","type"],valueType:"select",fieldProps:{options:[{label:"\u997C\u56FE",value:"pie"},{label:"\u6298\u7EBF\u56FE",value:"line"},{label:"\u67F1\u5F62\u56FE",value:"column"},{label:"\u6761\u5F62\u56FE",value:"bar"},{label:"\u533A\u57DF\u56FE",value:"area"},{label:"\u533A\u57DF\u5730\u56FE",value:"areaMap"},{label:"\u8D8B\u52BF",value:"trend"},{label:"\u8FDB\u5EA6\u6761",value:"progress"},{label:"\u6807\u70B9\u5730\u56FE",value:"mapDots"}]},colProps:{span:12}},{title:"\u9AD8\u5EA6",dataIndex:["defaultConfig","chart","height"],valueType:"digit",width:"100%",colProps:{span:12}},{name:[["defaultConfig","chart","type"]],valueType:"dependency",columns:function(o){var d=o.defaultConfig;if(!d)return[];var y=d.chart,s=y===void 0?{}:y;return(s==null?void 0:s.type)=="pie"?At(i):(s==null?void 0:s.type)=="line"?Rt(i):(s==null?void 0:s.type)=="area"?bt(i):(s==null?void 0:s.type)=="column"?Et(i):(s==null?void 0:s.type)=="bar"?Ft(i):(s==null?void 0:s.type)=="areaMap"?It(i):(s==null?void 0:s.type)=="trend"?Ne(["defaultConfig","chart","trend","layout"]):(s==null?void 0:s.type)=="mapDots"?zt(i):[]}}]},Me=Bt,Ht=[{valueType:"group",title:"statistic\u8BBE\u7F6E",columns:[{title:"\u6807\u9898",dataIndex:["defaultConfig","statistic","title"],colProps:{span:6}},{title:"\u63D0\u793A",dataIndex:["defaultConfig","statistic","tip"],colProps:{span:6}},{title:"\u524D\u7F00",dataIndex:["defaultConfig","statistic","prefix"],colProps:{span:6}},{title:"\u540E\u7F00",dataIndex:["defaultConfig","statistic","suffix"],colProps:{span:6}}]},{valueType:"group",columns:[{title:"\u72B6\u6001",dataIndex:["defaultConfig","statistic","status"],valueType:"select",fieldProps:{options:[{label:"success",value:"success"},{label:"processing",value:"processing"},{label:"default",value:"default"},{label:"error",value:"error"},{label:"warning",value:"warning"}]},colProps:{span:12}},{title:"\u94FE\u63A5",dataIndex:["defaultConfig","href"],colProps:{span:12}}]},{valueType:"group",columns:[{title:"\u63CF\u8FF0",dataIndex:["defaultConfig","statistic","description"],valueType:"textarea",colProps:{span:24}}]}],$t=[{valueType:"group",title:"footer\u8BBE\u7F6E",columns:[{title:"\u7C7B\u578B",dataIndex:["defaultConfig","footer","type"],valueType:"select",tooltip:"\u5982\u679C\u7C7B\u578B\u662F\u8D8B\u52BF\uFF0C\u6240\u9009\u6570\u636E\u5E94\u8BE5\u8FD4\u56DE\u6709trend:[{title,value,trend}]\u683C\u5F0F\u6570\u636E",fieldProps:{options:[{label:"\u6587\u672C",value:"text"},{label:"\u8D8B\u52BF",value:"trend"}],defaultValue:"text"},colProps:{span:12}},{name:[["defaultConfig","footer","type"]],valueType:"dependency",columns:function(e){var r,a=e.defaultConfig;return(a==null||(r=a.footer)===null||r===void 0?void 0:r.type)=="trend"?Ne(["defaultConfig","footer","layout"]):[{title:"\u5E95\u90E8\u8BBE\u7F6E",dataIndex:["defaultConfig","footer","text"],valueType:"textarea",colProps:{span:24}}]}}]}],Ot=function(e){return[{valueType:"group",columns:[{title:"statistic",dataIndex:["defaultConfig","open","statistic"],valueType:"switch",colProps:{span:8}},{title:"chart",dataIndex:["defaultConfig","open","chart"],valueType:"switch",colProps:{span:8}},{title:"footer",dataIndex:["defaultConfig","open","footer"],valueType:"switch",colProps:{span:8}}]},{name:["defaultConfig","sourceDataName"],valueType:"dependency",columns:function(a){var i,l,o,d=a.defaultConfig,y=a.sourceDataName;if(!d)return[];var s=[];if((i=d.open)!==null&&i!==void 0&&i.statistic&&(s=[].concat(Q()(s),Ht)),(l=d.open)!==null&&l!==void 0&&l.chart){var m=Me(e);s=[].concat(Q()(s),[{valueType:"group",title:"chart\u8BBE\u7F6E",columns:Q()(m)}])}return(o=d.open)!==null&&o!==void 0&&o.footer&&(s=[].concat(Q()(s),$t)),s}}]},Vt=Ot,Ut=n(21352),Yt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["defaultConfig","columns"];return[{valueType:"group",columns:[{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:r,colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"Label",dataIndex:"title",colProps:{span:6}},{title:"dataIndex",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u7EC4\u4EF6\u7C7B\u578B",dataIndex:"valueType",colProps:{span:6},valueType:"select",fieldProps:{options:Ut.lG}},{title:"fieldProps",dataIndex:"fieldProps",colProps:{span:6},valueType:"modalJson"}]}]}]}]},Re=Yt,Wt=function(e){return[{valueType:"group",columns:[{title:"Table Size",dataIndex:["defaultConfig","size"],colProps:{span:12},valueType:"select",fieldProps:{options:["small","middle","large"]}},{title:"\u5206\u9875",tooltip:"\u8BBE\u7F6E\u4E3A0\u7684\u8BDD\u8868\u793A\u5173\u95ED\u5206\u9875",dataIndex:["defaultConfig","cpage"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:["defaultConfig","columns"],colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"dataIndex",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"title",dataIndex:"title",colProps:{span:6}},{title:"width",dataIndex:"width",colProps:{span:6},valueType:"digit"},{title:"\u6392\u5E8F",dataIndex:"sort",valueType:"switch",colProps:{span:6}}]}]}]}]},Kt=Wt,Gt={title:"\u914D\u7F6E",valueType:"jsonEditor",dataIndex:"config"},Ne=function(e){return[{title:"\u6392\u5217\u65B9\u5F0F",dataIndex:e,valueType:"select",fieldProps:{options:[{label:"\u6A2A\u5411",value:"horizontal"},{label:"\u7EB5\u5411",value:"vertical"}],defaultValue:"horizontal"},colProps:{span:12}}]},ze=function(e){return{title:"\u5F62\u72B6",dataIndex:["defaultConfig","chart","shapeField"],valueType:"select",fieldProps:{options:[{label:"smooth - \u5E73\u6ED1",value:"smooth"},{label:"trail - \u53D8\u7C97",value:"trail"}]},colProps:{span:e}}},Qt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{title:"Title",dataIndex:"title",colProps:{span:12}}]}]},Jt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{valueType:"group",columns:[{title:"\u7C7B\u578B",dataIndex:"type",valueType:"select",fieldProps:{options:[{label:"StatisticCard - \u6307\u6807\u5361",value:"StatisticCard"},{label:"tab",value:"tab"},{label:"\u8868\u683C",value:"table"},{label:"\u5BB9\u5668",value:"rows"},{label:"\u67E5\u8BE2\u8868\u5355",value:"form"},{label:"\u4E2A\u4EBA\u4FE1\u606F",value:"user"}]},colProps:{span:24}}]},{valueType:"group",columns:[{title:"Title",dataIndex:"title",colProps:{span:12}},{title:"\u6570\u636E\u6E90",dataIndex:"sourceDataName",valueType:"select",fieldProps:{options:e},colProps:{span:12}}]},{name:["type","sourceDataName"],valueType:"dependency",columns:function(a){var i=a.type,l=a.sourceDataName;return i=="chart"?Me(e==null?void 0:e.find(function(o){return o.value==l})):i=="table"?Kt(e==null?void 0:e.find(function(o){return o.value==l})):i=="StatisticCard"?Vt(e==null?void 0:e.find(function(o){return o.value==l})):i=="form"?Re(e==null?void 0:e.find(function(o){return o.value==l})):i=="tab"?Re(e==null?void 0:e.find(function(o){return o.value==l}),["defaultConfig","form","columns"]):[]}}]},{title:"\u914D\u7F6E",formColumns:[{valueType:"group",columns:[{title:"\u5217\u5BBD",dataIndex:"customer_span",valueType:"digit",width:"100%",colProps:{span:12}},{title:"\u81EA\u5B9A\u4E49\u9AD8\u5EA6",dataIndex:"height",valueType:"digit",width:"100%",colProps:{span:12}}]},Gt]}]},Xt=Jt,Le,wt=(0,xt.iv)(Le||(Le=ft()([`
  & .ant-space-item .anticon {
    margin: 0;
  }

  &:hover {
    display: block !important;
  }
`]))),k=function(e){var r=e.title,a=e.uid,i=e.data,l=e.type,o=l===void 0?"col":l,d=e.extpost,y=(0,S.useContext)(V.x),s=y.tableDesigner,m=s.pageMenu,P=s.reflush,F=s.editUrl,p=s.sourceData,j=(0,S.useContext)(Ct.r),g=j.setting,f=(0,S.useContext)(ne.YF),x=f.setVisible,E=(0,S.useState)({}),c=z()(E,2),u=c[0],h=c[1];return(0,S.useEffect)(function(){h(i)},[m,i]),(0,t.jsx)("div",{onClick:function(b){b.preventDefault()},children:(0,t.jsx)(jt.Z,{trigger:(0,t.jsx)("div",{style:{width:"100%"},onClick:function(b){x==null||x(!1)},children:r}),tabs:o=="col"?Xt(p):Qt(p),value:u,postUrl:F,data:v()({id:m==null?void 0:m.id,uid:a},d),callback:function(b){var T=b.data;return P(T),!0},saFormProps:{devEnable:!1}})})},W=function(e){var r=e.title,a=e.uid,i=e.devData,l=e.col,o=e.row,d=e.otitle,y=e.style,s=i.itemType,m=s===void 0?"row":s,P=(0,S.useContext)(V.x),F=P.tableDesigner.devEnable,p=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(k,{title:(0,t.jsxs)(U.Z,{children:[u==0?(0,t.jsx)(Ie.Z,{}):(0,t.jsx)(Se.Z,{}),(0,t.jsx)("span",{children:u==0?"\u63D2\u5165\u5217":"\u5411\u540E\u6DFB\u52A0\u5217"})]}),uid:a,extpost:{actionType:u==0?"insertCol":"addCol"}}),key:"addCol"+u}},j=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(k,{title:(0,t.jsxs)(U.Z,{children:[u==0?(0,t.jsx)(Ie.Z,{}):(0,t.jsx)(Se.Z,{}),(0,t.jsx)("span",{children:u==0?"\u63D2\u5165\u884C":"\u5411\u540E\u6DFB\u52A0\u884C"})]}),uid:a,type:"row",extpost:{actionType:u==0?"insertRow":"addRow"}}),key:"addRow"+u}},g={label:(0,t.jsx)(k,{title:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(Fe.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:a,data:o,type:"row",extpost:{actionType:"editRow"}}),key:"editRow"},f={label:(0,t.jsx)(k,{title:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(Fe.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:a,data:l,type:"col",extpost:{actionType:"editCol"}}),key:"editCol"},x=function(u){return{label:(0,t.jsx)(Ee.VV,{title:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(pt.Z,{}),(0,t.jsx)("span",{children:"\u5220\u9664"})]}),uid:a,extpost:{actionType:u=="col"?"deleteCol":"deleteRow"}}),key:"deleteItem",danger:!0}},E=m=="row"?[g,p(0),{type:"divider"},j(1),{type:"divider"},x("row")]:[f,j(0),{type:"divider"},p(1),{type:"divider"},x("col")];return F?(0,t.jsxs)(Ze.TR,{className:Ee.mJ,id:a,eid:a,devData:v()({type:"panel"},i),style:y,children:[(0,t.jsx)("div",{className:ht()("general-schema-designer",wt),children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsxs)(U.Z,{size:3,align:"center",children:[(0,t.jsx)(Ze.IW,{children:(0,t.jsx)(mt.Z,{role:"button","aria-label":"drag-handler"})}),(0,t.jsx)(ne.cM,{title:(0,t.jsx)(gt.Z,{role:"button",style:{cursor:"pointer"}}),items:E})]})})}),(0,t.jsx)("div",{role:"button",children:r})]}):d?(0,t.jsx)(t.Fragment,{children:d}):null},kt=["columns"],qt=["url","pageMenu","path"],_t=function(e){var r=e.span,a=e.title,i=e.uid,l=e.rows,o=e.data,d=e.config,y=e.sourceDataName,s=e.chart,m=e.noTitle,P=m===void 0?!1:m,F=e.height,p=e.type,j=e.getData,g=o==null?void 0:o.find(function(u){return u.value==y}),f=(0,S.useContext)(V.x),x=f.tableDesigner.devEnable,E=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return P?null:(0,t.jsx)(W,{otitle:h||a,title:h||a||"\u5143\u7D20 - "+i,uid:i,col:e,devData:{itemType:"col"}})},c=x?E(a):a||!1;return(0,t.jsx)(L.Z,{span:r,children:p=="tab"?(0,t.jsx)(ta,v()({},e)):p=="table"?(0,t.jsx)(ea,v()(v()({},e),{},{data:g})):l||p=="rows"?(0,t.jsxs)(t.Fragment,{children:[E(),(0,t.jsx)(He,{rows:l,data:o})]}):p=="form"?(0,t.jsx)(Ae,v()(v()({},e),{},{idata:g==null?void 0:g.data})):p=="user"?(0,t.jsx)(H.Z,{headStyle:x?{width:"100%",display:"block"}:{},title:x?E():!1,children:(0,t.jsx)(De,{flash:j})}):p=="StatisticCard"?(0,t.jsx)(vt,{title:c,data:g==null?void 0:g.data,config:d}):null})},Ae=function(e){var r,a=e.config,i=e.idata,l=e.title,o=e.uid,d=e.getData,y=e.simple,s=(0,S.useContext)(V.x),m=s.tableDesigner.devEnable,P=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,t.jsx)(W,{otitle:f||l,title:f||l||"\u5143\u7D20 - "+o,uid:o,col:e,devData:{itemType:"col"}})},F=a==null||(r=a.columns)===null||r===void 0?void 0:r.map(function(g){var f=i==null?void 0:i.find(function(x){return x.name==g.dataIndex});return f&&(g=v()(v()({},g),f.props)),g}),p=(0,je.ab)({initRequest:!0,columns:F,devEnable:!1}),j=(0,t.jsx)(ue.Z,{layoutType:y?"LightFilter":"QueryFilter",columns:p,rowProps:{gutter:[16,16]},colProps:{span:12},grid:!1,onFinish:function(f){d==null||d(f)}});return y?j:(0,t.jsx)(H.Z,{bodyStyle:{padding:0},title:m?P():!1,children:j})},ea=function(e){var r=e.config,a=e.data,i=e.title,l=e.uid,o=r.columns,d=se()(r,kt),y=(0,B.useModel)("@@initialState"),s=y.initialState;return(0,t.jsx)(H.Z,{style:{height:"100%"},title:(0,t.jsx)(W,{otitle:null,uid:l,col:e,devData:{itemType:"col"},title:"Table - "+l}),children:(0,t.jsx)(ve.Z,v()({columns:(0,Te.S)({initRequest:!0,columns:o,initialState:s,devEnable:!1}),dataSource:a==null?void 0:a.data,title:function(){return i},rowKey:"id"},d))})},ta=function(e){var r=e.uid,a=e.rows,i=e.data,l=e.getData,o=e.config,d=(0,S.useContext)(V.x),y=d.tableDesigner.devEnable,s=o.form?(0,t.jsx)(Ae,{simple:!0,config:o.form,getData:l}):null;return(0,t.jsx)(H.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},title:y?(0,t.jsx)(W,{uid:r,col:e,devData:{itemType:"col"},title:"Tab - "+r,otitle:null}):!1,children:(0,t.jsx)(ce.Z,{style:{background:"none"},tabBarExtraContent:s?{right:s}:null,items:a==null?void 0:a.map(function(m,P){return{key:P,label:(0,t.jsx)(W,{title:m==null?void 0:m.title,otitle:m==null?void 0:m.title,uid:m==null?void 0:m.uid,row:m,devData:{itemType:"row"}}),children:(0,t.jsx)(Be,{index:P,row:m,data:i,noTitle:!0},P)}})})})},Be=function(e){var r,a=e.row,i=e.data,l=e.noTitle,o=l===void 0?!1:l,d=e.index,y=e.getData;return(0,t.jsxs)(Y.Z,{gutter:[16,16],style:{marginTop:-16},children:[o?null:(0,t.jsx)(L.Z,{span:24,children:(0,t.jsx)(W,{span:24,otitle:null,title:a!=null&&a.title?a==null?void 0:a.title:"\u5206\u7EC4 - "+(a==null?void 0:a.uid),uid:a==null?void 0:a.uid,devData:{itemType:"row"},row:a})},"row"),a==null||(r=a.cols)===null||r===void 0?void 0:r.map(function(s,m){return(0,S.createElement)(_t,v()(v()({},s),{},{key:m,data:i,getData:y}))})]})},aa=function(e){var r,a,i,l=e.url,o=l===void 0?"":l,d=e.pageMenu,y=e.path,s=se()(e,qt),m=(0,S.useState)(),P=z()(m,2),F=P[0],p=P[1],j=(0,S.useState)(),g=z()(j,2),f=g[0],x=g[1],E=function(){var I=re()(X()().mark(function R(){var K,$e,Oe,ie=arguments;return X()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return K=ie.length>0&&ie[0]!==void 0?ie[0]:{},pe.yw.loading("\u52A0\u8F7D\u4E2D..."),J.next=4,de.ZP.get(o,{params:v()(v()({},f),K)});case 4:$e=J.sent,Oe=$e.data,pe.yw.destroy(),p(Oe);case 8:case"end":return J.stop()}},R)}));return function(){return I.apply(this,arguments)}}(),c=(0,S.useState)(),u=z()(c,2),h=u[0],Z=u[1],b=(0,B.useModel)("@@initialState"),T=b.initialState,A=(0,S.useState)(!!(!(T!=null&&(r=T.settings)!==null&&r!==void 0&&r.devDisable)&&T!==null&&T!==void 0&&(a=T.settings)!==null&&a!==void 0&&a.dev)),D=z()(A,2),M=D[0],$=D[1];(0,S.useEffect)(function(){var I;Z(d==null||(I=d.data)===null||I===void 0?void 0:I.panel),E()},[]);var N=(0,ne.Yx)({pageMenu:d,setColumns:Z,getColumnsRender:function(R){return R},type:"panel",devEnable:M,sourceData:F});return(0,S.useEffect)(function(){var I,R;$(!!(!(T!=null&&(I=T.settings)!==null&&I!==void 0&&I.devDisable)&&T!==null&&T!==void 0&&(R=T.settings)!==null&&R!==void 0&&R.dev))},[T==null||(i=T.settings)===null||i===void 0?void 0:i.devDisable]),(0,t.jsx)(q._z,{title:!1,className:"saContainer",fixedHeader:te.P.fixedHeader,header:{breadcrumbRender:function(R,K){return(0,t.jsx)(O.Lr,{path:y})}},children:(0,t.jsxs)(V.x.Provider,{value:{tableDesigner:N},children:[(0,t.jsx)(at.L,{children:F&&(0,t.jsx)(He,v()(v()({},s),{},{rows:h,data:F,getData:E}))},"content"),!F&&(0,t.jsx)(fe.Z,{paragraph:{rows:10},active:!0}),M?(0,t.jsx)(_.ZP,{type:"dashed",onClick:function(){N.edit({base:{id:d==null?void 0:d.id,actionType:"insertRow"}})},style:{marginTop:10},children:"+ Row"},"addrow"):null]})})},He=function(e){var r=e.rows,a=e.data,i=e.getData;return(0,t.jsx)(ee.Z,{vertical:!0,gap:"middle",children:r==null?void 0:r.map(function(l,o){return(0,t.jsx)(Be,{index:o,row:l,data:a,getData:i},o)})})},la=aa,na=n(9783),ia=n.n(na),oa=n(55208),ra=n(34528),ha=n(21655),sa=function(e){var r=e.tableTitle,a=r===void 0?!1:r,i=e.path,l=e.leftMenu,o=l===void 0?{name:"categorys",url_name:"category_id",title:"\u5206\u7C7B\u9009\u62E9",field:{title:"label",key:"value"}}:l,d=o?o.name:"",y=o?o.title:"",s=o?o.url_name:"",m=o?o.field:!1,P=(0,S.useState)([]),F=z()(P,2),p=F[0],j=F[1],g=(0,B.useSearchParams)(),f=z()(g,2),x=f[0],E=f[1],c=x.get(s),u=(0,S.useState)(c?isNaN(c)?c:parseInt(c):0),h=z()(u,2),Z=h[0],b=h[1],T=(0,S.useState)([]),A=z()(T,2),D=A[0],M=A[1];return(0,t.jsx)(q._z,{title:a,className:"saContainer",fixedHeader:te.P.fixedHeader,header:{breadcrumbRender:function(N,I){return(0,t.jsx)(O.Lr,{path:i})}},children:(0,t.jsxs)(Y.Z,{gutter:[24,16],style:p.length>1?{marginLeft:0,marginRight:0}:{},children:[p.length>1&&(0,t.jsxs)(L.Z,{span:3,title:y,style:{background:"#fff",paddingTop:20},children:[(0,t.jsx)(ra.Z,{level:5,children:y}),(0,t.jsx)(oa.Z,{selectedKeys:[Z],expandedKeys:D,treeData:p,fieldNames:m,onSelect:function(N){var I=0;N.length>0&&(I=N.pop()),b(I);var R=(0,O.Cc)([s]);I&&(R[s]=I+""),E(v()({},R))},onExpand:function(N){M(N)}})]}),(0,t.jsx)(L.Z,{span:p.length>1?21:24,children:(0,t.jsx)(V.Z,v()(v()({},e),{},{paramExtra:Z?v()(v()({},e.paramExtra),{},ia()({},s,Z)):v()({},e.paramExtra),beforeTableGet:function(N){var I;if(o&&!(p.length>0||!((I=N.search)!==null&&I!==void 0&&I[d]))&&(j(Q()(N.search[d])),Z&&D.length<1)){var R=(0,O.aT)(N.search[d],Z,{id:"value",children:"children"});console.log(R,111),M(R)}}}))})]})})},da=sa,ua=n(32250),va=n(72644),ca=n(83832),fa=n(45821),pa=function(){return(0,t.jsx)(fa.ZP,{status:"403",title:"403",subTitle:"\u4F60\u6CA1\u6709\u6B64\u9875\u9762\u7684\u8BBF\u95EE\u6743\u9650",extra:(0,t.jsx)(_.ZP,{type:"primary",onClick:function(){return B.history.push("/")},children:"\u8FD4\u56DE\u5DE5\u4F5C\u53F0"})})},ma=function(){var e,r=(0,B.useLocation)(),a=r.pathname,i=a.match(/\/(\d+)$/);i&&(a=r.pathname.replace(i[0],""));var l=(0,O.Sj)(a);return l?((0,S.useEffect)(function(){var o;if((o=l.data)!==null&&o!==void 0&&o.redirect){var d;B.history.push((d=l.data)===null||d===void 0?void 0:d.redirect)}},[l]),(0,t.jsx)(t.Fragment,{children:(e=l.data)!==null&&e!==void 0&&e.redirect?(0,t.jsx)(ca.S,{}):(0,t.jsx)(ga,{menu:l,match:i,pathname:a})})):(0,t.jsx)(pa,{})},ga=function(e){var r=e.menu,a=e.match,i=e.pathname,l=r.data,o=r.page_type,d=r.name;if(a||o=="form"){var y=l.postUrl||l.url?(l.postUrl?l.postUrl:l.url+"/show")+(a?"?id="+(a==null?void 0:a[1]):""):"";return(0,t.jsx)(va.Z,v()(v()({formTitle:!1,pageMenu:r},l),{},{msgcls:function(m){var P=m.code;l.noBack||P||o!="form"&&B.history.back()},url:y,match:!!a,dataId:a?a==null?void 0:a[1]:0}),i)}else switch(o){case"category":return(0,t.jsx)(ua.Z,v()(v()({pageMenu:r,path:i,name:d},l),{},{tableTitle:!1}),i);case"table":return(0,t.jsx)(da,v()(v()({path:i,name:d,pageMenu:r},l),{},{tableTitle:!1}),i);case"panel":return(0,t.jsx)(tt,v()(v()({pageMenu:r},l),{},{path:i}));case"panel2":return(0,t.jsx)(la,v()(v()({pageMenu:r},l),{},{path:i}));default:return null}},xa=ma}}]);
